var sye=Object.defineProperty;var lye=(t,e,n)=>e in t?sye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Wn=(t,e,n)=>(lye(t,typeof e!="symbol"?e+"":e,n),n),vO=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var rt=(t,e,n)=>(vO(t,e,"read from private field"),n?n.call(t):e.get(t)),ni=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},il=(t,e,n,r)=>(vO(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);var Oy=(t,e,n,r)=>({set _(i){il(t,e,i,n)},get _(){return rt(t,e,r)}}),Mu=(t,e,n)=>(vO(t,e,"access private method"),n);function rK(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function t7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?t7(Object(n),!0).forEach(function(r){Qi(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):t7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function j2(t){"@babel/helpers - typeof";return j2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j2(t)}function uye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function cye(t,e,n){return e&&n7(t.prototype,e),n&&n7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Qi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gM(t,e){return hye(t)||pye(t,e)||iK(t,e)||mye()}function B_(t){return fye(t)||dye(t)||iK(t)||gye()}function fye(t){if(Array.isArray(t))return S4(t)}function hye(t){if(Array.isArray(t))return t}function dye(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function pye(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,o=!1,a,s;try{for(n=n.call(t);!(i=(a=n.next()).done)&&(r.push(a.value),!(e&&r.length===e));i=!0);}catch(l){o=!0,s=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}return r}}function iK(t,e){if(t){if(typeof t=="string")return S4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S4(t,e)}}function S4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function gye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var r7=function(){},mM={},oK={},aK=null,sK={mark:r7,measure:r7};try{typeof window<"u"&&(mM=window),typeof document<"u"&&(oK=document),typeof MutationObserver<"u"&&(aK=MutationObserver),typeof performance<"u"&&(sK=performance)}catch{}var vye=mM.navigator||{},i7=vye.userAgent,o7=i7===void 0?"":i7,Uh=mM,Jr=oK,a7=aK,Rw=sK;Uh.document;var Pf=!!Jr.documentElement&&!!Jr.head&&typeof Jr.addEventListener=="function"&&typeof Jr.createElement=="function",lK=~o7.indexOf("MSIE")||~o7.indexOf("Trident/"),Vw,Bw,zw,jw,Uw,_f="___FONT_AWESOME___",w4=16,uK="fa",cK="svg-inline--fa",dg="data-fa-i2svg",x4="data-fa-pseudo-element",yye="data-fa-pseudo-element-pending",vM="data-prefix",yM="data-icon",s7="fontawesome-i2svg",bye="async",_ye=["HTML","HEAD","STYLE","SCRIPT"],fK=function(){try{return!0}catch{return!1}}(),Yr="classic",xi="sharp",bM=[Yr,xi];function z_(t){return new Proxy(t,{get:function(n,r){return r in n?n[r]:n[Yr]}})}var w1=z_((Vw={},Qi(Vw,Yr,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit"}),Qi(Vw,xi,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light"}),Vw)),x1=z_((Bw={},Qi(Bw,Yr,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),Qi(Bw,xi,{solid:"fass",regular:"fasr",light:"fasl"}),Bw)),C1=z_((zw={},Qi(zw,Yr,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),Qi(zw,xi,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light"}),zw)),Sye=z_((jw={},Qi(jw,Yr,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),Qi(jw,xi,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl"}),jw)),wye=/fa(s|r|l|t|d|b|k|ss|sr|sl)?[\-\ ]/,hK="fa-layers-text",xye=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,Cye=z_((Uw={},Qi(Uw,Yr,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),Qi(Uw,xi,{900:"fass",400:"fasr",300:"fasl"}),Uw)),dK=[1,2,3,4,5,6,7,8,9,10],kye=dK.concat([11,12,13,14,15,16,17,18,19,20]),Tye=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Vp={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},k1=new Set;Object.keys(x1[Yr]).map(k1.add.bind(k1));Object.keys(x1[xi]).map(k1.add.bind(k1));var Aye=[].concat(bM,B_(k1),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",Vp.GROUP,Vp.SWAP_OPACITY,Vp.PRIMARY,Vp.SECONDARY]).concat(dK.map(function(t){return"".concat(t,"x")})).concat(kye.map(function(t){return"w-".concat(t)})),Bb=Uh.FontAwesomeConfig||{};function Eye(t){var e=Jr.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}function Pye(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}if(Jr&&typeof Jr.querySelector=="function"){var Oye=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];Oye.forEach(function(t){var e=gM(t,2),n=e[0],r=e[1],i=Pye(Eye(n));i!=null&&(Bb[r]=i)})}var pK={styleDefault:"solid",familyDefault:"classic",cssPrefix:uK,replacementClass:cK,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Bb.familyPrefix&&(Bb.cssPrefix=Bb.familyPrefix);var Xv=yt(yt({},pK),Bb);Xv.autoReplaceSvg||(Xv.observeMutations=!1);var Et={};Object.keys(pK).forEach(function(t){Object.defineProperty(Et,t,{enumerable:!0,set:function(n){Xv[t]=n,zb.forEach(function(r){return r(Et)})},get:function(){return Xv[t]}})});Object.defineProperty(Et,"familyPrefix",{enumerable:!0,set:function(e){Xv.cssPrefix=e,zb.forEach(function(n){return n(Et)})},get:function(){return Xv.cssPrefix}});Uh.FontAwesomeConfig=Et;var zb=[];function Iye(t){return zb.push(t),function(){zb.splice(zb.indexOf(t),1)}}var Yf=w4,nc={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function $ye(t){if(!(!t||!Pf)){var e=Jr.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;for(var n=Jr.head.childNodes,r=null,i=n.length-1;i>-1;i--){var o=n[i],a=(o.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(a)>-1&&(r=o)}return Jr.head.insertBefore(e,r),t}}var Lye="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function T1(){for(var t=12,e="";t-- >0;)e+=Lye[Math.random()*62|0];return e}function x0(t){for(var e=[],n=(t||[]).length>>>0;n--;)e[n]=t[n];return e}function _M(t){return t.classList?x0(t.classList):(t.getAttribute("class")||"").split(" ").filter(function(e){return e})}function gK(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Dye(t){return Object.keys(t||{}).reduce(function(e,n){return e+"".concat(n,'="').concat(gK(t[n]),'" ')},"").trim()}function JT(t){return Object.keys(t||{}).reduce(function(e,n){return e+"".concat(n,": ").concat(t[n].trim(),";")},"")}function SM(t){return t.size!==nc.size||t.x!==nc.x||t.y!==nc.y||t.rotate!==nc.rotate||t.flipX||t.flipY}function Mye(t){var e=t.transform,n=t.containerWidth,r=t.iconWidth,i={transform:"translate(".concat(n/2," 256)")},o="translate(".concat(e.x*32,", ").concat(e.y*32,") "),a="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),s="rotate(".concat(e.rotate," 0 0)"),l={transform:"".concat(o," ").concat(a," ").concat(s)},u={transform:"translate(".concat(r/2*-1," -256)")};return{outer:i,inner:l,path:u}}function Nye(t){var e=t.transform,n=t.width,r=n===void 0?w4:n,i=t.height,o=i===void 0?w4:i,a=t.startCentered,s=a===void 0?!1:a,l="";return s&&lK?l+="translate(".concat(e.x/Yf-r/2,"em, ").concat(e.y/Yf-o/2,"em) "):s?l+="translate(calc(-50% + ".concat(e.x/Yf,"em), calc(-50% + ").concat(e.y/Yf,"em)) "):l+="translate(".concat(e.x/Yf,"em, ").concat(e.y/Yf,"em) "),l+="scale(".concat(e.size/Yf*(e.flipX?-1:1),", ").concat(e.size/Yf*(e.flipY?-1:1),") "),l+="rotate(".concat(e.rotate,"deg) "),l}var Fye=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    -webkit-transition-delay: 0s;
            transition-delay: 0s;
    -webkit-transition-duration: 0s;
            transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function mK(){var t=uK,e=cK,n=Et.cssPrefix,r=Et.replacementClass,i=Fye;if(n!==t||r!==e){var o=new RegExp("\\.".concat(t,"\\-"),"g"),a=new RegExp("\\--".concat(t,"\\-"),"g"),s=new RegExp("\\.".concat(e),"g");i=i.replace(o,".".concat(n,"-")).replace(a,"--".concat(n,"-")).replace(s,".".concat(r))}return i}var l7=!1;function yO(){Et.autoAddCss&&!l7&&($ye(mK()),l7=!0)}var Rye={mixout:function(){return{dom:{css:mK,insertCss:yO}}},hooks:function(){return{beforeDOMElementCreation:function(){yO()},beforeI2svg:function(){yO()}}}},Sf=Uh||{};Sf[_f]||(Sf[_f]={});Sf[_f].styles||(Sf[_f].styles={});Sf[_f].hooks||(Sf[_f].hooks={});Sf[_f].shims||(Sf[_f].shims=[]);var lu=Sf[_f],vK=[],Vye=function t(){Jr.removeEventListener("DOMContentLoaded",t),U2=1,vK.map(function(e){return e()})},U2=!1;Pf&&(U2=(Jr.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Jr.readyState),U2||Jr.addEventListener("DOMContentLoaded",Vye));function Bye(t){Pf&&(U2?setTimeout(t,0):vK.push(t))}function j_(t){var e=t.tag,n=t.attributes,r=n===void 0?{}:n,i=t.children,o=i===void 0?[]:i;return typeof t=="string"?gK(t):"<".concat(e," ").concat(Dye(r),">").concat(o.map(j_).join(""),"</").concat(e,">")}function u7(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}var zye=function(e,n){return function(r,i,o,a){return e.call(n,r,i,o,a)}},bO=function(e,n,r,i){var o=Object.keys(e),a=o.length,s=i!==void 0?zye(n,i):n,l,u,c;for(r===void 0?(l=1,c=e[o[0]]):(l=0,c=r);l<a;l++)u=o[l],c=s(c,e[u],u,e);return c};function jye(t){for(var e=[],n=0,r=t.length;n<r;){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=t.charCodeAt(n++);(o&64512)==56320?e.push(((i&1023)<<10)+(o&1023)+65536):(e.push(i),n--)}else e.push(i)}return e}function C4(t){var e=jye(t);return e.length===1?e[0].toString(16):null}function Uye(t,e){var n=t.length,r=t.charCodeAt(e),i;return r>=55296&&r<=56319&&n>e+1&&(i=t.charCodeAt(e+1),i>=56320&&i<=57343)?(r-55296)*1024+i-56320+65536:r}function c7(t){return Object.keys(t).reduce(function(e,n){var r=t[n],i=!!r.icon;return i?e[r.iconName]=r.icon:e[n]=r,e},{})}function k4(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.skipHooks,i=r===void 0?!1:r,o=c7(e);typeof lu.hooks.addPack=="function"&&!i?lu.hooks.addPack(t,c7(e)):lu.styles[t]=yt(yt({},lu.styles[t]||{}),o),t==="fas"&&k4("fa",e)}var Ww,Hw,Gw,rv=lu.styles,Wye=lu.shims,Hye=(Ww={},Qi(Ww,Yr,Object.values(C1[Yr])),Qi(Ww,xi,Object.values(C1[xi])),Ww),wM=null,yK={},bK={},_K={},SK={},wK={},Gye=(Hw={},Qi(Hw,Yr,Object.keys(w1[Yr])),Qi(Hw,xi,Object.keys(w1[xi])),Hw);function qye(t){return~Aye.indexOf(t)}function Yye(t,e){var n=e.split("-"),r=n[0],i=n.slice(1).join("-");return r===t&&i!==""&&!qye(i)?i:null}var xK=function(){var e=function(o){return bO(rv,function(a,s,l){return a[l]=bO(s,o,{}),a},{})};yK=e(function(i,o,a){if(o[3]&&(i[o[3]]=a),o[2]){var s=o[2].filter(function(l){return typeof l=="number"});s.forEach(function(l){i[l.toString(16)]=a})}return i}),bK=e(function(i,o,a){if(i[a]=a,o[2]){var s=o[2].filter(function(l){return typeof l=="string"});s.forEach(function(l){i[l]=a})}return i}),wK=e(function(i,o,a){var s=o[2];return i[a]=a,s.forEach(function(l){i[l]=a}),i});var n="far"in rv||Et.autoFetchSvg,r=bO(Wye,function(i,o){var a=o[0],s=o[1],l=o[2];return s==="far"&&!n&&(s="fas"),typeof a=="string"&&(i.names[a]={prefix:s,iconName:l}),typeof a=="number"&&(i.unicodes[a.toString(16)]={prefix:s,iconName:l}),i},{names:{},unicodes:{}});_K=r.names,SK=r.unicodes,wM=ZT(Et.styleDefault,{family:Et.familyDefault})};Iye(function(t){wM=ZT(t.styleDefault,{family:Et.familyDefault})});xK();function xM(t,e){return(yK[t]||{})[e]}function Kye(t,e){return(bK[t]||{})[e]}function Bp(t,e){return(wK[t]||{})[e]}function CK(t){return _K[t]||{prefix:null,iconName:null}}function Xye(t){var e=SK[t],n=xM("fas",t);return e||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function Wh(){return wM}var CM=function(){return{prefix:null,iconName:null,rest:[]}};function ZT(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.family,r=n===void 0?Yr:n,i=w1[r][t],o=x1[r][t]||x1[r][i],a=t in lu.styles?t:null;return o||a||null}var f7=(Gw={},Qi(Gw,Yr,Object.keys(C1[Yr])),Qi(Gw,xi,Object.keys(C1[xi])),Gw);function QT(t){var e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.skipLookups,i=r===void 0?!1:r,o=(e={},Qi(e,Yr,"".concat(Et.cssPrefix,"-").concat(Yr)),Qi(e,xi,"".concat(Et.cssPrefix,"-").concat(xi)),e),a=null,s=Yr;(t.includes(o[Yr])||t.some(function(u){return f7[Yr].includes(u)}))&&(s=Yr),(t.includes(o[xi])||t.some(function(u){return f7[xi].includes(u)}))&&(s=xi);var l=t.reduce(function(u,c){var f=Yye(Et.cssPrefix,c);if(rv[c]?(c=Hye[s].includes(c)?Sye[s][c]:c,a=c,u.prefix=c):Gye[s].indexOf(c)>-1?(a=c,u.prefix=ZT(c,{family:s})):f?u.iconName=f:c!==Et.replacementClass&&c!==o[Yr]&&c!==o[xi]&&u.rest.push(c),!i&&u.prefix&&u.iconName){var h=a==="fa"?CK(u.iconName):{},d=Bp(u.prefix,u.iconName);h.prefix&&(a=null),u.iconName=h.iconName||d||u.iconName,u.prefix=h.prefix||u.prefix,u.prefix==="far"&&!rv.far&&rv.fas&&!Et.autoFetchSvg&&(u.prefix="fas")}return u},CM());return(t.includes("fa-brands")||t.includes("fab"))&&(l.prefix="fab"),(t.includes("fa-duotone")||t.includes("fad"))&&(l.prefix="fad"),!l.prefix&&s===xi&&(rv.fass||Et.autoFetchSvg)&&(l.prefix="fass",l.iconName=Bp(l.prefix,l.iconName)||l.iconName),(l.prefix==="fa"||a==="fa")&&(l.prefix=Wh()||"fas"),l}var Jye=function(){function t(){uye(this,t),this.definitions={}}return cye(t,[{key:"add",value:function(){for(var n=this,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=i.reduce(this._pullDefinitions,{});Object.keys(a).forEach(function(s){n.definitions[s]=yt(yt({},n.definitions[s]||{}),a[s]),k4(s,a[s]);var l=C1[Yr][s];l&&k4(l,a[s]),xK()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(n,r){var i=r.prefix&&r.iconName&&r.icon?{0:r}:r;return Object.keys(i).map(function(o){var a=i[o],s=a.prefix,l=a.iconName,u=a.icon,c=u[2];n[s]||(n[s]={}),c.length>0&&c.forEach(function(f){typeof f=="string"&&(n[s][f]=u)}),n[s][l]=u}),n}}]),t}(),h7=[],iv={},_v={},Zye=Object.keys(_v);function Qye(t,e){var n=e.mixoutsTo;return h7=t,iv={},Object.keys(_v).forEach(function(r){Zye.indexOf(r)===-1&&delete _v[r]}),h7.forEach(function(r){var i=r.mixout?r.mixout():{};if(Object.keys(i).forEach(function(a){typeof i[a]=="function"&&(n[a]=i[a]),j2(i[a])==="object"&&Object.keys(i[a]).forEach(function(s){n[a]||(n[a]={}),n[a][s]=i[a][s]})}),r.hooks){var o=r.hooks();Object.keys(o).forEach(function(a){iv[a]||(iv[a]=[]),iv[a].push(o[a])})}r.provides&&r.provides(_v)}),n}function T4(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=iv[t]||[];return o.forEach(function(a){e=a.apply(null,[e].concat(r))}),e}function pg(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=iv[t]||[];i.forEach(function(o){o.apply(null,n)})}function wf(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);return _v[t]?_v[t].apply(null,e):void 0}function A4(t){t.prefix==="fa"&&(t.prefix="fas");var e=t.iconName,n=t.prefix||Wh();if(e)return e=Bp(n,e)||e,u7(kK.definitions,n,e)||u7(lu.styles,n,e)}var kK=new Jye,ebe=function(){Et.autoReplaceSvg=!1,Et.observeMutations=!1,pg("noAuto")},tbe={i2svg:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Pf?(pg("beforeI2svg",e),wf("pseudoElements2svg",e),wf("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.autoReplaceSvgRoot;Et.autoReplaceSvg===!1&&(Et.autoReplaceSvg=!0),Et.observeMutations=!0,Bye(function(){rbe({autoReplaceSvgRoot:n}),pg("watch",e)})}},nbe={icon:function(e){if(e===null)return null;if(j2(e)==="object"&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:Bp(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&e.length===2){var n=e[1].indexOf("fa-")===0?e[1].slice(3):e[1],r=ZT(e[0]);return{prefix:r,iconName:Bp(r,n)||n}}if(typeof e=="string"&&(e.indexOf("".concat(Et.cssPrefix,"-"))>-1||e.match(wye))){var i=QT(e.split(" "),{skipLookups:!0});return{prefix:i.prefix||Wh(),iconName:Bp(i.prefix,i.iconName)||i.iconName}}if(typeof e=="string"){var o=Wh();return{prefix:o,iconName:Bp(o,e)||e}}}},Ws={noAuto:ebe,config:Et,dom:tbe,parse:nbe,library:kK,findIconDefinition:A4,toHtml:j_},rbe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.autoReplaceSvgRoot,r=n===void 0?Jr:n;(Object.keys(lu.styles).length>0||Et.autoFetchSvg)&&Pf&&Et.autoReplaceSvg&&Ws.dom.i2svg({node:r})};function eA(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(function(r){return j_(r)})}}),Object.defineProperty(t,"node",{get:function(){if(Pf){var r=Jr.createElement("div");return r.innerHTML=t.html,r.children}}}),t}function ibe(t){var e=t.children,n=t.main,r=t.mask,i=t.attributes,o=t.styles,a=t.transform;if(SM(a)&&n.found&&!r.found){var s=n.width,l=n.height,u={x:s/l/2,y:.5};i.style=JT(yt(yt({},o),{},{"transform-origin":"".concat(u.x+a.x/16,"em ").concat(u.y+a.y/16,"em")}))}return[{tag:"svg",attributes:i,children:e}]}function obe(t){var e=t.prefix,n=t.iconName,r=t.children,i=t.attributes,o=t.symbol,a=o===!0?"".concat(e,"-").concat(Et.cssPrefix,"-").concat(n):o;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:yt(yt({},i),{},{id:a}),children:r}]}]}function kM(t){var e=t.icons,n=e.main,r=e.mask,i=t.prefix,o=t.iconName,a=t.transform,s=t.symbol,l=t.title,u=t.maskId,c=t.titleId,f=t.extra,h=t.watchable,d=h===void 0?!1:h,g=r.found?r:n,y=g.width,_=g.height,v=i==="fak",S=[Et.replacementClass,o?"".concat(Et.cssPrefix,"-").concat(o):""].filter(function(I){return f.classes.indexOf(I)===-1}).filter(function(I){return I!==""||!!I}).concat(f.classes).join(" "),C={children:[],attributes:yt(yt({},f.attributes),{},{"data-prefix":i,"data-icon":o,class:S,role:f.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(y," ").concat(_)})},k=v&&!~f.classes.indexOf("fa-fw")?{width:"".concat(y/_*16*.0625,"em")}:{};d&&(C.attributes[dg]=""),l&&(C.children.push({tag:"title",attributes:{id:C.attributes["aria-labelledby"]||"title-".concat(c||T1())},children:[l]}),delete C.attributes.title);var x=yt(yt({},C),{},{prefix:i,iconName:o,main:n,mask:r,maskId:u,transform:a,symbol:s,styles:yt(yt({},k),f.styles)}),m=r.found&&n.found?wf("generateAbstractMask",x)||{children:[],attributes:{}}:wf("generateAbstractIcon",x)||{children:[],attributes:{}},T=m.children,P=m.attributes;return x.children=T,x.attributes=P,s?obe(x):ibe(x)}function d7(t){var e=t.content,n=t.width,r=t.height,i=t.transform,o=t.title,a=t.extra,s=t.watchable,l=s===void 0?!1:s,u=yt(yt(yt({},a.attributes),o?{title:o}:{}),{},{class:a.classes.join(" ")});l&&(u[dg]="");var c=yt({},a.styles);SM(i)&&(c.transform=Nye({transform:i,startCentered:!0,width:n,height:r}),c["-webkit-transform"]=c.transform);var f=JT(c);f.length>0&&(u.style=f);var h=[];return h.push({tag:"span",attributes:u,children:[e]}),o&&h.push({tag:"span",attributes:{class:"sr-only"},children:[o]}),h}function abe(t){var e=t.content,n=t.title,r=t.extra,i=yt(yt(yt({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),o=JT(r.styles);o.length>0&&(i.style=o);var a=[];return a.push({tag:"span",attributes:i,children:[e]}),n&&a.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),a}var _O=lu.styles;function E4(t){var e=t[0],n=t[1],r=t.slice(4),i=gM(r,1),o=i[0],a=null;return Array.isArray(o)?a={tag:"g",attributes:{class:"".concat(Et.cssPrefix,"-").concat(Vp.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Et.cssPrefix,"-").concat(Vp.SECONDARY),fill:"currentColor",d:o[0]}},{tag:"path",attributes:{class:"".concat(Et.cssPrefix,"-").concat(Vp.PRIMARY),fill:"currentColor",d:o[1]}}]}:a={tag:"path",attributes:{fill:"currentColor",d:o}},{found:!0,width:e,height:n,icon:a}}var sbe={found:!1,width:512,height:512};function lbe(t,e){!fK&&!Et.showMissingIcons&&t&&console.error('Icon with name "'.concat(t,'" and prefix "').concat(e,'" is missing.'))}function P4(t,e){var n=e;return e==="fa"&&Et.styleDefault!==null&&(e=Wh()),new Promise(function(r,i){if(wf("missingIconAbstract"),n==="fa"){var o=CK(t)||{};t=o.iconName||t,e=o.prefix||e}if(t&&e&&_O[e]&&_O[e][t]){var a=_O[e][t];return r(E4(a))}lbe(t,e),r(yt(yt({},sbe),{},{icon:Et.showMissingIcons&&t?wf("missingIconAbstract")||{}:{}}))})}var p7=function(){},O4=Et.measurePerformance&&Rw&&Rw.mark&&Rw.measure?Rw:{mark:p7,measure:p7},bb='FA "6.4.0"',ube=function(e){return O4.mark("".concat(bb," ").concat(e," begins")),function(){return TK(e)}},TK=function(e){O4.mark("".concat(bb," ").concat(e," ends")),O4.measure("".concat(bb," ").concat(e),"".concat(bb," ").concat(e," begins"),"".concat(bb," ").concat(e," ends"))},TM={begin:ube,end:TK},qC=function(){};function g7(t){var e=t.getAttribute?t.getAttribute(dg):null;return typeof e=="string"}function cbe(t){var e=t.getAttribute?t.getAttribute(vM):null,n=t.getAttribute?t.getAttribute(yM):null;return e&&n}function fbe(t){return t&&t.classList&&t.classList.contains&&t.classList.contains(Et.replacementClass)}function hbe(){if(Et.autoReplaceSvg===!0)return YC.replace;var t=YC[Et.autoReplaceSvg];return t||YC.replace}function dbe(t){return Jr.createElementNS("http://www.w3.org/2000/svg",t)}function pbe(t){return Jr.createElement(t)}function AK(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.ceFn,r=n===void 0?t.tag==="svg"?dbe:pbe:n;if(typeof t=="string")return Jr.createTextNode(t);var i=r(t.tag);Object.keys(t.attributes||[]).forEach(function(a){i.setAttribute(a,t.attributes[a])});var o=t.children||[];return o.forEach(function(a){i.appendChild(AK(a,{ceFn:r}))}),i}function gbe(t){var e=" ".concat(t.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}var YC={replace:function(e){var n=e[0];if(n.parentNode)if(e[1].forEach(function(i){n.parentNode.insertBefore(AK(i),n)}),n.getAttribute(dg)===null&&Et.keepOriginalSource){var r=Jr.createComment(gbe(n));n.parentNode.replaceChild(r,n)}else n.remove()},nest:function(e){var n=e[0],r=e[1];if(~_M(n).indexOf(Et.replacementClass))return YC.replace(e);var i=new RegExp("".concat(Et.cssPrefix,"-.*"));if(delete r[0].attributes.id,r[0].attributes.class){var o=r[0].attributes.class.split(" ").reduce(function(s,l){return l===Et.replacementClass||l.match(i)?s.toSvg.push(l):s.toNode.push(l),s},{toNode:[],toSvg:[]});r[0].attributes.class=o.toSvg.join(" "),o.toNode.length===0?n.removeAttribute("class"):n.setAttribute("class",o.toNode.join(" "))}var a=r.map(function(s){return j_(s)}).join(`
`);n.setAttribute(dg,""),n.innerHTML=a}};function m7(t){t()}function EK(t,e){var n=typeof e=="function"?e:qC;if(t.length===0)n();else{var r=m7;Et.mutateApproach===bye&&(r=Uh.requestAnimationFrame||m7),r(function(){var i=hbe(),o=TM.begin("mutate");t.map(i),o(),n()})}}var AM=!1;function PK(){AM=!0}function I4(){AM=!1}var W2=null;function v7(t){if(a7&&Et.observeMutations){var e=t.treeCallback,n=e===void 0?qC:e,r=t.nodeCallback,i=r===void 0?qC:r,o=t.pseudoElementsCallback,a=o===void 0?qC:o,s=t.observeMutationsRoot,l=s===void 0?Jr:s;W2=new a7(function(u){if(!AM){var c=Wh();x0(u).forEach(function(f){if(f.type==="childList"&&f.addedNodes.length>0&&!g7(f.addedNodes[0])&&(Et.searchPseudoElements&&a(f.target),n(f.target)),f.type==="attributes"&&f.target.parentNode&&Et.searchPseudoElements&&a(f.target.parentNode),f.type==="attributes"&&g7(f.target)&&~Tye.indexOf(f.attributeName))if(f.attributeName==="class"&&cbe(f.target)){var h=QT(_M(f.target)),d=h.prefix,g=h.iconName;f.target.setAttribute(vM,d||c),g&&f.target.setAttribute(yM,g)}else fbe(f.target)&&i(f.target)})}}),Pf&&W2.observe(l,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function mbe(){W2&&W2.disconnect()}function vbe(t){var e=t.getAttribute("style"),n=[];return e&&(n=e.split(";").reduce(function(r,i){var o=i.split(":"),a=o[0],s=o.slice(1);return a&&s.length>0&&(r[a]=s.join(":").trim()),r},{})),n}function ybe(t){var e=t.getAttribute("data-prefix"),n=t.getAttribute("data-icon"),r=t.innerText!==void 0?t.innerText.trim():"",i=QT(_M(t));return i.prefix||(i.prefix=Wh()),e&&n&&(i.prefix=e,i.iconName=n),i.iconName&&i.prefix||(i.prefix&&r.length>0&&(i.iconName=Kye(i.prefix,t.innerText)||xM(i.prefix,C4(t.innerText))),!i.iconName&&Et.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(i.iconName=t.firstChild.data)),i}function bbe(t){var e=x0(t.attributes).reduce(function(i,o){return i.name!=="class"&&i.name!=="style"&&(i[o.name]=o.value),i},{}),n=t.getAttribute("title"),r=t.getAttribute("data-fa-title-id");return Et.autoA11y&&(n?e["aria-labelledby"]="".concat(Et.replacementClass,"-title-").concat(r||T1()):(e["aria-hidden"]="true",e.focusable="false")),e}function _be(){return{iconName:null,title:null,titleId:null,prefix:null,transform:nc,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function y7(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},n=ybe(t),r=n.iconName,i=n.prefix,o=n.rest,a=bbe(t),s=T4("parseNodeAttributes",{},t),l=e.styleParser?vbe(t):[];return yt({iconName:r,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:i,transform:nc,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:o,styles:l,attributes:a}},s)}var Sbe=lu.styles;function OK(t){var e=Et.autoReplaceSvg==="nest"?y7(t,{styleParser:!1}):y7(t);return~e.extra.classes.indexOf(hK)?wf("generateLayersText",t,e):wf("generateSvgReplacementMutation",t,e)}var Hh=new Set;bM.map(function(t){Hh.add("fa-".concat(t))});Object.keys(w1[Yr]).map(Hh.add.bind(Hh));Object.keys(w1[xi]).map(Hh.add.bind(Hh));Hh=B_(Hh);function b7(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Pf)return Promise.resolve();var n=Jr.documentElement.classList,r=function(f){return n.add("".concat(s7,"-").concat(f))},i=function(f){return n.remove("".concat(s7,"-").concat(f))},o=Et.autoFetchSvg?Hh:bM.map(function(c){return"fa-".concat(c)}).concat(Object.keys(Sbe));o.includes("fa")||o.push("fa");var a=[".".concat(hK,":not([").concat(dg,"])")].concat(o.map(function(c){return".".concat(c,":not([").concat(dg,"])")})).join(", ");if(a.length===0)return Promise.resolve();var s=[];try{s=x0(t.querySelectorAll(a))}catch{}if(s.length>0)r("pending"),i("complete");else return Promise.resolve();var l=TM.begin("onTree"),u=s.reduce(function(c,f){try{var h=OK(f);h&&c.push(h)}catch(d){fK||d.name==="MissingIcon"&&console.error(d)}return c},[]);return new Promise(function(c,f){Promise.all(u).then(function(h){EK(h,function(){r("active"),r("complete"),i("pending"),typeof e=="function"&&e(),l(),c()})}).catch(function(h){l(),f(h)})})}function wbe(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;OK(t).then(function(n){n&&EK([n],e)})}function xbe(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=(e||{}).icon?e:A4(e||{}),i=n.mask;return i&&(i=(i||{}).icon?i:A4(i||{})),t(r,yt(yt({},n),{},{mask:i}))}}var Cbe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.transform,i=r===void 0?nc:r,o=n.symbol,a=o===void 0?!1:o,s=n.mask,l=s===void 0?null:s,u=n.maskId,c=u===void 0?null:u,f=n.title,h=f===void 0?null:f,d=n.titleId,g=d===void 0?null:d,y=n.classes,_=y===void 0?[]:y,v=n.attributes,S=v===void 0?{}:v,C=n.styles,k=C===void 0?{}:C;if(e){var x=e.prefix,m=e.iconName,T=e.icon;return eA(yt({type:"icon"},e),function(){return pg("beforeDOMElementCreation",{iconDefinition:e,params:n}),Et.autoA11y&&(h?S["aria-labelledby"]="".concat(Et.replacementClass,"-title-").concat(g||T1()):(S["aria-hidden"]="true",S.focusable="false")),kM({icons:{main:E4(T),mask:l?E4(l.icon):{found:!1,width:null,height:null,icon:{}}},prefix:x,iconName:m,transform:yt(yt({},nc),i),symbol:a,title:h,maskId:c,titleId:g,extra:{attributes:S,styles:k,classes:_}})})}},kbe={mixout:function(){return{icon:xbe(Cbe)}},hooks:function(){return{mutationObserverCallbacks:function(n){return n.treeCallback=b7,n.nodeCallback=wbe,n}}},provides:function(e){e.i2svg=function(n){var r=n.node,i=r===void 0?Jr:r,o=n.callback,a=o===void 0?function(){}:o;return b7(i,a)},e.generateSvgReplacementMutation=function(n,r){var i=r.iconName,o=r.title,a=r.titleId,s=r.prefix,l=r.transform,u=r.symbol,c=r.mask,f=r.maskId,h=r.extra;return new Promise(function(d,g){Promise.all([P4(i,s),c.iconName?P4(c.iconName,c.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(y){var _=gM(y,2),v=_[0],S=_[1];d([n,kM({icons:{main:v,mask:S},prefix:s,iconName:i,transform:l,symbol:u,maskId:f,title:o,titleId:a,extra:h,watchable:!0})])}).catch(g)})},e.generateAbstractIcon=function(n){var r=n.children,i=n.attributes,o=n.main,a=n.transform,s=n.styles,l=JT(s);l.length>0&&(i.style=l);var u;return SM(a)&&(u=wf("generateAbstractTransformGrouping",{main:o,transform:a,containerWidth:o.width,iconWidth:o.width})),r.push(u||o.icon),{children:r,attributes:i}}}},Tbe={mixout:function(){return{layer:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.classes,o=i===void 0?[]:i;return eA({type:"layer"},function(){pg("beforeDOMElementCreation",{assembler:n,params:r});var a=[];return n(function(s){Array.isArray(s)?s.map(function(l){a=a.concat(l.abstract)}):a=a.concat(s.abstract)}),[{tag:"span",attributes:{class:["".concat(Et.cssPrefix,"-layers")].concat(B_(o)).join(" ")},children:a}]})}}}},Abe={mixout:function(){return{counter:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.title,o=i===void 0?null:i,a=r.classes,s=a===void 0?[]:a,l=r.attributes,u=l===void 0?{}:l,c=r.styles,f=c===void 0?{}:c;return eA({type:"counter",content:n},function(){return pg("beforeDOMElementCreation",{content:n,params:r}),abe({content:n.toString(),title:o,extra:{attributes:u,styles:f,classes:["".concat(Et.cssPrefix,"-layers-counter")].concat(B_(s))}})})}}}},Ebe={mixout:function(){return{text:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.transform,o=i===void 0?nc:i,a=r.title,s=a===void 0?null:a,l=r.classes,u=l===void 0?[]:l,c=r.attributes,f=c===void 0?{}:c,h=r.styles,d=h===void 0?{}:h;return eA({type:"text",content:n},function(){return pg("beforeDOMElementCreation",{content:n,params:r}),d7({content:n,transform:yt(yt({},nc),o),title:s,extra:{attributes:f,styles:d,classes:["".concat(Et.cssPrefix,"-layers-text")].concat(B_(u))}})})}}},provides:function(e){e.generateLayersText=function(n,r){var i=r.title,o=r.transform,a=r.extra,s=null,l=null;if(lK){var u=parseInt(getComputedStyle(n).fontSize,10),c=n.getBoundingClientRect();s=c.width/u,l=c.height/u}return Et.autoA11y&&!i&&(a.attributes["aria-hidden"]="true"),Promise.resolve([n,d7({content:n.innerHTML,width:s,height:l,transform:o,title:i,extra:a,watchable:!0})])}}},Pbe=new RegExp('"',"ug"),_7=[1105920,1112319];function Obe(t){var e=t.replace(Pbe,""),n=Uye(e,0),r=n>=_7[0]&&n<=_7[1],i=e.length===2?e[0]===e[1]:!1;return{value:C4(i?e[0]:e),isSecondary:r||i}}function S7(t,e){var n="".concat(yye).concat(e.replace(":","-"));return new Promise(function(r,i){if(t.getAttribute(n)!==null)return r();var o=x0(t.children),a=o.filter(function(T){return T.getAttribute(x4)===e})[0],s=Uh.getComputedStyle(t,e),l=s.getPropertyValue("font-family").match(xye),u=s.getPropertyValue("font-weight"),c=s.getPropertyValue("content");if(a&&!l)return t.removeChild(a),r();if(l&&c!=="none"&&c!==""){var f=s.getPropertyValue("content"),h=~["Sharp"].indexOf(l[2])?xi:Yr,d=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(l[2])?x1[h][l[2].toLowerCase()]:Cye[h][u],g=Obe(f),y=g.value,_=g.isSecondary,v=l[0].startsWith("FontAwesome"),S=xM(d,y),C=S;if(v){var k=Xye(y);k.iconName&&k.prefix&&(S=k.iconName,d=k.prefix)}if(S&&!_&&(!a||a.getAttribute(vM)!==d||a.getAttribute(yM)!==C)){t.setAttribute(n,C),a&&t.removeChild(a);var x=_be(),m=x.extra;m.attributes[x4]=e,P4(S,d).then(function(T){var P=kM(yt(yt({},x),{},{icons:{main:T,mask:CM()},prefix:d,iconName:C,extra:m,watchable:!0})),I=Jr.createElement("svg");e==="::before"?t.insertBefore(I,t.firstChild):t.appendChild(I),I.outerHTML=P.map(function(M){return j_(M)}).join(`
`),t.removeAttribute(n),r()}).catch(i)}else r()}else r()})}function Ibe(t){return Promise.all([S7(t,"::before"),S7(t,"::after")])}function $be(t){return t.parentNode!==document.head&&!~_ye.indexOf(t.tagName.toUpperCase())&&!t.getAttribute(x4)&&(!t.parentNode||t.parentNode.tagName!=="svg")}function w7(t){if(Pf)return new Promise(function(e,n){var r=x0(t.querySelectorAll("*")).filter($be).map(Ibe),i=TM.begin("searchPseudoElements");PK(),Promise.all(r).then(function(){i(),I4(),e()}).catch(function(){i(),I4(),n()})})}var Lbe={hooks:function(){return{mutationObserverCallbacks:function(n){return n.pseudoElementsCallback=w7,n}}},provides:function(e){e.pseudoElements2svg=function(n){var r=n.node,i=r===void 0?Jr:r;Et.searchPseudoElements&&w7(i)}}},x7=!1,Dbe={mixout:function(){return{dom:{unwatch:function(){PK(),x7=!0}}}},hooks:function(){return{bootstrap:function(){v7(T4("mutationObserverCallbacks",{}))},noAuto:function(){mbe()},watch:function(n){var r=n.observeMutationsRoot;x7?I4():v7(T4("mutationObserverCallbacks",{observeMutationsRoot:r}))}}}},C7=function(e){var n={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e.toLowerCase().split(" ").reduce(function(r,i){var o=i.toLowerCase().split("-"),a=o[0],s=o.slice(1).join("-");if(a&&s==="h")return r.flipX=!0,r;if(a&&s==="v")return r.flipY=!0,r;if(s=parseFloat(s),isNaN(s))return r;switch(a){case"grow":r.size=r.size+s;break;case"shrink":r.size=r.size-s;break;case"left":r.x=r.x-s;break;case"right":r.x=r.x+s;break;case"up":r.y=r.y-s;break;case"down":r.y=r.y+s;break;case"rotate":r.rotate=r.rotate+s;break}return r},n)},Mbe={mixout:function(){return{parse:{transform:function(n){return C7(n)}}}},hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-transform");return i&&(n.transform=C7(i)),n}}},provides:function(e){e.generateAbstractTransformGrouping=function(n){var r=n.main,i=n.transform,o=n.containerWidth,a=n.iconWidth,s={transform:"translate(".concat(o/2," 256)")},l="translate(".concat(i.x*32,", ").concat(i.y*32,") "),u="scale(".concat(i.size/16*(i.flipX?-1:1),", ").concat(i.size/16*(i.flipY?-1:1),") "),c="rotate(".concat(i.rotate," 0 0)"),f={transform:"".concat(l," ").concat(u," ").concat(c)},h={transform:"translate(".concat(a/2*-1," -256)")},d={outer:s,inner:f,path:h};return{tag:"g",attributes:yt({},d.outer),children:[{tag:"g",attributes:yt({},d.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:yt(yt({},r.icon.attributes),d.path)}]}]}}}},SO={x:0,y:0,width:"100%",height:"100%"};function k7(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function Nbe(t){return t.tag==="g"?t.children:[t]}var Fbe={hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-mask"),o=i?QT(i.split(" ").map(function(a){return a.trim()})):CM();return o.prefix||(o.prefix=Wh()),n.mask=o,n.maskId=r.getAttribute("data-fa-mask-id"),n}}},provides:function(e){e.generateAbstractMask=function(n){var r=n.children,i=n.attributes,o=n.main,a=n.mask,s=n.maskId,l=n.transform,u=o.width,c=o.icon,f=a.width,h=a.icon,d=Mye({transform:l,containerWidth:f,iconWidth:u}),g={tag:"rect",attributes:yt(yt({},SO),{},{fill:"white"})},y=c.children?{children:c.children.map(k7)}:{},_={tag:"g",attributes:yt({},d.inner),children:[k7(yt({tag:c.tag,attributes:yt(yt({},c.attributes),d.path)},y))]},v={tag:"g",attributes:yt({},d.outer),children:[_]},S="mask-".concat(s||T1()),C="clip-".concat(s||T1()),k={tag:"mask",attributes:yt(yt({},SO),{},{id:S,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[g,v]},x={tag:"defs",children:[{tag:"clipPath",attributes:{id:C},children:Nbe(h)},k]};return r.push(x,{tag:"rect",attributes:yt({fill:"currentColor","clip-path":"url(#".concat(C,")"),mask:"url(#".concat(S,")")},SO)}),{children:r,attributes:i}}}},Rbe={provides:function(e){var n=!1;Uh.matchMedia&&(n=Uh.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var r=[],i={fill:"currentColor"},o={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};r.push({tag:"path",attributes:yt(yt({},i),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var a=yt(yt({},o),{},{attributeName:"opacity"}),s={tag:"circle",attributes:yt(yt({},i),{},{cx:"256",cy:"364",r:"28"}),children:[]};return n||s.children.push({tag:"animate",attributes:yt(yt({},o),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:yt(yt({},a),{},{values:"1;0;1;1;0;1;"})}),r.push(s),r.push({tag:"path",attributes:yt(yt({},i),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:n?[]:[{tag:"animate",attributes:yt(yt({},a),{},{values:"1;0;0;0;0;1;"})}]}),n||r.push({tag:"path",attributes:yt(yt({},i),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:yt(yt({},a),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:r}}}},Vbe={hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-symbol"),o=i===null?!1:i===""?!0:i;return n.symbol=o,n}}}},Bbe=[Rye,kbe,Tbe,Abe,Ebe,Lbe,Dbe,Mbe,Fbe,Rbe,Vbe];Qye(Bbe,{mixoutsTo:Ws});Ws.noAuto;Ws.config;var zbe=Ws.library;Ws.dom;var $4=Ws.parse;Ws.findIconDefinition;Ws.toHtml;var jbe=Ws.icon;Ws.layer;Ws.text;Ws.counter;function tA(t,e){const n=Object.create(null),r=t.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return e?i=>!!n[i.toLowerCase()]:i=>!!n[i]}const _r={},Sv=[],fu=()=>{},Ube=()=>!1,Wbe=/^on[^a-z]/,U_=t=>Wbe.test(t),EM=t=>t.startsWith("onUpdate:"),jr=Object.assign,PM=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Hbe=Object.prototype.hasOwnProperty,Xn=(t,e)=>Hbe.call(t,e),_t=Array.isArray,wv=t=>C0(t)==="[object Map]",Ng=t=>C0(t)==="[object Set]",T7=t=>C0(t)==="[object Date]",Gbe=t=>C0(t)==="[object RegExp]",on=t=>typeof t=="function",oi=t=>typeof t=="string",A1=t=>typeof t=="symbol",xr=t=>t!==null&&typeof t=="object",OM=t=>xr(t)&&on(t.then)&&on(t.catch),IK=Object.prototype.toString,C0=t=>IK.call(t),qbe=t=>C0(t).slice(8,-1),$K=t=>C0(t)==="[object Object]",IM=t=>oi(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,jb=tA(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),nA=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},Ybe=/-(\w)/g,as=nA(t=>t.replace(Ybe,(e,n)=>n?n.toUpperCase():"")),Kbe=/\B([A-Z])/g,_l=nA(t=>t.replace(Kbe,"-$1").toLowerCase()),W_=nA(t=>t.charAt(0).toUpperCase()+t.slice(1)),Ub=nA(t=>t?`on${W_(t)}`:""),Jv=(t,e)=>!Object.is(t,e),xv=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},H2=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},G2=t=>{const e=parseFloat(t);return isNaN(e)?t:e},q2=t=>{const e=oi(t)?Number(t):NaN;return isNaN(e)?t:e};let A7;const L4=()=>A7||(A7=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Xbe="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console",Jbe=tA(Xbe);function H_(t){if(_t(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=oi(r)?t1e(r):H_(r);if(i)for(const o in i)e[o]=i[o]}return e}else{if(oi(t))return t;if(xr(t))return t}}const Zbe=/;(?![^(]*\))/g,Qbe=/:([^]+)/,e1e=new RegExp("\\/\\*.*?\\*\\/","gs");function t1e(t){const e={};return t.replace(e1e,"").split(Zbe).forEach(n=>{if(n){const r=n.split(Qbe);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Wt(t){let e="";if(oi(t))e=t;else if(_t(t))for(let n=0;n<t.length;n++){const r=Wt(t[n]);r&&(e+=r+" ")}else if(xr(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function $M(t){if(!t)return null;let{class:e,style:n}=t;return e&&!oi(e)&&(t.class=Wt(e)),n&&(t.style=H_(n)),t}const n1e="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",r1e=tA(n1e);function LK(t){return!!t||t===""}function i1e(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Gh(t[r],e[r]);return n}function Gh(t,e){if(t===e)return!0;let n=T7(t),r=T7(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=A1(t),r=A1(e),n||r)return t===e;if(n=_t(t),r=_t(e),n||r)return n&&r?i1e(t,e):!1;if(n=xr(t),r=xr(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,o=Object.keys(e).length;if(i!==o)return!1;for(const a in t){const s=t.hasOwnProperty(a),l=e.hasOwnProperty(a);if(s&&!l||!s&&l||!Gh(t[a],e[a]))return!1}}return String(t)===String(e)}function rA(t,e){return t.findIndex(n=>Gh(n,e))}const en=t=>oi(t)?t:t==null?"":_t(t)||xr(t)&&(t.toString===IK||!on(t.toString))?JSON.stringify(t,DK,2):String(t),DK=(t,e)=>e&&e.__v_isRef?DK(t,e.value):wv(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i])=>(n[`${r} =>`]=i,n),{})}:Ng(e)?{[`Set(${e.size})`]:[...e.values()]}:xr(e)&&!_t(e)&&!$K(e)?String(e):e;let Es;class LM{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Es,!e&&Es&&(this.index=(Es.scopes||(Es.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=Es;try{return Es=this,e()}finally{Es=n}}}on(){Es=this}off(){Es=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function DM(t){return new LM(t)}function MK(t,e=Es){e&&e.active&&e.effects.push(t)}function MM(){return Es}function NK(t){Es&&Es.cleanups.push(t)}const NM=t=>{const e=new Set(t);return e.w=0,e.n=0,e},FK=t=>(t.w&qh)>0,RK=t=>(t.n&qh)>0,o1e=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=qh},a1e=t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const i=e[r];FK(i)&&!RK(i)?i.delete(t):e[n++]=i,i.w&=~qh,i.n&=~qh}e.length=n}},Y2=new WeakMap;let _b=0,qh=1;const D4=30;let ru;const eg=Symbol(""),M4=Symbol("");class G_{constructor(e,n=null,r){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,MK(this,r)}run(){if(!this.active)return this.fn();let e=ru,n=Oh;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=ru,ru=this,Oh=!0,qh=1<<++_b,_b<=D4?o1e(this):E7(this),this.fn()}finally{_b<=D4&&a1e(this),qh=1<<--_b,ru=this.parent,Oh=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){ru===this?this.deferStop=!0:this.active&&(E7(this),this.onStop&&this.onStop(),this.active=!1)}}function E7(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}function s1e(t,e){t.effect&&(t=t.effect.fn);const n=new G_(t);e&&(jr(n,e),e.scope&&MK(n,e.scope)),(!e||!e.lazy)&&n.run();const r=n.run.bind(n);return r.effect=n,r}function l1e(t){t.effect.stop()}let Oh=!0;const VK=[];function k0(){VK.push(Oh),Oh=!1}function T0(){const t=VK.pop();Oh=t===void 0?!0:t}function us(t,e,n){if(Oh&&ru){let r=Y2.get(t);r||Y2.set(t,r=new Map);let i=r.get(n);i||r.set(n,i=NM()),BK(i)}}function BK(t,e){let n=!1;_b<=D4?RK(t)||(t.n|=qh,n=!FK(t)):n=!t.has(ru),n&&(t.add(ru),ru.deps.push(t))}function xf(t,e,n,r,i,o){const a=Y2.get(t);if(!a)return;let s=[];if(e==="clear")s=[...a.values()];else if(n==="length"&&_t(t)){const l=Number(r);a.forEach((u,c)=>{(c==="length"||c>=l)&&s.push(u)})}else switch(n!==void 0&&s.push(a.get(n)),e){case"add":_t(t)?IM(n)&&s.push(a.get("length")):(s.push(a.get(eg)),wv(t)&&s.push(a.get(M4)));break;case"delete":_t(t)||(s.push(a.get(eg)),wv(t)&&s.push(a.get(M4)));break;case"set":wv(t)&&s.push(a.get(eg));break}if(s.length===1)s[0]&&N4(s[0]);else{const l=[];for(const u of s)u&&l.push(...u);N4(NM(l))}}function N4(t,e){const n=_t(t)?t:[...t];for(const r of n)r.computed&&P7(r);for(const r of n)r.computed||P7(r)}function P7(t,e){(t!==ru||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}function u1e(t,e){var n;return(n=Y2.get(t))==null?void 0:n.get(e)}const c1e=tA("__proto__,__v_isRef,__isVue"),zK=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(A1)),f1e=iA(),h1e=iA(!1,!0),d1e=iA(!0),p1e=iA(!0,!0),O7=g1e();function g1e(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=Mn(this);for(let o=0,a=this.length;o<a;o++)us(r,"get",o+"");const i=r[e](...n);return i===-1||i===!1?r[e](...n.map(Mn)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){k0();const r=Mn(this)[e].apply(this,n);return T0(),r}}),t}function m1e(t){const e=Mn(this);return us(e,"has",t),e.hasOwnProperty(t)}function iA(t=!1,e=!1){return function(r,i,o){if(i==="__v_isReactive")return!t;if(i==="__v_isReadonly")return t;if(i==="__v_isShallow")return e;if(i==="__v_raw"&&o===(t?e?YK:qK:e?GK:HK).get(r))return r;const a=_t(r);if(!t){if(a&&Xn(O7,i))return Reflect.get(O7,i,o);if(i==="hasOwnProperty")return m1e}const s=Reflect.get(r,i,o);return(A1(i)?zK.has(i):c1e(i))||(t||us(r,"get",i),e)?s:ci(s)?a&&IM(i)?s:s.value:xr(s)?t?RM(s):dd(s):s}}const v1e=jK(),y1e=jK(!0);function jK(t=!1){return function(n,r,i,o){let a=n[r];if(gg(a)&&ci(a)&&!ci(i))return!1;if(!t&&(!E1(i)&&!gg(i)&&(a=Mn(a),i=Mn(i)),!_t(n)&&ci(a)&&!ci(i)))return a.value=i,!0;const s=_t(n)&&IM(r)?Number(r)<n.length:Xn(n,r),l=Reflect.set(n,r,i,o);return n===Mn(o)&&(s?Jv(i,a)&&xf(n,"set",r,i):xf(n,"add",r,i)),l}}function b1e(t,e){const n=Xn(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&xf(t,"delete",e,void 0),r}function _1e(t,e){const n=Reflect.has(t,e);return(!A1(e)||!zK.has(e))&&us(t,"has",e),n}function S1e(t){return us(t,"iterate",_t(t)?"length":eg),Reflect.ownKeys(t)}const UK={get:f1e,set:v1e,deleteProperty:b1e,has:_1e,ownKeys:S1e},WK={get:d1e,set(t,e){return!0},deleteProperty(t,e){return!0}},w1e=jr({},UK,{get:h1e,set:y1e}),x1e=jr({},WK,{get:p1e}),FM=t=>t,oA=t=>Reflect.getPrototypeOf(t);function qw(t,e,n=!1,r=!1){t=t.__v_raw;const i=Mn(t),o=Mn(e);n||(e!==o&&us(i,"get",e),us(i,"get",o));const{has:a}=oA(i),s=r?FM:n?BM:P1;if(a.call(i,e))return s(t.get(e));if(a.call(i,o))return s(t.get(o));t!==i&&t.get(e)}function Yw(t,e=!1){const n=this.__v_raw,r=Mn(n),i=Mn(t);return e||(t!==i&&us(r,"has",t),us(r,"has",i)),t===i?n.has(t):n.has(t)||n.has(i)}function Kw(t,e=!1){return t=t.__v_raw,!e&&us(Mn(t),"iterate",eg),Reflect.get(t,"size",t)}function I7(t){t=Mn(t);const e=Mn(this);return oA(e).has.call(e,t)||(e.add(t),xf(e,"add",t,t)),this}function $7(t,e){e=Mn(e);const n=Mn(this),{has:r,get:i}=oA(n);let o=r.call(n,t);o||(t=Mn(t),o=r.call(n,t));const a=i.call(n,t);return n.set(t,e),o?Jv(e,a)&&xf(n,"set",t,e):xf(n,"add",t,e),this}function L7(t){const e=Mn(this),{has:n,get:r}=oA(e);let i=n.call(e,t);i||(t=Mn(t),i=n.call(e,t)),r&&r.call(e,t);const o=e.delete(t);return i&&xf(e,"delete",t,void 0),o}function D7(){const t=Mn(this),e=t.size!==0,n=t.clear();return e&&xf(t,"clear",void 0,void 0),n}function Xw(t,e){return function(r,i){const o=this,a=o.__v_raw,s=Mn(a),l=e?FM:t?BM:P1;return!t&&us(s,"iterate",eg),a.forEach((u,c)=>r.call(i,l(u),l(c),o))}}function Jw(t,e,n){return function(...r){const i=this.__v_raw,o=Mn(i),a=wv(o),s=t==="entries"||t===Symbol.iterator&&a,l=t==="keys"&&a,u=i[t](...r),c=n?FM:e?BM:P1;return!e&&us(o,"iterate",l?M4:eg),{next(){const{value:f,done:h}=u.next();return h?{value:f,done:h}:{value:s?[c(f[0]),c(f[1])]:c(f),done:h}},[Symbol.iterator](){return this}}}}function Kf(t){return function(...e){return t==="delete"?!1:this}}function C1e(){const t={get(o){return qw(this,o)},get size(){return Kw(this)},has:Yw,add:I7,set:$7,delete:L7,clear:D7,forEach:Xw(!1,!1)},e={get(o){return qw(this,o,!1,!0)},get size(){return Kw(this)},has:Yw,add:I7,set:$7,delete:L7,clear:D7,forEach:Xw(!1,!0)},n={get(o){return qw(this,o,!0)},get size(){return Kw(this,!0)},has(o){return Yw.call(this,o,!0)},add:Kf("add"),set:Kf("set"),delete:Kf("delete"),clear:Kf("clear"),forEach:Xw(!0,!1)},r={get(o){return qw(this,o,!0,!0)},get size(){return Kw(this,!0)},has(o){return Yw.call(this,o,!0)},add:Kf("add"),set:Kf("set"),delete:Kf("delete"),clear:Kf("clear"),forEach:Xw(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{t[o]=Jw(o,!1,!1),n[o]=Jw(o,!0,!1),e[o]=Jw(o,!1,!0),r[o]=Jw(o,!0,!0)}),[t,n,e,r]}const[k1e,T1e,A1e,E1e]=C1e();function aA(t,e){const n=e?t?E1e:A1e:t?T1e:k1e;return(r,i,o)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(Xn(n,i)&&i in r?n:r,i,o)}const P1e={get:aA(!1,!1)},O1e={get:aA(!1,!0)},I1e={get:aA(!0,!1)},$1e={get:aA(!0,!0)},HK=new WeakMap,GK=new WeakMap,qK=new WeakMap,YK=new WeakMap;function L1e(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function D1e(t){return t.__v_skip||!Object.isExtensible(t)?0:L1e(qbe(t))}function dd(t){return gg(t)?t:sA(t,!1,UK,P1e,HK)}function KK(t){return sA(t,!1,w1e,O1e,GK)}function RM(t){return sA(t,!0,WK,I1e,qK)}function M1e(t){return sA(t,!0,x1e,$1e,YK)}function sA(t,e,n,r,i){if(!xr(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const o=i.get(t);if(o)return o;const a=D1e(t);if(a===0)return t;const s=new Proxy(t,a===2?r:n);return i.set(t,s),s}function pf(t){return gg(t)?pf(t.__v_raw):!!(t&&t.__v_isReactive)}function gg(t){return!!(t&&t.__v_isReadonly)}function E1(t){return!!(t&&t.__v_isShallow)}function VM(t){return pf(t)||gg(t)}function Mn(t){const e=t&&t.__v_raw;return e?Mn(e):t}function mg(t){return H2(t,"__v_skip",!0),t}const P1=t=>xr(t)?dd(t):t,BM=t=>xr(t)?RM(t):t;function zM(t){Oh&&ru&&(t=Mn(t),BK(t.dep||(t.dep=NM())))}function lA(t,e){t=Mn(t);const n=t.dep;n&&N4(n)}function ci(t){return!!(t&&t.__v_isRef===!0)}function Tl(t){return XK(t,!1)}function rc(t){return XK(t,!0)}function XK(t,e){return ci(t)?t:new N1e(t,e)}class N1e{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Mn(e),this._value=n?e:P1(e)}get value(){return zM(this),this._value}set value(e){const n=this.__v_isShallow||E1(e)||gg(e);e=n?e:Mn(e),Jv(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:P1(e),lA(this))}}function F1e(t){lA(t)}function ri(t){return ci(t)?t.value:t}function R1e(t){return on(t)?t():ri(t)}const V1e={get:(t,e,n)=>ri(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return ci(i)&&!ci(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function jM(t){return pf(t)?t:new Proxy(t,V1e)}class B1e{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:n,set:r}=e(()=>zM(this),()=>lA(this));this._get=n,this._set=r}get value(){return this._get()}set value(e){this._set(e)}}function z1e(t){return new B1e(t)}function UM(t){const e=_t(t)?new Array(t.length):{};for(const n in t)e[n]=JK(t,n);return e}class j1e{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return u1e(Mn(this._object),this._key)}}class U1e{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function W1e(t,e,n){return ci(t)?t:on(t)?new U1e(t):xr(t)&&arguments.length>1?JK(t,e,n):Tl(t)}function JK(t,e,n){const r=t[e];return ci(r)?r:new j1e(t,e,n)}class H1e{constructor(e,n,r,i){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new G_(e,()=>{this._dirty||(this._dirty=!0,lA(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const e=Mn(this);return zM(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function G1e(t,e,n=!1){let r,i;const o=on(t);return o?(r=t,i=fu):(r=t.get,i=t.set),new H1e(r,i,o||!i,n)}function q1e(t,...e){}function Y1e(t,e){}function gf(t,e,n,r){let i;try{i=r?t(...r):t()}catch(o){Fg(o,e,n)}return i}function Rs(t,e,n,r){if(on(t)){const o=gf(t,e,n,r);return o&&OM(o)&&o.catch(a=>{Fg(a,e,n)}),o}const i=[];for(let o=0;o<t.length;o++)i.push(Rs(t[o],e,n,r));return i}function Fg(t,e,n,r=!0){const i=e?e.vnode:null;if(e){let o=e.parent;const a=e.proxy,s=n;for(;o;){const u=o.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](t,a,s)===!1)return}o=o.parent}const l=e.appContext.config.errorHandler;if(l){gf(l,null,10,[t,a,s]);return}}K1e(t,n,i,r)}function K1e(t,e,n,r=!0){console.error(t)}let O1=!1,F4=!1;const qo=[];let Xu=0;const Cv=[];let Kc=null,Tp=0;const ZK=Promise.resolve();let WM=null;function A0(t){const e=WM||ZK;return t?e.then(this?t.bind(this):t):e}function X1e(t){let e=Xu+1,n=qo.length;for(;e<n;){const r=e+n>>>1;I1(qo[r])<t?e=r+1:n=r}return e}function uA(t){(!qo.length||!qo.includes(t,O1&&t.allowRecurse?Xu+1:Xu))&&(t.id==null?qo.push(t):qo.splice(X1e(t.id),0,t),QK())}function QK(){!O1&&!F4&&(F4=!0,WM=ZK.then(eX))}function J1e(t){const e=qo.indexOf(t);e>Xu&&qo.splice(e,1)}function HM(t){_t(t)?Cv.push(...t):(!Kc||!Kc.includes(t,t.allowRecurse?Tp+1:Tp))&&Cv.push(t),QK()}function M7(t,e=O1?Xu+1:0){for(;e<qo.length;e++){const n=qo[e];n&&n.pre&&(qo.splice(e,1),e--,n())}}function K2(t){if(Cv.length){const e=[...new Set(Cv)];if(Cv.length=0,Kc){Kc.push(...e);return}for(Kc=e,Kc.sort((n,r)=>I1(n)-I1(r)),Tp=0;Tp<Kc.length;Tp++)Kc[Tp]();Kc=null,Tp=0}}const I1=t=>t.id==null?1/0:t.id,Z1e=(t,e)=>{const n=I1(t)-I1(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function eX(t){F4=!1,O1=!0,qo.sort(Z1e);const e=fu;try{for(Xu=0;Xu<qo.length;Xu++){const n=qo[Xu];n&&n.active!==!1&&gf(n,null,14)}}finally{Xu=0,qo.length=0,K2(),O1=!1,WM=null,(qo.length||Cv.length)&&eX()}}let Wm,Zw=[];function tX(t,e){var n,r;Wm=t,Wm?(Wm.enabled=!0,Zw.forEach(({event:i,args:o})=>Wm.emit(i,...o)),Zw=[]):typeof window<"u"&&window.HTMLElement&&!((r=(n=window.navigator)==null?void 0:n.userAgent)!=null&&r.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(o=>{tX(o,e)}),setTimeout(()=>{Wm||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,Zw=[])},3e3)):Zw=[]}function Q1e(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||_r;let i=n;const o=e.startsWith("update:"),a=o&&e.slice(7);if(a&&a in r){const c=`${a==="modelValue"?"model":a}Modifiers`,{number:f,trim:h}=r[c]||_r;h&&(i=n.map(d=>oi(d)?d.trim():d)),f&&(i=n.map(G2))}let s,l=r[s=Ub(e)]||r[s=Ub(as(e))];!l&&o&&(l=r[s=Ub(_l(e))]),l&&Rs(l,t,6,i);const u=r[s+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[s])return;t.emitted[s]=!0,Rs(u,t,6,i)}}function nX(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const o=t.emits;let a={},s=!1;if(!on(t)){const l=u=>{const c=nX(u,e,!0);c&&(s=!0,jr(a,c))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!o&&!s?(xr(t)&&r.set(t,null),null):(_t(o)?o.forEach(l=>a[l]=null):jr(a,o),xr(t)&&r.set(t,a),a)}function cA(t,e){return!t||!U_(e)?!1:(e=e.slice(2).replace(/Once$/,""),Xn(t,e[0].toLowerCase()+e.slice(1))||Xn(t,_l(e))||Xn(t,e))}let lo=null,fA=null;function $1(t){const e=lo;return lo=t,fA=t&&t.type.__scopeId||null,e}function Rg(t){fA=t}function Vg(){fA=null}const e_e=t=>gs;function gs(t,e=lo,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&H4(-1);const o=$1(e);let a;try{a=t(...i)}finally{$1(o),r._d&&H4(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function KC(t){const{type:e,vnode:n,proxy:r,withProxy:i,props:o,propsOptions:[a],slots:s,attrs:l,emit:u,render:c,renderCache:f,data:h,setupState:d,ctx:g,inheritAttrs:y}=t;let _,v;const S=$1(t);try{if(n.shapeFlag&4){const k=i||r;_=Is(c.call(k,k,f,o,d,h,g)),v=l}else{const k=e;_=Is(k.length>1?k(o,{attrs:l,slots:s,emit:u}):k(o,null)),v=e.props?l:n_e(l)}}catch(k){qb.length=0,Fg(k,t,1),_=lt(Xo)}let C=_;if(v&&y!==!1){const k=Object.keys(v),{shapeFlag:x}=C;k.length&&x&7&&(a&&k.some(EM)&&(v=r_e(v,a)),C=mc(C,v))}return n.dirs&&(C=mc(C),C.dirs=C.dirs?C.dirs.concat(n.dirs):n.dirs),n.transition&&(C.transition=n.transition),_=C,$1(S),_}function t_e(t){let e;for(let n=0;n<t.length;n++){const r=t[n];if(Yh(r)){if(r.type!==Xo||r.children==="v-if"){if(e)return;e=r}}else return}return e}const n_e=t=>{let e;for(const n in t)(n==="class"||n==="style"||U_(n))&&((e||(e={}))[n]=t[n]);return e},r_e=(t,e)=>{const n={};for(const r in t)(!EM(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function i_e(t,e,n){const{props:r,children:i,component:o}=t,{props:a,children:s,patchFlag:l}=e,u=o.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?N7(r,a,u):!!a;if(l&8){const c=e.dynamicProps;for(let f=0;f<c.length;f++){const h=c[f];if(a[h]!==r[h]&&!cA(u,h))return!0}}}else return(i||s)&&(!s||!s.$stable)?!0:r===a?!1:r?a?N7(r,a,u):!0:!!a;return!1}function N7(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(e[o]!==t[o]&&!cA(n,o))return!0}return!1}function GM({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const rX=t=>t.__isSuspense,o_e={name:"Suspense",__isSuspense:!0,process(t,e,n,r,i,o,a,s,l,u){t==null?s_e(e,n,r,i,o,a,s,l,u):l_e(t,e,n,r,i,a,s,l,u)},hydrate:u_e,create:qM,normalize:c_e},a_e=o_e;function L1(t,e){const n=t.props&&t.props[e];on(n)&&n()}function s_e(t,e,n,r,i,o,a,s,l){const{p:u,o:{createElement:c}}=l,f=c("div"),h=t.suspense=qM(t,i,r,e,f,n,o,a,s,l);u(null,h.pendingBranch=t.ssContent,f,null,r,h,o,a),h.deps>0?(L1(t,"onPending"),L1(t,"onFallback"),u(null,t.ssFallback,e,n,r,null,o,a),kv(h,t.ssFallback)):h.resolve(!1,!0)}function l_e(t,e,n,r,i,o,a,s,{p:l,um:u,o:{createElement:c}}){const f=e.suspense=t.suspense;f.vnode=e,e.el=t.el;const h=e.ssContent,d=e.ssFallback,{activeBranch:g,pendingBranch:y,isInFallback:_,isHydrating:v}=f;if(y)f.pendingBranch=h,iu(h,y)?(l(y,h,f.hiddenContainer,null,i,f,o,a,s),f.deps<=0?f.resolve():_&&(l(g,d,n,r,i,null,o,a,s),kv(f,d))):(f.pendingId++,v?(f.isHydrating=!1,f.activeBranch=y):u(y,i,f),f.deps=0,f.effects.length=0,f.hiddenContainer=c("div"),_?(l(null,h,f.hiddenContainer,null,i,f,o,a,s),f.deps<=0?f.resolve():(l(g,d,n,r,i,null,o,a,s),kv(f,d))):g&&iu(h,g)?(l(g,h,n,r,i,f,o,a,s),f.resolve(!0)):(l(null,h,f.hiddenContainer,null,i,f,o,a,s),f.deps<=0&&f.resolve()));else if(g&&iu(h,g))l(g,h,n,r,i,f,o,a,s),kv(f,h);else if(L1(e,"onPending"),f.pendingBranch=h,f.pendingId++,l(null,h,f.hiddenContainer,null,i,f,o,a,s),f.deps<=0)f.resolve();else{const{timeout:S,pendingId:C}=f;S>0?setTimeout(()=>{f.pendingId===C&&f.fallback(d)},S):S===0&&f.fallback(d)}}function qM(t,e,n,r,i,o,a,s,l,u,c=!1){const{p:f,m:h,um:d,n:g,o:{parentNode:y,remove:_}}=u;let v;const S=f_e(t);S&&e!=null&&e.pendingBranch&&(v=e.pendingId,e.deps++);const C=t.props?q2(t.props.timeout):void 0,k={vnode:t,parent:e,parentComponent:n,isSVG:a,container:r,hiddenContainer:i,anchor:o,deps:0,pendingId:0,timeout:typeof C=="number"?C:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:c,isUnmounted:!1,effects:[],resolve(x=!1,m=!1){const{vnode:T,activeBranch:P,pendingBranch:I,pendingId:M,effects:L,parentComponent:R,container:V}=k;if(k.isHydrating)k.isHydrating=!1;else if(!x){const oe=P&&I.transition&&I.transition.mode==="out-in";oe&&(P.transition.afterLeave=()=>{M===k.pendingId&&h(I,V,Se,0)});let{anchor:Se}=k;P&&(Se=g(P),d(P,R,k,!0)),oe||h(I,V,Se,0)}kv(k,I),k.pendingBranch=null,k.isInFallback=!1;let z=k.parent,ie=!1;for(;z;){if(z.pendingBranch){z.effects.push(...L),ie=!0;break}z=z.parent}ie||HM(L),k.effects=[],S&&e&&e.pendingBranch&&v===e.pendingId&&(e.deps--,e.deps===0&&!m&&e.resolve()),L1(T,"onResolve")},fallback(x){if(!k.pendingBranch)return;const{vnode:m,activeBranch:T,parentComponent:P,container:I,isSVG:M}=k;L1(m,"onFallback");const L=g(T),R=()=>{k.isInFallback&&(f(null,x,I,L,P,null,M,s,l),kv(k,x))},V=x.transition&&x.transition.mode==="out-in";V&&(T.transition.afterLeave=R),k.isInFallback=!0,d(T,P,null,!0),V||R()},move(x,m,T){k.activeBranch&&h(k.activeBranch,x,m,T),k.container=x},next(){return k.activeBranch&&g(k.activeBranch)},registerDep(x,m){const T=!!k.pendingBranch;T&&k.deps++;const P=x.vnode.el;x.asyncDep.catch(I=>{Fg(I,x,0)}).then(I=>{if(x.isUnmounted||k.isUnmounted||k.pendingId!==x.suspenseId)return;x.asyncResolved=!0;const{vnode:M}=x;G4(x,I,!1),P&&(M.el=P);const L=!P&&x.subTree.el;m(x,M,y(P||x.subTree.el),P?null:g(x.subTree),k,a,l),L&&_(L),GM(x,M.el),T&&--k.deps===0&&k.resolve()})},unmount(x,m){k.isUnmounted=!0,k.activeBranch&&d(k.activeBranch,n,x,m),k.pendingBranch&&d(k.pendingBranch,n,x,m)}};return k}function u_e(t,e,n,r,i,o,a,s,l){const u=e.suspense=qM(e,r,n,t.parentNode,document.createElement("div"),null,i,o,a,s,!0),c=l(t,u.pendingBranch=e.ssContent,n,u,o,a);return u.deps===0&&u.resolve(!1,!0),c}function c_e(t){const{shapeFlag:e,children:n}=t,r=e&32;t.ssContent=F7(r?n.default:n),t.ssFallback=r?F7(n.fallback):lt(Xo)}function F7(t){let e;if(on(t)){const n=bg&&t._c;n&&(t._d=!1,Oe()),t=t(),n&&(t._d=!0,e=rs,IX())}return _t(t)&&(t=t_e(t)),t=Is(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function iX(t,e){e&&e.pendingBranch?_t(t)?e.effects.push(...t):e.effects.push(t):HM(t)}function kv(t,e){t.activeBranch=e;const{vnode:n,parentComponent:r}=t,i=n.el=e.el;r&&r.subTree===n&&(r.vnode.el=i,GM(r,i))}function f_e(t){var e;return((e=t.props)==null?void 0:e.suspensible)!=null&&t.props.suspensible!==!1}function R4(t,e){return q_(t,null,e)}function oX(t,e){return q_(t,null,{flush:"post"})}function h_e(t,e){return q_(t,null,{flush:"sync"})}const Qw={};function wi(t,e,n){return q_(t,e,n)}function q_(t,e,{immediate:n,deep:r,flush:i,onTrack:o,onTrigger:a}=_r){var s;const l=MM()===((s=Vi)==null?void 0:s.scope)?Vi:null;let u,c=!1,f=!1;if(ci(t)?(u=()=>t.value,c=E1(t)):pf(t)?(u=()=>t,r=!0):_t(t)?(f=!0,c=t.some(k=>pf(k)||E1(k)),u=()=>t.map(k=>{if(ci(k))return k.value;if(pf(k))return zp(k);if(on(k))return gf(k,l,2)})):on(t)?e?u=()=>gf(t,l,2):u=()=>{if(!(l&&l.isUnmounted))return h&&h(),Rs(t,l,3,[d])}:u=fu,e&&r){const k=u;u=()=>zp(k())}let h,d=k=>{h=S.onStop=()=>{gf(k,l,4)}},g;if(Qv)if(d=fu,e?n&&Rs(e,l,3,[u(),f?[]:void 0,d]):u(),i==="sync"){const k=zX();g=k.__watcherHandles||(k.__watcherHandles=[])}else return fu;let y=f?new Array(t.length).fill(Qw):Qw;const _=()=>{if(S.active)if(e){const k=S.run();(r||c||(f?k.some((x,m)=>Jv(x,y[m])):Jv(k,y)))&&(h&&h(),Rs(e,l,3,[k,y===Qw?void 0:f&&y[0]===Qw?[]:y,d]),y=k)}else S.run()};_.allowRecurse=!!e;let v;i==="sync"?v=_:i==="post"?v=()=>vo(_,l&&l.suspense):(_.pre=!0,l&&(_.id=l.uid),v=()=>uA(_));const S=new G_(u,v);e?n?_():y=S.run():i==="post"?vo(S.run.bind(S),l&&l.suspense):S.run();const C=()=>{S.stop(),l&&l.scope&&PM(l.scope.effects,S)};return g&&g.push(C),C}function d_e(t,e,n){const r=this.proxy,i=oi(t)?t.includes(".")?aX(r,t):()=>r[t]:t.bind(r,r);let o;on(e)?o=e:(o=e.handler,n=e);const a=Vi;Kh(this);const s=q_(i,o.bind(r),n);return a?Kh(a):Ih(),s}function aX(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function zp(t,e){if(!xr(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),ci(t))zp(t.value,e);else if(_t(t))for(let n=0;n<t.length;n++)zp(t[n],e);else if(Ng(t)||wv(t))t.forEach(n=>{zp(n,e)});else if($K(t))for(const n in t)zp(t[n],e);return t}function gc(t,e){const n=lo;if(n===null)return t;const r=vA(n)||n.proxy,i=t.dirs||(t.dirs=[]);for(let o=0;o<e.length;o++){let[a,s,l,u=_r]=e[o];a&&(on(a)&&(a={mounted:a,updated:a}),a.deep&&zp(s),i.push({dir:a,instance:r,value:s,oldValue:void 0,arg:l,modifiers:u}))}return t}function Hu(t,e,n,r){const i=t.dirs,o=e&&e.dirs;for(let a=0;a<i.length;a++){const s=i[a];o&&(s.oldValue=o[a].value);let l=s.dir[r];l&&(k0(),Rs(l,n,8,[t.el,s,t,e]),T0())}}function YM(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Bg(()=>{t.isMounted=!0}),E0(()=>{t.isUnmounting=!0}),t}const ol=[Function,Array],KM={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ol,onEnter:ol,onAfterEnter:ol,onEnterCancelled:ol,onBeforeLeave:ol,onLeave:ol,onAfterLeave:ol,onLeaveCancelled:ol,onBeforeAppear:ol,onAppear:ol,onAfterAppear:ol,onAppearCancelled:ol},p_e={name:"BaseTransition",props:KM,setup(t,{slots:e}){const n=bu(),r=YM();let i;return()=>{const o=e.default&&hA(e.default(),!0);if(!o||!o.length)return;let a=o[0];if(o.length>1){for(const y of o)if(y.type!==Xo){a=y;break}}const s=Mn(t),{mode:l}=s;if(r.isLeaving)return wO(a);const u=R7(a);if(!u)return wO(a);const c=Zv(u,s,r,n);vg(u,c);const f=n.subTree,h=f&&R7(f);let d=!1;const{getTransitionKey:g}=u.type;if(g){const y=g();i===void 0?i=y:y!==i&&(i=y,d=!0)}if(h&&h.type!==Xo&&(!iu(u,h)||d)){const y=Zv(h,s,r,n);if(vg(h,y),l==="out-in")return r.isLeaving=!0,y.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&n.update()},wO(a);l==="in-out"&&u.type!==Xo&&(y.delayLeave=(_,v,S)=>{const C=lX(r,h);C[String(h.key)]=h,_._leaveCb=()=>{v(),_._leaveCb=void 0,delete c.delayedLeave},c.delayedLeave=S})}return a}}},sX=p_e;function lX(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Zv(t,e,n,r){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:s,onEnter:l,onAfterEnter:u,onEnterCancelled:c,onBeforeLeave:f,onLeave:h,onAfterLeave:d,onLeaveCancelled:g,onBeforeAppear:y,onAppear:_,onAfterAppear:v,onAppearCancelled:S}=e,C=String(t.key),k=lX(n,t),x=(P,I)=>{P&&Rs(P,r,9,I)},m=(P,I)=>{const M=I[1];x(P,I),_t(P)?P.every(L=>L.length<=1)&&M():P.length<=1&&M()},T={mode:o,persisted:a,beforeEnter(P){let I=s;if(!n.isMounted)if(i)I=y||s;else return;P._leaveCb&&P._leaveCb(!0);const M=k[C];M&&iu(t,M)&&M.el._leaveCb&&M.el._leaveCb(),x(I,[P])},enter(P){let I=l,M=u,L=c;if(!n.isMounted)if(i)I=_||l,M=v||u,L=S||c;else return;let R=!1;const V=P._enterCb=z=>{R||(R=!0,z?x(L,[P]):x(M,[P]),T.delayedLeave&&T.delayedLeave(),P._enterCb=void 0)};I?m(I,[P,V]):V()},leave(P,I){const M=String(t.key);if(P._enterCb&&P._enterCb(!0),n.isUnmounting)return I();x(f,[P]);let L=!1;const R=P._leaveCb=V=>{L||(L=!0,I(),V?x(g,[P]):x(d,[P]),P._leaveCb=void 0,k[M]===t&&delete k[M])};k[M]=t,h?m(h,[P,R]):R()},clone(P){return Zv(P,e,n,r)}};return T}function wO(t){if(Y_(t))return t=mc(t),t.children=null,t}function R7(t){return Y_(t)?t.children?t.children[0]:void 0:t}function vg(t,e){t.shapeFlag&6&&t.component?vg(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function hA(t,e=!1,n){let r=[],i=0;for(let o=0;o<t.length;o++){let a=t[o];const s=n==null?a.key:String(n)+String(a.key!=null?a.key:o);a.type===bn?(a.patchFlag&128&&i++,r=r.concat(hA(a.children,e,s))):(e||a.type!==Xo)&&r.push(s!=null?mc(a,{key:s}):a)}if(i>1)for(let o=0;o<r.length;o++)r[o].patchFlag=-2;return r}function zt(t,e){return on(t)?(()=>jr({name:t.name},e,{setup:t}))():t}const tg=t=>!!t.type.__asyncLoader;function g_e(t){on(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:r,delay:i=200,timeout:o,suspensible:a=!0,onError:s}=t;let l=null,u,c=0;const f=()=>(c++,l=null,h()),h=()=>{let d;return l||(d=l=e().catch(g=>{if(g=g instanceof Error?g:new Error(String(g)),s)return new Promise((y,_)=>{s(g,()=>y(f()),()=>_(g),c+1)});throw g}).then(g=>d!==l&&l?l:(g&&(g.__esModule||g[Symbol.toStringTag]==="Module")&&(g=g.default),u=g,g)))};return zt({name:"AsyncComponentWrapper",__asyncLoader:h,get __asyncResolved(){return u},setup(){const d=Vi;if(u)return()=>xO(u,d);const g=S=>{l=null,Fg(S,d,13,!r)};if(a&&d.suspense||Qv)return h().then(S=>()=>xO(S,d)).catch(S=>(g(S),()=>r?lt(r,{error:S}):null));const y=Tl(!1),_=Tl(),v=Tl(!!i);return i&&setTimeout(()=>{v.value=!1},i),o!=null&&setTimeout(()=>{if(!y.value&&!_.value){const S=new Error(`Async component timed out after ${o}ms.`);g(S),_.value=S}},o),h().then(()=>{y.value=!0,d.parent&&Y_(d.parent.vnode)&&uA(d.parent.update)}).catch(S=>{g(S),_.value=S}),()=>{if(y.value&&u)return xO(u,d);if(_.value&&r)return lt(r,{error:_.value});if(n&&!v.value)return lt(n)}}})}function xO(t,e){const{ref:n,props:r,children:i,ce:o}=e.vnode,a=lt(t,r,i);return a.ref=n,a.ce=o,delete e.vnode.ce,a}const Y_=t=>t.type.__isKeepAlive,m_e={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=bu(),r=n.ctx;if(!r.renderer)return()=>{const S=e.default&&e.default();return S&&S.length===1?S[0]:S};const i=new Map,o=new Set;let a=null;const s=n.suspense,{renderer:{p:l,m:u,um:c,o:{createElement:f}}}=r,h=f("div");r.activate=(S,C,k,x,m)=>{const T=S.component;u(S,C,k,0,s),l(T.vnode,S,C,k,T,s,x,S.slotScopeIds,m),vo(()=>{T.isDeactivated=!1,T.a&&xv(T.a);const P=S.props&&S.props.onVnodeMounted;P&&Ga(P,T.parent,S)},s)},r.deactivate=S=>{const C=S.component;u(S,h,null,1,s),vo(()=>{C.da&&xv(C.da);const k=S.props&&S.props.onVnodeUnmounted;k&&Ga(k,C.parent,S),C.isDeactivated=!0},s)};function d(S){CO(S),c(S,n,s,!0)}function g(S){i.forEach((C,k)=>{const x=Y4(C.type);x&&(!S||!S(x))&&y(k)})}function y(S){const C=i.get(S);!a||!iu(C,a)?d(C):a&&CO(a),i.delete(S),o.delete(S)}wi(()=>[t.include,t.exclude],([S,C])=>{S&&g(k=>Sb(S,k)),C&&g(k=>!Sb(C,k))},{flush:"post",deep:!0});let _=null;const v=()=>{_!=null&&i.set(_,kO(n.subTree))};return Bg(v),pA(v),E0(()=>{i.forEach(S=>{const{subTree:C,suspense:k}=n,x=kO(C);if(S.type===x.type&&S.key===x.key){CO(x);const m=x.component.da;m&&vo(m,k);return}d(S)})}),()=>{if(_=null,!e.default)return null;const S=e.default(),C=S[0];if(S.length>1)return a=null,S;if(!Yh(C)||!(C.shapeFlag&4)&&!(C.shapeFlag&128))return a=null,C;let k=kO(C);const x=k.type,m=Y4(tg(k)?k.type.__asyncResolved||{}:x),{include:T,exclude:P,max:I}=t;if(T&&(!m||!Sb(T,m))||P&&m&&Sb(P,m))return a=k,C;const M=k.key==null?x:k.key,L=i.get(M);return k.el&&(k=mc(k),C.shapeFlag&128&&(C.ssContent=k)),_=M,L?(k.el=L.el,k.component=L.component,k.transition&&vg(k,k.transition),k.shapeFlag|=512,o.delete(M),o.add(M)):(o.add(M),I&&o.size>parseInt(I,10)&&y(o.values().next().value)),k.shapeFlag|=256,a=k,rX(C.type)?C:k}}},v_e=m_e;function Sb(t,e){return _t(t)?t.some(n=>Sb(n,e)):oi(t)?t.split(",").includes(e):Gbe(t)?t.test(e):!1}function uX(t,e){fX(t,"a",e)}function cX(t,e){fX(t,"da",e)}function fX(t,e,n=Vi){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(dA(e,r,n),n){let i=n.parent;for(;i&&i.parent;)Y_(i.parent.vnode)&&y_e(r,e,n,i),i=i.parent}}function y_e(t,e,n,r){const i=dA(e,t,r,!0);K_(()=>{PM(r[e],i)},n)}function CO(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function kO(t){return t.shapeFlag&128?t.ssContent:t}function dA(t,e,n=Vi,r=!1){if(n){const i=n[t]||(n[t]=[]),o=e.__weh||(e.__weh=(...a)=>{if(n.isUnmounted)return;k0(),Kh(n);const s=Rs(e,n,t,a);return Ih(),T0(),s});return r?i.unshift(o):i.push(o),o}}const Of=t=>(e,n=Vi)=>(!Qv||t==="sp")&&dA(t,(...r)=>e(...r),n),XM=Of("bm"),Bg=Of("m"),hX=Of("bu"),pA=Of("u"),E0=Of("bum"),K_=Of("um"),dX=Of("sp"),pX=Of("rtg"),gX=Of("rtc");function mX(t,e=Vi){dA("ec",t,e)}const JM="components",b_e="directives";function $t(t,e){return QM(JM,t,!0,e)||t}const vX=Symbol.for("v-ndc");function ZM(t){return oi(t)?QM(JM,t,!1)||t:t||vX}function __e(t){return QM(b_e,t)}function QM(t,e,n=!0,r=!1){const i=lo||Vi;if(i){const o=i.type;if(t===JM){const s=Y4(o,!1);if(s&&(s===e||s===as(e)||s===W_(as(e))))return o}const a=V7(i[t]||o[t],e)||V7(i.appContext[t],e);return!a&&r?o:a}}function V7(t,e){return t&&(t[e]||t[as(e)]||t[W_(as(e))])}function Po(t,e,n,r){let i;const o=n&&n[r];if(_t(t)||oi(t)){i=new Array(t.length);for(let a=0,s=t.length;a<s;a++)i[a]=e(t[a],a,void 0,o&&o[a])}else if(typeof t=="number"){i=new Array(t);for(let a=0;a<t;a++)i[a]=e(a+1,a,void 0,o&&o[a])}else if(xr(t))if(t[Symbol.iterator])i=Array.from(t,(a,s)=>e(a,s,void 0,o&&o[s]));else{const a=Object.keys(t);i=new Array(a.length);for(let s=0,l=a.length;s<l;s++){const u=a[s];i[s]=e(t[u],u,s,o&&o[s])}}else i=[];return n&&(n[r]=i),i}function S_e(t,e){for(let n=0;n<e.length;n++){const r=e[n];if(_t(r))for(let i=0;i<r.length;i++)t[r[i].name]=r[i].fn;else r&&(t[r.name]=r.key?(...i)=>{const o=r.fn(...i);return o&&(o.key=r.key),o}:r.fn)}return t}function eN(t,e,n={},r,i){if(lo.isCE||lo.parent&&tg(lo.parent)&&lo.parent.isCE)return e!=="default"&&(n.name=e),lt("slot",n,r&&r());let o=t[e];o&&o._c&&(o._d=!1),Oe();const a=o&&yX(o(n)),s=tn(bn,{key:n.key||a&&a.key||`_${e}`},a||(r?r():[]),a&&t._===1?64:-2);return!i&&s.scopeId&&(s.slotScopeIds=[s.scopeId+"-s"]),o&&o._c&&(o._d=!0),s}function yX(t){return t.some(e=>Yh(e)?!(e.type===Xo||e.type===bn&&!yX(e.children)):!0)?t:null}function w_e(t,e){const n={};for(const r in t)n[e&&/[A-Z]/.test(r)?`on:${r}`:Ub(r)]=t[r];return n}const V4=t=>t?NX(t)?vA(t)||t.proxy:V4(t.parent):null,Wb=jr(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>V4(t.parent),$root:t=>V4(t.root),$emit:t=>t.emit,$options:t=>tN(t),$forceUpdate:t=>t.f||(t.f=()=>uA(t.update)),$nextTick:t=>t.n||(t.n=A0.bind(t.proxy)),$watch:t=>d_e.bind(t)}),TO=(t,e)=>t!==_r&&!t.__isScriptSetup&&Xn(t,e),B4={get({_:t},e){const{ctx:n,setupState:r,data:i,props:o,accessCache:a,type:s,appContext:l}=t;let u;if(e[0]!=="$"){const d=a[e];if(d!==void 0)switch(d){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return o[e]}else{if(TO(r,e))return a[e]=1,r[e];if(i!==_r&&Xn(i,e))return a[e]=2,i[e];if((u=t.propsOptions[0])&&Xn(u,e))return a[e]=3,o[e];if(n!==_r&&Xn(n,e))return a[e]=4,n[e];z4&&(a[e]=0)}}const c=Wb[e];let f,h;if(c)return e==="$attrs"&&us(t,"get",e),c(t);if((f=s.__cssModules)&&(f=f[e]))return f;if(n!==_r&&Xn(n,e))return a[e]=4,n[e];if(h=l.config.globalProperties,Xn(h,e))return h[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:o}=t;return TO(i,e)?(i[e]=n,!0):r!==_r&&Xn(r,e)?(r[e]=n,!0):Xn(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(o[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:o}},a){let s;return!!n[a]||t!==_r&&Xn(t,a)||TO(e,a)||(s=o[0])&&Xn(s,a)||Xn(r,a)||Xn(Wb,a)||Xn(i.config.globalProperties,a)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Xn(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}},x_e=jr({},B4,{get(t,e){if(e!==Symbol.unscopables)return B4.get(t,e,t)},has(t,e){return e[0]!=="_"&&!Jbe(e)}});function C_e(){return null}function k_e(){return null}function T_e(t){}function A_e(t){}function E_e(){return null}function P_e(){}function O_e(t,e){return null}function I_e(){return bX().slots}function $_e(){return bX().attrs}function L_e(t,e,n){const r=bu();if(n&&n.local){const i=Tl(t[e]);return wi(()=>t[e],o=>i.value=o),wi(i,o=>{o!==t[e]&&r.emit(`update:${e}`,o)}),i}else return{__v_isRef:!0,get value(){return t[e]},set value(i){r.emit(`update:${e}`,i)}}}function bX(){const t=bu();return t.setupContext||(t.setupContext=VX(t))}function D1(t){return _t(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function D_e(t,e){const n=D1(t);for(const r in e){if(r.startsWith("__skip"))continue;let i=n[r];i?_t(i)||on(i)?i=n[r]={type:i,default:e[r]}:i.default=e[r]:i===null&&(i=n[r]={default:e[r]}),i&&e[`__skip_${r}`]&&(i.skipFactory=!0)}return n}function M_e(t,e){return!t||!e?t||e:_t(t)&&_t(e)?t.concat(e):jr({},D1(t),D1(e))}function N_e(t,e){const n={};for(const r in t)e.includes(r)||Object.defineProperty(n,r,{enumerable:!0,get:()=>t[r]});return n}function F_e(t){const e=bu();let n=t();return Ih(),OM(n)&&(n=n.catch(r=>{throw Kh(e),r})),[n,()=>Kh(e)]}let z4=!0;function R_e(t){const e=tN(t),n=t.proxy,r=t.ctx;z4=!1,e.beforeCreate&&B7(e.beforeCreate,t,"bc");const{data:i,computed:o,methods:a,watch:s,provide:l,inject:u,created:c,beforeMount:f,mounted:h,beforeUpdate:d,updated:g,activated:y,deactivated:_,beforeDestroy:v,beforeUnmount:S,destroyed:C,unmounted:k,render:x,renderTracked:m,renderTriggered:T,errorCaptured:P,serverPrefetch:I,expose:M,inheritAttrs:L,components:R,directives:V,filters:z}=e;if(u&&V_e(u,r,null),a)for(const Se in a){const Ae=a[Se];on(Ae)&&(r[Se]=Ae.bind(n))}if(i){const Se=i.call(n,n);xr(Se)&&(t.data=dd(Se))}if(z4=!0,o)for(const Se in o){const Ae=o[Se],Ee=on(Ae)?Ae.bind(n,n):on(Ae.get)?Ae.get.bind(n,n):fu,_e=!on(Ae)&&on(Ae.set)?Ae.set.bind(n):fu,se=Ln({get:Ee,set:_e});Object.defineProperty(r,Se,{enumerable:!0,configurable:!0,get:()=>se.value,set:ne=>se.value=ne})}if(s)for(const Se in s)_X(s[Se],r,n,Se);if(l){const Se=on(l)?l.call(n):l;Reflect.ownKeys(Se).forEach(Ae=>{Hb(Ae,Se[Ae])})}c&&B7(c,t,"c");function oe(Se,Ae){_t(Ae)?Ae.forEach(Ee=>Se(Ee.bind(n))):Ae&&Se(Ae.bind(n))}if(oe(XM,f),oe(Bg,h),oe(hX,d),oe(pA,g),oe(uX,y),oe(cX,_),oe(mX,P),oe(gX,m),oe(pX,T),oe(E0,S),oe(K_,k),oe(dX,I),_t(M))if(M.length){const Se=t.exposed||(t.exposed={});M.forEach(Ae=>{Object.defineProperty(Se,Ae,{get:()=>n[Ae],set:Ee=>n[Ae]=Ee})})}else t.exposed||(t.exposed={});x&&t.render===fu&&(t.render=x),L!=null&&(t.inheritAttrs=L),R&&(t.components=R),V&&(t.directives=V)}function V_e(t,e,n=fu){_t(t)&&(t=j4(t));for(const r in t){const i=t[r];let o;xr(i)?"default"in i?o=Ni(i.from||r,i.default,!0):o=Ni(i.from||r):o=Ni(i),ci(o)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):e[r]=o}}function B7(t,e,n){Rs(_t(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function _X(t,e,n,r){const i=r.includes(".")?aX(n,r):()=>n[r];if(oi(t)){const o=e[t];on(o)&&wi(i,o)}else if(on(t))wi(i,t.bind(n));else if(xr(t))if(_t(t))t.forEach(o=>_X(o,e,n,r));else{const o=on(t.handler)?t.handler.bind(n):e[t.handler];on(o)&&wi(i,o,t)}}function tN(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:o,config:{optionMergeStrategies:a}}=t.appContext,s=o.get(e);let l;return s?l=s:!i.length&&!n&&!r?l=e:(l={},i.length&&i.forEach(u=>X2(l,u,a,!0)),X2(l,e,a)),xr(e)&&o.set(e,l),l}function X2(t,e,n,r=!1){const{mixins:i,extends:o}=e;o&&X2(t,o,n,!0),i&&i.forEach(a=>X2(t,a,n,!0));for(const a in e)if(!(r&&a==="expose")){const s=B_e[a]||n&&n[a];t[a]=s?s(t[a],e[a]):e[a]}return t}const B_e={data:z7,props:j7,emits:j7,methods:wb,computed:wb,beforeCreate:ha,created:ha,beforeMount:ha,mounted:ha,beforeUpdate:ha,updated:ha,beforeDestroy:ha,beforeUnmount:ha,destroyed:ha,unmounted:ha,activated:ha,deactivated:ha,errorCaptured:ha,serverPrefetch:ha,components:wb,directives:wb,watch:j_e,provide:z7,inject:z_e};function z7(t,e){return e?t?function(){return jr(on(t)?t.call(this,this):t,on(e)?e.call(this,this):e)}:e:t}function z_e(t,e){return wb(j4(t),j4(e))}function j4(t){if(_t(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function ha(t,e){return t?[...new Set([].concat(t,e))]:e}function wb(t,e){return t?jr(Object.create(null),t,e):e}function j7(t,e){return t?_t(t)&&_t(e)?[...new Set([...t,...e])]:jr(Object.create(null),D1(t),D1(e??{})):e}function j_e(t,e){if(!t)return e;if(!e)return t;const n=jr(Object.create(null),t);for(const r in e)n[r]=ha(t[r],e[r]);return n}function SX(){return{app:null,config:{isNativeTag:Ube,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let U_e=0;function W_e(t,e){return function(r,i=null){on(r)||(r=jr({},r)),i!=null&&!xr(i)&&(i=null);const o=SX(),a=new Set;let s=!1;const l=o.app={_uid:U_e++,_component:r,_props:i,_container:null,_context:o,_instance:null,version:UX,get config(){return o.config},set config(u){},use(u,...c){return a.has(u)||(u&&on(u.install)?(a.add(u),u.install(l,...c)):on(u)&&(a.add(u),u(l,...c))),l},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),l},component(u,c){return c?(o.components[u]=c,l):o.components[u]},directive(u,c){return c?(o.directives[u]=c,l):o.directives[u]},mount(u,c,f){if(!s){const h=lt(r,i);return h.appContext=o,c&&e?e(h,u):t(h,u,f),s=!0,l._container=u,u.__vue_app__=l,vA(h.component)||h.component.proxy}},unmount(){s&&(t(null,l._container),delete l._container.__vue_app__)},provide(u,c){return o.provides[u]=c,l},runWithContext(u){M1=l;try{return u()}finally{M1=null}}};return l}}let M1=null;function Hb(t,e){if(Vi){let n=Vi.provides;const r=Vi.parent&&Vi.parent.provides;r===n&&(n=Vi.provides=Object.create(r)),n[t]=e}}function Ni(t,e,n=!1){const r=Vi||lo;if(r||M1){const i=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:M1._context.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&on(e)?e.call(r&&r.proxy):e}}function H_e(){return!!(Vi||lo||M1)}function G_e(t,e,n,r=!1){const i={},o={};H2(o,gA,1),t.propsDefaults=Object.create(null),wX(t,e,i,o);for(const a in t.propsOptions[0])a in i||(i[a]=void 0);n?t.props=r?i:KK(i):t.type.props?t.props=i:t.props=o,t.attrs=o}function q_e(t,e,n,r){const{props:i,attrs:o,vnode:{patchFlag:a}}=t,s=Mn(i),[l]=t.propsOptions;let u=!1;if((r||a>0)&&!(a&16)){if(a&8){const c=t.vnode.dynamicProps;for(let f=0;f<c.length;f++){let h=c[f];if(cA(t.emitsOptions,h))continue;const d=e[h];if(l)if(Xn(o,h))d!==o[h]&&(o[h]=d,u=!0);else{const g=as(h);i[g]=U4(l,s,g,d,t,!1)}else d!==o[h]&&(o[h]=d,u=!0)}}}else{wX(t,e,i,o)&&(u=!0);let c;for(const f in s)(!e||!Xn(e,f)&&((c=_l(f))===f||!Xn(e,c)))&&(l?n&&(n[f]!==void 0||n[c]!==void 0)&&(i[f]=U4(l,s,f,void 0,t,!0)):delete i[f]);if(o!==s)for(const f in o)(!e||!Xn(e,f))&&(delete o[f],u=!0)}u&&xf(t,"set","$attrs")}function wX(t,e,n,r){const[i,o]=t.propsOptions;let a=!1,s;if(e)for(let l in e){if(jb(l))continue;const u=e[l];let c;i&&Xn(i,c=as(l))?!o||!o.includes(c)?n[c]=u:(s||(s={}))[c]=u:cA(t.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,a=!0)}if(o){const l=Mn(n),u=s||_r;for(let c=0;c<o.length;c++){const f=o[c];n[f]=U4(i,l,f,u[f],t,!Xn(u,f))}}return a}function U4(t,e,n,r,i,o){const a=t[n];if(a!=null){const s=Xn(a,"default");if(s&&r===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&on(l)){const{propsDefaults:u}=i;n in u?r=u[n]:(Kh(i),r=u[n]=l.call(null,e),Ih())}else r=l}a[0]&&(o&&!s?r=!1:a[1]&&(r===""||r===_l(n))&&(r=!0))}return r}function xX(t,e,n=!1){const r=e.propsCache,i=r.get(t);if(i)return i;const o=t.props,a={},s=[];let l=!1;if(!on(t)){const c=f=>{l=!0;const[h,d]=xX(f,e,!0);jr(a,h),d&&s.push(...d)};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!o&&!l)return xr(t)&&r.set(t,Sv),Sv;if(_t(o))for(let c=0;c<o.length;c++){const f=as(o[c]);U7(f)&&(a[f]=_r)}else if(o)for(const c in o){const f=as(c);if(U7(f)){const h=o[c],d=a[f]=_t(h)||on(h)?{type:h}:jr({},h);if(d){const g=G7(Boolean,d.type),y=G7(String,d.type);d[0]=g>-1,d[1]=y<0||g<y,(g>-1||Xn(d,"default"))&&s.push(f)}}}const u=[a,s];return xr(t)&&r.set(t,u),u}function U7(t){return t[0]!=="$"}function W7(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function H7(t,e){return W7(t)===W7(e)}function G7(t,e){return _t(e)?e.findIndex(n=>H7(n,t)):on(e)&&H7(e,t)?0:-1}const CX=t=>t[0]==="_"||t==="$stable",nN=t=>_t(t)?t.map(Is):[Is(t)],Y_e=(t,e,n)=>{if(e._n)return e;const r=gs((...i)=>nN(e(...i)),n);return r._c=!1,r},kX=(t,e,n)=>{const r=t._ctx;for(const i in t){if(CX(i))continue;const o=t[i];if(on(o))e[i]=Y_e(i,o,r);else if(o!=null){const a=nN(o);e[i]=()=>a}}},TX=(t,e)=>{const n=nN(e);t.slots.default=()=>n},K_e=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=Mn(e),H2(e,"_",n)):kX(e,t.slots={})}else t.slots={},e&&TX(t,e);H2(t.slots,gA,1)},X_e=(t,e,n)=>{const{vnode:r,slots:i}=t;let o=!0,a=_r;if(r.shapeFlag&32){const s=e._;s?n&&s===1?o=!1:(jr(i,e),!n&&s===1&&delete i._):(o=!e.$stable,kX(e,i)),a=e}else e&&(TX(t,e),a={default:1});if(o)for(const s in i)!CX(s)&&!(s in a)&&delete i[s]};function J2(t,e,n,r,i=!1){if(_t(t)){t.forEach((h,d)=>J2(h,e&&(_t(e)?e[d]:e),n,r,i));return}if(tg(r)&&!i)return;const o=r.shapeFlag&4?vA(r.component)||r.component.proxy:r.el,a=i?null:o,{i:s,r:l}=t,u=e&&e.r,c=s.refs===_r?s.refs={}:s.refs,f=s.setupState;if(u!=null&&u!==l&&(oi(u)?(c[u]=null,Xn(f,u)&&(f[u]=null)):ci(u)&&(u.value=null)),on(l))gf(l,s,12,[a,c]);else{const h=oi(l),d=ci(l);if(h||d){const g=()=>{if(t.f){const y=h?Xn(f,l)?f[l]:c[l]:l.value;i?_t(y)&&PM(y,o):_t(y)?y.includes(o)||y.push(o):h?(c[l]=[o],Xn(f,l)&&(f[l]=c[l])):(l.value=[o],t.k&&(c[t.k]=l.value))}else h?(c[l]=a,Xn(f,l)&&(f[l]=a)):d&&(l.value=a,t.k&&(c[t.k]=a))};a?(g.id=-1,vo(g,n)):g()}}}let Xf=!1;const ex=t=>/svg/.test(t.namespaceURI)&&t.tagName!=="foreignObject",tx=t=>t.nodeType===8;function J_e(t){const{mt:e,p:n,o:{patchProp:r,createText:i,nextSibling:o,parentNode:a,remove:s,insert:l,createComment:u}}=t,c=(v,S)=>{if(!S.hasChildNodes()){n(null,v,S),K2(),S._vnode=v;return}Xf=!1,f(S.firstChild,v,null,null,null),K2(),S._vnode=v,Xf&&console.error("Hydration completed but contains mismatches.")},f=(v,S,C,k,x,m=!1)=>{const T=tx(v)&&v.data==="[",P=()=>y(v,S,C,k,x,T),{type:I,ref:M,shapeFlag:L,patchFlag:R}=S;let V=v.nodeType;S.el=v,R===-2&&(m=!1,S.dynamicChildren=null);let z=null;switch(I){case yg:V!==3?S.children===""?(l(S.el=i(""),a(v),v),z=v):z=P():(v.data!==S.children&&(Xf=!0,v.data=S.children),z=o(v));break;case Xo:V!==8||T?z=P():z=o(v);break;case ng:if(T&&(v=o(v),V=v.nodeType),V===1||V===3){z=v;const ie=!S.children.length;for(let oe=0;oe<S.staticCount;oe++)ie&&(S.children+=z.nodeType===1?z.outerHTML:z.data),oe===S.staticCount-1&&(S.anchor=z),z=o(z);return T?o(z):z}else P();break;case bn:T?z=g(v,S,C,k,x,m):z=P();break;default:if(L&1)V!==1||S.type.toLowerCase()!==v.tagName.toLowerCase()?z=P():z=h(v,S,C,k,x,m);else if(L&6){S.slotScopeIds=x;const ie=a(v);if(e(S,ie,null,C,k,ex(ie),m),z=T?_(v):o(v),z&&tx(z)&&z.data==="teleport end"&&(z=o(z)),tg(S)){let oe;T?(oe=lt(bn),oe.anchor=z?z.previousSibling:ie.lastChild):oe=v.nodeType===3?Bi(""):lt("div"),oe.el=v,S.component.subTree=oe}}else L&64?V!==8?z=P():z=S.type.hydrate(v,S,C,k,x,m,t,d):L&128&&(z=S.type.hydrate(v,S,C,k,ex(a(v)),x,m,t,f))}return M!=null&&J2(M,null,k,S),z},h=(v,S,C,k,x,m)=>{m=m||!!S.dynamicChildren;const{type:T,props:P,patchFlag:I,shapeFlag:M,dirs:L}=S,R=T==="input"&&L||T==="option";if(R||I!==-1){if(L&&Hu(S,null,C,"created"),P)if(R||!m||I&48)for(const z in P)(R&&z.endsWith("value")||U_(z)&&!jb(z))&&r(v,z,null,P[z],!1,void 0,C);else P.onClick&&r(v,"onClick",null,P.onClick,!1,void 0,C);let V;if((V=P&&P.onVnodeBeforeMount)&&Ga(V,C,S),L&&Hu(S,null,C,"beforeMount"),((V=P&&P.onVnodeMounted)||L)&&iX(()=>{V&&Ga(V,C,S),L&&Hu(S,null,C,"mounted")},k),M&16&&!(P&&(P.innerHTML||P.textContent))){let z=d(v.firstChild,S,v,C,k,x,m);for(;z;){Xf=!0;const ie=z;z=z.nextSibling,s(ie)}}else M&8&&v.textContent!==S.children&&(Xf=!0,v.textContent=S.children)}return v.nextSibling},d=(v,S,C,k,x,m,T)=>{T=T||!!S.dynamicChildren;const P=S.children,I=P.length;for(let M=0;M<I;M++){const L=T?P[M]:P[M]=Is(P[M]);if(v)v=f(v,L,k,x,m,T);else{if(L.type===yg&&!L.children)continue;Xf=!0,n(null,L,C,null,k,x,ex(C),m)}}return v},g=(v,S,C,k,x,m)=>{const{slotScopeIds:T}=S;T&&(x=x?x.concat(T):T);const P=a(v),I=d(o(v),S,P,C,k,x,m);return I&&tx(I)&&I.data==="]"?o(S.anchor=I):(Xf=!0,l(S.anchor=u("]"),P,I),I)},y=(v,S,C,k,x,m)=>{if(Xf=!0,S.el=null,m){const I=_(v);for(;;){const M=o(v);if(M&&M!==I)s(M);else break}}const T=o(v),P=a(v);return s(v),n(null,S,P,T,C,k,ex(P),x),T},_=v=>{let S=0;for(;v;)if(v=o(v),v&&tx(v)&&(v.data==="["&&S++,v.data==="]")){if(S===0)return o(v);S--}return v};return[c,f]}const vo=iX;function AX(t){return PX(t)}function EX(t){return PX(t,J_e)}function PX(t,e){const n=L4();n.__VUE__=!0;const{insert:r,remove:i,patchProp:o,createElement:a,createText:s,createComment:l,setText:u,setElementText:c,parentNode:f,nextSibling:h,setScopeId:d=fu,insertStaticContent:g}=t,y=(j,Y,O,F=null,U=null,Q=null,ve=!1,ge=null,Me=!!Y.dynamicChildren)=>{if(j===Y)return;j&&!iu(j,Y)&&(F=te(j),ne(j,U,Q,!0),j=null),Y.patchFlag===-2&&(Me=!1,Y.dynamicChildren=null);const{type:De,ref:tt,shapeFlag:Xe}=Y;switch(De){case yg:_(j,Y,O,F);break;case Xo:v(j,Y,O,F);break;case ng:j==null&&S(Y,O,F,ve);break;case bn:R(j,Y,O,F,U,Q,ve,ge,Me);break;default:Xe&1?x(j,Y,O,F,U,Q,ve,ge,Me):Xe&6?V(j,Y,O,F,U,Q,ve,ge,Me):(Xe&64||Xe&128)&&De.process(j,Y,O,F,U,Q,ve,ge,Me,ue)}tt!=null&&U&&J2(tt,j&&j.ref,Q,Y||j,!Y)},_=(j,Y,O,F)=>{if(j==null)r(Y.el=s(Y.children),O,F);else{const U=Y.el=j.el;Y.children!==j.children&&u(U,Y.children)}},v=(j,Y,O,F)=>{j==null?r(Y.el=l(Y.children||""),O,F):Y.el=j.el},S=(j,Y,O,F)=>{[j.el,j.anchor]=g(j.children,Y,O,F,j.el,j.anchor)},C=({el:j,anchor:Y},O,F)=>{let U;for(;j&&j!==Y;)U=h(j),r(j,O,F),j=U;r(Y,O,F)},k=({el:j,anchor:Y})=>{let O;for(;j&&j!==Y;)O=h(j),i(j),j=O;i(Y)},x=(j,Y,O,F,U,Q,ve,ge,Me)=>{ve=ve||Y.type==="svg",j==null?m(Y,O,F,U,Q,ve,ge,Me):I(j,Y,U,Q,ve,ge,Me)},m=(j,Y,O,F,U,Q,ve,ge)=>{let Me,De;const{type:tt,props:Xe,shapeFlag:et,transition:Qe,dirs:pt}=j;if(Me=j.el=a(j.type,Q,Xe&&Xe.is,Xe),et&8?c(Me,j.children):et&16&&P(j.children,Me,null,F,U,Q&&tt!=="foreignObject",ve,ge),pt&&Hu(j,null,F,"created"),T(Me,j,j.scopeId,ve,F),Xe){for(const Kt in Xe)Kt!=="value"&&!jb(Kt)&&o(Me,Kt,null,Xe[Kt],Q,j.children,F,U,ae);"value"in Xe&&o(Me,"value",null,Xe.value),(De=Xe.onVnodeBeforeMount)&&Ga(De,F,j)}pt&&Hu(j,null,F,"beforeMount");const Ft=(!U||U&&!U.pendingBranch)&&Qe&&!Qe.persisted;Ft&&Qe.beforeEnter(Me),r(Me,Y,O),((De=Xe&&Xe.onVnodeMounted)||Ft||pt)&&vo(()=>{De&&Ga(De,F,j),Ft&&Qe.enter(Me),pt&&Hu(j,null,F,"mounted")},U)},T=(j,Y,O,F,U)=>{if(O&&d(j,O),F)for(let Q=0;Q<F.length;Q++)d(j,F[Q]);if(U){let Q=U.subTree;if(Y===Q){const ve=U.vnode;T(j,ve,ve.scopeId,ve.slotScopeIds,U.parent)}}},P=(j,Y,O,F,U,Q,ve,ge,Me=0)=>{for(let De=Me;De<j.length;De++){const tt=j[De]=ge?ph(j[De]):Is(j[De]);y(null,tt,Y,O,F,U,Q,ve,ge)}},I=(j,Y,O,F,U,Q,ve)=>{const ge=Y.el=j.el;let{patchFlag:Me,dynamicChildren:De,dirs:tt}=Y;Me|=j.patchFlag&16;const Xe=j.props||_r,et=Y.props||_r;let Qe;O&&Gd(O,!1),(Qe=et.onVnodeBeforeUpdate)&&Ga(Qe,O,Y,j),tt&&Hu(Y,j,O,"beforeUpdate"),O&&Gd(O,!0);const pt=U&&Y.type!=="foreignObject";if(De?M(j.dynamicChildren,De,ge,O,F,pt,Q):ve||Ae(j,Y,ge,null,O,F,pt,Q,!1),Me>0){if(Me&16)L(ge,Y,Xe,et,O,F,U);else if(Me&2&&Xe.class!==et.class&&o(ge,"class",null,et.class,U),Me&4&&o(ge,"style",Xe.style,et.style,U),Me&8){const Ft=Y.dynamicProps;for(let Kt=0;Kt<Ft.length;Kt++){const wt=Ft[Kt],sn=Xe[wt],gr=et[wt];(gr!==sn||wt==="value")&&o(ge,wt,sn,gr,U,j.children,O,F,ae)}}Me&1&&j.children!==Y.children&&c(ge,Y.children)}else!ve&&De==null&&L(ge,Y,Xe,et,O,F,U);((Qe=et.onVnodeUpdated)||tt)&&vo(()=>{Qe&&Ga(Qe,O,Y,j),tt&&Hu(Y,j,O,"updated")},F)},M=(j,Y,O,F,U,Q,ve)=>{for(let ge=0;ge<Y.length;ge++){const Me=j[ge],De=Y[ge],tt=Me.el&&(Me.type===bn||!iu(Me,De)||Me.shapeFlag&70)?f(Me.el):O;y(Me,De,tt,null,F,U,Q,ve,!0)}},L=(j,Y,O,F,U,Q,ve)=>{if(O!==F){if(O!==_r)for(const ge in O)!jb(ge)&&!(ge in F)&&o(j,ge,O[ge],null,ve,Y.children,U,Q,ae);for(const ge in F){if(jb(ge))continue;const Me=F[ge],De=O[ge];Me!==De&&ge!=="value"&&o(j,ge,De,Me,ve,Y.children,U,Q,ae)}"value"in F&&o(j,"value",O.value,F.value)}},R=(j,Y,O,F,U,Q,ve,ge,Me)=>{const De=Y.el=j?j.el:s(""),tt=Y.anchor=j?j.anchor:s("");let{patchFlag:Xe,dynamicChildren:et,slotScopeIds:Qe}=Y;Qe&&(ge=ge?ge.concat(Qe):Qe),j==null?(r(De,O,F),r(tt,O,F),P(Y.children,O,tt,U,Q,ve,ge,Me)):Xe>0&&Xe&64&&et&&j.dynamicChildren?(M(j.dynamicChildren,et,O,U,Q,ve,ge),(Y.key!=null||U&&Y===U.subTree)&&rN(j,Y,!0)):Ae(j,Y,O,tt,U,Q,ve,ge,Me)},V=(j,Y,O,F,U,Q,ve,ge,Me)=>{Y.slotScopeIds=ge,j==null?Y.shapeFlag&512?U.ctx.activate(Y,O,F,ve,Me):z(Y,O,F,U,Q,ve,Me):ie(j,Y,Me)},z=(j,Y,O,F,U,Q,ve)=>{const ge=j.component=MX(j,F,U);if(Y_(j)&&(ge.ctx.renderer=ue),FX(ge),ge.asyncDep){if(U&&U.registerDep(ge,oe),!j.el){const Me=ge.subTree=lt(Xo);v(null,Me,Y,O)}return}oe(ge,j,Y,O,U,Q,ve)},ie=(j,Y,O)=>{const F=Y.component=j.component;if(i_e(j,Y,O))if(F.asyncDep&&!F.asyncResolved){Se(F,Y,O);return}else F.next=Y,J1e(F.update),F.update();else Y.el=j.el,F.vnode=Y},oe=(j,Y,O,F,U,Q,ve)=>{const ge=()=>{if(j.isMounted){let{next:tt,bu:Xe,u:et,parent:Qe,vnode:pt}=j,Ft=tt,Kt;Gd(j,!1),tt?(tt.el=pt.el,Se(j,tt,ve)):tt=pt,Xe&&xv(Xe),(Kt=tt.props&&tt.props.onVnodeBeforeUpdate)&&Ga(Kt,Qe,tt,pt),Gd(j,!0);const wt=KC(j),sn=j.subTree;j.subTree=wt,y(sn,wt,f(sn.el),te(sn),j,U,Q),tt.el=wt.el,Ft===null&&GM(j,wt.el),et&&vo(et,U),(Kt=tt.props&&tt.props.onVnodeUpdated)&&vo(()=>Ga(Kt,Qe,tt,pt),U)}else{let tt;const{el:Xe,props:et}=Y,{bm:Qe,m:pt,parent:Ft}=j,Kt=tg(Y);if(Gd(j,!1),Qe&&xv(Qe),!Kt&&(tt=et&&et.onVnodeBeforeMount)&&Ga(tt,Ft,Y),Gd(j,!0),Xe&&ye){const wt=()=>{j.subTree=KC(j),ye(Xe,j.subTree,j,U,null)};Kt?Y.type.__asyncLoader().then(()=>!j.isUnmounted&&wt()):wt()}else{const wt=j.subTree=KC(j);y(null,wt,O,F,j,U,Q),Y.el=wt.el}if(pt&&vo(pt,U),!Kt&&(tt=et&&et.onVnodeMounted)){const wt=Y;vo(()=>Ga(tt,Ft,wt),U)}(Y.shapeFlag&256||Ft&&tg(Ft.vnode)&&Ft.vnode.shapeFlag&256)&&j.a&&vo(j.a,U),j.isMounted=!0,Y=O=F=null}},Me=j.effect=new G_(ge,()=>uA(De),j.scope),De=j.update=()=>Me.run();De.id=j.uid,Gd(j,!0),De()},Se=(j,Y,O)=>{Y.component=j;const F=j.vnode.props;j.vnode=Y,j.next=null,q_e(j,Y.props,F,O),X_e(j,Y.children,O),k0(),M7(),T0()},Ae=(j,Y,O,F,U,Q,ve,ge,Me=!1)=>{const De=j&&j.children,tt=j?j.shapeFlag:0,Xe=Y.children,{patchFlag:et,shapeFlag:Qe}=Y;if(et>0){if(et&128){_e(De,Xe,O,F,U,Q,ve,ge,Me);return}else if(et&256){Ee(De,Xe,O,F,U,Q,ve,ge,Me);return}}Qe&8?(tt&16&&ae(De,U,Q),Xe!==De&&c(O,Xe)):tt&16?Qe&16?_e(De,Xe,O,F,U,Q,ve,ge,Me):ae(De,U,Q,!0):(tt&8&&c(O,""),Qe&16&&P(Xe,O,F,U,Q,ve,ge,Me))},Ee=(j,Y,O,F,U,Q,ve,ge,Me)=>{j=j||Sv,Y=Y||Sv;const De=j.length,tt=Y.length,Xe=Math.min(De,tt);let et;for(et=0;et<Xe;et++){const Qe=Y[et]=Me?ph(Y[et]):Is(Y[et]);y(j[et],Qe,O,null,U,Q,ve,ge,Me)}De>tt?ae(j,U,Q,!0,!1,Xe):P(Y,O,F,U,Q,ve,ge,Me,Xe)},_e=(j,Y,O,F,U,Q,ve,ge,Me)=>{let De=0;const tt=Y.length;let Xe=j.length-1,et=tt-1;for(;De<=Xe&&De<=et;){const Qe=j[De],pt=Y[De]=Me?ph(Y[De]):Is(Y[De]);if(iu(Qe,pt))y(Qe,pt,O,null,U,Q,ve,ge,Me);else break;De++}for(;De<=Xe&&De<=et;){const Qe=j[Xe],pt=Y[et]=Me?ph(Y[et]):Is(Y[et]);if(iu(Qe,pt))y(Qe,pt,O,null,U,Q,ve,ge,Me);else break;Xe--,et--}if(De>Xe){if(De<=et){const Qe=et+1,pt=Qe<tt?Y[Qe].el:F;for(;De<=et;)y(null,Y[De]=Me?ph(Y[De]):Is(Y[De]),O,pt,U,Q,ve,ge,Me),De++}}else if(De>et)for(;De<=Xe;)ne(j[De],U,Q,!0),De++;else{const Qe=De,pt=De,Ft=new Map;for(De=pt;De<=et;De++){const Tr=Y[De]=Me?ph(Y[De]):Is(Y[De]);Tr.key!=null&&Ft.set(Tr.key,De)}let Kt,wt=0;const sn=et-pt+1;let gr=!1,gi=0;const Dr=new Array(sn);for(De=0;De<sn;De++)Dr[De]=0;for(De=Qe;De<=Xe;De++){const Tr=j[De];if(wt>=sn){ne(Tr,U,Q,!0);continue}let Bn;if(Tr.key!=null)Bn=Ft.get(Tr.key);else for(Kt=pt;Kt<=et;Kt++)if(Dr[Kt-pt]===0&&iu(Tr,Y[Kt])){Bn=Kt;break}Bn===void 0?ne(Tr,U,Q,!0):(Dr[Bn-pt]=De+1,Bn>=gi?gi=Bn:gr=!0,y(Tr,Y[Bn],O,null,U,Q,ve,ge,Me),wt++)}const fo=gr?Z_e(Dr):Sv;for(Kt=fo.length-1,De=sn-1;De>=0;De--){const Tr=pt+De,Bn=Y[Tr],zn=Tr+1<tt?Y[Tr+1].el:F;Dr[De]===0?y(null,Bn,O,zn,U,Q,ve,ge,Me):gr&&(Kt<0||De!==fo[Kt]?se(Bn,O,zn,2):Kt--)}}},se=(j,Y,O,F,U=null)=>{const{el:Q,type:ve,transition:ge,children:Me,shapeFlag:De}=j;if(De&6){se(j.component.subTree,Y,O,F);return}if(De&128){j.suspense.move(Y,O,F);return}if(De&64){ve.move(j,Y,O,ue);return}if(ve===bn){r(Q,Y,O);for(let Xe=0;Xe<Me.length;Xe++)se(Me[Xe],Y,O,F);r(j.anchor,Y,O);return}if(ve===ng){C(j,Y,O);return}if(F!==2&&De&1&&ge)if(F===0)ge.beforeEnter(Q),r(Q,Y,O),vo(()=>ge.enter(Q),U);else{const{leave:Xe,delayLeave:et,afterLeave:Qe}=ge,pt=()=>r(Q,Y,O),Ft=()=>{Xe(Q,()=>{pt(),Qe&&Qe()})};et?et(Q,pt,Ft):Ft()}else r(Q,Y,O)},ne=(j,Y,O,F=!1,U=!1)=>{const{type:Q,props:ve,ref:ge,children:Me,dynamicChildren:De,shapeFlag:tt,patchFlag:Xe,dirs:et}=j;if(ge!=null&&J2(ge,null,O,j,!0),tt&256){Y.ctx.deactivate(j);return}const Qe=tt&1&&et,pt=!tg(j);let Ft;if(pt&&(Ft=ve&&ve.onVnodeBeforeUnmount)&&Ga(Ft,Y,j),tt&6)H(j.component,O,F);else{if(tt&128){j.suspense.unmount(O,F);return}Qe&&Hu(j,null,Y,"beforeUnmount"),tt&64?j.type.remove(j,Y,O,U,ue,F):De&&(Q!==bn||Xe>0&&Xe&64)?ae(De,Y,O,!1,!0):(Q===bn&&Xe&384||!U&&tt&16)&&ae(Me,Y,O),F&&J(j)}(pt&&(Ft=ve&&ve.onVnodeUnmounted)||Qe)&&vo(()=>{Ft&&Ga(Ft,Y,j),Qe&&Hu(j,null,Y,"unmounted")},O)},J=j=>{const{type:Y,el:O,anchor:F,transition:U}=j;if(Y===bn){B(O,F);return}if(Y===ng){k(j);return}const Q=()=>{i(O),U&&!U.persisted&&U.afterLeave&&U.afterLeave()};if(j.shapeFlag&1&&U&&!U.persisted){const{leave:ve,delayLeave:ge}=U,Me=()=>ve(O,Q);ge?ge(j.el,Q,Me):Me()}else Q()},B=(j,Y)=>{let O;for(;j!==Y;)O=h(j),i(j),j=O;i(Y)},H=(j,Y,O)=>{const{bum:F,scope:U,update:Q,subTree:ve,um:ge}=j;F&&xv(F),U.stop(),Q&&(Q.active=!1,ne(ve,j,Y,O)),ge&&vo(ge,Y),vo(()=>{j.isUnmounted=!0},Y),Y&&Y.pendingBranch&&!Y.isUnmounted&&j.asyncDep&&!j.asyncResolved&&j.suspenseId===Y.pendingId&&(Y.deps--,Y.deps===0&&Y.resolve())},ae=(j,Y,O,F=!1,U=!1,Q=0)=>{for(let ve=Q;ve<j.length;ve++)ne(j[ve],Y,O,F,U)},te=j=>j.shapeFlag&6?te(j.component.subTree):j.shapeFlag&128?j.suspense.next():h(j.anchor||j.el),ce=(j,Y,O)=>{j==null?Y._vnode&&ne(Y._vnode,null,null,!0):y(Y._vnode||null,j,Y,null,null,null,O),M7(),K2(),Y._vnode=j},ue={p:y,um:ne,m:se,r:J,mt:z,mc:P,pc:Ae,pbc:M,n:te,o:t};let fe,ye;return e&&([fe,ye]=e(ue)),{render:ce,hydrate:fe,createApp:W_e(ce,fe)}}function Gd({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function rN(t,e,n=!1){const r=t.children,i=e.children;if(_t(r)&&_t(i))for(let o=0;o<r.length;o++){const a=r[o];let s=i[o];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=i[o]=ph(i[o]),s.el=a.el),n||rN(a,s)),s.type===yg&&(s.el=a.el)}}function Z_e(t){const e=t.slice(),n=[0];let r,i,o,a,s;const l=t.length;for(r=0;r<l;r++){const u=t[r];if(u!==0){if(i=n[n.length-1],t[i]<u){e[r]=i,n.push(r);continue}for(o=0,a=n.length-1;o<a;)s=o+a>>1,t[n[s]]<u?o=s+1:a=s;u<t[n[o]]&&(o>0&&(e[r]=n[o-1]),n[o]=r)}}for(o=n.length,a=n[o-1];o-- >0;)n[o]=a,a=e[a];return n}const Q_e=t=>t.__isTeleport,Gb=t=>t&&(t.disabled||t.disabled===""),q7=t=>typeof SVGElement<"u"&&t instanceof SVGElement,W4=(t,e)=>{const n=t&&t.to;return oi(n)?e?e(n):null:n},eSe={__isTeleport:!0,process(t,e,n,r,i,o,a,s,l,u){const{mc:c,pc:f,pbc:h,o:{insert:d,querySelector:g,createText:y,createComment:_}}=u,v=Gb(e.props);let{shapeFlag:S,children:C,dynamicChildren:k}=e;if(t==null){const x=e.el=y(""),m=e.anchor=y("");d(x,n,r),d(m,n,r);const T=e.target=W4(e.props,g),P=e.targetAnchor=y("");T&&(d(P,T),a=a||q7(T));const I=(M,L)=>{S&16&&c(C,M,L,i,o,a,s,l)};v?I(n,m):T&&I(T,P)}else{e.el=t.el;const x=e.anchor=t.anchor,m=e.target=t.target,T=e.targetAnchor=t.targetAnchor,P=Gb(t.props),I=P?n:m,M=P?x:T;if(a=a||q7(m),k?(h(t.dynamicChildren,k,I,i,o,a,s),rN(t,e,!0)):l||f(t,e,I,M,i,o,a,s,!1),v)P||nx(e,n,x,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const L=e.target=W4(e.props,g);L&&nx(e,L,null,u,0)}else P&&nx(e,m,T,u,1)}OX(e)},remove(t,e,n,r,{um:i,o:{remove:o}},a){const{shapeFlag:s,children:l,anchor:u,targetAnchor:c,target:f,props:h}=t;if(f&&o(c),(a||!Gb(h))&&(o(u),s&16))for(let d=0;d<l.length;d++){const g=l[d];i(g,e,n,!0,!!g.dynamicChildren)}},move:nx,hydrate:tSe};function nx(t,e,n,{o:{insert:r},m:i},o=2){o===0&&r(t.targetAnchor,e,n);const{el:a,anchor:s,shapeFlag:l,children:u,props:c}=t,f=o===2;if(f&&r(a,e,n),(!f||Gb(c))&&l&16)for(let h=0;h<u.length;h++)i(u[h],e,n,2);f&&r(s,e,n)}function tSe(t,e,n,r,i,o,{o:{nextSibling:a,parentNode:s,querySelector:l}},u){const c=e.target=W4(e.props,l);if(c){const f=c._lpa||c.firstChild;if(e.shapeFlag&16)if(Gb(e.props))e.anchor=u(a(t),e,s(t),n,r,i,o),e.targetAnchor=f;else{e.anchor=a(t);let h=f;for(;h;)if(h=a(h),h&&h.nodeType===8&&h.data==="teleport anchor"){e.targetAnchor=h,c._lpa=e.targetAnchor&&a(e.targetAnchor);break}u(f,e,c,n,r,i,o)}OX(e)}return e.anchor&&a(e.anchor)}const nSe=eSe;function OX(t){const e=t.ctx;if(e&&e.ut){let n=t.children[0].el;for(;n!==t.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}const bn=Symbol.for("v-fgt"),yg=Symbol.for("v-txt"),Xo=Symbol.for("v-cmt"),ng=Symbol.for("v-stc"),qb=[];let rs=null;function Oe(t=!1){qb.push(rs=t?null:[])}function IX(){qb.pop(),rs=qb[qb.length-1]||null}let bg=1;function H4(t){bg+=t}function $X(t){return t.dynamicChildren=bg>0?rs||Sv:null,IX(),bg>0&&rs&&rs.push(t),t}function We(t,e,n,r,i,o){return $X(X(t,e,n,r,i,o,!0))}function tn(t,e,n,r,i){return $X(lt(t,e,n,r,i,!0))}function Yh(t){return t?t.__v_isVNode===!0:!1}function iu(t,e){return t.type===e.type&&t.key===e.key}function rSe(t){}const gA="__vInternal",LX=({key:t})=>t??null,XC=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?oi(t)||ci(t)||on(t)?{i:lo,r:t,k:e,f:!!n}:t:null);function X(t,e=null,n=null,r=0,i=null,o=t===bn?0:1,a=!1,s=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&LX(e),ref:e&&XC(e),scopeId:fA,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:lo};return s?(iN(l,n),o&128&&t.normalize(l)):n&&(l.shapeFlag|=oi(n)?8:16),bg>0&&!a&&rs&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&rs.push(l),l}const lt=iSe;function iSe(t,e=null,n=null,r=0,i=null,o=!1){if((!t||t===vX)&&(t=Xo),Yh(t)){const s=mc(t,e,!0);return n&&iN(s,n),bg>0&&!o&&rs&&(s.shapeFlag&6?rs[rs.indexOf(t)]=s:rs.push(s)),s.patchFlag|=-2,s}if(fSe(t)&&(t=t.__vccOpts),e){e=mA(e);let{class:s,style:l}=e;s&&!oi(s)&&(e.class=Wt(s)),xr(l)&&(VM(l)&&!_t(l)&&(l=jr({},l)),e.style=H_(l))}const a=oi(t)?1:rX(t)?128:Q_e(t)?64:xr(t)?4:on(t)?2:0;return X(t,e,n,r,i,a,o,!0)}function mA(t){return t?VM(t)||gA in t?jr({},t):t:null}function mc(t,e,n=!1){const{props:r,ref:i,patchFlag:o,children:a}=t,s=e?Dl(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:s,key:s&&LX(s),ref:e&&e.ref?n&&i?_t(i)?i.concat(XC(e)):[i,XC(e)]:XC(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==bn?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&mc(t.ssContent),ssFallback:t.ssFallback&&mc(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function Bi(t=" ",e=0){return lt(yg,null,t,e)}function DX(t,e){const n=lt(ng,null,t);return n.staticCount=e,n}function ut(t="",e=!1){return e?(Oe(),tn(Xo,null,t)):lt(Xo,null,t)}function Is(t){return t==null||typeof t=="boolean"?lt(Xo):_t(t)?lt(bn,null,t.slice()):typeof t=="object"?ph(t):lt(yg,null,String(t))}function ph(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:mc(t)}function iN(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(_t(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),iN(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!(gA in e)?e._ctx=lo:i===3&&lo&&(lo.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else on(e)?(e={default:e,_ctx:lo},n=32):(e=String(e),r&64?(n=16,e=[Bi(e)]):n=8);t.children=e,t.shapeFlag|=n}function Dl(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Wt([e.class,r.class]));else if(i==="style")e.style=H_([e.style,r.style]);else if(U_(i)){const o=e[i],a=r[i];a&&o!==a&&!(_t(o)&&o.includes(a))&&(e[i]=o?[].concat(o,a):a)}else i!==""&&(e[i]=r[i])}return e}function Ga(t,e,n,r=null){Rs(t,e,7,[n,r])}const oSe=SX();let aSe=0;function MX(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||oSe,o={uid:aSe++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new LM(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:xX(r,i),emitsOptions:nX(r,i),emit:null,emitted:null,propsDefaults:_r,inheritAttrs:r.inheritAttrs,ctx:_r,data:_r,props:_r,attrs:_r,slots:_r,refs:_r,setupState:_r,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=Q1e.bind(null,o),t.ce&&t.ce(o),o}let Vi=null;const bu=()=>Vi||lo;let oN,bm,Y7="__VUE_INSTANCE_SETTERS__";(bm=L4()[Y7])||(bm=L4()[Y7]=[]),bm.push(t=>Vi=t),oN=t=>{bm.length>1?bm.forEach(e=>e(t)):bm[0](t)};const Kh=t=>{oN(t),t.scope.on()},Ih=()=>{Vi&&Vi.scope.off(),oN(null)};function NX(t){return t.vnode.shapeFlag&4}let Qv=!1;function FX(t,e=!1){Qv=e;const{props:n,children:r}=t.vnode,i=NX(t);G_e(t,n,i,e),K_e(t,r);const o=i?sSe(t,e):void 0;return Qv=!1,o}function sSe(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=mg(new Proxy(t.ctx,B4));const{setup:r}=n;if(r){const i=t.setupContext=r.length>1?VX(t):null;Kh(t),k0();const o=gf(r,t,0,[t.props,i]);if(T0(),Ih(),OM(o)){if(o.then(Ih,Ih),e)return o.then(a=>{G4(t,a,e)}).catch(a=>{Fg(a,t,0)});t.asyncDep=o}else G4(t,o,e)}else RX(t,e)}function G4(t,e,n){on(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:xr(e)&&(t.setupState=jM(e)),RX(t,n)}let Z2,q4;function lSe(t){Z2=t,q4=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,x_e))}}const uSe=()=>!Z2;function RX(t,e,n){const r=t.type;if(!t.render){if(!e&&Z2&&!r.render){const i=r.template||tN(t).template;if(i){const{isCustomElement:o,compilerOptions:a}=t.appContext.config,{delimiters:s,compilerOptions:l}=r,u=jr(jr({isCustomElement:o,delimiters:s},a),l);r.render=Z2(i,u)}}t.render=r.render||fu,q4&&q4(t)}Kh(t),k0(),R_e(t),T0(),Ih()}function cSe(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return us(t,"get","$attrs"),e[n]}}))}function VX(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return cSe(t)},slots:t.slots,emit:t.emit,expose:e}}function vA(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(jM(mg(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Wb)return Wb[n](t)},has(e,n){return n in e||n in Wb}}))}function Y4(t,e=!0){return on(t)?t.displayName||t.name:t.name||e&&t.__name}function fSe(t){return on(t)&&"__vccOpts"in t}const Ln=(t,e)=>G1e(t,e,Qv);function Xh(t,e,n){const r=arguments.length;return r===2?xr(e)&&!_t(e)?Yh(e)?lt(t,null,[e]):lt(t,e):lt(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Yh(n)&&(n=[n]),lt(t,e,n))}const BX=Symbol.for("v-scx"),zX=()=>Ni(BX);function hSe(){}function dSe(t,e,n,r){const i=n[r];if(i&&jX(i,t))return i;const o=e();return o.memo=t.slice(),n[r]=o}function jX(t,e){const n=t.memo;if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(Jv(n[r],e[r]))return!1;return bg>0&&rs&&rs.push(t),!0}const UX="3.3.2",pSe={createComponentInstance:MX,setupComponent:FX,renderComponentRoot:KC,setCurrentRenderingInstance:$1,isVNode:Yh,normalizeVNode:Is},gSe=pSe,mSe=null,vSe=null,ySe="http://www.w3.org/2000/svg",Ap=typeof document<"u"?document:null,K7=Ap&&Ap.createElement("template"),bSe={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e?Ap.createElementNS(ySe,t):Ap.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>Ap.createTextNode(t),createComment:t=>Ap.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ap.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,o){const a=n?n.previousSibling:e.lastChild;if(i&&(i===o||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===o||!(i=i.nextSibling)););else{K7.innerHTML=r?`<svg>${t}</svg>`:t;const s=K7.content;if(r){const l=s.firstChild;for(;l.firstChild;)s.appendChild(l.firstChild);s.removeChild(l)}e.insertBefore(s,n)}return[a?a.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function _Se(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function SSe(t,e,n){const r=t.style,i=oi(n);if(n&&!i){if(e&&!oi(e))for(const o in e)n[o]==null&&K4(r,o,"");for(const o in n)K4(r,o,n[o])}else{const o=r.display;i?e!==n&&(r.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(r.display=o)}}const X7=/\s*!important$/;function K4(t,e,n){if(_t(n))n.forEach(r=>K4(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=wSe(t,e);X7.test(n)?t.setProperty(_l(r),n.replace(X7,""),"important"):t[r]=n}}const J7=["Webkit","Moz","ms"],AO={};function wSe(t,e){const n=AO[e];if(n)return n;let r=as(e);if(r!=="filter"&&r in t)return AO[e]=r;r=W_(r);for(let i=0;i<J7.length;i++){const o=J7[i]+r;if(o in t)return AO[e]=o}return e}const Z7="http://www.w3.org/1999/xlink";function xSe(t,e,n,r,i){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(Z7,e.slice(6,e.length)):t.setAttributeNS(Z7,e,n);else{const o=r1e(e);n==null||o&&!LK(n)?t.removeAttribute(e):t.setAttribute(e,o?"":n)}}function CSe(t,e,n,r,i,o,a){if(e==="innerHTML"||e==="textContent"){r&&a(r,i,o),t[e]=n??"";return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){t._value=n;const u=s==="OPTION"?t.getAttribute("value"):t.value,c=n??"";u!==c&&(t.value=c),n==null&&t.removeAttribute(e);return}let l=!1;if(n===""||n==null){const u=typeof t[e];u==="boolean"?n=LK(n):n==null&&u==="string"?(n="",l=!0):u==="number"&&(n=0,l=!0)}try{t[e]=n}catch{}l&&t.removeAttribute(e)}function af(t,e,n,r){t.addEventListener(e,n,r)}function kSe(t,e,n,r){t.removeEventListener(e,n,r)}function TSe(t,e,n,r,i=null){const o=t._vei||(t._vei={}),a=o[e];if(r&&a)a.value=r;else{const[s,l]=ASe(e);if(r){const u=o[e]=OSe(r,i);af(t,s,u,l)}else a&&(kSe(t,s,a,l),o[e]=void 0)}}const Q7=/(?:Once|Passive|Capture)$/;function ASe(t){let e;if(Q7.test(t)){e={};let r;for(;r=t.match(Q7);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):_l(t.slice(2)),e]}let EO=0;const ESe=Promise.resolve(),PSe=()=>EO||(ESe.then(()=>EO=0),EO=Date.now());function OSe(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Rs(ISe(r,n.value),e,5,[r])};return n.value=t,n.attached=PSe(),n}function ISe(t,e){if(_t(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const eV=/^on[a-z]/,$Se=(t,e,n,r,i=!1,o,a,s,l)=>{e==="class"?_Se(t,r,i):e==="style"?SSe(t,n,r):U_(e)?EM(e)||TSe(t,e,n,r,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):LSe(t,e,r,i))?CSe(t,e,r,o,a,s,l):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),xSe(t,e,r,i))};function LSe(t,e,n,r){return r?!!(e==="innerHTML"||e==="textContent"||e in t&&eV.test(e)&&on(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||eV.test(e)&&oi(n)?!1:e in t}function WX(t,e){const n=zt(t);class r extends yA{constructor(o){super(n,o,e)}}return r.def=n,r}const DSe=t=>WX(t,iJ),MSe=typeof HTMLElement<"u"?HTMLElement:class{};class yA extends MSe{constructor(e,n={},r){super(),this._def=e,this._props=n,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&r?r(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,A0(()=>{this._connected||(Z4(null,this.shadowRoot),this._instance=null)})}_resolveDef(){this._resolved=!0;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);new MutationObserver(r=>{for(const i of r)this._setAttr(i.attributeName)}).observe(this,{attributes:!0});const e=(r,i=!1)=>{const{props:o,styles:a}=r;let s;if(o&&!_t(o))for(const l in o){const u=o[l];(u===Number||u&&u.type===Number)&&(l in this._props&&(this._props[l]=q2(this._props[l])),(s||(s=Object.create(null)))[as(l)]=!0)}this._numberProps=s,i&&this._resolveProps(r),this._applyStyles(a),this._update()},n=this._def.__asyncLoader;n?n().then(r=>e(r,!0)):e(this._def)}_resolveProps(e){const{props:n}=e,r=_t(n)?n:Object.keys(n||{});for(const i of Object.keys(this))i[0]!=="_"&&r.includes(i)&&this._setProp(i,this[i],!0,!1);for(const i of r.map(as))Object.defineProperty(this,i,{get(){return this._getProp(i)},set(o){this._setProp(i,o)}})}_setAttr(e){let n=this.getAttribute(e);const r=as(e);this._numberProps&&this._numberProps[r]&&(n=q2(n)),this._setProp(r,n,!1)}_getProp(e){return this._props[e]}_setProp(e,n,r=!0,i=!0){n!==this._props[e]&&(this._props[e]=n,i&&this._instance&&this._update(),r&&(n===!0?this.setAttribute(_l(e),""):typeof n=="string"||typeof n=="number"?this.setAttribute(_l(e),n+""):n||this.removeAttribute(_l(e))))}_update(){Z4(this._createVNode(),this.shadowRoot)}_createVNode(){const e=lt(this._def,jr({},this._props));return this._instance||(e.ce=n=>{this._instance=n,n.isCE=!0;const r=(o,a)=>{this.dispatchEvent(new CustomEvent(o,{detail:a}))};n.emit=(o,...a)=>{r(o,a),_l(o)!==o&&r(_l(o),a)};let i=this;for(;i=i&&(i.parentNode||i.host);)if(i instanceof yA){n.parent=i._instance,n.provides=i._instance.provides;break}}),e}_applyStyles(e){e&&e.forEach(n=>{const r=document.createElement("style");r.textContent=n,this.shadowRoot.appendChild(r)})}}function NSe(t="$style"){{const e=bu();if(!e)return _r;const n=e.type.__cssModules;if(!n)return _r;const r=n[t];return r||_r}}function FSe(t){const e=bu();if(!e)return;const n=e.ut=(i=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(o=>J4(o,i))},r=()=>{const i=t(e.proxy);X4(e.subTree,i),n(i)};oX(r),Bg(()=>{const i=new MutationObserver(r);i.observe(e.subTree.el.parentNode,{childList:!0}),K_(()=>i.disconnect())})}function X4(t,e){if(t.shapeFlag&128){const n=t.suspense;t=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{X4(n.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)J4(t.el,e);else if(t.type===bn)t.children.forEach(n=>X4(n,e));else if(t.type===ng){let{el:n,anchor:r}=t;for(;n&&(J4(n,e),n!==r);)n=n.nextSibling}}function J4(t,e){if(t.nodeType===1){const n=t.style;for(const r in e)n.setProperty(`--${r}`,e[r])}}const Jf="transition",Iy="animation",aN=(t,{slots:e})=>Xh(sX,GX(t),e);aN.displayName="Transition";const HX={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},RSe=aN.props=jr({},KM,HX),qd=(t,e=[])=>{_t(t)?t.forEach(n=>n(...e)):t&&t(...e)},tV=t=>t?_t(t)?t.some(e=>e.length>1):t.length>1:!1;function GX(t){const e={};for(const R in t)R in HX||(e[R]=t[R]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:o=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:s=`${n}-enter-to`,appearFromClass:l=o,appearActiveClass:u=a,appearToClass:c=s,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:h=`${n}-leave-active`,leaveToClass:d=`${n}-leave-to`}=t,g=VSe(i),y=g&&g[0],_=g&&g[1],{onBeforeEnter:v,onEnter:S,onEnterCancelled:C,onLeave:k,onLeaveCancelled:x,onBeforeAppear:m=v,onAppear:T=S,onAppearCancelled:P=C}=e,I=(R,V,z)=>{ch(R,V?c:s),ch(R,V?u:a),z&&z()},M=(R,V)=>{R._isLeaving=!1,ch(R,f),ch(R,d),ch(R,h),V&&V()},L=R=>(V,z)=>{const ie=R?T:S,oe=()=>I(V,R,z);qd(ie,[V,oe]),nV(()=>{ch(V,R?l:o),Gc(V,R?c:s),tV(ie)||rV(V,r,y,oe)})};return jr(e,{onBeforeEnter(R){qd(v,[R]),Gc(R,o),Gc(R,a)},onBeforeAppear(R){qd(m,[R]),Gc(R,l),Gc(R,u)},onEnter:L(!1),onAppear:L(!0),onLeave(R,V){R._isLeaving=!0;const z=()=>M(R,V);Gc(R,f),YX(),Gc(R,h),nV(()=>{R._isLeaving&&(ch(R,f),Gc(R,d),tV(k)||rV(R,r,_,z))}),qd(k,[R,z])},onEnterCancelled(R){I(R,!1),qd(C,[R])},onAppearCancelled(R){I(R,!0),qd(P,[R])},onLeaveCancelled(R){M(R),qd(x,[R])}})}function VSe(t){if(t==null)return null;if(xr(t))return[PO(t.enter),PO(t.leave)];{const e=PO(t);return[e,e]}}function PO(t){return q2(t)}function Gc(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t._vtc||(t._vtc=new Set)).add(e)}function ch(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function nV(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let BSe=0;function rV(t,e,n,r){const i=t._endId=++BSe,o=()=>{i===t._endId&&r()};if(n)return setTimeout(o,n);const{type:a,timeout:s,propCount:l}=qX(t,e);if(!a)return r();const u=a+"end";let c=0;const f=()=>{t.removeEventListener(u,h),o()},h=d=>{d.target===t&&++c>=l&&f()};setTimeout(()=>{c<l&&f()},s+1),t.addEventListener(u,h)}function qX(t,e){const n=window.getComputedStyle(t),r=g=>(n[g]||"").split(", "),i=r(`${Jf}Delay`),o=r(`${Jf}Duration`),a=iV(i,o),s=r(`${Iy}Delay`),l=r(`${Iy}Duration`),u=iV(s,l);let c=null,f=0,h=0;e===Jf?a>0&&(c=Jf,f=a,h=o.length):e===Iy?u>0&&(c=Iy,f=u,h=l.length):(f=Math.max(a,u),c=f>0?a>u?Jf:Iy:null,h=c?c===Jf?o.length:l.length:0);const d=c===Jf&&/\b(transform|all)(,|$)/.test(r(`${Jf}Property`).toString());return{type:c,timeout:f,propCount:h,hasTransform:d}}function iV(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>oV(n)+oV(t[r])))}function oV(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function YX(){return document.body.offsetHeight}const KX=new WeakMap,XX=new WeakMap,JX={name:"TransitionGroup",props:jr({},RSe,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=bu(),r=YM();let i,o;return pA(()=>{if(!i.length)return;const a=t.moveClass||`${t.name||"v"}-move`;if(!GSe(i[0].el,n.vnode.el,a))return;i.forEach(USe),i.forEach(WSe);const s=i.filter(HSe);YX(),s.forEach(l=>{const u=l.el,c=u.style;Gc(u,a),c.transform=c.webkitTransform=c.transitionDuration="";const f=u._moveCb=h=>{h&&h.target!==u||(!h||/transform$/.test(h.propertyName))&&(u.removeEventListener("transitionend",f),u._moveCb=null,ch(u,a))};u.addEventListener("transitionend",f)})}),()=>{const a=Mn(t),s=GX(a);let l=a.tag||bn;i=o,o=e.default?hA(e.default()):[];for(let u=0;u<o.length;u++){const c=o[u];c.key!=null&&vg(c,Zv(c,s,r,n))}if(i)for(let u=0;u<i.length;u++){const c=i[u];vg(c,Zv(c,s,r,n)),KX.set(c,c.el.getBoundingClientRect())}return lt(l,null,o)}}},zSe=t=>delete t.mode;JX.props;const jSe=JX;function USe(t){const e=t.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function WSe(t){XX.set(t,t.el.getBoundingClientRect())}function HSe(t){const e=KX.get(t),n=XX.get(t),r=e.left-n.left,i=e.top-n.top;if(r||i){const o=t.el.style;return o.transform=o.webkitTransform=`translate(${r}px,${i}px)`,o.transitionDuration="0s",t}}function GSe(t,e,n){const r=t.cloneNode();t._vtc&&t._vtc.forEach(a=>{a.split(/\s+/).forEach(s=>s&&r.classList.remove(s))}),n.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(r);const{hasTransform:o}=qX(r);return i.removeChild(r),o}const Jh=t=>{const e=t.props["onUpdate:modelValue"]||!1;return _t(e)?n=>xv(e,n):e};function qSe(t){t.target.composing=!0}function aV(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Zh={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t._assign=Jh(i);const o=r||i.props&&i.props.type==="number";af(t,e?"change":"input",a=>{if(a.target.composing)return;let s=t.value;n&&(s=s.trim()),o&&(s=G2(s)),t._assign(s)}),n&&af(t,"change",()=>{t.value=t.value.trim()}),e||(af(t,"compositionstart",qSe),af(t,"compositionend",aV),af(t,"change",aV))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:r,number:i}},o){if(t._assign=Jh(o),t.composing||document.activeElement===t&&t.type!=="range"&&(n||r&&t.value.trim()===e||(i||t.type==="number")&&G2(t.value)===e))return;const a=e??"";t.value!==a&&(t.value=a)}},sN={deep:!0,created(t,e,n){t._assign=Jh(n),af(t,"change",()=>{const r=t._modelValue,i=e0(t),o=t.checked,a=t._assign;if(_t(r)){const s=rA(r,i),l=s!==-1;if(o&&!l)a(r.concat(i));else if(!o&&l){const u=[...r];u.splice(s,1),a(u)}}else if(Ng(r)){const s=new Set(r);o?s.add(i):s.delete(i),a(s)}else a(ZX(t,o))})},mounted:sV,beforeUpdate(t,e,n){t._assign=Jh(n),sV(t,e,n)}};function sV(t,{value:e,oldValue:n},r){t._modelValue=e,_t(e)?t.checked=rA(e,r.props.value)>-1:Ng(e)?t.checked=e.has(r.props.value):e!==n&&(t.checked=Gh(e,ZX(t,!0)))}const lN={created(t,{value:e},n){t.checked=Gh(e,n.props.value),t._assign=Jh(n),af(t,"change",()=>{t._assign(e0(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t._assign=Jh(r),e!==n&&(t.checked=Gh(e,r.props.value))}},P0={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const i=Ng(e);af(t,"change",()=>{const o=Array.prototype.filter.call(t.options,a=>a.selected).map(a=>n?G2(e0(a)):e0(a));t._assign(t.multiple?i?new Set(o):o:o[0])}),t._assign=Jh(r)},mounted(t,{value:e}){lV(t,e)},beforeUpdate(t,e,n){t._assign=Jh(n)},updated(t,{value:e}){lV(t,e)}};function lV(t,e){const n=t.multiple;if(!(n&&!_t(e)&&!Ng(e))){for(let r=0,i=t.options.length;r<i;r++){const o=t.options[r],a=e0(o);if(n)_t(e)?o.selected=rA(e,a)>-1:o.selected=e.has(a);else if(Gh(e0(o),e)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function e0(t){return"_value"in t?t._value:t.value}function ZX(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const QX={created(t,e,n){rx(t,e,n,null,"created")},mounted(t,e,n){rx(t,e,n,null,"mounted")},beforeUpdate(t,e,n,r){rx(t,e,n,r,"beforeUpdate")},updated(t,e,n,r){rx(t,e,n,r,"updated")}};function eJ(t,e){switch(t){case"SELECT":return P0;case"TEXTAREA":return Zh;default:switch(e){case"checkbox":return sN;case"radio":return lN;default:return Zh}}}function rx(t,e,n,r,i){const a=eJ(t.tagName,n.props&&n.props.type)[i];a&&a(t,e,n,r)}function YSe(){Zh.getSSRProps=({value:t})=>({value:t}),lN.getSSRProps=({value:t},e)=>{if(e.props&&Gh(e.props.value,t))return{checked:!0}},sN.getSSRProps=({value:t},e)=>{if(_t(t)){if(e.props&&rA(t,e.props.value)>-1)return{checked:!0}}else if(Ng(t)){if(e.props&&t.has(e.props.value))return{checked:!0}}else if(t)return{checked:!0}},QX.getSSRProps=(t,e)=>{if(typeof e.type!="string")return;const n=eJ(e.type.toUpperCase(),e.props&&e.props.type);if(n.getSSRProps)return n.getSSRProps(t,e)}}const KSe=["ctrl","shift","alt","meta"],XSe={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>KSe.some(n=>t[`${n}Key`]&&!e.includes(n))},uN=(t,e)=>(n,...r)=>{for(let i=0;i<e.length;i++){const o=XSe[e[i]];if(o&&o(n,e))return}return t(n,...r)},JSe={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},ZSe=(t,e)=>n=>{if(!("key"in n))return;const r=_l(n.key);if(e.some(i=>i===r||JSe[i]===r))return t(n)},cN={beforeMount(t,{value:e},{transition:n}){t._vod=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):$y(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),$y(t,!0),r.enter(t)):r.leave(t,()=>{$y(t,!1)}):$y(t,e))},beforeUnmount(t,{value:e}){$y(t,e)}};function $y(t,e){t.style.display=e?t._vod:"none"}function QSe(){cN.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}const tJ=jr({patchProp:$Se},bSe);let Yb,uV=!1;function nJ(){return Yb||(Yb=AX(tJ))}function rJ(){return Yb=uV?Yb:EX(tJ),uV=!0,Yb}const Z4=(...t)=>{nJ().render(...t)},iJ=(...t)=>{rJ().hydrate(...t)},oJ=(...t)=>{const e=nJ().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=aJ(r);if(!i)return;const o=e._component;!on(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.innerHTML="";const a=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},e},ewe=(...t)=>{const e=rJ().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=aJ(r);if(i)return n(i,!0,i instanceof SVGElement)},e};function aJ(t){return oi(t)?document.querySelector(t):t}let cV=!1;const twe=()=>{cV||(cV=!0,YSe(),QSe())},nwe=()=>{},rwe=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:sX,BaseTransitionPropsValidators:KM,Comment:Xo,EffectScope:LM,Fragment:bn,KeepAlive:v_e,ReactiveEffect:G_,Static:ng,Suspense:a_e,Teleport:nSe,Text:yg,Transition:aN,TransitionGroup:jSe,VueElement:yA,assertNumber:Y1e,callWithAsyncErrorHandling:Rs,callWithErrorHandling:gf,camelize:as,capitalize:W_,cloneVNode:mc,compatUtils:vSe,compile:nwe,computed:Ln,createApp:oJ,createBlock:tn,createCommentVNode:ut,createElementBlock:We,createElementVNode:X,createHydrationRenderer:EX,createPropsRestProxy:N_e,createRenderer:AX,createSSRApp:ewe,createSlots:S_e,createStaticVNode:DX,createTextVNode:Bi,createVNode:lt,customRef:z1e,defineAsyncComponent:g_e,defineComponent:zt,defineCustomElement:WX,defineEmits:k_e,defineExpose:T_e,defineModel:P_e,defineOptions:A_e,defineProps:C_e,defineSSRCustomElement:DSe,defineSlots:E_e,get devtools(){return Wm},effect:s1e,effectScope:DM,getCurrentInstance:bu,getCurrentScope:MM,getTransitionRawChildren:hA,guardReactiveProps:mA,h:Xh,handleError:Fg,hasInjectionContext:H_e,hydrate:iJ,initCustomFormatter:hSe,initDirectivesForSSR:twe,inject:Ni,isMemoSame:jX,isProxy:VM,isReactive:pf,isReadonly:gg,isRef:ci,isRuntimeOnly:uSe,isShallow:E1,isVNode:Yh,markRaw:mg,mergeDefaults:D_e,mergeModels:M_e,mergeProps:Dl,nextTick:A0,normalizeClass:Wt,normalizeProps:$M,normalizeStyle:H_,onActivated:uX,onBeforeMount:XM,onBeforeUnmount:E0,onBeforeUpdate:hX,onDeactivated:cX,onErrorCaptured:mX,onMounted:Bg,onRenderTracked:gX,onRenderTriggered:pX,onScopeDispose:NK,onServerPrefetch:dX,onUnmounted:K_,onUpdated:pA,openBlock:Oe,popScopeId:Vg,provide:Hb,proxyRefs:jM,pushScopeId:Rg,queuePostFlushCb:HM,reactive:dd,readonly:RM,ref:Tl,registerRuntimeCompiler:lSe,render:Z4,renderList:Po,renderSlot:eN,resolveComponent:$t,resolveDirective:__e,resolveDynamicComponent:ZM,resolveFilter:mSe,resolveTransitionHooks:Zv,setBlockTracking:H4,setDevtoolsHook:tX,setTransitionHooks:vg,shallowReactive:KK,shallowReadonly:M1e,shallowRef:rc,ssrContextKey:BX,ssrUtils:gSe,stop:l1e,toDisplayString:en,toHandlerKey:Ub,toHandlers:w_e,toRaw:Mn,toRef:W1e,toRefs:UM,toValue:R1e,transformVNodeArgs:rSe,triggerRef:F1e,unref:ri,useAttrs:$_e,useCssModule:NSe,useCssVars:FSe,useModel:L_e,useSSRContext:zX,useSlots:I_e,useTransitionState:YM,vModelCheckbox:sN,vModelDynamic:QX,vModelRadio:lN,vModelSelect:P0,vModelText:Zh,vShow:cN,version:UX,warn:q1e,watch:wi,watchEffect:R4,watchPostEffect:oX,watchSyncEffect:h_e,withAsyncContext:F_e,withCtx:gs,withDefaults:O_e,withDirectives:gc,withKeys:ZSe,withMemo:dSe,withModifiers:uN,withScopeId:e_e},Symbol.toStringTag,{value:"Module"}));function fV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fV(Object(n),!0).forEach(function(r){Wa(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Q2(t){"@babel/helpers - typeof";return Q2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q2(t)}function Wa(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iwe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function owe(t,e){if(t==null)return{};var n=iwe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}var awe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},sJ={exports:{}};(function(t){(function(e){var n=function(v,S,C){if(!u(S)||f(S)||h(S)||d(S)||l(S))return S;var k,x=0,m=0;if(c(S))for(k=[],m=S.length;x<m;x++)k.push(n(v,S[x],C));else{k={};for(var T in S)Object.prototype.hasOwnProperty.call(S,T)&&(k[v(T,C)]=n(v,S[T],C))}return k},r=function(v,S){S=S||{};var C=S.separator||"_",k=S.split||/(?=[A-Z])/;return v.split(k).join(C)},i=function(v){return g(v)?v:(v=v.replace(/[\-_\s]+(.)?/g,function(S,C){return C?C.toUpperCase():""}),v.substr(0,1).toLowerCase()+v.substr(1))},o=function(v){var S=i(v);return S.substr(0,1).toUpperCase()+S.substr(1)},a=function(v,S){return r(v,S).toLowerCase()},s=Object.prototype.toString,l=function(v){return typeof v=="function"},u=function(v){return v===Object(v)},c=function(v){return s.call(v)=="[object Array]"},f=function(v){return s.call(v)=="[object Date]"},h=function(v){return s.call(v)=="[object RegExp]"},d=function(v){return s.call(v)=="[object Boolean]"},g=function(v){return v=v-0,v===v},y=function(v,S){var C=S&&"process"in S?S.process:S;return typeof C!="function"?v:function(k,x){return C(k,v,x)}},_={camelize:i,decamelize:a,pascalize:o,depascalize:a,camelizeKeys:function(v,S){return n(y(i,S),v)},decamelizeKeys:function(v,S){return n(y(a,S),v,S)},pascalizeKeys:function(v,S){return n(y(o,S),v)},depascalizeKeys:function(){return this.decamelizeKeys.apply(this,arguments)}};t.exports?t.exports=_:e.humps=_})(awe)})(sJ);var swe=sJ.exports,lwe=["class","style"];function uwe(t){return t.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,n){var r=n.indexOf(":"),i=swe.camelize(n.slice(0,r)),o=n.slice(r+1).trim();return e[i]=o,e},{})}function cwe(t){return t.split(/\s+/).reduce(function(e,n){return e[n]=!0,e},{})}function lJ(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var r=(t.children||[]).map(function(l){return lJ(l)}),i=Object.keys(t.attributes||{}).reduce(function(l,u){var c=t.attributes[u];switch(u){case"class":l.class=cwe(c);break;case"style":l.style=uwe(c);break;default:l.attrs[u]=c}return l},{attrs:{},class:{},style:{}});n.class;var o=n.style,a=o===void 0?{}:o,s=owe(n,lwe);return Xh(t.tag,sf(sf(sf({},e),{},{class:i.class,style:sf(sf({},i.style),a)},i.attrs),s),r)}var uJ=!1;try{uJ=!0}catch{}function fwe(){if(!uJ&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function OO(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?Wa({},t,e):{}}function hwe(t){var e,n=(e={"fa-spin":t.spin,"fa-pulse":t.pulse,"fa-fw":t.fixedWidth,"fa-border":t.border,"fa-li":t.listItem,"fa-inverse":t.inverse,"fa-flip":t.flip===!0,"fa-flip-horizontal":t.flip==="horizontal"||t.flip==="both","fa-flip-vertical":t.flip==="vertical"||t.flip==="both"},Wa(e,"fa-".concat(t.size),t.size!==null),Wa(e,"fa-rotate-".concat(t.rotation),t.rotation!==null),Wa(e,"fa-pull-".concat(t.pull),t.pull!==null),Wa(e,"fa-swap-opacity",t.swapOpacity),Wa(e,"fa-bounce",t.bounce),Wa(e,"fa-shake",t.shake),Wa(e,"fa-beat",t.beat),Wa(e,"fa-fade",t.fade),Wa(e,"fa-beat-fade",t.beatFade),Wa(e,"fa-flash",t.flash),Wa(e,"fa-spin-pulse",t.spinPulse),Wa(e,"fa-spin-reverse",t.spinReverse),e);return Object.keys(n).map(function(r){return n[r]?r:null}).filter(function(r){return r})}function hV(t){if(t&&Q2(t)==="object"&&t.prefix&&t.iconName&&t.icon)return t;if($4.icon)return $4.icon(t);if(t===null)return null;if(Q2(t)==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}var dwe=zt({name:"FontAwesomeIcon",props:{border:{type:Boolean,default:!1},fixedWidth:{type:Boolean,default:!1},flip:{type:[Boolean,String],default:!1,validator:function(e){return[!0,!1,"horizontal","vertical","both"].indexOf(e)>-1}},icon:{type:[Object,Array,String],required:!0},mask:{type:[Object,Array,String],default:null},listItem:{type:Boolean,default:!1},pull:{type:String,default:null,validator:function(e){return["right","left"].indexOf(e)>-1}},pulse:{type:Boolean,default:!1},rotation:{type:[String,Number],default:null,validator:function(e){return[90,180,270].indexOf(Number.parseInt(e,10))>-1}},swapOpacity:{type:Boolean,default:!1},size:{type:String,default:null,validator:function(e){return["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"].indexOf(e)>-1}},spin:{type:Boolean,default:!1},transform:{type:[String,Object],default:null},symbol:{type:[Boolean,String],default:!1},title:{type:String,default:null},inverse:{type:Boolean,default:!1},bounce:{type:Boolean,default:!1},shake:{type:Boolean,default:!1},beat:{type:Boolean,default:!1},fade:{type:Boolean,default:!1},beatFade:{type:Boolean,default:!1},flash:{type:Boolean,default:!1},spinPulse:{type:Boolean,default:!1},spinReverse:{type:Boolean,default:!1}},setup:function(e,n){var r=n.attrs,i=Ln(function(){return hV(e.icon)}),o=Ln(function(){return OO("classes",hwe(e))}),a=Ln(function(){return OO("transform",typeof e.transform=="string"?$4.transform(e.transform):e.transform)}),s=Ln(function(){return OO("mask",hV(e.mask))}),l=Ln(function(){return jbe(i.value,sf(sf(sf(sf({},o.value),a.value),s.value),{},{symbol:e.symbol,title:e.title}))});wi(l,function(c){if(!c)return fwe("Could not find one or more icon(s)",i.value,s.value)},{immediate:!0});var u=Ln(function(){return l.value?lJ(l.value.abstract[0],{},r):null});return function(){return u.value}}});class rr{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,r){let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(n,this.length,i,1),Ju.from(i,this.length-(n-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){let r=[];return this.decompose(e,n,r,0),Ju.from(r,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new Kb(this),o=new Kb(e);for(let a=n,s=n;;){if(i.next(a),o.next(a),a=0,i.lineBreak!=o.lineBreak||i.done!=o.done||i.value!=o.value)return!1;if(s+=i.value.length,i.done||s>=r)return!0}}iter(e=1){return new Kb(this,e)}iterRange(e,n=this.length){return new cJ(this,e,n)}iterLines(e,n){let r;if(e==null)r=this.iter();else{n==null&&(n=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new fJ(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?rr.empty:e.length<=32?new Li(e):Ju.from(Li.split(e,[]))}}class Li extends rr{constructor(e,n=pwe(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,r,i){for(let o=0;;o++){let a=this.text[o],s=i+a.length;if((n?r:s)>=e)return new gwe(i,s,r,a);i=s+1,r++}}decompose(e,n,r,i){let o=e<=0&&n>=this.length?this:new Li(dV(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(i&1){let a=r.pop(),s=JC(o.text,a.text.slice(),0,o.length);if(s.length<=32)r.push(new Li(s,a.length+o.length));else{let l=s.length>>1;r.push(new Li(s.slice(0,l)),new Li(s.slice(l)))}}else r.push(o)}replace(e,n,r){if(!(r instanceof Li))return super.replace(e,n,r);let i=JC(this.text,JC(r.text,dV(this.text,0,e)),n),o=this.length+r.length-(n-e);return i.length<=32?new Li(i,o):Ju.from(Li.split(i,[]),o)}sliceString(e,n=this.length,r=`
`){let i="";for(let o=0,a=0;o<=n&&a<this.text.length;a++){let s=this.text[a],l=o+s.length;o>e&&a&&(i+=r),e<l&&n>o&&(i+=s.slice(Math.max(0,e-o),n-o)),o=l+1}return i}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let r=[],i=-1;for(let o of e)r.push(o),i+=o.length+1,r.length==32&&(n.push(new Li(r,i)),r=[],i=-1);return i>-1&&n.push(new Li(r,i)),n}}class Ju extends rr{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,n,r,i){for(let o=0;;o++){let a=this.children[o],s=i+a.length,l=r+a.lines-1;if((n?l:s)>=e)return a.lineInner(e,n,r,i);i=s+1,r=l+1}}decompose(e,n,r,i){for(let o=0,a=0;a<=n&&o<this.children.length;o++){let s=this.children[o],l=a+s.length;if(e<=l&&n>=a){let u=i&((a<=e?1:0)|(l>=n?2:0));a>=e&&l<=n&&!u?r.push(s):s.decompose(e-a,n-a,r,u)}a=l+1}}replace(e,n,r){if(r.lines<this.lines)for(let i=0,o=0;i<this.children.length;i++){let a=this.children[i],s=o+a.length;if(e>=o&&n<=s){let l=a.replace(e-o,n-o,r),u=this.lines-a.lines+l.lines;if(l.lines<u>>5-1&&l.lines>u>>5+1){let c=this.children.slice();return c[i]=l,new Ju(c,this.length-(n-e)+r.length)}return super.replace(o,s,l)}o=s+1}return super.replace(e,n,r)}sliceString(e,n=this.length,r=`
`){let i="";for(let o=0,a=0;o<this.children.length&&a<=n;o++){let s=this.children[o],l=a+s.length;a>e&&o&&(i+=r),e<l&&n>a&&(i+=s.sliceString(e-a,n-a,r)),a=l+1}return i}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof Ju))return 0;let r=0,[i,o,a,s]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=n,o+=n){if(i==a||o==s)return r;let l=this.children[i],u=e.children[o];if(l!=u)return r+l.scanIdentical(u,n);r+=l.length+1}}static from(e,n=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let d of e)r+=d.lines;if(r<32){let d=[];for(let g of e)g.flatten(d);return new Li(d,n)}let i=Math.max(32,r>>5),o=i<<1,a=i>>1,s=[],l=0,u=-1,c=[];function f(d){let g;if(d.lines>o&&d instanceof Ju)for(let y of d.children)f(y);else d.lines>a&&(l>a||!l)?(h(),s.push(d)):d instanceof Li&&l&&(g=c[c.length-1])instanceof Li&&d.lines+g.lines<=32?(l+=d.lines,u+=d.length+1,c[c.length-1]=new Li(g.text.concat(d.text),g.length+1+d.length)):(l+d.lines>i&&h(),l+=d.lines,u+=d.length+1,c.push(d))}function h(){l!=0&&(s.push(c.length==1?c[0]:Ju.from(c,u)),u=-1,l=c.length=0)}for(let d of e)f(d);return h(),s.length==1?s[0]:new Ju(s,n)}}rr.empty=new Li([""],0);function pwe(t){let e=-1;for(let n of t)e+=n.length+1;return e}function JC(t,e,n=0,r=1e9){for(let i=0,o=0,a=!0;o<t.length&&i<=r;o++){let s=t[o],l=i+s.length;l>=n&&(l>r&&(s=s.slice(0,r-i)),i<n&&(s=s.slice(n-i)),a?(e[e.length-1]+=s,a=!1):e.push(s)),i=l+1}return e}function dV(t,e,n){return JC(t,[""],e,n)}class Kb{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof Li?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],o=this.offsets[r],a=o>>1,s=i instanceof Li?i.text.length:i.children.length;if(a==(n>0?s:0)){if(r==0)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(n>0?0:1)){if(this.offsets[r]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof Li){let l=i.text[a+(n<0?-1:0)];if(this.offsets[r]+=n,l.length>Math.max(0,e))return this.value=e==0?l:n>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=i.children[a+(n<0?-1:0)];e>l.length?(e-=l.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(l),this.offsets.push(n>0?1:(l instanceof Li?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class cJ{constructor(e,n,r){this.value="",this.done=!1,this.cursor=new Kb(e,n>r?-1:1),this.pos=n>r?e.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*n,this.value=i.length<=r?i:n<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class fJ{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:r,value:i}=this.inner.next(e);return n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(rr.prototype[Symbol.iterator]=function(){return this.iter()},Kb.prototype[Symbol.iterator]=cJ.prototype[Symbol.iterator]=fJ.prototype[Symbol.iterator]=function(){return this});let gwe=class{constructor(e,n,r,i){this.from=e,this.to=n,this.number=r,this.text=i}get length(){return this.to-this.from}},Tv="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(t=>t?parseInt(t,36):1);for(let t=1;t<Tv.length;t++)Tv[t]+=Tv[t-1];function mwe(t){for(let e=1;e<Tv.length;e+=2)if(Tv[e]>t)return Tv[e-1]<=t;return!1}function pV(t){return t>=127462&&t<=127487}const gV=8205;function Yo(t,e,n=!0,r=!0){return(n?hJ:vwe)(t,e,r)}function hJ(t,e,n){if(e==t.length)return e;e&&dJ(t.charCodeAt(e))&&pJ(t.charCodeAt(e-1))&&e--;let r=wo(t,e);for(e+=Sl(r);e<t.length;){let i=wo(t,e);if(r==gV||i==gV||n&&mwe(i))e+=Sl(i),r=i;else if(pV(i)){let o=0,a=e-2;for(;a>=0&&pV(wo(t,a));)o++,a-=2;if(o%2==0)break;e+=2}else break}return e}function vwe(t,e,n){for(;e>0;){let r=hJ(t,e-2,n);if(r<e)return r;e--}return 0}function dJ(t){return t>=56320&&t<57344}function pJ(t){return t>=55296&&t<56320}function wo(t,e){let n=t.charCodeAt(e);if(!pJ(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return dJ(r)?(n-55296<<10)+(r-56320)+65536:n}function fN(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function Sl(t){return t<65536?1:2}const Q4=/\r\n?|\n/;var ko=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(ko||(ko={}));class cc{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];e+=r<0?this.sections[n]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,r=0,i=0;n<this.sections.length;){let o=this.sections[n++],a=this.sections[n++];a<0?(e(r,i,o),i+=o):i+=a,r+=o}}iterChangedRanges(e,n=!1){e$(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];i<0?e.push(r,i):e.push(i,r)}return new cc(e)}composeDesc(e){return this.empty?e:e.empty?this:gJ(this,e)}mapDesc(e,n=!1){return e.empty?this:t$(this,e,n)}mapPos(e,n=-1,r=ko.Simple){let i=0,o=0;for(let a=0;a<this.sections.length;){let s=this.sections[a++],l=this.sections[a++],u=i+s;if(l<0){if(u>e)return o+(e-i);o+=s}else{if(r!=ko.Simple&&u>=e&&(r==ko.TrackDel&&i<e&&u>e||r==ko.TrackBefore&&i<e||r==ko.TrackAfter&&u>e))return null;if(u>e||u==e&&n<0&&!s)return e==i||n<0?o:o+l;o+=l}i=u}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return o}touchesRange(e,n=e){for(let r=0,i=0;r<this.sections.length&&i<=n;){let o=this.sections[r++],a=this.sections[r++],s=i+o;if(a>=0&&i<=n&&s>=e)return i<e&&s>n?"cover":!0;i=s}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new cc(e)}static create(e){return new cc(e)}}class Xi extends cc{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return e$(this,(n,r,i,o,a)=>e=e.replace(i,i+(r-n),a),!1),e}mapDesc(e,n=!1){return t$(this,e,n,!0)}invert(e){let n=this.sections.slice(),r=[];for(let i=0,o=0;i<n.length;i+=2){let a=n[i],s=n[i+1];if(s>=0){n[i]=s,n[i+1]=a;let l=i>>1;for(;r.length<l;)r.push(rr.empty);r.push(a?e.slice(o,o+a):rr.empty)}o+=a}return new Xi(n,r)}compose(e){return this.empty?e:e.empty?this:gJ(this,e,!0)}map(e,n=!1){return e.empty?this:t$(this,e,n,!0)}iterChanges(e,n=!1){e$(this,e,n)}get desc(){return cc.create(this.sections)}filter(e){let n=[],r=[],i=[],o=new N1(this);e:for(let a=0,s=0;;){let l=a==e.length?1e9:e[a++];for(;s<l||s==l&&o.len==0;){if(o.done)break e;let c=Math.min(o.len,l-s);Ho(i,c,-1);let f=o.ins==-1?-1:o.off==0?o.ins:0;Ho(n,c,f),f>0&&Sh(r,n,o.text),o.forward(c),s+=c}let u=e[a++];for(;s<u;){if(o.done)break e;let c=Math.min(o.len,u-s);Ho(n,c,-1),Ho(i,c,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(c),s+=c}}return{changes:new Xi(n,r),filtered:cc.create(i)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],i=this.sections[n+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,r){let i=[],o=[],a=0,s=null;function l(c=!1){if(!c&&!i.length)return;a<n&&Ho(i,n-a,-1);let f=new Xi(i,o);s=s?s.compose(f.map(s)):f,i=[],o=[],a=0}function u(c){if(Array.isArray(c))for(let f of c)u(f);else if(c instanceof Xi){if(c.length!=n)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${n})`);l(),s=s?s.compose(c.map(s)):c}else{let{from:f,to:h=f,insert:d}=c;if(f>h||f<0||h>n)throw new RangeError(`Invalid change range ${f} to ${h} (in doc of length ${n})`);let g=d?typeof d=="string"?rr.of(d.split(r||Q4)):d:rr.empty,y=g.length;if(f==h&&y==0)return;f<a&&l(),f>a&&Ho(i,f-a,-1),Ho(i,h-f,y),Sh(o,i,g),a=h}}return u(e),l(!s),s}static empty(e){return new Xi(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let i=0;i<e.length;i++){let o=e[i];if(typeof o=="number")n.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((a,s)=>s&&typeof a!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)n.push(o[0],0);else{for(;r.length<i;)r.push(rr.empty);r[i]=rr.of(o.slice(1)),n.push(o[0],r[i].length)}}}return new Xi(n,r)}static createSet(e,n){return new Xi(e,n)}}function Ho(t,e,n,r=!1){if(e==0&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:e==0&&t[i]==0?t[i+1]+=n:r?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function Sh(t,e,n){if(n.length==0)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<r;)t.push(rr.empty);t.push(n)}}function e$(t,e,n){let r=t.inserted;for(let i=0,o=0,a=0;a<t.sections.length;){let s=t.sections[a++],l=t.sections[a++];if(l<0)i+=s,o+=s;else{let u=i,c=o,f=rr.empty;for(;u+=s,c+=l,l&&r&&(f=f.append(r[a-2>>1])),!(n||a==t.sections.length||t.sections[a+1]<0);)s=t.sections[a++],l=t.sections[a++];e(i,u,o,c,f),i=u,o=c}}}function t$(t,e,n,r=!1){let i=[],o=r?[]:null,a=new N1(t),s=new N1(e);for(let l=-1;;)if(a.ins==-1&&s.ins==-1){let u=Math.min(a.len,s.len);Ho(i,u,-1),a.forward(u),s.forward(u)}else if(s.ins>=0&&(a.ins<0||l==a.i||a.off==0&&(s.len<a.len||s.len==a.len&&!n))){let u=s.len;for(Ho(i,s.ins,-1);u;){let c=Math.min(a.len,u);a.ins>=0&&l<a.i&&a.len<=c&&(Ho(i,0,a.ins),o&&Sh(o,i,a.text),l=a.i),a.forward(c),u-=c}s.next()}else if(a.ins>=0){let u=0,c=a.len;for(;c;)if(s.ins==-1){let f=Math.min(c,s.len);u+=f,c-=f,s.forward(f)}else if(s.ins==0&&s.len<c)c-=s.len,s.next();else break;Ho(i,u,l<a.i?a.ins:0),o&&l<a.i&&Sh(o,i,a.text),l=a.i,a.forward(a.len-c)}else{if(a.done&&s.done)return o?Xi.createSet(i,o):cc.create(i);throw new Error("Mismatched change set lengths")}}function gJ(t,e,n=!1){let r=[],i=n?[]:null,o=new N1(t),a=new N1(e);for(let s=!1;;){if(o.done&&a.done)return i?Xi.createSet(r,i):cc.create(r);if(o.ins==0)Ho(r,o.len,0,s),o.next();else if(a.len==0&&!a.done)Ho(r,0,a.ins,s),i&&Sh(i,r,a.text),a.next();else{if(o.done||a.done)throw new Error("Mismatched change set lengths");{let l=Math.min(o.len2,a.len),u=r.length;if(o.ins==-1){let c=a.ins==-1?-1:a.off?0:a.ins;Ho(r,l,c,s),i&&c&&Sh(i,r,a.text)}else a.ins==-1?(Ho(r,o.off?0:o.len,l,s),i&&Sh(i,r,o.textBit(l))):(Ho(r,o.off?0:o.len,a.off?0:a.ins,s),i&&!a.off&&Sh(i,r,a.text));s=(o.ins>l||a.ins>=0&&a.len>l)&&(s||r.length>u),o.forward2(l),a.forward(l)}}}}class N1{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?rr.empty:e[n]}textBit(e){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!e?rr.empty:n[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class jp{constructor(e,n,r){this.from=e,this.to=n,this.flags=r}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,n=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,n):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new jp(r,i,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return Ze.range(e,n);let r=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return Ze.range(this.anchor,r)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return Ze.range(e.anchor,e.head)}static create(e,n,r){return new jp(e,n,r)}}class Ze{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:Ze.create(this.ranges.map(r=>r.map(e,n)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new Ze([this.main],0)}addRange(e,n=!0){return Ze.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let r=this.ranges.slice();return r[n]=e,Ze.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Ze(e.ranges.map(n=>jp.fromJSON(n)),e.main)}static single(e,n=e){return new Ze([Ze.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let o=e[i];if(o.empty?o.from<=r:o.from<r)return Ze.normalized(e.slice(),n);r=o.to}return new Ze(e,n)}static cursor(e,n=0,r,i){return jp.create(e,e,(n==0?0:n<0?4:8)|(r==null?3:Math.min(2,r))|(i??33554431)<<5)}static range(e,n,r,i){let o=(r??33554431)<<5|(i==null?3:Math.min(2,i));return n<e?jp.create(n,e,24|o):jp.create(e,n,(n>e?4:0)|o)}static normalized(e,n=0){let r=e[n];e.sort((i,o)=>i.from-o.from),n=e.indexOf(r);for(let i=1;i<e.length;i++){let o=e[i],a=e[i-1];if(o.empty?o.from<=a.to:o.from<a.to){let s=a.from,l=Math.max(o.to,a.to);i<=n&&n--,e.splice(--i,2,o.anchor>o.head?Ze.range(l,s):Ze.range(s,l))}}return new Ze(e,n)}}function mJ(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let hN=0;class St{constructor(e,n,r,i,o){this.combine=e,this.compareInput=n,this.compare=r,this.isStatic=i,this.id=hN++,this.default=e([]),this.extensions=typeof o=="function"?o(this):o}static define(e={}){return new St(e.combine||(n=>n),e.compareInput||((n,r)=>n===r),e.compare||(e.combine?(n,r)=>n===r:dN),!!e.static,e.enables)}of(e){return new ZC([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new ZC(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new ZC(e,this,2,n)}from(e,n){return n||(n=r=>r),this.compute([e],r=>n(r.field(e)))}}function dN(t,e){return t==e||t.length==e.length&&t.every((n,r)=>n===e[r])}class ZC{constructor(e,n,r,i){this.dependencies=e,this.facet=n,this.type=r,this.value=i,this.id=hN++}dynamicSlot(e){var n;let r=this.value,i=this.facet.compareInput,o=this.id,a=e[o]>>1,s=this.type==2,l=!1,u=!1,c=[];for(let f of this.dependencies)f=="doc"?l=!0:f=="selection"?u=!0:((n=e[f.id])!==null&&n!==void 0?n:1)&1||c.push(e[f.id]);return{create(f){return f.values[a]=r(f),1},update(f,h){if(l&&h.docChanged||u&&(h.docChanged||h.selection)||n$(f,c)){let d=r(f);if(s?!mV(d,f.values[a],i):!i(d,f.values[a]))return f.values[a]=d,1}return 0},reconfigure:(f,h)=>{let d,g=h.config.address[o];if(g!=null){let y=tk(h,g);if(this.dependencies.every(_=>_ instanceof St?h.facet(_)===f.facet(_):_ instanceof Ui?h.field(_,!1)==f.field(_,!1):!0)||(s?mV(d=r(f),y,i):i(d=r(f),y)))return f.values[a]=y,0}else d=r(f);return f.values[a]=d,1}}}}function mV(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function n$(t,e){let n=!1;for(let r of e)Xb(t,r)&1&&(n=!0);return n}function ywe(t,e,n){let r=n.map(l=>t[l.id]),i=n.map(l=>l.type),o=r.filter(l=>!(l&1)),a=t[e.id]>>1;function s(l){let u=[];for(let c=0;c<r.length;c++){let f=tk(l,r[c]);if(i[c]==2)for(let h of f)u.push(h);else u.push(f)}return e.combine(u)}return{create(l){for(let u of r)Xb(l,u);return l.values[a]=s(l),1},update(l,u){if(!n$(l,o))return 0;let c=s(l);return e.compare(c,l.values[a])?0:(l.values[a]=c,1)},reconfigure(l,u){let c=n$(l,r),f=u.config.facets[e.id],h=u.facet(e);if(f&&!c&&dN(n,f))return l.values[a]=h,0;let d=s(l);return e.compare(d,h)?(l.values[a]=h,0):(l.values[a]=d,1)}}}const vV=St.define({static:!0});class Ui{constructor(e,n,r,i,o){this.id=e,this.createF=n,this.updateF=r,this.compareF=i,this.spec=o,this.provides=void 0}static define(e){let n=new Ui(hN++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(vV).find(r=>r.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:r=>(r.values[n]=this.create(r),1),update:(r,i)=>{let o=r.values[n],a=this.updateF(o,i);return this.compareF(o,a)?0:(r.values[n]=a,1)},reconfigure:(r,i)=>i.config.address[this.id]!=null?(r.values[n]=i.field(this),0):(r.values[n]=this.create(r),1)}}init(e){return[this,vV.of({field:this,create:e})]}get extension(){return this}}const Ep={lowest:4,low:3,default:2,high:1,highest:0};function Ly(t){return e=>new vJ(e,t)}const zg={highest:Ly(Ep.highest),high:Ly(Ep.high),default:Ly(Ep.default),low:Ly(Ep.low),lowest:Ly(Ep.lowest)};class vJ{constructor(e,n){this.inner=e,this.prec=n}}class X_{of(e){return new r$(this,e)}reconfigure(e){return X_.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class r${constructor(e,n){this.compartment=e,this.inner=n}}class ek{constructor(e,n,r,i,o,a){for(this.base=e,this.compartments=n,this.dynamicSlots=r,this.address=i,this.staticValues=o,this.facets=a,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,r){let i=[],o=Object.create(null),a=new Map;for(let h of bwe(e,n,a))h instanceof Ui?i.push(h):(o[h.facet.id]||(o[h.facet.id]=[])).push(h);let s=Object.create(null),l=[],u=[];for(let h of i)s[h.id]=u.length<<1,u.push(d=>h.slot(d));let c=r==null?void 0:r.config.facets;for(let h in o){let d=o[h],g=d[0].facet,y=c&&c[h]||[];if(d.every(_=>_.type==0))if(s[g.id]=l.length<<1|1,dN(y,d))l.push(r.facet(g));else{let _=g.combine(d.map(v=>v.value));l.push(r&&g.compare(_,r.facet(g))?r.facet(g):_)}else{for(let _ of d)_.type==0?(s[_.id]=l.length<<1|1,l.push(_.value)):(s[_.id]=u.length<<1,u.push(v=>_.dynamicSlot(v)));s[g.id]=u.length<<1,u.push(_=>ywe(_,g,d))}}let f=u.map(h=>h(s));return new ek(e,a,f,s,l,o)}}function bwe(t,e,n){let r=[[],[],[],[],[]],i=new Map;function o(a,s){let l=i.get(a);if(l!=null){if(l<=s)return;let u=r[l].indexOf(a);u>-1&&r[l].splice(u,1),a instanceof r$&&n.delete(a.compartment)}if(i.set(a,s),Array.isArray(a))for(let u of a)o(u,s);else if(a instanceof r$){if(n.has(a.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(a.compartment)||a.inner;n.set(a.compartment,u),o(u,s)}else if(a instanceof vJ)o(a.inner,a.prec);else if(a instanceof Ui)r[s].push(a),a.provides&&o(a.provides,s);else if(a instanceof ZC)r[s].push(a),a.facet.extensions&&o(a.facet.extensions,Ep.default);else{let u=a.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${a}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(u,s)}}return o(t,Ep.default),r.reduce((a,s)=>a.concat(s))}function Xb(t,e){if(e&1)return 2;let n=e>>1,r=t.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;t.status[n]=4;let i=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|i}function tk(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const yJ=St.define(),bJ=St.define({combine:t=>t.some(e=>e),static:!0}),_J=St.define({combine:t=>t.length?t[0]:void 0,static:!0}),SJ=St.define(),wJ=St.define(),xJ=St.define(),CJ=St.define({combine:t=>t.length?t[0]:!1});class If{constructor(e,n){this.type=e,this.value=n}static define(){return new _we}}class _we{of(e){return new If(this,e)}}class Swe{constructor(e){this.map=e}of(e){return new un(this,e)}}class un{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new un(this.type,n)}is(e){return this.type==e}static define(e={}){return new Swe(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let r=[];for(let i of e){let o=i.map(n);o&&r.push(o)}return r}}un.reconfigure=un.define();un.appendConfig=un.define();class Ji{constructor(e,n,r,i,o,a){this.startState=e,this.changes=n,this.selection=r,this.effects=i,this.annotations=o,this.scrollIntoView=a,this._doc=null,this._state=null,r&&mJ(r,n.newLength),o.some(s=>s.type==Ji.time)||(this.annotations=o.concat(Ji.time.of(Date.now())))}static create(e,n,r,i,o,a){return new Ji(e,n,r,i,o,a)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(Ji.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}Ji.time=If.define();Ji.userEvent=If.define();Ji.addToHistory=If.define();Ji.remote=If.define();function wwe(t,e){let n=[];for(let r=0,i=0;;){let o,a;if(r<t.length&&(i==e.length||e[i]>=t[r]))o=t[r++],a=t[r++];else if(i<e.length)o=e[i++],a=e[i++];else return n;!n.length||n[n.length-1]<o?n.push(o,a):n[n.length-1]<a&&(n[n.length-1]=a)}}function kJ(t,e,n){var r;let i,o,a;return n?(i=e.changes,o=Xi.empty(e.changes.length),a=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),o=t.changes.mapDesc(e.changes,!0),a=t.changes.compose(i)),{changes:a,selection:e.selection?e.selection.map(o):(r=t.selection)===null||r===void 0?void 0:r.map(i),effects:un.mapEffects(t.effects,i).concat(un.mapEffects(e.effects,o)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function i$(t,e,n){let r=e.selection,i=Av(e.annotations);return e.userEvent&&(i=i.concat(Ji.userEvent.of(e.userEvent))),{changes:e.changes instanceof Xi?e.changes:Xi.of(e.changes||[],n,t.facet(_J)),selection:r&&(r instanceof Ze?r:Ze.single(r.anchor,r.head)),effects:Av(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function TJ(t,e,n){let r=i$(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let o=1;o<e.length;o++){e[o].filter===!1&&(n=!1);let a=!!e[o].sequential;r=kJ(r,i$(t,e[o],a?r.changes.newLength:t.doc.length),a)}let i=Ji.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return Cwe(n?xwe(i):i)}function xwe(t){let e=t.startState,n=!0;for(let i of e.facet(SJ)){let o=i(t);if(o===!1){n=!1;break}Array.isArray(o)&&(n=n===!0?o:wwe(n,o))}if(n!==!0){let i,o;if(n===!1)o=t.changes.invertedDesc,i=Xi.empty(e.doc.length);else{let a=t.changes.filter(n);i=a.changes,o=a.filtered.mapDesc(a.changes).invertedDesc}t=Ji.create(e,i,t.selection&&t.selection.map(o),un.mapEffects(t.effects,o),t.annotations,t.scrollIntoView)}let r=e.facet(wJ);for(let i=r.length-1;i>=0;i--){let o=r[i](t);o instanceof Ji?t=o:Array.isArray(o)&&o.length==1&&o[0]instanceof Ji?t=o[0]:t=TJ(e,Av(o),!1)}return t}function Cwe(t){let e=t.startState,n=e.facet(xJ),r=t;for(let i=n.length-1;i>=0;i--){let o=n[i](t);o&&Object.keys(o).length&&(r=kJ(r,i$(e,o,t.changes.newLength),!0))}return r==t?t:Ji.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}const kwe=[];function Av(t){return t==null?kwe:Array.isArray(t)?t:[t]}var ii=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(ii||(ii={}));const Twe=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let o$;try{o$=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function Awe(t){if(o$)return o$.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||Twe.test(n)))return!0}return!1}function Ewe(t){return e=>{if(!/\S/.test(e))return ii.Space;if(Awe(e))return ii.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return ii.Word;return ii.Other}}class An{constructor(e,n,r,i,o,a){this.config=e,this.doc=n,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=o,a&&(a._state=this);for(let s=0;s<this.config.dynamicSlots.length;s++)Xb(this,s<<1);this.computeSlot=null}field(e,n=!0){let r=this.config.address[e.id];if(r==null){if(n)throw new RangeError("Field is not present in this state");return}return Xb(this,r),tk(this,r)}update(...e){return TJ(this,e,!0)}applyTransaction(e){let n=this.config,{base:r,compartments:i}=n;for(let a of e.effects)a.is(X_.reconfigure)?(n&&(i=new Map,n.compartments.forEach((s,l)=>i.set(l,s)),n=null),i.set(a.value.compartment,a.value.extension)):a.is(un.reconfigure)?(n=null,r=a.value):a.is(un.appendConfig)&&(n=null,r=Av(r).concat(a.value));let o;n?o=e.startState.values.slice():(n=ek.resolve(r,i,this),o=new An(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(s,l)=>l.reconfigure(s,this),null).values),new An(n,e.newDoc,e.newSelection,o,(a,s)=>s.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:Ze.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,r=e(n.ranges[0]),i=this.changes(r.changes),o=[r.range],a=Av(r.effects);for(let s=1;s<n.ranges.length;s++){let l=e(n.ranges[s]),u=this.changes(l.changes),c=u.map(i);for(let h=0;h<s;h++)o[h]=o[h].map(c);let f=i.mapDesc(u,!0);o.push(l.range.map(f)),i=i.compose(c),a=un.mapEffects(a,c).concat(un.mapEffects(Av(l.effects),f))}return{changes:i,selection:Ze.create(o,n.mainIndex),effects:a}}changes(e=[]){return e instanceof Xi?e:Xi.of(e,this.doc.length,this.facet(An.lineSeparator))}toText(e){return rr.of(e.split(this.facet(An.lineSeparator)||Q4))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(Xb(this,n),tk(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof Ui&&this.config.address[i.id]!=null&&(n[r]=i.spec.toJSON(this.field(e[r]),this))}return n}static fromJSON(e,n={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let o in r)if(Object.prototype.hasOwnProperty.call(e,o)){let a=r[o],s=e[o];i.push(a.init(l=>a.spec.fromJSON(s,l)))}}return An.create({doc:e.doc,selection:Ze.fromJSON(e.selection),extensions:n.extensions?i.concat([n.extensions]):i})}static create(e={}){let n=ek.resolve(e.extensions||[],new Map),r=e.doc instanceof rr?e.doc:rr.of((e.doc||"").split(n.staticFacet(An.lineSeparator)||Q4)),i=e.selection?e.selection instanceof Ze?e.selection:Ze.single(e.selection.anchor,e.selection.head):Ze.single(0);return mJ(i,r.length),n.staticFacet(bJ)||(i=i.asSingle()),new An(n,r,i,n.dynamicSlots.map(()=>null),(o,a)=>a.create(o),null)}get tabSize(){return this.facet(An.tabSize)}get lineBreak(){return this.facet(An.lineSeparator)||`
`}get readOnly(){return this.facet(CJ)}phrase(e,...n){for(let r of this.facet(An.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let o=+(i||1);return!o||o>n.length?r:n[o-1]})),e}languageDataAt(e,n,r=-1){let i=[];for(let o of this.facet(yJ))for(let a of o(this,n,r))Object.prototype.hasOwnProperty.call(a,e)&&i.push(a[e]);return i}charCategorizer(e){return Ewe(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:r,length:i}=this.doc.lineAt(e),o=this.charCategorizer(e),a=e-r,s=e-r;for(;a>0;){let l=Yo(n,a,!1);if(o(n.slice(l,a))!=ii.Word)break;a=l}for(;s<i;){let l=Yo(n,s);if(o(n.slice(s,l))!=ii.Word)break;s=l}return a==s?null:Ze.range(a+r,s+r)}}An.allowMultipleSelections=bJ;An.tabSize=St.define({combine:t=>t.length?t[0]:4});An.lineSeparator=_J;An.readOnly=CJ;An.phrases=St.define({compare(t,e){let n=Object.keys(t),r=Object.keys(e);return n.length==r.length&&n.every(i=>t[i]==e[i])}});An.languageData=yJ;An.changeFilter=SJ;An.transactionFilter=wJ;An.transactionExtender=xJ;X_.reconfigure=un.define();function _u(t,e,n={}){let r={};for(let i of t)for(let o of Object.keys(i)){let a=i[o],s=r[o];if(s===void 0)r[o]=a;else if(!(s===a||a===void 0))if(Object.hasOwnProperty.call(n,o))r[o]=n[o](s,a);else throw new Error("Config merge conflict for field "+o)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class _g{eq(e){return this==e}range(e,n=e){return a$.create(e,n,this)}}_g.prototype.startSide=_g.prototype.endSide=0;_g.prototype.point=!1;_g.prototype.mapMode=ko.TrackDel;let a$=class AJ{constructor(e,n,r){this.from=e,this.to=n,this.value=r}static create(e,n,r){return new AJ(e,n,r)}};function s$(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class pN{constructor(e,n,r,i){this.from=e,this.to=n,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,n,r,i=0){let o=r?this.to:this.from;for(let a=i,s=o.length;;){if(a==s)return a;let l=a+s>>1,u=o[l]-e||(r?this.value[l].endSide:this.value[l].startSide)-n;if(l==a)return u>=0?a:s;u>=0?s=l:a=l+1}}between(e,n,r,i){for(let o=this.findIndex(n,-1e9,!0),a=this.findIndex(r,1e9,!1,o);o<a;o++)if(i(this.from[o]+e,this.to[o]+e,this.value[o])===!1)return!1}map(e,n){let r=[],i=[],o=[],a=-1,s=-1;for(let l=0;l<this.value.length;l++){let u=this.value[l],c=this.from[l]+e,f=this.to[l]+e,h,d;if(c==f){let g=n.mapPos(c,u.startSide,u.mapMode);if(g==null||(h=d=g,u.startSide!=u.endSide&&(d=n.mapPos(c,u.endSide),d<h)))continue}else if(h=n.mapPos(c,u.startSide),d=n.mapPos(f,u.endSide),h>d||h==d&&u.startSide>0&&u.endSide<=0)continue;(d-h||u.endSide-u.startSide)<0||(a<0&&(a=h),u.point&&(s=Math.max(s,d-h)),r.push(u),i.push(h-a),o.push(d-a))}return{mapped:r.length?new pN(i,o,r,s):null,pos:a}}}class ar{constructor(e,n,r,i){this.chunkPos=e,this.chunk=n,this.nextLayer=r,this.maxPoint=i}static create(e,n,r,i){return new ar(e,n,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:r=!1,filterFrom:i=0,filterTo:o=this.length}=e,a=e.filter;if(n.length==0&&!a)return this;if(r&&(n=n.slice().sort(s$)),this.isEmpty)return n.length?ar.of(n):this;let s=new EJ(this,null,-1).goto(0),l=0,u=[],c=new Qh;for(;s.value||l<n.length;)if(l<n.length&&(s.from-n[l].from||s.startSide-n[l].value.startSide)>=0){let f=n[l++];c.addInner(f.from,f.to,f.value)||u.push(f)}else s.rangeIndex==1&&s.chunkIndex<this.chunk.length&&(l==n.length||this.chunkEnd(s.chunkIndex)<n[l].from)&&(!a||i>this.chunkEnd(s.chunkIndex)||o<this.chunkPos[s.chunkIndex])&&c.addChunk(this.chunkPos[s.chunkIndex],this.chunk[s.chunkIndex])?s.nextChunk():((!a||i>s.to||o<s.from||a(s.from,s.to,s.value))&&(c.addInner(s.from,s.to,s.value)||u.push(a$.create(s.from,s.to,s.value))),s.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?ar.empty:this.nextLayer.update({add:u,filter:a,filterFrom:i,filterTo:o}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],r=[],i=-1;for(let a=0;a<this.chunk.length;a++){let s=this.chunkPos[a],l=this.chunk[a],u=e.touchesRange(s,s+l.length);if(u===!1)i=Math.max(i,l.maxPoint),n.push(l),r.push(e.mapPos(s));else if(u===!0){let{mapped:c,pos:f}=l.map(s,e);c&&(i=Math.max(i,c.maxPoint),n.push(c),r.push(f))}}let o=this.nextLayer.map(e);return n.length==0?o:new ar(r,n,o||ar.empty,i)}between(e,n,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let o=this.chunkPos[i],a=this.chunk[i];if(n>=o&&e<=o+a.length&&a.between(o,e-o,n-o,r)===!1)return}this.nextLayer.between(e,n,r)}}iter(e=0){return F1.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return F1.from(e).goto(n)}static compare(e,n,r,i,o=-1){let a=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=o),s=n.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=o),l=yV(a,s,r),u=new Dy(a,l,o),c=new Dy(s,l,o);r.iterGaps((f,h,d)=>bV(u,f,c,h,d,i)),r.empty&&r.length==0&&bV(u,0,c,0,0,i)}static eq(e,n,r=0,i){i==null&&(i=1e9-1);let o=e.filter(c=>!c.isEmpty&&n.indexOf(c)<0),a=n.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(o.length!=a.length)return!1;if(!o.length)return!0;let s=yV(o,a),l=new Dy(o,s,0).goto(r),u=new Dy(a,s,0).goto(r);for(;;){if(l.to!=u.to||!l$(l.active,u.active)||l.point&&(!u.point||!l.point.eq(u.point)))return!1;if(l.to>i)return!0;l.next(),u.next()}}static spans(e,n,r,i,o=-1){let a=new Dy(e,null,o).goto(n),s=n,l=a.openStart;for(;;){let u=Math.min(a.to,r);if(a.point){let c=a.activeForPoint(a.to),f=a.pointFrom<n?c.length+1:Math.min(c.length,l);i.point(s,u,a.point,c,f,a.pointRank),l=Math.min(a.openEnd(u),c.length)}else u>s&&(i.span(s,u,a.active,l),l=a.openEnd(u));if(a.to>r)return l+(a.point&&a.to>r?1:0);s=a.to,a.next()}}static of(e,n=!1){let r=new Qh;for(let i of e instanceof a$?[e]:n?Pwe(e):e)r.add(i.from,i.to,i.value);return r.finish()}}ar.empty=new ar([],[],null,-1);function Pwe(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let r=t[n];if(s$(e,r)>0)return t.slice().sort(s$);e=r}return t}ar.empty.nextLayer=ar.empty;class Qh{finishChunk(e){this.chunks.push(new pN(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,r){this.addInner(e,n,r)||(this.nextLayer||(this.nextLayer=new Qh)).add(e,n,r)}addInner(e,n,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+e,this.lastTo=n.to[r]+e,!0}finish(){return this.finishInner(ar.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=ar.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function yV(t,e,n){let r=new Map;for(let o of t)for(let a=0;a<o.chunk.length;a++)o.chunk[a].maxPoint<=0&&r.set(o.chunk[a],o.chunkPos[a]);let i=new Set;for(let o of e)for(let a=0;a<o.chunk.length;a++){let s=r.get(o.chunk[a]);s!=null&&(n?n.mapPos(s):s)==o.chunkPos[a]&&!(n!=null&&n.touchesRange(s,s+o.chunk[a].length))&&i.add(o.chunk[a])}return i}class EJ{constructor(e,n,r,i=0){this.layer=e,this.skip=n,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=e+n.from[this.rangeIndex];if(this.from=r,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class F1{constructor(e){this.heap=e}static from(e,n=null,r=-1){let i=[];for(let o=0;o<e.length;o++)for(let a=e[o];!a.isEmpty;a=a.nextLayer)a.maxPoint>=r&&i.push(new EJ(a,n,r,o));return i.length==1?i[0]:new F1(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let r of this.heap)r.goto(e,n);for(let r=this.heap.length>>1;r>=0;r--)IO(this.heap,r);return this.next(),this}forward(e,n){for(let r of this.heap)r.forward(e,n);for(let r=this.heap.length>>1;r>=0;r--)IO(this.heap,r);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),IO(this.heap,0)}}}function IO(t,e){for(let n=t[e];;){let r=(e<<1)+1;if(r>=t.length)break;let i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0&&(i=t[r+1],r++),n.compare(i)<0)break;t[r]=n,t[e]=i,e=r}}class Dy{constructor(e,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=F1.from(e,n,r)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){ix(this.active,e),ix(this.activeTo,e),ix(this.activeRank,e),this.minActive=_V(this.active,this.activeTo)}addActive(e){let n=0,{value:r,to:i,rank:o}=this.cursor;for(;n<this.activeRank.length&&this.activeRank[n]<=o;)n++;ox(this.active,n,r),ox(this.activeTo,n,i),ox(this.activeRank,n,o),e&&ox(e,n,this.cursor.from),this.minActive=_V(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&ix(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(r),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(e){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)n++;return n}}function bV(t,e,n,r,i,o){t.goto(e),n.goto(r);let a=r+i,s=r,l=r-e;for(;;){let u=t.to+l-n.to||t.endSide-n.endSide,c=u<0?t.to+l:n.to,f=Math.min(c,a);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&l$(t.activeForPoint(t.to),n.activeForPoint(n.to))||o.comparePoint(s,f,t.point,n.point):f>s&&!l$(t.active,n.active)&&o.compareRange(s,f,t.active,n.active),c>a)break;s=c,u<=0&&t.next(),u>=0&&n.next()}}function l$(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function ix(t,e){for(let n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function ox(t,e,n){for(let r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=n}function _V(t,e){let n=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||t[i].endSide-t[n].endSide)<0&&(n=i,r=e[i]);return n}function J_(t,e,n=t.length){let r=0;for(let i=0;i<n;)t.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=Yo(t,i));return r}function u$(t,e,n,r){for(let i=0,o=0;;){if(o>=e)return i;if(i==t.length)break;o+=t.charCodeAt(i)==9?n-o%n:1,i=Yo(t,i)}return r===!0?-1:t.length}const c$="ͼ",SV=typeof Symbol>"u"?"__"+c$:Symbol.for(c$),f$=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),wV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class ed{constructor(e,n){this.rules=[];let{finish:r}=n||{};function i(a){return/^@/.test(a)?[a]:a.split(/,\s*/)}function o(a,s,l,u){let c=[],f=/^@(\w+)\b/.exec(a[0]),h=f&&f[1]=="keyframes";if(f&&s==null)return l.push(a[0]+";");for(let d in s){let g=s[d];if(/&/.test(d))o(d.split(/,\s*/).map(y=>a.map(_=>y.replace(/&/,_))).reduce((y,_)=>y.concat(_)),g,l);else if(g&&typeof g=="object"){if(!f)throw new RangeError("The value of a property ("+d+") should be a primitive value.");o(i(d),g,c,h)}else g!=null&&c.push(d.replace(/_.*/,"").replace(/[A-Z]/g,y=>"-"+y.toLowerCase())+": "+g+";")}(c.length||h)&&l.push((r&&!f&&!u?a.map(r):a).join(", ")+" {"+c.join(" ")+"}")}for(let a in e)o(i(a),e[a],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=wV[SV]||1;return wV[SV]=e+1,c$+e.toString(36)}static mount(e,n){(e[f$]||new Owe(e)).mount(Array.isArray(n)?n:[n])}}let xV=new Map;class Owe{constructor(e){let n=e.ownerDocument||e,r=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let i=xV.get(n);if(i)return e.adoptedStyleSheets=[i.sheet,...e.adoptedStyleSheets],e[f$]=i;this.sheet=new r.CSSStyleSheet,e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets],xV.set(n,this)}else{this.styleTag=n.createElement("style");let i=e.head||e;i.insertBefore(this.styleTag,i.firstChild)}this.modules=[],e[f$]=this}mount(e){let n=this.sheet,r=0,i=0;for(let o=0;o<e.length;o++){let a=e[o],s=this.modules.indexOf(a);if(s<i&&s>-1&&(this.modules.splice(s,1),i--,s=-1),s==-1){if(this.modules.splice(i++,0,a),n)for(let l=0;l<a.rules.length;l++)n.insertRule(a.rules[l],r++)}else{for(;i<s;)r+=this.modules[i++].rules.length;r+=a.rules.length,i++}}if(!n){let o="";for(let a=0;a<this.modules.length;a++)o+=this.modules[a].getRules()+`
`;this.styleTag.textContent=o}}}var td={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},R1={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},CV=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent),Iwe=typeof navigator<"u"&&/Mac/.test(navigator.platform),$we=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Lwe=Iwe||CV&&+CV[1]<57;for(var xo=0;xo<10;xo++)td[48+xo]=td[96+xo]=String(xo);for(var xo=1;xo<=24;xo++)td[xo+111]="F"+xo;for(var xo=65;xo<=90;xo++)td[xo]=String.fromCharCode(xo+32),R1[xo]=String.fromCharCode(xo);for(var $O in td)R1.hasOwnProperty($O)||(R1[$O]=td[$O]);function Dwe(t){var e=Lwe&&(t.ctrlKey||t.altKey||t.metaKey)||$we&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?R1:td)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function nk(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function h$(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function Mwe(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function QC(t,e){if(!e.anchorNode)return!1;try{return h$(t,e.anchorNode)}catch{return!1}}function t0(t){return t.nodeType==3?Sg(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function rk(t,e,n,r){return n?kV(t,e,n,r,-1)||kV(t,e,n,r,1):!1}function ik(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function kV(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:nd(t))){if(t.nodeName=="DIV")return!1;let o=t.parentNode;if(!o||o.nodeType!=1)return!1;e=ik(t)+(i<0?0:1),t=o}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?nd(t):0}else return!1}}function nd(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function bA(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function Nwe(t){return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function Fwe(t,e,n,r,i,o,a,s){let l=t.ownerDocument,u=l.defaultView||window;for(let c=t,f=!1;c&&!f;)if(c.nodeType==1){let h,d=c==l.body;if(d)h=Nwe(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(f=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let _=c.getBoundingClientRect();h={left:_.left,right:_.left+c.clientWidth,top:_.top,bottom:_.top+c.clientHeight}}let g=0,y=0;if(i=="nearest")e.top<h.top?(y=-(h.top-e.top+a),n>0&&e.bottom>h.bottom+y&&(y=e.bottom-h.bottom+y+a)):e.bottom>h.bottom&&(y=e.bottom-h.bottom+a,n<0&&e.top-y<h.top&&(y=-(h.top+y-e.top+a)));else{let _=e.bottom-e.top,v=h.bottom-h.top;y=(i=="center"&&_<=v?e.top+_/2-v/2:i=="start"||i=="center"&&n<0?e.top-a:e.bottom-v+a)-h.top}if(r=="nearest"?e.left<h.left?(g=-(h.left-e.left+o),n>0&&e.right>h.right+g&&(g=e.right-h.right+g+o)):e.right>h.right&&(g=e.right-h.right+o,n<0&&e.left<h.left+g&&(g=-(h.left+g-e.left+o))):g=(r=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:r=="start"==s?e.left-o:e.right-(h.right-h.left)+o)-h.left,g||y)if(d)u.scrollBy(g,y);else{let _=0,v=0;if(y){let S=c.scrollTop;c.scrollTop+=y,v=c.scrollTop-S}if(g){let S=c.scrollLeft;c.scrollLeft+=g,_=c.scrollLeft-S}e={left:e.left-_,top:e.top-v,right:e.right-_,bottom:e.bottom-v},_&&Math.abs(_-g)<1&&(r="nearest"),v&&Math.abs(v-y)<1&&(i="nearest")}if(d)break;c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function Rwe(t){let e=t.ownerDocument;for(let n=t.parentNode;n&&n!=e.body;)if(n.nodeType==1){if(n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)return n;n=n.assignedSlot||n.parentNode}else if(n.nodeType==11)n=n.host;else break;return null}class Vwe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:r}=e;this.set(n,Math.min(e.anchorOffset,n?nd(n):0),r,Math.min(e.focusOffset,r?nd(r):0))}set(e,n,r,i){this.anchorNode=e,this.anchorOffset=n,this.focusNode=r,this.focusOffset=i}}let _m=null;function PJ(t){if(t.setActive)return t.setActive();if(_m)return t.focus(_m);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(_m==null?{get preventScroll(){return _m={preventScroll:!0},!0}}:void 0),!_m){_m=!1;for(let n=0;n<e.length;){let r=e[n++],i=e[n++],o=e[n++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=o&&(r.scrollLeft=o)}}}let TV;function Sg(t,e,n=e){let r=TV||(TV=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function Ev(t,e,n){let r={key:e,code:e,keyCode:n,which:n,cancelable:!0},i=new KeyboardEvent("keydown",r);i.synthetic=!0,t.dispatchEvent(i);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,t.dispatchEvent(o),i.defaultPrevented||o.defaultPrevented}function Bwe(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function OJ(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function zwe(t,e){let n=e.focusNode,r=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=r)return!1;for(r=Math.min(r,nd(n));;)if(r){if(n.nodeType!=1)return!1;let i=n.childNodes[r-1];i.contentEditable=="false"?r--:(n=i,r=nd(n))}else{if(n==t)return!0;r=ik(n),n=n.parentNode}}function IJ(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}class xa{constructor(e,n,r=!0){this.node=e,this.offset=n,this.precise=r}static before(e,n){return new xa(e.parentNode,ik(e),n)}static after(e,n){return new xa(e.parentNode,ik(e)+1,n)}}const gN=[];class zr{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let r of this.children){if(r==e)return n;n+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let r=this.dom,i=null,o;for(let a of this.children){if(a.flags&7){if(!a.dom&&(o=i?i.nextSibling:r.firstChild)){let s=zr.get(o);(!s||!s.parent&&s.canReuseDOM(a))&&a.reuseDOM(o)}a.sync(e,n),a.flags&=-8}if(o=i?i.nextSibling:r.firstChild,n&&!n.written&&n.node==r&&o!=a.dom&&(n.written=!0),a.dom.parentNode==r)for(;o&&o!=a.dom;)o=AV(o);else r.insertBefore(a.dom,o);i=a.dom}for(o=i?i.nextSibling:r.firstChild,o&&n&&n.node==r&&(n.written=!0);o;)o=AV(o)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,n),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let r;if(e==this.dom)r=this.dom.childNodes[n];else{let i=nd(e)==0?0:n==0?-1:1;for(;;){let o=e.parentNode;if(o==this.dom)break;i==0&&o.firstChild!=o.lastChild&&(e==o.firstChild?i=-1:i=1),e=o}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!zr.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,o=0;;i++){let a=this.children[i];if(a.dom==r)return o;o+=a.length+a.breakAfter}}domBoundsAround(e,n,r=0){let i=-1,o=-1,a=-1,s=-1;for(let l=0,u=r,c=r;l<this.children.length;l++){let f=this.children[l],h=u+f.length;if(u<e&&h>n)return f.domBoundsAround(e,n,u);if(h>=e&&i==-1&&(i=l,o=u),u>n&&f.dom.parentNode==this.dom){a=l,s=c;break}c=h,u=h+f.breakAfter}return{from:o,to:s<0?r+this.length:s,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:a<this.children.length&&a>=0?this.children[a].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,r=gN){this.markDirty();for(let i=e;i<n;i++){let o=this.children[i];o.parent==this&&o.destroy()}this.children.splice(e,n-e,...r);for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new $J(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,r,i,o,a){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){this.parent=null}}zr.prototype.breakAfter=0;function AV(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class $J{constructor(e,n,r){this.children=e,this.pos=n,this.i=r,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function LJ(t,e,n,r,i,o,a,s,l){let{children:u}=t,c=u.length?u[e]:null,f=o.length?o[o.length-1]:null,h=f?f.breakAfter:a;if(!(e==r&&c&&!a&&!h&&o.length<2&&c.merge(n,i,o.length?f:null,n==0,s,l))){if(r<u.length){let d=u[r];d&&i<d.length?(e==r&&(d=d.split(i),i=0),!h&&f&&d.merge(0,i,f,!0,0,l)?o[o.length-1]=d:(i&&d.merge(0,i,null,!1,0,l),o.push(d))):d!=null&&d.breakAfter&&(f?f.breakAfter=1:a=1),r++}for(c&&(c.breakAfter=a,n>0&&(!a&&o.length&&c.merge(n,c.length,o[0],!1,s,0)?c.breakAfter=o.shift().breakAfter:(n<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(n,c.length,null,!1,s,0),e++));e<r&&o.length;)if(u[r-1].become(o[o.length-1]))r--,o.pop(),l=o.length?0:s;else if(u[e].become(o[0]))e++,o.shift(),s=o.length?0:l;else break;!o.length&&e&&r<u.length&&!u[e-1].breakAfter&&u[r].merge(0,0,u[e-1],!1,s,l)&&e--,(e<r||o.length)&&t.replaceChildren(e,r,o)}}function DJ(t,e,n,r,i,o){let a=t.childCursor(),{i:s,off:l}=a.findPos(n,1),{i:u,off:c}=a.findPos(e,-1),f=e-n;for(let h of r)f+=h.length;t.length+=f,LJ(t,u,c,s,l,r,0,i,o)}const ov="￿";class MJ{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(An.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=ov}readRange(e,n){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let o=this.text.length;this.readNode(i);let a=i.nextSibling;if(a==n)break;let s=zr.get(i),l=zr.get(a);(s&&l?s.breakAfter:(s?s.breakAfter:EV(i))||EV(a)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>o)&&this.lineBreak(),i=a}return this.findPointBefore(r,n),this}readTextNode(e){let n=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,a=1,s;if(this.lineSeparator?(o=n.indexOf(this.lineSeparator,r),a=this.lineSeparator.length):(s=i.exec(n))&&(o=s.index,a=s[0].length),this.append(n.slice(r,o<0?n.length:o)),o<0)break;if(this.lineBreak(),a>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=a-1);r=o+a}}readNode(e){if(e.cmIgnore)return;let n=zr.get(e),r=n&&n.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(e,n){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+Math.min(n,r.offset))}}function EV(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}class PV{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}let Ds=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},d$=typeof document<"u"?document:{documentElement:{style:{}}};const p$=/Edge\/(\d+)/.exec(Ds.userAgent),NJ=/MSIE \d/.test(Ds.userAgent),g$=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ds.userAgent),_A=!!(NJ||g$||p$),OV=!_A&&/gecko\/(\d+)/i.test(Ds.userAgent),LO=!_A&&/Chrome\/(\d+)/.exec(Ds.userAgent),IV="webkitFontSmoothing"in d$.documentElement.style,FJ=!_A&&/Apple Computer/.test(Ds.vendor),$V=FJ&&(/Mobile\/\w+/.test(Ds.userAgent)||Ds.maxTouchPoints>2);var Tt={mac:$V||/Mac/.test(Ds.platform),windows:/Win/.test(Ds.platform),linux:/Linux|X11/.test(Ds.platform),ie:_A,ie_version:NJ?d$.documentMode||6:g$?+g$[1]:p$?+p$[1]:0,gecko:OV,gecko_version:OV?+(/Firefox\/(\d+)/.exec(Ds.userAgent)||[0,0])[1]:0,chrome:!!LO,chrome_version:LO?+LO[1]:0,ios:$V,android:/Android\b/.test(Ds.userAgent),webkit:IV,safari:FJ,webkit_version:IV?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:d$.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const jwe=256;class vc extends zr{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,r){return this.flags&8||r&&(!(r instanceof vc)||this.length-(n-e)+r.length>jwe||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new vc(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new xa(this.dom,e)}domBoundsAround(e,n,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return Uwe(this.dom,e,n)}}class Cf extends zr{constructor(e,n=[],r=0){super(),this.mark=e,this.children=n,this.length=r;for(let i of n)i.setParent(this)}setAttrs(e){if(OJ(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,r,i,o,a){return r&&(!(r instanceof Cf&&r.mark.eq(this.mark))||e&&o<=0||n<this.length&&a<=0)?!1:(DJ(this,e,n,r?r.children:[],o-1,a-1),this.markDirty(),!0)}split(e){let n=[],r=0,i=-1,o=0;for(let s of this.children){let l=r+s.length;l>e&&n.push(r<e?s.split(e-r):s),i<0&&r>=e&&(i=o),r=l,o++}let a=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new Cf(this.mark,n,a)}domAtPos(e){return RJ(this,e)}coordsAt(e,n){return BJ(this,e,n)}}function Uwe(t,e,n){let r=t.nodeValue.length;e>r&&(e=r);let i=e,o=e,a=0;e==0&&n<0||e==r&&n>=0?Tt.chrome||Tt.gecko||(e?(i--,a=1):o<r&&(o++,a=-1)):n<0?i--:o<r&&o++;let s=Sg(t,i,o).getClientRects();if(!s.length)return null;let l=s[(a?a<0:n>=0)?0:s.length-1];return Tt.safari&&!a&&l.width==0&&(l=Array.prototype.find.call(s,u=>u.width)||l),a?bA(l,a<0):l||null}class Up extends zr{constructor(e,n,r){super(),this.widget=e,this.length=n,this.side=r,this.prevWidget=null}static create(e,n,r){return new Up(e,n,r)}split(e){let n=Up.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,n,r,i,o,a){return r&&(!(r instanceof Up)||!this.widget.compare(r.widget)||e>0&&o<=0||n<this.length&&a<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}become(e){return e instanceof Up&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return rr.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,r=n&&n.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):rr.empty}domAtPos(e){return(this.length?e==0:this.side>0)?xa.before(this.dom):xa.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);if(r)return r;let i=this.dom.getClientRects(),o=null;if(!i.length)return null;let a=this.side?this.side<0:e>0;for(let s=a?i.length-1:0;o=i[s],!(e>0?s==0:s==i.length-1||o.top<o.bottom);s+=a?-1:1);return bA(o,!a)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class n0 extends zr{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof n0&&e.side==this.side}split(){return new n0(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?xa.before(this.dom):xa.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return rr.empty}get isHidden(){return!0}}vc.prototype.children=Up.prototype.children=n0.prototype.children=gN;function RJ(t,e){let n=t.dom,{children:r}=t,i=0;for(let o=0;i<r.length;i++){let a=r[i],s=o+a.length;if(!(s==o&&a.getSide()<=0)){if(e>o&&e<s&&a.dom.parentNode==n)return a.domAtPos(e-o);if(e<=o)break;o=s}}for(let o=i;o>0;o--){let a=r[o-1];if(a.dom.parentNode==n)return a.domAtPos(a.length)}for(let o=i;o<r.length;o++){let a=r[o];if(a.dom.parentNode==n)return a.domAtPos(0)}return new xa(n,0)}function VJ(t,e,n){let r,{children:i}=t;n>0&&e instanceof Cf&&i.length&&(r=i[i.length-1])instanceof Cf&&r.mark.eq(e.mark)?VJ(r,e.children[0],n-1):(i.push(e),e.setParent(t)),t.length+=e.length}function BJ(t,e,n){let r=null,i=-1,o=null,a=-1;function s(u,c){for(let f=0,h=0;f<u.children.length&&h<=c;f++){let d=u.children[f],g=h+d.length;g>=c&&(d.children.length?s(d,c-h):(!o||o.isHidden&&n>0)&&(g>c||h==g&&d.getSide()>0)?(o=d,a=c-h):(h<c||h==g&&d.getSide()<0&&!d.isHidden)&&(r=d,i=c-h)),h=g}}s(t,e);let l=(n<0?r:o)||r||o;return l?l.coordsAt(Math.max(0,l==r?i:a),n):Wwe(t)}function Wwe(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=t0(e);return n[n.length-1]||null}function m$(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const LV=Object.create(null);function mN(t,e,n){if(t==e)return!0;t||(t=LV),e||(e=LV);let r=Object.keys(t),i=Object.keys(e);if(r.length-(n&&r.indexOf(n)>-1?1:0)!=i.length-(n&&i.indexOf(n)>-1?1:0))return!1;for(let o of r)if(o!=n&&(i.indexOf(o)==-1||t[o]!==e[o]))return!1;return!0}function v$(t,e,n){let r=null;if(e)for(let i in e)n&&i in n||t.removeAttribute(r=i);if(n)for(let i in n)e&&e[i]==n[i]||t.setAttribute(r=i,n[i]);return!!r}function Hwe(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let r=t.attributes[n];e[r.name]=r.value}return e}class $f{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,r){return null}get isHidden(){return!1}destroy(e){}}var di=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(di||(di={}));class Ut extends _g{constructor(e,n,r,i){super(),this.startSide=e,this.endSide=n,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new Z_(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return n+=r&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new rd(e,n,n,r,e.widget||null,!1)}static replace(e){let n=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:o,end:a}=zJ(e,n);r=(o?n?-3e8:-1:5e8)-1,i=(a?n?2e8:1:-6e8)+1}return new rd(e,r,i,n,e.widget||null,!0)}static line(e){return new Q_(e)}static set(e,n=!1){return ar.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Ut.none=ar.empty;class Z_ extends Ut{constructor(e){let{start:n,end:r}=zJ(e);super(n?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,r;return this==e||e instanceof Z_&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&mN(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}Z_.prototype.point=!1;class Q_ extends Ut{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Q_&&this.spec.class==e.spec.class&&mN(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}Q_.prototype.mapMode=ko.TrackBefore;Q_.prototype.point=!0;class rd extends Ut{constructor(e,n,r,i,o,a){super(n,r,o,e),this.block=i,this.isReplace=a,this.mapMode=i?n<=0?ko.TrackBefore:ko.TrackAfter:ko.TrackDel}get type(){return this.startSide<this.endSide?di.WidgetRange:this.startSide<=0?di.WidgetBefore:di.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof rd&&Gwe(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}rd.prototype.point=!0;function zJ(t,e=!1){let{inclusiveStart:n,inclusiveEnd:r}=t;return n==null&&(n=t.inclusive),r==null&&(r=t.inclusive),{start:n??e,end:r??e}}function Gwe(t,e){return t==e||!!(t&&e&&t.compare(e))}function y$(t,e,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=t?n[i]=Math.max(n[i],e):n.push(t,e)}class _a extends zr{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,r,i,o,a){if(r){if(!(r instanceof _a))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),DJ(this,e,n,r?r.children:[],o,a),!0}split(e){let n=new _a;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:r,off:i}=this.childPos(e);i&&(n.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let o=r;o<this.children.length;o++)n.append(this.children[o],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){mN(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){VJ(this,e,n)}addLineDeco(e){let n=e.spec.attributes,r=e.spec.class;n&&(this.attrs=m$(n,this.attrs||{})),r&&(this.attrs=m$({class:r},this.attrs||{}))}domAtPos(e){return RJ(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var r;this.dom?this.flags&4&&(OJ(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(v$(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let i=this.dom.lastChild;for(;i&&zr.get(i)instanceof Cf;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=zr.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!Tt.ios||!this.children.some(o=>o instanceof vc))){let o=document.createElement("BR");o.cmIgnore=!0,this.dom.appendChild(o)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let r of this.children){if(!(r instanceof vc)||/[^ -~]/.test(r.text))return null;let i=t0(r.dom);if(i.length!=1)return null;e+=i[0].width,n=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let r=BJ(this,e,n);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,o=r.bottom-r.top;if(Math.abs(o-i.lineHeight)<2&&i.textHeight<o){let a=(o-i.textHeight)/2;return{top:r.top+a,bottom:r.bottom-a,left:r.left,right:r.left}}}return r}become(e){return!1}get type(){return di.Text}static find(e,n){for(let r=0,i=0;r<e.children.length;r++){let o=e.children[r],a=i+o.length;if(a>=n){if(o instanceof _a)return o;if(a>n)break}i=a+o.breakAfter}return null}}class rg extends zr{constructor(e,n,r){super(),this.widget=e,this.length=n,this.type=r,this.breakAfter=0,this.prevWidget=null}merge(e,n,r,i,o,a){return r&&(!(r instanceof rg)||!this.widget.compare(r.widget)||e>0&&o<=0||n<this.length&&a<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?xa.before(this.dom):xa.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let r=new rg(this.widget,n,this.type);return r.breakAfter=this.breakAfter,r}get children(){return gN}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):rr.empty}domBoundsAround(){return null}become(e){return e instanceof rg&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.type=e.type,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){return this.widget.coordsAt(this.dom,e,n)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Jb{constructor(e,n,r,i){this.doc=e,this.pos=n,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof rg&&e.type==di.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new _a),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(ax(new n0(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(e,n,r){for(;e>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:a,done:s}=this.cursor.next(this.skip);if(this.skip=0,s)throw new Error("Ran out of text content when drawing inline views");if(a){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=o,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-r)),this.getLine().append(ax(new vc(this.text.slice(this.textOff,this.textOff+i)),n),r),this.atCursorPos=!0,this.textOff+=i,e-=i,r=0}}span(e,n,r,i){this.buildText(n-e,r,i),this.pos=n,this.openStart<0&&(this.openStart=i)}point(e,n,r,i,o,a){if(this.disallowBlockEffectsFor[a]&&r instanceof rd){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let s=n-e;if(r instanceof rd)if(r.block){let{type:l}=r;l==di.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new rg(r.widget||new DV("div"),s,l))}else{let l=Up.create(r.widget||new DV("span"),s,s?0:r.startSide),u=this.atCursorPos&&!l.isEditable&&o<=i.length&&(e<n||r.startSide>0),c=!l.isEditable&&(e<n||o>i.length||r.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!u&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),u&&(f.append(ax(new n0(1),i),o),o=i.length+Math.max(0,o-i.length)),f.append(ax(l,i),o),this.atCursorPos=c,this.pendingBuffer=c?e<n||o>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);s&&(this.textOff+s<=this.text.length?this.textOff+=s:(this.skip+=s-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=o)}static build(e,n,r,i,o){let a=new Jb(e,n,r,o);return a.openEnd=ar.spans(i,n,r,a),a.openStart<0&&(a.openStart=a.openEnd),a.finish(a.openEnd),a}}function ax(t,e){for(let n of e)t=new Cf(n,[t],t.length);return t}class DV extends $f{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}const jJ=St.define(),UJ=St.define(),WJ=St.define(),HJ=St.define(),b$=St.define(),GJ=St.define(),qJ=St.define(),YJ=St.define({combine:t=>t.some(e=>e)}),KJ=St.define({combine:t=>t.some(e=>e)});class ok{constructor(e,n="nearest",r="nearest",i=5,o=5){this.range=e,this.y=n,this.x=r,this.yMargin=i,this.xMargin=o}map(e){return e.empty?this:new ok(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const MV=un.define({map:(t,e)=>t.map(e)});function Vs(t,e,n){let r=t.facet(HJ);r.length?r[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}const SA=St.define({combine:t=>t.length?t[0]:!0});let qwe=0;const xb=St.define();class Fi{constructor(e,n,r,i){this.id=e,this.create=n,this.domEventHandlers=r,this.extension=i(this)}static define(e,n){const{eventHandlers:r,provide:i,decorations:o}=n||{};return new Fi(qwe++,e,r,a=>{let s=[xb.of(a)];return o&&s.push(V1.of(l=>{let u=l.plugin(a);return u?o(u):Ut.none})),i&&s.push(i(a)),s})}static fromClass(e,n){return Fi.define(r=>new e(r),n)}}class DO{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(r){if(Vs(n.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(n){Vs(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(r){Vs(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const XJ=St.define(),vN=St.define(),V1=St.define(),yN=St.define(),JJ=St.define();function ZJ(t){let e=0,n=0,r=0,i=0;for(let o of t.state.facet(JJ)){let a=o(t);a&&(a.left!=null&&(e=Math.max(e,a.left)),a.right!=null&&(n=Math.max(n,a.right)),a.top!=null&&(r=Math.max(r,a.top)),a.bottom!=null&&(i=Math.max(i,a.bottom)))}return{left:e,right:n,top:r,bottom:i}}const Cb=St.define();class Al{constructor(e,n,r,i){this.fromA=e,this.toA=n,this.fromB=r,this.toB=i}join(e){return new Al(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,r=this;for(;n>0;n--){let i=e[n-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(n-1,1)}}return e.splice(n,0,r),e}static extendWithRanges(e,n){if(n.length==0)return e;let r=[];for(let i=0,o=0,a=0,s=0;;i++){let l=i==e.length?null:e[i],u=a-s,c=l?l.fromB:1e9;for(;o<n.length&&n[o]<c;){let f=n[o],h=n[o+1],d=Math.max(s,f),g=Math.min(c,h);if(d<=g&&new Al(d+u,g+u,d,g).addToSet(r),h>c)break;o+=2}if(!l)return r;new Al(l.fromA,l.toA,l.fromB,l.toB).addToSet(r),a=l.toA,s=l.toB}}}class ak{constructor(e,n,r){this.view=e,this.state=n,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=Xi.empty(this.startState.doc.length);for(let o of r)this.changes=this.changes.compose(o.changes);let i=[];this.changes.iterChangedRanges((o,a,s,l)=>i.push(new Al(o,a,s,l))),this.changedRanges=i}static create(e,n,r){return new ak(e,n,r)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var fi=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(fi||(fi={}));const _$=fi.LTR,Ywe=fi.RTL;function QJ(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const Kwe=QJ("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Xwe=QJ("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),S$=Object.create(null),Nu=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);S$[e]=n,S$[n]=-e}function Jwe(t){return t<=247?Kwe[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?Xwe[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8203?256:64336<=t&&t<=65023?4:t==8204?256:1}const Zwe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Pv{constructor(e,n,r){this.from=e,this.to=n,this.level=r}get dir(){return this.level%2?Ywe:_$}side(e,n){return this.dir==n==e?this.to:this.from}static find(e,n,r,i){let o=-1;for(let a=0;a<e.length;a++){let s=e[a];if(s.from<=n&&s.to>=n){if(s.level==r)return a;(o<0||(i!=0?i<0?s.from<n:s.to>n:e[o].level>s.level))&&(o=a)}}if(o<0)throw new RangeError("Index out of range");return o}}const li=[];function Qwe(t,e){let n=t.length,r=e==_$?1:2,i=e==_$?2:1;if(!t||r==1&&!Zwe.test(t))return eZ(n);for(let a=0,s=r,l=r;a<n;a++){let u=Jwe(t.charCodeAt(a));u==512?u=s:u==8&&l==4&&(u=16),li[a]=u==4?2:u,u&7&&(l=u),s=u}for(let a=0,s=r,l=r;a<n;a++){let u=li[a];if(u==128)a<n-1&&s==li[a+1]&&s&24?u=li[a]=s:li[a]=256;else if(u==64){let c=a+1;for(;c<n&&li[c]==64;)c++;let f=a&&s==8||c<n&&li[c]==8?l==1?1:8:256;for(let h=a;h<c;h++)li[h]=f;a=c-1}else u==8&&l==1&&(li[a]=1);s=u,u&7&&(l=u)}for(let a=0,s=0,l=0,u,c,f;a<n;a++)if(c=S$[u=t.charCodeAt(a)])if(c<0){for(let h=s-3;h>=0;h-=3)if(Nu[h+1]==-c){let d=Nu[h+2],g=d&2?r:d&4?d&1?i:r:0;g&&(li[a]=li[Nu[h]]=g),s=h;break}}else{if(Nu.length==189)break;Nu[s++]=a,Nu[s++]=u,Nu[s++]=l}else if((f=li[a])==2||f==1){let h=f==r;l=h?0:1;for(let d=s-3;d>=0;d-=3){let g=Nu[d+2];if(g&2)break;if(h)Nu[d+2]|=2;else{if(g&4)break;Nu[d+2]|=4}}}for(let a=0;a<n;a++)if(li[a]==256){let s=a+1;for(;s<n&&li[s]==256;)s++;let l=(a?li[a-1]:r)==1,u=(s<n?li[s]:r)==1,c=l==u?l?1:2:r;for(let f=a;f<s;f++)li[f]=c;a=s-1}let o=[];if(r==1)for(let a=0;a<n;){let s=a,l=li[a++]!=1;for(;a<n&&l==(li[a]!=1);)a++;if(l)for(let u=a;u>s;){let c=u,f=li[--u]!=2;for(;u>s&&f==(li[u-1]!=2);)u--;o.push(new Pv(u,c,f?2:1))}else o.push(new Pv(s,a,0))}else for(let a=0;a<n;){let s=a,l=li[a++]==2;for(;a<n&&l==(li[a]==2);)a++;o.push(new Pv(s,a,l?1:2))}return o}function eZ(t){return[new Pv(0,t,0)]}let tZ="";function exe(t,e,n,r,i){var o;let a=r.head-t.from,s=-1;if(a==0){if(!i||!t.length)return null;e[0].level!=n&&(a=e[0].side(!1,n),s=0)}else if(a==t.length){if(i)return null;let h=e[e.length-1];h.level!=n&&(a=h.side(!0,n),s=e.length-1)}s<0&&(s=Pv.find(e,a,(o=r.bidiLevel)!==null&&o!==void 0?o:-1,r.assoc));let l=e[s];a==l.side(i,n)&&(l=e[s+=i?1:-1],a=l.side(!i,n));let u=i==(l.dir==n),c=Yo(t.text,a,u);if(tZ=t.text.slice(Math.min(a,c),Math.max(a,c)),c!=l.side(i,n))return Ze.cursor(c+t.from,u?-1:1,l.level);let f=s==(i?e.length-1:0)?null:e[s+(i?1:-1)];return!f&&l.level!=n?Ze.cursor(i?t.to:t.from,i?-1:1,n):f&&f.level<l.level?Ze.cursor(f.side(!i,n)+t.from,i?1:-1,f.level):Ze.cursor(c+t.from,i?-1:1,l.level)}class NV extends zr{constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[],this.hasComposition=null,this.markedForComposition=new Set,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new _a],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Al(0,0,0,e.state.doc.length)],0,null)}get length(){return this.view.state.doc.length}update(e){let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:s,toA:l})=>l<this.minWidthFrom||s>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let r=this.view.inputState.composing<0?null:nxe(this.view,e.changes);if(this.hasComposition){this.markedForComposition.clear();let{from:s,to:l}=this.hasComposition;n=new Al(s,l,e.changes.mapPos(s,-1),e.changes.mapPos(l,1)).addToSet(n.slice())}this.hasComposition=r?{from:r.range.fromB,to:r.range.toB}:null,(Tt.ie||Tt.chrome)&&!r&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let i=this.decorations,o=this.updateDeco(),a=oxe(i,o,e.changes);return n=Al.extendWithRanges(n,a),!(this.flags&7)&&n.length==0?!1:(this.updateInner(n,e.startState.doc.length,r),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let a=Tt.chrome||Tt.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,a),this.flags&=-8,a&&(a.written||i.selectionRange.focusNode!=a.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(a=>a.flags&=-9);let o=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let a of this.children)a instanceof rg&&a.widget instanceof FV&&o.push(a.dom);i.updateGaps(o)}updateChildren(e,n,r){let i=r?r.range.addToSet(e.slice()):e,o=this.childCursor(n);for(let a=i.length-1;;a--){let s=a>=0?i[a]:null;if(!s)break;let{fromA:l,toA:u,fromB:c,toB:f}=s,h,d,g,y;if(r&&r.range.fromB<f&&r.range.toB>c){let k=Jb.build(this.view.state.doc,c,r.range.fromB,this.decorations,this.dynamicDecorationMap),x=Jb.build(this.view.state.doc,r.range.toB,f,this.decorations,this.dynamicDecorationMap);d=k.breakAtStart,g=k.openStart,y=x.openEnd;let m=this.compositionView(r);x.breakAtStart?m.breakAfter=1:x.content.length&&m.merge(m.length,m.length,x.content[0],!1,x.openStart,0)&&(m.breakAfter=x.content[0].breakAfter,x.content.shift()),k.content.length&&m.merge(0,0,k.content[k.content.length-1],!0,0,k.openEnd)&&k.content.pop(),h=k.content.concat(m).concat(x.content)}else({content:h,breakAtStart:d,openStart:g,openEnd:y}=Jb.build(this.view.state.doc,c,f,this.decorations,this.dynamicDecorationMap));let{i:_,off:v}=o.findPos(u,1),{i:S,off:C}=o.findPos(l,-1);LJ(this,S,C,_,v,h,d,g,y)}r&&this.fixCompositionDOM(r)}compositionView(e){let n=new vc(e.text.nodeValue);n.flags|=8;for(let{deco:i}of e.marks)n=new Cf(i,[n],n.length);let r=new _a;return r.append(n,0),r}fixCompositionDOM(e){let n=(o,a)=>{a.flags|=8,this.markedForComposition.add(a);let s=zr.get(o);s!=a&&(s&&(s.dom=null),a.setDOM(o))},r=this.childPos(e.range.fromB,1),i=this.children[r.i];n(e.line,i);for(let o=e.marks.length-1;o>=-1;o--)r=i.childPos(r.off,1),i=i.children[r.i],n(o>=0?e.marks[o].node:e.text,i)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,o=!i&&QC(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||n||o))return;let a=this.forceSelection;this.forceSelection=!1;let s=this.view.state.selection.main,l=this.domAtPos(s.anchor),u=s.empty?l:this.domAtPos(s.head);if(Tt.gecko&&s.empty&&!this.hasComposition&&txe(l)){let f=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(f,l.node.childNodes[l.offset]||null)),l=u=new xa(f,0),a=!0}let c=this.view.observer.selectionRange;(a||!c.focusNode||!rk(l.node,l.offset,c.anchorNode,c.anchorOffset)||!rk(u.node,u.offset,c.focusNode,c.focusOffset))&&(this.view.observer.ignore(()=>{Tt.android&&Tt.chrome&&this.dom.contains(c.focusNode)&&axe(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let f=nk(this.view.root);if(f)if(s.empty){if(Tt.gecko){let h=rxe(l.node,l.offset);if(h&&h!=3){let d=rZ(l.node,l.offset,h==1?1:-1);d&&(l=new xa(d,h==1?0:d.nodeValue.length))}}f.collapse(l.node,l.offset),s.bidiLevel!=null&&c.cursorBidiLevel!=null&&(c.cursorBidiLevel=s.bidiLevel)}else if(f.extend){f.collapse(l.node,l.offset);try{f.extend(u.node,u.offset)}catch{}}else{let h=document.createRange();s.anchor>s.head&&([l,u]=[u,l]),h.setEnd(u.node,u.offset),h.setStart(l.node,l.offset),f.removeAllRanges(),f.addRange(h)}o&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(l,u)),this.impreciseAnchor=l.precise?null:new xa(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new xa(c.focusNode,c.focusOffset)}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,r=nk(e.root),{anchorNode:i,anchorOffset:o}=e.observer.selectionRange;if(!r||!n.empty||!n.assoc||!r.modify)return;let a=_a.find(this,n.head);if(!a)return;let s=a.posAtStart;if(n.head==s||n.head==s+a.length)return;let l=this.coordsAt(n.head,-1),u=this.coordsAt(n.head,1);if(!l||!u||l.bottom>u.top)return;let c=this.domAtPos(n.head+n.assoc);r.collapse(c.node,c.offset),r.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let f=e.observer.selectionRange;e.docView.posFromDOM(f.anchorNode,f.anchorOffset)!=n.from&&r.collapse(i,o)}nearest(e){for(let n=e;n;){let r=zr.get(n);if(r&&r.rootView==this)return r;n=n.parentNode}return null}posFromDOM(e,n){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,n)+r.posAtStart}domAtPos(e){let{i:n,off:r}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let i=this.children[n];if(r<i.length||i instanceof _a)break;n++,r=0}return this.children[n].domAtPos(r)}coordsAt(e,n){for(let r=this.length,i=this.children.length-1;;i--){let o=this.children[i],a=r-o.breakAfter-o.length;if(e>a||e==a&&o.type!=di.WidgetBefore&&o.type!=di.WidgetAfter&&(!i||n==2||this.children[i-1].breakAfter||this.children[i-1].type==di.WidgetBefore&&n>-2))return o.coordsAt(e-a,n);r=a}}coordsForChar(e){let{i:n,off:r}=this.childPos(e,1),i=this.children[n];if(!(i instanceof _a))return null;for(;i.children.length;){let{i:s,off:l}=i.childPos(r,1);for(;;s++){if(s==i.children.length)return null;if((i=i.children[s]).length)break}r=l}if(!(i instanceof vc))return null;let o=Yo(i.text,r);if(o==r)return null;let a=Sg(i.dom,r,o).getClientRects();return!a.length||a[0].top>=a[0].bottom?null:a[0]}measureVisibleLineHeights(e){let n=[],{from:r,to:i}=e,o=this.view.contentDOM.clientWidth,a=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,s=-1,l=this.view.textDirection==fi.LTR;for(let u=0,c=0;c<this.children.length;c++){let f=this.children[c],h=u+f.length;if(h>i)break;if(u>=r){let d=f.dom.getBoundingClientRect();if(n.push(d.height),a){let g=f.dom.lastChild,y=g?t0(g):[];if(y.length){let _=y[y.length-1],v=l?_.right-d.left:d.right-_.left;v>s&&(s=v,this.minWidth=o,this.minWidthFrom=u,this.minWidthTo=h)}}}u=h+f.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?fi.RTL:fi.LTR}measureTextSize(){for(let o of this.children)if(o instanceof _a){let a=o.measureTextSize();if(a)return a}let e=document.createElement("div"),n,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let o=t0(e.firstChild)[0];n=e.getBoundingClientRect().height,r=o?o.width/27:7,i=o?o.height:n,e.remove()}),{lineHeight:n,charWidth:r,textHeight:i}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new $J(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let r=0,i=0;;i++){let o=i==n.viewports.length?null:n.viewports[i],a=o?o.from-1:this.length;if(a>r){let s=n.lineBlockAt(a).bottom-n.lineBlockAt(r).top;e.push(Ut.replace({widget:new FV(s),block:!0,inclusive:!0,isBlockGap:!0}).range(r,a))}if(!o)break;r=o.to+1}return Ut.set(e)}updateDeco(){let e=this.view.state.facet(V1).map((n,r)=>(this.dynamicDecorationMap[r]=typeof n=="function")?n(this.view):n);for(let n=e.length;n<e.length+3;n++)this.dynamicDecorationMap[n]=!1;return this.decorations=[...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),i;if(!r)return;!n.empty&&(i=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let o=ZJ(this.view),a={left:r.left-o.left,top:r.top-o.top,right:r.right+o.right,bottom:r.bottom+o.bottom};Fwe(this.view.scrollDOM,a,n.head<n.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==fi.LTR)}}function txe(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}class FV extends $f{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function nZ(t){let e=t.observer.selectionRange,n=e.focusNode&&rZ(e.focusNode,e.focusOffset,0);if(!n)return null;let r=zr.get(n),i,o;if(r instanceof vc)i=r.posAtStart,o=i+r.length;else e:for(let a=0,s=n;;){for(let u=s.previousSibling,c;u;u=u.previousSibling){if(c=zr.get(u)){i=o=c.posAtEnd+a;break e}let f=new MJ([],t.state);if(f.readNode(u),f.text.indexOf(ov)>-1)return null;a+=f.text.length}if(s=s.parentNode,!s)return null;let l=zr.get(s);if(l){i=o=l.posAtStart+a;break}}return{from:i,to:o,node:n}}function nxe(t,e){let n=nZ(t);if(!n)return null;let{from:r,to:i,node:o}=n,a=e.mapPos(r,-1),s=e.mapPos(i,1),l=o.nodeValue;if(/[\n\r]/.test(l))return null;if(s-a!=l.length){let h=e.mapPos(r,1),d=e.mapPos(i,-1);if(d-h==l.length)a=h,s=d;else if(t.state.doc.sliceString(s-l.length,s)==l)a=s-l.length;else if(t.state.doc.sliceString(a,a+l.length)==l)s=a+l.length;else return null}let{main:u}=t.state.selection;if(t.state.doc.sliceString(a,s)!=l||a>u.head||s<u.head)return null;let c=[],f=new Al(r,i,a,s);for(let h=o.parentNode;;h=h.parentNode){let d=zr.get(h);if(d instanceof Cf)c.push({node:h,deco:d.mark});else{if(d instanceof _a||h.nodeName=="DIV"&&h.parentNode==t.contentDOM)return{range:f,text:o,marks:c,line:h};if(h!=t.contentDOM)c.push({node:h,deco:new Z_({inclusive:!0,attributes:Hwe(h),tagName:h.tagName.toLowerCase()})});else return null}}}function rZ(t,e,n){if(n<=0)for(let r=t,i=e;;){if(r.nodeType==3)return r;if(r.nodeType==1&&i>0)r=r.childNodes[i-1],i=nd(r);else break}if(n>=0)for(let r=t,i=e;;){if(r.nodeType==3)return r;if(r.nodeType==1&&i<r.childNodes.length&&n>=0)r=r.childNodes[i],i=0;else break}return null}function rxe(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}class ixe{constructor(){this.changes=[]}compareRange(e,n){y$(e,n,this.changes)}comparePoint(e,n){y$(e,n,this.changes)}}function oxe(t,e,n){let r=new ixe;return ar.compare(t,e,n,r),r.changes}function axe(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function sxe(t,e,n=1){let r=t.charCategorizer(e),i=t.doc.lineAt(e),o=e-i.from;if(i.length==0)return Ze.cursor(e);o==0?n=1:o==i.length&&(n=-1);let a=o,s=o;n<0?a=Yo(i.text,o,!1):s=Yo(i.text,o);let l=r(i.text.slice(a,s));for(;a>0;){let u=Yo(i.text,a,!1);if(r(i.text.slice(u,a))!=l)break;a=u}for(;s<i.length;){let u=Yo(i.text,s);if(r(i.text.slice(s,u))!=l)break;s=u}return Ze.range(a+i.from,s+i.from)}function lxe(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function uxe(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function MO(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function RV(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function VV(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function w$(t,e,n){let r,i,o,a,s=!1,l,u,c,f;for(let g=t.firstChild;g;g=g.nextSibling){let y=t0(g);for(let _=0;_<y.length;_++){let v=y[_];i&&MO(i,v)&&(v=RV(VV(v,i.bottom),i.top));let S=lxe(e,v),C=uxe(n,v);if(S==0&&C==0)return g.nodeType==3?BV(g,e,n):w$(g,e,n);if(!r||a>C||a==C&&o>S){r=g,i=v,o=S,a=C;let k=C?n<v.top?-1:1:S?e<v.left?-1:1:0;s=!k||(k>0?_<y.length-1:_>0)}S==0?n>v.bottom&&(!c||c.bottom<v.bottom)?(l=g,c=v):n<v.top&&(!f||f.top>v.top)&&(u=g,f=v):c&&MO(c,v)?c=VV(c,v.bottom):f&&MO(f,v)&&(f=RV(f,v.top))}}if(c&&c.bottom>=n?(r=l,i=c):f&&f.top<=n&&(r=u,i=f),!r)return{node:t,offset:0};let h=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return BV(r,h,n);if(s&&r.contentEditable!="false")return w$(r,h,n);let d=Array.prototype.indexOf.call(t.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:t,offset:d}}function BV(t,e,n){let r=t.nodeValue.length,i=-1,o=1e9,a=0;for(let s=0;s<r;s++){let l=Sg(t,s,s+1).getClientRects();for(let u=0;u<l.length;u++){let c=l[u];if(c.top==c.bottom)continue;a||(a=e-c.left);let f=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&f<o){let h=e>=(c.left+c.right)/2,d=h;if((Tt.chrome||Tt.gecko)&&Sg(t,s).getBoundingClientRect().left==c.right&&(d=!h),f<=0)return{node:t,offset:s+(d?1:0)};i=s+(d?1:0),o=f}}}return{node:t,offset:i>-1?i:a>0?t.nodeValue.length:0}}function iZ(t,e,n,r=-1){var i,o;let a=t.contentDOM.getBoundingClientRect(),s=a.top+t.viewState.paddingTop,l,{docHeight:u}=t.viewState,{x:c,y:f}=e,h=f-s;if(h<0)return 0;if(h>u)return t.state.doc.length;for(let k=t.viewState.heightOracle.textHeight/2,x=!1;l=t.elementAtHeight(h),l.type!=di.Text;)for(;h=r>0?l.bottom+k:l.top-k,!(h>=0&&h<=u);){if(x)return n?null:0;x=!0,r=-r}f=s+h;let d=l.from;if(d<t.viewport.from)return t.viewport.from==0?0:n?null:zV(t,a,l,c,f);if(d>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:zV(t,a,l,c,f);let g=t.dom.ownerDocument,y=t.root.elementFromPoint?t.root:g,_=y.elementFromPoint(c,f);_&&!t.contentDOM.contains(_)&&(_=null),_||(c=Math.max(a.left+1,Math.min(a.right-1,c)),_=y.elementFromPoint(c,f),_&&!t.contentDOM.contains(_)&&(_=null));let v,S=-1;if(_&&((i=t.docView.nearest(_))===null||i===void 0?void 0:i.isEditable)!=!1){if(g.caretPositionFromPoint){let k=g.caretPositionFromPoint(c,f);k&&({offsetNode:v,offset:S}=k)}else if(g.caretRangeFromPoint){let k=g.caretRangeFromPoint(c,f);k&&({startContainer:v,startOffset:S}=k,(!t.contentDOM.contains(v)||Tt.safari&&cxe(v,S,c)||Tt.chrome&&fxe(v,S,c))&&(v=void 0))}}if(!v||!t.docView.dom.contains(v)){let k=_a.find(t.docView,d);if(!k)return h>l.top+l.height/2?l.to:l.from;({node:v,offset:S}=w$(k.dom,c,f))}let C=t.docView.nearest(v);if(!C)return null;if(C.isWidget&&((o=C.dom)===null||o===void 0?void 0:o.nodeType)==1){let k=C.dom.getBoundingClientRect();return e.y<k.top||e.y<=k.bottom&&e.x<=(k.left+k.right)/2?C.posAtStart:C.posAtEnd}else return C.localPosFromDOM(v,S)+C.posAtStart}function zV(t,e,n,r,i){let o=Math.round((r-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let s=t.viewState.heightOracle.textHeight,l=Math.floor((i-n.top-(t.defaultLineHeight-s)*.5)/s);o+=l*t.viewState.heightOracle.lineLength}let a=t.state.sliceDoc(n.from,n.to);return n.from+u$(a,o,t.state.tabSize)}function cxe(t,e,n){let r;if(t.nodeType!=3||e!=(r=t.nodeValue.length))return!1;for(let i=t.nextSibling;i;i=i.nextSibling)if(i.nodeType!=1||i.nodeName!="BR")return!1;return Sg(t,r-1,r).getBoundingClientRect().left>n}function fxe(t,e,n){if(e!=0)return!1;for(let i=t;;){let o=i.parentNode;if(!o||o.nodeType!=1||o.firstChild!=i)return!1;if(o.classList.contains("cm-line"))break;i=o}let r=t.nodeType==1?t.getBoundingClientRect():Sg(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}function x$(t,e){let n=t.lineBlockAt(e);if(Array.isArray(n.type)){for(let r of n.type)if(r.to>e||r.to==e&&(r.to==n.to||r.type==di.Text))return r}return n}function hxe(t,e,n,r){let i=x$(t,e.head),o=!r||i.type!=di.Text||!(t.lineWrapping||i.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(o){let a=t.dom.getBoundingClientRect(),s=t.textDirectionAt(i.from),l=t.posAtCoords({x:n==(s==fi.LTR)?a.right-1:a.left+1,y:(o.top+o.bottom)/2});if(l!=null)return Ze.cursor(l,n?-1:1)}return Ze.cursor(n?i.to:i.from,n?-1:1)}function jV(t,e,n,r){let i=t.state.doc.lineAt(e.head),o=t.bidiSpans(i),a=t.textDirectionAt(i.from);for(let s=e,l=null;;){let u=exe(i,o,a,s,n),c=tZ;if(!u){if(i.number==(n?t.state.doc.lines:1))return s;c=`
`,i=t.state.doc.line(i.number+(n?1:-1)),o=t.bidiSpans(i),u=Ze.cursor(n?i.from:i.to)}if(l){if(!l(c))return s}else{if(!r)return u;l=r(c)}s=u}}function dxe(t,e,n){let r=t.state.charCategorizer(e),i=r(n);return o=>{let a=r(o);return i==ii.Space&&(i=a),i==a}}function pxe(t,e,n,r){let i=e.head,o=n?1:-1;if(i==(n?t.state.doc.length:0))return Ze.cursor(i,e.assoc);let a=e.goalColumn,s,l=t.contentDOM.getBoundingClientRect(),u=t.coordsAtPos(i),c=t.documentTop;if(u)a==null&&(a=u.left-l.left),s=o<0?u.top:u.bottom;else{let d=t.viewState.lineBlockAt(i);a==null&&(a=Math.min(l.right-l.left,t.defaultCharacterWidth*(i-d.from))),s=(o<0?d.top:d.bottom)+c}let f=l.left+a,h=r??t.viewState.heightOracle.textHeight>>1;for(let d=0;;d+=10){let g=s+(h+d)*o,y=iZ(t,{x:f,y:g},!1,o);if(g<l.top||g>l.bottom||(o<0?y<i:y>i))return Ze.cursor(y,e.assoc,void 0,a)}}function e2(t,e,n){for(;;){let r=0;for(let i of t)i.between(e-1,e+1,(o,a,s)=>{if(e>o&&e<a){let l=r||n||(e-o<a-e?-1:1);e=l<0?o:a,r=l}});if(!r)return e}}function NO(t,e,n){let r=e2(t.state.facet(yN).map(i=>i(t)),n.from,e.head>n.from?-1:1);return r==n.from?n:Ze.cursor(r,r<n.from?1:-1)}class gxe{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null;let n=(r,i)=>{this.ignoreDuringComposition(i)||i.type=="keydown"&&this.keydown(e,i)||(this.mustFlushObserver(i)&&e.observer.forceFlush(),this.runCustomHandlers(i.type,e,i)?i.preventDefault():r(e,i))};for(let r in zi){let i=zi[r];e.contentDOM.addEventListener(r,o=>{UV(e,o)&&n(i,o)},C$[r]),this.registeredEvents.push(r)}e.scrollDOM.addEventListener("mousedown",r=>{if(r.target==e.scrollDOM&&r.clientY>e.contentDOM.getBoundingClientRect().bottom&&(n(zi.mousedown,r),!r.defaultPrevented&&r.button==2)){let i=e.contentDOM.style.minHeight;e.contentDOM.style.minHeight="100%",setTimeout(()=>e.contentDOM.style.minHeight=i,200)}}),e.scrollDOM.addEventListener("drop",r=>{r.target==e.scrollDOM&&r.clientY>e.contentDOM.getBoundingClientRect().bottom&&n(zi.drop,r)}),Tt.chrome&&Tt.chrome_version==102&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,Tt.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,n){var r;let i;this.customHandlers=[];for(let o of n)if(i=(r=o.update(e).spec)===null||r===void 0?void 0:r.domEventHandlers){this.customHandlers.push({plugin:o.value,handlers:i});for(let a in i)this.registeredEvents.indexOf(a)<0&&a!="scroll"&&(this.registeredEvents.push(a),e.contentDOM.addEventListener(a,s=>{UV(e,s)&&this.runCustomHandlers(a,e,s)&&s.preventDefault()}))}}runCustomHandlers(e,n,r){for(let i of this.customHandlers){let o=i.handlers[e];if(o)try{if(o.call(i.plugin,r,n)||r.defaultPrevented)return!0}catch(a){Vs(n.state,a)}}return!1}runScrollHandlers(e,n){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let r of this.customHandlers){let i=r.handlers.scroll;if(i)try{i.call(r.plugin,n,e)}catch(o){Vs(e.state,o)}}}keydown(e,n){if(this.lastKeyCode=n.keyCode,this.lastKeyTime=Date.now(),n.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(n.keyCode!=27&&aZ.indexOf(n.keyCode)<0&&(e.inputState.lastEscPress=0),Tt.android&&Tt.chrome&&!n.synthetic&&(n.keyCode==13||n.keyCode==8))return e.observer.delayAndroidKey(n.key,n.keyCode),!0;let r;return Tt.ios&&!n.synthetic&&!n.altKey&&!n.metaKey&&((r=oZ.find(i=>i.keyCode==n.keyCode))&&!n.ctrlKey||mxe.indexOf(n.key)>-1&&n.ctrlKey&&!n.shiftKey)?(this.pendingIOSKey=r||n,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let n=this.pendingIOSKey;return n?(this.pendingIOSKey=void 0,Ev(e.contentDOM,n.key,n.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Tt.safari&&!Tt.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const oZ=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],mxe="dthko",aZ=[16,17,18,20,91,92,224,225],sx=6;function lx(t){return Math.max(0,t)*.7+8}function vxe(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class yxe{constructor(e,n,r,i){this.view=e,this.startEvent=n,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParent=Rwe(e.contentDOM),this.atoms=e.state.facet(yN).map(a=>a(e));let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(An.allowMultipleSelections)&&bxe(e,n),this.dragging=Sxe(e,n)&&cZ(n)==1?null:!1}start(e){this.dragging===!1&&(e.preventDefault(),this.select(e))}move(e){var n;if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&vxe(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let r=0,i=0,o=((n=this.scrollParent)===null||n===void 0?void 0:n.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},a=ZJ(this.view);e.clientX-a.left<=o.left+sx?r=-lx(o.left-e.clientX):e.clientX+a.right>=o.right-sx&&(r=lx(e.clientX-o.right)),e.clientY-a.top<=o.top+sx?i=-lx(o.top-e.clientY):e.clientY+a.bottom>=o.bottom-sx&&(i=lx(e.clientY-o.bottom)),this.setScrollSpeed(r,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],o=null;if(i.empty){let a=e2(this.atoms,i.from,0);a!=i.from&&(o=Ze.cursor(a,-1))}else{let a=e2(this.atoms,i.from,-1),s=e2(this.atoms,i.to,1);(a!=i.from||s!=i.to)&&(o=Ze.range(i.from==i.anchor?a:s,i.from==i.head?a:s))}o&&(n||(n=e.ranges.slice()),n[r]=o)}return n?Ze.create(n,e.mainIndex):e}select(e){let{view:n}=this,r=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(n.state.selection)||r.main.assoc!=n.state.selection.main.assoc&&this.dragging===!1)&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function bxe(t,e){let n=t.state.facet(jJ);return n.length?n[0](e):Tt.mac?e.metaKey:e.ctrlKey}function _xe(t,e){let n=t.state.facet(UJ);return n.length?n[0](e):Tt.mac?!e.altKey:!e.ctrlKey}function Sxe(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let r=nk(t.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let o=0;o<i.length;o++){let a=i[o];if(a.left<=e.clientX&&a.right>=e.clientX&&a.top<=e.clientY&&a.bottom>=e.clientY)return!0}return!1}function UV(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,r;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=zr.get(n))&&r.ignoreEvent(e))return!1;return!0}const zi=Object.create(null),C$=Object.create(null),sZ=Tt.ie&&Tt.ie_version<15||Tt.ios&&Tt.webkit_version<604;function wxe(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),lZ(t,n.value)},50)}function lZ(t,e){let{state:n}=t,r,i=1,o=n.toText(e),a=o.lines==n.selection.ranges.length;if(k$!=null&&n.selection.ranges.every(l=>l.empty)&&k$==o.toString()){let l=-1;r=n.changeByRange(u=>{let c=n.doc.lineAt(u.from);if(c.from==l)return{range:u};l=c.from;let f=n.toText((a?o.line(i++).text:e)+n.lineBreak);return{changes:{from:c.from,insert:f},range:Ze.cursor(u.from+f.length)}})}else a?r=n.changeByRange(l=>{let u=o.line(i++);return{changes:{from:l.from,to:l.to,insert:u.text},range:Ze.cursor(l.from+u.length)}}):r=n.replaceSelection(o);t.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}zi.keydown=(t,e)=>{t.inputState.setSelectionOrigin("select"),e.keyCode==27&&(t.inputState.lastEscPress=Date.now())};zi.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};zi.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};C$.touchstart=C$.touchmove={passive:!0};zi.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return;let n=null;for(let r of t.state.facet(WJ))if(n=r(t,e),n)break;if(!n&&e.button==0&&(n=kxe(t,e)),n){let r=!t.hasFocus;t.inputState.startMouseSelection(new yxe(t,e,n,r)),r&&t.observer.ignore(()=>PJ(t.contentDOM)),t.inputState.mouseSelection&&t.inputState.mouseSelection.start(e)}};function WV(t,e,n,r){if(r==1)return Ze.cursor(e,n);if(r==2)return sxe(t.state,e,n);{let i=_a.find(t.docView,e),o=t.state.doc.lineAt(i?i.posAtEnd:e),a=i?i.posAtStart:o.from,s=i?i.posAtEnd:o.to;return s<t.state.doc.length&&s==o.to&&s++,Ze.range(a,s)}}let uZ=(t,e)=>t>=e.top&&t<=e.bottom,HV=(t,e,n)=>uZ(e,n)&&t>=n.left&&t<=n.right;function xxe(t,e,n,r){let i=_a.find(t.docView,e);if(!i)return 1;let o=e-i.posAtStart;if(o==0)return 1;if(o==i.length)return-1;let a=i.coordsAt(o,-1);if(a&&HV(n,r,a))return-1;let s=i.coordsAt(o,1);return s&&HV(n,r,s)?1:a&&uZ(r,a)?-1:1}function GV(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:xxe(t,n,e.clientX,e.clientY)}}const Cxe=Tt.ie&&Tt.ie_version<=11;let qV=null,YV=0,KV=0;function cZ(t){if(!Cxe)return t.detail;let e=qV,n=KV;return qV=t,KV=Date.now(),YV=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(YV+1)%3:1}function kxe(t,e){let n=GV(t,e),r=cZ(e),i=t.state.selection;return{update(o){o.docChanged&&(n.pos=o.changes.mapPos(n.pos),i=i.map(o.changes))},get(o,a,s){let l=GV(t,o),u,c=WV(t,l.pos,l.bias,r);if(n.pos!=l.pos&&!a){let f=WV(t,n.pos,n.bias,r),h=Math.min(f.from,c.from),d=Math.max(f.to,c.to);c=h<c.from?Ze.range(h,d):Ze.range(d,h)}return a?i.replaceRange(i.main.extend(c.from,c.to)):s&&r==1&&i.ranges.length>1&&(u=Txe(i,l.pos))?u:s?i.addRange(c):Ze.create([c])}}}function Txe(t,e){for(let n=0;n<t.ranges.length;n++){let{from:r,to:i}=t.ranges[n];if(r<=e&&i>=e)return Ze.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}zi.dragstart=(t,e)=>{let{selection:{main:n}}=t.state,{mouseSelection:r}=t.inputState;r&&(r.dragging=n),e.dataTransfer&&(e.dataTransfer.setData("Text",t.state.sliceDoc(n.from,n.to)),e.dataTransfer.effectAllowed="copyMove")};function XV(t,e,n,r){if(!n)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:o}=t.inputState,a=r&&o&&o.dragging&&_xe(t,e)?{from:o.dragging.from,to:o.dragging.to}:null,s={from:i,insert:n},l=t.state.changes(a?[a,s]:s);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:a?"move.drop":"input.drop"})}zi.drop=(t,e)=>{if(!e.dataTransfer)return;if(t.state.readOnly)return e.preventDefault();let n=e.dataTransfer.files;if(n&&n.length){e.preventDefault();let r=Array(n.length),i=0,o=()=>{++i==n.length&&XV(t,e,r.filter(a=>a!=null).join(t.state.lineBreak),!1)};for(let a=0;a<n.length;a++){let s=new FileReader;s.onerror=o,s.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(s.result)||(r[a]=s.result),o()},s.readAsText(n[a])}}else XV(t,e,e.dataTransfer.getData("Text"),!0)};zi.paste=(t,e)=>{if(t.state.readOnly)return e.preventDefault();t.observer.flush();let n=sZ?null:e.clipboardData;n?(lZ(t,n.getData("text/plain")||n.getData("text/uri-text")),e.preventDefault()):wxe(t)};function Axe(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),t.focus()},50)}function Exe(t){let e=[],n=[],r=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let i=-1;for(let{from:o}of t.selection.ranges){let a=t.doc.lineAt(o);a.number>i&&(e.push(a.text),n.push({from:a.from,to:Math.min(t.doc.length,a.to+1)})),i=a.number}r=!0}return{text:e.join(t.lineBreak),ranges:n,linewise:r}}let k$=null;zi.copy=zi.cut=(t,e)=>{let{text:n,ranges:r,linewise:i}=Exe(t.state);if(!n&&!i)return;k$=i?n:null;let o=sZ?null:e.clipboardData;o?(e.preventDefault(),o.clearData(),o.setData("text/plain",n)):Axe(t,n),e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})};const fZ=If.define();function hZ(t,e){let n=[];for(let r of t.facet(qJ)){let i=r(t,e);i&&n.push(i)}return n?t.update({effects:n,annotations:fZ.of(!0)}):null}function dZ(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=hZ(t.state,e);n?t.dispatch(n):t.update([])}},10)}zi.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),dZ(t)};zi.blur=t=>{t.observer.clearSelectionRange(),dZ(t)};zi.compositionstart=zi.compositionupdate=t=>{t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0)};zi.compositionend=t=>{t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,Tt.chrome&&Tt.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50)};zi.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};zi.beforeinput=(t,e)=>{var n;let r;if(Tt.chrome&&Tt.android&&(r=oZ.find(i=>i.inputType==e.inputType))&&(t.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let i=((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>i+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}};const JV=["pre-wrap","normal","pre-line","break-spaces"];class Pxe{constructor(e){this.lineWrapping=e,this.doc=rr.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((n-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return JV.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(n=!0,this.heightSamples[Math.floor(i*10)]=!0)}return n}refresh(e,n,r,i,o,a){let s=JV.indexOf(e)>-1,l=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=s;if(this.lineWrapping=s,this.lineHeight=n,this.charWidth=r,this.textHeight=i,this.lineLength=o,l){this.heightSamples={};for(let u=0;u<a.length;u++){let c=a[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return l}}class Oxe{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class Zu{constructor(e,n,r,i,o){this.from=e,this.length=n,this.top=r,this.height=i,this._content=o}get type(){return typeof this._content=="number"?di.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof rd?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Zu(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var qr=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(qr||(qr={}));const t2=.001;class Ta{constructor(e,n,r=2){this.length=e,this.height=n,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,n){this.height!=n&&(Math.abs(this.height-n)>t2&&(e.heightChanged=!0),this.height=n)}replace(e,n,r){return Ta.of(r)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,r,i){let o=this,a=r.doc;for(let s=i.length-1;s>=0;s--){let{fromA:l,toA:u,fromB:c,toB:f}=i[s],h=o.lineAt(l,qr.ByPosNoHeight,r.setDoc(n),0,0),d=h.to>=u?h:o.lineAt(u,qr.ByPosNoHeight,r,0,0);for(f+=d.to-u,u=d.to;s>0&&h.from<=i[s-1].toA;)l=i[s-1].fromA,c=i[s-1].fromB,s--,l<h.from&&(h=o.lineAt(l,qr.ByPosNoHeight,r,0,0));c+=h.from-l,l=h.from;let g=bN.build(r.setDoc(a),e,c,f);o=o.replace(l,u,g)}return o.updateHeight(r,0)}static empty(){return new Ps(0,0)}static of(e){if(e.length==1)return e[0];let n=0,r=e.length,i=0,o=0;for(;;)if(n==r)if(i>o*2){let s=e[n-1];s.break?e.splice(--n,1,s.left,null,s.right):e.splice(--n,1,s.left,s.right),r+=1+s.break,i-=s.size}else if(o>i*2){let s=e[r];s.break?e.splice(r,1,s.left,null,s.right):e.splice(r,1,s.left,s.right),r+=2+s.break,o-=s.size}else break;else if(i<o){let s=e[n++];s&&(i+=s.size)}else{let s=e[--r];s&&(o+=s.size)}let a=0;return e[n-1]==null?(a=1,n--):e[n]==null&&(a=1,r++),new Ixe(Ta.of(e.slice(0,n)),a,Ta.of(e.slice(r)))}}Ta.prototype.size=1;class pZ extends Ta{constructor(e,n,r){super(e,n),this.deco=r}blockAt(e,n,r,i){return new Zu(i,this.length,r,this.height,this.deco||0)}lineAt(e,n,r,i,o){return this.blockAt(0,r,i,o)}forEachLine(e,n,r,i,o,a){e<=o+this.length&&n>=o&&a(this.blockAt(0,r,i,o))}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more&&this.setHeight(e,i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Ps extends pZ{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,r,i){return new Zu(i,this.length,r,this.height,this.breaks)}replace(e,n,r){let i=r[0];return r.length==1&&(i instanceof Ps||i instanceof bo&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof bo?i=new Ps(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):Ta.of(r)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more?this.setHeight(e,i.heights[i.index++]):(r||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class bo extends Ta{constructor(e){super(e,0)}heightMetrics(e,n){let r=e.doc.lineAt(n).number,i=e.doc.lineAt(n+this.length).number,o=i-r+1,a,s=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*o);a=l/o,this.length>o+1&&(s=(this.height-l)/(this.length-o-1))}else a=this.height/o;return{firstLine:r,lastLine:i,perLine:a,perChar:s}}blockAt(e,n,r,i){let{firstLine:o,lastLine:a,perLine:s,perChar:l}=this.heightMetrics(n,i);if(n.lineWrapping){let u=i+Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length),c=n.doc.lineAt(u),f=s+c.length*l,h=Math.max(r,e-f/2);return new Zu(c.from,c.length,h,f,0)}else{let u=Math.max(0,Math.min(a-o,Math.floor((e-r)/s))),{from:c,length:f}=n.doc.line(o+u);return new Zu(c,f,r+s*u,s,0)}}lineAt(e,n,r,i,o){if(n==qr.ByHeight)return this.blockAt(e,r,i,o);if(n==qr.ByPosNoHeight){let{from:d,to:g}=r.doc.lineAt(e);return new Zu(d,g-d,0,0,0)}let{firstLine:a,perLine:s,perChar:l}=this.heightMetrics(r,o),u=r.doc.lineAt(e),c=s+u.length*l,f=u.number-a,h=i+s*f+l*(u.from-o-f);return new Zu(u.from,u.length,Math.max(i,Math.min(h,i+this.height-c)),c,0)}forEachLine(e,n,r,i,o,a){e=Math.max(e,o),n=Math.min(n,o+this.length);let{firstLine:s,perLine:l,perChar:u}=this.heightMetrics(r,o);for(let c=e,f=i;c<=n;){let h=r.doc.lineAt(c);if(c==e){let g=h.number-s;f+=l*g+u*(e-o-g)}let d=l+u*h.length;a(new Zu(h.from,h.length,f,d,0)),f+=d,c=h.to+1}}replace(e,n,r){let i=this.length-n;if(i>0){let o=r[r.length-1];o instanceof bo?r[r.length-1]=new bo(o.length+i):r.push(null,new bo(i-1))}if(e>0){let o=r[0];o instanceof bo?r[0]=new bo(e+o.length):r.unshift(new bo(e-1),null)}return Ta.of(r)}decomposeLeft(e,n){n.push(new bo(e-1),null)}decomposeRight(e,n){n.push(null,new bo(this.length-e-1))}updateHeight(e,n=0,r=!1,i){let o=n+this.length;if(i&&i.from<=n+this.length&&i.more){let a=[],s=Math.max(n,i.from),l=-1;for(i.from>n&&a.push(new bo(i.from-n-1).updateHeight(e,n));s<=o&&i.more;){let c=e.doc.lineAt(s).length;a.length&&a.push(null);let f=i.heights[i.index++];l==-1?l=f:Math.abs(f-l)>=t2&&(l=-2);let h=new Ps(c,f);h.outdated=!1,a.push(h),s+=c+1}s<=o&&a.push(null,new bo(o-s).updateHeight(e,s));let u=Ta.of(a);return(l<0||Math.abs(u.height-this.height)>=t2||Math.abs(l-this.heightMetrics(e,n).perLine)>=t2)&&(e.heightChanged=!0),u}else(r||this.outdated)&&(this.setHeight(e,e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class Ixe extends Ta{constructor(e,n,r){super(e.length+n+r.length,e.height+r.height,n|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,n,r,i){let o=r+this.left.height;return e<o?this.left.blockAt(e,n,r,i):this.right.blockAt(e,n,o,i+this.left.length+this.break)}lineAt(e,n,r,i,o){let a=i+this.left.height,s=o+this.left.length+this.break,l=n==qr.ByHeight?e<a:e<s,u=l?this.left.lineAt(e,n,r,i,o):this.right.lineAt(e,n,r,a,s);if(this.break||(l?u.to<s:u.from>s))return u;let c=n==qr.ByPosNoHeight?qr.ByPosNoHeight:qr.ByPos;return l?u.join(this.right.lineAt(s,c,r,a,s)):this.left.lineAt(s,c,r,i,o).join(u)}forEachLine(e,n,r,i,o,a){let s=i+this.left.height,l=o+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,n,r,i,o,a),n>=l&&this.right.forEachLine(e,n,r,s,l,a);else{let u=this.lineAt(l,qr.ByPos,r,i,o);e<u.from&&this.left.forEachLine(e,u.from-1,r,i,o,a),u.to>=e&&u.from<=n&&a(u),n>u.to&&this.right.forEachLine(u.to+1,n,r,s,l,a)}}replace(e,n,r){let i=this.left.length+this.break;if(n<i)return this.balanced(this.left.replace(e,n,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,n-i,r));let o=[];e>0&&this.decomposeLeft(e,o);let a=o.length;for(let s of r)o.push(s);if(e>0&&ZV(o,a-1),n<this.length){let s=o.length;this.decomposeRight(n,o),ZV(o,s)}return Ta.of(o)}decomposeLeft(e,n){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(r++,e>=r&&n.push(null)),e>r&&this.right.decomposeLeft(e-r,n)}decomposeRight(e,n){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,n);e<r&&this.left.decomposeRight(e,n),this.break&&e<i&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?Ta.of(this.break?[e,null,n]:[e,n]):(this.left=e,this.right=n,this.height=e.height+n.height,this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,r=!1,i){let{left:o,right:a}=this,s=n+o.length+this.break,l=null;return i&&i.from<=n+o.length&&i.more?l=o=o.updateHeight(e,n,r,i):o.updateHeight(e,n,r),i&&i.from<=s+a.length&&i.more?l=a=a.updateHeight(e,s,r,i):a.updateHeight(e,s,r),l?this.balanced(o,a):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function ZV(t,e){let n,r;t[e]==null&&(n=t[e-1])instanceof bo&&(r=t[e+1])instanceof bo&&t.splice(e-1,3,new bo(n.length+1+r.length))}const $xe=5;class bN{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let r=Math.min(n,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof Ps?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new Ps(r-this.pos,-1)),this.writtenTo=r,n>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,r){if(e<n||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,o=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let a=n-e;r.block?this.addBlock(new pZ(a,i,r)):(a||o||i>=$xe)&&this.addLineDeco(i,o,a)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Ps(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let r=new bo(n-e);return this.oracle.doc.lineAt(e).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Ps)return e;let n=new Ps(0,-1);return this.nodes.push(n),n}addBlock(e){var n;this.enterLine();let r=(n=e.deco)===null||n===void 0?void 0:n.type;r==di.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,r!=di.WidgetBefore&&(this.covering=e)}addLineDeco(e,n,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=n,this.writtenTo=this.pos=this.pos+r}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof Ps)&&!this.isCovered?this.nodes.push(new Ps(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof Ps&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,n,r,i){let o=new bN(r,e);return ar.spans(n,r,i,o,0),o.finish(r)}}function Lxe(t,e,n){let r=new Dxe;return ar.compare(t,e,n,r,0),r.changes}class Dxe{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,r,i){(e<n||r&&r.heightRelevant||i&&i.heightRelevant)&&y$(e,n,this.changes,5)}}function Mxe(t,e){let n=t.getBoundingClientRect(),r=t.ownerDocument,i=r.defaultView||window,o=Math.max(0,n.left),a=Math.min(i.innerWidth,n.right),s=Math.max(0,n.top),l=Math.min(i.innerHeight,n.bottom);for(let u=t.parentNode;u&&u!=r.body;)if(u.nodeType==1){let c=u,f=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&f.overflow!="visible"){let h=c.getBoundingClientRect();o=Math.max(o,h.left),a=Math.min(a,h.right),s=Math.max(s,h.top),l=u==t.parentNode?h.bottom:Math.min(l,h.bottom)}u=f.position=="absolute"||f.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:o-n.left,right:Math.max(o,a)-n.left,top:s-(n.top+e),bottom:Math.max(s,l)-(n.top+e)}}function Nxe(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class FO{constructor(e,n,r){this.from=e,this.to=n,this.size=r}static same(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=n[r];if(i.from!=o.from||i.to!=o.to||i.size!=o.size)return!1}return!0}draw(e){return Ut.replace({widget:new Fxe(this.size,e)}).range(this.from,this.to)}}class Fxe extends $f{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class QV{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=eB,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=fi.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(vN).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new Pxe(n),this.stateDeco=e.facet(V1).filter(r=>typeof r!="function"),this.heightMap=Ta.empty().applyChanges(this.stateDeco,rr.empty,this.heightOracle.setDoc(e.doc),[new Al(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Ut.set(this.lineGaps.map(r=>r.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let i=r?n.head:n.anchor;if(!e.some(({from:o,to:a})=>i>=o&&i<=a)){let{from:o,to:a}=this.lineBlockAt(i);e.push(new ux(o,a))}}this.viewports=e.sort((r,i)=>r.from-i.from),this.scaler=this.heightMap.height<=7e6?eB:new Bxe(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:kb(e,this.scaler))})}update(e,n=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(V1).filter(c=>typeof c!="function");let i=e.changedRanges,o=Al.extendWithRanges(i,Lxe(r,this.stateDeco,e?e.changes:Xi.empty(this.state.doc.length))),a=this.heightMap.height,s=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),o),this.heightMap.height!=a&&(e.flags|=2),s?(this.scrollAnchorPos=e.changes.mapPos(s.from,-1),this.scrollAnchorHeight=s.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<l.from||n.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,n));let u=!e.changes.empty||e.flags&2||l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,this.updateForViewport(),u&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(KJ)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,r=window.getComputedStyle(n),i=this.heightOracle,o=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?fi.RTL:fi.LTR;let a=this.heightOracle.mustRefreshForWrapping(o),s=n.getBoundingClientRect(),l=a||this.mustMeasureContent||this.contentDOMHeight!=s.height;this.contentDOMHeight=s.height,this.mustMeasureContent=!1;let u=0,c=0,f=parseInt(r.paddingTop)||0,h=parseInt(r.paddingBottom)||0;(this.paddingTop!=f||this.paddingBottom!=h)&&(this.paddingTop=f,this.paddingBottom=h,u|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=8),this.scrollTop!=e.scrollDOM.scrollTop&&(this.scrollAnchorHeight=-1,this.scrollTop=e.scrollDOM.scrollTop),this.scrolledToBottom=IJ(e.scrollDOM);let d=(this.printing?Nxe:Mxe)(n,this.paddingTop),g=d.top-this.pixelViewport.top,y=d.bottom-this.pixelViewport.bottom;this.pixelViewport=d;let _=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(_!=this.inView&&(this.inView=_,_&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let v=s.width;if((this.contentDOMWidth!=v||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=s.width,this.editorHeight=e.scrollDOM.clientHeight,u|=8),l){let C=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(C)&&(a=!0),a||i.lineWrapping&&Math.abs(v-this.contentDOMWidth)>i.charWidth){let{lineHeight:k,charWidth:x,textHeight:m}=e.docView.measureTextSize();a=k>0&&i.refresh(o,k,x,m,v/x,C),a&&(e.docView.minWidth=0,u|=8)}g>0&&y>0?c=Math.max(g,y):g<0&&y<0&&(c=Math.min(g,y)),i.heightChanged=!1;for(let k of this.viewports){let x=k.from==this.viewport.from?C:e.docView.measureVisibleLineHeights(k);this.heightMap=(a?Ta.empty().applyChanges(this.stateDeco,rr.empty,this.heightOracle,[new Al(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,a,new Oxe(k.from,x))}i.heightChanged&&(u|=2)}let S=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return S&&(this.viewport=this.getViewport(c,this.scrollTarget)),this.updateForViewport(),(u&2||S)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(a?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,o=this.heightOracle,{visibleTop:a,visibleBottom:s}=this,l=new ux(i.lineAt(a-r*1e3,qr.ByHeight,o,0,0).from,i.lineAt(s+(1-r)*1e3,qr.ByHeight,o,0,0).to);if(n){let{head:u}=n.range;if(u<l.from||u>l.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=i.lineAt(u,qr.ByPos,o,0,0),h;n.y=="center"?h=(f.top+f.bottom)/2-c/2:n.y=="start"||n.y=="nearest"&&u<l.from?h=f.top:h=f.bottom-c,l=new ux(i.lineAt(h-1e3/2,qr.ByHeight,o,0,0).from,i.lineAt(h+c+1e3/2,qr.ByHeight,o,0,0).to)}}return l}mapViewport(e,n){let r=n.mapPos(e.from,-1),i=n.mapPos(e.to,1);return new ux(this.heightMap.lineAt(r,qr.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,qr.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,qr.ByPos,this.heightOracle,0,0),{bottom:o}=this.heightMap.lineAt(n,qr.ByPos,this.heightOracle,0,0),{visibleTop:a,visibleBottom:s}=this;return(e==0||i<=a-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||o>=s+Math.max(10,Math.min(r,250)))&&i>a-2*1e3&&o<s+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let r=[];for(let i of e)n.touchesRange(i.from,i.to)||r.push(new FO(n.mapPos(i.from),n.mapPos(i.to),i.size));return r}ensureLineGaps(e,n){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,o=i>>1,a=i<<1;if(this.defaultTextDirection!=fi.LTR&&!r)return[];let s=[],l=(u,c,f,h)=>{if(c-u<o)return;let d=this.state.selection.main,g=[d.from];d.empty||g.push(d.to);for(let _ of g)if(_>u&&_<c){l(u,_-10,f,h),l(_+10,c,f,h);return}let y=Vxe(e,_=>_.from>=f.from&&_.to<=f.to&&Math.abs(_.from-u)<o&&Math.abs(_.to-c)<o&&!g.some(v=>_.from<v&&_.to>v));if(!y){if(c<f.to&&n&&r&&n.visibleRanges.some(_=>_.from<=c&&_.to>=c)){let _=n.moveToLineBoundary(Ze.cursor(c),!1,!0).head;_>u&&(c=_)}y=new FO(u,c,this.gapSize(f,u,c,h))}s.push(y)};for(let u of this.viewportLines){if(u.length<a)continue;let c=Rxe(u.from,u.to,this.stateDeco);if(c.total<a)continue;let f=this.scrollTarget?this.scrollTarget.range.head:null,h,d;if(r){let g=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,y,_;if(f!=null){let v=fx(c,f),S=((this.visibleBottom-this.visibleTop)/2+g)/u.height;y=v-S,_=v+S}else y=(this.visibleTop-u.top-g)/u.height,_=(this.visibleBottom-u.top+g)/u.height;h=cx(c,y),d=cx(c,_)}else{let g=c.total*this.heightOracle.charWidth,y=i*this.heightOracle.charWidth,_,v;if(f!=null){let S=fx(c,f),C=((this.pixelViewport.right-this.pixelViewport.left)/2+y)/g;_=S-C,v=S+C}else _=(this.pixelViewport.left-y)/g,v=(this.pixelViewport.right+y)/g;h=cx(c,_),d=cx(c,v)}h>u.from&&l(u.from,h,u,c),d<u.to&&l(d,u.to,u,c)}return s}gapSize(e,n,r,i){let o=fx(i,r)-fx(i,n);return this.heightOracle.lineWrapping?e.height*o:i.total*this.heightOracle.charWidth*o}updateLineGaps(e){FO.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Ut.set(e.map(n=>n.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let n=[];ar.spans(e,this.viewport.from,this.viewport.to,{span(i,o){n.push({from:i,to:o})},point(){}},20);let r=n.length!=this.visibleRanges.length||this.visibleRanges.some((i,o)=>i.from!=n[o].from||i.to!=n[o].to);return this.visibleRanges=n,r?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||kb(this.heightMap.lineAt(e,qr.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return kb(this.heightMap.lineAt(this.scaler.fromDOM(e),qr.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return kb(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class ux{constructor(e,n){this.from=e,this.to=n}}function Rxe(t,e,n){let r=[],i=t,o=0;return ar.spans(n,t,e,{span(){},point(a,s){a>i&&(r.push({from:i,to:a}),o+=a-i),i=s}},20),i<e&&(r.push({from:i,to:e}),o+=e-i),{total:o,ranges:r}}function cx({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let i=0;;i++){let{from:o,to:a}=e[i],s=a-o;if(r<=s)return o+r;r-=s}}function fx(t,e){let n=0;for(let{from:r,to:i}of t.ranges){if(e<=i){n+=e-r;break}n+=i-r}return n/t.total}function Vxe(t,e){for(let n of t)if(e(n))return n}const eB={toDOM(t){return t},fromDOM(t){return t},scale:1};class Bxe{constructor(e,n,r){let i=0,o=0,a=0;this.viewports=r.map(({from:s,to:l})=>{let u=n.lineAt(s,qr.ByPos,e,0,0).top,c=n.lineAt(l,qr.ByPos,e,0,0).bottom;return i+=c-u,{from:s,to:l,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(n.height-i);for(let s of this.viewports)s.domTop=a+(s.top-o)*this.scale,a=s.domBottom=s.domTop+(s.bottom-s.top),o=s.bottom}toDOM(e){for(let n=0,r=0,i=0;;n++){let o=n<this.viewports.length?this.viewports[n]:null;if(!o||e<o.top)return i+(e-r)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);r=o.bottom,i=o.domBottom}}fromDOM(e){for(let n=0,r=0,i=0;;n++){let o=n<this.viewports.length?this.viewports[n]:null;if(!o||e<o.domTop)return r+(e-i)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);r=o.bottom,i=o.domBottom}}}function kb(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new Zu(t.from,t.length,n,r-n,Array.isArray(t._content)?t._content.map(i=>kb(i,e)):t._content)}const hx=St.define({combine:t=>t.join(" ")}),T$=St.define({combine:t=>t.indexOf(!0)>-1}),A$=ed.newName(),gZ=ed.newName(),mZ=ed.newName(),vZ={"&light":"."+gZ,"&dark":"."+mZ};function E$(t,e,n){return new ed(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return t;if(!n||!n[i])throw new RangeError(`Unsupported selector: ${i}`);return n[i]}):t+" "+r}})}const zxe=E$("."+A$,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},vZ);class jxe{constructor(e,n,r,i){this.typeOver=i,this.bounds=null,this.text="";let{impreciseHead:o,impreciseAnchor:a}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,r,0))){let s=o||a?[]:Wxe(e),l=new MJ(s,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=Hxe(s,this.bounds.from)}else{let s=e.observer.selectionRange,l=o&&o.node==s.focusNode&&o.offset==s.focusOffset||!h$(e.contentDOM,s.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(s.focusNode,s.focusOffset),u=a&&a.node==s.anchorNode&&a.offset==s.anchorOffset||!h$(e.contentDOM,s.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(s.anchorNode,s.anchorOffset);this.newSel=Ze.single(u,l)}}}function yZ(t,e){let n,{newSel:r}=e,i=t.state.selection.main,o=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:a,to:s}=e.bounds,l=i.from,u=null;(o===8||Tt.android&&e.text.length<s-a)&&(l=i.to,u="end");let c=Uxe(t.state.doc.sliceString(a,s,ov),e.text,l-a,u);c&&(Tt.chrome&&o==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==ov+ov&&c.toB--,n={from:a+c.from,to:a+c.toA,insert:rr.of(e.text.slice(c.from,c.toB).split(ov))})}else r&&(!t.hasFocus&&t.state.facet(SA)||r.main.eq(i))&&(r=null);if(!n&&!r)return!1;if(!n&&e.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,i.to))}:(Tt.mac||Tt.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(r&&n.insert.length==2&&(r=Ze.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:rr.of([" "])}):Tt.chrome&&n&&n.from==n.to&&n.from==i.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(r&&(r=Ze.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:rr.of([" "])}),n){let a=t.state;if(Tt.ios&&t.inputState.flushIOSKey(t)||Tt.android&&(n.from==i.from&&n.to==i.to&&n.insert.length==1&&n.insert.lines==2&&Ev(t.contentDOM,"Enter",13)||(n.from==i.from-1&&n.to==i.to&&n.insert.length==0||o==8&&n.insert.length<n.to-n.from)&&Ev(t.contentDOM,"Backspace",8)||n.from==i.from&&n.to==i.to+1&&n.insert.length==0&&Ev(t.contentDOM,"Delete",46)))return!0;let s=n.insert.toString();if(t.state.facet(GJ).some(c=>c(t,n.from,n.to,s)))return!0;t.inputState.composing>=0&&t.inputState.composing++;let l;if(n.from>=i.from&&n.to<=i.to&&n.to-n.from>=(i.to-i.from)/3&&(!r||r.main.empty&&r.main.from==n.from+n.insert.length)&&t.inputState.composing<0){let c=i.from<n.from?a.sliceDoc(i.from,n.from):"",f=i.to>n.to?a.sliceDoc(n.to,i.to):"";l=a.replaceSelection(t.state.toText(c+n.insert.sliceString(0,void 0,t.state.lineBreak)+f))}else{let c=a.changes(n),f=r&&r.main.to<=c.newLength?r.main:void 0;if(a.selection.ranges.length>1&&t.inputState.composing>=0&&n.to<=i.to&&n.to>=i.to-10){let h=t.state.sliceDoc(n.from,n.to),d=nZ(t)||t.state.doc.lineAt(i.head),g=i.to-n.to,y=i.to-i.from;l=a.changeByRange(_=>{if(_.from==i.from&&_.to==i.to)return{changes:c,range:f||_.map(c)};let v=_.to-g,S=v-h.length;if(_.to-_.from!=y||t.state.sliceDoc(S,v)!=h||d&&_.to>=d.from&&_.from<=d.to)return{range:_};let C=a.changes({from:S,to:v,insert:n.insert}),k=_.to-i.to;return{changes:C,range:f?Ze.range(Math.max(0,f.anchor+k),Math.max(0,f.head+k)):_.map(C)}})}else l={changes:c,selection:f&&a.selection.replaceRange(f)}}let u="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,u+=".compose",t.inputState.compositionFirstChange&&(u+=".start",t.inputState.compositionFirstChange=!1)),t.dispatch(l,{scrollIntoView:!0,userEvent:u}),!0}else if(r&&!r.main.eq(i)){let a=!1,s="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(a=!0),s=t.inputState.lastSelectionOrigin),t.dispatch({selection:r,scrollIntoView:a,userEvent:s}),!0}else return!1}function Uxe(t,e,n,r){let i=Math.min(t.length,e.length),o=0;for(;o<i&&t.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==i&&t.length==e.length)return null;let a=t.length,s=e.length;for(;a>0&&s>0&&t.charCodeAt(a-1)==e.charCodeAt(s-1);)a--,s--;if(r=="end"){let l=Math.max(0,o-Math.min(a,s));n-=a+l-o}if(a<o&&t.length<e.length){let l=n<=o&&n>=a?o-n:0;o-=l,s=o+(s-a),a=o}else if(s<o){let l=n<=o&&n>=s?o-n:0;o-=l,a=o+(a-s),s=o}return{from:o,toA:a,toB:s}}function Wxe(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}=t.observer.selectionRange;return n&&(e.push(new PV(n,r)),(i!=n||o!=r)&&e.push(new PV(i,o))),e}function Hxe(t,e){if(t.length==0)return null;let n=t[0].pos,r=t.length==2?t[1].pos:n;return n>-1&&r>-1?Ze.single(n+e,r+e):null}const Gxe={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},RO=Tt.ie&&Tt.ie_version<=11;class qxe{constructor(e){this.view=e,this.active=!1,this.selectionRange=new Vwe,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);(Tt.ie&&Tt.ie_version<=11||Tt.ios&&e.composing)&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),RO&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM),this.resizeContent=new ResizeObserver(()=>this.view.requestMeasure()),this.resizeContent.observe(e.contentDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runScrollHandlers(this.view,e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,r)=>n!=e[r]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(SA)?r.root.activeElement!=this.dom:!QC(r.dom,i))return;let o=i.anchorNode&&r.docView.nearest(i.anchorNode);if(o&&o.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(Tt.ie&&Tt.ie_version<=11||Tt.android&&Tt.chrome)&&!r.state.selection.main.empty&&i.focusNode&&rk(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=Tt.safari&&e.root.nodeType==11&&Mwe(this.dom.ownerDocument)==this.dom&&Yxe(this.view)||nk(e.root);if(!n||this.selectionRange.eq(n))return!1;let r=QC(this.dom,n);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&zwe(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let r=this.dom;r;)if(r.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=n)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Gxe),RO&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),RO&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var r;if(!this.delayedAndroidKey){let i=()=>{let o=this.delayedAndroidKey;o&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=o.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&o.force&&Ev(this.dom,o.key,o.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,r=-1,i=!1;for(let o of e){let a=this.readMutation(o);a&&(a.typeOver&&(i=!0),n==-1?{from:n,to:r}=a:(n=Math.min(a.from,n),r=Math.max(a.to,r)))}return{from:n,to:r,typeOver:i}}readChange(){let{from:e,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&QC(this.dom,this.selectionRange);return e<0&&!i?null:(e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new jxe(this.view,e,n,r))}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return!1;let r=this.view.state,i=yZ(this.view,n);return this.view.state==r&&this.view.update([]),i}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let r=tB(n,e.previousSibling||e.target.previousSibling,-1),i=tB(n,e.nextSibling||e.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:i?n.posBefore(i):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,n,r,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect(),(i=this.resizeContent)===null||i===void 0||i.disconnect();for(let o of this.scrollTargets)o.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function tB(t,e,n){for(;e;){let r=zr.get(e);if(r&&r.parent==t)return r;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}function Yxe(t){let e=null;function n(l){l.preventDefault(),l.stopImmediatePropagation(),e=l.getTargetRanges()[0]}if(t.contentDOM.addEventListener("beforeinput",n,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",n,!0),!e)return null;let r=e.startContainer,i=e.startOffset,o=e.endContainer,a=e.endOffset,s=t.docView.domAtPos(t.state.selection.main.anchor);return rk(s.node,s.offset,o,a)&&([r,i,o,a]=[o,a,r,i]),{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:a}}class bt{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(n=>this.update([n])),this.dispatch=this.dispatch.bind(this),this._root=e.root||Bwe(e.parent)||document,this.viewState=new QV(e.state||An.create(e)),this.plugins=this.state.facet(xb).map(n=>new DO(n));for(let n of this.plugins)n.update(this);this.observer=new qxe(this),this.inputState=new gxe(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new NV(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...e){let n=e.length==1&&e[0]instanceof Ji?e[0]:this.state.update(...e);this._dispatch(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,i,o=this.state;for(let h of e){if(h.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=h.state}if(this.destroyed){this.viewState.state=o;return}let a=this.hasFocus,s=0,l=null;e.some(h=>h.annotation(fZ))?(this.inputState.notifiedFocused=a,s=1):a!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=a,l=hZ(o,a),l||(s=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(c=null)):this.observer.clear(),o.facet(An.phrases)!=this.state.facet(An.phrases))return this.setState(o);i=ak.create(this,o,e),i.flags|=s;let f=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(f&&(f=f.map(h.changes)),h.scrollIntoView){let{main:d}=h.state.selection;f=new ok(d.empty?d:Ze.cursor(d.head,d.head>d.anchor?-1:1))}for(let d of h.effects)d.is(MV)&&(f=d.value)}this.viewState.update(i,f),this.bidiCache=sk.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),n=this.docView.update(i),this.state.facet(Cb)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(hx)!=i.state.facet(hx)&&(this.viewState.mustMeasureContent=!0),(n||r||f||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!i.empty)for(let h of this.state.facet(b$))h(i);(l||c)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),c&&!yZ(this,c)&&u.force&&Ev(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new QV(e),this.plugins=e.facet(xb).map(r=>new DO(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView=new NV(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(xb),r=e.state.facet(xb);if(n!=r){let i=[];for(let o of r){let a=n.indexOf(o);if(a<0)i.push(new DO(o));else{let s=this.plugins[a];s.mustUpdate=e,i.push(s)}}for(let o of this.plugins)o.mustUpdate!=e&&o.destroy(this);this.plugins=i,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,r=this.scrollDOM,{scrollTop:i}=r,{scrollAnchorPos:o,scrollAnchorHeight:a}=this.viewState;i!=this.viewState.scrollTop&&(a=-1),this.viewState.scrollAnchorHeight=-1;try{for(let s=0;;s++){if(a<0)if(IJ(r))o=-1,a=this.viewState.heightMap.height;else{let d=this.viewState.scrollAnchorAt(i);o=d.from,a=d.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(s>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];l&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(d=>{try{return d.read(this)}catch(g){return Vs(this.state,g),nB}}),f=ak.create(this,this.state,[]),h=!1;f.flags|=l,n?n.flags|=l:n=f,this.updateState=2,f.empty||(this.updatePlugins(f),this.inputState.update(f),this.updateAttrs(),h=this.docView.update(f));for(let d=0;d<u.length;d++)if(c[d]!=nB)try{let g=u[d];g.write&&g.write(c[d],this)}catch(g){Vs(this.state,g)}if(h&&this.docView.updateSelection(!0),!f.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null;continue}else{let g=(o<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(o).top)-a;if(g>1||g<-1){i=r.scrollTop=i+g,a=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let s of this.state.facet(b$))s(n)}get themeClasses(){return A$+" "+(this.state.facet(T$)?mZ:gZ)+" "+this.state.facet(hx)}updateAttrs(){let e=rB(this,XJ,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(SA)?"true":"false",class:"cm-content",style:`${Tt.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),rB(this,vN,n);let r=this.observer.ignore(()=>{let i=v$(this.contentDOM,this.contentAttrs,n),o=v$(this.dom,this.editorAttrs,e);return i||o});return this.editorAttrs=e,this.contentAttrs=n,r}showAnnouncements(e){let n=!0;for(let r of e)for(let i of r.effects)if(i.is(bt.announce)){n&&(this.announceDOM.textContent=""),n=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(Cb),ed.mount(this.root,this.styleModules.concat(zxe).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.spec!=e)&&this.pluginMap.set(e,n=this.plugins.find(r=>r.spec==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,r){return NO(this,e,jV(this,e,n,r))}moveByGroup(e,n){return NO(this,e,jV(this,e,n,r=>dxe(this,e.head,r)))}moveToLineBoundary(e,n,r=!0){return hxe(this,e,n,r)}moveVertically(e,n,r){return NO(this,e,pxe(this,e,n,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),iZ(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let r=this.docView.coordsAt(e,n);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),o=this.bidiSpans(i),a=o[Pv.find(o,e-i.from,-1,n)];return bA(r,a.dir==fi.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(YJ)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Kxe)return eZ(e.length);let n=this.textDirectionAt(e.from);for(let i of this.bidiCache)if(i.from==e.from&&i.dir==n)return i.order;let r=Qwe(e.text,n);return this.bidiCache.push(new sk(e.from,e.to,n,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Tt.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{PJ(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return MV.of(new ok(typeof e=="number"?Ze.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}static domEventHandlers(e){return Fi.define(()=>({}),{eventHandlers:e})}static theme(e,n){let r=ed.newName(),i=[hx.of(r),Cb.of(E$(`.${r}`,e))];return n&&n.dark&&i.push(T$.of(!0)),i}static baseTheme(e){return zg.lowest(Cb.of(E$("."+A$,e,vZ)))}static findFromDOM(e){var n;let r=e.querySelector(".cm-content"),i=r&&zr.get(r)||zr.get(e);return((n=i==null?void 0:i.rootView)===null||n===void 0?void 0:n.view)||null}}bt.styleModule=Cb;bt.inputHandler=GJ;bt.focusChangeEffect=qJ;bt.perLineTextDirection=YJ;bt.exceptionSink=HJ;bt.updateListener=b$;bt.editable=SA;bt.mouseSelectionStyle=WJ;bt.dragMovesSelection=UJ;bt.clickAddsSelectionRange=jJ;bt.decorations=V1;bt.atomicRanges=yN;bt.scrollMargins=JJ;bt.darkTheme=T$;bt.contentAttributes=vN;bt.editorAttributes=XJ;bt.lineWrapping=bt.contentAttributes.of({class:"cm-lineWrapping"});bt.announce=un.define();const Kxe=4096,nB={};class sk{constructor(e,n,r,i){this.from=e,this.to=n,this.dir=r,this.order=i}static update(e,n){if(n.empty)return e;let r=[],i=e.length?e[e.length-1].dir:fi.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let a=e[o];a.dir==i&&!n.touchesRange(a.from,a.to)&&r.push(new sk(n.mapPos(a.from,1),n.mapPos(a.to,-1),a.dir,a.order))}return r}}function rB(t,e,n){for(let r=t.state.facet(e),i=r.length-1;i>=0;i--){let o=r[i],a=typeof o=="function"?o(t):o;a&&m$(a,n)}return n}const Xxe=Tt.mac?"mac":Tt.windows?"win":Tt.linux?"linux":"key";function Jxe(t,e){const n=t.split(/-(?!$)/);let r=n[n.length-1];r=="Space"&&(r=" ");let i,o,a,s;for(let l=0;l<n.length-1;++l){const u=n[l];if(/^(cmd|meta|m)$/i.test(u))s=!0;else if(/^a(lt)?$/i.test(u))i=!0;else if(/^(c|ctrl|control)$/i.test(u))o=!0;else if(/^s(hift)?$/i.test(u))a=!0;else if(/^mod$/i.test(u))e=="mac"?s=!0:o=!0;else throw new Error("Unrecognized modifier name: "+u)}return i&&(r="Alt-"+r),o&&(r="Ctrl-"+r),s&&(r="Meta-"+r),a&&(r="Shift-"+r),r}function dx(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const Zxe=zg.default(bt.domEventHandlers({keydown(t,e){return _Z(bZ(e.state),t,e,"editor")}})),eS=St.define({enables:Zxe}),iB=new WeakMap;function bZ(t){let e=t.facet(eS),n=iB.get(e);return n||iB.set(e,n=tCe(e.reduce((r,i)=>r.concat(i),[]))),n}function Qxe(t,e,n){return _Z(bZ(t.state),e,t,n)}let yh=null;const eCe=4e3;function tCe(t,e=Xxe){let n=Object.create(null),r=Object.create(null),i=(a,s)=>{let l=r[a];if(l==null)r[a]=s;else if(l!=s)throw new Error("Key binding "+a+" is used both as a regular binding and as a multi-stroke prefix")},o=(a,s,l,u,c)=>{var f,h;let d=n[a]||(n[a]=Object.create(null)),g=s.split(/ (?!$)/).map(v=>Jxe(v,e));for(let v=1;v<g.length;v++){let S=g.slice(0,v).join(" ");i(S,!0),d[S]||(d[S]={preventDefault:!0,stopPropagation:!1,run:[C=>{let k=yh={view:C,prefix:S,scope:a};return setTimeout(()=>{yh==k&&(yh=null)},eCe),!0}]})}let y=g.join(" ");i(y,!1);let _=d[y]||(d[y]={preventDefault:!1,stopPropagation:!1,run:((h=(f=d._any)===null||f===void 0?void 0:f.run)===null||h===void 0?void 0:h.slice())||[]});l&&_.run.push(l),u&&(_.preventDefault=!0),c&&(_.stopPropagation=!0)};for(let a of t){let s=a.scope?a.scope.split(" "):["editor"];if(a.any)for(let u of s){let c=n[u]||(n[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let f in c)c[f].run.push(a.any)}let l=a[e]||a.key;if(l)for(let u of s)o(u,l,a.run,a.preventDefault,a.stopPropagation),a.shift&&o(u,"Shift-"+l,a.shift,a.preventDefault,a.stopPropagation)}return n}function _Z(t,e,n,r){let i=Dwe(e),o=wo(i,0),a=Sl(o)==i.length&&i!=" ",s="",l=!1,u=!1,c=!1;yh&&yh.view==n&&yh.scope==r&&(s=yh.prefix+" ",aZ.indexOf(e.keyCode)<0&&(u=!0,yh=null));let f=new Set,h=_=>{if(_){for(let v of _.run)if(!f.has(v)&&(f.add(v),v(n,e)))return _.stopPropagation&&(c=!0),!0;_.preventDefault&&(_.stopPropagation&&(c=!0),u=!0)}return!1},d=t[r],g,y;return d&&(h(d[s+dx(i,e,!a)])?l=!0:a&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Tt.windows&&e.ctrlKey&&e.altKey)&&(g=td[e.keyCode])&&g!=i?(h(d[s+dx(g,e,!0)])||e.shiftKey&&(y=R1[e.keyCode])!=i&&y!=g&&h(d[s+dx(y,e,!1)]))&&(l=!0):a&&e.shiftKey&&h(d[s+dx(i,e,!0)])&&(l=!0),!l&&h(d._any)&&(l=!0)),u&&(l=!0),l&&c&&e.stopPropagation(),l}class tS{constructor(e,n,r,i,o){this.className=e,this.left=n,this.top=r,this.width=i,this.height=o}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,r){if(r.empty){let i=e.coordsAtPos(r.head,r.assoc||1);if(!i)return[];let o=SZ(e);return[new tS(n,i.left-o.left,i.top-o.top,null,i.bottom-i.top)]}else return nCe(e,n,r)}}function SZ(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==fi.LTR?e.left:e.right-t.scrollDOM.clientWidth)-t.scrollDOM.scrollLeft,top:e.top-t.scrollDOM.scrollTop}}function oB(t,e,n){let r=Ze.cursor(e);return{from:Math.max(n.from,t.moveToLineBoundary(r,!1,!0).from),to:Math.min(n.to,t.moveToLineBoundary(r,!0,!0).from),type:di.Text}}function nCe(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let r=Math.max(n.from,t.viewport.from),i=Math.min(n.to,t.viewport.to),o=t.textDirection==fi.LTR,a=t.contentDOM,s=a.getBoundingClientRect(),l=SZ(t),u=a.querySelector(".cm-line"),c=u&&window.getComputedStyle(u),f=s.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),h=s.right-(c?parseInt(c.paddingRight):0),d=x$(t,r),g=x$(t,i),y=d.type==di.Text?d:null,_=g.type==di.Text?g:null;if(y&&(t.lineWrapping||d.widgetLineBreaks)&&(y=oB(t,r,y)),_&&(t.lineWrapping||g.widgetLineBreaks)&&(_=oB(t,i,_)),y&&_&&y.from==_.from)return S(C(n.from,n.to,y));{let x=y?C(n.from,null,y):k(d,!1),m=_?C(null,n.to,_):k(g,!0),T=[];return(y||d).to<(_||g).from-(y&&_?1:0)||d.widgetLineBreaks>1&&x.bottom+t.defaultLineHeight/2<m.top?T.push(v(f,x.bottom,h,m.top)):x.bottom<m.top&&t.elementAtHeight((x.bottom+m.top)/2).type==di.Text&&(x.bottom=m.top=(x.bottom+m.top)/2),S(x).concat(T).concat(S(m))}function v(x,m,T,P){return new tS(e,x-l.left,m-l.top-.01,T-x,P-m+.01)}function S({top:x,bottom:m,horizontal:T}){let P=[];for(let I=0;I<T.length;I+=2)P.push(v(T[I],x,T[I+1],m));return P}function C(x,m,T){let P=1e9,I=-1e9,M=[];function L(z,ie,oe,Se,Ae){let Ee=t.coordsAtPos(z,z==T.to?-2:2),_e=t.coordsAtPos(oe,oe==T.from?2:-2);!Ee||!_e||(P=Math.min(Ee.top,_e.top,P),I=Math.max(Ee.bottom,_e.bottom,I),Ae==fi.LTR?M.push(o&&ie?f:Ee.left,o&&Se?h:_e.right):M.push(!o&&Se?f:_e.left,!o&&ie?h:Ee.right))}let R=x??T.from,V=m??T.to;for(let z of t.visibleRanges)if(z.to>R&&z.from<V)for(let ie=Math.max(z.from,R),oe=Math.min(z.to,V);;){let Se=t.state.doc.lineAt(ie);for(let Ae of t.bidiSpans(Se)){let Ee=Ae.from+Se.from,_e=Ae.to+Se.from;if(Ee>=oe)break;_e>ie&&L(Math.max(Ee,ie),x==null&&Ee<=R,Math.min(_e,oe),m==null&&_e>=V,Ae.dir)}if(ie=Se.to+1,ie>=oe)break}return M.length==0&&L(R,x==null,V,m==null,t.textDirection),{top:P,bottom:I,horizontal:M}}function k(x,m){let T=s.top+(m?x.top:x.bottom);return{top:T,bottom:T,horizontal:[]}}}function rCe(t,e){return t.constructor==e.constructor&&t.eq(e)}class iCe{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(n2)!=e.state.facet(n2)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&e.view.requestMeasure(this.measureReq)}setOrder(e){let n=0,r=e.facet(n2);for(;n<r.length&&r[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}draw(e){if(e.length!=this.drawn.length||e.some((n,r)=>!rCe(n,this.drawn[r]))){let n=this.dom.firstChild,r=0;for(let i of e)i.update&&n&&i.constructor&&this.drawn[r].constructor&&i.update(n,this.drawn[r])?(n=n.nextSibling,r++):this.dom.insertBefore(i.draw(),n);for(;n;){let i=n.nextSibling;n.remove(),n=i}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const n2=St.define();function wZ(t){return[Fi.define(e=>new iCe(e,t)),n2.of(t)]}const xZ=!Tt.ios,B1=St.define({combine(t){return _u(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function oCe(t={}){return[B1.of(t),aCe,sCe,lCe,KJ.of(!0)]}function CZ(t){return t.startState.facet(B1)!=t.state.facet(B1)}const aCe=wZ({above:!0,markers(t){let{state:e}=t,n=e.facet(B1),r=[];for(let i of e.selection.ranges){let o=i==e.selection.main;if(i.empty?!o||xZ:n.drawRangeCursor){let a=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",s=i.empty?i:Ze.cursor(i.head,i.head>i.anchor?-1:1);for(let l of tS.forRange(t,a,s))r.push(l)}}return r},update(t,e){t.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=CZ(t);return n&&aB(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){aB(e.state,t)},class:"cm-cursorLayer"});function aB(t,e){e.style.animationDuration=t.facet(B1).cursorBlinkRate+"ms"}const sCe=wZ({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:tS.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||CZ(t)},class:"cm-selectionLayer"}),kZ={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};xZ&&(kZ[".cm-line"].caretColor="transparent !important");const lCe=zg.highest(bt.theme(kZ)),TZ=un.define({map(t,e){return t==null?null:e.mapPos(t)}}),Tb=Ui.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((n,r)=>r.is(TZ)?r.value:n,t)}}),uCe=Fi.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(Tb);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(Tb)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let t=this.view.state.field(Tb),e=t!=null&&this.view.coordsAtPos(t);if(!e)return null;let n=this.view.scrollDOM.getBoundingClientRect();return{left:e.left-n.left+this.view.scrollDOM.scrollLeft,top:e.top-n.top+this.view.scrollDOM.scrollTop,height:e.bottom-e.top}}drawCursor(t){this.cursor&&(t?(this.cursor.style.left=t.left+"px",this.cursor.style.top=t.top+"px",this.cursor.style.height=t.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(Tb)!=t&&this.view.dispatch({effects:TZ.of(t)})}},{eventHandlers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function cCe(){return[Tb,uCe]}function sB(t,e,n,r,i){e.lastIndex=0;for(let o=t.iterRange(n,r),a=n,s;!o.next().done;a+=o.value.length)if(!o.lineBreak)for(;s=e.exec(o.value);)i(a+s.index,s)}function fCe(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let r=[];for(let{from:i,to:o}of n)i=Math.max(t.state.doc.lineAt(i).from,i-e),o=Math.min(t.state.doc.lineAt(o).to,o+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=o:r.push({from:i,to:o});return r}class hCe{constructor(e){const{regexp:n,decoration:r,decorate:i,boundary:o,maxLength:a=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,i)this.addMatch=(s,l,u,c)=>i(c,u,u+s[0].length,s,l);else if(typeof r=="function")this.addMatch=(s,l,u,c)=>{let f=r(s,l,u);f&&c(u,u+s[0].length,f)};else if(r)this.addMatch=(s,l,u,c)=>c(u,u+s[0].length,r);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=o,this.maxLength=a}createDeco(e){let n=new Qh,r=n.add.bind(n);for(let{from:i,to:o}of fCe(e,this.maxLength))sB(e.state.doc,this.regexp,i,o,(a,s)=>this.addMatch(s,e,a,r));return n.finish()}updateDeco(e,n){let r=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((o,a,s,l)=>{l>e.view.viewport.from&&s<e.view.viewport.to&&(r=Math.min(s,r),i=Math.max(l,i))}),e.viewportChanged||i-r>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,n.map(e.changes),r,i):n}updateRange(e,n,r,i){for(let o of e.visibleRanges){let a=Math.max(o.from,r),s=Math.min(o.to,i);if(s>a){let l=e.state.doc.lineAt(a),u=l.to<s?e.state.doc.lineAt(s):l,c=Math.max(o.from,l.from),f=Math.min(o.to,u.to);if(this.boundary){for(;a>l.from;a--)if(this.boundary.test(l.text[a-1-l.from])){c=a;break}for(;s<u.to;s++)if(this.boundary.test(u.text[s-u.from])){f=s;break}}let h=[],d,g=(y,_,v)=>h.push(v.range(y,_));if(l==u)for(this.regexp.lastIndex=c-l.from;(d=this.regexp.exec(l.text))&&d.index<f-l.from;)this.addMatch(d,e,d.index+l.from,g);else sB(e.state.doc,this.regexp,c,f,(y,_)=>this.addMatch(_,e,y,g));n=n.update({filterFrom:c,filterTo:f,filter:(y,_)=>y<c||_>f,add:h})}}return n}}const P$=/x/.unicode!=null?"gu":"g",dCe=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,P$),pCe={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let VO=null;function gCe(){var t;if(VO==null&&typeof document<"u"&&document.body){let e=document.body.style;VO=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return VO||!1}const r2=St.define({combine(t){let e=_u(t,{render:null,specialChars:dCe,addSpecialChars:null});return(e.replaceTabs=!gCe())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,P$)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,P$)),e}});function mCe(t={}){return[r2.of(t),vCe()]}let lB=null;function vCe(){return lB||(lB=Fi.fromClass(class{constructor(t){this.view=t,this.decorations=Ut.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(r2)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new hCe({regexp:t.specialChars,decoration:(e,n,r)=>{let{doc:i}=n.state,o=wo(e[0],0);if(o==9){let a=i.lineAt(r),s=n.state.tabSize,l=J_(a.text,s,r-a.from);return Ut.replace({widget:new SCe((s-l%s)*this.view.defaultCharacterWidth)})}return this.decorationCache[o]||(this.decorationCache[o]=Ut.replace({widget:new _Ce(t,o)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(r2);t.startState.facet(r2)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const yCe="•";function bCe(t){return t>=32?yCe:t==10?"␤":String.fromCharCode(9216+t)}class _Ce extends $f{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=bCe(this.code),r=e.state.phrase("Control character")+" "+(pCe[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,n);if(i)return i;let o=document.createElement("span");return o.textContent=n,o.title=r,o.setAttribute("aria-label",r),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class SCe extends $f{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function wCe(){return CCe}const xCe=Ut.line({class:"cm-activeLine"}),CCe=Fi.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){let i=t.lineBlockAt(r.head);i.from>e&&(n.push(xCe.range(i.from)),e=i.from)}return Ut.set(n)}},{decorations:t=>t.decorations});class kCe extends $f{constructor(e){super(),this.content=e}toDOM(){let e=document.createElement("span");return e.className="cm-placeholder",e.style.pointerEvents="none",e.appendChild(typeof this.content=="string"?document.createTextNode(this.content):this.content),typeof this.content=="string"?e.setAttribute("aria-label","placeholder "+this.content):e.setAttribute("aria-hidden","true"),e}coordsAt(e){let n=e.firstChild?t0(e.firstChild):[];if(!n.length)return null;let r=window.getComputedStyle(e.parentNode),i=bA(n[0],r.direction!="rtl"),o=parseInt(r.lineHeight);return i.bottom-i.top>o*1.5?{left:i.left,right:i.right,top:i.top,bottom:i.top+o}:i}ignoreEvent(){return!1}}function TCe(t){return Fi.fromClass(class{constructor(e){this.view=e,this.placeholder=t?Ut.set([Ut.widget({widget:new kCe(t),side:1}).range(0)]):Ut.none}get decorations(){return this.view.state.doc.length?Ut.none:this.placeholder}},{decorations:e=>e.decorations})}const O$=2e3;function ACe(t,e,n){let r=Math.min(e.line,n.line),i=Math.max(e.line,n.line),o=[];if(e.off>O$||n.off>O$||e.col<0||n.col<0){let a=Math.min(e.off,n.off),s=Math.max(e.off,n.off);for(let l=r;l<=i;l++){let u=t.doc.line(l);u.length<=s&&o.push(Ze.range(u.from+a,u.to+s))}}else{let a=Math.min(e.col,n.col),s=Math.max(e.col,n.col);for(let l=r;l<=i;l++){let u=t.doc.line(l),c=u$(u.text,a,t.tabSize,!0);if(c<0)o.push(Ze.cursor(u.to));else{let f=u$(u.text,s,t.tabSize);o.push(Ze.range(u.from+c,u.from+f))}}}return o}function ECe(t,e){let n=t.coordsAtPos(t.viewport.from);return n?Math.round(Math.abs((n.left-e)/t.defaultCharacterWidth)):-1}function uB(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1),r=t.state.doc.lineAt(n),i=n-r.from,o=i>O$?-1:i==r.length?ECe(t,e.clientX):J_(r.text,t.state.tabSize,n-r.from);return{line:r.number,col:o,off:i}}function PCe(t,e){let n=uB(t,e),r=t.state.selection;return n?{update(i){if(i.docChanged){let o=i.changes.mapPos(i.startState.doc.line(n.line).from),a=i.state.doc.lineAt(o);n={line:a.number,col:n.col,off:Math.min(n.off,a.length)},r=r.map(i.changes)}},get(i,o,a){let s=uB(t,i);if(!s)return r;let l=ACe(t.state,n,s);return l.length?a?Ze.create(l.concat(r.ranges)):Ze.create(l):r}}:null}function OCe(t){let e=(t==null?void 0:t.eventFilter)||(n=>n.altKey&&n.button==0);return bt.mouseSelectionStyle.of((n,r)=>e(r)?PCe(n,r):null)}const ICe={Alt:[18,t=>!!t.altKey],Control:[17,t=>!!t.ctrlKey],Shift:[16,t=>!!t.shiftKey],Meta:[91,t=>!!t.metaKey]},$Ce={style:"cursor: crosshair"};function LCe(t={}){let[e,n]=ICe[t.key||"Alt"],r=Fi.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventHandlers:{keydown(i){this.set(i.keyCode==e||n(i))},keyup(i){(i.keyCode==e||!n(i))&&this.set(!1)},mousemove(i){this.set(n(i))}}});return[r,bt.contentAttributes.of(i=>{var o;return!((o=i.plugin(r))===null||o===void 0)&&o.isDown?$Ce:null})]}const px="-10000px";class AZ{constructor(e,n,r){this.facet=n,this.createTooltipView=r,this.input=e.state.facet(n),this.tooltips=this.input.filter(i=>i),this.tooltipViews=this.tooltips.map(r)}update(e){var n;let r=e.state.facet(this.facet),i=r.filter(a=>a);if(r===this.input){for(let a of this.tooltipViews)a.update&&a.update(e);return!1}let o=[];for(let a=0;a<i.length;a++){let s=i[a],l=-1;if(s){for(let u=0;u<this.tooltips.length;u++){let c=this.tooltips[u];c&&c.create==s.create&&(l=u)}if(l<0)o[a]=this.createTooltipView(s);else{let u=o[a]=this.tooltipViews[l];u.update&&u.update(e)}}}for(let a of this.tooltipViews)o.indexOf(a)<0&&(a.dom.remove(),(n=a.destroy)===null||n===void 0||n.call(a));return this.input=r,this.tooltips=i,this.tooltipViews=o,!0}}function DCe(t){let{win:e}=t;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const BO=St.define({combine:t=>{var e,n,r;return{position:Tt.ios?"absolute":((e=t.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(i=>i.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((r=t.find(i=>i.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||DCe}}}),cB=new WeakMap,EZ=Fi.fromClass(class{constructor(t){this.view=t,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(BO);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new AZ(t,wA,n=>this.createTooltip(n)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t);e&&this.observeIntersection();let n=e||t.geometryChanged,r=t.state.facet(BO);if(r.position!=this.position){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t){let e=t.create(this.view);if(e.dom.classList.add("cm-tooltip"),t.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let n=document.createElement("div");n.className="cm-tooltip-arrow",e.dom.appendChild(n)}return e.dom.style.position=this.position,e.dom.style.top=px,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var t,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),(t=n.destroy)===null||t===void 0||t.call(n);(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=this.view.dom.getBoundingClientRect();return{editor:t,parent:this.parent?this.container.getBoundingClientRect():t,pos:this.manager.tooltips.map((e,n)=>{let r=this.manager.tooltipViews[n];return r.getCoords?r.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(BO).tooltipSpace(this.view)}}writeMeasure(t){var e;let{editor:n,space:r}=t,i=[];for(let o=0;o<this.manager.tooltips.length;o++){let a=this.manager.tooltips[o],s=this.manager.tooltipViews[o],{dom:l}=s,u=t.pos[o],c=t.size[o];if(!u||u.bottom<=Math.max(n.top,r.top)||u.top>=Math.min(n.bottom,r.bottom)||u.right<Math.max(n.left,r.left)-.1||u.left>Math.min(n.right,r.right)+.1){l.style.top=px;continue}let f=a.arrow?s.dom.querySelector(".cm-tooltip-arrow"):null,h=f?7:0,d=c.right-c.left,g=(e=cB.get(s))!==null&&e!==void 0?e:c.bottom-c.top,y=s.offset||NCe,_=this.view.textDirection==fi.LTR,v=c.width>r.right-r.left?_?r.left:r.right-c.width:_?Math.min(u.left-(f?14:0)+y.x,r.right-d):Math.max(r.left,u.left-d+(f?14:0)-y.x),S=!!a.above;!a.strictSide&&(S?u.top-(c.bottom-c.top)-y.y<r.top:u.bottom+(c.bottom-c.top)+y.y>r.bottom)&&S==r.bottom-u.bottom>u.top-r.top&&(S=!S);let C=(S?u.top-r.top:r.bottom-u.bottom)-h;if(C<g&&s.resize!==!1){if(C<this.view.defaultLineHeight){l.style.top=px;continue}cB.set(s,g),l.style.height=(g=C)+"px"}else l.style.height&&(l.style.height="");let k=S?u.top-g-h-y.y:u.bottom+h+y.y,x=v+d;if(s.overlap!==!0)for(let m of i)m.left<x&&m.right>v&&m.top<k+g&&m.bottom>k&&(k=S?m.top-g-2-h:m.bottom+h+2);this.position=="absolute"?(l.style.top=k-t.parent.top+"px",l.style.left=v-t.parent.left+"px"):(l.style.top=k+"px",l.style.left=v+"px"),f&&(f.style.left=`${u.left+(_?y.x:-y.x)-(v+14-7)}px`),s.overlap!==!0&&i.push({left:v,top:k,right:x,bottom:k+g}),l.classList.toggle("cm-tooltip-above",S),l.classList.toggle("cm-tooltip-below",!S),s.positioned&&s.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=px}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),MCe=bt.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),NCe={x:0,y:0},wA=St.define({enables:[EZ,MCe]}),lk=St.define();class _N{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new AZ(e,lk,n=>this.createHostedView(n))}static create(e){return new _N(e)}createHostedView(e){let n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(n.dom),this.mounted&&n.mount&&n.mount(this.view),n}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}}const FCe=wA.compute([lk],t=>{let e=t.facet(lk).filter(n=>n);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.filter(n=>n.end!=null).map(n=>n.end)),create:_N.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class RCe{constructor(e,n,r,i,o){this.view=e,this.source=n,this.field=r,this.setHover=i,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,n=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(n==null)return;let r=this.view.coordsAtPos(n);if(r==null||e.y<r.top||e.y>r.bottom||e.x<r.left-this.view.defaultCharacterWidth||e.x>r.right+this.view.defaultCharacterWidth)return;let i=this.view.bidiSpans(this.view.state.doc.lineAt(n)).find(s=>s.from<=n&&s.to>=n),o=i&&i.dir==fi.RTL?-1:1,a=this.source(this.view,n,e.x<r.left?-o:o);if(a!=null&&a.then){let s=this.pending={pos:n};a.then(l=>{this.pending==s&&(this.pending=null,l&&this.view.dispatch({effects:this.setHover.of(l)}))},l=>Vs(this.view.state,l,"hover tooltip"))}else a&&this.view.dispatch({effects:this.setHover.of(a)})}mousemove(e){var n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let r=this.active;if(r&&!fB(this.lastMove.target)||this.pending){let{pos:i}=r||this.pending,o=(n=r==null?void 0:r.end)!==null&&n!==void 0?n:i;(i==o?this.view.posAtCoords(this.lastMove)!=i:!VCe(this.view,i,o,e.clientX,e.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!fB(e.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function fB(t){for(let e=t;e;e=e.parentNode)if(e.nodeType==1&&e.classList.contains("cm-tooltip"))return!0;return!1}function VCe(t,e,n,r,i,o){let a=document.createRange(),s=t.domAtPos(e),l=t.domAtPos(n);a.setEnd(l.node,l.offset),a.setStart(s.node,s.offset);let u=a.getClientRects();a.detach();for(let c=0;c<u.length;c++){let f=u[c];if(Math.max(f.top-i,i-f.bottom,f.left-r,r-f.right)<=o)return!0}return!1}function PZ(t,e={}){let n=un.define(),r=Ui.define({create(){return null},update(i,o){if(i&&(e.hideOnChange&&(o.docChanged||o.selection)||e.hideOn&&e.hideOn(o,i)))return null;if(i&&o.docChanged){let a=o.changes.mapPos(i.pos,-1,ko.TrackDel);if(a==null)return null;let s=Object.assign(Object.create(null),i);s.pos=a,i.end!=null&&(s.end=o.changes.mapPos(i.end)),i=s}for(let a of o.effects)a.is(n)&&(i=a.value),a.is(BCe)&&(i=null);return i},provide:i=>lk.from(i)});return[r,Fi.define(i=>new RCe(i,t,r,n,e.hoverTime||300)),FCe]}function OZ(t,e){let n=t.plugin(EZ);if(!n)return null;let r=n.manager.tooltips.indexOf(e);return r<0?null:n.manager.tooltipViews[r]}const BCe=un.define(),hB=St.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function z1(t,e){let n=t.plugin(IZ),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}const IZ=Fi.fromClass(class{constructor(t){this.input=t.state.facet(j1),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(hB);this.top=new gx(t,!0,e.topContainer),this.bottom=new gx(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(hB);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new gx(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new gx(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(j1);if(n!=this.input){let r=n.filter(l=>l),i=[],o=[],a=[],s=[];for(let l of r){let u=this.specs.indexOf(l),c;u<0?(c=l(t.view),s.push(c)):(c=this.panels[u],c.update&&c.update(t)),i.push(c),(c.top?o:a).push(c)}this.specs=r,this.panels=i,this.top.sync(o),this.bottom.sync(a);for(let l of s)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let r of this.panels)r.update&&r.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>bt.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class gx{constructor(e,n,r){this.view=e,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=dB(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=dB(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function dB(t){let e=t.nextSibling;return t.remove(),e}const j1=St.define({enables:IZ});class yc extends _g{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}yc.prototype.elementClass="";yc.prototype.toDOM=void 0;yc.prototype.mapMode=ko.TrackBefore;yc.prototype.startSide=yc.prototype.endSide=-1;yc.prototype.point=!0;const i2=St.define(),zCe={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>ar.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Zb=St.define();function xA(t){return[$Z(),Zb.of(Object.assign(Object.assign({},zCe),t))]}const I$=St.define({combine:t=>t.some(e=>e)});function $Z(t){let e=[jCe];return t&&t.fixed===!1&&e.push(I$.of(!0)),e}const jCe=Fi.fromClass(class{constructor(t){this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=t.state.facet(Zb).map(e=>new gB(t,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!t.state.facet(I$),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}t.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(I$)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&this.dom.remove();let n=ar.iter(this.view.state.facet(i2),this.view.viewport.from),r=[],i=this.gutters.map(o=>new UCe(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(o.type)){let a=!0;for(let s of o.type)if(s.type==di.Text&&a){$$(n,r,s.from);for(let l of i)l.line(this.view,s,r);a=!1}else if(s.widget)for(let l of i)l.widget(this.view,s)}else if(o.type==di.Text){$$(n,r,o.from);for(let a of i)a.line(this.view,o,r)}for(let o of i)o.finish();t&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(t){let e=t.startState.facet(Zb),n=t.state.facet(Zb),r=t.docChanged||t.heightChanged||t.viewportChanged||!ar.eq(t.startState.facet(i2),t.state.facet(i2),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let i of this.gutters)i.update(t)&&(r=!0);else{r=!0;let i=[];for(let o of n){let a=e.indexOf(o);a<0?i.push(new gB(this.view,o)):(this.gutters[a].update(t),i.push(this.gutters[a]))}for(let o of this.gutters)o.dom.remove(),i.indexOf(o)<0&&o.destroy();for(let o of i)this.dom.appendChild(o.dom);this.gutters=i}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove()}},{provide:t=>bt.scrollMargins.of(e=>{let n=e.plugin(t);return!n||n.gutters.length==0||!n.fixed?null:e.textDirection==fi.LTR?{left:n.dom.offsetWidth}:{right:n.dom.offsetWidth}})});function pB(t){return Array.isArray(t)?t:[t]}function $$(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class UCe{constructor(e,n,r){this.gutter=e,this.height=r,this.i=0,this.cursor=ar.iter(e.markers,n.from)}addElement(e,n,r){let{gutter:i}=this,o=n.top-this.height;if(this.i==i.elements.length){let a=new LZ(e,n.height,o,r);i.elements.push(a),i.dom.appendChild(a.dom)}else i.elements[this.i].update(e,n.height,o,r);this.height=n.bottom,this.i++}line(e,n,r){let i=[];$$(this.cursor,i,n.from),r.length&&(i=i.concat(r));let o=this.gutter.config.lineMarker(e,n,i);o&&i.unshift(o);let a=this.gutter;i.length==0&&!a.config.renderEmptyElements||this.addElement(e,n,i)}widget(e,n){let r=this.gutter.config.widgetMarker(e,n.widget,n);r&&this.addElement(e,n,[r])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class gB{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in n.domEventHandlers)this.dom.addEventListener(r,i=>{let o=i.target,a;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let l=o.getBoundingClientRect();a=(l.top+l.bottom)/2}else a=i.clientY;let s=e.lineBlockAtHeight(a-e.documentTop);n.domEventHandlers[r](e,s,i)&&i.preventDefault()});this.markers=pB(n.markers(e)),n.initialSpacer&&(this.spacer=new LZ(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=pB(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!ar.eq(this.markers,n,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class LZ{constructor(e,n,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,r,i)}update(e,n,r,i){this.height!=n&&(this.dom.style.height=(this.height=n)+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),WCe(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,n){let r="cm-gutterElement",i=this.dom.firstChild;for(let o=0,a=0;;){let s=a,l=o<n.length?n[o++]:null,u=!1;if(l){let c=l.elementClass;c&&(r+=" "+c);for(let f=a;f<this.markers.length;f++)if(this.markers[f].compare(l)){s=f,u=!0;break}}else s=this.markers.length;for(;a<s;){let c=this.markers[a++];if(c.toDOM){c.destroy(i);let f=i.nextSibling;i.remove(),i=f}}if(!l)break;l.toDOM&&(u?i=i.nextSibling:this.dom.insertBefore(l.toDOM(e),i)),u&&a++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}}function WCe(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const HCe=St.define(),av=St.define({combine(t){return _u(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let r=Object.assign({},e);for(let i in n){let o=r[i],a=n[i];r[i]=o?(s,l,u)=>o(s,l,u)||a(s,l,u):a}return r}})}});class zO extends yc{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function jO(t,e){return t.state.facet(av).formatNumber(e,t.state)}const GCe=Zb.compute([av],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(HCe)},lineMarker(e,n,r){return r.some(i=>i.toDOM)?null:new zO(jO(e,e.state.doc.lineAt(n.from).number))},widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(av)!=e.state.facet(av),initialSpacer(e){return new zO(jO(e,mB(e.state.doc.lines)))},updateSpacer(e,n){let r=jO(n.view,mB(n.view.state.doc.lines));return r==e.number?e:new zO(r)},domEventHandlers:t.facet(av).domEventHandlers}));function SN(t={}){return[av.of(t),$Z(),GCe]}function mB(t){let e=9;for(;e<t;)e=e*10+9;return e}const qCe=new class extends yc{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},YCe=i2.compute(["selection"],t=>{let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.head).from;i>n&&(n=i,e.push(qCe.range(i)))}return ar.of(e)});function KCe(){return YCe}const DZ=1024;let XCe=0;class UO{constructor(e,n){this.from=e,this.to=n}}class Pn{constructor(e={}){this.id=XCe++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=cs.match(e)),n=>{let r=e(n);return r===void 0?null:[this,r]}}}Pn.closedBy=new Pn({deserialize:t=>t.split(" ")});Pn.openedBy=new Pn({deserialize:t=>t.split(" ")});Pn.group=new Pn({deserialize:t=>t.split(" ")});Pn.contextHash=new Pn({perNode:!0});Pn.lookAhead=new Pn({perNode:!0});Pn.mounted=new Pn({perNode:!0});const JCe=Object.create(null);class cs{constructor(e,n,r,i=0){this.name=e,this.props=n,this.id=r,this.flags=i}static define(e){let n=e.props&&e.props.length?Object.create(null):JCe,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new cs(e.name||"",n,e.id,r);if(e.props){for(let o of e.props)if(Array.isArray(o)||(o=o(i)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[o[0].id]=o[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(Pn.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let i of r.split(" "))n[i]=e[r];return r=>{for(let i=r.prop(Pn.group),o=-1;o<(i?i.length:0);o++){let a=n[o<0?r.name:i[o]];if(a)return a}}}}cs.none=new cs("",Object.create(null),0,8);class wN{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let r of this.types){let i=null;for(let o of e){let a=o(r);a&&(i||(i=Object.assign({},r.props)),i[a[0].id]=a[1])}n.push(i?new cs(r.name,i,r.id,r.flags):r)}return new wN(n)}}const mx=new WeakMap,vB=new WeakMap;var so;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(so||(so={}));let Ao=class L${constructor(e,n,r,i,o){if(this.type=e,this.children=n,this.positions=r,this.length=i,this.props=null,o&&o.length){this.props=Object.create(null);for(let[a,s]of o)this.props[typeof a=="number"?a:a.id]=s}}toString(){let e=this.prop(Pn.mounted);if(e&&!e.overlay)return e.tree.toString();let n="";for(let r of this.children){let i=r.toString();i&&(n&&(n+=","),n+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new fk(this.topNode,e)}cursorAt(e,n=0,r=0){let i=mx.get(this)||this.topNode,o=new fk(i);return o.moveTo(e,n),mx.set(this,o._tree),o}get topNode(){return new U1(this,0,0,null)}resolve(e,n=0){let r=r0(mx.get(this)||this.topNode,e,n,!1);return mx.set(this,r),r}resolveInner(e,n=0){let r=r0(vB.get(this)||this.topNode,e,n,!0);return vB.set(this,r),r}iterate(e){let{enter:n,leave:r,from:i=0,to:o=this.length}=e,a=e.mode||0,s=(a&so.IncludeAnonymous)>0;for(let l=this.cursor(a|so.IncludeAnonymous);;){let u=!1;if(l.from<=o&&l.to>=i&&(!s&&l.type.isAnonymous||n(l)!==!1)){if(l.firstChild())continue;u=!0}for(;u&&r&&(s||!l.type.isAnonymous)&&r(l),!l.nextSibling();){if(!l.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:kN(cs.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,i)=>new L$(this.type,n,r,i,this.propValues),e.makeTree||((n,r,i)=>new L$(cs.none,n,r,i)))}static build(e){return QCe(e)}};Ao.empty=new Ao(cs.none,[],[],0);class xN{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new xN(this.buffer,this.index)}}class jg{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return cs.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],i=this.set.types[n],o=i.name;if(/\W/.test(o)&&!i.isError&&(o=JSON.stringify(o)),e+=4,r==e)return o;let a=[];for(;e<r;)a.push(this.childString(e)),e=this.buffer[e+3];return o+"("+a.join(",")+")"}findChild(e,n,r,i,o){let{buffer:a}=this,s=-1;for(let l=e;l!=n&&!(MZ(o,i,a[l+1],a[l+2])&&(s=l,r>0));l=a[l+3]);return s}slice(e,n,r){let i=this.buffer,o=new Uint16Array(n-e),a=0;for(let s=e,l=0;s<n;){o[l++]=i[s++],o[l++]=i[s++]-r;let u=o[l++]=i[s++]-r;o[l++]=i[s++]-e,a=Math.max(a,u)}return new jg(o,a,this.set)}}function MZ(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function NZ(t,e){let n=t.childBefore(e);for(;n;){let r=n.lastChild;if(!r||r.to!=n.to)break;r.type.isError&&r.from==r.to?(t=n,n=r.prevSibling):n=r}return t}function r0(t,e,n,r){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let a=!r&&t instanceof U1&&t.index<0?null:t.parent;if(!a)return t;t=a}let o=r?0:so.IgnoreOverlays;if(r)for(let a=t,s=a.parent;s;a=s,s=a.parent)a instanceof U1&&a.index<0&&((i=s.enter(e,n,o))===null||i===void 0?void 0:i.from)!=a.from&&(t=s);for(;;){let a=t.enter(e,n,o);if(!a)return t;t=a}}let U1=class o2{constructor(e,n,r,i){this._tree=e,this.from=n,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,i,o=0){for(let a=this;;){for(let{children:s,positions:l}=a._tree,u=n>0?s.length:-1;e!=u;e+=n){let c=s[e],f=l[e]+a.from;if(MZ(i,r,f,f+c.length)){if(c instanceof jg){if(o&so.ExcludeBuffers)continue;let h=c.findChild(0,c.buffer.length,n,r-f,i);if(h>-1)return new wh(new ZCe(a,c,e,f),null,h)}else if(o&so.IncludeAnonymous||!c.type.isAnonymous||CN(c)){let h;if(!(o&so.IgnoreMounts)&&c.props&&(h=c.prop(Pn.mounted))&&!h.overlay)return new o2(h.tree,f,e,a);let d=new o2(c,f,e,a);return o&so.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(n<0?c.children.length-1:0,n,r,i)}}}if(o&so.IncludeAnonymous||!a.type.isAnonymous||(a.index>=0?e=a.index+n:e=n<0?-1:a._parent._tree.children.length,a=a._parent,!a))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,r=0){let i;if(!(r&so.IgnoreOverlays)&&(i=this._tree.prop(Pn.mounted))&&i.overlay){let o=e-this.from;for(let{from:a,to:s}of i.overlay)if((n>0?a<=o:a<o)&&(n<0?s>=o:s>o))return new o2(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new fk(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,n=0){return r0(this,e,n,!1)}resolveInner(e,n=0){return r0(this,e,n,!0)}enterUnfinishedNodesBefore(e){return NZ(this,e)}getChild(e,n=null,r=null){let i=uk(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return uk(this,e,n,r)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return ck(this,e)}};function uk(t,e,n,r){let i=t.cursor(),o=[];if(!i.firstChild())return o;if(n!=null){for(;!i.type.is(n);)if(!i.nextSibling())return o}for(;;){if(r!=null&&i.type.is(r))return o;if(i.type.is(e)&&o.push(i.node),!i.nextSibling())return r==null?o:[]}}function ck(t,e,n=e.length-1){for(let r=t.parent;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}class ZCe{constructor(e,n,r,i){this.parent=e,this.buffer=n,this.index=r,this.start=i}}class wh{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,r){this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,n,r){let{buffer:i}=this.context,o=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.context.start,r);return o<0?null:new wh(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,r=0){if(r&so.ExcludeBuffers)return null;let{buffer:i}=this.context,o=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return o<0?null:new wh(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new wh(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new wh(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}cursor(e=0){return new fk(this,e)}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,i=this.index+4,o=r.buffer[this.index+3];if(o>i){let a=r.buffer[this.index+1];e.push(r.slice(i,o,a)),n.push(0)}return new Ao(this.type,e,n,this.to-this.from)}resolve(e,n=0){return r0(this,e,n,!1)}resolveInner(e,n=0){return r0(this,e,n,!0)}enterUnfinishedNodesBefore(e){return NZ(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,n=null,r=null){let i=uk(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return uk(this,e,n,r)}get node(){return this}matchContext(e){return ck(this,e)}}class fk{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof U1)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=n||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof U1?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:i}=this.buffer,o=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.buffer.start,r);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?r&so.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&so.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&so.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(n.findChild(i,this.index,-1,0,4))}else{let i=n.buffer[this.index+3];if(i<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(i.buffer.buffer[o+3]<this.index)return!1;({index:n,parent:r}=i)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let o=n+e,a=e<0?-1:r._tree.children.length;o!=a;o+=e){let s=r._tree.children[o];if(this.mode&so.IncludeAnonymous||s instanceof jg||!s.type.isAnonymous||CN(s))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,o=this.stack.length;o>=0;){for(let a=e;a;a=a._parent)if(a.index==i){if(i==this.index)return a;n=a,r=o+1;break e}i=this.stack[--o]}for(let i=r;i<this.stack.length;i++)n=new wh(this.buffer,n,this.stack[i]);return this.bufferNode=new wh(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;i&&n&&n(this),i=this.type.isAnonymous,!this.nextSibling();){if(!r)return;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return ck(this.node,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let i=e.length-1,o=this.stack.length-1;i>=0;o--){if(o<0)return ck(this.node,e,i);let a=r[n.buffer[this.stack[o]]];if(!a.isAnonymous){if(e[i]&&e[i]!=a.name)return!1;i--}}return!0}}function CN(t){return t.children.some(e=>e instanceof jg||!e.type.isAnonymous||CN(e))}function QCe(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:i=DZ,reused:o=[],minRepeatType:a=r.types.length}=t,s=Array.isArray(n)?new xN(n,n.length):n,l=r.types,u=0,c=0;function f(k,x,m,T,P){let{id:I,start:M,end:L,size:R}=s,V=c;for(;R<0;)if(s.next(),R==-1){let Ae=o[I];m.push(Ae),T.push(M-k);return}else if(R==-3){u=I;return}else if(R==-4){c=I;return}else throw new RangeError(`Unrecognized record size: ${R}`);let z=l[I],ie,oe,Se=M-k;if(L-M<=i&&(oe=y(s.pos-x,P))){let Ae=new Uint16Array(oe.size-oe.skip),Ee=s.pos-oe.size,_e=Ae.length;for(;s.pos>Ee;)_e=_(oe.start,Ae,_e);ie=new jg(Ae,L-oe.start,r),Se=oe.start-k}else{let Ae=s.pos-R;s.next();let Ee=[],_e=[],se=I>=a?I:-1,ne=0,J=L;for(;s.pos>Ae;)se>=0&&s.id==se&&s.size>=0?(s.end<=J-i&&(d(Ee,_e,M,ne,s.end,J,se,V),ne=Ee.length,J=s.end),s.next()):f(M,Ae,Ee,_e,se);if(se>=0&&ne>0&&ne<Ee.length&&d(Ee,_e,M,ne,M,J,se,V),Ee.reverse(),_e.reverse(),se>-1&&ne>0){let B=h(z);ie=kN(z,Ee,_e,0,Ee.length,0,L-M,B,B)}else ie=g(z,Ee,_e,L-M,V-L)}m.push(ie),T.push(Se)}function h(k){return(x,m,T)=>{let P=0,I=x.length-1,M,L;if(I>=0&&(M=x[I])instanceof Ao){if(!I&&M.type==k&&M.length==T)return M;(L=M.prop(Pn.lookAhead))&&(P=m[I]+M.length+L)}return g(k,x,m,T,P)}}function d(k,x,m,T,P,I,M,L){let R=[],V=[];for(;k.length>T;)R.push(k.pop()),V.push(x.pop()+m-P);k.push(g(r.types[M],R,V,I-P,L-I)),x.push(P-m)}function g(k,x,m,T,P=0,I){if(u){let M=[Pn.contextHash,u];I=I?[M].concat(I):[M]}if(P>25){let M=[Pn.lookAhead,P];I=I?[M].concat(I):[M]}return new Ao(k,x,m,T,I)}function y(k,x){let m=s.fork(),T=0,P=0,I=0,M=m.end-i,L={size:0,start:0,skip:0};e:for(let R=m.pos-k;m.pos>R;){let V=m.size;if(m.id==x&&V>=0){L.size=T,L.start=P,L.skip=I,I+=4,T+=4,m.next();continue}let z=m.pos-V;if(V<0||z<R||m.start<M)break;let ie=m.id>=a?4:0,oe=m.start;for(m.next();m.pos>z;){if(m.size<0)if(m.size==-3)ie+=4;else break e;else m.id>=a&&(ie+=4);m.next()}P=oe,T+=V,I+=ie}return(x<0||T==k)&&(L.size=T,L.start=P,L.skip=I),L.size>4?L:void 0}function _(k,x,m){let{id:T,start:P,end:I,size:M}=s;if(s.next(),M>=0&&T<a){let L=m;if(M>4){let R=s.pos-(M-4);for(;s.pos>R;)m=_(k,x,m)}x[--m]=L,x[--m]=I-k,x[--m]=P-k,x[--m]=T}else M==-3?u=T:M==-4&&(c=T);return m}let v=[],S=[];for(;s.pos>0;)f(t.start||0,t.bufferStart||0,v,S,-1);let C=(e=t.length)!==null&&e!==void 0?e:v.length?S[0]+v[0].length:0;return new Ao(l[t.topID],v.reverse(),S.reverse(),C)}const yB=new WeakMap;function a2(t,e){if(!t.isAnonymous||e instanceof jg||e.type!=t)return 1;let n=yB.get(e);if(n==null){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof Ao)){n=1;break}n+=a2(t,r)}yB.set(e,n)}return n}function kN(t,e,n,r,i,o,a,s,l){let u=0;for(let g=r;g<i;g++)u+=a2(t,e[g]);let c=Math.ceil(u*1.5/8),f=[],h=[];function d(g,y,_,v,S){for(let C=_;C<v;){let k=C,x=y[C],m=a2(t,g[C]);for(C++;C<v;C++){let T=a2(t,g[C]);if(m+T>=c)break;m+=T}if(C==k+1){if(m>c){let T=g[k];d(T.children,T.positions,0,T.children.length,y[k]+S);continue}f.push(g[k])}else{let T=y[C-1]+g[C-1].length-x;f.push(kN(t,g,y,k,C,x,T,null,l))}h.push(x+S-o)}}return d(e,n,r,i,0),(s||l)(f,h,a)}class ig{constructor(e,n,r,i,o=!1,a=!1){this.from=e,this.to=n,this.tree=r,this.offset=i,this.open=(o?1:0)|(a?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],r=!1){let i=[new ig(0,e.length,e,0,!1,r)];for(let o of n)o.to>e.length&&i.push(o);return i}static applyChanges(e,n,r=128){if(!n.length)return e;let i=[],o=1,a=e.length?e[0]:null;for(let s=0,l=0,u=0;;s++){let c=s<n.length?n[s]:null,f=c?c.fromA:1e9;if(f-l>=r)for(;a&&a.from<f;){let h=a;if(l>=h.from||f<=h.to||u){let d=Math.max(h.from,l)-u,g=Math.min(h.to,f)-u;h=d>=g?null:new ig(d,g,h.tree,h.offset+u,s>0,!!c)}if(h&&i.push(h),a.to>f)break;a=o<e.length?e[o++]:null}if(!c)break;l=c.toA,u=c.toA-c.toB}return i}}let FZ=class{startParse(e,n,r){return typeof e=="string"&&(e=new e2e(e)),r=r?r.length?r.map(i=>new UO(i.from,i.to)):[new UO(0,0)]:[new UO(0,e.length)],this.createParse(e,n||[],r)}parse(e,n,r){let i=this.startParse(e,n,r);for(;;){let o=i.advance();if(o)return o}}};class e2e{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new Pn({perNode:!0});let t2e=0;class Ku{constructor(e,n,r){this.set=e,this.base=n,this.modified=r,this.id=t2e++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let n=new Ku([],null,[]);if(n.set.push(n),e)for(let r of e.set)n.set.push(r);return n}static defineModifier(){let e=new hk;return n=>n.modified.indexOf(e)>-1?n:hk.get(n.base||n,n.modified.concat(e).sort((r,i)=>r.id-i.id))}}let n2e=0;class hk{constructor(){this.instances=[],this.id=n2e++}static get(e,n){if(!n.length)return e;let r=n[0].instances.find(s=>s.base==e&&r2e(n,s.modified));if(r)return r;let i=[],o=new Ku(i,e,n);for(let s of n)s.instances.push(o);let a=i2e(n);for(let s of e.set)if(!s.modified.length)for(let l of a)i.push(hk.get(s,l));return o}}function r2e(t,e){return t.length==e.length&&t.every((n,r)=>n==e[r])}function i2e(t){let e=[[]];for(let n=0;n<t.length;n++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(t[n]));return e.sort((n,r)=>r.length-n.length)}function RZ(t){let e=Object.create(null);for(let n in t){let r=t[n];Array.isArray(r)||(r=[r]);for(let i of n.split(" "))if(i){let o=[],a=2,s=i;for(let f=0;;){if(s=="..."&&f>0&&f+3==i.length){a=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(s);if(!h)throw new RangeError("Invalid path: "+i);if(o.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),f+=h[0].length,f==i.length)break;let d=i[f++];if(f==i.length&&d=="!"){a=0;break}if(d!="/")throw new RangeError("Invalid path: "+i);s=i.slice(f)}let l=o.length-1,u=o[l];if(!u)throw new RangeError("Invalid path: "+i);let c=new dk(r,a,l>0?o.slice(0,l):null);e[u]=c.sort(e[u])}}return VZ.add(e)}const VZ=new Pn;class dk{constructor(e,n,r,i){this.tags=e,this.mode=n,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}dk.empty=new dk([],2,null);function BZ(t,e){let n=Object.create(null);for(let o of t)if(!Array.isArray(o.tag))n[o.tag.id]=o.class;else for(let a of o.tag)n[a.id]=o.class;let{scope:r,all:i=null}=e||{};return{style:o=>{let a=i;for(let s of o)for(let l of s.set){let u=n[l.id];if(u){a=a?a+" "+u:u;break}}return a},scope:r}}function o2e(t,e){let n=null;for(let r of t){let i=r.style(e);i&&(n=n?n+" "+i:i)}return n}function a2e(t,e,n,r=0,i=t.length){let o=new s2e(r,Array.isArray(e)?e:[e],n);o.highlightRange(t.cursor(),r,i,"",o.highlighters),o.flush(i)}class s2e{constructor(e,n,r){this.at=e,this.highlighters=n,this.span=r,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,r,i,o){let{type:a,from:s,to:l}=e;if(s>=r||l<=n)return;a.isTop&&(o=this.highlighters.filter(d=>!d.scope||d.scope(a)));let u=i,c=l2e(e)||dk.empty,f=o2e(o,c.tags);if(f&&(u&&(u+=" "),u+=f,c.mode==1&&(i+=(i?" ":"")+f)),this.startSpan(e.from,u),c.opaque)return;let h=e.tree&&e.tree.prop(Pn.mounted);if(h&&h.overlay){let d=e.node.enter(h.overlay[0].from+s,1),g=this.highlighters.filter(_=>!_.scope||_.scope(h.tree.type)),y=e.firstChild();for(let _=0,v=s;;_++){let S=_<h.overlay.length?h.overlay[_]:null,C=S?S.from+s:l,k=Math.max(n,v),x=Math.min(r,C);if(k<x&&y)for(;e.from<x&&(this.highlightRange(e,k,x,i,o),this.startSpan(Math.min(x,e.to),u),!(e.to>=C||!e.nextSibling())););if(!S||C>r)break;v=S.to+s,v>n&&(this.highlightRange(d.cursor(),Math.max(n,S.from+s),Math.min(r,v),i,g),this.startSpan(v,u))}y&&e.parent()}else if(e.firstChild()){do if(!(e.to<=n)){if(e.from>=r)break;this.highlightRange(e,n,r,i,o),this.startSpan(Math.min(r,e.to),u)}while(e.nextSibling());e.parent()}}}function l2e(t){let e=t.type.prop(VZ);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const ft=Ku.define,vx=ft(),gh=ft(),bB=ft(gh),_B=ft(gh),mh=ft(),yx=ft(mh),WO=ft(mh),Uu=ft(),Yd=ft(Uu),Fu=ft(),Ru=ft(),D$=ft(),My=ft(D$),bx=ft(),Ge={comment:vx,lineComment:ft(vx),blockComment:ft(vx),docComment:ft(vx),name:gh,variableName:ft(gh),typeName:bB,tagName:ft(bB),propertyName:_B,attributeName:ft(_B),className:ft(gh),labelName:ft(gh),namespace:ft(gh),macroName:ft(gh),literal:mh,string:yx,docString:ft(yx),character:ft(yx),attributeValue:ft(yx),number:WO,integer:ft(WO),float:ft(WO),bool:ft(mh),regexp:ft(mh),escape:ft(mh),color:ft(mh),url:ft(mh),keyword:Fu,self:ft(Fu),null:ft(Fu),atom:ft(Fu),unit:ft(Fu),modifier:ft(Fu),operatorKeyword:ft(Fu),controlKeyword:ft(Fu),definitionKeyword:ft(Fu),moduleKeyword:ft(Fu),operator:Ru,derefOperator:ft(Ru),arithmeticOperator:ft(Ru),logicOperator:ft(Ru),bitwiseOperator:ft(Ru),compareOperator:ft(Ru),updateOperator:ft(Ru),definitionOperator:ft(Ru),typeOperator:ft(Ru),controlOperator:ft(Ru),punctuation:D$,separator:ft(D$),bracket:My,angleBracket:ft(My),squareBracket:ft(My),paren:ft(My),brace:ft(My),content:Uu,heading:Yd,heading1:ft(Yd),heading2:ft(Yd),heading3:ft(Yd),heading4:ft(Yd),heading5:ft(Yd),heading6:ft(Yd),contentSeparator:ft(Uu),list:ft(Uu),quote:ft(Uu),emphasis:ft(Uu),strong:ft(Uu),link:ft(Uu),monospace:ft(Uu),strikethrough:ft(Uu),inserted:ft(),deleted:ft(),changed:ft(),invalid:ft(),meta:bx,documentMeta:ft(bx),annotation:ft(bx),processingInstruction:ft(bx),definition:Ku.defineModifier(),constant:Ku.defineModifier(),function:Ku.defineModifier(),standard:Ku.defineModifier(),local:Ku.defineModifier(),special:Ku.defineModifier()};BZ([{tag:Ge.link,class:"tok-link"},{tag:Ge.heading,class:"tok-heading"},{tag:Ge.emphasis,class:"tok-emphasis"},{tag:Ge.strong,class:"tok-strong"},{tag:Ge.keyword,class:"tok-keyword"},{tag:Ge.atom,class:"tok-atom"},{tag:Ge.bool,class:"tok-bool"},{tag:Ge.url,class:"tok-url"},{tag:Ge.labelName,class:"tok-labelName"},{tag:Ge.inserted,class:"tok-inserted"},{tag:Ge.deleted,class:"tok-deleted"},{tag:Ge.literal,class:"tok-literal"},{tag:Ge.string,class:"tok-string"},{tag:Ge.number,class:"tok-number"},{tag:[Ge.regexp,Ge.escape,Ge.special(Ge.string)],class:"tok-string2"},{tag:Ge.variableName,class:"tok-variableName"},{tag:Ge.local(Ge.variableName),class:"tok-variableName tok-local"},{tag:Ge.definition(Ge.variableName),class:"tok-variableName tok-definition"},{tag:Ge.special(Ge.variableName),class:"tok-variableName2"},{tag:Ge.definition(Ge.propertyName),class:"tok-propertyName tok-definition"},{tag:Ge.typeName,class:"tok-typeName"},{tag:Ge.namespace,class:"tok-namespace"},{tag:Ge.className,class:"tok-className"},{tag:Ge.macroName,class:"tok-macroName"},{tag:Ge.propertyName,class:"tok-propertyName"},{tag:Ge.operator,class:"tok-operator"},{tag:Ge.comment,class:"tok-comment"},{tag:Ge.meta,class:"tok-meta"},{tag:Ge.invalid,class:"tok-invalid"},{tag:Ge.punctuation,class:"tok-punctuation"}]);var HO;const sv=new Pn;function u2e(t){return St.define({combine:t?e=>e.concat(t):void 0})}const c2e=new Pn;class uu{constructor(e,n,r=[],i=""){this.data=e,this.name=i,An.prototype.hasOwnProperty("tree")||Object.defineProperty(An.prototype,"tree",{get(){return ji(this)}}),this.parser=n,this.extension=[id.of(this),An.languageData.of((o,a,s)=>{let l=SB(o,a,s),u=l.type.prop(sv);if(!u)return[];let c=o.facet(u),f=l.type.prop(c2e);if(f){let h=l.resolve(a-l.from,s);for(let d of f)if(d.test(h,o)){let g=o.facet(d.facet);return d.type=="replace"?g:g.concat(c)}}return c})].concat(r)}isActiveAt(e,n,r=-1){return SB(e,n,r).type.prop(sv)==this.data}findRegions(e){let n=e.facet(id);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],i=(o,a)=>{if(o.prop(sv)==this.data){r.push({from:a,to:a+o.length});return}let s=o.prop(Pn.mounted);if(s){if(s.tree.prop(sv)==this.data){if(s.overlay)for(let l of s.overlay)r.push({from:l.from+a,to:l.to+a});else r.push({from:a,to:a+o.length});return}else if(s.overlay){let l=r.length;if(i(s.tree,s.overlay[0].from+a),r.length>l)return}}for(let l=0;l<o.children.length;l++){let u=o.children[l];u instanceof Ao&&i(u,o.positions[l]+a)}};return i(ji(e),0),r}get allowsNesting(){return!0}}uu.setState=un.define();function SB(t,e,n){let r=t.facet(id),i=ji(t).topNode;if(!r||r.allowsNesting)for(let o=i;o;o=o.enter(e,n,so.ExcludeBuffers))o.type.isTop&&(i=o);return i}class pk extends uu{constructor(e,n,r){super(e,n,[],r),this.parser=n}static define(e){let n=u2e(e.languageData);return new pk(n,e.parser.configure({props:[sv.add(r=>r.isTop?n:void 0)]}),e.name)}configure(e,n){return new pk(this.data,this.parser.configure(e),n||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function ji(t){let e=t.field(uu.state,!1);return e?e.tree:Ao.empty}class f2e{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let r=this.cursorPos-this.string.length;return e<r||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-r,n-r)}}let Ny=null;class gk{constructor(e,n,r=[],i,o,a,s,l){this.parser=e,this.state=n,this.fragments=r,this.tree=i,this.treeLen=o,this.viewport=a,this.skipped=s,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,n,r){return new gk(e,n,[],Ao.empty,0,r,[],null)}startParse(){return this.parser.startParse(new f2e(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=Ao.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(ig.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(ig.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Ny;Ny=this;try{return e()}finally{Ny=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=wB(e,n.from,n.to);return e}changes(e,n){let{fragments:r,tree:i,treeLen:o,viewport:a,skipped:s}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((u,c,f,h)=>l.push({fromA:u,toA:c,fromB:f,toB:h})),r=ig.applyChanges(r,l),i=Ao.empty,o=0,a={from:e.mapPos(a.from,-1),to:e.mapPos(a.to,1)},this.skipped.length){s=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),f=e.mapPos(u.to,-1);c<f&&s.push({from:c,to:f})}}}return new gk(this.parser,n,r,i,o,a,s,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:o}=this.skipped[r];i<e.to&&o>e.from&&(this.fragments=wB(this.fragments,i,o),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends FZ{createParse(n,r,i){let o=i[0].from,a=i[i.length-1].to;return{parsedPos:o,advance(){let l=Ny;if(l){for(let u of i)l.tempSkipped.push(u);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=a,new Ao(cs.none,[],[],a-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Ny}}function wB(t,e,n){return ig.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class i0{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new i0(n)}static init(e){let n=Math.min(3e3,e.doc.length),r=gk.create(e.facet(id).parser,e,{from:0,to:n});return r.work(20,n)||r.takeTree(),new i0(r)}}uu.state=Ui.define({create:i0.init,update(t,e){for(let n of e.effects)if(n.is(uu.setState))return n.value;return e.startState.facet(id)!=e.state.facet(id)?i0.init(e.state):t.apply(e)}});let zZ=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(zZ=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:500-100})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const GO=typeof navigator<"u"&&(!((HO=navigator.scheduling)===null||HO===void 0)&&HO.isInputPending)?()=>navigator.scheduling.isInputPending():null,h2e=Fi.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(uu.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(uu.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=zZ(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,o=r.field(uu.state);if(o.tree==o.context.tree&&o.context.isDone(i+1e5))return;let a=Date.now()+Math.min(this.chunkBudget,100,e&&!GO?Math.max(25,e.timeRemaining()-5):1e9),s=o.context.treeLen<i&&r.doc.length>i+1e3,l=o.context.work(()=>GO&&GO()||Date.now()>a,i+(s?0:1e5));this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:uu.setState.of(new i0(o.context))})),this.chunkBudget>0&&!(l&&!s)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>Vs(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),id=St.define({combine(t){return t.length?t[0]:null},enables:t=>[uu.state,h2e,bt.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class d2e{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const p2e=St.define(),nS=St.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function mk(t){let e=t.facet(nS);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function W1(t,e){let n="",r=t.tabSize,i=t.facet(nS)[0];if(i=="	"){for(;e>=r;)n+="	",e-=r;i=" "}for(let o=0;o<e;o++)n+=i;return n}function TN(t,e){t instanceof An&&(t=new CA(t));for(let r of t.state.facet(p2e)){let i=r(t,e);if(i!==void 0)return i}let n=ji(t.state);return n?g2e(t,n,e):null}class CA{constructor(e,n={}){this.state=e,this.options=n,this.unit=mk(e)}lineAt(e,n=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:o}=this.options;return i!=null&&i>=r.from&&i<=r.to?o&&i==e?{text:"",from:e}:(n<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,n);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,n=1){let{text:r,from:i}=this.lineAt(e,n),o=this.countColumn(r,e-i),a=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return a>-1&&(o+=a-this.countColumn(r,r.search(/\S|$/))),o}countColumn(e,n=e.length){return J_(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:r,from:i}=this.lineAt(e,n),o=this.options.overrideIndentation;if(o){let a=o(i);if(a>-1)return a}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const jZ=new Pn;function g2e(t,e,n){return UZ(e.resolveInner(n).enterUnfinishedNodesBefore(n),n,t)}function m2e(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function v2e(t){let e=t.type.prop(jZ);if(e)return e;let n=t.firstChild,r;if(n&&(r=n.type.prop(Pn.closedBy))){let i=t.lastChild,o=i&&r.indexOf(i.name)>-1;return a=>S2e(a,!0,1,void 0,o&&!m2e(a)?i.from:void 0)}return t.parent==null?y2e:null}function UZ(t,e,n){for(;t;t=t.parent){let r=v2e(t);if(r)return r(AN.create(n,e,t))}return null}function y2e(){return 0}class AN extends CA{constructor(e,n,r){super(e.state,e.options),this.base=e,this.pos=n,this.node=r}static create(e,n,r){return new AN(e,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(n.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(b2e(r,e))break;n=this.state.doc.lineAt(r.from)}return this.lineIndent(n.from)}continue(){let e=this.node.parent;return e?UZ(e,this.pos,this.base):0}}function b2e(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function _2e(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,o=t.state.doc.lineAt(n.from),a=i==null||i<=o.from?o.to:Math.min(o.to,i);for(let s=n.to;;){let l=e.childAfter(s);if(!l||l==r)return null;if(!l.type.isSkipped)return l.from<a?n:null;s=l.to}}function S2e(t,e,n,r,i){let o=t.textAfter,a=o.match(/^\s*/)[0].length,s=r&&o.slice(a,a+r.length)==r||i==t.pos+a,l=e?_2e(t):null;return l?s?t.column(l.from):t.column(l.to):t.baseIndent+(s?0:t.unit*n)}function xB({except:t,units:e=1}={}){return n=>{let r=t&&t.test(n.textAfter);return n.baseIndent+(r?0:e*n.unit)}}const w2e=200;function x2e(){return An.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:r}=t.newSelection.main,i=n.lineAt(r);if(r>i.from+w2e)return t;let o=n.sliceString(i.from,r);if(!e.some(u=>u.test(o)))return t;let{state:a}=t,s=-1,l=[];for(let{head:u}of a.selection.ranges){let c=a.doc.lineAt(u);if(c.from==s)continue;s=c.from;let f=TN(a,c.from);if(f==null)continue;let h=/^\s*/.exec(c.text)[0],d=W1(a,f);h!=d&&l.push({from:c.from,to:c.from+h.length,insert:d})}return l.length?[t,{changes:l,sequential:!0}]:t})}const C2e=St.define(),WZ=new Pn;function k2e(t){let e=t.firstChild,n=t.lastChild;return e&&e.to<n.from?{from:e.to,to:n.type.isError?t.to:n.from}:null}function T2e(t,e,n){let r=ji(t);if(r.length<n)return null;let i=r.resolveInner(n,1),o=null;for(let a=i;a;a=a.parent){if(a.to<=n||a.from>n)continue;if(o&&a.from<e)break;let s=a.type.prop(WZ);if(s&&(a.to<r.length-50||r.length==t.doc.length||!A2e(a))){let l=s(a,t);l&&l.from<=n&&l.from>=e&&l.to>n&&(o=l)}}return o}function A2e(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function vk(t,e,n){for(let r of t.facet(C2e)){let i=r(t,e,n);if(i)return i}return T2e(t,e,n)}function HZ(t,e){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return n>=r?void 0:{from:n,to:r}}const kA=un.define({map:HZ}),rS=un.define({map:HZ});function GZ(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(r=>r.from<=n&&r.to>=n)||e.push(t.lineBlockAt(n));return e}const wg=Ui.define({create(){return Ut.none},update(t,e){t=t.map(e.changes);for(let n of e.effects)n.is(kA)&&!E2e(t,n.value.from,n.value.to)?t=t.update({add:[CB.range(n.value.from,n.value.to)]}):n.is(rS)&&(t=t.update({filter:(r,i)=>n.value.from!=r||n.value.to!=i,filterFrom:n.value.from,filterTo:n.value.to}));if(e.selection){let n=!1,{head:r}=e.selection.main;t.between(r,r,(i,o)=>{i<r&&o>r&&(n=!0)}),n&&(t=t.update({filterFrom:r,filterTo:r,filter:(i,o)=>o<=r||i>=r}))}return t},provide:t=>bt.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(r,i)=>{n.push(r,i)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let r=t[n++],i=t[n++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(CB.range(r,i))}return Ut.set(e,!0)}});function yk(t,e,n){var r;let i=null;return(r=t.field(wg,!1))===null||r===void 0||r.between(e,n,(o,a)=>{(!i||i.from>o)&&(i={from:o,to:a})}),i}function E2e(t,e,n){let r=!1;return t.between(e,e,(i,o)=>{i==e&&o==n&&(r=!0)}),r}function qZ(t,e){return t.field(wg,!1)?e:e.concat(un.appendConfig.of(XZ()))}const P2e=t=>{for(let e of GZ(t)){let n=vk(t.state,e.from,e.to);if(n)return t.dispatch({effects:qZ(t.state,[kA.of(n),YZ(t,n)])}),!0}return!1},O2e=t=>{if(!t.state.field(wg,!1))return!1;let e=[];for(let n of GZ(t)){let r=yk(t.state,n.from,n.to);r&&e.push(rS.of(r),YZ(t,r,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function YZ(t,e,n=!0){let r=t.state.doc.lineAt(e.from).number,i=t.state.doc.lineAt(e.to).number;return bt.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${r} ${t.state.phrase("to")} ${i}.`)}const I2e=t=>{let{state:e}=t,n=[];for(let r=0;r<e.doc.length;){let i=t.lineBlockAt(r),o=vk(e,i.from,i.to);o&&n.push(kA.of(o)),r=(o?t.lineBlockAt(o.to):i).to+1}return n.length&&t.dispatch({effects:qZ(t.state,n)}),!!n.length},$2e=t=>{let e=t.state.field(wg,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(r,i)=>{n.push(rS.of({from:r,to:i}))}),t.dispatch({effects:n}),!0},L2e=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:P2e},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:O2e},{key:"Ctrl-Alt-[",run:I2e},{key:"Ctrl-Alt-]",run:$2e}],D2e={placeholderDOM:null,placeholderText:"…"},KZ=St.define({combine(t){return _u(t,D2e)}});function XZ(t){let e=[wg,F2e];return t&&e.push(KZ.of(t)),e}const CB=Ut.replace({widget:new class extends $f{toDOM(t){let{state:e}=t,n=e.facet(KZ),r=o=>{let a=t.lineBlockAt(t.posAtDOM(o.target)),s=yk(t.state,a.from,a.to);s&&t.dispatch({effects:rS.of(s)}),o.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(t,r);let i=document.createElement("span");return i.textContent=n.placeholderText,i.setAttribute("aria-label",e.phrase("folded code")),i.title=e.phrase("unfold"),i.className="cm-foldPlaceholder",i.onclick=r,i}}}),M2e={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class qO extends yc{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}}function N2e(t={}){let e=Object.assign(Object.assign({},M2e),t),n=new qO(e,!0),r=new qO(e,!1),i=Fi.fromClass(class{constructor(a){this.from=a.viewport.from,this.markers=this.buildMarkers(a)}update(a){(a.docChanged||a.viewportChanged||a.startState.facet(id)!=a.state.facet(id)||a.startState.field(wg,!1)!=a.state.field(wg,!1)||ji(a.startState)!=ji(a.state)||e.foldingChanged(a))&&(this.markers=this.buildMarkers(a.view))}buildMarkers(a){let s=new Qh;for(let l of a.viewportLineBlocks){let u=yk(a.state,l.from,l.to)?r:vk(a.state,l.from,l.to)?n:null;u&&s.add(l.from,l.from,u)}return s.finish()}}),{domEventHandlers:o}=e;return[i,xA({class:"cm-foldGutter",markers(a){var s;return((s=a.plugin(i))===null||s===void 0?void 0:s.markers)||ar.empty},initialSpacer(){return new qO(e,!1)},domEventHandlers:Object.assign(Object.assign({},o),{click:(a,s,l)=>{if(o.click&&o.click(a,s,l))return!0;let u=yk(a.state,s.from,s.to);if(u)return a.dispatch({effects:rS.of(u)}),!0;let c=vk(a.state,s.from,s.to);return c?(a.dispatch({effects:kA.of(c)}),!0):!1}})}),XZ()]}const F2e=bt.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class iS{constructor(e,n){this.specs=e;let r;function i(s){let l=ed.newName();return(r||(r=Object.create(null)))["."+l]=s,l}const o=typeof n.all=="string"?n.all:n.all?i(n.all):void 0,a=n.scope;this.scope=a instanceof uu?s=>s.prop(sv)==a.data:a?s=>s==a:void 0,this.style=BZ(e.map(s=>({tag:s.tag,class:s.class||i(Object.assign({},s,{tag:null}))})),{all:o}).style,this.module=r?new ed(r):null,this.themeType=n.themeType}static define(e,n){return new iS(e,n||{})}}const M$=St.define(),JZ=St.define({combine(t){return t.length?[t[0]]:null}});function YO(t){let e=t.facet(M$);return e.length?e:t.facet(JZ)}function EN(t,e){let n=[V2e],r;return t instanceof iS&&(t.module&&n.push(bt.styleModule.of(t.module)),r=t.themeType),e!=null&&e.fallback?n.push(JZ.of(t)):r?n.push(M$.computeN([bt.darkTheme],i=>i.facet(bt.darkTheme)==(r=="dark")?[t]:[])):n.push(M$.of(t)),n}class R2e{constructor(e){this.markCache=Object.create(null),this.tree=ji(e.state),this.decorations=this.buildDeco(e,YO(e.state))}update(e){let n=ji(e.state),r=YO(e.state),i=r!=YO(e.startState);n.length<e.view.viewport.to&&!i&&n.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(n!=this.tree||e.viewportChanged||i)&&(this.tree=n,this.decorations=this.buildDeco(e.view,r))}buildDeco(e,n){if(!n||!this.tree.length)return Ut.none;let r=new Qh;for(let{from:i,to:o}of e.visibleRanges)a2e(this.tree,n,(a,s,l)=>{r.add(a,s,this.markCache[l]||(this.markCache[l]=Ut.mark({class:l})))},i,o);return r.finish()}}const V2e=zg.high(Fi.fromClass(R2e,{decorations:t=>t.decorations})),B2e=iS.define([{tag:Ge.meta,color:"#404740"},{tag:Ge.link,textDecoration:"underline"},{tag:Ge.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Ge.emphasis,fontStyle:"italic"},{tag:Ge.strong,fontWeight:"bold"},{tag:Ge.strikethrough,textDecoration:"line-through"},{tag:Ge.keyword,color:"#708"},{tag:[Ge.atom,Ge.bool,Ge.url,Ge.contentSeparator,Ge.labelName],color:"#219"},{tag:[Ge.literal,Ge.inserted],color:"#164"},{tag:[Ge.string,Ge.deleted],color:"#a11"},{tag:[Ge.regexp,Ge.escape,Ge.special(Ge.string)],color:"#e40"},{tag:Ge.definition(Ge.variableName),color:"#00f"},{tag:Ge.local(Ge.variableName),color:"#30a"},{tag:[Ge.typeName,Ge.namespace],color:"#085"},{tag:Ge.className,color:"#167"},{tag:[Ge.special(Ge.variableName),Ge.macroName],color:"#256"},{tag:Ge.definition(Ge.propertyName),color:"#00c"},{tag:Ge.comment,color:"#940"},{tag:Ge.invalid,color:"#f00"}]),z2e=bt.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),ZZ=1e4,QZ="()[]{}",eQ=St.define({combine(t){return _u(t,{afterCursor:!0,brackets:QZ,maxScanDistance:ZZ,renderMatch:W2e})}}),j2e=Ut.mark({class:"cm-matchingBracket"}),U2e=Ut.mark({class:"cm-nonmatchingBracket"});function W2e(t){let e=[],n=t.matched?j2e:U2e;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const H2e=Ui.define({create(){return Ut.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],r=e.state.facet(eQ);for(let i of e.state.selection.ranges){if(!i.empty)continue;let o=ic(e.state,i.head,-1,r)||i.head>0&&ic(e.state,i.head-1,1,r)||r.afterCursor&&(ic(e.state,i.head,1,r)||i.head<e.state.doc.length&&ic(e.state,i.head+1,-1,r));o&&(n=n.concat(r.renderMatch(o,e.state)))}return Ut.set(n,!0)},provide:t=>bt.decorations.from(t)}),G2e=[H2e,z2e];function PN(t={}){return[eQ.of(t),G2e]}const q2e=new Pn;function N$(t,e,n){let r=t.prop(e<0?Pn.openedBy:Pn.closedBy);if(r)return r;if(t.name.length==1){let i=n.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[n[i+e]]}return null}function F$(t){let e=t.type.prop(q2e);return e?e(t.node):t}function ic(t,e,n,r={}){let i=r.maxScanDistance||ZZ,o=r.brackets||QZ,a=ji(t),s=a.resolveInner(e,n);for(let l=s;l;l=l.parent){let u=N$(l.type,n,o);if(u&&l.from<l.to){let c=F$(l);if(c&&(n>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return Y2e(t,e,n,l,c,u,o)}}return K2e(t,e,n,a,s.type,i,o)}function Y2e(t,e,n,r,i,o,a){let s=r.parent,l={from:i.from,to:i.to},u=0,c=s==null?void 0:s.cursor();if(c&&(n<0?c.childBefore(r.from):c.childAfter(r.to)))do if(n<0?c.to<=r.from:c.from>=r.to){if(u==0&&o.indexOf(c.type.name)>-1&&c.from<c.to){let f=F$(c);return{start:l,end:f?{from:f.from,to:f.to}:void 0,matched:!0}}else if(N$(c.type,n,a))u++;else if(N$(c.type,-n,a)){if(u==0){let f=F$(c);return{start:l,end:f&&f.from<f.to?{from:f.from,to:f.to}:void 0,matched:!1}}u--}}while(n<0?c.prevSibling():c.nextSibling());return{start:l,matched:!1}}function K2e(t,e,n,r,i,o,a){let s=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=a.indexOf(s);if(l<0||l%2==0!=n>0)return null;let u={from:n<0?e-1:e,to:n>0?e+1:e},c=t.doc.iterRange(e,n>0?t.doc.length:0),f=0;for(let h=0;!c.next().done&&h<=o;){let d=c.value;n<0&&(h+=d.length);let g=e+h*n;for(let y=n>0?0:d.length-1,_=n>0?d.length:-1;y!=_;y+=n){let v=a.indexOf(d[y]);if(!(v<0||r.resolveInner(g+y,1).type!=i))if(v%2==0==n>0)f++;else{if(f==1)return{start:u,end:{from:g+y,to:g+y+1},matched:v>>1==l>>1};f--}}n>0&&(h+=d.length)}return c.done?{start:u,matched:!1}:null}const X2e=Object.create(null),kB=[cs.none],TB=[],J2e=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])J2e[t]=Z2e(X2e,e);function KO(t,e){TB.indexOf(t)>-1||(TB.push(t),console.warn(e))}function Z2e(t,e){let n=null;for(let o of e.split(".")){let a=t[o]||Ge[o];a?typeof a=="function"?n?n=a(n):KO(o,`Modifier ${o} used at start of tag`):n?KO(o,`Tag ${o} used as modifier`):n=a:KO(o,`Unknown highlighting tag ${o}`)}if(!n)return 0;let r=e.replace(/ /g,"_"),i=cs.define({id:kB.length,name:r,props:[RZ({[r]:n})]});return kB.push(i),i.id}const Q2e=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),r=IN(t.state,n.from);return r.line?eke(t):r.block?nke(t):!1};function ON(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=t(e,n);return i?(r(n.update(i)),!0):!1}}const eke=ON(oke,0),tke=ON(tQ,0),nke=ON((t,e)=>tQ(t,e,ike(e)),0);function IN(t,e){let n=t.languageDataAt("commentTokens",e);return n.length?n[0]:{}}const Fy=50;function rke(t,{open:e,close:n},r,i){let o=t.sliceDoc(r-Fy,r),a=t.sliceDoc(i,i+Fy),s=/\s*$/.exec(o)[0].length,l=/^\s*/.exec(a)[0].length,u=o.length-s;if(o.slice(u-e.length,u)==e&&a.slice(l,l+n.length)==n)return{open:{pos:r-s,margin:s&&1},close:{pos:i+l,margin:l&&1}};let c,f;i-r<=2*Fy?c=f=t.sliceDoc(r,i):(c=t.sliceDoc(r,r+Fy),f=t.sliceDoc(i-Fy,i));let h=/^\s*/.exec(c)[0].length,d=/\s*$/.exec(f)[0].length,g=f.length-d-n.length;return c.slice(h,h+e.length)==e&&f.slice(g,g+n.length)==n?{open:{pos:r+h+e.length,margin:/\s/.test(c.charAt(h+e.length))?1:0},close:{pos:i-d-n.length,margin:/\s/.test(f.charAt(g-1))?1:0}}:null}function ike(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),i=n.to<=r.to?r:t.doc.lineAt(n.to),o=e.length-1;o>=0&&e[o].to>r.from?e[o].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function tQ(t,e,n=e.selection.ranges){let r=n.map(o=>IN(e,o.from).block);if(!r.every(o=>o))return null;let i=n.map((o,a)=>rke(e,r[a],o.from,o.to));if(t!=2&&!i.every(o=>o))return{changes:e.changes(n.map((o,a)=>i[a]?[]:[{from:o.from,insert:r[a].open+" "},{from:o.to,insert:" "+r[a].close}]))};if(t!=1&&i.some(o=>o)){let o=[];for(let a=0,s;a<i.length;a++)if(s=i[a]){let l=r[a],{open:u,close:c}=s;o.push({from:u.pos-l.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+l.close.length})}return{changes:o}}return null}function oke(t,e,n=e.selection.ranges){let r=[],i=-1;for(let{from:o,to:a}of n){let s=r.length,l=1e9,u=IN(e,o).line;if(u){for(let c=o;c<=a;){let f=e.doc.lineAt(c);if(f.from>i&&(o==a||a>f.from)){i=f.from;let h=/^\s*/.exec(f.text)[0].length,d=h==f.length,g=f.text.slice(h,h+u.length)==u?h:-1;h<f.text.length&&h<l&&(l=h),r.push({line:f,comment:g,token:u,indent:h,empty:d,single:!1})}c=f.to+1}if(l<1e9)for(let c=s;c<r.length;c++)r[c].indent<r[c].line.text.length&&(r[c].indent=l);r.length==s+1&&(r[s].single=!0)}}if(t!=2&&r.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:s,token:l,indent:u,empty:c,single:f}of r)(f||!c)&&o.push({from:s.from+u,insert:l+" "});let a=e.changes(o);return{changes:a,selection:e.selection.map(a,1)}}else if(t!=1&&r.some(o=>o.comment>=0)){let o=[];for(let{line:a,comment:s,token:l}of r)if(s>=0){let u=a.from+s,c=u+l.length;a.text[c-a.from]==" "&&c++,o.push({from:u,to:c})}return{changes:o}}return null}const R$=If.define(),ake=If.define(),ske=St.define(),nQ=St.define({combine(t){return _u(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(r,i)=>e(r,i)||n(r,i)})}});function lke(t){let e=0;return t.iterChangedRanges((n,r)=>e=r),e}const rQ=Ui.define({create(){return oc.empty},update(t,e){let n=e.state.facet(nQ),r=e.annotation(R$);if(r){let l=e.docChanged?Ze.single(lke(e.changes)):void 0,u=is.fromTransaction(e,l),c=r.side,f=c==0?t.undone:t.done;return u?f=bk(f,f.length,n.minDepth,u):f=aQ(f,e.startState.selection),new oc(c==0?r.rest:f,c==0?f:r.rest)}let i=e.annotation(ake);if((i=="full"||i=="before")&&(t=t.isolate()),e.annotation(Ji.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let o=is.fromTransaction(e),a=e.annotation(Ji.time),s=e.annotation(Ji.userEvent);return o?t=t.addChanges(o,a,s,n,e):e.selection&&(t=t.addSelection(e.startState.selection,a,s,n.newGroupDelay)),(i=="full"||i=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new oc(t.done.map(is.fromJSON),t.undone.map(is.fromJSON))}});function $N(t={}){return[rQ,nQ.of(t),bt.domEventHandlers({beforeinput(e,n){let r=e.inputType=="historyUndo"?iQ:e.inputType=="historyRedo"?V$:null;return r?(e.preventDefault(),r(n)):!1}})]}function TA(t,e){return function({state:n,dispatch:r}){if(!e&&n.readOnly)return!1;let i=n.field(rQ,!1);if(!i)return!1;let o=i.pop(t,n,e);return o?(r(o),!0):!1}}const iQ=TA(0,!1),V$=TA(1,!1),uke=TA(0,!0),cke=TA(1,!0);class is{constructor(e,n,r,i,o){this.changes=e,this.effects=n,this.mapped=r,this.startSelection=i,this.selectionsAfter=o}setSelAfter(e){return new is(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new is(e.changes&&Xi.fromJSON(e.changes),[],e.mapped&&cc.fromJSON(e.mapped),e.startSelection&&Ze.fromJSON(e.startSelection),e.selectionsAfter.map(Ze.fromJSON))}static fromTransaction(e,n){let r=kl;for(let i of e.startState.facet(ske)){let o=i(e);o.length&&(r=r.concat(o))}return!r.length&&e.changes.empty?null:new is(e.changes.invert(e.startState.doc),r,void 0,n||e.startState.selection,kl)}static selection(e){return new is(void 0,kl,void 0,void 0,e)}}function bk(t,e,n,r){let i=e+1>n+20?e-n-1:0,o=t.slice(i,e);return o.push(r),o}function fke(t,e){let n=[],r=!1;return t.iterChangedRanges((i,o)=>n.push(i,o)),e.iterChangedRanges((i,o,a,s)=>{for(let l=0;l<n.length;){let u=n[l++],c=n[l++];s>=u&&a<=c&&(r=!0)}}),r}function hke(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,r)=>n.empty!=e.ranges[r].empty).length===0}function oQ(t,e){return t.length?e.length?t.concat(e):t:e}const kl=[],dke=200;function aQ(t,e){if(t.length){let n=t[t.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-dke));return r.length&&r[r.length-1].eq(e)?t:(r.push(e),bk(t,t.length-1,1e9,n.setSelAfter(r)))}else return[is.selection([e])]}function pke(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function XO(t,e){if(!t.length)return t;let n=t.length,r=kl;for(;n;){let i=gke(t[n-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let o=t.slice(0,n);return o[n-1]=i,o}else e=i.mapped,n--,r=i.selectionsAfter}return r.length?[is.selection(r)]:kl}function gke(t,e,n){let r=oQ(t.selectionsAfter.length?t.selectionsAfter.map(s=>s.map(e)):kl,n);if(!t.changes)return is.selection(r);let i=t.changes.map(e),o=e.mapDesc(t.changes,!0),a=t.mapped?t.mapped.composeDesc(o):o;return new is(i,un.mapEffects(t.effects,e),a,t.startSelection.map(o),r)}const mke=/^(input\.type|delete)($|\.)/;class oc{constructor(e,n,r=0,i=void 0){this.done=e,this.undone=n,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new oc(this.done,this.undone):this}addChanges(e,n,r,i,o){let a=this.done,s=a[a.length-1];return s&&s.changes&&!s.changes.empty&&e.changes&&(!r||mke.test(r))&&(!s.selectionsAfter.length&&n-this.prevTime<i.newGroupDelay&&i.joinToEvent(o,fke(s.changes,e.changes))||r=="input.type.compose")?a=bk(a,a.length-1,i.minDepth,new is(e.changes.compose(s.changes),oQ(e.effects,s.effects),s.mapped,s.startSelection,kl)):a=bk(a,a.length,i.minDepth,e),new oc(a,kl,n,r)}addSelection(e,n,r,i){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:kl;return o.length>0&&n-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&hke(o[o.length-1],e)?this:new oc(aQ(this.done,e),this.undone,n,r)}addMapping(e){return new oc(XO(this.done,e),XO(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let o=i[i.length-1];if(r&&o.selectionsAfter.length)return n.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:R$.of({side:e,rest:pke(i)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let a=i.length==1?kl:i.slice(0,i.length-1);return o.mapped&&(a=XO(a,o.mapped)),n.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:R$.of({side:e,rest:a}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}oc.empty=new oc(kl,kl);const vke=[{key:"Mod-z",run:iQ,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:V$,preventDefault:!0},{linux:"Ctrl-Shift-z",run:V$,preventDefault:!0},{key:"Mod-u",run:uke,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:cke,preventDefault:!0}];function O0(t,e){return Ze.create(t.ranges.map(e),t.mainIndex)}function wc(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Su({state:t,dispatch:e},n){let r=O0(t.selection,n);return r.eq(t.selection)?!1:(e(wc(t,r)),!0)}function AA(t,e){return Ze.cursor(e?t.to:t.from)}function sQ(t,e){return Su(t,n=>n.empty?t.moveByChar(n,e):AA(n,e))}function ra(t){return t.textDirectionAt(t.state.selection.main.head)==fi.LTR}const lQ=t=>sQ(t,!ra(t)),uQ=t=>sQ(t,ra(t));function cQ(t,e){return Su(t,n=>n.empty?t.moveByGroup(n,e):AA(n,e))}const yke=t=>cQ(t,!ra(t)),bke=t=>cQ(t,ra(t));function _ke(t,e,n){if(e.type.prop(n))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function EA(t,e,n){let r=ji(t).resolveInner(e.head),i=n?Pn.closedBy:Pn.openedBy;for(let l=e.head;;){let u=n?r.childAfter(l):r.childBefore(l);if(!u)break;_ke(t,u,i)?r=u:l=n?u.to:u.from}let o=r.type.prop(i),a,s;return o&&(a=n?ic(t,r.from,1):ic(t,r.to,-1))&&a.matched?s=n?a.end.to:a.end.from:s=n?r.to:r.from,Ze.cursor(s,n?-1:1)}const Ske=t=>Su(t,e=>EA(t.state,e,!ra(t))),wke=t=>Su(t,e=>EA(t.state,e,ra(t)));function fQ(t,e){return Su(t,n=>{if(!n.empty)return AA(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)})}const hQ=t=>fQ(t,!1),dQ=t=>fQ(t,!0);function pQ(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,r=0,i;if(e){for(let o of t.state.facet(bt.scrollMargins)){let a=o(t);a!=null&&a.top&&(n=Math.max(a==null?void 0:a.top,n)),a!=null&&a.bottom&&(r=Math.max(a==null?void 0:a.bottom,r))}i=t.scrollDOM.clientHeight-n-r}else i=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:e,height:Math.max(t.defaultLineHeight,i-5)}}function gQ(t,e){let n=pQ(t),{state:r}=t,i=O0(r.selection,a=>a.empty?t.moveVertically(a,e,n.height):AA(a,e));if(i.eq(r.selection))return!1;let o;if(n.selfScroll){let a=t.coordsAtPos(r.selection.main.head),s=t.scrollDOM.getBoundingClientRect(),l=s.top+n.marginTop,u=s.bottom-n.marginBottom;a&&a.top>l&&a.bottom<u&&(o=bt.scrollIntoView(i.main.head,{y:"start",yMargin:a.top-l}))}return t.dispatch(wc(r,i),{effects:o}),!0}const AB=t=>gQ(t,!1),B$=t=>gQ(t,!0);function pd(t,e,n){let r=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==r.from&&r.length){let o=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;o&&e.head!=r.from+o&&(i=Ze.cursor(r.from+o))}return i}const xke=t=>Su(t,e=>pd(t,e,!0)),Cke=t=>Su(t,e=>pd(t,e,!1)),kke=t=>Su(t,e=>pd(t,e,!ra(t))),Tke=t=>Su(t,e=>pd(t,e,ra(t))),Ake=t=>Su(t,e=>Ze.cursor(t.lineBlockAt(e.head).from,1)),Eke=t=>Su(t,e=>Ze.cursor(t.lineBlockAt(e.head).to,-1));function Pke(t,e,n){let r=!1,i=O0(t.selection,o=>{let a=ic(t,o.head,-1)||ic(t,o.head,1)||o.head>0&&ic(t,o.head-1,1)||o.head<t.doc.length&&ic(t,o.head+1,-1);if(!a||!a.end)return o;r=!0;let s=a.start.from==o.head?a.end.to:a.end.from;return n?Ze.range(o.anchor,s):Ze.cursor(s)});return r?(e(wc(t,i)),!0):!1}const Oke=({state:t,dispatch:e})=>Pke(t,e,!1);function Ml(t,e){let n=O0(t.state.selection,r=>{let i=e(r);return Ze.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(wc(t.state,n)),!0)}function mQ(t,e){return Ml(t,n=>t.moveByChar(n,e))}const vQ=t=>mQ(t,!ra(t)),yQ=t=>mQ(t,ra(t));function bQ(t,e){return Ml(t,n=>t.moveByGroup(n,e))}const Ike=t=>bQ(t,!ra(t)),$ke=t=>bQ(t,ra(t)),Lke=t=>Ml(t,e=>EA(t.state,e,!ra(t))),Dke=t=>Ml(t,e=>EA(t.state,e,ra(t)));function _Q(t,e){return Ml(t,n=>t.moveVertically(n,e))}const SQ=t=>_Q(t,!1),wQ=t=>_Q(t,!0);function xQ(t,e){return Ml(t,n=>t.moveVertically(n,e,pQ(t).height))}const EB=t=>xQ(t,!1),PB=t=>xQ(t,!0),Mke=t=>Ml(t,e=>pd(t,e,!0)),Nke=t=>Ml(t,e=>pd(t,e,!1)),Fke=t=>Ml(t,e=>pd(t,e,!ra(t))),Rke=t=>Ml(t,e=>pd(t,e,ra(t))),Vke=t=>Ml(t,e=>Ze.cursor(t.lineBlockAt(e.head).from)),Bke=t=>Ml(t,e=>Ze.cursor(t.lineBlockAt(e.head).to)),OB=({state:t,dispatch:e})=>(e(wc(t,{anchor:0})),!0),IB=({state:t,dispatch:e})=>(e(wc(t,{anchor:t.doc.length})),!0),$B=({state:t,dispatch:e})=>(e(wc(t,{anchor:t.selection.main.anchor,head:0})),!0),LB=({state:t,dispatch:e})=>(e(wc(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),zke=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),jke=({state:t,dispatch:e})=>{let n=OA(t).map(({from:r,to:i})=>Ze.range(r,Math.min(i+1,t.doc.length)));return e(t.update({selection:Ze.create(n),userEvent:"select"})),!0},Uke=({state:t,dispatch:e})=>{let n=O0(t.selection,r=>{var i;let o=ji(t).resolveInner(r.head,1);for(;!(o.from<r.from&&o.to>=r.to||o.to>r.to&&o.from<=r.from||!(!((i=o.parent)===null||i===void 0)&&i.parent));)o=o.parent;return Ze.range(o.to,o.from)});return e(wc(t,n)),!0},Wke=({state:t,dispatch:e})=>{let n=t.selection,r=null;return n.ranges.length>1?r=Ze.create([n.main]):n.main.empty||(r=Ze.create([Ze.cursor(n.main.head)])),r?(e(wc(t,r)),!0):!1};function PA(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:r}=t,i=r.changeByRange(o=>{let{from:a,to:s}=o;if(a==s){let l=e(a);l<a?(n="delete.backward",l=_x(t,l,!1)):l>a&&(n="delete.forward",l=_x(t,l,!0)),a=Math.min(a,l),s=Math.max(s,l)}else a=_x(t,a,!1),s=_x(t,s,!0);return a==s?{range:o}:{changes:{from:a,to:s},range:Ze.cursor(a)}});return i.changes.empty?!1:(t.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?bt.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function _x(t,e,n){if(t instanceof bt)for(let r of t.state.facet(bt.atomicRanges).map(i=>i(t)))r.between(e,e,(i,o)=>{i<e&&o>e&&(e=n?o:i)});return e}const CQ=(t,e)=>PA(t,n=>{let{state:r}=t,i=r.doc.lineAt(n),o,a;if(!e&&n>i.from&&n<i.from+200&&!/[^ \t]/.test(o=i.text.slice(0,n-i.from))){if(o[o.length-1]=="	")return n-1;let s=J_(o,r.tabSize),l=s%mk(r)||mk(r);for(let u=0;u<l&&o[o.length-1-u]==" ";u++)n--;a=n}else a=Yo(i.text,n-i.from,e,e)+i.from,a==n&&i.number!=(e?r.doc.lines:1)&&(a+=e?1:-1);return a}),z$=t=>CQ(t,!1),kQ=t=>CQ(t,!0),TQ=(t,e)=>PA(t,n=>{let r=n,{state:i}=t,o=i.doc.lineAt(r),a=i.charCategorizer(r);for(let s=null;;){if(r==(e?o.to:o.from)){r==n&&o.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let l=Yo(o.text,r-o.from,e)+o.from,u=o.text.slice(Math.min(r,l)-o.from,Math.max(r,l)-o.from),c=a(u);if(s!=null&&c!=s)break;(u!=" "||r!=n)&&(s=c),r=l}return r}),AQ=t=>TQ(t,!1),Hke=t=>TQ(t,!0),EQ=t=>PA(t,e=>{let n=t.lineBlockAt(e).to;return e<n?n:Math.min(t.state.doc.length,e+1)}),Gke=t=>PA(t,e=>{let n=t.lineBlockAt(e).from;return e>n?n:Math.max(0,e-1)}),qke=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:rr.of(["",""])},range:Ze.cursor(r.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},Yke=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let i=r.from,o=t.doc.lineAt(i),a=i==o.from?i-1:Yo(o.text,i-o.from,!1)+o.from,s=i==o.to?i+1:Yo(o.text,i-o.from,!0)+o.from;return{changes:{from:a,to:s,insert:t.doc.slice(i,s).append(t.doc.slice(a,i))},range:Ze.cursor(s)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function OA(t){let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.from),o=t.doc.lineAt(r.to);if(!r.empty&&r.to==o.from&&(o=t.doc.lineAt(r.to-1)),n>=i.number){let a=e[e.length-1];a.to=o.to,a.ranges.push(r)}else e.push({from:i.from,to:o.to,ranges:[r]});n=o.number+1}return e}function PQ(t,e,n){if(t.readOnly)return!1;let r=[],i=[];for(let o of OA(t)){if(n?o.to==t.doc.length:o.from==0)continue;let a=t.doc.lineAt(n?o.to+1:o.from-1),s=a.length+1;if(n){r.push({from:o.to,to:a.to},{from:o.from,insert:a.text+t.lineBreak});for(let l of o.ranges)i.push(Ze.range(Math.min(t.doc.length,l.anchor+s),Math.min(t.doc.length,l.head+s)))}else{r.push({from:a.from,to:o.from},{from:o.to,insert:t.lineBreak+a.text});for(let l of o.ranges)i.push(Ze.range(l.anchor-s,l.head-s))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:Ze.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const Kke=({state:t,dispatch:e})=>PQ(t,e,!1),Xke=({state:t,dispatch:e})=>PQ(t,e,!0);function OQ(t,e,n){if(t.readOnly)return!1;let r=[];for(let i of OA(t))n?r.push({from:i.from,insert:t.doc.slice(i.from,i.to)+t.lineBreak}):r.push({from:i.to,insert:t.lineBreak+t.doc.slice(i.from,i.to)});return e(t.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Jke=({state:t,dispatch:e})=>OQ(t,e,!1),Zke=({state:t,dispatch:e})=>OQ(t,e,!0),Qke=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(OA(e).map(({from:i,to:o})=>(i>0?i--:o<e.doc.length&&o++,{from:i,to:o}))),r=O0(e.selection,i=>t.moveVertically(i,!0)).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function eTe(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=ji(t).resolveInner(e),r=n.childBefore(e),i=n.childAfter(e),o;return r&&i&&r.to<=e&&i.from>=e&&(o=r.type.prop(Pn.closedBy))&&o.indexOf(i.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(i.from).from?{from:r.to,to:i.from}:null}const tTe=IQ(!1),nTe=IQ(!0);function IQ(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:o,to:a}=i,s=e.doc.lineAt(o),l=!t&&o==a&&eTe(e,o);t&&(o=a=(a<=s.to?s:e.doc.lineAt(a)).to);let u=new CA(e,{simulateBreak:o,simulateDoubleBreak:!!l}),c=TN(u,o);for(c==null&&(c=/^\s*/.exec(e.doc.lineAt(o).text)[0].length);a<s.to&&/\s/.test(s.text[a-s.from]);)a++;l?{from:o,to:a}=l:o>s.from&&o<s.from+100&&!/\S/.test(s.text.slice(0,o))&&(o=s.from);let f=["",W1(e,c)];return l&&f.push(W1(e,u.lineIndent(s.from,-1))),{changes:{from:o,to:a,insert:rr.of(f)},range:Ze.cursor(o+1+f[1].length)}});return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function LN(t,e){let n=-1;return t.changeByRange(r=>{let i=[];for(let a=r.from;a<=r.to;){let s=t.doc.lineAt(a);s.number>n&&(r.empty||r.to>s.from)&&(e(s,i,r),n=s.number),a=s.to+1}let o=t.changes(i);return{changes:i,range:Ze.range(o.mapPos(r.anchor,1),o.mapPos(r.head,1))}})}const rTe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),r=new CA(t,{overrideIndentation:o=>{let a=n[o];return a??-1}}),i=LN(t,(o,a,s)=>{let l=TN(r,o.from);if(l==null)return;/\S/.test(o.text)||(l=0);let u=/^\s*/.exec(o.text)[0],c=W1(t,l);(u!=c||s.from<o.from+u.length)&&(n[o.from]=l,a.push({from:o.from,to:o.from+u.length,insert:c}))});return i.changes.empty||e(t.update(i,{userEvent:"indent"})),!0},$Q=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(LN(t,(n,r)=>{r.push({from:n.from,insert:t.facet(nS)})}),{userEvent:"input.indent"})),!0),LQ=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(LN(t,(n,r)=>{let i=/^\s*/.exec(n.text)[0];if(!i)return;let o=J_(i,t.tabSize),a=0,s=W1(t,Math.max(0,o-mk(t)));for(;a<i.length&&a<s.length&&i.charCodeAt(a)==s.charCodeAt(a);)a++;r.push({from:n.from+a,to:n.from+i.length,insert:s.slice(a)})}),{userEvent:"delete.dedent"})),!0),iTe=[{key:"Ctrl-b",run:lQ,shift:vQ,preventDefault:!0},{key:"Ctrl-f",run:uQ,shift:yQ},{key:"Ctrl-p",run:hQ,shift:SQ},{key:"Ctrl-n",run:dQ,shift:wQ},{key:"Ctrl-a",run:Ake,shift:Vke},{key:"Ctrl-e",run:Eke,shift:Bke},{key:"Ctrl-d",run:kQ},{key:"Ctrl-h",run:z$},{key:"Ctrl-k",run:EQ},{key:"Ctrl-Alt-h",run:AQ},{key:"Ctrl-o",run:qke},{key:"Ctrl-t",run:Yke},{key:"Ctrl-v",run:B$}],oTe=[{key:"ArrowLeft",run:lQ,shift:vQ,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:yke,shift:Ike,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:kke,shift:Fke,preventDefault:!0},{key:"ArrowRight",run:uQ,shift:yQ,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:bke,shift:$ke,preventDefault:!0},{mac:"Cmd-ArrowRight",run:Tke,shift:Rke,preventDefault:!0},{key:"ArrowUp",run:hQ,shift:SQ,preventDefault:!0},{mac:"Cmd-ArrowUp",run:OB,shift:$B},{mac:"Ctrl-ArrowUp",run:AB,shift:EB},{key:"ArrowDown",run:dQ,shift:wQ,preventDefault:!0},{mac:"Cmd-ArrowDown",run:IB,shift:LB},{mac:"Ctrl-ArrowDown",run:B$,shift:PB},{key:"PageUp",run:AB,shift:EB},{key:"PageDown",run:B$,shift:PB},{key:"Home",run:Cke,shift:Nke,preventDefault:!0},{key:"Mod-Home",run:OB,shift:$B},{key:"End",run:xke,shift:Mke,preventDefault:!0},{key:"Mod-End",run:IB,shift:LB},{key:"Enter",run:tTe},{key:"Mod-a",run:zke},{key:"Backspace",run:z$,shift:z$},{key:"Delete",run:kQ},{key:"Mod-Backspace",mac:"Alt-Backspace",run:AQ},{key:"Mod-Delete",mac:"Alt-Delete",run:Hke},{mac:"Mod-Backspace",run:Gke},{mac:"Mod-Delete",run:EQ}].concat(iTe.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),aTe=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:Ske,shift:Lke},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:wke,shift:Dke},{key:"Alt-ArrowUp",run:Kke},{key:"Shift-Alt-ArrowUp",run:Jke},{key:"Alt-ArrowDown",run:Xke},{key:"Shift-Alt-ArrowDown",run:Zke},{key:"Escape",run:Wke},{key:"Mod-Enter",run:nTe},{key:"Alt-l",mac:"Ctrl-l",run:jke},{key:"Mod-i",run:Uke,preventDefault:!0},{key:"Mod-[",run:LQ},{key:"Mod-]",run:$Q},{key:"Mod-Alt-\\",run:rTe},{key:"Shift-Mod-k",run:Qke},{key:"Shift-Mod-\\",run:Oke},{key:"Mod-/",run:Q2e},{key:"Alt-A",run:tke}].concat(oTe),sTe={key:"Tab",run:$Q,shift:LQ};function Rr(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];typeof i=="string"?t.setAttribute(r,i):i!=null&&(t[r]=i)}e++}for(;e<arguments.length;e++)DQ(t,arguments[e]);return t}function DQ(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)DQ(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}const DB=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class o0{constructor(e,n,r=0,i=e.length,o,a){this.test=a,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=o?s=>o(DB(s)):DB,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return wo(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=fN(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=Sl(e);let i=this.normalize(n);for(let o=0,a=r;;o++){let s=i.charCodeAt(o),l=this.match(s,a);if(l)return this.value=l,this;if(o==i.length-1)break;a==r&&o<n.length&&n.charCodeAt(o)==s&&a++}}}match(e,n){let r=null;for(let i=0;i<this.matches.length;i+=2){let o=this.matches[i],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?r={from:this.matches[i+1],to:n+1}:(this.matches[i]++,a=!0)),a||(this.matches.splice(i,2),i-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:n,to:n+1}:this.matches.push(1,n)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferPos)&&(r=null),r}}typeof Symbol<"u"&&(o0.prototype[Symbol.iterator]=function(){return this});const MQ={from:-1,to:-1,match:/.*/.exec("")},DN="gm"+(/x/.unicode==null?"":"u");class NQ{constructor(e,n,r,i=0,o=e.length){if(this.text=e,this.to=o,this.curLine="",this.done=!1,this.value=MQ,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new FQ(e,n,r,i,o);this.re=new RegExp(n,DN+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.iter=e.iter();let a=e.lineAt(i);this.curLineStart=a.from,this.matchPos=_k(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,i=r+n[0].length;if(this.matchPos=_k(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const JO=new WeakMap;class Ov{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,r){let i=JO.get(e);if(!i||i.from>=r||i.to<=n){let s=new Ov(n,e.sliceString(n,r));return JO.set(e,s),s}if(i.from==n&&i.to==r)return i;let{text:o,from:a}=i;return a>n&&(o=e.sliceString(n,a)+o,a=n),i.to<r&&(o+=e.sliceString(i.to,r)),JO.set(e,new Ov(a,o)),new Ov(n,o.slice(n-a,r-a))}}class FQ{constructor(e,n,r,i,o){this.text=e,this.to=o,this.done=!1,this.value=MQ,this.matchPos=_k(e,i),this.re=new RegExp(n,DN+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.flat=Ov.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,i=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this.matchPos=_k(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Ov.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(NQ.prototype[Symbol.iterator]=FQ.prototype[Symbol.iterator]=function(){return this});function lTe(t){try{return new RegExp(t,DN),!0}catch{return!1}}function _k(t,e){if(e>=t.length)return e;let n=t.lineAt(e),r;for(;e<n.to&&(r=n.text.charCodeAt(e-n.from))>=56320&&r<57344;)e++;return e}function j$(t){let e=Rr("input",{class:"cm-textfield",name:"line"}),n=Rr("form",{class:"cm-gotoLine",onkeydown:i=>{i.keyCode==27?(i.preventDefault(),t.dispatch({effects:Sk.of(!1)}),t.focus()):i.keyCode==13&&(i.preventDefault(),r())},onsubmit:i=>{i.preventDefault(),r()}},Rr("label",t.state.phrase("Go to line"),": ",e)," ",Rr("button",{class:"cm-button",type:"submit"},t.state.phrase("go")));function r(){let i=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!i)return;let{state:o}=t,a=o.doc.lineAt(o.selection.main.head),[,s,l,u,c]=i,f=u?+u.slice(1):0,h=l?+l:a.number;if(l&&c){let g=h/100;s&&(g=g*(s=="-"?-1:1)+a.number/o.doc.lines),h=Math.round(o.doc.lines*g)}else l&&s&&(h=h*(s=="-"?-1:1)+a.number);let d=o.doc.line(Math.max(1,Math.min(o.doc.lines,h)));t.dispatch({effects:Sk.of(!1),selection:Ze.cursor(d.from+Math.max(0,Math.min(f,d.length))),scrollIntoView:!0}),t.focus()}return{dom:n}}const Sk=un.define(),MB=Ui.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(Sk)&&(t=n.value);return t},provide:t=>j1.from(t,e=>e?j$:null)}),uTe=t=>{let e=z1(t,j$);if(!e){let n=[Sk.of(!0)];t.state.field(MB,!1)==null&&n.push(un.appendConfig.of([MB,cTe])),t.dispatch({effects:n}),e=z1(t,j$)}return e&&e.dom.querySelector("input").focus(),!0},cTe=bt.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),fTe={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},RQ=St.define({combine(t){return _u(t,fTe,{highlightWordAroundCursor:(e,n)=>e||n,minSelectionLength:Math.min,maxMatches:Math.min})}});function hTe(t){let e=[vTe,mTe];return t&&e.push(RQ.of(t)),e}const dTe=Ut.mark({class:"cm-selectionMatch"}),pTe=Ut.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function NB(t,e,n,r){return(n==0||t(e.sliceDoc(n-1,n))!=ii.Word)&&(r==e.doc.length||t(e.sliceDoc(r,r+1))!=ii.Word)}function gTe(t,e,n,r){return t(e.sliceDoc(n,n+1))==ii.Word&&t(e.sliceDoc(r-1,r))==ii.Word}const mTe=Fi.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(RQ),{state:n}=t,r=n.selection;if(r.ranges.length>1)return Ut.none;let i=r.main,o,a=null;if(i.empty){if(!e.highlightWordAroundCursor)return Ut.none;let l=n.wordAt(i.head);if(!l)return Ut.none;a=n.charCategorizer(i.head),o=n.sliceDoc(l.from,l.to)}else{let l=i.to-i.from;if(l<e.minSelectionLength||l>200)return Ut.none;if(e.wholeWords){if(o=n.sliceDoc(i.from,i.to),a=n.charCategorizer(i.head),!(NB(a,n,i.from,i.to)&&gTe(a,n,i.from,i.to)))return Ut.none}else if(o=n.sliceDoc(i.from,i.to).trim(),!o)return Ut.none}let s=[];for(let l of t.visibleRanges){let u=new o0(n.doc,o,l.from,l.to);for(;!u.next().done;){let{from:c,to:f}=u.value;if((!a||NB(a,n,c,f))&&(i.empty&&c<=i.from&&f>=i.to?s.push(pTe.range(c,f)):(c>=i.to||f<=i.from)&&s.push(dTe.range(c,f)),s.length>e.maxMatches))return Ut.none}}return Ut.set(s)}},{decorations:t=>t.decorations}),vTe=bt.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),yTe=({state:t,dispatch:e})=>{let{selection:n}=t,r=Ze.create(n.ranges.map(i=>t.wordAt(i.head)||Ze.cursor(i.head)),n.mainIndex);return r.eq(n)?!1:(e(t.update({selection:r})),!0)};function bTe(t,e){let{main:n,ranges:r}=t.selection,i=t.wordAt(n.head),o=i&&i.from==n.from&&i.to==n.to;for(let a=!1,s=new o0(t.doc,e,r[r.length-1].to);;)if(s.next(),s.done){if(a)return null;s=new o0(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),a=!0}else{if(a&&r.some(l=>l.from==s.value.from))continue;if(o){let l=t.wordAt(s.value.from);if(!l||l.from!=s.value.from||l.to!=s.value.to)continue}return s.value}}const _Te=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(o=>o.from===o.to))return yTe({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(o=>t.sliceDoc(o.from,o.to)!=r))return!1;let i=bTe(t,r);return i?(e(t.update({selection:t.selection.addRange(Ze.range(i.from,i.to),!1),effects:bt.scrollIntoView(i.to)})),!0):!1},I0=St.define({combine(t){return _u(t,{top:!1,caseSensitive:!1,literal:!1,wholeWord:!1,createPanel:e=>new $Te(e),scrollToMatch:e=>bt.scrollIntoView(e)})}});class VQ{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||lTe(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new CTe(this):new wTe(this)}getCursor(e,n=0,r){let i=e.doc?e:An.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?Gm(this,i,n,r):Hm(this,i,n,r)}}class BQ{constructor(e){this.spec=e}}function Hm(t,e,n,r){return new o0(e.doc,t.unquoted,n,r,t.caseSensitive?void 0:i=>i.toLowerCase(),t.wholeWord?STe(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function STe(t,e){return(n,r,i,o)=>((o>n||o+i.length<r)&&(o=Math.max(0,n-2),i=t.sliceString(o,Math.min(t.length,r+2))),(e(wk(i,n-o))!=ii.Word||e(xk(i,n-o))!=ii.Word)&&(e(xk(i,r-o))!=ii.Word||e(wk(i,r-o))!=ii.Word))}class wTe extends BQ{constructor(e){super(e)}nextMatch(e,n,r){let i=Hm(this.spec,e,r,e.doc.length).nextOverlapping();return i.done&&(i=Hm(this.spec,e,0,n).nextOverlapping()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=r;;){let o=Math.max(n,i-1e4-this.spec.unquoted.length),a=Hm(this.spec,e,o,i),s=null;for(;!a.nextOverlapping().done;)s=a.value;if(s)return s;if(o==n)return null;i-=1e4}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let r=Hm(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let o=Hm(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!o.next().done;)i(o.value.from,o.value.to)}}function Gm(t,e,n,r){return new NQ(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?xTe(e.charCategorizer(e.selection.main.head)):void 0},n,r)}function wk(t,e){return t.slice(Yo(t,e,!1),e)}function xk(t,e){return t.slice(e,Yo(t,e))}function xTe(t){return(e,n,r)=>!r[0].length||(t(wk(r.input,r.index))!=ii.Word||t(xk(r.input,r.index))!=ii.Word)&&(t(xk(r.input,r.index+r[0].length))!=ii.Word||t(wk(r.input,r.index+r[0].length))!=ii.Word)}class CTe extends BQ{nextMatch(e,n,r){let i=Gm(this.spec,e,r,e.doc.length).next();return i.done&&(i=Gm(this.spec,e,0,n).next()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=1;;i++){let o=Math.max(n,r-i*1e4),a=Gm(this.spec,e,o,r),s=null;for(;!a.next().done;)s=a.value;if(s&&(o==n||s.from>o+10))return s;if(o==n)return null}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(n,r)=>r=="$"?"$":r=="&"?e.match[0]:r!="0"&&+r<e.match.length?e.match[r]:n))}matchAll(e,n){let r=Gm(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let o=Gm(this.spec,e,Math.max(0,n-250),Math.min(r+250,e.doc.length));for(;!o.next().done;)i(o.value.from,o.value.to)}}const H1=un.define(),MN=un.define(),$h=Ui.define({create(t){return new ZO(U$(t).create(),null)},update(t,e){for(let n of e.effects)n.is(H1)?t=new ZO(n.value.create(),t.panel):n.is(MN)&&(t=new ZO(t.query,n.value?NN:null));return t},provide:t=>j1.from(t,e=>e.panel)});class ZO{constructor(e,n){this.query=e,this.panel=n}}const kTe=Ut.mark({class:"cm-searchMatch"}),TTe=Ut.mark({class:"cm-searchMatch cm-searchMatch-selected"}),ATe=Fi.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field($h))}update(t){let e=t.state.field($h);(e!=t.startState.field($h)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return Ut.none;let{view:n}=this,r=new Qh;for(let i=0,o=n.visibleRanges,a=o.length;i<a;i++){let{from:s,to:l}=o[i];for(;i<a-1&&l>o[i+1].from-2*250;)l=o[++i].to;t.highlight(n.state,s,l,(u,c)=>{let f=n.state.selection.ranges.some(h=>h.from==u&&h.to==c);r.add(u,c,f?TTe:kTe)})}return r.finish()}},{decorations:t=>t.decorations});function oS(t){return e=>{let n=e.state.field($h,!1);return n&&n.query.spec.valid?t(e,n):UQ(e)}}const Ck=oS((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state,n,n);if(!r)return!1;let i=Ze.single(r.from,r.to),o=t.state.facet(I0);return t.dispatch({selection:i,effects:[FN(t,r),o.scrollToMatch(i.main,t)],userEvent:"select.search"}),jQ(t),!0}),kk=oS((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,i=e.prevMatch(n,r,r);if(!i)return!1;let o=Ze.single(i.from,i.to),a=t.state.facet(I0);return t.dispatch({selection:o,effects:[FN(t,i),a.scrollToMatch(o.main,t)],userEvent:"select.search"}),jQ(t),!0}),ETe=oS((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:Ze.create(n.map(r=>Ze.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),PTe=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,o=[],a=0;for(let s=new o0(t.doc,t.sliceDoc(r,i));!s.next().done;){if(o.length>1e3)return!1;s.value.from==r&&(a=o.length),o.push(Ze.range(s.value.from,s.value.to))}return e(t.update({selection:Ze.create(o,a),userEvent:"select.search.matches"})),!0},FB=oS((t,{query:e})=>{let{state:n}=t,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let o=e.nextMatch(n,r,r);if(!o)return!1;let a=[],s,l,u=[];if(o.from==r&&o.to==i&&(l=n.toText(e.getReplacement(o)),a.push({from:o.from,to:o.to,insert:l}),o=e.nextMatch(n,o.from,o.to),u.push(bt.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+"."))),o){let c=a.length==0||a[0].from>=o.to?0:o.to-o.from-l.length;s=Ze.single(o.from-c,o.to-c),u.push(FN(t,o)),u.push(n.facet(I0).scrollToMatch(s.main,t))}return t.dispatch({changes:a,selection:s,effects:u,userEvent:"input.replace"}),!0}),OTe=oS((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(i=>{let{from:o,to:a}=i;return{from:o,to:a,insert:e.getReplacement(i)}});if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:bt.announce.of(r),userEvent:"input.replace.all"}),!0});function NN(t){return t.state.facet(I0).createPanel(t)}function U$(t,e){var n,r,i,o;let a=t.selection.main,s=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!s)return e;let l=t.facet(I0);return new VQ({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:l.literal)?s:s.replace(/\n/g,"\\n"),caseSensitive:(r=e==null?void 0:e.caseSensitive)!==null&&r!==void 0?r:l.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:l.literal,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:l.wholeWord})}function zQ(t){let e=z1(t,NN);return e&&e.dom.querySelector("[main-field]")}function jQ(t){let e=zQ(t);e&&e==t.root.activeElement&&e.select()}const UQ=t=>{let e=t.state.field($h,!1);if(e&&e.panel){let n=zQ(t);if(n&&n!=t.root.activeElement){let r=U$(t.state,e.query.spec);r.valid&&t.dispatch({effects:H1.of(r)}),n.focus(),n.select()}}else t.dispatch({effects:[MN.of(!0),e?H1.of(U$(t.state,e.query.spec)):un.appendConfig.of(DTe)]});return!0},WQ=t=>{let e=t.state.field($h,!1);if(!e||!e.panel)return!1;let n=z1(t,NN);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:MN.of(!1)}),!0},ITe=[{key:"Mod-f",run:UQ,scope:"editor search-panel"},{key:"F3",run:Ck,shift:kk,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Ck,shift:kk,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:WQ,scope:"editor search-panel"},{key:"Mod-Shift-l",run:PTe},{key:"Alt-g",run:uTe},{key:"Mod-d",run:_Te,preventDefault:!0}];class $Te{constructor(e){this.view=e;let n=this.query=e.state.field($h).query.spec;this.commit=this.commit.bind(this),this.searchField=Rr("input",{value:n.search,placeholder:Ts(e,"Find"),"aria-label":Ts(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Rr("input",{value:n.replace,placeholder:Ts(e,"Replace"),"aria-label":Ts(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Rr("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=Rr("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=Rr("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(i,o,a){return Rr("button",{class:"cm-button",name:i,onclick:o,type:"button"},a)}this.dom=Rr("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>Ck(e),[Ts(e,"next")]),r("prev",()=>kk(e),[Ts(e,"previous")]),r("select",()=>ETe(e),[Ts(e,"all")]),Rr("label",null,[this.caseField,Ts(e,"match case")]),Rr("label",null,[this.reField,Ts(e,"regexp")]),Rr("label",null,[this.wordField,Ts(e,"by word")]),...e.state.readOnly?[]:[Rr("br"),this.replaceField,r("replace",()=>FB(e),[Ts(e,"replace")]),r("replaceAll",()=>OTe(e),[Ts(e,"replace all")])],Rr("button",{name:"close",onclick:()=>WQ(e),"aria-label":Ts(e,"close"),type:"button"},["×"])])}commit(){let e=new VQ({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:H1.of(e)}))}keydown(e){Qxe(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?kk:Ck)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),FB(this.view))}update(e){for(let n of e.transactions)for(let r of n.effects)r.is(H1)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(I0).top}}function Ts(t,e){return t.state.phrase(e)}const Sx=30,xx=/[\s\.,:;?!]/;function FN(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,o=Math.max(r.from,e-Sx),a=Math.min(i,n+Sx),s=t.state.sliceDoc(o,a);if(o!=r.from){for(let l=0;l<Sx;l++)if(!xx.test(s[l+1])&&xx.test(s[l])){s=s.slice(l);break}}if(a!=i){for(let l=s.length-1;l>s.length-Sx;l--)if(!xx.test(s[l-1])&&xx.test(s[l])){s=s.slice(0,l);break}}return bt.announce.of(`${t.state.phrase("current match")}. ${s} ${t.state.phrase("on line")} ${r.number}.`)}const LTe=bt.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),DTe=[$h,zg.lowest(ATe),LTe];class HQ{constructor(e,n,r){this.state=e,this.pos=n,this.explicit=r,this.abortListeners=[]}tokenBefore(e){let n=ji(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),r=Math.max(n.from,this.pos-250),i=n.text.slice(r-n.from,this.pos-n.from),o=i.search(GQ(e,!1));return o<0?null:{from:r+o,to:this.pos,text:i.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(e,n){e=="abort"&&this.abortListeners&&this.abortListeners.push(n)}}function RB(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function MTe(t){let e=Object.create(null),n=Object.create(null);for(let{label:i}of t){e[i[0]]=!0;for(let o=1;o<i.length;o++)n[i[o]]=!0}let r=RB(e)+RB(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function NTe(t){let e=t.map(i=>typeof i=="string"?{label:i}:i),[n,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:MTe(e);return i=>{let o=i.matchBefore(r);return o||i.explicit?{from:o?o.from:i.pos,options:e,validFor:n}:null}}class VB{constructor(e,n,r,i){this.completion=e,this.source=n,this.match=r,this.score=i}}function Lh(t){return t.selection.main.from}function GQ(t,e){var n;let{source:r}=t,i=e&&r[0]!="^",o=r[r.length-1]!="$";return!i&&!o?t:new RegExp(`${i?"^":""}(?:${r})${o?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const qQ=If.define();function FTe(t,e,n,r){let{main:i}=t.selection,o=n-i.from,a=r-i.from;return Object.assign(Object.assign({},t.changeByRange(s=>s!=i&&n!=r&&t.sliceDoc(s.from+o,s.from+a)!=t.sliceDoc(n,r)?{range:s}:{changes:{from:s.from+o,to:r==i.from?s.to:s.from+a,insert:e},range:Ze.cursor(s.from+o+e.length)})),{userEvent:"input.complete"})}const BB=new WeakMap;function RTe(t){if(!Array.isArray(t))return t;let e=BB.get(t);return e||BB.set(t,e=NTe(t)),e}const RN=un.define(),G1=un.define();class VTe{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let n=0;n<e.length;){let r=wo(e,n),i=Sl(r);this.chars.push(r);let o=e.slice(n,n+i),a=o.toUpperCase();this.folded.push(wo(a==o?o.toLowerCase():a,0)),n+=i}this.astral=e.length!=this.chars.length}match(e){if(this.pattern.length==0)return[-100];if(e.length<this.pattern.length)return null;let{chars:n,folded:r,any:i,precise:o,byWord:a}=this;if(n.length==1){let S=wo(e,0),C=Sl(S),k=C==e.length?0:-100;if(S!=n[0])if(S==r[0])k+=-200;else return null;return[k,0,C]}let s=e.indexOf(this.pattern);if(s==0)return[e.length==this.pattern.length?0:-100,0,this.pattern.length];let l=n.length,u=0;if(s<0){for(let S=0,C=Math.min(e.length,200);S<C&&u<l;){let k=wo(e,S);(k==n[u]||k==r[u])&&(i[u++]=S),S+=Sl(k)}if(u<l)return null}let c=0,f=0,h=!1,d=0,g=-1,y=-1,_=/[a-z]/.test(e),v=!0;for(let S=0,C=Math.min(e.length,200),k=0;S<C&&f<l;){let x=wo(e,S);s<0&&(c<l&&x==n[c]&&(o[c++]=S),d<l&&(x==n[d]||x==r[d]?(d==0&&(g=S),y=S+1,d++):d=0));let m,T=x<255?x>=48&&x<=57||x>=97&&x<=122?2:x>=65&&x<=90?1:0:(m=fN(x))!=m.toLowerCase()?1:m!=m.toUpperCase()?2:0;(!S||T==1&&_||k==0&&T!=0)&&(n[f]==x||r[f]==x&&(h=!0)?a[f++]=S:a.length&&(v=!1)),k=T,S+=Sl(x)}return f==l&&a[0]==0&&v?this.result(-100+(h?-200:0),a,e):d==l&&g==0?[-200-e.length+(y==e.length?0:-100),0,y]:s>-1?[-700-e.length,s,s+this.pattern.length]:d==l?[-200+-700-e.length,g,y]:f==l?this.result(-100+(h?-200:0)+-700+(v?0:-1100),a,e):n.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,n,r){let i=[e-r.length],o=1;for(let a of n){let s=a+(this.astral?Sl(wo(r,a)):1);o>1&&i[o-1]==a?i[o-1]=s:(i[o++]=a,i[o++]=s)}return i}}const os=St.define({combine(t){return _u(t,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:BTe,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>r=>zB(e(r),n(r)),optionClass:(e,n)=>r=>zB(e(r),n(r)),addToOptions:(e,n)=>e.concat(n)})}});function zB(t,e){return t?e?t+" "+e:t:e}function BTe(t,e,n,r,i){let o=t.textDirection==fi.RTL,a=o,s=!1,l="top",u,c,f=e.left-i.left,h=i.right-e.right,d=r.right-r.left,g=r.bottom-r.top;if(a&&f<Math.min(d,h)?a=!1:!a&&h<Math.min(d,f)&&(a=!0),d<=(a?f:h))u=Math.max(i.top,Math.min(n.top,i.bottom-g))-e.top,c=Math.min(400,a?f:h);else{s=!0,c=Math.min(400,(o?e.right:i.right-e.left)-30);let y=i.bottom-e.bottom;y>=g||y>e.top?u=n.bottom-e.top:(l="bottom",u=e.bottom-n.top)}return{style:`${l}: ${u}px; max-width: ${c}px`,class:"cm-completionInfo-"+(s?o?"left-narrow":"right-narrow":a?"left":"right")}}function Cx(t,e="option"){return n=>{let r=n.state.field($s,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<n.state.facet(os).interactionDelay)return!1;let i=1,o;e=="page"&&(o=OZ(n,r.open.tooltip))&&(i=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:a}=r.open.options,s=r.open.selected>-1?r.open.selected+i*(t?1:-1):t?0:a-1;return s<0?s=e=="page"?0:a-1:s>=a&&(s=e=="page"?a-1:0),n.dispatch({effects:XQ.of(s)}),!0}}const zTe=t=>{let e=t.state.field($s,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||Date.now()-e.open.timestamp<t.state.facet(os).interactionDelay?!1:e.open.disabled?!0:YQ(t,e.open.options[e.open.selected])},jTe=t=>t.state.field($s,!1)?(t.dispatch({effects:RN.of(!0)}),!0):!1,UTe=t=>{let e=t.state.field($s,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:G1.of(null)}),!0)};class WTe{constructor(e,n){this.active=e,this.context=n,this.time=Date.now(),this.updates=[],this.done=void 0}}const jB=50,HTe=50,GTe=1e3,qTe=Fi.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of t.state.field($s).active)e.state==1&&this.startQuery(e)}update(t){let e=t.state.field($s);if(!t.selectionSet&&!t.docChanged&&t.startState.field($s)==e)return;let n=t.transactions.some(r=>(r.selection||r.docChanged)&&!W$(r));for(let r=0;r<this.running.length;r++){let i=this.running[r];if(n||i.updates.length+t.transactions.length>HTe&&Date.now()-i.time>GTe){for(let o of i.context.abortListeners)try{o()}catch(a){Vs(this.view.state,a)}i.context.abortListeners=null,this.running.splice(r--,1)}else i.updates.push(...t.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some(r=>r.state==1&&!this.running.some(i=>i.active.source==r.source))?setTimeout(()=>this.startUpdate(),jB):-1,this.composing!=0)for(let r of t.transactions)W$(r)=="input"?this.composing=2:this.composing==2&&r.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:t}=this.view,e=t.field($s);for(let n of e.active)n.state==1&&!this.running.some(r=>r.active.source==n.source)&&this.startQuery(n)}startQuery(t){let{state:e}=this.view,n=Lh(e),r=new HQ(e,n,t.explicitPos==n),i=new WTe(t,r);this.running.push(i),Promise.resolve(t.source(r)).then(o=>{i.context.aborted||(i.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:G1.of(null)}),Vs(this.view.state,o)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),jB))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],n=this.view.state.facet(os);for(let r=0;r<this.running.length;r++){let i=this.running[r];if(i.done===void 0)continue;if(this.running.splice(r--,1),i.done){let a=new Iv(i.active.source,i.active.explicitPos,i.done,i.done.from,(t=i.done.to)!==null&&t!==void 0?t:Lh(i.updates.length?i.updates[0].startState:this.view.state));for(let s of i.updates)a=a.update(s,n);if(a.hasResult()){e.push(a);continue}}let o=this.view.state.field($s).active.find(a=>a.source==i.active.source);if(o&&o.state==1)if(i.done==null){let a=new Ja(i.active.source,0);for(let s of i.updates)a=a.update(s,n);a.state!=1&&e.push(a)}else this.startQuery(o)}e.length&&this.view.dispatch({effects:KQ.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field($s,!1);if(e&&e.tooltip&&this.view.state.facet(os).closeOnBlur){let n=e.open&&OZ(this.view,e.open.tooltip);(!n||!n.dom.contains(t.relatedTarget))&&this.view.dispatch({effects:G1.of(null)})}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:RN.of(!1)}),20),this.composing=0}}});function YQ(t,e){const n=e.completion.apply||e.completion.label;let r=t.state.field($s).active.find(i=>i.source==e.source);return r instanceof Iv?(typeof n=="string"?t.dispatch(Object.assign(Object.assign({},FTe(t.state,n,r.from,r.to)),{annotations:qQ.of(e.completion)})):n(t,e.completion,r.from,r.to),!0):!1}function YTe(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),n.type&&r.classList.add(...n.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(n,r,i){let o=document.createElement("span");o.className="cm-completionLabel";let{label:a}=n,s=0;for(let l=1;l<i.length;){let u=i[l++],c=i[l++];u>s&&o.appendChild(document.createTextNode(a.slice(s,u)));let f=o.appendChild(document.createElement("span"));f.appendChild(document.createTextNode(a.slice(u,c))),f.className="cm-completionMatchedText",s=c}return s<a.length&&o.appendChild(document.createTextNode(a.slice(s))),o},position:50},{render(n){if(!n.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=n.detail,r},position:80}),e.sort((n,r)=>n.position-r.position).map(n=>n.render)}function UB(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let i=Math.floor(e/n);return{from:i*n,to:(i+1)*n}}let r=Math.floor((t-e)/n);return{from:t-(r+1)*n,to:t-r*n}}class KTe{constructor(e,n){this.view=e,this.stateField=n,this.info=null,this.placeInfoReq={read:()=>this.measureInfo(),write:s=>this.placeInfo(s),key:this},this.space=null,this.currentClass="";let r=e.state.field(n),{options:i,selected:o}=r.open,a=e.state.facet(os);this.optionContent=YTe(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=UB(i.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",s=>{for(let l=s.target,u;l&&l!=this.dom;l=l.parentNode)if(l.nodeName=="LI"&&(u=/-(\d+)$/.exec(l.id))&&+u[1]<i.length){YQ(e,i[+u[1]]),s.preventDefault();return}}),this.dom.addEventListener("focusout",s=>{let l=e.state.field(this.stateField,!1);l&&l.tooltip&&e.state.facet(os).closeOnBlur&&s.relatedTarget!=e.contentDOM&&e.dispatch({effects:G1.of(null)})}),this.list=this.dom.appendChild(this.createListBox(i,r.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}mount(){this.updateSel()}update(e){var n,r,i;let o=e.state.field(this.stateField),a=e.startState.field(this.stateField);this.updateTooltipClass(e.state),o!=a&&(this.updateSel(),((n=o.open)===null||n===void 0?void 0:n.disabled)!=((r=a.open)===null||r===void 0?void 0:r.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(!((i=o.open)===null||i===void 0)&&i.disabled)))}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of n.split(" "))r&&this.dom.classList.add(r);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=UB(n.options.length,n.selected,this.view.state.facet(os).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(n.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})),this.updateSelectedOption(n.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:r}=n.options[n.selected],{info:i}=r;if(!i)return;let o=typeof i=="string"?document.createTextNode(i):i(r);if(!o)return;"then"in o?o.then(a=>{a&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(a)}).catch(a=>Vs(this.view.state,a,"completion info")):this.addInfoPane(o)}}addInfoPane(e){let n=this.info=document.createElement("div");n.className="cm-tooltip cm-completionInfo",n.appendChild(e),this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)r.nodeName!="LI"||!r.id?i--:i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),n=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return n&&JTe(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),o=this.space;if(!o){let a=this.dom.ownerDocument.defaultView||window;o={left:0,top:0,right:a.innerWidth,bottom:a.innerHeight}}return i.top>Math.min(o.bottom,n.bottom)-10||i.bottom<Math.max(o.top,n.top)+10?null:this.view.state.facet(os).positionInfo(this.view,n,i,r,o)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,r){const i=document.createElement("ul");i.id=n,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions"));let o=null;for(let a=r.from;a<r.to;a++){let{completion:s,match:l}=e[a],{section:u}=s;if(u){let h=typeof u=="string"?u:u.name;if(h!=o&&(a>r.from||r.from==0))if(o=h,typeof u!="string"&&u.header)i.appendChild(u.header(u));else{let d=i.appendChild(document.createElement("completion-section"));d.textContent=h}}const c=i.appendChild(document.createElement("li"));c.id=n+"-"+a,c.setAttribute("role","option");let f=this.optionClass(s);f&&(c.className=f);for(let h of this.optionContent){let d=h(s,this.view.state,l);d&&c.appendChild(d)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}}function XTe(t){return e=>new KTe(e,t)}function JTe(t,e){let n=t.getBoundingClientRect(),r=e.getBoundingClientRect();r.top<n.top?t.scrollTop-=n.top-r.top:r.bottom>n.bottom&&(t.scrollTop+=r.bottom-n.bottom)}function WB(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function ZTe(t,e){let n=[],r=null,i=l=>{n.push(l);let{section:u}=l.completion;if(u){r||(r=[]);let c=typeof u=="string"?u:u.name;r.some(f=>f.name==c)||r.push(typeof u=="string"?{name:c}:u)}};for(let l of t)if(l.hasResult())if(l.result.filter===!1){let u=l.result.getMatch;for(let c of l.result.options){let f=[1e9-n.length];if(u)for(let h of u(c))f.push(h);i(new VB(c,l.source,f,f[0]))}}else{let u=new VTe(e.sliceDoc(l.from,l.to)),c;for(let f of l.result.options)(c=u.match(f.label))&&i(new VB(f,l.source,c,c[0]+(f.boost||0)))}if(r){let l=Object.create(null),u=0,c=(f,h)=>{var d,g;return((d=f.rank)!==null&&d!==void 0?d:1e9)-((g=h.rank)!==null&&g!==void 0?g:1e9)||(f.name<h.name?-1:1)};for(let f of r.sort(c))u-=1e5,l[f.name]=u;for(let f of n){let{section:h}=f.completion;h&&(f.score+=l[typeof h=="string"?h:h.name])}}let o=[],a=null,s=e.facet(os).compareCompletions;for(let l of n.sort((u,c)=>c.score-u.score||s(u.completion,c.completion)))!a||a.label!=l.completion.label||a.detail!=l.completion.detail||a.type!=null&&l.completion.type!=null&&a.type!=l.completion.type||a.apply!=l.completion.apply?o.push(l):WB(l.completion)>WB(a)&&(o[o.length-1]=l),a=l.completion;return o}class lv{constructor(e,n,r,i,o,a){this.options=e,this.attrs=n,this.tooltip=r,this.timestamp=i,this.selected=o,this.disabled=a}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new lv(this.options,HB(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,r,i,o){let a=ZTe(e,n);if(!a.length)return i&&e.some(l=>l.state==1)?new lv(i.options,i.attrs,i.tooltip,i.timestamp,i.selected,!0):null;let s=n.facet(os).selectOnOpen?0:-1;if(i&&i.selected!=s&&i.selected!=-1){let l=i.options[i.selected].completion;for(let u=0;u<a.length;u++)if(a[u].completion==l){s=u;break}}return new lv(a,HB(r,s),{pos:e.reduce((l,u)=>u.hasResult()?Math.min(l,u.from):l,1e8),create:XTe($s),above:o.aboveCursor},i?i.timestamp:Date.now(),s,!1)}map(e){return new lv(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class Tk{constructor(e,n,r){this.active=e,this.id=n,this.open=r}static start(){return new Tk(tAe,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,r=n.facet(os),o=(r.override||n.languageDataAt("autocomplete",Lh(n)).map(RTe)).map(s=>(this.active.find(u=>u.source==s)||new Ja(s,this.active.some(u=>u.state!=0)?1:0)).update(e,r));o.length==this.active.length&&o.every((s,l)=>s==this.active[l])&&(o=this.active);let a=this.open;a&&e.docChanged&&(a=a.map(e.changes)),e.selection||o.some(s=>s.hasResult()&&e.changes.touchesRange(s.from,s.to))||!QTe(o,this.active)?a=lv.build(o,n,this.id,a,r):a&&a.disabled&&!o.some(s=>s.state==1)&&(a=null),!a&&o.every(s=>s.state!=1)&&o.some(s=>s.hasResult())&&(o=o.map(s=>s.hasResult()?new Ja(s.source,0):s));for(let s of e.effects)s.is(XQ)&&(a=a&&a.setSelected(s.value,this.id));return o==this.active&&a==this.open?this:new Tk(o,this.id,a)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:eAe}}function QTe(t,e){if(t==e)return!0;for(let n=0,r=0;;){for(;n<t.length&&!t[n].hasResult;)n++;for(;r<e.length&&!e[r].hasResult;)r++;let i=n==t.length,o=r==e.length;if(i||o)return i==o;if(t[n++].result!=e[r++].result)return!1}}const eAe={"aria-autocomplete":"list"};function HB(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const tAe=[];function W$(t){return t.isUserEvent("input.type")?"input":t.isUserEvent("delete.backward")?"delete":null}class Ja{constructor(e,n,r=-1){this.source=e,this.state=n,this.explicitPos=r}hasResult(){return!1}update(e,n){let r=W$(e),i=this;r?i=i.handleUserEvent(e,r,n):e.docChanged?i=i.handleChange(e):e.selection&&i.state!=0&&(i=new Ja(i.source,0));for(let o of e.effects)if(o.is(RN))i=new Ja(i.source,1,o.value?Lh(e.state):-1);else if(o.is(G1))i=new Ja(i.source,0);else if(o.is(KQ))for(let a of o.value)a.source==i.source&&(i=a);return i}handleUserEvent(e,n,r){return n=="delete"||!r.activateOnTyping?this.map(e.changes):new Ja(this.source,1)}handleChange(e){return e.changes.touchesRange(Lh(e.startState))?new Ja(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Ja(this.source,this.state,e.mapPos(this.explicitPos))}}class Iv extends Ja{constructor(e,n,r,i,o){super(e,2,n),this.result=r,this.from=i,this.to=o}hasResult(){return!0}handleUserEvent(e,n,r){var i;let o=e.changes.mapPos(this.from),a=e.changes.mapPos(this.to,1),s=Lh(e.state);if((this.explicitPos<0?s<=o:s<this.from)||s>a||n=="delete"&&Lh(e.startState)==this.from)return new Ja(this.source,n=="input"&&r.activateOnTyping?1:0);let l=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),u;return nAe(this.result.validFor,e.state,o,a)?new Iv(this.source,l,this.result,o,a):this.result.update&&(u=this.result.update(this.result,o,a,new HQ(e.state,s,l>=0)))?new Iv(this.source,l,u,u.from,(i=u.to)!==null&&i!==void 0?i:Lh(e.state)):new Ja(this.source,1,l)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new Ja(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new Iv(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function nAe(t,e,n,r){if(!t)return!1;let i=e.sliceDoc(n,r);return typeof t=="function"?t(i,n,r,e):GQ(t,!0).test(i)}const KQ=un.define({map(t,e){return t.map(n=>n.map(e))}}),XQ=un.define(),$s=Ui.define({create(){return Tk.start()},update(t,e){return t.update(e)},provide:t=>[wA.from(t,e=>e.tooltip),bt.contentAttributes.from(t,e=>e.attrs)]}),JQ=bt.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class rAe{constructor(e,n,r,i){this.field=e,this.line=n,this.from=r,this.to=i}}class VN{constructor(e,n,r){this.field=e,this.from=n,this.to=r}map(e){let n=e.mapPos(this.from,-1,ko.TrackDel),r=e.mapPos(this.to,1,ko.TrackDel);return n==null||r==null?null:new VN(this.field,n,r)}}class BN{constructor(e,n){this.lines=e,this.fieldPositions=n}instantiate(e,n){let r=[],i=[n],o=e.doc.lineAt(n),a=/^\s*/.exec(o.text)[0];for(let l of this.lines){if(r.length){let u=a,c=/^\t*/.exec(l)[0].length;for(let f=0;f<c;f++)u+=e.facet(nS);i.push(n+u.length-c),l=u+l.slice(c)}r.push(l),n+=l.length+1}let s=this.fieldPositions.map(l=>new VN(l.field,i[l.line]+l.from,i[l.line]+l.to));return{text:r,ranges:s}}static parse(e){let n=[],r=[],i=[],o;for(let a of e.split(/\r\n?|\n/)){for(;o=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(a);){let s=o[1]?+o[1]:null,l=o[2]||o[3]||"",u=-1;for(let c=0;c<n.length;c++)(s!=null?n[c].seq==s:l&&n[c].name==l)&&(u=c);if(u<0){let c=0;for(;c<n.length&&(s==null||n[c].seq!=null&&n[c].seq<s);)c++;n.splice(c,0,{seq:s,name:l}),u=c;for(let f of i)f.field>=u&&f.field++}i.push(new rAe(u,r.length,o.index,o.index+l.length)),a=a.slice(0,o.index)+l+a.slice(o.index+o[0].length)}for(let s;s=/\\([{}])/.exec(a);){a=a.slice(0,s.index)+s[1]+a.slice(s.index+s[0].length);for(let l of i)l.line==r.length&&l.from>s.index&&(l.from--,l.to--)}r.push(a)}return new BN(r,i)}}let iAe=Ut.widget({widget:new class extends $f{toDOM(){let t=document.createElement("span");return t.className="cm-snippetFieldPosition",t}ignoreEvent(){return!1}}}),oAe=Ut.mark({class:"cm-snippetField"});class $0{constructor(e,n){this.ranges=e,this.active=n,this.deco=Ut.set(e.map(r=>(r.from==r.to?iAe:oAe).range(r.from,r.to)))}map(e){let n=[];for(let r of this.ranges){let i=r.map(e);if(!i)return null;n.push(i)}return new $0(n,this.active)}selectionInsideField(e){return e.ranges.every(n=>this.ranges.some(r=>r.field==this.active&&r.from<=n.from&&r.to>=n.to))}}const aS=un.define({map(t,e){return t&&t.map(e)}}),aAe=un.define(),q1=Ui.define({create(){return null},update(t,e){for(let n of e.effects){if(n.is(aS))return n.value;if(n.is(aAe)&&t)return new $0(t.ranges,n.value)}return t&&e.docChanged&&(t=t.map(e.changes)),t&&e.selection&&!t.selectionInsideField(e.selection)&&(t=null),t},provide:t=>bt.decorations.from(t,e=>e?e.deco:Ut.none)});function zN(t,e){return Ze.create(t.filter(n=>n.field==e).map(n=>Ze.range(n.from,n.to)))}function sAe(t){let e=BN.parse(t);return(n,r,i,o)=>{let{text:a,ranges:s}=e.instantiate(n.state,i),l={changes:{from:i,to:o,insert:rr.of(a)},scrollIntoView:!0,annotations:r?qQ.of(r):void 0};if(s.length&&(l.selection=zN(s,0)),s.length>1){let u=new $0(s,0),c=l.effects=[aS.of(u)];n.state.field(q1,!1)===void 0&&c.push(un.appendConfig.of([q1,hAe,pAe,JQ]))}n.dispatch(n.state.update(l))}}function ZQ(t){return({state:e,dispatch:n})=>{let r=e.field(q1,!1);if(!r||t<0&&r.active==0)return!1;let i=r.active+t,o=t>0&&!r.ranges.some(a=>a.field==i+t);return n(e.update({selection:zN(r.ranges,i),effects:aS.of(o?null:new $0(r.ranges,i))})),!0}}const lAe=({state:t,dispatch:e})=>t.field(q1,!1)?(e(t.update({effects:aS.of(null)})),!0):!1,uAe=ZQ(1),cAe=ZQ(-1),fAe=[{key:"Tab",run:uAe,shift:cAe},{key:"Escape",run:lAe}],GB=St.define({combine(t){return t.length?t[0]:fAe}}),hAe=zg.highest(eS.compute([GB],t=>t.facet(GB)));function dAe(t,e){return Object.assign(Object.assign({},e),{apply:sAe(t)})}const pAe=bt.domEventHandlers({mousedown(t,e){let n=e.state.field(q1,!1),r;if(!n||(r=e.posAtCoords({x:t.clientX,y:t.clientY}))==null)return!1;let i=n.ranges.find(o=>o.from<=r&&o.to>=r);return!i||i.field==n.active?!1:(e.dispatch({selection:zN(n.ranges,i.field),effects:aS.of(n.ranges.some(o=>o.field>i.field)?new $0(n.ranges,i.field):null)}),!0)}}),Y1={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Wp=un.define({map(t,e){let n=e.mapPos(t,-1,ko.TrackAfter);return n??void 0}}),jN=new class extends _g{};jN.startSide=1;jN.endSide=-1;const QQ=Ui.define({create(){return ar.empty},update(t,e){if(e.selection){let n=e.state.doc.lineAt(e.selection.main.head).from,r=e.startState.doc.lineAt(e.startState.selection.main.head).from;n!=e.changes.mapPos(r,-1)&&(t=ar.empty)}t=t.map(e.changes);for(let n of e.effects)n.is(Wp)&&(t=t.update({add:[jN.range(n.value,n.value+1)]}));return t}});function UN(){return[mAe,QQ]}const QO="()[]{}<>";function eee(t){for(let e=0;e<QO.length;e+=2)if(QO.charCodeAt(e)==t)return QO.charAt(e+1);return fN(t<128?t:t+1)}function tee(t,e){return t.languageDataAt("closeBrackets",e)[0]||Y1}const gAe=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),mAe=bt.inputHandler.of((t,e,n,r)=>{if((gAe?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let i=t.state.selection.main;if(r.length>2||r.length==2&&Sl(wo(r,0))==1||e!=i.from||n!=i.to)return!1;let o=bAe(t.state,r);return o?(t.dispatch(o),!0):!1}),vAe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=tee(t,t.selection.main.head).brackets||Y1.brackets,i=null,o=t.changeByRange(a=>{if(a.empty){let s=_Ae(t.doc,a.head);for(let l of r)if(l==s&&IA(t.doc,a.head)==eee(wo(l,0)))return{changes:{from:a.head-l.length,to:a.head+l.length},range:Ze.cursor(a.head-l.length)}}return{range:i=a}});return i||e(t.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!i},yAe=[{key:"Backspace",run:vAe}];function bAe(t,e){let n=tee(t,t.selection.main.head),r=n.brackets||Y1.brackets;for(let i of r){let o=eee(wo(i,0));if(e==i)return o==i?xAe(t,i,r.indexOf(i+i+i)>-1,n):SAe(t,i,o,n.before||Y1.before);if(e==o&&nee(t,t.selection.main.from))return wAe(t,i,o)}return null}function nee(t,e){let n=!1;return t.field(QQ).between(0,t.doc.length,r=>{r==e&&(n=!0)}),n}function IA(t,e){let n=t.sliceString(e,e+2);return n.slice(0,Sl(wo(n,0)))}function _Ae(t,e){let n=t.sliceString(e-2,e);return Sl(wo(n,0))==n.length?n:n.slice(1)}function SAe(t,e,n,r){let i=null,o=t.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:n,from:a.to}],effects:Wp.of(a.to+e.length),range:Ze.range(a.anchor+e.length,a.head+e.length)};let s=IA(t.doc,a.head);return!s||/\s/.test(s)||r.indexOf(s)>-1?{changes:{insert:e+n,from:a.head},effects:Wp.of(a.head+e.length),range:Ze.cursor(a.head+e.length)}:{range:i=a}});return i?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function wAe(t,e,n){let r=null,i=t.changeByRange(o=>o.empty&&IA(t.doc,o.head)==n?{changes:{from:o.head,to:o.head+n.length,insert:n},range:Ze.cursor(o.head+n.length)}:r={range:o});return r?null:t.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function xAe(t,e,n,r){let i=r.stringPrefixes||Y1.stringPrefixes,o=null,a=t.changeByRange(s=>{if(!s.empty)return{changes:[{insert:e,from:s.from},{insert:e,from:s.to}],effects:Wp.of(s.to+e.length),range:Ze.range(s.anchor+e.length,s.head+e.length)};let l=s.head,u=IA(t.doc,l),c;if(u==e){if(qB(t,l))return{changes:{insert:e+e,from:l},effects:Wp.of(l+e.length),range:Ze.cursor(l+e.length)};if(nee(t,l)){let h=n&&t.sliceDoc(l,l+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:l,to:l+h.length,insert:h},range:Ze.cursor(l+h.length)}}}else{if(n&&t.sliceDoc(l-2*e.length,l)==e+e&&(c=YB(t,l-2*e.length,i))>-1&&qB(t,c))return{changes:{insert:e+e+e+e,from:l},effects:Wp.of(l+e.length),range:Ze.cursor(l+e.length)};if(t.charCategorizer(l)(u)!=ii.Word&&YB(t,l,i)>-1&&!CAe(t,l,e,i))return{changes:{insert:e+e,from:l},effects:Wp.of(l+e.length),range:Ze.cursor(l+e.length)}}return{range:o=s}});return o?null:t.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function qB(t,e){let n=ji(t).resolveInner(e+1);return n.parent&&n.from==e}function CAe(t,e,n,r){let i=ji(t).resolveInner(e,-1),o=r.reduce((a,s)=>Math.max(a,s.length),0);for(let a=0;a<5;a++){let s=t.sliceDoc(i.from,Math.min(i.to,i.from+n.length+o)),l=s.indexOf(n);if(!l||l>-1&&r.indexOf(s.slice(0,l))>-1){let c=i.firstChild;for(;c&&c.from==i.from&&c.to-c.from>n.length+l;){if(t.sliceDoc(c.to-n.length,c.to)==n)return!1;c=c.firstChild}return!0}let u=i.to==e&&i.parent;if(!u)break;i=u}return!1}function YB(t,e,n){let r=t.charCategorizer(e);if(r(t.sliceDoc(e-1,e))!=ii.Word)return e;for(let i of n){let o=e-i.length;if(t.sliceDoc(o,e)==i&&r(t.sliceDoc(o-1,o))!=ii.Word)return o}return-1}function ree(t={}){return[$s,os.of(t),qTe,kAe,JQ]}const iee=[{key:"Ctrl-Space",run:jTe},{key:"Escape",run:UTe},{key:"ArrowDown",run:Cx(!0)},{key:"ArrowUp",run:Cx(!1)},{key:"PageDown",run:Cx(!0,"page")},{key:"PageUp",run:Cx(!1,"page")},{key:"Enter",run:zTe}],kAe=zg.highest(eS.computeN([os],t=>t.facet(os).defaultKeymap?[iee]:[]));class TAe{constructor(e,n,r){this.from=e,this.to=n,this.diagnostic=r}}class Pp{constructor(e,n,r){this.diagnostics=e,this.panel=n,this.selected=r}static init(e,n,r){let i=e,o=r.facet(Hp).markerFilter;o&&(i=o(i));let a=Ut.set(i.map(s=>s.from==s.to||s.from==s.to-1&&r.doc.lineAt(s.from).to==s.from?Ut.widget({widget:new DAe(s),diagnostic:s}).range(s.from):Ut.mark({attributes:{class:"cm-lintRange cm-lintRange-"+s.severity+(s.markClass?" "+s.markClass:"")},diagnostic:s}).range(s.from,s.to)),!0);return new Pp(a,n,a0(a))}}function a0(t,e=null,n=0){let r=null;return t.between(n,1e9,(i,o,{spec:a})=>{if(!(e&&a.diagnostic!=e))return r=new TAe(i,o,a.diagnostic),!1}),r}function oee(t,e){let n=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(r=>r.is($A))||t.changes.touchesRange(n.from,n.to))}function aee(t,e){return t.field(Fs,!1)?e:e.concat(un.appendConfig.of(dee))}function AAe(t,e){return{effects:aee(t,[$A.of(e)])}}const $A=un.define(),WN=un.define(),see=un.define(),Fs=Ui.define({create(){return new Pp(Ut.none,null,null)},update(t,e){if(e.docChanged){let n=t.diagnostics.map(e.changes),r=null;if(t.selected){let i=e.changes.mapPos(t.selected.from,1);r=a0(n,t.selected.diagnostic,i)||a0(n,null,i)}t=new Pp(n,t.panel,r)}for(let n of e.effects)n.is($A)?t=Pp.init(n.value,t.panel,e.state):n.is(WN)?t=new Pp(t.diagnostics,n.value?LA.open:null,t.selected):n.is(see)&&(t=new Pp(t.diagnostics,t.panel,n.value));return t},provide:t=>[j1.from(t,e=>e.panel),bt.decorations.from(t,e=>e.diagnostics)]}),EAe=Ut.mark({class:"cm-lintRange cm-lintRange-active"});function PAe(t,e,n){let{diagnostics:r}=t.state.field(Fs),i=[],o=2e8,a=0;r.between(e-(n<0?1:0),e+(n>0?1:0),(l,u,{spec:c})=>{e>=l&&e<=u&&(l==u||(e>l||n>0)&&(e<u||n<0))&&(i.push(c.diagnostic),o=Math.min(l,o),a=Math.max(u,a))});let s=t.state.facet(Hp).tooltipFilter;return s&&(i=s(i)),i.length?{pos:o,end:a,above:t.state.doc.lineAt(o).to<a,create(){return{dom:lee(t,i)}}}:null}function lee(t,e){return Rr("ul",{class:"cm-tooltip-lint"},e.map(n=>cee(t,n,!1)))}const OAe=t=>{let e=t.state.field(Fs,!1);(!e||!e.panel)&&t.dispatch({effects:aee(t.state,[WN.of(!0)])});let n=z1(t,LA.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},KB=t=>{let e=t.state.field(Fs,!1);return!e||!e.panel?!1:(t.dispatch({effects:WN.of(!1)}),!0)},IAe=t=>{let e=t.state.field(Fs,!1);if(!e)return!1;let n=t.state.selection.main,r=e.diagnostics.iter(n.to+1);return!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==n.from&&r.to==n.to)?!1:(t.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)},$Ae=[{key:"Mod-Shift-m",run:OAe,preventDefault:!0},{key:"F8",run:IAe}],LAe=Fi.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet(Hp);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let t=Date.now();if(t<this.lintTime-10)setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:e}=this.view,{sources:n}=e.facet(Hp);Promise.all(n.map(r=>Promise.resolve(r(this.view)))).then(r=>{let i=r.reduce((o,a)=>o.concat(a));this.view.state.doc==e.doc&&this.view.dispatch(AAe(this.view.state,i))},r=>{Vs(this.view.state,r)})}}update(t){let e=t.state.facet(Hp);(t.docChanged||e!=t.startState.facet(Hp)||e.needsRefresh&&e.needsRefresh(t))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),Hp=St.define({combine(t){return Object.assign({sources:t.map(e=>e.source)},_u(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,n)=>e?n?r=>e(r)||n(r):e:n}))}});function XB(t,e={}){return[Hp.of({source:t,config:e}),LAe,dee]}function uee(t){let e=[];if(t)e:for(let{name:n}of t){for(let r=0;r<n.length;r++){let i=n[r];if(/[a-zA-Z]/.test(i)&&!e.some(o=>o.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function cee(t,e,n){var r;let i=n?uee(e.actions):[];return Rr("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Rr("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(r=e.actions)===null||r===void 0?void 0:r.map((o,a)=>{let s=!1,l=h=>{if(h.preventDefault(),s)return;s=!0;let d=a0(t.state.field(Fs).diagnostics,e);d&&o.apply(t,d.from,d.to)},{name:u}=o,c=i[a]?u.indexOf(i[a]):-1,f=c<0?u:[u.slice(0,c),Rr("u",u.slice(c,c+1)),u.slice(c+1)];return Rr("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${u}${c<0?"":` (access key "${i[a]})"`}.`},f)}),e.source&&Rr("div",{class:"cm-diagnosticSource"},e.source))}class DAe extends $f{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return Rr("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class JB{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=cee(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class LA{constructor(e){this.view=e,this.items=[];let n=i=>{if(i.keyCode==27)KB(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],a=uee(o.actions);for(let s=0;s<a.length;s++)if(a[s].toUpperCase().charCodeAt(0)==i.keyCode){let l=a0(this.view.state.field(Fs).diagnostics,o);l&&o.actions[s].apply(e,l.from,l.to)}}else return;i.preventDefault()},r=i=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(i.target)&&this.moveSelection(o)};this.list=Rr("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:r}),this.dom=Rr("div",{class:"cm-panel-lint"},this.list,Rr("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>KB(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(Fs).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(Fs),r=0,i=!1,o=null;for(e.between(0,this.view.state.doc.length,(a,s,{spec:l})=>{let u=-1,c;for(let f=r;f<this.items.length;f++)if(this.items[f].diagnostic==l.diagnostic){u=f;break}u<0?(c=new JB(this.view,l.diagnostic),this.items.splice(r,0,c),i=!0):(c=this.items[u],u>r&&(this.items.splice(r,u-r),i=!0)),n&&c.diagnostic==n.diagnostic?c.dom.hasAttribute("aria-selected")||(c.dom.setAttribute("aria-selected","true"),o=c):c.dom.hasAttribute("aria-selected")&&c.dom.removeAttribute("aria-selected"),r++});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new JB(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:s})=>{a.top<s.top?this.list.scrollTop-=s.top-a.top:a.bottom>s.bottom&&(this.list.scrollTop+=a.bottom-s.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function n(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)n();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(Fs),r=a0(n.diagnostics,this.items[e].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:see.of(r)})}static open(e){return new LA(e)}}function s2(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function kx(t){return s2(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const MAe=bt.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:kx("#d11")},".cm-lintRange-warning":{backgroundImage:kx("orange")},".cm-lintRange-info":{backgroundImage:kx("#999")},".cm-lintRange-hint":{backgroundImage:kx("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function ZB(t){return t=="error"?4:t=="warning"?3:t=="info"?2:1}class NAe extends yc{constructor(e){super(),this.diagnostics=e,this.severity=e.reduce((n,r)=>ZB(n)<ZB(r.severity)?r.severity:n,"hint")}toDOM(e){let n=document.createElement("div");n.className="cm-lint-marker cm-lint-marker-"+this.severity;let r=this.diagnostics,i=e.state.facet(DA).tooltipFilter;return i&&(r=i(r)),r.length&&(n.onmouseover=()=>RAe(e,n,r)),n}}function FAe(t,e){let n=r=>{let i=e.getBoundingClientRect();if(!(r.clientX>i.left-10&&r.clientX<i.right+10&&r.clientY>i.top-10&&r.clientY<i.bottom+10)){for(let o=r.target;o;o=o.parentNode)if(o.nodeType==1&&o.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",n),t.state.field(hee)&&t.dispatch({effects:HN.of(null)})}};window.addEventListener("mousemove",n)}function RAe(t,e,n){function r(){let a=t.elementAtHeight(e.getBoundingClientRect().top+5-t.documentTop);t.coordsAtPos(a.from)&&t.dispatch({effects:HN.of({pos:a.from,above:!1,create(){return{dom:lee(t,n),getCoords:()=>e.getBoundingClientRect()}}})}),e.onmouseout=e.onmousemove=null,FAe(t,e)}let{hoverTime:i}=t.state.facet(DA),o=setTimeout(r,i);e.onmouseout=()=>{clearTimeout(o),e.onmouseout=e.onmousemove=null},e.onmousemove=()=>{clearTimeout(o),o=setTimeout(r,i)}}function VAe(t,e){let n=Object.create(null);for(let i of e){let o=t.lineAt(i.from);(n[o.from]||(n[o.from]=[])).push(i)}let r=[];for(let i in n)r.push(new NAe(n[i]).range(+i));return ar.of(r,!0)}const BAe=xA({class:"cm-gutter-lint",markers:t=>t.state.field(fee)}),fee=Ui.define({create(){return ar.empty},update(t,e){t=t.map(e.changes);let n=e.state.facet(DA).markerFilter;for(let r of e.effects)if(r.is($A)){let i=r.value;n&&(i=n(i||[])),t=VAe(e.state.doc,i.slice(0))}return t}}),HN=un.define(),hee=Ui.define({create(){return null},update(t,e){return t&&e.docChanged&&(t=oee(e,t)?null:Object.assign(Object.assign({},t),{pos:e.changes.mapPos(t.pos)})),e.effects.reduce((n,r)=>r.is(HN)?r.value:n,t)},provide:t=>wA.from(t)}),zAe=bt.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:s2('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:s2('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error":{content:s2('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}}),dee=[Fs,bt.decorations.compute([Fs],t=>{let{selected:e,panel:n}=t.field(Fs);return!e||!n||e.from==e.to?Ut.none:Ut.set([EAe.range(e.from,e.to)])}),PZ(PAe,{hideOn:oee}),MAe],DA=St.define({combine(t){return _u(t,{hoverTime:300,markerFilter:null,tooltipFilter:null})}});function pee(t={}){return[DA.of(t),fee,BAe,zAe,hee]}const Ug=(()=>[SN(),KCe(),mCe(),$N(),N2e(),oCe(),cCe(),An.allowMultipleSelections.of(!0),x2e(),EN(B2e,{fallback:!0}),PN(),UN(),ree(),OCe(),LCe(),wCe(),hTe(),eS.of([...yAe,...aTe,...ITe,...vke,...L2e,...iee,...$Ae])])();/*!
* VueCodemirror v6.1.1
* Copyright (c) Surmon. All rights reserved.
* Released under the MIT License.
* Surmon
*/var jAe=Object.freeze({autofocus:!1,disabled:!1,indentWithTab:!0,tabSize:2,placeholder:"",autoDestroy:!0,extensions:[Ug]}),gee=Symbol("vue-codemirror-global-config"),Sa,UAe=function(t){var e=t.onUpdate,n=t.onChange,r=t.onFocus,i=t.onBlur,o=function(a,s){var l={};for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&s.indexOf(u)<0&&(l[u]=a[u]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var c=0;for(u=Object.getOwnPropertySymbols(a);c<u.length;c++)s.indexOf(u[c])<0&&Object.prototype.propertyIsEnumerable.call(a,u[c])&&(l[u[c]]=a[u[c]])}return l}(t,["onUpdate","onChange","onFocus","onBlur"]);return An.create({doc:o.doc,selection:o.selection,extensions:(Array.isArray(o.extensions)?o.extensions:[o.extensions]).concat([bt.updateListener.of(function(a){e(a),a.docChanged&&n(a.state.doc.toString(),a),a.focusChanged&&(a.view.hasFocus?r(a):i(a))})])})},qm=function(t){var e=new X_;return{compartment:e,run:function(n){e.get(t.state)?t.dispatch({effects:e.reconfigure(n)}):t.dispatch({effects:un.appendConfig.of(e.of(n))})}}},QB=function(t,e){var n=qm(t),r=n.compartment,i=n.run;return function(o){var a=r.get(t.state);i(o??a!==e?e:[])}},Tx={type:Boolean,default:void 0},WAe={autofocus:Tx,disabled:Tx,indentWithTab:Tx,tabSize:Number,placeholder:String,style:Object,autoDestroy:Tx,phrases:Object,root:Object,extensions:Array,selection:Object},HAe={modelValue:{type:String,default:""}},GAe=Object.assign(Object.assign({},WAe),HAe);(function(t){t.Change="change",t.Update="update",t.Focus="focus",t.Blur="blur",t.Ready="ready",t.ModelUpdate="update:modelValue"})(Sa||(Sa={}));var Op={};Op[Sa.Change]=function(t,e){return!0},Op[Sa.Update]=function(t){return!0},Op[Sa.Focus]=function(t){return!0},Op[Sa.Blur]=function(t){return!0},Op[Sa.Ready]=function(t){return!0};var mee={};mee[Sa.ModelUpdate]=Op[Sa.Change];var qAe=Object.assign(Object.assign({},Op),mee),l2=zt({name:"VueCodemirror",props:Object.assign({},GAe),emits:Object.assign({},qAe),setup:function(t,e){var n=rc(),r=rc(),i=rc(),o=Object.assign(Object.assign({},jAe),Ni(gee,{})),a=Ln(function(){var s={};return Object.keys(Mn(t)).forEach(function(l){var u;l!=="modelValue"&&(s[l]=(u=t[l])!==null&&u!==void 0?u:o[l])}),s});return Bg(function(){var s;r.value=UAe({doc:t.modelValue,selection:a.value.selection,extensions:(s=o.extensions)!==null&&s!==void 0?s:[],onFocus:function(u){return e.emit(Sa.Focus,u)},onBlur:function(u){return e.emit(Sa.Blur,u)},onUpdate:function(u){return e.emit(Sa.Update,u)},onChange:function(u,c){u!==t.modelValue&&(e.emit(Sa.Change,u,c),e.emit(Sa.ModelUpdate,u,c))}}),i.value=function(u){return new bt(Object.assign({},u))}({state:r.value,parent:n.value,root:a.value.root});var l=function(u){var c=function(){return u.state.doc.toString()},f=qm(u).run,h=QB(u,[bt.editable.of(!1),An.readOnly.of(!0)]),d=QB(u,eS.of([sTe])),g=qm(u).run,y=qm(u).run,_=qm(u).run,v=qm(u).run;return{focus:function(){return u.focus()},getDoc:c,setDoc:function(S){S!==c()&&u.dispatch({changes:{from:0,to:u.state.doc.length,insert:S}})},reExtensions:f,toggleDisabled:h,toggleIndentWithTab:d,setTabSize:function(S){g([An.tabSize.of(S),nS.of(" ".repeat(S))])},setPhrases:function(S){y([An.phrases.of(S)])},setPlaceholder:function(S){_(TCe(S))},setStyle:function(S){S===void 0&&(S={}),v(bt.theme({"&":Object.assign({},S)}))}}}(i.value);wi(function(){return t.modelValue},function(u){u!==l.getDoc()&&l.setDoc(u)}),wi(function(){return t.extensions},function(u){return l.reExtensions(u||[])},{immediate:!0}),wi(function(){return a.value.disabled},function(u){return l.toggleDisabled(u)},{immediate:!0}),wi(function(){return a.value.indentWithTab},function(u){return l.toggleIndentWithTab(u)},{immediate:!0}),wi(function(){return a.value.tabSize},function(u){return l.setTabSize(u)},{immediate:!0}),wi(function(){return a.value.phrases},function(u){return l.setPhrases(u||{})},{immediate:!0}),wi(function(){return a.value.placeholder},function(u){return l.setPlaceholder(u)},{immediate:!0}),wi(function(){return a.value.style},function(u){return l.setStyle(u)},{immediate:!0}),a.value.autofocus&&l.focus(),e.emit(Sa.Ready,{state:r.value,view:i.value,container:n.value})}),E0(function(){a.value.autoDestroy&&i.value&&function(s){s.destroy()}(i.value)}),function(){return Xh("div",{class:"v-codemirror",style:{display:"contents"},ref:n})}}}),Wg=l2,YAe=function(t,e){t.component(l2.name,l2),t.component("Codemirror",l2),function(n,r){n.provide(gee,r)}(t,e)},KAe={Codemirror:Wg,install:YAe},XAe={prefix:"fas",iconName:"circle-minus",icon:[512,512,["minus-circle"],"f056","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM184 232H328c13.3 0 24 10.7 24 24s-10.7 24-24 24H184c-13.3 0-24-10.7-24-24s10.7-24 24-24z"]},JAe=XAe,ZAe={prefix:"fas",iconName:"pen-to-square",icon:[512,512,["edit"],"f044","M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"]},QAe=ZAe,eEe={prefix:"fas",iconName:"chart-simple",icon:[448,512,[],"e473","M160 80c0-26.5 21.5-48 48-48h32c26.5 0 48 21.5 48 48V432c0 26.5-21.5 48-48 48H208c-26.5 0-48-21.5-48-48V80zM0 272c0-26.5 21.5-48 48-48H80c26.5 0 48 21.5 48 48V432c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V272zM368 96h32c26.5 0 48 21.5 48 48V432c0 26.5-21.5 48-48 48H368c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48z"]},tEe={prefix:"fas",iconName:"wand-magic-sparkles",icon:[576,512,["magic-wand-sparkles"],"e2ca","M234.7 42.7L197 56.8c-3 1.1-5 4-5 7.2s2 6.1 5 7.2l37.7 14.1L248.8 123c1.1 3 4 5 7.2 5s6.1-2 7.2-5l14.1-37.7L315 71.2c3-1.1 5-4 5-7.2s-2-6.1-5-7.2L277.3 42.7 263.2 5c-1.1-3-4-5-7.2-5s-6.1 2-7.2 5L234.7 42.7zM46.1 395.4c-18.7 18.7-18.7 49.1 0 67.9l34.6 34.6c18.7 18.7 49.1 18.7 67.9 0L529.9 116.5c18.7-18.7 18.7-49.1 0-67.9L495.3 14.1c-18.7-18.7-49.1-18.7-67.9 0L46.1 395.4zM484.6 82.6l-105 105-23.3-23.3 105-105 23.3 23.3zM7.5 117.2C3 118.9 0 123.2 0 128s3 9.1 7.5 10.8L64 160l21.2 56.5c1.7 4.5 6 7.5 10.8 7.5s9.1-3 10.8-7.5L128 160l56.5-21.2c4.5-1.7 7.5-6 7.5-10.8s-3-9.1-7.5-10.8L128 96 106.8 39.5C105.1 35 100.8 32 96 32s-9.1 3-10.8 7.5L64 96 7.5 117.2zm352 256c-4.5 1.7-7.5 6-7.5 10.8s3 9.1 7.5 10.8L416 416l21.2 56.5c1.7 4.5 6 7.5 10.8 7.5s9.1-3 10.8-7.5L480 416l56.5-21.2c4.5-1.7 7.5-6 7.5-10.8s-3-9.1-7.5-10.8L480 352l-21.2-56.5c-1.7-4.5-6-7.5-10.8-7.5s-9.1 3-10.8 7.5L416 352l-56.5 21.2z"]},nEe={prefix:"fas",iconName:"arrow-pointer",icon:[320,512,["mouse-pointer"],"f245","M0 55.2V426c0 12.2 9.9 22 22 22c6.3 0 12.4-2.7 16.6-7.5L121.2 346l58.1 116.3c7.9 15.8 27.1 22.2 42.9 14.3s22.2-27.1 14.3-42.9L179.8 320H297.9c12.2 0 22.1-9.9 22.1-22.1c0-6.3-2.7-12.3-7.4-16.5L38.6 37.9C34.3 34.1 28.9 32 23.2 32C10.4 32 0 42.4 0 55.2z"]},rEe=nEe,iEe={prefix:"fas",iconName:"maximize",icon:[512,512,["expand-arrows-alt"],"f31e","M200 32H56C42.7 32 32 42.7 32 56V200c0 9.7 5.8 18.5 14.8 22.2s19.3 1.7 26.2-5.2l40-40 79 79-79 79L73 295c-6.9-6.9-17.2-8.9-26.2-5.2S32 302.3 32 312V456c0 13.3 10.7 24 24 24H200c9.7 0 18.5-5.8 22.2-14.8s1.7-19.3-5.2-26.2l-40-40 79-79 79 79-40 40c-6.9 6.9-8.9 17.2-5.2 26.2s12.5 14.8 22.2 14.8H456c13.3 0 24-10.7 24-24V312c0-9.7-5.8-18.5-14.8-22.2s-19.3-1.7-26.2 5.2l-40 40-79-79 79-79 40 40c6.9 6.9 17.2 8.9 26.2 5.2s14.8-12.5 14.8-22.2V56c0-13.3-10.7-24-24-24H312c-9.7 0-18.5 5.8-22.2 14.8s-1.7 19.3 5.2 26.2l40 40-79 79-79-79 40-40c6.9-6.9 8.9-17.2 5.2-26.2S209.7 32 200 32z"]},oEe=iEe,aEe={prefix:"fas",iconName:"circle-play",icon:[512,512,[61469,"play-circle"],"f144","M0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zM188.3 147.1c-7.6 4.2-12.3 12.3-12.3 20.9V344c0 8.7 4.7 16.7 12.3 20.9s16.8 4.1 24.3-.5l144-88c7.1-4.4 11.5-12.1 11.5-20.5s-4.4-16.1-11.5-20.5l-144-88c-7.4-4.5-16.7-4.7-24.3-.5z"]},sEe=aEe,lEe={prefix:"fas",iconName:"square",icon:[448,512,[9632,9723,9724,61590],"f0c8","M0 96C0 60.7 28.7 32 64 32H384c35.3 0 64 28.7 64 64V416c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V96z"]},uEe={prefix:"fas",iconName:"filter",icon:[512,512,[],"f0b0","M3.9 54.9C10.5 40.9 24.5 32 40 32H472c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L320 320.9V448c0 12.1-6.8 23.2-17.7 28.6s-23.8 4.3-33.5-3l-64-48c-8.1-6-12.8-15.5-12.8-25.6V320.9L9 97.3C-.7 85.4-2.8 68.8 3.9 54.9z"]},cEe={prefix:"fas",iconName:"question",icon:[320,512,[10067,10068,61736],"3f","M80 160c0-35.3 28.7-64 64-64h32c35.3 0 64 28.7 64 64v3.6c0 21.8-11.1 42.1-29.4 53.8l-42.2 27.1c-25.2 16.2-40.4 44.1-40.4 74V320c0 17.7 14.3 32 32 32s32-14.3 32-32v-1.4c0-8.2 4.2-15.8 11-20.2l42.2-27.1c36.6-23.6 58.8-64.1 58.8-107.7V160c0-70.7-57.3-128-128-128H144C73.3 32 16 89.3 16 160c0 17.7 14.3 32 32 32s32-14.3 32-32zm80 320a40 40 0 1 0 0-80 40 40 0 1 0 0 80z"]},fEe={prefix:"fas",iconName:"arrow-right",icon:[448,512,[8594],"f061","M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"]},hEe={prefix:"fas",iconName:"circle",icon:[512,512,[128308,128309,128992,128993,128994,128995,128996,9679,9898,9899,11044,61708,61915],"f111","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z"]},dEe={prefix:"fas",iconName:"pen",icon:[512,512,[128394],"f304","M362.7 19.3L314.3 67.7 444.3 197.7l48.4-48.4c25-25 25-65.5 0-90.5L453.3 19.3c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2C-1.5 489.7 .8 498.8 7 505s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L421.7 220.3 291.7 90.3z"]},pEe={prefix:"fas",iconName:"trash",icon:[448,512,[],"f1f8","M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z"]},gEe={prefix:"fas",iconName:"up-right-from-square",icon:[512,512,["external-link-alt"],"f35d","M352 0c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9L370.7 96 201.4 265.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L416 141.3l41.4 41.4c9.2 9.2 22.9 11.9 34.9 6.9s19.8-16.6 19.8-29.6V32c0-17.7-14.3-32-32-32H352zM80 32C35.8 32 0 67.8 0 112V432c0 44.2 35.8 80 80 80H400c44.2 0 80-35.8 80-80V320c0-17.7-14.3-32-32-32s-32 14.3-32 32V432c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V112c0-8.8 7.2-16 16-16H192c17.7 0 32-14.3 32-32s-14.3-32-32-32H80z"]},mEe={prefix:"fas",iconName:"circle-info",icon:[512,512,["info-circle"],"f05a","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336h24V272H216c-13.3 0-24-10.7-24-24s10.7-24 24-24h48c13.3 0 24 10.7 24 24v88h8c13.3 0 24 10.7 24 24s-10.7 24-24 24H216c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},vEe=mEe,yEe={prefix:"fas",iconName:"file-arrow-down",icon:[384,512,["file-download"],"f56d","M64 0C28.7 0 0 28.7 0 64V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V160H256c-17.7 0-32-14.3-32-32V0H64zM256 0V128H384L256 0zM216 232V334.1l31-31c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-72 72c-9.4 9.4-24.6 9.4-33.9 0l-72-72c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l31 31V232c0-13.3 10.7-24 24-24s24 10.7 24 24z"]},bEe={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},_Ee={prefix:"fas",iconName:"percent",icon:[384,512,[62101,62785,"percentage"],"25","M374.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-320 320c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l320-320zM128 128A64 64 0 1 0 0 128a64 64 0 1 0 128 0zM384 384a64 64 0 1 0 -128 0 64 64 0 1 0 128 0z"]},SEe={prefix:"fas",iconName:"circle-plus",icon:[512,512,["plus-circle"],"f055","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM232 344V280H168c-13.3 0-24-10.7-24-24s10.7-24 24-24h64V168c0-13.3 10.7-24 24-24s24 10.7 24 24v64h64c13.3 0 24 10.7 24 24s-10.7 24-24 24H280v64c0 13.3-10.7 24-24 24s-24-10.7-24-24z"]},wEe=SEe,xEe={prefix:"fas",iconName:"check",icon:[448,512,[10003,10004],"f00c","M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]},CEe={prefix:"fas",iconName:"triangle-exclamation",icon:[512,512,[9888,"exclamation-triangle","warning"],"f071","M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},kEe=!1;/*!
  * pinia v2.0.36
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */let vee;const MA=t=>vee=t,yee=Symbol();function H$(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Qb;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Qb||(Qb={}));function TEe(){const t=DM(!0),e=t.run(()=>Tl({}));let n=[],r=[];const i=mg({install(o){MA(i),i._a=o,o.provide(yee,i),o.config.globalProperties.$pinia=i,r.forEach(a=>n.push(a)),r=[]},use(o){return!this._a&&!kEe?r.push(o):n.push(o),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return i}const bee=()=>{};function ez(t,e,n,r=bee){t.push(e);const i=()=>{const o=t.indexOf(e);o>-1&&(t.splice(o,1),r())};return!n&&MM()&&NK(i),i}function Sm(t,...e){t.slice().forEach(n=>{n(...e)})}function G$(t,e){t instanceof Map&&e instanceof Map&&e.forEach((n,r)=>t.set(r,n)),t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],i=t[n];H$(i)&&H$(r)&&t.hasOwnProperty(n)&&!ci(r)&&!pf(r)?t[n]=G$(i,r):t[n]=r}return t}const AEe=Symbol();function EEe(t){return!H$(t)||!t.hasOwnProperty(AEe)}const{assign:fh}=Object;function PEe(t){return!!(ci(t)&&t.effect)}function OEe(t,e,n,r){const{state:i,actions:o,getters:a}=e,s=n.state.value[t];let l;function u(){s||(n.state.value[t]=i?i():{});const c=UM(n.state.value[t]);return fh(c,o,Object.keys(a||{}).reduce((f,h)=>(f[h]=mg(Ln(()=>{MA(n);const d=n._s.get(t);return a[h].call(d,d)})),f),{}))}return l=_ee(t,u,e,n,r,!0),l}function _ee(t,e,n={},r,i,o){let a;const s=fh({actions:{}},n),l={deep:!0};let u,c,f=mg([]),h=mg([]),d;const g=r.state.value[t];!o&&!g&&(r.state.value[t]={}),Tl({});let y;function _(T){let P;u=c=!1,typeof T=="function"?(T(r.state.value[t]),P={type:Qb.patchFunction,storeId:t,events:d}):(G$(r.state.value[t],T),P={type:Qb.patchObject,payload:T,storeId:t,events:d});const I=y=Symbol();A0().then(()=>{y===I&&(u=!0)}),c=!0,Sm(f,P,r.state.value[t])}const v=o?function(){const{state:P}=n,I=P?P():{};this.$patch(M=>{fh(M,I)})}:bee;function S(){a.stop(),f=[],h=[],r._s.delete(t)}function C(T,P){return function(){MA(r);const I=Array.from(arguments),M=[],L=[];function R(ie){M.push(ie)}function V(ie){L.push(ie)}Sm(h,{args:I,name:T,store:x,after:R,onError:V});let z;try{z=P.apply(this&&this.$id===t?this:x,I)}catch(ie){throw Sm(L,ie),ie}return z instanceof Promise?z.then(ie=>(Sm(M,ie),ie)).catch(ie=>(Sm(L,ie),Promise.reject(ie))):(Sm(M,z),z)}}const k={_p:r,$id:t,$onAction:ez.bind(null,h),$patch:_,$reset:v,$subscribe(T,P={}){const I=ez(f,T,P.detached,()=>M()),M=a.run(()=>wi(()=>r.state.value[t],L=>{(P.flush==="sync"?c:u)&&T({storeId:t,type:Qb.direct,events:d},L)},fh({},l,P)));return I},$dispose:S},x=dd(k);r._s.set(t,x);const m=r._e.run(()=>(a=DM(),a.run(()=>e())));for(const T in m){const P=m[T];if(ci(P)&&!PEe(P)||pf(P))o||(g&&EEe(P)&&(ci(P)?P.value=g[T]:G$(P,g[T])),r.state.value[t][T]=P);else if(typeof P=="function"){const I=C(T,P);m[T]=I,s.actions[T]=P}}return fh(x,m),fh(Mn(x),m),Object.defineProperty(x,"$state",{get:()=>r.state.value[t],set:T=>{_(P=>{fh(P,T)})}}),r._p.forEach(T=>{fh(x,a.run(()=>T({store:x,app:r._a,pinia:r,options:s})))}),g&&o&&n.hydrate&&n.hydrate(x.$state,g),u=!0,c=!0,x}function L0(t,e,n){let r,i;const o=typeof e=="function";typeof t=="string"?(r=t,i=o?n:e):(i=t,r=t.id);function a(s,l){const u=bu();return s=s||u&&Ni(yee,null),s&&MA(s),s=vee,s._s.has(r)||(o?_ee(r,e,i,s):OEe(r,i,s)),s._s.get(r)}return a.$id=r,a}let IEe="Store";function Yt(...t){return t.reduce((e,n)=>(e[n.$id+IEe]=function(){return n(this.$pinia)},e),{})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var q$=function(t,e){return q$=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},q$(t,e)};function Cr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");q$(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var $Ee=function(){function t(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return t}(),LEe=function(){function t(){this.browser=new $Ee,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return t}(),Sp=new LEe;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(Sp.wxa=!0,Sp.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?Sp.worker=!0:typeof navigator>"u"?(Sp.node=!0,Sp.svgSupported=!0):DEe(navigator.userAgent,Sp);function DEe(t,e){var n=e.browser,r=t.match(/Firefox\/([\d.]+)/),i=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/.+?rv:(([\d.]+))/),o=t.match(/Edge?\/([\d.]+)/),a=/micromessenger/i.test(t);r&&(n.firefox=!0,n.version=r[1]),i&&(n.ie=!0,n.version=i[1]),o&&(n.edge=!0,n.version=o[1],n.newEdge=+o[1].split(".")[0]>18),a&&(n.weChat=!0),e.svgSupported=typeof SVGRect<"u",e.touchEventsSupported="ontouchstart"in window&&!n.ie&&!n.edge,e.pointerEventsSupported="onpointerdown"in window&&(n.edge||n.ie&&+n.version>=11),e.domSupported=typeof document<"u";var s=document.documentElement.style;e.transform3dSupported=(n.ie&&"transition"in s||n.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in s)&&!("OTransition"in s),e.transformSupported=e.transform3dSupported||n.ie&&+n.version>=9}const En=Sp;var GN=12,See="sans-serif",od=GN+"px "+See,MEe=20,NEe=100,FEe="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function REe(t){var e={};if(typeof JSON>"u")return e;for(var n=0;n<t.length;n++){var r=String.fromCharCode(n+32),i=(t.charCodeAt(n)-MEe)/NEe;e[r]=i}return e}var VEe=REe(FEe),D0={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var t,e;return function(n,r){if(!t){var i=D0.createCanvas();t=i&&i.getContext("2d")}if(t)return e!==r&&(e=t.font=r||od),t.measureText(n);n=n||"",r=r||od;var o=/(\d+)px/.exec(r),a=o&&+o[1]||GN,s=0;if(r.indexOf("mono")>=0)s=a*n.length;else for(var l=0;l<n.length;l++){var u=VEe[n[l]];s+=u==null?a:u*a}return{width:s}}}(),loadImage:function(t,e,n){var r=new Image;return r.onload=e,r.onerror=n,r.src=t,r}},wee=ad(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(t,e){return t["[object "+e+"]"]=!0,t},{}),xee=ad(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(t,e){return t["[object "+e+"Array]"]=!0,t},{}),sS=Object.prototype.toString,NA=Array.prototype,BEe=NA.forEach,zEe=NA.filter,qN=NA.slice,jEe=NA.map,tz=(function(){}).constructor,Ax=tz?tz.prototype:null,YN="__proto__",UEe=2311;function Cee(){return UEe++}function KN(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];typeof console<"u"&&console.error.apply(console,t)}function Gn(t){if(t==null||typeof t!="object")return t;var e=t,n=sS.call(t);if(n==="[object Array]"){if(!e1(t)){e=[];for(var r=0,i=t.length;r<i;r++)e[r]=Gn(t[r])}}else if(xee[n]){if(!e1(t)){var o=t.constructor;if(o.from)e=o.from(t);else{e=new o(t.length);for(var r=0,i=t.length;r<i;r++)e[r]=t[r]}}}else if(!wee[n]&&!e1(t)&&!Ak(t)){e={};for(var a in t)t.hasOwnProperty(a)&&a!==YN&&(e[a]=Gn(t[a]))}return e}function hi(t,e,n){if(!Bt(e)||!Bt(t))return n?Gn(e):t;for(var r in e)if(e.hasOwnProperty(r)&&r!==YN){var i=t[r],o=e[r];Bt(o)&&Bt(i)&&!mt(o)&&!mt(i)&&!Ak(o)&&!Ak(i)&&!nz(o)&&!nz(i)&&!e1(o)&&!e1(i)?hi(i,o,n):(n||!(r in t))&&(t[r]=Gn(e[r]))}return t}function ot(t,e){if(Object.assign)Object.assign(t,e);else for(var n in e)e.hasOwnProperty(n)&&n!==YN&&(t[n]=e[n]);return t}function pi(t,e,n){for(var r=ir(e),i=0;i<r.length;i++){var o=r[i];(n?e[o]!=null:t[o]==null)&&(t[o]=e[o])}return t}function wr(t,e){if(t){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n}return-1}function WEe(t,e){var n=t.prototype;function r(){}r.prototype=e.prototype,t.prototype=new r;for(var i in n)n.hasOwnProperty(i)&&(t.prototype[i]=n[i]);t.prototype.constructor=t,t.superClass=e}function wu(t,e,n){if(t="prototype"in t?t.prototype:t,e="prototype"in e?e.prototype:e,Object.getOwnPropertyNames)for(var r=Object.getOwnPropertyNames(e),i=0;i<r.length;i++){var o=r[i];o!=="constructor"&&(n?e[o]!=null:t[o]==null)&&(t[o]=e[o])}else pi(t,e,n)}function fs(t){return!t||typeof t=="string"?!1:typeof t.length=="number"}function be(t,e,n){if(t&&e)if(t.forEach&&t.forEach===BEe)t.forEach(e,n);else if(t.length===+t.length)for(var r=0,i=t.length;r<i;r++)e.call(n,t[r],r,t);else for(var o in t)t.hasOwnProperty(o)&&e.call(n,t[o],o,t)}function Qt(t,e,n){if(!t)return[];if(!e)return XN(t);if(t.map&&t.map===jEe)return t.map(e,n);for(var r=[],i=0,o=t.length;i<o;i++)r.push(e.call(n,t[i],i,t));return r}function ad(t,e,n,r){if(t&&e){for(var i=0,o=t.length;i<o;i++)n=e.call(r,n,t[i],i,t);return n}}function Za(t,e,n){if(!t)return[];if(!e)return XN(t);if(t.filter&&t.filter===zEe)return t.filter(e,n);for(var r=[],i=0,o=t.length;i<o;i++)e.call(n,t[i],i,t)&&r.push(t[i]);return r}function ir(t){if(!t)return[];if(Object.keys)return Object.keys(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}function HEe(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return function(){return t.apply(e,n.concat(qN.call(arguments)))}}var Or=Ax&&Qn(Ax.bind)?Ax.call.bind(Ax.bind):HEe;function Vr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return function(){return t.apply(this,e.concat(qN.call(arguments)))}}function mt(t){return Array.isArray?Array.isArray(t):sS.call(t)==="[object Array]"}function Qn(t){return typeof t=="function"}function Pt(t){return typeof t=="string"}function Y$(t){return sS.call(t)==="[object String]"}function Zr(t){return typeof t=="number"}function Bt(t){var e=typeof t;return e==="function"||!!t&&e==="object"}function nz(t){return!!wee[sS.call(t)]}function js(t){return!!xee[sS.call(t)]}function Ak(t){return typeof t=="object"&&typeof t.nodeType=="number"&&typeof t.ownerDocument=="object"}function FA(t){return t.colorStops!=null}function GEe(t){return t.image!=null}function qEe(t){return t!==t}function xg(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,r=t.length;n<r;n++)if(t[n]!=null)return t[n]}function gn(t,e){return t??e}function $v(t,e,n){return t??e??n}function XN(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return qN.apply(t,e)}function kee(t){if(typeof t=="number")return[t,t,t,t];var e=t.length;return e===2?[t[0],t[1],t[0],t[1]]:e===3?[t[0],t[1],t[2],t[1]]:t}function Us(t,e){if(!t)throw new Error(e)}function ac(t){return t==null?null:typeof t.trim=="function"?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var Tee="__ec_primitive__";function K$(t){t[Tee]=!0}function e1(t){return t[Tee]}var YEe=function(){function t(){this.data={}}return t.prototype.delete=function(e){var n=this.has(e);return n&&delete this.data[e],n},t.prototype.has=function(e){return this.data.hasOwnProperty(e)},t.prototype.get=function(e){return this.data[e]},t.prototype.set=function(e,n){return this.data[e]=n,this},t.prototype.keys=function(){return ir(this.data)},t.prototype.forEach=function(e){var n=this.data;for(var r in n)n.hasOwnProperty(r)&&e(n[r],r)},t}(),Aee=typeof Map=="function";function KEe(){return Aee?new Map:new YEe}var XEe=function(){function t(e){var n=mt(e);this.data=KEe();var r=this;e instanceof t?e.each(i):e&&be(e,i);function i(o,a){n?r.set(o,a):r.set(a,o)}}return t.prototype.hasKey=function(e){return this.data.has(e)},t.prototype.get=function(e){return this.data.get(e)},t.prototype.set=function(e,n){return this.data.set(e,n),n},t.prototype.each=function(e,n){this.data.forEach(function(r,i){e.call(n,r,i)})},t.prototype.keys=function(){var e=this.data.keys();return Aee?Array.from(e):e},t.prototype.removeKey=function(e){this.data.delete(e)},t}();function mn(t){return new XEe(t)}function JEe(t,e){for(var n=new t.constructor(t.length+e.length),r=0;r<t.length;r++)n[r]=t[r];for(var i=t.length,r=0;r<e.length;r++)n[r+i]=e[r];return n}function RA(t,e){var n;if(Object.create)n=Object.create(t);else{var r=function(){};r.prototype=t,n=new r}return e&&ot(n,e),n}function Eee(t){var e=t.style;e.webkitUserSelect="none",e.userSelect="none",e.webkitTapHighlightColor="rgba(0,0,0,0)",e["-webkit-touch-callout"]="none"}function s0(t,e){return t.hasOwnProperty(e)}function Jo(){}var u2=180/Math.PI;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var X$=function(t,e){return X$=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},X$(t,e)};function kr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");X$(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function M0(t,e){return t==null&&(t=0),e==null&&(e=0),[t,e]}function ZEe(t){return[t[0],t[1]]}function rz(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function QEe(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function ePe(t){return Math.sqrt(tPe(t))}function tPe(t){return t[0]*t[0]+t[1]*t[1]}function e3(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function nPe(t,e){var n=ePe(e);return n===0?(t[0]=0,t[1]=0):(t[0]=e[0]/n,t[1]=e[1]/n),t}function J$(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}var Z$=J$;function rPe(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}var Lv=rPe;function t3(t,e,n,r){return t[0]=e[0]+r*(n[0]-e[0]),t[1]=e[1]+r*(n[1]-e[1]),t}function fc(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t}function uv(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function cv(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}var wm=function(){function t(e,n){this.target=e,this.topTarget=n&&n.topTarget}return t}(),iPe=function(){function t(e){this.handler=e,e.on("mousedown",this._dragStart,this),e.on("mousemove",this._drag,this),e.on("mouseup",this._dragEnd,this)}return t.prototype._dragStart=function(e){for(var n=e.target;n&&!n.draggable;)n=n.parent||n.__hostTarget;n&&(this._draggingTarget=n,n.dragging=!0,this._x=e.offsetX,this._y=e.offsetY,this.handler.dispatchToElement(new wm(n,e),"dragstart",e.event))},t.prototype._drag=function(e){var n=this._draggingTarget;if(n){var r=e.offsetX,i=e.offsetY,o=r-this._x,a=i-this._y;this._x=r,this._y=i,n.drift(o,a,e),this.handler.dispatchToElement(new wm(n,e),"drag",e.event);var s=this.handler.findHover(r,i,n).target,l=this._dropTarget;this._dropTarget=s,n!==s&&(l&&s!==l&&this.handler.dispatchToElement(new wm(l,e),"dragleave",e.event),s&&s!==l&&this.handler.dispatchToElement(new wm(s,e),"dragenter",e.event))}},t.prototype._dragEnd=function(e){var n=this._draggingTarget;n&&(n.dragging=!1),this.handler.dispatchToElement(new wm(n,e),"dragend",e.event),this._dropTarget&&this.handler.dispatchToElement(new wm(this._dropTarget,e),"drop",e.event),this._draggingTarget=null,this._dropTarget=null},t}();const oPe=iPe;var aPe=function(){function t(e){e&&(this._$eventProcessor=e)}return t.prototype.on=function(e,n,r,i){this._$handlers||(this._$handlers={});var o=this._$handlers;if(typeof n=="function"&&(i=r,r=n,n=null),!r||!e)return this;var a=this._$eventProcessor;n!=null&&a&&a.normalizeQuery&&(n=a.normalizeQuery(n)),o[e]||(o[e]=[]);for(var s=0;s<o[e].length;s++)if(o[e][s].h===r)return this;var l={h:r,query:n,ctx:i||this,callAtLast:r.zrEventfulCallAtLast},u=o[e].length-1,c=o[e][u];return c&&c.callAtLast?o[e].splice(u,0,l):o[e].push(l),this},t.prototype.isSilent=function(e){var n=this._$handlers;return!n||!n[e]||!n[e].length},t.prototype.off=function(e,n){var r=this._$handlers;if(!r)return this;if(!e)return this._$handlers={},this;if(n){if(r[e]){for(var i=[],o=0,a=r[e].length;o<a;o++)r[e][o].h!==n&&i.push(r[e][o]);r[e]=i}r[e]&&r[e].length===0&&delete r[e]}else delete r[e];return this},t.prototype.trigger=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(!this._$handlers)return this;var i=this._$handlers[e],o=this._$eventProcessor;if(i)for(var a=n.length,s=i.length,l=0;l<s;l++){var u=i[l];if(!(o&&o.filter&&u.query!=null&&!o.filter(e,u.query)))switch(a){case 0:u.h.call(u.ctx);break;case 1:u.h.call(u.ctx,n[0]);break;case 2:u.h.call(u.ctx,n[0],n[1]);break;default:u.h.apply(u.ctx,n);break}}return o&&o.afterTrigger&&o.afterTrigger(e),this},t.prototype.triggerWithContext=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(!this._$handlers)return this;var i=this._$handlers[e],o=this._$eventProcessor;if(i)for(var a=n.length,s=n[a-1],l=i.length,u=0;u<l;u++){var c=i[u];if(!(o&&o.filter&&c.query!=null&&!o.filter(e,c.query)))switch(a){case 0:c.h.call(s);break;case 1:c.h.call(s,n[0]);break;case 2:c.h.call(s,n[0],n[1]);break;default:c.h.apply(s,n.slice(1,a-1));break}}return o&&o.afterTrigger&&o.afterTrigger(e),this},t}();const xc=aPe;var sPe=Math.log(2);function Q$(t,e,n,r,i,o){var a=r+"-"+i,s=t.length;if(o.hasOwnProperty(a))return o[a];if(e===1){var l=Math.round(Math.log((1<<s)-1&~i)/sPe);return t[n][l]}for(var u=r|1<<n,c=n+1;r&1<<c;)c++;for(var f=0,h=0,d=0;h<s;h++){var g=1<<h;g&i||(f+=(d%2?-1:1)*t[n][h]*Q$(t,e-1,c,u,i|g,o),d++)}return o[a]=f,f}function iz(t,e){var n=[[t[0],t[1],1,0,0,0,-e[0]*t[0],-e[0]*t[1]],[0,0,0,t[0],t[1],1,-e[1]*t[0],-e[1]*t[1]],[t[2],t[3],1,0,0,0,-e[2]*t[2],-e[2]*t[3]],[0,0,0,t[2],t[3],1,-e[3]*t[2],-e[3]*t[3]],[t[4],t[5],1,0,0,0,-e[4]*t[4],-e[4]*t[5]],[0,0,0,t[4],t[5],1,-e[5]*t[4],-e[5]*t[5]],[t[6],t[7],1,0,0,0,-e[6]*t[6],-e[6]*t[7]],[0,0,0,t[6],t[7],1,-e[7]*t[6],-e[7]*t[7]]],r={},i=Q$(n,8,0,0,0,r);if(i!==0){for(var o=[],a=0;a<8;a++)for(var s=0;s<8;s++)o[s]==null&&(o[s]=0),o[s]+=((a+s)%2?-1:1)*Q$(n,7,a===0?1:0,1<<a,1<<s,r)/i*e[a];return function(l,u,c){var f=u*o[6]+c*o[7]+1;l[0]=(u*o[0]+c*o[1]+o[2])/f,l[1]=(u*o[3]+c*o[4]+o[5])/f}}}var oz="___zrEVENTSAVED",n3=[];function lPe(t,e,n,r,i){return eL(n3,e,r,i,!0)&&eL(t,n,n3[0],n3[1])}function eL(t,e,n,r,i){if(e.getBoundingClientRect&&En.domSupported&&!Pee(e)){var o=e[oz]||(e[oz]={}),a=uPe(e,o),s=cPe(a,o,i);if(s)return s(t,n,r),!0}return!1}function uPe(t,e){var n=e.markers;if(n)return n;n=e.markers=[];for(var r=["left","right"],i=["top","bottom"],o=0;o<4;o++){var a=document.createElement("div"),s=a.style,l=o%2,u=(o>>1)%2;s.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",r[l]+":0",i[u]+":0",r[1-l]+":auto",i[1-u]+":auto",""].join("!important;"),t.appendChild(a),n.push(a)}return n}function cPe(t,e,n){for(var r=n?"invTrans":"trans",i=e[r],o=e.srcCoords,a=[],s=[],l=!0,u=0;u<4;u++){var c=t[u].getBoundingClientRect(),f=2*u,h=c.left,d=c.top;a.push(h,d),l=l&&o&&h===o[f]&&d===o[f+1],s.push(t[u].offsetLeft,t[u].offsetTop)}return l&&i?i:(e.srcCoords=a,e[r]=n?iz(s,a):iz(a,s))}function Pee(t){return t.nodeName.toUpperCase()==="CANVAS"}var fPe=/([&<>"'])/g,hPe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Ls(t){return t==null?"":(t+"").replace(fPe,function(e,n){return hPe[n]})}var dPe=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,r3=[],pPe=En.browser.firefox&&+En.browser.version.split(".")[0]<39;function tL(t,e,n,r){return n=n||{},r?az(t,e,n):pPe&&e.layerX!=null&&e.layerX!==e.offsetX?(n.zrX=e.layerX,n.zrY=e.layerY):e.offsetX!=null?(n.zrX=e.offsetX,n.zrY=e.offsetY):az(t,e,n),n}function az(t,e,n){if(En.domSupported&&t.getBoundingClientRect){var r=e.clientX,i=e.clientY;if(Pee(t)){var o=t.getBoundingClientRect();n.zrX=r-o.left,n.zrY=i-o.top;return}else if(eL(r3,t,r,i)){n.zrX=r3[0],n.zrY=r3[1];return}}n.zrX=n.zrY=0}function JN(t){return t||window.event}function ul(t,e,n){if(e=JN(e),e.zrX!=null)return e;var r=e.type,i=r&&r.indexOf("touch")>=0;if(i){var a=r!=="touchend"?e.targetTouches[0]:e.changedTouches[0];a&&tL(t,a,e,n)}else{tL(t,e,e,n);var o=gPe(e);e.zrDelta=o?o/120:-(e.detail||0)/3}var s=e.button;return e.which==null&&s!==void 0&&dPe.test(e.type)&&(e.which=s&1?1:s&2?3:s&4?2:0),e}function gPe(t){var e=t.wheelDelta;if(e)return e;var n=t.deltaX,r=t.deltaY;if(n==null||r==null)return e;var i=Math.abs(r!==0?r:n),o=r>0?-1:r<0?1:n>0?-1:1;return 3*i*o}function mPe(t,e,n,r){t.addEventListener(e,n,r)}function vPe(t,e,n,r){t.removeEventListener(e,n,r)}var Oee=function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0},yPe=function(){function t(){this._track=[]}return t.prototype.recognize=function(e,n,r){return this._doTrack(e,n,r),this._recognize(e)},t.prototype.clear=function(){return this._track.length=0,this},t.prototype._doTrack=function(e,n,r){var i=e.touches;if(i){for(var o={points:[],touches:[],target:n,event:e},a=0,s=i.length;a<s;a++){var l=i[a],u=tL(r,l,{});o.points.push([u.zrX,u.zrY]),o.touches.push(l)}this._track.push(o)}},t.prototype._recognize=function(e){for(var n in i3)if(i3.hasOwnProperty(n)){var r=i3[n](this._track,e);if(r)return r}},t}();function sz(t){var e=t[1][0]-t[0][0],n=t[1][1]-t[0][1];return Math.sqrt(e*e+n*n)}function bPe(t){return[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]}var i3={pinch:function(t,e){var n=t.length;if(n){var r=(t[n-1]||{}).points,i=(t[n-2]||{}).points||r;if(i&&i.length>1&&r&&r.length>1){var o=sz(r)/sz(i);!isFinite(o)&&(o=1),e.pinchScale=o;var a=bPe(r);return e.pinchX=a[0],e.pinchY=a[1],{type:"pinch",target:t[0].target,event:e}}}}};function K1(){return[1,0,0,1,0,0]}function ZN(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function _Pe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Dv(t,e,n){var r=e[0]*n[0]+e[2]*n[1],i=e[1]*n[0]+e[3]*n[1],o=e[0]*n[2]+e[2]*n[3],a=e[1]*n[2]+e[3]*n[3],s=e[0]*n[4]+e[2]*n[5]+e[4],l=e[1]*n[4]+e[3]*n[5]+e[5];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t}function nL(t,e,n){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+n[0],t[5]=e[5]+n[1],t}function QN(t,e,n){var r=e[0],i=e[2],o=e[4],a=e[1],s=e[3],l=e[5],u=Math.sin(n),c=Math.cos(n);return t[0]=r*c+a*u,t[1]=-r*u+a*c,t[2]=i*c+s*u,t[3]=-i*u+c*s,t[4]=c*o+u*l,t[5]=c*l-u*o,t}function SPe(t,e,n){var r=n[0],i=n[1];return t[0]=e[0]*r,t[1]=e[1]*i,t[2]=e[2]*r,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*i,t}function Iee(t,e){var n=e[0],r=e[2],i=e[4],o=e[1],a=e[3],s=e[5],l=n*a-o*r;return l?(l=1/l,t[0]=a*l,t[1]=-o*l,t[2]=-r*l,t[3]=n*l,t[4]=(r*s-a*i)*l,t[5]=(o*i-n*s)*l,t):null}var wPe=function(){function t(e,n){this.x=e||0,this.y=n||0}return t.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.set=function(e,n){return this.x=e,this.y=n,this},t.prototype.equal=function(e){return e.x===this.x&&e.y===this.y},t.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},t.prototype.scale=function(e){this.x*=e,this.y*=e},t.prototype.scaleAndAdd=function(e,n){this.x+=e.x*n,this.y+=e.y*n},t.prototype.sub=function(e){return this.x-=e.x,this.y-=e.y,this},t.prototype.dot=function(e){return this.x*e.x+this.y*e.y},t.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},t.prototype.normalize=function(){var e=this.len();return this.x/=e,this.y/=e,this},t.prototype.distance=function(e){var n=this.x-e.x,r=this.y-e.y;return Math.sqrt(n*n+r*r)},t.prototype.distanceSquare=function(e){var n=this.x-e.x,r=this.y-e.y;return n*n+r*r},t.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.transform=function(e){if(e){var n=this.x,r=this.y;return this.x=e[0]*n+e[2]*r+e[4],this.y=e[1]*n+e[3]*r+e[5],this}},t.prototype.toArray=function(e){return e[0]=this.x,e[1]=this.y,e},t.prototype.fromArray=function(e){this.x=e[0],this.y=e[1]},t.set=function(e,n,r){e.x=n,e.y=r},t.copy=function(e,n){e.x=n.x,e.y=n.y},t.len=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},t.lenSquare=function(e){return e.x*e.x+e.y*e.y},t.dot=function(e,n){return e.x*n.x+e.y*n.y},t.add=function(e,n,r){e.x=n.x+r.x,e.y=n.y+r.y},t.sub=function(e,n,r){e.x=n.x-r.x,e.y=n.y-r.y},t.scale=function(e,n,r){e.x=n.x*r,e.y=n.y*r},t.scaleAndAdd=function(e,n,r,i){e.x=n.x+r.x*i,e.y=n.y+r.y*i},t.lerp=function(e,n,r,i){var o=1-i;e.x=o*n.x+i*r.x,e.y=o*n.y+i*r.y},t}();const ln=wPe;var Ex=Math.min,Px=Math.max,Kd=new ln,Xd=new ln,Jd=new ln,Zd=new ln,Ry=new ln,Vy=new ln,xPe=function(){function t(e,n,r,i){r<0&&(e=e+r,r=-r),i<0&&(n=n+i,i=-i),this.x=e,this.y=n,this.width=r,this.height=i}return t.prototype.union=function(e){var n=Ex(e.x,this.x),r=Ex(e.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=Px(e.x+e.width,this.x+this.width)-n:this.width=e.width,isFinite(this.y)&&isFinite(this.height)?this.height=Px(e.y+e.height,this.y+this.height)-r:this.height=e.height,this.x=n,this.y=r},t.prototype.applyTransform=function(e){t.applyTransform(this,this,e)},t.prototype.calculateTransform=function(e){var n=this,r=e.width/n.width,i=e.height/n.height,o=K1();return nL(o,o,[-n.x,-n.y]),SPe(o,o,[r,i]),nL(o,o,[e.x,e.y]),o},t.prototype.intersect=function(e,n){if(!e)return!1;e instanceof t||(e=t.create(e));var r=this,i=r.x,o=r.x+r.width,a=r.y,s=r.y+r.height,l=e.x,u=e.x+e.width,c=e.y,f=e.y+e.height,h=!(o<l||u<i||s<c||f<a);if(n){var d=1/0,g=0,y=Math.abs(o-l),_=Math.abs(u-i),v=Math.abs(s-c),S=Math.abs(f-a),C=Math.min(y,_),k=Math.min(v,S);o<l||u<i?C>g&&(g=C,y<_?ln.set(Vy,-y,0):ln.set(Vy,_,0)):C<d&&(d=C,y<_?ln.set(Ry,y,0):ln.set(Ry,-_,0)),s<c||f<a?k>g&&(g=k,v<S?ln.set(Vy,0,-v):ln.set(Vy,0,S)):C<d&&(d=C,v<S?ln.set(Ry,0,v):ln.set(Ry,0,-S))}return n&&ln.copy(n,h?Ry:Vy),h},t.prototype.contain=function(e,n){var r=this;return e>=r.x&&e<=r.x+r.width&&n>=r.y&&n<=r.y+r.height},t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(e){t.copy(this,e)},t.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},t.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},t.prototype.isZero=function(){return this.width===0||this.height===0},t.create=function(e){return new t(e.x,e.y,e.width,e.height)},t.copy=function(e,n){e.x=n.x,e.y=n.y,e.width=n.width,e.height=n.height},t.applyTransform=function(e,n,r){if(!r){e!==n&&t.copy(e,n);return}if(r[1]<1e-5&&r[1]>-1e-5&&r[2]<1e-5&&r[2]>-1e-5){var i=r[0],o=r[3],a=r[4],s=r[5];e.x=n.x*i+a,e.y=n.y*o+s,e.width=n.width*i,e.height=n.height*o,e.width<0&&(e.x+=e.width,e.width=-e.width),e.height<0&&(e.y+=e.height,e.height=-e.height);return}Kd.x=Jd.x=n.x,Kd.y=Zd.y=n.y,Xd.x=Zd.x=n.x+n.width,Xd.y=Jd.y=n.y+n.height,Kd.transform(r),Zd.transform(r),Xd.transform(r),Jd.transform(r),e.x=Ex(Kd.x,Xd.x,Jd.x,Zd.x),e.y=Ex(Kd.y,Xd.y,Jd.y,Zd.y);var l=Px(Kd.x,Xd.x,Jd.x,Zd.x),u=Px(Kd.y,Xd.y,Jd.y,Zd.y);e.width=l-e.x,e.height=u-e.y},t}();const Ir=xPe;var $ee="silent";function CPe(t,e,n){return{type:t,event:n,target:e.target,topTarget:e.topTarget,cancelBubble:!1,offsetX:n.zrX,offsetY:n.zrY,gestureEvent:n.gestureEvent,pinchX:n.pinchX,pinchY:n.pinchY,pinchScale:n.pinchScale,wheelDelta:n.zrDelta,zrByTouch:n.zrByTouch,which:n.which,stop:kPe}}function kPe(){Oee(this.event)}var TPe=function(t){kr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.handler=null,n}return e.prototype.dispose=function(){},e.prototype.setCursor=function(){},e}(xc),By=function(){function t(e,n){this.x=e,this.y=n}return t}(),APe=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],o3=new Ir(0,0,0,0),Lee=function(t){kr(e,t);function e(n,r,i,o,a){var s=t.call(this)||this;return s._hovered=new By(0,0),s.storage=n,s.painter=r,s.painterRoot=o,s._pointerSize=a,i=i||new TPe,s.proxy=null,s.setHandlerProxy(i),s._draggingMgr=new oPe(s),s}return e.prototype.setHandlerProxy=function(n){this.proxy&&this.proxy.dispose(),n&&(be(APe,function(r){n.on&&n.on(r,this[r],this)},this),n.handler=this),this.proxy=n},e.prototype.mousemove=function(n){var r=n.zrX,i=n.zrY,o=Dee(this,r,i),a=this._hovered,s=a.target;s&&!s.__zr&&(a=this.findHover(a.x,a.y),s=a.target);var l=this._hovered=o?new By(r,i):this.findHover(r,i),u=l.target,c=this.proxy;c.setCursor&&c.setCursor(u?u.cursor:"default"),s&&u!==s&&this.dispatchToElement(a,"mouseout",n),this.dispatchToElement(l,"mousemove",n),u&&u!==s&&this.dispatchToElement(l,"mouseover",n)},e.prototype.mouseout=function(n){var r=n.zrEventControl;r!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",n),r!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:n})},e.prototype.resize=function(){this._hovered=new By(0,0)},e.prototype.dispatch=function(n,r){var i=this[n];i&&i.call(this,r)},e.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},e.prototype.setCursorStyle=function(n){var r=this.proxy;r.setCursor&&r.setCursor(n)},e.prototype.dispatchToElement=function(n,r,i){n=n||{};var o=n.target;if(!(o&&o.silent)){for(var a="on"+r,s=CPe(r,n,i);o&&(o[a]&&(s.cancelBubble=!!o[a].call(o,s)),o.trigger(r,s),o=o.__hostTarget?o.__hostTarget:o.parent,!s.cancelBubble););s.cancelBubble||(this.trigger(r,s),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(l){typeof l[a]=="function"&&l[a].call(l,s),l.trigger&&l.trigger(r,s)}))}},e.prototype.findHover=function(n,r,i){var o=this.storage.getDisplayList(),a=new By(n,r);if(lz(o,a,n,r,i),this._pointerSize&&!a.target){for(var s=[],l=this._pointerSize,u=l/2,c=new Ir(n-u,r-u,l,l),f=o.length-1;f>=0;f--){var h=o[f];h!==i&&!h.ignore&&!h.ignoreCoarsePointer&&(!h.parent||!h.parent.ignoreCoarsePointer)&&(o3.copy(h.getBoundingRect()),h.transform&&o3.applyTransform(h.transform),o3.intersect(c)&&s.push(h))}if(s.length)for(var d=4,g=Math.PI/12,y=Math.PI*2,_=0;_<u;_+=d)for(var v=0;v<y;v+=g){var S=n+_*Math.cos(v),C=r+_*Math.sin(v);if(lz(s,a,S,C,i),a.target)return a}}return a},e.prototype.processGesture=function(n,r){this._gestureMgr||(this._gestureMgr=new yPe);var i=this._gestureMgr;r==="start"&&i.clear();var o=i.recognize(n,this.findHover(n.zrX,n.zrY,null).target,this.proxy.dom);if(r==="end"&&i.clear(),o){var a=o.type;n.gestureEvent=a;var s=new By;s.target=o.target,this.dispatchToElement(s,a,o.event)}},e}(xc);be(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(t){Lee.prototype[t]=function(e){var n=e.zrX,r=e.zrY,i=Dee(this,n,r),o,a;if((t!=="mouseup"||!i)&&(o=this.findHover(n,r),a=o.target),t==="mousedown")this._downEl=a,this._downPoint=[e.zrX,e.zrY],this._upEl=a;else if(t==="mouseup")this._upEl=a;else if(t==="click"){if(this._downEl!==this._upEl||!this._downPoint||Z$(this._downPoint,[e.zrX,e.zrY])>4)return;this._downPoint=null}this.dispatchToElement(o,t,e)}});function EPe(t,e,n){if(t[t.rectHover?"rectContain":"contain"](e,n)){for(var r=t,i=void 0,o=!1;r;){if(r.ignoreClip&&(o=!0),!o){var a=r.getClipPath();if(a&&!a.contain(e,n))return!1;r.silent&&(i=!0)}var s=r.__hostTarget;r=s||r.parent}return i?$ee:!0}return!1}function lz(t,e,n,r,i){for(var o=t.length-1;o>=0;o--){var a=t[o],s=void 0;if(a!==i&&!a.ignore&&(s=EPe(a,n,r))&&(!e.topTarget&&(e.topTarget=a),s!==$ee)){e.target=a;break}}}function Dee(t,e,n){var r=t.painter;return e<0||e>r.getWidth()||n<0||n>r.getHeight()}const PPe=Lee;var Mee=32,zy=7;function OPe(t){for(var e=0;t>=Mee;)e|=t&1,t>>=1;return t+e}function uz(t,e,n,r){var i=e+1;if(i===n)return 1;if(r(t[i++],t[e])<0){for(;i<n&&r(t[i],t[i-1])<0;)i++;IPe(t,e,i)}else for(;i<n&&r(t[i],t[i-1])>=0;)i++;return i-e}function IPe(t,e,n){for(n--;e<n;){var r=t[e];t[e++]=t[n],t[n--]=r}}function cz(t,e,n,r,i){for(r===e&&r++;r<n;r++){for(var o=t[r],a=e,s=r,l;a<s;)l=a+s>>>1,i(o,t[l])<0?s=l:a=l+1;var u=r-a;switch(u){case 3:t[a+3]=t[a+2];case 2:t[a+2]=t[a+1];case 1:t[a+1]=t[a];break;default:for(;u>0;)t[a+u]=t[a+u-1],u--}t[a]=o}}function a3(t,e,n,r,i,o){var a=0,s=0,l=1;if(o(t,e[n+i])>0){for(s=r-i;l<s&&o(t,e[n+i+l])>0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),a+=i,l+=i}else{for(s=i+1;l<s&&o(t,e[n+i-l])<=0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var u=a;a=i-l,l=i-u}for(a++;a<l;){var c=a+(l-a>>>1);o(t,e[n+c])>0?a=c+1:l=c}return l}function s3(t,e,n,r,i,o){var a=0,s=0,l=1;if(o(t,e[n+i])<0){for(s=i+1;l<s&&o(t,e[n+i-l])<0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var u=a;a=i-l,l=i-u}else{for(s=r-i;l<s&&o(t,e[n+i+l])>=0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),a+=i,l+=i}for(a++;a<l;){var c=a+(l-a>>>1);o(t,e[n+c])<0?l=c:a=c+1}return l}function $Pe(t,e){var n=zy,r,i,o=0;t.length;var a=[];r=[],i=[];function s(d,g){r[o]=d,i[o]=g,o+=1}function l(){for(;o>1;){var d=o-2;if(d>=1&&i[d-1]<=i[d]+i[d+1]||d>=2&&i[d-2]<=i[d]+i[d-1])i[d-1]<i[d+1]&&d--;else if(i[d]>i[d+1])break;c(d)}}function u(){for(;o>1;){var d=o-2;d>0&&i[d-1]<i[d+1]&&d--,c(d)}}function c(d){var g=r[d],y=i[d],_=r[d+1],v=i[d+1];i[d]=y+v,d===o-3&&(r[d+1]=r[d+2],i[d+1]=i[d+2]),o--;var S=s3(t[_],t,g,y,0,e);g+=S,y-=S,y!==0&&(v=a3(t[g+y-1],t,_,v,v-1,e),v!==0&&(y<=v?f(g,y,_,v):h(g,y,_,v)))}function f(d,g,y,_){var v=0;for(v=0;v<g;v++)a[v]=t[d+v];var S=0,C=y,k=d;if(t[k++]=t[C++],--_===0){for(v=0;v<g;v++)t[k+v]=a[S+v];return}if(g===1){for(v=0;v<_;v++)t[k+v]=t[C+v];t[k+_]=a[S];return}for(var x=n,m,T,P;;){m=0,T=0,P=!1;do if(e(t[C],a[S])<0){if(t[k++]=t[C++],T++,m=0,--_===0){P=!0;break}}else if(t[k++]=a[S++],m++,T=0,--g===1){P=!0;break}while((m|T)<x);if(P)break;do{if(m=s3(t[C],a,S,g,0,e),m!==0){for(v=0;v<m;v++)t[k+v]=a[S+v];if(k+=m,S+=m,g-=m,g<=1){P=!0;break}}if(t[k++]=t[C++],--_===0){P=!0;break}if(T=a3(a[S],t,C,_,0,e),T!==0){for(v=0;v<T;v++)t[k+v]=t[C+v];if(k+=T,C+=T,_-=T,_===0){P=!0;break}}if(t[k++]=a[S++],--g===1){P=!0;break}x--}while(m>=zy||T>=zy);if(P)break;x<0&&(x=0),x+=2}if(n=x,n<1&&(n=1),g===1){for(v=0;v<_;v++)t[k+v]=t[C+v];t[k+_]=a[S]}else{if(g===0)throw new Error;for(v=0;v<g;v++)t[k+v]=a[S+v]}}function h(d,g,y,_){var v=0;for(v=0;v<_;v++)a[v]=t[y+v];var S=d+g-1,C=_-1,k=y+_-1,x=0,m=0;if(t[k--]=t[S--],--g===0){for(x=k-(_-1),v=0;v<_;v++)t[x+v]=a[v];return}if(_===1){for(k-=g,S-=g,m=k+1,x=S+1,v=g-1;v>=0;v--)t[m+v]=t[x+v];t[k]=a[C];return}for(var T=n;;){var P=0,I=0,M=!1;do if(e(a[C],t[S])<0){if(t[k--]=t[S--],P++,I=0,--g===0){M=!0;break}}else if(t[k--]=a[C--],I++,P=0,--_===1){M=!0;break}while((P|I)<T);if(M)break;do{if(P=g-s3(a[C],t,d,g,g-1,e),P!==0){for(k-=P,S-=P,g-=P,m=k+1,x=S+1,v=P-1;v>=0;v--)t[m+v]=t[x+v];if(g===0){M=!0;break}}if(t[k--]=a[C--],--_===1){M=!0;break}if(I=_-a3(t[S],a,0,_,_-1,e),I!==0){for(k-=I,C-=I,_-=I,m=k+1,x=C+1,v=0;v<I;v++)t[m+v]=a[x+v];if(_<=1){M=!0;break}}if(t[k--]=t[S--],--g===0){M=!0;break}T--}while(P>=zy||I>=zy);if(M)break;T<0&&(T=0),T+=2}if(n=T,n<1&&(n=1),_===1){for(k-=g,S-=g,m=k+1,x=S+1,v=g-1;v>=0;v--)t[m+v]=t[x+v];t[k]=a[C]}else{if(_===0)throw new Error;for(x=k-(_-1),v=0;v<_;v++)t[x+v]=a[v]}}return{mergeRuns:l,forceMergeRuns:u,pushRun:s}}function c2(t,e,n,r){n||(n=0),r||(r=t.length);var i=r-n;if(!(i<2)){var o=0;if(i<Mee){o=uz(t,n,r,e),cz(t,n,r,n+o,e);return}var a=$Pe(t,e),s=OPe(i);do{if(o=uz(t,n,r,e),o<s){var l=i;l>s&&(l=s),cz(t,n,n+l,n+o,e),o=l}a.pushRun(n,o),a.mergeRuns(),i-=o,n+=o}while(i!==0);a.forceMergeRuns()}}var Ms=1,Ab=2,Ym=4,fz=!1;function l3(){fz||(fz=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function hz(t,e){return t.zlevel===e.zlevel?t.z===e.z?t.z2-e.z2:t.z-e.z:t.zlevel-e.zlevel}var LPe=function(){function t(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=hz}return t.prototype.traverse=function(e,n){for(var r=0;r<this._roots.length;r++)this._roots[r].traverse(e,n)},t.prototype.getDisplayList=function(e,n){n=n||!1;var r=this._displayList;return(e||!r.length)&&this.updateDisplayList(n),r},t.prototype.updateDisplayList=function(e){this._displayListLen=0;for(var n=this._roots,r=this._displayList,i=0,o=n.length;i<o;i++)this._updateAndAddDisplayable(n[i],null,e);r.length=this._displayListLen,c2(r,hz)},t.prototype._updateAndAddDisplayable=function(e,n,r){if(!(e.ignore&&!r)){e.beforeUpdate(),e.update(),e.afterUpdate();var i=e.getClipPath();if(e.ignoreClip)n=null;else if(i){n?n=n.slice():n=[];for(var o=i,a=e;o;)o.parent=a,o.updateTransform(),n.push(o),a=o,o=o.getClipPath()}if(e.childrenRef){for(var s=e.childrenRef(),l=0;l<s.length;l++){var u=s[l];e.__dirty&&(u.__dirty|=Ms),this._updateAndAddDisplayable(u,n,r)}e.__dirty=0}else{var c=e;n&&n.length?c.__clipPaths=n:c.__clipPaths&&c.__clipPaths.length>0&&(c.__clipPaths=[]),isNaN(c.z)&&(l3(),c.z=0),isNaN(c.z2)&&(l3(),c.z2=0),isNaN(c.zlevel)&&(l3(),c.zlevel=0),this._displayList[this._displayListLen++]=c}var f=e.getDecalElement&&e.getDecalElement();f&&this._updateAndAddDisplayable(f,n,r);var h=e.getTextGuideLine();h&&this._updateAndAddDisplayable(h,n,r);var d=e.getTextContent();d&&this._updateAndAddDisplayable(d,n,r)}},t.prototype.addRoot=function(e){e.__zr&&e.__zr.storage===this||this._roots.push(e)},t.prototype.delRoot=function(e){if(e instanceof Array){for(var n=0,r=e.length;n<r;n++)this.delRoot(e[n]);return}var i=wr(this._roots,e);i>=0&&this._roots.splice(i,1)},t.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},t.prototype.getRoots=function(){return this._roots},t.prototype.dispose=function(){this._displayList=null,this._roots=null},t}();const DPe=LPe;var Nee;Nee=En.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(t){return setTimeout(t,16)};const rL=Nee;var f2={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return .5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return t===0?0:Math.pow(1024,t-1)},exponentialOut:function(t){return t===1?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return t===0?0:t===1?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var e,n=.1,r=.4;return t===0?0:t===1?1:(!n||n<1?(n=1,e=r/4):e=r*Math.asin(1/n)/(2*Math.PI),-(n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)))},elasticOut:function(t){var e,n=.1,r=.4;return t===0?0:t===1?1:(!n||n<1?(n=1,e=r/4):e=r*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/r)+1)},elasticInOut:function(t){var e,n=.1,r=.4;return t===0?0:t===1?1:(!n||n<1?(n=1,e=r/4):e=r*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?-.5*(n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)):n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)*.5+1)},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},backInOut:function(t){var e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)},bounceIn:function(t){return 1-f2.bounceOut(1-t)},bounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return t<.5?f2.bounceIn(t*2)*.5:f2.bounceOut(t*2-1)*.5+.5}};const Fee=f2;var Ox=Math.pow,Dh=Math.sqrt,Ek=1e-8,Ree=1e-4,dz=Dh(3),Ix=1/3,Qu=M0(),pl=M0(),Mv=M0();function xh(t){return t>-Ek&&t<Ek}function Vee(t){return t>Ek||t<-Ek}function So(t,e,n,r,i){var o=1-i;return o*o*(o*t+3*i*e)+i*i*(i*r+3*o*n)}function pz(t,e,n,r,i){var o=1-i;return 3*(((e-t)*o+2*(n-e)*i)*o+(r-n)*i*i)}function Bee(t,e,n,r,i,o){var a=r+3*(e-n)-t,s=3*(n-e*2+t),l=3*(e-t),u=t-i,c=s*s-3*a*l,f=s*l-9*a*u,h=l*l-3*s*u,d=0;if(xh(c)&&xh(f))if(xh(s))o[0]=0;else{var g=-l/s;g>=0&&g<=1&&(o[d++]=g)}else{var y=f*f-4*c*h;if(xh(y)){var _=f/c,g=-s/a+_,v=-_/2;g>=0&&g<=1&&(o[d++]=g),v>=0&&v<=1&&(o[d++]=v)}else if(y>0){var S=Dh(y),C=c*s+1.5*a*(-f+S),k=c*s+1.5*a*(-f-S);C<0?C=-Ox(-C,Ix):C=Ox(C,Ix),k<0?k=-Ox(-k,Ix):k=Ox(k,Ix);var g=(-s-(C+k))/(3*a);g>=0&&g<=1&&(o[d++]=g)}else{var x=(2*c*s-3*a*f)/(2*Dh(c*c*c)),m=Math.acos(x)/3,T=Dh(c),P=Math.cos(m),g=(-s-2*T*P)/(3*a),v=(-s+T*(P+dz*Math.sin(m)))/(3*a),I=(-s+T*(P-dz*Math.sin(m)))/(3*a);g>=0&&g<=1&&(o[d++]=g),v>=0&&v<=1&&(o[d++]=v),I>=0&&I<=1&&(o[d++]=I)}}return d}function zee(t,e,n,r,i){var o=6*n-12*e+6*t,a=9*e+3*r-3*t-9*n,s=3*e-3*t,l=0;if(xh(a)){if(Vee(o)){var u=-s/o;u>=0&&u<=1&&(i[l++]=u)}}else{var c=o*o-4*a*s;if(xh(c))i[0]=-o/(2*a);else if(c>0){var f=Dh(c),u=(-o+f)/(2*a),h=(-o-f)/(2*a);u>=0&&u<=1&&(i[l++]=u),h>=0&&h<=1&&(i[l++]=h)}}return l}function Pk(t,e,n,r,i,o){var a=(e-t)*i+t,s=(n-e)*i+e,l=(r-n)*i+n,u=(s-a)*i+a,c=(l-s)*i+s,f=(c-u)*i+u;o[0]=t,o[1]=a,o[2]=u,o[3]=f,o[4]=f,o[5]=c,o[6]=l,o[7]=r}function MPe(t,e,n,r,i,o,a,s,l,u,c){var f,h=.005,d=1/0,g,y,_,v;Qu[0]=l,Qu[1]=u;for(var S=0;S<1;S+=.05)pl[0]=So(t,n,i,a,S),pl[1]=So(e,r,o,s,S),_=Lv(Qu,pl),_<d&&(f=S,d=_);d=1/0;for(var C=0;C<32&&!(h<Ree);C++)g=f-h,y=f+h,pl[0]=So(t,n,i,a,g),pl[1]=So(e,r,o,s,g),_=Lv(pl,Qu),g>=0&&_<d?(f=g,d=_):(Mv[0]=So(t,n,i,a,y),Mv[1]=So(e,r,o,s,y),v=Lv(Mv,Qu),y<=1&&v<d?(f=y,d=v):h*=.5);return c&&(c[0]=So(t,n,i,a,f),c[1]=So(e,r,o,s,f)),Dh(d)}function NPe(t,e,n,r,i,o,a,s,l){for(var u=t,c=e,f=0,h=1/l,d=1;d<=l;d++){var g=d*h,y=So(t,n,i,a,g),_=So(e,r,o,s,g),v=y-u,S=_-c;f+=Math.sqrt(v*v+S*S),u=y,c=_}return f}function Uo(t,e,n,r){var i=1-r;return i*(i*t+2*r*e)+r*r*n}function gz(t,e,n,r){return 2*((1-r)*(e-t)+r*(n-e))}function FPe(t,e,n,r,i){var o=t-2*e+n,a=2*(e-t),s=t-r,l=0;if(xh(o)){if(Vee(a)){var u=-s/a;u>=0&&u<=1&&(i[l++]=u)}}else{var c=a*a-4*o*s;if(xh(c)){var u=-a/(2*o);u>=0&&u<=1&&(i[l++]=u)}else if(c>0){var f=Dh(c),u=(-a+f)/(2*o),h=(-a-f)/(2*o);u>=0&&u<=1&&(i[l++]=u),h>=0&&h<=1&&(i[l++]=h)}}return l}function jee(t,e,n){var r=t+n-2*e;return r===0?.5:(t-e)/r}function Ok(t,e,n,r,i){var o=(e-t)*r+t,a=(n-e)*r+e,s=(a-o)*r+o;i[0]=t,i[1]=o,i[2]=s,i[3]=s,i[4]=a,i[5]=n}function RPe(t,e,n,r,i,o,a,s,l){var u,c=.005,f=1/0;Qu[0]=a,Qu[1]=s;for(var h=0;h<1;h+=.05){pl[0]=Uo(t,n,i,h),pl[1]=Uo(e,r,o,h);var d=Lv(Qu,pl);d<f&&(u=h,f=d)}f=1/0;for(var g=0;g<32&&!(c<Ree);g++){var y=u-c,_=u+c;pl[0]=Uo(t,n,i,y),pl[1]=Uo(e,r,o,y);var d=Lv(pl,Qu);if(y>=0&&d<f)u=y,f=d;else{Mv[0]=Uo(t,n,i,_),Mv[1]=Uo(e,r,o,_);var v=Lv(Mv,Qu);_<=1&&v<f?(u=_,f=v):c*=.5}}return l&&(l[0]=Uo(t,n,i,u),l[1]=Uo(e,r,o,u)),Dh(f)}function VPe(t,e,n,r,i,o,a){for(var s=t,l=e,u=0,c=1/a,f=1;f<=a;f++){var h=f*c,d=Uo(t,n,i,h),g=Uo(e,r,o,h),y=d-s,_=g-l;u+=Math.sqrt(y*y+_*_),s=d,l=g}return u}var BPe=/cubic-bezier\(([0-9,\.e ]+)\)/;function eF(t){var e=t&&BPe.exec(t);if(e){var n=e[1].split(","),r=+ac(n[0]),i=+ac(n[1]),o=+ac(n[2]),a=+ac(n[3]);if(isNaN(r+i+o+a))return;var s=[];return function(l){return l<=0?0:l>=1?1:Bee(0,r,o,1,l,s)&&So(0,i,a,1,s[0])}}}var zPe=function(){function t(e){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=e.life||1e3,this._delay=e.delay||0,this.loop=e.loop||!1,this.onframe=e.onframe||Jo,this.ondestroy=e.ondestroy||Jo,this.onrestart=e.onrestart||Jo,e.easing&&this.setEasing(e.easing)}return t.prototype.step=function(e,n){if(this._inited||(this._startTime=e+this._delay,this._inited=!0),this._paused){this._pausedTime+=n;return}var r=this._life,i=e-this._startTime-this._pausedTime,o=i/r;o<0&&(o=0),o=Math.min(o,1);var a=this.easingFunc,s=a?a(o):o;if(this.onframe(s),o===1)if(this.loop){var l=i%r;this._startTime=e-l,this._pausedTime=0,this.onrestart()}else return!0;return!1},t.prototype.pause=function(){this._paused=!0},t.prototype.resume=function(){this._paused=!1},t.prototype.setEasing=function(e){this.easing=e,this.easingFunc=Qn(e)?e:Fee[e]||eF(e)},t}();const jPe=zPe;var Uee=function(){function t(e){this.value=e}return t}(),UPe=function(){function t(){this._len=0}return t.prototype.insert=function(e){var n=new Uee(e);return this.insertEntry(n),n},t.prototype.insertEntry=function(e){this.head?(this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e):this.head=this.tail=e,this._len++},t.prototype.remove=function(e){var n=e.prev,r=e.next;n?n.next=r:this.head=r,r?r.prev=n:this.tail=n,e.next=e.prev=null,this._len--},t.prototype.len=function(){return this._len},t.prototype.clear=function(){this.head=this.tail=null,this._len=0},t}(),WPe=function(){function t(e){this._list=new UPe,this._maxSize=10,this._map={},this._maxSize=e}return t.prototype.put=function(e,n){var r=this._list,i=this._map,o=null;if(i[e]==null){var a=r.len(),s=this._lastRemovedEntry;if(a>=this._maxSize&&a>0){var l=r.head;r.remove(l),delete i[l.key],o=l.value,this._lastRemovedEntry=l}s?s.value=n:s=new Uee(n),s.key=e,r.insertEntry(s),i[e]=s}return o},t.prototype.get=function(e){var n=this._map[e],r=this._list;if(n!=null)return n!==r.tail&&(r.remove(n),r.insertEntry(n)),n.value},t.prototype.clear=function(){this._list.clear(),this._map={}},t.prototype.len=function(){return this._list.len()},t}();const lS=WPe;var mz={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Mh(t){return t=Math.round(t),t<0?0:t>255?255:t}function HPe(t){return t=Math.round(t),t<0?0:t>360?360:t}function Ik(t){return t<0?0:t>1?1:t}function u3(t){var e=t;return e.length&&e.charAt(e.length-1)==="%"?Mh(parseFloat(e)/100*255):Mh(parseInt(e,10))}function og(t){var e=t;return e.length&&e.charAt(e.length-1)==="%"?Ik(parseFloat(e)/100):Ik(parseFloat(e))}function c3(t,e,n){return n<0?n+=1:n>1&&(n-=1),n*6<1?t+(e-t)*n*6:n*2<1?e:n*3<2?t+(e-t)*(2/3-n)*6:t}function $x(t,e,n){return t+(e-t)*n}function ll(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function iL(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}var Wee=new lS(20),Lx=null;function xm(t,e){Lx&&iL(Lx,e),Lx=Wee.put(t,Lx||e.slice())}function hu(t,e){if(t){e=e||[];var n=Wee.get(t);if(n)return iL(e,n);t=t+"";var r=t.replace(/ /g,"").toLowerCase();if(r in mz)return iL(e,mz[r]),xm(t,e),e;var i=r.length;if(r.charAt(0)==="#"){if(i===4||i===5){var o=parseInt(r.slice(1,4),16);if(!(o>=0&&o<=4095)){ll(e,0,0,0,1);return}return ll(e,(o&3840)>>4|(o&3840)>>8,o&240|(o&240)>>4,o&15|(o&15)<<4,i===5?parseInt(r.slice(4),16)/15:1),xm(t,e),e}else if(i===7||i===9){var o=parseInt(r.slice(1,7),16);if(!(o>=0&&o<=16777215)){ll(e,0,0,0,1);return}return ll(e,(o&16711680)>>16,(o&65280)>>8,o&255,i===9?parseInt(r.slice(7),16)/255:1),xm(t,e),e}return}var a=r.indexOf("("),s=r.indexOf(")");if(a!==-1&&s+1===i){var l=r.substr(0,a),u=r.substr(a+1,s-(a+1)).split(","),c=1;switch(l){case"rgba":if(u.length!==4)return u.length===3?ll(e,+u[0],+u[1],+u[2],1):ll(e,0,0,0,1);c=og(u.pop());case"rgb":if(u.length>=3)return ll(e,u3(u[0]),u3(u[1]),u3(u[2]),u.length===3?c:og(u[3])),xm(t,e),e;ll(e,0,0,0,1);return;case"hsla":if(u.length!==4){ll(e,0,0,0,1);return}return u[3]=og(u[3]),oL(u,e),xm(t,e),e;case"hsl":if(u.length!==3){ll(e,0,0,0,1);return}return oL(u,e),xm(t,e),e;default:return}}ll(e,0,0,0,1)}}function oL(t,e){var n=(parseFloat(t[0])%360+360)%360/360,r=og(t[1]),i=og(t[2]),o=i<=.5?i*(r+1):i+r-i*r,a=i*2-o;return e=e||[],ll(e,Mh(c3(a,o,n+1/3)*255),Mh(c3(a,o,n)*255),Mh(c3(a,o,n-1/3)*255),1),t.length===4&&(e[3]=t[3]),e}function GPe(t){if(t){var e=t[0]/255,n=t[1]/255,r=t[2]/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=o-i,s=(o+i)/2,l,u;if(a===0)l=0,u=0;else{s<.5?u=a/(o+i):u=a/(2-o-i);var c=((o-e)/6+a/2)/a,f=((o-n)/6+a/2)/a,h=((o-r)/6+a/2)/a;e===o?l=h-f:n===o?l=1/3+c-h:r===o&&(l=2/3+f-c),l<0&&(l+=1),l>1&&(l-=1)}var d=[l*360,u,s];return t[3]!=null&&d.push(t[3]),d}}function aL(t,e){var n=hu(t);if(n){for(var r=0;r<3;r++)e<0?n[r]=n[r]*(1-e)|0:n[r]=(255-n[r])*e+n[r]|0,n[r]>255?n[r]=255:n[r]<0&&(n[r]=0);return Nh(n,n.length===4?"rgba":"rgb")}}function f3(t,e,n){if(!(!(e&&e.length)||!(t>=0&&t<=1))){n=n||[];var r=t*(e.length-1),i=Math.floor(r),o=Math.ceil(r),a=e[i],s=e[o],l=r-i;return n[0]=Mh($x(a[0],s[0],l)),n[1]=Mh($x(a[1],s[1],l)),n[2]=Mh($x(a[2],s[2],l)),n[3]=Ik($x(a[3],s[3],l)),n}}function h3(t,e,n,r){var i=hu(t);if(t)return i=GPe(i),e!=null&&(i[0]=HPe(e)),n!=null&&(i[1]=og(n)),r!=null&&(i[2]=og(r)),Nh(oL(i),"rgba")}function qPe(t,e){var n=hu(t);if(n&&e!=null)return n[3]=Ik(e),Nh(n,"rgba")}function Nh(t,e){if(!(!t||!t.length)){var n=t[0]+","+t[1]+","+t[2];return(e==="rgba"||e==="hsva"||e==="hsla")&&(n+=","+t[3]),e+"("+n+")"}}function $k(t,e){var n=hu(t);return n?(.299*n[0]+.587*n[1]+.114*n[2])*n[3]/255+(1-n[3])*e:0}var Lk=Math.round;function X1(t){var e;if(!t||t==="transparent")t="none";else if(typeof t=="string"&&t.indexOf("rgba")>-1){var n=hu(t);n&&(t="rgb("+n[0]+","+n[1]+","+n[2]+")",e=n[3])}return{color:t,opacity:e??1}}var vz=1e-4;function Ch(t){return t<vz&&t>-vz}function Dx(t){return Lk(t*1e3)/1e3}function sL(t){return Lk(t*1e4)/1e4}function YPe(t){return"matrix("+Dx(t[0])+","+Dx(t[1])+","+Dx(t[2])+","+Dx(t[3])+","+sL(t[4])+","+sL(t[5])+")"}var KPe={left:"start",right:"end",center:"middle",middle:"middle"};function XPe(t,e,n){return n==="top"?t+=e/2:n==="bottom"&&(t-=e/2),t}function JPe(t){return t&&(t.shadowBlur||t.shadowOffsetX||t.shadowOffsetY)}function ZPe(t){var e=t.style,n=t.getGlobalScale();return[e.shadowColor,(e.shadowBlur||0).toFixed(2),(e.shadowOffsetX||0).toFixed(2),(e.shadowOffsetY||0).toFixed(2),n[0],n[1]].join(",")}function Hee(t){return t&&!!t.image}function QPe(t){return t&&!!t.svgElement}function tF(t){return Hee(t)||QPe(t)}function Gee(t){return t.type==="linear"}function qee(t){return t.type==="radial"}function Yee(t){return t&&(t.type==="linear"||t.type==="radial")}function VA(t){return"url(#"+t+")"}function Kee(t){var e=t.getGlobalScale(),n=Math.max(e[0],e[1]);return Math.max(Math.ceil(Math.log(n)/Math.log(10)),1)}function Xee(t){var e=t.x||0,n=t.y||0,r=(t.rotation||0)*u2,i=gn(t.scaleX,1),o=gn(t.scaleY,1),a=t.skewX||0,s=t.skewY||0,l=[];return(e||n)&&l.push("translate("+e+"px,"+n+"px)"),r&&l.push("rotate("+r+")"),(i!==1||o!==1)&&l.push("scale("+i+","+o+")"),(a||s)&&l.push("skew("+Lk(a*u2)+"deg, "+Lk(s*u2)+"deg)"),l.join(" ")}var eOe=function(){return En.hasGlobalWindow&&Qn(window.btoa)?function(t){return window.btoa(unescape(encodeURIComponent(t)))}:typeof Buffer<"u"?function(t){return Buffer.from(t).toString("base64")}:function(t){return null}}(),lL=Array.prototype.slice;function Xc(t,e,n){return(e-t)*n+t}function d3(t,e,n,r){for(var i=e.length,o=0;o<i;o++)t[o]=Xc(e[o],n[o],r);return t}function tOe(t,e,n,r){for(var i=e.length,o=i&&e[0].length,a=0;a<i;a++){t[a]||(t[a]=[]);for(var s=0;s<o;s++)t[a][s]=Xc(e[a][s],n[a][s],r)}return t}function Mx(t,e,n,r){for(var i=e.length,o=0;o<i;o++)t[o]=e[o]+n[o]*r;return t}function yz(t,e,n,r){for(var i=e.length,o=i&&e[0].length,a=0;a<i;a++){t[a]||(t[a]=[]);for(var s=0;s<o;s++)t[a][s]=e[a][s]+n[a][s]*r}return t}function nOe(t,e){for(var n=t.length,r=e.length,i=n>r?e:t,o=Math.min(n,r),a=i[o-1]||{color:[0,0,0,0],offset:0},s=o;s<Math.max(n,r);s++)i.push({offset:a.offset,color:a.color.slice()})}function rOe(t,e,n){var r=t,i=e;if(!(!r.push||!i.push)){var o=r.length,a=i.length;if(o!==a){var s=o>a;if(s)r.length=a;else for(var l=o;l<a;l++)r.push(n===1?i[l]:lL.call(i[l]))}for(var u=r[0]&&r[0].length,l=0;l<r.length;l++)if(n===1)isNaN(r[l])&&(r[l]=i[l]);else for(var c=0;c<u;c++)isNaN(r[l][c])&&(r[l][c]=i[l][c])}}function h2(t){if(fs(t)){var e=t.length;if(fs(t[0])){for(var n=[],r=0;r<e;r++)n.push(lL.call(t[r]));return n}return lL.call(t)}return t}function d2(t){return t[0]=Math.floor(t[0])||0,t[1]=Math.floor(t[1])||0,t[2]=Math.floor(t[2])||0,t[3]=t[3]==null?1:t[3],"rgba("+t.join(",")+")"}function iOe(t){return fs(t&&t[0])?2:1}var Nx=0,p2=1,Jee=2,Eb=3,uL=4,cL=5,bz=6;function _z(t){return t===uL||t===cL}function Fx(t){return t===p2||t===Jee}var jy=[0,0,0,0],oOe=function(){function t(e){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=e}return t.prototype.isFinished=function(){return this._finished},t.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},t.prototype.needsAnimate=function(){return this.keyframes.length>=1},t.prototype.getAdditiveTrack=function(){return this._additiveTrack},t.prototype.addKeyframe=function(e,n,r){this._needsSort=!0;var i=this.keyframes,o=i.length,a=!1,s=bz,l=n;if(fs(n)){var u=iOe(n);s=u,(u===1&&!Zr(n[0])||u===2&&!Zr(n[0][0]))&&(a=!0)}else if(Zr(n)&&!qEe(n))s=Nx;else if(Pt(n))if(!isNaN(+n))s=Nx;else{var c=hu(n);c&&(l=c,s=Eb)}else if(FA(n)){var f=ot({},l);f.colorStops=Qt(n.colorStops,function(d){return{offset:d.offset,color:hu(d.color)}}),Gee(n)?s=uL:qee(n)&&(s=cL),l=f}o===0?this.valType=s:(s!==this.valType||s===bz)&&(a=!0),this.discrete=this.discrete||a;var h={time:e,value:l,rawValue:n,percent:0};return r&&(h.easing=r,h.easingFunc=Qn(r)?r:Fee[r]||eF(r)),i.push(h),h},t.prototype.prepare=function(e,n){var r=this.keyframes;this._needsSort&&r.sort(function(y,_){return y.time-_.time});for(var i=this.valType,o=r.length,a=r[o-1],s=this.discrete,l=Fx(i),u=_z(i),c=0;c<o;c++){var f=r[c],h=f.value,d=a.value;f.percent=f.time/e,s||(l&&c!==o-1?rOe(h,d,i):u&&nOe(h.colorStops,d.colorStops))}if(!s&&i!==cL&&n&&this.needsAnimate()&&n.needsAnimate()&&i===n.valType&&!n._finished){this._additiveTrack=n;for(var g=r[0].value,c=0;c<o;c++)i===Nx?r[c].additiveValue=r[c].value-g:i===Eb?r[c].additiveValue=Mx([],r[c].value,g,-1):Fx(i)&&(r[c].additiveValue=i===p2?Mx([],r[c].value,g,-1):yz([],r[c].value,g,-1))}},t.prototype.step=function(e,n){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var r=this._additiveTrack!=null,i=r?"additiveValue":"value",o=this.valType,a=this.keyframes,s=a.length,l=this.propName,u=o===Eb,c,f=this._lastFr,h=Math.min,d,g;if(s===1)d=g=a[0];else{if(n<0)c=0;else if(n<this._lastFrP){var y=h(f+1,s-1);for(c=y;c>=0&&!(a[c].percent<=n);c--);c=h(c,s-2)}else{for(c=f;c<s&&!(a[c].percent>n);c++);c=h(c-1,s-2)}g=a[c+1],d=a[c]}if(d&&g){this._lastFr=c,this._lastFrP=n;var _=g.percent-d.percent,v=_===0?1:h((n-d.percent)/_,1);g.easingFunc&&(v=g.easingFunc(v));var S=r?this._additiveValue:u?jy:e[l];if((Fx(o)||u)&&!S&&(S=this._additiveValue=[]),this.discrete)e[l]=v<1?d.rawValue:g.rawValue;else if(Fx(o))o===p2?d3(S,d[i],g[i],v):tOe(S,d[i],g[i],v);else if(_z(o)){var C=d[i],k=g[i],x=o===uL;e[l]={type:x?"linear":"radial",x:Xc(C.x,k.x,v),y:Xc(C.y,k.y,v),colorStops:Qt(C.colorStops,function(T,P){var I=k.colorStops[P];return{offset:Xc(T.offset,I.offset,v),color:d2(d3([],T.color,I.color,v))}}),global:k.global},x?(e[l].x2=Xc(C.x2,k.x2,v),e[l].y2=Xc(C.y2,k.y2,v)):e[l].r=Xc(C.r,k.r,v)}else if(u)d3(S,d[i],g[i],v),r||(e[l]=d2(S));else{var m=Xc(d[i],g[i],v);r?this._additiveValue=m:e[l]=m}r&&this._addToTarget(e)}}},t.prototype._addToTarget=function(e){var n=this.valType,r=this.propName,i=this._additiveValue;n===Nx?e[r]=e[r]+i:n===Eb?(hu(e[r],jy),Mx(jy,jy,i,1),e[r]=d2(jy)):n===p2?Mx(e[r],e[r],i,1):n===Jee&&yz(e[r],e[r],i,1)},t}(),aOe=function(){function t(e,n,r,i){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=e,this._loop=n,n&&i){KN("Can' use additive animation on looped animation.");return}this._additiveAnimators=i,this._allowDiscrete=r}return t.prototype.getMaxTime=function(){return this._maxTime},t.prototype.getDelay=function(){return this._delay},t.prototype.getLoop=function(){return this._loop},t.prototype.getTarget=function(){return this._target},t.prototype.changeTarget=function(e){this._target=e},t.prototype.when=function(e,n,r){return this.whenWithKeys(e,n,ir(n),r)},t.prototype.whenWithKeys=function(e,n,r,i){for(var o=this._tracks,a=0;a<r.length;a++){var s=r[a],l=o[s];if(!l){l=o[s]=new oOe(s);var u=void 0,c=this._getAdditiveTrack(s);if(c){var f=c.keyframes,h=f[f.length-1];u=h&&h.value,c.valType===Eb&&u&&(u=d2(u))}else u=this._target[s];if(u==null)continue;e>0&&l.addKeyframe(0,h2(u),i),this._trackKeys.push(s)}l.addKeyframe(e,h2(n[s]),i)}return this._maxTime=Math.max(this._maxTime,e),this},t.prototype.pause=function(){this._clip.pause(),this._paused=!0},t.prototype.resume=function(){this._clip.resume(),this._paused=!1},t.prototype.isPaused=function(){return!!this._paused},t.prototype.duration=function(e){return this._maxTime=e,this._force=!0,this},t.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var e=this._doneCbs;if(e)for(var n=e.length,r=0;r<n;r++)e[r].call(this)},t.prototype._abortedCallback=function(){this._setTracksFinished();var e=this.animation,n=this._abortedCbs;if(e&&e.removeClip(this._clip),this._clip=null,n)for(var r=0;r<n.length;r++)n[r].call(this)},t.prototype._setTracksFinished=function(){for(var e=this._tracks,n=this._trackKeys,r=0;r<n.length;r++)e[n[r]].setFinished()},t.prototype._getAdditiveTrack=function(e){var n,r=this._additiveAnimators;if(r)for(var i=0;i<r.length;i++){var o=r[i].getTrack(e);o&&(n=o)}return n},t.prototype.start=function(e){if(!(this._started>0)){this._started=1;for(var n=this,r=[],i=this._maxTime||0,o=0;o<this._trackKeys.length;o++){var a=this._trackKeys[o],s=this._tracks[a],l=this._getAdditiveTrack(a),u=s.keyframes,c=u.length;if(s.prepare(i,l),s.needsAnimate())if(!this._allowDiscrete&&s.discrete){var f=u[c-1];f&&(n._target[s.propName]=f.rawValue),s.setFinished()}else r.push(s)}if(r.length||this._force){var h=new jPe({life:i,loop:this._loop,delay:this._delay||0,onframe:function(d){n._started=2;var g=n._additiveAnimators;if(g){for(var y=!1,_=0;_<g.length;_++)if(g[_]._clip){y=!0;break}y||(n._additiveAnimators=null)}for(var _=0;_<r.length;_++)r[_].step(n._target,d);var v=n._onframeCbs;if(v)for(var _=0;_<v.length;_++)v[_](n._target,d)},ondestroy:function(){n._doneCallback()}});this._clip=h,this.animation&&this.animation.addClip(h),e&&h.setEasing(e)}else this._doneCallback();return this}},t.prototype.stop=function(e){if(this._clip){var n=this._clip;e&&n.onframe(1),this._abortedCallback()}},t.prototype.delay=function(e){return this._delay=e,this},t.prototype.during=function(e){return e&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(e)),this},t.prototype.done=function(e){return e&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(e)),this},t.prototype.aborted=function(e){return e&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(e)),this},t.prototype.getClip=function(){return this._clip},t.prototype.getTrack=function(e){return this._tracks[e]},t.prototype.getTracks=function(){var e=this;return Qt(this._trackKeys,function(n){return e._tracks[n]})},t.prototype.stopTracks=function(e,n){if(!e.length||!this._clip)return!0;for(var r=this._tracks,i=this._trackKeys,o=0;o<e.length;o++){var a=r[e[o]];a&&!a.isFinished()&&(n?a.step(this._target,1):this._started===1&&a.step(this._target,0),a.setFinished())}for(var s=!0,o=0;o<i.length;o++)if(!r[i[o]].isFinished()){s=!1;break}return s&&this._abortedCallback(),s},t.prototype.saveTo=function(e,n,r){if(e){n=n||this._trackKeys;for(var i=0;i<n.length;i++){var o=n[i],a=this._tracks[o];if(!(!a||a.isFinished())){var s=a.keyframes,l=s[r?0:s.length-1];l&&(e[o]=h2(l.rawValue))}}}},t.prototype.__changeFinalValue=function(e,n){n=n||ir(e);for(var r=0;r<n.length;r++){var i=n[r],o=this._tracks[i];if(o){var a=o.keyframes;if(a.length>1){var s=a.pop();o.addKeyframe(s.time,e[i]),o.prepare(this._maxTime,o.getAdditiveTrack())}}}},t}();const nF=aOe;function fv(){return new Date().getTime()}var sOe=function(t){kr(e,t);function e(n){var r=t.call(this)||this;return r._running=!1,r._time=0,r._pausedTime=0,r._pauseStart=0,r._paused=!1,n=n||{},r.stage=n.stage||{},r}return e.prototype.addClip=function(n){n.animation&&this.removeClip(n),this._head?(this._tail.next=n,n.prev=this._tail,n.next=null,this._tail=n):this._head=this._tail=n,n.animation=this},e.prototype.addAnimator=function(n){n.animation=this;var r=n.getClip();r&&this.addClip(r)},e.prototype.removeClip=function(n){if(n.animation){var r=n.prev,i=n.next;r?r.next=i:this._head=i,i?i.prev=r:this._tail=r,n.next=n.prev=n.animation=null}},e.prototype.removeAnimator=function(n){var r=n.getClip();r&&this.removeClip(r),n.animation=null},e.prototype.update=function(n){for(var r=fv()-this._pausedTime,i=r-this._time,o=this._head;o;){var a=o.next,s=o.step(r,i);s&&(o.ondestroy(),this.removeClip(o)),o=a}this._time=r,n||(this.trigger("frame",i),this.stage.update&&this.stage.update())},e.prototype._startLoop=function(){var n=this;this._running=!0;function r(){n._running&&(rL(r),!n._paused&&n.update())}rL(r)},e.prototype.start=function(){this._running||(this._time=fv(),this._pausedTime=0,this._startLoop())},e.prototype.stop=function(){this._running=!1},e.prototype.pause=function(){this._paused||(this._pauseStart=fv(),this._paused=!0)},e.prototype.resume=function(){this._paused&&(this._pausedTime+=fv()-this._pauseStart,this._paused=!1)},e.prototype.clear=function(){for(var n=this._head;n;){var r=n.next;n.prev=n.next=n.animation=null,n=r}this._head=this._tail=null},e.prototype.isFinished=function(){return this._head==null},e.prototype.animate=function(n,r){r=r||{},this.start();var i=new nF(n,r.loop);return this.addAnimator(i),i},e}(xc);const lOe=sOe;var uOe=300,p3=En.domSupported,g3=function(){var t=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],e=["touchstart","touchend","touchmove"],n={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},r=Qt(t,function(i){var o=i.replace("mouse","pointer");return n.hasOwnProperty(o)?o:i});return{mouse:t,touch:e,pointer:r}}(),Sz={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},wz=!1;function fL(t){var e=t.pointerType;return e==="pen"||e==="touch"}function cOe(t){t.touching=!0,t.touchTimer!=null&&(clearTimeout(t.touchTimer),t.touchTimer=null),t.touchTimer=setTimeout(function(){t.touching=!1,t.touchTimer=null},700)}function m3(t){t&&(t.zrByTouch=!0)}function fOe(t,e){return ul(t.dom,new hOe(t,e),!0)}function Zee(t,e){for(var n=e,r=!1;n&&n.nodeType!==9&&!(r=n.domBelongToZr||n!==e&&n===t.painterRoot);)n=n.parentNode;return r}var hOe=function(){function t(e,n){this.stopPropagation=Jo,this.stopImmediatePropagation=Jo,this.preventDefault=Jo,this.type=n.type,this.target=this.currentTarget=e.dom,this.pointerType=n.pointerType,this.clientX=n.clientX,this.clientY=n.clientY}return t}(),Ql={mousedown:function(t){t=ul(this.dom,t),this.__mayPointerCapture=[t.zrX,t.zrY],this.trigger("mousedown",t)},mousemove:function(t){t=ul(this.dom,t);var e=this.__mayPointerCapture;e&&(t.zrX!==e[0]||t.zrY!==e[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",t)},mouseup:function(t){t=ul(this.dom,t),this.__togglePointerCapture(!1),this.trigger("mouseup",t)},mouseout:function(t){t=ul(this.dom,t);var e=t.toElement||t.relatedTarget;Zee(this,e)||(this.__pointerCapturing&&(t.zrEventControl="no_globalout"),this.trigger("mouseout",t))},wheel:function(t){wz=!0,t=ul(this.dom,t),this.trigger("mousewheel",t)},mousewheel:function(t){wz||(t=ul(this.dom,t),this.trigger("mousewheel",t))},touchstart:function(t){t=ul(this.dom,t),m3(t),this.__lastTouchMoment=new Date,this.handler.processGesture(t,"start"),Ql.mousemove.call(this,t),Ql.mousedown.call(this,t)},touchmove:function(t){t=ul(this.dom,t),m3(t),this.handler.processGesture(t,"change"),Ql.mousemove.call(this,t)},touchend:function(t){t=ul(this.dom,t),m3(t),this.handler.processGesture(t,"end"),Ql.mouseup.call(this,t),+new Date-+this.__lastTouchMoment<uOe&&Ql.click.call(this,t)},pointerdown:function(t){Ql.mousedown.call(this,t)},pointermove:function(t){fL(t)||Ql.mousemove.call(this,t)},pointerup:function(t){Ql.mouseup.call(this,t)},pointerout:function(t){fL(t)||Ql.mouseout.call(this,t)}};be(["click","dblclick","contextmenu"],function(t){Ql[t]=function(e){e=ul(this.dom,e),this.trigger(t,e)}});var hL={pointermove:function(t){fL(t)||hL.mousemove.call(this,t)},pointerup:function(t){hL.mouseup.call(this,t)},mousemove:function(t){this.trigger("mousemove",t)},mouseup:function(t){var e=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",t),e&&(t.zrEventControl="only_globalout",this.trigger("mouseout",t))}};function dOe(t,e){var n=e.domHandlers;En.pointerEventsSupported?be(g3.pointer,function(r){g2(e,r,function(i){n[r].call(t,i)})}):(En.touchEventsSupported&&be(g3.touch,function(r){g2(e,r,function(i){n[r].call(t,i),cOe(e)})}),be(g3.mouse,function(r){g2(e,r,function(i){i=JN(i),e.touching||n[r].call(t,i)})}))}function pOe(t,e){En.pointerEventsSupported?be(Sz.pointer,n):En.touchEventsSupported||be(Sz.mouse,n);function n(r){function i(o){o=JN(o),Zee(t,o.target)||(o=fOe(t,o),e.domHandlers[r].call(t,o))}g2(e,r,i,{capture:!0})}}function g2(t,e,n,r){t.mounted[e]=n,t.listenerOpts[e]=r,mPe(t.domTarget,e,n,r)}function v3(t){var e=t.mounted;for(var n in e)e.hasOwnProperty(n)&&vPe(t.domTarget,n,e[n],t.listenerOpts[n]);t.mounted={}}var xz=function(){function t(e,n){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=e,this.domHandlers=n}return t}(),gOe=function(t){kr(e,t);function e(n,r){var i=t.call(this)||this;return i.__pointerCapturing=!1,i.dom=n,i.painterRoot=r,i._localHandlerScope=new xz(n,Ql),p3&&(i._globalHandlerScope=new xz(document,hL)),dOe(i,i._localHandlerScope),i}return e.prototype.dispose=function(){v3(this._localHandlerScope),p3&&v3(this._globalHandlerScope)},e.prototype.setCursor=function(n){this.dom.style&&(this.dom.style.cursor=n||"default")},e.prototype.__togglePointerCapture=function(n){if(this.__mayPointerCapture=null,p3&&+this.__pointerCapturing^+n){this.__pointerCapturing=n;var r=this._globalHandlerScope;n?pOe(this,r):v3(r)}},e}(xc);const mOe=gOe;var Qee=1;En.hasGlobalWindow&&(Qee=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var Dk=Qee,dL=.4,pL="#333",gL="#ccc",vOe="#eee",Cz=ZN,kz=5e-5;function Qd(t){return t>kz||t<-kz}var ep=[],Cm=[],y3=K1(),b3=Math.abs,rF=function(){function t(){}return t.prototype.getLocalTransform=function(e){return t.getLocalTransform(this,e)},t.prototype.setPosition=function(e){this.x=e[0],this.y=e[1]},t.prototype.setScale=function(e){this.scaleX=e[0],this.scaleY=e[1]},t.prototype.setSkew=function(e){this.skewX=e[0],this.skewY=e[1]},t.prototype.setOrigin=function(e){this.originX=e[0],this.originY=e[1]},t.prototype.needLocalTransform=function(){return Qd(this.rotation)||Qd(this.x)||Qd(this.y)||Qd(this.scaleX-1)||Qd(this.scaleY-1)||Qd(this.skewX)||Qd(this.skewY)},t.prototype.updateTransform=function(){var e=this.parent&&this.parent.transform,n=this.needLocalTransform(),r=this.transform;if(!(n||e)){r&&(Cz(r),this.invTransform=null);return}r=r||K1(),n?this.getLocalTransform(r):Cz(r),e&&(n?Dv(r,e,r):_Pe(r,e)),this.transform=r,this._resolveGlobalScaleRatio(r)},t.prototype._resolveGlobalScaleRatio=function(e){var n=this.globalScaleRatio;if(n!=null&&n!==1){this.getGlobalScale(ep);var r=ep[0]<0?-1:1,i=ep[1]<0?-1:1,o=((ep[0]-r)*n+r)/ep[0]||0,a=((ep[1]-i)*n+i)/ep[1]||0;e[0]*=o,e[1]*=o,e[2]*=a,e[3]*=a}this.invTransform=this.invTransform||K1(),Iee(this.invTransform,e)},t.prototype.getComputedTransform=function(){for(var e=this,n=[];e;)n.push(e),e=e.parent;for(;e=n.pop();)e.updateTransform();return this.transform},t.prototype.setLocalTransform=function(e){if(e){var n=e[0]*e[0]+e[1]*e[1],r=e[2]*e[2]+e[3]*e[3],i=Math.atan2(e[1],e[0]),o=Math.PI/2+i-Math.atan2(e[3],e[2]);r=Math.sqrt(r)*Math.cos(o),n=Math.sqrt(n),this.skewX=o,this.skewY=0,this.rotation=-i,this.x=+e[4],this.y=+e[5],this.scaleX=n,this.scaleY=r,this.originX=0,this.originY=0}},t.prototype.decomposeTransform=function(){if(this.transform){var e=this.parent,n=this.transform;e&&e.transform&&(Dv(Cm,e.invTransform,n),n=Cm);var r=this.originX,i=this.originY;(r||i)&&(y3[4]=r,y3[5]=i,Dv(Cm,n,y3),Cm[4]-=r,Cm[5]-=i,n=Cm),this.setLocalTransform(n)}},t.prototype.getGlobalScale=function(e){var n=this.transform;return e=e||[],n?(e[0]=Math.sqrt(n[0]*n[0]+n[1]*n[1]),e[1]=Math.sqrt(n[2]*n[2]+n[3]*n[3]),n[0]<0&&(e[0]=-e[0]),n[3]<0&&(e[1]=-e[1]),e):(e[0]=1,e[1]=1,e)},t.prototype.transformCoordToLocal=function(e,n){var r=[e,n],i=this.invTransform;return i&&fc(r,r,i),r},t.prototype.transformCoordToGlobal=function(e,n){var r=[e,n],i=this.transform;return i&&fc(r,r,i),r},t.prototype.getLineScale=function(){var e=this.transform;return e&&b3(e[0]-1)>1e-10&&b3(e[3]-1)>1e-10?Math.sqrt(b3(e[0]*e[3]-e[2]*e[1])):1},t.prototype.copyTransform=function(e){ete(this,e)},t.getLocalTransform=function(e,n){n=n||[];var r=e.originX||0,i=e.originY||0,o=e.scaleX,a=e.scaleY,s=e.anchorX,l=e.anchorY,u=e.rotation||0,c=e.x,f=e.y,h=e.skewX?Math.tan(e.skewX):0,d=e.skewY?Math.tan(-e.skewY):0;if(r||i||s||l){var g=r+s,y=i+l;n[4]=-g*o-h*y*a,n[5]=-y*a-d*g*o}else n[4]=n[5]=0;return n[0]=o,n[3]=a,n[1]=d*o,n[2]=h*a,u&&QN(n,n,u),n[4]+=r+c,n[5]+=i+f,n},t.initDefaultProps=function(){var e=t.prototype;e.scaleX=e.scaleY=e.globalScaleRatio=1,e.x=e.y=e.originX=e.originY=e.skewX=e.skewY=e.rotation=e.anchorX=e.anchorY=0}(),t}(),J1=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function ete(t,e){for(var n=0;n<J1.length;n++){var r=J1[n];t[r]=e[r]}}var Tz={};function Bs(t,e){e=e||od;var n=Tz[e];n||(n=Tz[e]=new lS(500));var r=n.get(t);return r==null&&(r=D0.measureText(t,e).width,n.put(t,r)),r}function Az(t,e,n,r){var i=Bs(t,e),o=BA(e),a=Pb(0,i,n),s=Km(0,o,r),l=new Ir(a,s,i,o);return l}function tte(t,e,n,r){var i=((t||"")+"").split(`
`),o=i.length;if(o===1)return Az(i[0],e,n,r);for(var a=new Ir(0,0,0,0),s=0;s<i.length;s++){var l=Az(i[s],e,n,r);s===0?a.copy(l):a.union(l)}return a}function Pb(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function Km(t,e,n){return n==="middle"?t-=e/2:n==="bottom"&&(t-=e),t}function BA(t){return Bs("国",t)}function l0(t,e){return typeof t=="string"?t.lastIndexOf("%")>=0?parseFloat(t)/100*e:parseFloat(t):t}function nte(t,e,n){var r=e.position||"inside",i=e.distance!=null?e.distance:5,o=n.height,a=n.width,s=o/2,l=n.x,u=n.y,c="left",f="top";if(r instanceof Array)l+=l0(r[0],n.width),u+=l0(r[1],n.height),c=null,f=null;else switch(r){case"left":l-=i,u+=s,c="right",f="middle";break;case"right":l+=i+a,u+=s,f="middle";break;case"top":l+=a/2,u-=i,c="center",f="bottom";break;case"bottom":l+=a/2,u+=o+i,c="center";break;case"inside":l+=a/2,u+=s,c="center",f="middle";break;case"insideLeft":l+=i,u+=s,f="middle";break;case"insideRight":l+=a-i,u+=s,c="right",f="middle";break;case"insideTop":l+=a/2,u+=i,c="center";break;case"insideBottom":l+=a/2,u+=o-i,c="center",f="bottom";break;case"insideTopLeft":l+=i,u+=i;break;case"insideTopRight":l+=a-i,u+=i,c="right";break;case"insideBottomLeft":l+=i,u+=o-i,f="bottom";break;case"insideBottomRight":l+=a-i,u+=o-i,c="right",f="bottom";break}return t=t||{},t.x=l,t.y=u,t.align=c,t.verticalAlign=f,t}var _3="__zr_normal__",S3=J1.concat(["ignore"]),yOe=ad(J1,function(t,e){return t[e]=!0,t},{ignore:!1}),km={},bOe=new Ir(0,0,0,0),iF=function(){function t(e){this.id=Cee(),this.animators=[],this.currentStates=[],this.states={},this._init(e)}return t.prototype._init=function(e){this.attr(e)},t.prototype.drift=function(e,n,r){switch(this.draggable){case"horizontal":n=0;break;case"vertical":e=0;break}var i=this.transform;i||(i=this.transform=[1,0,0,1,0,0]),i[4]+=e,i[5]+=n,this.decomposeTransform(),this.markRedraw()},t.prototype.beforeUpdate=function(){},t.prototype.afterUpdate=function(){},t.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},t.prototype.updateInnerText=function(e){var n=this._textContent;if(n&&(!n.ignore||e)){this.textConfig||(this.textConfig={});var r=this.textConfig,i=r.local,o=n.innerTransformable,a=void 0,s=void 0,l=!1;o.parent=i?this:null;var u=!1;if(o.copyTransform(n),r.position!=null){var c=bOe;r.layoutRect?c.copy(r.layoutRect):c.copy(this.getBoundingRect()),i||c.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(km,r,c):nte(km,r,c),o.x=km.x,o.y=km.y,a=km.align,s=km.verticalAlign;var f=r.origin;if(f&&r.rotation!=null){var h=void 0,d=void 0;f==="center"?(h=c.width*.5,d=c.height*.5):(h=l0(f[0],c.width),d=l0(f[1],c.height)),u=!0,o.originX=-o.x+h+(i?0:c.x),o.originY=-o.y+d+(i?0:c.y)}}r.rotation!=null&&(o.rotation=r.rotation);var g=r.offset;g&&(o.x+=g[0],o.y+=g[1],u||(o.originX=-g[0],o.originY=-g[1]));var y=r.inside==null?typeof r.position=="string"&&r.position.indexOf("inside")>=0:r.inside,_=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),v=void 0,S=void 0,C=void 0;y&&this.canBeInsideText()?(v=r.insideFill,S=r.insideStroke,(v==null||v==="auto")&&(v=this.getInsideTextFill()),(S==null||S==="auto")&&(S=this.getInsideTextStroke(v),C=!0)):(v=r.outsideFill,S=r.outsideStroke,(v==null||v==="auto")&&(v=this.getOutsideFill()),(S==null||S==="auto")&&(S=this.getOutsideStroke(v),C=!0)),v=v||"#000",(v!==_.fill||S!==_.stroke||C!==_.autoStroke||a!==_.align||s!==_.verticalAlign)&&(l=!0,_.fill=v,_.stroke=S,_.autoStroke=C,_.align=a,_.verticalAlign=s,n.setDefaultTextStyle(_)),n.__dirty|=Ms,l&&n.dirtyStyle(!0)}},t.prototype.canBeInsideText=function(){return!0},t.prototype.getInsideTextFill=function(){return"#fff"},t.prototype.getInsideTextStroke=function(e){return"#000"},t.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?gL:pL},t.prototype.getOutsideStroke=function(e){var n=this.__zr&&this.__zr.getBackgroundColor(),r=typeof n=="string"&&hu(n);r||(r=[255,255,255,1]);for(var i=r[3],o=this.__zr.isDarkMode(),a=0;a<3;a++)r[a]=r[a]*i+(o?0:255)*(1-i);return r[3]=1,Nh(r,"rgba")},t.prototype.traverse=function(e,n){},t.prototype.attrKV=function(e,n){e==="textConfig"?this.setTextConfig(n):e==="textContent"?this.setTextContent(n):e==="clipPath"?this.setClipPath(n):e==="extra"?(this.extra=this.extra||{},ot(this.extra,n)):this[e]=n},t.prototype.hide=function(){this.ignore=!0,this.markRedraw()},t.prototype.show=function(){this.ignore=!1,this.markRedraw()},t.prototype.attr=function(e,n){if(typeof e=="string")this.attrKV(e,n);else if(Bt(e))for(var r=e,i=ir(r),o=0;o<i.length;o++){var a=i[o];this.attrKV(a,e[a])}return this.markRedraw(),this},t.prototype.saveCurrentToNormalState=function(e){this._innerSaveToNormal(e);for(var n=this._normalState,r=0;r<this.animators.length;r++){var i=this.animators[r],o=i.__fromStateTransition;if(!(i.getLoop()||o&&o!==_3)){var a=i.targetName,s=a?n[a]:n;i.saveTo(s)}}},t.prototype._innerSaveToNormal=function(e){var n=this._normalState;n||(n=this._normalState={}),e.textConfig&&!n.textConfig&&(n.textConfig=this.textConfig),this._savePrimaryToNormal(e,n,S3)},t.prototype._savePrimaryToNormal=function(e,n,r){for(var i=0;i<r.length;i++){var o=r[i];e[o]!=null&&!(o in n)&&(n[o]=this[o])}},t.prototype.hasState=function(){return this.currentStates.length>0},t.prototype.getState=function(e){return this.states[e]},t.prototype.ensureState=function(e){var n=this.states;return n[e]||(n[e]={}),n[e]},t.prototype.clearStates=function(e){this.useState(_3,!1,e)},t.prototype.useState=function(e,n,r,i){var o=e===_3,a=this.hasState();if(!(!a&&o)){var s=this.currentStates,l=this.stateTransition;if(!(wr(s,e)>=0&&(n||s.length===1))){var u;if(this.stateProxy&&!o&&(u=this.stateProxy(e)),u||(u=this.states&&this.states[e]),!u&&!o){KN("State "+e+" not exists.");return}o||this.saveCurrentToNormalState(u);var c=!!(u&&u.hoverLayer||i);c&&this._toggleHoverLayerFlag(!0),this._applyStateObj(e,u,this._normalState,n,!r&&!this.__inHover&&l&&l.duration>0,l);var f=this._textContent,h=this._textGuide;return f&&f.useState(e,n,r,c),h&&h.useState(e,n,r,c),o?(this.currentStates=[],this._normalState={}):n?this.currentStates.push(e):this.currentStates=[e],this._updateAnimationTargets(),this.markRedraw(),!c&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Ms),u}}},t.prototype.useStates=function(e,n,r){if(!e.length)this.clearStates();else{var i=[],o=this.currentStates,a=e.length,s=a===o.length;if(s){for(var l=0;l<a;l++)if(e[l]!==o[l]){s=!1;break}}if(s)return;for(var l=0;l<a;l++){var u=e[l],c=void 0;this.stateProxy&&(c=this.stateProxy(u,e)),c||(c=this.states[u]),c&&i.push(c)}var f=i[a-1],h=!!(f&&f.hoverLayer||r);h&&this._toggleHoverLayerFlag(!0);var d=this._mergeStates(i),g=this.stateTransition;this.saveCurrentToNormalState(d),this._applyStateObj(e.join(","),d,this._normalState,!1,!n&&!this.__inHover&&g&&g.duration>0,g);var y=this._textContent,_=this._textGuide;y&&y.useStates(e,n,h),_&&_.useStates(e,n,h),this._updateAnimationTargets(),this.currentStates=e.slice(),this.markRedraw(),!h&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Ms)}},t.prototype._updateAnimationTargets=function(){for(var e=0;e<this.animators.length;e++){var n=this.animators[e];n.targetName&&n.changeTarget(this[n.targetName])}},t.prototype.removeState=function(e){var n=wr(this.currentStates,e);if(n>=0){var r=this.currentStates.slice();r.splice(n,1),this.useStates(r)}},t.prototype.replaceState=function(e,n,r){var i=this.currentStates.slice(),o=wr(i,e),a=wr(i,n)>=0;o>=0?a?i.splice(o,1):i[o]=n:r&&!a&&i.push(n),this.useStates(i)},t.prototype.toggleState=function(e,n){n?this.useState(e,!0):this.removeState(e)},t.prototype._mergeStates=function(e){for(var n={},r,i=0;i<e.length;i++){var o=e[i];ot(n,o),o.textConfig&&(r=r||{},ot(r,o.textConfig))}return r&&(n.textConfig=r),n},t.prototype._applyStateObj=function(e,n,r,i,o,a){var s=!(n&&i);n&&n.textConfig?(this.textConfig=ot({},i?this.textConfig:r.textConfig),ot(this.textConfig,n.textConfig)):s&&r.textConfig&&(this.textConfig=r.textConfig);for(var l={},u=!1,c=0;c<S3.length;c++){var f=S3[c],h=o&&yOe[f];n&&n[f]!=null?h?(u=!0,l[f]=n[f]):this[f]=n[f]:s&&r[f]!=null&&(h?(u=!0,l[f]=r[f]):this[f]=r[f])}if(!o)for(var c=0;c<this.animators.length;c++){var d=this.animators[c],g=d.targetName;d.getLoop()||d.__changeFinalValue(g?(n||r)[g]:n||r)}u&&this._transitionState(e,l,a)},t.prototype._attachComponent=function(e){if(!(e.__zr&&!e.__hostTarget)&&e!==this){var n=this.__zr;n&&e.addSelfToZr(n),e.__zr=n,e.__hostTarget=this}},t.prototype._detachComponent=function(e){e.__zr&&e.removeSelfFromZr(e.__zr),e.__zr=null,e.__hostTarget=null},t.prototype.getClipPath=function(){return this._clipPath},t.prototype.setClipPath=function(e){this._clipPath&&this._clipPath!==e&&this.removeClipPath(),this._attachComponent(e),this._clipPath=e,this.markRedraw()},t.prototype.removeClipPath=function(){var e=this._clipPath;e&&(this._detachComponent(e),this._clipPath=null,this.markRedraw())},t.prototype.getTextContent=function(){return this._textContent},t.prototype.setTextContent=function(e){var n=this._textContent;n!==e&&(n&&n!==e&&this.removeTextContent(),e.innerTransformable=new rF,this._attachComponent(e),this._textContent=e,this.markRedraw())},t.prototype.setTextConfig=function(e){this.textConfig||(this.textConfig={}),ot(this.textConfig,e),this.markRedraw()},t.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},t.prototype.removeTextContent=function(){var e=this._textContent;e&&(e.innerTransformable=null,this._detachComponent(e),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},t.prototype.getTextGuideLine=function(){return this._textGuide},t.prototype.setTextGuideLine=function(e){this._textGuide&&this._textGuide!==e&&this.removeTextGuideLine(),this._attachComponent(e),this._textGuide=e,this.markRedraw()},t.prototype.removeTextGuideLine=function(){var e=this._textGuide;e&&(this._detachComponent(e),this._textGuide=null,this.markRedraw())},t.prototype.markRedraw=function(){this.__dirty|=Ms;var e=this.__zr;e&&(this.__inHover?e.refreshHover():e.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},t.prototype.dirty=function(){this.markRedraw()},t.prototype._toggleHoverLayerFlag=function(e){this.__inHover=e;var n=this._textContent,r=this._textGuide;n&&(n.__inHover=e),r&&(r.__inHover=e)},t.prototype.addSelfToZr=function(e){if(this.__zr!==e){this.__zr=e;var n=this.animators;if(n)for(var r=0;r<n.length;r++)e.animation.addAnimator(n[r]);this._clipPath&&this._clipPath.addSelfToZr(e),this._textContent&&this._textContent.addSelfToZr(e),this._textGuide&&this._textGuide.addSelfToZr(e)}},t.prototype.removeSelfFromZr=function(e){if(this.__zr){this.__zr=null;var n=this.animators;if(n)for(var r=0;r<n.length;r++)e.animation.removeAnimator(n[r]);this._clipPath&&this._clipPath.removeSelfFromZr(e),this._textContent&&this._textContent.removeSelfFromZr(e),this._textGuide&&this._textGuide.removeSelfFromZr(e)}},t.prototype.animate=function(e,n,r){var i=e?this[e]:this,o=new nF(i,n,r);return e&&(o.targetName=e),this.addAnimator(o,e),o},t.prototype.addAnimator=function(e,n){var r=this.__zr,i=this;e.during(function(){i.updateDuringAnimation(n)}).done(function(){var o=i.animators,a=wr(o,e);a>=0&&o.splice(a,1)}),this.animators.push(e),r&&r.animation.addAnimator(e),r&&r.wakeUp()},t.prototype.updateDuringAnimation=function(e){this.markRedraw()},t.prototype.stopAnimation=function(e,n){for(var r=this.animators,i=r.length,o=[],a=0;a<i;a++){var s=r[a];!e||e===s.scope?s.stop(n):o.push(s)}return this.animators=o,this},t.prototype.animateTo=function(e,n,r){w3(this,e,n,r)},t.prototype.animateFrom=function(e,n,r){w3(this,e,n,r,!0)},t.prototype._transitionState=function(e,n,r,i){for(var o=w3(this,n,r,i),a=0;a<o.length;a++)o[a].__fromStateTransition=e},t.prototype.getBoundingRect=function(){return null},t.prototype.getPaintRect=function(){return null},t.initDefaultProps=function(){var e=t.prototype;e.type="element",e.name="",e.ignore=e.silent=e.isGroup=e.draggable=e.dragging=e.ignoreClip=e.__inHover=!1,e.__dirty=Ms;function n(r,i,o,a){Object.defineProperty(e,r,{get:function(){if(!this[i]){var l=this[i]=[];s(this,l)}return this[i]},set:function(l){this[o]=l[0],this[a]=l[1],this[i]=l,s(this,l)}});function s(l,u){Object.defineProperty(u,0,{get:function(){return l[o]},set:function(c){l[o]=c}}),Object.defineProperty(u,1,{get:function(){return l[a]},set:function(c){l[a]=c}})}}Object.defineProperty&&(n("position","_legacyPos","x","y"),n("scale","_legacyScale","scaleX","scaleY"),n("origin","_legacyOrigin","originX","originY"))}(),t}();wu(iF,xc);wu(iF,rF);function w3(t,e,n,r,i){n=n||{};var o=[];rte(t,"",t,e,n,r,o,i);var a=o.length,s=!1,l=n.done,u=n.aborted,c=function(){s=!0,a--,a<=0&&(s?l&&l():u&&u())},f=function(){a--,a<=0&&(s?l&&l():u&&u())};a||l&&l(),o.length>0&&n.during&&o[0].during(function(g,y){n.during(y)});for(var h=0;h<o.length;h++){var d=o[h];c&&d.done(c),f&&d.aborted(f),n.force&&d.duration(n.duration),d.start(n.easing)}return o}function x3(t,e,n){for(var r=0;r<n;r++)t[r]=e[r]}function _Oe(t){return fs(t[0])}function SOe(t,e,n){if(fs(e[n]))if(fs(t[n])||(t[n]=[]),js(e[n])){var r=e[n].length;t[n].length!==r&&(t[n]=new e[n].constructor(r),x3(t[n],e[n],r))}else{var i=e[n],o=t[n],a=i.length;if(_Oe(i))for(var s=i[0].length,l=0;l<a;l++)o[l]?x3(o[l],i[l],s):o[l]=Array.prototype.slice.call(i[l]);else x3(o,i,a);o.length=i.length}else t[n]=e[n]}function wOe(t,e){return t===e||fs(t)&&fs(e)&&xOe(t,e)}function xOe(t,e){var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function rte(t,e,n,r,i,o,a,s){for(var l=ir(r),u=i.duration,c=i.delay,f=i.additive,h=i.setToFinal,d=!Bt(o),g=t.animators,y=[],_=0;_<l.length;_++){var v=l[_],S=r[v];if(S!=null&&n[v]!=null&&(d||o[v]))if(Bt(S)&&!fs(S)&&!FA(S)){if(e){s||(n[v]=S,t.updateDuringAnimation(e));continue}rte(t,v,n[v],S,i,o&&o[v],a,s)}else y.push(v);else s||(n[v]=S,t.updateDuringAnimation(e),y.push(v))}var C=y.length;if(!f&&C)for(var k=0;k<g.length;k++){var x=g[k];if(x.targetName===e){var m=x.stopTracks(y);if(m){var T=wr(g,x);g.splice(T,1)}}}if(i.force||(y=Za(y,function(L){return!wOe(r[L],n[L])}),C=y.length),C>0||i.force&&!a.length){var P=void 0,I=void 0,M=void 0;if(s){I={},h&&(P={});for(var k=0;k<C;k++){var v=y[k];I[v]=n[v],h?P[v]=r[v]:n[v]=r[v]}}else if(h){M={};for(var k=0;k<C;k++){var v=y[k];M[v]=h2(n[v]),SOe(n,r,v)}}var x=new nF(n,!1,!1,f?Za(g,function(R){return R.targetName===e}):null);x.targetName=e,i.scope&&(x.scope=i.scope),h&&P&&x.whenWithKeys(0,P,y),M&&x.whenWithKeys(0,M,y),x.whenWithKeys(u??500,s?I:r,y).delay(c||0),t.addAnimator(x,e),a.push(x)}}const ite=iF;var ote=function(t){kr(e,t);function e(n){var r=t.call(this)||this;return r.isGroup=!0,r._children=[],r.attr(n),r}return e.prototype.childrenRef=function(){return this._children},e.prototype.children=function(){return this._children.slice()},e.prototype.childAt=function(n){return this._children[n]},e.prototype.childOfName=function(n){for(var r=this._children,i=0;i<r.length;i++)if(r[i].name===n)return r[i]},e.prototype.childCount=function(){return this._children.length},e.prototype.add=function(n){return n&&n!==this&&n.parent!==this&&(this._children.push(n),this._doAdd(n)),this},e.prototype.addBefore=function(n,r){if(n&&n!==this&&n.parent!==this&&r&&r.parent===this){var i=this._children,o=i.indexOf(r);o>=0&&(i.splice(o,0,n),this._doAdd(n))}return this},e.prototype.replace=function(n,r){var i=wr(this._children,n);return i>=0&&this.replaceAt(r,i),this},e.prototype.replaceAt=function(n,r){var i=this._children,o=i[r];if(n&&n!==this&&n.parent!==this&&n!==o){i[r]=n,o.parent=null;var a=this.__zr;a&&o.removeSelfFromZr(a),this._doAdd(n)}return this},e.prototype._doAdd=function(n){n.parent&&n.parent.remove(n),n.parent=this;var r=this.__zr;r&&r!==n.__zr&&n.addSelfToZr(r),r&&r.refresh()},e.prototype.remove=function(n){var r=this.__zr,i=this._children,o=wr(i,n);return o<0?this:(i.splice(o,1),n.parent=null,r&&n.removeSelfFromZr(r),r&&r.refresh(),this)},e.prototype.removeAll=function(){for(var n=this._children,r=this.__zr,i=0;i<n.length;i++){var o=n[i];r&&o.removeSelfFromZr(r),o.parent=null}return n.length=0,this},e.prototype.eachChild=function(n,r){for(var i=this._children,o=0;o<i.length;o++){var a=i[o];n.call(r,a,o)}return this},e.prototype.traverse=function(n,r){for(var i=0;i<this._children.length;i++){var o=this._children[i],a=n.call(r,o);o.isGroup&&!a&&o.traverse(n,r)}return this},e.prototype.addSelfToZr=function(n){t.prototype.addSelfToZr.call(this,n);for(var r=0;r<this._children.length;r++){var i=this._children[r];i.addSelfToZr(n)}},e.prototype.removeSelfFromZr=function(n){t.prototype.removeSelfFromZr.call(this,n);for(var r=0;r<this._children.length;r++){var i=this._children[r];i.removeSelfFromZr(n)}},e.prototype.getBoundingRect=function(n){for(var r=new Ir(0,0,0,0),i=n||this._children,o=[],a=null,s=0;s<i.length;s++){var l=i[s];if(!(l.ignore||l.invisible)){var u=l.getBoundingRect(),c=l.getLocalTransform(o);c?(Ir.applyTransform(r,u,c),a=a||r.clone(),a.union(r)):(a=a||u.clone(),a.union(u))}}return a||r},e}(ite);ote.prototype.type="group";const bc=ote;/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var m2={},ate={};function COe(t){delete ate[t]}function kOe(t){if(!t)return!1;if(typeof t=="string")return $k(t,1)<dL;if(t.colorStops){for(var e=t.colorStops,n=0,r=e.length,i=0;i<r;i++)n+=$k(e[i].color,1);return n/=r,n<dL}return!1}var TOe=function(){function t(e,n,r){var i=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,r=r||{},this.dom=n,this.id=e;var o=new DPe,a=r.renderer||"canvas";m2[a]||(a=ir(m2)[0]),r.useDirtyRect=r.useDirtyRect==null?!1:r.useDirtyRect;var s=new m2[a](n,o,r,e),l=r.ssr||s.ssrOnly;this.storage=o,this.painter=s;var u=!En.node&&!En.worker&&!l?new mOe(s.getViewportRoot(),s.root):null,c=r.useCoarsePointer,f=c==null||c==="auto"?En.touchEventsSupported:!!c,h=44,d;f&&(d=gn(r.pointerSize,h)),this.handler=new PPe(o,s,u,s.root,d),this.animation=new lOe({stage:{update:l?null:function(){return i._flush(!0)}}}),l||this.animation.start()}return t.prototype.add=function(e){e&&(this.storage.addRoot(e),e.addSelfToZr(this),this.refresh())},t.prototype.remove=function(e){e&&(this.storage.delRoot(e),e.removeSelfFromZr(this),this.refresh())},t.prototype.configLayer=function(e,n){this.painter.configLayer&&this.painter.configLayer(e,n),this.refresh()},t.prototype.setBackgroundColor=function(e){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(e),this.refresh(),this._backgroundColor=e,this._darkMode=kOe(e)},t.prototype.getBackgroundColor=function(){return this._backgroundColor},t.prototype.setDarkMode=function(e){this._darkMode=e},t.prototype.isDarkMode=function(){return this._darkMode},t.prototype.refreshImmediately=function(e){e||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},t.prototype.refresh=function(){this._needsRefresh=!0,this.animation.start()},t.prototype.flush=function(){this._flush(!1)},t.prototype._flush=function(e){var n,r=fv();this._needsRefresh&&(n=!0,this.refreshImmediately(e)),this._needsRefreshHover&&(n=!0,this.refreshHoverImmediately());var i=fv();n?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:i-r})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},t.prototype.setSleepAfterStill=function(e){this._sleepAfterStill=e},t.prototype.wakeUp=function(){this.animation.start(),this._stillFrameAccum=0},t.prototype.refreshHover=function(){this._needsRefreshHover=!0},t.prototype.refreshHoverImmediately=function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover()},t.prototype.resize=function(e){e=e||{},this.painter.resize(e.width,e.height),this.handler.resize()},t.prototype.clearAnimation=function(){this.animation.clear()},t.prototype.getWidth=function(){return this.painter.getWidth()},t.prototype.getHeight=function(){return this.painter.getHeight()},t.prototype.setCursorStyle=function(e){this.handler.setCursorStyle(e)},t.prototype.findHover=function(e,n){return this.handler.findHover(e,n)},t.prototype.on=function(e,n,r){return this.handler.on(e,n,r),this},t.prototype.off=function(e,n){this.handler.off(e,n)},t.prototype.trigger=function(e,n){this.handler.trigger(e,n)},t.prototype.clear=function(){for(var e=this.storage.getRoots(),n=0;n<e.length;n++)e[n]instanceof bc&&e[n].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()},t.prototype.dispose=function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,COe(this.id)},t}();function Ez(t,e){var n=new TOe(Cee(),t,e);return ate[n.id]=n,n}function AOe(t,e){m2[t]=e}var Pz=1e-4,ste=20;function EOe(t){return t.replace(/^\s+|\s+$/g,"")}function u0(t,e,n,r){var i=e[0],o=e[1],a=n[0],s=n[1],l=o-i,u=s-a;if(l===0)return u===0?a:(a+s)/2;if(r)if(l>0){if(t<=i)return a;if(t>=o)return s}else{if(t>=i)return a;if(t<=o)return s}else{if(t===i)return a;if(t===o)return s}return(t-i)/l*u+a}function Kr(t,e){switch(t){case"center":case"middle":t="50%";break;case"left":case"top":t="0%";break;case"right":case"bottom":t="100%";break}return Pt(t)?EOe(t).match(/%$/)?parseFloat(t)/100*e:parseFloat(t):t==null?NaN:+t}function POe(t,e,n){return e==null&&(e=10),e=Math.min(Math.max(0,e),ste),t=(+t).toFixed(e),n?t:+t}function Oz(t){if(t=+t,isNaN(t))return 0;if(t>1e-14){for(var e=1,n=0;n<15;n++,e*=10)if(Math.round(t*e)/e===t)return n}return OOe(t)}function OOe(t){var e=t.toString().toLowerCase(),n=e.indexOf("e"),r=n>0?+e.slice(n+1):0,i=n>0?n:e.length,o=e.indexOf("."),a=o<0?0:i-1-o;return Math.max(0,a-r)}function IOe(t,e){var n=ad(t,function(d,g){return d+(isNaN(g)?0:g)},0);if(n===0)return[];for(var r=Math.pow(10,e),i=Qt(t,function(d){return(isNaN(d)?0:d)/n*r*100}),o=r*100,a=Qt(i,function(d){return Math.floor(d)}),s=ad(a,function(d,g){return d+g},0),l=Qt(i,function(d,g){return d-a[g]});s<o;){for(var u=Number.NEGATIVE_INFINITY,c=null,f=0,h=l.length;f<h;++f)l[f]>u&&(u=l[f],c=f);++a[c],l[c]=0,++s}return Qt(a,function(d){return d/r})}function $Oe(t,e){var n=Math.max(Oz(t),Oz(e)),r=t+e;return n>ste?r:POe(r,n)}function lte(t){var e=Math.PI*2;return(t%e+e)%e}function Mk(t){return t>-Pz&&t<Pz}var LOe=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function zA(t){if(t instanceof Date)return t;if(Pt(t)){var e=LOe.exec(t);if(!e)return new Date(NaN);if(e[8]){var n=+e[4]||0;return e[8].toUpperCase()!=="Z"&&(n-=+e[8].slice(0,3)),new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,n,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0))}else return new Date(+e[1],+(e[2]||1)-1,+e[3]||1,+e[4]||0,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0)}else if(t==null)return new Date(NaN);return new Date(Math.round(t))}function Nk(t){var e=parseFloat(t);return e==t&&(e!==0||!Pt(t)||t.indexOf("x")<=0)?e:NaN}function DOe(t){return!isNaN(Nk(t))}function ute(){return Math.round(Math.random()*9)}function cte(t,e){return e===0?t:cte(e,t%e)}function Iz(t,e){return t==null?e:e==null?t:t*e/cte(t,e)}function Qa(t){throw new Error(t)}var fte="series\0",MOe="\0_ec_\0";function Zo(t){return t instanceof Array?t:t==null?[]:[t]}function mL(t,e,n){if(t){t[e]=t[e]||{},t.emphasis=t.emphasis||{},t.emphasis[e]=t.emphasis[e]||{};for(var r=0,i=n.length;r<i;r++){var o=n[r];!t.emphasis[e].hasOwnProperty(o)&&t[e].hasOwnProperty(o)&&(t.emphasis[e][o]=t[e][o])}}}var $z=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function uS(t){return Bt(t)&&!mt(t)&&!(t instanceof Date)?t.value:t}function NOe(t){return Bt(t)&&!(t instanceof Array)}function FOe(t,e,n){var r=n==="normalMerge",i=n==="replaceMerge",o=n==="replaceAll";t=t||[],e=(e||[]).slice();var a=mn();be(e,function(l,u){if(!Bt(l)){e[u]=null;return}});var s=ROe(t,a,n);return(r||i)&&VOe(s,t,a,e),r&&BOe(s,e),r||i?zOe(s,e,i):o&&jOe(s,e),UOe(s),s}function ROe(t,e,n){var r=[];if(n==="replaceAll")return r;for(var i=0;i<t.length;i++){var o=t[i];o&&o.id!=null&&e.set(o.id,i),r.push({existing:n==="replaceMerge"||Z1(o)?null:o,newOption:null,keyInfo:null,brandNew:null})}return r}function VOe(t,e,n,r){be(r,function(i,o){if(!(!i||i.id==null)){var a=t1(i.id),s=n.get(a);if(s!=null){var l=t[s];Us(!l.newOption,'Duplicated option on id "'+a+'".'),l.newOption=i,l.existing=e[s],r[o]=null}}})}function BOe(t,e){be(e,function(n,r){if(!(!n||n.name==null))for(var i=0;i<t.length;i++){var o=t[i].existing;if(!t[i].newOption&&o&&(o.id==null||n.id==null)&&!Z1(n)&&!Z1(o)&&hte("name",o,n)){t[i].newOption=n,e[r]=null;return}}})}function zOe(t,e,n){be(e,function(r){if(r){for(var i,o=0;(i=t[o])&&(i.newOption||Z1(i.existing)||i.existing&&r.id!=null&&!hte("id",r,i.existing));)o++;i?(i.newOption=r,i.brandNew=n):t.push({newOption:r,brandNew:n,existing:null,keyInfo:null}),o++}})}function jOe(t,e){be(e,function(n){t.push({newOption:n,brandNew:!0,existing:null,keyInfo:null})})}function UOe(t){var e=mn();be(t,function(n){var r=n.existing;r&&e.set(r.id,n)}),be(t,function(n){var r=n.newOption;Us(!r||r.id==null||!e.get(r.id)||e.get(r.id)===n,"id duplicates: "+(r&&r.id)),r&&r.id!=null&&e.set(r.id,n),!n.keyInfo&&(n.keyInfo={})}),be(t,function(n,r){var i=n.existing,o=n.newOption,a=n.keyInfo;if(Bt(o)){if(a.name=o.name!=null?t1(o.name):i?i.name:fte+r,i)a.id=t1(i.id);else if(o.id!=null)a.id=t1(o.id);else{var s=0;do a.id="\0"+a.name+"\0"+s++;while(e.get(a.id))}e.set(a.id,n)}})}function hte(t,e,n){var r=El(e[t],null),i=El(n[t],null);return r!=null&&i!=null&&r===i}function t1(t){return El(t,"")}function El(t,e){return t==null?e:Pt(t)?t:Zr(t)||Y$(t)?t+"":e}function oF(t){var e=t.name;return!!(e&&e.indexOf(fte))}function Z1(t){return t&&t.id!=null&&t1(t.id).indexOf(MOe)===0}function WOe(t,e,n){be(t,function(r){var i=r.newOption;Bt(i)&&(r.keyInfo.mainType=e,r.keyInfo.subType=HOe(e,i,r.existing,n))})}function HOe(t,e,n,r){var i=e.type?e.type:n?n.subType:r.determineSubType(t,e);return i}function cS(t,e){if(e.dataIndexInside!=null)return e.dataIndexInside;if(e.dataIndex!=null)return mt(e.dataIndex)?Qt(e.dataIndex,function(n){return t.indexOfRawIndex(n)}):t.indexOfRawIndex(e.dataIndex);if(e.name!=null)return mt(e.name)?Qt(e.name,function(n){return t.indexOfName(n)}):t.indexOfName(e.name)}function no(){var t="__ec_inner_"+GOe++;return function(e){return e[t]||(e[t]={})}}var GOe=ute();function C3(t,e,n){var r=aF(e,n),i=r.mainTypeSpecified,o=r.queryOptionMap,a=r.others,s=a,l=n?n.defaultMainType:null;return!i&&l&&o.set(l,{}),o.each(function(u,c){var f=fS(t,c,u,{useDefault:l===c,enableAll:n&&n.enableAll!=null?n.enableAll:!0,enableNone:n&&n.enableNone!=null?n.enableNone:!0});s[c+"Models"]=f.models,s[c+"Model"]=f.models[0]}),s}function aF(t,e){var n;if(Pt(t)){var r={};r[t+"Index"]=0,n=r}else n=t;var i=mn(),o={},a=!1;return be(n,function(s,l){if(l==="dataIndex"||l==="dataIndexInside"){o[l]=s;return}var u=l.match(/^(\w+)(Index|Id|Name)$/)||[],c=u[1],f=(u[2]||"").toLowerCase();if(!(!c||!f||e&&e.includeMainTypes&&wr(e.includeMainTypes,c)<0)){a=a||!!c;var h=i.get(c)||i.set(c,{});h[f]=s}}),{mainTypeSpecified:a,queryOptionMap:i,others:o}}var Gp={useDefault:!0,enableAll:!1,enableNone:!1};function fS(t,e,n,r){r=r||Gp;var i=n.index,o=n.id,a=n.name,s={models:null,specified:i!=null||o!=null||a!=null};if(!s.specified){var l=void 0;return s.models=r.useDefault&&(l=t.getComponent(e))?[l]:[],s}return i==="none"||i===!1?(Us(r.enableNone,'`"none"` or `false` is not a valid value on index option.'),s.models=[],s):(i==="all"&&(Us(r.enableAll,'`"all"` is not a valid value on index option.'),i=o=a=null),s.models=t.queryComponents({mainType:e,index:i,id:o,name:a}),s)}function dte(t,e,n){t.setAttribute?t.setAttribute(e,n):t[e]=n}function qOe(t,e){return t.getAttribute?t.getAttribute(e):t[e]}function YOe(t){return t==="auto"?En.domSupported?"html":"richText":t||"html"}function KOe(t,e){var n=mn(),r=[];return be(t,function(i){var o=e(i);(n.get(o)||(r.push(o),n.set(o,[]))).push(i)}),{keys:r,buckets:n}}var XOe=".",tp="___EC__COMPONENT__CONTAINER___",pte="___EC__EXTENDED_CLASS___";function sc(t){var e={main:"",sub:""};if(t){var n=t.split(XOe);e.main=n[0]||"",e.sub=n[1]||""}return e}function JOe(t){Us(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(t),'componentType "'+t+'" illegal')}function ZOe(t){return!!(t&&t[pte])}function sF(t,e){t.$constructor=t,t.extend=function(n){var r=this,i;return QOe(r)?i=function(o){Cr(a,o);function a(){return o.apply(this,arguments)||this}return a}(r):(i=function(){(n.$constructor||r).apply(this,arguments)},WEe(i,this)),ot(i.prototype,n),i[pte]=!0,i.extend=this.extend,i.superCall=n3e,i.superApply=r3e,i.superClass=r,i}}function QOe(t){return Qn(t)&&/^class\s/.test(Function.prototype.toString.call(t))}function gte(t,e){t.extend=e.extend}var e3e=Math.round(Math.random()*10);function t3e(t){var e=["__\0is_clz",e3e++].join("_");t.prototype[e]=!0,t.isInstance=function(n){return!!(n&&n[e])}}function n3e(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return this.superClass.prototype[e].apply(t,n)}function r3e(t,e,n){return this.superClass.prototype[e].apply(t,n)}function lF(t){var e={};t.registerClass=function(r){var i=r.type||r.prototype.type;if(i){JOe(i),r.prototype.type=i;var o=sc(i);if(!o.sub)e[o.main]=r;else if(o.sub!==tp){var a=n(o);a[o.sub]=r}}return r},t.getClass=function(r,i,o){var a=e[r];if(a&&a[tp]&&(a=i?a[i]:null),o&&!a)throw new Error(i?"Component "+r+"."+(i||"")+" is used but not imported.":r+".type should be specified.");return a},t.getClassesByMainType=function(r){var i=sc(r),o=[],a=e[i.main];return a&&a[tp]?be(a,function(s,l){l!==tp&&o.push(s)}):o.push(a),o},t.hasClass=function(r){var i=sc(r);return!!e[i.main]},t.getAllClassMainTypes=function(){var r=[];return be(e,function(i,o){r.push(o)}),r},t.hasSubTypes=function(r){var i=sc(r),o=e[i.main];return o&&o[tp]};function n(r){var i=e[r.main];return(!i||!i[tp])&&(i=e[r.main]={},i[tp]=!0),i}}function Q1(t,e){for(var n=0;n<t.length;n++)t[n][1]||(t[n][1]=t[n][0]);return e=e||!1,function(r,i,o){for(var a={},s=0;s<t.length;s++){var l=t[s][1];if(!(i&&wr(i,l)>=0||o&&wr(o,l)<0)){var u=r.getShallow(l,e);u!=null&&(a[t[s][0]]=u)}}return a}}var i3e=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],o3e=Q1(i3e),a3e=function(){function t(){}return t.prototype.getAreaStyle=function(e,n){return o3e(this,e,n)},t}(),vL=new lS(50);function s3e(t){if(typeof t=="string"){var e=vL.get(t);return e&&e.image}else return t}function uF(t,e,n,r,i){if(t)if(typeof t=="string"){if(e&&e.__zrImageSrc===t||!n)return e;var o=vL.get(t),a={hostEl:n,cb:r,cbPayload:i};return o?(e=o.image,!jA(e)&&o.pending.push(a)):(e=D0.loadImage(t,Lz,Lz),e.__zrImageSrc=t,vL.put(t,e.__cachedImgObj={image:e,pending:[a]})),e}else return t;else return e}function Lz(){var t=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<t.pending.length;e++){var n=t.pending[e],r=n.cb;r&&r(this,n.cbPayload),n.hostEl.dirty()}t.pending.length=0}function jA(t){return t&&t.width&&t.height}var k3=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function l3e(t,e,n,r,i){if(!e)return"";var o=(t+"").split(`
`);i=mte(e,n,r,i);for(var a=0,s=o.length;a<s;a++)o[a]=vte(o[a],i);return o.join(`
`)}function mte(t,e,n,r){r=r||{};var i=ot({},r);i.font=e,n=gn(n,"..."),i.maxIterations=gn(r.maxIterations,2);var o=i.minChar=gn(r.minChar,0);i.cnCharWidth=Bs("国",e);var a=i.ascCharWidth=Bs("a",e);i.placeholder=gn(r.placeholder,"");for(var s=t=Math.max(0,t-1),l=0;l<o&&s>=a;l++)s-=a;var u=Bs(n,e);return u>s&&(n="",u=0),s=t-u,i.ellipsis=n,i.ellipsisWidth=u,i.contentWidth=s,i.containerWidth=t,i}function vte(t,e){var n=e.containerWidth,r=e.font,i=e.contentWidth;if(!n)return"";var o=Bs(t,r);if(o<=n)return t;for(var a=0;;a++){if(o<=i||a>=e.maxIterations){t+=e.ellipsis;break}var s=a===0?u3e(t,i,e.ascCharWidth,e.cnCharWidth):o>0?Math.floor(t.length*i/o):0;t=t.substr(0,s),o=Bs(t,r)}return t===""&&(t=e.placeholder),t}function u3e(t,e,n,r){for(var i=0,o=0,a=t.length;o<a&&i<e;o++){var s=t.charCodeAt(o);i+=0<=s&&s<=127?n:r}return o}function c3e(t,e){t!=null&&(t+="");var n=e.overflow,r=e.padding,i=e.font,o=n==="truncate",a=BA(i),s=gn(e.lineHeight,a),l=!!e.backgroundColor,u=e.lineOverflow==="truncate",c=e.width,f;c!=null&&(n==="break"||n==="breakAll")?f=t?yte(t,e.font,c,n==="breakAll",0).lines:[]:f=t?t.split(`
`):[];var h=f.length*s,d=gn(e.height,h);if(h>d&&u){var g=Math.floor(d/s);f=f.slice(0,g)}if(t&&o&&c!=null)for(var y=mte(c,i,e.ellipsis,{minChar:e.truncateMinChar,placeholder:e.placeholder}),_=0;_<f.length;_++)f[_]=vte(f[_],y);for(var v=d,S=0,_=0;_<f.length;_++)S=Math.max(Bs(f[_],i),S);c==null&&(c=S);var C=S;return r&&(v+=r[0]+r[2],C+=r[1]+r[3],c+=r[1]+r[3]),l&&(C=c),{lines:f,height:d,outerWidth:C,outerHeight:v,lineHeight:s,calculatedLineHeight:a,contentWidth:S,contentHeight:h,width:c}}var f3e=function(){function t(){}return t}(),Dz=function(){function t(e){this.tokens=[],e&&(this.tokens=e)}return t}(),h3e=function(){function t(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]}return t}();function d3e(t,e){var n=new h3e;if(t!=null&&(t+=""),!t)return n;for(var r=e.width,i=e.height,o=e.overflow,a=(o==="break"||o==="breakAll")&&r!=null?{width:r,accumWidth:0,breakAll:o==="breakAll"}:null,s=k3.lastIndex=0,l;(l=k3.exec(t))!=null;){var u=l.index;u>s&&T3(n,t.substring(s,u),e,a),T3(n,l[2],e,a,l[1]),s=k3.lastIndex}s<t.length&&T3(n,t.substring(s,t.length),e,a);var c=[],f=0,h=0,d=e.padding,g=o==="truncate",y=e.lineOverflow==="truncate";function _(Ae,Ee,_e){Ae.width=Ee,Ae.lineHeight=_e,f+=_e,h=Math.max(h,Ee)}e:for(var v=0;v<n.lines.length;v++){for(var S=n.lines[v],C=0,k=0,x=0;x<S.tokens.length;x++){var m=S.tokens[x],T=m.styleName&&e.rich[m.styleName]||{},P=m.textPadding=T.padding,I=P?P[1]+P[3]:0,M=m.font=T.font||e.font;m.contentHeight=BA(M);var L=gn(T.height,m.contentHeight);if(m.innerHeight=L,P&&(L+=P[0]+P[2]),m.height=L,m.lineHeight=$v(T.lineHeight,e.lineHeight,L),m.align=T&&T.align||e.align,m.verticalAlign=T&&T.verticalAlign||"middle",y&&i!=null&&f+m.lineHeight>i){x>0?(S.tokens=S.tokens.slice(0,x),_(S,k,C),n.lines=n.lines.slice(0,v+1)):n.lines=n.lines.slice(0,v);break e}var R=T.width,V=R==null||R==="auto";if(typeof R=="string"&&R.charAt(R.length-1)==="%")m.percentWidth=R,c.push(m),m.contentWidth=Bs(m.text,M);else{if(V){var z=T.backgroundColor,ie=z&&z.image;ie&&(ie=s3e(ie),jA(ie)&&(m.width=Math.max(m.width,ie.width*L/ie.height)))}var oe=g&&r!=null?r-k:null;oe!=null&&oe<m.width?!V||oe<I?(m.text="",m.width=m.contentWidth=0):(m.text=l3e(m.text,oe-I,M,e.ellipsis,{minChar:e.truncateMinChar}),m.width=m.contentWidth=Bs(m.text,M)):m.contentWidth=Bs(m.text,M)}m.width+=I,k+=m.width,T&&(C=Math.max(C,m.lineHeight))}_(S,k,C)}n.outerWidth=n.width=gn(r,h),n.outerHeight=n.height=gn(i,f),n.contentHeight=f,n.contentWidth=h,d&&(n.outerWidth+=d[1]+d[3],n.outerHeight+=d[0]+d[2]);for(var v=0;v<c.length;v++){var m=c[v],Se=m.percentWidth;m.width=parseInt(Se,10)/100*n.width}return n}function T3(t,e,n,r,i){var o=e==="",a=i&&n.rich[i]||{},s=t.lines,l=a.font||n.font,u=!1,c,f;if(r){var h=a.padding,d=h?h[1]+h[3]:0;if(a.width!=null&&a.width!=="auto"){var g=l0(a.width,r.width)+d;s.length>0&&g+r.accumWidth>r.width&&(c=e.split(`
`),u=!0),r.accumWidth=g}else{var y=yte(e,l,r.width,r.breakAll,r.accumWidth);r.accumWidth=y.accumWidth+d,f=y.linesWidths,c=y.lines}}else c=e.split(`
`);for(var _=0;_<c.length;_++){var v=c[_],S=new f3e;if(S.styleName=i,S.text=v,S.isLineHolder=!v&&!o,typeof a.width=="number"?S.width=a.width:S.width=f?f[_]:Bs(v,l),!_&&!u){var C=(s[s.length-1]||(s[0]=new Dz)).tokens,k=C.length;k===1&&C[0].isLineHolder?C[0]=S:(v||!k||o)&&C.push(S)}else s.push(new Dz([S]))}}function p3e(t){var e=t.charCodeAt(0);return e>=32&&e<=591||e>=880&&e<=4351||e>=4608&&e<=5119||e>=7680&&e<=8303}var g3e=ad(",&?/;] ".split(""),function(t,e){return t[e]=!0,t},{});function m3e(t){return p3e(t)?!!g3e[t]:!0}function yte(t,e,n,r,i){for(var o=[],a=[],s="",l="",u=0,c=0,f=0;f<t.length;f++){var h=t.charAt(f);if(h===`
`){l&&(s+=l,c+=u),o.push(s),a.push(c),s="",l="",u=0,c=0;continue}var d=Bs(h,e),g=r?!1:!m3e(h);if(o.length?c+d>n:i+c+d>n){c?(s||l)&&(g?(s||(s=l,l="",u=0,c=u),o.push(s),a.push(c-u),l+=h,u+=d,s="",c=u):(l&&(s+=l,l="",u=0),o.push(s),a.push(c),s=h,c=d)):g?(o.push(l),a.push(u),l=h,u=d):(o.push(h),a.push(d));continue}c+=d,g?(l+=h,u+=d):(l&&(s+=l,l="",u=0),s+=h)}return!o.length&&!s&&(s=t,l="",u=0),l&&(s+=l),s&&(o.push(s),a.push(c)),o.length===1&&(c+=i),{accumWidth:c,lines:o,linesWidths:a}}var yL="__zr_style_"+Math.round(Math.random()*10),ag={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},UA={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};ag[yL]=!0;var Mz=["z","z2","invisible"],v3e=["invisible"],y3e=function(t){kr(e,t);function e(n){return t.call(this,n)||this}return e.prototype._init=function(n){for(var r=ir(n),i=0;i<r.length;i++){var o=r[i];o==="style"?this.useStyle(n[o]):t.prototype.attrKV.call(this,o,n[o])}this.style||this.useStyle({})},e.prototype.beforeBrush=function(){},e.prototype.afterBrush=function(){},e.prototype.innerBeforeBrush=function(){},e.prototype.innerAfterBrush=function(){},e.prototype.shouldBePainted=function(n,r,i,o){var a=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&b3e(this,n,r)||a&&!a[0]&&!a[3])return!1;if(i&&this.__clipPaths){for(var s=0;s<this.__clipPaths.length;++s)if(this.__clipPaths[s].isZeroArea())return!1}if(o&&this.parent)for(var l=this.parent;l;){if(l.ignore)return!1;l=l.parent}return!0},e.prototype.contain=function(n,r){return this.rectContain(n,r)},e.prototype.traverse=function(n,r){n.call(r,this)},e.prototype.rectContain=function(n,r){var i=this.transformCoordToLocal(n,r),o=this.getBoundingRect();return o.contain(i[0],i[1])},e.prototype.getPaintRect=function(){var n=this._paintRect;if(!this._paintRect||this.__dirty){var r=this.transform,i=this.getBoundingRect(),o=this.style,a=o.shadowBlur||0,s=o.shadowOffsetX||0,l=o.shadowOffsetY||0;n=this._paintRect||(this._paintRect=new Ir(0,0,0,0)),r?Ir.applyTransform(n,i,r):n.copy(i),(a||s||l)&&(n.width+=a*2+Math.abs(s),n.height+=a*2+Math.abs(l),n.x=Math.min(n.x,n.x+s-a),n.y=Math.min(n.y,n.y+l-a));var u=this.dirtyRectTolerance;n.isZero()||(n.x=Math.floor(n.x-u),n.y=Math.floor(n.y-u),n.width=Math.ceil(n.width+1+u*2),n.height=Math.ceil(n.height+1+u*2))}return n},e.prototype.setPrevPaintRect=function(n){n?(this._prevPaintRect=this._prevPaintRect||new Ir(0,0,0,0),this._prevPaintRect.copy(n)):this._prevPaintRect=null},e.prototype.getPrevPaintRect=function(){return this._prevPaintRect},e.prototype.animateStyle=function(n){return this.animate("style",n)},e.prototype.updateDuringAnimation=function(n){n==="style"?this.dirtyStyle():this.markRedraw()},e.prototype.attrKV=function(n,r){n!=="style"?t.prototype.attrKV.call(this,n,r):this.style?this.setStyle(r):this.useStyle(r)},e.prototype.setStyle=function(n,r){return typeof n=="string"?this.style[n]=r:ot(this.style,n),this.dirtyStyle(),this},e.prototype.dirtyStyle=function(n){n||this.markRedraw(),this.__dirty|=Ab,this._rect&&(this._rect=null)},e.prototype.dirty=function(){this.dirtyStyle()},e.prototype.styleChanged=function(){return!!(this.__dirty&Ab)},e.prototype.styleUpdated=function(){this.__dirty&=~Ab},e.prototype.createStyle=function(n){return RA(ag,n)},e.prototype.useStyle=function(n){n[yL]||(n=this.createStyle(n)),this.__inHover?this.__hoverStyle=n:this.style=n,this.dirtyStyle()},e.prototype.isStyleObject=function(n){return n[yL]},e.prototype._innerSaveToNormal=function(n){t.prototype._innerSaveToNormal.call(this,n);var r=this._normalState;n.style&&!r.style&&(r.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(n,r,Mz)},e.prototype._applyStateObj=function(n,r,i,o,a,s){t.prototype._applyStateObj.call(this,n,r,i,o,a,s);var l=!(r&&o),u;if(r&&r.style?a?o?u=r.style:(u=this._mergeStyle(this.createStyle(),i.style),this._mergeStyle(u,r.style)):(u=this._mergeStyle(this.createStyle(),o?this.style:i.style),this._mergeStyle(u,r.style)):l&&(u=i.style),u)if(a){var c=this.style;if(this.style=this.createStyle(l?{}:c),l)for(var f=ir(c),h=0;h<f.length;h++){var d=f[h];d in u&&(u[d]=u[d],this.style[d]=c[d])}for(var g=ir(u),h=0;h<g.length;h++){var d=g[h];this.style[d]=this.style[d]}this._transitionState(n,{style:u},s,this.getAnimationStyleProps())}else this.useStyle(u);for(var y=this.__inHover?v3e:Mz,h=0;h<y.length;h++){var d=y[h];r&&r[d]!=null?this[d]=r[d]:l&&i[d]!=null&&(this[d]=i[d])}},e.prototype._mergeStates=function(n){for(var r=t.prototype._mergeStates.call(this,n),i,o=0;o<n.length;o++){var a=n[o];a.style&&(i=i||{},this._mergeStyle(i,a.style))}return i&&(r.style=i),r},e.prototype._mergeStyle=function(n,r){return ot(n,r),n},e.prototype.getAnimationStyleProps=function(){return UA},e.initDefaultProps=function(){var n=e.prototype;n.type="displayable",n.invisible=!1,n.z=0,n.z2=0,n.zlevel=0,n.culling=!1,n.cursor="pointer",n.rectHover=!1,n.incremental=!1,n._rect=null,n.dirtyRectTolerance=0,n.__dirty=Ms|Ab}(),e}(ite),A3=new Ir(0,0,0,0),E3=new Ir(0,0,0,0);function b3e(t,e,n){return A3.copy(t.getBoundingRect()),t.transform&&A3.applyTransform(t.transform),E3.width=e,E3.height=n,!A3.intersect(E3)}const hS=y3e;var gl=Math.min,ml=Math.max,P3=Math.sin,O3=Math.cos,np=Math.PI*2,Rx=M0(),Vx=M0(),Bx=M0();function Nz(t,e,n,r,i,o){i[0]=gl(t,n),i[1]=gl(e,r),o[0]=ml(t,n),o[1]=ml(e,r)}var Fz=[],Rz=[];function _3e(t,e,n,r,i,o,a,s,l,u){var c=zee,f=So,h=c(t,n,i,a,Fz);l[0]=1/0,l[1]=1/0,u[0]=-1/0,u[1]=-1/0;for(var d=0;d<h;d++){var g=f(t,n,i,a,Fz[d]);l[0]=gl(g,l[0]),u[0]=ml(g,u[0])}h=c(e,r,o,s,Rz);for(var d=0;d<h;d++){var y=f(e,r,o,s,Rz[d]);l[1]=gl(y,l[1]),u[1]=ml(y,u[1])}l[0]=gl(t,l[0]),u[0]=ml(t,u[0]),l[0]=gl(a,l[0]),u[0]=ml(a,u[0]),l[1]=gl(e,l[1]),u[1]=ml(e,u[1]),l[1]=gl(s,l[1]),u[1]=ml(s,u[1])}function S3e(t,e,n,r,i,o,a,s){var l=jee,u=Uo,c=ml(gl(l(t,n,i),1),0),f=ml(gl(l(e,r,o),1),0),h=u(t,n,i,c),d=u(e,r,o,f);a[0]=gl(t,i,h),a[1]=gl(e,o,d),s[0]=ml(t,i,h),s[1]=ml(e,o,d)}function w3e(t,e,n,r,i,o,a,s,l){var u=uv,c=cv,f=Math.abs(i-o);if(f%np<1e-4&&f>1e-4){s[0]=t-n,s[1]=e-r,l[0]=t+n,l[1]=e+r;return}if(Rx[0]=O3(i)*n+t,Rx[1]=P3(i)*r+e,Vx[0]=O3(o)*n+t,Vx[1]=P3(o)*r+e,u(s,Rx,Vx),c(l,Rx,Vx),i=i%np,i<0&&(i=i+np),o=o%np,o<0&&(o=o+np),i>o&&!a?o+=np:i<o&&a&&(i+=np),a){var h=o;o=i,i=h}for(var d=0;d<o;d+=Math.PI/2)d>i&&(Bx[0]=O3(d)*n+t,Bx[1]=P3(d)*r+e,u(s,Bx,s),c(l,Bx,l))}var cr={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},rp=[],ip=[],Vu=[],Zf=[],Bu=[],zu=[],I3=Math.min,$3=Math.max,op=Math.cos,ap=Math.sin,jc=Math.abs,bL=Math.PI,hh=bL*2,L3=typeof Float32Array<"u",Uy=[];function D3(t){var e=Math.round(t/bL*1e8)/1e8;return e%2*bL}function x3e(t,e){var n=D3(t[0]);n<0&&(n+=hh);var r=n-t[0],i=t[1];i+=r,!e&&i-n>=hh?i=n+hh:e&&n-i>=hh?i=n-hh:!e&&n>i?i=n+(hh-D3(n-i)):e&&n<i&&(i=n-(hh-D3(i-n))),t[0]=n,t[1]=i}var C3e=function(){function t(e){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,e&&(this._saveData=!1),this._saveData&&(this.data=[])}return t.prototype.increaseVersion=function(){this._version++},t.prototype.getVersion=function(){return this._version},t.prototype.setScale=function(e,n,r){r=r||0,r>0&&(this._ux=jc(r/Dk/e)||0,this._uy=jc(r/Dk/n)||0)},t.prototype.setDPR=function(e){this.dpr=e},t.prototype.setContext=function(e){this._ctx=e},t.prototype.getContext=function(){return this._ctx},t.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},t.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},t.prototype.moveTo=function(e,n){return this._drawPendingPt(),this.addData(cr.M,e,n),this._ctx&&this._ctx.moveTo(e,n),this._x0=e,this._y0=n,this._xi=e,this._yi=n,this},t.prototype.lineTo=function(e,n){var r=jc(e-this._xi),i=jc(n-this._yi),o=r>this._ux||i>this._uy;if(this.addData(cr.L,e,n),this._ctx&&o&&this._ctx.lineTo(e,n),o)this._xi=e,this._yi=n,this._pendingPtDist=0;else{var a=r*r+i*i;a>this._pendingPtDist&&(this._pendingPtX=e,this._pendingPtY=n,this._pendingPtDist=a)}return this},t.prototype.bezierCurveTo=function(e,n,r,i,o,a){return this._drawPendingPt(),this.addData(cr.C,e,n,r,i,o,a),this._ctx&&this._ctx.bezierCurveTo(e,n,r,i,o,a),this._xi=o,this._yi=a,this},t.prototype.quadraticCurveTo=function(e,n,r,i){return this._drawPendingPt(),this.addData(cr.Q,e,n,r,i),this._ctx&&this._ctx.quadraticCurveTo(e,n,r,i),this._xi=r,this._yi=i,this},t.prototype.arc=function(e,n,r,i,o,a){this._drawPendingPt(),Uy[0]=i,Uy[1]=o,x3e(Uy,a),i=Uy[0],o=Uy[1];var s=o-i;return this.addData(cr.A,e,n,r,r,i,s,0,a?0:1),this._ctx&&this._ctx.arc(e,n,r,i,o,a),this._xi=op(o)*r+e,this._yi=ap(o)*r+n,this},t.prototype.arcTo=function(e,n,r,i,o){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(e,n,r,i,o),this},t.prototype.rect=function(e,n,r,i){return this._drawPendingPt(),this._ctx&&this._ctx.rect(e,n,r,i),this.addData(cr.R,e,n,r,i),this},t.prototype.closePath=function(){this._drawPendingPt(),this.addData(cr.Z);var e=this._ctx,n=this._x0,r=this._y0;return e&&e.closePath(),this._xi=n,this._yi=r,this},t.prototype.fill=function(e){e&&e.fill(),this.toStatic()},t.prototype.stroke=function(e){e&&e.stroke(),this.toStatic()},t.prototype.len=function(){return this._len},t.prototype.setData=function(e){var n=e.length;!(this.data&&this.data.length===n)&&L3&&(this.data=new Float32Array(n));for(var r=0;r<n;r++)this.data[r]=e[r];this._len=n},t.prototype.appendPath=function(e){e instanceof Array||(e=[e]);for(var n=e.length,r=0,i=this._len,o=0;o<n;o++)r+=e[o].len();L3&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+r));for(var o=0;o<n;o++)for(var a=e[o].data,s=0;s<a.length;s++)this.data[i++]=a[s];this._len=i},t.prototype.addData=function(e,n,r,i,o,a,s,l,u){if(this._saveData){var c=this.data;this._len+arguments.length>c.length&&(this._expandData(),c=this.data);for(var f=0;f<arguments.length;f++)c[this._len++]=arguments[f]}},t.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},t.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var e=[],n=0;n<this._len;n++)e[n]=this.data[n];this.data=e}},t.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var e=this.data;e instanceof Array&&(e.length=this._len,L3&&this._len>11&&(this.data=new Float32Array(e)))}},t.prototype.getBoundingRect=function(){Vu[0]=Vu[1]=Bu[0]=Bu[1]=Number.MAX_VALUE,Zf[0]=Zf[1]=zu[0]=zu[1]=-Number.MAX_VALUE;var e=this.data,n=0,r=0,i=0,o=0,a;for(a=0;a<this._len;){var s=e[a++],l=a===1;switch(l&&(n=e[a],r=e[a+1],i=n,o=r),s){case cr.M:n=i=e[a++],r=o=e[a++],Bu[0]=i,Bu[1]=o,zu[0]=i,zu[1]=o;break;case cr.L:Nz(n,r,e[a],e[a+1],Bu,zu),n=e[a++],r=e[a++];break;case cr.C:_3e(n,r,e[a++],e[a++],e[a++],e[a++],e[a],e[a+1],Bu,zu),n=e[a++],r=e[a++];break;case cr.Q:S3e(n,r,e[a++],e[a++],e[a],e[a+1],Bu,zu),n=e[a++],r=e[a++];break;case cr.A:var u=e[a++],c=e[a++],f=e[a++],h=e[a++],d=e[a++],g=e[a++]+d;a+=1;var y=!e[a++];l&&(i=op(d)*f+u,o=ap(d)*h+c),w3e(u,c,f,h,d,g,y,Bu,zu),n=op(g)*f+u,r=ap(g)*h+c;break;case cr.R:i=n=e[a++],o=r=e[a++];var _=e[a++],v=e[a++];Nz(i,o,i+_,o+v,Bu,zu);break;case cr.Z:n=i,r=o;break}uv(Vu,Vu,Bu),cv(Zf,Zf,zu)}return a===0&&(Vu[0]=Vu[1]=Zf[0]=Zf[1]=0),new Ir(Vu[0],Vu[1],Zf[0]-Vu[0],Zf[1]-Vu[1])},t.prototype._calculateLength=function(){var e=this.data,n=this._len,r=this._ux,i=this._uy,o=0,a=0,s=0,l=0;this._pathSegLen||(this._pathSegLen=[]);for(var u=this._pathSegLen,c=0,f=0,h=0;h<n;){var d=e[h++],g=h===1;g&&(o=e[h],a=e[h+1],s=o,l=a);var y=-1;switch(d){case cr.M:o=s=e[h++],a=l=e[h++];break;case cr.L:{var _=e[h++],v=e[h++],S=_-o,C=v-a;(jc(S)>r||jc(C)>i||h===n-1)&&(y=Math.sqrt(S*S+C*C),o=_,a=v);break}case cr.C:{var k=e[h++],x=e[h++],_=e[h++],v=e[h++],m=e[h++],T=e[h++];y=NPe(o,a,k,x,_,v,m,T,10),o=m,a=T;break}case cr.Q:{var k=e[h++],x=e[h++],_=e[h++],v=e[h++];y=VPe(o,a,k,x,_,v,10),o=_,a=v;break}case cr.A:var P=e[h++],I=e[h++],M=e[h++],L=e[h++],R=e[h++],V=e[h++],z=V+R;h+=1,e[h++],g&&(s=op(R)*M+P,l=ap(R)*L+I),y=$3(M,L)*I3(hh,Math.abs(V)),o=op(z)*M+P,a=ap(z)*L+I;break;case cr.R:{s=o=e[h++],l=a=e[h++];var ie=e[h++],oe=e[h++];y=ie*2+oe*2;break}case cr.Z:{var S=s-o,C=l-a;y=Math.sqrt(S*S+C*C),o=s,a=l;break}}y>=0&&(u[f++]=y,c+=y)}return this._pathLen=c,c},t.prototype.rebuildPath=function(e,n){var r=this.data,i=this._ux,o=this._uy,a=this._len,s,l,u,c,f,h,d=n<1,g,y,_=0,v=0,S,C=0,k,x;if(!(d&&(this._pathSegLen||this._calculateLength(),g=this._pathSegLen,y=this._pathLen,S=n*y,!S)))e:for(var m=0;m<a;){var T=r[m++],P=m===1;switch(P&&(u=r[m],c=r[m+1],s=u,l=c),T!==cr.L&&C>0&&(e.lineTo(k,x),C=0),T){case cr.M:s=u=r[m++],l=c=r[m++],e.moveTo(u,c);break;case cr.L:{f=r[m++],h=r[m++];var I=jc(f-u),M=jc(h-c);if(I>i||M>o){if(d){var L=g[v++];if(_+L>S){var R=(S-_)/L;e.lineTo(u*(1-R)+f*R,c*(1-R)+h*R);break e}_+=L}e.lineTo(f,h),u=f,c=h,C=0}else{var V=I*I+M*M;V>C&&(k=f,x=h,C=V)}break}case cr.C:{var z=r[m++],ie=r[m++],oe=r[m++],Se=r[m++],Ae=r[m++],Ee=r[m++];if(d){var L=g[v++];if(_+L>S){var R=(S-_)/L;Pk(u,z,oe,Ae,R,rp),Pk(c,ie,Se,Ee,R,ip),e.bezierCurveTo(rp[1],ip[1],rp[2],ip[2],rp[3],ip[3]);break e}_+=L}e.bezierCurveTo(z,ie,oe,Se,Ae,Ee),u=Ae,c=Ee;break}case cr.Q:{var z=r[m++],ie=r[m++],oe=r[m++],Se=r[m++];if(d){var L=g[v++];if(_+L>S){var R=(S-_)/L;Ok(u,z,oe,R,rp),Ok(c,ie,Se,R,ip),e.quadraticCurveTo(rp[1],ip[1],rp[2],ip[2]);break e}_+=L}e.quadraticCurveTo(z,ie,oe,Se),u=oe,c=Se;break}case cr.A:var _e=r[m++],se=r[m++],ne=r[m++],J=r[m++],B=r[m++],H=r[m++],ae=r[m++],te=!r[m++],ce=ne>J?ne:J,ue=jc(ne-J)>.001,fe=B+H,ye=!1;if(d){var L=g[v++];_+L>S&&(fe=B+H*(S-_)/L,ye=!0),_+=L}if(ue&&e.ellipse?e.ellipse(_e,se,ne,J,ae,B,fe,te):e.arc(_e,se,ce,B,fe,te),ye)break e;P&&(s=op(B)*ne+_e,l=ap(B)*J+se),u=op(fe)*ne+_e,c=ap(fe)*J+se;break;case cr.R:s=u=r[m],l=c=r[m+1],f=r[m++],h=r[m++];var j=r[m++],Y=r[m++];if(d){var L=g[v++];if(_+L>S){var O=S-_;e.moveTo(f,h),e.lineTo(f+I3(O,j),h),O-=j,O>0&&e.lineTo(f+j,h+I3(O,Y)),O-=Y,O>0&&e.lineTo(f+$3(j-O,0),h+Y),O-=j,O>0&&e.lineTo(f,h+$3(Y-O,0));break e}_+=L}e.rect(f,h,j,Y);break;case cr.Z:if(d){var L=g[v++];if(_+L>S){var R=(S-_)/L;e.lineTo(u*(1-R)+s*R,c*(1-R)+l*R);break e}_+=L}e.closePath(),u=s,c=l}}},t.prototype.clone=function(){var e=new t,n=this.data;return e.data=n.slice?n.slice():Array.prototype.slice.call(n),e._len=this._len,e},t.CMD=cr,t.initDefaultProps=function(){var e=t.prototype;e._saveData=!0,e._ux=0,e._uy=0,e._pendingPtDist=0,e._version=0}(),t}();const sd=C3e;function Tm(t,e,n,r,i,o,a){if(i===0)return!1;var s=i,l=0,u=t;if(a>e+s&&a>r+s||a<e-s&&a<r-s||o>t+s&&o>n+s||o<t-s&&o<n-s)return!1;if(t!==n)l=(e-r)/(t-n),u=(t*r-n*e)/(t-n);else return Math.abs(o-t)<=s/2;var c=l*o-a+u,f=c*c/(l*l+1);return f<=s/2*s/2}function k3e(t,e,n,r,i,o,a,s,l,u,c){if(l===0)return!1;var f=l;if(c>e+f&&c>r+f&&c>o+f&&c>s+f||c<e-f&&c<r-f&&c<o-f&&c<s-f||u>t+f&&u>n+f&&u>i+f&&u>a+f||u<t-f&&u<n-f&&u<i-f&&u<a-f)return!1;var h=MPe(t,e,n,r,i,o,a,s,u,c,null);return h<=f/2}function T3e(t,e,n,r,i,o,a,s,l){if(a===0)return!1;var u=a;if(l>e+u&&l>r+u&&l>o+u||l<e-u&&l<r-u&&l<o-u||s>t+u&&s>n+u&&s>i+u||s<t-u&&s<n-u&&s<i-u)return!1;var c=RPe(t,e,n,r,i,o,s,l,null);return c<=u/2}var Vz=Math.PI*2;function hv(t){return t%=Vz,t<0&&(t+=Vz),t}var Wy=Math.PI*2;function A3e(t,e,n,r,i,o,a,s,l){if(a===0)return!1;var u=a;s-=t,l-=e;var c=Math.sqrt(s*s+l*l);if(c-u>n||c+u<n)return!1;if(Math.abs(r-i)%Wy<1e-4)return!0;if(o){var f=r;r=hv(i),i=hv(f)}else r=hv(r),i=hv(i);r>i&&(i+=Wy);var h=Math.atan2(l,s);return h<0&&(h+=Wy),h>=r&&h<=i||h+Wy>=r&&h+Wy<=i}function sp(t,e,n,r,i,o){if(o>e&&o>r||o<e&&o<r||r===e)return 0;var a=(o-e)/(r-e),s=r<e?1:-1;(a===1||a===0)&&(s=r<e?.5:-.5);var l=a*(n-t)+t;return l===i?1/0:l>i?s:0}var Qf=sd.CMD,lp=Math.PI*2,E3e=1e-4;function P3e(t,e){return Math.abs(t-e)<E3e}var va=[-1,-1,-1],hl=[-1,-1];function O3e(){var t=hl[0];hl[0]=hl[1],hl[1]=t}function I3e(t,e,n,r,i,o,a,s,l,u){if(u>e&&u>r&&u>o&&u>s||u<e&&u<r&&u<o&&u<s)return 0;var c=Bee(e,r,o,s,u,va);if(c===0)return 0;for(var f=0,h=-1,d=void 0,g=void 0,y=0;y<c;y++){var _=va[y],v=_===0||_===1?.5:1,S=So(t,n,i,a,_);S<l||(h<0&&(h=zee(e,r,o,s,hl),hl[1]<hl[0]&&h>1&&O3e(),d=So(e,r,o,s,hl[0]),h>1&&(g=So(e,r,o,s,hl[1]))),h===2?_<hl[0]?f+=d<e?v:-v:_<hl[1]?f+=g<d?v:-v:f+=s<g?v:-v:_<hl[0]?f+=d<e?v:-v:f+=s<d?v:-v)}return f}function $3e(t,e,n,r,i,o,a,s){if(s>e&&s>r&&s>o||s<e&&s<r&&s<o)return 0;var l=FPe(e,r,o,s,va);if(l===0)return 0;var u=jee(e,r,o);if(u>=0&&u<=1){for(var c=0,f=Uo(e,r,o,u),h=0;h<l;h++){var d=va[h]===0||va[h]===1?.5:1,g=Uo(t,n,i,va[h]);g<a||(va[h]<u?c+=f<e?d:-d:c+=o<f?d:-d)}return c}else{var d=va[0]===0||va[0]===1?.5:1,g=Uo(t,n,i,va[0]);return g<a?0:o<e?d:-d}}function L3e(t,e,n,r,i,o,a,s){if(s-=e,s>n||s<-n)return 0;var l=Math.sqrt(n*n-s*s);va[0]=-l,va[1]=l;var u=Math.abs(r-i);if(u<1e-4)return 0;if(u>=lp-1e-4){r=0,i=lp;var c=o?1:-1;return a>=va[0]+t&&a<=va[1]+t?c:0}if(r>i){var f=r;r=i,i=f}r<0&&(r+=lp,i+=lp);for(var h=0,d=0;d<2;d++){var g=va[d];if(g+t>a){var y=Math.atan2(s,g),c=o?1:-1;y<0&&(y=lp+y),(y>=r&&y<=i||y+lp>=r&&y+lp<=i)&&(y>Math.PI/2&&y<Math.PI*1.5&&(c=-c),h+=c)}}return h}function bte(t,e,n,r,i){for(var o=t.data,a=t.len(),s=0,l=0,u=0,c=0,f=0,h,d,g=0;g<a;){var y=o[g++],_=g===1;switch(y===Qf.M&&g>1&&(n||(s+=sp(l,u,c,f,r,i))),_&&(l=o[g],u=o[g+1],c=l,f=u),y){case Qf.M:c=o[g++],f=o[g++],l=c,u=f;break;case Qf.L:if(n){if(Tm(l,u,o[g],o[g+1],e,r,i))return!0}else s+=sp(l,u,o[g],o[g+1],r,i)||0;l=o[g++],u=o[g++];break;case Qf.C:if(n){if(k3e(l,u,o[g++],o[g++],o[g++],o[g++],o[g],o[g+1],e,r,i))return!0}else s+=I3e(l,u,o[g++],o[g++],o[g++],o[g++],o[g],o[g+1],r,i)||0;l=o[g++],u=o[g++];break;case Qf.Q:if(n){if(T3e(l,u,o[g++],o[g++],o[g],o[g+1],e,r,i))return!0}else s+=$3e(l,u,o[g++],o[g++],o[g],o[g+1],r,i)||0;l=o[g++],u=o[g++];break;case Qf.A:var v=o[g++],S=o[g++],C=o[g++],k=o[g++],x=o[g++],m=o[g++];g+=1;var T=!!(1-o[g++]);h=Math.cos(x)*C+v,d=Math.sin(x)*k+S,_?(c=h,f=d):s+=sp(l,u,h,d,r,i);var P=(r-v)*k/C+v;if(n){if(A3e(v,S,k,x,x+m,T,e,P,i))return!0}else s+=L3e(v,S,k,x,x+m,T,P,i);l=Math.cos(x+m)*C+v,u=Math.sin(x+m)*k+S;break;case Qf.R:c=l=o[g++],f=u=o[g++];var I=o[g++],M=o[g++];if(h=c+I,d=f+M,n){if(Tm(c,f,h,f,e,r,i)||Tm(h,f,h,d,e,r,i)||Tm(h,d,c,d,e,r,i)||Tm(c,d,c,f,e,r,i))return!0}else s+=sp(h,f,h,d,r,i),s+=sp(c,d,c,f,r,i);break;case Qf.Z:if(n){if(Tm(l,u,c,f,e,r,i))return!0}else s+=sp(l,u,c,f,r,i);l=c,u=f;break}}return!n&&!P3e(u,f)&&(s+=sp(l,u,c,f,r,i)||0),s!==0}function D3e(t,e,n){return bte(t,0,!1,e,n)}function M3e(t,e,n,r){return bte(t,e,!0,n,r)}var Fk=pi({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},ag),N3e={style:pi({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},UA.style)},M3=J1.concat(["invisible","culling","z","z2","zlevel","parent"]),F3e=function(t){kr(e,t);function e(n){return t.call(this,n)||this}return e.prototype.update=function(){var n=this;t.prototype.update.call(this);var r=this.style;if(r.decal){var i=this._decalEl=this._decalEl||new e;i.buildPath===e.prototype.buildPath&&(i.buildPath=function(l){n.buildPath(l,n.shape)}),i.silent=!0;var o=i.style;for(var a in r)o[a]!==r[a]&&(o[a]=r[a]);o.fill=r.fill?r.decal:null,o.decal=null,o.shadowColor=null,r.strokeFirst&&(o.stroke=null);for(var s=0;s<M3.length;++s)i[M3[s]]=this[M3[s]];i.__dirty|=Ms}else this._decalEl&&(this._decalEl=null)},e.prototype.getDecalElement=function(){return this._decalEl},e.prototype._init=function(n){var r=ir(n);this.shape=this.getDefaultShape();var i=this.getDefaultStyle();i&&this.useStyle(i);for(var o=0;o<r.length;o++){var a=r[o],s=n[a];a==="style"?this.style?ot(this.style,s):this.useStyle(s):a==="shape"?ot(this.shape,s):t.prototype.attrKV.call(this,a,s)}this.style||this.useStyle({})},e.prototype.getDefaultStyle=function(){return null},e.prototype.getDefaultShape=function(){return{}},e.prototype.canBeInsideText=function(){return this.hasFill()},e.prototype.getInsideTextFill=function(){var n=this.style.fill;if(n!=="none"){if(Pt(n)){var r=$k(n,0);return r>.5?pL:r>.2?vOe:gL}else if(n)return gL}return pL},e.prototype.getInsideTextStroke=function(n){var r=this.style.fill;if(Pt(r)){var i=this.__zr,o=!!(i&&i.isDarkMode()),a=$k(n,0)<dL;if(o===a)return r}},e.prototype.buildPath=function(n,r,i){},e.prototype.pathUpdated=function(){this.__dirty&=~Ym},e.prototype.getUpdatedPathProxy=function(n){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,n),this.path},e.prototype.createPathProxy=function(){this.path=new sd(!1)},e.prototype.hasStroke=function(){var n=this.style,r=n.stroke;return!(r==null||r==="none"||!(n.lineWidth>0))},e.prototype.hasFill=function(){var n=this.style,r=n.fill;return r!=null&&r!=="none"},e.prototype.getBoundingRect=function(){var n=this._rect,r=this.style,i=!n;if(i){var o=!1;this.path||(o=!0,this.createPathProxy());var a=this.path;(o||this.__dirty&Ym)&&(a.beginPath(),this.buildPath(a,this.shape,!1),this.pathUpdated()),n=a.getBoundingRect()}if(this._rect=n,this.hasStroke()&&this.path&&this.path.len()>0){var s=this._rectStroke||(this._rectStroke=n.clone());if(this.__dirty||i){s.copy(n);var l=r.strokeNoScale?this.getLineScale():1,u=r.lineWidth;if(!this.hasFill()){var c=this.strokeContainThreshold;u=Math.max(u,c??4)}l>1e-10&&(s.width+=u/l,s.height+=u/l,s.x-=u/l/2,s.y-=u/l/2)}return s}return n},e.prototype.contain=function(n,r){var i=this.transformCoordToLocal(n,r),o=this.getBoundingRect(),a=this.style;if(n=i[0],r=i[1],o.contain(n,r)){var s=this.path;if(this.hasStroke()){var l=a.lineWidth,u=a.strokeNoScale?this.getLineScale():1;if(u>1e-10&&(this.hasFill()||(l=Math.max(l,this.strokeContainThreshold)),M3e(s,l/u,n,r)))return!0}if(this.hasFill())return D3e(s,n,r)}return!1},e.prototype.dirtyShape=function(){this.__dirty|=Ym,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},e.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},e.prototype.animateShape=function(n){return this.animate("shape",n)},e.prototype.updateDuringAnimation=function(n){n==="style"?this.dirtyStyle():n==="shape"?this.dirtyShape():this.markRedraw()},e.prototype.attrKV=function(n,r){n==="shape"?this.setShape(r):t.prototype.attrKV.call(this,n,r)},e.prototype.setShape=function(n,r){var i=this.shape;return i||(i=this.shape={}),typeof n=="string"?i[n]=r:ot(i,n),this.dirtyShape(),this},e.prototype.shapeChanged=function(){return!!(this.__dirty&Ym)},e.prototype.createStyle=function(n){return RA(Fk,n)},e.prototype._innerSaveToNormal=function(n){t.prototype._innerSaveToNormal.call(this,n);var r=this._normalState;n.shape&&!r.shape&&(r.shape=ot({},this.shape))},e.prototype._applyStateObj=function(n,r,i,o,a,s){t.prototype._applyStateObj.call(this,n,r,i,o,a,s);var l=!(r&&o),u;if(r&&r.shape?a?o?u=r.shape:(u=ot({},i.shape),ot(u,r.shape)):(u=ot({},o?this.shape:i.shape),ot(u,r.shape)):l&&(u=i.shape),u)if(a){this.shape=ot({},this.shape);for(var c={},f=ir(u),h=0;h<f.length;h++){var d=f[h];typeof u[d]=="object"?this.shape[d]=u[d]:c[d]=u[d]}this._transitionState(n,{shape:c},s)}else this.shape=u,this.dirtyShape()},e.prototype._mergeStates=function(n){for(var r=t.prototype._mergeStates.call(this,n),i,o=0;o<n.length;o++){var a=n[o];a.shape&&(i=i||{},this._mergeStyle(i,a.shape))}return i&&(r.shape=i),r},e.prototype.getAnimationStyleProps=function(){return N3e},e.prototype.isZeroArea=function(){return!1},e.extend=function(n){var r=function(o){kr(a,o);function a(s){var l=o.call(this,s)||this;return n.init&&n.init.call(l,s),l}return a.prototype.getDefaultStyle=function(){return Gn(n.style)},a.prototype.getDefaultShape=function(){return Gn(n.shape)},a}(e);for(var i in n)typeof n[i]=="function"&&(r.prototype[i]=n[i]);return r},e.initDefaultProps=function(){var n=e.prototype;n.type="path",n.strokeContainThreshold=5,n.segmentIgnoreThreshold=0,n.subPixelOptimize=!1,n.autoBatch=!1,n.__dirty=Ms|Ab|Ym}(),e}(hS);const Lr=F3e;var R3e=pi({strokeFirst:!0,font:od,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},Fk),_te=function(t){kr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.hasStroke=function(){var n=this.style,r=n.stroke;return r!=null&&r!=="none"&&n.lineWidth>0},e.prototype.hasFill=function(){var n=this.style,r=n.fill;return r!=null&&r!=="none"},e.prototype.createStyle=function(n){return RA(R3e,n)},e.prototype.setBoundingRect=function(n){this._rect=n},e.prototype.getBoundingRect=function(){var n=this.style;if(!this._rect){var r=n.text;r!=null?r+="":r="";var i=tte(r,n.font,n.textAlign,n.textBaseline);if(i.x+=n.x||0,i.y+=n.y||0,this.hasStroke()){var o=n.lineWidth;i.x-=o/2,i.y-=o/2,i.width+=o,i.height+=o}this._rect=i}return this._rect},e.initDefaultProps=function(){var n=e.prototype;n.dirtyRectTolerance=10}(),e}(hS);_te.prototype.type="tspan";const Rk=_te;var V3e=pi({x:0,y:0},ag),B3e={style:pi({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},UA.style)};function z3e(t){return!!(t&&typeof t!="string"&&t.width&&t.height)}var Ste=function(t){kr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.createStyle=function(n){return RA(V3e,n)},e.prototype._getSize=function(n){var r=this.style,i=r[n];if(i!=null)return i;var o=z3e(r.image)?r.image:this.__image;if(!o)return 0;var a=n==="width"?"height":"width",s=r[a];return s==null?o[n]:o[n]/o[a]*s},e.prototype.getWidth=function(){return this._getSize("width")},e.prototype.getHeight=function(){return this._getSize("height")},e.prototype.getAnimationStyleProps=function(){return B3e},e.prototype.getBoundingRect=function(){var n=this.style;return this._rect||(this._rect=new Ir(n.x||0,n.y||0,this.getWidth(),this.getHeight())),this._rect},e}(hS);Ste.prototype.type="image";const gd=Ste;function j3e(t,e){var n=e.x,r=e.y,i=e.width,o=e.height,a=e.r,s,l,u,c;i<0&&(n=n+i,i=-i),o<0&&(r=r+o,o=-o),typeof a=="number"?s=l=u=c=a:a instanceof Array?a.length===1?s=l=u=c=a[0]:a.length===2?(s=u=a[0],l=c=a[1]):a.length===3?(s=a[0],l=c=a[1],u=a[2]):(s=a[0],l=a[1],u=a[2],c=a[3]):s=l=u=c=0;var f;s+l>i&&(f=s+l,s*=i/f,l*=i/f),u+c>i&&(f=u+c,u*=i/f,c*=i/f),l+u>o&&(f=l+u,l*=o/f,u*=o/f),s+c>o&&(f=s+c,s*=o/f,c*=o/f),t.moveTo(n+s,r),t.lineTo(n+i-l,r),l!==0&&t.arc(n+i-l,r+l,l,-Math.PI/2,0),t.lineTo(n+i,r+o-u),u!==0&&t.arc(n+i-u,r+o-u,u,0,Math.PI/2),t.lineTo(n+c,r+o),c!==0&&t.arc(n+c,r+o-c,c,Math.PI/2,Math.PI),t.lineTo(n,r+s),s!==0&&t.arc(n+s,r+s,s,Math.PI,Math.PI*1.5)}var dv=Math.round;function wte(t,e,n){if(e){var r=e.x1,i=e.x2,o=e.y1,a=e.y2;t.x1=r,t.x2=i,t.y1=o,t.y2=a;var s=n&&n.lineWidth;return s&&(dv(r*2)===dv(i*2)&&(t.x1=t.x2=qp(r,s,!0)),dv(o*2)===dv(a*2)&&(t.y1=t.y2=qp(o,s,!0))),t}}function xte(t,e,n){if(e){var r=e.x,i=e.y,o=e.width,a=e.height;t.x=r,t.y=i,t.width=o,t.height=a;var s=n&&n.lineWidth;return s&&(t.x=qp(r,s,!0),t.y=qp(i,s,!0),t.width=Math.max(qp(r+o,s,!1)-t.x,o===0?0:1),t.height=Math.max(qp(i+a,s,!1)-t.y,a===0?0:1)),t}}function qp(t,e,n){if(!e)return t;var r=dv(t*2);return(r+dv(e))%2===0?r/2:(r+(n?1:-1))/2}var U3e=function(){function t(){this.x=0,this.y=0,this.width=0,this.height=0}return t}(),W3e={},Cte=function(t){kr(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultShape=function(){return new U3e},e.prototype.buildPath=function(n,r){var i,o,a,s;if(this.subPixelOptimize){var l=xte(W3e,r,this.style);i=l.x,o=l.y,a=l.width,s=l.height,l.r=r.r,r=l}else i=r.x,o=r.y,a=r.width,s=r.height;r.r?j3e(n,r):n.rect(i,o,a,s)},e.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},e}(Lr);Cte.prototype.type="rect";const Qo=Cte;var Bz={fill:"#000"},zz=2,H3e={style:pi({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},UA.style)},kte=function(t){kr(e,t);function e(n){var r=t.call(this)||this;return r.type="text",r._children=[],r._defaultStyle=Bz,r.attr(n),r}return e.prototype.childrenRef=function(){return this._children},e.prototype.update=function(){t.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var n=0;n<this._children.length;n++){var r=this._children[n];r.zlevel=this.zlevel,r.z=this.z,r.z2=this.z2,r.culling=this.culling,r.cursor=this.cursor,r.invisible=this.invisible}},e.prototype.updateTransform=function(){var n=this.innerTransformable;n?(n.updateTransform(),n.transform&&(this.transform=n.transform)):t.prototype.updateTransform.call(this)},e.prototype.getLocalTransform=function(n){var r=this.innerTransformable;return r?r.getLocalTransform(n):t.prototype.getLocalTransform.call(this,n)},e.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),t.prototype.getComputedTransform.call(this)},e.prototype._updateSubTexts=function(){this._childCursor=0,Y3e(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},e.prototype.addSelfToZr=function(n){t.prototype.addSelfToZr.call(this,n);for(var r=0;r<this._children.length;r++)this._children[r].__zr=n},e.prototype.removeSelfFromZr=function(n){t.prototype.removeSelfFromZr.call(this,n);for(var r=0;r<this._children.length;r++)this._children[r].__zr=null},e.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var n=new Ir(0,0,0,0),r=this._children,i=[],o=null,a=0;a<r.length;a++){var s=r[a],l=s.getBoundingRect(),u=s.getLocalTransform(i);u?(n.copy(l),n.applyTransform(u),o=o||n.clone(),o.union(n)):(o=o||l.clone(),o.union(l))}this._rect=o||n}return this._rect},e.prototype.setDefaultTextStyle=function(n){this._defaultStyle=n||Bz},e.prototype.setTextContent=function(n){},e.prototype._mergeStyle=function(n,r){if(!r)return n;var i=r.rich,o=n.rich||i&&{};return ot(n,r),i&&o?(this._mergeRich(o,i),n.rich=o):o&&(n.rich=o),n},e.prototype._mergeRich=function(n,r){for(var i=ir(r),o=0;o<i.length;o++){var a=i[o];n[a]=n[a]||{},ot(n[a],r[a])}},e.prototype.getAnimationStyleProps=function(){return H3e},e.prototype._getOrCreateChild=function(n){var r=this._children[this._childCursor];return(!r||!(r instanceof n))&&(r=new n),this._children[this._childCursor++]=r,r.__zr=this.__zr,r.parent=this,r},e.prototype._updatePlainTexts=function(){var n=this.style,r=n.font||od,i=n.padding,o=Yz(n),a=c3e(o,n),s=N3(n),l=!!n.backgroundColor,u=a.outerHeight,c=a.outerWidth,f=a.contentWidth,h=a.lines,d=a.lineHeight,g=this._defaultStyle,y=n.x||0,_=n.y||0,v=n.align||g.align||"left",S=n.verticalAlign||g.verticalAlign||"top",C=y,k=Km(_,a.contentHeight,S);if(s||i){var x=Pb(y,c,v),m=Km(_,u,S);s&&this._renderBackground(n,n,x,m,c,u)}k+=d/2,i&&(C=qz(y,v,i),S==="top"?k+=i[0]:S==="bottom"&&(k-=i[2]));for(var T=0,P=!1,I=Gz("fill"in n?n.fill:(P=!0,g.fill)),M=Hz("stroke"in n?n.stroke:!l&&(!g.autoStroke||P)?(T=zz,g.stroke):null),L=n.textShadowBlur>0,R=n.width!=null&&(n.overflow==="truncate"||n.overflow==="break"||n.overflow==="breakAll"),V=a.calculatedLineHeight,z=0;z<h.length;z++){var ie=this._getOrCreateChild(Rk),oe=ie.createStyle();ie.useStyle(oe),oe.text=h[z],oe.x=C,oe.y=k,v&&(oe.textAlign=v),oe.textBaseline="middle",oe.opacity=n.opacity,oe.strokeFirst=!0,L&&(oe.shadowBlur=n.textShadowBlur||0,oe.shadowColor=n.textShadowColor||"transparent",oe.shadowOffsetX=n.textShadowOffsetX||0,oe.shadowOffsetY=n.textShadowOffsetY||0),oe.stroke=M,oe.fill=I,M&&(oe.lineWidth=n.lineWidth||T,oe.lineDash=n.lineDash,oe.lineDashOffset=n.lineDashOffset||0),oe.font=r,Uz(oe,n),k+=d,R&&ie.setBoundingRect(new Ir(Pb(oe.x,n.width,oe.textAlign),Km(oe.y,V,oe.textBaseline),f,V))}},e.prototype._updateRichTexts=function(){var n=this.style,r=Yz(n),i=d3e(r,n),o=i.width,a=i.outerWidth,s=i.outerHeight,l=n.padding,u=n.x||0,c=n.y||0,f=this._defaultStyle,h=n.align||f.align,d=n.verticalAlign||f.verticalAlign,g=Pb(u,a,h),y=Km(c,s,d),_=g,v=y;l&&(_+=l[3],v+=l[0]);var S=_+o;N3(n)&&this._renderBackground(n,n,g,y,a,s);for(var C=!!n.backgroundColor,k=0;k<i.lines.length;k++){for(var x=i.lines[k],m=x.tokens,T=m.length,P=x.lineHeight,I=x.width,M=0,L=_,R=S,V=T-1,z=void 0;M<T&&(z=m[M],!z.align||z.align==="left");)this._placeToken(z,n,P,v,L,"left",C),I-=z.width,L+=z.width,M++;for(;V>=0&&(z=m[V],z.align==="right");)this._placeToken(z,n,P,v,R,"right",C),I-=z.width,R-=z.width,V--;for(L+=(o-(L-_)-(S-R)-I)/2;M<=V;)z=m[M],this._placeToken(z,n,P,v,L+z.width/2,"center",C),L+=z.width,M++;v+=P}},e.prototype._placeToken=function(n,r,i,o,a,s,l){var u=r.rich[n.styleName]||{};u.text=n.text;var c=n.verticalAlign,f=o+i/2;c==="top"?f=o+n.height/2:c==="bottom"&&(f=o+i-n.height/2);var h=!n.isLineHolder&&N3(u);h&&this._renderBackground(u,r,s==="right"?a-n.width:s==="center"?a-n.width/2:a,f-n.height/2,n.width,n.height);var d=!!u.backgroundColor,g=n.textPadding;g&&(a=qz(a,s,g),f-=n.height/2-g[0]-n.innerHeight/2);var y=this._getOrCreateChild(Rk),_=y.createStyle();y.useStyle(_);var v=this._defaultStyle,S=!1,C=0,k=Gz("fill"in u?u.fill:"fill"in r?r.fill:(S=!0,v.fill)),x=Hz("stroke"in u?u.stroke:"stroke"in r?r.stroke:!d&&!l&&(!v.autoStroke||S)?(C=zz,v.stroke):null),m=u.textShadowBlur>0||r.textShadowBlur>0;_.text=n.text,_.x=a,_.y=f,m&&(_.shadowBlur=u.textShadowBlur||r.textShadowBlur||0,_.shadowColor=u.textShadowColor||r.textShadowColor||"transparent",_.shadowOffsetX=u.textShadowOffsetX||r.textShadowOffsetX||0,_.shadowOffsetY=u.textShadowOffsetY||r.textShadowOffsetY||0),_.textAlign=s,_.textBaseline="middle",_.font=n.font||od,_.opacity=$v(u.opacity,r.opacity,1),Uz(_,u),x&&(_.lineWidth=$v(u.lineWidth,r.lineWidth,C),_.lineDash=gn(u.lineDash,r.lineDash),_.lineDashOffset=r.lineDashOffset||0,_.stroke=x),k&&(_.fill=k);var T=n.contentWidth,P=n.contentHeight;y.setBoundingRect(new Ir(Pb(_.x,T,_.textAlign),Km(_.y,P,_.textBaseline),T,P))},e.prototype._renderBackground=function(n,r,i,o,a,s){var l=n.backgroundColor,u=n.borderWidth,c=n.borderColor,f=l&&l.image,h=l&&!f,d=n.borderRadius,g=this,y,_;if(h||n.lineHeight||u&&c){y=this._getOrCreateChild(Qo),y.useStyle(y.createStyle()),y.style.fill=null;var v=y.shape;v.x=i,v.y=o,v.width=a,v.height=s,v.r=d,y.dirtyShape()}if(h){var S=y.style;S.fill=l||null,S.fillOpacity=gn(n.fillOpacity,1)}else if(f){_=this._getOrCreateChild(gd),_.onload=function(){g.dirtyStyle()};var C=_.style;C.image=l.image,C.x=i,C.y=o,C.width=a,C.height=s}if(u&&c){var S=y.style;S.lineWidth=u,S.stroke=c,S.strokeOpacity=gn(n.strokeOpacity,1),S.lineDash=n.borderDash,S.lineDashOffset=n.borderDashOffset||0,y.strokeContainThreshold=0,y.hasFill()&&y.hasStroke()&&(S.strokeFirst=!0,S.lineWidth*=2)}var k=(y||_).style;k.shadowBlur=n.shadowBlur||0,k.shadowColor=n.shadowColor||"transparent",k.shadowOffsetX=n.shadowOffsetX||0,k.shadowOffsetY=n.shadowOffsetY||0,k.opacity=$v(n.opacity,r.opacity,1)},e.makeFont=function(n){var r="";return Ate(n)&&(r=[n.fontStyle,n.fontWeight,Tte(n.fontSize),n.fontFamily||"sans-serif"].join(" ")),r&&ac(r)||n.textFont||n.font},e}(hS),G3e={left:!0,right:1,center:1},q3e={top:1,bottom:1,middle:1},jz=["fontStyle","fontWeight","fontSize","fontFamily"];function Tte(t){return typeof t=="string"&&(t.indexOf("px")!==-1||t.indexOf("rem")!==-1||t.indexOf("em")!==-1)?t:isNaN(+t)?GN+"px":t+"px"}function Uz(t,e){for(var n=0;n<jz.length;n++){var r=jz[n],i=e[r];i!=null&&(t[r]=i)}}function Ate(t){return t.fontSize!=null||t.fontFamily||t.fontWeight}function Y3e(t){return Wz(t),be(t.rich,Wz),t}function Wz(t){if(t){t.font=kte.makeFont(t);var e=t.align;e==="middle"&&(e="center"),t.align=e==null||G3e[e]?e:"left";var n=t.verticalAlign;n==="center"&&(n="middle"),t.verticalAlign=n==null||q3e[n]?n:"top";var r=t.padding;r&&(t.padding=kee(t.padding))}}function Hz(t,e){return t==null||e<=0||t==="transparent"||t==="none"?null:t.image||t.colorStops?"#000":t}function Gz(t){return t==null||t==="none"?null:t.image||t.colorStops?"#000":t}function qz(t,e,n){return e==="right"?t-n[1]:e==="center"?t+n[3]/2-n[1]/2:t+n[3]}function Yz(t){var e=t.text;return e!=null&&(e+=""),e}function N3(t){return!!(t.backgroundColor||t.lineHeight||t.borderWidth&&t.borderColor)}const ea=kte;var Br=no(),K3e=function(t,e,n,r){if(r){var i=Br(r);i.dataIndex=n,i.dataType=e,i.seriesIndex=t,r.type==="group"&&r.traverse(function(o){var a=Br(o);a.seriesIndex=t,a.dataIndex=n,a.dataType=e})}},Kz=1,Xz={},Ete=no(),cF=no(),Pte=0,fF=1,hF=2,pu=["emphasis","blur","select"],e_=["normal","emphasis","blur","select"],X3e=10,J3e=9,sg="highlight",v2="downplay",n1="select",y2="unselect",r1="toggleSelect";function Am(t){return t!=null&&t!=="none"}var Jz=new lS(100);function Zz(t){if(Pt(t)){var e=Jz.get(t);return e||(e=aL(t,-.1),Jz.put(t,e)),e}else if(FA(t)){var n=ot({},t);return n.colorStops=Qt(t.colorStops,function(r){return{offset:r.offset,color:aL(r.color,-.1)}}),n}return t}function WA(t,e,n){t.onHoverStateChange&&(t.hoverState||0)!==n&&t.onHoverStateChange(e),t.hoverState=n}function Ote(t){WA(t,"emphasis",hF)}function Ite(t){t.hoverState===hF&&WA(t,"normal",Pte)}function dF(t){WA(t,"blur",fF)}function $te(t){t.hoverState===fF&&WA(t,"normal",Pte)}function Z3e(t){t.selected=!0}function Q3e(t){t.selected=!1}function Qz(t,e,n){e(t,n)}function Lf(t,e,n){Qz(t,e,n),t.isGroup&&t.traverse(function(r){Qz(r,e,n)})}function eIe(t,e,n,r){for(var i=t.style,o={},a=0;a<e.length;a++){var s=e[a],l=i[s];o[s]=l??(r&&r[s])}for(var a=0;a<t.animators.length;a++){var u=t.animators[a];u.__fromStateTransition&&u.__fromStateTransition.indexOf(n)<0&&u.targetName==="style"&&u.saveTo(o,e)}return o}function tIe(t,e,n,r){var i=n&&wr(n,"select")>=0,o=!1;if(t instanceof Lr){var a=Ete(t),s=i&&a.selectFill||a.normalFill,l=i&&a.selectStroke||a.normalStroke;if(Am(s)||Am(l)){r=r||{};var u=r.style||{};u.fill==="inherit"?(o=!0,r=ot({},r),u=ot({},u),u.fill=s):!Am(u.fill)&&Am(s)?(o=!0,r=ot({},r),u=ot({},u),u.fill=Zz(s)):!Am(u.stroke)&&Am(l)&&(o||(r=ot({},r),u=ot({},u)),u.stroke=Zz(l)),r.style=u}}if(r&&r.z2==null){o||(r=ot({},r));var c=t.z2EmphasisLift;r.z2=t.z2+(c??X3e)}return r}function nIe(t,e,n){if(n&&n.z2==null){n=ot({},n);var r=t.z2SelectLift;n.z2=t.z2+(r??J3e)}return n}function rIe(t,e,n){var r=wr(t.currentStates,e)>=0,i=t.style.opacity,o=r?null:eIe(t,["opacity"],e,{opacity:1});n=n||{};var a=n.style||{};return a.opacity==null&&(n=ot({},n),a=ot({opacity:r?i:o.opacity*.1},a),n.style=a),n}function F3(t,e){var n=this.states[t];if(this.style){if(t==="emphasis")return tIe(this,t,e,n);if(t==="blur")return rIe(this,t,n);if(t==="select")return nIe(this,t,n)}return n}function iIe(t){t.stateProxy=F3;var e=t.getTextContent(),n=t.getTextGuideLine();e&&(e.stateProxy=F3),n&&(n.stateProxy=F3)}function ej(t,e){!Nte(t,e)&&!t.__highByOuter&&Lf(t,Ote)}function tj(t,e){!Nte(t,e)&&!t.__highByOuter&&Lf(t,Ite)}function Vk(t,e){t.__highByOuter|=1<<(e||0),Lf(t,Ote)}function Bk(t,e){!(t.__highByOuter&=~(1<<(e||0)))&&Lf(t,Ite)}function oIe(t){Lf(t,dF)}function Lte(t){Lf(t,$te)}function Dte(t){Lf(t,Z3e)}function Mte(t){Lf(t,Q3e)}function Nte(t,e){return t.__highDownSilentOnTouch&&e.zrByTouch}function Fte(t){var e=t.getModel(),n=[],r=[];e.eachComponent(function(i,o){var a=cF(o),s=i==="series",l=s?t.getViewOfSeriesModel(o):t.getViewOfComponentModel(o);!s&&r.push(l),a.isBlured&&(l.group.traverse(function(u){$te(u)}),s&&n.push(o)),a.isBlured=!1}),be(r,function(i){i&&i.toggleBlurSeries&&i.toggleBlurSeries(n,!1,e)})}function _L(t,e,n,r){var i=r.getModel();n=n||"coordinateSystem";function o(u,c){for(var f=0;f<c.length;f++){var h=u.getItemGraphicEl(c[f]);h&&Lte(h)}}if(t!=null&&!(!e||e==="none")){var a=i.getSeriesByIndex(t),s=a.coordinateSystem;s&&s.master&&(s=s.master);var l=[];i.eachSeries(function(u){var c=a===u,f=u.coordinateSystem;f&&f.master&&(f=f.master);var h=f&&s?f===s:c;if(!(n==="series"&&!c||n==="coordinateSystem"&&!h||e==="series"&&c)){var d=r.getViewOfSeriesModel(u);if(d.group.traverse(function(_){_.__highByOuter&&c&&e==="self"||dF(_)}),fs(e))o(u.getData(),e);else if(Bt(e))for(var g=ir(e),y=0;y<g.length;y++)o(u.getData(g[y]),e[g[y]]);l.push(u),cF(u).isBlured=!0}}),i.eachComponent(function(u,c){if(u!=="series"){var f=r.getViewOfComponentModel(c);f&&f.toggleBlurSeries&&f.toggleBlurSeries(l,!0,i)}})}}function SL(t,e,n){if(!(t==null||e==null)){var r=n.getModel().getComponent(t,e);if(r){cF(r).isBlured=!0;var i=n.getViewOfComponentModel(r);!i||!i.focusBlurEnabled||i.group.traverse(function(o){dF(o)})}}}function aIe(t,e,n){var r=t.seriesIndex,i=t.getData(e.dataType);if(i){var o=cS(i,e);o=(mt(o)?o[0]:o)||0;var a=i.getItemGraphicEl(o);if(!a)for(var s=i.count(),l=0;!a&&l<s;)a=i.getItemGraphicEl(l++);if(a){var u=Br(a);_L(r,u.focus,u.blurScope,n)}else{var c=t.get(["emphasis","focus"]),f=t.get(["emphasis","blurScope"]);c!=null&&_L(r,c,f,n)}}}function pF(t,e,n,r){var i={focusSelf:!1,dispatchers:null};if(t==null||t==="series"||e==null||n==null)return i;var o=r.getModel().getComponent(t,e);if(!o)return i;var a=r.getViewOfComponentModel(o);if(!a||!a.findHighDownDispatchers)return i;for(var s=a.findHighDownDispatchers(n),l,u=0;u<s.length;u++)if(Br(s[u]).focus==="self"){l=!0;break}return{focusSelf:l,dispatchers:s}}function sIe(t,e,n){var r=Br(t),i=pF(r.componentMainType,r.componentIndex,r.componentHighDownName,n),o=i.dispatchers,a=i.focusSelf;o?(a&&SL(r.componentMainType,r.componentIndex,n),be(o,function(s){return ej(s,e)})):(_L(r.seriesIndex,r.focus,r.blurScope,n),r.focus==="self"&&SL(r.componentMainType,r.componentIndex,n),ej(t,e))}function lIe(t,e,n){Fte(n);var r=Br(t),i=pF(r.componentMainType,r.componentIndex,r.componentHighDownName,n).dispatchers;i?be(i,function(o){return tj(o,e)}):tj(t,e)}function uIe(t,e,n){if(kL(e)){var r=e.dataType,i=t.getData(r),o=cS(i,e);mt(o)||(o=[o]),t[e.type===r1?"toggleSelect":e.type===n1?"select":"unselect"](o,r)}}function nj(t){var e=t.getAllData();be(e,function(n){var r=n.data,i=n.type;r.eachItemGraphicEl(function(o,a){t.isSelected(a,i)?Dte(o):Mte(o)})})}function cIe(t){var e=[];return t.eachSeries(function(n){var r=n.getAllData();be(r,function(i){i.data;var o=i.type,a=n.getSelectedDataIndices();if(a.length>0){var s={dataIndex:a,seriesIndex:n.seriesIndex};o!=null&&(s.dataType=o),e.push(s)}})}),e}function wL(t,e,n){Rte(t,!0),Lf(t,iIe),hIe(t,e,n)}function fIe(t){Rte(t,!1)}function zk(t,e,n,r){r?fIe(t):wL(t,e,n)}function hIe(t,e,n){var r=Br(t);e!=null?(r.focus=e,r.blurScope=n):r.focus&&(r.focus=null)}var rj=["emphasis","blur","select"],dIe={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function xL(t,e,n,r){n=n||"itemStyle";for(var i=0;i<rj.length;i++){var o=rj[i],a=e.getModel([o,n]),s=t.ensureState(o);s.style=r?r(a):a[dIe[n]]()}}function Rte(t,e){var n=e===!1,r=t;t.highDownSilentOnTouch&&(r.__highDownSilentOnTouch=t.highDownSilentOnTouch),(!n||r.__highDownDispatcher)&&(r.__highByOuter=r.__highByOuter||0,r.__highDownDispatcher=!n)}function CL(t){return!!(t&&t.__highDownDispatcher)}function pIe(t){var e=Xz[t];return e==null&&Kz<=32&&(e=Xz[t]=Kz++),e}function kL(t){var e=t.type;return e===n1||e===y2||e===r1}function ij(t){var e=t.type;return e===sg||e===v2}function gIe(t){var e=Ete(t);e.normalFill=t.style.fill,e.normalStroke=t.style.stroke;var n=t.states.select||{};e.selectFill=n.style&&n.style.fill||null,e.selectStroke=n.style&&n.style.stroke||null}var Em=sd.CMD,mIe=[[],[],[]],oj=Math.sqrt,vIe=Math.atan2;function yIe(t,e){if(e){var n=t.data,r=t.len(),i,o,a,s,l,u,c=Em.M,f=Em.C,h=Em.L,d=Em.R,g=Em.A,y=Em.Q;for(a=0,s=0;a<r;){switch(i=n[a++],s=a,o=0,i){case c:o=1;break;case h:o=1;break;case f:o=3;break;case y:o=2;break;case g:var _=e[4],v=e[5],S=oj(e[0]*e[0]+e[1]*e[1]),C=oj(e[2]*e[2]+e[3]*e[3]),k=vIe(-e[1]/C,e[0]/S);n[a]*=S,n[a++]+=_,n[a]*=C,n[a++]+=v,n[a++]*=S,n[a++]*=C,n[a++]+=k,n[a++]+=k,a+=2,s=a;break;case d:u[0]=n[a++],u[1]=n[a++],fc(u,u,e),n[s++]=u[0],n[s++]=u[1],u[0]+=n[a++],u[1]+=n[a++],fc(u,u,e),n[s++]=u[0],n[s++]=u[1]}for(l=0;l<o;l++){var x=mIe[l];x[0]=n[a++],x[1]=n[a++],fc(x,x,e),n[s++]=x[0],n[s++]=x[1]}}t.increaseVersion()}}var R3=Math.sqrt,zx=Math.sin,jx=Math.cos,Hy=Math.PI;function aj(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function TL(t,e){return(t[0]*e[0]+t[1]*e[1])/(aj(t)*aj(e))}function sj(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(TL(t,e))}function lj(t,e,n,r,i,o,a,s,l,u,c){var f=l*(Hy/180),h=jx(f)*(t-n)/2+zx(f)*(e-r)/2,d=-1*zx(f)*(t-n)/2+jx(f)*(e-r)/2,g=h*h/(a*a)+d*d/(s*s);g>1&&(a*=R3(g),s*=R3(g));var y=(i===o?-1:1)*R3((a*a*(s*s)-a*a*(d*d)-s*s*(h*h))/(a*a*(d*d)+s*s*(h*h)))||0,_=y*a*d/s,v=y*-s*h/a,S=(t+n)/2+jx(f)*_-zx(f)*v,C=(e+r)/2+zx(f)*_+jx(f)*v,k=sj([1,0],[(h-_)/a,(d-v)/s]),x=[(h-_)/a,(d-v)/s],m=[(-1*h-_)/a,(-1*d-v)/s],T=sj(x,m);if(TL(x,m)<=-1&&(T=Hy),TL(x,m)>=1&&(T=0),T<0){var P=Math.round(T/Hy*1e6)/1e6;T=Hy*2+P%2*Hy}c.addData(u,S,C,a,s,k,T,f,o)}var bIe=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,_Ie=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function SIe(t){var e=new sd;if(!t)return e;var n=0,r=0,i=n,o=r,a,s=sd.CMD,l=t.match(bIe);if(!l)return e;for(var u=0;u<l.length;u++){for(var c=l[u],f=c.charAt(0),h=void 0,d=c.match(_Ie)||[],g=d.length,y=0;y<g;y++)d[y]=parseFloat(d[y]);for(var _=0;_<g;){var v=void 0,S=void 0,C=void 0,k=void 0,x=void 0,m=void 0,T=void 0,P=n,I=r,M=void 0,L=void 0;switch(f){case"l":n+=d[_++],r+=d[_++],h=s.L,e.addData(h,n,r);break;case"L":n=d[_++],r=d[_++],h=s.L,e.addData(h,n,r);break;case"m":n+=d[_++],r+=d[_++],h=s.M,e.addData(h,n,r),i=n,o=r,f="l";break;case"M":n=d[_++],r=d[_++],h=s.M,e.addData(h,n,r),i=n,o=r,f="L";break;case"h":n+=d[_++],h=s.L,e.addData(h,n,r);break;case"H":n=d[_++],h=s.L,e.addData(h,n,r);break;case"v":r+=d[_++],h=s.L,e.addData(h,n,r);break;case"V":r=d[_++],h=s.L,e.addData(h,n,r);break;case"C":h=s.C,e.addData(h,d[_++],d[_++],d[_++],d[_++],d[_++],d[_++]),n=d[_-2],r=d[_-1];break;case"c":h=s.C,e.addData(h,d[_++]+n,d[_++]+r,d[_++]+n,d[_++]+r,d[_++]+n,d[_++]+r),n+=d[_-2],r+=d[_-1];break;case"S":v=n,S=r,M=e.len(),L=e.data,a===s.C&&(v+=n-L[M-4],S+=r-L[M-3]),h=s.C,P=d[_++],I=d[_++],n=d[_++],r=d[_++],e.addData(h,v,S,P,I,n,r);break;case"s":v=n,S=r,M=e.len(),L=e.data,a===s.C&&(v+=n-L[M-4],S+=r-L[M-3]),h=s.C,P=n+d[_++],I=r+d[_++],n+=d[_++],r+=d[_++],e.addData(h,v,S,P,I,n,r);break;case"Q":P=d[_++],I=d[_++],n=d[_++],r=d[_++],h=s.Q,e.addData(h,P,I,n,r);break;case"q":P=d[_++]+n,I=d[_++]+r,n+=d[_++],r+=d[_++],h=s.Q,e.addData(h,P,I,n,r);break;case"T":v=n,S=r,M=e.len(),L=e.data,a===s.Q&&(v+=n-L[M-4],S+=r-L[M-3]),n=d[_++],r=d[_++],h=s.Q,e.addData(h,v,S,n,r);break;case"t":v=n,S=r,M=e.len(),L=e.data,a===s.Q&&(v+=n-L[M-4],S+=r-L[M-3]),n+=d[_++],r+=d[_++],h=s.Q,e.addData(h,v,S,n,r);break;case"A":C=d[_++],k=d[_++],x=d[_++],m=d[_++],T=d[_++],P=n,I=r,n=d[_++],r=d[_++],h=s.A,lj(P,I,n,r,m,T,C,k,x,h,e);break;case"a":C=d[_++],k=d[_++],x=d[_++],m=d[_++],T=d[_++],P=n,I=r,n+=d[_++],r+=d[_++],h=s.A,lj(P,I,n,r,m,T,C,k,x,h,e);break}}(f==="z"||f==="Z")&&(h=s.Z,e.addData(h),n=i,r=o),a=h}return e.toStatic(),e}var Vte=function(t){kr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.applyTransform=function(n){},e}(Lr);function Bte(t){return t.setData!=null}function zte(t,e){var n=SIe(t),r=ot({},e);return r.buildPath=function(i){if(Bte(i)){i.setData(n.data);var o=i.getContext();o&&i.rebuildPath(o,1)}else{var o=i;n.rebuildPath(o,1)}},r.applyTransform=function(i){yIe(n,i),this.dirtyShape()},r}function wIe(t,e){return new Vte(zte(t,e))}function xIe(t,e){var n=zte(t,e),r=function(i){kr(o,i);function o(a){var s=i.call(this,a)||this;return s.applyTransform=n.applyTransform,s.buildPath=n.buildPath,s}return o}(Vte);return r}function CIe(t,e){for(var n=[],r=t.length,i=0;i<r;i++){var o=t[i];n.push(o.getUpdatedPathProxy(!0))}var a=new Lr(e);return a.createPathProxy(),a.buildPath=function(s){if(Bte(s)){s.appendPath(n);var l=s.getContext();l&&s.rebuildPath(l,1)}},a}var kIe=function(){function t(){this.cx=0,this.cy=0,this.r=0}return t}(),jte=function(t){kr(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultShape=function(){return new kIe},e.prototype.buildPath=function(n,r){n.moveTo(r.cx+r.r,r.cy),n.arc(r.cx,r.cy,r.r,0,Math.PI*2)},e}(Lr);jte.prototype.type="circle";const gF=jte;var TIe=function(){function t(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return t}(),Ute=function(t){kr(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultShape=function(){return new TIe},e.prototype.buildPath=function(n,r){var i=.5522848,o=r.cx,a=r.cy,s=r.rx,l=r.ry,u=s*i,c=l*i;n.moveTo(o-s,a),n.bezierCurveTo(o-s,a-c,o-u,a-l,o,a-l),n.bezierCurveTo(o+u,a-l,o+s,a-c,o+s,a),n.bezierCurveTo(o+s,a+c,o+u,a+l,o,a+l),n.bezierCurveTo(o-u,a+l,o-s,a+c,o-s,a),n.closePath()},e}(Lr);Ute.prototype.type="ellipse";const Wte=Ute;var Hte=Math.PI,V3=Hte*2,up=Math.sin,Pm=Math.cos,AIe=Math.acos,Ro=Math.atan2,uj=Math.abs,i1=Math.sqrt,Ob=Math.max,ju=Math.min,Jl=1e-4;function EIe(t,e,n,r,i,o,a,s){var l=n-t,u=r-e,c=a-i,f=s-o,h=f*l-c*u;if(!(h*h<Jl))return h=(c*(e-o)-f*(t-i))/h,[t+h*l,e+h*u]}function Ux(t,e,n,r,i,o,a){var s=t-n,l=e-r,u=(a?o:-o)/i1(s*s+l*l),c=u*l,f=-u*s,h=t+c,d=e+f,g=n+c,y=r+f,_=(h+g)/2,v=(d+y)/2,S=g-h,C=y-d,k=S*S+C*C,x=i-o,m=h*y-g*d,T=(C<0?-1:1)*i1(Ob(0,x*x*k-m*m)),P=(m*C-S*T)/k,I=(-m*S-C*T)/k,M=(m*C+S*T)/k,L=(-m*S+C*T)/k,R=P-_,V=I-v,z=M-_,ie=L-v;return R*R+V*V>z*z+ie*ie&&(P=M,I=L),{cx:P,cy:I,x0:-c,y0:-f,x1:P*(i/x-1),y1:I*(i/x-1)}}function PIe(t){var e;if(mt(t)){var n=t.length;if(!n)return t;n===1?e=[t[0],t[0],0,0]:n===2?e=[t[0],t[0],t[1],t[1]]:n===3?e=t.concat(t[2]):e=t}else e=[t,t,t,t];return e}function OIe(t,e){var n,r=Ob(e.r,0),i=Ob(e.r0||0,0),o=r>0,a=i>0;if(!(!o&&!a)){if(o||(r=i,i=0),i>r){var s=r;r=i,i=s}var l=e.startAngle,u=e.endAngle;if(!(isNaN(l)||isNaN(u))){var c=e.cx,f=e.cy,h=!!e.clockwise,d=uj(u-l),g=d>V3&&d%V3;if(g>Jl&&(d=g),!(r>Jl))t.moveTo(c,f);else if(d>V3-Jl)t.moveTo(c+r*Pm(l),f+r*up(l)),t.arc(c,f,r,l,u,!h),i>Jl&&(t.moveTo(c+i*Pm(u),f+i*up(u)),t.arc(c,f,i,u,l,h));else{var y=void 0,_=void 0,v=void 0,S=void 0,C=void 0,k=void 0,x=void 0,m=void 0,T=void 0,P=void 0,I=void 0,M=void 0,L=void 0,R=void 0,V=void 0,z=void 0,ie=r*Pm(l),oe=r*up(l),Se=i*Pm(u),Ae=i*up(u),Ee=d>Jl;if(Ee){var _e=e.cornerRadius;_e&&(n=PIe(_e),y=n[0],_=n[1],v=n[2],S=n[3]);var se=uj(r-i)/2;if(C=ju(se,v),k=ju(se,S),x=ju(se,y),m=ju(se,_),I=T=Ob(C,k),M=P=Ob(x,m),(T>Jl||P>Jl)&&(L=r*Pm(u),R=r*up(u),V=i*Pm(l),z=i*up(l),d<Hte)){var ne=EIe(ie,oe,V,z,L,R,Se,Ae);if(ne){var J=ie-ne[0],B=oe-ne[1],H=L-ne[0],ae=R-ne[1],te=1/up(AIe((J*H+B*ae)/(i1(J*J+B*B)*i1(H*H+ae*ae)))/2),ce=i1(ne[0]*ne[0]+ne[1]*ne[1]);I=ju(T,(r-ce)/(te+1)),M=ju(P,(i-ce)/(te-1))}}}if(!Ee)t.moveTo(c+ie,f+oe);else if(I>Jl){var ue=ju(v,I),fe=ju(S,I),ye=Ux(V,z,ie,oe,r,ue,h),j=Ux(L,R,Se,Ae,r,fe,h);t.moveTo(c+ye.cx+ye.x0,f+ye.cy+ye.y0),I<T&&ue===fe?t.arc(c+ye.cx,f+ye.cy,I,Ro(ye.y0,ye.x0),Ro(j.y0,j.x0),!h):(ue>0&&t.arc(c+ye.cx,f+ye.cy,ue,Ro(ye.y0,ye.x0),Ro(ye.y1,ye.x1),!h),t.arc(c,f,r,Ro(ye.cy+ye.y1,ye.cx+ye.x1),Ro(j.cy+j.y1,j.cx+j.x1),!h),fe>0&&t.arc(c+j.cx,f+j.cy,fe,Ro(j.y1,j.x1),Ro(j.y0,j.x0),!h))}else t.moveTo(c+ie,f+oe),t.arc(c,f,r,l,u,!h);if(!(i>Jl)||!Ee)t.lineTo(c+Se,f+Ae);else if(M>Jl){var ue=ju(y,M),fe=ju(_,M),ye=Ux(Se,Ae,L,R,i,-fe,h),j=Ux(ie,oe,V,z,i,-ue,h);t.lineTo(c+ye.cx+ye.x0,f+ye.cy+ye.y0),M<P&&ue===fe?t.arc(c+ye.cx,f+ye.cy,M,Ro(ye.y0,ye.x0),Ro(j.y0,j.x0),!h):(fe>0&&t.arc(c+ye.cx,f+ye.cy,fe,Ro(ye.y0,ye.x0),Ro(ye.y1,ye.x1),!h),t.arc(c,f,i,Ro(ye.cy+ye.y1,ye.cx+ye.x1),Ro(j.cy+j.y1,j.cx+j.x1),h),ue>0&&t.arc(c+j.cx,f+j.cy,ue,Ro(j.y1,j.x1),Ro(j.y0,j.x0),!h))}else t.lineTo(c+Se,f+Ae),t.arc(c,f,i,u,l,h)}t.closePath()}}}var IIe=function(){function t(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return t}(),Gte=function(t){kr(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultShape=function(){return new IIe},e.prototype.buildPath=function(n,r){OIe(n,r)},e.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},e}(Lr);Gte.prototype.type="sector";const dS=Gte;var $Ie=function(){function t(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return t}(),qte=function(t){kr(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultShape=function(){return new $Ie},e.prototype.buildPath=function(n,r){var i=r.cx,o=r.cy,a=Math.PI*2;n.moveTo(i+r.r,o),n.arc(i,o,r.r,0,a,!1),n.moveTo(i+r.r0,o),n.arc(i,o,r.r0,0,a,!0)},e}(Lr);qte.prototype.type="ring";const Yte=qte;function LIe(t,e,n,r){var i=[],o=[],a=[],s=[],l,u,c,f;if(r){c=[1/0,1/0],f=[-1/0,-1/0];for(var h=0,d=t.length;h<d;h++)uv(c,c,t[h]),cv(f,f,t[h]);uv(c,c,r[0]),cv(f,f,r[1])}for(var h=0,d=t.length;h<d;h++){var g=t[h];if(n)l=t[h?h-1:d-1],u=t[(h+1)%d];else if(h===0||h===d-1){i.push(ZEe(t[h]));continue}else l=t[h-1],u=t[h+1];QEe(o,u,l),e3(o,o,e);var y=J$(g,l),_=J$(g,u),v=y+_;v!==0&&(y/=v,_/=v),e3(a,o,-y),e3(s,o,_);var S=rz([],g,a),C=rz([],g,s);r&&(cv(S,S,c),uv(S,S,f),cv(C,C,c),uv(C,C,f)),i.push(S),i.push(C)}return n&&i.push(i.shift()),i}function Kte(t,e,n){var r=e.smooth,i=e.points;if(i&&i.length>=2){if(r){var o=LIe(i,r,n,e.smoothConstraint);t.moveTo(i[0][0],i[0][1]);for(var a=i.length,s=0;s<(n?a:a-1);s++){var l=o[s*2],u=o[s*2+1],c=i[(s+1)%a];t.bezierCurveTo(l[0],l[1],u[0],u[1],c[0],c[1])}}else{t.moveTo(i[0][0],i[0][1]);for(var s=1,f=i.length;s<f;s++)t.lineTo(i[s][0],i[s][1])}n&&t.closePath()}}var DIe=function(){function t(){this.points=null,this.smooth=0,this.smoothConstraint=null}return t}(),Xte=function(t){kr(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultShape=function(){return new DIe},e.prototype.buildPath=function(n,r){Kte(n,r,!0)},e}(Lr);Xte.prototype.type="polygon";const Jte=Xte;var MIe=function(){function t(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return t}(),Zte=function(t){kr(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new MIe},e.prototype.buildPath=function(n,r){Kte(n,r,!1)},e}(Lr);Zte.prototype.type="polyline";const HA=Zte;var NIe={},FIe=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return t}(),Qte=function(t){kr(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new FIe},e.prototype.buildPath=function(n,r){var i,o,a,s;if(this.subPixelOptimize){var l=wte(NIe,r,this.style);i=l.x1,o=l.y1,a=l.x2,s=l.y2}else i=r.x1,o=r.y1,a=r.x2,s=r.y2;var u=r.percent;u!==0&&(n.moveTo(i,o),u<1&&(a=i*(1-u)+a*u,s=o*(1-u)+s*u),n.lineTo(a,s))},e.prototype.pointAt=function(n){var r=this.shape;return[r.x1*(1-n)+r.x2*n,r.y1*(1-n)+r.y2*n]},e}(Lr);Qte.prototype.type="line";const pS=Qte;var ja=[],RIe=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return t}();function cj(t,e,n){var r=t.cpx2,i=t.cpy2;return r!=null||i!=null?[(n?pz:So)(t.x1,t.cpx1,t.cpx2,t.x2,e),(n?pz:So)(t.y1,t.cpy1,t.cpy2,t.y2,e)]:[(n?gz:Uo)(t.x1,t.cpx1,t.x2,e),(n?gz:Uo)(t.y1,t.cpy1,t.y2,e)]}var ene=function(t){kr(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new RIe},e.prototype.buildPath=function(n,r){var i=r.x1,o=r.y1,a=r.x2,s=r.y2,l=r.cpx1,u=r.cpy1,c=r.cpx2,f=r.cpy2,h=r.percent;h!==0&&(n.moveTo(i,o),c==null||f==null?(h<1&&(Ok(i,l,a,h,ja),l=ja[1],a=ja[2],Ok(o,u,s,h,ja),u=ja[1],s=ja[2]),n.quadraticCurveTo(l,u,a,s)):(h<1&&(Pk(i,l,c,a,h,ja),l=ja[1],c=ja[2],a=ja[3],Pk(o,u,f,s,h,ja),u=ja[1],f=ja[2],s=ja[3]),n.bezierCurveTo(l,u,c,f,a,s)))},e.prototype.pointAt=function(n){return cj(this.shape,n,!1)},e.prototype.tangentAt=function(n){var r=cj(this.shape,n,!0);return nPe(r,r)},e}(Lr);ene.prototype.type="bezier-curve";const tne=ene;var VIe=function(){function t(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return t}(),nne=function(t){kr(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new VIe},e.prototype.buildPath=function(n,r){var i=r.cx,o=r.cy,a=Math.max(r.r,0),s=r.startAngle,l=r.endAngle,u=r.clockwise,c=Math.cos(s),f=Math.sin(s);n.moveTo(c*a+i,f*a+o),n.arc(i,o,a,s,l,!u)},e}(Lr);nne.prototype.type="arc";const mF=nne;var BIe=function(t){kr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="compound",n}return e.prototype._updatePathDirty=function(){for(var n=this.shape.paths,r=this.shapeChanged(),i=0;i<n.length;i++)r=r||n[i].shapeChanged();r&&this.dirtyShape()},e.prototype.beforeBrush=function(){this._updatePathDirty();for(var n=this.shape.paths||[],r=this.getGlobalScale(),i=0;i<n.length;i++)n[i].path||n[i].createPathProxy(),n[i].path.setScale(r[0],r[1],n[i].segmentIgnoreThreshold)},e.prototype.buildPath=function(n,r){for(var i=r.paths||[],o=0;o<i.length;o++)i[o].buildPath(n,i[o].shape,!0)},e.prototype.afterBrush=function(){for(var n=this.shape.paths||[],r=0;r<n.length;r++)n[r].pathUpdated()},e.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Lr.prototype.getBoundingRect.call(this)},e}(Lr);const rne=BIe;var zIe=function(){function t(e){this.colorStops=e||[]}return t.prototype.addColorStop=function(e,n){this.colorStops.push({offset:e,color:n})},t}();const ine=zIe;var jIe=function(t){kr(e,t);function e(n,r,i,o,a,s){var l=t.call(this,a)||this;return l.x=n??0,l.y=r??0,l.x2=i??1,l.y2=o??0,l.type="linear",l.global=s||!1,l}return e}(ine);const one=jIe;var UIe=function(t){kr(e,t);function e(n,r,i,o,a){var s=t.call(this,o)||this;return s.x=n??.5,s.y=r??.5,s.r=i??.5,s.type="radial",s.global=a||!1,s}return e}(ine);const WIe=UIe;var cp=[0,0],fp=[0,0],Wx=new ln,Hx=new ln,HIe=function(){function t(e,n){this._corners=[],this._axes=[],this._origin=[0,0];for(var r=0;r<4;r++)this._corners[r]=new ln;for(var r=0;r<2;r++)this._axes[r]=new ln;e&&this.fromBoundingRect(e,n)}return t.prototype.fromBoundingRect=function(e,n){var r=this._corners,i=this._axes,o=e.x,a=e.y,s=o+e.width,l=a+e.height;if(r[0].set(o,a),r[1].set(s,a),r[2].set(s,l),r[3].set(o,l),n)for(var u=0;u<4;u++)r[u].transform(n);ln.sub(i[0],r[1],r[0]),ln.sub(i[1],r[3],r[0]),i[0].normalize(),i[1].normalize();for(var u=0;u<2;u++)this._origin[u]=i[u].dot(r[0])},t.prototype.intersect=function(e,n){var r=!0,i=!n;return Wx.set(1/0,1/0),Hx.set(0,0),!this._intersectCheckOneSide(this,e,Wx,Hx,i,1)&&(r=!1,i)||!this._intersectCheckOneSide(e,this,Wx,Hx,i,-1)&&(r=!1,i)||i||ln.copy(n,r?Wx:Hx),r},t.prototype._intersectCheckOneSide=function(e,n,r,i,o,a){for(var s=!0,l=0;l<2;l++){var u=this._axes[l];if(this._getProjMinMaxOnAxis(l,e._corners,cp),this._getProjMinMaxOnAxis(l,n._corners,fp),cp[1]<fp[0]||cp[0]>fp[1]){if(s=!1,o)return s;var c=Math.abs(fp[0]-cp[1]),f=Math.abs(cp[0]-fp[1]);Math.min(c,f)>i.len()&&(c<f?ln.scale(i,u,-c*a):ln.scale(i,u,f*a))}else if(r){var c=Math.abs(fp[0]-cp[1]),f=Math.abs(cp[0]-fp[1]);Math.min(c,f)<r.len()&&(c<f?ln.scale(r,u,c*a):ln.scale(r,u,-f*a))}}return s},t.prototype._getProjMinMaxOnAxis=function(e,n,r){for(var i=this._axes[e],o=this._origin,a=n[0].dot(i)+o[e],s=a,l=a,u=1;u<n.length;u++){var c=n[u].dot(i)+o[e];s=Math.min(c,s),l=Math.max(c,l)}r[0]=s,r[1]=l},t}();const jk=HIe;var GIe=[],qIe=function(t){kr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.notClear=!0,n.incremental=!0,n._displayables=[],n._temporaryDisplayables=[],n._cursor=0,n}return e.prototype.traverse=function(n,r){n.call(r,this)},e.prototype.useStyle=function(){this.style={}},e.prototype.getCursor=function(){return this._cursor},e.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},e.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},e.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},e.prototype.addDisplayable=function(n,r){r?this._temporaryDisplayables.push(n):this._displayables.push(n),this.markRedraw()},e.prototype.addDisplayables=function(n,r){r=r||!1;for(var i=0;i<n.length;i++)this.addDisplayable(n[i],r)},e.prototype.getDisplayables=function(){return this._displayables},e.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},e.prototype.eachPendingDisplayable=function(n){for(var r=this._cursor;r<this._displayables.length;r++)n&&n(this._displayables[r]);for(var r=0;r<this._temporaryDisplayables.length;r++)n&&n(this._temporaryDisplayables[r])},e.prototype.update=function(){this.updateTransform();for(var n=this._cursor;n<this._displayables.length;n++){var r=this._displayables[n];r.parent=this,r.update(),r.parent=null}for(var n=0;n<this._temporaryDisplayables.length;n++){var r=this._temporaryDisplayables[n];r.parent=this,r.update(),r.parent=null}},e.prototype.getBoundingRect=function(){if(!this._rect){for(var n=new Ir(1/0,1/0,-1/0,-1/0),r=0;r<this._displayables.length;r++){var i=this._displayables[r],o=i.getBoundingRect().clone();i.needLocalTransform()&&o.applyTransform(i.getLocalTransform(GIe)),n.union(o)}this._rect=n}return this._rect},e.prototype.contain=function(n,r){var i=this.transformCoordToLocal(n,r),o=this.getBoundingRect();if(o.contain(i[0],i[1]))for(var a=0;a<this._displayables.length;a++){var s=this._displayables[a];if(s.contain(n,r))return!0}return!1},e}(hS);const YIe=qIe;var KIe=no();function XIe(t,e,n,r,i){var o;if(e&&e.ecModel){var a=e.ecModel.getUpdatePayload();o=a&&a.animation}var s=e&&e.isAnimationEnabled(),l=t==="update";if(s){var u=void 0,c=void 0,f=void 0;r?(u=gn(r.duration,200),c=gn(r.easing,"cubicOut"),f=0):(u=e.getShallow(l?"animationDurationUpdate":"animationDuration"),c=e.getShallow(l?"animationEasingUpdate":"animationEasing"),f=e.getShallow(l?"animationDelayUpdate":"animationDelay")),o&&(o.duration!=null&&(u=o.duration),o.easing!=null&&(c=o.easing),o.delay!=null&&(f=o.delay)),Qn(f)&&(f=f(n,i)),Qn(u)&&(u=u(n));var h={duration:u||0,delay:f,easing:c};return h}else return null}function vF(t,e,n,r,i,o,a){var s=!1,l;Qn(i)?(a=o,o=i,i=null):Bt(i)&&(o=i.cb,a=i.during,s=i.isFrom,l=i.removeOpt,i=i.dataIndex);var u=t==="leave";u||e.stopAnimation("leave");var c=XIe(t,r,i,u?l||{}:null,r&&r.getAnimationDelayParams?r.getAnimationDelayParams(e,i):null);if(c&&c.duration>0){var f=c.duration,h=c.delay,d=c.easing,g={duration:f,delay:h||0,easing:d,done:o,force:!!o||!!a,setToFinal:!u,scope:t,during:a};s?e.animateFrom(n,g):e.animateTo(n,g)}else e.stopAnimation(),!s&&e.attr(n),a&&a(1),o&&o()}function Cg(t,e,n,r,i,o){vF("update",t,e,n,r,i,o)}function Nv(t,e,n,r,i,o){vF("enter",t,e,n,r,i,o)}function o1(t){if(!t.__zr)return!0;for(var e=0;e<t.animators.length;e++){var n=t.animators[e];if(n.scope==="leave")return!0}return!1}function ane(t,e,n,r,i,o){o1(t)||vF("leave",t,e,n,r,i,o)}function fj(t,e,n,r){t.removeTextContent(),t.removeTextGuideLine(),ane(t,{style:{opacity:0}},e,n,r)}function sne(t,e,n){function r(){t.parent&&t.parent.remove(t)}t.isGroup?t.traverse(function(i){i.isGroup||fj(i,e,n,r)}):fj(t,e,n,r)}function lne(t){KIe(t).oldStyle=t.style}var Uk=Math.max,Wk=Math.min,AL={};function JIe(t){return Lr.extend(t)}var ZIe=xIe;function QIe(t,e){return ZIe(t,e)}function xu(t,e){AL[t]=e}function e4e(t){if(AL.hasOwnProperty(t))return AL[t]}function yF(t,e,n,r){var i=wIe(t,e);return n&&(r==="center"&&(n=cne(n,i.getBoundingRect())),fne(i,n)),i}function une(t,e,n){var r=new gd({style:{image:t,x:e.x,y:e.y,width:e.width,height:e.height},onload:function(i){if(n==="center"){var o={width:i.width,height:i.height};r.setStyle(cne(e,o))}}});return r}function cne(t,e){var n=e.width/e.height,r=t.height*n,i;r<=t.width?i=t.height:(r=t.width,i=r/n);var o=t.x+t.width/2,a=t.y+t.height/2;return{x:o-r/2,y:a-i/2,width:r,height:i}}var t4e=CIe;function fne(t,e){if(t.applyTransform){var n=t.getBoundingRect(),r=n.calculateTransform(e);t.applyTransform(r)}}function bF(t,e){return wte(t,t,{lineWidth:e}),t}function n4e(t){return xte(t.shape,t.shape,t.style),t}var r4e=qp;function i4e(t,e){for(var n=ZN([]);t&&t!==e;)Dv(n,t.getLocalTransform(),n),t=t.parent;return n}function _F(t,e,n){return e&&!fs(e)&&(e=rF.getLocalTransform(e)),n&&(e=Iee([],e)),fc([],t,e)}function o4e(t,e,n){var r=e[4]===0||e[5]===0||e[0]===0?1:Math.abs(2*e[4]/e[0]),i=e[4]===0||e[5]===0||e[2]===0?1:Math.abs(2*e[4]/e[2]),o=[t==="left"?-r:t==="right"?r:0,t==="top"?-i:t==="bottom"?i:0];return o=_F(o,e,n),Math.abs(o[0])>Math.abs(o[1])?o[0]>0?"right":"left":o[1]>0?"bottom":"top"}function hj(t){return!t.isGroup}function a4e(t){return t.shape!=null}function s4e(t,e,n){if(!t||!e)return;function r(a){var s={};return a.traverse(function(l){hj(l)&&l.anid&&(s[l.anid]=l)}),s}function i(a){var s={x:a.x,y:a.y,rotation:a.rotation};return a4e(a)&&(s.shape=ot({},a.shape)),s}var o=r(t);e.traverse(function(a){if(hj(a)&&a.anid){var s=o[a.anid];if(s){var l=i(a);a.attr(i(s)),Cg(a,l,n,Br(a).dataIndex)}}})}function l4e(t,e){return Qt(t,function(n){var r=n[0];r=Uk(r,e.x),r=Wk(r,e.x+e.width);var i=n[1];return i=Uk(i,e.y),i=Wk(i,e.y+e.height),[r,i]})}function u4e(t,e){var n=Uk(t.x,e.x),r=Wk(t.x+t.width,e.x+e.width),i=Uk(t.y,e.y),o=Wk(t.y+t.height,e.y+e.height);if(r>=n&&o>=i)return{x:n,y:i,width:r-n,height:o-i}}function SF(t,e,n){var r=ot({rectHover:!0},e),i=r.style={strokeNoScale:!0};if(n=n||{x:-1,y:-1,width:2,height:2},t)return t.indexOf("image://")===0?(i.image=t.slice(8),pi(i,n),new gd(r)):yF(t.replace("path://",""),r,n,"center")}function c4e(t,e,n,r,i){for(var o=0,a=i[i.length-1];o<i.length;o++){var s=i[o];if(hne(t,e,n,r,s[0],s[1],a[0],a[1]))return!0;a=s}}function hne(t,e,n,r,i,o,a,s){var l=n-t,u=r-e,c=a-i,f=s-o,h=B3(c,f,l,u);if(f4e(h))return!1;var d=t-i,g=e-o,y=B3(d,g,l,u)/h;if(y<0||y>1)return!1;var _=B3(d,g,c,f)/h;return!(_<0||_>1)}function B3(t,e,n,r){return t*r-n*e}function f4e(t){return t<=1e-6&&t>=-1e-6}function wF(t){var e=t.itemTooltipOption,n=t.componentModel,r=t.itemName,i=Pt(e)?{formatter:e}:e,o=n.mainType,a=n.componentIndex,s={componentType:o,name:r,$vars:["name"]};s[o+"Index"]=a;var l=t.formatterParamsExtra;l&&be(ir(l),function(c){s0(s,c)||(s[c]=l[c],s.$vars.push(c))});var u=Br(t.el);u.componentMainType=o,u.componentIndex=a,u.tooltipConfig={name:r,option:pi({content:r,formatterParams:s},i)}}function dj(t,e){var n;t.isGroup&&(n=e(t)),n||t.traverse(e)}function dne(t,e){if(t)if(mt(t))for(var n=0;n<t.length;n++)dj(t[n],e);else dj(t,e)}xu("circle",gF);xu("ellipse",Wte);xu("sector",dS);xu("ring",Yte);xu("polygon",Jte);xu("polyline",HA);xu("rect",Qo);xu("line",pS);xu("bezierCurve",tne);xu("arc",mF);const h4e=Object.freeze(Object.defineProperty({__proto__:null,Arc:mF,BezierCurve:tne,BoundingRect:Ir,Circle:gF,CompoundPath:rne,Ellipse:Wte,Group:bc,Image:gd,IncrementalDisplayable:YIe,Line:pS,LinearGradient:one,OrientedBoundingRect:jk,Path:Lr,Point:ln,Polygon:Jte,Polyline:HA,RadialGradient:WIe,Rect:Qo,Ring:Yte,Sector:dS,Text:ea,applyTransform:_F,clipPointsByRect:l4e,clipRectByRect:u4e,createIcon:SF,extendPath:QIe,extendShape:JIe,getShapeClass:e4e,getTransform:i4e,groupTransition:s4e,initProps:Nv,isElementRemoved:o1,lineLineIntersect:hne,linePolygonIntersect:c4e,makeImage:une,makePath:yF,mergePath:t4e,registerShape:xu,removeElement:ane,removeElementWithFadeOut:sne,resizePath:fne,setTooltipConfig:wF,subPixelOptimize:r4e,subPixelOptimizeLine:bF,subPixelOptimizeRect:n4e,transformDirection:o4e,traverseElements:dne,updateProps:Cg},Symbol.toStringTag,{value:"Module"}));var GA={};function d4e(t,e){for(var n=0;n<pu.length;n++){var r=pu[n],i=e[r],o=t.ensureState(r);o.style=o.style||{},o.style.text=i}var a=t.currentStates.slice();t.clearStates(!0),t.setStyle({text:e.normal}),t.useStates(a,!0)}function pj(t,e,n){var r=t.labelFetcher,i=t.labelDataIndex,o=t.labelDimIndex,a=e.normal,s;r&&(s=r.getFormattedLabel(i,"normal",null,o,a&&a.get("formatter"),n!=null?{interpolatedValue:n}:null)),s==null&&(s=Qn(t.defaultText)?t.defaultText(i,t,n):t.defaultText);for(var l={normal:s},u=0;u<pu.length;u++){var c=pu[u],f=e[c];l[c]=gn(r?r.getFormattedLabel(i,c,null,o,f&&f.get("formatter")):null,s)}return l}function Hk(t,e,n,r){n=n||GA;for(var i=t instanceof ea,o=!1,a=0;a<e_.length;a++){var s=e[e_[a]];if(s&&s.getShallow("show")){o=!0;break}}var l=i?t:t.getTextContent();if(o){i||(l||(l=new ea,t.setTextContent(l)),t.stateProxy&&(l.stateProxy=t.stateProxy));var u=pj(n,e),c=e.normal,f=!!c.getShallow("show"),h=kf(c,r&&r.normal,n,!1,!i);h.text=u.normal,i||t.setTextConfig(gj(c,n,!1));for(var a=0;a<pu.length;a++){var d=pu[a],s=e[d];if(s){var g=l.ensureState(d),y=!!gn(s.getShallow("show"),f);if(y!==f&&(g.ignore=!y),g.style=kf(s,r&&r[d],n,!0,!i),g.style.text=u[d],!i){var _=t.ensureState(d);_.textConfig=gj(s,n,!0)}}}l.silent=!!c.getShallow("silent"),l.style.x!=null&&(h.x=l.style.x),l.style.y!=null&&(h.y=l.style.y),l.ignore=!f,l.useStyle(h),l.dirty(),n.enableTextSetter&&(v4e(l).setLabelText=function(v){var S=pj(n,e,v);d4e(l,S)})}else l&&(l.ignore=!0);t.dirty()}function EL(t,e){e=e||"label";for(var n={normal:t.getModel(e)},r=0;r<pu.length;r++){var i=pu[r];n[i]=t.getModel([i,e])}return n}function kf(t,e,n,r,i){var o={};return p4e(o,t,n,r,i),e&&ot(o,e),o}function gj(t,e,n){e=e||{};var r={},i,o=t.getShallow("rotate"),a=gn(t.getShallow("distance"),n?null:5),s=t.getShallow("offset");return i=t.getShallow("position")||(n?null:"inside"),i==="outside"&&(i=e.defaultOutsidePosition||"top"),i!=null&&(r.position=i),s!=null&&(r.offset=s),o!=null&&(o*=Math.PI/180,r.rotation=o),a!=null&&(r.distance=a),r.outsideFill=t.get("color")==="inherit"?e.inheritColor||null:"auto",r}function p4e(t,e,n,r,i){n=n||GA;var o=e.ecModel,a=o&&o.option.textStyle,s=g4e(e),l;if(s){l={};for(var u in s)if(s.hasOwnProperty(u)){var c=e.getModel(["rich",u]);bj(l[u]={},c,a,n,r,i,!1,!0)}}l&&(t.rich=l);var f=e.get("overflow");f&&(t.overflow=f);var h=e.get("minMargin");h!=null&&(t.margin=h),bj(t,e,a,n,r,i,!0,!1)}function g4e(t){for(var e;t&&t!==t.ecModel;){var n=(t.option||GA).rich;if(n){e=e||{};for(var r=ir(n),i=0;i<r.length;i++){var o=r[i];e[o]=1}}t=t.parentModel}return e}var mj=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],vj=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],yj=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function bj(t,e,n,r,i,o,a,s){n=!i&&n||GA;var l=r&&r.inheritColor,u=e.getShallow("color"),c=e.getShallow("textBorderColor"),f=gn(e.getShallow("opacity"),n.opacity);(u==="inherit"||u==="auto")&&(l?u=l:u=null),(c==="inherit"||c==="auto")&&(l?c=l:c=null),o||(u=u||n.color,c=c||n.textBorderColor),u!=null&&(t.fill=u),c!=null&&(t.stroke=c);var h=gn(e.getShallow("textBorderWidth"),n.textBorderWidth);h!=null&&(t.lineWidth=h);var d=gn(e.getShallow("textBorderType"),n.textBorderType);d!=null&&(t.lineDash=d);var g=gn(e.getShallow("textBorderDashOffset"),n.textBorderDashOffset);g!=null&&(t.lineDashOffset=g),!i&&f==null&&!s&&(f=r&&r.defaultOpacity),f!=null&&(t.opacity=f),!i&&!o&&t.fill==null&&r.inheritColor&&(t.fill=r.inheritColor);for(var y=0;y<mj.length;y++){var _=mj[y],v=gn(e.getShallow(_),n[_]);v!=null&&(t[_]=v)}for(var y=0;y<vj.length;y++){var _=vj[y],v=e.getShallow(_);v!=null&&(t[_]=v)}if(t.verticalAlign==null){var S=e.getShallow("baseline");S!=null&&(t.verticalAlign=S)}if(!a||!r.disableBox){for(var y=0;y<yj.length;y++){var _=yj[y],v=e.getShallow(_);v!=null&&(t[_]=v)}var C=e.getShallow("borderType");C!=null&&(t.borderDash=C),(t.backgroundColor==="auto"||t.backgroundColor==="inherit")&&l&&(t.backgroundColor=l),(t.borderColor==="auto"||t.borderColor==="inherit")&&l&&(t.borderColor=l)}}function m4e(t,e){var n=e&&e.getModel("textStyle");return ac([t.fontStyle||n&&n.getShallow("fontStyle")||"",t.fontWeight||n&&n.getShallow("fontWeight")||"",(t.fontSize||n&&n.getShallow("fontSize")||12)+"px",t.fontFamily||n&&n.getShallow("fontFamily")||"sans-serif"].join(" "))}var v4e=no(),y4e=["textStyle","color"],z3=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],j3=new ea,b4e=function(){function t(){}return t.prototype.getTextColor=function(e){var n=this.ecModel;return this.getShallow("color")||(!e&&n?n.get(y4e):null)},t.prototype.getFont=function(){return m4e({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},t.prototype.getTextRect=function(e){for(var n={text:e,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},r=0;r<z3.length;r++)n[z3[r]]=this.getShallow(z3[r]);return j3.useStyle(n),j3.update(),j3.getBoundingRect()},t}();const _4e=b4e;var pne=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],S4e=Q1(pne),w4e=function(){function t(){}return t.prototype.getLineStyle=function(e){return S4e(this,e)},t}(),gne=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],x4e=Q1(gne),C4e=function(){function t(){}return t.prototype.getItemStyle=function(e,n){return x4e(this,e,n)},t}(),Hg=function(){function t(e,n,r){this.parentModel=n,this.ecModel=r,this.option=e}return t.prototype.init=function(e,n,r){},t.prototype.mergeOption=function(e,n){hi(this.option,e,!0)},t.prototype.get=function(e,n){return e==null?this.option:this._doGet(this.parsePath(e),!n&&this.parentModel)},t.prototype.getShallow=function(e,n){var r=this.option,i=r==null?r:r[e];if(i==null&&!n){var o=this.parentModel;o&&(i=o.getShallow(e))}return i},t.prototype.getModel=function(e,n){var r=e!=null,i=r?this.parsePath(e):null,o=r?this._doGet(i):this.option;return n=n||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(i)),new t(o,n,this.ecModel)},t.prototype.isEmpty=function(){return this.option==null},t.prototype.restoreData=function(){},t.prototype.clone=function(){var e=this.constructor;return new e(Gn(this.option))},t.prototype.parsePath=function(e){return typeof e=="string"?e.split("."):e},t.prototype.resolveParentPath=function(e){return e},t.prototype.isAnimationEnabled=function(){if(!En.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},t.prototype._doGet=function(e,n){var r=this.option;if(!e)return r;for(var i=0;i<e.length&&!(e[i]&&(r=r&&typeof r=="object"?r[e[i]]:null,r==null));i++);return r==null&&n&&(r=n._doGet(this.resolveParentPath(e),n.parentModel)),r},t}();sF(Hg);t3e(Hg);wu(Hg,w4e);wu(Hg,C4e);wu(Hg,a3e);wu(Hg,_4e);const uo=Hg;var k4e=Math.round(Math.random()*10);function qA(t){return[t||"",k4e++].join("_")}function T4e(t){var e={};t.registerSubTypeDefaulter=function(n,r){var i=sc(n);e[i.main]=r},t.determineSubType=function(n,r){var i=r.type;if(!i){var o=sc(n).main;t.hasSubTypes(n)&&e[o]&&(i=e[o](r))}return i}}function A4e(t,e){t.topologicalTravel=function(o,a,s,l){if(!o.length)return;var u=n(a),c=u.graph,f=u.noEntryList,h={};for(be(o,function(S){h[S]=!0});f.length;){var d=f.pop(),g=c[d],y=!!h[d];y&&(s.call(l,d,g.originalDeps.slice()),delete h[d]),be(g.successor,y?v:_)}be(h,function(){var S="";throw new Error(S)});function _(S){c[S].entryCount--,c[S].entryCount===0&&f.push(S)}function v(S){h[S]=!0,_(S)}};function n(o){var a={},s=[];return be(o,function(l){var u=r(a,l),c=u.originalDeps=e(l),f=i(c,o);u.entryCount=f.length,u.entryCount===0&&s.push(l),be(f,function(h){wr(u.predecessor,h)<0&&u.predecessor.push(h);var d=r(a,h);wr(d.successor,h)<0&&d.successor.push(l)})}),{graph:a,noEntryList:s}}function r(o,a){return o[a]||(o[a]={predecessor:[],successor:[]}),o[a]}function i(o,a){var s=[];return be(o,function(l){wr(a,l)>=0&&s.push(l)}),s}}function E4e(t,e){return hi(hi({},t,!0),e,!0)}const P4e={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},O4e={time:{month:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthAbbr:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayOfWeek:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayOfWeekAbbr:["日","一","二","三","四","五","六"]},legend:{selector:{all:"全选",inverse:"反选"}},toolbox:{brush:{title:{rect:"矩形选择",polygon:"圈选",lineX:"横向选择",lineY:"纵向选择",keep:"保持选择",clear:"清除选择"}},dataView:{title:"数据视图",lang:["数据视图","关闭","刷新"]},dataZoom:{title:{zoom:"区域缩放",back:"区域缩放还原"}},magicType:{title:{line:"切换为折线图",bar:"切换为柱状图",stack:"切换为堆叠",tiled:"切换为平铺"}},restore:{title:"还原"},saveAsImage:{title:"保存为图片",lang:["右键另存为图片"]}},series:{typeNames:{pie:"饼图",bar:"柱状图",line:"折线图",scatter:"散点图",effectScatter:"涟漪散点图",radar:"雷达图",tree:"树图",treemap:"矩形树图",boxplot:"箱型图",candlestick:"K线图",k:"K线图",heatmap:"热力图",map:"地图",parallel:"平行坐标图",lines:"线图",graph:"关系图",sankey:"桑基图",funnel:"漏斗图",gauge:"仪表盘图",pictorialBar:"象形柱图",themeRiver:"主题河流图",sunburst:"旭日图"}},aria:{general:{withTitle:"这是一个关于“{title}”的图表。",withoutTitle:"这是一个图表，"},series:{single:{prefix:"",withName:"图表类型是{seriesType}，表示{seriesName}。",withoutName:"图表类型是{seriesType}。"},multiple:{prefix:"它由{seriesCount}个图表系列组成。",withName:"第{seriesId}个系列是一个表示{seriesName}的{seriesType}，",withoutName:"第{seriesId}个系列是一个{seriesType}，",separator:{middle:"；",end:"。"}}},data:{allData:"其数据是——",partialData:"其中，前{displayCnt}项是——",withName:"{name}的数据是{value}",withoutName:"{value}",separator:{middle:"，",end:""}}}};var Gk="ZH",xF="EN",t_=xF,b2={},CF={},mne=En.domSupported?function(){var t=(document.documentElement.lang||navigator.language||navigator.browserLanguage).toUpperCase();return t.indexOf(Gk)>-1?Gk:t_}():t_;function vne(t,e){t=t.toUpperCase(),CF[t]=new uo(e),b2[t]=e}function I4e(t){if(Pt(t)){var e=b2[t.toUpperCase()]||{};return t===Gk||t===xF?Gn(e):hi(Gn(e),Gn(b2[t_]),!1)}else return hi(Gn(t),Gn(b2[t_]),!1)}function $4e(t){return CF[t]}function L4e(){return CF[t_]}vne(xF,P4e);vne(Gk,O4e);function eh(t,e){return t+="","0000".substr(0,e-t.length)+t}function yne(t,e,n,r){var i=zA(t),o=i[D4e(n)](),a=i[M4e(n)]()+1,s=Math.floor((a-1)/3)+1,l=i[N4e(n)](),u=i["get"+(n?"UTC":"")+"Day"](),c=i[F4e(n)](),f=(c-1)%12+1,h=i[R4e(n)](),d=i[V4e(n)](),g=i[B4e(n)](),y=r instanceof uo?r:$4e(r||mne)||L4e(),_=y.getModel("time"),v=_.get("month"),S=_.get("monthAbbr"),C=_.get("dayOfWeek"),k=_.get("dayOfWeekAbbr");return(e||"").replace(/{yyyy}/g,o+"").replace(/{yy}/g,eh(o%100+"",2)).replace(/{Q}/g,s+"").replace(/{MMMM}/g,v[a-1]).replace(/{MMM}/g,S[a-1]).replace(/{MM}/g,eh(a,2)).replace(/{M}/g,a+"").replace(/{dd}/g,eh(l,2)).replace(/{d}/g,l+"").replace(/{eeee}/g,C[u]).replace(/{ee}/g,k[u]).replace(/{e}/g,u+"").replace(/{HH}/g,eh(c,2)).replace(/{H}/g,c+"").replace(/{hh}/g,eh(f+"",2)).replace(/{h}/g,f+"").replace(/{mm}/g,eh(h,2)).replace(/{m}/g,h+"").replace(/{ss}/g,eh(d,2)).replace(/{s}/g,d+"").replace(/{SSS}/g,eh(g,3)).replace(/{S}/g,g+"")}function D4e(t){return t?"getUTCFullYear":"getFullYear"}function M4e(t){return t?"getUTCMonth":"getMonth"}function N4e(t){return t?"getUTCDate":"getDate"}function F4e(t){return t?"getUTCHours":"getHours"}function R4e(t){return t?"getUTCMinutes":"getMinutes"}function V4e(t){return t?"getUTCSeconds":"getSeconds"}function B4e(t){return t?"getUTCMilliseconds":"getMilliseconds"}function z4e(t){if(!DOe(t))return Pt(t)?t:"-";var e=(t+"").split(".");return e[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(e.length>1?"."+e[1]:"")}function bne(t,e){return t=(t||"").toLowerCase().replace(/-(.)/g,function(n,r){return r.toUpperCase()}),e&&t&&(t=t.charAt(0).toUpperCase()+t.slice(1)),t}var YA=kee;function PL(t,e,n){var r="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function i(c){return c&&ac(c)?c:"-"}function o(c){return!!(c!=null&&!isNaN(c)&&isFinite(c))}var a=e==="time",s=t instanceof Date;if(a||s){var l=a?zA(t):t;if(isNaN(+l)){if(s)return"-"}else return yne(l,r,n)}if(e==="ordinal")return Y$(t)?i(t):Zr(t)&&o(t)?t+"":"-";var u=Nk(t);return o(u)?z4e(u):Y$(t)?i(t):typeof t=="boolean"?t+"":"-"}var _j=["a","b","c","d","e","f","g"],U3=function(t,e){return"{"+t+(e??"")+"}"};function _ne(t,e,n){mt(e)||(e=[e]);var r=e.length;if(!r)return"";for(var i=e[0].$vars||[],o=0;o<i.length;o++){var a=_j[o];t=t.replace(U3(a),U3(a,0))}for(var s=0;s<r;s++)for(var l=0;l<i.length;l++){var u=e[s][i[l]];t=t.replace(U3(_j[l],s),n?Ls(u):u)}return t}function j4e(t,e){var n=Pt(t)?{color:t,extraCssText:e}:t||{},r=n.color,i=n.type;e=n.extraCssText;var o=n.renderMode||"html";if(!r)return"";if(o==="html")return i==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+Ls(r)+";"+(e||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+Ls(r)+";"+(e||"")+'"></span>';var a=n.markerId||"markerX";return{renderMode:o,content:"{"+a+"|}  ",style:i==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:r}:{width:10,height:10,borderRadius:5,backgroundColor:r}}}function n_(t,e){return e=e||"transparent",Pt(t)?t:Bt(t)&&t.colorStops&&(t.colorStops[0]||{}).color||e}function OL(t,e){if(e==="_blank"||e==="blank"){var n=window.open();n.opener=null,n.location.href=t}else window.open(t,e)}var _2=be,U4e=["left","right","top","bottom","width","height"],Gx=[["width","left","right"],["height","top","bottom"]];function kF(t,e,n,r,i){var o=0,a=0;r==null&&(r=1/0),i==null&&(i=1/0);var s=0;e.eachChild(function(l,u){var c=l.getBoundingRect(),f=e.childAt(u+1),h=f&&f.getBoundingRect(),d,g;if(t==="horizontal"){var y=c.width+(h?-h.x+c.x:0);d=o+y,d>r||l.newline?(o=0,d=y,a+=s+n,s=c.height):s=Math.max(s,c.height)}else{var _=c.height+(h?-h.y+c.y:0);g=a+_,g>i||l.newline?(o+=s+n,a=0,g=_,s=c.width):s=Math.max(s,c.width)}l.newline||(l.x=o,l.y=a,l.markRedraw(),t==="horizontal"?o=d+n:a=g+n)})}var a1=kF;Vr(kF,"vertical");Vr(kF,"horizontal");function c0(t,e,n){n=YA(n||0);var r=e.width,i=e.height,o=Kr(t.left,r),a=Kr(t.top,i),s=Kr(t.right,r),l=Kr(t.bottom,i),u=Kr(t.width,r),c=Kr(t.height,i),f=n[2]+n[0],h=n[1]+n[3],d=t.aspect;switch(isNaN(u)&&(u=r-s-h-o),isNaN(c)&&(c=i-l-f-a),d!=null&&(isNaN(u)&&isNaN(c)&&(d>r/i?u=r*.8:c=i*.8),isNaN(u)&&(u=d*c),isNaN(c)&&(c=u/d)),isNaN(o)&&(o=r-s-u-h),isNaN(a)&&(a=i-l-c-f),t.left||t.right){case"center":o=r/2-u/2-n[3];break;case"right":o=r-u-h;break}switch(t.top||t.bottom){case"middle":case"center":a=i/2-c/2-n[0];break;case"bottom":a=i-c-f;break}o=o||0,a=a||0,isNaN(u)&&(u=r-h-o-(s||0)),isNaN(c)&&(c=i-f-a-(l||0));var g=new Ir(o+n[3],a+n[0],u,c);return g.margin=n,g}function qk(t){var e=t.layoutMode||t.constructor.layoutMode;return Bt(e)?e:e?{type:e}:null}function r_(t,e,n){var r=n&&n.ignoreSize;!mt(r)&&(r=[r,r]);var i=a(Gx[0],0),o=a(Gx[1],1);u(Gx[0],t,i),u(Gx[1],t,o);function a(c,f){var h={},d=0,g={},y=0,_=2;if(_2(c,function(C){g[C]=t[C]}),_2(c,function(C){s(e,C)&&(h[C]=g[C]=e[C]),l(h,C)&&d++,l(g,C)&&y++}),r[f])return l(e,c[1])?g[c[2]]=null:l(e,c[2])&&(g[c[1]]=null),g;if(y===_||!d)return g;if(d>=_)return h;for(var v=0;v<c.length;v++){var S=c[v];if(!s(h,S)&&s(t,S)){h[S]=t[S];break}}return h}function s(c,f){return c.hasOwnProperty(f)}function l(c,f){return c[f]!=null&&c[f]!=="auto"}function u(c,f,h){_2(c,function(d){f[d]=h[d]})}}function TF(t){return W4e({},t)}function W4e(t,e){return e&&t&&_2(U4e,function(n){e.hasOwnProperty(n)&&(t[n]=e[n])}),t}var H4e=no(),N0=function(t){Cr(e,t);function e(n,r,i){var o=t.call(this,n,r,i)||this;return o.uid=qA("ec_cpt_model"),o}return e.prototype.init=function(n,r,i){this.mergeDefaultAndTheme(n,i)},e.prototype.mergeDefaultAndTheme=function(n,r){var i=qk(this),o=i?TF(n):{},a=r.getTheme();hi(n,a.get(this.mainType)),hi(n,this.getDefaultOption()),i&&r_(n,o,i)},e.prototype.mergeOption=function(n,r){hi(this.option,n,!0);var i=qk(this);i&&r_(this.option,n,i)},e.prototype.optionUpdated=function(n,r){},e.prototype.getDefaultOption=function(){var n=this.constructor;if(!ZOe(n))return n.defaultOption;var r=H4e(this);if(!r.defaultOption){for(var i=[],o=n;o;){var a=o.prototype.defaultOption;a&&i.push(a),o=o.superClass}for(var s={},l=i.length-1;l>=0;l--)s=hi(s,i[l],!0);r.defaultOption=s}return r.defaultOption},e.prototype.getReferringComponents=function(n,r){var i=n+"Index",o=n+"Id";return fS(this.ecModel,n,{index:this.get(i,!0),id:this.get(o,!0)},r)},e.prototype.getBoxLayoutParams=function(){var n=this;return{left:n.get("left"),top:n.get("top"),right:n.get("right"),bottom:n.get("bottom"),width:n.get("width"),height:n.get("height")}},e.prototype.getZLevelKey=function(){return""},e.prototype.setZLevel=function(n){this.option.zlevel=n},e.protoInitialize=function(){var n=e.prototype;n.type="component",n.id="",n.name="",n.mainType="",n.subType="",n.componentIndex=0}(),e}(uo);gte(N0,uo);lF(N0);T4e(N0);A4e(N0,G4e);function G4e(t){var e=[];return be(N0.getClassesByMainType(t),function(n){e=e.concat(n.dependencies||n.prototype.dependencies||[])}),e=Qt(e,function(n){return sc(n).main}),t!=="dataset"&&wr(e,"dataset")<=0&&e.unshift("dataset"),e}const Si=N0;var Sne="";typeof navigator<"u"&&(Sne=navigator.platform||"");var Om="rgba(0, 0, 0, 0.2)";const q4e={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:Om,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:Om,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:Om,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:Om,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:Om,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:Om,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:Sne.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var wne=mn(["tooltip","label","itemName","itemId","itemGroupId","seriesName"]),Nl="original",hs="arrayRows",Cu="objectRows",Cc="keyedColumns",Fh="typedArray",xne="unknown",mf="column",F0="row",yo={Must:1,Might:2,Not:3},Cne=no();function Y4e(t){Cne(t).datasetMap=mn()}function K4e(t,e,n){var r={},i=AF(e);if(!i||!t)return r;var o=[],a=[],s=e.ecModel,l=Cne(s).datasetMap,u=i.uid+"_"+n.seriesLayoutBy,c,f;t=t.slice(),be(t,function(y,_){var v=Bt(y)?y:t[_]={name:y};v.type==="ordinal"&&c==null&&(c=_,f=g(v)),r[v.name]=[]});var h=l.get(u)||l.set(u,{categoryWayDim:f,valueWayDim:0});be(t,function(y,_){var v=y.name,S=g(y);if(c==null){var C=h.valueWayDim;d(r[v],C,S),d(a,C,S),h.valueWayDim+=S}else if(c===_)d(r[v],0,S),d(o,0,S);else{var C=h.categoryWayDim;d(r[v],C,S),d(a,C,S),h.categoryWayDim+=S}});function d(y,_,v){for(var S=0;S<v;S++)y.push(_+S)}function g(y){var _=y.dimsDef;return _?_.length:1}return o.length&&(r.itemName=o),a.length&&(r.seriesName=a),r}function X4e(t,e,n){var r={},i=AF(t);if(!i)return r;var o=e.sourceFormat,a=e.dimensionsDefine,s;(o===Cu||o===Cc)&&be(a,function(c,f){(Bt(c)?c.name:c)==="name"&&(s=f)});var l=function(){for(var c={},f={},h=[],d=0,g=Math.min(5,n);d<g;d++){var y=Tne(e.data,o,e.seriesLayoutBy,a,e.startIndex,d);h.push(y);var _=y===yo.Not;if(_&&c.v==null&&d!==s&&(c.v=d),(c.n==null||c.n===c.v||!_&&h[c.n]===yo.Not)&&(c.n=d),v(c)&&h[c.n]!==yo.Not)return c;_||(y===yo.Might&&f.v==null&&d!==s&&(f.v=d),(f.n==null||f.n===f.v)&&(f.n=d))}function v(S){return S.v!=null&&S.n!=null}return v(c)?c:v(f)?f:null}();if(l){r.value=[l.v];var u=s??l.n;r.itemName=[u],r.seriesName=[u]}return r}function AF(t){var e=t.get("data",!0);if(!e)return fS(t.ecModel,"dataset",{index:t.get("datasetIndex",!0),id:t.get("datasetId",!0)},Gp).models[0]}function J4e(t){return!t.get("transform",!0)&&!t.get("fromTransformResult",!0)?[]:fS(t.ecModel,"dataset",{index:t.get("fromDatasetIndex",!0),id:t.get("fromDatasetId",!0)},Gp).models}function kne(t,e){return Tne(t.data,t.sourceFormat,t.seriesLayoutBy,t.dimensionsDefine,t.startIndex,e)}function Tne(t,e,n,r,i,o){var a,s=5;if(js(t))return yo.Not;var l,u;if(r){var c=r[o];Bt(c)?(l=c.name,u=c.type):Pt(c)&&(l=c)}if(u!=null)return u==="ordinal"?yo.Must:yo.Not;if(e===hs){var f=t;if(n===F0){for(var h=f[o],d=0;d<(h||[]).length&&d<s;d++)if((a=k(h[i+d]))!=null)return a}else for(var d=0;d<f.length&&d<s;d++){var g=f[i+d];if(g&&(a=k(g[o]))!=null)return a}}else if(e===Cu){var y=t;if(!l)return yo.Not;for(var d=0;d<y.length&&d<s;d++){var _=y[d];if(_&&(a=k(_[l]))!=null)return a}}else if(e===Cc){var v=t;if(!l)return yo.Not;var h=v[l];if(!h||js(h))return yo.Not;for(var d=0;d<h.length&&d<s;d++)if((a=k(h[d]))!=null)return a}else if(e===Nl)for(var S=t,d=0;d<S.length&&d<s;d++){var _=S[d],C=uS(_);if(!mt(C))return yo.Not;if((a=k(C[o]))!=null)return a}function k(x){var m=Pt(x);if(x!=null&&isFinite(x)&&x!=="")return m?yo.Might:yo.Not;if(m&&x!=="-")return yo.Must}return yo.Not}var Z4e=mn();function Q4e(t,e,n){var r=Z4e.get(e);if(!r)return n;var i=r(t);return i?n.concat(i):n}var Sj=no(),e$e=no(),EF=function(){function t(){}return t.prototype.getColorFromPalette=function(e,n,r){var i=Zo(this.get("color",!0)),o=this.get("colorLayer",!0);return Ane(this,Sj,i,o,e,n,r)},t.prototype.clearColorPalette=function(){r$e(this,Sj)},t}();function t$e(t,e,n,r){var i=Zo(t.get(["aria","decal","decals"]));return Ane(t,e$e,i,null,e,n,r)}function n$e(t,e){for(var n=t.length,r=0;r<n;r++)if(t[r].length>e)return t[r];return t[n-1]}function Ane(t,e,n,r,i,o,a){o=o||t;var s=e(o),l=s.paletteIdx||0,u=s.paletteNameMap=s.paletteNameMap||{};if(u.hasOwnProperty(i))return u[i];var c=a==null||!r?n:n$e(r,a);if(c=c||n,!(!c||!c.length)){var f=c[l];return i&&(u[i]=f),s.paletteIdx=(l+1)%c.length,f}}function r$e(t,e){e(t).paletteIdx=0,e(t).paletteNameMap={}}var qx,Gy,wj,xj="\0_ec_inner",i$e=1,Ene=function(t){Cr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.init=function(n,r,i,o,a,s){o=o||{},this.option=null,this._theme=new uo(o),this._locale=new uo(a),this._optionManager=s},e.prototype.setOption=function(n,r,i){var o=Tj(r);this._optionManager.setOption(n,i,o),this._resetOption(null,o)},e.prototype.resetOption=function(n,r){return this._resetOption(n,Tj(r))},e.prototype._resetOption=function(n,r){var i=!1,o=this._optionManager;if(!n||n==="recreate"){var a=o.mountOption(n==="recreate");!this.option||n==="recreate"?wj(this,a):(this.restoreData(),this._mergeOption(a,r)),i=!0}if((n==="timeline"||n==="media")&&this.restoreData(),!n||n==="recreate"||n==="timeline"){var s=o.getTimelineOption(this);s&&(i=!0,this._mergeOption(s,r))}if(!n||n==="recreate"||n==="media"){var l=o.getMediaOption(this);l.length&&be(l,function(u){i=!0,this._mergeOption(u,r)},this)}return i},e.prototype.mergeOption=function(n){this._mergeOption(n,null)},e.prototype._mergeOption=function(n,r){var i=this.option,o=this._componentsMap,a=this._componentsCount,s=[],l=mn(),u=r&&r.replaceMergeMainTypeMap;Y4e(this),be(n,function(f,h){f!=null&&(Si.hasClass(h)?h&&(s.push(h),l.set(h,!0)):i[h]=i[h]==null?Gn(f):hi(i[h],f,!0))}),u&&u.each(function(f,h){Si.hasClass(h)&&!l.get(h)&&(s.push(h),l.set(h,!0))}),Si.topologicalTravel(s,Si.getAllClassMainTypes(),c,this);function c(f){var h=Q4e(this,f,Zo(n[f])),d=o.get(f),g=d?u&&u.get(f)?"replaceMerge":"normalMerge":"replaceAll",y=FOe(d,h,g);WOe(y,f,Si),i[f]=null,o.set(f,null),a.set(f,0);var _=[],v=[],S=0,C;be(y,function(k,x){var m=k.existing,T=k.newOption;if(!T)m&&(m.mergeOption({},this),m.optionUpdated({},!1));else{var P=f==="series",I=Si.getClass(f,k.keyInfo.subType,!P);if(!I)return;if(f==="tooltip"){if(C)return;C=!0}if(m&&m.constructor===I)m.name=k.keyInfo.name,m.mergeOption(T,this),m.optionUpdated(T,!1);else{var M=ot({componentIndex:x},k.keyInfo);m=new I(T,this,this,M),ot(m,M),k.brandNew&&(m.__requireNewView=!0),m.init(T,this,this),m.optionUpdated(null,!0)}}m?(_.push(m.option),v.push(m),S++):(_.push(void 0),v.push(void 0))},this),i[f]=_,o.set(f,v),a.set(f,S),f==="series"&&qx(this)}this._seriesIndices||qx(this)},e.prototype.getOption=function(){var n=Gn(this.option);return be(n,function(r,i){if(Si.hasClass(i)){for(var o=Zo(r),a=o.length,s=!1,l=a-1;l>=0;l--)o[l]&&!Z1(o[l])?s=!0:(o[l]=null,!s&&a--);o.length=a,n[i]=o}}),delete n[xj],n},e.prototype.getTheme=function(){return this._theme},e.prototype.getLocaleModel=function(){return this._locale},e.prototype.setUpdatePayload=function(n){this._payload=n},e.prototype.getUpdatePayload=function(){return this._payload},e.prototype.getComponent=function(n,r){var i=this._componentsMap.get(n);if(i){var o=i[r||0];if(o)return o;if(r==null){for(var a=0;a<i.length;a++)if(i[a])return i[a]}}},e.prototype.queryComponents=function(n){var r=n.mainType;if(!r)return[];var i=n.index,o=n.id,a=n.name,s=this._componentsMap.get(r);if(!s||!s.length)return[];var l;return i!=null?(l=[],be(Zo(i),function(u){s[u]&&l.push(s[u])})):o!=null?l=Cj("id",o,s):a!=null?l=Cj("name",a,s):l=Za(s,function(u){return!!u}),kj(l,n)},e.prototype.findComponents=function(n){var r=n.query,i=n.mainType,o=s(r),a=o?this.queryComponents(o):Za(this._componentsMap.get(i),function(u){return!!u});return l(kj(a,n));function s(u){var c=i+"Index",f=i+"Id",h=i+"Name";return u&&(u[c]!=null||u[f]!=null||u[h]!=null)?{mainType:i,index:u[c],id:u[f],name:u[h]}:null}function l(u){return n.filter?Za(u,n.filter):u}},e.prototype.eachComponent=function(n,r,i){var o=this._componentsMap;if(Qn(n)){var a=r,s=n;o.each(function(f,h){for(var d=0;f&&d<f.length;d++){var g=f[d];g&&s.call(a,h,g,g.componentIndex)}})}else for(var l=Pt(n)?o.get(n):Bt(n)?this.findComponents(n):null,u=0;l&&u<l.length;u++){var c=l[u];c&&r.call(i,c,c.componentIndex)}},e.prototype.getSeriesByName=function(n){var r=El(n,null);return Za(this._componentsMap.get("series"),function(i){return!!i&&r!=null&&i.name===r})},e.prototype.getSeriesByIndex=function(n){return this._componentsMap.get("series")[n]},e.prototype.getSeriesByType=function(n){return Za(this._componentsMap.get("series"),function(r){return!!r&&r.subType===n})},e.prototype.getSeries=function(){return Za(this._componentsMap.get("series"),function(n){return!!n})},e.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},e.prototype.eachSeries=function(n,r){Gy(this),be(this._seriesIndices,function(i){var o=this._componentsMap.get("series")[i];n.call(r,o,i)},this)},e.prototype.eachRawSeries=function(n,r){be(this._componentsMap.get("series"),function(i){i&&n.call(r,i,i.componentIndex)})},e.prototype.eachSeriesByType=function(n,r,i){Gy(this),be(this._seriesIndices,function(o){var a=this._componentsMap.get("series")[o];a.subType===n&&r.call(i,a,o)},this)},e.prototype.eachRawSeriesByType=function(n,r,i){return be(this.getSeriesByType(n),r,i)},e.prototype.isSeriesFiltered=function(n){return Gy(this),this._seriesIndicesMap.get(n.componentIndex)==null},e.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},e.prototype.filterSeries=function(n,r){Gy(this);var i=[];be(this._seriesIndices,function(o){var a=this._componentsMap.get("series")[o];n.call(r,a,o)&&i.push(o)},this),this._seriesIndices=i,this._seriesIndicesMap=mn(i)},e.prototype.restoreData=function(n){qx(this);var r=this._componentsMap,i=[];r.each(function(o,a){Si.hasClass(a)&&i.push(a)}),Si.topologicalTravel(i,Si.getAllClassMainTypes(),function(o){be(r.get(o),function(a){a&&(o!=="series"||!o$e(a,n))&&a.restoreData()})})},e.internalField=function(){qx=function(n){var r=n._seriesIndices=[];be(n._componentsMap.get("series"),function(i){i&&r.push(i.componentIndex)}),n._seriesIndicesMap=mn(r)},Gy=function(n){},wj=function(n,r){n.option={},n.option[xj]=i$e,n._componentsMap=mn({series:[]}),n._componentsCount=mn();var i=r.aria;Bt(i)&&i.enabled==null&&(i.enabled=!0),a$e(r,n._theme.option),hi(r,q4e,!1),n._mergeOption(r,null)}}(),e}(uo);function o$e(t,e){if(e){var n=e.seriesIndex,r=e.seriesId,i=e.seriesName;return n!=null&&t.componentIndex!==n||r!=null&&t.id!==r||i!=null&&t.name!==i}}function a$e(t,e){var n=t.color&&!t.colorLayer;be(e,function(r,i){i==="colorLayer"&&n||Si.hasClass(i)||(typeof r=="object"?t[i]=t[i]?hi(t[i],r,!1):Gn(r):t[i]==null&&(t[i]=r))})}function Cj(t,e,n){if(mt(e)){var r=mn();return be(e,function(o){if(o!=null){var a=El(o,null);a!=null&&r.set(o,!0)}}),Za(n,function(o){return o&&r.get(o[t])})}else{var i=El(e,null);return Za(n,function(o){return o&&i!=null&&o[t]===i})}}function kj(t,e){return e.hasOwnProperty("subType")?Za(t,function(n){return n&&n.subType===e.subType}):t}function Tj(t){var e=mn();return t&&be(Zo(t.replaceMerge),function(n){e.set(n,!0)}),{replaceMergeMainTypeMap:e}}wu(Ene,EF);const Pne=Ene;var s$e=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],l$e=function(){function t(e){be(s$e,function(n){this[n]=Or(e[n],e)},this)}return t}();const One=l$e;var W3={},u$e=function(){function t(){this._coordinateSystems=[]}return t.prototype.create=function(e,n){var r=[];be(W3,function(i,o){var a=i.create(e,n);r=r.concat(a||[])}),this._coordinateSystems=r},t.prototype.update=function(e,n){be(this._coordinateSystems,function(r){r.update&&r.update(e,n)})},t.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},t.register=function(e,n){W3[e]=n},t.get=function(e){return W3[e]},t}();const KA=u$e;var c$e=/^(min|max)?(.+)$/,f$e=function(){function t(e){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=e}return t.prototype.setOption=function(e,n,r){e&&(be(Zo(e.series),function(a){a&&a.data&&js(a.data)&&K$(a.data)}),be(Zo(e.dataset),function(a){a&&a.source&&js(a.source)&&K$(a.source)})),e=Gn(e);var i=this._optionBackup,o=h$e(e,n,!i);this._newBaseOption=o.baseOption,i?(o.timelineOptions.length&&(i.timelineOptions=o.timelineOptions),o.mediaList.length&&(i.mediaList=o.mediaList),o.mediaDefault&&(i.mediaDefault=o.mediaDefault)):this._optionBackup=o},t.prototype.mountOption=function(e){var n=this._optionBackup;return this._timelineOptions=n.timelineOptions,this._mediaList=n.mediaList,this._mediaDefault=n.mediaDefault,this._currentMediaIndices=[],Gn(e?n.baseOption:this._newBaseOption)},t.prototype.getTimelineOption=function(e){var n,r=this._timelineOptions;if(r.length){var i=e.getComponent("timeline");i&&(n=Gn(r[i.getCurrentIndex()]))}return n},t.prototype.getMediaOption=function(e){var n=this._api.getWidth(),r=this._api.getHeight(),i=this._mediaList,o=this._mediaDefault,a=[],s=[];if(!i.length&&!o)return s;for(var l=0,u=i.length;l<u;l++)d$e(i[l].query,n,r)&&a.push(l);return!a.length&&o&&(a=[-1]),a.length&&!g$e(a,this._currentMediaIndices)&&(s=Qt(a,function(c){return Gn(c===-1?o.option:i[c].option)})),this._currentMediaIndices=a,s},t}();function h$e(t,e,n){var r=[],i,o,a=t.baseOption,s=t.timeline,l=t.options,u=t.media,c=!!t.media,f=!!(l||s||a&&a.timeline);a?(o=a,o.timeline||(o.timeline=s)):((f||c)&&(t.options=t.media=null),o=t),c&&mt(u)&&be(u,function(d){d&&d.option&&(d.query?r.push(d):i||(i=d))}),h(o),be(l,function(d){return h(d)}),be(r,function(d){return h(d.option)});function h(d){be(e,function(g){g(d,n)})}return{baseOption:o,timelineOptions:l||[],mediaDefault:i,mediaList:r}}function d$e(t,e,n){var r={width:e,height:n,aspectratio:e/n},i=!0;return be(t,function(o,a){var s=a.match(c$e);if(!(!s||!s[1]||!s[2])){var l=s[1],u=s[2].toLowerCase();p$e(r[u],o,l)||(i=!1)}}),i}function p$e(t,e,n){return n==="min"?t>=e:n==="max"?t<=e:t===e}function g$e(t,e){return t.join(",")===e.join(",")}const m$e=f$e;var Yl=be,i_=Bt,Aj=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function H3(t){var e=t&&t.itemStyle;if(e)for(var n=0,r=Aj.length;n<r;n++){var i=Aj[n],o=e.normal,a=e.emphasis;o&&o[i]&&(t[i]=t[i]||{},t[i].normal?hi(t[i].normal,o[i]):t[i].normal=o[i],o[i]=null),a&&a[i]&&(t[i]=t[i]||{},t[i].emphasis?hi(t[i].emphasis,a[i]):t[i].emphasis=a[i],a[i]=null)}}function Wo(t,e,n){if(t&&t[e]&&(t[e].normal||t[e].emphasis)){var r=t[e].normal,i=t[e].emphasis;r&&(n?(t[e].normal=t[e].emphasis=null,pi(t[e],r)):t[e]=r),i&&(t.emphasis=t.emphasis||{},t.emphasis[e]=i,i.focus&&(t.emphasis.focus=i.focus),i.blurScope&&(t.emphasis.blurScope=i.blurScope))}}function Ib(t){Wo(t,"itemStyle"),Wo(t,"lineStyle"),Wo(t,"areaStyle"),Wo(t,"label"),Wo(t,"labelLine"),Wo(t,"upperLabel"),Wo(t,"edgeLabel")}function $i(t,e){var n=i_(t)&&t[e],r=i_(n)&&n.textStyle;if(r)for(var i=0,o=$z.length;i<o;i++){var a=$z[i];r.hasOwnProperty(a)&&(n[a]=r[a])}}function cl(t){t&&(Ib(t),$i(t,"label"),t.emphasis&&$i(t.emphasis,"label"))}function v$e(t){if(i_(t)){H3(t),Ib(t),$i(t,"label"),$i(t,"upperLabel"),$i(t,"edgeLabel"),t.emphasis&&($i(t.emphasis,"label"),$i(t.emphasis,"upperLabel"),$i(t.emphasis,"edgeLabel"));var e=t.markPoint;e&&(H3(e),cl(e));var n=t.markLine;n&&(H3(n),cl(n));var r=t.markArea;r&&cl(r);var i=t.data;if(t.type==="graph"){i=i||t.nodes;var o=t.links||t.edges;if(o&&!js(o))for(var a=0;a<o.length;a++)cl(o[a]);be(t.categories,function(u){Ib(u)})}if(i&&!js(i))for(var a=0;a<i.length;a++)cl(i[a]);if(e=t.markPoint,e&&e.data)for(var s=e.data,a=0;a<s.length;a++)cl(s[a]);if(n=t.markLine,n&&n.data)for(var l=n.data,a=0;a<l.length;a++)mt(l[a])?(cl(l[a][0]),cl(l[a][1])):cl(l[a]);t.type==="gauge"?($i(t,"axisLabel"),$i(t,"title"),$i(t,"detail")):t.type==="treemap"?(Wo(t.breadcrumb,"itemStyle"),be(t.levels,function(u){Ib(u)})):t.type==="tree"&&Ib(t.leaves)}}function Uc(t){return mt(t)?t:t?[t]:[]}function Ej(t){return(mt(t)?t[0]:t)||{}}function y$e(t,e){Yl(Uc(t.series),function(r){i_(r)&&v$e(r)});var n=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];e&&n.push("valueAxis","categoryAxis","logAxis","timeAxis"),Yl(n,function(r){Yl(Uc(t[r]),function(i){i&&($i(i,"axisLabel"),$i(i.axisPointer,"label"))})}),Yl(Uc(t.parallel),function(r){var i=r&&r.parallelAxisDefault;$i(i,"axisLabel"),$i(i&&i.axisPointer,"label")}),Yl(Uc(t.calendar),function(r){Wo(r,"itemStyle"),$i(r,"dayLabel"),$i(r,"monthLabel"),$i(r,"yearLabel")}),Yl(Uc(t.radar),function(r){$i(r,"name"),r.name&&r.axisName==null&&(r.axisName=r.name,delete r.name),r.nameGap!=null&&r.axisNameGap==null&&(r.axisNameGap=r.nameGap,delete r.nameGap)}),Yl(Uc(t.geo),function(r){i_(r)&&(cl(r),Yl(Uc(r.regions),function(i){cl(i)}))}),Yl(Uc(t.timeline),function(r){cl(r),Wo(r,"label"),Wo(r,"itemStyle"),Wo(r,"controlStyle",!0);var i=r.data;mt(i)&&be(i,function(o){Bt(o)&&(Wo(o,"label"),Wo(o,"itemStyle"))})}),Yl(Uc(t.toolbox),function(r){Wo(r,"iconStyle"),Yl(r.feature,function(i){Wo(i,"iconStyle")})}),$i(Ej(t.axisPointer),"label"),$i(Ej(t.tooltip).axisPointer,"label")}function b$e(t,e){for(var n=e.split(","),r=t,i=0;i<n.length&&(r=r&&r[n[i]],r!=null);i++);return r}function _$e(t,e,n,r){for(var i=e.split(","),o=t,a,s=0;s<i.length-1;s++)a=i[s],o[a]==null&&(o[a]={}),o=o[a];(r||o[i[s]]==null)&&(o[i[s]]=n)}function Pj(t){t&&be(S$e,function(e){e[0]in t&&!(e[1]in t)&&(t[e[1]]=t[e[0]])})}var S$e=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],w$e=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],G3=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function qy(t){var e=t&&t.itemStyle;if(e)for(var n=0;n<G3.length;n++){var r=G3[n][1],i=G3[n][0];e[r]!=null&&(e[i]=e[r])}}function Oj(t){t&&t.alignTo==="edge"&&t.margin!=null&&t.edgeDistance==null&&(t.edgeDistance=t.margin)}function Ij(t){t&&t.downplay&&!t.blur&&(t.blur=t.downplay)}function x$e(t){t&&t.focusNodeAdjacency!=null&&(t.emphasis=t.emphasis||{},t.emphasis.focus==null&&(t.emphasis.focus="adjacency"))}function Ine(t,e){if(t)for(var n=0;n<t.length;n++)e(t[n]),t[n]&&Ine(t[n].children,e)}function $ne(t,e){y$e(t,e),t.series=Zo(t.series),be(t.series,function(n){if(Bt(n)){var r=n.type;if(r==="line")n.clipOverflow!=null&&(n.clip=n.clipOverflow);else if(r==="pie"||r==="gauge"){n.clockWise!=null&&(n.clockwise=n.clockWise),Oj(n.label);var i=n.data;if(i&&!js(i))for(var o=0;o<i.length;o++)Oj(i[o]);n.hoverOffset!=null&&(n.emphasis=n.emphasis||{},(n.emphasis.scaleSize=null)&&(n.emphasis.scaleSize=n.hoverOffset))}else if(r==="gauge"){var a=b$e(n,"pointer.color");a!=null&&_$e(n,"itemStyle.color",a)}else if(r==="bar"){qy(n),qy(n.backgroundStyle),qy(n.emphasis);var i=n.data;if(i&&!js(i))for(var o=0;o<i.length;o++)typeof i[o]=="object"&&(qy(i[o]),qy(i[o]&&i[o].emphasis))}else if(r==="sunburst"){var s=n.highlightPolicy;s&&(n.emphasis=n.emphasis||{},n.emphasis.focus||(n.emphasis.focus=s)),Ij(n),Ine(n.data,Ij)}else r==="graph"||r==="sankey"?x$e(n):r==="map"&&(n.mapType&&!n.map&&(n.map=n.mapType),n.mapLocation&&pi(n,n.mapLocation));n.hoverAnimation!=null&&(n.emphasis=n.emphasis||{},n.emphasis&&n.emphasis.scale==null&&(n.emphasis.scale=n.hoverAnimation)),Pj(n)}}),t.dataRange&&(t.visualMap=t.dataRange),be(w$e,function(n){var r=t[n];r&&(mt(r)||(r=[r]),be(r,function(i){Pj(i)}))})}function C$e(t){var e=mn();t.eachSeries(function(n){var r=n.get("stack");if(r){var i=e.get(r)||e.set(r,[]),o=n.getData(),a={stackResultDimension:o.getCalculationInfo("stackResultDimension"),stackedOverDimension:o.getCalculationInfo("stackedOverDimension"),stackedDimension:o.getCalculationInfo("stackedDimension"),stackedByDimension:o.getCalculationInfo("stackedByDimension"),isStackedByIndex:o.getCalculationInfo("isStackedByIndex"),data:o,seriesModel:n};if(!a.stackedDimension||!(a.isStackedByIndex||a.stackedByDimension))return;i.length&&o.setCalculationInfo("stackedOnSeries",i[i.length-1].seriesModel),i.push(a)}}),e.each(k$e)}function k$e(t){be(t,function(e,n){var r=[],i=[NaN,NaN],o=[e.stackResultDimension,e.stackedOverDimension],a=e.data,s=e.isStackedByIndex,l=e.seriesModel.get("stackStrategy")||"samesign";a.modify(o,function(u,c,f){var h=a.get(e.stackedDimension,f);if(isNaN(h))return i;var d,g;s?g=a.getRawIndex(f):d=a.get(e.stackedByDimension,f);for(var y=NaN,_=n-1;_>=0;_--){var v=t[_];if(s||(g=v.data.rawIndexOf(v.stackedByDimension,d)),g>=0){var S=v.data.getByRawIndex(v.stackResultDimension,g);if(l==="all"||l==="positive"&&S>0||l==="negative"&&S<0||l==="samesign"&&h>=0&&S>0||l==="samesign"&&h<=0&&S<0){h=$Oe(h,S),y=S;break}}}return r[0]=h,r[1]=y,r})})}var XA=function(){function t(e){this.data=e.data||(e.sourceFormat===Cc?{}:[]),this.sourceFormat=e.sourceFormat||xne,this.seriesLayoutBy=e.seriesLayoutBy||mf,this.startIndex=e.startIndex||0,this.dimensionsDetectedCount=e.dimensionsDetectedCount,this.metaRawOption=e.metaRawOption;var n=this.dimensionsDefine=e.dimensionsDefine;if(n)for(var r=0;r<n.length;r++){var i=n[r];i.type==null&&kne(this,r)===yo.Must&&(i.type="ordinal")}}return t}();function PF(t){return t instanceof XA}function IL(t,e,n){n=n||Lne(t);var r=e.seriesLayoutBy,i=A$e(t,n,r,e.sourceHeader,e.dimensions),o=new XA({data:t,sourceFormat:n,seriesLayoutBy:r,dimensionsDefine:i.dimensionsDefine,startIndex:i.startIndex,dimensionsDetectedCount:i.dimensionsDetectedCount,metaRawOption:Gn(e)});return o}function OF(t){return new XA({data:t,sourceFormat:js(t)?Fh:Nl})}function T$e(t){return new XA({data:t.data,sourceFormat:t.sourceFormat,seriesLayoutBy:t.seriesLayoutBy,dimensionsDefine:Gn(t.dimensionsDefine),startIndex:t.startIndex,dimensionsDetectedCount:t.dimensionsDetectedCount})}function Lne(t){var e=xne;if(js(t))e=Fh;else if(mt(t)){t.length===0&&(e=hs);for(var n=0,r=t.length;n<r;n++){var i=t[n];if(i!=null){if(mt(i)){e=hs;break}else if(Bt(i)){e=Cu;break}}}}else if(Bt(t)){for(var o in t)if(s0(t,o)&&fs(t[o])){e=Cc;break}}return e}function A$e(t,e,n,r,i){var o,a;if(!t)return{dimensionsDefine:$j(i),startIndex:a,dimensionsDetectedCount:o};if(e===hs){var s=t;r==="auto"||r==null?Lj(function(u){u!=null&&u!=="-"&&(Pt(u)?a==null&&(a=1):a=0)},n,s,10):a=Zr(r)?r:r?1:0,!i&&a===1&&(i=[],Lj(function(u,c){i[c]=u!=null?u+"":""},n,s,1/0)),o=i?i.length:n===F0?s.length:s[0]?s[0].length:null}else if(e===Cu)i||(i=E$e(t));else if(e===Cc)i||(i=[],be(t,function(u,c){i.push(c)}));else if(e===Nl){var l=uS(t[0]);o=mt(l)&&l.length||1}return{startIndex:a,dimensionsDefine:$j(i),dimensionsDetectedCount:o}}function E$e(t){for(var e=0,n;e<t.length&&!(n=t[e++]););if(n)return ir(n)}function $j(t){if(t){var e=mn();return Qt(t,function(n,r){n=Bt(n)?n:{name:n};var i={name:n.name,displayName:n.displayName,type:n.type};if(i.name==null)return i;i.name+="",i.displayName==null&&(i.displayName=i.name);var o=e.get(i.name);return o?i.name+="-"+o.count++:e.set(i.name,{count:1}),i})}}function Lj(t,e,n,r){if(e===F0)for(var i=0;i<n.length&&i<r;i++)t(n[i]?n[i][0]:null,i);else for(var o=n[0]||[],i=0;i<o.length&&i<r;i++)t(o[i],i)}function Dne(t){var e=t.sourceFormat;return e===Cu||e===Cc}var hp,dp,pp,Dj,Mj,Mne=function(){function t(e,n){var r=PF(e)?e:OF(e);this._source=r;var i=this._data=r.data;r.sourceFormat===Fh&&(this._offset=0,this._dimSize=n,this._data=i),Mj(this,i,r)}return t.prototype.getSource=function(){return this._source},t.prototype.count=function(){return 0},t.prototype.getItem=function(e,n){},t.prototype.appendData=function(e){},t.prototype.clean=function(){},t.protoInitialize=function(){var e=t.prototype;e.pure=!1,e.persistent=!0}(),t.internalField=function(){var e;Mj=function(a,s,l){var u=l.sourceFormat,c=l.seriesLayoutBy,f=l.startIndex,h=l.dimensionsDefine,d=Dj[IF(u,c)];if(ot(a,d),u===Fh)a.getItem=n,a.count=i,a.fillStorage=r;else{var g=Nne(u,c);a.getItem=Or(g,null,s,f,h);var y=Fne(u,c);a.count=Or(y,null,s,f,h)}};var n=function(a,s){a=a-this._offset,s=s||[];for(var l=this._data,u=this._dimSize,c=u*a,f=0;f<u;f++)s[f]=l[c+f];return s},r=function(a,s,l,u){for(var c=this._data,f=this._dimSize,h=0;h<f;h++){for(var d=u[h],g=d[0]==null?1/0:d[0],y=d[1]==null?-1/0:d[1],_=s-a,v=l[h],S=0;S<_;S++){var C=c[S*f+h];v[a+S]=C,C<g&&(g=C),C>y&&(y=C)}d[0]=g,d[1]=y}},i=function(){return this._data?this._data.length/this._dimSize:0};Dj=(e={},e[hs+"_"+mf]={pure:!0,appendData:o},e[hs+"_"+F0]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},e[Cu]={pure:!0,appendData:o},e[Cc]={pure:!0,appendData:function(a){var s=this._data;be(a,function(l,u){for(var c=s[u]||(s[u]=[]),f=0;f<(l||[]).length;f++)c.push(l[f])})}},e[Nl]={appendData:o},e[Fh]={persistent:!1,pure:!0,appendData:function(a){this._data=a},clean:function(){this._offset+=this.count(),this._data=null}},e);function o(a){for(var s=0;s<a.length;s++)this._data.push(a[s])}}(),t}(),Nj=function(t,e,n,r){return t[r]},P$e=(hp={},hp[hs+"_"+mf]=function(t,e,n,r){return t[r+e]},hp[hs+"_"+F0]=function(t,e,n,r,i){r+=e;for(var o=i||[],a=t,s=0;s<a.length;s++){var l=a[s];o[s]=l?l[r]:null}return o},hp[Cu]=Nj,hp[Cc]=function(t,e,n,r,i){for(var o=i||[],a=0;a<n.length;a++){var s=n[a].name,l=t[s];o[a]=l?l[r]:null}return o},hp[Nl]=Nj,hp);function Nne(t,e){var n=P$e[IF(t,e)];return n}var Fj=function(t,e,n){return t.length},O$e=(dp={},dp[hs+"_"+mf]=function(t,e,n){return Math.max(0,t.length-e)},dp[hs+"_"+F0]=function(t,e,n){var r=t[0];return r?Math.max(0,r.length-e):0},dp[Cu]=Fj,dp[Cc]=function(t,e,n){var r=n[0].name,i=t[r];return i?i.length:0},dp[Nl]=Fj,dp);function Fne(t,e){var n=O$e[IF(t,e)];return n}var q3=function(t,e,n){return t[e]},I$e=(pp={},pp[hs]=q3,pp[Cu]=function(t,e,n){return t[n]},pp[Cc]=q3,pp[Nl]=function(t,e,n){var r=uS(t);return r instanceof Array?r[e]:r},pp[Fh]=q3,pp);function Rne(t){var e=I$e[t];return e}function IF(t,e){return t===hs?t+"_"+e:t}function Yk(t,e,n){if(t){var r=t.getRawDataItem(e);if(r!=null){var i=t.getStore(),o=i.getSource().sourceFormat;if(n!=null){var a=t.getDimensionIndex(n),s=i.getDimensionProperty(a);return Rne(o)(r,a,s)}else{var l=r;return o===Nl&&(l=uS(r)),l}}}}var $$e=/\{@(.+?)\}/g,L$e=function(){function t(){}return t.prototype.getDataParams=function(e,n){var r=this.getData(n),i=this.getRawValue(e,n),o=r.getRawIndex(e),a=r.getName(e),s=r.getRawDataItem(e),l=r.getItemVisual(e,"style"),u=l&&l[r.getItemVisual(e,"drawType")||"fill"],c=l&&l.stroke,f=this.mainType,h=f==="series",d=r.userOutput&&r.userOutput.get();return{componentType:f,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:h?this.subType:null,seriesIndex:this.seriesIndex,seriesId:h?this.id:null,seriesName:h?this.name:null,name:a,dataIndex:o,data:s,dataType:n,value:i,color:u,borderColor:c,dimensionNames:d?d.fullDimensions:null,encode:d?d.encode:null,$vars:["seriesName","name","value"]}},t.prototype.getFormattedLabel=function(e,n,r,i,o,a){n=n||"normal";var s=this.getData(r),l=this.getDataParams(e,r);if(a&&(l.value=a.interpolatedValue),i!=null&&mt(l.value)&&(l.value=l.value[i]),!o){var u=s.getItemModel(e);o=u.get(n==="normal"?["label","formatter"]:[n,"label","formatter"])}if(Qn(o))return l.status=n,l.dimensionIndex=i,o(l);if(Pt(o)){var c=_ne(o,l);return c.replace($$e,function(f,h){var d=h.length,g=h;g.charAt(0)==="["&&g.charAt(d-1)==="]"&&(g=+g.slice(1,d-1));var y=Yk(s,e,g);if(a&&mt(a.interpolatedValue)){var _=s.getDimensionIndex(g);_>=0&&(y=a.interpolatedValue[_])}return y!=null?y+"":""})}},t.prototype.getRawValue=function(e,n){return Yk(this.getData(n),e)},t.prototype.formatTooltip=function(e,n,r){},t}();function Rj(t){var e,n;return Bt(t)?t.type&&(n=t):e=t,{text:e,frag:n}}function s1(t){return new D$e(t)}var D$e=function(){function t(e){e=e||{},this._reset=e.reset,this._plan=e.plan,this._count=e.count,this._onDirty=e.onDirty,this._dirty=!0}return t.prototype.perform=function(e){var n=this._upstream,r=e&&e.skip;if(this._dirty&&n){var i=this.context;i.data=i.outputData=n.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var o;this._plan&&!r&&(o=this._plan(this.context));var a=c(this._modBy),s=this._modDataCount||0,l=c(e&&e.modBy),u=e&&e.modDataCount||0;(a!==l||s!==u)&&(o="reset");function c(S){return!(S>=1)&&(S=1),S}var f;(this._dirty||o==="reset")&&(this._dirty=!1,f=this._doReset(r)),this._modBy=l,this._modDataCount=u;var h=e&&e.step;if(n?this._dueEnd=n._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var d=this._dueIndex,g=Math.min(h!=null?this._dueIndex+h:1/0,this._dueEnd);if(!r&&(f||d<g)){var y=this._progress;if(mt(y))for(var _=0;_<y.length;_++)this._doProgress(y[_],d,g,l,u);else this._doProgress(y,d,g,l,u)}this._dueIndex=g;var v=this._settedOutputEnd!=null?this._settedOutputEnd:g;this._outputDueEnd=v}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},t.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},t.prototype._doProgress=function(e,n,r,i,o){Vj.reset(n,r,i,o),this._callingProgress=e,this._callingProgress({start:n,end:r,count:r-n,next:Vj.next},this.context)},t.prototype._doReset=function(e){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var n,r;!e&&this._reset&&(n=this._reset(this.context),n&&n.progress&&(r=n.forceFirstProgress,n=n.progress),mt(n)&&!n.length&&(n=null)),this._progress=n,this._modBy=this._modDataCount=null;var i=this._downstream;return i&&i.dirty(),r},t.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},t.prototype.pipe=function(e){(this._downstream!==e||this._dirty)&&(this._downstream=e,e._upstream=this,e.dirty())},t.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},t.prototype.getUpstream=function(){return this._upstream},t.prototype.getDownstream=function(){return this._downstream},t.prototype.setOutputEnd=function(e){this._outputDueEnd=this._settedOutputEnd=e},t}(),Vj=function(){var t,e,n,r,i,o={reset:function(l,u,c,f){e=l,t=u,n=c,r=f,i=Math.ceil(r/n),o.next=n>1&&r>0?s:a}};return o;function a(){return e<t?e++:null}function s(){var l=e%i*n+Math.ceil(e/i),u=e>=t?null:l<r?l:e;return e++,u}}();function S2(t,e){var n=e&&e.type;return n==="ordinal"?t:(n==="time"&&!Zr(t)&&t!=null&&t!=="-"&&(t=+zA(t)),t==null||t===""?NaN:+t)}mn({number:function(t){return parseFloat(t)},time:function(t){return+zA(t)},trim:function(t){return Pt(t)?ac(t):t}});var M$e=function(){function t(e,n){var r=e==="desc";this._resultLT=r?1:-1,n==null&&(n=r?"min":"max"),this._incomparable=n==="min"?-1/0:1/0}return t.prototype.evaluate=function(e,n){var r=Zr(e)?e:Nk(e),i=Zr(n)?n:Nk(n),o=isNaN(r),a=isNaN(i);if(o&&(r=this._incomparable),a&&(i=this._incomparable),o&&a){var s=Pt(e),l=Pt(n);s&&(r=l?e:0),l&&(i=s?n:0)}return r<i?this._resultLT:r>i?-this._resultLT:0},t}(),N$e=function(){function t(){}return t.prototype.getRawData=function(){throw new Error("not supported")},t.prototype.getRawDataItem=function(e){throw new Error("not supported")},t.prototype.cloneRawData=function(){},t.prototype.getDimensionInfo=function(e){},t.prototype.cloneAllDimensionInfo=function(){},t.prototype.count=function(){},t.prototype.retrieveValue=function(e,n){},t.prototype.retrieveValueFromItem=function(e,n){},t.prototype.convertValue=function(e,n){return S2(e,n)},t}();function F$e(t,e){var n=new N$e,r=t.data,i=n.sourceFormat=t.sourceFormat,o=t.startIndex,a="";t.seriesLayoutBy!==mf&&Qa(a);var s=[],l={},u=t.dimensionsDefine;if(u)be(u,function(y,_){var v=y.name,S={index:_,name:v,displayName:y.displayName};if(s.push(S),v!=null){var C="";s0(l,v)&&Qa(C),l[v]=S}});else for(var c=0;c<t.dimensionsDetectedCount;c++)s.push({index:c});var f=Nne(i,mf);e.__isBuiltIn&&(n.getRawDataItem=function(y){return f(r,o,s,y)},n.getRawData=Or(R$e,null,t)),n.cloneRawData=Or(V$e,null,t);var h=Fne(i,mf);n.count=Or(h,null,r,o,s);var d=Rne(i);n.retrieveValue=function(y,_){var v=f(r,o,s,y);return g(v,_)};var g=n.retrieveValueFromItem=function(y,_){if(y!=null){var v=s[_];if(v)return d(y,_,v.name)}};return n.getDimensionInfo=Or(B$e,null,s,l),n.cloneAllDimensionInfo=Or(z$e,null,s),n}function R$e(t){var e=t.sourceFormat;if(!$F(e)){var n="";Qa(n)}return t.data}function V$e(t){var e=t.sourceFormat,n=t.data;if(!$F(e)){var r="";Qa(r)}if(e===hs){for(var i=[],o=0,a=n.length;o<a;o++)i.push(n[o].slice());return i}else if(e===Cu){for(var i=[],o=0,a=n.length;o<a;o++)i.push(ot({},n[o]));return i}}function B$e(t,e,n){if(n!=null){if(Zr(n)||!isNaN(n)&&!s0(e,n))return t[n];if(s0(e,n))return e[n]}}function z$e(t){return Gn(t)}var Vne=mn();function j$e(t){t=Gn(t);var e=t.type,n="";e||Qa(n);var r=e.split(":");r.length!==2&&Qa(n);var i=!1;r[0]==="echarts"&&(e=r[1],i=!0),t.__isBuiltIn=i,Vne.set(e,t)}function U$e(t,e,n){var r=Zo(t),i=r.length,o="";i||Qa(o);for(var a=0,s=i;a<s;a++){var l=r[a];e=W$e(l,e),a!==s-1&&(e.length=Math.max(e.length,1))}return e}function W$e(t,e,n,r){var i="";e.length||Qa(i),Bt(t)||Qa(i);var o=t.type,a=Vne.get(o);a||Qa(i);var s=Qt(e,function(u){return F$e(u,a)}),l=Zo(a.transform({upstream:s[0],upstreamList:s,config:Gn(t.config)}));return Qt(l,function(u,c){var f="";Bt(u)||Qa(f),u.data||Qa(f);var h=Lne(u.data);$F(h)||Qa(f);var d,g=e[0];if(g&&c===0&&!u.dimensions){var y=g.startIndex;y&&(u.data=g.data.slice(0,y).concat(u.data)),d={seriesLayoutBy:mf,sourceHeader:y,dimensions:g.metaRawOption.dimensions}}else d={seriesLayoutBy:mf,sourceHeader:0,dimensions:u.dimensions};return IL(u.data,d,null)})}function $F(t){return t===hs||t===Cu}var JA="undefined",H$e=typeof Uint32Array===JA?Array:Uint32Array,G$e=typeof Uint16Array===JA?Array:Uint16Array,Bne=typeof Int32Array===JA?Array:Int32Array,Bj=typeof Float64Array===JA?Array:Float64Array,zne={float:Bj,int:Bne,ordinal:Array,number:Array,time:Bj},Y3;function Yy(t){return t>65535?H$e:G$e}function Im(){return[1/0,-1/0]}function q$e(t){var e=t.constructor;return e===Array?t.slice():new e(t)}function zj(t,e,n,r,i){var o=zne[n||"float"];if(i){var a=t[e],s=a&&a.length;if(s!==r){for(var l=new o(r),u=0;u<s;u++)l[u]=a[u];t[e]=l}}else t[e]=new o(r)}var $L=function(){function t(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=mn()}return t.prototype.initData=function(e,n,r){this._provider=e,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var i=e.getSource(),o=this.defaultDimValueGetter=Y3[i.sourceFormat];this._dimValueGetter=r||o,this._rawExtent=[],Dne(i),this._dimensions=Qt(n,function(a){return{type:a.type,property:a.property}}),this._initDataFromProvider(0,e.count())},t.prototype.getProvider=function(){return this._provider},t.prototype.getSource=function(){return this._provider.getSource()},t.prototype.ensureCalculationDimension=function(e,n){var r=this._calcDimNameToIdx,i=this._dimensions,o=r.get(e);if(o!=null){if(i[o].type===n)return o}else o=i.length;return i[o]={type:n},r.set(e,o),this._chunks[o]=new zne[n||"float"](this._rawCount),this._rawExtent[o]=Im(),o},t.prototype.collectOrdinalMeta=function(e,n){var r=this._chunks[e],i=this._dimensions[e],o=this._rawExtent,a=i.ordinalOffset||0,s=r.length;a===0&&(o[e]=Im());for(var l=o[e],u=a;u<s;u++){var c=r[u]=n.parseAndCollect(r[u]);isNaN(c)||(l[0]=Math.min(c,l[0]),l[1]=Math.max(c,l[1]))}i.ordinalMeta=n,i.ordinalOffset=s,i.type="ordinal"},t.prototype.getOrdinalMeta=function(e){var n=this._dimensions[e],r=n.ordinalMeta;return r},t.prototype.getDimensionProperty=function(e){var n=this._dimensions[e];return n&&n.property},t.prototype.appendData=function(e){var n=this._provider,r=this.count();n.appendData(e);var i=n.count();return n.persistent||(i+=r),r<i&&this._initDataFromProvider(r,i,!0),[r,i]},t.prototype.appendValues=function(e,n){for(var r=this._chunks,i=this._dimensions,o=i.length,a=this._rawExtent,s=this.count(),l=s+Math.max(e.length,n||0),u=0;u<o;u++){var c=i[u];zj(r,u,c.type,l,!0)}for(var f=[],h=s;h<l;h++)for(var d=h-s,g=0;g<o;g++){var c=i[g],y=Y3.arrayRows.call(this,e[d]||f,c.property,d,g);r[g][h]=y;var _=a[g];y<_[0]&&(_[0]=y),y>_[1]&&(_[1]=y)}return this._rawCount=this._count=l,{start:s,end:l}},t.prototype._initDataFromProvider=function(e,n,r){for(var i=this._provider,o=this._chunks,a=this._dimensions,s=a.length,l=this._rawExtent,u=Qt(a,function(S){return S.property}),c=0;c<s;c++){var f=a[c];l[c]||(l[c]=Im()),zj(o,c,f.type,n,r)}if(i.fillStorage)i.fillStorage(e,n,o,l);else for(var h=[],d=e;d<n;d++){h=i.getItem(d,h);for(var g=0;g<s;g++){var y=o[g],_=this._dimValueGetter(h,u[g],d,g);y[d]=_;var v=l[g];_<v[0]&&(v[0]=_),_>v[1]&&(v[1]=_)}}!i.persistent&&i.clean&&i.clean(),this._rawCount=this._count=n,this._extent=[]},t.prototype.count=function(){return this._count},t.prototype.get=function(e,n){if(!(n>=0&&n<this._count))return NaN;var r=this._chunks[e];return r?r[this.getRawIndex(n)]:NaN},t.prototype.getValues=function(e,n){var r=[],i=[];if(n==null){n=e,e=[];for(var o=0;o<this._dimensions.length;o++)i.push(o)}else i=e;for(var o=0,a=i.length;o<a;o++)r.push(this.get(i[o],n));return r},t.prototype.getByRawIndex=function(e,n){if(!(n>=0&&n<this._rawCount))return NaN;var r=this._chunks[e];return r?r[n]:NaN},t.prototype.getSum=function(e){var n=this._chunks[e],r=0;if(n)for(var i=0,o=this.count();i<o;i++){var a=this.get(e,i);isNaN(a)||(r+=a)}return r},t.prototype.getMedian=function(e){var n=[];this.each([e],function(o){isNaN(o)||n.push(o)});var r=n.sort(function(o,a){return o-a}),i=this.count();return i===0?0:i%2===1?r[(i-1)/2]:(r[i/2]+r[i/2-1])/2},t.prototype.indexOfRawIndex=function(e){if(e>=this._rawCount||e<0)return-1;if(!this._indices)return e;var n=this._indices,r=n[e];if(r!=null&&r<this._count&&r===e)return e;for(var i=0,o=this._count-1;i<=o;){var a=(i+o)/2|0;if(n[a]<e)i=a+1;else if(n[a]>e)o=a-1;else return a}return-1},t.prototype.indicesOfNearest=function(e,n,r){var i=this._chunks,o=i[e],a=[];if(!o)return a;r==null&&(r=1/0);for(var s=1/0,l=-1,u=0,c=0,f=this.count();c<f;c++){var h=this.getRawIndex(c),d=n-o[h],g=Math.abs(d);g<=r&&((g<s||g===s&&d>=0&&l<0)&&(s=g,l=d,u=0),d===l&&(a[u++]=c))}return a.length=u,a},t.prototype.getIndices=function(){var e,n=this._indices;if(n){var r=n.constructor,i=this._count;if(r===Array){e=new r(i);for(var o=0;o<i;o++)e[o]=n[o]}else e=new r(n.buffer,0,i)}else{var r=Yy(this._rawCount);e=new r(this.count());for(var o=0;o<e.length;o++)e[o]=o}return e},t.prototype.filter=function(e,n){if(!this._count)return this;for(var r=this.clone(),i=r.count(),o=Yy(r._rawCount),a=new o(i),s=[],l=e.length,u=0,c=e[0],f=r._chunks,h=0;h<i;h++){var d=void 0,g=r.getRawIndex(h);if(l===0)d=n(h);else if(l===1){var y=f[c][g];d=n(y,h)}else{for(var _=0;_<l;_++)s[_]=f[e[_]][g];s[_]=h,d=n.apply(null,s)}d&&(a[u++]=g)}return u<i&&(r._indices=a),r._count=u,r._extent=[],r._updateGetRawIdx(),r},t.prototype.selectRange=function(e){var n=this.clone(),r=n._count;if(!r)return this;var i=ir(e),o=i.length;if(!o)return this;var a=n.count(),s=Yy(n._rawCount),l=new s(a),u=0,c=i[0],f=e[c][0],h=e[c][1],d=n._chunks,g=!1;if(!n._indices){var y=0;if(o===1){for(var _=d[i[0]],v=0;v<r;v++){var S=_[v];(S>=f&&S<=h||isNaN(S))&&(l[u++]=y),y++}g=!0}else if(o===2){for(var _=d[i[0]],C=d[i[1]],k=e[i[1]][0],x=e[i[1]][1],v=0;v<r;v++){var S=_[v],m=C[v];(S>=f&&S<=h||isNaN(S))&&(m>=k&&m<=x||isNaN(m))&&(l[u++]=y),y++}g=!0}}if(!g)if(o===1)for(var v=0;v<a;v++){var T=n.getRawIndex(v),S=d[i[0]][T];(S>=f&&S<=h||isNaN(S))&&(l[u++]=T)}else for(var v=0;v<a;v++){for(var P=!0,T=n.getRawIndex(v),I=0;I<o;I++){var M=i[I],S=d[M][T];(S<e[M][0]||S>e[M][1])&&(P=!1)}P&&(l[u++]=n.getRawIndex(v))}return u<a&&(n._indices=l),n._count=u,n._extent=[],n._updateGetRawIdx(),n},t.prototype.map=function(e,n){var r=this.clone(e);return this._updateDims(r,e,n),r},t.prototype.modify=function(e,n){this._updateDims(this,e,n)},t.prototype._updateDims=function(e,n,r){for(var i=e._chunks,o=[],a=n.length,s=e.count(),l=[],u=e._rawExtent,c=0;c<n.length;c++)u[n[c]]=Im();for(var f=0;f<s;f++){for(var h=e.getRawIndex(f),d=0;d<a;d++)l[d]=i[n[d]][h];l[a]=f;var g=r&&r.apply(null,l);if(g!=null){typeof g!="object"&&(o[0]=g,g=o);for(var c=0;c<g.length;c++){var y=n[c],_=g[c],v=u[y],S=i[y];S&&(S[h]=_),_<v[0]&&(v[0]=_),_>v[1]&&(v[1]=_)}}}},t.prototype.lttbDownSample=function(e,n){var r=this.clone([e],!0),i=r._chunks,o=i[e],a=this.count(),s=0,l=Math.floor(1/n),u=this.getRawIndex(0),c,f,h,d=new(Yy(this._rawCount))(Math.min((Math.ceil(a/l)+2)*2,a));d[s++]=u;for(var g=1;g<a-1;g+=l){for(var y=Math.min(g+l,a-1),_=Math.min(g+l*2,a),v=(_+y)/2,S=0,C=y;C<_;C++){var k=this.getRawIndex(C),x=o[k];isNaN(x)||(S+=x)}S/=_-y;var m=g,T=Math.min(g+l,a),P=g-1,I=o[u];c=-1,h=m;for(var M=-1,L=0,C=m;C<T;C++){var k=this.getRawIndex(C),x=o[k];if(isNaN(x)){L++,M<0&&(M=k);continue}f=Math.abs((P-v)*(x-I)-(P-C)*(S-I)),f>c&&(c=f,h=k)}L>0&&L<T-m&&(d[s++]=Math.min(M,h),h=Math.max(M,h)),d[s++]=h,u=h}return d[s++]=this.getRawIndex(a-1),r._count=s,r._indices=d,r.getRawIndex=this._getRawIdx,r},t.prototype.downSample=function(e,n,r,i){for(var o=this.clone([e],!0),a=o._chunks,s=[],l=Math.floor(1/n),u=a[e],c=this.count(),f=o._rawExtent[e]=Im(),h=new(Yy(this._rawCount))(Math.ceil(c/l)),d=0,g=0;g<c;g+=l){l>c-g&&(l=c-g,s.length=l);for(var y=0;y<l;y++){var _=this.getRawIndex(g+y);s[y]=u[_]}var v=r(s),S=this.getRawIndex(Math.min(g+i(s,v)||0,c-1));u[S]=v,v<f[0]&&(f[0]=v),v>f[1]&&(f[1]=v),h[d++]=S}return o._count=d,o._indices=h,o._updateGetRawIdx(),o},t.prototype.each=function(e,n){if(this._count)for(var r=e.length,i=this._chunks,o=0,a=this.count();o<a;o++){var s=this.getRawIndex(o);switch(r){case 0:n(o);break;case 1:n(i[e[0]][s],o);break;case 2:n(i[e[0]][s],i[e[1]][s],o);break;default:for(var l=0,u=[];l<r;l++)u[l]=i[e[l]][s];u[l]=o,n.apply(null,u)}}},t.prototype.getDataExtent=function(e){var n=this._chunks[e],r=Im();if(!n)return r;var i=this.count(),o=!this._indices,a;if(o)return this._rawExtent[e].slice();if(a=this._extent[e],a)return a.slice();a=r;for(var s=a[0],l=a[1],u=0;u<i;u++){var c=this.getRawIndex(u),f=n[c];f<s&&(s=f),f>l&&(l=f)}return a=[s,l],this._extent[e]=a,a},t.prototype.getRawDataItem=function(e){var n=this.getRawIndex(e);if(this._provider.persistent)return this._provider.getItem(n);for(var r=[],i=this._chunks,o=0;o<i.length;o++)r.push(i[o][n]);return r},t.prototype.clone=function(e,n){var r=new t,i=this._chunks,o=e&&ad(e,function(s,l){return s[l]=!0,s},{});if(o)for(var a=0;a<i.length;a++)r._chunks[a]=o[a]?q$e(i[a]):i[a];else r._chunks=i;return this._copyCommonProps(r),n||(r._indices=this._cloneIndices()),r._updateGetRawIdx(),r},t.prototype._copyCommonProps=function(e){e._count=this._count,e._rawCount=this._rawCount,e._provider=this._provider,e._dimensions=this._dimensions,e._extent=Gn(this._extent),e._rawExtent=Gn(this._rawExtent)},t.prototype._cloneIndices=function(){if(this._indices){var e=this._indices.constructor,n=void 0;if(e===Array){var r=this._indices.length;n=new e(r);for(var i=0;i<r;i++)n[i]=this._indices[i]}else n=new e(this._indices);return n}return null},t.prototype._getRawIdxIdentity=function(e){return e},t.prototype._getRawIdx=function(e){return e<this._count&&e>=0?this._indices[e]:-1},t.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},t.internalField=function(){function e(n,r,i,o){return S2(n[o],this._dimensions[o])}Y3={arrayRows:e,objectRows:function(n,r,i,o){return S2(n[r],this._dimensions[o])},keyedColumns:e,original:function(n,r,i,o){var a=n&&(n.value==null?n:n.value);return S2(a instanceof Array?a[o]:a,this._dimensions[o])},typedArray:function(n,r,i,o){return n[o]}}}(),t}(),Y$e=function(){function t(e){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=e}return t.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},t.prototype._setLocalSource=function(e,n){this._sourceList=e,this._upstreamSignList=n,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},t.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},t.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},t.prototype._createSource=function(){this._setLocalSource([],[]);var e=this._sourceHost,n=this._getUpstreamSourceManagers(),r=!!n.length,i,o;if(Yx(e)){var a=e,s=void 0,l=void 0,u=void 0;if(r){var c=n[0];c.prepareSource(),u=c.getSource(),s=u.data,l=u.sourceFormat,o=[c._getVersionSign()]}else s=a.get("data",!0),l=js(s)?Fh:Nl,o=[];var f=this._getSourceMetaRawOption()||{},h=u&&u.metaRawOption||{},d=gn(f.seriesLayoutBy,h.seriesLayoutBy)||null,g=gn(f.sourceHeader,h.sourceHeader),y=gn(f.dimensions,h.dimensions),_=d!==h.seriesLayoutBy||!!g!=!!h.sourceHeader||y;i=_?[IL(s,{seriesLayoutBy:d,sourceHeader:g,dimensions:y},l)]:[]}else{var v=e;if(r){var S=this._applyTransform(n);i=S.sourceList,o=S.upstreamSignList}else{var C=v.get("source",!0);i=[IL(C,this._getSourceMetaRawOption(),null)],o=[]}}this._setLocalSource(i,o)},t.prototype._applyTransform=function(e){var n=this._sourceHost,r=n.get("transform",!0),i=n.get("fromTransformResult",!0);if(i!=null){var o="";e.length!==1&&jj(o)}var a,s=[],l=[];return be(e,function(u){u.prepareSource();var c=u.getSource(i||0),f="";i!=null&&!c&&jj(f),s.push(c),l.push(u._getVersionSign())}),r?a=U$e(r,s,{datasetIndex:n.componentIndex}):i!=null&&(a=[T$e(s[0])]),{sourceList:a,upstreamSignList:l}},t.prototype._isDirty=function(){if(this._dirty)return!0;for(var e=this._getUpstreamSourceManagers(),n=0;n<e.length;n++){var r=e[n];if(r._isDirty()||this._upstreamSignList[n]!==r._getVersionSign())return!0}},t.prototype.getSource=function(e){e=e||0;var n=this._sourceList[e];if(!n){var r=this._getUpstreamSourceManagers();return r[0]&&r[0].getSource(e)}return n},t.prototype.getSharedDataStore=function(e){var n=e.makeStoreSchema();return this._innerGetDataStore(n.dimensions,e.source,n.hash)},t.prototype._innerGetDataStore=function(e,n,r){var i=0,o=this._storeList,a=o[i];a||(a=o[i]={});var s=a[r];if(!s){var l=this._getUpstreamSourceManagers()[0];Yx(this._sourceHost)&&l?s=l._innerGetDataStore(e,n,r):(s=new $L,s.initData(new Mne(n,e.length),e)),a[r]=s}return s},t.prototype._getUpstreamSourceManagers=function(){var e=this._sourceHost;if(Yx(e)){var n=AF(e);return n?[n.getSourceManager()]:[]}else return Qt(J4e(e),function(r){return r.getSourceManager()})},t.prototype._getSourceMetaRawOption=function(){var e=this._sourceHost,n,r,i;if(Yx(e))n=e.get("seriesLayoutBy",!0),r=e.get("sourceHeader",!0),i=e.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var o=e;n=o.get("seriesLayoutBy",!0),r=o.get("sourceHeader",!0),i=o.get("dimensions",!0)}return{seriesLayoutBy:n,sourceHeader:r,dimensions:i}},t}();function Yx(t){return t.mainType==="series"}function jj(t){throw new Error(t)}var jne="line-height:1";function Une(t,e){var n=t.color||"#6e7079",r=t.fontSize||12,i=t.fontWeight||"400",o=t.color||"#464646",a=t.fontSize||14,s=t.fontWeight||"900";return e==="html"?{nameStyle:"font-size:"+Ls(r+"")+"px;color:"+Ls(n)+";font-weight:"+Ls(i+""),valueStyle:"font-size:"+Ls(a+"")+"px;color:"+Ls(o)+";font-weight:"+Ls(s+"")}:{nameStyle:{fontSize:r,fill:n,fontWeight:i},valueStyle:{fontSize:a,fill:o,fontWeight:s}}}var K$e=[0,10,20,30],X$e=["",`
`,`

`,`


`];function kg(t,e){return e.type=t,e}function LL(t){return t.type==="section"}function Wne(t){return LL(t)?J$e:Z$e}function Hne(t){if(LL(t)){var e=0,n=t.blocks.length,r=n>1||n>0&&!t.noHeader;return be(t.blocks,function(i){var o=Hne(i);o>=e&&(e=o+ +(r&&(!o||LL(i)&&!i.noHeader)))}),e}return 0}function J$e(t,e,n,r){var i=e.noHeader,o=Q$e(Hne(e)),a=[],s=e.blocks||[];Us(!s||mt(s)),s=s||[];var l=t.orderMode;if(e.sortBlocks&&l){s=s.slice();var u={valueAsc:"asc",valueDesc:"desc"};if(s0(u,l)){var c=new M$e(u[l],null);s.sort(function(g,y){return c.evaluate(g.sortParam,y.sortParam)})}else l==="seriesDesc"&&s.reverse()}be(s,function(g,y){var _=e.valueFormatter,v=Wne(g)(_?ot(ot({},t),{valueFormatter:_}):t,g,y>0?o.html:0,r);v!=null&&a.push(v)});var f=t.renderMode==="richText"?a.join(o.richText):DL(a.join(""),i?n:o.html);if(i)return f;var h=PL(e.header,"ordinal",t.useUTC),d=Une(r,t.renderMode).nameStyle;return t.renderMode==="richText"?Gne(t,h,d)+o.richText+f:DL('<div style="'+d+";"+jne+';">'+Ls(h)+"</div>"+f,n)}function Z$e(t,e,n,r){var i=t.renderMode,o=e.noName,a=e.noValue,s=!e.markerType,l=e.name,u=t.useUTC,c=e.valueFormatter||t.valueFormatter||function(k){return k=mt(k)?k:[k],Qt(k,function(x,m){return PL(x,mt(d)?d[m]:d,u)})};if(!(o&&a)){var f=s?"":t.markupStyleCreator.makeTooltipMarker(e.markerType,e.markerColor||"#333",i),h=o?"":PL(l,"ordinal",u),d=e.valueType,g=a?[]:c(e.value),y=!s||!o,_=!s&&o,v=Une(r,i),S=v.nameStyle,C=v.valueStyle;return i==="richText"?(s?"":f)+(o?"":Gne(t,h,S))+(a?"":nLe(t,g,y,_,C)):DL((s?"":f)+(o?"":eLe(h,!s,S))+(a?"":tLe(g,y,_,C)),n)}}function Uj(t,e,n,r,i,o){if(t){var a=Wne(t),s={useUTC:i,renderMode:n,orderMode:r,markupStyleCreator:e,valueFormatter:t.valueFormatter};return a(s,t,0,o)}}function Q$e(t){return{html:K$e[t],richText:X$e[t]}}function DL(t,e){var n='<div style="clear:both"></div>',r="margin: "+e+"px 0 0";return'<div style="'+r+";"+jne+';">'+t+n+"</div>"}function eLe(t,e,n){var r=e?"margin-left:2px":"";return'<span style="'+n+";"+r+'">'+Ls(t)+"</span>"}function tLe(t,e,n,r){var i=n?"10px":"20px",o=e?"float:right;margin-left:"+i:"";return t=mt(t)?t:[t],'<span style="'+o+";"+r+'">'+Qt(t,function(a){return Ls(a)}).join("&nbsp;&nbsp;")+"</span>"}function Gne(t,e,n){return t.markupStyleCreator.wrapRichTextStyle(e,n)}function nLe(t,e,n,r,i){var o=[i],a=r?10:20;return n&&o.push({padding:[0,0,0,a],align:"right"}),t.markupStyleCreator.wrapRichTextStyle(mt(e)?e.join("  "):e,o)}function rLe(t,e){var n=t.getData().getItemVisual(e,"style"),r=n[t.visualDrawType];return n_(r)}function qne(t,e){var n=t.get("padding");return n??(e==="richText"?[8,10]:10)}var K3=function(){function t(){this.richTextStyles={},this._nextStyleNameId=ute()}return t.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},t.prototype.makeTooltipMarker=function(e,n,r){var i=r==="richText"?this._generateStyleName():null,o=j4e({color:n,type:e,renderMode:r,markerId:i});return Pt(o)?o:(this.richTextStyles[i]=o.style,o.content)},t.prototype.wrapRichTextStyle=function(e,n){var r={};mt(n)?be(n,function(o){return ot(r,o)}):ot(r,n);var i=this._generateStyleName();return this.richTextStyles[i]=r,"{"+i+"|"+e+"}"},t}();function iLe(t){var e=t.series,n=t.dataIndex,r=t.multipleSeries,i=e.getData(),o=i.mapDimensionsAll("defaultedTooltip"),a=o.length,s=e.getRawValue(n),l=mt(s),u=rLe(e,n),c,f,h,d;if(a>1||l&&!a){var g=oLe(s,e,n,o,u);c=g.inlineValues,f=g.inlineValueTypes,h=g.blocks,d=g.inlineValues[0]}else if(a){var y=i.getDimensionInfo(o[0]);d=c=Yk(i,n,o[0]),f=y.type}else d=c=l?s[0]:s;var _=oF(e),v=_&&e.name||"",S=i.getName(n),C=r?v:S;return kg("section",{header:v,noHeader:r||!_,sortParam:d,blocks:[kg("nameValue",{markerType:"item",markerColor:u,name:C,noName:!ac(C),value:c,valueType:f})].concat(h||[])})}function oLe(t,e,n,r,i){var o=e.getData(),a=ad(t,function(f,h,d){var g=o.getDimensionInfo(d);return f=f||g&&g.tooltip!==!1&&g.displayName!=null},!1),s=[],l=[],u=[];r.length?be(r,function(f){c(Yk(o,n,f),f)}):be(t,c);function c(f,h){var d=o.getDimensionInfo(h);!d||d.otherDims.tooltip===!1||(a?u.push(kg("nameValue",{markerType:"subItem",markerColor:i,name:d.displayName,value:f,valueType:d.type})):(s.push(f),l.push(d.type)))}return{inlineValues:s,inlineValueTypes:l,blocks:u}}var th=no();function Kx(t,e){return t.getName(e)||t.getId(e)}var aLe="__universalTransitionEnabled",ZA=function(t){Cr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n._selectedDataIndicesMap={},n}return e.prototype.init=function(n,r,i){this.seriesIndex=this.componentIndex,this.dataTask=s1({count:lLe,reset:uLe}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(n,i);var o=th(this).sourceManager=new Y$e(this);o.prepareSource();var a=this.getInitialData(n,i);Hj(a,this),this.dataTask.context.data=a,th(this).dataBeforeProcessed=a,Wj(this),this._initSelectedMapFromData(a)},e.prototype.mergeDefaultAndTheme=function(n,r){var i=qk(this),o=i?TF(n):{},a=this.subType;Si.hasClass(a)&&(a+="Series"),hi(n,r.getTheme().get(this.subType)),hi(n,this.getDefaultOption()),mL(n,"label",["show"]),this.fillDataTextStyle(n.data),i&&r_(n,o,i)},e.prototype.mergeOption=function(n,r){n=hi(this.option,n,!0),this.fillDataTextStyle(n.data);var i=qk(this);i&&r_(this.option,n,i);var o=th(this).sourceManager;o.dirty(),o.prepareSource();var a=this.getInitialData(n,r);Hj(a,this),this.dataTask.dirty(),this.dataTask.context.data=a,th(this).dataBeforeProcessed=a,Wj(this),this._initSelectedMapFromData(a)},e.prototype.fillDataTextStyle=function(n){if(n&&!js(n))for(var r=["show"],i=0;i<n.length;i++)n[i]&&n[i].label&&mL(n[i],"label",r)},e.prototype.getInitialData=function(n,r){},e.prototype.appendData=function(n){var r=this.getRawData();r.appendData(n.data)},e.prototype.getData=function(n){var r=ML(this);if(r){var i=r.context.data;return n==null?i:i.getLinkedData(n)}else return th(this).data},e.prototype.getAllData=function(){var n=this.getData();return n&&n.getLinkedDataAll?n.getLinkedDataAll():[{data:n}]},e.prototype.setData=function(n){var r=ML(this);if(r){var i=r.context;i.outputData=n,r!==this.dataTask&&(i.data=n)}th(this).data=n},e.prototype.getEncode=function(){var n=this.get("encode",!0);if(n)return mn(n)},e.prototype.getSourceManager=function(){return th(this).sourceManager},e.prototype.getSource=function(){return this.getSourceManager().getSource()},e.prototype.getRawData=function(){return th(this).dataBeforeProcessed},e.prototype.getColorBy=function(){var n=this.get("colorBy");return n||"series"},e.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},e.prototype.getBaseAxis=function(){var n=this.coordinateSystem;return n&&n.getBaseAxis&&n.getBaseAxis()},e.prototype.formatTooltip=function(n,r,i){return iLe({series:this,dataIndex:n,multipleSeries:r})},e.prototype.isAnimationEnabled=function(){var n=this.ecModel;if(En.node&&!(n&&n.ssr))return!1;var r=this.getShallow("animation");return r&&this.getData().count()>this.getShallow("animationThreshold")&&(r=!1),!!r},e.prototype.restoreData=function(){this.dataTask.dirty()},e.prototype.getColorFromPalette=function(n,r,i){var o=this.ecModel,a=EF.prototype.getColorFromPalette.call(this,n,r,i);return a||(a=o.getColorFromPalette(n,r,i)),a},e.prototype.coordDimToDataDim=function(n){return this.getRawData().mapDimensionsAll(n)},e.prototype.getProgressive=function(){return this.get("progressive")},e.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},e.prototype.select=function(n,r){this._innerSelect(this.getData(r),n)},e.prototype.unselect=function(n,r){var i=this.option.selectedMap;if(i){var o=this.option.selectedMode,a=this.getData(r);if(o==="series"||i==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var s=0;s<n.length;s++){var l=n[s],u=Kx(a,l);i[u]=!1,this._selectedDataIndicesMap[u]=-1}}},e.prototype.toggleSelect=function(n,r){for(var i=[],o=0;o<n.length;o++)i[0]=n[o],this.isSelected(n[o],r)?this.unselect(i,r):this.select(i,r)},e.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var n=this._selectedDataIndicesMap,r=ir(n),i=[],o=0;o<r.length;o++){var a=n[r[o]];a>=0&&i.push(a)}return i},e.prototype.isSelected=function(n,r){var i=this.option.selectedMap;if(!i)return!1;var o=this.getData(r);return(i==="all"||i[Kx(o,n)])&&!o.getItemModel(n).get(["select","disabled"])},e.prototype.isUniversalTransitionEnabled=function(){if(this[aLe])return!0;var n=this.option.universalTransition;return n?n===!0?!0:n&&n.enabled:!1},e.prototype._innerSelect=function(n,r){var i,o,a=this.option,s=a.selectedMode,l=r.length;if(!(!s||!l)){if(s==="series")a.selectedMap="all";else if(s==="multiple"){Bt(a.selectedMap)||(a.selectedMap={});for(var u=a.selectedMap,c=0;c<l;c++){var f=r[c],h=Kx(n,f);u[h]=!0,this._selectedDataIndicesMap[h]=n.getRawIndex(f)}}else if(s==="single"||s===!0){var d=r[l-1],h=Kx(n,d);a.selectedMap=(i={},i[h]=!0,i),this._selectedDataIndicesMap=(o={},o[h]=n.getRawIndex(d),o)}}},e.prototype._initSelectedMapFromData=function(n){if(!this.option.selectedMap){var r=[];n.hasItemOption&&n.each(function(i){var o=n.getRawDataItem(i);o&&o.selected&&r.push(i)}),r.length>0&&this._innerSelect(n,r)}},e.registerClass=function(n){return Si.registerClass(n)},e.protoInitialize=function(){var n=e.prototype;n.type="series.__base__",n.seriesIndex=0,n.ignoreStyleOnData=!1,n.hasSymbolVisual=!1,n.defaultSymbol="circle",n.visualStyleAccessPath="itemStyle",n.visualDrawType="fill"}(),e}(Si);wu(ZA,L$e);wu(ZA,EF);gte(ZA,Si);function Wj(t){var e=t.name;oF(t)||(t.name=sLe(t)||e)}function sLe(t){var e=t.getRawData(),n=e.mapDimensionsAll("seriesName"),r=[];return be(n,function(i){var o=e.getDimensionInfo(i);o.displayName&&r.push(o.displayName)}),r.join(" ")}function lLe(t){return t.model.getRawData().count()}function uLe(t){var e=t.model;return e.setData(e.getRawData().cloneShallow()),cLe}function cLe(t,e){e.outputData&&t.end>e.outputData.count()&&e.model.getRawData().cloneShallow(e.outputData)}function Hj(t,e){be(JEe(t.CHANGABLE_METHODS,t.DOWNSAMPLE_METHODS),function(n){t.wrapMethod(n,Vr(fLe,e))})}function fLe(t,e){var n=ML(t);return n&&n.setOutputEnd((e||this).count()),e}function ML(t){var e=(t.ecModel||{}).scheduler,n=e&&e.getPipeline(t.uid);if(n){var r=n.currentTask;if(r){var i=r.agentStubMap;i&&(r=i.get(t.uid))}return r}}const Tg=ZA;var LF=function(){function t(){this.group=new bc,this.uid=qA("viewComponent")}return t.prototype.init=function(e,n){},t.prototype.render=function(e,n,r,i){},t.prototype.dispose=function(e,n){},t.prototype.updateView=function(e,n,r,i){},t.prototype.updateLayout=function(e,n,r,i){},t.prototype.updateVisual=function(e,n,r,i){},t.prototype.toggleBlurSeries=function(e,n,r){},t.prototype.eachRendered=function(e){var n=this.group;n&&n.traverse(e)},t}();sF(LF);lF(LF);const ld=LF;function hLe(){var t=no();return function(e){var n=t(e),r=e.pipelineContext,i=!!n.large,o=!!n.progressiveRender,a=n.large=!!(r&&r.large),s=n.progressiveRender=!!(r&&r.progressiveRender);return(i!==a||o!==s)&&"reset"}}var Yne=no(),dLe=hLe(),DF=function(){function t(){this.group=new bc,this.uid=qA("viewChart"),this.renderTask=s1({plan:pLe,reset:gLe}),this.renderTask.context={view:this}}return t.prototype.init=function(e,n){},t.prototype.render=function(e,n,r,i){},t.prototype.highlight=function(e,n,r,i){var o=e.getData(i&&i.dataType);o&&qj(o,i,"emphasis")},t.prototype.downplay=function(e,n,r,i){var o=e.getData(i&&i.dataType);o&&qj(o,i,"normal")},t.prototype.remove=function(e,n){this.group.removeAll()},t.prototype.dispose=function(e,n){},t.prototype.updateView=function(e,n,r,i){this.render(e,n,r,i)},t.prototype.updateLayout=function(e,n,r,i){this.render(e,n,r,i)},t.prototype.updateVisual=function(e,n,r,i){this.render(e,n,r,i)},t.prototype.eachRendered=function(e){dne(this.group,e)},t.markUpdateMethod=function(e,n){Yne(e).updateMethod=n},t.protoInitialize=function(){var e=t.prototype;e.type="chart"}(),t}();function Gj(t,e,n){t&&CL(t)&&(e==="emphasis"?Vk:Bk)(t,n)}function qj(t,e,n){var r=cS(t,e),i=e&&e.highlightKey!=null?pIe(e.highlightKey):null;r!=null?be(Zo(r),function(o){Gj(t.getItemGraphicEl(o),n,i)}):t.eachItemGraphicEl(function(o){Gj(o,n,i)})}sF(DF);lF(DF);function pLe(t){return dLe(t.model)}function gLe(t){var e=t.model,n=t.ecModel,r=t.api,i=t.payload,o=e.pipelineContext.progressiveRender,a=t.view,s=i&&Yne(i).updateMethod,l=o?"incrementalPrepareRender":s&&a[s]?s:"render";return l!=="render"&&a[l](e,n,r,i),mLe[l]}var mLe={incrementalPrepareRender:{progress:function(t,e){e.view.incrementalRender(t,e.model,e.ecModel,e.api,e.payload)}},render:{forceFirstProgress:!0,progress:function(t,e){e.view.render(e.model,e.ecModel,e.api,e.payload)}}};const Rh=DF;var Kk="\0__throttleOriginMethod",Yj="\0__throttleRate",Kj="\0__throttleType";function MF(t,e,n){var r,i=0,o=0,a=null,s,l,u,c;e=e||0;function f(){o=new Date().getTime(),a=null,t.apply(l,u||[])}var h=function(){for(var d=[],g=0;g<arguments.length;g++)d[g]=arguments[g];r=new Date().getTime(),l=this,u=d;var y=c||e,_=c||n;c=null,s=r-(_?i:o)-y,clearTimeout(a),_?a=setTimeout(f,y):s>=0?f():a=setTimeout(f,-s),i=r};return h.clear=function(){a&&(clearTimeout(a),a=null)},h.debounceNextCall=function(d){c=d},h}function Kne(t,e,n,r){var i=t[e];if(i){var o=i[Kk]||i,a=i[Kj],s=i[Yj];if(s!==n||a!==r){if(n==null||!r)return t[e]=o;i=t[e]=MF(o,n,r==="debounce"),i[Kk]=o,i[Kj]=r,i[Yj]=n}return i}}function NL(t,e){var n=t[e];n&&n[Kk]&&(n.clear&&n.clear(),t[e]=n[Kk])}var Xj=no(),Jj={itemStyle:Q1(gne,!0),lineStyle:Q1(pne,!0)},vLe={lineStyle:"stroke",itemStyle:"fill"};function Xne(t,e){var n=t.visualStyleMapper||Jj[e];return n||(console.warn("Unknown style type '"+e+"'."),Jj.itemStyle)}function Jne(t,e){var n=t.visualDrawType||vLe[e];return n||(console.warn("Unknown style type '"+e+"'."),"fill")}var yLe={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){var n=t.getData(),r=t.visualStyleAccessPath||"itemStyle",i=t.getModel(r),o=Xne(t,r),a=o(i),s=i.getShallow("decal");s&&(n.setVisual("decal",s),s.dirty=!0);var l=Jne(t,r),u=a[l],c=Qn(u)?u:null,f=a.fill==="auto"||a.stroke==="auto";if(!a[l]||c||f){var h=t.getColorFromPalette(t.name,null,e.getSeriesCount());a[l]||(a[l]=h,n.setVisual("colorFromPalette",!0)),a.fill=a.fill==="auto"||Qn(a.fill)?h:a.fill,a.stroke=a.stroke==="auto"||Qn(a.stroke)?h:a.stroke}if(n.setVisual("style",a),n.setVisual("drawType",l),!e.isSeriesFiltered(t)&&c)return n.setVisual("colorFromPalette",!1),{dataEach:function(d,g){var y=t.getDataParams(g),_=ot({},a);_[l]=c(y),d.setItemVisual(g,"style",_)}}}},Ky=new uo,bLe={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){if(!(t.ignoreStyleOnData||e.isSeriesFiltered(t))){var n=t.getData(),r=t.visualStyleAccessPath||"itemStyle",i=Xne(t,r),o=n.getVisual("drawType");return{dataEach:n.hasItemOption?function(a,s){var l=a.getRawDataItem(s);if(l&&l[r]){Ky.option=l[r];var u=i(Ky),c=a.ensureUniqueItemVisual(s,"style");ot(c,u),Ky.option.decal&&(a.setItemVisual(s,"decal",Ky.option.decal),Ky.option.decal.dirty=!0),o in u&&a.setItemVisual(s,"colorFromPalette",!1)}}:null}}}},_Le={performRawSeries:!0,overallReset:function(t){var e=mn();t.eachSeries(function(n){var r=n.getColorBy();if(!n.isColorBySeries()){var i=n.type+"-"+r,o=e.get(i);o||(o={},e.set(i,o)),Xj(n).scope=o}}),t.eachSeries(function(n){if(!(n.isColorBySeries()||t.isSeriesFiltered(n))){var r=n.getRawData(),i={},o=n.getData(),a=Xj(n).scope,s=n.visualStyleAccessPath||"itemStyle",l=Jne(n,s);o.each(function(u){var c=o.getRawIndex(u);i[c]=u}),r.each(function(u){var c=i[u],f=o.getItemVisual(c,"colorFromPalette");if(f){var h=o.ensureUniqueItemVisual(c,"style"),d=r.getName(u)||u+"",g=r.count();h[l]=n.getColorFromPalette(d,a,g)}})}})}},Xx=Math.PI;function SLe(t,e){e=e||{},pi(e,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var n=new bc,r=new Qo({style:{fill:e.maskColor},zlevel:e.zlevel,z:1e4});n.add(r);var i=new ea({style:{text:e.text,fill:e.textColor,fontSize:e.fontSize,fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontFamily:e.fontFamily},zlevel:e.zlevel,z:10001}),o=new Qo({style:{fill:"none"},textContent:i,textConfig:{position:"right",distance:10},zlevel:e.zlevel,z:10001});n.add(o);var a;return e.showSpinner&&(a=new mF({shape:{startAngle:-Xx/2,endAngle:-Xx/2+.1,r:e.spinnerRadius},style:{stroke:e.color,lineCap:"round",lineWidth:e.lineWidth},zlevel:e.zlevel,z:10001}),a.animateShape(!0).when(1e3,{endAngle:Xx*3/2}).start("circularInOut"),a.animateShape(!0).when(1e3,{startAngle:Xx*3/2}).delay(300).start("circularInOut"),n.add(a)),n.resize=function(){var s=i.getBoundingRect().width,l=e.showSpinner?e.spinnerRadius:0,u=(t.getWidth()-l*2-(e.showSpinner&&s?10:0)-s)/2-(e.showSpinner&&s?0:5+s/2)+(e.showSpinner?0:s/2)+(s?0:l),c=t.getHeight()/2;e.showSpinner&&a.setShape({cx:u,cy:c}),o.setShape({x:u-l,y:c-l,width:l*2,height:l*2}),r.setShape({x:0,y:0,width:t.getWidth(),height:t.getHeight()})},n.resize(),n}var wLe=function(){function t(e,n,r,i){this._stageTaskMap=mn(),this.ecInstance=e,this.api=n,r=this._dataProcessorHandlers=r.slice(),i=this._visualHandlers=i.slice(),this._allHandlers=r.concat(i)}return t.prototype.restoreData=function(e,n){e.restoreData(n),this._stageTaskMap.each(function(r){var i=r.overallTask;i&&i.dirty()})},t.prototype.getPerformArgs=function(e,n){if(e.__pipeline){var r=this._pipelineMap.get(e.__pipeline.id),i=r.context,o=!n&&r.progressiveEnabled&&(!i||i.progressiveRender)&&e.__idxInPipeline>r.blockIndex,a=o?r.step:null,s=i&&i.modDataCount,l=s!=null?Math.ceil(s/a):null;return{step:a,modBy:l,modDataCount:s}}},t.prototype.getPipeline=function(e){return this._pipelineMap.get(e)},t.prototype.updateStreamModes=function(e,n){var r=this._pipelineMap.get(e.uid),i=e.getData(),o=i.count(),a=r.progressiveEnabled&&n.incrementalPrepareRender&&o>=r.threshold,s=e.get("large")&&o>=e.get("largeThreshold"),l=e.get("progressiveChunkMode")==="mod"?o:null;e.pipelineContext=r.context={progressiveRender:a,modDataCount:l,large:s}},t.prototype.restorePipelines=function(e){var n=this,r=n._pipelineMap=mn();e.eachSeries(function(i){var o=i.getProgressive(),a=i.uid;r.set(a,{id:a,head:null,tail:null,threshold:i.getProgressiveThreshold(),progressiveEnabled:o&&!(i.preventIncremental&&i.preventIncremental()),blockIndex:-1,step:Math.round(o||700),count:0}),n._pipe(i,i.dataTask)})},t.prototype.prepareStageTasks=function(){var e=this._stageTaskMap,n=this.api.getModel(),r=this.api;be(this._allHandlers,function(i){var o=e.get(i.uid)||e.set(i.uid,{}),a="";Us(!(i.reset&&i.overallReset),a),i.reset&&this._createSeriesStageTask(i,o,n,r),i.overallReset&&this._createOverallStageTask(i,o,n,r)},this)},t.prototype.prepareView=function(e,n,r,i){var o=e.renderTask,a=o.context;a.model=n,a.ecModel=r,a.api=i,o.__block=!e.incrementalPrepareRender,this._pipe(n,o)},t.prototype.performDataProcessorTasks=function(e,n){this._performStageTasks(this._dataProcessorHandlers,e,n,{block:!0})},t.prototype.performVisualTasks=function(e,n,r){this._performStageTasks(this._visualHandlers,e,n,r)},t.prototype._performStageTasks=function(e,n,r,i){i=i||{};var o=!1,a=this;be(e,function(l,u){if(!(i.visualType&&i.visualType!==l.visualType)){var c=a._stageTaskMap.get(l.uid),f=c.seriesTaskMap,h=c.overallTask;if(h){var d,g=h.agentStubMap;g.each(function(_){s(i,_)&&(_.dirty(),d=!0)}),d&&h.dirty(),a.updatePayload(h,r);var y=a.getPerformArgs(h,i.block);g.each(function(_){_.perform(y)}),h.perform(y)&&(o=!0)}else f&&f.each(function(_,v){s(i,_)&&_.dirty();var S=a.getPerformArgs(_,i.block);S.skip=!l.performRawSeries&&n.isSeriesFiltered(_.context.model),a.updatePayload(_,r),_.perform(S)&&(o=!0)})}});function s(l,u){return l.setDirty&&(!l.dirtyMap||l.dirtyMap.get(u.__pipeline.id))}this.unfinished=o||this.unfinished},t.prototype.performSeriesTasks=function(e){var n;e.eachSeries(function(r){n=r.dataTask.perform()||n}),this.unfinished=n||this.unfinished},t.prototype.plan=function(){this._pipelineMap.each(function(e){var n=e.tail;do{if(n.__block){e.blockIndex=n.__idxInPipeline;break}n=n.getUpstream()}while(n)})},t.prototype.updatePayload=function(e,n){n!=="remain"&&(e.context.payload=n)},t.prototype._createSeriesStageTask=function(e,n,r,i){var o=this,a=n.seriesTaskMap,s=n.seriesTaskMap=mn(),l=e.seriesType,u=e.getTargetSeries;e.createOnAllSeries?r.eachRawSeries(c):l?r.eachRawSeriesByType(l,c):u&&u(r,i).each(c);function c(f){var h=f.uid,d=s.set(h,a&&a.get(h)||s1({plan:ALe,reset:ELe,count:OLe}));d.context={model:f,ecModel:r,api:i,useClearVisual:e.isVisual&&!e.isLayout,plan:e.plan,reset:e.reset,scheduler:o},o._pipe(f,d)}},t.prototype._createOverallStageTask=function(e,n,r,i){var o=this,a=n.overallTask=n.overallTask||s1({reset:xLe});a.context={ecModel:r,api:i,overallReset:e.overallReset,scheduler:o};var s=a.agentStubMap,l=a.agentStubMap=mn(),u=e.seriesType,c=e.getTargetSeries,f=!0,h=!1,d="";Us(!e.createOnAllSeries,d),u?r.eachRawSeriesByType(u,g):c?c(r,i).each(g):(f=!1,be(r.getSeries(),g));function g(y){var _=y.uid,v=l.set(_,s&&s.get(_)||(h=!0,s1({reset:CLe,onDirty:TLe})));v.context={model:y,overallProgress:f},v.agent=a,v.__block=f,o._pipe(y,v)}h&&a.dirty()},t.prototype._pipe=function(e,n){var r=e.uid,i=this._pipelineMap.get(r);!i.head&&(i.head=n),i.tail&&i.tail.pipe(n),i.tail=n,n.__idxInPipeline=i.count++,n.__pipeline=i},t.wrapStageHandler=function(e,n){return Qn(e)&&(e={overallReset:e,seriesType:ILe(e)}),e.uid=qA("stageHandler"),n&&(e.visualType=n),e},t}();function xLe(t){t.overallReset(t.ecModel,t.api,t.payload)}function CLe(t){return t.overallProgress&&kLe}function kLe(){this.agent.dirty(),this.getDownstream().dirty()}function TLe(){this.agent&&this.agent.dirty()}function ALe(t){return t.plan?t.plan(t.model,t.ecModel,t.api,t.payload):null}function ELe(t){t.useClearVisual&&t.data.clearAllVisual();var e=t.resetDefines=Zo(t.reset(t.model,t.ecModel,t.api,t.payload));return e.length>1?Qt(e,function(n,r){return Zne(r)}):PLe}var PLe=Zne(0);function Zne(t){return function(e,n){var r=n.data,i=n.resetDefines[t];if(i&&i.dataEach)for(var o=e.start;o<e.end;o++)i.dataEach(r,o);else i&&i.progress&&i.progress(e,r)}}function OLe(t){return t.data.count()}function ILe(t){Xk=null;try{t(o_,Qne)}catch{}return Xk}var o_={},Qne={},Xk;ere(o_,Pne);ere(Qne,One);o_.eachSeriesByType=o_.eachRawSeriesByType=function(t){Xk=t};o_.eachComponent=function(t){t.mainType==="series"&&t.subType&&(Xk=t.subType)};function ere(t,e){for(var n in e.prototype)t[n]=Jo}const tre=wLe;var Zj=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const $Le={color:Zj,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],Zj]};var da="#B9B8CE",Qj="#100C2A",Jx=function(){return{axisLine:{lineStyle:{color:da}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},eU=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],nre={darkMode:!0,color:eU,backgroundColor:Qj,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:da}},textStyle:{color:da},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:da}},dataZoom:{borderColor:"#71708A",textStyle:{color:da},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:da}},timeline:{lineStyle:{color:da},label:{color:da},controlStyle:{color:da,borderColor:da}},calendar:{itemStyle:{color:Qj},dayLabel:{color:da},monthLabel:{color:da},yearLabel:{color:da}},timeAxis:Jx(),logAxis:Jx(),valueAxis:Jx(),categoryAxis:Jx(),line:{symbol:"circle"},graph:{color:eU},gauge:{title:{color:da},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:da},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};nre.categoryAxis.splitLine.show=!1;const LLe=nre;var DLe=function(){function t(){}return t.prototype.normalizeQuery=function(e){var n={},r={},i={};if(Pt(e)){var o=sc(e);n.mainType=o.main||null,n.subType=o.sub||null}else{var a=["Index","Name","Id"],s={name:1,dataIndex:1,dataType:1};be(e,function(l,u){for(var c=!1,f=0;f<a.length;f++){var h=a[f],d=u.lastIndexOf(h);if(d>0&&d===u.length-h.length){var g=u.slice(0,d);g!=="data"&&(n.mainType=g,n[h.toLowerCase()]=l,c=!0)}}s.hasOwnProperty(u)&&(r[u]=l,c=!0),c||(i[u]=l)})}return{cptQuery:n,dataQuery:r,otherQuery:i}},t.prototype.filter=function(e,n){var r=this.eventInfo;if(!r)return!0;var i=r.targetEl,o=r.packedEvent,a=r.model,s=r.view;if(!a||!s)return!0;var l=n.cptQuery,u=n.dataQuery;return c(l,a,"mainType")&&c(l,a,"subType")&&c(l,a,"index","componentIndex")&&c(l,a,"name")&&c(l,a,"id")&&c(u,o,"name")&&c(u,o,"dataIndex")&&c(u,o,"dataType")&&(!s.filterForExposedEvent||s.filterForExposedEvent(e,n.otherQuery,i,o));function c(f,h,d,g){return f[d]==null||h[g||d]===f[d]}},t.prototype.afterTrigger=function(){this.eventInfo=null},t}(),FL=["symbol","symbolSize","symbolRotate","symbolOffset"],tU=FL.concat(["symbolKeepAspect"]),MLe={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){var n=t.getData();if(t.legendIcon&&n.setVisual("legendIcon",t.legendIcon),!t.hasSymbolVisual)return;for(var r={},i={},o=!1,a=0;a<FL.length;a++){var s=FL[a],l=t.get(s);Qn(l)?(o=!0,i[s]=l):r[s]=l}if(r.symbol=r.symbol||t.defaultSymbol,n.setVisual(ot({legendIcon:t.legendIcon||r.symbol,symbolKeepAspect:t.get("symbolKeepAspect")},r)),e.isSeriesFiltered(t))return;var u=ir(i);function c(f,h){for(var d=t.getRawValue(h),g=t.getDataParams(h),y=0;y<u.length;y++){var _=u[y];f.setItemVisual(h,_,i[_](d,g))}}return{dataEach:o?c:null}}},NLe={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){if(!t.hasSymbolVisual||e.isSeriesFiltered(t))return;var n=t.getData();function r(i,o){for(var a=i.getItemModel(o),s=0;s<tU.length;s++){var l=tU[s],u=a.getShallow(l,!0);u!=null&&i.setItemVisual(o,l,u)}}return{dataEach:n.hasItemOption?r:null}}};function FLe(t,e,n){switch(n){case"color":var r=t.getItemVisual(e,"style");return r[t.getVisual("drawType")];case"opacity":return t.getItemVisual(e,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return t.getItemVisual(e,n)}}function RLe(t,e){switch(e){case"color":var n=t.getVisual("style");return n[t.getVisual("drawType")];case"opacity":return t.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return t.getVisual(e)}}function VLe(t,e){function n(r,i){var o=[];return r.eachComponent({mainType:"series",subType:t,query:i},function(a){o.push(a.seriesIndex)}),o}be([[t+"ToggleSelect","toggleSelect"],[t+"Select","select"],[t+"UnSelect","unselect"]],function(r){e(r[0],function(i,o,a){i=ot({},i),a.dispatchAction(ot(i,{type:r[1],seriesIndex:n(o,i)}))})})}function $m(t,e,n,r,i){var o=t+e;n.isSilent(o)||r.eachComponent({mainType:"series",subType:"pie"},function(a){for(var s=a.seriesIndex,l=a.option.selectedMap,u=i.selected,c=0;c<u.length;c++)if(u[c].seriesIndex===s){var f=a.getData(),h=cS(f,i.fromActionPayload);n.trigger(o,{type:o,seriesId:a.id,name:mt(h)?f.getName(h[0]):f.getName(h),selected:Pt(l)?l:ot({},l)})}})}function BLe(t,e,n){t.on("selectchanged",function(r){var i=n.getModel();r.isFromClick?($m("map","selectchanged",e,i,r),$m("pie","selectchanged",e,i,r)):r.fromAction==="select"?($m("map","selected",e,i,r),$m("pie","selected",e,i,r)):r.fromAction==="unselect"&&($m("map","unselected",e,i,r),$m("pie","unselected",e,i,r))})}function $b(t,e,n){for(var r;t&&!(e(t)&&(r=t,n));)t=t.__hostTarget||t.parent;return r}var zLe=Math.round(Math.random()*9),jLe=typeof Object.defineProperty=="function",ULe=function(){function t(){this._id="__ec_inner_"+zLe++}return t.prototype.get=function(e){return this._guard(e)[this._id]},t.prototype.set=function(e,n){var r=this._guard(e);return jLe?Object.defineProperty(r,this._id,{value:n,enumerable:!1,configurable:!0}):r[this._id]=n,this},t.prototype.delete=function(e){return this.has(e)?(delete this._guard(e)[this._id],!0):!1},t.prototype.has=function(e){return!!this._guard(e)[this._id]},t.prototype._guard=function(e){if(e!==Object(e))throw TypeError("Value of WeakMap is not a non-null object.");return e},t}();const WLe=ULe;var HLe=Lr.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,r=e.cy,i=e.width/2,o=e.height/2;t.moveTo(n,r-o),t.lineTo(n+i,r+o),t.lineTo(n-i,r+o),t.closePath()}}),GLe=Lr.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,r=e.cy,i=e.width/2,o=e.height/2;t.moveTo(n,r-o),t.lineTo(n+i,r),t.lineTo(n,r+o),t.lineTo(n-i,r),t.closePath()}}),qLe=Lr.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.x,r=e.y,i=e.width/5*3,o=Math.max(i,e.height),a=i/2,s=a*a/(o-a),l=r-o+a+s,u=Math.asin(s/a),c=Math.cos(u)*a,f=Math.sin(u),h=Math.cos(u),d=a*.6,g=a*.7;t.moveTo(n-c,l+s),t.arc(n,l,a,Math.PI-u,Math.PI*2+u),t.bezierCurveTo(n+c-f*d,l+s+h*d,n,r-g,n,r),t.bezierCurveTo(n,r-g,n-c+f*d,l+s+h*d,n-c,l+s),t.closePath()}}),YLe=Lr.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.height,r=e.width,i=e.x,o=e.y,a=r/3*2;t.moveTo(i,o),t.lineTo(i+a,o+n),t.lineTo(i,o+n/4*3),t.lineTo(i-a,o+n),t.lineTo(i,o),t.closePath()}}),KLe={line:pS,rect:Qo,roundRect:Qo,square:Qo,circle:gF,diamond:GLe,pin:qLe,arrow:YLe,triangle:HLe},XLe={line:function(t,e,n,r,i){i.x1=t,i.y1=e+r/2,i.x2=t+n,i.y2=e+r/2},rect:function(t,e,n,r,i){i.x=t,i.y=e,i.width=n,i.height=r},roundRect:function(t,e,n,r,i){i.x=t,i.y=e,i.width=n,i.height=r,i.r=Math.min(n,r)/4},square:function(t,e,n,r,i){var o=Math.min(n,r);i.x=t,i.y=e,i.width=o,i.height=o},circle:function(t,e,n,r,i){i.cx=t+n/2,i.cy=e+r/2,i.r=Math.min(n,r)/2},diamond:function(t,e,n,r,i){i.cx=t+n/2,i.cy=e+r/2,i.width=n,i.height=r},pin:function(t,e,n,r,i){i.x=t+n/2,i.y=e+r/2,i.width=n,i.height=r},arrow:function(t,e,n,r,i){i.x=t+n/2,i.y=e+r/2,i.width=n,i.height=r},triangle:function(t,e,n,r,i){i.cx=t+n/2,i.cy=e+r/2,i.width=n,i.height=r}},RL={};be(KLe,function(t,e){RL[e]=new t});var JLe=Lr.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(t,e,n){var r=nte(t,e,n),i=this.shape;return i&&i.symbolType==="pin"&&e.position==="inside"&&(r.y=n.y+n.height*.4),r},buildPath:function(t,e,n){var r=e.symbolType;if(r!=="none"){var i=RL[r];i||(r="rect",i=RL[r]),XLe[r](e.x,e.y,e.width,e.height,i.shape),i.buildPath(t,i.shape,n)}}});function ZLe(t,e){if(this.type!=="image"){var n=this.style;this.__isEmptyBrush?(n.stroke=t,n.fill=e||"#fff",n.lineWidth=2):this.shape.symbolType==="line"?n.stroke=t:n.fill=t,this.markRedraw()}}function NF(t,e,n,r,i,o,a){var s=t.indexOf("empty")===0;s&&(t=t.substr(5,1).toLowerCase()+t.substr(6));var l;return t.indexOf("image://")===0?l=une(t.slice(8),new Ir(e,n,r,i),a?"center":"cover"):t.indexOf("path://")===0?l=yF(t.slice(7),{},new Ir(e,n,r,i),a?"center":"cover"):l=new JLe({shape:{symbolType:t,x:e,y:n,width:r,height:i}}),l.__isEmptyBrush=s,l.setColor=ZLe,o&&l.setColor(o),l}function QLe(t,e){if(t!=null)return mt(t)||(t=[t,t]),[Kr(t[0],e[0])||0,Kr(gn(t[1],t[0]),e[1])||0]}function Yp(t){return isFinite(t)}function eDe(t,e,n){var r=e.x==null?0:e.x,i=e.x2==null?1:e.x2,o=e.y==null?0:e.y,a=e.y2==null?0:e.y2;e.global||(r=r*n.width+n.x,i=i*n.width+n.x,o=o*n.height+n.y,a=a*n.height+n.y),r=Yp(r)?r:0,i=Yp(i)?i:1,o=Yp(o)?o:0,a=Yp(a)?a:0;var s=t.createLinearGradient(r,o,i,a);return s}function tDe(t,e,n){var r=n.width,i=n.height,o=Math.min(r,i),a=e.x==null?.5:e.x,s=e.y==null?.5:e.y,l=e.r==null?.5:e.r;e.global||(a=a*r+n.x,s=s*i+n.y,l=l*o),a=Yp(a)?a:.5,s=Yp(s)?s:.5,l=l>=0&&Yp(l)?l:.5;var u=t.createRadialGradient(a,s,0,a,s,l);return u}function VL(t,e,n){for(var r=e.type==="radial"?tDe(t,e,n):eDe(t,e,n),i=e.colorStops,o=0;o<i.length;o++)r.addColorStop(i[o].offset,i[o].color);return r}function nDe(t,e){if(t===e||!t&&!e)return!1;if(!t||!e||t.length!==e.length)return!0;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!0;return!1}function Zx(t){return parseInt(t,10)}function pv(t,e,n){var r=["width","height"][e],i=["clientWidth","clientHeight"][e],o=["paddingLeft","paddingTop"][e],a=["paddingRight","paddingBottom"][e];if(n[r]!=null&&n[r]!=="auto")return parseFloat(n[r]);var s=document.defaultView.getComputedStyle(t);return(t[i]||Zx(s[r])||Zx(t.style[r]))-(Zx(s[o])||0)-(Zx(s[a])||0)|0}function rDe(t,e){return!t||t==="solid"||!(e>0)?null:t==="dashed"?[4*e,2*e]:t==="dotted"?[e]:Zr(t)?[t]:mt(t)?t:null}function FF(t){var e=t.style,n=e.lineDash&&e.lineWidth>0&&rDe(e.lineDash,e.lineWidth),r=e.lineDashOffset;if(n){var i=e.strokeNoScale&&t.getLineScale?t.getLineScale():1;i&&i!==1&&(n=Qt(n,function(o){return o/i}),r/=i)}return[n,r]}var iDe=new sd(!0);function Jk(t){var e=t.stroke;return!(e==null||e==="none"||!(t.lineWidth>0))}function nU(t){return typeof t=="string"&&t!=="none"}function Zk(t){var e=t.fill;return e!=null&&e!=="none"}function rU(t,e){if(e.fillOpacity!=null&&e.fillOpacity!==1){var n=t.globalAlpha;t.globalAlpha=e.fillOpacity*e.opacity,t.fill(),t.globalAlpha=n}else t.fill()}function iU(t,e){if(e.strokeOpacity!=null&&e.strokeOpacity!==1){var n=t.globalAlpha;t.globalAlpha=e.strokeOpacity*e.opacity,t.stroke(),t.globalAlpha=n}else t.stroke()}function BL(t,e,n){var r=uF(e.image,e.__image,n);if(jA(r)){var i=t.createPattern(r,e.repeat||"repeat");if(typeof DOMMatrix=="function"&&i&&i.setTransform){var o=new DOMMatrix;o.translateSelf(e.x||0,e.y||0),o.rotateSelf(0,0,(e.rotation||0)*u2),o.scaleSelf(e.scaleX||1,e.scaleY||1),i.setTransform(o)}return i}}function oDe(t,e,n,r){var i,o=Jk(n),a=Zk(n),s=n.strokePercent,l=s<1,u=!e.path;(!e.silent||l)&&u&&e.createPathProxy();var c=e.path||iDe,f=e.__dirty;if(!r){var h=n.fill,d=n.stroke,g=a&&!!h.colorStops,y=o&&!!d.colorStops,_=a&&!!h.image,v=o&&!!d.image,S=void 0,C=void 0,k=void 0,x=void 0,m=void 0;(g||y)&&(m=e.getBoundingRect()),g&&(S=f?VL(t,h,m):e.__canvasFillGradient,e.__canvasFillGradient=S),y&&(C=f?VL(t,d,m):e.__canvasStrokeGradient,e.__canvasStrokeGradient=C),_&&(k=f||!e.__canvasFillPattern?BL(t,h,e):e.__canvasFillPattern,e.__canvasFillPattern=k),v&&(x=f||!e.__canvasStrokePattern?BL(t,d,e):e.__canvasStrokePattern,e.__canvasStrokePattern=k),g?t.fillStyle=S:_&&(k?t.fillStyle=k:a=!1),y?t.strokeStyle=C:v&&(x?t.strokeStyle=x:o=!1)}var T=e.getGlobalScale();c.setScale(T[0],T[1],e.segmentIgnoreThreshold);var P,I;t.setLineDash&&n.lineDash&&(i=FF(e),P=i[0],I=i[1]);var M=!0;(u||f&Ym)&&(c.setDPR(t.dpr),l?c.setContext(null):(c.setContext(t),M=!1),c.reset(),e.buildPath(c,e.shape,r),c.toStatic(),e.pathUpdated()),M&&c.rebuildPath(t,l?s:1),P&&(t.setLineDash(P),t.lineDashOffset=I),r||(n.strokeFirst?(o&&iU(t,n),a&&rU(t,n)):(a&&rU(t,n),o&&iU(t,n))),P&&t.setLineDash([])}function aDe(t,e,n){var r=e.__image=uF(n.image,e.__image,e,e.onload);if(!(!r||!jA(r))){var i=n.x||0,o=n.y||0,a=e.getWidth(),s=e.getHeight(),l=r.width/r.height;if(a==null&&s!=null?a=s*l:s==null&&a!=null?s=a/l:a==null&&s==null&&(a=r.width,s=r.height),n.sWidth&&n.sHeight){var u=n.sx||0,c=n.sy||0;t.drawImage(r,u,c,n.sWidth,n.sHeight,i,o,a,s)}else if(n.sx&&n.sy){var u=n.sx,c=n.sy,f=a-u,h=s-c;t.drawImage(r,u,c,f,h,i,o,a,s)}else t.drawImage(r,i,o,a,s)}}function sDe(t,e,n){var r,i=n.text;if(i!=null&&(i+=""),i){t.font=n.font||od,t.textAlign=n.textAlign,t.textBaseline=n.textBaseline;var o=void 0,a=void 0;t.setLineDash&&n.lineDash&&(r=FF(e),o=r[0],a=r[1]),o&&(t.setLineDash(o),t.lineDashOffset=a),n.strokeFirst?(Jk(n)&&t.strokeText(i,n.x,n.y),Zk(n)&&t.fillText(i,n.x,n.y)):(Zk(n)&&t.fillText(i,n.x,n.y),Jk(n)&&t.strokeText(i,n.x,n.y)),o&&t.setLineDash([])}}var oU=["shadowBlur","shadowOffsetX","shadowOffsetY"],aU=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function rre(t,e,n,r,i){var o=!1;if(!r&&(n=n||{},e===n))return!1;if(r||e.opacity!==n.opacity){ts(t,i),o=!0;var a=Math.max(Math.min(e.opacity,1),0);t.globalAlpha=isNaN(a)?ag.opacity:a}(r||e.blend!==n.blend)&&(o||(ts(t,i),o=!0),t.globalCompositeOperation=e.blend||ag.blend);for(var s=0;s<oU.length;s++){var l=oU[s];(r||e[l]!==n[l])&&(o||(ts(t,i),o=!0),t[l]=t.dpr*(e[l]||0))}return(r||e.shadowColor!==n.shadowColor)&&(o||(ts(t,i),o=!0),t.shadowColor=e.shadowColor||ag.shadowColor),o}function sU(t,e,n,r,i){var o=a_(e,i.inHover),a=r?null:n&&a_(n,i.inHover)||{};if(o===a)return!1;var s=rre(t,o,a,r,i);if((r||o.fill!==a.fill)&&(s||(ts(t,i),s=!0),nU(o.fill)&&(t.fillStyle=o.fill)),(r||o.stroke!==a.stroke)&&(s||(ts(t,i),s=!0),nU(o.stroke)&&(t.strokeStyle=o.stroke)),(r||o.opacity!==a.opacity)&&(s||(ts(t,i),s=!0),t.globalAlpha=o.opacity==null?1:o.opacity),e.hasStroke()){var l=o.lineWidth,u=l/(o.strokeNoScale&&e.getLineScale?e.getLineScale():1);t.lineWidth!==u&&(s||(ts(t,i),s=!0),t.lineWidth=u)}for(var c=0;c<aU.length;c++){var f=aU[c],h=f[0];(r||o[h]!==a[h])&&(s||(ts(t,i),s=!0),t[h]=o[h]||f[1])}return s}function lDe(t,e,n,r,i){return rre(t,a_(e,i.inHover),n&&a_(n,i.inHover),r,i)}function ire(t,e){var n=e.transform,r=t.dpr||1;n?t.setTransform(r*n[0],r*n[1],r*n[2],r*n[3],r*n[4],r*n[5]):t.setTransform(r,0,0,r,0,0)}function uDe(t,e,n){for(var r=!1,i=0;i<t.length;i++){var o=t[i];r=r||o.isZeroArea(),ire(e,o),e.beginPath(),o.buildPath(e,o.shape),e.clip()}n.allClipped=r}function cDe(t,e){return t&&e?t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||t[4]!==e[4]||t[5]!==e[5]:!(!t&&!e)}var lU=1,uU=2,cU=3,fU=4;function fDe(t){var e=Zk(t),n=Jk(t);return!(t.lineDash||!(+e^+n)||e&&typeof t.fill!="string"||n&&typeof t.stroke!="string"||t.strokePercent<1||t.strokeOpacity<1||t.fillOpacity<1)}function ts(t,e){e.batchFill&&t.fill(),e.batchStroke&&t.stroke(),e.batchFill="",e.batchStroke=""}function a_(t,e){return e&&t.__hoverStyle||t.style}function ore(t,e){Kp(t,e,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function Kp(t,e,n,r){var i=e.transform;if(!e.shouldBePainted(n.viewWidth,n.viewHeight,!1,!1)){e.__dirty&=~Ms,e.__isRendered=!1;return}var o=e.__clipPaths,a=n.prevElClipPaths,s=!1,l=!1;if((!a||nDe(o,a))&&(a&&a.length&&(ts(t,n),t.restore(),l=s=!0,n.prevElClipPaths=null,n.allClipped=!1,n.prevEl=null),o&&o.length&&(ts(t,n),t.save(),uDe(o,t,n),s=!0),n.prevElClipPaths=o),n.allClipped){e.__isRendered=!1;return}e.beforeBrush&&e.beforeBrush(),e.innerBeforeBrush();var u=n.prevEl;u||(l=s=!0);var c=e instanceof Lr&&e.autoBatch&&fDe(e.style);s||cDe(i,u.transform)?(ts(t,n),ire(t,e)):c||ts(t,n);var f=a_(e,n.inHover);e instanceof Lr?(n.lastDrawType!==lU&&(l=!0,n.lastDrawType=lU),sU(t,e,u,l,n),(!c||!n.batchFill&&!n.batchStroke)&&t.beginPath(),oDe(t,e,f,c),c&&(n.batchFill=f.fill||"",n.batchStroke=f.stroke||"")):e instanceof Rk?(n.lastDrawType!==cU&&(l=!0,n.lastDrawType=cU),sU(t,e,u,l,n),sDe(t,e,f)):e instanceof gd?(n.lastDrawType!==uU&&(l=!0,n.lastDrawType=uU),lDe(t,e,u,l,n),aDe(t,e,f)):e.getTemporalDisplayables&&(n.lastDrawType!==fU&&(l=!0,n.lastDrawType=fU),hDe(t,e,n)),c&&r&&ts(t,n),e.innerAfterBrush(),e.afterBrush&&e.afterBrush(),n.prevEl=e,e.__dirty=0,e.__isRendered=!0}function hDe(t,e,n){var r=e.getDisplayables(),i=e.getTemporalDisplayables();t.save();var o={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:n.viewWidth,viewHeight:n.viewHeight,inHover:n.inHover},a,s;for(a=e.getCursor(),s=r.length;a<s;a++){var l=r[a];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),Kp(t,l,o,a===s-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),o.prevEl=l}for(var u=0,c=i.length;u<c;u++){var l=i[u];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),Kp(t,l,o,u===c-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),o.prevEl=l}e.clearTemporalDisplayables(),e.notClear=!0,t.restore()}var X3=new WLe,hU=new lS(100),dU=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function Qk(t,e){if(t==="none")return null;var n=e.getDevicePixelRatio(),r=e.getZr(),i=r.painter.type==="svg";t.dirty&&X3.delete(t);var o=X3.get(t);if(o)return o;var a=pi(t,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});a.backgroundColor==="none"&&(a.backgroundColor=null);var s={repeat:"repeat"};return l(s),s.rotation=a.rotation,s.scaleX=s.scaleY=i?1:1/n,X3.set(t,s),t.dirty=!1,s;function l(u){for(var c=[n],f=!0,h=0;h<dU.length;++h){var d=a[dU[h]];if(d!=null&&!mt(d)&&!Pt(d)&&!Zr(d)&&typeof d!="boolean"){f=!1;break}c.push(d)}var g;if(f){g=c.join(",")+(i?"-svg":"");var y=hU.get(g);y&&(i?u.svgElement=y:u.image=y)}var _=sre(a.dashArrayX),v=dDe(a.dashArrayY),S=are(a.symbol),C=pDe(_),k=lre(v),x=!i&&D0.createCanvas(),m=i&&{tag:"g",attrs:{},key:"dcl",children:[]},T=I(),P;x&&(x.width=T.width*n,x.height=T.height*n,P=x.getContext("2d")),M(),f&&hU.put(g,x||m),u.image=x,u.svgElement=m,u.svgWidth=T.width,u.svgHeight=T.height;function I(){for(var L=1,R=0,V=C.length;R<V;++R)L=Iz(L,C[R]);for(var z=1,R=0,V=S.length;R<V;++R)z=Iz(z,S[R].length);L*=z;var ie=k*C.length*S.length;return{width:Math.max(1,Math.min(L,a.maxTileWidth)),height:Math.max(1,Math.min(ie,a.maxTileHeight))}}function M(){P&&(P.clearRect(0,0,x.width,x.height),a.backgroundColor&&(P.fillStyle=a.backgroundColor,P.fillRect(0,0,x.width,x.height)));for(var L=0,R=0;R<v.length;++R)L+=v[R];if(L<=0)return;for(var V=-k,z=0,ie=0,oe=0;V<T.height;){if(z%2===0){for(var Se=ie/2%S.length,Ae=0,Ee=0,_e=0;Ae<T.width*2;){for(var se=0,R=0;R<_[oe].length;++R)se+=_[oe][R];if(se<=0)break;if(Ee%2===0){var ne=(1-a.symbolSize)*.5,J=Ae+_[oe][Ee]*ne,B=V+v[z]*ne,H=_[oe][Ee]*a.symbolSize,ae=v[z]*a.symbolSize,te=_e/2%S[Se].length;ce(J,B,H,ae,S[Se][te])}Ae+=_[oe][Ee],++_e,++Ee,Ee===_[oe].length&&(Ee=0)}++oe,oe===_.length&&(oe=0)}V+=v[z],++ie,++z,z===v.length&&(z=0)}function ce(ue,fe,ye,j,Y){var O=i?1:n,F=NF(Y,ue*O,fe*O,ye*O,j*O,a.color,a.symbolKeepAspect);if(i){var U=r.painter.renderOneToVNode(F);U&&m.children.push(U)}else ore(P,F)}}}}function are(t){if(!t||t.length===0)return[["rect"]];if(Pt(t))return[[t]];for(var e=!0,n=0;n<t.length;++n)if(!Pt(t[n])){e=!1;break}if(e)return are([t]);for(var r=[],n=0;n<t.length;++n)Pt(t[n])?r.push([t[n]]):r.push(t[n]);return r}function sre(t){if(!t||t.length===0)return[[0,0]];if(Zr(t)){var e=Math.ceil(t);return[[e,e]]}for(var n=!0,r=0;r<t.length;++r)if(!Zr(t[r])){n=!1;break}if(n)return sre([t]);for(var i=[],r=0;r<t.length;++r)if(Zr(t[r])){var e=Math.ceil(t[r]);i.push([e,e])}else{var e=Qt(t[r],function(s){return Math.ceil(s)});e.length%2===1?i.push(e.concat(e)):i.push(e)}return i}function dDe(t){if(!t||typeof t=="object"&&t.length===0)return[0,0];if(Zr(t)){var e=Math.ceil(t);return[e,e]}var n=Qt(t,function(r){return Math.ceil(r)});return t.length%2?n.concat(n):n}function pDe(t){return Qt(t,function(e){return lre(e)})}function lre(t){for(var e=0,n=0;n<t.length;++n)e+=t[n];return t.length%2===1?e*2:e}function gDe(t,e){t.eachRawSeries(function(n){if(!t.isSeriesFiltered(n)){var r=n.getData();r.hasItemVisual()&&r.each(function(a){var s=r.getItemVisual(a,"decal");if(s){var l=r.ensureUniqueItemVisual(a,"style");l.decal=Qk(s,e)}});var i=r.getVisual("decal");if(i){var o=r.getVisual("style");o.decal=Qk(i,e)}}})}var mDe=new xc;const eu=mDe;var ure={};function vDe(t,e){ure[t]=e}function yDe(t){return ure[t]}var bDe=1,_De=800,SDe=900,wDe=1e3,xDe=2e3,CDe=5e3,cre=1e3,kDe=1100,RF=2e3,fre=3e3,TDe=4e3,QA=4500,ADe=4600,EDe=5e3,PDe=6e3,hre=7e3,ODe={PROCESSOR:{FILTER:wDe,SERIES_FILTER:_De,STATISTIC:CDe},VISUAL:{LAYOUT:cre,PROGRESSIVE_LAYOUT:kDe,GLOBAL:RF,CHART:fre,POST_CHART_LAYOUT:ADe,COMPONENT:TDe,BRUSH:EDe,CHART_ITEM:QA,ARIA:PDe,DECAL:hre}},Vo="__flagInMainProcess",Ua="__pendingUpdate",J3="__needsUpdateStatus",pU=/^[a-zA-Z0-9_]+$/,Z3="__connectUpdateStatus",gU=0,IDe=1,$De=2;function dre(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(this.isDisposed()){this.id;return}return gre(this,t,e)}}function pre(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return gre(this,t,e)}}function gre(t,e,n){return n[0]=n[0]&&n[0].toLowerCase(),xc.prototype[e].apply(t,n)}var mre=function(t){Cr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(xc),vre=mre.prototype;vre.on=pre("on");vre.off=pre("off");var Lm,Q3,Qx,nh,eI,tI,nI,Xy,Jy,mU,vU,rI,yU,eC,bU,yre,al,_U,bre=function(t){Cr(e,t);function e(n,r,i){var o=t.call(this,new DLe)||this;o._chartsViews=[],o._chartsMap={},o._componentsViews=[],o._componentsMap={},o._pendingActions=[],i=i||{},Pt(r)&&(r=_re[r]),o._dom=n;var a="canvas",s="auto",l=!1,u=o._zr=Ez(n,{renderer:i.renderer||a,devicePixelRatio:i.devicePixelRatio,width:i.width,height:i.height,ssr:i.ssr,useDirtyRect:gn(i.useDirtyRect,l),useCoarsePointer:gn(i.useCoarsePointer,s),pointerSize:i.pointerSize});o._ssr=i.ssr,o._throttledZrFlush=MF(Or(u.flush,u),17),r=Gn(r),r&&$ne(r,!0),o._theme=r,o._locale=I4e(i.locale||mne),o._coordSysMgr=new KA;var c=o._api=bU(o);function f(h,d){return h.__prio-d.__prio}return c2(tT,f),c2(zL,f),o._scheduler=new tre(o,c,zL,tT),o._messageCenter=new mre,o._initEvents(),o.resize=Or(o.resize,o),u.animation.on("frame",o._onframe,o),mU(u,o),vU(u,o),K$(o),o}return e.prototype._onframe=function(){if(!this._disposed){_U(this);var n=this._scheduler;if(this[Ua]){var r=this[Ua].silent;this[Vo]=!0;try{Lm(this),nh.update.call(this,null,this[Ua].updateParams)}catch(l){throw this[Vo]=!1,this[Ua]=null,l}this._zr.flush(),this[Vo]=!1,this[Ua]=null,Xy.call(this,r),Jy.call(this,r)}else if(n.unfinished){var i=bDe,o=this._model,a=this._api;n.unfinished=!1;do{var s=+new Date;n.performSeriesTasks(o),n.performDataProcessorTasks(o),tI(this,o),n.performVisualTasks(o),eC(this,this._model,a,"remain",{}),i-=+new Date-s}while(i>0&&n.unfinished);n.unfinished||this._zr.flush()}}},e.prototype.getDom=function(){return this._dom},e.prototype.getId=function(){return this.id},e.prototype.getZr=function(){return this._zr},e.prototype.isSSR=function(){return this._ssr},e.prototype.setOption=function(n,r,i){if(!this[Vo]){if(this._disposed){this.id;return}var o,a,s;if(Bt(r)&&(i=r.lazyUpdate,o=r.silent,a=r.replaceMerge,s=r.transition,r=r.notMerge),this[Vo]=!0,!this._model||r){var l=new m$e(this._api),u=this._theme,c=this._model=new Pne;c.scheduler=this._scheduler,c.ssr=this._ssr,c.init(null,null,null,u,this._locale,l)}this._model.setOption(n,{replaceMerge:a},jL);var f={seriesTransition:s,optionChanged:!0};if(i)this[Ua]={silent:o,updateParams:f},this[Vo]=!1,this.getZr().wakeUp();else{try{Lm(this),nh.update.call(this,null,f)}catch(h){throw this[Ua]=null,this[Vo]=!1,h}this._ssr||this._zr.flush(),this[Ua]=null,this[Vo]=!1,Xy.call(this,o),Jy.call(this,o)}}},e.prototype.setTheme=function(){},e.prototype.getModel=function(){return this._model},e.prototype.getOption=function(){return this._model&&this._model.getOption()},e.prototype.getWidth=function(){return this._zr.getWidth()},e.prototype.getHeight=function(){return this._zr.getHeight()},e.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||En.hasGlobalWindow&&window.devicePixelRatio||1},e.prototype.getRenderedCanvas=function(n){return this.renderToCanvas(n)},e.prototype.renderToCanvas=function(n){n=n||{};var r=this._zr.painter;return r.getRenderedCanvas({backgroundColor:n.backgroundColor||this._model.get("backgroundColor"),pixelRatio:n.pixelRatio||this.getDevicePixelRatio()})},e.prototype.renderToSVGString=function(n){n=n||{};var r=this._zr.painter;return r.renderToString({useViewBox:n.useViewBox})},e.prototype.getSvgDataURL=function(){if(En.svgSupported){var n=this._zr,r=n.storage.getDisplayList();return be(r,function(i){i.stopAnimation(null,!0)}),n.painter.toDataURL()}},e.prototype.getDataURL=function(n){if(this._disposed){this.id;return}n=n||{};var r=n.excludeComponents,i=this._model,o=[],a=this;be(r,function(l){i.eachComponent({mainType:l},function(u){var c=a._componentsMap[u.__viewId];c.group.ignore||(o.push(c),c.group.ignore=!0)})});var s=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(n).toDataURL("image/"+(n&&n.type||"png"));return be(o,function(l){l.group.ignore=!1}),s},e.prototype.getConnectedDataURL=function(n){if(this._disposed){this.id;return}var r=n.type==="svg",i=this.group,o=Math.min,a=Math.max,s=1/0;if(SU[i]){var l=s,u=s,c=-s,f=-s,h=[],d=n&&n.pixelRatio||this.getDevicePixelRatio();be(u1,function(C,k){if(C.group===i){var x=r?C.getZr().painter.getSvgDom().innerHTML:C.renderToCanvas(Gn(n)),m=C.getDom().getBoundingClientRect();l=o(m.left,l),u=o(m.top,u),c=a(m.right,c),f=a(m.bottom,f),h.push({dom:x,left:m.left,top:m.top})}}),l*=d,u*=d,c*=d,f*=d;var g=c-l,y=f-u,_=D0.createCanvas(),v=Ez(_,{renderer:r?"svg":"canvas"});if(v.resize({width:g,height:y}),r){var S="";return be(h,function(C){var k=C.left-l,x=C.top-u;S+='<g transform="translate('+k+","+x+')">'+C.dom+"</g>"}),v.painter.getSvgRoot().innerHTML=S,n.connectedBackgroundColor&&v.painter.setBackgroundColor(n.connectedBackgroundColor),v.refreshImmediately(),v.painter.toDataURL()}else return n.connectedBackgroundColor&&v.add(new Qo({shape:{x:0,y:0,width:g,height:y},style:{fill:n.connectedBackgroundColor}})),be(h,function(C){var k=new gd({style:{x:C.left*d-l,y:C.top*d-u,image:C.dom}});v.add(k)}),v.refreshImmediately(),_.toDataURL("image/"+(n&&n.type||"png"))}else return this.getDataURL(n)},e.prototype.convertToPixel=function(n,r){return eI(this,"convertToPixel",n,r)},e.prototype.convertFromPixel=function(n,r){return eI(this,"convertFromPixel",n,r)},e.prototype.containPixel=function(n,r){if(this._disposed){this.id;return}var i=this._model,o,a=C3(i,n);return be(a,function(s,l){l.indexOf("Models")>=0&&be(s,function(u){var c=u.coordinateSystem;if(c&&c.containPoint)o=o||!!c.containPoint(r);else if(l==="seriesModels"){var f=this._chartsMap[u.__viewId];f&&f.containPoint&&(o=o||f.containPoint(r,u))}},this)},this),!!o},e.prototype.getVisual=function(n,r){var i=this._model,o=C3(i,n,{defaultMainType:"series"}),a=o.seriesModel,s=a.getData(),l=o.hasOwnProperty("dataIndexInside")?o.dataIndexInside:o.hasOwnProperty("dataIndex")?s.indexOfRawIndex(o.dataIndex):null;return l!=null?FLe(s,l,r):RLe(s,r)},e.prototype.getViewOfComponentModel=function(n){return this._componentsMap[n.__viewId]},e.prototype.getViewOfSeriesModel=function(n){return this._chartsMap[n.__viewId]},e.prototype._initEvents=function(){var n=this;be(LDe,function(r){var i=function(o){var a=n.getModel(),s=o.target,l,u=r==="globalout";if(u?l={}:s&&$b(s,function(g){var y=Br(g);if(y&&y.dataIndex!=null){var _=y.dataModel||a.getSeriesByIndex(y.seriesIndex);return l=_&&_.getDataParams(y.dataIndex,y.dataType,s)||{},!0}else if(y.eventData)return l=ot({},y.eventData),!0},!0),l){var c=l.componentType,f=l.componentIndex;(c==="markLine"||c==="markPoint"||c==="markArea")&&(c="series",f=l.seriesIndex);var h=c&&f!=null&&a.getComponent(c,f),d=h&&n[h.mainType==="series"?"_chartsMap":"_componentsMap"][h.__viewId];l.event=o,l.type=r,n._$eventProcessor.eventInfo={targetEl:s,packedEvent:l,model:h,view:d},n.trigger(r,l)}};i.zrEventfulCallAtLast=!0,n._zr.on(r,i,n)}),be(l1,function(r,i){n._messageCenter.on(i,function(o){this.trigger(i,o)},n)}),be(["selectchanged"],function(r){n._messageCenter.on(r,function(i){this.trigger(r,i)},n)}),BLe(this._messageCenter,this,this._api)},e.prototype.isDisposed=function(){return this._disposed},e.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},e.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var n=this.getDom();n&&dte(this.getDom(),BF,"");var r=this,i=r._api,o=r._model;be(r._componentsViews,function(a){a.dispose(o,i)}),be(r._chartsViews,function(a){a.dispose(o,i)}),r._zr.dispose(),r._dom=r._model=r._chartsMap=r._componentsMap=r._chartsViews=r._componentsViews=r._scheduler=r._api=r._zr=r._throttledZrFlush=r._theme=r._coordSysMgr=r._messageCenter=null,delete u1[r.id]},e.prototype.resize=function(n){if(!this[Vo]){if(this._disposed){this.id;return}this._zr.resize(n);var r=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!r){var i=r.resetOption("media"),o=n&&n.silent;this[Ua]&&(o==null&&(o=this[Ua].silent),i=!0,this[Ua]=null),this[Vo]=!0;try{i&&Lm(this),nh.update.call(this,{type:"resize",animation:ot({duration:0},n&&n.animation)})}catch(a){throw this[Vo]=!1,a}this[Vo]=!1,Xy.call(this,o),Jy.call(this,o)}}},e.prototype.showLoading=function(n,r){if(this._disposed){this.id;return}if(Bt(n)&&(r=n,n=""),n=n||"default",this.hideLoading(),!!UL[n]){var i=UL[n](this._api,r),o=this._zr;this._loadingFX=i,o.add(i)}},e.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},e.prototype.makeActionFromEvent=function(n){var r=ot({},n);return r.type=l1[n.type],r},e.prototype.dispatchAction=function(n,r){if(this._disposed){this.id;return}if(Bt(r)||(r={silent:!!r}),!!eT[n.type]&&this._model){if(this[Vo]){this._pendingActions.push(n);return}var i=r.silent;nI.call(this,n,i);var o=r.flush;o?this._zr.flush():o!==!1&&En.browser.weChat&&this._throttledZrFlush(),Xy.call(this,i),Jy.call(this,i)}},e.prototype.updateLabelLayout=function(){eu.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},e.prototype.appendData=function(n){if(this._disposed){this.id;return}var r=n.seriesIndex,i=this.getModel(),o=i.getSeriesByIndex(r);o.appendData(n),this._scheduler.unfinished=!0,this.getZr().wakeUp()},e.internalField=function(){Lm=function(f){var h=f._scheduler;h.restorePipelines(f._model),h.prepareStageTasks(),Q3(f,!0),Q3(f,!1),h.plan()},Q3=function(f,h){for(var d=f._model,g=f._scheduler,y=h?f._componentsViews:f._chartsViews,_=h?f._componentsMap:f._chartsMap,v=f._zr,S=f._api,C=0;C<y.length;C++)y[C].__alive=!1;h?d.eachComponent(function(m,T){m!=="series"&&k(T)}):d.eachSeries(k);function k(m){var T=m.__requireNewView;m.__requireNewView=!1;var P="_ec_"+m.id+"_"+m.type,I=!T&&_[P];if(!I){var M=sc(m.type),L=h?ld.getClass(M.main,M.sub):Rh.getClass(M.sub);I=new L,I.init(d,S),_[P]=I,y.push(I),v.add(I.group)}m.__viewId=I.__id=P,I.__alive=!0,I.__model=m,I.group.__ecComponentInfo={mainType:m.mainType,index:m.componentIndex},!h&&g.prepareView(I,m,d,S)}for(var C=0;C<y.length;){var x=y[C];x.__alive?C++:(!h&&x.renderTask.dispose(),v.remove(x.group),x.dispose(d,S),y.splice(C,1),_[x.__id]===x&&delete _[x.__id],x.__id=x.group.__ecComponentInfo=null)}},Qx=function(f,h,d,g,y){var _=f._model;if(_.setUpdatePayload(d),!g){be([].concat(f._componentsViews).concat(f._chartsViews),x);return}var v={};v[g+"Id"]=d[g+"Id"],v[g+"Index"]=d[g+"Index"],v[g+"Name"]=d[g+"Name"];var S={mainType:g,query:v};y&&(S.subType=y);var C=d.excludeSeriesId,k;C!=null&&(k=mn(),be(Zo(C),function(m){var T=El(m,null);T!=null&&k.set(T,!0)})),_&&_.eachComponent(S,function(m){var T=k&&k.get(m.id)!=null;if(!T)if(ij(d))if(m instanceof Tg)d.type===sg&&!d.notBlur&&!m.get(["emphasis","disabled"])&&aIe(m,d,f._api);else{var P=pF(m.mainType,m.componentIndex,d.name,f._api),I=P.focusSelf,M=P.dispatchers;d.type===sg&&I&&!d.notBlur&&SL(m.mainType,m.componentIndex,f._api),M&&be(M,function(L){d.type===sg?Vk(L):Bk(L)})}else kL(d)&&m instanceof Tg&&(uIe(m,d,f._api),nj(m),al(f))},f),_&&_.eachComponent(S,function(m){var T=k&&k.get(m.id)!=null;T||x(f[g==="series"?"_chartsMap":"_componentsMap"][m.__viewId])},f);function x(m){m&&m.__alive&&m[h]&&m[h](m.__model,_,f._api,d)}},nh={prepareAndUpdate:function(f){Lm(this),nh.update.call(this,f,{optionChanged:f.newOption!=null})},update:function(f,h){var d=this._model,g=this._api,y=this._zr,_=this._coordSysMgr,v=this._scheduler;if(d){d.setUpdatePayload(f),v.restoreData(d,f),v.performSeriesTasks(d),_.create(d,g),v.performDataProcessorTasks(d,f),tI(this,d),_.update(d,g),n(d),v.performVisualTasks(d,f),rI(this,d,g,f,h);var S=d.get("backgroundColor")||"transparent",C=d.get("darkMode");y.setBackgroundColor(S),C!=null&&C!=="auto"&&y.setDarkMode(C),eu.trigger("afterupdate",d,g)}},updateTransform:function(f){var h=this,d=this._model,g=this._api;if(d){d.setUpdatePayload(f);var y=[];d.eachComponent(function(v,S){if(v!=="series"){var C=h.getViewOfComponentModel(S);if(C&&C.__alive)if(C.updateTransform){var k=C.updateTransform(S,d,g,f);k&&k.update&&y.push(C)}else y.push(C)}});var _=mn();d.eachSeries(function(v){var S=h._chartsMap[v.__viewId];if(S.updateTransform){var C=S.updateTransform(v,d,g,f);C&&C.update&&_.set(v.uid,1)}else _.set(v.uid,1)}),n(d),this._scheduler.performVisualTasks(d,f,{setDirty:!0,dirtyMap:_}),eC(this,d,g,f,{},_),eu.trigger("afterupdate",d,g)}},updateView:function(f){var h=this._model;h&&(h.setUpdatePayload(f),Rh.markUpdateMethod(f,"updateView"),n(h),this._scheduler.performVisualTasks(h,f,{setDirty:!0}),rI(this,h,this._api,f,{}),eu.trigger("afterupdate",h,this._api))},updateVisual:function(f){var h=this,d=this._model;d&&(d.setUpdatePayload(f),d.eachSeries(function(g){g.getData().clearAllVisual()}),Rh.markUpdateMethod(f,"updateVisual"),n(d),this._scheduler.performVisualTasks(d,f,{visualType:"visual",setDirty:!0}),d.eachComponent(function(g,y){if(g!=="series"){var _=h.getViewOfComponentModel(y);_&&_.__alive&&_.updateVisual(y,d,h._api,f)}}),d.eachSeries(function(g){var y=h._chartsMap[g.__viewId];y.updateVisual(g,d,h._api,f)}),eu.trigger("afterupdate",d,this._api))},updateLayout:function(f){nh.update.call(this,f)}},eI=function(f,h,d,g){if(f._disposed){f.id;return}for(var y=f._model,_=f._coordSysMgr.getCoordinateSystems(),v,S=C3(y,d),C=0;C<_.length;C++){var k=_[C];if(k[h]&&(v=k[h](y,S,g))!=null)return v}},tI=function(f,h){var d=f._chartsMap,g=f._scheduler;h.eachSeries(function(y){g.updateStreamModes(y,d[y.__viewId])})},nI=function(f,h){var d=this,g=this.getModel(),y=f.type,_=f.escapeConnect,v=eT[y],S=v.actionInfo,C=(S.update||"update").split(":"),k=C.pop(),x=C[0]!=null&&sc(C[0]);this[Vo]=!0;var m=[f],T=!1;f.batch&&(T=!0,m=Qt(f.batch,function(z){return z=pi(ot({},z),f),z.batch=null,z}));var P=[],I,M=kL(f),L=ij(f);if(L&&Fte(this._api),be(m,function(z){if(I=v.action(z,d._model,d._api),I=I||ot({},z),I.type=S.event||I.type,P.push(I),L){var ie=aF(f),oe=ie.queryOptionMap,Se=ie.mainTypeSpecified,Ae=Se?oe.keys()[0]:"series";Qx(d,k,z,Ae),al(d)}else M?(Qx(d,k,z,"series"),al(d)):x&&Qx(d,k,z,x.main,x.sub)}),k!=="none"&&!L&&!M&&!x)try{this[Ua]?(Lm(this),nh.update.call(this,f),this[Ua]=null):nh[k].call(this,f)}catch(z){throw this[Vo]=!1,z}if(T?I={type:S.event||y,escapeConnect:_,batch:P}:I=P[0],this[Vo]=!1,!h){var R=this._messageCenter;if(R.trigger(I.type,I),M){var V={type:"selectchanged",escapeConnect:_,selected:cIe(g),isFromClick:f.isFromClick||!1,fromAction:f.type,fromActionPayload:f};R.trigger(V.type,V)}}},Xy=function(f){for(var h=this._pendingActions;h.length;){var d=h.shift();nI.call(this,d,f)}},Jy=function(f){!f&&this.trigger("updated")},mU=function(f,h){f.on("rendered",function(d){h.trigger("rendered",d),f.animation.isFinished()&&!h[Ua]&&!h._scheduler.unfinished&&!h._pendingActions.length&&h.trigger("finished")})},vU=function(f,h){f.on("mouseover",function(d){var g=d.target,y=$b(g,CL);y&&(sIe(y,d,h._api),al(h))}).on("mouseout",function(d){var g=d.target,y=$b(g,CL);y&&(lIe(y,d,h._api),al(h))}).on("click",function(d){var g=d.target,y=$b(g,function(S){return Br(S).dataIndex!=null},!0);if(y){var _=y.selected?"unselect":"select",v=Br(y);h._api.dispatchAction({type:_,dataType:v.dataType,dataIndexInside:v.dataIndex,seriesIndex:v.seriesIndex,isFromClick:!0})}})};function n(f){f.clearColorPalette(),f.eachSeries(function(h){h.clearColorPalette()})}function r(f){var h=[],d=[],g=!1;if(f.eachComponent(function(S,C){var k=C.get("zlevel")||0,x=C.get("z")||0,m=C.getZLevelKey();g=g||!!m,(S==="series"?d:h).push({zlevel:k,z:x,idx:C.componentIndex,type:S,key:m})}),g){var y=h.concat(d),_,v;c2(y,function(S,C){return S.zlevel===C.zlevel?S.z-C.z:S.zlevel-C.zlevel}),be(y,function(S){var C=f.getComponent(S.type,S.idx),k=S.zlevel,x=S.key;_!=null&&(k=Math.max(_,k)),x?(k===_&&x!==v&&k++,v=x):v&&(k===_&&k++,v=""),_=k,C.setZLevel(k)})}}rI=function(f,h,d,g,y){r(h),yU(f,h,d,g,y),be(f._chartsViews,function(_){_.__alive=!1}),eC(f,h,d,g,y),be(f._chartsViews,function(_){_.__alive||_.remove(h,d)})},yU=function(f,h,d,g,y,_){be(_||f._componentsViews,function(v){var S=v.__model;u(S,v),v.render(S,h,d,g),s(S,v),c(S,v)})},eC=function(f,h,d,g,y,_){var v=f._scheduler;y=ot(y||{},{updatedSeries:h.getSeries()}),eu.trigger("series:beforeupdate",h,d,y);var S=!1;h.eachSeries(function(C){var k=f._chartsMap[C.__viewId];k.__alive=!0;var x=k.renderTask;v.updatePayload(x,g),u(C,k),_&&_.get(C.uid)&&x.dirty(),x.perform(v.getPerformArgs(x))&&(S=!0),k.group.silent=!!C.get("silent"),a(C,k),nj(C)}),v.unfinished=S||v.unfinished,eu.trigger("series:layoutlabels",h,d,y),eu.trigger("series:transition",h,d,y),h.eachSeries(function(C){var k=f._chartsMap[C.__viewId];s(C,k),c(C,k)}),o(f,h),eu.trigger("series:afterupdate",h,d,y)},al=function(f){f[J3]=!0,f.getZr().wakeUp()},_U=function(f){f[J3]&&(f.getZr().storage.traverse(function(h){o1(h)||i(h)}),f[J3]=!1)};function i(f){for(var h=[],d=f.currentStates,g=0;g<d.length;g++){var y=d[g];y==="emphasis"||y==="blur"||y==="select"||h.push(y)}f.selected&&f.states.select&&h.push("select"),f.hoverState===hF&&f.states.emphasis?h.push("emphasis"):f.hoverState===fF&&f.states.blur&&h.push("blur"),f.useStates(h)}function o(f,h){var d=f._zr,g=d.storage,y=0;g.traverse(function(_){_.isGroup||y++}),y>h.get("hoverLayerThreshold")&&!En.node&&!En.worker&&h.eachSeries(function(_){if(!_.preventUsingHoverLayer){var v=f._chartsMap[_.__viewId];v.__alive&&v.eachRendered(function(S){S.states.emphasis&&(S.states.emphasis.hoverLayer=!0)})}})}function a(f,h){var d=f.get("blendMode")||null;h.eachRendered(function(g){g.isGroup||(g.style.blend=d)})}function s(f,h){if(!f.preventAutoZ){var d=f.get("z")||0,g=f.get("zlevel")||0;h.eachRendered(function(y){return l(y,d,g,-1/0),!0})}}function l(f,h,d,g){var y=f.getTextContent(),_=f.getTextGuideLine(),v=f.isGroup;if(v)for(var S=f.childrenRef(),C=0;C<S.length;C++)g=Math.max(l(S[C],h,d,g),g);else f.z=h,f.zlevel=d,g=Math.max(f.z2,g);if(y&&(y.z=h,y.zlevel=d,isFinite(g)&&(y.z2=g+2)),_){var k=f.textGuideLineConfig;_.z=h,_.zlevel=d,isFinite(g)&&(_.z2=g+(k&&k.showAbove?1:-1))}return g}function u(f,h){h.eachRendered(function(d){if(!o1(d)){var g=d.getTextContent(),y=d.getTextGuideLine();d.stateTransition&&(d.stateTransition=null),g&&g.stateTransition&&(g.stateTransition=null),y&&y.stateTransition&&(y.stateTransition=null),d.hasState()?(d.prevStates=d.currentStates,d.clearStates()):d.prevStates&&(d.prevStates=null)}})}function c(f,h){var d=f.getModel("stateAnimation"),g=f.isAnimationEnabled(),y=d.get("duration"),_=y>0?{duration:y,delay:d.get("delay"),easing:d.get("easing")}:null;h.eachRendered(function(v){if(v.states&&v.states.emphasis){if(o1(v))return;if(v instanceof Lr&&gIe(v),v.__dirty){var S=v.prevStates;S&&v.useStates(S)}if(g){v.stateTransition=_;var C=v.getTextContent(),k=v.getTextGuideLine();C&&(C.stateTransition=_),k&&(k.stateTransition=_)}v.__dirty&&i(v)}})}bU=function(f){return new(function(h){Cr(d,h);function d(){return h!==null&&h.apply(this,arguments)||this}return d.prototype.getCoordinateSystems=function(){return f._coordSysMgr.getCoordinateSystems()},d.prototype.getComponentByElement=function(g){for(;g;){var y=g.__ecComponentInfo;if(y!=null)return f._model.getComponent(y.mainType,y.index);g=g.parent}},d.prototype.enterEmphasis=function(g,y){Vk(g,y),al(f)},d.prototype.leaveEmphasis=function(g,y){Bk(g,y),al(f)},d.prototype.enterBlur=function(g){oIe(g),al(f)},d.prototype.leaveBlur=function(g){Lte(g),al(f)},d.prototype.enterSelect=function(g){Dte(g),al(f)},d.prototype.leaveSelect=function(g){Mte(g),al(f)},d.prototype.getModel=function(){return f.getModel()},d.prototype.getViewOfComponentModel=function(g){return f.getViewOfComponentModel(g)},d.prototype.getViewOfSeriesModel=function(g){return f.getViewOfSeriesModel(g)},d}(One))(f)},yre=function(f){function h(d,g){for(var y=0;y<d.length;y++){var _=d[y];_[Z3]=g}}be(l1,function(d,g){f._messageCenter.on(g,function(y){if(SU[f.group]&&f[Z3]!==gU){if(y&&y.escapeConnect)return;var _=f.makeActionFromEvent(y),v=[];be(u1,function(S){S!==f&&S.group===f.group&&v.push(S)}),h(v,gU),be(v,function(S){S[Z3]!==IDe&&S.dispatchAction(_)}),h(v,$De)}})})}}(),e}(xc),VF=bre.prototype;VF.on=dre("on");VF.off=dre("off");VF.one=function(t,e,n){var r=this;function i(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];e&&e.apply&&e.apply(this,o),r.off(t,i)}this.on.call(this,t,i,n)};var LDe=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var eT={},l1={},zL=[],jL=[],tT=[],_re={},UL={},u1={},SU={},DDe=+new Date-0,BF="_echarts_instance_";function MDe(t,e,n){var r=!(n&&n.ssr);if(r){var i=NDe(t);if(i)return i}var o=new bre(t,e,n);return o.id="ec_"+DDe++,u1[o.id]=o,r&&dte(t,BF,o.id),yre(o),eu.trigger("afterinit",o),o}function NDe(t){return u1[qOe(t,BF)]}function Sre(t,e){_re[t]=e}function wre(t){wr(jL,t)<0&&jL.push(t)}function xre(t,e){jF(zL,t,e,xDe)}function FDe(t){zF("afterinit",t)}function RDe(t){zF("afterupdate",t)}function zF(t,e){eu.on(t,e)}function R0(t,e,n){Qn(e)&&(n=e,e="");var r=Bt(t)?t.type:[t,t={event:e}][0];t.event=(t.event||r).toLowerCase(),e=t.event,!l1[e]&&(Us(pU.test(r)&&pU.test(e)),eT[r]||(eT[r]={action:n,actionInfo:t}),l1[e]=r)}function VDe(t,e){KA.register(t,e)}function BDe(t,e){jF(tT,t,e,cre,"layout")}function Gg(t,e){jF(tT,t,e,fre,"visual")}var wU=[];function jF(t,e,n,r,i){if((Qn(e)||Bt(e))&&(n=e,e=r),!(wr(wU,n)>=0)){wU.push(n);var o=tre.wrapStageHandler(n,i);o.__prio=e,o.__raw=n,t.push(o)}}function Cre(t,e){UL[t]=e}function zDe(t,e,n){var r=yDe("registerMap");r&&r(t,e,n)}var jDe=j$e;Gg(RF,yLe);Gg(QA,bLe);Gg(QA,_Le);Gg(RF,MLe);Gg(QA,NLe);Gg(hre,gDe);wre($ne);xre(SDe,C$e);Cre("default",SLe);R0({type:sg,event:sg,update:sg},Jo);R0({type:v2,event:v2,update:v2},Jo);R0({type:n1,event:n1,update:n1},Jo);R0({type:y2,event:y2,update:y2},Jo);R0({type:r1,event:r1,update:r1},Jo);Sre("light",$Le);Sre("dark",LLe);function Zy(t){return t==null?0:t.length||1}function xU(t){return t}var UDe=function(){function t(e,n,r,i,o,a){this._old=e,this._new=n,this._oldKeyGetter=r||xU,this._newKeyGetter=i||xU,this.context=o,this._diffModeMultiple=a==="multiple"}return t.prototype.add=function(e){return this._add=e,this},t.prototype.update=function(e){return this._update=e,this},t.prototype.updateManyToOne=function(e){return this._updateManyToOne=e,this},t.prototype.updateOneToMany=function(e){return this._updateOneToMany=e,this},t.prototype.updateManyToMany=function(e){return this._updateManyToMany=e,this},t.prototype.remove=function(e){return this._remove=e,this},t.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},t.prototype._executeOneToOne=function(){var e=this._old,n=this._new,r={},i=new Array(e.length),o=new Array(n.length);this._initIndexMap(e,null,i,"_oldKeyGetter"),this._initIndexMap(n,r,o,"_newKeyGetter");for(var a=0;a<e.length;a++){var s=i[a],l=r[s],u=Zy(l);if(u>1){var c=l.shift();l.length===1&&(r[s]=l[0]),this._update&&this._update(c,a)}else u===1?(r[s]=null,this._update&&this._update(l,a)):this._remove&&this._remove(a)}this._performRestAdd(o,r)},t.prototype._executeMultiple=function(){var e=this._old,n=this._new,r={},i={},o=[],a=[];this._initIndexMap(e,r,o,"_oldKeyGetter"),this._initIndexMap(n,i,a,"_newKeyGetter");for(var s=0;s<o.length;s++){var l=o[s],u=r[l],c=i[l],f=Zy(u),h=Zy(c);if(f>1&&h===1)this._updateManyToOne&&this._updateManyToOne(c,u),i[l]=null;else if(f===1&&h>1)this._updateOneToMany&&this._updateOneToMany(c,u),i[l]=null;else if(f===1&&h===1)this._update&&this._update(c,u),i[l]=null;else if(f>1&&h>1)this._updateManyToMany&&this._updateManyToMany(c,u),i[l]=null;else if(f>1)for(var d=0;d<f;d++)this._remove&&this._remove(u[d]);else this._remove&&this._remove(u)}this._performRestAdd(a,i)},t.prototype._performRestAdd=function(e,n){for(var r=0;r<e.length;r++){var i=e[r],o=n[i],a=Zy(o);if(a>1)for(var s=0;s<a;s++)this._add&&this._add(o[s]);else a===1&&this._add&&this._add(o);n[i]=null}},t.prototype._initIndexMap=function(e,n,r,i){for(var o=this._diffModeMultiple,a=0;a<e.length;a++){var s="_ec_"+this[i](e[a],a);if(o||(r[a]=s),!!n){var l=n[s],u=Zy(l);u===0?(n[s]=a,o&&r.push(s)):u===1?n[s]=[l,a]:l.push(a)}}},t}();const kre=UDe;var WDe=function(){function t(e,n){this._encode=e,this._schema=n}return t.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},t.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},t}();function HDe(t,e){var n={},r=n.encode={},i=mn(),o=[],a=[],s={};be(t.dimensions,function(h){var d=t.getDimensionInfo(h),g=d.coordDim;if(g){var y=d.coordDimIndex;iI(r,g)[y]=h,d.isExtraCoord||(i.set(g,1),qDe(d.type)&&(o[0]=h),iI(s,g)[y]=t.getDimensionIndex(d.name)),d.defaultTooltip&&a.push(h)}wne.each(function(_,v){var S=iI(r,v),C=d.otherDims[v];C!=null&&C!==!1&&(S[C]=d.name)})});var l=[],u={};i.each(function(h,d){var g=r[d];u[d]=g[0],l=l.concat(g)}),n.dataDimsOnCoord=l,n.dataDimIndicesOnCoord=Qt(l,function(h){return t.getDimensionInfo(h).storeDimIndex}),n.encodeFirstDimNotExtra=u;var c=r.label;c&&c.length&&(o=c.slice());var f=r.tooltip;return f&&f.length?a=f.slice():a.length||(a=o.slice()),r.defaultedLabel=o,r.defaultedTooltip=a,n.userOutput=new WDe(s,e),n}function iI(t,e){return t.hasOwnProperty(e)||(t[e]=[]),t[e]}function GDe(t){return t==="category"?"ordinal":t==="time"?"time":"float"}function qDe(t){return!(t==="ordinal"||t==="time")}var YDe=function(){function t(e){this.otherDims={},e!=null&&ot(this,e)}return t}();const w2=YDe;var KDe=no(),XDe={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},Tre=function(){function t(e){this.dimensions=e.dimensions,this._dimOmitted=e.dimensionOmitted,this.source=e.source,this._fullDimCount=e.fullDimensionCount,this._updateDimOmitted(e.dimensionOmitted)}return t.prototype.isDimensionOmitted=function(){return this._dimOmitted},t.prototype._updateDimOmitted=function(e){this._dimOmitted=e,e&&(this._dimNameMap||(this._dimNameMap=Pre(this.source)))},t.prototype.getSourceDimensionIndex=function(e){return gn(this._dimNameMap.get(e),-1)},t.prototype.getSourceDimension=function(e){var n=this.source.dimensionsDefine;if(n)return n[e]},t.prototype.makeStoreSchema=function(){for(var e=this._fullDimCount,n=Dne(this.source),r=!Ore(e),i="",o=[],a=0,s=0;a<e;a++){var l=void 0,u=void 0,c=void 0,f=this.dimensions[s];if(f&&f.storeDimIndex===a)l=n?f.name:null,u=f.type,c=f.ordinalMeta,s++;else{var h=this.getSourceDimension(a);h&&(l=n?h.name:null,u=h.type)}o.push({property:l,type:u,ordinalMeta:c}),n&&l!=null&&(!f||!f.isCalculationCoord)&&(i+=r?l.replace(/\`/g,"`1").replace(/\$/g,"`2"):l),i+="$",i+=XDe[u]||"f",c&&(i+=c.uid),i+="$"}var d=this.source,g=[d.seriesLayoutBy,d.startIndex,i].join("$$");return{dimensions:o,hash:g}},t.prototype.makeOutputDimensionNames=function(){for(var e=[],n=0,r=0;n<this._fullDimCount;n++){var i=void 0,o=this.dimensions[r];if(o&&o.storeDimIndex===n)o.isCalculationCoord||(i=o.name),r++;else{var a=this.getSourceDimension(n);a&&(i=a.name)}e.push(i)}return e},t.prototype.appendCalculationDimension=function(e){this.dimensions.push(e),e.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},t}();function Are(t){return t instanceof Tre}function Ere(t){for(var e=mn(),n=0;n<(t||[]).length;n++){var r=t[n],i=Bt(r)?r.name:r;i!=null&&e.get(i)==null&&e.set(i,n)}return e}function Pre(t){var e=KDe(t);return e.dimNameMap||(e.dimNameMap=Ere(t.dimensionsDefine))}function Ore(t){return t>30}var Qy=Bt,rh=Qt,JDe=typeof Int32Array>"u"?Array:Int32Array,ZDe="e\0\0",CU=-1,QDe=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],eMe=["_approximateExtent"],kU,tC,eb,tb,oI,nC,aI,tMe=function(){function t(e,n){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var r,i=!1;Are(e)?(r=e.dimensions,this._dimOmitted=e.isDimensionOmitted(),this._schema=e):(i=!0,r=e),r=r||["x","y"];for(var o={},a=[],s={},l=!1,u={},c=0;c<r.length;c++){var f=r[c],h=Pt(f)?new w2({name:f}):f instanceof w2?f:new w2(f),d=h.name;h.type=h.type||"float",h.coordDim||(h.coordDim=d,h.coordDimIndex=0);var g=h.otherDims=h.otherDims||{};a.push(d),o[d]=h,u[d]!=null&&(l=!0),h.createInvertedIndices&&(s[d]=[]),g.itemName===0&&(this._nameDimIdx=c),g.itemId===0&&(this._idDimIdx=c),i&&(h.storeDimIndex=c)}if(this.dimensions=a,this._dimInfos=o,this._initGetDimensionInfo(l),this.hostModel=n,this._invertedIndicesMap=s,this._dimOmitted){var y=this._dimIdxToName=mn();be(a,function(_){y.set(o[_].storeDimIndex,_)})}}return t.prototype.getDimension=function(e){var n=this._recognizeDimIndex(e);if(n==null)return e;if(n=e,!this._dimOmitted)return this.dimensions[n];var r=this._dimIdxToName.get(n);if(r!=null)return r;var i=this._schema.getSourceDimension(n);if(i)return i.name},t.prototype.getDimensionIndex=function(e){var n=this._recognizeDimIndex(e);if(n!=null)return n;if(e==null)return-1;var r=this._getDimInfo(e);return r?r.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(e):-1},t.prototype._recognizeDimIndex=function(e){if(Zr(e)||e!=null&&!isNaN(e)&&!this._getDimInfo(e)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(e)<0))return+e},t.prototype._getStoreDimIndex=function(e){var n=this.getDimensionIndex(e);return n},t.prototype.getDimensionInfo=function(e){return this._getDimInfo(this.getDimension(e))},t.prototype._initGetDimensionInfo=function(e){var n=this._dimInfos;this._getDimInfo=e?function(r){return n.hasOwnProperty(r)?n[r]:void 0}:function(r){return n[r]}},t.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},t.prototype.mapDimension=function(e,n){var r=this._dimSummary;if(n==null)return r.encodeFirstDimNotExtra[e];var i=r.encode[e];return i?i[n]:null},t.prototype.mapDimensionsAll=function(e){var n=this._dimSummary,r=n.encode[e];return(r||[]).slice()},t.prototype.getStore=function(){return this._store},t.prototype.initData=function(e,n,r){var i=this,o;if(e instanceof $L&&(o=e),!o){var a=this.dimensions,s=PF(e)||fs(e)?new Mne(e,a.length):e;o=new $L;var l=rh(a,function(u){return{type:i._dimInfos[u].type,property:u}});o.initData(s,l,r)}this._store=o,this._nameList=(n||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,o.count()),this._dimSummary=HDe(this,this._schema),this.userOutput=this._dimSummary.userOutput},t.prototype.appendData=function(e){var n=this._store.appendData(e);this._doInit(n[0],n[1])},t.prototype.appendValues=function(e,n){var r=this._store.appendValues(e,n.length),i=r.start,o=r.end,a=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),n)for(var s=i;s<o;s++){var l=s-i;this._nameList[s]=n[l],a&&aI(this,s)}},t.prototype._updateOrdinalMeta=function(){for(var e=this._store,n=this.dimensions,r=0;r<n.length;r++){var i=this._dimInfos[n[r]];i.ordinalMeta&&e.collectOrdinalMeta(i.storeDimIndex,i.ordinalMeta)}},t.prototype._shouldMakeIdFromName=function(){var e=this._store.getProvider();return this._idDimIdx==null&&e.getSource().sourceFormat!==Fh&&!e.fillStorage},t.prototype._doInit=function(e,n){if(!(e>=n)){var r=this._store,i=r.getProvider();this._updateOrdinalMeta();var o=this._nameList,a=this._idList,s=i.getSource().sourceFormat,l=s===Nl;if(l&&!i.pure)for(var u=[],c=e;c<n;c++){var f=i.getItem(c,u);if(!this.hasItemOption&&NOe(f)&&(this.hasItemOption=!0),f){var h=f.name;o[c]==null&&h!=null&&(o[c]=El(h,null));var d=f.id;a[c]==null&&d!=null&&(a[c]=El(d,null))}}if(this._shouldMakeIdFromName())for(var c=e;c<n;c++)aI(this,c);kU(this)}},t.prototype.getApproximateExtent=function(e){return this._approximateExtent[e]||this._store.getDataExtent(this._getStoreDimIndex(e))},t.prototype.setApproximateExtent=function(e,n){n=this.getDimension(n),this._approximateExtent[n]=e.slice()},t.prototype.getCalculationInfo=function(e){return this._calculationInfo[e]},t.prototype.setCalculationInfo=function(e,n){Qy(e)?ot(this._calculationInfo,e):this._calculationInfo[e]=n},t.prototype.getName=function(e){var n=this.getRawIndex(e),r=this._nameList[n];return r==null&&this._nameDimIdx!=null&&(r=eb(this,this._nameDimIdx,n)),r==null&&(r=""),r},t.prototype._getCategory=function(e,n){var r=this._store.get(e,n),i=this._store.getOrdinalMeta(e);return i?i.categories[r]:r},t.prototype.getId=function(e){return tC(this,this.getRawIndex(e))},t.prototype.count=function(){return this._store.count()},t.prototype.get=function(e,n){var r=this._store,i=this._dimInfos[e];if(i)return r.get(i.storeDimIndex,n)},t.prototype.getByRawIndex=function(e,n){var r=this._store,i=this._dimInfos[e];if(i)return r.getByRawIndex(i.storeDimIndex,n)},t.prototype.getIndices=function(){return this._store.getIndices()},t.prototype.getDataExtent=function(e){return this._store.getDataExtent(this._getStoreDimIndex(e))},t.prototype.getSum=function(e){return this._store.getSum(this._getStoreDimIndex(e))},t.prototype.getMedian=function(e){return this._store.getMedian(this._getStoreDimIndex(e))},t.prototype.getValues=function(e,n){var r=this,i=this._store;return mt(e)?i.getValues(rh(e,function(o){return r._getStoreDimIndex(o)}),n):i.getValues(e)},t.prototype.hasValue=function(e){for(var n=this._dimSummary.dataDimIndicesOnCoord,r=0,i=n.length;r<i;r++)if(isNaN(this._store.get(n[r],e)))return!1;return!0},t.prototype.indexOfName=function(e){for(var n=0,r=this._store.count();n<r;n++)if(this.getName(n)===e)return n;return-1},t.prototype.getRawIndex=function(e){return this._store.getRawIndex(e)},t.prototype.indexOfRawIndex=function(e){return this._store.indexOfRawIndex(e)},t.prototype.rawIndexOf=function(e,n){var r=e&&this._invertedIndicesMap[e],i=r[n];return i==null||isNaN(i)?CU:i},t.prototype.indicesOfNearest=function(e,n,r){return this._store.indicesOfNearest(this._getStoreDimIndex(e),n,r)},t.prototype.each=function(e,n,r){Qn(e)&&(r=n,n=e,e=[]);var i=r||this,o=rh(tb(e),this._getStoreDimIndex,this);this._store.each(o,i?Or(n,i):n)},t.prototype.filterSelf=function(e,n,r){Qn(e)&&(r=n,n=e,e=[]);var i=r||this,o=rh(tb(e),this._getStoreDimIndex,this);return this._store=this._store.filter(o,i?Or(n,i):n),this},t.prototype.selectRange=function(e){var n=this,r={},i=ir(e);return be(i,function(o){var a=n._getStoreDimIndex(o);r[a]=e[o]}),this._store=this._store.selectRange(r),this},t.prototype.mapArray=function(e,n,r){Qn(e)&&(r=n,n=e,e=[]),r=r||this;var i=[];return this.each(e,function(){i.push(n&&n.apply(this,arguments))},r),i},t.prototype.map=function(e,n,r,i){var o=r||i||this,a=rh(tb(e),this._getStoreDimIndex,this),s=nC(this);return s._store=this._store.map(a,o?Or(n,o):n),s},t.prototype.modify=function(e,n,r,i){var o=r||i||this,a=rh(tb(e),this._getStoreDimIndex,this);this._store.modify(a,o?Or(n,o):n)},t.prototype.downSample=function(e,n,r,i){var o=nC(this);return o._store=this._store.downSample(this._getStoreDimIndex(e),n,r,i),o},t.prototype.lttbDownSample=function(e,n){var r=nC(this);return r._store=this._store.lttbDownSample(this._getStoreDimIndex(e),n),r},t.prototype.getRawDataItem=function(e){return this._store.getRawDataItem(e)},t.prototype.getItemModel=function(e){var n=this.hostModel,r=this.getRawDataItem(e);return new uo(r,n,n&&n.ecModel)},t.prototype.diff=function(e){var n=this;return new kre(e?e.getStore().getIndices():[],this.getStore().getIndices(),function(r){return tC(e,r)},function(r){return tC(n,r)})},t.prototype.getVisual=function(e){var n=this._visual;return n&&n[e]},t.prototype.setVisual=function(e,n){this._visual=this._visual||{},Qy(e)?ot(this._visual,e):this._visual[e]=n},t.prototype.getItemVisual=function(e,n){var r=this._itemVisuals[e],i=r&&r[n];return i??this.getVisual(n)},t.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},t.prototype.ensureUniqueItemVisual=function(e,n){var r=this._itemVisuals,i=r[e];i||(i=r[e]={});var o=i[n];return o==null&&(o=this.getVisual(n),mt(o)?o=o.slice():Qy(o)&&(o=ot({},o)),i[n]=o),o},t.prototype.setItemVisual=function(e,n,r){var i=this._itemVisuals[e]||{};this._itemVisuals[e]=i,Qy(n)?ot(i,n):i[n]=r},t.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},t.prototype.setLayout=function(e,n){Qy(e)?ot(this._layout,e):this._layout[e]=n},t.prototype.getLayout=function(e){return this._layout[e]},t.prototype.getItemLayout=function(e){return this._itemLayouts[e]},t.prototype.setItemLayout=function(e,n,r){this._itemLayouts[e]=r?ot(this._itemLayouts[e]||{},n):n},t.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},t.prototype.setItemGraphicEl=function(e,n){var r=this.hostModel&&this.hostModel.seriesIndex;K3e(r,this.dataType,e,n),this._graphicEls[e]=n},t.prototype.getItemGraphicEl=function(e){return this._graphicEls[e]},t.prototype.eachItemGraphicEl=function(e,n){be(this._graphicEls,function(r,i){r&&e&&e.call(n,r,i)})},t.prototype.cloneShallow=function(e){return e||(e=new t(this._schema?this._schema:rh(this.dimensions,this._getDimInfo,this),this.hostModel)),oI(e,this),e._store=this._store,e},t.prototype.wrapMethod=function(e,n){var r=this[e];Qn(r)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(e),this[e]=function(){var i=r.apply(this,arguments);return n.apply(this,[i].concat(XN(arguments)))})},t.internalField=function(){kU=function(e){var n=e._invertedIndicesMap;be(n,function(r,i){var o=e._dimInfos[i],a=o.ordinalMeta,s=e._store;if(a){r=n[i]=new JDe(a.categories.length);for(var l=0;l<r.length;l++)r[l]=CU;for(var l=0;l<s.count();l++)r[s.get(o.storeDimIndex,l)]=l}})},eb=function(e,n,r){return El(e._getCategory(n,r),null)},tC=function(e,n){var r=e._idList[n];return r==null&&e._idDimIdx!=null&&(r=eb(e,e._idDimIdx,n)),r==null&&(r=ZDe+n),r},tb=function(e){return mt(e)||(e=e!=null?[e]:[]),e},nC=function(e){var n=new t(e._schema?e._schema:rh(e.dimensions,e._getDimInfo,e),e.hostModel);return oI(n,e),n},oI=function(e,n){be(QDe.concat(n.__wrappedMethods||[]),function(r){n.hasOwnProperty(r)&&(e[r]=n[r])}),e.__wrappedMethods=n.__wrappedMethods,be(eMe,function(r){e[r]=Gn(n[r])}),e._calculationInfo=ot({},n._calculationInfo)},aI=function(e,n){var r=e._nameList,i=e._idList,o=e._nameDimIdx,a=e._idDimIdx,s=r[n],l=i[n];if(s==null&&o!=null&&(r[n]=s=eb(e,o,n)),l==null&&a!=null&&(i[n]=l=eb(e,a,n)),l==null&&s!=null){var u=e._nameRepeatCount,c=u[s]=(u[s]||0)+1;l=s,c>1&&(l+="__ec__"+c),i[n]=l}}}(),t}();const s_=tMe;function eE(t,e){PF(t)||(t=OF(t)),e=e||{};var n=e.coordDimensions||[],r=e.dimensionsDefine||t.dimensionsDefine||[],i=mn(),o=[],a=rMe(t,n,r,e.dimensionsCount),s=e.canOmitUnusedDimensions&&Ore(a),l=r===t.dimensionsDefine,u=l?Pre(t):Ere(r),c=e.encodeDefine;!c&&e.encodeDefaulter&&(c=e.encodeDefaulter(t,a));for(var f=mn(c),h=new Bne(a),d=0;d<h.length;d++)h[d]=-1;function g(I){var M=h[I];if(M<0){var L=r[I],R=Bt(L)?L:{name:L},V=new w2,z=R.name;z!=null&&u.get(z)!=null&&(V.name=V.displayName=z),R.type!=null&&(V.type=R.type),R.displayName!=null&&(V.displayName=R.displayName);var ie=o.length;return h[I]=ie,V.storeDimIndex=I,o.push(V),V}return o[M]}if(!s)for(var d=0;d<a;d++)g(d);f.each(function(I,M){var L=Zo(I).slice();if(L.length===1&&!Pt(L[0])&&L[0]<0){f.set(M,!1);return}var R=f.set(M,[]);be(L,function(V,z){var ie=Pt(V)?u.get(V):V;ie!=null&&ie<a&&(R[z]=ie,_(g(ie),M,z))})});var y=0;be(n,function(I){var M,L,R,V;if(Pt(I))M=I,V={};else{V=I,M=V.name;var z=V.ordinalMeta;V.ordinalMeta=null,V=ot({},V),V.ordinalMeta=z,L=V.dimsDef,R=V.otherDims,V.name=V.coordDim=V.coordDimIndex=V.dimsDef=V.otherDims=null}var ie=f.get(M);if(ie!==!1){if(ie=Zo(ie),!ie.length)for(var oe=0;oe<(L&&L.length||1);oe++){for(;y<a&&g(y).coordDim!=null;)y++;y<a&&ie.push(y++)}be(ie,function(Se,Ae){var Ee=g(Se);if(l&&V.type!=null&&(Ee.type=V.type),_(pi(Ee,V),M,Ae),Ee.name==null&&L){var _e=L[Ae];!Bt(_e)&&(_e={name:_e}),Ee.name=Ee.displayName=_e.name,Ee.defaultTooltip=_e.defaultTooltip}R&&pi(Ee.otherDims,R)})}});function _(I,M,L){wne.get(M)!=null?I.otherDims[M]=L:(I.coordDim=M,I.coordDimIndex=L,i.set(M,!0))}var v=e.generateCoord,S=e.generateCoordCount,C=S!=null;S=v?S||1:0;var k=v||"value";function x(I){I.name==null&&(I.name=I.coordDim)}if(s)be(o,function(I){x(I)}),o.sort(function(I,M){return I.storeDimIndex-M.storeDimIndex});else for(var m=0;m<a;m++){var T=g(m),P=T.coordDim;P==null&&(T.coordDim=iMe(k,i,C),T.coordDimIndex=0,(!v||S<=0)&&(T.isExtraCoord=!0),S--),x(T),T.type==null&&(kne(t,m)===yo.Must||T.isExtraCoord&&(T.otherDims.itemName!=null||T.otherDims.seriesName!=null))&&(T.type="ordinal")}return nMe(o),new Tre({source:t,dimensions:o,fullDimensionCount:a,dimensionOmitted:s})}function nMe(t){for(var e=mn(),n=0;n<t.length;n++){var r=t[n],i=r.name,o=e.get(i)||0;o>0&&(r.name=i+(o-1)),o++,e.set(i,o)}}function rMe(t,e,n,r){var i=Math.max(t.dimensionsDetectedCount||1,e.length,n.length,r||0);return be(e,function(o){var a;Bt(o)&&(a=o.dimsDef)&&(i=Math.max(i,a.length))}),i}function iMe(t,e,n){if(n||e.hasKey(t)){for(var r=0;e.hasKey(t+r);)r++;t+=r}return e.set(t,!0),t}var oMe=function(){function t(e){this.coordSysDims=[],this.axisMap=mn(),this.categoryAxisMap=mn(),this.coordSysName=e}return t}();function aMe(t){var e=t.get("coordinateSystem"),n=new oMe(e),r=sMe[e];if(r)return r(t,n,n.axisMap,n.categoryAxisMap),n}var sMe={cartesian2d:function(t,e,n,r){var i=t.getReferringComponents("xAxis",Gp).models[0],o=t.getReferringComponents("yAxis",Gp).models[0];e.coordSysDims=["x","y"],n.set("x",i),n.set("y",o),Dm(i)&&(r.set("x",i),e.firstCategoryDimIndex=0),Dm(o)&&(r.set("y",o),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},singleAxis:function(t,e,n,r){var i=t.getReferringComponents("singleAxis",Gp).models[0];e.coordSysDims=["single"],n.set("single",i),Dm(i)&&(r.set("single",i),e.firstCategoryDimIndex=0)},polar:function(t,e,n,r){var i=t.getReferringComponents("polar",Gp).models[0],o=i.findAxisModel("radiusAxis"),a=i.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],n.set("radius",o),n.set("angle",a),Dm(o)&&(r.set("radius",o),e.firstCategoryDimIndex=0),Dm(a)&&(r.set("angle",a),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},geo:function(t,e,n,r){e.coordSysDims=["lng","lat"]},parallel:function(t,e,n,r){var i=t.ecModel,o=i.getComponent("parallel",t.get("parallelIndex")),a=e.coordSysDims=o.dimensions.slice();be(o.parallelAxisIndex,function(s,l){var u=i.getComponent("parallelAxis",s),c=a[l];n.set(c,u),Dm(u)&&(r.set(c,u),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=l))})}};function Dm(t){return t.get("type")==="category"}function lMe(t,e,n){n=n||{};var r=n.byIndex,i=n.stackedCoordDimension,o,a,s;uMe(e)?o=e:(a=e.schema,o=a.dimensions,s=e.store);var l=!!(t&&t.get("stack")),u,c,f,h;if(be(o,function(S,C){Pt(S)&&(o[C]=S={name:S}),l&&!S.isExtraCoord&&(!r&&!u&&S.ordinalMeta&&(u=S),!c&&S.type!=="ordinal"&&S.type!=="time"&&(!i||i===S.coordDim)&&(c=S))}),c&&!r&&!u&&(r=!0),c){f="__\0ecstackresult_"+t.id,h="__\0ecstackedover_"+t.id,u&&(u.createInvertedIndices=!0);var d=c.coordDim,g=c.type,y=0;be(o,function(S){S.coordDim===d&&y++});var _={name:f,coordDim:d,coordDimIndex:y,type:g,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:o.length},v={name:h,coordDim:h,coordDimIndex:y+1,type:g,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:o.length+1};a?(s&&(_.storeDimIndex=s.ensureCalculationDimension(h,g),v.storeDimIndex=s.ensureCalculationDimension(f,g)),a.appendCalculationDimension(_),a.appendCalculationDimension(v)):(o.push(_),o.push(v))}return{stackedDimension:c&&c.name,stackedByDimension:u&&u.name,isStackedByIndex:r,stackedOverDimension:h,stackResultDimension:f}}function uMe(t){return!Are(t.schema)}function cMe(t,e){var n=t.get("coordinateSystem"),r=KA.get(n),i;return e&&e.coordSysDims&&(i=Qt(e.coordSysDims,function(o){var a={name:o},s=e.axisMap.get(o);if(s){var l=s.get("type");a.type=GDe(l)}return a})),i||(i=r&&(r.getDimensionsInfo?r.getDimensionsInfo():r.dimensions.slice())||["x","y"]),i}function fMe(t,e,n){var r,i;return n&&be(t,function(o,a){var s=o.coordDim,l=n.categoryAxisMap.get(s);l&&(r==null&&(r=a),o.ordinalMeta=l.getOrdinalMeta(),e&&(o.createInvertedIndices=!0)),o.otherDims.itemName!=null&&(i=!0)}),!i&&r!=null&&(t[r].otherDims.itemName=0),r}function hMe(t,e,n){n=n||{};var r=e.getSourceManager(),i,o=!1;t?(o=!0,i=OF(t)):(i=r.getSource(),o=i.sourceFormat===Nl);var a=aMe(e),s=cMe(e,a),l=n.useEncodeDefaulter,u=Qn(l)?l:l?Vr(K4e,s,e):null,c={coordDimensions:s,generateCoord:n.generateCoord,encodeDefine:e.getEncode(),encodeDefaulter:u,canOmitUnusedDimensions:!o},f=eE(i,c),h=fMe(f.dimensions,n.createInvertedIndices,a),d=o?null:r.getSharedDataStore(f),g=lMe(e,{schema:f,store:d}),y=new s_(f,e);y.setCalculationInfo(g);var _=h!=null&&dMe(i)?function(v,S,C,k){return k===h?C:this.defaultDimValueGetter(v,S,C,k)}:null;return y.hasItemOption=!1,y.initData(o?i:d,null,_),y}function dMe(t){if(t.sourceFormat===Nl){var e=pMe(t.data||[]);return!mt(uS(e))}}function pMe(t){for(var e=0;e<t.length&&t[e]==null;)e++;return t[e]}function Ire(t,e){return t.type==="category"?t.scale.getLabel(e):e.value}function gMe(t){var e=t.get("interval");return e??"auto"}function mMe(t){return t.type==="category"&&gMe(t.getLabelModel())===0}var TU=[],vMe={registerPreprocessor:wre,registerProcessor:xre,registerPostInit:FDe,registerPostUpdate:RDe,registerUpdateLifecycle:zF,registerAction:R0,registerCoordinateSystem:VDe,registerLayout:BDe,registerVisual:Gg,registerTransform:jDe,registerLoading:Cre,registerMap:zDe,registerImpl:vDe,PRIORITY:ODe,ComponentModel:Si,ComponentView:ld,SeriesModel:Tg,ChartView:Rh,registerComponentModel:function(t){Si.registerClass(t)},registerComponentView:function(t){ld.registerClass(t)},registerSeriesModel:function(t){Tg.registerClass(t)},registerChartView:function(t){Rh.registerClass(t)},registerSubTypeDefaulter:function(t,e){Si.registerSubTypeDefaulter(t,e)},registerPainter:function(t,e){AOe(t,e)}};function Tf(t){if(mt(t)){be(t,function(e){Tf(e)});return}wr(TU,t)>=0||(TU.push(t),Qn(t)&&(t={install:t}),t.install(vMe))}sd.CMD;function $re(t,e,n,r,i,o,a,s){var l=i-t,u=o-e,c=n-t,f=r-e,h=Math.sqrt(c*c+f*f);c/=h,f/=h;var d=l*c+u*f,g=d/h;s&&(g=Math.min(Math.max(g,0),1)),g*=h;var y=a[0]=t+g*c,_=a[1]=e+g*f;return Math.sqrt((y-i)*(y-i)+(_-o)*(_-o))}var kh=new ln,_i=new ln,_o=new ln,Th=new ln,ec=new ln,nT=[],ya=new ln;function yMe(t,e){if(e<=180&&e>0){e=e/180*Math.PI,kh.fromArray(t[0]),_i.fromArray(t[1]),_o.fromArray(t[2]),ln.sub(Th,kh,_i),ln.sub(ec,_o,_i);var n=Th.len(),r=ec.len();if(!(n<.001||r<.001)){Th.scale(1/n),ec.scale(1/r);var i=Th.dot(ec),o=Math.cos(e);if(o<i){var a=$re(_i.x,_i.y,_o.x,_o.y,kh.x,kh.y,nT,!1);ya.fromArray(nT),ya.scaleAndAdd(ec,a/Math.tan(Math.PI-e));var s=_o.x!==_i.x?(ya.x-_i.x)/(_o.x-_i.x):(ya.y-_i.y)/(_o.y-_i.y);if(isNaN(s))return;s<0?ln.copy(ya,_i):s>1&&ln.copy(ya,_o),ya.toArray(t[1])}}}}function bMe(t,e,n){if(n<=180&&n>0){n=n/180*Math.PI,kh.fromArray(t[0]),_i.fromArray(t[1]),_o.fromArray(t[2]),ln.sub(Th,_i,kh),ln.sub(ec,_o,_i);var r=Th.len(),i=ec.len();if(!(r<.001||i<.001)){Th.scale(1/r),ec.scale(1/i);var o=Th.dot(e),a=Math.cos(n);if(o<a){var s=$re(_i.x,_i.y,_o.x,_o.y,kh.x,kh.y,nT,!1);ya.fromArray(nT);var l=Math.PI/2,u=Math.acos(ec.dot(e)),c=l+u-n;if(c>=l)ln.copy(ya,_o);else{ya.scaleAndAdd(ec,s/Math.tan(Math.PI/2-c));var f=_o.x!==_i.x?(ya.x-_i.x)/(_o.x-_i.x):(ya.y-_i.y)/(_o.y-_i.y);if(isNaN(f))return;f<0?ln.copy(ya,_i):f>1&&ln.copy(ya,_o)}ya.toArray(t[1])}}}}function AU(t,e,n,r){var i=n==="normal",o=i?t:t.ensureState(n);o.ignore=e;var a=r.get("smooth");a&&a===!0&&(a=.3),o.shape=o.shape||{},a>0&&(o.shape.smooth=a);var s=r.getModel("lineStyle").getLineStyle();i?t.useStyle(s):o.style=s}function _Me(t,e){var n=e.smooth,r=e.points;if(r)if(t.moveTo(r[0][0],r[0][1]),n>0&&r.length>=3){var i=Z$(r[0],r[1]),o=Z$(r[1],r[2]);if(!i||!o){t.lineTo(r[1][0],r[1][1]),t.lineTo(r[2][0],r[2][1]);return}var a=Math.min(i,o)*n,s=t3([],r[1],r[0],a/i),l=t3([],r[1],r[2],a/o),u=t3([],s,l,.5);t.bezierCurveTo(s[0],s[1],s[0],s[1],u[0],u[1]),t.bezierCurveTo(l[0],l[1],l[0],l[1],r[2][0],r[2][1])}else for(var c=1;c<r.length;c++)t.lineTo(r[c][0],r[c][1])}function SMe(t,e,n){var r=t.getTextGuideLine(),i=t.getTextContent();if(!i){r&&t.removeTextGuideLine();return}for(var o=e.normal,a=o.get("show"),s=i.ignore,l=0;l<e_.length;l++){var u=e_[l],c=e[u],f=u==="normal";if(c){var h=c.get("show"),d=f?s:gn(i.states[u]&&i.states[u].ignore,s);if(d||!gn(h,a)){var g=f?r:r&&r.states[u];g&&(g.ignore=!0);continue}r||(r=new HA,t.setTextGuideLine(r),!f&&(s||!a)&&AU(r,!0,"normal",e.normal),t.stateProxy&&(r.stateProxy=t.stateProxy)),AU(r,!1,u,c)}}if(r){pi(r.style,n),r.style.fill=null;var y=o.get("showAbove"),_=t.textGuideLineConfig=t.textGuideLineConfig||{};_.showAbove=y||!1,r.buildPath=_Me}}function wMe(t,e){e=e||"labelLine";for(var n={normal:t.getModel(e)},r=0;r<pu.length;r++){var i=pu[r];n[i]=t.getModel([i,e])}return n}function xMe(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];if(!r.defaultAttr.ignore){var i=r.label,o=i.getComputedTransform(),a=i.getBoundingRect(),s=!o||o[1]<1e-5&&o[2]<1e-5,l=i.style.margin||0,u=a.clone();u.applyTransform(o),u.x-=l/2,u.y-=l/2,u.width+=l,u.height+=l;var c=s?new jk(a,o):null;e.push({label:i,labelLine:r.labelLine,rect:u,localRect:a,obb:c,priority:r.priority,defaultAttr:r.defaultAttr,layoutOption:r.computedLayoutOption,axisAligned:s,transform:o})}}return e}function CMe(t,e,n,r,i,o){var a=t.length;if(a<2)return;t.sort(function(P,I){return P.rect[e]-I.rect[e]});for(var s=0,l,u=!1,c=0,f=0;f<a;f++){var h=t[f],d=h.rect;l=d[e]-s,l<0&&(d[e]-=l,h.label[e]-=l,u=!0);var g=Math.max(-l,0);c+=g,s=d[e]+d[n]}c>0&&o&&x(-c/a,0,a);var y=t[0],_=t[a-1],v,S;C(),v<0&&m(-v,.8),S<0&&m(S,.8),C(),k(v,S,1),k(S,v,-1),C(),v<0&&T(-v),S<0&&T(S);function C(){v=y.rect[e]-r,S=i-_.rect[e]-_.rect[n]}function k(P,I,M){if(P<0){var L=Math.min(I,-P);if(L>0){x(L*M,0,a);var R=L+P;R<0&&m(-R*M,1)}else m(-P*M,1)}}function x(P,I,M){P!==0&&(u=!0);for(var L=I;L<M;L++){var R=t[L],V=R.rect;V[e]+=P,R.label[e]+=P}}function m(P,I){for(var M=[],L=0,R=1;R<a;R++){var V=t[R-1].rect,z=Math.max(t[R].rect[e]-V[e]-V[n],0);M.push(z),L+=z}if(L){var ie=Math.min(Math.abs(P)/L,I);if(P>0)for(var R=0;R<a-1;R++){var oe=M[R]*ie;x(oe,0,R+1)}else for(var R=a-1;R>0;R--){var oe=M[R-1]*ie;x(-oe,R,a)}}}function T(P){var I=P<0?-1:1;P=Math.abs(P);for(var M=Math.ceil(P/(a-1)),L=0;L<a-1;L++)if(I>0?x(M,0,L+1):x(-M,a-L-1,a),P-=M,P<=0)return}return u}function kMe(t,e,n,r){return CMe(t,"y","height",e,n,r)}function TMe(t){var e=[];t.sort(function(y,_){return _.priority-y.priority});var n=new Ir(0,0,0,0);function r(y){if(!y.ignore){var _=y.ensureState("emphasis");_.ignore==null&&(_.ignore=!1)}y.ignore=!0}for(var i=0;i<t.length;i++){var o=t[i],a=o.axisAligned,s=o.localRect,l=o.transform,u=o.label,c=o.labelLine;n.copy(o.rect),n.width-=.1,n.height-=.1,n.x+=.05,n.y+=.05;for(var f=o.obb,h=!1,d=0;d<e.length;d++){var g=e[d];if(n.intersect(g.rect)){if(a&&g.axisAligned){h=!0;break}if(g.obb||(g.obb=new jk(g.localRect,g.transform)),f||(f=new jk(s,l)),f.intersect(g.obb)){h=!0;break}}}h?(r(u),c&&r(c)):(u.attr("ignore",o.defaultAttr.ignore),c&&c.attr("ignore",o.defaultAttr.labelGuideIgnore),e.push(o))}}var sI=null;function AMe(t){return sI||(sI=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){return setTimeout(e,16)}).bind(window)),sI(t)}var lI=null;function EMe(t){lI||(lI=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)}).bind(window)),lI(t)}function PMe(t){var e=document.createElement("style");return e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t)),(document.querySelector("head")||document.body).appendChild(e),e}function rC(t,e){e===void 0&&(e={});var n=document.createElement(t);return Object.keys(e).forEach(function(r){n[r]=e[r]}),n}function Lre(t,e,n){var r=window.getComputedStyle(t,n||null)||{display:"none"};return r[e]}function WL(t){if(!document.documentElement.contains(t))return{detached:!0,rendered:!1};for(var e=t;e!==document;){if(Lre(e,"display")==="none")return{detached:!1,rendered:!1};e=e.parentNode}return{detached:!1,rendered:!0}}var OMe='.resize-triggers{visibility:hidden;opacity:0;pointer-events:none}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}',HL=0,x2=null;function IMe(t,e){t.__resize_mutation_handler__||(t.__resize_mutation_handler__=DMe.bind(t));var n=t.__resize_listeners__;if(!n){if(t.__resize_listeners__=[],window.ResizeObserver){var r=t.offsetWidth,i=t.offsetHeight,o=new ResizeObserver(function(){!t.__resize_observer_triggered__&&(t.__resize_observer_triggered__=!0,t.offsetWidth===r&&t.offsetHeight===i)||rT(t)}),a=WL(t),s=a.detached,l=a.rendered;t.__resize_observer_triggered__=s===!1&&l===!1,t.__resize_observer__=o,o.observe(t)}else if(t.attachEvent&&t.addEventListener)t.__resize_legacy_resize_handler__=function(){rT(t)},t.attachEvent("onresize",t.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",t.__resize_mutation_handler__);else if(HL||(x2=PMe(OMe)),MMe(t),t.__resize_rendered__=WL(t).rendered,window.MutationObserver){var u=new MutationObserver(t.__resize_mutation_handler__);u.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),t.__resize_mutation_observer__=u}}t.__resize_listeners__.push(e),HL++}function $Me(t,e){var n=t.__resize_listeners__;if(n){if(e&&n.splice(n.indexOf(e),1),!n.length||!e){if(t.detachEvent&&t.removeEventListener){t.detachEvent("onresize",t.__resize_legacy_resize_handler__),document.removeEventListener("DOMSubtreeModified",t.__resize_mutation_handler__);return}t.__resize_observer__?(t.__resize_observer__.unobserve(t),t.__resize_observer__.disconnect(),t.__resize_observer__=null):(t.__resize_mutation_observer__&&(t.__resize_mutation_observer__.disconnect(),t.__resize_mutation_observer__=null),t.removeEventListener("scroll",UF),t.removeChild(t.__resize_triggers__.triggers),t.__resize_triggers__=null),t.__resize_listeners__=null}!--HL&&x2&&x2.parentNode.removeChild(x2)}}function LMe(t){var e=t.__resize_last__,n=e.width,r=e.height,i=t.offsetWidth,o=t.offsetHeight;return i!==n||o!==r?{width:i,height:o}:null}function DMe(){var t=WL(this),e=t.rendered,n=t.detached;e!==this.__resize_rendered__&&(!n&&this.__resize_triggers__&&(WF(this),this.addEventListener("scroll",UF,!0)),this.__resize_rendered__=e,rT(this))}function UF(){var t=this;WF(this),this.__resize_raf__&&EMe(this.__resize_raf__),this.__resize_raf__=AMe(function(){var e=LMe(t);e&&(t.__resize_last__=e,rT(t))})}function rT(t){!t||!t.__resize_listeners__||t.__resize_listeners__.forEach(function(e){e.call(t,t)})}function MMe(t){var e=Lre(t,"position");(!e||e==="static")&&(t.style.position="relative"),t.__resize_old_position__=e,t.__resize_last__={};var n=rC("div",{className:"resize-triggers"}),r=rC("div",{className:"resize-expand-trigger"}),i=rC("div"),o=rC("div",{className:"resize-contract-trigger"});r.appendChild(i),n.appendChild(r),n.appendChild(o),t.appendChild(n),t.__resize_triggers__={triggers:n,expand:r,expandChild:i,contract:o},WF(t),t.addEventListener("scroll",UF,!0),t.__resize_last__={width:t.offsetWidth,height:t.offsetHeight}}function WF(t){var e=t.__resize_triggers__,n=e.expand,r=e.expandChild,i=e.contract,o=i.scrollWidth,a=i.scrollHeight,s=n.offsetWidth,l=n.offsetHeight,u=n.scrollWidth,c=n.scrollHeight;i.scrollLeft=o,i.scrollTop=a,r.style.width=s+1+"px",r.style.height=l+1+"px",n.scrollLeft=u,n.scrollTop=c}var Jc=function(){return Jc=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Jc.apply(this,arguments)};var NMe=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function FMe(t){return e=Object.create(null),NMe.forEach(function(n){e[n]=function(r){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(!t.value)throw new Error("ECharts is not initialized yet.");return t.value[r].apply(t.value,i)}}(n)}),e;var e}var RMe={autoresize:[Boolean,Object]},VMe=/^on[^a-z]/,BMe=function(t){return VMe.test(t)};function iC(t,e){var n=ri(t);return n&&typeof n=="object"&&"value"in n?n.value||e:n||e}var zMe="ecLoadingOptions",jMe={loading:Boolean,loadingOptions:Object},nb=null,Dre="x-vue-echarts",EU=[],rb=[];(function(t,e){if(t&&typeof document<"u"){var n,r=e.prepend===!0?"prepend":"append",i=e.singleTag===!0,o=typeof e.container=="string"?document.querySelector(e.container):document.getElementsByTagName("head")[0];if(i){var a=EU.indexOf(o);a===-1&&(a=EU.push(o)-1,rb[a]={}),n=rb[a]&&rb[a][r]?rb[a][r]:rb[a][r]=s()}else n=s();t.charCodeAt(0)===65279&&(t=t.substring(1)),n.styleSheet?n.styleSheet.cssText+=t:n.appendChild(document.createTextNode(t))}function s(){var l=document.createElement("style");if(l.setAttribute("type","text/css"),e.attributes)for(var u=Object.keys(e.attributes),c=0;c<u.length;c++)l.setAttribute(u[c],e.attributes[u[c]]);var f=r==="prepend"?"afterbegin":"beforeend";return o.insertAdjacentElement(f,l),l}})(`x-vue-echarts{display:block;width:100%;height:100%;min-width:0}x-vue-echarts>[_echarts_instance_]{width:100%;height:100%}
`,{});var UMe=function(){if(nb!=null)return nb;if(typeof HTMLElement>"u"||typeof customElements>"u")return nb=!1;try{new Function("tag",`class EChartsElement extends HTMLElement {
  __dispose = null;

  disconnectedCallback() {
    if (this.__dispose) {
      this.__dispose();
      this.__dispose = null;
    }
  }
}

if (customElements.get(tag) == null) {
  customElements.define(tag, EChartsElement);
}
`)(Dre)}catch{return nb=!1}return nb=!0}(),Mre="ecTheme",WMe="ecInitOptions",HMe="ecUpdateOptions",GMe=zt({name:"echarts",props:Jc(Jc({option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean},RMe),jMe),emits:{},inheritAttrs:!1,setup:function(t,e){var n=e.attrs,r=rc(),i=rc(),o=rc(),a=rc(),s=Ni(Mre,null),l=Ni(WMe,null),u=Ni(HMe,null),c=UM(t),f=c.autoresize,h=c.manualUpdate,d=c.loading,g=c.loadingOptions,y=Ln(function(){return a.value||t.option||null}),_=Ln(function(){return t.theme||iC(s,{})}),v=Ln(function(){return t.initOptions||iC(l,{})}),S=Ln(function(){return t.updateOptions||iC(u,{})}),C=Ln(function(){return function(I){var M={};for(var L in I)BMe(L)||(M[L]=I[L]);return M}(n)}),k=bu().proxy.$listeners;function x(I){if(i.value){var M=o.value=MDe(i.value,_.value,v.value);t.group&&(M.group=t.group);var L=k;L||(L={},Object.keys(n).filter(function(V){return V.indexOf("on")===0&&V.length>2}).forEach(function(V){var z=V.charAt(2).toLowerCase()+V.slice(3);z.substring(z.length-4)==="Once"&&(z="~".concat(z.substring(0,z.length-4))),L[z]=n[V]})),Object.keys(L).forEach(function(V){var z=L[V];if(z){var ie=V.toLowerCase();ie.charAt(0)==="~"&&(ie=ie.substring(1),z.__once__=!0);var oe=M;if(ie.indexOf("zr:")===0&&(oe=M.getZr(),ie=ie.substring(3)),z.__once__){delete z.__once__;var Se=z;z=function(){for(var Ae=[],Ee=0;Ee<arguments.length;Ee++)Ae[Ee]=arguments[Ee];Se.apply(void 0,Ae),oe.off(ie,z)}}oe.on(ie,z)}}),f.value?A0(function(){M&&!M.isDisposed()&&M.resize(),R()}):R()}function R(){var V=I||y.value;V&&M.setOption(V,S.value)}}function m(){o.value&&(o.value.dispose(),o.value=void 0)}var T=null;wi(h,function(I){typeof T=="function"&&(T(),T=null),I||(T=wi(function(){return t.option},function(M,L){M&&(o.value?o.value.setOption(M,Jc({notMerge:M!==L},S.value)):x())},{deep:!0}))},{immediate:!0}),wi([_,v],function(){m(),x()},{deep:!0}),R4(function(){t.group&&o.value&&(o.value.group=t.group)});var P=FMe(o);return function(I,M,L){var R=Ni(zMe,{}),V=Ln(function(){return Jc(Jc({},iC(R,{})),L==null?void 0:L.value)});R4(function(){var z=I.value;z&&(M.value?z.showLoading(V.value):z.hideLoading())})}(o,d,g),function(I,M,L){var R=null;wi([L,I,M],function(V,z,ie){var oe=V[0],Se=V[1],Ae=V[2];if(oe&&Se&&Ae){var Ee=Ae===!0?{}:Ae,_e=Ee.throttle,se=_e===void 0?100:_e,ne=Ee.onResize,J=function(){Se.resize(),ne==null||ne()};R=se?MF(J,se):J,IMe(oe,R)}ie(function(){oe&&R&&$Me(oe,R)})})}(o,f,i),Bg(function(){x()}),E0(function(){UMe&&r.value?r.value.__dispose=m:m()}),Jc({chart:o,root:r,inner:i,setOption:function(I,M){t.manualUpdate&&(a.value=I),o.value?o.value.setOption(I,M||{}):x(I)},nonEventAttrs:C},P)},render:function(){var t=Jc({},this.nonEventAttrs);return t.ref="root",t.class=t.class?["echarts"].concat(t.class):"echarts",Xh(Dre,t,[Xh("div",{ref:"inner"})])}});const Aa=L0("uiState",{state:()=>({uiAssistMode:"expert",mode:qhe,showModal:"none",showEditor:"none",lastSelectedID:""}),actions:{setMode(t){this.mode=t},setModal(t,e=""){this.showModal=t,this.lastSelectedID=e}}});function lc(t){"@babel/helpers - typeof";return lc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lc(t)}function Nre(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function PU(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Fre(t,e,n){return e&&PU(t.prototype,e),n&&PU(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function qMe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u_(t,e)}function l_(t){return l_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},l_(t)}function u_(t,e){return u_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},u_(t,e)}function Rre(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function c1(t,e,n){return Rre()?c1=Reflect.construct.bind():c1=function(i,o,a){var s=[null];s.push.apply(s,o);var l=Function.bind.apply(i,s),u=new l;return a&&u_(u,a.prototype),u},c1.apply(null,arguments)}function YMe(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function GL(t){var e=typeof Map=="function"?new Map:void 0;return GL=function(r){if(r===null||!YMe(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return c1(r,arguments,l_(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),u_(i,r)},GL(t)}function KMe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function XMe(t,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KMe(t)}function JMe(t){var e=Rre();return function(){var r=l_(t),i;if(e){var o=l_(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return XMe(this,i)}}function ZMe(t){return QMe(t)||eNe(t)||Vre(t)||tNe()}function QMe(t){if(Array.isArray(t))return qL(t)}function eNe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Vre(t,e){if(t){if(typeof t=="string")return qL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qL(t,e)}}function qL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function tNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nNe(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Vre(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,a=!1,s;return{s:function(){n=n.call(t)},n:function(){var l=n.next();return o=l.done,l},e:function(l){a=!0,s=l},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(a)throw s}}}}var qa=Object.prototype.hasOwnProperty;function gp(t,e){return t=t.slice(),t.push(e),t}function YL(t,e){return e=e.slice(),e.unshift(t),e}var rNe=function(t){qMe(n,t);var e=JMe(n);function n(r){var i;return Nre(this,n),i=e.call(this,'JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)'),i.avoidNew=!0,i.value=r,i.name="NewError",i}return Fre(n)}(GL(Error));function Sr(t,e,n,r,i){if(!(this instanceof Sr))try{return new Sr(t,e,n,r,i)}catch(l){if(!l.avoidNew)throw l;return l.value}typeof t=="string"&&(i=r,r=n,n=e,e=t,t=null);var o=t&&lc(t)==="object";if(t=t||{},this.json=t.json||n,this.path=t.path||e,this.resultType=t.resultType||"value",this.flatten=t.flatten||!1,this.wrap=qa.call(t,"wrap")?t.wrap:!0,this.sandbox=t.sandbox||{},this.preventEval=t.preventEval||!1,this.parent=t.parent||null,this.parentProperty=t.parentProperty||null,this.callback=t.callback||r||null,this.otherTypeCallback=t.otherTypeCallback||i||function(){throw new TypeError("You must supply an otherTypeCallback callback option with the @other() operator.")},t.autostart!==!1){var a={path:o?t.path:e};o?"json"in t&&(a.json=t.json):a.json=n;var s=this.evaluate(a);if(!s||lc(s)!=="object")throw new rNe(s);return s}}Sr.prototype.evaluate=function(t,e,n,r){var i=this,o=this.parent,a=this.parentProperty,s=this.flatten,l=this.wrap;if(this.currResultType=this.resultType,this.currPreventEval=this.preventEval,this.currSandbox=this.sandbox,n=n||this.callback,this.currOtherTypeCallback=r||this.otherTypeCallback,e=e||this.json,t=t||this.path,t&&lc(t)==="object"&&!Array.isArray(t)){if(!t.path&&t.path!=="")throw new TypeError('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');if(!qa.call(t,"json"))throw new TypeError('You must supply a "json" property when providing an object argument to JSONPath.evaluate().');var u=t;e=u.json,s=qa.call(t,"flatten")?t.flatten:s,this.currResultType=qa.call(t,"resultType")?t.resultType:this.currResultType,this.currSandbox=qa.call(t,"sandbox")?t.sandbox:this.currSandbox,l=qa.call(t,"wrap")?t.wrap:l,this.currPreventEval=qa.call(t,"preventEval")?t.preventEval:this.currPreventEval,n=qa.call(t,"callback")?t.callback:n,this.currOtherTypeCallback=qa.call(t,"otherTypeCallback")?t.otherTypeCallback:this.currOtherTypeCallback,o=qa.call(t,"parent")?t.parent:o,a=qa.call(t,"parentProperty")?t.parentProperty:a,t=t.path}if(o=o||null,a=a||null,Array.isArray(t)&&(t=Sr.toPathString(t)),!(!t&&t!==""||!e)){var c=Sr.toPathArray(t);c[0]==="$"&&c.length>1&&c.shift(),this._hasParentSelector=null;var f=this._trace(c,e,["$"],o,a,n).filter(function(h){return h&&!h.isParentSelector});return f.length?!l&&f.length===1&&!f[0].hasArrExpr?this._getPreferredOutput(f[0]):f.reduce(function(h,d){var g=i._getPreferredOutput(d);return s&&Array.isArray(g)?h=h.concat(g):h.push(g),h},[]):l?[]:void 0}};Sr.prototype._getPreferredOutput=function(t){var e=this.currResultType;switch(e){case"all":{var n=Array.isArray(t.path)?t.path:Sr.toPathArray(t.path);return t.pointer=Sr.toPointer(n),t.path=typeof t.path=="string"?t.path:Sr.toPathString(t.path),t}case"value":case"parent":case"parentProperty":return t[e];case"path":return Sr.toPathString(t[e]);case"pointer":return Sr.toPointer(t.path);default:throw new TypeError("Unknown result type")}};Sr.prototype._handleCallback=function(t,e,n){if(e){var r=this._getPreferredOutput(t);t.path=typeof t.path=="string"?t.path:Sr.toPathString(t.path),e(r,n,t)}};Sr.prototype._trace=function(t,e,n,r,i,o,a,s){var l=this,u;if(!t.length)return u={path:n,value:e,parent:r,parentProperty:i,hasArrExpr:a},this._handleCallback(u,o,"value"),u;var c=t[0],f=t.slice(1),h=[];function d(L){Array.isArray(L)?L.forEach(function(R){h.push(R)}):h.push(L)}if((typeof c!="string"||s)&&e&&qa.call(e,c))d(this._trace(f,e[c],gp(n,c),e,c,o,a));else if(c==="*")this._walk(e,function(L){d(l._trace(f,e[L],gp(n,L),e,L,o,!0,!0))});else if(c==="..")d(this._trace(f,e,n,r,i,o,a)),this._walk(e,function(L){lc(e[L])==="object"&&d(l._trace(t.slice(),e[L],gp(n,L),e,L,o,!0))});else{if(c==="^")return this._hasParentSelector=!0,{path:n.slice(0,-1),expr:f,isParentSelector:!0};if(c==="~")return u={path:gp(n,c),value:i,parent:r,parentProperty:null},this._handleCallback(u,o,"property"),u;if(c==="$")d(this._trace(f,e,n,null,null,o,a));else if(/^(\x2D?[0-9]*):(\x2D?[0-9]*):?([0-9]*)$/.test(c))d(this._slice(c,f,e,n,r,i,o));else if(c.indexOf("?(")===0){if(this.currPreventEval)throw new Error("Eval [?(expr)] prevented in JSONPath expression.");var g=c.replace(/^\?\(((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?)\)$/,"$1");this._walk(e,function(L){l._eval(g,e[L],L,n,r,i)&&d(l._trace(f,e[L],gp(n,L),e,L,o,!0))})}else if(c[0]==="("){if(this.currPreventEval)throw new Error("Eval [(expr)] prevented in JSONPath expression.");d(this._trace(YL(this._eval(c,e,n[n.length-1],n.slice(0,-1),r,i),f),e,n,r,i,o,a))}else if(c[0]==="@"){var y=!1,_=c.slice(1,-2);switch(_){case"scalar":(!e||!["object","function"].includes(lc(e)))&&(y=!0);break;case"boolean":case"string":case"undefined":case"function":lc(e)===_&&(y=!0);break;case"integer":Number.isFinite(e)&&!(e%1)&&(y=!0);break;case"number":Number.isFinite(e)&&(y=!0);break;case"nonFinite":typeof e=="number"&&!Number.isFinite(e)&&(y=!0);break;case"object":e&&lc(e)===_&&(y=!0);break;case"array":Array.isArray(e)&&(y=!0);break;case"other":y=this.currOtherTypeCallback(e,n,r,i);break;case"null":e===null&&(y=!0);break;default:throw new TypeError("Unknown value type "+_)}if(y)return u={path:n,value:e,parent:r,parentProperty:i},this._handleCallback(u,o,"value"),u}else if(c[0]==="`"&&e&&qa.call(e,c.slice(1))){var v=c.slice(1);d(this._trace(f,e[v],gp(n,v),e,v,o,a,!0))}else if(c.includes(",")){var S=c.split(","),C=nNe(S),k;try{for(C.s();!(k=C.n()).done;){var x=k.value;d(this._trace(YL(x,f),e,n,r,i,o,!0))}}catch(L){C.e(L)}finally{C.f()}}else!s&&e&&qa.call(e,c)&&d(this._trace(f,e[c],gp(n,c),e,c,o,a,!0))}if(this._hasParentSelector)for(var m=0;m<h.length;m++){var T=h[m];if(T&&T.isParentSelector){var P=this._trace(T.expr,e,T.path,r,i,o,a);if(Array.isArray(P)){h[m]=P[0];for(var I=P.length,M=1;M<I;M++)m++,h.splice(m,0,P[M])}else h[m]=P}}return h};Sr.prototype._walk=function(t,e){if(Array.isArray(t))for(var n=t.length,r=0;r<n;r++)e(r);else t&&lc(t)==="object"&&Object.keys(t).forEach(function(i){e(i)})};Sr.prototype._slice=function(t,e,n,r,i,o,a){if(Array.isArray(n)){var s=n.length,l=t.split(":"),u=l[2]&&Number.parseInt(l[2])||1,c=l[0]&&Number.parseInt(l[0])||0,f=l[1]&&Number.parseInt(l[1])||s;c=c<0?Math.max(0,c+s):Math.min(s,c),f=f<0?Math.max(0,f+s):Math.min(s,f);for(var h=[],d=c;d<f;d+=u){var g=this._trace(YL(d,e),n,r,i,o,a,!0);g.forEach(function(y){h.push(y)})}return h}};Sr.prototype._eval=function(t,e,n,r,i,o){this.currSandbox._$_parentProperty=o,this.currSandbox._$_parent=i,this.currSandbox._$_property=n,this.currSandbox._$_root=this.json,this.currSandbox._$_v=e;var a=t.includes("@path");a&&(this.currSandbox._$_path=Sr.toPathString(r.concat([n])));var s="script:"+t;if(!Sr.cache[s]){var l=t.replace(/@parentProperty/g,"_$_parentProperty").replace(/@parent/g,"_$_parent").replace(/@property/g,"_$_property").replace(/@root/g,"_$_root").replace(/@([\t-\r \)\.\[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])/g,"_$_v$1");a&&(l=l.replace(/@path/g,"_$_path")),Sr.cache[s]=new this.vm.Script(l)}try{return Sr.cache[s].runInNewContext(this.currSandbox)}catch(u){throw new Error("jsonPath: "+u.message+": "+t)}};Sr.cache={};Sr.toPathString=function(t){for(var e=t,n=e.length,r="$",i=1;i<n;i++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(e[i])||(r+=/^[\*0-9]+$/.test(e[i])?"["+e[i]+"]":"['"+e[i]+"']");return r};Sr.toPointer=function(t){for(var e=t,n=e.length,r="",i=1;i<n;i++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(e[i])||(r+="/"+e[i].toString().replace(/~/g,"~0").replace(/\//g,"~1"));return r};Sr.toPathArray=function(t){var e=Sr.cache;if(e[t])return e[t].concat();var n=[],r=t.replace(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/g,";$&;").replace(/['\[](\??\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\))['\]]/g,function(o,a){return"[#"+(n.push(a)-1)+"]"}).replace(/\[["']((?:(?!['\]])[\s\S])*)["']\]/g,function(o,a){return"['"+a.replace(/\./g,"%@%").replace(/~/g,"%%@@%%")+"']"}).replace(/~/g,";~;").replace(/["']?\.["']?(?!(?:(?!\[)[\s\S])*\])|\[["']?/g,";").replace(/%@%/g,".").replace(/%%@@%%/g,"~").replace(/(?:;)?(\^+)(?:;)?/g,function(o,a){return";"+a.split("").join(";")+";"}).replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,""),i=r.split(";").map(function(o){var a=o.match(/#([0-9]+)/);return!a||!a[1]?o:n[a[1]]});return e[t]=i,e[t].concat()};var iNe=function(e,n,r){for(var i=e.length,o=0;o<i;o++){var a=e[o];r(a)&&n.push(e.splice(o--,1)[0])}},oNe=function(){function t(e){Nre(this,t),this.code=e}return Fre(t,[{key:"runInNewContext",value:function(n){var r=this.code,i=Object.keys(n),o=[];iNe(i,o,function(c){return typeof n[c]=="function"});var a=i.map(function(c,f){return n[c]}),s=o.reduce(function(c,f){var h=n[f].toString();return/function/.test(h)||(h="function "+h),"var "+f+"="+h+";"+c},"");r=s+r,!/(["'])use strict\1/.test(r)&&!i.includes("arguments")&&(r="var arguments = undefined;"+r),r=r.replace(/;[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*$/,"");var l=r.lastIndexOf(";"),u=l>-1?r.slice(0,l+1)+" return "+r.slice(l+1):" return "+r;return c1(Function,i.concat([u])).apply(void 0,ZMe(a))}}]),t}();Sr.prototype.vm={Script:oNe};function aNe(t,e){return Sr({resultType:"pointer",path:e,json:t})}var ui=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Bre(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){if(this instanceof r){var i=[null];i.push.apply(i,arguments);var o=Function.bind.apply(e,i);return new o}return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var sNe=Object.prototype.hasOwnProperty,lNe=Object.prototype.toString,uNe=function(e,n,r){if(lNe.call(n)!=="[object Function]")throw new TypeError("iterator must be a function");var i=e.length;if(i===+i)for(var o=0;o<i;o++)n.call(r,e[o],o,e);else for(var a in e)sNe.call(e,a)&&n.call(r,e[a],a,e)},cNe=uNe,ud=Pr;function Pr(t,e,n){if(arguments.length===3)return Pr.set(t,e,n);if(arguments.length===2)return Pr.get(t,e);var r=Pr.bind(Pr,t);for(var i in Pr)Pr.hasOwnProperty(i)&&(r[i]=Pr[i].bind(r,t));return r}Pr.get=function(e,n){for(var r=Array.isArray(n)?n:Pr.parse(n),i=0;i<r.length;++i){var o=r[i];if(!(typeof e=="object"&&o in e))throw new Error("Invalid reference token: "+o);e=e[o]}return e};Pr.set=function(e,n,r){var i=Array.isArray(n)?n:Pr.parse(n),o=i[0];if(i.length===0)throw Error("Can not set the root object");for(var a=0;a<i.length-1;++a){var s=i[a];typeof s!="string"&&typeof s!="number"&&(s=String(s)),!(s==="__proto__"||s==="constructor"||s==="prototype")&&(s==="-"&&Array.isArray(e)&&(s=e.length),o=i[a+1],s in e||(o.match(/^(\d+|-)$/)?e[s]=[]:e[s]={}),e=e[s])}return o==="-"&&Array.isArray(e)&&(o=e.length),e[o]=r,this};Pr.remove=function(t,e){var n=Array.isArray(e)?e:Pr.parse(e),r=n[n.length-1];if(r===void 0)throw new Error('Invalid JSON pointer for remove: "'+e+'"');var i=Pr.get(t,n.slice(0,-1));if(Array.isArray(i)){var o=+r;if(r===""&&isNaN(o))throw new Error('Invalid array index: "'+r+'"');Array.prototype.splice.call(i,o,1)}else delete i[r]};Pr.dict=function(e,n){var r={};return Pr.walk(e,function(i,o){r[o]=i},n),r};Pr.walk=function(e,n,r){var i=[];r=r||function(o){var a=Object.prototype.toString.call(o);return a==="[object Object]"||a==="[object Array]"},function o(a){cNe(a,function(s,l){i.push(String(l)),r(s)?o(s):n(s,Pr.compile(i)),i.pop()})}(e)};Pr.has=function(e,n){try{Pr.get(e,n)}catch{return!1}return!0};Pr.escape=function(e){return e.toString().replace(/~/g,"~0").replace(/\//g,"~1")};Pr.unescape=function(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")};Pr.parse=function(e){if(e==="")return[];if(e.charAt(0)!=="/")throw new Error("Invalid JSON pointer: "+e);return e.substring(1).split(/\//).map(Pr.unescape)};Pr.compile=function(e){return e.length===0?"":"/"+e.map(Pr.escape).join("/")};function lg(t,e){return ud.get(t,e)}function zre(t,e){return ud.has(t,e)}function oC(t){return t==="/"||t===""?0:ud.parse(t).length}function OU(t){return t==="/"||t===""?"":ud.compile([ud.parse(t)[0]])}function iT(t){if(t==="/"||t==="")return"";const e=ud.parse(t);return e.length>1?(e.pop(),ud.compile(e)):""}function oT(t){const e=/\["|\.|\[/g,n=/"\]|\]/g;return t.replace(e,"/").replace(n,"")}function c_(t){if(t==="/"||t==="")return"";const e=ud.parse(t).pop();return e||""}function fNe(t,e){return t.sort((n,r)=>{if(n===r)return 0;if(oC(n)>oC(r))return 1;if(oC(n)<oC(r))return-1;{const i=iT(n),o=iT(r);if(i!==o)return 0;{const a=lg(e,i);if(Array.isArray(a)){const s=Number(c_(r));return Number(c_(n))<s?-1:1}else return 0}}})}class IU{constructor(e,n,r,i){Wn(this,"id");Wn(this,"type");Wn(this,"place");Wn(this,"transition");Wn(this,"_filterExpression");Wn(this,"pathExpressions");Wn(this,"assignedPathExpression");Wn(this,"keyVarValue");Wn(this,"valueVarValue");Wn(this,"tokenVarValue");Wn(this,"_tokenVarName");Wn(this,"_valueVarName");Wn(this,"_keyVarName");this.id=i,this.type=r,this.place=e,this.transition=n,this._tokenVarName="",this._valueVarName="",this._keyVarName="",this.updateVarNames(this.place.name,!0),this._filterExpression="$.*",r==="postset"&&(this._filterExpression="$"),this.assignedPathExpression=null,this.keyVarValue="",this.valueVarValue="",this.tokenVarValue={},this.pathExpressions=this.applyFilterExpression(this._filterExpression)}updateVarNames(e,n=!1){const r=this.camelize(e);let i;this.type==="preset"?i="input_":i="output_";const o={token:this._tokenVarName,key:this._keyVarName,value:this._valueVarName};this._tokenVarName=i+r+"_token",this._valueVarName=i+r+"_value",this._keyVarName=i+r+"_key";const a={token:this._tokenVarName,key:this._keyVarName,value:this._valueVarName};n||this.transition.updateSnippets(o,a)}camelize(e){const n=e.replace(/\W+(.)/g,function(i,o){return o.toUpperCase()});return n.charAt(0).toLowerCase()+n.slice(1)}get tokenVarName(){return this._tokenVarName}get valueVarName(){return this._valueVarName}get keyVarName(){return this._keyVarName}applyFilterExpression(e){const n=this.place.marking,r=aNe(n,e);return this.pathExpressions=r,r}assignVariablesByIndex(e){const n=this.pathExpressions[e];return this.assignVariablesByPathExpression(n)}assignTokenVariableByIndex(e){const n=this.pathExpressions[e];return this.assignTokenVariableByPathExpression(n)}assignVariablesByPathExpression(e){const n=this.place.marking;this.assignedPathExpression=e,this.keyVarValue=c_(e),this.valueVarValue=lg(n,e);const r=OU(e);return this.tokenVarValue=lg(n,r),{key:this.keyVarValue,value:this.valueVarValue,token:this.tokenVarValue}}assignTokenVariableByPathExpression(e){const n=this.place.marking;this.assignedPathExpression=e;const r=OU(e);return this.tokenVarValue=lg(n,r),{token:this.tokenVarValue}}assignKeyAndValueVariables(e,n){this.keyVarValue=e,this.valueVarValue=n}resetAssignment(){this.assignedPathExpression=null,this.keyVarValue="",this.valueVarValue="",this.tokenVarValue={}}set filterExpression(e){this._filterExpression=e,this.resetAssignment()}get filterExpression(){return this._filterExpression}}function hNe(t,e){if(!Array.isArray(e)&&!(typeof e=="object"&&e!==null))throw Error("should be object or array");if(Array.isArray(e)){if(e.length===0)return e;let n;if(typeof t=="string"){if(n=parseInt(t),isNaN(n))return e.pop(),e}else n=t;return n>=e.length||n<0?(e.pop(),e):(e.splice(n,1),e)}else return delete e[t],e}function dNe(t,e,n){if(!Array.isArray(e)&&!(typeof e=="object"&&e!==null))return n;if(Array.isArray(e)){if(e.length===0)return e.push(n),e;let r;if(typeof t=="string"){if(r=parseInt(t),isNaN(r))return e.push(n),e}else r=t;return r>=e.length||r<0?(e.push(n),e):(e.splice(r,0,n),e)}else return e[t]=n,e}function aC(t,e){if(!zre(e,t))throw Error("value not valid for path expression");const n=iT(t),r=c_(t),i=lg(e,n);return hNe(r,i),e}function sC(t,e,n,r){if(!zre(e,t))throw Error("value not valid for path expression");const i=lg(e,t);if(pNe(i))return dNe(n,i,r),e;{const o=iT(t),a=c_(t),s=lg(e,o);return s[a]=r,e}}function pNe(t){return Array.isArray(t)?!0:typeof t=="object"&&t!==null}var KL={exports:{}},jre={},du={},f0={},gS={},Sn={},f_={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class e{}t._CodeOrName=e,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends e{constructor(S){if(super(),!t.IDENTIFIER.test(S))throw new Error("CodeGen: name must be a valid identifier");this.str=S}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=n;class r extends e{constructor(S){super(),this._items=typeof S=="string"?[S]:S}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const S=this._items[0];return S===""||S==='""'}get str(){var S;return(S=this._str)!==null&&S!==void 0?S:this._str=this._items.reduce((C,k)=>`${C}${k}`,"")}get names(){var S;return(S=this._names)!==null&&S!==void 0?S:this._names=this._items.reduce((C,k)=>(k instanceof n&&(C[k.str]=(C[k.str]||0)+1),C),{})}}t._Code=r,t.nil=new r("");function i(v,...S){const C=[v[0]];let k=0;for(;k<S.length;)s(C,S[k]),C.push(v[++k]);return new r(C)}t._=i;const o=new r("+");function a(v,...S){const C=[d(v[0])];let k=0;for(;k<S.length;)C.push(o),s(C,S[k]),C.push(o,d(v[++k]));return l(C),new r(C)}t.str=a;function s(v,S){S instanceof r?v.push(...S._items):S instanceof n?v.push(S):v.push(f(S))}t.addCodeArg=s;function l(v){let S=1;for(;S<v.length-1;){if(v[S]===o){const C=u(v[S-1],v[S+1]);if(C!==void 0){v.splice(S-1,3,C);continue}v[S++]="+"}S++}}function u(v,S){if(S==='""')return v;if(v==='""')return S;if(typeof v=="string")return S instanceof n||v[v.length-1]!=='"'?void 0:typeof S!="string"?`${v.slice(0,-1)}${S}"`:S[0]==='"'?v.slice(0,-1)+S.slice(1):void 0;if(typeof S=="string"&&S[0]==='"'&&!(v instanceof n))return`"${v}${S.slice(1)}`}function c(v,S){return S.emptyStr()?v:v.emptyStr()?S:a`${v}${S}`}t.strConcat=c;function f(v){return typeof v=="number"||typeof v=="boolean"||v===null?v:d(Array.isArray(v)?v.join(","):v)}function h(v){return new r(d(v))}t.stringify=h;function d(v){return JSON.stringify(v).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.safeStringify=d;function g(v){return typeof v=="string"&&t.IDENTIFIER.test(v)?new r(`.${v}`):i`[${v}]`}t.getProperty=g;function y(v){if(typeof v=="string"&&t.IDENTIFIER.test(v))return new r(`${v}`);throw new Error(`CodeGen: invalid export name: ${v}, use explicit $id name mapping`)}t.getEsmExportName=y;function _(v){return new r(v.toString())}t.regexpCode=_})(f_);var XL={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const e=f_;class n extends Error{constructor(u){super(`CodeGen: "code" for ${u} not defined`),this.value=u.value}}var r;(function(l){l[l.Started=0]="Started",l[l.Completed=1]="Completed"})(r=t.UsedValueState||(t.UsedValueState={})),t.varKinds={const:new e.Name("const"),let:new e.Name("let"),var:new e.Name("var")};class i{constructor({prefixes:u,parent:c}={}){this._names={},this._prefixes=u,this._parent=c}toName(u){return u instanceof e.Name?u:this.name(u)}name(u){return new e.Name(this._newName(u))}_newName(u){const c=this._names[u]||this._nameGroup(u);return`${u}${c.index++}`}_nameGroup(u){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(u)||this._prefixes&&!this._prefixes.has(u))throw new Error(`CodeGen: prefix "${u}" is not allowed in this scope`);return this._names[u]={prefix:u,index:0}}}t.Scope=i;class o extends e.Name{constructor(u,c){super(c),this.prefix=u}setValue(u,{property:c,itemIndex:f}){this.value=u,this.scopePath=(0,e._)`.${new e.Name(c)}[${f}]`}}t.ValueScopeName=o;const a=(0,e._)`\n`;class s extends i{constructor(u){super(u),this._values={},this._scope=u.scope,this.opts={...u,_n:u.lines?a:e.nil}}get(){return this._scope}name(u){return new o(u,this._newName(u))}value(u,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const h=this.toName(u),{prefix:d}=h,g=(f=c.key)!==null&&f!==void 0?f:c.ref;let y=this._values[d];if(y){const S=y.get(g);if(S)return S}else y=this._values[d]=new Map;y.set(g,h);const _=this._scope[d]||(this._scope[d]=[]),v=_.length;return _[v]=c.ref,h.setValue(c,{property:d,itemIndex:v}),h}getValue(u,c){const f=this._values[u];if(f)return f.get(c)}scopeRefs(u,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,e._)`${u}${f.scopePath}`})}scopeCode(u=this._values,c,f){return this._reduceValues(u,h=>{if(h.value===void 0)throw new Error(`CodeGen: name "${h}" has no value`);return h.value.code},c,f)}_reduceValues(u,c,f={},h){let d=e.nil;for(const g in u){const y=u[g];if(!y)continue;const _=f[g]=f[g]||new Map;y.forEach(v=>{if(_.has(v))return;_.set(v,r.Started);let S=c(v);if(S){const C=this.opts.es5?t.varKinds.var:t.varKinds.const;d=(0,e._)`${d}${C} ${v} = ${S};${this.opts._n}`}else if(S=h==null?void 0:h(v))d=(0,e._)`${d}${S}${this.opts._n}`;else throw new n(v);_.set(v,r.Completed)})}return d}}t.ValueScope=s})(XL);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const e=f_,n=XL;var r=f_;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return r.Name}});var i=XL;Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),t.operators={GT:new e._Code(">"),GTE:new e._Code(">="),LT:new e._Code("<"),LTE:new e._Code("<="),EQ:new e._Code("==="),NEQ:new e._Code("!=="),NOT:new e._Code("!"),OR:new e._Code("||"),AND:new e._Code("&&"),ADD:new e._Code("+")};class o{optimizeNodes(){return this}optimizeNames(B,H){return this}}class a extends o{constructor(B,H,ae){super(),this.varKind=B,this.name=H,this.rhs=ae}render({es5:B,_n:H}){const ae=B?n.varKinds.var:this.varKind,te=this.rhs===void 0?"":` = ${this.rhs}`;return`${ae} ${this.name}${te};`+H}optimizeNames(B,H){if(B[this.name.str])return this.rhs&&(this.rhs=z(this.rhs,B,H)),this}get names(){return this.rhs instanceof e._CodeOrName?this.rhs.names:{}}}class s extends o{constructor(B,H,ae){super(),this.lhs=B,this.rhs=H,this.sideEffects=ae}render({_n:B}){return`${this.lhs} = ${this.rhs};`+B}optimizeNames(B,H){if(!(this.lhs instanceof e.Name&&!B[this.lhs.str]&&!this.sideEffects))return this.rhs=z(this.rhs,B,H),this}get names(){const B=this.lhs instanceof e.Name?{}:{...this.lhs.names};return V(B,this.rhs)}}class l extends s{constructor(B,H,ae,te){super(B,ae,te),this.op=H}render({_n:B}){return`${this.lhs} ${this.op}= ${this.rhs};`+B}}class u extends o{constructor(B){super(),this.label=B,this.names={}}render({_n:B}){return`${this.label}:`+B}}class c extends o{constructor(B){super(),this.label=B,this.names={}}render({_n:B}){return`break${this.label?` ${this.label}`:""};`+B}}class f extends o{constructor(B){super(),this.error=B}render({_n:B}){return`throw ${this.error};`+B}get names(){return this.error.names}}class h extends o{constructor(B){super(),this.code=B}render({_n:B}){return`${this.code};`+B}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(B,H){return this.code=z(this.code,B,H),this}get names(){return this.code instanceof e._CodeOrName?this.code.names:{}}}class d extends o{constructor(B=[]){super(),this.nodes=B}render(B){return this.nodes.reduce((H,ae)=>H+ae.render(B),"")}optimizeNodes(){const{nodes:B}=this;let H=B.length;for(;H--;){const ae=B[H].optimizeNodes();Array.isArray(ae)?B.splice(H,1,...ae):ae?B[H]=ae:B.splice(H,1)}return B.length>0?this:void 0}optimizeNames(B,H){const{nodes:ae}=this;let te=ae.length;for(;te--;){const ce=ae[te];ce.optimizeNames(B,H)||(ie(B,ce.names),ae.splice(te,1))}return ae.length>0?this:void 0}get names(){return this.nodes.reduce((B,H)=>R(B,H.names),{})}}class g extends d{render(B){return"{"+B._n+super.render(B)+"}"+B._n}}class y extends d{}class _ extends g{}_.kind="else";class v extends g{constructor(B,H){super(H),this.condition=B}render(B){let H=`if(${this.condition})`+super.render(B);return this.else&&(H+="else "+this.else.render(B)),H}optimizeNodes(){super.optimizeNodes();const B=this.condition;if(B===!0)return this.nodes;let H=this.else;if(H){const ae=H.optimizeNodes();H=this.else=Array.isArray(ae)?new _(ae):ae}if(H)return B===!1?H instanceof v?H:H.nodes:this.nodes.length?this:new v(oe(B),H instanceof v?[H]:H.nodes);if(!(B===!1||!this.nodes.length))return this}optimizeNames(B,H){var ae;if(this.else=(ae=this.else)===null||ae===void 0?void 0:ae.optimizeNames(B,H),!!(super.optimizeNames(B,H)||this.else))return this.condition=z(this.condition,B,H),this}get names(){const B=super.names;return V(B,this.condition),this.else&&R(B,this.else.names),B}}v.kind="if";class S extends g{}S.kind="for";class C extends S{constructor(B){super(),this.iteration=B}render(B){return`for(${this.iteration})`+super.render(B)}optimizeNames(B,H){if(super.optimizeNames(B,H))return this.iteration=z(this.iteration,B,H),this}get names(){return R(super.names,this.iteration.names)}}class k extends S{constructor(B,H,ae,te){super(),this.varKind=B,this.name=H,this.from=ae,this.to=te}render(B){const H=B.es5?n.varKinds.var:this.varKind,{name:ae,from:te,to:ce}=this;return`for(${H} ${ae}=${te}; ${ae}<${ce}; ${ae}++)`+super.render(B)}get names(){const B=V(super.names,this.from);return V(B,this.to)}}class x extends S{constructor(B,H,ae,te){super(),this.loop=B,this.varKind=H,this.name=ae,this.iterable=te}render(B){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(B)}optimizeNames(B,H){if(super.optimizeNames(B,H))return this.iterable=z(this.iterable,B,H),this}get names(){return R(super.names,this.iterable.names)}}class m extends g{constructor(B,H,ae){super(),this.name=B,this.args=H,this.async=ae}render(B){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(B)}}m.kind="func";class T extends d{render(B){return"return "+super.render(B)}}T.kind="return";class P extends g{render(B){let H="try"+super.render(B);return this.catch&&(H+=this.catch.render(B)),this.finally&&(H+=this.finally.render(B)),H}optimizeNodes(){var B,H;return super.optimizeNodes(),(B=this.catch)===null||B===void 0||B.optimizeNodes(),(H=this.finally)===null||H===void 0||H.optimizeNodes(),this}optimizeNames(B,H){var ae,te;return super.optimizeNames(B,H),(ae=this.catch)===null||ae===void 0||ae.optimizeNames(B,H),(te=this.finally)===null||te===void 0||te.optimizeNames(B,H),this}get names(){const B=super.names;return this.catch&&R(B,this.catch.names),this.finally&&R(B,this.finally.names),B}}class I extends g{constructor(B){super(),this.error=B}render(B){return`catch(${this.error})`+super.render(B)}}I.kind="catch";class M extends g{render(B){return"finally"+super.render(B)}}M.kind="finally";class L{constructor(B,H={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...H,_n:H.lines?`
`:""},this._extScope=B,this._scope=new n.Scope({parent:B}),this._nodes=[new y]}toString(){return this._root.render(this.opts)}name(B){return this._scope.name(B)}scopeName(B){return this._extScope.name(B)}scopeValue(B,H){const ae=this._extScope.value(B,H);return(this._values[ae.prefix]||(this._values[ae.prefix]=new Set)).add(ae),ae}getScopeValue(B,H){return this._extScope.getValue(B,H)}scopeRefs(B){return this._extScope.scopeRefs(B,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(B,H,ae,te){const ce=this._scope.toName(H);return ae!==void 0&&te&&(this._constants[ce.str]=ae),this._leafNode(new a(B,ce,ae)),ce}const(B,H,ae){return this._def(n.varKinds.const,B,H,ae)}let(B,H,ae){return this._def(n.varKinds.let,B,H,ae)}var(B,H,ae){return this._def(n.varKinds.var,B,H,ae)}assign(B,H,ae){return this._leafNode(new s(B,H,ae))}add(B,H){return this._leafNode(new l(B,t.operators.ADD,H))}code(B){return typeof B=="function"?B():B!==e.nil&&this._leafNode(new h(B)),this}object(...B){const H=["{"];for(const[ae,te]of B)H.length>1&&H.push(","),H.push(ae),(ae!==te||this.opts.es5)&&(H.push(":"),(0,e.addCodeArg)(H,te));return H.push("}"),new e._Code(H)}if(B,H,ae){if(this._blockNode(new v(B)),H&&ae)this.code(H).else().code(ae).endIf();else if(H)this.code(H).endIf();else if(ae)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(B){return this._elseNode(new v(B))}else(){return this._elseNode(new _)}endIf(){return this._endBlockNode(v,_)}_for(B,H){return this._blockNode(B),H&&this.code(H).endFor(),this}for(B,H){return this._for(new C(B),H)}forRange(B,H,ae,te,ce=this.opts.es5?n.varKinds.var:n.varKinds.let){const ue=this._scope.toName(B);return this._for(new k(ce,ue,H,ae),()=>te(ue))}forOf(B,H,ae,te=n.varKinds.const){const ce=this._scope.toName(B);if(this.opts.es5){const ue=H instanceof e.Name?H:this.var("_arr",H);return this.forRange("_i",0,(0,e._)`${ue}.length`,fe=>{this.var(ce,(0,e._)`${ue}[${fe}]`),ae(ce)})}return this._for(new x("of",te,ce,H),()=>ae(ce))}forIn(B,H,ae,te=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(B,(0,e._)`Object.keys(${H})`,ae);const ce=this._scope.toName(B);return this._for(new x("in",te,ce,H),()=>ae(ce))}endFor(){return this._endBlockNode(S)}label(B){return this._leafNode(new u(B))}break(B){return this._leafNode(new c(B))}return(B){const H=new T;if(this._blockNode(H),this.code(B),H.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(T)}try(B,H,ae){if(!H&&!ae)throw new Error('CodeGen: "try" without "catch" and "finally"');const te=new P;if(this._blockNode(te),this.code(B),H){const ce=this.name("e");this._currNode=te.catch=new I(ce),H(ce)}return ae&&(this._currNode=te.finally=new M,this.code(ae)),this._endBlockNode(I,M)}throw(B){return this._leafNode(new f(B))}block(B,H){return this._blockStarts.push(this._nodes.length),B&&this.code(B).endBlock(H),this}endBlock(B){const H=this._blockStarts.pop();if(H===void 0)throw new Error("CodeGen: not in self-balancing block");const ae=this._nodes.length-H;if(ae<0||B!==void 0&&ae!==B)throw new Error(`CodeGen: wrong number of nodes: ${ae} vs ${B} expected`);return this._nodes.length=H,this}func(B,H=e.nil,ae,te){return this._blockNode(new m(B,H,ae)),te&&this.code(te).endFunc(),this}endFunc(){return this._endBlockNode(m)}optimize(B=1){for(;B-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(B){return this._currNode.nodes.push(B),this}_blockNode(B){this._currNode.nodes.push(B),this._nodes.push(B)}_endBlockNode(B,H){const ae=this._currNode;if(ae instanceof B||H&&ae instanceof H)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${H?`${B.kind}/${H.kind}`:B.kind}"`)}_elseNode(B){const H=this._currNode;if(!(H instanceof v))throw new Error('CodeGen: "else" without "if"');return this._currNode=H.else=B,this}get _root(){return this._nodes[0]}get _currNode(){const B=this._nodes;return B[B.length-1]}set _currNode(B){const H=this._nodes;H[H.length-1]=B}}t.CodeGen=L;function R(J,B){for(const H in B)J[H]=(J[H]||0)+(B[H]||0);return J}function V(J,B){return B instanceof e._CodeOrName?R(J,B.names):J}function z(J,B,H){if(J instanceof e.Name)return ae(J);if(!te(J))return J;return new e._Code(J._items.reduce((ce,ue)=>(ue instanceof e.Name&&(ue=ae(ue)),ue instanceof e._Code?ce.push(...ue._items):ce.push(ue),ce),[]));function ae(ce){const ue=H[ce.str];return ue===void 0||B[ce.str]!==1?ce:(delete B[ce.str],ue)}function te(ce){return ce instanceof e._Code&&ce._items.some(ue=>ue instanceof e.Name&&B[ue.str]===1&&H[ue.str]!==void 0)}}function ie(J,B){for(const H in B)J[H]=(J[H]||0)-(B[H]||0)}function oe(J){return typeof J=="boolean"||typeof J=="number"||J===null?!J:(0,e._)`!${ne(J)}`}t.not=oe;const Se=se(t.operators.AND);function Ae(...J){return J.reduce(Se)}t.and=Ae;const Ee=se(t.operators.OR);function _e(...J){return J.reduce(Ee)}t.or=_e;function se(J){return(B,H)=>B===e.nil?H:H===e.nil?B:(0,e._)`${ne(B)} ${J} ${ne(H)}`}function ne(J){return J instanceof e.Name?J:(0,e._)`(${J})`}})(Sn);var er={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.checkStrictMode=t.getErrorPath=t.Type=t.useFunc=t.setEvaluated=t.evaluatedPropsToName=t.mergeEvaluated=t.eachItem=t.unescapeJsonPointer=t.escapeJsonPointer=t.escapeFragment=t.unescapeFragment=t.schemaRefOrVal=t.schemaHasRulesButRef=t.schemaHasRules=t.checkUnknownRules=t.alwaysValidSchema=t.toHash=void 0;const e=Sn,n=f_;function r(m){const T={};for(const P of m)T[P]=!0;return T}t.toHash=r;function i(m,T){return typeof T=="boolean"?T:Object.keys(T).length===0?!0:(o(m,T),!a(T,m.self.RULES.all))}t.alwaysValidSchema=i;function o(m,T=m.schema){const{opts:P,self:I}=m;if(!P.strictSchema||typeof T=="boolean")return;const M=I.RULES.keywords;for(const L in T)M[L]||x(m,`unknown keyword: "${L}"`)}t.checkUnknownRules=o;function a(m,T){if(typeof m=="boolean")return!m;for(const P in m)if(T[P])return!0;return!1}t.schemaHasRules=a;function s(m,T){if(typeof m=="boolean")return!m;for(const P in m)if(P!=="$ref"&&T.all[P])return!0;return!1}t.schemaHasRulesButRef=s;function l({topSchemaRef:m,schemaPath:T},P,I,M){if(!M){if(typeof P=="number"||typeof P=="boolean")return P;if(typeof P=="string")return(0,e._)`${P}`}return(0,e._)`${m}${T}${(0,e.getProperty)(I)}`}t.schemaRefOrVal=l;function u(m){return h(decodeURIComponent(m))}t.unescapeFragment=u;function c(m){return encodeURIComponent(f(m))}t.escapeFragment=c;function f(m){return typeof m=="number"?`${m}`:m.replace(/~/g,"~0").replace(/\//g,"~1")}t.escapeJsonPointer=f;function h(m){return m.replace(/~1/g,"/").replace(/~0/g,"~")}t.unescapeJsonPointer=h;function d(m,T){if(Array.isArray(m))for(const P of m)T(P);else T(m)}t.eachItem=d;function g({mergeNames:m,mergeToName:T,mergeValues:P,resultToName:I}){return(M,L,R,V)=>{const z=R===void 0?L:R instanceof e.Name?(L instanceof e.Name?m(M,L,R):T(M,L,R),R):L instanceof e.Name?(T(M,R,L),L):P(L,R);return V===e.Name&&!(z instanceof e.Name)?I(M,z):z}}t.mergeEvaluated={props:g({mergeNames:(m,T,P)=>m.if((0,e._)`${P} !== true && ${T} !== undefined`,()=>{m.if((0,e._)`${T} === true`,()=>m.assign(P,!0),()=>m.assign(P,(0,e._)`${P} || {}`).code((0,e._)`Object.assign(${P}, ${T})`))}),mergeToName:(m,T,P)=>m.if((0,e._)`${P} !== true`,()=>{T===!0?m.assign(P,!0):(m.assign(P,(0,e._)`${P} || {}`),_(m,P,T))}),mergeValues:(m,T)=>m===!0?!0:{...m,...T},resultToName:y}),items:g({mergeNames:(m,T,P)=>m.if((0,e._)`${P} !== true && ${T} !== undefined`,()=>m.assign(P,(0,e._)`${T} === true ? true : ${P} > ${T} ? ${P} : ${T}`)),mergeToName:(m,T,P)=>m.if((0,e._)`${P} !== true`,()=>m.assign(P,T===!0?!0:(0,e._)`${P} > ${T} ? ${P} : ${T}`)),mergeValues:(m,T)=>m===!0?!0:Math.max(m,T),resultToName:(m,T)=>m.var("items",T)})};function y(m,T){if(T===!0)return m.var("props",!0);const P=m.var("props",(0,e._)`{}`);return T!==void 0&&_(m,P,T),P}t.evaluatedPropsToName=y;function _(m,T,P){Object.keys(P).forEach(I=>m.assign((0,e._)`${T}${(0,e.getProperty)(I)}`,!0))}t.setEvaluated=_;const v={};function S(m,T){return m.scopeValue("func",{ref:T,code:v[T.code]||(v[T.code]=new n._Code(T.code))})}t.useFunc=S;var C;(function(m){m[m.Num=0]="Num",m[m.Str=1]="Str"})(C=t.Type||(t.Type={}));function k(m,T,P){if(m instanceof e.Name){const I=T===C.Num;return P?I?(0,e._)`"[" + ${m} + "]"`:(0,e._)`"['" + ${m} + "']"`:I?(0,e._)`"/" + ${m}`:(0,e._)`"/" + ${m}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return P?(0,e.getProperty)(m).toString():"/"+f(m)}t.getErrorPath=k;function x(m,T,P=m.opts.strictSchema){if(P){if(T=`strict mode: ${T}`,P===!0)throw new Error(T);m.self.logger.warn(T)}}t.checkStrictMode=x})(er);var kc={};Object.defineProperty(kc,"__esModule",{value:!0});const Bo=Sn,gNe={data:new Bo.Name("data"),valCxt:new Bo.Name("valCxt"),instancePath:new Bo.Name("instancePath"),parentData:new Bo.Name("parentData"),parentDataProperty:new Bo.Name("parentDataProperty"),rootData:new Bo.Name("rootData"),dynamicAnchors:new Bo.Name("dynamicAnchors"),vErrors:new Bo.Name("vErrors"),errors:new Bo.Name("errors"),this:new Bo.Name("this"),self:new Bo.Name("self"),scope:new Bo.Name("scope"),json:new Bo.Name("json"),jsonPos:new Bo.Name("jsonPos"),jsonLen:new Bo.Name("jsonLen"),jsonPart:new Bo.Name("jsonPart")};kc.default=gNe;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const e=Sn,n=er,r=kc;t.keywordError={message:({keyword:_})=>(0,e.str)`must pass "${_}" keyword validation`},t.keyword$DataError={message:({keyword:_,schemaType:v})=>v?(0,e.str)`"${_}" keyword must be ${v} ($data)`:(0,e.str)`"${_}" keyword is invalid ($data)`};function i(_,v=t.keywordError,S,C){const{it:k}=_,{gen:x,compositeRule:m,allErrors:T}=k,P=f(_,v,S);C??(m||T)?l(x,P):u(k,(0,e._)`[${P}]`)}t.reportError=i;function o(_,v=t.keywordError,S){const{it:C}=_,{gen:k,compositeRule:x,allErrors:m}=C,T=f(_,v,S);l(k,T),x||m||u(C,r.default.vErrors)}t.reportExtraError=o;function a(_,v){_.assign(r.default.errors,v),_.if((0,e._)`${r.default.vErrors} !== null`,()=>_.if(v,()=>_.assign((0,e._)`${r.default.vErrors}.length`,v),()=>_.assign(r.default.vErrors,null)))}t.resetErrorsCount=a;function s({gen:_,keyword:v,schemaValue:S,data:C,errsCount:k,it:x}){if(k===void 0)throw new Error("ajv implementation error");const m=_.name("err");_.forRange("i",k,r.default.errors,T=>{_.const(m,(0,e._)`${r.default.vErrors}[${T}]`),_.if((0,e._)`${m}.instancePath === undefined`,()=>_.assign((0,e._)`${m}.instancePath`,(0,e.strConcat)(r.default.instancePath,x.errorPath))),_.assign((0,e._)`${m}.schemaPath`,(0,e.str)`${x.errSchemaPath}/${v}`),x.opts.verbose&&(_.assign((0,e._)`${m}.schema`,S),_.assign((0,e._)`${m}.data`,C))})}t.extendErrors=s;function l(_,v){const S=_.const("err",v);_.if((0,e._)`${r.default.vErrors} === null`,()=>_.assign(r.default.vErrors,(0,e._)`[${S}]`),(0,e._)`${r.default.vErrors}.push(${S})`),_.code((0,e._)`${r.default.errors}++`)}function u(_,v){const{gen:S,validateName:C,schemaEnv:k}=_;k.$async?S.throw((0,e._)`new ${_.ValidationError}(${v})`):(S.assign((0,e._)`${C}.errors`,v),S.return(!1))}const c={keyword:new e.Name("keyword"),schemaPath:new e.Name("schemaPath"),params:new e.Name("params"),propertyName:new e.Name("propertyName"),message:new e.Name("message"),schema:new e.Name("schema"),parentSchema:new e.Name("parentSchema")};function f(_,v,S){const{createErrors:C}=_.it;return C===!1?(0,e._)`{}`:h(_,v,S)}function h(_,v,S={}){const{gen:C,it:k}=_,x=[d(k,S),g(_,S)];return y(_,v,x),C.object(...x)}function d({errorPath:_},{instancePath:v}){const S=v?(0,e.str)`${_}${(0,n.getErrorPath)(v,n.Type.Str)}`:_;return[r.default.instancePath,(0,e.strConcat)(r.default.instancePath,S)]}function g({keyword:_,it:{errSchemaPath:v}},{schemaPath:S,parentSchema:C}){let k=C?v:(0,e.str)`${v}/${_}`;return S&&(k=(0,e.str)`${k}${(0,n.getErrorPath)(S,n.Type.Str)}`),[c.schemaPath,k]}function y(_,{params:v,message:S},C){const{keyword:k,data:x,schemaValue:m,it:T}=_,{opts:P,propertyName:I,topSchemaRef:M,schemaPath:L}=T;C.push([c.keyword,k],[c.params,typeof v=="function"?v(_):v||(0,e._)`{}`]),P.messages&&C.push([c.message,typeof S=="function"?S(_):S]),P.verbose&&C.push([c.schema,m],[c.parentSchema,(0,e._)`${M}${L}`],[r.default.data,x]),I&&C.push([c.propertyName,I])}})(gS);Object.defineProperty(f0,"__esModule",{value:!0});f0.boolOrEmptySchema=f0.topBoolOrEmptySchema=void 0;const mNe=gS,vNe=Sn,yNe=kc,bNe={message:"boolean schema is false"};function _Ne(t){const{gen:e,schema:n,validateName:r}=t;n===!1?Ure(t,!1):typeof n=="object"&&n.$async===!0?e.return(yNe.default.data):(e.assign((0,vNe._)`${r}.errors`,null),e.return(!0))}f0.topBoolOrEmptySchema=_Ne;function SNe(t,e){const{gen:n,schema:r}=t;r===!1?(n.var(e,!1),Ure(t)):n.var(e,!0)}f0.boolOrEmptySchema=SNe;function Ure(t,e){const{gen:n,data:r}=t,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,mNe.reportError)(i,bNe,void 0,e)}var mS={},Ag={};Object.defineProperty(Ag,"__esModule",{value:!0});Ag.getRules=Ag.isJSONType=void 0;const wNe=["string","number","integer","boolean","null","object","array"],xNe=new Set(wNe);function CNe(t){return typeof t=="string"&&xNe.has(t)}Ag.isJSONType=CNe;function kNe(){const t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}Ag.getRules=kNe;var vf={};Object.defineProperty(vf,"__esModule",{value:!0});vf.shouldUseRule=vf.shouldUseGroup=vf.schemaHasRulesForType=void 0;function TNe({schema:t,self:e},n){const r=e.RULES.types[n];return r&&r!==!0&&Wre(t,r)}vf.schemaHasRulesForType=TNe;function Wre(t,e){return e.rules.some(n=>Hre(t,n))}vf.shouldUseGroup=Wre;function Hre(t,e){var n;return t[e.keyword]!==void 0||((n=e.definition.implements)===null||n===void 0?void 0:n.some(r=>t[r]!==void 0))}vf.shouldUseRule=Hre;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.reportTypeError=t.checkDataTypes=t.checkDataType=t.coerceAndCheckDataType=t.getJSONTypes=t.getSchemaTypes=t.DataType=void 0;const e=Ag,n=vf,r=gS,i=Sn,o=er;var a;(function(C){C[C.Correct=0]="Correct",C[C.Wrong=1]="Wrong"})(a=t.DataType||(t.DataType={}));function s(C){const k=l(C.type);if(k.includes("null")){if(C.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!k.length&&C.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');C.nullable===!0&&k.push("null")}return k}t.getSchemaTypes=s;function l(C){const k=Array.isArray(C)?C:C?[C]:[];if(k.every(e.isJSONType))return k;throw new Error("type must be JSONType or JSONType[]: "+k.join(","))}t.getJSONTypes=l;function u(C,k){const{gen:x,data:m,opts:T}=C,P=f(k,T.coerceTypes),I=k.length>0&&!(P.length===0&&k.length===1&&(0,n.schemaHasRulesForType)(C,k[0]));if(I){const M=y(k,m,T.strictNumbers,a.Wrong);x.if(M,()=>{P.length?h(C,k,P):v(C)})}return I}t.coerceAndCheckDataType=u;const c=new Set(["string","number","integer","boolean","null"]);function f(C,k){return k?C.filter(x=>c.has(x)||k==="array"&&x==="array"):[]}function h(C,k,x){const{gen:m,data:T,opts:P}=C,I=m.let("dataType",(0,i._)`typeof ${T}`),M=m.let("coerced",(0,i._)`undefined`);P.coerceTypes==="array"&&m.if((0,i._)`${I} == 'object' && Array.isArray(${T}) && ${T}.length == 1`,()=>m.assign(T,(0,i._)`${T}[0]`).assign(I,(0,i._)`typeof ${T}`).if(y(k,T,P.strictNumbers),()=>m.assign(M,T))),m.if((0,i._)`${M} !== undefined`);for(const R of x)(c.has(R)||R==="array"&&P.coerceTypes==="array")&&L(R);m.else(),v(C),m.endIf(),m.if((0,i._)`${M} !== undefined`,()=>{m.assign(T,M),d(C,M)});function L(R){switch(R){case"string":m.elseIf((0,i._)`${I} == "number" || ${I} == "boolean"`).assign(M,(0,i._)`"" + ${T}`).elseIf((0,i._)`${T} === null`).assign(M,(0,i._)`""`);return;case"number":m.elseIf((0,i._)`${I} == "boolean" || ${T} === null
              || (${I} == "string" && ${T} && ${T} == +${T})`).assign(M,(0,i._)`+${T}`);return;case"integer":m.elseIf((0,i._)`${I} === "boolean" || ${T} === null
              || (${I} === "string" && ${T} && ${T} == +${T} && !(${T} % 1))`).assign(M,(0,i._)`+${T}`);return;case"boolean":m.elseIf((0,i._)`${T} === "false" || ${T} === 0 || ${T} === null`).assign(M,!1).elseIf((0,i._)`${T} === "true" || ${T} === 1`).assign(M,!0);return;case"null":m.elseIf((0,i._)`${T} === "" || ${T} === 0 || ${T} === false`),m.assign(M,null);return;case"array":m.elseIf((0,i._)`${I} === "string" || ${I} === "number"
              || ${I} === "boolean" || ${T} === null`).assign(M,(0,i._)`[${T}]`)}}}function d({gen:C,parentData:k,parentDataProperty:x},m){C.if((0,i._)`${k} !== undefined`,()=>C.assign((0,i._)`${k}[${x}]`,m))}function g(C,k,x,m=a.Correct){const T=m===a.Correct?i.operators.EQ:i.operators.NEQ;let P;switch(C){case"null":return(0,i._)`${k} ${T} null`;case"array":P=(0,i._)`Array.isArray(${k})`;break;case"object":P=(0,i._)`${k} && typeof ${k} == "object" && !Array.isArray(${k})`;break;case"integer":P=I((0,i._)`!(${k} % 1) && !isNaN(${k})`);break;case"number":P=I();break;default:return(0,i._)`typeof ${k} ${T} ${C}`}return m===a.Correct?P:(0,i.not)(P);function I(M=i.nil){return(0,i.and)((0,i._)`typeof ${k} == "number"`,M,x?(0,i._)`isFinite(${k})`:i.nil)}}t.checkDataType=g;function y(C,k,x,m){if(C.length===1)return g(C[0],k,x,m);let T;const P=(0,o.toHash)(C);if(P.array&&P.object){const I=(0,i._)`typeof ${k} != "object"`;T=P.null?I:(0,i._)`!${k} || ${I}`,delete P.null,delete P.array,delete P.object}else T=i.nil;P.number&&delete P.integer;for(const I in P)T=(0,i.and)(T,g(I,k,x,m));return T}t.checkDataTypes=y;const _={message:({schema:C})=>`must be ${C}`,params:({schema:C,schemaValue:k})=>typeof C=="string"?(0,i._)`{type: ${C}}`:(0,i._)`{type: ${k}}`};function v(C){const k=S(C);(0,r.reportError)(k,_)}t.reportTypeError=v;function S(C){const{gen:k,data:x,schema:m}=C,T=(0,o.schemaRefOrVal)(C,m,"type");return{gen:k,keyword:"type",data:x,schema:m.type,schemaCode:T,schemaValue:T,parentSchema:m,params:{},it:C}}})(mS);var tE={};Object.defineProperty(tE,"__esModule",{value:!0});tE.assignDefaults=void 0;const Mm=Sn,ANe=er;function ENe(t,e){const{properties:n,items:r}=t.schema;if(e==="object"&&n)for(const i in n)$U(t,i,n[i].default);else e==="array"&&Array.isArray(r)&&r.forEach((i,o)=>$U(t,o,i.default))}tE.assignDefaults=ENe;function $U(t,e,n){const{gen:r,compositeRule:i,data:o,opts:a}=t;if(n===void 0)return;const s=(0,Mm._)`${o}${(0,Mm.getProperty)(e)}`;if(i){(0,ANe.checkStrictMode)(t,`default is ignored for: ${s}`);return}let l=(0,Mm._)`${s} === undefined`;a.useDefaults==="empty"&&(l=(0,Mm._)`${l} || ${s} === null || ${s} === ""`),r.if(l,(0,Mm._)`${s} = ${(0,Mm.stringify)(n)}`)}var uc={},Tn={};Object.defineProperty(Tn,"__esModule",{value:!0});Tn.validateUnion=Tn.validateArray=Tn.usePattern=Tn.callValidateCode=Tn.schemaProperties=Tn.allSchemaProperties=Tn.noPropertyInData=Tn.propertyInData=Tn.isOwnProperty=Tn.hasPropFunc=Tn.reportMissingProp=Tn.checkMissingProp=Tn.checkReportMissingProp=void 0;const Xr=Sn,HF=er,ih=kc,PNe=er;function ONe(t,e){const{gen:n,data:r,it:i}=t;n.if(qF(n,r,e,i.opts.ownProperties),()=>{t.setParams({missingProperty:(0,Xr._)`${e}`},!0),t.error()})}Tn.checkReportMissingProp=ONe;function INe({gen:t,data:e,it:{opts:n}},r,i){return(0,Xr.or)(...r.map(o=>(0,Xr.and)(qF(t,e,o,n.ownProperties),(0,Xr._)`${i} = ${o}`)))}Tn.checkMissingProp=INe;function $Ne(t,e){t.setParams({missingProperty:e},!0),t.error()}Tn.reportMissingProp=$Ne;function Gre(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,Xr._)`Object.prototype.hasOwnProperty`})}Tn.hasPropFunc=Gre;function GF(t,e,n){return(0,Xr._)`${Gre(t)}.call(${e}, ${n})`}Tn.isOwnProperty=GF;function LNe(t,e,n,r){const i=(0,Xr._)`${e}${(0,Xr.getProperty)(n)} !== undefined`;return r?(0,Xr._)`${i} && ${GF(t,e,n)}`:i}Tn.propertyInData=LNe;function qF(t,e,n,r){const i=(0,Xr._)`${e}${(0,Xr.getProperty)(n)} === undefined`;return r?(0,Xr.or)(i,(0,Xr.not)(GF(t,e,n))):i}Tn.noPropertyInData=qF;function qre(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}Tn.allSchemaProperties=qre;function DNe(t,e){return qre(e).filter(n=>!(0,HF.alwaysValidSchema)(t,e[n]))}Tn.schemaProperties=DNe;function MNe({schemaCode:t,data:e,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:o},it:a},s,l,u){const c=u?(0,Xr._)`${t}, ${e}, ${r}${i}`:e,f=[[ih.default.instancePath,(0,Xr.strConcat)(ih.default.instancePath,o)],[ih.default.parentData,a.parentData],[ih.default.parentDataProperty,a.parentDataProperty],[ih.default.rootData,ih.default.rootData]];a.opts.dynamicRef&&f.push([ih.default.dynamicAnchors,ih.default.dynamicAnchors]);const h=(0,Xr._)`${c}, ${n.object(...f)}`;return l!==Xr.nil?(0,Xr._)`${s}.call(${l}, ${h})`:(0,Xr._)`${s}(${h})`}Tn.callValidateCode=MNe;const NNe=(0,Xr._)`new RegExp`;function FNe({gen:t,it:{opts:e}},n){const r=e.unicodeRegExp?"u":"",{regExp:i}=e.code,o=i(n,r);return t.scopeValue("pattern",{key:o.toString(),ref:o,code:(0,Xr._)`${i.code==="new RegExp"?NNe:(0,PNe.useFunc)(t,i)}(${n}, ${r})`})}Tn.usePattern=FNe;function RNe(t){const{gen:e,data:n,keyword:r,it:i}=t,o=e.name("valid");if(i.allErrors){const s=e.let("valid",!0);return a(()=>e.assign(s,!1)),s}return e.var(o,!0),a(()=>e.break()),o;function a(s){const l=e.const("len",(0,Xr._)`${n}.length`);e.forRange("i",0,l,u=>{t.subschema({keyword:r,dataProp:u,dataPropType:HF.Type.Num},o),e.if((0,Xr.not)(o),s)})}}Tn.validateArray=RNe;function VNe(t){const{gen:e,schema:n,keyword:r,it:i}=t;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(l=>(0,HF.alwaysValidSchema)(i,l))&&!i.opts.unevaluated)return;const a=e.let("valid",!1),s=e.name("_valid");e.block(()=>n.forEach((l,u)=>{const c=t.subschema({keyword:r,schemaProp:u,compositeRule:!0},s);e.assign(a,(0,Xr._)`${a} || ${s}`),t.mergeValidEvaluated(c,s)||e.if((0,Xr.not)(a))})),t.result(a,()=>t.reset(),()=>t.error(!0))}Tn.validateUnion=VNe;Object.defineProperty(uc,"__esModule",{value:!0});uc.validateKeywordUsage=uc.validSchemaType=uc.funcKeywordCode=uc.macroKeywordCode=void 0;const ma=Sn,Ip=kc,BNe=Tn,zNe=gS;function jNe(t,e){const{gen:n,keyword:r,schema:i,parentSchema:o,it:a}=t,s=e.macro.call(a.self,i,o,a),l=Yre(n,r,s);a.opts.validateSchema!==!1&&a.self.validateSchema(s,!0);const u=n.name("valid");t.subschema({schema:s,schemaPath:ma.nil,errSchemaPath:`${a.errSchemaPath}/${r}`,topSchemaRef:l,compositeRule:!0},u),t.pass(u,()=>t.error(!0))}uc.macroKeywordCode=jNe;function UNe(t,e){var n;const{gen:r,keyword:i,schema:o,parentSchema:a,$data:s,it:l}=t;HNe(l,e);const u=!s&&e.compile?e.compile.call(l.self,o,a,l):e.validate,c=Yre(r,i,u),f=r.let("valid");t.block$data(f,h),t.ok((n=e.valid)!==null&&n!==void 0?n:f);function h(){if(e.errors===!1)y(),e.modifying&&LU(t),_(()=>t.error());else{const v=e.async?d():g();e.modifying&&LU(t),_(()=>WNe(t,v))}}function d(){const v=r.let("ruleErrs",null);return r.try(()=>y((0,ma._)`await `),S=>r.assign(f,!1).if((0,ma._)`${S} instanceof ${l.ValidationError}`,()=>r.assign(v,(0,ma._)`${S}.errors`),()=>r.throw(S))),v}function g(){const v=(0,ma._)`${c}.errors`;return r.assign(v,null),y(ma.nil),v}function y(v=e.async?(0,ma._)`await `:ma.nil){const S=l.opts.passContext?Ip.default.this:Ip.default.self,C=!("compile"in e&&!s||e.schema===!1);r.assign(f,(0,ma._)`${v}${(0,BNe.callValidateCode)(t,c,S,C)}`,e.modifying)}function _(v){var S;r.if((0,ma.not)((S=e.valid)!==null&&S!==void 0?S:f),v)}}uc.funcKeywordCode=UNe;function LU(t){const{gen:e,data:n,it:r}=t;e.if(r.parentData,()=>e.assign(n,(0,ma._)`${r.parentData}[${r.parentDataProperty}]`))}function WNe(t,e){const{gen:n}=t;n.if((0,ma._)`Array.isArray(${e})`,()=>{n.assign(Ip.default.vErrors,(0,ma._)`${Ip.default.vErrors} === null ? ${e} : ${Ip.default.vErrors}.concat(${e})`).assign(Ip.default.errors,(0,ma._)`${Ip.default.vErrors}.length`),(0,zNe.extendErrors)(t)},()=>t.error())}function HNe({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function Yre(t,e,n){if(n===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,ma.stringify)(n)})}function GNe(t,e,n=!1){return!e.length||e.some(r=>r==="array"?Array.isArray(t):r==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==r||n&&typeof t>"u")}uc.validSchemaType=GNe;function qNe({schema:t,opts:e,self:n,errSchemaPath:r},i,o){if(Array.isArray(i.keyword)?!i.keyword.includes(o):i.keyword!==o)throw new Error("ajv implementation error");const a=i.dependencies;if(a!=null&&a.some(s=>!Object.prototype.hasOwnProperty.call(t,s)))throw new Error(`parent schema must have dependencies of ${o}: ${a.join(",")}`);if(i.validateSchema&&!i.validateSchema(t[o])){const l=`keyword "${o}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(e.validateSchema==="log")n.logger.error(l);else throw new Error(l)}}uc.validateKeywordUsage=qNe;var Vh={};Object.defineProperty(Vh,"__esModule",{value:!0});Vh.extendSubschemaMode=Vh.extendSubschemaData=Vh.getSubschema=void 0;const tc=Sn,Kre=er;function YNe(t,{keyword:e,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:o,topSchemaRef:a}){if(e!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){const s=t.schema[e];return n===void 0?{schema:s,schemaPath:(0,tc._)`${t.schemaPath}${(0,tc.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:s[n],schemaPath:(0,tc._)`${t.schemaPath}${(0,tc.getProperty)(e)}${(0,tc.getProperty)(n)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,Kre.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||o===void 0||a===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:a,errSchemaPath:o}}throw new Error('either "keyword" or "schema" must be passed')}Vh.getSubschema=YNe;function KNe(t,e,{dataProp:n,dataPropType:r,data:i,dataTypes:o,propertyName:a}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:s}=e;if(n!==void 0){const{errorPath:u,dataPathArr:c,opts:f}=e,h=s.let("data",(0,tc._)`${e.data}${(0,tc.getProperty)(n)}`,!0);l(h),t.errorPath=(0,tc.str)`${u}${(0,Kre.getErrorPath)(n,r,f.jsPropertySyntax)}`,t.parentDataProperty=(0,tc._)`${n}`,t.dataPathArr=[...c,t.parentDataProperty]}if(i!==void 0){const u=i instanceof tc.Name?i:s.let("data",i,!0);l(u),a!==void 0&&(t.propertyName=a)}o&&(t.dataTypes=o);function l(u){t.data=u,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,u]}}Vh.extendSubschemaData=KNe;function XNe(t,{jtdDiscriminator:e,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:o}){r!==void 0&&(t.compositeRule=r),i!==void 0&&(t.createErrors=i),o!==void 0&&(t.allErrors=o),t.jtdDiscriminator=e,t.jtdMetadata=n}Vh.extendSubschemaMode=XNe;var Co={},YF=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(o=Object.keys(e),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;i--!==0;){var a=o[i];if(!t(e[a],n[a]))return!1}return!0}return e!==e&&n!==n};const Xre=pr(YF);var Jre={exports:{}},Ah=Jre.exports=function(t,e,n){typeof e=="function"&&(n=e,e={}),n=e.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};C2(e,r,i,t,"",t)};Ah.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Ah.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Ah.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Ah.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function C2(t,e,n,r,i,o,a,s,l,u){if(r&&typeof r=="object"&&!Array.isArray(r)){e(r,i,o,a,s,l,u);for(var c in r){var f=r[c];if(Array.isArray(f)){if(c in Ah.arrayKeywords)for(var h=0;h<f.length;h++)C2(t,e,n,f[h],i+"/"+c+"/"+h,o,i,c,r,h)}else if(c in Ah.propsKeywords){if(f&&typeof f=="object")for(var d in f)C2(t,e,n,f[d],i+"/"+c+"/"+JNe(d),o,i,c,r,d)}else(c in Ah.keywords||t.allKeys&&!(c in Ah.skipKeywords))&&C2(t,e,n,f,i+"/"+c,o,i,c,r)}n(r,i,o,a,s,l,u)}}function JNe(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}var ZNe=Jre.exports;Object.defineProperty(Co,"__esModule",{value:!0});Co.getSchemaRefs=Co.resolveUrl=Co.normalizeId=Co._getFullPath=Co.getFullPath=Co.inlineRef=void 0;const QNe=er,eFe=YF,tFe=ZNe,nFe=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function rFe(t,e=!0){return typeof t=="boolean"?!0:e===!0?!JL(t):e?Zre(t)<=e:!1}Co.inlineRef=rFe;const iFe=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function JL(t){for(const e in t){if(iFe.has(e))return!0;const n=t[e];if(Array.isArray(n)&&n.some(JL)||typeof n=="object"&&JL(n))return!0}return!1}function Zre(t){let e=0;for(const n in t){if(n==="$ref")return 1/0;if(e++,!nFe.has(n)&&(typeof t[n]=="object"&&(0,QNe.eachItem)(t[n],r=>e+=Zre(r)),e===1/0))return 1/0}return e}function Qre(t,e="",n){n!==!1&&(e=Fv(e));const r=t.parse(e);return eie(t,r)}Co.getFullPath=Qre;function eie(t,e){return t.serialize(e).split("#")[0]+"#"}Co._getFullPath=eie;const oFe=/#\/?$/;function Fv(t){return t?t.replace(oFe,""):""}Co.normalizeId=Fv;function aFe(t,e,n){return n=Fv(n),t.resolve(e,n)}Co.resolveUrl=aFe;const sFe=/^[a-z_][-a-z0-9._]*$/i;function lFe(t,e){if(typeof t=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=Fv(t[n]||e),o={"":i},a=Qre(r,i,!1),s={},l=new Set;return tFe(t,{allKeys:!0},(f,h,d,g)=>{if(g===void 0)return;const y=a+h;let _=o[g];typeof f[n]=="string"&&(_=v.call(this,f[n])),S.call(this,f.$anchor),S.call(this,f.$dynamicAnchor),o[h]=_;function v(C){const k=this.opts.uriResolver.resolve;if(C=Fv(_?k(_,C):C),l.has(C))throw c(C);l.add(C);let x=this.refs[C];return typeof x=="string"&&(x=this.refs[x]),typeof x=="object"?u(f,x.schema,C):C!==Fv(y)&&(C[0]==="#"?(u(f,s[C],C),s[C]=f):this.refs[C]=y),C}function S(C){if(typeof C=="string"){if(!sFe.test(C))throw new Error(`invalid anchor "${C}"`);v.call(this,`#${C}`)}}}),s;function u(f,h,d){if(h!==void 0&&!eFe(f,h))throw c(d)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}Co.getSchemaRefs=lFe;Object.defineProperty(du,"__esModule",{value:!0});du.getData=du.KeywordCxt=du.validateFunctionCode=void 0;const tie=f0,DU=mS,KF=vf,aT=mS,uFe=tE,f1=uc,uI=Vh,It=Sn,an=kc,cFe=Co,yf=er,ib=gS;function fFe(t){if(iie(t)&&(oie(t),rie(t))){pFe(t);return}nie(t,()=>(0,tie.topBoolOrEmptySchema)(t))}du.validateFunctionCode=fFe;function nie({gen:t,validateName:e,schema:n,schemaEnv:r,opts:i},o){i.code.es5?t.func(e,(0,It._)`${an.default.data}, ${an.default.valCxt}`,r.$async,()=>{t.code((0,It._)`"use strict"; ${MU(n,i)}`),dFe(t,i),t.code(o)}):t.func(e,(0,It._)`${an.default.data}, ${hFe(i)}`,r.$async,()=>t.code(MU(n,i)).code(o))}function hFe(t){return(0,It._)`{${an.default.instancePath}="", ${an.default.parentData}, ${an.default.parentDataProperty}, ${an.default.rootData}=${an.default.data}${t.dynamicRef?(0,It._)`, ${an.default.dynamicAnchors}={}`:It.nil}}={}`}function dFe(t,e){t.if(an.default.valCxt,()=>{t.var(an.default.instancePath,(0,It._)`${an.default.valCxt}.${an.default.instancePath}`),t.var(an.default.parentData,(0,It._)`${an.default.valCxt}.${an.default.parentData}`),t.var(an.default.parentDataProperty,(0,It._)`${an.default.valCxt}.${an.default.parentDataProperty}`),t.var(an.default.rootData,(0,It._)`${an.default.valCxt}.${an.default.rootData}`),e.dynamicRef&&t.var(an.default.dynamicAnchors,(0,It._)`${an.default.valCxt}.${an.default.dynamicAnchors}`)},()=>{t.var(an.default.instancePath,(0,It._)`""`),t.var(an.default.parentData,(0,It._)`undefined`),t.var(an.default.parentDataProperty,(0,It._)`undefined`),t.var(an.default.rootData,an.default.data),e.dynamicRef&&t.var(an.default.dynamicAnchors,(0,It._)`{}`)})}function pFe(t){const{schema:e,opts:n,gen:r}=t;nie(t,()=>{n.$comment&&e.$comment&&sie(t),bFe(t),r.let(an.default.vErrors,null),r.let(an.default.errors,0),n.unevaluated&&gFe(t),aie(t),wFe(t)})}function gFe(t){const{gen:e,validateName:n}=t;t.evaluated=e.const("evaluated",(0,It._)`${n}.evaluated`),e.if((0,It._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,It._)`${t.evaluated}.props`,(0,It._)`undefined`)),e.if((0,It._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,It._)`${t.evaluated}.items`,(0,It._)`undefined`))}function MU(t,e){const n=typeof t=="object"&&t[e.schemaId];return n&&(e.code.source||e.code.process)?(0,It._)`/*# sourceURL=${n} */`:It.nil}function mFe(t,e){if(iie(t)&&(oie(t),rie(t))){vFe(t,e);return}(0,tie.boolOrEmptySchema)(t,e)}function rie({schema:t,self:e}){if(typeof t=="boolean")return!t;for(const n in t)if(e.RULES.all[n])return!0;return!1}function iie(t){return typeof t.schema!="boolean"}function vFe(t,e){const{schema:n,gen:r,opts:i}=t;i.$comment&&n.$comment&&sie(t),_Fe(t),SFe(t);const o=r.const("_errs",an.default.errors);aie(t,o),r.var(e,(0,It._)`${o} === ${an.default.errors}`)}function oie(t){(0,yf.checkUnknownRules)(t),yFe(t)}function aie(t,e){if(t.opts.jtd)return NU(t,[],!1,e);const n=(0,DU.getSchemaTypes)(t.schema),r=(0,DU.coerceAndCheckDataType)(t,n);NU(t,n,!r,e)}function yFe(t){const{schema:e,errSchemaPath:n,opts:r,self:i}=t;e.$ref&&r.ignoreKeywordsWithRef&&(0,yf.schemaHasRulesButRef)(e,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function bFe(t){const{schema:e,opts:n}=t;e.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,yf.checkStrictMode)(t,"default is ignored in the schema root")}function _Fe(t){const e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,cFe.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function SFe(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function sie({gen:t,schemaEnv:e,schema:n,errSchemaPath:r,opts:i}){const o=n.$comment;if(i.$comment===!0)t.code((0,It._)`${an.default.self}.logger.log(${o})`);else if(typeof i.$comment=="function"){const a=(0,It.str)`${r}/$comment`,s=t.scopeValue("root",{ref:e.root});t.code((0,It._)`${an.default.self}.opts.$comment(${o}, ${a}, ${s}.schema)`)}}function wFe(t){const{gen:e,schemaEnv:n,validateName:r,ValidationError:i,opts:o}=t;n.$async?e.if((0,It._)`${an.default.errors} === 0`,()=>e.return(an.default.data),()=>e.throw((0,It._)`new ${i}(${an.default.vErrors})`)):(e.assign((0,It._)`${r}.errors`,an.default.vErrors),o.unevaluated&&xFe(t),e.return((0,It._)`${an.default.errors} === 0`))}function xFe({gen:t,evaluated:e,props:n,items:r}){n instanceof It.Name&&t.assign((0,It._)`${e}.props`,n),r instanceof It.Name&&t.assign((0,It._)`${e}.items`,r)}function NU(t,e,n,r){const{gen:i,schema:o,data:a,allErrors:s,opts:l,self:u}=t,{RULES:c}=u;if(o.$ref&&(l.ignoreKeywordsWithRef||!(0,yf.schemaHasRulesButRef)(o,c))){i.block(()=>cie(t,"$ref",c.all.$ref.definition));return}l.jtd||CFe(t,e),i.block(()=>{for(const h of c.rules)f(h);f(c.post)});function f(h){(0,KF.shouldUseGroup)(o,h)&&(h.type?(i.if((0,aT.checkDataType)(h.type,a,l.strictNumbers)),FU(t,h),e.length===1&&e[0]===h.type&&n&&(i.else(),(0,aT.reportTypeError)(t)),i.endIf()):FU(t,h),s||i.if((0,It._)`${an.default.errors} === ${r||0}`))}}function FU(t,e){const{gen:n,schema:r,opts:{useDefaults:i}}=t;i&&(0,uFe.assignDefaults)(t,e.type),n.block(()=>{for(const o of e.rules)(0,KF.shouldUseRule)(r,o)&&cie(t,o.keyword,o.definition,e.type)})}function CFe(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(kFe(t,e),t.opts.allowUnionTypes||TFe(t,e),AFe(t,t.dataTypes))}function kFe(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(n=>{lie(t.dataTypes,n)||XF(t,`type "${n}" not allowed by context "${t.dataTypes.join(",")}"`)}),PFe(t,e)}}function TFe(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&XF(t,"use allowUnionTypes to allow union type keyword")}function AFe(t,e){const n=t.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,KF.shouldUseRule)(t.schema,i)){const{type:o}=i.definition;o.length&&!o.some(a=>EFe(e,a))&&XF(t,`missing type "${o.join(",")}" for keyword "${r}"`)}}}function EFe(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function lie(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function PFe(t,e){const n=[];for(const r of t.dataTypes)lie(e,r)?n.push(r):e.includes("integer")&&r==="number"&&n.push("integer");t.dataTypes=n}function XF(t,e){const n=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${n}" (strictTypes)`,(0,yf.checkStrictMode)(t,e,t.opts.strictTypes)}class uie{constructor(e,n,r){if((0,f1.validateKeywordUsage)(e,n,r),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=r,this.data=e.data,this.schema=e.schema[r],this.$data=n.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,yf.schemaRefOrVal)(e,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=n,this.$data)this.schemaCode=e.gen.const("vSchema",fie(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,f1.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=e.gen.const("_errs",an.default.errors))}result(e,n,r){this.failResult((0,It.not)(e),n,r)}failResult(e,n,r){this.gen.if(e),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,n){this.failResult((0,It.not)(e),void 0,n)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:n}=this;this.fail((0,It._)`${n} !== undefined && (${(0,It.or)(this.invalid$data(),e)})`)}error(e,n,r){if(n){this.setParams(n),this._error(e,r),this.setParams({});return}this._error(e,r)}_error(e,n){(e?ib.reportExtraError:ib.reportError)(this,this.def.error,n)}$dataError(){(0,ib.reportError)(this,this.def.$dataError||ib.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,ib.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,n){n?Object.assign(this.params,e):this.params=e}block$data(e,n,r=It.nil){this.gen.block(()=>{this.check$data(e,r),n()})}check$data(e=It.nil,n=It.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:o,def:a}=this;r.if((0,It.or)((0,It._)`${i} === undefined`,n)),e!==It.nil&&r.assign(e,!0),(o.length||a.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),e!==It.nil&&r.assign(e,!1)),r.else()}invalid$data(){const{gen:e,schemaCode:n,schemaType:r,def:i,it:o}=this;return(0,It.or)(a(),s());function a(){if(r.length){if(!(n instanceof It.Name))throw new Error("ajv implementation error");const l=Array.isArray(r)?r:[r];return(0,It._)`${(0,aT.checkDataTypes)(l,n,o.opts.strictNumbers,aT.DataType.Wrong)}`}return It.nil}function s(){if(i.validateSchema){const l=e.scopeValue("validate$data",{ref:i.validateSchema});return(0,It._)`!${l}(${n})`}return It.nil}}subschema(e,n){const r=(0,uI.getSubschema)(this.it,e);(0,uI.extendSubschemaData)(r,this.it,e),(0,uI.extendSubschemaMode)(r,e);const i={...this.it,...r,items:void 0,props:void 0};return mFe(i,n),i}mergeEvaluated(e,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&e.props!==void 0&&(r.props=yf.mergeEvaluated.props(i,e.props,r.props,n)),r.items!==!0&&e.items!==void 0&&(r.items=yf.mergeEvaluated.items(i,e.items,r.items,n)))}mergeValidEvaluated(e,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(e,It.Name)),!0}}du.KeywordCxt=uie;function cie(t,e,n,r){const i=new uie(t,n,e);"code"in n?n.code(i,r):i.$data&&n.validate?(0,f1.funcKeywordCode)(i,n):"macro"in n?(0,f1.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,f1.funcKeywordCode)(i,n)}const OFe=/^\/(?:[^~]|~0|~1)*$/,IFe=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function fie(t,{dataLevel:e,dataNames:n,dataPathArr:r}){let i,o;if(t==="")return an.default.rootData;if(t[0]==="/"){if(!OFe.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);i=t,o=an.default.rootData}else{const u=IFe.exec(t);if(!u)throw new Error(`Invalid JSON-pointer: ${t}`);const c=+u[1];if(i=u[2],i==="#"){if(c>=e)throw new Error(l("property/index",c));return r[e-c]}if(c>e)throw new Error(l("data",c));if(o=n[e-c],!i)return o}let a=o;const s=i.split("/");for(const u of s)u&&(o=(0,It._)`${o}${(0,It.getProperty)((0,yf.unescapeJsonPointer)(u))}`,a=(0,It._)`${a} && ${o}`);return a;function l(u,c){return`Cannot access ${u} ${c} levels up, current level is ${e}`}}du.getData=fie;var vS={};Object.defineProperty(vS,"__esModule",{value:!0});class $Fe extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}vS.default=$Fe;var yS={};Object.defineProperty(yS,"__esModule",{value:!0});const cI=Co;class LFe extends Error{constructor(e,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,cI.resolveUrl)(e,n,r),this.missingSchema=(0,cI.normalizeId)((0,cI.getFullPath)(e,this.missingRef))}}yS.default=LFe;var ns={};Object.defineProperty(ns,"__esModule",{value:!0});ns.resolveSchema=ns.getCompilingSchema=ns.resolveRef=ns.compileSchema=ns.SchemaEnv=void 0;const Kl=Sn,DFe=vS,mp=kc,ou=Co,RU=er,MFe=du;class nE{constructor(e){var n;this.refs={},this.dynamicAnchors={};let r;typeof e.schema=="object"&&(r=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(n=e.baseId)!==null&&n!==void 0?n:(0,ou.normalizeId)(r==null?void 0:r[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}ns.SchemaEnv=nE;function JF(t){const e=hie.call(this,t);if(e)return e;const n=(0,ou.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:o}=this.opts,a=new Kl.CodeGen(this.scope,{es5:r,lines:i,ownProperties:o});let s;t.$async&&(s=a.scopeValue("Error",{ref:DFe.default,code:(0,Kl._)`require("ajv/dist/runtime/validation_error").default`}));const l=a.scopeName("validate");t.validateName=l;const u={gen:a,allErrors:this.opts.allErrors,data:mp.default.data,parentData:mp.default.parentData,parentDataProperty:mp.default.parentDataProperty,dataNames:[mp.default.data],dataPathArr:[Kl.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:a.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,Kl.stringify)(t.schema)}:{ref:t.schema}),validateName:l,ValidationError:s,schema:t.schema,schemaEnv:t,rootId:n,baseId:t.baseId||n,schemaPath:Kl.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Kl._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(t),(0,MFe.validateFunctionCode)(u),a.optimize(this.opts.code.optimize);const f=a.toString();c=`${a.scopeRefs(mp.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,t));const d=new Function(`${mp.default.self}`,`${mp.default.scope}`,c)(this,this.scope.get());if(this.scope.value(l,{ref:d}),d.errors=null,d.schema=t.schema,d.schemaEnv=t,t.$async&&(d.$async=!0),this.opts.code.source===!0&&(d.source={validateName:l,validateCode:f,scopeValues:a._values}),this.opts.unevaluated){const{props:g,items:y}=u;d.evaluated={props:g instanceof Kl.Name?void 0:g,items:y instanceof Kl.Name?void 0:y,dynamicProps:g instanceof Kl.Name,dynamicItems:y instanceof Kl.Name},d.source&&(d.source.evaluated=(0,Kl.stringify)(d.evaluated))}return t.validate=d,t}catch(f){throw delete t.validate,delete t.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(t)}}ns.compileSchema=JF;function NFe(t,e,n){var r;n=(0,ou.resolveUrl)(this.opts.uriResolver,e,n);const i=t.refs[n];if(i)return i;let o=VFe.call(this,t,n);if(o===void 0){const a=(r=t.localRefs)===null||r===void 0?void 0:r[n],{schemaId:s}=this.opts;a&&(o=new nE({schema:a,schemaId:s,root:t,baseId:e}))}if(o!==void 0)return t.refs[n]=FFe.call(this,o)}ns.resolveRef=NFe;function FFe(t){return(0,ou.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:JF.call(this,t)}function hie(t){for(const e of this._compilations)if(RFe(e,t))return e}ns.getCompilingSchema=hie;function RFe(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function VFe(t,e){let n;for(;typeof(n=this.refs[e])=="string";)e=n;return n||this.schemas[e]||rE.call(this,t,e)}function rE(t,e){const n=this.opts.uriResolver.parse(e),r=(0,ou._getFullPath)(this.opts.uriResolver,n);let i=(0,ou.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&r===i)return fI.call(this,n,t);const o=(0,ou.normalizeId)(r),a=this.refs[o]||this.schemas[o];if(typeof a=="string"){const s=rE.call(this,t,a);return typeof(s==null?void 0:s.schema)!="object"?void 0:fI.call(this,n,s)}if(typeof(a==null?void 0:a.schema)=="object"){if(a.validate||JF.call(this,a),o===(0,ou.normalizeId)(e)){const{schema:s}=a,{schemaId:l}=this.opts,u=s[l];return u&&(i=(0,ou.resolveUrl)(this.opts.uriResolver,i,u)),new nE({schema:s,schemaId:l,root:t,baseId:i})}return fI.call(this,n,a)}}ns.resolveSchema=rE;const BFe=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function fI(t,{baseId:e,schema:n,root:r}){var i;if(((i=t.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const s of t.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const l=n[(0,RU.unescapeFragment)(s)];if(l===void 0)return;n=l;const u=typeof n=="object"&&n[this.opts.schemaId];!BFe.has(s)&&u&&(e=(0,ou.resolveUrl)(this.opts.uriResolver,e,u))}let o;if(typeof n!="boolean"&&n.$ref&&!(0,RU.schemaHasRulesButRef)(n,this.RULES)){const s=(0,ou.resolveUrl)(this.opts.uriResolver,e,n.$ref);o=rE.call(this,r,s)}const{schemaId:a}=this.opts;if(o=o||new nE({schema:n,schemaId:a,root:r,baseId:e}),o.schema!==o.root.schema)return o}const zFe="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",jFe="Meta-schema for $data reference (JSON AnySchema extension proposal)",UFe="object",WFe=["$data"],HFe={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},GFe=!1,qFe={$id:zFe,description:jFe,type:UFe,required:WFe,properties:HFe,additionalProperties:GFe};var ZF={},ZL={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(t,e){(function(n,r){r(e)})(ui,function(n){function r(){for(var xe=arguments.length,le=Array(xe),Ce=0;Ce<xe;Ce++)le[Ce]=arguments[Ce];if(le.length>1){le[0]=le[0].slice(0,-1);for(var Re=le.length-1,Fe=1;Fe<Re;++Fe)le[Fe]=le[Fe].slice(1,-1);return le[Re]=le[Re].slice(1),le.join("")}else return le[0]}function i(xe){return"(?:"+xe+")"}function o(xe){return xe===void 0?"undefined":xe===null?"null":Object.prototype.toString.call(xe).split(" ").pop().split("]").shift().toLowerCase()}function a(xe){return xe.toUpperCase()}function s(xe){return xe!=null?xe instanceof Array?xe:typeof xe.length!="number"||xe.split||xe.setInterval||xe.call?[xe]:Array.prototype.slice.call(xe):[]}function l(xe,le){var Ce=xe;if(le)for(var Re in le)Ce[Re]=le[Re];return Ce}function u(xe){var le="[A-Za-z]",Ce="[0-9]",Re=r(Ce,"[A-Fa-f]"),Fe=i(i("%[EFef]"+Re+"%"+Re+Re+"%"+Re+Re)+"|"+i("%[89A-Fa-f]"+Re+"%"+Re+Re)+"|"+i("%"+Re+Re)),xt="[\\:\\/\\?\\#\\[\\]\\@]",kt="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",wn=r(xt,kt),sr=xe?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Mr=xe?"[\\uE000-\\uF8FF]":"[]",vn=r(le,Ce,"[\\-\\.\\_\\~]",sr);i(le+r(le,Ce,"[\\+\\-\\.]")+"*"),i(i(Fe+"|"+r(vn,kt,"[\\:]"))+"*");var qn=i(i("25[0-5]")+"|"+i("2[0-4]"+Ce)+"|"+i("1"+Ce+Ce)+"|"+i("0?[1-9]"+Ce)+"|0?0?"+Ce),Nr=i(qn+"\\."+qn+"\\."+qn+"\\."+qn),Xt=i(Re+"{1,4}"),hr=i(i(Xt+"\\:"+Xt)+"|"+Nr),mr=i(i(Xt+"\\:")+"{6}"+hr),vr=i("\\:\\:"+i(Xt+"\\:")+"{5}"+hr),ho=i(i(Xt)+"?\\:\\:"+i(Xt+"\\:")+"{4}"+hr),Ia=i(i(i(Xt+"\\:")+"{0,1}"+Xt)+"?\\:\\:"+i(Xt+"\\:")+"{3}"+hr),$a=i(i(i(Xt+"\\:")+"{0,2}"+Xt)+"?\\:\\:"+i(Xt+"\\:")+"{2}"+hr),zl=i(i(i(Xt+"\\:")+"{0,3}"+Xt)+"?\\:\\:"+Xt+"\\:"+hr),_s=i(i(i(Xt+"\\:")+"{0,4}"+Xt)+"?\\:\\:"+hr),Hi=i(i(i(Xt+"\\:")+"{0,5}"+Xt)+"?\\:\\:"+Xt),Oo=i(i(i(Xt+"\\:")+"{0,6}"+Xt)+"?\\:\\:"),Qr=i([mr,vr,ho,Ia,$a,zl,_s,Hi,Oo].join("|")),ro=i(i(vn+"|"+Fe)+"+");i("[vV]"+Re+"+\\."+r(vn,kt,"[\\:]")+"+"),i(i(Fe+"|"+r(vn,kt))+"*");var Ys=i(Fe+"|"+r(vn,kt,"[\\:\\@]"));return i(i(Fe+"|"+r(vn,kt,"[\\@]"))+"+"),i(i(Ys+"|"+r("[\\/\\?]",Mr))+"*"),{NOT_SCHEME:new RegExp(r("[^]",le,Ce,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",vn,kt),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",vn,kt),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",vn,kt),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",vn,kt),"g"),NOT_QUERY:new RegExp(r("[^\\%]",vn,kt,"[\\:\\@\\/\\?]",Mr),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",vn,kt,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",vn,kt),"g"),UNRESERVED:new RegExp(vn,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",vn,wn),"g"),PCT_ENCODED:new RegExp(Fe,"g"),IPV4ADDRESS:new RegExp("^("+Nr+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Qr+")"+i(i("\\%25|\\%(?!"+Re+"{2})")+"("+ro+")")+"?\\]?$")}}var c=u(!1),f=u(!0),h=function(){function xe(le,Ce){var Re=[],Fe=!0,xt=!1,kt=void 0;try{for(var wn=le[Symbol.iterator](),sr;!(Fe=(sr=wn.next()).done)&&(Re.push(sr.value),!(Ce&&Re.length===Ce));Fe=!0);}catch(Mr){xt=!0,kt=Mr}finally{try{!Fe&&wn.return&&wn.return()}finally{if(xt)throw kt}}return Re}return function(le,Ce){if(Array.isArray(le))return le;if(Symbol.iterator in Object(le))return xe(le,Ce);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(xe){if(Array.isArray(xe)){for(var le=0,Ce=Array(xe.length);le<xe.length;le++)Ce[le]=xe[le];return Ce}else return Array.from(xe)},g=2147483647,y=36,_=1,v=26,S=38,C=700,k=72,x=128,m="-",T=/^xn--/,P=/[^\0-\x7E]/,I=/[\x2E\u3002\uFF0E\uFF61]/g,M={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},L=y-_,R=Math.floor,V=String.fromCharCode;function z(xe){throw new RangeError(M[xe])}function ie(xe,le){for(var Ce=[],Re=xe.length;Re--;)Ce[Re]=le(xe[Re]);return Ce}function oe(xe,le){var Ce=xe.split("@"),Re="";Ce.length>1&&(Re=Ce[0]+"@",xe=Ce[1]),xe=xe.replace(I,".");var Fe=xe.split("."),xt=ie(Fe,le).join(".");return Re+xt}function Se(xe){for(var le=[],Ce=0,Re=xe.length;Ce<Re;){var Fe=xe.charCodeAt(Ce++);if(Fe>=55296&&Fe<=56319&&Ce<Re){var xt=xe.charCodeAt(Ce++);(xt&64512)==56320?le.push(((Fe&1023)<<10)+(xt&1023)+65536):(le.push(Fe),Ce--)}else le.push(Fe)}return le}var Ae=function(le){return String.fromCodePoint.apply(String,d(le))},Ee=function(le){return le-48<10?le-22:le-65<26?le-65:le-97<26?le-97:y},_e=function(le,Ce){return le+22+75*(le<26)-((Ce!=0)<<5)},se=function(le,Ce,Re){var Fe=0;for(le=Re?R(le/C):le>>1,le+=R(le/Ce);le>L*v>>1;Fe+=y)le=R(le/L);return R(Fe+(L+1)*le/(le+S))},ne=function(le){var Ce=[],Re=le.length,Fe=0,xt=x,kt=k,wn=le.lastIndexOf(m);wn<0&&(wn=0);for(var sr=0;sr<wn;++sr)le.charCodeAt(sr)>=128&&z("not-basic"),Ce.push(le.charCodeAt(sr));for(var Mr=wn>0?wn+1:0;Mr<Re;){for(var vn=Fe,qn=1,Nr=y;;Nr+=y){Mr>=Re&&z("invalid-input");var Xt=Ee(le.charCodeAt(Mr++));(Xt>=y||Xt>R((g-Fe)/qn))&&z("overflow"),Fe+=Xt*qn;var hr=Nr<=kt?_:Nr>=kt+v?v:Nr-kt;if(Xt<hr)break;var mr=y-hr;qn>R(g/mr)&&z("overflow"),qn*=mr}var vr=Ce.length+1;kt=se(Fe-vn,vr,vn==0),R(Fe/vr)>g-xt&&z("overflow"),xt+=R(Fe/vr),Fe%=vr,Ce.splice(Fe++,0,xt)}return String.fromCodePoint.apply(String,Ce)},J=function(le){var Ce=[];le=Se(le);var Re=le.length,Fe=x,xt=0,kt=k,wn=!0,sr=!1,Mr=void 0;try{for(var vn=le[Symbol.iterator](),qn;!(wn=(qn=vn.next()).done);wn=!0){var Nr=qn.value;Nr<128&&Ce.push(V(Nr))}}catch(Ks){sr=!0,Mr=Ks}finally{try{!wn&&vn.return&&vn.return()}finally{if(sr)throw Mr}}var Xt=Ce.length,hr=Xt;for(Xt&&Ce.push(m);hr<Re;){var mr=g,vr=!0,ho=!1,Ia=void 0;try{for(var $a=le[Symbol.iterator](),zl;!(vr=(zl=$a.next()).done);vr=!0){var _s=zl.value;_s>=Fe&&_s<mr&&(mr=_s)}}catch(Ks){ho=!0,Ia=Ks}finally{try{!vr&&$a.return&&$a.return()}finally{if(ho)throw Ia}}var Hi=hr+1;mr-Fe>R((g-xt)/Hi)&&z("overflow"),xt+=(mr-Fe)*Hi,Fe=mr;var Oo=!0,Qr=!1,ro=void 0;try{for(var Ys=le[Symbol.iterator](),om;!(Oo=(om=Ys.next()).done);Oo=!0){var Ad=om.value;if(Ad<Fe&&++xt>g&&z("overflow"),Ad==Fe){for(var jl=xt,Eu=y;;Eu+=y){var Ss=Eu<=kt?_:Eu>=kt+v?v:Eu-kt;if(jl<Ss)break;var Ed=jl-Ss,Pd=y-Ss;Ce.push(V(_e(Ss+Ed%Pd,0))),jl=R(Ed/Pd)}Ce.push(V(_e(jl,0))),kt=se(xt,Hi,hr==Xt),xt=0,++hr}}}catch(Ks){Qr=!0,ro=Ks}finally{try{!Oo&&Ys.return&&Ys.return()}finally{if(Qr)throw ro}}++xt,++Fe}return Ce.join("")},B=function(le){return oe(le,function(Ce){return T.test(Ce)?ne(Ce.slice(4).toLowerCase()):Ce})},H=function(le){return oe(le,function(Ce){return P.test(Ce)?"xn--"+J(Ce):Ce})},ae={version:"2.1.0",ucs2:{decode:Se,encode:Ae},decode:ne,encode:J,toASCII:H,toUnicode:B},te={};function ce(xe){var le=xe.charCodeAt(0),Ce=void 0;return le<16?Ce="%0"+le.toString(16).toUpperCase():le<128?Ce="%"+le.toString(16).toUpperCase():le<2048?Ce="%"+(le>>6|192).toString(16).toUpperCase()+"%"+(le&63|128).toString(16).toUpperCase():Ce="%"+(le>>12|224).toString(16).toUpperCase()+"%"+(le>>6&63|128).toString(16).toUpperCase()+"%"+(le&63|128).toString(16).toUpperCase(),Ce}function ue(xe){for(var le="",Ce=0,Re=xe.length;Ce<Re;){var Fe=parseInt(xe.substr(Ce+1,2),16);if(Fe<128)le+=String.fromCharCode(Fe),Ce+=3;else if(Fe>=194&&Fe<224){if(Re-Ce>=6){var xt=parseInt(xe.substr(Ce+4,2),16);le+=String.fromCharCode((Fe&31)<<6|xt&63)}else le+=xe.substr(Ce,6);Ce+=6}else if(Fe>=224){if(Re-Ce>=9){var kt=parseInt(xe.substr(Ce+4,2),16),wn=parseInt(xe.substr(Ce+7,2),16);le+=String.fromCharCode((Fe&15)<<12|(kt&63)<<6|wn&63)}else le+=xe.substr(Ce,9);Ce+=9}else le+=xe.substr(Ce,3),Ce+=3}return le}function fe(xe,le){function Ce(Re){var Fe=ue(Re);return Fe.match(le.UNRESERVED)?Fe:Re}return xe.scheme&&(xe.scheme=String(xe.scheme).replace(le.PCT_ENCODED,Ce).toLowerCase().replace(le.NOT_SCHEME,"")),xe.userinfo!==void 0&&(xe.userinfo=String(xe.userinfo).replace(le.PCT_ENCODED,Ce).replace(le.NOT_USERINFO,ce).replace(le.PCT_ENCODED,a)),xe.host!==void 0&&(xe.host=String(xe.host).replace(le.PCT_ENCODED,Ce).toLowerCase().replace(le.NOT_HOST,ce).replace(le.PCT_ENCODED,a)),xe.path!==void 0&&(xe.path=String(xe.path).replace(le.PCT_ENCODED,Ce).replace(xe.scheme?le.NOT_PATH:le.NOT_PATH_NOSCHEME,ce).replace(le.PCT_ENCODED,a)),xe.query!==void 0&&(xe.query=String(xe.query).replace(le.PCT_ENCODED,Ce).replace(le.NOT_QUERY,ce).replace(le.PCT_ENCODED,a)),xe.fragment!==void 0&&(xe.fragment=String(xe.fragment).replace(le.PCT_ENCODED,Ce).replace(le.NOT_FRAGMENT,ce).replace(le.PCT_ENCODED,a)),xe}function ye(xe){return xe.replace(/^0*(.*)/,"$1")||"0"}function j(xe,le){var Ce=xe.match(le.IPV4ADDRESS)||[],Re=h(Ce,2),Fe=Re[1];return Fe?Fe.split(".").map(ye).join("."):xe}function Y(xe,le){var Ce=xe.match(le.IPV6ADDRESS)||[],Re=h(Ce,3),Fe=Re[1],xt=Re[2];if(Fe){for(var kt=Fe.toLowerCase().split("::").reverse(),wn=h(kt,2),sr=wn[0],Mr=wn[1],vn=Mr?Mr.split(":").map(ye):[],qn=sr.split(":").map(ye),Nr=le.IPV4ADDRESS.test(qn[qn.length-1]),Xt=Nr?7:8,hr=qn.length-Xt,mr=Array(Xt),vr=0;vr<Xt;++vr)mr[vr]=vn[vr]||qn[hr+vr]||"";Nr&&(mr[Xt-1]=j(mr[Xt-1],le));var ho=mr.reduce(function(Hi,Oo,Qr){if(!Oo||Oo==="0"){var ro=Hi[Hi.length-1];ro&&ro.index+ro.length===Qr?ro.length++:Hi.push({index:Qr,length:1})}return Hi},[]),Ia=ho.sort(function(Hi,Oo){return Oo.length-Hi.length})[0],$a=void 0;if(Ia&&Ia.length>1){var zl=mr.slice(0,Ia.index),_s=mr.slice(Ia.index+Ia.length);$a=zl.join(":")+"::"+_s.join(":")}else $a=mr.join(":");return xt&&($a+="%"+xt),$a}else return xe}var O=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,F="".match(/(){0}/)[1]===void 0;function U(xe){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ce={},Re=le.iri!==!1?f:c;le.reference==="suffix"&&(xe=(le.scheme?le.scheme+":":"")+"//"+xe);var Fe=xe.match(O);if(Fe){F?(Ce.scheme=Fe[1],Ce.userinfo=Fe[3],Ce.host=Fe[4],Ce.port=parseInt(Fe[5],10),Ce.path=Fe[6]||"",Ce.query=Fe[7],Ce.fragment=Fe[8],isNaN(Ce.port)&&(Ce.port=Fe[5])):(Ce.scheme=Fe[1]||void 0,Ce.userinfo=xe.indexOf("@")!==-1?Fe[3]:void 0,Ce.host=xe.indexOf("//")!==-1?Fe[4]:void 0,Ce.port=parseInt(Fe[5],10),Ce.path=Fe[6]||"",Ce.query=xe.indexOf("?")!==-1?Fe[7]:void 0,Ce.fragment=xe.indexOf("#")!==-1?Fe[8]:void 0,isNaN(Ce.port)&&(Ce.port=xe.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Fe[4]:void 0)),Ce.host&&(Ce.host=Y(j(Ce.host,Re),Re)),Ce.scheme===void 0&&Ce.userinfo===void 0&&Ce.host===void 0&&Ce.port===void 0&&!Ce.path&&Ce.query===void 0?Ce.reference="same-document":Ce.scheme===void 0?Ce.reference="relative":Ce.fragment===void 0?Ce.reference="absolute":Ce.reference="uri",le.reference&&le.reference!=="suffix"&&le.reference!==Ce.reference&&(Ce.error=Ce.error||"URI is not a "+le.reference+" reference.");var xt=te[(le.scheme||Ce.scheme||"").toLowerCase()];if(!le.unicodeSupport&&(!xt||!xt.unicodeSupport)){if(Ce.host&&(le.domainHost||xt&&xt.domainHost))try{Ce.host=ae.toASCII(Ce.host.replace(Re.PCT_ENCODED,ue).toLowerCase())}catch(kt){Ce.error=Ce.error||"Host's domain name can not be converted to ASCII via punycode: "+kt}fe(Ce,c)}else fe(Ce,Re);xt&&xt.parse&&xt.parse(Ce,le)}else Ce.error=Ce.error||"URI can not be parsed.";return Ce}function Q(xe,le){var Ce=le.iri!==!1?f:c,Re=[];return xe.userinfo!==void 0&&(Re.push(xe.userinfo),Re.push("@")),xe.host!==void 0&&Re.push(Y(j(String(xe.host),Ce),Ce).replace(Ce.IPV6ADDRESS,function(Fe,xt,kt){return"["+xt+(kt?"%25"+kt:"")+"]"})),(typeof xe.port=="number"||typeof xe.port=="string")&&(Re.push(":"),Re.push(String(xe.port))),Re.length?Re.join(""):void 0}var ve=/^\.\.?\//,ge=/^\/\.(\/|$)/,Me=/^\/\.\.(\/|$)/,De=/^\/?(?:.|\n)*?(?=\/|$)/;function tt(xe){for(var le=[];xe.length;)if(xe.match(ve))xe=xe.replace(ve,"");else if(xe.match(ge))xe=xe.replace(ge,"/");else if(xe.match(Me))xe=xe.replace(Me,"/"),le.pop();else if(xe==="."||xe==="..")xe="";else{var Ce=xe.match(De);if(Ce){var Re=Ce[0];xe=xe.slice(Re.length),le.push(Re)}else throw new Error("Unexpected dot segment condition")}return le.join("")}function Xe(xe){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ce=le.iri?f:c,Re=[],Fe=te[(le.scheme||xe.scheme||"").toLowerCase()];if(Fe&&Fe.serialize&&Fe.serialize(xe,le),xe.host&&!Ce.IPV6ADDRESS.test(xe.host)){if(le.domainHost||Fe&&Fe.domainHost)try{xe.host=le.iri?ae.toUnicode(xe.host):ae.toASCII(xe.host.replace(Ce.PCT_ENCODED,ue).toLowerCase())}catch(wn){xe.error=xe.error||"Host's domain name can not be converted to "+(le.iri?"Unicode":"ASCII")+" via punycode: "+wn}}fe(xe,Ce),le.reference!=="suffix"&&xe.scheme&&(Re.push(xe.scheme),Re.push(":"));var xt=Q(xe,le);if(xt!==void 0&&(le.reference!=="suffix"&&Re.push("//"),Re.push(xt),xe.path&&xe.path.charAt(0)!=="/"&&Re.push("/")),xe.path!==void 0){var kt=xe.path;!le.absolutePath&&(!Fe||!Fe.absolutePath)&&(kt=tt(kt)),xt===void 0&&(kt=kt.replace(/^\/\//,"/%2F")),Re.push(kt)}return xe.query!==void 0&&(Re.push("?"),Re.push(xe.query)),xe.fragment!==void 0&&(Re.push("#"),Re.push(xe.fragment)),Re.join("")}function et(xe,le){var Ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Re=arguments[3],Fe={};return Re||(xe=U(Xe(xe,Ce),Ce),le=U(Xe(le,Ce),Ce)),Ce=Ce||{},!Ce.tolerant&&le.scheme?(Fe.scheme=le.scheme,Fe.userinfo=le.userinfo,Fe.host=le.host,Fe.port=le.port,Fe.path=tt(le.path||""),Fe.query=le.query):(le.userinfo!==void 0||le.host!==void 0||le.port!==void 0?(Fe.userinfo=le.userinfo,Fe.host=le.host,Fe.port=le.port,Fe.path=tt(le.path||""),Fe.query=le.query):(le.path?(le.path.charAt(0)==="/"?Fe.path=tt(le.path):((xe.userinfo!==void 0||xe.host!==void 0||xe.port!==void 0)&&!xe.path?Fe.path="/"+le.path:xe.path?Fe.path=xe.path.slice(0,xe.path.lastIndexOf("/")+1)+le.path:Fe.path=le.path,Fe.path=tt(Fe.path)),Fe.query=le.query):(Fe.path=xe.path,le.query!==void 0?Fe.query=le.query:Fe.query=xe.query),Fe.userinfo=xe.userinfo,Fe.host=xe.host,Fe.port=xe.port),Fe.scheme=xe.scheme),Fe.fragment=le.fragment,Fe}function Qe(xe,le,Ce){var Re=l({scheme:"null"},Ce);return Xe(et(U(xe,Re),U(le,Re),Re,!0),Re)}function pt(xe,le){return typeof xe=="string"?xe=Xe(U(xe,le),le):o(xe)==="object"&&(xe=U(Xe(xe,le),le)),xe}function Ft(xe,le,Ce){return typeof xe=="string"?xe=Xe(U(xe,Ce),Ce):o(xe)==="object"&&(xe=Xe(xe,Ce)),typeof le=="string"?le=Xe(U(le,Ce),Ce):o(le)==="object"&&(le=Xe(le,Ce)),xe===le}function Kt(xe,le){return xe&&xe.toString().replace(!le||!le.iri?c.ESCAPE:f.ESCAPE,ce)}function wt(xe,le){return xe&&xe.toString().replace(!le||!le.iri?c.PCT_ENCODED:f.PCT_ENCODED,ue)}var sn={scheme:"http",domainHost:!0,parse:function(le,Ce){return le.host||(le.error=le.error||"HTTP URIs must have a host."),le},serialize:function(le,Ce){var Re=String(le.scheme).toLowerCase()==="https";return(le.port===(Re?443:80)||le.port==="")&&(le.port=void 0),le.path||(le.path="/"),le}},gr={scheme:"https",domainHost:sn.domainHost,parse:sn.parse,serialize:sn.serialize};function gi(xe){return typeof xe.secure=="boolean"?xe.secure:String(xe.scheme).toLowerCase()==="wss"}var Dr={scheme:"ws",domainHost:!0,parse:function(le,Ce){var Re=le;return Re.secure=gi(Re),Re.resourceName=(Re.path||"/")+(Re.query?"?"+Re.query:""),Re.path=void 0,Re.query=void 0,Re},serialize:function(le,Ce){if((le.port===(gi(le)?443:80)||le.port==="")&&(le.port=void 0),typeof le.secure=="boolean"&&(le.scheme=le.secure?"wss":"ws",le.secure=void 0),le.resourceName){var Re=le.resourceName.split("?"),Fe=h(Re,2),xt=Fe[0],kt=Fe[1];le.path=xt&&xt!=="/"?xt:void 0,le.query=kt,le.resourceName=void 0}return le.fragment=void 0,le}},fo={scheme:"wss",domainHost:Dr.domainHost,parse:Dr.parse,serialize:Dr.serialize},Tr={},Bn="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",zn="[0-9A-Fa-f]",Oa=i(i("%[EFef]"+zn+"%"+zn+zn+"%"+zn+zn)+"|"+i("%[89A-Fa-f]"+zn+"%"+zn+zn)+"|"+i("%"+zn+zn)),Mf="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Ac="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Tu=r(Ac,'[\\"\\\\]'),bs="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Wi=new RegExp(Bn,"g"),Au=new RegExp(Oa,"g"),ty=new RegExp(r("[^]",Mf,"[\\.]",'[\\"]',Tu),"g"),Nf=new RegExp(r("[^]",Bn,bs),"g"),Ec=Nf;function Td(xe){var le=ue(xe);return le.match(Wi)?le:xe}var im={scheme:"mailto",parse:function(le,Ce){var Re=le,Fe=Re.to=Re.path?Re.path.split(","):[];if(Re.path=void 0,Re.query){for(var xt=!1,kt={},wn=Re.query.split("&"),sr=0,Mr=wn.length;sr<Mr;++sr){var vn=wn[sr].split("=");switch(vn[0]){case"to":for(var qn=vn[1].split(","),Nr=0,Xt=qn.length;Nr<Xt;++Nr)Fe.push(qn[Nr]);break;case"subject":Re.subject=wt(vn[1],Ce);break;case"body":Re.body=wt(vn[1],Ce);break;default:xt=!0,kt[wt(vn[0],Ce)]=wt(vn[1],Ce);break}}xt&&(Re.headers=kt)}Re.query=void 0;for(var hr=0,mr=Fe.length;hr<mr;++hr){var vr=Fe[hr].split("@");if(vr[0]=wt(vr[0]),Ce.unicodeSupport)vr[1]=wt(vr[1],Ce).toLowerCase();else try{vr[1]=ae.toASCII(wt(vr[1],Ce).toLowerCase())}catch(ho){Re.error=Re.error||"Email address's domain name can not be converted to ASCII via punycode: "+ho}Fe[hr]=vr.join("@")}return Re},serialize:function(le,Ce){var Re=le,Fe=s(le.to);if(Fe){for(var xt=0,kt=Fe.length;xt<kt;++xt){var wn=String(Fe[xt]),sr=wn.lastIndexOf("@"),Mr=wn.slice(0,sr).replace(Au,Td).replace(Au,a).replace(ty,ce),vn=wn.slice(sr+1);try{vn=Ce.iri?ae.toUnicode(vn):ae.toASCII(wt(vn,Ce).toLowerCase())}catch(hr){Re.error=Re.error||"Email address's domain name can not be converted to "+(Ce.iri?"Unicode":"ASCII")+" via punycode: "+hr}Fe[xt]=Mr+"@"+vn}Re.path=Fe.join(",")}var qn=le.headers=le.headers||{};le.subject&&(qn.subject=le.subject),le.body&&(qn.body=le.body);var Nr=[];for(var Xt in qn)qn[Xt]!==Tr[Xt]&&Nr.push(Xt.replace(Au,Td).replace(Au,a).replace(Nf,ce)+"="+qn[Xt].replace(Au,Td).replace(Au,a).replace(Ec,ce));return Nr.length&&(Re.query=Nr.join("&")),Re}},ny=/^([^\:]+)\:(.*)/,Pc={scheme:"urn",parse:function(le,Ce){var Re=le.path&&le.path.match(ny),Fe=le;if(Re){var xt=Ce.scheme||Fe.scheme||"urn",kt=Re[1].toLowerCase(),wn=Re[2],sr=xt+":"+(Ce.nid||kt),Mr=te[sr];Fe.nid=kt,Fe.nss=wn,Fe.path=void 0,Mr&&(Fe=Mr.parse(Fe,Ce))}else Fe.error=Fe.error||"URN can not be parsed.";return Fe},serialize:function(le,Ce){var Re=Ce.scheme||le.scheme||"urn",Fe=le.nid,xt=Re+":"+(Ce.nid||Fe),kt=te[xt];kt&&(le=kt.serialize(le,Ce));var wn=le,sr=le.nss;return wn.path=(Fe||Ce.nid)+":"+sr,wn}},ry=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Ff={scheme:"urn:uuid",parse:function(le,Ce){var Re=le;return Re.uuid=Re.nss,Re.nss=void 0,!Ce.tolerant&&(!Re.uuid||!Re.uuid.match(ry))&&(Re.error=Re.error||"UUID is not valid."),Re},serialize:function(le,Ce){var Re=le;return Re.nss=(le.uuid||"").toLowerCase(),Re}};te[sn.scheme]=sn,te[gr.scheme]=gr,te[Dr.scheme]=Dr,te[fo.scheme]=fo,te[im.scheme]=im,te[Pc.scheme]=Pc,te[Ff.scheme]=Ff,n.SCHEMES=te,n.pctEncChar=ce,n.pctDecChars=ue,n.parse=U,n.removeDotSegments=tt,n.serialize=Xe,n.resolveComponents=et,n.resolve=Qe,n.normalize=pt,n.equal=Ft,n.escapeComponent=Kt,n.unescapeComponent=wt,Object.defineProperty(n,"__esModule",{value:!0})})})(ZL,ZL.exports);var YFe=ZL.exports;Object.defineProperty(ZF,"__esModule",{value:!0});const die=YFe;die.code='require("ajv/dist/runtime/uri").default';ZF.default=die;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var e=du;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return e.KeywordCxt}});var n=Sn;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=vS,i=yS,o=Ag,a=ns,s=Sn,l=Co,u=mS,c=er,f=qFe,h=ZF,d=(_e,se)=>new RegExp(_e,se);d.code="new RegExp";const g=["removeAdditional","useDefaults","coerceTypes"],y=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),_={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},v={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},S=200;function C(_e){var se,ne,J,B,H,ae,te,ce,ue,fe,ye,j,Y,O,F,U,Q,ve,ge,Me,De,tt,Xe,et,Qe;const pt=_e.strict,Ft=(se=_e.code)===null||se===void 0?void 0:se.optimize,Kt=Ft===!0||Ft===void 0?1:Ft||0,wt=(J=(ne=_e.code)===null||ne===void 0?void 0:ne.regExp)!==null&&J!==void 0?J:d,sn=(B=_e.uriResolver)!==null&&B!==void 0?B:h.default;return{strictSchema:(ae=(H=_e.strictSchema)!==null&&H!==void 0?H:pt)!==null&&ae!==void 0?ae:!0,strictNumbers:(ce=(te=_e.strictNumbers)!==null&&te!==void 0?te:pt)!==null&&ce!==void 0?ce:!0,strictTypes:(fe=(ue=_e.strictTypes)!==null&&ue!==void 0?ue:pt)!==null&&fe!==void 0?fe:"log",strictTuples:(j=(ye=_e.strictTuples)!==null&&ye!==void 0?ye:pt)!==null&&j!==void 0?j:"log",strictRequired:(O=(Y=_e.strictRequired)!==null&&Y!==void 0?Y:pt)!==null&&O!==void 0?O:!1,code:_e.code?{..._e.code,optimize:Kt,regExp:wt}:{optimize:Kt,regExp:wt},loopRequired:(F=_e.loopRequired)!==null&&F!==void 0?F:S,loopEnum:(U=_e.loopEnum)!==null&&U!==void 0?U:S,meta:(Q=_e.meta)!==null&&Q!==void 0?Q:!0,messages:(ve=_e.messages)!==null&&ve!==void 0?ve:!0,inlineRefs:(ge=_e.inlineRefs)!==null&&ge!==void 0?ge:!0,schemaId:(Me=_e.schemaId)!==null&&Me!==void 0?Me:"$id",addUsedSchema:(De=_e.addUsedSchema)!==null&&De!==void 0?De:!0,validateSchema:(tt=_e.validateSchema)!==null&&tt!==void 0?tt:!0,validateFormats:(Xe=_e.validateFormats)!==null&&Xe!==void 0?Xe:!0,unicodeRegExp:(et=_e.unicodeRegExp)!==null&&et!==void 0?et:!0,int32range:(Qe=_e.int32range)!==null&&Qe!==void 0?Qe:!0,uriResolver:sn}}class k{constructor(se={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,se=this.opts={...se,...C(se)};const{es5:ne,lines:J}=this.opts.code;this.scope=new s.ValueScope({scope:{},prefixes:y,es5:ne,lines:J}),this.logger=R(se.logger);const B=se.validateFormats;se.validateFormats=!1,this.RULES=(0,o.getRules)(),x.call(this,_,se,"NOT SUPPORTED"),x.call(this,v,se,"DEPRECATED","warn"),this._metaOpts=M.call(this),se.formats&&P.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),se.keywords&&I.call(this,se.keywords),typeof se.meta=="object"&&this.addMetaSchema(se.meta),T.call(this),se.validateFormats=B}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:se,meta:ne,schemaId:J}=this.opts;let B=f;J==="id"&&(B={...f},B.id=B.$id,delete B.$id),ne&&se&&this.addMetaSchema(B,B[J],!1)}defaultMeta(){const{meta:se,schemaId:ne}=this.opts;return this.opts.defaultMeta=typeof se=="object"?se[ne]||se:void 0}validate(se,ne){let J;if(typeof se=="string"){if(J=this.getSchema(se),!J)throw new Error(`no schema with key or ref "${se}"`)}else J=this.compile(se);const B=J(ne);return"$async"in J||(this.errors=J.errors),B}compile(se,ne){const J=this._addSchema(se,ne);return J.validate||this._compileSchemaEnv(J)}compileAsync(se,ne){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:J}=this.opts;return B.call(this,se,ne);async function B(fe,ye){await H.call(this,fe.$schema);const j=this._addSchema(fe,ye);return j.validate||ae.call(this,j)}async function H(fe){fe&&!this.getSchema(fe)&&await B.call(this,{$ref:fe},!0)}async function ae(fe){try{return this._compileSchemaEnv(fe)}catch(ye){if(!(ye instanceof i.default))throw ye;return te.call(this,ye),await ce.call(this,ye.missingSchema),ae.call(this,fe)}}function te({missingSchema:fe,missingRef:ye}){if(this.refs[fe])throw new Error(`AnySchema ${fe} is loaded but ${ye} cannot be resolved`)}async function ce(fe){const ye=await ue.call(this,fe);this.refs[fe]||await H.call(this,ye.$schema),this.refs[fe]||this.addSchema(ye,fe,ne)}async function ue(fe){const ye=this._loading[fe];if(ye)return ye;try{return await(this._loading[fe]=J(fe))}finally{delete this._loading[fe]}}}addSchema(se,ne,J,B=this.opts.validateSchema){if(Array.isArray(se)){for(const ae of se)this.addSchema(ae,void 0,J,B);return this}let H;if(typeof se=="object"){const{schemaId:ae}=this.opts;if(H=se[ae],H!==void 0&&typeof H!="string")throw new Error(`schema ${ae} must be string`)}return ne=(0,l.normalizeId)(ne||H),this._checkUnique(ne),this.schemas[ne]=this._addSchema(se,J,ne,B,!0),this}addMetaSchema(se,ne,J=this.opts.validateSchema){return this.addSchema(se,ne,!0,J),this}validateSchema(se,ne){if(typeof se=="boolean")return!0;let J;if(J=se.$schema,J!==void 0&&typeof J!="string")throw new Error("$schema must be a string");if(J=J||this.opts.defaultMeta||this.defaultMeta(),!J)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const B=this.validate(J,se);if(!B&&ne){const H="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(H);else throw new Error(H)}return B}getSchema(se){let ne;for(;typeof(ne=m.call(this,se))=="string";)se=ne;if(ne===void 0){const{schemaId:J}=this.opts,B=new a.SchemaEnv({schema:{},schemaId:J});if(ne=a.resolveSchema.call(this,B,se),!ne)return;this.refs[se]=ne}return ne.validate||this._compileSchemaEnv(ne)}removeSchema(se){if(se instanceof RegExp)return this._removeAllSchemas(this.schemas,se),this._removeAllSchemas(this.refs,se),this;switch(typeof se){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const ne=m.call(this,se);return typeof ne=="object"&&this._cache.delete(ne.schema),delete this.schemas[se],delete this.refs[se],this}case"object":{const ne=se;this._cache.delete(ne);let J=se[this.opts.schemaId];return J&&(J=(0,l.normalizeId)(J),delete this.schemas[J],delete this.refs[J]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(se){for(const ne of se)this.addKeyword(ne);return this}addKeyword(se,ne){let J;if(typeof se=="string")J=se,typeof ne=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),ne.keyword=J);else if(typeof se=="object"&&ne===void 0){if(ne=se,J=ne.keyword,Array.isArray(J)&&!J.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(z.call(this,J,ne),!ne)return(0,c.eachItem)(J,H=>ie.call(this,H)),this;Se.call(this,ne);const B={...ne,type:(0,u.getJSONTypes)(ne.type),schemaType:(0,u.getJSONTypes)(ne.schemaType)};return(0,c.eachItem)(J,B.type.length===0?H=>ie.call(this,H,B):H=>B.type.forEach(ae=>ie.call(this,H,B,ae))),this}getKeyword(se){const ne=this.RULES.all[se];return typeof ne=="object"?ne.definition:!!ne}removeKeyword(se){const{RULES:ne}=this;delete ne.keywords[se],delete ne.all[se];for(const J of ne.rules){const B=J.rules.findIndex(H=>H.keyword===se);B>=0&&J.rules.splice(B,1)}return this}addFormat(se,ne){return typeof ne=="string"&&(ne=new RegExp(ne)),this.formats[se]=ne,this}errorsText(se=this.errors,{separator:ne=", ",dataVar:J="data"}={}){return!se||se.length===0?"No errors":se.map(B=>`${J}${B.instancePath} ${B.message}`).reduce((B,H)=>B+ne+H)}$dataMetaSchema(se,ne){const J=this.RULES.all;se=JSON.parse(JSON.stringify(se));for(const B of ne){const H=B.split("/").slice(1);let ae=se;for(const te of H)ae=ae[te];for(const te in J){const ce=J[te];if(typeof ce!="object")continue;const{$data:ue}=ce.definition,fe=ae[te];ue&&fe&&(ae[te]=Ee(fe))}}return se}_removeAllSchemas(se,ne){for(const J in se){const B=se[J];(!ne||ne.test(J))&&(typeof B=="string"?delete se[J]:B&&!B.meta&&(this._cache.delete(B.schema),delete se[J]))}}_addSchema(se,ne,J,B=this.opts.validateSchema,H=this.opts.addUsedSchema){let ae;const{schemaId:te}=this.opts;if(typeof se=="object")ae=se[te];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof se!="boolean")throw new Error("schema must be object or boolean")}let ce=this._cache.get(se);if(ce!==void 0)return ce;J=(0,l.normalizeId)(ae||J);const ue=l.getSchemaRefs.call(this,se,J);return ce=new a.SchemaEnv({schema:se,schemaId:te,meta:ne,baseId:J,localRefs:ue}),this._cache.set(ce.schema,ce),H&&!J.startsWith("#")&&(J&&this._checkUnique(J),this.refs[J]=ce),B&&this.validateSchema(se,!0),ce}_checkUnique(se){if(this.schemas[se]||this.refs[se])throw new Error(`schema with key or id "${se}" already exists`)}_compileSchemaEnv(se){if(se.meta?this._compileMetaSchema(se):a.compileSchema.call(this,se),!se.validate)throw new Error("ajv implementation error");return se.validate}_compileMetaSchema(se){const ne=this.opts;this.opts=this._metaOpts;try{a.compileSchema.call(this,se)}finally{this.opts=ne}}}t.default=k,k.ValidationError=r.default,k.MissingRefError=i.default;function x(_e,se,ne,J="error"){for(const B in _e){const H=B;H in se&&this.logger[J](`${ne}: option ${B}. ${_e[H]}`)}}function m(_e){return _e=(0,l.normalizeId)(_e),this.schemas[_e]||this.refs[_e]}function T(){const _e=this.opts.schemas;if(_e)if(Array.isArray(_e))this.addSchema(_e);else for(const se in _e)this.addSchema(_e[se],se)}function P(){for(const _e in this.opts.formats){const se=this.opts.formats[_e];se&&this.addFormat(_e,se)}}function I(_e){if(Array.isArray(_e)){this.addVocabulary(_e);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const se in _e){const ne=_e[se];ne.keyword||(ne.keyword=se),this.addKeyword(ne)}}function M(){const _e={...this.opts};for(const se of g)delete _e[se];return _e}const L={log(){},warn(){},error(){}};function R(_e){if(_e===!1)return L;if(_e===void 0)return console;if(_e.log&&_e.warn&&_e.error)return _e;throw new Error("logger must implement log, warn and error methods")}const V=/^[a-z_$][a-z0-9_$:-]*$/i;function z(_e,se){const{RULES:ne}=this;if((0,c.eachItem)(_e,J=>{if(ne.keywords[J])throw new Error(`Keyword ${J} is already defined`);if(!V.test(J))throw new Error(`Keyword ${J} has invalid name`)}),!!se&&se.$data&&!("code"in se||"validate"in se))throw new Error('$data keyword must have "code" or "validate" function')}function ie(_e,se,ne){var J;const B=se==null?void 0:se.post;if(ne&&B)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:H}=this;let ae=B?H.post:H.rules.find(({type:ce})=>ce===ne);if(ae||(ae={type:ne,rules:[]},H.rules.push(ae)),H.keywords[_e]=!0,!se)return;const te={keyword:_e,definition:{...se,type:(0,u.getJSONTypes)(se.type),schemaType:(0,u.getJSONTypes)(se.schemaType)}};se.before?oe.call(this,ae,te,se.before):ae.rules.push(te),H.all[_e]=te,(J=se.implements)===null||J===void 0||J.forEach(ce=>this.addKeyword(ce))}function oe(_e,se,ne){const J=_e.rules.findIndex(B=>B.keyword===ne);J>=0?_e.rules.splice(J,0,se):(_e.rules.push(se),this.logger.warn(`rule ${ne} is not defined`))}function Se(_e){let{metaSchema:se}=_e;se!==void 0&&(_e.$data&&this.opts.$data&&(se=Ee(se)),_e.validateSchema=this.compile(se,!0))}const Ae={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Ee(_e){return{anyOf:[_e,Ae]}}})(jre);var QF={},eR={},tR={};Object.defineProperty(tR,"__esModule",{value:!0});const KFe={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};tR.default=KFe;var Eg={};Object.defineProperty(Eg,"__esModule",{value:!0});Eg.callRef=Eg.getValidate=void 0;const XFe=yS,VU=Tn,Ya=Sn,Nm=kc,BU=ns,lC=er,JFe={keyword:"$ref",schemaType:"string",code(t){const{gen:e,schema:n,it:r}=t,{baseId:i,schemaEnv:o,validateName:a,opts:s,self:l}=r,{root:u}=o;if((n==="#"||n==="#/")&&i===u.baseId)return f();const c=BU.resolveRef.call(l,u,i,n);if(c===void 0)throw new XFe.default(r.opts.uriResolver,i,n);if(c instanceof BU.SchemaEnv)return h(c);return d(c);function f(){if(o===u)return k2(t,a,o,o.$async);const g=e.scopeValue("root",{ref:u});return k2(t,(0,Ya._)`${g}.validate`,u,u.$async)}function h(g){const y=pie(t,g);k2(t,y,g,g.$async)}function d(g){const y=e.scopeValue("schema",s.code.source===!0?{ref:g,code:(0,Ya.stringify)(g)}:{ref:g}),_=e.name("valid"),v=t.subschema({schema:g,dataTypes:[],schemaPath:Ya.nil,topSchemaRef:y,errSchemaPath:n},_);t.mergeEvaluated(v),t.ok(_)}}};function pie(t,e){const{gen:n}=t;return e.validate?n.scopeValue("validate",{ref:e.validate}):(0,Ya._)`${n.scopeValue("wrapper",{ref:e})}.validate`}Eg.getValidate=pie;function k2(t,e,n,r){const{gen:i,it:o}=t,{allErrors:a,schemaEnv:s,opts:l}=o,u=l.passContext?Nm.default.this:Ya.nil;r?c():f();function c(){if(!s.$async)throw new Error("async schema referenced by sync schema");const g=i.let("valid");i.try(()=>{i.code((0,Ya._)`await ${(0,VU.callValidateCode)(t,e,u)}`),d(e),a||i.assign(g,!0)},y=>{i.if((0,Ya._)`!(${y} instanceof ${o.ValidationError})`,()=>i.throw(y)),h(y),a||i.assign(g,!1)}),t.ok(g)}function f(){t.result((0,VU.callValidateCode)(t,e,u),()=>d(e),()=>h(e))}function h(g){const y=(0,Ya._)`${g}.errors`;i.assign(Nm.default.vErrors,(0,Ya._)`${Nm.default.vErrors} === null ? ${y} : ${Nm.default.vErrors}.concat(${y})`),i.assign(Nm.default.errors,(0,Ya._)`${Nm.default.vErrors}.length`)}function d(g){var y;if(!o.opts.unevaluated)return;const _=(y=n==null?void 0:n.validate)===null||y===void 0?void 0:y.evaluated;if(o.props!==!0)if(_&&!_.dynamicProps)_.props!==void 0&&(o.props=lC.mergeEvaluated.props(i,_.props,o.props));else{const v=i.var("props",(0,Ya._)`${g}.evaluated.props`);o.props=lC.mergeEvaluated.props(i,v,o.props,Ya.Name)}if(o.items!==!0)if(_&&!_.dynamicItems)_.items!==void 0&&(o.items=lC.mergeEvaluated.items(i,_.items,o.items));else{const v=i.var("items",(0,Ya._)`${g}.evaluated.items`);o.items=lC.mergeEvaluated.items(i,v,o.items,Ya.Name)}}}Eg.callRef=k2;Eg.default=JFe;Object.defineProperty(eR,"__esModule",{value:!0});const ZFe=tR,QFe=Eg,eRe=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",ZFe.default,QFe.default];eR.default=eRe;var nR={},rR={};Object.defineProperty(rR,"__esModule",{value:!0});const sT=Sn,oh=sT.operators,lT={maximum:{okStr:"<=",ok:oh.LTE,fail:oh.GT},minimum:{okStr:">=",ok:oh.GTE,fail:oh.LT},exclusiveMaximum:{okStr:"<",ok:oh.LT,fail:oh.GTE},exclusiveMinimum:{okStr:">",ok:oh.GT,fail:oh.LTE}},tRe={message:({keyword:t,schemaCode:e})=>(0,sT.str)`must be ${lT[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,sT._)`{comparison: ${lT[t].okStr}, limit: ${e}}`},nRe={keyword:Object.keys(lT),type:"number",schemaType:"number",$data:!0,error:tRe,code(t){const{keyword:e,data:n,schemaCode:r}=t;t.fail$data((0,sT._)`${n} ${lT[e].fail} ${r} || isNaN(${n})`)}};rR.default=nRe;var iR={};Object.defineProperty(iR,"__esModule",{value:!0});const h1=Sn,rRe={message:({schemaCode:t})=>(0,h1.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,h1._)`{multipleOf: ${t}}`},iRe={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:rRe,code(t){const{gen:e,data:n,schemaCode:r,it:i}=t,o=i.opts.multipleOfPrecision,a=e.let("res"),s=o?(0,h1._)`Math.abs(Math.round(${a}) - ${a}) > 1e-${o}`:(0,h1._)`${a} !== parseInt(${a})`;t.fail$data((0,h1._)`(${r} === 0 || (${a} = ${n}/${r}, ${s}))`)}};iR.default=iRe;var oR={},aR={};Object.defineProperty(aR,"__esModule",{value:!0});function gie(t){const e=t.length;let n=0,r=0,i;for(;r<e;)n++,i=t.charCodeAt(r++),i>=55296&&i<=56319&&r<e&&(i=t.charCodeAt(r),(i&64512)===56320&&r++);return n}aR.default=gie;gie.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(oR,"__esModule",{value:!0});const $p=Sn,oRe=er,aRe=aR,sRe={message({keyword:t,schemaCode:e}){const n=t==="maxLength"?"more":"fewer";return(0,$p.str)`must NOT have ${n} than ${e} characters`},params:({schemaCode:t})=>(0,$p._)`{limit: ${t}}`},lRe={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:sRe,code(t){const{keyword:e,data:n,schemaCode:r,it:i}=t,o=e==="maxLength"?$p.operators.GT:$p.operators.LT,a=i.opts.unicode===!1?(0,$p._)`${n}.length`:(0,$p._)`${(0,oRe.useFunc)(t.gen,aRe.default)}(${n})`;t.fail$data((0,$p._)`${a} ${o} ${r}`)}};oR.default=lRe;var sR={};Object.defineProperty(sR,"__esModule",{value:!0});const uRe=Tn,uT=Sn,cRe={message:({schemaCode:t})=>(0,uT.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,uT._)`{pattern: ${t}}`},fRe={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:cRe,code(t){const{data:e,$data:n,schema:r,schemaCode:i,it:o}=t,a=o.opts.unicodeRegExp?"u":"",s=n?(0,uT._)`(new RegExp(${i}, ${a}))`:(0,uRe.usePattern)(t,r);t.fail$data((0,uT._)`!${s}.test(${e})`)}};sR.default=fRe;var lR={};Object.defineProperty(lR,"__esModule",{value:!0});const d1=Sn,hRe={message({keyword:t,schemaCode:e}){const n=t==="maxProperties"?"more":"fewer";return(0,d1.str)`must NOT have ${n} than ${e} properties`},params:({schemaCode:t})=>(0,d1._)`{limit: ${t}}`},dRe={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:hRe,code(t){const{keyword:e,data:n,schemaCode:r}=t,i=e==="maxProperties"?d1.operators.GT:d1.operators.LT;t.fail$data((0,d1._)`Object.keys(${n}).length ${i} ${r}`)}};lR.default=dRe;var uR={};Object.defineProperty(uR,"__esModule",{value:!0});const ob=Tn,p1=Sn,pRe=er,gRe={message:({params:{missingProperty:t}})=>(0,p1.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,p1._)`{missingProperty: ${t}}`},mRe={keyword:"required",type:"object",schemaType:"array",$data:!0,error:gRe,code(t){const{gen:e,schema:n,schemaCode:r,data:i,$data:o,it:a}=t,{opts:s}=a;if(!o&&n.length===0)return;const l=n.length>=s.loopRequired;if(a.allErrors?u():c(),s.strictRequired){const d=t.parentSchema.properties,{definedProperties:g}=t.it;for(const y of n)if((d==null?void 0:d[y])===void 0&&!g.has(y)){const _=a.schemaEnv.baseId+a.errSchemaPath,v=`required property "${y}" is not defined at "${_}" (strictRequired)`;(0,pRe.checkStrictMode)(a,v,a.opts.strictRequired)}}function u(){if(l||o)t.block$data(p1.nil,f);else for(const d of n)(0,ob.checkReportMissingProp)(t,d)}function c(){const d=e.let("missing");if(l||o){const g=e.let("valid",!0);t.block$data(g,()=>h(d,g)),t.ok(g)}else e.if((0,ob.checkMissingProp)(t,n,d)),(0,ob.reportMissingProp)(t,d),e.else()}function f(){e.forOf("prop",r,d=>{t.setParams({missingProperty:d}),e.if((0,ob.noPropertyInData)(e,i,d,s.ownProperties),()=>t.error())})}function h(d,g){t.setParams({missingProperty:d}),e.forOf(d,r,()=>{e.assign(g,(0,ob.propertyInData)(e,i,d,s.ownProperties)),e.if((0,p1.not)(g),()=>{t.error(),e.break()})},p1.nil)}}};uR.default=mRe;var cR={};Object.defineProperty(cR,"__esModule",{value:!0});const g1=Sn,vRe={message({keyword:t,schemaCode:e}){const n=t==="maxItems"?"more":"fewer";return(0,g1.str)`must NOT have ${n} than ${e} items`},params:({schemaCode:t})=>(0,g1._)`{limit: ${t}}`},yRe={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:vRe,code(t){const{keyword:e,data:n,schemaCode:r}=t,i=e==="maxItems"?g1.operators.GT:g1.operators.LT;t.fail$data((0,g1._)`${n}.length ${i} ${r}`)}};cR.default=yRe;var fR={},bS={};Object.defineProperty(bS,"__esModule",{value:!0});const mie=YF;mie.code='require("ajv/dist/runtime/equal").default';bS.default=mie;Object.defineProperty(fR,"__esModule",{value:!0});const hI=mS,mo=Sn,bRe=er,_Re=bS,SRe={message:({params:{i:t,j:e}})=>(0,mo.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,mo._)`{i: ${t}, j: ${e}}`},wRe={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:SRe,code(t){const{gen:e,data:n,$data:r,schema:i,parentSchema:o,schemaCode:a,it:s}=t;if(!r&&!i)return;const l=e.let("valid"),u=o.items?(0,hI.getSchemaTypes)(o.items):[];t.block$data(l,c,(0,mo._)`${a} === false`),t.ok(l);function c(){const g=e.let("i",(0,mo._)`${n}.length`),y=e.let("j");t.setParams({i:g,j:y}),e.assign(l,!0),e.if((0,mo._)`${g} > 1`,()=>(f()?h:d)(g,y))}function f(){return u.length>0&&!u.some(g=>g==="object"||g==="array")}function h(g,y){const _=e.name("item"),v=(0,hI.checkDataTypes)(u,_,s.opts.strictNumbers,hI.DataType.Wrong),S=e.const("indices",(0,mo._)`{}`);e.for((0,mo._)`;${g}--;`,()=>{e.let(_,(0,mo._)`${n}[${g}]`),e.if(v,(0,mo._)`continue`),u.length>1&&e.if((0,mo._)`typeof ${_} == "string"`,(0,mo._)`${_} += "_"`),e.if((0,mo._)`typeof ${S}[${_}] == "number"`,()=>{e.assign(y,(0,mo._)`${S}[${_}]`),t.error(),e.assign(l,!1).break()}).code((0,mo._)`${S}[${_}] = ${g}`)})}function d(g,y){const _=(0,bRe.useFunc)(e,_Re.default),v=e.name("outer");e.label(v).for((0,mo._)`;${g}--;`,()=>e.for((0,mo._)`${y} = ${g}; ${y}--;`,()=>e.if((0,mo._)`${_}(${n}[${g}], ${n}[${y}])`,()=>{t.error(),e.assign(l,!1).break(v)})))}}};fR.default=wRe;var hR={};Object.defineProperty(hR,"__esModule",{value:!0});const QL=Sn,xRe=er,CRe=bS,kRe={message:"must be equal to constant",params:({schemaCode:t})=>(0,QL._)`{allowedValue: ${t}}`},TRe={keyword:"const",$data:!0,error:kRe,code(t){const{gen:e,data:n,$data:r,schemaCode:i,schema:o}=t;r||o&&typeof o=="object"?t.fail$data((0,QL._)`!${(0,xRe.useFunc)(e,CRe.default)}(${n}, ${i})`):t.fail((0,QL._)`${o} !== ${n}`)}};hR.default=TRe;var dR={};Object.defineProperty(dR,"__esModule",{value:!0});const Lb=Sn,ARe=er,ERe=bS,PRe={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,Lb._)`{allowedValues: ${t}}`},ORe={keyword:"enum",schemaType:"array",$data:!0,error:PRe,code(t){const{gen:e,data:n,$data:r,schema:i,schemaCode:o,it:a}=t;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const s=i.length>=a.opts.loopEnum;let l;const u=()=>l??(l=(0,ARe.useFunc)(e,ERe.default));let c;if(s||r)c=e.let("valid"),t.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const d=e.const("vSchema",o);c=(0,Lb.or)(...i.map((g,y)=>h(d,y)))}t.pass(c);function f(){e.assign(c,!1),e.forOf("v",o,d=>e.if((0,Lb._)`${u()}(${n}, ${d})`,()=>e.assign(c,!0).break()))}function h(d,g){const y=i[g];return typeof y=="object"&&y!==null?(0,Lb._)`${u()}(${n}, ${d}[${g}])`:(0,Lb._)`${n} === ${y}`}}};dR.default=ORe;Object.defineProperty(nR,"__esModule",{value:!0});const IRe=rR,$Re=iR,LRe=oR,DRe=sR,MRe=lR,NRe=uR,FRe=cR,RRe=fR,VRe=hR,BRe=dR,zRe=[IRe.default,$Re.default,LRe.default,DRe.default,MRe.default,NRe.default,FRe.default,RRe.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},VRe.default,BRe.default];nR.default=zRe;var pR={},V0={};Object.defineProperty(V0,"__esModule",{value:!0});V0.validateAdditionalItems=void 0;const Lp=Sn,eD=er,jRe={message:({params:{len:t}})=>(0,Lp.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,Lp._)`{limit: ${t}}`},URe={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:jRe,code(t){const{parentSchema:e,it:n}=t,{items:r}=e;if(!Array.isArray(r)){(0,eD.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}vie(t,r)}};function vie(t,e){const{gen:n,schema:r,data:i,keyword:o,it:a}=t;a.items=!0;const s=n.const("len",(0,Lp._)`${i}.length`);if(r===!1)t.setParams({len:e.length}),t.pass((0,Lp._)`${s} <= ${e.length}`);else if(typeof r=="object"&&!(0,eD.alwaysValidSchema)(a,r)){const u=n.var("valid",(0,Lp._)`${s} <= ${e.length}`);n.if((0,Lp.not)(u),()=>l(u)),t.ok(u)}function l(u){n.forRange("i",e.length,s,c=>{t.subschema({keyword:o,dataProp:c,dataPropType:eD.Type.Num},u),a.allErrors||n.if((0,Lp.not)(u),()=>n.break())})}}V0.validateAdditionalItems=vie;V0.default=URe;var gR={},B0={};Object.defineProperty(B0,"__esModule",{value:!0});B0.validateTuple=void 0;const zU=Sn,T2=er,WRe=Tn,HRe={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){const{schema:e,it:n}=t;if(Array.isArray(e))return yie(t,"additionalItems",e);n.items=!0,!(0,T2.alwaysValidSchema)(n,e)&&t.ok((0,WRe.validateArray)(t))}};function yie(t,e,n=t.schema){const{gen:r,parentSchema:i,data:o,keyword:a,it:s}=t;c(i),s.opts.unevaluated&&n.length&&s.items!==!0&&(s.items=T2.mergeEvaluated.items(r,n.length,s.items));const l=r.name("valid"),u=r.const("len",(0,zU._)`${o}.length`);n.forEach((f,h)=>{(0,T2.alwaysValidSchema)(s,f)||(r.if((0,zU._)`${u} > ${h}`,()=>t.subschema({keyword:a,schemaProp:h,dataProp:h},l)),t.ok(l))});function c(f){const{opts:h,errSchemaPath:d}=s,g=n.length,y=g===f.minItems&&(g===f.maxItems||f[e]===!1);if(h.strictTuples&&!y){const _=`"${a}" is ${g}-tuple, but minItems or maxItems/${e} are not specified or different at path "${d}"`;(0,T2.checkStrictMode)(s,_,h.strictTuples)}}}B0.validateTuple=yie;B0.default=HRe;Object.defineProperty(gR,"__esModule",{value:!0});const GRe=B0,qRe={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,GRe.validateTuple)(t,"items")};gR.default=qRe;var mR={};Object.defineProperty(mR,"__esModule",{value:!0});const jU=Sn,YRe=er,KRe=Tn,XRe=V0,JRe={message:({params:{len:t}})=>(0,jU.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,jU._)`{limit: ${t}}`},ZRe={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:JRe,code(t){const{schema:e,parentSchema:n,it:r}=t,{prefixItems:i}=n;r.items=!0,!(0,YRe.alwaysValidSchema)(r,e)&&(i?(0,XRe.validateAdditionalItems)(t,i):t.ok((0,KRe.validateArray)(t)))}};mR.default=ZRe;var vR={};Object.defineProperty(vR,"__esModule",{value:!0});const dl=Sn,uC=er,QRe={message:({params:{min:t,max:e}})=>e===void 0?(0,dl.str)`must contain at least ${t} valid item(s)`:(0,dl.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,dl._)`{minContains: ${t}}`:(0,dl._)`{minContains: ${t}, maxContains: ${e}}`},e5e={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:QRe,code(t){const{gen:e,schema:n,parentSchema:r,data:i,it:o}=t;let a,s;const{minContains:l,maxContains:u}=r;o.opts.next?(a=l===void 0?1:l,s=u):a=1;const c=e.const("len",(0,dl._)`${i}.length`);if(t.setParams({min:a,max:s}),s===void 0&&a===0){(0,uC.checkStrictMode)(o,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(s!==void 0&&a>s){(0,uC.checkStrictMode)(o,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,uC.alwaysValidSchema)(o,n)){let y=(0,dl._)`${c} >= ${a}`;s!==void 0&&(y=(0,dl._)`${y} && ${c} <= ${s}`),t.pass(y);return}o.items=!0;const f=e.name("valid");s===void 0&&a===1?d(f,()=>e.if(f,()=>e.break())):a===0?(e.let(f,!0),s!==void 0&&e.if((0,dl._)`${i}.length > 0`,h)):(e.let(f,!1),h()),t.result(f,()=>t.reset());function h(){const y=e.name("_valid"),_=e.let("count",0);d(y,()=>e.if(y,()=>g(_)))}function d(y,_){e.forRange("i",0,c,v=>{t.subschema({keyword:"contains",dataProp:v,dataPropType:uC.Type.Num,compositeRule:!0},y),_()})}function g(y){e.code((0,dl._)`${y}++`),s===void 0?e.if((0,dl._)`${y} >= ${a}`,()=>e.assign(f,!0).break()):(e.if((0,dl._)`${y} > ${s}`,()=>e.assign(f,!1).break()),a===1?e.assign(f,!0):e.if((0,dl._)`${y} >= ${a}`,()=>e.assign(f,!0)))}}};vR.default=e5e;var bie={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const e=Sn,n=er,r=Tn;t.error={message:({params:{property:l,depsCount:u,deps:c}})=>{const f=u===1?"property":"properties";return(0,e.str)`must have ${f} ${c} when property ${l} is present`},params:({params:{property:l,depsCount:u,deps:c,missingProperty:f}})=>(0,e._)`{property: ${l},
    missingProperty: ${f},
    depsCount: ${u},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(l){const[u,c]=o(l);a(l,u),s(l,c)}};function o({schema:l}){const u={},c={};for(const f in l){if(f==="__proto__")continue;const h=Array.isArray(l[f])?u:c;h[f]=l[f]}return[u,c]}function a(l,u=l.schema){const{gen:c,data:f,it:h}=l;if(Object.keys(u).length===0)return;const d=c.let("missing");for(const g in u){const y=u[g];if(y.length===0)continue;const _=(0,r.propertyInData)(c,f,g,h.opts.ownProperties);l.setParams({property:g,depsCount:y.length,deps:y.join(", ")}),h.allErrors?c.if(_,()=>{for(const v of y)(0,r.checkReportMissingProp)(l,v)}):(c.if((0,e._)`${_} && (${(0,r.checkMissingProp)(l,y,d)})`),(0,r.reportMissingProp)(l,d),c.else())}}t.validatePropertyDeps=a;function s(l,u=l.schema){const{gen:c,data:f,keyword:h,it:d}=l,g=c.name("valid");for(const y in u)(0,n.alwaysValidSchema)(d,u[y])||(c.if((0,r.propertyInData)(c,f,y,d.opts.ownProperties),()=>{const _=l.subschema({keyword:h,schemaProp:y},g);l.mergeValidEvaluated(_,g)},()=>c.var(g,!0)),l.ok(g))}t.validateSchemaDeps=s,t.default=i})(bie);var yR={};Object.defineProperty(yR,"__esModule",{value:!0});const _ie=Sn,t5e=er,n5e={message:"property name must be valid",params:({params:t})=>(0,_ie._)`{propertyName: ${t.propertyName}}`},r5e={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:n5e,code(t){const{gen:e,schema:n,data:r,it:i}=t;if((0,t5e.alwaysValidSchema)(i,n))return;const o=e.name("valid");e.forIn("key",r,a=>{t.setParams({propertyName:a}),t.subschema({keyword:"propertyNames",data:a,dataTypes:["string"],propertyName:a,compositeRule:!0},o),e.if((0,_ie.not)(o),()=>{t.error(!0),i.allErrors||e.break()})}),t.ok(o)}};yR.default=r5e;var iE={};Object.defineProperty(iE,"__esModule",{value:!0});const cC=Tn,Zl=Sn,i5e=kc,fC=er,o5e={message:"must NOT have additional properties",params:({params:t})=>(0,Zl._)`{additionalProperty: ${t.additionalProperty}}`},a5e={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:o5e,code(t){const{gen:e,schema:n,parentSchema:r,data:i,errsCount:o,it:a}=t;if(!o)throw new Error("ajv implementation error");const{allErrors:s,opts:l}=a;if(a.props=!0,l.removeAdditional!=="all"&&(0,fC.alwaysValidSchema)(a,n))return;const u=(0,cC.allSchemaProperties)(r.properties),c=(0,cC.allSchemaProperties)(r.patternProperties);f(),t.ok((0,Zl._)`${o} === ${i5e.default.errors}`);function f(){e.forIn("key",i,_=>{!u.length&&!c.length?g(_):e.if(h(_),()=>g(_))})}function h(_){let v;if(u.length>8){const S=(0,fC.schemaRefOrVal)(a,r.properties,"properties");v=(0,cC.isOwnProperty)(e,S,_)}else u.length?v=(0,Zl.or)(...u.map(S=>(0,Zl._)`${_} === ${S}`)):v=Zl.nil;return c.length&&(v=(0,Zl.or)(v,...c.map(S=>(0,Zl._)`${(0,cC.usePattern)(t,S)}.test(${_})`))),(0,Zl.not)(v)}function d(_){e.code((0,Zl._)`delete ${i}[${_}]`)}function g(_){if(l.removeAdditional==="all"||l.removeAdditional&&n===!1){d(_);return}if(n===!1){t.setParams({additionalProperty:_}),t.error(),s||e.break();return}if(typeof n=="object"&&!(0,fC.alwaysValidSchema)(a,n)){const v=e.name("valid");l.removeAdditional==="failing"?(y(_,v,!1),e.if((0,Zl.not)(v),()=>{t.reset(),d(_)})):(y(_,v),s||e.if((0,Zl.not)(v),()=>e.break()))}}function y(_,v,S){const C={keyword:"additionalProperties",dataProp:_,dataPropType:fC.Type.Str};S===!1&&Object.assign(C,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(C,v)}}};iE.default=a5e;var bR={};Object.defineProperty(bR,"__esModule",{value:!0});const s5e=du,UU=Tn,dI=er,WU=iE,l5e={keyword:"properties",type:"object",schemaType:"object",code(t){const{gen:e,schema:n,parentSchema:r,data:i,it:o}=t;o.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&WU.default.code(new s5e.KeywordCxt(o,WU.default,"additionalProperties"));const a=(0,UU.allSchemaProperties)(n);for(const f of a)o.definedProperties.add(f);o.opts.unevaluated&&a.length&&o.props!==!0&&(o.props=dI.mergeEvaluated.props(e,(0,dI.toHash)(a),o.props));const s=a.filter(f=>!(0,dI.alwaysValidSchema)(o,n[f]));if(s.length===0)return;const l=e.name("valid");for(const f of s)u(f)?c(f):(e.if((0,UU.propertyInData)(e,i,f,o.opts.ownProperties)),c(f),o.allErrors||e.else().var(l,!0),e.endIf()),t.it.definedProperties.add(f),t.ok(l);function u(f){return o.opts.useDefaults&&!o.compositeRule&&n[f].default!==void 0}function c(f){t.subschema({keyword:"properties",schemaProp:f,dataProp:f},l)}}};bR.default=l5e;var _R={};Object.defineProperty(_R,"__esModule",{value:!0});const HU=Tn,hC=Sn,GU=er,qU=er,u5e={keyword:"patternProperties",type:"object",schemaType:"object",code(t){const{gen:e,schema:n,data:r,parentSchema:i,it:o}=t,{opts:a}=o,s=(0,HU.allSchemaProperties)(n),l=s.filter(y=>(0,GU.alwaysValidSchema)(o,n[y]));if(s.length===0||l.length===s.length&&(!o.opts.unevaluated||o.props===!0))return;const u=a.strictSchema&&!a.allowMatchingProperties&&i.properties,c=e.name("valid");o.props!==!0&&!(o.props instanceof hC.Name)&&(o.props=(0,qU.evaluatedPropsToName)(e,o.props));const{props:f}=o;h();function h(){for(const y of s)u&&d(y),o.allErrors?g(y):(e.var(c,!0),g(y),e.if(c))}function d(y){for(const _ in u)new RegExp(y).test(_)&&(0,GU.checkStrictMode)(o,`property ${_} matches pattern ${y} (use allowMatchingProperties)`)}function g(y){e.forIn("key",r,_=>{e.if((0,hC._)`${(0,HU.usePattern)(t,y)}.test(${_})`,()=>{const v=l.includes(y);v||t.subschema({keyword:"patternProperties",schemaProp:y,dataProp:_,dataPropType:qU.Type.Str},c),o.opts.unevaluated&&f!==!0?e.assign((0,hC._)`${f}[${_}]`,!0):!v&&!o.allErrors&&e.if((0,hC.not)(c),()=>e.break())})})}}};_R.default=u5e;var SR={};Object.defineProperty(SR,"__esModule",{value:!0});const c5e=er,f5e={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){const{gen:e,schema:n,it:r}=t;if((0,c5e.alwaysValidSchema)(r,n)){t.fail();return}const i=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),t.failResult(i,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};SR.default=f5e;var wR={};Object.defineProperty(wR,"__esModule",{value:!0});const h5e=Tn,d5e={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:h5e.validateUnion,error:{message:"must match a schema in anyOf"}};wR.default=d5e;var xR={};Object.defineProperty(xR,"__esModule",{value:!0});const A2=Sn,p5e=er,g5e={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,A2._)`{passingSchemas: ${t.passing}}`},m5e={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:g5e,code(t){const{gen:e,schema:n,parentSchema:r,it:i}=t;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const o=n,a=e.let("valid",!1),s=e.let("passing",null),l=e.name("_valid");t.setParams({passing:s}),e.block(u),t.result(a,()=>t.reset(),()=>t.error(!0));function u(){o.forEach((c,f)=>{let h;(0,p5e.alwaysValidSchema)(i,c)?e.var(l,!0):h=t.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},l),f>0&&e.if((0,A2._)`${l} && ${a}`).assign(a,!1).assign(s,(0,A2._)`[${s}, ${f}]`).else(),e.if(l,()=>{e.assign(a,!0),e.assign(s,f),h&&t.mergeEvaluated(h,A2.Name)})})}}};xR.default=m5e;var CR={};Object.defineProperty(CR,"__esModule",{value:!0});const v5e=er,y5e={keyword:"allOf",schemaType:"array",code(t){const{gen:e,schema:n,it:r}=t;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=e.name("valid");n.forEach((o,a)=>{if((0,v5e.alwaysValidSchema)(r,o))return;const s=t.subschema({keyword:"allOf",schemaProp:a},i);t.ok(i),t.mergeEvaluated(s)})}};CR.default=y5e;var kR={};Object.defineProperty(kR,"__esModule",{value:!0});const cT=Sn,Sie=er,b5e={message:({params:t})=>(0,cT.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,cT._)`{failingKeyword: ${t.ifClause}}`},_5e={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:b5e,code(t){const{gen:e,parentSchema:n,it:r}=t;n.then===void 0&&n.else===void 0&&(0,Sie.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=YU(r,"then"),o=YU(r,"else");if(!i&&!o)return;const a=e.let("valid",!0),s=e.name("_valid");if(l(),t.reset(),i&&o){const c=e.let("ifClause");t.setParams({ifClause:c}),e.if(s,u("then",c),u("else",c))}else i?e.if(s,u("then")):e.if((0,cT.not)(s),u("else"));t.pass(a,()=>t.error(!0));function l(){const c=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},s);t.mergeEvaluated(c)}function u(c,f){return()=>{const h=t.subschema({keyword:c},s);e.assign(a,s),t.mergeValidEvaluated(h,a),f?e.assign(f,(0,cT._)`${c}`):t.setParams({ifClause:c})}}}};function YU(t,e){const n=t.schema[e];return n!==void 0&&!(0,Sie.alwaysValidSchema)(t,n)}kR.default=_5e;var TR={};Object.defineProperty(TR,"__esModule",{value:!0});const S5e=er,w5e={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:n}){e.if===void 0&&(0,S5e.checkStrictMode)(n,`"${t}" without "if" is ignored`)}};TR.default=w5e;Object.defineProperty(pR,"__esModule",{value:!0});const x5e=V0,C5e=gR,k5e=B0,T5e=mR,A5e=vR,E5e=bie,P5e=yR,O5e=iE,I5e=bR,$5e=_R,L5e=SR,D5e=wR,M5e=xR,N5e=CR,F5e=kR,R5e=TR;function V5e(t=!1){const e=[L5e.default,D5e.default,M5e.default,N5e.default,F5e.default,R5e.default,P5e.default,O5e.default,E5e.default,I5e.default,$5e.default];return t?e.push(C5e.default,T5e.default):e.push(x5e.default,k5e.default),e.push(A5e.default),e}pR.default=V5e;var AR={},ER={};Object.defineProperty(ER,"__esModule",{value:!0});const Ii=Sn,B5e={message:({schemaCode:t})=>(0,Ii.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,Ii._)`{format: ${t}}`},z5e={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:B5e,code(t,e){const{gen:n,data:r,$data:i,schema:o,schemaCode:a,it:s}=t,{opts:l,errSchemaPath:u,schemaEnv:c,self:f}=s;if(!l.validateFormats)return;i?h():d();function h(){const g=n.scopeValue("formats",{ref:f.formats,code:l.code.formats}),y=n.const("fDef",(0,Ii._)`${g}[${a}]`),_=n.let("fType"),v=n.let("format");n.if((0,Ii._)`typeof ${y} == "object" && !(${y} instanceof RegExp)`,()=>n.assign(_,(0,Ii._)`${y}.type || "string"`).assign(v,(0,Ii._)`${y}.validate`),()=>n.assign(_,(0,Ii._)`"string"`).assign(v,y)),t.fail$data((0,Ii.or)(S(),C()));function S(){return l.strictSchema===!1?Ii.nil:(0,Ii._)`${a} && !${v}`}function C(){const k=c.$async?(0,Ii._)`(${y}.async ? await ${v}(${r}) : ${v}(${r}))`:(0,Ii._)`${v}(${r})`,x=(0,Ii._)`(typeof ${v} == "function" ? ${k} : ${v}.test(${r}))`;return(0,Ii._)`${v} && ${v} !== true && ${_} === ${e} && !${x}`}}function d(){const g=f.formats[o];if(!g){S();return}if(g===!0)return;const[y,_,v]=C(g);y===e&&t.pass(k());function S(){if(l.strictSchema===!1){f.logger.warn(x());return}throw new Error(x());function x(){return`unknown format "${o}" ignored in schema at path "${u}"`}}function C(x){const m=x instanceof RegExp?(0,Ii.regexpCode)(x):l.code.formats?(0,Ii._)`${l.code.formats}${(0,Ii.getProperty)(o)}`:void 0,T=n.scopeValue("formats",{key:o,ref:x,code:m});return typeof x=="object"&&!(x instanceof RegExp)?[x.type||"string",x.validate,(0,Ii._)`${T}.validate`]:["string",x,T]}function k(){if(typeof g=="object"&&!(g instanceof RegExp)&&g.async){if(!c.$async)throw new Error("async format in sync schema");return(0,Ii._)`await ${v}(${r})`}return typeof _=="function"?(0,Ii._)`${v}(${r})`:(0,Ii._)`${v}.test(${r})`}}}};ER.default=z5e;Object.defineProperty(AR,"__esModule",{value:!0});const j5e=ER,U5e=[j5e.default];AR.default=U5e;var h0={};Object.defineProperty(h0,"__esModule",{value:!0});h0.contentVocabulary=h0.metadataVocabulary=void 0;h0.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];h0.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(QF,"__esModule",{value:!0});const W5e=eR,H5e=nR,G5e=pR,q5e=AR,KU=h0,Y5e=[W5e.default,H5e.default,(0,G5e.default)(),q5e.default,KU.metadataVocabulary,KU.contentVocabulary];QF.default=Y5e;var PR={},wie={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DiscrError=void 0,function(e){e.Tag="tag",e.Mapping="mapping"}(t.DiscrError||(t.DiscrError={}))})(wie);Object.defineProperty(PR,"__esModule",{value:!0});const Xm=Sn,tD=wie,XU=ns,K5e=er,X5e={message:({params:{discrError:t,tagName:e}})=>t===tD.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:n}})=>(0,Xm._)`{error: ${t}, tag: ${n}, tagValue: ${e}}`},J5e={keyword:"discriminator",type:"object",schemaType:"object",error:X5e,code(t){const{gen:e,data:n,schema:r,parentSchema:i,it:o}=t,{oneOf:a}=i;if(!o.opts.discriminator)throw new Error("discriminator: requires discriminator option");const s=r.propertyName;if(typeof s!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!a)throw new Error("discriminator: requires oneOf keyword");const l=e.let("valid",!1),u=e.const("tag",(0,Xm._)`${n}${(0,Xm.getProperty)(s)}`);e.if((0,Xm._)`typeof ${u} == "string"`,()=>c(),()=>t.error(!1,{discrError:tD.DiscrError.Tag,tag:u,tagName:s})),t.ok(l);function c(){const d=h();e.if(!1);for(const g in d)e.elseIf((0,Xm._)`${u} === ${g}`),e.assign(l,f(d[g]));e.else(),t.error(!1,{discrError:tD.DiscrError.Mapping,tag:u,tagName:s}),e.endIf()}function f(d){const g=e.name("valid"),y=t.subschema({keyword:"oneOf",schemaProp:d},g);return t.mergeEvaluated(y,Xm.Name),g}function h(){var d;const g={},y=v(i);let _=!0;for(let k=0;k<a.length;k++){let x=a[k];x!=null&&x.$ref&&!(0,K5e.schemaHasRulesButRef)(x,o.self.RULES)&&(x=XU.resolveRef.call(o.self,o.schemaEnv.root,o.baseId,x==null?void 0:x.$ref),x instanceof XU.SchemaEnv&&(x=x.schema));const m=(d=x==null?void 0:x.properties)===null||d===void 0?void 0:d[s];if(typeof m!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${s}"`);_=_&&(y||v(x)),S(m,k)}if(!_)throw new Error(`discriminator: "${s}" must be required`);return g;function v({required:k}){return Array.isArray(k)&&k.includes(s)}function S(k,x){if(k.const)C(k.const,x);else if(k.enum)for(const m of k.enum)C(m,x);else throw new Error(`discriminator: "properties/${s}" must have "const" or "enum"`)}function C(k,x){if(typeof k!="string"||k in g)throw new Error(`discriminator: "${s}" values must be unique strings`);g[k]=x}}}};PR.default=J5e;const Z5e="http://json-schema.org/draft-07/schema#",Q5e="http://json-schema.org/draft-07/schema#",e8e="Core schema meta-schema",t8e={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},n8e=["object","boolean"],r8e={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},i8e={$schema:Z5e,$id:Q5e,title:e8e,definitions:t8e,type:n8e,properties:r8e,default:!0};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MissingRefError=e.ValidationError=e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;const n=jre,r=QF,i=PR,o=i8e,a=["/properties"],s="http://json-schema.org/draft-07/schema";class l extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(g=>this.addVocabulary(g)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const g=this.opts.$data?this.$dataMetaSchema(o,a):o;this.addMetaSchema(g,s,!1),this.refs["http://json-schema.org/schema"]=s}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(s)?s:void 0)}}t.exports=e=l,Object.defineProperty(e,"__esModule",{value:!0}),e.default=l;var u=du;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return u.KeywordCxt}});var c=Sn;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=vS;Object.defineProperty(e,"ValidationError",{enumerable:!0,get:function(){return f.default}});var h=yS;Object.defineProperty(e,"MissingRefError",{enumerable:!0,get:function(){return h.default}})})(KL,KL.exports);var xie=KL.exports;const Cie=pr(xie),h_=new Cie({validateSchema:!1});function JU(t){return h_.compile(t)}function o8e(t,e){return{isValid:e(t),error:h_.errorsText(e.errors)}}function kie(t){h_.removeSchema(t)}function a8e(t){let e;try{e=h_.validateSchema(JSON.parse(t))}catch(n){return{schemaValid:!1,error:n.message}}if(e)return{schemaValid:e};try{return h_.compile(JSON.parse(t)),{schemaValid:e}}catch(n){return{schemaValid:e,error:n.message}}}class s8e{constructor(e,n){Wn(this,"ref");Wn(this,"_schema");Wn(this,"validator");this.ref=e,this._schema=n,this.schema.$id=e,this.validator=JU(n)}update(e){kie(this.ref),this._schema=e,this.schema.$id=this.ref,this.validator=JU(e)}validateMarking(e){return o8e(e,this.validator)}get schema(){return this._schema}}let dC=class{constructor(e,n){Wn(this,"id");Wn(this,"_name");Wn(this,"_schema");Wn(this,"marking");Wn(this,"defaultMarking");this.id=e,this._name=n,this._schema=new s8e(e,{$id:e,type:"array",items:{type:"object"}}),this.marking=[],this.defaultMarking=[]}set name(e){this._name=e}get name(){return this._name}set schema(e){e.$id=this.id,this._schema.update(e)}get schema(){return this._schema.schema}validateSchema(e){return a8e(JSON.stringify(e))}validateToken(e){return this._schema.validateMarking([e])}validateMarking(e){return this._schema.validateMarking(e)}insertValue(e,n,r,i=!1){if(i){const o=JSON.parse(JSON.stringify(this.marking)),a=sC(e,o,r,n);return this._schema.validateMarking(a)}else return sC(e,this.marking,r,n),!0}removeValue(e,n=!1){if(n){const r=JSON.parse(JSON.stringify(this.marking)),i=aC(e,r);return this._schema.validateMarking(i)}else return aC(e,this.marking),!0}batchOperation(e,n=!1){if(n){const r=JSON.parse(JSON.stringify(this.marking));for(let i=0;i<e.length;i++){const o=e[i];o.type==="insert"?sC(o.pathExpression,r,o.key,o.fragment):o.type==="remove"&&aC(o.pathExpression,r)}return this._schema.validateMarking(r)}else for(let r=0;r<e.length;r++){const i=e[r];i.type==="insert"?sC(i.pathExpression,this.marking,i.key,i.fragment):i.type==="remove"&&aC(i.pathExpression,this.marking)}}};function l8e(t){if(!t)return[];if(!Array.isArray(t))return[];if(t.length==0)return[];for(let i=0;i<t.length;i++)if(!Array.isArray(t[i])||t[i].length==0)return[];const e=new Array(t.length);e.fill(0);const n=[];let r=ZU(e,t);for(n.push(r);u8e(e,t);)r=ZU(e,t),n.push(r);return n}function ZU(t,e){const n=[];for(let r=0;r<t.length;r++)n.push(e[r][t[r]]);return n}function u8e(t,e){for(let n=t.length-1;n>=0;n--){const r=e[n].length-1;if(t[n]+1<=r)return t[n]++,!0;if(n-1<0)return!1;t[n]=0}}function c8e(t){let e="";for(const[n,r]of Object.entries(t))e+=`local ${n} = ${Tie(JSON.stringify(r))}; 
`;return e}function Tie(t){let e=t;return e=e.replace(/\u00c4/g,"Ae"),e=e.replace(/\u00e4/g,"ae"),e=e.replace(/\u00dc/g,"Ue"),e=e.replace(/\u00fc/g,"ue"),e=e.replace(/\u00d6/g,"Oe"),e=e.replace(/\u00f6/g,"oe"),e=e.replace(/\u00df/g,"ss"),e}function Rv(t,e={},n=""){t=c8e(e)+Tie(t);try{const i=jsonnet.EvaluateSnippet(n,t);if(i[1].$val)throw new Error(i[1].s);return{evaluation:i[0],hasError:!1}}catch(i){return{evaluation:i,hasError:!0}}}let pC=class{constructor(e,n){Wn(this,"id");Wn(this,"name");Wn(this,"readonly");Wn(this,"preset");Wn(this,"postset");Wn(this,"guard");Wn(this,"preface");Wn(this,"customVariables");Wn(this,"valueVarSnippets");Wn(this,"keyVarSnippets");this.id=e,this.name=n,this.preset=[],this.postset=[],this.guard="true",this.preface="",this.valueVarSnippets={},this.keyVarSnippets={},this.readonly=!1,this.customVariables={}}updateAllSnippets(e,n){for(let r=0;r<this.postset.length;r++)this.keyVarSnippets[this.postset[r].keyVarName]="local "+this.postset[r].keyVarName+" = "+e,this.valueVarSnippets[this.postset[r].valueVarName]="local "+this.postset[r].valueVarName+" = "+n}connectArc(e){e.type==="preset"?this.preset.push(e):e.type==="postset"&&(this.valueVarSnippets[e.valueVarName]||(this.valueVarSnippets[e.valueVarName]="local "+e.valueVarName+" = {};"),this.keyVarSnippets[e.keyVarName]||(this.keyVarSnippets[e.keyVarName]="local "+e.keyVarName+" = '-';"),this.postset.push(e))}updateSnippets(e,n){let r=this.guard;r=r.replace(e.value,n.value),r=r.replace(e.key,n.key),r=r.replace(e.token,n.token),this.guard=r;let i=this.preface;if(i=i.replace(e.value,n.value),i=i.replace(e.key,n.key),i=i.replace(e.token,n.token),this.preface=i,this.valueVarSnippets[e.value]){let o=this.valueVarSnippets[e.value];o=o.replace(e.value,n.value),o=o.replace(e.key,n.key),o=o.replace(e.token,n.token),delete this.valueVarSnippets[e.value],this.valueVarSnippets[n.value]=o}if(this.keyVarSnippets[e.key]){let o=this.keyVarSnippets[e.key];o=o.replace(e.value,n.value),o=o.replace(e.key,n.key),o=o.replace(e.token,n.token),delete this.keyVarSnippets[e.key],this.keyVarSnippets[n.key]=o}}disconnectArc(e){e.type==="preset"?this.preset=this.preset.filter(n=>n.id!==e.id):e.type==="postset"&&(this.postset=this.postset.filter(n=>n.id!==e.id?(delete this.valueVarSnippets[e.valueVarName],delete this.keyVarSnippets[e.keyVarName],!0):!1))}resetAssignments(){for(let e=0;e<this.preset.length;e++)this.preset[e].resetAssignment();for(let e=0;e<this.postset.length;e++)this.postset[e].resetAssignment()}fire(){const e=[];for(let n=0;n<this.preset.length;n++){const r=this.preset[n];if(r.assignedPathExpression===null)return[];this.readonly||r.place.removeValue(r.assignedPathExpression,!1),e.push({arcID:r.id,placeID:r.place.id,num:r.place.marking.length})}for(let n=0;n<this.postset.length;n++){const r=this.postset[n];if(r.assignedPathExpression===null)return[];r.place.insertValue(r.assignedPathExpression,r.valueVarValue,r.keyVarValue,!1),e.push({arcID:r.id,placeID:r.place.id,num:r.place.marking.length})}return e}hasCompletePresetAssignment(){const e=this.preset;for(let n=0;n<e.length;n++)if(e[n].assignedPathExpression===null)return!1;return!0}hasCompletePostsetAssignment(){const e=this.postset;for(let n=0;n<e.length;n++)if(e[n].assignedPathExpression===null)return!1;return!0}hasCompleteAssignment(){const e=this.preset.concat(this.postset);for(let n=0;n<e.length;n++)if(e[n].assignedPathExpression===null)return!1;return!0}hasAnyCompleteAssignment(){const e=this.preset.concat(this.postset);for(let n=0;n<e.length;n++){const r=e[n];if(r.applyFilterExpression(r.filterExpression).length===0)return!1}return!0}assignOutputKeyValueVariables(e){for(let n=0;n<this.postset.length;n++){const r=this.postset[n];let i=this.assembleCustomVariables();i+=this.preface,i+=this.valueVarSnippets[r.valueVarName]+r.valueVarName;const o=Rv(i,e,this.name);if(o.hasError)return!1;const a=JSON.parse(o.evaluation);e[r.valueVarName]=a;let s=this.assembleCustomVariables();s+=this.preface,s+=this.keyVarSnippets[r.keyVarName]+r.keyVarName;const l=Rv(s,e,this.name);if(l.hasError)return!1;const u=String(JSON.parse(l.evaluation));e[r.keyVarName]=u,r.assignKeyAndValueVariables(u,a)}return e}assembleCustomVariables(){let e="";for(const[n,r]of Object.entries(this.customVariables))e+="local "+n+" = "+r+";";return e}evaluateGuard(e){let n=this.assembleCustomVariables();return n+=this.preface,n+=this.guard,console.log("inscription"),console.log(n),Rv(n,e,this.name)}checkResultingMarkings(){const e=[];for(let n=0;n<this.preset.length;n++){const r=this.preset[n];let i=!1,o=null;for(let a=0;a<this.postset.length;a++){const s=this.postset[a];s.place.id===r.place.id&&(e.push(s.id),i=!0,o=s)}if(i&&o){let a=[];if(r.assignedPathExpression===null||(a.push(r.assignedPathExpression),o.assignedPathExpression===null))return!1;a.push(o.assignedPathExpression),a=fNe(a,r.place.marking);const s={pathExpression:r.assignedPathExpression,type:"remove"},l={fragment:o.valueVarValue,key:o.keyVarValue,pathExpression:o.assignedPathExpression,type:"insert"},u=[];if(a[0]===r.assignedPathExpression?(u.push(l),u.push(s)):(u.push(s),u.push(l)),!r.place.batchOperation(u,!0))return!1}else if(r.assignedPathExpression===null||!r.place.removeValue(r.assignedPathExpression,!0))return!1}for(let n=0;n<this.postset.length;n++){const r=this.postset[n];if(e.includes(r.id))continue;if(r.assignedPathExpression===null||!r.place.insertValue(r.assignedPathExpression,r.valueVarValue,r.keyVarValue,!0))return!1}return!0}assembleVariablesFromPathAssignments(){const e=[],n=[],r=[],i={};for(let o=0;o<this.preset.length;o++){const a=this.preset[o];a.assignedPathExpression!==null&&(i[a.tokenVarName]=a.tokenVarValue,i[a.keyVarName]=a.keyVarValue,i[a.valueVarName]=a.valueVarValue,e.push(a.valueVarValue),n.push(a.place.name))}for(let o=0;o<this.postset.length;o++){const a=this.postset[o];a.assignedPathExpression!==null&&(i[a.tokenVarName]=a.tokenVarValue,r.push(a.place.name))}return i.transition_name=this.name,i.input_values=e,i.input_names=n,i.output_names=r,i}findAssignment(){this.resetAssignments();const e=[],n=this.preset.concat(this.postset);for(let i=0;i<n.length;i++){const o=[],a=n[i],s=a.applyFilterExpression(a.filterExpression);if(s.length===0)return!1;for(let l=0;l<s.length;l++)o.push({arc:a,assignmentIndex:l});e.push(o)}const r=l8e(e);for(let i=0;i<r.length;i++){const o=r[i],a={},s={},l={},u=[],c=[],f=[];let h=!1;for(let v=0;v<o.length;v++){const S=o[v],C=S.arc;if(C.type==="preset"){const k=C.assignVariablesByIndex(S.assignmentIndex);k||(h=!0),l[C.tokenVarName]=k.token,a[C.keyVarName]=k.key,s[C.valueVarName]=k.value,u.push(k.value),c.push(C.place.name)}else{const k=C.assignTokenVariableByIndex(S.assignmentIndex);k||(h=!0),l[C.tokenVarName]=k.token,f.push(C.place.name)}}if(h)continue;const d=this.assignOutputKeyValueVariables({transition_name:this.name,input_values:u,input_names:c,output_names:f,...a,...s,...l});if(!d)continue;const g=this.evaluateGuard(d);if(g.hasError||JSON.parse(g.evaluation)!==!0)continue;if(this.checkResultingMarkings())return!0}return!1}},gC;const f8e=new Uint8Array(16);function h8e(){if(!gC&&(gC=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!gC))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return gC(f8e)}const go=[];for(let t=0;t<256;++t)go.push((t+256).toString(16).slice(1));function d8e(t,e=0){return(go[t[e+0]]+go[t[e+1]]+go[t[e+2]]+go[t[e+3]]+"-"+go[t[e+4]]+go[t[e+5]]+"-"+go[t[e+6]]+go[t[e+7]]+"-"+go[t[e+8]]+go[t[e+9]]+"-"+go[t[e+10]]+go[t[e+11]]+go[t[e+12]]+go[t[e+13]]+go[t[e+14]]+go[t[e+15]]).toLowerCase()}const p8e=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),QU={randomUUID:p8e};function pI(t,e,n){if(QU.randomUUID&&!e&&!t)return QU.randomUUID();t=t||{};const r=t.random||(t.rng||h8e)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let i=0;i<16;++i)e[n+i]=r[i];return e}return d8e(r)}let gI=null;function Vt(){return gI===null&&(gI=new g8e),gI}class g8e{constructor(){Wn(this,"_transitions");Wn(this,"_places");Wn(this,"_arcs");this._transitions=[],this._places=[],this._arcs=[]}findPlace(e){return this._places.find(n=>n.id===e)}removePlace(e){const n=[];return this._places=this._places.filter(i=>i.id!==e),n.push(e),this._arcs.filter(i=>i.place.id===e).forEach(i=>{this.disconnect(i.id),n.push(i.id)}),n}updatePlace(e,n,r,i){const o=this.findPlace(e);if(!o)return!1;if(n!==o.name){o.name=n;const a=this._arcs.filter(s=>s.place.id===e);for(let s=0;s<a.length;s++)a[s].updateVarNames(n)}return r&&(o.schema=r),i&&(o.marking=i),{id:o.id,name:o.name,marking:o.marking,schema:o.schema,hasError:!1,errorType:"none",errorMessage:""}}updatePlaceMarking(e,n){const r=this.findPlace(e);if(!r)return!1;r.marking=n;const i=r.validateMarking(n);return{id:r.id,name:r.name,marking:r.marking,schema:r.schema,hasError:!i.isValid,errorType:"data",errorMessage:i.error}}setDefaultMarking(e){const n=this.findPlace(e);if(!n)return!1;n.defaultMarking=JSON.parse(JSON.stringify(n.marking))}getDefaultMarking(e){const n=this.findPlace(e);return n?JSON.parse(JSON.stringify(n.defaultMarking)):!1}allPlaces(){return JSON.parse(JSON.stringify(this._places))}updatePlaceSchema(e,n){const r=this.findPlace(e);if(!r)return!1;const i=r.validateSchema(n);return i.schemaValid&&(r.schema=n),{id:r.id,name:r.name,marking:r.marking,schema:r.schema,hasError:!i.schemaValid,errorType:"schema",errorMessage:i.error}}validatePlaceName(e,n){return!(this._places.filter(i=>i.name===e&&i.id!==n).length>0)}addTransition(e=pI()){const n=new pC(e,"transition");return this._transitions.push(n),{id:n.id,name:n.name,preface:n.preface,guard:n.guard,readonly:n.readonly,customVariables:n.customVariables}}addPlace(e=pI()){const r="place"+e.substring(0,4),i=new dC(e,r);return i.schema=JSON.parse(JSON.stringify({type:"array",items:{type:"object"}})),i.marking=JSON.parse(JSON.stringify([])),i.defaultMarking=JSON.parse(JSON.stringify([])),this._places.push(i),{id:i.id,name:i.name,marking:i.marking,schema:i.schema,hasError:!1,errorType:"none",errorMessage:""}}updateTransition(e,n,r,i,o,a,s){const l=this.findTransition(e);return l?(l.name=n,i!==void 0&&(l.guard=i),r!==void 0&&(l.preface=r),a!==void 0&&(l.keyVarSnippets=a),o!==void 0&&(l.valueVarSnippets=o),s!==void 0&&(l.customVariables=s),{id:l.id,name:l.name,preface:l.preface,guard:l.guard,readonly:l.readonly,customVariables:l.customVariables}):!1}updateTransitionMode(e,n){const r=this.findTransition(e);return r?(r.readonly=n,{id:r.id,name:r.name,preface:r.preface,guard:r.guard,readonly:r.readonly,customVariables:r.customVariables}):!1}updateTransitionVariable(e,n,r){const i=this.findTransition(e);return i?(i.customVariables[n]=r,{id:i.id,name:i.name,preface:i.preface,guard:i.guard,readonly:i.readonly,customVariables:i.customVariables}):!1}removeTransitionVariable(e,n){const r=this.findTransition(e);return r?(delete r.customVariables[n],{id:r.id,name:r.name,preface:r.preface,guard:r.guard,readonly:r.readonly,customVariables:r.customVariables}):!1}updateTransitionSnippets(e,n,r,i){const o=this.findTransition(e),a=this.findArc(n);!o||!a||(o.keyVarSnippets[a.keyVarName]=r,o.valueVarSnippets[a.valueVarName]=i)}findTransition(e){return this._transitions.find(n=>n.id===e)}assignFilterByPath(e,n){const r=this.findArc(e);if(!r)return!1;r.type==="preset"?r.assignVariablesByPathExpression(n):r.type==="postset"&&r.assignTokenVariableByPathExpression(n);const i=r.transition.hasCompleteAssignment(),o=r.transition.hasCompletePresetAssignment(),a=r.transition.hasCompletePostsetAssignment();return{complete:i,presetComplete:o,postsetComplete:a}}removeTransition(e){const n=[];let r=this.findTransition(e);const i=this._transitions.filter(o=>o.id===e?(r=o,!1):!0);return r?(n.push(r.id),r.preset.forEach(o=>{this.disconnect(o.id),n.push(o.id)}),r.postset.forEach(o=>{this.disconnect(o.id),n.push(o.id)}),this._transitions=i,n):[]}connect(e,n,r=pI()){const i=[...this._places,...this._transitions],o=i.find(l=>l.id===e),a=i.find(l=>l.id===n);let s;return o instanceof dC?a instanceof dC||a instanceof pC&&(s=new IU(o,a,"preset",r),this._arcs.push(s),a.connectArc(s)):o instanceof pC&&(a instanceof pC||a instanceof dC&&(s=new IU(a,o,"postset",r),this._arcs.push(s),o.connectArc(s))),s&&o&&a?{id:s.id,type:s.type,from:o.id,to:a.id}:!1}updateAllTransitionSnippets(e,n,r){const i=this._transitions.find(o=>o.id===e);i&&i.updateAllSnippets(n,r)}disconnect(e){const n=this.findArc(e);n&&(n.transition.disconnectArc(n),this._arcs=this._arcs.filter(r=>r.id!==e))}findArc(e){return this._arcs.find(n=>n.id===e)}updateArc(e,n){const r=this._arcs.find(a=>a.id===e);if(!r)return!1;r.filterExpression=n;let i,o="";return r.type==="preset"?(i=r.place.id,o=r.transition.id):(i=r.transition.id,o=r.place.id),{from:i,to:o,id:r.id,type:r.type}}fireUnderCurrentAssignment(e){const n=this.findTransition(e);return n?n.fire():[]}fireUnderAnyAssignment(e){const n=this.findTransition(e);return n?n.findAssignment()?n.fire():[]:[]}fireAny(){for(let e=0;e<this._transitions.length;e++){let n=this._transitions[e];if(n.findAssignment())return n.fire()}return[]}export(){const e=[],n=[],r=[];for(let o=0;o<this._places.length;o++){let a=this._places[o];e.push({id:a.id,name:a.name,marking:a.marking,schema:a.schema})}for(let o=0;o<this._transitions.length;o++){let a=this._transitions[o];n.push({id:a.id,name:a.name,preface:a.preface,guard:a.guard,customVariables:a.customVariables,keyVarSnippets:a.keyVarSnippets,fragmentVarSnippets:a.valueVarSnippets})}for(let o=0;o<this._arcs.length;o++){let a=this._arcs[o],s,l;a.type==="preset"?(s=a.place.id,l=a.transition.id):a.type==="postset"&&(s=a.transition.id,l=a.place.id),r.push({id:a.id,filter:a.filterExpression,fromId:s,toId:l})}return{places:e,transitions:n,arcs:r}}assignOutputVariables(e){const n=this.findTransition(e);if(n)for(let r=0;r<n.postset.length;r++){const i=n.postset[r],o=n.assembleVariablesFromPathAssignments(),a=n.assignOutputKeyValueVariables(o);a&&i.assignKeyAndValueVariables(String(a[i.keyVarName]),a[i.valueVarName])}}clear(){for(;this._transitions.length>0;)this.removeTransition(this._transitions[0].id);for(;this._places.length>0;)kie(this._places[0].id),this.removePlace(this._places[0].id)}import(e){this.clear();const n={places:[],transitions:[],arcs:[]};for(let r=0;r<e.places.length;r++){let i=e.places[r];this.addPlace(i.id);const o=this.updatePlace(i.id,i.name,i.schema,i.marking);this.setDefaultMarking(i.id),o&&n.places.push(o)}for(let r=0;r<e.transitions.length;r++){let i=e.transitions[r];this.addTransition(i.id);const o=this.updateTransition(i.id,i.name,i.preface,i.guard,i.fragmentVarSnippets,i.keyVarSnippets,i.customVariables);o&&n.transitions.push(o)}for(let r=0;r<e.arcs.length;r++){let i=e.arcs[r];this.connect(i.fromId,i.toId,i.id);const o=this.updateArc(i.id,i.filter);o&&n.arcs.push(o)}return n}getEvaluations(e){const n=this.findTransition(e);if(!n)return!1;const r=n.assembleVariablesFromPathAssignments();let i=!1,o=!1;const a=Rv(n.preface+" true",r);if(a.hasError)return i=!0,{hasAnyError:i,preface:a,variables:r};const s=Object.keys(n.valueVarSnippets),l={};for(let d=0;d<s.length;d++){const g=s[d];let y=n.preface;y+=n.valueVarSnippets[g]+g;const _=Rv(y,r);l[g]=_,_.hasError&&(i=!0,o=!0)}const u=Object.keys(n.keyVarSnippets),c={};for(let d=0;d<u.length;d++){const g=u[d];let y=n.preface;y+=n.keyVarSnippets[g]+g;const _=Rv(y,r);c[g]=_,_.hasError&&(i=!0,o=!0)}if(o)return{hasAnyError:i,variables:r,hasAnyOutputError:o,preface:a,outputKeyVariables:c,outputValueVariables:l};const f=n.assignOutputKeyValueVariables(r);if(!f)return{hasAnyOutputError:o,hasAnyError:i,variables:r,preface:a,outputValueVariables:l,outputKeyVariables:c,guard:{evaluation:"Output expressions have errors.",hasError:!0}};const h=n.evaluateGuard(f);return h.hasError&&(i=!0),{hasAnyOutputError:o,hasAnyError:i,preface:a,variables:f,outputValueVariables:l,outputKeyVariables:c,guard:h}}}const zs=L0("config",{state:()=>({name:"default",defaultUIAssistMode:"expert",defaultTransitionType:"custom",defaultPlaceType:"custom",placeTypes:[],transitionTypes:[],examples:[],allowAutoLayout:!0,visualisationConfig:!1}),getters:{getPlaceTypeById:t=>e=>t.placeTypes.find(n=>n.id===e),getTransitionTypeById:t=>e=>t.transitionTypes.find(n=>n.id===e)},actions:{loadConfig(t,e=!1){e||(this.name=t.name),this.placeTypes=t.placeTypes,this.transitionTypes=t.transitionTypes,this.defaultPlaceType=t.defaultPlaceType,this.defaultTransitionType=t.defaultTransitionType,this.examples=t.examples,this.allowAutoLayout=t.allowAutoLayout,this.visualisationConfig=t.visualisationConfig,Aa().uiAssistMode=t.defaultUIAssistMode},resetConfig(){this.$reset(),Aa().uiAssistMode=this.defaultUIAssistMode}}}),Zn=L0("net",{state:()=>({places:[],transitions:[],transitionTypes:{},placeTypes:{},lastRemovedCells:[],lastCreatedPlaces:[],lastCreatedTransitions:[],lastCreatedArcs:[],lastUpdatedPlace:{},lastUpdatedPlaces:[],lastUpdatedTransition:{},lastFiredArcs:[],layout:{},importedData:{}}),actions:{setLayout(t){this.layout=t},export(){const t=Vt().export(),e=this.layout.toJSON(),n={placeTypes:this.placeTypes,transitionTypes:this.transitionTypes};return JSON.stringify({typeData:n,netData:t,layoutData:e},null,2)},import(t){t.typeData&&(this.placeTypes=t.typeData.placeTypes,this.transitionTypes=t.typeData.transitionTypes);const e=t.layoutData,n=Vt().import(t.netData);this.transitions=n.transitions,this.places=n.places,this.importedData={layoutData:e,netData:n}},connect(t,e){const n=Vt().connect(t,e);if(n){this.lastCreatedArcs=[n];let r="";n.type=="preset"?r=n.to:r=n.from;const i=this.transitionTypes[r];if(i!=="custom"){const o=zs().getTransitionTypeById(i);if(!o)return;n.type=="preset"?Vt().updateArc(n.id,o.presetFilter):(Vt().updateAllTransitionSnippets(r,o.keySnippet,o.valueSnippet),Vt().updateArc(n.id,o.postsetFilter))}}},resetModel(){const t=Vt().allPlaces(),e=[];for(let n=0;n<t.length;n++){const r=t[n];console.log("resetting place"+r.id);const i=Vt().getDefaultMarking(r.id);if(console.log(i),i){const o=Vt().updatePlaceMarking(r.id,i);o&&e.push(o)}}this.lastUpdatedPlaces=e},addPlace(){let t=Vt().addPlace();this.places.push(t),this.lastCreatedPlaces=[t];const e=zs();if(this.placeTypes[t.id]=e.defaultPlaceType,e.defaultPlaceType!=="custom"){const n=e.getPlaceTypeById(e.defaultPlaceType);if(!n)return;Vt().updatePlace(t.id,t.name,n.schema,n.marking)}},deletePlace(t){this.lastRemovedCells=Vt().removePlace(t)},addTransition(){let t=Vt().addTransition();this.transitions.push(t);const e=zs();if(this.transitionTypes[t.id]=e.defaultTransitionType,e.defaultTransitionType!=="custom"){const n=e.getTransitionTypeById(e.defaultTransitionType);if(!n)return;let r=Vt().updateTransition(t.id,t.name,n.preface,n.guard);r&&(t=r);const i=Object.keys(n.customVariables);for(let o=0;o<i.length;o++){let a=Vt().updateTransitionVariable(t.id,i[o],n.customVariables[i[o]]);a&&(t=a)}}this.lastCreatedTransitions=[t]},deleteTransition(t){this.lastRemovedCells=Vt().removeTransition(t)},disconnect(t){Vt().disconnect(t),this.lastRemovedCells=[t]},fireUnderAnyAssignment(t){this.lastFiredArcs=Vt().fireUnderAnyAssignment(t)},fireAny(){this.lastFiredArcs=Vt().fireAny()}}});function Aie(t,e){const n=t.target;if(!n)return;const r=new FileReader;r.onload=function(){const i=r.result;e(i)},r.readAsText(n.files[0])}function m8e(t,e,n){const r=document.createElement("a"),i=new Blob([t],{type:n});r.href=URL.createObjectURL(i),r.download=e,r.click()}const qg=L0("transitions",{state:()=>({transition:{},outputArcs:[],inputArcs:[],selectedOutputSnippetIndex:-1,variables:{},assignmentComplete:!1,presetAssignmentComplete:!1,postsetAssignmentComplete:!1,prefaceHasError:!1,guardHasError:!1,guardEvaluation:"",keyEvaluationResults:{},valueEvaluationResults:{},hasAnyError:!1,hasAnyOutputError:!1,isEnabled:!1,selectedInputPlaceIndex:0,selectedInputValueJsonPath:"none",selectedOutputPlaceIndex:0,selectedOutputValueJsonPath:"none",inputDataKey:0,outputDataKey:0}),actions:{saveName(){const t=Vt().updateTransition(this.transition.id,this.transition.name);t&&(this.transition.name=t.name,Zn().lastUpdatedTransition=t)},switchMode(){this.transition.readonly=!this.transition.readonly;const t=Vt().updateTransitionMode(this.transition.id,this.transition.readonly);t&&(this.transition.readonly=t.readonly,Zn().lastUpdatedTransition=t)},updateVariable(t,e){const n=Vt().updateTransitionVariable(this.transition.id,t,e);n&&(this.transition=n,Zn().lastUpdatedTransition=n)},removeVariable(t){const e=Vt().removeTransitionVariable(this.transition.id,t);e&&(this.transition=e,Zn().lastUpdatedTransition=e)},saveInputFilter(){const t=this.inputArcs[this.selectedInputPlaceIndex];Vt().updateArc(t.id,t.filter)},saveOutputFilter(){const t=this.outputArcs[this.selectedOutputPlaceIndex];Vt().updateArc(t.id,t.filter)},saveBasicInscription(){Vt().updateTransition(this.transition.id,this.transition.name,this.transition.preface,this.transition.guard)},saveOutputSnippets(){const t=this.outputArcs[this.selectedOutputSnippetIndex];t&&Vt().updateTransitionSnippets(this.transition.id,t.id,t.keySnippet,t.valueSnippet)},unsetAssignments(){const t=Vt().findTransition(this.transition.id);t&&(t.resetAssignments(),this.selectedInputValueJsonPath="none",this.selectedOutputValueJsonPath="none",this.assignmentComplete=!1)},saveSelectedAssignment(t,e){let n;e==="input"?(this.selectedInputValueJsonPath=t,n=this.inputArcs[this.selectedInputPlaceIndex].id):(this.selectedOutputValueJsonPath=t,n=this.outputArcs[this.selectedOutputPlaceIndex].id);const r=Vt().assignFilterByPath(n,t);r&&(this.assignmentComplete=r.complete,this.presetAssignmentComplete=r.presetComplete,this.postsetAssignmentComplete=r.postsetComplete,this.loadEvaluations(),this.hasAnyError||Vt().assignOutputVariables(n))},loadCurrentInputAssignment(){const t=this.inputArcs[this.selectedInputPlaceIndex].id,e=Vt().findArc(t);e&&(e.assignedPathExpression!==null?this.selectedInputValueJsonPath=e.assignedPathExpression:this.selectedInputValueJsonPath="none")},loadCurrentOutputAssignment(){const t=this.outputArcs[this.selectedOutputPlaceIndex].id,e=Vt().findArc(t);e&&(e.assignedPathExpression!==null?this.selectedOutputValueJsonPath=e.assignedPathExpression:this.selectedOutputValueJsonPath="none")},loadAvailableInputAssignments(){const t=this.inputArcs[this.selectedInputPlaceIndex];if(!t)return;const e=Vt().findArc(t.id);if(!e)return;const n=[],r=e.applyFilterExpression(t.filter);for(let i=0;i<r.length;i++)n.push(r[i]);t.filtered=n},loadAvailableOutputAssignments(){const t=this.outputArcs[this.selectedOutputPlaceIndex];if(!t)return;const e=Vt().findArc(t.id);if(!e)return;const n=[],r=e.applyFilterExpression(t.filter);for(let i=0;i<r.length;i++)n.push(r[i]);t.filtered=n},unsetCurrentInputAssignment(){const t=this.inputArcs[this.selectedInputPlaceIndex];if(!t)return;const e=Vt().findArc(t.id);e&&(e.resetAssignment(),this.selectedInputValueJsonPath="none")},unsetCurrentOutputAssignment(){const t=this.outputArcs[this.selectedOutputPlaceIndex];if(!t)return;const e=Vt().findArc(t.id);e&&(e.resetAssignment(),this.selectedOutputValueJsonPath="none")},resetName(){const t=Vt().findTransition(this.transition.id);t&&(this.transition.name=t.name,Zn().lastUpdatedTransition=t)},resetInputFilter(){const t=this.inputArcs[this.selectedInputPlaceIndex],e=Vt().findArc(t.id);e&&(t.filter=e.filterExpression,this.loadAvailableInputAssignments())},resetOutputFilter(){const t=this.outputArcs[this.selectedOutputPlaceIndex],e=Vt().findArc(t.id);e&&(t.filter=e.filterExpression,this.loadAvailableOutputAssignments())},loadEvaluations(){const t=Vt().getEvaluations(this.transition.id);if(t){if(this.variables=t.variables,!this.assignmentComplete||(this.hasAnyError=t.hasAnyError,this.hasAnyError&&(this.isEnabled=!1),this.prefaceHasError=t.preface.hasError,this.prefaceHasError)||(t.hasAnyOutputError!==void 0&&t.outputKeyVariables&&t.outputValueVariables&&(this.hasAnyOutputError=t.hasAnyOutputError,this.keyEvaluationResults=t.outputKeyVariables,this.valueEvaluationResults=t.outputValueVariables),this.hasAnyOutputError))return;t.guard&&(this.guardHasError=t.guard.hasError,this.guardHasError?this.guardEvaluation=t.guard.evaluation:(this.guardEvaluation=t.guard.evaluation,this.isEnabled=JSON.parse(this.guardEvaluation)))}},initSettings(){this.selectedOutputSnippetIndex=-1,this.selectedInputPlaceIndex=0,this.selectedOutputPlaceIndex=0,this.assignmentComplete=!1},loadTransition(t){let e=Zn().transitions.find(n=>n.id===t);if(e){const n=Vt().findTransition(t);if(!n)return e;e=n,this.transition=n;const r=[];for(let o=0;o<n.postset.length;o++){const a=n.postset[o],s=[],l=a.applyFilterExpression(a.filterExpression);for(let c=0;c<l.length;c++)s.push(l[c]);const u={id:a.id,name:a.place.name,marking:a.place.marking,tokenVar:a.tokenVarName,valueVar:a.valueVarName,keyVar:a.keyVarName,valueSnippet:n.valueVarSnippets[a.valueVarName],keySnippet:n.keyVarSnippets[a.keyVarName],filter:a.filterExpression,filtered:s};r.push(u)}this.outputArcs=r;const i=[];for(let o=0;o<n.preset.length;o++){const a=n.preset[o],s=[],l=a.applyFilterExpression(a.filterExpression);for(let c=0;c<l.length;c++)s.push(l[c]);const u={id:a.id,name:a.place.name,marking:a.place.marking,filter:a.filterExpression,tokenVar:a.tokenVarName,valueVar:a.valueVarName,keyVar:a.keyVarName,filtered:s};i.push(u)}this.inputArcs=i}},forceRender(){this.inputDataKey+=1,this.outputDataKey+=1},fireCurrentTransition(){Vt().assignOutputVariables(this.transition.id);const t=Vt().fireUnderCurrentAssignment(this.transition.id);Zn().lastFiredArcs=t,this.loadTransition(this.transition.id),this.unsetAssignments(),this.loadAvailableInputAssignments(),this.loadAvailableOutputAssignments(),this.loadEvaluations(),this.assignmentComplete=!1,this.presetAssignmentComplete=!1,this.postsetAssignmentComplete=!1,this.forceRender()}}});var Eie={},d_={},fT={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */fT.exports;(function(t,e){(function(){var n,r="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",s="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",u=500,c="__lodash_placeholder__",f=1,h=2,d=4,g=1,y=2,_=1,v=2,S=4,C=8,k=16,x=32,m=64,T=128,P=256,I=512,M=30,L="...",R=800,V=16,z=1,ie=2,oe=3,Se=1/0,Ae=9007199254740991,Ee=17976931348623157e292,_e=0/0,se=4294967295,ne=se-1,J=se>>>1,B=[["ary",T],["bind",_],["bindKey",v],["curry",C],["curryRight",k],["flip",I],["partial",x],["partialRight",m],["rearg",P]],H="[object Arguments]",ae="[object Array]",te="[object AsyncFunction]",ce="[object Boolean]",ue="[object Date]",fe="[object DOMException]",ye="[object Error]",j="[object Function]",Y="[object GeneratorFunction]",O="[object Map]",F="[object Number]",U="[object Null]",Q="[object Object]",ve="[object Promise]",ge="[object Proxy]",Me="[object RegExp]",De="[object Set]",tt="[object String]",Xe="[object Symbol]",et="[object Undefined]",Qe="[object WeakMap]",pt="[object WeakSet]",Ft="[object ArrayBuffer]",Kt="[object DataView]",wt="[object Float32Array]",sn="[object Float64Array]",gr="[object Int8Array]",gi="[object Int16Array]",Dr="[object Int32Array]",fo="[object Uint8Array]",Tr="[object Uint8ClampedArray]",Bn="[object Uint16Array]",zn="[object Uint32Array]",Oa=/\b__p \+= '';/g,Mf=/\b(__p \+=) '' \+/g,Ac=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Tu=/&(?:amp|lt|gt|quot|#39);/g,bs=/[&<>"']/g,Wi=RegExp(Tu.source),Au=RegExp(bs.source),ty=/<%-([\s\S]+?)%>/g,Nf=/<%([\s\S]+?)%>/g,Ec=/<%=([\s\S]+?)%>/g,Td=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,im=/^\w*$/,ny=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Pc=/[\\^$.*+?()[\]{}|]/g,ry=RegExp(Pc.source),Ff=/^\s+/,xe=/\s/,le=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ce=/\{\n\/\* \[wrapped with (.+)\] \*/,Re=/,? & /,Fe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,xt=/[()=,{}\[\]\/\s]/,kt=/\\(\\)?/g,wn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,sr=/\w*$/,Mr=/^[-+]0x[0-9a-f]+$/i,vn=/^0b[01]+$/i,qn=/^\[object .+?Constructor\]$/,Nr=/^0o[0-7]+$/i,Xt=/^(?:0|[1-9]\d*)$/,hr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,mr=/($^)/,vr=/['\n\r\u2028\u2029\\]/g,ho="\\ud800-\\udfff",Ia="\\u0300-\\u036f",$a="\\ufe20-\\ufe2f",zl="\\u20d0-\\u20ff",_s=Ia+$a+zl,Hi="\\u2700-\\u27bf",Oo="a-z\\xdf-\\xf6\\xf8-\\xff",Qr="\\xac\\xb1\\xd7\\xf7",ro="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ys="\\u2000-\\u206f",om=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ad="A-Z\\xc0-\\xd6\\xd8-\\xde",jl="\\ufe0e\\ufe0f",Eu=Qr+ro+Ys+om,Ss="['’]",Ed="["+ho+"]",Pd="["+Eu+"]",Ks="["+_s+"]",La="\\d+",YS="["+Hi+"]",Rf="["+Oo+"]",KS="[^"+ho+Eu+La+Hi+Oo+Ad+"]",iy="\\ud83c[\\udffb-\\udfff]",Oc="(?:"+Ks+"|"+iy+")",Pu="[^"+ho+"]",Od="(?:\\ud83c[\\udde6-\\uddff]){2}",oy="[\\ud800-\\udbff][\\udc00-\\udfff]",Ic="["+Ad+"]",ay="\\u200d",Vf="(?:"+Rf+"|"+KS+")",XS="(?:"+Ic+"|"+KS+")",am="(?:"+Ss+"(?:d|ll|m|re|s|t|ve))?",JS="(?:"+Ss+"(?:D|LL|M|RE|S|T|VE))?",sy=Oc+"?",ZS="["+jl+"]?",aP="(?:"+ay+"(?:"+[Pu,Od,oy].join("|")+")"+ZS+sy+")*",ly="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",sP="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",QS=ZS+sy+aP,lP="(?:"+[YS,Od,oy].join("|")+")"+QS,uP="(?:"+[Pu+Ks+"?",Ks,Od,oy,Ed].join("|")+")",cP=RegExp(Ss,"g"),fP=RegExp(Ks,"g"),uy=RegExp(iy+"(?="+iy+")|"+uP+QS,"g"),ew=RegExp([Ic+"?"+Rf+"+"+am+"(?="+[Pd,Ic,"$"].join("|")+")",XS+"+"+JS+"(?="+[Pd,Ic+Vf,"$"].join("|")+")",Ic+"?"+Vf+"+"+am,Ic+"+"+JS,sP,ly,La,lP].join("|"),"g"),cy=RegExp("["+ay+ho+_s+jl+"]"),tw=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,fy=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],nw=-1,yr={};yr[wt]=yr[sn]=yr[gr]=yr[gi]=yr[Dr]=yr[fo]=yr[Tr]=yr[Bn]=yr[zn]=!0,yr[H]=yr[ae]=yr[Ft]=yr[ce]=yr[Kt]=yr[ue]=yr[ye]=yr[j]=yr[O]=yr[F]=yr[Q]=yr[Me]=yr[De]=yr[tt]=yr[Qe]=!1;var lr={};lr[H]=lr[ae]=lr[Ft]=lr[Kt]=lr[ce]=lr[ue]=lr[wt]=lr[sn]=lr[gr]=lr[gi]=lr[Dr]=lr[O]=lr[F]=lr[Q]=lr[Me]=lr[De]=lr[tt]=lr[Xe]=lr[fo]=lr[Tr]=lr[Bn]=lr[zn]=!0,lr[ye]=lr[j]=lr[Qe]=!1;var hP={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},dP={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},pP={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Id={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},rw=parseFloat,hy=parseInt,iw=typeof ui=="object"&&ui&&ui.Object===Object&&ui,gP=typeof self=="object"&&self&&self.Object===Object&&self,Gi=iw||gP||Function("return this")(),w=e&&!e.nodeType&&e,E=w&&!0&&t&&!t.nodeType&&t,$=E&&E.exports===w,D=$&&iw.process,W=function(){try{var Pe=E&&E.require&&E.require("util").types;return Pe||D&&D.binding&&D.binding("util")}catch{}}(),G=W&&W.isArrayBuffer,K=W&&W.isDate,me=W&&W.isMap,he=W&&W.isRegExp,Le=W&&W.isSet,ze=W&&W.isTypedArray;function Ye(Pe,He,Be){switch(Be.length){case 0:return Pe.call(He);case 1:return Pe.call(He,Be[0]);case 2:return Pe.call(He,Be[0],Be[1]);case 3:return Pe.call(He,Be[0],Be[1],Be[2])}return Pe.apply(He,Be)}function Ne(Pe,He,Be,dt){for(var Zt=-1,jn=Pe==null?0:Pe.length;++Zt<jn;){var Ti=Pe[Zt];He(dt,Ti,Be(Ti),Pe)}return dt}function je(Pe,He){for(var Be=-1,dt=Pe==null?0:Pe.length;++Be<dt&&He(Pe[Be],Be,Pe)!==!1;);return Pe}function Ot(Pe,He){for(var Be=Pe==null?0:Pe.length;Be--&&He(Pe[Be],Be,Pe)!==!1;);return Pe}function nn(Pe,He){for(var Be=-1,dt=Pe==null?0:Pe.length;++Be<dt;)if(!He(Pe[Be],Be,Pe))return!1;return!0}function vt(Pe,He){for(var Be=-1,dt=Pe==null?0:Pe.length,Zt=0,jn=[];++Be<dt;){var Ti=Pe[Be];He(Ti,Be,Pe)&&(jn[Zt++]=Ti)}return jn}function ei(Pe,He){var Be=Pe==null?0:Pe.length;return!!Be&&Da(Pe,He,0)>-1}function ti(Pe,He,Be){for(var dt=-1,Zt=Pe==null?0:Pe.length;++dt<Zt;)if(Be(He,Pe[dt]))return!0;return!1}function kn(Pe,He){for(var Be=-1,dt=Pe==null?0:Pe.length,Zt=Array(dt);++Be<dt;)Zt[Be]=He(Pe[Be],Be,Pe);return Zt}function On(Pe,He){for(var Be=-1,dt=He.length,Zt=Pe.length;++Be<dt;)Pe[Zt+Be]=He[Be];return Pe}function Jt(Pe,He,Be,dt){var Zt=-1,jn=Pe==null?0:Pe.length;for(dt&&jn&&(Be=Pe[++Zt]);++Zt<jn;)Be=He(Be,Pe[Zt],Zt,Pe);return Be}function Io(Pe,He,Be,dt){var Zt=Pe==null?0:Pe.length;for(dt&&Zt&&(Be=Pe[--Zt]);Zt--;)Be=He(Be,Pe[Zt],Zt,Pe);return Be}function In(Pe,He){for(var Be=-1,dt=Pe==null?0:Pe.length;++Be<dt;)if(He(Pe[Be],Be,Pe))return!0;return!1}var Ur=Js("length");function $d(Pe){return Pe.split("")}function sm(Pe){return Pe.match(Fe)||[]}function $o(Pe,He,Be){var dt;return Be(Pe,function(Zt,jn,Ti){if(He(Zt,jn,Ti))return dt=jn,!1}),dt}function Xs(Pe,He,Be,dt){for(var Zt=Pe.length,jn=Be+(dt?1:-1);dt?jn--:++jn<Zt;)if(He(Pe[jn],jn,Pe))return jn;return-1}function Da(Pe,He,Be){return He===He?lw(Pe,He,Be):Xs(Pe,Ul,Be)}function Lo(Pe,He,Be,dt){for(var Zt=Be-1,jn=Pe.length;++Zt<jn;)if(dt(Pe[Zt],He))return Zt;return-1}function Ul(Pe){return Pe!==Pe}function sa(Pe,He){var Be=Pe==null?0:Pe.length;return Be?Yn(Pe,He)/Be:_e}function Js(Pe){return function(He){return He==null?n:He[Pe]}}function lm(Pe){return function(He){return Pe==null?n:Pe[He]}}function Ou(Pe,He,Be,dt,Zt){return Zt(Pe,function(jn,Ti,tr){Be=dt?(dt=!1,jn):He(Be,jn,Ti,tr)}),Be}function dy(Pe,He){var Be=Pe.length;for(Pe.sort(He);Be--;)Pe[Be]=Pe[Be].value;return Pe}function Yn(Pe,He){for(var Be,dt=-1,Zt=Pe.length;++dt<Zt;){var jn=He(Pe[dt]);jn!==n&&(Be=Be===n?jn:Be+jn)}return Be}function Wl(Pe,He){for(var Be=-1,dt=Array(Pe);++Be<Pe;)dt[Be]=He(Be);return dt}function ow(Pe,He){return kn(He,function(Be){return[Be,Pe[Be]]})}function um(Pe){return Pe&&Pe.slice(0,Ma(Pe)+1).replace(Ff,"")}function la(Pe){return function(He){return Pe(He)}}function Bf(Pe,He){return kn(He,function(Be){return Pe[Be]})}function Ld(Pe,He){return Pe.has(He)}function py(Pe,He){for(var Be=-1,dt=Pe.length;++Be<dt&&Da(He,Pe[Be],0)>-1;);return Be}function aw(Pe,He){for(var Be=Pe.length;Be--&&Da(He,Pe[Be],0)>-1;);return Be}function mP(Pe,He){for(var Be=Pe.length,dt=0;Be--;)Pe[Be]===He&&++dt;return dt}var vP=lm(hP),cm=lm(dP);function yP(Pe){return"\\"+Id[Pe]}function bP(Pe,He){return Pe==null?n:Pe[He]}function zf(Pe){return cy.test(Pe)}function Dd(Pe){return tw.test(Pe)}function _P(Pe){for(var He,Be=[];!(He=Pe.next()).done;)Be.push(He.value);return Be}function Md(Pe){var He=-1,Be=Array(Pe.size);return Pe.forEach(function(dt,Zt){Be[++He]=[Zt,dt]}),Be}function Zs(Pe,He){return function(Be){return Pe(He(Be))}}function io(Pe,He){for(var Be=-1,dt=Pe.length,Zt=0,jn=[];++Be<dt;){var Ti=Pe[Be];(Ti===He||Ti===c)&&(Pe[Be]=c,jn[Zt++]=Be)}return jn}function Nd(Pe){var He=-1,Be=Array(Pe.size);return Pe.forEach(function(dt){Be[++He]=dt}),Be}function sw(Pe){var He=-1,Be=Array(Pe.size);return Pe.forEach(function(dt){Be[++He]=[dt,dt]}),Be}function lw(Pe,He,Be){for(var dt=Be-1,Zt=Pe.length;++dt<Zt;)if(Pe[dt]===He)return dt;return-1}function SP(Pe,He,Be){for(var dt=Be+1;dt--;)if(Pe[dt]===He)return dt;return dt}function Kn(Pe){return zf(Pe)?gy(Pe):Ur(Pe)}function Do(Pe){return zf(Pe)?uw(Pe):$d(Pe)}function Ma(Pe){for(var He=Pe.length;He--&&xe.test(Pe.charAt(He)););return He}var Na=lm(pP);function gy(Pe){for(var He=uy.lastIndex=0;uy.test(Pe);)++He;return He}function uw(Pe){return Pe.match(uy)||[]}function wP(Pe){return Pe.match(ew)||[]}var xP=function Pe(He){He=He==null?Gi:$c.defaults(Gi.Object(),He,$c.pick(Gi,fy));var Be=He.Array,dt=He.Date,Zt=He.Error,jn=He.Function,Ti=He.Math,tr=He.Object,Fd=He.RegExp,my=He.String,Fa=He.TypeError,ee=Be.prototype,pe=jn.prototype,Te=tr.prototype,qe=He["__core-js_shared__"],Ie=pe.toString,Ve=Te.hasOwnProperty,nt=0,at=function(){var p=/[^.]+$/.exec(qe&&qe.keys&&qe.keys.IE_PROTO||"");return p?"Symbol(src)_1."+p:""}(),ct=Te.toString,Rt=Ie.call(tr),Dt=Gi._,jt=Fd("^"+Ie.call(Ve).replace(Pc,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fn=$?He.Buffer:n,Nn=He.Symbol,Lt=He.Uint8Array,mi=fn?fn.allocUnsafe:n,Ai=Zs(tr.getPrototypeOf,tr),Mo=tr.create,Ar=Te.propertyIsEnumerable,Iu=ee.splice,jf=Nn?Nn.isConcatSpreadable:n,qi=Nn?Nn.iterator:n,Rd=Nn?Nn.toStringTag:n,cw=function(){try{var p=Ud(tr,"defineProperty");return p({},"",{}),p}catch{}}(),ade=He.clearTimeout!==Gi.clearTimeout&&He.clearTimeout,sde=dt&&dt.now!==Gi.Date.now&&dt.now,lde=He.setTimeout!==Gi.setTimeout&&He.setTimeout,fw=Ti.ceil,hw=Ti.floor,CP=tr.getOwnPropertySymbols,ude=fn?fn.isBuffer:n,v6=He.isFinite,cde=ee.join,fde=Zs(tr.keys,tr),Yi=Ti.max,No=Ti.min,hde=dt.now,dde=He.parseInt,y6=Ti.random,pde=ee.reverse,kP=Ud(He,"DataView"),vy=Ud(He,"Map"),TP=Ud(He,"Promise"),fm=Ud(He,"Set"),yy=Ud(He,"WeakMap"),by=Ud(tr,"create"),dw=yy&&new yy,hm={},gde=Wd(kP),mde=Wd(vy),vde=Wd(TP),yde=Wd(fm),bde=Wd(yy),pw=Nn?Nn.prototype:n,_y=pw?pw.valueOf:n,b6=pw?pw.toString:n;function Z(p){if(vi(p)&&!hn(p)&&!(p instanceof Fn)){if(p instanceof Qs)return p;if(Ve.call(p,"__wrapped__"))return _9(p)}return new Qs(p)}var dm=function(){function p(){}return function(b){if(!si(b))return{};if(Mo)return Mo(b);p.prototype=b;var A=new p;return p.prototype=n,A}}();function gw(){}function Qs(p,b){this.__wrapped__=p,this.__actions__=[],this.__chain__=!!b,this.__index__=0,this.__values__=n}Z.templateSettings={escape:ty,evaluate:Nf,interpolate:Ec,variable:"",imports:{_:Z}},Z.prototype=gw.prototype,Z.prototype.constructor=Z,Qs.prototype=dm(gw.prototype),Qs.prototype.constructor=Qs;function Fn(p){this.__wrapped__=p,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=se,this.__views__=[]}function _de(){var p=new Fn(this.__wrapped__);return p.__actions__=Ra(this.__actions__),p.__dir__=this.__dir__,p.__filtered__=this.__filtered__,p.__iteratees__=Ra(this.__iteratees__),p.__takeCount__=this.__takeCount__,p.__views__=Ra(this.__views__),p}function Sde(){if(this.__filtered__){var p=new Fn(this);p.__dir__=-1,p.__filtered__=!0}else p=this.clone(),p.__dir__*=-1;return p}function wde(){var p=this.__wrapped__.value(),b=this.__dir__,A=hn(p),N=b<0,q=A?p.length:0,re=Dpe(0,q,this.__views__),de=re.start,ke=re.end,$e=ke-de,Ke=N?ke:de-1,Je=this.__iteratees__,it=Je.length,ht=0,At=No($e,this.__takeCount__);if(!A||!N&&q==$e&&At==$e)return U6(p,this.__actions__);var Gt=[];e:for(;$e--&&ht<At;){Ke+=b;for(var yn=-1,qt=p[Ke];++yn<it;){var $n=Je[yn],Un=$n.iteratee,Cs=$n.type,fa=Un(qt);if(Cs==ie)qt=fa;else if(!fa){if(Cs==z)continue e;break e}}Gt[ht++]=qt}return Gt}Fn.prototype=dm(gw.prototype),Fn.prototype.constructor=Fn;function Vd(p){var b=-1,A=p==null?0:p.length;for(this.clear();++b<A;){var N=p[b];this.set(N[0],N[1])}}function xde(){this.__data__=by?by(null):{},this.size=0}function Cde(p){var b=this.has(p)&&delete this.__data__[p];return this.size-=b?1:0,b}function kde(p){var b=this.__data__;if(by){var A=b[p];return A===l?n:A}return Ve.call(b,p)?b[p]:n}function Tde(p){var b=this.__data__;return by?b[p]!==n:Ve.call(b,p)}function Ade(p,b){var A=this.__data__;return this.size+=this.has(p)?0:1,A[p]=by&&b===n?l:b,this}Vd.prototype.clear=xde,Vd.prototype.delete=Cde,Vd.prototype.get=kde,Vd.prototype.has=Tde,Vd.prototype.set=Ade;function Lc(p){var b=-1,A=p==null?0:p.length;for(this.clear();++b<A;){var N=p[b];this.set(N[0],N[1])}}function Ede(){this.__data__=[],this.size=0}function Pde(p){var b=this.__data__,A=mw(b,p);if(A<0)return!1;var N=b.length-1;return A==N?b.pop():Iu.call(b,A,1),--this.size,!0}function Ode(p){var b=this.__data__,A=mw(b,p);return A<0?n:b[A][1]}function Ide(p){return mw(this.__data__,p)>-1}function $de(p,b){var A=this.__data__,N=mw(A,p);return N<0?(++this.size,A.push([p,b])):A[N][1]=b,this}Lc.prototype.clear=Ede,Lc.prototype.delete=Pde,Lc.prototype.get=Ode,Lc.prototype.has=Ide,Lc.prototype.set=$de;function Dc(p){var b=-1,A=p==null?0:p.length;for(this.clear();++b<A;){var N=p[b];this.set(N[0],N[1])}}function Lde(){this.size=0,this.__data__={hash:new Vd,map:new(vy||Lc),string:new Vd}}function Dde(p){var b=Ew(this,p).delete(p);return this.size-=b?1:0,b}function Mde(p){return Ew(this,p).get(p)}function Nde(p){return Ew(this,p).has(p)}function Fde(p,b){var A=Ew(this,p),N=A.size;return A.set(p,b),this.size+=A.size==N?0:1,this}Dc.prototype.clear=Lde,Dc.prototype.delete=Dde,Dc.prototype.get=Mde,Dc.prototype.has=Nde,Dc.prototype.set=Fde;function Bd(p){var b=-1,A=p==null?0:p.length;for(this.__data__=new Dc;++b<A;)this.add(p[b])}function Rde(p){return this.__data__.set(p,l),this}function Vde(p){return this.__data__.has(p)}Bd.prototype.add=Bd.prototype.push=Rde,Bd.prototype.has=Vde;function Hl(p){var b=this.__data__=new Lc(p);this.size=b.size}function Bde(){this.__data__=new Lc,this.size=0}function zde(p){var b=this.__data__,A=b.delete(p);return this.size=b.size,A}function jde(p){return this.__data__.get(p)}function Ude(p){return this.__data__.has(p)}function Wde(p,b){var A=this.__data__;if(A instanceof Lc){var N=A.__data__;if(!vy||N.length<i-1)return N.push([p,b]),this.size=++A.size,this;A=this.__data__=new Dc(N)}return A.set(p,b),this.size=A.size,this}Hl.prototype.clear=Bde,Hl.prototype.delete=zde,Hl.prototype.get=jde,Hl.prototype.has=Ude,Hl.prototype.set=Wde;function _6(p,b){var A=hn(p),N=!A&&Hd(p),q=!A&&!N&&qf(p),re=!A&&!N&&!q&&vm(p),de=A||N||q||re,ke=de?Wl(p.length,my):[],$e=ke.length;for(var Ke in p)(b||Ve.call(p,Ke))&&!(de&&(Ke=="length"||q&&(Ke=="offset"||Ke=="parent")||re&&(Ke=="buffer"||Ke=="byteLength"||Ke=="byteOffset")||Rc(Ke,$e)))&&ke.push(Ke);return ke}function S6(p){var b=p.length;return b?p[FP(0,b-1)]:n}function Hde(p,b){return Pw(Ra(p),zd(b,0,p.length))}function Gde(p){return Pw(Ra(p))}function AP(p,b,A){(A!==n&&!Gl(p[b],A)||A===n&&!(b in p))&&Mc(p,b,A)}function Sy(p,b,A){var N=p[b];(!(Ve.call(p,b)&&Gl(N,A))||A===n&&!(b in p))&&Mc(p,b,A)}function mw(p,b){for(var A=p.length;A--;)if(Gl(p[A][0],b))return A;return-1}function qde(p,b,A,N){return Uf(p,function(q,re,de){b(N,q,A(q),de)}),N}function w6(p,b){return p&&Lu(b,oo(b),p)}function Yde(p,b){return p&&Lu(b,Ba(b),p)}function Mc(p,b,A){b=="__proto__"&&cw?cw(p,b,{configurable:!0,enumerable:!0,value:A,writable:!0}):p[b]=A}function EP(p,b){for(var A=-1,N=b.length,q=Be(N),re=p==null;++A<N;)q[A]=re?n:lO(p,b[A]);return q}function zd(p,b,A){return p===p&&(A!==n&&(p=p<=A?p:A),b!==n&&(p=p>=b?p:b)),p}function el(p,b,A,N,q,re){var de,ke=b&f,$e=b&h,Ke=b&d;if(A&&(de=q?A(p,N,q,re):A(p)),de!==n)return de;if(!si(p))return p;var Je=hn(p);if(Je){if(de=Npe(p),!ke)return Ra(p,de)}else{var it=Fo(p),ht=it==j||it==Y;if(qf(p))return G6(p,ke);if(it==Q||it==H||ht&&!q){if(de=$e||ht?{}:f9(p),!ke)return $e?kpe(p,Yde(de,p)):Cpe(p,w6(de,p))}else{if(!lr[it])return q?p:{};de=Fpe(p,it,ke)}}re||(re=new Hl);var At=re.get(p);if(At)return At;re.set(p,de),B9(p)?p.forEach(function(qt){de.add(el(qt,b,A,qt,p,re))}):R9(p)&&p.forEach(function(qt,$n){de.set($n,el(qt,b,A,$n,p,re))});var Gt=Ke?$e?YP:qP:$e?Ba:oo,yn=Je?n:Gt(p);return je(yn||p,function(qt,$n){yn&&($n=qt,qt=p[$n]),Sy(de,$n,el(qt,b,A,$n,p,re))}),de}function Kde(p){var b=oo(p);return function(A){return x6(A,p,b)}}function x6(p,b,A){var N=A.length;if(p==null)return!N;for(p=tr(p);N--;){var q=A[N],re=b[q],de=p[q];if(de===n&&!(q in p)||!re(de))return!1}return!0}function C6(p,b,A){if(typeof p!="function")throw new Fa(a);return Ey(function(){p.apply(n,A)},b)}function wy(p,b,A,N){var q=-1,re=ei,de=!0,ke=p.length,$e=[],Ke=b.length;if(!ke)return $e;A&&(b=kn(b,la(A))),N?(re=ti,de=!1):b.length>=i&&(re=Ld,de=!1,b=new Bd(b));e:for(;++q<ke;){var Je=p[q],it=A==null?Je:A(Je);if(Je=N||Je!==0?Je:0,de&&it===it){for(var ht=Ke;ht--;)if(b[ht]===it)continue e;$e.push(Je)}else re(b,it,N)||$e.push(Je)}return $e}var Uf=J6($u),k6=J6(OP,!0);function Xde(p,b){var A=!0;return Uf(p,function(N,q,re){return A=!!b(N,q,re),A}),A}function vw(p,b,A){for(var N=-1,q=p.length;++N<q;){var re=p[N],de=b(re);if(de!=null&&(ke===n?de===de&&!xs(de):A(de,ke)))var ke=de,$e=re}return $e}function Jde(p,b,A,N){var q=p.length;for(A=dn(A),A<0&&(A=-A>q?0:q+A),N=N===n||N>q?q:dn(N),N<0&&(N+=q),N=A>N?0:j9(N);A<N;)p[A++]=b;return p}function T6(p,b){var A=[];return Uf(p,function(N,q,re){b(N,q,re)&&A.push(N)}),A}function po(p,b,A,N,q){var re=-1,de=p.length;for(A||(A=Vpe),q||(q=[]);++re<de;){var ke=p[re];b>0&&A(ke)?b>1?po(ke,b-1,A,N,q):On(q,ke):N||(q[q.length]=ke)}return q}var PP=Z6(),A6=Z6(!0);function $u(p,b){return p&&PP(p,b,oo)}function OP(p,b){return p&&A6(p,b,oo)}function yw(p,b){return vt(b,function(A){return Vc(p[A])})}function jd(p,b){b=Hf(b,p);for(var A=0,N=b.length;p!=null&&A<N;)p=p[Du(b[A++])];return A&&A==N?p:n}function E6(p,b,A){var N=b(p);return hn(p)?N:On(N,A(p))}function ua(p){return p==null?p===n?et:U:Rd&&Rd in tr(p)?Lpe(p):Gpe(p)}function IP(p,b){return p>b}function Zde(p,b){return p!=null&&Ve.call(p,b)}function Qde(p,b){return p!=null&&b in tr(p)}function epe(p,b,A){return p>=No(b,A)&&p<Yi(b,A)}function $P(p,b,A){for(var N=A?ti:ei,q=p[0].length,re=p.length,de=re,ke=Be(re),$e=1/0,Ke=[];de--;){var Je=p[de];de&&b&&(Je=kn(Je,la(b))),$e=No(Je.length,$e),ke[de]=!A&&(b||q>=120&&Je.length>=120)?new Bd(de&&Je):n}Je=p[0];var it=-1,ht=ke[0];e:for(;++it<q&&Ke.length<$e;){var At=Je[it],Gt=b?b(At):At;if(At=A||At!==0?At:0,!(ht?Ld(ht,Gt):N(Ke,Gt,A))){for(de=re;--de;){var yn=ke[de];if(!(yn?Ld(yn,Gt):N(p[de],Gt,A)))continue e}ht&&ht.push(Gt),Ke.push(At)}}return Ke}function tpe(p,b,A,N){return $u(p,function(q,re,de){b(N,A(q),re,de)}),N}function xy(p,b,A){b=Hf(b,p),p=g9(p,b);var N=p==null?p:p[Du(nl(b))];return N==null?n:Ye(N,p,A)}function P6(p){return vi(p)&&ua(p)==H}function npe(p){return vi(p)&&ua(p)==Ft}function rpe(p){return vi(p)&&ua(p)==ue}function Cy(p,b,A,N,q){return p===b?!0:p==null||b==null||!vi(p)&&!vi(b)?p!==p&&b!==b:ipe(p,b,A,N,Cy,q)}function ipe(p,b,A,N,q,re){var de=hn(p),ke=hn(b),$e=de?ae:Fo(p),Ke=ke?ae:Fo(b);$e=$e==H?Q:$e,Ke=Ke==H?Q:Ke;var Je=$e==Q,it=Ke==Q,ht=$e==Ke;if(ht&&qf(p)){if(!qf(b))return!1;de=!0,Je=!1}if(ht&&!Je)return re||(re=new Hl),de||vm(p)?l9(p,b,A,N,q,re):Ipe(p,b,$e,A,N,q,re);if(!(A&g)){var At=Je&&Ve.call(p,"__wrapped__"),Gt=it&&Ve.call(b,"__wrapped__");if(At||Gt){var yn=At?p.value():p,qt=Gt?b.value():b;return re||(re=new Hl),q(yn,qt,A,N,re)}}return ht?(re||(re=new Hl),$pe(p,b,A,N,q,re)):!1}function ope(p){return vi(p)&&Fo(p)==O}function LP(p,b,A,N){var q=A.length,re=q,de=!N;if(p==null)return!re;for(p=tr(p);q--;){var ke=A[q];if(de&&ke[2]?ke[1]!==p[ke[0]]:!(ke[0]in p))return!1}for(;++q<re;){ke=A[q];var $e=ke[0],Ke=p[$e],Je=ke[1];if(de&&ke[2]){if(Ke===n&&!($e in p))return!1}else{var it=new Hl;if(N)var ht=N(Ke,Je,$e,p,b,it);if(!(ht===n?Cy(Je,Ke,g|y,N,it):ht))return!1}}return!0}function O6(p){if(!si(p)||zpe(p))return!1;var b=Vc(p)?jt:qn;return b.test(Wd(p))}function ape(p){return vi(p)&&ua(p)==Me}function spe(p){return vi(p)&&Fo(p)==De}function lpe(p){return vi(p)&&Mw(p.length)&&!!yr[ua(p)]}function I6(p){return typeof p=="function"?p:p==null?za:typeof p=="object"?hn(p)?D6(p[0],p[1]):L6(p):Q9(p)}function DP(p){if(!Ay(p))return fde(p);var b=[];for(var A in tr(p))Ve.call(p,A)&&A!="constructor"&&b.push(A);return b}function upe(p){if(!si(p))return Hpe(p);var b=Ay(p),A=[];for(var N in p)N=="constructor"&&(b||!Ve.call(p,N))||A.push(N);return A}function MP(p,b){return p<b}function $6(p,b){var A=-1,N=Va(p)?Be(p.length):[];return Uf(p,function(q,re,de){N[++A]=b(q,re,de)}),N}function L6(p){var b=XP(p);return b.length==1&&b[0][2]?d9(b[0][0],b[0][1]):function(A){return A===p||LP(A,p,b)}}function D6(p,b){return ZP(p)&&h9(b)?d9(Du(p),b):function(A){var N=lO(A,p);return N===n&&N===b?uO(A,p):Cy(b,N,g|y)}}function bw(p,b,A,N,q){p!==b&&PP(b,function(re,de){if(q||(q=new Hl),si(re))cpe(p,b,de,A,bw,N,q);else{var ke=N?N(eO(p,de),re,de+"",p,b,q):n;ke===n&&(ke=re),AP(p,de,ke)}},Ba)}function cpe(p,b,A,N,q,re,de){var ke=eO(p,A),$e=eO(b,A),Ke=de.get($e);if(Ke){AP(p,A,Ke);return}var Je=re?re(ke,$e,A+"",p,b,de):n,it=Je===n;if(it){var ht=hn($e),At=!ht&&qf($e),Gt=!ht&&!At&&vm($e);Je=$e,ht||At||Gt?hn(ke)?Je=ke:Ei(ke)?Je=Ra(ke):At?(it=!1,Je=G6($e,!0)):Gt?(it=!1,Je=q6($e,!0)):Je=[]:Py($e)||Hd($e)?(Je=ke,Hd(ke)?Je=U9(ke):(!si(ke)||Vc(ke))&&(Je=f9($e))):it=!1}it&&(de.set($e,Je),q(Je,$e,N,re,de),de.delete($e)),AP(p,A,Je)}function M6(p,b){var A=p.length;if(A)return b+=b<0?A:0,Rc(b,A)?p[b]:n}function N6(p,b,A){b.length?b=kn(b,function(re){return hn(re)?function(de){return jd(de,re.length===1?re[0]:re)}:re}):b=[za];var N=-1;b=kn(b,la(Ht()));var q=$6(p,function(re,de,ke){var $e=kn(b,function(Ke){return Ke(re)});return{criteria:$e,index:++N,value:re}});return dy(q,function(re,de){return xpe(re,de,A)})}function fpe(p,b){return F6(p,b,function(A,N){return uO(p,N)})}function F6(p,b,A){for(var N=-1,q=b.length,re={};++N<q;){var de=b[N],ke=jd(p,de);A(ke,de)&&ky(re,Hf(de,p),ke)}return re}function hpe(p){return function(b){return jd(b,p)}}function NP(p,b,A,N){var q=N?Lo:Da,re=-1,de=b.length,ke=p;for(p===b&&(b=Ra(b)),A&&(ke=kn(p,la(A)));++re<de;)for(var $e=0,Ke=b[re],Je=A?A(Ke):Ke;($e=q(ke,Je,$e,N))>-1;)ke!==p&&Iu.call(ke,$e,1),Iu.call(p,$e,1);return p}function R6(p,b){for(var A=p?b.length:0,N=A-1;A--;){var q=b[A];if(A==N||q!==re){var re=q;Rc(q)?Iu.call(p,q,1):BP(p,q)}}return p}function FP(p,b){return p+hw(y6()*(b-p+1))}function dpe(p,b,A,N){for(var q=-1,re=Yi(fw((b-p)/(A||1)),0),de=Be(re);re--;)de[N?re:++q]=p,p+=A;return de}function RP(p,b){var A="";if(!p||b<1||b>Ae)return A;do b%2&&(A+=p),b=hw(b/2),b&&(p+=p);while(b);return A}function xn(p,b){return tO(p9(p,b,za),p+"")}function ppe(p){return S6(ym(p))}function gpe(p,b){var A=ym(p);return Pw(A,zd(b,0,A.length))}function ky(p,b,A,N){if(!si(p))return p;b=Hf(b,p);for(var q=-1,re=b.length,de=re-1,ke=p;ke!=null&&++q<re;){var $e=Du(b[q]),Ke=A;if($e==="__proto__"||$e==="constructor"||$e==="prototype")return p;if(q!=de){var Je=ke[$e];Ke=N?N(Je,$e,ke):n,Ke===n&&(Ke=si(Je)?Je:Rc(b[q+1])?[]:{})}Sy(ke,$e,Ke),ke=ke[$e]}return p}var V6=dw?function(p,b){return dw.set(p,b),p}:za,mpe=cw?function(p,b){return cw(p,"toString",{configurable:!0,enumerable:!1,value:fO(b),writable:!0})}:za;function vpe(p){return Pw(ym(p))}function tl(p,b,A){var N=-1,q=p.length;b<0&&(b=-b>q?0:q+b),A=A>q?q:A,A<0&&(A+=q),q=b>A?0:A-b>>>0,b>>>=0;for(var re=Be(q);++N<q;)re[N]=p[N+b];return re}function ype(p,b){var A;return Uf(p,function(N,q,re){return A=b(N,q,re),!A}),!!A}function _w(p,b,A){var N=0,q=p==null?N:p.length;if(typeof b=="number"&&b===b&&q<=J){for(;N<q;){var re=N+q>>>1,de=p[re];de!==null&&!xs(de)&&(A?de<=b:de<b)?N=re+1:q=re}return q}return VP(p,b,za,A)}function VP(p,b,A,N){var q=0,re=p==null?0:p.length;if(re===0)return 0;b=A(b);for(var de=b!==b,ke=b===null,$e=xs(b),Ke=b===n;q<re;){var Je=hw((q+re)/2),it=A(p[Je]),ht=it!==n,At=it===null,Gt=it===it,yn=xs(it);if(de)var qt=N||Gt;else Ke?qt=Gt&&(N||ht):ke?qt=Gt&&ht&&(N||!At):$e?qt=Gt&&ht&&!At&&(N||!yn):At||yn?qt=!1:qt=N?it<=b:it<b;qt?q=Je+1:re=Je}return No(re,ne)}function B6(p,b){for(var A=-1,N=p.length,q=0,re=[];++A<N;){var de=p[A],ke=b?b(de):de;if(!A||!Gl(ke,$e)){var $e=ke;re[q++]=de===0?0:de}}return re}function z6(p){return typeof p=="number"?p:xs(p)?_e:+p}function ws(p){if(typeof p=="string")return p;if(hn(p))return kn(p,ws)+"";if(xs(p))return b6?b6.call(p):"";var b=p+"";return b=="0"&&1/p==-Se?"-0":b}function Wf(p,b,A){var N=-1,q=ei,re=p.length,de=!0,ke=[],$e=ke;if(A)de=!1,q=ti;else if(re>=i){var Ke=b?null:Ppe(p);if(Ke)return Nd(Ke);de=!1,q=Ld,$e=new Bd}else $e=b?[]:ke;e:for(;++N<re;){var Je=p[N],it=b?b(Je):Je;if(Je=A||Je!==0?Je:0,de&&it===it){for(var ht=$e.length;ht--;)if($e[ht]===it)continue e;b&&$e.push(it),ke.push(Je)}else q($e,it,A)||($e!==ke&&$e.push(it),ke.push(Je))}return ke}function BP(p,b){return b=Hf(b,p),p=g9(p,b),p==null||delete p[Du(nl(b))]}function j6(p,b,A,N){return ky(p,b,A(jd(p,b)),N)}function Sw(p,b,A,N){for(var q=p.length,re=N?q:-1;(N?re--:++re<q)&&b(p[re],re,p););return A?tl(p,N?0:re,N?re+1:q):tl(p,N?re+1:0,N?q:re)}function U6(p,b){var A=p;return A instanceof Fn&&(A=A.value()),Jt(b,function(N,q){return q.func.apply(q.thisArg,On([N],q.args))},A)}function zP(p,b,A){var N=p.length;if(N<2)return N?Wf(p[0]):[];for(var q=-1,re=Be(N);++q<N;)for(var de=p[q],ke=-1;++ke<N;)ke!=q&&(re[q]=wy(re[q]||de,p[ke],b,A));return Wf(po(re,1),b,A)}function W6(p,b,A){for(var N=-1,q=p.length,re=b.length,de={};++N<q;){var ke=N<re?b[N]:n;A(de,p[N],ke)}return de}function jP(p){return Ei(p)?p:[]}function UP(p){return typeof p=="function"?p:za}function Hf(p,b){return hn(p)?p:ZP(p,b)?[p]:b9(ur(p))}var bpe=xn;function Gf(p,b,A){var N=p.length;return A=A===n?N:A,!b&&A>=N?p:tl(p,b,A)}var H6=ade||function(p){return Gi.clearTimeout(p)};function G6(p,b){if(b)return p.slice();var A=p.length,N=mi?mi(A):new p.constructor(A);return p.copy(N),N}function WP(p){var b=new p.constructor(p.byteLength);return new Lt(b).set(new Lt(p)),b}function _pe(p,b){var A=b?WP(p.buffer):p.buffer;return new p.constructor(A,p.byteOffset,p.byteLength)}function Spe(p){var b=new p.constructor(p.source,sr.exec(p));return b.lastIndex=p.lastIndex,b}function wpe(p){return _y?tr(_y.call(p)):{}}function q6(p,b){var A=b?WP(p.buffer):p.buffer;return new p.constructor(A,p.byteOffset,p.length)}function Y6(p,b){if(p!==b){var A=p!==n,N=p===null,q=p===p,re=xs(p),de=b!==n,ke=b===null,$e=b===b,Ke=xs(b);if(!ke&&!Ke&&!re&&p>b||re&&de&&$e&&!ke&&!Ke||N&&de&&$e||!A&&$e||!q)return 1;if(!N&&!re&&!Ke&&p<b||Ke&&A&&q&&!N&&!re||ke&&A&&q||!de&&q||!$e)return-1}return 0}function xpe(p,b,A){for(var N=-1,q=p.criteria,re=b.criteria,de=q.length,ke=A.length;++N<de;){var $e=Y6(q[N],re[N]);if($e){if(N>=ke)return $e;var Ke=A[N];return $e*(Ke=="desc"?-1:1)}}return p.index-b.index}function K6(p,b,A,N){for(var q=-1,re=p.length,de=A.length,ke=-1,$e=b.length,Ke=Yi(re-de,0),Je=Be($e+Ke),it=!N;++ke<$e;)Je[ke]=b[ke];for(;++q<de;)(it||q<re)&&(Je[A[q]]=p[q]);for(;Ke--;)Je[ke++]=p[q++];return Je}function X6(p,b,A,N){for(var q=-1,re=p.length,de=-1,ke=A.length,$e=-1,Ke=b.length,Je=Yi(re-ke,0),it=Be(Je+Ke),ht=!N;++q<Je;)it[q]=p[q];for(var At=q;++$e<Ke;)it[At+$e]=b[$e];for(;++de<ke;)(ht||q<re)&&(it[At+A[de]]=p[q++]);return it}function Ra(p,b){var A=-1,N=p.length;for(b||(b=Be(N));++A<N;)b[A]=p[A];return b}function Lu(p,b,A,N){var q=!A;A||(A={});for(var re=-1,de=b.length;++re<de;){var ke=b[re],$e=N?N(A[ke],p[ke],ke,A,p):n;$e===n&&($e=p[ke]),q?Mc(A,ke,$e):Sy(A,ke,$e)}return A}function Cpe(p,b){return Lu(p,JP(p),b)}function kpe(p,b){return Lu(p,u9(p),b)}function ww(p,b){return function(A,N){var q=hn(A)?Ne:qde,re=b?b():{};return q(A,p,Ht(N,2),re)}}function pm(p){return xn(function(b,A){var N=-1,q=A.length,re=q>1?A[q-1]:n,de=q>2?A[2]:n;for(re=p.length>3&&typeof re=="function"?(q--,re):n,de&&ca(A[0],A[1],de)&&(re=q<3?n:re,q=1),b=tr(b);++N<q;){var ke=A[N];ke&&p(b,ke,N,re)}return b})}function J6(p,b){return function(A,N){if(A==null)return A;if(!Va(A))return p(A,N);for(var q=A.length,re=b?q:-1,de=tr(A);(b?re--:++re<q)&&N(de[re],re,de)!==!1;);return A}}function Z6(p){return function(b,A,N){for(var q=-1,re=tr(b),de=N(b),ke=de.length;ke--;){var $e=de[p?ke:++q];if(A(re[$e],$e,re)===!1)break}return b}}function Tpe(p,b,A){var N=b&_,q=Ty(p);function re(){var de=this&&this!==Gi&&this instanceof re?q:p;return de.apply(N?A:this,arguments)}return re}function Q6(p){return function(b){b=ur(b);var A=zf(b)?Do(b):n,N=A?A[0]:b.charAt(0),q=A?Gf(A,1).join(""):b.slice(1);return N[p]()+q}}function gm(p){return function(b){return Jt(J9(X9(b).replace(cP,"")),p,"")}}function Ty(p){return function(){var b=arguments;switch(b.length){case 0:return new p;case 1:return new p(b[0]);case 2:return new p(b[0],b[1]);case 3:return new p(b[0],b[1],b[2]);case 4:return new p(b[0],b[1],b[2],b[3]);case 5:return new p(b[0],b[1],b[2],b[3],b[4]);case 6:return new p(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new p(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var A=dm(p.prototype),N=p.apply(A,b);return si(N)?N:A}}function Ape(p,b,A){var N=Ty(p);function q(){for(var re=arguments.length,de=Be(re),ke=re,$e=mm(q);ke--;)de[ke]=arguments[ke];var Ke=re<3&&de[0]!==$e&&de[re-1]!==$e?[]:io(de,$e);if(re-=Ke.length,re<A)return i9(p,b,xw,q.placeholder,n,de,Ke,n,n,A-re);var Je=this&&this!==Gi&&this instanceof q?N:p;return Ye(Je,this,de)}return q}function e9(p){return function(b,A,N){var q=tr(b);if(!Va(b)){var re=Ht(A,3);b=oo(b),A=function(ke){return re(q[ke],ke,q)}}var de=p(b,A,N);return de>-1?q[re?b[de]:de]:n}}function t9(p){return Fc(function(b){var A=b.length,N=A,q=Qs.prototype.thru;for(p&&b.reverse();N--;){var re=b[N];if(typeof re!="function")throw new Fa(a);if(q&&!de&&Aw(re)=="wrapper")var de=new Qs([],!0)}for(N=de?N:A;++N<A;){re=b[N];var ke=Aw(re),$e=ke=="wrapper"?KP(re):n;$e&&QP($e[0])&&$e[1]==(T|C|x|P)&&!$e[4].length&&$e[9]==1?de=de[Aw($e[0])].apply(de,$e[3]):de=re.length==1&&QP(re)?de[ke]():de.thru(re)}return function(){var Ke=arguments,Je=Ke[0];if(de&&Ke.length==1&&hn(Je))return de.plant(Je).value();for(var it=0,ht=A?b[it].apply(this,Ke):Je;++it<A;)ht=b[it].call(this,ht);return ht}})}function xw(p,b,A,N,q,re,de,ke,$e,Ke){var Je=b&T,it=b&_,ht=b&v,At=b&(C|k),Gt=b&I,yn=ht?n:Ty(p);function qt(){for(var $n=arguments.length,Un=Be($n),Cs=$n;Cs--;)Un[Cs]=arguments[Cs];if(At)var fa=mm(qt),ks=mP(Un,fa);if(N&&(Un=K6(Un,N,q,At)),re&&(Un=X6(Un,re,de,At)),$n-=ks,At&&$n<Ke){var Pi=io(Un,fa);return i9(p,b,xw,qt.placeholder,A,Un,Pi,ke,$e,Ke-$n)}var ql=it?A:this,zc=ht?ql[p]:p;return $n=Un.length,ke?Un=qpe(Un,ke):Gt&&$n>1&&Un.reverse(),Je&&$e<$n&&(Un.length=$e),this&&this!==Gi&&this instanceof qt&&(zc=yn||Ty(zc)),zc.apply(ql,Un)}return qt}function n9(p,b){return function(A,N){return tpe(A,p,b(N),{})}}function Cw(p,b){return function(A,N){var q;if(A===n&&N===n)return b;if(A!==n&&(q=A),N!==n){if(q===n)return N;typeof A=="string"||typeof N=="string"?(A=ws(A),N=ws(N)):(A=z6(A),N=z6(N)),q=p(A,N)}return q}}function HP(p){return Fc(function(b){return b=kn(b,la(Ht())),xn(function(A){var N=this;return p(b,function(q){return Ye(q,N,A)})})})}function kw(p,b){b=b===n?" ":ws(b);var A=b.length;if(A<2)return A?RP(b,p):b;var N=RP(b,fw(p/Kn(b)));return zf(b)?Gf(Do(N),0,p).join(""):N.slice(0,p)}function Epe(p,b,A,N){var q=b&_,re=Ty(p);function de(){for(var ke=-1,$e=arguments.length,Ke=-1,Je=N.length,it=Be(Je+$e),ht=this&&this!==Gi&&this instanceof de?re:p;++Ke<Je;)it[Ke]=N[Ke];for(;$e--;)it[Ke++]=arguments[++ke];return Ye(ht,q?A:this,it)}return de}function r9(p){return function(b,A,N){return N&&typeof N!="number"&&ca(b,A,N)&&(A=N=n),b=Bc(b),A===n?(A=b,b=0):A=Bc(A),N=N===n?b<A?1:-1:Bc(N),dpe(b,A,N,p)}}function Tw(p){return function(b,A){return typeof b=="string"&&typeof A=="string"||(b=rl(b),A=rl(A)),p(b,A)}}function i9(p,b,A,N,q,re,de,ke,$e,Ke){var Je=b&C,it=Je?de:n,ht=Je?n:de,At=Je?re:n,Gt=Je?n:re;b|=Je?x:m,b&=~(Je?m:x),b&S||(b&=~(_|v));var yn=[p,b,q,At,it,Gt,ht,ke,$e,Ke],qt=A.apply(n,yn);return QP(p)&&m9(qt,yn),qt.placeholder=N,v9(qt,p,b)}function GP(p){var b=Ti[p];return function(A,N){if(A=rl(A),N=N==null?0:No(dn(N),292),N&&v6(A)){var q=(ur(A)+"e").split("e"),re=b(q[0]+"e"+(+q[1]+N));return q=(ur(re)+"e").split("e"),+(q[0]+"e"+(+q[1]-N))}return b(A)}}var Ppe=fm&&1/Nd(new fm([,-0]))[1]==Se?function(p){return new fm(p)}:pO;function o9(p){return function(b){var A=Fo(b);return A==O?Md(b):A==De?sw(b):ow(b,p(b))}}function Nc(p,b,A,N,q,re,de,ke){var $e=b&v;if(!$e&&typeof p!="function")throw new Fa(a);var Ke=N?N.length:0;if(Ke||(b&=~(x|m),N=q=n),de=de===n?de:Yi(dn(de),0),ke=ke===n?ke:dn(ke),Ke-=q?q.length:0,b&m){var Je=N,it=q;N=q=n}var ht=$e?n:KP(p),At=[p,b,A,N,q,Je,it,re,de,ke];if(ht&&Wpe(At,ht),p=At[0],b=At[1],A=At[2],N=At[3],q=At[4],ke=At[9]=At[9]===n?$e?0:p.length:Yi(At[9]-Ke,0),!ke&&b&(C|k)&&(b&=~(C|k)),!b||b==_)var Gt=Tpe(p,b,A);else b==C||b==k?Gt=Ape(p,b,ke):(b==x||b==(_|x))&&!q.length?Gt=Epe(p,b,A,N):Gt=xw.apply(n,At);var yn=ht?V6:m9;return v9(yn(Gt,At),p,b)}function a9(p,b,A,N){return p===n||Gl(p,Te[A])&&!Ve.call(N,A)?b:p}function s9(p,b,A,N,q,re){return si(p)&&si(b)&&(re.set(b,p),bw(p,b,n,s9,re),re.delete(b)),p}function Ope(p){return Py(p)?n:p}function l9(p,b,A,N,q,re){var de=A&g,ke=p.length,$e=b.length;if(ke!=$e&&!(de&&$e>ke))return!1;var Ke=re.get(p),Je=re.get(b);if(Ke&&Je)return Ke==b&&Je==p;var it=-1,ht=!0,At=A&y?new Bd:n;for(re.set(p,b),re.set(b,p);++it<ke;){var Gt=p[it],yn=b[it];if(N)var qt=de?N(yn,Gt,it,b,p,re):N(Gt,yn,it,p,b,re);if(qt!==n){if(qt)continue;ht=!1;break}if(At){if(!In(b,function($n,Un){if(!Ld(At,Un)&&(Gt===$n||q(Gt,$n,A,N,re)))return At.push(Un)})){ht=!1;break}}else if(!(Gt===yn||q(Gt,yn,A,N,re))){ht=!1;break}}return re.delete(p),re.delete(b),ht}function Ipe(p,b,A,N,q,re,de){switch(A){case Kt:if(p.byteLength!=b.byteLength||p.byteOffset!=b.byteOffset)return!1;p=p.buffer,b=b.buffer;case Ft:return!(p.byteLength!=b.byteLength||!re(new Lt(p),new Lt(b)));case ce:case ue:case F:return Gl(+p,+b);case ye:return p.name==b.name&&p.message==b.message;case Me:case tt:return p==b+"";case O:var ke=Md;case De:var $e=N&g;if(ke||(ke=Nd),p.size!=b.size&&!$e)return!1;var Ke=de.get(p);if(Ke)return Ke==b;N|=y,de.set(p,b);var Je=l9(ke(p),ke(b),N,q,re,de);return de.delete(p),Je;case Xe:if(_y)return _y.call(p)==_y.call(b)}return!1}function $pe(p,b,A,N,q,re){var de=A&g,ke=qP(p),$e=ke.length,Ke=qP(b),Je=Ke.length;if($e!=Je&&!de)return!1;for(var it=$e;it--;){var ht=ke[it];if(!(de?ht in b:Ve.call(b,ht)))return!1}var At=re.get(p),Gt=re.get(b);if(At&&Gt)return At==b&&Gt==p;var yn=!0;re.set(p,b),re.set(b,p);for(var qt=de;++it<$e;){ht=ke[it];var $n=p[ht],Un=b[ht];if(N)var Cs=de?N(Un,$n,ht,b,p,re):N($n,Un,ht,p,b,re);if(!(Cs===n?$n===Un||q($n,Un,A,N,re):Cs)){yn=!1;break}qt||(qt=ht=="constructor")}if(yn&&!qt){var fa=p.constructor,ks=b.constructor;fa!=ks&&"constructor"in p&&"constructor"in b&&!(typeof fa=="function"&&fa instanceof fa&&typeof ks=="function"&&ks instanceof ks)&&(yn=!1)}return re.delete(p),re.delete(b),yn}function Fc(p){return tO(p9(p,n,x9),p+"")}function qP(p){return E6(p,oo,JP)}function YP(p){return E6(p,Ba,u9)}var KP=dw?function(p){return dw.get(p)}:pO;function Aw(p){for(var b=p.name+"",A=hm[b],N=Ve.call(hm,b)?A.length:0;N--;){var q=A[N],re=q.func;if(re==null||re==p)return q.name}return b}function mm(p){var b=Ve.call(Z,"placeholder")?Z:p;return b.placeholder}function Ht(){var p=Z.iteratee||hO;return p=p===hO?I6:p,arguments.length?p(arguments[0],arguments[1]):p}function Ew(p,b){var A=p.__data__;return Bpe(b)?A[typeof b=="string"?"string":"hash"]:A.map}function XP(p){for(var b=oo(p),A=b.length;A--;){var N=b[A],q=p[N];b[A]=[N,q,h9(q)]}return b}function Ud(p,b){var A=bP(p,b);return O6(A)?A:n}function Lpe(p){var b=Ve.call(p,Rd),A=p[Rd];try{p[Rd]=n;var N=!0}catch{}var q=ct.call(p);return N&&(b?p[Rd]=A:delete p[Rd]),q}var JP=CP?function(p){return p==null?[]:(p=tr(p),vt(CP(p),function(b){return Ar.call(p,b)}))}:gO,u9=CP?function(p){for(var b=[];p;)On(b,JP(p)),p=Ai(p);return b}:gO,Fo=ua;(kP&&Fo(new kP(new ArrayBuffer(1)))!=Kt||vy&&Fo(new vy)!=O||TP&&Fo(TP.resolve())!=ve||fm&&Fo(new fm)!=De||yy&&Fo(new yy)!=Qe)&&(Fo=function(p){var b=ua(p),A=b==Q?p.constructor:n,N=A?Wd(A):"";if(N)switch(N){case gde:return Kt;case mde:return O;case vde:return ve;case yde:return De;case bde:return Qe}return b});function Dpe(p,b,A){for(var N=-1,q=A.length;++N<q;){var re=A[N],de=re.size;switch(re.type){case"drop":p+=de;break;case"dropRight":b-=de;break;case"take":b=No(b,p+de);break;case"takeRight":p=Yi(p,b-de);break}}return{start:p,end:b}}function Mpe(p){var b=p.match(Ce);return b?b[1].split(Re):[]}function c9(p,b,A){b=Hf(b,p);for(var N=-1,q=b.length,re=!1;++N<q;){var de=Du(b[N]);if(!(re=p!=null&&A(p,de)))break;p=p[de]}return re||++N!=q?re:(q=p==null?0:p.length,!!q&&Mw(q)&&Rc(de,q)&&(hn(p)||Hd(p)))}function Npe(p){var b=p.length,A=new p.constructor(b);return b&&typeof p[0]=="string"&&Ve.call(p,"index")&&(A.index=p.index,A.input=p.input),A}function f9(p){return typeof p.constructor=="function"&&!Ay(p)?dm(Ai(p)):{}}function Fpe(p,b,A){var N=p.constructor;switch(b){case Ft:return WP(p);case ce:case ue:return new N(+p);case Kt:return _pe(p,A);case wt:case sn:case gr:case gi:case Dr:case fo:case Tr:case Bn:case zn:return q6(p,A);case O:return new N;case F:case tt:return new N(p);case Me:return Spe(p);case De:return new N;case Xe:return wpe(p)}}function Rpe(p,b){var A=b.length;if(!A)return p;var N=A-1;return b[N]=(A>1?"& ":"")+b[N],b=b.join(A>2?", ":" "),p.replace(le,`{
/* [wrapped with `+b+`] */
`)}function Vpe(p){return hn(p)||Hd(p)||!!(jf&&p&&p[jf])}function Rc(p,b){var A=typeof p;return b=b??Ae,!!b&&(A=="number"||A!="symbol"&&Xt.test(p))&&p>-1&&p%1==0&&p<b}function ca(p,b,A){if(!si(A))return!1;var N=typeof b;return(N=="number"?Va(A)&&Rc(b,A.length):N=="string"&&b in A)?Gl(A[b],p):!1}function ZP(p,b){if(hn(p))return!1;var A=typeof p;return A=="number"||A=="symbol"||A=="boolean"||p==null||xs(p)?!0:im.test(p)||!Td.test(p)||b!=null&&p in tr(b)}function Bpe(p){var b=typeof p;return b=="string"||b=="number"||b=="symbol"||b=="boolean"?p!=="__proto__":p===null}function QP(p){var b=Aw(p),A=Z[b];if(typeof A!="function"||!(b in Fn.prototype))return!1;if(p===A)return!0;var N=KP(A);return!!N&&p===N[0]}function zpe(p){return!!at&&at in p}var jpe=qe?Vc:mO;function Ay(p){var b=p&&p.constructor,A=typeof b=="function"&&b.prototype||Te;return p===A}function h9(p){return p===p&&!si(p)}function d9(p,b){return function(A){return A==null?!1:A[p]===b&&(b!==n||p in tr(A))}}function Upe(p){var b=Lw(p,function(N){return A.size===u&&A.clear(),N}),A=b.cache;return b}function Wpe(p,b){var A=p[1],N=b[1],q=A|N,re=q<(_|v|T),de=N==T&&A==C||N==T&&A==P&&p[7].length<=b[8]||N==(T|P)&&b[7].length<=b[8]&&A==C;if(!(re||de))return p;N&_&&(p[2]=b[2],q|=A&_?0:S);var ke=b[3];if(ke){var $e=p[3];p[3]=$e?K6($e,ke,b[4]):ke,p[4]=$e?io(p[3],c):b[4]}return ke=b[5],ke&&($e=p[5],p[5]=$e?X6($e,ke,b[6]):ke,p[6]=$e?io(p[5],c):b[6]),ke=b[7],ke&&(p[7]=ke),N&T&&(p[8]=p[8]==null?b[8]:No(p[8],b[8])),p[9]==null&&(p[9]=b[9]),p[0]=b[0],p[1]=q,p}function Hpe(p){var b=[];if(p!=null)for(var A in tr(p))b.push(A);return b}function Gpe(p){return ct.call(p)}function p9(p,b,A){return b=Yi(b===n?p.length-1:b,0),function(){for(var N=arguments,q=-1,re=Yi(N.length-b,0),de=Be(re);++q<re;)de[q]=N[b+q];q=-1;for(var ke=Be(b+1);++q<b;)ke[q]=N[q];return ke[b]=A(de),Ye(p,this,ke)}}function g9(p,b){return b.length<2?p:jd(p,tl(b,0,-1))}function qpe(p,b){for(var A=p.length,N=No(b.length,A),q=Ra(p);N--;){var re=b[N];p[N]=Rc(re,A)?q[re]:n}return p}function eO(p,b){if(!(b==="constructor"&&typeof p[b]=="function")&&b!="__proto__")return p[b]}var m9=y9(V6),Ey=lde||function(p,b){return Gi.setTimeout(p,b)},tO=y9(mpe);function v9(p,b,A){var N=b+"";return tO(p,Rpe(N,Ype(Mpe(N),A)))}function y9(p){var b=0,A=0;return function(){var N=hde(),q=V-(N-A);if(A=N,q>0){if(++b>=R)return arguments[0]}else b=0;return p.apply(n,arguments)}}function Pw(p,b){var A=-1,N=p.length,q=N-1;for(b=b===n?N:b;++A<b;){var re=FP(A,q),de=p[re];p[re]=p[A],p[A]=de}return p.length=b,p}var b9=Upe(function(p){var b=[];return p.charCodeAt(0)===46&&b.push(""),p.replace(ny,function(A,N,q,re){b.push(q?re.replace(kt,"$1"):N||A)}),b});function Du(p){if(typeof p=="string"||xs(p))return p;var b=p+"";return b=="0"&&1/p==-Se?"-0":b}function Wd(p){if(p!=null){try{return Ie.call(p)}catch{}try{return p+""}catch{}}return""}function Ype(p,b){return je(B,function(A){var N="_."+A[0];b&A[1]&&!ei(p,N)&&p.push(N)}),p.sort()}function _9(p){if(p instanceof Fn)return p.clone();var b=new Qs(p.__wrapped__,p.__chain__);return b.__actions__=Ra(p.__actions__),b.__index__=p.__index__,b.__values__=p.__values__,b}function Kpe(p,b,A){(A?ca(p,b,A):b===n)?b=1:b=Yi(dn(b),0);var N=p==null?0:p.length;if(!N||b<1)return[];for(var q=0,re=0,de=Be(fw(N/b));q<N;)de[re++]=tl(p,q,q+=b);return de}function Xpe(p){for(var b=-1,A=p==null?0:p.length,N=0,q=[];++b<A;){var re=p[b];re&&(q[N++]=re)}return q}function Jpe(){var p=arguments.length;if(!p)return[];for(var b=Be(p-1),A=arguments[0],N=p;N--;)b[N-1]=arguments[N];return On(hn(A)?Ra(A):[A],po(b,1))}var Zpe=xn(function(p,b){return Ei(p)?wy(p,po(b,1,Ei,!0)):[]}),Qpe=xn(function(p,b){var A=nl(b);return Ei(A)&&(A=n),Ei(p)?wy(p,po(b,1,Ei,!0),Ht(A,2)):[]}),ege=xn(function(p,b){var A=nl(b);return Ei(A)&&(A=n),Ei(p)?wy(p,po(b,1,Ei,!0),n,A):[]});function tge(p,b,A){var N=p==null?0:p.length;return N?(b=A||b===n?1:dn(b),tl(p,b<0?0:b,N)):[]}function nge(p,b,A){var N=p==null?0:p.length;return N?(b=A||b===n?1:dn(b),b=N-b,tl(p,0,b<0?0:b)):[]}function rge(p,b){return p&&p.length?Sw(p,Ht(b,3),!0,!0):[]}function ige(p,b){return p&&p.length?Sw(p,Ht(b,3),!0):[]}function oge(p,b,A,N){var q=p==null?0:p.length;return q?(A&&typeof A!="number"&&ca(p,b,A)&&(A=0,N=q),Jde(p,b,A,N)):[]}function S9(p,b,A){var N=p==null?0:p.length;if(!N)return-1;var q=A==null?0:dn(A);return q<0&&(q=Yi(N+q,0)),Xs(p,Ht(b,3),q)}function w9(p,b,A){var N=p==null?0:p.length;if(!N)return-1;var q=N-1;return A!==n&&(q=dn(A),q=A<0?Yi(N+q,0):No(q,N-1)),Xs(p,Ht(b,3),q,!0)}function x9(p){var b=p==null?0:p.length;return b?po(p,1):[]}function age(p){var b=p==null?0:p.length;return b?po(p,Se):[]}function sge(p,b){var A=p==null?0:p.length;return A?(b=b===n?1:dn(b),po(p,b)):[]}function lge(p){for(var b=-1,A=p==null?0:p.length,N={};++b<A;){var q=p[b];N[q[0]]=q[1]}return N}function C9(p){return p&&p.length?p[0]:n}function uge(p,b,A){var N=p==null?0:p.length;if(!N)return-1;var q=A==null?0:dn(A);return q<0&&(q=Yi(N+q,0)),Da(p,b,q)}function cge(p){var b=p==null?0:p.length;return b?tl(p,0,-1):[]}var fge=xn(function(p){var b=kn(p,jP);return b.length&&b[0]===p[0]?$P(b):[]}),hge=xn(function(p){var b=nl(p),A=kn(p,jP);return b===nl(A)?b=n:A.pop(),A.length&&A[0]===p[0]?$P(A,Ht(b,2)):[]}),dge=xn(function(p){var b=nl(p),A=kn(p,jP);return b=typeof b=="function"?b:n,b&&A.pop(),A.length&&A[0]===p[0]?$P(A,n,b):[]});function pge(p,b){return p==null?"":cde.call(p,b)}function nl(p){var b=p==null?0:p.length;return b?p[b-1]:n}function gge(p,b,A){var N=p==null?0:p.length;if(!N)return-1;var q=N;return A!==n&&(q=dn(A),q=q<0?Yi(N+q,0):No(q,N-1)),b===b?SP(p,b,q):Xs(p,Ul,q,!0)}function mge(p,b){return p&&p.length?M6(p,dn(b)):n}var vge=xn(k9);function k9(p,b){return p&&p.length&&b&&b.length?NP(p,b):p}function yge(p,b,A){return p&&p.length&&b&&b.length?NP(p,b,Ht(A,2)):p}function bge(p,b,A){return p&&p.length&&b&&b.length?NP(p,b,n,A):p}var _ge=Fc(function(p,b){var A=p==null?0:p.length,N=EP(p,b);return R6(p,kn(b,function(q){return Rc(q,A)?+q:q}).sort(Y6)),N});function Sge(p,b){var A=[];if(!(p&&p.length))return A;var N=-1,q=[],re=p.length;for(b=Ht(b,3);++N<re;){var de=p[N];b(de,N,p)&&(A.push(de),q.push(N))}return R6(p,q),A}function nO(p){return p==null?p:pde.call(p)}function wge(p,b,A){var N=p==null?0:p.length;return N?(A&&typeof A!="number"&&ca(p,b,A)?(b=0,A=N):(b=b==null?0:dn(b),A=A===n?N:dn(A)),tl(p,b,A)):[]}function xge(p,b){return _w(p,b)}function Cge(p,b,A){return VP(p,b,Ht(A,2))}function kge(p,b){var A=p==null?0:p.length;if(A){var N=_w(p,b);if(N<A&&Gl(p[N],b))return N}return-1}function Tge(p,b){return _w(p,b,!0)}function Age(p,b,A){return VP(p,b,Ht(A,2),!0)}function Ege(p,b){var A=p==null?0:p.length;if(A){var N=_w(p,b,!0)-1;if(Gl(p[N],b))return N}return-1}function Pge(p){return p&&p.length?B6(p):[]}function Oge(p,b){return p&&p.length?B6(p,Ht(b,2)):[]}function Ige(p){var b=p==null?0:p.length;return b?tl(p,1,b):[]}function $ge(p,b,A){return p&&p.length?(b=A||b===n?1:dn(b),tl(p,0,b<0?0:b)):[]}function Lge(p,b,A){var N=p==null?0:p.length;return N?(b=A||b===n?1:dn(b),b=N-b,tl(p,b<0?0:b,N)):[]}function Dge(p,b){return p&&p.length?Sw(p,Ht(b,3),!1,!0):[]}function Mge(p,b){return p&&p.length?Sw(p,Ht(b,3)):[]}var Nge=xn(function(p){return Wf(po(p,1,Ei,!0))}),Fge=xn(function(p){var b=nl(p);return Ei(b)&&(b=n),Wf(po(p,1,Ei,!0),Ht(b,2))}),Rge=xn(function(p){var b=nl(p);return b=typeof b=="function"?b:n,Wf(po(p,1,Ei,!0),n,b)});function Vge(p){return p&&p.length?Wf(p):[]}function Bge(p,b){return p&&p.length?Wf(p,Ht(b,2)):[]}function zge(p,b){return b=typeof b=="function"?b:n,p&&p.length?Wf(p,n,b):[]}function rO(p){if(!(p&&p.length))return[];var b=0;return p=vt(p,function(A){if(Ei(A))return b=Yi(A.length,b),!0}),Wl(b,function(A){return kn(p,Js(A))})}function T9(p,b){if(!(p&&p.length))return[];var A=rO(p);return b==null?A:kn(A,function(N){return Ye(b,n,N)})}var jge=xn(function(p,b){return Ei(p)?wy(p,b):[]}),Uge=xn(function(p){return zP(vt(p,Ei))}),Wge=xn(function(p){var b=nl(p);return Ei(b)&&(b=n),zP(vt(p,Ei),Ht(b,2))}),Hge=xn(function(p){var b=nl(p);return b=typeof b=="function"?b:n,zP(vt(p,Ei),n,b)}),Gge=xn(rO);function qge(p,b){return W6(p||[],b||[],Sy)}function Yge(p,b){return W6(p||[],b||[],ky)}var Kge=xn(function(p){var b=p.length,A=b>1?p[b-1]:n;return A=typeof A=="function"?(p.pop(),A):n,T9(p,A)});function A9(p){var b=Z(p);return b.__chain__=!0,b}function Xge(p,b){return b(p),p}function Ow(p,b){return b(p)}var Jge=Fc(function(p){var b=p.length,A=b?p[0]:0,N=this.__wrapped__,q=function(re){return EP(re,p)};return b>1||this.__actions__.length||!(N instanceof Fn)||!Rc(A)?this.thru(q):(N=N.slice(A,+A+(b?1:0)),N.__actions__.push({func:Ow,args:[q],thisArg:n}),new Qs(N,this.__chain__).thru(function(re){return b&&!re.length&&re.push(n),re}))});function Zge(){return A9(this)}function Qge(){return new Qs(this.value(),this.__chain__)}function eme(){this.__values__===n&&(this.__values__=z9(this.value()));var p=this.__index__>=this.__values__.length,b=p?n:this.__values__[this.__index__++];return{done:p,value:b}}function tme(){return this}function nme(p){for(var b,A=this;A instanceof gw;){var N=_9(A);N.__index__=0,N.__values__=n,b?q.__wrapped__=N:b=N;var q=N;A=A.__wrapped__}return q.__wrapped__=p,b}function rme(){var p=this.__wrapped__;if(p instanceof Fn){var b=p;return this.__actions__.length&&(b=new Fn(this)),b=b.reverse(),b.__actions__.push({func:Ow,args:[nO],thisArg:n}),new Qs(b,this.__chain__)}return this.thru(nO)}function ime(){return U6(this.__wrapped__,this.__actions__)}var ome=ww(function(p,b,A){Ve.call(p,A)?++p[A]:Mc(p,A,1)});function ame(p,b,A){var N=hn(p)?nn:Xde;return A&&ca(p,b,A)&&(b=n),N(p,Ht(b,3))}function sme(p,b){var A=hn(p)?vt:T6;return A(p,Ht(b,3))}var lme=e9(S9),ume=e9(w9);function cme(p,b){return po(Iw(p,b),1)}function fme(p,b){return po(Iw(p,b),Se)}function hme(p,b,A){return A=A===n?1:dn(A),po(Iw(p,b),A)}function E9(p,b){var A=hn(p)?je:Uf;return A(p,Ht(b,3))}function P9(p,b){var A=hn(p)?Ot:k6;return A(p,Ht(b,3))}var dme=ww(function(p,b,A){Ve.call(p,A)?p[A].push(b):Mc(p,A,[b])});function pme(p,b,A,N){p=Va(p)?p:ym(p),A=A&&!N?dn(A):0;var q=p.length;return A<0&&(A=Yi(q+A,0)),Nw(p)?A<=q&&p.indexOf(b,A)>-1:!!q&&Da(p,b,A)>-1}var gme=xn(function(p,b,A){var N=-1,q=typeof b=="function",re=Va(p)?Be(p.length):[];return Uf(p,function(de){re[++N]=q?Ye(b,de,A):xy(de,b,A)}),re}),mme=ww(function(p,b,A){Mc(p,A,b)});function Iw(p,b){var A=hn(p)?kn:$6;return A(p,Ht(b,3))}function vme(p,b,A,N){return p==null?[]:(hn(b)||(b=b==null?[]:[b]),A=N?n:A,hn(A)||(A=A==null?[]:[A]),N6(p,b,A))}var yme=ww(function(p,b,A){p[A?0:1].push(b)},function(){return[[],[]]});function bme(p,b,A){var N=hn(p)?Jt:Ou,q=arguments.length<3;return N(p,Ht(b,4),A,q,Uf)}function _me(p,b,A){var N=hn(p)?Io:Ou,q=arguments.length<3;return N(p,Ht(b,4),A,q,k6)}function Sme(p,b){var A=hn(p)?vt:T6;return A(p,Dw(Ht(b,3)))}function wme(p){var b=hn(p)?S6:ppe;return b(p)}function xme(p,b,A){(A?ca(p,b,A):b===n)?b=1:b=dn(b);var N=hn(p)?Hde:gpe;return N(p,b)}function Cme(p){var b=hn(p)?Gde:vpe;return b(p)}function kme(p){if(p==null)return 0;if(Va(p))return Nw(p)?Kn(p):p.length;var b=Fo(p);return b==O||b==De?p.size:DP(p).length}function Tme(p,b,A){var N=hn(p)?In:ype;return A&&ca(p,b,A)&&(b=n),N(p,Ht(b,3))}var Ame=xn(function(p,b){if(p==null)return[];var A=b.length;return A>1&&ca(p,b[0],b[1])?b=[]:A>2&&ca(b[0],b[1],b[2])&&(b=[b[0]]),N6(p,po(b,1),[])}),$w=sde||function(){return Gi.Date.now()};function Eme(p,b){if(typeof b!="function")throw new Fa(a);return p=dn(p),function(){if(--p<1)return b.apply(this,arguments)}}function O9(p,b,A){return b=A?n:b,b=p&&b==null?p.length:b,Nc(p,T,n,n,n,n,b)}function I9(p,b){var A;if(typeof b!="function")throw new Fa(a);return p=dn(p),function(){return--p>0&&(A=b.apply(this,arguments)),p<=1&&(b=n),A}}var iO=xn(function(p,b,A){var N=_;if(A.length){var q=io(A,mm(iO));N|=x}return Nc(p,N,b,A,q)}),$9=xn(function(p,b,A){var N=_|v;if(A.length){var q=io(A,mm($9));N|=x}return Nc(b,N,p,A,q)});function L9(p,b,A){b=A?n:b;var N=Nc(p,C,n,n,n,n,n,b);return N.placeholder=L9.placeholder,N}function D9(p,b,A){b=A?n:b;var N=Nc(p,k,n,n,n,n,n,b);return N.placeholder=D9.placeholder,N}function M9(p,b,A){var N,q,re,de,ke,$e,Ke=0,Je=!1,it=!1,ht=!0;if(typeof p!="function")throw new Fa(a);b=rl(b)||0,si(A)&&(Je=!!A.leading,it="maxWait"in A,re=it?Yi(rl(A.maxWait)||0,b):re,ht="trailing"in A?!!A.trailing:ht);function At(Pi){var ql=N,zc=q;return N=q=n,Ke=Pi,de=p.apply(zc,ql),de}function Gt(Pi){return Ke=Pi,ke=Ey($n,b),Je?At(Pi):de}function yn(Pi){var ql=Pi-$e,zc=Pi-Ke,e7=b-ql;return it?No(e7,re-zc):e7}function qt(Pi){var ql=Pi-$e,zc=Pi-Ke;return $e===n||ql>=b||ql<0||it&&zc>=re}function $n(){var Pi=$w();if(qt(Pi))return Un(Pi);ke=Ey($n,yn(Pi))}function Un(Pi){return ke=n,ht&&N?At(Pi):(N=q=n,de)}function Cs(){ke!==n&&H6(ke),Ke=0,N=$e=q=ke=n}function fa(){return ke===n?de:Un($w())}function ks(){var Pi=$w(),ql=qt(Pi);if(N=arguments,q=this,$e=Pi,ql){if(ke===n)return Gt($e);if(it)return H6(ke),ke=Ey($n,b),At($e)}return ke===n&&(ke=Ey($n,b)),de}return ks.cancel=Cs,ks.flush=fa,ks}var Pme=xn(function(p,b){return C6(p,1,b)}),Ome=xn(function(p,b,A){return C6(p,rl(b)||0,A)});function Ime(p){return Nc(p,I)}function Lw(p,b){if(typeof p!="function"||b!=null&&typeof b!="function")throw new Fa(a);var A=function(){var N=arguments,q=b?b.apply(this,N):N[0],re=A.cache;if(re.has(q))return re.get(q);var de=p.apply(this,N);return A.cache=re.set(q,de)||re,de};return A.cache=new(Lw.Cache||Dc),A}Lw.Cache=Dc;function Dw(p){if(typeof p!="function")throw new Fa(a);return function(){var b=arguments;switch(b.length){case 0:return!p.call(this);case 1:return!p.call(this,b[0]);case 2:return!p.call(this,b[0],b[1]);case 3:return!p.call(this,b[0],b[1],b[2])}return!p.apply(this,b)}}function $me(p){return I9(2,p)}var Lme=bpe(function(p,b){b=b.length==1&&hn(b[0])?kn(b[0],la(Ht())):kn(po(b,1),la(Ht()));var A=b.length;return xn(function(N){for(var q=-1,re=No(N.length,A);++q<re;)N[q]=b[q].call(this,N[q]);return Ye(p,this,N)})}),oO=xn(function(p,b){var A=io(b,mm(oO));return Nc(p,x,n,b,A)}),N9=xn(function(p,b){var A=io(b,mm(N9));return Nc(p,m,n,b,A)}),Dme=Fc(function(p,b){return Nc(p,P,n,n,n,b)});function Mme(p,b){if(typeof p!="function")throw new Fa(a);return b=b===n?b:dn(b),xn(p,b)}function Nme(p,b){if(typeof p!="function")throw new Fa(a);return b=b==null?0:Yi(dn(b),0),xn(function(A){var N=A[b],q=Gf(A,0,b);return N&&On(q,N),Ye(p,this,q)})}function Fme(p,b,A){var N=!0,q=!0;if(typeof p!="function")throw new Fa(a);return si(A)&&(N="leading"in A?!!A.leading:N,q="trailing"in A?!!A.trailing:q),M9(p,b,{leading:N,maxWait:b,trailing:q})}function Rme(p){return O9(p,1)}function Vme(p,b){return oO(UP(b),p)}function Bme(){if(!arguments.length)return[];var p=arguments[0];return hn(p)?p:[p]}function zme(p){return el(p,d)}function jme(p,b){return b=typeof b=="function"?b:n,el(p,d,b)}function Ume(p){return el(p,f|d)}function Wme(p,b){return b=typeof b=="function"?b:n,el(p,f|d,b)}function Hme(p,b){return b==null||x6(p,b,oo(b))}function Gl(p,b){return p===b||p!==p&&b!==b}var Gme=Tw(IP),qme=Tw(function(p,b){return p>=b}),Hd=P6(function(){return arguments}())?P6:function(p){return vi(p)&&Ve.call(p,"callee")&&!Ar.call(p,"callee")},hn=Be.isArray,Yme=G?la(G):npe;function Va(p){return p!=null&&Mw(p.length)&&!Vc(p)}function Ei(p){return vi(p)&&Va(p)}function Kme(p){return p===!0||p===!1||vi(p)&&ua(p)==ce}var qf=ude||mO,Xme=K?la(K):rpe;function Jme(p){return vi(p)&&p.nodeType===1&&!Py(p)}function Zme(p){if(p==null)return!0;if(Va(p)&&(hn(p)||typeof p=="string"||typeof p.splice=="function"||qf(p)||vm(p)||Hd(p)))return!p.length;var b=Fo(p);if(b==O||b==De)return!p.size;if(Ay(p))return!DP(p).length;for(var A in p)if(Ve.call(p,A))return!1;return!0}function Qme(p,b){return Cy(p,b)}function eve(p,b,A){A=typeof A=="function"?A:n;var N=A?A(p,b):n;return N===n?Cy(p,b,n,A):!!N}function aO(p){if(!vi(p))return!1;var b=ua(p);return b==ye||b==fe||typeof p.message=="string"&&typeof p.name=="string"&&!Py(p)}function tve(p){return typeof p=="number"&&v6(p)}function Vc(p){if(!si(p))return!1;var b=ua(p);return b==j||b==Y||b==te||b==ge}function F9(p){return typeof p=="number"&&p==dn(p)}function Mw(p){return typeof p=="number"&&p>-1&&p%1==0&&p<=Ae}function si(p){var b=typeof p;return p!=null&&(b=="object"||b=="function")}function vi(p){return p!=null&&typeof p=="object"}var R9=me?la(me):ope;function nve(p,b){return p===b||LP(p,b,XP(b))}function rve(p,b,A){return A=typeof A=="function"?A:n,LP(p,b,XP(b),A)}function ive(p){return V9(p)&&p!=+p}function ove(p){if(jpe(p))throw new Zt(o);return O6(p)}function ave(p){return p===null}function sve(p){return p==null}function V9(p){return typeof p=="number"||vi(p)&&ua(p)==F}function Py(p){if(!vi(p)||ua(p)!=Q)return!1;var b=Ai(p);if(b===null)return!0;var A=Ve.call(b,"constructor")&&b.constructor;return typeof A=="function"&&A instanceof A&&Ie.call(A)==Rt}var sO=he?la(he):ape;function lve(p){return F9(p)&&p>=-Ae&&p<=Ae}var B9=Le?la(Le):spe;function Nw(p){return typeof p=="string"||!hn(p)&&vi(p)&&ua(p)==tt}function xs(p){return typeof p=="symbol"||vi(p)&&ua(p)==Xe}var vm=ze?la(ze):lpe;function uve(p){return p===n}function cve(p){return vi(p)&&Fo(p)==Qe}function fve(p){return vi(p)&&ua(p)==pt}var hve=Tw(MP),dve=Tw(function(p,b){return p<=b});function z9(p){if(!p)return[];if(Va(p))return Nw(p)?Do(p):Ra(p);if(qi&&p[qi])return _P(p[qi]());var b=Fo(p),A=b==O?Md:b==De?Nd:ym;return A(p)}function Bc(p){if(!p)return p===0?p:0;if(p=rl(p),p===Se||p===-Se){var b=p<0?-1:1;return b*Ee}return p===p?p:0}function dn(p){var b=Bc(p),A=b%1;return b===b?A?b-A:b:0}function j9(p){return p?zd(dn(p),0,se):0}function rl(p){if(typeof p=="number")return p;if(xs(p))return _e;if(si(p)){var b=typeof p.valueOf=="function"?p.valueOf():p;p=si(b)?b+"":b}if(typeof p!="string")return p===0?p:+p;p=um(p);var A=vn.test(p);return A||Nr.test(p)?hy(p.slice(2),A?2:8):Mr.test(p)?_e:+p}function U9(p){return Lu(p,Ba(p))}function pve(p){return p?zd(dn(p),-Ae,Ae):p===0?p:0}function ur(p){return p==null?"":ws(p)}var gve=pm(function(p,b){if(Ay(b)||Va(b)){Lu(b,oo(b),p);return}for(var A in b)Ve.call(b,A)&&Sy(p,A,b[A])}),W9=pm(function(p,b){Lu(b,Ba(b),p)}),Fw=pm(function(p,b,A,N){Lu(b,Ba(b),p,N)}),mve=pm(function(p,b,A,N){Lu(b,oo(b),p,N)}),vve=Fc(EP);function yve(p,b){var A=dm(p);return b==null?A:w6(A,b)}var bve=xn(function(p,b){p=tr(p);var A=-1,N=b.length,q=N>2?b[2]:n;for(q&&ca(b[0],b[1],q)&&(N=1);++A<N;)for(var re=b[A],de=Ba(re),ke=-1,$e=de.length;++ke<$e;){var Ke=de[ke],Je=p[Ke];(Je===n||Gl(Je,Te[Ke])&&!Ve.call(p,Ke))&&(p[Ke]=re[Ke])}return p}),_ve=xn(function(p){return p.push(n,s9),Ye(H9,n,p)});function Sve(p,b){return $o(p,Ht(b,3),$u)}function wve(p,b){return $o(p,Ht(b,3),OP)}function xve(p,b){return p==null?p:PP(p,Ht(b,3),Ba)}function Cve(p,b){return p==null?p:A6(p,Ht(b,3),Ba)}function kve(p,b){return p&&$u(p,Ht(b,3))}function Tve(p,b){return p&&OP(p,Ht(b,3))}function Ave(p){return p==null?[]:yw(p,oo(p))}function Eve(p){return p==null?[]:yw(p,Ba(p))}function lO(p,b,A){var N=p==null?n:jd(p,b);return N===n?A:N}function Pve(p,b){return p!=null&&c9(p,b,Zde)}function uO(p,b){return p!=null&&c9(p,b,Qde)}var Ove=n9(function(p,b,A){b!=null&&typeof b.toString!="function"&&(b=ct.call(b)),p[b]=A},fO(za)),Ive=n9(function(p,b,A){b!=null&&typeof b.toString!="function"&&(b=ct.call(b)),Ve.call(p,b)?p[b].push(A):p[b]=[A]},Ht),$ve=xn(xy);function oo(p){return Va(p)?_6(p):DP(p)}function Ba(p){return Va(p)?_6(p,!0):upe(p)}function Lve(p,b){var A={};return b=Ht(b,3),$u(p,function(N,q,re){Mc(A,b(N,q,re),N)}),A}function Dve(p,b){var A={};return b=Ht(b,3),$u(p,function(N,q,re){Mc(A,q,b(N,q,re))}),A}var Mve=pm(function(p,b,A){bw(p,b,A)}),H9=pm(function(p,b,A,N){bw(p,b,A,N)}),Nve=Fc(function(p,b){var A={};if(p==null)return A;var N=!1;b=kn(b,function(re){return re=Hf(re,p),N||(N=re.length>1),re}),Lu(p,YP(p),A),N&&(A=el(A,f|h|d,Ope));for(var q=b.length;q--;)BP(A,b[q]);return A});function Fve(p,b){return G9(p,Dw(Ht(b)))}var Rve=Fc(function(p,b){return p==null?{}:fpe(p,b)});function G9(p,b){if(p==null)return{};var A=kn(YP(p),function(N){return[N]});return b=Ht(b),F6(p,A,function(N,q){return b(N,q[0])})}function Vve(p,b,A){b=Hf(b,p);var N=-1,q=b.length;for(q||(q=1,p=n);++N<q;){var re=p==null?n:p[Du(b[N])];re===n&&(N=q,re=A),p=Vc(re)?re.call(p):re}return p}function Bve(p,b,A){return p==null?p:ky(p,b,A)}function zve(p,b,A,N){return N=typeof N=="function"?N:n,p==null?p:ky(p,b,A,N)}var q9=o9(oo),Y9=o9(Ba);function jve(p,b,A){var N=hn(p),q=N||qf(p)||vm(p);if(b=Ht(b,4),A==null){var re=p&&p.constructor;q?A=N?new re:[]:si(p)?A=Vc(re)?dm(Ai(p)):{}:A={}}return(q?je:$u)(p,function(de,ke,$e){return b(A,de,ke,$e)}),A}function Uve(p,b){return p==null?!0:BP(p,b)}function Wve(p,b,A){return p==null?p:j6(p,b,UP(A))}function Hve(p,b,A,N){return N=typeof N=="function"?N:n,p==null?p:j6(p,b,UP(A),N)}function ym(p){return p==null?[]:Bf(p,oo(p))}function Gve(p){return p==null?[]:Bf(p,Ba(p))}function qve(p,b,A){return A===n&&(A=b,b=n),A!==n&&(A=rl(A),A=A===A?A:0),b!==n&&(b=rl(b),b=b===b?b:0),zd(rl(p),b,A)}function Yve(p,b,A){return b=Bc(b),A===n?(A=b,b=0):A=Bc(A),p=rl(p),epe(p,b,A)}function Kve(p,b,A){if(A&&typeof A!="boolean"&&ca(p,b,A)&&(b=A=n),A===n&&(typeof b=="boolean"?(A=b,b=n):typeof p=="boolean"&&(A=p,p=n)),p===n&&b===n?(p=0,b=1):(p=Bc(p),b===n?(b=p,p=0):b=Bc(b)),p>b){var N=p;p=b,b=N}if(A||p%1||b%1){var q=y6();return No(p+q*(b-p+rw("1e-"+((q+"").length-1))),b)}return FP(p,b)}var Xve=gm(function(p,b,A){return b=b.toLowerCase(),p+(A?K9(b):b)});function K9(p){return cO(ur(p).toLowerCase())}function X9(p){return p=ur(p),p&&p.replace(hr,vP).replace(fP,"")}function Jve(p,b,A){p=ur(p),b=ws(b);var N=p.length;A=A===n?N:zd(dn(A),0,N);var q=A;return A-=b.length,A>=0&&p.slice(A,q)==b}function Zve(p){return p=ur(p),p&&Au.test(p)?p.replace(bs,cm):p}function Qve(p){return p=ur(p),p&&ry.test(p)?p.replace(Pc,"\\$&"):p}var e0e=gm(function(p,b,A){return p+(A?"-":"")+b.toLowerCase()}),t0e=gm(function(p,b,A){return p+(A?" ":"")+b.toLowerCase()}),n0e=Q6("toLowerCase");function r0e(p,b,A){p=ur(p),b=dn(b);var N=b?Kn(p):0;if(!b||N>=b)return p;var q=(b-N)/2;return kw(hw(q),A)+p+kw(fw(q),A)}function i0e(p,b,A){p=ur(p),b=dn(b);var N=b?Kn(p):0;return b&&N<b?p+kw(b-N,A):p}function o0e(p,b,A){p=ur(p),b=dn(b);var N=b?Kn(p):0;return b&&N<b?kw(b-N,A)+p:p}function a0e(p,b,A){return A||b==null?b=0:b&&(b=+b),dde(ur(p).replace(Ff,""),b||0)}function s0e(p,b,A){return(A?ca(p,b,A):b===n)?b=1:b=dn(b),RP(ur(p),b)}function l0e(){var p=arguments,b=ur(p[0]);return p.length<3?b:b.replace(p[1],p[2])}var u0e=gm(function(p,b,A){return p+(A?"_":"")+b.toLowerCase()});function c0e(p,b,A){return A&&typeof A!="number"&&ca(p,b,A)&&(b=A=n),A=A===n?se:A>>>0,A?(p=ur(p),p&&(typeof b=="string"||b!=null&&!sO(b))&&(b=ws(b),!b&&zf(p))?Gf(Do(p),0,A):p.split(b,A)):[]}var f0e=gm(function(p,b,A){return p+(A?" ":"")+cO(b)});function h0e(p,b,A){return p=ur(p),A=A==null?0:zd(dn(A),0,p.length),b=ws(b),p.slice(A,A+b.length)==b}function d0e(p,b,A){var N=Z.templateSettings;A&&ca(p,b,A)&&(b=n),p=ur(p),b=Fw({},b,N,a9);var q=Fw({},b.imports,N.imports,a9),re=oo(q),de=Bf(q,re),ke,$e,Ke=0,Je=b.interpolate||mr,it="__p += '",ht=Fd((b.escape||mr).source+"|"+Je.source+"|"+(Je===Ec?wn:mr).source+"|"+(b.evaluate||mr).source+"|$","g"),At="//# sourceURL="+(Ve.call(b,"sourceURL")?(b.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++nw+"]")+`
`;p.replace(ht,function(qt,$n,Un,Cs,fa,ks){return Un||(Un=Cs),it+=p.slice(Ke,ks).replace(vr,yP),$n&&(ke=!0,it+=`' +
__e(`+$n+`) +
'`),fa&&($e=!0,it+=`';
`+fa+`;
__p += '`),Un&&(it+=`' +
((__t = (`+Un+`)) == null ? '' : __t) +
'`),Ke=ks+qt.length,qt}),it+=`';
`;var Gt=Ve.call(b,"variable")&&b.variable;if(!Gt)it=`with (obj) {
`+it+`
}
`;else if(xt.test(Gt))throw new Zt(s);it=($e?it.replace(Oa,""):it).replace(Mf,"$1").replace(Ac,"$1;"),it="function("+(Gt||"obj")+`) {
`+(Gt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ke?", __e = _.escape":"")+($e?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+it+`return __p
}`;var yn=Z9(function(){return jn(re,At+"return "+it).apply(n,de)});if(yn.source=it,aO(yn))throw yn;return yn}function p0e(p){return ur(p).toLowerCase()}function g0e(p){return ur(p).toUpperCase()}function m0e(p,b,A){if(p=ur(p),p&&(A||b===n))return um(p);if(!p||!(b=ws(b)))return p;var N=Do(p),q=Do(b),re=py(N,q),de=aw(N,q)+1;return Gf(N,re,de).join("")}function v0e(p,b,A){if(p=ur(p),p&&(A||b===n))return p.slice(0,Ma(p)+1);if(!p||!(b=ws(b)))return p;var N=Do(p),q=aw(N,Do(b))+1;return Gf(N,0,q).join("")}function y0e(p,b,A){if(p=ur(p),p&&(A||b===n))return p.replace(Ff,"");if(!p||!(b=ws(b)))return p;var N=Do(p),q=py(N,Do(b));return Gf(N,q).join("")}function b0e(p,b){var A=M,N=L;if(si(b)){var q="separator"in b?b.separator:q;A="length"in b?dn(b.length):A,N="omission"in b?ws(b.omission):N}p=ur(p);var re=p.length;if(zf(p)){var de=Do(p);re=de.length}if(A>=re)return p;var ke=A-Kn(N);if(ke<1)return N;var $e=de?Gf(de,0,ke).join(""):p.slice(0,ke);if(q===n)return $e+N;if(de&&(ke+=$e.length-ke),sO(q)){if(p.slice(ke).search(q)){var Ke,Je=$e;for(q.global||(q=Fd(q.source,ur(sr.exec(q))+"g")),q.lastIndex=0;Ke=q.exec(Je);)var it=Ke.index;$e=$e.slice(0,it===n?ke:it)}}else if(p.indexOf(ws(q),ke)!=ke){var ht=$e.lastIndexOf(q);ht>-1&&($e=$e.slice(0,ht))}return $e+N}function _0e(p){return p=ur(p),p&&Wi.test(p)?p.replace(Tu,Na):p}var S0e=gm(function(p,b,A){return p+(A?" ":"")+b.toUpperCase()}),cO=Q6("toUpperCase");function J9(p,b,A){return p=ur(p),b=A?n:b,b===n?Dd(p)?wP(p):sm(p):p.match(b)||[]}var Z9=xn(function(p,b){try{return Ye(p,n,b)}catch(A){return aO(A)?A:new Zt(A)}}),w0e=Fc(function(p,b){return je(b,function(A){A=Du(A),Mc(p,A,iO(p[A],p))}),p});function x0e(p){var b=p==null?0:p.length,A=Ht();return p=b?kn(p,function(N){if(typeof N[1]!="function")throw new Fa(a);return[A(N[0]),N[1]]}):[],xn(function(N){for(var q=-1;++q<b;){var re=p[q];if(Ye(re[0],this,N))return Ye(re[1],this,N)}})}function C0e(p){return Kde(el(p,f))}function fO(p){return function(){return p}}function k0e(p,b){return p==null||p!==p?b:p}var T0e=t9(),A0e=t9(!0);function za(p){return p}function hO(p){return I6(typeof p=="function"?p:el(p,f))}function E0e(p){return L6(el(p,f))}function P0e(p,b){return D6(p,el(b,f))}var O0e=xn(function(p,b){return function(A){return xy(A,p,b)}}),I0e=xn(function(p,b){return function(A){return xy(p,A,b)}});function dO(p,b,A){var N=oo(b),q=yw(b,N);A==null&&!(si(b)&&(q.length||!N.length))&&(A=b,b=p,p=this,q=yw(b,oo(b)));var re=!(si(A)&&"chain"in A)||!!A.chain,de=Vc(p);return je(q,function(ke){var $e=b[ke];p[ke]=$e,de&&(p.prototype[ke]=function(){var Ke=this.__chain__;if(re||Ke){var Je=p(this.__wrapped__),it=Je.__actions__=Ra(this.__actions__);return it.push({func:$e,args:arguments,thisArg:p}),Je.__chain__=Ke,Je}return $e.apply(p,On([this.value()],arguments))})}),p}function $0e(){return Gi._===this&&(Gi._=Dt),this}function pO(){}function L0e(p){return p=dn(p),xn(function(b){return M6(b,p)})}var D0e=HP(kn),M0e=HP(nn),N0e=HP(In);function Q9(p){return ZP(p)?Js(Du(p)):hpe(p)}function F0e(p){return function(b){return p==null?n:jd(p,b)}}var R0e=r9(),V0e=r9(!0);function gO(){return[]}function mO(){return!1}function B0e(){return{}}function z0e(){return""}function j0e(){return!0}function U0e(p,b){if(p=dn(p),p<1||p>Ae)return[];var A=se,N=No(p,se);b=Ht(b),p-=se;for(var q=Wl(N,b);++A<p;)b(A);return q}function W0e(p){return hn(p)?kn(p,Du):xs(p)?[p]:Ra(b9(ur(p)))}function H0e(p){var b=++nt;return ur(p)+b}var G0e=Cw(function(p,b){return p+b},0),q0e=GP("ceil"),Y0e=Cw(function(p,b){return p/b},1),K0e=GP("floor");function X0e(p){return p&&p.length?vw(p,za,IP):n}function J0e(p,b){return p&&p.length?vw(p,Ht(b,2),IP):n}function Z0e(p){return sa(p,za)}function Q0e(p,b){return sa(p,Ht(b,2))}function eye(p){return p&&p.length?vw(p,za,MP):n}function tye(p,b){return p&&p.length?vw(p,Ht(b,2),MP):n}var nye=Cw(function(p,b){return p*b},1),rye=GP("round"),iye=Cw(function(p,b){return p-b},0);function oye(p){return p&&p.length?Yn(p,za):0}function aye(p,b){return p&&p.length?Yn(p,Ht(b,2)):0}return Z.after=Eme,Z.ary=O9,Z.assign=gve,Z.assignIn=W9,Z.assignInWith=Fw,Z.assignWith=mve,Z.at=vve,Z.before=I9,Z.bind=iO,Z.bindAll=w0e,Z.bindKey=$9,Z.castArray=Bme,Z.chain=A9,Z.chunk=Kpe,Z.compact=Xpe,Z.concat=Jpe,Z.cond=x0e,Z.conforms=C0e,Z.constant=fO,Z.countBy=ome,Z.create=yve,Z.curry=L9,Z.curryRight=D9,Z.debounce=M9,Z.defaults=bve,Z.defaultsDeep=_ve,Z.defer=Pme,Z.delay=Ome,Z.difference=Zpe,Z.differenceBy=Qpe,Z.differenceWith=ege,Z.drop=tge,Z.dropRight=nge,Z.dropRightWhile=rge,Z.dropWhile=ige,Z.fill=oge,Z.filter=sme,Z.flatMap=cme,Z.flatMapDeep=fme,Z.flatMapDepth=hme,Z.flatten=x9,Z.flattenDeep=age,Z.flattenDepth=sge,Z.flip=Ime,Z.flow=T0e,Z.flowRight=A0e,Z.fromPairs=lge,Z.functions=Ave,Z.functionsIn=Eve,Z.groupBy=dme,Z.initial=cge,Z.intersection=fge,Z.intersectionBy=hge,Z.intersectionWith=dge,Z.invert=Ove,Z.invertBy=Ive,Z.invokeMap=gme,Z.iteratee=hO,Z.keyBy=mme,Z.keys=oo,Z.keysIn=Ba,Z.map=Iw,Z.mapKeys=Lve,Z.mapValues=Dve,Z.matches=E0e,Z.matchesProperty=P0e,Z.memoize=Lw,Z.merge=Mve,Z.mergeWith=H9,Z.method=O0e,Z.methodOf=I0e,Z.mixin=dO,Z.negate=Dw,Z.nthArg=L0e,Z.omit=Nve,Z.omitBy=Fve,Z.once=$me,Z.orderBy=vme,Z.over=D0e,Z.overArgs=Lme,Z.overEvery=M0e,Z.overSome=N0e,Z.partial=oO,Z.partialRight=N9,Z.partition=yme,Z.pick=Rve,Z.pickBy=G9,Z.property=Q9,Z.propertyOf=F0e,Z.pull=vge,Z.pullAll=k9,Z.pullAllBy=yge,Z.pullAllWith=bge,Z.pullAt=_ge,Z.range=R0e,Z.rangeRight=V0e,Z.rearg=Dme,Z.reject=Sme,Z.remove=Sge,Z.rest=Mme,Z.reverse=nO,Z.sampleSize=xme,Z.set=Bve,Z.setWith=zve,Z.shuffle=Cme,Z.slice=wge,Z.sortBy=Ame,Z.sortedUniq=Pge,Z.sortedUniqBy=Oge,Z.split=c0e,Z.spread=Nme,Z.tail=Ige,Z.take=$ge,Z.takeRight=Lge,Z.takeRightWhile=Dge,Z.takeWhile=Mge,Z.tap=Xge,Z.throttle=Fme,Z.thru=Ow,Z.toArray=z9,Z.toPairs=q9,Z.toPairsIn=Y9,Z.toPath=W0e,Z.toPlainObject=U9,Z.transform=jve,Z.unary=Rme,Z.union=Nge,Z.unionBy=Fge,Z.unionWith=Rge,Z.uniq=Vge,Z.uniqBy=Bge,Z.uniqWith=zge,Z.unset=Uve,Z.unzip=rO,Z.unzipWith=T9,Z.update=Wve,Z.updateWith=Hve,Z.values=ym,Z.valuesIn=Gve,Z.without=jge,Z.words=J9,Z.wrap=Vme,Z.xor=Uge,Z.xorBy=Wge,Z.xorWith=Hge,Z.zip=Gge,Z.zipObject=qge,Z.zipObjectDeep=Yge,Z.zipWith=Kge,Z.entries=q9,Z.entriesIn=Y9,Z.extend=W9,Z.extendWith=Fw,dO(Z,Z),Z.add=G0e,Z.attempt=Z9,Z.camelCase=Xve,Z.capitalize=K9,Z.ceil=q0e,Z.clamp=qve,Z.clone=zme,Z.cloneDeep=Ume,Z.cloneDeepWith=Wme,Z.cloneWith=jme,Z.conformsTo=Hme,Z.deburr=X9,Z.defaultTo=k0e,Z.divide=Y0e,Z.endsWith=Jve,Z.eq=Gl,Z.escape=Zve,Z.escapeRegExp=Qve,Z.every=ame,Z.find=lme,Z.findIndex=S9,Z.findKey=Sve,Z.findLast=ume,Z.findLastIndex=w9,Z.findLastKey=wve,Z.floor=K0e,Z.forEach=E9,Z.forEachRight=P9,Z.forIn=xve,Z.forInRight=Cve,Z.forOwn=kve,Z.forOwnRight=Tve,Z.get=lO,Z.gt=Gme,Z.gte=qme,Z.has=Pve,Z.hasIn=uO,Z.head=C9,Z.identity=za,Z.includes=pme,Z.indexOf=uge,Z.inRange=Yve,Z.invoke=$ve,Z.isArguments=Hd,Z.isArray=hn,Z.isArrayBuffer=Yme,Z.isArrayLike=Va,Z.isArrayLikeObject=Ei,Z.isBoolean=Kme,Z.isBuffer=qf,Z.isDate=Xme,Z.isElement=Jme,Z.isEmpty=Zme,Z.isEqual=Qme,Z.isEqualWith=eve,Z.isError=aO,Z.isFinite=tve,Z.isFunction=Vc,Z.isInteger=F9,Z.isLength=Mw,Z.isMap=R9,Z.isMatch=nve,Z.isMatchWith=rve,Z.isNaN=ive,Z.isNative=ove,Z.isNil=sve,Z.isNull=ave,Z.isNumber=V9,Z.isObject=si,Z.isObjectLike=vi,Z.isPlainObject=Py,Z.isRegExp=sO,Z.isSafeInteger=lve,Z.isSet=B9,Z.isString=Nw,Z.isSymbol=xs,Z.isTypedArray=vm,Z.isUndefined=uve,Z.isWeakMap=cve,Z.isWeakSet=fve,Z.join=pge,Z.kebabCase=e0e,Z.last=nl,Z.lastIndexOf=gge,Z.lowerCase=t0e,Z.lowerFirst=n0e,Z.lt=hve,Z.lte=dve,Z.max=X0e,Z.maxBy=J0e,Z.mean=Z0e,Z.meanBy=Q0e,Z.min=eye,Z.minBy=tye,Z.stubArray=gO,Z.stubFalse=mO,Z.stubObject=B0e,Z.stubString=z0e,Z.stubTrue=j0e,Z.multiply=nye,Z.nth=mge,Z.noConflict=$0e,Z.noop=pO,Z.now=$w,Z.pad=r0e,Z.padEnd=i0e,Z.padStart=o0e,Z.parseInt=a0e,Z.random=Kve,Z.reduce=bme,Z.reduceRight=_me,Z.repeat=s0e,Z.replace=l0e,Z.result=Vve,Z.round=rye,Z.runInContext=Pe,Z.sample=wme,Z.size=kme,Z.snakeCase=u0e,Z.some=Tme,Z.sortedIndex=xge,Z.sortedIndexBy=Cge,Z.sortedIndexOf=kge,Z.sortedLastIndex=Tge,Z.sortedLastIndexBy=Age,Z.sortedLastIndexOf=Ege,Z.startCase=f0e,Z.startsWith=h0e,Z.subtract=iye,Z.sum=oye,Z.sumBy=aye,Z.template=d0e,Z.times=U0e,Z.toFinite=Bc,Z.toInteger=dn,Z.toLength=j9,Z.toLower=p0e,Z.toNumber=rl,Z.toSafeInteger=pve,Z.toString=ur,Z.toUpper=g0e,Z.trim=m0e,Z.trimEnd=v0e,Z.trimStart=y0e,Z.truncate=b0e,Z.unescape=_0e,Z.uniqueId=H0e,Z.upperCase=S0e,Z.upperFirst=cO,Z.each=E9,Z.eachRight=P9,Z.first=C9,dO(Z,function(){var p={};return $u(Z,function(b,A){Ve.call(Z.prototype,A)||(p[A]=b)}),p}(),{chain:!1}),Z.VERSION=r,je(["bind","bindKey","curry","curryRight","partial","partialRight"],function(p){Z[p].placeholder=Z}),je(["drop","take"],function(p,b){Fn.prototype[p]=function(A){A=A===n?1:Yi(dn(A),0);var N=this.__filtered__&&!b?new Fn(this):this.clone();return N.__filtered__?N.__takeCount__=No(A,N.__takeCount__):N.__views__.push({size:No(A,se),type:p+(N.__dir__<0?"Right":"")}),N},Fn.prototype[p+"Right"]=function(A){return this.reverse()[p](A).reverse()}}),je(["filter","map","takeWhile"],function(p,b){var A=b+1,N=A==z||A==oe;Fn.prototype[p]=function(q){var re=this.clone();return re.__iteratees__.push({iteratee:Ht(q,3),type:A}),re.__filtered__=re.__filtered__||N,re}}),je(["head","last"],function(p,b){var A="take"+(b?"Right":"");Fn.prototype[p]=function(){return this[A](1).value()[0]}}),je(["initial","tail"],function(p,b){var A="drop"+(b?"":"Right");Fn.prototype[p]=function(){return this.__filtered__?new Fn(this):this[A](1)}}),Fn.prototype.compact=function(){return this.filter(za)},Fn.prototype.find=function(p){return this.filter(p).head()},Fn.prototype.findLast=function(p){return this.reverse().find(p)},Fn.prototype.invokeMap=xn(function(p,b){return typeof p=="function"?new Fn(this):this.map(function(A){return xy(A,p,b)})}),Fn.prototype.reject=function(p){return this.filter(Dw(Ht(p)))},Fn.prototype.slice=function(p,b){p=dn(p);var A=this;return A.__filtered__&&(p>0||b<0)?new Fn(A):(p<0?A=A.takeRight(-p):p&&(A=A.drop(p)),b!==n&&(b=dn(b),A=b<0?A.dropRight(-b):A.take(b-p)),A)},Fn.prototype.takeRightWhile=function(p){return this.reverse().takeWhile(p).reverse()},Fn.prototype.toArray=function(){return this.take(se)},$u(Fn.prototype,function(p,b){var A=/^(?:filter|find|map|reject)|While$/.test(b),N=/^(?:head|last)$/.test(b),q=Z[N?"take"+(b=="last"?"Right":""):b],re=N||/^find/.test(b);q&&(Z.prototype[b]=function(){var de=this.__wrapped__,ke=N?[1]:arguments,$e=de instanceof Fn,Ke=ke[0],Je=$e||hn(de),it=function($n){var Un=q.apply(Z,On([$n],ke));return N&&ht?Un[0]:Un};Je&&A&&typeof Ke=="function"&&Ke.length!=1&&($e=Je=!1);var ht=this.__chain__,At=!!this.__actions__.length,Gt=re&&!ht,yn=$e&&!At;if(!re&&Je){de=yn?de:new Fn(this);var qt=p.apply(de,ke);return qt.__actions__.push({func:Ow,args:[it],thisArg:n}),new Qs(qt,ht)}return Gt&&yn?p.apply(this,ke):(qt=this.thru(it),Gt?N?qt.value()[0]:qt.value():qt)})}),je(["pop","push","shift","sort","splice","unshift"],function(p){var b=ee[p],A=/^(?:push|sort|unshift)$/.test(p)?"tap":"thru",N=/^(?:pop|shift)$/.test(p);Z.prototype[p]=function(){var q=arguments;if(N&&!this.__chain__){var re=this.value();return b.apply(hn(re)?re:[],q)}return this[A](function(de){return b.apply(hn(de)?de:[],q)})}}),$u(Fn.prototype,function(p,b){var A=Z[b];if(A){var N=A.name+"";Ve.call(hm,N)||(hm[N]=[]),hm[N].push({name:b,func:A})}}),hm[xw(n,v).name]=[{name:"wrapper",func:n}],Fn.prototype.clone=_de,Fn.prototype.reverse=Sde,Fn.prototype.value=wde,Z.prototype.at=Jge,Z.prototype.chain=Zge,Z.prototype.commit=Qge,Z.prototype.next=eme,Z.prototype.plant=nme,Z.prototype.reverse=rme,Z.prototype.toJSON=Z.prototype.valueOf=Z.prototype.value=ime,Z.prototype.first=Z.prototype.head,qi&&(Z.prototype[qi]=tme),Z},$c=xP();E?((E.exports=$c)._=$c,w._=$c):Gi._=$c}).call(ui)})(fT,fT.exports);var v8e=fT.exports,y8e=ui&&ui.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(d_,"__esModule",{value:!0});d_.mock=void 0;var pa=y8e(v8e);function Pie(t){return t.allOf&&t.allOf[0]&&(t=pa.default.reduce(t.allOf,function(e,n){return pa.default.merge({},e,Pie(n))},t)),t}function Jm(t){if(t=Pie(t),t.example!==void 0)return t.example;if(t.default!==void 0)return t.default;if(t.oneOf&&t.oneOf[0])return Jm(t.oneOf[0]);if(t.anyOf&&t.anyOf[0])return Jm(t.anyOf[0]);var e=pa.default.isArray(t)?pa.default.first(t.type):t.type;if(e==="object"){var n=t,r=n.properties;return r?pa.default.mapValues(r,Jm):{}}if(e==="array"){var i=t,o=i.items;if(!o)return[];var a=[],s=o.oneOf&&o.oneOf[0]||o;if(o.anyOf)for(var l=0,u=o.anyOf;l<u.length;l++){var c=u[l];s=c,a.push(Jm(s))}for(var f=i.minItems||1;a.length<f;)a.push(Jm(s));return i.maxItems?pa.default.take(a,i.maxItems):a}if(pa.default.isArray(t.enum))return t.enum[0];if(e==="string"){var h=t.format,d={email:"user@example.com",hostname:"example.com",ipv4:"8.8.8.8",ipv6:"2001:4860:4860::8888",uri:"https://example.com/path","uri-reference":"/path#anchor","uri-template":"/path/{param}","json-pointer":"/foo/bar","date-time":new Date("1970-01-01").toJSON(),uuid:"3fa85f64-5717-4562-b3fc-2c963f66afa6",_default:"string"},g=d[h]||d._default,y=pa.default.isNil(t.minLength)?0:t.minLength,_=pa.default.isNil(t.maxLength)?g.length:t.maxLength;return g===d._default&&g.length<y?pa.default.padEnd(g,y,g):g.substr(0,pa.default.clamp(g.length,y,_))}if(e==="number"){var v=t.minimum?t.minimum:-Number.MAX_VALUE,S=t.maximum?t.maximum:Number.MAX_VALUE;return t.multipleOf&&(v=Math.ceil(v/t.multipleOf)*t.multipleOf,S=Math.floor(S/t.multipleOf)*t.multipleOf),pa.default.clamp(0,v,S)}if(e==="integer"){var C=t.minimum&&t.exclusiveMinimum?t.minimum+1:t.minimum,k=t.maximum&&t.exclusiveMaximum?t.maximum-1:t.maximum,v=pa.default.isNil(C)?Number.MIN_SAFE_INTEGER:C,S=pa.default.isNil(k)?Number.MAX_SAFE_INTEGER:k;return t.multipleOf&&(v=Math.ceil(v/t.multipleOf)*t.multipleOf,S=Math.floor(S/t.multipleOf)*t.multipleOf),pa.default.clamp(0,v,S)}return e==="null"?null:e==="boolean"?!0:{}}d_.mock=Jm;(function(t){var e=ui&&ui.__createBinding||(Object.create?function(i,o,a,s){s===void 0&&(s=a),Object.defineProperty(i,s,{enumerable:!0,get:function(){return o[a]}})}:function(i,o,a,s){s===void 0&&(s=a),i[s]=o[a]}),n=ui&&ui.__exportStar||function(i,o){for(var a in i)a!=="default"&&!o.hasOwnProperty(a)&&e(o,i,a)};Object.defineProperty(t,"__esModule",{value:!0}),t.mock=void 0;var r=d_;Object.defineProperty(t,"mock",{enumerable:!0,get:function(){return r.mock}}),n(d_,t)})(Eie);const Af=L0("places",{state:()=>({place:{},markingString:"",schemaString:"",databaseMap:{},formsData:{}}),actions:{saveName(){const t=Vt().updatePlace(this.place.id,this.place.name);t&&(this.place.name=t.name,Zn().lastUpdatedPlace=t)},addToken(){let t=Eie.mock(this.place.schema.items);this.place.marking.push(t),this.savePlaceMarkingFromEditor(JSON.stringify(this.place.marking,null,2))},savePlaceMarkingFromEditor(t){try{const e=JSON.parse(t);this.formsData=e,this.markingString=t;const n=Vt().updatePlaceMarking(this.place.id,e);n&&(Vt().setDefaultMarking(this.place.id),this.place.marking=n.marking,this.place.errorMessage=n.errorMessage,this.place.hasError=n.hasError,this.place.errorType=n.errorType,Zn().lastUpdatedPlace=n)}catch{}},resetMarking(){let t=Vt().getDefaultMarking(this.place.id);this.savePlaceMarkingFromForm(t)},savePlaceMarkingFromForm(t){try{this.formsData=t,this.markingString=JSON.stringify(this.formsData,null,2);const e=Vt().updatePlaceMarking(this.place.id,t);e&&(this.place.marking=e.marking,this.place.errorMessage=e.errorMessage,this.place.hasError=e.hasError,this.place.errorType=e.errorType,Zn().lastUpdatedPlace=e)}catch{}},savePlaceSchema(t){try{const e=JSON.parse(t);this.schemaString=t;const n=Vt().updatePlaceSchema(this.place.id,e);n&&(this.place.schema=n.schema,this.place.errorMessage=n.errorMessage,this.place.hasError=n.hasError,this.place.errorType=n.errorType)}catch{}},resetName(){const t=Vt().findPlace(this.place.id);t&&(this.place.name=t.name)},loadPlace(t){const e=Zn().places.find(n=>n.id===t);if(e){this.place=e;const n=Vt().findPlace(this.place.id);n&&(this.place.id=n.id,this.place.name=n.name,this.place.marking=n.marking,this.place.schema=n.schema),this.markingString=JSON.stringify(e.marking,null,2),this.formsData=JSON.parse(JSON.stringify(e.marking)),this.schemaString=JSON.stringify(e.schema,null,2)}}}}),Zc={x:"x",y:"y",width:"w",height:"h",minimum:"s",maximum:"l",diagonal:"d"},b8e=Object.keys(Zc).map(t=>Zc[t]).join(""),mI="[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?",_8e=/\s/g,eW=new RegExp(`^(${mI}\\*)?([${b8e}])(/${mI})?([-+]{1,2}${mI})?$`,"g");function Oie(t){throw new Error(`Invalid calc() expression: ${t}`)}function S8e(t,e){const n=eW.exec(t.replace(_8e,""));n||Oie(t),eW.lastIndex=0;const[,r,i,o,a]=n,{x:s,y:l,width:u,height:c}=e;let f=0;switch(i){case Zc.width:{f=u;break}case Zc.height:{f=c;break}case Zc.x:{f=s;break}case Zc.y:{f=l;break}case Zc.minimum:{f=Math.min(c,u);break}case Zc.maximum:{f=Math.max(c,u);break}case Zc.diagonal:{f=Math.sqrt(c*c+u*u);break}}return r&&(f*=parseFloat(r)),o&&(f/=parseFloat(o.slice(1))),a&&(f+=w8e(a)),f}function w8e(t){if(!t)return 0;const[e]=t;switch(e){case"+":return parseFloat(t.substr(1));case"-":return-parseFloat(t.substr(1))}return parseFloat(t)}function wl(t){return typeof t=="string"&&t.includes("calc")}const Iie="calc(",tW=Iie.length;function xl(t,e){let n=t,r=0;do{let i=n.indexOf(Iie,r);if(i===-1)return n;let o=i+tW,a=1;e:do{switch(n[o]){case"(":{a++;break}case")":{if(a--,a===0)break e;break}case void 0:Oie(n)}o++}while(!0);let s=n.slice(i+tW,o);wl(s)&&(s=xl(s,e));const l=String(S8e(s,e));n=n.slice(0,i)+l+n.slice(o+1),r=i+l.length}while(!0)}const{round:x8e,floor:C8e,PI:$ie}=Math,k8e={linear:function(t,e,n){var r=t[1]-t[0],i=e[1]-e[0];return(n-t[0])/r*i+e[0]||0}},_c=function(t){return t%360+(t<0?360:0)},Pg=function(t,e){return e*x8e(t/e)},oE=function(t){return 180*t/$ie%360},ss=function(t,e){return e=e||!1,t=e?t:t%360,t*$ie/180},nD=function(t,e){if(e===void 0)e=t===void 0?1:t,t=0;else if(e<t){const n=t;t=e,e=n}return C8e(Math.random()*(e-t+1)+t)},{cos:mC,sin:vI,atan2:T8e}=Math,Lie=function(t,e){var n=ss(t.y),r=ss(e.y),i=t.x,o=e.x,a=ss(o-i),s=vI(a)*mC(r),l=mC(n)*vI(r)-vI(n)*mC(r)*mC(a),u=oE(T8e(s,l)),c=["NE","E","SE","S","SW","W","NW","N"],f=u-22.5;return f<0&&(f+=360),f=parseInt(f/45),c[f]},OR=function(t,e){var n=t.x,r=t.y,i=e.x,o=e.y;return(n-=i)*n+(r-=o)*r},Die=function(t,e){return Math.sqrt(OR(t,e))},pn={Point:1,Line:2,Ellipse:3,Rect:4,Polyline:5,Polygon:6,Curve:7,Path:8},{abs:hT,cos:rD,sin:iD,sqrt:nW,min:rW,max:iW,atan2:A8e,round:oW,pow:E8e,PI:aW}=Math,we=function(t,e){if(!(this instanceof we))return new we(t,e);if(typeof t=="string"){var n=t.split(t.indexOf("@")===-1?" ":"@");t=parseFloat(n[0]),e=parseFloat(n[1])}else Object(t)===t&&(e=t.y,t=t.x);this.x=t===void 0?0:t,this.y=e===void 0?0:e};we.fromPolar=function(t,e,n){n=new we(n);var r=hT(t*rD(e)),i=hT(t*iD(e)),o=_c(oE(e));return o<90?i=-i:o<180?(r=-r,i=-i):o<270&&(r=-r),new we(n.x+r,n.y+i)};we.random=function(t,e,n,r){return new we(nD(t,e),nD(n,r))};we.prototype={type:pn.Point,chooseClosest:function(t){var e=t.length;if(e===1)return new we(t[0]);for(var n=null,r=1/0,i=0;i<e;i++){var o=new we(t[i]),a=this.squaredDistance(o);a<r&&(n=o,r=a)}return n},adhereToRect:function(t){return t.containsPoint(this)?this:(this.x=rW(iW(this.x,t.x),t.x+t.width),this.y=rW(iW(this.y,t.y),t.y+t.height),this)},angleBetween:function(t,e){var n=this.equals(t)||this.equals(e)?NaN:this.theta(e)-this.theta(t);return n<0&&(n+=360),n},bearing:function(t){return Lie(this,t)},changeInAngle:function(t,e,n){return this.clone().offset(-t,-e).theta(n)-this.theta(n)},clone:function(){return new we(this)},cross:function(t,e){return t&&e?(e.x-this.x)*(t.y-this.y)-(e.y-this.y)*(t.x-this.x):NaN},difference:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),new we(this.x-(t||0),this.y-(e||0))},distance:function(t){return Die(this,t)},dot:function(t){return t?this.x*t.x+this.y*t.y:NaN},equals:function(t){return!!t&&this.x===t.x&&this.y===t.y},lerp:function(t,e){var n=this.x,r=this.y;return new we((1-e)*n+e*t.x,(1-e)*r+e*t.y)},magnitude:function(){return nW(this.x*this.x+this.y*this.y)||.01},manhattanDistance:function(t){return hT(t.x-this.x)+hT(t.y-this.y)},move:function(t,e){var n=ss(new we(t).theta(this)),r=this.offset(rD(n)*e,-iD(n)*e);return r},normalize:function(t){var e=(t||1)/this.magnitude();return this.scale(e,e)},offset:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),this.x+=t||0,this.y+=e||0,this},reflection:function(t){return new we(t).move(this,this.distance(t))},rotate:function(t,e){if(e===0)return this;t=t||new we(0,0),e=ss(_c(-e));var n=rD(e),r=iD(e),i=n*(this.x-t.x)-r*(this.y-t.y)+t.x,o=r*(this.x-t.x)+n*(this.y-t.y)+t.y;return this.x=i,this.y=o,this},round:function(t){let e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=E8e(10,t);break}return this.x=oW(this.x*e)/e,this.y=oW(this.y*e)/e,this},scale:function(t,e,n){return n=n&&new we(n)||new we(0,0),this.x=n.x+t*(this.x-n.x),this.y=n.y+e*(this.y-n.y),this},snapToGrid:function(t,e){return this.x=Pg(this.x,t),this.y=Pg(this.y,e||t),this},squaredDistance:function(t){return OR(this,t)},theta:function(t){t=new we(t);var e=-(t.y-this.y),n=t.x-this.x,r=A8e(e,n);return r<0&&(r=2*aW+r),180*r/aW},toJSON:function(){return{x:this.x,y:this.y}},toPolar:function(t){t=t&&new we(t)||new we(0,0);var e=this.x,n=this.y;return this.x=nW((e-t.x)*(e-t.x)+(n-t.y)*(n-t.y)),this.y=ss(t.theta(new we(e,n))),this},toString:function(){return this.x+"@"+this.y},serialize:function(){return this.x+","+this.y},update:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),this.x=t||0,this.y=e||0,this},vectorAngle:function(t){var e=new we(0,0);return e.angleBetween(this,t)}};we.prototype.translate=we.prototype.offset;const dT=we,{max:yI,min:bI}=Math,gt=function(t,e){if(!(this instanceof gt))return new gt(t,e);if(t instanceof gt)return new gt(t.start,t.end);this.start=new we(t),this.end=new we(e)};gt.prototype={type:pn.Line,angle:function(){var t=new we(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,t)},bbox:function(){var t=bI(this.start.x,this.end.x),e=bI(this.start.y,this.end.y),n=yI(this.start.x,this.end.x),r=yI(this.start.y,this.end.y);return new st(t,e,n-t,r-e)},bearing:function(){return Lie(this.start,this.end)},clone:function(){return new gt(this.start,this.end)},closestPoint:function(t){return this.pointAt(this.closestPointNormalizedLength(t))},closestPointLength:function(t){return this.closestPointNormalizedLength(t)*this.length()},closestPointNormalizedLength:function(t){var e=this.vector().dot(new gt(this.start,t).vector()),n=bI(1,yI(0,e/this.squaredLength()));return n!==n?0:n},closestPointTangent:function(t){return this.tangentAt(this.closestPointNormalizedLength(t))},containsPoint:function(t){var e=this.start,n=this.end;if(e.cross(t,n)!==0)return!1;var r=this.length();return!(new gt(e,t).length()>r||new gt(t,n).length()>r)},divideAt:function(t){var e=this.pointAt(t);return[new gt(this.start,e),new gt(e,this.end)]},divideAtLength:function(t){var e=this.pointAtLength(t);return[new gt(this.start,e),new gt(e,this.end)]},equals:function(t){return!!t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.end.x===t.end.x&&this.end.y===t.end.y},intersect:function(t,e){if(t&&t.intersectionWithLine){var n=t.intersectionWithLine(this,e);return n&&t instanceof gt&&(n=n[0]),n}return null},intersectionWithLine:function(t){var e=new we(this.end.x-this.start.x,this.end.y-this.start.y),n=new we(t.end.x-t.start.x,t.end.y-t.start.y),r=e.x*n.y-e.y*n.x,i=new we(t.start.x-this.start.x,t.start.y-this.start.y),o=i.x*n.y-i.y*n.x,a=i.x*e.y-i.y*e.x;if(r===0||o*r<0||a*r<0)return null;if(r>0){if(o>r||a>r)return null}else if(o<r||a<r)return null;return[new we(this.start.x+o*e.x/r,this.start.y+o*e.y/r)]},isDifferentiable:function(){return!this.start.equals(this.end)},length:function(){return Die(this.start,this.end)},midpoint:function(){return new we((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},parallel:function(t){const e=this.clone();if(!this.isDifferentiable())return e;const{start:n,end:r}=e,i=n.clone().rotate(r,270),o=r.clone().rotate(n,90);return n.move(o,t),r.move(i,t),e},pointAt:function(t){var e=this.start,n=this.end;return t<=0?e.clone():t>=1?n.clone():e.lerp(n,t)},pointAtLength:function(t){var e=this.start,n=this.end,r=!0;t<0&&(r=!1,t=-t);var i=this.length();return t>=i?r?n.clone():e.clone():this.pointAt((r?t:i-t)/i)},pointOffset:function(t){t=new we(t);var e=this.start,n=this.end,r=(n.x-e.x)*(t.y-e.y)-(n.y-e.y)*(t.x-e.x);return r/this.length()},rotate:function(t,e){return this.start.rotate(t,e),this.end.rotate(t,e),this},round:function(t){return this.start.round(t),this.end.round(t),this},scale:function(t,e,n){return this.start.scale(t,e,n),this.end.scale(t,e,n),this},setLength:function(t){var e=this.length();if(!e)return this;var n=t/e;return this.scale(n,n,this.start)},squaredLength:function(){return OR(this.start,this.end)},tangentAt:function(t){if(!this.isDifferentiable())return null;var e=this.start,n=this.end,r=this.pointAt(t),i=new gt(e,n);return i.translate(r.x-e.x,r.y-e.y),i},tangentAtLength:function(t){if(!this.isDifferentiable())return null;var e=this.start,n=this.end,r=this.pointAtLength(t),i=new gt(e,n);return i.translate(r.x-e.x,r.y-e.y),i},toString:function(){return this.start.toString()+" "+this.end.toString()},serialize:function(){return this.start.serialize()+" "+this.end.serialize()},translate:function(t,e){return this.start.translate(t,e),this.end.translate(t,e),this},vector:function(){return new we(this.end.x-this.start.x,this.end.y-this.start.y)}};gt.prototype.intersection=gt.prototype.intersect;const ug=gt,{sqrt:sW,round:vC,pow:P8e}=Math,Ca=function(t,e,n){if(!(this instanceof Ca))return new Ca(t,e,n);if(t instanceof Ca)return new Ca(new we(t.x,t.y),t.a,t.b);t=new we(t),this.x=t.x,this.y=t.y,this.a=e,this.b=n};Ca.fromRect=function(t){return t=new st(t),new Ca(t.center(),t.width/2,t.height/2)};Ca.prototype={type:pn.Ellipse,bbox:function(){return new st(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},center:function(){return new we(this.x,this.y)},clone:function(){return new Ca(this)},containsPoint:function(t){return this.normalizedDistance(t)<=1},equals:function(t){return!!t&&t.x===this.x&&t.y===this.y&&t.a===this.a&&t.b===this.b},inflate:function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.a+=2*t,this.b+=2*e,this},intersectionWithLine:function(t){var e=[],n=t.start,r=t.end,i=this.a,o=this.b,a=t.vector(),s=n.difference(new we(this)),l=new we(a.x/(i*i),a.y/(o*o)),u=new we(s.x/(i*i),s.y/(o*o)),c=a.dot(l),f=a.dot(u),h=s.dot(u)-1,d=f*f-c*h;if(d<0)return null;if(d>0){var g=sW(d),y=(-f-g)/c,_=(-f+g)/c;if((y<0||1<y)&&(_<0||1<_))return null;0<=y&&y<=1&&e.push(n.lerp(r,y)),0<=_&&_<=1&&e.push(n.lerp(r,_))}else{var v=-f/c;if(0<=v&&v<=1)e.push(n.lerp(r,v));else return null}return e},intersectionWithLineFromCenterToPoint:function(t,e){t=new we(t),e&&t.rotate(new we(this.x,this.y),e);var n=t.x-this.x,r=t.y-this.y,i;if(n===0)return i=this.bbox().pointNearestToPoint(t),e?i.rotate(new we(this.x,this.y),-e):i;var o=r/n,a=o*o,s=this.a*this.a,l=this.b*this.b,u=sW(1/(1/s+a/l));u=n<0?-u:u;var c=o*u;return i=new we(this.x+u,this.y+c),e?i.rotate(new we(this.x,this.y),-e):i},normalizedDistance:function(t){var e=t.x,n=t.y,r=this.a,i=this.b,o=this.x,a=this.y;return(e-o)*(e-o)/(r*r)+(n-a)*(n-a)/(i*i)},round:function(t){let e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=P8e(10,t);break}return this.x=vC(this.x*e)/e,this.y=vC(this.y*e)/e,this.a=vC(this.a*e)/e,this.b=vC(this.b*e)/e,this},tangentTheta:function(t){var e=30,n=t.x,r=t.y,i=this.a,o=this.b,a=this.bbox().center(),s=a.x,l=a.y,u=n>a.x+i/2,c=n<a.x-i/2,f,h;return u||c?(f=n>a.x?r-e:r+e,h=i*i/(n-s)-i*i*(r-l)*(f-l)/(o*o*(n-s))+s):(h=r>a.y?n+e:n-e,f=o*o/(r-l)-o*o*(n-s)*(h-s)/(i*i*(r-l))+l),new we(h,f).theta(t)},toString:function(){return new we(this.x,this.y).toString()+" "+this.a+" "+this.b}};const O8e=Ca,{abs:lW,cos:I8e,sin:$8e,min:ab,max:uW,round:yC,pow:L8e}=Math,st=function(t,e,n,r){if(!(this instanceof st))return new st(t,e,n,r);Object(t)===t&&(e=t.y,n=t.width,r=t.height,t=t.x),this.x=t===void 0?0:t,this.y=e===void 0?0:e,this.width=n===void 0?0:n,this.height=r===void 0?0:r};st.fromEllipse=function(t){return t=new Ca(t),new st(t.x-t.a,t.y-t.b,2*t.a,2*t.b)};st.fromPointUnion=function(...t){if(t.length===0)return null;const e=new we;let n,r,i,o;n=r=1/0,i=o=-1/0;for(let a=0;a<t.length;a++){e.update(t[a]);const s=e.x,l=e.y;s<n&&(n=s),s>i&&(i=s),l<r&&(r=l),l>o&&(o=l)}return new st(n,r,i-n,o-r)};st.fromRectUnion=function(...t){if(t.length===0)return null;const e=new st;let n,r,i,o;n=r=1/0,i=o=-1/0;for(let a=0;a<t.length;a++){e.update(t[a]);const s=e.x,l=e.y,u=s+e.width,c=l+e.height;s<n&&(n=s),u>i&&(i=u),l<r&&(r=l),c>o&&(o=c)}return new st(n,r,i-n,o-r)};st.prototype={type:pn.Rect,bbox:function(t){return this.clone().rotateAroundCenter(t)},rotateAroundCenter:function(t){if(!t)return this;const{width:e,height:n}=this,r=ss(t),i=lW($8e(r)),o=lW(I8e(r)),a=e*o+n*i,s=e*i+n*o;return this.x+=(e-a)/2,this.y+=(n-s)/2,this.width=a,this.height=s,this},bottomLeft:function(){return new we(this.x,this.y+this.height)},bottomLine:function(){return new gt(this.bottomLeft(),this.bottomRight())},bottomMiddle:function(){return new we(this.x+this.width/2,this.y+this.height)},center:function(){return new we(this.x+this.width/2,this.y+this.height/2)},clone:function(){return new st(this)},containsPoint:function(t){return t=new we(t),t.x>=this.x&&t.x<=this.x+this.width&&t.y>=this.y&&t.y<=this.y+this.height},containsRect:function(t){var e=new st(this).normalize(),n=new st(t).normalize(),r=e.width,i=e.height,o=n.width,a=n.height;if(!r||!i||!o||!a)return!1;var s=e.x,l=e.y,u=n.x,c=n.y;return o+=u,r+=s,a+=c,i+=l,s<=u&&o<=r&&l<=c&&a<=i},corner:function(){return new we(this.x+this.width,this.y+this.height)},equals:function(t){var e=new st(this).normalize(),n=new st(t).normalize();return e.x===n.x&&e.y===n.y&&e.width===n.width&&e.height===n.height},inflate:function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},intersect:function(t){var e=this.origin(),n=this.corner(),r=t.origin(),i=t.corner();if(i.x<=e.x||i.y<=e.y||r.x>=n.x||r.y>=n.y)return null;var o=uW(e.x,r.x),a=uW(e.y,r.y);return new st(o,a,ab(n.x,i.x)-o,ab(n.y,i.y)-a)},intersectionWithLine:function(t){var e=this,n=[e.topLine(),e.rightLine(),e.bottomLine(),e.leftLine()],r=[],i=[],o,a,s=n.length;for(a=0;a<s;a++)o=t.intersect(n[a]),o!==null&&i.indexOf(o.toString())<0&&(r.push(o),i.push(o.toString()));return r.length>0?r:null},intersectionWithLineFromCenterToPoint:function(t,e){t=new we(t);var n=new we(this.x+this.width/2,this.y+this.height/2),r;e&&t.rotate(n,e);for(var i=[this.topLine(),this.rightLine(),this.bottomLine(),this.leftLine()],o=new gt(n,t),a=i.length-1;a>=0;--a){var s=i[a].intersection(o);if(s!==null){r=s;break}}return r&&e&&r.rotate(n,-e),r},leftLine:function(){return new gt(this.topLeft(),this.bottomLeft())},leftMiddle:function(){return new we(this.x,this.y+this.height/2)},maxRectScaleToFit:function(t,e){t=new st(t),e||(e=t.center());var n,r,i,o,a,s,l,u,c=e.x,f=e.y;n=r=i=o=a=s=l=u=1/0;var h=t.topLeft();h.x<c&&(n=(this.x-c)/(h.x-c)),h.y<f&&(a=(this.y-f)/(h.y-f));var d=t.bottomRight();d.x>c&&(r=(this.x+this.width-c)/(d.x-c)),d.y>f&&(s=(this.y+this.height-f)/(d.y-f));var g=t.topRight();g.x>c&&(i=(this.x+this.width-c)/(g.x-c)),g.y<f&&(l=(this.y-f)/(g.y-f));var y=t.bottomLeft();return y.x<c&&(o=(this.x-c)/(y.x-c)),y.y>f&&(u=(this.y+this.height-f)/(y.y-f)),{sx:ab(n,r,i,o),sy:ab(a,s,l,u)}},maxRectUniformScaleToFit:function(t,e){var n=this.maxRectScaleToFit(t,e);return ab(n.sx,n.sy)},moveAndExpand:function(t){return this.x+=t.x||0,this.y+=t.y||0,this.width+=t.width||0,this.height+=t.height||0,this},normalize:function(){var t=this.x,e=this.y,n=this.width,r=this.height;return this.width<0&&(t=this.x+this.width,n=-this.width),this.height<0&&(e=this.y+this.height,r=-this.height),this.x=t,this.y=e,this.width=n,this.height=r,this},offset:function(t,e){return we.prototype.offset.call(this,t,e)},origin:function(){return new we(this.x,this.y)},pointNearestToPoint:function(t){if(t=new we(t),this.containsPoint(t)){var e=this.sideNearestToPoint(t);switch(e){case"right":return new we(this.x+this.width,t.y);case"left":return new we(this.x,t.y);case"bottom":return new we(t.x,this.y+this.height);case"top":return new we(t.x,this.y)}}return t.adhereToRect(this)},rightLine:function(){return new gt(this.topRight(),this.bottomRight())},rightMiddle:function(){return new we(this.x+this.width,this.y+this.height/2)},round:function(t){let e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=L8e(10,t);break}return this.x=yC(this.x*e)/e,this.y=yC(this.y*e)/e,this.width=yC(this.width*e)/e,this.height=yC(this.height*e)/e,this},scale:function(t,e,n){return n=this.origin().scale(t,e,n),this.x=n.x,this.y=n.y,this.width*=t,this.height*=e,this},sideNearestToPoint:function(t){t=new we(t);var e=t.x-this.x,n=this.x+this.width-t.x,r=t.y-this.y,i=this.y+this.height-t.y,o=e,a="left";return n<o&&(o=n,a="right"),r<o&&(o=r,a="top"),i<o&&(a="bottom"),a},snapToGrid:function(t,e){var n=this.origin().snapToGrid(t,e),r=this.corner().snapToGrid(t,e);return this.x=n.x,this.y=n.y,this.width=r.x-n.x,this.height=r.y-n.y,this},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},topLine:function(){return new gt(this.topLeft(),this.topRight())},topMiddle:function(){return new we(this.x+this.width/2,this.y)},topRight:function(){return new we(this.x+this.width,this.y)},toString:function(){return this.origin().toString()+" "+this.corner().toString()},union:function(t){return st.fromRectUnion(this,t)},update:function(t,e,n,r){return Object(t)===t&&(e=t.y,n=t.width,r=t.height,t=t.x),this.x=t||0,this.y=e||0,this.width=n||0,this.height=r||0,this}};st.prototype.bottomRight=st.prototype.corner;st.prototype.topLeft=st.prototype.origin;st.prototype.translate=st.prototype.offset;const D8e=st;function Mie(t){const e=t.trim();if(e==="")return[];const n=[],r=e.split(/\b\s*,\s*|,\s*|\s+/),i=r.length;for(let o=0;o<i;o+=2)n.push({x:+r[o],y:+r[o+1]});return n}function Nie(t){const e=t.length;if(e===0)return[];const n=[];for(let r=0;r<e;r++){const i=t[r].clone();n.push(i)}return n}function Fie(t){const{abs:e}=Math;var n,r,i=t.length;if(i===0)return[];var o;for(n=0;n<i;n++)(o===void 0||t[n].y<o.y||t[n].y===o.y&&t[n].x>o.x)&&(o=t[n]);var a=[];for(n=0;n<i;n++){var s=o.theta(t[n]);s===0&&(s=360);var l=[t[n],n,s];a.push(l)}if(a.sort(function(V,z){var ie=V[2]-z[2];return ie===0&&(ie=z[1]-V[1]),ie}),a.length>2){var u=a[a.length-1];a.unshift(u)}for(var c={},f=[],h,d,g,y,_,v;a.length!==0;)if(h=a.pop(),d=h[0],!c.hasOwnProperty(h[0]+"@@"+h[1]))for(var S=!1;!S;)if(f.length<2)f.push(h),S=!0;else{g=f.pop(),y=g[0],_=f.pop(),v=_[0];var C=v.cross(y,d);if(C<0)f.push(_),f.push(g),f.push(h),S=!0;else if(C===0){var k=1e-10,x=y.angleBetween(v,d);e(x-180)<k||y.equals(d)||v.equals(y)?(c[g[0]+"@@"+g[1]]=y,f.push(_)):e((x+1)%360-1)<k&&(f.push(_),a.push(g))}else c[g[0]+"@@"+g[1]]=y,f.push(_)}f.length>2&&f.pop();var m,T=-1;for(r=f.length,n=0;n<r;n++){var P=f[n][1];(m===void 0||P<m)&&(m=P,T=n)}var I=[];if(T>0){var M=f.slice(T),L=f.slice(0,T);I=M.concat(L)}else I=f;var R=[];for(r=I.length,n=0;n<r;n++)R.push(I[n][0]);return R}const $r=function(t){if(!(this instanceof $r))return new $r(t);if(typeof t=="string")return new $r.parse(t);this.points=Array.isArray(t)?t.map(we):[]};$r.parse=function(t){return new $r(Mie(t))};$r.fromRect=function(t){return new $r([t.topLeft(),t.topRight(),t.bottomRight(),t.bottomLeft(),t.topLeft()])};$r.prototype={type:pn.Polyline,bbox:function(){var t=1/0,e=-1/0,n=1/0,r=-1/0,i=this.points,o=i.length;if(o===0)return null;for(var a=0;a<o;a++){var s=i[a],l=s.x,u=s.y;l<t&&(t=l),l>e&&(e=l),u<n&&(n=u),u>r&&(r=u)}return new st(t,n,e-t,r-n)},clone:function(){return new $r(Nie(this.points))},closestPoint:function(t){var e=this.closestPointLength(t);return this.pointAtLength(e)},closestPointLength:function(t){var e=this.lengthPoints(),n=e.length;if(n===0||n===1)return 0;for(var r,i=1/0,o=0,a=n-1,s=0;s<a;s++){var l=new gt(e[s],e[s+1]),u=l.length(),c=l.closestPointNormalizedLength(t),f=l.pointAt(c),h=f.squaredDistance(t);h<i&&(i=h,r=o+c*u),o+=u}return r},closestPointNormalizedLength:function(t){var e=this.closestPointLength(t);if(e===0)return 0;var n=this.length();return n===0?0:e/n},closestPointTangent:function(t){var e=this.closestPointLength(t);return this.tangentAtLength(e)},containsPoint:function(t){var e=this.points,n=e.length;if(n===0)return!1;for(var r=t.x,i=t.y,o=n-1,a=0,s=0,l=new gt,u=new gt,c=new we;a<n;a++){var f=e[o],h=e[a];if(t.equals(f)||(l.start=f,l.end=h,l.containsPoint(t)))return!0;if(i<=f.y&&i>h.y||i>f.y&&i<=h.y){var d=f.x-r>h.x-r?f.x-r:h.x-r;d>=0&&(c.x=r+d,c.y=i,u.start=t,u.end=c,l.intersect(u)&&s++)}o=a}return s%2===1},close:function(){const{start:t,end:e,points:n}=this;return t&&e&&!t.equals(e)&&n.push(t.clone()),this},lengthPoints:function(){return this.points},convexHull:function(){return new $r(Fie(this.points))},equals:function(t){if(!t)return!1;var e=this.points,n=t.points,r=e.length;if(n.length!==r)return!1;for(var i=0;i<r;i++){var o=e[i],a=t.points[i];if(!o.equals(a))return!1}return!0},intersectionWithLine:function(t){for(var e=new gt(t),n=[],r=this.lengthPoints(),i=new gt,o=0,a=r.length-1;o<a;o++){i.start=r[o],i.end=r[o+1];var s=e.intersectionWithLine(i);s&&n.push(s[0])}return n.length>0?n:null},isDifferentiable:function(){var t=this.points,e=t.length;if(e===0)return!1;for(var n=new gt,r=e-1,i=0;i<r;i++)if(n.start=t[i],n.end=t[i+1],n.isDifferentiable())return!0;return!1},length:function(){var t=this.lengthPoints(),e=t.length;if(e===0)return 0;for(var n=0,r=e-1,i=0;i<r;i++)n+=t[i].distance(t[i+1]);return n},pointAt:function(t){var e=this.lengthPoints(),n=e.length;if(n===0)return null;if(n===1||t<=0)return e[0].clone();if(t>=1)return e[n-1].clone();var r=this.length(),i=r*t;return this.pointAtLength(i)},pointAtLength:function(t){var e=this.lengthPoints(),n=e.length;if(n===0)return null;if(n===1)return e[0].clone();var r=!0;t<0&&(r=!1,t=-t);for(var i=0,o=n-1,a=0;a<o;a++){var s=r?a:o-1-a,l=e[s],u=e[s+1],c=new gt(l,u),f=l.distance(u);if(t<=i+f)return c.pointAtLength((r?1:-1)*(t-i));i+=f}var h=r?e[n-1]:e[0];return h.clone()},round:function(t){for(var e=this.points,n=e.length,r=0;r<n;r++)e[r].round(t);return this},scale:function(t,e,n){for(var r=this.points,i=r.length,o=0;o<i;o++)r[o].scale(t,e,n);return this},simplify:function(t={}){const e=this.points;if(e.length<3)return this;const n=t.threshold||0;let r=0;for(;e[r+2];){const i=r,o=r+1,a=r+2,s=e[i],l=e[o],u=e[a];new gt(s,u).closestPoint(l).distance(l)<=n?e.splice(o,1):r+=1}return this},tangentAt:function(t){var e=this.lengthPoints(),n=e.length;if(n===0||n===1)return null;t<0&&(t=0),t>1&&(t=1);var r=this.length(),i=r*t;return this.tangentAtLength(i)},tangentAtLength:function(t){var e=this.lengthPoints(),n=e.length;if(n===0||n===1)return null;var r=!0;t<0&&(r=!1,t=-t);for(var i,o=0,a=n-1,s=0;s<a;s++){var l=r?s:a-1-s,u=e[l],c=e[l+1],f=new gt(u,c),h=u.distance(c);if(f.isDifferentiable()){if(t<=o+h)return f.tangentAtLength((r?1:-1)*(t-o));i=f}o+=h}if(i){var d=r?1:0;return i.tangentAt(d)}return null},toString:function(){return this.points+""},translate:function(t,e){for(var n=this.points,r=n.length,i=0;i<r;i++)n[i].translate(t,e);return this},serialize:function(){var t=this.points,e=t.length;if(e===0)return"";for(var n="",r=0;r<e;r++){var i=t[r];n+=i.x+","+i.y+" "}return n.trim()}};Object.defineProperty($r.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var t=this.points,e=t.length;return e===0?null:this.points[0]}});Object.defineProperty($r.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var t=this.points,e=t.length;return e===0?null:this.points[e-1]}});const{abs:bC,sqrt:M8e,min:cW,max:fW,pow:_I}=Math,nr=function(t,e,n,r){if(!(this instanceof nr))return new nr(t,e,n,r);if(t instanceof nr)return new nr(t.start,t.controlPoint1,t.controlPoint2,t.end);this.start=new we(t),this.controlPoint1=new we(e),this.controlPoint2=new we(n),this.end=new we(r)};nr.throughPoints=function(){function t(n){var r=[],i=[],o=n.length-1,a;if(o==1)return r[0]=new we((2*n[0].x+n[1].x)/3,(2*n[0].y+n[1].y)/3),i[0]=new we(2*r[0].x-n[0].x,2*r[0].y-n[0].y),[r,i];var s=[];for(a=1;a<o-1;a++)s[a]=4*n[a].x+2*n[a+1].x;s[0]=n[0].x+2*n[1].x,s[o-1]=(8*n[o-1].x+n[o].x)/2;var l=e(s);for(a=1;a<o-1;++a)s[a]=4*n[a].y+2*n[a+1].y;s[0]=n[0].y+2*n[1].y,s[o-1]=(8*n[o-1].y+n[o].y)/2;var u=e(s);for(a=0;a<o;a++)r.push(new we(l[a],u[a])),a<o-1?i.push(new we(2*n[a+1].x-l[a+1],2*n[a+1].y-u[a+1])):i.push(new we((n[o].x+l[o-1])/2,(n[o].y+u[o-1])/2));return[r,i]}function e(n){var r=n.length,i=[],o=[],a=2;i[0]=n[0]/a;for(var s=1;s<r;s++)o[s]=1/a,a=(s<r-1?4:3.5)-o[s],i[s]=(n[s]-i[s-1])/a;for(s=1;s<r;s++)i[r-s-1]-=o[r-s]*i[r-s];return i}return function(n){if(!n||Array.isArray(n)&&n.length<2)throw new Error("At least 2 points are required");for(var r=t(n),i=[],o=r[0].length,a=0;a<o;a++){var s=new we(r[0][a].x,r[0][a].y),l=new we(r[1][a].x,r[1][a].y);i.push(new nr(n[a],s,l,n[a+1]))}return i}}();nr.prototype={type:pn.Curve,bbox:function(){for(var t=this.start,e=this.controlPoint1,n=this.controlPoint2,r=this.end,i=t.x,o=t.y,a=e.x,s=e.y,l=n.x,u=n.y,c=r.x,f=r.y,h=new Array,d=new Array,g=[new Array,new Array],y,_,v,S,C,k,x,m,T=0;T<2;++T){if(T===0?(_=6*i-12*a+6*l,y=-3*i+9*a-9*l+3*c,v=3*a-3*i):(_=6*o-12*s+6*u,y=-3*o+9*s-9*u+3*f,v=3*s-3*o),bC(y)<1e-12){if(bC(_)<1e-12)continue;S=-v/_,0<S&&S<1&&d.push(S);continue}x=_*_-4*v*y,m=M8e(x),!(x<0)&&(C=(-_+m)/(2*y),0<C&&C<1&&d.push(C),k=(-_-m)/(2*y),0<k&&k<1&&d.push(k))}for(var P=d.length,I=P,M,L,R;P--;)S=d[P],M=1-S,L=M*M*M*i+3*M*M*S*a+3*M*S*S*l+S*S*S*c,g[0][P]=L,R=M*M*M*o+3*M*M*S*s+3*M*S*S*u+S*S*S*f,g[1][P]=R,h[P]={X:L,Y:R};d[I]=0,d[I+1]=1,h[I]={X:i,Y:o},h[I+1]={X:c,Y:f},g[0][I]=i,g[1][I]=o,g[0][I+1]=c,g[1][I+1]=f,d.length=I+2,g[0].length=I+2,g[1].length=I+2,h.length=I+2;var V=cW.apply(null,g[0]),z=cW.apply(null,g[1]),ie=fW.apply(null,g[0]),oe=fW.apply(null,g[1]);return new st(V,z,ie-V,oe-z)},clone:function(){return new nr(this.start,this.controlPoint1,this.controlPoint2,this.end)},closestPoint:function(t,e){return this.pointAtT(this.closestPointT(t,e))},closestPointLength:function(t,e){e=e||{};var n=e.precision===void 0?this.PRECISION:e.precision,r=e.subdivisions===void 0?this.getSubdivisions({precision:n}):e.subdivisions,i={precision:n,subdivisions:r};return this.lengthAtT(this.closestPointT(t,i),i)},closestPointNormalizedLength:function(t,e){e=e||{};var n=e.precision===void 0?this.PRECISION:e.precision,r=e.subdivisions===void 0?this.getSubdivisions({precision:n}):e.subdivisions,i={precision:n,subdivisions:r},o=this.closestPointLength(t,i);if(!o)return 0;var a=this.length(i);return a===0?0:o/a},closestPointT:function(t,e){e=e||{};for(var n=e.precision===void 0?this.PRECISION:e.precision,r=e.subdivisions===void 0?this.getSubdivisions({precision:n}):e.subdivisions,i,o,a,s,l,u,c,f=r.length,h=f?1/f:0,d=0;d<f;d++){var g=r[d],y=g.start.distance(t),_=g.end.distance(t),v=y+_;(!c||v<c)&&(i=g,o=d*h,a=(d+1)*h,s=y,l=_,u=g.start.distance(g.end),c=v)}for(var S=_I(10,-n);;){var C=s?bC(s-l)/s:0,k=l?bC(s-l)/l:0,x=C<S||k<S,m=s?s<u*S:!0,T=l?l<u*S:!0,P=m||T;if(x||P)return s<=l?o:a;var I=i.divide(.5);h/=2;var M=I[0].start.distance(t),L=I[0].end.distance(t),R=M+L,V=I[1].start.distance(t),z=I[1].end.distance(t),ie=V+z;R<=ie?(i=I[0],a-=h,s=M,l=L):(i=I[1],o+=h,s=V,l=z)}},closestPointTangent:function(t,e){return this.tangentAtT(this.closestPointT(t,e))},containsPoint:function(t,e){var n=this.toPolyline(e);return n.containsPoint(t)},divideAt:function(t,e){if(t<=0)return this.divideAtT(0);if(t>=1)return this.divideAtT(1);var n=this.tAt(t,e);return this.divideAtT(n)},divideAtLength:function(t,e){var n=this.tAtLength(t,e);return this.divideAtT(n)},divideAtT:function(t){var e=this.start,n=this.controlPoint1,r=this.controlPoint2,i=this.end;if(t<=0)return[new nr(e,e,e,e),new nr(e,n,r,i)];if(t>=1)return[new nr(e,n,r,i),new nr(i,i,i,i)];var o=this.getSkeletonPoints(t),a=o.startControlPoint1,s=o.startControlPoint2,l=o.divider,u=o.dividerControlPoint1,c=o.dividerControlPoint2;return[new nr(e,a,s,l),new nr(l,u,c,i)]},endpointDistance:function(){return this.start.distance(this.end)},equals:function(t){return!!t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.controlPoint1.x===t.controlPoint1.x&&this.controlPoint1.y===t.controlPoint1.y&&this.controlPoint2.x===t.controlPoint2.x&&this.controlPoint2.y===t.controlPoint2.y&&this.end.x===t.end.x&&this.end.y===t.end.y},getSkeletonPoints:function(t){var e=this.start,n=this.controlPoint1,r=this.controlPoint2,i=this.end;if(t<=0)return{startControlPoint1:e.clone(),startControlPoint2:e.clone(),divider:e.clone(),dividerControlPoint1:n.clone(),dividerControlPoint2:r.clone()};if(t>=1)return{startControlPoint1:n.clone(),startControlPoint2:r.clone(),divider:i.clone(),dividerControlPoint1:i.clone(),dividerControlPoint2:i.clone()};var o=new gt(e,n).pointAt(t),a=new gt(n,r).pointAt(t),s=new gt(r,i).pointAt(t),l=new gt(o,a).pointAt(t),u=new gt(a,s).pointAt(t),c=new gt(l,u).pointAt(t),f={startControlPoint1:o,startControlPoint2:l,divider:c,dividerControlPoint1:u,dividerControlPoint2:s};return f},getSubdivisions:function(t){t=t||{};var e=t.precision===void 0?this.PRECISION:t.precision,n=this.start,r=this.controlPoint1,i=this.controlPoint2,o=this.end,a=[new nr(n,r,i,o)];if(e===0)return a;var s=!this.isDifferentiable();if(s)return a;var l=this.endpointDistance(),u=_I(10,-e),c=2,f=r.cross(n,o)===0&&i.cross(n,o)===0;f&&(c=2*e);for(var h=0;;){h+=1;for(var d=[],g=a.length,y=0;y<g;y++){var _=a[y],v=_.divide(.5);d.push(v[0],v[1])}for(var S=0,C=d.length,k=0;k<C;k++){var x=d[k];S+=x.endpointDistance()}if(h>=c){var m=S!==0?(S-l)/S:0;if(m<u)return d}a=d,l=S}},isDifferentiable:function(){var t=this.start,e=this.controlPoint1,n=this.controlPoint2,r=this.end;return!(t.equals(e)&&e.equals(n)&&n.equals(r))},length:function(t){t=t||{};for(var e=t.precision===void 0?this.PRECISION:t.precision,n=t.subdivisions===void 0?this.getSubdivisions({precision:e}):t.subdivisions,r=0,i=n.length,o=0;o<i;o++){var a=n[o];r+=a.endpointDistance()}return r},lengthAtT:function(t,e){if(t<=0)return 0;e=e||{};var n=e.precision===void 0?this.PRECISION:e.precision,r=this.divide(t)[0],i=r.length({precision:n});return i},pointAt:function(t,e){if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();var n=this.tAt(t,e);return this.pointAtT(n)},pointAtLength:function(t,e){var n=this.tAtLength(t,e);return this.pointAtT(n)},pointAtT:function(t){return t<=0?this.start.clone():t>=1?this.end.clone():this.getSkeletonPoints(t).divider},PRECISION:3,round:function(t){return this.start.round(t),this.controlPoint1.round(t),this.controlPoint2.round(t),this.end.round(t),this},scale:function(t,e,n){return this.start.scale(t,e,n),this.controlPoint1.scale(t,e,n),this.controlPoint2.scale(t,e,n),this.end.scale(t,e,n),this},tangentAt:function(t,e){if(!this.isDifferentiable())return null;t<0?t=0:t>1&&(t=1);var n=this.tAt(t,e);return this.tangentAtT(n)},tangentAtLength:function(t,e){if(!this.isDifferentiable())return null;var n=this.tAtLength(t,e);return this.tangentAtT(n)},tangentAtT:function(t){if(!this.isDifferentiable())return null;t<0?t=0:t>1&&(t=1);var e=this.getSkeletonPoints(t),n=e.startControlPoint2,r=e.dividerControlPoint1,i=e.divider,o=new gt(n,r);return o.translate(i.x-n.x,i.y-n.y),o},tAt:function(t,e){if(t<=0)return 0;if(t>=1)return 1;e=e||{};var n=e.precision===void 0?this.PRECISION:e.precision,r=e.subdivisions===void 0?this.getSubdivisions({precision:n}):e.subdivisions,i={precision:n,subdivisions:r},o=this.length(i),a=o*t;return this.tAtLength(a,i)},tAtLength:function(t,e){var n=!0;t<0&&(n=!1,t=-t),e=e||{};for(var r=e.precision===void 0?this.PRECISION:e.precision,i=e.subdivisions===void 0?this.getSubdivisions({precision:r}):e.subdivisions,o={precision:r,subdivisions:i},a,s,l,u,c,f=0,h=i.length,d=1/h,g=0;g<h;g++){var y=n?g:h-1-g,_=i[g],v=_.endpointDistance();if(t<=f+v){a=_,s=y*d,l=(y+1)*d,u=n?t-f:v+f-t,c=n?v+f-t:t-f;break}f+=v}if(!a)return n?1:0;for(var S=this.length(o),C=_I(10,-r);;){var k;if(k=S!==0?u/S:0,k<C)return s;if(k=S!==0?c/S:0,k<C)return l;var x,m,T=a.divide(.5);d/=2;var P=T[0].endpointDistance(),I=T[1].endpointDistance();u<=P?(a=T[0],l-=d,x=u,m=P-x):(a=T[1],s+=d,x=u-P,m=I-x),u=x,c=m}},toPoints:function(t){t=t||{};for(var e=t.precision===void 0?this.PRECISION:t.precision,n=t.subdivisions===void 0?this.getSubdivisions({precision:e}):t.subdivisions,r=[n[0].start.clone()],i=n.length,o=0;o<i;o++){var a=n[o];r.push(a.end.clone())}return r},toPolyline:function(t){return new $r(this.toPoints(t))},toString:function(){return this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(t,e){return this.start.translate(t,e),this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e),this}};nr.prototype.divide=nr.prototype.divideAtT;function _S(t){var e,n,r=[];for(n=arguments.length,e=1;e<n;e++)r.push(arguments[e]);if(!t)throw new Error("Missing a parent object.");var i=Object.create(t);for(n=r.length,e=0;e<n;e++){var o=r[e],a,s;for(s in o)o.hasOwnProperty(s)&&(delete i[s],a=Object.getOwnPropertyDescriptor(o,s),Object.defineProperty(i,s,a))}return i}const Ct=function(t){if(!(this instanceof Ct))return new Ct(t);if(typeof t=="string")return new Ct.parse(t);this.segments=[];var e,n;if(t)if(Array.isArray(t)&&t.length!==0)if(t=t.reduce(function(s,l){return s.concat(l)},[]),n=t.length,t[0].isSegment)for(e=0;e<n;e++){var r=t[e];this.appendSegment(r)}else{var i=null;for(e=0;e<n;e++){var o=t[e];if(!(o instanceof gt||o instanceof nr))throw new Error("Cannot construct a path segment from the provided object.");e===0&&this.appendSegment(Ct.createSegment("M",o.start)),i&&!i.end.equals(o.start)&&this.appendSegment(Ct.createSegment("M",o.start)),o instanceof gt?this.appendSegment(Ct.createSegment("L",o.end)):o instanceof nr&&this.appendSegment(Ct.createSegment("C",o.controlPoint1,o.controlPoint2,o.end)),i=o}}else if(t.isSegment)this.appendSegment(t);else if(t instanceof gt)this.appendSegment(Ct.createSegment("M",t.start)),this.appendSegment(Ct.createSegment("L",t.end));else if(t instanceof nr)this.appendSegment(Ct.createSegment("M",t.start)),this.appendSegment(Ct.createSegment("C",t.controlPoint1,t.controlPoint2,t.end));else if(t instanceof $r){if(!(t.points&&t.points.length!==0))return;for(n=t.points.length,e=0;e<n;e++){var a=t.points[e];e===0?this.appendSegment(Ct.createSegment("M",a)):this.appendSegment(Ct.createSegment("L",a))}}else throw new Error("Cannot construct a path from the provided object.")};Ct.parse=function(t){if(!t)return new Ct;for(var e=new Ct,n=/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g,r=t.match(n),i=r.length,o=0;o<i;o++){var a=r[o],s=/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g,l=a.match(s),u=Ct.createSegment.apply(this,l);e.appendSegment(u)}return e};Ct.createSegment=function(t){if(!t)throw new Error("Type must be provided.");var e=Ct.segmentTypes[t];if(!e)throw new Error(t+" is not a recognized path segment type.");for(var n=[],r=arguments.length,i=1;i<r;i++)n.push(arguments[i]);return hc(e,n)};Ct.prototype={type:pn.Path,appendSegment:function(t){var e=this.segments,n=e.length,r,i=n!==0?e[n-1]:null,o=null;if(Array.isArray(t)){if(t=t.reduce(function(u,c){return u.concat(c)},[]),!t[0].isSegment)throw new Error("Segments required.");for(var a=t.length,s=0;s<a;s++){var l=t[s];r=this.prepareSegment(l,i,o),e.push(r),i=r}}else{if(!t||!t.isSegment)throw new Error("Segment required.");r=this.prepareSegment(t,i,o),e.push(r)}},bbox:function(){var t=this.segments,e=t.length;if(e===0)return null;for(var n,r=0;r<e;r++){var i=t[r];if(i.isVisible){var o=i.bbox();n=n?n.union(o):o}}if(n)return n;var a=t[e-1];return new st(a.end.x,a.end.y,0,0)},clone:function(){for(var t=this.segments,e=t.length,n=new Ct,r=0;r<e;r++){var i=t[r].clone();n.appendSegment(i)}return n},closestPoint:function(t,e){var n=this.closestPointT(t,e);return n?this.pointAtT(n):null},closestPointLength:function(t,e){e=e||{};var n=e.precision===void 0?this.PRECISION:e.precision,r=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions,i={precision:n,segmentSubdivisions:r},o=this.closestPointT(t,i);return o?this.lengthAtT(o,i):0},closestPointNormalizedLength:function(t,e){e=e||{};var n=e.precision===void 0?this.PRECISION:e.precision,r=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions,i={precision:n,segmentSubdivisions:r},o=this.closestPointLength(t,i);if(o===0)return 0;var a=this.length(i);return a===0?0:o/a},closestPointT:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;e=e||{};for(var i=e.precision===void 0?this.PRECISION:e.precision,o=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,a,s=1/0,l=0;l<r;l++){var u=n[l],c=o[l];if(u.isVisible){var f=u.closestPointT(t,{precision:i,subdivisions:c}),h=u.pointAtT(f),d=new gt(h,t).squaredLength();d<s&&(a={segmentIndex:l,value:f},s=d)}}return a||{segmentIndex:r-1,value:1}},closestPointTangent:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;e=e||{};for(var i=e.precision===void 0?this.PRECISION:e.precision,o=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,a,s=1/0,l=0;l<r;l++){var u=n[l],c=o[l];if(u.isDifferentiable()){var f=u.closestPointT(t,{precision:i,subdivisions:c}),h=u.pointAtT(f),d=new gt(h,t).squaredLength();d<s&&(a=u.tangentAtT(f),s=d)}}return a||null},containsPoint:function(t,e){var n=this.toPolylines(e);if(!n)return!1;for(var r=n.length,i=0,o=0;o<r;o++){var a=n[o];a.containsPoint(t)&&i++}return i%2===1},divideAt:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;t<0&&(t=0),t>1&&(t=1),e=e||{};var i=e.precision===void 0?this.PRECISION:e.precision,o=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,a={precision:i,segmentSubdivisions:o},s=this.length(a),l=s*t;return this.divideAtLength(l,a)},divideAtLength:function(t,e){var n=this.segments.length;if(n===0)return null;var r=!0;t<0&&(r=!1,t=-t),e=e||{};var i=e.precision===void 0?this.PRECISION:e.precision,o=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,a,s,l=0,u,c,f,h,d;for(a=0;a<n;a++){var g=r?a:n-1-a;s=this.getSegment(g);var y=o[g],_=s.length({precision:i,subdivisions:y});if(s.isDifferentiable()&&(f=s,h=g,t<=l+_)){c=g,u=s.divideAtLength((r?1:-1)*(t-l),{precision:i,subdivisions:y});break}l+=_}if(!f)return null;u||(c=h,d=r?1:0,u=f.divideAtT(d));var v=this.clone();v.replaceSegment(c,u);var S=c,C=c+1,k=c+2;u[0].isDifferentiable()||(v.removeSegment(S),C-=1,k-=1);var x=v.getSegment(C).start;v.insertSegment(C,Ct.createSegment("M",x)),k+=1,u[1].isDifferentiable()||(v.removeSegment(k-1),k-=1);var m=k-S-1;for(a=k;a<v.segments.length;a++){var T=this.getSegment(a-m);if(s=v.getSegment(a),s.type==="Z"&&!T.subpathStartSegment.end.equals(s.subpathStartSegment.end)){var P=Ct.createSegment("L",T.end);v.replaceSegment(a,P)}}var I=new Ct(v.segments.slice(0,C)),M=new Ct(v.segments.slice(C));return[I,M]},equals:function(t){if(!t)return!1;var e=this.segments,n=t.segments,r=e.length;if(n.length!==r)return!1;for(var i=0;i<r;i++){var o=e[i],a=n[i];if(o.type!==a.type||!o.equals(a))return!1}return!0},getSegment:function(t){var e=this.segments,n=e.length;if(n===0)throw new Error("Path has no segments.");if(t<0&&(t=n+t),t>=n||t<0)throw new Error("Index out of range.");return e[t]},getSegmentSubdivisions:function(t){var e=this.segments,n=e.length;t=t||{};for(var r=t.precision===void 0?this.PRECISION:t.precision,i=[],o=0;o<n;o++){var a=e[o],s=a.getSubdivisions({precision:r});i.push(s)}return i},getSubpaths:function(){const e=this.clone().validate().segments,n=e.length,r=[];for(let i=0;i<n;i++){const o=e[i];o.isSubpathStart?r.push(new Ct(o)):r[r.length-1].appendSegment(o)}return r},insertSegment:function(t,e){var n=this.segments,r=n.length;if(t<0&&(t=r+t+1),t>r||t<0)throw new Error("Index out of range.");var i,o=null,a=null;if(r!==0&&(t>=1?(o=n[t-1],a=o.nextSegment):a=n[0]),Array.isArray(e)){if(e=e.reduce(function(c,f){return c.concat(f)},[]),!e[0].isSegment)throw new Error("Segments required.");for(var s=e.length,l=0;l<s;l++){var u=e[l];i=this.prepareSegment(u,o,a),n.splice(t+l,0,i),o=i}}else{if(!e||!e.isSegment)throw new Error("Segment required.");i=this.prepareSegment(e,o,a),n.splice(t,0,i)}},intersectionWithLine:function(t,e){var n=null,r=this.toPolylines(e);if(!r)return null;for(var i=0,o=r.length;i<o;i++){var a=r[i],s=t.intersect(a);s&&(n||(n=[]),Array.isArray(s)?Array.prototype.push.apply(n,s):n.push(s))}return n},isDifferentiable:function(){for(var t=this.segments,e=t.length,n=0;n<e;n++){var r=t[n];if(r.isDifferentiable())return!0}return!1},isValid:function(){var t=this.segments,e=t.length===0||t[0].type==="M";return e},length:function(t){var e=this.segments,n=e.length;if(n===0)return 0;t=t||{};for(var r=t.precision===void 0?this.PRECISION:t.precision,i=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:r}):t.segmentSubdivisions,o=0,a=0;a<n;a++){var s=e[a],l=i[a];o+=s.length({subdivisions:l})}return o},lengthAtT:function(t,e){var n=this.segments,r=n.length;if(r===0)return 0;var i=t.segmentIndex;if(i<0)return 0;var o=t.value;i>=r?(i=r-1,o=1):o<0?o=0:o>1&&(o=1),e=e||{};for(var a=e.precision===void 0?this.PRECISION:e.precision,s=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:a}):e.segmentSubdivisions,l,u=0,c=0;c<i;c++){var f=n[c];l=s[c],u+=f.length({precisison:a,subdivisions:l})}return f=n[i],l=s[i],u+=f.lengthAtT(o,{precisison:a,subdivisions:l}),u},pointAt:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();e=e||{};var i=e.precision===void 0?this.PRECISION:e.precision,o=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,a={precision:i,segmentSubdivisions:o},s=this.length(a),l=s*t;return this.pointAtLength(l,a)},pointAtLength:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;if(t===0)return this.start.clone();var i=!0;t<0&&(i=!1,t=-t),e=e||{};for(var o=e.precision===void 0?this.PRECISION:e.precision,a=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions,s,l=0,u=0;u<r;u++){var c=i?u:r-1-u,f=n[c],h=a[c],d=f.length({precision:o,subdivisions:h});if(f.isVisible){if(t<=l+d)return f.pointAtLength((i?1:-1)*(t-l),{precision:o,subdivisions:h});s=f}l+=d}if(s)return i?s.end:s.start;var g=n[r-1];return g.end.clone()},pointAtT:function(t){var e=this.segments,n=e.length;if(n===0)return null;var r=t.segmentIndex;if(r<0)return e[0].pointAtT(0);if(r>=n)return e[n-1].pointAtT(1);var i=t.value;return i<0?i=0:i>1&&(i=1),e[r].pointAtT(i)},PRECISION:3,prepareSegment:function(t,e,n){t.previousSegment=e,t.nextSegment=n,e&&(e.nextSegment=t),n&&(n.previousSegment=t);var r=t;return t.isSubpathStart&&(t.subpathStartSegment=t,r=n),r&&this.updateSubpathStartSegment(r),t},removeSegment:function(t){var e=this.segments,n=e.length;if(n===0)throw new Error("Path has no segments.");if(t<0&&(t=n+t),t>=n||t<0)throw new Error("Index out of range.");var r=e.splice(t,1)[0],i=r.previousSegment,o=r.nextSegment;i&&(i.nextSegment=o),o&&(o.previousSegment=i),r.isSubpathStart&&o&&this.updateSubpathStartSegment(o)},replaceSegment:function(t,e){var n=this.segments,r=n.length;if(r===0)throw new Error("Path has no segments.");if(t<0&&(t=r+t),t>=r||t<0)throw new Error("Index out of range.");var i,o=n[t],a=o.previousSegment,s=o.nextSegment,l=o.isSubpathStart;if(Array.isArray(e)){if(e=e.reduce(function(h,d){return h.concat(d)},[]),!e[0].isSegment)throw new Error("Segments required.");n.splice(t,1);for(var u=e.length,c=0;c<u;c++){var f=e[c];i=this.prepareSegment(f,a,s),n.splice(t+c,0,i),a=i,l&&i.isSubpathStart&&(l=!1)}}else{if(!e||!e.isSegment)throw new Error("Segment required.");i=this.prepareSegment(e,a,s),n.splice(t,1,i),l&&i.isSubpathStart&&(l=!1)}l&&s&&this.updateSubpathStartSegment(s)},round:function(t){for(var e=this.segments,n=e.length,r=0;r<n;r++){var i=e[r];i.round(t)}return this},scale:function(t,e,n){for(var r=this.segments,i=r.length,o=0;o<i;o++){var a=r[o];a.scale(t,e,n)}return this},segmentAt:function(t,e){var n=this.segmentIndexAt(t,e);return n?this.getSegment(n):null},segmentAtLength:function(t,e){var n=this.segmentIndexAtLength(t,e);return n?this.getSegment(n):null},segmentIndexAt:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;t<0&&(t=0),t>1&&(t=1),e=e||{};var i=e.precision===void 0?this.PRECISION:e.precision,o=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,a={precision:i,segmentSubdivisions:o},s=this.length(a),l=s*t;return this.segmentIndexAtLength(l,a)},segmentIndexAtLength:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;var i=!0;t<0&&(i=!1,t=-t),e=e||{};for(var o=e.precision===void 0?this.PRECISION:e.precision,a=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions,s=null,l=0,u=0;u<r;u++){var c=i?u:r-1-u,f=n[c],h=a[c],d=f.length({precision:o,subdivisions:h});if(f.isVisible){if(t<=l+d)return c;s=c}l+=d}return s},serialize:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.toString()},tangentAt:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;t<0&&(t=0),t>1&&(t=1),e=e||{};var i=e.precision===void 0?this.PRECISION:e.precision,o=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,a={precision:i,segmentSubdivisions:o},s=this.length(a),l=s*t;return this.tangentAtLength(l,a)},tangentAtLength:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;var i=!0;t<0&&(i=!1,t=-t),e=e||{};for(var o=e.precision===void 0?this.PRECISION:e.precision,a=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions,s,l=0,u=0;u<r;u++){var c=i?u:r-1-u,f=n[c],h=a[c],d=f.length({precision:o,subdivisions:h});if(f.isDifferentiable()){if(t<=l+d)return f.tangentAtLength((i?1:-1)*(t-l),{precision:o,subdivisions:h});s=f}l+=d}if(s){var g=i?1:0;return s.tangentAtT(g)}return null},tangentAtT:function(t){var e=this.segments,n=e.length;if(n===0)return null;var r=t.segmentIndex;if(r<0)return e[0].tangentAtT(0);if(r>=n)return e[n-1].tangentAtT(1);var i=t.value;return i<0?i=0:i>1&&(i=1),e[r].tangentAtT(i)},toPoints:function(t){var e=this.segments,n=e.length;if(n===0)return null;t=t||{};for(var r=t.precision===void 0?this.PRECISION:t.precision,i=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:r}):t.segmentSubdivisions,o=[],a=[],s=0;s<n;s++){var l=e[s];if(l.isVisible){var u=i[s];if(u.length>0){var c=u.map(function(f){return f.start});Array.prototype.push.apply(a,c)}else a.push(l.start)}else a.length>0&&(a.push(e[s-1].end),o.push(a),a=[])}return a.length>0&&(a.push(this.end),o.push(a)),o},toPolylines:function(t){var e=[],n=this.toPoints(t);if(!n)return null;for(var r=0,i=n.length;r<i;r++)e.push(new $r(n[r]));return e},toString:function(){for(var t=this.segments,e=t.length,n="",r=0;r<e;r++){var i=t[r];n+=i.serialize()+" "}return n.trim()},translate:function(t,e){for(var n=this.segments,r=n.length,i=0;i<r;i++){var o=n[i];o.translate(t,e)}return this},updateSubpathStartSegment:function(t){for(var e=t.previousSegment;t&&!t.isSubpathStart;)e?t.subpathStartSegment=e.subpathStartSegment:t.subpathStartSegment=null,e=t,t=t.nextSegment},validate:function(){return this.isValid()||this.insertSegment(0,Ct.createSegment("M",0,0)),this}};Object.defineProperty(Ct.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var t=this.segments,e=t.length;if(e===0)return null;for(var n=0;n<e;n++){var r=t[n];if(r.isVisible)return r.start}return t[e-1].end}});Object.defineProperty(Ct.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var t=this.segments,e=t.length;if(e===0)return null;for(var n=e-1;n>=0;n--){var r=t[n];if(r.isVisible)return r.end}return t[e-1].end}});function hc(t,e){return e.unshift(null),new(Function.prototype.bind.apply(t,e))}var Yg={bbox:function(){throw new Error("Declaration missing for virtual function.")},clone:function(){throw new Error("Declaration missing for virtual function.")},closestPoint:function(){throw new Error("Declaration missing for virtual function.")},closestPointLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointNormalizedLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointT:function(t){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(t);throw new Error("Neither closestPointT() nor closestPointNormalizedLength() function is implemented.")},closestPointTangent:function(){throw new Error("Declaration missing for virtual function.")},divideAt:function(){throw new Error("Declaration missing for virtual function.")},divideAtLength:function(){throw new Error("Declaration missing for virtual function.")},divideAtT:function(t){if(this.divideAt)return this.divideAt(t);throw new Error("Neither divideAtT() nor divideAt() function is implemented.")},equals:function(){throw new Error("Declaration missing for virtual function.")},getSubdivisions:function(){throw new Error("Declaration missing for virtual function.")},isDifferentiable:function(){throw new Error("Declaration missing for virtual function.")},isSegment:!0,isSubpathStart:!1,isVisible:!0,length:function(){throw new Error("Declaration missing for virtual function.")},lengthAtT:function(t){if(t<=0)return 0;var e=this.length();return t>=1?e:e*t},nextSegment:null,pointAt:function(){throw new Error("Declaration missing for virtual function.")},pointAtLength:function(){throw new Error("Declaration missing for virtual function.")},pointAtT:function(t){if(this.pointAt)return this.pointAt(t);throw new Error("Neither pointAtT() nor pointAt() function is implemented.")},previousSegment:null,round:function(){throw new Error("Declaration missing for virtual function.")},subpathStartSegment:null,scale:function(){throw new Error("Declaration missing for virtual function.")},serialize:function(){throw new Error("Declaration missing for virtual function.")},tangentAt:function(){throw new Error("Declaration missing for virtual function.")},tangentAtLength:function(){throw new Error("Declaration missing for virtual function.")},tangentAtT:function(t){if(this.tangentAt)return this.tangentAt(t);throw new Error("Neither tangentAtT() nor tangentAt() function is implemented.")},toString:function(){throw new Error("Declaration missing for virtual function.")},translate:function(){throw new Error("Declaration missing for virtual function.")}};Object.defineProperty(Yg,"end",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(Yg,"start",{configurable:!0,enumerable:!0,get:function(){if(!this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path; OR segment has not yet been added to a path.)");return this.previousSegment.end}});Object.defineProperty(Yg,"type",{configurable:!0,enumerable:!0,get:function(){throw new Error("Bad segment declaration. No type specified.")}});var To=function(){for(var t=[],e=arguments.length,n=0;n<e;n++)t.push(arguments[n]);if(!(this instanceof To))return hc(To,t);if(e===0)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates (none provided).");var r;if(t[0]instanceof gt){if(e===1)return this.end=t[0].end.clone(),this;throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+e+" lines provided).")}else if(typeof t[0]=="string"||typeof t[0]=="number"){if(e===2)return this.end=new we(+t[0],+t[1]),this;if(e<2)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+e+" coordinates provided).");var i;for(r=[],n=0;n<e;n+=2)i=t.slice(n,n+2),r.push(hc(To,i));return r}else{if(e===1)return this.end=new we(t[0]),this;var o;for(r=[],n=0;n<e;n+=1)o=t[n],r.push(new To(o));return r}},Rie={clone:function(){return new To(this.end)},divideAt:function(t){var e=new gt(this.start,this.end),n=e.divideAt(t);return[new To(n[0]),new To(n[1])]},divideAtLength:function(t){var e=new gt(this.start,this.end),n=e.divideAtLength(t);return[new To(n[0]),new To(n[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return this.previousSegment?!this.start.equals(this.end):!1},round:function(t){return this.end.round(t),this},scale:function(t,e,n){return this.end.scale(t,e,n),this},serialize:function(){var t=this.end;return this.type+" "+t.x+" "+t.y},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(t,e){return this.end.translate(t,e),this}};Object.defineProperty(Rie,"type",{configurable:!0,enumerable:!0,value:"L"});To.prototype=_S(Yg,gt.prototype,Rie);var Os=function(){for(var t=[],e=arguments.length,n=0;n<e;n++)t.push(arguments[n]);if(!(this instanceof Os))return hc(Os,t);if(e===0)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates (none provided).");var r;if(t[0]instanceof nr){if(e===1)return this.controlPoint1=t[0].controlPoint1.clone(),this.controlPoint2=t[0].controlPoint2.clone(),this.end=t[0].end.clone(),this;throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+e+" curves provided).")}else if(typeof t[0]=="string"||typeof t[0]=="number"){if(e===6)return this.controlPoint1=new we(+t[0],+t[1]),this.controlPoint2=new we(+t[2],+t[3]),this.end=new we(+t[4],+t[5]),this;if(e<6)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+e+" coordinates provided).");var i;for(r=[],n=0;n<e;n+=6)i=t.slice(n,n+6),r.push(hc(Os,i));return r}else{if(e===3)return this.controlPoint1=new we(t[0]),this.controlPoint2=new we(t[1]),this.end=new we(t[2]),this;if(e<3)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+e+" points provided).");var o;for(r=[],n=0;n<e;n+=3)o=t.slice(n,n+3),r.push(hc(Os,o));return r}},Vie={clone:function(){return new Os(this.controlPoint1,this.controlPoint2,this.end)},divideAt:function(t,e){var n=new nr(this.start,this.controlPoint1,this.controlPoint2,this.end),r=n.divideAt(t,e);return[new Os(r[0]),new Os(r[1])]},divideAtLength:function(t,e){var n=new nr(this.start,this.controlPoint1,this.controlPoint2,this.end),r=n.divideAtLength(t,e);return[new Os(r[0]),new Os(r[1])]},divideAtT:function(t){var e=new nr(this.start,this.controlPoint1,this.controlPoint2,this.end),n=e.divideAtT(t);return[new Os(n[0]),new Os(n[1])]},isDifferentiable:function(){if(!this.previousSegment)return!1;var t=this.start,e=this.controlPoint1,n=this.controlPoint2,r=this.end;return!(t.equals(e)&&e.equals(n)&&n.equals(r))},round:function(t){return this.controlPoint1.round(t),this.controlPoint2.round(t),this.end.round(t),this},scale:function(t,e,n){return this.controlPoint1.scale(t,e,n),this.controlPoint2.scale(t,e,n),this.end.scale(t,e,n),this},serialize:function(){var t=this.controlPoint1,e=this.controlPoint2,n=this.end;return this.type+" "+t.x+" "+t.y+" "+e.x+" "+e.y+" "+n.x+" "+n.y},toString:function(){return this.type+" "+this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(t,e){return this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e),this}};Object.defineProperty(Vie,"type",{configurable:!0,enumerable:!0,value:"C"});Os.prototype=_S(Yg,nr.prototype,Vie);var Xp=function(){for(var t=[],e=arguments.length,n=0;n<e;n++)t.push(arguments[n]);if(!(this instanceof Xp))return hc(Xp,t);if(e===0)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (none provided).");var r;if(t[0]instanceof gt){if(e===1)return this.end=t[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+e+" lines provided).")}else if(t[0]instanceof nr){if(e===1)return this.end=t[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+e+" curves provided).")}else if(typeof t[0]=="string"||typeof t[0]=="number"){if(e===2)return this.end=new we(+t[0],+t[1]),this;if(e<2)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+e+" coordinates provided).");var i;for(r=[],n=0;n<e;n+=2)i=t.slice(n,n+2),n===0?r.push(hc(Xp,i)):r.push(hc(To,i));return r}else{if(e===1)return this.end=new we(t[0]),this;var o;for(r=[],n=0;n<e;n+=1)o=t[n],n===0?r.push(new Xp(o)):r.push(new To(o));return r}},IR={bbox:function(){return null},clone:function(){return new Xp(this.end)},closestPoint:function(){return this.end.clone()},closestPointNormalizedLength:function(){return 0},closestPointLength:function(){return 0},closestPointT:function(){return 1},closestPointTangent:function(){return null},divideAt:function(){return[this.clone(),this.clone()]},divideAtLength:function(){return[this.clone(),this.clone()]},equals:function(t){return this.end.equals(t.end)},getSubdivisions:function(){return[]},isDifferentiable:function(){return!1},isSubpathStart:!0,isVisible:!1,length:function(){return 0},lengthAtT:function(){return 0},pointAt:function(){return this.end.clone()},pointAtLength:function(){return this.end.clone()},pointAtT:function(){return this.end.clone()},round:function(t){return this.end.round(t),this},scale:function(t,e,n){return this.end.scale(t,e,n),this},serialize:function(){var t=this.end;return this.type+" "+t.x+" "+t.y},tangentAt:function(){return null},tangentAtLength:function(){return null},tangentAtT:function(){return null},toString:function(){return this.type+" "+this.end},translate:function(t,e){return this.end.translate(t,e),this}};Object.defineProperty(IR,"start",{configurable:!0,enumerable:!0,get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}});Object.defineProperty(IR,"type",{configurable:!0,enumerable:!0,value:"M"});Xp.prototype=_S(Yg,IR);var d0=function(){for(var t=[],e=arguments.length,n=0;n<e;n++)t.push(arguments[n]);if(!(this instanceof d0))return hc(d0,t);if(e>0)throw new Error("Closepath constructor expects no arguments.");return this},$R={clone:function(){return new d0},divideAt:function(t){var e=new gt(this.start,this.end),n=e.divideAt(t);return[n[1].isDifferentiable()?new To(n[0]):this.clone(),new To(n[1])]},divideAtLength:function(t){var e=new gt(this.start,this.end),n=e.divideAtLength(t);return[n[1].isDifferentiable()?new To(n[0]):this.clone(),new To(n[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!this.previousSegment||!this.subpathStartSegment?!1:!this.start.equals(this.end)},round:function(){return this},scale:function(){return this},serialize:function(){return this.type},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(){return this}};Object.defineProperty($R,"end",{configurable:!0,enumerable:!0,get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. Moveto); OR segment has not yet been added to a path.)");return this.subpathStartSegment.end}});Object.defineProperty($R,"type",{configurable:!0,enumerable:!0,value:"Z"});d0.prototype=_S(Yg,gt.prototype,$R);var N8e=Ct.segmentTypes={L:To,C:Os,M:Xp,Z:d0,z:d0};Ct.regexSupportedData=new RegExp("^[\\s\\d"+Object.keys(N8e).join("")+",.]*$");Ct.isDataSupported=function(t){return typeof t!="string"?!1:this.regexSupportedData.test(t)};const F8e={curveThroughPoints:function(t){return console.warn("deprecated"),new Ct(nr.throughPoints(t)).serialize()},getCurveControlPoints:function(t){console.warn("deprecated");var e=[],n=[],r=t.length-1,i;if(r==1)return e[0]=new we((2*t[0].x+t[1].x)/3,(2*t[0].y+t[1].y)/3),n[0]=new we(2*e[0].x-t[0].x,2*e[0].y-t[0].y),[e,n];var o=[];for(i=1;i<r-1;i++)o[i]=4*t[i].x+2*t[i+1].x;o[0]=t[0].x+2*t[1].x,o[r-1]=(8*t[r-1].x+t[r].x)/2;var a=this.getFirstControlPoints(o);for(i=1;i<r-1;++i)o[i]=4*t[i].y+2*t[i+1].y;o[0]=t[0].y+2*t[1].y,o[r-1]=(8*t[r-1].y+t[r].y)/2;var s=this.getFirstControlPoints(o);for(i=0;i<r;i++)e.push(new we(a[i],s[i])),i<r-1?n.push(new we(2*t[i+1].x-a[i+1],2*t[i+1].y-s[i+1])):n.push(new we((t[r].x+a[r-1])/2,(t[r].y+s[r-1])/2));return[e,n]},getCurveDivider:function(t,e,n,r){console.warn("deprecated");var i=new nr(t,e,n,r);return function(a){var s=i.divide(a);return[{p0:s[0].start,p1:s[0].controlPoint1,p2:s[0].controlPoint2,p3:s[0].end},{p0:s[1].start,p1:s[1].controlPoint1,p2:s[1].controlPoint2,p3:s[1].end}]}},getFirstControlPoints:function(t){console.warn("deprecated");var e=t.length,n=[],r=[],i=2;n[0]=t[0]/i;for(var o=1;o<e;o++)r[o]=1/i,i=(o<e-1?4:3.5)-r[o],n[o]=(t[o]-n[o-1])/i;for(o=1;o<e;o++)n[e-o-1]-=r[e-o]*n[e-o];return n},getInversionSolver:function(t,e,n,r){console.warn("deprecated");var i=new nr(t,e,n,r);return function(a){return i.closestPointT(a)}}},ls=function(t){if(!(this instanceof ls))return new ls(t);if(typeof t=="string")return new ls.parse(t);this.points=Array.isArray(t)?t.map(we):[]};ls.parse=function(t){return new ls(Mie(t))};ls.fromRect=function(t){return new ls([t.topLeft(),t.topRight(),t.bottomRight(),t.bottomLeft()])};ls.prototype=_S($r.prototype,{type:pn.Polygon,clone:function(){return new ls(Nie(this.points))},convexHull:function(){return new ls(Fie(this.points))},lengthPoints:function(){const{start:t,end:e,points:n}=this;return n.length<=1||t.equals(e)?n:[...n,t.clone()]}});function Bie(t,e,n,r){switch(t.type){case pn.Line:{switch(e.type){case pn.Line:return Jp(t,e)}break}case pn.Ellipse:{switch(e.type){case pn.Line:return LR(t,e);case pn.Ellipse:return zie(t,e)}break}case pn.Rect:{switch(e.type){case pn.Line:return jie(t,e);case pn.Ellipse:return Uie(t,e);case pn.Rect:return DR(t,e)}break}case pn.Polyline:{switch(e.type){case pn.Line:return aE(t,e);case pn.Ellipse:return MR(t,e);case pn.Rect:return Wie(t,e);case pn.Polyline:return Hie(t,e)}break}case pn.Polygon:{switch(e.type){case pn.Line:return NR(t,e);case pn.Ellipse:return sE(t,e);case pn.Rect:return Gie(t,e);case pn.Polyline:return qie(t,e);case pn.Polygon:return Yie(t,e)}break}case pn.Path:{switch(e.type){case pn.Line:return Kie(t,e,n);case pn.Ellipse:return Xie(t,e,n);case pn.Rect:return Jie(t,e,n);case pn.Polyline:return FR(t,e,n);case pn.Polygon:return lE(t,e,n);case pn.Path:return Zie(t,e,n,r)}break}}switch(e.type){case pn.Ellipse:case pn.Rect:case pn.Polyline:case pn.Polygon:case pn.Path:return Bie(e,t,r,n);default:throw Error(`The intersection for ${t} and ${e} could not be found.`)}}function Jp(t,e){const n=t.start.x,r=t.start.y,i=t.end.x,o=t.end.y,a=e.start.x,s=e.start.y,l=e.end.x,u=e.end.y,c=i-n,f=o-r,h=l-a,d=u-s,g=n-a,y=r-s,_=c*d-h*f,v=(c*y-f*g)/_,S=(h*y-d*g)/_;return v>=0&&v<=1&&S>=0&&S<=1}function LR(t,e){const n=t.a,r=t.b,i=t.x,o=t.y,a=e.start.x-i,s=e.end.x-i,l=e.start.y-o,u=e.end.y-o,c=n*n,f=r*r,h=s-a,d=u-l,g=h*h/c+d*d/f,y=2*a*h/c+2*l*d/f,_=a*a/c+l*l/f-1,v=y*y-4*g*_;if(v===0){const S=-y/2/g;return S>=0&&S<=1}else if(v>0){const S=Math.sqrt(v),C=(-y+S)/2/g,k=(-y-S)/2/g;return C>=0&&C<=1||k>=0&&k<=1}return!1}function zie(t,e){return R8e(t,0,e,0)}function jie(t,e){const{start:n,end:r}=e,{x:i,y:o,width:a,height:s}=t;return n.x>i+a&&r.x>i+a||n.x<i&&r.x<i||n.y>o+s&&r.y>o+s||n.y<o&&r.y<o?!1:t.containsPoint(e.start)||t.containsPoint(e.end)?!0:Jp(t.topLine(),e)||Jp(t.rightLine(),e)||Jp(t.bottomLine(),e)||Jp(t.leftLine(),e)}function Uie(t,e){return DR(t,st.fromEllipse(e))?sE(ls.fromRect(t),e):!1}function DR(t,e){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}function aE(t,e){return Qie(t,e,{interior:!1})}function MR(t,e){return eoe(t,e,{interior:!1})}function Wie(t,e){return toe(t,e,{interior:!1})}function Hie(t,e){return uE(t,e,{interior:!1})}function NR(t,e){return Qie(t,e,{interior:!0})}function sE(t,e){return eoe(t,e,{interior:!0})}function Gie(t,e){return toe(t,e,{interior:!0})}function qie(t,e){return uE(t,e,{interior:!0})}function Yie(t,e){return RR(t,e,{interior:!0})}function Kie(t,e,n){return t.getSubpaths().some(r=>{const[i]=r.toPolylines(n),{type:o}=r.getSegment(-1);return o==="Z"?NR(i,e):aE(i,e)})}function Xie(t,e,n){return t.getSubpaths().some(r=>{const[i]=r.toPolylines(n),{type:o}=r.getSegment(-1);return o==="Z"?sE(i,e):MR(i,e)})}function Jie(t,e,n){return lE(t,ls.fromRect(e),n)}function FR(t,e,n){return noe(t,e,n,{interior:!1})}function lE(t,e,n){return noe(t,e,n,{interior:!0})}function Zie(t,e,n,r){return t.getSubpaths().some(i=>{const[o]=i.toPolylines(n),{type:a}=i.getSegment(-1);return a==="Z"?lE(e,o,r):FR(e,o,r)})}function Qie(t,e,n={}){const{interior:r=!1}=n;let i;if(r){if(t.containsPoint(e.start))return!0;const{start:s,end:l,points:u}=t;i=l.equals(s)?u:[...u,s]}else i=t.points;const{length:o}=i,a=new gt;for(let s=0;s<o-1;s++)if(a.start=i[s],a.end=i[s+1],Jp(e,a))return!0;return!1}function eoe(t,e,n={}){const{start:r,end:i,points:o}=t;if(e.containsPoint(r))return!0;let a;const{interior:s=!1}=n;if(s){if(t.containsPoint(e.center()))return!0;a=i.equals(r)?o:[...o,r]}else a=o;const{length:l}=a,u=new gt;for(let c=0;c<l-1;c++)if(u.start=a[c],u.end=a[c+1],LR(e,u))return!0;return!1}function toe(t,e,n){const r=ls.fromRect(e);return RR(t,r,n)}function noe(t,e,n,r){return t.getSubpaths().some(i=>{const[o]=i.toPolylines(n),{type:a}=i.getSegment(-1);return a==="Z"?RR(e,o,r):uE(e,o,r)})}function uE(t,e,n={}){const{interior:r=!1}=n;let i;if(r){const{start:l}=e;if(t.containsPoint(l))return!0;i=t.clone().close()}else i=t;const o=e.points,{length:a}=o,s=new gt;for(let l=0;l<a-1;l++)if(s.start=o[l],s.end=o[l+1],aE(i,s))return!0;return!1}function RR(t,e,n){return e.containsPoint(t.start)||uE(t,e.clone().close(),n)}function R8e(t,e,n,r){const{cos:i,sin:o}=Math,a=o(e),s=i(e),l=o(r),u=i(r),c=a*a,f=s*s,h=a*s,d=l*l,g=u*u,y=l*u,_=t.a*t.a,v=t.b*t.b,S=n.a*n.a,C=n.b*n.b,k=_*c+v*f,x=S*d+C*g,m=_*f+v*c,T=S*g+C*d;let P=2*(v-_)*h,I=2*(C-S)*y,M=-2*k*t.x-P*t.y,L=-2*x*n.x-I*n.y,R=-P*t.x-2*m*t.y,V=-I*n.x-2*T*n.y;const z=k*t.x*t.x+m*t.y*t.y+P*t.x*t.y-_*v,ie=x*n.x*n.x+T*n.y*n.y+I*n.x*n.y-S*C;P=P/2,I=I/2,M=M/2,L=L/2,R=R/2,V=V/2;const oe=ah([[k,P,M],[P,m,R],[M,R,z]]),Se=ah([[x,I,L],[I,T,V],[L,V,ie]]),Ae=.33333333*(ah([[x,P,M],[I,m,R],[L,R,z]])+ah([[k,I,M],[P,T,R],[M,V,z]])+ah([[k,P,L],[P,m,V],[M,R,ie]])),Ee=.33333333*(ah([[k,I,L],[P,T,V],[M,V,ie]])+ah([[x,P,L],[I,m,V],[L,R,ie]])+ah([[x,I,M],[I,T,R],[L,V,z]])),_e=_C([[oe,Ae],[Ae,Ee]]),se=_C([[oe,Ee],[Ae,Se]]),ne=_C([[Ae,Ee],[Ee,Se]]);return!(_C([[2*_e,se],[se,2*ne]])>0&&(Ee>0||Ae>0))}function _C(t){return t[0][0]*t[1][1]-t[0][1]*t[1][0]}function ah(t){return t[0][0]*t[1][1]*t[2][2]-t[0][0]*t[1][2]*t[2][1]-t[0][1]*t[1][0]*t[2][2]+t[0][1]*t[1][2]*t[2][0]+t[0][2]*t[1][0]*t[2][1]-t[0][2]*t[1][1]*t[2][0]}const V8e=Object.freeze(Object.defineProperty({__proto__:null,ellipseWithEllipse:zie,ellipseWithLine:LR,exists:Bie,lineWithLine:Jp,pathWithEllipse:Xie,pathWithLine:Kie,pathWithPath:Zie,pathWithPolygon:lE,pathWithPolyline:FR,pathWithRect:Jie,polygonWithEllipse:sE,polygonWithLine:NR,polygonWithPolygon:Yie,polygonWithPolyline:qie,polygonWithRect:Gie,polylineWithEllipse:MR,polylineWithLine:aE,polylineWithPolyline:Hie,polylineWithRect:Wie,rectWithEllipse:Uie,rectWithLine:jie,rectWithRect:DR},Symbol.toStringTag,{value:"Module"})),B8e=V8e,z8e=Object.freeze(Object.defineProperty({__proto__:null,Curve:nr,Ellipse:Ca,Line:gt,Path:Ct,Point:we,Polygon:ls,Polyline:$r,Rect:st,bezier:F8e,ellipse:O8e,intersection:B8e,line:ug,normalizeAngle:_c,point:dT,random:nD,rect:D8e,scale:k8e,snapToGrid:Pg,toDeg:oE,toRad:ss,types:pn},Symbol.toStringTag,{value:"Module"}));var roe={},VR="1.13.6",hW=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},cE=Array.prototype,BR=Object.prototype,dW=typeof Symbol<"u"?Symbol.prototype:null,j8e=cE.push,SS=cE.slice,p_=BR.toString,U8e=BR.hasOwnProperty,ioe=typeof ArrayBuffer<"u",W8e=typeof DataView<"u",H8e=Array.isArray,pW=Object.keys,gW=Object.create,mW=ioe&&ArrayBuffer.isView,G8e=isNaN,q8e=isFinite,ooe=!{toString:null}.propertyIsEnumerable("toString"),vW=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Y8e=Math.pow(2,53)-1;function Ea(t,e){return e=e==null?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r);case 2:return t.call(this,arguments[0],arguments[1],r)}var o=Array(e+1);for(i=0;i<e;i++)o[i]=arguments[i];return o[e]=r,t.apply(this,o)}}function md(t){var e=typeof t;return e==="function"||e==="object"&&!!t}function aoe(t){return t===null}function zR(t){return t===void 0}function jR(t){return t===!0||t===!1||p_.call(t)==="[object Boolean]"}function soe(t){return!!(t&&t.nodeType===1)}function ia(t){var e="[object "+t+"]";return function(n){return p_.call(n)===e}}const fE=ia("String"),UR=ia("Number"),loe=ia("Date"),uoe=ia("RegExp"),coe=ia("Error"),WR=ia("Symbol"),HR=ia("ArrayBuffer");var foe=ia("Function"),K8e=hW.document&&hW.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof K8e!="function"&&(foe=function(t){return typeof t=="function"||!1});const ta=foe,hoe=ia("Object");var doe=W8e&&hoe(new DataView(new ArrayBuffer(8))),GR=typeof Map<"u"&&hoe(new Map),X8e=ia("DataView");function J8e(t){return t!=null&&ta(t.getInt8)&&HR(t.buffer)}const g_=doe?J8e:X8e,vd=H8e||ia("Array");function yd(t,e){return t!=null&&U8e.call(t,e)}var oD=ia("Arguments");(function(){oD(arguments)||(oD=function(t){return yd(t,"callee")})})();const hE=oD;function poe(t){return!WR(t)&&q8e(t)&&!isNaN(parseFloat(t))}function qR(t){return UR(t)&&G8e(t)}function YR(t){return function(){return t}}function goe(t){return function(e){var n=t(e);return typeof n=="number"&&n>=0&&n<=Y8e}}function moe(t){return function(e){return e==null?void 0:e[t]}}const pT=moe("byteLength"),Z8e=goe(pT);var Q8e=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function e6e(t){return mW?mW(t)&&!g_(t):Z8e(t)&&Q8e.test(p_.call(t))}const KR=ioe?e6e:YR(!1),ds=moe("length");function t6e(t){for(var e={},n=t.length,r=0;r<n;++r)e[t[r]]=!0;return{contains:function(i){return e[i]===!0},push:function(i){return e[i]=!0,t.push(i)}}}function voe(t,e){e=t6e(e);var n=vW.length,r=t.constructor,i=ta(r)&&r.prototype||BR,o="constructor";for(yd(t,o)&&!e.contains(o)&&e.push(o);n--;)o=vW[n],o in t&&t[o]!==i[o]&&!e.contains(o)&&e.push(o)}function eo(t){if(!md(t))return[];if(pW)return pW(t);var e=[];for(var n in t)yd(t,n)&&e.push(n);return ooe&&voe(t,e),e}function yoe(t){if(t==null)return!0;var e=ds(t);return typeof e=="number"&&(vd(t)||fE(t)||hE(t))?e===0:ds(eo(t))===0}function XR(t,e){var n=eo(e),r=n.length;if(t==null)return!r;for(var i=Object(t),o=0;o<r;o++){var a=n[o];if(e[a]!==i[a]||!(a in i))return!1}return!0}function fr(t){if(t instanceof fr)return t;if(!(this instanceof fr))return new fr(t);this._wrapped=t}fr.VERSION=VR;fr.prototype.value=function(){return this._wrapped};fr.prototype.valueOf=fr.prototype.toJSON=fr.prototype.value;fr.prototype.toString=function(){return String(this._wrapped)};function yW(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,pT(t))}var bW="[object DataView]";function aD(t,e,n,r){if(t===e)return t!==0||1/t===1/e;if(t==null||e==null)return!1;if(t!==t)return e!==e;var i=typeof t;return i!=="function"&&i!=="object"&&typeof e!="object"?!1:boe(t,e,n,r)}function boe(t,e,n,r){t instanceof fr&&(t=t._wrapped),e instanceof fr&&(e=e._wrapped);var i=p_.call(t);if(i!==p_.call(e))return!1;if(doe&&i=="[object Object]"&&g_(t)){if(!g_(e))return!1;i=bW}switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:+t==0?1/+t===1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return dW.valueOf.call(t)===dW.valueOf.call(e);case"[object ArrayBuffer]":case bW:return boe(yW(t),yW(e),n,r)}var o=i==="[object Array]";if(!o&&KR(t)){var a=pT(t);if(a!==pT(e))return!1;if(t.buffer===e.buffer&&t.byteOffset===e.byteOffset)return!0;o=!0}if(!o){if(typeof t!="object"||typeof e!="object")return!1;var s=t.constructor,l=e.constructor;if(s!==l&&!(ta(s)&&s instanceof s&&ta(l)&&l instanceof l)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],r=r||[];for(var u=n.length;u--;)if(n[u]===t)return r[u]===e;if(n.push(t),r.push(e),o){if(u=t.length,u!==e.length)return!1;for(;u--;)if(!aD(t[u],e[u],n,r))return!1}else{var c=eo(t),f;if(u=c.length,eo(e).length!==u)return!1;for(;u--;)if(f=c[u],!(yd(e,f)&&aD(t[f],e[f],n,r)))return!1}return n.pop(),r.pop(),!0}function _oe(t,e){return aD(t,e)}function z0(t){if(!md(t))return[];var e=[];for(var n in t)e.push(n);return ooe&&voe(t,e),e}function JR(t){var e=ds(t);return function(n){if(n==null)return!1;var r=z0(n);if(ds(r))return!1;for(var i=0;i<e;i++)if(!ta(n[t[i]]))return!1;return t!==xoe||!ta(n[ZR])}}var ZR="forEach",Soe="has",QR=["clear","delete"],woe=["get",Soe,"set"],n6e=QR.concat(ZR,woe),xoe=QR.concat(woe),r6e=["add"].concat(QR,ZR,Soe);const Coe=GR?JR(n6e):ia("Map"),koe=GR?JR(xoe):ia("WeakMap"),Toe=GR?JR(r6e):ia("Set"),Aoe=ia("WeakSet");function Kg(t){for(var e=eo(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r}function Eoe(t){for(var e=eo(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r}function e5(t){for(var e={},n=eo(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e}function m_(t){var e=[];for(var n in t)ta(t[n])&&e.push(n);return e.sort()}function t5(t,e){return function(n){var r=arguments.length;if(e&&(n=Object(n)),r<2||n==null)return n;for(var i=1;i<r;i++)for(var o=arguments[i],a=t(o),s=a.length,l=0;l<s;l++){var u=a[l];(!e||n[u]===void 0)&&(n[u]=o[u])}return n}}const n5=t5(z0),p0=t5(eo),r5=t5(z0,!0);function i6e(){return function(){}}function Poe(t){if(!md(t))return{};if(gW)return gW(t);var e=i6e();e.prototype=t;var n=new e;return e.prototype=null,n}function Ooe(t,e){var n=Poe(t);return e&&p0(n,e),n}function Ioe(t){return md(t)?vd(t)?t.slice():n5({},t):t}function $oe(t,e){return e(t),t}function i5(t){return vd(t)?t:[t]}fr.toPath=i5;function wS(t){return fr.toPath(t)}function o5(t,e){for(var n=e.length,r=0;r<n;r++){if(t==null)return;t=t[e[r]]}return n?t:void 0}function a5(t,e,n){var r=o5(t,wS(e));return zR(r)?n:r}function Loe(t,e){e=wS(e);for(var n=e.length,r=0;r<n;r++){var i=e[r];if(!yd(t,i))return!1;t=t[i]}return!!n}function dE(t){return t}function Og(t){return t=p0({},t),function(e){return XR(e,t)}}function pE(t){return t=wS(t),function(e){return o5(e,t)}}function xS(t,e,n){if(e===void 0)return t;switch(n??3){case 1:return function(r){return t.call(e,r)};case 3:return function(r,i,o){return t.call(e,r,i,o)};case 4:return function(r,i,o,a){return t.call(e,r,i,o,a)}}return function(){return t.apply(e,arguments)}}function Doe(t,e,n){return t==null?dE:ta(t)?xS(t,e,n):md(t)&&!vd(t)?Og(t):pE(t)}function gE(t,e){return Doe(t,e,1/0)}fr.iteratee=gE;function ms(t,e,n){return fr.iteratee!==gE?fr.iteratee(t,e):Doe(t,e,n)}function Moe(t,e,n){e=ms(e,n);for(var r=eo(t),i=r.length,o={},a=0;a<i;a++){var s=r[a];o[s]=e(t[s],s,t)}return o}function s5(){}function Noe(t){return t==null?s5:function(e){return a5(t,e)}}function Foe(t,e,n){var r=Array(Math.max(0,t));e=xS(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r}function gT(t,e){return e==null&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}const g0=Date.now||function(){return new Date().getTime()};function Roe(t){var e=function(o){return t[o]},n="(?:"+eo(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(o){return o=o==null?"":""+o,r.test(o)?o.replace(i,e):o}}const Voe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Boe=Roe(Voe),o6e=e5(Voe),zoe=Roe(o6e),joe=fr.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var SI=/(.)^/,a6e={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},s6e=/\\|'|\r|\n|\u2028|\u2029/g;function l6e(t){return"\\"+a6e[t]}var u6e=/^\s*(\w|\$)+\s*$/;function Uoe(t,e,n){!e&&n&&(e=n),e=r5({},e,fr.templateSettings);var r=RegExp([(e.escape||SI).source,(e.interpolate||SI).source,(e.evaluate||SI).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(r,function(u,c,f,h,d){return o+=t.slice(i,d).replace(s6e,l6e),i=d+u.length,c?o+=`'+
((__t=(`+c+`))==null?'':_.escape(__t))+
'`:f?o+=`'+
((__t=(`+f+`))==null?'':__t)+
'`:h&&(o+=`';
`+h+`
__p+='`),u}),o+=`';
`;var a=e.variable;if(a){if(!u6e.test(a))throw new Error("variable is not a bare identifier: "+a)}else o=`with(obj||{}){
`+o+`}
`,a="obj";o=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+o+`return __p;
`;var s;try{s=new Function(a,"_",o)}catch(u){throw u.source=o,u}var l=function(u){return s.call(this,u,fr)};return l.source="function("+a+`){
`+o+"}",l}function Woe(t,e,n){e=wS(e);var r=e.length;if(!r)return ta(n)?n.call(t):n;for(var i=0;i<r;i++){var o=t==null?void 0:t[e[i]];o===void 0&&(o=n,i=r),t=ta(o)?o.call(t):o}return t}var c6e=0;function Hoe(t){var e=++c6e+"";return t?t+e:e}function Goe(t){var e=fr(t);return e._chain=!0,e}function qoe(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=Poe(t.prototype),a=t.apply(o,i);return md(a)?a:o}var Xg=Ea(function(t,e){var n=Xg.placeholder,r=function(){for(var i=0,o=e.length,a=Array(o),s=0;s<o;s++)a[s]=e[s]===n?arguments[i++]:e[s];for(;i<arguments.length;)a.push(arguments[i++]);return qoe(t,r,this,this,a)};return r});Xg.placeholder=fr;const l5=Ea(function(t,e,n){if(!ta(t))throw new TypeError("Bind must be called on a function");var r=Ea(function(i){return qoe(t,r,e,this,n.concat(i))});return r}),Hs=goe(ds);function Jg(t,e,n,r){if(r=r||[],!e&&e!==0)e=1/0;else if(e<=0)return r.concat(t);for(var i=r.length,o=0,a=ds(t);o<a;o++){var s=t[o];if(Hs(s)&&(vd(s)||hE(s)))if(e>1)Jg(s,e-1,n,r),i=r.length;else for(var l=0,u=s.length;l<u;)r[i++]=s[l++];else n||(r[i++]=s)}return r}const Yoe=Ea(function(t,e){e=Jg(e,!1,!1);var n=e.length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=e[n];t[r]=l5(t[r],t)}return t});function Koe(t,e){var n=function(r){var i=n.cache,o=""+(e?e.apply(this,arguments):r);return yd(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n}const u5=Ea(function(t,e,n){return setTimeout(function(){return t.apply(null,n)},e)}),Xoe=Xg(u5,fr,1);function Joe(t,e,n){var r,i,o,a,s=0;n||(n={});var l=function(){s=n.leading===!1?0:g0(),r=null,a=t.apply(i,o),r||(i=o=null)},u=function(){var c=g0();!s&&n.leading===!1&&(s=c);var f=e-(c-s);return i=this,o=arguments,f<=0||f>e?(r&&(clearTimeout(r),r=null),s=c,a=t.apply(i,o),r||(i=o=null)):!r&&n.trailing!==!1&&(r=setTimeout(l,f)),a};return u.cancel=function(){clearTimeout(r),s=0,r=i=o=null},u}function Zoe(t,e,n){var r,i,o,a,s,l=function(){var c=g0()-i;e>c?r=setTimeout(l,e-c):(r=null,n||(a=t.apply(s,o)),r||(o=s=null))},u=Ea(function(c){return s=this,o=c,i=g0(),r||(r=setTimeout(l,e),n&&(a=t.apply(s,o))),a});return u.cancel=function(){clearTimeout(r),r=o=s=null},u}function Qoe(t,e){return Xg(e,t)}function mE(t){return function(){return!t.apply(this,arguments)}}function eae(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}}function tae(t,e){return function(){if(--t<1)return e.apply(this,arguments)}}function c5(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}}const nae=Xg(c5,2);function f5(t,e,n){e=ms(e,n);for(var r=eo(t),i,o=0,a=r.length;o<a;o++)if(i=r[o],e(t[i],i,t))return i}function rae(t){return function(e,n,r){n=ms(n,r);for(var i=ds(e),o=t>0?0:i-1;o>=0&&o<i;o+=t)if(n(e[o],o,e))return o;return-1}}const vE=rae(1),h5=rae(-1);function d5(t,e,n,r){n=ms(n,r,1);for(var i=n(e),o=0,a=ds(t);o<a;){var s=Math.floor((o+a)/2);n(t[s])<i?o=s+1:a=s}return o}function iae(t,e,n){return function(r,i,o){var a=0,s=ds(r);if(typeof o=="number")t>0?a=o>=0?o:Math.max(o+s,a):s=o>=0?Math.min(o+1,s):o+s+1;else if(n&&o&&s)return o=n(r,i),r[o]===i?o:-1;if(i!==i)return o=e(SS.call(r,a,s),qR),o>=0?o+a:-1;for(o=t>0?a:s-1;o>=0&&o<s;o+=t)if(r[o]===i)return o;return-1}}const p5=iae(1,vE,d5),oae=iae(-1,h5);function v_(t,e,n){var r=Hs(t)?vE:f5,i=r(t,e,n);if(i!==void 0&&i!==-1)return t[i]}function aae(t,e){return v_(t,Og(e))}function gu(t,e,n){e=xS(e,n);var r,i;if(Hs(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var o=eo(t);for(r=0,i=o.length;r<i;r++)e(t[o[r]],o[r],t)}return t}function Ef(t,e,n){e=ms(e,n);for(var r=!Hs(t)&&eo(t),i=(r||t).length,o=Array(i),a=0;a<i;a++){var s=r?r[a]:a;o[a]=e(t[s],s,t)}return o}function sae(t){var e=function(n,r,i,o){var a=!Hs(n)&&eo(n),s=(a||n).length,l=t>0?0:s-1;for(o||(i=n[a?a[l]:l],l+=t);l>=0&&l<s;l+=t){var u=a?a[l]:l;i=r(i,n[u],u,n)}return i};return function(n,r,i,o){var a=arguments.length>=3;return e(n,xS(r,o,4),i,a)}}const Vv=sae(1),mT=sae(-1);function cd(t,e,n){var r=[];return e=ms(e,n),gu(t,function(i,o,a){e(i,o,a)&&r.push(i)}),r}function lae(t,e,n){return cd(t,mE(ms(e)),n)}function vT(t,e,n){e=ms(e,n);for(var r=!Hs(t)&&eo(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(!e(t[a],a,t))return!1}return!0}function yT(t,e,n){e=ms(e,n);for(var r=!Hs(t)&&eo(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(e(t[a],a,t))return!0}return!1}function Pl(t,e,n,r){return Hs(t)||(t=Kg(t)),(typeof n!="number"||r)&&(n=0),p5(t,e,n)>=0}const uae=Ea(function(t,e,n){var r,i;return ta(e)?i=e:(e=wS(e),r=e.slice(0,-1),e=e[e.length-1]),Ef(t,function(o){var a=i;if(!a){if(r&&r.length&&(o=o5(o,r)),o==null)return;a=o[e]}return a==null?a:a.apply(o,n)})});function yE(t,e){return Ef(t,pE(e))}function cae(t,e){return cd(t,Og(e))}function g5(t,e,n){var r=-1/0,i=-1/0,o,a;if(e==null||typeof e=="number"&&typeof t[0]!="object"&&t!=null){t=Hs(t)?t:Kg(t);for(var s=0,l=t.length;s<l;s++)o=t[s],o!=null&&o>r&&(r=o)}else e=ms(e,n),gu(t,function(u,c,f){a=e(u,c,f),(a>i||a===-1/0&&r===-1/0)&&(r=u,i=a)});return r}function fae(t,e,n){var r=1/0,i=1/0,o,a;if(e==null||typeof e=="number"&&typeof t[0]!="object"&&t!=null){t=Hs(t)?t:Kg(t);for(var s=0,l=t.length;s<l;s++)o=t[s],o!=null&&o<r&&(r=o)}else e=ms(e,n),gu(t,function(u,c,f){a=e(u,c,f),(a<i||a===1/0&&r===1/0)&&(r=u,i=a)});return r}var f6e=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function m5(t){return t?vd(t)?SS.call(t):fE(t)?t.match(f6e):Hs(t)?Ef(t,dE):Kg(t):[]}function v5(t,e,n){if(e==null||n)return Hs(t)||(t=Kg(t)),t[gT(t.length-1)];var r=m5(t),i=ds(r);e=Math.max(Math.min(e,i),0);for(var o=i-1,a=0;a<e;a++){var s=gT(a,o),l=r[a];r[a]=r[s],r[s]=l}return r.slice(0,e)}function hae(t){return v5(t,1/0)}function dae(t,e,n){var r=0;return e=ms(e,n),yE(Ef(t,function(i,o,a){return{value:i,index:r++,criteria:e(i,o,a)}}).sort(function(i,o){var a=i.criteria,s=o.criteria;if(a!==s){if(a>s||a===void 0)return 1;if(a<s||s===void 0)return-1}return i.index-o.index}),"value")}function bE(t,e){return function(n,r,i){var o=e?[[],[]]:{};return r=ms(r,i),gu(n,function(a,s){var l=r(a,s,n);t(o,a,l)}),o}}const pae=bE(function(t,e,n){yd(t,n)?t[n].push(e):t[n]=[e]}),gae=bE(function(t,e,n){t[n]=e}),mae=bE(function(t,e,n){yd(t,n)?t[n]++:t[n]=1}),vae=bE(function(t,e,n){t[n?0:1].push(e)},!0);function yae(t){return t==null?0:Hs(t)?t.length:eo(t).length}function h6e(t,e,n){return e in n}const y5=Ea(function(t,e){var n={},r=e[0];if(t==null)return n;ta(r)?(e.length>1&&(r=xS(r,e[1])),e=z0(t)):(r=h6e,e=Jg(e,!1,!1),t=Object(t));for(var i=0,o=e.length;i<o;i++){var a=e[i],s=t[a];r(s,a,t)&&(n[a]=s)}return n}),bae=Ea(function(t,e){var n=e[0],r;return ta(n)?(n=mE(n),e.length>1&&(r=e[1])):(e=Ef(Jg(e,!1,!1),String),n=function(i,o){return!Pl(e,o)}),y5(t,n,r)});function b5(t,e,n){return SS.call(t,0,Math.max(0,t.length-(e==null||n?1:e)))}function Bv(t,e,n){return t==null||t.length<1?e==null||n?void 0:[]:e==null||n?t[0]:b5(t,t.length-e)}function cg(t,e,n){return SS.call(t,e==null||n?1:e)}function _ae(t,e,n){return t==null||t.length<1?e==null||n?void 0:[]:e==null||n?t[t.length-1]:cg(t,Math.max(0,t.length-e))}function Sae(t){return cd(t,Boolean)}function wae(t,e){return Jg(t,e,!1)}const _5=Ea(function(t,e){return e=Jg(e,!0,!0),cd(t,function(n){return!Pl(e,n)})}),xae=Ea(function(t,e){return _5(t,e)});function y_(t,e,n,r){jR(e)||(r=n,n=e,e=!1),n!=null&&(n=ms(n,r));for(var i=[],o=[],a=0,s=ds(t);a<s;a++){var l=t[a],u=n?n(l,a,t):l;e&&!n?((!a||o!==u)&&i.push(l),o=u):n?Pl(o,u)||(o.push(u),i.push(l)):Pl(i,l)||i.push(l)}return i}const Cae=Ea(function(t){return y_(Jg(t,!0,!0))});function kae(t){for(var e=[],n=arguments.length,r=0,i=ds(t);r<i;r++){var o=t[r];if(!Pl(e,o)){var a;for(a=1;a<n&&Pl(arguments[a],o);a++);a===n&&e.push(o)}}return e}function b_(t){for(var e=t&&g5(t,ds).length||0,n=Array(e),r=0;r<e;r++)n[r]=yE(t,r);return n}const Tae=Ea(b_);function Aae(t,e){for(var n={},r=0,i=ds(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n}function Eae(t,e,n){e==null&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;o<r;o++,t+=n)i[o]=t;return i}function Pae(t,e){if(e==null||e<1)return[];for(var n=[],r=0,i=t.length;r<i;)n.push(SS.call(t,r,r+=e));return n}function S5(t,e){return t._chain?fr(e).chain():e}function w5(t){return gu(m_(t),function(e){var n=fr[e]=t[e];fr.prototype[e]=function(){var r=[this._wrapped];return j8e.apply(r,arguments),S5(this,n.apply(fr,r))}}),fr}gu(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=cE[t];fr.prototype[t]=function(){var n=this._wrapped;return n!=null&&(e.apply(n,arguments),(t==="shift"||t==="splice")&&n.length===0&&delete n[0]),S5(this,n)}});gu(["concat","join","slice"],function(t){var e=cE[t];fr.prototype[t]=function(){var n=this._wrapped;return n!=null&&(n=e.apply(n,arguments)),S5(this,n)}});const d6e=Object.freeze(Object.defineProperty({__proto__:null,VERSION:VR,after:tae,all:vT,allKeys:z0,any:yT,assign:p0,before:c5,bind:l5,bindAll:Yoe,chain:Goe,chunk:Pae,clone:Ioe,collect:Ef,compact:Sae,compose:eae,constant:YR,contains:Pl,countBy:mae,create:Ooe,debounce:Zoe,default:fr,defaults:r5,defer:Xoe,delay:u5,detect:v_,difference:_5,drop:cg,each:gu,escape:Boe,every:vT,extend:n5,extendOwn:p0,filter:cd,find:v_,findIndex:vE,findKey:f5,findLastIndex:h5,findWhere:aae,first:Bv,flatten:wae,foldl:Vv,foldr:mT,forEach:gu,functions:m_,get:a5,groupBy:pae,has:Loe,head:Bv,identity:dE,include:Pl,includes:Pl,indexBy:gae,indexOf:p5,initial:b5,inject:Vv,intersection:kae,invert:e5,invoke:uae,isArguments:hE,isArray:vd,isArrayBuffer:HR,isBoolean:jR,isDataView:g_,isDate:loe,isElement:soe,isEmpty:yoe,isEqual:_oe,isError:coe,isFinite:poe,isFunction:ta,isMap:Coe,isMatch:XR,isNaN:qR,isNull:aoe,isNumber:UR,isObject:md,isRegExp:uoe,isSet:Toe,isString:fE,isSymbol:WR,isTypedArray:KR,isUndefined:zR,isWeakMap:koe,isWeakSet:Aoe,iteratee:gE,keys:eo,last:_ae,lastIndexOf:oae,map:Ef,mapObject:Moe,matcher:Og,matches:Og,max:g5,memoize:Koe,methods:m_,min:fae,mixin:w5,negate:mE,noop:s5,now:g0,object:Aae,omit:bae,once:nae,pairs:Eoe,partial:Xg,partition:vae,pick:y5,pluck:yE,property:pE,propertyOf:Noe,random:gT,range:Eae,reduce:Vv,reduceRight:mT,reject:lae,rest:cg,restArguments:Ea,result:Woe,sample:v5,select:cd,shuffle:hae,size:yae,some:yT,sortBy:dae,sortedIndex:d5,tail:cg,take:Bv,tap:$oe,template:Uoe,templateSettings:joe,throttle:Joe,times:Foe,toArray:m5,toPath:i5,transpose:b_,unescape:zoe,union:Cae,uniq:y_,unique:y_,uniqueId:Hoe,unzip:b_,values:Kg,where:cae,without:xae,wrap:Qoe,zip:Tae},Symbol.toStringTag,{value:"Module"}));var sD=w5(d6e);sD._=sD;const p6e=Object.freeze(Object.defineProperty({__proto__:null,VERSION:VR,after:tae,all:vT,allKeys:z0,any:yT,assign:p0,before:c5,bind:l5,bindAll:Yoe,chain:Goe,chunk:Pae,clone:Ioe,collect:Ef,compact:Sae,compose:eae,constant:YR,contains:Pl,countBy:mae,create:Ooe,debounce:Zoe,default:sD,defaults:r5,defer:Xoe,delay:u5,detect:v_,difference:_5,drop:cg,each:gu,escape:Boe,every:vT,extend:n5,extendOwn:p0,filter:cd,find:v_,findIndex:vE,findKey:f5,findLastIndex:h5,findWhere:aae,first:Bv,flatten:wae,foldl:Vv,foldr:mT,forEach:gu,functions:m_,get:a5,groupBy:pae,has:Loe,head:Bv,identity:dE,include:Pl,includes:Pl,indexBy:gae,indexOf:p5,initial:b5,inject:Vv,intersection:kae,invert:e5,invoke:uae,isArguments:hE,isArray:vd,isArrayBuffer:HR,isBoolean:jR,isDataView:g_,isDate:loe,isElement:soe,isEmpty:yoe,isEqual:_oe,isError:coe,isFinite:poe,isFunction:ta,isMap:Coe,isMatch:XR,isNaN:qR,isNull:aoe,isNumber:UR,isObject:md,isRegExp:uoe,isSet:Toe,isString:fE,isSymbol:WR,isTypedArray:KR,isUndefined:zR,isWeakMap:koe,isWeakSet:Aoe,iteratee:gE,keys:eo,last:_ae,lastIndexOf:oae,map:Ef,mapObject:Moe,matcher:Og,matches:Og,max:g5,memoize:Koe,methods:m_,min:fae,mixin:w5,negate:mE,noop:s5,now:g0,object:Aae,omit:bae,once:nae,pairs:Eoe,partial:Xg,partition:vae,pick:y5,pluck:yE,property:pE,propertyOf:Noe,random:gT,range:Eae,reduce:Vv,reduceRight:mT,reject:lae,rest:cg,restArguments:Ea,result:Woe,sample:v5,select:cd,shuffle:hae,size:yae,some:yT,sortBy:dae,sortedIndex:d5,tail:cg,take:Bv,tap:$oe,template:Uoe,templateSettings:joe,throttle:Joe,times:Foe,toArray:m5,toPath:i5,transpose:b_,unescape:zoe,union:Cae,uniq:y_,unique:y_,uniqueId:Hoe,unzip:b_,values:Kg,where:cae,without:xae,wrap:Qoe,zip:Tae},Symbol.toStringTag,{value:"Module"})),g6e=Bre(p6e);var Oae={exports:{}};/*!
 * jQuery JavaScript Library v3.6.4
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-03-08T15:28Z
 */(function(t){(function(e,n){t.exports=e.document?n(e,!0):function(r){if(!r.document)throw new Error("jQuery requires a window with a document");return n(r)}})(typeof window<"u"?window:ui,function(e,n){var r=[],i=Object.getPrototypeOf,o=r.slice,a=r.flat?function(w){return r.flat.call(w)}:function(w){return r.concat.apply([],w)},s=r.push,l=r.indexOf,u={},c=u.toString,f=u.hasOwnProperty,h=f.toString,d=h.call(Object),g={},y=function(E){return typeof E=="function"&&typeof E.nodeType!="number"&&typeof E.item!="function"},_=function(E){return E!=null&&E===E.window},v=e.document,S={type:!0,src:!0,nonce:!0,noModule:!0};function C(w,E,$){$=$||v;var D,W,G=$.createElement("script");if(G.text=w,E)for(D in S)W=E[D]||E.getAttribute&&E.getAttribute(D),W&&G.setAttribute(D,W);$.head.appendChild(G).parentNode.removeChild(G)}function k(w){return w==null?w+"":typeof w=="object"||typeof w=="function"?u[c.call(w)]||"object":typeof w}var x="3.6.4",m=function(w,E){return new m.fn.init(w,E)};m.fn=m.prototype={jquery:x,constructor:m,length:0,toArray:function(){return o.call(this)},get:function(w){return w==null?o.call(this):w<0?this[w+this.length]:this[w]},pushStack:function(w){var E=m.merge(this.constructor(),w);return E.prevObject=this,E},each:function(w){return m.each(this,w)},map:function(w){return this.pushStack(m.map(this,function(E,$){return w.call(E,$,E)}))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(m.grep(this,function(w,E){return(E+1)%2}))},odd:function(){return this.pushStack(m.grep(this,function(w,E){return E%2}))},eq:function(w){var E=this.length,$=+w+(w<0?E:0);return this.pushStack($>=0&&$<E?[this[$]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:r.sort,splice:r.splice},m.extend=m.fn.extend=function(){var w,E,$,D,W,G,K=arguments[0]||{},me=1,he=arguments.length,Le=!1;for(typeof K=="boolean"&&(Le=K,K=arguments[me]||{},me++),typeof K!="object"&&!y(K)&&(K={}),me===he&&(K=this,me--);me<he;me++)if((w=arguments[me])!=null)for(E in w)D=w[E],!(E==="__proto__"||K===D)&&(Le&&D&&(m.isPlainObject(D)||(W=Array.isArray(D)))?($=K[E],W&&!Array.isArray($)?G=[]:!W&&!m.isPlainObject($)?G={}:G=$,W=!1,K[E]=m.extend(Le,G,D)):D!==void 0&&(K[E]=D));return K},m.extend({expando:"jQuery"+(x+Math.random()).replace(/\D/g,""),isReady:!0,error:function(w){throw new Error(w)},noop:function(){},isPlainObject:function(w){var E,$;return!w||c.call(w)!=="[object Object]"?!1:(E=i(w),E?($=f.call(E,"constructor")&&E.constructor,typeof $=="function"&&h.call($)===d):!0)},isEmptyObject:function(w){var E;for(E in w)return!1;return!0},globalEval:function(w,E,$){C(w,{nonce:E&&E.nonce},$)},each:function(w,E){var $,D=0;if(T(w))for($=w.length;D<$&&E.call(w[D],D,w[D])!==!1;D++);else for(D in w)if(E.call(w[D],D,w[D])===!1)break;return w},makeArray:function(w,E){var $=E||[];return w!=null&&(T(Object(w))?m.merge($,typeof w=="string"?[w]:w):s.call($,w)),$},inArray:function(w,E,$){return E==null?-1:l.call(E,w,$)},merge:function(w,E){for(var $=+E.length,D=0,W=w.length;D<$;D++)w[W++]=E[D];return w.length=W,w},grep:function(w,E,$){for(var D,W=[],G=0,K=w.length,me=!$;G<K;G++)D=!E(w[G],G),D!==me&&W.push(w[G]);return W},map:function(w,E,$){var D,W,G=0,K=[];if(T(w))for(D=w.length;G<D;G++)W=E(w[G],G,$),W!=null&&K.push(W);else for(G in w)W=E(w[G],G,$),W!=null&&K.push(W);return a(K)},guid:1,support:g}),typeof Symbol=="function"&&(m.fn[Symbol.iterator]=r[Symbol.iterator]),m.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(w,E){u["[object "+E+"]"]=E.toLowerCase()});function T(w){var E=!!w&&"length"in w&&w.length,$=k(w);return y(w)||_(w)?!1:$==="array"||E===0||typeof E=="number"&&E>0&&E-1 in w}var P=function(w){var E,$,D,W,G,K,me,he,Le,ze,Ye,Ne,je,Ot,nn,vt,ei,ti,kn,On="sizzle"+1*new Date,Jt=w.document,Io=0,In=0,Ur=Do(),$d=Do(),sm=Do(),$o=Do(),Xs=function(ee,pe){return ee===pe&&(Ye=!0),0},Da={}.hasOwnProperty,Lo=[],Ul=Lo.pop,sa=Lo.push,Js=Lo.push,lm=Lo.slice,Ou=function(ee,pe){for(var Te=0,qe=ee.length;Te<qe;Te++)if(ee[Te]===pe)return Te;return-1},dy="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Yn="[\\x20\\t\\r\\n\\f]",Wl="(?:\\\\[\\da-fA-F]{1,6}"+Yn+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",ow="\\["+Yn+"*("+Wl+")(?:"+Yn+"*([*^$|!~]?=)"+Yn+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+Wl+"))|)"+Yn+"*\\]",um=":("+Wl+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+ow+")*)|.*)\\)|)",la=new RegExp(Yn+"+","g"),Bf=new RegExp("^"+Yn+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Yn+"+$","g"),Ld=new RegExp("^"+Yn+"*,"+Yn+"*"),py=new RegExp("^"+Yn+"*([>+~]|"+Yn+")"+Yn+"*"),aw=new RegExp(Yn+"|>"),mP=new RegExp(um),vP=new RegExp("^"+Wl+"$"),cm={ID:new RegExp("^#("+Wl+")"),CLASS:new RegExp("^\\.("+Wl+")"),TAG:new RegExp("^("+Wl+"|[*])"),ATTR:new RegExp("^"+ow),PSEUDO:new RegExp("^"+um),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Yn+"*(even|odd|(([+-]|)(\\d*)n|)"+Yn+"*(?:([+-]|)"+Yn+"*(\\d+)|))"+Yn+"*\\)|)","i"),bool:new RegExp("^(?:"+dy+")$","i"),needsContext:new RegExp("^"+Yn+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Yn+"*((?:-\\d)?\\d*)"+Yn+"*\\)|)(?=[^-]|$)","i")},yP=/HTML$/i,bP=/^(?:input|select|textarea|button)$/i,zf=/^h\d$/i,Dd=/^[^{]+\{\s*\[native \w/,_P=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Md=/[+~]/,Zs=new RegExp("\\\\[\\da-fA-F]{1,6}"+Yn+"?|\\\\([^\\r\\n\\f])","g"),io=function(ee,pe){var Te="0x"+ee.slice(1)-65536;return pe||(Te<0?String.fromCharCode(Te+65536):String.fromCharCode(Te>>10|55296,Te&1023|56320))},Nd=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,sw=function(ee,pe){return pe?ee==="\0"?"�":ee.slice(0,-1)+"\\"+ee.charCodeAt(ee.length-1).toString(16)+" ":"\\"+ee},lw=function(){Ne()},SP=Zt(function(ee){return ee.disabled===!0&&ee.nodeName.toLowerCase()==="fieldset"},{dir:"parentNode",next:"legend"});try{Js.apply(Lo=lm.call(Jt.childNodes),Jt.childNodes),Lo[Jt.childNodes.length].nodeType}catch{Js={apply:Lo.length?function(pe,Te){sa.apply(pe,lm.call(Te))}:function(pe,Te){for(var qe=pe.length,Ie=0;pe[qe++]=Te[Ie++];);pe.length=qe-1}}}function Kn(ee,pe,Te,qe){var Ie,Ve,nt,at,ct,Rt,Dt,jt=pe&&pe.ownerDocument,fn=pe?pe.nodeType:9;if(Te=Te||[],typeof ee!="string"||!ee||fn!==1&&fn!==9&&fn!==11)return Te;if(!qe&&(Ne(pe),pe=pe||je,nn)){if(fn!==11&&(ct=_P.exec(ee)))if(Ie=ct[1]){if(fn===9)if(nt=pe.getElementById(Ie)){if(nt.id===Ie)return Te.push(nt),Te}else return Te;else if(jt&&(nt=jt.getElementById(Ie))&&kn(pe,nt)&&nt.id===Ie)return Te.push(nt),Te}else{if(ct[2])return Js.apply(Te,pe.getElementsByTagName(ee)),Te;if((Ie=ct[3])&&$.getElementsByClassName&&pe.getElementsByClassName)return Js.apply(Te,pe.getElementsByClassName(Ie)),Te}if($.qsa&&!$o[ee+" "]&&(!vt||!vt.test(ee))&&(fn!==1||pe.nodeName.toLowerCase()!=="object")){if(Dt=ee,jt=pe,fn===1&&(aw.test(ee)||py.test(ee))){for(jt=Md.test(ee)&&He(pe.parentNode)||pe,(jt!==pe||!$.scope)&&((at=pe.getAttribute("id"))?at=at.replace(Nd,sw):pe.setAttribute("id",at=On)),Rt=K(ee),Ve=Rt.length;Ve--;)Rt[Ve]=(at?"#"+at:":scope")+" "+dt(Rt[Ve]);Dt=Rt.join(",")}try{return Js.apply(Te,jt.querySelectorAll(Dt)),Te}catch{$o(ee,!0)}finally{at===On&&pe.removeAttribute("id")}}}return he(ee.replace(Bf,"$1"),pe,Te,qe)}function Do(){var ee=[];function pe(Te,qe){return ee.push(Te+" ")>D.cacheLength&&delete pe[ee.shift()],pe[Te+" "]=qe}return pe}function Ma(ee){return ee[On]=!0,ee}function Na(ee){var pe=je.createElement("fieldset");try{return!!ee(pe)}catch{return!1}finally{pe.parentNode&&pe.parentNode.removeChild(pe),pe=null}}function gy(ee,pe){for(var Te=ee.split("|"),qe=Te.length;qe--;)D.attrHandle[Te[qe]]=pe}function uw(ee,pe){var Te=pe&&ee,qe=Te&&ee.nodeType===1&&pe.nodeType===1&&ee.sourceIndex-pe.sourceIndex;if(qe)return qe;if(Te){for(;Te=Te.nextSibling;)if(Te===pe)return-1}return ee?1:-1}function wP(ee){return function(pe){var Te=pe.nodeName.toLowerCase();return Te==="input"&&pe.type===ee}}function xP(ee){return function(pe){var Te=pe.nodeName.toLowerCase();return(Te==="input"||Te==="button")&&pe.type===ee}}function $c(ee){return function(pe){return"form"in pe?pe.parentNode&&pe.disabled===!1?"label"in pe?"label"in pe.parentNode?pe.parentNode.disabled===ee:pe.disabled===ee:pe.isDisabled===ee||pe.isDisabled!==!ee&&SP(pe)===ee:pe.disabled===ee:"label"in pe?pe.disabled===ee:!1}}function Pe(ee){return Ma(function(pe){return pe=+pe,Ma(function(Te,qe){for(var Ie,Ve=ee([],Te.length,pe),nt=Ve.length;nt--;)Te[Ie=Ve[nt]]&&(Te[Ie]=!(qe[Ie]=Te[Ie]))})})}function He(ee){return ee&&typeof ee.getElementsByTagName<"u"&&ee}$=Kn.support={},G=Kn.isXML=function(ee){var pe=ee&&ee.namespaceURI,Te=ee&&(ee.ownerDocument||ee).documentElement;return!yP.test(pe||Te&&Te.nodeName||"HTML")},Ne=Kn.setDocument=function(ee){var pe,Te,qe=ee?ee.ownerDocument||ee:Jt;return qe==je||qe.nodeType!==9||!qe.documentElement||(je=qe,Ot=je.documentElement,nn=!G(je),Jt!=je&&(Te=je.defaultView)&&Te.top!==Te&&(Te.addEventListener?Te.addEventListener("unload",lw,!1):Te.attachEvent&&Te.attachEvent("onunload",lw)),$.scope=Na(function(Ie){return Ot.appendChild(Ie).appendChild(je.createElement("div")),typeof Ie.querySelectorAll<"u"&&!Ie.querySelectorAll(":scope fieldset div").length}),$.cssHas=Na(function(){try{return je.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),$.attributes=Na(function(Ie){return Ie.className="i",!Ie.getAttribute("className")}),$.getElementsByTagName=Na(function(Ie){return Ie.appendChild(je.createComment("")),!Ie.getElementsByTagName("*").length}),$.getElementsByClassName=Dd.test(je.getElementsByClassName),$.getById=Na(function(Ie){return Ot.appendChild(Ie).id=On,!je.getElementsByName||!je.getElementsByName(On).length}),$.getById?(D.filter.ID=function(Ie){var Ve=Ie.replace(Zs,io);return function(nt){return nt.getAttribute("id")===Ve}},D.find.ID=function(Ie,Ve){if(typeof Ve.getElementById<"u"&&nn){var nt=Ve.getElementById(Ie);return nt?[nt]:[]}}):(D.filter.ID=function(Ie){var Ve=Ie.replace(Zs,io);return function(nt){var at=typeof nt.getAttributeNode<"u"&&nt.getAttributeNode("id");return at&&at.value===Ve}},D.find.ID=function(Ie,Ve){if(typeof Ve.getElementById<"u"&&nn){var nt,at,ct,Rt=Ve.getElementById(Ie);if(Rt){if(nt=Rt.getAttributeNode("id"),nt&&nt.value===Ie)return[Rt];for(ct=Ve.getElementsByName(Ie),at=0;Rt=ct[at++];)if(nt=Rt.getAttributeNode("id"),nt&&nt.value===Ie)return[Rt]}return[]}}),D.find.TAG=$.getElementsByTagName?function(Ie,Ve){if(typeof Ve.getElementsByTagName<"u")return Ve.getElementsByTagName(Ie);if($.qsa)return Ve.querySelectorAll(Ie)}:function(Ie,Ve){var nt,at=[],ct=0,Rt=Ve.getElementsByTagName(Ie);if(Ie==="*"){for(;nt=Rt[ct++];)nt.nodeType===1&&at.push(nt);return at}return Rt},D.find.CLASS=$.getElementsByClassName&&function(Ie,Ve){if(typeof Ve.getElementsByClassName<"u"&&nn)return Ve.getElementsByClassName(Ie)},ei=[],vt=[],($.qsa=Dd.test(je.querySelectorAll))&&(Na(function(Ie){var Ve;Ot.appendChild(Ie).innerHTML="<a id='"+On+"'></a><select id='"+On+"-\r\\' msallowcapture=''><option selected=''></option></select>",Ie.querySelectorAll("[msallowcapture^='']").length&&vt.push("[*^$]="+Yn+`*(?:''|"")`),Ie.querySelectorAll("[selected]").length||vt.push("\\["+Yn+"*(?:value|"+dy+")"),Ie.querySelectorAll("[id~="+On+"-]").length||vt.push("~="),Ve=je.createElement("input"),Ve.setAttribute("name",""),Ie.appendChild(Ve),Ie.querySelectorAll("[name='']").length||vt.push("\\["+Yn+"*name"+Yn+"*="+Yn+`*(?:''|"")`),Ie.querySelectorAll(":checked").length||vt.push(":checked"),Ie.querySelectorAll("a#"+On+"+*").length||vt.push(".#.+[+~]"),Ie.querySelectorAll("\\\f"),vt.push("[\\r\\n\\f]")}),Na(function(Ie){Ie.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var Ve=je.createElement("input");Ve.setAttribute("type","hidden"),Ie.appendChild(Ve).setAttribute("name","D"),Ie.querySelectorAll("[name=d]").length&&vt.push("name"+Yn+"*[*^$|!~]?="),Ie.querySelectorAll(":enabled").length!==2&&vt.push(":enabled",":disabled"),Ot.appendChild(Ie).disabled=!0,Ie.querySelectorAll(":disabled").length!==2&&vt.push(":enabled",":disabled"),Ie.querySelectorAll("*,:x"),vt.push(",.*:")})),($.matchesSelector=Dd.test(ti=Ot.matches||Ot.webkitMatchesSelector||Ot.mozMatchesSelector||Ot.oMatchesSelector||Ot.msMatchesSelector))&&Na(function(Ie){$.disconnectedMatch=ti.call(Ie,"*"),ti.call(Ie,"[s!='']:x"),ei.push("!=",um)}),$.cssHas||vt.push(":has"),vt=vt.length&&new RegExp(vt.join("|")),ei=ei.length&&new RegExp(ei.join("|")),pe=Dd.test(Ot.compareDocumentPosition),kn=pe||Dd.test(Ot.contains)?function(Ie,Ve){var nt=Ie.nodeType===9&&Ie.documentElement||Ie,at=Ve&&Ve.parentNode;return Ie===at||!!(at&&at.nodeType===1&&(nt.contains?nt.contains(at):Ie.compareDocumentPosition&&Ie.compareDocumentPosition(at)&16))}:function(Ie,Ve){if(Ve){for(;Ve=Ve.parentNode;)if(Ve===Ie)return!0}return!1},Xs=pe?function(Ie,Ve){if(Ie===Ve)return Ye=!0,0;var nt=!Ie.compareDocumentPosition-!Ve.compareDocumentPosition;return nt||(nt=(Ie.ownerDocument||Ie)==(Ve.ownerDocument||Ve)?Ie.compareDocumentPosition(Ve):1,nt&1||!$.sortDetached&&Ve.compareDocumentPosition(Ie)===nt?Ie==je||Ie.ownerDocument==Jt&&kn(Jt,Ie)?-1:Ve==je||Ve.ownerDocument==Jt&&kn(Jt,Ve)?1:ze?Ou(ze,Ie)-Ou(ze,Ve):0:nt&4?-1:1)}:function(Ie,Ve){if(Ie===Ve)return Ye=!0,0;var nt,at=0,ct=Ie.parentNode,Rt=Ve.parentNode,Dt=[Ie],jt=[Ve];if(!ct||!Rt)return Ie==je?-1:Ve==je?1:ct?-1:Rt?1:ze?Ou(ze,Ie)-Ou(ze,Ve):0;if(ct===Rt)return uw(Ie,Ve);for(nt=Ie;nt=nt.parentNode;)Dt.unshift(nt);for(nt=Ve;nt=nt.parentNode;)jt.unshift(nt);for(;Dt[at]===jt[at];)at++;return at?uw(Dt[at],jt[at]):Dt[at]==Jt?-1:jt[at]==Jt?1:0}),je},Kn.matches=function(ee,pe){return Kn(ee,null,null,pe)},Kn.matchesSelector=function(ee,pe){if(Ne(ee),$.matchesSelector&&nn&&!$o[pe+" "]&&(!ei||!ei.test(pe))&&(!vt||!vt.test(pe)))try{var Te=ti.call(ee,pe);if(Te||$.disconnectedMatch||ee.document&&ee.document.nodeType!==11)return Te}catch{$o(pe,!0)}return Kn(pe,je,null,[ee]).length>0},Kn.contains=function(ee,pe){return(ee.ownerDocument||ee)!=je&&Ne(ee),kn(ee,pe)},Kn.attr=function(ee,pe){(ee.ownerDocument||ee)!=je&&Ne(ee);var Te=D.attrHandle[pe.toLowerCase()],qe=Te&&Da.call(D.attrHandle,pe.toLowerCase())?Te(ee,pe,!nn):void 0;return qe!==void 0?qe:$.attributes||!nn?ee.getAttribute(pe):(qe=ee.getAttributeNode(pe))&&qe.specified?qe.value:null},Kn.escape=function(ee){return(ee+"").replace(Nd,sw)},Kn.error=function(ee){throw new Error("Syntax error, unrecognized expression: "+ee)},Kn.uniqueSort=function(ee){var pe,Te=[],qe=0,Ie=0;if(Ye=!$.detectDuplicates,ze=!$.sortStable&&ee.slice(0),ee.sort(Xs),Ye){for(;pe=ee[Ie++];)pe===ee[Ie]&&(qe=Te.push(Ie));for(;qe--;)ee.splice(Te[qe],1)}return ze=null,ee},W=Kn.getText=function(ee){var pe,Te="",qe=0,Ie=ee.nodeType;if(Ie){if(Ie===1||Ie===9||Ie===11){if(typeof ee.textContent=="string")return ee.textContent;for(ee=ee.firstChild;ee;ee=ee.nextSibling)Te+=W(ee)}else if(Ie===3||Ie===4)return ee.nodeValue}else for(;pe=ee[qe++];)Te+=W(pe);return Te},D=Kn.selectors={cacheLength:50,createPseudo:Ma,match:cm,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(ee){return ee[1]=ee[1].replace(Zs,io),ee[3]=(ee[3]||ee[4]||ee[5]||"").replace(Zs,io),ee[2]==="~="&&(ee[3]=" "+ee[3]+" "),ee.slice(0,4)},CHILD:function(ee){return ee[1]=ee[1].toLowerCase(),ee[1].slice(0,3)==="nth"?(ee[3]||Kn.error(ee[0]),ee[4]=+(ee[4]?ee[5]+(ee[6]||1):2*(ee[3]==="even"||ee[3]==="odd")),ee[5]=+(ee[7]+ee[8]||ee[3]==="odd")):ee[3]&&Kn.error(ee[0]),ee},PSEUDO:function(ee){var pe,Te=!ee[6]&&ee[2];return cm.CHILD.test(ee[0])?null:(ee[3]?ee[2]=ee[4]||ee[5]||"":Te&&mP.test(Te)&&(pe=K(Te,!0))&&(pe=Te.indexOf(")",Te.length-pe)-Te.length)&&(ee[0]=ee[0].slice(0,pe),ee[2]=Te.slice(0,pe)),ee.slice(0,3))}},filter:{TAG:function(ee){var pe=ee.replace(Zs,io).toLowerCase();return ee==="*"?function(){return!0}:function(Te){return Te.nodeName&&Te.nodeName.toLowerCase()===pe}},CLASS:function(ee){var pe=Ur[ee+" "];return pe||(pe=new RegExp("(^|"+Yn+")"+ee+"("+Yn+"|$)"))&&Ur(ee,function(Te){return pe.test(typeof Te.className=="string"&&Te.className||typeof Te.getAttribute<"u"&&Te.getAttribute("class")||"")})},ATTR:function(ee,pe,Te){return function(qe){var Ie=Kn.attr(qe,ee);return Ie==null?pe==="!=":pe?(Ie+="",pe==="="?Ie===Te:pe==="!="?Ie!==Te:pe==="^="?Te&&Ie.indexOf(Te)===0:pe==="*="?Te&&Ie.indexOf(Te)>-1:pe==="$="?Te&&Ie.slice(-Te.length)===Te:pe==="~="?(" "+Ie.replace(la," ")+" ").indexOf(Te)>-1:pe==="|="?Ie===Te||Ie.slice(0,Te.length+1)===Te+"-":!1):!0}},CHILD:function(ee,pe,Te,qe,Ie){var Ve=ee.slice(0,3)!=="nth",nt=ee.slice(-4)!=="last",at=pe==="of-type";return qe===1&&Ie===0?function(ct){return!!ct.parentNode}:function(ct,Rt,Dt){var jt,fn,Nn,Lt,mi,Ai,Mo=Ve!==nt?"nextSibling":"previousSibling",Ar=ct.parentNode,Iu=at&&ct.nodeName.toLowerCase(),jf=!Dt&&!at,qi=!1;if(Ar){if(Ve){for(;Mo;){for(Lt=ct;Lt=Lt[Mo];)if(at?Lt.nodeName.toLowerCase()===Iu:Lt.nodeType===1)return!1;Ai=Mo=ee==="only"&&!Ai&&"nextSibling"}return!0}if(Ai=[nt?Ar.firstChild:Ar.lastChild],nt&&jf){for(Lt=Ar,Nn=Lt[On]||(Lt[On]={}),fn=Nn[Lt.uniqueID]||(Nn[Lt.uniqueID]={}),jt=fn[ee]||[],mi=jt[0]===Io&&jt[1],qi=mi&&jt[2],Lt=mi&&Ar.childNodes[mi];Lt=++mi&&Lt&&Lt[Mo]||(qi=mi=0)||Ai.pop();)if(Lt.nodeType===1&&++qi&&Lt===ct){fn[ee]=[Io,mi,qi];break}}else if(jf&&(Lt=ct,Nn=Lt[On]||(Lt[On]={}),fn=Nn[Lt.uniqueID]||(Nn[Lt.uniqueID]={}),jt=fn[ee]||[],mi=jt[0]===Io&&jt[1],qi=mi),qi===!1)for(;(Lt=++mi&&Lt&&Lt[Mo]||(qi=mi=0)||Ai.pop())&&!((at?Lt.nodeName.toLowerCase()===Iu:Lt.nodeType===1)&&++qi&&(jf&&(Nn=Lt[On]||(Lt[On]={}),fn=Nn[Lt.uniqueID]||(Nn[Lt.uniqueID]={}),fn[ee]=[Io,qi]),Lt===ct)););return qi-=Ie,qi===qe||qi%qe===0&&qi/qe>=0}}},PSEUDO:function(ee,pe){var Te,qe=D.pseudos[ee]||D.setFilters[ee.toLowerCase()]||Kn.error("unsupported pseudo: "+ee);return qe[On]?qe(pe):qe.length>1?(Te=[ee,ee,"",pe],D.setFilters.hasOwnProperty(ee.toLowerCase())?Ma(function(Ie,Ve){for(var nt,at=qe(Ie,pe),ct=at.length;ct--;)nt=Ou(Ie,at[ct]),Ie[nt]=!(Ve[nt]=at[ct])}):function(Ie){return qe(Ie,0,Te)}):qe}},pseudos:{not:Ma(function(ee){var pe=[],Te=[],qe=me(ee.replace(Bf,"$1"));return qe[On]?Ma(function(Ie,Ve,nt,at){for(var ct,Rt=qe(Ie,null,at,[]),Dt=Ie.length;Dt--;)(ct=Rt[Dt])&&(Ie[Dt]=!(Ve[Dt]=ct))}):function(Ie,Ve,nt){return pe[0]=Ie,qe(pe,null,nt,Te),pe[0]=null,!Te.pop()}}),has:Ma(function(ee){return function(pe){return Kn(ee,pe).length>0}}),contains:Ma(function(ee){return ee=ee.replace(Zs,io),function(pe){return(pe.textContent||W(pe)).indexOf(ee)>-1}}),lang:Ma(function(ee){return vP.test(ee||"")||Kn.error("unsupported lang: "+ee),ee=ee.replace(Zs,io).toLowerCase(),function(pe){var Te;do if(Te=nn?pe.lang:pe.getAttribute("xml:lang")||pe.getAttribute("lang"))return Te=Te.toLowerCase(),Te===ee||Te.indexOf(ee+"-")===0;while((pe=pe.parentNode)&&pe.nodeType===1);return!1}}),target:function(ee){var pe=w.location&&w.location.hash;return pe&&pe.slice(1)===ee.id},root:function(ee){return ee===Ot},focus:function(ee){return ee===je.activeElement&&(!je.hasFocus||je.hasFocus())&&!!(ee.type||ee.href||~ee.tabIndex)},enabled:$c(!1),disabled:$c(!0),checked:function(ee){var pe=ee.nodeName.toLowerCase();return pe==="input"&&!!ee.checked||pe==="option"&&!!ee.selected},selected:function(ee){return ee.parentNode&&ee.parentNode.selectedIndex,ee.selected===!0},empty:function(ee){for(ee=ee.firstChild;ee;ee=ee.nextSibling)if(ee.nodeType<6)return!1;return!0},parent:function(ee){return!D.pseudos.empty(ee)},header:function(ee){return zf.test(ee.nodeName)},input:function(ee){return bP.test(ee.nodeName)},button:function(ee){var pe=ee.nodeName.toLowerCase();return pe==="input"&&ee.type==="button"||pe==="button"},text:function(ee){var pe;return ee.nodeName.toLowerCase()==="input"&&ee.type==="text"&&((pe=ee.getAttribute("type"))==null||pe.toLowerCase()==="text")},first:Pe(function(){return[0]}),last:Pe(function(ee,pe){return[pe-1]}),eq:Pe(function(ee,pe,Te){return[Te<0?Te+pe:Te]}),even:Pe(function(ee,pe){for(var Te=0;Te<pe;Te+=2)ee.push(Te);return ee}),odd:Pe(function(ee,pe){for(var Te=1;Te<pe;Te+=2)ee.push(Te);return ee}),lt:Pe(function(ee,pe,Te){for(var qe=Te<0?Te+pe:Te>pe?pe:Te;--qe>=0;)ee.push(qe);return ee}),gt:Pe(function(ee,pe,Te){for(var qe=Te<0?Te+pe:Te;++qe<pe;)ee.push(qe);return ee})}},D.pseudos.nth=D.pseudos.eq;for(E in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})D.pseudos[E]=wP(E);for(E in{submit:!0,reset:!0})D.pseudos[E]=xP(E);function Be(){}Be.prototype=D.filters=D.pseudos,D.setFilters=new Be,K=Kn.tokenize=function(ee,pe){var Te,qe,Ie,Ve,nt,at,ct,Rt=$d[ee+" "];if(Rt)return pe?0:Rt.slice(0);for(nt=ee,at=[],ct=D.preFilter;nt;){(!Te||(qe=Ld.exec(nt)))&&(qe&&(nt=nt.slice(qe[0].length)||nt),at.push(Ie=[])),Te=!1,(qe=py.exec(nt))&&(Te=qe.shift(),Ie.push({value:Te,type:qe[0].replace(Bf," ")}),nt=nt.slice(Te.length));for(Ve in D.filter)(qe=cm[Ve].exec(nt))&&(!ct[Ve]||(qe=ct[Ve](qe)))&&(Te=qe.shift(),Ie.push({value:Te,type:Ve,matches:qe}),nt=nt.slice(Te.length));if(!Te)break}return pe?nt.length:nt?Kn.error(ee):$d(ee,at).slice(0)};function dt(ee){for(var pe=0,Te=ee.length,qe="";pe<Te;pe++)qe+=ee[pe].value;return qe}function Zt(ee,pe,Te){var qe=pe.dir,Ie=pe.next,Ve=Ie||qe,nt=Te&&Ve==="parentNode",at=In++;return pe.first?function(ct,Rt,Dt){for(;ct=ct[qe];)if(ct.nodeType===1||nt)return ee(ct,Rt,Dt);return!1}:function(ct,Rt,Dt){var jt,fn,Nn,Lt=[Io,at];if(Dt){for(;ct=ct[qe];)if((ct.nodeType===1||nt)&&ee(ct,Rt,Dt))return!0}else for(;ct=ct[qe];)if(ct.nodeType===1||nt)if(Nn=ct[On]||(ct[On]={}),fn=Nn[ct.uniqueID]||(Nn[ct.uniqueID]={}),Ie&&Ie===ct.nodeName.toLowerCase())ct=ct[qe]||ct;else{if((jt=fn[Ve])&&jt[0]===Io&&jt[1]===at)return Lt[2]=jt[2];if(fn[Ve]=Lt,Lt[2]=ee(ct,Rt,Dt))return!0}return!1}}function jn(ee){return ee.length>1?function(pe,Te,qe){for(var Ie=ee.length;Ie--;)if(!ee[Ie](pe,Te,qe))return!1;return!0}:ee[0]}function Ti(ee,pe,Te){for(var qe=0,Ie=pe.length;qe<Ie;qe++)Kn(ee,pe[qe],Te);return Te}function tr(ee,pe,Te,qe,Ie){for(var Ve,nt=[],at=0,ct=ee.length,Rt=pe!=null;at<ct;at++)(Ve=ee[at])&&(!Te||Te(Ve,qe,Ie))&&(nt.push(Ve),Rt&&pe.push(at));return nt}function Fd(ee,pe,Te,qe,Ie,Ve){return qe&&!qe[On]&&(qe=Fd(qe)),Ie&&!Ie[On]&&(Ie=Fd(Ie,Ve)),Ma(function(nt,at,ct,Rt){var Dt,jt,fn,Nn=[],Lt=[],mi=at.length,Ai=nt||Ti(pe||"*",ct.nodeType?[ct]:ct,[]),Mo=ee&&(nt||!pe)?tr(Ai,Nn,ee,ct,Rt):Ai,Ar=Te?Ie||(nt?ee:mi||qe)?[]:at:Mo;if(Te&&Te(Mo,Ar,ct,Rt),qe)for(Dt=tr(Ar,Lt),qe(Dt,[],ct,Rt),jt=Dt.length;jt--;)(fn=Dt[jt])&&(Ar[Lt[jt]]=!(Mo[Lt[jt]]=fn));if(nt){if(Ie||ee){if(Ie){for(Dt=[],jt=Ar.length;jt--;)(fn=Ar[jt])&&Dt.push(Mo[jt]=fn);Ie(null,Ar=[],Dt,Rt)}for(jt=Ar.length;jt--;)(fn=Ar[jt])&&(Dt=Ie?Ou(nt,fn):Nn[jt])>-1&&(nt[Dt]=!(at[Dt]=fn))}}else Ar=tr(Ar===at?Ar.splice(mi,Ar.length):Ar),Ie?Ie(null,at,Ar,Rt):Js.apply(at,Ar)})}function my(ee){for(var pe,Te,qe,Ie=ee.length,Ve=D.relative[ee[0].type],nt=Ve||D.relative[" "],at=Ve?1:0,ct=Zt(function(jt){return jt===pe},nt,!0),Rt=Zt(function(jt){return Ou(pe,jt)>-1},nt,!0),Dt=[function(jt,fn,Nn){var Lt=!Ve&&(Nn||fn!==Le)||((pe=fn).nodeType?ct(jt,fn,Nn):Rt(jt,fn,Nn));return pe=null,Lt}];at<Ie;at++)if(Te=D.relative[ee[at].type])Dt=[Zt(jn(Dt),Te)];else{if(Te=D.filter[ee[at].type].apply(null,ee[at].matches),Te[On]){for(qe=++at;qe<Ie&&!D.relative[ee[qe].type];qe++);return Fd(at>1&&jn(Dt),at>1&&dt(ee.slice(0,at-1).concat({value:ee[at-2].type===" "?"*":""})).replace(Bf,"$1"),Te,at<qe&&my(ee.slice(at,qe)),qe<Ie&&my(ee=ee.slice(qe)),qe<Ie&&dt(ee))}Dt.push(Te)}return jn(Dt)}function Fa(ee,pe){var Te=pe.length>0,qe=ee.length>0,Ie=function(Ve,nt,at,ct,Rt){var Dt,jt,fn,Nn=0,Lt="0",mi=Ve&&[],Ai=[],Mo=Le,Ar=Ve||qe&&D.find.TAG("*",Rt),Iu=Io+=Mo==null?1:Math.random()||.1,jf=Ar.length;for(Rt&&(Le=nt==je||nt||Rt);Lt!==jf&&(Dt=Ar[Lt])!=null;Lt++){if(qe&&Dt){for(jt=0,!nt&&Dt.ownerDocument!=je&&(Ne(Dt),at=!nn);fn=ee[jt++];)if(fn(Dt,nt||je,at)){ct.push(Dt);break}Rt&&(Io=Iu)}Te&&((Dt=!fn&&Dt)&&Nn--,Ve&&mi.push(Dt))}if(Nn+=Lt,Te&&Lt!==Nn){for(jt=0;fn=pe[jt++];)fn(mi,Ai,nt,at);if(Ve){if(Nn>0)for(;Lt--;)mi[Lt]||Ai[Lt]||(Ai[Lt]=Ul.call(ct));Ai=tr(Ai)}Js.apply(ct,Ai),Rt&&!Ve&&Ai.length>0&&Nn+pe.length>1&&Kn.uniqueSort(ct)}return Rt&&(Io=Iu,Le=Mo),mi};return Te?Ma(Ie):Ie}return me=Kn.compile=function(ee,pe){var Te,qe=[],Ie=[],Ve=sm[ee+" "];if(!Ve){for(pe||(pe=K(ee)),Te=pe.length;Te--;)Ve=my(pe[Te]),Ve[On]?qe.push(Ve):Ie.push(Ve);Ve=sm(ee,Fa(Ie,qe)),Ve.selector=ee}return Ve},he=Kn.select=function(ee,pe,Te,qe){var Ie,Ve,nt,at,ct,Rt=typeof ee=="function"&&ee,Dt=!qe&&K(ee=Rt.selector||ee);if(Te=Te||[],Dt.length===1){if(Ve=Dt[0]=Dt[0].slice(0),Ve.length>2&&(nt=Ve[0]).type==="ID"&&pe.nodeType===9&&nn&&D.relative[Ve[1].type]){if(pe=(D.find.ID(nt.matches[0].replace(Zs,io),pe)||[])[0],pe)Rt&&(pe=pe.parentNode);else return Te;ee=ee.slice(Ve.shift().value.length)}for(Ie=cm.needsContext.test(ee)?0:Ve.length;Ie--&&(nt=Ve[Ie],!D.relative[at=nt.type]);)if((ct=D.find[at])&&(qe=ct(nt.matches[0].replace(Zs,io),Md.test(Ve[0].type)&&He(pe.parentNode)||pe))){if(Ve.splice(Ie,1),ee=qe.length&&dt(Ve),!ee)return Js.apply(Te,qe),Te;break}}return(Rt||me(ee,Dt))(qe,pe,!nn,Te,!pe||Md.test(ee)&&He(pe.parentNode)||pe),Te},$.sortStable=On.split("").sort(Xs).join("")===On,$.detectDuplicates=!!Ye,Ne(),$.sortDetached=Na(function(ee){return ee.compareDocumentPosition(je.createElement("fieldset"))&1}),Na(function(ee){return ee.innerHTML="<a href='#'></a>",ee.firstChild.getAttribute("href")==="#"})||gy("type|href|height|width",function(ee,pe,Te){if(!Te)return ee.getAttribute(pe,pe.toLowerCase()==="type"?1:2)}),(!$.attributes||!Na(function(ee){return ee.innerHTML="<input/>",ee.firstChild.setAttribute("value",""),ee.firstChild.getAttribute("value")===""}))&&gy("value",function(ee,pe,Te){if(!Te&&ee.nodeName.toLowerCase()==="input")return ee.defaultValue}),Na(function(ee){return ee.getAttribute("disabled")==null})||gy(dy,function(ee,pe,Te){var qe;if(!Te)return ee[pe]===!0?pe.toLowerCase():(qe=ee.getAttributeNode(pe))&&qe.specified?qe.value:null}),Kn}(e);m.find=P,m.expr=P.selectors,m.expr[":"]=m.expr.pseudos,m.uniqueSort=m.unique=P.uniqueSort,m.text=P.getText,m.isXMLDoc=P.isXML,m.contains=P.contains,m.escapeSelector=P.escape;var I=function(w,E,$){for(var D=[],W=$!==void 0;(w=w[E])&&w.nodeType!==9;)if(w.nodeType===1){if(W&&m(w).is($))break;D.push(w)}return D},M=function(w,E){for(var $=[];w;w=w.nextSibling)w.nodeType===1&&w!==E&&$.push(w);return $},L=m.expr.match.needsContext;function R(w,E){return w.nodeName&&w.nodeName.toLowerCase()===E.toLowerCase()}var V=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function z(w,E,$){return y(E)?m.grep(w,function(D,W){return!!E.call(D,W,D)!==$}):E.nodeType?m.grep(w,function(D){return D===E!==$}):typeof E!="string"?m.grep(w,function(D){return l.call(E,D)>-1!==$}):m.filter(E,w,$)}m.filter=function(w,E,$){var D=E[0];return $&&(w=":not("+w+")"),E.length===1&&D.nodeType===1?m.find.matchesSelector(D,w)?[D]:[]:m.find.matches(w,m.grep(E,function(W){return W.nodeType===1}))},m.fn.extend({find:function(w){var E,$,D=this.length,W=this;if(typeof w!="string")return this.pushStack(m(w).filter(function(){for(E=0;E<D;E++)if(m.contains(W[E],this))return!0}));for($=this.pushStack([]),E=0;E<D;E++)m.find(w,W[E],$);return D>1?m.uniqueSort($):$},filter:function(w){return this.pushStack(z(this,w||[],!1))},not:function(w){return this.pushStack(z(this,w||[],!0))},is:function(w){return!!z(this,typeof w=="string"&&L.test(w)?m(w):w||[],!1).length}});var ie,oe=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Se=m.fn.init=function(w,E,$){var D,W;if(!w)return this;if($=$||ie,typeof w=="string")if(w[0]==="<"&&w[w.length-1]===">"&&w.length>=3?D=[null,w,null]:D=oe.exec(w),D&&(D[1]||!E))if(D[1]){if(E=E instanceof m?E[0]:E,m.merge(this,m.parseHTML(D[1],E&&E.nodeType?E.ownerDocument||E:v,!0)),V.test(D[1])&&m.isPlainObject(E))for(D in E)y(this[D])?this[D](E[D]):this.attr(D,E[D]);return this}else return W=v.getElementById(D[2]),W&&(this[0]=W,this.length=1),this;else return!E||E.jquery?(E||$).find(w):this.constructor(E).find(w);else{if(w.nodeType)return this[0]=w,this.length=1,this;if(y(w))return $.ready!==void 0?$.ready(w):w(m)}return m.makeArray(w,this)};Se.prototype=m.fn,ie=m(v);var Ae=/^(?:parents|prev(?:Until|All))/,Ee={children:!0,contents:!0,next:!0,prev:!0};m.fn.extend({has:function(w){var E=m(w,this),$=E.length;return this.filter(function(){for(var D=0;D<$;D++)if(m.contains(this,E[D]))return!0})},closest:function(w,E){var $,D=0,W=this.length,G=[],K=typeof w!="string"&&m(w);if(!L.test(w)){for(;D<W;D++)for($=this[D];$&&$!==E;$=$.parentNode)if($.nodeType<11&&(K?K.index($)>-1:$.nodeType===1&&m.find.matchesSelector($,w))){G.push($);break}}return this.pushStack(G.length>1?m.uniqueSort(G):G)},index:function(w){return w?typeof w=="string"?l.call(m(w),this[0]):l.call(this,w.jquery?w[0]:w):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(w,E){return this.pushStack(m.uniqueSort(m.merge(this.get(),m(w,E))))},addBack:function(w){return this.add(w==null?this.prevObject:this.prevObject.filter(w))}});function _e(w,E){for(;(w=w[E])&&w.nodeType!==1;);return w}m.each({parent:function(w){var E=w.parentNode;return E&&E.nodeType!==11?E:null},parents:function(w){return I(w,"parentNode")},parentsUntil:function(w,E,$){return I(w,"parentNode",$)},next:function(w){return _e(w,"nextSibling")},prev:function(w){return _e(w,"previousSibling")},nextAll:function(w){return I(w,"nextSibling")},prevAll:function(w){return I(w,"previousSibling")},nextUntil:function(w,E,$){return I(w,"nextSibling",$)},prevUntil:function(w,E,$){return I(w,"previousSibling",$)},siblings:function(w){return M((w.parentNode||{}).firstChild,w)},children:function(w){return M(w.firstChild)},contents:function(w){return w.contentDocument!=null&&i(w.contentDocument)?w.contentDocument:(R(w,"template")&&(w=w.content||w),m.merge([],w.childNodes))}},function(w,E){m.fn[w]=function($,D){var W=m.map(this,E,$);return w.slice(-5)!=="Until"&&(D=$),D&&typeof D=="string"&&(W=m.filter(D,W)),this.length>1&&(Ee[w]||m.uniqueSort(W),Ae.test(w)&&W.reverse()),this.pushStack(W)}});var se=/[^\x20\t\r\n\f]+/g;function ne(w){var E={};return m.each(w.match(se)||[],function($,D){E[D]=!0}),E}m.Callbacks=function(w){w=typeof w=="string"?ne(w):m.extend({},w);var E,$,D,W,G=[],K=[],me=-1,he=function(){for(W=W||w.once,D=E=!0;K.length;me=-1)for($=K.shift();++me<G.length;)G[me].apply($[0],$[1])===!1&&w.stopOnFalse&&(me=G.length,$=!1);w.memory||($=!1),E=!1,W&&($?G=[]:G="")},Le={add:function(){return G&&($&&!E&&(me=G.length-1,K.push($)),function ze(Ye){m.each(Ye,function(Ne,je){y(je)?(!w.unique||!Le.has(je))&&G.push(je):je&&je.length&&k(je)!=="string"&&ze(je)})}(arguments),$&&!E&&he()),this},remove:function(){return m.each(arguments,function(ze,Ye){for(var Ne;(Ne=m.inArray(Ye,G,Ne))>-1;)G.splice(Ne,1),Ne<=me&&me--}),this},has:function(ze){return ze?m.inArray(ze,G)>-1:G.length>0},empty:function(){return G&&(G=[]),this},disable:function(){return W=K=[],G=$="",this},disabled:function(){return!G},lock:function(){return W=K=[],!$&&!E&&(G=$=""),this},locked:function(){return!!W},fireWith:function(ze,Ye){return W||(Ye=Ye||[],Ye=[ze,Ye.slice?Ye.slice():Ye],K.push(Ye),E||he()),this},fire:function(){return Le.fireWith(this,arguments),this},fired:function(){return!!D}};return Le};function J(w){return w}function B(w){throw w}function H(w,E,$,D){var W;try{w&&y(W=w.promise)?W.call(w).done(E).fail($):w&&y(W=w.then)?W.call(w,E,$):E.apply(void 0,[w].slice(D))}catch(G){$.apply(void 0,[G])}}m.extend({Deferred:function(w){var E=[["notify","progress",m.Callbacks("memory"),m.Callbacks("memory"),2],["resolve","done",m.Callbacks("once memory"),m.Callbacks("once memory"),0,"resolved"],["reject","fail",m.Callbacks("once memory"),m.Callbacks("once memory"),1,"rejected"]],$="pending",D={state:function(){return $},always:function(){return W.done(arguments).fail(arguments),this},catch:function(G){return D.then(null,G)},pipe:function(){var G=arguments;return m.Deferred(function(K){m.each(E,function(me,he){var Le=y(G[he[4]])&&G[he[4]];W[he[1]](function(){var ze=Le&&Le.apply(this,arguments);ze&&y(ze.promise)?ze.promise().progress(K.notify).done(K.resolve).fail(K.reject):K[he[0]+"With"](this,Le?[ze]:arguments)})}),G=null}).promise()},then:function(G,K,me){var he=0;function Le(ze,Ye,Ne,je){return function(){var Ot=this,nn=arguments,vt=function(){var ti,kn;if(!(ze<he)){if(ti=Ne.apply(Ot,nn),ti===Ye.promise())throw new TypeError("Thenable self-resolution");kn=ti&&(typeof ti=="object"||typeof ti=="function")&&ti.then,y(kn)?je?kn.call(ti,Le(he,Ye,J,je),Le(he,Ye,B,je)):(he++,kn.call(ti,Le(he,Ye,J,je),Le(he,Ye,B,je),Le(he,Ye,J,Ye.notifyWith))):(Ne!==J&&(Ot=void 0,nn=[ti]),(je||Ye.resolveWith)(Ot,nn))}},ei=je?vt:function(){try{vt()}catch(ti){m.Deferred.exceptionHook&&m.Deferred.exceptionHook(ti,ei.stackTrace),ze+1>=he&&(Ne!==B&&(Ot=void 0,nn=[ti]),Ye.rejectWith(Ot,nn))}};ze?ei():(m.Deferred.getStackHook&&(ei.stackTrace=m.Deferred.getStackHook()),e.setTimeout(ei))}}return m.Deferred(function(ze){E[0][3].add(Le(0,ze,y(me)?me:J,ze.notifyWith)),E[1][3].add(Le(0,ze,y(G)?G:J)),E[2][3].add(Le(0,ze,y(K)?K:B))}).promise()},promise:function(G){return G!=null?m.extend(G,D):D}},W={};return m.each(E,function(G,K){var me=K[2],he=K[5];D[K[1]]=me.add,he&&me.add(function(){$=he},E[3-G][2].disable,E[3-G][3].disable,E[0][2].lock,E[0][3].lock),me.add(K[3].fire),W[K[0]]=function(){return W[K[0]+"With"](this===W?void 0:this,arguments),this},W[K[0]+"With"]=me.fireWith}),D.promise(W),w&&w.call(W,W),W},when:function(w){var E=arguments.length,$=E,D=Array($),W=o.call(arguments),G=m.Deferred(),K=function(me){return function(he){D[me]=this,W[me]=arguments.length>1?o.call(arguments):he,--E||G.resolveWith(D,W)}};if(E<=1&&(H(w,G.done(K($)).resolve,G.reject,!E),G.state()==="pending"||y(W[$]&&W[$].then)))return G.then();for(;$--;)H(W[$],K($),G.reject);return G.promise()}});var ae=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;m.Deferred.exceptionHook=function(w,E){e.console&&e.console.warn&&w&&ae.test(w.name)&&e.console.warn("jQuery.Deferred exception: "+w.message,w.stack,E)},m.readyException=function(w){e.setTimeout(function(){throw w})};var te=m.Deferred();m.fn.ready=function(w){return te.then(w).catch(function(E){m.readyException(E)}),this},m.extend({isReady:!1,readyWait:1,ready:function(w){(w===!0?--m.readyWait:m.isReady)||(m.isReady=!0,!(w!==!0&&--m.readyWait>0)&&te.resolveWith(v,[m]))}}),m.ready.then=te.then;function ce(){v.removeEventListener("DOMContentLoaded",ce),e.removeEventListener("load",ce),m.ready()}v.readyState==="complete"||v.readyState!=="loading"&&!v.documentElement.doScroll?e.setTimeout(m.ready):(v.addEventListener("DOMContentLoaded",ce),e.addEventListener("load",ce));var ue=function(w,E,$,D,W,G,K){var me=0,he=w.length,Le=$==null;if(k($)==="object"){W=!0;for(me in $)ue(w,E,me,$[me],!0,G,K)}else if(D!==void 0&&(W=!0,y(D)||(K=!0),Le&&(K?(E.call(w,D),E=null):(Le=E,E=function(ze,Ye,Ne){return Le.call(m(ze),Ne)})),E))for(;me<he;me++)E(w[me],$,K?D:D.call(w[me],me,E(w[me],$)));return W?w:Le?E.call(w):he?E(w[0],$):G},fe=/^-ms-/,ye=/-([a-z])/g;function j(w,E){return E.toUpperCase()}function Y(w){return w.replace(fe,"ms-").replace(ye,j)}var O=function(w){return w.nodeType===1||w.nodeType===9||!+w.nodeType};function F(){this.expando=m.expando+F.uid++}F.uid=1,F.prototype={cache:function(w){var E=w[this.expando];return E||(E={},O(w)&&(w.nodeType?w[this.expando]=E:Object.defineProperty(w,this.expando,{value:E,configurable:!0}))),E},set:function(w,E,$){var D,W=this.cache(w);if(typeof E=="string")W[Y(E)]=$;else for(D in E)W[Y(D)]=E[D];return W},get:function(w,E){return E===void 0?this.cache(w):w[this.expando]&&w[this.expando][Y(E)]},access:function(w,E,$){return E===void 0||E&&typeof E=="string"&&$===void 0?this.get(w,E):(this.set(w,E,$),$!==void 0?$:E)},remove:function(w,E){var $,D=w[this.expando];if(D!==void 0){if(E!==void 0)for(Array.isArray(E)?E=E.map(Y):(E=Y(E),E=E in D?[E]:E.match(se)||[]),$=E.length;$--;)delete D[E[$]];(E===void 0||m.isEmptyObject(D))&&(w.nodeType?w[this.expando]=void 0:delete w[this.expando])}},hasData:function(w){var E=w[this.expando];return E!==void 0&&!m.isEmptyObject(E)}};var U=new F,Q=new F,ve=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ge=/[A-Z]/g;function Me(w){return w==="true"?!0:w==="false"?!1:w==="null"?null:w===+w+""?+w:ve.test(w)?JSON.parse(w):w}function De(w,E,$){var D;if($===void 0&&w.nodeType===1)if(D="data-"+E.replace(ge,"-$&").toLowerCase(),$=w.getAttribute(D),typeof $=="string"){try{$=Me($)}catch{}Q.set(w,E,$)}else $=void 0;return $}m.extend({hasData:function(w){return Q.hasData(w)||U.hasData(w)},data:function(w,E,$){return Q.access(w,E,$)},removeData:function(w,E){Q.remove(w,E)},_data:function(w,E,$){return U.access(w,E,$)},_removeData:function(w,E){U.remove(w,E)}}),m.fn.extend({data:function(w,E){var $,D,W,G=this[0],K=G&&G.attributes;if(w===void 0){if(this.length&&(W=Q.get(G),G.nodeType===1&&!U.get(G,"hasDataAttrs"))){for($=K.length;$--;)K[$]&&(D=K[$].name,D.indexOf("data-")===0&&(D=Y(D.slice(5)),De(G,D,W[D])));U.set(G,"hasDataAttrs",!0)}return W}return typeof w=="object"?this.each(function(){Q.set(this,w)}):ue(this,function(me){var he;if(G&&me===void 0)return he=Q.get(G,w),he!==void 0||(he=De(G,w),he!==void 0)?he:void 0;this.each(function(){Q.set(this,w,me)})},null,E,arguments.length>1,null,!0)},removeData:function(w){return this.each(function(){Q.remove(this,w)})}}),m.extend({queue:function(w,E,$){var D;if(w)return E=(E||"fx")+"queue",D=U.get(w,E),$&&(!D||Array.isArray($)?D=U.access(w,E,m.makeArray($)):D.push($)),D||[]},dequeue:function(w,E){E=E||"fx";var $=m.queue(w,E),D=$.length,W=$.shift(),G=m._queueHooks(w,E),K=function(){m.dequeue(w,E)};W==="inprogress"&&(W=$.shift(),D--),W&&(E==="fx"&&$.unshift("inprogress"),delete G.stop,W.call(w,K,G)),!D&&G&&G.empty.fire()},_queueHooks:function(w,E){var $=E+"queueHooks";return U.get(w,$)||U.access(w,$,{empty:m.Callbacks("once memory").add(function(){U.remove(w,[E+"queue",$])})})}}),m.fn.extend({queue:function(w,E){var $=2;return typeof w!="string"&&(E=w,w="fx",$--),arguments.length<$?m.queue(this[0],w):E===void 0?this:this.each(function(){var D=m.queue(this,w,E);m._queueHooks(this,w),w==="fx"&&D[0]!=="inprogress"&&m.dequeue(this,w)})},dequeue:function(w){return this.each(function(){m.dequeue(this,w)})},clearQueue:function(w){return this.queue(w||"fx",[])},promise:function(w,E){var $,D=1,W=m.Deferred(),G=this,K=this.length,me=function(){--D||W.resolveWith(G,[G])};for(typeof w!="string"&&(E=w,w=void 0),w=w||"fx";K--;)$=U.get(G[K],w+"queueHooks"),$&&$.empty&&(D++,$.empty.add(me));return me(),W.promise(E)}});var tt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Xe=new RegExp("^(?:([+-])=|)("+tt+")([a-z%]*)$","i"),et=["Top","Right","Bottom","Left"],Qe=v.documentElement,pt=function(w){return m.contains(w.ownerDocument,w)},Ft={composed:!0};Qe.getRootNode&&(pt=function(w){return m.contains(w.ownerDocument,w)||w.getRootNode(Ft)===w.ownerDocument});var Kt=function(w,E){return w=E||w,w.style.display==="none"||w.style.display===""&&pt(w)&&m.css(w,"display")==="none"};function wt(w,E,$,D){var W,G,K=20,me=D?function(){return D.cur()}:function(){return m.css(w,E,"")},he=me(),Le=$&&$[3]||(m.cssNumber[E]?"":"px"),ze=w.nodeType&&(m.cssNumber[E]||Le!=="px"&&+he)&&Xe.exec(m.css(w,E));if(ze&&ze[3]!==Le){for(he=he/2,Le=Le||ze[3],ze=+he||1;K--;)m.style(w,E,ze+Le),(1-G)*(1-(G=me()/he||.5))<=0&&(K=0),ze=ze/G;ze=ze*2,m.style(w,E,ze+Le),$=$||[]}return $&&(ze=+ze||+he||0,W=$[1]?ze+($[1]+1)*$[2]:+$[2],D&&(D.unit=Le,D.start=ze,D.end=W)),W}var sn={};function gr(w){var E,$=w.ownerDocument,D=w.nodeName,W=sn[D];return W||(E=$.body.appendChild($.createElement(D)),W=m.css(E,"display"),E.parentNode.removeChild(E),W==="none"&&(W="block"),sn[D]=W,W)}function gi(w,E){for(var $,D,W=[],G=0,K=w.length;G<K;G++)D=w[G],D.style&&($=D.style.display,E?($==="none"&&(W[G]=U.get(D,"display")||null,W[G]||(D.style.display="")),D.style.display===""&&Kt(D)&&(W[G]=gr(D))):$!=="none"&&(W[G]="none",U.set(D,"display",$)));for(G=0;G<K;G++)W[G]!=null&&(w[G].style.display=W[G]);return w}m.fn.extend({show:function(){return gi(this,!0)},hide:function(){return gi(this)},toggle:function(w){return typeof w=="boolean"?w?this.show():this.hide():this.each(function(){Kt(this)?m(this).show():m(this).hide()})}});var Dr=/^(?:checkbox|radio)$/i,fo=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Tr=/^$|^module$|\/(?:java|ecma)script/i;(function(){var w=v.createDocumentFragment(),E=w.appendChild(v.createElement("div")),$=v.createElement("input");$.setAttribute("type","radio"),$.setAttribute("checked","checked"),$.setAttribute("name","t"),E.appendChild($),g.checkClone=E.cloneNode(!0).cloneNode(!0).lastChild.checked,E.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!E.cloneNode(!0).lastChild.defaultValue,E.innerHTML="<option></option>",g.option=!!E.lastChild})();var Bn={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Bn.tbody=Bn.tfoot=Bn.colgroup=Bn.caption=Bn.thead,Bn.th=Bn.td,g.option||(Bn.optgroup=Bn.option=[1,"<select multiple='multiple'>","</select>"]);function zn(w,E){var $;return typeof w.getElementsByTagName<"u"?$=w.getElementsByTagName(E||"*"):typeof w.querySelectorAll<"u"?$=w.querySelectorAll(E||"*"):$=[],E===void 0||E&&R(w,E)?m.merge([w],$):$}function Oa(w,E){for(var $=0,D=w.length;$<D;$++)U.set(w[$],"globalEval",!E||U.get(E[$],"globalEval"))}var Mf=/<|&#?\w+;/;function Ac(w,E,$,D,W){for(var G,K,me,he,Le,ze,Ye=E.createDocumentFragment(),Ne=[],je=0,Ot=w.length;je<Ot;je++)if(G=w[je],G||G===0)if(k(G)==="object")m.merge(Ne,G.nodeType?[G]:G);else if(!Mf.test(G))Ne.push(E.createTextNode(G));else{for(K=K||Ye.appendChild(E.createElement("div")),me=(fo.exec(G)||["",""])[1].toLowerCase(),he=Bn[me]||Bn._default,K.innerHTML=he[1]+m.htmlPrefilter(G)+he[2],ze=he[0];ze--;)K=K.lastChild;m.merge(Ne,K.childNodes),K=Ye.firstChild,K.textContent=""}for(Ye.textContent="",je=0;G=Ne[je++];){if(D&&m.inArray(G,D)>-1){W&&W.push(G);continue}if(Le=pt(G),K=zn(Ye.appendChild(G),"script"),Le&&Oa(K),$)for(ze=0;G=K[ze++];)Tr.test(G.type||"")&&$.push(G)}return Ye}var Tu=/^([^.]*)(?:\.(.+)|)/;function bs(){return!0}function Wi(){return!1}function Au(w,E){return w===ty()==(E==="focus")}function ty(){try{return v.activeElement}catch{}}function Nf(w,E,$,D,W,G){var K,me;if(typeof E=="object"){typeof $!="string"&&(D=D||$,$=void 0);for(me in E)Nf(w,me,$,D,E[me],G);return w}if(D==null&&W==null?(W=$,D=$=void 0):W==null&&(typeof $=="string"?(W=D,D=void 0):(W=D,D=$,$=void 0)),W===!1)W=Wi;else if(!W)return w;return G===1&&(K=W,W=function(he){return m().off(he),K.apply(this,arguments)},W.guid=K.guid||(K.guid=m.guid++)),w.each(function(){m.event.add(this,E,W,D,$)})}m.event={global:{},add:function(w,E,$,D,W){var G,K,me,he,Le,ze,Ye,Ne,je,Ot,nn,vt=U.get(w);if(O(w))for($.handler&&(G=$,$=G.handler,W=G.selector),W&&m.find.matchesSelector(Qe,W),$.guid||($.guid=m.guid++),(he=vt.events)||(he=vt.events=Object.create(null)),(K=vt.handle)||(K=vt.handle=function(ei){return typeof m<"u"&&m.event.triggered!==ei.type?m.event.dispatch.apply(w,arguments):void 0}),E=(E||"").match(se)||[""],Le=E.length;Le--;)me=Tu.exec(E[Le])||[],je=nn=me[1],Ot=(me[2]||"").split(".").sort(),je&&(Ye=m.event.special[je]||{},je=(W?Ye.delegateType:Ye.bindType)||je,Ye=m.event.special[je]||{},ze=m.extend({type:je,origType:nn,data:D,handler:$,guid:$.guid,selector:W,needsContext:W&&m.expr.match.needsContext.test(W),namespace:Ot.join(".")},G),(Ne=he[je])||(Ne=he[je]=[],Ne.delegateCount=0,(!Ye.setup||Ye.setup.call(w,D,Ot,K)===!1)&&w.addEventListener&&w.addEventListener(je,K)),Ye.add&&(Ye.add.call(w,ze),ze.handler.guid||(ze.handler.guid=$.guid)),W?Ne.splice(Ne.delegateCount++,0,ze):Ne.push(ze),m.event.global[je]=!0)},remove:function(w,E,$,D,W){var G,K,me,he,Le,ze,Ye,Ne,je,Ot,nn,vt=U.hasData(w)&&U.get(w);if(!(!vt||!(he=vt.events))){for(E=(E||"").match(se)||[""],Le=E.length;Le--;){if(me=Tu.exec(E[Le])||[],je=nn=me[1],Ot=(me[2]||"").split(".").sort(),!je){for(je in he)m.event.remove(w,je+E[Le],$,D,!0);continue}for(Ye=m.event.special[je]||{},je=(D?Ye.delegateType:Ye.bindType)||je,Ne=he[je]||[],me=me[2]&&new RegExp("(^|\\.)"+Ot.join("\\.(?:.*\\.|)")+"(\\.|$)"),K=G=Ne.length;G--;)ze=Ne[G],(W||nn===ze.origType)&&(!$||$.guid===ze.guid)&&(!me||me.test(ze.namespace))&&(!D||D===ze.selector||D==="**"&&ze.selector)&&(Ne.splice(G,1),ze.selector&&Ne.delegateCount--,Ye.remove&&Ye.remove.call(w,ze));K&&!Ne.length&&((!Ye.teardown||Ye.teardown.call(w,Ot,vt.handle)===!1)&&m.removeEvent(w,je,vt.handle),delete he[je])}m.isEmptyObject(he)&&U.remove(w,"handle events")}},dispatch:function(w){var E,$,D,W,G,K,me=new Array(arguments.length),he=m.event.fix(w),Le=(U.get(this,"events")||Object.create(null))[he.type]||[],ze=m.event.special[he.type]||{};for(me[0]=he,E=1;E<arguments.length;E++)me[E]=arguments[E];if(he.delegateTarget=this,!(ze.preDispatch&&ze.preDispatch.call(this,he)===!1)){for(K=m.event.handlers.call(this,he,Le),E=0;(W=K[E++])&&!he.isPropagationStopped();)for(he.currentTarget=W.elem,$=0;(G=W.handlers[$++])&&!he.isImmediatePropagationStopped();)(!he.rnamespace||G.namespace===!1||he.rnamespace.test(G.namespace))&&(he.handleObj=G,he.data=G.data,D=((m.event.special[G.origType]||{}).handle||G.handler).apply(W.elem,me),D!==void 0&&(he.result=D)===!1&&(he.preventDefault(),he.stopPropagation()));return ze.postDispatch&&ze.postDispatch.call(this,he),he.result}},handlers:function(w,E){var $,D,W,G,K,me=[],he=E.delegateCount,Le=w.target;if(he&&Le.nodeType&&!(w.type==="click"&&w.button>=1)){for(;Le!==this;Le=Le.parentNode||this)if(Le.nodeType===1&&!(w.type==="click"&&Le.disabled===!0)){for(G=[],K={},$=0;$<he;$++)D=E[$],W=D.selector+" ",K[W]===void 0&&(K[W]=D.needsContext?m(W,this).index(Le)>-1:m.find(W,this,null,[Le]).length),K[W]&&G.push(D);G.length&&me.push({elem:Le,handlers:G})}}return Le=this,he<E.length&&me.push({elem:Le,handlers:E.slice(he)}),me},addProp:function(w,E){Object.defineProperty(m.Event.prototype,w,{enumerable:!0,configurable:!0,get:y(E)?function(){if(this.originalEvent)return E(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[w]},set:function($){Object.defineProperty(this,w,{enumerable:!0,configurable:!0,writable:!0,value:$})}})},fix:function(w){return w[m.expando]?w:new m.Event(w)},special:{load:{noBubble:!0},click:{setup:function(w){var E=this||w;return Dr.test(E.type)&&E.click&&R(E,"input")&&Ec(E,"click",bs),!1},trigger:function(w){var E=this||w;return Dr.test(E.type)&&E.click&&R(E,"input")&&Ec(E,"click"),!0},_default:function(w){var E=w.target;return Dr.test(E.type)&&E.click&&R(E,"input")&&U.get(E,"click")||R(E,"a")}},beforeunload:{postDispatch:function(w){w.result!==void 0&&w.originalEvent&&(w.originalEvent.returnValue=w.result)}}}};function Ec(w,E,$){if(!$){U.get(w,E)===void 0&&m.event.add(w,E,bs);return}U.set(w,E,!1),m.event.add(w,E,{namespace:!1,handler:function(D){var W,G,K=U.get(this,E);if(D.isTrigger&1&&this[E]){if(K.length)(m.event.special[E]||{}).delegateType&&D.stopPropagation();else if(K=o.call(arguments),U.set(this,E,K),W=$(this,E),this[E](),G=U.get(this,E),K!==G||W?U.set(this,E,!1):G={},K!==G)return D.stopImmediatePropagation(),D.preventDefault(),G&&G.value}else K.length&&(U.set(this,E,{value:m.event.trigger(m.extend(K[0],m.Event.prototype),K.slice(1),this)}),D.stopImmediatePropagation())}})}m.removeEvent=function(w,E,$){w.removeEventListener&&w.removeEventListener(E,$)},m.Event=function(w,E){if(!(this instanceof m.Event))return new m.Event(w,E);w&&w.type?(this.originalEvent=w,this.type=w.type,this.isDefaultPrevented=w.defaultPrevented||w.defaultPrevented===void 0&&w.returnValue===!1?bs:Wi,this.target=w.target&&w.target.nodeType===3?w.target.parentNode:w.target,this.currentTarget=w.currentTarget,this.relatedTarget=w.relatedTarget):this.type=w,E&&m.extend(this,E),this.timeStamp=w&&w.timeStamp||Date.now(),this[m.expando]=!0},m.Event.prototype={constructor:m.Event,isDefaultPrevented:Wi,isPropagationStopped:Wi,isImmediatePropagationStopped:Wi,isSimulated:!1,preventDefault:function(){var w=this.originalEvent;this.isDefaultPrevented=bs,w&&!this.isSimulated&&w.preventDefault()},stopPropagation:function(){var w=this.originalEvent;this.isPropagationStopped=bs,w&&!this.isSimulated&&w.stopPropagation()},stopImmediatePropagation:function(){var w=this.originalEvent;this.isImmediatePropagationStopped=bs,w&&!this.isSimulated&&w.stopImmediatePropagation(),this.stopPropagation()}},m.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},m.event.addProp),m.each({focus:"focusin",blur:"focusout"},function(w,E){m.event.special[w]={setup:function(){return Ec(this,w,Au),!1},trigger:function(){return Ec(this,w),!0},_default:function($){return U.get($.target,w)},delegateType:E}}),m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(w,E){m.event.special[w]={delegateType:E,bindType:E,handle:function($){var D,W=this,G=$.relatedTarget,K=$.handleObj;return(!G||G!==W&&!m.contains(W,G))&&($.type=K.origType,D=K.handler.apply(this,arguments),$.type=E),D}}}),m.fn.extend({on:function(w,E,$,D){return Nf(this,w,E,$,D)},one:function(w,E,$,D){return Nf(this,w,E,$,D,1)},off:function(w,E,$){var D,W;if(w&&w.preventDefault&&w.handleObj)return D=w.handleObj,m(w.delegateTarget).off(D.namespace?D.origType+"."+D.namespace:D.origType,D.selector,D.handler),this;if(typeof w=="object"){for(W in w)this.off(W,E,w[W]);return this}return(E===!1||typeof E=="function")&&($=E,E=void 0),$===!1&&($=Wi),this.each(function(){m.event.remove(this,w,$,E)})}});var Td=/<script|<style|<link/i,im=/checked\s*(?:[^=]|=\s*.checked.)/i,ny=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Pc(w,E){return R(w,"table")&&R(E.nodeType!==11?E:E.firstChild,"tr")&&m(w).children("tbody")[0]||w}function ry(w){return w.type=(w.getAttribute("type")!==null)+"/"+w.type,w}function Ff(w){return(w.type||"").slice(0,5)==="true/"?w.type=w.type.slice(5):w.removeAttribute("type"),w}function xe(w,E){var $,D,W,G,K,me,he;if(E.nodeType===1){if(U.hasData(w)&&(G=U.get(w),he=G.events,he)){U.remove(E,"handle events");for(W in he)for($=0,D=he[W].length;$<D;$++)m.event.add(E,W,he[W][$])}Q.hasData(w)&&(K=Q.access(w),me=m.extend({},K),Q.set(E,me))}}function le(w,E){var $=E.nodeName.toLowerCase();$==="input"&&Dr.test(w.type)?E.checked=w.checked:($==="input"||$==="textarea")&&(E.defaultValue=w.defaultValue)}function Ce(w,E,$,D){E=a(E);var W,G,K,me,he,Le,ze=0,Ye=w.length,Ne=Ye-1,je=E[0],Ot=y(je);if(Ot||Ye>1&&typeof je=="string"&&!g.checkClone&&im.test(je))return w.each(function(nn){var vt=w.eq(nn);Ot&&(E[0]=je.call(this,nn,vt.html())),Ce(vt,E,$,D)});if(Ye&&(W=Ac(E,w[0].ownerDocument,!1,w,D),G=W.firstChild,W.childNodes.length===1&&(W=G),G||D)){for(K=m.map(zn(W,"script"),ry),me=K.length;ze<Ye;ze++)he=W,ze!==Ne&&(he=m.clone(he,!0,!0),me&&m.merge(K,zn(he,"script"))),$.call(w[ze],he,ze);if(me)for(Le=K[K.length-1].ownerDocument,m.map(K,Ff),ze=0;ze<me;ze++)he=K[ze],Tr.test(he.type||"")&&!U.access(he,"globalEval")&&m.contains(Le,he)&&(he.src&&(he.type||"").toLowerCase()!=="module"?m._evalUrl&&!he.noModule&&m._evalUrl(he.src,{nonce:he.nonce||he.getAttribute("nonce")},Le):C(he.textContent.replace(ny,""),he,Le))}return w}function Re(w,E,$){for(var D,W=E?m.filter(E,w):w,G=0;(D=W[G])!=null;G++)!$&&D.nodeType===1&&m.cleanData(zn(D)),D.parentNode&&($&&pt(D)&&Oa(zn(D,"script")),D.parentNode.removeChild(D));return w}m.extend({htmlPrefilter:function(w){return w},clone:function(w,E,$){var D,W,G,K,me=w.cloneNode(!0),he=pt(w);if(!g.noCloneChecked&&(w.nodeType===1||w.nodeType===11)&&!m.isXMLDoc(w))for(K=zn(me),G=zn(w),D=0,W=G.length;D<W;D++)le(G[D],K[D]);if(E)if($)for(G=G||zn(w),K=K||zn(me),D=0,W=G.length;D<W;D++)xe(G[D],K[D]);else xe(w,me);return K=zn(me,"script"),K.length>0&&Oa(K,!he&&zn(w,"script")),me},cleanData:function(w){for(var E,$,D,W=m.event.special,G=0;($=w[G])!==void 0;G++)if(O($)){if(E=$[U.expando]){if(E.events)for(D in E.events)W[D]?m.event.remove($,D):m.removeEvent($,D,E.handle);$[U.expando]=void 0}$[Q.expando]&&($[Q.expando]=void 0)}}}),m.fn.extend({detach:function(w){return Re(this,w,!0)},remove:function(w){return Re(this,w)},text:function(w){return ue(this,function(E){return E===void 0?m.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=E)})},null,w,arguments.length)},append:function(){return Ce(this,arguments,function(w){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var E=Pc(this,w);E.appendChild(w)}})},prepend:function(){return Ce(this,arguments,function(w){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var E=Pc(this,w);E.insertBefore(w,E.firstChild)}})},before:function(){return Ce(this,arguments,function(w){this.parentNode&&this.parentNode.insertBefore(w,this)})},after:function(){return Ce(this,arguments,function(w){this.parentNode&&this.parentNode.insertBefore(w,this.nextSibling)})},empty:function(){for(var w,E=0;(w=this[E])!=null;E++)w.nodeType===1&&(m.cleanData(zn(w,!1)),w.textContent="");return this},clone:function(w,E){return w=w??!1,E=E??w,this.map(function(){return m.clone(this,w,E)})},html:function(w){return ue(this,function(E){var $=this[0]||{},D=0,W=this.length;if(E===void 0&&$.nodeType===1)return $.innerHTML;if(typeof E=="string"&&!Td.test(E)&&!Bn[(fo.exec(E)||["",""])[1].toLowerCase()]){E=m.htmlPrefilter(E);try{for(;D<W;D++)$=this[D]||{},$.nodeType===1&&(m.cleanData(zn($,!1)),$.innerHTML=E);$=0}catch{}}$&&this.empty().append(E)},null,w,arguments.length)},replaceWith:function(){var w=[];return Ce(this,arguments,function(E){var $=this.parentNode;m.inArray(this,w)<0&&(m.cleanData(zn(this)),$&&$.replaceChild(E,this))},w)}}),m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(w,E){m.fn[w]=function($){for(var D,W=[],G=m($),K=G.length-1,me=0;me<=K;me++)D=me===K?this:this.clone(!0),m(G[me])[E](D),s.apply(W,D.get());return this.pushStack(W)}});var Fe=new RegExp("^("+tt+")(?!px)[a-z%]+$","i"),xt=/^--/,kt=function(w){var E=w.ownerDocument.defaultView;return(!E||!E.opener)&&(E=e),E.getComputedStyle(w)},wn=function(w,E,$){var D,W,G={};for(W in E)G[W]=w.style[W],w.style[W]=E[W];D=$.call(w);for(W in E)w.style[W]=G[W];return D},sr=new RegExp(et.join("|"),"i"),Mr="[\\x20\\t\\r\\n\\f]",vn=new RegExp("^"+Mr+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Mr+"+$","g");(function(){function w(){if(Le){he.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Le.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Qe.appendChild(he).appendChild(Le);var ze=e.getComputedStyle(Le);$=ze.top!=="1%",me=E(ze.marginLeft)===12,Le.style.right="60%",G=E(ze.right)===36,D=E(ze.width)===36,Le.style.position="absolute",W=E(Le.offsetWidth/3)===12,Qe.removeChild(he),Le=null}}function E(ze){return Math.round(parseFloat(ze))}var $,D,W,G,K,me,he=v.createElement("div"),Le=v.createElement("div");Le.style&&(Le.style.backgroundClip="content-box",Le.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle=Le.style.backgroundClip==="content-box",m.extend(g,{boxSizingReliable:function(){return w(),D},pixelBoxStyles:function(){return w(),G},pixelPosition:function(){return w(),$},reliableMarginLeft:function(){return w(),me},scrollboxSize:function(){return w(),W},reliableTrDimensions:function(){var ze,Ye,Ne,je;return K==null&&(ze=v.createElement("table"),Ye=v.createElement("tr"),Ne=v.createElement("div"),ze.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Ye.style.cssText="border:1px solid",Ye.style.height="1px",Ne.style.height="9px",Ne.style.display="block",Qe.appendChild(ze).appendChild(Ye).appendChild(Ne),je=e.getComputedStyle(Ye),K=parseInt(je.height,10)+parseInt(je.borderTopWidth,10)+parseInt(je.borderBottomWidth,10)===Ye.offsetHeight,Qe.removeChild(ze)),K}}))})();function qn(w,E,$){var D,W,G,K,me=xt.test(E),he=w.style;return $=$||kt(w),$&&(K=$.getPropertyValue(E)||$[E],me&&K&&(K=K.replace(vn,"$1")||void 0),K===""&&!pt(w)&&(K=m.style(w,E)),!g.pixelBoxStyles()&&Fe.test(K)&&sr.test(E)&&(D=he.width,W=he.minWidth,G=he.maxWidth,he.minWidth=he.maxWidth=he.width=K,K=$.width,he.width=D,he.minWidth=W,he.maxWidth=G)),K!==void 0?K+"":K}function Nr(w,E){return{get:function(){if(w()){delete this.get;return}return(this.get=E).apply(this,arguments)}}}var Xt=["Webkit","Moz","ms"],hr=v.createElement("div").style,mr={};function vr(w){for(var E=w[0].toUpperCase()+w.slice(1),$=Xt.length;$--;)if(w=Xt[$]+E,w in hr)return w}function ho(w){var E=m.cssProps[w]||mr[w];return E||(w in hr?w:mr[w]=vr(w)||w)}var Ia=/^(none|table(?!-c[ea]).+)/,$a={position:"absolute",visibility:"hidden",display:"block"},zl={letterSpacing:"0",fontWeight:"400"};function _s(w,E,$){var D=Xe.exec(E);return D?Math.max(0,D[2]-($||0))+(D[3]||"px"):E}function Hi(w,E,$,D,W,G){var K=E==="width"?1:0,me=0,he=0;if($===(D?"border":"content"))return 0;for(;K<4;K+=2)$==="margin"&&(he+=m.css(w,$+et[K],!0,W)),D?($==="content"&&(he-=m.css(w,"padding"+et[K],!0,W)),$!=="margin"&&(he-=m.css(w,"border"+et[K]+"Width",!0,W))):(he+=m.css(w,"padding"+et[K],!0,W),$!=="padding"?he+=m.css(w,"border"+et[K]+"Width",!0,W):me+=m.css(w,"border"+et[K]+"Width",!0,W));return!D&&G>=0&&(he+=Math.max(0,Math.ceil(w["offset"+E[0].toUpperCase()+E.slice(1)]-G-he-me-.5))||0),he}function Oo(w,E,$){var D=kt(w),W=!g.boxSizingReliable()||$,G=W&&m.css(w,"boxSizing",!1,D)==="border-box",K=G,me=qn(w,E,D),he="offset"+E[0].toUpperCase()+E.slice(1);if(Fe.test(me)){if(!$)return me;me="auto"}return(!g.boxSizingReliable()&&G||!g.reliableTrDimensions()&&R(w,"tr")||me==="auto"||!parseFloat(me)&&m.css(w,"display",!1,D)==="inline")&&w.getClientRects().length&&(G=m.css(w,"boxSizing",!1,D)==="border-box",K=he in w,K&&(me=w[he])),me=parseFloat(me)||0,me+Hi(w,E,$||(G?"border":"content"),K,D,me)+"px"}m.extend({cssHooks:{opacity:{get:function(w,E){if(E){var $=qn(w,"opacity");return $===""?"1":$}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(w,E,$,D){if(!(!w||w.nodeType===3||w.nodeType===8||!w.style)){var W,G,K,me=Y(E),he=xt.test(E),Le=w.style;if(he||(E=ho(me)),K=m.cssHooks[E]||m.cssHooks[me],$!==void 0){if(G=typeof $,G==="string"&&(W=Xe.exec($))&&W[1]&&($=wt(w,E,W),G="number"),$==null||$!==$)return;G==="number"&&!he&&($+=W&&W[3]||(m.cssNumber[me]?"":"px")),!g.clearCloneStyle&&$===""&&E.indexOf("background")===0&&(Le[E]="inherit"),(!K||!("set"in K)||($=K.set(w,$,D))!==void 0)&&(he?Le.setProperty(E,$):Le[E]=$)}else return K&&"get"in K&&(W=K.get(w,!1,D))!==void 0?W:Le[E]}},css:function(w,E,$,D){var W,G,K,me=Y(E),he=xt.test(E);return he||(E=ho(me)),K=m.cssHooks[E]||m.cssHooks[me],K&&"get"in K&&(W=K.get(w,!0,$)),W===void 0&&(W=qn(w,E,D)),W==="normal"&&E in zl&&(W=zl[E]),$===""||$?(G=parseFloat(W),$===!0||isFinite(G)?G||0:W):W}}),m.each(["height","width"],function(w,E){m.cssHooks[E]={get:function($,D,W){if(D)return Ia.test(m.css($,"display"))&&(!$.getClientRects().length||!$.getBoundingClientRect().width)?wn($,$a,function(){return Oo($,E,W)}):Oo($,E,W)},set:function($,D,W){var G,K=kt($),me=!g.scrollboxSize()&&K.position==="absolute",he=me||W,Le=he&&m.css($,"boxSizing",!1,K)==="border-box",ze=W?Hi($,E,W,Le,K):0;return Le&&me&&(ze-=Math.ceil($["offset"+E[0].toUpperCase()+E.slice(1)]-parseFloat(K[E])-Hi($,E,"border",!1,K)-.5)),ze&&(G=Xe.exec(D))&&(G[3]||"px")!=="px"&&($.style[E]=D,D=m.css($,E)),_s($,D,ze)}}}),m.cssHooks.marginLeft=Nr(g.reliableMarginLeft,function(w,E){if(E)return(parseFloat(qn(w,"marginLeft"))||w.getBoundingClientRect().left-wn(w,{marginLeft:0},function(){return w.getBoundingClientRect().left}))+"px"}),m.each({margin:"",padding:"",border:"Width"},function(w,E){m.cssHooks[w+E]={expand:function($){for(var D=0,W={},G=typeof $=="string"?$.split(" "):[$];D<4;D++)W[w+et[D]+E]=G[D]||G[D-2]||G[0];return W}},w!=="margin"&&(m.cssHooks[w+E].set=_s)}),m.fn.extend({css:function(w,E){return ue(this,function($,D,W){var G,K,me={},he=0;if(Array.isArray(D)){for(G=kt($),K=D.length;he<K;he++)me[D[he]]=m.css($,D[he],!1,G);return me}return W!==void 0?m.style($,D,W):m.css($,D)},w,E,arguments.length>1)}});function Qr(w,E,$,D,W){return new Qr.prototype.init(w,E,$,D,W)}m.Tween=Qr,Qr.prototype={constructor:Qr,init:function(w,E,$,D,W,G){this.elem=w,this.prop=$,this.easing=W||m.easing._default,this.options=E,this.start=this.now=this.cur(),this.end=D,this.unit=G||(m.cssNumber[$]?"":"px")},cur:function(){var w=Qr.propHooks[this.prop];return w&&w.get?w.get(this):Qr.propHooks._default.get(this)},run:function(w){var E,$=Qr.propHooks[this.prop];return this.options.duration?this.pos=E=m.easing[this.easing](w,this.options.duration*w,0,1,this.options.duration):this.pos=E=w,this.now=(this.end-this.start)*E+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),$&&$.set?$.set(this):Qr.propHooks._default.set(this),this}},Qr.prototype.init.prototype=Qr.prototype,Qr.propHooks={_default:{get:function(w){var E;return w.elem.nodeType!==1||w.elem[w.prop]!=null&&w.elem.style[w.prop]==null?w.elem[w.prop]:(E=m.css(w.elem,w.prop,""),!E||E==="auto"?0:E)},set:function(w){m.fx.step[w.prop]?m.fx.step[w.prop](w):w.elem.nodeType===1&&(m.cssHooks[w.prop]||w.elem.style[ho(w.prop)]!=null)?m.style(w.elem,w.prop,w.now+w.unit):w.elem[w.prop]=w.now}}},Qr.propHooks.scrollTop=Qr.propHooks.scrollLeft={set:function(w){w.elem.nodeType&&w.elem.parentNode&&(w.elem[w.prop]=w.now)}},m.easing={linear:function(w){return w},swing:function(w){return .5-Math.cos(w*Math.PI)/2},_default:"swing"},m.fx=Qr.prototype.init,m.fx.step={};var ro,Ys,om=/^(?:toggle|show|hide)$/,Ad=/queueHooks$/;function jl(){Ys&&(v.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(jl):e.setTimeout(jl,m.fx.interval),m.fx.tick())}function Eu(){return e.setTimeout(function(){ro=void 0}),ro=Date.now()}function Ss(w,E){var $,D=0,W={height:w};for(E=E?1:0;D<4;D+=2-E)$=et[D],W["margin"+$]=W["padding"+$]=w;return E&&(W.opacity=W.width=w),W}function Ed(w,E,$){for(var D,W=(La.tweeners[E]||[]).concat(La.tweeners["*"]),G=0,K=W.length;G<K;G++)if(D=W[G].call($,E,w))return D}function Pd(w,E,$){var D,W,G,K,me,he,Le,ze,Ye="width"in E||"height"in E,Ne=this,je={},Ot=w.style,nn=w.nodeType&&Kt(w),vt=U.get(w,"fxshow");$.queue||(K=m._queueHooks(w,"fx"),K.unqueued==null&&(K.unqueued=0,me=K.empty.fire,K.empty.fire=function(){K.unqueued||me()}),K.unqueued++,Ne.always(function(){Ne.always(function(){K.unqueued--,m.queue(w,"fx").length||K.empty.fire()})}));for(D in E)if(W=E[D],om.test(W)){if(delete E[D],G=G||W==="toggle",W===(nn?"hide":"show"))if(W==="show"&&vt&&vt[D]!==void 0)nn=!0;else continue;je[D]=vt&&vt[D]||m.style(w,D)}if(he=!m.isEmptyObject(E),!(!he&&m.isEmptyObject(je))){Ye&&w.nodeType===1&&($.overflow=[Ot.overflow,Ot.overflowX,Ot.overflowY],Le=vt&&vt.display,Le==null&&(Le=U.get(w,"display")),ze=m.css(w,"display"),ze==="none"&&(Le?ze=Le:(gi([w],!0),Le=w.style.display||Le,ze=m.css(w,"display"),gi([w]))),(ze==="inline"||ze==="inline-block"&&Le!=null)&&m.css(w,"float")==="none"&&(he||(Ne.done(function(){Ot.display=Le}),Le==null&&(ze=Ot.display,Le=ze==="none"?"":ze)),Ot.display="inline-block")),$.overflow&&(Ot.overflow="hidden",Ne.always(function(){Ot.overflow=$.overflow[0],Ot.overflowX=$.overflow[1],Ot.overflowY=$.overflow[2]})),he=!1;for(D in je)he||(vt?"hidden"in vt&&(nn=vt.hidden):vt=U.access(w,"fxshow",{display:Le}),G&&(vt.hidden=!nn),nn&&gi([w],!0),Ne.done(function(){nn||gi([w]),U.remove(w,"fxshow");for(D in je)m.style(w,D,je[D])})),he=Ed(nn?vt[D]:0,D,Ne),D in vt||(vt[D]=he.start,nn&&(he.end=he.start,he.start=0))}}function Ks(w,E){var $,D,W,G,K;for($ in w)if(D=Y($),W=E[D],G=w[$],Array.isArray(G)&&(W=G[1],G=w[$]=G[0]),$!==D&&(w[D]=G,delete w[$]),K=m.cssHooks[D],K&&"expand"in K){G=K.expand(G),delete w[D];for($ in G)$ in w||(w[$]=G[$],E[$]=W)}else E[D]=W}function La(w,E,$){var D,W,G=0,K=La.prefilters.length,me=m.Deferred().always(function(){delete he.elem}),he=function(){if(W)return!1;for(var Ye=ro||Eu(),Ne=Math.max(0,Le.startTime+Le.duration-Ye),je=Ne/Le.duration||0,Ot=1-je,nn=0,vt=Le.tweens.length;nn<vt;nn++)Le.tweens[nn].run(Ot);return me.notifyWith(w,[Le,Ot,Ne]),Ot<1&&vt?Ne:(vt||me.notifyWith(w,[Le,1,0]),me.resolveWith(w,[Le]),!1)},Le=me.promise({elem:w,props:m.extend({},E),opts:m.extend(!0,{specialEasing:{},easing:m.easing._default},$),originalProperties:E,originalOptions:$,startTime:ro||Eu(),duration:$.duration,tweens:[],createTween:function(Ye,Ne){var je=m.Tween(w,Le.opts,Ye,Ne,Le.opts.specialEasing[Ye]||Le.opts.easing);return Le.tweens.push(je),je},stop:function(Ye){var Ne=0,je=Ye?Le.tweens.length:0;if(W)return this;for(W=!0;Ne<je;Ne++)Le.tweens[Ne].run(1);return Ye?(me.notifyWith(w,[Le,1,0]),me.resolveWith(w,[Le,Ye])):me.rejectWith(w,[Le,Ye]),this}}),ze=Le.props;for(Ks(ze,Le.opts.specialEasing);G<K;G++)if(D=La.prefilters[G].call(Le,w,ze,Le.opts),D)return y(D.stop)&&(m._queueHooks(Le.elem,Le.opts.queue).stop=D.stop.bind(D)),D;return m.map(ze,Ed,Le),y(Le.opts.start)&&Le.opts.start.call(w,Le),Le.progress(Le.opts.progress).done(Le.opts.done,Le.opts.complete).fail(Le.opts.fail).always(Le.opts.always),m.fx.timer(m.extend(he,{elem:w,anim:Le,queue:Le.opts.queue})),Le}m.Animation=m.extend(La,{tweeners:{"*":[function(w,E){var $=this.createTween(w,E);return wt($.elem,w,Xe.exec(E),$),$}]},tweener:function(w,E){y(w)?(E=w,w=["*"]):w=w.match(se);for(var $,D=0,W=w.length;D<W;D++)$=w[D],La.tweeners[$]=La.tweeners[$]||[],La.tweeners[$].unshift(E)},prefilters:[Pd],prefilter:function(w,E){E?La.prefilters.unshift(w):La.prefilters.push(w)}}),m.speed=function(w,E,$){var D=w&&typeof w=="object"?m.extend({},w):{complete:$||!$&&E||y(w)&&w,duration:w,easing:$&&E||E&&!y(E)&&E};return m.fx.off?D.duration=0:typeof D.duration!="number"&&(D.duration in m.fx.speeds?D.duration=m.fx.speeds[D.duration]:D.duration=m.fx.speeds._default),(D.queue==null||D.queue===!0)&&(D.queue="fx"),D.old=D.complete,D.complete=function(){y(D.old)&&D.old.call(this),D.queue&&m.dequeue(this,D.queue)},D},m.fn.extend({fadeTo:function(w,E,$,D){return this.filter(Kt).css("opacity",0).show().end().animate({opacity:E},w,$,D)},animate:function(w,E,$,D){var W=m.isEmptyObject(w),G=m.speed(E,$,D),K=function(){var me=La(this,m.extend({},w),G);(W||U.get(this,"finish"))&&me.stop(!0)};return K.finish=K,W||G.queue===!1?this.each(K):this.queue(G.queue,K)},stop:function(w,E,$){var D=function(W){var G=W.stop;delete W.stop,G($)};return typeof w!="string"&&($=E,E=w,w=void 0),E&&this.queue(w||"fx",[]),this.each(function(){var W=!0,G=w!=null&&w+"queueHooks",K=m.timers,me=U.get(this);if(G)me[G]&&me[G].stop&&D(me[G]);else for(G in me)me[G]&&me[G].stop&&Ad.test(G)&&D(me[G]);for(G=K.length;G--;)K[G].elem===this&&(w==null||K[G].queue===w)&&(K[G].anim.stop($),W=!1,K.splice(G,1));(W||!$)&&m.dequeue(this,w)})},finish:function(w){return w!==!1&&(w=w||"fx"),this.each(function(){var E,$=U.get(this),D=$[w+"queue"],W=$[w+"queueHooks"],G=m.timers,K=D?D.length:0;for($.finish=!0,m.queue(this,w,[]),W&&W.stop&&W.stop.call(this,!0),E=G.length;E--;)G[E].elem===this&&G[E].queue===w&&(G[E].anim.stop(!0),G.splice(E,1));for(E=0;E<K;E++)D[E]&&D[E].finish&&D[E].finish.call(this);delete $.finish})}}),m.each(["toggle","show","hide"],function(w,E){var $=m.fn[E];m.fn[E]=function(D,W,G){return D==null||typeof D=="boolean"?$.apply(this,arguments):this.animate(Ss(E,!0),D,W,G)}}),m.each({slideDown:Ss("show"),slideUp:Ss("hide"),slideToggle:Ss("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(w,E){m.fn[w]=function($,D,W){return this.animate(E,$,D,W)}}),m.timers=[],m.fx.tick=function(){var w,E=0,$=m.timers;for(ro=Date.now();E<$.length;E++)w=$[E],!w()&&$[E]===w&&$.splice(E--,1);$.length||m.fx.stop(),ro=void 0},m.fx.timer=function(w){m.timers.push(w),m.fx.start()},m.fx.interval=13,m.fx.start=function(){Ys||(Ys=!0,jl())},m.fx.stop=function(){Ys=null},m.fx.speeds={slow:600,fast:200,_default:400},m.fn.delay=function(w,E){return w=m.fx&&m.fx.speeds[w]||w,E=E||"fx",this.queue(E,function($,D){var W=e.setTimeout($,w);D.stop=function(){e.clearTimeout(W)}})},function(){var w=v.createElement("input"),E=v.createElement("select"),$=E.appendChild(v.createElement("option"));w.type="checkbox",g.checkOn=w.value!=="",g.optSelected=$.selected,w=v.createElement("input"),w.value="t",w.type="radio",g.radioValue=w.value==="t"}();var YS,Rf=m.expr.attrHandle;m.fn.extend({attr:function(w,E){return ue(this,m.attr,w,E,arguments.length>1)},removeAttr:function(w){return this.each(function(){m.removeAttr(this,w)})}}),m.extend({attr:function(w,E,$){var D,W,G=w.nodeType;if(!(G===3||G===8||G===2)){if(typeof w.getAttribute>"u")return m.prop(w,E,$);if((G!==1||!m.isXMLDoc(w))&&(W=m.attrHooks[E.toLowerCase()]||(m.expr.match.bool.test(E)?YS:void 0)),$!==void 0){if($===null){m.removeAttr(w,E);return}return W&&"set"in W&&(D=W.set(w,$,E))!==void 0?D:(w.setAttribute(E,$+""),$)}return W&&"get"in W&&(D=W.get(w,E))!==null?D:(D=m.find.attr(w,E),D??void 0)}},attrHooks:{type:{set:function(w,E){if(!g.radioValue&&E==="radio"&&R(w,"input")){var $=w.value;return w.setAttribute("type",E),$&&(w.value=$),E}}}},removeAttr:function(w,E){var $,D=0,W=E&&E.match(se);if(W&&w.nodeType===1)for(;$=W[D++];)w.removeAttribute($)}}),YS={set:function(w,E,$){return E===!1?m.removeAttr(w,$):w.setAttribute($,$),$}},m.each(m.expr.match.bool.source.match(/\w+/g),function(w,E){var $=Rf[E]||m.find.attr;Rf[E]=function(D,W,G){var K,me,he=W.toLowerCase();return G||(me=Rf[he],Rf[he]=K,K=$(D,W,G)!=null?he:null,Rf[he]=me),K}});var KS=/^(?:input|select|textarea|button)$/i,iy=/^(?:a|area)$/i;m.fn.extend({prop:function(w,E){return ue(this,m.prop,w,E,arguments.length>1)},removeProp:function(w){return this.each(function(){delete this[m.propFix[w]||w]})}}),m.extend({prop:function(w,E,$){var D,W,G=w.nodeType;if(!(G===3||G===8||G===2))return(G!==1||!m.isXMLDoc(w))&&(E=m.propFix[E]||E,W=m.propHooks[E]),$!==void 0?W&&"set"in W&&(D=W.set(w,$,E))!==void 0?D:w[E]=$:W&&"get"in W&&(D=W.get(w,E))!==null?D:w[E]},propHooks:{tabIndex:{get:function(w){var E=m.find.attr(w,"tabindex");return E?parseInt(E,10):KS.test(w.nodeName)||iy.test(w.nodeName)&&w.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(m.propHooks.selected={get:function(w){var E=w.parentNode;return E&&E.parentNode&&E.parentNode.selectedIndex,null},set:function(w){var E=w.parentNode;E&&(E.selectedIndex,E.parentNode&&E.parentNode.selectedIndex)}}),m.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){m.propFix[this.toLowerCase()]=this});function Oc(w){var E=w.match(se)||[];return E.join(" ")}function Pu(w){return w.getAttribute&&w.getAttribute("class")||""}function Od(w){return Array.isArray(w)?w:typeof w=="string"?w.match(se)||[]:[]}m.fn.extend({addClass:function(w){var E,$,D,W,G,K;return y(w)?this.each(function(me){m(this).addClass(w.call(this,me,Pu(this)))}):(E=Od(w),E.length?this.each(function(){if(D=Pu(this),$=this.nodeType===1&&" "+Oc(D)+" ",$){for(G=0;G<E.length;G++)W=E[G],$.indexOf(" "+W+" ")<0&&($+=W+" ");K=Oc($),D!==K&&this.setAttribute("class",K)}}):this)},removeClass:function(w){var E,$,D,W,G,K;return y(w)?this.each(function(me){m(this).removeClass(w.call(this,me,Pu(this)))}):arguments.length?(E=Od(w),E.length?this.each(function(){if(D=Pu(this),$=this.nodeType===1&&" "+Oc(D)+" ",$){for(G=0;G<E.length;G++)for(W=E[G];$.indexOf(" "+W+" ")>-1;)$=$.replace(" "+W+" "," ");K=Oc($),D!==K&&this.setAttribute("class",K)}}):this):this.attr("class","")},toggleClass:function(w,E){var $,D,W,G,K=typeof w,me=K==="string"||Array.isArray(w);return y(w)?this.each(function(he){m(this).toggleClass(w.call(this,he,Pu(this),E),E)}):typeof E=="boolean"&&me?E?this.addClass(w):this.removeClass(w):($=Od(w),this.each(function(){if(me)for(G=m(this),W=0;W<$.length;W++)D=$[W],G.hasClass(D)?G.removeClass(D):G.addClass(D);else(w===void 0||K==="boolean")&&(D=Pu(this),D&&U.set(this,"__className__",D),this.setAttribute&&this.setAttribute("class",D||w===!1?"":U.get(this,"__className__")||""))}))},hasClass:function(w){var E,$,D=0;for(E=" "+w+" ";$=this[D++];)if($.nodeType===1&&(" "+Oc(Pu($))+" ").indexOf(E)>-1)return!0;return!1}});var oy=/\r/g;m.fn.extend({val:function(w){var E,$,D,W=this[0];return arguments.length?(D=y(w),this.each(function(G){var K;this.nodeType===1&&(D?K=w.call(this,G,m(this).val()):K=w,K==null?K="":typeof K=="number"?K+="":Array.isArray(K)&&(K=m.map(K,function(me){return me==null?"":me+""})),E=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()],(!E||!("set"in E)||E.set(this,K,"value")===void 0)&&(this.value=K))})):W?(E=m.valHooks[W.type]||m.valHooks[W.nodeName.toLowerCase()],E&&"get"in E&&($=E.get(W,"value"))!==void 0?$:($=W.value,typeof $=="string"?$.replace(oy,""):$??"")):void 0}}),m.extend({valHooks:{option:{get:function(w){var E=m.find.attr(w,"value");return E??Oc(m.text(w))}},select:{get:function(w){var E,$,D,W=w.options,G=w.selectedIndex,K=w.type==="select-one",me=K?null:[],he=K?G+1:W.length;for(G<0?D=he:D=K?G:0;D<he;D++)if($=W[D],($.selected||D===G)&&!$.disabled&&(!$.parentNode.disabled||!R($.parentNode,"optgroup"))){if(E=m($).val(),K)return E;me.push(E)}return me},set:function(w,E){for(var $,D,W=w.options,G=m.makeArray(E),K=W.length;K--;)D=W[K],(D.selected=m.inArray(m.valHooks.option.get(D),G)>-1)&&($=!0);return $||(w.selectedIndex=-1),G}}}}),m.each(["radio","checkbox"],function(){m.valHooks[this]={set:function(w,E){if(Array.isArray(E))return w.checked=m.inArray(m(w).val(),E)>-1}},g.checkOn||(m.valHooks[this].get=function(w){return w.getAttribute("value")===null?"on":w.value})}),g.focusin="onfocusin"in e;var Ic=/^(?:focusinfocus|focusoutblur)$/,ay=function(w){w.stopPropagation()};m.extend(m.event,{trigger:function(w,E,$,D){var W,G,K,me,he,Le,ze,Ye,Ne=[$||v],je=f.call(w,"type")?w.type:w,Ot=f.call(w,"namespace")?w.namespace.split("."):[];if(G=Ye=K=$=$||v,!($.nodeType===3||$.nodeType===8)&&!Ic.test(je+m.event.triggered)&&(je.indexOf(".")>-1&&(Ot=je.split("."),je=Ot.shift(),Ot.sort()),he=je.indexOf(":")<0&&"on"+je,w=w[m.expando]?w:new m.Event(je,typeof w=="object"&&w),w.isTrigger=D?2:3,w.namespace=Ot.join("."),w.rnamespace=w.namespace?new RegExp("(^|\\.)"+Ot.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,w.result=void 0,w.target||(w.target=$),E=E==null?[w]:m.makeArray(E,[w]),ze=m.event.special[je]||{},!(!D&&ze.trigger&&ze.trigger.apply($,E)===!1))){if(!D&&!ze.noBubble&&!_($)){for(me=ze.delegateType||je,Ic.test(me+je)||(G=G.parentNode);G;G=G.parentNode)Ne.push(G),K=G;K===($.ownerDocument||v)&&Ne.push(K.defaultView||K.parentWindow||e)}for(W=0;(G=Ne[W++])&&!w.isPropagationStopped();)Ye=G,w.type=W>1?me:ze.bindType||je,Le=(U.get(G,"events")||Object.create(null))[w.type]&&U.get(G,"handle"),Le&&Le.apply(G,E),Le=he&&G[he],Le&&Le.apply&&O(G)&&(w.result=Le.apply(G,E),w.result===!1&&w.preventDefault());return w.type=je,!D&&!w.isDefaultPrevented()&&(!ze._default||ze._default.apply(Ne.pop(),E)===!1)&&O($)&&he&&y($[je])&&!_($)&&(K=$[he],K&&($[he]=null),m.event.triggered=je,w.isPropagationStopped()&&Ye.addEventListener(je,ay),$[je](),w.isPropagationStopped()&&Ye.removeEventListener(je,ay),m.event.triggered=void 0,K&&($[he]=K)),w.result}},simulate:function(w,E,$){var D=m.extend(new m.Event,$,{type:w,isSimulated:!0});m.event.trigger(D,null,E)}}),m.fn.extend({trigger:function(w,E){return this.each(function(){m.event.trigger(w,E,this)})},triggerHandler:function(w,E){var $=this[0];if($)return m.event.trigger(w,E,$,!0)}}),g.focusin||m.each({focus:"focusin",blur:"focusout"},function(w,E){var $=function(D){m.event.simulate(E,D.target,m.event.fix(D))};m.event.special[E]={setup:function(){var D=this.ownerDocument||this.document||this,W=U.access(D,E);W||D.addEventListener(w,$,!0),U.access(D,E,(W||0)+1)},teardown:function(){var D=this.ownerDocument||this.document||this,W=U.access(D,E)-1;W?U.access(D,E,W):(D.removeEventListener(w,$,!0),U.remove(D,E))}}});var Vf=e.location,XS={guid:Date.now()},am=/\?/;m.parseXML=function(w){var E,$;if(!w||typeof w!="string")return null;try{E=new e.DOMParser().parseFromString(w,"text/xml")}catch{}return $=E&&E.getElementsByTagName("parsererror")[0],(!E||$)&&m.error("Invalid XML: "+($?m.map($.childNodes,function(D){return D.textContent}).join(`
`):w)),E};var JS=/\[\]$/,sy=/\r?\n/g,ZS=/^(?:submit|button|image|reset|file)$/i,aP=/^(?:input|select|textarea|keygen)/i;function ly(w,E,$,D){var W;if(Array.isArray(E))m.each(E,function(G,K){$||JS.test(w)?D(w,K):ly(w+"["+(typeof K=="object"&&K!=null?G:"")+"]",K,$,D)});else if(!$&&k(E)==="object")for(W in E)ly(w+"["+W+"]",E[W],$,D);else D(w,E)}m.param=function(w,E){var $,D=[],W=function(G,K){var me=y(K)?K():K;D[D.length]=encodeURIComponent(G)+"="+encodeURIComponent(me??"")};if(w==null)return"";if(Array.isArray(w)||w.jquery&&!m.isPlainObject(w))m.each(w,function(){W(this.name,this.value)});else for($ in w)ly($,w[$],E,W);return D.join("&")},m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var w=m.prop(this,"elements");return w?m.makeArray(w):this}).filter(function(){var w=this.type;return this.name&&!m(this).is(":disabled")&&aP.test(this.nodeName)&&!ZS.test(w)&&(this.checked||!Dr.test(w))}).map(function(w,E){var $=m(this).val();return $==null?null:Array.isArray($)?m.map($,function(D){return{name:E.name,value:D.replace(sy,`\r
`)}}):{name:E.name,value:$.replace(sy,`\r
`)}}).get()}});var sP=/%20/g,QS=/#.*$/,lP=/([?&])_=[^&]*/,uP=/^(.*?):[ \t]*([^\r\n]*)$/mg,cP=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,fP=/^(?:GET|HEAD)$/,uy=/^\/\//,ew={},cy={},tw="*/".concat("*"),fy=v.createElement("a");fy.href=Vf.href;function nw(w){return function(E,$){typeof E!="string"&&($=E,E="*");var D,W=0,G=E.toLowerCase().match(se)||[];if(y($))for(;D=G[W++];)D[0]==="+"?(D=D.slice(1)||"*",(w[D]=w[D]||[]).unshift($)):(w[D]=w[D]||[]).push($)}}function yr(w,E,$,D){var W={},G=w===cy;function K(me){var he;return W[me]=!0,m.each(w[me]||[],function(Le,ze){var Ye=ze(E,$,D);if(typeof Ye=="string"&&!G&&!W[Ye])return E.dataTypes.unshift(Ye),K(Ye),!1;if(G)return!(he=Ye)}),he}return K(E.dataTypes[0])||!W["*"]&&K("*")}function lr(w,E){var $,D,W=m.ajaxSettings.flatOptions||{};for($ in E)E[$]!==void 0&&((W[$]?w:D||(D={}))[$]=E[$]);return D&&m.extend(!0,w,D),w}function hP(w,E,$){for(var D,W,G,K,me=w.contents,he=w.dataTypes;he[0]==="*";)he.shift(),D===void 0&&(D=w.mimeType||E.getResponseHeader("Content-Type"));if(D){for(W in me)if(me[W]&&me[W].test(D)){he.unshift(W);break}}if(he[0]in $)G=he[0];else{for(W in $){if(!he[0]||w.converters[W+" "+he[0]]){G=W;break}K||(K=W)}G=G||K}if(G)return G!==he[0]&&he.unshift(G),$[G]}function dP(w,E,$,D){var W,G,K,me,he,Le={},ze=w.dataTypes.slice();if(ze[1])for(K in w.converters)Le[K.toLowerCase()]=w.converters[K];for(G=ze.shift();G;)if(w.responseFields[G]&&($[w.responseFields[G]]=E),!he&&D&&w.dataFilter&&(E=w.dataFilter(E,w.dataType)),he=G,G=ze.shift(),G){if(G==="*")G=he;else if(he!=="*"&&he!==G){if(K=Le[he+" "+G]||Le["* "+G],!K){for(W in Le)if(me=W.split(" "),me[1]===G&&(K=Le[he+" "+me[0]]||Le["* "+me[0]],K)){K===!0?K=Le[W]:Le[W]!==!0&&(G=me[0],ze.unshift(me[1]));break}}if(K!==!0)if(K&&w.throws)E=K(E);else try{E=K(E)}catch(Ye){return{state:"parsererror",error:K?Ye:"No conversion from "+he+" to "+G}}}}return{state:"success",data:E}}m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Vf.href,type:"GET",isLocal:cP.test(Vf.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":tw,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(w,E){return E?lr(lr(w,m.ajaxSettings),E):lr(m.ajaxSettings,w)},ajaxPrefilter:nw(ew),ajaxTransport:nw(cy),ajax:function(w,E){typeof w=="object"&&(E=w,w=void 0),E=E||{};var $,D,W,G,K,me,he,Le,ze,Ye,Ne=m.ajaxSetup({},E),je=Ne.context||Ne,Ot=Ne.context&&(je.nodeType||je.jquery)?m(je):m.event,nn=m.Deferred(),vt=m.Callbacks("once memory"),ei=Ne.statusCode||{},ti={},kn={},On="canceled",Jt={readyState:0,getResponseHeader:function(In){var Ur;if(he){if(!G)for(G={};Ur=uP.exec(W);)G[Ur[1].toLowerCase()+" "]=(G[Ur[1].toLowerCase()+" "]||[]).concat(Ur[2]);Ur=G[In.toLowerCase()+" "]}return Ur==null?null:Ur.join(", ")},getAllResponseHeaders:function(){return he?W:null},setRequestHeader:function(In,Ur){return he==null&&(In=kn[In.toLowerCase()]=kn[In.toLowerCase()]||In,ti[In]=Ur),this},overrideMimeType:function(In){return he==null&&(Ne.mimeType=In),this},statusCode:function(In){var Ur;if(In)if(he)Jt.always(In[Jt.status]);else for(Ur in In)ei[Ur]=[ei[Ur],In[Ur]];return this},abort:function(In){var Ur=In||On;return $&&$.abort(Ur),Io(0,Ur),this}};if(nn.promise(Jt),Ne.url=((w||Ne.url||Vf.href)+"").replace(uy,Vf.protocol+"//"),Ne.type=E.method||E.type||Ne.method||Ne.type,Ne.dataTypes=(Ne.dataType||"*").toLowerCase().match(se)||[""],Ne.crossDomain==null){me=v.createElement("a");try{me.href=Ne.url,me.href=me.href,Ne.crossDomain=fy.protocol+"//"+fy.host!=me.protocol+"//"+me.host}catch{Ne.crossDomain=!0}}if(Ne.data&&Ne.processData&&typeof Ne.data!="string"&&(Ne.data=m.param(Ne.data,Ne.traditional)),yr(ew,Ne,E,Jt),he)return Jt;Le=m.event&&Ne.global,Le&&m.active++===0&&m.event.trigger("ajaxStart"),Ne.type=Ne.type.toUpperCase(),Ne.hasContent=!fP.test(Ne.type),D=Ne.url.replace(QS,""),Ne.hasContent?Ne.data&&Ne.processData&&(Ne.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(Ne.data=Ne.data.replace(sP,"+")):(Ye=Ne.url.slice(D.length),Ne.data&&(Ne.processData||typeof Ne.data=="string")&&(D+=(am.test(D)?"&":"?")+Ne.data,delete Ne.data),Ne.cache===!1&&(D=D.replace(lP,"$1"),Ye=(am.test(D)?"&":"?")+"_="+XS.guid+++Ye),Ne.url=D+Ye),Ne.ifModified&&(m.lastModified[D]&&Jt.setRequestHeader("If-Modified-Since",m.lastModified[D]),m.etag[D]&&Jt.setRequestHeader("If-None-Match",m.etag[D])),(Ne.data&&Ne.hasContent&&Ne.contentType!==!1||E.contentType)&&Jt.setRequestHeader("Content-Type",Ne.contentType),Jt.setRequestHeader("Accept",Ne.dataTypes[0]&&Ne.accepts[Ne.dataTypes[0]]?Ne.accepts[Ne.dataTypes[0]]+(Ne.dataTypes[0]!=="*"?", "+tw+"; q=0.01":""):Ne.accepts["*"]);for(ze in Ne.headers)Jt.setRequestHeader(ze,Ne.headers[ze]);if(Ne.beforeSend&&(Ne.beforeSend.call(je,Jt,Ne)===!1||he))return Jt.abort();if(On="abort",vt.add(Ne.complete),Jt.done(Ne.success),Jt.fail(Ne.error),$=yr(cy,Ne,E,Jt),!$)Io(-1,"No Transport");else{if(Jt.readyState=1,Le&&Ot.trigger("ajaxSend",[Jt,Ne]),he)return Jt;Ne.async&&Ne.timeout>0&&(K=e.setTimeout(function(){Jt.abort("timeout")},Ne.timeout));try{he=!1,$.send(ti,Io)}catch(In){if(he)throw In;Io(-1,In)}}function Io(In,Ur,$d,sm){var $o,Xs,Da,Lo,Ul,sa=Ur;he||(he=!0,K&&e.clearTimeout(K),$=void 0,W=sm||"",Jt.readyState=In>0?4:0,$o=In>=200&&In<300||In===304,$d&&(Lo=hP(Ne,Jt,$d)),!$o&&m.inArray("script",Ne.dataTypes)>-1&&m.inArray("json",Ne.dataTypes)<0&&(Ne.converters["text script"]=function(){}),Lo=dP(Ne,Lo,Jt,$o),$o?(Ne.ifModified&&(Ul=Jt.getResponseHeader("Last-Modified"),Ul&&(m.lastModified[D]=Ul),Ul=Jt.getResponseHeader("etag"),Ul&&(m.etag[D]=Ul)),In===204||Ne.type==="HEAD"?sa="nocontent":In===304?sa="notmodified":(sa=Lo.state,Xs=Lo.data,Da=Lo.error,$o=!Da)):(Da=sa,(In||!sa)&&(sa="error",In<0&&(In=0))),Jt.status=In,Jt.statusText=(Ur||sa)+"",$o?nn.resolveWith(je,[Xs,sa,Jt]):nn.rejectWith(je,[Jt,sa,Da]),Jt.statusCode(ei),ei=void 0,Le&&Ot.trigger($o?"ajaxSuccess":"ajaxError",[Jt,Ne,$o?Xs:Da]),vt.fireWith(je,[Jt,sa]),Le&&(Ot.trigger("ajaxComplete",[Jt,Ne]),--m.active||m.event.trigger("ajaxStop")))}return Jt},getJSON:function(w,E,$){return m.get(w,E,$,"json")},getScript:function(w,E){return m.get(w,void 0,E,"script")}}),m.each(["get","post"],function(w,E){m[E]=function($,D,W,G){return y(D)&&(G=G||W,W=D,D=void 0),m.ajax(m.extend({url:$,type:E,dataType:G,data:D,success:W},m.isPlainObject($)&&$))}}),m.ajaxPrefilter(function(w){var E;for(E in w.headers)E.toLowerCase()==="content-type"&&(w.contentType=w.headers[E]||"")}),m._evalUrl=function(w,E,$){return m.ajax({url:w,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(D){m.globalEval(D,E,$)}})},m.fn.extend({wrapAll:function(w){var E;return this[0]&&(y(w)&&(w=w.call(this[0])),E=m(w,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&E.insertBefore(this[0]),E.map(function(){for(var $=this;$.firstElementChild;)$=$.firstElementChild;return $}).append(this)),this},wrapInner:function(w){return y(w)?this.each(function(E){m(this).wrapInner(w.call(this,E))}):this.each(function(){var E=m(this),$=E.contents();$.length?$.wrapAll(w):E.append(w)})},wrap:function(w){var E=y(w);return this.each(function($){m(this).wrapAll(E?w.call(this,$):w)})},unwrap:function(w){return this.parent(w).not("body").each(function(){m(this).replaceWith(this.childNodes)}),this}}),m.expr.pseudos.hidden=function(w){return!m.expr.pseudos.visible(w)},m.expr.pseudos.visible=function(w){return!!(w.offsetWidth||w.offsetHeight||w.getClientRects().length)},m.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch{}};var pP={0:200,1223:204},Id=m.ajaxSettings.xhr();g.cors=!!Id&&"withCredentials"in Id,g.ajax=Id=!!Id,m.ajaxTransport(function(w){var E,$;if(g.cors||Id&&!w.crossDomain)return{send:function(D,W){var G,K=w.xhr();if(K.open(w.type,w.url,w.async,w.username,w.password),w.xhrFields)for(G in w.xhrFields)K[G]=w.xhrFields[G];w.mimeType&&K.overrideMimeType&&K.overrideMimeType(w.mimeType),!w.crossDomain&&!D["X-Requested-With"]&&(D["X-Requested-With"]="XMLHttpRequest");for(G in D)K.setRequestHeader(G,D[G]);E=function(me){return function(){E&&(E=$=K.onload=K.onerror=K.onabort=K.ontimeout=K.onreadystatechange=null,me==="abort"?K.abort():me==="error"?typeof K.status!="number"?W(0,"error"):W(K.status,K.statusText):W(pP[K.status]||K.status,K.statusText,(K.responseType||"text")!=="text"||typeof K.responseText!="string"?{binary:K.response}:{text:K.responseText},K.getAllResponseHeaders()))}},K.onload=E(),$=K.onerror=K.ontimeout=E("error"),K.onabort!==void 0?K.onabort=$:K.onreadystatechange=function(){K.readyState===4&&e.setTimeout(function(){E&&$()})},E=E("abort");try{K.send(w.hasContent&&w.data||null)}catch(me){if(E)throw me}},abort:function(){E&&E()}}}),m.ajaxPrefilter(function(w){w.crossDomain&&(w.contents.script=!1)}),m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(w){return m.globalEval(w),w}}}),m.ajaxPrefilter("script",function(w){w.cache===void 0&&(w.cache=!1),w.crossDomain&&(w.type="GET")}),m.ajaxTransport("script",function(w){if(w.crossDomain||w.scriptAttrs){var E,$;return{send:function(D,W){E=m("<script>").attr(w.scriptAttrs||{}).prop({charset:w.scriptCharset,src:w.url}).on("load error",$=function(G){E.remove(),$=null,G&&W(G.type==="error"?404:200,G.type)}),v.head.appendChild(E[0])},abort:function(){$&&$()}}}});var rw=[],hy=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var w=rw.pop()||m.expando+"_"+XS.guid++;return this[w]=!0,w}}),m.ajaxPrefilter("json jsonp",function(w,E,$){var D,W,G,K=w.jsonp!==!1&&(hy.test(w.url)?"url":typeof w.data=="string"&&(w.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&hy.test(w.data)&&"data");if(K||w.dataTypes[0]==="jsonp")return D=w.jsonpCallback=y(w.jsonpCallback)?w.jsonpCallback():w.jsonpCallback,K?w[K]=w[K].replace(hy,"$1"+D):w.jsonp!==!1&&(w.url+=(am.test(w.url)?"&":"?")+w.jsonp+"="+D),w.converters["script json"]=function(){return G||m.error(D+" was not called"),G[0]},w.dataTypes[0]="json",W=e[D],e[D]=function(){G=arguments},$.always(function(){W===void 0?m(e).removeProp(D):e[D]=W,w[D]&&(w.jsonpCallback=E.jsonpCallback,rw.push(D)),G&&y(W)&&W(G[0]),G=W=void 0}),"script"}),g.createHTMLDocument=function(){var w=v.implementation.createHTMLDocument("").body;return w.innerHTML="<form></form><form></form>",w.childNodes.length===2}(),m.parseHTML=function(w,E,$){if(typeof w!="string")return[];typeof E=="boolean"&&($=E,E=!1);var D,W,G;return E||(g.createHTMLDocument?(E=v.implementation.createHTMLDocument(""),D=E.createElement("base"),D.href=v.location.href,E.head.appendChild(D)):E=v),W=V.exec(w),G=!$&&[],W?[E.createElement(W[1])]:(W=Ac([w],E,G),G&&G.length&&m(G).remove(),m.merge([],W.childNodes))},m.fn.load=function(w,E,$){var D,W,G,K=this,me=w.indexOf(" ");return me>-1&&(D=Oc(w.slice(me)),w=w.slice(0,me)),y(E)?($=E,E=void 0):E&&typeof E=="object"&&(W="POST"),K.length>0&&m.ajax({url:w,type:W||"GET",dataType:"html",data:E}).done(function(he){G=arguments,K.html(D?m("<div>").append(m.parseHTML(he)).find(D):he)}).always($&&function(he,Le){K.each(function(){$.apply(this,G||[he.responseText,Le,he])})}),this},m.expr.pseudos.animated=function(w){return m.grep(m.timers,function(E){return w===E.elem}).length},m.offset={setOffset:function(w,E,$){var D,W,G,K,me,he,Le,ze=m.css(w,"position"),Ye=m(w),Ne={};ze==="static"&&(w.style.position="relative"),me=Ye.offset(),G=m.css(w,"top"),he=m.css(w,"left"),Le=(ze==="absolute"||ze==="fixed")&&(G+he).indexOf("auto")>-1,Le?(D=Ye.position(),K=D.top,W=D.left):(K=parseFloat(G)||0,W=parseFloat(he)||0),y(E)&&(E=E.call(w,$,m.extend({},me))),E.top!=null&&(Ne.top=E.top-me.top+K),E.left!=null&&(Ne.left=E.left-me.left+W),"using"in E?E.using.call(w,Ne):Ye.css(Ne)}},m.fn.extend({offset:function(w){if(arguments.length)return w===void 0?this:this.each(function(W){m.offset.setOffset(this,w,W)});var E,$,D=this[0];if(D)return D.getClientRects().length?(E=D.getBoundingClientRect(),$=D.ownerDocument.defaultView,{top:E.top+$.pageYOffset,left:E.left+$.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var w,E,$,D=this[0],W={top:0,left:0};if(m.css(D,"position")==="fixed")E=D.getBoundingClientRect();else{for(E=this.offset(),$=D.ownerDocument,w=D.offsetParent||$.documentElement;w&&(w===$.body||w===$.documentElement)&&m.css(w,"position")==="static";)w=w.parentNode;w&&w!==D&&w.nodeType===1&&(W=m(w).offset(),W.top+=m.css(w,"borderTopWidth",!0),W.left+=m.css(w,"borderLeftWidth",!0))}return{top:E.top-W.top-m.css(D,"marginTop",!0),left:E.left-W.left-m.css(D,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var w=this.offsetParent;w&&m.css(w,"position")==="static";)w=w.offsetParent;return w||Qe})}}),m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(w,E){var $=E==="pageYOffset";m.fn[w]=function(D){return ue(this,function(W,G,K){var me;if(_(W)?me=W:W.nodeType===9&&(me=W.defaultView),K===void 0)return me?me[E]:W[G];me?me.scrollTo($?me.pageXOffset:K,$?K:me.pageYOffset):W[G]=K},w,D,arguments.length)}}),m.each(["top","left"],function(w,E){m.cssHooks[E]=Nr(g.pixelPosition,function($,D){if(D)return D=qn($,E),Fe.test(D)?m($).position()[E]+"px":D})}),m.each({Height:"height",Width:"width"},function(w,E){m.each({padding:"inner"+w,content:E,"":"outer"+w},function($,D){m.fn[D]=function(W,G){var K=arguments.length&&($||typeof W!="boolean"),me=$||(W===!0||G===!0?"margin":"border");return ue(this,function(he,Le,ze){var Ye;return _(he)?D.indexOf("outer")===0?he["inner"+w]:he.document.documentElement["client"+w]:he.nodeType===9?(Ye=he.documentElement,Math.max(he.body["scroll"+w],Ye["scroll"+w],he.body["offset"+w],Ye["offset"+w],Ye["client"+w])):ze===void 0?m.css(he,Le,me):m.style(he,Le,ze,me)},E,K?W:void 0,K)}})}),m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(w,E){m.fn[E]=function($){return this.on(E,$)}}),m.fn.extend({bind:function(w,E,$){return this.on(w,null,E,$)},unbind:function(w,E){return this.off(w,null,E)},delegate:function(w,E,$,D){return this.on(E,w,$,D)},undelegate:function(w,E,$){return arguments.length===1?this.off(w,"**"):this.off(E,w||"**",$)},hover:function(w,E){return this.mouseenter(w).mouseleave(E||w)}}),m.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(w,E){m.fn[E]=function($,D){return arguments.length>0?this.on(E,null,$,D):this.trigger(E)}});var iw=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;m.proxy=function(w,E){var $,D,W;if(typeof E=="string"&&($=w[E],E=w,w=$),!!y(w))return D=o.call(arguments,2),W=function(){return w.apply(E||this,D.concat(o.call(arguments)))},W.guid=w.guid=w.guid||m.guid++,W},m.holdReady=function(w){w?m.readyWait++:m.ready(!0)},m.isArray=Array.isArray,m.parseJSON=JSON.parse,m.nodeName=R,m.isFunction=y,m.isWindow=_,m.camelCase=Y,m.type=k,m.now=Date.now,m.isNumeric=function(w){var E=m.type(w);return(E==="number"||E==="string")&&!isNaN(w-parseFloat(w))},m.trim=function(w){return w==null?"":(w+"").replace(iw,"$1")};var gP=e.jQuery,Gi=e.$;return m.noConflict=function(w){return e.$===m&&(e.$=Gi),w&&e.jQuery===m&&(e.jQuery=gP),m},typeof n>"u"&&(e.jQuery=e.$=m),m})})(Oae);var Iae=Oae.exports;const Vn=pr(Iae);(function(t){(function(e){var n=typeof self=="object"&&self.self===self&&self||typeof ui=="object"&&ui.global===ui&&ui;{var r=g6e,i;try{i=Iae}catch{}e(n,t,r,i)}})(function(e,n,r,i){var o=e.Backbone,a=Array.prototype.slice;n.VERSION="1.4.1",n.$=i,n.noConflict=function(){return e.Backbone=o,this},n.emulateHTTP=!1,n.emulateJSON=!1;var s=n.Events={},l=/\s+/,u,c=function(O,F,U,Q,ve){var ge=0,Me;if(U&&typeof U=="object")for(Q!==void 0&&("context"in ve)&&ve.context===void 0&&(ve.context=Q),Me=r.keys(U);ge<Me.length;ge++)F=c(O,F,Me[ge],U[Me[ge]],ve);else if(U&&l.test(U))for(Me=U.split(l);ge<Me.length;ge++)F=O(F,Me[ge],Q,ve);else F=O(F,U,Q,ve);return F};s.on=function(O,F,U){if(this._events=c(f,this._events||{},O,F,{context:U,ctx:this,listening:u}),u){var Q=this._listeners||(this._listeners={});Q[u.id]=u,u.interop=!1}return this},s.listenTo=function(O,F,U){if(!O)return this;var Q=O._listenId||(O._listenId=r.uniqueId("l")),ve=this._listeningTo||(this._listeningTo={}),ge=u=ve[Q];ge||(this._listenId||(this._listenId=r.uniqueId("l")),ge=u=ve[Q]=new v(this,O));var Me=h(O,F,U,this);if(u=void 0,Me)throw Me;return ge.interop&&ge.on(F,U),this};var f=function(O,F,U,Q){if(U){var ve=O[F]||(O[F]=[]),ge=Q.context,Me=Q.ctx,De=Q.listening;De&&De.count++,ve.push({callback:U,context:ge,ctx:ge||Me,listening:De})}return O},h=function(O,F,U,Q){try{O.on(F,U,Q)}catch(ve){return ve}};s.off=function(O,F,U){return this._events?(this._events=c(d,this._events,O,F,{context:U,listeners:this._listeners}),this):this},s.stopListening=function(O,F,U){var Q=this._listeningTo;if(!Q)return this;for(var ve=O?[O._listenId]:r.keys(Q),ge=0;ge<ve.length;ge++){var Me=Q[ve[ge]];if(!Me)break;Me.obj.off(F,U,this),Me.interop&&Me.off(F,U)}return r.isEmpty(Q)&&(this._listeningTo=void 0),this};var d=function(O,F,U,Q){if(O){var ve=Q.context,ge=Q.listeners,Me=0,De;if(!F&&!ve&&!U){for(De=r.keys(ge);Me<De.length;Me++)ge[De[Me]].cleanup();return}for(De=F?[F]:r.keys(O);Me<De.length;Me++){F=De[Me];var tt=O[F];if(!tt)break;for(var Xe=[],et=0;et<tt.length;et++){var Qe=tt[et];if(U&&U!==Qe.callback&&U!==Qe.callback._callback||ve&&ve!==Qe.context)Xe.push(Qe);else{var pt=Qe.listening;pt&&pt.off(F,U)}}Xe.length?O[F]=Xe:delete O[F]}return O}};s.once=function(O,F,U){var Q=c(g,{},O,F,this.off.bind(this));return typeof O=="string"&&U==null&&(F=void 0),this.on(Q,F,U)},s.listenToOnce=function(O,F,U){var Q=c(g,{},F,U,this.stopListening.bind(this,O));return this.listenTo(O,Q)};var g=function(O,F,U,Q){if(U){var ve=O[F]=r.once(function(){Q(F,ve),U.apply(this,arguments)});ve._callback=U}return O};s.trigger=function(O){if(!this._events)return this;for(var F=Math.max(0,arguments.length-1),U=Array(F),Q=0;Q<F;Q++)U[Q]=arguments[Q+1];return c(y,this._events,O,void 0,U),this};var y=function(O,F,U,Q){if(O){var ve=O[F],ge=O.all;ve&&ge&&(ge=ge.slice()),ve&&_(ve,Q),ge&&_(ge,[F].concat(Q))}return O},_=function(O,F){var U,Q=-1,ve=O.length,ge=F[0],Me=F[1],De=F[2];switch(F.length){case 0:for(;++Q<ve;)(U=O[Q]).callback.call(U.ctx);return;case 1:for(;++Q<ve;)(U=O[Q]).callback.call(U.ctx,ge);return;case 2:for(;++Q<ve;)(U=O[Q]).callback.call(U.ctx,ge,Me);return;case 3:for(;++Q<ve;)(U=O[Q]).callback.call(U.ctx,ge,Me,De);return;default:for(;++Q<ve;)(U=O[Q]).callback.apply(U.ctx,F);return}},v=function(O,F){this.id=O._listenId,this.listener=O,this.obj=F,this.interop=!0,this.count=0,this._events=void 0};v.prototype.on=s.on,v.prototype.off=function(O,F){var U;this.interop?(this._events=c(d,this._events,O,F,{context:void 0,listeners:void 0}),U=!this._events):(this.count--,U=this.count===0),U&&this.cleanup()},v.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},s.bind=s.on,s.unbind=s.off,r.extend(n,s);var S=n.Model=function(O,F){var U=O||{};F||(F={}),this.preinitialize.apply(this,arguments),this.cid=r.uniqueId(this.cidPrefix),this.attributes={},F.collection&&(this.collection=F.collection),F.parse&&(U=this.parse(U,F)||{});var Q=r.result(this,"defaults");U=r.defaults(r.extend({},Q,U),Q),this.set(U,F),this.changed={},this.initialize.apply(this,arguments)};r.extend(S.prototype,s,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(O){return r.clone(this.attributes)},sync:function(){return n.sync.apply(this,arguments)},get:function(O){return this.attributes[O]},escape:function(O){return r.escape(this.get(O))},has:function(O){return this.get(O)!=null},matches:function(O){return!!r.iteratee(O,this)(this.attributes)},set:function(O,F,U){if(O==null)return this;var Q;if(typeof O=="object"?(Q=O,U=F):(Q={})[O]=F,U||(U={}),!this._validate(Q,U))return!1;var ve=U.unset,ge=U.silent,Me=[],De=this._changing;this._changing=!0,De||(this._previousAttributes=r.clone(this.attributes),this.changed={});var tt=this.attributes,Xe=this.changed,et=this._previousAttributes;for(var Qe in Q)F=Q[Qe],r.isEqual(tt[Qe],F)||Me.push(Qe),r.isEqual(et[Qe],F)?delete Xe[Qe]:Xe[Qe]=F,ve?delete tt[Qe]:tt[Qe]=F;if(this.idAttribute in Q){var pt=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,pt,U)}if(!ge){Me.length&&(this._pending=U);for(var Ft=0;Ft<Me.length;Ft++)this.trigger("change:"+Me[Ft],this,tt[Me[Ft]],U)}if(De)return this;if(!ge)for(;this._pending;)U=this._pending,this._pending=!1,this.trigger("change",this,U);return this._pending=!1,this._changing=!1,this},unset:function(O,F){return this.set(O,void 0,r.extend({},F,{unset:!0}))},clear:function(O){var F={};for(var U in this.attributes)F[U]=void 0;return this.set(F,r.extend({},O,{unset:!0}))},hasChanged:function(O){return O==null?!r.isEmpty(this.changed):r.has(this.changed,O)},changedAttributes:function(O){if(!O)return this.hasChanged()?r.clone(this.changed):!1;var F=this._changing?this._previousAttributes:this.attributes,U={},Q;for(var ve in O){var ge=O[ve];r.isEqual(F[ve],ge)||(U[ve]=ge,Q=!0)}return Q?U:!1},previous:function(O){return O==null||!this._previousAttributes?null:this._previousAttributes[O]},previousAttributes:function(){return r.clone(this._previousAttributes)},fetch:function(O){O=r.extend({parse:!0},O);var F=this,U=O.success;return O.success=function(Q){var ve=O.parse?F.parse(Q,O):Q;if(!F.set(ve,O))return!1;U&&U.call(O.context,F,Q,O),F.trigger("sync",F,Q,O)},Y(this,O),this.sync("read",this,O)},save:function(O,F,U){var Q;O==null||typeof O=="object"?(Q=O,U=F):(Q={})[O]=F,U=r.extend({validate:!0,parse:!0},U);var ve=U.wait;if(Q&&!ve){if(!this.set(Q,U))return!1}else if(!this._validate(Q,U))return!1;var ge=this,Me=U.success,De=this.attributes;U.success=function(et){ge.attributes=De;var Qe=U.parse?ge.parse(et,U):et;if(ve&&(Qe=r.extend({},Q,Qe)),Qe&&!ge.set(Qe,U))return!1;Me&&Me.call(U.context,ge,et,U),ge.trigger("sync",ge,et,U)},Y(this,U),Q&&ve&&(this.attributes=r.extend({},De,Q));var tt=this.isNew()?"create":U.patch?"patch":"update";tt==="patch"&&!U.attrs&&(U.attrs=Q);var Xe=this.sync(tt,this,U);return this.attributes=De,Xe},destroy:function(O){O=O?r.clone(O):{};var F=this,U=O.success,Q=O.wait,ve=function(){F.stopListening(),F.trigger("destroy",F,F.collection,O)};O.success=function(Me){Q&&ve(),U&&U.call(O.context,F,Me,O),F.isNew()||F.trigger("sync",F,Me,O)};var ge=!1;return this.isNew()?r.defer(O.success):(Y(this,O),ge=this.sync("delete",this,O)),Q||ve(),ge},url:function(){var O=r.result(this,"urlRoot")||r.result(this.collection,"url")||j();if(this.isNew())return O;var F=this.get(this.idAttribute);return O.replace(/[^\/]$/,"$&/")+encodeURIComponent(F)},parse:function(O,F){return O},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(O){return this._validate({},r.extend({},O,{validate:!0}))},_validate:function(O,F){if(!F.validate||!this.validate)return!0;O=r.extend({},this.attributes,O);var U=this.validationError=this.validate(O,F)||null;return U?(this.trigger("invalid",this,U,r.extend(F,{validationError:U})),!1):!0}});var C=n.Collection=function(O,F){F||(F={}),this.preinitialize.apply(this,arguments),F.model&&(this.model=F.model),F.comparator!==void 0&&(this.comparator=F.comparator),this._reset(),this.initialize.apply(this,arguments),O&&this.reset(O,r.extend({silent:!0},F))},k={add:!0,remove:!0,merge:!0},x={add:!0,remove:!1},m=function(O,F,U){U=Math.min(Math.max(U,0),O.length);var Q=Array(O.length-U),ve=F.length,ge;for(ge=0;ge<Q.length;ge++)Q[ge]=O[ge+U];for(ge=0;ge<ve;ge++)O[ge+U]=F[ge];for(ge=0;ge<Q.length;ge++)O[ge+ve+U]=Q[ge]};r.extend(C.prototype,s,{model:S,preinitialize:function(){},initialize:function(){},toJSON:function(O){return this.map(function(F){return F.toJSON(O)})},sync:function(){return n.sync.apply(this,arguments)},add:function(O,F){return this.set(O,r.extend({merge:!1},F,x))},remove:function(O,F){F=r.extend({},F);var U=!r.isArray(O);O=U?[O]:O.slice();var Q=this._removeModels(O,F);return!F.silent&&Q.length&&(F.changes={added:[],merged:[],removed:Q},this.trigger("update",this,F)),U?Q[0]:Q},set:function(O,F){if(O!=null){F=r.extend({},k,F),F.parse&&!this._isModel(O)&&(O=this.parse(O,F)||[]);var U=!r.isArray(O);O=U?[O]:O.slice();var Q=F.at;Q!=null&&(Q=+Q),Q>this.length&&(Q=this.length),Q<0&&(Q+=this.length+1);var ve=[],ge=[],Me=[],De=[],tt={},Xe=F.add,et=F.merge,Qe=F.remove,pt=!1,Ft=this.comparator&&Q==null&&F.sort!==!1,Kt=r.isString(this.comparator)?this.comparator:null,wt,sn;for(sn=0;sn<O.length;sn++){wt=O[sn];var gr=this.get(wt);if(gr){if(et&&wt!==gr){var gi=this._isModel(wt)?wt.attributes:wt;F.parse&&(gi=gr.parse(gi,F)),gr.set(gi,F),Me.push(gr),Ft&&!pt&&(pt=gr.hasChanged(Kt))}tt[gr.cid]||(tt[gr.cid]=!0,ve.push(gr)),O[sn]=gr}else Xe&&(wt=O[sn]=this._prepareModel(wt,F),wt&&(ge.push(wt),this._addReference(wt,F),tt[wt.cid]=!0,ve.push(wt)))}if(Qe){for(sn=0;sn<this.length;sn++)wt=this.models[sn],tt[wt.cid]||De.push(wt);De.length&&this._removeModels(De,F)}var Dr=!1,fo=!Ft&&Xe&&Qe;if(ve.length&&fo?(Dr=this.length!==ve.length||r.some(this.models,function(Tr,Bn){return Tr!==ve[Bn]}),this.models.length=0,m(this.models,ve,0),this.length=this.models.length):ge.length&&(Ft&&(pt=!0),m(this.models,ge,Q??this.length),this.length=this.models.length),pt&&this.sort({silent:!0}),!F.silent){for(sn=0;sn<ge.length;sn++)Q!=null&&(F.index=Q+sn),wt=ge[sn],wt.trigger("add",wt,this,F);(pt||Dr)&&this.trigger("sort",this,F),(ge.length||De.length||Me.length)&&(F.changes={added:ge,removed:De,merged:Me},this.trigger("update",this,F))}return U?O[0]:O}},reset:function(O,F){F=F?r.clone(F):{};for(var U=0;U<this.models.length;U++)this._removeReference(this.models[U],F);return F.previousModels=this.models,this._reset(),O=this.add(O,r.extend({silent:!0},F)),F.silent||this.trigger("reset",this,F),O},push:function(O,F){return this.add(O,r.extend({at:this.length},F))},pop:function(O){var F=this.at(this.length-1);return this.remove(F,O)},unshift:function(O,F){return this.add(O,r.extend({at:0},F))},shift:function(O){var F=this.at(0);return this.remove(F,O)},slice:function(){return a.apply(this.models,arguments)},get:function(O){if(O!=null)return this._byId[O]||this._byId[this.modelId(this._isModel(O)?O.attributes:O,O.idAttribute)]||O.cid&&this._byId[O.cid]},has:function(O){return this.get(O)!=null},at:function(O){return O<0&&(O+=this.length),this.models[O]},where:function(O,F){return this[F?"find":"filter"](O)},findWhere:function(O){return this.where(O,!0)},sort:function(O){var F=this.comparator;if(!F)throw new Error("Cannot sort a set without a comparator");O||(O={});var U=F.length;return r.isFunction(F)&&(F=F.bind(this)),U===1||r.isString(F)?this.models=this.sortBy(F):this.models.sort(F),O.silent||this.trigger("sort",this,O),this},pluck:function(O){return this.map(O+"")},fetch:function(O){O=r.extend({parse:!0},O);var F=O.success,U=this;return O.success=function(Q){var ve=O.reset?"reset":"set";U[ve](Q,O),F&&F.call(O.context,U,Q,O),U.trigger("sync",U,Q,O)},Y(this,O),this.sync("read",this,O)},create:function(O,F){F=F?r.clone(F):{};var U=F.wait;if(O=this._prepareModel(O,F),!O)return!1;U||this.add(O,F);var Q=this,ve=F.success;return F.success=function(ge,Me,De){U&&Q.add(ge,De),ve&&ve.call(De.context,ge,Me,De)},O.save(null,F),O},parse:function(O,F){return O},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(O,F){return O[F||this.model.prototype.idAttribute||"id"]},values:function(){return new P(this,I)},keys:function(){return new P(this,M)},entries:function(){return new P(this,L)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(O,F){if(this._isModel(O))return O.collection||(O.collection=this),O;F=F?r.clone(F):{},F.collection=this;var U;return this.model.prototype?U=new this.model(O,F):U=this.model(O,F),U.validationError?(this.trigger("invalid",this,U.validationError,F),!1):U},_removeModels:function(O,F){for(var U=[],Q=0;Q<O.length;Q++){var ve=this.get(O[Q]);if(ve){var ge=this.indexOf(ve);this.models.splice(ge,1),this.length--,delete this._byId[ve.cid];var Me=this.modelId(ve.attributes,ve.idAttribute);Me!=null&&delete this._byId[Me],F.silent||(F.index=ge,ve.trigger("remove",ve,this,F)),U.push(ve),this._removeReference(ve,F)}}return U},_isModel:function(O){return O instanceof S},_addReference:function(O,F){this._byId[O.cid]=O;var U=this.modelId(O.attributes,O.idAttribute);U!=null&&(this._byId[U]=O),O.on("all",this._onModelEvent,this)},_removeReference:function(O,F){delete this._byId[O.cid];var U=this.modelId(O.attributes,O.idAttribute);U!=null&&delete this._byId[U],this===O.collection&&delete O.collection,O.off("all",this._onModelEvent,this)},_onModelEvent:function(O,F,U,Q){if(F){if((O==="add"||O==="remove")&&U!==this)return;if(O==="destroy"&&this.remove(F,Q),O==="changeId"){var ve=this.modelId(F.previousAttributes(),F.idAttribute),ge=this.modelId(F.attributes,F.idAttribute);ve!=null&&delete this._byId[ve],ge!=null&&(this._byId[ge]=F)}}this.trigger.apply(this,arguments)}});var T=typeof Symbol=="function"&&Symbol.iterator;T&&(C.prototype[T]=C.prototype.values);var P=function(O,F){this._collection=O,this._kind=F,this._index=0},I=1,M=2,L=3;T&&(P.prototype[T]=function(){return this}),P.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var O=this._collection.at(this._index);this._index++;var F;if(this._kind===I)F=O;else{var U=this._collection.modelId(O.attributes,O.idAttribute);this._kind===M?F=U:F=[U,O]}return{value:F,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var R=n.View=function(O){this.cid=r.uniqueId("view"),this.preinitialize.apply(this,arguments),r.extend(this,r.pick(O,z)),this._ensureElement(),this.initialize.apply(this,arguments)},V=/^(\S+)\s*(.*)$/,z=["model","collection","el","id","attributes","className","tagName","events"];r.extend(R.prototype,s,{tagName:"div",$:function(O){return this.$el.find(O)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(O){return this.undelegateEvents(),this._setElement(O),this.delegateEvents(),this},_setElement:function(O){this.$el=O instanceof n.$?O:n.$(O),this.el=this.$el[0]},delegateEvents:function(O){if(O||(O=r.result(this,"events")),!O)return this;this.undelegateEvents();for(var F in O){var U=O[F];if(r.isFunction(U)||(U=this[U]),!!U){var Q=F.match(V);this.delegate(Q[1],Q[2],U.bind(this))}}return this},delegate:function(O,F,U){return this.$el.on(O+".delegateEvents"+this.cid,F,U),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(O,F,U){return this.$el.off(O+".delegateEvents"+this.cid,F,U),this},_createElement:function(O){return document.createElement(O)},_ensureElement:function(){if(this.el)this.setElement(r.result(this,"el"));else{var O=r.extend({},r.result(this,"attributes"));this.id&&(O.id=r.result(this,"id")),this.className&&(O.class=r.result(this,"className")),this.setElement(this._createElement(r.result(this,"tagName"))),this._setAttributes(O)}},_setAttributes:function(O){this.$el.attr(O)}});var ie=function(O,F,U,Q){switch(F){case 1:return function(){return O[U](this[Q])};case 2:return function(ve){return O[U](this[Q],ve)};case 3:return function(ve,ge){return O[U](this[Q],Se(ve,this),ge)};case 4:return function(ve,ge,Me){return O[U](this[Q],Se(ve,this),ge,Me)};default:return function(){var ve=a.call(arguments);return ve.unshift(this[Q]),O[U].apply(O,ve)}}},oe=function(O,F,U,Q){r.each(U,function(ve,ge){F[ge]&&(O.prototype[ge]=ie(F,ve,ge,Q))})},Se=function(O,F){return r.isFunction(O)?O:r.isObject(O)&&!F._isModel(O)?Ae(O):r.isString(O)?function(U){return U.get(O)}:O},Ae=function(O){var F=r.matches(O);return function(U){return F(U.attributes)}},Ee={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},_e={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};r.each([[C,Ee,"models"],[S,_e,"attributes"]],function(O){var F=O[0],U=O[1],Q=O[2];F.mixin=function(ve){var ge=r.reduce(r.functions(ve),function(Me,De){return Me[De]=0,Me},{});oe(F,ve,ge,Q)},oe(F,r,U,Q)}),n.sync=function(O,F,U){var Q=se[O];r.defaults(U||(U={}),{emulateHTTP:n.emulateHTTP,emulateJSON:n.emulateJSON});var ve={type:Q,dataType:"json"};if(U.url||(ve.url=r.result(F,"url")||j()),U.data==null&&F&&(O==="create"||O==="update"||O==="patch")&&(ve.contentType="application/json",ve.data=JSON.stringify(U.attrs||F.toJSON(U))),U.emulateJSON&&(ve.contentType="application/x-www-form-urlencoded",ve.data=ve.data?{model:ve.data}:{}),U.emulateHTTP&&(Q==="PUT"||Q==="DELETE"||Q==="PATCH")){ve.type="POST",U.emulateJSON&&(ve.data._method=Q);var ge=U.beforeSend;U.beforeSend=function(tt){if(tt.setRequestHeader("X-HTTP-Method-Override",Q),ge)return ge.apply(this,arguments)}}ve.type!=="GET"&&!U.emulateJSON&&(ve.processData=!1);var Me=U.error;U.error=function(tt,Xe,et){U.textStatus=Xe,U.errorThrown=et,Me&&Me.call(U.context,tt,Xe,et)};var De=U.xhr=n.ajax(r.extend(ve,U));return F.trigger("request",F,De,U),De};var se={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};n.ajax=function(){return n.$.ajax.apply(n.$,arguments)};var ne=n.Router=function(O){O||(O={}),this.preinitialize.apply(this,arguments),O.routes&&(this.routes=O.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},J=/\((.*?)\)/g,B=/(\(\?)?:\w+/g,H=/\*\w+/g,ae=/[\-{}\[\]+?.,\\\^$|#\s]/g;r.extend(ne.prototype,s,{preinitialize:function(){},initialize:function(){},route:function(O,F,U){r.isRegExp(O)||(O=this._routeToRegExp(O)),r.isFunction(F)&&(U=F,F=""),U||(U=this[F]);var Q=this;return n.history.route(O,function(ve){var ge=Q._extractParameters(O,ve);Q.execute(U,ge,F)!==!1&&(Q.trigger.apply(Q,["route:"+F].concat(ge)),Q.trigger("route",F,ge),n.history.trigger("route",Q,F,ge))}),this},execute:function(O,F,U){O&&O.apply(this,F)},navigate:function(O,F){return n.history.navigate(O,F),this},_bindRoutes:function(){if(this.routes){this.routes=r.result(this,"routes");for(var O,F=r.keys(this.routes);(O=F.pop())!=null;)this.route(O,this.routes[O])}},_routeToRegExp:function(O){return O=O.replace(ae,"\\$&").replace(J,"(?:$1)?").replace(B,function(F,U){return U?F:"([^/?]+)"}).replace(H,"([^?]*?)"),new RegExp("^"+O+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(O,F){var U=O.exec(F).slice(1);return r.map(U,function(Q,ve){return ve===U.length-1?Q||null:Q?decodeURIComponent(Q):null})}});var te=n.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),typeof window<"u"&&(this.location=window.location,this.history=window.history)},ce=/^[#\/]|\s+$/g,ue=/^\/+|\/+$/g,fe=/#.*$/;te.started=!1,r.extend(te.prototype,s,{interval:50,atRoot:function(){var O=this.location.pathname.replace(/[^\/]$/,"$&/");return O===this.root&&!this.getSearch()},matchRoot:function(){var O=this.decodeFragment(this.location.pathname),F=O.slice(0,this.root.length-1)+"/";return F===this.root},decodeFragment:function(O){return decodeURI(O.replace(/%25/g,"%2525"))},getSearch:function(){var O=this.location.href.replace(/#.*/,"").match(/\?.+/);return O?O[0]:""},getHash:function(O){var F=(O||this).location.href.match(/#(.*)$/);return F?F[1]:""},getPath:function(){var O=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return O.charAt(0)==="/"?O.slice(1):O},getFragment:function(O){return O==null&&(this._usePushState||!this._wantsHashChange?O=this.getPath():O=this.getHash()),O.replace(ce,"")},start:function(O){if(te.started)throw new Error("Backbone.history has already been started");if(te.started=!0,this.options=r.extend({root:"/"},this.options,O),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.history&&this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(ue,"/"),this._wantsHashChange&&this._wantsPushState)if(!this._hasPushState&&!this.atRoot()){var F=this.root.slice(0,-1)||"/";return this.location.replace(F+"#"+this.getPath()),!0}else this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0});if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var U=document.body,Q=U.insertBefore(this.iframe,U.firstChild).contentWindow;Q.document.open(),Q.document.close(),Q.location.hash="#"+this.fragment}var ve=window.addEventListener||function(ge,Me){return attachEvent("on"+ge,Me)};if(this._usePushState?ve("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?ve("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var O=window.removeEventListener||function(F,U){return detachEvent("on"+F,U)};this._usePushState?O("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&O("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),te.started=!1},route:function(O,F){this.handlers.unshift({route:O,callback:F})},checkUrl:function(O){var F=this.getFragment();if(F===this.fragment&&this.iframe&&(F=this.getHash(this.iframe.contentWindow)),F===this.fragment)return!1;this.iframe&&this.navigate(F),this.loadUrl()},loadUrl:function(O){return this.matchRoot()?(O=this.fragment=this.getFragment(O),r.some(this.handlers,function(F){if(F.route.test(O))return F.callback(O),!0})):!1},navigate:function(O,F){if(!te.started)return!1;(!F||F===!0)&&(F={trigger:!!F}),O=this.getFragment(O||"");var U=this.root;(O===""||O.charAt(0)==="?")&&(U=U.slice(0,-1)||"/");var Q=U+O;O=O.replace(fe,"");var ve=this.decodeFragment(O);if(this.fragment!==ve){if(this.fragment=ve,this._usePushState)this.history[F.replace?"replaceState":"pushState"]({},document.title,Q);else if(this._wantsHashChange){if(this._updateHash(this.location,O,F.replace),this.iframe&&O!==this.getHash(this.iframe.contentWindow)){var ge=this.iframe.contentWindow;F.replace||(ge.document.open(),ge.document.close()),this._updateHash(ge.location,O,F.replace)}}else return this.location.assign(Q);if(F.trigger)return this.loadUrl(O)}},_updateHash:function(O,F,U){if(U){var Q=O.href.replace(/(javascript:|#).*$/,"");O.replace(Q+"#"+F)}else O.hash="#"+F}}),n.history=new te;var ye=function(O,F){var U=this,Q;return O&&r.has(O,"constructor")?Q=O.constructor:Q=function(){return U.apply(this,arguments)},r.extend(Q,U,F),Q.prototype=r.create(U.prototype,O),Q.prototype.constructor=Q,Q.__super__=U.prototype,Q};S.extend=C.extend=ne.extend=R.extend=te.extend=ye;var j=function(){throw new Error('A "url" property or function must be specified')},Y=function(O,F){var U=F.error;F.error=function(Q){U&&U.call(F.context,O,Q,F),O.trigger("error",O,Q,F)}};return n})})(roe);const Go=pr(roe),m6e=function(){var t=typeof window=="object"&&!!window.SVGAngle;if(!t)return function(){throw new Error("SVG is required to use Vectorizer.")};var e={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},n="1.1",r=Math,i=r.PI,o=r.atan2,a=r.sqrt,s=r.min,l=r.max,u=r.cos,c=r.sin,f=function(x,m,T){if(!(this instanceof f))return f.apply(Object.create(f.prototype),arguments);if(x){if(f.isV(x)&&(x=x.node),m=m||{},f.isString(x)){if(x=x.trim(),x.toLowerCase()==="svg")x=f.createSvgDocument();else if(x[0]==="<"){var P=f.createSvgDocument(x);if(P.childNodes.length>1){var I=[],M,L;for(M=0,L=P.childNodes.length;M<L;M++){var R=P.childNodes[M];I.push(new f(document.importNode(R,!0)))}return I}x=document.importNode(P.firstChild,!0)}else x=document.createElementNS(e.svg,x);f.ensureId(x)}return this.node=x,this.setAttributes(m),T&&this.append(T),this}},h=f.prototype;Object.defineProperty(h,"id",{enumerable:!0,get:function(){return this.node.id},set:function(x){this.node.id=x}}),h.getTransformToElement=function(x){var m=this.node;if(f.isSVGGraphicsElement(x)&&f.isSVGGraphicsElement(m)){var T=f.toNode(x).getScreenCTM(),P=m.getScreenCTM();if(T&&P)return T.inverse().multiply(P)}return f.createSVGMatrix()},h.transform=function(x,m){var T=this.node;if(f.isUndefined(x))return f.transformStringToMatrix(this.attr("transform"));if(m&&m.absolute)return this.attr("transform",f.matrixToTransformString(x));var P=f.createSVGTransform(x);return T.transform.baseVal.appendItem(P),this},h.translate=function(x,m,T){T=T||{},m=m||0;var P=this.attr("transform")||"",I=f.parseTransformString(P);if(P=I.value,f.isUndefined(x))return I.translate;P=P.replace(/translate\([^)]*\)/g,"").trim();var M=T.absolute?x:I.translate.tx+x,L=T.absolute?m:I.translate.ty+m,R="translate("+M+","+L+")";return this.attr("transform",(R+" "+P).trim()),this},h.rotate=function(x,m,T,P){P=P||{};var I=this.attr("transform")||"",M=f.parseTransformString(I);if(I=M.value,f.isUndefined(x))return M.rotate;I=I.replace(/rotate\([^)]*\)/g,"").trim(),x%=360;var L=P.absolute?x:M.rotate.angle+x,R=m!==void 0&&T!==void 0?","+m+","+T:"",V="rotate("+L+R+")";return this.attr("transform",(I+" "+V).trim()),this},h.scale=function(x,m){m=f.isUndefined(m)?x:m;var T=this.attr("transform")||"",P=f.parseTransformString(T);if(T=P.value,f.isUndefined(x))return P.scale;T=T.replace(/scale\([^)]*\)/g,"").trim();var I="scale("+x+","+m+")";return this.attr("transform",(T+" "+I).trim()),this},h.bbox=function(x,m){var T,P=this.node,I=P.ownerSVGElement;if(!I)return new st(0,0,0,0);try{T=P.getBBox()}catch{T={x:P.clientLeft,y:P.clientTop,width:P.clientWidth,height:P.clientHeight}}if(x)return new st(T);var M=this.getTransformToElement(m||I);return f.transformRect(T,M)},h.getBBox=function(x){var m={},T,P=this.node,I=P.ownerSVGElement;if(!I||!f.isSVGGraphicsElement(P))return new st(0,0,0,0);if(x&&(x.target&&(m.target=f.toNode(x.target)),x.recursive&&(m.recursive=x.recursive)),m.recursive){var L=this.children(),R=L.length;if(R===0)return this.getBBox({target:m.target,recursive:!1});m.target||(m.target=this);for(var V=0;V<R;V++){var z=L[V],ie;z.children().length===0?ie=z.getBBox({target:m.target,recursive:!1}):ie=z.getBBox({target:m.target,recursive:!0}),T?T=T.union(ie):T=ie}return T}else{try{T=P.getBBox()}catch{T={x:P.clientLeft,y:P.clientTop,width:P.clientWidth,height:P.clientHeight}}if(m.target){var M=this.getTransformToElement(m.target);return f.transformRect(T,M)}else return new st(T)}};function d(x,m){x||(x={});var T=f("textPath"),P=x.d;if(P&&x["xlink:href"]===void 0){var I=f("path").attr("d",P).appendTo(m.defs());T.attr("xlink:href","#"+I.id)}return f.isObject(x)&&T.attr(x),T.node}function g(x,m,T){T||(T={});for(var P=T.includeAnnotationIndices,I=T.eol,M=T.lineHeight,L=T.baseSize,R=0,V={},z=m.length-1,ie=0;ie<=z;ie++){var oe=m[ie],Se=null;if(f.isObject(oe)){var Ae=oe.attrs,Ee=f("tspan",Ae),_e=Ee.node,se=oe.t;I&&ie===z&&(se+=I),_e.textContent=se;var ne=Ae.class;ne&&Ee.addClass(ne),P&&Ee.attr("annotations",oe.annotations),Se=parseFloat(Ae["font-size"]),isFinite(Se)||(Se=L),Se&&Se>R&&(R=Se)}else I&&ie===z&&(oe+=I),_e=document.createTextNode(oe||" "),L&&L>R&&(R=L);x.appendChild(_e)}return R&&(V.maxFontSize=R),M?V.lineHeight=M:R&&(V.lineHeight=R*1.2),V}var y=/em$/;function _(x,m){var T=parseFloat(x);return y.test(x)?T*m:T}function v(x,m,T,P){if(!Array.isArray(m))return 0;var I=m.length;if(!I)return 0;for(var M=m[0],L=_(M.maxFontSize,T)||T,R=0,V=_(P,T),z=1;z<I;z++){M=m[z];var ie=_(M.lineHeight,T)||V;R+=ie}var oe=_(M.maxFontSize,T)||T,Se;switch(x){case"middle":Se=L/2-.15*oe-R/2;break;case"bottom":Se=-(.25*oe)-R;break;default:case"top":Se=.8*L;break}return Se}h.text=function(x,m){if(x&&typeof x!="string")throw new Error("Vectorizer: text() expects the first argument to be a string.");x=f.sanitizeText(x),m||(m={});var T=m.displayEmpty,P=m.eol,I=m.textPath,M=m.textVerticalAnchor,L=M==="middle"||M==="bottom"||M==="top",R=m.x;R===void 0&&(R=this.attr("x")||0);var V=m.includeAnnotationIndices,z=m.annotations;z&&!f.isArray(z)&&(z=[z]);var ie=m.lineHeight,oe=ie==="auto",Se=oe?"1.5em":ie||"1em";this.empty(),this.attr({"xml:space":"preserve",display:x||T?null:"none"});var Ae=parseFloat(this.attr("font-size"));Ae||(Ae=16,(L||z)&&this.attr("font-size",Ae));var Ee=document,_e;I?(typeof I=="string"&&(I={d:I}),_e=d(I,this)):_e=Ee.createDocumentFragment();for(var se=0,ne=x.split(`
`),J=[],B,H=0,ae=ne.length-1;H<=ae;H++){var te=Se,ce="v-line",ue=Ee.createElementNS(e.svg,"tspan"),fe=ne[H],ye;if(fe)if(z){var j=f.annotateString(fe,z,{offset:-se,includeAnnotationIndices:V});ye=g(ue,j,{includeAnnotationIndices:V,eol:H!==ae&&P,lineHeight:oe?null:Se,baseSize:Ae});var Y=ye.lineHeight;Y&&oe&&H!==0&&(te=Y),H===0&&(B=ye.maxFontSize*.8)}else P&&H!==ae&&(fe+=P),ue.textContent=fe;else{ue.textContent="-",ce+=" v-empty-line";var O=ue.style;if(O.fillOpacity=0,O.strokeOpacity=0,z){ye={},j=f.findAnnotationsAtIndex(z,se);let U=Ae;for(let Q=j.length;Q>0;Q--){const ve=j[Q-1].attrs;if(!ve||!("font-size"in ve))continue;const ge=parseFloat(ve["font-size"]);if(isFinite(ge)){U=ge;break}}oe&&(H>0?te=U*1.2:B=U*.8),ue.setAttribute("font-size",U),ye.maxFontSize=U}}ye&&J.push(ye),H>0&&ue.setAttribute("dy",te),(H>0||I)&&ue.setAttribute("x",R),ue.className.baseVal=ce,_e.appendChild(ue),se+=fe.length+1}if(L)if(z)te=v(M,J,Ae,Se);else if(M==="top")te="0.8em";else{var F;switch(ae>0?(F=parseFloat(Se)||1,F*=ae,y.test(Se)||(F/=Ae)):F=0,M){case"middle":te=.3-F/2+"em";break;case"bottom":te=-F-.3+"em";break}}else M===0?te="0em":M?te=M:(te=0,this.attr("y")===null&&this.attr("y",B||"0.8em"));return _e.firstChild.setAttribute("dy",te),this.append(_e),this},h.removeAttr=function(x){var m=f.qualifyAttr(x),T=this.node;return m.ns?T.hasAttributeNS(m.ns,m.local)&&T.removeAttributeNS(m.ns,m.local):T.hasAttribute(x)&&T.removeAttribute(x),this},h.attr=function(x,m){if(f.isUndefined(x)){for(var T=this.node.attributes,P={},I=0;I<T.length;I++)P[T[I].name]=T[I].value;return P}if(f.isString(x)&&f.isUndefined(m))return this.node.getAttribute(x);if(typeof x=="object")for(var M in x)x.hasOwnProperty(M)&&this.setAttribute(M,x[M]);else this.setAttribute(x,m);return this},h.normalizePath=function(){var x=this.tagName();return x==="PATH"&&this.attr("d",f.normalizePathData(this.attr("d"))),this},h.remove=function(){return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this},h.empty=function(){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);return this},h.setAttributes=function(x){for(var m in x)x.hasOwnProperty(m)&&this.setAttribute(m,x[m]);return this},h.append=function(x){f.isArray(x)||(x=[x]);for(var m=0,T=x.length;m<T;m++)this.node.appendChild(f.toNode(x[m]));return this},h.prepend=function(x){var m=this.node.firstChild;return m?f(m).before(x):this.append(x)},h.before=function(x){var m=this.node,T=m.parentNode;if(T){f.isArray(x)||(x=[x]);for(var P=0,I=x.length;P<I;P++)T.insertBefore(f.toNode(x[P]),m)}return this},h.appendTo=function(x){return f.toNode(x).appendChild(this.node),this},h.svg=function(){return this.node instanceof window.SVGSVGElement?this:f(this.node.ownerSVGElement)},h.tagName=function(){return this.node.tagName.toUpperCase()},h.defs=function(){var x=this.svg()||this,m=x.node.getElementsByTagName("defs")[0];return m?f(m):f("defs").appendTo(x)},h.clone=function(){var x=f(this.node.cloneNode(!0));return x.node.id=f.uniqueId(),x},h.findOne=function(x){var m=this.node.querySelector(x);return m?f(m):void 0},h.find=function(x){var m=[],T=this.node.querySelectorAll(x);if(T)for(var P=0;P<T.length;P++)m.push(f(T[P]));return m},h.children=function(){for(var x=this.node.childNodes,m=[],T=0;T<x.length;T++){var P=x[T];P.nodeType===1&&m.push(f(x[T]))}return m},h.parent=function(){return f(this.node.parentNode)||null},h.index=function(){for(var x=0,m=this.node.previousSibling;m;)m.nodeType===1&&x++,m=m.previousSibling;return x},h.findParentByClass=function(x,m){for(var T=this.node.ownerSVGElement,P=this.node.parentNode;P&&P!==m&&P!==T;){var I=f(P);if(I.hasClass(x))return I;P=P.parentNode}return null},h.contains=function(x){var m=this.node,T=f.toNode(x),P=T&&T.parentNode;return m===P||!!(P&&P.nodeType===1&&m.compareDocumentPosition(P)&16)},h.toLocalPoint=function(x,m){var T=this.svg().node,P=T.createSVGPoint();P.x=x,P.y=m;try{var I=P.matrixTransform(T.getScreenCTM().inverse()),M=this.getTransformToElement(T).inverse()}catch{return P}return I.matrixTransform(M)},h.translateCenterToPoint=function(x){var m=this.getBBox({target:this.svg()}),T=m.center();return this.translate(x.x-T.x,x.y-T.y),this},h.translateAndAutoOrient=function(x,m,T){x=new we(x),m=new we(m),T||(T=this.svg());var P=this.scale();this.attr("transform","");var I=this.getBBox({target:T}).scale(P.sx,P.sy),M=f.createSVGTransform();M.setTranslate(-I.x-I.width/2,-I.y-I.height/2);var L=f.createSVGTransform(),R=x.angleBetween(m,x.clone().offset(1,0));R&&L.setRotate(R,0,0);var V=f.createSVGTransform(),z=x.clone().move(m,I.width/2);V.setTranslate(2*x.x-z.x,2*x.y-z.y);var ie=this.getTransformToElement(T),oe=f.createSVGTransform();return oe.setMatrix(V.matrix.multiply(L.matrix.multiply(M.matrix.multiply(ie.scale(P.sx,P.sy))))),this.attr("transform",f.matrixToTransformString(oe.matrix)),this},h.animateAlongPath=function(x,m){m=f.toNode(m);var T=f.ensureId(m),P=f("animateMotion",x),I=f("mpath",{"xlink:href":"#"+T});P.append(I),this.append(P);try{P.node.beginElement()}catch{if(document.documentElement.getAttribute("smiling")==="fake"){var M=P.node;M.animators=[];var L=M.getAttribute("id");L&&(id2anim[L]=M);for(var R=getTargets(M),V=0,z=R.length;V<z;V++){var ie=R[V],oe=new Animator(M,ie,V);animators.push(oe),M.animators[V]=oe,oe.register()}}}return this};const S=/[^\x20\t\r\n\f]+/g;function C(x){return f.isString(x)?x.trim().match(S)||[]:[]}h.hasClass=function(x){return f.isString(x)?this.node.classList.contains(x.trim()):!1},h.addClass=function(x){return this.node.classList.add(...C(x)),this},h.removeClass=function(x){return this.node.classList.remove(...C(x)),this},h.toggleClass=function(x,m){const T=C(x);for(let P=0;P<T.length;P++)this.node.classList.toggle(T[P],m);return this},h.sample=function(x){x=x||1;for(var m=this.node,T=m.getTotalLength(),P=[],I=0,M;I<T;)M=m.getPointAtLength(I),P.push({x:M.x,y:M.y,distance:I}),I+=x;return P},h.convertToPath=function(){var x=f("path");x.attr(this.attr());var m=this.convertToPathData();return m&&x.attr("d",m),x},h.convertToPathData=function(){var x=this.tagName();switch(x){case"PATH":return this.attr("d");case"LINE":return f.convertLineToPathData(this.node);case"POLYGON":return f.convertPolygonToPathData(this.node);case"POLYLINE":return f.convertPolylineToPathData(this.node);case"ELLIPSE":return f.convertEllipseToPathData(this.node);case"CIRCLE":return f.convertCircleToPathData(this.node);case"RECT":return f.convertRectToPathData(this.node)}throw new Error(x+" cannot be converted to PATH.")},f.prototype.toGeometryShape=function(){var x,m,T,P,I,M,L,R,V,z,ie,oe,Se,Ae,Ee;switch(this.tagName()){case"RECT":return x=parseFloat(this.attr("x"))||0,m=parseFloat(this.attr("y"))||0,T=parseFloat(this.attr("width"))||0,P=parseFloat(this.attr("height"))||0,new st(x,m,T,P);case"CIRCLE":return I=parseFloat(this.attr("cx"))||0,M=parseFloat(this.attr("cy"))||0,L=parseFloat(this.attr("r"))||0,new Ca({x:I,y:M},L,L);case"ELLIPSE":return I=parseFloat(this.attr("cx"))||0,M=parseFloat(this.attr("cy"))||0,R=parseFloat(this.attr("rx"))||0,V=parseFloat(this.attr("ry"))||0,new Ca({x:I,y:M},R,V);case"POLYLINE":return z=f.getPointsFromSvgNode(this),new $r(z);case"POLYGON":return z=f.getPointsFromSvgNode(this),z.length>1&&z.push(z[0]),new $r(z);case"PATH":return ie=this.attr("d"),Ct.isDataSupported(ie)||(ie=f.normalizePathData(ie)),new Ct(ie);case"LINE":return oe=parseFloat(this.attr("x1"))||0,Ae=parseFloat(this.attr("y1"))||0,Se=parseFloat(this.attr("x2"))||0,Ee=parseFloat(this.attr("y2"))||0,new gt({x:oe,y:Ae},{x:Se,y:Ee})}return this.getBBox()},h.findIntersection=function(x,m){var T=this.svg().node;m=m||T;var P=this.getBBox({target:m}),I=P.center();if(P.intersectionWithLineFromCenterToPoint(x)){var M,L=this.tagName();if(L==="RECT"){var R=new st(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),V=this.getTransformToElement(m),z=f.decomposeMatrix(V),ie=T.createSVGTransform();ie.setRotate(-z.rotation,I.x,I.y);var oe=f.transformRect(R,ie.matrix.multiply(V));M=new st(oe).intersectionWithLineFromCenterToPoint(x,z.rotation)}else if(L==="PATH"||L==="POLYGON"||L==="POLYLINE"||L==="CIRCLE"||L==="ELLIPSE"){var Se=L==="PATH"?this:this.convertToPath(),Ae=Se.sample(),Ee=1/0,_e=[],se,ne,J,B,H,ae;for(se=0;se<Ae.length;se++)ne=Ae[se],J=f.createSVGPoint(ne.x,ne.y),J=J.matrixTransform(this.getTransformToElement(m)),ne=new we(J),B=ne.distance(I),H=ne.distance(x)*1.1,ae=B+H,ae<Ee?(Ee=ae,_e=[{sample:ne,refDistance:H}]):ae<Ee+1&&_e.push({sample:ne,refDistance:H});_e.sort(function(te,ce){return te.refDistance-ce.refDistance}),_e[0]&&(M=_e[0].sample)}return M}},h.setAttribute=function(x,m){var T=this.node;if(m===null)return this.removeAttr(x),this;var P=f.qualifyAttr(x);return P.ns?T.setAttributeNS(P.ns,x,m):x==="id"?T.id=m:T.setAttribute(x,m),this},f.createSvgDocument=function(x){if(x){const T=`<svg xmlns="${e.svg}" xmlns:xlink="${e.xlink}" version="${n}">${x}</svg>`,{documentElement:P}=f.parseXML(T,{async:!1});return P}const m=document.createElementNS(e.svg,"svg");return m.setAttributeNS(e.xmlns,"xmlns:xlink",e.xlink),m.setAttribute("version",n),m},f.createSVGStyle=function(x){const{node:m}=f("style",{type:"text/css"},[f.createCDATASection(x)]);return m},f.createCDATASection=function(x=""){return document.implementation.createDocument(null,"xml",null).createCDATASection(x)},f.idCounter=0,f.uniqueId=function(){return"v-"+ ++f.idCounter},f.toNode=function(x){return f.isV(x)?x.node:x.nodeName&&x||x[0]},f.ensureId=function(x){return x=f.toNode(x),x.id||(x.id=f.uniqueId())},f.sanitizeText=function(x){return(x||"").replace(/ /g," ")},f.isUndefined=function(x){return typeof x>"u"},f.isString=function(x){return typeof x=="string"},f.isObject=function(x){return x&&typeof x=="object"},f.isArray=Array.isArray,f.parseXML=function(x,m){m=m||{};var T;try{var P=new DOMParser;f.isUndefined(m.async)||(P.async=m.async),T=P.parseFromString(x,"text/xml")}catch{T=void 0}if(!T||T.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+x);return T},f.qualifyAttr=function(x){if(x.indexOf(":")!==-1){var m=x.split(":");return{ns:e[m[0]],local:m[1]}}return{ns:null,local:x}},f.transformSeparatorRegex=/[ ,]+/,f.transformRegex=/\b\w+\([^()]+\)/g,f.transformFunctionRegex=/\b(\w+)\(([^()]+)\)/,f.transformTranslateRegex=/\btranslate\(([^()]+)\)/,f.transformRotateRegex=/\brotate\(([^()]+)\)/,f.transformScaleRegex=/\bscale\(([^()]+)\)/,f.transformStringToMatrix=function(x){let m=f.createSVGMatrix();const T=x&&x.match(f.transformRegex);if(!T)return m;const P=T.length;for(let I=0;I<P;I++){const L=T[I].match(f.transformFunctionRegex);if(L){let R,V,z,ie,oe,Se=f.createSVGMatrix();const Ae=L[1].toLowerCase(),Ee=L[2].split(f.transformSeparatorRegex);switch(Ae){case"scale":R=parseFloat(Ee[0]),V=Ee[1]===void 0?R:parseFloat(Ee[1]),Se=Se.scaleNonUniform(R,V);break;case"translate":z=parseFloat(Ee[0]),ie=parseFloat(Ee[1]),Se=Se.translate(z,ie);break;case"rotate":oe=parseFloat(Ee[0]),z=parseFloat(Ee[1])||0,ie=parseFloat(Ee[2])||0,z!==0||ie!==0?Se=Se.translate(z,ie).rotate(oe).translate(-z,-ie):Se=Se.rotate(oe);break;case"skewx":oe=parseFloat(Ee[0]),Se=Se.skewX(oe);break;case"skewy":oe=parseFloat(Ee[0]),Se=Se.skewY(oe);break;case"matrix":Se.a=parseFloat(Ee[0]),Se.b=parseFloat(Ee[1]),Se.c=parseFloat(Ee[2]),Se.d=parseFloat(Ee[3]),Se.e=parseFloat(Ee[4]),Se.f=parseFloat(Ee[5]);break;default:continue}m=m.multiply(Se)}}return m},f.matrixToTransformString=function(x){return x||(x=!0),"matrix("+(x.a!==void 0?x.a:1)+","+(x.b!==void 0?x.b:0)+","+(x.c!==void 0?x.c:0)+","+(x.d!==void 0?x.d:1)+","+(x.e!==void 0?x.e:0)+","+(x.f!==void 0?x.f:0)+")"},f.parseTransformString=function(x){var m,T,P;if(x){var I=f.transformSeparatorRegex;if(x.trim().indexOf("matrix")>=0){var M=f.transformStringToMatrix(x),L=f.decomposeMatrix(M);m=[L.translateX,L.translateY],P=[L.scaleX,L.scaleY],T=[L.rotation];var R=[];(m[0]!==0||m[1]!==0)&&R.push("translate("+m+")"),(P[0]!==1||P[1]!==1)&&R.push("scale("+P+")"),T[0]!==0&&R.push("rotate("+T+")"),x=R.join(" ")}else{const z=x.match(f.transformTranslateRegex);z&&(m=z[1].split(I));const ie=x.match(f.transformRotateRegex);ie&&(T=ie[1].split(I));const oe=x.match(f.transformScaleRegex);oe&&(P=oe[1].split(I))}}var V=P&&P[0]?parseFloat(P[0]):1;return{value:x,translate:{tx:m&&m[0]?parseInt(m[0],10):0,ty:m&&m[1]?parseInt(m[1],10):0},rotate:{angle:T&&T[0]?parseInt(T[0],10):0,cx:T&&T[1]?parseInt(T[1],10):void 0,cy:T&&T[2]?parseInt(T[2],10):void 0},scale:{sx:V,sy:P&&P[1]?parseFloat(P[1]):V}}},f.deltaTransformPoint=function(x,m){var T=m.x*x.a+m.y*x.c+0,P=m.x*x.b+m.y*x.d+0;return{x:T,y:P}},f.decomposeMatrix=function(x){var m=f.deltaTransformPoint(x,{x:0,y:1}),T=f.deltaTransformPoint(x,{x:1,y:0}),P=180/i*o(m.y,m.x)-90,I=180/i*o(T.y,T.x);return{translateX:x.e,translateY:x.f,scaleX:a(x.a*x.a+x.b*x.b),scaleY:a(x.c*x.c+x.d*x.d),skewX:P,skewY:I,rotation:P}},f.matrixToScale=function(x){var m,T,P,I;return x?(m=f.isUndefined(x.a)?1:x.a,I=f.isUndefined(x.d)?1:x.d,T=x.b,P=x.c):m=I=1,{sx:T?a(m*m+T*T):m,sy:P?a(P*P+I*I):I}},f.matrixToRotate=function(x){var m={x:0,y:1};return x&&(m=f.deltaTransformPoint(x,m)),{angle:_c(oE(o(m.y,m.x))-90)}},f.matrixToTranslate=function(x){return{tx:x&&x.e||0,ty:x&&x.f||0}},f.isV=function(x){return x instanceof f},f.isVElement=f.isV,f.isSVGGraphicsElement=function(x){return x?(x=f.toNode(x),x instanceof SVGElement&&typeof x.getScreenCTM=="function"):!1};var k=f("svg").node;return f.createSVGMatrix=function(x){var m=k.createSVGMatrix();for(var T in x)m[T]=x[T];return m},f.createSVGTransform=function(x){return f.isUndefined(x)?k.createSVGTransform():(x instanceof SVGMatrix||(x=f.createSVGMatrix(x)),k.createSVGTransformFromMatrix(x))},f.createSVGPoint=function(x,m){var T=k.createSVGPoint();return T.x=x,T.y=m,T},f.transformRect=function(x,m){var T=k.createSVGPoint();T.x=x.x,T.y=x.y;var P=T.matrixTransform(m);T.x=x.x+x.width,T.y=x.y;var I=T.matrixTransform(m);T.x=x.x+x.width,T.y=x.y+x.height;var M=T.matrixTransform(m);T.x=x.x,T.y=x.y+x.height;var L=T.matrixTransform(m),R=s(P.x,I.x,M.x,L.x),V=l(P.x,I.x,M.x,L.x),z=s(P.y,I.y,M.y,L.y),ie=l(P.y,I.y,M.y,L.y);return new st(R,z,V-R,ie-z)},f.transformPoint=function(x,m){return new we(f.createSVGPoint(x.x,x.y).matrixTransform(m))},f.transformLine=function(x,m){return new gt(f.transformPoint(x.start,m),f.transformPoint(x.end,m))},f.transformPolyline=function(x,m){var T=x instanceof $r?x.points:x;f.isArray(T)||(T=[]);for(var P=[],I=0,M=T.length;I<M;I++)P[I]=f.transformPoint(T[I],m);return new $r(P)},f.styleToObject=function(x){for(var m={},T=x.split(";"),P=0;P<T.length;P++){var I=T[P],M=I.split("=");m[M[0].trim()]=M[1].trim()}return m},f.createSlicePathData=function(x,m,T,P){var I=2*i-1e-6,M=x,L=m,R=T,V=P,z=(V<R&&(z=R,R=V,V=z),V-R),ie=z<i?"0":"1",oe=u(R),Se=c(R),Ae=u(V),Ee=c(V);return z>=I?M?"M0,"+L+"A"+L+","+L+" 0 1,1 0,"+-L+"A"+L+","+L+" 0 1,1 0,"+L+"M0,"+M+"A"+M+","+M+" 0 1,0 0,"+-M+"A"+M+","+M+" 0 1,0 0,"+M+"Z":"M0,"+L+"A"+L+","+L+" 0 1,1 0,"+-L+"A"+L+","+L+" 0 1,1 0,"+L+"Z":M?"M"+L*oe+","+L*Se+"A"+L+","+L+" 0 "+ie+",1 "+L*Ae+","+L*Ee+"L"+M*Ae+","+M*Ee+"A"+M+","+M+" 0 "+ie+",0 "+M*oe+","+M*Se+"Z":"M"+L*oe+","+L*Se+"A"+L+","+L+" 0 "+ie+",1 "+L*Ae+","+L*Ee+"L0,0Z"},f.mergeAttrs=function(x,m){for(var T in m)T==="class"?x[T]=x[T]?x[T]+" "+m[T]:m[T]:T==="style"?f.isObject(x[T])&&f.isObject(m[T])?x[T]=f.mergeAttrs(x[T],m[T]):f.isObject(x[T])?x[T]=f.mergeAttrs(x[T],f.styleToObject(m[T])):f.isObject(m[T])?x[T]=f.mergeAttrs(f.styleToObject(x[T]),m[T]):x[T]=f.mergeAttrs(f.styleToObject(x[T]),f.styleToObject(m[T])):x[T]=m[T];return x},f.annotateString=function(x,m,T){m=m||[],T=T||{};for(var P=T.offset||0,I=[],M,L=[],R,V,z=0;z<x.length;z++){R=L[z]=x[z];for(var ie=0;ie<m.length;ie++){var oe=m[ie],Se=oe.start+P,Ae=oe.end+P;z>=Se&&z<Ae&&(f.isObject(R)?R.attrs=f.mergeAttrs(f.mergeAttrs({},R.attrs),oe.attrs):R=L[z]={t:x[z],attrs:oe.attrs},T.includeAnnotationIndices&&(R.annotations||(R.annotations=[])).push(ie))}V=L[z-1],V?f.isObject(R)&&f.isObject(V)?JSON.stringify(R.attrs)===JSON.stringify(V.attrs)?M.t+=R.t:(I.push(M),M=R):f.isObject(R)||f.isObject(V)?(I.push(M),M=R):M=(M||"")+R:M=R}return M&&I.push(M),I},f.findAnnotationsAtIndex=function(x,m){var T=[];return x&&x.forEach(function(P){P.start<m&&m<=P.end&&T.push(P)}),T},f.findAnnotationsBetweenIndexes=function(x,m,T){var P=[];return x&&x.forEach(function(I){(m>=I.start&&m<I.end||T>I.start&&T<=I.end||I.start>=m&&I.end<T)&&P.push(I)}),P},f.shiftAnnotations=function(x,m,T){return x&&x.forEach(function(P){P.start<m&&P.end>=m?P.end+=T:P.start>=m&&(P.start+=T,P.end+=T)}),x},f.convertLineToPathData=function(x){x=f(x);var m=["M",x.attr("x1"),x.attr("y1"),"L",x.attr("x2"),x.attr("y2")].join(" ");return m},f.convertPolygonToPathData=function(x){var m=f.getPointsFromSvgNode(x);return m.length===0?null:f.svgPointsToPath(m)+" Z"},f.convertPolylineToPathData=function(x){var m=f.getPointsFromSvgNode(x);return m.length===0?null:f.svgPointsToPath(m)},f.svgPointsToPath=function(x){for(var m=0,T=x.length;m<T;m++)x[m]=x[m].x+" "+x[m].y;return"M "+x.join(" L")},f.getPointsFromSvgNode=function(x){x=f.toNode(x);var m=[],T=x.points;if(T)for(var P=0,I=T.numberOfItems;P<I;P++)m.push(T.getItem(P));return m},f.KAPPA=.551784,f.convertCircleToPathData=function(x){x=f(x);var m=parseFloat(x.attr("cx"))||0,T=parseFloat(x.attr("cy"))||0,P=parseFloat(x.attr("r")),I=P*f.KAPPA,M=["M",m,T-P,"C",m+I,T-P,m+P,T-I,m+P,T,"C",m+P,T+I,m+I,T+P,m,T+P,"C",m-I,T+P,m-P,T+I,m-P,T,"C",m-P,T-I,m-I,T-P,m,T-P,"Z"].join(" ");return M},f.convertEllipseToPathData=function(x){x=f(x);var m=parseFloat(x.attr("cx"))||0,T=parseFloat(x.attr("cy"))||0,P=parseFloat(x.attr("rx")),I=parseFloat(x.attr("ry"))||P,M=P*f.KAPPA,L=I*f.KAPPA,R=["M",m,T-I,"C",m+M,T-I,m+P,T-L,m+P,T,"C",m+P,T+L,m+M,T+I,m,T+I,"C",m-M,T+I,m-P,T+L,m-P,T,"C",m-P,T-L,m-M,T-I,m,T-I,"Z"].join(" ");return R},f.convertRectToPathData=function(x){return x=f(x),f.rectToPath({x:parseFloat(x.attr("x"))||0,y:parseFloat(x.attr("y"))||0,width:parseFloat(x.attr("width"))||0,height:parseFloat(x.attr("height"))||0,rx:parseFloat(x.attr("rx"))||0,ry:parseFloat(x.attr("ry"))||0})},f.rectToPath=function(x){var m,T=x.x,P=x.y,I=x.width,M=x.height,L=s(x.rx||x["top-rx"]||0,I/2),R=s(x.rx||x["bottom-rx"]||0,I/2),V=s(x.ry||x["top-ry"]||0,M/2),z=s(x.ry||x["bottom-ry"]||0,M/2);return L||R||V||z?m=["M",T,P+V,"v",M-V-z,"a",R,z,0,0,0,R,z,"h",I-2*R,"a",R,z,0,0,0,R,-z,"v",-(M-z-V),"a",L,V,0,0,0,-L,-V,"h",-(I-2*L),"a",L,V,0,0,0,-L,V,"Z"]:m=["M",T,P,"H",T+I,"V",P+M,"H",T,"V",P,"Z"],m.join(" ")},f.normalizePathData=function(){var x=`	
\v\f\r   ᠎             　\u2028\u2029`,m=new RegExp("([a-z])["+x+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+x+"]*,?["+x+"]*)+)","ig"),T=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+x+"]*,?["+x+"]*","ig"),P=Math,I=P.PI,M=P.sin,L=P.cos,R=P.tan,V=P.asin,z=P.sqrt,ie=P.abs;function oe(ne,J,B,H,ae,te){var ce=.3333333333333333,ue=2/3;return[ce*ne+ue*B,ce*J+ue*H,ce*ae+ue*B,ce*te+ue*H,ae,te]}function Se(ne,J,B){var H=ne*L(B)-J*M(B),ae=ne*M(B)+J*L(B);return{x:H,y:ae}}function Ae(ne,J,B,H,ae,te,ce,ue,fe,ye){var j=I*120/180,Y=I/180*(+ae||0),O=[],F;if(ye)et=ye[0],Qe=ye[1],tt=ye[2],Xe=ye[3];else{F=Se(ne,J,-Y),ne=F.x,J=F.y,F=Se(ue,fe,-Y),ue=F.x,fe=F.y;var U=(ne-ue)/2,Q=(J-fe)/2,ve=U*U/(B*B)+Q*Q/(H*H);ve>1&&(ve=z(ve),B=ve*B,H=ve*H);var ge=B*B,Me=H*H,De=(te==ce?-1:1)*z(ie((ge*Me-ge*Q*Q-Me*U*U)/(ge*Q*Q+Me*U*U))),tt=De*B*Q/H+(ne+ue)/2,Xe=De*-H*U/B+(J+fe)/2,et=V(((J-Xe)/H).toFixed(9)),Qe=V(((fe-Xe)/H).toFixed(9));et=ne<tt?I-et:et,Qe=ue<tt?I-Qe:Qe,et<0&&(et=I*2+et),Qe<0&&(Qe=I*2+Qe),ce&&et>Qe&&(et=et-I*2),!ce&&Qe>et&&(Qe=Qe-I*2)}var pt=Qe-et;if(ie(pt)>j){var Ft=Qe,Kt=ue,wt=fe;Qe=et+j*(ce&&Qe>et?1:-1),ue=tt+B*L(Qe),fe=Xe+H*M(Qe),O=Ae(ue,fe,B,H,ae,0,ce,Kt,wt,[Qe,Ft,tt,Xe])}pt=Qe-et;var sn=L(et),gr=M(et),gi=L(Qe),Dr=M(Qe),fo=R(pt/4),Tr=4/3*(B*fo),Bn=4/3*(H*fo),zn=[ne,J],Oa=[ne+Tr*gr,J-Bn*sn],Mf=[ue+Tr*Dr,fe-Bn*gi],Ac=[ue,fe];if(Oa[0]=2*zn[0]-Oa[0],Oa[1]=2*zn[1]-Oa[1],ye)return[Oa,Mf,Ac].concat(O);O=[Oa,Mf,Ac].concat(O).join().split(",");for(var Tu=[],bs=O.length,Wi=0;Wi<bs;Wi++)Tu[Wi]=Wi%2?Se(O[Wi-1],O[Wi],Y).y:Se(O[Wi],O[Wi+1],Y).x;return Tu}function Ee(ne){if(!ne)return null;var J={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},B=[];return String(ne).replace(m,function(H,ae,te){var ce=[],ue=ae.toLowerCase();for(te.replace(T,function(fe,ye){ye&&ce.push(+ye)}),ue==="m"&&ce.length>2&&(B.push([ae].concat(ce.splice(0,2))),ue="l",ae=ae==="m"?"l":"L");ce.length>=J[ue]&&(B.push([ae].concat(ce.splice(0,J[ue]))),!!J[ue]););}),B}function _e(ne){if((!Array.isArray(ne)||!Array.isArray(ne&&ne[0]))&&(ne=Ee(ne)),!ne||!ne.length)return[["M",0,0]];for(var J=[],B=0,H=0,ae=0,te=0,ce=0,ue,fe=ne.length,ye=ce;ye<fe;ye++){var j=[];J.push(j);var Y=ne[ye];if(ue=Y[0],ue!=ue.toUpperCase()){j[0]=ue.toUpperCase();var O,F;switch(j[0]){case"A":j[1]=Y[1],j[2]=Y[2],j[3]=Y[3],j[4]=Y[4],j[5]=Y[5],j[6]=+Y[6]+B,j[7]=+Y[7]+H;break;case"V":j[1]=+Y[1]+H;break;case"H":j[1]=+Y[1]+B;break;case"M":for(ae=+Y[1]+B,te=+Y[2]+H,O=Y.length,F=1;F<O;F++)j[F]=+Y[F]+(F%2?B:H);break;default:for(O=Y.length,F=1;F<O;F++)j[F]=+Y[F]+(F%2?B:H);break}}else for(var U=Y.length,Q=0;Q<U;Q++)j[Q]=Y[Q];switch(j[0]){case"Z":B=+ae,H=+te;break;case"H":B=j[1];break;case"V":H=j[1];break;case"M":ae=j[j.length-2],te=j[j.length-1],B=j[j.length-2],H=j[j.length-1];break;default:B=j[j.length-2],H=j[j.length-1];break}}return J}function se(ne){var J=_e(ne),B={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function H(O,F,U){var Q,ve;if(!O)return["C",F.x,F.y,F.x,F.y,F.x,F.y];switch(O[0]in{T:1,Q:1}||(F.qx=null,F.qy=null),O[0]){case"M":F.X=O[1],F.Y=O[2];break;case"A":parseFloat(O[1])===0||parseFloat(O[2])===0?O=["L",O[6],O[7]]:O=["C"].concat(Ae.apply(0,[F.x,F.y].concat(O.slice(1))));break;case"S":U==="C"||U==="S"?(Q=F.x*2-F.bx,ve=F.y*2-F.by):(Q=F.x,ve=F.y),O=["C",Q,ve].concat(O.slice(1));break;case"T":U==="Q"||U==="T"?(F.qx=F.x*2-F.qx,F.qy=F.y*2-F.qy):(F.qx=F.x,F.qy=F.y),O=["C"].concat(oe(F.x,F.y,F.qx,F.qy,O[1],O[2]));break;case"Q":F.qx=O[1],F.qy=O[2],O=["C"].concat(oe(F.x,F.y,O[1],O[2],O[3],O[4]));break;case"H":O=["L"].concat(O[1],F.y);break;case"V":O=["L"].concat(F.x,O[1]);break}return O}function ae(O,F){if(O[F].length>7){O[F].shift();for(var U=O[F];U.length;)te[F]="A",O.splice(F++,0,["C"].concat(U.splice(0,6)));O.splice(F,1),fe=J.length}}for(var te=[],ce="",ue="",fe=J.length,ye=0;ye<fe;ye++){J[ye]&&(ce=J[ye][0]),ce!=="C"&&(te[ye]=ce,ye>0&&(ue=te[ye-1])),J[ye]=H(J[ye],B,ue),te[ye]!=="A"&&ce==="C"&&(te[ye]="C"),ae(J,ye);var j=J[ye],Y=j.length;B.x=j[Y-2],B.y=j[Y-1],B.bx=parseFloat(j[Y-4])||B.x,B.by=parseFloat(j[Y-3])||B.y}return(!J[0][0]||J[0][0]!=="M")&&J.unshift(["M",0,0]),J}return function(ne){return se(ne).join(",").split(",").join(" ")}}(),f.namespace=e,f.g=z8e,f}(),Ue=m6e,dc={useCSSSelectors:!0,classNamePrefix:"joint-",defaultTheme:"default",doubleTapInterval:300},__="[object Arguments]",lD="[object Array]",_E="[object Boolean]",x5="[object Date]",$ae="[object Error]",v6e="[object Function]",CS="[object Map]",SE="[object Number]",y6e="[object Null]",gv="[object Object]",C5="[object RegExp]",kS="[object Set]",wE="[object String]",xE="[object Symbol]",b6e="[object Undefined]",_6e="[object WeakMap]",k5="[object ArrayBuffer]",T5="[object DataView]",Lae="[object Float32Array]",Dae="[object Float64Array]",Mae="[object Int8Array]",Nae="[object Int16Array]",Fae="[object Int32Array]",Rae="[object Uint8Array]",Vae="[object Uint8ClampedArray]",Bae="[object Uint16Array]",zae="[object Uint32Array]",S6e={[__]:!0,[lD]:!0,[k5]:!0,[T5]:!0,[_E]:!0,[x5]:!0,[Lae]:!0,[Dae]:!0,[Mae]:!0,[Nae]:!0,[Fae]:!0,[CS]:!0,[SE]:!0,[gv]:!0,[C5]:!0,[kS]:!0,[wE]:!0,[xE]:!0,[Rae]:!0,[Vae]:!0,[Bae]:!0,[zae]:!0,[$ae]:!1,[v6e]:!1,[_6e]:!1},A5="\\ud800-\\udfff",w6e="\\u0300-\\u036f",x6e="\\ufe20-\\ufe2f",C6e="\\u20d0-\\u20ff",k6e="\\u1ab0-\\u1aff",T6e="\\u1dc0-\\u1dff",A6e=w6e+x6e+C6e+k6e+T6e,jae="\\u2700-\\u27bf",Uae="a-z\\xdf-\\xf6\\xf8-\\xff",E6e="\\xac\\xb1\\xd7\\xf7",P6e="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",O6e="\\u2000-\\u206f",I6e=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Wae="A-Z\\xc0-\\xd6\\xd8-\\xde",$6e="\\ufe0e\\ufe0f",Hae=E6e+P6e+O6e+I6e,Gae="['’]",_W=`[${Hae}]`,E5=`[${A6e}]`,qae="\\d",L6e=`[${jae}]`,Yae=`[${Uae}]`,Kae=`[^${A5}${Hae+qae+jae+Uae+Wae}]`,uD="\\ud83c[\\udffb-\\udfff]",D6e=`(?:${E5}|${uD})`,Xae=`[^${A5}]`,P5="(?:\\ud83c[\\udde6-\\uddff]){2}",O5="[\\ud800-\\udbff][\\udc00-\\udfff]",Zm=`[${Wae}]`,M6e="\\u200d",SW=`(?:${Yae}|${Kae})`,N6e=`(?:${Zm}|${Kae})`,wW=`(?:${Gae}(?:d|ll|m|re|s|t|ve))?`,xW=`(?:${Gae}(?:D|LL|M|RE|S|T|VE))?`,Jae=`${D6e}?`,Zae=`[${$6e}]?`,F6e=`(?:${M6e}(?:${[Xae,P5,O5].join("|")})${Zae+Jae})*`,R6e="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",V6e="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Qae=Zae+Jae+F6e,B6e=`(?:${[L6e,P5,O5].join("|")})${Qae}`,z6e=RegExp([`${Zm}?${Yae}+${wW}(?=${[_W,Zm,"$"].join("|")})`,`${N6e}+${xW}(?=${[_W,Zm+SW,"$"].join("|")})`,`${Zm}?${SW}+${wW}`,`${Zm}+${xW}`,V6e,R6e,`${qae}+`,B6e].join("|"),"g"),I5=200,cD="__hash_undefined__",j6e=/^\[object (?:Float(?:32|64)|(?:Int|Uint)(?:8|16|32)|Uint8Clamped)Array\]$/,U6e=`[${A5}]`,W6e=`${Xae}${E5}?`,H6e=`(?:${[W6e,E5,P5,O5,U6e].join("|")})`,ese=RegExp(`${uD}(?=${uD})|${H6e+Qae}`,"g"),G6e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,q6e=/^\w*$/,Y6e=".".charCodeAt(0),K6e=/\\(\\)?/g,X6e=RegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g"),J6e=/^(?:0|[1-9]\d*)$/,Z6e=RegExp.prototype.test.bind(/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/),Q6e=4294967295-1,e9e=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,tse=t=>ese.test(t),t9e=t=>t.match(ese)||[],n9e=t=>t.split(""),nse=t=>tse(t)?t9e(t):n9e(t),r9e=t=>t==null?[]:TS(t).map(e=>t[e]),TS=t=>Fl(t)?rse(t):Object.keys(Object(t)),i9e=t=>{if(!CE(t))return Object.keys(t);var e=[];for(var n in Object(t))hasOwnProperty.call(t,n)&&n!="constructor"&&e.push(n);return e},rse=(t,e)=>{const n=Array.isArray(t),r=!n&&mu(t)&&Il(t)===__,i=!n&&!r&&ES(t),o=n||r||i,a=t.length,s=new Array(o?a:0);let l=o?-1:a;for(;++l<a;)s[l]=`${l}`;for(const u in t)(e||hasOwnProperty.call(t,u))&&!(o&&(u==="length"||N5(u,a)))&&s.push(u);return s},SC=(t,e)=>{let{length:n}=t;for(;n--;)if(j0(t[n][0],e))return n;return-1},j0=(t,e)=>t===e||t!==t&&e!==e,mu=t=>t!=null&&typeof t=="object",bT=(t,e,n)=>{if(!Jn(n))return!1;const r=typeof e;return(r=="number"?Fl(n)&&e>-1&&e<n.length:r=="string"&&e in n)?j0(n[e],t):!1},o9e=t=>mu(t)&&Il(t)==kS,a9e=t=>mu(t)&&Il(t)==CS,CE=t=>{const e=t&&t.constructor,n=typeof e=="function"&&e.prototype||Object.prototype;return t===n},U0=(t,e,n)=>{const r=t[e];(!(hasOwnProperty.call(t,e)&&j0(r,n))||n===void 0&&!(e in t))&&(t[e]=n)},AS=(t,e,n)=>{let r=-1;const i=e.length;for(;++r<i;){const o=e[r];U0(n,o,t[o])}return n},Fl=t=>t!=null&&typeof t!="function"&&typeof t.length=="number"&&t.length>-1&&t.length%1===0,m0=t=>typeof t=="symbol"||mu(t)&&Il(t)===xE,s9e=t=>{const e=t.length;let n=new t.constructor(e);return e&&typeof t[0]=="string"&&hasOwnProperty.call(t,"index")&&(n.index=t.index,n.input=t.input),n},$5=(t,e)=>{let n=-1;const r=t.length;for(e||(e=new Array(r));++n<r;)e[n]=t[n];return e},Il=t=>t==null?t===void 0?b6e:y6e:Object.prototype.toString.call(t),L5=t=>{const e=new t.constructor(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e},ise=(t,e)=>{const n=e?L5(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)},l9e=t=>{const e=new t.constructor(t.source,/\w*$/.exec(t));return e.lastIndex=t.lastIndex,e},ose=t=>typeof t.constructor=="function"&&!CE(t)?Object.create(Object.getPrototypeOf(t)):{},D5=t=>t==null?[]:(t=Object(t),Object.getOwnPropertySymbols(t).filter(n=>propertyIsEnumerable.call(t,n))),u9e=(t,e)=>AS(t,D5(t),e);function c9e(t,e){const n=e?L5(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}const f9e=(t,e,n)=>{const r=t.constructor;switch(e){case k5:return L5(t);case _E:case x5:return new r(+t);case T5:return c9e(t,n);case Lae:case Dae:case Mae:case Nae:case Fae:case Rae:case Vae:case Bae:case zae:return ise(t,n);case CS:return new r(t);case SE:case wE:return new r(t);case C5:return l9e(t);case kS:return new r;case xE:return Symbol.prototype.valueOf?Object(Symbol.prototype.valueOf.call(t)):{}}},ES=t=>mu(t)&&j6e.test(Il(t)),fD=t=>{const e=Object.keys(t);return!Array.isArray(t)&&t!=null&&e.push(...D5(Object(t))),e},ase=t=>{const e=[];for(;t;)e.push(...D5(t)),t=Object.getPrototypeOf(Object(t));return e},sse=t=>{const e=[];for(const n in t)e.push(n);return Array.isArray(t)||e.push(...ase(t)),e},wC=({__data__:t},e)=>{const n=t;return x9e(e)?n[typeof e=="string"?"string":"hash"]:n.map},h9e=(t,e,n,r)=>{const i=fD(t),o=i.length,s=fD(e).length;if(o!=s)return!1;let l,u=o;for(;u--;)if(l=i[u],!hasOwnProperty.call(e,l))return!1;const c=r.get(t),f=r.get(e);if(c&&f)return c==e&&f==t;let h=!0;r.set(t,e),r.set(e,t);let d;for(;++u<o;){l=i[u];const g=t[l],y=e[l];if(!(g===y||n(g,y,r))){h=!1;break}d||(d=l=="constructor")}if(h&&!d){const g=t.constructor,y=e.constructor;g!=y&&"constructor"in t&&"constructor"in e&&!(typeof g=="function"&&g instanceof g&&typeof y=="function"&&y instanceof y)&&(h=!1)}return r.delete(t),r.delete(e),h},kE=(t,e,n)=>t===e?!0:t==null||e==null||!mu(t)&&!mu(e)?t!==t&&e!==e:d9e(t,e,kE,n),d9e=(t,e,n,r)=>{let i=Array.isArray(t);const o=Array.isArray(e);let a=i?lD:Il(t),s=o?lD:Il(e);a=a==__?gv:a,s=s==__?gv:s;let l=a==gv;const u=s==gv,c=a==s;if(c&&!l)return r||(r=new jv),i||ES(t)?lse(t,e,!1,n,r):m9e(t,e,a,n,r);const f=l&&hasOwnProperty.call(t,"__wrapped__"),h=u&&hasOwnProperty.call(e,"__wrapped__");if(f||h){const d=f?t.value():t,g=h?e.value():e;return r||(r=new jv),n(d,g,r)}return c?(r||(r=new jv),h9e(t,e,n,r)):!1},lse=(t,e,n,r,i)=>{const a=t.length,s=e.length;if(a!=s)return!1;const l=i.get(t),u=i.get(e);if(l&&u)return l==e&&u==t;let c=-1,f=!0;const h=n?new w_:void 0;for(i.set(t,e),i.set(e,t);++c<a;){const d=t[c],g=e[c];if(h){if(!p9e(e,(y,_)=>{if(!g9e(h,_)&&(d===y||r(d,y,i)))return h.push(_)})){f=!1;break}}else if(!(d===g||r(d,g,i))){f=!1;break}}return i.delete(t),i.delete(e),f},p9e=(t,e)=>{let n=-1;const r=t==null?0:t.length;for(;++n<r;)if(e(t[n],n,t))return!0;return!1},g9e=(t,e)=>t.has(e),CW=(t,e,n,r)=>!(t.byteLength!=e.byteLength||!n(new Uint8Array(t),new Uint8Array(e),r)),m9e=(t,e,n,r,i)=>{switch(n){case T5:return t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset?!1:(t=t.buffer,e=e.buffer,CW(t,e,r,i));case k5:return CW(t,e,r,i);case _E:case x5:case SE:return j0(+t,+e);case $ae:return t.name==e.name&&t.message==e.message;case C5:case wE:return t==`${e}`;case CS:let o=use;case kS:if(o||(o=TE),t.size!=e.size)return!1;const a=i.get(t);if(a)return a==e;i.set(t,e);const s=lse(o(t),o(e),!0,r,i);return i.delete(t),s;case xE:return Symbol.prototype.valueOf.call(t)==Symbol.prototype.valueOf.call(e)}return!1},use=t=>{let e=-1,n=Array(t.size);return t.forEach((r,i)=>{n[++e]=[i,r]}),n},TE=t=>{let e=-1;const n=new Array(t.size);return t.forEach(r=>{n[++e]=r}),n},M5=(t,e)=>{if(Array.isArray(t))return!1;const n=typeof t;return n==="number"||n==="boolean"||t==null||m0(t)?!0:q6e.test(t)||!G6e.test(t)||e!=null&&t in Object(e)},v9e=t=>{const e=[];return t.charCodeAt(0)===Y6e&&e.push(""),t.replace(X6e,(n,r,i,o)=>{let a=n;i?a=o.replace(K6e,"$1"):r&&(a=r.trim()),e.push(a)}),e},bd=(t,e)=>Array.isArray(t)?t:M5(t,e)?[t]:v9e(`${t}`),PS=(t,e)=>{e=bd(e,t);let n=0;const r=e.length;for(;t!=null&&n<r;)t=t[_d(e[n])],n++;return n&&n==r?t:void 0};function y9e(t,e){if(t!==e){const n=t!==void 0,r=t===null,i=t===t,o=m0(t),a=e!==void 0,s=e===null,l=e===e,u=m0(e);if(!s&&!u&&!o&&t>e||o&&a&&l&&!s&&!u||r&&a&&l||!n&&l||!i)return 1;if(!r&&!o&&!u&&t<e||u&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!l)return-1}return 0}function b9e(t,e,n){let r=-1;const i=t.criteria,o=e.criteria,a=i.length,s=n.length;for(;++r<a;){const l=r<s?n[r]:null,c=(l&&typeof l=="function"?l:y9e)(i[r],o[r]);if(c)return l&&typeof l!="function"?c*(l=="desc"?-1:1):c}return t.index-e.index}const cse=(t,e)=>{let n=(a,s)=>!!(a==null?0:a.length)&&a.indexOf(s)>-1,r=!0;const i=[],o=e.length;if(!t.length)return i;e.length>=I5&&(n=(a,s)=>a.has(s),r=!1,e=new w_(e));e:for(let a in t){let s=t[a];const l=s;if(s=s!==0?s:0,r&&l===l){let u=o;for(;u--;)if(e[u]===l)continue e;i.push(s)}else n(e,l)||i.push(s)}return i},_d=t=>{if(typeof t=="string"||m0(t))return t;const e=`${t}`;return e=="0"&&1/t==-1/0?"-0":e},zv=(t,e=!1,n=!1,r=!0,i,o,a,s)=>{let l;if(i&&(l=a?i(t,o,a,s):i(t)),l!==void 0)return l;if(!Jn(t))return t;const u=Array.isArray(t),c=Il(t);if(u){if(l=s9e(t),!e)return $5(t,l)}else{const g=typeof t=="function";if(c===gv||c===__||g&&!a){if(l=n||g?{}:ose(t),!e)return n?_9e(t,AS(t,Object.keys(t),l)):u9e(t,Object.assign(l,t))}else{if(g||!S6e[c])return a?t:{};l=f9e(t,c,e)}}s||(s=new jv);const f=s.get(t);if(f)return f;if(s.set(t,l),a9e(t))return t.forEach((g,y)=>{l.set(y,zv(g,e,n,r,i,y,t,s))}),l;if(o9e(t))return t.forEach(g=>{l.add(zv(g,e,n,r,i,g,t,s))}),l;if(ES(t))return l;const d=u?void 0:(r?n?sse:fD:n?hse:TS)(t);return(d||t).forEach((g,y)=>{d&&(y=g,g=t[y]),U0(l,y,zv(g,e,n,r,i,y,t,s))}),l},_9e=(t,e)=>AS(t,ase(t),e),fse=(t,e)=>e.length<2?t:PS(t,e.slice(0,-1)),S9e=(t,e,n)=>{if(!Jn(t))return t;e=bd(e,t);const r=e.length,i=r-1;let o=-1,a=t;for(;a!=null&&++o<r;){const s=_d(e[o]);let l=n;if(o!=i){const u=a[s];l=void 0,l===void 0&&(l=Jn(u)?u:N5(e[o+1])?[]:{})}U0(a,s,l),a=a[s]}return t},N5=(t,e)=>{const n=typeof t;return e=e??Number.MAX_SAFE_INTEGER,!!e&&(n==="number"||n!=="symbol"&&J6e.test(t))&&t>-1&&t%1==0&&t<e},w9e=(t,e)=>{e=bd(e,t),t=fse(t,e);const n=e[e.length-1];return t==null||delete t[_d(n)]},x9e=t=>{const e=typeof t;return e==="string"||e==="number"||e==="symbol"||e==="boolean"?t!=="__proto__":t===null},hse=t=>{const e=[];for(const n in t)e.push(n);return e},C9e=t=>{t=Object(t);const e={};for(const n in t)e[n]=t[n];return e},kW=(t,e)=>{if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]};function dse(t,e=!1){return(n,...r)=>{let i=-1,o=r.length,a=o>1?r[o-1]:void 0;const s=o>2?r[2]:void 0;for(a=t.length>3&&typeof a=="function"?(o--,a):e?(l,u)=>{if(Array.isArray(l)&&!Array.isArray(u))return u}:void 0,s&&bT(r[0],r[1],s)&&(a=o<3?void 0:a,o=1),n=Object(n);++i<o;){const l=r[i];l&&t(n,l,i,a)}return n}}const F5=(t,e,n,r,i)=>{t!==e&&yl(e,(o,a)=>{if(Jn(o))i||(i=new jv),k9e(t,e,a,n,F5,r,i);else{let s=r?r(t[a],o,`${a}`,t,e,i):void 0;s===void 0&&(s=o),hD(t,a,s)}})},k9e=(t,e,n,r,i,o,a)=>{const s=kW(t,n),l=kW(e,n),u=a.get(l);if(u){hD(t,n,u);return}let c=o?o(s,l,`${n}`,t,e,a):void 0,f=c===void 0;if(f){const h=Array.isArray(l),d=!h&&ES(l);c=l,h||d?Array.isArray(s)?c=s:mu(s)&&Fl(s)?c=$5(s):d?(f=!1,c=ise(l,!0)):c=[]:Di(l)||S_(l)?(c=s,S_(s)?c=C9e(s):(typeof s=="function"||!Jn(s))&&(c=ose(l))):f=!1}f&&(a.set(l,c),i(c,l,r,o,a),a.delete(l)),hD(t,n,c)},hD=(t,e,n)=>{(n!==void 0&&!j0(t[e],n)||n===void 0&&!(e in t))&&U0(t,e,n)};function T9e(t,e,n){const r=Object(t),i=n(t);let{length:o}=i,a=-1;for(;o--;){const s=i[++a];if(e(r[s],s,r)===!1)break}return t}const A9e=(t,e)=>t&&T9e(t,e,TS),R5=(t,e)=>{if(t==null)return t;if(!Fl(t))return A9e(t,e);const n=t.length,r=Object(t);let i=-1;for(;++i<n&&e(r[i],i,r)!==!1;);return t};function E9e(t){const e=t==null?0:t.length;return e?t[e-1]:void 0}const P9e=Set&&1/TE(new Set([void 0,-0]))[1]==1/0?t=>new Set(t):()=>{};function pse(t,e,n,r,i,o){return Jn(t)&&Jn(e)&&(o.set(e,t),F5(t,e,void 0,pse,o),o.delete(e)),t}function O9e(t,e,n){e.length?e=e.map(a=>Array.isArray(a)?s=>PS(s,a.length===1?a[0]:a):a):e=[a=>a];let r=-1,i=-1;const o=Fl(t)?new Array(t.length):[];return R5(t,a=>{const s=e.map(l=>l(a));o[++i]={criteria:s,index:++r,value:a}}),I9e(o,(a,s)=>b9e(a,s,n))}function I9e(t,e){let{length:n}=t;for(t.sort(e);n--;)t[n]=t[n].value;return t}function gse(t){return t===t&&!Jn(t)}function mse(t,e){return n=>n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}function vse(t,e){return t!=null&&Y9e(t,e,q9e)}function $9e(t,e){return M5(t)&&gse(e)?mse(_d(t),e):n=>{const r=PS(n,t);return r===void 0&&r===e?vse(n,t):kE(e,r)}}function L9e(t){const e=D9e(t);return e.length===1&&e[0][2]?mse(e[0][0],e[0][1]):n=>n===t||M9e(n,t,e)}function D9e(t){const e=TS(t);let n=e.length;for(;n--;){const r=e[n],i=t[r];e[n]=[r,i,gse(i)]}return e}function M9e(t,e,n,r){let i=n.length;const o=i,a=!r;if(t==null)return!o;let s,l;for(t=Object(t);i--;)if(s=n[i],a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1;for(;++i<o;){s=n[i];const u=s[0],c=t[u],f=s[1];if(a&&s[2]){if(c===void 0&&!(u in t))return!1}else{const h=new jv;if(r&&(l=r(c,f,u,t,e,h)),!(l===void 0?kE(f,c,h):l))return!1}}return!0}function N9e(t){return M5(t)?F9e(_d(t)):R9e(t)}function F9e(t){return e=>e==null?void 0:e[t]}function R9e(t){return e=>PS(e,t)}function V9e(t){return typeof t=="function"?t:t==null?e=>e:typeof t=="object"?Array.isArray(t)?$9e(t[0],t[1]):L9e(t):N9e(t)}function AE(){const t=V9e;return arguments.length?t(arguments[0]):t}const B9e=(t,e,n,r)=>{let i=-1;const o=t==null?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n},z9e=(t,e,n,r,i)=>(i(t,(o,a,s)=>{n=r?(r=!1,o):e(n,o,a,s)}),n);function j9e(t,e,n){const r=Array.isArray(t)?B9e:z9e,i=arguments.length<3;return r(t,e,n,i,R5)}const U9e=t=>Array.isArray(t)||S_(t)||!!(t&&t[Symbol.isConcatSpreadable]);function yse(t,e,n,r,i){let o=-1;const a=t.length;for(n||(n=U9e),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?yse(s,e-1,n,r,i):i.push(...s):r||(i[i.length]=s)}return i}const S_=t=>mu(t)&&Il(t)=="[object Arguments]",W9e=(t,e)=>H9e(t,e,(n,r)=>vse(t,r)),H9e=(t,e,n)=>{let r=-1;const i=e.length,o={};for(;++r<i;){const a=e[r],s=PS(t,a);n(s,a)&&S9e(o,bd(a,t),s)}return o},G9e=t=>typeof t=="number"&&t>-1&&t%1==0&&t<=Number.MAX_SAFE_INTEGER,q9e=(t,e)=>t!=null&&e in Object(t),Y9e=(t,e,n)=>{e=bd(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var a=_d(e[r]);if(!(o=t!=null&&n(t,a)))break;t=t[a]}return o||++r!=i?o:(i=t==null?0:t.length,!!i&&G9e(i)&&N5(a,i)&&(Array.isArray(t)||S_(t)))},K9e=t=>t.match(e9e),X9e=t=>t.match(z6e),J9e=(t,e)=>e===void 0?(Z6e(t)?X9e(t):K9e(t))||[]:t.match(e)||[],Z9e=(t,e,n)=>{const{length:r}=t;return n=n===void 0?r:n,!e&&n>=r?t:t.slice(e,n)},Q9e=e7e("toUpperCase");function e7e(t){return e=>{if(!e)return"";const n=tse(e)?nse(e):void 0,r=n?n[0]:e[0],i=n?Z9e(n,1).join(""):e.slice(1);return r[t]()+i}}let jv=class{constructor(e){const n=this.__data__=new wI(e);this.size=n.size}clear(){this.__data__=new wI,this.size=0}delete(e){const n=this.__data__,r=n.delete(e);return this.size=n.size,r}get(e){return this.__data__.get(e)}has(e){return this.__data__.has(e)}set(e,n){let r=this.__data__;if(r instanceof wI){const i=r.__data__;if(i.length<I5-1)return i.push([e,n]),this.size=++r.size,this;r=this.__data__=new bse(i)}return r.set(e,n),this.size=r.size,this}},wI=class{constructor(e){let n=-1;const r=e==null?0:e.length;for(this.clear();++n<r;){const i=e[n];this.set(i[0],i[1])}}clear(){this.__data__=[],this.size=0}delete(e){const n=this.__data__,r=SC(n,e);if(r<0)return!1;const i=n.length-1;return r==i?n.pop():n.splice(r,1),--this.size,!0}get(e){const n=this.__data__,r=SC(n,e);return r<0?void 0:n[r][1]}has(e){return SC(this.__data__,e)>-1}set(e,n){const r=this.__data__,i=SC(r,e);return i<0?(++this.size,r.push([e,n])):r[i][1]=n,this}},bse=class{constructor(e){let n=-1;const r=e==null?0:e.length;for(this.clear();++n<r;){const i=e[n];this.set(i[0],i[1])}}clear(){this.size=0,this.__data__={hash:new TW,map:new Map,string:new TW}}delete(e){const n=wC(this,e).delete(e);return this.size-=n?1:0,n}get(e){return wC(this,e).get(e)}has(e){return wC(this,e).has(e)}set(e,n){const r=wC(this,e),i=r.size;return r.set(e,n),this.size+=r.size==i?0:1,this}},TW=class{constructor(e){let n=-1;const r=e==null?0:e.length;for(this.clear();++n<r;){const i=e[n];this.set(i[0],i[1])}}clear(){this.__data__=Object.create(null),this.size=0}delete(e){const n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}get(e){const r=this.__data__[e];return r===cD?void 0:r}has(e){return this.__data__[e]!==void 0}set(e,n){const r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n===void 0?cD:n,this}},w_=class{constructor(e){let n=-1;const r=e==null?0:e.length;for(this.__data__=new bse;++n<r;)this.add(e[n])}add(e){return this.__data__.set(e,cD),this}has(e){return this.__data__.has(e)}};w_.prototype.push=w_.prototype.add;const t7e=function(t){var e=Object.prototype.toString;return t===!0||t===!1||!!t&&typeof t=="object"&&e.call(t)===_E},Jn=function(t){return!!t&&(typeof t=="object"||typeof t=="function")},Ka=function(t){var e=Object.prototype.toString;return typeof t=="number"||!!t&&typeof t=="object"&&e.call(t)===SE},Ko=function(t){var e=Object.prototype.toString;return typeof t=="string"||!!t&&typeof t=="object"&&e.call(t)===wE},Nt=dse((t,e)=>{if(CE(e)||Fl(e)){AS(e,TS(e),t);return}for(var n in e)hasOwnProperty.call(e,n)&&U0(t,n,e[n])}),n7e=(t,...e)=>{let n=-1,r=e.length;const i=r>2?e[2]:void 0;for(i&&bT(e[0],e[1],i)&&(r=1);++n<r;){const o=e[n];if(o==null)continue;const a=Object.keys(o),s=a.length;let l=-1;for(;++l<s;){const u=a[l],c=t[u];(c===void 0||j0(c,Object.prototype[u])&&!hasOwnProperty.call(t,u))&&(t[u]=o[u])}}return t},nu=n7e,r7e=function(...e){return e.push(void 0,pse),Ri.apply(void 0,e)},V5=r7e,cu=(t,e,...n)=>{let r=-1;const i=typeof e=="function",o=Fl(t)?new Array(t.length):[];return R5(t,a=>{o[++r]=i?e.apply(a,n):i7e(a,e,...n)}),o},i7e=(t,e,...n)=>{e=bd(e,t),t=fse(t,e);const r=t==null?t:t[_d(E9e(e))];return r==null?void 0:r.apply(t,n)},_se=(t,e,n)=>{let r=0,i=t==null?0:t.length;if(i==0)return 0;n=AE(n,2),e=n(e);const o=e!==e,a=e===null,s=m0(e),l=e===void 0;for(;r<i;){let u;const c=Math.floor((r+i)/2),f=n(t[c]),h=f!==void 0,d=f===null,g=f===f,y=m0(f);o?u=g:l?u=g&&h:a?u=g&&h&&!d:s?u=g&&h&&!d&&!y:d||y?u=!1:u=f<e,u?r=c+1:i=c}return Math.min(i,Q6e)},OS=(t,e)=>{let n=-1,r=(l,u)=>!!(l==null?0:l.length)&&l.indexOf(u)>-1;e=AE(e,2);let i=!0;const{length:o}=t,a=[];let s=a;if(o>=I5){const l=e?null:P9e(t);if(l)return TE(l);i=!1,r=(u,c)=>u.has(c),s=new w_}else s=e?[]:a;e:for(;++n<o;){let l=t[n];const u=e?e(l):l;if(l=l!==0?l:0,i&&u===u){let c=s.length;for(;c--;)if(s[c]===u)continue e;e&&s.push(u),a.push(l)}else r(s,u)||(s!==a&&s.push(u),a.push(l))}return a},Wu=t=>zv(t),vl=t=>zv(t,!0),Eh=t=>{if(t==null)return!0;if(Fl(t)&&(Array.isArray(t)||typeof t=="string"||typeof t.splice=="function"||ES(t)||S_(t)))return!t.length;const e=Il(t);if(e=="[object Map]"||e=="[object Set]")return!t.size;if(CE(t))return!i9e(t).length;for(const n in t)if(hasOwnProperty.call(t,n))return!1;return!0},mv=(t,e)=>kE(t,e),br=t=>typeof t=="function",Di=t=>{if(!mu(t)||Il(t)!="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},Dn=t=>{if(!t)return[];if(Fl(t))return Ko(t)?nse(t):$5(t);if(Symbol.iterator&&Symbol.iterator in Object(t)){const r=t[Symbol.iterator]();let i;const o=[];for(;!(i=r.next()).done;)o.push(i.value);return o}const e=Il(t);return(e==CS?use:e==kS?TE:r9e)(t)};function o7e(t,e,n){if(typeof t!="function")throw new TypeError("Expected a function");let r,i,o,a,s,l,u=0,c=!1,f=!1,h=!0;const d=!e&&e!==0&&window&&typeof window.requestAnimationFrame=="function";e=+e||0,Jn(n)&&(c=!!n.leading,f="maxWait"in n,o=f?Math.max(+n.maxWait||0,e):o,h="trailing"in n?!!n.trailing:h);function g(T){const P=r,I=i;return r=i=void 0,u=T,a=t.apply(I,P),a}function y(T,P){return d?(window.cancelAnimationFrame(s),window.requestAnimationFrame(T)):setTimeout(T,P)}function _(T){if(d)return window.cancelAnimationFrame(T);clearTimeout(T)}function v(T){return u=T,s=y(k,e),c?g(T):a}function S(T){const P=T-l,I=T-u,M=e-P;return f?Math.min(M,o-I):M}function C(T){const P=T-l,I=T-u;return l===void 0||P>=e||P<0||f&&I>=o}function k(){const T=Date.now();if(C(T))return x(T);s=y(k,S(T))}function x(T){return s=void 0,h&&r?g(T):(r=i=void 0,a)}function m(...T){const P=Date.now(),I=C(P);if(r=T,i=this,l=P,I){if(s===void 0)return v(l);if(f)return s=y(k,e),g(l)}return s===void 0&&(s=y(k,e)),a}return m.cancel=()=>{s!==void 0&&_(s),u=0,r=l=i=s=void 0},m.flush=()=>s===void 0?a:x(Date.now()),m.pending=()=>s!==void 0,m}const a7e=(t,e)=>(e=AE(e,2),j9e(t,(n,r,i)=>(i=e(r),hasOwnProperty.call(n,i)?n[i].push(r):U0(n,i,[r]),n),{})),AW=(t,e=[])=>{if(t==null)return[];const n=e.length;return n>1&&bT(t,e[0],e[1])?e=[]:n>2&&bT(e[0],e[1],e[2])&&(e=[e[0]]),Array.isArray(e)||(e=[AE(e,2)]),O9e(t,e.flat(1),[])},s7e=t=>(t==null?0:t.length)?yse(t,1/0):[],EW=(t,...e)=>Fl(t)?cse(t,e):[],l7e=(t,...e)=>mu(t)&&Fl(t)?cse(t,e.flat(1)):[],dD=(...t)=>{const e=t.flat(1);return OS(e)},cf=(t,e)=>{if(t==null)return!1;typeof e=="string"&&(e=e.split("."));let n=-1,r=t;for(;++n<e.length;){if(!r||!hasOwnProperty.call(r,e[n]))return!1;r=r[e[n]]}return!0},Mi=(t,e,n)=>{e=bd(e,t);let r=-1,i=e.length;for(i||(i=1,t=void 0);++r<i;){let o=t==null?void 0:t[_d(e[r])];o===void 0&&(r=i,o=n),t=typeof o=="function"?o.call(t):o}return t},Ig=(t,...e)=>{let n={};if(t==null)return n;let r=!1;e=e.flat(1).map(o=>(o=bd(o,t),r||(r=o.length>1),o)),AS(t,sse(t),n),r&&(n=zv(n,!0,!0,!0,o=>Di(o)?void 0:o));let i=e.length;for(;i--;)w9e(n,e[i]);return n},Sse=(t,...e)=>t==null?{}:W9e(t,e.flat(1/0)),yl=(t,e=n=>n)=>{let n=-1;const r=Object(t),i=Fl(t)?rse(t,!0):hse(t);let o=i.length;for(;o--;){const a=i[++n];if(e(r[a],a,r)===!1)break}},u7e=(t="")=>J9e(`${t}`.replace(/['\u2019]/g,"")).reduce((e,n,r)=>(n=n.toLowerCase(),e+(r?Q9e(n):n)),"");let c7e=0;const f7e=(t="")=>{const e=++c7e;return`${t}`+e},Ri=dse((t,e,n,r)=>{F5(t,e,n,r)},!0),au=function(t){return t&&t.toString().split(" ").map(function(e){return e.substr(0,dc.classNamePrefix.length)!==dc.classNamePrefix&&(e=dc.classNamePrefix+e),e}).join(" ")},h7e=function(t){return t&&t.toString().split(" ").map(function(e){return e.substr(0,dc.classNamePrefix.length)===dc.classNamePrefix&&(e=e.substr(dc.classNamePrefix.length)),e}).join(" ")},_T=function(t,e){const n={},r={},i=Ue.namespace.svg,o=e||i,a=document.createDocumentFragment(),s=function(l,u,c){for(let f=0;f<l.length;f++){const h=l[f];if(typeof h=="string"){const k=document.createTextNode(h);u.appendChild(k);continue}if(!h.hasOwnProperty("tagName"))throw new Error("json-dom-parser: missing tagName");const d=h.tagName;let g;h.hasOwnProperty("namespaceURI")&&(c=h.namespaceURI),g=document.createElementNS(c,d);const y=c===i,_=y?Ue:Vn,v=h.attributes;v&&_(g).attr(v);const S=h.style;if(S&&Vn(g).css(S),h.hasOwnProperty("className")){const k=h.className;y?g.className.baseVal=k:g.className=k}if(h.hasOwnProperty("textContent")&&(g.textContent=h.textContent),h.hasOwnProperty("selector")){const k=h.selector;if(n[k])throw new Error("json-dom-parser: selector must be unique");n[k]=g,_(g).attr("joint-selector",k)}if(h.hasOwnProperty("groupSelector")){let k=h.groupSelector;Array.isArray(k)||(k=[k]);for(let x=0;x<k.length;x++){const m=k[x];let T=r[m];T||(T=r[m]=[]),T.push(g)}}u.appendChild(g);const C=h.children;Array.isArray(C)&&s(C,g,c)}};return s(t,a,o),{fragment:a,selectors:n,groupSelectors:r}},xC=function(t){let e=0;if(t.length===0)return e;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);e=(e<<5)-e+r,e=e&e}return e},x_=function(t,e,n){for(var r=Array.isArray(e)?e:e.split(n||"/"),i,o=0,a=r.length;o<a;)if(i=r[o++],Object(t)===t&&i in t)t=t[i];else return;return t},wse=function(t,e){return typeof e!="string"&&typeof e!="number"&&(e=String(e)),!(e==="constructor"&&typeof t[e]=="function"||e==="__proto__")},pD=function(t,e,n,r){const i=Array.isArray(e)?e:e.split(r||"/"),o=i.length-1;let a=t,s=0;for(;s<o;s++){const l=i[s];if(!wse(a,l))return t;a=a[l]||(a[l]={})}return a[i[o]]=n,t},PW=function(t,e,n){const r=Array.isArray(e)?e:e.split(n||"/"),i=r.length-1;let o=t,a=0;for(;a<i;a++){const s=r[a];if(!wse(o,s))return t;const l=o[s];if(!l)return t;o=l}return delete o[r[i]],t},d7e=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=Math.random()*16|0,n=t==="x"?e:e&3|8;return n.toString(16)})},vv=function(t){return vv.id=vv.id||1,t===void 0?"j_"+vv.id++:(t.id=t.id===void 0?"j_"+vv.id++:t.id,t.id)},p7e=function(t){return t.replace(/[A-Z]/g,"-$&").toLowerCase()},yi=function(t){if(t.normalized)return t;const{originalEvent:e,target:n}=t,r=e&&e.changedTouches&&e.changedTouches[0];if(r)for(let i in r)t[i]===void 0&&(t[i]=r[i]);if(n){const i=n.correspondingUseElement;i&&(t.target=i)}return t.normalized=!0,t},g7e=function(t){let i=0,o=0,a=0,s=0;return"detail"in t&&(o=t.detail),"wheelDelta"in t&&(o=-t.wheelDelta/120),"wheelDeltaY"in t&&(o=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(i=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(i=o,o=0),a="deltaX"in t?t.deltaX:i*10,s="deltaY"in t?t.deltaY:o*10,(a||s)&&t.deltaMode&&(t.deltaMode==1?(a*=40,s*=40):(a*=800,s*=800)),t.deltaX===0&&t.deltaY!==0&&t.shiftKey&&(a=s,s=0,i=o,o=0),a&&!i&&(i=a<1?-1:1),s&&!o&&(o=s<1?-1:1),{spinX:i,spinY:o,deltaX:a,deltaY:s}},m7e=function(t,e){return t>e?e:t<-e?-e:t},gD=function(){var t;if(typeof window<"u"&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),!t){var e=0;t=function(n){var r=new Date().getTime(),i=Math.max(0,16-(r-e)),o=setTimeout(function(){n(r+i)},i);return e=r+i,o}}return function(n,r,...i){return t(r!==void 0?n.bind(r,...i):n)}}(),mD=function(){var t,e=typeof window<"u";return e&&(t=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),t=t||clearTimeout,e?t.bind(window):t}(),Eo=function(t){return Ko(t)&&t.slice(-1)==="%"},v7e=function(t,e){function n(s){var l=new RegExp("(?:\\d+(?:\\.\\d+)*)("+s+")$").exec(t);return l?l[1]:null}var r=parseFloat(t);if(Number.isNaN(r))return null;var i={};i.value=r;var o;if(e==null)o="[A-Za-z]*";else if(Array.isArray(e)){if(e.length===0)return null;o=e.join("|")}else Ko(e)&&(o=e);var a=n(o);return a===null?null:(i.unit=a,i)},ST=0;function y7e(t,e){const n=t.split(e);let r=1;for(let i=0,o=n.length-1;i<o;i++){const a=[];(i>0||n[0]!=="")&&a.push(ST),a.push(e),(i<o-1||n[o]!=="")&&a.push(ST),n.splice(r,0,...a),r+=a.length+1}return n.filter(i=>i!=="")}function OW(t,e){if(t===null)return e.getBBox().height;switch(t.unit){case"em":return e.getBBox().height*t.value;case"px":case"":return t.value}}const xse=function(t,e,n={},r={}){var i=e.width,o=e.height,a=r.svgDocument||Ue("svg").node,s=Ue("tspan").node,l=Ue("text").attr(n).append(s).node,u=document.createTextNode("");l.style.opacity=0,l.style.display="block",s.style.display="block",s.appendChild(u),a.appendChild(l),r.svgDocument||document.body.appendChild(a);const c=r.preserveSpaces,f=" ";var h=r.separator||f,d=r.eol||`
`,g=r.hyphen?new RegExp(r.hyphen):/[^\w\d]/,y=r.maxLineCount;Ka(y)||(y=1/0);var _=t.split(h),v=[],S=[],C,k,x;c&&Ue(s).attr("xml:space","preserve");for(var m=0,T=0,P=_.length;m<P;m++){var I=_[m];if(!(!I&&!c)&&typeof I=="string"){var M=!1;if(d&&I.indexOf(d)>=0)if(I.length>1){const _e=y7e(_[m],d);_.splice(m,1,..._e),m--,P=_.length;continue}else{if(c&&typeof _[m-1]=="string"){_.splice(m,ST,"",ST),P+=2,m--;continue}S[++T]=!c||typeof _[m+1]=="string"?"":void 0,M=!0}if(!M){let _e;if(c?_e=S[T]!==void 0?S[T]+f+I:I:_e=S[T]?S[T]+f+I:I,u.data=_e,s.getComputedTextLength()<=i)S[T]=_e,(C||k)&&(v[T++]=!0,C=0,k=0);else{if(!S[T]||C){var L=!!C;if(C=I.length-1,L||!C){if(!C){if(!S[T]){S=[];break}_.splice(m,2,I+_[m+1]),P--,v[T++]=!0,m--;continue}_[m]=I.substring(0,C),_[m+1]=I.substring(C)+(_[m+1]===void 0?"":_[m+1])}else{if(k)_.splice(m,2,_[m]+_[m+1]),k=0;else{var R=I.search(g);R>-1&&R!==I.length-1&&R!==0&&(k=R+1,C=0),_.splice(m,1,I.substring(0,k||C),I.substring(k||C)),P++}T&&!v[T-1]&&T--}(!c||S[T]!=="")&&m--;continue}T++,m--}}var V=null;if(S.length>y)V=y-1;else if(o!==void 0){if(x===void 0&&u.data!=="")if(n.lineHeight==="auto")x=OW({value:1.5,unit:"em"},l);else{const _e=v7e(n.lineHeight,["em","px",""]);x=OW(_e,l)}x*S.length>o&&(V=Math.floor(o/x)-1)}if(V!==null){S.splice(V+1);var z=r.ellipsis;if(!z||V<0)break;typeof z!="string"&&(z="…");var ie=S[V];if(!ie&&!M)break;var oe=ie.length,Se,Ae,Ee;do{if(Ae=ie[oe],Se=ie.substring(0,oe),Ae?Ae.match(h)&&(Se+=Ae):(Ee=typeof h=="string"?h:" ",Se+=Ee),Se+=z,u.data=Se,s.getComputedTextLength()<=i){S[V]=Se;break}oe--}while(oe>=0);break}}}return r.svgDocument?a.removeChild(l):document.body.removeChild(a),S.join(d)},b7e=function(t){var e=Vn(Vn.parseHTML("<div>"+t+"</div>",null,!1));return e.find("*").each(function(){var n=this;Vn.each(n.attributes,function(){var r=this,i=r.name,o=r.value;(i.startsWith("on")||o.startsWith("javascript:")||o.startsWith("data:")||o.startsWith("vbscript:"))&&Vn(n).removeAttr(i)})}),e.html()},_7e=function(t,e){var n=Vn(t),r=n.map(function(){var i=this,o=i.parentNode,a=o.insertBefore(document.createTextNode(""),i.nextSibling);return function(){if(o===this)throw new Error("You can't sort elements if any one is a descendant of another.");o.insertBefore(this,a),o.removeChild(a)}});return Array.prototype.sort.call(n,e).each(function(i){r[i].call(this)})},$g=function(t){if(Object(t)!==t){var e=0;return isFinite(t)&&(e=+t),{top:e,right:e,bottom:e,left:e}}var n,r,i,o;return n=r=i=o=0,isFinite(t.vertical)&&(n=i=+t.vertical),isFinite(t.horizontal)&&(r=o=+t.horizontal),isFinite(t.top)&&(n=+t.top),isFinite(t.right)&&(r=+t.right),isFinite(t.bottom)&&(i=+t.bottom),isFinite(t.left)&&(o=+t.left),{top:n,right:r,bottom:i,left:o}},S7e={linear:function(t){return t},quad:function(t){return t*t},cubic:function(t){return t*t*t},inout:function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)},exponential:function(t){return Math.pow(2,10*(t-1))},bounce:function(t){for(var e=0,n=1;;e+=n,n/=2)if(t>=(7-4*e)/11){var r=(11-6*e-11*t)/4;return-r*r+n*n}},reverse:function(t){return function(e){return 1-t(1-e)}},reflect:function(t){return function(e){return .5*(e<.5?t(2*e):2-t(2-2*e))}},clamp:function(t,e,n){return e=e||0,n=n||1,function(r){var i=t(r);return i<e?e:i>n?n:i}},back:function(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}},elastic:function(t){return t||(t=1.5),function(e){return Math.pow(2,10*(e-1))*Math.cos(20*Math.PI*t/3*e)}}},Cse={number:function(t,e){var n=e-t;return function(r){return t+n*r}},object:function(t,e){var n=Object.keys(t);return function(r){var i,o,a={};for(i=n.length-1;i!=-1;i--)o=n[i],a[o]=t[o]+(e[o]-t[o])*r;return a}},hexColor:function(t,e){var n=parseInt(t.slice(1),16),r=parseInt(e.slice(1),16),i=n&255,o=(r&255)-i,a=n&65280,s=(r&65280)-a,l=n&16711680,u=(r&16711680)-l;return function(c){var f=i+o*c&255,h=a+s*c&65280,d=l+u*c&16711680;return"#"+(1<<24|f|h|d).toString(16).slice(1)}},unit:function(t,e){var n=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,r=n.exec(t),i=n.exec(e),o=i[1].indexOf("."),a=o>0?i[1].length-o-1:0;t=+r[1];var s=+i[1]-t,l=r[2];return function(u){return(t+s*u).toFixed(a)+l}}},w7e={outline:function(t){var e='<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${outerRadius}" /><feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${innerRadius}" /><feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/><feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/><feMerge><feMergeNode in="outline"/><feMergeNode in="SourceGraphic"/></feMerge></filter>',n=Number.isFinite(t.margin)?t.margin:2,r=Number.isFinite(t.width)?t.width:1;return ga(e)({color:t.color||"blue",opacity:Number.isFinite(t.opacity)?t.opacity:1,outerRadius:n+r,innerRadius:n})},highlight:function(t){var e='<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${width}"/><feComposite result="composed" in="colored" in2="morphed" operator="in"/><feGaussianBlur result="blured" in="composed" stdDeviation="${blur}"/><feBlend in="SourceGraphic" in2="blured" mode="normal"/></filter>';return ga(e)({color:t.color||"red",width:Number.isFinite(t.width)?t.width:1,blur:Number.isFinite(t.blur)?t.blur:0,opacity:Number.isFinite(t.opacity)?t.opacity:1})},blur:function(t){var e=Number.isFinite(t.x)?t.x:2;return ga('<filter><feGaussianBlur stdDeviation="${stdDeviation}"/></filter>')({stdDeviation:Number.isFinite(t.y)?[e,t.y]:e})},dropShadow:function(t){var e="SVGFEDropShadowElement"in window?'<filter><feDropShadow stdDeviation="${blur}" dx="${dx}" dy="${dy}" flood-color="${color}" flood-opacity="${opacity}"/></filter>':'<filter><feGaussianBlur in="SourceAlpha" stdDeviation="${blur}"/><feOffset dx="${dx}" dy="${dy}" result="offsetblur"/><feFlood flood-color="${color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="${opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';return ga(e)({dx:t.dx||0,dy:t.dy||0,opacity:Number.isFinite(t.opacity)?t.opacity:1,color:t.color||"black",blur:Number.isFinite(t.blur)?t.blur:4})},grayscale:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return ga('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0"/></filter>')({a:.2126+.7874*(1-e),b:.7152-.7152*(1-e),c:.0722-.0722*(1-e),d:.2126-.2126*(1-e),e:.7152+.2848*(1-e),f:.0722-.0722*(1-e),g:.2126-.2126*(1-e),h:.0722+.9278*(1-e)})},sepia:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return ga('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0"/></filter>')({a:.393+.607*(1-e),b:.769-.769*(1-e),c:.189-.189*(1-e),d:.349-.349*(1-e),e:.686+.314*(1-e),f:.168-.168*(1-e),g:.272-.272*(1-e),h:.534-.534*(1-e),i:.131+.869*(1-e)})},saturate:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return ga('<filter><feColorMatrix type="saturate" values="${amount}"/></filter>')({amount:1-e})},hueRotate:function(t){return ga('<filter><feColorMatrix type="hueRotate" values="${angle}"/></filter>')({angle:t.angle||0})},invert:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return ga('<filter><feComponentTransfer><feFuncR type="table" tableValues="${amount} ${amount2}"/><feFuncG type="table" tableValues="${amount} ${amount2}"/><feFuncB type="table" tableValues="${amount} ${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:1-e})},brightness:function(t){return ga('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}"/><feFuncG type="linear" slope="${amount}"/><feFuncB type="linear" slope="${amount}"/></feComponentTransfer></filter>')({amount:Number.isFinite(t.amount)?t.amount:1})},contrast:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return ga('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}" intercept="${amount2}"/><feFuncG type="linear" slope="${amount}" intercept="${amount2}"/><feFuncB type="linear" slope="${amount}" intercept="${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:.5-e/2})}},ga=function(t){var e=/<%= ([^ ]+) %>|\$\{ ?([^{} ]+) ?\}|\{\{([^{} ]+)\}\}/g;return function(n){return n=n||{},t.replace(e,function(r){for(var i=Array.from(arguments),o=i.slice(1,4).find(function(l){return!!l}),a=o.split("."),s=n[a.shift()];s!==void 0&&a.length;)s=s[a.shift()];return s!==void 0?s:""})}},sb=function(){};function kse(t){t=OS(t);const e=Dn(t).reduce(function(n,r){return n[r.id]=r.clone(),n},{});return Dn(t).forEach(function(n){const r=e[n.id];if(r.isLink()){const a=r.source(),s=r.target();a.id&&e[a.id]&&r.prop("source/id",e[a.id].id),s.id&&e[s.id]&&r.prop("target/id",e[s.id].id)}const i=n.get("parent");i&&e[i]&&r.set("parent",e[i].id);const o=Dn(n.get("embeds")).reduce(function(a,s){return e[s]&&a.push(e[s].id),a},[]);Eh(o)||r.set("embeds",o)}),e}const x7e=["checked","selected","disabled","readOnly","contentEditable","value","indeterminate"],C7e=x7e.reduce((t,e)=>(t[e]=!0,t),{}),k7e={qualify:function(t){return Di(t)},set:function(t,e,n){Object.keys(t).forEach(function(r){if(C7e[r]&&r in n){const i=t[r];n.tagName==="SELECT"&&Array.isArray(i)?Array.from(n.options).forEach(function(o,a){o.selected=i.includes(o.value)}):n[r]=i}})}},T7e=k7e;function sh(t,e){return function(n,r){var i=Eo(n);n=parseFloat(n),i&&(n/=100);var o={};if(isFinite(n)){var a=i||n>=0&&n<=1?n*r[e]:Math.max(n+r[e],0);o[t]=a}return o}}function CC(t,e,n){return function(r,i){var o=Eo(r);r=parseFloat(r),o&&(r/=100);var a;if(isFinite(r)){var s=i[n]();o||r>0&&r<1?a=s[t]+i[e]*r:a=s[t]+r}var l=we();return l[t]=a||0,l}}function IW(t,e,n){return function(r,i){var o;r==="middle"?o=i[e]/2:r===n?o=i[e]:isFinite(r)?o=r>-1&&r<1?-i[e]*r:-r:Eo(r)?o=i[e]*parseFloat(r)/100:o=0;var a=we();return a[t]=-(i[t]+o),a}}function Tse(t,e){var n="joint-shape",r=e&&e.resetOffset;return function(i,o,a){var s=Vn(a),l=s.data(n);if(!l||l.value!==i){var u=t(i);l={value:i,shape:u,shapeBBox:u.bbox()},s.data(n,l)}var c=l.shape.clone(),f=l.shapeBBox.clone(),h=f.origin(),d=o.origin();f.x=d.x,f.y=d.y;var g=o.maxRectScaleToFit(f,d),y=f.width===0||o.width===0?1:g.sx,_=f.height===0||o.height===0?1:g.sy;return c.scale(y,_,h),r&&c.translate(-h.x,-h.y),c}}function $W(t){function e(r){return new Ct(Ue.normalizePathData(r))}var n=Tse(e,t);return function(r,i,o){var a=n(r,i,o);return{d:a.serialize()}}}function LW(t){var e=Tse($r,t);return function(n,r,i){var o=e(n,r,i);return{points:o.serialize()}}}function kC(t,e){var n=new we(1,0);return function(r){var i,o,a=this[t](r);return a?(o=e.rotate?a.vector().vectorAngle(n):0,i=a.start):(i=this.path.start,o=0),o===0?{transform:"translate("+i.x+","+i.y+")"}:{transform:"translate("+i.x+","+i.y+") rotate("+o+")"}}}function DW(t){return function(n,r,i){const o=Ue(i);o.attr(t)!==n&&o.attr(t,n)}}function Fm(t,e,n){return n.text!==void 0}function lb(){return this.model.isLink()}function xI(t){var e={},n=t.stroke;typeof n=="string"&&(e.stroke=n,e.fill=n);var r=t.strokeOpacity;return r===void 0&&(r=t["stroke-opacity"]),r===void 0&&(r=t.opacity),r!==void 0&&(e["stroke-opacity"]=r,e["fill-opacity"]=r),e}function MW(t){const{paper:e}=this;return`url(#${t.type==="pattern"?e.definePattern(t):e.defineGradient(t)})`}const cn={xlinkShow:{set:"xlink:show"},xlinkRole:{set:"xlink:role"},xlinkType:{set:"xlink:type"},xlinkArcrole:{set:"xlink:arcrole"},xlinkTitle:{set:"xlink:title"},xlinkActuate:{set:"xlink:actuate"},xmlSpace:{set:"xml:space"},xmlBase:{set:"xml:base"},xmlLang:{set:"xml:lang"},preserveAspectRatio:{set:"preserveAspectRatio"},requiredExtension:{set:"requiredExtension"},requiredFeatures:{set:"requiredFeatures"},systemLanguage:{set:"systemLanguage"},externalResourcesRequired:{set:"externalResourceRequired"},href:{set:DW("href")},xlinkHref:{set:DW("xlink:href")},filter:{qualify:Di,set:function(t){return"url(#"+this.paper.defineFilter(t)+")"}},fill:{qualify:Di,set:MW},stroke:{qualify:Di,set:MW},sourceMarker:{qualify:Di,set:function(t,e,n,r){return t=Nt(xI(r),t),{"marker-start":"url(#"+this.paper.defineMarker(t)+")"}}},targetMarker:{qualify:Di,set:function(t,e,n,r){return t=Nt(xI(r),{transform:"rotate(180)"},t),{"marker-end":"url(#"+this.paper.defineMarker(t)+")"}}},vertexMarker:{qualify:Di,set:function(t,e,n,r){return t=Nt(xI(r),t),{"marker-mid":"url(#"+this.paper.defineMarker(t)+")"}}},text:{qualify:function(t,e,n){return!n.textWrap||!Di(n.textWrap)},set:function(t,e,n,r){var i=Vn(n),o="joint-text",a=i.data(o),s=Sse(r,"lineHeight","annotations","textPath","x","textVerticalAnchor","eol","displayEmpty");const{x:l}=s;wl(l)&&(s.x=xl(l,e));let u=r["font-size"]||r.fontSize;wl(u)&&(u=xl(u,e));var c=s.fontSize=u,f=JSON.stringify([t,s]);if(a===void 0||a!==f){c&&n.setAttribute("font-size",c);var h=s.textPath;if(Jn(h)){var d=h.selector;if(typeof d=="string"){var g=this.findBySelector(d)[0];g instanceof SVGPathElement&&(s.textPath=Nt({"xlink:href":"#"+g.id},h))}}Ue(n).text(""+t,s),i.data(o,f)}}},textWrap:{qualify:Di,set:function(t,e,n,r){var i={},o=t.width||0;Eo(o)?i.width=e.width*parseFloat(o)/100:wl(o)?i.width=Number(xl(o,e)):t.width===null?i.width=1/0:o<=0?i.width=e.width+o:i.width=o;var a=t.height||0;Eo(a)?i.height=e.height*parseFloat(a)/100:wl(a)?i.height=Number(xl(a,e)):t.height===null||(a<=0?i.height=e.height+a:i.height=a);var s,l=t.text;if(l===void 0&&(l=r.text),l!==void 0){const u=t.breakText||xse,c=r["font-size"]||r.fontSize;s=u(""+l,i,{"font-weight":r["font-weight"]||r.fontWeight,"font-size":wl(c)?xl(c,e):c,"font-family":r["font-family"]||r.fontFamily,lineHeight:r.lineHeight,"letter-spacing":"letter-spacing"in r?r["letter-spacing"]:r.letterSpacing},{svgDocument:this.paper.svg,ellipsis:t.ellipsis,hyphen:t.hyphen,maxLineCount:t.maxLineCount,preserveSpaces:t.preserveSpaces})}else s="";cn.text.set.call(this,s,e,n,r)}},title:{qualify:function(t,e){return e instanceof SVGElement},set:function(t,e,n){var r=Vn(n),i="joint-title",o=r.data(i);if(o===void 0||o!==t){if(r.data(i,t),n.tagName==="title"){n.textContent=t;return}var a=n.firstElementChild;if(a&&a.tagName==="title")a.textContent=t;else{var s=document.createElementNS(n.namespaceURI,"title");s.textContent=t,n.insertBefore(s,a)}}}},lineHeight:{qualify:Fm},textVerticalAnchor:{qualify:Fm},textPath:{qualify:Fm},annotations:{qualify:Fm},eol:{qualify:Fm},displayEmpty:{qualify:Fm},port:{set:function(t){return t===null||t.id===void 0?t:t.id}},style:{qualify:Di,set:function(t,e,n){Vn(n).css(t)}},html:{set:function(t,e,n){Vn(n).html(t+"")}},props:T7e,ref:{},refX:{position:CC("x","width","origin")},refY:{position:CC("y","height","origin")},refDx:{position:CC("x","width","corner")},refDy:{position:CC("y","height","corner")},refWidth:{set:sh("width","width")},refHeight:{set:sh("height","height")},refRx:{set:sh("rx","width")},refRy:{set:sh("ry","height")},refRInscribed:{set:function(t){var e=sh(t,"width"),n=sh(t,"height");return function(r,i){var o=i.height>i.width?e:n;return o(r,i)}}("r")},refRCircumscribed:{set:function(t,e){var n=Eo(t);t=parseFloat(t),n&&(t/=100);var r=Math.sqrt(e.height*e.height+e.width*e.width),i;return isFinite(t)&&(n||t>=0&&t<=1?i=t*r:i=Math.max(t+r,0)),{r:i}}},refCx:{set:sh("cx","width")},refCy:{set:sh("cy","height")},xAlignment:{offset:IW("x","width","right")},yAlignment:{offset:IW("y","height","bottom")},resetOffset:{offset:function(t,e){return t?{x:-e.x,y:-e.y}:{x:0,y:0}}},refDResetOffset:{set:$W({resetOffset:!0})},refDKeepOffset:{set:$W({resetOffset:!1})},refPointsResetOffset:{set:LW({resetOffset:!0})},refPointsKeepOffset:{set:LW({resetOffset:!1})},connection:{qualify:lb,set:function({stubs:t=0}){let e;if(isFinite(t)&&t!==0){let n;t<0?n=(this.getConnectionLength()+t)/2:n=t;const r=this.getConnection(),i=this.getConnectionSubdivisions(),o=r.divideAtLength(n,{segmentSubdivisions:i}),a=r.divideAtLength(-n,{segmentSubdivisions:i});o&&a&&(e=`${o[0].serialize()} ${a[1].serialize()}`)}return{d:e||this.getSerializedConnection()}}},atConnectionLengthKeepGradient:{qualify:lb,set:kC("getTangentAtLength",{rotate:!0})},atConnectionLengthIgnoreGradient:{qualify:lb,set:kC("getTangentAtLength",{rotate:!1})},atConnectionRatioKeepGradient:{qualify:lb,set:kC("getTangentAtRatio",{rotate:!0})},atConnectionRatioIgnoreGradient:{qualify:lb,set:kC("getTangentAtRatio",{rotate:!1})}};cn["xlink:href"]=cn.xlinkHref;["transform","d","points","cx","cy","x1","x2","y1","y2","x","y","dx","dy"].forEach(t=>{cn[t]={qualify:wl,set:function(n,r){return{[t]:xl(n,r)}}}});["width","height","r","rx","ry","font-size","stroke-width"].forEach(t=>{cn[t]={qualify:wl,set:function(n,r){return{[t]:Math.max(0,xl(n,r))}}}});cn.refR=cn.refRInscribed;cn.refD=cn.refDResetOffset;cn.refPoints=cn.refPointsResetOffset;cn.atConnectionLength=cn.atConnectionLengthKeepGradient;cn.atConnectionRatio=cn.atConnectionRatioKeepGradient;cn.fontSize=cn["font-size"];cn.strokeWidth=cn["stroke-width"];cn.refX2=cn.refX;cn.refY2=cn.refY;cn.refWidth2=cn.refWidth;cn.refHeight2=cn.refHeight;cn["ref-x"]=cn.refX;cn["ref-y"]=cn.refY;cn["ref-dy"]=cn.refDy;cn["ref-dx"]=cn.refDx;cn["ref-width"]=cn.refWidth;cn["ref-height"]=cn.refHeight;cn["x-alignment"]=cn.xAlignment;cn["y-alignment"]=cn.yAlignment;const Ase=cn,pc=Go.Model.extend({constructor:function(t,e){var n,r=t||{};typeof this.preinitialize=="function"&&this.preinitialize.apply(this,arguments),this.cid=f7e("c"),this.attributes={},e&&e.collection&&(this.collection=e.collection),e&&e.parse&&(r=this.parse(r,e)||{}),(n=Mi(this,"defaults"))&&(r=Ri({},n,r)),this.set(r,e),this.changed={},this.initialize.apply(this,arguments)},translate:function(t,e,n){throw new Error("Must define a translate() method.")},toJSON:function(){const e=Mi(this.constructor.prototype,"defaults").attrs||{},n=this.attributes.attrs,r={};yl(n,function(o,a){const s=e[a];yl(o,function(l,u){Jn(l)&&!Array.isArray(l)?yl(l,function(c,f){(!s||!s[u]||!mv(s[u][f],c))&&(r[a]=r[a]||{},(r[a][u]||(r[a][u]={}))[f]=c)}):(!s||!mv(s[u],l))&&(r[a]=r[a]||{},r[a][u]=l)})});const i=vl(Ig(this.attributes,"attrs"));return i.attrs=r,i},initialize:function(t){const e=this.getIdAttribute();(!t||t[e]===void 0)&&this.set(e,this.generateId(),{silent:!0}),this._transitionIds={},this._scheduledTransitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},getIdAttribute:function(){return this.idAttribute||"id"},generateId:function(){return d7e()},processPorts:function(){var t=this.ports,e={};yl(this.get("attrs"),function(o,a){o&&o.port&&(o.port.id!==void 0?e[o.port.id]=o.port:e[o.port]={id:o.port})});var n={};if(yl(t,function(o,a){e[a]||(n[a]=!0)}),this.graph&&!Eh(n)){var r=this.graph.getConnectedLinks(this,{inbound:!0});r.forEach(function(o){n[o.get("target").port]&&o.remove()});var i=this.graph.getConnectedLinks(this,{outbound:!0});i.forEach(function(o){n[o.get("source").port]&&o.remove()})}this.ports=e},remove:function(t={}){const{graph:e,collection:n}=this;if(!e)return n&&n.remove(this,t),this;e.startBatch("remove");const r=this.getParentCell();r&&r.unembed(this,t);const i=this.getEmbeddedCells();for(let o=0,a=i.length;o<a;o++){const s=i[o];s&&s.remove(t)}return this.trigger("remove",this,e.attributes.cells,t),e.stopBatch("remove"),this},toFront:function(t){var e=this.graph;if(e){t=t||{};let n;t.deep?(n=this.getEmbeddedCells({deep:!0,breadthFirst:t.breadthFirst!==!1}),n.unshift(this)):n=[this];const r=AW(n,l=>l.z());let o=e.maxZIndex()-n.length+1;const a=e.get("cells");let s=a.indexOf(this)!==a.length-n.length;s||(s=r.some(function(l,u){return l.z()!==o+u})),s&&(this.startBatch("to-front"),o=o+n.length,r.forEach(function(l,u){l.set("z",o+u,t)}),this.stopBatch("to-front"))}return this},toBack:function(t){var e=this.graph;if(e){t=t||{};let r;t.deep?(r=this.getEmbeddedCells({deep:!0,breadthFirst:t.breadthFirst!==!1}),r.unshift(this)):r=[this];const i=AW(r,s=>s.z());let o=e.minZIndex();var n=e.get("cells");let a=n.indexOf(this)!==0;a||(a=i.some(function(s,l){return s.z()!==o+l})),a&&(this.startBatch("to-back"),o-=r.length,i.forEach(function(s,l){s.set("z",o+l,t)}),this.stopBatch("to-back"))}return this},parent:function(t,e){return t===void 0?this.get("parent"):this.set("parent",t,e)},embed:function(t,e){const n=Array.isArray(t)?t:[t];if(!this.canEmbed(n))throw new Error("Recursive embedding not allowed.");if(n.some(r=>r.isEmbedded()&&this.id!==r.parent()))throw new Error("Embedding of already embedded cells is not allowed.");return this._embedCells(n,e),this},unembed:function(t,e){const n=Array.isArray(t)?t:[t];return this._unembedCells(n,e),this},canEmbed:function(t){return(Array.isArray(t)?t:[t]).every(n=>this!==n&&!this.isEmbeddedIn(n))},_embedCells:function(t,e){const n="embed";this.startBatch(n);const r=Nt([],this.get("embeds"));t.forEach(i=>{r[i.isLink()?"unshift":"push"](i.id),i.parent(this.id,e)}),this.set("embeds",OS(r),e),this.stopBatch(n)},_unembedCells:function(t,e){const n="unembed";this.startBatch(n),t.forEach(r=>r.unset("parent",e)),this.set("embeds",EW(this.get("embeds"),...t.map(r=>r.id)),e),this.stopBatch(n)},getParentCell:function(){var t=this.parent(),e=this.graph;return t&&e&&e.getCell(t)||null},getAncestors:function(){var t=[];if(!this.graph)return t;for(var e=this.getParentCell();e;)t.push(e),e=e.getParentCell();return t},getEmbeddedCells:function(t){if(t=t||{},this.graph){var e;if(t.deep)if(t.breadthFirst){e=[];for(var n=this.getEmbeddedCells();n.length>0;){var r=n.shift();e.push(r),n.push.apply(n,r.getEmbeddedCells())}}else e=this.getEmbeddedCells(),e.forEach(function(i){e.push.apply(e,i.getEmbeddedCells(t))});else e=Dn(this.get("embeds")).map(this.graph.getCell,this.graph);return e}return[]},isEmbeddedIn:function(t,e){var n=Ko(t)?t:t.id,r=this.parent();if(e=Nt({deep:!0},e),this.graph&&e.deep){for(;r;){if(r===n)return!0;r=this.graph.getCell(r).parent()}return!1}else return r===n},isEmbedded:function(){return!!this.parent()},clone:function(t){if(t=t||{},t.deep)return Dn(kse([this].concat(this.getEmbeddedCells({deep:!0}))));var e=Go.Model.prototype.clone.apply(this,arguments);return e.set(this.getIdAttribute(),this.generateId()),e.unset("embeds"),e.unset("parent"),e},prop:function(t,e,n){var r="/",i=Ko(t);if(i||Array.isArray(t))if(arguments.length>1){var o,a;i?(o=t,a=o.split("/")):(o=t.join(r),a=t.slice());var s=a[0],l=a.length;const S=n||{};S.propertyPath=o,S.propertyValue=e,S.propertyPathArray=a,"rewrite"in S||(S.rewrite=!1);for(var u={},c=u,f=s,h=1;h<l;h++){var d=a[h],g=Number.isFinite(i?Number(d):d);c=c[f]=g?[]:{},f=d}u=pD(u,a,e,"/");var y=Ri({},this.attributes);S.rewrite&&PW(y,o,"/");var _=Ri(y,u);return this.set(s,_[s],S)}else return x_(this.attributes,t,r);const v=e||{};return v.propertyPath=null,v.propertyValue=t,v.propertyPathArray=[],"rewrite"in v||(v.rewrite=!1),this.set(Ri({},this.attributes,t),v)},removeProp:function(t,e){e=e||{};var n=Array.isArray(t)?t:t.split("/"),r=n[0];if(r==="attrs"&&(e.dirty=!0),n.length===1)return this.unset(t,e);var i=n.slice(1),o=this.get(r);return o==null?this:(o=vl(o),PW(o,i,"/"),this.set(r,o,e))},attr:function(t,e,n){var r=Array.from(arguments);return r.length===0?this.get("attrs"):(Array.isArray(t)?r[0]=["attrs"].concat(t):Ko(t)?r[0]="attrs/"+t:r[0]={attrs:t},this.prop.apply(this,r))},removeAttr:function(t,e){return Array.isArray(t)?this.removeProp(["attrs"].concat(t)):this.removeProp("attrs/"+t,e)},transition:function(t,e,n,r){r=r||"/";var i={duration:100,delay:10,timingFunction:S7e.linear,valueFunction:Cse.number};n=Nt(i,n);var o=0,a,s=(function(f){var h,d,g;o=o||f,f-=o,d=f/n.duration,d<1?this._transitionIds[t]=h=gD(s):(d=1,delete this._transitionIds[t]),g=a(n.timingFunction(d)),n.transitionId=h,this.prop(t,g,n),h||this.trigger("transition:end",this,t)}).bind(this);const{_scheduledTransitionIds:l}=this;let u;var c=f=>{l[t]&&(l[t]=EW(l[t],u),l[t].length===0&&delete l[t]),this.stopPendingTransitions(t,r),a=n.valueFunction(x_(this.attributes,t,r),e),this._transitionIds[t]=gD(f),this.trigger("transition:start",this,t)};return u=setTimeout(c,n.delay,s),l[t]||(l[t]=[]),l[t].push(u),u},getTransitions:function(){return dD(Object.keys(this._transitionIds),Object.keys(this._scheduledTransitionIds))},stopScheduledTransitions:function(t,e="/"){const{_scheduledTransitionIds:n={}}=this;let r=Object.keys(n);if(t){const i=t.split(e);r=r.filter(o=>mv(i,o.split(e).slice(0,i.length)))}return r.forEach(i=>{n[i].forEach(a=>clearTimeout(a)),delete n[i]}),this},stopPendingTransitions(t,e="/"){const{_transitionIds:n={}}=this;let r=Object.keys(n);if(t){const i=t.split(e);r=r.filter(o=>mv(i,o.split(e).slice(0,i.length)))}r.forEach(i=>{const o=n[i];mD(o),delete n[i],this.trigger("transition:end",this,i)})},stopTransitions:function(t,e="/"){return this.stopScheduledTransitions(t,e),this.stopPendingTransitions(t,e),this},addTo:function(t,e){return t.addCell(this,e),this},findView:function(t){return t.findViewByModel(this)},isElement:function(){return!1},isLink:function(){return!1},startBatch:function(t,e){return this.graph&&this.graph.startBatch(t,Nt({},e,{cell:this})),this},stopBatch:function(t,e){return this.graph&&this.graph.stopBatch(t,Nt({},e,{cell:this})),this},getChangeFlag:function(t){var e=0;if(!t)return e;for(var n in t)!t.hasOwnProperty(n)||!this.hasChanged(n)||(e|=t[n]);return e},angle:function(){return 0},position:function(){return new we(0,0)},z:function(){return this.get("z")||0},getPointFromConnectedLink:function(){return new we},getBBox:function(){return new st(0,0,0,0)},getPointRotatedAroundCenter(t,e,n){const r=new we(e,n);return t&&r.rotate(this.getBBox().center(),t),r},getAbsolutePointFromRelative(t,e){return this.getPointRotatedAroundCenter(-this.angle(),this.position().offset(t,e))},getRelativePointFromAbsolute(t,e){return this.getPointRotatedAroundCenter(this.angle(),t,e).difference(this.position())}},{getAttributeDefinition:function(t){var e=this.attributes,n=Ase;return e&&e[t]||n[t]},define:function(t,e,n,r){n=Nt({defaults:V5({type:t},e,this.prototype.defaults)},n);var i=this.extend(n,r);return typeof joint<"u"&&cf(joint,"shapes")&&pD(joint.shapes,t,i,"."),i}}),A7e=function(t,e,n){if(Ko(n)){if(!vD[n])throw new Error('Unknown wrapper: "'+n+'"');n=vD[n]}if(!br(n))throw new Error("Wrapper must be a function.");Dn(e).forEach(function(r){t[r]=n(t[r])})},vD={cells:function(t){return function(){var e=Array.from(arguments),n=e.length,r=n>0&&e[0]||[],i=n>1&&e[n-1]||{};return Array.isArray(r)||(i instanceof pc?r=e:r instanceof pc&&(e.length>1&&e.pop(),r=e)),i instanceof pc&&(i={}),t.call(this,r,i)}}},bi={TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left",TOP_LEFT:"top-left",TOP_RIGHT:"top-right",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",CENTER:"center"};function Ese(t,e){const n=new st(t);switch(e){case void 0:throw new Error("Position required");case bi.LEFT:case"leftMiddle":return n.leftMiddle();case bi.RIGHT:case"rightMiddle":return n.rightMiddle();case bi.TOP:case"topMiddle":return n.topMiddle();case bi.BOTTOM:case"bottomMiddle":return n.bottomMiddle();case bi.TOP_LEFT:case"topLeft":case"origin":return n.topLeft();case bi.TOP_RIGHT:case"topRight":return n.topRight();case bi.BOTTOM_LEFT:case"bottomLeft":return n.bottomLeft();case bi.BOTTOM_RIGHT:case"bottomRight":case"corner":return n.bottomRight();case bi.CENTER:return n.center();default:throw new Error(`Unknown position: ${e}`)}}function Pse(t,e,n){var r=t.toJSON();return r.angle=e||0,nu({},n,r)}function IS(t,e,n,r){return t.map(function(i,o,a){var s=this.pointAt((o+.5)/a.length);return(i.dx||i.dy)&&s.offset(i.dx||0,i.dy||0),Pse(s.round(),0,B5(r,i))},ug(e,n))}function Ose(t,e,n,r){var i=e.center(),o=e.width/e.height,a=e.topMiddle(),s=Ca.fromRect(e);return t.map(function(l,u,c){var f=n+r(u,c.length),h=a.clone().rotate(i,-f).scale(o,1,i),d=l.compensateRotation?-s.tangentTheta(h):0;return(l.dx||l.dy)&&h.offset(l.dx||0,l.dy||0),l.dr&&h.move(i,l.dr),Pse(h.round(),d,B5(e,l))})}function B5(t,e){let{x:n,y:r,angle:i}=e;return Eo(n)?n=parseFloat(n)/100*t.width:wl(n)&&(n=Number(xl(n,t))),Eo(r)?r=parseFloat(r)/100*t.height:wl(r)&&(r=Number(xl(r,t))),{x:n,y:r,angle:i}}function yD(t,e){const{x:n,y:r}=B5(t,e);return new we(n||0,r||0)}const E7e=function(t,e){return t.map(n=>{const r=yD(e,n).round().toJSON();return r.angle=n.angle||0,r})},P7e=function(t,e,n){return n.fn(t,e,n)},O7e=function(t,e,n){var r=yD(e,n.start||e.origin()),i=yD(e,n.end||e.corner());return IS(t,r,i,e)},I7e=function(t,e,n){return IS(t,e.origin(),e.bottomLeft(),e)},$7e=function(t,e,n){return IS(t,e.topRight(),e.corner(),e)},L7e=function(t,e,n){return IS(t,e.origin(),e.topRight(),e)},D7e=function(t,e,n){return IS(t,e.bottomLeft(),e.corner(),e)},M7e=function(t,e,n){var r=n.startAngle||0,i=n.step||360/t.length;return Ose(t,e,r,function(o){return o*i})},N7e=function(t,e,n){var r=n.startAngle||0,i=n.step||20;return Ose(t,e,r,function(o,a){return(o+.5-a/2)*i})},F7e=Object.freeze(Object.defineProperty({__proto__:null,absolute:E7e,bottom:D7e,ellipse:N7e,ellipseSpread:M7e,fn:P7e,left:I7e,line:O7e,right:$7e,top:L7e},Symbol.toStringTag,{value:"Module"}));function Sd(t,e){return V5({},t,e,{x:0,y:0,angle:0,attrs:{}})}function Ise(t,e,n,r){r=nu({},r,{offset:15});var i=e.center().theta(t),o=$se(e),a,s,l,u,c=r.offset,f=0;i<o[1]||i>o[2]?(l=".3em",a=c,s=0,u="start"):i<o[0]?(a=0,s=-c,n?(f=-90,u="start",l=".3em"):(u="middle",l="0")):i<o[3]?(l=".3em",a=-c,s=0,u="end"):(a=0,s=c,n?(f=90,u="start",l=".3em"):(u="middle",l=".6em"));var h=Math.round;return Sd({x:h(a),y:h(s),angle:f,attrs:{labelText:{y:l,textAnchor:u}}})}function $se(t){var e=t.center(),n=e.theta(t.origin()),r=e.theta(t.bottomLeft()),i=e.theta(t.corner()),o=e.theta(t.topRight());return[n,o,i,r]}function Lse(t,e,n,r){var i=e.center().theta(t);r=nu({},r,{offset:15});var o,a,s,l,u=r.offset,c=0,f=$se(e);i<f[1]||i>f[2]?(s=".3em",o=-u,a=0,l="end"):i<f[0]?(o=0,a=u,n?(c=90,l="start",s=".3em"):(l="middle",s=".6em")):i<f[3]?(s=".3em",o=u,a=0,l="start"):(o=0,a=-u,n?(c=-90,l="start",s=".3em"):(l="middle",s="0"));var h=Math.round;return Sd({x:h(o),y:h(a),angle:c,attrs:{labelText:{y:s,textAnchor:l}}})}function Dse(t,e,n){n=nu({},n,{offset:20});var r=dT(0,0),i=-t.theta(r),o=i,a=t.clone().move(r,n.offset).difference(t).round(),s=".3em",l;(i+90)%180===0?(l=e?"end":"middle",!e&&i===-270&&(s="0em")):i>-270&&i<-90?(l="start",o=i-180):l="end";var u=Math.round;return Sd({x:u(a.x),y:u(a.y),angle:e?o:0,attrs:{labelText:{y:s,textAnchor:l}}})}const R7e=function(t,e,n){return Sd(n)},V7e=function(t,e,n){return Sd(n,{x:-15,attrs:{labelText:{y:".3em",textAnchor:"end"}}})},B7e=function(t,e,n){return Sd(n,{x:15,attrs:{labelText:{y:".3em",textAnchor:"start"}}})},z7e=function(t,e,n){return Sd(n,{y:-15,attrs:{labelText:{y:"0",textAnchor:"middle"}}})},j7e=function(t,e,n){return Sd(n,{y:15,attrs:{labelText:{y:".6em",textAnchor:"middle"}}})},U7e=function(t,e,n){return Ise(t,e,!0,n)},W7e=function(t,e,n){return Ise(t,e,!1,n)},H7e=function(t,e,n){return Lse(t,e,!0,n)},G7e=function(t,e,n){return Lse(t,e,!1,n)},q7e=function(t,e,n){return Dse(t.difference(e.center()),!1,n)},Y7e=function(t,e,n){return Dse(t.difference(e.center()),!0,n)},K7e=Object.freeze(Object.defineProperty({__proto__:null,bottom:j7e,inside:G7e,insideOriented:H7e,left:V7e,manual:R7e,outside:W7e,outsideOriented:U7e,radial:q7e,radialOriented:Y7e,right:B7e,top:z7e},Symbol.toStringTag,{value:"Module"})),Zg=pc.extend({markup:['<path class="connection" stroke="black" d="M 0 0 0 0"/>','<path class="marker-source" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="marker-target" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="connection-wrap" d="M 0 0 0 0"/>','<g class="labels"/>','<g class="marker-vertices"/>','<g class="marker-arrowheads"/>','<g class="link-tools"/>'].join(""),toolMarkup:['<g class="link-tool">','<g class="tool-remove" event="remove">','<circle r="11" />','<path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />',"<title>Remove link.</title>","</g>",'<g class="tool-options" event="link:options">','<circle r="11" transform="translate(25)"/>','<path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>',"<title>Link options.</title>","</g>","</g>"].join(""),doubleToolMarkup:void 0,vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>"].join(""),arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<path class="marker-arrowhead" end="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />',"</g>"].join(""),defaultLabel:void 0,labelMarkup:void 0,_builtins:{defaultLabel:{markup:[{tagName:"rect",selector:"rect"},{tagName:"text",selector:"text"}],attrs:{text:{fill:"#000000",fontSize:14,textAnchor:"middle",yAlignment:"middle",pointerEvents:"none"},rect:{ref:"text",fill:"#ffffff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}}},defaults:{type:"link",source:{},target:{}},isLink:function(){return!0},disconnect:function(t){return this.set({source:{x:0,y:0},target:{x:0,y:0}},t)},source:function(t,e,n){if(t===void 0)return Wu(this.get("source"));var r,i,o=t instanceof pc;if(o)return r=Wu(e)||{},r.id=t.id,i=n,this.set("source",r,i);var a=!Di(t);return a?(r=Wu(e)||{},r.x=t.x,r.y=t.y,i=n,this.set("source",r,i)):(r=t,i=e,this.set("source",r,i))},target:function(t,e,n){if(t===void 0)return Wu(this.get("target"));var r,i,o=t instanceof pc;if(o)return r=Wu(e)||{},r.id=t.id,i=n,this.set("target",r,i);var a=!Di(t);return a?(r=Wu(e)||{},r.x=t.x,r.y=t.y,i=n,this.set("target",r,i)):(r=t,i=e,this.set("target",r,i))},router:function(t,e,n){if(t===void 0){var r=this.get("router");return r?typeof r=="object"?Wu(r):r:this.get("manhattan")?{name:"orthogonal"}:null}var i=typeof t=="object"||typeof t=="function",o=i?t:{name:t,args:e},a=i?e:n;return this.set("router",o,a)},connector:function(t,e,n){if(t===void 0){var r=this.get("connector");return r?typeof r=="object"?Wu(r):r:this.get("smooth")?{name:"smooth"}:null}var i=typeof t=="object"||typeof t=="function",o=i?t:{name:t,args:e},a=i?e:n;return this.set("connector",o,a)},label:function(t,e,n){var r=this.labels();return t=isFinite(t)&&t!==null?t|0:0,t<0&&(t=r.length+t),arguments.length<=1?this.prop(["labels",t]):this.prop(["labels",t],e,n)},labels:function(t,e){return arguments.length===0?(t=this.get("labels"),Array.isArray(t)?t.slice():[]):(Array.isArray(t)||(t=[]),this.set("labels",t,e))},hasLabels:function(){const{labels:t}=this.attributes;return Array.isArray(t)&&t.length>0},insertLabel:function(t,e,n){if(!e)throw new Error("dia.Link: no label provided");var r=this.labels(),i=r.length;return t=isFinite(t)&&t!==null?t|0:i,t<0&&(t=i+t+1),r.splice(t,0,e),this.labels(r,n)},appendLabel:function(t,e){return this.insertLabel(-1,t,e)},removeLabel:function(t,e){var n=this.labels();return t=isFinite(t)&&t!==null?t|0:-1,n.splice(t,1),this.labels(n,e)},vertex:function(t,e,n){var r=this.vertices();if(t=isFinite(t)&&t!==null?t|0:0,t<0&&(t=r.length+t),arguments.length<=1)return this.prop(["vertices",t]);var i=this._normalizeVertex(e);return this.prop(["vertices",t],i,n)},vertices:function(t,e){if(arguments.length===0)return t=this.get("vertices"),Array.isArray(t)?t.slice():[];Array.isArray(t)||(t=[]);for(var n=[],r=0;r<t.length;r++){var i=t[r],o=this._normalizeVertex(i);n.push(o)}return this.set("vertices",n,e)},insertVertex:function(t,e,n){if(!e)throw new Error("dia.Link: no vertex provided");var r=this.vertices(),i=r.length;t=isFinite(t)&&t!==null?t|0:i,t<0&&(t=i+t+1);var o=this._normalizeVertex(e);return r.splice(t,0,o),this.vertices(r,n)},removeVertex:function(t,e){var n=this.vertices();return t=isFinite(t)&&t!==null?t|0:-1,n.splice(t,1),this.vertices(n,e)},_normalizeVertex:function(t){var e=!Di(t);return e?{x:t.x,y:t.y}:t},translate:function(t,e,n){return n=n||{},n.translateBy=n.translateBy||this.id,n.tx=t,n.ty=e,this.applyToPoints(function(r){return{x:(r.x||0)+t,y:(r.y||0)+e}},n)},scale:function(t,e,n,r){return this.applyToPoints(function(i){return we(i).scale(t,e,n).toJSON()},r)},applyToPoints:function(t,e){if(!br(t))throw new TypeError("dia.Link: applyToPoints expects its first parameter to be a function.");var n={},{source:r,target:i}=this.attributes;r.id||(n.source=t(r)),i.id||(n.target=t(i));var o=this.vertices();return o.length>0&&(n.vertices=o.map(t)),this.set(n,e)},getSourcePoint:function(){var t=this.getSourceCell();return t?t.getPointFromConnectedLink(this,"source"):new we(this.source())},getTargetPoint:function(){var t=this.getTargetCell();return t?t.getPointFromConnectedLink(this,"target"):new we(this.target())},getPointFromConnectedLink:function(){return this.getPolyline().pointAt(.5)},getPolyline:function(){const t=[this.getSourcePoint(),...this.vertices().map(we),this.getTargetPoint()];return new $r(t)},getBBox:function(){return this.getPolyline().bbox()},reparent:function(t){var e;if(this.graph){var n=this.getSourceElement(),r=this.getTargetElement(),i=this.getParentCell();n&&r&&(n===r||n.isEmbeddedIn(r)?e=r:r.isEmbeddedIn(n)?e=n:e=this.graph.getCommonAncestor(n,r)),i&&(!e||e.id!==i.id)&&i.unembed(this,t),e&&e.embed(this,t)}return e},hasLoop:function(t){t=t||{};var{source:e,target:n}=this.attributes,r=e.id,i=n.id;if(!r||!i)return!1;var o=r===i;if(!o&&t.deep&&this.graph){var a=this.getSourceCell(),s=this.getTargetCell();o=a.isEmbeddedIn(s)||s.isEmbeddedIn(a)}return o},getSourceCell:function(){const{graph:t,attributes:e}=this;var n=e.source;return n&&n.id&&t&&t.getCell(n.id)||null},getSourceElement:function(){var t=this,e={};do{if(e[t.id])return null;e[t.id]=!0,t=t.getSourceCell()}while(t&&t.isLink());return t},getTargetCell:function(){const{graph:t,attributes:e}=this;var n=e.target;return n&&n.id&&t&&t.getCell(n.id)||null},getTargetElement:function(){var t=this,e={};do{if(e[t.id])return null;e[t.id]=!0,t=t.getTargetCell()}while(t&&t.isLink());return t},getRelationshipAncestor:function(){var t;if(this.graph){var e=[this,this.getSourceElement(),this.getTargetElement()].filter(function(n){return!!n});t=this.graph.getCommonAncestor.apply(this.graph,e)}return t||null},isRelationshipEmbeddedIn:function(t){var e=Ko(t)||Ka(t)?t:t.id,n=this.getRelationshipAncestor();return!!n&&(n.id===e||n.isEmbeddedIn(e))},_getDefaultLabel:function(){var t=this.get("defaultLabel")||this.defaultLabel||{},e={};return e.markup=t.markup||this.get("labelMarkup")||this.labelMarkup,e.position=t.position,e.attrs=t.attrs,e.size=t.size,e}},{endsEqual:function(t,e){var n=t.port===e.port||!t.port&&!e.port;return t.id===e.id&&n}});var Mse=function(t){var e=vl(t)||{};this.ports=[],this.groups={},this.portLayoutNamespace=F7e,this.portLabelLayoutNamespace=K7e,this._init(e)};Mse.prototype={getPorts:function(){return this.ports},getGroup:function(t){return this.groups[t]||{}},getPortsByGroup:function(t){return this.ports.filter(function(e){return e.group===t})},getGroupPortsMetrics:function(t,e){var n=this.getGroup(t),r=this.getPortsByGroup(t),i=n.position||{},o=i.name,a=this.portLayoutNamespace;a[o]||(o="left");var s=i.args||{},l=r.map(function(f){return f&&f.position&&f.position.args}),u=a[o](l,e,s),c={ports:r,result:[]};return Dn(u).reduce((function(f,h,d){var g=f.ports[d];return f.result.push({portId:g.id,portTransformation:h,labelTransformation:this._getPortLabelLayout(g,we(h),e),portAttrs:g.attrs,portSize:g.size,labelSize:g.label.size}),f}).bind(this),c),c.result},_getPortLabelLayout:function(t,e,n){var r=this.portLabelLayoutNamespace,i=t.label.position.name||"left";return r[i]?r[i](e,n,t.label.position.args):null},_init:function(t){if(Jn(t.groups))for(var e=Object.keys(t.groups),n=0,r=e.length;n<r;n++){var i=e[n];this.groups[i]=this._evaluateGroup(t.groups[i])}for(var o=Dn(t.items),a=0,s=o.length;a<s;a++)this.ports.push(this._evaluatePort(o[a]))},_evaluateGroup:function(t){return Ri(t,{position:this._getPosition(t.position,!0),label:this._getLabel(t,!0)})},_evaluatePort:function(t){var e=Nt({},t),n=this.getGroup(t.group);return e.markup=e.markup||n.markup,e.attrs=Ri({},n.attrs,e.attrs),e.position=this._createPositionNode(n,e),e.label=Ri({},n.label,this._getLabel(e)),e.z=this._getZIndex(n,e),e.size=Nt({},n.size,e.size),e},_getZIndex:function(t,e){return Ka(e.z)?e.z:Ka(t.z)||t.z==="auto"?t.z:"auto"},_createPositionNode:function(t,e){return Ri({name:"left",args:{}},t.position,{args:e.args})},_getPosition:function(t,e){var n={},r;br(t)?(r="fn",n.fn=t):Ko(t)?r=t:t===void 0?r=e?"left":null:Array.isArray(t)?(r="absolute",n.x=t[0],n.y=t[1]):Jn(t)&&(r=t.name,Nt(n,t.args));var i={args:n};return r&&(i.name=r),i},_getLabel:function(t,e){var n=t.label||{},r=n;return r.position=this._getPosition(n.position,e),r}};const X7e={_initializePorts:function(){this._createPortData(),this.on("change:ports",function(){this._processRemovedPort(),this._createPortData()},this)},_processRemovedPort:function(){var t=this.get("ports")||{},e={};Dn(t.items).forEach(function(s){e[s.id]=!0});var n=this.previous("ports")||{},r={};Dn(n.items).forEach(function(s){e[s.id]||(r[s.id]=!0)});var i=this.graph;if(i&&!Eh(r)){var o=i.getConnectedLinks(this,{inbound:!0});o.forEach(function(s){r[s.get("target").port]&&s.remove()});var a=i.getConnectedLinks(this,{outbound:!0});a.forEach(function(s){r[s.get("source").port]&&s.remove()})}},hasPorts:function(){var t=this.prop("ports/items");return Array.isArray(t)&&t.length>0},hasPort:function(t){return this.getPortIndex(t)!==-1},getPorts:function(){return vl(this.prop("ports/items"))||[]},getGroupPorts:function(t){const e=Dn(this.prop(["ports","items"])).filter(n=>n.group===t);return vl(e)},getPort:function(t){return vl(Dn(this.prop("ports/items")).find(function(e){return e.id&&e.id===t}))},getPortsPositions:function(t){var e=this._portSettingsData.getGroupPortsMetrics(t,st(this.size()));return e.reduce(function(n,r){var i=r.portTransformation;return n[r.portId]={x:i.x,y:i.y,angle:i.angle},n},{})},getPortIndex:function(t){var e=Jn(t)?t.id:t;return this._isValidPortId(e)?Dn(this.prop("ports/items")).findIndex(function(n){return n.id===e}):-1},addPort:function(t,e){if(!Jn(t)||Array.isArray(t))throw new Error("Element: addPort requires an object.");var n=Nt([],this.prop("ports/items"));return n.push(t),this.prop("ports/items",n,e),this},insertPort:function(t,e,n){const r=typeof t=="number"?t:this.getPortIndex(t);if(!Jn(e)||Array.isArray(e))throw new Error("dia.Element: insertPort requires an object.");const i=Nt([],this.prop("ports/items"));return i.splice(r,0,e),this.prop("ports/items",i,n),this},portProp:function(t,e,n,r){var i=this.getPortIndex(t);if(i===-1)throw new Error("Element: unable to find port with id "+t);var o=Array.prototype.slice.call(arguments,1);return Array.isArray(e)?o[0]=["ports","items",i].concat(e):Ko(e)?o[0]=["ports/items/",i,"/",e].join(""):(o=["ports/items/"+i],Di(e)&&(o.push(e),o.push(n))),this.prop.apply(this,o)},_validatePorts:function(){var t=this.get("ports")||{},e=[];t=t||{};var n=Dn(t.items);return n.forEach(function(r){typeof r!="object"&&e.push("Element: invalid port ",r),this._isValidPortId(r.id)||(r.id=this.generatePortId())},this),OS(n,"id").length!==n.length&&e.push("Element: found id duplicities in ports."),e},generatePortId:function(){return this.generateId()},_isValidPortId:function(t){return t!=null&&!Jn(t)},addPorts:function(t,e){return t.length&&this.prop("ports/items",Nt([],this.prop("ports/items")).concat(t),e),this},removePort:function(t,e){const n=e||{},r=this.getPortIndex(t);if(r!==-1){const i=Nt([],this.prop(["ports","items"]));i.splice(r,1),n.rewrite=!0,this.startBatch("port-remove"),this.prop(["ports","items"],i,n),this.stopBatch("port-remove")}return this},removePorts:function(t,e){let n,r;if(Array.isArray(t)){if(n=e||{},t.length===0)return this.this;r=Nt([],this.prop(["ports","items"])).filter(function(o){return!t.some(function(a){const s=Jn(a)?a.id:a;return o.id===s})})}else n=t||{},r=[];return this.startBatch("port-remove"),n.rewrite=!0,this.prop(["ports","items"],r,n),this.stopBatch("port-remove"),this},_createPortData:function(){var t=this._validatePorts();if(t.length>0)throw this.set("ports",this.previous("ports")),new Error(t.join(" "));var e;this._portSettingsData&&(e=this._portSettingsData.getPorts()),this._portSettingsData=new Mse(this.get("ports"));var n=this._portSettingsData.getPorts();if(e){var r=n.filter(function(o){if(!e.find(function(a){return a.id===o.id}))return o}),i=e.filter(function(o){if(!n.find(function(a){return a.id===o.id}))return o});i.length>0&&this.trigger("ports:remove",this,i),r.length>0&&this.trigger("ports:add",this,r)}}},J7e={portContainerMarkup:"g",portMarkup:[{tagName:"circle",selector:"circle",attributes:{r:10,fill:"#FFFFFF",stroke:"#000000"}}],portLabelMarkup:[{tagName:"text",selector:"text",attributes:{fill:"#000000"}}],_portElementsCache:null,_initializePorts:function(){this._cleanPortsCache()},_refreshPorts:function(){this._removePorts(),this._cleanPortsCache(),this._renderPorts()},_cleanPortsCache:function(){this._portElementsCache={}},_renderPorts:function(){for(var t=[],e=this._getContainerElement(),n=0,r=e.node.childNodes.length;n<r;n++)t.push(e.node.childNodes[n]);var i=a7e(this.model._portSettingsData.getPorts(),"z"),o="auto";Dn(i[o]).forEach(function(c){var f=this._getPortElement(c);e.append(f),t.push(f)},this);for(var a=Object.keys(i),s=0;s<a.length;s++){var l=a[s];if(l!==o){var u=parseInt(l,10);this._appendPorts(i[l],u,t)}}this._updatePorts()},_getContainerElement:function(){return this.rotatableNode||this.vel},_appendPorts:function(t,e,n){var r=this._getContainerElement(),i=Dn(t).map(this._getPortElement,this);n[e]||e<0?Ue(n[Math.max(e,0)]).before(i):r.append(i)},_getPortElement:function(t){return this._portElementsCache[t.id]?this._portElementsCache[t.id].portElement:this._createPortElement(t)},findPortNode:function(t,e){const n=this._portElementsCache[t];if(!n)return null;if(!e)return n.portContentElement.node;const r=n.portElement.node,i=n.portSelectors,[o=null]=this.findBySelector(e,r,i);return o},_updatePorts:function(){this._updatePortGroup(void 0);var t=Object.keys(this.model._portSettingsData.groups);t.forEach(this._updatePortGroup,this)},_removePorts:function(){cu(this._portElementsCache,"portElement.remove")},_createPortElement:function(t){let e,n,r,i;var o=Ue(this.portContainerMarkup).addClass("joint-port"),a=this._getPortMarkup(t);if(Array.isArray(a)){var s=this.parseDOMJSON(a,o.node),l=s.fragment;l.childNodes.length>1?e=Ue("g").append(l):e=Ue(l.firstChild),i=s.selectors}else e=Ue(a),Array.isArray(e)&&(e=Ue("g").append(e));if(!e)throw new Error("ElementView: Invalid port markup.");e.attr({port:t.id,"port-group":t.group});const u=this._getPortLabelMarkup(t.label);if(Array.isArray(u)){const{fragment:y,selectors:_}=this.parseDOMJSON(u,o.node),v=y.childNodes.length;v>0&&(r=_,n=v===1?Ue(y.firstChild):Ue("g").append(y))}else n=Ue(u),Array.isArray(n)&&(n=Ue("g").append(n));var c;if(i&&r){for(var f in r)if(i[f]&&f!==this.selector)throw new Error("ElementView: selectors within port must be unique.");c=Nt({},i,r)}else c=i||r||{};const h="portRoot",d="labelRoot",g="labelText";if(h in c||(c[h]=e.node),n){const y=n.node;if(d in c||(c[d]=y),!(g in c)){const _=n.tagName()==="TEXT"?y:Array.from(y.querySelectorAll("text"));c[g]=_,r||(r={}),r[g]=_}}return o.append(e.addClass("joint-port-body")),n&&o.append(n.addClass("joint-port-label")),this._portElementsCache[t.id]={portElement:o,portLabelElement:n,portSelectors:c,portLabelSelectors:r,portContentElement:e,portContentSelectors:i},o},_updatePortGroup:function(t){for(var e=st(this.model.size()),n=this.model._portSettingsData.getGroupPortsMetrics(t,e),r=0,i=n.length;r<i;r++){var o=n[r],a=o.portId,s=this._portElementsCache[a]||{},l=o.portTransformation,u=o.labelTransformation;u&&s.portLabelElement&&(this.updateDOMSubtreeAttributes(s.portLabelElement.node,u.attrs,{rootBBox:new st(o.labelSize),selectors:s.portLabelSelectors}),this.applyPortTransform(s.portLabelElement,u,-l.angle||0)),this.updateDOMSubtreeAttributes(s.portElement.node,o.portAttrs,{rootBBox:new st(o.portSize),selectors:s.portSelectors}),this.applyPortTransform(s.portElement,l)}},applyPortTransform:function(t,e,n){var r=Ue.createSVGMatrix().rotate(n||0).translate(e.x||0,e.y||0).rotate(e.angle||0);t.transform(r,{absolute:!0})},_getPortMarkup:function(t){return t.markup||this.model.get("portMarkup")||this.model.portMarkup||this.portMarkup},_getPortLabelMarkup:function(t){return t.markup||this.model.get("portLabelMarkup")||this.model.portLabelMarkup||this.portLabelMarkup}},oa=pc.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},initialize:function(){this._initializePorts(),pc.prototype.initialize.apply(this,arguments)},_initializePorts:function(){},_refreshPorts:function(){},isElement:function(){return!0},position:function(t,e,n){const r=Ka(e);n=(r?n:t)||{};const{parentRelative:i,deep:o,restrictedArea:a}=n;let s;if(i){if(!this.graph)throw new Error("Element must be part of a graph.");const l=this.getParentCell();l&&!l.isLink()&&(s=l.get("position"))}if(r){if(s&&(t+=s.x,e+=s.y),o||a){const{x:l,y:u}=this.get("position");this.translate(t-l,e-u,n)}else this.set("position",{x:t,y:e},n);return this}else{const l=we(this.get("position"));return i?l.difference(s):l}},translate:function(t,e,n){if(t=t||0,e=e||0,t===0&&e===0)return this;n=n||{},n.translateBy=n.translateBy||this.id;var r=this.get("position")||{x:0,y:0},i=n.restrictedArea;if(i&&n.translateBy===this.id)if(typeof i=="function"){var o=i.call(this,r.x+t,r.y+e,n);t=o.x-r.x,e=o.y-r.y}else{var a=this.getBBox({deep:!0}),s=r.x-a.x,l=r.y-a.y,u=Math.max(i.x+s,Math.min(i.x+i.width+s-a.width,r.x+t)),c=Math.max(i.y+l,Math.min(i.y+i.height+l-a.height,r.y+e));t=u-r.x,e=c-r.y}var f={x:r.x+t,y:r.y+e};return n.tx=t,n.ty=e,n.transition?(Jn(n.transition)||(n.transition={}),this.transition("position",f,Nt({},n.transition,{valueFunction:Cse.object})),cu(this.getEmbeddedCells(),"translate",t,e,n)):(this.startBatch("translate",n),this.set("position",f,n),cu(this.getEmbeddedCells(),"translate",t,e,n),this.stopBatch("translate",n)),this},size:function(t,e,n){var r=this.get("size");return t===void 0?{width:r.width,height:r.height}:(Jn(t)&&(n=e,e=Ka(t.height)?t.height:r.height,t=Ka(t.width)?t.width:r.width),this.resize(t,e,n))},resize:function(t,e,n){if(n=n||{},this.startBatch("resize",n),n.direction){var r=this.get("size");switch(n.direction){case"left":case"right":e=r.height;break;case"top":case"bottom":t=r.width;break}var i=_c(this.get("angle")||0),o=this.getBBox(),a;if(i){var s={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[n.direction];n.absolute&&(s+=Math.floor((i+45)/90),s%=4);var l=o[["bottomLeft","corner","topRight","origin"][s]](),u=we(l).rotate(o.center(),-i),c=Math.sqrt(t*t+e*e)/2,f=s*Math.PI/2;f+=Math.atan(s%2==0?e/t:t/e),f-=ss(i);var h=we.fromPolar(c,f,u);a=we(h).offset(t/-2,e/-2)}else switch(a=o.topLeft(),n.direction){case"top":case"top-right":a.offset(0,o.height-e);break;case"left":case"bottom-left":a.offset(o.width-t,0);break;case"top-left":a.offset(o.width-t,o.height-e);break}this.set("size",{width:t,height:e},n),this.position(a.x,a.y,n)}else this.set("size",{width:t,height:e},n);return this.stopBatch("resize",n),this},scale:function(t,e,n,r){var i=this.getBBox().scale(t,e,n);return this.startBatch("scale",r),this.position(i.x,i.y,r),this.resize(i.width,i.height,r),this.stopBatch("scale"),this},fitEmbeds:function(t){return this.fitToChildren(t)},fitToChildren:function(t={}){const{graph:e}=this;if(!e)throw new Error("Element must be part of a graph.");const n=this.getEmbeddedCells().filter(r=>r.isElement());return n.length===0?this:(this.startBatch("fit-embeds",t),t.deep&&cu(n,"fitToChildren",t),this._fitToElements(Object.assign({elements:n},t)),this.stopBatch("fit-embeds"),this)},fitParent:function(t={}){const{graph:e}=this;if(!e)throw new Error("Element must be part of a graph.");if(t.deep&&t.terminator&&(t.terminator===this||t.terminator===this.id))return this;const n=this.getParentCell();if(!n||!n.isElement())return this;const r=n.getEmbeddedCells().filter(i=>i.isElement());return r.length===0?this:(this.startBatch("fit-parent",t),n._fitToElements(Object.assign({elements:r},t)),t.deep&&n.fitParent(t),this.stopBatch("fit-parent"),this)},_fitToElements:function(t={}){const e=this.graph.getCellsBBox(t.elements);if(!e)return;const{expandOnly:n,shrinkOnly:r}=t;if(n&&r)return;let{x:i,y:o,width:a,height:s}=e;const{left:l,right:u,top:c,bottom:f}=$g(t.padding);i-=l,o-=c,a+=l+u,s+=f+c;let h=new st(i,o,a,s);if(n)h=this.getBBox().union(h);else if(r){const d=this.getBBox().intersect(h);if(!d)return;h=d}this.set({position:{x:h.x,y:h.y},size:{width:h.width,height:h.height}},t)},rotate:function(t,e,n,r){if(n){var i=this.getBBox().center(),o=this.get("size"),a=this.get("position");i.rotate(n,this.get("angle")-t);var s=i.x-o.width/2-a.x,l=i.y-o.height/2-a.y;this.startBatch("rotate",{angle:t,absolute:e,origin:n}),this.position(a.x+s,a.y+l,r),this.rotate(t,e,null,r),this.stopBatch("rotate")}else this.set("angle",e?t:(this.get("angle")+t)%360,r);return this},angle:function(){return _c(this.get("angle")||0)},getBBox:function(t={}){const{graph:e,attributes:n}=this,{deep:r,rotate:i}=t;if(r&&e){const f=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return f.push(this),e.getCellsBBox(f,t)}const{angle:o=0,position:{x:a,y:s},size:{width:l,height:u}}=n,c=new st(a,s,l,u);return i&&c.rotateAroundCenter(o),c},getPointFromConnectedLink:function(t,e){var n=this.getBBox(),r=n.center(),i=t.get(e);if(!i)return r;var o=i.port;if(!o||!this.hasPort(o))return r;var a=this.portProp(o,["group"]),s=this.getPortsPositions(a),l=new we(s[o]).offset(n.origin()),u=this.angle();return u&&l.rotate(r,-u),l}});Nt(oa.prototype,X7e);const Z7e=Go.Collection.extend({initialize:function(t,e){e.cellNamespace?this.cellNamespace=e.cellNamespace:this.cellNamespace=typeof joint<"u"&&cf(joint,"shapes")?joint.shapes:null,this.graph=e.graph},model:function(t,e){var n=e.collection,r=n.cellNamespace,i=t.type==="link"?Zg:x_(r,t.type,".")||oa,o=new i(t,e);return e.dry||(o.graph=n.graph),o},comparator:function(t){return t.get("z")||0}}),ff=Go.Model.extend({initialize:function(t,e){e=e||{};var n=new Z7e([],{model:e.cellModel,cellNamespace:e.cellNamespace,graph:this});Go.Model.prototype.set.call(this,"cells",n),n.on("all",this.trigger,this),this.on("change:z",this._sortOnChangeZ,this),this._out={},this._in={},this._nodes={},this._edges={},this._batches={},n.on("add",this._restructureOnAdd,this),n.on("remove",this._restructureOnRemove,this),n.on("reset",this._restructureOnReset,this),n.on("change:source",this._restructureOnChangeSource,this),n.on("change:target",this._restructureOnChangeTarget,this),n.on("remove",this._removeCell,this)},_sortOnChangeZ:function(){this.get("cells").sort()},_restructureOnAdd:function(t){if(t.isLink()){this._edges[t.id]=!0;var{source:e,target:n}=t.attributes;e.id&&((this._out[e.id]||(this._out[e.id]={}))[t.id]=!0),n.id&&((this._in[n.id]||(this._in[n.id]={}))[t.id]=!0)}else this._nodes[t.id]=!0},_restructureOnRemove:function(t){if(t.isLink()){delete this._edges[t.id];var{source:e,target:n}=t.attributes;e.id&&this._out[e.id]&&this._out[e.id][t.id]&&delete this._out[e.id][t.id],n.id&&this._in[n.id]&&this._in[n.id][t.id]&&delete this._in[n.id][t.id]}else delete this._nodes[t.id]},_restructureOnReset:function(t){t=t.models,this._out={},this._in={},this._nodes={},this._edges={},t.forEach(this._restructureOnAdd,this)},_restructureOnChangeSource:function(t){var e=t.previous("source");e.id&&this._out[e.id]&&delete this._out[e.id][t.id];var n=t.attributes.source;n.id&&((this._out[n.id]||(this._out[n.id]={}))[t.id]=!0)},_restructureOnChangeTarget:function(t){var e=t.previous("target");e.id&&this._in[e.id]&&delete this._in[e.id][t.id];var n=t.get("target");n.id&&((this._in[n.id]||(this._in[n.id]={}))[t.id]=!0)},getOutboundEdges:function(t){return this._out&&this._out[t]||{}},getInboundEdges:function(t){return this._in&&this._in[t]||{}},toJSON:function(){var t=Go.Model.prototype.toJSON.apply(this,arguments);return t.cells=this.get("cells").toJSON(),t},fromJSON:function(t,e){if(!t.cells)throw new Error("Graph JSON must contain cells array.");return this.set(t,e)},set:function(t,e,n){var r;return typeof t=="object"?(r=t,n=e):(r={})[t]=e,r.hasOwnProperty("cells")&&(this.resetCells(r.cells,n),r=Ig(r,"cells")),Go.Model.prototype.set.call(this,r,n)},clear:function(t){t=Nt({},t,{clear:!0});var e=this.get("cells");if(e.length===0)return this;this.startBatch("clear",t);var n=e.sortBy(function(r){return r.isLink()?1:2});do n.shift().remove(t);while(n.length>0);return this.stopBatch("clear"),this},_prepareCell:function(t,e){var n;if(t instanceof Go.Model?(n=t.attributes,!t.graph&&(!e||!e.dry)&&(t.graph=this)):n=t,!Ko(n.type))throw new TypeError("dia.Graph: cell type must be a string.");return t},minZIndex:function(){var t=this.get("cells").first();return t&&t.get("z")||0},maxZIndex:function(){var t=this.get("cells").last();return t&&t.get("z")||0},addCell:function(t,e){return Array.isArray(t)?this.addCells(t,e):(t instanceof Go.Model?t.has("z")||t.set("z",this.maxZIndex()+1):t.z===void 0&&(t.z=this.maxZIndex()+1),this.get("cells").add(this._prepareCell(t,e),e||{}),this)},addCells:function(t,e){return t.length===0?this:(t=s7e(t),e.maxPosition=e.position=t.length-1,this.startBatch("add",e),t.forEach(function(n){this.addCell(n,e),e.position--},this),this.stopBatch("add",e),this)},resetCells:function(t,e){var n=Dn(t).map(function(r){return this._prepareCell(r,e)},this);return this.get("cells").reset(n,e),this},removeCells:function(t,e){return t.length&&(this.startBatch("remove"),cu(t,"remove",e),this.stopBatch("remove")),this},_removeCell:function(t,e,n){n=n||{},n.clear||(n.disconnectLinks?this.disconnectLinks(t,n):this.removeLinks(t,n)),this.get("cells").remove(t,{silent:!0}),t.graph===this&&(t.graph=null)},getCell:function(t){return this.get("cells").get(t)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return this.get("cells").filter(t=>t.isElement())},getLinks:function(){return this.get("cells").filter(t=>t.isLink())},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(t,e){e=e||{};var n=e.indirect,r=e.inbound,i=e.outbound;r===void 0&&i===void 0&&(r=i=!0);var o=[],a={};i&&s(this,t),r&&l(this,t);function s(f,h){if(yl(f.getOutboundEdges(h.id),(function(g,y){if(!a[y]){var _=f.getCell(y);o.push(_),a[y]=!0,n&&(r&&l(f,_),i&&s(f,_))}}).bind(f)),n&&h.isLink()){var d=h.getTargetCell();d&&d.isLink()&&(a[d.id]||(o.push(d),s(f,d)))}}function l(f,h){if(yl(f.getInboundEdges(h.id),(function(g,y){if(!a[y]){var _=f.getCell(y);o.push(_),a[y]=!0,n&&(r&&l(f,_),i&&s(f,_))}}).bind(f)),n&&h.isLink()){var d=h.getSourceCell();d&&d.isLink()&&(a[d.id]||(o.push(d),l(f,d)))}}if(e.deep){var u=t.getEmbeddedCells({deep:!0}),c={};u.forEach(function(f){f.isElement()&&(c[f.id]=!0)}),u.forEach(function(f){f.isLink()||(i&&yl(this.getOutboundEdges(f.id),(function(h,d){if(!a[d]){var g=this.getCell(d),{source:y,target:_}=g.attributes,v=y.id,S=_.id;if(!e.includeEnclosed&&v&&c[v]&&S&&c[S])return;o.push(this.getCell(d)),a[d]=!0}}).bind(this)),r&&yl(this.getInboundEdges(f.id),(function(h,d){if(!a[d]){var g=this.getCell(d),{source:y,target:_}=g.attributes,v=y.id,S=_.id;if(!e.includeEnclosed&&v&&c[v]&&S&&c[S])return;o.push(this.getCell(d)),a[d]=!0}}).bind(this)))},this)}return o},getNeighbors:function(t,e){e||(e={});var n=e.inbound,r=e.outbound;n===void 0&&r===void 0&&(n=r=!0);var i=this.getConnectedLinks(t,e).reduce((function(s,l){var{source:u,target:c}=l.attributes,f=l.hasLoop(e);if(n&&cf(u,"id")&&!s[u.id]){var h=this.getCell(u.id);h.isElement()&&(f||h&&h!==t&&(!e.deep||!h.isEmbeddedIn(t)))&&(s[u.id]=h)}if(r&&cf(c,"id")&&!s[c.id]){var d=this.getCell(c.id);d.isElement()&&(f||d&&d!==t&&(!e.deep||!d.isEmbeddedIn(t)))&&(s[c.id]=d)}return s}).bind(this),{});if(t.isLink()){if(n){var o=t.getSourceCell();o&&o.isElement()&&!i[o.id]&&(i[o.id]=o)}if(r){var a=t.getTargetCell();a&&a.isElement()&&!i[a.id]&&(i[a.id]=a)}}return Dn(i)},getCommonAncestor:function(){var t=Array.from(arguments).map(function(n){for(var r=[],i=n.get("parent");i;)r.push(i),i=this.getCell(i).get("parent");return r},this);t=t.sort(function(n,r){return n.length-r.length});var e=Dn(t.shift()).find(function(n){return t.every(function(r){return r.includes(n)})});return this.getCell(e)},getSuccessors:function(t,e){e=e||{};var n=[];return this.search(t,function(r){r!==t&&n.push(r)},Nt({},e,{outbound:!0})),n},cloneCells:kse,cloneSubgraph:function(t,e){var n=this.getSubgraph(t,e);return this.cloneCells(n)},getSubgraph:function(t,e){e=e||{};var n=[],r={},i=[],o=[];return Dn(t).forEach(function(a){if(r[a.id]||(n.push(a),r[a.id]=a,a.isLink()?o.push(a):i.push(a)),e.deep){var s=a.getEmbeddedCells({deep:!0});s.forEach(function(l){r[l.id]||(n.push(l),r[l.id]=l,l.isLink()?o.push(l):i.push(l))})}}),o.forEach(function(a){var{source:s,target:l}=a.attributes;if(s.id&&!r[s.id]){var u=this.getCell(s.id);n.push(u),r[u.id]=u,i.push(u)}if(l.id&&!r[l.id]){var c=this.getCell(l.id);n.push(this.getCell(l.id)),r[c.id]=c,i.push(c)}},this),i.forEach(function(a){var s=this.getConnectedLinks(a,e);s.forEach(function(l){var{source:u,target:c}=l.attributes;!r[l.id]&&u.id&&r[u.id]&&c.id&&r[c.id]&&(n.push(l),r[l.id]=l)})},this),n},getPredecessors:function(t,e){e=e||{};var n=[];return this.search(t,function(r){r!==t&&n.push(r)},Nt({},e,{inbound:!0})),n},search:function(t,e,n){n=n||{},n.breadthFirst?this.bfs(t,e,n):this.dfs(t,e,n)},bfs:function(t,e,n={}){const r={},i={},o=[];for(o.push(t),i[t.id]=0;o.length>0;){var a=o.shift();if(r[a.id]||(r[a.id]=!0,e.call(this,a,i[a.id])===!1))continue;const s=this.getNeighbors(a,n);for(let l=0,u=s.length;l<u;l++){const c=s[l];i[c.id]=i[a.id]+1,o.push(c)}}},dfs:function(t,e,n={}){const r={},i={},o=[];for(o.push(t),i[t.id]=0;o.length>0;){const a=o.pop();if(r[a.id]||(r[a.id]=!0,e.call(this,a,i[a.id])===!1))continue;const s=this.getNeighbors(a,n),l=o.length;for(let u=0,c=s.length;u<c;u++){const f=s[u];i[f.id]=i[a.id]+1,o.splice(l,0,f)}}},getSources:function(){var t=[];return yl(this._nodes,(function(e,n){(!this._in[n]||Eh(this._in[n]))&&t.push(this.getCell(n))}).bind(this)),t},getSinks:function(){var t=[];return yl(this._nodes,(function(e,n){(!this._out[n]||Eh(this._out[n]))&&t.push(this.getCell(n))}).bind(this)),t},isSource:function(t){return!this._in[t.id]||Eh(this._in[t.id])},isSink:function(t){return!this._out[t.id]||Eh(this._out[t.id])},isSuccessor:function(t,e){var n=!1;return this.search(t,function(r){if(r===e&&r!==t)return n=!0,!1},{outbound:!0}),n},isPredecessor:function(t,e){var n=!1;return this.search(t,function(r){if(r===e&&r!==t)return n=!0,!1},{inbound:!0}),n},isNeighbor:function(t,e,n){n=n||{};var r=n.inbound,i=n.outbound;r===void 0&&i===void 0&&(r=i=!0);var o=!1;return this.getConnectedLinks(t,n).forEach(function(a){var{source:s,target:l}=a.attributes;if(r&&cf(s,"id")&&s.id===e.id||i&&cf(l,"id")&&l.id===e.id)return o=!0,!1}),o},disconnectLinks:function(t,e){this.getConnectedLinks(t).forEach(function(n){n.set(n.attributes.source.id===t.id?"source":"target",{x:0,y:0},e)})},removeLinks:function(t,e){cu(this.getConnectedLinks(t),"remove",e)},findModelsFromPoint:function(t){return this.getElements().filter(e=>e.getBBox({rotate:!0}).containsPoint(t))},findModelsInArea:function(t,e={}){const n=new st(t),{strict:r=!1}=e,i=r?"containsRect":"intersect";return this.getElements().filter(o=>n[i](o.getBBox({rotate:!0})))},findModelsUnderElement:function(t,e={}){const{searchBy:n="bbox"}=e,r=t.getBBox().rotateAroundCenter(t.angle());return(n==="bbox"?this.findModelsInArea(r):this.findModelsFromPoint(Ese(r,n))).filter(o=>t.id!==o.id&&!o.isEmbeddedIn(t))},getBBox:function(){return this.getCellsBBox(this.getCells())},getCellsBBox:function(t,e={}){const{rotate:n=!0}=e;return Dn(t).reduce(function(r,i){const o=i.getBBox({rotate:n});return o?r?r.union(o):o:r},null)},translate:function(t,e,n){var r=this.getCells().filter(function(i){return!i.isEmbedded()});return cu(r,"translate",t,e,n),this},resize:function(t,e,n){return this.resizeCells(t,e,this.getCells(),n)},resizeCells:function(t,e,n,r){var i=this.getCellsBBox(n);if(i){var o=Math.max(t/i.width,0),a=Math.max(e/i.height,0);cu(n,"scale",o,a,i.origin(),r)}return this},startBatch:function(t,e){return e=e||{},this._batches[t]=(this._batches[t]||0)+1,this.trigger("batch:start",Nt({},e,{batchName:t}))},stopBatch:function(t,e){return e=e||{},this._batches[t]=(this._batches[t]||0)-1,this.trigger("batch:stop",Nt({},e,{batchName:t}))},hasActiveBatch:function(t){const e=this._batches;let n;return arguments.length===0?n=Object.keys(e):Array.isArray(t)?n=t:n=[t],n.some(r=>e[r]>0)}},{validations:{multiLinks:function(t,e){var{source:n,target:r}=e.attributes;if(n.id&&r.id){var i=e.getSourceCell();if(i){var o=t.getConnectedLinks(i,{outbound:!0}),a=o.filter(function(s){var{source:l,target:u}=s.attributes;return l&&l.id===n.id&&(!l.port||l.port===n.port)&&u&&u.id===r.id&&(!u.port||u.port===r.port)});if(a.length>1)return!1}}return!0},linkPinning:function(t,e){var{source:n,target:r}=e.attributes;return n.id&&r.id}}});A7e(ff.prototype,["resetCells","addCells","removeCells"],vD.cells);const Dp={},bf=Go.View.extend({options:{},theme:null,themeClassNamePrefix:au("theme-"),requireSetThemeOverride:!1,defaultTheme:dc.defaultTheme,children:null,childNodes:null,DETACHABLE:!0,UPDATE_PRIORITY:2,FLAG_INSERT:1<<30,FLAG_REMOVE:1<<29,FLAG_INIT:1<<28,constructor:function(t){this.requireSetThemeOverride=t&&!!t.theme,this.options=Nt({},this.options,t),Go.View.call(this,t)},initialize:function(){Dp[this.cid]=this,this.setTheme(this.options.theme||this.defaultTheme),this.init()},unmount:function(){this.svgElement?this.vel.remove():this.$el.remove()},isMounted:function(){return this.el.parentNode!==null},renderChildren:function(t){if(t||(t=Mi(this,"children")),t){var e=this.svgElement,n=Ue.namespace[e?"svg":"xhtml"],r=_T(t,n);(e?this.vel:this.$el).empty().append(r.fragment),this.childNodes=r.selectors}return this},findAttribute:function(t,e){for(var n=e;n&&n.nodeType===1;){var r=n.getAttribute(t);if(r)return r;if(n===this.el)return null;n=n.parentNode}return null},_ensureElement:function(){if(this.el)this.setElement(Mi(this,"el"));else{var t=Mi(this,"tagName"),e=Nt({},Mi(this,"attributes")),n=Nt({},Mi(this,"style"));this.id&&(e.id=Mi(this,"id")),this.setElement(this._createElement(t)),this._setAttributes(e),this._setStyle(n)}this._ensureElClassName()},_setAttributes:function(t){this.svgElement?this.vel.attr(t):this.$el.attr(t)},_setStyle:function(t){this.$el.css(t)},_createElement:function(t){return this.svgElement?document.createElementNS(Ue.namespace.svg,t):document.createElement(t)},_setElement:function(t){this.$el=t instanceof Go.$?t:Go.$(t),this.el=this.$el[0],this.svgElement&&(this.vel=Ue(this.el))},_ensureElClassName:function(){var t=Mi(this,"className");if(t){var e=au(t);this.svgElement?this.vel.removeClass(t).addClass(e):this.$el.removeClass(t).addClass(e)}},init:function(){},onRender:function(){},confirmUpdate:function(){return 0},setTheme:function(t,e){return e=e||{},this.theme&&this.requireSetThemeOverride&&!e.override?this:(this.removeThemeClassName(),this.addThemeClassName(t),this.onSetTheme(this.theme,t),this.theme=t,this)},addThemeClassName:function(t){if(t=t||this.theme,!t)return this;var e=this.themeClassNamePrefix+t;return this.svgElement?this.vel.addClass(e):this.$el.addClass(e),this},removeThemeClassName:function(t){t=t||this.theme;var e=this.themeClassNamePrefix+t;return this.svgElement?this.vel.removeClass(e):this.$el.removeClass(e),this},onSetTheme:function(t,e){},remove:function(){return this.onRemove(),this.undelegateDocumentEvents(),Dp[this.cid]=null,Go.View.prototype.remove.apply(this,arguments),this},onRemove:function(){},getEventNamespace:function(){return".joint-event-ns-"+this.cid},delegateElementEvents:function(t,e,n){if(!e)return this;n||(n={});var r=this.getEventNamespace();for(var i in e){var o=e[i];typeof o!="function"&&(o=this[o]),o&&Vn(t).on(i+r,n,o.bind(this))}return this},undelegateElementEvents:function(t){return Vn(t).off(this.getEventNamespace()),this},delegateDocumentEvents:function(t,e){return t||(t=Mi(this,"documentEvents")),this.delegateElementEvents(document,t,e)},undelegateDocumentEvents:function(){return this.undelegateElementEvents(document)},eventData:function(t,e){if(!t)throw new Error("eventData(): event object required.");var n=t.data,r="__"+this.cid+"__";return e===void 0?n?n[r]||{}:{}:(n||(n=t.data={}),n[r]||(n[r]={}),Nt(n[r],e),this)},stopPropagation:function(t){return this.eventData(t,{propagationStopped:!0}),this},isPropagationStopped:function(t){return!!this.eventData(t).propagationStopped}},{extend:function(){var t=Array.from(arguments),e=t[0]&&Nt({},t[0])||{},n=t[1]&&Nt({},t[1])||{},r=e.render||this.prototype&&this.prototype.render||null;return e.render=function(){return typeof r=="function"&&r.apply(this,arguments),this.render.__render__===r&&this.onRender(),this},e.render.__render__=r,Go.View.extend.call(this,e,n)}}),NW="dbltap";if(Vn.event&&!(NW in Vn.event.special)){const t=dc.doubleTapInterval,e=30;Vn.event.special[NW]={bindType:"touchend",delegateType:"touchend",handle:function(n,...r){const{handleObj:i,target:o}=n,a=Vn.data(o),s=new Date().getTime(),l="lastTouch"in a?s-a.lastTouch:0;l<t&&l>e?(a.lastTouch=null,n.type=i.origType,i.handler.call(this,n,...r)):a.lastTouch=s}}}const bl={CELLS:"cells",BACK:"back",FRONT:"front",TOOLS:"tools",LABELS:"labels"},Q7e=bf.extend({tagName:"g",svgElement:!0,pivotNodes:null,defaultTheme:null,options:{name:""},className:function(){return au(`${this.options.name}-layer`)},init:function(){this.pivotNodes={}},insertSortedNode:function(t,e){this.el.insertBefore(t,this.insertPivot(e))},insertNode:function(t){const{el:e}=this;t.parentNode!==e&&e.appendChild(t)},insertPivot:function(t){const{el:e,pivotNodes:n}=this;t=+t,t||(t=0);let r=n[t];if(r)return r;r=n[t]=document.createComment("z-index:"+(t+1));let i=-1/0;for(let o in n)o=+o,o<t&&o>i&&(i=o,t-1);if(i!==-1/0){const o=n[i];e.insertBefore(r,o.nextSibling)}else e.insertBefore(r,e.firstChild);return r},removePivots:function(){const{el:t,pivotNodes:e}=this;for(let n in e)t.removeChild(e[n]);this.pivotNodes={}}});function ub(t){return t?Array.isArray(t)?t:[t]:[]}const su=bf.extend({tagName:"g",svgElement:!0,className:"highlight",HIGHLIGHT_FLAG:1,UPDATE_PRIORITY:3,DETACHABLE:!1,UPDATABLE:!0,MOUNTABLE:!0,cellView:null,nodeSelector:null,node:null,updateRequested:!1,postponedUpdate:!1,transformGroup:null,detachedTransformGroup:null,requestUpdate(t,e){const{paper:n}=t;this.cellView=t,this.nodeSelector=e,n&&(this.updateRequested=!0,n.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY))},confirmUpdate(){this.updateRequested=!1;const{cellView:t,nodeSelector:e}=this;return t.isMounted()?(this.update(t,e),this.mount(),this.transform(),0):(this.postponedUpdate=!0,0)},findNode(t,e=null){let n;if(typeof e=="string")[n]=t.findBySelector(e);else if(Di(e)){const r=t.model.isLink(),{label:i=null,port:o,selector:a}=e;r&&i!==null?n=t.findLabelNode(i,a):!r&&o?n=t.findPortNode(o,a):[n]=t.findBySelector(a)}else e&&(n=Ue.toNode(e),n instanceof SVGElement||(n=null));return n||null},getNodeMatrix(t,e){const{options:n}=this,{layer:r}=n,{rotatableNode:i}=t,o=t.getNodeMatrix(e);return i?r?i.contains(e)?o:t.getRootRotateMatrix().inverse().multiply(o):t.getNodeRotateMatrix(e).multiply(o):o},mount(){const{MOUNTABLE:t,cellView:e,el:n,options:r,transformGroup:i,detachedTransformGroup:o,postponedUpdate:a,nodeSelector:s}=this;if(!t||i)return;if(a){this.update(e,s),this.transform();return}const{vel:l,paper:u}=e,{layer:c}=r;if(c){let f;o?(f=o,this.detachedTransformGroup=null):f=Ue("g").addClass("highlight-transform").append(n),this.transformGroup=f,u.getLayerView(c).insertSortedNode(f.node,r.z)}else(!n.parentNode||n.nextSibling)&&l.append(n)},unmount(){const{MOUNTABLE:t,transformGroup:e,vel:n}=this;t&&(e?(this.transformGroup=null,this.detachedTransformGroup=e,e.remove()):n.remove())},transform(){const{transformGroup:t,cellView:e,updateRequested:n}=this;if(!t||e.model.isLink()||n)return;const r=e.getRootTranslateMatrix(),i=e.getRootRotateMatrix(),o=r.multiply(i);t.attr("transform",Ue.matrixToTransformString(o))},update(){const{node:t,cellView:e,nodeSelector:n,updateRequested:r,id:i}=this;if(r)return;this.postponedUpdate=!1;const o=this.node=this.findNode(e,n);t&&this.unhighlight(e,t),o?(this.highlight(e,o),this.mount()):(this.unmount(),e.notify("cell:highlight:invalid",i,this))},onRemove(){const{node:t,cellView:e,id:n,constructor:r}=this;t&&this.unhighlight(e,t),this.unmount(),r._removeRef(e,n)},highlight(t,e){},unhighlight(t,e){},listenToUpdateAttributes(t){const e=Mi(this,"UPDATE_ATTRIBUTES");!Array.isArray(e)||e.length===0||this.listenTo(t.model,"change",this.onCellAttributeChange)},onCellAttributeChange(){const{cellView:t}=this;if(!t)return;const{model:e,paper:n}=t;Mi(this,"UPDATE_ATTRIBUTES").some(i=>e.hasChanged(i))&&n.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY)}},{_views:{},highlight:function(t,e,n){const r=this.uniqueId(e,n);this.add(t,e,r,n)},unhighlight:function(t,e,n){const r=this.uniqueId(e,n);this.remove(t,r)},get(t,e=null){const{cid:n}=t,{_views:r}=this,i=r[n];if(e===null){const o=[];if(!i)return o;for(let a in i){const s=i[a];s instanceof this&&o.push(s)}return o}else{if(!i)return null;if(e in i){const o=i[e];if(o instanceof this)return o}return null}},add(t,e,n,r={}){if(!n)throw new Error("dia.HighlighterView: An ID required.");const i=su.get(t,n);i&&i.remove();const o=new this(r);return o.id=n,this._addRef(t,n,o),o.requestUpdate(t,e),o.listenToUpdateAttributes(t),o},_addRef(t,e,n){const{cid:r}=t,{_views:i}=this;let o=i[r];o||(o=i[r]={}),o[e]=n},_removeRef(t,e){const{cid:n}=t,{_views:r}=this,i=r[n];if(i){e&&delete i[e];for(let o in i)return;delete r[n]}},remove(t,e=null){ub(this.get(t,e)).forEach(n=>{n.remove()})},removeAll(t,e=null){const{_views:n}=this;for(let r in n)for(let i in n[r]){const o=n[r][i];o.cellView.paper===t&&o instanceof this&&(e===null||i===e)&&o.remove()}},update(t,e=null,n=!1){ub(this.get(t,e)).forEach(r=>{(n||r.UPDATABLE)&&r.update()})},transform(t,e=null){ub(this.get(t,e)).forEach(n=>{n.UPDATABLE&&n.transform()})},unmount(t,e=null){ub(this.get(t,e)).forEach(n=>n.unmount())},mount(t,e=null){ub(this.get(t,e)).forEach(n=>n.mount())},uniqueId(t,e=""){return Ue.ensureId(t)+JSON.stringify(e)}}),Rm={DEFAULT:"default",EMBEDDING:"embedding",CONNECTING:"connecting",MAGNET_AVAILABILITY:"magnetAvailability",ELEMENT_AVAILABILITY:"elementAvailability"},eVe={TOOLS:"TOOLS"},Cn=bf.extend({tagName:"g",svgElement:!0,selector:"root",metrics:null,className:function(){var t=["cell"],e=this.model.get("type");return e&&e.toLowerCase().split(".").forEach(function(n,r,i){t.push("type-"+i.slice(0,r+1).join("-"))}),t.join(" ")},_presentationAttributes:null,_flags:null,setFlags:function(){var t={},e={},n=0,r,i,o,a=Mi(this,"presentationAttributes");for(var s in a)if(a.hasOwnProperty(s)){var l=a[s];for(Array.isArray(l)||(l=[l]),r=0,i=l.length;r<i;r++){o=l[r];var u=t[o];u||(u=t[o]=1<<n++),e[s]|=u}}var c=Mi(this,"initFlag");for(Array.isArray(c)||(c=[c]),r=0,i=c.length;r<i;r++)o=c[r],t[o]||(t[o]=1<<n++);if(n>25)throw new Error("dia.CellView: Maximum number of flags exceeded.");this._flags=t,this._presentationAttributes=e},hasFlag:function(t,e){return t&this.getFlag(e)},removeFlag:function(t,e){return t^t&this.getFlag(e)},getFlag:function(t){var e=this._flags;if(!e)return 0;var n=0;if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++)n|=e[t[r]];else n|=e[t];return n},attributes:function(){var t=this.model;return{"model-id":t.id,"data-type":t.attributes.type}},constructor:function(t){t.id=t.id||vv(this),bf.call(this,t)},initialize:function(){this.setFlags(),bf.prototype.initialize.apply(this,arguments),this.cleanNodesCache(),this.$el.data("view",this),this.startListening()},startListening:function(){this.listenTo(this.model,"change",this.onAttributesChange)},onAttributesChange:function(t,e){var n=t.getChangeFlag(this._presentationAttributes);e.updateHandled||!n||(e.dirty&&this.hasFlag(n,"UPDATE")&&(n|=this.getFlag("RENDER")),e.tool&&(e.async=!1),this.requestUpdate(n,e))},requestUpdate:function(t,e){const{paper:n}=this;n&&t>0&&n.requestViewUpdate(this,t,this.UPDATE_PRIORITY,e)},parseDOMJSON:function(t,e){var n=_T(t),r=n.selectors,i=n.groupSelectors;for(var o in i){if(r[o])throw new Error("dia.CellView: ambiguous group selector");r[o]=i[o]}if(e){var a=this.selector;if(r[a])throw new Error("dia.CellView: ambiguous root selector.");r[a]=e}return{fragment:n.fragment,selectors:r}},can:function(t){var e=br(this.options.interactive)?this.options.interactive(this):this.options.interactive;return Jn(e)&&e[t]!==!1||t7e(e)&&e!==!1},findBySelector:function(t,e,n){if(e||(e=this.el),n||(n=this.selectors),!t||t===".")return[e];if(n){var r=n[t];if(r)return Array.isArray(r)?r:[r]}return Vn(e).find(t).toArray()},notify:function(t){if(this.paper){var e=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[t].concat(e)),this.paper.trigger.apply(this.paper,[t,this].concat(e))}},getBBox:function(t){var e;if(t&&t.useModelGeometry){var n=this.model;e=n.getBBox().bbox(n.angle())}else e=this.getNodeBBox(this.el);return this.paper.localToPaperRect(e)},getNodeBBox:function(t){const e=this.getNodeBoundingRect(t),n=this.getRootTranslateMatrix().multiply(this.getNodeRotateMatrix(t)),r=this.getNodeMatrix(t);return Ue.transformRect(e,n.multiply(r))},getNodeRotateMatrix(t){return!this.rotatableNode||this.rotatableNode.contains(t)?this.getRootRotateMatrix():Ue.createSVGMatrix()},getNodeUnrotatedBBox:function(t){var e=this.getNodeBoundingRect(t),n=this.getNodeMatrix(t),r=this.getRootTranslateMatrix();return Ue.transformRect(e,r.multiply(n))},getRootTranslateMatrix:function(){var t=this.model,e=t.position(),n=Ue.createSVGMatrix().translate(e.x,e.y);return n},getRootRotateMatrix:function(){var t=Ue.createSVGMatrix(),e=this.model,n=e.angle();if(n){var r=e.getBBox(),i=r.width/2,o=r.height/2;t=t.translate(i,o).rotate(n).translate(-i,-o)}return t},_notifyHighlight:function(t,e,n={}){const{el:r}=this;let i;if(typeof e=="string"?[i=r]=this.findBySelector(e):[i=r]=this.$(e),n.partial=i!==r,n.type===void 0){let o;switch(!0){case n.embedding:o=Rm.EMBEDDING;break;case n.connecting:o=Rm.CONNECTING;break;case n.magnetAvailability:o=Rm.MAGNET_AVAILABILITY;break;case n.elementAvailability:o=Rm.ELEMENT_AVAILABILITY;break;default:o=Rm.DEFAULT;break}n.type=o}return this.notify(t,i,n),this},highlight:function(t,e){return this._notifyHighlight("cell:highlight",t,e)},unhighlight:function(t,e={}){return this._notifyHighlight("cell:unhighlight",t,e)},findMagnet:function(t){const e=this.el;let n=this.$(t)[0];n||(n=e);do{const r=n.getAttribute("magnet"),i=n===e;if((r||i)&&r!=="false")return n;if(i)return;n=n.parentNode}while(n)},findProxyNode:function(t,e){t||(t=this.el);const n=t.getAttribute(`${e}-selector`);if(n){const[r]=this.findBySelector(n);if(r)return r}return t},getSelector:function(t,e){var n;if(t===this.el)return typeof e=="string"&&(n="> "+e),n;if(t){var r=Ue(t).index()+1;n=t.tagName+":nth-child("+r+")",e&&(n+=" > "+e),n=this.getSelector(t.parentNode,n)}return n},addLinkFromMagnet:function(t,e,n){var r=this.paper,i=r.model,o=r.getDefaultLink(this,t);return o.set({source:this.getLinkEnd(t,e,n,o,"source"),target:{x:e,y:n}}).addTo(i,{async:!1,ui:!0}),o.findView(r)},getLinkEnd:function(t,...e){var n=this.model,r=n.id,i=this.findAttribute("port",t),o=t.getAttribute("joint-selector"),a={id:r};return o!=null&&(a.magnet=o),i!=null?(a.port=i,!n.hasPort(i)&&!o&&(a.selector=this.getSelector(t))):o==null&&this.el!==t&&(a.selector=this.getSelector(t)),this.customizeLinkEnd(a,t,...e)},customizeLinkEnd:function(t,e,n,r,i,o){const{paper:a}=this,{connectionStrategy:s}=a.options;if(typeof s=="function"){var l=s.call(a,t,this,e,new we(n,r),i,o,a);if(l)return l}return t},getMagnetFromLinkEnd:function(t){var e=this.el,n=t.port,r=t.magnet,i=this.model,o;return n!=null&&i.isElement()&&i.hasPort(n)?o=this.findPortNode(n,r)||e:(r||(r=t.selector),!r&&n!=null&&(r='[port="'+n+'"]'),o=this.findBySelector(r,e,this.selectors)[0]),this.findProxyNode(o,"magnet")},dragLinkStart:function(t,e,n,r){this.model.startBatch("add-link");const i=this.addLinkFromMagnet(e,n,r);i.notifyPointerdown(t,n,r),i.eventData(t,i.startArrowheadMove("target",{whenNotAllowed:"remove"})),this.eventData(t,{linkView:i})},dragLink:function(t,e,n){var r=this.eventData(t),i=r.linkView;if(i)i.pointermove(t,e,n);else{var o=this.paper,a=o.options.magnetThreshold,s=this.getEventTarget(t),l=r.targetMagnet;if(a==="onleave"){if(l===s||Ue(l).contains(s))return}else if(o.eventData(t).mousemoved<=a)return;this.dragLinkStart(t,l,e,n)}},dragLinkEnd:function(t,e,n){var r=this.eventData(t),i=r.linkView;i&&(i.pointerup(t,e,n),this.model.stopBatch("add-link"))},getAttributeDefinition:function(t){return this.model.constructor.getAttributeDefinition(t)},setNodeAttributes:function(t,e){Eh(e)||(t instanceof SVGElement?Ue(t).attr(e):Vn(t).attr(e))},processNodeAttributes:function(t,e){var n,r,i,o,a,s,l,u,c,f=[];for(n in e)e.hasOwnProperty(n)&&(r=e[n],i=this.getAttributeDefinition(n),i&&(!br(i.qualify)||i.qualify.call(this,r,t,e,this))?(Ko(i.set)&&(s||(s={}),s[i.set]=r),r!==null&&f.push(n,i)):(s||(s={}),s[p7e(n)]=r));for(o=0,a=f.length;o<a;o+=2)n=f[o],i=f[o+1],r=e[n],br(i.set)&&(l||(l={}),l[n]=r),br(i.position)&&(u||(u={}),u[n]=r),br(i.offset)&&(c||(c={}),c[n]=r);return{raw:e,normal:s,set:l,position:u,offset:c}},updateRelativeAttributes:function(t,e,n,r){r||(r={});var i,o,a,s=e.raw||{},l=e.normal||{},u=e.set,c=e.position,f=e.offset;for(i in u){o=u[i],a=this.getAttributeDefinition(i);var h=a.set.call(this,o,n.clone(),t,s,this);Jn(h)?Nt(l,h):h!==void 0&&(l[i]=h)}if(t instanceof HTMLElement){this.setNodeAttributes(t,l);return}var d=l.transform,g=Ue.transformStringToMatrix(d),y=we(g.e,g.f);d&&(l=Ig(l,"transform"),g.e=g.f=0);var _,v,S;if(c||f){var C=this.getNodeScale(t,r.scalableNode);_=C.sx,v=C.sy}var k=!1;for(i in c)o=c[i],a=this.getAttributeDefinition(i),S=a.position.call(this,o,n.clone(),t,s,this),S&&(y.offset(we(S).scale(_,v)),k||(k=!0));this.setNodeAttributes(t,l);var x=!1;if(f){var m=this.getNodeBoundingRect(t);if(m.width>0&&m.height>0){var T=Ue.transformRect(m,g).scale(1/_,1/v);for(i in f)o=f[i],a=this.getAttributeDefinition(i),S=a.offset.call(this,o,T,t,s,this),S&&(y.offset(we(S).scale(_,v)),x||(x=!0))}}(d!==void 0||k||x)&&(y.round(1),g.e=y.x,g.f=y.y,t.setAttribute("transform",Ue.matrixToTransformString(g)))},getNodeScale:function(t,e){var n,r;if(e&&e.contains(t)){var i=e.scale();n=1/i.sx,r=1/i.sy}else n=1,r=1;return{sx:n,sy:r}},cleanNodesCache:function(){this.metrics={}},nodeCache:function(t){var e=this.metrics;if(!e)return{};var n=Ue.ensureId(t),r=e[n];return r||(r=e[n]={}),r},getNodeData:function(t){var e=this.nodeCache(t);return e.data||(e.data={}),e.data},getNodeBoundingRect:function(t){var e=this.nodeCache(t);return e.boundingRect===void 0&&(e.boundingRect=Ue(t).getBBox()),new st(e.boundingRect)},getNodeMatrix:function(t){const e=this.nodeCache(t);if(e.magnetMatrix===void 0){const{rotatableNode:n,el:r}=this;let i;n&&n.contains(t)?i=n:i=r,e.magnetMatrix=Ue(t).getTransformToElement(i)}return Ue.createSVGMatrix(e.magnetMatrix)},getNodeShape:function(t){var e=this.nodeCache(t);return e.geometryShape===void 0&&(e.geometryShape=Ue(t).toGeometryShape()),e.geometryShape.clone()},isNodeConnection:function(t){return this.model.isLink()&&(!t||t===this.el)},findNodesAttributes:function(t,e,n,r){var i,o,a,s,l={},u=[];for(var c in t)if(t.hasOwnProperty(c)&&(a=t[c],!!Di(a))){var f=n[c]=this.findBySelector(c,e,r);for(i=0,o=f.length;i<o;i++){var h=f[i];s=Ue.ensureId(h);var d=r&&r[c]===h,g=l[s];if(g){g.array||(u.push(s),g.array=!0,g.attributes=[g.attributes],g.selectedLength=[g.selectedLength]);var y=g.attributes,_=g.selectedLength;if(d)y.unshift(a),_.unshift(-1);else{var v=_se(_,o);y.splice(v,0,a),_.splice(v,0,o)}}else l[s]={attributes:a,selectedLength:d?-1:o,node:h,array:!1}}}for(i=0,o=u.length;i<o;i++)s=u[i],a=l[s],a.attributes=Ri({},...a.attributes.reverse());return l},getEventTarget:function(t,e={}){const{target:n,type:r,clientX:i=0,clientY:o=0}=t;return e.fromPoint||r==="touchmove"||r==="touchend"||"pointerId"in t&&n.hasPointerCapture(t.pointerId)?document.elementFromPoint(i,o):n},updateDOMSubtreeAttributes:function(t,e,n){n||(n={}),n.rootBBox||(n.rootBBox=st()),n.selectors||(n.selectors=this.selectors);var r={},i={},o=[],a=[],s,l,u,c,f,h=n.roAttributes,d=this.findNodesAttributes(h||e,t,r,n.selectors),g=h?this.findNodesAttributes(e,t,r,n.selectors):d;for(var y in d)if(c=d[y],u=c.attributes,l=c.node,f=this.processNodeAttributes(l,u),!f.set&&!f.position&&!f.offset)this.setNodeAttributes(l,f.normal);else{var _=g[y]&&g[y].attributes,v=_&&u.ref===void 0?_.ref:u.ref,S;if(v){if(S=(r[v]||this.findBySelector(v,t,n.selectors))[0],!S)throw new Error('dia.CellView: "'+v+'" reference does not exist.')}else S=null;if(s={node:l,refNode:S,processedAttributes:f,allAttributes:_},S){var C=a.findIndex(function(k){return k.refNode===l});C>-1?a.splice(C,0,s):a.push(s)}else o.push(s)}o.push(...a);for(let k=0,x=o.length;k<x;k++){s=o[k],l=s.node,S=s.refNode;const m=S?Ue.ensureId(S):"";let T=i[m];T||(T=i[m]=S?Ue(S).getBBox({target:tVe(l,S)}):n.rootBBox),h?(f=this.processNodeAttributes(l,s.allAttributes),this.mergeProcessedAttributes(f,s.processedAttributes)):f=s.processedAttributes,this.updateRelativeAttributes(l,f,T,n)}},mergeProcessedAttributes:function(t,e){t.set||(t.set={}),t.position||(t.position={}),t.offset||(t.offset={}),Nt(t.set,e.set),Nt(t.position,e.position),Nt(t.offset,e.offset);var n=t.normal&&t.normal.transform;n!==void 0&&e.normal&&(e.normal.transform=n),t.normal=e.normal},onMount(t){t||(this.mountTools(),su.mount(this))},onDetach(){this.unmountTools(),su.unmount(this)},onRemove:function(){this.removeTools(),this.removeHighlighters()},_toolsView:null,hasTools:function(t){var e=this._toolsView;return e?t?e.getName()===t:!0:!1},addTools:function(t){return this.removeTools(),t&&(this._toolsView=t,t.configure({relatedView:this}),t.listenTo(this.paper,"tools:event",this.onToolEvent.bind(this))),this},unmountTools(){const t=this._toolsView;return t&&t.unmount(),this},mountTools(){const t=this._toolsView;return t&&!t.isMounted()&&t.mount(),this},updateTools:function(t){var e=this._toolsView;return e&&e.update(t),this},removeTools:function(){var t=this._toolsView;return t&&(t.remove(),this._toolsView=null),this},hideTools:function(){var t=this._toolsView;return t&&t.hide(),this},showTools:function(){var t=this._toolsView;return t&&t.show(),this},onToolEvent:function(t){switch(t){case"remove":this.removeTools();break;case"hide":this.hideTools();break;case"show":this.showTools();break}},removeHighlighters:function(){su.remove(this)},updateHighlighters:function(t=!1){su.update(this,null,t)},transformHighlighters:function(){su.transform(this)},preventDefaultInteraction(t){this.eventData(t,{defaultInteractionPrevented:!0})},isDefaultInteractionPrevented(t){const{defaultInteractionPrevented:e=!1}=this.eventData(t);return e},pointerdblclick:function(t,e,n){this.notify("cell:pointerdblclick",t,e,n)},pointerclick:function(t,e,n){this.notify("cell:pointerclick",t,e,n)},contextmenu:function(t,e,n){this.notify("cell:contextmenu",t,e,n)},pointerdown:function(t,e,n){const{model:r}=this,{graph:i}=r;i&&(r.startBatch("pointer"),this.eventData(t,{graph:i})),this.notify("cell:pointerdown",t,e,n)},pointermove:function(t,e,n){this.notify("cell:pointermove",t,e,n)},pointerup:function(t,e,n){const{graph:r}=this.eventData(t);this.notify("cell:pointerup",t,e,n),r&&r.stopBatch("pointer",{cell:this.model})},mouseover:function(t){this.notify("cell:mouseover",t)},mouseout:function(t){this.notify("cell:mouseout",t)},mouseenter:function(t){this.notify("cell:mouseenter",t)},mouseleave:function(t){this.notify("cell:mouseleave",t)},mousewheel:function(t,e,n,r){this.notify("cell:mousewheel",t,e,n,r)},onevent:function(t,e,n,r){this.notify(e,t,n,r)},onmagnet:function(){},magnetpointerdblclick:function(){},magnetcontextmenu:function(){},checkMouseleave(t){const{paper:e,model:n}=this;if(e.isAsync()){if(n.isLink()){const o=n.getSourceElement();if(o){const s=e.findViewByModel(o);s&&(e.dumpView(s),e.checkViewVisibility(s))}const a=n.getTargetElement();if(a){const s=e.findViewByModel(a);s&&(e.dumpView(s),e.checkViewVisibility(s))}}e.dumpView(this),e.checkViewVisibility(this)}const r=this.getEventTarget(t,{fromPoint:!0}),i=e.findView(r);i!==this&&(this.mouseleave(t),i&&i.mouseenter(t))},setInteractivity:function(t){this.options.interactive=t}},{Flags:eVe,Highlighting:Rm,addPresentationAttributes:function(t){return Ri({},Mi(this.prototype,"presentationAttributes"),t,function(e,n){if(!(!e||!n)&&(typeof e=="string"&&(e=[e]),typeof n=="string"&&(n=[n]),Array.isArray(e)&&Array.isArray(n)))return OS(e.concat(n))})}});function tVe(t,e){let n=t;do{if(n.contains(e))return n;n=n.parentNode}while(n);return null}const Rn={TOOLS:Cn.Flags.TOOLS,UPDATE:"UPDATE",TRANSLATE:"TRANSLATE",RESIZE:"RESIZE",PORTS:"PORTS",ROTATE:"ROTATE",RENDER:"RENDER"},Vm={MOVE:"move",MAGNET:"magnet"},ao=Cn.extend({_removePorts:function(){},_renderPorts:function(){},className:function(){var t=Cn.prototype.className.apply(this).split(" ");return t.push("element"),t.join(" ")},initialize:function(){Cn.prototype.initialize.apply(this,arguments),this._initializePorts()},presentationAttributes:{attrs:[Rn.UPDATE],position:[Rn.TRANSLATE,Rn.TOOLS],size:[Rn.RESIZE,Rn.PORTS,Rn.TOOLS],angle:[Rn.ROTATE,Rn.TOOLS],markup:[Rn.RENDER],ports:[Rn.PORTS]},initFlag:[Rn.RENDER],UPDATE_PRIORITY:0,confirmUpdate:function(t,e){const{useCSSSelectors:n}=dc;this.hasFlag(t,Rn.PORTS)&&(this._removePorts(),this._cleanPortsCache());let r=!1;if(this.hasFlag(t,Rn.RENDER))this.render(),this.updateTools(e),this.updateHighlighters(!0),r=!0,t=this.removeFlag(t,[Rn.RENDER,Rn.UPDATE,Rn.RESIZE,Rn.TRANSLATE,Rn.ROTATE,Rn.PORTS,Rn.TOOLS]);else{let i=!1;this.hasFlag(t,Rn.RESIZE)&&(this.resize(e),i=!0,t=this.removeFlag(t,[Rn.RESIZE,Rn.UPDATE]),n&&(t=this.removeFlag(t,Rn.PORTS))),this.hasFlag(t,Rn.UPDATE)&&(this.update(this.model,null,e),t=this.removeFlag(t,Rn.UPDATE),i=!0,n&&(t=this.removeFlag(t,Rn.PORTS))),this.hasFlag(t,Rn.TRANSLATE)&&(this.translate(),t=this.removeFlag(t,Rn.TRANSLATE),r=!0),this.hasFlag(t,Rn.ROTATE)&&(this.rotate(),t=this.removeFlag(t,Rn.ROTATE),r=!0),this.hasFlag(t,Rn.PORTS)&&(this._renderPorts(),i=!0,t=this.removeFlag(t,Rn.PORTS)),i&&this.updateHighlighters(!1)}return r&&this.transformHighlighters(),this.hasFlag(t,Rn.TOOLS)&&(this.updateTools(e),t=this.removeFlag(t,Rn.TOOLS)),t},_initializePorts:function(){},update:function(t,e){this.cleanNodesCache();const{useCSSSelectors:n}=dc;n&&this._removePorts();var r=this.model,i=r.attr();this.updateDOMSubtreeAttributes(this.el,i,{rootBBox:new st(r.size()),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode,roAttributes:e===i?null:e}),n&&this._renderPorts()},rotatableSelector:"rotatable",scalableSelector:"scalable",scalableNode:null,rotatableNode:null,renderMarkup:function(){var t=this.model,e=t.get("markup")||t.markup;if(!e)throw new Error("dia.ElementView: markup required");if(Array.isArray(e))return this.renderJSONMarkup(e);if(typeof e=="string")return this.renderStringMarkup(e);throw new Error("dia.ElementView: invalid markup")},renderJSONMarkup:function(t){var e=this.parseDOMJSON(t,this.el),n=this.selectors=e.selectors;this.rotatableNode=Ue(n[this.rotatableSelector])||null,this.scalableNode=Ue(n[this.scalableSelector])||null,this.vel.append(e.fragment)},renderStringMarkup:function(t){var e=this.vel;e.append(Ue(t)),this.rotatableNode=e.findOne(".rotatable"),this.scalableNode=e.findOne(".scalable");var n=this.selectors={};n[this.selector]=this.el},render:function(){return this.vel.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransformation(),this},resize:function(t){if(this.scalableNode)return this.sgResize(t);this.model.attributes.angle&&this.rotate(),this.update()},translate:function(){if(this.rotatableNode)return this.rgTranslate();this.updateTransformation()},rotate:function(){if(this.rotatableNode){this.rgRotate(),this.update();return}this.updateTransformation()},updateTransformation:function(){var t=this.getTranslateString(),e=this.getRotateString();e&&(t+=" "+e),this.vel.attr("transform",t)},getTranslateString:function(){var t=this.model.attributes.position;return"translate("+t.x+","+t.y+")"},getRotateString:function(){var t=this.model.attributes,e=t.angle;if(!e)return null;var n=t.size;return"rotate("+e+","+n.width/2+","+n.height/2+")"},rgRotate:function(){this.rotatableNode.attr("transform",this.getRotateString())},rgTranslate:function(){this.vel.attr("transform",this.getTranslateString())},sgResize:function(t){var e=this.model,n=e.angle(),r=e.size(),i=this.scalableNode,o=!1;i.node.getElementsByTagName("path").length>0&&(o=!0);var a=i.getBBox({recursive:o}),s=r.width/(a.width||1),l=r.height/(a.height||1);i.attr("transform","scale("+s+","+l+")");var u=this.rotatableNode,c=u&&u.attr("transform");if(c){u.attr("transform",c+" rotate("+-n+","+r.width/2+","+r.height/2+")");var f=i.getBBox({target:this.paper.cells});e.set("position",{x:f.x,y:f.y},Nt({updateHandled:!0},t)),this.translate(),this.rotate()}this.update()},prepareEmbedding:function(t={}){const e=t.model||this.model,r=(t.paper||this.paper).model,i=t.initialZIndices={},o=e.getEmbeddedCells({deep:!0}),a=r.getConnectedLinks(e,{deep:!0,includeEnclosed:!0});[e,...o,...a].forEach(u=>i[u.id]=u.attributes.z),e.startBatch("to-front"),e.toFront({deep:!0,ui:!0});const s=r.getElements().reduce((u,c)=>Math.max(u,c.attributes.z||0),0);a.forEach(u=>{u.attributes.z<=s&&u.set("z",s+1,{ui:!0})}),e.stopBatch("to-front");const l=e.parent();l?(r.getCell(l).unembed(e,{ui:!0}),t.initialParentId=l):t.initialParentId=null},processEmbedding:function(t={},e,n,r){const i=t.model||this.model,o=t.paper||this.paper,a=o.model,{findParentBy:s,frontParentOnly:l,validateEmbedding:u}=o.options;let c;br(s)?c=Dn(s.call(a,this,e,n,r)):s==="pointer"?c=Dn(a.findModelsFromPoint({x:n,y:r})):c=a.findModelsUnderElement(i,{searchBy:s}),c=c.filter(d=>d instanceof pc&&i.id!==d.id&&!d.isEmbeddedIn(i)),l&&(c=c.slice(-1));let f=null;const h=t.candidateEmbedView;for(let d=c.length-1;d>=0;d--){const g=c[d];if(h&&h.model.id==g.id){f=h;break}else{const y=g.findView(o);if(!br(u)||u.call(o,this,y)){f=y;break}}}f&&f!=h&&(this.clearEmbedding(t),t.candidateEmbedView=f.highlight(f.findProxyNode(null,"container"),{embedding:!0})),!f&&h&&this.clearEmbedding(t)},clearEmbedding:function(t){t||(t={});var e=t.candidateEmbedView;e&&(e.unhighlight(e.findProxyNode(null,"container"),{embedding:!0}),t.candidateEmbedView=null)},finalizeEmbedding:function(t={}){const e=t.candidateEmbedView,n=t.model||this.model,r=t.paper||this.paper;if(e)e.model.embed(n,{ui:!0}),e.unhighlight(e.findProxyNode(null,"container"),{embedding:!0}),t.candidateEmbedView=null;else{const{validateUnembedding:i}=r.options,{initialParentId:o}=t;if(o&&typeof i=="function"&&!i.call(r,this)){this._disallowUnembed(t);return}}r.model.getConnectedLinks(n,{deep:!0}).forEach(i=>{i.reparent({ui:!0})})},_disallowUnembed:function(t){const{model:e,whenNotAllowed:n="revert"}=t,r=e||this.model,o=(t.paper||this.paper).model;switch(n){case"remove":{r.remove({ui:!0});break}case"revert":{const{initialParentId:a,initialPosition:s,initialZIndices:l}=t;if(s){const{x:c,y:f}=s;r.position(c,f,{deep:!0,ui:!0})}l&&Object.keys(l).forEach(c=>{const f=o.getCell(c);f&&f.set("z",l[c],{ui:!0})});const u=o.getCell(a);u&&u.embed(r,{ui:!0});break}}},getDelegatedView:function(){for(var t=this,e=t.model,n=t.paper;t&&!e.isLink();){if(!e.isEmbedded()||t.can("stopDelegation"))return t;e=e.getParentCell(),t=n.findViewByModel(e)}return null},findProxyNode:function(t,e){t||(t=this.el);const n=t.getAttribute(`${e}-selector`);if(n){const r=this.findAttribute("port",t);if(r){const i=this.findPortNode(r,n);if(i)return i}else{const[i]=this.findBySelector(n);if(i)return i}}return t},notifyPointerdown(t,e,n){Cn.prototype.pointerdown.call(this,t,e,n),this.notify("element:pointerdown",t,e,n)},notifyPointermove(t,e,n){Cn.prototype.pointermove.call(this,t,e,n),this.notify("element:pointermove",t,e,n)},notifyPointerup(t,e,n){this.notify("element:pointerup",t,e,n),Cn.prototype.pointerup.call(this,t,e,n)},pointerdblclick:function(t,e,n){Cn.prototype.pointerdblclick.apply(this,arguments),this.notify("element:pointerdblclick",t,e,n)},pointerclick:function(t,e,n){Cn.prototype.pointerclick.apply(this,arguments),this.notify("element:pointerclick",t,e,n)},contextmenu:function(t,e,n){Cn.prototype.contextmenu.apply(this,arguments),this.notify("element:contextmenu",t,e,n)},pointerdown:function(t,e,n){this.notifyPointerdown(t,e,n),this.dragStart(t,e,n)},pointermove:function(t,e,n){const r=this.eventData(t),{targetMagnet:i,action:o,delegatedView:a}=r;switch(i&&this.magnetpointermove(t,i,e,n),o){case Vm.MAGNET:this.dragMagnet(t,e,n);break;case Vm.MOVE:(a||this).drag(t,e,n);default:if(r.preventPointerEvents)break;this.notifyPointermove(t,e,n);break}this.eventData(t,r)},pointerup:function(t,e,n){const r=this.eventData(t),{targetMagnet:i,action:o,delegatedView:a}=r;switch(i&&this.magnetpointerup(t,i,e,n),o){case Vm.MAGNET:this.dragMagnetEnd(t,e,n);break;case Vm.MOVE:(a||this).dragEnd(t,e,n);default:if(r.preventPointerEvents)break;this.notifyPointerup(t,e,n)}i&&this.magnetpointerclick(t,i,e,n),this.checkMouseleave(t)},mouseover:function(t){Cn.prototype.mouseover.apply(this,arguments),this.notify("element:mouseover",t)},mouseout:function(t){Cn.prototype.mouseout.apply(this,arguments),this.notify("element:mouseout",t)},mouseenter:function(t){Cn.prototype.mouseenter.apply(this,arguments),this.notify("element:mouseenter",t)},mouseleave:function(t){Cn.prototype.mouseleave.apply(this,arguments),this.notify("element:mouseleave",t)},mousewheel:function(t,e,n,r){Cn.prototype.mousewheel.apply(this,arguments),this.notify("element:mousewheel",t,e,n,r)},onmagnet:function(t,e,n){const{currentTarget:r}=t;this.magnetpointerdown(t,r,e,n),this.eventData(t,{targetMagnet:r}),this.dragMagnetStart(t,e,n)},magnetpointerdown:function(t,e,n,r){this.notify("element:magnet:pointerdown",t,e,n,r)},magnetpointermove:function(t,e,n,r){this.notify("element:magnet:pointermove",t,e,n,r)},magnetpointerup:function(t,e,n,r){this.notify("element:magnet:pointerup",t,e,n,r)},magnetpointerdblclick:function(t,e,n,r){this.notify("element:magnet:pointerdblclick",t,e,n,r)},magnetcontextmenu:function(t,e,n,r){this.notify("element:magnet:contextmenu",t,e,n,r)},dragStart:function(t,e,n){if(this.isDefaultInteractionPrevented(t))return;var r=this.getDelegatedView();if(!r||!r.can("elementMove"))return;this.eventData(t,{action:Vm.MOVE,delegatedView:r});const i=r.model.position();r.eventData(t,{initialPosition:i,pointerOffset:i.difference(e,n),restrictedArea:this.paper.getRestrictedArea(r,e,n)})},dragMagnetStart:function(t,e,n){const{paper:r}=this,i=t.isPropagationStopped();if(i&&this.eventData(t,{preventPointerEvents:!0}),this.isDefaultInteractionPrevented(t)||!this.can("addLinkFromMagnet"))return;const{targetMagnet:o=t.currentTarget}=this.eventData(t);if(t.stopPropagation(),!r.options.validateMagnet.call(r,this,o,t)){i?this.dragStart(t,e,n):this.pointerdown(t,e,n);return}r.options.magnetThreshold<=0&&this.dragLinkStart(t,o,e,n),this.eventData(t,{action:Vm.MAGNET})},drag:function(t,e,n){var r=this.paper,i=r.options.gridSize,o=this.model,a=this.eventData(t),{pointerOffset:s,restrictedArea:l,embedding:u}=a,c=Pg(e+s.x,i),f=Pg(n+s.y,i);o.position(c,f,{restrictedArea:l,deep:!0,ui:!0}),r.options.embeddingMode&&(u||(this.prepareEmbedding(a),u=!0),this.processEmbedding(a,t,e,n)),this.eventData(t,{embedding:u})},dragMagnet:function(t,e,n){this.dragLink(t,e,n)},dragEnd:function(t,e,n){var r=this.eventData(t);r.embedding&&this.finalizeEmbedding(r)},dragMagnetEnd:function(t,e,n){this.dragLinkEnd(t,e,n)},magnetpointerclick:function(t,e,n,r){var i=this.paper;i.eventData(t).mousemoved>i.options.clickThreshold||this.notify("element:magnet:pointerclick",t,e,n,r)}},{Flags:Rn});Nt(ao.prototype,J7e);const nVe=function(t,e,n){return t},rVe=function(t,e,n){var r=e.side||"bottom",i=$g(e.padding||40),o=n.sourceBBox,a=n.targetBBox,s=o.center(),l=a.center(),u,c,f;switch(r){case"bottom":f=1,u="y",c="height";break;case"top":f=-1,u="y",c="height";break;case"left":f=-1,u="x",c="width";break;case"right":f=1,u="x",c="width";break;default:throw new Error("Router: invalid side")}return s[u]+=f*(o[c]/2+i[r]),l[u]+=f*(a[c]/2+i[r]),f*(s[u]-l[u])>0?l[u]=s[u]:s[u]=l[u],[s].concat(t,l)};var iVe={N:"S",S:"N",E:"W",W:"E"},oVe={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function wT(t,e,n){var r=new we(t.x,e.y);return n.containsPoint(r)&&(r=new we(e.x,t.y)),r}function bD(t,e){return t[e==="W"||e==="E"?"width":"height"]}function ka(t,e){return t.x===e.x?t.y>e.y?"N":"S":t.y===e.y?t.x>e.x?"W":"E":null}function TC(t){return new st(t.x,t.y,0,0)}function xT(t){var e=$g(t.padding||t.elementPadding||20);return{x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}function Nse(t,e){return t.sourceBBox.clone().moveAndExpand(xT(e))}function Fse(t,e){return t.targetBBox.clone().moveAndExpand(xT(e))}function aVe(t,e){if(t.sourceAnchor)return t.sourceAnchor;var n=Nse(t,e);return n.center()}function sVe(t,e){if(t.targetAnchor)return t.targetAnchor;var n=Fse(t,e);return n.center()}function Rse(t,e,n){var r=new we(t.x,e.y),i=new we(e.x,t.y),o=ka(t,r),a=ka(t,i),s=iVe[n],l=o===n||o!==s&&(a===s||a!==n)?r:i;return{points:[l],direction:ka(l,e)}}function E2(t,e,n){var r=wT(t,e,n);return{points:[r],direction:ka(r,e)}}function lVe(t,e,n,r){var i={},o=[new we(t.x,e.y),new we(e.x,t.y)],a=o.filter(function(f){return!n.containsPoint(f)}),s=a.filter(function(f){return ka(f,t)!==r}),l;if(s.length>0)l=s.filter(function(f){return ka(t,f)===r}).pop(),l=l||s[0],i.points=[l],i.direction=ka(l,e);else{l=l7e(o,a)[0];var u=new we(e).move(l,-bD(n,r)/2),c=wT(u,t,n);i.points=[c,u],i.direction=ka(u,e)}return i}function uVe(t,e,n,r){var i=E2(e,t,r),o=i.points[0];if(n.containsPoint(o)){i=E2(t,e,n);var a=i.points[0];if(r.containsPoint(a)){var s=new we(t).move(a,-bD(n,ka(t,a))/2),l=new we(e).move(o,-bD(r,ka(e,o))/2),u=new gt(s,l).midpoint(),c=E2(t,u,n),f=Rse(u,e,c.direction);i.points=[c.points[0],f.points[0]],i.direction=f.direction}}return i}function CI(t,e,n,r,i){var o={},a=n.union(r).inflate(1),s=a.center().distance(e)>a.center().distance(t),l=s?e:t,u=s?t:e,c,f,h;return i?(c=we.fromPolar(a.width+a.height,oVe[i],l),c=a.pointNearestToPoint(c).move(c,-1)):c=a.pointNearestToPoint(l).move(l,1),f=wT(c,u,a),c.round().equals(f.round())?(f=we.fromPolar(a.width+a.height,ss(c.theta(l))+Math.PI/2,u),f=a.pointNearestToPoint(f).move(u,1).round(),h=wT(c,f,a),o.points=s?[f,h,c]:[c,h,f]):o.points=s?[f,c]:[c,f],o.direction=ka(s?c:f,e),o}function _D(t,e,n){var r=Nse(n,e),i=Fse(n,e),o=aVe(n,e),a=sVe(n,e);r=r.union(TC(o)),i=i.union(TC(a)),t=Dn(t).map(we),t.unshift(o),t.push(a);for(var s,l=[],u=0,c=t.length-1;u<c;u++){var f=null,h=t[u],d=t[u+1],g=!!ka(h,d);if(u===0)u+1===c?r.intersect(i.clone().inflate(1))?f=CI(h,d,r,i):g||(f=uVe(h,d,r,i)):r.containsPoint(d)?f=CI(h,d,r,TC(d).moveAndExpand(xT(e))):g||(f=E2(h,d,r));else if(u+1===c){var y=g&&ka(d,h)===s;i.containsPoint(h)||y?f=CI(h,d,TC(h).moveAndExpand(xT(e)),i,s):g||(f=lVe(h,d,i,s))}else g||(f=Rse(h,d,s));f?(Array.prototype.push.apply(l,f.points),s=f.direction):s=ka(h,d),u+1<c&&l.push(d)}return l}var Vse={step:10,maximumLoops:2e3,precision:1,maxAllowedDirectionChange:90,perpendicular:!0,excludeEnds:[],excludeTypes:["basic.Text"],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){return this.step},directions:function(){var t=this.step,e=this.cost();return[{offsetX:t,offsetY:0,cost:e},{offsetX:-t,offsetY:0,cost:e},{offsetX:0,offsetY:t,cost:e},{offsetX:0,offsetY:-t,cost:e}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},paddingBox:function(){var t=this.step;return{x:-t,y:-t,width:2*t,height:2*t}},isPointObstacle:null,fallbackRouter:function(t,e,n){if(!br(_D))throw new Error("Manhattan requires the orthogonal router as default fallback.");return _D(t,Nt({},Vse,e),n)},fallbackRoute:function(t,e,n){return null},draggingRoute:null};function z5(t){this.map={},this.options=t,this.mapGridSize=100}z5.prototype.build=function(t,e){var n=this.options,r=Dn(n.excludeEnds).reduce(function(l,u){var c=e.get(u);if(c){var f=t.getCell(c.id);f&&l.push(f)}return l},[]),i=[],o=t.getCell(e.get("source").id);o&&(i=dD(i,o.getAncestors().map(function(l){return l.id})));var a=t.getCell(e.get("target").id);a&&(i=dD(i,a.getAncestors().map(function(l){return l.id})));var s=this.mapGridSize;return t.getElements().reduce(function(l,u){var c=Dn(n.excludeTypes).includes(u.get("type")),f=r.find(function(k){return k.id===u.id}),h=i.includes(u.id),d=c||f||h;if(!d)for(var g=u.getBBox().moveAndExpand(n.paddingBox),y=g.origin().snapToGrid(s),_=g.corner().snapToGrid(s),v=y.x;v<=_.x;v+=s)for(var S=y.y;S<=_.y;S+=s){var C=v+"@"+S;l[C]=l[C]||[],l[C].push(g)}return l},this.map),this};z5.prototype.isPointAccessible=function(t){var e=t.clone().snapToGrid(this.mapGridSize).toString();return Dn(this.map[e]).every(function(n){return!n.containsPoint(t)})};function Qg(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}Qg.prototype.add=function(t,e){this.hash[t]?this.items.splice(this.items.indexOf(t),1):this.hash[t]=this.OPEN,this.values[t]=e;var n=_se(this.items,t,(function(r){return this.values[r]}).bind(this));this.items.splice(n,0,t)};Qg.prototype.remove=function(t){this.hash[t]=this.CLOSE};Qg.prototype.isOpen=function(t){return this.hash[t]===this.OPEN};Qg.prototype.isClose=function(t){return this.hash[t]===this.CLOSE};Qg.prototype.isEmpty=function(){return this.items.length===0};Qg.prototype.pop=function(){var t=this.items.shift();return this.remove(t),t};function Bse(t,e){return e&&e.paddingBox?t.sourceBBox.clone().moveAndExpand(e.paddingBox):t.sourceBBox.clone()}function zse(t,e){return e&&e.paddingBox?t.targetBBox.clone().moveAndExpand(e.paddingBox):t.targetBBox.clone()}function jse(t,e){if(t.sourceAnchor)return t.sourceAnchor;var n=Bse(t,e);return n.center()}function cVe(t,e){if(t.targetAnchor)return t.targetAnchor;var n=zse(t,e);return n.center()}function kI(t,e,n,r,i){var o=360/n,a=t.theta(fVe(t,e,r,i)),s=_c(a+o/2);return o*Math.floor(s/o)}function fVe(t,e,n,r){var i=r.step,o=e.x-t.x,a=e.y-t.y,s=o/n.x,l=a/n.y,u=s*i,c=l*i;return new we(t.x+u,t.y+c)}function FW(t,e){var n=Math.abs(t-e);return n>180?360-n:n}function hVe(t,e,n){var r=n.step;Dn(n.directions).forEach(function(i){i.gridOffsetX=i.offsetX/r*e.x,i.gridOffsetY=i.offsetY/r*e.y})}function dVe(t,e,n){return{source:e.clone(),x:RW(n.x-e.x,t),y:RW(n.y-e.y,t)}}function RW(t,e){if(!t)return e;var n=Math.abs(t),r=Math.round(n/e);if(!r)return n;var i=r*e,o=n-i,a=o/r;return e+a}function pVe(t,e){var n=e.source,r=Pg(t.x-n.x,e.x)+n.x,i=Pg(t.y-n.y,e.y)+n.y;return new we(r,i)}function Db(t,e){return t.round(e)}function P2(t,e,n){return Db(pVe(t.clone(),e),n)}function m1(t){return t.clone().toString()}function TI(t){return new we(t.x===0?0:Math.abs(t.x)/t.x,t.y===0?0:Math.abs(t.y)/t.y)}function gVe(t,e,n,r,i,o,a){for(var s=[],l=TI(i.difference(n)),u=m1(n),c=t[u],f;c;){f=e[u];var h=TI(f.difference(c));h.equals(l)||(s.unshift(f),l=h),u=m1(c),c=t[u]}var d=e[u],g=TI(d.difference(r));return g.equals(l)||s.unshift(d),s}function VW(t,e){for(var n=1/0,r=0,i=e.length;r<i;r++){var o=t.manhattanDistance(e[r]);o<n&&(n=o)}return n}function BW(t,e,n,r,i){var o=i.precision,a=i.directionMap,s=t.difference(e.center()),l=Jn(a)?Object.keys(a):[],u=Dn(n),c=l.reduce(function(f,h){if(u.includes(h)){for(var d=a[h],g=new we(t.x+d.x*(Math.abs(s.x)+e.width),t.y+d.y*(Math.abs(s.y)+e.height)),y=new gt(t,g),_=y.intersect(e)||[],v=_.length,S,C=null,k=0;k<v;k++){var x=_[k],m=t.squaredDistance(x);(S===void 0||m>S)&&(S=m,C=x)}if(C){var T=P2(C,r,o);e.containsPoint(T)&&(T=P2(T.offset(d.x*r.x,d.y*r.y),r,o)),f.push(T)}}return f},[]);return e.containsPoint(t)||c.push(P2(t,r,o)),c}function mVe(t,e,n,r){var i=r.precision,o,a;t instanceof st?o=Db(jse(this,r).clone(),i):o=Db(t.clone(),i),e instanceof st?a=Db(cVe(this,r).clone(),i):a=Db(e.clone(),i);var s=dVe(r.step,o,a),l,u,c,f;if(t instanceof st?(l=o,c=BW(l,t,r.startDirections,s,r)):(l=o,c=[l]),e instanceof st?(u=a,f=BW(a,e,r.endDirections,s,r)):(u=a,f=[u]),c=c.filter(ye=>!n(ye)),f=f.filter(ye=>!n(ye)),c.length>0&&f.length>0){for(var h=new Qg,d={},g={},y={},_=0,v=c.length;_<v;_++){var S=c[_],C=m1(S);h.add(C,VW(S,f)),d[C]=S,y[C]=0}var k=r.previousDirectionAngle,x=k===void 0,m,T,P=r.directions;hVe(P,s,r);for(var I=P.length,M=Dn(f).reduce(function(ye,j){var Y=m1(j);return ye.push(Y),ye},[]),L=r.maximumLoops;!h.isEmpty()&&L>0;){var R=h.pop(),V=d[R],z=g[R],ie=y[R],oe=z===void 0,Se=V.equals(l),Ae;oe?x?Se?Ae=null:Ae=kI(l,V,I,s,r):Ae=k:Ae=kI(z,V,I,s,r);var Ee=c.length===f.length;if(Ee){for(var _e=0;_e<c.length;_e++)if(!c[_e].equals(f[_e])){Ee=!1;break}}var se=oe&&Ee;if(!se&&M.indexOf(R)>=0)return r.previousDirectionAngle=Ae,gVe(g,d,V,l,u);for(_=0;_<I;_++){m=P[_];var ne=m.angle;if(T=FW(Ae,ne),!(!(x&&Se)&&T>r.maxAllowedDirectionChange)){var J=P2(V.clone().offset(m.gridOffsetX,m.gridOffsetY),s,i),B=m1(J);if(!(h.isClose(B)||n(J))){if(M.indexOf(B)>=0){var H=J.equals(u);if(!H){var ae=kI(J,u,I,s,r),te=FW(ne,ae);if(te>r.maxAllowedDirectionChange)continue}}var ce=m.cost,ue=Se?0:r.penalties[T],fe=ie+ce+ue;(!h.isOpen(B)||fe<y[B])&&(d[B]=J,g[B]=V,y[B]=fe,h.add(B,fe+VW(J,f)))}}}L--}}return r.fallbackRoute.call(this,l,u,r)}function vVe(t){if(t.directions=Mi(t,"directions"),t.penalties=Mi(t,"penalties"),t.paddingBox=Mi(t,"paddingBox"),t.padding=Mi(t,"padding"),t.padding){var e=$g(t.padding);t.paddingBox={x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}Dn(t.directions).forEach(function(n){var r=new we(0,0),i=new we(n.offsetX,n.offsetY);n.angle=_c(r.theta(i))})}function yVe(t,e,n){vVe(e),n.options.perpendicular=!!e.perpendicular;var r=Bse(n,e),i=zse(n,e),o=jse(n,e);let a;if(typeof e.isPointObstacle=="function")a=e.isPointObstacle;else{const C=new z5(e);C.build(n.paper.model,n.model),a=k=>!C.isPointAccessible(k)}for(var s=Dn(t).map(we),l=[],u=o,c,f,h=0,d=s.length;h<=d;h++){var g=null;if(f=c||r,c=s[h],!c){c=i;var y=!n.model.get("source").id||!n.model.get("target").id;if(y&&br(e.draggingRoute)){var _=f===r?o:f,v=c.origin();g=e.draggingRoute.call(n,_,v,e)}}if(g=g||mVe.call(n,f,c,a,e),g===null)return e.fallbackRouter(t,e,n);var S=g[0];S&&S.equals(u)&&g.shift(),u=g[g.length-1]||u,Array.prototype.push.apply(l,g)}return l}const SD=function(t,e,n){return yVe(t,Nt({},Vse,e),n)};var bVe={maxAllowedDirectionChange:45,diagonalCost:function(){var t=this.step;return Math.ceil(Math.sqrt(t*t<<1))},directions:function(){var t=this.step,e=this.cost(),n=this.diagonalCost();return[{offsetX:t,offsetY:0,cost:e},{offsetX:t,offsetY:t,cost:n},{offsetX:0,offsetY:t,cost:e},{offsetX:-t,offsetY:t,cost:n},{offsetX:-t,offsetY:0,cost:e},{offsetX:-t,offsetY:-t,cost:n},{offsetX:0,offsetY:-t,cost:e},{offsetX:t,offsetY:-t,cost:n}]},fallbackRoute:function(t,e,n){var r=t.theta(e),i=[],o={x:e.x,y:t.y},a={x:t.x,y:e.y};if(r%180>90){var s=o;o=a,a=s}var l=r%90<45?o:a,u=new gt(t,l),c=90*Math.ceil(r/90),f=we.fromPolar(u.squaredLength(),ss(c+135),l),h=new gt(e,f),d=u.intersection(h),g=d||e,y=d?g:t,_=360/n.directions.length,v=y.theta(e),S=_c(v+_/2),C=_*Math.floor(S/_);return n.previousDirectionAngle=C,g&&i.push(g.round()),i.push(e),i}};const _Ve=function(t,e,n){if(!br(SD))throw new Error("Metro requires the manhattan router.");return SD(t,Nt({},bVe,e),n)},Gr={AUTO:"auto",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",ANCHOR_SIDE:"anchor-side",MAGNET_SIDE:"magnet-side"},zW=[Gr.LEFT,Gr.RIGHT,Gr.TOP,Gr.BOTTOM];function jW(t,e,n){const r=n.getTangentAtLength(n.getClosestPointLength(e));switch(Math.round(r.angle()/90)*90){case 0:case 360:return t.y<e.y?Gr.TOP:Gr.BOTTOM;case 90:return t.x<e.x?Gr.LEFT:Gr.RIGHT;case 180:return t.y<e.y?Gr.TOP:Gr.BOTTOM;case 270:return t.x<e.x?Gr.LEFT:Gr.RIGHT}}function Use(t,e,n){const r=e.margin||20;let{sourceDirection:i=Gr.AUTO,targetDirection:o=Gr.AUTO}=e;const a=n.sourceView,s=n.targetView,l=!!n.model.source().port,u=!!n.model.target().port;i===Gr.AUTO&&(i=l?Gr.MAGNET_SIDE:Gr.ANCHOR_SIDE),o===Gr.AUTO&&(o=u?Gr.MAGNET_SIDE:Gr.ANCHOR_SIDE);const c=n.sourceBBox,f=n.targetBBox,h=n.sourceAnchor,d=n.targetAnchor;let{x:g,y,width:_=0,height:v=0}=a&&a.model.isElement()?st.fromRectUnion(c,a.model.getBBox()):n.sourceAnchor,{x:S,y:C,width:k=0,height:x=0}=s&&s.model.isElement()?st.fromRectUnion(f,s.model.getBBox()):n.targetAnchor;const m=S+k,T=C+x,P=g+_,I=y+v,M=g-r,L=P+r,R=y-r,V=I+r,z=S-r,ie=m+r,oe=C-r,Se=T+r,Ae=h.clone();let Ee;if(a)a.model.isLink()?Ee=jW(d,h,a):i===Gr.ANCHOR_SIDE?Ee=c.sideNearestToPoint(h):i===Gr.MAGNET_SIDE?Ee=a.model.getBBox().sideNearestToPoint(h):Ee=i;else{const j=new st(g,y,0,0);Ee=zW.includes(i)?i:j.sideNearestToPoint(d)}switch(Ee){case"left":Ae.x=M;break;case"right":Ae.x=L;break;case"top":Ae.y=R;break;case"bottom":Ae.y=V;break}const _e=d.clone();let se;if(s)s.model.isLink()?se=jW(h,d,s):o===Gr.ANCHOR_SIDE?se=f.sideNearestToPoint(d):o===Gr.MAGNET_SIDE?se=s.model.getBBox().sideNearestToPoint(d):se=o;else{const j=new st(S,C,0,0);se=zW.includes(o)?o:j.sideNearestToPoint(h)}switch(se){case"left":_e.x=z;break;case"right":_e.x=ie;break;case"top":_e.y=oe;break;case"bottom":_e.y=Se;break}const{x:ne,y:J}=Ae,{x:B,y:H}=_e,ae=(S+m)/2,te=(C+T)/2,ce=(g+P)/2,ue=(y+I)/2,fe=(ce<ae?P+S:m+g)/2,ye=(ue<te?I+C:T+y)/2;if(Ee==="left"&&se==="right"){if(M<=m){let Y=ye;return P<=S&&(T>=R&&H<J?Y=Math.min(oe,R):C<=V&&H>=J&&(Y=Math.max(Se,V))),[{x:ne,y:J},{x:ne,y:Y},{x:B,y:Y},{x:B,y:H}]}const j=(ne+B)/2;return[{x:j,y:J},{x:j,y:H}]}else if(Ee==="right"&&se==="left"){if(L>=S){let Y=ye;return ne>m&&(T>=R&&H<J?Y=Math.min(oe,R):C<=V&&H>=J&&(Y=Math.max(Se,V))),[{x:ne,y:J},{x:ne,y:Y},{x:B,y:Y},{x:B,y:H}]}const j=(ne+B)/2;return[{x:j,y:J},{x:j,y:H}]}else if(Ee==="top"&&se==="bottom"){if(J<H){let Y=fe,O=J;return J<C&&(m>=M&&B<ne?Y=Math.min(z,M):S<=L&&B>=ne&&(Y=Math.max(ie,L))),[{x:ne,y:O},{x:Y,y:O},{x:Y,y:H},{x:B,y:H}]}const j=(J+H)/2;return[{x:ne,y:j},{x:B,y:j}]}else if(Ee==="bottom"&&se==="top"){if(J-r>H){let Y=fe,O=J;return J>T&&(m>=M&&B<ne?Y=Math.min(z,M):S<=L&&B>=ne&&(Y=Math.max(ie,L))),[{x:ne,y:O},{x:Y,y:O},{x:Y,y:H},{x:B,y:H}]}const j=(J+H)/2;return[{x:ne,y:j},{x:B,y:j}]}else if(Ee==="top"&&se==="top"){let j,Y=Math.min((I+C)/2,H),O=Math.min((y+T)/2,J);if(H<J){if(ne>=ie||ne<=z)return[{x:ne,y:Math.min(J,H)},{x:B,y:Math.min(J,H)}];B>ne?j=Math.min(ne,z):j=Math.max(ne,ie)}else{if(B>=L||B<=M)return[{x:ne,y:Math.min(J,H)},{x:B,y:Math.min(J,H)}];B>=ne?j=Math.max(B,L):j=Math.min(B,M)}return[{x:ne,y:O},{x:j,y:O},{x:j,y:Y},{x:B,y:Y}]}else if(Ee==="bottom"&&se==="bottom"){if(S>=ne+r||m<=ne-r)return[{x:ne,y:Math.max(J,H)},{x:B,y:Math.max(J,H)}];let j,Y,O;return H>J?(Y=Math.max((I+C)/2,H),O=Math.max((I+C)/2,J),B>ne?j=Math.min(ne,z):j=Math.max(ne,ie)):(Y=Math.max((y+T)/2,H),O=Math.max((y+T)/2,J),B>ne?j=Math.min(B,M):j=Math.max(B,L)),[{x:ne,y:O},{x:j,y:O},{x:j,y:Y},{x:B,y:Y}]}else if(Ee==="left"&&se==="left"){let j,Y=Math.min((P+S)/2,B),O=Math.min((g+m)/2,ne);return B>ne?H<=J?j=Math.min(R,H):j=Math.max(V,H):H>=J?j=Math.min(oe,J):j=Math.max(Se,J),[{x:O,y:J},{x:O,y:j},{x:Y,y:j},{x:Y,y:H}]}else if(Ee==="right"&&se==="right"){let j,Y=Math.max((g+m)/2,B),O=Math.max((P+S)/2,ne);return B<ne?H<=J?j=Math.min(R,H):j=Math.max(V,H):H>=J?j=Math.min(oe,J):j=Math.max(Se,J),[{x:O,y:J},{x:O,y:j},{x:Y,y:j},{x:Y,y:H}]}else if(Ee==="top"&&se==="right"){if(J>H){if(ne<B){let Y=(y+T)/2;return Y>te&&Y<Se&&ne<z&&(Y=oe),[{x:ne,y:Y},{x:B,y:Y},{x:B,y:H}]}return[{x:ne,y:H}]}const j=(g+m)/2;if(ne>B&&I>=H)return[{x:ne,y:J},{x:j,y:J},{x:j,y:H}];if(j>M&&J<T){const Y=Math.min(y,C)-r,O=Math.max(P,m)+r;return[{x:ne,y:Y},{x:O,y:Y},{x:O,y:H}]}return[{x:ne,y:J},{x:j,y:J},{x:j,y:H}]}else if(Ee==="top"&&se==="left"){if(J>H){if(ne>B){let Y=(y+T)/2;return Y>te&&Y<Se&&ne>ie&&(Y=oe),[{x:ne,y:Y},{x:B,y:Y},{x:B,y:H}]}return[{x:ne,y:H}]}const j=(P+S)/2;if(ne<B&&I>=H)return[{x:ne,y:J},{x:j,y:J},{x:j,y:H}];if(j<L&&J<T){const Y=Math.min(y,C)-r,O=Math.min(g,S)-r;return[{x:ne,y:Y},{x:O,y:Y},{x:O,y:H}]}return[{x:ne,y:J},{x:j,y:J},{x:j,y:H}]}else if(Ee==="bottom"&&se==="right"){if(J<H){if(ne<B){let Y=(I+C)/2;return Y<te&&Y>oe&&ne<z&&(Y=Se),[{x:ne,y:Y},{x:B,y:Y},{x:B,y:H}]}return[{x:ne,y:H}]}else if(g<B){const Y=Math.max(I,T)+r,O=Math.max(P,m)+r;return[{x:ne,y:Y},{x:O,y:Y},{x:O,y:H}]}const j=fe;return[{x:ne,y:J},{x:j,y:J},{x:j,y:H}]}else if(Ee==="bottom"&&se==="left"){if(J<H){if(ne>B){let Y=(I+C)/2;return Y<te&&Y>oe&&ne>ie&&(Y=Se),[{x:ne,y:Y},{x:B,y:Y},{x:B,y:H}]}return[{x:ne,y:H}]}else if(P>B){const Y=Math.max(I,T)+r,O=Math.min(g,S)-r;return[{x:ne,y:Y},{x:O,y:Y},{x:O,y:H}]}const j=fe;return[{x:ne,y:J},{x:j,y:J},{x:j,y:H}]}else if(Ee==="left"&&se==="bottom"){if(ne>B&&J>=Se)return[{x:B,y:J}];if(ne>=m&&J<H){const O=(P+S)/2;return[{x:O,y:J},{x:O,y:H},{x:B,y:H}]}if(B<P&&T<=y){const O=(y+T)/2;return[{x:ne,y:J},{x:ne,y:O},{x:B,y:O}]}const j=Math.min(z,ne),Y=Math.max(I,T)+r;return[{x:j,y:J},{x:j,y:Y},{x:B,y:Y}]}else if(Ee==="left"&&se==="top"){if(ne>B&&J<oe)return[{x:B,y:J}];if(ne>=m&&J>H){const O=(g+m)/2;return[{x:O,y:J},{x:O,y:H},{x:B,y:H}]}if(B<=P&&H>J){const O=(C+I)/2;return[{x:ne,y:J},{x:ne,y:O},{x:B,y:O}]}const j=H<J?Math.min(g,S)-r:M,Y=Math.min(y,C)-r;return[{x:j,y:J},{x:j,y:Y},{x:B,y:Y}]}else if(Ee==="right"&&se==="top"){if(ne<B&&J<oe)return[{x:B,y:J}];if(P<S&&J>H){let O=(P+S)/2;return[{x:O,y:J},{x:O,y:H},{x:B,y:H}]}if(B<ne&&C>I){const O=(I+C)/2;return[{x:ne,y:J},{x:ne,y:O},{x:B,y:O}]}const j=Math.max(P,m)+r,Y=Math.min(y,C)-r;return[{x:j,y:J},{x:j,y:Y},{x:B,y:Y}]}else if(Ee==="right"&&se==="bottom"){if(ne<B&&J>=Se)return[{x:B,y:J}];if(ne<=S&&J<H){const O=(P+S)/2;return[{x:O,y:J},{x:O,y:H},{x:B,y:H}]}if(B>g&&T<y){const O=(y+T)/2;return[{x:ne,y:J},{x:ne,y:O},{x:B,y:O}]}const j=Math.max(ie,ne),Y=Math.max(I,T)+r;return[{x:j,y:J},{x:j,y:Y},{x:B,y:Y}]}}Use.Directions=Gr;const SVe=Use,wVe=Object.freeze(Object.defineProperty({__proto__:null,manhattan:SD,metro:_Ve,normal:nVe,oneSide:rVe,orthogonal:_D,rightAngle:SVe},Symbol.toStringTag,{value:"Module"})),Qm={POINT:"point",CUBIC:"cubic",LINE:"line",GAP:"gap"},xVe=Object.values(Qm),CVe=10,kVe=1,j5=function(t,e,n=[],r={}){const{cornerType:i=Qm.POINT,cornerRadius:o=CVe,cornerPreserveAspectRatio:a=!1,precision:s=kVe,raw:l=!1}=r;if(xVe.indexOf(i)===-1)throw new Error("Invalid `cornerType` provided to `straight` connector.");let u;if(i===Qm.POINT||!o){const c=[t].concat(n).concat([e]),f=new $r(c);u=new Ct(f)}else{u=new Ct,u.appendSegment(Ct.createSegment("M",t));let c;const f=n.length;for(let h=0;h<f;h++){const d=new we(n[h]),g=n[h-1]||t,y=n[h+1]||e,_=c||d.distance(g)/2;c=d.distance(y)/2;let v,S;a?v=S=-Math.min(o,_,c):(v=-Math.min(o,_),S=-Math.min(o,c));const C=d.clone().move(g,v).round(s),k=d.clone().move(y,S).round(s);switch(u.appendSegment(Ct.createSegment("L",C)),i){case Qm.CUBIC:{const x=.3333333333333333,m=2/3,T=new we(x*C.x+m*d.x,m*d.y+x*C.y),P=new we(x*k.x+m*d.x,m*d.y+x*k.y);u.appendSegment(Ct.createSegment("C",T,P,k));break}case Qm.LINE:{u.appendSegment(Ct.createSegment("L",k));break}case Qm.GAP:{u.appendSegment(Ct.createSegment("M",k));break}}}u.appendSegment(Ct.createSegment("L",e))}return l?u:u.serialize()};var TVe=5,UW=["arc","gap","cubic"],AVe=0,WW=1,EVe=["smooth"],AC=1/3,EC=2/3;function AI(t,e,n){var r=[].concat(t,n,e);return r.reduce(function(i,o,a){var s=r[a+1];return s!=null&&(i[a]=ug(o,s)),i},[])}function PVe(t){var e=t.paper,n=e._jumpOverUpdateList;if(n==null){n=e._jumpOverUpdateList=[];var r=e.model;r.on("batch:stop",function(){this.hasActiveBatch()||OVe(e)}),r.on("reset",function(){n=e._jumpOverUpdateList=[]})}n.indexOf(t)<0&&(n.push(t),t.listenToOnce(t.model,"change:connector remove",function(){n.splice(n.indexOf(t),1)}))}function OVe(t){for(var e=t._jumpOverUpdateList,n=0;n<e.length;n++){const r=e[n],i=r.getFlag(r.constructor.Flags.CONNECTOR);r.requestUpdate(i)}}function IVe(t,e){return Dn(e).reduce(function(n,r){var i=t.intersection(r);return i&&n.push(i),n},[])}function HW(t,e){return ug(t,e).squaredLength()}function $Ve(t,e,n){return e.reduce(function(r,i,o){if(i.skip===!0)return r;var a=r.pop()||t,s=dT(i).move(a.start,-n),l=dT(i).move(a.start,+n),u=e[o+1];if(u!=null){var c=l.distance(u);c<=n&&(l=u.move(a.start,c),u.skip=!0)}else{var f=s.distance(a.end);if(f<n*2+WW)return r.push(a),r}var h=l.distance(a.start);if(h<n*2+WW)return r.push(a),r;var d=ug(s,l);return d.isJump=!0,r.push(ug(a.start,s),d,ug(l,a.end)),r},[])}function GW(t,e,n,r){var i=new Ct,o;return o=Ct.createSegment("M",t[0].start),i.appendSegment(o),Dn(t).forEach(function(a,s){if(a.isJump){var l,u,c,f;if(n==="arc"){l=-90,u=a.start.difference(a.end);var h=+(u.x<0||u.x===0&&u.y<0);h&&(l+=180);var d=a.midpoint(),g=new gt(d,a.end).rotate(d,l),y;y=new gt(a.start,d),c=y.pointAt(2/3).rotate(a.start,l),f=g.pointAt(1/3).rotate(g.end,-l),o=Ct.createSegment("C",c,f,g.end),i.appendSegment(o),y=new gt(d,a.end),c=g.pointAt(1/3).rotate(g.end,l),f=y.pointAt(1/3).rotate(a.end,-l),o=Ct.createSegment("C",c,f,a.end),i.appendSegment(o)}else if(n==="gap")o=Ct.createSegment("M",a.end),i.appendSegment(o);else if(n==="cubic"){l=a.start.theta(a.end);var _=e*.6,v=e*1.35;u=a.start.difference(a.end),h=+(u.x<0||u.x===0&&u.y<0),h&&(v*=-1),c=we(a.start.x+_,a.start.y+v).rotate(a.start,l),f=we(a.end.x-_,a.end.y+v).rotate(a.end,l),o=Ct.createSegment("C",c,f,a.end),i.appendSegment(o)}}else{var S=t[s+1];r==0||!S||S.isJump?(o=Ct.createSegment("L",a.end),i.appendSegment(o)):LVe(r,i,a.end,a.start,S.end)}}),i}function LVe(t,e,n,r,i){var o=n.distance(r)/2,a=n.distance(i)/2,s=-Math.min(t,o),l=-Math.min(t,a),u=n.clone().move(r,s).round(),c=n.clone().move(i,l).round(),f=new we(AC*u.x+EC*n.x,EC*n.y+AC*u.y),h=new we(AC*c.x+EC*n.x,EC*n.y+AC*c.y),d;d=Ct.createSegment("L",u),e.appendSegment(d),d=Ct.createSegment("C",f,h,c),e.appendSegment(d)}const DVe=function(t,e,n,r){PVe(this);var i=r.raw,o=r.size||TVe,a=r.jump&&(""+r.jump).toLowerCase(),s=r.radius||AVe,l=r.ignoreConnectors||EVe;UW.indexOf(a)===-1&&(a=UW[0]);var u=this.paper,c=u.model,f=c.getLinks();if(f.length===1)return GW(AI(t,e,n),o,a,s);var h=this.model,d=f.indexOf(h),g=u.options.defaultConnector||{},y=f.filter(function(x,m){var T=x.get("connector")||g;return Dn(l).includes(T.name)?!1:m>d?T.name!=="jumpover":!0}),_=y.map(function(x){return u.findViewByModel(x)}),v=AI(t,e,n),S=_.map(function(x){return x==null?[]:x===this?v:AI(x.sourcePoint,x.targetPoint,x.route)},this),C=v.reduce(function(x,m){var T=y.reduce(function(P,I,M){if(I!==h){var L=IVe(m,S[M]);P.push.apply(P,L)}return P},[]).sort(function(P,I){return HW(m.start,P)-HW(m.start,I)});return T.length>0?x.push.apply(x,$Ve(m,T,o)):x.push(m),x},[]),k=GW(C,o,a,s);return i?k:k.serialize()},MVe=function(t,e,n=[],r={}){const{raw:i}=r;return j5(t,e,n,{cornerType:"point",raw:i})},NVe=10,FVe=0,RVe=function(t,e,n=[],r={}){const{radius:i=NVe,raw:o}=r;return j5(t,e,n,{cornerType:"cubic",cornerRadius:i,precision:FVe,raw:o})},VVe=function(t,e,n,r){var i=r&&r.raw,o;if(n&&n.length!==0){var a=[t].concat(n).concat([e]),s=nr.throughPoints(a);o=new Ct(s)}else{o=new Ct;var l;if(l=Ct.createSegment("M",t),o.appendSegment(l),Math.abs(t.x-e.x)>=Math.abs(t.y-e.y)){var u=(t.x+e.x)/2;l=Ct.createSegment("C",u,t.y,u,e.y,e.x,e.y),o.appendSegment(l)}else{var c=(t.y+e.y)/2;l=Ct.createSegment("C",t.x,c,e.x,c,e.x,e.y),o.appendSegment(l)}}return i?o:o.serialize()},Cl={AUTO:"auto",HORIZONTAL:"horizontal",VERTICAL:"vertical",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},ba={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",AUTO:"auto",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},U5=function(t,e,n=[],r={},i){const o=!!r.raw,{direction:a=Cl.AUTO,precision:s=3}=r,l={coeff:r.distanceCoefficient||.6,angleTangentCoefficient:r.angleTangentCoefficient||80,tau:r.tension||.5,sourceTangent:r.sourceTangent?new we(r.sourceTangent):null,targetTangent:r.targetTangent?new we(r.targetTangent):null,rotate:!!r.rotate};typeof r.sourceDirection=="string"?l.sourceDirection=r.sourceDirection:typeof r.sourceDirection=="number"?l.sourceDirection=new we(1,0).rotate(null,r.sourceDirection):l.sourceDirection=r.sourceDirection?new we(r.sourceDirection).normalize():null,typeof r.targetDirection=="string"?l.targetDirection=r.targetDirection:typeof r.targetDirection=="number"?l.targetDirection=new we(1,0).rotate(null,r.targetDirection):l.targetDirection=r.targetDirection?new we(r.targetDirection).normalize():null;const u=[t,...n,e].map(y=>new we(y));let c;if(l.sourceTangent)c=l.sourceTangent;else{const y=WVe(i,u,a,l),_=u[0].distance(u[1])*l.coeff,v=u[1].difference(u[0]).normalize(),S=wD(y,v);if(S>Math.PI/4){const C=_+(S-Math.PI/4)*l.angleTangentCoefficient;c=y.clone().scale(C,C)}else c=y.clone().scale(_,_)}let f;if(l.targetTangent)f=l.targetTangent;else{const y=HVe(i,u,a,l),_=u.length-1,v=u[_-1].distance(u[_])*l.coeff,S=u[_-1].difference(u[_]).normalize(),C=wD(y,S);if(C>Math.PI/4){const k=v+(C-Math.PI/4)*l.angleTangentCoefficient;f=y.clone().scale(k,k)}else f=y.clone().scale(v,v)}const d=qVe(u,c,f,l).map(y=>YVe(y,l)),g=new Ct(d).round(s);return o?g:g.serialize()};U5.Directions=Cl;U5.TangentDirections=ba;function BVe(t,e,n){const{sourceBBox:r}=t;let i,o;if(!t.sourceView)r.x>e[1].x?i="right":i="left";else if(o=t.sourceView.model.angle(),n.rotate&&o){const s=t.sourceView.getNodeUnrotatedBBox(t.sourceView.el),l=e[0].clone();l.rotate(r.center(),o),i=s.sideNearestToPoint(l)}else i=r.sideNearestToPoint(e[0]);let a;switch(i){case"left":a=new we(-1,0);break;case"right":default:a=new we(1,0);break}return n.rotate&&o&&a.rotate(null,-o),a}function zVe(t,e,n){const{targetBBox:r}=t;let i,o;if(!t.targetView)r.x>e[e.length-2].x?i="left":i="right";else if(o=t.targetView.model.angle(),n.rotate&&o){const s=t.targetView.getNodeUnrotatedBBox(t.targetView.el),l=e[e.length-1].clone();l.rotate(r.center(),o),i=s.sideNearestToPoint(l)}else i=r.sideNearestToPoint(e[e.length-1]);let a;switch(i){case"left":a=new we(-1,0);break;case"right":default:a=new we(1,0);break}return n.rotate&&o&&a.rotate(null,-o),a}function jVe(t,e,n){const{sourceBBox:r}=t;let i,o;if(!t.sourceView)r.y>e[1].y?i="bottom":i="top";else if(o=t.sourceView.model.angle(),n.rotate&&o){const s=t.sourceView.getNodeUnrotatedBBox(t.sourceView.el),l=e[0].clone();l.rotate(r.center(),o),i=s.sideNearestToPoint(l)}else i=r.sideNearestToPoint(e[0]);let a;switch(i){case"top":a=new we(0,-1);break;case"bottom":default:a=new we(0,1);break}return n.rotate&&o&&a.rotate(null,-o),a}function UVe(t,e,n){const{targetBBox:r}=t;let i,o;if(!t.targetView)r.y>e[e.length-2].y?i="top":i="bottom";else if(o=t.targetView.model.angle(),n.rotate&&o){const s=t.targetView.getNodeUnrotatedBBox(t.targetView.el),l=e[e.length-1].clone();l.rotate(r.center(),o),i=s.sideNearestToPoint(l)}else i=r.sideNearestToPoint(e[e.length-1]);let a;switch(i){case"top":a=new we(0,-1);break;case"bottom":default:a=new we(0,1);break}return n.rotate&&o&&a.rotate(null,-o),a}function qW(t,e,n){const{sourceBBox:r}=t;let i,o;if(!t.sourceView)i=r.sideNearestToPoint(e[1]);else if(o=t.sourceView.model.angle(),n.rotate&&o){const s=t.sourceView.getNodeUnrotatedBBox(t.sourceView.el),l=e[0].clone();l.rotate(r.center(),o),i=s.sideNearestToPoint(l)}else i=r.sideNearestToPoint(e[0]);let a;switch(i){case"top":a=new we(0,-1);break;case"bottom":a=new we(0,1);break;case"right":a=new we(1,0);break;case"left":a=new we(-1,0);break}return n.rotate&&o&&a.rotate(null,-o),a}function YW(t,e,n){const{targetBBox:r}=t;let i,o;if(!t.targetView)i=r.sideNearestToPoint(e[e.length-2]);else if(o=t.targetView.model.angle(),n.rotate&&o){const s=t.targetView.getNodeUnrotatedBBox(t.targetView.el),l=e[e.length-1].clone();l.rotate(r.center(),o),i=s.sideNearestToPoint(l)}else i=r.sideNearestToPoint(e[e.length-1]);let a;switch(i){case"top":a=new we(0,-1);break;case"bottom":a=new we(0,1);break;case"right":a=new we(1,0);break;case"left":a=new we(-1,0);break}return n.rotate&&o&&a.rotate(null,-o),a}function KW(t,e,n){return e[1].difference(e[0]).normalize()}function XW(t,e,n){const r=e.length-1;return e[r-1].difference(e[r]).normalize()}function JW(t,e,n){const{sourceBBox:r}=t,i=r.center();return e[0].difference(i).normalize()}function ZW(t,e,n){const{targetBBox:r}=t,i=r.center();return e[e.length-1].difference(i).normalize()}function WVe(t,e,n,r){if(r.sourceDirection)switch(r.sourceDirection){case ba.UP:return new we(0,-1);case ba.DOWN:return new we(0,1);case ba.LEFT:return new we(-1,0);case ba.RIGHT:return new we(1,0);case ba.AUTO:return qW(t,e,r);case ba.CLOSEST_POINT:return KW(t,e);case ba.OUTWARDS:return JW(t,e);default:return r.sourceDirection}switch(n){case Cl.HORIZONTAL:return BVe(t,e,r);case Cl.VERTICAL:return jVe(t,e,r);case Cl.CLOSEST_POINT:return KW(t,e);case Cl.OUTWARDS:return JW(t,e);case Cl.AUTO:default:return qW(t,e,r)}}function HVe(t,e,n,r){if(r.targetDirection)switch(r.targetDirection){case ba.UP:return new we(0,-1);case ba.DOWN:return new we(0,1);case ba.LEFT:return new we(-1,0);case ba.RIGHT:return new we(0,1);case ba.AUTO:return YW(t,e,r);case ba.CLOSEST_POINT:return XW(t,e);case ba.OUTWARDS:return ZW(t,e);default:return r.targetDirection}switch(n){case Cl.HORIZONTAL:return zVe(t,e,r);case Cl.VERTICAL:return UVe(t,e,r);case Cl.CLOSEST_POINT:return XW(t,e);case Cl.OUTWARDS:return ZW(t,e);case Cl.AUTO:default:return YW(t,e,r)}}function GVe(t,e){const n=Math.cos(e),r=Math.sin(e),i=n*t.x-r*t.y,o=r*t.x+n*t.y;t.x=i,t.y=o}function wD(t,e){let n=t.dot(e)/(t.magnitude()*e.magnitude());return n<-1&&(n=-1),n>1&&(n=1),Math.acos(n)}function QW(t,e){return t.x*e.y-t.y*e.x}function qVe(t,e,n,r){const{tau:i,coeff:o}=r,a=[],s=[],l=[],u=t.length-1;for(let c=0;c<u;c++)a[c]=t[c].distance(t[c+1]);s[0]=e,s[u]=n;for(let c=1;c<u;c++){let f,h;c===1?f=t[c-1].clone().offset(s[c-1].x,s[c-1].y):f=t[c-1].clone(),c===u-1?h=t[c+1].clone().offset(s[c+1].x,s[c+1].y):h=t[c+1].clone();const d=f.difference(t[c]).normalize(),g=h.difference(t[c]).normalize(),y=wD(d,g);let _=(Math.PI-y)/2,v;const S=QW(d,g);let C;C=QW(t[c].difference(t[c+1]),t[c].difference(t[c-1])),S<0&&(_=-_),y<Math.PI/2&&(_<0&&C<0||_>0&&C>0)&&(_=_-Math.PI),v=g.clone(),GVe(v,_);const k=v.clone(),x=v.clone(),m=a[c-1]*o,T=a[c]*o;k.scale(m,m),x.scale(T,T),s[c]=[k,x]}for(let c=0;c<u;c++){let f,h;c===0?f=t[c+1].difference(s[c].x/i,s[c].y/i):f=t[c+1].difference(s[c][1].x/i,s[c][1].y/i),c===u-1?h=t[c].clone().offset(s[c+1].x/i,s[c+1].y/i):h=t[c].difference(s[c+1][0].x/i,s[c+1][0].y/i),l[c]=[f,t[c],t[c+1],h]}return l}function YVe(t,e){const{tau:n}=e,r=new we;r.x=t[1].x+(t[2].x-t[0].x)/(6*n),r.y=t[1].y+(t[2].y-t[0].y)/(6*n);const i=new we;return i.x=t[2].x+(t[3].x-t[1].x)/(6*n),i.y=t[2].y+(t[3].y-t[1].y)/(6*n),new nr(t[1],r,i,t[2])}const KVe=Object.freeze(Object.defineProperty({__proto__:null,curve:U5,jumpover:DVe,normal:MVe,rounded:RVe,smooth:VVe,straight:j5},Symbol.toStringTag,{value:"Module"})),rn={TOOLS:Cn.Flags.TOOLS,RENDER:"RENDER",UPDATE:"UPDATE",LEGACY_TOOLS:"LEGACY_TOOLS",LABELS:"LABELS",VERTICES:"VERTICES",SOURCE:"SOURCE",TARGET:"TARGET",CONNECTOR:"CONNECTOR"},v1=Cn.extend({className:function(){var t=Cn.prototype.className.apply(this).split(" ");return t.push("link"),t.join(" ")},options:{shortLinkLength:105,doubleLinkTools:!1,longLinkLength:155,linkToolsOffset:40,doubleLinkToolsOffset:65,sampleInterval:50},_labelCache:null,_labelSelectors:null,_markerCache:null,_V:null,_dragData:null,metrics:null,decimalsRounding:2,initialize:function(){Cn.prototype.initialize.apply(this,arguments),this._labelCache={},this._labelSelectors={},this._markerCache={},this._V={},this.cleanNodesCache()},presentationAttributes:{markup:[rn.RENDER],attrs:[rn.UPDATE],router:[rn.UPDATE],connector:[rn.CONNECTOR],smooth:[rn.UPDATE],manhattan:[rn.UPDATE],toolMarkup:[rn.LEGACY_TOOLS],labels:[rn.LABELS],labelMarkup:[rn.LABELS],vertices:[rn.VERTICES,rn.UPDATE],vertexMarkup:[rn.VERTICES],source:[rn.SOURCE,rn.UPDATE],target:[rn.TARGET,rn.UPDATE]},initFlag:[rn.RENDER,rn.SOURCE,rn.TARGET,rn.TOOLS],UPDATE_PRIORITY:1,confirmUpdate:function(t,e){if(e||(e={}),this.hasFlag(t,rn.SOURCE)){if(!this.updateEndProperties("source"))return t;t=this.removeFlag(t,rn.SOURCE)}if(this.hasFlag(t,rn.TARGET)){if(!this.updateEndProperties("target"))return t;t=this.removeFlag(t,rn.TARGET)}const{paper:n,sourceView:r,targetView:i}=this;if(n&&(r&&!n.isViewMounted(r)||i&&!n.isViewMounted(i)))return t;if(this.hasFlag(t,rn.RENDER))return this.render(),this.updateHighlighters(!0),this.updateTools(e),t=this.removeFlag(t,[rn.RENDER,rn.UPDATE,rn.VERTICES,rn.LABELS,rn.TOOLS,rn.LEGACY_TOOLS,rn.CONNECTOR]),t;let o=!1;this.hasFlag(t,rn.VERTICES)&&(this.renderVertexMarkers(),t=this.removeFlag(t,rn.VERTICES));const{model:a}=this,{attributes:s}=a;let l=this.hasFlag(t,rn.LABELS),u=this.hasFlag(t,rn.LEGACY_TOOLS);l&&(this.onLabelsChange(a,s.labels,e),t=this.removeFlag(t,rn.LABELS),o=!0),u&&(this.renderTools(),t=this.removeFlag(t,rn.LEGACY_TOOLS));const c=this.hasFlag(t,rn.UPDATE),f=this.hasFlag(t,rn.CONNECTOR);return(c||f)&&(c?e.translateBy&&a.isRelationshipEmbeddedIn(e.translateBy)?this.translate(e.tx,e.ty):this.update():(this.updatePath(),this.updateDOM()),this.updateTools(e),t=this.removeFlag(t,[rn.UPDATE,rn.TOOLS,rn.CONNECTOR]),l=!1,u=!1,o=!0),l&&this.updateLabelPositions(),u&&this.updateToolsPosition(),o&&this.updateHighlighters(),this.hasFlag(t,rn.TOOLS)&&(this.updateTools(e),t=this.removeFlag(t,rn.TOOLS)),t},requestConnectionUpdate:function(t){this.requestUpdate(this.getFlag(rn.UPDATE),t)},isLabelsRenderRequired:function(t={}){const e=this.model.previous("labels");if(!e)return!0;if("propertyPathArray"in t&&"propertyValue"in t){var n=t.propertyPathArray||[],r=n.length;if(r>1){var i=!!e[n[1]];if(i){if(r===2)return"markup"in Object(t.propertyValue);if(n[2]!=="markup")return!1}}}return!0},onLabelsChange:function(t,e,n){this.isLabelsRenderRequired(n)?this.renderLabels():this.updateLabels()},render:function(){return this.vel.empty(),this.unmountLabels(),this._V={},this.renderMarkup(),this.renderLabels(),this.update(),this},renderMarkup:function(){var t=this.model,e=t.get("markup")||t.markup;if(!e)throw new Error("dia.LinkView: markup required");if(Array.isArray(e))return this.renderJSONMarkup(e);if(typeof e=="string")return this.renderStringMarkup(e);throw new Error("dia.LinkView: invalid markup")},renderJSONMarkup:function(t){var e=this.parseDOMJSON(t,this.el);this.selectors=e.selectors,this.vel.append(e.fragment)},renderStringMarkup:function(t){var e=Ue(t);Array.isArray(e)||(e=[e]);for(var n=this._V,r=0,i=e.length;r<i;r++){var o=e[r],a=o.attr("class");a&&(a=h7e(a),n[Vn.camelCase(a)]=o)}this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),this.vel.append(e)},_getLabelMarkup:function(t){if(t){if(Array.isArray(t))return this.parseDOMJSON(t,null);if(typeof t=="string")return this._getLabelStringMarkup(t);throw new Error("dia.linkView: invalid label markup")}},_getLabelStringMarkup:function(t){var e=Ue(t),n=document.createDocumentFragment();if(!Array.isArray(e))n.appendChild(e.node);else for(var r=0,i=e.length;r<i;r++){var o=e[r].node;n.appendChild(o)}return{fragment:n,selectors:{}}},_normalizeLabelMarkup:function(t){if(t){var e=t.fragment;if(!(t.fragment instanceof DocumentFragment)||!t.fragment.hasChildNodes())throw new Error("dia.LinkView: invalid label markup.");var n,r=e.childNodes;return r.length>1||r[0].nodeName.toUpperCase()!=="G"?n=Ue("g").append(e):n=Ue(r[0]),n.addClass("label"),{node:n.node,selectors:t.selectors}}},renderLabels:function(){var t=this._V,e=t.labels,n=this._labelCache={},r=this._labelSelectors={},i=this.model,o=i.attributes.labels||[],a=o.length;if(a===0)return e&&e.remove(),this;e?e.empty():(e=t.labels=Ue("g").addClass("labels"),this.options.labelsLayer&&(e.addClass(au(Mi(this,"className"))),e.attr("model-id",i.id)));for(var s=0;s<a;s++){var l=o[s],u=this._normalizeLabelMarkup(this._getLabelMarkup(l.markup)),c,f;if(u)c=u.node,f=u.selectors;else{var h=i._builtins.defaultLabel,d=this._normalizeLabelMarkup(this._getLabelMarkup(h.markup)),g=i._getDefaultLabel(),y=this._normalizeLabelMarkup(this._getLabelMarkup(g.markup)),_=y||d;c=_.node,f=_.selectors}c.setAttribute("label-idx",s),e.append(c),n[s]=c;var v=this.selector;if(f[v])throw new Error("dia.LinkView: ambiguous label root selector.");f[v]=c,r[s]=f}return e.parent()||this.mountLabels(),this.updateLabels(),this},mountLabels:function(){const{el:t,paper:e,model:n,_V:r,options:i}=this,{labels:o}=r;if(!o||!n.hasLabels())return;const{node:a}=o;i.labelsLayer?e.getLayerView(i.labelsLayer).insertSortedNode(a,n.get("z")):a.parentNode!==t&&t.appendChild(a)},unmountLabels:function(){const{options:t,_V:e}=this;if(!e)return;const{labels:n}=e;n&&t.labelsLayer&&n.remove()},findLabelNode:function(t,e){const n=this._labelCache[t];if(!n)return null;const r=this._labelSelectors[t],[i=null]=this.findBySelector(e,n,r);return i},_mergeLabelAttrs:function(t,e,n,r){return e===null?null:e===void 0?n===null?null:n===void 0?t?void 0:r:t?n:Ri({},r,n):t?Ri({},n,e):Ri({},r,n,e)},_mergeLabelSize:function(t,e){return t===null?null:t===void 0?e===null?null:e===void 0?void 0:e:Ri({},e,t)},updateLabels:function(){if(!this._V.labels)return this;for(var t=this.model,e=t.get("labels")||[],n=this.can("labelMove"),r=t._builtins.defaultLabel,i=r.attrs,o=t._getDefaultLabel(),a=o.markup,s=o.attrs,l=o.size,u=0,c=e.length;u<c;u++){var f=this._labelCache[u];f.setAttribute("cursor",n?"move":"default");var h=this._labelSelectors[u],d=e[u],g=d.markup,y=d.attrs,_=d.size,v=this._mergeLabelAttrs(g||a,y,s,i),S=this._mergeLabelSize(_,l);this.updateDOMSubtreeAttributes(f,v,{rootBBox:new st(S),selectors:h})}return this},renderTools:function(){if(!this._V.linkTools)return this;var t=Vn(this._V.linkTools.node).empty(),e=ga(this.model.get("toolMarkup")||this.model.toolMarkup),n=Ue(e());if(t.append(n.node),this._toolCache=n,this.options.doubleLinkTools){var r;this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup?(e=ga(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup),r=Ue(e())):r=n.clone(),t.append(r.node),this._tool2Cache=r}return this},renderVertexMarkers:function(){if(!this._V.markerVertices)return this;var t=Vn(this._V.markerVertices.node).empty(),e=ga(this.model.get("vertexMarkup")||this.model.vertexMarkup);return this.model.vertices().forEach(function(n,r){t.append(Ue(e(Nt({idx:r},n))).node)}),this},renderArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;var t=Vn(this._V.markerArrowheads.node);t.empty();var e=ga(this.model.get("arrowheadMarkup")||this.model.arrowheadMarkup);return this._V.sourceArrowhead=Ue(e({end:"source"})),this._V.targetArrowhead=Ue(e({end:"target"})),t.append(this._V.sourceArrowhead.node,this._V.targetArrowhead.node),this},removeRedundantLinearVertices:function(t){const n=this.model,r=n.vertices(),i=[this.sourceAnchor,...r,this.targetAnchor],o=i.length,a=new $r(i);a.simplify({threshold:.001});const s=a.points.map(u=>u.toJSON()),l=s.length;return o===l?0:(n.vertices(s.slice(1,l-1),t),o-l)},updateDefaultConnectionPath:function(){var t=this._V;t.connection&&t.connection.attr("d",this.getSerializedConnection()),t.connectionWrap&&t.connectionWrap.attr("d",this.getSerializedConnection()),t.markerSource&&t.markerTarget&&this._translateAndAutoOrientArrows(t.markerSource,t.markerTarget)},getEndView:function(t){switch(t){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("dia.LinkView: type parameter required.")}},getEndAnchor:function(t){switch(t){case"source":return new we(this.sourceAnchor);case"target":return new we(this.targetAnchor);default:throw new Error("dia.LinkView: type parameter required.")}},getEndConnectionPoint:function(t){switch(t){case"source":return new we(this.sourcePoint);case"target":return new we(this.targetPoint);default:throw new Error("dia.LinkView: type parameter required.")}},getEndMagnet:function(t){switch(t){case"source":var e=this.sourceView;if(!e)break;return this.sourceMagnet||e.el;case"target":var n=this.targetView;if(!n)break;return this.targetMagnet||n.el;default:throw new Error("dia.LinkView: type parameter required.")}return null},update:function(){return this.updateRoute(),this.updatePath(),this.updateDOM(),this},translate:function(t=0,e=0){const{route:n,path:r}=this;if(!n||!r)return;const i=new $r(n);i.translate(t,e),this.route=i.points,this._translateConnectionPoints(t,e),r.translate(t,e),this.updateDOM()},updateDOM(){const{el:t,model:e,selectors:n}=this;this.cleanNodesCache(),this.updateDOMSubtreeAttributes(t,e.attr(),{selectors:n}),this.updateDefaultConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.options.perpendicular=null},updateRoute:function(){const{model:t}=this,e=t.vertices(),n=this.findAnchors(e),r=this.sourceAnchor=n.source,i=this.targetAnchor=n.target,o=this.findRoute(e);this.route=o;var a=this.findConnectionPoints(o,r,i);this.sourcePoint=a.source,this.targetPoint=a.target},updatePath:function(){const{route:t,sourcePoint:e,targetPoint:n}=this,r=this.findMarkerPoints(t,e,n),i=this.findPath(t,r.source||e,r.target||n);this.path=i},findMarkerPoints:function(t,e,n){var r=t[0],i=t[t.length-1],o=this._markerCache,a,s;return this._V.markerSource&&(o.sourceBBox=o.sourceBBox||this._V.markerSource.getBBox(),a=we(e).move(r||n,o.sourceBBox.width*this._V.markerSource.scale().sx*-1).round()),this._V.markerTarget&&(o.targetBBox=o.targetBBox||this._V.markerTarget.getBBox(),s=we(n).move(i||e,o.targetBBox.width*this._V.markerTarget.scale().sx*-1).round()),o.sourcePoint=a||e.clone(),o.targetPoint=s||n.clone(),{source:a,target:s}},findAnchorsOrdered:function(t,e,n,r){var i,o,a,s,l=this.model,u=l.get(t),c=l.get(n),f=this.getEndView(t),h=this.getEndView(n),d=this.getEndMagnet(t),g=this.getEndMagnet(n);f?(e?a=new we(e):h?a=g:a=new we(c),i=this.getAnchor(u.anchor,f,d,a,t)):i=new we(u),h?(s=new we(r||i),o=this.getAnchor(c.anchor,h,g,s,n)):o=new we(c);var y={};return y[t]=i,y[n]=o,y},findAnchors:function(t){var e=this.model,n=t[0],r=t[t.length-1];return e.target().priority&&!e.source().priority?this.findAnchorsOrdered("target",r,"source",n):this.findAnchorsOrdered("source",n,"target",r)},findConnectionPoints:function(t,e,n){var r=t[0],i=t[t.length-1],o=this.model,a=o.get("source"),s=o.get("target"),l=this.sourceView,u=this.targetView,c=this.paper.options,f,h,d;if(l&&!l.isNodeConnection(this.sourceMagnet)){f=this.sourceMagnet||l.el;var g=a.connectionPoint||c.defaultConnectionPoint,y=r||n,_=new gt(y,e);d=this.getConnectionPoint(g,l,f,_,"source")}else d=e;var v;if(u&&!u.isNodeConnection(this.targetMagnet)){h=this.targetMagnet||u.el;var S=s.connectionPoint||c.defaultConnectionPoint,C=i||e,k=new gt(C,n);v=this.getConnectionPoint(S,u,h,k,"target")}else v=n;return{source:d,target:v}},getAnchor:function(t,e,n,r,i){var o=e.isNodeConnection(n),a=this.paper.options;if(t||(o?t=a.defaultLinkAnchor:a.perpendicularLinks||this.options.perpendicular?t={name:"perpendicular"}:t=a.defaultAnchor),!t)throw new Error("Anchor required.");var s;if(typeof t=="function")s=t;else{var l=t.name,u=o?"linkAnchorNamespace":"anchorNamespace";if(s=a[u][l],typeof s!="function")throw new Error("Unknown anchor: "+l)}var c=s.call(this,e,n,r,t.args||{},i,this);return c?c.round(this.decimalsRounding):new we},getConnectionPoint:function(t,e,n,r,i){var o,a=r.end,s=this.paper.options;if(typeof s.linkConnectionPoint=="function"){var l=n===e.el?void 0:n;if(o=s.linkConnectionPoint(this,e,l,r.start,i),o)return o}if(!t)return a;var u;if(typeof t=="function")u=t;else{var c=t.name;if(u=s.connectionPointNamespace[c],typeof u!="function")throw new Error("Unknown connection point: "+c)}return o=u.call(this,r,e,n,t.args||{},i,this),o?o.round(this.decimalsRounding):a},_translateConnectionPoints:function(t,e){var n=this._markerCache;n.sourcePoint.offset(t,e),n.targetPoint.offset(t,e),this.sourcePoint.offset(t,e),this.targetPoint.offset(t,e),this.sourceAnchor.offset(t,e),this.targetAnchor.offset(t,e)},_getDefaultLabelPositionProperty:function(){var t=this.model,e=t._builtins.defaultLabel,n=e.position,r=t._getDefaultLabel(),i=this._normalizeLabelPosition(r.position);return Ri({},n,i)},_normalizeLabelPosition:function(t){return typeof t=="number"?{distance:t,offset:null,angle:0,args:null}:t},_mergeLabelPositionProperty:function(t,e){return t===null?null:t===void 0?e===null?null:e:Ri({},e,t)},updateLabelPositions:function(){if(!this._V.labels)return this;var t=this.path;if(!t)return this;var e=this.model,n=e.get("labels")||[];if(!n.length)return this;for(var r=this._getDefaultLabelPositionProperty(),i=0,o=n.length;i<o;i++){var a=this._labelCache[i];if(a){var s=n[i],l=this._normalizeLabelPosition(s.position),u=this._mergeLabelPositionProperty(l,r),c=this._getLabelTransformationMatrix(u);a.setAttribute("transform",Ue.matrixToTransformString(c)),this._cleanLabelMatrices(i)}}return this},_cleanLabelMatrices:function(t){const{metrics:e,_labelSelectors:n}=this,r=n[t];if(r)for(let i in r){const{id:o}=r[i];o&&o in e&&delete e[o].magnetMatrix}},updateToolsPosition:function(){if(!this._V.linkTools)return this;var t="",e=this.options.linkToolsOffset,n=this.getConnectionLength();if(!Number.isNaN(n)){n<this.options.shortLinkLength&&(t="scale(.5)",e/=2);var r=this.getPointAtLength(e);if(this._toolCache.attr("transform","translate("+r.x+", "+r.y+") "+t),this.options.doubleLinkTools&&n>=this.options.longLinkLength){var i=this.options.doubleLinkToolsOffset||e;r=this.getPointAtLength(n-i),this._tool2Cache.attr("transform","translate("+r.x+", "+r.y+") "+t),this._tool2Cache.attr("visibility","visible")}else this.options.doubleLinkTools&&this._tool2Cache.attr("visibility","hidden")}return this},updateArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;if(Vn.css(this._V.markerArrowheads.node,"display")==="none")return this;var t=this.getConnectionLength()<this.options.shortLinkLength?.5:1;return this._V.sourceArrowhead.scale(t),this._V.targetArrowhead.scale(t),this._translateAndAutoOrientArrows(this._V.sourceArrowhead,this._V.targetArrowhead),this},updateEndProperties:function(t){const{model:e,paper:n}=this,r=`${t}View`,i=e.get(t),o=i&&i.id;if(!o)return this[r]=null,this.updateEndMagnet(t),!0;const a=n.getModelById(o);if(!a)throw new Error("LinkView: invalid "+t+" cell.");const s=a.findView(n);return s?(this[r]=s,this.updateEndMagnet(t),!0):!1},updateEndMagnet:function(t){const e=`${t}Magnet`,n=this.getEndView(t);if(n){let r=n.getMagnetFromLinkEnd(this.model.get(t));r===n.el&&(r=null),this[e]=r}else this[e]=null},_translateAndAutoOrientArrows:function(t,e){var n=Dn(this.route);t&&t.translateAndAutoOrient(this.sourcePoint,n[0]||this.targetPoint,this.paper.cells),e&&e.translateAndAutoOrient(this.targetPoint,n[n.length-1]||this.sourcePoint,this.paper.cells)},_getLabelPositionProperty:function(t){return this.model.label(t).position||{}},_getLabelPositionAngle:function(t){var e=this._getLabelPositionProperty(t);return e.angle||0},_getLabelPositionArgs:function(t){var e=this._getLabelPositionProperty(t);return e.args},_getDefaultLabelPositionArgs:function(){var t=this.model._getDefaultLabel(),e=t.position||{};return e.args},_mergeLabelPositionArgs:function(t,e){return t===null?null:t===void 0?e===null?null:e:Ri({},e,t)},addLabel:function(t,e,n,r){var i,o,a=0,s;typeof t!="number"?(i=t.x,o=t.y,typeof e=="number"?(a=e,s=n):s=e):(i=t,o=e,typeof n=="number"?(a=n,s=r):s=n);var l=this._getDefaultLabelPositionArgs(),u=s,c=this._mergeLabelPositionArgs(u,l),f={position:this.getLabelPosition(i,o,a,c)},h=-1;return this.model.insertLabel(h,f,s),h},addVertex:function(t,e,n){var r=typeof t!="number",i=r?t.x:t,o=r?t.y:e,a=r?e:n,s={x:i,y:o},l=this.getVertexIndex(i,o);return this.model.insertVertex(l,s,a),l},sendToken:function(t,e,n){function r(f,h){return function(){f.remove(),typeof h=="function"&&h()}}var i,o,a;Jn(e)?(i=e.duration,o=e.direction==="reverse",a=e.connection):(i=e,o=!1,a=null),i=i||1e3;var s={dur:i+"ms",repeatCount:1,calcMode:"linear",fill:"freeze"};o&&(s.keyPoints="1;0",s.keyTimes="0;1");var l=Ue(t),u;if(typeof a=="string")u=this.findBySelector(a,this.el,this.selectors)[0];else{var c=this._V;u=c.connection?c.connection.node:this.el.querySelector("path")}if(!(u instanceof SVGPathElement))throw new Error("dia.LinkView: token animation requires a valid connection path.");l.appendTo(this.paper.cells).animateAlongPath(s,u),setTimeout(r(l,n),i)},findRoute:function(t){t||(t=[]);var e=this.paper.options.routerNamespace||wVe,n=this.model.router(),r=this.paper.options.defaultRouter;if(!n)if(r)n=r;else return t.map(we);var i=br(n)?n:e[n.name];if(!br(i))throw new Error('dia.LinkView: unknown router: "'+n.name+'".');var o=n.args||{},a=i.call(this,t,o,this);return a||t.map(we)},findPath:function(t,e,n){var r=this.paper.options.connectorNamespace||KVe,i=this.model.connector(),o=this.paper.options.defaultConnector;i||(i=o||{});var a=br(i)?i:r[i.name];if(!br(a))throw new Error('dia.LinkView: unknown connector: "'+i.name+'".');var s=Wu(i.args||{});s.raw=!0;var l=a.call(this,e,n,t,s,this);return typeof l=="string"&&(l=new Ct(Ue.normalizePathData(l))),l},getConnection:function(){var t=this.path;return t?t.clone():null},getSerializedConnection:function(){var t=this.path;if(!t)return null;var e=this.metrics;if(e.hasOwnProperty("data"))return e.data;var n=t.serialize();return e.data=n,n},getConnectionSubdivisions:function(){var t=this.path;if(!t)return null;var e=this.metrics;if(e.hasOwnProperty("segmentSubdivisions"))return e.segmentSubdivisions;var n=t.getSegmentSubdivisions();return e.segmentSubdivisions=n,n},getConnectionLength:function(){var t=this.path;if(!t)return 0;var e=this.metrics;if(e.hasOwnProperty("length"))return e.length;var n=t.length({segmentSubdivisions:this.getConnectionSubdivisions()});return e.length=n,n},getPointAtLength:function(t){var e=this.path;return e?e.pointAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getPointAtRatio:function(t){var e=this.path;return e?(Eo(t)&&(t=parseFloat(t)/100),e.pointAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()})):null},getTangentAtLength:function(t){var e=this.path;return e?e.tangentAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getTangentAtRatio:function(t){var e=this.path;return e?e.tangentAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPoint:function(t){var e=this.path;return e?e.closestPoint(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointLength:function(t){var e=this.path;return e?e.closestPointLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointRatio:function(t){var e=this.path;return e?e.closestPointNormalizedLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getLabelPosition:function(t,e,n,r){var i={},o=0,a;typeof n=="number"?(o=n,a=r):a=n,a&&(i.args=a);var s=!(a&&a.absoluteDistance),l=a&&a.absoluteDistance&&a.reverseDistance,u=a&&a.absoluteOffset,c=this.path,f={segmentSubdivisions:this.getConnectionSubdivisions()},h=new we(t,e),d=c.closestPointT(h,f),g=c.lengthAtT(d,f);s&&(g=g/this.getConnectionLength()||0),l&&(g=-1*(this.getConnectionLength()-g)||1),i.distance=g;var y;u||(y=c.tangentAtT(d));var _;if(y)_=y.pointOffset(h);else{var v=c.pointAtT(d),S=h.difference(v);_={x:S.x,y:S.y}}return i.offset=_,i.angle=o,i},_getLabelTransformationMatrix:function(t){var e,n=0,r={};if(typeof t=="number")e=t;else if(typeof t.distance=="number")r=t.args||{},e=t.distance,n=t.angle||0;else throw new Error("dia.LinkView: invalid label position distance.");var i=e>0&&e<=1,o=0,a={x:0,y:0};if(t.offset){var s=t.offset;typeof s=="number"&&(o=s),s.x&&(a.x=s.x),s.y&&(a.y=s.y)}var l=a.x!==0||a.y!==0||o===0,u=r.keepGradient,c=r.ensureLegibility,f=this.path,h={segmentSubdivisions:this.getConnectionSubdivisions()},d=i?e*this.getConnectionLength():e,g=f.tangentAtLength(d,h),y,_=n;if(g){if(l)y=g.start.clone(),y.offset(a);else{var v=g.clone();v.rotate(g.start,-90),v.setLength(o),y=v.end}u&&(_=g.angle()+n,c&&(_=_c((_+90)%180-90)))}else y=f.start.clone(),l&&y.offset(a);return Ue.createSVGMatrix().translate(y.x,y.y).rotate(_)},getLabelCoordinates:function(t){var e=this._getLabelTransformationMatrix(t);return new we(e.e,e.f)},getVertexIndex:function(t,e){for(var n=this.model,r=n.vertices(),i=this.getClosestPointLength(new we(t,e)),o=0,a=r.length;o<a;o++){var s=r[o],l=this.getClosestPointLength(s);if(i<l)break}return o},notifyPointerdown(t,e,n){Cn.prototype.pointerdown.call(this,t,e,n),this.notify("link:pointerdown",t,e,n)},notifyPointermove(t,e,n){Cn.prototype.pointermove.call(this,t,e,n),this.notify("link:pointermove",t,e,n)},notifyPointerup(t,e,n){this.notify("link:pointerup",t,e,n),Cn.prototype.pointerup.call(this,t,e,n)},pointerdblclick:function(t,e,n){Cn.prototype.pointerdblclick.apply(this,arguments),this.notify("link:pointerdblclick",t,e,n)},pointerclick:function(t,e,n){Cn.prototype.pointerclick.apply(this,arguments),this.notify("link:pointerclick",t,e,n)},contextmenu:function(t,e,n){Cn.prototype.contextmenu.apply(this,arguments),this.notify("link:contextmenu",t,e,n)},pointerdown:function(t,e,n){this.notifyPointerdown(t,e,n);var r=t.target.getAttribute("class");switch(r){case"marker-vertex":this.dragVertexStart(t,e,n);return;case"marker-vertex-remove":case"marker-vertex-remove-area":this.dragVertexRemoveStart(t,e,n);return;case"marker-arrowhead":this.dragArrowheadStart(t,e,n);return;case"connection":case"connection-wrap":this.dragConnectionStart(t,e,n);return;case"marker-source":case"marker-target":return}this.dragStart(t,e,n)},pointermove:function(t,e,n){var r=this._dragData;r&&this.eventData(t,r);var i=this.eventData(t);switch(i.action){case"vertex-move":this.dragVertex(t,e,n);break;case"label-move":this.dragLabel(t,e,n);break;case"arrowhead-move":this.dragArrowhead(t,e,n);break;case"move":this.drag(t,e,n);break}r&&Nt(r,this.eventData(t)),this.notifyPointermove(t,e,n)},pointerup:function(t,e,n){var r=this._dragData;r&&(this.eventData(t,r),this._dragData=null);var i=this.eventData(t);switch(i.action){case"vertex-move":this.dragVertexEnd(t,e,n);break;case"label-move":this.dragLabelEnd(t,e,n);break;case"arrowhead-move":this.dragArrowheadEnd(t,e,n);break;case"move":this.dragEnd(t,e,n)}this.notifyPointerup(t,e,n),this.checkMouseleave(t)},mouseover:function(t){Cn.prototype.mouseover.apply(this,arguments),this.notify("link:mouseover",t)},mouseout:function(t){Cn.prototype.mouseout.apply(this,arguments),this.notify("link:mouseout",t)},mouseenter:function(t){Cn.prototype.mouseenter.apply(this,arguments),this.notify("link:mouseenter",t)},mouseleave:function(t){Cn.prototype.mouseleave.apply(this,arguments),this.notify("link:mouseleave",t)},mousewheel:function(t,e,n,r){Cn.prototype.mousewheel.apply(this,arguments),this.notify("link:mousewheel",t,e,n,r)},onevent:function(t,e,n,r){var i=Ue(t.target).findParentByClass("link-tool",this.el);if(i){if(t.stopPropagation(),this.can("useLinkTools"))if(e==="remove"){this.model.remove({ui:!0});return}else this.notify(e,t,n,r);this.notifyPointerdown(t,n,r),this.paper.delegateDragEvents(this,t.data)}else Cn.prototype.onevent.apply(this,arguments)},onlabel:function(t,e,n){this.notifyPointerdown(t,e,n),this.dragLabelStart(t,e,n);var r=this.eventData(t).stopPropagation;r&&t.stopPropagation()},dragConnectionStart:function(t,e,n){if(this.can("vertexAdd")){var r=this.addVertex({x:e,y:n},{ui:!0});this.eventData(t,{action:"vertex-move",vertexIdx:r})}},dragLabelStart:function(t,e,n){if(this.can("labelMove")){if(this.isDefaultInteractionPrevented(t))return;var r=t.currentTarget,i=parseInt(r.getAttribute("label-idx"),10),o=this._getDefaultLabelPositionProperty(),a=this._normalizeLabelPosition(this._getLabelPositionProperty(i)),s=this._mergeLabelPositionProperty(a,o),l=this.getLabelCoordinates(s),u=l.x-e,c=l.y-n,f=this._getLabelPositionAngle(i),h=this._getLabelPositionArgs(i),d=this._getDefaultLabelPositionArgs(),g=this._mergeLabelPositionArgs(h,d);this.eventData(t,{action:"label-move",labelIdx:i,dx:u,dy:c,positionAngle:f,positionArgs:g,stopPropagation:!0})}else this.eventData(t,{stopPropagation:!0});this.paper.delegateDragEvents(this,t.data)},dragVertexStart:function(t,e,n){if(this.can("vertexMove")){var r=t.target,i=parseInt(r.getAttribute("idx"),10);this.eventData(t,{action:"vertex-move",vertexIdx:i})}},dragVertexRemoveStart:function(t,e,n){if(this.can("vertexRemove")){var r=t.target,i=parseInt(r.getAttribute("idx"),10);this.model.removeVertex(i)}},dragArrowheadStart:function(t,e,n){if(this.can("arrowheadMove")){var r=t.target,i=r.getAttribute("end"),o=this.startArrowheadMove(i,{ignoreBackwardsCompatibility:!0});this.eventData(t,o)}},dragStart:function(t,e,n){this.isDefaultInteractionPrevented(t)||this.can("linkMove")&&this.eventData(t,{action:"move",dx:e,dy:n})},dragLabel:function(t,e,n){var r=this.eventData(t),i={position:this.getLabelPosition(e+r.dx,n+r.dy,r.positionAngle,r.positionArgs)};this.paper.options.snapLabels&&delete i.position.offset;const o={ui:!0};this.paper.isAsync()&&t.type==="touchmove"&&(o.async=!1),this.model.label(r.labelIdx,i,o)},dragVertex:function(t,e,n){var r=this.eventData(t);this.model.vertex(r.vertexIdx,{x:e,y:n},{ui:!0})},dragArrowhead:function(t,e,n){this.paper.options.snapLinks?!this._snapArrowhead(t,e,n)&&this.paper.options.snapLinksSelf&&this._snapArrowheadSelf(t,e,n):this.paper.options.snapLinksSelf?this._snapArrowheadSelf(t,e,n):this._connectArrowhead(this.getEventTarget(t),e,n,this.eventData(t))},drag:function(t,e,n){var r=this.eventData(t);this.model.translate(e-r.dx,n-r.dy,{ui:!0}),this.eventData(t,{dx:e,dy:n})},dragLabelEnd:function(){},dragVertexEnd:function(){},dragArrowheadEnd:function(t,e,n){var r=this.eventData(t),i=this.paper;i.options.snapLinks?this._snapArrowheadEnd(r):this._connectArrowheadEnd(r,e,n),i.linkAllowed(this)?(this._finishEmbedding(r),this._notifyConnectEvent(r,t)):this._disallow(r),this._afterArrowheadMove(r)},dragEnd:function(){},_disallow:function(t){switch(t.whenNotAllowed){case"remove":this.model.remove({ui:!0});break;case"revert":default:this.model.set(t.arrowhead,t.initialEnd,{ui:!0});break}},_finishEmbedding:function(t){this.paper.options.embeddingMode&&this.model.reparent()&&(t.z=null)},_notifyConnectEvent:function(t,e){var n=t.arrowhead,r=t.initialEnd,i=this.model.prop(n),o=i&&!Zg.endsEqual(r,i);if(o){var a=this.paper;r.id&&this.notify("link:disconnect",e,a.findViewByModel(r.id),t.initialMagnet,n),i.id&&this.notify("link:connect",e,a.findViewByModel(i.id),t.magnetUnderPointer,n)}},_snapToPoints:function(t,e,n){let r=null,i=1/0,o=null,a=1/0,s=t.x,l=t.y;for(let u=0;u<e.length;u++){const c=Math.abs(e[u].x-t.x);c<i&&(i=c,r=e[u]);const f=Math.abs(e[u].y-t.y);f<a&&(a=f,o=e[u])}return i<n&&(s=r.x),a<n&&(l=o.y),{x:s,y:l}},_snapArrowheadSelf:function(t,e,n){const{paper:r,model:i}=this,{snapLinksSelf:o}=r.options,a=this.eventData(t),s=o.radius||20,l=this.getEndAnchor(a.arrowhead==="source"?"target":"source"),u=i.vertices(),c=[l,...u],f=this._snapToPoints({x:e,y:n},c,s);this._connectArrowhead(document.elementFromPoint(f.x,f.y),f.x,f.y,this.eventData(t))},_snapArrowhead:function(t,e,n){const{paper:r}=this,{snapLinks:i,connectionStrategy:o}=r.options,a=this.eventData(t);let s=!1;var l=i.radius||50,u=r.findViewsInArea({x:e-l,y:n-l,width:2*l,height:2*l}),c=a.closestView||null,f=a.closestMagnet||null,h=a.magnetProxy||null;a.closestView=a.closestMagnet=a.magnetProxy=null;var d=Number.MAX_VALUE,g=new we(e,n);u.forEach(function(x){const m=[];x.el.getAttribute("magnet")!=="false"&&m.push({bbox:x.model.getBBox(),magnet:x.el}),x.$("[magnet]").toArray().forEach(T=>{m.push({bbox:x.getNodeBBox(T),magnet:T})}),m.forEach(T=>{const{magnet:P,bbox:I}=T,M=I.center().squaredDistance(g);M<d&&(f===P||r.options.validateConnection.apply(r,a.validateConnectionArgs(x,x.el===P?null:P)))&&(d=M,a.closestView=x,a.closestMagnet=P)})},this);var y,_=null,v=a.closestView,S=a.closestMagnet;S&&(_=a.magnetProxy=v.findProxyNode(S,"highlighter"));var C=a.arrowhead,k=f!==S;if(c&&k&&c.unhighlight(h,{connecting:!0,snapping:!0}),v){const{prevEnd:x,prevX:m,prevY:T}=a;if(a.prevX=e,a.prevY=n,s=!0,!k&&(typeof o!="function"||m===e&&T===n)||(y=v.getLinkEnd(S,e,n,this.model,C),!k&&mv(x,y)))return s;a.prevEnd=y,k&&v.highlight(_,{connecting:!0,snapping:!0})}else y={x:e,y:n};return this.model.set(C,y||{x:e,y:n},{ui:!0}),c&&this.notify("link:snap:disconnect",t,c,f,C),v&&this.notify("link:snap:connect",t,v,S,C),s},_snapArrowheadEnd:function(t){var e=t.closestView,n=t.closestMagnet;e&&n&&(e.unhighlight(t.magnetProxy,{connecting:!0,snapping:!0}),t.magnetUnderPointer=e.findMagnet(n)),t.closestView=t.closestMagnet=null},_connectArrowhead:function(t,e,n,r){const{paper:i,model:o}=this;if(r.eventTarget!==t){r.magnetProxy&&r.viewUnderPointer.unhighlight(r.magnetProxy,{connecting:!0});const a=r.viewUnderPointer=i.findView(t);if(a){const s=r.magnetUnderPointer=a.findMagnet(t),l=r.magnetProxy=a.findProxyNode(s,"highlighter");s&&this.paper.options.validateConnection.apply(i,r.validateConnectionArgs(a,s))?l&&a.highlight(l,{connecting:!0}):(r.magnetUnderPointer=null,r.magnetProxy=null)}else r.magnetUnderPointer=null,r.magnetProxy=null}r.eventTarget=t,o.set(r.arrowhead,{x:e,y:n},{ui:!0})},_connectArrowheadEnd:function(t={},e,n){const{model:r}=this,{viewUnderPointer:i,magnetUnderPointer:o,magnetProxy:a,arrowhead:s}=t;if(!o||!a||!i)return;i.unhighlight(a,{connecting:!0});const l=i.getLinkEnd(o,e,n,r,s);r.set(s,l,{ui:!0})},_beforeArrowheadMove:function(t){t.z=this.model.get("z"),this.model.toFront();var e=this.el.style;t.pointerEvents=e.pointerEvents,e.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets(t)},_afterArrowheadMove:function(t){t.z!==null&&(this.model.set("z",t.z,{ui:!0}),t.z=null),this.el.style.pointerEvents=t.pointerEvents,this.paper.options.markAvailable&&this._unmarkAvailableMagnets(t)},_createValidateConnectionArgs:function(t){var e=[];e[4]=t,e[5]=this;var n,r=0,i=0;t==="source"?(r=2,n="target"):(i=2,n="source");var o=this.model.get(n);if(o.id){var a=e[r]=this.paper.findViewByModel(o.id),s=a.getMagnetFromLinkEnd(o);s===a.el&&(s=void 0),e[r+1]=s}function l(u,c){return e[i]=u,e[i+1]=u.el===c?void 0:c,e}return l},_markAvailableMagnets:function(t){function e(f,h){var d=f.paper,g=d.options.validateConnection;return g.apply(d,this.validateConnectionArgs(f,h))}var n=this.paper,r=n.model.getCells();t.marked={};for(var i=0,o=r.length;i<o;i++){var a=r[i].findView(n);if(a){var s=Array.prototype.slice.call(a.el.querySelectorAll("[magnet]"));a.el.getAttribute("magnet")!=="false"&&s.push(a.el);var l=s.filter(e.bind(t,a));if(l.length>0){for(var u=0,c=l.length;u<c;u++)a.highlight(l[u],{magnetAvailability:!0});a.highlight(null,{elementAvailability:!0}),t.marked[a.model.id]=l}}}},_unmarkAvailableMagnets:function(t){for(var e=Object.keys(t.marked),n,r,i=0,o=e.length;i<o;i++){n=e[i],r=t.marked[n];var a=this.paper.findViewByModel(n);if(a){for(var s=0,l=r.length;s<l;s++)a.unhighlight(r[s],{magnetAvailability:!0});a.unhighlight(null,{elementAvailability:!0})}}t.marked=null},startArrowheadMove:function(t,e){e||(e={});var n={action:"arrowhead-move",arrowhead:t,whenNotAllowed:e.whenNotAllowed||"revert",initialMagnet:this[t+"Magnet"]||(this[t+"View"]?this[t+"View"].el:null),initialEnd:Wu(this.model.get(t)),validateConnectionArgs:this._createValidateConnectionArgs(t)};return this._beforeArrowheadMove(n),e.ignoreBackwardsCompatibility!==!0&&(this._dragData=n),n},onMount:function(){Cn.prototype.onMount.apply(this,arguments),this.mountLabels()},onDetach:function(){Cn.prototype.onDetach.apply(this,arguments),this.unmountLabels()},onRemove:function(){Cn.prototype.onRemove.apply(this,arguments),this.unmountLabels()}},{Flags:rn});Object.defineProperty(v1.prototype,"sourceBBox",{enumerable:!0,get:function(){var t=this.sourceView;if(!t){var e=this.model.source();return new st(e.x,e.y)}var n=this.sourceMagnet;return t.isNodeConnection(n)?new st(this.sourceAnchor):t.getNodeBBox(n||t.el)}});Object.defineProperty(v1.prototype,"targetBBox",{enumerable:!0,get:function(){var t=this.targetView;if(!t){var e=this.model.target();return new st(e.x,e.y)}var n=this.targetMagnet;return t.isNodeConnection(n)?new st(this.targetAnchor):t.getNodeBBox(n||t.el)}});const XVe=su.extend({tagName:"path",className:"highlight-stroke",attributes:{"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},options:{padding:3,rx:0,ry:0,useFirstSubpath:!1,attrs:{"stroke-width":3,stroke:"#FEB663"}},getPathData(t,e){const{options:n}=this,{useFirstSubpath:r}=n;let i;try{const o=Ue(e);if(i=o.convertToPathData().trim(),o.tagName()==="PATH"&&r){const a=i.search(/.M/i)+1;a>0&&(i=i.substr(0,a))}}catch{const a=t.getNodeBoundingRect(e);i=Ue.rectToPath(Nt({},n,a.toJSON()))}return i},highlightConnection(t){this.vel.attr("d",t.getSerializedConnection())},highlightNode(t,e){const{vel:n,options:r}=this,{padding:i,layer:o}=r;let a=this.getNodeMatrix(t,e);if(i){!o&&e===t.el&&n.remove();let s=t.getNodeBoundingRect(e);const l=s.x+s.width/2,u=s.y+s.height/2;s=Ue.transformRect(s,a);const c=Math.max(s.width,1),f=Math.max(s.height,1),h=(c+i)/c,d=(f+i)/f,g=Ue.createSVGMatrix({a:h,b:0,c:0,d,e:l-h*l,f:u-d*u});a=a.multiply(g)}n.attr({d:this.getPathData(t,e),transform:Ue.matrixToTransformString(a)})},highlight(t,e){const{vel:n,options:r}=this;n.attr(r.attrs),t.isNodeConnection(e)?this.highlightConnection(t):this.highlightNode(t,e)}}),eH=20;function JVe(t,e){const n=t.children();for(;n.length>0;){const r=n.shift();e(r)&&n.push(...r.children())}}const ZVe=su.extend({tagName:"rect",className:"highlight-mask",attributes:{"pointer-events":"none"},options:{padding:3,maskClip:eH,deep:!1,attrs:{stroke:"#FEB663","stroke-width":3,"stroke-linecap":"butt","stroke-linejoin":"miter"}},VISIBLE:"white",INVISIBLE:"black",MASK_ROOT_ATTRIBUTE_BLACKLIST:["marker-start","marker-end","marker-mid","transform","stroke-dasharray","class"],MASK_CHILD_ATTRIBUTE_BLACKLIST:["stroke","fill","stroke-width","stroke-opacity","stroke-dasharray","fill-opacity","marker-start","marker-end","marker-mid","class"],MASK_REPLACE_TAGS:["FOREIGNOBJECT","IMAGE","USE","TEXT","TSPAN","TEXTPATH"],MASK_REMOVE_TAGS:["TEXT","TSPAN","TEXTPATH"],transformMaskChild(t,e){const{MASK_CHILD_ATTRIBUTE_BLACKLIST:n,MASK_REPLACE_TAGS:r,MASK_REMOVE_TAGS:i}=this,o=e.tagName();if(!Ue.isSVGGraphicsElement(e)||i.includes(o))return e.remove(),!1;if(r.includes(o)){const a=t.vel.findOne(`#${e.id}`);if(a){const{node:s}=a;let l=t.getNodeBoundingRect(s);t.model.isElement()&&(l=Ue.transformRect(l,t.getNodeMatrix(s)));const u=Ue("rect",l.toJSON()),{x:c,y:f}=l.center(),{angle:h,cx:d=c,cy:g=f}=a.rotate();h&&u.rotate(h,d,g),e.parent().append(u)}return e.remove(),!1}return n.forEach(a=>{a==="fill"&&e.attr("fill")==="none"||e.removeAttr(a)}),!0},transformMaskRoot(t,e){const{MASK_ROOT_ATTRIBUTE_BLACKLIST:n}=this;n.forEach(r=>{e.removeAttr(r)})},getMaskShape(t,e){const{options:n,MASK_REPLACE_TAGS:r}=this,{deep:i}=n,o=e.tagName();let a;if(o==="G"){if(!i)return null;a=e.clone(),JVe(a,s=>this.transformMaskChild(t,s))}else{if(r.includes(o))return null;a=e.clone()}return this.transformMaskRoot(t,a),a},getMaskId(){return`highlight-mask-${this.cid}`},getMask(t,e){const{VISIBLE:n,INVISIBLE:r,options:i}=this,{padding:o,attrs:a}=i,s="stroke-width"in a?a["stroke-width"]:1,l=e.attr("fill")!=="none";let u=parseFloat(e.attr("stroke-width"));isNaN(u)&&(u=1);const c=u+o*2,f=c+s*2;let h=this.getMaskShape(t,e);if(!h){const d=t.getNodeBoundingRect(e.node);d.inflate(d.width?0:.5,d.height?0:.5),h=Ue("rect",d.toJSON())}return h.attr(a),Ue("mask",{id:this.getMaskId()}).append([h.clone().attr({fill:l?n:"none",stroke:n,"stroke-width":f}),h.clone().attr({fill:l?r:"none",stroke:r,"stroke-width":c})])},removeMask(t){const e=t.svg.getElementById(this.getMaskId());e&&t.defs.removeChild(e)},addMask(t,e){t.defs.appendChild(e.node)},highlight(t,e){const{options:n,vel:r}=this,{padding:i,attrs:o,maskClip:a=eH,layer:s}=n,l="stroke"in o?o.stroke:"#000000";!s&&e===t.el&&r.remove();const u=t.getNodeBoundingRect(e).inflate(i+a),c=this.getNodeMatrix(t,e),f=this.getMask(t,Ue(e));this.addMask(t.paper,f),r.attr(u.toJSON()),r.attr({transform:Ue.matrixToTransformString(c),mask:`url(#${f.id})`,fill:l})},unhighlight(t){this.removeMask(t.paper)}}),QVe=su.extend({UPDATABLE:!1,MOUNTABLE:!1,opacityClassName:au("highlight-opacity"),highlight:function(t,e){Ue(e).addClass(this.opacityClassName)},unhighlight:function(t,e){Ue(e).removeClass(this.opacityClassName)}}),tH=au("highlighted"),eBe=su.extend({UPDATABLE:!1,MOUNTABLE:!1,options:{className:tH},highlight:function(t,e){Ue(e).addClass(this.options.className)},unhighlight:function(t,e){Ue(e).removeClass(this.options.className)}},{className:tH}),EI={ROW:"row",COLUMN:"column"},tBe=su.extend({tagName:"g",MOUNTABLE:!0,UPDATE_ATTRIBUTES:function(){return[this.options.attribute]},_prevItems:null,highlight(t,e){const n=t.model,{attribute:r,size:i=20,gap:o=5,direction:a=EI.ROW}=this.options;if(!r)throw new Error("List: attribute is required");const s=typeof i=="number"?{width:i,height:i}:i,l=a===EI.ROW,u=l?s.width:s.height;let c=n.get(r);Array.isArray(c)||(c=[]);const f=this._prevItems||[],h=c.map((_,v)=>mv(f[v],c[v]));if(f.length!==c.length||h.some(_=>!_)){const _=this.vel.children(),v=c.map((S,C)=>{const k=C in _?_[C].node:null;if(h[C])return k;const x=this.createListItem(S,s,k);if(!x)return null;if(!(x instanceof SVGElement))throw new Error("List: item must be an SVGElement");x.dataset.index=C,x.dataset.attribute=r;const m=C*(u+o);return x.setAttribute("transform",l?`translate(${m}, 0)`:`translate(0, ${m})`),x});this.vel.empty().append(v),this._prevItems=c}const d=c.length,g=d===0?0:d*u+(d-1)*o,y=l?{width:g,height:s.height}:{width:s.width,height:g};this.position(n,y)},position(t,e){const{vel:n,options:r}=this,{margin:i=5,position:o="top-left"}=r,{width:a,height:s}=t.size(),{left:l,right:u,top:c,bottom:f}=$g(i),h=new st(l,c,a-(l+u),s-(c+f));let{x:d,y:g}=Ese(h,o);switch(o){case bi.CENTER:case bi.TOP:case bi.BOTTOM:{d-=e.width/2;break}case bi.RIGHT:case bi.BOTTOM_RIGHT:case bi.TOP_RIGHT:{d-=e.width;break}}switch(o){case bi.CENTER:case bi.RIGHT:case bi.LEFT:{g-=e.height/2;break}case bi.BOTTOM:case bi.BOTTOM_RIGHT:case bi.BOTTOM_LEFT:{g-=e.height;break}}n.attr("transform",`translate(${d}, ${g})`)}},{Directions:EI,Positions:bi}),nBe=Object.freeze(Object.defineProperty({__proto__:null,addClass:eBe,list:tBe,mask:ZVe,opacity:QVe,stroke:XVe},Symbol.toStringTag,{value:"Module"}));function rBe(t,e,n,r){var i="ratio"in r?r.ratio:.5;return t.getPointAtRatio(i)}function iBe(t,e,n,r){var i="length"in r?r.length:20;return t.getPointAtLength(i)}function oBe(t,e,n,r){var i=1e6,o=t.getConnection(),a=t.getConnectionSubdivisions(),s=new gt(n.clone().offset(0,i),n.clone().offset(0,-i)),l=new gt(n.clone().offset(i,0),n.clone().offset(-i,0)),u=s.intersect(o,{segmentSubdivisions:a}),c=l.intersect(o,{segmentSubdivisions:a}),f=[];return u&&Array.prototype.push.apply(f,u),c&&Array.prototype.push.apply(f,c),f.length>0?n.chooseClosest(f):"fallbackAt"in r?Wse(t,r.fallbackAt):Hse(t,e,n,r)}function aBe(t,e,n,r){var i=t.getClosestPoint(n);return i||new we}function $S(t){return function(e,n,r,i){if(r instanceof Element){var o=this.paper.findView(r),a;if(o)if(o.isNodeConnection(r)){var s="fixedAt"in i?i.fixedAt:"50%";a=Wse(o,s)}else a=o.getNodeBBox(r).center();else a=new we;return t.call(this,e,n,a,i)}return t.apply(this,arguments)}}function Wse(t,e){var n=parseFloat(e);return Eo(e)?t.getPointAtRatio(n/100):t.getPointAtLength(n)}const sBe=$S(oBe),Hse=$S(aBe),lBe=Object.freeze(Object.defineProperty({__proto__:null,connectionClosest:Hse,connectionLength:iBe,connectionPerpendicular:sBe,connectionRatio:rBe,resolveRef:$S},Symbol.toStringTag,{value:"Module"}));function EE(t,e,n){if(Di(n)){const{x:i,y:o}=n;if(isFinite(o)){const a=new gt(e,t),{start:s,end:l}=a.parallel(o);e=s,t=l}n=i}if(!isFinite(n))return t;var r=t.distance(e);return n===0&&r>0?t:t.move(e,-Math.min(n,r-1))}function W5(t){var e=t.getAttribute("stroke-width");return e===null?0:parseFloat(e)||0}function uBe(t,e,n=0){let r,i,o,a;const{start:s,end:l}=t;switch(e){case"left":r="x",i=l,o=s,a=-1;break;case"right":r="x",i=s,o=l,a=1;break;case"top":r="y",i=l,o=s,a=-1;break;case"bottom":r="y",i=s,o=l,a=1;break;default:return}s[r]<l[r]?i[r]=o[r]:o[r]=i[r],isFinite(n)&&(i[r]+=a*n,o[r]+=a*n)}function cBe(t,e,n,r){let{offset:i,alignOffset:o,align:a}=r;return a&&uBe(t,a,o),EE(t.end,t.start,i)}function Gse(t,e,n,r){var i=e.getNodeBBox(n);r.stroke&&i.inflate(W5(n)/2);var o=t.intersect(i),a=o?t.start.chooseClosest(o):t.end;return EE(a,t.start,r.offset)}function fBe(t,e,n,r){var i=e.model.angle();if(i===0)return Gse(t,e,n,r);var o=e.getNodeUnrotatedBBox(n);r.stroke&&o.inflate(W5(n)/2);var a=o.center(),s=t.clone().rotate(a,i),l=s.setLength(1e6).intersect(o),u=l?s.start.chooseClosest(l).rotate(a,-i):t.end;return EE(u,t.start,r.offset)}function hBe(t){if(!t)return null;var e=t;do{var n=e.tagName;if(typeof n!="string")return null;if(n=n.toUpperCase(),n==="G")e=e.firstElementChild;else if(n==="TITLE")e=e.nextElementSibling;else break}while(e);return e}var PI="segmentSubdivisons",OI="shapeBBox";function dBe(t,e,n,r){var i,o,a=r.selector,s=t.end;if(typeof a=="string"?i=e.findBySelector(a)[0]:a===!1?i=n:Array.isArray(a)?i=x_(n,a):i=hBe(n),!Ue.isSVGGraphicsElement(i)){if(i===n||!Ue.isSVGGraphicsElement(n))return s;i=n}var l=e.getNodeShape(i),u=e.getNodeMatrix(i),c=e.getRootTranslateMatrix(),f=e.getRootRotateMatrix(),h=c.multiply(f).multiply(u),d=h.inverse(),g=Ue.transformLine(t,d),y=g.start.clone(),_=e.getNodeData(i);if(r.insideout===!1){_[OI]||(_[OI]=l.bbox());var v=_[OI];if(v.containsPoint(y))return s}var S;if(l instanceof Ct){var C=r.precision||2;_[PI]||(_[PI]=l.getSegmentSubdivisions({precision:C})),S={precision:C,segmentSubdivisions:_[PI]}}r.extrapolate===!0&&g.setLength(1e6),o=g.intersect(l,S),o?Ue.isArray(o)&&(o=y.chooseClosest(o)):r.sticky===!0&&(l instanceof st?o=l.pointNearestToPoint(y):l instanceof Ca?o=l.intersectionWithLineFromCenterToPoint(y):o=l.closestPoint(y,S));var k=o?Ue.transformPoint(o,h):s,x=r.offset||0;return r.stroke&&(x+=W5(i)/2),EE(k,t.start,x)}const pBe=cBe,gBe=Gse,mBe=fBe,vBe=dBe,yBe=Object.freeze(Object.defineProperty({__proto__:null,anchor:pBe,bbox:gBe,boundary:vBe,rectangle:mBe},Symbol.toStringTag,{value:"Module"}));function Df(t){return function(e,n,r,i){var o=!!i.rotate,a=o?e.getNodeUnrotatedBBox(n):e.getNodeBBox(n),s=a[t](),l=i.dx;if(l){var u=Eo(l);l=parseFloat(l),isFinite(l)&&(u&&(l/=100,l*=a.width),s.x+=l)}var c=i.dy;if(c){var f=Eo(c);c=parseFloat(c),isFinite(c)&&(f&&(c/=100,c*=a.height),s.y+=c)}return o?s.rotate(e.model.getBBox().center(),-e.model.angle()):s}}function bBe(t,e,n,r){var i=t.model.angle(),o=t.getNodeBBox(e),a=o.center(),s=o.origin(),l=o.corner(),u=r.padding;if(isFinite(u)||(u=0),s.y+u<=n.y&&n.y<=l.y-u){var c=n.y-a.y;a.x+=i===0||i===180?0:c*1/Math.tan(ss(i)),a.y+=c}else if(s.x+u<=n.x&&n.x<=l.x-u){var f=n.x-a.x;a.y+=i===90||i===270?0:f*Math.tan(ss(i)),a.x+=f}return a}function _Be(t,e,n,r){var i=!!r.rotate,o,a,s;i?(o=t.getNodeUnrotatedBBox(e),s=t.model.getBBox().center(),a=t.model.angle()):o=t.getNodeBBox(e);var l=r.padding;isFinite(l)&&o.inflate(l),i&&n.rotate(s,a);var u=o.sideNearestToPoint(n),c;switch(u){case"left":c=o.leftMiddle();break;case"right":c=o.rightMiddle();break;case"top":c=o.topMiddle();break;case"bottom":c=o.bottomMiddle();break}return i?c.rotate(s,-a):c}function SBe(t,e,n,r,i){return t.model.getPointFromConnectedLink(this.model,i).offset(r.dx,r.dy)}const wBe=Df("center"),xBe=Df("topMiddle"),CBe=Df("bottomMiddle"),kBe=Df("leftMiddle"),TBe=Df("rightMiddle"),ABe=Df("origin"),EBe=Df("topRight"),PBe=Df("bottomLeft"),OBe=Df("corner"),IBe=$S(bBe),$Be=$S(_Be),LBe=SBe,DBe=Object.freeze(Object.defineProperty({__proto__:null,bottom:CBe,bottomLeft:PBe,bottomRight:OBe,center:wBe,left:kBe,midSide:$Be,modelCenter:LBe,perpendicular:IBe,right:TBe,top:xBe,topLeft:ABe,topRight:EBe},Symbol.toStringTag,{value:"Module"})),Bm={NONE:"sorting-none",APPROX:"sorting-approximate",EXACT:"sorting-exact"},MBe=50,nH=20,rH=1e3,NBe=1/0,PC=9007199254740991,II=Cn.Highlighting,iH={[II.DEFAULT]:{name:"stroke",options:{padding:3}},[II.MAGNET_AVAILABILITY]:{name:"addClass",options:{className:"available-magnet"}},[II.ELEMENT_AVAILABILITY]:{name:"addClass",options:{className:"available-cell"}}},FBe=[{name:bl.BACK},{name:bl.CELLS},{name:bl.LABELS},{name:bl.FRONT},{name:bl.TOOLS}],RBe=bf.extend({className:"paper",options:{width:800,height:600,origin:{x:0,y:0},gridSize:1,drawGrid:!1,drawGridSize:null,background:!1,perpendicularLinks:!1,elementView:ao,linkView:v1,snapLabels:!1,snapLinks:!1,snapLinksSelf:!1,labelsLayer:!1,multiLinks:!0,guard:function(t,e){return!1},highlighting:iH,preventContextMenu:!0,preventDefaultBlankAction:!0,preventDefaultViewAction:!0,restrictTranslate:!1,markAvailable:!1,defaultLink:new Zg,defaultConnector:{name:"normal"},defaultRouter:{name:"normal"},defaultAnchor:{name:"center"},defaultLinkAnchor:{name:"connectionRatio"},defaultConnectionPoint:{name:"bbox"},connectionStrategy:null,validateMagnet:function(t,e,n){return e.getAttribute("magnet")!=="passive"},validateConnection:function(t,e,n,r,i,o){return(i==="target"?n:t)instanceof ao},embeddingMode:!1,validateEmbedding:function(t,e){return!0},validateUnembedding:function(t){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,allowLink:null,clickThreshold:0,moveThreshold:0,magnetThreshold:0,sorting:Bm.EXACT,frozen:!1,autoFreeze:!1,onViewUpdate:function(t,e,n,r,i){e&(t.FLAG_INSERT|t.FLAG_REMOVE)||r.mounting||r.isolate||i.requestConnectedLinksUpdate(t,n,r)},onViewPostponed:function(t,e,n){return n.forcePostponedViewUpdate(t,e)},beforeRender:null,afterRender:null,viewport:null,cellViewNamespace:null,routerNamespace:null,connectorNamespace:null,highlighterNamespace:nBe,anchorNamespace:DBe,linkAnchorNamespace:lBe,connectionPointNamespace:yBe,overflow:!1},events:{dblclick:"pointerdblclick",dbltap:"pointerdblclick",contextmenu:"contextmenu",mousedown:"pointerdown",touchstart:"pointerdown",mouseover:"mouseover",mouseout:"mouseout",mouseenter:"mouseenter",mouseleave:"mouseleave",wheel:"mousewheel","mouseenter .joint-cell":"mouseenter","mouseleave .joint-cell":"mouseleave","mouseenter .joint-tools":"mouseenter","mouseleave .joint-tools":"mouseleave","dblclick .joint-cell [magnet]":"magnetpointerdblclick","contextmenu .joint-cell [magnet]":"magnetcontextmenu","mousedown .joint-link .label":"onlabel","touchstart .joint-link .label":"onlabel","dragstart .joint-cell image":"onImageDragStart"},documentEvents:{mousemove:"pointermove",touchmove:"pointermove",mouseup:"pointerup",touchend:"pointerup",touchcancel:"pointerup"},svg:null,viewport:null,defs:null,tools:null,$background:null,layers:null,$grid:null,$document:null,_viewportMatrix:null,_viewportTransformString:null,_updates:null,_layers:null,SORT_DELAYING_BATCHES:["add","to-front","to-back"],UPDATE_DELAYING_BATCHES:["translate"],FORM_CONTROL_TAG_NAMES:["TEXTAREA","INPUT","BUTTON","SELECT","OPTION"],GUARDED_TAG_NAMES:["SELECT"],MIN_SCALE:1e-6,init:function(){const{options:t,el:e}=this;t.cellViewNamespace||(t.cellViewNamespace=typeof joint<"u"&&cf(joint,"shapes")?joint.shapes:null);const n=this.model=t.model||new ff;this._layers={},this.setGrid(t.drawGrid),this.cloneOptions(),this.render(),this._setDimensions(),this.startListening(),this._views={},this._mw_evt_buffer={event:null,deltas:[]},this.$document=Vn(e.ownerDocument),this.resetViews(n.attributes.cells.models),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()},_resetUpdates:function(){return this._updates={id:null,priorities:[{},{},{}],unmountedCids:[],mountedCids:[],unmounted:{},mounted:{},count:0,keyFrozen:!1,freezeKey:null,sort:!1,disabled:!1,idle:!1}},startListening:function(){var t=this.model;this.listenTo(t,"add",this.onCellAdded).listenTo(t,"remove",this.onCellRemoved).listenTo(t,"change",this.onCellChange).listenTo(t,"reset",this.onGraphReset).listenTo(t,"sort",this.onGraphSort).listenTo(t,"batch:stop",this.onGraphBatchStop),this.on("cell:highlight",this.onCellHighlight).on("cell:unhighlight",this.onCellUnhighlight).on("scale translate",this.update)},onCellAdded:function(t,e,n){var r=n.position;this.isAsync()||!Ka(r)?this.renderView(t,n):(n.maxPosition===r&&this.freeze({key:"addCells"}),this.renderView(t,n),r===0&&this.unfreeze({key:"addCells"}))},onCellRemoved:function(t,e,n){const r=this.findViewByModel(t);r&&this.requestViewUpdate(r,r.FLAG_REMOVE,r.UPDATE_PRIORITY,n)},onCellChange:function(t,e){if(t!==this.model.attributes.cells&&t.hasChanged("z")&&this.options.sorting===Bm.APPROX){const n=this.findViewByModel(t);n&&this.requestViewUpdate(n,n.FLAG_INSERT,n.UPDATE_PRIORITY,e)}},onGraphReset:function(t,e){this.resetLayers(),this.resetViews(t.models,e)},onGraphSort:function(){this.model.hasActiveBatch(this.SORT_DELAYING_BATCHES)||this.sortViews()},onGraphBatchStop:function(t){if(!this.isFrozen()){var e=t&&t.batchName,n=this.model;if(!this.isAsync()){var r=this.UPDATE_DELAYING_BATCHES;r.includes(e)&&!n.hasActiveBatch(r)&&this.updateViews(t)}var i=this.SORT_DELAYING_BATCHES;i.includes(e)&&!n.hasActiveBatch(i)&&this.sortViews()}},cloneOptions:function(){const{options:t}=this,{defaultConnector:e,defaultRouter:n,defaultConnectionPoint:r,defaultAnchor:i,defaultLinkAnchor:o,origin:a,highlighting:s,cellViewNamespace:l,interactive:u}=t;!l&&typeof joint<"u"&&cf(joint,"shapes")&&(t.cellViewNamespace=joint.shapes),br(e)||(t.defaultConnector=vl(e)),br(n)||(t.defaultRouter=vl(n)),br(r)||(t.defaultConnectionPoint=vl(r)),br(i)||(t.defaultAnchor=vl(i)),br(o)||(t.defaultLinkAnchor=vl(o)),Di(u)&&(t.interactive=Nt({},u)),Di(s)&&(t.highlighting=V5({},s,iH)),t.origin=Nt({},a)},children:function(){var t=Ue.namespace;return[{namespaceURI:t.xhtml,tagName:"div",className:au("paper-background"),selector:"background"},{namespaceURI:t.xhtml,tagName:"div",className:au("paper-grid"),selector:"grid"},{namespaceURI:t.svg,tagName:"svg",attributes:{width:"100%",height:"100%","xmlns:xlink":t.xlink},selector:"svg",children:[{tagName:"defs",selector:"defs"},{tagName:"g",className:au("layers"),selector:"layers"}]}]},hasLayerView(t){return t in this._layers},getLayerView(t){const{_layers:e}=this;if(t in e)return e[t];throw new Error(`dia.Paper: Unknown layer "${t}"`)},getLayerNode(t){return this.getLayerView(t).el},render:function(){this.renderChildren();const{childNodes:t,options:e}=this,{svg:n,defs:r,layers:i,background:o,grid:a}=t;return n.style.overflow=e.overflow?"visible":"hidden",this.svg=n,this.defs=r,this.layers=i,this.$background=Vn(o),this.$grid=Vn(a),this.renderLayers(),Ue.ensureId(n),e.background&&this.drawBackground(e.background),e.drawGrid&&this.drawGrid(),this},renderLayers:function(t=FBe){this.removeLayers(),t.forEach(({name:i,sorted:o})=>{const a=new Q7e({name:i});this.layers.appendChild(a.el),this._layers[i]=a});const e=this.getLayerView(bl.CELLS),n=this.getLayerView(bl.TOOLS),r=this.getLayerView(bl.LABELS);this.tools=n.el,this.cells=this.viewport=e.el,e.vel.addClass(au("viewport")),r.vel.addClass(au("viewport"))},removeLayers:function(){const{_layers:t}=this;Object.keys(t).forEach(e=>{t[e].remove(),delete t[e]})},resetLayers:function(){const{_layers:t}=this;Object.keys(t).forEach(e=>{t[e].removePivots()})},update:function(){return this.options.drawGrid&&this.drawGrid(),this._background&&this.updateBackgroundImage(this._background),this},matrix:function(t){var e=this.layers;if(t===void 0){var n=e.getAttribute("transform");return(this._viewportTransformString||null)===n?t=this._viewportMatrix:(t=e.getCTM(),this._viewportMatrix=t,this._viewportTransformString=n),Ue.createSVGMatrix(t)}t=Ue.createSVGMatrix(t);var r=Ue.matrixToTransformString(t);return e.setAttribute("transform",r),this._viewportMatrix=t,this._viewportTransformString=e.getAttribute("transform"),this},clientMatrix:function(){return Ue.createSVGMatrix(this.cells.getScreenCTM())},requestConnectedLinksUpdate:function(t,e,n){if(t instanceof Cn)for(var r=t.model,i=this.model.getConnectedLinks(r),o=0,a=i.length;o<a;o++){var s=i[o],l=this.findViewByModel(s);if(l){var u=["UPDATE"];s.getTargetCell()===r&&u.push("TARGET"),s.getSourceCell()===r&&u.push("SOURCE");var c=Math.max(e+1,l.UPDATE_PRIORITY);this.scheduleViewUpdate(l,l.getFlag(u),c,n)}}},forcePostponedViewUpdate:function(t,e){if(!t||!(t instanceof Cn))return!1;var n=t.model;if(n.isElement())return!1;if(!(e&t.getFlag(["SOURCE","TARGET"]))){var r={silent:!0},i=0,o=this.findViewByModel(n.getSourceCell());o&&!this.isViewMounted(o)&&(i=this.dumpView(o,r),t.updateEndMagnet("source"));var a=0,s=this.findViewByModel(n.getTargetCell());if(s&&!this.isViewMounted(s)&&(a=this.dumpView(s,r),t.updateEndMagnet("target")),i===0&&a===0)return!this.dumpView(t,r)}return!1},requestViewUpdate:function(t,e,n,r){r||(r={}),this.scheduleViewUpdate(t,e,n,r);var i=this.isAsync();if(!(this.isFrozen()||i&&r.async!==!1)&&!this.model.hasActiveBatch(this.UPDATE_DELAYING_BATCHES)){var o=this.updateViews(r);i&&this.notifyAfterRender(o,r)}},scheduleViewUpdate:function(t,e,n,r){const{_updates:i,options:o}=this;i.idle&&o.autoFreeze&&(i.idle=!1,this.unfreeze());const{FLAG_REMOVE:a,FLAG_INSERT:s,UPDATE_PRIORITY:l,cid:u}=t;let c=i.priorities[n];if(c||(c=i.priorities[n]={}),n>l)for(let d=n-1;d>=l;d--){const g=i.priorities[d];!g||!(u in g)||(c[u]|=g[u],delete g[u])}let f=c[u]||0;if((f&e)===e)return;f||i.count++,e&a&&f&s?c[u]^=s:e&s&&f&a&&(c[u]^=a),c[u]|=e;const h=o.onViewUpdate;typeof h=="function"&&h.call(this,t,e,n,r||{},this)},dumpViewUpdate:function(t){if(!t)return 0;var e=this._updates,n=t.cid,r=e.priorities[t.UPDATE_PRIORITY],i=this.registerMountedView(t)|r[n];return delete r[n],i},dumpView:function(t,e={}){const n=this.dumpViewUpdate(t);if(!n)return 0;const r=!e.silent;r&&this.notifyBeforeRender(e);const i=this.updateView(t,n,e);if(r){const o={updated:1,priority:t.UPDATE_PRIORITY};this.notifyAfterRender(o,e)}return i},updateView:function(t,e,n){if(!t)return 0;const{FLAG_REMOVE:r,FLAG_INSERT:i,FLAG_INIT:o,model:a}=t;if(t instanceof Cn){if(e&r)return this.removeView(a),0;if(e&i){const s=!!(e&o);s&&(e^=o),this.insertView(t,s),e^=i}}return e?t.confirmUpdate(e,n||{}):0},requireView:function(t,e){var n=this.findViewByModel(t);return n?(this.dumpView(n,e),n):null},registerUnmountedView:function(t){var e=t.cid,n=this._updates;if(e in n.unmounted)return 0;var r=n.unmounted[e]|=t.FLAG_INSERT;return n.unmountedCids.push(e),delete n.mounted[e],r},registerMountedView:function(t){var e=t.cid,n=this._updates;if(e in n.mounted)return 0;n.mounted[e]=!0,n.mountedCids.push(e);var r=n.unmounted[e]||0;return delete n.unmounted[e],r},isViewMounted:function(t){if(!t)return!1;var e=t.cid,n=this._updates;return e in n.mounted},dumpViews:function(t){var e=nu({},t,{viewport:null});this.checkViewport(e),this.updateViews(e)},updateViews:function(t){this.notifyBeforeRender(t);let e,n=0,r=0,i=PC;do r++,e=this.updateViewsBatch(t),n+=e.updated,i=Math.min(e.priority,i);while(!e.empty);const o={updated:n,batches:r,priority:i};return this.notifyAfterRender(o,t),o},hasScheduledUpdates:function(){const t=this._updates.priorities,e=Object.keys(t);let n=e.length;for(;n>0&&n--;)for(let r in t[e[n]])return!0;return!1},updateViewsAsync:function(t,e){t||(t={}),e||(e={processed:0,priority:PC});const{_updates:n,options:r}=this,i=n.id;if(i){mD(i),e.processed===0&&this.hasScheduledUpdates()&&this.notifyBeforeRender(t);const o=this.updateViewsBatch(t),a=nu({},t,{mountBatchSize:rH-o.mounted,unmountBatchSize:rH-o.unmounted}),s=this.checkViewport(a),l=s.unmounted,u=s.mounted;let c=e.processed;const f=n.count;o.updated>0?(c+=o.updated+o.unmounted,o.processed=c,e.priority=Math.min(o.priority,e.priority),o.empty&&u===0?(o.unmounted+=l,o.mounted+=u,o.priority=e.priority,this.notifyAfterRender(o,t),e.processed=0,e.priority=PC,n.count=0):e.processed=c):n.idle||r.autoFreeze&&(this.freeze(),n.idle=!0,this.trigger("render:idle",t));const h=t.progress;if(f&&typeof h=="function"&&h.call(this,o.empty,c,f,o,this),n.id!==i)return}if(n.disabled)throw new Error("dia.Paper: can not unfreeze the paper after it was removed");n.id=gD(this.updateViewsAsync,this,t,e)},notifyBeforeRender:function(t={}){let e=t.beforeRender;typeof e!="function"&&(e=this.options.beforeRender,typeof e!="function")||e.call(this,t,this)},notifyAfterRender:function(t,e={}){let n=e.afterRender;typeof n!="function"&&(n=this.options.afterRender),typeof n=="function"&&n.call(this,t,e,this),this.trigger("render:done",t,e)},updateViewsBatch:function(t){t||(t={});var e=t.batchSize||NBe,n=this._updates,r=0,i=0,o=0,a=0,s=PC,l=!0,u=this.options,c=n.priorities,f="viewport"in t?t.viewport:u.viewport;typeof f!="function"&&(f=null);var h=u.onViewPostponed;typeof h!="function"&&(h=null);var d=Object.keys(c);e:for(var g=0,y=d.length;g<y;g++){var _=+d[g],v=c[_];for(var S in v){if(r>=e){l=!1;break e}var C=Dp[S];if(!C){delete v[S];continue}var k=v[S];if(!(k&C.FLAG_REMOVE)){var x=S in n.unmounted;if(C.DETACHABLE&&f&&!f.call(this,C,!x,this)){x||(this.registerUnmountedView(C),this.detachView(C)),n.unmounted[S]|=k,delete v[S],o++;continue}x&&(k|=C.FLAG_INSERT,a++),k|=this.registerMountedView(C)}var m=this.updateView(C,k,t);if(m>0&&(v[S]=m,!h||!h.call(this,C,m,this)||v[S])){i++,l=!1;continue}s>_&&(s=_),r++,delete v[S]}}return{priority:s,updated:r,postponed:i,unmounted:o,mounted:a,empty:l}},getUnmountedViews:function(){const t=this._updates,e=Object.keys(t.unmounted),n=e.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=Dp[e[i]];return r},getMountedViews:function(){const t=this._updates,e=Object.keys(t.mounted),n=e.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=Dp[e[i]];return r},checkUnmountedViews:function(t,e){e||(e={});var n=0;typeof t!="function"&&(t=null);for(var r=("mountBatchSize"in e)?e.mountBatchSize:1/0,i=this._updates,o=i.unmountedCids,a=i.unmounted,s=0,l=Math.min(o.length,r);s<l;s++){var u=o[s];if(u in a){var c=Dp[u];if(c){if(c.DETACHABLE&&t&&!t.call(this,c,!1,this)){o.push(u);continue}n++;var f=this.registerMountedView(c);f&&this.scheduleViewUpdate(c,f,c.UPDATE_PRIORITY,{mounting:!0})}}}return o.splice(0,s),n},checkMountedViews:function(t,e){e||(e={});var n=0;if(typeof t!="function")return n;for(var r=("unmountBatchSize"in e)?e.unmountBatchSize:1/0,i=this._updates,o=i.mountedCids,a=i.mounted,s=0,l=Math.min(o.length,r);s<l;s++){var u=o[s];if(u in a){var c=Dp[u];if(c){if(!c.DETACHABLE||t.call(this,c,!0,this)){o.push(u);continue}n++;var f=this.registerUnmountedView(c);f&&this.detachView(c)}}}return o.splice(0,s),n},checkViewVisibility:function(t,e={}){let n="viewport"in e?e.viewport:this.options.viewport;typeof n!="function"&&(n=null);const r=this._updates,{mounted:i,unmounted:o}=r,a=!t.DETACHABLE||!n||n.call(this,t,!1,this);let s=!1,l=!1;if(t.cid in i&&!a){this.registerUnmountedView(t)&&this.detachView(t);const f=r.mountedCids.indexOf(t.cid);r.mountedCids.splice(f,1),s=!0}if(!s&&t.cid in o&&a){const c=r.unmountedCids.indexOf(t.cid);r.unmountedCids.splice(c,1);var u=this.registerMountedView(t);u&&this.scheduleViewUpdate(t,u,t.UPDATE_PRIORITY,{mounting:!0}),l=!0}return{mounted:l?1:0,unmounted:s?1:0}},checkViewport:function(t){var e=nu({},t,{mountBatchSize:1/0,unmountBatchSize:1/0}),n="viewport"in e?e.viewport:this.options.viewport,r=this.checkMountedViews(n,e);if(r>0){var i=this._updates.unmountedCids;e.mountBatchSize=Math.min(i.length-r,e.mountBatchSize)}var o=this.checkUnmountedViews(n,e);return{mounted:o,unmounted:r}},freeze:function(t){t||(t={});var e=this._updates,n=t.key,r=this.options.frozen,i=e.freezeKey;if(n&&n!==i){if(r&&i)return;e.freezeKey=n,e.keyFrozen=r}this.options.frozen=!0;var o=e.id;e.id=null,this.isAsync()&&o&&mD(o)},unfreeze:function(t){t||(t={});var e=this._updates,n=t.key,r=e.freezeKey;n&&r&&n!==r||(e.freezeKey=null,!(n&&n===r&&e.keyFrozen)&&(this.isAsync()?(this.freeze(),this.updateViewsAsync(t)):this.updateViews(t),this.options.frozen=e.keyFrozen=!1,e.sort&&(this.sortViews(),e.sort=!1)))},isAsync:function(){return!!this.options.async},isFrozen:function(){return!!this.options.frozen},isExactSorting:function(){return this.options.sorting===Bm.EXACT},onRemove:function(){this.freeze(),this._updates.disabled=!0,this.removeLayers(),this.removeViews()},getComputedSize:function(){var t=this.options,e=t.width,n=t.height;return Ka(e)||(e=this.el.clientWidth),Ka(n)||(n=this.el.clientHeight),{width:e,height:n}},setDimensions:function(t,e){const{options:n}=this,{width:r,height:i}=n;let o=t===void 0?r:t,a=e===void 0?i:e;if(r===o&&i===a)return;n.width=o,n.height=a,this._setDimensions();const s=this.getComputedSize();this.trigger("resize",s.width,s.height)},_setDimensions:function(){const{options:t}=this;let e=t.width,n=t.height;Ka(e)&&(e=Math.round(e)),Ka(n)&&(n=Math.round(n)),this.$el.css({width:e===null?"":e,height:n===null?"":n})},setOrigin:function(t,e){return this.translate(t||0,e||0)},fitToContent:function(t,e,n,r){Jn(t)?r=t:r=Nt({gridWidth:t,gridHeight:e,padding:n},r);const{x:i,y:o,width:a,height:s}=this.getFitToContentArea(r),{sx:l,sy:u}=this.scale();return this.setOrigin(-i*l,-o*u),this.setDimensions(a*l,s*u),new st(i,o,a,s)},getFitToContentArea:function(t={}){const e=t.gridWidth||1,n=t.gridHeight||1,r=$g(t.padding||0),i=Math.max(t.minWidth||0,e),o=Math.max(t.minHeight||0,n),a=t.maxWidth||Number.MAX_VALUE,s=t.maxHeight||Number.MAX_VALUE,l=t.allowNewOrigin,u="contentArea"in t?new st(t.contentArea):this.getContentArea(t),{sx:c,sy:f}=this.scale();u.x*=c,u.y*=f,u.width*=c,u.height*=f;let h=Math.ceil((u.width+u.x)/e),d=Math.ceil((u.height+u.y)/n);t.allowNegativeBottomRight||(h=Math.max(h,1),d=Math.max(d,1)),h*=e,d*=n;let g=0;(l==="negative"&&u.x<0||l==="positive"&&u.x>=0||l==="any")&&(g=Math.ceil(-u.x/e)*e,g+=r.left,h+=g);let y=0;return(l==="negative"&&u.y<0||l==="positive"&&u.y>=0||l==="any")&&(y=Math.ceil(-u.y/n)*n,y+=r.top,d+=y),h+=r.right,d+=r.bottom,h=Math.max(h,i),d=Math.max(d,o),h=Math.min(h,a),d=Math.min(d,s),new st(-g/c,-y/f,h/c,d/f)},transformToFitContent:function(t){t||(t={});let e,n;if("contentArea"in t){const _=t.contentArea;e=this.localToPaperRect(_),n=new we(_)}else e=this.getContentBBox(t),n=this.paperToLocalPoint(e);if(!e.width||!e.height)return;nu(t,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE,verticalAlign:"top",horizontalAlign:"left"});const r=$g(t.padding),i=t.minScaleX||t.minScale,o=t.maxScaleX||t.maxScale,a=t.minScaleY||t.minScale,s=t.maxScaleY||t.maxScale;let l;if(t.fittingBBox)l=t.fittingBBox;else{const _=this.translate(),v=this.getComputedSize();l={x:_.tx,y:_.ty,width:v.width,height:v.height}}l=new st(l).moveAndExpand({x:r.left,y:r.top,width:-r.left-r.right,height:-r.top-r.bottom});const u=this.scale();let c=l.width/e.width*u.sx,f=l.height/e.height*u.sy;if(t.preserveAspectRatio&&(c=f=Math.min(c,f)),t.scaleGrid){const _=t.scaleGrid;c=_*Math.floor(c/_),f=_*Math.floor(f/_)}c=Math.min(o,Math.max(i,c)),f=Math.min(s,Math.max(a,f));const h={x:c/u.sx,y:f/u.sy},d=this.options.origin;let g=l.x-n.x*c-d.x,y=l.y-n.y*f-d.y;switch(t.verticalAlign){case"middle":y=y+(l.height-e.height*h.y)/2;break;case"bottom":y=y+(l.height-e.height*h.y);break}switch(t.horizontalAlign){case"middle":g=g+(l.width-e.width*h.x)/2;break;case"right":g=g+(l.width-e.width*h.x);break}this.scale(c,f),this.translate(g,y)},scaleContentToFit:function(t){this.transformToFitContent(t)},getContentArea:function(t){return t&&t.useModelGeometry?this.model.getBBox()||new st:Ue(this.cells).getBBox()},getContentBBox:function(t){return this.localToPaperRect(this.getContentArea(t))},getArea:function(){return this.paperToLocalRect(this.getComputedSize())},getRestrictedArea:function(...t){const{restrictTranslate:e}=this.options;let n;return br(e)?n=e.apply(this,t):e===!0?n=this.getArea():e?n=new st(e):n=null,n},createViewForModel:function(t){const{options:e}=this;var n,r,i=e.cellViewNamespace,o=t.get("type")+"View",a=x_(i,o,".");t.isLink()?(n=e.linkView,r=v1):(n=e.elementView,r=ao);var s=n.prototype instanceof Go.View?a||n:n.call(this,t)||a||r;return new s({model:t,interactive:e.interactive,labelsLayer:e.labelsLayer===!0?bl.LABELS:e.labelsLayer})},removeView:function(t){const{id:e}=t,{_views:n,_updates:r}=this,i=n[e];if(i){var{cid:o}=i;const{mounted:a,unmounted:s}=r;i.remove(),delete n[e],delete a[o],delete s[o]}return i},renderView:function(t,e){const{id:n}=t,r=this._views;let i,o,a=!0;return n in r&&(i=r[n],i.model===t?(o=i.FLAG_INSERT,a=!1):this.removeView(t)),a&&(i=r[n]=this.createViewForModel(t),i.paper=this,o=this.registerUnmountedView(i)|this.FLAG_INIT|i.getFlag(Mi(i,"initFlag"))),this.requestViewUpdate(i,o,i.UPDATE_PRIORITY,e),i},onImageDragStart:function(){return!1},resetViews:function(t,e){e||(e={}),t||(t=[]),this._resetUpdates(),this.removeViews();const n=this.options.autoFreeze?null:"reset";this.freeze({key:n});for(var r=0,i=t.length;r<i;r++)this.renderView(t[r],e);this.unfreeze({key:n}),this.sortViews()},removeViews:function(){cu(this._views,"remove"),this._views={}},sortViews:function(){if(this.isExactSorting()){if(this.isFrozen()){this._updates.sort=!0;return}this.sortViewsExact()}},sortViewsExact:function(){var t=Vn(this.cells).children("[model-id]"),e=this.model.get("cells");_7e(t,function(n,r){var i=e.get(n.getAttribute("model-id")),o=e.get(r.getAttribute("model-id")),a=i.attributes.z||0,s=o.attributes.z||0;return a===s?0:a<s?-1:1})},insertView:function(t,e){const n=this.getLayerView(bl.CELLS),{el:r,model:i}=t;switch(this.options.sorting){case Bm.APPROX:n.insertSortedNode(r,i.get("z"));break;case Bm.EXACT:default:n.insertNode(r);break}t.onMount(e)},detachView(t){t.unmount(),t.onDetach()},scale:function(t,e,n,r){if(t===void 0)return Ue.matrixToScale(this.matrix());e===void 0&&(e=t),n===void 0&&(n=0,r=0);var i=this.translate();if(n||r||i.tx||i.ty){var o=i.tx-n*(t-1),a=i.ty-r*(e-1);this.translate(o,a)}t=Math.max(t||0,this.MIN_SCALE),e=Math.max(e||0,this.MIN_SCALE);var s=this.matrix();return s.a=t,s.d=e,this.matrix(s),this.trigger("scale",t,e,n,r),this},rotate:function(t,e,n){if(t===void 0)return Ue.matrixToRotate(this.matrix());if(e===void 0){var r=this.cells.getBBox();e=r.width/2,n=r.height/2}var i=this.matrix().translate(e,n).rotate(t).translate(-e,-n);return this.matrix(i),this},translate:function(t,e){if(t===void 0)return Ue.matrixToTranslate(this.matrix());const{options:n}=this,{origin:r,drawGrid:i}=n;t||(t=0),e||(e=0);const o=this.matrix();if(o.e===t&&o.f===e)return this;o.e=t,o.f=e,this.matrix(o);const{tx:a,ty:s}=this.translate();return r.x=a,r.y=s,this.trigger("translate",a,s),i&&this.drawGrid(),this},findView:function(t){var e=Ko(t)?this.cells.querySelector(t):t instanceof Vn?t[0]:t,n=this.findAttribute("model-id",e);if(n)return this._views[n]},findViewByModel:function(t){var e=Ko(t)||Ka(t)?t:t&&t.id;return this._views[e]},findViewsFromPoint:function(t){t=new we(t);var e=this.model.getElements().map(this.findViewByModel,this);return e.filter(function(n){return n&&n.vel.getBBox({target:this.cells}).containsPoint(t)},this)},findViewsInArea:function(t,e){e=nu(e||{},{strict:!1}),t=new st(t);var n=this.model.getElements().map(this.findViewByModel,this),r=e.strict?"containsRect":"intersect";return n.filter(function(i){return i&&t[r](i.vel.getBBox({target:this.cells}))},this)},removeTools:function(){return this.dispatchToolsEvent("remove"),this},hideTools:function(){return this.dispatchToolsEvent("hide"),this},showTools:function(){return this.dispatchToolsEvent("show"),this},dispatchToolsEvent:function(t,...e){typeof t=="string"&&this.trigger("tools:event",t,...e)},getModelById:function(t){return this.model.getCell(t)},snapToGrid:function(t,e){return this.clientToLocalPoint(t,e).snapToGrid(this.options.gridSize)},localToPaperPoint:function(t,e){var n=new we(t,e),r=Ue.transformPoint(n,this.matrix());return r},localToPaperRect:function(t,e,n,r){var i=new st(t,e,n,r),o=Ue.transformRect(i,this.matrix());return o},paperToLocalPoint:function(t,e){var n=new we(t,e),r=Ue.transformPoint(n,this.matrix().inverse());return r},paperToLocalRect:function(t,e,n,r){var i=new st(t,e,n,r),o=Ue.transformRect(i,this.matrix().inverse());return o},localToClientPoint:function(t,e){var n=new we(t,e),r=Ue.transformPoint(n,this.clientMatrix());return r},localToClientRect:function(t,e,n,r){var i=new st(t,e,n,r),o=Ue.transformRect(i,this.clientMatrix());return o},clientToLocalPoint:function(t,e){var n=new we(t,e),r=Ue.transformPoint(n,this.clientMatrix().inverse());return r},clientToLocalRect:function(t,e,n,r){var i=new st(t,e,n,r),o=Ue.transformRect(i,this.clientMatrix().inverse());return o},localToPagePoint:function(t,e){return this.localToPaperPoint(t,e).offset(this.pageOffset())},localToPageRect:function(t,e,n,r){return this.localToPaperRect(t,e,n,r).offset(this.pageOffset())},pageToLocalPoint:function(t,e){var n=new we(t,e),r=n.difference(this.pageOffset());return this.paperToLocalPoint(r)},pageToLocalRect:function(t,e,n,r){var i=this.pageOffset(),o=new st(t,e,n,r);return o.x-=i.x,o.y-=i.y,this.paperToLocalRect(o)},clientOffset:function(){var t=this.svg.getBoundingClientRect();return new we(t.left,t.top)},pageOffset:function(){return this.clientOffset().offset(window.scrollX,window.scrollY)},linkAllowed:function(t){if(!(t instanceof v1))throw new Error("Must provide a linkView.");var e=t.model,n=this.options,r=this.model,i=r.constructor.validations;return!(!n.multiLinks&&!i.multiLinks.call(this,r,e)||!n.linkPinning&&!i.linkPinning.call(this,r,e)||typeof n.allowLink=="function"&&!n.allowLink.call(this,t,this))},getDefaultLink:function(t,e){return br(this.options.defaultLink)?this.options.defaultLink.call(this,t,e):this.options.defaultLink.clone()},resolveHighlighter:function(t={}){let{highlighter:e,type:n}=t;const{highlighting:r,highlighterNamespace:i}=this.options;if(e===void 0){if(!r||n&&(e=r[n],e===!1))return!1;e||(e=r.default)}if(!e)return!1;Ko(e)&&(e={name:e});const o=e.name,a=i[o];if(!a)throw new Error('Unknown highlighter ("'+o+'")');if(typeof a.highlight!="function")throw new Error('Highlighter ("'+o+'") is missing required highlight() method');if(typeof a.unhighlight!="function")throw new Error('Highlighter ("'+o+'") is missing required unhighlight() method');return{highlighter:a,options:e.options||{},name:o}},onCellHighlight:function(t,e,n){const r=this.resolveHighlighter(n);if(!r)return;const{highlighter:i,options:o}=r;i.highlight(t,e,o)},onCellUnhighlight:function(t,e,n){const r=this.resolveHighlighter(n);if(!r)return;const{highlighter:i,options:o}=r;i.unhighlight(t,e,o)},pointerdblclick:function(t){t.preventDefault(),t=yi(t);var e=this.findView(t.target);if(!this.guard(t,e)){var n=this.snapToGrid(t.clientX,t.clientY);e?e.pointerdblclick(t,n.x,n.y):this.trigger("blank:pointerdblclick",t,n.x,n.y)}},pointerclick:function(t){var e=this.eventData(t);if(e.mousemoved<=this.options.clickThreshold){t=yi(t);var n=this.findView(t.target);if(this.guard(t,n))return;var r=this.snapToGrid(t.clientX,t.clientY);n?n.pointerclick(t,r.x,r.y):this.trigger("blank:pointerclick",t,r.x,r.y)}},contextmenu:function(t){if(this.options.preventContextMenu&&t.preventDefault(),this.contextMenuFired){this.contextMenuFired=!1;return}t=yi(t),this.contextMenuTrigger(t)},contextMenuTrigger:function(t){var e=this.findView(t.target);if(!this.guard(t,e)){var n=this.snapToGrid(t.clientX,t.clientY);e?e.contextmenu(t,n.x,n.y):this.trigger("blank:contextmenu",t,n.x,n.y)}},pointerdown:function(t){t=yi(t);const{target:e,button:n}=t,r=this.findView(e),i=n===2;if(r){if(!i&&this.guard(t,r))return;const o=this.FORM_CONTROL_TAG_NAMES.includes(e.tagName);this.options.preventDefaultViewAction&&!o&&t.preventDefault(),o&&r.preventDefaultInteraction(t);const a=r.el,s=e.closest("[event]");if(s&&a!==s&&r.el.contains(s)){const u=yi(Vn.Event(t.originalEvent,{data:t.data,currentTarget:s}));if(this.onevent(u),u.isDefaultPrevented()&&t.preventDefault(),u.isPropagationStopped())return;t.data=u.data}const l=e.closest("[magnet]");if(l&&r.el!==l&&r.el.contains(l)){const u=yi(Vn.Event(t.originalEvent,{data:t.data,currentTarget:l}));if(this.onmagnet(u),u.isDefaultPrevented()&&t.preventDefault(),u.isPropagationStopped()){if(i)return;this.delegateDragEvents(r,u.data);return}t.data=u.data}}if(i){this.contextMenuFired=!0;const o=Vn.Event(t.originalEvent,{type:"contextmenu",data:t.data});this.contextMenuTrigger(o)}else{const o=this.snapToGrid(t.clientX,t.clientY);r?r.pointerdown(t,o.x,o.y):(this.options.preventDefaultBlankAction&&t.preventDefault(),this.trigger("blank:pointerdown",t,o.x,o.y)),this.delegateDragEvents(r,t.data)}},pointermove:function(t){var e=this.eventData(t);e.mousemoved||(e.mousemoved=0,this.undelegateEvents());var n=++e.mousemoved;if(!(n<=this.options.moveThreshold)){t=yi(t);var r=this.snapToGrid(t.clientX,t.clientY),i=e.sourceView;i?i.pointermove(t,r.x,r.y):this.trigger("blank:pointermove",t,r.x,r.y),this.eventData(t,e)}},pointerup:function(t){this.undelegateDocumentEvents();var e=yi(t),n=this.snapToGrid(e.clientX,e.clientY),r=this.eventData(t).sourceView;r?r.pointerup(e,n.x,n.y):this.trigger("blank:pointerup",e,n.x,n.y),e.isPropagationStopped()||this.pointerclick(Vn.Event(t.originalEvent,{type:"click",data:t.data})),this.delegateEvents()},mouseover:function(t){t=yi(t);var e=this.findView(t.target);if(!this.guard(t,e))if(e)e.mouseover(t);else{if(this.el===t.target)return;this.trigger("blank:mouseover",t)}},mouseout:function(t){t=yi(t);var e=this.findView(t.target);if(!this.guard(t,e))if(e)e.mouseout(t);else{if(this.el===t.target)return;this.trigger("blank:mouseout",t)}},mouseenter:function(t){t=yi(t);const{target:e,relatedTarget:n,currentTarget:r}=t,i=this.findView(e);if(this.guard(t,i))return;const o=this.findView(n);i&&(o===i||(i.mouseenter(t),this.el.contains(n)))||o||r===this.el&&this.trigger("paper:mouseenter",t)},mouseleave:function(t){t=yi(t);const{target:e,relatedTarget:n,currentTarget:r}=t,i=this.findView(e);if(this.guard(t,i))return;const o=this.findView(n);i&&(o===i||(i.mouseleave(t),this.el.contains(n)))||o||r===this.el&&this.trigger("paper:mouseleave",t)},_processMouseWheelEvtBuf:o7e(function(){const{event:t,deltas:e}=this._mw_evt_buffer,n=e.reduce((a,s)=>a+m7e(s,MBe),0),r=Math.pow(.995,n),{x:i,y:o}=this.clientToLocalPoint(t.clientX,t.clientY);this.trigger("paper:pinch",t,i,o,r),this._mw_evt_buffer={event:null,deltas:[]}},nH,{maxWait:nH}),mousewheel:function(t){t=yi(t);const e=this.findView(t.target);if(this.guard(t,e))return;const n=t.originalEvent,r=this.snapToGrid(n.clientX,n.clientY),{deltaX:i,deltaY:o}=g7e(n),a=this._events["paper:pinch"];if(t.ctrlKey&&a&&a.length>0)n.preventDefault(),this._mw_evt_buffer.event=n,this._mw_evt_buffer.deltas.push(o),this._processMouseWheelEvtBuf();else{const s=Math.max(-1,Math.min(1,n.wheelDelta));e?e.mousewheel(t,r.x,r.y,s):this.trigger("blank:mousewheel",t,r.x,r.y,s),this.trigger("paper:pan",t,i,o)}},onevent:function(t){var e=t.currentTarget,n=e.getAttribute("event");if(n){var r=this.findView(e);if(r){if(t=yi(t),this.guard(t,r))return;var i=this.snapToGrid(t.clientX,t.clientY);r.onevent(t,n,i.x,i.y)}}},magnetEvent:function(t,e){var n=t.currentTarget,r=n.getAttribute("magnet");if(r){var i=this.findView(n);if(i){if(t=yi(t),this.guard(t,i))return;var o=this.snapToGrid(t.clientX,t.clientY);e.call(this,i,t,n,o.x,o.y)}}},onmagnet:function(t){if(t.button===2){this.contextMenuFired=!0,this.magnetContextMenuFired=!0;const e=Vn.Event(t.originalEvent,{type:"contextmenu",data:t.data,currentTarget:t.currentTarget});this.magnetContextMenuTrigger(e),e.isPropagationStopped()&&t.stopPropagation()}else this.magnetEvent(t,function(e,n,r,i,o){e.onmagnet(n,i,o)})},magnetpointerdblclick:function(t){this.magnetEvent(t,function(e,n,r,i,o){e.magnetpointerdblclick(n,r,i,o)})},magnetcontextmenu:function(t){if(this.options.preventContextMenu&&t.preventDefault(),this.magnetContextMenuFired){this.magnetContextMenuFired=!1;return}this.magnetContextMenuTrigger(t)},magnetContextMenuTrigger:function(t){this.magnetEvent(t,function(e,n,r,i,o){e.magnetcontextmenu(n,r,i,o)})},onlabel:function(t){var e=t.currentTarget,n=this.findView(e);if(n){if(t=yi(t),this.guard(t,n))return;var r=this.snapToGrid(t.clientX,t.clientY);n.onlabel(t,r.x,r.y)}},getPointerArgs(t){const e=yi(t),{x:n,y:r}=this.snapToGrid(e.clientX,e.clientY);return[e,n,r]},delegateDragEvents:function(t,e){e||(e={}),this.eventData({data:e},{sourceView:t||null,mousemoved:0}),this.delegateDocumentEvents(null,e)},guard:function(t,e){if(t.type==="mousedown"&&t.button===2||this.options.guard&&this.options.guard(t,e))return!0;if(t.data&&t.data.guarded!==void 0)return t.data.guarded;const{target:n}=t;return this.GUARDED_TAG_NAMES.includes(n.tagName)?!0:!(e&&e.model&&e.model instanceof pc||this.svg===n||this.el===n||Vn.contains(this.svg,n))},setGridSize:function(t){const{options:e}=this;return e.gridSize=t,e.drawGrid&&!e.drawGridSize&&this.drawGrid(),this},clearGrid:function(){return this.$grid&&this.$grid.css("backgroundImage","none"),this},_getGridRefs:function(){return this._gridCache||(this._gridCache={root:Ue("svg",{width:"100%",height:"100%"},Ue("defs")),patterns:{},add:function(t,e){Ue(this.root.node.childNodes[0]).append(e),this.patterns[t]=e,this.root.append(Ue("rect",{width:"100%",height:"100%",fill:"url(#"+t+")"}))},get:function(t){return this.patterns[t]},exist:function(t){return this.patterns[t]!==void 0}}),this._gridCache},setGrid:function(t){this.clearGrid(),this._gridCache=null,this._gridSettings=[];var e=Array.isArray(t)?t:[t||{}];return e.forEach(function(n){this._gridSettings.push.apply(this._gridSettings,this._resolveDrawGridOption(n))},this),this},_resolveDrawGridOption:function(t){var e=this.constructor.gridPatterns;if(Ko(t)&&Array.isArray(e[t]))return e[t].map(function(l){return Nt({},l)});var n=t||{args:[{}]},r=Array.isArray(n),i=n.name;if(!r&&!i&&!n.markup&&(i="dot"),i&&Array.isArray(e[i])){var o=e[i].map(function(l){return Nt({},l)}),a=Array.isArray(n.args)?n.args:[n.args||{}];nu(a[0],Ig(t,"args"));for(var s=0;s<a.length;s++)o[s]&&Nt(o[s],a[s]);return o}return r?n:[n]},drawGrid:function(t){const e=this.options.drawGridSize||this.options.gridSize;if(e<=1)return this.clearGrid();var n=Array.isArray(t)?t:[t],r=this.matrix(),i=this._getGridRefs();this._gridSettings.forEach(function(a,s){var l="pattern_"+s,u=Ri(a,n[s],{sx:r.a||1,sy:r.d||1,ox:r.e||0,oy:r.f||0});u.width=e*(r.a||1)*(u.scaleFactor||1),u.height=e*(r.d||1)*(u.scaleFactor||1),i.exist(l)||i.add(l,Ue("pattern",{id:l,patternUnits:"userSpaceOnUse"},Ue(u.markup)));var c=i.get(l);br(u.update)&&u.update(c.node.childNodes[0],u);var f=u.ox%u.width;f<0&&(f+=u.width);var h=u.oy%u.height;h<0&&(h+=u.height),c.attr({x:f,y:h,width:u.width,height:u.height})});var o=new XMLSerializer().serializeToString(i.root.node);return o="url(data:image/svg+xml;base64,"+btoa(o)+")",this.$grid.css("backgroundImage",o),this},updateBackgroundImage:function(t){t=t||{};var e=t.position||"center",n=t.size||"auto auto",r=this.scale(),i=this.translate();if(Jn(e)){var o=i.tx+r.sx*(e.x||0),a=i.ty+r.sy*(e.y||0);e=o+"px "+a+"px"}Jn(n)&&(n=new st(n).scale(r.sx,r.sy),n=n.width+"px "+n.height+"px"),this.$background.css({backgroundSize:n,backgroundPosition:e})},drawBackgroundImage:function(t,e){if(!(t instanceof HTMLImageElement)){this.$background.css("backgroundImage","");return}if(!(!this._background||this._background.id!==e.id)){e=e||{};var n,r=e.size,i=e.repeat||"no-repeat",o=e.opacity||1,a=Math.abs(e.quality)||1,s=this.constructor.backgroundPatterns[u7e(i)];if(br(s)){t.width*=a,t.height*=a;var l=s(t,e);if(!(l instanceof HTMLCanvasElement))throw new Error("dia.Paper: background pattern must return an HTML Canvas instance");n=l.toDataURL("image/png"),i="repeat",Jn(r)?(r.width*=l.width/t.width,r.height*=l.height/t.height):r===void 0&&(e.size={width:l.width/a,height:l.height/a})}else n=t.src,r===void 0&&(e.size={width:t.width,height:t.height});this.$background.css({opacity:o,backgroundRepeat:i,backgroundImage:"url("+n+")"}),this.updateBackgroundImage(e)}},updateBackgroundColor:function(t){this.$el.css("backgroundColor",t||"")},drawBackground:function(t){if(t=t||{},this.updateBackgroundColor(t.color),t.image){t=this._background=vl(t),vv(t);var e=document.createElement("img");e.onload=this.drawBackgroundImage.bind(this,e,t),e.src=t.image}else this.drawBackgroundImage(null),this._background=null;return this},setInteractivity:function(t){this.options.interactive=t,cu(this._views,"setInteractivity",t)},isDefined:function(t){return!!this.svg.getElementById(t)},defineFilter:function(t){if(!Jn(t))throw new TypeError("dia.Paper: defineFilter() requires 1. argument to be an object.");var e=t.id,n=t.name;if(e||(e=n+this.svg.id+xC(JSON.stringify(t))),!this.isDefined(e)){var r=w7e,i=r[n]&&r[n](t.args||{});if(!i)throw new Error("Non-existing filter "+n);var o=Nt({filterUnits:"objectBoundingBox",x:-1,y:-1,width:3,height:3},t.attrs,{id:e});Ue(i,o).appendTo(this.defs)}return e},defineGradient:function(t){if(!Jn(t))throw new TypeError("dia.Paper: defineGradient() requires 1. argument to be an object.");const{svg:e,defs:n}=this,{type:r,id:i=r+e.id+xC(JSON.stringify(t)),stops:o,attrs:a={}}=t;if(this.isDefined(i))return i;const s=Dn(o).map(({offset:u,color:c,opacity:f})=>Ue("stop").attr({offset:u,"stop-color":c,"stop-opacity":Number.isFinite(f)?f:1})),l=Ue(r,a,s);return l.id=i,l.appendTo(n),i},definePattern:function(t){if(!Jn(t))throw new TypeError("dia.Paper: definePattern() requires 1. argument to be an object.");const{svg:e,defs:n}=this,{id:r=e.id+xC(JSON.stringify(t)),markup:i,attrs:o={}}=t;if(!i)throw new TypeError("dia.Paper: definePattern() requires markup.");if(this.isDefined(r))return r;const a=Ue("pattern",{patternUnits:"userSpaceOnUse"});if(a.id=r,a.attr(o),typeof i=="string")a.append(Ue(i));else{const{fragment:s}=_T(i);a.append(s)}return a.appendTo(n),r},defineMarker:function(t){if(!Jn(t))throw new TypeError("dia.Paper: defineMarker() requires the first argument to be an object.");const{svg:e,defs:n}=this,{id:r=e.id+xC(JSON.stringify(t)),markup:i,attrs:o={},markerUnits:a="userSpaceOnUse"}=t;if(this.isDefined(r))return r;const s=Ue("marker",{orient:"auto",overflow:"visible",markerUnits:a});s.id=r,s.attr(o);let l;if(i){let f;if(typeof i=="string")f=Ue(i),f=Array.isArray(f)?f:[f];else{const{fragment:h}=_T(i);f=Ue(h).children()}f.length>1?l=Ue("g").append(f):l=f[0]}else{const{type:f="path"}=t;l=Ue(f)}const u=Ig(t,"type","id","markup","attrs","markerUnits");return Object.keys(u).forEach(f=>{const h=u[f],d=l.attr(f);if(d==null)l.attr(f,h);else switch(f){case"transform":l.attr(f,h+" "+d);break}}),l.appendTo(s),s.appendTo(n),r}},{sorting:Bm,Layers:bl,backgroundPatterns:{flipXy:function(t){var e=document.createElement("canvas"),n=t.width,r=t.height;e.width=2*n,e.height=2*r;var i=e.getContext("2d");return i.drawImage(t,0,0,n,r),i.setTransform(-1,0,0,-1,e.width,e.height),i.drawImage(t,0,0,n,r),i.setTransform(-1,0,0,1,e.width,0),i.drawImage(t,0,0,n,r),i.setTransform(1,0,0,-1,0,e.height),i.drawImage(t,0,0,n,r),e},flipX:function(t){var e=document.createElement("canvas"),n=t.width,r=t.height;e.width=n*2,e.height=r;var i=e.getContext("2d");return i.drawImage(t,0,0,n,r),i.translate(2*n,0),i.scale(-1,1),i.drawImage(t,0,0,n,r),e},flipY:function(t){var e=document.createElement("canvas"),n=t.width,r=t.height;e.width=n,e.height=r*2;var i=e.getContext("2d");return i.drawImage(t,0,0,n,r),i.translate(0,2*r),i.scale(1,-1),i.drawImage(t,0,0,n,r),e},watermark:function(t,e){e=e||{};var n=t.width,r=t.height,i=document.createElement("canvas");i.width=n*3,i.height=r*3;for(var o=i.getContext("2d"),a=Ka(e.watermarkAngle)?-e.watermarkAngle:-20,s=ss(a),l=i.width/4,u=i.height/4,c=0;c<4;c++)for(var f=0;f<4;f++)(c+f)%2>0&&(o.setTransform(1,0,0,1,(2*c-1)*l,(2*f-1)*u),o.rotate(s),o.drawImage(t,-n/2,-r/2,n,r));return i}},gridPatterns:{dot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(t,e){Ue(t).attr({width:e.thickness*e.sx,height:e.thickness*e.sy,fill:e.color})}}],fixedDot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(t,e){var n=e.sx<=1?e.thickness*e.sx:e.thickness;Ue(t).attr({width:n,height:n,fill:e.color})}}],mesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(t,e){var n,r=e.width,i=e.height,o=e.thickness;r-o>=0&&i-o>=0?n=["M",r,0,"H0 M0 0 V0",i].join(" "):n="M 0 0 0 0",Ue(t).attr({d:n,stroke:e.color,"stroke-width":e.thickness})}}],doubleMesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(t,e){var n,r=e.width,i=e.height,o=e.thickness;r-o>=0&&i-o>=0?n=["M",r,0,"H0 M0 0 V0",i].join(" "):n="M 0 0 0 0",Ue(t).attr({d:n,stroke:e.color,"stroke-width":e.thickness})}},{color:"#000000",thickness:3,scaleFactor:4,markup:"path",update:function(t,e){var n,r=e.width,i=e.height,o=e.thickness;r-o>=0&&i-o>=0?n=["M",r,0,"H0 M0 0 V0",i].join(" "):n="M 0 0 0 0",Ue(t).attr({d:n,stroke:e.color,"stroke-width":e.thickness})}}]}}),H5=bf.extend({name:null,tagName:"g",className:"tool",svgElement:!0,_visible:!0,init:function(){var t=this.name;t&&this.vel.attr("data-tool-name",t)},configure:function(t,e){return this.relatedView=t,this.paper=t.paper,this.parentView=e,this.simulateRelatedView(this.el),this.delegateEvents(),this},simulateRelatedView:function(t){t&&t.setAttribute("model-id",this.relatedView.model.id)},getName:function(){return this.name},show:function(){this.el.style.display="",this._visible=!0},hide:function(){this.el.style.display="none",this._visible=!1},isVisible:function(){return!!this._visible},focus:function(){var t=this.options.focusOpacity;isFinite(t)&&(this.el.style.opacity=t),this.parentView.focusTool(this)},blur:function(){this.el.style.opacity="",this.parentView.blurTool(this)},update:function(){},guard:function(t){const{paper:e,relatedView:n}=this;return!e||!n?!0:e.guard(t,n)}}),v0=bf.extend({tagName:"g",className:"tools",svgElement:!0,tools:null,isRendered:!1,options:{tools:null,relatedView:null,name:null},configure:function(t){t=Nt(this.options,t);var e=t.tools;if(!Array.isArray(e))return this;var n=t.relatedView;if(!(n instanceof Cn))return this;for(var r=this.tools=[],i=0,o=e.length;i<o;i++){var a=e[i];a instanceof H5&&(a.configure(n,this),this.vel.append(a.el),r.push(a))}return this.isRendered=!1,n.requestUpdate(n.getFlag("TOOLS")),this},getName:function(){return this.options.name},update:function(t){t||(t={});var e=this.tools;if(!e)return this;for(var n=this.isRendered,r=0,i=e.length;r<i;r++){var o=e[r];n?t.tool!==o.cid&&o.isVisible()&&o.update():o.render()}return this.isMounted()||this.mount(),n||(this.blurTool(),this.isRendered=!0),this},focusTool:function(t){var e=this.tools;if(!e)return this;for(var n=0,r=e.length;n<r;n++){var i=e[n];t===i?i.show():i.hide()}return this},blurTool:function(t){var e=this.tools;if(!e)return this;for(var n=0,r=e.length;n<r;n++){var i=e[n];i!==t&&!i.isVisible()&&(i.show(),i.update())}return this},hide:function(){return this.focusTool(null)},show:function(){return this.blurTool(null)},onRemove:function(){var t=this.tools;if(!t)return this;for(var e=0,n=t.length;e<n;e++)t[e].remove();this.tools=null},mount:function(){const{options:t,el:e}=this,{relatedView:n,layer:r=bl.TOOLS,z:i}=t;return n&&(r?n.paper.getLayerView(r).insertSortedNode(e,i):n.el.appendChild(e)),this}}),C_={exportElement:function(t){return t.size()},exportLink:function(t){var e=t.get("labelSize")||{},n={minLen:t.get("minLen")||1,weight:t.get("weight")||1,labelpos:t.get("labelPosition")||"c",labeloffset:t.get("labelOffset")||0,width:e.width||0,height:e.height||0};return n},importElement:function(t,e,n){var r=this.getCell(e),i=n.node(e);t.setPosition?t.setPosition(r,i):r.set("position",{x:i.x-i.width/2,y:i.y-i.height/2})},importLink:function(t,e,n){const i=this.getCell(e.name),o=n.edge(e),a=o.points||[],s=new $r(a);if(t.setVertices||t.setLinkVertices)if(br(t.setVertices))t.setVertices(i,a);else{s.simplify({threshold:.001});const l=s.points.map(c=>c.toJSON()),u=l.length;i.set("vertices",l.slice(1,u-1))}if(t.setLabels&&"x"in o&&"y"in o){const l={x:o.x,y:o.y};if(br(t.setLabels))t.setLabels(i,l,a);else{const u=s.closestPointLength(l),c=s.pointAtLength(u),f=u/s.length(),h=new we(l).difference(c).toJSON();i.label(0,{position:{distance:f,offset:h}})}}},layout:function(t,e){var n;t instanceof ff?n=t:n=new ff().resetCells(t,{dry:!0,sort:!1}),t=null,e=nu(e||{},{resizeClusters:!0,clusterPadding:10,exportElement:this.exportElement,exportLink:this.exportLink});const r=e.dagre||(typeof dagre<"u"?dagre:void 0);if(r===void 0)throw new Error('The the "dagre" utility is a mandatory dependency.');var i=C_.toGraphLib(n,{graphlib:e.graphlib,directed:!0,multigraph:!0,compound:!0,setNodeLabel:e.exportElement,setEdgeLabel:e.exportLink,setEdgeName:function(c){return c.id}}),o={},a=e.marginX||0,s=e.marginY||0;if(e.rankDir&&(o.rankdir=e.rankDir),e.align&&(o.align=e.align),e.nodeSep&&(o.nodesep=e.nodeSep),e.edgeSep&&(o.edgesep=e.edgeSep),e.rankSep&&(o.ranksep=e.rankSep),e.ranker&&(o.ranker=e.ranker),a&&(o.marginx=a),s&&(o.marginy=s),i.setGraph(o),r.layout(i,{debugTiming:!!e.debugTiming}),n.startBatch("layout"),C_.fromGraphLib(i,{importNode:this.importElement.bind(n,e),importEdge:this.importLink.bind(n,e)}),e.resizeClusters){var l=i.nodes().filter(function(c){return i.children(c).length>0}).map(n.getCell.bind(n)).sort(function(c,f){return f.getAncestors().length-c.getAncestors().length});cu(l,"fitToChildren",{padding:e.clusterPadding})}n.stopBatch("layout");var u=i.graph();return new st(a,s,Math.abs(u.width-2*a),Math.abs(u.height-2*s))},fromGraphLib:function(t,e){e=e||{};var n=e.importNode||sb,r=e.importEdge||sb,i=this instanceof ff?this:new ff;return t.nodes().forEach(function(o){n.call(i,o,t,i,e)}),t.edges().forEach(function(o){r.call(i,o,t,i,e)}),i},toGraphLib:function(t,e){e=e||{};const n=e.graphlib||(typeof graphlib<"u"?graphlib:void 0);if(n===void 0)throw new Error('The the "graphlib" utility is a mandatory dependency.');for(var r=Sse(e,"directed","compound","multigraph"),i=new n.Graph(r),o=e.setNodeLabel||sb,a=e.setEdgeLabel||sb,s=e.setEdgeName||sb,l=t.get("cells"),u=0,c=l.length;u<c;u++){var f=l.at(u);if(f.isLink()){var h=f.get("source"),d=f.get("target");if(!h.id||!d.id)break;i.setEdge(h.id,d.id,a(f),s(f))}else if(i.setNode(f.id,o(f)),i.isCompound()&&f.has("parent")){var g=f.get("parent");l.has(g)&&i.setParent(f.id,g)}}return i}};ff.prototype.toGraphLib=function(t){return C_.toGraphLib(this,t)};ff.prototype.fromGraphLib=function(t,e){return C_.fromGraphLib.call(this,t,e)};const qse={_results:{},_tests:{svgforeignobject:function(){return!!document.createElementNS&&/SVGForeignObject/.test({}.toString.call(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")))}},addTest:function(t,e){return this._tests[t]=e},test:function(t){var e=this._tests[t];if(!e)throw new Error('Test not defined ("'+t+'"). Use `joint.env.addTest(name, fn) to add a new test.`');var n=this._results[t];if(typeof n<"u")return n;try{n=e()}catch{n=!1}return this._results[t]=n,n}},$l=oa.define("basic.Generic",{attrs:{".":{fill:"#ffffff",stroke:"none"}}});$l.define("basic.Rect",{attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:100,height:60},text:{fill:"#000000",text:"","font-size":14,"ref-x":.5,"ref-y":.5,"text-anchor":"middle","y-alignment":"middle","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><rect/></g><text/></g>'});ao.extend({presentationAttributes:ao.addPresentationAttributes({attrs:["SCALE"]}),confirmUpdate:function(){var t=ao.prototype.confirmUpdate.apply(this,arguments);return this.hasFlag(t,"SCALE")&&(this.resize(),t=this.removeFlag(t,"SCALE")),t}});$l.define("basic.Text",{attrs:{text:{"font-size":18,fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><text/></g></g>'});$l.define("basic.Circle",{size:{width:60,height:60},attrs:{circle:{fill:"#ffffff",stroke:"#000000",r:30,cx:30,cy:30},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><circle/></g><text/></g>'});$l.define("basic.Ellipse",{size:{width:60,height:40},attrs:{ellipse:{fill:"#ffffff",stroke:"#000000",rx:30,ry:20,cx:30,cy:20},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><ellipse/></g><text/></g>'});$l.define("basic.Polygon",{size:{width:60,height:40},attrs:{polygon:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon/></g><text/></g>'});$l.define("basic.Polyline",{size:{width:60,height:40},attrs:{polyline:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><polyline/></g><text/></g>'});$l.define("basic.Image",{attrs:{text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><image/></g><text/></g>'});const VBe=$l.define("basic.Path",{size:{width:60,height:60},attrs:{path:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle",ref:"path","ref-x":.5,"ref-dy":10,fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><path/></g><text/></g>'});VBe.define("basic.Rhombus",{attrs:{path:{d:"M 30 0 L 60 30 30 60 0 30 z"},text:{"ref-y":.5,"ref-dy":null,"y-alignment":"middle"}}});const CT=qse.test("svgforeignobject");$l.define("basic.TextBlock",{attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:80,height:100},text:{fill:"#000000","font-size":14,"font-family":"Arial, helvetica, sans-serif"},".content":{text:"","ref-x":.5,"ref-y":.5,"y-alignment":"middle","x-alignment":"middle"}},content:""},{markup:['<g class="rotatable">','<g class="scalable"><rect/></g>',CT?'<foreignObject class="fobj"><body xmlns="http://www.w3.org/1999/xhtml"><div class="content"/></body></foreignObject>':'<text class="content"/>',"</g>"].join(""),initialize:function(){this.listenTo(this,"change:size",this.updateSize),this.listenTo(this,"change:content",this.updateContent),this.updateSize(this,this.get("size")),this.updateContent(this,this.get("content")),$l.prototype.initialize.apply(this,arguments)},updateSize:function(t,e){this.attr({".fobj":Nt({},e),div:{style:Nt({},e)}})},updateContent:function(t,e){CT?this.attr({".content":{html:b7e(e)}}):this.attr({".content":{text:e}})},setForeignObjectSize:function(){this.updateSize.apply(this,arguments)},setDivContent:function(){this.updateContent.apply(this,arguments)}});ao.extend({presentationAttributes:CT?ao.prototype.presentationAttributes:ao.addPresentationAttributes({content:["CONTENT"],size:["CONTENT"]}),initFlag:["RENDER","CONTENT"],confirmUpdate:function(){var t=ao.prototype.confirmUpdate.apply(this,arguments);return this.hasFlag(t,"CONTENT")&&(this.updateContent(this.model),t=this.removeFlag(t,"CONTENT")),t},update:function(t,e){var n=this.model;if(CT)ao.prototype.update.call(this,n,e);else{var r=Ig(e||n.get("attrs"),".content");ao.prototype.update.call(this,n,r),(!e||cf(e,".content"))&&this.updateContent(n,e)}},updateContent:function(t,e){var n=Ri({},(e||t.get("attrs"))[".content"]);n=Ig(n,"text");var r=xse(t.get("content"),t.get("size"),n,{svgDocument:this.paper.svg}),i=pD({},".content",n,"/");i[".content"].text=r,ao.prototype.update.call(this,t,i)}});const BBe=oa.define("standard.Rectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}]}),zBe=oa.define("standard.Circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}]}),jBe=oa.define("standard.Ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"body"},{tagName:"text",selector:"label"}]}),UBe=oa.define("standard.Path",{attrs:{body:{refD:"M 0 0 L 10 0 10 10 0 10 Z",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}]}),WBe=oa.define("standard.Polygon",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polygon",selector:"body"},{tagName:"text",selector:"label"}]}),HBe=oa.define("standard.Polyline",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10 0 0",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polyline",selector:"body"},{tagName:"text",selector:"label"}]}),GBe=oa.define("standard.Image",{attrs:{image:{refWidth:"100%",refHeight:"100%"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),qBe=oa.define("standard.BorderedImage",{attrs:{border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#FFFFFF"},image:{refWidth:-1,refHeight:-1,x:.5,y:.5},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"background",attributes:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),YBe=oa.define("standard.EmbeddedImage",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"},label:{textVerticalAnchor:"top",textAnchor:"left",refX:"30%",refX2:20,refY:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),KBe=oa.define("standard.InscribedImage",{attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#FFFFFF"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),XBe=oa.define("standard.HeaderedRectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},header:{refWidth:"100%",height:30,strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},headerText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:15,fontSize:16,fill:"#333333"},bodyText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}]});var $I=10;const JBe=oa.define("standard.Cylinder",{attrs:{body:{lateralArea:$I,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},top:{refCx:"50%",cy:$I,refRx:"50%",ry:$I,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"100%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],topRy:function(t,e){if(t===void 0)return this.attr("body/lateralArea");var n=Eo(t),r={lateralArea:t},i=n?{refCy:t,refRy:t,cy:null,ry:null}:{refCy:null,refRy:null,cy:t,ry:t};return this.attr({body:r,top:i},e)}},{attributes:{lateralArea:{set:function(t,e){var n=Eo(t);n&&(t=parseFloat(t)/100);var r=e.x,i=e.y,o=e.width,a=e.height,s=o/2,l=n?a*t:t,u=Ue.KAPPA,c=u*s,f=u*(n?a*t:t),h=r,d=r+o/2,g=r+o,y=i+l,_=y-l,v=i+a-l,S=i+a,C=["M",h,y,"L",h,v,"C",r,v+f,d-c,S,d,S,"C",d+c,S,g,v+f,g,v,"L",g,y,"C",g,y-f,d+c,_,d,_,"C",d-c,_,h,y-f,h,y,"Z"];return{d:C.join(" ")}}}}});var ZBe={tagName:"foreignObject",selector:"foreignObject",attributes:{overflow:"hidden"},children:[{tagName:"div",namespaceURI:"http://www.w3.org/1999/xhtml",selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]},QBe={tagName:"text",selector:"label",attributes:{"text-anchor":"middle"}},eze=qse.test("svgforeignobject")?ZBe:QBe;const tze=oa.define("standard.TextBlock",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#ffffff",strokeWidth:2},foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}}},{markup:[{tagName:"rect",selector:"body"},eze]},{attributes:{text:{set:function(t,e,n,r){if(n instanceof HTMLElement)n.textContent=t;else{var i=r.style||{},o={text:t,width:-5,height:"100%"},a=Nt({textVerticalAnchor:"middle"},i);return Ase.textWrap.set.call(this,o,e,n,a),{fill:i.color||null}}},position:function(t,e,n){if(n instanceof SVGElement)return e.center()}}}}),Yse=Zg.define("standard.Link",{attrs:{line:{connection:!0,stroke:"#333333",strokeWidth:2,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 10 -5 0 0 10 5 z"}},wrapper:{connection:!0,strokeWidth:10,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"wrapper",attributes:{fill:"none",cursor:"pointer",stroke:"transparent","stroke-linecap":"round"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]}),nze=Zg.define("standard.DoubleLink",{attrs:{line:{connection:!0,stroke:"#DDDDDD",strokeWidth:4,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"outline",attributes:{fill:"none"}},{tagName:"path",selector:"line",attributes:{fill:"none"}}]}),rze=Zg.define("standard.ShadowLink",{attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}}}},{markup:[{tagName:"path",selector:"shadow",attributes:{fill:"none"}},{tagName:"path",selector:"line",attributes:{fill:"none"}}]}),ize=Object.freeze(Object.defineProperty({__proto__:null,BorderedImage:qBe,Circle:zBe,Cylinder:JBe,DoubleLink:nze,Ellipse:jBe,EmbeddedImage:YBe,HeaderedRectangle:XBe,Image:GBe,InscribedImage:KBe,Link:Yse,Path:UBe,Polygon:WBe,Polyline:HBe,Rectangle:BBe,ShadowLink:rze,TextBlock:tze},Symbol.toStringTag,{value:"Module"})),Kse=$l.define("pn.Place",{size:{width:50,height:50},attrs:{".root":{r:25,fill:"#ffffff",stroke:"#000000",transform:"translate(25, 25)"},".label":{"text-anchor":"middle","ref-x":.5,"ref-y":-20,ref:".root",fill:"#000000","font-size":12},".tokens > circle":{fill:"#000000",r:5},".tokens.one > circle":{transform:"translate(25, 25)"},".tokens.two > circle:nth-child(1)":{transform:"translate(19, 25)"},".tokens.two > circle:nth-child(2)":{transform:"translate(31, 25)"},".tokens.three > circle:nth-child(1)":{transform:"translate(18, 29)"},".tokens.three > circle:nth-child(2)":{transform:"translate(25, 19)"},".tokens.three > circle:nth-child(3)":{transform:"translate(32, 29)"},".tokens.alot > text":{transform:"translate(25, 18)","text-anchor":"middle",fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><circle class="root"/><g class="tokens" /></g><text class="label"/></g>'}),oze=ao.extend({presentationAttributes:ao.addPresentationAttributes({tokens:["TOKENS"]}),initFlag:ao.prototype.initFlag.concat(["TOKENS"]),confirmUpdate:function(...t){let e=ao.prototype.confirmUpdate.call(this,...t);return this.hasFlag(e,"TOKENS")&&(this.renderTokens(),this.update(),e=this.removeFlag(e,"TOKENS")),e},renderTokens:function(){const t=this.vel.findOne(".tokens").empty();["one","two","three","alot"].forEach(function(n){t.removeClass(n)});var e=this.model.get("tokens");if(e)switch(e){case 1:t.addClass("one"),t.append(Ue("circle"));break;case 2:t.addClass("two"),t.append([Ue("circle"),Ue("circle")]);break;case 3:t.addClass("three"),t.append([Ue("circle"),Ue("circle"),Ue("circle")]);break;default:t.addClass("alot"),t.append(Ue("text").text(e+""));break}}}),Xse=$l.define("pn.Transition",{size:{width:12,height:50},attrs:{rect:{width:12,height:50,fill:"#000000",stroke:"#000000"},".label":{"text-anchor":"middle","ref-x":.5,"ref-y":-20,ref:"rect",fill:"#000000","font-size":12}}},{markup:'<g class="rotatable"><g class="scalable"><rect class="root"/></g></g><text class="label"/>'}),aze=Zg.define("pn.Link",{attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z"}}}),sze=Object.freeze(Object.defineProperty({__proto__:null,Link:aze,Place:Kse,PlaceView:oze,Transition:Xse},Symbol.toStringTag,{value:"Module"}));var oH=bf.extend({tagName:"circle",svgElement:!0,className:"marker-vertex",events:{mousedown:"onPointerDown",touchstart:"onPointerDown",dblclick:"onDoubleClick",dbltap:"onDoubleClick"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},attributes:{r:6,fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move"},position:function(t,e){const{vel:n,options:r}=this,{scale:i}=r;let o=Ue.createSVGMatrix().translate(t,e);i&&(o=o.scale(i)),n.transform(o,{absolute:!0})},onPointerDown:function(t){this.options.guard(t)||(t.stopPropagation(),t.preventDefault(),this.options.paper.undelegateEvents(),this.delegateDocumentEvents(null,t.data),this.trigger("will-change",this,t))},onPointerMove:function(t){this.trigger("changing",this,t)},onDoubleClick:function(t){this.trigger("remove",this,t)},onPointerUp:function(t){this.trigger("changed",this,t),this.undelegateDocumentEvents(),this.options.paper.delegateEvents()}});const lze=H5.extend({name:"vertices",options:{handleClass:oH,snapRadius:20,redundancyRemoval:!0,vertexAdding:!0,stopPropagation:!0,scale:null},children:[{tagName:"path",selector:"connection",className:"joint-vertices-path",attributes:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"cell"}}],handles:null,events:{"mousedown .joint-vertices-path":"onPathPointerDown","touchstart .joint-vertices-path":"onPathPointerDown"},onRender:function(){return this.options.vertexAdding&&(this.renderChildren(),this.updatePath()),this.resetHandles(),this.renderHandles(),this},update:function(){var t=this.relatedView,e=t.model.vertices();return e.length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.vertexAdding&&this.updatePath(),this},resetHandles:function(){var t=this.handles;if(this.handles=[],this.stopListening(),!!Array.isArray(t))for(var e=0,n=t.length;e<n;e++)t[e].remove()},renderHandles:function(){for(var t=this.relatedView,e=t.model.vertices(),n=0,r=e.length;n<r;n++){var i=e[n],o=new this.options.handleClass({index:n,paper:this.paper,scale:this.options.scale,guard:a=>this.guard(a)});o.render(),o.position(i.x,i.y),this.simulateRelatedView(o.el),o.vel.appendTo(this.el),this.handles.push(o),this.startHandleListening(o)}},updateHandles:function(){for(var t=this.relatedView,e=t.model.vertices(),n=0,r=e.length;n<r;n++){var i=e[n],o=this.handles[n];if(!o)return;o.position(i.x,i.y)}},updatePath:function(){var t=this.childNodes.connection;t&&t.setAttribute("d",this.relatedView.getSerializedConnection())},startHandleListening:function(t){var e=this.relatedView;e.can("vertexMove")&&(this.listenTo(t,"will-change",this.onHandleWillChange),this.listenTo(t,"changing",this.onHandleChanging),this.listenTo(t,"changed",this.onHandleChanged)),e.can("vertexRemove")&&this.listenTo(t,"remove",this.onHandleRemove)},getNeighborPoints:function(t){var e=this.relatedView,n=e.model.vertices(),r=t>0?n[t-1]:e.sourceAnchor,i=t<n.length-1?n[t+1]:e.targetAnchor;return{prev:new we(r),next:new we(i)}},onHandleWillChange:function(t,e){this.focus();const{relatedView:n,options:r}=this;n.model.startBatch("vertex-move",{ui:!0,tool:this.cid}),r.stopPropagation||n.notifyPointerdown(...n.paper.getPointerArgs(e))},onHandleChanging:function(t,e){const{options:n,relatedView:r}=this;var i=t.options.index,[o,a,s]=r.paper.getPointerArgs(e),l={x:a,y:s};this.snapVertex(l,i),r.model.vertex(i,l,{ui:!0,tool:this.cid}),t.position(l.x,l.y),n.stopPropagation||r.notifyPointermove(o,a,s)},onHandleChanged:function(t,e){const{options:n,relatedView:r}=this;if(n.vertexAdding&&this.updatePath(),!!n.redundancyRemoval){var i=r.removeRedundantLinearVertices({ui:!0,tool:this.cid});i&&this.render(),this.blur(),r.model.stopBatch("vertex-move",{ui:!0,tool:this.cid}),this.eventData(e).vertexAdded&&r.model.stopBatch("vertex-add",{ui:!0,tool:this.cid});var[o,a,s]=r.paper.getPointerArgs(e);n.stopPropagation||r.notifyPointerup(o,a,s),r.checkMouseleave(o)}},snapVertex:function(t,e){var n=this.options.snapRadius;if(n>0){var r=this.getNeighborPoints(e),i=r.prev,o=r.next;Math.abs(t.x-i.x)<n?t.x=i.x:Math.abs(t.x-o.x)<n&&(t.x=o.x),Math.abs(t.y-i.y)<n?t.y=r.prev.y:Math.abs(t.y-o.y)<n&&(t.y=o.y)}},onHandleRemove:function(t,e){var n=t.options.index,r=this.relatedView;r.model.removeVertex(n,{ui:!0}),this.options.vertexAdding&&this.updatePath(),r.checkMouseleave(yi(e))},onPathPointerDown:function(t){if(!this.guard(t)){t.stopPropagation(),t.preventDefault();var e=yi(t),n=this.paper.snapToGrid(e.clientX,e.clientY).toJSON(),r=this.relatedView;r.model.startBatch("vertex-add",{ui:!0,tool:this.cid});var i=r.getVertexIndex(n.x,n.y);this.snapVertex(n,i),r.model.insertVertex(i,n,{ui:!0,tool:this.cid}),this.update();var o=this.handles[i];this.eventData(e,{vertexAdded:!0}),o.onPointerDown(e)}},onRemove:function(){this.resetHandles()}},{VertexHandle:oH});function uze(t,e){const{model:n}=t;return e?n.getBBox():n.isLink()?t.getConnection().bbox():t.getNodeUnrotatedBBox(t.el)}const W0=H5.extend({name:"button",events:{mousedown:"onPointerDown",touchstart:"onPointerDown"},options:{distance:0,offset:0,scale:null,rotate:!1},onRender:function(){this.renderChildren(this.options.markup),this.update()},update:function(){return this.position(),this},position:function(){const{vel:t}=this;t.transform(this.getCellMatrix(),{absolute:!0})},getCellMatrix(){return this.relatedView.model.isLink()?this.getLinkMatrix():this.getElementMatrix()},getElementMatrix(){const{relatedView:t,options:e}=this;let{x:n=0,y:r=0,offset:i={},useModelGeometry:o,rotate:a,scale:s}=e,l=uze(t,o);const u=t.model.angle();a||(l=l.bbox(u));const{x:c=0,y:f=0}=i;Eo(n)?n=parseFloat(n)/100*l.width:wl(n)&&(n=Number(xl(n,l))),Eo(r)?r=parseFloat(r)/100*l.height:wl(r)&&(r=Number(xl(r,l)));let h=Ue.createSVGMatrix().translate(l.x+l.width/2,l.y+l.height/2);return a&&(h=h.rotate(u)),h=h.translate(n+c-l.width/2,r+f-l.height/2),s&&(h=h.scale(s)),h},getLinkMatrix(){const{relatedView:t,options:e}=this,{offset:n=0,distance:r=0,rotate:i,scale:o}=e;let a,s,l;Eo(r)?a=t.getTangentAtRatio(parseFloat(r)/100):a=t.getTangentAtLength(r),a?(s=a.start,l=a.vector().vectorAngle(new we(1,0))||0):(s=t.getConnection().start,l=0);let u=Ue.createSVGMatrix().translate(s.x,s.y).rotate(l).translate(0,n);return i||(u=u.rotate(-l)),o&&(u=u.scale(o)),u},onPointerDown:function(t){if(!this.guard(t)){t.stopPropagation(),t.preventDefault();var e=this.options.action;typeof e=="function"&&e.call(this.relatedView,t,this.relatedView,this)}}});W0.extend({children:[{tagName:"circle",selector:"button",attributes:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],options:{distance:60,offset:0,action:function(t,e,n){e.model.remove({ui:!0,tool:n.cid})}}});const cze=W0.extend({name:"connect",documentEvents:{mousemove:"drag",touchmove:"drag",mouseup:"dragend",touchend:"dragend",touchcancel:"dragend"},children:[{tagName:"circle",selector:"button",attributes:{r:7,fill:"#333333",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"M -4 -1 L 0 -1 L 0 -4 L 4 0 L 0 4 0 1 -4 1 z",fill:"#FFFFFF",stroke:"none","stroke-width":2,"pointer-events":"none"}}],options:{distance:80,offset:0,magnet:t=>t.el,action:(t,e,n)=>n.dragstart(t)},getMagnetNode:function(){const{options:t,relatedView:e}=this,{magnet:n}=t;let r;switch(typeof n){case"function":{r=n.call(this,e,this);break}case"string":{[r]=e.findBySelector(n);break}default:{r=n;break}}if(r||(r=e.el),r instanceof SVGElement)return r;throw new Error("Connect: magnet must be an SVGElement")},dragstart:function(t){const{paper:e,relatedView:n}=this,r=yi(t),{x:i,y:o}=e.clientToLocalPoint(r.clientX,r.clientY);n.dragLinkStart(r,this.getMagnetNode(),i,o),e.undelegateEvents(),this.delegateDocumentEvents(null,r.data),this.focus()},drag:function(t){const{paper:e,relatedView:n}=this,r=yi(t),{x:i,y:o}=e.snapToGrid(r.clientX,r.clientY);n.dragLink(r,i,o)},dragend:function(t){const{paper:e,relatedView:n}=this,r=yi(t),{x:i,y:o}=e.snapToGrid(r.clientX,r.clientY);n.dragLinkEnd(r,i,o),this.undelegateDocumentEvents(),e.delegateEvents(),this.blur(),n.checkMouseleave(r)}});class aH extends Yse{constructor(e,n,r,i){super({source:{id:e,selector:".root"},target:{id:n,selector:".root"},attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}}),this.set("id",r),this.prop("jsonnetsType",i),this.connector("straight",{cornerType:"cubic"})}addInteractionTools(e){const n=new W0({markup:[{tagName:"circle",selector:"button",attributes:{r:8,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],distance:30,action:()=>{Zn().disconnect(String(this.id))}}),r=new v0({tools:[n]});let i=this.findView(e);i.addTools(r),i.hideTools()}addVerticesTools(e){var n=new lze;const r=new v0({tools:[n]});let i=this.findView(e);i.addTools(r),i.hideTools()}}class Jse extends W0{constructor(e,n){super({markup:[{tagName:"circle",selector:"button",attributes:{r:8,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],useModelGeometry:!0,x:e,y:"100%",offset:{x:0,y:0},rotate:!0,action:function(){const r=Zn();n.get("jsonnetsType")==="place"?r.deletePlace(String(n.id)):n.get("jsonnetsType")==="transition"&&r.deleteTransition(String(n.id))}})}}class Zse extends W0{constructor(e,n){super({markup:[{tagName:"circle",selector:"button",attributes:{r:8,fill:"green",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"M -2 4 2 4 M 0 3 0 0 M -2 -1 1 -1 M -1 -4 1 -4",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],useModelGeometry:!0,x:e,y:"100%",offset:{x:0,y:0},rotate:!0,action:()=>{Aa().setModal(n.get("jsonnetsType"),n.id)}})}}class Qse extends cze{constructor(){super({x:"100%",y:"50%",useModelGeometry:!0,markup:[{tagName:"circle",selector:"button",attributes:{r:8,fill:"#7a7e9b",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"M -4 -1 L 0 -1 L 0 -4 L 4 0 L 0 4 0 1 -4 1 z",fill:"#FFFFFF",stroke:"none","stroke-width":2,"pointer-events":"none"}}]})}}class sH extends Kse{constructor(e,n,r,i,o){super({position:{x:e-25,y:n-25},attrs:{".label":{text:r,fill:"#7a7e9b"},".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2}},tokens:o}),this.set("id",i),this.prop("jsonnetsType","place")}addInteractionTools(e){const n="25%",r="75%",i=new Jse(n,this),o=new Zse(r,this),a=new v0({tools:[i,o]}),s=this.findView(e);s.addTools(a),s.hideTools()}addConnectTools(e){const n=new Qse,r=new v0({tools:[n]}),i=this.findView(e);i.addTools(r),i.hideTools()}}class lH extends Xse{constructor(e,n,r,i){super({position:{x:e-25,y:n-25},attrs:{".label":{text:r,fill:"#7a7e9b"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"}}}),this.set("id",i),this.prop("jsonnetsType","transition"),this.resize(100,50)}addInteractionTools(e){const n="0%",r="100%",i=new Jse(n,this),o=new Zse(r,this),a=new W0({markup:[{tagName:"circle",selector:"button",attributes:{r:8,fill:"blue",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"M75,5 l-60,0 0,90 M15,45 l50,0",transform:"translate(-3,-3) scale(0.09)",fill:"none",stroke:"white","stroke-width":20,cursor:"pointer"}}],useModelGeometry:!0,x:"50%",y:"100%",offset:{x:0,y:0},rotate:!0,action:()=>{Zn().fireUnderAnyAssignment(String(this.id))}}),s=new v0({tools:[i,o,a]}),l=this.findView(e);l.addTools(s),l.hideTools()}addConnectTools(e){const n=new Qse,r=new v0({tools:[n]}),i=this.findView(e);i.addTools(r),i.hideTools()}}var fze="\0",vp="\0",uH="",Ha,Qp,As,N_,Hv,Gv,fl,qu,bh,Yu,_h,tf,nf,qv,Yv,rf,tu,F_,xD,tK;let hze=(tK=class{constructor(e){ni(this,F_);ni(this,Ha,!0);ni(this,Qp,!1);ni(this,As,!1);ni(this,N_,void 0);ni(this,Hv,()=>{});ni(this,Gv,()=>{});ni(this,fl,{});ni(this,qu,{});ni(this,bh,{});ni(this,Yu,{});ni(this,_h,{});ni(this,tf,{});ni(this,nf,{});ni(this,qv,0);ni(this,Yv,0);ni(this,rf,void 0);ni(this,tu,void 0);e&&(il(this,Ha,e.hasOwnProperty("directed")?e.directed:!0),il(this,Qp,e.hasOwnProperty("multigraph")?e.multigraph:!1),il(this,As,e.hasOwnProperty("compound")?e.compound:!1)),rt(this,As)&&(il(this,rf,{}),il(this,tu,{}),rt(this,tu)[vp]={})}isDirected(){return rt(this,Ha)}isMultigraph(){return rt(this,Qp)}isCompound(){return rt(this,As)}setGraph(e){return il(this,N_,e),this}graph(){return rt(this,N_)}setDefaultNodeLabel(e){return il(this,Hv,e),typeof e!="function"&&il(this,Hv,()=>e),this}nodeCount(){return rt(this,qv)}nodes(){return Object.keys(rt(this,fl))}sources(){var e=this;return this.nodes().filter(n=>Object.keys(rt(e,qu)[n]).length===0)}sinks(){var e=this;return this.nodes().filter(n=>Object.keys(rt(e,Yu)[n]).length===0)}setNodes(e,n){var r=arguments,i=this;return e.forEach(function(o){r.length>1?i.setNode(o,n):i.setNode(o)}),this}setNode(e,n){return rt(this,fl).hasOwnProperty(e)?(arguments.length>1&&(rt(this,fl)[e]=n),this):(rt(this,fl)[e]=arguments.length>1?n:rt(this,Hv).call(this,e),rt(this,As)&&(rt(this,rf)[e]=vp,rt(this,tu)[e]={},rt(this,tu)[vp][e]=!0),rt(this,qu)[e]={},rt(this,bh)[e]={},rt(this,Yu)[e]={},rt(this,_h)[e]={},++Oy(this,qv)._,this)}node(e){return rt(this,fl)[e]}hasNode(e){return rt(this,fl).hasOwnProperty(e)}removeNode(e){var n=this;if(rt(this,fl).hasOwnProperty(e)){var r=i=>n.removeEdge(rt(n,tf)[i]);delete rt(this,fl)[e],rt(this,As)&&(Mu(this,F_,xD).call(this,e),delete rt(this,rf)[e],this.children(e).forEach(function(i){n.setParent(i)}),delete rt(this,tu)[e]),Object.keys(rt(this,qu)[e]).forEach(r),delete rt(this,qu)[e],delete rt(this,bh)[e],Object.keys(rt(this,Yu)[e]).forEach(r),delete rt(this,Yu)[e],delete rt(this,_h)[e],--Oy(this,qv)._}return this}setParent(e,n){if(!rt(this,As))throw new Error("Cannot set parent in a non-compound graph");if(n===void 0)n=vp;else{n+="";for(var r=n;r!==void 0;r=this.parent(r))if(r===e)throw new Error("Setting "+n+" as parent of "+e+" would create a cycle");this.setNode(n)}return this.setNode(e),Mu(this,F_,xD).call(this,e),rt(this,rf)[e]=n,rt(this,tu)[n][e]=!0,this}parent(e){if(rt(this,As)){var n=rt(this,rf)[e];if(n!==vp)return n}}children(e=vp){if(rt(this,As)){var n=rt(this,tu)[e];if(n)return Object.keys(n)}else{if(e===vp)return this.nodes();if(this.hasNode(e))return[]}}predecessors(e){var n=rt(this,bh)[e];if(n)return Object.keys(n)}successors(e){var n=rt(this,_h)[e];if(n)return Object.keys(n)}neighbors(e){var n=this.predecessors(e);if(n){const i=new Set(n);for(var r of this.successors(e))i.add(r);return Array.from(i.values())}}isLeaf(e){var n;return this.isDirected()?n=this.successors(e):n=this.neighbors(e),n.length===0}filterNodes(e){var n=new this.constructor({directed:rt(this,Ha),multigraph:rt(this,Qp),compound:rt(this,As)});n.setGraph(this.graph());var r=this;Object.entries(rt(this,fl)).forEach(function([a,s]){e(a)&&n.setNode(a,s)}),Object.values(rt(this,tf)).forEach(function(a){n.hasNode(a.v)&&n.hasNode(a.w)&&n.setEdge(a,r.edge(a))});var i={};function o(a){var s=r.parent(a);return s===void 0||n.hasNode(s)?(i[a]=s,s):s in i?i[s]:o(s)}return rt(this,As)&&n.nodes().forEach(a=>n.setParent(a,o(a))),n}setDefaultEdgeLabel(e){return il(this,Gv,e),typeof e!="function"&&il(this,Gv,()=>e),this}edgeCount(){return rt(this,Yv)}edges(){return Object.values(rt(this,tf))}setPath(e,n){var r=this,i=arguments;return e.reduce(function(o,a){return i.length>1?r.setEdge(o,a,n):r.setEdge(o,a),a}),this}setEdge(){var e,n,r,i,o=!1,a=arguments[0];typeof a=="object"&&a!==null&&"v"in a?(e=a.v,n=a.w,r=a.name,arguments.length===2&&(i=arguments[1],o=!0)):(e=a,n=arguments[1],r=arguments[3],arguments.length>2&&(i=arguments[2],o=!0)),e=""+e,n=""+n,r!==void 0&&(r=""+r);var s=Mb(rt(this,Ha),e,n,r);if(rt(this,nf).hasOwnProperty(s))return o&&(rt(this,nf)[s]=i),this;if(r!==void 0&&!rt(this,Qp))throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(n),rt(this,nf)[s]=o?i:rt(this,Gv).call(this,e,n,r);var l=dze(rt(this,Ha),e,n,r);return e=l.v,n=l.w,Object.freeze(l),rt(this,tf)[s]=l,cH(rt(this,bh)[n],e),cH(rt(this,_h)[e],n),rt(this,qu)[n][s]=l,rt(this,Yu)[e][s]=l,Oy(this,Yv)._++,this}edge(e,n,r){var i=arguments.length===1?LI(rt(this,Ha),arguments[0]):Mb(rt(this,Ha),e,n,r);return rt(this,nf)[i]}edgeAsObj(){const e=this.edge(...arguments);return typeof e!="object"?{label:e}:e}hasEdge(e,n,r){var i=arguments.length===1?LI(rt(this,Ha),arguments[0]):Mb(rt(this,Ha),e,n,r);return rt(this,nf).hasOwnProperty(i)}removeEdge(e,n,r){var i=arguments.length===1?LI(rt(this,Ha),arguments[0]):Mb(rt(this,Ha),e,n,r),o=rt(this,tf)[i];return o&&(e=o.v,n=o.w,delete rt(this,nf)[i],delete rt(this,tf)[i],fH(rt(this,bh)[n],e),fH(rt(this,_h)[e],n),delete rt(this,qu)[n][i],delete rt(this,Yu)[e][i],Oy(this,Yv)._--),this}inEdges(e,n){var r=rt(this,qu)[e];if(r){var i=Object.values(r);return n?i.filter(o=>o.v===n):i}}outEdges(e,n){var r=rt(this,Yu)[e];if(r){var i=Object.values(r);return n?i.filter(o=>o.w===n):i}}nodeEdges(e,n){var r=this.inEdges(e,n);if(r)return r.concat(this.outEdges(e,n))}},Ha=new WeakMap,Qp=new WeakMap,As=new WeakMap,N_=new WeakMap,Hv=new WeakMap,Gv=new WeakMap,fl=new WeakMap,qu=new WeakMap,bh=new WeakMap,Yu=new WeakMap,_h=new WeakMap,tf=new WeakMap,nf=new WeakMap,qv=new WeakMap,Yv=new WeakMap,rf=new WeakMap,tu=new WeakMap,F_=new WeakSet,xD=function(e){delete rt(this,tu)[rt(this,rf)[e]][e]},tK);function cH(t,e){t[e]?t[e]++:t[e]=1}function fH(t,e){--t[e]||delete t[e]}function Mb(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var a=i;i=o,o=a}return i+uH+o+uH+(r===void 0?fze:r)}function dze(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var a=i;i=o,o=a}var s={v:i,w:o};return r&&(s.name=r),s}function LI(t,e){return Mb(t,e.v,e.w,e.name)}var G5=hze,pze="2.1.13",gze={Graph:G5,version:pze},mze=G5,vze={write:yze,read:Sze};function yze(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:bze(t),edges:_ze(t)};return t.graph()!==void 0&&(e.value=structuredClone(t.graph())),e}function bze(t){return t.nodes().map(function(e){var n=t.node(e),r=t.parent(e),i={v:e};return n!==void 0&&(i.value=n),r!==void 0&&(i.parent=r),i})}function _ze(t){return t.edges().map(function(e){var n=t.edge(e),r={v:e.v,w:e.w};return e.name!==void 0&&(r.name=e.name),n!==void 0&&(r.value=n),r})}function Sze(t){var e=new mze(t.options).setGraph(t.value);return t.nodes.forEach(function(n){e.setNode(n.v,n.value),n.parent&&e.setParent(n.v,n.parent)}),t.edges.forEach(function(n){e.setEdge({v:n.v,w:n.w,name:n.name},n.value)}),e}var wze=xze;function xze(t){var e={},n=[],r;function i(o){e.hasOwnProperty(o)||(e[o]=!0,r.push(o),t.successors(o).forEach(i),t.predecessors(o).forEach(i))}return t.nodes().forEach(function(o){r=[],i(o),r.length&&n.push(r)}),n}var jo,of,R_,CD,V_,kD,Kv,O2,nK;let Cze=(nK=class{constructor(){ni(this,R_);ni(this,V_);ni(this,Kv);ni(this,jo,[]);ni(this,of,{})}size(){return rt(this,jo).length}keys(){return rt(this,jo).map(function(e){return e.key})}has(e){return rt(this,of).hasOwnProperty(e)}priority(e){var n=rt(this,of)[e];if(n!==void 0)return rt(this,jo)[n].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return rt(this,jo)[0].key}add(e,n){var r=rt(this,of);if(e=String(e),!r.hasOwnProperty(e)){var i=rt(this,jo),o=i.length;return r[e]=o,i.push({key:e,priority:n}),Mu(this,V_,kD).call(this,o),!0}return!1}removeMin(){Mu(this,Kv,O2).call(this,0,rt(this,jo).length-1);var e=rt(this,jo).pop();return delete rt(this,of)[e.key],Mu(this,R_,CD).call(this,0),e.key}decrease(e,n){var r=rt(this,of)[e];if(n>rt(this,jo)[r].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+rt(this,jo)[r].priority+" New: "+n);rt(this,jo)[r].priority=n,Mu(this,V_,kD).call(this,r)}},jo=new WeakMap,of=new WeakMap,R_=new WeakSet,CD=function(e){var n=rt(this,jo),r=2*e,i=r+1,o=e;r<n.length&&(o=n[r].priority<n[o].priority?r:o,i<n.length&&(o=n[i].priority<n[o].priority?i:o),o!==e&&(Mu(this,Kv,O2).call(this,e,o),Mu(this,R_,CD).call(this,o)))},V_=new WeakSet,kD=function(e){for(var n=rt(this,jo),r=n[e].priority,i;e!==0&&(i=e>>1,!(n[i].priority<r));)Mu(this,Kv,O2).call(this,e,i),e=i},Kv=new WeakSet,O2=function(e,n){var r=rt(this,jo),i=rt(this,of),o=r[e],a=r[n];r[e]=a,r[n]=o,i[a.key]=e,i[o.key]=n},nK);var ele=Cze,kze=ele,tle=Aze,Tze=()=>1;function Aze(t,e,n,r){return Eze(t,String(e),n||Tze,r||function(i){return t.outEdges(i)})}function Eze(t,e,n,r){var i={},o=new kze,a,s,l=function(u){var c=u.v!==a?u.v:u.w,f=i[c],h=n(u),d=s.distance+h;if(h<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+u+" Weight: "+h);d<f.distance&&(f.distance=d,f.predecessor=a,o.decrease(c,d))};for(t.nodes().forEach(function(u){var c=u===e?0:Number.POSITIVE_INFINITY;i[u]={distance:c},o.add(u,c)});o.size()>0&&(a=o.removeMin(),s=i[a],s.distance!==Number.POSITIVE_INFINITY);)r(a).forEach(l);return i}var Pze=tle,Oze=Ize;function Ize(t,e,n){return t.nodes().reduce(function(r,i){return r[i]=Pze(t,i,e,n),r},{})}var nle=$ze;function $ze(t){var e=0,n=[],r={},i=[];function o(a){var s=r[a]={onStack:!0,lowlink:e,index:e++};if(n.push(a),t.successors(a).forEach(function(c){r.hasOwnProperty(c)?r[c].onStack&&(s.lowlink=Math.min(s.lowlink,r[c].index)):(o(c),s.lowlink=Math.min(s.lowlink,r[c].lowlink))}),s.lowlink===s.index){var l=[],u;do u=n.pop(),r[u].onStack=!1,l.push(u);while(a!==u);i.push(l)}}return t.nodes().forEach(function(a){r.hasOwnProperty(a)||o(a)}),i}var Lze=nle,Dze=Mze;function Mze(t){return Lze(t).filter(function(e){return e.length>1||e.length===1&&t.hasEdge(e[0],e[0])})}var Nze=Rze,Fze=()=>1;function Rze(t,e,n){return Vze(t,e||Fze,n||function(r){return t.outEdges(r)})}function Vze(t,e,n){var r={},i=t.nodes();return i.forEach(function(o){r[o]={},r[o][o]={distance:0},i.forEach(function(a){o!==a&&(r[o][a]={distance:Number.POSITIVE_INFINITY})}),n(o).forEach(function(a){var s=a.v===o?a.w:a.v,l=e(a);r[o][s]={distance:l,predecessor:o}})}),i.forEach(function(o){var a=r[o];i.forEach(function(s){var l=r[s];i.forEach(function(u){var c=l[o],f=a[u],h=l[u],d=c.distance+f.distance;d<h.distance&&(h.distance=d,h.predecessor=f.predecessor)})})}),r}function rle(t){var e={},n={},r=[];function i(o){if(n.hasOwnProperty(o))throw new TD;e.hasOwnProperty(o)||(n[o]=!0,e[o]=!0,t.predecessors(o).forEach(i),delete n[o],r.push(o))}if(t.sinks().forEach(i),Object.keys(e).length!==t.nodeCount())throw new TD;return r}class TD extends Error{constructor(){super(...arguments)}}var ile=rle;rle.CycleException=TD;var hH=ile,Bze=zze;function zze(t){try{hH(t)}catch(e){if(e instanceof hH.CycleException)return!1;throw e}return!0}var ole=jze;function jze(t,e,n){Array.isArray(e)||(e=[e]);var r=t.isDirected()?s=>t.successors(s):s=>t.neighbors(s),i=n==="post"?Uze:Wze,o=[],a={};return e.forEach(s=>{if(!t.hasNode(s))throw new Error("Graph does not have node: "+s);i(s,r,a,o)}),o}function Uze(t,e,n,r){for(var i=[[t,!1]];i.length>0;){var o=i.pop();o[1]?r.push(o[0]):n.hasOwnProperty(o[0])||(n[o[0]]=!0,i.push([o[0],!0]),ale(e(o[0]),a=>i.push([a,!1])))}}function Wze(t,e,n,r){for(var i=[t];i.length>0;){var o=i.pop();n.hasOwnProperty(o)||(n[o]=!0,r.push(o),ale(e(o),a=>i.push(a)))}}function ale(t,e){for(var n=t.length;n--;)e(t[n],n,t);return t}var Hze=ole,Gze=qze;function qze(t,e){return Hze(t,e,"post")}var Yze=ole,Kze=Xze;function Xze(t,e){return Yze(t,e,"pre")}var Jze=G5,Zze=ele,Qze=eje;function eje(t,e){var n=new Jze,r={},i=new Zze,o;function a(l){var u=l.v===o?l.w:l.v,c=i.priority(u);if(c!==void 0){var f=e(l);f<c&&(r[u]=o,i.decrease(u,f))}}if(t.nodeCount()===0)return n;t.nodes().forEach(function(l){i.add(l,Number.POSITIVE_INFINITY),n.setNode(l)}),i.decrease(t.nodes()[0],0);for(var s=!1;i.size()>0;){if(o=i.removeMin(),r.hasOwnProperty(o))n.setEdge(o,r[o]);else{if(s)throw new Error("Input graph is not connected: "+t);s=!0}t.nodeEdges(o).forEach(a)}return n}var tje={components:wze,dijkstra:tle,dijkstraAll:Oze,findCycles:Dze,floydWarshall:Nze,isAcyclic:Bze,postorder:Gze,preorder:Kze,prim:Qze,tarjan:nle,topsort:ile},dH=gze,Gs={Graph:dH.Graph,json:vze,alg:tje,version:dH.version};const nje=pr(Gs),rje=rK({__proto__:null,default:nje},[Gs]);var ije=PE;function PE(){var t={};t._next=t._prev=t,this._sentinel=t}PE.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return sle(e),e};PE.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&sle(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e};PE.prototype.toString=function(){for(var t=[],e=this._sentinel,n=e._prev;n!==e;)t.push(JSON.stringify(n,oje)),n=n._prev;return"["+t.join(", ")+"]"};function sle(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function oje(t,e){if(t!=="_next"&&t!=="_prev")return e}var aje=Gs.Graph,sje=ije,lje=cje,uje=()=>1;function cje(t,e){if(t.nodeCount()<=1)return[];var n=hje(t,e||uje),r=fje(n.graph,n.buckets,n.zeroIdx);return r.flatMap(i=>t.outEdges(i.v,i.w))}function fje(t,e,n){for(var r=[],i=e[e.length-1],o=e[0],a;t.nodeCount();){for(;a=o.dequeue();)DI(t,e,n,a);for(;a=i.dequeue();)DI(t,e,n,a);if(t.nodeCount()){for(var s=e.length-2;s>0;--s)if(a=e[s].dequeue(),a){r=r.concat(DI(t,e,n,a,!0));break}}}return r}function DI(t,e,n,r,i){var o=i?[]:void 0;return t.inEdges(r.v).forEach(function(a){var s=t.edge(a),l=t.node(a.v);i&&o.push({v:a.v,w:a.w}),l.out-=s,AD(e,n,l)}),t.outEdges(r.v).forEach(function(a){var s=t.edge(a),l=a.w,u=t.node(l);u.in-=s,AD(e,n,u)}),t.removeNode(r.v),o}function hje(t,e){var n=new aje,r=0,i=0;t.nodes().forEach(function(s){n.setNode(s,{v:s,in:0,out:0})}),t.edges().forEach(function(s){var l=n.edge(s.v,s.w)||0,u=e(s),c=l+u;n.setEdge(s.v,s.w,c),i=Math.max(i,n.node(s.v).out+=u),r=Math.max(r,n.node(s.w).in+=u)});var o=dje(i+r+3).map(()=>new sje),a=r+1;return n.nodes().forEach(function(s){AD(o,a,n.node(s))}),{graph:n,buckets:o,zeroIdx:a}}function AD(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}function dje(t){const e=[];for(let n=0;n<t;n++)e.push(n);return e}var lle=Gs.Graph,to={addBorderNode:wje,addDummyNode:ule,asNonCompoundGraph:gje,buildLayerMatrix:bje,intersectRect:yje,mapValues:Eje,maxRank:cle,normalizeRanks:_je,notime:kje,partition:xje,pick:Aje,predecessorWeights:vje,range:hle,removeEmptyRanks:Sje,simplify:pje,successorWeights:mje,time:Cje,uniqueId:fle,zipObject:q5};function ule(t,e,n,r){var i;do i=fle(r);while(t.hasNode(i));return n.dummy=e,t.setNode(i,n),i}function pje(t){var e=new lle().setGraph(t.graph());return t.nodes().forEach(n=>e.setNode(n,t.node(n))),t.edges().forEach(n=>{var r=e.edge(n.v,n.w)||{weight:0,minlen:1},i=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),e}function gje(t){var e=new lle({multigraph:t.isMultigraph()}).setGraph(t.graph());return t.nodes().forEach(n=>{t.children(n).length||e.setNode(n,t.node(n))}),t.edges().forEach(n=>{e.setEdge(n,t.edge(n))}),e}function mje(t){var e=t.nodes().map(n=>{var r={};return t.outEdges(n).forEach(i=>{r[i.w]=(r[i.w]||0)+t.edge(i).weight}),r});return q5(t.nodes(),e)}function vje(t){var e=t.nodes().map(n=>{var r={};return t.inEdges(n).forEach(i=>{r[i.v]=(r[i.v]||0)+t.edge(i).weight}),r});return q5(t.nodes(),e)}function yje(t,e){var n=t.x,r=t.y,i=e.x-n,o=e.y-r,a=t.width/2,s=t.height/2;if(!i&&!o)throw new Error("Not possible to find intersection inside of the rectangle");var l,u;return Math.abs(o)*a>Math.abs(i)*s?(o<0&&(s=-s),l=s*i/o,u=s):(i<0&&(a=-a),l=a,u=a*o/i),{x:n+l,y:r+u}}function bje(t){var e=hle(cle(t)+1).map(()=>[]);return t.nodes().forEach(n=>{var r=t.node(n),i=r.rank;i!==void 0&&(e[i][r.order]=n)}),e}function _je(t){var e=Math.min(...t.nodes().map(n=>{var r=t.node(n).rank;return r===void 0?Number.MAX_VALUE:r}));t.nodes().forEach(n=>{var r=t.node(n);r.hasOwnProperty("rank")&&(r.rank-=e)})}function Sje(t){var e=Math.min(...t.nodes().map(o=>t.node(o).rank)),n=[];t.nodes().forEach(o=>{var a=t.node(o).rank-e;n[a]||(n[a]=[]),n[a].push(o)});var r=0,i=t.graph().nodeRankFactor;Array.from(n).forEach((o,a)=>{o===void 0&&a%i!==0?--r:o!==void 0&&r&&o.forEach(s=>t.node(s).rank+=r)})}function wje(t,e,n,r){var i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),ule(t,"border",i,e)}function cle(t){return Math.max(...t.nodes().map(e=>{var n=t.node(e).rank;return n===void 0?Number.MIN_VALUE:n}))}function xje(t,e){var n={lhs:[],rhs:[]};return t.forEach(r=>{e(r)?n.lhs.push(r):n.rhs.push(r)}),n}function Cje(t,e){var n=Date.now();try{return e()}finally{console.log(t+" time: "+(Date.now()-n)+"ms")}}function kje(t,e){return e()}let Tje=0;function fle(t){var e=++Tje;return toString(t)+e}function hle(t,e,n=1){e==null&&(e=t,t=0);let r=o=>o<e;n<0&&(r=o=>e<o);const i=[];for(let o=t;r(o);o+=n)i.push(o);return i}function Aje(t,e){const n={};for(const r of e)t[r]!==void 0&&(n[r]=t[r]);return n}function Eje(t,e){let n=e;return typeof e=="string"&&(n=r=>r[e]),Object.entries(t).reduce((r,[i,o])=>(r[i]=n(o,i),r),{})}function q5(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}var Pje=lje,Oje=to.uniqueId,Ije={run:$je,undo:Dje};function $je(t){var e=t.graph().acyclicer==="greedy"?Pje(t,n(t)):Lje(t);e.forEach(function(r){var i=t.edge(r);t.removeEdge(r),i.forwardName=r.name,i.reversed=!0,t.setEdge(r.w,r.v,i,Oje("rev"))});function n(r){return function(i){return r.edge(i).weight}}}function Lje(t){var e=[],n={},r={};function i(o){r.hasOwnProperty(o)||(r[o]=!0,n[o]=!0,t.outEdges(o).forEach(function(a){n.hasOwnProperty(a.w)?e.push(a):i(a.w)}),delete n[o])}return t.nodes().forEach(i),e}function Dje(t){t.edges().forEach(function(e){var n=t.edge(e);if(n.reversed){t.removeEdge(e);var r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}})}var Mje=to,Nje={run:Fje,undo:Vje};function Fje(t){t.graph().dummyChains=[],t.edges().forEach(e=>Rje(t,e))}function Rje(t,e){var n=e.v,r=t.node(n).rank,i=e.w,o=t.node(i).rank,a=e.name,s=t.edge(e),l=s.labelRank;if(o!==r+1){t.removeEdge(e);var u,c,f;for(f=0,++r;r<o;++f,++r)s.points=[],c={width:0,height:0,edgeLabel:s,edgeObj:e,rank:r},u=Mje.addDummyNode(t,"edge",c,"_d"),r===l&&(c.width=s.width,c.height=s.height,c.dummy="edge-label",c.labelpos=s.labelpos),t.setEdge(n,u,{weight:s.weight},a),f===0&&t.graph().dummyChains.push(u),n=u;t.setEdge(n,i,{weight:s.weight},a)}}function Vje(t){t.graph().dummyChains.forEach(function(e){var n=t.node(e),r=n.edgeLabel,i;for(t.setEdge(n.edgeObj,r);n.dummy;)i=t.successors(e)[0],t.removeNode(e),r.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),e=i,n=t.node(e)})}var OE={longestPath:Bje,slack:zje};function Bje(t){var e={};function n(r){var i=t.node(r);if(e.hasOwnProperty(r))return i.rank;e[r]=!0;var o=Math.min(...t.outEdges(r).map(a=>a==null?Number.POSITIVE_INFINITY:n(a.w)-t.edge(a).minlen));return o===Number.POSITIVE_INFINITY&&(o=0),i.rank=o}t.sources().forEach(n)}function zje(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}var jje=Gs.Graph,kT=OE.slack,dle=Uje;function Uje(t){var e=new jje({directed:!1}),n=t.nodes()[0],r=t.nodeCount();e.setNode(n,{});for(var i,o;Wje(e,t)<r;)i=Hje(e,t),o=e.hasNode(i.v)?kT(t,i):-kT(t,i),Gje(e,t,o);return e}function Wje(t,e){function n(r){e.nodeEdges(r).forEach(function(i){var o=i.v,a=r===o?i.w:o;!t.hasNode(a)&&!kT(e,i)&&(t.setNode(a,{}),t.setEdge(r,a,{}),n(a))})}return t.nodes().forEach(n),t.nodeCount()}function Hje(t,e){return e.edges().reduce((r,i)=>{let o=Number.POSITIVE_INFINITY;return t.hasNode(i.v)!==t.hasNode(i.w)&&(o=kT(e,i)),o<r[0]?[o,i]:r},[Number.POSITIVE_INFINITY,null])[1]}function Gje(t,e,n){t.nodes().forEach(r=>e.node(r).rank+=n)}var qje=dle,pH=OE.slack,Yje=OE.longestPath,Kje=Gs.alg.preorder,Xje=Gs.alg.postorder,Jje=to.simplify,Zje=em;em.initLowLimValues=K5;em.initCutValues=Y5;em.calcCutValue=ple;em.leaveEdge=mle;em.enterEdge=vle;em.exchangeEdges=yle;function em(t){t=Jje(t),Yje(t);var e=qje(t);K5(e),Y5(e,t);for(var n,r;n=mle(e);)r=vle(e,t,n),yle(e,t,n,r)}function Y5(t,e){var n=Xje(t,t.nodes());n=n.slice(0,n.length-1),n.forEach(r=>Qje(t,e,r))}function Qje(t,e,n){var r=t.node(n),i=r.parent;t.edge(n,i).cutvalue=ple(t,e,n)}function ple(t,e,n){var r=t.node(n),i=r.parent,o=!0,a=e.edge(n,i),s=0;return a||(o=!1,a=e.edge(i,n)),s=a.weight,e.nodeEdges(n).forEach(function(l){var u=l.v===n,c=u?l.w:l.v;if(c!==i){var f=u===o,h=e.edge(l).weight;if(s+=f?h:-h,tUe(t,n,c)){var d=t.edge(n,c).cutvalue;s+=f?-d:d}}}),s}function K5(t,e){arguments.length<2&&(e=t.nodes()[0]),gle(t,{},1,e)}function gle(t,e,n,r,i){var o=n,a=t.node(r);return e[r]=!0,t.neighbors(r).forEach(function(s){e.hasOwnProperty(s)||(n=gle(t,e,n,s,r))}),a.low=o,a.lim=n++,i?a.parent=i:delete a.parent,n}function mle(t){return t.edges().find(e=>t.edge(e).cutvalue<0)}function vle(t,e,n){var r=n.v,i=n.w;e.hasEdge(r,i)||(r=n.w,i=n.v);var o=t.node(r),a=t.node(i),s=o,l=!1;o.lim>a.lim&&(s=a,l=!0);var u=e.edges().filter(function(c){return l===gH(t,t.node(c.v),s)&&l!==gH(t,t.node(c.w),s)});return u.reduce((c,f)=>pH(e,f)<pH(e,c)?f:c)}function yle(t,e,n,r){var i=n.v,o=n.w;t.removeEdge(i,o),t.setEdge(r.v,r.w,{}),K5(t),Y5(t,e),eUe(t,e)}function eUe(t,e){var n=t.nodes().find(i=>!e.node(i).parent),r=Kje(t,n);r=r.slice(1),r.forEach(function(i){var o=t.node(i).parent,a=e.edge(i,o),s=!1;a||(a=e.edge(o,i),s=!0),e.node(i).rank=e.node(o).rank+(s?a.minlen:-a.minlen)})}function tUe(t,e,n){return t.hasEdge(e,n)}function gH(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}var nUe=OE,ble=nUe.longestPath,rUe=dle,iUe=Zje,oUe=aUe;function aUe(t){switch(t.graph().ranker){case"network-simplex":mH(t);break;case"tight-tree":lUe(t);break;case"longest-path":sUe(t);break;default:mH(t)}}var sUe=ble;function lUe(t){ble(t),rUe(t)}function mH(t){iUe(t)}var uUe=cUe;function cUe(t){var e=hUe(t);t.graph().dummyChains.forEach(function(n){for(var r=t.node(n),i=r.edgeObj,o=fUe(t,e,i.v,i.w),a=o.path,s=o.lca,l=0,u=a[l],c=!0;n!==i.w;){if(r=t.node(n),c){for(;(u=a[l])!==s&&t.node(u).maxRank<r.rank;)l++;u===s&&(c=!1)}if(!c){for(;l<a.length-1&&t.node(u=a[l+1]).minRank<=r.rank;)l++;u=a[l]}t.setParent(n,u),n=t.successors(n)[0]}})}function fUe(t,e,n,r){var i=[],o=[],a=Math.min(e[n].low,e[r].low),s=Math.max(e[n].lim,e[r].lim),l,u;l=n;do l=t.parent(l),i.push(l);while(l&&(e[l].low>a||s>e[l].lim));for(u=l,l=r;(l=t.parent(l))!==u;)o.push(l);return{path:i.concat(o.reverse()),lca:u}}function hUe(t){var e={},n=0;function r(i){var o=n;t.children(i).forEach(r),e[i]={low:o,lim:n++}}return t.children().forEach(r),e}var ED=to,dUe={run:pUe,cleanup:vUe};function pUe(t){var e=ED.addDummyNode(t,"root",{},"_root"),n=gUe(t),r=Math.max(...Object.values(n))-1,i=2*r+1;t.graph().nestingRoot=e,t.edges().forEach(a=>t.edge(a).minlen*=i);var o=mUe(t)+1;t.children().forEach(function(a){_le(t,e,i,o,r,n,a)}),t.graph().nodeRankFactor=i}function _le(t,e,n,r,i,o,a){var s=t.children(a);if(!s.length){a!==e&&t.setEdge(e,a,{weight:0,minlen:n});return}var l=ED.addBorderNode(t,"_bt"),u=ED.addBorderNode(t,"_bb"),c=t.node(a);t.setParent(l,a),c.borderTop=l,t.setParent(u,a),c.borderBottom=u,s.forEach(function(f){_le(t,e,n,r,i,o,f);var h=t.node(f),d=h.borderTop?h.borderTop:f,g=h.borderBottom?h.borderBottom:f,y=h.borderTop?r:2*r,_=d!==g?1:i-o[a]+1;t.setEdge(l,d,{weight:y,minlen:_,nestingEdge:!0}),t.setEdge(g,u,{weight:y,minlen:_,nestingEdge:!0})}),t.parent(a)||t.setEdge(e,l,{weight:0,minlen:i+o[a]})}function gUe(t){var e={};function n(r,i){var o=t.children(r);o&&o.length&&o.forEach(a=>n(a,i+1)),e[r]=i}return t.children().forEach(r=>n(r,1)),e}function mUe(t){return t.edges().reduce((e,n)=>e+t.edge(n).weight,0)}function vUe(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,t.edges().forEach(n=>{var r=t.edge(n);r.nestingEdge&&t.removeEdge(n)})}var yUe=to,bUe=_Ue;function _Ue(t){function e(n){var r=t.children(n),i=t.node(n);if(r.length&&r.forEach(e),i.hasOwnProperty("minRank")){i.borderLeft=[],i.borderRight=[];for(var o=i.minRank,a=i.maxRank+1;o<a;++o)vH(t,"borderLeft","_bl",n,i,o),vH(t,"borderRight","_br",n,i,o)}}t.children().forEach(e)}function vH(t,e,n,r,i,o){var a={width:0,height:0,rank:o,borderType:e},s=i[e][o-1],l=yUe.addDummyNode(t,"border",a,n);i[e][o]=l,t.setParent(l,r),s&&t.setEdge(s,l,{weight:1})}var SUe={adjust:wUe,undo:xUe};function wUe(t){var e=t.graph().rankdir.toLowerCase();(e==="lr"||e==="rl")&&Sle(t)}function xUe(t){var e=t.graph().rankdir.toLowerCase();(e==="bt"||e==="rl")&&CUe(t),(e==="lr"||e==="rl")&&(kUe(t),Sle(t))}function Sle(t){t.nodes().forEach(e=>yH(t.node(e))),t.edges().forEach(e=>yH(t.edge(e)))}function yH(t){var e=t.width;t.width=t.height,t.height=e}function CUe(t){t.nodes().forEach(e=>MI(t.node(e))),t.edges().forEach(function(e){var n=t.edge(e);n.points.forEach(MI),n.hasOwnProperty("y")&&MI(n)})}function MI(t){t.y=-t.y}function kUe(t){t.nodes().forEach(e=>NI(t.node(e))),t.edges().forEach(function(e){var n=t.edge(e);n.points.forEach(NI),n.hasOwnProperty("x")&&NI(n)})}function NI(t){var e=t.x;t.x=t.y,t.y=e}var TUe=to,AUe=EUe;function EUe(t){var e={},n=t.nodes().filter(s=>!t.children(s).length),r=Math.max(...n.map(s=>t.node(s).rank)),i=TUe.range(r+1).map(()=>[]);function o(s){if(!e[s]){e[s]=!0;var l=t.node(s);i[l.rank].push(s),t.successors(s).forEach(o)}}var a=n.sort((s,l)=>t.node(s).rank-t.node(l).rank);return a.forEach(o),i}var PUe=to.zipObject,OUe=IUe;function IUe(t,e){for(var n=0,r=1;r<e.length;++r)n+=$Ue(t,e[r-1],e[r]);return n}function $Ue(t,e,n){for(var r=PUe(n,n.map((u,c)=>c)),i=e.flatMap(u=>t.outEdges(u).map(c=>({pos:r[c.w],weight:t.edge(c).weight})).sort((c,f)=>c.pos-f.pos)),o=1;o<n.length;)o<<=1;var a=2*o-1;o-=1;var s=new Array(a).fill(0),l=0;return i.forEach(u=>{var c=u.pos+o;s[c]+=u.weight;for(var f=0;c>0;)c%2&&(f+=s[c+1]),c=c-1>>1,s[c]+=u.weight;l+=u.weight*f}),l}var LUe=DUe;function DUe(t,e=[]){return e.map(n=>{var r=t.inEdges(n);if(r.length){var i=r.reduce((o,a)=>{var s=t.edge(a),l=t.node(a.v);return{sum:o.sum+s.weight*l.order,weight:o.weight+s.weight}},{sum:0,weight:0});return{v:n,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:n}})}var MUe=to,NUe=FUe;function FUe(t,e){var n={};t.forEach((i,o)=>{var a=n[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:o};i.barycenter!==void 0&&(a.barycenter=i.barycenter,a.weight=i.weight)}),e.edges().forEach(i=>{var o=n[i.v],a=n[i.w];o!==void 0&&a!==void 0&&(a.indegree++,o.out.push(n[i.w]))});var r=Object.values(n).filter(i=>!i.indegree);return RUe(r)}function RUe(t){var e=[];function n(o){return function(a){a.merged||(a.barycenter===void 0||o.barycenter===void 0||a.barycenter>=o.barycenter)&&VUe(o,a)}}function r(o){return function(a){a.in.push(o),--a.indegree===0&&t.push(a)}}for(;t.length;){var i=t.pop();e.push(i),i.in.reverse().forEach(n(i)),i.out.forEach(r(i))}return e.filter(o=>!o.merged).map(o=>MUe.pick(o,["vs","i","barycenter","weight"]))}function VUe(t,e){var n=0,r=0;t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.vs=e.vs.concat(t.vs),t.barycenter=n/r,t.weight=r,t.i=Math.min(e.i,t.i),e.merged=!0}var BUe=to,zUe=jUe;function jUe(t,e){var n=BUe.partition(t,function(c){return c.hasOwnProperty("barycenter")}),r=n.lhs,i=n.rhs.sort((c,f)=>f.i-c.i),o=[],a=0,s=0,l=0;r.sort(UUe(!!e)),l=bH(o,i,l),r.forEach(function(c){l+=c.vs.length,o.push(c.vs),a+=c.barycenter*c.weight,s+=c.weight,l=bH(o,i,l)});var u={vs:o.flat(!0)};return s&&(u.barycenter=a/s,u.weight=s),u}function bH(t,e,n){for(var r;e.length&&(r=e[e.length-1]).i<=n;)e.pop(),t.push(r.vs),n++;return n}function UUe(t){return function(e,n){return e.barycenter<n.barycenter?-1:e.barycenter>n.barycenter?1:t?n.i-e.i:e.i-n.i}}var WUe=LUe,HUe=NUe,GUe=zUe,qUe=wle;function wle(t,e,n,r){var i=t.children(e),o=t.node(e),a=o?o.borderLeft:void 0,s=o?o.borderRight:void 0,l={};a&&(i=i.filter(g=>g!==a&&g!==s));var u=WUe(t,i);u.forEach(function(g){if(t.children(g.v).length){var y=wle(t,g.v,n,r);l[g.v]=y,y.hasOwnProperty("barycenter")&&KUe(g,y)}});var c=HUe(u,n);YUe(c,l);var f=GUe(c,r);if(a&&(f.vs=[a,f.vs,s].flat(!0),t.predecessors(a).length)){var h=t.node(t.predecessors(a)[0]),d=t.node(t.predecessors(s)[0]);f.hasOwnProperty("barycenter")||(f.barycenter=0,f.weight=0),f.barycenter=(f.barycenter*f.weight+h.order+d.order)/(f.weight+2),f.weight+=2}return f}function YUe(t,e){t.forEach(function(n){n.vs=n.vs.flatMap(function(r){return e[r]?e[r].vs:r})})}function KUe(t,e){t.barycenter!==void 0?(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight):(t.barycenter=e.barycenter,t.weight=e.weight)}var XUe=Gs.Graph,JUe=to,ZUe=QUe;function QUe(t,e,n){var r=eWe(t),i=new XUe({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(o){return t.node(o)});return t.nodes().forEach(function(o){var a=t.node(o),s=t.parent(o);(a.rank===e||a.minRank<=e&&e<=a.maxRank)&&(i.setNode(o),i.setParent(o,s||r),t[n](o).forEach(function(l){var u=l.v===o?l.w:l.v,c=i.edge(u,o),f=c!==void 0?c.weight:0;i.setEdge(u,o,{weight:t.edge(l).weight+f})}),a.hasOwnProperty("minRank")&&i.setNode(o,{borderLeft:a.borderLeft[e],borderRight:a.borderRight[e]}))}),i}function eWe(t){for(var e;t.hasNode(e=JUe.uniqueId("_root")););return e}var tWe=nWe;function nWe(t,e,n){var r={},i;n.forEach(function(o){for(var a=t.parent(o),s,l;a;){if(s=t.parent(a),s?(l=r[s],r[s]=a):(l=i,i=a),l&&l!==a){e.setEdge(l,a);return}a=s}})}var rWe=AUe,iWe=OUe,oWe=qUe,aWe=ZUe,sWe=tWe,lWe=Gs.Graph,OC=to,uWe=cWe;function cWe(t){var e=OC.maxRank(t),n=_H(t,OC.range(1,e+1),"inEdges"),r=_H(t,OC.range(e-1,-1,-1),"outEdges"),i=rWe(t);SH(t,i);for(var o=Number.POSITIVE_INFINITY,a,s=0,l=0;l<4;++s,++l){fWe(s%2?n:r,s%4>=2),i=OC.buildLayerMatrix(t);var u=iWe(t,i);u<o&&(l=0,a=Object.assign({},i),o=u)}SH(t,a)}function _H(t,e,n){return e.map(function(r){return aWe(t,r,n)})}function fWe(t,e){var n=new lWe;t.forEach(function(r){var i=r.graph().root,o=oWe(r,i,n,e);o.vs.forEach((a,s)=>r.node(a).order=s),sWe(r,n,o.vs)})}function SH(t,e){Object.values(e).forEach(n=>n.forEach((r,i)=>t.node(r).order=i))}var hWe=Gs.Graph,k_=to,dWe={positionX:mWe,findType1Conflicts:xle,findType2Conflicts:Cle,addConflict:X5,hasConflict:kle,verticalAlignment:Tle,horizontalCompaction:Ale,alignCoordinates:Ple,findSmallestWidthAlignment:Ele,balance:Ole};function xle(t,e){var n={};function r(i,o){var a=0,s=0,l=i.length,u=o[o.length-1];return o.forEach(function(c,f){var h=pWe(t,c),d=h?t.node(h).order:l;(h||c===u)&&(o.slice(s,f+1).forEach(function(g){t.predecessors(g).forEach(function(y){var _=t.node(y),v=_.order;(v<a||d<v)&&!(_.dummy&&t.node(g).dummy)&&X5(n,y,g)})}),s=f+1,a=d)}),o}return e.reduce(r),n}function Cle(t,e){var n={};function r(o,a,s,l,u){var c;k_.range(a,s).forEach(function(f){c=o[f],t.node(c).dummy&&t.predecessors(c).forEach(function(h){var d=t.node(h);d.dummy&&(d.order<l||d.order>u)&&X5(n,h,c)})})}function i(o,a){var s=-1,l,u=0;return a.forEach(function(c,f){if(t.node(c).dummy==="border"){var h=t.predecessors(c);h.length&&(l=t.node(h[0]).order,r(a,u,f,s,l),u=f,s=l)}r(a,u,a.length,l,o.length)}),a}return e.reduce(i),n}function pWe(t,e){if(t.node(e).dummy)return t.predecessors(e).find(n=>t.node(n).dummy)}function X5(t,e,n){if(e>n){var r=e;e=n,n=r}var i=t[e];i||(t[e]=i={}),i[n]=!0}function kle(t,e,n){if(e>n){var r=e;e=n,n=r}return!!t[e]&&t[e].hasOwnProperty(n)}function Tle(t,e,n,r){var i={},o={},a={};return e.forEach(function(s){s.forEach(function(l,u){i[l]=l,o[l]=l,a[l]=u})}),e.forEach(function(s){var l=-1;s.forEach(function(u){var c=r(u);if(c.length){c=c.sort((y,_)=>a[y]-a[_]);for(var f=(c.length-1)/2,h=Math.floor(f),d=Math.ceil(f);h<=d;++h){var g=c[h];o[u]===u&&l<a[g]&&!kle(n,u,g)&&(o[g]=u,o[u]=i[u]=i[g],l=a[g])}}})}),{root:i,align:o}}function Ale(t,e,n,r,i){var o={},a=gWe(t,e,n,i),s=i?"borderLeft":"borderRight";function l(f,h){for(var d=a.nodes(),g=d.pop(),y={};g;)y[g]?f(g):(y[g]=!0,d.push(g),d=d.concat(h(g))),g=d.pop()}function u(f){o[f]=a.inEdges(f).reduce(function(h,d){return Math.max(h,o[d.v]+a.edge(d))},0)}function c(f){var h=a.outEdges(f).reduce(function(g,y){return Math.min(g,o[y.w]-a.edge(y))},Number.POSITIVE_INFINITY),d=t.node(f);h!==Number.POSITIVE_INFINITY&&d.borderType!==s&&(o[f]=Math.max(o[f],h))}return l(u,a.predecessors.bind(a)),l(c,a.successors.bind(a)),Object.keys(r).forEach(f=>o[f]=o[n[f]]),o}function gWe(t,e,n,r){var i=new hWe,o=t.graph(),a=vWe(o.nodesep,o.edgesep,r);return e.forEach(function(s){var l;s.forEach(function(u){var c=n[u];if(i.setNode(c),l){var f=n[l],h=i.edge(f,c);i.setEdge(f,c,Math.max(a(t,u,l),h||0))}l=u})}),i}function Ele(t,e){return Object.values(e).reduce((n,r)=>{var i=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;Object.entries(r).forEach(([s,l])=>{var u=yWe(t,s)/2;i=Math.max(l+u,i),o=Math.min(l-u,o)});const a=i-o;return a<n[0]&&(n=[a,r]),n},[Number.POSITIVE_INFINITY,null])[1]}function Ple(t,e){var n=Object.values(e),r=Math.min(...n),i=Math.max(...n);["u","d"].forEach(function(o){["l","r"].forEach(function(a){var s=o+a,l=t[s];if(l===e)return;var u=Object.values(l);let c=r-Math.min(...u);a!=="l"&&(c=i-Math.max(...u)),c&&(t[s]=k_.mapValues(l,f=>f+c))})})}function Ole(t,e){return k_.mapValues(t.ul,function(n,r){if(e)return t[e.toLowerCase()][r];var i=Object.values(t).map(o=>o[r]).sort((o,a)=>o-a);return(i[1]+i[2])/2})}function mWe(t){var e=k_.buildLayerMatrix(t),n=Object.assign(xle(t,e),Cle(t,e)),r={},i;["u","d"].forEach(function(a){i=a==="u"?e:Object.values(e).reverse(),["l","r"].forEach(function(s){s==="r"&&(i=i.map(f=>Object.values(f).reverse()));var l=(a==="u"?t.predecessors:t.successors).bind(t),u=Tle(t,i,n,l),c=Ale(t,i,u.root,u.align,s==="r");s==="r"&&(c=k_.mapValues(c,f=>-f)),r[a+s]=c})});var o=Ele(t,r);return Ple(r,o),Ole(r,t.graph().align)}function vWe(t,e,n){return function(r,i,o){var a=r.node(i),s=r.node(o),l=0,u;if(l+=a.width/2,a.hasOwnProperty("labelpos"))switch(a.labelpos.toLowerCase()){case"l":u=-a.width/2;break;case"r":u=a.width/2;break}if(u&&(l+=n?u:-u),u=0,l+=(a.dummy?e:t)/2,l+=(s.dummy?e:t)/2,l+=s.width/2,s.hasOwnProperty("labelpos"))switch(s.labelpos.toLowerCase()){case"l":u=s.width/2;break;case"r":u=-s.width/2;break}return u&&(l+=n?u:-u),u=0,l}}function yWe(t,e){return t.node(e).width}var Ile=to,bWe=dWe.positionX,_We=SWe;function SWe(t){t=Ile.asNonCompoundGraph(t),wWe(t),Object.entries(bWe(t)).forEach(([e,n])=>t.node(e).x=n)}function wWe(t){var e=Ile.buildLayerMatrix(t),n=t.graph().ranksep,r=0;e.forEach(function(i){const o=i.reduce((a,s)=>{const l=t.node(s).height;return a>l?a:l},0);i.forEach(a=>t.node(a).y=r+o/2),r+=o+n})}var wH=Ije,xH=Nje,xWe=oUe,CWe=to.normalizeRanks,kWe=uUe,TWe=to.removeEmptyRanks,CH=dUe,AWe=bUe,kH=SUe,EWe=uWe,PWe=_We,Ll=to,OWe=Gs.Graph,IWe=$We;function $We(t,e){var n=e&&e.debugTiming?Ll.time:Ll.notime;n("layout",function(){var r=n("  buildLayoutGraph",function(){return jWe(t)});n("  runLayout",function(){LWe(r,n)}),n("  updateInputGraph",function(){DWe(t,r)})})}function LWe(t,e){e("    makeSpaceForEdgeLabels",function(){UWe(t)}),e("    removeSelfEdges",function(){ZWe(t)}),e("    acyclic",function(){wH.run(t)}),e("    nestingGraph.run",function(){CH.run(t)}),e("    rank",function(){xWe(Ll.asNonCompoundGraph(t))}),e("    injectEdgeLabelProxies",function(){WWe(t)}),e("    removeEmptyRanks",function(){TWe(t)}),e("    nestingGraph.cleanup",function(){CH.cleanup(t)}),e("    normalizeRanks",function(){CWe(t)}),e("    assignRankMinMax",function(){HWe(t)}),e("    removeEdgeLabelProxies",function(){GWe(t)}),e("    normalize.run",function(){xH.run(t)}),e("    parentDummyChains",function(){kWe(t)}),e("    addBorderSegments",function(){AWe(t)}),e("    order",function(){EWe(t)}),e("    insertSelfEdges",function(){QWe(t)}),e("    adjustCoordinateSystem",function(){kH.adjust(t)}),e("    position",function(){PWe(t)}),e("    positionSelfEdges",function(){eHe(t)}),e("    removeBorderNodes",function(){JWe(t)}),e("    normalize.undo",function(){xH.undo(t)}),e("    fixupEdgeLabelCoords",function(){KWe(t)}),e("    undoCoordinateSystem",function(){kH.undo(t)}),e("    translateGraph",function(){qWe(t)}),e("    assignNodeIntersects",function(){YWe(t)}),e("    reversePoints",function(){XWe(t)}),e("    acyclic.undo",function(){wH.undo(t)})}function DWe(t,e){t.nodes().forEach(n=>{var r=t.node(n),i=e.node(n);r&&(r.x=i.x,r.y=i.y,r.rank=i.rank,e.children(n).length&&(r.width=i.width,r.height=i.height))}),t.edges().forEach(n=>{var r=t.edge(n),i=e.edge(n);r.points=i.points,i.hasOwnProperty("x")&&(r.x=i.x,r.y=i.y)}),t.graph().width=e.graph().width,t.graph().height=e.graph().height}var MWe=["nodesep","edgesep","ranksep","marginx","marginy"],NWe={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},FWe=["acyclicer","ranker","rankdir","align"],RWe=["width","height"],TH={width:0,height:0},VWe=["minlen","weight","width","height","labeloffset"],BWe={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},zWe=["labelpos"];function jWe(t){var e=new OWe({multigraph:!0,compound:!0}),n=RI(t.graph());return e.setGraph(Object.assign({},NWe,FI(n,MWe),Ll.pick(n,FWe))),t.nodes().forEach(r=>{var i=RI(t.node(r));const o=FI(i,RWe);Object.keys(TH).forEach(a=>{o[a]===void 0&&(o[a]=TH[a])}),e.setNode(r,o),e.setParent(r,t.parent(r))}),t.edges().forEach(r=>{var i=RI(t.edge(r));e.setEdge(r,Object.assign({},BWe,FI(i,VWe),Ll.pick(i,zWe)))}),e}function UWe(t){var e=t.graph();e.ranksep/=2,t.edges().forEach(n=>{var r=t.edge(n);r.minlen*=2,r.labelpos.toLowerCase()!=="c"&&(e.rankdir==="TB"||e.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function WWe(t){t.edges().forEach(e=>{var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),i=t.node(e.w),o={rank:(i.rank-r.rank)/2+r.rank,e};Ll.addDummyNode(t,"edge-proxy",o,"_ep")}})}function HWe(t){var e=0;t.nodes().forEach(n=>{var r=t.node(n);r.borderTop&&(r.minRank=t.node(r.borderTop).rank,r.maxRank=t.node(r.borderBottom).rank,e=Math.max(e,r.maxRank))}),t.graph().maxRank=e}function GWe(t){t.nodes().forEach(e=>{var n=t.node(e);n.dummy==="edge-proxy"&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))})}function qWe(t){var e=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,i=0,o=t.graph(),a=o.marginx||0,s=o.marginy||0;function l(u){var c=u.x,f=u.y,h=u.width,d=u.height;e=Math.min(e,c-h/2),n=Math.max(n,c+h/2),r=Math.min(r,f-d/2),i=Math.max(i,f+d/2)}t.nodes().forEach(u=>l(t.node(u))),t.edges().forEach(u=>{var c=t.edge(u);c.hasOwnProperty("x")&&l(c)}),e-=a,r-=s,t.nodes().forEach(u=>{var c=t.node(u);c.x-=e,c.y-=r}),t.edges().forEach(u=>{var c=t.edge(u);c.points.forEach(f=>{f.x-=e,f.y-=r}),c.hasOwnProperty("x")&&(c.x-=e),c.hasOwnProperty("y")&&(c.y-=r)}),o.width=n-e+a,o.height=i-r+s}function YWe(t){t.edges().forEach(e=>{var n=t.edge(e),r=t.node(e.v),i=t.node(e.w),o,a;n.points?(o=n.points[0],a=n.points[n.points.length-1]):(n.points=[],o=i,a=r),n.points.unshift(Ll.intersectRect(r,o)),n.points.push(Ll.intersectRect(i,a))})}function KWe(t){t.edges().forEach(e=>{var n=t.edge(e);if(n.hasOwnProperty("x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function XWe(t){t.edges().forEach(e=>{var n=t.edge(e);n.reversed&&n.points.reverse()})}function JWe(t){t.nodes().forEach(e=>{if(t.children(e).length){var n=t.node(e),r=t.node(n.borderTop),i=t.node(n.borderBottom),o=t.node(n.borderLeft[n.borderLeft.length-1]),a=t.node(n.borderRight[n.borderRight.length-1]);n.width=Math.abs(a.x-o.x),n.height=Math.abs(i.y-r.y),n.x=o.x+n.width/2,n.y=r.y+n.height/2}}),t.nodes().forEach(e=>{t.node(e).dummy==="border"&&t.removeNode(e)})}function ZWe(t){t.edges().forEach(e=>{if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e,label:t.edge(e)}),t.removeEdge(e)}})}function QWe(t){var e=Ll.buildLayerMatrix(t);e.forEach(n=>{var r=0;n.forEach((i,o)=>{var a=t.node(i);a.order=o+r,(a.selfEdges||[]).forEach(s=>{Ll.addDummyNode(t,"selfedge",{width:s.label.width,height:s.label.height,rank:a.rank,order:o+ ++r,e:s.e,label:s.label},"_se")}),delete a.selfEdges})})}function eHe(t){t.nodes().forEach(e=>{var n=t.node(e);if(n.dummy==="selfedge"){var r=t.node(n.e.v),i=r.x+r.width/2,o=r.y,a=n.x-i,s=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:i+2*a/3,y:o-s},{x:i+5*a/6,y:o-s},{x:i+a,y:o},{x:i+5*a/6,y:o+s},{x:i+2*a/3,y:o+s}],n.label.x=n.x,n.label.y=n.y}})}function FI(t,e){return Ll.mapValues(Ll.pick(t,e),Number)}function RI(t){var e={};return t&&Object.entries(t).forEach(([n,r])=>{typeof n=="string"&&(n=n.toLowerCase()),e[n]=r}),e}var tHe=to,nHe=Gs.Graph,rHe={debugOrdering:iHe};function iHe(t){var e=tHe.buildLayerMatrix(t),n=new nHe({compound:!0,multigraph:!0}).setGraph({});return t.nodes().forEach(function(r){n.setNode(r,{label:r}),n.setParent(r,"layer"+t.node(r).rank)}),t.edges().forEach(function(r){n.setEdge(r.v,r.w,{},r.name)}),e.forEach(function(r,i){var o="layer"+i;n.setNode(o,{rank:"same"}),r.reduce(function(a,s){return n.setEdge(a,s,{style:"invis"}),s})}),n}var oHe="1.0.2",$le={graphlib:Gs,layout:IWe,debug:rHe,util:{time:to.time,notime:to.notime},version:oHe};const aHe=pr($le),sHe=rK({__proto__:null,default:aHe},[$le]);let Oi,Wr;const lHe=zt({data(){return{panX:0,panY:0,clickX:0,clickY:0,isPanning:!1}},computed:{isInteractive(){return this.uiStateStore.mode===Yc||this.uiStateStore.mode==B2||this.uiStateStore.mode==z2||this.uiStateStore.mode===Vb},isAddingElements(){return this.uiStateStore.mode===B2||this.uiStateStore.mode===z2},isPannableMode(){return this.uiStateStore.mode===Yc&&!this.isPanning},isPanningMode(){return this.uiStateStore.mode===Yc&&this.isPanning},...Yt(Aa),...Yt(qg),...Yt(Af),...Yt(Zn)},watch:{"uiStateStore.mode"(t){this.onModeChange(t)},"netStore.lastRemovedCells"(t){for(let e=0;e<t.length;e++)Wr.removeCells([Wr.getCell(t[e])])},"netStore.lastUpdatedPlace"(t){const e=Wr.getCell(t.id);e.set("tokens",t.marking.length),e.attr(".label/text",t.name)},"netStore.lastUpdatedTransition.name"(t){const e=Wr.getCell(this.netStore.lastUpdatedTransition.id);e&&e.attr(".label/text",t)},"netStore.lastFiredArcs"(t){for(let n=0;n<t.length;n++){const r=t[n],i=Wr.getCell(r.arcID);Wr.getCell(r.placeID).set("tokens",r.num);var e=Ue("circle",{r:5,fill:"#feb662"});let a=1;i.findView(Oi).sendToken(e,a*1e3)}},"netStore.importedData"(t){if(Wr.clear(),!t.layoutData)return;const e=t.netData,n=e.transitions;for(let a=0;a<n.length;a++){const s=n[a];new lH(this.clickX,this.clickY,s.name,s.id).addTo(Wr)}const r=e.places;for(let a=0;a<r.length;a++){const s=r[a],l=new sH(this.clickX,this.clickY,s.name,s.id,s.marking.length);l.addTo(Wr),l.set("tokens",s.marking.length)}const i=e.arcs;for(let a=0;a<i.length;a++){const s=i[a],l=new aH(s.from,s.to,s.id,s.type);l.addTo(Wr),l.addVerticesTools(Oi)}const o=t.layoutData;for(let a=0;a<o.cells.length;a++){const s=o.cells[a],l=Wr.getCell(s.id);s.type==="pn.Place"||s.type==="pn.Transition"?l.set("position",{x:s.position.x,y:s.position.y}):s.type==="standard.Link"&&l.vertices(s.vertices)}},"netStore.lastCreatedTransitions"(t){for(let e=0;e<t.length;e++){const n=t[e];new lH(this.clickX,this.clickY,n.name,n.id).addTo(Wr)}},"netStore.lastCreatedPlaces"(t){for(let e=0;e<t.length;e++){const n=t[e];new sH(this.clickX,this.clickY,n.name,n.id,n.marking.length).addTo(Wr)}},"netStore.lastUpdatedPlaces"(t){for(let e=0;e<t.length;e++){const n=t[e],r=Wr.getCell(n.id);r.set("tokens",n.marking.length),r.attr(".label/text",n.name)}},"netStore.lastCreatedArcs"(t){for(let e=0;e<t.length;e++){const n=t[e],r=new aH(n.from,n.to,n.id,n.type);r.addTo(Wr),r.addVerticesTools(Oi)}}},mounted(){const t=sze,e=ize;Wr=new ff,Oi=new RBe({el:document.getElementById("jointCanvas"),cellViewNamespace:{pn:t},model:Wr,width:window.innerWidth,height:window.innerHeight,gridSize:12,drawGrid:!0,background:{color:"#f6f6f6"},interactive:(r,i)=>this.isInteractive,linkPinning:!1,defaultLink:()=>new e.Link,defaultAnchor:{name:"modelCenter"},defaultConnectionPoint:{name:"boundary"},markAvailable:!0,validateConnection:(r,i,o,a,s,l)=>!(o.model.isLink()||r.model.isLink()||o.model.get("jsonnetsType")===r.model.get("jsonnetsType"))}),this.netStore.setLayout(Wr),Oi.on("blank:pointerclick",(r,i,o)=>{this.onPaperClick(i,o)}),Oi.on("element:mouseenter",r=>{(this.uiStateStore.mode===Vb||this.uiStateStore.mode===Yc)&&r.showTools()}),Oi.on("element:mouseleave",r=>{r.hideTools()}),Oi.on("link:mouseenter",r=>{(this.uiStateStore.mode===Vb||this.uiStateStore.mode===Yc)&&r.showTools()}),Oi.on("link:mouseleave",r=>{r.hideTools()}),Oi.on("blank:pointerdown",(r,i,o)=>{this.onDragStart(i,o)});const n=document.getElementById("jointCanvas");n&&(n.onmousemove=r=>{this.onMouseMove(r)}),Oi.on("cell:pointerup blank:pointerup",()=>{this.onDragEnd()}),Oi.on("link:connect",r=>{let i=String(r.model.source().id),o=String(r.model.target().id);Wr.removeCells([r.model]),this.netStore.connect(i,o)})},methods:{onModeChange(t){Oi.removeTools();const e=Wr.getElements();for(let n=0;n<e.length;n++)e[n].attr({body:{cursor:"auto"},label:{cursor:"auto"}});if(t===Vb){const n=Wr.getElements();for(let i=0;i<n.length;i++)n[i].addConnectTools(Oi);const r=Wr.getLinks();for(let i=0;i<r.length;i++)r[i].addVerticesTools(Oi)}else if(t===Yc){const n=Wr.getElements();for(let i=0;i<n.length;i++)n[i].addInteractionTools(Oi);const r=Wr.getLinks();for(let i=0;i<r.length;i++)r[i].addInteractionTools(Oi)}else if(t===Yhe)this.updateGraphLayout(),this.uiStateStore.mode=qhe;else if(t===fM){let n=setInterval(()=>{this.uiStateStore.mode!==fM?clearInterval(n):(this.netStore.fireAny(),this.netStore.lastFiredArcs.length===0&&(clearInterval(n),alert("Berechnung abgeschlossen.")))},1500)}},onPaperClick(t,e){this.clickX=t,this.clickY=e,this.uiStateStore.mode===B2?this.netStore.addPlace():this.uiStateStore.mode===z2&&this.netStore.addTransition()},updateGraphLayout(){Oi.freeze(),C_.layout(Wr,{nodeSep:100,edgeSep:100,rankSep:100,rankDir:"LR",dagre:sHe,graphlib:rje}),Oi.translate(100,200),Oi.unfreeze()},onDragStart(t,e){var n;this.uiStateStore.mode===Yc&&(this.isPanning=!0,(n=document.getElementById("canvasContainer"))==null||n.classList.add("panning-mode"),this.panX=t,this.panY=e)},onDragEnd(){var t;this.uiStateStore.mode===Yc&&((t=document.getElementById("canvasContainer"))==null||t.classList.remove("panning-mode"),this.isPanning=!1)},onMouseMove(t){this.isPanning&&Oi.translate(t.offsetX-this.panX,t.offsetY-this.panY)}}});const ai=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},uHe=t=>(Rg("data-v-266a4310"),t=t(),Vg(),t),cHe=uHe(()=>X("div",{id:"jointCanvas"},null,-1)),fHe=[cHe];function hHe(t,e,n,r,i,o){return Oe(),We("div",{id:"canvasContainer",class:Wt({"scoped-canvas-add":t.isAddingElements,"scoped-canvas-panning":t.isPanningMode,"scoped-canvas-pannable":t.isPannableMode,"elements-unmovable":!t.isInteractive})},fHe,2)}const dHe=ai(lHe,[["render",hHe],["__scopeId","data-v-266a4310"]]),pHe="/assets/manual-214c6c59.png",gHe=zt({data(){return{image:pHe}},computed:{...Yt(Aa)},methods:{close(){this.uiStateStore.showModal="none"}}}),mHe={class:"modal is-active"},vHe=X("div",{class:"modal-background"},null,-1),yHe={class:"modal-card jsn-modal-wide"},bHe={class:"modal-card-head"},_He=X("p",{class:"modal-card-title"},"Manual",-1),SHe={class:"modal-card-body"},wHe={class:"content"},xHe=DX("<h2>Get started</h2><p><b>Create a place:</b> Click on the button showing a circle, then click on the canvas to add a new place. </p><p><b>Create a transition:</b> Click on the button showing a square, then click on the canvas to add a new transition. </p><p><b>Create an arc:</b> Click on the button showing an arc. When you now hover over a place or a transition, it will show a small arc icon. Click on the icon and drag a new arc towards another place or transition. </p><p>You can click on the magic wand button to automagically layout the net.</p><h2>Edit</h2><p> Click on the cursor button to go into <b>edit mode</b>. In edit mode, when you hover over places, transitions and arcs, they will show several buttons: </p>",7),CHe={class:"columns is-vcentered"},kHe={class:"column is-narrow"},THe=["src"],AHe=X("div",{class:"column"},[X("p",null,[X("b",null,"Delete element:"),Bi(" Click on the delete button to delete the element.")]),X("p",null,[X("b",null,"Edit element:"),Bi(" Click on the edit button to change the name, inscription and content of elements. ")]),X("p",null,[X("b",null,"Fire transition:"),Bi(" Transitions additionally show a fire button. Click on it to make the transition fire and consume or create new tokens in the neighbouring places. If the transition is not enabled, you will receive an alert. ")])],-1),EHe=X("h2",null,"Play",-1),PHe=X("p",null,[Bi(" Click on the play button to go into "),X("b",null,"play mode"),Bi(". In play mode, one transition after another will fire automatically, until no transition is enabled any more. ")],-1),OHe={class:"modal-card-foot"};function IHe(t,e,n,r,i,o){return Oe(),We("div",mHe,[vHe,X("div",yHe,[X("header",bHe,[_He,X("button",{class:"delete","aria-label":"close",onClick:e[0]||(e[0]=(...a)=>t.close&&t.close(...a))})]),X("section",SHe,[X("div",wHe,[xHe,X("div",CHe,[X("div",kHe,[X("img",{src:t.image,width:"300"},null,8,THe)]),AHe]),EHe,PHe])]),X("footer",OHe,[X("button",{class:"button",onClick:e[1]||(e[1]=(...a)=>t.close&&t.close(...a))},"Close")])])])}const $He=ai(gHe,[["render",IHe]]),IC={log:(...t)=>{}},Er={STRING:"String",NUMBER:"Number",TRUE:"True",FALSE:"False",NULL:"Null",OBJECT:"Object",ARRAY:"Array",PROPERTY:"Property",PROPERTY_NAME:"PropertyName",PROPERTY_COLON:"PropertyColon",JSON_TEXT:"JsonText",INVALID:"⚠"},J5=[Er.STRING,Er.NUMBER,Er.TRUE,Er.FALSE,Er.NULL],Lle=[Er.OBJECT,Er.ARRAY],AH=(t,e,n=-1)=>ji(t).resolveInner(e,n),PD=t=>t.replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1"),Nb=(t,e,n=!0)=>{const r=e?t.sliceString(e.from,e.to):"";return n?PD(r):r},Dle=t=>{var e,n;return t.name===Er.INVALID&&(((e=t.prevSibling)===null||e===void 0?void 0:e.name)===Er.PROPERTY_NAME||((n=t.prevSibling)===null||n===void 0?void 0:n.name)===Er.PROPERTY_COLON)},I2=t=>J5.includes(t.name)||Dle(t),LHe=t=>[...J5,...Lle].includes(t.name)||Dle(t),$C=t=>{var e,n;return t.name===Er.PROPERTY_NAME||t.name===Er.INVALID&&(((e=t.prevSibling)===null||e===void 0?void 0:e.name)===Er.PROPERTY||((n=t.prevSibling)===null||n===void 0?void 0:n.name)==="{")},Mle=t=>{const e=[];let n=t.firstChild;for(;n;)n&&e.push(n),n=n==null?void 0:n.nextSibling;return e},EH=t=>Mle(t).find(e=>I2(e)),DHe=t=>Mle(t).filter(e=>J5.includes(e.name)||Lle.includes(e.name)),Nle=(t,e)=>DHe(t).findIndex(n=>n.from===e.from&&n.to===e.to),MHe={AdditionalItemsError:"Array at `{{pointer}}` may not have an additional item `{{key}}`",AdditionalPropertiesError:"Additional property `{{property}}` on `{{pointer}}` does not match schema `{{schema}}`",AllOfError:"Value `{{value}}` at `{{pointer}}` does not match schema of `{{allOf}}`",AnyOfError:"Value `{{value}}` at `{{pointer}}` does not match any schema of `{{anyOf}}`",ConstError:"Expected value at `{{pointer}}` to be `{{expected}}`, but value given is `{{value}}`",containsAnyError:"The array at `{{pointer}}` must contain at least one item",ContainsArrayError:"The property at `{{pointer}}` must not be an array",ContainsError:"The array at `{{pointer}}` must contain an element that matches `{{schema}}`",EnumError:"Expected given value `{{value}}` in `{{pointer}}` to be one of `{{values}}`",ForbiddenPropertyError:"Property name `{{property}}` at `{{pointer}}` is not allowed",FormatDateError:"Value `{{value}}` at `{{pointer}}` is not a valid date",FormatDateTimeError:"Value `{{value}}` at `{{pointer}}` is not a valid date-time",FormatEmailError:"Value `{{value}}` at `{{pointer}}` is not a valid email",FormatHostnameError:"Value `{{value}}` at `{{pointer}}` is not a valid hostname",FormatIPV4Error:"Value `{{value}}` at `{{pointer}}` is not a valid IPv4 address",FormatIPV4LeadingZeroError:"IPv4 addresses starting with zero are invalid, since they are interpreted as octals",FormatIPV6Error:"Value `{{value}}` at `{{pointer}}` is not a valid IPv6 address",FormatIPV6LeadingZeroError:"IPv6 addresses starting with zero are invalid, since they are interpreted as octals",FormatJsonPointerError:"Value `{{value}}` at `{{pointer}}` is not a valid json-pointer",FormatRegExError:"Value `{{value}}` at `{{pointer}}` is not a valid regular expression",FormatTimeError:"Value `{{value}}` at `{{pointer}}` is not a valid time",FormatURIError:"Value `{{value}}` at `{{pointer}}` is not a valid uri",FormatURIReferenceError:"Value `{{value}}` at `{{pointer}}` is not a valid uri-reference",FormatURITemplateError:"Value `{{value}}` at `{{pointer}}` is not a valid uri-template",FormatURLError:"Value `{{value}}` at `{{pointer}}` is not a valid url",InvalidDataError:"No value may be specified in `{{pointer}}`",InvalidPropertyNameError:"Invalid property name `{{property}}` at `{{pointer}}`",MaximumError:"Value in `{{pointer}}` is `{{length}}`, but should be `{{maximum}}` at maximum",MaxItemsError:"Too many items in `{{pointer}}`, should be `{{maximum}}` at most, but got `{{length}}`",MaxLengthError:"Value `{{pointer}}` should have a maximum length of `{{maxLength}}`, but got `{{length}}`.",MaxPropertiesError:"Too many properties in `{{pointer}}`, should be `{{maximum}}` at most, but got `{{length}}`",MinimumError:"Value in `{{pointer}}` is `{{length}}`, but should be `{{minimum}}` at minimum",MinItemsError:"Too few items in `{{pointer}}`, should be at least `{{minimum}}`, but got `{{length}}`",MinItemsOneError:"At least one item is required in `{{pointer}}`",MinLengthError:"Value `{{pointer}}` should have a minimum length of `{{minLength}}`, but got `{{length}}`.",MinLengthOneError:"A value is required in `{{pointer}}`",MinPropertiesError:"Too few properties in `{{pointer}}`, should be at least `{{minimum}}`, but got `{{length}}`",MissingDependencyError:"The required propery '{{missingProperty}}' in `{{pointer}}` is missing",MissingOneOfPropertyError:"Value at `{{pointer}}` property: `{{property}}`",MultipleOfError:"Expected `{{value}}` in `{{pointer}}` to be multiple of `{{multipleOf}}`",MultipleOneOfError:"Value `{{value}}` should not match multiple schemas in oneOf `{{matches}}`",NoAdditionalPropertiesError:"Additional property `{{property}}` in `{{pointer}}` is not allowed",NotError:"Value `{{value}}` at pointer should not match schema `{{not}}`",OneOfError:"Value `{{value}}` in `{{pointer}}` does not match any given oneof schema",OneOfPropertyError:"Failed finding a matching oneOfProperty schema in `{{pointer}}` where `{{property}}` matches `{{value}}`",PatternError:"Value in `{{pointer}}` should match `{{description}}`, but received `{{received}}`",PatternPropertiesError:"Property `{{key}}` does not match any patterns in `{{pointer}}`. Valid patterns are: {{patterns}}",RequiredPropertyError:"The required property `{{key}}` is missing at `{{pointer}}`",TypeError:"Expected `{{value}}` ({{received}}) in `{{pointer}}` to be of type `{{expected}}`",UndefinedValueError:"Value must not be undefined in `{{pointer}}`",UniqueItemsError:"Items in array must be unique. Value `{{value}}` in `{{pointer}}` is a duplicate of {{duplicatePointer}}.",UnknownPropertyError:"Could not find a valid schema for property `{{pointer}}` within object",ValueNotEmptyError:"A value for `{{property}}` is required at `{{pointer}}`"},NHe=Object.prototype.toString;function _n(t){const e=NHe.call(t).match(/\s([^\]]+)\]/).pop().toLowerCase();return e==="file"?"object":e}const FHe="object",RHe="array";function VHe(t,e={}){return t.replace(/\{\{\w+\}\}/g,n=>{const r=n.replace(/[{}]/g,""),i=e[r],o=_n(i);return o===FHe||o===RHe?JSON.stringify(i):i})}function BHe(t,e,n=t){var r;const i=(r=MHe[t])!==null&&r!==void 0?r:n;return VHe(i,e)}function zHe(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function jHe(t,e){return{type:"error",name:t,code:zHe(t),message:BHe(t,e),data:e}}function Mt(t){return jHe.bind(null,t)}function T_(t,e=[]){for(let n=0;n<t.length;n+=1){const r=t[n];Array.isArray(r)?T_(r,e):e.push(r)}return e}const H0={DECLARATOR_ONEOF:"oneOfProperty",GET_TEMPLATE_RECURSION_LIMIT:1,floatingPointPrecision:1e4,propertyBlacklist:["_id"],templateDefaultOptions:{addOptionalProps:!1,removeInvalidData:!1}};function y1(t,e,n){const r={...e};return Object.defineProperty(r,"getOneOfOrigin",{enumerable:!1,value:()=>({index:n,schema:t})}),r}function ps(t){return(t==null?void 0:t.type)==="error"}function UHe(t){return t instanceof Promise}function TT(t){return ps(t)||UHe(t)}const{DECLARATOR_ONEOF:Uv}=H0;function Fle(t,e,n=t.rootSchema,r="#"){if(e!=null&&n[Uv]){const a=[],s=n[Uv],l=e[n[Uv]];if(l===void 0)return t.errors.missingOneOfPropertyError({property:s,pointer:r});for(let u=0;u<n.oneOf.length;u+=1){const c=t.resolveRef(n.oneOf[u]),f=t.step(s,c,e,r);if(ps(f))return f;let h=T_(t.validate(l,f,r));if(h=h.filter(TT),h.length>0)a.push(...h);else return y1(n,c,u)}return t.errors.oneOfPropertyError({property:s,value:l,pointer:r,errors:a})}const i=[],o=[];for(let a=0;a<n.oneOf.length;a+=1){const s=t.resolveRef(n.oneOf[a]);let l=T_(t.validate(e,s,r));l=l.filter(TT),l.length>0?o.push(...l):i.push({index:a,schema:s})}return i.length===1?y1(n,i[0].schema,i[0].index):i.length>1?t.errors.multipleOneOfError({value:e,pointer:r,matches:i}):t.errors.oneOfError({value:JSON.stringify(e),pointer:r,oneOf:n.oneOf,errors:o})}function WHe(t,e,n,r){if(n==null||e.properties==null)return-1;let i=0;const o=Object.keys(e.properties);for(let a=0;a<o.length;a+=1){const s=o[a];n[s]!=null&&t.isValid(n[s],e.properties[s],r)&&(i+=1)}return i}function IE(t,e,n=t.rootSchema,r="#"){if(e!=null&&n[Uv]){const o=[],a=n[Uv],s=e[n[Uv]];if(s===void 0)return t.errors.missingOneOfPropertyError({property:a,pointer:r});for(let l=0;l<n.oneOf.length;l+=1){const u=t.resolveRef(n.oneOf[l]),c=t.step(a,u,e,r);if(ps(c))return c;let f=T_(t.validate(s,c,r));if(f=f.filter(TT),f.length>0)o.push(...f);else return y1(n,u,l)}return t.errors.oneOfPropertyError({property:a,value:s,pointer:r,errors:o})}const i=[];for(let o=0;o<n.oneOf.length;o+=1){const a=t.resolveRef(n.oneOf[o]);t.isValid(e,a,r)&&i.push({schema:a,index:o})}if(i.length===1)return y1(n,i[0].schema,i[0].index);if(_n(e)==="object"){let o,a=-1,s=0;for(let l=0;l<n.oneOf.length;l+=1){const u=t.resolveRef(n.oneOf[l]),c=WHe(t,u,e);s<c&&(s=c,o=n.oneOf[l],a=l)}return o===void 0?t.errors.oneOfError({value:JSON.stringify(e),pointer:r,oneOf:n.oneOf}):y1(n,o,a)}return i.length>1?t.errors.multipleOneOfError({matches:i,data:e,pointer:r}):t.errors.oneOfError({value:JSON.stringify(e),pointer:r,oneOf:n.oneOf})}const HHe=(t,e,n,r)=>{if(Array.isArray(e.oneOf)){const i=t.resolveOneOf(n,e,r);if(ps(i))return i}};var GHe=function(e){return qHe(e)&&!YHe(e)};function qHe(t){return!!t&&typeof t=="object"}function YHe(t){var e=Object.prototype.toString.call(t);return e==="[object RegExp]"||e==="[object Date]"||JHe(t)}var KHe=typeof Symbol=="function"&&Symbol.for,XHe=KHe?Symbol.for("react.element"):60103;function JHe(t){return t.$$typeof===XHe}function ZHe(t){return Array.isArray(t)?[]:{}}function A_(t,e){return e.clone!==!1&&e.isMergeableObject(t)?y0(ZHe(t),t,e):t}function QHe(t,e,n){return t.concat(e).map(function(r){return A_(r,n)})}function eGe(t,e){if(!e.customMerge)return y0;var n=e.customMerge(t);return typeof n=="function"?n:y0}function tGe(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return Object.propertyIsEnumerable.call(t,e)}):[]}function PH(t){return Object.keys(t).concat(tGe(t))}function Rle(t,e){try{return e in t}catch{return!1}}function nGe(t,e){return Rle(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))}function rGe(t,e,n){var r={};return n.isMergeableObject(t)&&PH(t).forEach(function(i){r[i]=A_(t[i],n)}),PH(e).forEach(function(i){nGe(t,i)||(Rle(t,i)&&n.isMergeableObject(e[i])?r[i]=eGe(i,n)(t[i],e[i],n):r[i]=A_(e[i],n))}),r}function y0(t,e,n){n=n||{},n.arrayMerge=n.arrayMerge||QHe,n.isMergeableObject=n.isMergeableObject||GHe,n.cloneUnlessOtherwiseSpecified=A_;var r=Array.isArray(e),i=Array.isArray(t),o=r===i;return o?r?n.arrayMerge(t,e,n):rGe(t,e,n):A_(e,n)}y0.all=function(e,n){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(r,i){return y0(r,i,n)},{})};var iGe=y0,oGe=iGe;const Vle=pr(oGe),aGe=(t,e)=>e,Z5=(t,e)=>Vle(t,e,{arrayMerge:aGe}),sGe=(t,e)=>{const n=t.concat(e);return n.filter((r,i)=>n.indexOf(r)===i)},lGe=(t,e)=>Vle(t,e,{arrayMerge:sGe});function es(t,e){const n=_n(t),r=_n(e);if(n!==r)return t;const i=lGe(t,e);return t.getOneOfOrigin?Object.defineProperty(i,"getOneOfOrigin",{enumerable:!1,value:t.getOneOfOrigin}):e.getOneOfOrigin&&Object.defineProperty(i,"getOneOfOrigin",{enumerable:!1,value:e.getOneOfOrigin}),i}function $E(t,...e){const n={};return Object.keys(t).forEach(r=>{e.includes(r)||(n[r]=t[r])}),t.getOneOfOrigin&&Object.defineProperty(n,"getOneOfOrigin",{enumerable:!1,value:t.getOneOfOrigin}),n}var uGe=Function.prototype.toString,VI=Object.create,cGe=Object.prototype.toString,fGe=function(){function t(){this._keys=[],this._values=[]}return t.prototype.has=function(e){return!!~this._keys.indexOf(e)},t.prototype.get=function(e){return this._values[this._keys.indexOf(e)]},t.prototype.set=function(e,n){this._keys.push(e),this._values.push(n)},t}();function hGe(){return new fGe}function dGe(){return new WeakMap}var pGe=typeof WeakMap<"u"?dGe:hGe;function Q5(t){if(!t)return VI(null);var e=t.constructor;if(e===Object)return t===Object.prototype?{}:VI(t);if(~uGe.call(e).indexOf("[native code]"))try{return new e}catch{}return VI(t)}function gGe(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}function mGe(t){return t.flags}var vGe=/test/g.flags==="g"?mGe:gGe;function Ble(t){var e=cGe.call(t);return e.substring(8,e.length-1)}function yGe(t){return t[Symbol.toStringTag]||Ble(t)}var bGe=typeof Symbol<"u"?yGe:Ble,_Ge=Object.defineProperty,SGe=Object.getOwnPropertyDescriptor,zle=Object.getOwnPropertyNames,e8=Object.getOwnPropertySymbols,jle=Object.prototype,Ule=jle.hasOwnProperty,wGe=jle.propertyIsEnumerable,Wle=typeof e8=="function";function xGe(t){return zle(t).concat(e8(t))}var CGe=Wle?xGe:zle;function LE(t,e,n){for(var r=CGe(t),i=0,o=r.length,a=void 0,s=void 0;i<o;++i)if(a=r[i],!(a==="callee"||a==="caller")){if(s=SGe(t,a),!s){e[a]=n.copier(t[a],n);continue}!s.get&&!s.set&&(s.value=n.copier(s.value,n));try{_Ge(e,a,s)}catch{e[a]=s.value}}return e}function kGe(t,e){var n=new e.Constructor;e.cache.set(t,n);for(var r=0,i=t.length;r<i;++r)n[r]=e.copier(t[r],e);return n}function TGe(t,e){var n=new e.Constructor;return e.cache.set(t,n),LE(t,n,e)}function Hle(t,e){return t.slice(0)}function AGe(t,e){return t.slice(0,t.size,t.type)}function EGe(t,e){return new e.Constructor(Hle(t.buffer))}function PGe(t,e){return new e.Constructor(t.getTime())}function Gle(t,e){var n=new e.Constructor;return e.cache.set(t,n),t.forEach(function(r,i){n.set(i,e.copier(r,e))}),n}function OGe(t,e){return LE(t,Gle(t,e),e)}function IGe(t,e){var n=Q5(e.prototype);e.cache.set(t,n);for(var r in t)Ule.call(t,r)&&(n[r]=e.copier(t[r],e));return n}function $Ge(t,e){var n=Q5(e.prototype);e.cache.set(t,n);for(var r in t)Ule.call(t,r)&&(n[r]=e.copier(t[r],e));for(var i=e8(t),o=0,a=i.length,s=void 0;o<a;++o)s=i[o],wGe.call(t,s)&&(n[s]=e.copier(t[s],e));return n}var LGe=Wle?$Ge:IGe;function DGe(t,e){var n=Q5(e.prototype);return e.cache.set(t,n),LE(t,n,e)}function BI(t,e){return new e.Constructor(t.valueOf())}function MGe(t,e){var n=new e.Constructor(t.source,vGe(t));return n.lastIndex=t.lastIndex,n}function $2(t,e){return t}function qle(t,e){var n=new e.Constructor;return e.cache.set(t,n),t.forEach(function(r){n.add(e.copier(r,e))}),n}function NGe(t,e){return LE(t,qle(t,e),e)}var FGe=Array.isArray,t8=Object.assign,RGe=Object.getPrototypeOf||function(t){return t.__proto__},Yle={array:kGe,arrayBuffer:Hle,blob:AGe,dataView:EGe,date:PGe,error:$2,map:Gle,object:LGe,regExp:MGe,set:qle},VGe=t8({},Yle,{array:TGe,map:OGe,object:DGe,set:NGe});function BGe(t){return{Arguments:t.object,Array:t.array,ArrayBuffer:t.arrayBuffer,Blob:t.blob,Boolean:BI,DataView:t.dataView,Date:t.date,Error:t.error,Float32Array:t.arrayBuffer,Float64Array:t.arrayBuffer,Int8Array:t.arrayBuffer,Int16Array:t.arrayBuffer,Int32Array:t.arrayBuffer,Map:t.map,Number:BI,Object:t.object,Promise:$2,RegExp:t.regExp,Set:t.set,String:BI,WeakMap:$2,WeakSet:$2,Uint8Array:t.arrayBuffer,Uint8ClampedArray:t.arrayBuffer,Uint16Array:t.arrayBuffer,Uint32Array:t.arrayBuffer,Uint64Array:t.arrayBuffer}}function Kle(t){var e=t8({},Yle,t),n=BGe(e),r=n.Array,i=n.Object;function o(a,s){if(s.prototype=s.Constructor=void 0,!a||typeof a!="object")return a;if(s.cache.has(a))return s.cache.get(a);if(s.prototype=RGe(a),s.Constructor=s.prototype&&s.prototype.constructor,!s.Constructor||s.Constructor===Object)return i(a,s);if(FGe(a))return r(a,s);var l=n[bGe(a)];return l?l(a,s):typeof a.then=="function"?a:i(a,s)}return function(s){return o(s,{Constructor:void 0,cache:pGe(),copier:o,prototype:void 0})}}function zGe(t){return Kle(t8({},VGe,t))}zGe({});var n8=Kle({});function DE(t,e,n){if(e.if===!1)return e.else;if(e.if&&(e.then||e.else)){const r=t.validate(n,t.resolveRef(e.if));if(r.length===0&&e.then)return t.resolveRef(e.then);if(r.length!==0&&e.else)return t.resolveRef(e.else)}}const jGe=(t,e,n,r)=>{const i=DE(t,e,n);if(i)return t.validate(n,i,r)};function UGe(t,e,n){var r;const i={...(r=t.resolveRef(e))!==null&&r!==void 0?r:{}},o=DE(t,i,n);return o||$E(i,"if","then","else")}function Xle(t,e,n=t.rootSchema){let r=n8(n);for(let i=0;i<n.allOf.length;i+=1){const o=UGe(t,n.allOf[i],e);r=es(r,o),e=t.getTemplate(e,r)}return delete r.allOf,r}function Jle(t,e){const{allOf:n}=e;if(!Array.isArray(n)||n.length===0)return;let r={};return n.forEach(i=>{r=es(r,t.resolveRef(i))}),r}const WGe=(t,e,n,r)=>{const{allOf:i}=e;if(!Array.isArray(i)||i.length===0)return;const o=[];return e.allOf.forEach(a=>{o.push(...t.validate(n,a,r))}),o};function Zle(t,e){return t==null||t.$ref==null?t:t.getRoot?t.getRoot().getRef(t):e.getRef(t)}function HGe(t,e){if(t==null||t.$ref==null)return t;const n=e.getRef(t),r=Object.assign({},n,t);return delete r.$ref,Object.defineProperty(r,"__ref",{enumerable:!1,value:t.__ref}),Object.defineProperty(r,"getRoot",{enumerable:!1,value:t.getRoot}),r}function GGe(t){return t.filter((e,n)=>t.indexOf(e)===n)}function fg(t){return _n(t)==="object"}function Qle(t,e,n){const{dependencies:r}=e;if(!fg(r)||!fg(n))return;let i=!1,o={required:[]};if(Object.keys(r).forEach(a=>{var s,l;if(n[a]==null&&!(!((s=e.required)===null||s===void 0)&&s.includes(a)||!((l=o.required)===null||l===void 0)&&l.includes(a)))return;const u=r[a];if(Array.isArray(u)){i=!0,o.required.push(...u);return}if(fg(u)){i=!0,o=es(o,t.resolveRef(u));return}}),i)return o.required=GGe(o.required),o}const qGe=(t,e,n,r)=>{if(_n(e.dependencies)!=="object")return;const i=[];return Object.keys(n).forEach(o=>{if(e.dependencies[o]===void 0||e.dependencies[o]===!0)return;if(e.dependencies[o]===!1){i.push(t.errors.missingDependencyError({pointer:r}));return}let a;const s=_n(e.dependencies[o]);if(s==="array")a=e.dependencies[o].filter(l=>n[l]===void 0).map(l=>t.errors.missingDependencyError({missingProperty:l,pointer:r}));else if(s==="object")a=t.validate(n,e.dependencies[o],r);else throw new Error(`Invalid dependency definition for ${r}/${o}. Must be string[] or schema`);i.push(...a)}),i.length>0?i:void 0},Hn={additionalItemsError:Mt("AdditionalItemsError"),additionalPropertiesError:Mt("AdditionalPropertiesError"),anyOfError:Mt("AnyOfError"),allOfError:Mt("AllOfError"),constError:Mt("ConstError"),containsError:Mt("ContainsError"),containsArrayError:Mt("ContainsArrayError"),containsAnyError:Mt("ContainsAnyError"),enumError:Mt("EnumError"),forbiddenPropertyError:Mt("ForbiddenPropertyError"),formatURLError:Mt("FormatURLError"),formatURIError:Mt("FormatURIError"),formatURIReferenceError:Mt("FormatURIReferenceError"),formatURITemplateError:Mt("FormatURITemplateError"),formatDateError:Mt("FormatDateaError"),formatDateTimeError:Mt("FormatDateTimeError"),formatEmailError:Mt("FormatEmailError"),formatHostnameError:Mt("FormatHostnameError"),formatIPV4Error:Mt("FormatIPV4Error"),formatIPV4LeadingZeroError:Mt("FormatIPV4LeadingZeroError"),formatIPV6Error:Mt("FormatIPV6Error"),formatIPV6LeadingZeroError:Mt("FormatIPV6LeadingZeroError"),formatJsonPointerError:Mt("FormatJsonPointerError"),formatRegExError:Mt("FormatRegExError"),formatTimeError:Mt("FormatTimeError"),invalidSchemaError:Mt("InvalidSchemaError"),invalidDataError:Mt("InvalidDataError"),invalidTypeError:Mt("InvalidTypeError"),invalidPropertyNameError:Mt("InvalidPropertyNameError"),maximumError:Mt("MaximumError"),maxItemsError:Mt("MaxItemsError"),maxLengthError:Mt("MaxLengthError"),maxPropertiesError:Mt("MaxPropertiesError"),minimumError:Mt("MinimumError"),minItemsError:Mt("MinItemsError"),minItemsOneError:Mt("MinItemsOneError"),minLengthError:Mt("MinLengthError"),minLengthOneError:Mt("MinLengthOneError"),minPropertiesError:Mt("MinPropertiesError"),missingDependencyError:Mt("MissingDependencyError"),missingOneOfPropertyError:Mt("MissingOneOfPropertyError"),multipleOfError:Mt("MultipleOfError"),multipleOneOfError:Mt("MultipleOneOfError"),noAdditionalPropertiesError:Mt("NoAdditionalPropertiesError"),notError:Mt("NotError"),oneOfError:Mt("OneOfError"),oneOfPropertyError:Mt("OneOfPropertyError"),patternError:Mt("PatternError"),patternPropertiesError:Mt("PatternPropertiesError"),requiredPropertyError:Mt("RequiredPropertyError"),typeError:Mt("TypeError"),undefinedValueError:Mt("UndefinedValueError"),uniqueItemsError:Mt("UniqueItemsError"),unknownPropertyError:Mt("UnknownPropertyError"),valueNotEmptyError:Mt("ValueNotEmptyError")};function eue(t,e,n){if(!Array.isArray(e.anyOf)||e.anyOf.length===0)return;let r;return e.anyOf.forEach(i=>{i=t.resolveRef(i),t.isValid(n,i)&&(r=r?es(r,i):i)}),r}function tue(t,e,n=t.rootSchema,r="#"){const{anyOf:i}=n;if(!Array.isArray(i)||i.length===0)return n;const o=eue(t,n,e);if(o==null)return Hn.anyOfError({value:e,pointer:r,anyOf:JSON.stringify(i)});const a=es(n,o);return $E(a,"anyOf")}const YGe=(t,e,n,r)=>{if(!(!Array.isArray(e.anyOf)||e.anyOf.length===0)){for(let i=0;i<e.anyOf.length;i+=1)if(t.isValid(n,e.anyOf[i]))return;return t.errors.anyOfError({anyOf:e.anyOf,value:n,pointer:r})}},KGe=["allOf","anyOf","oneOf","dependencies","if","then","else"];function nue(t,e,n){let r;if(e=t.resolveRef(e),e.oneOf){const u=IE(t,n,e);u&&u.type!=="error"&&(r=es(r??{},u))}const i=Jle(t,e);i&&(r=es(r??{},i));const o=eue(t,e,n);o&&(r=es(r??{},o));const a=Qle(t,e,n);a&&(r=es(r??{},a));const s=DE(t,e,n);if(s&&(r=es(r??{},s)),r==null)return;const l=nue(t,r,n);return l&&(r=es(r,l)),$E(r,...KGe)}const XGe=["allOf","anyOf","oneOf","dependencies","if","then","else"];function AT(t,e,n){let r=nue(t,e,n);return r?(r=es(e,r),$E(r,...XGe)):e}class rue{constructor(e,n){this.remotes={},this.errors={},this.typeKeywords={},this.validateKeyword={},this.validateType={},this.validateFormat={},this.config=e,this.typeKeywords=n8(e.typeKeywords),this.validateKeyword=Object.assign({},e.validateKeyword),this.validateType=Object.assign({},e.validateType),this.validateFormat=Object.assign({},e.validateFormat),this.errors=Object.assign({},e.errors),this.setSchema(n)}get rootSchema(){return this.__rootSchema}set rootSchema(e){e!=null&&(this.__rootSchema=this.config.compileSchema(this,e))}addRemoteSchema(e,n){this.config.addRemoteSchema(this,e,n)}compileSchema(e){var n;return this.config.compileSchema(this,e,(n=this.rootSchema)!==null&&n!==void 0?n:e)}createSchemaOf(e){return this.config.createSchemaOf(e)}each(e,n,r,i){return this.config.each(this,e,n,r,i)}eachSchema(e,n=this.rootSchema){return this.config.eachSchema(n,e)}getChildSchemaSelection(e,n){return this.config.getChildSchemaSelection(this,e,n)}getSchema(e="#",n,r){return this.config.getSchema(this,e,n,r)}getTemplate(e,n,r=this.config.templateDefaultOptions){return this.config.getTemplate(this,e,n,r)}isValid(e,n,r){return this.config.isValid(this,e,n,r)}resolveAnyOf(e,n,r){return this.config.resolveAnyOf(this,e,n,r)}resolveAllOf(e,n){return this.config.resolveAllOf(this,e,n)}resolveRef(e){return this.config.resolveRef(e,this.rootSchema)}resolveOneOf(e,n,r){return this.config.resolveOneOf(this,e,n,r)}setSchema(e){this.rootSchema=e}step(e,n,r,i){return this.config.step(this,e,n,r,i)}validate(e,n,r){return this.config.validate(this,e,n,r)}}function iue(t,e,n){n.id=n.id||e,t.remotes[e]=t.compileSchema(n)}var oue={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(typeof self<"u"?self:ui,()=>(()=>{var n={d:(V,z)=>{for(var ie in z)n.o(z,ie)&&!n.o(V,ie)&&Object.defineProperty(V,ie,{enumerable:!0,get:z[ie]})},o:(V,z)=>Object.prototype.hasOwnProperty.call(V,z),r:V=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(V,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(V,"__esModule",{value:!0})}},r={};function i(V){return V==="#"||V===""||Array.isArray(V)&&V.length===0||!1}n.r(r),n.d(r,{default:()=>R,get:()=>h,isRoot:()=>i,join:()=>M,remove:()=>x,removeUndefinedItems:()=>k,set:()=>v,split:()=>f,splitLast:()=>L});const o=/~1/g,a=/~0/g,s=/\/+/g,l=/(^[#/]*|\/+$)/g;function u(V){return V.replace(o,"/").replace(a,"~")}function c(V){return u(decodeURIComponent(V))}function f(V){if(V==null||typeof V!="string"||i(V))return Array.isArray(V)?V:[];const z=V.indexOf("#")>=0?c:u,ie=(V=(V=V.replace(s,"/")).replace(l,"")).split("/");for(let oe=0,Se=ie.length;oe<Se;oe+=1)ie[oe]=z(ie[oe]);return ie}function h(V,z,ie=void 0){if(z==null||V==null)return ie;if(i(z))return V;const oe=d(V,f(z));return oe===void 0?ie:oe}function d(V,z){const ie=z.shift();if(V!==void 0)return ie!==void 0?d(V[ie],z):V}const g=/^\[.*\]$/,y=/^\[(.+)\]$/;function _(V,z){return V==="__proto__"||V=="constructor"&&z.length>0&&z[0]=="prototype"}function v(V,z,ie){if(z==null)return V;const oe=f(z);if(oe.length===0)return V;V==null&&(V=g.test(oe[0])?[]:{});let Se,Ae,Ee=V;for(;oe.length>1;)Se=oe.shift(),Ae=g.test(oe[0]),_(Se,oe)||(Ee=C(Ee,Se,Ae));return Se=oe.pop(),S(Ee,Se,ie),V}function S(V,z,ie){let oe;const Se=z.match(y);z==="[]"&&Array.isArray(V)?V.push(ie):Se?(oe=Se.pop(),V[oe]=ie):V[z]=ie}function C(V,z,ie){if(V[z]!=null)return V[z];const oe=ie?[]:{};return S(V,z,oe),oe}function k(V){let z=0,ie=0;for(;z+ie<V.length;)V[z+ie]===void 0&&(ie+=1),V[z]=V[z+ie],z+=1;return V.length=V.length-ie,V}function x(V,z,ie){const oe=f(z),Se=oe.pop(),Ae=h(V,oe);return Ae&&delete Ae[Se],Array.isArray(Ae)&&ie!==!0&&k(Ae),V}const m=/\/+/g,T=/~/g,P=/\//g;function I(V,z){if(V.length===0)return z?"#":"";for(let ie=0,oe=V.length;ie<oe;ie+=1)V[ie]=V[ie].replace(T,"~0").replace(P,"~1"),z&&(V[ie]=encodeURIComponent(V[ie]));return((z?"#/":"/")+V.join("/")).replace(m,"/")}function M(V,...z){const ie=[];if(Array.isArray(V))return I(V,arguments[1]===!0);const oe=arguments[arguments.length-1],Se=typeof oe=="boolean"?oe:V&&V[0]==="#";for(let Ee=0,_e=arguments.length;Ee<_e;Ee+=1)ie.push.apply(ie,f(arguments[Ee]));const Ae=[];for(let Ee=0,_e=ie.length;Ee<_e;Ee+=1)if(ie[Ee]===".."){if(Ae.length===0)return Se?"#":"";Ae.pop()}else Ae.push(ie[Ee]);return I(Ae,Se)}function L(V){const z=f(V);if(z.length===0)return typeof V=="string"&&V[0]==="#"?["#",z[0]]:["",void 0];if(z.length===1)return V[0]==="#"?["#",z[0]]:["",z[0]];const ie=z.pop();return[M(z,V[0]==="#"),ie]}const R={get:h,set:v,remove:x,join:M,split:f,splitLast:L,isRoot:i,removeUndefinedItems:k};return r})())})(oue);var Zp=oue.exports;const b0=pr(Zp);var aue={},Ns={},ME={};Object.defineProperty(ME,"__esModule",{value:!0});ME.TokenError=void 0;class JGe extends Error{constructor(e,n){if(super(e),this.message=e,this.token=n,n&&n.errors)n.errors.push(this);else throw this}inspect(){return"SyntaxError: "+this.message}}ME.TokenError=JGe;Object.defineProperty(Ns,"__esModule",{value:!0});Ns.Parser=Ns.findRuleByName=Ns.parseRuleName=Ns.escapeRegExp=Ns.readToken=void 0;const OH=/^[A-Z0-9_]+$/,IH=/(\?|\+|\*)$/,$H=/^(@|&|!)/,LC="WS",DC=ME;function OD(t,e){let n=e.exec(t);return n&&n.index==0?n[0].length==0&&e.source.length>0?null:{type:null,text:n[0],rest:t.substr(n[0].length),start:0,end:n[0].length-1,fullText:n[0],errors:[],children:[],parent:null}:null}Ns.readToken=OD;function sue(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}Ns.escapeRegExp=sue;function lue(t){t.rest="",t.children&&t.children.forEach(e=>lue(e))}function uue(t,e){t.start+=e,t.end+=e,t.children&&t.children.forEach(n=>uue(n,t.start))}function cue(t,e){e.errors&&e.errors.length&&e.errors.forEach(n=>t.push(n)),e.children&&e.children.forEach(n=>cue(t,n))}function Mp(t){let e=IH.exec(t),n=$H.exec(t),r=e&&e[0]||"",i=n&&n[0]||"",o={raw:t,name:t.replace(IH,"").replace($H,""),isOptional:r=="?"||r=="*",allowRepetition:r=="+"||r=="*",atLeastOne:r=="+",lookupPositive:i=="&",lookupNegative:i=="!",pinned:i=="@",lookup:!1,isLiteral:!1};return o.isLiteral=o.name[0]=="'"||o.name[0]=='"',o.lookup=o.lookupNegative||o.lookupPositive,o}Ns.parseRuleName=Mp;function fue(t,e){let n=Mp(t);return e.cachedRules[n.name]||null}Ns.findRuleByName=fue;function ID(t,e){if(t.children){let n=t.children.filter(r=>r.type&&e.test(r.type));for(let r=0;r<n.length;r++){let i=t.children.indexOf(n[r]);i!=-1&&t.children.splice(i,1)}t.children.forEach(r=>ID(r,e))}}const ZGe=["EOF"];class hue{constructor(e,n){this.grammarRules=e,this.options=n,this.cachedRules={},this.debug=n?n.debug===!0:!1;let r=[],i=[];if(e.forEach(o=>{let a=Mp(o.name);if(a.name in this.cachedRules){r.push("Duplicated rule "+a.name);return}else this.cachedRules[a.name]=o;if(!o.bnf||!o.bnf.length){let s="Missing rule content, rule: "+o.name;r.indexOf(s)==-1&&r.push(s)}else o.bnf.forEach(s=>{if(typeof s[0]=="string"&&Mp(s[0]).name==o.name){let u="Left recursion is not allowed, rule: "+o.name;r.indexOf(u)==-1&&r.push(u)}s.forEach(l=>{if(typeof l=="string"){let u=Mp(l);!u.isLiteral&&i.indexOf(u.name)==-1&&ZGe.indexOf(u.name)==-1&&i.push(u.name)}})});LC==o.name&&(o.implicitWs=!1),o.implicitWs&&i.indexOf(LC)==-1&&i.push(LC),o.recover&&i.indexOf(o.recover)==-1&&i.push(o.recover)}),i.forEach(o=>{o in this.cachedRules||r.push("Missing rule "+o)}),r.length)throw new Error(r.join(`
`))}getAST(e,n){n||(n=this.grammarRules.filter(i=>!i.fragment&&i.name.indexOf("%")!=0)[0].name);let r=this.parse(e,n);if(r){cue(r.errors,r),uue(r,0),ID(r,/^%/),(!this.options||!this.options.keepUpperRules)&&ID(r,OH);let i=r.rest;i&&new DC.TokenError(`Unexpected end of input: 
`+i,r),lue(r),r.rest=i}return r}emitSource(){return"CANNOT EMIT SOURCE FROM BASE Parser"}parse(e,n,r=0){let i=null,o=Mp(n),a,s=this.debug&&!OH.test(o.name);s&&console.log(new Array(r).join("│  ")+"Trying to get "+n+" from "+JSON.stringify(e.split(`
`)[0]));let l=o.name,u=fue(o.name,this);if(o.name=="EOF"){if(e.length)return null;if(e.length==0)return{type:"EOF",text:"",rest:"",start:0,end:0,fullText:"",errors:[],children:[],parent:null}}try{if(!u&&o.isLiteral){let c=o.name.trim();if(c.startsWith('"')?c=JSON.parse(c):c.startsWith("'")&&(c=c.replace(/^'(.+)'$/,"$1").replace(/\\'/g,"'")),c==="")return{type:"%%EMPTY%%",text:"",rest:e,start:0,end:0,fullText:"",errors:[],children:[],parent:null};a=new RegExp(sue(c)),l=null}}catch(c){return c instanceof ReferenceError&&console.error(c),null}if(a){let c=OD(e,a);if(c)return c.type=l,c}else{let c=u.bnf;c instanceof Array&&c.forEach(f=>{if(i)return;let h=null,d={type:o.name,text:"",children:[],end:0,errors:[],fullText:"",parent:null,start:0,rest:e};u.fragment&&(d.fragment=!0);let g=e,y=0,_=f.length>0,v=!1;for(let S=0;S<f.length;S++)if(typeof f[S]=="string"){let C=Mp(f[S]);_=_&&C.isOptional;let k,x=!1;do{if(k=null,u.implicitWs&&(k=this.parse(g,C.name,r+1),!k)){let m;do if(m=this.parse(g,LC,r+1),m)d.text=d.text+m.text,d.end=d.text.length,m.parent=d,d.children.push(m),g=g.substr(m.text.length),y+=m.text.length;else break;while(m&&m.text.length)}if(k=k||this.parse(g,C.name,r+1),C.lookupNegative){if(k)return;break}if(C.lookupPositive&&!k)return;if(!k&&(C.isOptional||C.atLeastOne&&x))break;if(k&&u.pinned==S+1&&(h=k,s&&console.log(new Array(r+1).join("│  ")+"└─ "+k.type+" PINNED")),k||(k=this.parseRecovery(u,g,r+1)),!k)if(h)i=d,k={type:"SyntaxError",text:g,children:[],end:g.length,errors:[],fullText:"",parent:null,start:0,rest:""},g.length?new DC.TokenError(`Unexpected end of input. Expecting ${C.name} Got: ${g}`,k):new DC.TokenError(`Unexpected end of input. Missing ${C.name}`,k),s&&console.log(new Array(r+1).join("│  ")+"└─ "+k.type+" "+JSON.stringify(k.text));else return;if(x=!0,v=!0,k.type=="%%EMPTY%%")break;k.start+=y,k.end+=y,!C.lookupPositive&&k.type&&(k.fragment?k.children&&k.children.forEach(m=>{m.start+=y,m.end+=y,m.parent=d,d.children.push(m)}):(k.parent=d,d.children.push(k))),C.lookup&&(k.lookup=!0),s&&console.log(new Array(r+1).join("│  ")+"└─ "+k.type+" "+JSON.stringify(k.text)),!C.lookup&&!k.lookup&&(d.text=d.text+k.text,d.end=d.text.length,g=g.substr(k.text.length),y+=k.text.length),d.rest=g}while(k&&C.allowRepetition&&g.length&&!k.lookup)}else{let C=OD(g,f[S]);if(!C)return;s&&console.log(new Array(r+1).join("│  ")+"└> "+JSON.stringify(C.text)+f[S].source),v=!0,C.start+=y,C.end+=y,d.text=d.text+C.text,d.end=d.text.length,g=g.substr(C.text.length),y+=C.text.length,d.rest=g}v&&(i=d,s&&console.log(new Array(r).join("│  ")+"├<─┴< PUSHING "+i.type+" "+JSON.stringify(i.text)))}),i&&u.simplifyWhenOneChildren&&i.children.length==1&&(i=i.children[0])}return i||s&&console.log(n+" NOT RESOLVED FROM "+e),i}parseRecovery(e,n,r){if(e.recover&&n.length){let i=this.debug;i&&console.log(new Array(r+1).join("│  ")+"Trying to recover until token "+e.recover+" from "+JSON.stringify(n.split(`
`)[0]+n.split(`
`)[1]));let o={type:"SyntaxError",text:"",children:[],end:0,errors:[],fullText:"",parent:null,start:0,rest:""},a;do if(a=this.parse(n,e.recover,r+1),a){new DC.TokenError('Unexpected input: "'+o.text+`" Expecting: ${e.name}`,o);break}else o.text=o.text+n[0],o.end=o.text.length,n=n.substr(1);while(!a&&n.length>0);if(o.text.length>0&&a)return i&&console.log(new Array(r+1).join("│  ")+"Recovered text: "+JSON.stringify(o.text)),o}return null}}Ns.Parser=hue;Ns.default=hue;Object.defineProperty(aue,"__esModule",{value:!0});const cb=Ns;var $D;(function(t){t.RULES=[{name:"Grammar",bnf:[["RULE_S*","%Atomic*","EOF"]]},{name:"%Atomic",bnf:[["Production","RULE_S*"]],fragment:!0},{name:"Production",bnf:[["NCName","RULE_S*",'"::="',"RULE_WHITESPACE*","Choice","RULE_WHITESPACE*","RULE_EOL+","RULE_S*"]]},{name:"NCName",bnf:[[/[a-zA-Z][a-zA-Z_0-9]*/]]},{name:"Choice",bnf:[["SequenceOrDifference","%_Choice_1*"]],fragment:!0},{name:"%_Choice_1",bnf:[["RULE_WHITESPACE*",'"|"',"RULE_WHITESPACE*","SequenceOrDifference"]],fragment:!0},{name:"SequenceOrDifference",bnf:[["Item","RULE_WHITESPACE*","%_Item_1?"]]},{name:"%_Item_1",bnf:[["Minus","Item"],["Item*"]],fragment:!0},{name:"Minus",bnf:[['"-"']]},{name:"Item",bnf:[["RULE_WHITESPACE*","%Primary","PrimaryDecoration?"]],fragment:!0},{name:"PrimaryDecoration",bnf:[['"?"'],['"*"'],['"+"']]},{name:"DecorationName",bnf:[['"ebnf://"',/[^\x5D#]+/]]},{name:"%Primary",bnf:[["NCName"],["StringLiteral"],["CharCode"],["CharClass"],["SubItem"]],fragment:!0},{name:"SubItem",bnf:[['"("',"RULE_WHITESPACE*","Choice","RULE_WHITESPACE*",'")"']]},{name:"StringLiteral",bnf:[[`'"'`,/[^"]*/,`'"'`],[`"'"`,/[^']*/,`"'"`]],pinned:1},{name:"CharCode",bnf:[['"#x"',/[0-9a-zA-Z]+/]]},{name:"CharClass",bnf:[["'['","'^'?","%RULE_CharClass_1+",'"]"']]},{name:"%RULE_CharClass_1",bnf:[["CharCodeRange"],["CharRange"],["CharCode"],["RULE_Char"]],fragment:!0},{name:"RULE_Char",bnf:[[/\x09/],[/\x0A/],[/\x0D/],[/[\x20-\x5c]/],[/[\x5e-\uD7FF]/],[/[\uE000-\uFFFD]/]]},{name:"CharRange",bnf:[["RULE_Char",'"-"',"RULE_Char"]]},{name:"CharCodeRange",bnf:[["CharCode",'"-"',"CharCode"]]},{name:"RULE_WHITESPACE",bnf:[["%RULE_WHITESPACE_CHAR*"],["Comment","RULE_WHITESPACE*"]]},{name:"RULE_S",bnf:[["RULE_WHITESPACE","RULE_S*"],["RULE_EOL","RULE_S*"]]},{name:"%RULE_WHITESPACE_CHAR",bnf:[[/\x09/],[/\x20/]],fragment:!0},{name:"Comment",bnf:[['"/*"',"%RULE_Comment_Body*",'"*/"']]},{name:"%RULE_Comment_Body",bnf:[['!"*/"',/[^*]/]],fragment:!0},{name:"RULE_EOL",bnf:[[/\x0D/,/\x0A/],[/\x0A/],[/\x0D/]]},{name:"Link",bnf:[["'['","Url","']'"]]},{name:"Url",bnf:[[/[^\x5D:/?#]/,'"://"',/[^\x5D#]+/,"%Url1?"]]},{name:"%Url1",bnf:[['"#"',"NCName"]],fragment:!0}],t.defaultParser=new cb.Parser(t.RULES,{debug:!1});const e=/^(!|&)/,n=/(\?|\+|\*)$/,r=/^%/;function i(v,S){if(typeof v=="string"){if(e.test(v))return"";if(r.test(v)){let k=n.exec(v),x=k?k[0]+" ":"";return o(v,S)?s(v,S)+x:"("+s(v,S)+")"+x}return v}else return v.source.replace(/\\(?:x|u)([a-zA-Z0-9]+)/g,"#x$1").replace(/\[\\(?:x|u)([a-zA-Z0-9]+)-\\(?:x|u)([a-zA-Z0-9]+)\]/g,"[#x$1-#x$2]")}function o(v,S){let C=cb.findRuleByName(v,S);return C&&C.bnf.length==1&&C.bnf[0].length==1&&(C.bnf[0][0]instanceof RegExp||C.bnf[0][0][0]=='"'||C.bnf[0][0][0]=="'")}function a(v,S){return v.map(C=>i(C,S)).join(" ")}function s(v,S){let C=cb.findRuleByName(v,S);return C?C.bnf.map(k=>a(k,S)).join(" | "):"RULE_NOT_FOUND {"+v+"}"}function l(v){let S=[];return v.grammarRules.forEach(C=>{if(!/^%/.test(C.name)){let k=C.recover?" /* { recoverUntil="+C.recover+" } */":"";S.push(C.name+" ::= "+s(C.name,v)+k)}}),S.join(`
`)}t.emit=l;let u=0;function c(v,S){throw console.log("reberia restar "+S+" a "+v),new Error("Difference not supported yet")}function f(v){return new RegExp(v.replace(/#x([a-zA-Z0-9]{4})/g,"\\u$1").replace(/#x([a-zA-Z0-9]{3})/g,"\\u0$1").replace(/#x([a-zA-Z0-9]{2})/g,"\\x$1").replace(/#x([a-zA-Z0-9]{1})/g,"\\x0$1"))}function h(v,S,C){let k=null,x=[];return S.children.forEach((m,T)=>{m.type=="Minus"&&c(k,m);let P=S.children[T+1];P=P&&P.type=="PrimaryDecoration"&&P.text||"";let I="";switch(m.type){case"SubItem":let M="%"+(C+u++);d(v,m,M),x.push(I+M+P);break;case"NCName":case"StringLiteral":x.push(I+m.text+P);break;case"CharCode":case"CharClass":if(P||I){let L={name:"%"+(C+u++),bnf:[[f(m.text)]]};v.push(L),x.push(I+L.name+P)}else x.push(f(m.text));break;case"PrimaryDecoration":break;default:throw new Error(" HOW SHOULD I PARSE THIS? "+m.type+" -> "+JSON.stringify(m.text))}k=m}),x}function d(v,S,C){let k=S.children.filter(T=>T.type=="SequenceOrDifference").map(T=>h(v,T,C)),x={name:C,bnf:k},m=null;k.forEach(T=>{m=m||T.recover,delete T.recover}),C.indexOf("%")==0&&(x.fragment=!0),m&&(x.recover=m),v.push(x)}function g(v,S=t.defaultParser){let C=S.getAST(v);if(!C)throw new Error("Could not parse "+v);if(C.errors&&C.errors.length)throw C.errors[0];let k=[];return C.children.filter(x=>x.type=="Production").map(x=>{let m=x.children.filter(T=>T.type=="NCName")[0].text;d(k,x,m)}),k}t.getRules=g;function y(v,S=t.defaultParser){return g(v.join(""),S)}t.Transform=y;class _ extends cb.Parser{constructor(S,C){const k=C&&C.debugRulesParser===!0?new cb.Parser(t.RULES,{debug:!0}):t.defaultParser;super(g(S,k),C)}emitSource(){return l(this)}}t.Parser=_})($D||($D={}));var QGe=aue.default=$D;const eqe="[^?/{}*,()#]+",tqe=`
root ::= ("#" recursion | recursion | (query | pattern) recursion* | "#" SEP? | SEP)
recursion ::= (SEP query | pattern)*

query ::= (ESC escaped ESC | property | all | any | regex) typecheck? lookahead?
property ::= ${eqe}
regex ::= "{" [^}]+ "}"
SEP ::= "/"
all ::= "**"
any ::= "*"

typecheck ::= "?:" ("value" | "boolean" | "string" | "number" | "object" | "array")
lookahead ::= "?" expression ((andExpr | orExpr) expression)*
andExpr ::= S? "&&" S?
orExpr ::= S? "||" S?

expression ::= (exprProperty | ESC escaped ESC) ((isnot | is) (exprProperty | regex | ESC escaped ESC))*
exprProperty ::= [a-zA-Z0-9-_ $]+
escaped ::= [^"]+
is ::= ":"
isnot ::= ":!"
ESC ::= '"'

pattern ::= S? "(" (SEP query | pattern (orPattern? pattern)*)* ")" quantifier? S? lookahead?
quantifier ::= "+" | "*" | [0-9]+
orPattern ::= S? "," S?

S ::= [ ]*
`,nqe=new QGe.Parser(tqe),rqe=t=>nqe.getAST(t),Xa=0,_0=3,ET=(t,e)=>`${t}/${e}`,due=Object.prototype.toString,iqe=/Object|Array/,LD=t=>iqe.test(due.call(t)),oqe=t=>due.call(t).match(/\s([^\]]+)\]/).pop().toLowerCase();function pue(t){return new RegExp(t.text.replace(/(^{|}$)/g,""))}function aqe(t,e){Array.isArray(t)?t.forEach(e):Object.prototype.toString.call(t)==="[object Object]"&&Object.keys(t).forEach(function(n){e(t[n],n,t)})}function LH(t){return Array.isArray(t)?t.map(function(e,n){return`${n}`}):Object.prototype.toString.call(t)==="[object Object]"?Object.keys(t):[]}const Bh={mem:[],get(t,e){const n=t[Xa][e];if(!Bh.mem.includes(n))return LD(n)&&Bh.mem.push(n),[n,e,t[Xa],ET(t[_0],e)]},reset(){Bh.mem.length=0}},DD={any(t,e){const n=e[Xa];return LH(n).map(r=>[n[r],r,n,ET(e[_0],r)])},all(t,e){const n=[e];return aqe(e[Xa],(r,i)=>{const o=Bh.get(e,i);o&&n.push(...DD.all(t,o))}),n},regex(t,e){const n=pue(t),r=e[Xa];return LH(r).filter(i=>n.test(i)).map(i=>[r[i],i,r,ET(e[_0],i)])}},PT={escaped:(t,e)=>PT.property(t,e),property:(t,e)=>{const n=t.text;if(e[Xa]&&e[Xa][n]!==void 0)return[e[Xa][n],n,e[Xa],ET(e[_0],n)]},typecheck:(t,e)=>{const n=t.text.replace(/^\?:/,"");if(n==="value")return LD(e[Xa])?void 0:e;if(oqe(e[Xa])===n)return e},lookahead:(t,e)=>{let n=!0,r=!1;return t.children.forEach(i=>{if(i.type==="expression"){const o=PT.expression(i,e)!==void 0;n=r===!0?n||o:n&&o}else r=i.type==="orExpr"}),n?e:void 0},expression:(t,e)=>{const n=t.children[0].text,r=t.children[1],i=t.children[2],o=e[Xa];if(LD(o)!==!1)return sqe(o[n],r,i)?e:void 0}};function sqe(t,e,n){if(e===void 0)return t!==void 0;let r;const i=`${t}`;return n.type==="regex"?r=pue(n).test(i):r=i===n.text,e.type==="isnot"&&(r=r===!1&&t!==void 0),r}function lqe(t,e,n,r){const i=[];for(let o=0,a=e.length;o<a;o+=1)i.push(...t(n,e[o],n,r));return i}function uqe(t,e,n,r){const i=[];for(let o=0,a=e.length;o<a;o+=1){const s=t(n,e[o],r);s&&i.push(s)}return i}function cqe(t,e,n){let r=t;return e.children.forEach(i=>{if(DD[i.type])r=lqe(DD[i.type],r,i,n);else if(PT[i.type])r=uqe(PT[i.type],r,i,n);else throw new Error(`Unknown filter ${i.type}`)}),r}function fqe(t,e,n){const r=[];let i=t;return e.children.forEach(o=>{if(o.type==="orPattern"){r.push(...i),i=t;return}i=r8(i,o,n)}),r.push(...i),r}function hqe(t){if(t==null)return 1;if(t==="*"||t==="+")return 1/0;const e=parseInt(t);return isNaN(e)?1:e}function dqe(t,e,n){const r=[],i=e.children.find(l=>l.type==="quantifier"),o=hqe(i&&i.text);let a=t;i&&i.text==="*"&&r.push(...a);let s=0;for(;a.length>0&&s<o;)a=fqe(a,e,n),r.push(...a),s+=1;return r}function pqe(t,e,n){let r=t;return e.children.forEach(i=>r=r8(r,i,n)),r}function r8(t,e,n){let r;return e.type==="query"?r=cqe(t,e,n):e.type==="pattern"?r=dqe(t,e,n):r=pqe(t,e,n),Bh.reset(),Bh.mem.push(t),r}function gqe(t,e){return Bh.reset(),Bh.mem.push(t),r8([[t,null,null,"#"]],e)}const DH={value:t=>t.map(e=>e[Xa]),pointer:t=>t.map(e=>e[_0]),all:t=>t,map:t=>{const e={};return t.forEach(n=>e[n[_0]]=n[Xa]),e}};var Lg;(function(t){t.POINTER="pointer",t.VALUE="value",t.ALL="all",t.MAP="map"})(Lg||(Lg={}));LS.POINTER=Lg.POINTER;LS.VALUE=Lg.VALUE;LS.ALL=Lg.ALL;LS.MAP=Lg.MAP;function LS(t,e,n=Lg.VALUE){if(e==null)return[];e=e.replace(/(\/$)/g,""),e===""&&(e="#");const r=rqe(e);if(r==null)throw new Error(`empty ast for '${e}'`);if(r.rest!=="")throw new Error(`Failed parsing queryString from: '${r.rest}'`);const i=gqe(t,r);return typeof n=="function"?i.map(o=>n(...o)):DH[n]?DH[n](i):i}var OT;(function(t){t.REPLACE_ITEMS="replace",t.INSERT_ITEMS="insert"})(OT||(OT={}));OT.REPLACE_ITEMS;OT.INSERT_ITEMS;const lf={$ref:{type:!1},allOf:{type:!1,definitions:["allOf/*"]},anyOf:{type:!1,definitions:["anyOf/*"]},array:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not","items","items/*","additionalItems"],validationKeywords:["minItems","maxItems","uniqueItems"],keywords:["items","additionalItems","minItems","maxItems","uniqueItems"]},boolean:{type:!0},enum:{type:!1},integer:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not"],validationKeywords:["minimum","maximum","multipleOf"]},not:{type:!1,definitions:["not"]},number:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not"],validationKeywords:["minimum","maximum","multipleOf"]},null:{type:!0},object:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not","properties/*","additionalProperties","patternProperties/*","dependencies/*"],validationKeywords:["minProperties","maxProperties","required"],keywords:["properties","additionalProperties","patternProperties","dependencies","minProperties","maxProperties","required"]},oneOf:{type:!1,definitions:["oneOf/*"]},string:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not"],validationKeywords:["minLength","maxLength","pattern"]}},mqe=Object.keys(lf).filter(t=>lf[t].type===!1),MH=Object.prototype.hasOwnProperty;function NH(t){if(fg(t)===!1)return;if(t.enum)return"enum";if(lf[t.type]||Array.isArray(t.type))return t.type;const e=mqe.filter(n=>t[n]);if(e.length===1)return e[0];if(e.length===0){for(let n=0,r=lf.object.keywords.length;n<r;n+=1){const i=lf.object.keywords[n];if(MH.call(t,i))return"object"}for(let n=0,r=lf.array.keywords.length;n<r;n+=1){const i=lf.array.keywords[n];if(MH.call(t,i))return"array"}return}throw new Error(`Mutiple typeIds [${e.join(", ")}] matched in ${JSON.stringify(t)}`)}function vqe(t){const e=[],n=NH(t);if(n==null)return e;let r;if(Array.isArray(n)){r={};for(let i=0,o=n.length;i<o;i+=1)Object.assign(r,lf[n[i]])}else r=lf[n];return r.definitions==null||r.definitions.forEach(i=>{LS(t,i,(o,a,s,l)=>{fg(o)&&NH(o)&&e.push({pointer:b0.join(b0.split(l),!1),def:o})})}),e}function yqe(t,e){if(this.callback(t,e)===!0)return;vqe(t).forEach(r=>this.nextTypeDefs(r.def,b0.join(e,r.pointer,!1)))}function MC(t,e,n,r="definitions"){const i=e[r];Object.keys(i).forEach(o=>{if(i[o]===!1||fg(i[o])){t.nextTypeDefs(i[o],b0.join(n,r,o,!1));return}})}function NE(t,e,n="#"){const r={callback:e,nextTypeDefs:yqe};r.nextTypeDefs(t,n),t.definitions!=null&&(r.callback=(i,o)=>{e(i,o),i.definitions!=null&&MC(r,i,o)},MC(r,t,n)),t.$defs!=null&&(r.callback=(i,o)=>{e(i,o),i.definitions!=null&&MC(r,i,o)},MC(r,t,n,"$defs"))}const bqe=/(#|\/)+$/,NC=/#$/,_qe=/^[^:]+:\/\/[^/]+\//,Sqe=/\/[^/]*$/,wqe=/#.*$/;function IT(t,e){return t==null&&e==null?"#":e==null?t.replace(NC,""):t==null?e.replace(NC,""):e[0]==="#"?`${t.replace(wqe,"")}${e.replace(bqe,"")}`:_qe.test(e)?e.replace(NC,""):`${t.replace(Sqe,"")}/${e.replace(NC,"")}`}const fb=/(#|\/)+$/g,xqe=["",null,"#"];function Cqe(t){if(xqe.includes(t))return[];if(t=t.replace(fb,""),t.indexOf("#")===-1)return[t.replace(fb,"")];if(t.indexOf("#")===0)return[t.replace(fb,"")];const e=t.split("#");return e[0]=e[0].replace(fb,""),e[1]=`#${e[1].replace(fb,"")}`,e}const kqe=/(#|\/)+$/g,Tqe=t=>_n(t)==="object";function Qc(t,e,n){if(Tqe(n)&&(n=n.__ref||n.$ref),n==null)return e;let r;const i=n.replace(kqe,"");if(t.remotes[i])return r=t.remotes[i],r&&r.$ref?Qc(t,e,r.$ref):r;if(t.ids[n])return r=Zp.get(e,t.ids[n]),r&&r.$ref?Qc(t,e,r.$ref):r;const o=Cqe(n);if(o.length===0)return e;if(o.length===1){if(n=o[0],t.remotes[n])return r=t.remotes[n],Qc(t,e,r.$ref);if(t.ids[n])return r=Zp.get(e,t.ids[n]),r&&r.$ref?Qc(t,e,r.$ref):r}if(o.length===2){const a=o[0];if(n=o[1],t.remotes[a])return t.remotes[a].getRef?t.remotes[a].getRef(n):Qc(t,t.remotes[a],n);if(t.ids[a])return Qc(t,Zp.get(e,t.ids[a]),n)}return r=Zp.get(e,t.ids[n]||n),r&&r.$ref?Qc(t,e,r.$ref):r}const FH="__compiled",RH="__ref",Aqe="getRef",Eqe="getRoot",Pqe=/(#|\/)+$/g;function Oqe(t,e,n=e,r=!1){if(!e||e[FH]!==void 0)return e;const i={ids:{},remotes:t.remotes},o=JSON.stringify(e),a=JSON.parse(o);if(Object.defineProperty(a,FH,{enumerable:!1,value:!0}),Object.defineProperty(a,Aqe,{enumerable:!1,value:Qc.bind(null,i,a)}),r===!1&&o.includes("$ref")===!1)return a;e!==n&&Object.defineProperty(a,"definitions",{enumerable:!1,value:Object.assign({},n.definitions,n.$defs,e.definitions,e.$defs)});const s={},l=()=>a;return NE(a,(u,c)=>{var f;if(u.id){if(u.id.startsWith("http")&&/(allOf|anyOf|oneOf)\/\d+$/.test(c)){const _=c.replace(/\/(allOf|anyOf|oneOf)\/\d+$/,""),v=Zp.get(a,_);u.id=(f=v.id)!==null&&f!==void 0?f:u.id}i.ids[u.id.replace(Pqe,"")]=c}c=`#${c}`.replace(/##+/,"#");const h=c.replace(/\/[^/]+$/,""),d=c.replace(/\/[^/]+\/[^/]+$/,""),g=s[h]||s[d],y=IT(g,u.id);s[c]=y,i.ids[y]==null&&(i.ids[y]=c),u.$ref&&!u[RH]&&(Object.defineProperty(u,RH,{enumerable:!1,value:IT(y,u.$ref)}),Object.defineProperty(u,Eqe,{enumerable:!1,value:l}))}),a}function gue(t,e,n,r=t.rootSchema,i="#"){r=t.resolveRef(r),n(r,e,i);const o=_n(e);o==="object"?Object.keys(e).forEach(a=>{const s=t.step(a,r,e,i),l=e[a];t.each(l,n,s,`${i}/${a}`)}):o==="array"&&e.forEach((a,s)=>{const l=t.step(s,r,e,i);t.each(a,n,l,`${i}/${s}`)})}var mue={exports:{}};(function(t){(function(e){e.exports.is_uri=r,e.exports.is_http_uri=i,e.exports.is_https_uri=o,e.exports.is_web_uri=a,e.exports.isUri=r,e.exports.isHttpUri=i,e.exports.isHttpsUri=o,e.exports.isWebUri=a;var n=function(s){var l=s.match(/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/);return l};function r(s){if(s&&!/[^a-z0-9\:\/\?\#\[\]\@\!\$\&\'\(\)\*\+\,\;\=\.\-\_\~\%]/i.test(s)&&!/%[^0-9a-f]/i.test(s)&&!/%[0-9a-f](:?[^0-9a-f]|$)/i.test(s)){var l=[],u="",c="",f="",h="",d="",g="";if(l=n(s),u=l[1],c=l[2],f=l[3],h=l[4],d=l[5],!!(u&&u.length&&f.length>=0)){if(c&&c.length){if(!(f.length===0||/^\//.test(f)))return}else if(/^\/\//.test(f))return;if(/^[a-z][a-z0-9\+\-\.]*$/.test(u.toLowerCase()))return g+=u+":",c&&c.length&&(g+="//"+c),g+=f,h&&h.length&&(g+="?"+h),d&&d.length&&(g+="#"+d),g}}}function i(s,l){if(r(s)){var u=[],c="",f="",h="",d="",g="",y="",_="";if(u=n(s),c=u[1],f=u[2],h=u[3],g=u[4],y=u[5],!!c){if(l){if(c.toLowerCase()!="https")return}else if(c.toLowerCase()!="http")return;if(f)return/:(\d+)$/.test(f)&&(d=f.match(/:(\d+)$/)[0],f=f.replace(/:\d+$/,"")),_+=c+":",_+="//"+f,d&&(_+=d),_+=h,g&&g.length&&(_+="?"+g),y&&y.length&&(_+="#"+y),_}}}function o(s){return i(s,!0)}function a(s){return i(s)||o(s)}})(t)})(mue);var Iqe=mue.exports;const VH=pr(Iqe),$qe=new RegExp("^([0-9]+)-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])[Tt]([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\\.[0-9]+)?(([Zz])|([\\+|\\-]([01][0-9]|2[0-3]):[0-5][0-9]))$"),Lqe=/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,Dqe=/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,Mqe=/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,Nqe=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,Fqe=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,Rqe=[0,31,28,31,30,31,30,31,31,30,31,30,31],Vqe=/^(?:\/(?:[^~/]|~0|~1)*)*$/,Bqe=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,zqe=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,jqe=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,vue={date:(t,e,n,r)=>{if(typeof n!="string")return;const i=n.match(Nqe);if(!i)return Hn.formatDateTimeError({value:n,pointer:r});const o=+i[1],a=+i[2],s=+i[3],l=o%4===0&&(o%100!==0||o%400===0);if(!(a>=1&&a<=12&&s>=1&&s<=(a==2&&l?29:Rqe[a])))return Hn.formatDateError({value:n,pointer:r})},"date-time":(t,e,n,r)=>{if(typeof n=="string")return n===""||$qe.test(n)?new Date(n).toString()==="Invalid Date"?Hn.formatDateTimeError({value:n,pointer:r}):void 0:Hn.formatDateTimeError({value:n,pointer:r})},email:(t,e,n,r)=>{if(typeof n!="string")return;if(n[0]==='"')return Hn.formatEmailError({value:n,pointer:r});const[i,o,...a]=n.split("@");if(!i||!o||a.length!==0||i.length>64||o.length>253)return Hn.formatEmailError({value:n,pointer:r});if(i[0]==="."||i.endsWith(".")||i.includes(".."))return Hn.formatEmailError({value:n,pointer:r});if(!/^[a-z0-9.-]+$/i.test(o)||!/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+$/i.test(i))return Hn.formatEmailError({value:n,pointer:r});if(!o.split(".").every(s=>/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(s)))return Hn.formatEmailError({value:n,pointer:r})},hostname:(t,e,n,r)=>{if(typeof n=="string"&&!(n===""||Mqe.test(n)))return Hn.formatHostnameError({value:n,pointer:r})},ipv4:(t,e,n,r)=>{if(!(typeof n!="string"||n==="")){if(n&&n[0]==="0")return Hn.formatIPV4LeadingZeroError({value:n,pointer:r});if(!(n.length<=15&&Lqe.test(n)))return Hn.formatIPV4Error({value:n,pointer:r})}},ipv6:(t,e,n,r)=>{if(!(typeof n!="string"||n==="")){if(n&&n[0]==="0")return Hn.formatIPV6LeadingZeroError({value:n,pointer:r});if(!(n.length<=45&&Dqe.test(n)))return Hn.formatIPV6Error({value:n,pointer:r})}},"json-pointer":(t,e,n,r)=>{if(!(typeof n!="string"||n==="")&&!Vqe.test(n))return Hn.formatJsonPointerError({value:n,pointer:r})},"relative-json-pointer":(t,e,n,r)=>{if(!(typeof n!="string"||n==="")&&!Bqe.test(n))return Hn.formatJsonPointerError({value:n,pointer:r})},regex:(t,e,n,r)=>{if(typeof n=="string"&&/\\Z$/.test(n)===!1){try{new RegExp(n);return}catch{}return Hn.formatRegExError({value:n,pointer:r})}if(!(typeof n=="object"||typeof n=="number"||Array.isArray(n)))return Hn.formatRegExError({value:n,pointer:r})},time:(t,e,n,r)=>{if(typeof n!="string")return;const i=n.match(Fqe);if(!i)return Hn.formatDateTimeError({value:n,pointer:r});const o=+i[1],a=+i[2],s=+i[3],l=!!i[5];if(!((o<=23&&a<=59&&s<=59||o==23&&a==59&&s==60)&&l))return Hn.formatTimeError({value:n,pointer:r})},uri:(t,e,n,r)=>{if(!(typeof n!="string"||n==="")&&!VH.isUri(n))return Hn.formatURIError({value:n,pointer:r})},"uri-reference":(t,e,n,r)=>{if(!(typeof n!="string"||n==="")&&!zqe.test(n))return Hn.formatURIReferenceError({value:n,pointer:r})},"uri-template":(t,e,n,r)=>{if(!(typeof n!="string"||n==="")&&!jqe.test(n))return Hn.formatURITemplateError({value:n,pointer:r})},url:(t,e,n,r)=>{if(!(n===""||VH.isWebUri(n)))return Hn.formatURLError({value:n,pointer:r})}},Uqe={};function yue(t,e,n,r=t.rootSchema){const i=b0.split(e);return r=t.resolveRef(r),bue(t,r,i,e,n)}function bue(t,e,n,r,i=Uqe){if(n.length===0)return t.resolveRef(e);const o=n.shift();return e=t.step(o,e,i,r),ps(e)?e:(i=i[o],bue(t,e,n,`${r}/${o}`,i))}function Wqe(t){switch(_n(t)){case"string":case"array":return t.length===0;case"null":case"undefined":return!0;case"object":return Object.keys(t).length===0;default:return!1}}const Hqe={addOptionalProps:!1,removeInvalidData:!1};let uf;function zI(t,e){const{$ref:n}=t;return n==null?!0:(uf[e]==null||uf[e][n]==null?0:uf[e][n])<H0.GET_TEMPLATE_RECURSION_LIMIT}function BH(t,e,n){const{$ref:r}=e;return r==null?e:(uf[n]=uf[n]||{},uf[n][r]=uf[n][r]||0,uf[n][r]+=1,t.resolveRef(e))}function Gqe(t,e){if(t==="string")return JSON.stringify(e);if(typeof e!="string")return null;try{if(e=JSON.parse(e),typeof e===t)return e}catch{}return null}function _ue(t,e,n,r){if(_n(e)!=="object")return Object.assign({pointer:r},e);if(zI(e,r)===!1&&n==null)return!1;let i=n8(BH(t,e,r));if(Array.isArray(e.anyOf)&&e.anyOf.length>0){if(zI(e.anyOf[0],`${r}/anyOf/0`)){const o=BH(t,e.anyOf[0],`${r}/anyOf/0`);i=Z5(i,o),i.pointer=e.anyOf[0].$ref||i.pointer}delete i.anyOf}if(Array.isArray(e.allOf)&&e.allOf.map((a,s)=>zI(a,`${r}/allOf/${s}`)).reduceRight((a,s)=>a&&s,!0)){const a=Jle(t,e);a&&(i=es(i,a))}return i.pointer=i.pointer||e.$ref||r,i}const zH=t=>t&&typeof t=="object";function qc(t,e,n,r,i){var o;if(n==null)throw new Error(`getTemplate: missing schema for data: ${JSON.stringify(e)}`);if(r==null)throw new Error("Missing pointer");let a=_ue(t,n,e,r);if(!zH(a))return;if(r=a.pointer,a!=null&&a.const)return a.const;if(Array.isArray(a.oneOf))if(Wqe(e)){const c=a.oneOf[0].type||a.type||a.const&&typeof a.const||_n(e);a={...a.oneOf[0],type:c}}else{const c=IE(t,e,a);if(ps(c)){if(e!=null&&i.removeInvalidData!==!0)return e;a=a.oneOf[0],e=void 0}else c.type=(o=c.type)!==null&&o!==void 0?o:a.type,a=c}if(!zH(a)||a.type==null)return;const s=Array.isArray(a.type)?qqe(a.type,e,a.default):a.type,l=_n(e);return e!=null&&l!==s&&!(l==="number"&&s==="integer")&&(e=Gqe(s,e)),jH[s]==null?i.removeInvalidData?void 0:e:jH[s](t,a,e,r,i)}function qqe(t,e,n){if(e==null){if(n!=null){const i=_n(n);if(t.includes(i))return i}return t[0]}const r=_n(e);return t.includes(r)?r:t[0]}const jH={null:(t,e,n)=>hb(e,n,null),string:(t,e,n)=>hb(e,n,""),number:(t,e,n)=>hb(e,n,0),integer:(t,e,n)=>hb(e,n,0),boolean:(t,e,n)=>hb(e,n,!1),object:(t,e,n,r,i)=>{var o;const a=e.default===void 0?{}:e.default,s={},l=(o=e.required)!==null&&o!==void 0?o:[];e.properties&&Object.keys(e.properties).forEach(f=>{const h=n==null||n[f]==null?a[f]:n[f],d=l.includes(f);(h!=null||d||i.addOptionalProps)&&(s[f]=qc(t,h,e.properties[f],`${r}/properties/${f}`,i))});let u=Qle(t,e,s);if(u){u=es(e,u),delete u.dependencies;const f=qc(t,n,u,`${r}/dependencies`,i);Object.assign(s,f)}n&&(i.removeInvalidData===!0&&(e.additionalProperties===!1||_n(e.additionalProperties)==="object")?_n(e.additionalProperties)==="object"&&Object.keys(n).forEach(f=>{s[f]==null&&t.isValid(n[f],e.additionalProperties)&&(s[f]=n[f])}):Object.keys(n).forEach(f=>s[f]==null&&(s[f]=n[f])));const c=DE(t,e,s);if(c){const f=qc(t,s,{type:"object",...c},r,i);Object.assign(s,f)}return s},array:(t,e,n,r,i)=>{var o,a;if(e.items==null)return n||[];const s=e.default===void 0?[]:e.default,l=n||s,u=e.minItems||0;if(Array.isArray(e.items)){for(let f=0,h=Math.max(u??0,(a=(o=e.items)===null||o===void 0?void 0:o.length)!==null&&a!==void 0?a:0);f<h;f+=1)l[f]=qc(t,l[f]==null?s[f]:l[f],e.items[f],`${r}/items/${f}`,i);return l}if(_n(e.items)!=="object")return l;const c=_ue(t,e.items,n,r);if(c===!1)return l;if(r=c.pointer||r,c.oneOf&&l.length===0){const f=c.oneOf[0];for(let h=0;h<u;h+=1)l[h]=qc(t,l[h]==null?s[h]:l[h],f,`${r}/oneOf/0`,i);return l}if(c.oneOf&&l.length>0){const f=Math.max(u,l.length);for(let h=0;h<f;h+=1){let d=l[h]==null?s[h]:l[h],g=IE(t,d,c);g==null||ps(g)?d!=null&&i.removeInvalidData!==!0?l[h]=d:(d=void 0,g=c.oneOf[0],l[h]=qc(t,d,g,`${r}/oneOf/${h}`,i)):l[h]=qc(t,d,g,`${r}/oneOf/${h}`,i)}return l}if(c.type){for(let f=0,h=Math.max(u,l.length);f<h;f+=1)l[f]=qc(t,l[f]==null?s[f]:l[f],c,`${r}/items`,i);return l}return l}};function hb(t,e,n){return e??(t.const?t.const:t.default===void 0&&Array.isArray(t.enum)?t.enum[0]:t.default===void 0?n:t.default)}const Sue=(t,e,n=t.rootSchema,r=Hqe)=>(uf={},qc(t,e,n,"#",r));function wue(t,e,n=t.rootSchema,r="#"){return t.validate(e,n,r).length===0}function UH(t){const e=[];let n=0;const r=t.length;for(;n<r;){const i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){const o=t.charCodeAt(n++);(o&64512)==56320?e.push(((i&1023)<<10)+(o&1023)+65536):(e.push(i),n--)}else e.push(i)}return e}const jI=H0.floatingPointPrecision,Yqe=Object.prototype.hasOwnProperty,WH=(t,e)=>!(t[e]===void 0||!Yqe.call(t,e)),xue={additionalProperties:(t,e,n,r)=>{if(e.additionalProperties===!0||e.additionalProperties==null||_n(e.patternProperties)==="object"&&e.additionalProperties===!1)return;const i=[];let o=Object.keys(n).filter(s=>H0.propertyBlacklist.includes(s)===!1);const a=Object.keys(e.properties||{});if(_n(e.patternProperties)==="object"){const s=Object.keys(e.patternProperties).map(l=>new RegExp(l));o=o.filter(l=>{for(let u=0;u<s.length;u+=1)if(s[u].test(l))return!1;return!0})}for(let s=0,l=o.length;s<l;s+=1){const u=o[s];if(a.indexOf(u)===-1){const c=fg(e.additionalProperties);if(c&&Array.isArray(e.additionalProperties.oneOf)){const f=t.resolveOneOf(n[u],e.additionalProperties,`${r}/${u}`);ps(f)?i.push(t.errors.additionalPropertiesError({schema:e.additionalProperties,property:o[s],properties:a,pointer:r,errors:f.data.errors})):i.push(...t.validate(n[u],f,r))}else c?i.push(...t.validate(n[u],e.additionalProperties,`${r}/${u}`)):i.push(t.errors.noAdditionalPropertiesError({property:o[s],properties:a,pointer:r}))}}return i},allOf:WGe,anyOf:YGe,dependencies:qGe,enum:(t,e,n,r)=>{const i=_n(n);if(i==="object"||i==="array"){const o=JSON.stringify(n);for(let a=0;a<e.enum.length;a+=1)if(JSON.stringify(e.enum[a])===o)return}else if(e.enum.includes(n))return;return t.errors.enumError({values:e.enum,value:n,pointer:r})},format:(t,e,n,r)=>{if(t.validateFormat[e.format])return t.validateFormat[e.format](t,e,n,r)},items:(t,e,n,r)=>{if(e.items===!1)return Array.isArray(n)&&n.length===0?void 0:t.errors.invalidDataError({pointer:r,value:n});const i=[];for(let o=0;o<n.length;o+=1){const a=n[o],s=t.step(o,e,n,r);if(ps(s))return[s];const l=t.validate(a,s,`${r}/${o}`);i.push(...l)}return i},maximum:(t,e,n,r)=>{if(!isNaN(e.maximum)){if(e.maximum&&e.maximum<n)return t.errors.maximumError({maximum:e.maximum,length:n,pointer:r});if(e.maximum&&e.exclusiveMaximum===!0&&e.maximum===n)return t.errors.maximumError({maximum:e.maximum,length:n,pointer:r})}},maxItems:(t,e,n,r)=>{if(!isNaN(e.maxItems)&&e.maxItems<n.length)return t.errors.maxItemsError({maximum:e.maxItems,length:n.length,pointer:r})},maxLength:(t,e,n,r)=>{if(isNaN(e.maxLength))return;const i=UH(n).length;if(e.maxLength<i)return t.errors.maxLengthError({maxLength:e.maxLength,length:i,pointer:r})},maxProperties:(t,e,n,r)=>{const i=Object.keys(n).length;if(isNaN(e.maxProperties)===!1&&e.maxProperties<i)return t.errors.maxPropertiesError({maxProperties:e.maxProperties,length:i,pointer:r})},minLength:(t,e,n,r)=>{if(isNaN(e.minLength))return;const i=UH(n).length;if(e.minLength>i)return e.minLength===1?t.errors.minLengthOneError({minLength:e.minLength,length:i,pointer:r}):t.errors.minLengthError({minLength:e.minLength,length:i,pointer:r})},minimum:(t,e,n,r)=>{if(!isNaN(e.minimum)){if(e.minimum>n)return t.errors.minimumError({minimum:e.minimum,length:n,pointer:r});if(e.exclusiveMinimum===!0&&e.minimum===n)return t.errors.minimumError({minimum:e.minimum,length:n,pointer:r})}},minItems:(t,e,n,r)=>{if(!isNaN(e.minItems)&&e.minItems>n.length)return e.minItems===1?t.errors.minItemsOneError({minItems:e.minItems,length:n.length,pointer:r}):t.errors.minItemsError({minItems:e.minItems,length:n.length,pointer:r})},minProperties:(t,e,n,r)=>{if(isNaN(e.minProperties))return;const i=Object.keys(n).length;if(e.minProperties>i)return t.errors.minPropertiesError({minProperties:e.minProperties,length:i,pointer:r})},multipleOf:(t,e,n,r)=>{if(!isNaN(e.multipleOf)&&n*jI%(e.multipleOf*jI)/jI!==0)return t.errors.multipleOfError({multipleOf:e.multipleOf,value:n,pointer:r})},not:(t,e,n,r)=>{const i=[];return t.validate(n,e.not,r).length===0&&i.push(t.errors.notError({value:n,not:e.not,pointer:r})),i},oneOf:HHe,pattern:(t,e,n,r)=>{if(new RegExp(e.pattern,"u").test(n)===!1)return t.errors.patternError({pattern:e.pattern,description:e.patternExample||e.pattern,received:n,pointer:r})},patternProperties:(t,e,n,r)=>{const i=e.properties||{},o=e.patternProperties;if(_n(o)!=="object")return;const a=[],s=Object.keys(n),l=Object.keys(o).map(u=>({regex:new RegExp(u),patternSchema:o[u]}));return s.forEach(u=>{let c=!1;for(let f=0,h=l.length;f<h;f+=1)if(l[f].regex.test(u)){c=!0;const d=t.validate(n[u],l[f].patternSchema,`${r}/${u}`);d&&d.length>0&&a.push(...d)}i[u]||c===!1&&e.additionalProperties===!1&&a.push(t.errors.patternPropertiesError({key:u,pointer:r,patterns:Object.keys(o).join(",")}))}),a},properties:(t,e,n,r)=>{const i=[],o=Object.keys(e.properties||{});for(let a=0;a<o.length;a+=1){const s=o[a];if(WH(n,s)){const l=t.step(s,e,n,r),u=t.validate(n[s],l,`${r}/${s}`);i.push(...u)}}return i},propertiesRequired:(t,e,n,r)=>{const i=[],o=Object.keys(e.properties||{});for(let a=0;a<o.length;a+=1){const s=o[a];if(n[s]===void 0)i.push(t.errors.requiredPropertyError({key:s,pointer:r}));else{const l=t.step(s,e,n,r),u=t.validate(n[s],l,`${r}/${s}`);i.push(...u)}}return i},required:(t,e,n,r)=>{if(Array.isArray(e.required)!==!1)return e.required.map(i=>{if(!WH(n,i))return t.errors.requiredPropertyError({key:i,pointer:r})})},requiredNotEmpty:(t,e,n,r)=>{if(Array.isArray(e.required)!==!1)return e.required.map(i=>{if(n[i]==null||n[i]==="")return t.errors.valueNotEmptyError({property:i,pointer:`${r}/${i}`})})},uniqueItems:(t,e,n,r)=>{if((Array.isArray(n)&&e.uniqueItems)===!1)return;const i=[],o=[];return n.forEach((a,s)=>{for(let l=s+1;l<n.length;l+=1)Xre(a,n[l])&&!i.includes(l)&&(o.push(t.errors.uniqueItemsError({pointer:`${r}/${l}`,duplicatePointer:`${r}/${s}`,arrayPointer:r,value:JSON.stringify(a)})),i.push(l))}),o}};function wa(t){const e={type:_n(t)};return e.type==="object"&&(e.properties={},Object.keys(t).forEach(n=>e.properties[n]=wa(t[n]))),e.type==="array"&&t.length===1?e.items=wa(t[0]):e.type==="array"&&(e.items=t.map(wa)),e}const HH={array:(t,e,n,r,i)=>{const o=r==null?void 0:r[e],a=_n(n.items);if(a==="object")return AT(t,n.items,o)||t.resolveRef(n.items);if(a==="array"){if(n.items[e]===!0)return wa(o);if(n.items[e]===!1)return Hn.invalidDataError({key:e,value:o,pointer:i});if(n.items[e])return t.resolveRef(n.items[e]);if(n.additionalItems===!1)return Hn.additionalItemsError({key:e,value:o,pointer:i});if(n.additionalItems===!0||n.additionalItems===void 0)return wa(o);if(_n(n.additionalItems)==="object")return n.additionalItems;throw new Error(`Invalid schema ${JSON.stringify(n,null,4)} for ${JSON.stringify(r,null,4)}`)}return n.additionalItems!==!1&&o?wa(o):new Error(`Invalid array schema for ${e} at ${i}`)},object:(t,e,n,r,i)=>{var o;n=AT(t,n,r);const a=(o=n==null?void 0:n.properties)===null||o===void 0?void 0:o[e];if(a!==void 0){if(a===!1)return Hn.forbiddenPropertyError({property:e,value:r,pointer:`${i}`});if(a===!0)return wa(r==null?void 0:r[e]);const u=t.resolveRef(a);if(ps(u))return u;if(u&&Array.isArray(u.oneOf))return t.resolveOneOf(r[e],u,`${i}/${e}`);if(u)return u}const{patternProperties:s}=n;if(_n(s)==="object"){let u;const c=Object.keys(s);for(let f=0,h=c.length;f<h;f+=1)if(u=new RegExp(c[f]),u.test(e))return s[c[f]]}const{additionalProperties:l}=n;return _n(l)==="object"?n.additionalProperties:r&&(l===void 0||l===!0)?wa(r[e]):Hn.unknownPropertyError({property:e,value:r,pointer:`${i}`})}};function Cue(t,e,n,r,i="#"){if(Array.isArray(n.type)){const s=_n(r);return n.type.includes(s)?HH[s](t,`${e}`,n,r,i):t.errors.typeError({value:r,pointer:i,expected:n.type,received:s})}const o=n.type||_n(r),a=HH[o];return a?a(t,`${e}`,n,r,i):new Error(`Unsupported schema type ${n.type} for key ${e}`)}function kue(t,e,n=t.rootSchema){var r;if(n.oneOf)return n.oneOf.map(o=>t.resolveRef(o));if(!((r=n.items)===null||r===void 0)&&r.oneOf)return n.items.oneOf.map(o=>t.resolveRef(o));const i=t.step(e,n,{},"#");return ps(i)?i:[i]}const Kqe={array:(t,e,n,r)=>t.typeKeywords.array.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),object:(t,e,n,r)=>t.typeKeywords.object.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),string:(t,e,n,r)=>t.typeKeywords.string.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),integer:(t,e,n,r)=>t.typeKeywords.number.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),number:(t,e,n,r)=>t.typeKeywords.number.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),boolean:(t,e,n,r)=>t.typeKeywords.boolean.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),null:(t,e,n,r)=>t.typeKeywords.null.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r))};function Xqe(t,e){const n=_n(t);return n==="number"&&(e==="integer"||Array.isArray(e)&&e.includes("integer"))?Number.isInteger(t)||isNaN(t)?"integer":"number":n}function Tue(t,e,n=t.rootSchema,r="#"){if(n=t.resolveRef(n),_n(n)==="boolean")return n?[]:[t.errors.invalidDataError({value:e,pointer:r})];if(ps(n))return[n];if(n.const!==void 0)return Xre(n.const,e)?[]:[t.errors.constError({value:e,expected:n.const,pointer:r})];const i=Xqe(e,n.type),o=n.type||i;return i!==o&&(!Array.isArray(o)||!o.includes(i))?[t.errors.typeError({received:i,expected:o,value:e,pointer:r})]:t.validateType[i]==null?[t.errors.invalidTypeError({receivedType:i,pointer:r})]:T_(t.validateType[i](t,n,e,r)).filter(TT)}const Jqe={typeKeywords:{array:["allOf","anyOf","enum","items","maxItems","minItems","not","oneOf","uniqueItems"],boolean:["enum","not","allOf","anyOf","oneOf"],object:["additionalProperties","dependencies","enum","format","minProperties","maxProperties","patternProperties","properties","required","not","oneOf","allOf","anyOf"],string:["allOf","anyOf","enum","format","maxLength","minLength","not","oneOf","pattern"],number:["allOf","anyOf","enum","format","maximum","minimum","multipleOf","not","oneOf"],null:["allOf","anyOf","enum","format","not","oneOf"]},validateKeyword:xue,validateType:Kqe,validateFormat:vue,errors:Hn,addRemoteSchema:iue,compileSchema:Oqe,createSchemaOf:wa,each:gue,eachSchema:NE,getChildSchemaSelection:kue,getSchema:yue,getTemplate:Sue,isValid:wue,resolveAllOf:Xle,resolveAnyOf:tue,resolveOneOf:Fle,resolveRef:Zle,step:Cue,validate:Tue,templateDefaultOptions:H0.templateDefaultOptions};class Aue extends rue{constructor(e,n={}){super(Z5(Jqe,n),e)}}const GH="__compiled",qH="__ref",Zqe="getRef",Qqe="getRoot",eYe=/(#|\/)+$/g;function tYe(t,e,n=e,r=!1){if(e===!0||e===!1||e===void 0||e[GH]!==void 0)return e;const i={ids:{},remotes:t.remotes},o=JSON.stringify(e),a=JSON.parse(o);if(Object.defineProperty(a,GH,{enumerable:!1,value:!0}),Object.defineProperty(a,Zqe,{enumerable:!1,value:Qc.bind(null,i,a)}),r===!1&&o.includes("$ref")===!1)return a;a!==n&&Object.defineProperty(a,"$defs",{enumerable:!0,value:Object.assign({},n.definitions,n.$defs,a.definitions,a.$defs)});const s={},l=()=>a;return NE(a,(u,c)=>{var f;if(u.$id){if(u.$id.startsWith("http")&&/(allOf|anyOf|oneOf)\/\d+$/.test(c)){const _=c.replace(/\/(allOf|anyOf|oneOf)\/\d+$/,""),v=Zp.get(a,_);u.$id=(f=v.$id)!==null&&f!==void 0?f:u.$id}i.ids[u.$id.replace(eYe,"")]=c}c=`#${c}`.replace(/##+/,"#");const h=c.replace(/\/[^/]+$/,""),d=c.replace(/\/[^/]+\/[^/]+$/,""),g=s[h]||s[d],y=IT(g,u.$id);s[c]=y,i.ids[y]==null&&(i.ids[y]=c),u.$ref&&!u[qH]&&(Object.defineProperty(u,qH,{enumerable:!1,value:IT(y,u.$ref)}),Object.defineProperty(u,Qqe,{enumerable:!1,value:l}))}),a}const nYe={...xue,contains:(t,e,n,r)=>{if(e.contains===!1)return t.errors.containsArrayError({pointer:r,value:n});if(e.contains===!0)return Array.isArray(n)&&n.length===0?t.errors.containsAnyError({pointer:r}):void 0;if(_n(e.contains)==="object"){for(let i=0;i<n.length;i+=1)if(t.isValid(n[i],e.contains))return;return t.errors.containsError({pointer:r,schema:JSON.stringify(e.contains)})}},exclusiveMaximum:(t,e,n,r)=>{if(!isNaN(e.exclusiveMaximum)&&e.exclusiveMaximum<=n)return t.errors.maximumError({maximum:e.exclusiveMaximum,length:n,pointer:r})},exclusiveMinimum:(t,e,n,r)=>{if(!isNaN(e.exclusiveMinimum)&&e.exclusiveMinimum>=n)return t.errors.minimumError({minimum:e.exclusiveMinimum,length:n,pointer:r})},if:jGe,maximum:(t,e,n,r)=>{if(!isNaN(e.maximum)&&e.maximum&&e.maximum<n)return t.errors.maximumError({maximum:e.maximum,length:n,pointer:r})},minimum:(t,e,n,r)=>{if(!isNaN(e.minimum)&&e.minimum>n)return t.errors.minimumError({minimum:e.minimum,length:n,pointer:r})},patternProperties:(t,e,n,r)=>{const i=e.properties||{},o=e.patternProperties;if(_n(o)!=="object")return;const a=[],s=Object.keys(n),l=Object.keys(o).map(u=>({regex:new RegExp(u),patternSchema:o[u]}));return s.forEach(u=>{let c=!1;for(let f=0,h=l.length;f<h;f+=1)if(l[f].regex.test(u)){if(c=!0,l[f].patternSchema===!1){a.push(t.errors.patternPropertiesError({key:u,pointer:r,patterns:Object.keys(o).join(",")}));return}const d=t.validate(n[u],l[f].patternSchema,`${r}/${u}`);d&&d.length>0&&a.push(...d)}i[u]||c===!1&&e.additionalProperties===!1&&a.push(t.errors.patternPropertiesError({key:u,pointer:r,patterns:Object.keys(o).join(",")}))}),a},propertyNames:(t,e,n,r)=>{if(e.propertyNames===!1)return Object.keys(n).length===0?void 0:t.errors.invalidPropertyNameError({property:Object.keys(n),pointer:r,value:n});if(e.propertyNames===!0||_n(e.propertyNames)!=="object")return;const i=[],o=Object.keys(n),a={...e.propertyNames,type:"string"};return o.forEach(s=>{const l=t.validate(s,a,`${r}/${s}`);l.length>0&&i.push(t.errors.invalidPropertyNameError({property:s,pointer:r,validationError:l[0],value:n[s]}))}),i}},rYe={array:(t,e,n,r)=>t.typeKeywords.array.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),object:(t,e,n,r)=>t.typeKeywords.object.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),string:(t,e,n,r)=>t.typeKeywords.string.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),integer:(t,e,n,r)=>t.typeKeywords.number.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),number:(t,e,n,r)=>t.typeKeywords.number.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),boolean:(t,e,n,r)=>t.typeKeywords.boolean.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),null:(t,e,n,r)=>t.typeKeywords.null.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r))},Eue={typeKeywords:{array:["allOf","anyOf","contains","enum","if","items","maxItems","minItems","not","oneOf","uniqueItems"],boolean:["allOf","anyOf","enum","not","oneOf"],object:["additionalProperties","allOf","anyOf","dependencies","enum","format","if","maxProperties","minProperties","not","oneOf","patternProperties","properties","propertyNames","required"],string:["allOf","anyOf","enum","format","if","maxLength","minLength","not","oneOf","pattern"],number:["allOf","anyOf","enum","exclusiveMaximum","exclusiveMinimum","format","if","maximum","minimum","multipleOf","not","oneOf"],null:["allOf","anyOf","enum","format","not","oneOf"]},validateKeyword:nYe,validateType:rYe,validateFormat:vue,errors:Hn,addRemoteSchema:iue,compileSchema:tYe,createSchemaOf:wa,each:gue,eachSchema:NE,getChildSchemaSelection:kue,getSchema:yue,getTemplate:Sue,isValid:wue,resolveAllOf:Xle,resolveAnyOf:tue,resolveOneOf:Fle,resolveRef:Zle,step:Cue,validate:Tue,templateDefaultOptions:H0.templateDefaultOptions};class iYe extends rue{constructor(e,n={}){super(Z5(Eue,n),e)}}({...Eue});function Pue(t,e){const n=[];for(let r=e;r!=null&&r.parent;r=r.parent)switch(r.parent.name){case Er.PROPERTY:{const i=r.parent.getChild(Er.PROPERTY_NAME);i&&n.unshift(Nb(t,i).replace(/[/~]/g,o=>o==="~"?"~0":"~1"));break}case Er.ARRAY:{if(LHe(r)){const i=Nle(r.parent,r);n.unshift(`${i}`)}break}}return n.unshift(""),n.join("/")}const Oue=(t,e,n=-1)=>Pue(t.doc,ji(t).resolve(e,n)),oYe=(t,e="json4")=>{const n=ji(t),r=new Map;return n.iterate({enter:i=>{var o,a,s,l,u,c,f,h;if(i.name==="PropertyName"){const d=Pue(t.doc,i.node),{from:g,to:y}=i.node;if(!(!((a=(o=i.node)===null||o===void 0?void 0:o.nextSibling)===null||a===void 0)&&a.node))return r.set(d,{keyFrom:g,keyTo:y}),!0;const _=e==="json4"?(l=(s=i.node)===null||s===void 0?void 0:s.nextSibling)===null||l===void 0?void 0:l.node:(h=(f=(c=(u=i.node)===null||u===void 0?void 0:u.nextSibling)===null||c===void 0?void 0:c.node)===null||f===void 0?void 0:f.nextSibling)===null||h===void 0?void 0:h.node;if(!_)return r.set(d,{keyFrom:g,keyTo:y}),!0;const{from:v,to:S}=_;return r.set(d,{keyFrom:g,keyTo:y,valueFrom:v,valueTo:S}),!0}}}),r},YH={array:(t,e,n,r,i)=>{const o=r==null?void 0:r[e],a=_n(n.items);if(a==="object")return AT(t,n.items,o)||t.resolveRef(n.items);if(a==="array"){if(n.items[e]===!0)return wa(o);if(n.items[e]===!1)return Hn.invalidDataError({key:e,value:o,pointer:i});if(n.items[e])return t.resolveRef(n.items[e]);if(n.additionalItems===!1)return Hn.additionalItemsError({key:e,value:o,pointer:i});if(n.additionalItems===!0||n.additionalItems===void 0)return wa(o);if(_n(n.additionalItems)==="object")return n.additionalItems;throw new Error(`Invalid schema ${JSON.stringify(n,null,4)} for ${JSON.stringify(r,null,4)}`)}return n.additionalItems!==!1&&o?wa(o):new Error(`Invalid array schema for ${e} at ${i}`)},object:(t,e,n,r,i)=>{var o;n=AT(t,n,r);const a=(o=n==null?void 0:n.properties)===null||o===void 0?void 0:o[e];if(a!==void 0){if(a===!1)return Hn.forbiddenPropertyError({property:e,value:r,pointer:`${i}`});if(a===!0)return wa(r==null?void 0:r[e]);const u=t.resolveRef(a);if(ps(u))return u;if(u&&Array.isArray(u.oneOf))return r===void 0||r[e]===void 0?u:t.resolveOneOf(r[e],u,`${i}/${e}`);if(u)return u}const{patternProperties:s}=n;if(_n(s)==="object"){let u;const c=Object.keys(s);for(let f=0,h=c.length;f<h;f+=1)if(u=new RegExp(c[f]),u.test(e))return s[c[f]]}const{additionalProperties:l}=n;return _n(l)==="object"?n.additionalProperties:r&&(l===void 0||l===!0)?wa(r[e]):Hn.unknownPropertyError({property:e,value:r,pointer:`${i}`})}};function aYe(t,e,n,r,i="#"){if(Array.isArray(n.type)){const s=_n(r);return n.type.includes(s)?YH[s](t,`${e}`,n,r,i):t.errors.typeError({value:r,pointer:i,expected:n.type,received:s})}const o=n.type||_n(r),a=YH[o];return a?a(t,`${e}`,n,r,i):new Error(`Unsupported schema type ${n.type} for key ${e}`)}const sYe={};function $T(t,e,n,r=t.rootSchema){const i=b0.split(e);return r=t.resolveRef(r),Iue(t,r,i,e,n)}function Iue(t,e,n,r,i=sYe){if(n.length===0)return t.resolveRef(e);const o=n.shift();return e=aYe(t,o,e,i,r),ps(e)?e:(i=i[o],Iue(t,e,n,`${r}/${o}`,i))}function lYe(t,e){return t.startsWith('"')?`"${e}"`:t.startsWith("'")?`'${e}'`:e}class uYe{constructor(){this.completions=new Map,this.reservedKeys=new Set}reserve(e){this.reservedKeys.add(e)}add(e){this.reservedKeys.has(e.label)||this.completions.set(e.label,e)}}class cYe{constructor(e,n){this.schema=e,this.opts=n}doComplete(e){var n,r;const i={from:e.pos,to:e.pos,options:[],filter:!1},o=e.state.doc.sliceString(0);let a=AH(e.state,e.pos);const s=e.state.sliceDoc(a.from,e.pos).replace(/^("|')/,"");if(!(I2(a)||$C(a))&&!e.explicit)return i;const l=Nb(e.state.doc,a),u=Nb(e.state.doc,a,!1);if(a&&(I2(a)||$C(a)))i.from=a.from,i.to=a.to;else{const h=e.matchBefore(/[A-Za-z0-9._]*/),d=e.pos-l.length;IC.log("xxx","overwriteStart after",d,"ctx.pos",e.pos,"word",h,"currentWord",l,"=>",o[d-1],"..",o[d],"..",o),i.from=a.name===Er.INVALID?(n=h==null?void 0:h.from)!==null&&n!==void 0?n:e.pos:d,i.to=e.pos}const c=new uYe;let f=!0;if($C(a)){const h=a.parent;if(h){const d=EH(h);f=!d||d.name===Er.INVALID&&d.from-d.to===0,IC.log("xxx","addValue",f,EH(h),a),a=(r=[h,h.parent].find(g=>(g==null?void 0:g.name)===Er.OBJECT))!==null&&r!==void 0?r:null}}if(a&&(a.name===Er.OBJECT||a.name===Er.JSON_TEXT)&&$C(AH(e.state,e.pos))){if(a.from===e.pos)return i;this.getPropertyCompletions(this.schema,e,a,c,f,u)}else{const h={};this.getValueCompletions(this.schema,e,h,c)}return i.options=Array.from(c.completions.values()).filter(h=>PD(h.label).startsWith(s)),IC.log("xxx","result",i,"prefix",s,"collector.completions",c.completions,"reservedKeys",c.reservedKeys),i}applySnippetCompletion(e){return dAe(typeof e.apply!="string"?e.label:e.apply,e)}getPropertyCompletions(e,n,r,i,o,a){r.getChildren(Er.PROPERTY).forEach(u=>{const c=Nb(n.state.doc,u.getChild(Er.PROPERTY_NAME));i.reserve(PD(c))}),this.getSchemas(e,n).forEach(u=>{if(typeof u!="object")return;const c=u.properties;c&&Object.entries(c).forEach(([h,d])=>{var g,y;if(typeof d=="object"){const _=(g=d.description)!==null&&g!==void 0?g:"",v=(y=d.type)!==null&&y!==void 0?y:"",S=Array.isArray(v)?v.toString():v,C={label:h,apply:this.getInsertTextForProperty(h,o,a,d),type:"property",detail:S,info:_};i.add(this.applySnippetCompletion(C))}});const f=u.propertyNames;if(typeof f=="object"&&(f.enum&&f.enum.forEach(h=>{const d=h==null?void 0:h.toString();if(d){const g={label:d,apply:this.getInsertTextForProperty(d,o,a),type:"property"};i.add(this.applySnippetCompletion(g))}}),f.const)){const h=f.const.toString(),d={label:h,apply:this.getInsertTextForProperty(h,o,a),type:"property"};i.add(this.applySnippetCompletion(d))}})}getInsertTextForProperty(e,n,r,i){var o;i=i&&this.expandSchemaProperty(i,this.schema);const a=((o=this.opts)===null||o===void 0?void 0:o.mode)==="json5";let s=a?lYe(r,e):`"${e}"`;if(!n)return s;s+=": ";let l,u=0;if(typeof i=="object"){if(typeof i.default<"u")l||(l=this.getInsertTextForGuessedValue(i.default,"")),u++;else if(i.enum&&(!l&&i.enum.length===1&&(l=this.getInsertTextForGuessedValue(i.enum[0],"")),u+=i.enum.length),typeof i.const<"u"&&(l||(l=this.getInsertTextForGuessedValue(i.const,"")),u++),Array.isArray(i.examples)&&i.examples.length&&(l||(l=this.getInsertTextForGuessedValue(i.examples[0],"")),u+=i.examples.length),l===void 0&&u===0){let c=Array.isArray(i.type)?i.type[0]:i.type;switch(c||(i.properties?c="object":i.items&&(c="array")),c){case"boolean":l="#{}";break;case"string":l=a?"'#{}'":'"#{}"';break;case"object":l="{#{}}";break;case"array":l="[#{}]";break;case"number":case"integer":l="#{0}";break;case"null":l="#{null}";break;default:l="#{}";break}}}return(!l||u>1)&&(l="#{}"),s+l}getInsertTextForGuessedValue(e,n=""){switch(typeof e){case"object":return e===null?"${null}"+n:this.getInsertTextForValue(e,n);case"string":{let r=JSON.stringify(e);return r=r.substr(1,r.length-2),r=this.getInsertTextForPlainText(r),'"${'+r+'}"'+n}case"number":case"boolean":return"${"+JSON.stringify(e)+"}"+n}return this.getInsertTextForValue(e,n)}getInsertTextForPlainText(e){return e.replace(/[\\$}]/g,"\\$&")}getInsertTextForValue(e,n){const r=JSON.stringify(e,null,"	");return r==="{}"?"{#{}}"+n:r==="[]"?"[#{}]"+n:this.getInsertTextForPlainText(r+n)}getValueCompletions(e,n,r,i){let o=ji(n.state).resolveInner(n.pos,-1),a=null,s;if(o&&I2(o)&&(a=o,o=o.parent),!o){this.addSchemaValueCompletions(e,r,i);return}if(o.name===Er.PROPERTY){const l=o.getChild(Er.PROPERTY_NAME);l&&(s=Nb(n.state.doc,l),o=o.parent)}if(o&&(s!==void 0||o.name===Er.ARRAY)){const l=this.getSchemas(e,n);for(const u of l){if(typeof u!="object")return;if(o.name===Er.ARRAY&&u.items){let c=i;if(u.uniqueItems&&(c=Object.assign(Object.assign({},c),{add(f){c.completions.has(f.label)||i.add(f)},reserve(f){i.reserve(f)}})),Array.isArray(u.items)){let f=0;if(a){const d=Nle(o,a);d>=0&&(f=d)}const h=u.items[f];h&&this.addSchemaValueCompletions(h,r,c)}else this.addSchemaValueCompletions(u.items,r,c)}if(s!==void 0){let c=!1;if(u.properties){const f=u.properties[s];f&&(c=!0,this.addSchemaValueCompletions(f,r,i))}if(u.patternProperties&&!c)for(const f of Object.keys(u.patternProperties)){const h=this.extendedRegExp(f);if(h!=null&&h.test(s)){c=!0;const d=u.patternProperties[f];d&&this.addSchemaValueCompletions(d,r,i)}}if(u.additionalProperties&&!c){const f=u.additionalProperties;this.addSchemaValueCompletions(f,r,i)}}r.boolean&&(this.addBooleanValueCompletion(!0,i),this.addBooleanValueCompletion(!1,i)),r.null&&this.addNullValueCompletion(i)}}}addSchemaValueCompletions(e,n,r){typeof e=="object"&&(this.addEnumValueCompletions(e,r),this.addDefaultValueCompletions(e,r),this.collectTypes(e,n),Array.isArray(e.allOf)&&e.allOf.forEach(i=>this.addSchemaValueCompletions(i,n,r)),Array.isArray(e.anyOf)&&e.anyOf.forEach(i=>this.addSchemaValueCompletions(i,n,r)),Array.isArray(e.oneOf)&&e.oneOf.forEach(i=>this.addSchemaValueCompletions(i,n,r)))}addDefaultValueCompletions(e,n,r=0){let i=!1;if(typeof e.default<"u"){let o=e.type,a=e.default;for(let l=r;l>0;l--)a=[a],o="array";const s={type:o==null?void 0:o.toString(),label:this.getLabelForValue(a),detail:"Default value"};n.add(s),i=!0}Array.isArray(e.examples)&&e.examples.forEach(o=>{let a=e.type,s=o;for(let l=r;l>0;l--)s=[s],a="array";n.add({type:a==null?void 0:a.toString(),label:this.getLabelForValue(s)}),i=!0}),!i&&typeof e.items=="object"&&!Array.isArray(e.items)&&r<5&&this.addDefaultValueCompletions(e.items,n,r+1)}addEnumValueCompletions(e,n){var r,i;if(typeof e.const<"u"&&n.add({type:(r=e.type)===null||r===void 0?void 0:r.toString(),label:this.getLabelForValue(e.const),info:e.description}),Array.isArray(e.enum))for(let o=0,a=e.enum.length;o<a;o++){const s=e.enum[o];n.add({type:(i=e.type)===null||i===void 0?void 0:i.toString(),label:this.getLabelForValue(s),info:e.description})}}addBooleanValueCompletion(e,n){n.add({type:"boolean",label:e?"true":"false"})}addNullValueCompletion(e){e.add({type:"null",label:"null"})}collectTypes(e,n){if(Array.isArray(e.enum)||typeof e.const<"u")return;const r=e.type;Array.isArray(r)?r.forEach(i=>n[i]=!0):r&&(n[r]=!0)}getSchemas(e,n){const r=new iYe(this.schema);let i=Oue(n.state,n.pos),o=$T(r,i);return(!o||o.name==="UnknownPropertyError"||o.enum||o.type==="undefined")&&(i=i.replace(/\/[^/]*$/,"/"),o=$T(r,i)),IC.log("xxx","pointer..",JSON.stringify(i)),!i||i==="/"?[e]:this.isJsonError(o)?[]:Array.isArray(o.allOf)?[o,...o.allOf.map(a=>this.expandSchemaProperty(a,e))]:Array.isArray(o.oneOf)?[o,...o.oneOf.map(a=>this.expandSchemaProperty(a,e))]:Array.isArray(o.anyOf)?[o,...o.anyOf.map(a=>this.expandSchemaProperty(a,e))]:[o]}isJsonError(e){return e.type==="error"}expandSchemaProperty(e,n){if(typeof e=="object"&&e.$ref){const r=this.getReferenceSchema(n,e.$ref);if(typeof r=="object"){const i=Object.assign(Object.assign({},e),r);return Reflect.deleteProperty(i,"$ref"),i}}return e}getReferenceSchema(e,n){const r=n.split("/");let i=e;return r.forEach(o=>{if(o){if(o==="#"){i=e;return}typeof i=="object"&&(i=i[o])}}),i}getLabelForValue(e){return JSON.stringify(e)}getValueFromLabel(e){return JSON.parse(e)}extendedRegExp(e){let n="";e.startsWith("(?i)")&&(e=e.substring(4),n="i");try{return new RegExp(e,n+"u")}catch{try{return new RegExp(e,n)}catch{return}}}}function fYe(t,e={}){const n=new cYe(t,e);return function(i){return n.doComplete(i)}}const LT=(t,e)=>{const n=t.length>2;let r=t.map((i,o)=>{const a="`"+(e?JSON.stringify(e(i)):i)+"`";return o===t.length-1?"or "+a:a});return n?r.join(", "):r.join(" ")};let hYe=class MD{constructor(e,n,r,i,o,a,s,l,u,c=0,f){this.p=e,this.stack=n,this.state=r,this.reducePos=i,this.pos=o,this.score=a,this.buffer=s,this.bufferBase=l,this.curContext=u,this.lookAhead=c,this.parent=f}toString(){return`[${this.stack.filter((e,n)=>n%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,n,r=0){let i=e.parser.context;return new MD(e,[],n,r,r,0,[],0,i?new KH(i,i.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,n){this.stack.push(this.state,n,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var n;let r=e>>19,i=e&65535,{parser:o}=this.p,a=o.dynamicPrecedence(i);if(a&&(this.score+=a),r==0){this.pushState(o.getGoto(this.state,i,!0),this.reducePos),i<o.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,4,!0),this.reduceContext(i,this.reducePos);return}let s=this.stack.length-(r-1)*3-(e&262144?6:0),l=s?this.stack[s-2]:this.p.ranges[0].from,u=this.reducePos-l;u>=2e3&&!(!((n=this.p.parser.nodeSet.types[i])===null||n===void 0)&&n.isAnonymous)&&(l==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=u):this.p.lastBigReductionSize<u&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=l,this.p.lastBigReductionSize=u));let c=s?this.stack[s-1]:0,f=this.bufferBase+this.buffer.length-c;if(i<o.minRepeatTerm||e&131072){let h=o.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,l,h,f+4,!0)}if(e&262144)this.state=this.stack[s];else{let h=this.stack[s-3];this.state=o.getGoto(h,i,!0)}for(;this.stack.length>s;)this.stack.pop();this.reduceContext(i,l)}storeNode(e,n,r,i=4,o=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let a=this,s=this.buffer.length;if(s==0&&a.parent&&(s=a.bufferBase-a.parent.bufferBase,a=a.parent),s>0&&a.buffer[s-4]==0&&a.buffer[s-1]>-1){if(n==r)return;if(a.buffer[s-2]>=n){a.buffer[s-2]=r;return}}}if(!o||this.pos==r)this.buffer.push(e,n,r,i);else{let a=this.buffer.length;if(a>0&&this.buffer[a-4]!=0)for(;a>0&&this.buffer[a-2]>r;)this.buffer[a]=this.buffer[a-4],this.buffer[a+1]=this.buffer[a-3],this.buffer[a+2]=this.buffer[a-2],this.buffer[a+3]=this.buffer[a-1],a-=4,i>4&&(i-=4);this.buffer[a]=e,this.buffer[a+1]=n,this.buffer[a+2]=r,this.buffer[a+3]=i}}shift(e,n,r){let i=this.pos;if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=r,this.shiftContext(n,i),n<=this.p.parser.maxNode&&this.buffer.push(n,i,r,4);else{let o=e,{parser:a}=this.p;(r>this.pos||n<=a.maxNode)&&(this.pos=r,a.stateFlag(o,1)||(this.reducePos=r)),this.pushState(o,i),this.shiftContext(n,i),n<=a.maxNode&&this.buffer.push(n,i,r,4)}}apply(e,n,r){e&65536?this.reduce(e):this.shift(e,n,r)}useNode(e,n){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(n,i),this.buffer.push(r,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,n=e.buffer.length;for(;n>0&&e.buffer[n-2]>e.reducePos;)n-=4;let r=e.buffer.slice(n),i=e.bufferBase+n;for(;e&&i==e.bufferBase;)e=e.parent;return new MD(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,i,this.curContext,this.lookAhead,e)}recoverByDelete(e,n){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,n,4),this.storeNode(0,this.pos,n,r?8:4),this.pos=this.reducePos=n,this.score-=190}canShift(e){for(let n=new dYe(this);;){let r=this.p.parser.stateSlot(n.state,4)||this.p.parser.hasAction(n.state,e);if(r==0)return!1;if(!(r&65536))return!0;n.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let n=this.p.parser.nextStates(this.state);if(n.length>8||this.stack.length>=120){let i=[];for(let o=0,a;o<n.length;o+=2)(a=n[o+1])!=this.state&&this.p.parser.hasAction(a,e)&&i.push(n[o],a);if(this.stack.length<120)for(let o=0;i.length<8&&o<n.length;o+=2){let a=n[o+1];i.some((s,l)=>l&1&&s==a)||i.push(n[o],a)}n=i}let r=[];for(let i=0;i<n.length&&r.length<4;i+=2){let o=n[i+1];if(o==this.state)continue;let a=this.split();a.pushState(o,this.pos),a.storeNode(0,a.pos,a.pos,4,!0),a.shiftContext(n[i],this.pos),a.score-=200,r.push(a)}return r}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);if(!(e&65536))return!1;let{parser:n}=this.p;if(!n.validAction(this.state,e)){let r=e>>19,i=e&65535,o=this.stack.length-r*3;if(o<0||n.getGoto(this.stack[o],i,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let n=0;n<this.stack.length;n+=3)if(this.stack[n]!=e.stack[n])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(n)))}reduceContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(n)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(e){if(e!=this.curContext.context){let n=new KH(this.curContext.tracker,e);n.hash!=this.curContext.hash&&this.emitContext(),this.curContext=n}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}};class KH{constructor(e,n){this.tracker=e,this.context=n,this.hash=e.strict?e.hash(n):0}}var XH;(function(t){t[t.Insert=200]="Insert",t[t.Delete=190]="Delete",t[t.Reduce=100]="Reduce",t[t.MaxNext=4]="MaxNext",t[t.MaxInsertStackDepth=300]="MaxInsertStackDepth",t[t.DampenInsertStackDepth=120]="DampenInsertStackDepth",t[t.MinBigReduction=2e3]="MinBigReduction"})(XH||(XH={}));class dYe{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let n=e&65535,r=e>>19;r==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(r-1)*3;let i=this.start.p.parser.getGoto(this.stack[this.base-3],n,!0);this.state=i}}class DT{constructor(e,n,r){this.stack=e,this.pos=n,this.index=r,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,n=e.bufferBase+e.buffer.length){return new DT(e,n,n-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new DT(this.stack,this.pos,this.index)}}function FC(t,e=Uint16Array){if(typeof t!="string")return t;let n=null;for(let r=0,i=0;r<t.length;){let o=0;for(;;){let a=t.charCodeAt(r++),s=!1;if(a==126){o=65535;break}a>=92&&a--,a>=34&&a--;let l=a-32;if(l>=46&&(l-=46,s=!0),o+=l,s)break;o*=46}n?n[i++]=o:n=new e(o)}return n}class L2{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const JH=new L2;class pYe{constructor(e,n){this.input=e,this.ranges=n,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=JH,this.rangeIndex=0,this.pos=this.chunkPos=n[0].from,this.range=n[0],this.end=n[n.length-1].to,this.readNext()}resolveOffset(e,n){let r=this.range,i=this.rangeIndex,o=this.pos+e;for(;o<r.from;){if(!i)return null;let a=this.ranges[--i];o-=r.from-a.to,r=a}for(;n<0?o>r.to:o>=r.to;){if(i==this.ranges.length-1)return null;let a=this.ranges[++i];o+=a.from-r.to,r=a}return o}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let n of this.ranges)if(n.to>e)return Math.max(e,n.from);return this.end}peek(e){let n=this.chunkOff+e,r,i;if(n>=0&&n<this.chunk.length)r=this.pos+e,i=this.chunk.charCodeAt(n);else{let o=this.resolveOffset(e,1);if(o==null)return-1;if(r=o,r>=this.chunk2Pos&&r<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(r-this.chunk2Pos);else{let a=this.rangeIndex,s=this.range;for(;s.to<=r;)s=this.ranges[++a];this.chunk2=this.input.chunk(this.chunk2Pos=r),r+this.chunk2.length>s.to&&(this.chunk2=this.chunk2.slice(0,s.to-r)),i=this.chunk2.charCodeAt(0)}}return r>=this.token.lookAhead&&(this.token.lookAhead=r+1),i}acceptToken(e,n=0){let r=n?this.resolveOffset(n,-1):this.pos;if(r==null||r<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=r}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:n}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=n,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),n=this.pos+e.length;this.chunk=n>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,n){if(n?(this.token=n,n.start=e,n.lookAhead=e+1,n.value=n.extended=-1):this.token=JH,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,n){if(e>=this.chunkPos&&n<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,n-this.chunkPos);if(e>=this.chunk2Pos&&n<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,n-this.chunk2Pos);if(e>=this.range.from&&n<=this.range.to)return this.input.read(e,n);let r="";for(let i of this.ranges){if(i.from>=n)break;i.to>e&&(r+=this.input.read(Math.max(i.from,e),Math.min(i.to,n)))}return r}}class Wv{constructor(e,n){this.data=e,this.id=n}token(e,n){let{parser:r}=n.p;gYe(this.data,e,n,this.id,r.data,r.tokenPrecTable)}}Wv.prototype.contextual=Wv.prototype.fallback=Wv.prototype.extend=!1;Wv.prototype.fallback=Wv.prototype.extend=!1;function gYe(t,e,n,r,i,o){let a=0,s=1<<r,{dialect:l}=n.p.parser;e:for(;s&t[a];){let u=t[a+1];for(let d=a+3;d<u;d+=2)if((t[d+1]&s)>0){let g=t[d];if(l.allows(g)&&(e.token.value==-1||e.token.value==g||mYe(g,e.token.value,i,o))){e.acceptToken(g);break}}let c=e.next,f=0,h=t[a+2];if(e.next<0&&h>f&&t[u+h*3-3]==65535&&t[u+h*3-3]==65535){a=t[u+h*3-1];continue e}for(;f<h;){let d=f+h>>1,g=u+d+(d<<1),y=t[g],_=t[g+1]||65536;if(c<y)h=d;else if(c>=_)f=d+1;else{a=t[g+2],e.advance();continue e}}break}}function ZH(t,e,n){for(let r=e,i;(i=t[r])!=65535;r++)if(i==n)return r-e;return-1}function mYe(t,e,n,r){let i=ZH(n,r,e);return i<0||ZH(n,r,t)<i}const Xl=typeof process<"u"&&process.env&&/\bparse\b/.test({}.LOG);let UI=null;var QH;(function(t){t[t.Margin=25]="Margin"})(QH||(QH={}));function eG(t,e,n){let r=t.cursor(so.IncludeAnonymous);for(r.moveTo(e);;)if(!(n<0?r.childBefore(e):r.childAfter(e)))for(;;){if((n<0?r.to<e:r.from>e)&&!r.type.isError)return n<0?Math.max(0,Math.min(r.to-1,e-25)):Math.min(t.length,Math.max(r.from+1,e+25));if(n<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return n<0?0:t.length}}class vYe{constructor(e,n){this.fragments=e,this.nodeSet=n,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?eG(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?eG(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let n=this.trees.length-1;if(n<0)return this.nextFragment(),null;let r=this.trees[n],i=this.index[n];if(i==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let o=r.children[i],a=this.start[n]+r.positions[i];if(a>e)return this.nextStart=a,null;if(o instanceof Ao){if(a==e){if(a<this.safeFrom)return null;let s=a+o.length;if(s<=this.safeTo){let l=o.prop(Pn.lookAhead);if(!l||s+l<this.fragment.to)return o}}this.index[n]++,a+o.length>=Math.max(this.safeFrom,e)&&(this.trees.push(o),this.start.push(a),this.index.push(0))}else this.index[n]++,this.nextStart=a+o.length}}}class yYe{constructor(e,n){this.stream=n,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(r=>new L2)}getActions(e){let n=0,r=null,{parser:i}=e.p,{tokenizers:o}=i,a=i.stateSlot(e.state,3),s=e.curContext?e.curContext.hash:0,l=0;for(let u=0;u<o.length;u++){if(!(1<<u&a))continue;let c=o[u],f=this.tokens[u];if(!(r&&!c.fallback)&&((c.contextual||f.start!=e.pos||f.mask!=a||f.context!=s)&&(this.updateCachedToken(f,c,e),f.mask=a,f.context=s),f.lookAhead>f.end+25&&(l=Math.max(f.lookAhead,l)),f.value!=0)){let h=n;if(f.extended>-1&&(n=this.addActions(e,f.extended,f.end,n)),n=this.addActions(e,f.value,f.end,n),!c.extend&&(r=f,n>h))break}}for(;this.actions.length>n;)this.actions.pop();return l&&e.setLookAhead(l),!r&&e.pos==this.stream.end&&(r=new L2,r.value=e.p.parser.eofTerm,r.start=r.end=e.pos,n=this.addActions(e,r.value,r.end,n)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let n=new L2,{pos:r,p:i}=e;return n.start=r,n.end=Math.min(r+1,i.stream.end),n.value=r==i.stream.end?i.parser.eofTerm:0,n}updateCachedToken(e,n,r){let i=this.stream.clipPos(r.pos);if(n.token(this.stream.reset(i,e),r),e.value>-1){let{parser:o}=r.p;for(let a=0;a<o.specialized.length;a++)if(o.specialized[a]==e.value){let s=o.specializers[a](this.stream.read(e.start,e.end),r);if(s>=0&&r.p.parser.dialect.allows(s>>1)){s&1?e.extended=s>>1:e.value=s>>1;break}}}else e.value=0,e.end=this.stream.clipPos(i+1)}putAction(e,n,r,i){for(let o=0;o<i;o+=3)if(this.actions[o]==e)return i;return this.actions[i++]=e,this.actions[i++]=n,this.actions[i++]=r,i}addActions(e,n,r,i){let{state:o}=e,{parser:a}=e.p,{data:s}=a;for(let l=0;l<2;l++)for(let u=a.stateSlot(o,l?2:1);;u+=3){if(s[u]==65535)if(s[u+1]==1)u=ef(s,u+2);else{i==0&&s[u+1]==2&&(i=this.putAction(ef(s,u+2),n,r,i));break}s[u]==n&&(i=this.putAction(ef(s,u+1),n,r,i))}return i}}var tG;(function(t){t[t.Distance=5]="Distance",t[t.MaxRemainingPerStep=3]="MaxRemainingPerStep",t[t.MinBufferLengthPrune=500]="MinBufferLengthPrune",t[t.ForceReduceLimit=10]="ForceReduceLimit",t[t.CutDepth=15e3]="CutDepth",t[t.CutTo=9e3]="CutTo",t[t.MaxLeftAssociativeReductionCount=300]="MaxLeftAssociativeReductionCount",t[t.MaxStackCount=12]="MaxStackCount"})(tG||(tG={}));class bYe{constructor(e,n,r,i){this.parser=e,this.input=n,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new pYe(n,i),this.tokens=new yYe(e,this.stream),this.topTerm=e.top[1];let{from:o}=i[0];this.stacks=[hYe.start(this,e.top[0],o)],this.fragments=r.length&&this.stream.end-o>e.bufferLength*4?new vYe(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,n=this.minStackPos,r=this.stacks=[],i,o;if(this.bigReductionCount>300&&e.length==1){let[a]=e;for(;a.forceReduce()&&a.stack.length&&a.stack[a.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let a=0;a<e.length;a++){let s=e[a];for(;;){if(this.tokens.mainToken=null,s.pos>n)r.push(s);else{if(this.advanceStack(s,r,e))continue;{i||(i=[],o=[]),i.push(s);let l=this.tokens.getMainToken(s);o.push(l.value,l.end)}}break}}if(!r.length){let a=i&&SYe(i);if(a)return this.stackToTree(a);if(this.parser.strict)throw Xl&&i&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+n);this.recovering||(this.recovering=5)}if(this.recovering&&i){let a=this.stoppedAt!=null&&i[0].pos>this.stoppedAt?i[0]:this.runRecovery(i,o,r);if(a)return this.stackToTree(a.forceAll())}if(this.recovering){let a=this.recovering==1?1:this.recovering*3;if(r.length>a)for(r.sort((s,l)=>l.score-s.score);r.length>a;)r.pop();r.some(s=>s.reducePos>n)&&this.recovering--}else if(r.length>1){e:for(let a=0;a<r.length-1;a++){let s=r[a];for(let l=a+1;l<r.length;l++){let u=r[l];if(s.sameState(u)||s.buffer.length>500&&u.buffer.length>500)if((s.score-u.score||s.buffer.length-u.buffer.length)>0)r.splice(l--,1);else{r.splice(a--,1);continue e}}}r.length>12&&r.splice(12,r.length-12)}this.minStackPos=r[0].pos;for(let a=1;a<r.length;a++)r[a].pos<this.minStackPos&&(this.minStackPos=r[a].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,n,r){let i=e.pos,{parser:o}=this,a=Xl?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&i>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let u=e.curContext&&e.curContext.tracker.strict,c=u?e.curContext.hash:0;for(let f=this.fragments.nodeAt(i);f;){let h=this.parser.nodeSet.types[f.type.id]==f.type?o.getGoto(e.state,f.type.id):-1;if(h>-1&&f.length&&(!u||(f.prop(Pn.contextHash)||0)==c))return e.useNode(f,h),Xl&&console.log(a+this.stackID(e)+` (via reuse of ${o.getName(f.type.id)})`),!0;if(!(f instanceof Ao)||f.children.length==0||f.positions[0]>0)break;let d=f.children[0];if(d instanceof Ao&&f.positions[0]==0)f=d;else break}}let s=o.stateSlot(e.state,4);if(s>0)return e.reduce(s),Xl&&console.log(a+this.stackID(e)+` (via always-reduce ${o.getName(s&65535)})`),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let l=this.tokens.getActions(e);for(let u=0;u<l.length;){let c=l[u++],f=l[u++],h=l[u++],d=u==l.length||!r,g=d?e:e.split();if(g.apply(c,f,h),Xl&&console.log(a+this.stackID(g)+` (via ${c&65536?`reduce of ${o.getName(c&65535)}`:"shift"} for ${o.getName(f)} @ ${i}${g==e?"":", split"})`),d)return!0;g.pos>i?n.push(g):r.push(g)}return!1}advanceFully(e,n){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return nG(e,n),!0}}runRecovery(e,n,r){let i=null,o=!1;for(let a=0;a<e.length;a++){let s=e[a],l=n[a<<1],u=n[(a<<1)+1],c=Xl?this.stackID(s)+" -> ":"";if(s.deadEnd&&(o||(o=!0,s.restart(),Xl&&console.log(c+this.stackID(s)+" (restarted)"),this.advanceFully(s,r))))continue;let f=s.split(),h=c;for(let d=0;f.forceReduce()&&d<10&&(Xl&&console.log(h+this.stackID(f)+" (via force-reduce)"),!this.advanceFully(f,r));d++)Xl&&(h=this.stackID(f)+" -> ");for(let d of s.recoverByInsert(l))Xl&&console.log(c+this.stackID(d)+" (via recover-insert)"),this.advanceFully(d,r);this.stream.end>s.pos?(u==s.pos&&(u++,l=0),s.recoverByDelete(l,u),Xl&&console.log(c+this.stackID(s)+` (via recover-delete ${this.parser.getName(l)})`),nG(s,r)):(!i||i.score<s.score)&&(i=s)}return i}stackToTree(e){return e.close(),Ao.build({buffer:DT.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let n=(UI||(UI=new WeakMap)).get(e);return n||UI.set(e,n=String.fromCodePoint(this.nextStackID++)),n+e}}function nG(t,e){for(let n=0;n<e.length;n++){let r=e[n];if(r.pos==t.pos&&r.sameState(t)){e[n].score<t.score&&(e[n]=t);return}}e.push(t)}class _Ye{constructor(e,n,r){this.source=e,this.flags=n,this.disabled=r}allows(e){return!this.disabled||this.disabled[e]==0}}class MT extends FZ{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let n=e.nodeNames.split(" ");this.minRepeatTerm=n.length;for(let s=0;s<e.repeatNodeCount;s++)n.push("");let r=Object.keys(e.topRules).map(s=>e.topRules[s][1]),i=[];for(let s=0;s<n.length;s++)i.push([]);function o(s,l,u){i[s].push([l,l.deserialize(String(u))])}if(e.nodeProps)for(let s of e.nodeProps){let l=s[0];typeof l=="string"&&(l=Pn[l]);for(let u=1;u<s.length;){let c=s[u++];if(c>=0)o(c,l,s[u++]);else{let f=s[u+-c];for(let h=-c;h>0;h--)o(s[u++],l,f);u++}}}this.nodeSet=new wN(n.map((s,l)=>cs.define({name:l>=this.minRepeatTerm?void 0:s,id:l,props:i[l],top:r.indexOf(l)>-1,error:l==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(l)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=DZ;let a=FC(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let s=0;s<this.specializerSpecs.length;s++)this.specialized[s]=this.specializerSpecs[s].term;this.specializers=this.specializerSpecs.map(rG),this.states=FC(e.states,Uint32Array),this.data=FC(e.stateData),this.goto=FC(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(s=>typeof s=="number"?new Wv(a,s):s),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,n,r){let i=new bYe(this,e,n,r);for(let o of this.wrappers)i=o(i,e,n,r);return i}getGoto(e,n,r=!1){let i=this.goto;if(n>=i[0])return-1;for(let o=i[n+1];;){let a=i[o++],s=a&1,l=i[o++];if(s&&r)return l;for(let u=o+(a>>1);o<u;o++)if(i[o]==e)return l;if(s)return-1}}hasAction(e,n){let r=this.data;for(let i=0;i<2;i++)for(let o=this.stateSlot(e,i?2:1),a;;o+=3){if((a=r[o])==65535)if(r[o+1]==1)a=r[o=ef(r,o+2)];else{if(r[o+1]==2)return ef(r,o+2);break}if(a==n||a==0)return ef(r,o+1)}return 0}stateSlot(e,n){return this.states[e*6+n]}stateFlag(e,n){return(this.stateSlot(e,0)&n)>0}validAction(e,n){if(n==this.stateSlot(e,4))return!0;for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=ef(this.data,r+2);else return!1;if(n==ef(this.data,r+1))return!0}}nextStates(e){let n=[];for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=ef(this.data,r+2);else break;if(!(this.data[r+2]&1)){let i=this.data[r+1];n.some((o,a)=>a&1&&o==i)||n.push(this.data[r],i)}}return n}configure(e){let n=Object.assign(Object.create(MT.prototype),this);if(e.props&&(n.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw new RangeError(`Invalid top rule name ${e.top}`);n.top=r}return e.tokenizers&&(n.tokenizers=this.tokenizers.map(r=>{let i=e.tokenizers.find(o=>o.from==r);return i?i.to:r})),e.specializers&&(n.specializers=this.specializers.slice(),n.specializerSpecs=this.specializerSpecs.map((r,i)=>{let o=e.specializers.find(s=>s.from==r.external);if(!o)return r;let a=Object.assign(Object.assign({},r),{external:o.to});return n.specializers[i]=rG(a),a})),e.contextTracker&&(n.context=e.contextTracker),e.dialect&&(n.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(n.strict=e.strict),e.wrap&&(n.wrappers=n.wrappers.concat(e.wrap)),e.bufferLength!=null&&(n.bufferLength=e.bufferLength),n}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let n=this.dynamicPrecedences;return n==null?0:n[e]||0}parseDialect(e){let n=Object.keys(this.dialects),r=n.map(()=>!1);if(e)for(let o of e.split(" ")){let a=n.indexOf(o);a>=0&&(r[a]=!0)}let i=null;for(let o=0;o<n.length;o++)if(!r[o])for(let a=this.dialects[n[o]],s;(s=this.data[a++])!=65535;)(i||(i=new Uint8Array(this.maxTerm+1)))[s]=1;return new _Ye(e,r,i)}static deserialize(e){return new MT(e)}}function ef(t,e){return t[e]|t[e+1]<<16}function SYe(t){let e=null;for(let n of t){let r=n.p.stoppedAt;(n.pos==n.p.stream.end||r!=null&&n.pos>r)&&n.p.parser.stateFlag(n.state,2)&&(!e||e.score<n.score)&&(e=n)}return e}function rG(t){if(t.external){let e=t.extend?1:0;return(n,r)=>t.external(n,r)<<1|e}return t.get}const wYe=RZ({String:Ge.string,Number:Ge.number,"True False":Ge.bool,PropertyName:Ge.propertyName,Null:Ge.null,",":Ge.separator,"[ ]":Ge.squareBracket,"{ }":Ge.brace}),xYe=MT.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#CjOOQO'#Cp'#CpQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CrOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59U,59UO!iQPO,59UOVQPO,59QOqQPO'#CkO!nQPO,59^OOQO1G.k1G.kOVQPO'#ClO!vQPO,59aOOQO1G.p1G.pOOQO1G.l1G.lOOQO,59V,59VOOQO-E6i-E6iOOQO,59W,59WOOQO-E6j-E6j",stateData:"#O~OcOS~OQSORSOSSOTSOWQO]ROePO~OVXOeUO~O[[O~PVOg^O~Oh_OVfX~OVaO~OhbO[iX~O[dO~Oh_OVfa~OhbO[ia~O",goto:"!kjPPPPPPkPPkqwPPk{!RPPP!XP!ePP!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:"⚠ JsonText True False Null Number String } { Object Property PropertyName ] [ Array",maxTerm:25,nodeProps:[["openedBy",7,"{",12,"["],["closedBy",8,"}",13,"]"]],propSources:[wYe],skippedNodes:[0],repeatNodeCount:2,tokenData:"(p~RaXY!WYZ!W]^!Wpq!Wrs!]|}$i}!O$n!Q!R$w!R![&V![!]&h!}#O&m#P#Q&r#Y#Z&w#b#c'f#h#i'}#o#p(f#q#r(k~!]Oc~~!`Upq!]qr!]rs!rs#O!]#O#P!w#P~!]~!wOe~~!zXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#g~#jR!Q![#s!c!i#s#T#Z#s~#vR!Q![$P!c!i$P#T#Z$P~$SR!Q![$]!c!i$]#T#Z$]~$`R!Q![!]!c!i!]#T#Z!]~$nOh~~$qQ!Q!R$w!R![&V~$|RT~!O!P%V!g!h%k#X#Y%k~%YP!Q![%]~%bRT~!Q![%]!g!h%k#X#Y%k~%nR{|%w}!O%w!Q![%}~%zP!Q![%}~&SPT~!Q![%}~&[ST~!O!P%V!Q![&V!g!h%k#X#Y%k~&mOg~~&rO]~~&wO[~~&zP#T#U&}~'QP#`#a'T~'WP#g#h'Z~'^P#X#Y'a~'fOR~~'iP#i#j'l~'oP#`#a'r~'uP#`#a'x~'}OS~~(QP#f#g(T~(WP#i#j(Z~(^P#X#Y(a~(fOQ~~(kOW~~(pOV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),CYe=()=>t=>{try{JSON.parse(t.state.doc.toString())}catch(e){if(!(e instanceof SyntaxError))throw e;const n=kYe(e,t.state.doc);return[{from:n,message:e.message,severity:"error",to:n}]}return[]};function kYe(t,e){let n;return(n=t.message.match(/at position (\d+)/))?Math.min(+n[1],e.length):(n=t.message.match(/at line (\d+) column (\d+)/))?Math.min(e.line(+n[1]).from+ +n[2]-1,e.length):0}const $ue=pk.define({name:"json",parser:xYe.configure({props:[jZ.add({Object:xB({except:/^\s*\}/}),Array:xB({except:/^\s*\]/})}),WZ.add({"Object Array":k2e})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function Lue(){return new d2e($ue)}function TYe(t){let e=null;try{e=JSON.parse(t.doc.toString())}catch{}const n=oYe(t,"json4");return{data:e,pointers:n}}const AYe=t=>{var e,n,r;return!((e=t==null?void 0:t.data)===null||e===void 0)&&e.pointer&&((n=t==null?void 0:t.data)===null||n===void 0?void 0:n.pointer)!=="#"?t.data.pointer.slice(1):!((r=t==null?void 0:t.data)===null||r===void 0)&&r.property?`/${t.data.property}`:""};function EYe(t,e){const n=new PYe(t,e);return function(i){return n.doValidation(i)}}class PYe{constructor(e,n){this.rewriteError=r=>{var i,o,a,s,l,u;return r.code==="one-of-error"?`Expected one of ${LT((i=r==null?void 0:r.data)===null||i===void 0?void 0:i.errors,f=>f.data.expected)}`:r.code==="type-error"?`Expected \`${!((o=r==null?void 0:r.data)===null||o===void 0)&&o.expected&&Array.isArray((a=r==null?void 0:r.data)===null||a===void 0?void 0:a.expected)?LT((s=r==null?void 0:r.data)===null||s===void 0?void 0:s.expected):(l=r==null?void 0:r.data)===null||l===void 0?void 0:l.expected}\` but received \`${(u=r==null?void 0:r.data)===null||u===void 0?void 0:u.received}\``:r.message.replaceAll("#/","").replaceAll("/",".")},this.options=Object.assign({jsonParser:TYe},n),this.schema=new Aue(e)}get schemaTitle(){var e;return(e=this.schema.getSchema().title)!==null&&e!==void 0?e:"json-schema"}doValidation(e){if(!this.schema)return[];const n=e.state.doc.toString();if(!n||n.trim().length<3)return[];const r=this.options.jsonParser(e.state);let i=[];try{i=this.schema.validate(r.data)}catch{}return i.length?i.reduce((o,a)=>{const s=AYe(a),l=r.pointers.get(s);if(l){const u=a.name==="NoAdditionalPropertiesError";o.push({from:u?l.keyFrom:l.valueFrom,to:u?l.keyTo:l.valueTo,message:this.rewriteError(a),severity:"error",source:this.schemaTitle})}return o},[]):[]}}function yp(t,e,n=[]){const r=document.createElement(t);return Object.entries(e).forEach(([i,o])=>{if(i==="text"){r.innerText=o;return}r.setAttribute(i,o)}),n.forEach(i=>r.appendChild(i)),r}function OYe(t,e){const n=new IYe(t,e);return async function(i,o,a){return n.doHover(i,o,a)}}function WI(t,e,n){return`${e}: ${LT(t[e].map(r=>{var i;return(i=r.type)!==null&&i!==void 0?i:n.resolveRef(r).type}))}`}class IYe{constructor(e,n){this.opts=n,this.schema=new Aue(e),this.opts=Object.assign({parser:JSON.parse},this.opts)}getDataForCursor(e,n,r){const i=Oue(e.state,n,r);let o;try{o=this.opts.parser(e.state.doc.toString())}catch{}if(!i)return null;let a=$T(this.schema,i,o);return a.type==="error"&&o!==void 0&&(a=$T(this.schema,i,void 0),a.type==="error")?{pointer:i}:{schema:a,pointer:i}}formatMessage(e){const{message:n,typeInfo:r}=e;return n?yp("div",{class:"cm6-json-schema-hover"},[yp("div",{class:"cm6-json-schema-hover--description",text:n}),yp("div",{class:"cm6-json-schema-hover--code-wrapper"},[yp("code",{class:"cm6-json-schema-hover--code",text:r})])]):yp("div",{class:"cm6-json-schema-hover"},[yp("div",{class:"cm6-json-schema-hover--code-wrapper"},[yp("code",{class:"cm6-json-schema-hover--code",text:r})])])}getHoverTexts(e,n){let r=null,i=null;const{schema:o}=e;return o.oneOf&&(r=WI(o,"oneOf",n)),o.anyOf&&(r=WI(o,"anyOf",n)),o.allOf&&(r=WI(o,"allOf",n)),o.type&&(r=Array.isArray(o.type)?LT(o.type):o.type),o.description&&(i=o.description),{message:i,typeInfo:r}}async doHover(e,n,r){var i,o,a,s;const l=n,u=n;try{const c=this.getDataForCursor(e,n,r);if(!(c!=null&&c.schema))return null;const h=((o=(i=this.opts)===null||i===void 0?void 0:i.getHoverTexts)!==null&&o!==void 0?o:this.getHoverTexts)(c,this.schema),g=((s=(a=this.opts)===null||a===void 0?void 0:a.formatHover)!==null&&s!==void 0?s:this.formatMessage)(h);return{pos:l,end:u,arrow:!0,above:!0,create:y=>({dom:g})}}catch{return null}}}function Due(t){return[Lue(),XB(CYe()),XB(EYe(t)),$ue.data.of({autocomplete:fYe(t)}),PZ(OYe(t))]}const $Ye="#e5c07b",iG="#e06c75",LYe="#56b6c2",DYe="#ffffff",MYe="#abb2bf",oG="#7d8799",NYe="#61afef",FYe="#98c379",aG="#d19a66",RYe="#c678dd",Mue=iS.define([{tag:Ge.keyword,color:RYe},{tag:[Ge.name,Ge.deleted,Ge.character,Ge.propertyName,Ge.macroName],color:iG},{tag:[Ge.function(Ge.variableName),Ge.labelName],color:NYe},{tag:[Ge.color,Ge.constant(Ge.name),Ge.standard(Ge.name)],color:aG},{tag:[Ge.definition(Ge.name),Ge.separator],color:MYe},{tag:[Ge.typeName,Ge.className,Ge.number,Ge.changed,Ge.annotation,Ge.modifier,Ge.self,Ge.namespace],color:$Ye},{tag:[Ge.operator,Ge.operatorKeyword,Ge.url,Ge.escape,Ge.regexp,Ge.link,Ge.special(Ge.string)],color:LYe},{tag:[Ge.meta,Ge.comment],color:oG},{tag:Ge.strong,fontWeight:"bold"},{tag:Ge.emphasis,fontStyle:"italic"},{tag:Ge.strikethrough,textDecoration:"line-through"},{tag:Ge.link,color:oG,textDecoration:"underline"},{tag:Ge.heading,fontWeight:"bold",color:iG},{tag:[Ge.atom,Ge.bool,Ge.special(Ge.variableName)],color:aG},{tag:[Ge.processingInstruction,Ge.string,Ge.inserted],color:FYe},{tag:Ge.invalid,color:DYe}]),VYe=zt({props:{helpText:String}}),BYe={class:"dropdown is-hoverable is-left"},zYe={class:"dropdown-trigger"},jYe={class:"icon is-small is-clickable"},UYe={class:"dropdown-menu"},WYe={class:"dropdown-content"},HYe={class:"dropdown-item"},GYe=["innerHTML"];function qYe(t,e,n,r,i,o){const a=$t("font-awesome-icon");return Oe(),We("div",BYe,[X("div",zYe,[X("span",jYe,[lt(a,{icon:"fas fa-info-circle"})])]),X("div",UYe,[X("div",WYe,[X("div",HYe,[X("p",{class:"is-size-7 has-text-weight-normal",innerHTML:t.helpText},null,8,GYe)])])])])}const tm=ai(VYe,[["render",qYe]]),YYe=zt({components:{Codemirror:Wg,HelpButton:tm},setup(){const t=Af();return{extensions:[xA({class:"CodeMirror-lint-markers"}),PN(),Ug,UN(),$N(),SN(),pee(),bt.lineWrapping,An.tabSize.of(2),EN(Mue),Due(t.place.schema)]}},computed:{...Yt(Af)},methods:{onAddTokenClick(){this.placesStore.addToken()}}}),KYe={class:"block"},XYe={class:"field"},JYe={class:"label is-small icon-text"},ZYe={class:"control is-small jsn-code"},QYe={key:0,class:"help"},eKe={key:1,class:"help is-danger"};function tKe(t,e,n,r,i,o){const a=$t("HelpButton"),s=$t("Codemirror");return Oe(),We("div",KYe,[X("div",XYe,[X("label",JYe,[Bi("Place marking "),lt(a,{"help-text":`
                            Edit the JSON array to insert or remove data. 
                            <a href='https://www.json.org/json-en.html' target='_blank'
                            >Click here</a> for more information about JSON.
                            `}),X("button",{class:"button is-pulled-right is-small is-ghost",style:{"margin-left":"auto"},onClick:e[0]||(e[0]=(...l)=>t.onAddTokenClick&&t.onAddTokenClick(...l))},"Add token")]),X("div",ZYe,[lt(s,{modelValue:t.placesStore.markingString,"onUpdate:modelValue":e[1]||(e[1]=l=>t.placesStore.markingString=l),placeholder:"Edit place data.",autofocus:!0,"indent-with-tab":!0,"tab-size":2,style:{height:"400px"},extensions:t.extensions},null,8,["modelValue","extensions"])]),t.placesStore.place.hasError?ut("",!0):(Oe(),We("p",QYe,en(t.placesStore.place.errorMessage)+"   ",1)),t.placesStore.place.hasError&&t.placesStore.place.errorType==="data"?(Oe(),We("p",eKe,en(t.placesStore.place.errorMessage),1)):ut("",!0)])])}const Nue=ai(YYe,[["render",tKe]]),nKe=zt({computed:{...Yt(zs),...Yt(Af),...Yt(Zn)},methods:{setPlaceType(t){const e=t.target.value;if(this.netStore.placeTypes[this.placesStore.place.id]=e,e==="custom")return;const n=this.configStore.getPlaceTypeById(e),r=JSON.stringify(n==null?void 0:n.schema,null,2),i=JSON.stringify(n==null?void 0:n.marking,null,2);this.placesStore.schemaString=r,this.placesStore.savePlaceSchema(r),this.placesStore.savePlaceMarkingFromEditor(i)}}}),rKe={class:"block"},iKe={class:"field"},oKe=X("label",{class:"label is-small"},"Knotentyp:",-1),aKe={class:"select is-small"},sKe=["selected"],lKe=["value","selected"],uKe={class:"block"},cKe={key:0,class:"notification is-info is-light is-size-7"},fKe=["innerHTML"],hKe=X("hr",null,null,-1);function dKe(t,e,n,r,i,o){var a;return Oe(),We(bn,null,[X("div",rKe,[X("div",iKe,[oKe,X("div",aKe,[X("select",{onChange:e[0]||(e[0]=(...s)=>t.setPlaceType&&t.setPlaceType(...s))},[X("option",{value:"custom",selected:t.netStore.placeTypes[t.placesStore.place.id]==="custom"},"Individuell",8,sKe),(Oe(!0),We(bn,null,Po(t.configStore.placeTypes,s=>(Oe(),We("option",{value:s.id,selected:s.id===t.netStore.placeTypes[t.placesStore.place.id]},en(s.schema.title),9,lKe))),256))],32)])])]),X("div",uKe,[t.netStore.placeTypes[t.placesStore.place.id]==="custom"?(Oe(),We("div",cKe," Sie können Schema und Markierung anpassen. ")):(Oe(),We("div",{key:1,class:"notification is-info is-light is-size-7",innerHTML:(a=t.configStore.getPlaceTypeById(t.netStore.placeTypes[t.placesStore.place.id]))==null?void 0:a.schema.description},null,8,fKe))]),hKe],64)}const pKe=ai(nKe,[["render",dKe]]);var Fue={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.jsonSchema=void 0,t.jsonSchema={$schema:"https://meta.json-schema.tools/",$id:"https://meta.json-schema.tools/",title:"JSONSchema",default:{},oneOf:[{$ref:"#/definitions/JSONSchemaObject"},{$ref:"#/definitions/JSONSchemaBoolean"}],definitions:{$id:{title:"$id",type:"string",format:"uri-reference"},$schema:{title:"$schema",type:"string",format:"uri"},$ref:{title:"$ref",type:"string",format:"uri-reference"},$comment:{title:"$comment",type:"string"},title:{title:"title",type:"string"},description:{title:"description",type:"string"},AlwaysTrue:!0,readOnly:{title:"readOnly",type:"boolean",default:!1},examples:{title:"examples",type:"array",items:!0},multipleOf:{title:"multipleOf",type:"number",exclusiveMinimum:0},maximum:{title:"maximum",type:"number"},exclusiveMaximum:{title:"exclusiveMaximum",type:"number"},minimum:{title:"minimum",type:"number"},exclusiveMinimum:{title:"exclusiveMinimum",type:"number"},nonNegativeInteger:{title:"nonNegativeInteger",type:"integer",minimum:0},nonNegativeIntegerDefaultZero:{title:"nonNegativeIntegerDefaultZero",type:"integer",minimum:0,default:0},pattern:{title:"pattern",type:"string",format:"regex"},JSONSchema:{$ref:"#",isCycle:!0},schemaArray:{title:"schemaArray",type:"array",minItems:1,items:{$ref:"#/definitions/JSONSchema",isCycle:!0}},items:{title:"items",anyOf:[{$ref:"#/definitions/JSONSchema",isCycle:!0},{$ref:"#/definitions/schemaArray"}],default:!0},uniqueItems:{title:"uniqueItems",type:"boolean",default:!1},string_doaGddGA:{type:"string",title:"string_doaGddGA"},stringArray:{title:"stringArray",type:"array",items:{$ref:"#/definitions/string_doaGddGA"},uniqueItems:!0,default:[]},definitions:{title:"definitions",type:"object",additionalProperties:{$ref:"#/definitions/JSONSchema",isCycle:!0},default:{}},properties:{title:"properties",type:"object",additionalProperties:{$ref:"#/definitions/JSONSchema",isCycle:!0},default:{}},patternProperties:{title:"patternProperties",type:"object",additionalProperties:{$ref:"#/definitions/JSONSchema",isCycle:!0},propertyNames:{title:"propertyNames",format:"regex"},default:{}},dependenciesSet:{title:"dependenciesSet",anyOf:[{$ref:"#/definitions/JSONSchema",isCycle:!0},{$ref:"#/definitions/stringArray"}]},dependencies:{title:"dependencies",type:"object",additionalProperties:{$ref:"#/definitions/dependenciesSet"}},enum:{title:"enum",type:"array",items:!0,minItems:1,uniqueItems:!0},simpleTypes:{title:"simpleTypes",type:"string",enum:["array","boolean","integer","null","number","object","string"]},arrayOfSimpleTypes:{title:"arrayOfSimpleTypes",type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0},type:{title:"type",anyOf:[{$ref:"#/definitions/simpleTypes"},{$ref:"#/definitions/arrayOfSimpleTypes"}]},format:{title:"format",type:"string"},contentMediaType:{title:"contentMediaType",type:"string"},contentEncoding:{title:"contentEncoding",type:"string"},JSONSchemaObject:{title:"JSONSchemaObject",type:"object",properties:{$id:{$ref:"#/definitions/$id"},$schema:{$ref:"#/definitions/$schema"},$ref:{$ref:"#/definitions/$ref"},$comment:{$ref:"#/definitions/$comment"},title:{$ref:"#/definitions/title"},description:{$ref:"#/definitions/description"},default:!0,readOnly:{$ref:"#/definitions/readOnly"},examples:{$ref:"#/definitions/examples"},multipleOf:{$ref:"#/definitions/multipleOf"},maximum:{$ref:"#/definitions/maximum"},exclusiveMaximum:{$ref:"#/definitions/exclusiveMaximum"},minimum:{$ref:"#/definitions/minimum"},exclusiveMinimum:{$ref:"#/definitions/exclusiveMinimum"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefaultZero"},pattern:{$ref:"#/definitions/pattern"},additionalItems:{$ref:"#/definitions/JSONSchema",isCycle:!0},items:{$ref:"#/definitions/items"},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefaultZero"},uniqueItems:{$ref:"#/definitions/uniqueItems"},contains:{$ref:"#/definitions/JSONSchema",isCycle:!0},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefaultZero"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#/definitions/JSONSchema",isCycle:!0},definitions:{$ref:"#/definitions/definitions"},properties:{$ref:"#/definitions/properties"},patternProperties:{$ref:"#/definitions/patternProperties"},dependencies:{$ref:"#/definitions/dependencies"},propertyNames:{$ref:"#/definitions/JSONSchema",isCycle:!0},const:!0,enum:{$ref:"#/definitions/enum"},type:{$ref:"#/definitions/type"},format:{$ref:"#/definitions/format"},contentMediaType:{$ref:"#/definitions/contentMediaType"},contentEncoding:{$ref:"#/definitions/contentEncoding"},if:{$ref:"#/definitions/JSONSchema",isCycle:!0},then:{$ref:"#/definitions/JSONSchema",isCycle:!0},else:{$ref:"#/definitions/JSONSchema",isCycle:!0},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#/definitions/JSONSchema",isCycle:!0}}},JSONSchemaBoolean:{title:"JSONSchemaBoolean",description:"Always valid if true. Never valid if false. Is constant.",type:"boolean"}},isCycle:!0},t.default=t.jsonSchema})(Fue);const gKe=pr(Fue);var mKe=typeof ui=="object"&&ui&&ui.Object===Object&&ui,Rue=mKe,vKe=Rue,yKe=typeof self=="object"&&self&&self.Object===Object&&self,bKe=vKe||yKe||Function("return this")(),vs=bKe,_Ke=vs,SKe=_Ke.Symbol,G0=SKe,sG=G0,Vue=Object.prototype,wKe=Vue.hasOwnProperty,xKe=Vue.toString,db=sG?sG.toStringTag:void 0;function CKe(t){var e=wKe.call(t,db),n=t[db];try{t[db]=void 0;var r=!0}catch{}var i=xKe.call(t);return r&&(e?t[db]=n:delete t[db]),i}var kKe=CKe,TKe=Object.prototype,AKe=TKe.toString;function EKe(t){return AKe.call(t)}var PKe=EKe,lG=G0,OKe=kKe,IKe=PKe,$Ke="[object Null]",LKe="[object Undefined]",uG=lG?lG.toStringTag:void 0;function DKe(t){return t==null?t===void 0?LKe:$Ke:uG&&uG in Object(t)?OKe(t):IKe(t)}var wd=DKe;function MKe(t){return t!=null&&typeof t=="object"}var qs=MKe,NKe=wd,FKe=qs,RKe="[object Symbol]";function VKe(t){return typeof t=="symbol"||FKe(t)&&NKe(t)==RKe}var q0=VKe,BKe=q0;function zKe(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(a!=null&&(s===void 0?a===a&&!BKe(a):n(a,s)))var s=a,l=o}return l}var jKe=zKe;function UKe(t,e){return t>e}var WKe=UKe;function HKe(){this.__data__=[],this.size=0}var GKe=HKe;function qKe(t,e){return t===e||t!==t&&e!==e}var DS=qKe,YKe=DS;function KKe(t,e){for(var n=t.length;n--;)if(YKe(t[n][0],e))return n;return-1}var FE=KKe,XKe=FE,JKe=Array.prototype,ZKe=JKe.splice;function QKe(t){var e=this.__data__,n=XKe(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():ZKe.call(e,n,1),--this.size,!0}var eXe=QKe,tXe=FE;function nXe(t){var e=this.__data__,n=tXe(e,t);return n<0?void 0:e[n][1]}var rXe=nXe,iXe=FE;function oXe(t){return iXe(this.__data__,t)>-1}var aXe=oXe,sXe=FE;function lXe(t,e){var n=this.__data__,r=sXe(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var uXe=lXe,cXe=GKe,fXe=eXe,hXe=rXe,dXe=aXe,pXe=uXe;function Y0(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Y0.prototype.clear=cXe;Y0.prototype.delete=fXe;Y0.prototype.get=hXe;Y0.prototype.has=dXe;Y0.prototype.set=pXe;var RE=Y0,gXe=RE;function mXe(){this.__data__=new gXe,this.size=0}var vXe=mXe;function yXe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var bXe=yXe;function _Xe(t){return this.__data__.get(t)}var SXe=_Xe;function wXe(t){return this.__data__.has(t)}var xXe=wXe;function CXe(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Rl=CXe,kXe=wd,TXe=Rl,AXe="[object AsyncFunction]",EXe="[object Function]",PXe="[object GeneratorFunction]",OXe="[object Proxy]";function IXe(t){if(!TXe(t))return!1;var e=kXe(t);return e==EXe||e==PXe||e==AXe||e==OXe}var MS=IXe;const $Xe=pr(MS);var LXe=vs,DXe=LXe["__core-js_shared__"],MXe=DXe,HI=MXe,cG=function(){var t=/[^.]+$/.exec(HI&&HI.keys&&HI.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function NXe(t){return!!cG&&cG in t}var FXe=NXe,RXe=Function.prototype,VXe=RXe.toString;function BXe(t){if(t!=null){try{return VXe.call(t)}catch{}try{return t+""}catch{}}return""}var Bue=BXe,zXe=MS,jXe=FXe,UXe=Rl,WXe=Bue,HXe=/[\\^$.*+?()[\]{}|]/g,GXe=/^\[object .+?Constructor\]$/,qXe=Function.prototype,YXe=Object.prototype,KXe=qXe.toString,XXe=YXe.hasOwnProperty,JXe=RegExp("^"+KXe.call(XXe).replace(HXe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ZXe(t){if(!UXe(t)||jXe(t))return!1;var e=zXe(t)?JXe:GXe;return e.test(WXe(t))}var QXe=ZXe;function eJe(t,e){return t==null?void 0:t[e]}var tJe=eJe,nJe=QXe,rJe=tJe;function iJe(t,e){var n=rJe(t,e);return nJe(n)?n:void 0}var nm=iJe,oJe=nm,aJe=vs,sJe=oJe(aJe,"Map"),i8=sJe,lJe=nm,uJe=lJe(Object,"create"),VE=uJe,fG=VE;function cJe(){this.__data__=fG?fG(null):{},this.size=0}var fJe=cJe;function hJe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var dJe=hJe,pJe=VE,gJe="__lodash_hash_undefined__",mJe=Object.prototype,vJe=mJe.hasOwnProperty;function yJe(t){var e=this.__data__;if(pJe){var n=e[t];return n===gJe?void 0:n}return vJe.call(e,t)?e[t]:void 0}var bJe=yJe,_Je=VE,SJe=Object.prototype,wJe=SJe.hasOwnProperty;function xJe(t){var e=this.__data__;return _Je?e[t]!==void 0:wJe.call(e,t)}var CJe=xJe,kJe=VE,TJe="__lodash_hash_undefined__";function AJe(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=kJe&&e===void 0?TJe:e,this}var EJe=AJe,PJe=fJe,OJe=dJe,IJe=bJe,$Je=CJe,LJe=EJe;function K0(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}K0.prototype.clear=PJe;K0.prototype.delete=OJe;K0.prototype.get=IJe;K0.prototype.has=$Je;K0.prototype.set=LJe;var DJe=K0,hG=DJe,MJe=RE,NJe=i8;function FJe(){this.size=0,this.__data__={hash:new hG,map:new(NJe||MJe),string:new hG}}var RJe=FJe;function VJe(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var BJe=VJe,zJe=BJe;function jJe(t,e){var n=t.__data__;return zJe(e)?n[typeof e=="string"?"string":"hash"]:n.map}var BE=jJe,UJe=BE;function WJe(t){var e=UJe(this,t).delete(t);return this.size-=e?1:0,e}var HJe=WJe,GJe=BE;function qJe(t){return GJe(this,t).get(t)}var YJe=qJe,KJe=BE;function XJe(t){return KJe(this,t).has(t)}var JJe=XJe,ZJe=BE;function QJe(t,e){var n=ZJe(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var eZe=QJe,tZe=RJe,nZe=HJe,rZe=YJe,iZe=JJe,oZe=eZe;function X0(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}X0.prototype.clear=tZe;X0.prototype.delete=nZe;X0.prototype.get=rZe;X0.prototype.has=iZe;X0.prototype.set=oZe;var o8=X0,aZe=RE,sZe=i8,lZe=o8,uZe=200;function cZe(t,e){var n=this.__data__;if(n instanceof aZe){var r=n.__data__;if(!sZe||r.length<uZe-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new lZe(r)}return n.set(t,e),this.size=n.size,this}var fZe=cZe,hZe=RE,dZe=vXe,pZe=bXe,gZe=SXe,mZe=xXe,vZe=fZe;function J0(t){var e=this.__data__=new hZe(t);this.size=e.size}J0.prototype.clear=dZe;J0.prototype.delete=pZe;J0.prototype.get=gZe;J0.prototype.has=mZe;J0.prototype.set=vZe;var zE=J0,yZe="__lodash_hash_undefined__";function bZe(t){return this.__data__.set(t,yZe),this}var _Ze=bZe;function SZe(t){return this.__data__.has(t)}var wZe=SZe,xZe=o8,CZe=_Ze,kZe=wZe;function NT(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new xZe;++e<n;)this.add(t[e])}NT.prototype.add=NT.prototype.push=CZe;NT.prototype.has=kZe;var TZe=NT;function AZe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var EZe=AZe;function PZe(t,e){return t.has(e)}var OZe=PZe,IZe=TZe,$Ze=EZe,LZe=OZe,DZe=1,MZe=2;function NZe(t,e,n,r,i,o){var a=n&DZe,s=t.length,l=e.length;if(s!=l&&!(a&&l>s))return!1;var u=o.get(t),c=o.get(e);if(u&&c)return u==e&&c==t;var f=-1,h=!0,d=n&MZe?new IZe:void 0;for(o.set(t,e),o.set(e,t);++f<s;){var g=t[f],y=e[f];if(r)var _=a?r(y,g,f,e,t,o):r(g,y,f,t,e,o);if(_!==void 0){if(_)continue;h=!1;break}if(d){if(!$Ze(e,function(v,S){if(!LZe(d,S)&&(g===v||i(g,v,n,r,o)))return d.push(S)})){h=!1;break}}else if(!(g===y||i(g,y,n,r,o))){h=!1;break}}return o.delete(t),o.delete(e),h}var zue=NZe,FZe=vs,RZe=FZe.Uint8Array,jue=RZe;function VZe(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var BZe=VZe;function zZe(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var jZe=zZe,dG=G0,pG=jue,UZe=DS,WZe=zue,HZe=BZe,GZe=jZe,qZe=1,YZe=2,KZe="[object Boolean]",XZe="[object Date]",JZe="[object Error]",ZZe="[object Map]",QZe="[object Number]",eQe="[object RegExp]",tQe="[object Set]",nQe="[object String]",rQe="[object Symbol]",iQe="[object ArrayBuffer]",oQe="[object DataView]",gG=dG?dG.prototype:void 0,GI=gG?gG.valueOf:void 0;function aQe(t,e,n,r,i,o,a){switch(n){case oQe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case iQe:return!(t.byteLength!=e.byteLength||!o(new pG(t),new pG(e)));case KZe:case XZe:case QZe:return UZe(+t,+e);case JZe:return t.name==e.name&&t.message==e.message;case eQe:case nQe:return t==e+"";case ZZe:var s=HZe;case tQe:var l=r&qZe;if(s||(s=GZe),t.size!=e.size&&!l)return!1;var u=a.get(t);if(u)return u==e;r|=YZe,a.set(t,e);var c=WZe(s(t),s(e),r,i,o,a);return a.delete(t),c;case rQe:if(GI)return GI.call(t)==GI.call(e)}return!1}var sQe=aQe;function lQe(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var a8=lQe,uQe=Array.isArray,co=uQe;const cQe=pr(co);var fQe=a8,hQe=co;function dQe(t,e,n){var r=e(t);return hQe(t)?r:fQe(r,n(t))}var Uue=dQe;function pQe(t,e){for(var n=-1,r=t==null?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}var Wue=pQe;function gQe(){return[]}var Hue=gQe,mQe=Wue,vQe=Hue,yQe=Object.prototype,bQe=yQe.propertyIsEnumerable,mG=Object.getOwnPropertySymbols,_Qe=mG?function(t){return t==null?[]:(t=Object(t),mQe(mG(t),function(e){return bQe.call(t,e)}))}:vQe,s8=_Qe;function SQe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var wQe=SQe,xQe=wd,CQe=qs,kQe="[object Arguments]";function TQe(t){return CQe(t)&&xQe(t)==kQe}var AQe=TQe,vG=AQe,EQe=qs,Gue=Object.prototype,PQe=Gue.hasOwnProperty,OQe=Gue.propertyIsEnumerable,IQe=vG(function(){return arguments}())?vG:function(t){return EQe(t)&&PQe.call(t,"callee")&&!OQe.call(t,"callee")},NS=IQe,FT={exports:{}};function $Qe(){return!1}var LQe=$Qe;FT.exports;(function(t,e){var n=vs,r=LQe,i=e&&!e.nodeType&&e,o=i&&!0&&t&&!t.nodeType&&t,a=o&&o.exports===i,s=a?n.Buffer:void 0,l=s?s.isBuffer:void 0,u=l||r;t.exports=u})(FT,FT.exports);var FS=FT.exports,DQe=9007199254740991,MQe=/^(?:0|[1-9]\d*)$/;function NQe(t,e){var n=typeof t;return e=e??DQe,!!e&&(n=="number"||n!="symbol"&&MQe.test(t))&&t>-1&&t%1==0&&t<e}var RS=NQe,FQe=9007199254740991;function RQe(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=FQe}var l8=RQe,VQe=wd,BQe=l8,zQe=qs,jQe="[object Arguments]",UQe="[object Array]",WQe="[object Boolean]",HQe="[object Date]",GQe="[object Error]",qQe="[object Function]",YQe="[object Map]",KQe="[object Number]",XQe="[object Object]",JQe="[object RegExp]",ZQe="[object Set]",QQe="[object String]",eet="[object WeakMap]",tet="[object ArrayBuffer]",net="[object DataView]",ret="[object Float32Array]",iet="[object Float64Array]",oet="[object Int8Array]",aet="[object Int16Array]",set="[object Int32Array]",uet="[object Uint8Array]",cet="[object Uint8ClampedArray]",fet="[object Uint16Array]",het="[object Uint32Array]",Hr={};Hr[ret]=Hr[iet]=Hr[oet]=Hr[aet]=Hr[set]=Hr[uet]=Hr[cet]=Hr[fet]=Hr[het]=!0;Hr[jQe]=Hr[UQe]=Hr[tet]=Hr[WQe]=Hr[net]=Hr[HQe]=Hr[GQe]=Hr[qQe]=Hr[YQe]=Hr[KQe]=Hr[XQe]=Hr[JQe]=Hr[ZQe]=Hr[QQe]=Hr[eet]=!1;function det(t){return zQe(t)&&BQe(t.length)&&!!Hr[VQe(t)]}var pet=det;function get(t){return function(e){return t(e)}}var u8=get,RT={exports:{}};RT.exports;(function(t,e){var n=Rue,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===r,a=o&&n.process,s=function(){try{var l=i&&i.require&&i.require("util").types;return l||a&&a.binding&&a.binding("util")}catch{}}();t.exports=s})(RT,RT.exports);var c8=RT.exports,met=pet,vet=u8,yG=c8,bG=yG&&yG.isTypedArray,yet=bG?vet(bG):met,jE=yet,bet=wQe,_et=NS,wet=co,xet=FS,Cet=RS,ket=jE,Tet=Object.prototype,Aet=Tet.hasOwnProperty;function Eet(t,e){var n=wet(t),r=!n&&_et(t),i=!n&&!r&&xet(t),o=!n&&!r&&!i&&ket(t),a=n||r||i||o,s=a?bet(t.length,String):[],l=s.length;for(var u in t)(e||Aet.call(t,u))&&!(a&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Cet(u,l)))&&s.push(u);return s}var que=Eet,Pet=Object.prototype;function Oet(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||Pet;return t===n}var UE=Oet;function Iet(t,e){return function(n){return t(e(n))}}var Yue=Iet,$et=Yue,Let=$et(Object.keys,Object),Det=Let,Met=UE,Net=Det,Fet=Object.prototype,Ret=Fet.hasOwnProperty;function Vet(t){if(!Met(t))return Net(t);var e=[];for(var n in Object(t))Ret.call(t,n)&&n!="constructor"&&e.push(n);return e}var f8=Vet,Bet=MS,zet=l8;function jet(t){return t!=null&&zet(t.length)&&!Bet(t)}var xd=jet,Uet=que,Wet=f8,Het=xd;function Get(t){return Het(t)?Uet(t):Wet(t)}var Cd=Get;const qet=pr(Cd);var Yet=Uue,Ket=s8,Xet=Cd;function Jet(t){return Yet(t,Xet,Ket)}var Kue=Jet,_G=Kue,Zet=1,Qet=Object.prototype,ett=Qet.hasOwnProperty;function ttt(t,e,n,r,i,o){var a=n&Zet,s=_G(t),l=s.length,u=_G(e),c=u.length;if(l!=c&&!a)return!1;for(var f=l;f--;){var h=s[f];if(!(a?h in e:ett.call(e,h)))return!1}var d=o.get(t),g=o.get(e);if(d&&g)return d==e&&g==t;var y=!0;o.set(t,e),o.set(e,t);for(var _=a;++f<l;){h=s[f];var v=t[h],S=e[h];if(r)var C=a?r(S,v,h,e,t,o):r(v,S,h,t,e,o);if(!(C===void 0?v===S||i(v,S,n,r,o):C)){y=!1;break}_||(_=h=="constructor")}if(y&&!_){var k=t.constructor,x=e.constructor;k!=x&&"constructor"in t&&"constructor"in e&&!(typeof k=="function"&&k instanceof k&&typeof x=="function"&&x instanceof x)&&(y=!1)}return o.delete(t),o.delete(e),y}var ntt=ttt,rtt=nm,itt=vs,ott=rtt(itt,"DataView"),att=ott,stt=nm,ltt=vs,utt=stt(ltt,"Promise"),ctt=utt,ftt=nm,htt=vs,dtt=ftt(htt,"Set"),ptt=dtt,gtt=nm,mtt=vs,vtt=gtt(mtt,"WeakMap"),Xue=vtt,ND=att,FD=i8,RD=ctt,VD=ptt,BD=Xue,Jue=wd,Z0=Bue,SG="[object Map]",ytt="[object Object]",wG="[object Promise]",xG="[object Set]",CG="[object WeakMap]",kG="[object DataView]",btt=Z0(ND),_tt=Z0(FD),Stt=Z0(RD),wtt=Z0(VD),xtt=Z0(BD),wp=Jue;(ND&&wp(new ND(new ArrayBuffer(1)))!=kG||FD&&wp(new FD)!=SG||RD&&wp(RD.resolve())!=wG||VD&&wp(new VD)!=xG||BD&&wp(new BD)!=CG)&&(wp=function(t){var e=Jue(t),n=e==ytt?t.constructor:void 0,r=n?Z0(n):"";if(r)switch(r){case btt:return kG;case _tt:return SG;case Stt:return wG;case wtt:return xG;case xtt:return CG}return e});var Q0=wp,qI=zE,Ctt=zue,ktt=sQe,Ttt=ntt,TG=Q0,AG=co,EG=FS,Att=jE,Ett=1,PG="[object Arguments]",OG="[object Array]",RC="[object Object]",Ptt=Object.prototype,IG=Ptt.hasOwnProperty;function Ott(t,e,n,r,i,o){var a=AG(t),s=AG(e),l=a?OG:TG(t),u=s?OG:TG(e);l=l==PG?RC:l,u=u==PG?RC:u;var c=l==RC,f=u==RC,h=l==u;if(h&&EG(t)){if(!EG(e))return!1;a=!0,c=!1}if(h&&!c)return o||(o=new qI),a||Att(t)?Ctt(t,e,n,r,i,o):ktt(t,e,l,n,r,i,o);if(!(n&Ett)){var d=c&&IG.call(t,"__wrapped__"),g=f&&IG.call(e,"__wrapped__");if(d||g){var y=d?t.value():t,_=g?e.value():e;return o||(o=new qI),i(y,_,n,r,o)}}return h?(o||(o=new qI),Ttt(t,e,n,r,i,o)):!1}var Itt=Ott,$tt=Itt,$G=qs;function Zue(t,e,n,r,i){return t===e?!0:t==null||e==null||!$G(t)&&!$G(e)?t!==t&&e!==e:$tt(t,e,n,r,Zue,i)}var h8=Zue,Ltt=zE,Dtt=h8,Mtt=1,Ntt=2;function Ftt(t,e,n,r){var i=n.length,o=i,a=!r;if(t==null)return!o;for(t=Object(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){s=n[i];var l=s[0],u=t[l],c=s[1];if(a&&s[2]){if(u===void 0&&!(l in t))return!1}else{var f=new Ltt;if(r)var h=r(u,c,l,t,e,f);if(!(h===void 0?Dtt(c,u,Mtt|Ntt,r,f):h))return!1}}return!0}var Rtt=Ftt,Vtt=Rl;function Btt(t){return t===t&&!Vtt(t)}var Que=Btt,ztt=Que,jtt=Cd;function Utt(t){for(var e=jtt(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,ztt(i)]}return e}var Wtt=Utt;function Htt(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var ece=Htt,Gtt=Rtt,qtt=Wtt,Ytt=ece;function Ktt(t){var e=qtt(t);return e.length==1&&e[0][2]?Ytt(e[0][0],e[0][1]):function(n){return n===t||Gtt(n,t,e)}}var Xtt=Ktt,Jtt=co,Ztt=q0,Qtt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ent=/^\w*$/;function tnt(t,e){if(Jtt(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||Ztt(t)?!0:ent.test(t)||!Qtt.test(t)||e!=null&&t in Object(e)}var d8=tnt,tce=o8,nnt="Expected a function";function p8(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(nnt);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(p8.Cache||tce),n}p8.Cache=tce;var rnt=p8,int=rnt,ont=500;function ant(t){var e=int(t,function(r){return n.size===ont&&n.clear(),r}),n=e.cache;return e}var snt=ant,lnt=snt,unt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,cnt=/\\(\\)?/g,fnt=lnt(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(unt,function(n,r,i,o){e.push(i?o.replace(cnt,"$1"):r||n)}),e}),nce=fnt;function hnt(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var g8=hnt,LG=G0,dnt=g8,pnt=co,gnt=q0,mnt=1/0,DG=LG?LG.prototype:void 0,MG=DG?DG.toString:void 0;function rce(t){if(typeof t=="string")return t;if(pnt(t))return dnt(t,rce)+"";if(gnt(t))return MG?MG.call(t):"";var e=t+"";return e=="0"&&1/t==-mnt?"-0":e}var vnt=rce,ynt=vnt;function bnt(t){return t==null?"":ynt(t)}var VS=bnt,_nt=co,Snt=d8,wnt=nce,xnt=VS;function Cnt(t,e){return _nt(t)?t:Snt(t,e)?[t]:wnt(xnt(t))}var m8=Cnt,knt=q0,Tnt=1/0;function Ant(t){if(typeof t=="string"||knt(t))return t;var e=t+"";return e=="0"&&1/t==-Tnt?"-0":e}var ey=Ant,Ent=m8,Pnt=ey;function Ont(t,e){e=Ent(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[Pnt(e[n++])];return n&&n==r?t:void 0}var ice=Ont,Int=ice;function $nt(t,e,n){var r=t==null?void 0:Int(t,e);return r===void 0?n:r}var oce=$nt;const na=pr(oce);function Lnt(t,e){return t!=null&&e in Object(t)}var Dnt=Lnt,Mnt=m8,Nnt=NS,Fnt=co,Rnt=RS,Vnt=l8,Bnt=ey;function znt(t,e,n){e=Mnt(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var a=Bnt(e[r]);if(!(o=t!=null&&n(t,a)))break;t=t[a]}return o||++r!=i?o:(i=t==null?0:t.length,!!i&&Vnt(i)&&Rnt(a,i)&&(Fnt(t)||Nnt(t)))}var ace=znt,jnt=Dnt,Unt=ace;function Wnt(t,e){return t!=null&&Unt(t,e,jnt)}var Hnt=Wnt,Gnt=h8,qnt=oce,Ynt=Hnt,Knt=d8,Xnt=Que,Jnt=ece,Znt=ey,Qnt=1,ert=2;function trt(t,e){return Knt(t)&&Xnt(e)?Jnt(Znt(t),e):function(n){var r=qnt(n,t);return r===void 0&&r===e?Ynt(n,t):Gnt(e,r,Qnt|ert)}}var nrt=trt;function rrt(t){return t}var WE=rrt;function irt(t){return function(e){return e==null?void 0:e[t]}}var ort=irt,art=ice;function srt(t){return function(e){return art(e,t)}}var lrt=srt,urt=ort,crt=lrt,frt=d8,hrt=ey;function drt(t){return frt(t)?urt(hrt(t)):crt(t)}var prt=drt,grt=Xtt,mrt=nrt,vrt=WE,yrt=co,brt=prt;function _rt(t){return typeof t=="function"?t:t==null?vrt:typeof t=="object"?yrt(t)?mrt(t[0],t[1]):grt(t):brt(t)}var BS=_rt,Srt=jKe,wrt=WKe,xrt=BS;function Crt(t,e){return t&&t.length?Srt(t,xrt(e),wrt):void 0}var krt=Crt;const v8=pr(krt);var Trt=f8,Art=Q0,Ert=NS,Prt=co,Ort=xd,Irt=FS,$rt=UE,Lrt=jE,Drt="[object Map]",Mrt="[object Set]",Nrt=Object.prototype,Frt=Nrt.hasOwnProperty;function Rrt(t){if(t==null)return!0;if(Ort(t)&&(Prt(t)||typeof t=="string"||typeof t.splice=="function"||Irt(t)||Lrt(t)||Ert(t)))return!t.length;var e=Art(t);if(e==Drt||e==Mrt)return!t.size;if($rt(t))return!Trt(t).length;for(var n in t)if(Frt.call(t,n))return!1;return!0}var Vrt=Rrt;const or=pr(Vrt);function Brt(t,e,n,r){var i=-1,o=t==null?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}var zrt=Brt;function jrt(t){return function(e){return t==null?void 0:t[e]}}var Urt=jrt,Wrt=Urt,Hrt={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Grt=Wrt(Hrt),qrt=Grt,Yrt=qrt,Krt=VS,Xrt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Jrt="\\u0300-\\u036f",Zrt="\\ufe20-\\ufe2f",Qrt="\\u20d0-\\u20ff",eit=Jrt+Zrt+Qrt,tit="["+eit+"]",nit=RegExp(tit,"g");function rit(t){return t=Krt(t),t&&t.replace(Xrt,Yrt).replace(nit,"")}var iit=rit,oit=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function ait(t){return t.match(oit)||[]}var sit=ait,lit=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function uit(t){return lit.test(t)}var cit=uit,sce="\\ud800-\\udfff",fit="\\u0300-\\u036f",hit="\\ufe20-\\ufe2f",dit="\\u20d0-\\u20ff",pit=fit+hit+dit,lce="\\u2700-\\u27bf",uce="a-z\\xdf-\\xf6\\xf8-\\xff",git="\\xac\\xb1\\xd7\\xf7",mit="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",vit="\\u2000-\\u206f",yit=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",cce="A-Z\\xc0-\\xd6\\xd8-\\xde",bit="\\ufe0e\\ufe0f",fce=git+mit+vit+yit,hce="['’]",NG="["+fce+"]",_it="["+pit+"]",dce="\\d+",Sit="["+lce+"]",pce="["+uce+"]",gce="[^"+sce+fce+dce+lce+uce+cce+"]",wit="\\ud83c[\\udffb-\\udfff]",xit="(?:"+_it+"|"+wit+")",Cit="[^"+sce+"]",mce="(?:\\ud83c[\\udde6-\\uddff]){2}",vce="[\\ud800-\\udbff][\\udc00-\\udfff]",ev="["+cce+"]",kit="\\u200d",FG="(?:"+pce+"|"+gce+")",Tit="(?:"+ev+"|"+gce+")",RG="(?:"+hce+"(?:d|ll|m|re|s|t|ve))?",VG="(?:"+hce+"(?:D|LL|M|RE|S|T|VE))?",yce=xit+"?",bce="["+bit+"]?",Ait="(?:"+kit+"(?:"+[Cit,mce,vce].join("|")+")"+bce+yce+")*",Eit="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Pit="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Oit=bce+yce+Ait,Iit="(?:"+[Sit,mce,vce].join("|")+")"+Oit,$it=RegExp([ev+"?"+pce+"+"+RG+"(?="+[NG,ev,"$"].join("|")+")",Tit+"+"+VG+"(?="+[NG,ev+FG,"$"].join("|")+")",ev+"?"+FG+"+"+RG,ev+"+"+VG,Pit,Eit,dce,Iit].join("|"),"g");function Lit(t){return t.match($it)||[]}var Dit=Lit,Mit=sit,Nit=cit,Fit=VS,Rit=Dit;function Vit(t,e,n){return t=Fit(t),e=n?void 0:e,e===void 0?Nit(t)?Rit(t):Mit(t):t.match(e)||[]}var Bit=Vit,zit=zrt,jit=iit,Uit=Bit,Wit="['’]",Hit=RegExp(Wit,"g");function Git(t){return function(e){return zit(Uit(jit(e).replace(Hit,"")),t,"")}}var qit=Git;function Yit(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}var Kit=Yit,Xit=Kit;function Jit(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:Xit(t,e,n)}var Zit=Jit,Qit="\\ud800-\\udfff",eot="\\u0300-\\u036f",tot="\\ufe20-\\ufe2f",not="\\u20d0-\\u20ff",rot=eot+tot+not,iot="\\ufe0e\\ufe0f",oot="\\u200d",aot=RegExp("["+oot+Qit+rot+iot+"]");function sot(t){return aot.test(t)}var _ce=sot;function lot(t){return t.split("")}var uot=lot,Sce="\\ud800-\\udfff",cot="\\u0300-\\u036f",fot="\\ufe20-\\ufe2f",hot="\\u20d0-\\u20ff",dot=cot+fot+hot,pot="\\ufe0e\\ufe0f",got="["+Sce+"]",zD="["+dot+"]",jD="\\ud83c[\\udffb-\\udfff]",mot="(?:"+zD+"|"+jD+")",wce="[^"+Sce+"]",xce="(?:\\ud83c[\\udde6-\\uddff]){2}",Cce="[\\ud800-\\udbff][\\udc00-\\udfff]",vot="\\u200d",kce=mot+"?",Tce="["+pot+"]?",yot="(?:"+vot+"(?:"+[wce,xce,Cce].join("|")+")"+Tce+kce+")*",bot=Tce+kce+yot,_ot="(?:"+[wce+zD+"?",zD,xce,Cce,got].join("|")+")",Sot=RegExp(jD+"(?="+jD+")|"+_ot+bot,"g");function wot(t){return t.match(Sot)||[]}var xot=wot,Cot=uot,kot=_ce,Tot=xot;function Aot(t){return kot(t)?Tot(t):Cot(t)}var Eot=Aot,Pot=Zit,Oot=_ce,Iot=Eot,$ot=VS;function Lot(t){return function(e){e=$ot(e);var n=Oot(e)?Iot(e):void 0,r=n?n[0]:e.charAt(0),i=n?Pot(n,1).join(""):e.slice(1);return r[t]()+i}}var Dot=Lot,Mot=Dot,Not=Mot("toUpperCase"),Fot=Not,Rot=qit,Vot=Fot,Bot=Rot(function(t,e,n){return t+(n?" ":"")+Vot(e)}),zot=Bot;const Ace=pr(zot);var jot=nm,Uot=function(){try{var t=jot(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Ece=Uot,BG=Ece;function Wot(t,e,n){e=="__proto__"&&BG?BG(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var y8=Wot,Hot=y8,Got=DS;function qot(t,e,n){(n!==void 0&&!Got(t[e],n)||n===void 0&&!(e in t))&&Hot(t,e,n)}var Pce=qot;function Yot(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var l=a[t?s:++i];if(n(o[l],l,o)===!1)break}return e}}var Kot=Yot,Xot=Kot,Jot=Xot(),Oce=Jot,VT={exports:{}};VT.exports;(function(t,e){var n=vs,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===r,a=o?n.Buffer:void 0,s=a?a.allocUnsafe:void 0;function l(u,c){if(c)return u.slice();var f=u.length,h=s?s(f):new u.constructor(f);return u.copy(h),h}t.exports=l})(VT,VT.exports);var Ice=VT.exports,zG=jue;function Zot(t){var e=new t.constructor(t.byteLength);return new zG(e).set(new zG(t)),e}var b8=Zot,Qot=b8;function eat(t,e){var n=e?Qot(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var $ce=eat;function tat(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var zS=tat,nat=Rl,jG=Object.create,rat=function(){function t(){}return function(e){if(!nat(e))return{};if(jG)return jG(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),HE=rat,iat=Yue,oat=iat(Object.getPrototypeOf,Object),_8=oat,aat=HE,sat=_8,lat=UE;function uat(t){return typeof t.constructor=="function"&&!lat(t)?aat(sat(t)):{}}var Lce=uat,cat=xd,fat=qs;function hat(t){return fat(t)&&cat(t)}var dat=hat,pat=wd,gat=_8,mat=qs,vat="[object Object]",yat=Function.prototype,bat=Object.prototype,Dce=yat.toString,_at=bat.hasOwnProperty,Sat=Dce.call(Object);function wat(t){if(!mat(t)||pat(t)!=vat)return!1;var e=gat(t);if(e===null)return!0;var n=_at.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Dce.call(n)==Sat}var Mce=wat;function xat(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var Nce=xat,Cat=y8,kat=DS,Tat=Object.prototype,Aat=Tat.hasOwnProperty;function Eat(t,e,n){var r=t[e];(!(Aat.call(t,e)&&kat(r,n))||n===void 0&&!(e in t))&&Cat(t,e,n)}var S8=Eat,Pat=S8,Oat=y8;function Iat(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],l=r?r(n[s],t[s],s,n,t):void 0;l===void 0&&(l=t[s]),i?Oat(n,s,l):Pat(n,s,l)}return n}var jS=Iat;function $at(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var Lat=$at,Dat=Rl,Mat=UE,Nat=Lat,Fat=Object.prototype,Rat=Fat.hasOwnProperty;function Vat(t){if(!Dat(t))return Nat(t);var e=Mat(t),n=[];for(var r in t)r=="constructor"&&(e||!Rat.call(t,r))||n.push(r);return n}var Bat=Vat,zat=que,jat=Bat,Uat=xd;function Wat(t){return Uat(t)?zat(t,!0):jat(t)}var US=Wat,Hat=jS,Gat=US;function qat(t){return Hat(t,Gat(t))}var Yat=qat,UG=Pce,Kat=Ice,Xat=$ce,Jat=zS,Zat=Lce,WG=NS,HG=co,Qat=dat,est=FS,tst=MS,nst=Rl,rst=Mce,ist=jE,GG=Nce,ost=Yat;function ast(t,e,n,r,i,o,a){var s=GG(t,n),l=GG(e,n),u=a.get(l);if(u){UG(t,n,u);return}var c=o?o(s,l,n+"",t,e,a):void 0,f=c===void 0;if(f){var h=HG(l),d=!h&&est(l),g=!h&&!d&&ist(l);c=l,h||d||g?HG(s)?c=s:Qat(s)?c=Jat(s):d?(f=!1,c=Kat(l,!0)):g?(f=!1,c=Xat(l,!0)):c=[]:rst(l)||WG(l)?(c=s,WG(s)?c=ost(s):(!nst(s)||tst(s))&&(c=Zat(l))):f=!1}f&&(a.set(l,c),i(c,l,r,o,a),a.delete(l)),UG(t,n,c)}var sst=ast,lst=zE,ust=Pce,cst=Oce,fst=sst,hst=Rl,dst=US,pst=Nce;function Fce(t,e,n,r,i){t!==e&&cst(e,function(o,a){if(i||(i=new lst),hst(o))fst(t,e,a,n,Fce,r,i);else{var s=r?r(pst(t,a),o,a+"",t,e,i):void 0;s===void 0&&(s=o),ust(t,a,s)}},dst)}var Rce=Fce;function gst(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var w8=gst,mst=w8,qG=Math.max;function vst(t,e,n){return e=qG(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=qG(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),mst(t,this,s)}}var Vce=vst;function yst(t){return function(){return t}}var bst=yst,_st=bst,YG=Ece,Sst=WE,wst=YG?function(t,e){return YG(t,"toString",{configurable:!0,enumerable:!1,value:_st(e),writable:!0})}:Sst,xst=wst,Cst=800,kst=16,Tst=Date.now;function Ast(t){var e=0,n=0;return function(){var r=Tst(),i=kst-(r-n);if(n=r,i>0){if(++e>=Cst)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var Bce=Ast,Est=xst,Pst=Bce,Ost=Pst(Est),x8=Ost,Ist=WE,$st=Vce,Lst=x8;function Dst(t,e){return Lst($st(t,e,Ist),t+"")}var Mst=Dst,Nst=DS,Fst=xd,Rst=RS,Vst=Rl;function Bst(t,e,n){if(!Vst(n))return!1;var r=typeof e;return(r=="number"?Fst(n)&&Rst(e,n.length):r=="string"&&e in n)?Nst(n[e],t):!1}var zce=Bst,zst=Mst,jst=zce;function Ust(t){return zst(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=t.length>3&&typeof o=="function"?(i--,o):void 0,a&&jst(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var s=n[r];s&&t(e,s,r,o)}return e})}var jce=Ust,Wst=Rce,Hst=jce,Gst=Hst(function(t,e,n){Wst(t,e,n)}),qst=Gst;const zh=pr(qst);function Yst(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}var C8=Yst,Kst=jS,Xst=Cd;function Jst(t,e){return t&&Kst(e,Xst(e),t)}var Uce=Jst,Zst=jS,Qst=US;function elt(t,e){return t&&Zst(e,Qst(e),t)}var tlt=elt,nlt=jS,rlt=s8;function ilt(t,e){return nlt(t,rlt(t),e)}var olt=ilt,alt=a8,slt=_8,llt=s8,ult=Hue,clt=Object.getOwnPropertySymbols,flt=clt?function(t){for(var e=[];t;)alt(e,llt(t)),t=slt(t);return e}:ult,Wce=flt,hlt=jS,dlt=Wce;function plt(t,e){return hlt(t,dlt(t),e)}var glt=plt,mlt=Uue,vlt=Wce,ylt=US;function blt(t){return mlt(t,ylt,vlt)}var _lt=blt,Slt=Object.prototype,wlt=Slt.hasOwnProperty;function xlt(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&wlt.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var Clt=xlt,klt=b8;function Tlt(t,e){var n=e?klt(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var Alt=Tlt,Elt=/\w*$/;function Plt(t){var e=new t.constructor(t.source,Elt.exec(t));return e.lastIndex=t.lastIndex,e}var Olt=Plt,KG=G0,XG=KG?KG.prototype:void 0,JG=XG?XG.valueOf:void 0;function Ilt(t){return JG?Object(JG.call(t)):{}}var $lt=Ilt,Llt=b8,Dlt=Alt,Mlt=Olt,Nlt=$lt,Flt=$ce,Rlt="[object Boolean]",Vlt="[object Date]",Blt="[object Map]",zlt="[object Number]",jlt="[object RegExp]",Ult="[object Set]",Wlt="[object String]",Hlt="[object Symbol]",Glt="[object ArrayBuffer]",qlt="[object DataView]",Ylt="[object Float32Array]",Klt="[object Float64Array]",Xlt="[object Int8Array]",Jlt="[object Int16Array]",Zlt="[object Int32Array]",Qlt="[object Uint8Array]",eut="[object Uint8ClampedArray]",tut="[object Uint16Array]",nut="[object Uint32Array]";function rut(t,e,n){var r=t.constructor;switch(e){case Glt:return Llt(t);case Rlt:case Vlt:return new r(+t);case qlt:return Dlt(t,n);case Ylt:case Klt:case Xlt:case Jlt:case Zlt:case Qlt:case eut:case tut:case nut:return Flt(t,n);case Blt:return new r;case zlt:case Wlt:return new r(t);case jlt:return Mlt(t);case Ult:return new r;case Hlt:return Nlt(t)}}var iut=rut,out=Q0,aut=qs,sut="[object Map]";function lut(t){return aut(t)&&out(t)==sut}var uut=lut,cut=uut,fut=u8,ZG=c8,QG=ZG&&ZG.isMap,hut=QG?fut(QG):cut,dut=hut,put=Q0,gut=qs,mut="[object Set]";function vut(t){return gut(t)&&put(t)==mut}var yut=vut,but=yut,_ut=u8,eq=c8,tq=eq&&eq.isSet,Sut=tq?_ut(tq):but,wut=Sut,xut=zE,Cut=C8,kut=S8,Tut=Uce,Aut=tlt,Eut=Ice,Put=zS,Out=olt,Iut=glt,$ut=Kue,Lut=_lt,Dut=Q0,Mut=Clt,Nut=iut,Fut=Lce,Rut=co,Vut=FS,But=dut,zut=Rl,jut=wut,Uut=Cd,Wut=US,Hut=1,Gut=2,qut=4,Hce="[object Arguments]",Yut="[object Array]",Kut="[object Boolean]",Xut="[object Date]",Jut="[object Error]",Gce="[object Function]",Zut="[object GeneratorFunction]",Qut="[object Map]",ect="[object Number]",qce="[object Object]",tct="[object RegExp]",nct="[object Set]",rct="[object String]",ict="[object Symbol]",oct="[object WeakMap]",act="[object ArrayBuffer]",sct="[object DataView]",lct="[object Float32Array]",uct="[object Float64Array]",cct="[object Int8Array]",fct="[object Int16Array]",hct="[object Int32Array]",dct="[object Uint8Array]",pct="[object Uint8ClampedArray]",gct="[object Uint16Array]",mct="[object Uint32Array]",Fr={};Fr[Hce]=Fr[Yut]=Fr[act]=Fr[sct]=Fr[Kut]=Fr[Xut]=Fr[lct]=Fr[uct]=Fr[cct]=Fr[fct]=Fr[hct]=Fr[Qut]=Fr[ect]=Fr[qce]=Fr[tct]=Fr[nct]=Fr[rct]=Fr[ict]=Fr[dct]=Fr[pct]=Fr[gct]=Fr[mct]=!0;Fr[Jut]=Fr[Gce]=Fr[oct]=!1;function D2(t,e,n,r,i,o){var a,s=e&Hut,l=e&Gut,u=e&qut;if(n&&(a=i?n(t,r,i,o):n(t)),a!==void 0)return a;if(!zut(t))return t;var c=Rut(t);if(c){if(a=Mut(t),!s)return Put(t,a)}else{var f=Dut(t),h=f==Gce||f==Zut;if(Vut(t))return Eut(t,s);if(f==qce||f==Hce||h&&!i){if(a=l||h?{}:Fut(t),!s)return l?Iut(t,Aut(a,t)):Out(t,Tut(a,t))}else{if(!Fr[f])return i?t:{};a=Nut(t,f,s)}}o||(o=new xut);var d=o.get(t);if(d)return d;o.set(t,a),jut(t)?t.forEach(function(_){a.add(D2(_,e,n,_,t,o))}):But(t)&&t.forEach(function(_,v){a.set(v,D2(_,e,n,v,t,o))});var g=u?l?Lut:$ut:l?Wut:Uut,y=c?void 0:g(t);return Cut(y||t,function(_,v){y&&(v=_,_=t[v]),kut(a,v,D2(_,e,n,v,t,o))}),a}var k8=D2,vct=k8,yct=1,bct=4;function _ct(t){return vct(t,yct|bct)}var Sct=_ct;const vu=pr(Sct);var Yce={};(function(t){t.aliasToReal={each:"forEach",eachRight:"forEachRight",entries:"toPairs",entriesIn:"toPairsIn",extend:"assignIn",extendAll:"assignInAll",extendAllWith:"assignInAllWith",extendWith:"assignInWith",first:"head",conforms:"conformsTo",matches:"isMatch",property:"get",__:"placeholder",F:"stubFalse",T:"stubTrue",all:"every",allPass:"overEvery",always:"constant",any:"some",anyPass:"overSome",apply:"spread",assoc:"set",assocPath:"set",complement:"negate",compose:"flowRight",contains:"includes",dissoc:"unset",dissocPath:"unset",dropLast:"dropRight",dropLastWhile:"dropRightWhile",equals:"isEqual",identical:"eq",indexBy:"keyBy",init:"initial",invertObj:"invert",juxt:"over",omitAll:"omit",nAry:"ary",path:"get",pathEq:"matchesProperty",pathOr:"getOr",paths:"at",pickAll:"pick",pipe:"flow",pluck:"map",prop:"get",propEq:"matchesProperty",propOr:"getOr",props:"at",symmetricDifference:"xor",symmetricDifferenceBy:"xorBy",symmetricDifferenceWith:"xorWith",takeLast:"takeRight",takeLastWhile:"takeRightWhile",unapply:"rest",unnest:"flatten",useWith:"overArgs",where:"conformsTo",whereEq:"isMatch",zipObj:"zipObject"},t.aryMethod={1:["assignAll","assignInAll","attempt","castArray","ceil","create","curry","curryRight","defaultsAll","defaultsDeepAll","floor","flow","flowRight","fromPairs","invert","iteratee","memoize","method","mergeAll","methodOf","mixin","nthArg","over","overEvery","overSome","rest","reverse","round","runInContext","spread","template","trim","trimEnd","trimStart","uniqueId","words","zipAll"],2:["add","after","ary","assign","assignAllWith","assignIn","assignInAllWith","at","before","bind","bindAll","bindKey","chunk","cloneDeepWith","cloneWith","concat","conformsTo","countBy","curryN","curryRightN","debounce","defaults","defaultsDeep","defaultTo","delay","difference","divide","drop","dropRight","dropRightWhile","dropWhile","endsWith","eq","every","filter","find","findIndex","findKey","findLast","findLastIndex","findLastKey","flatMap","flatMapDeep","flattenDepth","forEach","forEachRight","forIn","forInRight","forOwn","forOwnRight","get","groupBy","gt","gte","has","hasIn","includes","indexOf","intersection","invertBy","invoke","invokeMap","isEqual","isMatch","join","keyBy","lastIndexOf","lt","lte","map","mapKeys","mapValues","matchesProperty","maxBy","meanBy","merge","mergeAllWith","minBy","multiply","nth","omit","omitBy","overArgs","pad","padEnd","padStart","parseInt","partial","partialRight","partition","pick","pickBy","propertyOf","pull","pullAll","pullAt","random","range","rangeRight","rearg","reject","remove","repeat","restFrom","result","sampleSize","some","sortBy","sortedIndex","sortedIndexOf","sortedLastIndex","sortedLastIndexOf","sortedUniqBy","split","spreadFrom","startsWith","subtract","sumBy","take","takeRight","takeRightWhile","takeWhile","tap","throttle","thru","times","trimChars","trimCharsEnd","trimCharsStart","truncate","union","uniqBy","uniqWith","unset","unzipWith","without","wrap","xor","zip","zipObject","zipObjectDeep"],3:["assignInWith","assignWith","clamp","differenceBy","differenceWith","findFrom","findIndexFrom","findLastFrom","findLastIndexFrom","getOr","includesFrom","indexOfFrom","inRange","intersectionBy","intersectionWith","invokeArgs","invokeArgsMap","isEqualWith","isMatchWith","flatMapDepth","lastIndexOfFrom","mergeWith","orderBy","padChars","padCharsEnd","padCharsStart","pullAllBy","pullAllWith","rangeStep","rangeStepRight","reduce","reduceRight","replace","set","slice","sortedIndexBy","sortedLastIndexBy","transform","unionBy","unionWith","update","xorBy","xorWith","zipWith"],4:["fill","setWith","updateWith"]},t.aryRearg={2:[1,0],3:[2,0,1],4:[3,2,0,1]},t.iterateeAry={dropRightWhile:1,dropWhile:1,every:1,filter:1,find:1,findFrom:1,findIndex:1,findIndexFrom:1,findKey:1,findLast:1,findLastFrom:1,findLastIndex:1,findLastIndexFrom:1,findLastKey:1,flatMap:1,flatMapDeep:1,flatMapDepth:1,forEach:1,forEachRight:1,forIn:1,forInRight:1,forOwn:1,forOwnRight:1,map:1,mapKeys:1,mapValues:1,partition:1,reduce:2,reduceRight:2,reject:1,remove:1,some:1,takeRightWhile:1,takeWhile:1,times:1,transform:2},t.iterateeRearg={mapKeys:[1],reduceRight:[1,0]},t.methodRearg={assignInAllWith:[1,0],assignInWith:[1,2,0],assignAllWith:[1,0],assignWith:[1,2,0],differenceBy:[1,2,0],differenceWith:[1,2,0],getOr:[2,1,0],intersectionBy:[1,2,0],intersectionWith:[1,2,0],isEqualWith:[1,2,0],isMatchWith:[2,1,0],mergeAllWith:[1,0],mergeWith:[1,2,0],padChars:[2,1,0],padCharsEnd:[2,1,0],padCharsStart:[2,1,0],pullAllBy:[2,1,0],pullAllWith:[2,1,0],rangeStep:[1,2,0],rangeStepRight:[1,2,0],setWith:[3,1,2,0],sortedIndexBy:[2,1,0],sortedLastIndexBy:[2,1,0],unionBy:[1,2,0],unionWith:[1,2,0],updateWith:[3,1,2,0],xorBy:[1,2,0],xorWith:[1,2,0],zipWith:[1,2,0]},t.methodSpread={assignAll:{start:0},assignAllWith:{start:0},assignInAll:{start:0},assignInAllWith:{start:0},defaultsAll:{start:0},defaultsDeepAll:{start:0},invokeArgs:{start:2},invokeArgsMap:{start:2},mergeAll:{start:0},mergeAllWith:{start:0},partial:{start:1},partialRight:{start:1},without:{start:1},zipAll:{start:0}},t.mutate={array:{fill:!0,pull:!0,pullAll:!0,pullAllBy:!0,pullAllWith:!0,pullAt:!0,remove:!0,reverse:!0},object:{assign:!0,assignAll:!0,assignAllWith:!0,assignIn:!0,assignInAll:!0,assignInAllWith:!0,assignInWith:!0,assignWith:!0,defaults:!0,defaultsAll:!0,defaultsDeep:!0,defaultsDeepAll:!0,merge:!0,mergeAll:!0,mergeAllWith:!0,mergeWith:!0},set:{set:!0,setWith:!0,unset:!0,update:!0,updateWith:!0}},t.realToAlias=function(){var e=Object.prototype.hasOwnProperty,n=t.aliasToReal,r={};for(var i in n){var o=n[i];e.call(r,o)?r[o].push(i):r[o]=[i]}return r}(),t.remap={assignAll:"assign",assignAllWith:"assignWith",assignInAll:"assignIn",assignInAllWith:"assignInWith",curryN:"curry",curryRightN:"curryRight",defaultsAll:"defaults",defaultsDeepAll:"defaultsDeep",findFrom:"find",findIndexFrom:"findIndex",findLastFrom:"findLast",findLastIndexFrom:"findLastIndex",getOr:"get",includesFrom:"includes",indexOfFrom:"indexOf",invokeArgs:"invoke",invokeArgsMap:"invokeMap",lastIndexOfFrom:"lastIndexOf",mergeAll:"merge",mergeAllWith:"mergeWith",padChars:"pad",padCharsEnd:"padEnd",padCharsStart:"padStart",propertyOf:"get",rangeStep:"range",rangeStepRight:"rangeRight",restFrom:"rest",spreadFrom:"spread",trimChars:"trim",trimCharsEnd:"trimEnd",trimCharsStart:"trimStart",zipAll:"zip"},t.skipFixed={castArray:!0,flow:!0,flowRight:!0,iteratee:!0,mixin:!0,rearg:!0,runInContext:!0},t.skipRearg={add:!0,assign:!0,assignIn:!0,bind:!0,bindKey:!0,concat:!0,difference:!0,divide:!0,eq:!0,gt:!0,gte:!0,isEqual:!0,lt:!0,lte:!0,matchesProperty:!0,merge:!0,multiply:!0,overArgs:!0,partial:!0,partialRight:!0,propertyOf:!0,random:!0,range:!0,rangeRight:!0,subtract:!0,zip:!0,zipObject:!0,zipObjectDeep:!0}})(Yce);var YI,nq;function Kce(){return nq||(nq=1,YI={}),YI}var Ki=Yce,wct=Kce(),rq=Array.prototype.push;function xct(t,e){return e==2?function(n,r){return t.apply(void 0,arguments)}:function(n){return t.apply(void 0,arguments)}}function KI(t,e){return e==2?function(n,r){return t(n,r)}:function(n){return t(n)}}function iq(t){for(var e=t?t.length:0,n=Array(e);e--;)n[e]=t[e];return n}function Cct(t){return function(e){return t({},e)}}function kct(t,e){return function(){for(var n=arguments.length,r=n-1,i=Array(n);n--;)i[n]=arguments[n];var o=i[e],a=i.slice(0,e);return o&&rq.apply(a,o),e!=r&&rq.apply(a,i.slice(e+1)),t.apply(this,a)}}function XI(t,e){return function(){var n=arguments.length;if(n){for(var r=Array(n);n--;)r[n]=arguments[n];var i=r[0]=e.apply(void 0,r);return t.apply(void 0,r),i}}}function UD(t,e,n,r){var i=typeof e=="function",o=e===Object(e);if(o&&(r=n,n=e,e=void 0),n==null)throw new TypeError;r||(r={});var a={cap:"cap"in r?r.cap:!0,curry:"curry"in r?r.curry:!0,fixed:"fixed"in r?r.fixed:!0,immutable:"immutable"in r?r.immutable:!0,rearg:"rearg"in r?r.rearg:!0},s=i?n:wct,l="curry"in r&&r.curry,u="fixed"in r&&r.fixed,c="rearg"in r&&r.rearg,f=i?n.runInContext():void 0,h=i?n:{ary:t.ary,assign:t.assign,clone:t.clone,curry:t.curry,forEach:t.forEach,isArray:t.isArray,isError:t.isError,isFunction:t.isFunction,isWeakMap:t.isWeakMap,iteratee:t.iteratee,keys:t.keys,rearg:t.rearg,toInteger:t.toInteger,toPath:t.toPath},d=h.ary,g=h.assign,y=h.clone,_=h.curry,v=h.forEach,S=h.isArray,C=h.isError,k=h.isFunction,x=h.isWeakMap,m=h.keys,T=h.rearg,P=h.toInteger,I=h.toPath,M=m(Ki.aryMethod),L={castArray:function(H){return function(){var ae=arguments[0];return S(ae)?H(iq(ae)):H.apply(void 0,arguments)}},iteratee:function(H){return function(){var ae=arguments[0],te=arguments[1],ce=H(ae,te),ue=ce.length;return a.cap&&typeof te=="number"?(te=te>2?te-2:1,ue&&ue<=te?ce:KI(ce,te)):ce}},mixin:function(H){return function(ae){var te=this;if(!k(te))return H(te,Object(ae));var ce=[];return v(m(ae),function(ue){k(ae[ue])&&ce.push([ue,te.prototype[ue]])}),H(te,Object(ae)),v(ce,function(ue){var fe=ue[1];k(fe)?te.prototype[ue[0]]=fe:delete te.prototype[ue[0]]}),te}},nthArg:function(H){return function(ae){var te=ae<0?1:P(ae)+1;return _(H(ae),te)}},rearg:function(H){return function(ae,te){var ce=te?te.length:0;return _(H(ae,te),ce)}},runInContext:function(H){return function(ae){return UD(t,H(ae),r)}}};function R(H,ae){if(a.cap){var te=Ki.iterateeRearg[H];if(te)return _e(ae,te);var ce=!i&&Ki.iterateeAry[H];if(ce)return Ee(ae,ce)}return ae}function V(H,ae,te){return l||a.curry&&te>1?_(ae,te):ae}function z(H,ae,te){if(a.fixed&&(u||!Ki.skipFixed[H])){var ce=Ki.methodSpread[H],ue=ce&&ce.start;return ue===void 0?d(ae,te):kct(ae,ue)}return ae}function ie(H,ae,te){return a.rearg&&te>1&&(c||!Ki.skipRearg[H])?T(ae,Ki.methodRearg[H]||Ki.aryRearg[te]):ae}function oe(H,ae){ae=I(ae);for(var te=-1,ce=ae.length,ue=ce-1,fe=y(Object(H)),ye=fe;ye!=null&&++te<ce;){var j=ae[te],Y=ye[j];Y!=null&&!(k(Y)||C(Y)||x(Y))&&(ye[j]=y(te==ue?Y:Object(Y))),ye=ye[j]}return fe}function Se(H){return J.runInContext.convert(H)(void 0)}function Ae(H,ae){var te=Ki.aliasToReal[H]||H,ce=Ki.remap[te]||te,ue=r;return function(fe){var ye=i?f:h,j=i?f[ce]:ae,Y=g(g({},ue),fe);return UD(ye,te,j,Y)}}function Ee(H,ae){return se(H,function(te){return typeof te=="function"?KI(te,ae):te})}function _e(H,ae){return se(H,function(te){var ce=ae.length;return xct(T(KI(te,ce),ae),ce)})}function se(H,ae){return function(){var te=arguments.length;if(!te)return H();for(var ce=Array(te);te--;)ce[te]=arguments[te];var ue=a.rearg?0:te-1;return ce[ue]=ae(ce[ue]),H.apply(void 0,ce)}}function ne(H,ae,te){var ce,ue=Ki.aliasToReal[H]||H,fe=ae,ye=L[ue];return ye?fe=ye(ae):a.immutable&&(Ki.mutate.array[ue]?fe=XI(ae,iq):Ki.mutate.object[ue]?fe=XI(ae,Cct(ae)):Ki.mutate.set[ue]&&(fe=XI(ae,oe))),v(M,function(j){return v(Ki.aryMethod[j],function(Y){if(ue==Y){var O=Ki.methodSpread[ue],F=O&&O.afterRearg;return ce=F?z(ue,ie(ue,fe,j),j):ie(ue,z(ue,fe,j),j),ce=R(ue,ce),ce=V(ue,ce,j),!1}}),!ce}),ce||(ce=fe),ce==ae&&(ce=l?_(ce,1):function(){return ae.apply(this,arguments)}),ce.convert=Ae(ue,ae),ce.placeholder=ae.placeholder=te,ce}if(!o)return ne(e,n,s);var J=n,B=[];return v(M,function(H){v(Ki.aryMethod[H],function(ae){var te=J[Ki.remap[ae]||ae];te&&B.push([ae,ne(ae,te,J)])})}),v(m(J),function(H){var ae=J[H];if(typeof ae=="function"){for(var te=B.length;te--;)if(B[te][0]==H)return;ae.convert=Ae(H,ae),B.push([H,ae])}}),v(B,function(H){J[H[0]]=H[1]}),J.convert=Se,J.placeholder=J,v(m(J),function(H){v(Ki.realToAlias[H]||[],function(ae){J[ae]=J[H]})}),J}var Tct=UD,oq=Xue,Act=oq&&new oq,Xce=Act,Ect=WE,aq=Xce,Pct=aq?function(t,e){return aq.set(t,e),t}:Ect,Jce=Pct,Oct=HE,Ict=Rl;function $ct(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Oct(t.prototype),r=t.apply(n,e);return Ict(r)?r:n}}var GE=$ct,Lct=GE,Dct=vs,Mct=1;function Nct(t,e,n){var r=e&Mct,i=Lct(t);function o(){var a=this&&this!==Dct&&this instanceof o?i:t;return a.apply(r?n:this,arguments)}return o}var Fct=Nct,Rct=Math.max;function Vct(t,e,n,r){for(var i=-1,o=t.length,a=n.length,s=-1,l=e.length,u=Rct(o-a,0),c=Array(l+u),f=!r;++s<l;)c[s]=e[s];for(;++i<a;)(f||i<o)&&(c[n[i]]=t[i]);for(;u--;)c[s++]=t[i++];return c}var Zce=Vct,Bct=Math.max;function zct(t,e,n,r){for(var i=-1,o=t.length,a=-1,s=n.length,l=-1,u=e.length,c=Bct(o-s,0),f=Array(c+u),h=!r;++i<c;)f[i]=t[i];for(var d=i;++l<u;)f[d+l]=e[l];for(;++a<s;)(h||i<o)&&(f[d+n[a]]=t[i++]);return f}var Qce=zct;function jct(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}var Uct=jct;function Wct(){}var T8=Wct,Hct=HE,Gct=T8,qct=4294967295;function BT(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=qct,this.__views__=[]}BT.prototype=Hct(Gct.prototype);BT.prototype.constructor=BT;var A8=BT;function Yct(){}var Kct=Yct,sq=Xce,Xct=Kct,Jct=sq?function(t){return sq.get(t)}:Xct,efe=Jct,Zct={},Qct=Zct,lq=Qct,eft=Object.prototype,tft=eft.hasOwnProperty;function nft(t){for(var e=t.name+"",n=lq[e],r=tft.call(lq,e)?n.length:0;r--;){var i=n[r],o=i.func;if(o==null||o==t)return i.name}return e}var rft=nft,ift=HE,oft=T8;function zT(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}zT.prototype=ift(oft.prototype);zT.prototype.constructor=zT;var tfe=zT,aft=A8,sft=tfe,lft=zS;function uft(t){if(t instanceof aft)return t.clone();var e=new sft(t.__wrapped__,t.__chain__);return e.__actions__=lft(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var cft=uft,fft=A8,uq=tfe,hft=T8,dft=co,pft=qs,gft=cft,mft=Object.prototype,vft=mft.hasOwnProperty;function jT(t){if(pft(t)&&!dft(t)&&!(t instanceof fft)){if(t instanceof uq)return t;if(vft.call(t,"__wrapped__"))return gft(t)}return new uq(t)}jT.prototype=hft.prototype;jT.prototype.constructor=jT;var yft=jT,bft=A8,_ft=efe,Sft=rft,wft=yft;function xft(t){var e=Sft(t),n=wft[e];if(typeof n!="function"||!(e in bft.prototype))return!1;if(t===n)return!0;var r=_ft(n);return!!r&&t===r[0]}var Cft=xft,kft=Jce,Tft=Bce,Aft=Tft(kft),nfe=Aft,Eft=/\{\n\/\* \[wrapped with (.+)\] \*/,Pft=/,? & /;function Oft(t){var e=t.match(Eft);return e?e[1].split(Pft):[]}var Ift=Oft,$ft=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function Lft(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace($ft,`{
/* [wrapped with `+e+`] */
`)}var Dft=Lft;function Mft(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var rfe=Mft;function Nft(t){return t!==t}var Fft=Nft;function Rft(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var Vft=Rft,Bft=rfe,zft=Fft,jft=Vft;function Uft(t,e,n){return e===e?jft(t,e,n):Bft(t,zft,n)}var ife=Uft,Wft=ife;function Hft(t,e){var n=t==null?0:t.length;return!!n&&Wft(t,e,0)>-1}var Gft=Hft,qft=C8,Yft=Gft,Kft=1,Xft=2,Jft=8,Zft=16,Qft=32,eht=64,tht=128,nht=256,rht=512,iht=[["ary",tht],["bind",Kft],["bindKey",Xft],["curry",Jft],["curryRight",Zft],["flip",rht],["partial",Qft],["partialRight",eht],["rearg",nht]];function oht(t,e){return qft(iht,function(n){var r="_."+n[0];e&n[1]&&!Yft(t,r)&&t.push(r)}),t.sort()}var aht=oht,sht=Ift,lht=Dft,uht=x8,cht=aht;function fht(t,e,n){var r=e+"";return uht(t,lht(r,cht(sht(r),n)))}var ofe=fht,hht=Cft,dht=nfe,pht=ofe,ght=1,mht=2,vht=4,yht=8,cq=32,fq=64;function bht(t,e,n,r,i,o,a,s,l,u){var c=e&yht,f=c?a:void 0,h=c?void 0:a,d=c?o:void 0,g=c?void 0:o;e|=c?cq:fq,e&=~(c?fq:cq),e&vht||(e&=~(ght|mht));var y=[t,e,i,d,f,g,h,s,l,u],_=n.apply(void 0,y);return hht(t)&&dht(_,y),_.placeholder=r,pht(_,t,e)}var afe=bht;function _ht(t){var e=t;return e.placeholder}var sfe=_ht,Sht=zS,wht=RS,xht=Math.min;function Cht(t,e){for(var n=t.length,r=xht(e.length,n),i=Sht(t);r--;){var o=e[r];t[r]=wht(o,n)?i[o]:void 0}return t}var kht=Cht,hq="__lodash_placeholder__";function Tht(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];(a===e||a===hq)&&(t[n]=hq,o[i++]=n)}return o}var E8=Tht,Aht=Zce,Eht=Qce,Pht=Uct,dq=GE,Oht=afe,Iht=sfe,$ht=kht,Lht=E8,Dht=vs,Mht=1,Nht=2,Fht=8,Rht=16,Vht=128,Bht=512;function lfe(t,e,n,r,i,o,a,s,l,u){var c=e&Vht,f=e&Mht,h=e&Nht,d=e&(Fht|Rht),g=e&Bht,y=h?void 0:dq(t);function _(){for(var v=arguments.length,S=Array(v),C=v;C--;)S[C]=arguments[C];if(d)var k=Iht(_),x=Pht(S,k);if(r&&(S=Aht(S,r,i,d)),o&&(S=Eht(S,o,a,d)),v-=x,d&&v<u){var m=Lht(S,k);return Oht(t,e,lfe,_.placeholder,n,S,m,s,l,u-v)}var T=f?n:this,P=h?T[t]:t;return v=S.length,s?S=$ht(S,s):g&&v>1&&S.reverse(),c&&l<v&&(S.length=l),this&&this!==Dht&&this instanceof _&&(P=y||dq(P)),P.apply(T,S)}return _}var ufe=lfe,zht=w8,jht=GE,Uht=ufe,Wht=afe,Hht=sfe,Ght=E8,qht=vs;function Yht(t,e,n){var r=jht(t);function i(){for(var o=arguments.length,a=Array(o),s=o,l=Hht(i);s--;)a[s]=arguments[s];var u=o<3&&a[0]!==l&&a[o-1]!==l?[]:Ght(a,l);if(o-=u.length,o<n)return Wht(t,e,Uht,i.placeholder,void 0,a,u,void 0,void 0,n-o);var c=this&&this!==qht&&this instanceof i?r:t;return zht(c,this,a)}return i}var Kht=Yht,Xht=w8,Jht=GE,Zht=vs,Qht=1;function edt(t,e,n,r){var i=e&Qht,o=Jht(t);function a(){for(var s=-1,l=arguments.length,u=-1,c=r.length,f=Array(c+l),h=this&&this!==Zht&&this instanceof a?o:t;++u<c;)f[u]=r[u];for(;l--;)f[u++]=arguments[++s];return Xht(h,i?n:this,f)}return a}var tdt=edt,ndt=Zce,rdt=Qce,pq=E8,gq="__lodash_placeholder__",JI=1,idt=2,odt=4,mq=8,pb=128,vq=256,adt=Math.min;function sdt(t,e){var n=t[1],r=e[1],i=n|r,o=i<(JI|idt|pb),a=r==pb&&n==mq||r==pb&&n==vq&&t[7].length<=e[8]||r==(pb|vq)&&e[7].length<=e[8]&&n==mq;if(!(o||a))return t;r&JI&&(t[2]=e[2],i|=n&JI?0:odt);var s=e[3];if(s){var l=t[3];t[3]=l?ndt(l,s,e[4]):s,t[4]=l?pq(t[3],gq):e[4]}return s=e[5],s&&(l=t[5],t[5]=l?rdt(l,s,e[6]):s,t[6]=l?pq(t[5],gq):e[6]),s=e[7],s&&(t[7]=s),r&pb&&(t[8]=t[8]==null?e[8]:adt(t[8],e[8])),t[9]==null&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}var ldt=sdt,udt=/\s/;function cdt(t){for(var e=t.length;e--&&udt.test(t.charAt(e)););return e}var fdt=cdt,hdt=fdt,ddt=/^\s+/;function pdt(t){return t&&t.slice(0,hdt(t)+1).replace(ddt,"")}var gdt=pdt,mdt=gdt,yq=Rl,vdt=q0,bq=0/0,ydt=/^[-+]0x[0-9a-f]+$/i,bdt=/^0b[01]+$/i,_dt=/^0o[0-7]+$/i,Sdt=parseInt;function wdt(t){if(typeof t=="number")return t;if(vdt(t))return bq;if(yq(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=yq(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=mdt(t);var n=bdt.test(t);return n||_dt.test(t)?Sdt(t.slice(2),n?2:8):ydt.test(t)?bq:+t}var xdt=wdt,Cdt=xdt,_q=1/0,kdt=17976931348623157e292;function Tdt(t){if(!t)return t===0?t:0;if(t=Cdt(t),t===_q||t===-_q){var e=t<0?-1:1;return e*kdt}return t===t?t:0}var cfe=Tdt,Adt=cfe;function Edt(t){var e=Adt(t),n=e%1;return e===e?n?e-n:e:0}var qE=Edt,Pdt=Jce,Odt=Fct,Idt=Kht,$dt=ufe,Ldt=tdt,Ddt=efe,Mdt=ldt,Ndt=nfe,Fdt=ofe,Sq=qE,Rdt="Expected a function",wq=1,Vdt=2,ZI=8,QI=16,e4=32,xq=64,Cq=Math.max;function Bdt(t,e,n,r,i,o,a,s){var l=e&Vdt;if(!l&&typeof t!="function")throw new TypeError(Rdt);var u=r?r.length:0;if(u||(e&=~(e4|xq),r=i=void 0),a=a===void 0?a:Cq(Sq(a),0),s=s===void 0?s:Sq(s),u-=i?i.length:0,e&xq){var c=r,f=i;r=i=void 0}var h=l?void 0:Ddt(t),d=[t,e,n,r,i,c,f,o,a,s];if(h&&Mdt(d,h),t=d[0],e=d[1],n=d[2],r=d[3],i=d[4],s=d[9]=d[9]===void 0?l?0:t.length:Cq(d[9]-u,0),!s&&e&(ZI|QI)&&(e&=~(ZI|QI)),!e||e==wq)var g=Odt(t,e,n);else e==ZI||e==QI?g=Idt(t,e,s):(e==e4||e==(wq|e4))&&!i.length?g=Ldt(t,e,n,r):g=$dt.apply(void 0,d);var y=h?Pdt:Ndt;return Fdt(y(g,d),t,e)}var P8=Bdt,zdt=P8,jdt=128;function Udt(t,e,n){return e=n?void 0:e,e=t&&e==null?t.length:e,zdt(t,jdt,void 0,void 0,void 0,void 0,e)}var Wdt=Udt,Hdt=k8,Gdt=4;function qdt(t){return Hdt(t,Gdt)}var Ydt=qdt,Kdt=P8,Xdt=8;function O8(t,e,n){e=n?void 0:e;var r=Kdt(t,Xdt,void 0,void 0,void 0,void 0,void 0,e);return r.placeholder=O8.placeholder,r}O8.placeholder={};var Jdt=O8,Zdt=wd,Qdt=qs,ept=Mce,tpt="[object DOMException]",npt="[object Error]";function rpt(t){if(!Qdt(t))return!1;var e=Zdt(t);return e==npt||e==tpt||typeof t.message=="string"&&typeof t.name=="string"&&!ept(t)}var ipt=rpt,opt=Q0,apt=qs,spt="[object WeakMap]";function lpt(t){return apt(t)&&opt(t)==spt}var upt=lpt,cpt=k8,fpt=BS,hpt=1;function dpt(t){return fpt(typeof t=="function"?t:cpt(t,hpt))}var ppt=dpt,kq=G0,gpt=NS,mpt=co,Tq=kq?kq.isConcatSpreadable:void 0;function vpt(t){return mpt(t)||gpt(t)||!!(Tq&&t&&t[Tq])}var ypt=vpt,bpt=a8,_pt=ypt;function ffe(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=_pt),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?ffe(s,e-1,n,r,i):bpt(i,s):r||(i[i.length]=s)}return i}var Spt=ffe,wpt=Spt;function xpt(t){var e=t==null?0:t.length;return e?wpt(t,1):[]}var Cpt=xpt,kpt=Cpt,Tpt=Vce,Apt=x8;function Ept(t){return Apt(Tpt(t,void 0,kpt),t+"")}var Ppt=Ept,Opt=P8,Ipt=Ppt,$pt=256,Lpt=Ipt(function(t,e){return Opt(t,$pt,void 0,void 0,void 0,e)}),Dpt=Lpt,Mpt=g8,Npt=zS,Fpt=co,Rpt=q0,Vpt=nce,Bpt=ey,zpt=VS;function jpt(t){return Fpt(t)?Mpt(t,Bpt):Rpt(t)?[t]:Npt(Vpt(zpt(t)))}var Upt=jpt,Wpt={ary:Wdt,assign:Uce,clone:Ydt,curry:Jdt,forEach:C8,isArray:co,isError:ipt,isFunction:MS,isWeakMap:upt,iteratee:ppt,keys:f8,rearg:Dpt,toInteger:qE,toPath:Upt},Hpt=Tct,Gpt=Wpt;function qpt(t,e,n){return Hpt(Gpt,t,e,n)}var Ypt=qpt,t4,Aq;function Kpt(){if(Aq)return t4;Aq=1;var t=S8,e=m8,n=RS,r=Rl,i=ey;function o(a,s,l,u){if(!r(a))return a;s=e(s,a);for(var c=-1,f=s.length,h=f-1,d=a;d!=null&&++c<f;){var g=i(s[c]),y=l;if(g==="__proto__"||g==="constructor"||g==="prototype")return a;if(c!=h){var _=d[g];y=u?u(_,g,d):void 0,y===void 0&&(y=r(_)?_:n(s[c+1])?[]:{})}t(d,g,y),d=d[g]}return a}return t4=o,t4}var n4,Eq;function Xpt(){if(Eq)return n4;Eq=1;var t=Kpt();function e(n,r,i){return n==null?n:t(n,r,i)}return n4=e,n4}var Jpt=Ypt,hfe=Jpt("set",Xpt());hfe.placeholder=Kce();var Zpt=hfe;const Qpt=pr(Zpt);var egt=Oce,tgt=Cd;function ngt(t,e){return t&&egt(t,e,tgt)}var rgt=ngt,igt=xd;function ogt(t,e){return function(n,r){if(n==null)return n;if(!igt(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Object(n);(e?o--:++o<i)&&r(a[o],o,a)!==!1;);return n}}var agt=ogt,sgt=rgt,lgt=agt,ugt=lgt(sgt),cgt=ugt,fgt=cgt;function hgt(t,e){var n=[];return fgt(t,function(r,i,o){e(r,i,o)&&n.push(r)}),n}var dgt=hgt,pgt=Wue,ggt=dgt,mgt=BS,vgt=co;function ygt(t,e){var n=vgt(t)?pgt:ggt;return n(t,mgt(e))}var bgt=ygt;const Pq=pr(bgt);var _gt=h8;function Sgt(t,e){return _gt(t,e)}var wgt=Sgt;const dfe=pr(wgt);var xgt=wd,Cgt=co,kgt=qs,Tgt="[object String]";function Agt(t){return typeof t=="string"||!Cgt(t)&&kgt(t)&&xgt(t)==Tgt}var Egt=Agt,Pgt=g8;function Ogt(t,e){return Pgt(e,function(n){return t[n]})}var Igt=Ogt,$gt=Igt,Lgt=Cd;function Dgt(t){return t==null?[]:$gt(t,Lgt(t))}var Mgt=Dgt,Ngt=ife,Fgt=xd,Rgt=Egt,Vgt=qE,Bgt=Mgt,zgt=Math.max;function jgt(t,e,n,r){t=Fgt(t)?t:Bgt(t),n=n&&!r?Vgt(n):0;var i=t.length;return n<0&&(n=zgt(i+n,0)),Rgt(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Ngt(t,e,n)>-1}var Ugt=jgt;const Wgt=pr(Ugt);var Hgt=BS,Ggt=xd,qgt=Cd;function Ygt(t){return function(e,n,r){var i=Object(e);if(!Ggt(e)){var o=Hgt(n);e=qgt(e),n=function(s){return o(i[s],s,i)}}var a=t(e,n,r);return a>-1?i[o?e[a]:a]:void 0}}var Kgt=Ygt,Xgt=rfe,Jgt=BS,Zgt=qE,Qgt=Math.max;function emt(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:Zgt(n);return i<0&&(i=Qgt(r+i,0)),Xgt(t,Jgt(e),i)}var tmt=emt,nmt=Kgt,rmt=tmt,imt=nmt(rmt),omt=imt;const pfe=pr(omt);var amt=Math.ceil,smt=Math.max;function lmt(t,e,n,r){for(var i=-1,o=smt(amt((e-t)/(n||1)),0),a=Array(o);o--;)a[r?o:++i]=t,t+=n;return a}var umt=lmt,cmt=umt,fmt=zce,r4=cfe;function hmt(t){return function(e,n,r){return r&&typeof r!="number"&&fmt(e,n,r)&&(n=r=void 0),e=r4(e),n===void 0?(n=e,e=0):n=r4(n),r=r===void 0?e<n?1:-1:r4(r),cmt(e,n,r,t)}}var dmt=hmt,pmt=dmt,gmt=pmt(),mmt=gmt;const vmt=pr(mmt);var ymt=Object.prototype,bmt=ymt.hasOwnProperty;function _mt(t,e){return t!=null&&bmt.call(t,e)}var Smt=_mt,wmt=Smt,xmt=ace;function Cmt(t,e){return t!=null&&xmt(t,e,wmt)}var kmt=Cmt;const Tmt=pr(kmt);var WD={exports:{}},gfe={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.formatNames=t.fastFormats=t.fullFormats=void 0;function e(I,M){return{validate:I,compare:M}}t.fullFormats={date:e(o,a),time:e(l,u),"date-time":e(f,h),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:y,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:P,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:v,int32:{type:"number",validate:k},int64:{type:"number",validate:x},float:{type:"number",validate:m},double:{type:"number",validate:m},password:!0,binary:!0},t.fastFormats={...t.fullFormats,date:e(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,a),time:e(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,u),"date-time":e(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,h),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},t.formatNames=Object.keys(t.fullFormats);function n(I){return I%4===0&&(I%100!==0||I%400===0)}const r=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,i=[0,31,28,31,30,31,30,31,31,30,31,30,31];function o(I){const M=r.exec(I);if(!M)return!1;const L=+M[1],R=+M[2],V=+M[3];return R>=1&&R<=12&&V>=1&&V<=(R===2&&n(L)?29:i[R])}function a(I,M){if(I&&M)return I>M?1:I<M?-1:0}const s=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function l(I,M){const L=s.exec(I);if(!L)return!1;const R=+L[1],V=+L[2],z=+L[3],ie=L[5];return(R<=23&&V<=59&&z<=59||R===23&&V===59&&z===60)&&(!M||ie!=="")}function u(I,M){if(!(I&&M))return;const L=s.exec(I),R=s.exec(M);if(L&&R)return I=L[1]+L[2]+L[3]+(L[4]||""),M=R[1]+R[2]+R[3]+(R[4]||""),I>M?1:I<M?-1:0}const c=/t|\s/i;function f(I){const M=I.split(c);return M.length===2&&o(M[0])&&l(M[1],!0)}function h(I,M){if(!(I&&M))return;const[L,R]=I.split(c),[V,z]=M.split(c),ie=a(L,V);if(ie!==void 0)return ie||u(R,z)}const d=/\/|:/,g=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function y(I){return d.test(I)&&g.test(I)}const _=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function v(I){return _.lastIndex=0,_.test(I)}const S=-(2**31),C=2**31-1;function k(I){return Number.isInteger(I)&&I<=C&&I>=S}function x(I){return Number.isInteger(I)}function m(){return!0}const T=/[^\\]\\Z/;function P(I){if(T.test(I))return!1;try{return new RegExp(I),!0}catch{return!1}}})(gfe);var mfe={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.formatLimitDefinition=void 0;const e=xie,n=Sn,r=n.operators,i={formatMaximum:{okStr:"<=",ok:r.LTE,fail:r.GT},formatMinimum:{okStr:">=",ok:r.GTE,fail:r.LT},formatExclusiveMaximum:{okStr:"<",ok:r.LT,fail:r.GTE},formatExclusiveMinimum:{okStr:">",ok:r.GT,fail:r.LTE}},o={message:({keyword:s,schemaCode:l})=>n.str`should be ${i[s].okStr} ${l}`,params:({keyword:s,schemaCode:l})=>n._`{comparison: ${i[s].okStr}, limit: ${l}}`};t.formatLimitDefinition={keyword:Object.keys(i),type:"string",schemaType:"string",$data:!0,error:o,code(s){const{gen:l,data:u,schemaCode:c,keyword:f,it:h}=s,{opts:d,self:g}=h;if(!d.validateFormats)return;const y=new e.KeywordCxt(h,g.RULES.all.format.definition,"format");y.$data?_():v();function _(){const C=l.scopeValue("formats",{ref:g.formats,code:d.code.formats}),k=l.const("fmt",n._`${C}[${y.schemaCode}]`);s.fail$data(n.or(n._`typeof ${k} != "object"`,n._`${k} instanceof RegExp`,n._`typeof ${k}.compare != "function"`,S(k)))}function v(){const C=y.schema,k=g.formats[C];if(!k||k===!0)return;if(typeof k!="object"||k instanceof RegExp||typeof k.compare!="function")throw new Error(`"${f}": format "${C}" does not define "compare" function`);const x=l.scopeValue("formats",{key:C,ref:k,code:d.code.formats?n._`${d.code.formats}${n.getProperty(C)}`:void 0});s.fail$data(S(x))}function S(C){return n._`${C}.compare(${u}, ${c}) ${i[f].fail} 0`}},dependencies:["format"]};const a=s=>(s.addKeyword(t.formatLimitDefinition),s);t.default=a})(mfe);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});const n=gfe,r=mfe,i=Sn,o=new i.Name("fullFormats"),a=new i.Name("fastFormats"),s=(u,c={keywords:!0})=>{if(Array.isArray(c))return l(u,c,n.fullFormats,o),u;const[f,h]=c.mode==="fast"?[n.fastFormats,a]:[n.fullFormats,o],d=c.formats||n.formatNames;return l(u,d,f,h),c.keywords&&r.default(u),u};s.get=(u,c="full")=>{const h=(c==="fast"?n.fastFormats:n.fullFormats)[u];if(!h)throw new Error(`Unknown format "${u}"`);return h};function l(u,c,f,h){var d,g;(d=(g=u.opts.code).formats)!==null&&d!==void 0||(g.formats=i._`require("ajv-formats/dist/formats").${h}`);for(const y of c)u.addFormat(y,f[y])}t.exports=e=s,Object.defineProperty(e,"__esModule",{value:!0}),e.default=s})(WD,WD.exports);var Amt=WD.exports;const Emt=pr(Amt),M2="additionalProperties",N2="required",Pmt=(t,e)=>{const n={};return t.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:(n[i]=!0,!0)})};class Omt{constructor(e){this.findOption=e,this.schemaObject=n=>{const r=this.properties(n),i={type:"object",properties:r,additionalProperties:this.findOption(r)(M2)},o=this.findOption(r)(N2);return o.length>0&&(i.required=o),i},this.properties=n=>{const r={};return Object.keys(n).reduce((i,o)=>(i[o]=this.property(n[o]),i),r)},this.property=n=>{switch(typeof n){case"string":return{type:"string"};case"boolean":return{type:"boolean"};case"number":return Number.isInteger(n)?{type:"integer"}:{type:"number"};case"object":return n==null?{type:"null"}:this.schemaObjectOrArray(n);default:return{}}},this.schemaObjectOrArray=n=>n instanceof Array?this.schemaArray(n):this.schemaObject(n),this.schemaArray=n=>{if(n.length>0){const r=n.map(this.property),i=Pmt(r,o=>JSON.stringify(o));return i.length===1?{type:"array",items:i[0]}:{type:"array",items:{oneOf:i}}}else return{type:"array",items:{}}}}}const vfe=(t,e={})=>{const n=i=>o=>{switch(o){case M2:return Object.prototype.hasOwnProperty.call(e,M2)?e[M2]:!0;case N2:return Object.prototype.hasOwnProperty.call(e,N2)?e[N2](i):Object.keys(i);default:return}};return new Omt(n).schemaObject(t)};var Sc;(function(t){t.HIDE="HIDE",t.SHOW="SHOW",t.ENABLE="ENABLE",t.DISABLE="DISABLE"})(Sc||(Sc={}));const yfe=t=>typeof t=="object"&&t!==null&&typeof t.i18n=="string",Imt=t=>t.type==="Group",I8=t=>t.elements!==void 0,$mt=t=>!!t&&typeof t=="object",Lmt=t=>$mt(t)&&typeof t.scope=="string",Dmt=t=>!!t&&typeof t=="object",bfe=(t,e,n)=>{const r=e+n;if(r<0||r>=t.length)return;const i=[e,r].sort((o,a)=>o-a);t.splice(i[0],2,t[i[1]],t[i[0]])},Mmt=(t,e)=>{bfe(t,e,-1)},Nmt=(t,e)=>{bfe(t,e,1)},Fmt={restrict:!1,trim:!1,showUnfocusedDescription:!1,hideRequiredAsterisk:!1},Oq=(t={})=>zh({},Fmt,t),Iq=(t=Oq(),e)=>{switch(e.type){case Y8:return Oq(e.config);default:return t}},Wc=(t,e)=>t===void 0?[]:t(e)?[]:t.errors,Rmt={data:{},schema:{},uischema:void 0,errors:[],validator:void 0,ajv:void 0,validationMode:"ValidateAndShow",additionalErrors:[]},HD=(t,e)=>((Object.prototype.hasOwnProperty.call(e,"id")||Object.prototype.hasOwnProperty.call(e,"$id"))&&t.removeSchema(e),t),$q=(t,e)=>{if(e){if(Vmt(e.options))return e.options.ajv;if(e.options!==void 0&&$Xe(e.options.compile))return e.options}return t.ajv?e!=null&&e.schema?HD(t.ajv,e.schema):t.ajv:Jvt()},Vmt=t=>t?t.ajv!==void 0:!1,Lq=(t,e)=>e&&Bmt(e.options)?e.options.validationMode:t.validationMode,Bmt=t=>t?t.validationMode!==void 0:!1,zmt=t=>t?t.additionalErrors!==void 0:!1,Dq=(t,e)=>e&&zmt(e.options)?e.options.additionalErrors:t.additionalErrors,i4=(t=Rmt,e)=>{switch(e.type){case U8:{const n=$q(t,e),r=Lq(t,e),i=r==="NoValidation"?void 0:n.compile(e.schema),o=Wc(i,e.data),a=Dq(t,e);return{...t,data:e.data,schema:e.schema,uischema:e.uischema,additionalErrors:a,errors:o,validator:i,ajv:n,validationMode:r}}case W8:{const n=$q(t,e),r=Lq(t,e);let i=t.validator,o=t.errors;t.schema!==e.schema||t.validationMode!==r||t.ajv!==n?(i=r==="NoValidation"?void 0:n.compile(e.schema),o=Wc(i,e.data)):t.data!==e.data&&(o=Wc(i,e.data));const a=Dq(t,e);return t.data!==e.data||t.schema!==e.schema||t.uischema!==e.uischema||t.ajv!==n||t.errors!==o||t.validator!==i||t.validationMode!==r||t.additionalErrors!==a?{...t,data:e.data,schema:e.schema,uischema:e.uischema,ajv:n,errors:dfe(o,t.errors)?t.errors:o,validator:i,validationMode:r,additionalErrors:a}:t}case H8:{const n=e.ajv,r=t.validationMode==="NoValidation"?void 0:n.compile(t.schema),i=Wc(r,t.data);return{...t,validator:r,errors:i}}case K8:{const r=e.schema&&t.ajv&&t.validationMode!=="NoValidation"?HD(t.ajv,e.schema).compile(e.schema):t.validator,i=Wc(r,t.data);return{...t,validator:r,schema:e.schema,errors:i}}case X8:return{...t,uischema:e.uischema};case G8:{if(e.path===void 0||e.path===null)return t;if(e.path===""){const n=e.updater(vu(t.data)),r=Wc(t.validator,n);return{...t,data:n,errors:r}}else{const n=na(t.data,e.path),r=e.updater(vu(n)),i=Qpt(e.path,r,t.data===void 0?{}:t.data),o=Wc(t.validator,i);return{...t,data:i,errors:o}}}case q8:return{...t,errors:e.errors};case J8:{if(t.validationMode===e.validationMode)return t;if(e.validationMode==="NoValidation"){const n=Wc(void 0,t.data);return{...t,errors:n,validationMode:e.validationMode}}if(t.validationMode==="NoValidation"){const n=HD(t.ajv,t.schema).compile(t.schema),r=Wc(n,t.data);return{...t,validator:n,errors:r,validationMode:e.validationMode}}return{...t,validationMode:e.validationMode}}default:return t}},jmt=t=>na(t,"data"),Umt=t=>na(t,"schema"),Wmt=t=>na(t,"uischema"),Hmt=t=>na(t,"ajv"),Gmt=t=>{switch(t.keyword){case"required":case"dependencies":return t.params.missingProperty;case"additionalProperties":return t.params.additionalProperty;default:return}},GD=t=>{let e=t.dataPath||t.instancePath||"";e=e.replace(/\//g,".");const n=Gmt(t);return n!==void 0&&!e.endsWith(n)&&(e=`${e}.${n}`),e=e.replace(/^./,""),e=JE(e),e},qmt=(t,e,n)=>r=>{const i=Pq(r,o=>o.keyword==="oneOf"||o.keyword==="anyOf").map(o=>GD(o));return Pq(r,o=>{if(Kmt.indexOf(o.keyword)!==-1&&!KD(o.parentSchema))return!1;const a=GD(o);let s=n(a);const l=o.parentSchema;return s&&!Ymt(l)&&!KD(l)&&i.findIndex(u=>t.startsWith(u))!==-1&&(s=s&&dfe(l,e)),s})},Ymt=t=>(t==null?void 0:t.type)==="object"||!!(t!=null&&t.properties),Kmt=["additionalProperties","allOf","anyOf","oneOf"],_fe=(t,e,n)=>r=>{const i=r.errors??[],o=r.additionalErrors??[];return qmt(t,e,n)(r.validationMode==="ValidateAndHide"?o:[...i,...o])},Xmt=(t,e)=>_fe(t,e,n=>n===t),Jmt=(t,e)=>_fe(t,e,n=>n.startsWith(t+".")),$8=(t,e)=>yfe(e)?e.i18n:(t==null?void 0:t.i18n)??void 0,Zmt=t=>(t==null?void 0:t.split(".").filter(e=>!/^\d+$/.test(e)).join("."))||"root",E_=(t,e,n)=>$8(t,e)??Zmt(n),UT=(t,e,n,r)=>`${E_(t,e,n)}.${r}`,Qmt=(t,e)=>`${t}.${e}`,L8=(t,e)=>e,D8=(t,e,n)=>{var s;const r=UT(t.parentSchema,n,GD(t),`error.${t.keyword}`),i=e(r,void 0,{error:t});if(i!==void 0)return i;const o=e(`error.${t.keyword}`,void 0,{error:t});if(o!==void 0)return o;const a=e(t.message,void 0,{error:t});return a!==void 0?a:t.keyword==="required"&&((s=t.message)!=null&&s.startsWith("must have required property"))?e("is a required property","is a required property",{error:t}):t.message},Sfe=(t,e,n,r,i,o)=>{if(t.length>0&&n){const a=UT(r,i,o,"error.custom"),s=n(a,void 0,{schema:r,uischema:i,path:o,errors:t});if(s!==void 0)return s}return Ovt(t.map(a=>e(a,n,i)))},evt=(t,e)=>{if(t.label===!1||(t.label===void 0||t.label===null||t.label===!0)&&!yfe(t))return;const n=typeof t.label=="string"?t.label:JSON.stringify(t.label),r=$8(void 0,t),i=typeof r=="string"?`${r}.label`:n;return e(i,n,{uischema:t})},tvt=(t,e,n,r)=>{const i={};return e.forEach(o=>{const a=Qmt(n,o.key);i[o.key]=t(a,o.default(r))}),i};var zo;(function(t){t.addTooltip="addTooltip",t.addAriaLabel="addAriaLabel",t.removeTooltip="removeTooltip",t.upAriaLabel="upAriaLabel",t.downAriaLabel="downAriaLabel",t.noSelection="noSelection",t.removeAriaLabel="removeAriaLabel",t.noDataMessage="noDataMessage",t.deleteDialogTitle="deleteDialogTitle",t.deleteDialogMessage="deleteDialogMessage",t.deleteDialogAccept="deleteDialogAccept",t.deleteDialogDecline="deleteDialogDecline",t.up="up",t.down="down"})(zo||(zo={}));const nvt=[{key:zo.addTooltip,default:t=>t?`Add to ${t}`:"Add"},{key:zo.addAriaLabel,default:t=>t?`Add to ${t} button`:"Add button"},{key:zo.removeTooltip,default:()=>"Delete"},{key:zo.removeAriaLabel,default:()=>"Delete button"},{key:zo.upAriaLabel,default:()=>"Move item up"},{key:zo.up,default:()=>"Up"},{key:zo.down,default:()=>"Down"},{key:zo.downAriaLabel,default:()=>"Move item down"},{key:zo.noDataMessage,default:()=>"No data"},{key:zo.noSelection,default:()=>"No selection"},{key:zo.deleteDialogTitle,default:()=>"Confirm Deletion"},{key:zo.deleteDialogMessage,default:()=>"Are you sure you want to delete the selected entry?"},{key:zo.deleteDialogAccept,default:()=>"Yes"},{key:zo.deleteDialogDecline,default:()=>"No"}],VC={locale:"en",translate:L8,translateError:D8},Mq=(t=VC,e)=>{switch(e.type){case e6:{const n=e.locale??VC.locale,r=e.translator??VC.translate,i=e.errorTranslator??VC.translateError;return n!==t.locale||r!==t.translate||i!==t.translateError?{...t,locale:n,translate:r,translateError:i}:t}case Q8:return{...t,translate:e.translator??L8,translateError:e.errorTranslator??D8};case Z8:return{...t,locale:e.locale??navigator.languages[0]};default:return t}},rvt=t=>t===void 0?L8:t.translate,ivt=t=>t===void 0?D8:t.translateError,wfe=-1,ovt=t=>!or(t)&&t.scope!==void 0,P_=t=>(e,n,r)=>{if(or(e)||!ovt(e)||or(n))return!1;const i=e.scope;if(or(i))return!1;let o=n;return z8(n,"object")&&(o=O_(n,i,r==null?void 0:r.rootSchema)),o===void 0?!1:t(o,r==null?void 0:r.rootSchema)},WS=t=>P_(e=>!or(e)&&z8(e,t)),M8=t=>P_(e=>!or(e)&&e.format===t&&z8(e,"string")),Vl=t=>e=>!or(e)&&e.type===t,YE=(t,e)=>n=>{if(or(n))return!1;const r=n.options;return!or(r)&&r[t]===e},Bl=(...t)=>(e,n,r)=>t.reduce((i,o)=>i&&o(e,n,r),!0),KE=(...t)=>(e,n,r)=>t.reduce((i,o)=>i||o(e,n,r),!1),ys=(t,e)=>(n,r,i)=>e(n,r,i)?t:wfe,avt=Bl(Vl("Control"),WS("boolean")),svt=Bl(Vl("Control"),KE(P_(t=>Object.prototype.hasOwnProperty.call(t,"enum")),P_(t=>Object.prototype.hasOwnProperty.call(t,"const")))),lvt=Bl(Vl("Control"),P_(t=>KD(t))),uvt=Bl(Vl("Control"),WS("integer")),cvt=Bl(Vl("Control"),WS("number")),xfe=Bl(Vl("Control"),WS("string")),fvt=Bl(Vl("Control"),YE("multi",!0)),hvt=Bl(Vl("Control"),KE(M8("date"),YE("format","date"))),dvt=Bl(Vl("Control"),KE(M8("time"),YE("format","time"))),pvt=Bl(Vl("Control"),KE(M8("date-time"),YE("format","date-time"))),gvt=t=>(e,n,r)=>{const i=v8(t,o=>o.tester(e,n,r));if(i!==void 0&&i.tester(e,n,r)!==wfe)return i.uischema},mvt=(t,e,n,r,i="VerticalLayout",o,a)=>{if(o&&o.options&&o.options.detail){if(typeof o.options.detail=="string"){if(o.options.detail.toUpperCase()==="GENERATE")return typeof i=="function"?i():Np.uiSchema(e,i)}else if(typeof o.options.detail=="object"&&o.options.detail.type&&typeof o.options.detail.type=="string")return o.options.detail}const s=gvt(t)(e,n,r);return s===void 0?typeof i=="function"?i():Np.uiSchema(e,i,"#",a):s},Cfe=(t,e)=>n=>Xmt(t,e)(n.jsonforms.core),vvt=(t,e)=>n=>Jmt(t,e)(n.jsonforms.core),Dg=t=>t.jsonforms.config,fd=()=>t=>rvt(na(t,"jsonforms.i18n")),kfe=()=>t=>ivt(na(t,"jsonforms.i18n")),XE=t=>jmt(na(t,"jsonforms.core")),WT=t=>Umt(na(t,"jsonforms.core")),yvt=t=>Wmt(na(t,"jsonforms.core")),HS=t=>Hmt(na(t,"jsonforms.core")),N8=t=>na(t,"jsonforms.renderers"),F8=t=>na(t,"jsonforms.cells"),R8=(t,e)=>{let n=t;return!or(t)&&!or(e)&&!e.startsWith("[")&&(n=t+"."),or(n)?e:or(e)?n:`${n}${e}`},bvt=t=>{const r=t.replace(/(anyOf|allOf|oneOf)\/[\d]\//g,"").replace(/(then|else)\//g,"").split("/").map(JE),o=r[0]==="#"||r[0]===""?2:1;return vmt(o,r.length,2).map(a=>r[a])},Tfe=(t,e)=>{if(!Lmt(t))return e??"";const n=bvt(t.scope);return or(n)?e??"":R8(e,n.join("."))},_vt=t=>t==null?void 0:t.replace(/~/g,"~0").replace(/\//g,"~1"),JE=t=>t==null?void 0:t.replace(/~1/g,"/").replace(/~0/,"~"),qD=(t,e)=>or(e)?t:e.split(".").reduce((r,i)=>{if(!(!r||!Object.prototype.hasOwnProperty.call(r,i)))return r[i]},t),Svt=t=>t==="#"||t===void 0||t==="",O_=(t,e,n)=>{const r=e==null?void 0:e.split("/").map(JE);return F2(t,r,n)},F2=(t,e,n)=>{if(or(t))return;if(t.$ref&&(t=O_(n,t.$ref,n)),!e||e.length===0)return t;const[r,...i]=e;if(Svt(r))return F2(t,i,n);const o=na(t,r),a=F2(o,i,n);if(a)return a;if(r==="properties"||r==="items"){let s;const l=[].concat(t.oneOf??[],t.allOf??[],t.anyOf??[],t.then??[],t.else??[]);for(const u of l)if(s=F2(u,[r,...i],n),s)break;return s}},wvt=t=>t.type==="OR",xvt=t=>t.type==="AND",Cvt=t=>t.type==="LEAF",kvt=t=>Tmt(t,"schema"),Nq=(t,e)=>Tfe(t,e),YD=(t,e,n,r)=>{if(xvt(e))return e.conditions.reduce((i,o)=>i&&YD(t,o,n,r),!0);if(wvt(e))return e.conditions.reduce((i,o)=>i||YD(t,o,n,r),!1);if(Cvt(e))return qD(t,Nq(e,n))===e.expectedValue;if(kvt(e)){const i=qD(t,Nq(e,n));return r.validate(e.schema,i)}else return!0},Afe=(t,e,n,r)=>{const i=t.rule.condition;return YD(e,i,n,r)},Tvt=(t,e,n=void 0,r)=>{const i=Afe(t,e,n,r);switch(t.rule.effect){case Sc.HIDE:return!i;case Sc.SHOW:return i;default:return!0}},Avt=(t,e,n=void 0,r)=>{const i=Afe(t,e,n,r);switch(t.rule.effect){case Sc.DISABLE:return!i;case Sc.ENABLE:return i;default:return!0}},V8=t=>!!(t.rule&&(t.rule.effect===Sc.SHOW||t.rule.effect===Sc.HIDE)),Evt=t=>!!(t.rule&&(t.rule.effect===Sc.ENABLE||t.rule.effect===Sc.DISABLE)),ZE=(t,e,n=void 0,r)=>t.rule?Tvt(t,e,n,r):!0,Pvt=(t,e,n=void 0,r)=>t.rule?Avt(t,e,n,r):!0,B8=(t,e,n,r,i,o)=>{var a,s,l;return(a=t==null?void 0:t.jsonforms)!=null&&a.readonly?!1:n&&Evt(n)?Pvt(n,i,e==null?void 0:e.path,HS(t)):typeof((s=n==null?void 0:n.options)==null?void 0:s.readonly)=="boolean"?!n.options.readonly:typeof((l=n==null?void 0:n.options)==null?void 0:l.readOnly)=="boolean"?!n.options.readOnly:typeof(o==null?void 0:o.readonly)=="boolean"?!o.readonly:typeof(o==null?void 0:o.readOnly)=="boolean"?!o.readOnly:(r==null?void 0:r.readOnly)===!0?!1:typeof(e==null?void 0:e.enabled)=="boolean"?e.enabled:!0},Ovt=t=>t==null?"":t.join(`
`),z8=(t,e)=>Wgt(HT(t),e),HT=t=>{if(or(t))return[];if(!or(t.type)&&typeof t.type=="string")return[t.type];if(cQe(t.type))return t.type;if(!or(t.properties)||!or(t.additionalProperties))return["object"];if(!or(t.items))return["array"];if(!or(t.allOf)){const e=pfe(t.allOf,n=>HT(n).length!==0);if(e)return HT(e)}return[]},Mg={schema:O_,data:qD},o4=(t,e)=>{if(e&&typeof e.title=="string")return e.title;if(typeof t.scope=="string"){const n=t.scope,r=JE(n.substr(n.lastIndexOf("/")+1));return Ace(r)}return""},Ivt=(t,e)=>{const n=t.label;if(typeof n=="boolean")return BC(o4(t,e),n);if(typeof n=="string")return BC(n,!0);if(typeof n=="object"){const r=typeof n.text=="string"?n.text:o4(t,e),i=typeof n.show=="boolean"?n.show:!0;return BC(r,i)}return BC(o4(t,e),!0)},BC=(t,e)=>({text:t,show:e}),$vt=(t,e,n)=>{const r=e.split("/"),i=r[r.length-1],a=r.slice(0,r.length-2).join("/"),s=Mg.schema(t,a,n);return s!==void 0&&s.required!==void 0&&s.required.indexOf(i)!==-1},Lvt=(t,e,n)=>`${t??""}${e&&!n?"*":""}`,Fq=t=>{switch(t.type){case"string":return t.format==="date-time"||t.format==="date"||t.format==="time"?new Date:"";case"integer":case"number":return 0;case"boolean":return!1;case"array":return[];case"null":return null;default:return{}}},Dvt=(t,e,n,r)=>e===void 0||e!==void 0&&!t||!r&&!n,Rq=(t,e,n)=>{let r=typeof t=="string"?t:JSON.stringify(t);return e&&(n?r=e(`${n}.${r}`,r):r=e(r,r)),{label:r,value:t}},Mvt=(t,e,n)=>{let r=t.title??(typeof t.const=="string"?t.const:JSON.stringify(t.const));return e&&(t.i18n?r=e(t.i18n,r):n?r=e(`${n}.${r}`,r):r=e(r,r)),{label:r,value:t.const}},QE=(t,e)=>{const{uischema:n}=e,r=XE(t),i=Tfe(n,e.path),o=e.visible===void 0||V8(n)?ZE(n,r,e.path,HS(t)):e.visible,a=n,s=e.id,l=WT(t),u=a.scope!==void 0&&$vt(e.schema,a.scope,l),c=Mg.schema(e.schema||l,a.scope,l),f=Cfe(i,c)(t),h=c!==void 0?c.description:"",d=Mg.data(r,i),g=Ivt(n,c),y=g.show?g.text:"",_=Dg(t),v=B8(t,e,n,c||l,r,_),S=c??l,C=fd()(t),k=kfe()(t),x=E_(S,n,i),m=C(UT(S,n,i,"label"),y,{schema:S,uischema:n,path:i,errors:f}),T=C(UT(S,n,i,"description"),h,{schema:S,uischema:n,path:i,errors:f}),P=Sfe(f,k,C,S,n,i);return{data:d,description:T,errors:P,label:m,visible:o,enabled:v,id:s,path:i,required:u,uischema:n,schema:S,config:Dg(t),cells:e.cells||t.jsonforms.cells,rootSchema:l,i18nKeyPrefix:x}},eP=t=>({handleChange(e,n){t(yv(e,()=>n))}}),Nvt=(t,e)=>{var i;const n=QE(t,e),r=e.options||((i=n.schema.enum)==null?void 0:i.map(o=>Rq(o,fd()(t),E_(n.schema,n.uischema,n.path))))||n.schema.const&&[Rq(n.schema.const,fd()(t),E_(n.schema,n.uischema,n.path))];return{...n,options:r}},Fvt=(t,e)=>{var i;const n=QE(t,e),r=e.options||((i=n.schema.oneOf)==null?void 0:i.map(o=>Mvt(o,fd()(t),E_(n.schema,n.uischema,n.path))));return{...n,options:r}},Rvt=(t,e)=>{const{...n}=QE(t,e);return{...n,uischemas:t.jsonforms.uischemas}},Vvt=(t,e)=>{const{path:n,schema:r,uischema:i,i18nKeyPrefix:o,label:a,...s}=Rvt(t,e),l=Mg.schema(r,"items",s.rootSchema),u=vvt(n,l)(t),c=fd()(t);return{...s,label:a,path:n,uischema:i,schema:l,childErrors:u,renderers:e.renderers||N8(t),cells:e.cells||F8(t),translations:tvt(c,nvt,o,a)}},Bvt=t=>({addItem:(e,n)=>()=>{t(yv(e,r=>r==null?[n]:(r.push(n),r)))},removeItems:(e,n)=>()=>{t(yv(e,r=>(n.sort().reverse().forEach(i=>r.splice(i,1)),r)))},moveUp:(e,n)=>()=>{t(yv(e,r=>(Mmt(r,n),r)))},moveDown:(e,n)=>()=>{t(yv(e,r=>(Nmt(r,n),r)))}}),Efe={visible:!0,enabled:!0,path:"",direction:"column"},zvt=t=>t.type==="HorizontalLayout"?"row":t.type==="VerticalLayout"?"column":Efe.direction,jvt=(t,e)=>{const n=XE(t),{uischema:r}=e,i=e.visible===void 0||V8(r)?ZE(e.uischema,n,e.path,HS(t)):e.visible,o=Mg.data(n,e.path),a=Dg(t),s=B8(t,e,r,void 0,n,a),l=fd()(t),u=Dmt(r)?evt(r,l):void 0;return{...Efe,renderers:e.renderers||N8(t),cells:e.cells||F8(t),visible:i,enabled:s,path:e.path,data:o,uischema:e.uischema,schema:e.schema,direction:e.direction??zvt(r),config:a,label:u}},Uvt=(t,e)=>({renderers:e.renderers||na(t.jsonforms,"renderers"),cells:e.cells||na(t.jsonforms,"cells"),schema:e.schema||WT(t),rootSchema:WT(t),uischema:e.uischema||yvt(t),path:e.path,enabled:e.enabled,config:Dg(t)}),Wvt=(t,e)=>{const{uischema:n}=e,r=e.visible===void 0||V8(n)?ZE(e.uischema,XE(t),e.path,HS(t)):e.visible,i=n.text,o=fd()(t),a=$8(void 0,n),s=a?`${a}.text`:i??"";return{text:o(s,i,{uischema:n}),visible:r,config:Dg(t),renderers:e.renderers||N8(t),cells:e.cells||F8(t)}},Hvt=(t,e)=>{const{id:n,schema:r,path:i,uischema:o,renderers:a,cells:s}=e,l=XE(t),u=e.visible!==void 0?e.visible:ZE(o,l,void 0,HS(t)),c=WT(t),f=Dg(t);let h;t.jsonforms.readonly===!0?h=!1:typeof e.enabled=="boolean"?h=e.enabled:h=B8(t,e,o,r||c,l,f);const d=fd()(t),g=kfe()(t),y=Sfe(Cfe(i,r)(t),g,d,r,o,i),_=or(y);return{data:Mg.data(l,i),visible:u,enabled:h,id:n,path:i,errors:y,isValid:_,schema:r,uischema:o,config:Dg(t),rootSchema:c,renderers:a,cells:s}},Gvt=(t,e)=>{const n=Hvt(t,e),{renderers:r,cells:i,...o}=e;return{...n,...o,cells:i||t.jsonforms.cells||[]}},j8=new Set,Pfe=(t,e)=>e<=1?t:t+e.toString(),qvt=(t,e)=>{const n=Pfe(t,e);return!j8.has(n)},Yvt=t=>{t===void 0&&(t="undefined");let e=0;for(;!qvt(t,e);)e++;const n=Pfe(t,e);return j8.add(n),n},Kvt=t=>j8.delete(t),Xvt=t=>{if(t.properties)return pfe(Object.keys(t.properties),e=>{const n=t.properties[e];return n.type==="string"||n.type==="number"||n.type==="integer"})},KD=t=>!!t&&Object.prototype.hasOwnProperty.call(t,"oneOf")&&t.oneOf&&t.oneOf.every(e=>e.const!==void 0),Jvt=t=>{const e=new Cie({allErrors:!0,verbose:!0,strict:!1,...t});return Emt(e),e},Ofe=t=>({type:t,elements:[]}),R2=t=>({type:"Control",scope:t}),Zvt=(t,e)=>{if(!or(t)&&!I8(t)){const n=Ofe(e);return n.elements.push(t),n}return t},Qvt=(t,e)=>{if(!or(e)){const n=Ace(e);if(Imt(t))t.label=n;else{const r={type:"Label",text:n};t.elements.push(r)}}},e0t=t=>!or(t)&&(!or(t.oneOf)||!or(t.anyOf)||!or(t.allOf)),XD=(t,e,n,r,i,o)=>{if(!or(t)&&t.$ref!==void 0)return XD(O_(o,t.$ref,o),e,n,r,i,o);if(e0t(t)){const s=R2(n);return e.push(s),s}const a=HT(t);if(a.length===0)return null;if(a.length>1){const s=R2(n);return e.push(s),s}if(n==="#"&&a[0]==="object"){const s=Ofe(i);if(e.push(s),t.properties&&qet(t.properties).length>1&&Qvt(s,r),!or(t.properties)){const l=n+"/properties";Object.keys(t.properties).map(u=>{let c=t.properties[u];const f=`${l}/${_vt(u)}`;c.$ref!==void 0&&(c=O_(o,c.$ref,o)),XD(c,s.elements,f,u,i,o)})}return s}switch(a[0]){case"object":case"array":case"string":case"number":case"integer":case"boolean":{const s=R2(n);return e.push(s),s}default:throw new Error("Unknown type: "+JSON.stringify(t))}},Ife=(t,e="VerticalLayout",n="#",r=t)=>Zvt(XD(t,[],n,"",e,r),e),Np={jsonSchema:vfe,uiSchema:Ife,controlElement:R2},U8="jsonforms/INIT",W8="jsonforms/UPDATE_CORE",H8="jsonforms/SET_AJV",G8="jsonforms/UPDATE",q8="jsonforms/UPDATE_ERRORS",t0t="jsonforms/VALIDATE",$fe="jsonforms/ADD_RENDERER",Lfe="jsonforms/REMOVE_RENDERER",Dfe="jsonforms/ADD_CELL",Mfe="jsonforms/REMOVE_CELL",Y8="jsonforms/SET_CONFIG",Nfe="jsonforms/ADD_UI_SCHEMA",Ffe="jsonforms/REMOVE_UI_SCHEMA",K8="jsonforms/SET_SCHEMA",X8="jsonforms/SET_UISCHEMA",J8="jsonforms/SET_VALIDATION_MODE",Z8="jsonforms/SET_LOCALE",Q8="jsonforms/SET_TRANSLATOR",e6="jsonforms/UPDATE_I18N",Rfe="jsonforms/ADD_DEFAULT_DATA",Vfe="jsonforms/REMOVE_DEFAULT_DATA",n0t=(t,e=vfe(t),n,r)=>({type:U8,data:t,schema:e,uischema:typeof n=="object"?n:Ife(e),options:r}),r0t=(t,e,n,r)=>({type:W8,data:t,schema:e,uischema:n,options:r}),i0t=(t,e)=>({type:Rfe,schemaPath:t,data:e}),o0t=t=>({type:Vfe,schemaPath:t}),a0t=t=>({type:H8,ajv:t}),yv=(t,e)=>({type:G8,path:t,updater:e}),s0t=t=>({type:q8,errors:t}),l0t=(t,e)=>({type:$fe,tester:t,renderer:e}),u0t=(t,e)=>({type:Dfe,tester:t,cell:e}),c0t=(t,e)=>({type:Mfe,tester:t,cell:e}),f0t=(t,e)=>({type:Lfe,tester:t,renderer:e}),h0t=t=>({type:Y8,config:t}),d0t=t=>({type:J8,validationMode:t}),p0t=(t,e)=>({type:Nfe,tester:t,uischema:e}),g0t=t=>({type:Ffe,tester:t}),m0t=t=>({type:Z8,locale:t}),v0t=t=>({type:K8,schema:t}),y0t=(t,e)=>({type:Q8,translator:t,errorTranslator:e}),b0t=(t,e,n)=>({type:e6,locale:t,translator:e,errorTranslator:n}),_0t=t=>({type:X8,uischema:t});var zm=Object.freeze({__proto__:null,INIT:U8,UPDATE_CORE:W8,SET_AJV:H8,UPDATE_DATA:G8,UPDATE_ERRORS:q8,VALIDATE:t0t,ADD_RENDERER:$fe,REMOVE_RENDERER:Lfe,ADD_CELL:Dfe,REMOVE_CELL:Mfe,SET_CONFIG:Y8,ADD_UI_SCHEMA:Nfe,REMOVE_UI_SCHEMA:Ffe,SET_SCHEMA:K8,SET_UISCHEMA:X8,SET_VALIDATION_MODE:J8,SET_LOCALE:Z8,SET_TRANSLATOR:Q8,UPDATE_I18N:e6,ADD_DEFAULT_DATA:Rfe,REMOVE_DEFAULT_DATA:Vfe,init:n0t,updateCore:r0t,registerDefaultData:i0t,unregisterDefaultData:o0t,setAjv:a0t,update:yv,updateErrors:s0t,registerRenderer:l0t,registerCell:u0t,unregisterCell:c0t,unregisterRenderer:f0t,setConfig:h0t,setValidationMode:d0t,registerUISchema:p0t,unregisterUISchema:g0t,setLocale:m0t,setSchema:v0t,setTranslator:y0t,updateI18n:b0t,setUISchema:_0t});function Vq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Vq(Object(n),!0).forEach(function(r){S0t(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function JD(t){"@babel/helpers - typeof";return JD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},JD(t)}function S0t(t,e,n){return e=C0t(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function w0t(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function tP(t,e){if(t==null)return{};var n=w0t(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function x0t(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function C0t(t){var e=x0t(t,"string");return typeof e=="symbol"?e:String(e)}var t6=zt({name:"UnknownRenderer"});function k0t(t,e,n,r,i,o){return Oe(),We("div",null,"No applicable renderer found.")}t6.render=k0t;var T0t=["control"],A0t=["rootSchema"],E0t=["control"],P0t=["control"],aa=function(){return{schema:{required:!0,type:[Object,Boolean]},uischema:{required:!0,type:Object},path:{required:!0,type:String},enabled:{required:!1,type:Boolean,default:void 0},renderers:{required:!1,type:Array,default:void 0},cells:{required:!1,type:Array,default:void 0},config:{required:!1,type:Object,default:void 0}}};function rm(t,e,n){var r=Ni("jsonforms"),i=Ni("dispatch");if(!r||!i)throw"'jsonforms' or 'dispatch' couldn't be injected. Are you within JSON Forms?";var o=Tl(void 0),a=Ln(function(){return hf(hf(hf({},t),e({jsonforms:r},t)),{},{id:o.value})}),s=n==null?void 0:n(i);return XM(function(){a.value.uischema.scope&&(o.value=Yvt(a.value.uischema.scope))}),K_(function(){o.value&&(Kvt(o.value),o.value=void 0)}),hf({control:a},s)}var kd=function(e){return rm(e,QE,eP)},O0t=function(e){return rm(e,Nvt,eP)},I0t=function(e){return rm(e,Fvt,eP)},$0t=function(e){return rm(e,Vvt,Bvt)},Bfe=function(e){var n=rm(e,jvt),r=n.control,i=tP(n,T0t);return hf({layout:r},i)},L0t=function(e){var n=Ni("jsonforms"),r=Ni("dispatch");if(!n||!r)throw"'jsonforms' or 'dispatch' couldn't be injected. Are you within JSON Forms?";var i=Ln(function(){return Uvt({jsonforms:n},e)}),o=Ln(function(){return i.value.rootSchema}),a=Ln(function(){var s=i.value;s.rootSchema;var l=tP(s,A0t);return l});return{renderer:a,rootSchema:o}},D0t=function(e){var n=rm(e,Wvt),r=n.control,i=tP(n,E0t);return hf({label:r},i)},M0t=function(e){var n=rm(e,Gvt,eP),r=n.control,i=tP(n,P0t);return hf({cell:r},i)},GS=zt({name:"DispatchRenderer",props:hf({},aa()),setup:function(e){return L0t(e)},computed:{determinedRenderer:function(){var e=this,n={rootSchema:this.rootSchema,config:this.config},r=v8(this.renderer.renderers,function(i){return i.tester(e.renderer.uischema,e.renderer.schema,n)});return r===void 0||r.tester(this.renderer.uischema,this.renderer.schema,n)===-1?t6:r.renderer}}});function N0t(t,e,n,r,i,o){return Oe(),tn(ZM(t.determinedRenderer),$M(mA(t.renderer)),null,16)}GS.render=N0t;var F0t=zt({name:"DispatchCell",props:hf({},aa()),setup:function(e){return M0t(e)},computed:{determinedCell:function(){var e=this,n={rootSchema:this.cell.rootSchema,config:this.config},r=v8(this.cell.cells,function(i){return i.tester(e.cell.uischema,e.cell.schema,n)});return r===void 0||r.tester(this.cell.uischema,this.cell.schema,n)===-1?t6:r.cell}}});function R0t(t,e,n,r,i,o){return Oe(),tn(ZM(t.determinedCell),$M(mA(t.cell)),null,16)}F0t.render=R0t;var Bq=function(e){return e&&JD(e)==="object"},V0t=dd([]),zfe=zt({name:"JsonForms",components:{DispatchRenderer:GS},provide:function(){return{jsonforms:this.jsonforms,dispatch:this.dispatch}},props:{data:{required:!0,type:[String,Number,Boolean,Array,Object]},schema:{required:!1,type:[Object,Boolean],default:void 0},uischema:{required:!1,type:Object,default:void 0},renderers:{required:!0,type:Array},cells:{required:!1,type:Array,default:function(){return[]}},config:{required:!1,type:Object,default:void 0},readonly:{required:!1,type:Boolean,default:!1},uischemas:{required:!1,type:Array,default:function(){return[]}},validationMode:{required:!1,type:String,default:"ValidateAndShow"},ajv:{required:!1,type:Object,default:void 0},i18n:{required:!1,type:Object,default:void 0},additionalErrors:{required:!1,type:Array,default:function(){return V0t}}},emits:["change"],data:function(){var e,n,r=this,i,o,a,s=this.data,l=Bq(s)?s:{},u=(e=this.schema)!==null&&e!==void 0?e:Np.jsonSchema(l),c=(n=this.uischema)!==null&&n!==void 0?n:Np.uiSchema(u),f=function(){var d={data:s,schema:u,uischema:c},g=i4(d,zm.init(s,u,c,{validationMode:r.validationMode,ajv:r.ajv,additionalErrors:r.additionalErrors}));return g};return{schemaToUse:u,dataToUse:s,uischemaToUse:c,jsonforms:{core:f(),config:Iq(void 0,zm.setConfig(this.config)),i18n:Mq(this.i18n,zm.updateI18n((i=this.i18n)===null||i===void 0?void 0:i.locale,(o=this.i18n)===null||o===void 0?void 0:o.translate,(a=this.i18n)===null||a===void 0?void 0:a.translateError)),renderers:this.renderers,cells:this.cells,uischemas:this.uischemas,readonly:this.readonly}}},computed:{coreDataToUpdate:function(){return[this.dataToUse,this.schemaToUse,this.uischemaToUse,this.validationMode,this.ajv,this.additionalErrors]},eventToEmit:function(){return{data:this.jsonforms.core.data,errors:this.jsonforms.core.errors}}},watch:{schema:function(e){var n=Bq(this.data)?this.data:{};this.schemaToUse=e??Np.jsonSchema(n),this.uischema||(this.uischemaToUse=Np.uiSchema(this.schemaToUse))},uischema:function(e){this.uischemaToUse=e??Np.uiSchema(this.schemaToUse)},data:function(e){this.dataToUse=e},renderers:function(e){this.jsonforms.renderers=e},cells:function(e){this.jsonforms.cells=e},uischemas:function(e){this.jsonforms.uischemas=e},config:{handler:function(e){this.jsonforms.config=Iq(void 0,zm.setConfig(e))},deep:!0},readonly:function(e){this.jsonforms.readonly=e},coreDataToUpdate:function(){this.jsonforms.core=i4(this.jsonforms.core,zm.updateCore(this.dataToUse,this.schemaToUse,this.uischemaToUse,{validationMode:this.validationMode,ajv:this.ajv,additionalErrors:this.additionalErrors}))},eventToEmit:function(e){this.$emit("change",e)},i18n:{handler:function(e){this.jsonforms.i18n=Mq(this.jsonforms.i18n,zm.updateI18n(e==null?void 0:e.locale,e==null?void 0:e.translate,e==null?void 0:e.translateError))},deep:!0}},mounted:function(){this.$emit("change",{data:this.jsonforms.core.data,errors:this.jsonforms.core.errors})},methods:{dispatch:function(e){this.jsonforms.core=i4(this.jsonforms.core,e)}}});function B0t(t,e,n,r,i,o){var a=$t("dispatch-renderer");return Oe(),tn(a,{schema:t.jsonforms.core.schema,uischema:t.jsonforms.core.uischema,path:""},null,8,["schema","uischema"])}zfe.render=B0t;var z0t=Rce,j0t=jce,U0t=j0t(function(t,e,n,r){z0t(t,e,n,r)}),W0t=U0t;const H0t=pr(W0t);function zq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ci(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zq(Object(n),!0).forEach(function(r){G0t(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function G0t(t,e,n){return e=Z0t(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jq(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function zC(t){return q0t(t)||Y0t(t)||K0t(t)||X0t()}function q0t(t){if(Array.isArray(t))return ZD(t)}function Y0t(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function K0t(t,e){if(t){if(typeof t=="string")return ZD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZD(t,e)}}function ZD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function X0t(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J0t(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Z0t(t){var e=J0t(t,"string");return typeof e=="symbol"?e:String(e)}var GT={control:{root:"control",wrapper:"wrapper",label:"label",description:"description",input:"input",error:"error",textarea:"text-area",select:"select",option:"option"},verticalLayout:{root:"vertical-layout",item:"vertical-layout-item"},horizontalLayout:{root:"horizontal-layout",item:"horizontal-layout-item"},group:{root:"group",label:"group-label",item:"group-item"},arrayList:{root:"array-list",legend:"array-list-legend",addButton:"array-list-add",label:"array-list-label",itemWrapper:"array-list-item-wrapper",noData:"array-list-no-data",item:"array-list-item",itemToolbar:"array-list-item-toolbar",itemLabel:"array-list-item-label",itemContent:"array-list-item-content",itemExpanded:"expanded",itemMoveUp:"array-list-item-move-up",itemMoveDown:"array-list-item-move-down",itemDelete:"array-list-item-delete"},label:{root:"label-element"}},Q0t=function(){return{control:{},verticalLayout:{},horizontalLayout:{},group:{},arrayList:{},label:{}}},nP=function(e){var n,r,i=Ni("styles",GT);if(!(e!=null&&(n=e.options)!==null&&n!==void 0&&n.styles))return i;var o=Q0t();return i?zh(o,i):zh(o,GT),e!=null&&(r=e.options)!==null&&r!==void 0&&r.styles&&zh(o,e.options.styles),o},Uq=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return e.reduce(function(o,a,s){return"".concat(o).concat(a).concat(r[s]||"")},"").trim()},eyt=function(e,n){var r=vu(e);return H0t(r,n,function(i,o){if(typeof i=="string"&&typeof o=="string")return"".concat(i," ").concat(o)}),r},Tc=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(s){return s.value},r=Ln(function(){return zh({},vu(e.control.value.config),vu(e.control.value.uischema.options))}),i=Tl(!1),o=function(l){e.handleChange(e.control.value.path,n(l.target))},a=Ln(function(){var s=e.control.value,l=s.id,u=s.description,c=s.errors,f=s.label,h=s.visible,d=s.required;return{id:l,description:u,errors:c,label:f,visible:h,required:d}});return Ci(Ci({},e),{},{styles:nP(e.control.value.uischema),isFocused:i,appliedOptions:r,controlWrapper:a,onChange:o})},jfe=function(e){var n=Ln(function(){return zh({},vu(e.layout.value.config),vu(e.layout.value.uischema.options))});return Ci(Ci({},e),{},{styles:nP(e.layout.value.uischema),appliedOptions:n})},tyt=function(e){var n=Ln(function(){return zh({},vu(e.label.value.config),vu(e.label.value.uischema.options))});return Ci(Ci({},e),{},{styles:nP(e.label.value.uischema),appliedOptions:n})},nyt=function(e){var n=Ln(function(){return zh({},vu(e.control.value.config),vu(e.control.value.uischema.options))}),r=Ln(function(){return mvt(e.control.value.uischemas,e.control.value.schema,e.control.value.uischema.scope,e.control.value.path,void 0,e.control.value.uischema,e.control.value.rootSchema)}),i=function(a){var s,l,u=(s=(l=e.control.value.uischema.options)===null||l===void 0?void 0:l.childLabelProp)!==null&&s!==void 0?s:Xvt(e.control.value.schema);if(!u)return"".concat(a);var c=Mg.data(e.control.value.data,R8("".concat(a),u));return c==null||isNaN(c)?"":"".concat(c)};return Ci(Ci({},e),{},{styles:nP(e.control.value.uischema),appliedOptions:n,childUiSchema:r,childLabelForIndex:i})},Wq,Hq,Ufe=zt({name:"ArrayListElement",props:{initiallyExpanded:{required:!1,type:Boolean,default:!1},label:{required:!1,type:String,default:""},moveUpEnabled:{required:!1,type:Boolean,default:!0},moveDownEnabled:{required:!1,type:Boolean,default:!0},moveUp:{required:!1,type:Function,default:void 0},moveDown:{required:!1,type:Function,default:void 0},delete:{required:!1,type:Function,default:void 0},styles:{required:!0,type:Object}},data:function(){return{expanded:this.initiallyExpanded}},computed:{contentClasses:function(){return Uq(Wq||(Wq=jq([""," ",""])),this.styles.arrayList.itemContent,this.expanded&&this.styles.arrayList.itemExpanded)},toolbarClasses:function(){return Uq(Hq||(Hq=jq([""," ",""])),this.styles.arrayList.itemToolbar,this.expanded&&this.styles.arrayList.itemExpanded)}},methods:{expandClicked:function(){this.expanded=!this.expanded},moveUpClicked:function(e){var n;e.stopPropagation(),(n=this.moveUp)===null||n===void 0||n.call(this)},moveDownClicked:function(e){var n;e.stopPropagation(),(n=this.moveDown)===null||n===void 0||n.call(this)},deleteClicked:function(e){var n;e.stopPropagation(),(n=this.delete)===null||n===void 0||n.call(this)}}}),ryt=["disabled"],iyt=["disabled"];function oyt(t,e,n,r,i,o){return Oe(),We("div",{class:Wt(t.styles.arrayList.item)},[X("div",{class:Wt(t.toolbarClasses),onClick:e[3]||(e[3]=function(){return t.expandClicked&&t.expandClicked.apply(t,arguments)})},[X("div",{class:Wt(t.styles.arrayList.itemLabel)},en(t.label),3),X("button",{disabled:!t.moveUpEnabled,class:Wt(t.styles.arrayList.itemMoveUp),type:"button",onClick:e[0]||(e[0]=function(){return t.moveUpClicked&&t.moveUpClicked.apply(t,arguments)})}," ↑ ",10,ryt),X("button",{disabled:!t.moveDownEnabled,class:Wt(t.styles.arrayList.itemMoveDown),type:"button",onClick:e[1]||(e[1]=function(){return t.moveDownClicked&&t.moveDownClicked.apply(t,arguments)})}," ↓ ",10,iyt),X("button",{class:Wt(t.styles.arrayList.itemDelete),type:"button",onClick:e[2]||(e[2]=function(){return t.deleteClicked&&t.deleteClicked.apply(t,arguments)})}," 🗙 ",2)],2),X("div",{class:Wt(t.contentClasses)},[eN(t.$slots,"default")],2)],2)}Ufe.render=oyt;var Wfe=zt({name:"ArrayListRenderer",components:{ArrayListElement:Ufe,DispatchRenderer:GS},props:Ci({},aa()),setup:function(e){return nyt($0t(e))},computed:{noData:function(){return!this.control.data||this.control.data.length===0}},methods:{composePaths:R8,createDefaultValue:Fq,addButtonClick:function(){this.addItem(this.control.path,Fq(this.control.schema))()}}}),ayt={renderer:Wfe,tester:ys(2,WS("array"))};function syt(t,e,n,r,i,o){var a=$t("dispatch-renderer"),s=$t("array-list-element");return t.control.visible?(Oe(),We("fieldset",{key:0,class:Wt(t.styles.arrayList.root)},[X("legend",{class:Wt(t.styles.arrayList.legend)},[X("button",{class:Wt(t.styles.arrayList.addButton),type:"button",onClick:e[0]||(e[0]=function(){return t.addButtonClick&&t.addButtonClick.apply(t,arguments)})}," + ",2),X("label",{class:Wt(t.styles.arrayList.label)},en(t.control.label),3)],2),(Oe(!0),We(bn,null,Po(t.control.data,function(l,u){return Oe(),We("div",{key:"".concat(t.control.path,"-").concat(u),class:Wt(t.styles.arrayList.itemWrapper)},[lt(s,{"move-up":t.moveUp(t.control.path,u),"move-up-enabled":u>0,"move-down":t.moveDown(t.control.path,u),"move-down-enabled":u<t.control.data.length-1,delete:t.removeItems(t.control.path,[u]),label:t.childLabelForIndex(u),styles:t.styles},{default:gs(function(){return[lt(a,{schema:t.control.schema,uischema:t.childUiSchema,path:t.composePaths(t.control.path,"".concat(u)),enabled:t.control.enabled,renderers:t.control.renderers,cells:t.control.cells},null,8,["schema","uischema","path","enabled","renderers","cells"])]}),_:2},1032,["move-up","move-up-enabled","move-down","move-down-enabled","delete","label","styles"])],2)}),128)),t.noData?(Oe(),We("div",{key:0,class:Wt(t.styles.arrayList.noData)},en(t.control.translations.noDataMessage),3)):ut("",!0)],2)):ut("",!0)}Wfe.render=syt;var lyt=[ayt],ku=zt({name:"ControlWrapper",props:{id:{required:!0,type:String},description:{required:!1,type:String,default:void 0},errors:{required:!1,type:String,default:void 0},label:{required:!1,type:String,default:void 0},appliedOptions:{required:!1,type:Object,default:void 0},visible:{required:!1,type:Boolean,default:!0},required:{required:!1,type:Boolean,default:!1},isFocused:{required:!1,type:Boolean,default:!1},styles:{required:!0,type:Object}},computed:{showDescription:function(){var e;return!Dvt(this.visible,this.description,this.isFocused,!!((e=this.appliedOptions)!==null&&e!==void 0&&e.showUnfocusedDescription))},computedLabel:function(){var e;return Lvt(this.label,this.required,!!((e=this.appliedOptions)!==null&&e!==void 0&&e.hideRequiredAsterisk))}}}),uyt=["id"],cyt=["for"];function fyt(t,e,n,r,i,o){return t.visible?(Oe(),We("div",{key:0,id:t.id,class:Wt(t.styles.control.root)},[X("label",{for:t.id+"-input",class:Wt(t.styles.control.label)},en(t.computedLabel),11,cyt),X("div",{class:Wt(t.styles.control.wrapper)},[eN(t.$slots,"default")],2),X("div",{class:Wt(t.errors?t.styles.control.error:t.styles.control.description)},en(t.errors?t.errors:t.showDescription?t.description:null),3)],10,uyt)):ut("",!0)}ku.render=fyt;var Hfe=zt({name:"StringControlRenderer",components:{ControlWrapper:ku},props:Ci({},aa()),setup:function(e){return Tc(kd(e),function(n){return n.value||void 0})}}),hyt={renderer:Hfe,tester:ys(1,xfe)},dyt=["id","value","disabled","autofocus","placeholder"];function pyt(t,e,n,r,i,o){var a=$t("control-wrapper");return Oe(),tn(a,Dl(t.controlWrapper,{styles:t.styles,"is-focused":t.isFocused,"applied-options":t.appliedOptions}),{default:gs(function(){return[X("input",{id:t.control.id+"-input",class:Wt(t.styles.control.input),value:t.control.data,disabled:!t.control.enabled,autofocus:t.appliedOptions.focus,placeholder:t.appliedOptions.placeholder,onChange:e[0]||(e[0]=function(){return t.onChange&&t.onChange.apply(t,arguments)}),onFocus:e[1]||(e[1]=function(s){return t.isFocused=!0}),onBlur:e[2]||(e[2]=function(s){return t.isFocused=!1})},null,42,dyt)]}),_:1},16,["styles","is-focused","applied-options"])}Hfe.render=pyt;var Gfe=zt({name:"MultiStringControlRenderer",components:{ControlWrapper:ku},props:Ci({},aa()),setup:function(e){return Tc(kd(e),function(n){return n.value||void 0})}}),gyt={renderer:Gfe,tester:ys(2,Bl(xfe,fvt))},myt=["id","value","disabled","autofocus","placeholder"];function vyt(t,e,n,r,i,o){var a=$t("control-wrapper");return Oe(),tn(a,Dl(t.controlWrapper,{styles:t.styles,"is-focused":t.isFocused,"applied-options":t.appliedOptions}),{default:gs(function(){return[X("textarea",{id:t.control.id+"-input",class:Wt(t.styles.control.textarea),value:t.control.data,disabled:!t.control.enabled,autofocus:t.appliedOptions.focus,placeholder:t.appliedOptions.placeholder,onChange:e[0]||(e[0]=function(){return t.onChange&&t.onChange.apply(t,arguments)}),onFocus:e[1]||(e[1]=function(s){return t.isFocused=!0}),onBlur:e[2]||(e[2]=function(s){return t.isFocused=!1})},null,42,myt)]}),_:1},16,["styles","is-focused","applied-options"])}Gfe.render=vyt;var qfe=zt({name:"NumberControlRenderer",components:{ControlWrapper:ku},props:Ci({},aa()),setup:function(e){return Tc(kd(e),function(n){return n.value===""?void 0:Number(n.value)})},computed:{step:function(){var e,n=this.appliedOptions;return(e=n.step)!==null&&e!==void 0?e:.1}}}),yyt={renderer:qfe,tester:ys(1,cvt)},byt=["id","step","value","disabled","autofocus","placeholder"];function _yt(t,e,n,r,i,o){var a=$t("control-wrapper");return Oe(),tn(a,Dl(t.controlWrapper,{styles:t.styles,"is-focused":t.isFocused,"applied-options":t.appliedOptions}),{default:gs(function(){return[X("input",{id:t.control.id+"-input",type:"number",step:t.step,class:Wt(t.styles.control.input),value:t.control.data,disabled:!t.control.enabled,autofocus:t.appliedOptions.focus,placeholder:t.appliedOptions.placeholder,onChange:e[0]||(e[0]=function(){return t.onChange&&t.onChange.apply(t,arguments)}),onFocus:e[1]||(e[1]=function(s){return t.isFocused=!0}),onBlur:e[2]||(e[2]=function(s){return t.isFocused=!1})},null,42,byt)]}),_:1},16,["styles","is-focused","applied-options"])}qfe.render=_yt;var Yfe=zt({name:"IntegerControlRenderer",components:{ControlWrapper:ku},props:Ci({},aa()),setup:function(e){return Tc(kd(e),function(n){return n.value===""?void 0:parseInt(n.value,10)})}}),Syt={renderer:Yfe,tester:ys(1,uvt)},wyt=["id","value","disabled","autofocus","placeholder"];function xyt(t,e,n,r,i,o){var a=$t("control-wrapper");return Oe(),tn(a,Dl(t.controlWrapper,{styles:t.styles,"is-focused":t.isFocused,"applied-options":t.appliedOptions}),{default:gs(function(){return[X("input",{id:t.control.id+"-input",type:"number",step:1,class:Wt(t.styles.control.input),value:t.control.data,disabled:!t.control.enabled,autofocus:t.appliedOptions.focus,placeholder:t.appliedOptions.placeholder,onChange:e[0]||(e[0]=function(){return t.onChange&&t.onChange.apply(t,arguments)}),onFocus:e[1]||(e[1]=function(s){return t.isFocused=!0}),onBlur:e[2]||(e[2]=function(s){return t.isFocused=!1})},null,42,wyt)]}),_:1},16,["styles","is-focused","applied-options"])}Yfe.render=xyt;var Kfe=zt({name:"EnumControlRenderer",components:{ControlWrapper:ku},props:Ci({},aa()),setup:function(e){return Tc(O0t(e),function(n){return n.selectedIndex===0?void 0:n.value})}}),Cyt={renderer:Kfe,tester:ys(2,svt)},kyt=["id","value","disabled","autofocus"],Tyt=["value","label"];function Ayt(t,e,n,r,i,o){var a=$t("control-wrapper");return Oe(),tn(a,Dl(t.controlWrapper,{styles:t.styles,"is-focused":t.isFocused,"applied-options":t.appliedOptions}),{default:gs(function(){return[X("select",{id:t.control.id+"-select",class:Wt(t.styles.control.select),value:t.control.data,disabled:!t.control.enabled,autofocus:t.appliedOptions.focus,onChange:e[0]||(e[0]=function(){return t.onChange&&t.onChange.apply(t,arguments)}),onFocus:e[1]||(e[1]=function(s){return t.isFocused=!0}),onBlur:e[2]||(e[2]=function(s){return t.isFocused=!1})},[X("option",{key:"empty",value:"",class:Wt(t.styles.control.option)},null,2),(Oe(!0),We(bn,null,Po(t.control.options,function(s){return Oe(),We("option",{key:s.value,value:s.value,label:s.label,class:Wt(t.styles.control.option)},null,10,Tyt)}),128))],42,kyt)]}),_:1},16,["styles","is-focused","applied-options"])}Kfe.render=Ayt;var Xfe=zt({name:"EnumOneofControlRenderer",components:{ControlWrapper:ku},props:Ci({},aa()),setup:function(e){return Tc(I0t(e),function(n){return n.selectedIndex===0?void 0:n.value})}}),Eyt={renderer:Xfe,tester:ys(2,lvt)},Pyt=["id","value","disabled","autofocus"],Oyt=["value","label"];function Iyt(t,e,n,r,i,o){var a=$t("control-wrapper");return Oe(),tn(a,Dl(t.controlWrapper,{styles:t.styles,"is-focused":t.isFocused,"applied-options":t.appliedOptions}),{default:gs(function(){return[X("select",{id:t.control.id+"-input",class:Wt(t.styles.control.select),value:t.control.data,disabled:!t.control.enabled,autofocus:t.appliedOptions.focus,onChange:e[0]||(e[0]=function(){return t.onChange&&t.onChange.apply(t,arguments)}),onFocus:e[1]||(e[1]=function(s){return t.isFocused=!0}),onBlur:e[2]||(e[2]=function(s){return t.isFocused=!1})},[X("option",{key:"empty",value:"",class:Wt(t.styles.control.option)},null,2),(Oe(!0),We(bn,null,Po(t.control.options,function(s){return Oe(),We("option",{key:s.value,value:s.value,label:s.label,class:Wt(t.styles.control.option)},null,10,Oyt)}),128))],42,Pyt)]}),_:1},16,["styles","is-focused","applied-options"])}Xfe.render=Iyt;var Jfe=zt({name:"DateControlRenderer",components:{ControlWrapper:ku},props:Ci({},aa()),setup:function(e){return Tc(kd(e),function(n){return n.value||void 0})}}),$yt={renderer:Jfe,tester:ys(2,hvt)},Lyt=["id","value","disabled","autofocus","placeholder"];function Dyt(t,e,n,r,i,o){var a=$t("control-wrapper");return Oe(),tn(a,Dl(t.controlWrapper,{styles:t.styles,"is-focused":t.isFocused,"applied-options":t.appliedOptions}),{default:gs(function(){return[X("input",{id:t.control.id+"-input",type:"date",class:Wt(t.styles.control.input),value:t.control.data,disabled:!t.control.enabled,autofocus:t.appliedOptions.focus,placeholder:t.appliedOptions.placeholder,onChange:e[0]||(e[0]=function(){return t.onChange&&t.onChange.apply(t,arguments)}),onFocus:e[1]||(e[1]=function(s){return t.isFocused=!0}),onBlur:e[2]||(e[2]=function(s){return t.isFocused=!1})},null,42,Lyt)]}),_:1},16,["styles","is-focused","applied-options"])}Jfe.render=Dyt;var Myt=function(e){return e===""?void 0:e+":00.000Z"},Zfe=zt({name:"DatetimeControlRenderer",components:{ControlWrapper:ku},props:Ci({},aa()),setup:function(e){return Tc(kd(e),function(n){return Myt(n.value)})},computed:{dataTime:function(){var e;return((e=this.control.data)!==null&&e!==void 0?e:"").substr(0,16)}}}),Nyt={renderer:Zfe,tester:ys(2,pvt)},Fyt=["id","value","disabled","autofocus","placeholder"];function Ryt(t,e,n,r,i,o){var a=$t("control-wrapper");return Oe(),tn(a,Dl(t.controlWrapper,{styles:t.styles,"is-focused":t.isFocused,"applied-options":t.appliedOptions}),{default:gs(function(){return[X("input",{id:t.control.id+"-input",type:"datetime-local",class:Wt(t.styles.control.input),value:t.dataTime,disabled:!t.control.enabled,autofocus:t.appliedOptions.focus,placeholder:t.appliedOptions.placeholder,onChange:e[0]||(e[0]=function(){return t.onChange&&t.onChange.apply(t,arguments)}),onFocus:e[1]||(e[1]=function(s){return t.isFocused=!0}),onBlur:e[2]||(e[2]=function(s){return t.isFocused=!1})},null,42,Fyt)]}),_:1},16,["styles","is-focused","applied-options"])}Zfe.render=Ryt;var Qfe=zt({name:"TimeControlRenderer",components:{ControlWrapper:ku},props:Ci({},aa()),setup:function(e){return Tc(kd(e),function(n){return n.value||void 0})}}),Vyt={renderer:Qfe,tester:ys(2,dvt)},Byt=["id","value","disabled","autofocus","placeholder"];function zyt(t,e,n,r,i,o){var a=$t("control-wrapper");return Oe(),tn(a,Dl(t.controlWrapper,{styles:t.styles,"is-focused":t.isFocused,"applied-options":t.appliedOptions}),{default:gs(function(){return[X("input",{id:t.control.id+"-input",type:"time",class:Wt(t.styles.control.input),value:t.control.data,disabled:!t.control.enabled,autofocus:t.appliedOptions.focus,placeholder:t.appliedOptions.placeholder,onChange:e[0]||(e[0]=function(){return t.onChange&&t.onChange.apply(t,arguments)}),onFocus:e[1]||(e[1]=function(s){return t.isFocused=!0}),onBlur:e[2]||(e[2]=function(s){return t.isFocused=!1})},null,42,Byt)]}),_:1},16,["styles","is-focused","applied-options"])}Qfe.render=zyt;var ehe=zt({name:"BooleanControlRenderer",components:{ControlWrapper:ku},props:Ci({},aa()),setup:function(e){return Tc(kd(e),function(n){return n.checked})}}),jyt={renderer:ehe,tester:ys(1,avt)},Uyt=["id","checked","disabled","autofocus","placeholder"];function Wyt(t,e,n,r,i,o){var a=$t("control-wrapper");return Oe(),tn(a,Dl(t.controlWrapper,{styles:t.styles,"is-focused":t.isFocused,"applied-options":t.appliedOptions}),{default:gs(function(){return[X("input",{id:t.control.id+"-input",type:"checkbox",class:Wt(t.styles.control.input),checked:!!t.control.data,disabled:!t.control.enabled,autofocus:t.appliedOptions.focus,placeholder:t.appliedOptions.placeholder,onChange:e[0]||(e[0]=function(){return t.onChange&&t.onChange.apply(t,arguments)}),onFocus:e[1]||(e[1]=function(s){return t.isFocused=!0}),onBlur:e[2]||(e[2]=function(s){return t.isFocused=!1})},null,42,Uyt)]}),_:1},16,["styles","is-focused","applied-options"])}ehe.render=Wyt;var Hyt=[hyt,gyt,yyt,Syt,Cyt,Eyt,$yt,Nyt,Vyt,jyt],the=zt({name:"LayoutRenderer",components:{DispatchRenderer:GS},props:Ci({},aa()),setup:function(e){return jfe(Bfe(e))},computed:{layoutClassObject:function(){return this.layout.direction==="row"?this.styles.horizontalLayout:this.styles.verticalLayout}}}),Gyt={renderer:the,tester:ys(1,I8)};function qyt(t,e,n,r,i,o){var a=$t("dispatch-renderer");return t.layout.visible?(Oe(),We("div",{key:0,class:Wt(t.layoutClassObject.root)},[(Oe(!0),We(bn,null,Po(t.layout.uischema.elements,function(s,l){return Oe(),We("div",{key:"".concat(t.layout.path,"-").concat(l),class:Wt(t.layoutClassObject.item)},[lt(a,{schema:t.layout.schema,uischema:s,path:t.layout.path,enabled:t.layout.enabled,renderers:t.layout.renderers,cells:t.layout.cells},null,8,["schema","uischema","path","enabled","renderers","cells"])],2)}),128))],2)):ut("",!0)}the.render=qyt;var nhe=zt({name:"GroupRenderer",components:{DispatchRenderer:GS},props:Ci({},aa()),setup:function(e){return jfe(Bfe(e))}}),Yyt={renderer:nhe,tester:ys(2,Bl(I8,Vl("Group")))};function Kyt(t,e,n,r,i,o){var a=$t("dispatch-renderer");return t.layout.visible?(Oe(),We("fieldset",{key:0,class:Wt(t.styles.group.root)},[t.layout.label?(Oe(),We("legend",{key:0,class:Wt(t.styles.group.label)},en(t.layout.label),3)):ut("",!0),(Oe(!0),We(bn,null,Po(t.layout.uischema.elements,function(s,l){return Oe(),We("div",{key:"".concat(t.layout.path,"-").concat(l),class:Wt(t.styles.group.item)},[lt(a,{schema:t.layout.schema,uischema:s,path:t.layout.path,enabled:t.layout.enabled,renderers:t.layout.renderers,cells:t.layout.cells},null,8,["schema","uischema","path","enabled","renderers","cells"])],2)}),128))],2)):ut("",!0)}nhe.render=Kyt;var Xyt=[Gyt,Yyt],rhe=zt({name:"LabelRenderer",props:Ci({},aa()),setup:function(e){return tyt(D0t(e))}}),Jyt={renderer:rhe,tester:ys(1,Vl("Label"))};function Zyt(t,e,n,r,i,o){return t.label.visible?(Oe(),We("label",{key:0,class:Wt(t.styles.label.root)},en(t.label.text),3)):ut("",!0)}rhe.render=Zyt;var Qyt=[Jyt],ebt=[].concat(zC(Hyt),zC(Xyt),zC(lyt),zC(Qyt));const tbt=eyt(GT,{arrayList:{addButton:"is-hidden",itemContent:"expanded",itemToolbar:"is-hidden"}}),nbt=[...ebt],rbt=zt({components:{JsonForms:zfe},provide(){const t=this.placesStore.place.schema;return t.maxItems&&t.maxItems===1?{styles:tbt}:{styles:GT}},data(){return{renderers:Object.freeze(nbt)}},computed:{...Yt(Af),...Yt(Aa)},methods:{onFormChange(t){this.placesStore.savePlaceMarkingFromForm(t.data)},onSingleTokenFormChange(t){this.placesStore.savePlaceMarkingFromForm([t.data])}}}),ibt={class:"block"};function obt(t,e,n,r,i,o){const a=$t("json-forms");return Oe(),We("div",ibt,[t.placesStore.place.schema.maxItems!==1?(Oe(),tn(a,{key:0,data:t.placesStore.formsData,schema:t.placesStore.place.schema,renderers:t.renderers,onChange:t.onFormChange},null,8,["data","schema","renderers","onChange"])):ut("",!0),t.placesStore.place.marking.length>0?(Oe(),tn(a,{key:1,data:t.placesStore.formsData[0],schema:t.placesStore.place.schema.items,renderers:t.renderers,onChange:t.onSingleTokenFormChange},null,8,["data","schema","renderers","onChange"])):ut("",!0)])}const abt=ai(rbt,[["render",obt]]),sbt=zt({data(){return{data:{data:null}}},computed:{...Yt(Af),...Yt(Zn),...Yt(zs)},created(){this.load()},methods:{async load(){var n;const t=(n=this.configStore.getPlaceTypeById(this.netStore.placeTypes[this.placesStore.place.id]))==null?void 0:n.externalInteraction;if(!t||t.type==="none")return;const e=await fetch(t.url);this.data=await e.json()},setPlaceData(t){var r;this.placesStore.place.name=t.name,this.placesStore.saveName();const e=(r=this.configStore.getPlaceTypeById(this.netStore.placeTypes[this.placesStore.place.id]))==null?void 0:r.externalInteraction;if(!e||e.type!=="pull")return;const n=t.marking;n[0]={...t.marking[0],...e.enforcedMarking},this.placesStore.savePlaceMarkingFromEditor(JSON.stringify(n))}}}),lbt={key:0},ubt={class:"table is-size-7 is-fullwidth"},cbt=X("thead",null,[X("th",null,"Eintrag"),X("th",null,"Aktionen")],-1),fbt=["onClick"],hbt=X("hr",null,null,-1);function dbt(t,e,n,r,i,o){return t.data?(Oe(),We("div",lbt,[X("table",ubt,[cbt,X("tbody",null,[(Oe(!0),We(bn,null,Po(t.data.data,a=>(Oe(),We("tr",null,[X("td",null,en(a.name),1),X("td",null,[X("a",{onClick:s=>t.setPlaceData(a)}," Laden ",8,fbt)])]))),256))])]),hbt])):ut("",!0)}const pbt=ai(sbt,[["render",dbt]]),gbt=zt({components:{DataForm:abt,DataEditor:Nue,DataLoader:pbt},computed:{...Yt(Af),...Yt(Zn),...Yt(Aa),...Yt(zs),isDeletable(){return this.placesStore.databaseMap[this.placesStore.place.id]!==""}},watch:{"placesStore.markingString"(t){this.placesStore.savePlaceMarkingFromEditor(t)}},methods:{async deleteData(){var n;const t=(n=this.configStore.getPlaceTypeById(this.netStore.placeTypes[this.placesStore.place.id]))==null?void 0:n.externalInteraction;if(!t||t.type==="none")return;const e=this.placesStore.databaseMap[this.placesStore.place.id];!e||e===""?alert("Daten wurden bisher noch nicht veröffentlicht."):await fetch(t.url+e,{method:"DELETE"}).then(r=>r.json()).then(()=>{this.placesStore.databaseMap[this.placesStore.place.id]="",alert("Daten wurden gelöscht.")})},async publish(){var o;const t=(o=this.configStore.getPlaceTypeById(this.netStore.placeTypes[this.placesStore.place.id]))==null?void 0:o.externalInteraction;if(!t||t.type==="none")return;const e=this.placesStore.databaseMap[this.placesStore.place.id],n=JSON.parse(JSON.stringify(this.placesStore.place.marking));Zn().resetModel();const r=Zn().export(),i={name:this.placesStore.place.name,marking:n,model:JSON.parse(r)};e===""?await fetch(t.url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(a=>a.json()).then(a=>{const s=a._id;alert("Daten wurden veröffentlicht (ID: "+s+"). Das Modell wurde zurückgesetzt."),this.placesStore.databaseMap[this.placesStore.place.id]=s}):await fetch(t.url+e,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(a=>a.json()).then(a=>{alert("Daten wurden aktualisiert (ID: "+e+").")})}}}),mbt={key:3,class:"block"},vbt=["disabled"];function ybt(t,e,n,r,i,o){var u,c;const a=$t("DataLoader"),s=$t("DataForm"),l=$t("DataEditor");return Oe(),We(bn,null,[((u=t.configStore.getPlaceTypeById(t.netStore.placeTypes[t.placesStore.place.id]))==null?void 0:u.externalInteraction.type)==="pull"?(Oe(),tn(a,{key:0})):ut("",!0),t.uiStateStore.uiAssistMode==="assisted"?(Oe(),tn(s,{key:1})):t.uiStateStore.uiAssistMode==="expert"?(Oe(),tn(l,{key:2})):ut("",!0),((c=t.configStore.getPlaceTypeById(t.netStore.placeTypes[t.placesStore.place.id]))==null?void 0:c.externalInteraction.type)==="push"&&t.placesStore.place.marking.length>0?(Oe(),We("div",mbt,[X("button",{class:"button is-pulled-right is-primary is-small",style:{"margin-left":"auto"},onClick:e[0]||(e[0]=f=>t.publish())},"Veröffentlichen"),X("button",{class:"button is-pulled-right is-danger is-small mr-2",style:{"margin-left":"auto"},onClick:e[1]||(e[1]=f=>t.deleteData()),disabled:!t.isDeletable},"Löschen",8,vbt)])):ut("",!0)],64)}const bbt=ai(gbt,[["render",ybt]]);function bv(t,e,n){var r=t.get("borderRadius");if(r==null)return n?{cornerRadius:0}:null;mt(r)||(r=[r,r,r,r]);var i=Math.abs(e.r||0-e.r0||0);return{cornerRadius:Qt(r,function(o){return l0(o,i)})}}var jC=Math.PI*2,Gq=Math.PI/180;function ihe(t,e){return c0(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function ohe(t,e){var n=ihe(t,e),r=t.get("center"),i=t.get("radius");mt(i)||(i=[0,i]);var o=Kr(n.width,e.getWidth()),a=Kr(n.height,e.getHeight()),s=Math.min(o,a),l=Kr(i[0],s/2),u=Kr(i[1],s/2),c,f,h=t.coordinateSystem;if(h){var d=h.dataToPoint(r);c=d[0]||0,f=d[1]||0}else mt(r)||(r=[r,r]),c=Kr(r[0],o)+n.x,f=Kr(r[1],a)+n.y;return{cx:c,cy:f,r0:l,r:u}}function _bt(t,e,n){e.eachSeriesByType(t,function(r){var i=r.getData(),o=i.mapDimension("value"),a=ihe(r,n),s=ohe(r,n),l=s.cx,u=s.cy,c=s.r,f=s.r0,h=-r.get("startAngle")*Gq,d=r.get("minAngle")*Gq,g=0;i.each(o,function(M){!isNaN(M)&&g++});var y=i.getSum(o),_=Math.PI/(y||g)*2,v=r.get("clockwise"),S=r.get("roseType"),C=r.get("stillShowZeroSum"),k=i.getDataExtent(o);k[0]=0;var x=jC,m=0,T=h,P=v?1:-1;if(i.setLayout({viewRect:a,r:c}),i.each(o,function(M,L){var R;if(isNaN(M)){i.setItemLayout(L,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:v,cx:l,cy:u,r0:f,r:S?NaN:c});return}S!=="area"?R=y===0&&C?_:M*_:R=jC/g,R<d?(R=d,x-=d):m+=M;var V=T+P*R;i.setItemLayout(L,{angle:R,startAngle:T,endAngle:V,clockwise:v,cx:l,cy:u,r0:f,r:S?u0(M,k,[f,c]):c}),T=V}),x<jC&&g)if(x<=.001){var I=jC/g;i.each(o,function(M,L){if(!isNaN(M)){var R=i.getItemLayout(L);R.angle=I,R.startAngle=h+P*L*I,R.endAngle=h+P*(L+1)*I}})}else _=x/m,T=h,i.each(o,function(M,L){if(!isNaN(M)){var R=i.getItemLayout(L),V=R.angle===d?d:M*_;R.startAngle=T,R.endAngle=T+P*V,T+=P*V}})})}function ahe(t){return{seriesType:t,reset:function(e,n){var r=n.findComponents({mainType:"legend"});if(!(!r||!r.length)){var i=e.getData();i.filterSelf(function(o){for(var a=i.getName(o),s=0;s<r.length;s++)if(!r[s].isSelected(a))return!1;return!0})}}}}var Sbt=Math.PI/180;function qq(t,e,n,r,i,o,a,s,l,u){if(t.length<2)return;function c(y){for(var _=y.rB,v=_*_,S=0;S<y.list.length;S++){var C=y.list[S],k=Math.abs(C.label.y-n),x=r+C.len,m=x*x,T=Math.sqrt((1-Math.abs(k*k/v))*m),P=e+(T+C.len2)*i,I=P-C.label.x,M=C.targetTextWidth-I*i;she(C,M,!0),C.label.x=P}}function f(y){for(var _={list:[],maxY:0},v={list:[],maxY:0},S=0;S<y.length;S++)if(y[S].labelAlignTo==="none"){var C=y[S],k=C.label.y>n?v:_,x=Math.abs(C.label.y-n);if(x>=k.maxY){var m=C.label.x-e-C.len2*i,T=r+C.len,P=Math.abs(m)<T?Math.sqrt(x*x/(1-m*m/T/T)):T;k.rB=P,k.maxY=x}k.list.push(C)}c(_),c(v)}for(var h=t.length,d=0;d<h;d++)if(t[d].position==="outer"&&t[d].labelAlignTo==="labelLine"){var g=t[d].label.x-u;t[d].linePoints[1][0]+=g,t[d].label.x=u}kMe(t,l,l+a)&&f(t)}function wbt(t,e,n,r,i,o,a,s){for(var l=[],u=[],c=Number.MAX_VALUE,f=-Number.MAX_VALUE,h=0;h<t.length;h++){var d=t[h].label;a4(t[h])||(d.x<e?(c=Math.min(c,d.x),l.push(t[h])):(f=Math.max(f,d.x),u.push(t[h])))}for(var h=0;h<t.length;h++){var g=t[h];if(!a4(g)&&g.linePoints){if(g.labelStyleWidth!=null)continue;var d=g.label,y=g.linePoints,_=void 0;g.labelAlignTo==="edge"?d.x<e?_=y[2][0]-g.labelDistance-a-g.edgeDistance:_=a+i-g.edgeDistance-y[2][0]-g.labelDistance:g.labelAlignTo==="labelLine"?d.x<e?_=c-a-g.bleedMargin:_=a+i-f-g.bleedMargin:d.x<e?_=d.x-a-g.bleedMargin:_=a+i-d.x-g.bleedMargin,g.targetTextWidth=_,she(g,_)}}qq(u,e,n,r,1,i,o,a,s,f),qq(l,e,n,r,-1,i,o,a,s,c);for(var h=0;h<t.length;h++){var g=t[h];if(!a4(g)&&g.linePoints){var d=g.label,y=g.linePoints,v=g.labelAlignTo==="edge",S=d.style.padding,C=S?S[1]+S[3]:0,k=d.style.backgroundColor?0:C,x=g.rect.width+k,m=y[1][0]-y[2][0];v?d.x<e?y[2][0]=a+g.edgeDistance+x+g.labelDistance:y[2][0]=a+i-g.edgeDistance-x-g.labelDistance:(d.x<e?y[2][0]=d.x+g.labelDistance:y[2][0]=d.x-g.labelDistance,y[1][0]=y[2][0]+m),y[1][1]=y[2][1]=d.y}}}function she(t,e,n){if(n===void 0&&(n=!1),t.labelStyleWidth==null){var r=t.label,i=r.style,o=t.rect,a=i.backgroundColor,s=i.padding,l=s?s[1]+s[3]:0,u=i.overflow,c=o.width+(a?0:l);if(e<c||n){var f=o.height;if(u&&u.match("break")){r.setStyle("backgroundColor",null),r.setStyle("width",e-l);var h=r.getBoundingRect();r.setStyle("width",Math.ceil(h.width)),r.setStyle("backgroundColor",a)}else{var d=e-l,g=e<c?d:n?d>t.unconstrainedWidth?null:d:null;r.setStyle("width",g)}var y=r.getBoundingRect();o.width=y.width;var _=(r.style.margin||0)+2.1;o.height=y.height+_,o.y-=(o.height-f)/2}}}function a4(t){return t.position==="center"}function xbt(t){var e=t.getData(),n=[],r,i,o=!1,a=(t.get("minShowLabelAngle")||0)*Sbt,s=e.getLayout("viewRect"),l=e.getLayout("r"),u=s.width,c=s.x,f=s.y,h=s.height;function d(m){m.ignore=!0}function g(m){if(!m.ignore)return!0;for(var T in m.states)if(m.states[T].ignore===!1)return!0;return!1}e.each(function(m){var T=e.getItemGraphicEl(m),P=T.shape,I=T.getTextContent(),M=T.getTextGuideLine(),L=e.getItemModel(m),R=L.getModel("label"),V=R.get("position")||L.get(["emphasis","label","position"]),z=R.get("distanceToLabelLine"),ie=R.get("alignTo"),oe=Kr(R.get("edgeDistance"),u),Se=R.get("bleedMargin"),Ae=L.getModel("labelLine"),Ee=Ae.get("length");Ee=Kr(Ee,u);var _e=Ae.get("length2");if(_e=Kr(_e,u),Math.abs(P.endAngle-P.startAngle)<a){be(I.states,d),I.ignore=!0,M&&(be(M.states,d),M.ignore=!0);return}if(g(I)){var se=(P.startAngle+P.endAngle)/2,ne=Math.cos(se),J=Math.sin(se),B,H,ae,te;r=P.cx,i=P.cy;var ce=V==="inside"||V==="inner";if(V==="center")B=P.cx,H=P.cy,te="center";else{var ue=(ce?(P.r+P.r0)/2*ne:P.r*ne)+r,fe=(ce?(P.r+P.r0)/2*J:P.r*J)+i;if(B=ue+ne*3,H=fe+J*3,!ce){var ye=ue+ne*(Ee+l-P.r),j=fe+J*(Ee+l-P.r),Y=ye+(ne<0?-1:1)*_e,O=j;ie==="edge"?B=ne<0?c+oe:c+u-oe:B=Y+(ne<0?-z:z),H=O,ae=[[ue,fe],[ye,j],[Y,O]]}te=ce?"center":ie==="edge"?ne>0?"right":"left":ne>0?"left":"right"}var F=Math.PI,U=0,Q=R.get("rotate");if(Zr(Q))U=Q*(F/180);else if(V==="center")U=0;else if(Q==="radial"||Q===!0){var ve=ne<0?-se+F:-se;U=ve}else if(Q==="tangential"&&V!=="outside"&&V!=="outer"){var ge=Math.atan2(ne,J);ge<0&&(ge=F*2+ge);var Me=J>0;Me&&(ge=F+ge),U=ge-F}if(o=!!U,I.x=B,I.y=H,I.rotation=U,I.setStyle({verticalAlign:"middle"}),ce){I.setStyle({align:te});var Xe=I.states.select;Xe&&(Xe.x+=I.x,Xe.y+=I.y)}else{var De=I.getBoundingRect().clone();De.applyTransform(I.getComputedTransform());var tt=(I.style.margin||0)+2.1;De.y-=tt/2,De.height+=tt,n.push({label:I,labelLine:M,position:V,len:Ee,len2:_e,minTurnAngle:Ae.get("minTurnAngle"),maxSurfaceAngle:Ae.get("maxSurfaceAngle"),surfaceNormal:new ln(ne,J),linePoints:ae,textAlign:te,labelDistance:z,labelAlignTo:ie,edgeDistance:oe,bleedMargin:Se,rect:De,unconstrainedWidth:De.width,labelStyleWidth:I.style.width})}T.setTextConfig({inside:ce})}}),!o&&t.get("avoidLabelOverlap")&&wbt(n,r,i,l,u,h,c,f);for(var y=0;y<n.length;y++){var _=n[y],v=_.label,S=_.labelLine,C=isNaN(v.x)||isNaN(v.y);if(v){v.setStyle({align:_.textAlign}),C&&(be(v.states,d),v.ignore=!0);var k=v.states.select;k&&(k.x+=v.x,k.y+=v.y)}if(S){var x=_.linePoints;C||!x?(be(S.states,d),S.ignore=!0):(yMe(x,_.minTurnAngle),bMe(x,_.surfaceNormal,_.maxSurfaceAngle),S.setShape({points:x}),v.__hostTarget.textGuideLineConfig={anchor:new ln(x[0][0],x[0][1])})}}}var Cbt=function(t){Cr(e,t);function e(n,r,i){var o=t.call(this)||this;o.z2=2;var a=new ea;return o.setTextContent(a),o.updateData(n,r,i,!0),o}return e.prototype.updateData=function(n,r,i,o){var a=this,s=n.hostModel,l=n.getItemModel(r),u=l.getModel("emphasis"),c=n.getItemLayout(r),f=ot(bv(l.getModel("itemStyle"),c,!0),c);if(isNaN(f.startAngle)){a.setShape(f);return}if(o){a.setShape(f);var h=s.getShallow("animationType");s.ecModel.ssr?(Nv(a,{scaleX:0,scaleY:0},s,{dataIndex:r,isFrom:!0}),a.originX=f.cx,a.originY=f.cy):h==="scale"?(a.shape.r=c.r0,Nv(a,{shape:{r:c.r}},s,r)):i!=null?(a.setShape({startAngle:i,endAngle:i}),Nv(a,{shape:{startAngle:c.startAngle,endAngle:c.endAngle}},s,r)):(a.shape.endAngle=c.startAngle,Cg(a,{shape:{endAngle:c.endAngle}},s,r))}else lne(a),Cg(a,{shape:f},s,r);a.useStyle(n.getItemVisual(r,"style")),xL(a,l);var d=(c.startAngle+c.endAngle)/2,g=s.get("selectedOffset"),y=Math.cos(d)*g,_=Math.sin(d)*g,v=l.getShallow("cursor");v&&a.attr("cursor",v),this._updateLabel(s,n,r),a.ensureState("emphasis").shape=ot({r:c.r+(u.get("scale")&&u.get("scaleSize")||0)},bv(u.getModel("itemStyle"),c)),ot(a.ensureState("select"),{x:y,y:_,shape:bv(l.getModel(["select","itemStyle"]),c)}),ot(a.ensureState("blur"),{shape:bv(l.getModel(["blur","itemStyle"]),c)});var S=a.getTextGuideLine(),C=a.getTextContent();S&&ot(S.ensureState("select"),{x:y,y:_}),ot(C.ensureState("select"),{x:y,y:_}),zk(this,u.get("focus"),u.get("blurScope"),u.get("disabled"))},e.prototype._updateLabel=function(n,r,i){var o=this,a=r.getItemModel(i),s=a.getModel("labelLine"),l=r.getItemVisual(i,"style"),u=l&&l.fill,c=l&&l.opacity;Hk(o,EL(a),{labelFetcher:r.hostModel,labelDataIndex:i,inheritColor:u,defaultOpacity:c,defaultText:n.getFormattedLabel(i,"normal")||r.getName(i)});var f=o.getTextContent();o.setTextConfig({position:null,rotation:null}),f.attr({z2:10});var h=n.get(["label","position"]);if(h!=="outside"&&h!=="outer")o.removeTextGuideLine();else{var d=this.getTextGuideLine();d||(d=new HA,this.setTextGuideLine(d)),SMe(this,wMe(a),{stroke:u,opacity:$v(s.get(["lineStyle","opacity"]),c,1)})}},e}(dS),kbt=function(t){Cr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.ignoreLabelLineUpdate=!0,n}return e.prototype.render=function(n,r,i,o){var a=n.getData(),s=this._data,l=this.group,u;if(!s&&a.count()>0){for(var c=a.getItemLayout(0),f=1;isNaN(c&&c.startAngle)&&f<a.count();++f)c=a.getItemLayout(f);c&&(u=c.startAngle)}if(this._emptyCircleSector&&l.remove(this._emptyCircleSector),a.count()===0&&n.get("showEmptyCircle")){var h=new dS({shape:ohe(n,i)});h.useStyle(n.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=h,l.add(h)}a.diff(s).add(function(d){var g=new Cbt(a,d,u);a.setItemGraphicEl(d,g),l.add(g)}).update(function(d,g){var y=s.getItemGraphicEl(g);y.updateData(a,d,u),y.off("click"),l.add(y),a.setItemGraphicEl(d,y)}).remove(function(d){var g=s.getItemGraphicEl(d);sne(g,n,d)}).execute(),xbt(n),n.get("animationTypeUpdate")!=="expansion"&&(this._data=a)},e.prototype.dispose=function(){},e.prototype.containPoint=function(n,r){var i=r.getData(),o=i.getItemLayout(0);if(o){var a=n[0]-o.cx,s=n[1]-o.cy,l=Math.sqrt(a*a+s*s);return l<=o.r&&l>=o.r0}},e.type="pie",e}(Rh);const Tbt=kbt;function Abt(t,e,n){e=mt(e)&&{coordDimensions:e}||ot({encodeDefine:t.getEncode()},e);var r=t.getSource(),i=eE(r,e).dimensions,o=new s_(i,t);return o.initData(r,n),o}var Ebt=function(){function t(e,n){this._getDataWithEncodedVisual=e,this._getRawData=n}return t.prototype.getAllNames=function(){var e=this._getRawData();return e.mapArray(e.getName)},t.prototype.containName=function(e){var n=this._getRawData();return n.indexOfName(e)>=0},t.prototype.indexOfName=function(e){var n=this._getDataWithEncodedVisual();return n.indexOfName(e)},t.prototype.getItemVisual=function(e,n){var r=this._getDataWithEncodedVisual();return r.getItemVisual(e,n)},t}();const Pbt=Ebt;var Obt=no(),Ibt=function(t){Cr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.init=function(n){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new Pbt(Or(this.getData,this),Or(this.getRawData,this)),this._defaultLabelLine(n)},e.prototype.mergeOption=function(){t.prototype.mergeOption.apply(this,arguments)},e.prototype.getInitialData=function(){return Abt(this,{coordDimensions:["value"],encodeDefaulter:Vr(X4e,this)})},e.prototype.getDataParams=function(n){var r=this.getData(),i=Obt(r),o=i.seats;if(!o){var a=[];r.each(r.mapDimension("value"),function(l){a.push(l)}),o=i.seats=IOe(a,r.hostModel.get("percentPrecision"))}var s=t.prototype.getDataParams.call(this,n);return s.percent=o[n]||0,s.$vars.push("percent"),s},e.prototype._defaultLabelLine=function(n){mL(n,"labelLine",["show"]);var r=n.labelLine,i=n.emphasis.labelLine;r.show=r.show&&n.label.show,i.show=i.show&&n.emphasis.label.show},e.type="series.pie",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},e}(Tg);const $bt=Ibt;function Lbt(t){return{seriesType:t,reset:function(e,n){var r=e.getData();r.filterSelf(function(i){var o=r.mapDimension("value"),a=r.get(o,i);return!(Zr(a)&&!isNaN(a)&&a<0)})}}}function Dbt(t){t.registerChartView(Tbt),t.registerSeriesModel($bt),VLe("pie",t.registerAction),t.registerLayout(Vr(_bt,"pie")),t.registerProcessor(ahe("pie")),t.registerProcessor(Lbt("pie"))}function Yq(t,e,n){n=n||{};var r=t.coordinateSystem,i=e.axis,o={},a=i.getAxesOnZeroOf()[0],s=i.position,l=a?"onZero":s,u=i.dim,c=r.getRect(),f=[c.x,c.x+c.width,c.y,c.y+c.height],h={left:0,right:1,top:0,bottom:1,onZero:2},d=e.get("offset")||0,g=u==="x"?[f[2]-d,f[3]+d]:[f[0]-d,f[1]+d];if(a){var y=a.toGlobalCoord(a.dataToCoord(0));g[h.onZero]=Math.max(Math.min(y,g[1]),g[0])}o.position=[u==="y"?g[h[l]]:f[0],u==="x"?g[h[l]]:f[3]],o.rotation=Math.PI/2*(u==="x"?0:1);var _={top:-1,bottom:1,left:-1,right:1};o.labelDirection=o.tickDirection=o.nameDirection=_[s],o.labelOffset=a?g[h[s]]-g[h.onZero]:0,e.get(["axisTick","inside"])&&(o.tickDirection=-o.tickDirection),xg(n.labelInside,e.get(["axisLabel","inside"]))&&(o.labelDirection=-o.labelDirection);var v=e.get(["axisLabel","rotate"]);return o.labelRotate=l==="top"?-v:v,o.z2=1,o}var Ph=Math.PI,hg=function(){function t(e,n){this.group=new bc,this.opt=n,this.axisModel=e,pi(n,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var r=new bc({x:n.position[0],y:n.position[1],rotation:n.rotation});r.updateTransform(),this._transformGroup=r}return t.prototype.hasBuilder=function(e){return!!Kq[e]},t.prototype.add=function(e){Kq[e](this.opt,this.axisModel,this.group,this._transformGroup)},t.prototype.getGroup=function(){return this.group},t.innerTextLayout=function(e,n,r){var i=lte(n-e),o,a;return Mk(i)?(a=r>0?"top":"bottom",o="center"):Mk(i-Ph)?(a=r>0?"bottom":"top",o="center"):(a="middle",i>0&&i<Ph?o=r>0?"right":"left":o=r>0?"left":"right"),{rotation:i,textAlign:o,textVerticalAlign:a}},t.makeAxisEventDataBase=function(e){var n={componentType:e.mainType,componentIndex:e.componentIndex};return n[e.mainType+"Index"]=e.componentIndex,n},t.isLabelSilent=function(e){var n=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||n&&n.show)},t}(),Kq={axisLine:function(t,e,n,r){var i=e.get(["axisLine","show"]);if(i==="auto"&&t.handleAutoShown&&(i=t.handleAutoShown("axisLine")),!!i){var o=e.axis.getExtent(),a=r.transform,s=[o[0],0],l=[o[1],0],u=s[0]>l[0];a&&(fc(s,s,a),fc(l,l,a));var c=ot({lineCap:"round"},e.getModel(["axisLine","lineStyle"]).getLineStyle()),f=new pS({shape:{x1:s[0],y1:s[1],x2:l[0],y2:l[1]},style:c,strokeContainThreshold:t.strokeContainThreshold||5,silent:!0,z2:1});bF(f.shape,f.style.lineWidth),f.anid="line",n.add(f);var h=e.get(["axisLine","symbol"]);if(h!=null){var d=e.get(["axisLine","symbolSize"]);Pt(h)&&(h=[h,h]),(Pt(d)||Zr(d))&&(d=[d,d]);var g=QLe(e.get(["axisLine","symbolOffset"])||0,d),y=d[0],_=d[1];be([{rotate:t.rotation+Math.PI/2,offset:g[0],r:0},{rotate:t.rotation-Math.PI/2,offset:g[1],r:Math.sqrt((s[0]-l[0])*(s[0]-l[0])+(s[1]-l[1])*(s[1]-l[1]))}],function(v,S){if(h[S]!=="none"&&h[S]!=null){var C=NF(h[S],-y/2,-_/2,y,_,c.stroke,!0),k=v.r+v.offset,x=u?l:s;C.attr({rotation:v.rotate,x:x[0]+k*Math.cos(t.rotation),y:x[1]-k*Math.sin(t.rotation),silent:!0,z2:11}),n.add(C)}})}}},axisTickLabel:function(t,e,n,r){var i=Fbt(n,r,e,t),o=Vbt(n,r,e,t);if(Nbt(e,o,i),Rbt(n,r,e,t.tickDirection),e.get(["axisLabel","hideOverlap"])){var a=xMe(Qt(o,function(s){return{label:s,priority:s.z2,defaultAttr:{ignore:s.ignore}}}));TMe(a)}},axisName:function(t,e,n,r){var i=xg(t.axisName,e.get("name"));if(i){var o=e.get("nameLocation"),a=t.nameDirection,s=e.getModel("nameTextStyle"),l=e.get("nameGap")||0,u=e.axis.getExtent(),c=u[0]>u[1]?-1:1,f=[o==="start"?u[0]-c*l:o==="end"?u[1]+c*l:(u[0]+u[1])/2,Jq(o)?t.labelOffset+a*l:0],h,d=e.get("nameRotate");d!=null&&(d=d*Ph/180);var g;Jq(o)?h=hg.innerTextLayout(t.rotation,d??t.rotation,a):(h=Mbt(t.rotation,o,d||0,u),g=t.axisNameAvailableWidth,g!=null&&(g=Math.abs(g/Math.sin(h.rotation)),!isFinite(g)&&(g=null)));var y=s.getFont(),_=e.get("nameTruncate",!0)||{},v=_.ellipsis,S=xg(t.nameTruncateMaxWidth,_.maxWidth,g),C=new ea({x:f[0],y:f[1],rotation:h.rotation,silent:hg.isLabelSilent(e),style:kf(s,{text:i,font:y,overflow:"truncate",width:S,ellipsis:v,fill:s.getTextColor()||e.get(["axisLine","lineStyle","color"]),align:s.get("align")||h.textAlign,verticalAlign:s.get("verticalAlign")||h.textVerticalAlign}),z2:1});if(wF({el:C,componentModel:e,itemName:i}),C.__fullText=i,C.anid="name",e.get("triggerEvent")){var k=hg.makeAxisEventDataBase(e);k.targetType="axisName",k.name=i,Br(C).eventData=k}r.add(C),C.updateTransform(),n.add(C),C.decomposeTransform()}}};function Mbt(t,e,n,r){var i=lte(n-t),o,a,s=r[0]>r[1],l=e==="start"&&!s||e!=="start"&&s;return Mk(i-Ph/2)?(a=l?"bottom":"top",o="center"):Mk(i-Ph*1.5)?(a=l?"top":"bottom",o="center"):(a="middle",i<Ph*1.5&&i>Ph/2?o=l?"left":"right":o=l?"right":"left"),{rotation:i,textAlign:o,textVerticalAlign:a}}function Nbt(t,e,n){if(!mMe(t.axis)){var r=t.get(["axisLabel","showMinLabel"]),i=t.get(["axisLabel","showMaxLabel"]);e=e||[],n=n||[];var o=e[0],a=e[1],s=e[e.length-1],l=e[e.length-2],u=n[0],c=n[1],f=n[n.length-1],h=n[n.length-2];r===!1?(sl(o),sl(u)):Xq(o,a)&&(r?(sl(a),sl(c)):(sl(o),sl(u))),i===!1?(sl(s),sl(f)):Xq(l,s)&&(i?(sl(l),sl(h)):(sl(s),sl(f)))}}function sl(t){t&&(t.ignore=!0)}function Xq(t,e){var n=t&&t.getBoundingRect().clone(),r=e&&e.getBoundingRect().clone();if(!(!n||!r)){var i=ZN([]);return QN(i,i,-t.rotation),n.applyTransform(Dv([],i,t.getLocalTransform())),r.applyTransform(Dv([],i,e.getLocalTransform())),n.intersect(r)}}function Jq(t){return t==="middle"||t==="center"}function lhe(t,e,n,r,i){for(var o=[],a=[],s=[],l=0;l<t.length;l++){var u=t[l].coord;a[0]=u,a[1]=0,s[0]=u,s[1]=n,e&&(fc(a,a,e),fc(s,s,e));var c=new pS({shape:{x1:a[0],y1:a[1],x2:s[0],y2:s[1]},style:r,z2:2,autoBatch:!0,silent:!0});bF(c.shape,c.style.lineWidth),c.anid=i+"_"+t[l].tickValue,o.push(c)}return o}function Fbt(t,e,n,r){var i=n.axis,o=n.getModel("axisTick"),a=o.get("show");if(a==="auto"&&r.handleAutoShown&&(a=r.handleAutoShown("axisTick")),!(!a||i.scale.isBlank())){for(var s=o.getModel("lineStyle"),l=r.tickDirection*o.get("length"),u=i.getTicksCoords(),c=lhe(u,e.transform,l,pi(s.getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])}),"ticks"),f=0;f<c.length;f++)t.add(c[f]);return c}}function Rbt(t,e,n,r){var i=n.axis,o=n.getModel("minorTick");if(!(!o.get("show")||i.scale.isBlank())){var a=i.getMinorTicksCoords();if(a.length)for(var s=o.getModel("lineStyle"),l=r*o.get("length"),u=pi(s.getLineStyle(),pi(n.getModel("axisTick").getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])})),c=0;c<a.length;c++)for(var f=lhe(a[c],e.transform,l,u,"minorticks_"+c),h=0;h<f.length;h++)t.add(f[h])}}function Vbt(t,e,n,r){var i=n.axis,o=xg(r.axisLabelShow,n.get(["axisLabel","show"]));if(!(!o||i.scale.isBlank())){var a=n.getModel("axisLabel"),s=a.get("margin"),l=i.getViewLabels(),u=(xg(r.labelRotate,a.get("rotate"))||0)*Ph/180,c=hg.innerTextLayout(r.rotation,u,r.labelDirection),f=n.getCategories&&n.getCategories(!0),h=[],d=hg.isLabelSilent(n),g=n.get("triggerEvent");return be(l,function(y,_){var v=i.scale.type==="ordinal"?i.scale.getRawOrdinalNumber(y.tickValue):y.tickValue,S=y.formattedLabel,C=y.rawLabel,k=a;if(f&&f[v]){var x=f[v];Bt(x)&&x.textStyle&&(k=new uo(x.textStyle,a,n.ecModel))}var m=k.getTextColor()||n.get(["axisLine","lineStyle","color"]),T=i.dataToCoord(v),P=new ea({x:T,y:r.labelOffset+r.labelDirection*s,rotation:c.rotation,silent:d,z2:10+(y.level||0),style:kf(k,{text:S,align:k.getShallow("align",!0)||c.textAlign,verticalAlign:k.getShallow("verticalAlign",!0)||k.getShallow("baseline",!0)||c.textVerticalAlign,fill:Qn(m)?m(i.type==="category"?C:i.type==="value"?v+"":v,_):m})});if(P.anid="label_"+v,g){var I=hg.makeAxisEventDataBase(n);I.targetType="axisLabel",I.value=C,I.tickIndex=_,i.type==="category"&&(I.dataIndex=v),Br(P).eventData=I}e.add(P),P.updateTransform(),h.push(P),t.add(P),P.decomposeTransform()}),h}}const Bbt=hg;function zbt(t,e){var n={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return jbt(n,t,e),n.seriesInvolved&&Wbt(n,t),n}function jbt(t,e,n){var r=e.getComponent("tooltip"),i=e.getComponent("axisPointer"),o=i.get("link",!0)||[],a=[];be(n.getCoordinateSystems(),function(s){if(!s.axisPointerEnabled)return;var l=I_(s.model),u=t.coordSysAxesInfo[l]={};t.coordSysMap[l]=s;var c=s.model,f=c.getModel("tooltip",r);if(be(s.getAxes(),Vr(y,!1,null)),s.getTooltipAxes&&r&&f.get("show")){var h=f.get("trigger")==="axis",d=f.get(["axisPointer","type"])==="cross",g=s.getTooltipAxes(f.get(["axisPointer","axis"]));(h||d)&&be(g.baseAxes,Vr(y,d?"cross":!0,h)),d&&be(g.otherAxes,Vr(y,"cross",!1))}function y(_,v,S){var C=S.model.getModel("axisPointer",i),k=C.get("show");if(!(!k||k==="auto"&&!_&&!QD(C))){v==null&&(v=C.get("triggerTooltip")),C=_?Ubt(S,f,i,e,_,v):C;var x=C.get("snap"),m=C.get("triggerEmphasis"),T=I_(S.model),P=v||x||S.type==="category",I=t.axesInfo[T]={key:T,axis:S,coordSys:s,axisPointerModel:C,triggerTooltip:v,triggerEmphasis:m,involveSeries:P,snap:x,useHandle:QD(C),seriesModels:[],linkGroup:null};u[T]=I,t.seriesInvolved=t.seriesInvolved||P;var M=Hbt(o,S);if(M!=null){var L=a[M]||(a[M]={axesInfo:{}});L.axesInfo[T]=I,L.mapper=o[M].mapper,I.linkGroup=L}}}})}function Ubt(t,e,n,r,i,o){var a=e.getModel("axisPointer"),s=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};be(s,function(h){l[h]=Gn(a.get(h))}),l.snap=t.type!=="category"&&!!o,a.get("type")==="cross"&&(l.type="line");var u=l.label||(l.label={});if(u.show==null&&(u.show=!1),i==="cross"){var c=a.get(["label","show"]);if(u.show=c??!0,!o){var f=l.lineStyle=a.get("crossStyle");f&&pi(u,f.textStyle)}}return t.model.getModel("axisPointer",new uo(l,n,r))}function Wbt(t,e){e.eachSeries(function(n){var r=n.coordinateSystem,i=n.get(["tooltip","trigger"],!0),o=n.get(["tooltip","show"],!0);!r||i==="none"||i===!1||i==="item"||o===!1||n.get(["axisPointer","show"],!0)===!1||be(t.coordSysAxesInfo[I_(r.model)],function(a){var s=a.axis;r.getAxis(s.dim)===s&&(a.seriesModels.push(n),a.seriesDataCount==null&&(a.seriesDataCount=0),a.seriesDataCount+=n.getData().count())})})}function Hbt(t,e){for(var n=e.model,r=e.dim,i=0;i<t.length;i++){var o=t[i]||{};if(s4(o[r+"AxisId"],n.id)||s4(o[r+"AxisIndex"],n.componentIndex)||s4(o[r+"AxisName"],n.name))return i}}function s4(t,e){return t==="all"||mt(t)&&wr(t,e)>=0||t===e}function Gbt(t){var e=n6(t);if(e){var n=e.axisPointerModel,r=e.axis.scale,i=n.option,o=n.get("status"),a=n.get("value");a!=null&&(a=r.parse(a));var s=QD(n);o==null&&(i.status=s?"show":"hide");var l=r.getExtent().slice();l[0]>l[1]&&l.reverse(),(a==null||a>l[1])&&(a=l[1]),a<l[0]&&(a=l[0]),i.value=a,s&&(i.status=e.axis.scale.isBlank()?"hide":"show")}}function n6(t){var e=(t.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[I_(t)]}function qbt(t){var e=n6(t);return e&&e.axisPointerModel}function QD(t){return!!t.get(["handle","show"])}function I_(t){return t.type+"||"+t.id}var Zq={},Ybt=function(t){Cr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i,o){this.axisPointerClass&&Gbt(n),t.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(n,i,!0)},e.prototype.updateAxisPointer=function(n,r,i,o){this._doUpdateAxisPointerClass(n,i,!1)},e.prototype.remove=function(n,r){var i=this._axisPointer;i&&i.remove(r)},e.prototype.dispose=function(n,r){this._disposeAxisPointer(r),t.prototype.dispose.apply(this,arguments)},e.prototype._doUpdateAxisPointerClass=function(n,r,i){var o=e.getAxisPointerClass(this.axisPointerClass);if(o){var a=qbt(n);a?(this._axisPointer||(this._axisPointer=new o)).render(n,a,r,i):this._disposeAxisPointer(r)}},e.prototype._disposeAxisPointer=function(n){this._axisPointer&&this._axisPointer.dispose(n),this._axisPointer=null},e.registerAxisPointerClass=function(n,r){Zq[n]=r},e.getAxisPointerClass=function(n){return n&&Zq[n]},e.type="axis",e}(ld);const Kbt=Ybt;var Ol=no();function uhe(t){var e=t.mainData,n=t.datas;n||(n={main:e},t.datasAttr={main:"data"}),t.datas=t.mainData=null,che(e,n,t),be(n,function(r){be(e.TRANSFERABLE_METHODS,function(i){r.wrapMethod(i,Vr(Xbt,t))})}),e.wrapMethod("cloneShallow",Vr(Zbt,t)),be(e.CHANGABLE_METHODS,function(r){e.wrapMethod(r,Vr(Jbt,t))}),Us(n[e.dataType]===e)}function Xbt(t,e){if(t1t(this)){var n=ot({},Ol(this).datas);n[this.dataType]=e,che(e,n,t)}else r6(e,this.dataType,Ol(this).mainData,t);return e}function Jbt(t,e){return t.struct&&t.struct.update(),e}function Zbt(t,e){return be(Ol(e).datas,function(n,r){n!==e&&r6(n.cloneShallow(),r,e,t)}),e}function Qbt(t){var e=Ol(this).mainData;return t==null||e==null?e:Ol(e).datas[t]}function e1t(){var t=Ol(this).mainData;return t==null?[{data:t}]:Qt(ir(Ol(t).datas),function(e){return{type:e,data:Ol(t).datas[e]}})}function t1t(t){return Ol(t).mainData===t}function che(t,e,n){Ol(t).datas={},be(e,function(r,i){r6(r,i,t,n)})}function r6(t,e,n,r){Ol(n).datas[e]=t,Ol(t).mainData=n,t.dataType=e,r.struct&&(t[r.structAttr]=r.struct,r.struct[r.datasAttr[e]]=t),t.getLinkedData=Qbt,t.getLinkedDataAll=e1t}var n1t=function(){function t(e,n){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=e||"",this.hostTree=n}return t.prototype.isRemoved=function(){return this.dataIndex<0},t.prototype.eachNode=function(e,n,r){Qn(e)&&(r=n,n=e,e=null),e=e||{},Pt(e)&&(e={order:e});var i=e.order||"preorder",o=this[e.attr||"children"],a;i==="preorder"&&(a=n.call(r,this));for(var s=0;!a&&s<o.length;s++)o[s].eachNode(e,n,r);i==="postorder"&&n.call(r,this)},t.prototype.updateDepthAndHeight=function(e){var n=0;this.depth=e;for(var r=0;r<this.children.length;r++){var i=this.children[r];i.updateDepthAndHeight(e+1),i.height>n&&(n=i.height)}this.height=n+1},t.prototype.getNodeById=function(e){if(this.getId()===e)return this;for(var n=0,r=this.children,i=r.length;n<i;n++){var o=r[n].getNodeById(e);if(o)return o}},t.prototype.contains=function(e){if(e===this)return!0;for(var n=0,r=this.children,i=r.length;n<i;n++){var o=r[n].contains(e);if(o)return o}},t.prototype.getAncestors=function(e){for(var n=[],r=e?this:this.parentNode;r;)n.push(r),r=r.parentNode;return n.reverse(),n},t.prototype.getAncestorsIndices=function(){for(var e=[],n=this;n;)e.push(n.dataIndex),n=n.parentNode;return e.reverse(),e},t.prototype.getDescendantIndices=function(){var e=[];return this.eachNode(function(n){e.push(n.dataIndex)}),e},t.prototype.getValue=function(e){var n=this.hostTree.data;return n.getStore().get(n.getDimensionIndex(e||"value"),this.dataIndex)},t.prototype.setLayout=function(e,n){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,e,n)},t.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},t.prototype.getModel=function(e){if(!(this.dataIndex<0)){var n=this.hostTree,r=n.data.getItemModel(this.dataIndex);return r.getModel(e)}},t.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},t.prototype.setVisual=function(e,n){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,e,n)},t.prototype.getVisual=function(e){return this.hostTree.data.getItemVisual(this.dataIndex,e)},t.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},t.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},t.prototype.getChildIndex=function(){if(this.parentNode){for(var e=this.parentNode.children,n=0;n<e.length;++n)if(e[n]===this)return n;return-1}return-1},t.prototype.isAncestorOf=function(e){for(var n=e.parentNode;n;){if(n===this)return!0;n=n.parentNode}return!1},t.prototype.isDescendantOf=function(e){return e!==this&&e.isAncestorOf(this)},t}(),r1t=function(){function t(e){this.type="tree",this._nodes=[],this.hostModel=e}return t.prototype.eachNode=function(e,n,r){this.root.eachNode(e,n,r)},t.prototype.getNodeByDataIndex=function(e){var n=this.data.getRawIndex(e);return this._nodes[n]},t.prototype.getNodeById=function(e){return this.root.getNodeById(e)},t.prototype.update=function(){for(var e=this.data,n=this._nodes,r=0,i=n.length;r<i;r++)n[r].dataIndex=-1;for(var r=0,i=e.count();r<i;r++)n[e.getRawIndex(r)].dataIndex=r},t.prototype.clearLayouts=function(){this.data.clearItemLayouts()},t.createTree=function(e,n,r){var i=new t(n),o=[],a=1;s(e);function s(c,f){var h=c.value;a=Math.max(a,mt(h)?h.length:1),o.push(c);var d=new n1t(El(c.name,""),i);f?i1t(d,f):i.root=d,i._nodes.push(d);var g=c.children;if(g)for(var y=0;y<g.length;y++)s(g[y],d)}i.root.updateDepthAndHeight(0);var l=eE(o,{coordDimensions:["value"],dimensionsCount:a}).dimensions,u=new s_(l,n);return u.initData(o),r&&r(u),uhe({mainData:u,struct:i,structAttr:"tree"}),i.update(),i},t}();function i1t(t,e){var n=e.children;t.parentNode!==e&&(n.push(t),t.parentNode=e)}const o1t=r1t;function Qq(t,e,n){if(t&&wr(e,t.type)>=0){var r=n.getData().tree.root,i=t.targetNode;if(Pt(i)&&(i=r.getNodeById(i)),i&&r.contains(i))return{node:i};var o=t.targetNodeId;if(o!=null&&(i=r.getNodeById(o)))return{node:i}}}function a1t(t){for(var e=[];t;)t=t.parentNode,t&&e.push(t);return e.reverse()}function s1t(t,e){var n=a1t(t);return wr(n,e)>=0}function l1t(t,e){for(var n=[];t;){var r=t.dataIndex;n.push({name:t.name,dataIndex:r,value:e.getRawValue(r)}),t=t.parentNode}return n.reverse(),n}function u1t(t){var e=t.getData(),n=e.tree,r={};n.eachNode(function(i){for(var o=i;o&&o.depth>1;)o=o.parentNode;var a=t$e(t.ecModel,o.name||o.dataIndex+"",r);i.setVisual("decal",a)})}var $_=be,c1t=Bt,qT=-1,i6=function(){function t(e){var n=e.mappingMethod,r=e.type,i=this.option=Gn(e);this.type=r,this.mappingMethod=n,this._normalizeData=d1t[n];var o=t.visualHandlers[r];this.applyVisual=o.applyVisual,this.getColorMapper=o.getColorMapper,this._normalizedToVisual=o._normalizedToVisual[n],n==="piecewise"?(l4(i),f1t(i)):n==="category"?i.categories?h1t(i):l4(i,!0):(Us(n!=="linear"||i.dataExtent),l4(i))}return t.prototype.mapValueToVisual=function(e){var n=this._normalizeData(e);return this._normalizedToVisual(n,e)},t.prototype.getNormalizer=function(){return Or(this._normalizeData,this)},t.listVisualTypes=function(){return ir(t.visualHandlers)},t.isValidType=function(e){return t.visualHandlers.hasOwnProperty(e)},t.eachVisual=function(e,n,r){Bt(e)?be(e,n,r):n.call(r,e)},t.mapVisual=function(e,n,r){var i,o=mt(e)?[]:Bt(e)?{}:(i=!0,null);return t.eachVisual(e,function(a,s){var l=n.call(r,a,s);i?o=l:o[s]=l}),o},t.retrieveVisuals=function(e){var n={},r;return e&&$_(t.visualHandlers,function(i,o){e.hasOwnProperty(o)&&(n[o]=e[o],r=!0)}),r?n:null},t.prepareVisualTypes=function(e){if(mt(e))e=e.slice();else if(c1t(e)){var n=[];$_(e,function(r,i){n.push(i)}),e=n}else return[];return e.sort(function(r,i){return i==="color"&&r!=="color"&&r.indexOf("color")===0?1:-1}),e},t.dependsOn=function(e,n){return n==="color"?!!(e&&e.indexOf(n)===0):e===n},t.findPieceIndex=function(e,n,r){for(var i,o=1/0,a=0,s=n.length;a<s;a++){var l=n[a].value;if(l!=null){if(l===e||Pt(l)&&l===e+"")return a;r&&h(l,a)}}for(var a=0,s=n.length;a<s;a++){var u=n[a],c=u.interval,f=u.close;if(c){if(c[0]===-1/0){if(WC(f[1],e,c[1]))return a}else if(c[1]===1/0){if(WC(f[0],c[0],e))return a}else if(WC(f[0],c[0],e)&&WC(f[1],e,c[1]))return a;r&&h(c[0],a),r&&h(c[1],a)}}if(r)return e===1/0?n.length-1:e===-1/0?0:i;function h(d,g){var y=Math.abs(d-e);y<o&&(o=y,i=g)}},t.visualHandlers={color:{applyVisual:gb("color"),getColorMapper:function(){var e=this.option;return Or(e.mappingMethod==="category"?function(n,r){return!r&&(n=this._normalizeData(n)),Fb.call(this,n)}:function(n,r,i){var o=!!i;return!r&&(n=this._normalizeData(n)),i=f3(n,e.parsedVisual,i),o?i:Nh(i,"rgba")},this)},_normalizedToVisual:{linear:function(e){return Nh(f3(e,this.option.parsedVisual),"rgba")},category:Fb,piecewise:function(e,n){var r=tM.call(this,n);return r==null&&(r=Nh(f3(e,this.option.parsedVisual),"rgba")),r},fixed:xp}},colorHue:UC(function(e,n){return h3(e,n)}),colorSaturation:UC(function(e,n){return h3(e,null,n)}),colorLightness:UC(function(e,n){return h3(e,null,null,n)}),colorAlpha:UC(function(e,n){return qPe(e,n)}),decal:{applyVisual:gb("decal"),_normalizedToVisual:{linear:null,category:Fb,piecewise:null,fixed:null}},opacity:{applyVisual:gb("opacity"),_normalizedToVisual:eM([0,1])},liftZ:{applyVisual:gb("liftZ"),_normalizedToVisual:{linear:xp,category:xp,piecewise:xp,fixed:xp}},symbol:{applyVisual:function(e,n,r){var i=this.mapValueToVisual(e);r("symbol",i)},_normalizedToVisual:{linear:eY,category:Fb,piecewise:function(e,n){var r=tM.call(this,n);return r==null&&(r=eY.call(this,e)),r},fixed:xp}},symbolSize:{applyVisual:gb("symbolSize"),_normalizedToVisual:eM([0,1])}},t}();function f1t(t){var e=t.pieceList;t.hasSpecialVisual=!1,be(e,function(n,r){n.originIndex=r,n.visual!=null&&(t.hasSpecialVisual=!0)})}function h1t(t){var e=t.categories,n=t.categoryMap={},r=t.visual;if($_(e,function(a,s){n[a]=s}),!mt(r)){var i=[];Bt(r)?$_(r,function(a,s){var l=n[s];i[l??qT]=a}):i[qT]=r,r=fhe(t,i)}for(var o=e.length-1;o>=0;o--)r[o]==null&&(delete n[e[o]],e.pop())}function l4(t,e){var n=t.visual,r=[];Bt(n)?$_(n,function(o){r.push(o)}):n!=null&&r.push(n);var i={color:1,symbol:1};!e&&r.length===1&&!i.hasOwnProperty(t.type)&&(r[1]=r[0]),fhe(t,r)}function UC(t){return{applyVisual:function(e,n,r){var i=this.mapValueToVisual(e);r("color",t(n("color"),i))},_normalizedToVisual:eM([0,1])}}function eY(t){var e=this.option.visual;return e[Math.round(u0(t,[0,1],[0,e.length-1],!0))]||{}}function gb(t){return function(e,n,r){r(t,this.mapValueToVisual(e))}}function Fb(t){var e=this.option.visual;return e[this.option.loop&&t!==qT?t%e.length:t]}function xp(){return this.option.visual[0]}function eM(t){return{linear:function(e){return u0(e,t,this.option.visual,!0)},category:Fb,piecewise:function(e,n){var r=tM.call(this,n);return r==null&&(r=u0(e,t,this.option.visual,!0)),r},fixed:xp}}function tM(t){var e=this.option,n=e.pieceList;if(e.hasSpecialVisual){var r=i6.findPieceIndex(t,n),i=n[r];if(i&&i.visual)return i.visual[this.type]}}function fhe(t,e){return t.visual=e,t.type==="color"&&(t.parsedVisual=Qt(e,function(n){var r=hu(n);return r||[0,0,0,1]})),e}var d1t={linear:function(t){return u0(t,this.option.dataExtent,[0,1],!0)},piecewise:function(t){var e=this.option.pieceList,n=i6.findPieceIndex(t,e,!0);if(n!=null)return u0(n,[0,e.length-1],[0,1],!0)},category:function(t){var e=this.option.categories?this.option.categoryMap[t]:t;return e??qT},fixed:Jo};function WC(t,e,n){return t?e<=n:e<n}const p1t=i6;function jm(t){return"_EC_"+t}var g1t=function(){function t(e){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=e||!1}return t.prototype.isDirected=function(){return this._directed},t.prototype.addNode=function(e,n){e=e==null?""+n:""+e;var r=this._nodesMap;if(!r[jm(e)]){var i=new Cp(e,n);return i.hostGraph=this,this.nodes.push(i),r[jm(e)]=i,i}},t.prototype.getNodeByIndex=function(e){var n=this.data.getRawIndex(e);return this.nodes[n]},t.prototype.getNodeById=function(e){return this._nodesMap[jm(e)]},t.prototype.addEdge=function(e,n,r){var i=this._nodesMap,o=this._edgesMap;if(Zr(e)&&(e=this.nodes[e]),Zr(n)&&(n=this.nodes[n]),e instanceof Cp||(e=i[jm(e)]),n instanceof Cp||(n=i[jm(n)]),!(!e||!n)){var a=e.id+"-"+n.id,s=new hhe(e,n,r);return s.hostGraph=this,this._directed&&(e.outEdges.push(s),n.inEdges.push(s)),e.edges.push(s),e!==n&&n.edges.push(s),this.edges.push(s),o[a]=s,s}},t.prototype.getEdgeByIndex=function(e){var n=this.edgeData.getRawIndex(e);return this.edges[n]},t.prototype.getEdge=function(e,n){e instanceof Cp&&(e=e.id),n instanceof Cp&&(n=n.id);var r=this._edgesMap;return this._directed?r[e+"-"+n]:r[e+"-"+n]||r[n+"-"+e]},t.prototype.eachNode=function(e,n){for(var r=this.nodes,i=r.length,o=0;o<i;o++)r[o].dataIndex>=0&&e.call(n,r[o],o)},t.prototype.eachEdge=function(e,n){for(var r=this.edges,i=r.length,o=0;o<i;o++)r[o].dataIndex>=0&&r[o].node1.dataIndex>=0&&r[o].node2.dataIndex>=0&&e.call(n,r[o],o)},t.prototype.breadthFirstTraverse=function(e,n,r,i){if(n instanceof Cp||(n=this._nodesMap[jm(n)]),!!n){for(var o=r==="out"?"outEdges":r==="in"?"inEdges":"edges",a=0;a<this.nodes.length;a++)this.nodes[a].__visited=!1;if(!e.call(i,n,null))for(var s=[n];s.length;)for(var l=s.shift(),u=l[o],a=0;a<u.length;a++){var c=u[a],f=c.node1===l?c.node2:c.node1;if(!f.__visited){if(e.call(i,f,l))return;s.push(f),f.__visited=!0}}}},t.prototype.update=function(){for(var e=this.data,n=this.edgeData,r=this.nodes,i=this.edges,o=0,a=r.length;o<a;o++)r[o].dataIndex=-1;for(var o=0,a=e.count();o<a;o++)r[e.getRawIndex(o)].dataIndex=o;n.filterSelf(function(s){var l=i[n.getRawIndex(s)];return l.node1.dataIndex>=0&&l.node2.dataIndex>=0});for(var o=0,a=i.length;o<a;o++)i[o].dataIndex=-1;for(var o=0,a=n.count();o<a;o++)i[n.getRawIndex(o)].dataIndex=o},t.prototype.clone=function(){for(var e=new t(this._directed),n=this.nodes,r=this.edges,i=0;i<n.length;i++)e.addNode(n[i].id,n[i].dataIndex);for(var i=0;i<r.length;i++){var o=r[i];e.addEdge(o.node1.id,o.node2.id,o.dataIndex)}return e},t}(),Cp=function(){function t(e,n){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=e??"",this.dataIndex=n??-1}return t.prototype.degree=function(){return this.edges.length},t.prototype.inDegree=function(){return this.inEdges.length},t.prototype.outDegree=function(){return this.outEdges.length},t.prototype.getModel=function(e){if(!(this.dataIndex<0)){var n=this.hostGraph,r=n.data.getItemModel(this.dataIndex);return r.getModel(e)}},t.prototype.getAdjacentDataIndices=function(){for(var e={edge:[],node:[]},n=0;n<this.edges.length;n++){var r=this.edges[n];r.dataIndex<0||(e.edge.push(r.dataIndex),e.node.push(r.node1.dataIndex,r.node2.dataIndex))}return e},t.prototype.getTrajectoryDataIndices=function(){for(var e=mn(),n=mn(),r=0;r<this.edges.length;r++){var i=this.edges[r];if(!(i.dataIndex<0)){e.set(i.dataIndex,!0);for(var o=[i.node1],a=[i.node2],s=0;s<o.length;){var l=o[s];s++,n.set(l.dataIndex,!0);for(var u=0;u<l.inEdges.length;u++)e.set(l.inEdges[u].dataIndex,!0),o.push(l.inEdges[u].node1)}for(s=0;s<a.length;){var c=a[s];s++,n.set(c.dataIndex,!0);for(var u=0;u<c.outEdges.length;u++)e.set(c.outEdges[u].dataIndex,!0),a.push(c.outEdges[u].node2)}}}return{edge:e.keys(),node:n.keys()}},t}(),hhe=function(){function t(e,n,r){this.dataIndex=-1,this.node1=e,this.node2=n,this.dataIndex=r??-1}return t.prototype.getModel=function(e){if(!(this.dataIndex<0)){var n=this.hostGraph,r=n.edgeData.getItemModel(this.dataIndex);return r.getModel(e)}},t.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},t.prototype.getTrajectoryDataIndices=function(){var e=mn(),n=mn();e.set(this.dataIndex,!0);for(var r=[this.node1],i=[this.node2],o=0;o<r.length;){var a=r[o];o++,n.set(a.dataIndex,!0);for(var s=0;s<a.inEdges.length;s++)e.set(a.inEdges[s].dataIndex,!0),r.push(a.inEdges[s].node1)}for(o=0;o<i.length;){var l=i[o];o++,n.set(l.dataIndex,!0);for(var s=0;s<l.outEdges.length;s++)e.set(l.outEdges[s].dataIndex,!0),i.push(l.outEdges[s].node2)}return{edge:e.keys(),node:n.keys()}},t}();function dhe(t,e){return{getValue:function(n){var r=this[t][e];return r.getStore().get(r.getDimensionIndex(n||"value"),this.dataIndex)},setVisual:function(n,r){this.dataIndex>=0&&this[t][e].setItemVisual(this.dataIndex,n,r)},getVisual:function(n){return this[t][e].getItemVisual(this.dataIndex,n)},setLayout:function(n,r){this.dataIndex>=0&&this[t][e].setItemLayout(this.dataIndex,n,r)},getLayout:function(){return this[t][e].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[t][e].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[t][e].getRawIndex(this.dataIndex)}}}wu(Cp,dhe("hostGraph","data"));wu(hhe,dhe("hostGraph","edgeData"));const m1t=g1t;function v1t(t,e,n,r,i){for(var o=new m1t(r),a=0;a<t.length;a++)o.addNode(xg(t[a].id,t[a].name,a),a);for(var s=[],l=[],u=0,a=0;a<e.length;a++){var c=e[a],f=c.source,h=c.target;o.addEdge(f,h,u)&&(l.push(c),s.push(xg(El(c.id,null),f+" > "+h)),u++)}var d=n.get("coordinateSystem"),g;if(d==="cartesian2d"||d==="polar")g=hMe(t,n);else{var y=KA.get(d),_=y?y.dimensions||[]:[];wr(_,"value")<0&&_.concat(["value"]);var v=eE(t,{coordDimensions:_,encodeDefine:n.getEncode()}).dimensions;g=new s_(v,n),g.initData(t)}var S=new s_(["value"],n);return S.initData(l,s),i&&i(g,S),uhe({mainData:g,struct:o,structAttr:"graph",datas:{node:g,edge:S},datasAttr:{node:"data",edge:"edgeData"}}),o.update(),o}var y1t=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return t}(),b1t=function(t){Cr(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultShape=function(){return new y1t},e.prototype.buildPath=function(n,r){var i=r.extent;n.moveTo(r.x1,r.y1),n.bezierCurveTo(r.cpx1,r.cpy1,r.cpx2,r.cpy2,r.x2,r.y2),r.orient==="vertical"?(n.lineTo(r.x2+i,r.y2),n.bezierCurveTo(r.cpx2+i,r.cpy2,r.cpx1+i,r.cpy1,r.x1+i,r.y1)):(n.lineTo(r.x2,r.y2+i),n.bezierCurveTo(r.cpx2,r.cpy2+i,r.cpx1,r.cpy1+i,r.x1,r.y1+i)),n.closePath()},e.prototype.highlight=function(){Vk(this)},e.prototype.downplay=function(){Bk(this)},e}(Lr),_1t=function(t){Cr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n._focusAdjacencyDisabled=!1,n}return e.prototype.render=function(n,r,i){var o=this,a=n.getGraph(),s=this.group,l=n.layoutInfo,u=l.width,c=l.height,f=n.getData(),h=n.getData("edge"),d=n.get("orient");this._model=n,s.removeAll(),s.x=l.x,s.y=l.y,a.eachEdge(function(g){var y=new b1t,_=Br(y);_.dataIndex=g.dataIndex,_.seriesIndex=n.seriesIndex,_.dataType="edge";var v=g.getModel(),S=v.getModel("lineStyle"),C=S.get("curveness"),k=g.node1.getLayout(),x=g.node1.getModel(),m=x.get("localX"),T=x.get("localY"),P=g.node2.getLayout(),I=g.node2.getModel(),M=I.get("localX"),L=I.get("localY"),R=g.getLayout(),V,z,ie,oe,Se,Ae,Ee,_e;y.shape.extent=Math.max(1,R.dy),y.shape.orient=d,d==="vertical"?(V=(m!=null?m*u:k.x)+R.sy,z=(T!=null?T*c:k.y)+k.dy,ie=(M!=null?M*u:P.x)+R.ty,oe=L!=null?L*c:P.y,Se=V,Ae=z*(1-C)+oe*C,Ee=ie,_e=z*C+oe*(1-C)):(V=(m!=null?m*u:k.x)+k.dx,z=(T!=null?T*c:k.y)+R.sy,ie=M!=null?M*u:P.x,oe=(L!=null?L*c:P.y)+R.ty,Se=V*(1-C)+ie*C,Ae=z,Ee=V*C+ie*(1-C),_e=oe),y.setShape({x1:V,y1:z,x2:ie,y2:oe,cpx1:Se,cpy1:Ae,cpx2:Ee,cpy2:_e}),y.useStyle(S.getItemStyle()),tY(y.style,d,g);var se=""+v.get("value"),ne=EL(v,"edgeLabel");Hk(y,ne,{labelFetcher:{getFormattedLabel:function(H,ae,te,ce,ue,fe){return n.getFormattedLabel(H,ae,"edge",ce,$v(ue,ne.normal&&ne.normal.get("formatter"),se),fe)}},labelDataIndex:g.dataIndex,defaultText:se}),y.setTextConfig({position:"inside"});var J=v.getModel("emphasis");xL(y,v,"lineStyle",function(H){var ae=H.getItemStyle();return tY(ae,d,g),ae}),s.add(y),h.setItemGraphicEl(g.dataIndex,y);var B=J.get("focus");zk(y,B==="adjacency"?g.getAdjacentDataIndices():B==="trajectory"?g.getTrajectoryDataIndices():B,J.get("blurScope"),J.get("disabled"))}),a.eachNode(function(g){var y=g.getLayout(),_=g.getModel(),v=_.get("localX"),S=_.get("localY"),C=_.getModel("emphasis"),k=new Qo({shape:{x:v!=null?v*u:y.x,y:S!=null?S*c:y.y,width:y.dx,height:y.dy},style:_.getModel("itemStyle").getItemStyle(),z2:10});Hk(k,EL(_),{labelFetcher:{getFormattedLabel:function(m,T){return n.getFormattedLabel(m,T,"node")}},labelDataIndex:g.dataIndex,defaultText:g.id}),k.disableLabelAnimation=!0,k.setStyle("fill",g.getVisual("color")),k.setStyle("decal",g.getVisual("style").decal),xL(k,_),s.add(k),f.setItemGraphicEl(g.dataIndex,k),Br(k).dataType="node";var x=C.get("focus");zk(k,x==="adjacency"?g.getAdjacentDataIndices():x==="trajectory"?g.getTrajectoryDataIndices():x,C.get("blurScope"),C.get("disabled"))}),f.eachItemGraphicEl(function(g,y){var _=f.getItemModel(y);_.get("draggable")&&(g.drift=function(v,S){o._focusAdjacencyDisabled=!0,this.shape.x+=v,this.shape.y+=S,this.dirty(),i.dispatchAction({type:"dragNode",seriesId:n.id,dataIndex:f.getRawIndex(y),localX:this.shape.x/u,localY:this.shape.y/c})},g.ondragend=function(){o._focusAdjacencyDisabled=!1},g.draggable=!0,g.cursor="move")}),!this._data&&n.isAnimationEnabled()&&s.setClipPath(S1t(s.getBoundingRect(),n,function(){s.removeClipPath()})),this._data=n.getData()},e.prototype.dispose=function(){},e.type="sankey",e}(Rh);function tY(t,e,n){switch(t.fill){case"source":t.fill=n.node1.getVisual("color"),t.decal=n.node1.getVisual("style").decal;break;case"target":t.fill=n.node2.getVisual("color"),t.decal=n.node2.getVisual("style").decal;break;case"gradient":var r=n.node1.getVisual("color"),i=n.node2.getVisual("color");Pt(r)&&Pt(i)&&(t.fill=new one(0,0,+(e==="horizontal"),+(e==="vertical"),[{color:r,offset:0},{color:i,offset:1}]))}}function S1t(t,e,n){var r=new Qo({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return Nv(r,{shape:{width:t.width+20}},e,n),r}const w1t=_1t;var x1t=function(t){Cr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.getInitialData=function(n,r){var i=n.edges||n.links,o=n.data||n.nodes,a=n.levels;this.levelModels=[];for(var s=this.levelModels,l=0;l<a.length;l++)a[l].depth!=null&&a[l].depth>=0&&(s[a[l].depth]=new uo(a[l],this,r));if(o&&i){var u=v1t(o,i,this,!0,c);return u.data}function c(f,h){f.wrapMethod("getItemModel",function(d,g){var y=d.parentModel,_=y.getData().getItemLayout(g);if(_){var v=_.depth,S=y.levelModels[v];S&&(d.parentModel=S)}return d}),h.wrapMethod("getItemModel",function(d,g){var y=d.parentModel,_=y.getGraph().getEdgeByIndex(g),v=_.node1.getLayout();if(v){var S=v.depth,C=y.levelModels[S];C&&(d.parentModel=C)}return d})}},e.prototype.setNodePosition=function(n,r){var i=this.option.data||this.option.nodes,o=i[n];o.localX=r[0],o.localY=r[1]},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.formatTooltip=function(n,r,i){function o(d){return isNaN(d)||d==null}if(i==="edge"){var a=this.getDataParams(n,i),s=a.data,l=a.value,u=s.source+" -- "+s.target;return kg("nameValue",{name:u,value:l,noValue:o(l)})}else{var c=this.getGraph().getNodeByIndex(n),f=c.getLayout().value,h=this.getDataParams(n,i).data.name;return kg("nameValue",{name:h!=null?h+"":null,value:f,noValue:o(f)})}},e.prototype.optionUpdated=function(){},e.prototype.getDataParams=function(n,r){var i=t.prototype.getDataParams.call(this,n,r);if(i.value==null&&r==="node"){var o=this.getGraph().getNodeByIndex(n),a=o.getLayout().value;i.value=a}return i},e.type="series.sankey",e.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},e}(Tg);const C1t=x1t;function k1t(t,e){t.eachSeriesByType("sankey",function(n){var r=n.get("nodeWidth"),i=n.get("nodeGap"),o=T1t(n,e);n.layoutInfo=o;var a=o.width,s=o.height,l=n.getGraph(),u=l.nodes,c=l.edges;E1t(u);var f=Za(u,function(y){return y.getLayout().value===0}),h=f.length!==0?0:n.get("layoutIterations"),d=n.get("orient"),g=n.get("nodeAlign");A1t(u,c,r,i,a,s,h,d,g)})}function T1t(t,e){return c0(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function A1t(t,e,n,r,i,o,a,s,l){P1t(t,e,n,i,o,s,l),L1t(t,e,o,i,r,a,s),j1t(t,s)}function E1t(t){be(t,function(e){var n=jh(e.outEdges,YT),r=jh(e.inEdges,YT),i=e.getValue()||0,o=Math.max(n,r,i);e.setLayout({value:o},!0)})}function P1t(t,e,n,r,i,o,a){for(var s=[],l=[],u=[],c=[],f=0,h=0;h<e.length;h++)s[h]=1;for(var h=0;h<t.length;h++)l[h]=t[h].inEdges.length,l[h]===0&&u.push(t[h]);for(var d=-1;u.length;){for(var g=0;g<u.length;g++){var y=u[g],_=y.hostGraph.data.getRawDataItem(y.dataIndex),v=_.depth!=null&&_.depth>=0;v&&_.depth>d&&(d=_.depth),y.setLayout({depth:v?_.depth:f},!0),o==="vertical"?y.setLayout({dy:n},!0):y.setLayout({dx:n},!0);for(var S=0;S<y.outEdges.length;S++){var C=y.outEdges[S],k=e.indexOf(C);s[k]=0;var x=C.node2,m=t.indexOf(x);--l[m]===0&&c.indexOf(x)<0&&c.push(x)}}++f,u=c,c=[]}for(var h=0;h<s.length;h++)if(s[h]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var T=d>f-1?d:f-1;a&&a!=="left"&&O1t(t,a,o,T);var P=o==="vertical"?(i-n)/T:(r-n)/T;$1t(t,P,o)}function phe(t){var e=t.hostGraph.data.getRawDataItem(t.dataIndex);return e.depth!=null&&e.depth>=0}function O1t(t,e,n,r){if(e==="right"){for(var i=[],o=t,a=0;o.length;){for(var s=0;s<o.length;s++){var l=o[s];l.setLayout({skNodeHeight:a},!0);for(var u=0;u<l.inEdges.length;u++){var c=l.inEdges[u];i.indexOf(c.node1)<0&&i.push(c.node1)}}o=i,i=[],++a}be(t,function(f){phe(f)||f.setLayout({depth:Math.max(0,r-f.getLayout().skNodeHeight)},!0)})}else e==="justify"&&I1t(t,r)}function I1t(t,e){be(t,function(n){!phe(n)&&!n.outEdges.length&&n.setLayout({depth:e},!0)})}function $1t(t,e,n){be(t,function(r){var i=r.getLayout().depth*e;n==="vertical"?r.setLayout({y:i},!0):r.setLayout({x:i},!0)})}function L1t(t,e,n,r,i,o,a){var s=D1t(t,a);M1t(s,e,n,r,i,a),u4(s,i,n,r,a);for(var l=1;o>0;o--)l*=.99,N1t(s,l,a),u4(s,i,n,r,a),z1t(s,l,a),u4(s,i,n,r,a)}function D1t(t,e){var n=[],r=e==="vertical"?"y":"x",i=KOe(t,function(o){return o.getLayout()[r]});return i.keys.sort(function(o,a){return o-a}),be(i.keys,function(o){n.push(i.buckets.get(o))}),n}function M1t(t,e,n,r,i,o){var a=1/0;be(t,function(s){var l=s.length,u=0;be(s,function(f){u+=f.getLayout().value});var c=o==="vertical"?(r-(l-1)*i)/u:(n-(l-1)*i)/u;c<a&&(a=c)}),be(t,function(s){be(s,function(l,u){var c=l.getLayout().value*a;o==="vertical"?(l.setLayout({x:u},!0),l.setLayout({dx:c},!0)):(l.setLayout({y:u},!0),l.setLayout({dy:c},!0))})}),be(e,function(s){var l=+s.getValue()*a;s.setLayout({dy:l},!0)})}function u4(t,e,n,r,i){var o=i==="vertical"?"x":"y";be(t,function(a){a.sort(function(y,_){return y.getLayout()[o]-_.getLayout()[o]});for(var s,l,u,c=0,f=a.length,h=i==="vertical"?"dx":"dy",d=0;d<f;d++)l=a[d],u=c-l.getLayout()[o],u>0&&(s=l.getLayout()[o]+u,i==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0)),c=l.getLayout()[o]+l.getLayout()[h]+e;var g=i==="vertical"?r:n;if(u=c-e-g,u>0){s=l.getLayout()[o]-u,i==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0),c=s;for(var d=f-2;d>=0;--d)l=a[d],u=l.getLayout()[o]+l.getLayout()[h]+e-c,u>0&&(s=l.getLayout()[o]-u,i==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0)),c=l.getLayout()[o]}})}function N1t(t,e,n){be(t.slice().reverse(),function(r){be(r,function(i){if(i.outEdges.length){var o=jh(i.outEdges,F1t,n)/jh(i.outEdges,YT);if(isNaN(o)){var a=i.outEdges.length;o=a?jh(i.outEdges,R1t,n)/a:0}if(n==="vertical"){var s=i.getLayout().x+(o-hd(i,n))*e;i.setLayout({x:s},!0)}else{var l=i.getLayout().y+(o-hd(i,n))*e;i.setLayout({y:l},!0)}}})})}function F1t(t,e){return hd(t.node2,e)*t.getValue()}function R1t(t,e){return hd(t.node2,e)}function V1t(t,e){return hd(t.node1,e)*t.getValue()}function B1t(t,e){return hd(t.node1,e)}function hd(t,e){return e==="vertical"?t.getLayout().x+t.getLayout().dx/2:t.getLayout().y+t.getLayout().dy/2}function YT(t){return t.getValue()}function jh(t,e,n){for(var r=0,i=t.length,o=-1;++o<i;){var a=+e(t[o],n);isNaN(a)||(r+=a)}return r}function z1t(t,e,n){be(t,function(r){be(r,function(i){if(i.inEdges.length){var o=jh(i.inEdges,V1t,n)/jh(i.inEdges,YT);if(isNaN(o)){var a=i.inEdges.length;o=a?jh(i.inEdges,B1t,n)/a:0}if(n==="vertical"){var s=i.getLayout().x+(o-hd(i,n))*e;i.setLayout({x:s},!0)}else{var l=i.getLayout().y+(o-hd(i,n))*e;i.setLayout({y:l},!0)}}})})}function j1t(t,e){var n=e==="vertical"?"x":"y";be(t,function(r){r.outEdges.sort(function(i,o){return i.node2.getLayout()[n]-o.node2.getLayout()[n]}),r.inEdges.sort(function(i,o){return i.node1.getLayout()[n]-o.node1.getLayout()[n]})}),be(t,function(r){var i=0,o=0;be(r.outEdges,function(a){a.setLayout({sy:i},!0),i+=a.getLayout().dy}),be(r.inEdges,function(a){a.setLayout({ty:o},!0),o+=a.getLayout().dy})})}function U1t(t){t.eachSeriesByType("sankey",function(e){var n=e.getGraph(),r=n.nodes,i=n.edges;if(r.length){var o=1/0,a=-1/0;be(r,function(s){var l=s.getLayout().value;l<o&&(o=l),l>a&&(a=l)}),be(r,function(s){var l=new p1t({type:"color",mappingMethod:"linear",dataExtent:[o,a],visual:e.get("color")}),u=l.mapValueToVisual(s.getLayout().value),c=s.getModel().get(["itemStyle","color"]);c!=null?(s.setVisual("color",c),s.setVisual("style",{fill:c})):(s.setVisual("color",u),s.setVisual("style",{fill:u}))})}i.length&&be(i,function(s){var l=s.getModel().get("lineStyle");s.setVisual("style",l)})})}function W1t(t){t.registerChartView(w1t),t.registerSeriesModel(C1t),t.registerLayout(k1t),t.registerVisual(U1t),t.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(e,n){n.eachComponent({mainType:"series",subType:"sankey",query:e},function(r){r.setNodePosition(e.dataIndex,[e.localX,e.localY])})})}var H1t=2,G1t=4,q1t=function(t){Cr(e,t);function e(n,r,i,o){var a=t.call(this)||this;a.z2=H1t,a.textConfig={inside:!0},Br(a).seriesIndex=r.seriesIndex;var s=new ea({z2:G1t,silent:n.getModel().get(["label","silent"])});return a.setTextContent(s),a.updateData(!0,n,r,i,o),a}return e.prototype.updateData=function(n,r,i,o,a){this.node=r,r.piece=this,i=i||this._seriesModel,o=o||this._ecModel;var s=this;Br(s).dataIndex=r.dataIndex;var l=r.getModel(),u=l.getModel("emphasis"),c=r.getLayout(),f=ot({},c);f.label=null;var h=r.getVisual("style");h.lineJoin="bevel";var d=r.getVisual("decal");d&&(h.decal=Qk(d,a));var g=bv(l.getModel("itemStyle"),f,!0);ot(f,g),be(pu,function(S){var C=s.ensureState(S),k=l.getModel([S,"itemStyle"]);C.style=k.getItemStyle();var x=bv(k,f);x&&(C.shape=x)}),n?(s.setShape(f),s.shape.r=c.r0,Nv(s,{shape:{r:c.r}},i,r.dataIndex)):(Cg(s,{shape:f},i),lne(s)),s.useStyle(h),this._updateLabel(i);var y=l.getShallow("cursor");y&&s.attr("cursor",y),this._seriesModel=i||this._seriesModel,this._ecModel=o||this._ecModel;var _=u.get("focus"),v=_==="ancestor"?r.getAncestorsIndices():_==="descendant"?r.getDescendantIndices():_;zk(this,v,u.get("blurScope"),u.get("disabled"))},e.prototype._updateLabel=function(n){var r=this,i=this.node.getModel(),o=i.getModel("label"),a=this.node.getLayout(),s=a.endAngle-a.startAngle,l=(a.startAngle+a.endAngle)/2,u=Math.cos(l),c=Math.sin(l),f=this,h=f.getTextContent(),d=this.node.dataIndex,g=o.get("minAngle")/180*Math.PI,y=o.get("show")&&!(g!=null&&Math.abs(s)<g);h.ignore=!y,be(e_,function(v){var S=v==="normal"?i.getModel("label"):i.getModel([v,"label"]),C=v==="normal",k=C?h:h.ensureState(v),x=n.getFormattedLabel(d,v);C&&(x=x||r.node.name),k.style=kf(S,{},null,v!=="normal",!0),x&&(k.style.text=x);var m=S.get("show");m!=null&&!C&&(k.ignore=!m);var T=_(S,"position"),P=C?f:f.states[v],I=P.style.fill;P.textConfig={outsideFill:S.get("color")==="inherit"?I:null,inside:T!=="outside"};var M,L=_(S,"distance")||0,R=_(S,"align");T==="outside"?(M=a.r+L,R=l>Math.PI/2?"right":"left"):!R||R==="center"?(s===2*Math.PI&&a.r0===0?M=0:M=(a.r+a.r0)/2,R="center"):R==="left"?(M=a.r0+L,l>Math.PI/2&&(R="right")):R==="right"&&(M=a.r-L,l>Math.PI/2&&(R="left")),k.style.align=R,k.style.verticalAlign=_(S,"verticalAlign")||"middle",k.x=M*u+a.cx,k.y=M*c+a.cy;var V=_(S,"rotate"),z=0;V==="radial"?(z=hv(-l),z>Math.PI/2&&z<Math.PI*1.5&&(z+=Math.PI)):V==="tangential"?(z=Math.PI/2-l,z>Math.PI/2?z-=Math.PI:z<-Math.PI/2&&(z+=Math.PI)):Zr(V)&&(z=V*Math.PI/180),k.rotation=hv(z)});function _(v,S){var C=v.get(S);return C??o.get(S)}h.dirtyStyle()},e}(dS);const nY=q1t;var nM="sunburstRootToNode",rY="sunburstHighlight",Y1t="sunburstUnhighlight";function K1t(t){t.registerAction({type:nM,update:"updateView"},function(e,n){n.eachComponent({mainType:"series",subType:"sunburst",query:e},r);function r(i,o){var a=Qq(e,[nM],i);if(a){var s=i.getViewRoot();s&&(e.direction=s1t(s,a.node)?"rollUp":"drillDown"),i.resetViewRoot(a.node)}}}),t.registerAction({type:rY,update:"none"},function(e,n,r){e=ot({},e),n.eachComponent({mainType:"series",subType:"sunburst",query:e},i);function i(o){var a=Qq(e,[rY],o);a&&(e.dataIndex=a.node.dataIndex)}r.dispatchAction(ot(e,{type:"highlight"}))}),t.registerAction({type:Y1t,update:"updateView"},function(e,n,r){e=ot({},e),r.dispatchAction(ot(e,{type:"downplay"}))})}var X1t=function(t){Cr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i,o){var a=this;this.seriesModel=n,this.api=i,this.ecModel=r;var s=n.getData(),l=s.tree.root,u=n.getViewRoot(),c=this.group,f=n.get("renderLabelForZeroData"),h=[];u.eachNode(function(S){h.push(S)});var d=this._oldChildren||[];g(h,d),v(l,u),this._initEvents(),this._oldChildren=h;function g(S,C){if(S.length===0&&C.length===0)return;new kre(C,S,k,k).add(x).update(x).remove(Vr(x,null)).execute();function k(m){return m.getId()}function x(m,T){var P=m==null?null:S[m],I=T==null?null:C[T];y(P,I)}}function y(S,C){if(!f&&S&&!S.getValue()&&(S=null),S!==l&&C!==l){if(C&&C.piece)S?(C.piece.updateData(!1,S,n,r,i),s.setItemGraphicEl(S.dataIndex,C.piece)):_(C);else if(S){var k=new nY(S,n,r,i);c.add(k),s.setItemGraphicEl(S.dataIndex,k)}}}function _(S){S&&S.piece&&(c.remove(S.piece),S.piece=null)}function v(S,C){C.depth>0?(a.virtualPiece?a.virtualPiece.updateData(!1,S,n,r,i):(a.virtualPiece=new nY(S,n,r,i),c.add(a.virtualPiece)),C.piece.off("click"),a.virtualPiece.on("click",function(k){a._rootToNode(C.parentNode)})):a.virtualPiece&&(c.remove(a.virtualPiece),a.virtualPiece=null)}},e.prototype._initEvents=function(){var n=this;this.group.off("click"),this.group.on("click",function(r){var i=!1,o=n.seriesModel.getViewRoot();o.eachNode(function(a){if(!i&&a.piece&&a.piece===r.target){var s=a.getModel().get("nodeClick");if(s==="rootToNode")n._rootToNode(a);else if(s==="link"){var l=a.getModel(),u=l.get("link");if(u){var c=l.get("target",!0)||"_blank";OL(u,c)}}i=!0}})})},e.prototype._rootToNode=function(n){n!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:nM,from:this.uid,seriesId:this.seriesModel.id,targetNode:n})},e.prototype.containPoint=function(n,r){var i=r.getData(),o=i.getItemLayout(0);if(o){var a=n[0]-o.cx,s=n[1]-o.cy,l=Math.sqrt(a*a+s*s);return l<=o.r&&l>=o.r0}},e.type="sunburst",e}(Rh);const J1t=X1t;var Z1t=function(t){Cr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.ignoreStyleOnData=!0,n}return e.prototype.getInitialData=function(n,r){var i={name:n.name,children:n.data};ghe(i);var o=this._levelModels=Qt(n.levels||[],function(l){return new uo(l,this,r)},this),a=o1t.createTree(i,this,s);function s(l){l.wrapMethod("getItemModel",function(u,c){var f=a.getNodeByDataIndex(c),h=o[f.depth];return h&&(u.parentModel=h),u})}return a.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.getDataParams=function(n){var r=t.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(n);return r.treePathInfo=l1t(i,this),r},e.prototype.getLevelModel=function(n){return this._levelModels&&this._levelModels[n.depth]},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(n){n?this._viewRoot=n:n=this._viewRoot;var r=this.getRawData().tree.root;(!n||n!==r&&!r.contains(n))&&(this._viewRoot=r)},e.prototype.enableAriaDecal=function(){u1t(this)},e.type="series.sunburst",e.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},e}(Tg);function ghe(t){var e=0;be(t.children,function(r){ghe(r);var i=r.value;mt(i)&&(i=i[0]),e+=i});var n=t.value;mt(n)&&(n=n[0]),(n==null||isNaN(n))&&(n=e),n<0&&(n=0),mt(t.value)?t.value[0]=n:t.value=n}const Q1t=Z1t;var iY=Math.PI/180;function e_t(t,e,n){e.eachSeriesByType(t,function(r){var i=r.get("center"),o=r.get("radius");mt(o)||(o=[0,o]),mt(i)||(i=[i,i]);var a=n.getWidth(),s=n.getHeight(),l=Math.min(a,s),u=Kr(i[0],a),c=Kr(i[1],s),f=Kr(o[0],l/2),h=Kr(o[1],l/2),d=-r.get("startAngle")*iY,g=r.get("minAngle")*iY,y=r.getData().tree.root,_=r.getViewRoot(),v=_.depth,S=r.get("sort");S!=null&&mhe(_,S);var C=0;be(_.children,function(oe){!isNaN(oe.getValue())&&C++});var k=_.getValue(),x=Math.PI/(k||C)*2,m=_.depth>0,T=_.height-(m?-1:1),P=(h-f)/(T||1),I=r.get("clockwise"),M=r.get("stillShowZeroSum"),L=I?1:-1,R=function(oe,Se){if(oe){var Ae=Se;if(oe!==y){var Ee=oe.getValue(),_e=k===0&&M?x:Ee*x;_e<g&&(_e=g),Ae=Se+L*_e;var se=oe.depth-v-(m?-1:1),ne=f+P*se,J=f+P*(se+1),B=r.getLevelModel(oe);if(B){var H=B.get("r0",!0),ae=B.get("r",!0),te=B.get("radius",!0);te!=null&&(H=te[0],ae=te[1]),H!=null&&(ne=Kr(H,l/2)),ae!=null&&(J=Kr(ae,l/2))}oe.setLayout({angle:_e,startAngle:Se,endAngle:Ae,clockwise:I,cx:u,cy:c,r0:ne,r:J})}if(oe.children&&oe.children.length){var ce=0;be(oe.children,function(ue){ce+=R(ue,Se+ce)})}return Ae-Se}};if(m){var V=f,z=f+P,ie=Math.PI*2;y.setLayout({angle:ie,startAngle:d,endAngle:d+ie,clockwise:I,cx:u,cy:c,r0:V,r:z})}R(_,d)})}function mhe(t,e){var n=t.children||[];t.children=t_t(n,e),n.length&&be(t.children,function(r){mhe(r,e)})}function t_t(t,e){if(Qn(e)){var n=Qt(t,function(i,o){var a=i.getValue();return{params:{depth:i.depth,height:i.height,dataIndex:i.dataIndex,getValue:function(){return a}},index:o}});return n.sort(function(i,o){return e(i.params,o.params)}),Qt(n,function(i){return t[i.index]})}else{var r=e==="asc";return t.sort(function(i,o){var a=(i.getValue()-o.getValue())*(r?1:-1);return a===0?(i.dataIndex-o.dataIndex)*(r?-1:1):a})}}function n_t(t){var e={};function n(r,i,o){for(var a=r;a&&a.depth>1;)a=a.parentNode;var s=i.getColorFromPalette(a.name||a.dataIndex+"",e);return r.depth>1&&Pt(s)&&(s=aL(s,(r.depth-1)/(o-1)*.5)),s}t.eachSeriesByType("sunburst",function(r){var i=r.getData(),o=i.tree;o.eachNode(function(a){var s=a.getModel(),l=s.getModel("itemStyle").getItemStyle();l.fill||(l.fill=n(a,r,o.root.height));var u=i.ensureUniqueItemVisual(a.dataIndex,"style");ot(u,l)})})}function vhe(t){t.registerChartView(J1t),t.registerSeriesModel(Q1t),t.registerLayout(Vr(e_t,"sunburst")),t.registerProcessor(Vr(ahe,"sunburst")),t.registerVisual(n_t),K1t(t)}var Fp=no(),oY=Gn,c4=Or,r_t=function(){function t(){this._dragging=!1,this.animationThreshold=15}return t.prototype.render=function(e,n,r,i){var o=n.get("value"),a=n.get("status");if(this._axisModel=e,this._axisPointerModel=n,this._api=r,!(!i&&this._lastValue===o&&this._lastStatus===a)){this._lastValue=o,this._lastStatus=a;var s=this._group,l=this._handle;if(!a||a==="hide"){s&&s.hide(),l&&l.hide();return}s&&s.show(),l&&l.show();var u={};this.makeElOption(u,o,e,n,r);var c=u.graphicKey;c!==this._lastGraphicKey&&this.clear(r),this._lastGraphicKey=c;var f=this._moveAnimation=this.determineAnimation(e,n);if(!s)s=this._group=new bc,this.createPointerEl(s,u,e,n),this.createLabelEl(s,u,e,n),r.getZr().add(s);else{var h=Vr(aY,n,f);this.updatePointerEl(s,u,h),this.updateLabelEl(s,u,h,n)}lY(s,n,!0),this._renderHandle(o)}},t.prototype.remove=function(e){this.clear(e)},t.prototype.dispose=function(e){this.clear(e)},t.prototype.determineAnimation=function(e,n){var r=n.get("animation"),i=e.axis,o=i.type==="category",a=n.get("snap");if(!a&&!o)return!1;if(r==="auto"||r==null){var s=this.animationThreshold;if(o&&i.getBandWidth()>s)return!0;if(a){var l=n6(e).seriesDataCount,u=i.getExtent();return Math.abs(u[0]-u[1])/l>s}return!1}return r===!0},t.prototype.makeElOption=function(e,n,r,i,o){},t.prototype.createPointerEl=function(e,n,r,i){var o=n.pointer;if(o){var a=Fp(e).pointerEl=new h4e[o.type](oY(n.pointer));e.add(a)}},t.prototype.createLabelEl=function(e,n,r,i){if(n.label){var o=Fp(e).labelEl=new ea(oY(n.label));e.add(o),sY(o,i)}},t.prototype.updatePointerEl=function(e,n,r){var i=Fp(e).pointerEl;i&&n.pointer&&(i.setStyle(n.pointer.style),r(i,{shape:n.pointer.shape}))},t.prototype.updateLabelEl=function(e,n,r,i){var o=Fp(e).labelEl;o&&(o.setStyle(n.label.style),r(o,{x:n.label.x,y:n.label.y}),sY(o,i))},t.prototype._renderHandle=function(e){if(!(this._dragging||!this.updateHandleTransform)){var n=this._axisPointerModel,r=this._api.getZr(),i=this._handle,o=n.getModel("handle"),a=n.get("status");if(!o.get("show")||!a||a==="hide"){i&&r.remove(i),this._handle=null;return}var s;this._handle||(s=!0,i=this._handle=SF(o.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(u){Oee(u.event)},onmousedown:c4(this._onHandleDragMove,this,0,0),drift:c4(this._onHandleDragMove,this),ondragend:c4(this._onHandleDragEnd,this)}),r.add(i)),lY(i,n,!1),i.setStyle(o.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=o.get("size");mt(l)||(l=[l,l]),i.scaleX=l[0]/2,i.scaleY=l[1]/2,Kne(this,"_doDispatchAxisPointer",o.get("throttle")||0,"fixRate"),this._moveHandleToValue(e,s)}},t.prototype._moveHandleToValue=function(e,n){aY(this._axisPointerModel,!n&&this._moveAnimation,this._handle,f4(this.getHandleTransform(e,this._axisModel,this._axisPointerModel)))},t.prototype._onHandleDragMove=function(e,n){var r=this._handle;if(r){this._dragging=!0;var i=this.updateHandleTransform(f4(r),[e,n],this._axisModel,this._axisPointerModel);this._payloadInfo=i,r.stopAnimation(),r.attr(f4(i)),Fp(r).lastProp=null,this._doDispatchAxisPointer()}},t.prototype._doDispatchAxisPointer=function(){var e=this._handle;if(e){var n=this._payloadInfo,r=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:n.cursorPoint[0],y:n.cursorPoint[1],tooltipOption:n.tooltipOption,axesInfo:[{axisDim:r.axis.dim,axisIndex:r.componentIndex}]})}},t.prototype._onHandleDragEnd=function(){this._dragging=!1;var e=this._handle;if(e){var n=this._axisPointerModel.get("value");this._moveHandleToValue(n),this._api.dispatchAction({type:"hideTip"})}},t.prototype.clear=function(e){this._lastValue=null,this._lastStatus=null;var n=e.getZr(),r=this._group,i=this._handle;n&&r&&(this._lastGraphicKey=null,r&&n.remove(r),i&&n.remove(i),this._group=null,this._handle=null,this._payloadInfo=null),NL(this,"_doDispatchAxisPointer")},t.prototype.doClear=function(){},t.prototype.buildLabel=function(e,n,r){return r=r||0,{x:e[r],y:e[1-r],width:n[r],height:n[1-r]}},t}();function aY(t,e,n,r){yhe(Fp(n).lastProp,r)||(Fp(n).lastProp=r,e?Cg(n,r,t):(n.stopAnimation(),n.attr(r)))}function yhe(t,e){if(Bt(t)&&Bt(e)){var n=!0;return be(e,function(r,i){n=n&&yhe(t[i],r)}),!!n}else return t===e}function sY(t,e){t[e.get(["label","show"])?"show":"hide"]()}function f4(t){return{x:t.x||0,y:t.y||0,rotation:t.rotation||0}}function lY(t,e,n){var r=e.get("z"),i=e.get("zlevel");t&&t.traverse(function(o){o.type!=="group"&&(r!=null&&(o.z=r),i!=null&&(o.zlevel=i),o.silent=n)})}const i_t=r_t;function o_t(t){var e=t.get("type"),n=t.getModel(e+"Style"),r;return e==="line"?(r=n.getLineStyle(),r.fill=null):e==="shadow"&&(r=n.getAreaStyle(),r.stroke=null),r}function a_t(t,e,n,r,i){var o=n.get("value"),a=bhe(o,e.axis,e.ecModel,n.get("seriesDataIndices"),{precision:n.get(["label","precision"]),formatter:n.get(["label","formatter"])}),s=n.getModel("label"),l=YA(s.get("padding")||0),u=s.getFont(),c=tte(a,u),f=i.position,h=c.width+l[1]+l[3],d=c.height+l[0]+l[2],g=i.align;g==="right"&&(f[0]-=h),g==="center"&&(f[0]-=h/2);var y=i.verticalAlign;y==="bottom"&&(f[1]-=d),y==="middle"&&(f[1]-=d/2),s_t(f,h,d,r);var _=s.get("backgroundColor");(!_||_==="auto")&&(_=e.get(["axisLine","lineStyle","color"])),t.label={x:f[0],y:f[1],style:kf(s,{text:a,font:u,fill:s.getTextColor(),padding:l,backgroundColor:_}),z2:10}}function s_t(t,e,n,r){var i=r.getWidth(),o=r.getHeight();t[0]=Math.min(t[0]+e,i)-e,t[1]=Math.min(t[1]+n,o)-n,t[0]=Math.max(t[0],0),t[1]=Math.max(t[1],0)}function bhe(t,e,n,r,i){t=e.scale.parse(t);var o=e.scale.getLabel({value:t},{precision:i.precision}),a=i.formatter;if(a){var s={value:Ire(e,{value:t}),axisDimension:e.dim,axisIndex:e.index,seriesData:[]};be(r,function(l){var u=n.getSeriesByIndex(l.seriesIndex),c=l.dataIndexInside,f=u&&u.getDataParams(c);f&&s.seriesData.push(f)}),Pt(a)?o=a.replace("{value}",o):Qn(a)&&(o=a(s))}return o}function _he(t,e,n){var r=K1();return QN(r,r,n.rotation),nL(r,r,n.position),_F([t.dataToCoord(e),(n.labelOffset||0)+(n.labelDirection||1)*(n.labelMargin||0)],r)}function l_t(t,e,n,r,i,o){var a=Bbt.innerTextLayout(n.rotation,0,n.labelDirection);n.labelMargin=i.get(["label","margin"]),a_t(e,r,i,o,{position:_he(r.axis,t,n),align:a.textAlign,verticalAlign:a.textVerticalAlign})}function u_t(t,e,n){return n=n||0,{x1:t[n],y1:t[1-n],x2:e[n],y2:e[1-n]}}function c_t(t,e,n){return n=n||0,{x:t[n],y:t[1-n],width:e[n],height:e[1-n]}}var f_t=function(t){Cr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.makeElOption=function(n,r,i,o,a){var s=i.axis,l=s.grid,u=o.get("type"),c=uY(l,s).getOtherAxis(s).getGlobalExtent(),f=s.toGlobalCoord(s.dataToCoord(r,!0));if(u&&u!=="none"){var h=o_t(o),d=h_t[u](s,f,c);d.style=h,n.graphicKey=d.type,n.pointer=d}var g=Yq(l.model,i);l_t(r,n,g,i,o,a)},e.prototype.getHandleTransform=function(n,r,i){var o=Yq(r.axis.grid.model,r,{labelInside:!1});o.labelMargin=i.get(["handle","margin"]);var a=_he(r.axis,n,o);return{x:a[0],y:a[1],rotation:o.rotation+(o.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(n,r,i,o){var a=i.axis,s=a.grid,l=a.getGlobalExtent(!0),u=uY(s,a).getOtherAxis(a).getGlobalExtent(),c=a.dim==="x"?0:1,f=[n.x,n.y];f[c]+=r[c],f[c]=Math.min(l[1],f[c]),f[c]=Math.max(l[0],f[c]);var h=(u[1]+u[0])/2,d=[h,h];d[c]=f[c];var g=[{verticalAlign:"middle"},{align:"center"}];return{x:f[0],y:f[1],rotation:n.rotation,cursorPoint:d,tooltipOption:g[c]}},e}(i_t);function uY(t,e){var n={};return n[e.dim+"AxisIndex"]=e.index,t.getCartesian(n)}var h_t={line:function(t,e,n){var r=u_t([e,n[0]],[e,n[1]],cY(t));return{type:"Line",subPixelOptimize:!0,shape:r}},shadow:function(t,e,n){var r=Math.max(1,t.getBandWidth()),i=n[1]-n[0];return{type:"Rect",shape:c_t([e-r/2,n[0]],[r,i],cY(t))}}};function cY(t){return t.dim==="x"?0:1}const d_t=f_t;var p_t=function(t){Cr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="axisPointer",e.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},e}(Si);const g_t=p_t;var df=no(),m_t=be;function She(t,e,n){if(!En.node){var r=e.getZr();df(r).records||(df(r).records={}),v_t(r,e);var i=df(r).records[t]||(df(r).records[t]={});i.handler=n}}function v_t(t,e){if(df(t).initialized)return;df(t).initialized=!0,n("click",Vr(fY,"click")),n("mousemove",Vr(fY,"mousemove")),n("globalout",b_t);function n(r,i){t.on(r,function(o){var a=__t(e);m_t(df(t).records,function(s){s&&i(s,o,a.dispatchAction)}),y_t(a.pendings,e)})}}function y_t(t,e){var n=t.showTip.length,r=t.hideTip.length,i;n?i=t.showTip[n-1]:r&&(i=t.hideTip[r-1]),i&&(i.dispatchAction=null,e.dispatchAction(i))}function b_t(t,e,n){t.handler("leave",null,n)}function fY(t,e,n,r){e.handler(t,n,r)}function __t(t){var e={showTip:[],hideTip:[]},n=function(r){var i=e[r.type];i?i.push(r):(r.dispatchAction=n,t.dispatchAction(r))};return{dispatchAction:n,pendings:e}}function rM(t,e){if(!En.node){var n=e.getZr(),r=(df(n).records||{})[t];r&&(df(n).records[t]=null)}}var S_t=function(t){Cr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i){var o=r.getComponent("tooltip"),a=n.get("triggerOn")||o&&o.get("triggerOn")||"mousemove|click";She("axisPointer",i,function(s,l,u){a!=="none"&&(s==="leave"||a.indexOf(s)>=0)&&u({type:"updateAxisPointer",currTrigger:s,x:l&&l.offsetX,y:l&&l.offsetY})})},e.prototype.remove=function(n,r){rM("axisPointer",r)},e.prototype.dispose=function(n,r){rM("axisPointer",r)},e.type="axisPointer",e}(ld);const w_t=S_t;function whe(t,e){var n=[],r=t.seriesIndex,i;if(r==null||!(i=e.getSeriesByIndex(r)))return{point:[]};var o=i.getData(),a=cS(o,t);if(a==null||a<0||mt(a))return{point:[]};var s=o.getItemGraphicEl(a),l=i.coordinateSystem;if(i.getTooltipPosition)n=i.getTooltipPosition(a)||[];else if(l&&l.dataToPoint)if(t.isStacked){var u=l.getBaseAxis(),c=l.getOtherAxis(u),f=c.dim,h=u.dim,d=f==="x"||f==="radius"?1:0,g=o.mapDimension(h),y=[];y[d]=o.get(g,a),y[1-d]=o.get(o.getCalculationInfo("stackResultDimension"),a),n=l.dataToPoint(y)||[]}else n=l.dataToPoint(o.getValues(Qt(l.dimensions,function(v){return o.mapDimension(v)}),a))||[];else if(s){var _=s.getBoundingRect().clone();_.applyTransform(s.transform),n=[_.x+_.width/2,_.y+_.height/2]}return{point:n,el:s}}var hY=no();function x_t(t,e,n){var r=t.currTrigger,i=[t.x,t.y],o=t,a=t.dispatchAction||Or(n.dispatchAction,n),s=e.getComponent("axisPointer").coordSysAxesInfo;if(s){V2(i)&&(i=whe({seriesIndex:o.seriesIndex,dataIndex:o.dataIndex},e).point);var l=V2(i),u=o.axesInfo,c=s.axesInfo,f=r==="leave"||V2(i),h={},d={},g={list:[],map:{}},y={showPointer:Vr(k_t,d),showTooltip:Vr(T_t,g)};be(s.coordSysMap,function(v,S){var C=l||v.containPoint(i);be(s.coordSysAxesInfo[S],function(k,x){var m=k.axis,T=O_t(u,k);if(!f&&C&&(!u||T)){var P=T&&T.value;P==null&&!l&&(P=m.pointToData(i)),P!=null&&dY(k,P,y,!1,h)}})});var _={};return be(c,function(v,S){var C=v.linkGroup;C&&!d[S]&&be(C.axesInfo,function(k,x){var m=d[x];if(k!==v&&m){var T=m.value;C.mapper&&(T=v.axis.scale.parse(C.mapper(T,pY(k),pY(v)))),_[v.key]=T}})}),be(_,function(v,S){dY(c[S],v,y,!0,h)}),A_t(d,c,h),E_t(g,i,t,a),P_t(c,a,n),h}}function dY(t,e,n,r,i){var o=t.axis;if(!(o.scale.isBlank()||!o.containData(e))){if(!t.involveSeries){n.showPointer(t,e);return}var a=C_t(e,t),s=a.payloadBatch,l=a.snapToValue;s[0]&&i.seriesIndex==null&&ot(i,s[0]),!r&&t.snap&&o.containData(l)&&l!=null&&(e=l),n.showPointer(t,e,s),n.showTooltip(t,a,l)}}function C_t(t,e){var n=e.axis,r=n.dim,i=t,o=[],a=Number.MAX_VALUE,s=-1;return be(e.seriesModels,function(l,u){var c=l.getData().mapDimensionsAll(r),f,h;if(l.getAxisTooltipData){var d=l.getAxisTooltipData(c,t,n);h=d.dataIndices,f=d.nestestValue}else{if(h=l.getData().indicesOfNearest(c[0],t,n.type==="category"?.5:null),!h.length)return;f=l.getData().get(c[0],h[0])}if(!(f==null||!isFinite(f))){var g=t-f,y=Math.abs(g);y<=a&&((y<a||g>=0&&s<0)&&(a=y,s=g,i=f,o.length=0),be(h,function(_){o.push({seriesIndex:l.seriesIndex,dataIndexInside:_,dataIndex:l.getData().getRawIndex(_)})}))}}),{payloadBatch:o,snapToValue:i}}function k_t(t,e,n,r){t[e.key]={value:n,payloadBatch:r}}function T_t(t,e,n,r){var i=n.payloadBatch,o=e.axis,a=o.model,s=e.axisPointerModel;if(!(!e.triggerTooltip||!i.length)){var l=e.coordSys.model,u=I_(l),c=t.map[u];c||(c=t.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},t.list.push(c)),c.dataByAxis.push({axisDim:o.dim,axisIndex:a.componentIndex,axisType:a.type,axisId:a.id,value:r,valueLabelOpt:{precision:s.get(["label","precision"]),formatter:s.get(["label","formatter"])},seriesDataIndices:i.slice()})}}function A_t(t,e,n){var r=n.axesInfo=[];be(e,function(i,o){var a=i.axisPointerModel.option,s=t[o];s?(!i.useHandle&&(a.status="show"),a.value=s.value,a.seriesDataIndices=(s.payloadBatch||[]).slice()):!i.useHandle&&(a.status="hide"),a.status==="show"&&r.push({axisDim:i.axis.dim,axisIndex:i.axis.model.componentIndex,value:a.value})})}function E_t(t,e,n,r){if(V2(e)||!t.list.length){r({type:"hideTip"});return}var i=((t.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};r({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:n.tooltipOption,position:n.position,dataIndexInside:i.dataIndexInside,dataIndex:i.dataIndex,seriesIndex:i.seriesIndex,dataByCoordSys:t.list})}function P_t(t,e,n){var r=n.getZr(),i="axisPointerLastHighlights",o=hY(r)[i]||{},a=hY(r)[i]={};be(t,function(u,c){var f=u.axisPointerModel.option;f.status==="show"&&u.triggerEmphasis&&be(f.seriesDataIndices,function(h){var d=h.seriesIndex+" | "+h.dataIndex;a[d]=h})});var s=[],l=[];be(o,function(u,c){!a[c]&&l.push(u)}),be(a,function(u,c){!o[c]&&s.push(u)}),l.length&&n.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),s.length&&n.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:s})}function O_t(t,e){for(var n=0;n<(t||[]).length;n++){var r=t[n];if(e.axis.dim===r.axisDim&&e.axis.model.componentIndex===r.axisIndex)return r}}function pY(t){var e=t.axis.model,n={},r=n.axisDim=t.axis.dim;return n.axisIndex=n[r+"AxisIndex"]=e.componentIndex,n.axisName=n[r+"AxisName"]=e.name,n.axisId=n[r+"AxisId"]=e.id,n}function V2(t){return!t||t[0]==null||isNaN(t[0])||t[1]==null||isNaN(t[1])}function I_t(t){Kbt.registerAxisPointerClass("CartesianAxisPointer",d_t),t.registerComponentModel(g_t),t.registerComponentView(w_t),t.registerPreprocessor(function(e){if(e){(!e.axisPointer||e.axisPointer.length===0)&&(e.axisPointer={});var n=e.axisPointer.link;n&&!mt(n)&&(e.axisPointer.link=[n])}}),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,function(e,n){e.getComponent("axisPointer").coordSysAxesInfo=zbt(e,n)}),t.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},x_t)}function $_t(t,e){var n=YA(e.get("padding")),r=e.getItemStyle(["color","opacity"]);return r.fill=e.get("backgroundColor"),t=new Qo({shape:{x:t.x-n[3],y:t.y-n[0],width:t.width+n[1]+n[3],height:t.height+n[0]+n[2],r:e.get("borderRadius")},style:r,silent:!0,z2:-1}),t}var L_t=function(t){Cr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="tooltip",e.dependencies=["axisPointer"],e.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},e}(Si);const D_t=L_t;function xhe(t){var e=t.get("confine");return e!=null?!!e:t.get("renderMode")==="richText"}function Che(t){if(En.domSupported){for(var e=document.documentElement.style,n=0,r=t.length;n<r;n++)if(t[n]in e)return t[n]}}var khe=Che(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),M_t=Che(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function The(t,e){if(!t)return e;e=bne(e,!0);var n=t.indexOf(e);return t=n===-1?e:"-"+t.slice(0,n)+"-"+e,t.toLowerCase()}function N_t(t,e){var n=t.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(t);return n?e?n[e]:n:null}var F_t=The(M_t,"transition"),o6=The(khe,"transform"),R_t="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(En.transform3dSupported?"will-change:transform;":"");function V_t(t){return t=t==="left"?"right":t==="right"?"left":t==="top"?"bottom":"top",t}function B_t(t,e,n){if(!Pt(n)||n==="inside")return"";var r=t.get("backgroundColor"),i=t.get("borderWidth");e=n_(e);var o=V_t(n),a=Math.max(Math.round(i)*1.5,6),s="",l=o6+":",u;wr(["left","right"],o)>-1?(s+="top:50%",l+="translateY(-50%) rotate("+(u=o==="left"?-225:-45)+"deg)"):(s+="left:50%",l+="translateX(-50%) rotate("+(u=o==="top"?225:45)+"deg)");var c=u*Math.PI/180,f=a+i,h=f*Math.abs(Math.cos(c))+f*Math.abs(Math.sin(c)),d=Math.round(((h-Math.SQRT2*i)/2+Math.SQRT2*i-(h-f)/2)*100)/100;s+=";"+o+":-"+d+"px";var g=e+" solid "+i+"px;",y=["position:absolute;width:"+a+"px;height:"+a+"px;z-index:-1;",s+";"+l+";","border-bottom:"+g,"border-right:"+g,"background-color:"+r+";"];return'<div style="'+y.join("")+'"></div>'}function z_t(t,e){var n="cubic-bezier(0.23,1,0.32,1)",r=" "+t/2+"s "+n,i="opacity"+r+",visibility"+r;return e||(r=" "+t+"s "+n,i+=En.transformSupported?","+o6+r:",left"+r+",top"+r),F_t+":"+i}function gY(t,e,n){var r=t.toFixed(0)+"px",i=e.toFixed(0)+"px";if(!En.transformSupported)return n?"top:"+i+";left:"+r+";":[["top",i],["left",r]];var o=En.transform3dSupported,a="translate"+(o?"3d":"")+"("+r+","+i+(o?",0":"")+")";return n?"top:0;left:0;"+o6+":"+a+";":[["top",0],["left",0],[khe,a]]}function j_t(t){var e=[],n=t.get("fontSize"),r=t.getTextColor();r&&e.push("color:"+r),e.push("font:"+t.getFont()),n&&e.push("line-height:"+Math.round(n*3/2)+"px");var i=t.get("textShadowColor"),o=t.get("textShadowBlur")||0,a=t.get("textShadowOffsetX")||0,s=t.get("textShadowOffsetY")||0;return i&&o&&e.push("text-shadow:"+a+"px "+s+"px "+o+"px "+i),be(["decoration","align"],function(l){var u=t.get(l);u&&e.push("text-"+l+":"+u)}),e.join(";")}function U_t(t,e,n){var r=[],i=t.get("transitionDuration"),o=t.get("backgroundColor"),a=t.get("shadowBlur"),s=t.get("shadowColor"),l=t.get("shadowOffsetX"),u=t.get("shadowOffsetY"),c=t.getModel("textStyle"),f=qne(t,"html"),h=l+"px "+u+"px "+a+"px "+s;return r.push("box-shadow:"+h),e&&i&&r.push(z_t(i,n)),o&&r.push("background-color:"+o),be(["width","color","radius"],function(d){var g="border-"+d,y=bne(g),_=t.get(y);_!=null&&r.push(g+":"+_+(d==="color"?"":"px"))}),r.push(j_t(c)),f!=null&&r.push("padding:"+YA(f).join("px ")+"px"),r.join(";")+";"}function mY(t,e,n,r,i){var o=e&&e.painter;if(n){var a=o&&o.getViewportRoot();a&&lPe(t,a,document.body,r,i)}else{t[0]=r,t[1]=i;var s=o&&o.getViewportRootOffset();s&&(t[0]+=s.offsetLeft,t[1]+=s.offsetTop)}t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}var W_t=function(){function t(e,n,r){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,En.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var o=this._zr=n.getZr(),a=this._appendToBody=r&&r.appendToBody;mY(this._styleCoord,o,a,n.getWidth()/2,n.getHeight()/2),a?document.body.appendChild(i):e.appendChild(i),this._container=e;var s=this;i.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},i.onmousemove=function(l){if(l=l||window.event,!s._enterable){var u=o.handler,c=o.painter.getViewportRoot();ul(c,l,!0),u.dispatch("mousemove",l)}},i.onmouseleave=function(){s._inContent=!1,s._enterable&&s._show&&s.hideLater(s._hideDelay)}}return t.prototype.update=function(e){var n=this._container,r=N_t(n,"position"),i=n.style;i.position!=="absolute"&&r!=="absolute"&&(i.position="relative");var o=e.get("alwaysShowContent");o&&this._moveIfResized(),this._alwaysShowContent=o,this.el.className=e.get("className")||""},t.prototype.show=function(e,n){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var r=this.el,i=r.style,o=this._styleCoord;r.innerHTML?i.cssText=R_t+U_t(e,!this._firstShow,this._longHide)+gY(o[0],o[1],!0)+("border-color:"+n_(n)+";")+(e.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):i.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},t.prototype.setContent=function(e,n,r,i,o){var a=this.el;if(e==null){a.innerHTML="";return}var s="";if(Pt(o)&&r.get("trigger")==="item"&&!xhe(r)&&(s=B_t(r,i,o)),Pt(e))a.innerHTML=e+s;else if(e){a.innerHTML="",mt(e)||(e=[e]);for(var l=0;l<e.length;l++)Ak(e[l])&&e[l].parentNode!==a&&a.appendChild(e[l]);if(s&&a.childNodes.length){var u=document.createElement("div");u.innerHTML=s,a.appendChild(u)}}},t.prototype.setEnterable=function(e){this._enterable=e},t.prototype.getSize=function(){var e=this.el;return[e.offsetWidth,e.offsetHeight]},t.prototype.moveTo=function(e,n){var r=this._styleCoord;if(mY(r,this._zr,this._appendToBody,e,n),r[0]!=null&&r[1]!=null){var i=this.el.style,o=gY(r[0],r[1]);be(o,function(a){i[a[0]]=a[1]})}},t.prototype._moveIfResized=function(){var e=this._styleCoord[2],n=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),n*this._zr.getHeight())},t.prototype.hide=function(){var e=this,n=this.el.style;n.visibility="hidden",n.opacity="0",En.transform3dSupported&&(n.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return e._longHide=!0},500)},t.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(Or(this.hide,this),e)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},t}();const H_t=W_t;var G_t=function(){function t(e){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=e.getZr(),yY(this._styleCoord,this._zr,e.getWidth()/2,e.getHeight()/2)}return t.prototype.update=function(e){var n=e.get("alwaysShowContent");n&&this._moveIfResized(),this._alwaysShowContent=n},t.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},t.prototype.setContent=function(e,n,r,i,o){var a=this;Bt(e)&&Qa(""),this.el&&this._zr.remove(this.el);var s=r.getModel("textStyle");this.el=new ea({style:{rich:n.richTextStyles,text:e,lineHeight:22,borderWidth:1,borderColor:i,textShadowColor:s.get("textShadowColor"),fill:r.get(["textStyle","color"]),padding:qne(r,"richText"),verticalAlign:"top",align:"left"},z:r.get("z")}),be(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(u){a.el.style[u]=r.get(u)}),be(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(u){a.el.style[u]=s.get(u)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},t.prototype.setEnterable=function(e){this._enterable=e},t.prototype.getSize=function(){var e=this.el,n=this.el.getBoundingRect(),r=vY(e.style);return[n.width+r.left+r.right,n.height+r.top+r.bottom]},t.prototype.moveTo=function(e,n){var r=this.el;if(r){var i=this._styleCoord;yY(i,this._zr,e,n),e=i[0],n=i[1];var o=r.style,a=dh(o.borderWidth||0),s=vY(o);r.x=e+a+s.left,r.y=n+a+s.top,r.markRedraw()}},t.prototype._moveIfResized=function(){var e=this._styleCoord[2],n=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),n*this._zr.getHeight())},t.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},t.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(Or(this.hide,this),e)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){this._zr.remove(this.el)},t}();function dh(t){return Math.max(0,t)}function vY(t){var e=dh(t.shadowBlur||0),n=dh(t.shadowOffsetX||0),r=dh(t.shadowOffsetY||0);return{left:dh(e-n),right:dh(e+n),top:dh(e-r),bottom:dh(e+r)}}function yY(t,e,n,r){t[0]=n,t[1]=r,t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}const q_t=G_t;var Y_t=new Qo({shape:{x:-1,y:-1,width:2,height:2}}),K_t=function(t){Cr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.init=function(n,r){if(!(En.node||!r.getDom())){var i=n.getComponent("tooltip"),o=this._renderMode=YOe(i.get("renderMode"));this._tooltipContent=o==="richText"?new q_t(r):new H_t(r.getDom(),r,{appendToBody:i.get("appendToBody",!0)})}},e.prototype.render=function(n,r,i){if(!(En.node||!i.getDom())){this.group.removeAll(),this._tooltipModel=n,this._ecModel=r,this._api=i;var o=this._tooltipContent;o.update(n),o.setEnterable(n.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&n.get("transitionDuration")?Kne(this,"_updatePosition",50,"fixRate"):NL(this,"_updatePosition")}},e.prototype._initGlobalListener=function(){var n=this._tooltipModel,r=n.get("triggerOn");She("itemTooltip",this._api,Or(function(i,o,a){r!=="none"&&(r.indexOf(i)>=0?this._tryShow(o,a):i==="leave"&&this._hide(a))},this))},e.prototype._keepShow=function(){var n=this._tooltipModel,r=this._ecModel,i=this._api,o=n.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&o!=="none"&&o!=="click"){var a=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!i.isDisposed()&&a.manuallyShowTip(n,r,i,{x:a._lastX,y:a._lastY,dataByCoordSys:a._lastDataByCoordSys})})}},e.prototype.manuallyShowTip=function(n,r,i,o){if(!(o.from===this.uid||En.node||!i.getDom())){var a=bY(o,i);this._ticket="";var s=o.dataByCoordSys,l=Q_t(o,r,i);if(l){var u=l.el.getBoundingRect().clone();u.applyTransform(l.el.transform),this._tryShow({offsetX:u.x+u.width/2,offsetY:u.y+u.height/2,target:l.el,position:o.position,positionDefault:"bottom"},a)}else if(o.tooltip&&o.x!=null&&o.y!=null){var c=Y_t;c.x=o.x,c.y=o.y,c.update(),Br(c).tooltipConfig={name:null,option:o.tooltip},this._tryShow({offsetX:o.x,offsetY:o.y,target:c},a)}else if(s)this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,dataByCoordSys:s,tooltipOption:o.tooltipOption},a);else if(o.seriesIndex!=null){if(this._manuallyAxisShowTip(n,r,i,o))return;var f=whe(o,r),h=f.point[0],d=f.point[1];h!=null&&d!=null&&this._tryShow({offsetX:h,offsetY:d,target:f.el,position:o.position,positionDefault:"bottom"},a)}else o.x!=null&&o.y!=null&&(i.dispatchAction({type:"updateAxisPointer",x:o.x,y:o.y}),this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,target:i.getZr().findHover(o.x,o.y).target},a))}},e.prototype.manuallyHideTip=function(n,r,i,o){var a=this._tooltipContent;this._tooltipModel&&a.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,o.from!==this.uid&&this._hide(bY(o,i))},e.prototype._manuallyAxisShowTip=function(n,r,i,o){var a=o.seriesIndex,s=o.dataIndex,l=r.getComponent("axisPointer").coordSysAxesInfo;if(!(a==null||s==null||l==null)){var u=r.getSeriesByIndex(a);if(u){var c=u.getData(),f=mb([c.getItemModel(s),u,(u.coordinateSystem||{}).model],this._tooltipModel);if(f.get("trigger")==="axis")return i.dispatchAction({type:"updateAxisPointer",seriesIndex:a,dataIndex:s,position:o.position}),!0}}},e.prototype._tryShow=function(n,r){var i=n.target,o=this._tooltipModel;if(o){this._lastX=n.offsetX,this._lastY=n.offsetY;var a=n.dataByCoordSys;if(a&&a.length)this._showAxisTooltip(a,n);else if(i){this._lastDataByCoordSys=null;var s,l;$b(i,function(u){if(Br(u).dataIndex!=null)return s=u,!0;if(Br(u).tooltipConfig!=null)return l=u,!0},!0),s?this._showSeriesItemTooltip(n,s,r):l?this._showComponentItemTooltip(n,l,r):this._hide(r)}else this._lastDataByCoordSys=null,this._hide(r)}},e.prototype._showOrMove=function(n,r){var i=n.get("showDelay");r=Or(r,this),clearTimeout(this._showTimout),i>0?this._showTimout=setTimeout(r,i):r()},e.prototype._showAxisTooltip=function(n,r){var i=this._ecModel,o=this._tooltipModel,a=[r.offsetX,r.offsetY],s=mb([r.tooltipOption],o),l=this._renderMode,u=[],c=kg("section",{blocks:[],noHeader:!0}),f=[],h=new K3;be(n,function(S){be(S.dataByAxis,function(C){var k=i.getComponent(C.axisDim+"Axis",C.axisIndex),x=C.value;if(!(!k||x==null)){var m=bhe(x,k.axis,i,C.seriesDataIndices,C.valueLabelOpt),T=kg("section",{header:m,noHeader:!ac(m),sortBlocks:!0,blocks:[]});c.blocks.push(T),be(C.seriesDataIndices,function(P){var I=i.getSeriesByIndex(P.seriesIndex),M=P.dataIndexInside,L=I.getDataParams(M);if(!(L.dataIndex<0)){L.axisDim=C.axisDim,L.axisIndex=C.axisIndex,L.axisType=C.axisType,L.axisId=C.axisId,L.axisValue=Ire(k.axis,{value:x}),L.axisValueLabel=m,L.marker=h.makeTooltipMarker("item",n_(L.color),l);var R=Rj(I.formatTooltip(M,!0,null)),V=R.frag;if(V){var z=mb([I],o).get("valueFormatter");T.blocks.push(z?ot({valueFormatter:z},V):V)}R.text&&f.push(R.text),u.push(L)}})}})}),c.blocks.reverse(),f.reverse();var d=r.position,g=s.get("order"),y=Uj(c,h,l,g,i.get("useUTC"),s.get("textStyle"));y&&f.unshift(y);var _=l==="richText"?`

`:"<br/>",v=f.join(_);this._showOrMove(s,function(){this._updateContentNotChangedOnAxis(n,u)?this._updatePosition(s,d,a[0],a[1],this._tooltipContent,u):this._showTooltipContent(s,v,u,Math.random()+"",a[0],a[1],d,null,h)})},e.prototype._showSeriesItemTooltip=function(n,r,i){var o=this._ecModel,a=Br(r),s=a.seriesIndex,l=o.getSeriesByIndex(s),u=a.dataModel||l,c=a.dataIndex,f=a.dataType,h=u.getData(f),d=this._renderMode,g=n.positionDefault,y=mb([h.getItemModel(c),u,l&&(l.coordinateSystem||{}).model],this._tooltipModel,g?{position:g}:null),_=y.get("trigger");if(!(_!=null&&_!=="item")){var v=u.getDataParams(c,f),S=new K3;v.marker=S.makeTooltipMarker("item",n_(v.color),d);var C=Rj(u.formatTooltip(c,!1,f)),k=y.get("order"),x=y.get("valueFormatter"),m=C.frag,T=m?Uj(x?ot({valueFormatter:x},m):m,S,d,k,o.get("useUTC"),y.get("textStyle")):C.text,P="item_"+u.name+"_"+c;this._showOrMove(y,function(){this._showTooltipContent(y,T,v,P,n.offsetX,n.offsetY,n.position,n.target,S)}),i({type:"showTip",dataIndexInside:c,dataIndex:h.getRawIndex(c),seriesIndex:s,from:this.uid})}},e.prototype._showComponentItemTooltip=function(n,r,i){var o=Br(r),a=o.tooltipConfig,s=a.option||{};if(Pt(s)){var l=s;s={content:l,formatter:l}}var u=[s],c=this._ecModel.getComponent(o.componentMainType,o.componentIndex);c&&u.push(c),u.push({formatter:s.content});var f=n.positionDefault,h=mb(u,this._tooltipModel,f?{position:f}:null),d=h.get("content"),g=Math.random()+"",y=new K3;this._showOrMove(h,function(){var _=Gn(h.get("formatterParams")||{});this._showTooltipContent(h,d,_,g,n.offsetX,n.offsetY,n.position,r,y)}),i({type:"showTip",from:this.uid})},e.prototype._showTooltipContent=function(n,r,i,o,a,s,l,u,c){if(this._ticket="",!(!n.get("showContent")||!n.get("show"))){var f=this._tooltipContent;f.setEnterable(n.get("enterable"));var h=n.get("formatter");l=l||n.get("position");var d=r,g=this._getNearestPoint([a,s],i,n.get("trigger"),n.get("borderColor")),y=g.color;if(h)if(Pt(h)){var _=n.ecModel.get("useUTC"),v=mt(i)?i[0]:i,S=v&&v.axisType&&v.axisType.indexOf("time")>=0;d=h,S&&(d=yne(v.axisValue,d,_)),d=_ne(d,i,!0)}else if(Qn(h)){var C=Or(function(k,x){k===this._ticket&&(f.setContent(x,c,n,y,l),this._updatePosition(n,l,a,s,f,i,u))},this);this._ticket=o,d=h(i,o,C)}else d=h;f.setContent(d,c,n,y,l),f.show(n,y),this._updatePosition(n,l,a,s,f,i,u)}},e.prototype._getNearestPoint=function(n,r,i,o){if(i==="axis"||mt(r))return{color:o||(this._renderMode==="html"?"#fff":"none")};if(!mt(r))return{color:o||r.color||r.borderColor}},e.prototype._updatePosition=function(n,r,i,o,a,s,l){var u=this._api.getWidth(),c=this._api.getHeight();r=r||n.get("position");var f=a.getSize(),h=n.get("align"),d=n.get("verticalAlign"),g=l&&l.getBoundingRect().clone();if(l&&g.applyTransform(l.transform),Qn(r)&&(r=r([i,o],s,a.el,g,{viewSize:[u,c],contentSize:f.slice()})),mt(r))i=Kr(r[0],u),o=Kr(r[1],c);else if(Bt(r)){var y=r;y.width=f[0],y.height=f[1];var _=c0(y,{width:u,height:c});i=_.x,o=_.y,h=null,d=null}else if(Pt(r)&&l){var v=Z_t(r,g,f,n.get("borderWidth"));i=v[0],o=v[1]}else{var v=X_t(i,o,a,u,c,h?null:20,d?null:20);i=v[0],o=v[1]}if(h&&(i-=_Y(h)?f[0]/2:h==="right"?f[0]:0),d&&(o-=_Y(d)?f[1]/2:d==="bottom"?f[1]:0),xhe(n)){var v=J_t(i,o,a,u,c);i=v[0],o=v[1]}a.moveTo(i,o)},e.prototype._updateContentNotChangedOnAxis=function(n,r){var i=this._lastDataByCoordSys,o=this._cbParamsList,a=!!i&&i.length===n.length;return a&&be(i,function(s,l){var u=s.dataByAxis||[],c=n[l]||{},f=c.dataByAxis||[];a=a&&u.length===f.length,a&&be(u,function(h,d){var g=f[d]||{},y=h.seriesDataIndices||[],_=g.seriesDataIndices||[];a=a&&h.value===g.value&&h.axisType===g.axisType&&h.axisId===g.axisId&&y.length===_.length,a&&be(y,function(v,S){var C=_[S];a=a&&v.seriesIndex===C.seriesIndex&&v.dataIndex===C.dataIndex}),o&&be(h.seriesDataIndices,function(v){var S=v.seriesIndex,C=r[S],k=o[S];C&&k&&k.data!==C.data&&(a=!1)})})}),this._lastDataByCoordSys=n,this._cbParamsList=r,!!a},e.prototype._hide=function(n){this._lastDataByCoordSys=null,n({type:"hideTip",from:this.uid})},e.prototype.dispose=function(n,r){En.node||!r.getDom()||(NL(this,"_updatePosition"),this._tooltipContent.dispose(),rM("itemTooltip",r))},e.type="tooltip",e}(ld);function mb(t,e,n){var r=e.ecModel,i;n?(i=new uo(n,r,r),i=new uo(e.option,i,r)):i=e;for(var o=t.length-1;o>=0;o--){var a=t[o];a&&(a instanceof uo&&(a=a.get("tooltip",!0)),Pt(a)&&(a={formatter:a}),a&&(i=new uo(a,i,r)))}return i}function bY(t,e){return t.dispatchAction||Or(e.dispatchAction,e)}function X_t(t,e,n,r,i,o,a){var s=n.getSize(),l=s[0],u=s[1];return o!=null&&(t+l+o+2>r?t-=l+o:t+=o),a!=null&&(e+u+a>i?e-=u+a:e+=a),[t,e]}function J_t(t,e,n,r,i){var o=n.getSize(),a=o[0],s=o[1];return t=Math.min(t+a,r)-a,e=Math.min(e+s,i)-s,t=Math.max(t,0),e=Math.max(e,0),[t,e]}function Z_t(t,e,n,r){var i=n[0],o=n[1],a=Math.ceil(Math.SQRT2*r)+8,s=0,l=0,u=e.width,c=e.height;switch(t){case"inside":s=e.x+u/2-i/2,l=e.y+c/2-o/2;break;case"top":s=e.x+u/2-i/2,l=e.y-o-a;break;case"bottom":s=e.x+u/2-i/2,l=e.y+c+a;break;case"left":s=e.x-i-a,l=e.y+c/2-o/2;break;case"right":s=e.x+u+a,l=e.y+c/2-o/2}return[s,l]}function _Y(t){return t==="center"||t==="middle"}function Q_t(t,e,n){var r=aF(t).queryOptionMap,i=r.keys()[0];if(!(!i||i==="series")){var o=fS(e,i,r.get(i),{useDefault:!1,enableAll:!1,enableNone:!1}),a=o.models[0];if(a){var s=n.getViewOfComponentModel(a),l;if(s.group.traverse(function(u){var c=Br(u).tooltipConfig;if(c&&c.name===t.name)return l=u,!0}),l)return{componentMainType:i,componentIndex:a.componentIndex,el:l}}}}const eSt=K_t;function a6(t){Tf(I_t),t.registerComponentModel(D_t),t.registerComponentView(eSt),t.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},Jo),t.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},Jo)}var tSt=function(t){Cr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.layoutMode={type:"box",ignoreSize:!0},n}return e.type="title",e.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},e}(Si),nSt=function(t){Cr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i){if(this.group.removeAll(),!!n.get("show")){var o=this.group,a=n.getModel("textStyle"),s=n.getModel("subtextStyle"),l=n.get("textAlign"),u=gn(n.get("textBaseline"),n.get("textVerticalAlign")),c=new ea({style:kf(a,{text:n.get("text"),fill:a.getTextColor()},{disableBox:!0}),z2:10}),f=c.getBoundingRect(),h=n.get("subtext"),d=new ea({style:kf(s,{text:h,fill:s.getTextColor(),y:f.height+n.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),g=n.get("link"),y=n.get("sublink"),_=n.get("triggerEvent",!0);c.silent=!g&&!_,d.silent=!y&&!_,g&&c.on("click",function(){OL(g,"_"+n.get("target"))}),y&&d.on("click",function(){OL(y,"_"+n.get("subtarget"))}),Br(c).eventData=Br(d).eventData=_?{componentType:"title",componentIndex:n.componentIndex}:null,o.add(c),h&&o.add(d);var v=o.getBoundingRect(),S=n.getBoxLayoutParams();S.width=v.width,S.height=v.height;var C=c0(S,{width:i.getWidth(),height:i.getHeight()},n.get("padding"));l||(l=n.get("left")||n.get("right"),l==="middle"&&(l="center"),l==="right"?C.x+=C.width:l==="center"&&(C.x+=C.width/2)),u||(u=n.get("top")||n.get("bottom"),u==="center"&&(u="middle"),u==="bottom"?C.y+=C.height:u==="middle"&&(C.y+=C.height/2),u=u||"top"),o.x=C.x,o.y=C.y,o.markRedraw();var k={align:l,verticalAlign:u};c.setStyle(k),d.setStyle(k),v=o.getBoundingRect();var x=C.margin,m=n.getItemStyle(["color","opacity"]);m.fill=n.get("backgroundColor");var T=new Qo({shape:{x:v.x-x[3],y:v.y-x[0],width:v.width+x[1]+x[3],height:v.height+x[0]+x[2],r:n.get("borderRadius")},style:m,subPixelOptimize:!0,silent:!0});o.add(T)}},e.type="title",e}(ld);function s6(t){t.registerComponentModel(tSt),t.registerComponentView(nSt)}var rSt=function(t,e){if(e==="all")return{type:"all",title:t.getLocaleModel().get(["legend","selector","all"])};if(e==="inverse")return{type:"inverse",title:t.getLocaleModel().get(["legend","selector","inverse"])}},iSt=function(t){Cr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.layoutMode={type:"box",ignoreSize:!0},n}return e.prototype.init=function(n,r,i){this.mergeDefaultAndTheme(n,i),n.selected=n.selected||{},this._updateSelector(n)},e.prototype.mergeOption=function(n,r){t.prototype.mergeOption.call(this,n,r),this._updateSelector(n)},e.prototype._updateSelector=function(n){var r=n.selector,i=this.ecModel;r===!0&&(r=n.selector=["all","inverse"]),mt(r)&&be(r,function(o,a){Pt(o)&&(o={type:o}),r[a]=hi(o,rSt(i,o.type))})},e.prototype.optionUpdated=function(){this._updateData(this.ecModel);var n=this._data;if(n[0]&&this.get("selectedMode")==="single"){for(var r=!1,i=0;i<n.length;i++){var o=n[i].get("name");if(this.isSelected(o)){this.select(o),r=!0;break}}!r&&this.select(n[0].get("name"))}},e.prototype._updateData=function(n){var r=[],i=[];n.eachRawSeries(function(l){var u=l.name;i.push(u);var c;if(l.legendVisualProvider){var f=l.legendVisualProvider,h=f.getAllNames();n.isSeriesFiltered(l)||(i=i.concat(h)),h.length?r=r.concat(h):c=!0}else c=!0;c&&oF(l)&&r.push(l.name)}),this._availableNames=i;var o=this.get("data")||r,a=mn(),s=Qt(o,function(l){return(Pt(l)||Zr(l))&&(l={name:l}),a.get(l.name)?null:(a.set(l.name,!0),new uo(l,this,this.ecModel))},this);this._data=Za(s,function(l){return!!l})},e.prototype.getData=function(){return this._data},e.prototype.select=function(n){var r=this.option.selected,i=this.get("selectedMode");if(i==="single"){var o=this._data;be(o,function(a){r[a.get("name")]=!1})}r[n]=!0},e.prototype.unSelect=function(n){this.get("selectedMode")!=="single"&&(this.option.selected[n]=!1)},e.prototype.toggleSelected=function(n){var r=this.option.selected;r.hasOwnProperty(n)||(r[n]=!0),this[r[n]?"unSelect":"select"](n)},e.prototype.allSelect=function(){var n=this._data,r=this.option.selected;be(n,function(i){r[i.get("name",!0)]=!0})},e.prototype.inverseSelect=function(){var n=this._data,r=this.option.selected;be(n,function(i){var o=i.get("name",!0);r.hasOwnProperty(o)||(r[o]=!0),r[o]=!r[o]})},e.prototype.isSelected=function(n){var r=this.option.selected;return!(r.hasOwnProperty(n)&&!r[n])&&wr(this._availableNames,n)>=0},e.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},e.type="legend.plain",e.dependencies=["series"],e.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},e}(Si);const iM=iSt;var Um=Vr,oM=be,HC=bc,oSt=function(t){Cr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.newlineDisabled=!1,n}return e.prototype.init=function(){this.group.add(this._contentGroup=new HC),this.group.add(this._selectorGroup=new HC),this._isFirstRender=!0},e.prototype.getContentGroup=function(){return this._contentGroup},e.prototype.getSelectorGroup=function(){return this._selectorGroup},e.prototype.render=function(n,r,i){var o=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!n.get("show",!0)){var a=n.get("align"),s=n.get("orient");(!a||a==="auto")&&(a=n.get("left")==="right"&&s==="vertical"?"right":"left");var l=n.get("selector",!0),u=n.get("selectorPosition",!0);l&&(!u||u==="auto")&&(u=s==="horizontal"?"end":"start"),this.renderInner(a,n,r,i,l,s,u);var c=n.getBoxLayoutParams(),f={width:i.getWidth(),height:i.getHeight()},h=n.get("padding"),d=c0(c,f,h),g=this.layoutInner(n,a,d,o,l,u),y=c0(pi({width:g.width,height:g.height},c),f,h);this.group.x=y.x-g.x,this.group.y=y.y-g.y,this.group.markRedraw(),this.group.add(this._backgroundEl=$_t(g,n))}},e.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},e.prototype.renderInner=function(n,r,i,o,a,s,l){var u=this.getContentGroup(),c=mn(),f=r.get("selectedMode"),h=[];i.eachRawSeries(function(d){!d.get("legendHoverLink")&&h.push(d.id)}),oM(r.getData(),function(d,g){var y=d.get("name");if(!this.newlineDisabled&&(y===""||y===`
`)){var _=new HC;_.newline=!0,u.add(_);return}var v=i.getSeriesByName(y)[0];if(!c.get(y))if(v){var S=v.getData(),C=S.getVisual("legendLineStyle")||{},k=S.getVisual("legendIcon"),x=S.getVisual("style"),m=this._createItem(v,y,g,d,r,n,C,x,k,f,o);m.on("click",Um(SY,y,null,o,h)).on("mouseover",Um(aM,v.name,null,o,h)).on("mouseout",Um(sM,v.name,null,o,h)),c.set(y,!0)}else i.eachRawSeries(function(T){if(!c.get(y)&&T.legendVisualProvider){var P=T.legendVisualProvider;if(!P.containName(y))return;var I=P.indexOfName(y),M=P.getItemVisual(I,"style"),L=P.getItemVisual(I,"legendIcon"),R=hu(M.fill);R&&R[3]===0&&(R[3]=.2,M=ot(ot({},M),{fill:Nh(R,"rgba")}));var V=this._createItem(T,y,g,d,r,n,{},M,L,f,o);V.on("click",Um(SY,null,y,o,h)).on("mouseover",Um(aM,null,y,o,h)).on("mouseout",Um(sM,null,y,o,h)),c.set(y,!0)}},this)},this),a&&this._createSelector(a,r,o,s,l)},e.prototype._createSelector=function(n,r,i,o,a){var s=this.getSelectorGroup();oM(n,function(u){var c=u.type,f=new ea({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){i.dispatchAction({type:c==="all"?"legendAllSelect":"legendInverseSelect"})}});s.add(f);var h=r.getModel("selectorLabel"),d=r.getModel(["emphasis","selectorLabel"]);Hk(f,{normal:h,emphasis:d},{defaultText:u.title}),wL(f)})},e.prototype._createItem=function(n,r,i,o,a,s,l,u,c,f,h){var d=n.visualDrawType,g=a.get("itemWidth"),y=a.get("itemHeight"),_=a.isSelected(r),v=o.get("symbolRotate"),S=o.get("symbolKeepAspect"),C=o.get("icon");c=C||c||"roundRect";var k=aSt(c,o,l,u,d,_,h),x=new HC,m=o.getModel("textStyle");if(Qn(n.getLegendIcon)&&(!C||C==="inherit"))x.add(n.getLegendIcon({itemWidth:g,itemHeight:y,icon:c,iconRotate:v,itemStyle:k.itemStyle,lineStyle:k.lineStyle,symbolKeepAspect:S}));else{var T=C==="inherit"&&n.getData().getVisual("symbol")?v==="inherit"?n.getData().getVisual("symbolRotate"):v:0;x.add(sSt({itemWidth:g,itemHeight:y,icon:c,iconRotate:T,itemStyle:k.itemStyle,lineStyle:k.lineStyle,symbolKeepAspect:S}))}var P=s==="left"?g+5:-5,I=s,M=a.get("formatter"),L=r;Pt(M)&&M?L=M.replace("{name}",r??""):Qn(M)&&(L=M(r));var R=_?m.getTextColor():o.get("inactiveColor");x.add(new ea({style:kf(m,{text:L,x:P,y:y/2,fill:R,align:I,verticalAlign:"middle"},{inheritColor:R})}));var V=new Qo({shape:x.getBoundingRect(),invisible:!0}),z=o.getModel("tooltip");return z.get("show")&&wF({el:V,componentModel:a,itemName:r,itemTooltipOption:z.option}),x.add(V),x.eachChild(function(ie){ie.silent=!0}),V.silent=!f,this.getContentGroup().add(x),wL(x),x.__legendDataIndex=i,x},e.prototype.layoutInner=function(n,r,i,o,a,s){var l=this.getContentGroup(),u=this.getSelectorGroup();a1(n.get("orient"),l,n.get("itemGap"),i.width,i.height);var c=l.getBoundingRect(),f=[-c.x,-c.y];if(u.markRedraw(),l.markRedraw(),a){a1("horizontal",u,n.get("selectorItemGap",!0));var h=u.getBoundingRect(),d=[-h.x,-h.y],g=n.get("selectorButtonGap",!0),y=n.getOrient().index,_=y===0?"width":"height",v=y===0?"height":"width",S=y===0?"y":"x";s==="end"?d[y]+=c[_]+g:f[y]+=h[_]+g,d[1-y]+=c[v]/2-h[v]/2,u.x=d[0],u.y=d[1],l.x=f[0],l.y=f[1];var C={x:0,y:0};return C[_]=c[_]+g+h[_],C[v]=Math.max(c[v],h[v]),C[S]=Math.min(0,h[S]+d[1-y]),C}else return l.x=f[0],l.y=f[1],this.group.getBoundingRect()},e.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},e.type="legend.plain",e}(ld);function aSt(t,e,n,r,i,o,a){function s(_,v){_.lineWidth==="auto"&&(_.lineWidth=v.lineWidth>0?2:0),oM(_,function(S,C){_[C]==="inherit"&&(_[C]=v[C])})}var l=e.getModel("itemStyle"),u=l.getItemStyle(),c=t.lastIndexOf("empty",0)===0?"fill":"stroke",f=l.getShallow("decal");u.decal=!f||f==="inherit"?r.decal:Qk(f,a),u.fill==="inherit"&&(u.fill=r[i]),u.stroke==="inherit"&&(u.stroke=r[c]),u.opacity==="inherit"&&(u.opacity=(i==="fill"?r:n).opacity),s(u,r);var h=e.getModel("lineStyle"),d=h.getLineStyle();if(s(d,n),u.fill==="auto"&&(u.fill=r.fill),u.stroke==="auto"&&(u.stroke=r.fill),d.stroke==="auto"&&(d.stroke=r.fill),!o){var g=e.get("inactiveBorderWidth"),y=u[c];u.lineWidth=g==="auto"?r.lineWidth>0&&y?2:0:u.lineWidth,u.fill=e.get("inactiveColor"),u.stroke=e.get("inactiveBorderColor"),d.stroke=h.get("inactiveColor"),d.lineWidth=h.get("inactiveWidth")}return{itemStyle:u,lineStyle:d}}function sSt(t){var e=t.icon||"roundRect",n=NF(e,0,0,t.itemWidth,t.itemHeight,t.itemStyle.fill,t.symbolKeepAspect);return n.setStyle(t.itemStyle),n.rotation=(t.iconRotate||0)*Math.PI/180,n.setOrigin([t.itemWidth/2,t.itemHeight/2]),e.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill="#fff",n.style.lineWidth=2),n}function SY(t,e,n,r){sM(t,e,n,r),n.dispatchAction({type:"legendToggleSelect",name:t??e}),aM(t,e,n,r)}function Ahe(t){for(var e=t.getZr().storage.getDisplayList(),n,r=0,i=e.length;r<i&&!(n=e[r].states.emphasis);)r++;return n&&n.hoverLayer}function aM(t,e,n,r){Ahe(n)||n.dispatchAction({type:"highlight",seriesName:t,name:e,excludeSeriesId:r})}function sM(t,e,n,r){Ahe(n)||n.dispatchAction({type:"downplay",seriesName:t,name:e,excludeSeriesId:r})}const Ehe=oSt;function lSt(t){var e=t.findComponents({mainType:"legend"});e&&e.length&&t.filterSeries(function(n){for(var r=0;r<e.length;r++)if(!e[r].isSelected(n.name))return!1;return!0})}function vb(t,e,n){var r={},i=t==="toggleSelected",o;return n.eachComponent("legend",function(a){i&&o!=null?a[o?"select":"unSelect"](e.name):t==="allSelect"||t==="inverseSelect"?a[t]():(a[t](e.name),o=a.isSelected(e.name));var s=a.getData();be(s,function(l){var u=l.get("name");if(!(u===`
`||u==="")){var c=a.isSelected(u);r.hasOwnProperty(u)?r[u]=r[u]&&c:r[u]=c}})}),t==="allSelect"||t==="inverseSelect"?{selected:r}:{name:e.name,selected:r}}function uSt(t){t.registerAction("legendToggleSelect","legendselectchanged",Vr(vb,"toggleSelected")),t.registerAction("legendAllSelect","legendselectall",Vr(vb,"allSelect")),t.registerAction("legendInverseSelect","legendinverseselect",Vr(vb,"inverseSelect")),t.registerAction("legendSelect","legendselected",Vr(vb,"select")),t.registerAction("legendUnSelect","legendunselected",Vr(vb,"unSelect"))}function Phe(t){t.registerComponentModel(iM),t.registerComponentView(Ehe),t.registerProcessor(t.PRIORITY.PROCESSOR.SERIES_FILTER,lSt),t.registerSubTypeDefaulter("legend",function(){return"plain"}),uSt(t)}var cSt=function(t){Cr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.setScrollDataIndex=function(n){this.option.scrollDataIndex=n},e.prototype.init=function(n,r,i){var o=TF(n);t.prototype.init.call(this,n,r,i),wY(this,n,o)},e.prototype.mergeOption=function(n,r){t.prototype.mergeOption.call(this,n,r),wY(this,this.option,n)},e.type="legend.scroll",e.defaultOption=E4e(iM.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),e}(iM);function wY(t,e,n){var r=t.getOrient(),i=[1,1];i[r.index]=0,r_(e,n,{type:"box",ignoreSize:!!i})}const fSt=cSt;var xY=bc,h4=["width","height"],d4=["x","y"],hSt=function(t){Cr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.newlineDisabled=!0,n._currentIndex=0,n}return e.prototype.init=function(){t.prototype.init.call(this),this.group.add(this._containerGroup=new xY),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new xY)},e.prototype.resetInner=function(){t.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},e.prototype.renderInner=function(n,r,i,o,a,s,l){var u=this;t.prototype.renderInner.call(this,n,r,i,o,a,s,l);var c=this._controllerGroup,f=r.get("pageIconSize",!0),h=mt(f)?f:[f,f];g("pagePrev",0);var d=r.getModel("pageTextStyle");c.add(new ea({name:"pageText",style:{text:"xx/xx",fill:d.getTextColor(),font:d.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),g("pageNext",1);function g(y,_){var v=y+"DataIndex",S=SF(r.get("pageIcons",!0)[r.getOrient().name][_],{onclick:Or(u._pageGo,u,v,r,o)},{x:-h[0]/2,y:-h[1]/2,width:h[0],height:h[1]});S.name=y,c.add(S)}},e.prototype.layoutInner=function(n,r,i,o,a,s){var l=this.getSelectorGroup(),u=n.getOrient().index,c=h4[u],f=d4[u],h=h4[1-u],d=d4[1-u];a&&a1("horizontal",l,n.get("selectorItemGap",!0));var g=n.get("selectorButtonGap",!0),y=l.getBoundingRect(),_=[-y.x,-y.y],v=Gn(i);a&&(v[c]=i[c]-y[c]-g);var S=this._layoutContentAndController(n,o,v,u,c,h,d,f);if(a){if(s==="end")_[u]+=S[c]+g;else{var C=y[c]+g;_[u]-=C,S[f]-=C}S[c]+=y[c]+g,_[1-u]+=S[d]+S[h]/2-y[h]/2,S[h]=Math.max(S[h],y[h]),S[d]=Math.min(S[d],y[d]+_[1-u]),l.x=_[0],l.y=_[1],l.markRedraw()}return S},e.prototype._layoutContentAndController=function(n,r,i,o,a,s,l,u){var c=this.getContentGroup(),f=this._containerGroup,h=this._controllerGroup;a1(n.get("orient"),c,n.get("itemGap"),o?i.width:null,o?null:i.height),a1("horizontal",h,n.get("pageButtonItemGap",!0));var d=c.getBoundingRect(),g=h.getBoundingRect(),y=this._showController=d[a]>i[a],_=[-d.x,-d.y];r||(_[o]=c[u]);var v=[0,0],S=[-g.x,-g.y],C=gn(n.get("pageButtonGap",!0),n.get("itemGap",!0));if(y){var k=n.get("pageButtonPosition",!0);k==="end"?S[o]+=i[a]-g[a]:v[o]+=g[a]+C}S[1-o]+=d[s]/2-g[s]/2,c.setPosition(_),f.setPosition(v),h.setPosition(S);var x={x:0,y:0};if(x[a]=y?i[a]:d[a],x[s]=Math.max(d[s],g[s]),x[l]=Math.min(0,g[l]+S[1-o]),f.__rectSize=i[a],y){var m={x:0,y:0};m[a]=Math.max(i[a]-g[a]-C,0),m[s]=x[s],f.setClipPath(new Qo({shape:m})),f.__rectSize=m[a]}else h.eachChild(function(P){P.attr({invisible:!0,silent:!0})});var T=this._getPageInfo(n);return T.pageIndex!=null&&Cg(c,{x:T.contentPosition[0],y:T.contentPosition[1]},y?n:null),this._updatePageInfoView(n,T),x},e.prototype._pageGo=function(n,r,i){var o=this._getPageInfo(r)[n];o!=null&&i.dispatchAction({type:"legendScroll",scrollDataIndex:o,legendId:r.id})},e.prototype._updatePageInfoView=function(n,r){var i=this._controllerGroup;be(["pagePrev","pageNext"],function(c){var f=c+"DataIndex",h=r[f]!=null,d=i.childOfName(c);d&&(d.setStyle("fill",h?n.get("pageIconColor",!0):n.get("pageIconInactiveColor",!0)),d.cursor=h?"pointer":"default")});var o=i.childOfName("pageText"),a=n.get("pageFormatter"),s=r.pageIndex,l=s!=null?s+1:0,u=r.pageCount;o&&a&&o.setStyle("text",Pt(a)?a.replace("{current}",l==null?"":l+"").replace("{total}",u==null?"":u+""):a({current:l,total:u}))},e.prototype._getPageInfo=function(n){var r=n.get("scrollDataIndex",!0),i=this.getContentGroup(),o=this._containerGroup.__rectSize,a=n.getOrient().index,s=h4[a],l=d4[a],u=this._findTargetItemIndex(r),c=i.children(),f=c[u],h=c.length,d=h?1:0,g={contentPosition:[i.x,i.y],pageCount:d,pageIndex:d-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!f)return g;var y=k(f);g.contentPosition[a]=-y.s;for(var _=u+1,v=y,S=y,C=null;_<=h;++_)C=k(c[_]),(!C&&S.e>v.s+o||C&&!x(C,v.s))&&(S.i>v.i?v=S:v=C,v&&(g.pageNextDataIndex==null&&(g.pageNextDataIndex=v.i),++g.pageCount)),S=C;for(var _=u-1,v=y,S=y,C=null;_>=-1;--_)C=k(c[_]),(!C||!x(S,C.s))&&v.i<S.i&&(S=v,g.pagePrevDataIndex==null&&(g.pagePrevDataIndex=v.i),++g.pageCount,++g.pageIndex),v=C;return g;function k(m){if(m){var T=m.getBoundingRect(),P=T[l]+m[l];return{s:P,e:P+T[s],i:m.__legendDataIndex}}}function x(m,T){return m.e>=T&&m.s<=T+o}},e.prototype._findTargetItemIndex=function(n){if(!this._showController)return 0;var r,i=this.getContentGroup(),o;return i.eachChild(function(a,s){var l=a.__legendDataIndex;o==null&&l!=null&&(o=s),l===n&&(r=s)}),r??o},e.type="legend.scroll",e}(Ehe);const dSt=hSt;function pSt(t){t.registerAction("legendScroll","legendscroll",function(e,n){var r=e.scrollDataIndex;r!=null&&n.eachComponent({mainType:"legend",subType:"scroll",query:e},function(i){i.setScrollDataIndex(r)})})}function gSt(t){Tf(Phe),t.registerComponentModel(fSt),t.registerComponentView(dSt),pSt(t)}function l6(t){Tf(Phe),Tf(gSt)}var p4=Math.sin,g4=Math.cos,Ohe=Math.PI,bp=Math.PI*2,mSt=180/Ohe,vSt=function(){function t(){}return t.prototype.reset=function(e){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,e||4)},t.prototype.moveTo=function(e,n){this._add("M",e,n)},t.prototype.lineTo=function(e,n){this._add("L",e,n)},t.prototype.bezierCurveTo=function(e,n,r,i,o,a){this._add("C",e,n,r,i,o,a)},t.prototype.quadraticCurveTo=function(e,n,r,i){this._add("Q",e,n,r,i)},t.prototype.arc=function(e,n,r,i,o,a){this.ellipse(e,n,r,r,0,i,o,a)},t.prototype.ellipse=function(e,n,r,i,o,a,s,l){var u=s-a,c=!l,f=Math.abs(u),h=Ch(f-bp)||(c?u>=bp:-u>=bp),d=u>0?u%bp:u%bp+bp,g=!1;h?g=!0:Ch(f)?g=!1:g=d>=Ohe==!!c;var y=e+r*g4(a),_=n+i*p4(a);this._start&&this._add("M",y,_);var v=Math.round(o*mSt);if(h){var S=1/this._p,C=(c?1:-1)*(bp-S);this._add("A",r,i,v,1,+c,e+r*g4(a+C),n+i*p4(a+C)),S>.01&&this._add("A",r,i,v,0,+c,y,_)}else{var k=e+r*g4(s),x=n+i*p4(s);this._add("A",r,i,v,+g,+c,k,x)}},t.prototype.rect=function(e,n,r,i){this._add("M",e,n),this._add("l",r,0),this._add("l",0,i),this._add("l",-r,0),this._add("Z")},t.prototype.closePath=function(){this._d.length>0&&this._add("Z")},t.prototype._add=function(e,n,r,i,o,a,s,l,u){for(var c=[],f=this._p,h=1;h<arguments.length;h++){var d=arguments[h];if(isNaN(d)){this._invalid=!0;return}c.push(Math.round(d*f)/f)}this._d.push(e+c.join(" ")),this._start=e==="Z"},t.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},t.prototype.getStr=function(){return this._str},t}();const Ihe=vSt;var b1="none",ySt=Math.round;function bSt(t){var e=t.fill;return e!=null&&e!==b1}function _St(t){var e=t.stroke;return e!=null&&e!==b1}var lM=["lineCap","miterLimit","lineJoin"],SSt=Qt(lM,function(t){return"stroke-"+t.toLowerCase()});function wSt(t,e,n,r){var i=e.opacity==null?1:e.opacity;if(n instanceof gd){t("opacity",i);return}if(bSt(e)){var o=X1(e.fill);t("fill",o.color);var a=e.fillOpacity!=null?e.fillOpacity*o.opacity*i:o.opacity*i;(r||a<1)&&t("fill-opacity",a)}else t("fill",b1);if(_St(e)){var s=X1(e.stroke);t("stroke",s.color);var l=e.strokeNoScale?n.getLineScale():1,u=l?(e.lineWidth||0)/l:0,c=e.strokeOpacity!=null?e.strokeOpacity*s.opacity*i:s.opacity*i,f=e.strokeFirst;if((r||u!==1)&&t("stroke-width",u),(r||f)&&t("paint-order",f?"stroke":"fill"),(r||c<1)&&t("stroke-opacity",c),e.lineDash){var h=FF(n),d=h[0],g=h[1];d&&(g=ySt(g||0),t("stroke-dasharray",d.join(",")),(g||r)&&t("stroke-dashoffset",g))}else r&&t("stroke-dasharray",b1);for(var y=0;y<lM.length;y++){var _=lM[y];if(r||e[_]!==Fk[_]){var v=e[_]||Fk[_];v&&t(SSt[y],v)}}}else r&&t("stroke",b1)}var $he="http://www.w3.org/2000/svg",Lhe="http://www.w3.org/1999/xlink",xSt="http://www.w3.org/2000/xmlns/",CSt="http://www.w3.org/XML/1998/namespace";function Dhe(t){return document.createElementNS($he,t)}function Zi(t,e,n,r,i){return{tag:t,attrs:n||{},children:r,text:i,key:e}}function kSt(t,e){var n=[];if(e)for(var r in e){var i=e[r],o=r;i!==!1&&(i!==!0&&i!=null&&(o+='="'+i+'"'),n.push(o))}return"<"+t+" "+n.join(" ")+">"}function TSt(t){return"</"+t+">"}function u6(t,e){e=e||{};var n=e.newline?`
`:"";function r(i){var o=i.children,a=i.tag,s=i.attrs,l=i.text;return kSt(a,s)+(a!=="style"?Ls(l):l||"")+(o?""+n+Qt(o,function(u){return r(u)}).join(n)+n:"")+TSt(a)}return r(t)}function ASt(t,e,n){n=n||{};var r=n.newline?`
`:"",i=" {"+r,o=r+"}",a=Qt(ir(t),function(l){return l+i+Qt(ir(t[l]),function(u){return u+":"+t[l][u]+";"}).join(r)+o}).join(r),s=Qt(ir(e),function(l){return"@keyframes "+l+i+Qt(ir(e[l]),function(u){return u+i+Qt(ir(e[l][u]),function(c){var f=e[l][u][c];return c==="d"&&(f='path("'+f+'")'),c+":"+f+";"}).join(r)+o}).join(r)+o}).join(r);return!a&&!s?"":["<![CDATA[",a,s,"]]>"].join(r)}function uM(t){return{zrId:t,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssClassIdx:0,cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function CY(t,e,n,r){return Zi("svg","root",{width:t,height:e,xmlns:$he,"xmlns:xlink":Lhe,version:"1.1",baseProfile:"full",viewBox:r?"0 0 "+t+" "+e:!1},n)}var kY={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},kp="transform-origin";function ESt(t,e,n){var r=ot({},t.shape);ot(r,e),t.buildPath(n,r);var i=new Ihe;return i.reset(Kee(t)),n.rebuildPath(i,1),i.generateStr(),i.getStr()}function PSt(t,e){var n=e.originX,r=e.originY;(n||r)&&(t[kp]=n+"px "+r+"px")}var OSt={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function Mhe(t,e){var n=e.zrId+"-ani-"+e.cssAnimIdx++;return e.cssAnims[n]=t,n}function ISt(t,e,n){var r=t.shape.paths,i={},o,a;if(be(r,function(l){var u=uM(n.zrId);u.animation=!0,rP(l,{},u,!0);var c=u.cssAnims,f=u.cssNodes,h=ir(c),d=h.length;if(d){a=h[d-1];var g=c[a];for(var y in g){var _=g[y];i[y]=i[y]||{d:""},i[y].d+=_.d||""}for(var v in f){var S=f[v].animation;S.indexOf(a)>=0&&(o=S)}}}),!!o){e.d=!1;var s=Mhe(i,n);return o.replace(a,s)}}function TY(t){return Pt(t)?kY[t]?"cubic-bezier("+kY[t]+")":eF(t)?t:"":""}function rP(t,e,n,r){var i=t.animators,o=i.length,a=[];if(t instanceof rne){var s=ISt(t,e,n);if(s)a.push(s);else if(!o)return}else if(!o)return;for(var l={},u=0;u<o;u++){var c=i[u],f=[c.getMaxTime()/1e3+"s"],h=TY(c.getClip().easing),d=c.getDelay();h?f.push(h):f.push("linear"),d&&f.push(d/1e3+"s"),c.getLoop()&&f.push("infinite");var g=f.join(" ");l[g]=l[g]||[g,[]],l[g][1].push(c)}function y(S){var C=S[1],k=C.length,x={},m={},T={},P="animation-timing-function";function I(ce,ue,fe){for(var ye=ce.getTracks(),j=ce.getMaxTime(),Y=0;Y<ye.length;Y++){var O=ye[Y];if(O.needsAnimate()){var F=O.keyframes,U=O.propName;if(fe&&(U=fe(U)),U)for(var Q=0;Q<F.length;Q++){var ve=F[Q],ge=Math.round(ve.time/j*100)+"%",Me=TY(ve.easing),De=ve.rawValue;(Pt(De)||Zr(De))&&(ue[ge]=ue[ge]||{},ue[ge][U]=ve.rawValue,Me&&(ue[ge][P]=Me))}}}}for(var M=0;M<k;M++){var L=C[M],R=L.targetName;R?R==="shape"&&I(L,m):!r&&I(L,x)}for(var V in x){var z={};ete(z,t),ot(z,x[V]);var ie=Xee(z),oe=x[V][P];T[V]=ie?{transform:ie}:{},PSt(T[V],z),oe&&(T[V][P]=oe)}var Se,Ae=!0;for(var V in m){T[V]=T[V]||{};var Ee=!Se,oe=m[V][P];Ee&&(Se=new sd);var _e=Se.len();Se.reset(),T[V].d=ESt(t,m[V],Se);var se=Se.len();if(!Ee&&_e!==se){Ae=!1;break}oe&&(T[V][P]=oe)}if(!Ae)for(var V in T)delete T[V].d;if(!r)for(var M=0;M<k;M++){var L=C[M],R=L.targetName;R==="style"&&I(L,T,function(ye){return OSt[ye]})}for(var ne=ir(T),J=!0,B,M=1;M<ne.length;M++){var H=ne[M-1],ae=ne[M];if(T[H][kp]!==T[ae][kp]){J=!1;break}B=T[H][kp]}if(J&&B){for(var V in T)T[V][kp]&&delete T[V][kp];e[kp]=B}if(Za(ne,function(ce){return ir(T[ce]).length>0}).length){var te=Mhe(T,n);return te+" "+S[0]+" both"}}for(var _ in l){var s=y(l[_]);s&&a.push(s)}if(a.length){var v=n.zrId+"-cls-"+n.cssClassIdx++;n.cssNodes["."+v]={animation:a.join(",")},e.class=v}}var L_=Math.round;function Nhe(t){return t&&Pt(t.src)}function Fhe(t){return t&&Qn(t.toDataURL)}function c6(t,e,n,r){wSt(function(i,o){var a=i==="fill"||i==="stroke";a&&Yee(o)?Vhe(e,t,i,r):a&&tF(o)?Bhe(n,t,i,r):t[i]=o},e,n,!1),RSt(n,t,r)}function AY(t){return Ch(t[0]-1)&&Ch(t[1])&&Ch(t[2])&&Ch(t[3]-1)}function $St(t){return Ch(t[4])&&Ch(t[5])}function f6(t,e,n){if(e&&!($St(e)&&AY(e))){var r=n?10:1e4;t.transform=AY(e)?"translate("+L_(e[4]*r)/r+" "+L_(e[5]*r)/r+")":YPe(e)}}function EY(t,e,n){for(var r=t.points,i=[],o=0;o<r.length;o++)i.push(L_(r[o][0]*n)/n),i.push(L_(r[o][1]*n)/n);e.points=i.join(" ")}function PY(t){return!t.smooth}function LSt(t){var e=Qt(t,function(n){return typeof n=="string"?[n,n]:n});return function(n,r,i){for(var o=0;o<e.length;o++){var a=e[o],s=n[a[0]];s!=null&&(r[a[1]]=L_(s*i)/i)}}}var DSt={circle:[LSt(["cx","cy","r"])],polyline:[EY,PY],polygon:[EY,PY]};function MSt(t){for(var e=t.animators,n=0;n<e.length;n++)if(e[n].targetName==="shape")return!0;return!1}function Rhe(t,e){var n=t.style,r=t.shape,i=DSt[t.type],o={},a=e.animation,s="path",l=t.style.strokePercent,u=e.compress&&Kee(t)||4;if(i&&!e.willUpdate&&!(i[1]&&!i[1](r))&&!(a&&MSt(t))&&!(l<1)){s=t.type;var c=Math.pow(10,u);i[0](r,o,c)}else{var f=!t.path||t.shapeChanged();t.path||t.createPathProxy();var h=t.path;f&&(h.beginPath(),t.buildPath(h,t.shape),t.pathUpdated());var d=h.getVersion(),g=t,y=g.__svgPathBuilder;(g.__svgPathVersion!==d||!y||l!==g.__svgPathStrokePercent)&&(y||(y=g.__svgPathBuilder=new Ihe),y.reset(u),h.rebuildPath(y,l),y.generateStr(),g.__svgPathVersion=d,g.__svgPathStrokePercent=l),o.d=y.getStr()}return f6(o,t.transform),c6(o,n,t,e),e.animation&&rP(t,o,e),Zi(s,t.id+"",o)}function NSt(t,e){var n=t.style,r=n.image;if(r&&!Pt(r)&&(Nhe(r)?r=r.src:Fhe(r)&&(r=r.toDataURL())),!!r){var i=n.x||0,o=n.y||0,a=n.width,s=n.height,l={href:r,width:a,height:s};return i&&(l.x=i),o&&(l.y=o),f6(l,t.transform),c6(l,n,t,e),e.animation&&rP(t,l,e),Zi("image",t.id+"",l)}}function FSt(t,e){var n=t.style,r=n.text;if(r!=null&&(r+=""),!(!r||isNaN(n.x)||isNaN(n.y))){var i=n.font||od,o=n.x||0,a=XPe(n.y||0,BA(i),n.textBaseline),s=KPe[n.textAlign]||n.textAlign,l={"dominant-baseline":"central","text-anchor":s};if(Ate(n)){var u="",c=n.fontStyle,f=Tte(n.fontSize);if(!parseFloat(f))return;var h=n.fontFamily||See,d=n.fontWeight;u+="font-size:"+f+";font-family:"+h+";",c&&c!=="normal"&&(u+="font-style:"+c+";"),d&&d!=="normal"&&(u+="font-weight:"+d+";"),l.style=u}else l.style="font: "+i;return r.match(/\s/)&&(l["xml:space"]="preserve"),o&&(l.x=o),a&&(l.y=a),f6(l,t.transform),c6(l,n,t,e),e.animation&&rP(t,l,e),Zi("text",t.id+"",l,void 0,r)}}function OY(t,e){if(t instanceof Lr)return Rhe(t,e);if(t instanceof gd)return NSt(t,e);if(t instanceof Rk)return FSt(t,e)}function RSt(t,e,n){var r=t.style;if(JPe(r)){var i=ZPe(t),o=n.shadowCache,a=o[i];if(!a){var s=t.getGlobalScale(),l=s[0],u=s[1];if(!l||!u)return;var c=r.shadowOffsetX||0,f=r.shadowOffsetY||0,h=r.shadowBlur,d=X1(r.shadowColor),g=d.opacity,y=d.color,_=h/2/l,v=h/2/u,S=_+" "+v;a=n.zrId+"-s"+n.shadowIdx++,n.defs[a]=Zi("filter",a,{id:a,x:"-100%",y:"-100%",width:"300%",height:"300%"},[Zi("feDropShadow","",{dx:c/l,dy:f/u,stdDeviation:S,"flood-color":y,"flood-opacity":g})]),o[i]=a}e.filter=VA(a)}}function Vhe(t,e,n,r){var i=t[n],o,a={gradientUnits:i.global?"userSpaceOnUse":"objectBoundingBox"};if(Gee(i))o="linearGradient",a.x1=i.x,a.y1=i.y,a.x2=i.x2,a.y2=i.y2;else if(qee(i))o="radialGradient",a.cx=gn(i.x,.5),a.cy=gn(i.y,.5),a.r=gn(i.r,.5);else return;for(var s=i.colorStops,l=[],u=0,c=s.length;u<c;++u){var f=sL(s[u].offset)*100+"%",h=s[u].color,d=X1(h),g=d.color,y=d.opacity,_={offset:f};_["stop-color"]=g,y<1&&(_["stop-opacity"]=y),l.push(Zi("stop",u+"",_))}var v=Zi(o,"",a,l),S=u6(v),C=r.gradientCache,k=C[S];k||(k=r.zrId+"-g"+r.gradientIdx++,C[S]=k,a.id=k,r.defs[k]=Zi(o,k,a,l)),e[n]=VA(k)}function Bhe(t,e,n,r){var i=t.style[n],o=t.getBoundingRect(),a={},s=i.repeat,l=s==="no-repeat",u=s==="repeat-x",c=s==="repeat-y",f;if(Hee(i)){var h=i.imageWidth,d=i.imageHeight,g=void 0,y=i.image;if(Pt(y)?g=y:Nhe(y)?g=y.src:Fhe(y)&&(g=y.toDataURL()),typeof Image>"u"){var _="Image width/height must been given explictly in svg-ssr renderer.";Us(h,_),Us(d,_)}else if(h==null||d==null){var v=function(M,L){if(M){var R=M.elm,V=h||L.width,z=d||L.height;M.tag==="pattern"&&(u?(z=1,V/=o.width):c&&(V=1,z/=o.height)),M.attrs.width=V,M.attrs.height=z,R&&(R.setAttribute("width",V),R.setAttribute("height",z))}},S=uF(g,null,t,function(M){l||v(m,M),v(f,M)});S&&S.width&&S.height&&(h=h||S.width,d=d||S.height)}f=Zi("image","img",{href:g,width:h,height:d}),a.width=h,a.height=d}else i.svgElement&&(f=Gn(i.svgElement),a.width=i.svgWidth,a.height=i.svgHeight);if(f){var C,k;l?C=k=1:u?(k=1,C=a.width/o.width):c?(C=1,k=a.height/o.height):a.patternUnits="userSpaceOnUse",C!=null&&!isNaN(C)&&(a.width=C),k!=null&&!isNaN(k)&&(a.height=k);var x=Xee(i);x&&(a.patternTransform=x);var m=Zi("pattern","",a,[f]),T=u6(m),P=r.patternCache,I=P[T];I||(I=r.zrId+"-p"+r.patternIdx++,P[T]=I,a.id=I,m=r.defs[I]=Zi("pattern",I,a,[f])),e[n]=VA(I)}}function VSt(t,e,n){var r=n.clipPathCache,i=n.defs,o=r[t.id];if(!o){o=n.zrId+"-c"+n.clipPathIdx++;var a={id:o};r[t.id]=o,i[o]=Zi("clipPath",o,a,[Rhe(t,n)])}e["clip-path"]=VA(o)}function IY(t){return document.createTextNode(t)}function Rp(t,e,n){t.insertBefore(e,n)}function $Y(t,e){t.removeChild(e)}function LY(t,e){t.appendChild(e)}function zhe(t){return t.parentNode}function jhe(t){return t.nextSibling}function m4(t,e){t.textContent=e}var DY=58,BSt=120,zSt=Zi("","");function cM(t){return t===void 0}function Gu(t){return t!==void 0}function jSt(t,e,n){for(var r={},i=e;i<=n;++i){var o=t[i].key;o!==void 0&&(r[o]=i)}return r}function Rb(t,e){var n=t.key===e.key,r=t.tag===e.tag;return r&&n}function D_(t){var e,n=t.children,r=t.tag;if(Gu(r)){var i=t.elm=Dhe(r);if(h6(zSt,t),mt(n))for(e=0;e<n.length;++e){var o=n[e];o!=null&&LY(i,D_(o))}else Gu(t.text)&&!Bt(t.text)&&LY(i,IY(t.text))}else t.elm=IY(t.text);return t.elm}function Uhe(t,e,n,r,i){for(;r<=i;++r){var o=n[r];o!=null&&Rp(t,D_(o),e)}}function KT(t,e,n,r){for(;n<=r;++n){var i=e[n];if(i!=null)if(Gu(i.tag)){var o=zhe(i.elm);$Y(o,i.elm)}else $Y(t,i.elm)}}function h6(t,e){var n,r=e.elm,i=t&&t.attrs||{},o=e.attrs||{};if(i!==o){for(n in o){var a=o[n],s=i[n];s!==a&&(a===!0?r.setAttribute(n,""):a===!1?r.removeAttribute(n):n.charCodeAt(0)!==BSt?r.setAttribute(n,a):n==="xmlns:xlink"||n==="xmlns"?r.setAttributeNS(xSt,n,a):n.charCodeAt(3)===DY?r.setAttributeNS(CSt,n,a):n.charCodeAt(5)===DY?r.setAttributeNS(Lhe,n,a):r.setAttribute(n,a))}for(n in i)n in o||r.removeAttribute(n)}}function USt(t,e,n){for(var r=0,i=0,o=e.length-1,a=e[0],s=e[o],l=n.length-1,u=n[0],c=n[l],f,h,d,g;r<=o&&i<=l;)a==null?a=e[++r]:s==null?s=e[--o]:u==null?u=n[++i]:c==null?c=n[--l]:Rb(a,u)?(tv(a,u),a=e[++r],u=n[++i]):Rb(s,c)?(tv(s,c),s=e[--o],c=n[--l]):Rb(a,c)?(tv(a,c),Rp(t,a.elm,jhe(s.elm)),a=e[++r],c=n[--l]):Rb(s,u)?(tv(s,u),Rp(t,s.elm,a.elm),s=e[--o],u=n[++i]):(cM(f)&&(f=jSt(e,r,o)),h=f[u.key],cM(h)?Rp(t,D_(u),a.elm):(d=e[h],d.tag!==u.tag?Rp(t,D_(u),a.elm):(tv(d,u),e[h]=void 0,Rp(t,d.elm,a.elm))),u=n[++i]);(r<=o||i<=l)&&(r>o?(g=n[l+1]==null?null:n[l+1].elm,Uhe(t,g,n,i,l)):KT(t,e,r,o))}function tv(t,e){var n=e.elm=t.elm,r=t.children,i=e.children;t!==e&&(h6(t,e),cM(e.text)?Gu(r)&&Gu(i)?r!==i&&USt(n,r,i):Gu(i)?(Gu(t.text)&&m4(n,""),Uhe(n,null,i,0,i.length-1)):Gu(r)?KT(n,r,0,r.length-1):Gu(t.text)&&m4(n,""):t.text!==e.text&&(Gu(r)&&KT(n,r,0,r.length-1),m4(n,e.text)))}function WSt(t,e){if(Rb(t,e))tv(t,e);else{var n=t.elm,r=zhe(n);D_(e),r!==null&&(Rp(r,e.elm,jhe(n)),KT(r,[t],0,0))}return e}var HSt=0,GSt=function(){function t(e,n,r){if(this.type="svg",this.refreshHover=MY(),this.configLayer=MY(),this.storage=n,this._opts=r=ot({},r),this.root=e,this._id="zr"+HSt++,this._oldVNode=CY(r.width,r.height),e&&!r.ssr){var i=this._viewport=document.createElement("div");i.style.cssText="position:relative;overflow:hidden";var o=this._svgDom=this._oldVNode.elm=Dhe("svg");h6(null,this._oldVNode),i.appendChild(o),e.appendChild(i)}this.resize(r.width,r.height)}return t.prototype.getType=function(){return this.type},t.prototype.getViewportRoot=function(){return this._viewport},t.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},t.prototype.getSvgDom=function(){return this._svgDom},t.prototype.refresh=function(){if(this.root){var e=this.renderToVNode({willUpdate:!0});e.attrs.style="position:absolute;left:0;top:0;user-select:none",WSt(this._oldVNode,e),this._oldVNode=e}},t.prototype.renderOneToVNode=function(e){return OY(e,uM(this._id))},t.prototype.renderToVNode=function(e){e=e||{};var n=this.storage.getDisplayList(!0),r=this._width,i=this._height,o=uM(this._id);o.animation=e.animation,o.willUpdate=e.willUpdate,o.compress=e.compress;var a=[],s=this._bgVNode=qSt(r,i,this._backgroundColor,o);s&&a.push(s);var l=e.compress?null:this._mainVNode=Zi("g","main",{},[]);this._paintList(n,o,l?l.children:a),l&&a.push(l);var u=Qt(ir(o.defs),function(h){return o.defs[h]});if(u.length&&a.push(Zi("defs","defs",{},u)),e.animation){var c=ASt(o.cssNodes,o.cssAnims,{newline:!0});if(c){var f=Zi("style","stl",{},[],c);a.push(f)}}return CY(r,i,a,e.useViewBox)},t.prototype.renderToString=function(e){return e=e||{},u6(this.renderToVNode({animation:gn(e.cssAnimation,!0),willUpdate:!1,compress:!0,useViewBox:gn(e.useViewBox,!0)}),{newline:!0})},t.prototype.setBackgroundColor=function(e){this._backgroundColor=e},t.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},t.prototype._paintList=function(e,n,r){for(var i=e.length,o=[],a=0,s,l,u=0,c=0;c<i;c++){var f=e[c];if(!f.invisible){var h=f.__clipPaths,d=h&&h.length||0,g=l&&l.length||0,y=void 0;for(y=Math.max(d-1,g-1);y>=0&&!(h&&l&&h[y]===l[y]);y--);for(var _=g-1;_>y;_--)a--,s=o[a-1];for(var v=y+1;v<d;v++){var S={};VSt(h[v],S,n);var C=Zi("g","clip-g-"+u++,S,[]);(s?s.children:r).push(C),o[a++]=C,s=C}l=h;var k=OY(f,n);k&&(s?s.children:r).push(k)}}},t.prototype.resize=function(e,n){var r=this._opts,i=this.root,o=this._viewport;if(e!=null&&(r.width=e),n!=null&&(r.height=n),i&&o&&(o.style.display="none",e=pv(i,0,r),n=pv(i,1,r),o.style.display=""),this._width!==e||this._height!==n){if(this._width=e,this._height=n,o){var a=o.style;a.width=e+"px",a.height=n+"px"}if(tF(this._backgroundColor))this.refresh();else{var s=this._svgDom;s&&(s.setAttribute("width",e),s.setAttribute("height",n));var l=this._bgVNode&&this._bgVNode.elm;l&&(l.setAttribute("width",e),l.setAttribute("height",n))}}},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},t.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},t.prototype.toDataURL=function(e){var n=this.renderToString(),r="data:image/svg+xml;";return e?(n=eOe(n),n&&r+"base64,"+n):r+"charset=UTF-8,"+encodeURIComponent(n)},t}();function MY(t){return function(){}}function qSt(t,e,n,r){var i;if(n&&n!=="none")if(i=Zi("rect","bg",{width:t,height:e,x:"0",y:"0",id:"0"}),Yee(n))Vhe({fill:n},i.attrs,"fill",r);else if(tF(n))Bhe({style:{fill:n},dirty:Jo,getBoundingRect:function(){return{width:t,height:e}}},i.attrs,"fill",r);else{var o=X1(n),a=o.color,s=o.opacity;i.attrs.fill=a,s<1&&(i.attrs["fill-opacity"]=s)}return i}const YSt=GSt;function KSt(t){t.registerPainter("svg",YSt)}function NY(t,e,n){var r=D0.createCanvas(),i=e.getWidth(),o=e.getHeight(),a=r.style;return a&&(a.position="absolute",a.left="0",a.top="0",a.width=i+"px",a.height=o+"px",r.setAttribute("data-zr-dom-id",t)),r.width=i*n,r.height=o*n,r}var XSt=function(t){kr(e,t);function e(n,r,i){var o=t.call(this)||this;o.motionBlur=!1,o.lastFrameAlpha=.7,o.dpr=1,o.virtual=!1,o.config={},o.incremental=!1,o.zlevel=0,o.maxRepaintRectCount=5,o.__dirty=!0,o.__firstTimePaint=!0,o.__used=!1,o.__drawIndex=0,o.__startIndex=0,o.__endIndex=0,o.__prevStartIndex=null,o.__prevEndIndex=null;var a;i=i||Dk,typeof n=="string"?a=NY(n,r,i):Bt(n)&&(a=n,n=a.id),o.id=n,o.dom=a;var s=a.style;return s&&(Eee(a),a.onselectstart=function(){return!1},s.padding="0",s.margin="0",s.borderWidth="0"),o.painter=r,o.dpr=i,o}return e.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},e.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},e.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},e.prototype.setUnpainted=function(){this.__firstTimePaint=!0},e.prototype.createBackBuffer=function(){var n=this.dpr;this.domBack=NY("back-"+this.id,this.painter,n),this.ctxBack=this.domBack.getContext("2d"),n!==1&&this.ctxBack.scale(n,n)},e.prototype.createRepaintRects=function(n,r,i,o){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var a=[],s=this.maxRepaintRectCount,l=!1,u=new Ir(0,0,0,0);function c(S){if(!(!S.isFinite()||S.isZero()))if(a.length===0){var C=new Ir(0,0,0,0);C.copy(S),a.push(C)}else{for(var k=!1,x=1/0,m=0,T=0;T<a.length;++T){var P=a[T];if(P.intersect(S)){var I=new Ir(0,0,0,0);I.copy(P),I.union(S),a[T]=I,k=!0;break}else if(l){u.copy(S),u.union(P);var M=S.width*S.height,L=P.width*P.height,R=u.width*u.height,V=R-M-L;V<x&&(x=V,m=T)}}if(l&&(a[m].union(S),k=!0),!k){var C=new Ir(0,0,0,0);C.copy(S),a.push(C)}l||(l=a.length>=s)}}for(var f=this.__startIndex;f<this.__endIndex;++f){var h=n[f];if(h){var d=h.shouldBePainted(i,o,!0,!0),g=h.__isRendered&&(h.__dirty&Ms||!d)?h.getPrevPaintRect():null;g&&c(g);var y=d&&(h.__dirty&Ms||!h.__isRendered)?h.getPaintRect():null;y&&c(y)}}for(var f=this.__prevStartIndex;f<this.__prevEndIndex;++f){var h=r[f],d=h.shouldBePainted(i,o,!0,!0);if(h&&(!d||!h.__zr)&&h.__isRendered){var g=h.getPrevPaintRect();g&&c(g)}}var _;do{_=!1;for(var f=0;f<a.length;){if(a[f].isZero()){a.splice(f,1);continue}for(var v=f+1;v<a.length;)a[f].intersect(a[v])?(_=!0,a[f].union(a[v]),a.splice(v,1)):v++;f++}}while(_);return this._paintRects=a,a},e.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},e.prototype.resize=function(n,r){var i=this.dpr,o=this.dom,a=o.style,s=this.domBack;a&&(a.width=n+"px",a.height=r+"px"),o.width=n*i,o.height=r*i,s&&(s.width=n*i,s.height=r*i,i!==1&&this.ctxBack.scale(i,i))},e.prototype.clear=function(n,r,i){var o=this.dom,a=this.ctx,s=o.width,l=o.height;r=r||this.clearColor;var u=this.motionBlur&&!n,c=this.lastFrameAlpha,f=this.dpr,h=this;u&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(o,0,0,s/f,l/f));var d=this.domBack;function g(y,_,v,S){if(a.clearRect(y,_,v,S),r&&r!=="transparent"){var C=void 0;if(FA(r)){var k=r.global||r.__width===v&&r.__height===S;C=k&&r.__canvasGradient||VL(a,r,{x:0,y:0,width:v,height:S}),r.__canvasGradient=C,r.__width=v,r.__height=S}else GEe(r)&&(r.scaleX=r.scaleX||f,r.scaleY=r.scaleY||f,C=BL(a,r,{dirty:function(){h.setUnpainted(),h.__painter.refresh()}}));a.save(),a.fillStyle=C||r,a.fillRect(y,_,v,S),a.restore()}u&&(a.save(),a.globalAlpha=c,a.drawImage(d,y,_,v,S),a.restore())}!i||u?g(0,0,s,l):i.length&&be(i,function(y){g(y.x*f,y.y*f,y.width*f,y.height*f)})},e}(xc);const v4=XSt;var FY=1e5,_p=314159,GC=.01,JSt=.001;function ZSt(t){return t?t.__builtin__?!0:!(typeof t.resize!="function"||typeof t.refresh!="function"):!1}function QSt(t,e){var n=document.createElement("div");return n.style.cssText=["position:relative","width:"+t+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",n}var ewt=function(){function t(e,n,r,i){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var o=!e.nodeName||e.nodeName.toUpperCase()==="CANVAS";this._opts=r=ot({},r||{}),this.dpr=r.devicePixelRatio||Dk,this._singleCanvas=o,this.root=e;var a=e.style;a&&(Eee(e),e.innerHTML=""),this.storage=n;var s=this._zlevelList;this._prevDisplayList=[];var l=this._layers;if(o){var c=e,f=c.width,h=c.height;r.width!=null&&(f=r.width),r.height!=null&&(h=r.height),this.dpr=r.devicePixelRatio||1,c.width=f*this.dpr,c.height=h*this.dpr,this._width=f,this._height=h;var d=new v4(c,this,this.dpr);d.__builtin__=!0,d.initContext(),l[_p]=d,d.zlevel=_p,s.push(_p),this._domRoot=e}else{this._width=pv(e,0,r),this._height=pv(e,1,r);var u=this._domRoot=QSt(this._width,this._height);e.appendChild(u)}}return t.prototype.getType=function(){return"canvas"},t.prototype.isSingleCanvas=function(){return this._singleCanvas},t.prototype.getViewportRoot=function(){return this._domRoot},t.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},t.prototype.refresh=function(e){var n=this.storage.getDisplayList(!0),r=this._prevDisplayList,i=this._zlevelList;this._redrawId=Math.random(),this._paintList(n,r,e,this._redrawId);for(var o=0;o<i.length;o++){var a=i[o],s=this._layers[a];if(!s.__builtin__&&s.refresh){var l=o===0?this._backgroundColor:null;s.refresh(l)}}return this._opts.useDirtyRect&&(this._prevDisplayList=n.slice()),this},t.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},t.prototype._paintHoverList=function(e){var n=e.length,r=this._hoverlayer;if(r&&r.clear(),!!n){for(var i={inHover:!0,viewWidth:this._width,viewHeight:this._height},o,a=0;a<n;a++){var s=e[a];s.__inHover&&(r||(r=this._hoverlayer=this.getLayer(FY)),o||(o=r.ctx,o.save()),Kp(o,s,i,a===n-1))}o&&o.restore()}},t.prototype.getHoverLayer=function(){return this.getLayer(FY)},t.prototype.paintOne=function(e,n){ore(e,n)},t.prototype._paintList=function(e,n,r,i){if(this._redrawId===i){r=r||!1,this._updateLayerStatus(e);var o=this._doPaintList(e,n,r),a=o.finished,s=o.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),s&&this._paintHoverList(e),a)this.eachLayer(function(u){u.afterBrush&&u.afterBrush()});else{var l=this;rL(function(){l._paintList(e,n,r,i)})}}},t.prototype._compositeManually=function(){var e=this.getLayer(_p).ctx,n=this._domRoot.width,r=this._domRoot.height;e.clearRect(0,0,n,r),this.eachBuiltinLayer(function(i){i.virtual&&e.drawImage(i.dom,0,0,n,r)})},t.prototype._doPaintList=function(e,n,r){for(var i=this,o=[],a=this._opts.useDirtyRect,s=0;s<this._zlevelList.length;s++){var l=this._zlevelList[s],u=this._layers[l];u.__builtin__&&u!==this._hoverlayer&&(u.__dirty||r)&&o.push(u)}for(var c=!0,f=!1,h=function(y){var _=o[y],v=_.ctx,S=a&&_.createRepaintRects(e,n,d._width,d._height),C=r?_.__startIndex:_.__drawIndex,k=!r&&_.incremental&&Date.now,x=k&&Date.now(),m=_.zlevel===d._zlevelList[0]?d._backgroundColor:null;if(_.__startIndex===_.__endIndex)_.clear(!1,m,S);else if(C===_.__startIndex){var T=e[C];(!T.incremental||!T.notClear||r)&&_.clear(!1,m,S)}C===-1&&(console.error("For some unknown reason. drawIndex is -1"),C=_.__startIndex);var P,I=function(V){var z={inHover:!1,allClipped:!1,prevEl:null,viewWidth:i._width,viewHeight:i._height};for(P=C;P<_.__endIndex;P++){var ie=e[P];if(ie.__inHover&&(f=!0),i._doPaintEl(ie,_,a,V,z,P===_.__endIndex-1),k){var oe=Date.now()-x;if(oe>15)break}}z.prevElClipPaths&&v.restore()};if(S)if(S.length===0)P=_.__endIndex;else for(var M=d.dpr,L=0;L<S.length;++L){var R=S[L];v.save(),v.beginPath(),v.rect(R.x*M,R.y*M,R.width*M,R.height*M),v.clip(),I(R),v.restore()}else v.save(),I(),v.restore();_.__drawIndex=P,_.__drawIndex<_.__endIndex&&(c=!1)},d=this,g=0;g<o.length;g++)h(g);return En.wxa&&be(this._layers,function(y){y&&y.ctx&&y.ctx.draw&&y.ctx.draw()}),{finished:c,needsRefreshHover:f}},t.prototype._doPaintEl=function(e,n,r,i,o,a){var s=n.ctx;if(r){var l=e.getPaintRect();(!i||l&&l.intersect(i))&&(Kp(s,e,o,a),e.setPrevPaintRect(l))}else Kp(s,e,o,a)},t.prototype.getLayer=function(e,n){this._singleCanvas&&!this._needsManuallyCompositing&&(e=_p);var r=this._layers[e];return r||(r=new v4("zr_"+e,this,this.dpr),r.zlevel=e,r.__builtin__=!0,this._layerConfig[e]?hi(r,this._layerConfig[e],!0):this._layerConfig[e-GC]&&hi(r,this._layerConfig[e-GC],!0),n&&(r.virtual=n),this.insertLayer(e,r),r.initContext()),r},t.prototype.insertLayer=function(e,n){var r=this._layers,i=this._zlevelList,o=i.length,a=this._domRoot,s=null,l=-1;if(!r[e]&&ZSt(n)){if(o>0&&e>i[0]){for(l=0;l<o-1&&!(i[l]<e&&i[l+1]>e);l++);s=r[i[l]]}if(i.splice(l+1,0,e),r[e]=n,!n.virtual)if(s){var u=s.dom;u.nextSibling?a.insertBefore(n.dom,u.nextSibling):a.appendChild(n.dom)}else a.firstChild?a.insertBefore(n.dom,a.firstChild):a.appendChild(n.dom);n.__painter=this}},t.prototype.eachLayer=function(e,n){for(var r=this._zlevelList,i=0;i<r.length;i++){var o=r[i];e.call(n,this._layers[o],o)}},t.prototype.eachBuiltinLayer=function(e,n){for(var r=this._zlevelList,i=0;i<r.length;i++){var o=r[i],a=this._layers[o];a.__builtin__&&e.call(n,a,o)}},t.prototype.eachOtherLayer=function(e,n){for(var r=this._zlevelList,i=0;i<r.length;i++){var o=r[i],a=this._layers[o];a.__builtin__||e.call(n,a,o)}},t.prototype.getLayers=function(){return this._layers},t.prototype._updateLayerStatus=function(e){this.eachBuiltinLayer(function(f,h){f.__dirty=f.__used=!1});function n(f){o&&(o.__endIndex!==f&&(o.__dirty=!0),o.__endIndex=f)}if(this._singleCanvas)for(var r=1;r<e.length;r++){var i=e[r];if(i.zlevel!==e[r-1].zlevel||i.incremental){this._needsManuallyCompositing=!0;break}}var o=null,a=0,s,l;for(l=0;l<e.length;l++){var i=e[l],u=i.zlevel,c=void 0;s!==u&&(s=u,a=0),i.incremental?(c=this.getLayer(u+JSt,this._needsManuallyCompositing),c.incremental=!0,a=1):c=this.getLayer(u+(a>0?GC:0),this._needsManuallyCompositing),c.__builtin__||KN("ZLevel "+u+" has been used by unkown layer "+c.id),c!==o&&(c.__used=!0,c.__startIndex!==l&&(c.__dirty=!0),c.__startIndex=l,c.incremental?c.__drawIndex=-1:c.__drawIndex=l,n(l),o=c),i.__dirty&Ms&&!i.__inHover&&(c.__dirty=!0,c.incremental&&c.__drawIndex<0&&(c.__drawIndex=l))}n(l),this.eachBuiltinLayer(function(f,h){!f.__used&&f.getElementCount()>0&&(f.__dirty=!0,f.__startIndex=f.__endIndex=f.__drawIndex=0),f.__dirty&&f.__drawIndex<0&&(f.__drawIndex=f.__startIndex)})},t.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},t.prototype._clearLayer=function(e){e.clear()},t.prototype.setBackgroundColor=function(e){this._backgroundColor=e,be(this._layers,function(n){n.setUnpainted()})},t.prototype.configLayer=function(e,n){if(n){var r=this._layerConfig;r[e]?hi(r[e],n,!0):r[e]=n;for(var i=0;i<this._zlevelList.length;i++){var o=this._zlevelList[i];if(o===e||o===e+GC){var a=this._layers[o];hi(a,r[e],!0)}}}},t.prototype.delLayer=function(e){var n=this._layers,r=this._zlevelList,i=n[e];i&&(i.dom.parentNode.removeChild(i.dom),delete n[e],r.splice(wr(r,e),1))},t.prototype.resize=function(e,n){if(this._domRoot.style){var r=this._domRoot;r.style.display="none";var i=this._opts,o=this.root;if(e!=null&&(i.width=e),n!=null&&(i.height=n),e=pv(o,0,i),n=pv(o,1,i),r.style.display="",this._width!==e||n!==this._height){r.style.width=e+"px",r.style.height=n+"px";for(var a in this._layers)this._layers.hasOwnProperty(a)&&this._layers[a].resize(e,n);this.refresh(!0)}this._width=e,this._height=n}else{if(e==null||n==null)return;this._width=e,this._height=n,this.getLayer(_p).resize(e,n)}return this},t.prototype.clearLayer=function(e){var n=this._layers[e];n&&n.clear()},t.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},t.prototype.getRenderedCanvas=function(e){if(e=e||{},this._singleCanvas&&!this._compositeManually)return this._layers[_p].dom;var n=new v4("image",this,e.pixelRatio||this.dpr);n.initContext(),n.clear(!1,e.backgroundColor||this._backgroundColor);var r=n.ctx;if(e.pixelRatio<=this.dpr){this.refresh();var i=n.dom.width,o=n.dom.height;this.eachLayer(function(f){f.__builtin__?r.drawImage(f.dom,0,0,i,o):f.renderToCanvas&&(r.save(),f.renderToCanvas(r),r.restore())})}else for(var a={inHover:!1,viewWidth:this._width,viewHeight:this._height},s=this.storage.getDisplayList(!0),l=0,u=s.length;l<u;l++){var c=s[l];Kp(r,c,a,l===u-1)}return n.dom},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t}();const twt=ewt;function Whe(t){t.registerPainter("canvas",twt)}Tf([s6,a6,l6,Dbt,KSt]);function nwt(t){return+(Math.round(+(String(t)+"e+6"))+"e-6")}const d6=L0("indicator",{state:()=>({indicatorValue:"<keine Daten>",indicatorType:"pcf-sunburst",sunburstOption:{title:{text:"Beiträge",left:"center"},tooltip:{trigger:"item",formatter:t=>{const e=nwt(t.data.value);return t.name==="Beiträge"?"zurück":`${t.data.name} : ${e} kgCO2eq`}},legend:{orient:"vertical",left:"left",data:[]},series:[{name:"Beiträge",center:["50%","50%"],type:"sunburst",emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},data:[{name:"Scope 1",children:[]},{name:"Scope 2",children:[]},{name:"Scope 3",children:[]}],radius:[60,"80%"]}]},pieOption:{title:{text:"Beiträge",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:[]},series:[{name:"Beiträge",type:"pie",radius:"55%",center:["50%","60%"],data:[],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},sankeyOption:{series:{type:"sankey",layout:"none",nodeAlign:"right",label:{normal:{formatter:"{b}"}},emphasis:{focus:"adjacency"},data:[{name:"a"},{name:"b"}],links:[{source:"a",target:"b",value:1}]}}}),actions:{roundToTwo(t){return+(Math.round(+(String(t)+"e+2"))+"e-2")},processContributions(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n];if(!e.find(i=>i.name==r.name))e.push(r);else{const i=e.find(o=>o.name==r.name);i.value+=r.value}}return e},removeDuplicates(t){return t.filter((n,r,i)=>r===i.findIndex(o=>o.name===n.name))},updateIndicator(){const t=Vt().findPlace(Af().place.id);if(t){const e=t.marking[0];this.indicatorType==="pcf-pie"?e&&e.footprintContributions?(this.indicatorValue=this.roundToTwo(e.ghgFactor*e.amount)+" kg CO2e",this.pieOption.series[0].data=this.processContributions(e.footprintContributions)):(this.pieOption.series[0].data=[],this.indicatorValue="<keine Daten>"):this.indicatorType==="pcf-sunburst"?e&&e.footprintContributions?(this.indicatorValue=this.roundToTwo(e.ghgFactor*e.amount)+" kg CO2e",this.sunburstOption.series[0].data[0].children=this.processContributions(e.footprintContributions[1]),this.sunburstOption.series[0].data[1].children=this.processContributions(e.footprintContributions[2]),this.sunburstOption.series[0].data[2].children=this.processContributions(e.footprintContributions[3])):(this.pieOption.series[0].data=[],this.indicatorValue="<keine Daten>"):this.indicatorType==="pcf-sankey"?e&&e.footprintContributions?(this.indicatorValue=this.roundToTwo(e.ghgFactor*e.amount)+" kg CO2e",this.sankeyOption.series.data=this.removeDuplicates(e.sankeyNodes),this.sankeyOption.series.links=e.sankeyLinks):(this.sankeyOption.series.data=[],this.sankeyOption.series.links=[],this.indicatorValue="<keine Daten>"):this.indicatorType==="pds"&&(e?this.indicatorValue=Math.round(e.pds*100)+"% Primärdaten":this.indicatorValue="<keine Daten>")}}}});Tf([W1t,Whe]);const rwt=zt({name:"Contributions",computed:{...Yt(d6)},setup(){return{option:Tl()}}});function iwt(t,e,n,r,i,o){const a=$t("v-chart");return Oe(),tn(a,{class:"chart",option:t.indicatorStore.sankeyOption,autoresize:""},null,8,["option"])}const owt=ai(rwt,[["render",iwt],["__scopeId","data-v-26f05990"]]);Tf([s6,a6,l6,vhe]);Tf([Whe,vhe,s6,a6,l6]);const awt=Mre,swt=zt({name:"Contributions",provide:{[awt]:"light"},computed:{...Yt(d6)}});function lwt(t,e,n,r,i,o){const a=$t("v-chart");return Oe(),tn(a,{class:"chart",option:t.indicatorStore.sunburstOption,autoresize:""},null,8,["option"])}const uwt=ai(swt,[["render",lwt],["__scopeId","data-v-baf222d3"]]),cwt=zt({components:{SankeyChart:owt,SunburstChart:uwt},computed:{...Yt(d6)},mounted(){this.indicatorStore.updateIndicator()}}),fwt={class:"block"},hwt={class:"field"},dwt=X("label",{class:"label is-small"},"Visualisierung:",-1),pwt={class:"select mb-5 is-small"},gwt=X("option",{value:"pcf-sankey"},"THG-Fußabdruck (Sankey)",-1),mwt=X("option",{value:"pcf-sunburst"},"THG-Fußabdruck (Sunburst)",-1),vwt=X("option",{value:"pds"},"Primärdatenanteil",-1),ywt=[gwt,mwt,vwt],bwt={class:"block"},_wt={class:"has-text-weight-bold"},Swt={class:"block"};function wwt(t,e,n,r,i,o){const a=$t("SankeyChart"),s=$t("SunburstChart");return Oe(),We(bn,null,[X("div",fwt,[X("div",hwt,[dwt,X("div",pwt,[gc(X("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>t.indicatorStore.indicatorType=l),onChange:e[1]||(e[1]=l=>t.indicatorStore.updateIndicator())},ywt,544),[[P0,t.indicatorStore.indicatorType]])])])]),X("div",bwt,[X("p",_wt,"Gesamtwert: "+en(t.indicatorStore.indicatorValue),1)]),X("div",Swt,[t.indicatorStore.indicatorType=="pcf-sankey"?(Oe(),tn(a,{key:0})):ut("",!0),t.indicatorStore.indicatorType=="pcf-sunburst"?(Oe(),tn(s,{key:1})):ut("",!0)])],64)}const xwt=ai(cwt,[["render",wwt]]),Cwt=zt({components:{PlaceTypeSelector:pKe,Codemirror:Wg,DataEditor:Nue,HelpButton:tm,DataTab:bbt,VisualisationTab:xwt},setup(t){return{extensions:[xA({class:"CodeMirror-lint-markers"}),PN(),Ug,UN(),$N(),ree(),SN(),pee(),bt.lineWrapping,An.tabSize.of(2),EN(Mue),Due(gKe)]}},data(){return{shownTab:"data",showNameInput:!1}},computed:{...Yt(Aa),...Yt(Af),...Yt(zs),...Yt(Zn)},created(){this.placesStore.loadPlace(this.uiStateStore.lastSelectedID)},watch:{"placesStore.schemaString"(t){this.placesStore.savePlaceSchema(t)}},methods:{close(){this.uiStateStore.showModal="none"},onCancelNameEdit(){this.placesStore.resetName(),this.showNameInput=!1},onNameSave(){this.placesStore.saveName(),this.showNameInput=!1},showTab(t){this.shownTab=t}}});const iP=t=>(Rg("data-v-08e35e99"),t=t(),Vg(),t),kwt={class:"modal is-active"},Twt=iP(()=>X("div",{class:"modal-background"},null,-1)),Awt={class:"modal-card-head scoped-modal-header"},Ewt=iP(()=>X("span",{class:"has-text-weight-bold"},"Place:",-1)),Pwt={class:"ml-1"},Owt={class:"scoped-edit-button icon has-text-grey-light"},Iwt={key:1,class:"level"},$wt={class:"icon is-small has-text-grey"},Lwt={class:"icon is-small"},Dwt=iP(()=>X("p",{class:"modal-card-title"},null,-1)),Mwt={class:"tabs is-left is-small has-background-light mb-0"},Nwt={class:"modal-card-body"},Fwt={key:3,class:"block"},Rwt={class:"field"},Vwt={class:"label is-small icon-text"},Bwt={class:"control is-small jsn-code"},zwt={key:0,class:"help"},jwt={key:1,class:"help is-danger"},Uwt=iP(()=>X("footer",{class:"modal-card-foot"},null,-1));function Wwt(t,e,n,r,i,o){const a=$t("font-awesome-icon"),s=$t("PlaceTypeSelector"),l=$t("DataTab"),u=$t("VisualisationTab"),c=$t("HelpButton"),f=$t("Codemirror");return Oe(),We("div",kwt,[Twt,X("div",{class:Wt(["modal-card",{"jsn-modal-wide":t.shownTab==="visualisation","jsn-modal-medium":t.shownTab!=="visualisation"}])},[X("header",Awt,[Ewt,X("span",Pwt,[t.showNameInput?ut("",!0):(Oe(),We("span",{key:0,class:"is-ghost icon-text has-text-weight-bold scoped-modal-title is-clickable",onClick:e[0]||(e[0]=h=>t.showNameInput=!0)},[X("span",null,en(t.placesStore.place.name),1),X("span",Owt,[lt(a,{icon:"fas fa-pen"})])])),t.showNameInput?(Oe(),We("span",Iwt,[gc(X("input",{style:{width:"100px"},class:"input is-small level-item","onUpdate:modelValue":e[1]||(e[1]=h=>t.placesStore.place.name=h)},null,512),[[Zh,t.placesStore.place.name]]),X("button",{class:"ml-1 button is-small level-item",onClick:e[2]||(e[2]=(...h)=>t.onCancelNameEdit&&t.onCancelNameEdit(...h))},[X("span",$wt,[lt(a,{icon:"fas fa-xmark"})])]),X("button",{onClick:e[3]||(e[3]=(...h)=>t.onNameSave&&t.onNameSave(...h)),class:"ml-1 button is-small level-item is-primary"},[X("span",Lwt,[lt(a,{icon:"fas fa-check"})])])])):ut("",!0)]),Dwt,X("button",{class:"delete","aria-label":"close",onClick:e[4]||(e[4]=(...h)=>t.close&&t.close(...h))})]),X("div",Mwt,[X("ul",null,[X("li",{class:Wt({"is-active":t.shownTab==="data"})},[X("a",{onClick:e[5]||(e[5]=()=>{t.showTab("data")})},"Data")],2),t.uiStateStore.uiAssistMode==="expert"?(Oe(),We("li",{key:0,class:Wt({"is-active":t.shownTab==="schema"})},[X("a",{onClick:e[6]||(e[6]=()=>{t.showTab("schema")})},"Schema")],2)):ut("",!0),t.configStore.visualisationConfig?(Oe(),We("li",{key:1,class:Wt({"is-active":t.shownTab==="visualisation"})},[X("a",{onClick:e[7]||(e[7]=()=>{t.showTab("visualisation")})},"Visualisation")],2)):ut("",!0)])]),X("section",Nwt,[t.shownTab!=="visualisation"?(Oe(),tn(s,{key:0})):ut("",!0),t.shownTab==="data"?(Oe(),tn(l,{key:1})):ut("",!0),t.shownTab==="visualisation"?(Oe(),tn(u,{key:2})):ut("",!0),t.shownTab==="schema"?(Oe(),We("div",Fwt,[X("div",Rwt,[X("label",Vwt,[Bi("Token schema "),lt(c,{"help-text":`
                          Describe the structure of data tokens stored in the place with 
                          <a href='https://json-schema.org/' target='_blank'>JSON Schema</a>.
                        `})]),X("div",Bwt,[lt(f,{modelValue:t.placesStore.schemaString,"onUpdate:modelValue":e[8]||(e[8]=h=>t.placesStore.schemaString=h),placeholder:"Edit place schema.",autofocus:!0,"indent-with-tab":!0,"tab-size":2,style:{height:"400px"},extensions:t.extensions,disabled:t.netStore.placeTypes[t.placesStore.place.id]!=="custom"},null,8,["modelValue","extensions","disabled"])]),t.placesStore.place.hasError?ut("",!0):(Oe(),We("p",zwt,en(t.placesStore.place.errorMessage),1)),t.placesStore.place.hasError&&t.placesStore.place.errorType==="schema"?(Oe(),We("p",jwt,en(t.placesStore.place.errorMessage),1)):ut("",!0)])])):ut("",!0)]),Uwt],2)])}const Hwt=ai(Cwt,[["render",Wwt],["__scopeId","data-v-08e35e99"]]);var Hhe={exports:{}};const Gwt=Bre(rwe);(function(t,e){(function(n,r){t.exports=r(Gwt)})(ui,function(n){return function(){var r={789:function(s){s.exports=n}},i={};function o(s){var l=i[s];if(l!==void 0)return l.exports;var u=i[s]={exports:{}};return r[s](u,u.exports,o),u.exports}o.d=function(s,l){for(var u in l)o.o(l,u)&&!o.o(s,u)&&Object.defineProperty(s,u,{enumerable:!0,get:l[u]})},o.o=function(s,l){return Object.prototype.hasOwnProperty.call(s,l)},o.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})};var a={};return function(){function s(L,R){(R==null||R>L.length)&&(R=L.length);for(var V=0,z=new Array(R);V<R;V++)z[V]=L[V];return z}function l(L,R){if(L){if(typeof L=="string")return s(L,R);var V=Object.prototype.toString.call(L).slice(8,-1);return V==="Object"&&L.constructor&&(V=L.constructor.name),V==="Map"||V==="Set"?Array.from(L):V==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(V)?s(L,R):void 0}}function u(L){return function(R){if(Array.isArray(R))return s(R)}(L)||function(R){if(typeof Symbol<"u"&&R[Symbol.iterator]!=null||R["@@iterator"]!=null)return Array.from(R)}(L)||l(L)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function c(L,R,V){return R in L?Object.defineProperty(L,R,{value:V,enumerable:!0,configurable:!0,writable:!0}):L[R]=V,L}o.r(a),o.d(a,{default:function(){return M}});var f=o(789),h=(0,f.defineComponent)({props:{data:{required:!0,type:String},onClick:Function},render:function(){var L=this.data,R=this.onClick;return(0,f.createVNode)("span",{class:"vjs-tree-brackets",onClick:R},[L])}}),d=(0,f.defineComponent)({emits:["change","update:modelValue"],props:{checked:{type:Boolean,default:!1},isMultiple:Boolean,onChange:Function},setup:function(L,R){var V=R.emit;return{uiType:(0,f.computed)(function(){return L.isMultiple?"checkbox":"radio"}),model:(0,f.computed)({get:function(){return L.checked},set:function(z){return V("update:modelValue",z)}})}},render:function(){var L=this.uiType,R=this.model,V=this.$emit;return(0,f.createVNode)("label",{class:["vjs-check-controller",R?"is-checked":""],onClick:function(z){return z.stopPropagation()}},[(0,f.createVNode)("span",{class:"vjs-check-controller-inner is-".concat(L)},null),(0,f.createVNode)("input",{checked:R,class:"vjs-check-controller-original is-".concat(L),type:L,onChange:function(){return V("change",R)}},null)])}}),g=(0,f.defineComponent)({props:{nodeType:{required:!0,type:String},onClick:Function},render:function(){var L=this.nodeType,R=this.onClick,V=L==="objectStart"||L==="arrayStart";return V||L==="objectCollapsed"||L==="arrayCollapsed"?(0,f.createVNode)("span",{class:"vjs-carets vjs-carets-".concat(V?"open":"close"),onClick:R},[(0,f.createVNode)("svg",{viewBox:"0 0 1024 1024",focusable:"false","data-icon":"caret-down",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},[(0,f.createVNode)("path",{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"},null)])]):null}});function y(L){return y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},y(L)}function _(L){return Object.prototype.toString.call(L).slice(8,-1).toLowerCase()}function v(L){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"root",V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,z=arguments.length>3?arguments[3]:void 0,ie=z||{},oe=ie.key,Se=ie.index,Ae=ie.type,Ee=Ae===void 0?"content":Ae,_e=ie.showComma,se=_e!==void 0&&_e,ne=ie.length,J=ne===void 0?1:ne,B=_(L);if(B==="array"){var H=S(L.map(function(ce,ue,fe){return v(ce,"".concat(R,"[").concat(ue,"]"),V+1,{index:ue,showComma:ue!==fe.length-1,length:J,type:Ee})}));return[v("[",R,V,{showComma:!1,key:oe,length:L.length,type:"arrayStart"})[0]].concat(H,v("]",R,V,{showComma:se,length:L.length,type:"arrayEnd"})[0])}if(B==="object"){var ae=Object.keys(L),te=S(ae.map(function(ce,ue,fe){return v(L[ce],/^[a-zA-Z_]\w*$/.test(ce)?"".concat(R,".").concat(ce):"".concat(R,'["').concat(ce,'"]'),V+1,{key:ce,showComma:ue!==fe.length-1,length:J,type:Ee})}));return[v("{",R,V,{showComma:!1,key:oe,index:Se,length:ae.length,type:"objectStart"})[0]].concat(te,v("}",R,V,{showComma:se,length:ae.length,type:"objectEnd"})[0])}return[{content:L,level:V,key:oe,index:Se,path:R,showComma:se,length:J,type:Ee}]}function S(L){if(typeof Array.prototype.flat=="function")return L.flat();for(var R=u(L),V=[];R.length;){var z=R.shift();Array.isArray(z)?R.unshift.apply(R,u(z)):V.push(z)}return V}function C(L){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new WeakMap;if(L==null)return L;if(L instanceof Date)return new Date(L);if(L instanceof RegExp)return new RegExp(L);if(y(L)!=="object")return L;if(R.get(L))return R.get(L);if(Array.isArray(L)){var V=L.map(function(oe){return C(oe,R)});return R.set(L,V),V}var z={};for(var ie in L)z[ie]=C(L[ie],R);return R.set(L,z),z}function k(L,R){var V=Object.keys(L);if(Object.getOwnPropertySymbols){var z=Object.getOwnPropertySymbols(L);R&&(z=z.filter(function(ie){return Object.getOwnPropertyDescriptor(L,ie).enumerable})),V.push.apply(V,z)}return V}function x(L){for(var R=1;R<arguments.length;R++){var V=arguments[R]!=null?arguments[R]:{};R%2?k(Object(V),!0).forEach(function(z){c(L,z,V[z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(V)):k(Object(V)).forEach(function(z){Object.defineProperty(L,z,Object.getOwnPropertyDescriptor(V,z))})}return L}var m={showLength:{type:Boolean,default:!1},showDoubleQuotes:{type:Boolean,default:!0},renderNodeKey:Function,renderNodeValue:Function,selectableType:String,showSelectController:{type:Boolean,default:!1},showLine:{type:Boolean,default:!0},showLineNumber:{type:Boolean,default:!1},selectOnClickNode:{type:Boolean,default:!0},nodeSelectable:{type:Function,default:function(){return!0}},highlightSelectedNode:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!1},showKeyValueSpace:{type:Boolean,default:!0},editable:{type:Boolean,default:!1},editableTrigger:{type:String,default:"click"},onNodeClick:{type:Function},onBracketsClick:{type:Function},onIconClick:{type:Function},onValueChange:{type:Function}},T=(0,f.defineComponent)({name:"TreeNode",props:x(x({},m),{},{node:{type:Object,required:!0},collapsed:Boolean,checked:Boolean,style:Object,onSelectedChange:{type:Function}}),emits:["nodeClick","bracketsClick","iconClick","selectedChange","valueChange"],setup:function(L,R){var V=R.emit,z=(0,f.computed)(function(){return _(L.node.content)}),ie=(0,f.computed)(function(){return"vjs-value vjs-value-".concat(z.value)}),oe=(0,f.computed)(function(){return L.showDoubleQuotes?'"'.concat(L.node.key,'"'):L.node.key}),Se=(0,f.computed)(function(){return L.selectableType==="multiple"}),Ae=(0,f.computed)(function(){return L.selectableType==="single"}),Ee=(0,f.computed)(function(){return L.nodeSelectable(L.node)&&(Se.value||Ae.value)}),_e=(0,f.reactive)({editing:!1}),se=function(ue){var fe,ye,j=(ye=(fe=ue.target)===null||fe===void 0?void 0:fe.value)==="null"?null:ye==="undefined"?void 0:ye==="true"||ye!=="false"&&(ye[0]+ye[ye.length-1]==='""'||ye[0]+ye[ye.length-1]==="''"?ye.slice(1,-1):typeof Number(ye)=="number"&&!isNaN(Number(ye))||ye==="NaN"?Number(ye):ye);V("valueChange",j,L.node.path)},ne=(0,f.computed)(function(){var ue,fe=(ue=L.node)===null||ue===void 0?void 0:ue.content;return fe===null?fe="null":fe===void 0&&(fe="undefined"),z.value==="string"?'"'.concat(fe,'"'):fe+""}),J=function(){var ue=L.renderNodeValue;return ue?ue({node:L.node,defaultValue:ne.value}):ne.value},B=function(){V("bracketsClick",!L.collapsed,L.node.path)},H=function(){V("iconClick",!L.collapsed,L.node.path)},ae=function(){V("selectedChange",L.node)},te=function(){V("nodeClick",L.node),Ee.value&&L.selectOnClickNode&&V("selectedChange",L.node)},ce=function(ue){if(L.editable&&!_e.editing){_e.editing=!0;var fe=function ye(j){var Y;j.target!==ue.target&&((Y=j.target)===null||Y===void 0?void 0:Y.parentElement)!==ue.target&&(_e.editing=!1,document.removeEventListener("click",ye))};document.removeEventListener("click",fe),document.addEventListener("click",fe)}};return function(){var ue,fe=L.node;return(0,f.createVNode)("div",{class:{"vjs-tree-node":!0,"has-selector":L.showSelectController,"has-carets":L.showIcon,"is-highlight":L.highlightSelectedNode&&L.checked},onClick:te,style:L.style},[L.showLineNumber&&(0,f.createVNode)("span",{class:"vjs-node-index"},[fe.id+1]),L.showSelectController&&Ee.value&&fe.type!=="objectEnd"&&fe.type!=="arrayEnd"&&(0,f.createVNode)(d,{isMultiple:Se.value,checked:L.checked,onChange:ae},null),(0,f.createVNode)("div",{class:"vjs-indent"},[Array.from(Array(fe.level)).map(function(ye,j){return(0,f.createVNode)("div",{key:j,class:{"vjs-indent-unit":!0,"has-line":L.showLine}},null)}),L.showIcon&&(0,f.createVNode)(g,{nodeType:fe.type,onClick:H},null)]),fe.key&&(0,f.createVNode)("span",{class:"vjs-key"},[(ue=L.renderNodeKey,ue?ue({node:L.node,defaultKey:oe.value||""}):oe.value),(0,f.createVNode)("span",{class:"vjs-colon"},[":".concat(L.showKeyValueSpace?" ":"")])]),(0,f.createVNode)("span",null,[fe.type!=="content"&&fe.content?(0,f.createVNode)(h,{data:fe.content.toString(),onClick:B},null):(0,f.createVNode)("span",{class:ie.value,onClick:!L.editable||L.editableTrigger&&L.editableTrigger!=="click"?void 0:ce,onDblclick:L.editable&&L.editableTrigger==="dblclick"?ce:void 0},[L.editable&&_e.editing?(0,f.createVNode)("input",{value:ne.value,onChange:se,style:{padding:"3px 8px",border:"1px solid #eee",boxShadow:"none",boxSizing:"border-box",borderRadius:5,fontFamily:"inherit"}},null):J()]),fe.showComma&&(0,f.createVNode)("span",null,[","]),L.showLength&&L.collapsed&&(0,f.createVNode)("span",{class:"vjs-comment"},[(0,f.createTextVNode)(" // "),fe.length,(0,f.createTextVNode)(" items ")])])])}}});function P(L,R){var V=Object.keys(L);if(Object.getOwnPropertySymbols){var z=Object.getOwnPropertySymbols(L);R&&(z=z.filter(function(ie){return Object.getOwnPropertyDescriptor(L,ie).enumerable})),V.push.apply(V,z)}return V}function I(L){for(var R=1;R<arguments.length;R++){var V=arguments[R]!=null?arguments[R]:{};R%2?P(Object(V),!0).forEach(function(z){c(L,z,V[z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(V)):P(Object(V)).forEach(function(z){Object.defineProperty(L,z,Object.getOwnPropertyDescriptor(V,z))})}return L}var M=(0,f.defineComponent)({name:"Tree",props:I(I({},m),{},{data:{type:[String,Number,Boolean,Array,Object],default:null},deep:{type:Number,default:1/0},pathCollapsible:{type:Function,default:function(){return!1}},rootPath:{type:String,default:"root"},virtual:{type:Boolean,default:!1},height:{type:Number,default:400},itemHeight:{type:Number,default:20},selectedValue:{type:[String,Array],default:function(){return""}},collapsedOnClickBrackets:{type:Boolean,default:!0},style:Object,onSelectedChange:{type:Function}}),slots:["renderNodeKey","renderNodeValue"],emits:["nodeClick","bracketsClick","iconClick","selectedChange","update:selectedValue","update:data"],setup:function(L,R){var V=R.emit,z=R.slots,ie=(0,f.ref)(),oe=(0,f.computed)(function(){return v(L.data,L.rootPath)}),Se=function(fe){return oe.value.reduce(function(ye,j){var Y,O=j.level>=fe,F=(Y=L.pathCollapsible)===null||Y===void 0?void 0:Y.call(L,j);return j.type!=="objectStart"&&j.type!=="arrayStart"||!O&&!F?ye:I(I({},ye),{},c({},j.path,1))},{})},Ae=(0,f.reactive)({translateY:0,visibleData:null,hiddenPaths:Se(L.deep)}),Ee=(0,f.computed)(function(){for(var fe=null,ye=[],j=oe.value.length,Y=0;Y<j;Y++){var O=I(I({},oe.value[Y]),{},{id:Y}),F=Ae.hiddenPaths[O.path];if(fe&&fe.path===O.path){var U=fe.type==="objectStart",Q=I(I(I({},O),fe),{},{showComma:O.showComma,content:U?"{...}":"[...]",type:U?"objectCollapsed":"arrayCollapsed"});fe=null,ye.push(Q)}else{if(F&&!fe){fe=O;continue}if(fe)continue;ye.push(O)}}return ye}),_e=(0,f.computed)(function(){var fe=L.selectedValue;return fe&&L.selectableType==="multiple"&&Array.isArray(fe)?fe:[fe]}),se=(0,f.computed)(function(){return!L.selectableType||L.selectOnClickNode||L.showSelectController?"":"When selectableType is not null, selectOnClickNode and showSelectController cannot be false at the same time, because this will cause the selection to fail."}),ne=function(){var fe=Ee.value;if(L.virtual){var ye,j=L.height/L.itemHeight,Y=((ye=ie.value)===null||ye===void 0?void 0:ye.scrollTop)||0,O=Math.floor(Y/L.itemHeight),F=O<0?0:O+j>fe.length?fe.length-j:O;F<0&&(F=0);var U=F+j;Ae.translateY=F*L.itemHeight,Ae.visibleData=fe.filter(function(Q,ve){return ve>=F&&ve<U})}else Ae.visibleData=fe},J=function(){ne()},B=function(fe){var ye,j,Y=fe.path,O=L.selectableType;if(O==="multiple"){var F=_e.value.findIndex(function(ge){return ge===Y}),U=u(_e.value);F!==-1?U.splice(F,1):U.push(Y),V("update:selectedValue",U),V("selectedChange",U,u(_e.value))}else if(O==="single"&&_e.value[0]!==Y){var Q=(ye=_e.value,j=1,function(ge){if(Array.isArray(ge))return ge}(ye)||function(ge,Me){var De=ge==null?null:typeof Symbol<"u"&&ge[Symbol.iterator]||ge["@@iterator"];if(De!=null){var tt,Xe,et=[],Qe=!0,pt=!1;try{for(De=De.call(ge);!(Qe=(tt=De.next()).done)&&(et.push(tt.value),!Me||et.length!==Me);Qe=!0);}catch(Ft){pt=!0,Xe=Ft}finally{try{Qe||De.return==null||De.return()}finally{if(pt)throw Xe}}return et}}(ye,j)||l(ye,j)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}())[0],ve=Y;V("update:selectedValue",ve),V("selectedChange",ve,Q)}},H=function(fe){V("nodeClick",fe)},ae=function(fe,ye){if(fe)Ae.hiddenPaths=I(I({},Ae.hiddenPaths),{},c({},ye,1));else{var j=I({},Ae.hiddenPaths);delete j[ye],Ae.hiddenPaths=j}},te=function(fe,ye){L.collapsedOnClickBrackets&&ae(fe,ye),V("bracketsClick",fe)},ce=function(fe,ye){ae(fe,ye),V("iconClick",fe)},ue=function(fe,ye){var j=C(L.data),Y=L.rootPath;new Function("data","val","data".concat(ye.slice(Y.length),"=val"))(j,fe),V("update:data",j)};return(0,f.watchEffect)(function(){se.value&&function(fe){throw new Error("[VueJSONPretty] ".concat(fe))}(se.value)}),(0,f.watchEffect)(function(){Ee.value&&ne()}),(0,f.watch)(function(){return L.deep},function(fe){fe&&(Ae.hiddenPaths=Se(fe))}),function(){var fe,ye,j=(fe=L.renderNodeKey)!==null&&fe!==void 0?fe:z.renderNodeKey,Y=(ye=L.renderNodeValue)!==null&&ye!==void 0?ye:z.renderNodeValue,O=Ae.visibleData&&Ae.visibleData.map(function(F){return(0,f.createVNode)(T,{key:F.id,node:F,collapsed:!!Ae.hiddenPaths[F.path],showDoubleQuotes:L.showDoubleQuotes,showLength:L.showLength,checked:_e.value.includes(F.path),selectableType:L.selectableType,showLine:L.showLine,showLineNumber:L.showLineNumber,showSelectController:L.showSelectController,selectOnClickNode:L.selectOnClickNode,nodeSelectable:L.nodeSelectable,highlightSelectedNode:L.highlightSelectedNode,editable:L.editable,editableTrigger:L.editableTrigger,showIcon:L.showIcon,showKeyValueSpace:L.showKeyValueSpace,renderNodeKey:j,renderNodeValue:Y,onNodeClick:H,onBracketsClick:te,onIconClick:ce,onSelectedChange:B,onValueChange:ue,style:L.itemHeight&&L.itemHeight!==20?{lineHeight:"".concat(L.itemHeight,"px")}:{}},null)});return(0,f.createVNode)("div",{ref:ie,class:{"vjs-tree":!0,"is-virtual":L.virtual},onScroll:L.virtual?J:void 0,style:L.showLineNumber?I({paddingLeft:"".concat(12*Number(oe.value.length.toString().length),"px")},L.style):L.style},[L.virtual?(0,f.createVNode)("div",{class:"vjs-tree-list",style:{height:"".concat(L.height,"px")}},[(0,f.createVNode)("div",{class:"vjs-tree-list-holder",style:{height:"".concat(Ee.value.length*L.itemHeight,"px")}},[(0,f.createVNode)("div",{class:"vjs-tree-list-holder-inner",style:{transform:"translateY(".concat(Ae.translateY,"px)")}},[O])])]):O])}}})}(),a}()})})(Hhe);var qwt=Hhe.exports;const p6=pr(qwt);const Ywt=zt({components:{Codemirror:Wg,HelpButton:tm},setup(){return{extensions:[Ug,bt.lineWrapping]}},computed:{...Yt(qg),...Yt(Aa),...Yt(Zn),keyHasError(){const t=this.transitionsStore.outputArcs[this.transitionsStore.selectedOutputSnippetIndex].keyVar;return this.transitionsStore.keyEvaluationResults[t].hasError},keyEvaluation(){const t=this.transitionsStore.outputArcs[this.transitionsStore.selectedOutputSnippetIndex].keyVar;return this.transitionsStore.keyEvaluationResults[t].evaluation},valueHasError(){const t=this.transitionsStore.outputArcs[this.transitionsStore.selectedOutputSnippetIndex].valueVar;return this.transitionsStore.valueEvaluationResults[t].hasError},valueEvaluation(){const t=this.transitionsStore.outputArcs[this.transitionsStore.selectedOutputSnippetIndex].valueVar;return this.transitionsStore.valueEvaluationResults[t].evaluation}},watch:{"transitionsStore.outputArcs":{handler(t,e){this.transitionsStore.saveOutputSnippets(),this.transitionsStore.loadEvaluations()},deep:!0}},methods:{getShortString(t){return t.length>8?t.slice(0,8)+"...":t},getFormattedString(t){return JSON.stringify(JSON.parse(t),null,2)}}}),Kwt={class:"field"},Xwt={class:"label is-small"},Jwt={class:"control is-small jsn-code"},Zwt={key:0},Qwt={key:0,class:"help is-danger"},ext={key:1,class:"help"},txt=["data-tooltip"],nxt={class:"field"},rxt={class:"label is-small"},ixt={class:"control is-small jsn-code"},oxt={key:0},axt={key:0,class:"help is-danger"},sxt={key:1,class:"help"},lxt=["data-tooltip"];function uxt(t,e,n,r,i,o){const a=$t("HelpButton"),s=$t("font-awesome-icon"),l=$t("Codemirror");return Oe(),We(bn,null,[X("div",Kwt,[X("label",Xwt,[Bi("Key "),lt(a,{"help-text":`
                Output key variables define the field of a selected object or position in a selected array, where the corresponding output value is inserted.
              `}),X("span",{onClick:e[0]||(e[0]=()=>{t.uiStateStore.showEditor="key"}),class:"icon is-small is-pulled-right has-text-grey-light is-clickable"},[lt(s,{icon:"fas fa-up-right-from-square"})])]),X("div",Jwt,[lt(l,{placeholder:"Define key in Jsonnet",style:{height:"50px"},"indent-with-tab":!0,"tab-size":2,extensions:t.extensions,modelValue:t.transitionsStore.outputArcs[t.transitionsStore.selectedOutputSnippetIndex].keySnippet,"onUpdate:modelValue":e[1]||(e[1]=u=>t.transitionsStore.outputArcs[t.transitionsStore.selectedOutputSnippetIndex].keySnippet=u),disabled:t.netStore.transitionTypes[t.transitionsStore.transition.id]!=="custom"},null,8,["extensions","modelValue","disabled"])]),t.transitionsStore.assignmentComplete&&!t.transitionsStore.prefaceHasError?(Oe(),We("div",Zwt,[t.keyHasError?(Oe(),We("p",Qwt,"Key expression has errors.")):ut("",!0),t.keyHasError?ut("",!0):(Oe(),We("p",ext,[Bi("Result: "),X("code",{class:"has-text-grey has-tooltip-bottom","data-tooltip":t.getFormattedString(t.keyEvaluation)},en(t.getShortString(t.keyEvaluation)),9,txt)]))])):ut("",!0)]),X("div",nxt,[X("label",rxt,[Bi("Value "),lt(a,{"help-text":`
                Output value variables define the value that is inserted in the corresponding place.
              `}),X("span",{onClick:e[2]||(e[2]=()=>{t.uiStateStore.showEditor="value"}),class:"icon is-small is-pulled-right has-text-grey-light is-clickable"},[lt(s,{icon:"fas fa-up-right-from-square"})])]),X("div",ixt,[lt(l,{placeholder:"Define value in Jsonnet",style:{height:"50px"},"indent-with-tab":!0,"tab-size":2,extensions:t.extensions,modelValue:t.transitionsStore.outputArcs[t.transitionsStore.selectedOutputSnippetIndex].valueSnippet,"onUpdate:modelValue":e[3]||(e[3]=u=>t.transitionsStore.outputArcs[t.transitionsStore.selectedOutputSnippetIndex].valueSnippet=u),disabled:t.netStore.transitionTypes[t.transitionsStore.transition.id]!=="custom"},null,8,["extensions","modelValue","disabled"])]),t.transitionsStore.assignmentComplete&&!t.transitionsStore.prefaceHasError?(Oe(),We("div",oxt,[t.valueHasError?(Oe(),We("p",axt,"Value expression has errors.")):ut("",!0),t.valueHasError?ut("",!0):(Oe(),We("p",sxt,[Bi("Result: "),X("code",{class:"has-text-grey has-tooltip-bottom","data-tooltip":t.getFormattedString(t.valueEvaluation)},en(t.getShortString(t.valueEvaluation)),9,lxt)]))])):ut("",!0)])],64)}const cxt=ai(Ywt,[["render",uxt]]),fxt=zt({components:{VueJsonPretty:p6,HelpButton:tm},data(){return{showFilterInput:!1,pathDictionary:{}}},computed:{...Yt(qg),...Yt(Zn),selectedInputValueDotsBracketsPath:{get(){const t=this.transitionsStore.selectedInputValueJsonPath;if(t==="none")return"none";const e=this.pathDictionary[t];return e||"none"},set(t){}}},created(){this.pathDictionary={}},methods:{cancelFilterEdit(){this.transitionsStore.resetInputFilter(),this.showFilterInput=!1},saveFilter(){this.transitionsStore.saveInputFilter(),this.showFilterInput=!1},onFilterInput(){this.transitionsStore.unsetCurrentInputAssignment(),this.pathDictionary={},this.transitionsStore.loadAvailableInputAssignments()},onInputPlaceSelect(){this.showFilterInput=!1,this.pathDictionary={},this.transitionsStore.loadCurrentInputAssignment()},valueSelectable(t){let e="";const n=t.path.substring(4);e=oT(n);const i=this.transitionsStore.inputArcs[this.transitionsStore.selectedInputPlaceIndex].filtered.includes(e);return i&&(this.pathDictionary[e]=t.path),i},onSelectValueClick(t,e){if(Array.isArray(t))return;const n=t.substring(4),r=oT(n);this.transitionsStore.saveSelectedAssignment(r,"input")}}});const hxt=t=>(Rg("data-v-14abc5ec"),t=t(),Vg(),t),dxt={class:"card scoped-modal-side has-background-light scoped-modal-left"},pxt={class:"m-5 scoped-scrollable-outer"},gxt={key:0,class:"scoped-scrollable-container"},mxt={class:"level mb-4"},vxt={class:"level-left"},yxt={class:"level-item"},bxt={class:"field has-addons"},_xt=hxt(()=>X("p",{class:"control"},[X("a",{class:"button is-static is-small"}," Input ")],-1)),Sxt={class:"control"},wxt={class:"select is-small"},xxt=["value"],Cxt={key:0,class:"level-right"},kxt={class:"level-item"},Txt={class:"icon is-small has-text-warning is-clickable mr-2 has-tooltip-bottom","data-tooltip":"Some places have unselected values."},Axt={class:"level mb-4"},Ext={class:"level-left"},Pxt={key:0,class:"level-item"},Oxt={class:"icon mr-1 has-text-grey-light"},Ixt={class:"has-text-grey"},$xt={key:1,class:"level-item"},Lxt={class:"icon mr-1 has-text-grey-light"},Dxt=["disabled"],Mxt={class:"icon is-small has-text-grey"},Nxt={class:"icon is-small"},Fxt={class:"scoped-scrollable jsn-code p-2"},Rxt={key:1,class:"notification is-info is-light is-size-7"};function Vxt(t,e,n,r,i,o){const a=$t("font-awesome-icon"),s=$t("HelpButton"),l=$t("vue-json-pretty");return Oe(),We("div",dxt,[X("section",pxt,[t.transitionsStore.inputArcs.length>0?(Oe(),We("div",gxt,[X("div",mxt,[X("div",vxt,[X("div",yxt,[X("div",bxt,[_xt,X("p",Sxt,[X("span",wxt,[gc(X("select",{"onUpdate:modelValue":e[0]||(e[0]=u=>t.transitionsStore.selectedInputPlaceIndex=u),onChange:e[1]||(e[1]=(...u)=>t.onInputPlaceSelect&&t.onInputPlaceSelect(...u))},[(Oe(!0),We(bn,null,Po(t.transitionsStore.inputArcs,(u,c)=>(Oe(),We("option",{value:c},en(u.name),9,xxt))),256))],544),[[P0,t.transitionsStore.selectedInputPlaceIndex]])])])])])]),t.transitionsStore.presetAssignmentComplete?ut("",!0):(Oe(),We("div",Cxt,[X("div",kxt,[X("span",Txt,[lt(a,{icon:"fas fa-triangle-exclamation"})])])]))]),X("div",Axt,[X("div",Ext,[t.showFilterInput?(Oe(),We("div",$xt,[X("span",Lxt,[lt(a,{icon:"fas fa-filter"})]),gc(X("input",{onInput:e[3]||(e[3]=(...u)=>t.onFilterInput&&t.onFilterInput(...u)),style:{width:"100px"},class:"input is-small mr-1","onUpdate:modelValue":e[4]||(e[4]=u=>t.transitionsStore.inputArcs[t.transitionsStore.selectedInputPlaceIndex].filter=u),disabled:t.netStore.transitionTypes[t.transitionsStore.transition.id]!=="custom"},null,40,Dxt),[[Zh,t.transitionsStore.inputArcs[t.transitionsStore.selectedInputPlaceIndex].filter]]),X("button",{class:"mr-1 button is-small",onClick:e[5]||(e[5]=(...u)=>t.cancelFilterEdit&&t.cancelFilterEdit(...u))},[X("span",Mxt,[lt(a,{icon:"fas fa-xmark"})])]),X("button",{onClick:e[6]||(e[6]=(...u)=>t.saveFilter&&t.saveFilter(...u)),class:"button is-small is-primary"},[X("span",Nxt,[lt(a,{icon:"fas fa-check"})])])])):(Oe(),We("div",Pxt,[X("span",{class:"icon-text is-clickable",onClick:e[2]||(e[2]=u=>t.showFilterInput=!0)},[X("span",Oxt,[lt(a,{icon:"fas fa-filter"})]),X("span",Ixt,en(t.transitionsStore.inputArcs[t.transitionsStore.selectedInputPlaceIndex].filtered.length)+" selectable values ",1),Bi("   "),lt(s,{class:"has-text-grey-light","help-text":`
                      You can edit the filter to make other values selectable. Filter expressions are written in 
                      <a href='https://goessner.net/articles/JSONPath/' target='_blank'>
                        JsonPath
                      </a>.
                      `})])]))])]),X("div",Fxt,[(Oe(),tn(l,{key:t.transitionsStore.inputDataKey,data:t.transitionsStore.inputArcs[t.transitionsStore.selectedInputPlaceIndex].marking,onSelectedChange:t.onSelectValueClick,"selected-value":t.selectedInputValueDotsBracketsPath,"selectable-type":"single","select-on-click-node":!0,"show-select-controller":!0,"node-selectable":t.valueSelectable,"show-icon":!0},null,8,["data","onSelectedChange","selected-value","node-selectable"]))])])):(Oe(),We("div",Rxt,"Transition has no input places."))])])}const Bxt=ai(fxt,[["render",Vxt],["__scopeId","data-v-14abc5ec"]]),zxt=zt({components:{VueJsonPretty:p6,HelpButton:tm},data(){return{showFilterOutput:!1,pathDictionary:{}}},computed:{...Yt(qg),...Yt(Zn),selectedOutputValueDotsBracketsPath:{get(){const t=this.transitionsStore.selectedOutputValueJsonPath;if(t==="none")return"none";const e=this.pathDictionary[t];return e||"none"},set(t){}}},created(){this.pathDictionary={}},methods:{cancelFilterEdit(){this.transitionsStore.resetOutputFilter(),this.showFilterOutput=!1},saveFilter(){this.transitionsStore.saveOutputFilter(),this.showFilterOutput=!1},onFilterOutput(){this.transitionsStore.unsetCurrentOutputAssignment(),this.pathDictionary={},this.transitionsStore.loadAvailableOutputAssignments()},onOutputPlaceSelect(){this.showFilterOutput=!1,this.pathDictionary={},this.transitionsStore.loadCurrentOutputAssignment()},valueSelectable(t){let e="";const n=t.path.substring(4);e=oT(n);const i=this.transitionsStore.outputArcs[this.transitionsStore.selectedOutputPlaceIndex].filtered.includes(e);return i&&(this.pathDictionary[e]=t.path),i},onSelectValueClick(t,e){if(Array.isArray(t))return;const n=t.substring(4),r=oT(n);this.transitionsStore.saveSelectedAssignment(r,"output")}}});const jxt=t=>(Rg("data-v-7bf902ef"),t=t(),Vg(),t),Uxt={class:"card scoped-modal-side has-background-light scoped-modal-right"},Wxt={class:"m-5 scoped-scrollable-outer"},Hxt={key:0,class:"scoped-scrollable-container"},Gxt={class:"level mb-4"},qxt={class:"level-left"},Yxt={class:"level-item"},Kxt={class:"field has-addons"},Xxt=jxt(()=>X("p",{class:"control"},[X("a",{class:"button is-static is-small"}," Output ")],-1)),Jxt={class:"control"},Zxt={class:"select is-small"},Qxt=["value"],eCt={key:0,class:"level-right"},tCt={class:"level-item"},nCt={class:"icon is-small has-text-warning is-clickable mr-2 has-tooltip-bottom","data-tooltip":"Some places have unselected values."},rCt={class:"level mb-4"},iCt={class:"level-left"},oCt={key:0,class:"level-item"},aCt={class:"icon mr-1 has-text-grey-light"},sCt={class:"has-text-grey"},lCt={key:1,class:"level-item"},uCt={class:"icon mr-1 has-text-grey-light"},cCt=["disabled"],fCt={class:"icon is-small has-text-grey"},hCt={class:"icon is-small"},dCt={class:"scoped-scrollable jsn-code p-2"},pCt={key:1,class:"notification is-info is-light is-size-7"};function gCt(t,e,n,r,i,o){const a=$t("font-awesome-icon"),s=$t("HelpButton"),l=$t("vue-json-pretty");return Oe(),We("div",Uxt,[X("section",Wxt,[t.transitionsStore.outputArcs.length>0?(Oe(),We("div",Hxt,[X("div",Gxt,[X("div",qxt,[X("div",Yxt,[X("div",Kxt,[Xxt,X("p",Jxt,[X("span",Zxt,[gc(X("select",{"onUpdate:modelValue":e[0]||(e[0]=u=>t.transitionsStore.selectedOutputPlaceIndex=u),onChange:e[1]||(e[1]=(...u)=>t.onOutputPlaceSelect&&t.onOutputPlaceSelect(...u))},[(Oe(!0),We(bn,null,Po(t.transitionsStore.outputArcs,(u,c)=>(Oe(),We("option",{value:c},en(u.name),9,Qxt))),256))],544),[[P0,t.transitionsStore.selectedOutputPlaceIndex]])])])])])]),t.transitionsStore.postsetAssignmentComplete?ut("",!0):(Oe(),We("div",eCt,[X("div",tCt,[X("span",nCt,[lt(a,{icon:"fas fa-triangle-exclamation"})])])]))]),X("div",rCt,[X("div",iCt,[t.showFilterOutput?(Oe(),We("div",lCt,[X("span",uCt,[lt(a,{icon:"fas fa-filter"})]),gc(X("input",{onInput:e[3]||(e[3]=(...u)=>t.onFilterOutput&&t.onFilterOutput(...u)),style:{width:"100px"},class:"input is-small mr-1","onUpdate:modelValue":e[4]||(e[4]=u=>t.transitionsStore.outputArcs[t.transitionsStore.selectedOutputPlaceIndex].filter=u),disabled:t.netStore.transitionTypes[t.transitionsStore.transition.id]!=="custom"},null,40,cCt),[[Zh,t.transitionsStore.outputArcs[t.transitionsStore.selectedOutputPlaceIndex].filter]]),X("button",{class:"mr-1 button is-small",onClick:e[5]||(e[5]=(...u)=>t.cancelFilterEdit&&t.cancelFilterEdit(...u))},[X("span",fCt,[lt(a,{icon:"fas fa-xmark"})])]),X("button",{onClick:e[6]||(e[6]=(...u)=>t.saveFilter&&t.saveFilter(...u)),class:"button is-small is-primary"},[X("span",hCt,[lt(a,{icon:"fas fa-check"})])])])):(Oe(),We("div",oCt,[X("span",{class:"icon-text is-clickable",onClick:e[2]||(e[2]=u=>t.showFilterOutput=!0)},[X("span",aCt,[lt(a,{icon:"fas fa-filter"})]),X("span",sCt,en(t.transitionsStore.outputArcs[t.transitionsStore.selectedOutputPlaceIndex].filtered.length)+" selectable values",1),Bi("   "),lt(s,{class:"has-text-grey-light","help-text":`
                      You can edit the filter to make other values selectable. Filter expressions are written in 
                      <a href='https://goessner.net/articles/JSONPath/' target='_blank'>
                        JsonPath
                      </a>.
                      `})])]))])]),X("div",dCt,[(Oe(),tn(l,{key:t.transitionsStore.outputDataKey,data:t.transitionsStore.outputArcs[t.transitionsStore.selectedOutputPlaceIndex].marking,onSelectedChange:t.onSelectValueClick,"selected-value":t.selectedOutputValueDotsBracketsPath,"selectable-type":"single","select-on-click-node":!0,"show-select-controller":!0,"node-selectable":t.valueSelectable,"show-icon":!0},null,8,["data","onSelectedChange","selected-value","node-selectable"]))])])):(Oe(),We("div",pCt,"Transition has no output places."))])])}const mCt=ai(zxt,[["render",gCt],["__scopeId","data-v-7bf902ef"]]),vCt=zt({computed:{...Yt(zs),...Yt(qg),...Yt(Zn)},methods:{setTransitionType(t){const e=t.target.value;if(e==="custom"){const i=this.netStore.transitionTypes[this.transitionsStore.transition.id],o=this.configStore.getTransitionTypeById(i);if(o){const a=Object.keys(o.customVariables);for(let s=0;s<a.length;s++)this.transitionsStore.removeVariable(a[s])}}this.netStore.transitionTypes[this.transitionsStore.transition.id]=e;const n=this.configStore.getTransitionTypeById(e);if(!n)return;this.transitionsStore.transition.preface=n.preface,this.transitionsStore.transition.guard=n.guard,this.transitionsStore.saveBasicInscription();for(let i=0;i<this.transitionsStore.outputArcs.length;i++){this.transitionsStore.selectedOutputSnippetIndex=i;let o=this.transitionsStore.outputArcs[i].valueSnippet,a=this.transitionsStore.outputArcs[i].keySnippet,s=o.substring(0,o.indexOf("=")+2)+n.valueSnippet,l=a.substring(0,a.indexOf("=")+2)+n.keySnippet;this.transitionsStore.outputArcs[i].valueSnippet=s,this.transitionsStore.outputArcs[i].keySnippet=l,this.transitionsStore.saveOutputSnippets(),this.transitionsStore.selectedOutputPlaceIndex=i,this.transitionsStore.outputArcs[i].filter=n.postsetFilter,this.transitionsStore.saveOutputFilter()}for(let i=0;i<this.transitionsStore.inputArcs.length;i++)this.transitionsStore.selectedInputPlaceIndex=i,this.transitionsStore.inputArcs[i].filter=n.presetFilter,this.transitionsStore.saveInputFilter();this.transitionsStore.selectedInputPlaceIndex=0,this.transitionsStore.selectedOutputPlaceIndex=0,this.transitionsStore.selectedOutputSnippetIndex=0;const r=Object.keys(n.customVariables);for(let i=0;i<r.length;i++)this.transitionsStore.updateVariable(r[i],n.customVariables[r[i]])}}}),yCt={class:"block"},bCt={class:"field"},_Ct=X("label",{class:"label is-small"},"Knotentyp:",-1),SCt={class:"select is-small"},wCt=["selected"],xCt=["value","selected"],CCt={class:"block"},kCt={key:0,class:"notification is-info is-light is-size-7"},TCt=["innerHTML"],ACt=X("hr",null,null,-1);function ECt(t,e,n,r,i,o){var a;return Oe(),We(bn,null,[X("div",yCt,[X("div",bCt,[_Ct,X("div",SCt,[X("select",{onChange:e[0]||(e[0]=(...s)=>t.setTransitionType&&t.setTransitionType(...s))},[X("option",{value:"custom",selected:t.netStore.transitionTypes[t.transitionsStore.transition.id]==="custom"},"Individuell ",8,wCt),(Oe(!0),We(bn,null,Po(t.configStore.transitionTypes,s=>(Oe(),We("option",{value:s.id,selected:s.id===t.netStore.transitionTypes[t.transitionsStore.transition.id]},en(s.title),9,xCt))),256))],32)])])]),X("div",CCt,[t.netStore.transitionTypes[t.transitionsStore.transition.id]==="custom"?(Oe(),We("div",kCt," Sie können die Transitionsinschrift anpassen. ")):(Oe(),We("div",{key:1,class:"notification is-info is-light is-size-7",innerHTML:(a=t.configStore.getTransitionTypeById(t.netStore.transitionTypes[t.transitionsStore.transition.id]))==null?void 0:a.description},null,8,TCt))]),ACt],64)}const PCt=ai(vCt,[["render",ECt]]),OCt=zt({components:{Codemirror:Wg,VueJsonPretty:p6,SnippetInput:cxt,PostsetFilter:mCt,PresetFilter:Bxt,HelpButton:tm,TransitionTypeSelector:PCt},setup(){return{extensions:[Ug]}},data(){return{showNameInput:!1}},computed:{...Yt(Aa),...Yt(Zn),...Yt(qg)},created(){this.transitionsStore.initSettings(),this.transitionsStore.loadTransition(this.uiStateStore.lastSelectedID)},watch:{"transitionsStore.transition.guard"(t){this.transitionsStore.saveBasicInscription(),this.transitionsStore.loadEvaluations()},"transitionsStore.transition.preface"(t){this.transitionsStore.saveBasicInscription(),this.transitionsStore.loadEvaluations()}},methods:{onCancelNameEdit(){this.transitionsStore.resetName(),this.showNameInput=!1},onNameSave(){this.transitionsStore.saveName(),this.showNameInput=!1},close(){this.uiStateStore.showModal="none",this.transitionsStore.unsetAssignments()},onFireClick(){this.transitionsStore.isEnabled&&this.transitionsStore.fireCurrentTransition()},getShortString(t){return t.length>8?t.slice(0,8)+"...":t},getFormattedString(t){return JSON.stringify(JSON.parse(t),null,2)},onVariableInput(t,e){e||(e="0"),this.transitionsStore.updateVariable(t,e)}}});const Pa=t=>(Rg("data-v-711130b5"),t=t(),Vg(),t),ICt={class:"modal is-active"},$Ct=Pa(()=>X("div",{class:"modal-background"},null,-1)),LCt={class:"scoped-modal-container"},DCt={class:"modal-card scoped-modal-center"},MCt={class:"modal-card-head"},NCt=Pa(()=>X("span",{class:"has-text-weight-bold"},"Transition:",-1)),FCt={class:"ml-1"},RCt={class:"scoped-edit-button icon has-text-grey-light"},VCt={key:1,class:"level"},BCt={class:"icon is-small has-text-grey"},zCt={class:"icon is-small"},jCt=Pa(()=>X("p",{class:"modal-card-title"},null,-1)),UCt={key:0,class:"modal-card-body"},WCt={class:"block"},HCt={class:"field"},GCt={class:"label is-small"},qCt={class:"control is-small jsn-code"},YCt={key:0,class:"help is-danger"},KCt=Pa(()=>X("hr",null,null,-1)),XCt={key:0,class:"block"},JCt={class:"field"},ZCt=Pa(()=>X("label",{class:"label is-small"},"Output Expressions ",-1)),QCt={class:"select is-small"},e2t=Pa(()=>X("option",{value:-1,selected:"",disabled:""},"Select output place",-1)),t2t=["value"],n2t={key:0,class:"help is-danger"},r2t={key:1,class:"block"},i2t=Pa(()=>X("div",{class:"notification is-info is-light is-size-7"},"Transition has no output places.",-1)),o2t=[i2t],a2t=Pa(()=>X("hr",null,null,-1)),s2t={class:"block"},l2t={class:"field"},u2t={class:"label is-small"},c2t={class:"control is-small jsn-code"},f2t={key:0},h2t={key:0,class:"help is-danger"},d2t={key:1,class:"help"},p2t=["data-tooltip"],g2t=Pa(()=>X("hr",null,null,-1)),m2t={class:"block"},v2t={class:"field"},y2t=Pa(()=>X("label",{class:"label is-small"},"Settings",-1)),b2t={class:"control"},_2t={class:"field"},S2t=["checked"],w2t=Pa(()=>X("label",{for:"readonly-switch"},"Only read input values",-1)),x2t={key:2,class:"block"},C2t=Pa(()=>X("div",{class:"notification is-warning is-light is-size-7"}," Select a value for each input and output place to see expression evaluations. ",-1)),k2t=[C2t],T2t={key:3,class:"block"},A2t=Pa(()=>X("div",{class:"notification is-danger is-light is-size-7"}," The transition inscription has errors. ",-1)),E2t=[A2t],P2t={key:4,class:"block"},O2t=Pa(()=>X("div",{class:"notification is-warning is-light is-size-7"}," The transition can't fire with selected values. ",-1)),I2t=[O2t],$2t={key:5,class:"block"},L2t=Pa(()=>X("div",{class:"notification is-success is-light is-size-7"}," The transition can fire with selected values. ",-1)),D2t=[L2t],M2t={key:1,class:"modal-card-body"},N2t={class:"field"},F2t={class:"label is-small"},R2t={class:"control has-icons-right"},V2t=["value","onInput"],B2t={class:"icon is-small is-right"},z2t={key:2,class:"modal-card-foot"},j2t=["disabled"];function U2t(t,e,n,r,i,o){const a=$t("PresetFilter"),s=$t("font-awesome-icon"),l=$t("TransitionTypeSelector"),u=$t("HelpButton"),c=$t("Codemirror"),f=$t("SnippetInput"),h=$t("PostsetFilter");return Oe(),We("div",ICt,[$Ct,X("div",LCt,[t.uiStateStore.uiAssistMode==="expert"?(Oe(),tn(a,{key:0})):ut("",!0),X("div",DCt,[X("header",MCt,[NCt,X("span",FCt,[t.showNameInput?ut("",!0):(Oe(),We("span",{key:0,class:"is-ghost icon-text has-text-weight-bold scoped-modal-title is-clickable",onClick:e[0]||(e[0]=d=>t.showNameInput=!0)},[X("span",null,en(t.transitionsStore.transition.name),1),X("span",RCt,[lt(s,{icon:"fas fa-pen"})])])),t.showNameInput?(Oe(),We("span",VCt,[gc(X("input",{style:{width:"100px"},class:"input is-small level-item","onUpdate:modelValue":e[1]||(e[1]=d=>t.transitionsStore.transition.name=d)},null,512),[[Zh,t.transitionsStore.transition.name]]),X("button",{class:"ml-1 button is-small level-item",onClick:e[2]||(e[2]=(...d)=>t.onCancelNameEdit&&t.onCancelNameEdit(...d))},[X("span",BCt,[lt(s,{icon:"fas fa-xmark"})])]),X("button",{onClick:e[3]||(e[3]=(...d)=>t.onNameSave&&t.onNameSave(...d)),class:"ml-1 button is-small level-item is-primary"},[X("span",zCt,[lt(s,{icon:"fas fa-check"})])])])):ut("",!0)]),jCt,X("button",{class:"delete","aria-label":"close",onClick:e[4]||(e[4]=(...d)=>t.close&&t.close(...d))})]),t.uiStateStore.uiAssistMode==="expert"?(Oe(),We("section",UCt,[lt(l),X("div",WCt,[X("div",HCt,[X("label",GCt,[Bi("Preface "),lt(u,{"help-text":`
                                Preface is evaluated before any output expression or guard. Use it to define custom variables and functions.
                              `}),X("span",{onClick:e[5]||(e[5]=()=>{t.uiStateStore.showEditor="preface"}),class:"icon is-small is-pulled-right has-text-grey-light is-clickable"},[lt(s,{icon:"fas fa-up-right-from-square"})])]),X("div",qCt,[lt(c,{placeholder:"Define preface in Jsonnet",style:{height:"50px"},"indent-with-tab":!0,"tab-size":2,extensions:t.extensions,modelValue:t.transitionsStore.transition.preface,"onUpdate:modelValue":e[6]||(e[6]=d=>t.transitionsStore.transition.preface=d),disabled:t.netStore.transitionTypes[t.transitionsStore.transition.id]!=="custom"},null,8,["extensions","modelValue","disabled"])]),t.transitionsStore.prefaceHasError?(Oe(),We("p",YCt," Expression has errors. Use preface only for variable and function definitions.")):ut("",!0)])]),KCt,t.transitionsStore.outputArcs.length>0?(Oe(),We("div",XCt,[X("div",JCt,[ZCt,X("div",QCt,[gc(X("select",{"onUpdate:modelValue":e[7]||(e[7]=d=>t.transitionsStore.selectedOutputSnippetIndex=d)},[e2t,(Oe(!0),We(bn,null,Po(t.transitionsStore.outputArcs,(d,g)=>(Oe(),We("option",{value:g},en(d.name),9,t2t))),256))],512),[[P0,t.transitionsStore.selectedOutputSnippetIndex]])]),t.transitionsStore.hasAnyOutputError?(Oe(),We("p",n2t,"Some output expressions have errors.")):ut("",!0)]),t.transitionsStore.selectedOutputSnippetIndex!==-1?(Oe(),tn(f,{key:0})):ut("",!0)])):(Oe(),We("div",r2t,o2t)),a2t,X("div",s2t,[X("div",l2t,[X("label",u2t,[Bi("Guard Expression "),lt(u,{"help-text":`
                                The guard is a function that evaluates to true or false. Use it to describe rules when the transition is enabled.
                              `}),X("span",{onClick:e[8]||(e[8]=()=>{t.uiStateStore.showEditor="guard"}),class:"icon is-small is-pulled-right has-text-grey-light is-clickable"},[lt(s,{icon:"fas fa-up-right-from-square"})])]),X("div",c2t,[lt(c,{placeholder:"Define guard in Jsonnet",style:{height:"50px"},"indent-with-tab":!0,"tab-size":2,extensions:t.extensions,modelValue:t.transitionsStore.transition.guard,"onUpdate:modelValue":e[9]||(e[9]=d=>t.transitionsStore.transition.guard=d),disabled:t.netStore.transitionTypes[t.transitionsStore.transition.id]!=="custom"},null,8,["extensions","modelValue","disabled"])]),t.transitionsStore.assignmentComplete&&!t.transitionsStore.prefaceHasError&&!t.transitionsStore.hasAnyError?(Oe(),We("div",f2t,[t.transitionsStore.guardHasError?(Oe(),We("p",h2t,"Guard expression has errors. ")):ut("",!0),t.transitionsStore.guardHasError?ut("",!0):(Oe(),We("p",d2t,[Bi("Result: "),X("code",{class:"has-text-grey has-tooltip-bottom","data-tooltip":t.getFormattedString(t.transitionsStore.guardEvaluation)},en(t.getShortString(t.transitionsStore.guardEvaluation)),9,p2t)]))])):ut("",!0)])]),g2t,X("div",m2t,[X("div",v2t,[y2t,X("div",b2t,[X("div",_2t,[X("input",{onClick:e[10]||(e[10]=d=>t.transitionsStore.switchMode()),id:"readonly-switch",type:"checkbox",name:"readonly-switch",class:"switch is-rtl is-small",checked:t.transitionsStore.transition.readonly},null,8,S2t),w2t])])])]),t.transitionsStore.assignmentComplete?t.transitionsStore.hasAnyError?(Oe(),We("div",T2t,E2t)):t.transitionsStore.isEnabled?t.transitionsStore.isEnabled?(Oe(),We("div",$2t,D2t)):ut("",!0):(Oe(),We("div",P2t,I2t)):(Oe(),We("div",x2t,k2t))])):(Oe(),We("section",M2t,[lt(l),(Oe(!0),We(bn,null,Po(Object.entries(t.transitionsStore.transition.customVariables),([d,g])=>(Oe(),We("div",N2t,[X("label",F2t,en(d),1),X("div",R2t,[X("input",{class:"input is-small",value:g,onInput:y=>{if(y.target){const _=y.target;t.onVariableInput(d,_.value)}}},null,40,V2t),X("span",B2t,[lt(s,{icon:"fas fa-percent"})])])]))),256))])),t.uiStateStore.uiAssistMode==="expert"?(Oe(),We("footer",z2t,[X("button",{class:"button is-pulled-right is-danger is-small",disabled:!t.transitionsStore.isEnabled,style:{"margin-left":"auto"},onClick:e[11]||(e[11]=(...d)=>t.onFireClick&&t.onFireClick(...d))},"Fire!",8,j2t)])):ut("",!0)]),t.uiStateStore.uiAssistMode==="expert"?(Oe(),tn(h,{key:1})):ut("",!0)])])}const W2t=ai(OCt,[["render",U2t],["__scopeId","data-v-711130b5"]]),H2t=zt({computed:{...Yt(Aa),...Yt(Zn),...Yt(zs)},methods:{importNet(t){this.netStore.import(t),this.close()},close(){this.uiStateStore.showModal="none"}}}),G2t={class:"modal is-active"},q2t=X("div",{class:"modal-background"},null,-1),Y2t={class:"modal-card jsn-modal-wide"},K2t={class:"modal-card-head"},X2t=X("p",{class:"modal-card-title"},"Beispiele",-1),J2t={class:"modal-card-body"},Z2t={class:"content"},Q2t=X("div",{class:"notification is-info is-light is-size-7"}," Wählen Sie ein Beispiel-Modell aus, um es in den Editor zu laden. ",-1),ekt={class:"table is-size-7 is-fullwidth"},tkt=X("thead",null,[X("th",null,"Modell"),X("th",null,"Aktionen")],-1),nkt=["onClick"];function rkt(t,e,n,r,i,o){return Oe(),We("div",G2t,[q2t,X("div",Y2t,[X("header",K2t,[X2t,X("button",{class:"delete","aria-label":"close",onClick:e[0]||(e[0]=(...a)=>t.close&&t.close(...a))})]),X("section",J2t,[X("div",Z2t,[Q2t,X("div",null,[X("table",ekt,[tkt,X("tbody",null,[(Oe(!0),We(bn,null,Po(t.configStore.examples,a=>(Oe(),We("tr",null,[X("td",null,en(a.name),1),X("td",null,[X("a",{onClick:()=>{t.importNet(a.net)}},"Laden",8,nkt)])]))),256))])])])])])])])}const ikt=ai(H2t,[["render",rkt]]),okt=zt({components:{Codemirror:Wg},props:{content:String,language:{type:String,default:"json"},class:String},setup(){return{jsonExtensions:[Lue()],jsonnetExtensions:[Ug]}}});function akt(t,e,n,r,i,o){const a=$t("Codemirror");return Oe(),We(bn,null,[t.language==="jsonnet"?(Oe(),tn(a,{key:0,modelValue:t.content,"onUpdate:modelValue":e[0]||(e[0]=s=>t.content=s),disabled:!0,autofocus:!0,"indent-with-tab":!0,"tab-size":2,extensions:t.jsonnetExtensions,class:Wt(t.class)},null,8,["modelValue","extensions","class"])):ut("",!0),t.language==="json"?(Oe(),tn(a,{key:1,modelValue:t.content,"onUpdate:modelValue":e[1]||(e[1]=s=>t.content=s),disabled:!0,autofocus:!0,"indent-with-tab":!0,"tab-size":2,extensions:t.jsonExtensions,class:Wt(t.class)},null,8,["modelValue","extensions","class"])):ut("",!0)],64)}const skt=ai(okt,[["render",akt]]),lkt=zt({components:{StaticCodeEditor:skt},props:{examples:{type:Array,required:!0},isTransition:Boolean},methods:{toggleAccordion(t){this.examples[t].isExpanded===!1?this.examples[t].isExpanded=!0:this.examples[t].isExpanded=!1}}});const ukt={class:"accordion"},ckt=["onClick"],fkt=["onClick"],hkt={class:"scoped-accordion-content jsn-code"};function dkt(t,e,n,r,i,o){const a=$t("font-awesome-icon"),s=$t("StaticCodeEditor");return Oe(),We("div",ukt,[(Oe(!0),We(bn,null,Po(t.examples,(l,u)=>(Oe(),We("div",{key:u},[X("button",{class:"button is-ghost",onClick:c=>t.toggleAccordion(u)},en(l.question),9,ckt),X("button",{class:"button is-ghost is-pulled-right",onClick:c=>t.toggleAccordion(u)},[l.isExpanded?ut("",!0):(Oe(),tn(a,{key:0,icon:"fas fa-plus-circle scoped-accordion-button"})),l.isExpanded?(Oe(),tn(a,{key:1,icon:"fas fa-minus-circle scoped-accordion-button"})):ut("",!0)],8,fkt),gc(X("div",hkt,[lt(s,{class:"my-1",content:l.answer,language:"jsonnet"},null,8,["content"])],512),[[cN,l.isExpanded]])]))),128))])}const pkt=ai(lkt,[["render",dkt],["__scopeId","data-v-617f9126"]]),gkt={student:[{id:1,name:"Alice",age:25,email:"alice@uni.edu",semester:4,lecturesNotYetDone:["Process Modeling","Database Systems"]}],request:[{id:1,lecture:"Process Modeling",serviceFee:15}],jsonnet:[{question:"Always evaluate to true (no check functionality)",answer:"true",evaluation:!0,isExpanded:!1},{question:"Comparison of two attributes of different tokens",answer:"input_somplace_token.id == output_otherplace_token.id",evaluation:!0,isExpanded:!1},{question:"Comparison of an attribute with a value",answer:"input_someplace_value.name == 'Tom'",evaluation:!1,isExpanded:!1},{question:"Compare whether value is greater or smaller",answer:"input_someplace_value.age > 18",evaluation:!0,isExpanded:!1},{question:"Combine multiple conditions",answer:`input_someplace_value.name == 'Tom' &&
 input_someplace_value.age > 18`,evaluation:!0,isExpanded:!1}]},mkt={student:[{id:1,name:"Alice",age:25,email:"alice@uni.edu",semester:4,lecturesNotYetDone:["Process Modeling","Database Systems"]}],lecture:[{id:1,lecture:"Process Modeling",serviceFee:15}],jsonnet:[{question:"Pass some static simple value as output.",answer:"local output_somplace_value = true;",evaluation:{id:1,lecture:"Process Modeling"},isExpanded:!1},{question:"Pass some static complex value as output.",answer:'local output_somplace_value = { "id": 1, "lecture": "Process Modeling" };',evaluation:{id:1,lecture:"Process Modeling"},isExpanded:!1},{question:"Pass some input value unchanged.",answer:"local output_somplace_value = input_otherplace_value;",evaluation:{id:1,lecture:"Process Modeling"},isExpanded:!1},{question:"Merge objects.",answer:"local output_someplace_value = input_otherplace_value + {email: somevariable.email};",evaluation:{email:"alice@uni.edu",id:1,lecture:"Process Modeling"},isExpanded:!1}]},vkt={student:[{id:1,name:"Alice",age:25,email:"alice@uni.edu",semester:4,lecturesNotYetDone:["Process Modeling","Database Systems"]}],lecture:[{id:1,lecture:"Process Modeling",serviceFee:15}],jsonnet:[{question:"Insert corresponding output value at a specific field of an object.",answer:'local output_someplace_key = "price";',evaluation:{id:1,lecture:"Process Modeling"},isExpanded:!1},{question:"Insert corresponding output value in the beginning of an array.",answer:"local output_someplace_key = 0;",evaluation:{email:"alice@uni.edu",id:1,lecture:"Process Modeling"},isExpanded:!1},{question:"Insert corresponding output value at the end of an array.",answer:'local output_someplace_key = "-";',evaluation:{email:"alice@uni.edu",message:"The request for Process Modeling was accepted."},isExpanded:!1},{question:"Use the key of some input value as output key.",answer:"local output_someplace_key = input_otherplace_key;",evaluation:{age:25,email:"alice@uni.edu",id:1,name:"Alice",semester:4,totalTuition:1600},isExpanded:!1}]},ykt={student:[{id:1,name:"Alice",age:25,email:"alice@uni.edu",semester:4,lecturesNotYetDone:["Process Modeling","Database Systems"]}],lecture:[{id:1,lecture:"Process Modeling",serviceFee:15}],jsonnet:[{question:"Definition of a variable",answer:"local tuitionPerSemester = 400;",evaluation:{age:25,email:"alice@uni.edu",id:1,name:"Alice",semester:4,totalTuition:1600},isExpanded:!1},{question:"Definition of a function",answer:"local calculateTotalTuition(tuitionPerSemester, numberSemester) = tuitionPerSemester * numberSemester;",evaluation:{age:25,email:"alice@uni.edu",id:1,name:"Alice",semester:4,totalTuition:1600},isExpanded:!1}]},bkt=zt({components:{Codemirror:Wg,HelpButton:tm,ExampleAccordion:pkt},setup(){const t=[Ug];return{view:rc(),extensions:t}},computed:{getCurrentExample(){return this.uiStateStore.showEditor==="guard"?this.guardExamples.jsonnet:this.uiStateStore.showEditor==="value"?this.valueExamples.jsonnet:this.uiStateStore.showEditor==="key"?this.keyExamples.jsonnet:this.prefaceExamples.jsonnet},title(){return this.uiStateStore.showEditor==="guard"?this.transitionsStore.transition.name+" guard":this.uiStateStore.showEditor==="preface"?this.transitionsStore.transition.name+" preface":this.uiStateStore.showEditor==="key"?this.transitionsStore.outputArcs[this.transitionsStore.selectedOutputSnippetIndex].name+" key":this.uiStateStore.showEditor==="value"?this.transitionsStore.outputArcs[this.transitionsStore.selectedOutputSnippetIndex].name+" value":""},keyHasError(){const t=this.transitionsStore.outputArcs[this.transitionsStore.selectedOutputSnippetIndex].keyVar;return this.transitionsStore.keyEvaluationResults[t].hasError},keyEvaluation(){const t=this.transitionsStore.outputArcs[this.transitionsStore.selectedOutputSnippetIndex].keyVar;return this.transitionsStore.keyEvaluationResults[t].evaluation},valueHasError(){const t=this.transitionsStore.outputArcs[this.transitionsStore.selectedOutputSnippetIndex].valueVar;return this.transitionsStore.valueEvaluationResults[t].hasError},valueEvaluation(){const t=this.transitionsStore.outputArcs[this.transitionsStore.selectedOutputSnippetIndex].valueVar;return this.transitionsStore.valueEvaluationResults[t].evaluation},...Yt(Aa),...Yt(Zn),...Yt(qg)},data(){return{activeItems:[],expandedExamples:!1,guardExamples:gkt,keyExamples:vkt,valueExamples:mkt,prefaceExamples:ykt}},methods:{getVariableTooltip(t){return this.transitionsStore.variables[t]!==void 0?JSON.stringify(this.transitionsStore.variables[t],null,2):"Variable has no value assigned."},expandExamples(){this.expandedExamples=!this.expandedExamples},toggleActive(t){this.activeItems.includes(t)?this.activeItems.splice(this.activeItems.indexOf(t),1):this.activeItems.push(t)},close(){this.uiStateStore.showEditor="none"},onEditorReady(t){this.view=t.view},insertVariableName(t){const n=this.view.state.selection.ranges[0].anchor;this.view.dispatch({changes:{from:n,insert:t}})}}});const ki=t=>(Rg("data-v-91768d95"),t=t(),Vg(),t),_kt={class:"modal is-active"},Skt=ki(()=>X("div",{class:"modal-background"},null,-1)),wkt={class:"modal-card scoped-modal jsn-modal-wide"},xkt={class:"modal-card-head"},Ckt={class:"has-text-weight-bold"},kkt=ki(()=>X("p",{class:"modal-card-title"},null,-1)),Tkt={class:"modal-card-body"},Akt={class:"columns scoped-scrollable-outer"},Ekt={class:"column is-one-quarter scoped-scroll-container"},Pkt={class:"menu is-small scoped-scrollable"},Okt=ki(()=>X("p",{class:"menu-label"}," Variable Explorer ",-1)),Ikt={class:"menu-list"},$kt={key:0},Lkt=["onClick"],Dkt={key:0},Mkt=["data-tooltip","onClick"],Nkt=ki(()=>X("span",{class:"has-text-weight-semibold"},"Key ",-1)),Fkt=ki(()=>X("br",null,null,-1)),Rkt={class:"is-family-code"},Vkt=["data-tooltip","onClick"],Bkt=ki(()=>X("span",{class:"has-text-weight-semibold"},"Value ",-1)),zkt=ki(()=>X("br",null,null,-1)),jkt={class:"is-family-code"},Ukt=["data-tooltip","onClick"],Wkt=ki(()=>X("span",{class:"has-text-weight-semibold"},"Token ",-1)),Hkt=ki(()=>X("br",null,null,-1)),Gkt={class:"is-family-code"},qkt={key:0},Ykt=["onClick"],Kkt={key:0},Xkt=["data-tooltip","onClick"],Jkt=ki(()=>X("span",{class:"has-text-weight-semibold"},"Key ",-1)),Zkt=ki(()=>X("br",null,null,-1)),Qkt={class:"is-family-code"},eTt=["data-tooltip","onClick"],tTt=ki(()=>X("span",{class:"has-text-weight-semibold"},"Value ",-1)),nTt=ki(()=>X("br",null,null,-1)),rTt={class:"is-family-code"},iTt=["data-tooltip","onClick"],oTt=ki(()=>X("span",{class:"has-text-weight-semibold"},"Token ",-1)),aTt=ki(()=>X("br",null,null,-1)),sTt={class:"is-family-code"},lTt={class:"column"},uTt={class:"notification is-info is-light"},cTt={key:0},fTt={class:"block"},hTt={key:1},dTt={class:"block"},pTt={class:"block"},gTt={class:"block"},mTt={class:"field"},vTt={class:"label is-small"},yTt={class:"control is-small jsn-code"},bTt={key:0,class:"block"},_Tt={key:0,class:"field"},STt=ki(()=>X("label",{class:"label is-small"}," Evaluation ",-1)),wTt={key:0,class:"notification is-small jsn-code jsn-code-font is-light is-danger",style:{height:"200px"}},xTt={key:1,class:"notification is-small jsn-code jsn-code-font is-light is-danger",style:{height:"200px"}},CTt={key:2,class:"notification is-small jsn-code jsn-code-font is-light is-success",style:{height:"200px"}},kTt={key:3,class:"notification is-small jsn-code json-code-font is-light is-danger",style:{height:"200px"}},TTt={key:1,class:"field"},ATt=ki(()=>X("label",{class:"label is-small"}," Evaluation ",-1)),ETt={key:0,class:"notification is-small jsn-code jsn-code-font is-light is-success",style:{height:"200px"}},PTt=ki(()=>X("span",null,"Preface seems to be fine.",-1)),OTt=[PTt],ITt={key:1,class:"notification is-small jsn-code jsn-code-font is-light is-danger",style:{height:"200px"}},$Tt=ki(()=>X("span",null,"Preface results in an error.",-1)),LTt=[$Tt],DTt={key:2,class:"field"},MTt=ki(()=>X("label",{class:"label is-small"}," Evaluation ",-1)),NTt={key:0,class:"notification is-small jsn-code jsn-code-font is-light is-danger",style:{height:"200px"}},FTt={key:1,class:"notification is-small jsn-code jsn-code-font is-light is-success",style:{height:"200px"}},RTt={key:2,class:"notification is-small jsn-code jsn-code-font is-light is-danger",style:{height:"200px"}},VTt={key:3,class:"field"},BTt=ki(()=>X("label",{class:"label is-small"}," Evaluation ",-1)),zTt={key:0,class:"notification is-small jsn-code jsn-code-font is-light is-danger",style:{height:"200px"}},jTt={key:1,class:"notification is-small jsn-code jsn-code-font is-light is-success",style:{height:"200px"}},UTt={key:2,class:"notification is-small jsn-code jsn-code-font is-light is-danger",style:{height:"200px"}},WTt={key:1,class:"block"},HTt=ki(()=>X("div",{class:"notification is-warning is-light is-size-7"}," Select a value for each input and output place to see expression evaluations. ",-1)),GTt=[HTt];function qTt(t,e,n,r,i,o){const a=$t("font-awesome-icon"),s=$t("ExampleAccordion"),l=$t("HelpButton"),u=$t("Codemirror");return Oe(),We("div",_kt,[Skt,X("div",wkt,[X("header",xkt,[X("span",Ckt,"Expression Editor: "+en(t.title),1),kkt,X("button",{class:"delete","aria-label":"close",onClick:e[0]||(e[0]=(...c)=>t.close&&t.close(...c))})]),X("section",Tkt,[X("div",Akt,[X("div",Ekt,[X("aside",Pkt,[Okt,X("ul",Ikt,[X("li",null,[X("a",{onClick:e[1]||(e[1]=()=>{t.toggleActive("input")})}," Input ("+en(t.transitionsStore.inputArcs.length)+" places) ",1),t.activeItems.includes("input")?(Oe(),We("ul",$kt,[(Oe(!0),We(bn,null,Po(t.transitionsStore.inputArcs,(c,f)=>(Oe(),We("li",null,[X("a",{onClick:()=>{t.toggleActive(c.name)}},en(c.name),9,Lkt),t.activeItems.includes(c.name)?(Oe(),We("ul",Dkt,[X("li",null,[X("a",{class:"has-tooltip-bottom","data-tooltip":t.getVariableTooltip(c.keyVar),onClick:()=>{t.insertVariableName(c.keyVar)}},[Nkt,Fkt,X("span",Rkt,en(c.keyVar),1)],8,Mkt)]),X("li",null,[X("a",{class:"has-tooltip-bottom","data-tooltip":t.getVariableTooltip(c.valueVar),onClick:()=>{t.insertVariableName(c.valueVar)}},[Bkt,zkt,X("span",jkt,en(c.valueVar),1)],8,Vkt)]),X("li",null,[X("a",{class:"has-tooltip-bottom","data-tooltip":t.getVariableTooltip(c.tokenVar),onClick:()=>{t.insertVariableName(c.tokenVar)}},[Wkt,Hkt,X("span",Gkt,en(c.tokenVar),1)],8,Ukt)])])):ut("",!0)]))),256))])):ut("",!0)]),X("li",null,[X("a",{onClick:e[2]||(e[2]=()=>{t.toggleActive("output")})},"Output ("+en(t.transitionsStore.outputArcs.length)+" places)",1),t.activeItems.includes("output")?(Oe(),We("ul",qkt,[(Oe(!0),We(bn,null,Po(t.transitionsStore.outputArcs,(c,f)=>(Oe(),We("li",null,[X("a",{onClick:()=>{t.toggleActive(c.name)}},en(c.name),9,Ykt),t.activeItems.includes(c.name)?(Oe(),We("ul",Kkt,[X("li",null,[X("a",{class:"has-tooltip-bottom","data-tooltip":t.getVariableTooltip(c.keyVar),onClick:()=>{t.insertVariableName(c.keyVar)}},[Jkt,Zkt,X("span",Qkt,en(c.keyVar),1)],8,Xkt)]),X("li",null,[X("a",{class:"has-tooltip-bottom","data-tooltip":t.getVariableTooltip(c.valueVar),onClick:()=>{t.insertVariableName(c.valueVar)}},[tTt,nTt,X("span",rTt,en(c.valueVar),1)],8,eTt)]),X("li",null,[X("a",{class:"has-tooltip-bottom","data-tooltip":t.getVariableTooltip(c.tokenVar),onClick:()=>{t.insertVariableName(c.tokenVar)}},[oTt,aTt,X("span",sTt,en(c.tokenVar),1)],8,iTt)])])):ut("",!0)]))),256))])):ut("",!0)])])])]),X("div",lTt,[X("div",uTt,[t.expandedExamples==!1?(Oe(),We("div",cTt,[X("div",fTt,[X("span",{onClick:e[3]||(e[3]=(...c)=>t.expandExamples&&t.expandExamples(...c)),class:"icon is-clickable"},[lt(a,{icon:"fas fa-plus-circle"})]),X("span",null,"Expand examples for "+en(t.uiStateStore.showEditor)+" expressions.",1)])])):(Oe(),We("div",hTt,[X("div",dTt,[X("span",{onClick:e[4]||(e[4]=(...c)=>t.expandExamples&&t.expandExamples(...c)),class:"icon is-clickable"},[lt(a,{icon:"fas fa-minus-circle"})]),X("span",null,"Hide examples for "+en(t.uiStateStore.showEditor)+" expressions.",1)]),X("div",pTt,[lt(s,{examples:t.getCurrentExample},null,8,["examples"])])]))]),X("div",gTt,[X("div",mTt,[X("label",vTt,[Bi("Expression "),lt(l,{"help-text":`
                                 Expressions are written in 
                                <a href='https://jsonnet.org/' target='_blank'>
                                  Jsonnet
                                </a>. Click on variable names in the explorer to insert them at cursor position in the code.
                              `})]),X("div",yTt,[t.uiStateStore.showEditor==="guard"?(Oe(),tn(u,{key:0,placeholder:"Enter guard expression ...",style:{height:"200px"},"indent-with-tab":!0,"tab-size":2,extensions:t.extensions,modelValue:t.transitionsStore.transition.guard,"onUpdate:modelValue":e[5]||(e[5]=c=>t.transitionsStore.transition.guard=c),onReady:t.onEditorReady,disabled:t.netStore.transitionTypes[t.transitionsStore.transition.id]!=="custom"},null,8,["extensions","modelValue","onReady","disabled"])):ut("",!0),t.uiStateStore.showEditor==="preface"?(Oe(),tn(u,{key:1,placeholder:"Enter preface ...",style:{height:"200px"},"indent-with-tab":!0,"tab-size":2,extensions:t.extensions,modelValue:t.transitionsStore.transition.preface,"onUpdate:modelValue":e[6]||(e[6]=c=>t.transitionsStore.transition.preface=c),onReady:t.onEditorReady,disabled:t.netStore.transitionTypes[t.transitionsStore.transition.id]!=="custom"},null,8,["extensions","modelValue","onReady","disabled"])):ut("",!0),t.uiStateStore.showEditor==="key"?(Oe(),tn(u,{key:2,placeholder:"Enter output key expression ...",style:{height:"200px"},"indent-with-tab":!0,"tab-size":2,extensions:t.extensions,modelValue:t.transitionsStore.outputArcs[t.transitionsStore.selectedOutputSnippetIndex].keySnippet,"onUpdate:modelValue":e[7]||(e[7]=c=>t.transitionsStore.outputArcs[t.transitionsStore.selectedOutputSnippetIndex].keySnippet=c),onReady:t.onEditorReady,disabled:t.netStore.transitionTypes[t.transitionsStore.transition.id]!=="custom"},null,8,["extensions","modelValue","onReady","disabled"])):ut("",!0),t.uiStateStore.showEditor==="value"?(Oe(),tn(u,{key:3,placeholder:"Enter output value expression ...",style:{height:"200px"},"indent-with-tab":!0,"tab-size":2,extensions:t.extensions,modelValue:t.transitionsStore.outputArcs[t.transitionsStore.selectedOutputSnippetIndex].valueSnippet,"onUpdate:modelValue":e[8]||(e[8]=c=>t.transitionsStore.outputArcs[t.transitionsStore.selectedOutputSnippetIndex].valueSnippet=c),onReady:t.onEditorReady,disabled:t.netStore.transitionTypes[t.transitionsStore.transition.id]!=="custom"},null,8,["extensions","modelValue","onReady","disabled"])):ut("",!0)])])]),t.transitionsStore.assignmentComplete?(Oe(),We("div",bTt,[t.uiStateStore.showEditor=="guard"?(Oe(),We("div",_Tt,[STt,t.transitionsStore.prefaceHasError?(Oe(),We("div",wTt," Fix errors in preface to see evaluations. ")):ut("",!0),t.transitionsStore.hasAnyOutputError?(Oe(),We("div",xTt," Fix errors in output expressions to see evaluations. ")):t.transitionsStore.guardHasError?t.transitionsStore.guardHasError?(Oe(),We("div",kTt,[X("span",null,en(t.transitionsStore.guardEvaluation),1)])):ut("",!0):(Oe(),We("div",CTt,[X("span",null,en(JSON.stringify(JSON.parse(t.transitionsStore.guardEvaluation),null,2)),1)]))])):ut("",!0),t.uiStateStore.showEditor=="preface"?(Oe(),We("div",TTt,[ATt,t.transitionsStore.prefaceHasError?ut("",!0):(Oe(),We("div",ETt,OTt)),t.transitionsStore.prefaceHasError?(Oe(),We("div",ITt,LTt)):ut("",!0)])):ut("",!0),t.uiStateStore.showEditor=="key"?(Oe(),We("div",DTt,[MTt,t.transitionsStore.prefaceHasError?(Oe(),We("div",NTt," Fix errors in preface to see evaluations. ")):t.keyHasError?t.keyHasError?(Oe(),We("div",RTt,[X("span",null,en(t.keyEvaluation),1)])):ut("",!0):(Oe(),We("div",FTt,[X("span",null,en(t.keyEvaluation),1)]))])):ut("",!0),t.uiStateStore.showEditor=="value"?(Oe(),We("div",VTt,[BTt,t.transitionsStore.prefaceHasError?(Oe(),We("div",zTt," Fix errors in preface to see evaluations. ")):t.valueHasError?t.valueHasError?(Oe(),We("div",UTt,[X("span",null,en(t.valueEvaluation),1)])):ut("",!0):(Oe(),We("div",jTt,[X("span",null,en(t.valueEvaluation),1)]))])):ut("",!0)])):ut("",!0),t.transitionsStore.assignmentComplete?ut("",!0):(Oe(),We("div",WTt,GTt))])])])])])}const YTt=ai(bkt,[["render",qTt],["__scopeId","data-v-91768d95"]]),KTt="scope3tool",XTt="assisted",JTt="activity",ZTt="scope1",QTt=!1,eAt={show:!0},tAt=[{name:"Kamera",net:{typeData:{placeTypes:{"c49b0296-19cf-4857-90c0-3f93b638b877":"start","f1f4dfea-5277-4c6a-88f2-b76d3a12ce5d":"control","cd4b6f24-d1b8-458d-815a-5dece4b147ac":"end","bd54b190-4747-4b82-a2b0-0b4851681059":"control"},transitionTypes:{"9ab06d0d-29d3-4580-bf44-8e36194e65f1":"activity","7f9900f0-7d76-4067-b22e-391bdd91a101":"activity","a8940d72-5eff-49ae-98f3-ac64e086ff8d":"activity"}},netData:{places:[{id:"c49b0296-19cf-4857-90c0-3f93b638b877",name:"Start",marking:[{amount:1,ghgFactor:0,scope:"start",pds:0}],schema:{type:"array",title:"start",maxItems:1,items:{type:"object"},$id:"c49b0296-19cf-4857-90c0-3f93b638b877"}},{id:"f1f4dfea-5277-4c6a-88f2-b76d3a12ce5d",name:"p1",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"f1f4dfea-5277-4c6a-88f2-b76d3a12ce5d"}},{id:"cd4b6f24-d1b8-458d-815a-5dece4b147ac",name:"Kamera",marking:[],schema:{type:"array",title:"end",maxItems:1,items:{type:"object"},$id:"cd4b6f24-d1b8-458d-815a-5dece4b147ac"}},{id:"bd54b190-4747-4b82-a2b0-0b4851681059",name:"p2",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"bd54b190-4747-4b82-a2b0-0b4851681059"}}],transitions:[{id:"9ab06d0d-29d3-4580-bf44-8e36194e65f1",name:"Montage",preface:`
// calculations

// ghg factors in kg CO2e per g
local ghgFactors = {
  "NF3": 13.4,
  "SF6": 18.3,
  "CF4": 5.3
};

local calculateFootprint(component) = 
  component.amount  *
  (if component.scope == 1 then 
    (if component.unit == "mg" then 0.001 
    else if component.unit == "kg" then 1000 
    else 1)
    * ghgFactors[component.ghg]
    * component.scalingFactor
  else if component.scope == 2 then
    (if component.unit == "Wh" then 0.001
    else 1)
    * component.ghgFactor *
    (if component.ghgFactorUnit == "g CO2e / kWh" then 0.001
    else if component.ghgFactorUnit == "mg CO2e / kWh" then 0.000001
    else 1)
    * component.scalingFactor
  else if component.scope == 3 then
    (if component.unit == "mg (Gewicht)" then 0.000001
    else if component.unit == "g (Gewicht)" then 0.001
    else 1)
    * component.ghgFactor * 
    (if component.ghgFactorUnit == "mg CO2e / Stueck oder kg" then 0.000001
    else if component.ghgFactorUnit == "g CO2e / Stueck oder kg" then 0.001
    else 1)
    * component.scalingFactor
  else component.ghgFactor)
  * Allokation / 100;


local individualFootprints = std.map(calculateFootprint,input_values);


// calculate Scope 1-Emissions



local generateScope1Contribution(index,element) = if (element.scope == 1)
  then { name: input_names[index], value: individualFootprints[index] };



local sum(arr, n) = 
  if (n <= 0) then 0 
  else sum(arr, n-1) + arr[n-1];


local totalFootprint = sum(individualFootprints, std.length(individualFootprints));

local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;

local footprintShares = std.map(calculatePCFShare,individualFootprints);

local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;

local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));

local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));


// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != "start") && (element.scope != "control")) 
  then { name: input_names[index], value: individualFootprints[index] };


local generateScope2Contribution(index,element) = if (element.scope == 2)
  then { name: input_names[index], value: individualFootprints[index] };

local generateScope3Contribution(index,element) = if (element.scope == 3) 
  then { name: input_names[index], value: individualFootprints[index] };



local filterNull(element) = element != null;

local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));

// fetch contributions from incoming places
local filterControl(element) = element.scope == "control";

local incomingControlPlaces = std.filter(filterControl, input_values);

local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions["1"];
local getScope2Contribution(element) = element.footprintContributions["2"];
local getScope3Contribution(element) = element.footprintContributions["3"];

local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));

local footprintContributions = {
    "1": incomingScope1Contributions + scope1FromThisTransition,
    "2": incomingScope2Contributions + scope2FromThisTransition,
    "3": incomingScope3Contributions + scope3FromThisTransition,
};


// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != "control") && (input_values[index].scope != "start") then { name: element };

local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));

local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];

//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };

local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));

local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;

`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p1_key:"local output_p1_key = '-';"},fragmentVarSnippets:{output_p1_value:`local output_p1_value = { 
    scope: 'control', 
    ghgFactorUnit: 'kg CO2e / Stueck',
    ghgFactor: totalFootprint, 
    amount: 1, 
    unit: 'Stueck (Stueckzahl)', 
    type: 'Primaerdaten', 
    pds: outputPDS, 
    footprintContributions: footprintContributions,
    sankeyNodes: sankeyNodes,
    sankeyLinks: sankeyLinks,
    nodeName: transition_name
};`}},{id:"7f9900f0-7d76-4067-b22e-391bdd91a101",name:"Reinigung",preface:`
// calculations

// ghg factors in kg CO2e per g
local ghgFactors = {
  "NF3": 13.4,
  "SF6": 18.3,
  "CF4": 5.3
};

local calculateFootprint(component) = 
  component.amount  *
  (if component.scope == 1 then 
    (if component.unit == "mg" then 0.001 
    else if component.unit == "kg" then 1000 
    else 1)
    * ghgFactors[component.ghg]
    * component.scalingFactor
  else if component.scope == 2 then
    (if component.unit == "Wh" then 0.001
    else 1)
    * component.ghgFactor *
    (if component.ghgFactorUnit == "g CO2e / kWh" then 0.001
    else if component.ghgFactorUnit == "mg CO2e / kWh" then 0.000001
    else 1)
    * component.scalingFactor
  else if component.scope == 3 then
    (if component.unit == "mg (Gewicht)" then 0.000001
    else if component.unit == "g (Gewicht)" then 0.001
    else 1)
    * component.ghgFactor * 
    (if component.ghgFactorUnit == "mg CO2e / Stueck oder kg" then 0.000001
    else if component.ghgFactorUnit == "g CO2e / Stueck oder kg" then 0.001
    else 1)
    * component.scalingFactor
  else component.ghgFactor)
  * Allokation / 100;


local individualFootprints = std.map(calculateFootprint,input_values);


// calculate Scope 1-Emissions



local generateScope1Contribution(index,element) = if (element.scope == 1)
  then { name: input_names[index], value: individualFootprints[index] };



local sum(arr, n) = 
  if (n <= 0) then 0 
  else sum(arr, n-1) + arr[n-1];


local totalFootprint = sum(individualFootprints, std.length(individualFootprints));

local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;

local footprintShares = std.map(calculatePCFShare,individualFootprints);

local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;

local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));

local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));


// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != "start") && (element.scope != "control")) 
  then { name: input_names[index], value: individualFootprints[index] };


local generateScope2Contribution(index,element) = if (element.scope == 2)
  then { name: input_names[index], value: individualFootprints[index] };

local generateScope3Contribution(index,element) = if (element.scope == 3) 
  then { name: input_names[index], value: individualFootprints[index] };



local filterNull(element) = element != null;

local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));

// fetch contributions from incoming places
local filterControl(element) = element.scope == "control";

local incomingControlPlaces = std.filter(filterControl, input_values);

local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions["1"];
local getScope2Contribution(element) = element.footprintContributions["2"];
local getScope3Contribution(element) = element.footprintContributions["3"];

local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));

local footprintContributions = {
    "1": incomingScope1Contributions + scope1FromThisTransition,
    "2": incomingScope2Contributions + scope2FromThisTransition,
    "3": incomingScope3Contributions + scope3FromThisTransition,
};


// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != "control") && (input_values[index].scope != "start") then { name: element };

local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));

local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];

//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };

local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));

local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;

`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p2_key:"local output_p2_key = '-';"},fragmentVarSnippets:{output_p2_value:`local output_p2_value = { 
    scope: 'control', 
    ghgFactorUnit: 'kg CO2e / Stueck',
    ghgFactor: totalFootprint, 
    amount: 1, 
    unit: 'Stueck (Stueckzahl)', 
    type: 'Primaerdaten', 
    pds: outputPDS, 
    footprintContributions: footprintContributions,
    sankeyNodes: sankeyNodes,
    sankeyLinks: sankeyLinks,
    nodeName: transition_name
};`}},{id:"a8940d72-5eff-49ae-98f3-ac64e086ff8d",name:"Prüfung",preface:`
// calculations

// ghg factors in kg CO2e per g
local ghgFactors = {
  "NF3": 13.4,
  "SF6": 18.3,
  "CF4": 5.3
};

local calculateFootprint(component) = 
  component.amount  *
  (if component.scope == 1 then 
    (if component.unit == "mg" then 0.001 
    else if component.unit == "kg" then 1000 
    else 1)
    * ghgFactors[component.ghg]
    * component.scalingFactor
  else if component.scope == 2 then
    (if component.unit == "Wh" then 0.001
    else 1)
    * component.ghgFactor *
    (if component.ghgFactorUnit == "g CO2e / kWh" then 0.001
    else if component.ghgFactorUnit == "mg CO2e / kWh" then 0.000001
    else 1)
    * component.scalingFactor
  else if component.scope == 3 then
    (if component.unit == "mg (Gewicht)" then 0.000001
    else if component.unit == "g (Gewicht)" then 0.001
    else 1)
    * component.ghgFactor * 
    (if component.ghgFactorUnit == "mg CO2e / Stueck oder kg" then 0.000001
    else if component.ghgFactorUnit == "g CO2e / Stueck oder kg" then 0.001
    else 1)
    * component.scalingFactor
  else component.ghgFactor)
  * Allokation / 100;


local individualFootprints = std.map(calculateFootprint,input_values);


// calculate Scope 1-Emissions



local generateScope1Contribution(index,element) = if (element.scope == 1)
  then { name: input_names[index], value: individualFootprints[index] };



local sum(arr, n) = 
  if (n <= 0) then 0 
  else sum(arr, n-1) + arr[n-1];


local totalFootprint = sum(individualFootprints, std.length(individualFootprints));

local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;

local footprintShares = std.map(calculatePCFShare,individualFootprints);

local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;

local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));

local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));


// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != "start") && (element.scope != "control")) 
  then { name: input_names[index], value: individualFootprints[index] };


local generateScope2Contribution(index,element) = if (element.scope == 2)
  then { name: input_names[index], value: individualFootprints[index] };

local generateScope3Contribution(index,element) = if (element.scope == 3) 
  then { name: input_names[index], value: individualFootprints[index] };



local filterNull(element) = element != null;

local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));

// fetch contributions from incoming places
local filterControl(element) = element.scope == "control";

local incomingControlPlaces = std.filter(filterControl, input_values);

local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions["1"];
local getScope2Contribution(element) = element.footprintContributions["2"];
local getScope3Contribution(element) = element.footprintContributions["3"];

local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));

local footprintContributions = {
    "1": incomingScope1Contributions + scope1FromThisTransition,
    "2": incomingScope2Contributions + scope2FromThisTransition,
    "3": incomingScope3Contributions + scope3FromThisTransition,
};


// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != "control") && (input_values[index].scope != "start") then { name: element };

local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));

local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];

//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };

local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));

local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;

`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_kamera_key:"local output_kamera_key = '-';"},fragmentVarSnippets:{output_kamera_value:`local output_kamera_value = { 
    scope: 'control', 
    ghgFactorUnit: 'kg CO2e / Stueck',
    ghgFactor: totalFootprint, 
    amount: 1, 
    unit: 'Stueck (Stueckzahl)', 
    type: 'Primaerdaten', 
    pds: outputPDS, 
    footprintContributions: footprintContributions,
    sankeyNodes: sankeyNodes,
    sankeyLinks: sankeyLinks,
    nodeName: transition_name
};`}}],arcs:[{id:"2fec368f-9bd4-41f2-bfb6-fd0901c9d325",filter:"$.*",fromId:"c49b0296-19cf-4857-90c0-3f93b638b877",toId:"9ab06d0d-29d3-4580-bf44-8e36194e65f1"},{id:"03a523fd-aa6c-4f9e-aebc-b30acdb1dc04",filter:"$",fromId:"9ab06d0d-29d3-4580-bf44-8e36194e65f1",toId:"f1f4dfea-5277-4c6a-88f2-b76d3a12ce5d"},{id:"6b836a80-ac07-4b53-b0ee-7367cb417425",filter:"$.*",fromId:"f1f4dfea-5277-4c6a-88f2-b76d3a12ce5d",toId:"7f9900f0-7d76-4067-b22e-391bdd91a101"},{id:"3e4a241e-f6b4-49fd-963a-485682dee440",filter:"$",fromId:"7f9900f0-7d76-4067-b22e-391bdd91a101",toId:"bd54b190-4747-4b82-a2b0-0b4851681059"},{id:"aee2a50a-3045-49ff-9a60-2a4bede9ba1d",filter:"$.*",fromId:"bd54b190-4747-4b82-a2b0-0b4851681059",toId:"a8940d72-5eff-49ae-98f3-ac64e086ff8d"},{id:"12e6cf18-84f2-41cd-bff2-1a211d93754d",filter:"$",fromId:"a8940d72-5eff-49ae-98f3-ac64e086ff8d",toId:"cd4b6f24-d1b8-458d-815a-5dece4b147ac"}]},layoutData:{cells:[{type:"pn.Place",size:{width:50,height:50},position:{x:204,y:360},angle:0,tokens:1,id:"c49b0296-19cf-4857-90c0-3f93b638b877",jsonnetsType:"place",z:4,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Start"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:552,y:360},angle:0,tokens:0,id:"f1f4dfea-5277-4c6a-88f2-b76d3a12ce5d",jsonnetsType:"place",z:5,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p1"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:1248,y:360},angle:0,tokens:0,id:"cd4b6f24-d1b8-458d-815a-5dece4b147ac",jsonnetsType:"place",z:6,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Kamera"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:900,y:360},angle:0,tokens:0,id:"bd54b190-4747-4b82-a2b0-0b4851681059",jsonnetsType:"place",z:7,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p2"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:348,y:360},angle:0,id:"9ab06d0d-29d3-4580-bf44-8e36194e65f1",jsonnetsType:"transition",z:14,attrs:{".label":{fill:"#7a7e9b",text:"Montage"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:696,y:360},angle:0,id:"7f9900f0-7d76-4067-b22e-391bdd91a101",jsonnetsType:"transition",z:15,attrs:{".label":{fill:"#7a7e9b",text:"Reinigung"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:1032,y:360},angle:0,id:"a8940d72-5eff-49ae-98f3-ac64e086ff8d",jsonnetsType:"transition",z:16,attrs:{".label":{fill:"#7a7e9b",text:"Prüfung"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"standard.Link",source:{id:"c49b0296-19cf-4857-90c0-3f93b638b877",selector:".root"},target:{id:"9ab06d0d-29d3-4580-bf44-8e36194e65f1",selector:".root"},id:"2fec368f-9bd4-41f2-bfb6-fd0901c9d325",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:17,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"9ab06d0d-29d3-4580-bf44-8e36194e65f1",selector:".root"},target:{id:"f1f4dfea-5277-4c6a-88f2-b76d3a12ce5d",selector:".root"},id:"03a523fd-aa6c-4f9e-aebc-b30acdb1dc04",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:18,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"f1f4dfea-5277-4c6a-88f2-b76d3a12ce5d",selector:".root"},target:{id:"7f9900f0-7d76-4067-b22e-391bdd91a101",selector:".root"},id:"6b836a80-ac07-4b53-b0ee-7367cb417425",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:19,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"7f9900f0-7d76-4067-b22e-391bdd91a101",selector:".root"},target:{id:"bd54b190-4747-4b82-a2b0-0b4851681059",selector:".root"},id:"3e4a241e-f6b4-49fd-963a-485682dee440",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:20,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"bd54b190-4747-4b82-a2b0-0b4851681059",selector:".root"},target:{id:"a8940d72-5eff-49ae-98f3-ac64e086ff8d",selector:".root"},id:"aee2a50a-3045-49ff-9a60-2a4bede9ba1d",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:21,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"a8940d72-5eff-49ae-98f3-ac64e086ff8d",selector:".root"},target:{id:"cd4b6f24-d1b8-458d-815a-5dece4b147ac",selector:".root"},id:"12e6cf18-84f2-41cd-bff2-1a211d93754d",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:22,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}}]}}},{name:"Chip",net:{typeData:{placeTypes:{"1ccfb8d3-f7b8-415c-acbb-87313e9241b3":"start","626ede19-6726-45bf-b355-341f3b2d290e":"control","c1f857bb-220a-4ea0-aa0e-82a8dae72243":"control","6437bc37-738c-4d32-8c31-5d21821116aa":"control","84c18531-ecc9-4595-a717-71ab141e17af":"control","4ce5f483-ed78-4c30-bd67-5f7f161541e7":"control","54473421-8f35-47de-b64a-bc7ae45a2ea6":"control","58d13880-c38c-4a0f-8a41-642bf69009e0":"control","74a6a016-cdc3-4a3f-833c-6561d5e8dc08":"control","0256c4d8-833a-4318-9d4b-9f1c1cd46565":"control","a6d0ebbc-4df6-4c67-bae7-a5b3f38b1454":"end"},transitionTypes:{"589f4456-a1c2-47b9-b8a9-7502d40447ad":"activity","00bf5b16-edf5-49aa-be39-5702f0657392":"activity","c4b7aad3-0472-4528-8324-95557d8a5f23":"activity","3388253a-bd47-4743-a84e-57e33bb2dd69":"activity","6649229c-dc74-49b3-81c4-16bcaf2df2de":"activity","7211dcc4-5212-4b32-b057-ea94869b20ee":"activity","9abe5df7-814c-4395-b25b-dd529fbf423f":"activity","09de952b-e9b9-484e-b277-ec53b1b18d8b":"activity","09a0982b-c37a-432b-9636-05548b0b683b":"activity","123cd5e5-f7f2-462f-8a2c-4b7d9a926b04":"activity"}},netData:{places:[{id:"1ccfb8d3-f7b8-415c-acbb-87313e9241b3",name:"Start",marking:[{amount:1,ghgFactor:0,scope:"start",pds:0}],schema:{type:"array",title:"start",maxItems:1,items:{type:"object"},$id:"1ccfb8d3-f7b8-415c-acbb-87313e9241b3"}},{id:"626ede19-6726-45bf-b355-341f3b2d290e",name:"p1",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"626ede19-6726-45bf-b355-341f3b2d290e"}},{id:"c1f857bb-220a-4ea0-aa0e-82a8dae72243",name:"p2",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"c1f857bb-220a-4ea0-aa0e-82a8dae72243"}},{id:"6437bc37-738c-4d32-8c31-5d21821116aa",name:"p3",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"6437bc37-738c-4d32-8c31-5d21821116aa"}},{id:"84c18531-ecc9-4595-a717-71ab141e17af",name:"p4",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"84c18531-ecc9-4595-a717-71ab141e17af"}},{id:"4ce5f483-ed78-4c30-bd67-5f7f161541e7",name:"p5",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"4ce5f483-ed78-4c30-bd67-5f7f161541e7"}},{id:"54473421-8f35-47de-b64a-bc7ae45a2ea6",name:"p6",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"54473421-8f35-47de-b64a-bc7ae45a2ea6"}},{id:"58d13880-c38c-4a0f-8a41-642bf69009e0",name:"p7",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"58d13880-c38c-4a0f-8a41-642bf69009e0"}},{id:"74a6a016-cdc3-4a3f-833c-6561d5e8dc08",name:"p8",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"74a6a016-cdc3-4a3f-833c-6561d5e8dc08"}},{id:"a6d0ebbc-4df6-4c67-bae7-a5b3f38b1454",name:"Chip",marking:[],schema:{type:"array",title:"end",maxItems:1,items:{type:"object"},$id:"a6d0ebbc-4df6-4c67-bae7-a5b3f38b1454"}},{id:"0256c4d8-833a-4318-9d4b-9f1c1cd46565",name:"p9",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"0256c4d8-833a-4318-9d4b-9f1c1cd46565"}}],transitions:[{id:"589f4456-a1c2-47b9-b8a9-7502d40447ad",name:"Lithografie",preface:`
// calculations

// ghg factors in kg CO2e per g
local ghgFactors = {
  "NF3": 13.4,
  "SF6": 18.3,
  "CF4": 5.3
};

local calculateFootprint(component) = 
  component.amount  *
  (if component.scope == 1 then 
    (if component.unit == "mg" then 0.001 
    else if component.unit == "kg" then 1000 
    else 1)
    * ghgFactors[component.ghg]
    * component.scalingFactor
  else if component.scope == 2 then
    (if component.unit == "Wh" then 0.001
    else 1)
    * component.ghgFactor *
    (if component.ghgFactorUnit == "g CO2e / kWh" then 0.001
    else if component.ghgFactorUnit == "mg CO2e / kWh" then 0.000001
    else 1)
    * component.scalingFactor
  else if component.scope == 3 then
    (if component.unit == "mg (Gewicht)" then 0.000001
    else if component.unit == "g (Gewicht)" then 0.001
    else 1)
    * component.ghgFactor * 
    (if component.ghgFactorUnit == "mg CO2e / Stueck oder kg" then 0.000001
    else if component.ghgFactorUnit == "g CO2e / Stueck oder kg" then 0.001
    else 1)
    * component.scalingFactor
  else component.ghgFactor)
  * Allokation / 100;


local individualFootprints = std.map(calculateFootprint,input_values);


// calculate Scope 1-Emissions



local generateScope1Contribution(index,element) = if (element.scope == 1)
  then { name: input_names[index], value: individualFootprints[index] };



local sum(arr, n) = 
  if (n <= 0) then 0 
  else sum(arr, n-1) + arr[n-1];


local totalFootprint = sum(individualFootprints, std.length(individualFootprints));

local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;

local footprintShares = std.map(calculatePCFShare,individualFootprints);

local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;

local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));

local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));


// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != "start") && (element.scope != "control")) 
  then { name: input_names[index], value: individualFootprints[index] };


local generateScope2Contribution(index,element) = if (element.scope == 2)
  then { name: input_names[index], value: individualFootprints[index] };

local generateScope3Contribution(index,element) = if (element.scope == 3) 
  then { name: input_names[index], value: individualFootprints[index] };



local filterNull(element) = element != null;

local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));

// fetch contributions from incoming places
local filterControl(element) = element.scope == "control";

local incomingControlPlaces = std.filter(filterControl, input_values);

local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions["1"];
local getScope2Contribution(element) = element.footprintContributions["2"];
local getScope3Contribution(element) = element.footprintContributions["3"];

local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));

local footprintContributions = {
    "1": incomingScope1Contributions + scope1FromThisTransition,
    "2": incomingScope2Contributions + scope2FromThisTransition,
    "3": incomingScope3Contributions + scope3FromThisTransition,
};


// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != "control") && (input_values[index].scope != "start") then { name: element };

local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));

local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];

//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };

local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));

local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;

`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p1_key:"local output_p1_key = '-';"},fragmentVarSnippets:{output_p1_value:`local output_p1_value = { 
    scope: 'control', 
    ghgFactorUnit: 'kg CO2e / Stueck',
    ghgFactor: totalFootprint, 
    amount: 1, 
    unit: 'Stueck (Stueckzahl)', 
    type: 'Primaerdaten', 
    pds: outputPDS, 
    footprintContributions: footprintContributions,
    sankeyNodes: sankeyNodes,
    sankeyLinks: sankeyLinks,
    nodeName: transition_name
};`}},{id:"00bf5b16-edf5-49aa-be39-5702f0657392",name:"Dampfphasenabscheidung",preface:`
// calculations

// ghg factors in kg CO2e per g
local ghgFactors = {
  "NF3": 13.4,
  "SF6": 18.3,
  "CF4": 5.3
};

local calculateFootprint(component) = 
  component.amount  *
  (if component.scope == 1 then 
    (if component.unit == "mg" then 0.001 
    else if component.unit == "kg" then 1000 
    else 1)
    * ghgFactors[component.ghg]
    * component.scalingFactor
  else if component.scope == 2 then
    (if component.unit == "Wh" then 0.001
    else 1)
    * component.ghgFactor *
    (if component.ghgFactorUnit == "g CO2e / kWh" then 0.001
    else if component.ghgFactorUnit == "mg CO2e / kWh" then 0.000001
    else 1)
    * component.scalingFactor
  else if component.scope == 3 then
    (if component.unit == "mg (Gewicht)" then 0.000001
    else if component.unit == "g (Gewicht)" then 0.001
    else 1)
    * component.ghgFactor * 
    (if component.ghgFactorUnit == "mg CO2e / Stueck oder kg" then 0.000001
    else if component.ghgFactorUnit == "g CO2e / Stueck oder kg" then 0.001
    else 1)
    * component.scalingFactor
  else component.ghgFactor)
  * Allokation / 100;


local individualFootprints = std.map(calculateFootprint,input_values);


// calculate Scope 1-Emissions



local generateScope1Contribution(index,element) = if (element.scope == 1)
  then { name: input_names[index], value: individualFootprints[index] };



local sum(arr, n) = 
  if (n <= 0) then 0 
  else sum(arr, n-1) + arr[n-1];


local totalFootprint = sum(individualFootprints, std.length(individualFootprints));

local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;

local footprintShares = std.map(calculatePCFShare,individualFootprints);

local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;

local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));

local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));


// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != "start") && (element.scope != "control")) 
  then { name: input_names[index], value: individualFootprints[index] };


local generateScope2Contribution(index,element) = if (element.scope == 2)
  then { name: input_names[index], value: individualFootprints[index] };

local generateScope3Contribution(index,element) = if (element.scope == 3) 
  then { name: input_names[index], value: individualFootprints[index] };



local filterNull(element) = element != null;

local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));

// fetch contributions from incoming places
local filterControl(element) = element.scope == "control";

local incomingControlPlaces = std.filter(filterControl, input_values);

local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions["1"];
local getScope2Contribution(element) = element.footprintContributions["2"];
local getScope3Contribution(element) = element.footprintContributions["3"];

local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));

local footprintContributions = {
    "1": incomingScope1Contributions + scope1FromThisTransition,
    "2": incomingScope2Contributions + scope2FromThisTransition,
    "3": incomingScope3Contributions + scope3FromThisTransition,
};


// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != "control") && (input_values[index].scope != "start") then { name: element };

local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));

local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];

//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };

local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));

local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;

`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p2_key:"local output_p2_key = '-';"},fragmentVarSnippets:{output_p2_value:`local output_p2_value = { 
    scope: 'control', 
    ghgFactorUnit: 'kg CO2e / Stueck',
    ghgFactor: totalFootprint, 
    amount: 1, 
    unit: 'Stueck (Stueckzahl)', 
    type: 'Primaerdaten', 
    pds: outputPDS, 
    footprintContributions: footprintContributions,
    sankeyNodes: sankeyNodes,
    sankeyLinks: sankeyLinks,
    nodeName: transition_name
};`}},{id:"c4b7aad3-0472-4528-8324-95557d8a5f23",name:"Epitaxie",preface:`
// calculations

// ghg factors in kg CO2e per g
local ghgFactors = {
  "NF3": 13.4,
  "SF6": 18.3,
  "CF4": 5.3
};

local calculateFootprint(component) = 
  component.amount  *
  (if component.scope == 1 then 
    (if component.unit == "mg" then 0.001 
    else if component.unit == "kg" then 1000 
    else 1)
    * ghgFactors[component.ghg]
    * component.scalingFactor
  else if component.scope == 2 then
    (if component.unit == "Wh" then 0.001
    else 1)
    * component.ghgFactor *
    (if component.ghgFactorUnit == "g CO2e / kWh" then 0.001
    else if component.ghgFactorUnit == "mg CO2e / kWh" then 0.000001
    else 1)
    * component.scalingFactor
  else if component.scope == 3 then
    (if component.unit == "mg (Gewicht)" then 0.000001
    else if component.unit == "g (Gewicht)" then 0.001
    else 1)
    * component.ghgFactor * 
    (if component.ghgFactorUnit == "mg CO2e / Stueck oder kg" then 0.000001
    else if component.ghgFactorUnit == "g CO2e / Stueck oder kg" then 0.001
    else 1)
    * component.scalingFactor
  else component.ghgFactor)
  * Allokation / 100;


local individualFootprints = std.map(calculateFootprint,input_values);


// calculate Scope 1-Emissions



local generateScope1Contribution(index,element) = if (element.scope == 1)
  then { name: input_names[index], value: individualFootprints[index] };



local sum(arr, n) = 
  if (n <= 0) then 0 
  else sum(arr, n-1) + arr[n-1];


local totalFootprint = sum(individualFootprints, std.length(individualFootprints));

local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;

local footprintShares = std.map(calculatePCFShare,individualFootprints);

local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;

local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));

local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));


// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != "start") && (element.scope != "control")) 
  then { name: input_names[index], value: individualFootprints[index] };


local generateScope2Contribution(index,element) = if (element.scope == 2)
  then { name: input_names[index], value: individualFootprints[index] };

local generateScope3Contribution(index,element) = if (element.scope == 3) 
  then { name: input_names[index], value: individualFootprints[index] };



local filterNull(element) = element != null;

local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));

// fetch contributions from incoming places
local filterControl(element) = element.scope == "control";

local incomingControlPlaces = std.filter(filterControl, input_values);

local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions["1"];
local getScope2Contribution(element) = element.footprintContributions["2"];
local getScope3Contribution(element) = element.footprintContributions["3"];

local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));

local footprintContributions = {
    "1": incomingScope1Contributions + scope1FromThisTransition,
    "2": incomingScope2Contributions + scope2FromThisTransition,
    "3": incomingScope3Contributions + scope3FromThisTransition,
};


// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != "control") && (input_values[index].scope != "start") then { name: element };

local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));

local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];

//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };

local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));

local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;

`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p3_key:"local output_p3_key = '-';"},fragmentVarSnippets:{output_p3_value:`local output_p3_value = { 
    scope: 'control', 
    ghgFactorUnit: 'kg CO2e / Stueck',
    ghgFactor: totalFootprint, 
    amount: 1, 
    unit: 'Stueck (Stueckzahl)', 
    type: 'Primaerdaten', 
    pds: outputPDS, 
    footprintContributions: footprintContributions,
    sankeyNodes: sankeyNodes,
    sankeyLinks: sankeyLinks,
    nodeName: transition_name
};`}},{id:"3388253a-bd47-4743-a84e-57e33bb2dd69",name:"Dotieren",preface:`
// calculations

// ghg factors in kg CO2e per g
local ghgFactors = {
  "NF3": 13.4,
  "SF6": 18.3,
  "CF4": 5.3
};

local calculateFootprint(component) = 
  component.amount  *
  (if component.scope == 1 then 
    (if component.unit == "mg" then 0.001 
    else if component.unit == "kg" then 1000 
    else 1)
    * ghgFactors[component.ghg]
    * component.scalingFactor
  else if component.scope == 2 then
    (if component.unit == "Wh" then 0.001
    else 1)
    * component.ghgFactor *
    (if component.ghgFactorUnit == "g CO2e / kWh" then 0.001
    else if component.ghgFactorUnit == "mg CO2e / kWh" then 0.000001
    else 1)
    * component.scalingFactor
  else if component.scope == 3 then
    (if component.unit == "mg (Gewicht)" then 0.000001
    else if component.unit == "g (Gewicht)" then 0.001
    else 1)
    * component.ghgFactor * 
    (if component.ghgFactorUnit == "mg CO2e / Stueck oder kg" then 0.000001
    else if component.ghgFactorUnit == "g CO2e / Stueck oder kg" then 0.001
    else 1)
    * component.scalingFactor
  else component.ghgFactor)
  * Allokation / 100;


local individualFootprints = std.map(calculateFootprint,input_values);


// calculate Scope 1-Emissions



local generateScope1Contribution(index,element) = if (element.scope == 1)
  then { name: input_names[index], value: individualFootprints[index] };



local sum(arr, n) = 
  if (n <= 0) then 0 
  else sum(arr, n-1) + arr[n-1];


local totalFootprint = sum(individualFootprints, std.length(individualFootprints));

local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;

local footprintShares = std.map(calculatePCFShare,individualFootprints);

local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;

local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));

local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));


// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != "start") && (element.scope != "control")) 
  then { name: input_names[index], value: individualFootprints[index] };


local generateScope2Contribution(index,element) = if (element.scope == 2)
  then { name: input_names[index], value: individualFootprints[index] };

local generateScope3Contribution(index,element) = if (element.scope == 3) 
  then { name: input_names[index], value: individualFootprints[index] };



local filterNull(element) = element != null;

local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));

// fetch contributions from incoming places
local filterControl(element) = element.scope == "control";

local incomingControlPlaces = std.filter(filterControl, input_values);

local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions["1"];
local getScope2Contribution(element) = element.footprintContributions["2"];
local getScope3Contribution(element) = element.footprintContributions["3"];

local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));

local footprintContributions = {
    "1": incomingScope1Contributions + scope1FromThisTransition,
    "2": incomingScope2Contributions + scope2FromThisTransition,
    "3": incomingScope3Contributions + scope3FromThisTransition,
};


// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != "control") && (input_values[index].scope != "start") then { name: element };

local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));

local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];

//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };

local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));

local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;

`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p4_key:"local output_p4_key = '-';"},fragmentVarSnippets:{output_p4_value:`local output_p4_value = { 
    scope: 'control', 
    ghgFactorUnit: 'kg CO2e / Stueck',
    ghgFactor: totalFootprint, 
    amount: 1, 
    unit: 'Stueck (Stueckzahl)', 
    type: 'Primaerdaten', 
    pds: outputPDS, 
    footprintContributions: footprintContributions,
    sankeyNodes: sankeyNodes,
    sankeyLinks: sankeyLinks,
    nodeName: transition_name
};`}},{id:"6649229c-dc74-49b3-81c4-16bcaf2df2de",name:"Diffussion",preface:`
// calculations

// ghg factors in kg CO2e per g
local ghgFactors = {
  "NF3": 13.4,
  "SF6": 18.3,
  "CF4": 5.3
};

local calculateFootprint(component) = 
  component.amount  *
  (if component.scope == 1 then 
    (if component.unit == "mg" then 0.001 
    else if component.unit == "kg" then 1000 
    else 1)
    * ghgFactors[component.ghg]
    * component.scalingFactor
  else if component.scope == 2 then
    (if component.unit == "Wh" then 0.001
    else 1)
    * component.ghgFactor *
    (if component.ghgFactorUnit == "g CO2e / kWh" then 0.001
    else if component.ghgFactorUnit == "mg CO2e / kWh" then 0.000001
    else 1)
    * component.scalingFactor
  else if component.scope == 3 then
    (if component.unit == "mg (Gewicht)" then 0.000001
    else if component.unit == "g (Gewicht)" then 0.001
    else 1)
    * component.ghgFactor * 
    (if component.ghgFactorUnit == "mg CO2e / Stueck oder kg" then 0.000001
    else if component.ghgFactorUnit == "g CO2e / Stueck oder kg" then 0.001
    else 1)
    * component.scalingFactor
  else component.ghgFactor)
  * Allokation / 100;


local individualFootprints = std.map(calculateFootprint,input_values);


// calculate Scope 1-Emissions



local generateScope1Contribution(index,element) = if (element.scope == 1)
  then { name: input_names[index], value: individualFootprints[index] };



local sum(arr, n) = 
  if (n <= 0) then 0 
  else sum(arr, n-1) + arr[n-1];


local totalFootprint = sum(individualFootprints, std.length(individualFootprints));

local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;

local footprintShares = std.map(calculatePCFShare,individualFootprints);

local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;

local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));

local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));


// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != "start") && (element.scope != "control")) 
  then { name: input_names[index], value: individualFootprints[index] };


local generateScope2Contribution(index,element) = if (element.scope == 2)
  then { name: input_names[index], value: individualFootprints[index] };

local generateScope3Contribution(index,element) = if (element.scope == 3) 
  then { name: input_names[index], value: individualFootprints[index] };



local filterNull(element) = element != null;

local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));

// fetch contributions from incoming places
local filterControl(element) = element.scope == "control";

local incomingControlPlaces = std.filter(filterControl, input_values);

local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions["1"];
local getScope2Contribution(element) = element.footprintContributions["2"];
local getScope3Contribution(element) = element.footprintContributions["3"];

local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));

local footprintContributions = {
    "1": incomingScope1Contributions + scope1FromThisTransition,
    "2": incomingScope2Contributions + scope2FromThisTransition,
    "3": incomingScope3Contributions + scope3FromThisTransition,
};


// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != "control") && (input_values[index].scope != "start") then { name: element };

local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));

local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];

//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };

local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));

local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;

`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p5_key:"local output_p5_key = '-';"},fragmentVarSnippets:{output_p5_value:`local output_p5_value = { 
    scope: 'control', 
    ghgFactorUnit: 'kg CO2e / Stueck',
    ghgFactor: totalFootprint, 
    amount: 1, 
    unit: 'Stueck (Stueckzahl)', 
    type: 'Primaerdaten', 
    pds: outputPDS, 
    footprintContributions: footprintContributions,
    sankeyNodes: sankeyNodes,
    sankeyLinks: sankeyLinks,
    nodeName: transition_name
};`}},{id:"7211dcc4-5212-4b32-b057-ea94869b20ee",name:"Nassprozesse",preface:`
// calculations

// ghg factors in kg CO2e per g
local ghgFactors = {
  "NF3": 13.4,
  "SF6": 18.3,
  "CF4": 5.3
};

local calculateFootprint(component) = 
  component.amount  *
  (if component.scope == 1 then 
    (if component.unit == "mg" then 0.001 
    else if component.unit == "kg" then 1000 
    else 1)
    * ghgFactors[component.ghg]
    * component.scalingFactor
  else if component.scope == 2 then
    (if component.unit == "Wh" then 0.001
    else 1)
    * component.ghgFactor *
    (if component.ghgFactorUnit == "g CO2e / kWh" then 0.001
    else if component.ghgFactorUnit == "mg CO2e / kWh" then 0.000001
    else 1)
    * component.scalingFactor
  else if component.scope == 3 then
    (if component.unit == "mg (Gewicht)" then 0.000001
    else if component.unit == "g (Gewicht)" then 0.001
    else 1)
    * component.ghgFactor * 
    (if component.ghgFactorUnit == "mg CO2e / Stueck oder kg" then 0.000001
    else if component.ghgFactorUnit == "g CO2e / Stueck oder kg" then 0.001
    else 1)
    * component.scalingFactor
  else component.ghgFactor)
  * Allokation / 100;


local individualFootprints = std.map(calculateFootprint,input_values);


// calculate Scope 1-Emissions



local generateScope1Contribution(index,element) = if (element.scope == 1)
  then { name: input_names[index], value: individualFootprints[index] };



local sum(arr, n) = 
  if (n <= 0) then 0 
  else sum(arr, n-1) + arr[n-1];


local totalFootprint = sum(individualFootprints, std.length(individualFootprints));

local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;

local footprintShares = std.map(calculatePCFShare,individualFootprints);

local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;

local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));

local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));


// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != "start") && (element.scope != "control")) 
  then { name: input_names[index], value: individualFootprints[index] };


local generateScope2Contribution(index,element) = if (element.scope == 2)
  then { name: input_names[index], value: individualFootprints[index] };

local generateScope3Contribution(index,element) = if (element.scope == 3) 
  then { name: input_names[index], value: individualFootprints[index] };



local filterNull(element) = element != null;

local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));

// fetch contributions from incoming places
local filterControl(element) = element.scope == "control";

local incomingControlPlaces = std.filter(filterControl, input_values);

local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions["1"];
local getScope2Contribution(element) = element.footprintContributions["2"];
local getScope3Contribution(element) = element.footprintContributions["3"];

local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));

local footprintContributions = {
    "1": incomingScope1Contributions + scope1FromThisTransition,
    "2": incomingScope2Contributions + scope2FromThisTransition,
    "3": incomingScope3Contributions + scope3FromThisTransition,
};


// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != "control") && (input_values[index].scope != "start") then { name: element };

local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));

local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];

//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };

local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));

local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;

`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p6_key:"local output_p6_key = '-';"},fragmentVarSnippets:{output_p6_value:`local output_p6_value = { 
    scope: 'control', 
    ghgFactorUnit: 'kg CO2e / Stueck',
    ghgFactor: totalFootprint, 
    amount: 1, 
    unit: 'Stueck (Stueckzahl)', 
    type: 'Primaerdaten', 
    pds: outputPDS, 
    footprintContributions: footprintContributions,
    sankeyNodes: sankeyNodes,
    sankeyLinks: sankeyLinks,
    nodeName: transition_name
};`}},{id:"9abe5df7-814c-4395-b25b-dd529fbf423f",name:"Trockenätzen",preface:`
// calculations

// ghg factors in kg CO2e per g
local ghgFactors = {
  "NF3": 13.4,
  "SF6": 18.3,
  "CF4": 5.3
};

local calculateFootprint(component) = 
  component.amount  *
  (if component.scope == 1 then 
    (if component.unit == "mg" then 0.001 
    else if component.unit == "kg" then 1000 
    else 1)
    * ghgFactors[component.ghg]
    * component.scalingFactor
  else if component.scope == 2 then
    (if component.unit == "Wh" then 0.001
    else 1)
    * component.ghgFactor *
    (if component.ghgFactorUnit == "g CO2e / kWh" then 0.001
    else if component.ghgFactorUnit == "mg CO2e / kWh" then 0.000001
    else 1)
    * component.scalingFactor
  else if component.scope == 3 then
    (if component.unit == "mg (Gewicht)" then 0.000001
    else if component.unit == "g (Gewicht)" then 0.001
    else 1)
    * component.ghgFactor * 
    (if component.ghgFactorUnit == "mg CO2e / Stueck oder kg" then 0.000001
    else if component.ghgFactorUnit == "g CO2e / Stueck oder kg" then 0.001
    else 1)
    * component.scalingFactor
  else component.ghgFactor)
  * Allokation / 100;


local individualFootprints = std.map(calculateFootprint,input_values);


// calculate Scope 1-Emissions



local generateScope1Contribution(index,element) = if (element.scope == 1)
  then { name: input_names[index], value: individualFootprints[index] };



local sum(arr, n) = 
  if (n <= 0) then 0 
  else sum(arr, n-1) + arr[n-1];


local totalFootprint = sum(individualFootprints, std.length(individualFootprints));

local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;

local footprintShares = std.map(calculatePCFShare,individualFootprints);

local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;

local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));

local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));


// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != "start") && (element.scope != "control")) 
  then { name: input_names[index], value: individualFootprints[index] };


local generateScope2Contribution(index,element) = if (element.scope == 2)
  then { name: input_names[index], value: individualFootprints[index] };

local generateScope3Contribution(index,element) = if (element.scope == 3) 
  then { name: input_names[index], value: individualFootprints[index] };



local filterNull(element) = element != null;

local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));

// fetch contributions from incoming places
local filterControl(element) = element.scope == "control";

local incomingControlPlaces = std.filter(filterControl, input_values);

local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions["1"];
local getScope2Contribution(element) = element.footprintContributions["2"];
local getScope3Contribution(element) = element.footprintContributions["3"];

local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));

local footprintContributions = {
    "1": incomingScope1Contributions + scope1FromThisTransition,
    "2": incomingScope2Contributions + scope2FromThisTransition,
    "3": incomingScope3Contributions + scope3FromThisTransition,
};


// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != "control") && (input_values[index].scope != "start") then { name: element };

local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));

local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];

//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };

local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));

local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;

`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p7_key:"local output_p7_key = '-';"},fragmentVarSnippets:{output_p7_value:`local output_p7_value = { 
    scope: 'control', 
    ghgFactorUnit: 'kg CO2e / Stueck',
    ghgFactor: totalFootprint, 
    amount: 1, 
    unit: 'Stueck (Stueckzahl)', 
    type: 'Primaerdaten', 
    pds: outputPDS, 
    footprintContributions: footprintContributions,
    sankeyNodes: sankeyNodes,
    sankeyLinks: sankeyLinks,
    nodeName: transition_name
};`}},{id:"09de952b-e9b9-484e-b277-ec53b1b18d8b",name:"Beschichten",preface:`
// calculations

// ghg factors in kg CO2e per g
local ghgFactors = {
  "NF3": 13.4,
  "SF6": 18.3,
  "CF4": 5.3
};

local calculateFootprint(component) = 
  component.amount  *
  (if component.scope == 1 then 
    (if component.unit == "mg" then 0.001 
    else if component.unit == "kg" then 1000 
    else 1)
    * ghgFactors[component.ghg]
    * component.scalingFactor
  else if component.scope == 2 then
    (if component.unit == "Wh" then 0.001
    else 1)
    * component.ghgFactor *
    (if component.ghgFactorUnit == "g CO2e / kWh" then 0.001
    else if component.ghgFactorUnit == "mg CO2e / kWh" then 0.000001
    else 1)
    * component.scalingFactor
  else if component.scope == 3 then
    (if component.unit == "mg (Gewicht)" then 0.000001
    else if component.unit == "g (Gewicht)" then 0.001
    else 1)
    * component.ghgFactor * 
    (if component.ghgFactorUnit == "mg CO2e / Stueck oder kg" then 0.000001
    else if component.ghgFactorUnit == "g CO2e / Stueck oder kg" then 0.001
    else 1)
    * component.scalingFactor
  else component.ghgFactor)
  * Allokation / 100;


local individualFootprints = std.map(calculateFootprint,input_values);


// calculate Scope 1-Emissions



local generateScope1Contribution(index,element) = if (element.scope == 1)
  then { name: input_names[index], value: individualFootprints[index] };



local sum(arr, n) = 
  if (n <= 0) then 0 
  else sum(arr, n-1) + arr[n-1];


local totalFootprint = sum(individualFootprints, std.length(individualFootprints));

local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;

local footprintShares = std.map(calculatePCFShare,individualFootprints);

local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;

local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));

local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));


// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != "start") && (element.scope != "control")) 
  then { name: input_names[index], value: individualFootprints[index] };


local generateScope2Contribution(index,element) = if (element.scope == 2)
  then { name: input_names[index], value: individualFootprints[index] };

local generateScope3Contribution(index,element) = if (element.scope == 3) 
  then { name: input_names[index], value: individualFootprints[index] };



local filterNull(element) = element != null;

local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));

// fetch contributions from incoming places
local filterControl(element) = element.scope == "control";

local incomingControlPlaces = std.filter(filterControl, input_values);

local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions["1"];
local getScope2Contribution(element) = element.footprintContributions["2"];
local getScope3Contribution(element) = element.footprintContributions["3"];

local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));

local footprintContributions = {
    "1": incomingScope1Contributions + scope1FromThisTransition,
    "2": incomingScope2Contributions + scope2FromThisTransition,
    "3": incomingScope3Contributions + scope3FromThisTransition,
};


// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != "control") && (input_values[index].scope != "start") then { name: element };

local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));

local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];

//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };

local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));

local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;

`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p8_key:"local output_p8_key = '-';"},fragmentVarSnippets:{output_p8_value:`local output_p8_value = { 
    scope: 'control', 
    ghgFactorUnit: 'kg CO2e / Stueck',
    ghgFactor: totalFootprint, 
    amount: 1, 
    unit: 'Stueck (Stueckzahl)', 
    type: 'Primaerdaten', 
    pds: outputPDS, 
    footprintContributions: footprintContributions,
    sankeyNodes: sankeyNodes,
    sankeyLinks: sankeyLinks,
    nodeName: transition_name
};`}},{id:"09a0982b-c37a-432b-9636-05548b0b683b",name:"Polieren",preface:`
// calculations

// ghg factors in kg CO2e per g
local ghgFactors = {
  "NF3": 13.4,
  "SF6": 18.3,
  "CF4": 5.3
};

local calculateFootprint(component) = 
  component.amount  *
  (if component.scope == 1 then 
    (if component.unit == "mg" then 0.001 
    else if component.unit == "kg" then 1000 
    else 1)
    * ghgFactors[component.ghg]
    * component.scalingFactor
  else if component.scope == 2 then
    (if component.unit == "Wh" then 0.001
    else 1)
    * component.ghgFactor *
    (if component.ghgFactorUnit == "g CO2e / kWh" then 0.001
    else if component.ghgFactorUnit == "mg CO2e / kWh" then 0.000001
    else 1)
    * component.scalingFactor
  else if component.scope == 3 then
    (if component.unit == "mg (Gewicht)" then 0.000001
    else if component.unit == "g (Gewicht)" then 0.001
    else 1)
    * component.ghgFactor * 
    (if component.ghgFactorUnit == "mg CO2e / Stueck oder kg" then 0.000001
    else if component.ghgFactorUnit == "g CO2e / Stueck oder kg" then 0.001
    else 1)
    * component.scalingFactor
  else component.ghgFactor)
  * Allokation / 100;


local individualFootprints = std.map(calculateFootprint,input_values);


// calculate Scope 1-Emissions



local generateScope1Contribution(index,element) = if (element.scope == 1)
  then { name: input_names[index], value: individualFootprints[index] };



local sum(arr, n) = 
  if (n <= 0) then 0 
  else sum(arr, n-1) + arr[n-1];


local totalFootprint = sum(individualFootprints, std.length(individualFootprints));

local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;

local footprintShares = std.map(calculatePCFShare,individualFootprints);

local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;

local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));

local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));


// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != "start") && (element.scope != "control")) 
  then { name: input_names[index], value: individualFootprints[index] };


local generateScope2Contribution(index,element) = if (element.scope == 2)
  then { name: input_names[index], value: individualFootprints[index] };

local generateScope3Contribution(index,element) = if (element.scope == 3) 
  then { name: input_names[index], value: individualFootprints[index] };



local filterNull(element) = element != null;

local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));

// fetch contributions from incoming places
local filterControl(element) = element.scope == "control";

local incomingControlPlaces = std.filter(filterControl, input_values);

local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions["1"];
local getScope2Contribution(element) = element.footprintContributions["2"];
local getScope3Contribution(element) = element.footprintContributions["3"];

local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));

local footprintContributions = {
    "1": incomingScope1Contributions + scope1FromThisTransition,
    "2": incomingScope2Contributions + scope2FromThisTransition,
    "3": incomingScope3Contributions + scope3FromThisTransition,
};


// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != "control") && (input_values[index].scope != "start") then { name: element };

local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));

local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];

//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };

local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));

local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;

`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p9_key:"local output_p9_key = '-';"},fragmentVarSnippets:{output_p9_value:`local output_p9_value = { 
    scope: 'control', 
    ghgFactorUnit: 'kg CO2e / Stueck',
    ghgFactor: totalFootprint, 
    amount: 1, 
    unit: 'Stueck (Stueckzahl)', 
    type: 'Primaerdaten', 
    pds: outputPDS, 
    footprintContributions: footprintContributions,
    sankeyNodes: sankeyNodes,
    sankeyLinks: sankeyLinks,
    nodeName: transition_name
};`}},{id:"123cd5e5-f7f2-462f-8a2c-4b7d9a926b04",name:"Metrologie",preface:`
// calculations

// ghg factors in kg CO2e per g
local ghgFactors = {
  "NF3": 13.4,
  "SF6": 18.3,
  "CF4": 5.3
};

local calculateFootprint(component) = 
  component.amount  *
  (if component.scope == 1 then 
    (if component.unit == "mg" then 0.001 
    else if component.unit == "kg" then 1000 
    else 1)
    * ghgFactors[component.ghg]
    * component.scalingFactor
  else if component.scope == 2 then
    (if component.unit == "Wh" then 0.001
    else 1)
    * component.ghgFactor *
    (if component.ghgFactorUnit == "g CO2e / kWh" then 0.001
    else if component.ghgFactorUnit == "mg CO2e / kWh" then 0.000001
    else 1)
    * component.scalingFactor
  else if component.scope == 3 then
    (if component.unit == "mg (Gewicht)" then 0.000001
    else if component.unit == "g (Gewicht)" then 0.001
    else 1)
    * component.ghgFactor * 
    (if component.ghgFactorUnit == "mg CO2e / Stueck oder kg" then 0.000001
    else if component.ghgFactorUnit == "g CO2e / Stueck oder kg" then 0.001
    else 1)
    * component.scalingFactor
  else component.ghgFactor)
  * Allokation / 100;


local individualFootprints = std.map(calculateFootprint,input_values);


// calculate Scope 1-Emissions



local generateScope1Contribution(index,element) = if (element.scope == 1)
  then { name: input_names[index], value: individualFootprints[index] };



local sum(arr, n) = 
  if (n <= 0) then 0 
  else sum(arr, n-1) + arr[n-1];


local totalFootprint = sum(individualFootprints, std.length(individualFootprints));

local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;

local footprintShares = std.map(calculatePCFShare,individualFootprints);

local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;

local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));

local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));


// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != "start") && (element.scope != "control")) 
  then { name: input_names[index], value: individualFootprints[index] };


local generateScope2Contribution(index,element) = if (element.scope == 2)
  then { name: input_names[index], value: individualFootprints[index] };

local generateScope3Contribution(index,element) = if (element.scope == 3) 
  then { name: input_names[index], value: individualFootprints[index] };



local filterNull(element) = element != null;

local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));

// fetch contributions from incoming places
local filterControl(element) = element.scope == "control";

local incomingControlPlaces = std.filter(filterControl, input_values);

local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions["1"];
local getScope2Contribution(element) = element.footprintContributions["2"];
local getScope3Contribution(element) = element.footprintContributions["3"];

local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));

local footprintContributions = {
    "1": incomingScope1Contributions + scope1FromThisTransition,
    "2": incomingScope2Contributions + scope2FromThisTransition,
    "3": incomingScope3Contributions + scope3FromThisTransition,
};


// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != "control") && (input_values[index].scope != "start") then { name: element };

local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));

local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];

//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };

local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));

local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;

`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_chip_key:"local output_chip_key = '-';"},fragmentVarSnippets:{output_chip_value:`local output_chip_value = { 
    scope: 'control', 
    ghgFactorUnit: 'kg CO2e / Stueck',
    ghgFactor: totalFootprint, 
    amount: 1, 
    unit: 'Stueck (Stueckzahl)', 
    type: 'Primaerdaten', 
    pds: outputPDS, 
    footprintContributions: footprintContributions,
    sankeyNodes: sankeyNodes,
    sankeyLinks: sankeyLinks,
    nodeName: transition_name
};`}}],arcs:[{id:"1db9e399-2f4c-40df-8525-967520f257f5",filter:"$.*",fromId:"1ccfb8d3-f7b8-415c-acbb-87313e9241b3",toId:"589f4456-a1c2-47b9-b8a9-7502d40447ad"},{id:"1306fd03-766e-4c1e-accb-c2744e221301",filter:"$",fromId:"589f4456-a1c2-47b9-b8a9-7502d40447ad",toId:"626ede19-6726-45bf-b355-341f3b2d290e"},{id:"57c342a1-36ff-4b82-8fa7-fc7bc502434c",filter:"$.*",fromId:"626ede19-6726-45bf-b355-341f3b2d290e",toId:"00bf5b16-edf5-49aa-be39-5702f0657392"},{id:"54f08425-a3d5-4ab4-8b1d-bc51f5a43d73",filter:"$",fromId:"00bf5b16-edf5-49aa-be39-5702f0657392",toId:"c1f857bb-220a-4ea0-aa0e-82a8dae72243"},{id:"b0056d56-4888-40a2-8bd6-1c8cf904c29b",filter:"$.*",fromId:"c1f857bb-220a-4ea0-aa0e-82a8dae72243",toId:"c4b7aad3-0472-4528-8324-95557d8a5f23"},{id:"e1a943b2-fee8-4961-a41d-b95ba022528a",filter:"$",fromId:"c4b7aad3-0472-4528-8324-95557d8a5f23",toId:"6437bc37-738c-4d32-8c31-5d21821116aa"},{id:"bcc337af-901d-4735-b740-43b57acd8c95",filter:"$.*",fromId:"6437bc37-738c-4d32-8c31-5d21821116aa",toId:"3388253a-bd47-4743-a84e-57e33bb2dd69"},{id:"dd535a8f-7a85-4e11-9b38-adf4c307a796",filter:"$",fromId:"3388253a-bd47-4743-a84e-57e33bb2dd69",toId:"84c18531-ecc9-4595-a717-71ab141e17af"},{id:"5abc56e8-3e3e-49d1-b0b3-673eea0dd027",filter:"$.*",fromId:"84c18531-ecc9-4595-a717-71ab141e17af",toId:"6649229c-dc74-49b3-81c4-16bcaf2df2de"},{id:"692a6008-670c-4415-917f-c78b426f47f9",filter:"$",fromId:"6649229c-dc74-49b3-81c4-16bcaf2df2de",toId:"4ce5f483-ed78-4c30-bd67-5f7f161541e7"},{id:"ddc6e979-4c04-413a-b98f-99b61337c44d",filter:"$.*",fromId:"4ce5f483-ed78-4c30-bd67-5f7f161541e7",toId:"7211dcc4-5212-4b32-b057-ea94869b20ee"},{id:"d312cb51-db72-4c88-9e30-a9d0c60b5dfe",filter:"$",fromId:"7211dcc4-5212-4b32-b057-ea94869b20ee",toId:"54473421-8f35-47de-b64a-bc7ae45a2ea6"},{id:"8b54b8a8-f2bb-404d-953f-307d33f4af07",filter:"$.*",fromId:"54473421-8f35-47de-b64a-bc7ae45a2ea6",toId:"9abe5df7-814c-4395-b25b-dd529fbf423f"},{id:"493716c2-ac90-48b0-abd3-48abbdedf7b4",filter:"$",fromId:"9abe5df7-814c-4395-b25b-dd529fbf423f",toId:"58d13880-c38c-4a0f-8a41-642bf69009e0"},{id:"739a7280-ff27-440b-acd4-5e184f257175",filter:"$.*",fromId:"58d13880-c38c-4a0f-8a41-642bf69009e0",toId:"09de952b-e9b9-484e-b277-ec53b1b18d8b"},{id:"5e830217-0bbe-4cad-b36c-05405fc6282c",filter:"$",fromId:"09de952b-e9b9-484e-b277-ec53b1b18d8b",toId:"74a6a016-cdc3-4a3f-833c-6561d5e8dc08"},{id:"de186182-5c9b-4eb2-ac70-af87d3e90b32",filter:"$.*",fromId:"74a6a016-cdc3-4a3f-833c-6561d5e8dc08",toId:"09a0982b-c37a-432b-9636-05548b0b683b"},{id:"86640be4-3672-466a-9934-4c65d64f4087",filter:"$",fromId:"09a0982b-c37a-432b-9636-05548b0b683b",toId:"0256c4d8-833a-4318-9d4b-9f1c1cd46565"},{id:"65494ab6-bacb-419c-973a-23adb0b630c2",filter:"$.*",fromId:"0256c4d8-833a-4318-9d4b-9f1c1cd46565",toId:"123cd5e5-f7f2-462f-8a2c-4b7d9a926b04"},{id:"45fd2474-4e75-4548-83c4-6d14be8e3c97",filter:"$",fromId:"123cd5e5-f7f2-462f-8a2c-4b7d9a926b04",toId:"a6d0ebbc-4df6-4c67-bae7-a5b3f38b1454"}]},layoutData:{cells:[{type:"pn.Place",size:{width:50,height:50},position:{x:96,y:300},angle:0,tokens:1,id:"1ccfb8d3-f7b8-415c-acbb-87313e9241b3",jsonnetsType:"place",z:11,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Start"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:528,y:300},angle:0,tokens:0,id:"626ede19-6726-45bf-b355-341f3b2d290e",jsonnetsType:"place",z:12,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p1"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:947,y:299},angle:0,tokens:0,id:"c1f857bb-220a-4ea0-aa0e-82a8dae72243",jsonnetsType:"place",z:13,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p2"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:1332,y:300},angle:0,tokens:0,id:"6437bc37-738c-4d32-8c31-5d21821116aa",jsonnetsType:"place",z:14,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p3"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:1332,y:600},angle:0,tokens:0,id:"84c18531-ecc9-4595-a717-71ab141e17af",jsonnetsType:"place",z:15,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p4"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:948,y:600},angle:0,tokens:0,id:"4ce5f483-ed78-4c30-bd67-5f7f161541e7",jsonnetsType:"place",z:16,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p5"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:516,y:600},angle:0,tokens:0,id:"54473421-8f35-47de-b64a-bc7ae45a2ea6",jsonnetsType:"place",z:17,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p6"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:108,y:600},angle:0,tokens:0,id:"58d13880-c38c-4a0f-8a41-642bf69009e0",jsonnetsType:"place",z:18,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p7"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:108,y:876},angle:0,tokens:0,id:"74a6a016-cdc3-4a3f-833c-6561d5e8dc08",jsonnetsType:"place",z:19,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p8"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:960,y:876},angle:0,tokens:0,id:"a6d0ebbc-4df6-4c67-bae7-a5b3f38b1454",jsonnetsType:"place",z:20,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Chip"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:504,y:876},angle:0,tokens:0,id:"0256c4d8-833a-4318-9d4b-9f1c1cd46565",jsonnetsType:"place",z:21,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p9"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:288,y:300},angle:0,id:"589f4456-a1c2-47b9-b8a9-7502d40447ad",jsonnetsType:"transition",z:22,attrs:{".label":{fill:"#7a7e9b",text:"Lithografie"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:708,y:300},angle:0,id:"00bf5b16-edf5-49aa-be39-5702f0657392",jsonnetsType:"transition",z:23,attrs:{".label":{fill:"#7a7e9b",text:"Dampfphasenabscheidung"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:1104,y:300},angle:0,id:"c4b7aad3-0472-4528-8324-95557d8a5f23",jsonnetsType:"transition",z:24,attrs:{".label":{fill:"#7a7e9b",text:"Epitaxie"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:1308,y:444},angle:0,id:"3388253a-bd47-4743-a84e-57e33bb2dd69",jsonnetsType:"transition",z:25,attrs:{".label":{fill:"#7a7e9b",text:"Dotieren"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:1104,y:600},angle:0,id:"6649229c-dc74-49b3-81c4-16bcaf2df2de",jsonnetsType:"transition",z:26,attrs:{".label":{fill:"#7a7e9b",text:"Diffussion"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:708,y:600},angle:0,id:"7211dcc4-5212-4b32-b057-ea94869b20ee",jsonnetsType:"transition",z:27,attrs:{".label":{fill:"#7a7e9b",text:"Nassprozesse"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:288,y:600},angle:0,id:"9abe5df7-814c-4395-b25b-dd529fbf423f",jsonnetsType:"transition",z:28,attrs:{".label":{fill:"#7a7e9b",text:"Trockenätzen"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:84,y:744},angle:0,id:"09de952b-e9b9-484e-b277-ec53b1b18d8b",jsonnetsType:"transition",z:29,attrs:{".label":{fill:"#7a7e9b",text:"Beschichten"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:276,y:876},angle:0,id:"09a0982b-c37a-432b-9636-05548b0b683b",jsonnetsType:"transition",z:30,attrs:{".label":{fill:"#7a7e9b",text:"Polieren"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:720,y:876},angle:0,id:"123cd5e5-f7f2-462f-8a2c-4b7d9a926b04",jsonnetsType:"transition",z:31,attrs:{".label":{fill:"#7a7e9b",text:"Metrologie"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"standard.Link",source:{id:"1ccfb8d3-f7b8-415c-acbb-87313e9241b3",selector:".root"},target:{id:"589f4456-a1c2-47b9-b8a9-7502d40447ad",selector:".root"},id:"1db9e399-2f4c-40df-8525-967520f257f5",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:32,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"589f4456-a1c2-47b9-b8a9-7502d40447ad",selector:".root"},target:{id:"626ede19-6726-45bf-b355-341f3b2d290e",selector:".root"},id:"1306fd03-766e-4c1e-accb-c2744e221301",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:33,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"626ede19-6726-45bf-b355-341f3b2d290e",selector:".root"},target:{id:"00bf5b16-edf5-49aa-be39-5702f0657392",selector:".root"},id:"57c342a1-36ff-4b82-8fa7-fc7bc502434c",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:34,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"00bf5b16-edf5-49aa-be39-5702f0657392",selector:".root"},target:{id:"c1f857bb-220a-4ea0-aa0e-82a8dae72243",selector:".root"},id:"54f08425-a3d5-4ab4-8b1d-bc51f5a43d73",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:35,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"c1f857bb-220a-4ea0-aa0e-82a8dae72243",selector:".root"},target:{id:"c4b7aad3-0472-4528-8324-95557d8a5f23",selector:".root"},id:"b0056d56-4888-40a2-8bd6-1c8cf904c29b",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:36,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"c4b7aad3-0472-4528-8324-95557d8a5f23",selector:".root"},target:{id:"6437bc37-738c-4d32-8c31-5d21821116aa",selector:".root"},id:"e1a943b2-fee8-4961-a41d-b95ba022528a",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:37,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"6437bc37-738c-4d32-8c31-5d21821116aa",selector:".root"},target:{id:"3388253a-bd47-4743-a84e-57e33bb2dd69",selector:".root"},id:"bcc337af-901d-4735-b740-43b57acd8c95",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:38,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"3388253a-bd47-4743-a84e-57e33bb2dd69",selector:".root"},target:{id:"84c18531-ecc9-4595-a717-71ab141e17af",selector:".root"},id:"dd535a8f-7a85-4e11-9b38-adf4c307a796",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:39,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"84c18531-ecc9-4595-a717-71ab141e17af",selector:".root"},target:{id:"6649229c-dc74-49b3-81c4-16bcaf2df2de",selector:".root"},id:"5abc56e8-3e3e-49d1-b0b3-673eea0dd027",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:40,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"6649229c-dc74-49b3-81c4-16bcaf2df2de",selector:".root"},target:{id:"4ce5f483-ed78-4c30-bd67-5f7f161541e7",selector:".root"},id:"692a6008-670c-4415-917f-c78b426f47f9",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:41,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"4ce5f483-ed78-4c30-bd67-5f7f161541e7",selector:".root"},target:{id:"7211dcc4-5212-4b32-b057-ea94869b20ee",selector:".root"},id:"ddc6e979-4c04-413a-b98f-99b61337c44d",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:42,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"7211dcc4-5212-4b32-b057-ea94869b20ee",selector:".root"},target:{id:"54473421-8f35-47de-b64a-bc7ae45a2ea6",selector:".root"},id:"d312cb51-db72-4c88-9e30-a9d0c60b5dfe",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:43,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"54473421-8f35-47de-b64a-bc7ae45a2ea6",selector:".root"},target:{id:"9abe5df7-814c-4395-b25b-dd529fbf423f",selector:".root"},id:"8b54b8a8-f2bb-404d-953f-307d33f4af07",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:44,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"9abe5df7-814c-4395-b25b-dd529fbf423f",selector:".root"},target:{id:"58d13880-c38c-4a0f-8a41-642bf69009e0",selector:".root"},id:"493716c2-ac90-48b0-abd3-48abbdedf7b4",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:45,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"58d13880-c38c-4a0f-8a41-642bf69009e0",selector:".root"},target:{id:"09de952b-e9b9-484e-b277-ec53b1b18d8b",selector:".root"},id:"739a7280-ff27-440b-acd4-5e184f257175",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:46,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"09de952b-e9b9-484e-b277-ec53b1b18d8b",selector:".root"},target:{id:"74a6a016-cdc3-4a3f-833c-6561d5e8dc08",selector:".root"},id:"5e830217-0bbe-4cad-b36c-05405fc6282c",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:47,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"74a6a016-cdc3-4a3f-833c-6561d5e8dc08",selector:".root"},target:{id:"09a0982b-c37a-432b-9636-05548b0b683b",selector:".root"},id:"de186182-5c9b-4eb2-ac70-af87d3e90b32",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:48,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"09a0982b-c37a-432b-9636-05548b0b683b",selector:".root"},target:{id:"0256c4d8-833a-4318-9d4b-9f1c1cd46565",selector:".root"},id:"86640be4-3672-466a-9934-4c65d64f4087",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:49,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"0256c4d8-833a-4318-9d4b-9f1c1cd46565",selector:".root"},target:{id:"123cd5e5-f7f2-462f-8a2c-4b7d9a926b04",selector:".root"},id:"65494ab6-bacb-419c-973a-23adb0b630c2",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:50,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"123cd5e5-f7f2-462f-8a2c-4b7d9a926b04",selector:".root"},target:{id:"a6d0ebbc-4df6-4c67-bae7-a5b3f38b1454",selector:".root"},id:"45fd2474-4e75-4548-83c4-6d14be8e3c97",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:51,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}}]}}},{name:"Anschluss",net:{typeData:{placeTypes:{"167bbbd6-95ec-4fd6-be40-26c1a487f170":"start","834fca4a-9079-417a-8768-afd52bcc0c94":"end","77993295-6870-418a-bd0d-b145e603292f":"control","2f69a08e-2351-4bdf-84d7-564928a829aa":"control"},transitionTypes:{"67438c44-8f16-41b3-ac44-0438014633c0":"activity","e6d19788-6dec-476e-a333-14397384d651":"activity","480049a0-4dbe-4f96-b7fc-2fdd039ed064":"activity"}},netData:{places:[{id:"167bbbd6-95ec-4fd6-be40-26c1a487f170",name:"Start",marking:[{amount:1,ghgFactor:0,scope:"start",pds:0}],schema:{type:"array",title:"start",maxItems:1,items:{type:"object"},$id:"167bbbd6-95ec-4fd6-be40-26c1a487f170"}},{id:"77993295-6870-418a-bd0d-b145e603292f",name:"p1",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"77993295-6870-418a-bd0d-b145e603292f"}},{id:"2f69a08e-2351-4bdf-84d7-564928a829aa",name:"p2",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"2f69a08e-2351-4bdf-84d7-564928a829aa"}},{id:"834fca4a-9079-417a-8768-afd52bcc0c94",name:"Kameraanschluss",marking:[],schema:{type:"array",title:"end",maxItems:1,items:{type:"object"},$id:"834fca4a-9079-417a-8768-afd52bcc0c94"}}],transitions:[{id:"67438c44-8f16-41b3-ac44-0438014633c0",name:"Reinigen",preface:`
// calculations

// ghg factors in kg CO2e per g
local ghgFactors = {
  "NF3": 13.4,
  "SF6": 18.3,
  "CF4": 5.3
};

local calculateFootprint(component) = 
  component.amount  *
  (if component.scope == 1 then 
    (if component.unit == "mg" then 0.001 
    else if component.unit == "kg" then 1000 
    else 1)
    * ghgFactors[component.ghg]
    * component.scalingFactor
  else if component.scope == 2 then
    (if component.unit == "Wh" then 0.001
    else 1)
    * component.ghgFactor *
    (if component.ghgFactorUnit == "g CO2e / kWh" then 0.001
    else if component.ghgFactorUnit == "mg CO2e / kWh" then 0.000001
    else 1)
    * component.scalingFactor
  else if component.scope == 3 then
    (if component.unit == "mg (Gewicht)" then 0.000001
    else if component.unit == "g (Gewicht)" then 0.001
    else 1)
    * component.ghgFactor * 
    (if component.ghgFactorUnit == "mg CO2e / Stueck oder kg" then 0.000001
    else if component.ghgFactorUnit == "g CO2e / Stueck oder kg" then 0.001
    else 1)
    * component.scalingFactor
  else component.ghgFactor)
  * Allokation / 100;


local individualFootprints = std.map(calculateFootprint,input_values);


// calculate Scope 1-Emissions



local generateScope1Contribution(index,element) = if (element.scope == 1)
  then { name: input_names[index], value: individualFootprints[index] };



local sum(arr, n) = 
  if (n <= 0) then 0 
  else sum(arr, n-1) + arr[n-1];


local totalFootprint = sum(individualFootprints, std.length(individualFootprints));

local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;

local footprintShares = std.map(calculatePCFShare,individualFootprints);

local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;

local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));

local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));


// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != "start") && (element.scope != "control")) 
  then { name: input_names[index], value: individualFootprints[index] };


local generateScope2Contribution(index,element) = if (element.scope == 2)
  then { name: input_names[index], value: individualFootprints[index] };

local generateScope3Contribution(index,element) = if (element.scope == 3) 
  then { name: input_names[index], value: individualFootprints[index] };



local filterNull(element) = element != null;

local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));

// fetch contributions from incoming places
local filterControl(element) = element.scope == "control";

local incomingControlPlaces = std.filter(filterControl, input_values);

local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions["1"];
local getScope2Contribution(element) = element.footprintContributions["2"];
local getScope3Contribution(element) = element.footprintContributions["3"];

local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));

local footprintContributions = {
    "1": incomingScope1Contributions + scope1FromThisTransition,
    "2": incomingScope2Contributions + scope2FromThisTransition,
    "3": incomingScope3Contributions + scope3FromThisTransition,
};


// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != "control") && (input_values[index].scope != "start") then { name: element };

local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));

local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];

//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };

local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));

local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;

`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p1_key:"local output_p1_key = '-';"},fragmentVarSnippets:{output_p1_value:`local output_p1_value = { 
    scope: 'control', 
    ghgFactorUnit: 'kg CO2e / Stueck',
    ghgFactor: totalFootprint, 
    amount: 1, 
    unit: 'Stueck (Stueckzahl)', 
    type: 'Primaerdaten', 
    pds: outputPDS, 
    footprintContributions: footprintContributions,
    sankeyNodes: sankeyNodes,
    sankeyLinks: sankeyLinks,
    nodeName: transition_name
};`}},{id:"e6d19788-6dec-476e-a333-14397384d651",name:"Löten",preface:`
// calculations

// ghg factors in kg CO2e per g
local ghgFactors = {
  "NF3": 13.4,
  "SF6": 18.3,
  "CF4": 5.3
};

local calculateFootprint(component) = 
  component.amount  *
  (if component.scope == 1 then 
    (if component.unit == "mg" then 0.001 
    else if component.unit == "kg" then 1000 
    else 1)
    * ghgFactors[component.ghg]
    * component.scalingFactor
  else if component.scope == 2 then
    (if component.unit == "Wh" then 0.001
    else 1)
    * component.ghgFactor *
    (if component.ghgFactorUnit == "g CO2e / kWh" then 0.001
    else if component.ghgFactorUnit == "mg CO2e / kWh" then 0.000001
    else 1)
    * component.scalingFactor
  else if component.scope == 3 then
    (if component.unit == "mg (Gewicht)" then 0.000001
    else if component.unit == "g (Gewicht)" then 0.001
    else 1)
    * component.ghgFactor * 
    (if component.ghgFactorUnit == "mg CO2e / Stueck oder kg" then 0.000001
    else if component.ghgFactorUnit == "g CO2e / Stueck oder kg" then 0.001
    else 1)
    * component.scalingFactor
  else component.ghgFactor)
  * Allokation / 100;


local individualFootprints = std.map(calculateFootprint,input_values);


// calculate Scope 1-Emissions



local generateScope1Contribution(index,element) = if (element.scope == 1)
  then { name: input_names[index], value: individualFootprints[index] };



local sum(arr, n) = 
  if (n <= 0) then 0 
  else sum(arr, n-1) + arr[n-1];


local totalFootprint = sum(individualFootprints, std.length(individualFootprints));

local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;

local footprintShares = std.map(calculatePCFShare,individualFootprints);

local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;

local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));

local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));


// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != "start") && (element.scope != "control")) 
  then { name: input_names[index], value: individualFootprints[index] };


local generateScope2Contribution(index,element) = if (element.scope == 2)
  then { name: input_names[index], value: individualFootprints[index] };

local generateScope3Contribution(index,element) = if (element.scope == 3) 
  then { name: input_names[index], value: individualFootprints[index] };



local filterNull(element) = element != null;

local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));

// fetch contributions from incoming places
local filterControl(element) = element.scope == "control";

local incomingControlPlaces = std.filter(filterControl, input_values);

local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions["1"];
local getScope2Contribution(element) = element.footprintContributions["2"];
local getScope3Contribution(element) = element.footprintContributions["3"];

local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));

local footprintContributions = {
    "1": incomingScope1Contributions + scope1FromThisTransition,
    "2": incomingScope2Contributions + scope2FromThisTransition,
    "3": incomingScope3Contributions + scope3FromThisTransition,
};


// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != "control") && (input_values[index].scope != "start") then { name: element };

local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));

local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];

//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };

local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));

local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;

`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p2_key:"local output_p2_key = '-';"},fragmentVarSnippets:{output_p2_value:`local output_p2_value = { 
    scope: 'control', 
    ghgFactorUnit: 'kg CO2e / Stueck',
    ghgFactor: totalFootprint, 
    amount: 1, 
    unit: 'Stueck (Stueckzahl)', 
    type: 'Primaerdaten', 
    pds: outputPDS, 
    footprintContributions: footprintContributions,
    sankeyNodes: sankeyNodes,
    sankeyLinks: sankeyLinks,
    nodeName: transition_name
};`}},{id:"480049a0-4dbe-4f96-b7fc-2fdd039ed064",name:"Trennen",preface:`
// calculations

// ghg factors in kg CO2e per g
local ghgFactors = {
  "NF3": 13.4,
  "SF6": 18.3,
  "CF4": 5.3
};

local calculateFootprint(component) = 
  component.amount  *
  (if component.scope == 1 then 
    (if component.unit == "mg" then 0.001 
    else if component.unit == "kg" then 1000 
    else 1)
    * ghgFactors[component.ghg]
    * component.scalingFactor
  else if component.scope == 2 then
    (if component.unit == "Wh" then 0.001
    else 1)
    * component.ghgFactor *
    (if component.ghgFactorUnit == "g CO2e / kWh" then 0.001
    else if component.ghgFactorUnit == "mg CO2e / kWh" then 0.000001
    else 1)
    * component.scalingFactor
  else if component.scope == 3 then
    (if component.unit == "mg (Gewicht)" then 0.000001
    else if component.unit == "g (Gewicht)" then 0.001
    else 1)
    * component.ghgFactor * 
    (if component.ghgFactorUnit == "mg CO2e / Stueck oder kg" then 0.000001
    else if component.ghgFactorUnit == "g CO2e / Stueck oder kg" then 0.001
    else 1)
    * component.scalingFactor
  else component.ghgFactor)
  * Allokation / 100;


local individualFootprints = std.map(calculateFootprint,input_values);


// calculate Scope 1-Emissions



local generateScope1Contribution(index,element) = if (element.scope == 1)
  then { name: input_names[index], value: individualFootprints[index] };



local sum(arr, n) = 
  if (n <= 0) then 0 
  else sum(arr, n-1) + arr[n-1];


local totalFootprint = sum(individualFootprints, std.length(individualFootprints));

local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;

local footprintShares = std.map(calculatePCFShare,individualFootprints);

local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;

local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));

local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));


// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != "start") && (element.scope != "control")) 
  then { name: input_names[index], value: individualFootprints[index] };


local generateScope2Contribution(index,element) = if (element.scope == 2)
  then { name: input_names[index], value: individualFootprints[index] };

local generateScope3Contribution(index,element) = if (element.scope == 3) 
  then { name: input_names[index], value: individualFootprints[index] };



local filterNull(element) = element != null;

local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));

// fetch contributions from incoming places
local filterControl(element) = element.scope == "control";

local incomingControlPlaces = std.filter(filterControl, input_values);

local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions["1"];
local getScope2Contribution(element) = element.footprintContributions["2"];
local getScope3Contribution(element) = element.footprintContributions["3"];

local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));

local footprintContributions = {
    "1": incomingScope1Contributions + scope1FromThisTransition,
    "2": incomingScope2Contributions + scope2FromThisTransition,
    "3": incomingScope3Contributions + scope3FromThisTransition,
};


// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != "control") && (input_values[index].scope != "start") then { name: element };

local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));

local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];

//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };

local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));

local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;

`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_kameraanschluss_key:"local output_kameraanschluss_key = '-';"},fragmentVarSnippets:{output_kameraanschluss_value:`local output_kameraanschluss_value = { 
    scope: 'control', 
    ghgFactorUnit: 'kg CO2e / Stueck',
    ghgFactor: totalFootprint, 
    amount: 1, 
    unit: 'Stueck (Stueckzahl)', 
    type: 'Primaerdaten', 
    pds: outputPDS, 
    footprintContributions: footprintContributions,
    sankeyNodes: sankeyNodes,
    sankeyLinks: sankeyLinks,
    nodeName: transition_name
};`}}],arcs:[{id:"9005b5ac-3466-4378-8277-3332c51a2afe",filter:"$.*",fromId:"167bbbd6-95ec-4fd6-be40-26c1a487f170",toId:"67438c44-8f16-41b3-ac44-0438014633c0"},{id:"55fe0403-4136-4ace-8504-60e737ca6bef",filter:"$",fromId:"67438c44-8f16-41b3-ac44-0438014633c0",toId:"77993295-6870-418a-bd0d-b145e603292f"},{id:"e983560b-dfff-4fd4-ad18-21f9e485d471",filter:"$.*",fromId:"77993295-6870-418a-bd0d-b145e603292f",toId:"e6d19788-6dec-476e-a333-14397384d651"},{id:"c20f81e1-d19b-46b4-9262-438307da4af6",filter:"$",fromId:"e6d19788-6dec-476e-a333-14397384d651",toId:"2f69a08e-2351-4bdf-84d7-564928a829aa"},{id:"26da7c32-e6b0-4221-9a5b-2ccb9ce7560b",filter:"$.*",fromId:"2f69a08e-2351-4bdf-84d7-564928a829aa",toId:"480049a0-4dbe-4f96-b7fc-2fdd039ed064"},{id:"3826748f-3eb9-49d9-8d2a-54ae1952f284",filter:"$",fromId:"480049a0-4dbe-4f96-b7fc-2fdd039ed064",toId:"834fca4a-9079-417a-8768-afd52bcc0c94"}]},layoutData:{cells:[{type:"pn.Place",size:{width:50,height:50},position:{x:132,y:312},angle:0,tokens:1,id:"167bbbd6-95ec-4fd6-be40-26c1a487f170",jsonnetsType:"place",z:4,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Start"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:528,y:312},angle:0,tokens:0,id:"77993295-6870-418a-bd0d-b145e603292f",jsonnetsType:"place",z:5,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p1"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:876,y:312},angle:0,tokens:0,id:"2f69a08e-2351-4bdf-84d7-564928a829aa",jsonnetsType:"place",z:6,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p2"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:1284,y:312},angle:0,tokens:0,id:"834fca4a-9079-417a-8768-afd52bcc0c94",jsonnetsType:"place",z:7,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Kameraanschluss"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:300,y:312},angle:0,id:"67438c44-8f16-41b3-ac44-0438014633c0",jsonnetsType:"transition",z:8,attrs:{".label":{fill:"#7a7e9b",text:"Reinigen"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:683,y:311},angle:0,id:"e6d19788-6dec-476e-a333-14397384d651",jsonnetsType:"transition",z:9,attrs:{".label":{fill:"#7a7e9b",text:"Löten"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:1056,y:312},angle:0,id:"480049a0-4dbe-4f96-b7fc-2fdd039ed064",jsonnetsType:"transition",z:10,attrs:{".label":{fill:"#7a7e9b",text:"Trennen"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"standard.Link",source:{id:"167bbbd6-95ec-4fd6-be40-26c1a487f170",selector:".root"},target:{id:"67438c44-8f16-41b3-ac44-0438014633c0",selector:".root"},id:"9005b5ac-3466-4378-8277-3332c51a2afe",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:11,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"67438c44-8f16-41b3-ac44-0438014633c0",selector:".root"},target:{id:"77993295-6870-418a-bd0d-b145e603292f",selector:".root"},id:"55fe0403-4136-4ace-8504-60e737ca6bef",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:12,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"77993295-6870-418a-bd0d-b145e603292f",selector:".root"},target:{id:"e6d19788-6dec-476e-a333-14397384d651",selector:".root"},id:"e983560b-dfff-4fd4-ad18-21f9e485d471",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:13,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"e6d19788-6dec-476e-a333-14397384d651",selector:".root"},target:{id:"2f69a08e-2351-4bdf-84d7-564928a829aa",selector:".root"},id:"c20f81e1-d19b-46b4-9262-438307da4af6",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:14,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"2f69a08e-2351-4bdf-84d7-564928a829aa",selector:".root"},target:{id:"480049a0-4dbe-4f96-b7fc-2fdd039ed064",selector:".root"},id:"26da7c32-e6b0-4221-9a5b-2ccb9ce7560b",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:15,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"480049a0-4dbe-4f96-b7fc-2fdd039ed064",selector:".root"},target:{id:"834fca4a-9079-417a-8768-afd52bcc0c94",selector:".root"},id:"3826748f-3eb9-49d9-8d2a-54ae1952f284",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:16,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}}]}}},{name:"Leiterplatte",net:{typeData:{placeTypes:{"5309778c-2f6a-44c0-aa17-bb3f15b7a606":"start","b1987eda-8e08-4ced-b830-b6567f952ded":"control","f08869f7-1c58-44f1-a0ee-51f8d948856c":"control","4d6e9dac-bf68-4b7b-86e2-fdbbb1261448":"control","487ea0ae-a4de-43e7-bb49-5953c547398b":"control","d312e07b-ebb7-4901-baa3-4685f2ebff45":"control","d779b8e0-9388-4502-971c-bf3b4addc44e":"control","257dbecb-8cf9-4411-8f95-1c787c8333c4":"control","f5cf8f49-6389-4307-8c11-579e41685514":"control","6032860d-f236-4f7e-8be7-197934f4114b":"control","2575f3d8-5e2b-41d6-ad8f-0d085c266c07":"end"},transitionTypes:{"24b114f0-0cf6-4cac-9aad-e034420f35e3":"activity","ad131bbd-9f06-450f-92a9-02a23ff57dc9":"activity","282fe852-ee69-4f85-93c7-b8b2a3aabe06":"activity","c7c6e86a-5446-4ef5-ba45-d4547bff759d":"activity","cdfc3613-646a-45d2-80ff-d1a05eef5867":"activity","5b35b671-368c-42fc-8f5e-55acbe10d9de":"activity","5ae74711-b66a-4d67-831d-c69f190f6117":"activity","f73a9c93-3918-4ec1-9418-4c7ee1e4e1f0":"activity","cb95ac77-e8db-4099-8e29-4ac3121c2878":"activity","6c5f99f4-2b10-4dd9-8427-bd2bd18696a1":"activity"}},netData:{places:[{id:"5309778c-2f6a-44c0-aa17-bb3f15b7a606",name:"Start",marking:[{amount:1,ghgFactor:0,scope:"start",pds:0}],schema:{type:"array",title:"start",maxItems:1,items:{type:"object"},$id:"5309778c-2f6a-44c0-aa17-bb3f15b7a606"}},{id:"b1987eda-8e08-4ced-b830-b6567f952ded",name:"p1",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"b1987eda-8e08-4ced-b830-b6567f952ded"}},{id:"f08869f7-1c58-44f1-a0ee-51f8d948856c",name:"p2",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"f08869f7-1c58-44f1-a0ee-51f8d948856c"}},{id:"4d6e9dac-bf68-4b7b-86e2-fdbbb1261448",name:"p3",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"4d6e9dac-bf68-4b7b-86e2-fdbbb1261448"}},{id:"487ea0ae-a4de-43e7-bb49-5953c547398b",name:"p4",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"487ea0ae-a4de-43e7-bb49-5953c547398b"}},{id:"d312e07b-ebb7-4901-baa3-4685f2ebff45",name:"p5",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"d312e07b-ebb7-4901-baa3-4685f2ebff45"}},{id:"d779b8e0-9388-4502-971c-bf3b4addc44e",name:"p6",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"d779b8e0-9388-4502-971c-bf3b4addc44e"}},{id:"257dbecb-8cf9-4411-8f95-1c787c8333c4",name:"p7",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"257dbecb-8cf9-4411-8f95-1c787c8333c4"}},{id:"6032860d-f236-4f7e-8be7-197934f4114b",name:"p9",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"6032860d-f236-4f7e-8be7-197934f4114b"}},{id:"2575f3d8-5e2b-41d6-ad8f-0d085c266c07",name:"Leiterplatte",marking:[],schema:{type:"array",title:"end",maxItems:1,items:{type:"object"},$id:"2575f3d8-5e2b-41d6-ad8f-0d085c266c07"}},{id:"f5cf8f49-6389-4307-8c11-579e41685514",name:"p8",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"f5cf8f49-6389-4307-8c11-579e41685514"}}],transitions:[{id:"24b114f0-0cf6-4cac-9aad-e034420f35e3",name:"Lagenaufbau",preface:`
// calculations

// ghg factors in kg CO2e per g
local ghgFactors = {
  "NF3": 13.4,
  "SF6": 18.3,
  "CF4": 5.3
};

local calculateFootprint(component) = 
  component.amount  *
  (if component.scope == 1 then 
    (if component.unit == "mg" then 0.001 
    else if component.unit == "kg" then 1000 
    else 1)
    * ghgFactors[component.ghg]
    * component.scalingFactor
  else if component.scope == 2 then
    (if component.unit == "Wh" then 0.001
    else 1)
    * component.ghgFactor *
    (if component.ghgFactorUnit == "g CO2e / kWh" then 0.001
    else if component.ghgFactorUnit == "mg CO2e / kWh" then 0.000001
    else 1)
    * component.scalingFactor
  else if component.scope == 3 then
    (if component.unit == "mg (Gewicht)" then 0.000001
    else if component.unit == "g (Gewicht)" then 0.001
    else 1)
    * component.ghgFactor * 
    (if component.ghgFactorUnit == "mg CO2e / Stueck oder kg" then 0.000001
    else if component.ghgFactorUnit == "g CO2e / Stueck oder kg" then 0.001
    else 1)
    * component.scalingFactor
  else component.ghgFactor)
  * Allokation / 100;


local individualFootprints = std.map(calculateFootprint,input_values);


// calculate Scope 1-Emissions



local generateScope1Contribution(index,element) = if (element.scope == 1)
  then { name: input_names[index], value: individualFootprints[index] };



local sum(arr, n) = 
  if (n <= 0) then 0 
  else sum(arr, n-1) + arr[n-1];


local totalFootprint = sum(individualFootprints, std.length(individualFootprints));

local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;

local footprintShares = std.map(calculatePCFShare,individualFootprints);

local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;

local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));

local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));


// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != "start") && (element.scope != "control")) 
  then { name: input_names[index], value: individualFootprints[index] };


local generateScope2Contribution(index,element) = if (element.scope == 2)
  then { name: input_names[index], value: individualFootprints[index] };

local generateScope3Contribution(index,element) = if (element.scope == 3) 
  then { name: input_names[index], value: individualFootprints[index] };



local filterNull(element) = element != null;

local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));

// fetch contributions from incoming places
local filterControl(element) = element.scope == "control";

local incomingControlPlaces = std.filter(filterControl, input_values);

local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions["1"];
local getScope2Contribution(element) = element.footprintContributions["2"];
local getScope3Contribution(element) = element.footprintContributions["3"];

local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));

local footprintContributions = {
    "1": incomingScope1Contributions + scope1FromThisTransition,
    "2": incomingScope2Contributions + scope2FromThisTransition,
    "3": incomingScope3Contributions + scope3FromThisTransition,
};


// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != "control") && (input_values[index].scope != "start") then { name: element };

local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));

local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];

//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };

local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));

local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;

`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p1_key:"local output_p1_key = '-';"},fragmentVarSnippets:{output_p1_value:`local output_p1_value = { 
    scope: 'control', 
    ghgFactorUnit: 'kg CO2e / Stueck',
    ghgFactor: totalFootprint, 
    amount: 1, 
    unit: 'Stueck (Stueckzahl)', 
    type: 'Primaerdaten', 
    pds: outputPDS, 
    footprintContributions: footprintContributions,
    sankeyNodes: sankeyNodes,
    sankeyLinks: sankeyLinks,
    nodeName: transition_name
};`}},{id:"ad131bbd-9f06-450f-92a9-02a23ff57dc9",name:"Laminieren",preface:`
// calculations

// ghg factors in kg CO2e per g
local ghgFactors = {
  "NF3": 13.4,
  "SF6": 18.3,
  "CF4": 5.3
};

local calculateFootprint(component) = 
  component.amount  *
  (if component.scope == 1 then 
    (if component.unit == "mg" then 0.001 
    else if component.unit == "kg" then 1000 
    else 1)
    * ghgFactors[component.ghg]
    * component.scalingFactor
  else if component.scope == 2 then
    (if component.unit == "Wh" then 0.001
    else 1)
    * component.ghgFactor *
    (if component.ghgFactorUnit == "g CO2e / kWh" then 0.001
    else if component.ghgFactorUnit == "mg CO2e / kWh" then 0.000001
    else 1)
    * component.scalingFactor
  else if component.scope == 3 then
    (if component.unit == "mg (Gewicht)" then 0.000001
    else if component.unit == "g (Gewicht)" then 0.001
    else 1)
    * component.ghgFactor * 
    (if component.ghgFactorUnit == "mg CO2e / Stueck oder kg" then 0.000001
    else if component.ghgFactorUnit == "g CO2e / Stueck oder kg" then 0.001
    else 1)
    * component.scalingFactor
  else component.ghgFactor)
  * Allokation / 100;


local individualFootprints = std.map(calculateFootprint,input_values);


// calculate Scope 1-Emissions



local generateScope1Contribution(index,element) = if (element.scope == 1)
  then { name: input_names[index], value: individualFootprints[index] };



local sum(arr, n) = 
  if (n <= 0) then 0 
  else sum(arr, n-1) + arr[n-1];


local totalFootprint = sum(individualFootprints, std.length(individualFootprints));

local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;

local footprintShares = std.map(calculatePCFShare,individualFootprints);

local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;

local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));

local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));


// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != "start") && (element.scope != "control")) 
  then { name: input_names[index], value: individualFootprints[index] };


local generateScope2Contribution(index,element) = if (element.scope == 2)
  then { name: input_names[index], value: individualFootprints[index] };

local generateScope3Contribution(index,element) = if (element.scope == 3) 
  then { name: input_names[index], value: individualFootprints[index] };



local filterNull(element) = element != null;

local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));

// fetch contributions from incoming places
local filterControl(element) = element.scope == "control";

local incomingControlPlaces = std.filter(filterControl, input_values);

local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions["1"];
local getScope2Contribution(element) = element.footprintContributions["2"];
local getScope3Contribution(element) = element.footprintContributions["3"];

local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));

local footprintContributions = {
    "1": incomingScope1Contributions + scope1FromThisTransition,
    "2": incomingScope2Contributions + scope2FromThisTransition,
    "3": incomingScope3Contributions + scope3FromThisTransition,
};


// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != "control") && (input_values[index].scope != "start") then { name: element };

local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));

local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];

//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };

local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));

local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;

`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p2_key:"local output_p2_key = '-';"},fragmentVarSnippets:{output_p2_value:`local output_p2_value = { 
    scope: 'control', 
    ghgFactorUnit: 'kg CO2e / Stueck',
    ghgFactor: totalFootprint, 
    amount: 1, 
    unit: 'Stueck (Stueckzahl)', 
    type: 'Primaerdaten', 
    pds: outputPDS, 
    footprintContributions: footprintContributions,
    sankeyNodes: sankeyNodes,
    sankeyLinks: sankeyLinks,
    nodeName: transition_name
};`}},{id:"282fe852-ee69-4f85-93c7-b8b2a3aabe06",name:"Bohren",preface:`
// calculations

// ghg factors in kg CO2e per g
local ghgFactors = {
  "NF3": 13.4,
  "SF6": 18.3,
  "CF4": 5.3
};

local calculateFootprint(component) = 
  component.amount  *
  (if component.scope == 1 then 
    (if component.unit == "mg" then 0.001 
    else if component.unit == "kg" then 1000 
    else 1)
    * ghgFactors[component.ghg]
    * component.scalingFactor
  else if component.scope == 2 then
    (if component.unit == "Wh" then 0.001
    else 1)
    * component.ghgFactor *
    (if component.ghgFactorUnit == "g CO2e / kWh" then 0.001
    else if component.ghgFactorUnit == "mg CO2e / kWh" then 0.000001
    else 1)
    * component.scalingFactor
  else if component.scope == 3 then
    (if component.unit == "mg (Gewicht)" then 0.000001
    else if component.unit == "g (Gewicht)" then 0.001
    else 1)
    * component.ghgFactor * 
    (if component.ghgFactorUnit == "mg CO2e / Stueck oder kg" then 0.000001
    else if component.ghgFactorUnit == "g CO2e / Stueck oder kg" then 0.001
    else 1)
    * component.scalingFactor
  else component.ghgFactor)
  * Allokation / 100;


local individualFootprints = std.map(calculateFootprint,input_values);


// calculate Scope 1-Emissions



local generateScope1Contribution(index,element) = if (element.scope == 1)
  then { name: input_names[index], value: individualFootprints[index] };



local sum(arr, n) = 
  if (n <= 0) then 0 
  else sum(arr, n-1) + arr[n-1];


local totalFootprint = sum(individualFootprints, std.length(individualFootprints));

local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;

local footprintShares = std.map(calculatePCFShare,individualFootprints);

local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;

local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));

local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));


// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != "start") && (element.scope != "control")) 
  then { name: input_names[index], value: individualFootprints[index] };


local generateScope2Contribution(index,element) = if (element.scope == 2)
  then { name: input_names[index], value: individualFootprints[index] };

local generateScope3Contribution(index,element) = if (element.scope == 3) 
  then { name: input_names[index], value: individualFootprints[index] };



local filterNull(element) = element != null;

local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));

// fetch contributions from incoming places
local filterControl(element) = element.scope == "control";

local incomingControlPlaces = std.filter(filterControl, input_values);

local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions["1"];
local getScope2Contribution(element) = element.footprintContributions["2"];
local getScope3Contribution(element) = element.footprintContributions["3"];

local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));

local footprintContributions = {
    "1": incomingScope1Contributions + scope1FromThisTransition,
    "2": incomingScope2Contributions + scope2FromThisTransition,
    "3": incomingScope3Contributions + scope3FromThisTransition,
};


// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != "control") && (input_values[index].scope != "start") then { name: element };

local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));

local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];

//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };

local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));

local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;

`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p3_key:"local output_p3_key = '-';"},fragmentVarSnippets:{output_p3_value:`local output_p3_value = { 
    scope: 'control', 
    ghgFactorUnit: 'kg CO2e / Stueck',
    ghgFactor: totalFootprint, 
    amount: 1, 
    unit: 'Stueck (Stueckzahl)', 
    type: 'Primaerdaten', 
    pds: outputPDS, 
    footprintContributions: footprintContributions,
    sankeyNodes: sankeyNodes,
    sankeyLinks: sankeyLinks,
    nodeName: transition_name
};`}},{id:"c7c6e86a-5446-4ef5-ba45-d4547bff759d",name:"Plating",preface:`
// calculations

// ghg factors in kg CO2e per g
local ghgFactors = {
  "NF3": 13.4,
  "SF6": 18.3,
  "CF4": 5.3
};

local calculateFootprint(component) = 
  component.amount  *
  (if component.scope == 1 then 
    (if component.unit == "mg" then 0.001 
    else if component.unit == "kg" then 1000 
    else 1)
    * ghgFactors[component.ghg]
    * component.scalingFactor
  else if component.scope == 2 then
    (if component.unit == "Wh" then 0.001
    else 1)
    * component.ghgFactor *
    (if component.ghgFactorUnit == "g CO2e / kWh" then 0.001
    else if component.ghgFactorUnit == "mg CO2e / kWh" then 0.000001
    else 1)
    * component.scalingFactor
  else if component.scope == 3 then
    (if component.unit == "mg (Gewicht)" then 0.000001
    else if component.unit == "g (Gewicht)" then 0.001
    else 1)
    * component.ghgFactor * 
    (if component.ghgFactorUnit == "mg CO2e / Stueck oder kg" then 0.000001
    else if component.ghgFactorUnit == "g CO2e / Stueck oder kg" then 0.001
    else 1)
    * component.scalingFactor
  else component.ghgFactor)
  * Allokation / 100;


local individualFootprints = std.map(calculateFootprint,input_values);


// calculate Scope 1-Emissions



local generateScope1Contribution(index,element) = if (element.scope == 1)
  then { name: input_names[index], value: individualFootprints[index] };



local sum(arr, n) = 
  if (n <= 0) then 0 
  else sum(arr, n-1) + arr[n-1];


local totalFootprint = sum(individualFootprints, std.length(individualFootprints));

local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;

local footprintShares = std.map(calculatePCFShare,individualFootprints);

local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;

local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));

local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));


// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != "start") && (element.scope != "control")) 
  then { name: input_names[index], value: individualFootprints[index] };


local generateScope2Contribution(index,element) = if (element.scope == 2)
  then { name: input_names[index], value: individualFootprints[index] };

local generateScope3Contribution(index,element) = if (element.scope == 3) 
  then { name: input_names[index], value: individualFootprints[index] };



local filterNull(element) = element != null;

local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));

// fetch contributions from incoming places
local filterControl(element) = element.scope == "control";

local incomingControlPlaces = std.filter(filterControl, input_values);

local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions["1"];
local getScope2Contribution(element) = element.footprintContributions["2"];
local getScope3Contribution(element) = element.footprintContributions["3"];

local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));

local footprintContributions = {
    "1": incomingScope1Contributions + scope1FromThisTransition,
    "2": incomingScope2Contributions + scope2FromThisTransition,
    "3": incomingScope3Contributions + scope3FromThisTransition,
};


// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != "control") && (input_values[index].scope != "start") then { name: element };

local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));

local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];

//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };

local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));

local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;

`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p4_key:"local output_p4_key = '-';"},fragmentVarSnippets:{output_p4_value:`local output_p4_value = { 
    scope: 'control', 
    ghgFactorUnit: 'kg CO2e / Stueck',
    ghgFactor: totalFootprint, 
    amount: 1, 
    unit: 'Stueck (Stueckzahl)', 
    type: 'Primaerdaten', 
    pds: outputPDS, 
    footprintContributions: footprintContributions,
    sankeyNodes: sankeyNodes,
    sankeyLinks: sankeyLinks,
    nodeName: transition_name
};`}},{id:"cdfc3613-646a-45d2-80ff-d1a05eef5867",name:"Lötstoppmaske",preface:`
// calculations

// ghg factors in kg CO2e per g
local ghgFactors = {
  "NF3": 13.4,
  "SF6": 18.3,
  "CF4": 5.3
};

local calculateFootprint(component) = 
  component.amount  *
  (if component.scope == 1 then 
    (if component.unit == "mg" then 0.001 
    else if component.unit == "kg" then 1000 
    else 1)
    * ghgFactors[component.ghg]
    * component.scalingFactor
  else if component.scope == 2 then
    (if component.unit == "Wh" then 0.001
    else 1)
    * component.ghgFactor *
    (if component.ghgFactorUnit == "g CO2e / kWh" then 0.001
    else if component.ghgFactorUnit == "mg CO2e / kWh" then 0.000001
    else 1)
    * component.scalingFactor
  else if component.scope == 3 then
    (if component.unit == "mg (Gewicht)" then 0.000001
    else if component.unit == "g (Gewicht)" then 0.001
    else 1)
    * component.ghgFactor * 
    (if component.ghgFactorUnit == "mg CO2e / Stueck oder kg" then 0.000001
    else if component.ghgFactorUnit == "g CO2e / Stueck oder kg" then 0.001
    else 1)
    * component.scalingFactor
  else component.ghgFactor)
  * Allokation / 100;


local individualFootprints = std.map(calculateFootprint,input_values);


// calculate Scope 1-Emissions



local generateScope1Contribution(index,element) = if (element.scope == 1)
  then { name: input_names[index], value: individualFootprints[index] };



local sum(arr, n) = 
  if (n <= 0) then 0 
  else sum(arr, n-1) + arr[n-1];


local totalFootprint = sum(individualFootprints, std.length(individualFootprints));

local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;

local footprintShares = std.map(calculatePCFShare,individualFootprints);

local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;

local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));

local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));


// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != "start") && (element.scope != "control")) 
  then { name: input_names[index], value: individualFootprints[index] };


local generateScope2Contribution(index,element) = if (element.scope == 2)
  then { name: input_names[index], value: individualFootprints[index] };

local generateScope3Contribution(index,element) = if (element.scope == 3) 
  then { name: input_names[index], value: individualFootprints[index] };



local filterNull(element) = element != null;

local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));

// fetch contributions from incoming places
local filterControl(element) = element.scope == "control";

local incomingControlPlaces = std.filter(filterControl, input_values);

local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions["1"];
local getScope2Contribution(element) = element.footprintContributions["2"];
local getScope3Contribution(element) = element.footprintContributions["3"];

local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));

local footprintContributions = {
    "1": incomingScope1Contributions + scope1FromThisTransition,
    "2": incomingScope2Contributions + scope2FromThisTransition,
    "3": incomingScope3Contributions + scope3FromThisTransition,
};


// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != "control") && (input_values[index].scope != "start") then { name: element };

local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));

local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];

//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };

local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));

local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;

`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p5_key:"local output_p5_key = '-';"},fragmentVarSnippets:{output_p5_value:`local output_p5_value = { 
    scope: 'control', 
    ghgFactorUnit: 'kg CO2e / Stueck',
    ghgFactor: totalFootprint, 
    amount: 1, 
    unit: 'Stueck (Stueckzahl)', 
    type: 'Primaerdaten', 
    pds: outputPDS, 
    footprintContributions: footprintContributions,
    sankeyNodes: sankeyNodes,
    sankeyLinks: sankeyLinks,
    nodeName: transition_name
};`}},{id:"5b35b671-368c-42fc-8f5e-55acbe10d9de",name:"Lithografie",preface:`
// calculations

// ghg factors in kg CO2e per g
local ghgFactors = {
  "NF3": 13.4,
  "SF6": 18.3,
  "CF4": 5.3
};

local calculateFootprint(component) = 
  component.amount  *
  (if component.scope == 1 then 
    (if component.unit == "mg" then 0.001 
    else if component.unit == "kg" then 1000 
    else 1)
    * ghgFactors[component.ghg]
    * component.scalingFactor
  else if component.scope == 2 then
    (if component.unit == "Wh" then 0.001
    else 1)
    * component.ghgFactor *
    (if component.ghgFactorUnit == "g CO2e / kWh" then 0.001
    else if component.ghgFactorUnit == "mg CO2e / kWh" then 0.000001
    else 1)
    * component.scalingFactor
  else if component.scope == 3 then
    (if component.unit == "mg (Gewicht)" then 0.000001
    else if component.unit == "g (Gewicht)" then 0.001
    else 1)
    * component.ghgFactor * 
    (if component.ghgFactorUnit == "mg CO2e / Stueck oder kg" then 0.000001
    else if component.ghgFactorUnit == "g CO2e / Stueck oder kg" then 0.001
    else 1)
    * component.scalingFactor
  else component.ghgFactor)
  * Allokation / 100;


local individualFootprints = std.map(calculateFootprint,input_values);


// calculate Scope 1-Emissions



local generateScope1Contribution(index,element) = if (element.scope == 1)
  then { name: input_names[index], value: individualFootprints[index] };



local sum(arr, n) = 
  if (n <= 0) then 0 
  else sum(arr, n-1) + arr[n-1];


local totalFootprint = sum(individualFootprints, std.length(individualFootprints));

local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;

local footprintShares = std.map(calculatePCFShare,individualFootprints);

local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;

local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));

local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));


// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != "start") && (element.scope != "control")) 
  then { name: input_names[index], value: individualFootprints[index] };


local generateScope2Contribution(index,element) = if (element.scope == 2)
  then { name: input_names[index], value: individualFootprints[index] };

local generateScope3Contribution(index,element) = if (element.scope == 3) 
  then { name: input_names[index], value: individualFootprints[index] };



local filterNull(element) = element != null;

local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));

// fetch contributions from incoming places
local filterControl(element) = element.scope == "control";

local incomingControlPlaces = std.filter(filterControl, input_values);

local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions["1"];
local getScope2Contribution(element) = element.footprintContributions["2"];
local getScope3Contribution(element) = element.footprintContributions["3"];

local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));

local footprintContributions = {
    "1": incomingScope1Contributions + scope1FromThisTransition,
    "2": incomingScope2Contributions + scope2FromThisTransition,
    "3": incomingScope3Contributions + scope3FromThisTransition,
};


// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != "control") && (input_values[index].scope != "start") then { name: element };

local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));

local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];

//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };

local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));

local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;

`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p6_key:"local output_p6_key = '-';"},fragmentVarSnippets:{output_p6_value:`local output_p6_value = { 
    scope: 'control', 
    ghgFactorUnit: 'kg CO2e / Stueck',
    ghgFactor: totalFootprint, 
    amount: 1, 
    unit: 'Stueck (Stueckzahl)', 
    type: 'Primaerdaten', 
    pds: outputPDS, 
    footprintContributions: footprintContributions,
    sankeyNodes: sankeyNodes,
    sankeyLinks: sankeyLinks,
    nodeName: transition_name
};`}},{id:"5ae74711-b66a-4d67-831d-c69f190f6117",name:"Nachbearbeiten",preface:`
// calculations

// ghg factors in kg CO2e per g
local ghgFactors = {
  "NF3": 13.4,
  "SF6": 18.3,
  "CF4": 5.3
};

local calculateFootprint(component) = 
  component.amount  *
  (if component.scope == 1 then 
    (if component.unit == "mg" then 0.001 
    else if component.unit == "kg" then 1000 
    else 1)
    * ghgFactors[component.ghg]
    * component.scalingFactor
  else if component.scope == 2 then
    (if component.unit == "Wh" then 0.001
    else 1)
    * component.ghgFactor *
    (if component.ghgFactorUnit == "g CO2e / kWh" then 0.001
    else if component.ghgFactorUnit == "mg CO2e / kWh" then 0.000001
    else 1)
    * component.scalingFactor
  else if component.scope == 3 then
    (if component.unit == "mg (Gewicht)" then 0.000001
    else if component.unit == "g (Gewicht)" then 0.001
    else 1)
    * component.ghgFactor * 
    (if component.ghgFactorUnit == "mg CO2e / Stueck oder kg" then 0.000001
    else if component.ghgFactorUnit == "g CO2e / Stueck oder kg" then 0.001
    else 1)
    * component.scalingFactor
  else component.ghgFactor)
  * Allokation / 100;


local individualFootprints = std.map(calculateFootprint,input_values);


// calculate Scope 1-Emissions



local generateScope1Contribution(index,element) = if (element.scope == 1)
  then { name: input_names[index], value: individualFootprints[index] };



local sum(arr, n) = 
  if (n <= 0) then 0 
  else sum(arr, n-1) + arr[n-1];


local totalFootprint = sum(individualFootprints, std.length(individualFootprints));

local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;

local footprintShares = std.map(calculatePCFShare,individualFootprints);

local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;

local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));

local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));


// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != "start") && (element.scope != "control")) 
  then { name: input_names[index], value: individualFootprints[index] };


local generateScope2Contribution(index,element) = if (element.scope == 2)
  then { name: input_names[index], value: individualFootprints[index] };

local generateScope3Contribution(index,element) = if (element.scope == 3) 
  then { name: input_names[index], value: individualFootprints[index] };



local filterNull(element) = element != null;

local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));

// fetch contributions from incoming places
local filterControl(element) = element.scope == "control";

local incomingControlPlaces = std.filter(filterControl, input_values);

local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions["1"];
local getScope2Contribution(element) = element.footprintContributions["2"];
local getScope3Contribution(element) = element.footprintContributions["3"];

local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));

local footprintContributions = {
    "1": incomingScope1Contributions + scope1FromThisTransition,
    "2": incomingScope2Contributions + scope2FromThisTransition,
    "3": incomingScope3Contributions + scope3FromThisTransition,
};


// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != "control") && (input_values[index].scope != "start") then { name: element };

local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));

local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];

//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };

local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));

local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;

`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p7_key:"local output_p7_key = '-';"},fragmentVarSnippets:{output_p7_value:`local output_p7_value = { 
    scope: 'control', 
    ghgFactorUnit: 'kg CO2e / Stueck',
    ghgFactor: totalFootprint, 
    amount: 1, 
    unit: 'Stueck (Stueckzahl)', 
    type: 'Primaerdaten', 
    pds: outputPDS, 
    footprintContributions: footprintContributions,
    sankeyNodes: sankeyNodes,
    sankeyLinks: sankeyLinks,
    nodeName: transition_name
};`}},{id:"f73a9c93-3918-4ec1-9418-4c7ee1e4e1f0",name:"Testen",preface:`
// calculations

// ghg factors in kg CO2e per g
local ghgFactors = {
  "NF3": 13.4,
  "SF6": 18.3,
  "CF4": 5.3
};

local calculateFootprint(component) = 
  component.amount  *
  (if component.scope == 1 then 
    (if component.unit == "mg" then 0.001 
    else if component.unit == "kg" then 1000 
    else 1)
    * ghgFactors[component.ghg]
    * component.scalingFactor
  else if component.scope == 2 then
    (if component.unit == "Wh" then 0.001
    else 1)
    * component.ghgFactor *
    (if component.ghgFactorUnit == "g CO2e / kWh" then 0.001
    else if component.ghgFactorUnit == "mg CO2e / kWh" then 0.000001
    else 1)
    * component.scalingFactor
  else if component.scope == 3 then
    (if component.unit == "mg (Gewicht)" then 0.000001
    else if component.unit == "g (Gewicht)" then 0.001
    else 1)
    * component.ghgFactor * 
    (if component.ghgFactorUnit == "mg CO2e / Stueck oder kg" then 0.000001
    else if component.ghgFactorUnit == "g CO2e / Stueck oder kg" then 0.001
    else 1)
    * component.scalingFactor
  else component.ghgFactor)
  * Allokation / 100;


local individualFootprints = std.map(calculateFootprint,input_values);


// calculate Scope 1-Emissions



local generateScope1Contribution(index,element) = if (element.scope == 1)
  then { name: input_names[index], value: individualFootprints[index] };



local sum(arr, n) = 
  if (n <= 0) then 0 
  else sum(arr, n-1) + arr[n-1];


local totalFootprint = sum(individualFootprints, std.length(individualFootprints));

local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;

local footprintShares = std.map(calculatePCFShare,individualFootprints);

local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;

local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));

local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));


// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != "start") && (element.scope != "control")) 
  then { name: input_names[index], value: individualFootprints[index] };


local generateScope2Contribution(index,element) = if (element.scope == 2)
  then { name: input_names[index], value: individualFootprints[index] };

local generateScope3Contribution(index,element) = if (element.scope == 3) 
  then { name: input_names[index], value: individualFootprints[index] };



local filterNull(element) = element != null;

local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));

// fetch contributions from incoming places
local filterControl(element) = element.scope == "control";

local incomingControlPlaces = std.filter(filterControl, input_values);

local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions["1"];
local getScope2Contribution(element) = element.footprintContributions["2"];
local getScope3Contribution(element) = element.footprintContributions["3"];

local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));

local footprintContributions = {
    "1": incomingScope1Contributions + scope1FromThisTransition,
    "2": incomingScope2Contributions + scope2FromThisTransition,
    "3": incomingScope3Contributions + scope3FromThisTransition,
};


// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != "control") && (input_values[index].scope != "start") then { name: element };

local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));

local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];

//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };

local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));

local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;

`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p8_key:"local output_p8_key = '-';"},fragmentVarSnippets:{output_p8_value:`local output_p8_value = { 
    scope: 'control', 
    ghgFactorUnit: 'kg CO2e / Stueck',
    ghgFactor: totalFootprint, 
    amount: 1, 
    unit: 'Stueck (Stueckzahl)', 
    type: 'Primaerdaten', 
    pds: outputPDS, 
    footprintContributions: footprintContributions,
    sankeyNodes: sankeyNodes,
    sankeyLinks: sankeyLinks,
    nodeName: transition_name
};`}},{id:"cb95ac77-e8db-4099-8e29-4ac3121c2878",name:"Oberflächenfinish",preface:`
// calculations

// ghg factors in kg CO2e per g
local ghgFactors = {
  "NF3": 13.4,
  "SF6": 18.3,
  "CF4": 5.3
};

local calculateFootprint(component) = 
  component.amount  *
  (if component.scope == 1 then 
    (if component.unit == "mg" then 0.001 
    else if component.unit == "kg" then 1000 
    else 1)
    * ghgFactors[component.ghg]
    * component.scalingFactor
  else if component.scope == 2 then
    (if component.unit == "Wh" then 0.001
    else 1)
    * component.ghgFactor *
    (if component.ghgFactorUnit == "g CO2e / kWh" then 0.001
    else if component.ghgFactorUnit == "mg CO2e / kWh" then 0.000001
    else 1)
    * component.scalingFactor
  else if component.scope == 3 then
    (if component.unit == "mg (Gewicht)" then 0.000001
    else if component.unit == "g (Gewicht)" then 0.001
    else 1)
    * component.ghgFactor * 
    (if component.ghgFactorUnit == "mg CO2e / Stueck oder kg" then 0.000001
    else if component.ghgFactorUnit == "g CO2e / Stueck oder kg" then 0.001
    else 1)
    * component.scalingFactor
  else component.ghgFactor)
  * Allokation / 100;


local individualFootprints = std.map(calculateFootprint,input_values);


// calculate Scope 1-Emissions



local generateScope1Contribution(index,element) = if (element.scope == 1)
  then { name: input_names[index], value: individualFootprints[index] };



local sum(arr, n) = 
  if (n <= 0) then 0 
  else sum(arr, n-1) + arr[n-1];


local totalFootprint = sum(individualFootprints, std.length(individualFootprints));

local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;

local footprintShares = std.map(calculatePCFShare,individualFootprints);

local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;

local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));

local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));


// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != "start") && (element.scope != "control")) 
  then { name: input_names[index], value: individualFootprints[index] };


local generateScope2Contribution(index,element) = if (element.scope == 2)
  then { name: input_names[index], value: individualFootprints[index] };

local generateScope3Contribution(index,element) = if (element.scope == 3) 
  then { name: input_names[index], value: individualFootprints[index] };



local filterNull(element) = element != null;

local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));

// fetch contributions from incoming places
local filterControl(element) = element.scope == "control";

local incomingControlPlaces = std.filter(filterControl, input_values);

local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions["1"];
local getScope2Contribution(element) = element.footprintContributions["2"];
local getScope3Contribution(element) = element.footprintContributions["3"];

local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));

local footprintContributions = {
    "1": incomingScope1Contributions + scope1FromThisTransition,
    "2": incomingScope2Contributions + scope2FromThisTransition,
    "3": incomingScope3Contributions + scope3FromThisTransition,
};


// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != "control") && (input_values[index].scope != "start") then { name: element };

local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));

local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];

//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };

local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));

local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;

`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p9_key:"local output_p9_key = '-';"},fragmentVarSnippets:{output_p9_value:`local output_p9_value = { 
    scope: 'control', 
    ghgFactorUnit: 'kg CO2e / Stueck',
    ghgFactor: totalFootprint, 
    amount: 1, 
    unit: 'Stueck (Stueckzahl)', 
    type: 'Primaerdaten', 
    pds: outputPDS, 
    footprintContributions: footprintContributions,
    sankeyNodes: sankeyNodes,
    sankeyLinks: sankeyLinks,
    nodeName: transition_name
};`}},{id:"6c5f99f4-2b10-4dd9-8427-bd2bd18696a1",name:"Legendendruck",preface:`
// calculations

// ghg factors in kg CO2e per g
local ghgFactors = {
  "NF3": 13.4,
  "SF6": 18.3,
  "CF4": 5.3
};

local calculateFootprint(component) = 
  component.amount  *
  (if component.scope == 1 then 
    (if component.unit == "mg" then 0.001 
    else if component.unit == "kg" then 1000 
    else 1)
    * ghgFactors[component.ghg]
    * component.scalingFactor
  else if component.scope == 2 then
    (if component.unit == "Wh" then 0.001
    else 1)
    * component.ghgFactor *
    (if component.ghgFactorUnit == "g CO2e / kWh" then 0.001
    else if component.ghgFactorUnit == "mg CO2e / kWh" then 0.000001
    else 1)
    * component.scalingFactor
  else if component.scope == 3 then
    (if component.unit == "mg (Gewicht)" then 0.000001
    else if component.unit == "g (Gewicht)" then 0.001
    else 1)
    * component.ghgFactor * 
    (if component.ghgFactorUnit == "mg CO2e / Stueck oder kg" then 0.000001
    else if component.ghgFactorUnit == "g CO2e / Stueck oder kg" then 0.001
    else 1)
    * component.scalingFactor
  else component.ghgFactor)
  * Allokation / 100;


local individualFootprints = std.map(calculateFootprint,input_values);


// calculate Scope 1-Emissions



local generateScope1Contribution(index,element) = if (element.scope == 1)
  then { name: input_names[index], value: individualFootprints[index] };



local sum(arr, n) = 
  if (n <= 0) then 0 
  else sum(arr, n-1) + arr[n-1];


local totalFootprint = sum(individualFootprints, std.length(individualFootprints));

local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;

local footprintShares = std.map(calculatePCFShare,individualFootprints);

local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;

local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));

local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));


// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != "start") && (element.scope != "control")) 
  then { name: input_names[index], value: individualFootprints[index] };


local generateScope2Contribution(index,element) = if (element.scope == 2)
  then { name: input_names[index], value: individualFootprints[index] };

local generateScope3Contribution(index,element) = if (element.scope == 3) 
  then { name: input_names[index], value: individualFootprints[index] };



local filterNull(element) = element != null;

local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));

// fetch contributions from incoming places
local filterControl(element) = element.scope == "control";

local incomingControlPlaces = std.filter(filterControl, input_values);

local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions["1"];
local getScope2Contribution(element) = element.footprintContributions["2"];
local getScope3Contribution(element) = element.footprintContributions["3"];

local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));

local footprintContributions = {
    "1": incomingScope1Contributions + scope1FromThisTransition,
    "2": incomingScope2Contributions + scope2FromThisTransition,
    "3": incomingScope3Contributions + scope3FromThisTransition,
};


// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != "control") && (input_values[index].scope != "start") then { name: element };

local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));

local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];

//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };

local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));

local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;

`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_leiterplatte_key:"local output_leiterplatte_key = '-';"},fragmentVarSnippets:{output_leiterplatte_value:`local output_leiterplatte_value = { 
    scope: 'control', 
    ghgFactorUnit: 'kg CO2e / Stueck',
    ghgFactor: totalFootprint, 
    amount: 1, 
    unit: 'Stueck (Stueckzahl)', 
    type: 'Primaerdaten', 
    pds: outputPDS, 
    footprintContributions: footprintContributions,
    sankeyNodes: sankeyNodes,
    sankeyLinks: sankeyLinks,
    nodeName: transition_name
};`}}],arcs:[{id:"ebc2cbb5-32c4-4d19-ae03-a525b2cafe46",filter:"$.*",fromId:"5309778c-2f6a-44c0-aa17-bb3f15b7a606",toId:"24b114f0-0cf6-4cac-9aad-e034420f35e3"},{id:"189b44da-07d6-4bf6-9512-b47cc9a673f7",filter:"$",fromId:"24b114f0-0cf6-4cac-9aad-e034420f35e3",toId:"b1987eda-8e08-4ced-b830-b6567f952ded"},{id:"394700a9-4fa6-4f52-b5c5-a1ec92fbf559",filter:"$.*",fromId:"b1987eda-8e08-4ced-b830-b6567f952ded",toId:"ad131bbd-9f06-450f-92a9-02a23ff57dc9"},{id:"663eb46f-5c4e-4050-a69d-ebc8c7d17f6f",filter:"$",fromId:"ad131bbd-9f06-450f-92a9-02a23ff57dc9",toId:"f08869f7-1c58-44f1-a0ee-51f8d948856c"},{id:"8eb7b925-fd54-489c-9a8b-8c5034a857bf",filter:"$.*",fromId:"f08869f7-1c58-44f1-a0ee-51f8d948856c",toId:"282fe852-ee69-4f85-93c7-b8b2a3aabe06"},{id:"33c16aeb-6a8c-407c-b847-00e69c01c724",filter:"$",fromId:"282fe852-ee69-4f85-93c7-b8b2a3aabe06",toId:"4d6e9dac-bf68-4b7b-86e2-fdbbb1261448"},{id:"ea62e657-95a9-4e5f-97d7-ab9d18e9966d",filter:"$.*",fromId:"4d6e9dac-bf68-4b7b-86e2-fdbbb1261448",toId:"c7c6e86a-5446-4ef5-ba45-d4547bff759d"},{id:"0d1cd340-ac29-415b-bf07-c97c8dd2144c",filter:"$",fromId:"c7c6e86a-5446-4ef5-ba45-d4547bff759d",toId:"487ea0ae-a4de-43e7-bb49-5953c547398b"},{id:"ecd4967b-149e-4db8-adbb-ecbe792c50b8",filter:"$.*",fromId:"487ea0ae-a4de-43e7-bb49-5953c547398b",toId:"cdfc3613-646a-45d2-80ff-d1a05eef5867"},{id:"8d9fb05d-0763-4c85-b354-d5cd9f5e2c71",filter:"$",fromId:"cdfc3613-646a-45d2-80ff-d1a05eef5867",toId:"d312e07b-ebb7-4901-baa3-4685f2ebff45"},{id:"1cbde8e6-32f6-45e5-a766-b144951b18fc",filter:"$.*",fromId:"d312e07b-ebb7-4901-baa3-4685f2ebff45",toId:"5b35b671-368c-42fc-8f5e-55acbe10d9de"},{id:"33ad877d-e190-4b1c-8c08-994cfb8057fb",filter:"$",fromId:"5b35b671-368c-42fc-8f5e-55acbe10d9de",toId:"d779b8e0-9388-4502-971c-bf3b4addc44e"},{id:"b7df865d-b5f2-4daf-9939-eb6605863784",filter:"$.*",fromId:"d779b8e0-9388-4502-971c-bf3b4addc44e",toId:"5ae74711-b66a-4d67-831d-c69f190f6117"},{id:"6a9ed89c-33f7-4132-89db-a3f4aa9706a7",filter:"$",fromId:"5ae74711-b66a-4d67-831d-c69f190f6117",toId:"257dbecb-8cf9-4411-8f95-1c787c8333c4"},{id:"6eab3779-35ef-4ca2-a4ff-ec648fde309a",filter:"$.*",fromId:"257dbecb-8cf9-4411-8f95-1c787c8333c4",toId:"f73a9c93-3918-4ec1-9418-4c7ee1e4e1f0"},{id:"2899503b-e44b-4994-8705-34d457f601fc",filter:"$",fromId:"f73a9c93-3918-4ec1-9418-4c7ee1e4e1f0",toId:"f5cf8f49-6389-4307-8c11-579e41685514"},{id:"a019943d-d5e9-4a95-9172-5f7fb1564528",filter:"$.*",fromId:"f5cf8f49-6389-4307-8c11-579e41685514",toId:"cb95ac77-e8db-4099-8e29-4ac3121c2878"},{id:"12d77567-c04b-4668-a54c-cd27c8700f54",filter:"$",fromId:"cb95ac77-e8db-4099-8e29-4ac3121c2878",toId:"6032860d-f236-4f7e-8be7-197934f4114b"},{id:"71278fb4-3e78-421a-98d2-8e0fe0c1046f",filter:"$.*",fromId:"6032860d-f236-4f7e-8be7-197934f4114b",toId:"6c5f99f4-2b10-4dd9-8427-bd2bd18696a1"},{id:"fb9cf236-7666-4473-9c86-9a8679a003b3",filter:"$",fromId:"6c5f99f4-2b10-4dd9-8427-bd2bd18696a1",toId:"2575f3d8-5e2b-41d6-ad8f-0d085c266c07"}]},layoutData:{cells:[{type:"pn.Place",size:{width:50,height:50},position:{x:108,y:276},angle:0,tokens:1,id:"5309778c-2f6a-44c0-aa17-bb3f15b7a606",jsonnetsType:"place",z:11,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Start"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:480,y:276},angle:0,tokens:0,id:"b1987eda-8e08-4ced-b830-b6567f952ded",jsonnetsType:"place",z:12,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p1"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:888,y:276},angle:0,tokens:0,id:"f08869f7-1c58-44f1-a0ee-51f8d948856c",jsonnetsType:"place",z:13,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p2"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:1344,y:276},angle:0,tokens:0,id:"4d6e9dac-bf68-4b7b-86e2-fdbbb1261448",jsonnetsType:"place",z:14,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p3"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:1344,y:564},angle:0,tokens:0,id:"487ea0ae-a4de-43e7-bb49-5953c547398b",jsonnetsType:"place",z:15,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p4"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:876,y:564},angle:0,tokens:0,id:"d312e07b-ebb7-4901-baa3-4685f2ebff45",jsonnetsType:"place",z:16,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p5"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:468,y:564},angle:0,tokens:0,id:"d779b8e0-9388-4502-971c-bf3b4addc44e",jsonnetsType:"place",z:17,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p6"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:96,y:564},angle:0,tokens:0,id:"257dbecb-8cf9-4411-8f95-1c787c8333c4",jsonnetsType:"place",z:18,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p7"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:480,y:912},angle:0,tokens:0,id:"6032860d-f236-4f7e-8be7-197934f4114b",jsonnetsType:"place",z:19,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p9"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:876,y:912},angle:0,tokens:0,id:"2575f3d8-5e2b-41d6-ad8f-0d085c266c07",jsonnetsType:"place",z:20,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Leiterplatte"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:96,y:912},angle:0,tokens:0,id:"f5cf8f49-6389-4307-8c11-579e41685514",jsonnetsType:"place",z:21,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p8"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:275,y:275},angle:0,id:"24b114f0-0cf6-4cac-9aad-e034420f35e3",jsonnetsType:"transition",z:22,attrs:{".label":{fill:"#7a7e9b",text:"Lagenaufbau"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:648,y:276},angle:0,id:"ad131bbd-9f06-450f-92a9-02a23ff57dc9",jsonnetsType:"transition",z:23,attrs:{".label":{fill:"#7a7e9b",text:"Laminieren"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:1068,y:276},angle:0,id:"282fe852-ee69-4f85-93c7-b8b2a3aabe06",jsonnetsType:"transition",z:24,attrs:{".label":{fill:"#7a7e9b",text:"Bohren"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:1320,y:420},angle:0,id:"c7c6e86a-5446-4ef5-ba45-d4547bff759d",jsonnetsType:"transition",z:25,attrs:{".label":{fill:"#7a7e9b",text:"Plating"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:1068,y:564},angle:0,id:"cdfc3613-646a-45d2-80ff-d1a05eef5867",jsonnetsType:"transition",z:26,attrs:{".label":{fill:"#7a7e9b",text:"Lötstoppmaske"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:648,y:564},angle:0,id:"5b35b671-368c-42fc-8f5e-55acbe10d9de",jsonnetsType:"transition",z:27,attrs:{".label":{fill:"#7a7e9b",text:"Lithografie"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:264,y:564},angle:0,id:"5ae74711-b66a-4d67-831d-c69f190f6117",jsonnetsType:"transition",z:28,attrs:{".label":{fill:"#7a7e9b",text:"Nachbearbeiten"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:72,y:744},angle:0,id:"f73a9c93-3918-4ec1-9418-4c7ee1e4e1f0",jsonnetsType:"transition",z:29,attrs:{".label":{fill:"#7a7e9b",text:"Testen"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:252,y:912},angle:0,id:"cb95ac77-e8db-4099-8e29-4ac3121c2878",jsonnetsType:"transition",z:30,attrs:{".label":{fill:"#7a7e9b",text:"Oberflächenfinish"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:648,y:912},angle:0,id:"6c5f99f4-2b10-4dd9-8427-bd2bd18696a1",jsonnetsType:"transition",z:31,attrs:{".label":{fill:"#7a7e9b",text:"Legendendruck"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"standard.Link",source:{id:"5309778c-2f6a-44c0-aa17-bb3f15b7a606",selector:".root"},target:{id:"24b114f0-0cf6-4cac-9aad-e034420f35e3",selector:".root"},id:"ebc2cbb5-32c4-4d19-ae03-a525b2cafe46",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:32,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"24b114f0-0cf6-4cac-9aad-e034420f35e3",selector:".root"},target:{id:"b1987eda-8e08-4ced-b830-b6567f952ded",selector:".root"},id:"189b44da-07d6-4bf6-9512-b47cc9a673f7",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:33,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"b1987eda-8e08-4ced-b830-b6567f952ded",selector:".root"},target:{id:"ad131bbd-9f06-450f-92a9-02a23ff57dc9",selector:".root"},id:"394700a9-4fa6-4f52-b5c5-a1ec92fbf559",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:34,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"ad131bbd-9f06-450f-92a9-02a23ff57dc9",selector:".root"},target:{id:"f08869f7-1c58-44f1-a0ee-51f8d948856c",selector:".root"},id:"663eb46f-5c4e-4050-a69d-ebc8c7d17f6f",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:35,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"f08869f7-1c58-44f1-a0ee-51f8d948856c",selector:".root"},target:{id:"282fe852-ee69-4f85-93c7-b8b2a3aabe06",selector:".root"},id:"8eb7b925-fd54-489c-9a8b-8c5034a857bf",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:36,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"282fe852-ee69-4f85-93c7-b8b2a3aabe06",selector:".root"},target:{id:"4d6e9dac-bf68-4b7b-86e2-fdbbb1261448",selector:".root"},id:"33c16aeb-6a8c-407c-b847-00e69c01c724",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:37,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"4d6e9dac-bf68-4b7b-86e2-fdbbb1261448",selector:".root"},target:{id:"c7c6e86a-5446-4ef5-ba45-d4547bff759d",selector:".root"},id:"ea62e657-95a9-4e5f-97d7-ab9d18e9966d",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:38,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"c7c6e86a-5446-4ef5-ba45-d4547bff759d",selector:".root"},target:{id:"487ea0ae-a4de-43e7-bb49-5953c547398b",selector:".root"},id:"0d1cd340-ac29-415b-bf07-c97c8dd2144c",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:39,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"487ea0ae-a4de-43e7-bb49-5953c547398b",selector:".root"},target:{id:"cdfc3613-646a-45d2-80ff-d1a05eef5867",selector:".root"},id:"ecd4967b-149e-4db8-adbb-ecbe792c50b8",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:40,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"cdfc3613-646a-45d2-80ff-d1a05eef5867",selector:".root"},target:{id:"d312e07b-ebb7-4901-baa3-4685f2ebff45",selector:".root"},id:"8d9fb05d-0763-4c85-b354-d5cd9f5e2c71",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:41,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"d312e07b-ebb7-4901-baa3-4685f2ebff45",selector:".root"},target:{id:"5b35b671-368c-42fc-8f5e-55acbe10d9de",selector:".root"},id:"1cbde8e6-32f6-45e5-a766-b144951b18fc",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:42,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"5b35b671-368c-42fc-8f5e-55acbe10d9de",selector:".root"},target:{id:"d779b8e0-9388-4502-971c-bf3b4addc44e",selector:".root"},id:"33ad877d-e190-4b1c-8c08-994cfb8057fb",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:43,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"d779b8e0-9388-4502-971c-bf3b4addc44e",selector:".root"},target:{id:"5ae74711-b66a-4d67-831d-c69f190f6117",selector:".root"},id:"b7df865d-b5f2-4daf-9939-eb6605863784",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:44,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"5ae74711-b66a-4d67-831d-c69f190f6117",selector:".root"},target:{id:"257dbecb-8cf9-4411-8f95-1c787c8333c4",selector:".root"},id:"6a9ed89c-33f7-4132-89db-a3f4aa9706a7",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:45,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"257dbecb-8cf9-4411-8f95-1c787c8333c4",selector:".root"},target:{id:"f73a9c93-3918-4ec1-9418-4c7ee1e4e1f0",selector:".root"},id:"6eab3779-35ef-4ca2-a4ff-ec648fde309a",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:46,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"f73a9c93-3918-4ec1-9418-4c7ee1e4e1f0",selector:".root"},target:{id:"f5cf8f49-6389-4307-8c11-579e41685514",selector:".root"},id:"2899503b-e44b-4994-8705-34d457f601fc",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:47,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"f5cf8f49-6389-4307-8c11-579e41685514",selector:".root"},target:{id:"cb95ac77-e8db-4099-8e29-4ac3121c2878",selector:".root"},id:"a019943d-d5e9-4a95-9172-5f7fb1564528",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:48,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"cb95ac77-e8db-4099-8e29-4ac3121c2878",selector:".root"},target:{id:"6032860d-f236-4f7e-8be7-197934f4114b",selector:".root"},id:"12d77567-c04b-4668-a54c-cd27c8700f54",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:49,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"6032860d-f236-4f7e-8be7-197934f4114b",selector:".root"},target:{id:"6c5f99f4-2b10-4dd9-8427-bd2bd18696a1",selector:".root"},id:"71278fb4-3e78-421a-98d2-8e0fe0c1046f",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:50,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"6c5f99f4-2b10-4dd9-8427-bd2bd18696a1",selector:".root"},target:{id:"2575f3d8-5e2b-41d6-ad8f-0d085c266c07",selector:".root"},id:"fb9cf236-7666-4473-9c86-9a8679a003b3",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:51,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}}]}}},{name:"Wafer",net:{typeData:{placeTypes:{"5826fe10-c01b-486e-b213-9e33f30cf8c2":"start","8be9e972-2eba-4766-8af4-1d5e18f2f0d3":"end","6b2916e9-3c05-4b3c-8f4d-469b81cb05a9":"control","d52d8bfb-4e9e-4e45-8487-6794fb4c9c60":"control","f5c8291f-8cb8-4f85-825a-33e170c20c11":"control","f1205391-5230-47f3-b7ac-6615d1830898":"control","8d30c6c3-65d0-4485-a8cd-714ee0ba569c":"control","825401fa-60cd-497d-927e-ccd110cbd236":"control"},transitionTypes:{"83447b3c-d063-4eb3-82df-d6ac7e5838f9":"activity","be938c8c-eb3f-4019-9248-d06df11f6668":"activity","7da089da-d214-432c-a8fd-6ab38081843b":"activity","425ec761-277c-4bc6-8b63-60e651b1223e":"activity","3d887d06-6b5e-4733-b487-fb28393f995a":"activity","9df90d66-8f44-4709-aa9e-015d92d6f907":"activity","e364df88-9898-4317-9dd4-71eced03218c":"activity"}},netData:{places:[{id:"5826fe10-c01b-486e-b213-9e33f30cf8c2",name:"Start",marking:[{amount:1,ghgFactor:0,scope:"start",pds:0}],schema:{type:"array",title:"start",maxItems:1,items:{type:"object"},$id:"5826fe10-c01b-486e-b213-9e33f30cf8c2"}},{id:"6b2916e9-3c05-4b3c-8f4d-469b81cb05a9",name:"p1",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"6b2916e9-3c05-4b3c-8f4d-469b81cb05a9"}},{id:"d52d8bfb-4e9e-4e45-8487-6794fb4c9c60",name:"p2",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"d52d8bfb-4e9e-4e45-8487-6794fb4c9c60"}},{id:"f5c8291f-8cb8-4f85-825a-33e170c20c11",name:"p3",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"f5c8291f-8cb8-4f85-825a-33e170c20c11"}},{id:"f1205391-5230-47f3-b7ac-6615d1830898",name:"p4",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"f1205391-5230-47f3-b7ac-6615d1830898"}},{id:"8d30c6c3-65d0-4485-a8cd-714ee0ba569c",name:"p5",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"8d30c6c3-65d0-4485-a8cd-714ee0ba569c"}},{id:"825401fa-60cd-497d-927e-ccd110cbd236",name:"p6",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"825401fa-60cd-497d-927e-ccd110cbd236"}},{id:"8be9e972-2eba-4766-8af4-1d5e18f2f0d3",name:"Wafer",marking:[],schema:{type:"array",title:"end",maxItems:1,items:{type:"object"},$id:"8be9e972-2eba-4766-8af4-1d5e18f2f0d3"}}],transitions:[{id:"83447b3c-d063-4eb3-82df-d6ac7e5838f9",name:"Siliziumpulver einschmelzen",preface:`
// calculations

// ghg factors in kg CO2e per g
local ghgFactors = {
  "NF3": 13.4,
  "SF6": 18.3,
  "CF4": 5.3
};

local calculateFootprint(component) = 
  component.amount  *
  (if component.scope == 1 then 
    (if component.unit == "mg" then 0.001 
    else if component.unit == "kg" then 1000 
    else 1)
    * ghgFactors[component.ghg]
    * component.scalingFactor
  else if component.scope == 2 then
    (if component.unit == "Wh" then 0.001
    else 1)
    * component.ghgFactor *
    (if component.ghgFactorUnit == "g CO2e / kWh" then 0.001
    else if component.ghgFactorUnit == "mg CO2e / kWh" then 0.000001
    else 1)
    * component.scalingFactor
  else if component.scope == 3 then
    (if component.unit == "mg (Gewicht)" then 0.000001
    else if component.unit == "g (Gewicht)" then 0.001
    else 1)
    * component.ghgFactor * 
    (if component.ghgFactorUnit == "mg CO2e / Stueck oder kg" then 0.000001
    else if component.ghgFactorUnit == "g CO2e / Stueck oder kg" then 0.001
    else 1)
    * component.scalingFactor
  else component.ghgFactor)
  * Allokation / 100;


local individualFootprints = std.map(calculateFootprint,input_values);


// calculate Scope 1-Emissions



local generateScope1Contribution(index,element) = if (element.scope == 1)
  then { name: input_names[index], value: individualFootprints[index] };



local sum(arr, n) = 
  if (n <= 0) then 0 
  else sum(arr, n-1) + arr[n-1];


local totalFootprint = sum(individualFootprints, std.length(individualFootprints));

local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;

local footprintShares = std.map(calculatePCFShare,individualFootprints);

local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;

local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));

local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));


// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != "start") && (element.scope != "control")) 
  then { name: input_names[index], value: individualFootprints[index] };


local generateScope2Contribution(index,element) = if (element.scope == 2)
  then { name: input_names[index], value: individualFootprints[index] };

local generateScope3Contribution(index,element) = if (element.scope == 3) 
  then { name: input_names[index], value: individualFootprints[index] };



local filterNull(element) = element != null;

local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));

// fetch contributions from incoming places
local filterControl(element) = element.scope == "control";

local incomingControlPlaces = std.filter(filterControl, input_values);

local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions["1"];
local getScope2Contribution(element) = element.footprintContributions["2"];
local getScope3Contribution(element) = element.footprintContributions["3"];

local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));

local footprintContributions = {
    "1": incomingScope1Contributions + scope1FromThisTransition,
    "2": incomingScope2Contributions + scope2FromThisTransition,
    "3": incomingScope3Contributions + scope3FromThisTransition,
};


// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != "control") && (input_values[index].scope != "start") then { name: element };

local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));

local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];

//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };

local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));

local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;

`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p1_key:"local output_p1_key = '-';"},fragmentVarSnippets:{output_p1_value:`local output_p1_value = { 
    scope: 'control', 
    ghgFactorUnit: 'kg CO2e / Stueck',
    ghgFactor: totalFootprint, 
    amount: 1, 
    unit: 'Stueck (Stueckzahl)', 
    type: 'Primaerdaten', 
    pds: outputPDS, 
    footprintContributions: footprintContributions,
    sankeyNodes: sankeyNodes,
    sankeyLinks: sankeyLinks,
    nodeName: transition_name
};`}},{id:"be938c8c-eb3f-4019-9248-d06df11f6668",name:"Reinigen",preface:`
// calculations

// ghg factors in kg CO2e per g
local ghgFactors = {
  "NF3": 13.4,
  "SF6": 18.3,
  "CF4": 5.3
};

local calculateFootprint(component) = 
  component.amount  *
  (if component.scope == 1 then 
    (if component.unit == "mg" then 0.001 
    else if component.unit == "kg" then 1000 
    else 1)
    * ghgFactors[component.ghg]
    * component.scalingFactor
  else if component.scope == 2 then
    (if component.unit == "Wh" then 0.001
    else 1)
    * component.ghgFactor *
    (if component.ghgFactorUnit == "g CO2e / kWh" then 0.001
    else if component.ghgFactorUnit == "mg CO2e / kWh" then 0.000001
    else 1)
    * component.scalingFactor
  else if component.scope == 3 then
    (if component.unit == "mg (Gewicht)" then 0.000001
    else if component.unit == "g (Gewicht)" then 0.001
    else 1)
    * component.ghgFactor * 
    (if component.ghgFactorUnit == "mg CO2e / Stueck oder kg" then 0.000001
    else if component.ghgFactorUnit == "g CO2e / Stueck oder kg" then 0.001
    else 1)
    * component.scalingFactor
  else component.ghgFactor)
  * Allokation / 100;


local individualFootprints = std.map(calculateFootprint,input_values);


// calculate Scope 1-Emissions



local generateScope1Contribution(index,element) = if (element.scope == 1)
  then { name: input_names[index], value: individualFootprints[index] };



local sum(arr, n) = 
  if (n <= 0) then 0 
  else sum(arr, n-1) + arr[n-1];


local totalFootprint = sum(individualFootprints, std.length(individualFootprints));

local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;

local footprintShares = std.map(calculatePCFShare,individualFootprints);

local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;

local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));

local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));


// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != "start") && (element.scope != "control")) 
  then { name: input_names[index], value: individualFootprints[index] };


local generateScope2Contribution(index,element) = if (element.scope == 2)
  then { name: input_names[index], value: individualFootprints[index] };

local generateScope3Contribution(index,element) = if (element.scope == 3) 
  then { name: input_names[index], value: individualFootprints[index] };



local filterNull(element) = element != null;

local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));

// fetch contributions from incoming places
local filterControl(element) = element.scope == "control";

local incomingControlPlaces = std.filter(filterControl, input_values);

local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions["1"];
local getScope2Contribution(element) = element.footprintContributions["2"];
local getScope3Contribution(element) = element.footprintContributions["3"];

local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));

local footprintContributions = {
    "1": incomingScope1Contributions + scope1FromThisTransition,
    "2": incomingScope2Contributions + scope2FromThisTransition,
    "3": incomingScope3Contributions + scope3FromThisTransition,
};


// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != "control") && (input_values[index].scope != "start") then { name: element };

local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));

local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];

//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };

local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));

local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;

`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p2_key:"local output_p2_key = '-';"},fragmentVarSnippets:{output_p2_value:`local output_p2_value = { 
    scope: 'control', 
    ghgFactorUnit: 'kg CO2e / Stueck',
    ghgFactor: totalFootprint, 
    amount: 1, 
    unit: 'Stueck (Stueckzahl)', 
    type: 'Primaerdaten', 
    pds: outputPDS, 
    footprintContributions: footprintContributions,
    sankeyNodes: sankeyNodes,
    sankeyLinks: sankeyLinks,
    nodeName: transition_name
};`}},{id:"7da089da-d214-432c-a8fd-6ab38081843b",name:"Polysilizium einschmelzen",preface:`
// calculations

// ghg factors in kg CO2e per g
local ghgFactors = {
  "NF3": 13.4,
  "SF6": 18.3,
  "CF4": 5.3
};

local calculateFootprint(component) = 
  component.amount  *
  (if component.scope == 1 then 
    (if component.unit == "mg" then 0.001 
    else if component.unit == "kg" then 1000 
    else 1)
    * ghgFactors[component.ghg]
    * component.scalingFactor
  else if component.scope == 2 then
    (if component.unit == "Wh" then 0.001
    else 1)
    * component.ghgFactor *
    (if component.ghgFactorUnit == "g CO2e / kWh" then 0.001
    else if component.ghgFactorUnit == "mg CO2e / kWh" then 0.000001
    else 1)
    * component.scalingFactor
  else if component.scope == 3 then
    (if component.unit == "mg (Gewicht)" then 0.000001
    else if component.unit == "g (Gewicht)" then 0.001
    else 1)
    * component.ghgFactor * 
    (if component.ghgFactorUnit == "mg CO2e / Stueck oder kg" then 0.000001
    else if component.ghgFactorUnit == "g CO2e / Stueck oder kg" then 0.001
    else 1)
    * component.scalingFactor
  else component.ghgFactor)
  * Allokation / 100;


local individualFootprints = std.map(calculateFootprint,input_values);


// calculate Scope 1-Emissions



local generateScope1Contribution(index,element) = if (element.scope == 1)
  then { name: input_names[index], value: individualFootprints[index] };



local sum(arr, n) = 
  if (n <= 0) then 0 
  else sum(arr, n-1) + arr[n-1];


local totalFootprint = sum(individualFootprints, std.length(individualFootprints));

local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;

local footprintShares = std.map(calculatePCFShare,individualFootprints);

local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;

local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));

local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));


// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != "start") && (element.scope != "control")) 
  then { name: input_names[index], value: individualFootprints[index] };


local generateScope2Contribution(index,element) = if (element.scope == 2)
  then { name: input_names[index], value: individualFootprints[index] };

local generateScope3Contribution(index,element) = if (element.scope == 3) 
  then { name: input_names[index], value: individualFootprints[index] };



local filterNull(element) = element != null;

local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));

// fetch contributions from incoming places
local filterControl(element) = element.scope == "control";

local incomingControlPlaces = std.filter(filterControl, input_values);

local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions["1"];
local getScope2Contribution(element) = element.footprintContributions["2"];
local getScope3Contribution(element) = element.footprintContributions["3"];

local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));

local footprintContributions = {
    "1": incomingScope1Contributions + scope1FromThisTransition,
    "2": incomingScope2Contributions + scope2FromThisTransition,
    "3": incomingScope3Contributions + scope3FromThisTransition,
};


// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != "control") && (input_values[index].scope != "start") then { name: element };

local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));

local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];

//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };

local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));

local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;

`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p3_key:"local output_p3_key = '-';"},fragmentVarSnippets:{output_p3_value:`local output_p3_value = { 
    scope: 'control', 
    ghgFactorUnit: 'kg CO2e / Stueck',
    ghgFactor: totalFootprint, 
    amount: 1, 
    unit: 'Stueck (Stueckzahl)', 
    type: 'Primaerdaten', 
    pds: outputPDS, 
    footprintContributions: footprintContributions,
    sankeyNodes: sankeyNodes,
    sankeyLinks: sankeyLinks,
    nodeName: transition_name
};`}},{id:"425ec761-277c-4bc6-8b63-60e651b1223e",name:"Czochralski-Verfahren",preface:`
// calculations

// ghg factors in kg CO2e per g
local ghgFactors = {
  "NF3": 13.4,
  "SF6": 18.3,
  "CF4": 5.3
};

local calculateFootprint(component) = 
  component.amount  *
  (if component.scope == 1 then 
    (if component.unit == "mg" then 0.001 
    else if component.unit == "kg" then 1000 
    else 1)
    * ghgFactors[component.ghg]
    * component.scalingFactor
  else if component.scope == 2 then
    (if component.unit == "Wh" then 0.001
    else 1)
    * component.ghgFactor *
    (if component.ghgFactorUnit == "g CO2e / kWh" then 0.001
    else if component.ghgFactorUnit == "mg CO2e / kWh" then 0.000001
    else 1)
    * component.scalingFactor
  else if component.scope == 3 then
    (if component.unit == "mg (Gewicht)" then 0.000001
    else if component.unit == "g (Gewicht)" then 0.001
    else 1)
    * component.ghgFactor * 
    (if component.ghgFactorUnit == "mg CO2e / Stueck oder kg" then 0.000001
    else if component.ghgFactorUnit == "g CO2e / Stueck oder kg" then 0.001
    else 1)
    * component.scalingFactor
  else component.ghgFactor)
  * Allokation / 100;


local individualFootprints = std.map(calculateFootprint,input_values);


// calculate Scope 1-Emissions



local generateScope1Contribution(index,element) = if (element.scope == 1)
  then { name: input_names[index], value: individualFootprints[index] };



local sum(arr, n) = 
  if (n <= 0) then 0 
  else sum(arr, n-1) + arr[n-1];


local totalFootprint = sum(individualFootprints, std.length(individualFootprints));

local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;

local footprintShares = std.map(calculatePCFShare,individualFootprints);

local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;

local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));

local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));


// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != "start") && (element.scope != "control")) 
  then { name: input_names[index], value: individualFootprints[index] };


local generateScope2Contribution(index,element) = if (element.scope == 2)
  then { name: input_names[index], value: individualFootprints[index] };

local generateScope3Contribution(index,element) = if (element.scope == 3) 
  then { name: input_names[index], value: individualFootprints[index] };



local filterNull(element) = element != null;

local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));

// fetch contributions from incoming places
local filterControl(element) = element.scope == "control";

local incomingControlPlaces = std.filter(filterControl, input_values);

local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions["1"];
local getScope2Contribution(element) = element.footprintContributions["2"];
local getScope3Contribution(element) = element.footprintContributions["3"];

local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));

local footprintContributions = {
    "1": incomingScope1Contributions + scope1FromThisTransition,
    "2": incomingScope2Contributions + scope2FromThisTransition,
    "3": incomingScope3Contributions + scope3FromThisTransition,
};


// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != "control") && (input_values[index].scope != "start") then { name: element };

local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));

local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];

//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };

local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));

local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;

`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p4_key:"local output_p4_key = '-';"},fragmentVarSnippets:{output_p4_value:`local output_p4_value = { 
    scope: 'control', 
    ghgFactorUnit: 'kg CO2e / Stueck',
    ghgFactor: totalFootprint, 
    amount: 1, 
    unit: 'Stueck (Stueckzahl)', 
    type: 'Primaerdaten', 
    pds: outputPDS, 
    footprintContributions: footprintContributions,
    sankeyNodes: sankeyNodes,
    sankeyLinks: sankeyLinks,
    nodeName: transition_name
};`}},{id:"3d887d06-6b5e-4733-b487-fb28393f995a",name:"Sägen",preface:`
// calculations

// ghg factors in kg CO2e per g
local ghgFactors = {
  "NF3": 13.4,
  "SF6": 18.3,
  "CF4": 5.3
};

local calculateFootprint(component) = 
  component.amount  *
  (if component.scope == 1 then 
    (if component.unit == "mg" then 0.001 
    else if component.unit == "kg" then 1000 
    else 1)
    * ghgFactors[component.ghg]
    * component.scalingFactor
  else if component.scope == 2 then
    (if component.unit == "Wh" then 0.001
    else 1)
    * component.ghgFactor *
    (if component.ghgFactorUnit == "g CO2e / kWh" then 0.001
    else if component.ghgFactorUnit == "mg CO2e / kWh" then 0.000001
    else 1)
    * component.scalingFactor
  else if component.scope == 3 then
    (if component.unit == "mg (Gewicht)" then 0.000001
    else if component.unit == "g (Gewicht)" then 0.001
    else 1)
    * component.ghgFactor * 
    (if component.ghgFactorUnit == "mg CO2e / Stueck oder kg" then 0.000001
    else if component.ghgFactorUnit == "g CO2e / Stueck oder kg" then 0.001
    else 1)
    * component.scalingFactor
  else component.ghgFactor)
  * Allokation / 100;


local individualFootprints = std.map(calculateFootprint,input_values);


// calculate Scope 1-Emissions



local generateScope1Contribution(index,element) = if (element.scope == 1)
  then { name: input_names[index], value: individualFootprints[index] };



local sum(arr, n) = 
  if (n <= 0) then 0 
  else sum(arr, n-1) + arr[n-1];


local totalFootprint = sum(individualFootprints, std.length(individualFootprints));

local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;

local footprintShares = std.map(calculatePCFShare,individualFootprints);

local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;

local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));

local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));


// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != "start") && (element.scope != "control")) 
  then { name: input_names[index], value: individualFootprints[index] };


local generateScope2Contribution(index,element) = if (element.scope == 2)
  then { name: input_names[index], value: individualFootprints[index] };

local generateScope3Contribution(index,element) = if (element.scope == 3) 
  then { name: input_names[index], value: individualFootprints[index] };



local filterNull(element) = element != null;

local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));

// fetch contributions from incoming places
local filterControl(element) = element.scope == "control";

local incomingControlPlaces = std.filter(filterControl, input_values);

local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions["1"];
local getScope2Contribution(element) = element.footprintContributions["2"];
local getScope3Contribution(element) = element.footprintContributions["3"];

local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));

local footprintContributions = {
    "1": incomingScope1Contributions + scope1FromThisTransition,
    "2": incomingScope2Contributions + scope2FromThisTransition,
    "3": incomingScope3Contributions + scope3FromThisTransition,
};


// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != "control") && (input_values[index].scope != "start") then { name: element };

local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));

local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];

//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };

local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));

local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;

`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p5_key:"local output_p5_key = '-';"},fragmentVarSnippets:{output_p5_value:`local output_p5_value = { 
    scope: 'control', 
    ghgFactorUnit: 'kg CO2e / Stueck',
    ghgFactor: totalFootprint, 
    amount: 1, 
    unit: 'Stueck (Stueckzahl)', 
    type: 'Primaerdaten', 
    pds: outputPDS, 
    footprintContributions: footprintContributions,
    sankeyNodes: sankeyNodes,
    sankeyLinks: sankeyLinks,
    nodeName: transition_name
};`}},{id:"9df90d66-8f44-4709-aa9e-015d92d6f907",name:"Schleifen",preface:`
// calculations

// ghg factors in kg CO2e per g
local ghgFactors = {
  "NF3": 13.4,
  "SF6": 18.3,
  "CF4": 5.3
};

local calculateFootprint(component) = 
  component.amount  *
  (if component.scope == 1 then 
    (if component.unit == "mg" then 0.001 
    else if component.unit == "kg" then 1000 
    else 1)
    * ghgFactors[component.ghg]
    * component.scalingFactor
  else if component.scope == 2 then
    (if component.unit == "Wh" then 0.001
    else 1)
    * component.ghgFactor *
    (if component.ghgFactorUnit == "g CO2e / kWh" then 0.001
    else if component.ghgFactorUnit == "mg CO2e / kWh" then 0.000001
    else 1)
    * component.scalingFactor
  else if component.scope == 3 then
    (if component.unit == "mg (Gewicht)" then 0.000001
    else if component.unit == "g (Gewicht)" then 0.001
    else 1)
    * component.ghgFactor * 
    (if component.ghgFactorUnit == "mg CO2e / Stueck oder kg" then 0.000001
    else if component.ghgFactorUnit == "g CO2e / Stueck oder kg" then 0.001
    else 1)
    * component.scalingFactor
  else component.ghgFactor)
  * Allokation / 100;


local individualFootprints = std.map(calculateFootprint,input_values);


// calculate Scope 1-Emissions



local generateScope1Contribution(index,element) = if (element.scope == 1)
  then { name: input_names[index], value: individualFootprints[index] };



local sum(arr, n) = 
  if (n <= 0) then 0 
  else sum(arr, n-1) + arr[n-1];


local totalFootprint = sum(individualFootprints, std.length(individualFootprints));

local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;

local footprintShares = std.map(calculatePCFShare,individualFootprints);

local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;

local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));

local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));


// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != "start") && (element.scope != "control")) 
  then { name: input_names[index], value: individualFootprints[index] };


local generateScope2Contribution(index,element) = if (element.scope == 2)
  then { name: input_names[index], value: individualFootprints[index] };

local generateScope3Contribution(index,element) = if (element.scope == 3) 
  then { name: input_names[index], value: individualFootprints[index] };



local filterNull(element) = element != null;

local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));

// fetch contributions from incoming places
local filterControl(element) = element.scope == "control";

local incomingControlPlaces = std.filter(filterControl, input_values);

local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions["1"];
local getScope2Contribution(element) = element.footprintContributions["2"];
local getScope3Contribution(element) = element.footprintContributions["3"];

local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));

local footprintContributions = {
    "1": incomingScope1Contributions + scope1FromThisTransition,
    "2": incomingScope2Contributions + scope2FromThisTransition,
    "3": incomingScope3Contributions + scope3FromThisTransition,
};


// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != "control") && (input_values[index].scope != "start") then { name: element };

local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));

local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];

//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };

local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));

local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;

`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p6_key:"local output_p6_key = '-';"},fragmentVarSnippets:{output_p6_value:`local output_p6_value = { 
    scope: 'control', 
    ghgFactorUnit: 'kg CO2e / Stueck',
    ghgFactor: totalFootprint, 
    amount: 1, 
    unit: 'Stueck (Stueckzahl)', 
    type: 'Primaerdaten', 
    pds: outputPDS, 
    footprintContributions: footprintContributions,
    sankeyNodes: sankeyNodes,
    sankeyLinks: sankeyLinks,
    nodeName: transition_name
};`}},{id:"e364df88-9898-4317-9dd4-71eced03218c",name:"Oberflächenbehandlung",preface:`
// calculations

// ghg factors in kg CO2e per g
local ghgFactors = {
  "NF3": 13.4,
  "SF6": 18.3,
  "CF4": 5.3
};

local calculateFootprint(component) = 
  component.amount  *
  (if component.scope == 1 then 
    (if component.unit == "mg" then 0.001 
    else if component.unit == "kg" then 1000 
    else 1)
    * ghgFactors[component.ghg]
    * component.scalingFactor
  else if component.scope == 2 then
    (if component.unit == "Wh" then 0.001
    else 1)
    * component.ghgFactor *
    (if component.ghgFactorUnit == "g CO2e / kWh" then 0.001
    else if component.ghgFactorUnit == "mg CO2e / kWh" then 0.000001
    else 1)
    * component.scalingFactor
  else if component.scope == 3 then
    (if component.unit == "mg (Gewicht)" then 0.000001
    else if component.unit == "g (Gewicht)" then 0.001
    else 1)
    * component.ghgFactor * 
    (if component.ghgFactorUnit == "mg CO2e / Stueck oder kg" then 0.000001
    else if component.ghgFactorUnit == "g CO2e / Stueck oder kg" then 0.001
    else 1)
    * component.scalingFactor
  else component.ghgFactor)
  * Allokation / 100;


local individualFootprints = std.map(calculateFootprint,input_values);


// calculate Scope 1-Emissions



local generateScope1Contribution(index,element) = if (element.scope == 1)
  then { name: input_names[index], value: individualFootprints[index] };



local sum(arr, n) = 
  if (n <= 0) then 0 
  else sum(arr, n-1) + arr[n-1];


local totalFootprint = sum(individualFootprints, std.length(individualFootprints));

local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;

local footprintShares = std.map(calculatePCFShare,individualFootprints);

local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;

local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));

local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));


// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != "start") && (element.scope != "control")) 
  then { name: input_names[index], value: individualFootprints[index] };


local generateScope2Contribution(index,element) = if (element.scope == 2)
  then { name: input_names[index], value: individualFootprints[index] };

local generateScope3Contribution(index,element) = if (element.scope == 3) 
  then { name: input_names[index], value: individualFootprints[index] };



local filterNull(element) = element != null;

local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));

// fetch contributions from incoming places
local filterControl(element) = element.scope == "control";

local incomingControlPlaces = std.filter(filterControl, input_values);

local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions["1"];
local getScope2Contribution(element) = element.footprintContributions["2"];
local getScope3Contribution(element) = element.footprintContributions["3"];

local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));

local footprintContributions = {
    "1": incomingScope1Contributions + scope1FromThisTransition,
    "2": incomingScope2Contributions + scope2FromThisTransition,
    "3": incomingScope3Contributions + scope3FromThisTransition,
};


// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != "control") && (input_values[index].scope != "start") then { name: element };

local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));

local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];

//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };

local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));

local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;

`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_wafer_key:"local output_wafer_key = '-';"},fragmentVarSnippets:{output_wafer_value:`local output_wafer_value = { 
    scope: 'control', 
    ghgFactorUnit: 'kg CO2e / Stueck',
    ghgFactor: totalFootprint, 
    amount: 1, 
    unit: 'Stueck (Stueckzahl)', 
    type: 'Primaerdaten', 
    pds: outputPDS, 
    footprintContributions: footprintContributions,
    sankeyNodes: sankeyNodes,
    sankeyLinks: sankeyLinks,
    nodeName: transition_name
};`}}],arcs:[{id:"9952bbb5-ee12-47f5-9f8c-6ecc65e9978e",filter:"$.*",fromId:"5826fe10-c01b-486e-b213-9e33f30cf8c2",toId:"83447b3c-d063-4eb3-82df-d6ac7e5838f9"},{id:"98564d96-90e1-4bd7-88d1-7ea2fd0e3e6a",filter:"$",fromId:"83447b3c-d063-4eb3-82df-d6ac7e5838f9",toId:"6b2916e9-3c05-4b3c-8f4d-469b81cb05a9"},{id:"fd2ec139-fb41-47fe-801b-3bb11b1e8e25",filter:"$.*",fromId:"6b2916e9-3c05-4b3c-8f4d-469b81cb05a9",toId:"be938c8c-eb3f-4019-9248-d06df11f6668"},{id:"ae5dc3e8-7f0d-4f8a-84bd-4881cdfef516",filter:"$",fromId:"be938c8c-eb3f-4019-9248-d06df11f6668",toId:"d52d8bfb-4e9e-4e45-8487-6794fb4c9c60"},{id:"1dd9e330-42b4-4cfc-a172-e17023e63f43",filter:"$.*",fromId:"d52d8bfb-4e9e-4e45-8487-6794fb4c9c60",toId:"7da089da-d214-432c-a8fd-6ab38081843b"},{id:"da9e1ee2-3c85-4829-890c-ebdc01a38a4e",filter:"$",fromId:"7da089da-d214-432c-a8fd-6ab38081843b",toId:"f5c8291f-8cb8-4f85-825a-33e170c20c11"},{id:"bb71cb17-306f-4249-8af8-b6fbd3f72196",filter:"$.*",fromId:"f5c8291f-8cb8-4f85-825a-33e170c20c11",toId:"425ec761-277c-4bc6-8b63-60e651b1223e"},{id:"3b591ef6-51bf-4910-add7-4a58d16cc052",filter:"$",fromId:"425ec761-277c-4bc6-8b63-60e651b1223e",toId:"f1205391-5230-47f3-b7ac-6615d1830898"},{id:"d9e4a496-a108-4cd5-a4e3-5613f1cac1fb",filter:"$.*",fromId:"f1205391-5230-47f3-b7ac-6615d1830898",toId:"3d887d06-6b5e-4733-b487-fb28393f995a"},{id:"19df2ab5-08d5-4766-915d-88fd58c604ad",filter:"$",fromId:"3d887d06-6b5e-4733-b487-fb28393f995a",toId:"8d30c6c3-65d0-4485-a8cd-714ee0ba569c"},{id:"6830cef6-fba6-47ab-9e98-831a79189874",filter:"$.*",fromId:"8d30c6c3-65d0-4485-a8cd-714ee0ba569c",toId:"9df90d66-8f44-4709-aa9e-015d92d6f907"},{id:"01d4e222-45b7-4b90-91fd-24fb2b4b3703",filter:"$",fromId:"9df90d66-8f44-4709-aa9e-015d92d6f907",toId:"825401fa-60cd-497d-927e-ccd110cbd236"},{id:"0aa216cb-2780-478a-bfe7-0b5767c073a6",filter:"$.*",fromId:"825401fa-60cd-497d-927e-ccd110cbd236",toId:"e364df88-9898-4317-9dd4-71eced03218c"},{id:"3414b4ea-d6c5-431f-ad59-3f6a4cdc8c04",filter:"$",fromId:"e364df88-9898-4317-9dd4-71eced03218c",toId:"8be9e972-2eba-4766-8af4-1d5e18f2f0d3"}]},layoutData:{cells:[{type:"pn.Place",size:{width:50,height:50},position:{x:132,y:264},angle:0,tokens:1,id:"5826fe10-c01b-486e-b213-9e33f30cf8c2",jsonnetsType:"place",z:8,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Start"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:504,y:264},angle:0,tokens:0,id:"6b2916e9-3c05-4b3c-8f4d-469b81cb05a9",jsonnetsType:"place",z:9,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p1"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:840,y:264},angle:0,tokens:0,id:"d52d8bfb-4e9e-4e45-8487-6794fb4c9c60",jsonnetsType:"place",z:10,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p2"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:1296,y:264},angle:0,tokens:0,id:"f5c8291f-8cb8-4f85-825a-33e170c20c11",jsonnetsType:"place",z:11,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p3"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:1296,y:516},angle:0,tokens:0,id:"f1205391-5230-47f3-b7ac-6615d1830898",jsonnetsType:"place",z:12,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p4"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:840,y:516},angle:0,tokens:0,id:"8d30c6c3-65d0-4485-a8cd-714ee0ba569c",jsonnetsType:"place",z:13,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p5"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:504,y:516},angle:0,tokens:0,id:"825401fa-60cd-497d-927e-ccd110cbd236",jsonnetsType:"place",z:14,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p6"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:132,y:516},angle:0,tokens:0,id:"8be9e972-2eba-4766-8af4-1d5e18f2f0d3",jsonnetsType:"place",z:15,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Wafer"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:300,y:264},angle:0,id:"83447b3c-d063-4eb3-82df-d6ac7e5838f9",jsonnetsType:"transition",z:16,attrs:{".label":{fill:"#7a7e9b",text:"Siliziumpulver einschmelzen"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:648,y:264},angle:0,id:"be938c8c-eb3f-4019-9248-d06df11f6668",jsonnetsType:"transition",z:17,attrs:{".label":{fill:"#7a7e9b",text:"Reinigen"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:1032,y:264},angle:0,id:"7da089da-d214-432c-a8fd-6ab38081843b",jsonnetsType:"transition",z:18,attrs:{".label":{fill:"#7a7e9b",text:"Polysilizium einschmelzen"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:1272,y:396},angle:0,id:"425ec761-277c-4bc6-8b63-60e651b1223e",jsonnetsType:"transition",z:19,attrs:{".label":{fill:"#7a7e9b",text:"Czochralski-Verfahren"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:1032,y:516},angle:0,id:"3d887d06-6b5e-4733-b487-fb28393f995a",jsonnetsType:"transition",z:20,attrs:{".label":{fill:"#7a7e9b",text:"Sägen"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:648,y:516},angle:0,id:"9df90d66-8f44-4709-aa9e-015d92d6f907",jsonnetsType:"transition",z:21,attrs:{".label":{fill:"#7a7e9b",text:"Schleifen"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:300,y:516},angle:0,id:"e364df88-9898-4317-9dd4-71eced03218c",jsonnetsType:"transition",z:22,attrs:{".label":{fill:"#7a7e9b",text:"Oberflächenbehandlung"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"standard.Link",source:{id:"5826fe10-c01b-486e-b213-9e33f30cf8c2",selector:".root"},target:{id:"83447b3c-d063-4eb3-82df-d6ac7e5838f9",selector:".root"},id:"9952bbb5-ee12-47f5-9f8c-6ecc65e9978e",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:23,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"83447b3c-d063-4eb3-82df-d6ac7e5838f9",selector:".root"},target:{id:"6b2916e9-3c05-4b3c-8f4d-469b81cb05a9",selector:".root"},id:"98564d96-90e1-4bd7-88d1-7ea2fd0e3e6a",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:24,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"6b2916e9-3c05-4b3c-8f4d-469b81cb05a9",selector:".root"},target:{id:"be938c8c-eb3f-4019-9248-d06df11f6668",selector:".root"},id:"fd2ec139-fb41-47fe-801b-3bb11b1e8e25",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:25,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"be938c8c-eb3f-4019-9248-d06df11f6668",selector:".root"},target:{id:"d52d8bfb-4e9e-4e45-8487-6794fb4c9c60",selector:".root"},id:"ae5dc3e8-7f0d-4f8a-84bd-4881cdfef516",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:26,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"d52d8bfb-4e9e-4e45-8487-6794fb4c9c60",selector:".root"},target:{id:"7da089da-d214-432c-a8fd-6ab38081843b",selector:".root"},id:"1dd9e330-42b4-4cfc-a172-e17023e63f43",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:27,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"7da089da-d214-432c-a8fd-6ab38081843b",selector:".root"},target:{id:"f5c8291f-8cb8-4f85-825a-33e170c20c11",selector:".root"},id:"da9e1ee2-3c85-4829-890c-ebdc01a38a4e",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:28,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"f5c8291f-8cb8-4f85-825a-33e170c20c11",selector:".root"},target:{id:"425ec761-277c-4bc6-8b63-60e651b1223e",selector:".root"},id:"bb71cb17-306f-4249-8af8-b6fbd3f72196",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:29,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"425ec761-277c-4bc6-8b63-60e651b1223e",selector:".root"},target:{id:"f1205391-5230-47f3-b7ac-6615d1830898",selector:".root"},id:"3b591ef6-51bf-4910-add7-4a58d16cc052",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:30,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"f1205391-5230-47f3-b7ac-6615d1830898",selector:".root"},target:{id:"3d887d06-6b5e-4733-b487-fb28393f995a",selector:".root"},id:"d9e4a496-a108-4cd5-a4e3-5613f1cac1fb",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:31,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"3d887d06-6b5e-4733-b487-fb28393f995a",selector:".root"},target:{id:"8d30c6c3-65d0-4485-a8cd-714ee0ba569c",selector:".root"},id:"19df2ab5-08d5-4766-915d-88fd58c604ad",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:32,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"8d30c6c3-65d0-4485-a8cd-714ee0ba569c",selector:".root"},target:{id:"9df90d66-8f44-4709-aa9e-015d92d6f907",selector:".root"},id:"6830cef6-fba6-47ab-9e98-831a79189874",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:33,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"9df90d66-8f44-4709-aa9e-015d92d6f907",selector:".root"},target:{id:"825401fa-60cd-497d-927e-ccd110cbd236",selector:".root"},id:"01d4e222-45b7-4b90-91fd-24fb2b4b3703",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:34,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"825401fa-60cd-497d-927e-ccd110cbd236",selector:".root"},target:{id:"e364df88-9898-4317-9dd4-71eced03218c",selector:".root"},id:"0aa216cb-2780-478a-bfe7-0b5767c073a6",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:35,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"e364df88-9898-4317-9dd4-71eced03218c",selector:".root"},target:{id:"8be9e972-2eba-4766-8af4-1d5e18f2f0d3",selector:".root"},id:"3414b4ea-d6c5-431f-ad59-3f6a4cdc8c04",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:36,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}}]}}}],nAt=[{id:"activity",title:"Aktivität",description:"Eine Transition stellt eine Aktivität (wie zum Beispiel 'Löten') in Ihrem Prozessmodell dar. Fügen Sie der Aktivität Input-Stellen (Kreise) vom Typ 'Scope 1 - Emissionen', 'Scope 2 - Emissionen' oder 'Scope 3 - Emissionen' zu, um die der Aktivität zuzuordnenden Treibhausgasemissionen zu erfassen. Über das Feld 'Allokation' können Sie die berechneten Gesamt-Emissionen prozentual skalieren.",keySnippet:"'-';",valueSnippet:"{ scope: 'control', ghgFactorUnit: 'kg CO2e / Stueck', ghgFactor: totalFootprint, amount: 1, unit: 'Stueck (Stueckzahl)', type: 'Primaerdaten', pds: outputPDS, footprintContributions: footprintContributions, sankeyNodes: sankeyNodes,sankeyLinks: sankeyLinks, nodeName: transition_name };",preface:`// calculations 
 // ghg factors in kg CO2e per g 
 local ghgFactors = { 'NF3': 13.4, 'SF6': 18.3, 'CF4': 5.3};
 local calculateFootprint(component) = component.amount  * (if component.scope == 1 then (if component.unit == 'mg' then 0.001 else if component.unit == 'kg' then 1000 else 1) * ghgFactors[component.ghg] * component.scalingFactor else if component.scope == 2 then (if component.unit == 'Wh' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'g CO2e / kWh' then 0.001 else if component.ghgFactorUnit == 'mg CO2e / kWh' then 0.000001 else 1) * component.scalingFactor else if component.scope == 3 then (if component.unit == 'mg (Gewicht)' then 0.000001 else if component.unit == 'g (Gewicht)' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'mg CO2e / Stueck oder kg' then 0.000001 else if component.ghgFactorUnit == 'g CO2e / Stueck oder kg' then 0.001 else 1) * component.scalingFactor else component.ghgFactor) * Allokation / 100; 
 local individualFootprints = std.map(calculateFootprint,input_values); 
 // calculate Scope 1-Emissions 
 local generateScope1Contribution(index,element) = if (element.scope == 1) then { name: input_names[index], value: individualFootprints[index] }; 
 local sum(arr, n) = if (n <= 0) then 0 else sum(arr, n-1) + arr[n-1]; 
 local totalFootprint = sum(individualFootprints, std.length(individualFootprints)); 
 local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0; 
 local footprintShares = std.map(calculatePCFShare,individualFootprints); 
 local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds; 
 local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1)); 
 local outputPDS = sum(primaryDataShares,std.length(primaryDataShares)); 
 // for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created 
 local generateFootprintContribution(index,element) = if ((element.scope != 'start') && (element.scope != 'control')) then { name: input_names[index], value: individualFootprints[index] }; 
 local generateScope2Contribution(index,element) = if (element.scope == 2) then { name: input_names[index], value: individualFootprints[index] }; 
 local generateScope3Contribution(index,element) = if (element.scope == 3) then { name: input_names[index], value: individualFootprints[index] }; 
 local filterNull(element) = element != null; 
 local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values)); 
 local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values)); 
 local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values)); 
 local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values)); 
 // fetch contributions from incoming places 
 local filterControl(element) = element.scope == 'control'; 
 local incomingControlPlaces = std.filter(filterControl, input_values); 
 local getContribution(element) = element.footprintContributions; 
 local getScope1Contribution(element) = element.footprintContributions['1']; 
 local getScope2Contribution(element) = element.footprintContributions['2']; 
 local getScope3Contribution(element) = element.footprintContributions['3']; 
 local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces)); 
 local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces)); 
 local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces)); 
 local footprintContributions = { '1': incomingScope1Contributions + scope1FromThisTransition, '2': incomingScope2Contributions + scope2FromThisTransition,'3': incomingScope3Contributions + scope3FromThisTransition, }; 
 // for each incoming place 
 local generateSankeyNode(index,element) = if (input_values[index].scope != 'control') && (input_values[index].scope != 'start') then { name: element }; local getNodes(element) = element.sankeyNodes; 
 local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces)); 
 local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }]; 
 //currently assuming we have exactly one output place 
 local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name }; 
 local getLinks(element) = element.sankeyLinks; 
 local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces)); 
 local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else []; 
 local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;`,guard:"true",presetFilter:"$.*",postsetFilter:"$",customVariables:{Allokation:"100"}}],rAt=[{id:"start",externalInteraction:{type:"none"},schema:{type:"array",title:"Start",description:"Um Berechnungen durchführen zu können, muss das Prozessmodell am Anfang genau einen Knoten vom Typ 'Start' haben.",maxItems:1,items:{type:"object"}},marking:[{amount:1,ghgFactor:0,scope:"start",pds:0}]},{id:"end",externalInteraction:{type:"push",url:"https://s3t.uber.space/footprints/"},schema:{type:"array",title:"Ende",description:"Das Prozessmodell sollte am Ende einen Knoten vom Typ 'Ende' haben. Wenn eine Berechung abgeschlossen wurde, und Daten im Knoten vorhanden sind, können Sie die Daten veröffentlichen und so in das Lieferketten-Verzeichnis laden.",maxItems:1,items:{type:"object"}},marking:[]},{id:"control",externalInteraction:{type:"none"},schema:{type:"array",title:"Kontrollfluss",description:"Um Berechnungen durchführen zu können, müssen Aktivitäten miteinander mit Knoten vom Typ 'Kontrollfluss' verbunden werden.",maxItems:1,items:{type:"object"}},marking:[]},{id:"scope1",externalInteraction:{type:"none"},schema:{type:"array",title:"Scope 1 - Emissionen",description:"Wählen Sie zunächst das betreffende <b>Treibhausgas</b> im Formular aus. Als <b>Maßeinheit</b> können Sie 'mg', 'g' oder 'kg' wählen. Über den <b>Skalierungsfaktor</b> können Sie die anzurechnende <b>Menge</b> skalieren. Wenn zum Beispiel die Hälfte der angegebenen Menge angerechnet werden soll, geben Sie den <b>Skalierungsfaktor</b> '0,5' an.",maxItems:1,items:{type:"object",properties:{scope:{type:"number",title:"Scope",enum:[1],readOnly:!0},ghg:{type:"string",title:"Treibhausgas",enum:["NF3","SF6","CF4"],default:"NF3",description:"Wählen Sie das emittierte Treibhausgas aus."},unit:{type:"string",title:"Maßeinheit für Mengenangabe",enum:["mg","g","kg"],default:"g",description:"Wählen Sie die Maßeinheit aus, in der Sie die Menge angeben möchten."},amount:{type:"number",title:"Menge",description:"Mengenangabe in mg, g oder kg für das emittierte Treibhausgas."},scalingFactor:{type:"number",title:"Skalierungsfaktor",default:1,description:"Die angegebene Menge wird mit dem Skalierungsfaktor multipliziert."},type:{type:"string",enum:["Primaerdaten"],title:"Datentyp",readOnly:!0},note:{type:"string",title:"Notiz",description:"In diesem Feld können Sie Anmerkungen hinterlegen."}},required:["scope","ghg","unit","amount","scalingFactor","type"]}},marking:[{scope:1,amount:1,unit:"g",ghg:"NF3",scalingFactor:1,type:"Primaerdaten",pds:1,note:""}]},{id:"scope2",externalInteraction:{type:"none"},schema:{type:"array",title:"Scope 2 - Emissionen",description:"Wählen Sie zunächst eine <b>Maßeinheit</b> ('Wh' oder 'kWh') für den angegebenen <b>Energieverbrauch</b>. Der <b>Emissionsfaktor</b> gibt an, welche Menge an Treibhausgasen <i>pro kWh</i> mit der Erzeugung der bezogenen Energie verbunden sind. Als <b>Maßeinheit für den Emissionsfaktor</b> können Sie 'mg', 'g' oder 'kg' CO2e / kWh auswählen. Über den <b>Skalierungsfaktor</b> können Sie den anzurechnenden Energieverbrauch skalieren. Wenn zum Beispiel die Hälfte der angegebenen Menge angerechnet werden soll, geben Sie den <b>Skalierungsfaktor</b> '0,5' an.",maxItems:1,items:{type:"object",properties:{scope:{type:"number",enum:[2],title:"Scope",readOnly:!0},unit:{type:"string",enum:["Wh","kWh"],default:"kWh",title:"Maßeinheit für Energieverbrauch",description:"Wählen Sie die Maßeinheit aus, in der Sie den Energieverbrauch angeben möchten."},amount:{type:"number",title:"Energieverbrauch",description:"Mengenangabe in Wh oder kWh für den Energieverbrauch."},ghgFactorUnit:{type:"string",enum:["mg CO2e / kWh","g CO2e / kWh","kg CO2e / kWh"],default:"kg CO2e / kWh",title:"Maßeinheit für Emissionsfaktor",description:"Wählen Sie die Maßeinheit aus, in der Sie den Emissionsfaktor angeben möchten."},ghgFactor:{type:"number",title:"Emissionsfaktor",description:"Angabe der Menge an emittierten Treibhausgasen in mg, g oder kg CO2e pro kWh."},scalingFactor:{type:"number",title:"Skalierungsfaktor",default:1,description:"Der angegebene Energieverbrauch wird mit dem Skalierungsfaktor multipliziert."},type:{type:"string",enum:["Primaerdaten"],title:"Datentyp",readOnly:!0},note:{type:"string",title:"Notiz",description:"In diesem Feld können Sie Anmerkungen hinterlegen."}},required:["scope","unit","amount","ghgFactorUnit","ghgFactor","scalingFactor","type"]}},marking:[{scope:2,unit:"kWh",amount:1,ghgFactorUnit:"kg CO2e / kWh",ghgFactor:1,scalingFactor:1,type:"Primaerdaten",pds:1,note:""}]},{id:"scope3-secondary",externalInteraction:{type:"none"},schema:{type:"array",title:"Scope 3 - Emissionen (Sekundärdaten)",description:"Wählen Sie zunächst die <b>Maßeinheit</b> (entweder 'Stückzahl' oder 'Gewicht' in mg, g oder kg) für die Angabe der Menge an Material oder Komponenten. Der <b>Emissionsfaktor</b> gibt an, welche Menge an Treibhausgasen mit der Produktion des Materials oder der Komponente verbunden sind. Die Angabe des Emissionsfaktors erfolgt immer <i>pro Stück oder kg</i>. Als <b>Maßeinheit für den Emissionsfaktor</b> können Sie 'mg', 'g' oder 'kg' CO2e / Stück oder kg auswählen. Über den <b>Skalierungsfaktor</b> können Sie die anzurechnende <b>Menge</b> skalieren. Wenn zum Beispiel die Hälfte der angegebenen Menge angerechnet werden soll, geben Sie den <b>Skalierungsfaktor</b> '0,5' an.",maxItems:1,items:{type:"object",properties:{scope:{type:"number",enum:[3],readOnly:!0},unit:{type:"string",title:"Maßeinheit für Mengenangabe",enum:["mg (Gewicht)","g (Gewicht)","kg (Gewicht)","Stueck (Stueckzahl)"],description:"Wählen Sie die Maßeinheit aus, in der Sie die Menge an Material oder Komponenten angeben möchten."},amount:{type:"number",title:"Menge",description:"Mengenangabe in Gewicht (mg, g oder kg) oder als Stückzahl."},ghgFactorUnit:{type:"string",enum:["mg CO2e / Stueck oder kg","g CO2e / Stueck oder kg","kg CO2e / Stueck oder kg"],default:"kg CO2e / Stueck oder kg",title:"Maßeinheit für Emissionsfaktor",description:"Wählen Sie die Maßeinheit aus, in der Sie den Emissionsfaktor angeben möchten."},ghgFactor:{type:"number",title:"Emissionsfaktor",description:"Angabe der Menge an emittierten Treibhausgasen in mg, g oder kg CO2e / Stück oder kg."},scalingFactor:{type:"number",title:"Skalierungsfaktor",default:1,description:"Die angegebene Menge wird mit dem Skalierungsfaktor multipliziert."},type:{type:"string",enum:["Sekundaerdaten"],title:"Datentyp",readOnly:!0},note:{type:"string",title:"Notiz",description:"In diesem Feld können Sie Anmerkungen hinterlegen."}},required:["scope","unit","amount","ghgFactorUnit","ghgFactor","scalingFactor","type"]}},marking:[{scope:3,unit:"Stueck (Stueckzahl)",amount:1,ghgFactorUnit:"kg CO2e / Stueck oder kg",ghgFactor:1,scalingFactor:1,type:"Sekundaerdaten",pds:0,note:""}]},{id:"scope3-primary",externalInteraction:{type:"pull",url:"https://s3t.uber.space/footprints/",enforcedMarking:{scope:3,title:"scope3",scalingFactor:1,fromSupplyChain:!0,note:"loaded"}},schema:{type:"array",title:"Scope 3 - Emissionen (Primärdaten)",description:"Laden Sie Primärdaten von Ihren Lieferanten aus dem Lieferkettenverzeichnis. Nach dem Laden können Sie den von ihrem Lieferanten übermittelten <b>Emissionsfaktor</b> und <b>Primärdatenanteil</b> einsehen. Es wird angenommen, dass die Angaben zu Treibhausgasemission von Ihrem Lieferanten in <i>kg CO2e pro Stück</i> erfolgen. Sie können eine <b>Mengenangabe</b> als Stückzahl vornehmen und die angegebene Menge über einen <b>Skalierungsfaktor</b> skalieren. Wenn zum Beispiel die Hälfte der angegebenen Menge angerechnet werden soll, geben Sie den <b>Skalierungsfaktor</b> '0,5' an.",maxItems:1,items:{type:"object",properties:{scope:{type:"number",title:"Scope",enum:[3],readOnly:!0},unit:{type:"string",title:"Mengeneinheit",enum:["Stueck (Stueckzahl)"],readOnly:!0},amount:{type:"number",title:"Menge",description:"Mengenangabe als Stückzahl."},ghgFactorUnit:{type:"string",enum:["kg CO2e / Stueck"],default:"kg CO2e / Stueck",title:"Maßeinheit für Emissionsfaktor",readOnly:!0},scalingFactor:{type:"number",title:"Skalierungsfaktor",default:1,description:"Die angegebene Menge wird mit dem Skalierungsfaktor multipliziert."},ghgFactor:{type:"number",title:"Emissionsfaktor",readOnly:!0},pds:{type:"number",title:"Primaerdatenanteil",readOnly:!0},note:{type:"string",title:"Notiz",description:"In diesem Feld können Sie Anmerkungen hinterlegen."}},required:["scope","unit","amount","ghgFactorUnit","ghgFactor","scalingFactor","pds"]}},marking:[]}],Ghe={name:KTt,defaultUIAssistMode:XTt,defaultTransitionType:JTt,defaultPlaceType:ZTt,allowAutoLayout:QTt,visualisationConfig:eAt,examples:tAt,transitionTypes:nAt,placeTypes:rAt},iAt=zt({computed:{...Yt(Aa),...Yt(Zn),...Yt(zs)},methods:{close(){this.uiStateStore.showModal="none"},onUserModeClick(t){this.uiStateStore.uiAssistMode=t},setConfig(t){const e=t.target.value;Vt().clear(),this.netStore.transitions=[],this.netStore.places=[],this.netStore.importedData={},e==="default"?this.configStore.resetConfig():e==="scope3tool"?this.configStore.loadConfig(Ghe):e==="uploaded"&&(this.configStore.resetConfig(),this.configStore.name="uploaded")},readFile(t){Aie(t,this.importConfig)},importConfig(t){let e=JSON.parse(t);zs().loadConfig(e,!0)}}}),oAt={class:"modal is-active"},aAt=X("div",{class:"modal-background"},null,-1),sAt={class:"modal-card jsn-modal-wide"},lAt={class:"modal-card-head"},uAt=X("p",{class:"modal-card-title"},"Einstellungen",-1),cAt={class:"modal-card-body"},fAt={class:"content"},hAt={class:"block"},dAt={class:"field"},pAt=X("label",{class:"label is-small"},"Configuration:",-1),gAt={class:"select is-small"},mAt=["selected"],vAt=["selected"],yAt=["selected"],bAt={key:0,class:"field"},_At=X("label",{class:"label is-small"},"Upload config file:",-1),SAt={class:"block is-flex is-justify-content-center"},wAt={class:"field has-addons"},xAt={class:"control"},CAt=X("span",null,"Assisted",-1),kAt=[CAt],TAt={class:"control"},AAt=X("span",null,"Expert",-1),EAt=[AAt];function PAt(t,e,n,r,i,o){return Oe(),We("div",oAt,[aAt,X("div",sAt,[X("header",lAt,[uAt,X("button",{class:"delete","aria-label":"close",onClick:e[0]||(e[0]=(...a)=>t.close&&t.close(...a))})]),X("section",cAt,[X("div",fAt,[X("div",hAt,[X("div",dAt,[pAt,X("div",gAt,[X("select",{onChange:e[1]||(e[1]=(...a)=>t.setConfig&&t.setConfig(...a))},[X("option",{value:"default",selected:t.configStore.name==="default"},"Default",8,mAt),X("option",{value:"scope3tool",selected:t.configStore.name==="scope3tool"},"Scope3tool ",8,vAt),X("option",{value:"uploaded",selected:t.configStore.name==="uploaded"},"Upload custom ...",8,yAt)],32)])]),t.configStore.name==="uploaded"?(Oe(),We("div",bAt,[_At,X("input",{class:"button is-small",style:{"margin-left":"15px"},type:"file",name:"configfile",onChange:e[2]||(e[2]=a=>{t.readFile(a)})},null,32)])):ut("",!0)]),X("div",SAt,[X("div",wAt,[X("p",xAt,[X("button",{onClick:e[3]||(e[3]=a=>t.onUserModeClick("assisted")),class:Wt(["button is-small",t.uiStateStore.uiAssistMode==="assisted"?"is-primary":""])},kAt,2)]),X("p",TAt,[X("button",{onClick:e[4]||(e[4]=a=>t.onUserModeClick("expert")),class:Wt(["button is-small",t.uiStateStore.uiAssistMode==="expert"?"is-primary":""])},EAt,2)])])])])])])])}const OAt=ai(iAt,[["render",PAt]]),IAt=zt({props:{icon:String,mode:{type:String,required:!0},callback:Function},computed:{notActive(){return this.mode!==this.uiStateStore.mode},...Yt(Aa)},methods:{onClick(){this.callback===void 0?this.uiStateStore.setMode(this.mode):(this.uiStateStore.setMode(this.mode),this.callback())}}});const $At={class:"icon is-small"};function LAt(t,e,n,r,i,o){const a=$t("font-awesome-icon");return Oe(),We("button",{class:Wt(["button is-primary",{"is-outlined":t.notActive}]),onClick:e[0]||(e[0]=uN((...s)=>t.onClick&&t.onClick(...s),["stop"]))},[X("span",$At,[lt(a,{icon:t.icon},null,8,["icon"])])],2)}const lh=ai(IAt,[["render",LAt],["__scopeId","data-v-9cb724c1"]]),DAt={id:"menu"},MAt={style:{position:"absolute",bottom:"5px",right:"5px"}},NAt={style:{position:"absolute",bottom:"5px",left:"5px"}},qhe="MODE_NONE",B2="MODE_ADD_PLACE",z2="MODE_ADD_TRANSITION",Yc="MODE_MOVE",Vb="MODE_CONNECT_START",Yhe="MODE_LAYOUT",FAt="MODE_EXPORT",fM="MODE_PLAY",RAt="MODE_HELP",VAt=zt({__name:"App",setup(t){const e=Aa(),n=zs();function r(){return Zn().export()}function i(o){let a;o==="1"||(a=JSON.parse(o)),Zn().import(a)}return(o,a)=>{const s=$t("RouterView");return Oe(),We(bn,null,[lt(dHe),X("div",DAt,[lt(lh,{icon:"fas fa-circle",mode:B2}),lt(lh,{icon:"fas fa-square",mode:z2}),lt(lh,{icon:"fas fa-arrow-right",mode:Vb}),ri(n).allowAutoLayout?(Oe(),tn(lh,{key:0,icon:"fas fa-wand-magic-sparkles",mode:Yhe})):ut("",!0),lt(lh,{icon:"fas fa-mouse-pointer",mode:Yc}),lt(lh,{icon:"fas fa-play-circle",mode:fM}),lt(lh,{icon:"fas fa-file-arrow-down",mode:FAt,callback:()=>{ri(m8e)(r(),"export.json","application/json")}},null,8,["callback"]),X("input",{class:"button is-primary is-outlined",style:{"margin-left":"15px"},type:"file",name:"netfile",onChange:a[0]||(a[0]=l=>{ri(Aie)(l,i)})},null,32),ri(n).examples&&ri(n).examples.length>0?(Oe(),We("button",{key:1,style:{"margin-left":"15px"},onClick:a[1]||(a[1]=uN(()=>{ri(e).setModal("examples")},["stop"])),class:"button is-primary is-outlined"}," Beispiele ")):ut("",!0),lt(lh,{icon:"fas fa-question",mode:RAt,callback:()=>{ri(e).showModal="help"}},null,8,["callback"])]),ri(e).showModal==="transition"?(Oe(),tn(W2t,{key:0})):ut("",!0),ri(e).showModal==="place"?(Oe(),tn(Hwt,{key:1})):ut("",!0),ri(e).showEditor!=="none"?(Oe(),tn(YTt,{key:2})):ut("",!0),ri(e).showModal==="help"?(Oe(),tn($He,{key:3})):ut("",!0),ri(e).showModal==="examples"?(Oe(),tn(ikt,{key:4})):ut("",!0),ri(e).showModal==="settings"?(Oe(),tn(OAt,{key:5})):ut("",!0),lt(s),X("div",MAt,[X("a",{onClick:a[2]||(a[2]=l=>ri(Zn)().resetModel())},"Modell zurücksetzen")]),X("div",NAt,[X("a",{onClick:a[3]||(a[3]=()=>{ri(e).showModal="settings"})},"Einstellungen")])],64)}}});/*!
  * vue-router v4.2.0
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const nv=typeof window<"u";function BAt(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const dr=Object.assign;function y4(t,e){const n={};for(const r in e){const i=e[r];n[r]=yu(i)?i.map(t):t(i)}return n}const _1=()=>{},yu=Array.isArray,zAt=/\/$/,jAt=t=>t.replace(zAt,"");function b4(t,e,n="/"){let r,i={},o="",a="";const s=e.indexOf("#");let l=e.indexOf("?");return s<l&&s>=0&&(l=-1),l>-1&&(r=e.slice(0,l),o=e.slice(l+1,s>-1?s:e.length),i=t(o)),s>-1&&(r=r||e.slice(0,s),a=e.slice(s,e.length)),r=GAt(r??e,n),{fullPath:r+(o&&"?")+o+a,path:r,query:i,hash:a}}function UAt(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function RY(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function WAt(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&S0(e.matched[r],n.matched[i])&&Khe(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function S0(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Khe(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!HAt(t[n],e[n]))return!1;return!0}function HAt(t,e){return yu(t)?VY(t,e):yu(e)?VY(e,t):t===e}function VY(t,e){return yu(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function GAt(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let o=n.length-1,a,s;for(a=0;a<r.length;a++)if(s=r[a],s!==".")if(s==="..")o>1&&o--;else break;return n.slice(0,o).join("/")+"/"+r.slice(a-(a===r.length?1:0)).join("/")}var M_;(function(t){t.pop="pop",t.push="push"})(M_||(M_={}));var S1;(function(t){t.back="back",t.forward="forward",t.unknown=""})(S1||(S1={}));function qAt(t){if(!t)if(nv){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),jAt(t)}const YAt=/^[^#]+#/;function KAt(t,e){return t.replace(YAt,"#")+e}function XAt(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const oP=()=>({left:window.pageXOffset,top:window.pageYOffset});function JAt(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=XAt(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function BY(t,e){return(history.state?history.state.position-e:-1)+t}const hM=new Map;function ZAt(t,e){hM.set(t,e)}function QAt(t){const e=hM.get(t);return hM.delete(t),e}let eEt=()=>location.protocol+"//"+location.host;function Xhe(t,e){const{pathname:n,search:r,hash:i}=e,o=t.indexOf("#");if(o>-1){let s=i.includes(t.slice(o))?t.slice(o).length:1,l=i.slice(s);return l[0]!=="/"&&(l="/"+l),RY(l,"")}return RY(n,t)+r+i}function tEt(t,e,n,r){let i=[],o=[],a=null;const s=({state:h})=>{const d=Xhe(t,location),g=n.value,y=e.value;let _=0;if(h){if(n.value=d,e.value=h,a&&a===g){a=null;return}_=y?h.position-y.position:0}else r(d);i.forEach(v=>{v(n.value,g,{delta:_,type:M_.pop,direction:_?_>0?S1.forward:S1.back:S1.unknown})})};function l(){a=n.value}function u(h){i.push(h);const d=()=>{const g=i.indexOf(h);g>-1&&i.splice(g,1)};return o.push(d),d}function c(){const{history:h}=window;h.state&&h.replaceState(dr({},h.state,{scroll:oP()}),"")}function f(){for(const h of o)h();o=[],window.removeEventListener("popstate",s),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",s),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:l,listen:u,destroy:f}}function zY(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?oP():null}}function nEt(t){const{history:e,location:n}=window,r={value:Xhe(t,n)},i={value:e.state};i.value||o(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function o(l,u,c){const f=t.indexOf("#"),h=f>-1?(n.host&&document.querySelector("base")?t:t.slice(f))+l:eEt()+t+l;try{e[c?"replaceState":"pushState"](u,"",h),i.value=u}catch(d){console.error(d),n[c?"replace":"assign"](h)}}function a(l,u){const c=dr({},e.state,zY(i.value.back,l,i.value.forward,!0),u,{position:i.value.position});o(l,c,!0),r.value=l}function s(l,u){const c=dr({},i.value,e.state,{forward:l,scroll:oP()});o(c.current,c,!0);const f=dr({},zY(r.value,l,null),{position:c.position+1},u);o(l,f,!1),r.value=l}return{location:r,state:i,push:s,replace:a}}function rEt(t){t=qAt(t);const e=nEt(t),n=tEt(t,e.state,e.location,e.replace);function r(o,a=!0){a||n.pauseListeners(),history.go(o)}const i=dr({location:"",base:t,go:r,createHref:KAt.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function iEt(t){return typeof t=="string"||t&&typeof t=="object"}function Jhe(t){return typeof t=="string"||typeof t=="symbol"}const uh={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Zhe=Symbol("");var jY;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(jY||(jY={}));function w0(t,e){return dr(new Error,{type:t,[Zhe]:!0},e)}function Hc(t,e){return t instanceof Error&&Zhe in t&&(e==null||!!(t.type&e))}const UY="[^/]+?",oEt={sensitive:!1,strict:!1,start:!0,end:!0},aEt=/[.+*?^${}()[\]/\\]/g;function sEt(t,e){const n=dr({},oEt,e),r=[];let i=n.start?"^":"";const o=[];for(const u of t){const c=u.length?[]:[90];n.strict&&!u.length&&(i+="/");for(let f=0;f<u.length;f++){const h=u[f];let d=40+(n.sensitive?.25:0);if(h.type===0)f||(i+="/"),i+=h.value.replace(aEt,"\\$&"),d+=40;else if(h.type===1){const{value:g,repeatable:y,optional:_,regexp:v}=h;o.push({name:g,repeatable:y,optional:_});const S=v||UY;if(S!==UY){d+=10;try{new RegExp(`(${S})`)}catch(k){throw new Error(`Invalid custom RegExp for param "${g}" (${S}): `+k.message)}}let C=y?`((?:${S})(?:/(?:${S}))*)`:`(${S})`;f||(C=_&&u.length<2?`(?:/${C})`:"/"+C),_&&(C+="?"),i+=C,d+=20,_&&(d+=-8),y&&(d+=-20),S===".*"&&(d+=-50)}c.push(d)}r.push(c)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const a=new RegExp(i,n.sensitive?"":"i");function s(u){const c=u.match(a),f={};if(!c)return null;for(let h=1;h<c.length;h++){const d=c[h]||"",g=o[h-1];f[g.name]=d&&g.repeatable?d.split("/"):d}return f}function l(u){let c="",f=!1;for(const h of t){(!f||!c.endsWith("/"))&&(c+="/"),f=!1;for(const d of h)if(d.type===0)c+=d.value;else if(d.type===1){const{value:g,repeatable:y,optional:_}=d,v=g in u?u[g]:"";if(yu(v)&&!y)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const S=yu(v)?v.join("/"):v;if(!S)if(_)h.length<2&&(c.endsWith("/")?c=c.slice(0,-1):f=!0);else throw new Error(`Missing required param "${g}"`);c+=S}}return c||"/"}return{re:a,score:r,keys:o,parse:s,stringify:l}}function lEt(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function uEt(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const o=lEt(r[n],i[n]);if(o)return o;n++}if(Math.abs(i.length-r.length)===1){if(WY(r))return 1;if(WY(i))return-1}return i.length-r.length}function WY(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const cEt={type:0,value:""},fEt=/[a-zA-Z0-9_]/;function hEt(t){if(!t)return[[]];if(t==="/")return[[cEt]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(d){throw new Error(`ERR (${n})/"${u}": ${d}`)}let n=0,r=n;const i=[];let o;function a(){o&&i.push(o),o=[]}let s=0,l,u="",c="";function f(){u&&(n===0?o.push({type:0,value:u}):n===1||n===2||n===3?(o.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function h(){u+=l}for(;s<t.length;){if(l=t[s++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(u&&f(),a()):l===":"?(f(),n=1):h();break;case 4:h(),n=r;break;case 1:l==="("?n=2:fEt.test(l)?h():(f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&s--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:n=3:c+=l;break;case 3:f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&s--,c="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${u}"`),f(),a(),i}function dEt(t,e,n){const r=sEt(hEt(t.path),n),i=dr(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function pEt(t,e){const n=[],r=new Map;e=qY({strict:!1,end:!0,sensitive:!1},e);function i(c){return r.get(c)}function o(c,f,h){const d=!h,g=gEt(c);g.aliasOf=h&&h.record;const y=qY(e,c),_=[g];if("alias"in c){const C=typeof c.alias=="string"?[c.alias]:c.alias;for(const k of C)_.push(dr({},g,{components:h?h.record.components:g.components,path:k,aliasOf:h?h.record:g}))}let v,S;for(const C of _){const{path:k}=C;if(f&&k[0]!=="/"){const x=f.record.path,m=x[x.length-1]==="/"?"":"/";C.path=f.record.path+(k&&m+k)}if(v=dEt(C,f,y),h?h.alias.push(v):(S=S||v,S!==v&&S.alias.push(v),d&&c.name&&!GY(v)&&a(c.name)),g.children){const x=g.children;for(let m=0;m<x.length;m++)o(x[m],v,h&&h.children[m])}h=h||v,(v.record.components&&Object.keys(v.record.components).length||v.record.name||v.record.redirect)&&l(v)}return S?()=>{a(S)}:_1}function a(c){if(Jhe(c)){const f=r.get(c);f&&(r.delete(c),n.splice(n.indexOf(f),1),f.children.forEach(a),f.alias.forEach(a))}else{const f=n.indexOf(c);f>-1&&(n.splice(f,1),c.record.name&&r.delete(c.record.name),c.children.forEach(a),c.alias.forEach(a))}}function s(){return n}function l(c){let f=0;for(;f<n.length&&uEt(c,n[f])>=0&&(c.record.path!==n[f].record.path||!Qhe(c,n[f]));)f++;n.splice(f,0,c),c.record.name&&!GY(c)&&r.set(c.record.name,c)}function u(c,f){let h,d={},g,y;if("name"in c&&c.name){if(h=r.get(c.name),!h)throw w0(1,{location:c});y=h.record.name,d=dr(HY(f.params,h.keys.filter(S=>!S.optional).map(S=>S.name)),c.params&&HY(c.params,h.keys.map(S=>S.name))),g=h.stringify(d)}else if("path"in c)g=c.path,h=n.find(S=>S.re.test(g)),h&&(d=h.parse(g),y=h.record.name);else{if(h=f.name?r.get(f.name):n.find(S=>S.re.test(f.path)),!h)throw w0(1,{location:c,currentLocation:f});y=h.record.name,d=dr({},f.params,c.params),g=h.stringify(d)}const _=[];let v=h;for(;v;)_.unshift(v.record),v=v.parent;return{name:y,path:g,params:d,matched:_,meta:vEt(_)}}return t.forEach(c=>o(c)),{addRoute:o,resolve:u,removeRoute:a,getRoutes:s,getRecordMatcher:i}}function HY(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function gEt(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:mEt(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function mEt(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="boolean"?n:n[r];return e}function GY(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function vEt(t){return t.reduce((e,n)=>dr(e,n.meta),{})}function qY(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function Qhe(t,e){return e.children.some(n=>n===t||Qhe(t,n))}const ede=/#/g,yEt=/&/g,bEt=/\//g,_Et=/=/g,SEt=/\?/g,tde=/\+/g,wEt=/%5B/g,xEt=/%5D/g,nde=/%5E/g,CEt=/%60/g,rde=/%7B/g,kEt=/%7C/g,ide=/%7D/g,TEt=/%20/g;function g6(t){return encodeURI(""+t).replace(kEt,"|").replace(wEt,"[").replace(xEt,"]")}function AEt(t){return g6(t).replace(rde,"{").replace(ide,"}").replace(nde,"^")}function dM(t){return g6(t).replace(tde,"%2B").replace(TEt,"+").replace(ede,"%23").replace(yEt,"%26").replace(CEt,"`").replace(rde,"{").replace(ide,"}").replace(nde,"^")}function EEt(t){return dM(t).replace(_Et,"%3D")}function PEt(t){return g6(t).replace(ede,"%23").replace(SEt,"%3F")}function OEt(t){return t==null?"":PEt(t).replace(bEt,"%2F")}function XT(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function IEt(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const o=r[i].replace(tde," "),a=o.indexOf("="),s=XT(a<0?o:o.slice(0,a)),l=a<0?null:XT(o.slice(a+1));if(s in e){let u=e[s];yu(u)||(u=e[s]=[u]),u.push(l)}else e[s]=l}return e}function YY(t){let e="";for(let n in t){const r=t[n];if(n=EEt(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(yu(r)?r.map(o=>o&&dM(o)):[r&&dM(r)]).forEach(o=>{o!==void 0&&(e+=(e.length?"&":"")+n,o!=null&&(e+="="+o))})}return e}function $Et(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=yu(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const LEt=Symbol(""),KY=Symbol(""),m6=Symbol(""),ode=Symbol(""),pM=Symbol("");function yb(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t,reset:n}}function vh(t,e,n,r,i){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,s)=>{const l=f=>{f===!1?s(w0(4,{from:n,to:e})):f instanceof Error?s(f):iEt(f)?s(w0(2,{from:e,to:f})):(o&&r.enterCallbacks[i]===o&&typeof f=="function"&&o.push(f),a())},u=t.call(r&&r.instances[i],e,n,l);let c=Promise.resolve(u);t.length<3&&(c=c.then(l)),c.catch(f=>s(f))})}function _4(t,e,n,r){const i=[];for(const o of t)for(const a in o.components){let s=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(DEt(s)){const u=(s.__vccOpts||s)[e];u&&i.push(vh(u,n,r,o,a))}else{let l=s();i.push(()=>l.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const c=BAt(u)?u.default:u;o.components[a]=c;const h=(c.__vccOpts||c)[e];return h&&vh(h,n,r,o,a)()}))}}return i}function DEt(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function XY(t){const e=Ni(m6),n=Ni(ode),r=Ln(()=>e.resolve(ri(t.to))),i=Ln(()=>{const{matched:l}=r.value,{length:u}=l,c=l[u-1],f=n.matched;if(!c||!f.length)return-1;const h=f.findIndex(S0.bind(null,c));if(h>-1)return h;const d=JY(l[u-2]);return u>1&&JY(c)===d&&f[f.length-1].path!==d?f.findIndex(S0.bind(null,l[u-2])):h}),o=Ln(()=>i.value>-1&&REt(n.params,r.value.params)),a=Ln(()=>i.value>-1&&i.value===n.matched.length-1&&Khe(n.params,r.value.params));function s(l={}){return FEt(l)?e[ri(t.replace)?"replace":"push"](ri(t.to)).catch(_1):Promise.resolve()}return{route:r,href:Ln(()=>r.value.href),isActive:o,isExactActive:a,navigate:s}}const MEt=zt({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:XY,setup(t,{slots:e}){const n=dd(XY(t)),{options:r}=Ni(m6),i=Ln(()=>({[ZY(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[ZY(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const o=e.default&&e.default(n);return t.custom?o:Xh("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},o)}}}),NEt=MEt;function FEt(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function REt(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!yu(i)||i.length!==r.length||r.some((o,a)=>o!==i[a]))return!1}return!0}function JY(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const ZY=(t,e,n)=>t??e??n,VEt=zt({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Ni(pM),i=Ln(()=>t.route||r.value),o=Ni(KY,0),a=Ln(()=>{let u=ri(o);const{matched:c}=i.value;let f;for(;(f=c[u])&&!f.components;)u++;return u}),s=Ln(()=>i.value.matched[a.value]);Hb(KY,Ln(()=>a.value+1)),Hb(LEt,s),Hb(pM,i);const l=Tl();return wi(()=>[l.value,s.value,t.name],([u,c,f],[h,d,g])=>{c&&(c.instances[f]=u,d&&d!==c&&u&&u===h&&(c.leaveGuards.size||(c.leaveGuards=d.leaveGuards),c.updateGuards.size||(c.updateGuards=d.updateGuards))),u&&c&&(!d||!S0(c,d)||!h)&&(c.enterCallbacks[f]||[]).forEach(y=>y(u))},{flush:"post"}),()=>{const u=i.value,c=t.name,f=s.value,h=f&&f.components[c];if(!h)return QY(n.default,{Component:h,route:u});const d=f.props[c],g=d?d===!0?u.params:typeof d=="function"?d(u):d:null,_=Xh(h,dr({},g,e,{onVnodeUnmounted:v=>{v.component.isUnmounted&&(f.instances[c]=null)},ref:l}));return QY(n.default,{Component:_,route:u})||_}}});function QY(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const BEt=VEt;function zEt(t){const e=pEt(t.routes,t),n=t.parseQuery||IEt,r=t.stringifyQuery||YY,i=t.history,o=yb(),a=yb(),s=yb(),l=rc(uh);let u=uh;nv&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=y4.bind(null,te=>""+te),f=y4.bind(null,OEt),h=y4.bind(null,XT);function d(te,ce){let ue,fe;return Jhe(te)?(ue=e.getRecordMatcher(te),fe=ce):fe=te,e.addRoute(fe,ue)}function g(te){const ce=e.getRecordMatcher(te);ce&&e.removeRoute(ce)}function y(){return e.getRoutes().map(te=>te.record)}function _(te){return!!e.getRecordMatcher(te)}function v(te,ce){if(ce=dr({},ce||l.value),typeof te=="string"){const O=b4(n,te,ce.path),F=e.resolve({path:O.path},ce),U=i.createHref(O.fullPath);return dr(O,F,{params:h(F.params),hash:XT(O.hash),redirectedFrom:void 0,href:U})}let ue;if("path"in te)ue=dr({},te,{path:b4(n,te.path,ce.path).path});else{const O=dr({},te.params);for(const F in O)O[F]==null&&delete O[F];ue=dr({},te,{params:f(O)}),ce.params=f(ce.params)}const fe=e.resolve(ue,ce),ye=te.hash||"";fe.params=c(h(fe.params));const j=UAt(r,dr({},te,{hash:AEt(ye),path:fe.path})),Y=i.createHref(j);return dr({fullPath:j,hash:ye,query:r===YY?$Et(te.query):te.query||{}},fe,{redirectedFrom:void 0,href:Y})}function S(te){return typeof te=="string"?b4(n,te,l.value.path):dr({},te)}function C(te,ce){if(u!==te)return w0(8,{from:ce,to:te})}function k(te){return T(te)}function x(te){return k(dr(S(te),{replace:!0}))}function m(te){const ce=te.matched[te.matched.length-1];if(ce&&ce.redirect){const{redirect:ue}=ce;let fe=typeof ue=="function"?ue(te):ue;return typeof fe=="string"&&(fe=fe.includes("?")||fe.includes("#")?fe=S(fe):{path:fe},fe.params={}),dr({query:te.query,hash:te.hash,params:"path"in fe?{}:te.params},fe)}}function T(te,ce){const ue=u=v(te),fe=l.value,ye=te.state,j=te.force,Y=te.replace===!0,O=m(ue);if(O)return T(dr(S(O),{state:typeof O=="object"?dr({},ye,O.state):ye,force:j,replace:Y}),ce||ue);const F=ue;F.redirectedFrom=ce;let U;return!j&&WAt(r,fe,ue)&&(U=w0(16,{to:F,from:fe}),se(fe,fe,!0,!1)),(U?Promise.resolve(U):M(F,fe)).catch(Q=>Hc(Q)?Hc(Q,2)?Q:_e(Q):Ae(Q,F,fe)).then(Q=>{if(Q){if(Hc(Q,2))return T(dr({replace:Y},S(Q.to),{state:typeof Q.to=="object"?dr({},ye,Q.to.state):ye,force:j}),ce||F)}else Q=R(F,fe,!0,Y,ye);return L(F,fe,Q),Q})}function P(te,ce){const ue=C(te,ce);return ue?Promise.reject(ue):Promise.resolve()}function I(te){const ce=B.values().next().value;return ce&&typeof ce.runWithContext=="function"?ce.runWithContext(te):te()}function M(te,ce){let ue;const[fe,ye,j]=jEt(te,ce);ue=_4(fe.reverse(),"beforeRouteLeave",te,ce);for(const O of fe)O.leaveGuards.forEach(F=>{ue.push(vh(F,te,ce))});const Y=P.bind(null,te,ce);return ue.push(Y),ae(ue).then(()=>{ue=[];for(const O of o.list())ue.push(vh(O,te,ce));return ue.push(Y),ae(ue)}).then(()=>{ue=_4(ye,"beforeRouteUpdate",te,ce);for(const O of ye)O.updateGuards.forEach(F=>{ue.push(vh(F,te,ce))});return ue.push(Y),ae(ue)}).then(()=>{ue=[];for(const O of te.matched)if(O.beforeEnter&&!ce.matched.includes(O))if(yu(O.beforeEnter))for(const F of O.beforeEnter)ue.push(vh(F,te,ce));else ue.push(vh(O.beforeEnter,te,ce));return ue.push(Y),ae(ue)}).then(()=>(te.matched.forEach(O=>O.enterCallbacks={}),ue=_4(j,"beforeRouteEnter",te,ce),ue.push(Y),ae(ue))).then(()=>{ue=[];for(const O of a.list())ue.push(vh(O,te,ce));return ue.push(Y),ae(ue)}).catch(O=>Hc(O,8)?O:Promise.reject(O))}function L(te,ce,ue){for(const fe of s.list())I(()=>fe(te,ce,ue))}function R(te,ce,ue,fe,ye){const j=C(te,ce);if(j)return j;const Y=ce===uh,O=nv?history.state:{};ue&&(fe||Y?i.replace(te.fullPath,dr({scroll:Y&&O&&O.scroll},ye)):i.push(te.fullPath,ye)),l.value=te,se(te,ce,ue,Y),_e()}let V;function z(){V||(V=i.listen((te,ce,ue)=>{if(!H.listening)return;const fe=v(te),ye=m(fe);if(ye){T(dr(ye,{replace:!0}),fe).catch(_1);return}u=fe;const j=l.value;nv&&ZAt(BY(j.fullPath,ue.delta),oP()),M(fe,j).catch(Y=>Hc(Y,12)?Y:Hc(Y,2)?(T(Y.to,fe).then(O=>{Hc(O,20)&&!ue.delta&&ue.type===M_.pop&&i.go(-1,!1)}).catch(_1),Promise.reject()):(ue.delta&&i.go(-ue.delta,!1),Ae(Y,fe,j))).then(Y=>{Y=Y||R(fe,j,!1),Y&&(ue.delta&&!Hc(Y,8)?i.go(-ue.delta,!1):ue.type===M_.pop&&Hc(Y,20)&&i.go(-1,!1)),L(fe,j,Y)}).catch(_1)}))}let ie=yb(),oe=yb(),Se;function Ae(te,ce,ue){_e(te);const fe=oe.list();return fe.length?fe.forEach(ye=>ye(te,ce,ue)):console.error(te),Promise.reject(te)}function Ee(){return Se&&l.value!==uh?Promise.resolve():new Promise((te,ce)=>{ie.add([te,ce])})}function _e(te){return Se||(Se=!te,z(),ie.list().forEach(([ce,ue])=>te?ue(te):ce()),ie.reset()),te}function se(te,ce,ue,fe){const{scrollBehavior:ye}=t;if(!nv||!ye)return Promise.resolve();const j=!ue&&QAt(BY(te.fullPath,0))||(fe||!ue)&&history.state&&history.state.scroll||null;return A0().then(()=>ye(te,ce,j)).then(Y=>Y&&JAt(Y)).catch(Y=>Ae(Y,te,ce))}const ne=te=>i.go(te);let J;const B=new Set,H={currentRoute:l,listening:!0,addRoute:d,removeRoute:g,hasRoute:_,getRoutes:y,resolve:v,options:t,push:k,replace:x,go:ne,back:()=>ne(-1),forward:()=>ne(1),beforeEach:o.add,beforeResolve:a.add,afterEach:s.add,onError:oe.add,isReady:Ee,install(te){const ce=this;te.component("RouterLink",NEt),te.component("RouterView",BEt),te.config.globalProperties.$router=ce,Object.defineProperty(te.config.globalProperties,"$route",{enumerable:!0,get:()=>ri(l)}),nv&&!J&&l.value===uh&&(J=!0,k(i.location).catch(ye=>{}));const ue={};for(const ye in uh)ue[ye]=Ln(()=>l.value[ye]);te.provide(m6,ce),te.provide(ode,dd(ue)),te.provide(pM,l);const fe=te.unmount;B.add(te),te.unmount=function(){B.delete(te),B.size<1&&(u=uh,V&&V(),V=null,l.value=uh,J=!1,Se=!1),fe()}}};function ae(te){return te.reduce((ce,ue)=>ce.then(()=>I(ue)),Promise.resolve())}return H}function jEt(t,e){const n=[],r=[],i=[],o=Math.max(e.matched.length,t.matched.length);for(let a=0;a<o;a++){const s=e.matched[a];s&&(t.matched.find(u=>S0(u,s))?r.push(s):n.push(s));const l=t.matched[a];l&&(e.matched.find(u=>S0(u,l))||i.push(l))}return[n,r,i]}const UEt=zt({computed:{...Yt(zs),...Yt(Zn)},mounted(){this.$route.params.configID==="scope3tool"&&this.configStore.loadConfig(Ghe);const e=this.$route.params.modelID;if(e){const n=this.configStore.examples.find(r=>r.name===e);n&&this.netStore.import(n.net)}}});function WEt(t,e,n,r,i,o){return null}const eK=ai(UEt,[["render",WEt]]),HEt=zEt({history:rEt("/"),routes:[{path:"/:configID",name:"config",component:eK},{path:"/:configID/:modelID",name:"model",component:eK}]});zbe.add(hEe,lEe,fEe,pEe,rEe,oEe,QAe,sEe,yEe,vEe,wEe,JAe,tEe,cEe,dEe,gEe,uEe,CEe,bEe,xEe,eEe,_Ee);const qS=oJ(VAt).component("font-awesome-icon",dwe);qS.use(HEt);qS.use(TEe());qS.use(KAe,{extensions:[]});qS.component("v-chart",GMe);qS.mount("#app");
