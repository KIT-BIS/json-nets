var cye=Object.defineProperty;var uye=(t,e,n)=>e in t?cye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Un=(t,e,n)=>(uye(t,typeof e!="symbol"?e+"":e,n),n),b5=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var rt=(t,e,n)=>(b5(t,e,"read from private field"),n?n.call(t):e.get(t)),ri=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},il=(t,e,n,r)=>(b5(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);var Oy=(t,e,n,r)=>({set _(i){il(t,e,i,n)},get _(){return rt(t,e,r)}}),Dc=(t,e,n)=>(b5(t,e,"access private method"),n);function oK(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function nR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nR(Object(n),!0).forEach(function(r){Qi(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hx(t){"@babel/helpers - typeof";return Hx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hx(t)}function fye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rR(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function dye(t,e,n){return e&&rR(t.prototype,e),n&&rR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Qi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v6(t,e){return pye(t)||mye(t,e)||aK(t,e)||yye()}function V2(t){return hye(t)||gye(t)||aK(t)||vye()}function hye(t){if(Array.isArray(t))return xE(t)}function pye(t){if(Array.isArray(t))return t}function gye(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function mye(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,o=!1,a,s;try{for(n=n.call(t);!(i=(a=n.next()).done)&&(r.push(a.value),!(e&&r.length===e));i=!0);}catch(l){o=!0,s=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}return r}}function aK(t,e){if(t){if(typeof t=="string")return xE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xE(t,e)}}function xE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function vye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var iR=function(){},y6={},sK={},lK=null,cK={mark:iR,measure:iR};try{typeof window<"u"&&(y6=window),typeof document<"u"&&(sK=document),typeof MutationObserver<"u"&&(lK=MutationObserver),typeof performance<"u"&&(cK=performance)}catch{}var bye=y6.navigator||{},oR=bye.userAgent,aR=oR===void 0?"":oR,Hd=y6,Jr=sK,sR=lK,z_=cK;Hd.document;var Ef=!!Jr.documentElement&&!!Jr.head&&typeof Jr.addEventListener=="function"&&typeof Jr.createElement=="function",uK=~aR.indexOf("MSIE")||~aR.indexOf("Trident/"),V_,B_,j_,H_,U_,bf="___FONT_AWESOME___",CE=16,fK="fa",dK="svg-inline--fa",pg="data-fa-i2svg",TE="data-fa-pseudo-element",Sye="data-fa-pseudo-element-pending",b6="data-prefix",S6="data-icon",lR="fontawesome-i2svg",_ye="async",wye=["HTML","HEAD","STYLE","SCRIPT"],hK=function(){try{return!0}catch{return!1}}(),Yr="classic",xi="sharp",_6=[Yr,xi];function B2(t){return new Proxy(t,{get:function(n,r){return r in n?n[r]:n[Yr]}})}var w1=B2((V_={},Qi(V_,Yr,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit"}),Qi(V_,xi,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light"}),V_)),k1=B2((B_={},Qi(B_,Yr,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),Qi(B_,xi,{solid:"fass",regular:"fasr",light:"fasl"}),B_)),x1=B2((j_={},Qi(j_,Yr,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),Qi(j_,xi,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light"}),j_)),kye=B2((H_={},Qi(H_,Yr,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),Qi(H_,xi,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl"}),H_)),xye=/fa(s|r|l|t|d|b|k|ss|sr|sl)?[\-\ ]/,pK="fa-layers-text",Cye=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,Tye=B2((U_={},Qi(U_,Yr,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),Qi(U_,xi,{900:"fass",400:"fasr",300:"fasl"}),U_)),gK=[1,2,3,4,5,6,7,8,9,10],Aye=gK.concat([11,12,13,14,15,16,17,18,19,20]),Pye=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Vp={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},C1=new Set;Object.keys(k1[Yr]).map(C1.add.bind(C1));Object.keys(k1[xi]).map(C1.add.bind(C1));var Eye=[].concat(_6,V2(C1),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",Vp.GROUP,Vp.SWAP_OPACITY,Vp.PRIMARY,Vp.SECONDARY]).concat(gK.map(function(t){return"".concat(t,"x")})).concat(Aye.map(function(t){return"w-".concat(t)})),Vb=Hd.FontAwesomeConfig||{};function Oye(t){var e=Jr.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}function Iye(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}if(Jr&&typeof Jr.querySelector=="function"){var $ye=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];$ye.forEach(function(t){var e=v6(t,2),n=e[0],r=e[1],i=Iye(Oye(n));i!=null&&(Vb[r]=i)})}var mK={styleDefault:"solid",familyDefault:"classic",cssPrefix:fK,replacementClass:dK,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Vb.familyPrefix&&(Vb.cssPrefix=Vb.familyPrefix);var Jv=yt(yt({},mK),Vb);Jv.autoReplaceSvg||(Jv.observeMutations=!1);var Et={};Object.keys(mK).forEach(function(t){Object.defineProperty(Et,t,{enumerable:!0,set:function(n){Jv[t]=n,Bb.forEach(function(r){return r(Et)})},get:function(){return Jv[t]}})});Object.defineProperty(Et,"familyPrefix",{enumerable:!0,set:function(e){Jv.cssPrefix=e,Bb.forEach(function(n){return n(Et)})},get:function(){return Jv.cssPrefix}});Hd.FontAwesomeConfig=Et;var Bb=[];function Fye(t){return Bb.push(t),function(){Bb.splice(Bb.indexOf(t),1)}}var Yf=CE,nu={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function Lye(t){if(!(!t||!Ef)){var e=Jr.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;for(var n=Jr.head.childNodes,r=null,i=n.length-1;i>-1;i--){var o=n[i],a=(o.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(a)>-1&&(r=o)}return Jr.head.insertBefore(e,r),t}}var Dye="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function T1(){for(var t=12,e="";t-- >0;)e+=Dye[Math.random()*62|0];return e}function x0(t){for(var e=[],n=(t||[]).length>>>0;n--;)e[n]=t[n];return e}function w6(t){return t.classList?x0(t.classList):(t.getAttribute("class")||"").split(" ").filter(function(e){return e})}function vK(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Nye(t){return Object.keys(t||{}).reduce(function(e,n){return e+"".concat(n,'="').concat(vK(t[n]),'" ')},"").trim()}function ZC(t){return Object.keys(t||{}).reduce(function(e,n){return e+"".concat(n,": ").concat(t[n].trim(),";")},"")}function k6(t){return t.size!==nu.size||t.x!==nu.x||t.y!==nu.y||t.rotate!==nu.rotate||t.flipX||t.flipY}function Mye(t){var e=t.transform,n=t.containerWidth,r=t.iconWidth,i={transform:"translate(".concat(n/2," 256)")},o="translate(".concat(e.x*32,", ").concat(e.y*32,") "),a="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),s="rotate(".concat(e.rotate," 0 0)"),l={transform:"".concat(o," ").concat(a," ").concat(s)},c={transform:"translate(".concat(r/2*-1," -256)")};return{outer:i,inner:l,path:c}}function Rye(t){var e=t.transform,n=t.width,r=n===void 0?CE:n,i=t.height,o=i===void 0?CE:i,a=t.startCentered,s=a===void 0?!1:a,l="";return s&&uK?l+="translate(".concat(e.x/Yf-r/2,"em, ").concat(e.y/Yf-o/2,"em) "):s?l+="translate(calc(-50% + ".concat(e.x/Yf,"em), calc(-50% + ").concat(e.y/Yf,"em)) "):l+="translate(".concat(e.x/Yf,"em, ").concat(e.y/Yf,"em) "),l+="scale(".concat(e.size/Yf*(e.flipX?-1:1),", ").concat(e.size/Yf*(e.flipY?-1:1),") "),l+="rotate(".concat(e.rotate,"deg) "),l}var zye=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    -webkit-transition-delay: 0s;
            transition-delay: 0s;
    -webkit-transition-duration: 0s;
            transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function yK(){var t=fK,e=dK,n=Et.cssPrefix,r=Et.replacementClass,i=zye;if(n!==t||r!==e){var o=new RegExp("\\.".concat(t,"\\-"),"g"),a=new RegExp("\\--".concat(t,"\\-"),"g"),s=new RegExp("\\.".concat(e),"g");i=i.replace(o,".".concat(n,"-")).replace(a,"--".concat(n,"-")).replace(s,".".concat(r))}return i}var cR=!1;function S5(){Et.autoAddCss&&!cR&&(Lye(yK()),cR=!0)}var Vye={mixout:function(){return{dom:{css:yK,insertCss:S5}}},hooks:function(){return{beforeDOMElementCreation:function(){S5()},beforeI2svg:function(){S5()}}}},Sf=Hd||{};Sf[bf]||(Sf[bf]={});Sf[bf].styles||(Sf[bf].styles={});Sf[bf].hooks||(Sf[bf].hooks={});Sf[bf].shims||(Sf[bf].shims=[]);var lc=Sf[bf],bK=[],Bye=function t(){Jr.removeEventListener("DOMContentLoaded",t),Ux=1,bK.map(function(e){return e()})},Ux=!1;Ef&&(Ux=(Jr.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Jr.readyState),Ux||Jr.addEventListener("DOMContentLoaded",Bye));function jye(t){Ef&&(Ux?setTimeout(t,0):bK.push(t))}function j2(t){var e=t.tag,n=t.attributes,r=n===void 0?{}:n,i=t.children,o=i===void 0?[]:i;return typeof t=="string"?vK(t):"<".concat(e," ").concat(Nye(r),">").concat(o.map(j2).join(""),"</").concat(e,">")}function uR(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}var Hye=function(e,n){return function(r,i,o,a){return e.call(n,r,i,o,a)}},_5=function(e,n,r,i){var o=Object.keys(e),a=o.length,s=i!==void 0?Hye(n,i):n,l,c,u;for(r===void 0?(l=1,u=e[o[0]]):(l=0,u=r);l<a;l++)c=o[l],u=s(u,e[c],c,e);return u};function Uye(t){for(var e=[],n=0,r=t.length;n<r;){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=t.charCodeAt(n++);(o&64512)==56320?e.push(((i&1023)<<10)+(o&1023)+65536):(e.push(i),n--)}else e.push(i)}return e}function AE(t){var e=Uye(t);return e.length===1?e[0].toString(16):null}function Wye(t,e){var n=t.length,r=t.charCodeAt(e),i;return r>=55296&&r<=56319&&n>e+1&&(i=t.charCodeAt(e+1),i>=56320&&i<=57343)?(r-55296)*1024+i-56320+65536:r}function fR(t){return Object.keys(t).reduce(function(e,n){var r=t[n],i=!!r.icon;return i?e[r.iconName]=r.icon:e[n]=r,e},{})}function PE(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.skipHooks,i=r===void 0?!1:r,o=fR(e);typeof lc.hooks.addPack=="function"&&!i?lc.hooks.addPack(t,fR(e)):lc.styles[t]=yt(yt({},lc.styles[t]||{}),o),t==="fas"&&PE("fa",e)}var W_,G_,q_,iv=lc.styles,Gye=lc.shims,qye=(W_={},Qi(W_,Yr,Object.values(x1[Yr])),Qi(W_,xi,Object.values(x1[xi])),W_),x6=null,SK={},_K={},wK={},kK={},xK={},Yye=(G_={},Qi(G_,Yr,Object.keys(w1[Yr])),Qi(G_,xi,Object.keys(w1[xi])),G_);function Kye(t){return~Eye.indexOf(t)}function Xye(t,e){var n=e.split("-"),r=n[0],i=n.slice(1).join("-");return r===t&&i!==""&&!Kye(i)?i:null}var CK=function(){var e=function(o){return _5(iv,function(a,s,l){return a[l]=_5(s,o,{}),a},{})};SK=e(function(i,o,a){if(o[3]&&(i[o[3]]=a),o[2]){var s=o[2].filter(function(l){return typeof l=="number"});s.forEach(function(l){i[l.toString(16)]=a})}return i}),_K=e(function(i,o,a){if(i[a]=a,o[2]){var s=o[2].filter(function(l){return typeof l=="string"});s.forEach(function(l){i[l]=a})}return i}),xK=e(function(i,o,a){var s=o[2];return i[a]=a,s.forEach(function(l){i[l]=a}),i});var n="far"in iv||Et.autoFetchSvg,r=_5(Gye,function(i,o){var a=o[0],s=o[1],l=o[2];return s==="far"&&!n&&(s="fas"),typeof a=="string"&&(i.names[a]={prefix:s,iconName:l}),typeof a=="number"&&(i.unicodes[a.toString(16)]={prefix:s,iconName:l}),i},{names:{},unicodes:{}});wK=r.names,kK=r.unicodes,x6=QC(Et.styleDefault,{family:Et.familyDefault})};Fye(function(t){x6=QC(t.styleDefault,{family:Et.familyDefault})});CK();function C6(t,e){return(SK[t]||{})[e]}function Jye(t,e){return(_K[t]||{})[e]}function Bp(t,e){return(xK[t]||{})[e]}function TK(t){return wK[t]||{prefix:null,iconName:null}}function Zye(t){var e=kK[t],n=C6("fas",t);return e||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function Ud(){return x6}var T6=function(){return{prefix:null,iconName:null,rest:[]}};function QC(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.family,r=n===void 0?Yr:n,i=w1[r][t],o=k1[r][t]||k1[r][i],a=t in lc.styles?t:null;return o||a||null}var dR=(q_={},Qi(q_,Yr,Object.keys(x1[Yr])),Qi(q_,xi,Object.keys(x1[xi])),q_);function eT(t){var e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.skipLookups,i=r===void 0?!1:r,o=(e={},Qi(e,Yr,"".concat(Et.cssPrefix,"-").concat(Yr)),Qi(e,xi,"".concat(Et.cssPrefix,"-").concat(xi)),e),a=null,s=Yr;(t.includes(o[Yr])||t.some(function(c){return dR[Yr].includes(c)}))&&(s=Yr),(t.includes(o[xi])||t.some(function(c){return dR[xi].includes(c)}))&&(s=xi);var l=t.reduce(function(c,u){var f=Xye(Et.cssPrefix,u);if(iv[u]?(u=qye[s].includes(u)?kye[s][u]:u,a=u,c.prefix=u):Yye[s].indexOf(u)>-1?(a=u,c.prefix=QC(u,{family:s})):f?c.iconName=f:u!==Et.replacementClass&&u!==o[Yr]&&u!==o[xi]&&c.rest.push(u),!i&&c.prefix&&c.iconName){var d=a==="fa"?TK(c.iconName):{},h=Bp(c.prefix,c.iconName);d.prefix&&(a=null),c.iconName=d.iconName||h||c.iconName,c.prefix=d.prefix||c.prefix,c.prefix==="far"&&!iv.far&&iv.fas&&!Et.autoFetchSvg&&(c.prefix="fas")}return c},T6());return(t.includes("fa-brands")||t.includes("fab"))&&(l.prefix="fab"),(t.includes("fa-duotone")||t.includes("fad"))&&(l.prefix="fad"),!l.prefix&&s===xi&&(iv.fass||Et.autoFetchSvg)&&(l.prefix="fass",l.iconName=Bp(l.prefix,l.iconName)||l.iconName),(l.prefix==="fa"||a==="fa")&&(l.prefix=Ud()||"fas"),l}var Qye=function(){function t(){fye(this,t),this.definitions={}}return dye(t,[{key:"add",value:function(){for(var n=this,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=i.reduce(this._pullDefinitions,{});Object.keys(a).forEach(function(s){n.definitions[s]=yt(yt({},n.definitions[s]||{}),a[s]),PE(s,a[s]);var l=x1[Yr][s];l&&PE(l,a[s]),CK()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(n,r){var i=r.prefix&&r.iconName&&r.icon?{0:r}:r;return Object.keys(i).map(function(o){var a=i[o],s=a.prefix,l=a.iconName,c=a.icon,u=c[2];n[s]||(n[s]={}),u.length>0&&u.forEach(function(f){typeof f=="string"&&(n[s][f]=c)}),n[s][l]=c}),n}}]),t}(),hR=[],ov={},_v={},ebe=Object.keys(_v);function tbe(t,e){var n=e.mixoutsTo;return hR=t,ov={},Object.keys(_v).forEach(function(r){ebe.indexOf(r)===-1&&delete _v[r]}),hR.forEach(function(r){var i=r.mixout?r.mixout():{};if(Object.keys(i).forEach(function(a){typeof i[a]=="function"&&(n[a]=i[a]),Hx(i[a])==="object"&&Object.keys(i[a]).forEach(function(s){n[a]||(n[a]={}),n[a][s]=i[a][s]})}),r.hooks){var o=r.hooks();Object.keys(o).forEach(function(a){ov[a]||(ov[a]=[]),ov[a].push(o[a])})}r.provides&&r.provides(_v)}),n}function EE(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=ov[t]||[];return o.forEach(function(a){e=a.apply(null,[e].concat(r))}),e}function gg(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=ov[t]||[];i.forEach(function(o){o.apply(null,n)})}function _f(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);return _v[t]?_v[t].apply(null,e):void 0}function OE(t){t.prefix==="fa"&&(t.prefix="fas");var e=t.iconName,n=t.prefix||Ud();if(e)return e=Bp(n,e)||e,uR(AK.definitions,n,e)||uR(lc.styles,n,e)}var AK=new Qye,nbe=function(){Et.autoReplaceSvg=!1,Et.observeMutations=!1,gg("noAuto")},rbe={i2svg:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ef?(gg("beforeI2svg",e),_f("pseudoElements2svg",e),_f("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.autoReplaceSvgRoot;Et.autoReplaceSvg===!1&&(Et.autoReplaceSvg=!0),Et.observeMutations=!0,jye(function(){obe({autoReplaceSvgRoot:n}),gg("watch",e)})}},ibe={icon:function(e){if(e===null)return null;if(Hx(e)==="object"&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:Bp(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&e.length===2){var n=e[1].indexOf("fa-")===0?e[1].slice(3):e[1],r=QC(e[0]);return{prefix:r,iconName:Bp(r,n)||n}}if(typeof e=="string"&&(e.indexOf("".concat(Et.cssPrefix,"-"))>-1||e.match(xye))){var i=eT(e.split(" "),{skipLookups:!0});return{prefix:i.prefix||Ud(),iconName:Bp(i.prefix,i.iconName)||i.iconName}}if(typeof e=="string"){var o=Ud();return{prefix:o,iconName:Bp(o,e)||e}}}},Us={noAuto:nbe,config:Et,dom:rbe,parse:ibe,library:AK,findIconDefinition:OE,toHtml:j2},obe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.autoReplaceSvgRoot,r=n===void 0?Jr:n;(Object.keys(lc.styles).length>0||Et.autoFetchSvg)&&Ef&&Et.autoReplaceSvg&&Us.dom.i2svg({node:r})};function tT(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(function(r){return j2(r)})}}),Object.defineProperty(t,"node",{get:function(){if(Ef){var r=Jr.createElement("div");return r.innerHTML=t.html,r.children}}}),t}function abe(t){var e=t.children,n=t.main,r=t.mask,i=t.attributes,o=t.styles,a=t.transform;if(k6(a)&&n.found&&!r.found){var s=n.width,l=n.height,c={x:s/l/2,y:.5};i.style=ZC(yt(yt({},o),{},{"transform-origin":"".concat(c.x+a.x/16,"em ").concat(c.y+a.y/16,"em")}))}return[{tag:"svg",attributes:i,children:e}]}function sbe(t){var e=t.prefix,n=t.iconName,r=t.children,i=t.attributes,o=t.symbol,a=o===!0?"".concat(e,"-").concat(Et.cssPrefix,"-").concat(n):o;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:yt(yt({},i),{},{id:a}),children:r}]}]}function A6(t){var e=t.icons,n=e.main,r=e.mask,i=t.prefix,o=t.iconName,a=t.transform,s=t.symbol,l=t.title,c=t.maskId,u=t.titleId,f=t.extra,d=t.watchable,h=d===void 0?!1:d,g=r.found?r:n,y=g.width,S=g.height,v=i==="fak",_=[Et.replacementClass,o?"".concat(Et.cssPrefix,"-").concat(o):""].filter(function(I){return f.classes.indexOf(I)===-1}).filter(function(I){return I!==""||!!I}).concat(f.classes).join(" "),x={children:[],attributes:yt(yt({},f.attributes),{},{"data-prefix":i,"data-icon":o,class:_,role:f.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(y," ").concat(S)})},C=v&&!~f.classes.indexOf("fa-fw")?{width:"".concat(y/S*16*.0625,"em")}:{};h&&(x.attributes[pg]=""),l&&(x.children.push({tag:"title",attributes:{id:x.attributes["aria-labelledby"]||"title-".concat(u||T1())},children:[l]}),delete x.attributes.title);var k=yt(yt({},x),{},{prefix:i,iconName:o,main:n,mask:r,maskId:c,transform:a,symbol:s,styles:yt(yt({},C),f.styles)}),m=r.found&&n.found?_f("generateAbstractMask",k)||{children:[],attributes:{}}:_f("generateAbstractIcon",k)||{children:[],attributes:{}},T=m.children,E=m.attributes;return k.children=T,k.attributes=E,s?sbe(k):abe(k)}function pR(t){var e=t.content,n=t.width,r=t.height,i=t.transform,o=t.title,a=t.extra,s=t.watchable,l=s===void 0?!1:s,c=yt(yt(yt({},a.attributes),o?{title:o}:{}),{},{class:a.classes.join(" ")});l&&(c[pg]="");var u=yt({},a.styles);k6(i)&&(u.transform=Rye({transform:i,startCentered:!0,width:n,height:r}),u["-webkit-transform"]=u.transform);var f=ZC(u);f.length>0&&(c.style=f);var d=[];return d.push({tag:"span",attributes:c,children:[e]}),o&&d.push({tag:"span",attributes:{class:"sr-only"},children:[o]}),d}function lbe(t){var e=t.content,n=t.title,r=t.extra,i=yt(yt(yt({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),o=ZC(r.styles);o.length>0&&(i.style=o);var a=[];return a.push({tag:"span",attributes:i,children:[e]}),n&&a.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),a}var w5=lc.styles;function IE(t){var e=t[0],n=t[1],r=t.slice(4),i=v6(r,1),o=i[0],a=null;return Array.isArray(o)?a={tag:"g",attributes:{class:"".concat(Et.cssPrefix,"-").concat(Vp.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Et.cssPrefix,"-").concat(Vp.SECONDARY),fill:"currentColor",d:o[0]}},{tag:"path",attributes:{class:"".concat(Et.cssPrefix,"-").concat(Vp.PRIMARY),fill:"currentColor",d:o[1]}}]}:a={tag:"path",attributes:{fill:"currentColor",d:o}},{found:!0,width:e,height:n,icon:a}}var cbe={found:!1,width:512,height:512};function ube(t,e){!hK&&!Et.showMissingIcons&&t&&console.error('Icon with name "'.concat(t,'" and prefix "').concat(e,'" is missing.'))}function $E(t,e){var n=e;return e==="fa"&&Et.styleDefault!==null&&(e=Ud()),new Promise(function(r,i){if(_f("missingIconAbstract"),n==="fa"){var o=TK(t)||{};t=o.iconName||t,e=o.prefix||e}if(t&&e&&w5[e]&&w5[e][t]){var a=w5[e][t];return r(IE(a))}ube(t,e),r(yt(yt({},cbe),{},{icon:Et.showMissingIcons&&t?_f("missingIconAbstract")||{}:{}}))})}var gR=function(){},FE=Et.measurePerformance&&z_&&z_.mark&&z_.measure?z_:{mark:gR,measure:gR},bb='FA "6.4.0"',fbe=function(e){return FE.mark("".concat(bb," ").concat(e," begins")),function(){return PK(e)}},PK=function(e){FE.mark("".concat(bb," ").concat(e," ends")),FE.measure("".concat(bb," ").concat(e),"".concat(bb," ").concat(e," begins"),"".concat(bb," ").concat(e," ends"))},P6={begin:fbe,end:PK},qk=function(){};function mR(t){var e=t.getAttribute?t.getAttribute(pg):null;return typeof e=="string"}function dbe(t){var e=t.getAttribute?t.getAttribute(b6):null,n=t.getAttribute?t.getAttribute(S6):null;return e&&n}function hbe(t){return t&&t.classList&&t.classList.contains&&t.classList.contains(Et.replacementClass)}function pbe(){if(Et.autoReplaceSvg===!0)return Yk.replace;var t=Yk[Et.autoReplaceSvg];return t||Yk.replace}function gbe(t){return Jr.createElementNS("http://www.w3.org/2000/svg",t)}function mbe(t){return Jr.createElement(t)}function EK(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.ceFn,r=n===void 0?t.tag==="svg"?gbe:mbe:n;if(typeof t=="string")return Jr.createTextNode(t);var i=r(t.tag);Object.keys(t.attributes||[]).forEach(function(a){i.setAttribute(a,t.attributes[a])});var o=t.children||[];return o.forEach(function(a){i.appendChild(EK(a,{ceFn:r}))}),i}function vbe(t){var e=" ".concat(t.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}var Yk={replace:function(e){var n=e[0];if(n.parentNode)if(e[1].forEach(function(i){n.parentNode.insertBefore(EK(i),n)}),n.getAttribute(pg)===null&&Et.keepOriginalSource){var r=Jr.createComment(vbe(n));n.parentNode.replaceChild(r,n)}else n.remove()},nest:function(e){var n=e[0],r=e[1];if(~w6(n).indexOf(Et.replacementClass))return Yk.replace(e);var i=new RegExp("".concat(Et.cssPrefix,"-.*"));if(delete r[0].attributes.id,r[0].attributes.class){var o=r[0].attributes.class.split(" ").reduce(function(s,l){return l===Et.replacementClass||l.match(i)?s.toSvg.push(l):s.toNode.push(l),s},{toNode:[],toSvg:[]});r[0].attributes.class=o.toSvg.join(" "),o.toNode.length===0?n.removeAttribute("class"):n.setAttribute("class",o.toNode.join(" "))}var a=r.map(function(s){return j2(s)}).join(`
`);n.setAttribute(pg,""),n.innerHTML=a}};function vR(t){t()}function OK(t,e){var n=typeof e=="function"?e:qk;if(t.length===0)n();else{var r=vR;Et.mutateApproach===_ye&&(r=Hd.requestAnimationFrame||vR),r(function(){var i=pbe(),o=P6.begin("mutate");t.map(i),o(),n()})}}var E6=!1;function IK(){E6=!0}function LE(){E6=!1}var Wx=null;function yR(t){if(sR&&Et.observeMutations){var e=t.treeCallback,n=e===void 0?qk:e,r=t.nodeCallback,i=r===void 0?qk:r,o=t.pseudoElementsCallback,a=o===void 0?qk:o,s=t.observeMutationsRoot,l=s===void 0?Jr:s;Wx=new sR(function(c){if(!E6){var u=Ud();x0(c).forEach(function(f){if(f.type==="childList"&&f.addedNodes.length>0&&!mR(f.addedNodes[0])&&(Et.searchPseudoElements&&a(f.target),n(f.target)),f.type==="attributes"&&f.target.parentNode&&Et.searchPseudoElements&&a(f.target.parentNode),f.type==="attributes"&&mR(f.target)&&~Pye.indexOf(f.attributeName))if(f.attributeName==="class"&&dbe(f.target)){var d=eT(w6(f.target)),h=d.prefix,g=d.iconName;f.target.setAttribute(b6,h||u),g&&f.target.setAttribute(S6,g)}else hbe(f.target)&&i(f.target)})}}),Ef&&Wx.observe(l,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function ybe(){Wx&&Wx.disconnect()}function bbe(t){var e=t.getAttribute("style"),n=[];return e&&(n=e.split(";").reduce(function(r,i){var o=i.split(":"),a=o[0],s=o.slice(1);return a&&s.length>0&&(r[a]=s.join(":").trim()),r},{})),n}function Sbe(t){var e=t.getAttribute("data-prefix"),n=t.getAttribute("data-icon"),r=t.innerText!==void 0?t.innerText.trim():"",i=eT(w6(t));return i.prefix||(i.prefix=Ud()),e&&n&&(i.prefix=e,i.iconName=n),i.iconName&&i.prefix||(i.prefix&&r.length>0&&(i.iconName=Jye(i.prefix,t.innerText)||C6(i.prefix,AE(t.innerText))),!i.iconName&&Et.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(i.iconName=t.firstChild.data)),i}function _be(t){var e=x0(t.attributes).reduce(function(i,o){return i.name!=="class"&&i.name!=="style"&&(i[o.name]=o.value),i},{}),n=t.getAttribute("title"),r=t.getAttribute("data-fa-title-id");return Et.autoA11y&&(n?e["aria-labelledby"]="".concat(Et.replacementClass,"-title-").concat(r||T1()):(e["aria-hidden"]="true",e.focusable="false")),e}function wbe(){return{iconName:null,title:null,titleId:null,prefix:null,transform:nu,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function bR(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},n=Sbe(t),r=n.iconName,i=n.prefix,o=n.rest,a=_be(t),s=EE("parseNodeAttributes",{},t),l=e.styleParser?bbe(t):[];return yt({iconName:r,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:i,transform:nu,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:o,styles:l,attributes:a}},s)}var kbe=lc.styles;function $K(t){var e=Et.autoReplaceSvg==="nest"?bR(t,{styleParser:!1}):bR(t);return~e.extra.classes.indexOf(pK)?_f("generateLayersText",t,e):_f("generateSvgReplacementMutation",t,e)}var Wd=new Set;_6.map(function(t){Wd.add("fa-".concat(t))});Object.keys(w1[Yr]).map(Wd.add.bind(Wd));Object.keys(w1[xi]).map(Wd.add.bind(Wd));Wd=V2(Wd);function SR(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Ef)return Promise.resolve();var n=Jr.documentElement.classList,r=function(f){return n.add("".concat(lR,"-").concat(f))},i=function(f){return n.remove("".concat(lR,"-").concat(f))},o=Et.autoFetchSvg?Wd:_6.map(function(u){return"fa-".concat(u)}).concat(Object.keys(kbe));o.includes("fa")||o.push("fa");var a=[".".concat(pK,":not([").concat(pg,"])")].concat(o.map(function(u){return".".concat(u,":not([").concat(pg,"])")})).join(", ");if(a.length===0)return Promise.resolve();var s=[];try{s=x0(t.querySelectorAll(a))}catch{}if(s.length>0)r("pending"),i("complete");else return Promise.resolve();var l=P6.begin("onTree"),c=s.reduce(function(u,f){try{var d=$K(f);d&&u.push(d)}catch(h){hK||h.name==="MissingIcon"&&console.error(h)}return u},[]);return new Promise(function(u,f){Promise.all(c).then(function(d){OK(d,function(){r("active"),r("complete"),i("pending"),typeof e=="function"&&e(),l(),u()})}).catch(function(d){l(),f(d)})})}function xbe(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;$K(t).then(function(n){n&&OK([n],e)})}function Cbe(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=(e||{}).icon?e:OE(e||{}),i=n.mask;return i&&(i=(i||{}).icon?i:OE(i||{})),t(r,yt(yt({},n),{},{mask:i}))}}var Tbe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.transform,i=r===void 0?nu:r,o=n.symbol,a=o===void 0?!1:o,s=n.mask,l=s===void 0?null:s,c=n.maskId,u=c===void 0?null:c,f=n.title,d=f===void 0?null:f,h=n.titleId,g=h===void 0?null:h,y=n.classes,S=y===void 0?[]:y,v=n.attributes,_=v===void 0?{}:v,x=n.styles,C=x===void 0?{}:x;if(e){var k=e.prefix,m=e.iconName,T=e.icon;return tT(yt({type:"icon"},e),function(){return gg("beforeDOMElementCreation",{iconDefinition:e,params:n}),Et.autoA11y&&(d?_["aria-labelledby"]="".concat(Et.replacementClass,"-title-").concat(g||T1()):(_["aria-hidden"]="true",_.focusable="false")),A6({icons:{main:IE(T),mask:l?IE(l.icon):{found:!1,width:null,height:null,icon:{}}},prefix:k,iconName:m,transform:yt(yt({},nu),i),symbol:a,title:d,maskId:u,titleId:g,extra:{attributes:_,styles:C,classes:S}})})}},Abe={mixout:function(){return{icon:Cbe(Tbe)}},hooks:function(){return{mutationObserverCallbacks:function(n){return n.treeCallback=SR,n.nodeCallback=xbe,n}}},provides:function(e){e.i2svg=function(n){var r=n.node,i=r===void 0?Jr:r,o=n.callback,a=o===void 0?function(){}:o;return SR(i,a)},e.generateSvgReplacementMutation=function(n,r){var i=r.iconName,o=r.title,a=r.titleId,s=r.prefix,l=r.transform,c=r.symbol,u=r.mask,f=r.maskId,d=r.extra;return new Promise(function(h,g){Promise.all([$E(i,s),u.iconName?$E(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(y){var S=v6(y,2),v=S[0],_=S[1];h([n,A6({icons:{main:v,mask:_},prefix:s,iconName:i,transform:l,symbol:c,maskId:f,title:o,titleId:a,extra:d,watchable:!0})])}).catch(g)})},e.generateAbstractIcon=function(n){var r=n.children,i=n.attributes,o=n.main,a=n.transform,s=n.styles,l=ZC(s);l.length>0&&(i.style=l);var c;return k6(a)&&(c=_f("generateAbstractTransformGrouping",{main:o,transform:a,containerWidth:o.width,iconWidth:o.width})),r.push(c||o.icon),{children:r,attributes:i}}}},Pbe={mixout:function(){return{layer:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.classes,o=i===void 0?[]:i;return tT({type:"layer"},function(){gg("beforeDOMElementCreation",{assembler:n,params:r});var a=[];return n(function(s){Array.isArray(s)?s.map(function(l){a=a.concat(l.abstract)}):a=a.concat(s.abstract)}),[{tag:"span",attributes:{class:["".concat(Et.cssPrefix,"-layers")].concat(V2(o)).join(" ")},children:a}]})}}}},Ebe={mixout:function(){return{counter:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.title,o=i===void 0?null:i,a=r.classes,s=a===void 0?[]:a,l=r.attributes,c=l===void 0?{}:l,u=r.styles,f=u===void 0?{}:u;return tT({type:"counter",content:n},function(){return gg("beforeDOMElementCreation",{content:n,params:r}),lbe({content:n.toString(),title:o,extra:{attributes:c,styles:f,classes:["".concat(Et.cssPrefix,"-layers-counter")].concat(V2(s))}})})}}}},Obe={mixout:function(){return{text:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.transform,o=i===void 0?nu:i,a=r.title,s=a===void 0?null:a,l=r.classes,c=l===void 0?[]:l,u=r.attributes,f=u===void 0?{}:u,d=r.styles,h=d===void 0?{}:d;return tT({type:"text",content:n},function(){return gg("beforeDOMElementCreation",{content:n,params:r}),pR({content:n,transform:yt(yt({},nu),o),title:s,extra:{attributes:f,styles:h,classes:["".concat(Et.cssPrefix,"-layers-text")].concat(V2(c))}})})}}},provides:function(e){e.generateLayersText=function(n,r){var i=r.title,o=r.transform,a=r.extra,s=null,l=null;if(uK){var c=parseInt(getComputedStyle(n).fontSize,10),u=n.getBoundingClientRect();s=u.width/c,l=u.height/c}return Et.autoA11y&&!i&&(a.attributes["aria-hidden"]="true"),Promise.resolve([n,pR({content:n.innerHTML,width:s,height:l,transform:o,title:i,extra:a,watchable:!0})])}}},Ibe=new RegExp('"',"ug"),_R=[1105920,1112319];function $be(t){var e=t.replace(Ibe,""),n=Wye(e,0),r=n>=_R[0]&&n<=_R[1],i=e.length===2?e[0]===e[1]:!1;return{value:AE(i?e[0]:e),isSecondary:r||i}}function wR(t,e){var n="".concat(Sye).concat(e.replace(":","-"));return new Promise(function(r,i){if(t.getAttribute(n)!==null)return r();var o=x0(t.children),a=o.filter(function(T){return T.getAttribute(TE)===e})[0],s=Hd.getComputedStyle(t,e),l=s.getPropertyValue("font-family").match(Cye),c=s.getPropertyValue("font-weight"),u=s.getPropertyValue("content");if(a&&!l)return t.removeChild(a),r();if(l&&u!=="none"&&u!==""){var f=s.getPropertyValue("content"),d=~["Sharp"].indexOf(l[2])?xi:Yr,h=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(l[2])?k1[d][l[2].toLowerCase()]:Tye[d][c],g=$be(f),y=g.value,S=g.isSecondary,v=l[0].startsWith("FontAwesome"),_=C6(h,y),x=_;if(v){var C=Zye(y);C.iconName&&C.prefix&&(_=C.iconName,h=C.prefix)}if(_&&!S&&(!a||a.getAttribute(b6)!==h||a.getAttribute(S6)!==x)){t.setAttribute(n,x),a&&t.removeChild(a);var k=wbe(),m=k.extra;m.attributes[TE]=e,$E(_,h).then(function(T){var E=A6(yt(yt({},k),{},{icons:{main:T,mask:T6()},prefix:h,iconName:x,extra:m,watchable:!0})),I=Jr.createElement("svg");e==="::before"?t.insertBefore(I,t.firstChild):t.appendChild(I),I.outerHTML=E.map(function(D){return j2(D)}).join(`
`),t.removeAttribute(n),r()}).catch(i)}else r()}else r()})}function Fbe(t){return Promise.all([wR(t,"::before"),wR(t,"::after")])}function Lbe(t){return t.parentNode!==document.head&&!~wye.indexOf(t.tagName.toUpperCase())&&!t.getAttribute(TE)&&(!t.parentNode||t.parentNode.tagName!=="svg")}function kR(t){if(Ef)return new Promise(function(e,n){var r=x0(t.querySelectorAll("*")).filter(Lbe).map(Fbe),i=P6.begin("searchPseudoElements");IK(),Promise.all(r).then(function(){i(),LE(),e()}).catch(function(){i(),LE(),n()})})}var Dbe={hooks:function(){return{mutationObserverCallbacks:function(n){return n.pseudoElementsCallback=kR,n}}},provides:function(e){e.pseudoElements2svg=function(n){var r=n.node,i=r===void 0?Jr:r;Et.searchPseudoElements&&kR(i)}}},xR=!1,Nbe={mixout:function(){return{dom:{unwatch:function(){IK(),xR=!0}}}},hooks:function(){return{bootstrap:function(){yR(EE("mutationObserverCallbacks",{}))},noAuto:function(){ybe()},watch:function(n){var r=n.observeMutationsRoot;xR?LE():yR(EE("mutationObserverCallbacks",{observeMutationsRoot:r}))}}}},CR=function(e){var n={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e.toLowerCase().split(" ").reduce(function(r,i){var o=i.toLowerCase().split("-"),a=o[0],s=o.slice(1).join("-");if(a&&s==="h")return r.flipX=!0,r;if(a&&s==="v")return r.flipY=!0,r;if(s=parseFloat(s),isNaN(s))return r;switch(a){case"grow":r.size=r.size+s;break;case"shrink":r.size=r.size-s;break;case"left":r.x=r.x-s;break;case"right":r.x=r.x+s;break;case"up":r.y=r.y-s;break;case"down":r.y=r.y+s;break;case"rotate":r.rotate=r.rotate+s;break}return r},n)},Mbe={mixout:function(){return{parse:{transform:function(n){return CR(n)}}}},hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-transform");return i&&(n.transform=CR(i)),n}}},provides:function(e){e.generateAbstractTransformGrouping=function(n){var r=n.main,i=n.transform,o=n.containerWidth,a=n.iconWidth,s={transform:"translate(".concat(o/2," 256)")},l="translate(".concat(i.x*32,", ").concat(i.y*32,") "),c="scale(".concat(i.size/16*(i.flipX?-1:1),", ").concat(i.size/16*(i.flipY?-1:1),") "),u="rotate(".concat(i.rotate," 0 0)"),f={transform:"".concat(l," ").concat(c," ").concat(u)},d={transform:"translate(".concat(a/2*-1," -256)")},h={outer:s,inner:f,path:d};return{tag:"g",attributes:yt({},h.outer),children:[{tag:"g",attributes:yt({},h.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:yt(yt({},r.icon.attributes),h.path)}]}]}}}},k5={x:0,y:0,width:"100%",height:"100%"};function TR(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function Rbe(t){return t.tag==="g"?t.children:[t]}var zbe={hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-mask"),o=i?eT(i.split(" ").map(function(a){return a.trim()})):T6();return o.prefix||(o.prefix=Ud()),n.mask=o,n.maskId=r.getAttribute("data-fa-mask-id"),n}}},provides:function(e){e.generateAbstractMask=function(n){var r=n.children,i=n.attributes,o=n.main,a=n.mask,s=n.maskId,l=n.transform,c=o.width,u=o.icon,f=a.width,d=a.icon,h=Mye({transform:l,containerWidth:f,iconWidth:c}),g={tag:"rect",attributes:yt(yt({},k5),{},{fill:"white"})},y=u.children?{children:u.children.map(TR)}:{},S={tag:"g",attributes:yt({},h.inner),children:[TR(yt({tag:u.tag,attributes:yt(yt({},u.attributes),h.path)},y))]},v={tag:"g",attributes:yt({},h.outer),children:[S]},_="mask-".concat(s||T1()),x="clip-".concat(s||T1()),C={tag:"mask",attributes:yt(yt({},k5),{},{id:_,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[g,v]},k={tag:"defs",children:[{tag:"clipPath",attributes:{id:x},children:Rbe(d)},C]};return r.push(k,{tag:"rect",attributes:yt({fill:"currentColor","clip-path":"url(#".concat(x,")"),mask:"url(#".concat(_,")")},k5)}),{children:r,attributes:i}}}},Vbe={provides:function(e){var n=!1;Hd.matchMedia&&(n=Hd.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var r=[],i={fill:"currentColor"},o={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};r.push({tag:"path",attributes:yt(yt({},i),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var a=yt(yt({},o),{},{attributeName:"opacity"}),s={tag:"circle",attributes:yt(yt({},i),{},{cx:"256",cy:"364",r:"28"}),children:[]};return n||s.children.push({tag:"animate",attributes:yt(yt({},o),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:yt(yt({},a),{},{values:"1;0;1;1;0;1;"})}),r.push(s),r.push({tag:"path",attributes:yt(yt({},i),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:n?[]:[{tag:"animate",attributes:yt(yt({},a),{},{values:"1;0;0;0;0;1;"})}]}),n||r.push({tag:"path",attributes:yt(yt({},i),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:yt(yt({},a),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:r}}}},Bbe={hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-symbol"),o=i===null?!1:i===""?!0:i;return n.symbol=o,n}}}},jbe=[Vye,Abe,Pbe,Ebe,Obe,Dbe,Nbe,Mbe,zbe,Vbe,Bbe];tbe(jbe,{mixoutsTo:Us});Us.noAuto;Us.config;var Hbe=Us.library;Us.dom;var DE=Us.parse;Us.findIconDefinition;Us.toHtml;var Ube=Us.icon;Us.layer;Us.text;Us.counter;function nT(t,e){const n=Object.create(null),r=t.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return e?i=>!!n[i.toLowerCase()]:i=>!!n[i]}const Sr={},wv=[],fc=()=>{},Wbe=()=>!1,Gbe=/^on[^a-z]/,H2=t=>Gbe.test(t),O6=t=>t.startsWith("onUpdate:"),jr=Object.assign,I6=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},qbe=Object.prototype.hasOwnProperty,Xn=(t,e)=>qbe.call(t,e),St=Array.isArray,kv=t=>C0(t)==="[object Map]",Mg=t=>C0(t)==="[object Set]",AR=t=>C0(t)==="[object Date]",Ybe=t=>C0(t)==="[object RegExp]",on=t=>typeof t=="function",ai=t=>typeof t=="string",A1=t=>typeof t=="symbol",kr=t=>t!==null&&typeof t=="object",$6=t=>kr(t)&&on(t.then)&&on(t.catch),FK=Object.prototype.toString,C0=t=>FK.call(t),Kbe=t=>C0(t).slice(8,-1),LK=t=>C0(t)==="[object Object]",F6=t=>ai(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,jb=nT(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),rT=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},Xbe=/-(\w)/g,as=rT(t=>t.replace(Xbe,(e,n)=>n?n.toUpperCase():"")),Jbe=/\B([A-Z])/g,Sl=rT(t=>t.replace(Jbe,"-$1").toLowerCase()),U2=rT(t=>t.charAt(0).toUpperCase()+t.slice(1)),Hb=rT(t=>t?`on${U2(t)}`:""),Zv=(t,e)=>!Object.is(t,e),xv=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},Gx=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},qx=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Yx=t=>{const e=ai(t)?Number(t):NaN;return isNaN(e)?t:e};let PR;const NE=()=>PR||(PR=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Zbe="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console",Qbe=nT(Zbe);function W2(t){if(St(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=ai(r)?r1e(r):W2(r);if(i)for(const o in i)e[o]=i[o]}return e}else{if(ai(t))return t;if(kr(t))return t}}const e1e=/;(?![^(]*\))/g,t1e=/:([^]+)/,n1e=new RegExp("\\/\\*.*?\\*\\/","gs");function r1e(t){const e={};return t.replace(n1e,"").split(e1e).forEach(n=>{if(n){const r=n.split(t1e);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Wt(t){let e="";if(ai(t))e=t;else if(St(t))for(let n=0;n<t.length;n++){const r=Wt(t[n]);r&&(e+=r+" ")}else if(kr(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function L6(t){if(!t)return null;let{class:e,style:n}=t;return e&&!ai(e)&&(t.class=Wt(e)),n&&(t.style=W2(n)),t}const i1e="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",o1e=nT(i1e);function DK(t){return!!t||t===""}function a1e(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Gd(t[r],e[r]);return n}function Gd(t,e){if(t===e)return!0;let n=AR(t),r=AR(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=A1(t),r=A1(e),n||r)return t===e;if(n=St(t),r=St(e),n||r)return n&&r?a1e(t,e):!1;if(n=kr(t),r=kr(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,o=Object.keys(e).length;if(i!==o)return!1;for(const a in t){const s=t.hasOwnProperty(a),l=e.hasOwnProperty(a);if(s&&!l||!s&&l||!Gd(t[a],e[a]))return!1}}return String(t)===String(e)}function iT(t,e){return t.findIndex(n=>Gd(n,e))}const Qt=t=>ai(t)?t:t==null?"":St(t)||kr(t)&&(t.toString===FK||!on(t.toString))?JSON.stringify(t,NK,2):String(t),NK=(t,e)=>e&&e.__v_isRef?NK(t,e.value):kv(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i])=>(n[`${r} =>`]=i,n),{})}:Mg(e)?{[`Set(${e.size})`]:[...e.values()]}:kr(e)&&!St(e)&&!LK(e)?String(e):e;let Es;class D6{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Es,!e&&Es&&(this.index=(Es.scopes||(Es.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=Es;try{return Es=this,e()}finally{Es=n}}}on(){Es=this}off(){Es=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function N6(t){return new D6(t)}function MK(t,e=Es){e&&e.active&&e.effects.push(t)}function M6(){return Es}function RK(t){Es&&Es.cleanups.push(t)}const R6=t=>{const e=new Set(t);return e.w=0,e.n=0,e},zK=t=>(t.w&qd)>0,VK=t=>(t.n&qd)>0,s1e=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=qd},l1e=t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const i=e[r];zK(i)&&!VK(i)?i.delete(t):e[n++]=i,i.w&=~qd,i.n&=~qd}e.length=n}},Kx=new WeakMap;let Sb=0,qd=1;const ME=30;let rc;const tg=Symbol(""),RE=Symbol("");class G2{constructor(e,n=null,r){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,MK(this,r)}run(){if(!this.active)return this.fn();let e=rc,n=Od;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=rc,rc=this,Od=!0,qd=1<<++Sb,Sb<=ME?s1e(this):ER(this),this.fn()}finally{Sb<=ME&&l1e(this),qd=1<<--Sb,rc=this.parent,Od=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){rc===this?this.deferStop=!0:this.active&&(ER(this),this.onStop&&this.onStop(),this.active=!1)}}function ER(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}function c1e(t,e){t.effect&&(t=t.effect.fn);const n=new G2(t);e&&(jr(n,e),e.scope&&MK(n,e.scope)),(!e||!e.lazy)&&n.run();const r=n.run.bind(n);return r.effect=n,r}function u1e(t){t.effect.stop()}let Od=!0;const BK=[];function T0(){BK.push(Od),Od=!1}function A0(){const t=BK.pop();Od=t===void 0?!0:t}function us(t,e,n){if(Od&&rc){let r=Kx.get(t);r||Kx.set(t,r=new Map);let i=r.get(n);i||r.set(n,i=R6()),jK(i)}}function jK(t,e){let n=!1;Sb<=ME?VK(t)||(t.n|=qd,n=!zK(t)):n=!t.has(rc),n&&(t.add(rc),rc.deps.push(t))}function wf(t,e,n,r,i,o){const a=Kx.get(t);if(!a)return;let s=[];if(e==="clear")s=[...a.values()];else if(n==="length"&&St(t)){const l=Number(r);a.forEach((c,u)=>{(u==="length"||u>=l)&&s.push(c)})}else switch(n!==void 0&&s.push(a.get(n)),e){case"add":St(t)?F6(n)&&s.push(a.get("length")):(s.push(a.get(tg)),kv(t)&&s.push(a.get(RE)));break;case"delete":St(t)||(s.push(a.get(tg)),kv(t)&&s.push(a.get(RE)));break;case"set":kv(t)&&s.push(a.get(tg));break}if(s.length===1)s[0]&&zE(s[0]);else{const l=[];for(const c of s)c&&l.push(...c);zE(R6(l))}}function zE(t,e){const n=St(t)?t:[...t];for(const r of n)r.computed&&OR(r);for(const r of n)r.computed||OR(r)}function OR(t,e){(t!==rc||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}function f1e(t,e){var n;return(n=Kx.get(t))==null?void 0:n.get(e)}const d1e=nT("__proto__,__v_isRef,__isVue"),HK=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(A1)),h1e=oT(),p1e=oT(!1,!0),g1e=oT(!0),m1e=oT(!0,!0),IR=v1e();function v1e(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=Dn(this);for(let o=0,a=this.length;o<a;o++)us(r,"get",o+"");const i=r[e](...n);return i===-1||i===!1?r[e](...n.map(Dn)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){T0();const r=Dn(this)[e].apply(this,n);return A0(),r}}),t}function y1e(t){const e=Dn(this);return us(e,"has",t),e.hasOwnProperty(t)}function oT(t=!1,e=!1){return function(r,i,o){if(i==="__v_isReactive")return!t;if(i==="__v_isReadonly")return t;if(i==="__v_isShallow")return e;if(i==="__v_raw"&&o===(t?e?XK:KK:e?YK:qK).get(r))return r;const a=St(r);if(!t){if(a&&Xn(IR,i))return Reflect.get(IR,i,o);if(i==="hasOwnProperty")return y1e}const s=Reflect.get(r,i,o);return(A1(i)?HK.has(i):d1e(i))||(t||us(r,"get",i),e)?s:fi(s)?a&&F6(i)?s:s.value:kr(s)?t?V6(s):hh(s):s}}const b1e=UK(),S1e=UK(!0);function UK(t=!1){return function(n,r,i,o){let a=n[r];if(mg(a)&&fi(a)&&!fi(i))return!1;if(!t&&(!P1(i)&&!mg(i)&&(a=Dn(a),i=Dn(i)),!St(n)&&fi(a)&&!fi(i)))return a.value=i,!0;const s=St(n)&&F6(r)?Number(r)<n.length:Xn(n,r),l=Reflect.set(n,r,i,o);return n===Dn(o)&&(s?Zv(i,a)&&wf(n,"set",r,i):wf(n,"add",r,i)),l}}function _1e(t,e){const n=Xn(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&wf(t,"delete",e,void 0),r}function w1e(t,e){const n=Reflect.has(t,e);return(!A1(e)||!HK.has(e))&&us(t,"has",e),n}function k1e(t){return us(t,"iterate",St(t)?"length":tg),Reflect.ownKeys(t)}const WK={get:h1e,set:b1e,deleteProperty:_1e,has:w1e,ownKeys:k1e},GK={get:g1e,set(t,e){return!0},deleteProperty(t,e){return!0}},x1e=jr({},WK,{get:p1e,set:S1e}),C1e=jr({},GK,{get:m1e}),z6=t=>t,aT=t=>Reflect.getPrototypeOf(t);function Y_(t,e,n=!1,r=!1){t=t.__v_raw;const i=Dn(t),o=Dn(e);n||(e!==o&&us(i,"get",e),us(i,"get",o));const{has:a}=aT(i),s=r?z6:n?j6:E1;if(a.call(i,e))return s(t.get(e));if(a.call(i,o))return s(t.get(o));t!==i&&t.get(e)}function K_(t,e=!1){const n=this.__v_raw,r=Dn(n),i=Dn(t);return e||(t!==i&&us(r,"has",t),us(r,"has",i)),t===i?n.has(t):n.has(t)||n.has(i)}function X_(t,e=!1){return t=t.__v_raw,!e&&us(Dn(t),"iterate",tg),Reflect.get(t,"size",t)}function $R(t){t=Dn(t);const e=Dn(this);return aT(e).has.call(e,t)||(e.add(t),wf(e,"add",t,t)),this}function FR(t,e){e=Dn(e);const n=Dn(this),{has:r,get:i}=aT(n);let o=r.call(n,t);o||(t=Dn(t),o=r.call(n,t));const a=i.call(n,t);return n.set(t,e),o?Zv(e,a)&&wf(n,"set",t,e):wf(n,"add",t,e),this}function LR(t){const e=Dn(this),{has:n,get:r}=aT(e);let i=n.call(e,t);i||(t=Dn(t),i=n.call(e,t)),r&&r.call(e,t);const o=e.delete(t);return i&&wf(e,"delete",t,void 0),o}function DR(){const t=Dn(this),e=t.size!==0,n=t.clear();return e&&wf(t,"clear",void 0,void 0),n}function J_(t,e){return function(r,i){const o=this,a=o.__v_raw,s=Dn(a),l=e?z6:t?j6:E1;return!t&&us(s,"iterate",tg),a.forEach((c,u)=>r.call(i,l(c),l(u),o))}}function Z_(t,e,n){return function(...r){const i=this.__v_raw,o=Dn(i),a=kv(o),s=t==="entries"||t===Symbol.iterator&&a,l=t==="keys"&&a,c=i[t](...r),u=n?z6:e?j6:E1;return!e&&us(o,"iterate",l?RE:tg),{next(){const{value:f,done:d}=c.next();return d?{value:f,done:d}:{value:s?[u(f[0]),u(f[1])]:u(f),done:d}},[Symbol.iterator](){return this}}}}function Kf(t){return function(...e){return t==="delete"?!1:this}}function T1e(){const t={get(o){return Y_(this,o)},get size(){return X_(this)},has:K_,add:$R,set:FR,delete:LR,clear:DR,forEach:J_(!1,!1)},e={get(o){return Y_(this,o,!1,!0)},get size(){return X_(this)},has:K_,add:$R,set:FR,delete:LR,clear:DR,forEach:J_(!1,!0)},n={get(o){return Y_(this,o,!0)},get size(){return X_(this,!0)},has(o){return K_.call(this,o,!0)},add:Kf("add"),set:Kf("set"),delete:Kf("delete"),clear:Kf("clear"),forEach:J_(!0,!1)},r={get(o){return Y_(this,o,!0,!0)},get size(){return X_(this,!0)},has(o){return K_.call(this,o,!0)},add:Kf("add"),set:Kf("set"),delete:Kf("delete"),clear:Kf("clear"),forEach:J_(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{t[o]=Z_(o,!1,!1),n[o]=Z_(o,!0,!1),e[o]=Z_(o,!1,!0),r[o]=Z_(o,!0,!0)}),[t,n,e,r]}const[A1e,P1e,E1e,O1e]=T1e();function sT(t,e){const n=e?t?O1e:E1e:t?P1e:A1e;return(r,i,o)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(Xn(n,i)&&i in r?n:r,i,o)}const I1e={get:sT(!1,!1)},$1e={get:sT(!1,!0)},F1e={get:sT(!0,!1)},L1e={get:sT(!0,!0)},qK=new WeakMap,YK=new WeakMap,KK=new WeakMap,XK=new WeakMap;function D1e(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function N1e(t){return t.__v_skip||!Object.isExtensible(t)?0:D1e(Kbe(t))}function hh(t){return mg(t)?t:lT(t,!1,WK,I1e,qK)}function JK(t){return lT(t,!1,x1e,$1e,YK)}function V6(t){return lT(t,!0,GK,F1e,KK)}function M1e(t){return lT(t,!0,C1e,L1e,XK)}function lT(t,e,n,r,i){if(!kr(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const o=i.get(t);if(o)return o;const a=N1e(t);if(a===0)return t;const s=new Proxy(t,a===2?r:n);return i.set(t,s),s}function hf(t){return mg(t)?hf(t.__v_raw):!!(t&&t.__v_isReactive)}function mg(t){return!!(t&&t.__v_isReadonly)}function P1(t){return!!(t&&t.__v_isShallow)}function B6(t){return hf(t)||mg(t)}function Dn(t){const e=t&&t.__v_raw;return e?Dn(e):t}function vg(t){return Gx(t,"__v_skip",!0),t}const E1=t=>kr(t)?hh(t):t,j6=t=>kr(t)?V6(t):t;function H6(t){Od&&rc&&(t=Dn(t),jK(t.dep||(t.dep=R6())))}function cT(t,e){t=Dn(t);const n=t.dep;n&&zE(n)}function fi(t){return!!(t&&t.__v_isRef===!0)}function Tl(t){return ZK(t,!1)}function ru(t){return ZK(t,!0)}function ZK(t,e){return fi(t)?t:new R1e(t,e)}class R1e{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Dn(e),this._value=n?e:E1(e)}get value(){return H6(this),this._value}set value(e){const n=this.__v_isShallow||P1(e)||mg(e);e=n?e:Dn(e),Zv(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:E1(e),cT(this))}}function z1e(t){cT(t)}function ii(t){return fi(t)?t.value:t}function V1e(t){return on(t)?t():ii(t)}const B1e={get:(t,e,n)=>ii(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return fi(i)&&!fi(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function U6(t){return hf(t)?t:new Proxy(t,B1e)}class j1e{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:n,set:r}=e(()=>H6(this),()=>cT(this));this._get=n,this._set=r}get value(){return this._get()}set value(e){this._set(e)}}function H1e(t){return new j1e(t)}function W6(t){const e=St(t)?new Array(t.length):{};for(const n in t)e[n]=QK(t,n);return e}class U1e{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return f1e(Dn(this._object),this._key)}}class W1e{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function G1e(t,e,n){return fi(t)?t:on(t)?new W1e(t):kr(t)&&arguments.length>1?QK(t,e,n):Tl(t)}function QK(t,e,n){const r=t[e];return fi(r)?r:new U1e(t,e,n)}class q1e{constructor(e,n,r,i){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new G2(e,()=>{this._dirty||(this._dirty=!0,cT(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const e=Dn(this);return H6(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function Y1e(t,e,n=!1){let r,i;const o=on(t);return o?(r=t,i=fc):(r=t.get,i=t.set),new q1e(r,i,o||!i,n)}function K1e(t,...e){}function X1e(t,e){}function pf(t,e,n,r){let i;try{i=r?t(...r):t()}catch(o){Rg(o,e,n)}return i}function zs(t,e,n,r){if(on(t)){const o=pf(t,e,n,r);return o&&$6(o)&&o.catch(a=>{Rg(a,e,n)}),o}const i=[];for(let o=0;o<t.length;o++)i.push(zs(t[o],e,n,r));return i}function Rg(t,e,n,r=!0){const i=e?e.vnode:null;if(e){let o=e.parent;const a=e.proxy,s=n;for(;o;){const c=o.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](t,a,s)===!1)return}o=o.parent}const l=e.appContext.config.errorHandler;if(l){pf(l,null,10,[t,a,s]);return}}J1e(t,n,i,r)}function J1e(t,e,n,r=!0){console.error(t)}let O1=!1,VE=!1;const qo=[];let Xc=0;const Cv=[];let Yu=null,Ap=0;const eX=Promise.resolve();let G6=null;function P0(t){const e=G6||eX;return t?e.then(this?t.bind(this):t):e}function Z1e(t){let e=Xc+1,n=qo.length;for(;e<n;){const r=e+n>>>1;I1(qo[r])<t?e=r+1:n=r}return e}function uT(t){(!qo.length||!qo.includes(t,O1&&t.allowRecurse?Xc+1:Xc))&&(t.id==null?qo.push(t):qo.splice(Z1e(t.id),0,t),tX())}function tX(){!O1&&!VE&&(VE=!0,G6=eX.then(nX))}function Q1e(t){const e=qo.indexOf(t);e>Xc&&qo.splice(e,1)}function q6(t){St(t)?Cv.push(...t):(!Yu||!Yu.includes(t,t.allowRecurse?Ap+1:Ap))&&Cv.push(t),tX()}function NR(t,e=O1?Xc+1:0){for(;e<qo.length;e++){const n=qo[e];n&&n.pre&&(qo.splice(e,1),e--,n())}}function Xx(t){if(Cv.length){const e=[...new Set(Cv)];if(Cv.length=0,Yu){Yu.push(...e);return}for(Yu=e,Yu.sort((n,r)=>I1(n)-I1(r)),Ap=0;Ap<Yu.length;Ap++)Yu[Ap]();Yu=null,Ap=0}}const I1=t=>t.id==null?1/0:t.id,e2e=(t,e)=>{const n=I1(t)-I1(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function nX(t){VE=!1,O1=!0,qo.sort(e2e);const e=fc;try{for(Xc=0;Xc<qo.length;Xc++){const n=qo[Xc];n&&n.active!==!1&&pf(n,null,14)}}finally{Xc=0,qo.length=0,Xx(),O1=!1,G6=null,(qo.length||Cv.length)&&nX()}}let Wm,Q_=[];function rX(t,e){var n,r;Wm=t,Wm?(Wm.enabled=!0,Q_.forEach(({event:i,args:o})=>Wm.emit(i,...o)),Q_=[]):typeof window<"u"&&window.HTMLElement&&!((r=(n=window.navigator)==null?void 0:n.userAgent)!=null&&r.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(o=>{rX(o,e)}),setTimeout(()=>{Wm||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,Q_=[])},3e3)):Q_=[]}function t2e(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Sr;let i=n;const o=e.startsWith("update:"),a=o&&e.slice(7);if(a&&a in r){const u=`${a==="modelValue"?"model":a}Modifiers`,{number:f,trim:d}=r[u]||Sr;d&&(i=n.map(h=>ai(h)?h.trim():h)),f&&(i=n.map(qx))}let s,l=r[s=Hb(e)]||r[s=Hb(as(e))];!l&&o&&(l=r[s=Hb(Sl(e))]),l&&zs(l,t,6,i);const c=r[s+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[s])return;t.emitted[s]=!0,zs(c,t,6,i)}}function iX(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const o=t.emits;let a={},s=!1;if(!on(t)){const l=c=>{const u=iX(c,e,!0);u&&(s=!0,jr(a,u))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!o&&!s?(kr(t)&&r.set(t,null),null):(St(o)?o.forEach(l=>a[l]=null):jr(a,o),kr(t)&&r.set(t,a),a)}function fT(t,e){return!t||!H2(e)?!1:(e=e.slice(2).replace(/Once$/,""),Xn(t,e[0].toLowerCase()+e.slice(1))||Xn(t,Sl(e))||Xn(t,e))}let lo=null,dT=null;function $1(t){const e=lo;return lo=t,dT=t&&t.type.__scopeId||null,e}function zg(t){dT=t}function Vg(){dT=null}const n2e=t=>ms;function ms(t,e=lo,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&YE(-1);const o=$1(e);let a;try{a=t(...i)}finally{$1(o),r._d&&YE(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function Kk(t){const{type:e,vnode:n,proxy:r,withProxy:i,props:o,propsOptions:[a],slots:s,attrs:l,emit:c,render:u,renderCache:f,data:d,setupState:h,ctx:g,inheritAttrs:y}=t;let S,v;const _=$1(t);try{if(n.shapeFlag&4){const C=i||r;S=$s(u.call(C,C,f,o,h,d,g)),v=l}else{const C=e;S=$s(C.length>1?C(o,{attrs:l,slots:s,emit:c}):C(o,null)),v=e.props?l:i2e(l)}}catch(C){qb.length=0,Rg(C,t,1),S=at(Xo)}let x=S;if(v&&y!==!1){const C=Object.keys(v),{shapeFlag:k}=x;C.length&&k&7&&(a&&C.some(O6)&&(v=o2e(v,a)),x=gu(x,v))}return n.dirs&&(x=gu(x),x.dirs=x.dirs?x.dirs.concat(n.dirs):n.dirs),n.transition&&(x.transition=n.transition),S=x,$1(_),S}function r2e(t){let e;for(let n=0;n<t.length;n++){const r=t[n];if(Yd(r)){if(r.type!==Xo||r.children==="v-if"){if(e)return;e=r}}else return}return e}const i2e=t=>{let e;for(const n in t)(n==="class"||n==="style"||H2(n))&&((e||(e={}))[n]=t[n]);return e},o2e=(t,e)=>{const n={};for(const r in t)(!O6(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function a2e(t,e,n){const{props:r,children:i,component:o}=t,{props:a,children:s,patchFlag:l}=e,c=o.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?MR(r,a,c):!!a;if(l&8){const u=e.dynamicProps;for(let f=0;f<u.length;f++){const d=u[f];if(a[d]!==r[d]&&!fT(c,d))return!0}}}else return(i||s)&&(!s||!s.$stable)?!0:r===a?!1:r?a?MR(r,a,c):!0:!!a;return!1}function MR(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(e[o]!==t[o]&&!fT(n,o))return!0}return!1}function Y6({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const oX=t=>t.__isSuspense,s2e={name:"Suspense",__isSuspense:!0,process(t,e,n,r,i,o,a,s,l,c){t==null?c2e(e,n,r,i,o,a,s,l,c):u2e(t,e,n,r,i,a,s,l,c)},hydrate:f2e,create:K6,normalize:d2e},l2e=s2e;function F1(t,e){const n=t.props&&t.props[e];on(n)&&n()}function c2e(t,e,n,r,i,o,a,s,l){const{p:c,o:{createElement:u}}=l,f=u("div"),d=t.suspense=K6(t,i,r,e,f,n,o,a,s,l);c(null,d.pendingBranch=t.ssContent,f,null,r,d,o,a),d.deps>0?(F1(t,"onPending"),F1(t,"onFallback"),c(null,t.ssFallback,e,n,r,null,o,a),Tv(d,t.ssFallback)):d.resolve(!1,!0)}function u2e(t,e,n,r,i,o,a,s,{p:l,um:c,o:{createElement:u}}){const f=e.suspense=t.suspense;f.vnode=e,e.el=t.el;const d=e.ssContent,h=e.ssFallback,{activeBranch:g,pendingBranch:y,isInFallback:S,isHydrating:v}=f;if(y)f.pendingBranch=d,ic(d,y)?(l(y,d,f.hiddenContainer,null,i,f,o,a,s),f.deps<=0?f.resolve():S&&(l(g,h,n,r,i,null,o,a,s),Tv(f,h))):(f.pendingId++,v?(f.isHydrating=!1,f.activeBranch=y):c(y,i,f),f.deps=0,f.effects.length=0,f.hiddenContainer=u("div"),S?(l(null,d,f.hiddenContainer,null,i,f,o,a,s),f.deps<=0?f.resolve():(l(g,h,n,r,i,null,o,a,s),Tv(f,h))):g&&ic(d,g)?(l(g,d,n,r,i,f,o,a,s),f.resolve(!0)):(l(null,d,f.hiddenContainer,null,i,f,o,a,s),f.deps<=0&&f.resolve()));else if(g&&ic(d,g))l(g,d,n,r,i,f,o,a,s),Tv(f,d);else if(F1(e,"onPending"),f.pendingBranch=d,f.pendingId++,l(null,d,f.hiddenContainer,null,i,f,o,a,s),f.deps<=0)f.resolve();else{const{timeout:_,pendingId:x}=f;_>0?setTimeout(()=>{f.pendingId===x&&f.fallback(h)},_):_===0&&f.fallback(h)}}function K6(t,e,n,r,i,o,a,s,l,c,u=!1){const{p:f,m:d,um:h,n:g,o:{parentNode:y,remove:S}}=c;let v;const _=h2e(t);_&&e!=null&&e.pendingBranch&&(v=e.pendingId,e.deps++);const x=t.props?Yx(t.props.timeout):void 0,C={vnode:t,parent:e,parentComponent:n,isSVG:a,container:r,hiddenContainer:i,anchor:o,deps:0,pendingId:0,timeout:typeof x=="number"?x:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:u,isUnmounted:!1,effects:[],resolve(k=!1,m=!1){const{vnode:T,activeBranch:E,pendingBranch:I,pendingId:D,effects:F,parentComponent:R,container:z}=C;if(C.isHydrating)C.isHydrating=!1;else if(!k){const oe=E&&I.transition&&I.transition.mode==="out-in";oe&&(E.transition.afterLeave=()=>{D===C.pendingId&&d(I,z,_e,0)});let{anchor:_e}=C;E&&(_e=g(E),h(E,R,C,!0)),oe||d(I,z,_e,0)}Tv(C,I),C.pendingBranch=null,C.isInFallback=!1;let B=C.parent,ie=!1;for(;B;){if(B.pendingBranch){B.effects.push(...F),ie=!0;break}B=B.parent}ie||q6(F),C.effects=[],_&&e&&e.pendingBranch&&v===e.pendingId&&(e.deps--,e.deps===0&&!m&&e.resolve()),F1(T,"onResolve")},fallback(k){if(!C.pendingBranch)return;const{vnode:m,activeBranch:T,parentComponent:E,container:I,isSVG:D}=C;F1(m,"onFallback");const F=g(T),R=()=>{C.isInFallback&&(f(null,k,I,F,E,null,D,s,l),Tv(C,k))},z=k.transition&&k.transition.mode==="out-in";z&&(T.transition.afterLeave=R),C.isInFallback=!0,h(T,E,null,!0),z||R()},move(k,m,T){C.activeBranch&&d(C.activeBranch,k,m,T),C.container=k},next(){return C.activeBranch&&g(C.activeBranch)},registerDep(k,m){const T=!!C.pendingBranch;T&&C.deps++;const E=k.vnode.el;k.asyncDep.catch(I=>{Rg(I,k,0)}).then(I=>{if(k.isUnmounted||C.isUnmounted||C.pendingId!==k.suspenseId)return;k.asyncResolved=!0;const{vnode:D}=k;KE(k,I,!1),E&&(D.el=E);const F=!E&&k.subTree.el;m(k,D,y(E||k.subTree.el),E?null:g(k.subTree),C,a,l),F&&S(F),Y6(k,D.el),T&&--C.deps===0&&C.resolve()})},unmount(k,m){C.isUnmounted=!0,C.activeBranch&&h(C.activeBranch,n,k,m),C.pendingBranch&&h(C.pendingBranch,n,k,m)}};return C}function f2e(t,e,n,r,i,o,a,s,l){const c=e.suspense=K6(e,r,n,t.parentNode,document.createElement("div"),null,i,o,a,s,!0),u=l(t,c.pendingBranch=e.ssContent,n,c,o,a);return c.deps===0&&c.resolve(!1,!0),u}function d2e(t){const{shapeFlag:e,children:n}=t,r=e&32;t.ssContent=RR(r?n.default:n),t.ssFallback=r?RR(n.fallback):at(Xo)}function RR(t){let e;if(on(t)){const n=Sg&&t._c;n&&(t._d=!1,Oe()),t=t(),n&&(t._d=!0,e=rs,FX())}return St(t)&&(t=r2e(t)),t=$s(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function aX(t,e){e&&e.pendingBranch?St(t)?e.effects.push(...t):e.effects.push(t):q6(t)}function Tv(t,e){t.activeBranch=e;const{vnode:n,parentComponent:r}=t,i=n.el=e.el;r&&r.subTree===n&&(r.vnode.el=i,Y6(r,i))}function h2e(t){var e;return((e=t.props)==null?void 0:e.suspensible)!=null&&t.props.suspensible!==!1}function BE(t,e){return q2(t,null,e)}function sX(t,e){return q2(t,null,{flush:"post"})}function p2e(t,e){return q2(t,null,{flush:"sync"})}const ew={};function ki(t,e,n){return q2(t,e,n)}function q2(t,e,{immediate:n,deep:r,flush:i,onTrack:o,onTrigger:a}=Sr){var s;const l=M6()===((s=zi)==null?void 0:s.scope)?zi:null;let c,u=!1,f=!1;if(fi(t)?(c=()=>t.value,u=P1(t)):hf(t)?(c=()=>t,r=!0):St(t)?(f=!0,u=t.some(C=>hf(C)||P1(C)),c=()=>t.map(C=>{if(fi(C))return C.value;if(hf(C))return jp(C);if(on(C))return pf(C,l,2)})):on(t)?e?c=()=>pf(t,l,2):c=()=>{if(!(l&&l.isUnmounted))return d&&d(),zs(t,l,3,[h])}:c=fc,e&&r){const C=c;c=()=>jp(C())}let d,h=C=>{d=_.onStop=()=>{pf(C,l,4)}},g;if(e0)if(h=fc,e?n&&zs(e,l,3,[c(),f?[]:void 0,h]):c(),i==="sync"){const C=HX();g=C.__watcherHandles||(C.__watcherHandles=[])}else return fc;let y=f?new Array(t.length).fill(ew):ew;const S=()=>{if(_.active)if(e){const C=_.run();(r||u||(f?C.some((k,m)=>Zv(k,y[m])):Zv(C,y)))&&(d&&d(),zs(e,l,3,[C,y===ew?void 0:f&&y[0]===ew?[]:y,h]),y=C)}else _.run()};S.allowRecurse=!!e;let v;i==="sync"?v=S:i==="post"?v=()=>yo(S,l&&l.suspense):(S.pre=!0,l&&(S.id=l.uid),v=()=>uT(S));const _=new G2(c,v);e?n?S():y=_.run():i==="post"?yo(_.run.bind(_),l&&l.suspense):_.run();const x=()=>{_.stop(),l&&l.scope&&I6(l.scope.effects,_)};return g&&g.push(x),x}function g2e(t,e,n){const r=this.proxy,i=ai(t)?t.includes(".")?lX(r,t):()=>r[t]:t.bind(r,r);let o;on(e)?o=e:(o=e.handler,n=e);const a=zi;Kd(this);const s=q2(i,o.bind(r),n);return a?Kd(a):Id(),s}function lX(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function jp(t,e){if(!kr(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),fi(t))jp(t.value,e);else if(St(t))for(let n=0;n<t.length;n++)jp(t[n],e);else if(Mg(t)||kv(t))t.forEach(n=>{jp(n,e)});else if(LK(t))for(const n in t)jp(t[n],e);return t}function kf(t,e){const n=lo;if(n===null)return t;const r=yT(n)||n.proxy,i=t.dirs||(t.dirs=[]);for(let o=0;o<e.length;o++){let[a,s,l,c=Sr]=e[o];a&&(on(a)&&(a={mounted:a,updated:a}),a.deep&&jp(s),i.push({dir:a,instance:r,value:s,oldValue:void 0,arg:l,modifiers:c}))}return t}function Wc(t,e,n,r){const i=t.dirs,o=e&&e.dirs;for(let a=0;a<i.length;a++){const s=i[a];o&&(s.oldValue=o[a].value);let l=s.dir[r];l&&(T0(),zs(l,n,8,[t.el,s,t,e]),A0())}}function X6(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Bg(()=>{t.isMounted=!0}),E0(()=>{t.isUnmounting=!0}),t}const ol=[Function,Array],J6={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ol,onEnter:ol,onAfterEnter:ol,onEnterCancelled:ol,onBeforeLeave:ol,onLeave:ol,onAfterLeave:ol,onLeaveCancelled:ol,onBeforeAppear:ol,onAppear:ol,onAfterAppear:ol,onAppearCancelled:ol},m2e={name:"BaseTransition",props:J6,setup(t,{slots:e}){const n=bc(),r=X6();let i;return()=>{const o=e.default&&hT(e.default(),!0);if(!o||!o.length)return;let a=o[0];if(o.length>1){for(const y of o)if(y.type!==Xo){a=y;break}}const s=Dn(t),{mode:l}=s;if(r.isLeaving)return x5(a);const c=zR(a);if(!c)return x5(a);const u=Qv(c,s,r,n);yg(c,u);const f=n.subTree,d=f&&zR(f);let h=!1;const{getTransitionKey:g}=c.type;if(g){const y=g();i===void 0?i=y:y!==i&&(i=y,h=!0)}if(d&&d.type!==Xo&&(!ic(c,d)||h)){const y=Qv(d,s,r,n);if(yg(d,y),l==="out-in")return r.isLeaving=!0,y.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&n.update()},x5(a);l==="in-out"&&c.type!==Xo&&(y.delayLeave=(S,v,_)=>{const x=uX(r,d);x[String(d.key)]=d,S._leaveCb=()=>{v(),S._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=_})}return a}}},cX=m2e;function uX(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Qv(t,e,n,r){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:s,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:f,onLeave:d,onAfterLeave:h,onLeaveCancelled:g,onBeforeAppear:y,onAppear:S,onAfterAppear:v,onAppearCancelled:_}=e,x=String(t.key),C=uX(n,t),k=(E,I)=>{E&&zs(E,r,9,I)},m=(E,I)=>{const D=I[1];k(E,I),St(E)?E.every(F=>F.length<=1)&&D():E.length<=1&&D()},T={mode:o,persisted:a,beforeEnter(E){let I=s;if(!n.isMounted)if(i)I=y||s;else return;E._leaveCb&&E._leaveCb(!0);const D=C[x];D&&ic(t,D)&&D.el._leaveCb&&D.el._leaveCb(),k(I,[E])},enter(E){let I=l,D=c,F=u;if(!n.isMounted)if(i)I=S||l,D=v||c,F=_||u;else return;let R=!1;const z=E._enterCb=B=>{R||(R=!0,B?k(F,[E]):k(D,[E]),T.delayedLeave&&T.delayedLeave(),E._enterCb=void 0)};I?m(I,[E,z]):z()},leave(E,I){const D=String(t.key);if(E._enterCb&&E._enterCb(!0),n.isUnmounting)return I();k(f,[E]);let F=!1;const R=E._leaveCb=z=>{F||(F=!0,I(),z?k(g,[E]):k(h,[E]),E._leaveCb=void 0,C[D]===t&&delete C[D])};C[D]=t,d?m(d,[E,R]):R()},clone(E){return Qv(E,e,n,r)}};return T}function x5(t){if(Y2(t))return t=gu(t),t.children=null,t}function zR(t){return Y2(t)?t.children?t.children[0]:void 0:t}function yg(t,e){t.shapeFlag&6&&t.component?yg(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function hT(t,e=!1,n){let r=[],i=0;for(let o=0;o<t.length;o++){let a=t[o];const s=n==null?a.key:String(n)+String(a.key!=null?a.key:o);a.type===hn?(a.patchFlag&128&&i++,r=r.concat(hT(a.children,e,s))):(e||a.type!==Xo)&&r.push(s!=null?gu(a,{key:s}):a)}if(i>1)for(let o=0;o<r.length;o++)r[o].patchFlag=-2;return r}function Rt(t,e){return on(t)?(()=>jr({name:t.name},e,{setup:t}))():t}const ng=t=>!!t.type.__asyncLoader;function v2e(t){on(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:r,delay:i=200,timeout:o,suspensible:a=!0,onError:s}=t;let l=null,c,u=0;const f=()=>(u++,l=null,d()),d=()=>{let h;return l||(h=l=e().catch(g=>{if(g=g instanceof Error?g:new Error(String(g)),s)return new Promise((y,S)=>{s(g,()=>y(f()),()=>S(g),u+1)});throw g}).then(g=>h!==l&&l?l:(g&&(g.__esModule||g[Symbol.toStringTag]==="Module")&&(g=g.default),c=g,g)))};return Rt({name:"AsyncComponentWrapper",__asyncLoader:d,get __asyncResolved(){return c},setup(){const h=zi;if(c)return()=>C5(c,h);const g=_=>{l=null,Rg(_,h,13,!r)};if(a&&h.suspense||e0)return d().then(_=>()=>C5(_,h)).catch(_=>(g(_),()=>r?at(r,{error:_}):null));const y=Tl(!1),S=Tl(),v=Tl(!!i);return i&&setTimeout(()=>{v.value=!1},i),o!=null&&setTimeout(()=>{if(!y.value&&!S.value){const _=new Error(`Async component timed out after ${o}ms.`);g(_),S.value=_}},o),d().then(()=>{y.value=!0,h.parent&&Y2(h.parent.vnode)&&uT(h.parent.update)}).catch(_=>{g(_),S.value=_}),()=>{if(y.value&&c)return C5(c,h);if(S.value&&r)return at(r,{error:S.value});if(n&&!v.value)return at(n)}}})}function C5(t,e){const{ref:n,props:r,children:i,ce:o}=e.vnode,a=at(t,r,i);return a.ref=n,a.ce=o,delete e.vnode.ce,a}const Y2=t=>t.type.__isKeepAlive,y2e={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=bc(),r=n.ctx;if(!r.renderer)return()=>{const _=e.default&&e.default();return _&&_.length===1?_[0]:_};const i=new Map,o=new Set;let a=null;const s=n.suspense,{renderer:{p:l,m:c,um:u,o:{createElement:f}}}=r,d=f("div");r.activate=(_,x,C,k,m)=>{const T=_.component;c(_,x,C,0,s),l(T.vnode,_,x,C,T,s,k,_.slotScopeIds,m),yo(()=>{T.isDeactivated=!1,T.a&&xv(T.a);const E=_.props&&_.props.onVnodeMounted;E&&Ga(E,T.parent,_)},s)},r.deactivate=_=>{const x=_.component;c(_,d,null,1,s),yo(()=>{x.da&&xv(x.da);const C=_.props&&_.props.onVnodeUnmounted;C&&Ga(C,x.parent,_),x.isDeactivated=!0},s)};function h(_){T5(_),u(_,n,s,!0)}function g(_){i.forEach((x,C)=>{const k=JE(x.type);k&&(!_||!_(k))&&y(C)})}function y(_){const x=i.get(_);!a||!ic(x,a)?h(x):a&&T5(a),i.delete(_),o.delete(_)}ki(()=>[t.include,t.exclude],([_,x])=>{_&&g(C=>_b(_,C)),x&&g(C=>!_b(x,C))},{flush:"post",deep:!0});let S=null;const v=()=>{S!=null&&i.set(S,A5(n.subTree))};return Bg(v),gT(v),E0(()=>{i.forEach(_=>{const{subTree:x,suspense:C}=n,k=A5(x);if(_.type===k.type&&_.key===k.key){T5(k);const m=k.component.da;m&&yo(m,C);return}h(_)})}),()=>{if(S=null,!e.default)return null;const _=e.default(),x=_[0];if(_.length>1)return a=null,_;if(!Yd(x)||!(x.shapeFlag&4)&&!(x.shapeFlag&128))return a=null,x;let C=A5(x);const k=C.type,m=JE(ng(C)?C.type.__asyncResolved||{}:k),{include:T,exclude:E,max:I}=t;if(T&&(!m||!_b(T,m))||E&&m&&_b(E,m))return a=C,x;const D=C.key==null?k:C.key,F=i.get(D);return C.el&&(C=gu(C),x.shapeFlag&128&&(x.ssContent=C)),S=D,F?(C.el=F.el,C.component=F.component,C.transition&&yg(C,C.transition),C.shapeFlag|=512,o.delete(D),o.add(D)):(o.add(D),I&&o.size>parseInt(I,10)&&y(o.values().next().value)),C.shapeFlag|=256,a=C,oX(x.type)?x:C}}},b2e=y2e;function _b(t,e){return St(t)?t.some(n=>_b(n,e)):ai(t)?t.split(",").includes(e):Ybe(t)?t.test(e):!1}function fX(t,e){hX(t,"a",e)}function dX(t,e){hX(t,"da",e)}function hX(t,e,n=zi){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(pT(e,r,n),n){let i=n.parent;for(;i&&i.parent;)Y2(i.parent.vnode)&&S2e(r,e,n,i),i=i.parent}}function S2e(t,e,n,r){const i=pT(e,t,r,!0);K2(()=>{I6(r[e],i)},n)}function T5(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function A5(t){return t.shapeFlag&128?t.ssContent:t}function pT(t,e,n=zi,r=!1){if(n){const i=n[t]||(n[t]=[]),o=e.__weh||(e.__weh=(...a)=>{if(n.isUnmounted)return;T0(),Kd(n);const s=zs(e,n,t,a);return Id(),A0(),s});return r?i.unshift(o):i.push(o),o}}const Of=t=>(e,n=zi)=>(!e0||t==="sp")&&pT(t,(...r)=>e(...r),n),Z6=Of("bm"),Bg=Of("m"),pX=Of("bu"),gT=Of("u"),E0=Of("bum"),K2=Of("um"),gX=Of("sp"),mX=Of("rtg"),vX=Of("rtc");function yX(t,e=zi){pT("ec",t,e)}const Q6="components",_2e="directives";function Pt(t,e){return tI(Q6,t,!0,e)||t}const bX=Symbol.for("v-ndc");function eI(t){return ai(t)?tI(Q6,t,!1)||t:t||bX}function w2e(t){return tI(_2e,t)}function tI(t,e,n=!0,r=!1){const i=lo||zi;if(i){const o=i.type;if(t===Q6){const s=JE(o,!1);if(s&&(s===e||s===as(e)||s===U2(as(e))))return o}const a=VR(i[t]||o[t],e)||VR(i.appContext[t],e);return!a&&r?o:a}}function VR(t,e){return t&&(t[e]||t[as(e)]||t[U2(as(e))])}function uo(t,e,n,r){let i;const o=n&&n[r];if(St(t)||ai(t)){i=new Array(t.length);for(let a=0,s=t.length;a<s;a++)i[a]=e(t[a],a,void 0,o&&o[a])}else if(typeof t=="number"){i=new Array(t);for(let a=0;a<t;a++)i[a]=e(a+1,a,void 0,o&&o[a])}else if(kr(t))if(t[Symbol.iterator])i=Array.from(t,(a,s)=>e(a,s,void 0,o&&o[s]));else{const a=Object.keys(t);i=new Array(a.length);for(let s=0,l=a.length;s<l;s++){const c=a[s];i[s]=e(t[c],c,s,o&&o[s])}}else i=[];return n&&(n[r]=i),i}function k2e(t,e){for(let n=0;n<e.length;n++){const r=e[n];if(St(r))for(let i=0;i<r.length;i++)t[r[i].name]=r[i].fn;else r&&(t[r.name]=r.key?(...i)=>{const o=r.fn(...i);return o&&(o.key=r.key),o}:r.fn)}return t}function nI(t,e,n={},r,i){if(lo.isCE||lo.parent&&ng(lo.parent)&&lo.parent.isCE)return e!=="default"&&(n.name=e),at("slot",n,r&&r());let o=t[e];o&&o._c&&(o._d=!1),Oe();const a=o&&SX(o(n)),s=en(hn,{key:n.key||a&&a.key||`_${e}`},a||(r?r():[]),a&&t._===1?64:-2);return!i&&s.scopeId&&(s.slotScopeIds=[s.scopeId+"-s"]),o&&o._c&&(o._d=!0),s}function SX(t){return t.some(e=>Yd(e)?!(e.type===Xo||e.type===hn&&!SX(e.children)):!0)?t:null}function x2e(t,e){const n={};for(const r in t)n[e&&/[A-Z]/.test(r)?`on:${r}`:Hb(r)]=t[r];return n}const jE=t=>t?RX(t)?yT(t)||t.proxy:jE(t.parent):null,Ub=jr(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>jE(t.parent),$root:t=>jE(t.root),$emit:t=>t.emit,$options:t=>rI(t),$forceUpdate:t=>t.f||(t.f=()=>uT(t.update)),$nextTick:t=>t.n||(t.n=P0.bind(t.proxy)),$watch:t=>g2e.bind(t)}),P5=(t,e)=>t!==Sr&&!t.__isScriptSetup&&Xn(t,e),HE={get({_:t},e){const{ctx:n,setupState:r,data:i,props:o,accessCache:a,type:s,appContext:l}=t;let c;if(e[0]!=="$"){const h=a[e];if(h!==void 0)switch(h){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return o[e]}else{if(P5(r,e))return a[e]=1,r[e];if(i!==Sr&&Xn(i,e))return a[e]=2,i[e];if((c=t.propsOptions[0])&&Xn(c,e))return a[e]=3,o[e];if(n!==Sr&&Xn(n,e))return a[e]=4,n[e];UE&&(a[e]=0)}}const u=Ub[e];let f,d;if(u)return e==="$attrs"&&us(t,"get",e),u(t);if((f=s.__cssModules)&&(f=f[e]))return f;if(n!==Sr&&Xn(n,e))return a[e]=4,n[e];if(d=l.config.globalProperties,Xn(d,e))return d[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:o}=t;return P5(i,e)?(i[e]=n,!0):r!==Sr&&Xn(r,e)?(r[e]=n,!0):Xn(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(o[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:o}},a){let s;return!!n[a]||t!==Sr&&Xn(t,a)||P5(e,a)||(s=o[0])&&Xn(s,a)||Xn(r,a)||Xn(Ub,a)||Xn(i.config.globalProperties,a)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Xn(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}},C2e=jr({},HE,{get(t,e){if(e!==Symbol.unscopables)return HE.get(t,e,t)},has(t,e){return e[0]!=="_"&&!Qbe(e)}});function T2e(){return null}function A2e(){return null}function P2e(t){}function E2e(t){}function O2e(){return null}function I2e(){}function $2e(t,e){return null}function F2e(){return _X().slots}function L2e(){return _X().attrs}function D2e(t,e,n){const r=bc();if(n&&n.local){const i=Tl(t[e]);return ki(()=>t[e],o=>i.value=o),ki(i,o=>{o!==t[e]&&r.emit(`update:${e}`,o)}),i}else return{__v_isRef:!0,get value(){return t[e]},set value(i){r.emit(`update:${e}`,i)}}}function _X(){const t=bc();return t.setupContext||(t.setupContext=BX(t))}function L1(t){return St(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function N2e(t,e){const n=L1(t);for(const r in e){if(r.startsWith("__skip"))continue;let i=n[r];i?St(i)||on(i)?i=n[r]={type:i,default:e[r]}:i.default=e[r]:i===null&&(i=n[r]={default:e[r]}),i&&e[`__skip_${r}`]&&(i.skipFactory=!0)}return n}function M2e(t,e){return!t||!e?t||e:St(t)&&St(e)?t.concat(e):jr({},L1(t),L1(e))}function R2e(t,e){const n={};for(const r in t)e.includes(r)||Object.defineProperty(n,r,{enumerable:!0,get:()=>t[r]});return n}function z2e(t){const e=bc();let n=t();return Id(),$6(n)&&(n=n.catch(r=>{throw Kd(e),r})),[n,()=>Kd(e)]}let UE=!0;function V2e(t){const e=rI(t),n=t.proxy,r=t.ctx;UE=!1,e.beforeCreate&&BR(e.beforeCreate,t,"bc");const{data:i,computed:o,methods:a,watch:s,provide:l,inject:c,created:u,beforeMount:f,mounted:d,beforeUpdate:h,updated:g,activated:y,deactivated:S,beforeDestroy:v,beforeUnmount:_,destroyed:x,unmounted:C,render:k,renderTracked:m,renderTriggered:T,errorCaptured:E,serverPrefetch:I,expose:D,inheritAttrs:F,components:R,directives:z,filters:B}=e;if(c&&B2e(c,r,null),a)for(const _e in a){const Ae=a[_e];on(Ae)&&(r[_e]=Ae.bind(n))}if(i){const _e=i.call(n,n);kr(_e)&&(t.data=hh(_e))}if(UE=!0,o)for(const _e in o){const Ae=o[_e],Pe=on(Ae)?Ae.bind(n,n):on(Ae.get)?Ae.get.bind(n,n):fc,Se=!on(Ae)&&on(Ae.set)?Ae.set.bind(n):fc,se=Fn({get:Pe,set:Se});Object.defineProperty(r,_e,{enumerable:!0,configurable:!0,get:()=>se.value,set:ne=>se.value=ne})}if(s)for(const _e in s)wX(s[_e],r,n,_e);if(l){const _e=on(l)?l.call(n):l;Reflect.ownKeys(_e).forEach(Ae=>{Wb(Ae,_e[Ae])})}u&&BR(u,t,"c");function oe(_e,Ae){St(Ae)?Ae.forEach(Pe=>_e(Pe.bind(n))):Ae&&_e(Ae.bind(n))}if(oe(Z6,f),oe(Bg,d),oe(pX,h),oe(gT,g),oe(fX,y),oe(dX,S),oe(yX,E),oe(vX,m),oe(mX,T),oe(E0,_),oe(K2,C),oe(gX,I),St(D))if(D.length){const _e=t.exposed||(t.exposed={});D.forEach(Ae=>{Object.defineProperty(_e,Ae,{get:()=>n[Ae],set:Pe=>n[Ae]=Pe})})}else t.exposed||(t.exposed={});k&&t.render===fc&&(t.render=k),F!=null&&(t.inheritAttrs=F),R&&(t.components=R),z&&(t.directives=z)}function B2e(t,e,n=fc){St(t)&&(t=WE(t));for(const r in t){const i=t[r];let o;kr(i)?"default"in i?o=Ni(i.from||r,i.default,!0):o=Ni(i.from||r):o=Ni(i),fi(o)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):e[r]=o}}function BR(t,e,n){zs(St(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function wX(t,e,n,r){const i=r.includes(".")?lX(n,r):()=>n[r];if(ai(t)){const o=e[t];on(o)&&ki(i,o)}else if(on(t))ki(i,t.bind(n));else if(kr(t))if(St(t))t.forEach(o=>wX(o,e,n,r));else{const o=on(t.handler)?t.handler.bind(n):e[t.handler];on(o)&&ki(i,o,t)}}function rI(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:o,config:{optionMergeStrategies:a}}=t.appContext,s=o.get(e);let l;return s?l=s:!i.length&&!n&&!r?l=e:(l={},i.length&&i.forEach(c=>Jx(l,c,a,!0)),Jx(l,e,a)),kr(e)&&o.set(e,l),l}function Jx(t,e,n,r=!1){const{mixins:i,extends:o}=e;o&&Jx(t,o,n,!0),i&&i.forEach(a=>Jx(t,a,n,!0));for(const a in e)if(!(r&&a==="expose")){const s=j2e[a]||n&&n[a];t[a]=s?s(t[a],e[a]):e[a]}return t}const j2e={data:jR,props:HR,emits:HR,methods:wb,computed:wb,beforeCreate:ha,created:ha,beforeMount:ha,mounted:ha,beforeUpdate:ha,updated:ha,beforeDestroy:ha,beforeUnmount:ha,destroyed:ha,unmounted:ha,activated:ha,deactivated:ha,errorCaptured:ha,serverPrefetch:ha,components:wb,directives:wb,watch:U2e,provide:jR,inject:H2e};function jR(t,e){return e?t?function(){return jr(on(t)?t.call(this,this):t,on(e)?e.call(this,this):e)}:e:t}function H2e(t,e){return wb(WE(t),WE(e))}function WE(t){if(St(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function ha(t,e){return t?[...new Set([].concat(t,e))]:e}function wb(t,e){return t?jr(Object.create(null),t,e):e}function HR(t,e){return t?St(t)&&St(e)?[...new Set([...t,...e])]:jr(Object.create(null),L1(t),L1(e??{})):e}function U2e(t,e){if(!t)return e;if(!e)return t;const n=jr(Object.create(null),t);for(const r in e)n[r]=ha(t[r],e[r]);return n}function kX(){return{app:null,config:{isNativeTag:Wbe,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let W2e=0;function G2e(t,e){return function(r,i=null){on(r)||(r=jr({},r)),i!=null&&!kr(i)&&(i=null);const o=kX(),a=new Set;let s=!1;const l=o.app={_uid:W2e++,_component:r,_props:i,_container:null,_context:o,_instance:null,version:WX,get config(){return o.config},set config(c){},use(c,...u){return a.has(c)||(c&&on(c.install)?(a.add(c),c.install(l,...u)):on(c)&&(a.add(c),c(l,...u))),l},mixin(c){return o.mixins.includes(c)||o.mixins.push(c),l},component(c,u){return u?(o.components[c]=u,l):o.components[c]},directive(c,u){return u?(o.directives[c]=u,l):o.directives[c]},mount(c,u,f){if(!s){const d=at(r,i);return d.appContext=o,u&&e?e(d,c):t(d,c,f),s=!0,l._container=c,c.__vue_app__=l,yT(d.component)||d.component.proxy}},unmount(){s&&(t(null,l._container),delete l._container.__vue_app__)},provide(c,u){return o.provides[c]=u,l},runWithContext(c){D1=l;try{return c()}finally{D1=null}}};return l}}let D1=null;function Wb(t,e){if(zi){let n=zi.provides;const r=zi.parent&&zi.parent.provides;r===n&&(n=zi.provides=Object.create(r)),n[t]=e}}function Ni(t,e,n=!1){const r=zi||lo;if(r||D1){const i=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:D1._context.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&on(e)?e.call(r&&r.proxy):e}}function q2e(){return!!(zi||lo||D1)}function Y2e(t,e,n,r=!1){const i={},o={};Gx(o,mT,1),t.propsDefaults=Object.create(null),xX(t,e,i,o);for(const a in t.propsOptions[0])a in i||(i[a]=void 0);n?t.props=r?i:JK(i):t.type.props?t.props=i:t.props=o,t.attrs=o}function K2e(t,e,n,r){const{props:i,attrs:o,vnode:{patchFlag:a}}=t,s=Dn(i),[l]=t.propsOptions;let c=!1;if((r||a>0)&&!(a&16)){if(a&8){const u=t.vnode.dynamicProps;for(let f=0;f<u.length;f++){let d=u[f];if(fT(t.emitsOptions,d))continue;const h=e[d];if(l)if(Xn(o,d))h!==o[d]&&(o[d]=h,c=!0);else{const g=as(d);i[g]=GE(l,s,g,h,t,!1)}else h!==o[d]&&(o[d]=h,c=!0)}}}else{xX(t,e,i,o)&&(c=!0);let u;for(const f in s)(!e||!Xn(e,f)&&((u=Sl(f))===f||!Xn(e,u)))&&(l?n&&(n[f]!==void 0||n[u]!==void 0)&&(i[f]=GE(l,s,f,void 0,t,!0)):delete i[f]);if(o!==s)for(const f in o)(!e||!Xn(e,f))&&(delete o[f],c=!0)}c&&wf(t,"set","$attrs")}function xX(t,e,n,r){const[i,o]=t.propsOptions;let a=!1,s;if(e)for(let l in e){if(jb(l))continue;const c=e[l];let u;i&&Xn(i,u=as(l))?!o||!o.includes(u)?n[u]=c:(s||(s={}))[u]=c:fT(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,a=!0)}if(o){const l=Dn(n),c=s||Sr;for(let u=0;u<o.length;u++){const f=o[u];n[f]=GE(i,l,f,c[f],t,!Xn(c,f))}}return a}function GE(t,e,n,r,i,o){const a=t[n];if(a!=null){const s=Xn(a,"default");if(s&&r===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&on(l)){const{propsDefaults:c}=i;n in c?r=c[n]:(Kd(i),r=c[n]=l.call(null,e),Id())}else r=l}a[0]&&(o&&!s?r=!1:a[1]&&(r===""||r===Sl(n))&&(r=!0))}return r}function CX(t,e,n=!1){const r=e.propsCache,i=r.get(t);if(i)return i;const o=t.props,a={},s=[];let l=!1;if(!on(t)){const u=f=>{l=!0;const[d,h]=CX(f,e,!0);jr(a,d),h&&s.push(...h)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!o&&!l)return kr(t)&&r.set(t,wv),wv;if(St(o))for(let u=0;u<o.length;u++){const f=as(o[u]);UR(f)&&(a[f]=Sr)}else if(o)for(const u in o){const f=as(u);if(UR(f)){const d=o[u],h=a[f]=St(d)||on(d)?{type:d}:jr({},d);if(h){const g=qR(Boolean,h.type),y=qR(String,h.type);h[0]=g>-1,h[1]=y<0||g<y,(g>-1||Xn(h,"default"))&&s.push(f)}}}const c=[a,s];return kr(t)&&r.set(t,c),c}function UR(t){return t[0]!=="$"}function WR(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function GR(t,e){return WR(t)===WR(e)}function qR(t,e){return St(e)?e.findIndex(n=>GR(n,t)):on(e)&&GR(e,t)?0:-1}const TX=t=>t[0]==="_"||t==="$stable",iI=t=>St(t)?t.map($s):[$s(t)],X2e=(t,e,n)=>{if(e._n)return e;const r=ms((...i)=>iI(e(...i)),n);return r._c=!1,r},AX=(t,e,n)=>{const r=t._ctx;for(const i in t){if(TX(i))continue;const o=t[i];if(on(o))e[i]=X2e(i,o,r);else if(o!=null){const a=iI(o);e[i]=()=>a}}},PX=(t,e)=>{const n=iI(e);t.slots.default=()=>n},J2e=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=Dn(e),Gx(e,"_",n)):AX(e,t.slots={})}else t.slots={},e&&PX(t,e);Gx(t.slots,mT,1)},Z2e=(t,e,n)=>{const{vnode:r,slots:i}=t;let o=!0,a=Sr;if(r.shapeFlag&32){const s=e._;s?n&&s===1?o=!1:(jr(i,e),!n&&s===1&&delete i._):(o=!e.$stable,AX(e,i)),a=e}else e&&(PX(t,e),a={default:1});if(o)for(const s in i)!TX(s)&&!(s in a)&&delete i[s]};function Zx(t,e,n,r,i=!1){if(St(t)){t.forEach((d,h)=>Zx(d,e&&(St(e)?e[h]:e),n,r,i));return}if(ng(r)&&!i)return;const o=r.shapeFlag&4?yT(r.component)||r.component.proxy:r.el,a=i?null:o,{i:s,r:l}=t,c=e&&e.r,u=s.refs===Sr?s.refs={}:s.refs,f=s.setupState;if(c!=null&&c!==l&&(ai(c)?(u[c]=null,Xn(f,c)&&(f[c]=null)):fi(c)&&(c.value=null)),on(l))pf(l,s,12,[a,u]);else{const d=ai(l),h=fi(l);if(d||h){const g=()=>{if(t.f){const y=d?Xn(f,l)?f[l]:u[l]:l.value;i?St(y)&&I6(y,o):St(y)?y.includes(o)||y.push(o):d?(u[l]=[o],Xn(f,l)&&(f[l]=u[l])):(l.value=[o],t.k&&(u[t.k]=l.value))}else d?(u[l]=a,Xn(f,l)&&(f[l]=a)):h&&(l.value=a,t.k&&(u[t.k]=a))};a?(g.id=-1,yo(g,n)):g()}}}let Xf=!1;const tw=t=>/svg/.test(t.namespaceURI)&&t.tagName!=="foreignObject",nw=t=>t.nodeType===8;function Q2e(t){const{mt:e,p:n,o:{patchProp:r,createText:i,nextSibling:o,parentNode:a,remove:s,insert:l,createComment:c}}=t,u=(v,_)=>{if(!_.hasChildNodes()){n(null,v,_),Xx(),_._vnode=v;return}Xf=!1,f(_.firstChild,v,null,null,null),Xx(),_._vnode=v,Xf&&console.error("Hydration completed but contains mismatches.")},f=(v,_,x,C,k,m=!1)=>{const T=nw(v)&&v.data==="[",E=()=>y(v,_,x,C,k,T),{type:I,ref:D,shapeFlag:F,patchFlag:R}=_;let z=v.nodeType;_.el=v,R===-2&&(m=!1,_.dynamicChildren=null);let B=null;switch(I){case bg:z!==3?_.children===""?(l(_.el=i(""),a(v),v),B=v):B=E():(v.data!==_.children&&(Xf=!0,v.data=_.children),B=o(v));break;case Xo:z!==8||T?B=E():B=o(v);break;case rg:if(T&&(v=o(v),z=v.nodeType),z===1||z===3){B=v;const ie=!_.children.length;for(let oe=0;oe<_.staticCount;oe++)ie&&(_.children+=B.nodeType===1?B.outerHTML:B.data),oe===_.staticCount-1&&(_.anchor=B),B=o(B);return T?o(B):B}else E();break;case hn:T?B=g(v,_,x,C,k,m):B=E();break;default:if(F&1)z!==1||_.type.toLowerCase()!==v.tagName.toLowerCase()?B=E():B=d(v,_,x,C,k,m);else if(F&6){_.slotScopeIds=k;const ie=a(v);if(e(_,ie,null,x,C,tw(ie),m),B=T?S(v):o(v),B&&nw(B)&&B.data==="teleport end"&&(B=o(B)),ng(_)){let oe;T?(oe=at(hn),oe.anchor=B?B.previousSibling:ie.lastChild):oe=v.nodeType===3?Vi(""):at("div"),oe.el=v,_.component.subTree=oe}}else F&64?z!==8?B=E():B=_.type.hydrate(v,_,x,C,k,m,t,h):F&128&&(B=_.type.hydrate(v,_,x,C,tw(a(v)),k,m,t,f))}return D!=null&&Zx(D,null,C,_),B},d=(v,_,x,C,k,m)=>{m=m||!!_.dynamicChildren;const{type:T,props:E,patchFlag:I,shapeFlag:D,dirs:F}=_,R=T==="input"&&F||T==="option";if(R||I!==-1){if(F&&Wc(_,null,x,"created"),E)if(R||!m||I&48)for(const B in E)(R&&B.endsWith("value")||H2(B)&&!jb(B))&&r(v,B,null,E[B],!1,void 0,x);else E.onClick&&r(v,"onClick",null,E.onClick,!1,void 0,x);let z;if((z=E&&E.onVnodeBeforeMount)&&Ga(z,x,_),F&&Wc(_,null,x,"beforeMount"),((z=E&&E.onVnodeMounted)||F)&&aX(()=>{z&&Ga(z,x,_),F&&Wc(_,null,x,"mounted")},C),D&16&&!(E&&(E.innerHTML||E.textContent))){let B=h(v.firstChild,_,v,x,C,k,m);for(;B;){Xf=!0;const ie=B;B=B.nextSibling,s(ie)}}else D&8&&v.textContent!==_.children&&(Xf=!0,v.textContent=_.children)}return v.nextSibling},h=(v,_,x,C,k,m,T)=>{T=T||!!_.dynamicChildren;const E=_.children,I=E.length;for(let D=0;D<I;D++){const F=T?E[D]:E[D]=$s(E[D]);if(v)v=f(v,F,C,k,m,T);else{if(F.type===bg&&!F.children)continue;Xf=!0,n(null,F,x,null,C,k,tw(x),m)}}return v},g=(v,_,x,C,k,m)=>{const{slotScopeIds:T}=_;T&&(k=k?k.concat(T):T);const E=a(v),I=h(o(v),_,E,x,C,k,m);return I&&nw(I)&&I.data==="]"?o(_.anchor=I):(Xf=!0,l(_.anchor=c("]"),E,I),I)},y=(v,_,x,C,k,m)=>{if(Xf=!0,_.el=null,m){const I=S(v);for(;;){const D=o(v);if(D&&D!==I)s(D);else break}}const T=o(v),E=a(v);return s(v),n(null,_,E,T,x,C,tw(E),k),T},S=v=>{let _=0;for(;v;)if(v=o(v),v&&nw(v)&&(v.data==="["&&_++,v.data==="]")){if(_===0)return o(v);_--}return v};return[u,f]}const yo=aX;function EX(t){return IX(t)}function OX(t){return IX(t,Q2e)}function IX(t,e){const n=NE();n.__VUE__=!0;const{insert:r,remove:i,patchProp:o,createElement:a,createText:s,createComment:l,setText:c,setElementText:u,parentNode:f,nextSibling:d,setScopeId:h=fc,insertStaticContent:g}=t,y=(j,Y,O,M=null,H=null,Q=null,ve=!1,ge=null,De=!!Y.dynamicChildren)=>{if(j===Y)return;j&&!ic(j,Y)&&(M=te(j),ne(j,H,Q,!0),j=null),Y.patchFlag===-2&&(De=!1,Y.dynamicChildren=null);const{type:Le,ref:tt,shapeFlag:Xe}=Y;switch(Le){case bg:S(j,Y,O,M);break;case Xo:v(j,Y,O,M);break;case rg:j==null&&_(Y,O,M,ve);break;case hn:R(j,Y,O,M,H,Q,ve,ge,De);break;default:Xe&1?k(j,Y,O,M,H,Q,ve,ge,De):Xe&6?z(j,Y,O,M,H,Q,ve,ge,De):(Xe&64||Xe&128)&&Le.process(j,Y,O,M,H,Q,ve,ge,De,ce)}tt!=null&&H&&Zx(tt,j&&j.ref,Q,Y||j,!Y)},S=(j,Y,O,M)=>{if(j==null)r(Y.el=s(Y.children),O,M);else{const H=Y.el=j.el;Y.children!==j.children&&c(H,Y.children)}},v=(j,Y,O,M)=>{j==null?r(Y.el=l(Y.children||""),O,M):Y.el=j.el},_=(j,Y,O,M)=>{[j.el,j.anchor]=g(j.children,Y,O,M,j.el,j.anchor)},x=({el:j,anchor:Y},O,M)=>{let H;for(;j&&j!==Y;)H=d(j),r(j,O,M),j=H;r(Y,O,M)},C=({el:j,anchor:Y})=>{let O;for(;j&&j!==Y;)O=d(j),i(j),j=O;i(Y)},k=(j,Y,O,M,H,Q,ve,ge,De)=>{ve=ve||Y.type==="svg",j==null?m(Y,O,M,H,Q,ve,ge,De):I(j,Y,H,Q,ve,ge,De)},m=(j,Y,O,M,H,Q,ve,ge)=>{let De,Le;const{type:tt,props:Xe,shapeFlag:et,transition:Qe,dirs:pt}=j;if(De=j.el=a(j.type,Q,Xe&&Xe.is,Xe),et&8?u(De,j.children):et&16&&E(j.children,De,null,M,H,Q&&tt!=="foreignObject",ve,ge),pt&&Wc(j,null,M,"created"),T(De,j,j.scopeId,ve,M),Xe){for(const Kt in Xe)Kt!=="value"&&!jb(Kt)&&o(De,Kt,null,Xe[Kt],Q,j.children,M,H,ae);"value"in Xe&&o(De,"value",null,Xe.value),(Le=Xe.onVnodeBeforeMount)&&Ga(Le,M,j)}pt&&Wc(j,null,M,"beforeMount");const zt=(!H||H&&!H.pendingBranch)&&Qe&&!Qe.persisted;zt&&Qe.beforeEnter(De),r(De,Y,O),((Le=Xe&&Xe.onVnodeMounted)||zt||pt)&&yo(()=>{Le&&Ga(Le,M,j),zt&&Qe.enter(De),pt&&Wc(j,null,M,"mounted")},H)},T=(j,Y,O,M,H)=>{if(O&&h(j,O),M)for(let Q=0;Q<M.length;Q++)h(j,M[Q]);if(H){let Q=H.subTree;if(Y===Q){const ve=H.vnode;T(j,ve,ve.scopeId,ve.slotScopeIds,H.parent)}}},E=(j,Y,O,M,H,Q,ve,ge,De=0)=>{for(let Le=De;Le<j.length;Le++){const tt=j[Le]=ge?pd(j[Le]):$s(j[Le]);y(null,tt,Y,O,M,H,Q,ve,ge)}},I=(j,Y,O,M,H,Q,ve)=>{const ge=Y.el=j.el;let{patchFlag:De,dynamicChildren:Le,dirs:tt}=Y;De|=j.patchFlag&16;const Xe=j.props||Sr,et=Y.props||Sr;let Qe;O&&Gh(O,!1),(Qe=et.onVnodeBeforeUpdate)&&Ga(Qe,O,Y,j),tt&&Wc(Y,j,O,"beforeUpdate"),O&&Gh(O,!0);const pt=H&&Y.type!=="foreignObject";if(Le?D(j.dynamicChildren,Le,ge,O,M,pt,Q):ve||Ae(j,Y,ge,null,O,M,pt,Q,!1),De>0){if(De&16)F(ge,Y,Xe,et,O,M,H);else if(De&2&&Xe.class!==et.class&&o(ge,"class",null,et.class,H),De&4&&o(ge,"style",Xe.style,et.style,H),De&8){const zt=Y.dynamicProps;for(let Kt=0;Kt<zt.length;Kt++){const wt=zt[Kt],sn=Xe[wt],gr=et[wt];(gr!==sn||wt==="value")&&o(ge,wt,sn,gr,H,j.children,O,M,ae)}}De&1&&j.children!==Y.children&&u(ge,Y.children)}else!ve&&Le==null&&F(ge,Y,Xe,et,O,M,H);((Qe=et.onVnodeUpdated)||tt)&&yo(()=>{Qe&&Ga(Qe,O,Y,j),tt&&Wc(Y,j,O,"updated")},M)},D=(j,Y,O,M,H,Q,ve)=>{for(let ge=0;ge<Y.length;ge++){const De=j[ge],Le=Y[ge],tt=De.el&&(De.type===hn||!ic(De,Le)||De.shapeFlag&70)?f(De.el):O;y(De,Le,tt,null,M,H,Q,ve,!0)}},F=(j,Y,O,M,H,Q,ve)=>{if(O!==M){if(O!==Sr)for(const ge in O)!jb(ge)&&!(ge in M)&&o(j,ge,O[ge],null,ve,Y.children,H,Q,ae);for(const ge in M){if(jb(ge))continue;const De=M[ge],Le=O[ge];De!==Le&&ge!=="value"&&o(j,ge,Le,De,ve,Y.children,H,Q,ae)}"value"in M&&o(j,"value",O.value,M.value)}},R=(j,Y,O,M,H,Q,ve,ge,De)=>{const Le=Y.el=j?j.el:s(""),tt=Y.anchor=j?j.anchor:s("");let{patchFlag:Xe,dynamicChildren:et,slotScopeIds:Qe}=Y;Qe&&(ge=ge?ge.concat(Qe):Qe),j==null?(r(Le,O,M),r(tt,O,M),E(Y.children,O,tt,H,Q,ve,ge,De)):Xe>0&&Xe&64&&et&&j.dynamicChildren?(D(j.dynamicChildren,et,O,H,Q,ve,ge),(Y.key!=null||H&&Y===H.subTree)&&oI(j,Y,!0)):Ae(j,Y,O,tt,H,Q,ve,ge,De)},z=(j,Y,O,M,H,Q,ve,ge,De)=>{Y.slotScopeIds=ge,j==null?Y.shapeFlag&512?H.ctx.activate(Y,O,M,ve,De):B(Y,O,M,H,Q,ve,De):ie(j,Y,De)},B=(j,Y,O,M,H,Q,ve)=>{const ge=j.component=MX(j,M,H);if(Y2(j)&&(ge.ctx.renderer=ce),zX(ge),ge.asyncDep){if(H&&H.registerDep(ge,oe),!j.el){const De=ge.subTree=at(Xo);v(null,De,Y,O)}return}oe(ge,j,Y,O,H,Q,ve)},ie=(j,Y,O)=>{const M=Y.component=j.component;if(a2e(j,Y,O))if(M.asyncDep&&!M.asyncResolved){_e(M,Y,O);return}else M.next=Y,Q1e(M.update),M.update();else Y.el=j.el,M.vnode=Y},oe=(j,Y,O,M,H,Q,ve)=>{const ge=()=>{if(j.isMounted){let{next:tt,bu:Xe,u:et,parent:Qe,vnode:pt}=j,zt=tt,Kt;Gh(j,!1),tt?(tt.el=pt.el,_e(j,tt,ve)):tt=pt,Xe&&xv(Xe),(Kt=tt.props&&tt.props.onVnodeBeforeUpdate)&&Ga(Kt,Qe,tt,pt),Gh(j,!0);const wt=Kk(j),sn=j.subTree;j.subTree=wt,y(sn,wt,f(sn.el),te(sn),j,H,Q),tt.el=wt.el,zt===null&&Y6(j,wt.el),et&&yo(et,H),(Kt=tt.props&&tt.props.onVnodeUpdated)&&yo(()=>Ga(Kt,Qe,tt,pt),H)}else{let tt;const{el:Xe,props:et}=Y,{bm:Qe,m:pt,parent:zt}=j,Kt=ng(Y);if(Gh(j,!1),Qe&&xv(Qe),!Kt&&(tt=et&&et.onVnodeBeforeMount)&&Ga(tt,zt,Y),Gh(j,!0),Xe&&ye){const wt=()=>{j.subTree=Kk(j),ye(Xe,j.subTree,j,H,null)};Kt?Y.type.__asyncLoader().then(()=>!j.isUnmounted&&wt()):wt()}else{const wt=j.subTree=Kk(j);y(null,wt,O,M,j,H,Q),Y.el=wt.el}if(pt&&yo(pt,H),!Kt&&(tt=et&&et.onVnodeMounted)){const wt=Y;yo(()=>Ga(tt,zt,wt),H)}(Y.shapeFlag&256||zt&&ng(zt.vnode)&&zt.vnode.shapeFlag&256)&&j.a&&yo(j.a,H),j.isMounted=!0,Y=O=M=null}},De=j.effect=new G2(ge,()=>uT(Le),j.scope),Le=j.update=()=>De.run();Le.id=j.uid,Gh(j,!0),Le()},_e=(j,Y,O)=>{Y.component=j;const M=j.vnode.props;j.vnode=Y,j.next=null,K2e(j,Y.props,M,O),Z2e(j,Y.children,O),T0(),NR(),A0()},Ae=(j,Y,O,M,H,Q,ve,ge,De=!1)=>{const Le=j&&j.children,tt=j?j.shapeFlag:0,Xe=Y.children,{patchFlag:et,shapeFlag:Qe}=Y;if(et>0){if(et&128){Se(Le,Xe,O,M,H,Q,ve,ge,De);return}else if(et&256){Pe(Le,Xe,O,M,H,Q,ve,ge,De);return}}Qe&8?(tt&16&&ae(Le,H,Q),Xe!==Le&&u(O,Xe)):tt&16?Qe&16?Se(Le,Xe,O,M,H,Q,ve,ge,De):ae(Le,H,Q,!0):(tt&8&&u(O,""),Qe&16&&E(Xe,O,M,H,Q,ve,ge,De))},Pe=(j,Y,O,M,H,Q,ve,ge,De)=>{j=j||wv,Y=Y||wv;const Le=j.length,tt=Y.length,Xe=Math.min(Le,tt);let et;for(et=0;et<Xe;et++){const Qe=Y[et]=De?pd(Y[et]):$s(Y[et]);y(j[et],Qe,O,null,H,Q,ve,ge,De)}Le>tt?ae(j,H,Q,!0,!1,Xe):E(Y,O,M,H,Q,ve,ge,De,Xe)},Se=(j,Y,O,M,H,Q,ve,ge,De)=>{let Le=0;const tt=Y.length;let Xe=j.length-1,et=tt-1;for(;Le<=Xe&&Le<=et;){const Qe=j[Le],pt=Y[Le]=De?pd(Y[Le]):$s(Y[Le]);if(ic(Qe,pt))y(Qe,pt,O,null,H,Q,ve,ge,De);else break;Le++}for(;Le<=Xe&&Le<=et;){const Qe=j[Xe],pt=Y[et]=De?pd(Y[et]):$s(Y[et]);if(ic(Qe,pt))y(Qe,pt,O,null,H,Q,ve,ge,De);else break;Xe--,et--}if(Le>Xe){if(Le<=et){const Qe=et+1,pt=Qe<tt?Y[Qe].el:M;for(;Le<=et;)y(null,Y[Le]=De?pd(Y[Le]):$s(Y[Le]),O,pt,H,Q,ve,ge,De),Le++}}else if(Le>et)for(;Le<=Xe;)ne(j[Le],H,Q,!0),Le++;else{const Qe=Le,pt=Le,zt=new Map;for(Le=pt;Le<=et;Le++){const Tr=Y[Le]=De?pd(Y[Le]):$s(Y[Le]);Tr.key!=null&&zt.set(Tr.key,Le)}let Kt,wt=0;const sn=et-pt+1;let gr=!1,mi=0;const Lr=new Array(sn);for(Le=0;Le<sn;Le++)Lr[Le]=0;for(Le=Qe;Le<=Xe;Le++){const Tr=j[Le];if(wt>=sn){ne(Tr,H,Q,!0);continue}let Vn;if(Tr.key!=null)Vn=zt.get(Tr.key);else for(Kt=pt;Kt<=et;Kt++)if(Lr[Kt-pt]===0&&ic(Tr,Y[Kt])){Vn=Kt;break}Vn===void 0?ne(Tr,H,Q,!0):(Lr[Vn-pt]=Le+1,Vn>=mi?mi=Vn:gr=!0,y(Tr,Y[Vn],O,null,H,Q,ve,ge,De),wt++)}const ho=gr?eSe(Lr):wv;for(Kt=ho.length-1,Le=sn-1;Le>=0;Le--){const Tr=pt+Le,Vn=Y[Tr],Bn=Tr+1<tt?Y[Tr+1].el:M;Lr[Le]===0?y(null,Vn,O,Bn,H,Q,ve,ge,De):gr&&(Kt<0||Le!==ho[Kt]?se(Vn,O,Bn,2):Kt--)}}},se=(j,Y,O,M,H=null)=>{const{el:Q,type:ve,transition:ge,children:De,shapeFlag:Le}=j;if(Le&6){se(j.component.subTree,Y,O,M);return}if(Le&128){j.suspense.move(Y,O,M);return}if(Le&64){ve.move(j,Y,O,ce);return}if(ve===hn){r(Q,Y,O);for(let Xe=0;Xe<De.length;Xe++)se(De[Xe],Y,O,M);r(j.anchor,Y,O);return}if(ve===rg){x(j,Y,O);return}if(M!==2&&Le&1&&ge)if(M===0)ge.beforeEnter(Q),r(Q,Y,O),yo(()=>ge.enter(Q),H);else{const{leave:Xe,delayLeave:et,afterLeave:Qe}=ge,pt=()=>r(Q,Y,O),zt=()=>{Xe(Q,()=>{pt(),Qe&&Qe()})};et?et(Q,pt,zt):zt()}else r(Q,Y,O)},ne=(j,Y,O,M=!1,H=!1)=>{const{type:Q,props:ve,ref:ge,children:De,dynamicChildren:Le,shapeFlag:tt,patchFlag:Xe,dirs:et}=j;if(ge!=null&&Zx(ge,null,O,j,!0),tt&256){Y.ctx.deactivate(j);return}const Qe=tt&1&&et,pt=!ng(j);let zt;if(pt&&(zt=ve&&ve.onVnodeBeforeUnmount)&&Ga(zt,Y,j),tt&6)W(j.component,O,M);else{if(tt&128){j.suspense.unmount(O,M);return}Qe&&Wc(j,null,Y,"beforeUnmount"),tt&64?j.type.remove(j,Y,O,H,ce,M):Le&&(Q!==hn||Xe>0&&Xe&64)?ae(Le,Y,O,!1,!0):(Q===hn&&Xe&384||!H&&tt&16)&&ae(De,Y,O),M&&J(j)}(pt&&(zt=ve&&ve.onVnodeUnmounted)||Qe)&&yo(()=>{zt&&Ga(zt,Y,j),Qe&&Wc(j,null,Y,"unmounted")},O)},J=j=>{const{type:Y,el:O,anchor:M,transition:H}=j;if(Y===hn){V(O,M);return}if(Y===rg){C(j);return}const Q=()=>{i(O),H&&!H.persisted&&H.afterLeave&&H.afterLeave()};if(j.shapeFlag&1&&H&&!H.persisted){const{leave:ve,delayLeave:ge}=H,De=()=>ve(O,Q);ge?ge(j.el,Q,De):De()}else Q()},V=(j,Y)=>{let O;for(;j!==Y;)O=d(j),i(j),j=O;i(Y)},W=(j,Y,O)=>{const{bum:M,scope:H,update:Q,subTree:ve,um:ge}=j;M&&xv(M),H.stop(),Q&&(Q.active=!1,ne(ve,j,Y,O)),ge&&yo(ge,Y),yo(()=>{j.isUnmounted=!0},Y),Y&&Y.pendingBranch&&!Y.isUnmounted&&j.asyncDep&&!j.asyncResolved&&j.suspenseId===Y.pendingId&&(Y.deps--,Y.deps===0&&Y.resolve())},ae=(j,Y,O,M=!1,H=!1,Q=0)=>{for(let ve=Q;ve<j.length;ve++)ne(j[ve],Y,O,M,H)},te=j=>j.shapeFlag&6?te(j.component.subTree):j.shapeFlag&128?j.suspense.next():d(j.anchor||j.el),ue=(j,Y,O)=>{j==null?Y._vnode&&ne(Y._vnode,null,null,!0):y(Y._vnode||null,j,Y,null,null,null,O),NR(),Xx(),Y._vnode=j},ce={p:y,um:ne,m:se,r:J,mt:B,mc:E,pc:Ae,pbc:D,n:te,o:t};let fe,ye;return e&&([fe,ye]=e(ce)),{render:ue,hydrate:fe,createApp:G2e(ue,fe)}}function Gh({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function oI(t,e,n=!1){const r=t.children,i=e.children;if(St(r)&&St(i))for(let o=0;o<r.length;o++){const a=r[o];let s=i[o];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=i[o]=pd(i[o]),s.el=a.el),n||oI(a,s)),s.type===bg&&(s.el=a.el)}}function eSe(t){const e=t.slice(),n=[0];let r,i,o,a,s;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(i=n[n.length-1],t[i]<c){e[r]=i,n.push(r);continue}for(o=0,a=n.length-1;o<a;)s=o+a>>1,t[n[s]]<c?o=s+1:a=s;c<t[n[o]]&&(o>0&&(e[r]=n[o-1]),n[o]=r)}}for(o=n.length,a=n[o-1];o-- >0;)n[o]=a,a=e[a];return n}const tSe=t=>t.__isTeleport,Gb=t=>t&&(t.disabled||t.disabled===""),YR=t=>typeof SVGElement<"u"&&t instanceof SVGElement,qE=(t,e)=>{const n=t&&t.to;return ai(n)?e?e(n):null:n},nSe={__isTeleport:!0,process(t,e,n,r,i,o,a,s,l,c){const{mc:u,pc:f,pbc:d,o:{insert:h,querySelector:g,createText:y,createComment:S}}=c,v=Gb(e.props);let{shapeFlag:_,children:x,dynamicChildren:C}=e;if(t==null){const k=e.el=y(""),m=e.anchor=y("");h(k,n,r),h(m,n,r);const T=e.target=qE(e.props,g),E=e.targetAnchor=y("");T&&(h(E,T),a=a||YR(T));const I=(D,F)=>{_&16&&u(x,D,F,i,o,a,s,l)};v?I(n,m):T&&I(T,E)}else{e.el=t.el;const k=e.anchor=t.anchor,m=e.target=t.target,T=e.targetAnchor=t.targetAnchor,E=Gb(t.props),I=E?n:m,D=E?k:T;if(a=a||YR(m),C?(d(t.dynamicChildren,C,I,i,o,a,s),oI(t,e,!0)):l||f(t,e,I,D,i,o,a,s,!1),v)E||rw(e,n,k,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const F=e.target=qE(e.props,g);F&&rw(e,F,null,c,0)}else E&&rw(e,m,T,c,1)}$X(e)},remove(t,e,n,r,{um:i,o:{remove:o}},a){const{shapeFlag:s,children:l,anchor:c,targetAnchor:u,target:f,props:d}=t;if(f&&o(u),(a||!Gb(d))&&(o(c),s&16))for(let h=0;h<l.length;h++){const g=l[h];i(g,e,n,!0,!!g.dynamicChildren)}},move:rw,hydrate:rSe};function rw(t,e,n,{o:{insert:r},m:i},o=2){o===0&&r(t.targetAnchor,e,n);const{el:a,anchor:s,shapeFlag:l,children:c,props:u}=t,f=o===2;if(f&&r(a,e,n),(!f||Gb(u))&&l&16)for(let d=0;d<c.length;d++)i(c[d],e,n,2);f&&r(s,e,n)}function rSe(t,e,n,r,i,o,{o:{nextSibling:a,parentNode:s,querySelector:l}},c){const u=e.target=qE(e.props,l);if(u){const f=u._lpa||u.firstChild;if(e.shapeFlag&16)if(Gb(e.props))e.anchor=c(a(t),e,s(t),n,r,i,o),e.targetAnchor=f;else{e.anchor=a(t);let d=f;for(;d;)if(d=a(d),d&&d.nodeType===8&&d.data==="teleport anchor"){e.targetAnchor=d,u._lpa=e.targetAnchor&&a(e.targetAnchor);break}c(f,e,u,n,r,i,o)}$X(e)}return e.anchor&&a(e.anchor)}const iSe=nSe;function $X(t){const e=t.ctx;if(e&&e.ut){let n=t.children[0].el;for(;n!==t.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}const hn=Symbol.for("v-fgt"),bg=Symbol.for("v-txt"),Xo=Symbol.for("v-cmt"),rg=Symbol.for("v-stc"),qb=[];let rs=null;function Oe(t=!1){qb.push(rs=t?null:[])}function FX(){qb.pop(),rs=qb[qb.length-1]||null}let Sg=1;function YE(t){Sg+=t}function LX(t){return t.dynamicChildren=Sg>0?rs||wv:null,FX(),Sg>0&&rs&&rs.push(t),t}function je(t,e,n,r,i,o){return LX(K(t,e,n,r,i,o,!0))}function en(t,e,n,r,i){return LX(at(t,e,n,r,i,!0))}function Yd(t){return t?t.__v_isVNode===!0:!1}function ic(t,e){return t.type===e.type&&t.key===e.key}function oSe(t){}const mT="__vInternal",DX=({key:t})=>t??null,Xk=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?ai(t)||fi(t)||on(t)?{i:lo,r:t,k:e,f:!!n}:t:null);function K(t,e=null,n=null,r=0,i=null,o=t===hn?0:1,a=!1,s=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&DX(e),ref:e&&Xk(e),scopeId:dT,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:lo};return s?(aI(l,n),o&128&&t.normalize(l)):n&&(l.shapeFlag|=ai(n)?8:16),Sg>0&&!a&&rs&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&rs.push(l),l}const at=aSe;function aSe(t,e=null,n=null,r=0,i=null,o=!1){if((!t||t===bX)&&(t=Xo),Yd(t)){const s=gu(t,e,!0);return n&&aI(s,n),Sg>0&&!o&&rs&&(s.shapeFlag&6?rs[rs.indexOf(t)]=s:rs.push(s)),s.patchFlag|=-2,s}if(hSe(t)&&(t=t.__vccOpts),e){e=vT(e);let{class:s,style:l}=e;s&&!ai(s)&&(e.class=Wt(s)),kr(l)&&(B6(l)&&!St(l)&&(l=jr({},l)),e.style=W2(l))}const a=ai(t)?1:oX(t)?128:tSe(t)?64:kr(t)?4:on(t)?2:0;return K(t,e,n,r,i,a,o,!0)}function vT(t){return t?B6(t)||mT in t?jr({},t):t:null}function gu(t,e,n=!1){const{props:r,ref:i,patchFlag:o,children:a}=t,s=e?Ll(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:s,key:s&&DX(s),ref:e&&e.ref?n&&i?St(i)?i.concat(Xk(e)):[i,Xk(e)]:Xk(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==hn?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&gu(t.ssContent),ssFallback:t.ssFallback&&gu(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function Vi(t=" ",e=0){return at(bg,null,t,e)}function NX(t,e){const n=at(rg,null,t);return n.staticCount=e,n}function ct(t="",e=!1){return e?(Oe(),en(Xo,null,t)):at(Xo,null,t)}function $s(t){return t==null||typeof t=="boolean"?at(Xo):St(t)?at(hn,null,t.slice()):typeof t=="object"?pd(t):at(bg,null,String(t))}function pd(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:gu(t)}function aI(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(St(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),aI(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!(mT in e)?e._ctx=lo:i===3&&lo&&(lo.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else on(e)?(e={default:e,_ctx:lo},n=32):(e=String(e),r&64?(n=16,e=[Vi(e)]):n=8);t.children=e,t.shapeFlag|=n}function Ll(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Wt([e.class,r.class]));else if(i==="style")e.style=W2([e.style,r.style]);else if(H2(i)){const o=e[i],a=r[i];a&&o!==a&&!(St(o)&&o.includes(a))&&(e[i]=o?[].concat(o,a):a)}else i!==""&&(e[i]=r[i])}return e}function Ga(t,e,n,r=null){zs(t,e,7,[n,r])}const sSe=kX();let lSe=0;function MX(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||sSe,o={uid:lSe++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new D6(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:CX(r,i),emitsOptions:iX(r,i),emit:null,emitted:null,propsDefaults:Sr,inheritAttrs:r.inheritAttrs,ctx:Sr,data:Sr,props:Sr,attrs:Sr,slots:Sr,refs:Sr,setupState:Sr,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=t2e.bind(null,o),t.ce&&t.ce(o),o}let zi=null;const bc=()=>zi||lo;let sI,Sm,KR="__VUE_INSTANCE_SETTERS__";(Sm=NE()[KR])||(Sm=NE()[KR]=[]),Sm.push(t=>zi=t),sI=t=>{Sm.length>1?Sm.forEach(e=>e(t)):Sm[0](t)};const Kd=t=>{sI(t),t.scope.on()},Id=()=>{zi&&zi.scope.off(),sI(null)};function RX(t){return t.vnode.shapeFlag&4}let e0=!1;function zX(t,e=!1){e0=e;const{props:n,children:r}=t.vnode,i=RX(t);Y2e(t,n,i,e),J2e(t,r);const o=i?cSe(t,e):void 0;return e0=!1,o}function cSe(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=vg(new Proxy(t.ctx,HE));const{setup:r}=n;if(r){const i=t.setupContext=r.length>1?BX(t):null;Kd(t),T0();const o=pf(r,t,0,[t.props,i]);if(A0(),Id(),$6(o)){if(o.then(Id,Id),e)return o.then(a=>{KE(t,a,e)}).catch(a=>{Rg(a,t,0)});t.asyncDep=o}else KE(t,o,e)}else VX(t,e)}function KE(t,e,n){on(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:kr(e)&&(t.setupState=U6(e)),VX(t,n)}let Qx,XE;function uSe(t){Qx=t,XE=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,C2e))}}const fSe=()=>!Qx;function VX(t,e,n){const r=t.type;if(!t.render){if(!e&&Qx&&!r.render){const i=r.template||rI(t).template;if(i){const{isCustomElement:o,compilerOptions:a}=t.appContext.config,{delimiters:s,compilerOptions:l}=r,c=jr(jr({isCustomElement:o,delimiters:s},a),l);r.render=Qx(i,c)}}t.render=r.render||fc,XE&&XE(t)}Kd(t),T0(),V2e(t),A0(),Id()}function dSe(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return us(t,"get","$attrs"),e[n]}}))}function BX(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return dSe(t)},slots:t.slots,emit:t.emit,expose:e}}function yT(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(U6(vg(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Ub)return Ub[n](t)},has(e,n){return n in e||n in Ub}}))}function JE(t,e=!0){return on(t)?t.displayName||t.name:t.name||e&&t.__name}function hSe(t){return on(t)&&"__vccOpts"in t}const Fn=(t,e)=>Y1e(t,e,e0);function Xd(t,e,n){const r=arguments.length;return r===2?kr(e)&&!St(e)?Yd(e)?at(t,null,[e]):at(t,e):at(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Yd(n)&&(n=[n]),at(t,e,n))}const jX=Symbol.for("v-scx"),HX=()=>Ni(jX);function pSe(){}function gSe(t,e,n,r){const i=n[r];if(i&&UX(i,t))return i;const o=e();return o.memo=t.slice(),n[r]=o}function UX(t,e){const n=t.memo;if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(Zv(n[r],e[r]))return!1;return Sg>0&&rs&&rs.push(t),!0}const WX="3.3.2",mSe={createComponentInstance:MX,setupComponent:zX,renderComponentRoot:Kk,setCurrentRenderingInstance:$1,isVNode:Yd,normalizeVNode:$s},vSe=mSe,ySe=null,bSe=null,SSe="http://www.w3.org/2000/svg",Pp=typeof document<"u"?document:null,XR=Pp&&Pp.createElement("template"),_Se={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e?Pp.createElementNS(SSe,t):Pp.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>Pp.createTextNode(t),createComment:t=>Pp.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Pp.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,o){const a=n?n.previousSibling:e.lastChild;if(i&&(i===o||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===o||!(i=i.nextSibling)););else{XR.innerHTML=r?`<svg>${t}</svg>`:t;const s=XR.content;if(r){const l=s.firstChild;for(;l.firstChild;)s.appendChild(l.firstChild);s.removeChild(l)}e.insertBefore(s,n)}return[a?a.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function wSe(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function kSe(t,e,n){const r=t.style,i=ai(n);if(n&&!i){if(e&&!ai(e))for(const o in e)n[o]==null&&ZE(r,o,"");for(const o in n)ZE(r,o,n[o])}else{const o=r.display;i?e!==n&&(r.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(r.display=o)}}const JR=/\s*!important$/;function ZE(t,e,n){if(St(n))n.forEach(r=>ZE(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=xSe(t,e);JR.test(n)?t.setProperty(Sl(r),n.replace(JR,""),"important"):t[r]=n}}const ZR=["Webkit","Moz","ms"],E5={};function xSe(t,e){const n=E5[e];if(n)return n;let r=as(e);if(r!=="filter"&&r in t)return E5[e]=r;r=U2(r);for(let i=0;i<ZR.length;i++){const o=ZR[i]+r;if(o in t)return E5[e]=o}return e}const QR="http://www.w3.org/1999/xlink";function CSe(t,e,n,r,i){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(QR,e.slice(6,e.length)):t.setAttributeNS(QR,e,n);else{const o=o1e(e);n==null||o&&!DK(n)?t.removeAttribute(e):t.setAttribute(e,o?"":n)}}function TSe(t,e,n,r,i,o,a){if(e==="innerHTML"||e==="textContent"){r&&a(r,i,o),t[e]=n??"";return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){t._value=n;const c=s==="OPTION"?t.getAttribute("value"):t.value,u=n??"";c!==u&&(t.value=u),n==null&&t.removeAttribute(e);return}let l=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=DK(n):n==null&&c==="string"?(n="",l=!0):c==="number"&&(n=0,l=!0)}try{t[e]=n}catch{}l&&t.removeAttribute(e)}function of(t,e,n,r){t.addEventListener(e,n,r)}function ASe(t,e,n,r){t.removeEventListener(e,n,r)}function PSe(t,e,n,r,i=null){const o=t._vei||(t._vei={}),a=o[e];if(r&&a)a.value=r;else{const[s,l]=ESe(e);if(r){const c=o[e]=$Se(r,i);of(t,s,c,l)}else a&&(ASe(t,s,a,l),o[e]=void 0)}}const ez=/(?:Once|Passive|Capture)$/;function ESe(t){let e;if(ez.test(t)){e={};let r;for(;r=t.match(ez);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Sl(t.slice(2)),e]}let O5=0;const OSe=Promise.resolve(),ISe=()=>O5||(OSe.then(()=>O5=0),O5=Date.now());function $Se(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;zs(FSe(r,n.value),e,5,[r])};return n.value=t,n.attached=ISe(),n}function FSe(t,e){if(St(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const tz=/^on[a-z]/,LSe=(t,e,n,r,i=!1,o,a,s,l)=>{e==="class"?wSe(t,r,i):e==="style"?kSe(t,n,r):H2(e)?O6(e)||PSe(t,e,n,r,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):DSe(t,e,r,i))?TSe(t,e,r,o,a,s,l):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),CSe(t,e,r,i))};function DSe(t,e,n,r){return r?!!(e==="innerHTML"||e==="textContent"||e in t&&tz.test(e)&&on(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||tz.test(e)&&ai(n)?!1:e in t}function GX(t,e){const n=Rt(t);class r extends bT{constructor(o){super(n,o,e)}}return r.def=n,r}const NSe=t=>GX(t,aJ),MSe=typeof HTMLElement<"u"?HTMLElement:class{};class bT extends MSe{constructor(e,n={},r){super(),this._def=e,this._props=n,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&r?r(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,P0(()=>{this._connected||(t8(null,this.shadowRoot),this._instance=null)})}_resolveDef(){this._resolved=!0;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);new MutationObserver(r=>{for(const i of r)this._setAttr(i.attributeName)}).observe(this,{attributes:!0});const e=(r,i=!1)=>{const{props:o,styles:a}=r;let s;if(o&&!St(o))for(const l in o){const c=o[l];(c===Number||c&&c.type===Number)&&(l in this._props&&(this._props[l]=Yx(this._props[l])),(s||(s=Object.create(null)))[as(l)]=!0)}this._numberProps=s,i&&this._resolveProps(r),this._applyStyles(a),this._update()},n=this._def.__asyncLoader;n?n().then(r=>e(r,!0)):e(this._def)}_resolveProps(e){const{props:n}=e,r=St(n)?n:Object.keys(n||{});for(const i of Object.keys(this))i[0]!=="_"&&r.includes(i)&&this._setProp(i,this[i],!0,!1);for(const i of r.map(as))Object.defineProperty(this,i,{get(){return this._getProp(i)},set(o){this._setProp(i,o)}})}_setAttr(e){let n=this.getAttribute(e);const r=as(e);this._numberProps&&this._numberProps[r]&&(n=Yx(n)),this._setProp(r,n,!1)}_getProp(e){return this._props[e]}_setProp(e,n,r=!0,i=!0){n!==this._props[e]&&(this._props[e]=n,i&&this._instance&&this._update(),r&&(n===!0?this.setAttribute(Sl(e),""):typeof n=="string"||typeof n=="number"?this.setAttribute(Sl(e),n+""):n||this.removeAttribute(Sl(e))))}_update(){t8(this._createVNode(),this.shadowRoot)}_createVNode(){const e=at(this._def,jr({},this._props));return this._instance||(e.ce=n=>{this._instance=n,n.isCE=!0;const r=(o,a)=>{this.dispatchEvent(new CustomEvent(o,{detail:a}))};n.emit=(o,...a)=>{r(o,a),Sl(o)!==o&&r(Sl(o),a)};let i=this;for(;i=i&&(i.parentNode||i.host);)if(i instanceof bT){n.parent=i._instance,n.provides=i._instance.provides;break}}),e}_applyStyles(e){e&&e.forEach(n=>{const r=document.createElement("style");r.textContent=n,this.shadowRoot.appendChild(r)})}}function RSe(t="$style"){{const e=bc();if(!e)return Sr;const n=e.type.__cssModules;if(!n)return Sr;const r=n[t];return r||Sr}}function zSe(t){const e=bc();if(!e)return;const n=e.ut=(i=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(o=>e8(o,i))},r=()=>{const i=t(e.proxy);QE(e.subTree,i),n(i)};sX(r),Bg(()=>{const i=new MutationObserver(r);i.observe(e.subTree.el.parentNode,{childList:!0}),K2(()=>i.disconnect())})}function QE(t,e){if(t.shapeFlag&128){const n=t.suspense;t=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{QE(n.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)e8(t.el,e);else if(t.type===hn)t.children.forEach(n=>QE(n,e));else if(t.type===rg){let{el:n,anchor:r}=t;for(;n&&(e8(n,e),n!==r);)n=n.nextSibling}}function e8(t,e){if(t.nodeType===1){const n=t.style;for(const r in e)n.setProperty(`--${r}`,e[r])}}const Jf="transition",Iy="animation",lI=(t,{slots:e})=>Xd(cX,YX(t),e);lI.displayName="Transition";const qX={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},VSe=lI.props=jr({},J6,qX),qh=(t,e=[])=>{St(t)?t.forEach(n=>n(...e)):t&&t(...e)},nz=t=>t?St(t)?t.some(e=>e.length>1):t.length>1:!1;function YX(t){const e={};for(const R in t)R in qX||(e[R]=t[R]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:o=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:s=`${n}-enter-to`,appearFromClass:l=o,appearActiveClass:c=a,appearToClass:u=s,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:d=`${n}-leave-active`,leaveToClass:h=`${n}-leave-to`}=t,g=BSe(i),y=g&&g[0],S=g&&g[1],{onBeforeEnter:v,onEnter:_,onEnterCancelled:x,onLeave:C,onLeaveCancelled:k,onBeforeAppear:m=v,onAppear:T=_,onAppearCancelled:E=x}=e,I=(R,z,B)=>{ud(R,z?u:s),ud(R,z?c:a),B&&B()},D=(R,z)=>{R._isLeaving=!1,ud(R,f),ud(R,h),ud(R,d),z&&z()},F=R=>(z,B)=>{const ie=R?T:_,oe=()=>I(z,R,B);qh(ie,[z,oe]),rz(()=>{ud(z,R?l:o),Wu(z,R?u:s),nz(ie)||iz(z,r,y,oe)})};return jr(e,{onBeforeEnter(R){qh(v,[R]),Wu(R,o),Wu(R,a)},onBeforeAppear(R){qh(m,[R]),Wu(R,l),Wu(R,c)},onEnter:F(!1),onAppear:F(!0),onLeave(R,z){R._isLeaving=!0;const B=()=>D(R,z);Wu(R,f),XX(),Wu(R,d),rz(()=>{R._isLeaving&&(ud(R,f),Wu(R,h),nz(C)||iz(R,r,S,B))}),qh(C,[R,B])},onEnterCancelled(R){I(R,!1),qh(x,[R])},onAppearCancelled(R){I(R,!0),qh(E,[R])},onLeaveCancelled(R){D(R),qh(k,[R])}})}function BSe(t){if(t==null)return null;if(kr(t))return[I5(t.enter),I5(t.leave)];{const e=I5(t);return[e,e]}}function I5(t){return Yx(t)}function Wu(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t._vtc||(t._vtc=new Set)).add(e)}function ud(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function rz(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let jSe=0;function iz(t,e,n,r){const i=t._endId=++jSe,o=()=>{i===t._endId&&r()};if(n)return setTimeout(o,n);const{type:a,timeout:s,propCount:l}=KX(t,e);if(!a)return r();const c=a+"end";let u=0;const f=()=>{t.removeEventListener(c,d),o()},d=h=>{h.target===t&&++u>=l&&f()};setTimeout(()=>{u<l&&f()},s+1),t.addEventListener(c,d)}function KX(t,e){const n=window.getComputedStyle(t),r=g=>(n[g]||"").split(", "),i=r(`${Jf}Delay`),o=r(`${Jf}Duration`),a=oz(i,o),s=r(`${Iy}Delay`),l=r(`${Iy}Duration`),c=oz(s,l);let u=null,f=0,d=0;e===Jf?a>0&&(u=Jf,f=a,d=o.length):e===Iy?c>0&&(u=Iy,f=c,d=l.length):(f=Math.max(a,c),u=f>0?a>c?Jf:Iy:null,d=u?u===Jf?o.length:l.length:0);const h=u===Jf&&/\b(transform|all)(,|$)/.test(r(`${Jf}Property`).toString());return{type:u,timeout:f,propCount:d,hasTransform:h}}function oz(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>az(n)+az(t[r])))}function az(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function XX(){return document.body.offsetHeight}const JX=new WeakMap,ZX=new WeakMap,QX={name:"TransitionGroup",props:jr({},VSe,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=bc(),r=X6();let i,o;return gT(()=>{if(!i.length)return;const a=t.moveClass||`${t.name||"v"}-move`;if(!YSe(i[0].el,n.vnode.el,a))return;i.forEach(WSe),i.forEach(GSe);const s=i.filter(qSe);XX(),s.forEach(l=>{const c=l.el,u=c.style;Wu(c,a),u.transform=u.webkitTransform=u.transitionDuration="";const f=c._moveCb=d=>{d&&d.target!==c||(!d||/transform$/.test(d.propertyName))&&(c.removeEventListener("transitionend",f),c._moveCb=null,ud(c,a))};c.addEventListener("transitionend",f)})}),()=>{const a=Dn(t),s=YX(a);let l=a.tag||hn;i=o,o=e.default?hT(e.default()):[];for(let c=0;c<o.length;c++){const u=o[c];u.key!=null&&yg(u,Qv(u,s,r,n))}if(i)for(let c=0;c<i.length;c++){const u=i[c];yg(u,Qv(u,s,r,n)),JX.set(u,u.el.getBoundingClientRect())}return at(l,null,o)}}},HSe=t=>delete t.mode;QX.props;const USe=QX;function WSe(t){const e=t.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function GSe(t){ZX.set(t,t.el.getBoundingClientRect())}function qSe(t){const e=JX.get(t),n=ZX.get(t),r=e.left-n.left,i=e.top-n.top;if(r||i){const o=t.el.style;return o.transform=o.webkitTransform=`translate(${r}px,${i}px)`,o.transitionDuration="0s",t}}function YSe(t,e,n){const r=t.cloneNode();t._vtc&&t._vtc.forEach(a=>{a.split(/\s+/).forEach(s=>s&&r.classList.remove(s))}),n.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(r);const{hasTransform:o}=KX(r);return i.removeChild(r),o}const Jd=t=>{const e=t.props["onUpdate:modelValue"]||!1;return St(e)?n=>xv(e,n):e};function KSe(t){t.target.composing=!0}function sz(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Zd={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t._assign=Jd(i);const o=r||i.props&&i.props.type==="number";of(t,e?"change":"input",a=>{if(a.target.composing)return;let s=t.value;n&&(s=s.trim()),o&&(s=qx(s)),t._assign(s)}),n&&of(t,"change",()=>{t.value=t.value.trim()}),e||(of(t,"compositionstart",KSe),of(t,"compositionend",sz),of(t,"change",sz))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:r,number:i}},o){if(t._assign=Jd(o),t.composing||document.activeElement===t&&t.type!=="range"&&(n||r&&t.value.trim()===e||(i||t.type==="number")&&qx(t.value)===e))return;const a=e??"";t.value!==a&&(t.value=a)}},cI={deep:!0,created(t,e,n){t._assign=Jd(n),of(t,"change",()=>{const r=t._modelValue,i=t0(t),o=t.checked,a=t._assign;if(St(r)){const s=iT(r,i),l=s!==-1;if(o&&!l)a(r.concat(i));else if(!o&&l){const c=[...r];c.splice(s,1),a(c)}}else if(Mg(r)){const s=new Set(r);o?s.add(i):s.delete(i),a(s)}else a(eJ(t,o))})},mounted:lz,beforeUpdate(t,e,n){t._assign=Jd(n),lz(t,e,n)}};function lz(t,{value:e,oldValue:n},r){t._modelValue=e,St(e)?t.checked=iT(e,r.props.value)>-1:Mg(e)?t.checked=e.has(r.props.value):e!==n&&(t.checked=Gd(e,eJ(t,!0)))}const uI={created(t,{value:e},n){t.checked=Gd(e,n.props.value),t._assign=Jd(n),of(t,"change",()=>{t._assign(t0(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t._assign=Jd(r),e!==n&&(t.checked=Gd(e,r.props.value))}},X2={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const i=Mg(e);of(t,"change",()=>{const o=Array.prototype.filter.call(t.options,a=>a.selected).map(a=>n?qx(t0(a)):t0(a));t._assign(t.multiple?i?new Set(o):o:o[0])}),t._assign=Jd(r)},mounted(t,{value:e}){cz(t,e)},beforeUpdate(t,e,n){t._assign=Jd(n)},updated(t,{value:e}){cz(t,e)}};function cz(t,e){const n=t.multiple;if(!(n&&!St(e)&&!Mg(e))){for(let r=0,i=t.options.length;r<i;r++){const o=t.options[r],a=t0(o);if(n)St(e)?o.selected=iT(e,a)>-1:o.selected=e.has(a);else if(Gd(t0(o),e)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function t0(t){return"_value"in t?t._value:t.value}function eJ(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const tJ={created(t,e,n){iw(t,e,n,null,"created")},mounted(t,e,n){iw(t,e,n,null,"mounted")},beforeUpdate(t,e,n,r){iw(t,e,n,r,"beforeUpdate")},updated(t,e,n,r){iw(t,e,n,r,"updated")}};function nJ(t,e){switch(t){case"SELECT":return X2;case"TEXTAREA":return Zd;default:switch(e){case"checkbox":return cI;case"radio":return uI;default:return Zd}}}function iw(t,e,n,r,i){const a=nJ(t.tagName,n.props&&n.props.type)[i];a&&a(t,e,n,r)}function XSe(){Zd.getSSRProps=({value:t})=>({value:t}),uI.getSSRProps=({value:t},e)=>{if(e.props&&Gd(e.props.value,t))return{checked:!0}},cI.getSSRProps=({value:t},e)=>{if(St(t)){if(e.props&&iT(t,e.props.value)>-1)return{checked:!0}}else if(Mg(t)){if(e.props&&t.has(e.props.value))return{checked:!0}}else if(t)return{checked:!0}},tJ.getSSRProps=(t,e)=>{if(typeof e.type!="string")return;const n=nJ(e.type.toUpperCase(),e.props&&e.props.type);if(n.getSSRProps)return n.getSSRProps(t,e)}}const JSe=["ctrl","shift","alt","meta"],ZSe={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>JSe.some(n=>t[`${n}Key`]&&!e.includes(n))},fI=(t,e)=>(n,...r)=>{for(let i=0;i<e.length;i++){const o=ZSe[e[i]];if(o&&o(n,e))return}return t(n,...r)},QSe={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},e_e=(t,e)=>n=>{if(!("key"in n))return;const r=Sl(n.key);if(e.some(i=>i===r||QSe[i]===r))return t(n)},dI={beforeMount(t,{value:e},{transition:n}){t._vod=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):$y(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),$y(t,!0),r.enter(t)):r.leave(t,()=>{$y(t,!1)}):$y(t,e))},beforeUnmount(t,{value:e}){$y(t,e)}};function $y(t,e){t.style.display=e?t._vod:"none"}function t_e(){dI.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}const rJ=jr({patchProp:LSe},_Se);let Yb,uz=!1;function iJ(){return Yb||(Yb=EX(rJ))}function oJ(){return Yb=uz?Yb:OX(rJ),uz=!0,Yb}const t8=(...t)=>{iJ().render(...t)},aJ=(...t)=>{oJ().hydrate(...t)},sJ=(...t)=>{const e=iJ().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=lJ(r);if(!i)return;const o=e._component;!on(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.innerHTML="";const a=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},e},n_e=(...t)=>{const e=oJ().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=lJ(r);if(i)return n(i,!0,i instanceof SVGElement)},e};function lJ(t){return ai(t)?document.querySelector(t):t}let fz=!1;const r_e=()=>{fz||(fz=!0,XSe(),t_e())},i_e=()=>{},o_e=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:cX,BaseTransitionPropsValidators:J6,Comment:Xo,EffectScope:D6,Fragment:hn,KeepAlive:b2e,ReactiveEffect:G2,Static:rg,Suspense:l2e,Teleport:iSe,Text:bg,Transition:lI,TransitionGroup:USe,VueElement:bT,assertNumber:X1e,callWithAsyncErrorHandling:zs,callWithErrorHandling:pf,camelize:as,capitalize:U2,cloneVNode:gu,compatUtils:bSe,compile:i_e,computed:Fn,createApp:sJ,createBlock:en,createCommentVNode:ct,createElementBlock:je,createElementVNode:K,createHydrationRenderer:OX,createPropsRestProxy:R2e,createRenderer:EX,createSSRApp:n_e,createSlots:k2e,createStaticVNode:NX,createTextVNode:Vi,createVNode:at,customRef:H1e,defineAsyncComponent:v2e,defineComponent:Rt,defineCustomElement:GX,defineEmits:A2e,defineExpose:P2e,defineModel:I2e,defineOptions:E2e,defineProps:T2e,defineSSRCustomElement:NSe,defineSlots:O2e,get devtools(){return Wm},effect:c1e,effectScope:N6,getCurrentInstance:bc,getCurrentScope:M6,getTransitionRawChildren:hT,guardReactiveProps:vT,h:Xd,handleError:Rg,hasInjectionContext:q2e,hydrate:aJ,initCustomFormatter:pSe,initDirectivesForSSR:r_e,inject:Ni,isMemoSame:UX,isProxy:B6,isReactive:hf,isReadonly:mg,isRef:fi,isRuntimeOnly:fSe,isShallow:P1,isVNode:Yd,markRaw:vg,mergeDefaults:N2e,mergeModels:M2e,mergeProps:Ll,nextTick:P0,normalizeClass:Wt,normalizeProps:L6,normalizeStyle:W2,onActivated:fX,onBeforeMount:Z6,onBeforeUnmount:E0,onBeforeUpdate:pX,onDeactivated:dX,onErrorCaptured:yX,onMounted:Bg,onRenderTracked:vX,onRenderTriggered:mX,onScopeDispose:RK,onServerPrefetch:gX,onUnmounted:K2,onUpdated:gT,openBlock:Oe,popScopeId:Vg,provide:Wb,proxyRefs:U6,pushScopeId:zg,queuePostFlushCb:q6,reactive:hh,readonly:V6,ref:Tl,registerRuntimeCompiler:uSe,render:t8,renderList:uo,renderSlot:nI,resolveComponent:Pt,resolveDirective:w2e,resolveDynamicComponent:eI,resolveFilter:ySe,resolveTransitionHooks:Qv,setBlockTracking:YE,setDevtoolsHook:rX,setTransitionHooks:yg,shallowReactive:JK,shallowReadonly:M1e,shallowRef:ru,ssrContextKey:jX,ssrUtils:vSe,stop:u1e,toDisplayString:Qt,toHandlerKey:Hb,toHandlers:x2e,toRaw:Dn,toRef:G1e,toRefs:W6,toValue:V1e,transformVNodeArgs:oSe,triggerRef:z1e,unref:ii,useAttrs:L2e,useCssModule:RSe,useCssVars:zSe,useModel:D2e,useSSRContext:HX,useSlots:F2e,useTransitionState:X6,vModelCheckbox:cI,vModelDynamic:tJ,vModelRadio:uI,vModelSelect:X2,vModelText:Zd,vShow:dI,version:WX,warn:K1e,watch:ki,watchEffect:BE,watchPostEffect:sX,watchSyncEffect:p2e,withAsyncContext:z2e,withCtx:ms,withDefaults:$2e,withDirectives:kf,withKeys:e_e,withMemo:gSe,withModifiers:fI,withScopeId:n2e},Symbol.toStringTag,{value:"Module"}));function dz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function af(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dz(Object(n),!0).forEach(function(r){Ua(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function e4(t){"@babel/helpers - typeof";return e4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e4(t)}function Ua(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a_e(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function s_e(t,e){if(t==null)return{};var n=a_e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}var l_e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},cJ={exports:{}};(function(t){(function(e){var n=function(v,_,x){if(!c(_)||f(_)||d(_)||h(_)||l(_))return _;var C,k=0,m=0;if(u(_))for(C=[],m=_.length;k<m;k++)C.push(n(v,_[k],x));else{C={};for(var T in _)Object.prototype.hasOwnProperty.call(_,T)&&(C[v(T,x)]=n(v,_[T],x))}return C},r=function(v,_){_=_||{};var x=_.separator||"_",C=_.split||/(?=[A-Z])/;return v.split(C).join(x)},i=function(v){return g(v)?v:(v=v.replace(/[\-_\s]+(.)?/g,function(_,x){return x?x.toUpperCase():""}),v.substr(0,1).toLowerCase()+v.substr(1))},o=function(v){var _=i(v);return _.substr(0,1).toUpperCase()+_.substr(1)},a=function(v,_){return r(v,_).toLowerCase()},s=Object.prototype.toString,l=function(v){return typeof v=="function"},c=function(v){return v===Object(v)},u=function(v){return s.call(v)=="[object Array]"},f=function(v){return s.call(v)=="[object Date]"},d=function(v){return s.call(v)=="[object RegExp]"},h=function(v){return s.call(v)=="[object Boolean]"},g=function(v){return v=v-0,v===v},y=function(v,_){var x=_&&"process"in _?_.process:_;return typeof x!="function"?v:function(C,k){return x(C,v,k)}},S={camelize:i,decamelize:a,pascalize:o,depascalize:a,camelizeKeys:function(v,_){return n(y(i,_),v)},decamelizeKeys:function(v,_){return n(y(a,_),v,_)},pascalizeKeys:function(v,_){return n(y(o,_),v)},depascalizeKeys:function(){return this.decamelizeKeys.apply(this,arguments)}};t.exports?t.exports=S:e.humps=S})(l_e)})(cJ);var c_e=cJ.exports,u_e=["class","style"];function f_e(t){return t.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,n){var r=n.indexOf(":"),i=c_e.camelize(n.slice(0,r)),o=n.slice(r+1).trim();return e[i]=o,e},{})}function d_e(t){return t.split(/\s+/).reduce(function(e,n){return e[n]=!0,e},{})}function uJ(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var r=(t.children||[]).map(function(l){return uJ(l)}),i=Object.keys(t.attributes||{}).reduce(function(l,c){var u=t.attributes[c];switch(c){case"class":l.class=d_e(u);break;case"style":l.style=f_e(u);break;default:l.attrs[c]=u}return l},{attrs:{},class:{},style:{}});n.class;var o=n.style,a=o===void 0?{}:o,s=s_e(n,u_e);return Xd(t.tag,af(af(af({},e),{},{class:i.class,style:af(af({},i.style),a)},i.attrs),s),r)}var fJ=!1;try{fJ=!0}catch{}function h_e(){if(!fJ&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function $5(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?Ua({},t,e):{}}function p_e(t){var e,n=(e={"fa-spin":t.spin,"fa-pulse":t.pulse,"fa-fw":t.fixedWidth,"fa-border":t.border,"fa-li":t.listItem,"fa-inverse":t.inverse,"fa-flip":t.flip===!0,"fa-flip-horizontal":t.flip==="horizontal"||t.flip==="both","fa-flip-vertical":t.flip==="vertical"||t.flip==="both"},Ua(e,"fa-".concat(t.size),t.size!==null),Ua(e,"fa-rotate-".concat(t.rotation),t.rotation!==null),Ua(e,"fa-pull-".concat(t.pull),t.pull!==null),Ua(e,"fa-swap-opacity",t.swapOpacity),Ua(e,"fa-bounce",t.bounce),Ua(e,"fa-shake",t.shake),Ua(e,"fa-beat",t.beat),Ua(e,"fa-fade",t.fade),Ua(e,"fa-beat-fade",t.beatFade),Ua(e,"fa-flash",t.flash),Ua(e,"fa-spin-pulse",t.spinPulse),Ua(e,"fa-spin-reverse",t.spinReverse),e);return Object.keys(n).map(function(r){return n[r]?r:null}).filter(function(r){return r})}function hz(t){if(t&&e4(t)==="object"&&t.prefix&&t.iconName&&t.icon)return t;if(DE.icon)return DE.icon(t);if(t===null)return null;if(e4(t)==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}var g_e=Rt({name:"FontAwesomeIcon",props:{border:{type:Boolean,default:!1},fixedWidth:{type:Boolean,default:!1},flip:{type:[Boolean,String],default:!1,validator:function(e){return[!0,!1,"horizontal","vertical","both"].indexOf(e)>-1}},icon:{type:[Object,Array,String],required:!0},mask:{type:[Object,Array,String],default:null},listItem:{type:Boolean,default:!1},pull:{type:String,default:null,validator:function(e){return["right","left"].indexOf(e)>-1}},pulse:{type:Boolean,default:!1},rotation:{type:[String,Number],default:null,validator:function(e){return[90,180,270].indexOf(Number.parseInt(e,10))>-1}},swapOpacity:{type:Boolean,default:!1},size:{type:String,default:null,validator:function(e){return["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"].indexOf(e)>-1}},spin:{type:Boolean,default:!1},transform:{type:[String,Object],default:null},symbol:{type:[Boolean,String],default:!1},title:{type:String,default:null},inverse:{type:Boolean,default:!1},bounce:{type:Boolean,default:!1},shake:{type:Boolean,default:!1},beat:{type:Boolean,default:!1},fade:{type:Boolean,default:!1},beatFade:{type:Boolean,default:!1},flash:{type:Boolean,default:!1},spinPulse:{type:Boolean,default:!1},spinReverse:{type:Boolean,default:!1}},setup:function(e,n){var r=n.attrs,i=Fn(function(){return hz(e.icon)}),o=Fn(function(){return $5("classes",p_e(e))}),a=Fn(function(){return $5("transform",typeof e.transform=="string"?DE.transform(e.transform):e.transform)}),s=Fn(function(){return $5("mask",hz(e.mask))}),l=Fn(function(){return Ube(i.value,af(af(af(af({},o.value),a.value),s.value),{},{symbol:e.symbol,title:e.title}))});ki(l,function(u){if(!u)return h_e("Could not find one or more icon(s)",i.value,s.value)},{immediate:!0});var c=Fn(function(){return l.value?uJ(l.value.abstract[0],{},r):null});return function(){return c.value}}});class rr{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,r){let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(n,this.length,i,1),Jc.from(i,this.length-(n-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){let r=[];return this.decompose(e,n,r,0),Jc.from(r,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new Kb(this),o=new Kb(e);for(let a=n,s=n;;){if(i.next(a),o.next(a),a=0,i.lineBreak!=o.lineBreak||i.done!=o.done||i.value!=o.value)return!1;if(s+=i.value.length,i.done||s>=r)return!0}}iter(e=1){return new Kb(this,e)}iterRange(e,n=this.length){return new dJ(this,e,n)}iterLines(e,n){let r;if(e==null)r=this.iter();else{n==null&&(n=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new hJ(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?rr.empty:e.length<=32?new Fi(e):Jc.from(Fi.split(e,[]))}}class Fi extends rr{constructor(e,n=m_e(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,r,i){for(let o=0;;o++){let a=this.text[o],s=i+a.length;if((n?r:s)>=e)return new v_e(i,s,r,a);i=s+1,r++}}decompose(e,n,r,i){let o=e<=0&&n>=this.length?this:new Fi(pz(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(i&1){let a=r.pop(),s=Jk(o.text,a.text.slice(),0,o.length);if(s.length<=32)r.push(new Fi(s,a.length+o.length));else{let l=s.length>>1;r.push(new Fi(s.slice(0,l)),new Fi(s.slice(l)))}}else r.push(o)}replace(e,n,r){if(!(r instanceof Fi))return super.replace(e,n,r);let i=Jk(this.text,Jk(r.text,pz(this.text,0,e)),n),o=this.length+r.length-(n-e);return i.length<=32?new Fi(i,o):Jc.from(Fi.split(i,[]),o)}sliceString(e,n=this.length,r=`
`){let i="";for(let o=0,a=0;o<=n&&a<this.text.length;a++){let s=this.text[a],l=o+s.length;o>e&&a&&(i+=r),e<l&&n>o&&(i+=s.slice(Math.max(0,e-o),n-o)),o=l+1}return i}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let r=[],i=-1;for(let o of e)r.push(o),i+=o.length+1,r.length==32&&(n.push(new Fi(r,i)),r=[],i=-1);return i>-1&&n.push(new Fi(r,i)),n}}class Jc extends rr{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,n,r,i){for(let o=0;;o++){let a=this.children[o],s=i+a.length,l=r+a.lines-1;if((n?l:s)>=e)return a.lineInner(e,n,r,i);i=s+1,r=l+1}}decompose(e,n,r,i){for(let o=0,a=0;a<=n&&o<this.children.length;o++){let s=this.children[o],l=a+s.length;if(e<=l&&n>=a){let c=i&((a<=e?1:0)|(l>=n?2:0));a>=e&&l<=n&&!c?r.push(s):s.decompose(e-a,n-a,r,c)}a=l+1}}replace(e,n,r){if(r.lines<this.lines)for(let i=0,o=0;i<this.children.length;i++){let a=this.children[i],s=o+a.length;if(e>=o&&n<=s){let l=a.replace(e-o,n-o,r),c=this.lines-a.lines+l.lines;if(l.lines<c>>5-1&&l.lines>c>>5+1){let u=this.children.slice();return u[i]=l,new Jc(u,this.length-(n-e)+r.length)}return super.replace(o,s,l)}o=s+1}return super.replace(e,n,r)}sliceString(e,n=this.length,r=`
`){let i="";for(let o=0,a=0;o<this.children.length&&a<=n;o++){let s=this.children[o],l=a+s.length;a>e&&o&&(i+=r),e<l&&n>a&&(i+=s.sliceString(e-a,n-a,r)),a=l+1}return i}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof Jc))return 0;let r=0,[i,o,a,s]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=n,o+=n){if(i==a||o==s)return r;let l=this.children[i],c=e.children[o];if(l!=c)return r+l.scanIdentical(c,n);r+=l.length+1}}static from(e,n=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let h of e)r+=h.lines;if(r<32){let h=[];for(let g of e)g.flatten(h);return new Fi(h,n)}let i=Math.max(32,r>>5),o=i<<1,a=i>>1,s=[],l=0,c=-1,u=[];function f(h){let g;if(h.lines>o&&h instanceof Jc)for(let y of h.children)f(y);else h.lines>a&&(l>a||!l)?(d(),s.push(h)):h instanceof Fi&&l&&(g=u[u.length-1])instanceof Fi&&h.lines+g.lines<=32?(l+=h.lines,c+=h.length+1,u[u.length-1]=new Fi(g.text.concat(h.text),g.length+1+h.length)):(l+h.lines>i&&d(),l+=h.lines,c+=h.length+1,u.push(h))}function d(){l!=0&&(s.push(u.length==1?u[0]:Jc.from(u,c)),c=-1,l=u.length=0)}for(let h of e)f(h);return d(),s.length==1?s[0]:new Jc(s,n)}}rr.empty=new Fi([""],0);function m_e(t){let e=-1;for(let n of t)e+=n.length+1;return e}function Jk(t,e,n=0,r=1e9){for(let i=0,o=0,a=!0;o<t.length&&i<=r;o++){let s=t[o],l=i+s.length;l>=n&&(l>r&&(s=s.slice(0,r-i)),i<n&&(s=s.slice(n-i)),a?(e[e.length-1]+=s,a=!1):e.push(s)),i=l+1}return e}function pz(t,e,n){return Jk(t,[""],e,n)}class Kb{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof Fi?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],o=this.offsets[r],a=o>>1,s=i instanceof Fi?i.text.length:i.children.length;if(a==(n>0?s:0)){if(r==0)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(n>0?0:1)){if(this.offsets[r]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof Fi){let l=i.text[a+(n<0?-1:0)];if(this.offsets[r]+=n,l.length>Math.max(0,e))return this.value=e==0?l:n>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=i.children[a+(n<0?-1:0)];e>l.length?(e-=l.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(l),this.offsets.push(n>0?1:(l instanceof Fi?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class dJ{constructor(e,n,r){this.value="",this.done=!1,this.cursor=new Kb(e,n>r?-1:1),this.pos=n>r?e.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*n,this.value=i.length<=r?i:n<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class hJ{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:r,value:i}=this.inner.next(e);return n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(rr.prototype[Symbol.iterator]=function(){return this.iter()},Kb.prototype[Symbol.iterator]=dJ.prototype[Symbol.iterator]=hJ.prototype[Symbol.iterator]=function(){return this});let v_e=class{constructor(e,n,r,i){this.from=e,this.to=n,this.number=r,this.text=i}get length(){return this.to-this.from}},Av="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(t=>t?parseInt(t,36):1);for(let t=1;t<Av.length;t++)Av[t]+=Av[t-1];function y_e(t){for(let e=1;e<Av.length;e+=2)if(Av[e]>t)return Av[e-1]<=t;return!1}function gz(t){return t>=127462&&t<=127487}const mz=8205;function Yo(t,e,n=!0,r=!0){return(n?pJ:b_e)(t,e,r)}function pJ(t,e,n){if(e==t.length)return e;e&&gJ(t.charCodeAt(e))&&mJ(t.charCodeAt(e-1))&&e--;let r=ko(t,e);for(e+=_l(r);e<t.length;){let i=ko(t,e);if(r==mz||i==mz||n&&y_e(i))e+=_l(i),r=i;else if(gz(i)){let o=0,a=e-2;for(;a>=0&&gz(ko(t,a));)o++,a-=2;if(o%2==0)break;e+=2}else break}return e}function b_e(t,e,n){for(;e>0;){let r=pJ(t,e-2,n);if(r<e)return r;e--}return 0}function gJ(t){return t>=56320&&t<57344}function mJ(t){return t>=55296&&t<56320}function ko(t,e){let n=t.charCodeAt(e);if(!mJ(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return gJ(r)?(n-55296<<10)+(r-56320)+65536:n}function hI(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function _l(t){return t<65536?1:2}const n8=/\r\n?|\n/;var To=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(To||(To={}));class uu{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];e+=r<0?this.sections[n]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,r=0,i=0;n<this.sections.length;){let o=this.sections[n++],a=this.sections[n++];a<0?(e(r,i,o),i+=o):i+=a,r+=o}}iterChangedRanges(e,n=!1){r8(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];i<0?e.push(r,i):e.push(i,r)}return new uu(e)}composeDesc(e){return this.empty?e:e.empty?this:vJ(this,e)}mapDesc(e,n=!1){return e.empty?this:i8(this,e,n)}mapPos(e,n=-1,r=To.Simple){let i=0,o=0;for(let a=0;a<this.sections.length;){let s=this.sections[a++],l=this.sections[a++],c=i+s;if(l<0){if(c>e)return o+(e-i);o+=s}else{if(r!=To.Simple&&c>=e&&(r==To.TrackDel&&i<e&&c>e||r==To.TrackBefore&&i<e||r==To.TrackAfter&&c>e))return null;if(c>e||c==e&&n<0&&!s)return e==i||n<0?o:o+l;o+=l}i=c}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return o}touchesRange(e,n=e){for(let r=0,i=0;r<this.sections.length&&i<=n;){let o=this.sections[r++],a=this.sections[r++],s=i+o;if(a>=0&&i<=n&&s>=e)return i<e&&s>n?"cover":!0;i=s}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new uu(e)}static create(e){return new uu(e)}}class Xi extends uu{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return r8(this,(n,r,i,o,a)=>e=e.replace(i,i+(r-n),a),!1),e}mapDesc(e,n=!1){return i8(this,e,n,!0)}invert(e){let n=this.sections.slice(),r=[];for(let i=0,o=0;i<n.length;i+=2){let a=n[i],s=n[i+1];if(s>=0){n[i]=s,n[i+1]=a;let l=i>>1;for(;r.length<l;)r.push(rr.empty);r.push(a?e.slice(o,o+a):rr.empty)}o+=a}return new Xi(n,r)}compose(e){return this.empty?e:e.empty?this:vJ(this,e,!0)}map(e,n=!1){return e.empty?this:i8(this,e,n,!0)}iterChanges(e,n=!1){r8(this,e,n)}get desc(){return uu.create(this.sections)}filter(e){let n=[],r=[],i=[],o=new N1(this);e:for(let a=0,s=0;;){let l=a==e.length?1e9:e[a++];for(;s<l||s==l&&o.len==0;){if(o.done)break e;let u=Math.min(o.len,l-s);Wo(i,u,-1);let f=o.ins==-1?-1:o.off==0?o.ins:0;Wo(n,u,f),f>0&&_d(r,n,o.text),o.forward(u),s+=u}let c=e[a++];for(;s<c;){if(o.done)break e;let u=Math.min(o.len,c-s);Wo(n,u,-1),Wo(i,u,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(u),s+=u}}return{changes:new Xi(n,r),filtered:uu.create(i)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],i=this.sections[n+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,r){let i=[],o=[],a=0,s=null;function l(u=!1){if(!u&&!i.length)return;a<n&&Wo(i,n-a,-1);let f=new Xi(i,o);s=s?s.compose(f.map(s)):f,i=[],o=[],a=0}function c(u){if(Array.isArray(u))for(let f of u)c(f);else if(u instanceof Xi){if(u.length!=n)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${n})`);l(),s=s?s.compose(u.map(s)):u}else{let{from:f,to:d=f,insert:h}=u;if(f>d||f<0||d>n)throw new RangeError(`Invalid change range ${f} to ${d} (in doc of length ${n})`);let g=h?typeof h=="string"?rr.of(h.split(r||n8)):h:rr.empty,y=g.length;if(f==d&&y==0)return;f<a&&l(),f>a&&Wo(i,f-a,-1),Wo(i,d-f,y),_d(o,i,g),a=d}}return c(e),l(!s),s}static empty(e){return new Xi(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let i=0;i<e.length;i++){let o=e[i];if(typeof o=="number")n.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((a,s)=>s&&typeof a!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)n.push(o[0],0);else{for(;r.length<i;)r.push(rr.empty);r[i]=rr.of(o.slice(1)),n.push(o[0],r[i].length)}}}return new Xi(n,r)}static createSet(e,n){return new Xi(e,n)}}function Wo(t,e,n,r=!1){if(e==0&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:e==0&&t[i]==0?t[i+1]+=n:r?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function _d(t,e,n){if(n.length==0)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<r;)t.push(rr.empty);t.push(n)}}function r8(t,e,n){let r=t.inserted;for(let i=0,o=0,a=0;a<t.sections.length;){let s=t.sections[a++],l=t.sections[a++];if(l<0)i+=s,o+=s;else{let c=i,u=o,f=rr.empty;for(;c+=s,u+=l,l&&r&&(f=f.append(r[a-2>>1])),!(n||a==t.sections.length||t.sections[a+1]<0);)s=t.sections[a++],l=t.sections[a++];e(i,c,o,u,f),i=c,o=u}}}function i8(t,e,n,r=!1){let i=[],o=r?[]:null,a=new N1(t),s=new N1(e);for(let l=-1;;)if(a.ins==-1&&s.ins==-1){let c=Math.min(a.len,s.len);Wo(i,c,-1),a.forward(c),s.forward(c)}else if(s.ins>=0&&(a.ins<0||l==a.i||a.off==0&&(s.len<a.len||s.len==a.len&&!n))){let c=s.len;for(Wo(i,s.ins,-1);c;){let u=Math.min(a.len,c);a.ins>=0&&l<a.i&&a.len<=u&&(Wo(i,0,a.ins),o&&_d(o,i,a.text),l=a.i),a.forward(u),c-=u}s.next()}else if(a.ins>=0){let c=0,u=a.len;for(;u;)if(s.ins==-1){let f=Math.min(u,s.len);c+=f,u-=f,s.forward(f)}else if(s.ins==0&&s.len<u)u-=s.len,s.next();else break;Wo(i,c,l<a.i?a.ins:0),o&&l<a.i&&_d(o,i,a.text),l=a.i,a.forward(a.len-u)}else{if(a.done&&s.done)return o?Xi.createSet(i,o):uu.create(i);throw new Error("Mismatched change set lengths")}}function vJ(t,e,n=!1){let r=[],i=n?[]:null,o=new N1(t),a=new N1(e);for(let s=!1;;){if(o.done&&a.done)return i?Xi.createSet(r,i):uu.create(r);if(o.ins==0)Wo(r,o.len,0,s),o.next();else if(a.len==0&&!a.done)Wo(r,0,a.ins,s),i&&_d(i,r,a.text),a.next();else{if(o.done||a.done)throw new Error("Mismatched change set lengths");{let l=Math.min(o.len2,a.len),c=r.length;if(o.ins==-1){let u=a.ins==-1?-1:a.off?0:a.ins;Wo(r,l,u,s),i&&u&&_d(i,r,a.text)}else a.ins==-1?(Wo(r,o.off?0:o.len,l,s),i&&_d(i,r,o.textBit(l))):(Wo(r,o.off?0:o.len,a.off?0:a.ins,s),i&&!a.off&&_d(i,r,a.text));s=(o.ins>l||a.ins>=0&&a.len>l)&&(s||r.length>c),o.forward2(l),a.forward(l)}}}}class N1{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?rr.empty:e[n]}textBit(e){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!e?rr.empty:n[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Hp{constructor(e,n,r){this.from=e,this.to=n,this.flags=r}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,n=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,n):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new Hp(r,i,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return Ze.range(e,n);let r=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return Ze.range(this.anchor,r)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return Ze.range(e.anchor,e.head)}static create(e,n,r){return new Hp(e,n,r)}}class Ze{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:Ze.create(this.ranges.map(r=>r.map(e,n)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new Ze([this.main],0)}addRange(e,n=!0){return Ze.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let r=this.ranges.slice();return r[n]=e,Ze.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Ze(e.ranges.map(n=>Hp.fromJSON(n)),e.main)}static single(e,n=e){return new Ze([Ze.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let o=e[i];if(o.empty?o.from<=r:o.from<r)return Ze.normalized(e.slice(),n);r=o.to}return new Ze(e,n)}static cursor(e,n=0,r,i){return Hp.create(e,e,(n==0?0:n<0?4:8)|(r==null?3:Math.min(2,r))|(i??33554431)<<5)}static range(e,n,r,i){let o=(r??33554431)<<5|(i==null?3:Math.min(2,i));return n<e?Hp.create(n,e,24|o):Hp.create(e,n,(n>e?4:0)|o)}static normalized(e,n=0){let r=e[n];e.sort((i,o)=>i.from-o.from),n=e.indexOf(r);for(let i=1;i<e.length;i++){let o=e[i],a=e[i-1];if(o.empty?o.from<=a.to:o.from<a.to){let s=a.from,l=Math.max(o.to,a.to);i<=n&&n--,e.splice(--i,2,o.anchor>o.head?Ze.range(l,s):Ze.range(s,l))}}return new Ze(e,n)}}function yJ(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let pI=0;class _t{constructor(e,n,r,i,o){this.combine=e,this.compareInput=n,this.compare=r,this.isStatic=i,this.id=pI++,this.default=e([]),this.extensions=typeof o=="function"?o(this):o}static define(e={}){return new _t(e.combine||(n=>n),e.compareInput||((n,r)=>n===r),e.compare||(e.combine?(n,r)=>n===r:gI),!!e.static,e.enables)}of(e){return new Zk([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Zk(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Zk(e,this,2,n)}from(e,n){return n||(n=r=>r),this.compute([e],r=>n(r.field(e)))}}function gI(t,e){return t==e||t.length==e.length&&t.every((n,r)=>n===e[r])}class Zk{constructor(e,n,r,i){this.dependencies=e,this.facet=n,this.type=r,this.value=i,this.id=pI++}dynamicSlot(e){var n;let r=this.value,i=this.facet.compareInput,o=this.id,a=e[o]>>1,s=this.type==2,l=!1,c=!1,u=[];for(let f of this.dependencies)f=="doc"?l=!0:f=="selection"?c=!0:((n=e[f.id])!==null&&n!==void 0?n:1)&1||u.push(e[f.id]);return{create(f){return f.values[a]=r(f),1},update(f,d){if(l&&d.docChanged||c&&(d.docChanged||d.selection)||o8(f,u)){let h=r(f);if(s?!vz(h,f.values[a],i):!i(h,f.values[a]))return f.values[a]=h,1}return 0},reconfigure:(f,d)=>{let h,g=d.config.address[o];if(g!=null){let y=n4(d,g);if(this.dependencies.every(S=>S instanceof _t?d.facet(S)===f.facet(S):S instanceof Hi?d.field(S,!1)==f.field(S,!1):!0)||(s?vz(h=r(f),y,i):i(h=r(f),y)))return f.values[a]=y,0}else h=r(f);return f.values[a]=h,1}}}}function vz(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function o8(t,e){let n=!1;for(let r of e)Xb(t,r)&1&&(n=!0);return n}function S_e(t,e,n){let r=n.map(l=>t[l.id]),i=n.map(l=>l.type),o=r.filter(l=>!(l&1)),a=t[e.id]>>1;function s(l){let c=[];for(let u=0;u<r.length;u++){let f=n4(l,r[u]);if(i[u]==2)for(let d of f)c.push(d);else c.push(f)}return e.combine(c)}return{create(l){for(let c of r)Xb(l,c);return l.values[a]=s(l),1},update(l,c){if(!o8(l,o))return 0;let u=s(l);return e.compare(u,l.values[a])?0:(l.values[a]=u,1)},reconfigure(l,c){let u=o8(l,r),f=c.config.facets[e.id],d=c.facet(e);if(f&&!u&&gI(n,f))return l.values[a]=d,0;let h=s(l);return e.compare(h,d)?(l.values[a]=d,0):(l.values[a]=h,1)}}}const yz=_t.define({static:!0});class Hi{constructor(e,n,r,i,o){this.id=e,this.createF=n,this.updateF=r,this.compareF=i,this.spec=o,this.provides=void 0}static define(e){let n=new Hi(pI++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(yz).find(r=>r.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:r=>(r.values[n]=this.create(r),1),update:(r,i)=>{let o=r.values[n],a=this.updateF(o,i);return this.compareF(o,a)?0:(r.values[n]=a,1)},reconfigure:(r,i)=>i.config.address[this.id]!=null?(r.values[n]=i.field(this),0):(r.values[n]=this.create(r),1)}}init(e){return[this,yz.of({field:this,create:e})]}get extension(){return this}}const Ep={lowest:4,low:3,default:2,high:1,highest:0};function Fy(t){return e=>new bJ(e,t)}const jg={highest:Fy(Ep.highest),high:Fy(Ep.high),default:Fy(Ep.default),low:Fy(Ep.low),lowest:Fy(Ep.lowest)};class bJ{constructor(e,n){this.inner=e,this.prec=n}}class J2{of(e){return new a8(this,e)}reconfigure(e){return J2.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class a8{constructor(e,n){this.compartment=e,this.inner=n}}class t4{constructor(e,n,r,i,o,a){for(this.base=e,this.compartments=n,this.dynamicSlots=r,this.address=i,this.staticValues=o,this.facets=a,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,r){let i=[],o=Object.create(null),a=new Map;for(let d of __e(e,n,a))d instanceof Hi?i.push(d):(o[d.facet.id]||(o[d.facet.id]=[])).push(d);let s=Object.create(null),l=[],c=[];for(let d of i)s[d.id]=c.length<<1,c.push(h=>d.slot(h));let u=r==null?void 0:r.config.facets;for(let d in o){let h=o[d],g=h[0].facet,y=u&&u[d]||[];if(h.every(S=>S.type==0))if(s[g.id]=l.length<<1|1,gI(y,h))l.push(r.facet(g));else{let S=g.combine(h.map(v=>v.value));l.push(r&&g.compare(S,r.facet(g))?r.facet(g):S)}else{for(let S of h)S.type==0?(s[S.id]=l.length<<1|1,l.push(S.value)):(s[S.id]=c.length<<1,c.push(v=>S.dynamicSlot(v)));s[g.id]=c.length<<1,c.push(S=>S_e(S,g,h))}}let f=c.map(d=>d(s));return new t4(e,a,f,s,l,o)}}function __e(t,e,n){let r=[[],[],[],[],[]],i=new Map;function o(a,s){let l=i.get(a);if(l!=null){if(l<=s)return;let c=r[l].indexOf(a);c>-1&&r[l].splice(c,1),a instanceof a8&&n.delete(a.compartment)}if(i.set(a,s),Array.isArray(a))for(let c of a)o(c,s);else if(a instanceof a8){if(n.has(a.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(a.compartment)||a.inner;n.set(a.compartment,c),o(c,s)}else if(a instanceof bJ)o(a.inner,a.prec);else if(a instanceof Hi)r[s].push(a),a.provides&&o(a.provides,s);else if(a instanceof Zk)r[s].push(a),a.facet.extensions&&o(a.facet.extensions,Ep.default);else{let c=a.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${a}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(c,s)}}return o(t,Ep.default),r.reduce((a,s)=>a.concat(s))}function Xb(t,e){if(e&1)return 2;let n=e>>1,r=t.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;t.status[n]=4;let i=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|i}function n4(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const SJ=_t.define(),_J=_t.define({combine:t=>t.some(e=>e),static:!0}),wJ=_t.define({combine:t=>t.length?t[0]:void 0,static:!0}),kJ=_t.define(),xJ=_t.define(),CJ=_t.define(),TJ=_t.define({combine:t=>t.length?t[0]:!1});class If{constructor(e,n){this.type=e,this.value=n}static define(){return new w_e}}class w_e{of(e){return new If(this,e)}}class k_e{constructor(e){this.map=e}of(e){return new cn(this,e)}}class cn{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new cn(this.type,n)}is(e){return this.type==e}static define(e={}){return new k_e(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let r=[];for(let i of e){let o=i.map(n);o&&r.push(o)}return r}}cn.reconfigure=cn.define();cn.appendConfig=cn.define();class Ji{constructor(e,n,r,i,o,a){this.startState=e,this.changes=n,this.selection=r,this.effects=i,this.annotations=o,this.scrollIntoView=a,this._doc=null,this._state=null,r&&yJ(r,n.newLength),o.some(s=>s.type==Ji.time)||(this.annotations=o.concat(Ji.time.of(Date.now())))}static create(e,n,r,i,o,a){return new Ji(e,n,r,i,o,a)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(Ji.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}Ji.time=If.define();Ji.userEvent=If.define();Ji.addToHistory=If.define();Ji.remote=If.define();function x_e(t,e){let n=[];for(let r=0,i=0;;){let o,a;if(r<t.length&&(i==e.length||e[i]>=t[r]))o=t[r++],a=t[r++];else if(i<e.length)o=e[i++],a=e[i++];else return n;!n.length||n[n.length-1]<o?n.push(o,a):n[n.length-1]<a&&(n[n.length-1]=a)}}function AJ(t,e,n){var r;let i,o,a;return n?(i=e.changes,o=Xi.empty(e.changes.length),a=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),o=t.changes.mapDesc(e.changes,!0),a=t.changes.compose(i)),{changes:a,selection:e.selection?e.selection.map(o):(r=t.selection)===null||r===void 0?void 0:r.map(i),effects:cn.mapEffects(t.effects,i).concat(cn.mapEffects(e.effects,o)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function s8(t,e,n){let r=e.selection,i=Pv(e.annotations);return e.userEvent&&(i=i.concat(Ji.userEvent.of(e.userEvent))),{changes:e.changes instanceof Xi?e.changes:Xi.of(e.changes||[],n,t.facet(wJ)),selection:r&&(r instanceof Ze?r:Ze.single(r.anchor,r.head)),effects:Pv(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function PJ(t,e,n){let r=s8(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let o=1;o<e.length;o++){e[o].filter===!1&&(n=!1);let a=!!e[o].sequential;r=AJ(r,s8(t,e[o],a?r.changes.newLength:t.doc.length),a)}let i=Ji.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return T_e(n?C_e(i):i)}function C_e(t){let e=t.startState,n=!0;for(let i of e.facet(kJ)){let o=i(t);if(o===!1){n=!1;break}Array.isArray(o)&&(n=n===!0?o:x_e(n,o))}if(n!==!0){let i,o;if(n===!1)o=t.changes.invertedDesc,i=Xi.empty(e.doc.length);else{let a=t.changes.filter(n);i=a.changes,o=a.filtered.mapDesc(a.changes).invertedDesc}t=Ji.create(e,i,t.selection&&t.selection.map(o),cn.mapEffects(t.effects,o),t.annotations,t.scrollIntoView)}let r=e.facet(xJ);for(let i=r.length-1;i>=0;i--){let o=r[i](t);o instanceof Ji?t=o:Array.isArray(o)&&o.length==1&&o[0]instanceof Ji?t=o[0]:t=PJ(e,Pv(o),!1)}return t}function T_e(t){let e=t.startState,n=e.facet(CJ),r=t;for(let i=n.length-1;i>=0;i--){let o=n[i](t);o&&Object.keys(o).length&&(r=AJ(r,s8(e,o,t.changes.newLength),!0))}return r==t?t:Ji.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}const A_e=[];function Pv(t){return t==null?A_e:Array.isArray(t)?t:[t]}var oi=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(oi||(oi={}));const P_e=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let l8;try{l8=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function E_e(t){if(l8)return l8.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||P_e.test(n)))return!0}return!1}function O_e(t){return e=>{if(!/\S/.test(e))return oi.Space;if(E_e(e))return oi.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return oi.Word;return oi.Other}}class An{constructor(e,n,r,i,o,a){this.config=e,this.doc=n,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=o,a&&(a._state=this);for(let s=0;s<this.config.dynamicSlots.length;s++)Xb(this,s<<1);this.computeSlot=null}field(e,n=!0){let r=this.config.address[e.id];if(r==null){if(n)throw new RangeError("Field is not present in this state");return}return Xb(this,r),n4(this,r)}update(...e){return PJ(this,e,!0)}applyTransaction(e){let n=this.config,{base:r,compartments:i}=n;for(let a of e.effects)a.is(J2.reconfigure)?(n&&(i=new Map,n.compartments.forEach((s,l)=>i.set(l,s)),n=null),i.set(a.value.compartment,a.value.extension)):a.is(cn.reconfigure)?(n=null,r=a.value):a.is(cn.appendConfig)&&(n=null,r=Pv(r).concat(a.value));let o;n?o=e.startState.values.slice():(n=t4.resolve(r,i,this),o=new An(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(s,l)=>l.reconfigure(s,this),null).values),new An(n,e.newDoc,e.newSelection,o,(a,s)=>s.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:Ze.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,r=e(n.ranges[0]),i=this.changes(r.changes),o=[r.range],a=Pv(r.effects);for(let s=1;s<n.ranges.length;s++){let l=e(n.ranges[s]),c=this.changes(l.changes),u=c.map(i);for(let d=0;d<s;d++)o[d]=o[d].map(u);let f=i.mapDesc(c,!0);o.push(l.range.map(f)),i=i.compose(u),a=cn.mapEffects(a,u).concat(cn.mapEffects(Pv(l.effects),f))}return{changes:i,selection:Ze.create(o,n.mainIndex),effects:a}}changes(e=[]){return e instanceof Xi?e:Xi.of(e,this.doc.length,this.facet(An.lineSeparator))}toText(e){return rr.of(e.split(this.facet(An.lineSeparator)||n8))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(Xb(this,n),n4(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof Hi&&this.config.address[i.id]!=null&&(n[r]=i.spec.toJSON(this.field(e[r]),this))}return n}static fromJSON(e,n={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let o in r)if(Object.prototype.hasOwnProperty.call(e,o)){let a=r[o],s=e[o];i.push(a.init(l=>a.spec.fromJSON(s,l)))}}return An.create({doc:e.doc,selection:Ze.fromJSON(e.selection),extensions:n.extensions?i.concat([n.extensions]):i})}static create(e={}){let n=t4.resolve(e.extensions||[],new Map),r=e.doc instanceof rr?e.doc:rr.of((e.doc||"").split(n.staticFacet(An.lineSeparator)||n8)),i=e.selection?e.selection instanceof Ze?e.selection:Ze.single(e.selection.anchor,e.selection.head):Ze.single(0);return yJ(i,r.length),n.staticFacet(_J)||(i=i.asSingle()),new An(n,r,i,n.dynamicSlots.map(()=>null),(o,a)=>a.create(o),null)}get tabSize(){return this.facet(An.tabSize)}get lineBreak(){return this.facet(An.lineSeparator)||`
`}get readOnly(){return this.facet(TJ)}phrase(e,...n){for(let r of this.facet(An.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let o=+(i||1);return!o||o>n.length?r:n[o-1]})),e}languageDataAt(e,n,r=-1){let i=[];for(let o of this.facet(SJ))for(let a of o(this,n,r))Object.prototype.hasOwnProperty.call(a,e)&&i.push(a[e]);return i}charCategorizer(e){return O_e(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:r,length:i}=this.doc.lineAt(e),o=this.charCategorizer(e),a=e-r,s=e-r;for(;a>0;){let l=Yo(n,a,!1);if(o(n.slice(l,a))!=oi.Word)break;a=l}for(;s<i;){let l=Yo(n,s);if(o(n.slice(s,l))!=oi.Word)break;s=l}return a==s?null:Ze.range(a+r,s+r)}}An.allowMultipleSelections=_J;An.tabSize=_t.define({combine:t=>t.length?t[0]:4});An.lineSeparator=wJ;An.readOnly=TJ;An.phrases=_t.define({compare(t,e){let n=Object.keys(t),r=Object.keys(e);return n.length==r.length&&n.every(i=>t[i]==e[i])}});An.languageData=SJ;An.changeFilter=kJ;An.transactionFilter=xJ;An.transactionExtender=CJ;J2.reconfigure=cn.define();function Sc(t,e,n={}){let r={};for(let i of t)for(let o of Object.keys(i)){let a=i[o],s=r[o];if(s===void 0)r[o]=a;else if(!(s===a||a===void 0))if(Object.hasOwnProperty.call(n,o))r[o]=n[o](s,a);else throw new Error("Config merge conflict for field "+o)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class _g{eq(e){return this==e}range(e,n=e){return c8.create(e,n,this)}}_g.prototype.startSide=_g.prototype.endSide=0;_g.prototype.point=!1;_g.prototype.mapMode=To.TrackDel;let c8=class EJ{constructor(e,n,r){this.from=e,this.to=n,this.value=r}static create(e,n,r){return new EJ(e,n,r)}};function u8(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class mI{constructor(e,n,r,i){this.from=e,this.to=n,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,n,r,i=0){let o=r?this.to:this.from;for(let a=i,s=o.length;;){if(a==s)return a;let l=a+s>>1,c=o[l]-e||(r?this.value[l].endSide:this.value[l].startSide)-n;if(l==a)return c>=0?a:s;c>=0?s=l:a=l+1}}between(e,n,r,i){for(let o=this.findIndex(n,-1e9,!0),a=this.findIndex(r,1e9,!1,o);o<a;o++)if(i(this.from[o]+e,this.to[o]+e,this.value[o])===!1)return!1}map(e,n){let r=[],i=[],o=[],a=-1,s=-1;for(let l=0;l<this.value.length;l++){let c=this.value[l],u=this.from[l]+e,f=this.to[l]+e,d,h;if(u==f){let g=n.mapPos(u,c.startSide,c.mapMode);if(g==null||(d=h=g,c.startSide!=c.endSide&&(h=n.mapPos(u,c.endSide),h<d)))continue}else if(d=n.mapPos(u,c.startSide),h=n.mapPos(f,c.endSide),d>h||d==h&&c.startSide>0&&c.endSide<=0)continue;(h-d||c.endSide-c.startSide)<0||(a<0&&(a=d),c.point&&(s=Math.max(s,h-d)),r.push(c),i.push(d-a),o.push(h-a))}return{mapped:r.length?new mI(i,o,r,s):null,pos:a}}}class ar{constructor(e,n,r,i){this.chunkPos=e,this.chunk=n,this.nextLayer=r,this.maxPoint=i}static create(e,n,r,i){return new ar(e,n,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:r=!1,filterFrom:i=0,filterTo:o=this.length}=e,a=e.filter;if(n.length==0&&!a)return this;if(r&&(n=n.slice().sort(u8)),this.isEmpty)return n.length?ar.of(n):this;let s=new OJ(this,null,-1).goto(0),l=0,c=[],u=new Qd;for(;s.value||l<n.length;)if(l<n.length&&(s.from-n[l].from||s.startSide-n[l].value.startSide)>=0){let f=n[l++];u.addInner(f.from,f.to,f.value)||c.push(f)}else s.rangeIndex==1&&s.chunkIndex<this.chunk.length&&(l==n.length||this.chunkEnd(s.chunkIndex)<n[l].from)&&(!a||i>this.chunkEnd(s.chunkIndex)||o<this.chunkPos[s.chunkIndex])&&u.addChunk(this.chunkPos[s.chunkIndex],this.chunk[s.chunkIndex])?s.nextChunk():((!a||i>s.to||o<s.from||a(s.from,s.to,s.value))&&(u.addInner(s.from,s.to,s.value)||c.push(c8.create(s.from,s.to,s.value))),s.next());return u.finishInner(this.nextLayer.isEmpty&&!c.length?ar.empty:this.nextLayer.update({add:c,filter:a,filterFrom:i,filterTo:o}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],r=[],i=-1;for(let a=0;a<this.chunk.length;a++){let s=this.chunkPos[a],l=this.chunk[a],c=e.touchesRange(s,s+l.length);if(c===!1)i=Math.max(i,l.maxPoint),n.push(l),r.push(e.mapPos(s));else if(c===!0){let{mapped:u,pos:f}=l.map(s,e);u&&(i=Math.max(i,u.maxPoint),n.push(u),r.push(f))}}let o=this.nextLayer.map(e);return n.length==0?o:new ar(r,n,o||ar.empty,i)}between(e,n,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let o=this.chunkPos[i],a=this.chunk[i];if(n>=o&&e<=o+a.length&&a.between(o,e-o,n-o,r)===!1)return}this.nextLayer.between(e,n,r)}}iter(e=0){return M1.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return M1.from(e).goto(n)}static compare(e,n,r,i,o=-1){let a=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=o),s=n.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=o),l=bz(a,s,r),c=new Ly(a,l,o),u=new Ly(s,l,o);r.iterGaps((f,d,h)=>Sz(c,f,u,d,h,i)),r.empty&&r.length==0&&Sz(c,0,u,0,0,i)}static eq(e,n,r=0,i){i==null&&(i=1e9-1);let o=e.filter(u=>!u.isEmpty&&n.indexOf(u)<0),a=n.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(o.length!=a.length)return!1;if(!o.length)return!0;let s=bz(o,a),l=new Ly(o,s,0).goto(r),c=new Ly(a,s,0).goto(r);for(;;){if(l.to!=c.to||!f8(l.active,c.active)||l.point&&(!c.point||!l.point.eq(c.point)))return!1;if(l.to>i)return!0;l.next(),c.next()}}static spans(e,n,r,i,o=-1){let a=new Ly(e,null,o).goto(n),s=n,l=a.openStart;for(;;){let c=Math.min(a.to,r);if(a.point){let u=a.activeForPoint(a.to),f=a.pointFrom<n?u.length+1:Math.min(u.length,l);i.point(s,c,a.point,u,f,a.pointRank),l=Math.min(a.openEnd(c),u.length)}else c>s&&(i.span(s,c,a.active,l),l=a.openEnd(c));if(a.to>r)return l+(a.point&&a.to>r?1:0);s=a.to,a.next()}}static of(e,n=!1){let r=new Qd;for(let i of e instanceof c8?[e]:n?I_e(e):e)r.add(i.from,i.to,i.value);return r.finish()}}ar.empty=new ar([],[],null,-1);function I_e(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let r=t[n];if(u8(e,r)>0)return t.slice().sort(u8);e=r}return t}ar.empty.nextLayer=ar.empty;class Qd{finishChunk(e){this.chunks.push(new mI(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,r){this.addInner(e,n,r)||(this.nextLayer||(this.nextLayer=new Qd)).add(e,n,r)}addInner(e,n,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+e,this.lastTo=n.to[r]+e,!0}finish(){return this.finishInner(ar.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=ar.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function bz(t,e,n){let r=new Map;for(let o of t)for(let a=0;a<o.chunk.length;a++)o.chunk[a].maxPoint<=0&&r.set(o.chunk[a],o.chunkPos[a]);let i=new Set;for(let o of e)for(let a=0;a<o.chunk.length;a++){let s=r.get(o.chunk[a]);s!=null&&(n?n.mapPos(s):s)==o.chunkPos[a]&&!(n!=null&&n.touchesRange(s,s+o.chunk[a].length))&&i.add(o.chunk[a])}return i}class OJ{constructor(e,n,r,i=0){this.layer=e,this.skip=n,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=e+n.from[this.rangeIndex];if(this.from=r,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class M1{constructor(e){this.heap=e}static from(e,n=null,r=-1){let i=[];for(let o=0;o<e.length;o++)for(let a=e[o];!a.isEmpty;a=a.nextLayer)a.maxPoint>=r&&i.push(new OJ(a,n,r,o));return i.length==1?i[0]:new M1(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let r of this.heap)r.goto(e,n);for(let r=this.heap.length>>1;r>=0;r--)F5(this.heap,r);return this.next(),this}forward(e,n){for(let r of this.heap)r.forward(e,n);for(let r=this.heap.length>>1;r>=0;r--)F5(this.heap,r);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),F5(this.heap,0)}}}function F5(t,e){for(let n=t[e];;){let r=(e<<1)+1;if(r>=t.length)break;let i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0&&(i=t[r+1],r++),n.compare(i)<0)break;t[r]=n,t[e]=i,e=r}}class Ly{constructor(e,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=M1.from(e,n,r)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){ow(this.active,e),ow(this.activeTo,e),ow(this.activeRank,e),this.minActive=_z(this.active,this.activeTo)}addActive(e){let n=0,{value:r,to:i,rank:o}=this.cursor;for(;n<this.activeRank.length&&this.activeRank[n]<=o;)n++;aw(this.active,n,r),aw(this.activeTo,n,i),aw(this.activeRank,n,o),e&&aw(e,n,this.cursor.from),this.minActive=_z(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&ow(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(r),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(e){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)n++;return n}}function Sz(t,e,n,r,i,o){t.goto(e),n.goto(r);let a=r+i,s=r,l=r-e;for(;;){let c=t.to+l-n.to||t.endSide-n.endSide,u=c<0?t.to+l:n.to,f=Math.min(u,a);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&f8(t.activeForPoint(t.to),n.activeForPoint(n.to))||o.comparePoint(s,f,t.point,n.point):f>s&&!f8(t.active,n.active)&&o.compareRange(s,f,t.active,n.active),u>a)break;s=u,c<=0&&t.next(),c>=0&&n.next()}}function f8(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function ow(t,e){for(let n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function aw(t,e,n){for(let r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=n}function _z(t,e){let n=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||t[i].endSide-t[n].endSide)<0&&(n=i,r=e[i]);return n}function Z2(t,e,n=t.length){let r=0;for(let i=0;i<n;)t.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=Yo(t,i));return r}function d8(t,e,n,r){for(let i=0,o=0;;){if(o>=e)return i;if(i==t.length)break;o+=t.charCodeAt(i)==9?n-o%n:1,i=Yo(t,i)}return r===!0?-1:t.length}const h8="",wz=typeof Symbol>"u"?"__"+h8:Symbol.for(h8),p8=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),kz=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class eh{constructor(e,n){this.rules=[];let{finish:r}=n||{};function i(a){return/^@/.test(a)?[a]:a.split(/,\s*/)}function o(a,s,l,c){let u=[],f=/^@(\w+)\b/.exec(a[0]),d=f&&f[1]=="keyframes";if(f&&s==null)return l.push(a[0]+";");for(let h in s){let g=s[h];if(/&/.test(h))o(h.split(/,\s*/).map(y=>a.map(S=>y.replace(/&/,S))).reduce((y,S)=>y.concat(S)),g,l);else if(g&&typeof g=="object"){if(!f)throw new RangeError("The value of a property ("+h+") should be a primitive value.");o(i(h),g,u,d)}else g!=null&&u.push(h.replace(/_.*/,"").replace(/[A-Z]/g,y=>"-"+y.toLowerCase())+": "+g+";")}(u.length||d)&&l.push((r&&!f&&!c?a.map(r):a).join(", ")+" {"+u.join(" ")+"}")}for(let a in e)o(i(a),e[a],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=kz[wz]||1;return kz[wz]=e+1,h8+e.toString(36)}static mount(e,n){(e[p8]||new $_e(e)).mount(Array.isArray(n)?n:[n])}}let xz=new Map;class $_e{constructor(e){let n=e.ownerDocument||e,r=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let i=xz.get(n);if(i)return e.adoptedStyleSheets=[i.sheet,...e.adoptedStyleSheets],e[p8]=i;this.sheet=new r.CSSStyleSheet,e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets],xz.set(n,this)}else{this.styleTag=n.createElement("style");let i=e.head||e;i.insertBefore(this.styleTag,i.firstChild)}this.modules=[],e[p8]=this}mount(e){let n=this.sheet,r=0,i=0;for(let o=0;o<e.length;o++){let a=e[o],s=this.modules.indexOf(a);if(s<i&&s>-1&&(this.modules.splice(s,1),i--,s=-1),s==-1){if(this.modules.splice(i++,0,a),n)for(let l=0;l<a.rules.length;l++)n.insertRule(a.rules[l],r++)}else{for(;i<s;)r+=this.modules[i++].rules.length;r+=a.rules.length,i++}}if(!n){let o="";for(let a=0;a<this.modules.length;a++)o+=this.modules[a].getRules()+`
`;this.styleTag.textContent=o}}}var th={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},R1={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Cz=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent),F_e=typeof navigator<"u"&&/Mac/.test(navigator.platform),L_e=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),D_e=F_e||Cz&&+Cz[1]<57;for(var xo=0;xo<10;xo++)th[48+xo]=th[96+xo]=String(xo);for(var xo=1;xo<=24;xo++)th[xo+111]="F"+xo;for(var xo=65;xo<=90;xo++)th[xo]=String.fromCharCode(xo+32),R1[xo]=String.fromCharCode(xo);for(var L5 in th)R1.hasOwnProperty(L5)||(R1[L5]=th[L5]);function N_e(t){var e=D_e&&(t.ctrlKey||t.altKey||t.metaKey)||L_e&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?R1:th)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function r4(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function g8(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function M_e(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Qk(t,e){if(!e.anchorNode)return!1;try{return g8(t,e.anchorNode)}catch{return!1}}function n0(t){return t.nodeType==3?wg(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function i4(t,e,n,r){return n?Tz(t,e,n,r,-1)||Tz(t,e,n,r,1):!1}function o4(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function Tz(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:nh(t))){if(t.nodeName=="DIV")return!1;let o=t.parentNode;if(!o||o.nodeType!=1)return!1;e=o4(t)+(i<0?0:1),t=o}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?nh(t):0}else return!1}}function nh(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function ST(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function R_e(t){return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function z_e(t,e,n,r,i,o,a,s){let l=t.ownerDocument,c=l.defaultView||window;for(let u=t,f=!1;u&&!f;)if(u.nodeType==1){let d,h=u==l.body;if(h)d=R_e(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(f=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let S=u.getBoundingClientRect();d={left:S.left,right:S.left+u.clientWidth,top:S.top,bottom:S.top+u.clientHeight}}let g=0,y=0;if(i=="nearest")e.top<d.top?(y=-(d.top-e.top+a),n>0&&e.bottom>d.bottom+y&&(y=e.bottom-d.bottom+y+a)):e.bottom>d.bottom&&(y=e.bottom-d.bottom+a,n<0&&e.top-y<d.top&&(y=-(d.top+y-e.top+a)));else{let S=e.bottom-e.top,v=d.bottom-d.top;y=(i=="center"&&S<=v?e.top+S/2-v/2:i=="start"||i=="center"&&n<0?e.top-a:e.bottom-v+a)-d.top}if(r=="nearest"?e.left<d.left?(g=-(d.left-e.left+o),n>0&&e.right>d.right+g&&(g=e.right-d.right+g+o)):e.right>d.right&&(g=e.right-d.right+o,n<0&&e.left<d.left+g&&(g=-(d.left+g-e.left+o))):g=(r=="center"?e.left+(e.right-e.left)/2-(d.right-d.left)/2:r=="start"==s?e.left-o:e.right-(d.right-d.left)+o)-d.left,g||y)if(h)c.scrollBy(g,y);else{let S=0,v=0;if(y){let _=u.scrollTop;u.scrollTop+=y,v=u.scrollTop-_}if(g){let _=u.scrollLeft;u.scrollLeft+=g,S=u.scrollLeft-_}e={left:e.left-S,top:e.top-v,right:e.right-S,bottom:e.bottom-v},S&&Math.abs(S-g)<1&&(r="nearest"),v&&Math.abs(v-y)<1&&(i="nearest")}if(h)break;u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function V_e(t){let e=t.ownerDocument;for(let n=t.parentNode;n&&n!=e.body;)if(n.nodeType==1){if(n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)return n;n=n.assignedSlot||n.parentNode}else if(n.nodeType==11)n=n.host;else break;return null}class B_e{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:r}=e;this.set(n,Math.min(e.anchorOffset,n?nh(n):0),r,Math.min(e.focusOffset,r?nh(r):0))}set(e,n,r,i){this.anchorNode=e,this.anchorOffset=n,this.focusNode=r,this.focusOffset=i}}let _m=null;function IJ(t){if(t.setActive)return t.setActive();if(_m)return t.focus(_m);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(_m==null?{get preventScroll(){return _m={preventScroll:!0},!0}}:void 0),!_m){_m=!1;for(let n=0;n<e.length;){let r=e[n++],i=e[n++],o=e[n++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=o&&(r.scrollLeft=o)}}}let Az;function wg(t,e,n=e){let r=Az||(Az=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function Ev(t,e,n){let r={key:e,code:e,keyCode:n,which:n,cancelable:!0},i=new KeyboardEvent("keydown",r);i.synthetic=!0,t.dispatchEvent(i);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,t.dispatchEvent(o),i.defaultPrevented||o.defaultPrevented}function j_e(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function $J(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function H_e(t,e){let n=e.focusNode,r=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=r)return!1;for(r=Math.min(r,nh(n));;)if(r){if(n.nodeType!=1)return!1;let i=n.childNodes[r-1];i.contentEditable=="false"?r--:(n=i,r=nh(n))}else{if(n==t)return!0;r=o4(n),n=n.parentNode}}function FJ(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}class xa{constructor(e,n,r=!0){this.node=e,this.offset=n,this.precise=r}static before(e,n){return new xa(e.parentNode,o4(e),n)}static after(e,n){return new xa(e.parentNode,o4(e)+1,n)}}const vI=[];class Br{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let r of this.children){if(r==e)return n;n+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let r=this.dom,i=null,o;for(let a of this.children){if(a.flags&7){if(!a.dom&&(o=i?i.nextSibling:r.firstChild)){let s=Br.get(o);(!s||!s.parent&&s.canReuseDOM(a))&&a.reuseDOM(o)}a.sync(e,n),a.flags&=-8}if(o=i?i.nextSibling:r.firstChild,n&&!n.written&&n.node==r&&o!=a.dom&&(n.written=!0),a.dom.parentNode==r)for(;o&&o!=a.dom;)o=Pz(o);else r.insertBefore(a.dom,o);i=a.dom}for(o=i?i.nextSibling:r.firstChild,o&&n&&n.node==r&&(n.written=!0);o;)o=Pz(o)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,n),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let r;if(e==this.dom)r=this.dom.childNodes[n];else{let i=nh(e)==0?0:n==0?-1:1;for(;;){let o=e.parentNode;if(o==this.dom)break;i==0&&o.firstChild!=o.lastChild&&(e==o.firstChild?i=-1:i=1),e=o}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!Br.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,o=0;;i++){let a=this.children[i];if(a.dom==r)return o;o+=a.length+a.breakAfter}}domBoundsAround(e,n,r=0){let i=-1,o=-1,a=-1,s=-1;for(let l=0,c=r,u=r;l<this.children.length;l++){let f=this.children[l],d=c+f.length;if(c<e&&d>n)return f.domBoundsAround(e,n,c);if(d>=e&&i==-1&&(i=l,o=c),c>n&&f.dom.parentNode==this.dom){a=l,s=u;break}u=d,c=d+f.breakAfter}return{from:o,to:s<0?r+this.length:s,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:a<this.children.length&&a>=0?this.children[a].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,r=vI){this.markDirty();for(let i=e;i<n;i++){let o=this.children[i];o.parent==this&&o.destroy()}this.children.splice(e,n-e,...r);for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new LJ(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,r,i,o,a){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){this.parent=null}}Br.prototype.breakAfter=0;function Pz(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class LJ{constructor(e,n,r){this.children=e,this.pos=n,this.i=r,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function DJ(t,e,n,r,i,o,a,s,l){let{children:c}=t,u=c.length?c[e]:null,f=o.length?o[o.length-1]:null,d=f?f.breakAfter:a;if(!(e==r&&u&&!a&&!d&&o.length<2&&u.merge(n,i,o.length?f:null,n==0,s,l))){if(r<c.length){let h=c[r];h&&i<h.length?(e==r&&(h=h.split(i),i=0),!d&&f&&h.merge(0,i,f,!0,0,l)?o[o.length-1]=h:(i&&h.merge(0,i,null,!1,0,l),o.push(h))):h!=null&&h.breakAfter&&(f?f.breakAfter=1:a=1),r++}for(u&&(u.breakAfter=a,n>0&&(!a&&o.length&&u.merge(n,u.length,o[0],!1,s,0)?u.breakAfter=o.shift().breakAfter:(n<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(n,u.length,null,!1,s,0),e++));e<r&&o.length;)if(c[r-1].become(o[o.length-1]))r--,o.pop(),l=o.length?0:s;else if(c[e].become(o[0]))e++,o.shift(),s=o.length?0:l;else break;!o.length&&e&&r<c.length&&!c[e-1].breakAfter&&c[r].merge(0,0,c[e-1],!1,s,l)&&e--,(e<r||o.length)&&t.replaceChildren(e,r,o)}}function NJ(t,e,n,r,i,o){let a=t.childCursor(),{i:s,off:l}=a.findPos(n,1),{i:c,off:u}=a.findPos(e,-1),f=e-n;for(let d of r)f+=d.length;t.length+=f,DJ(t,c,u,s,l,r,0,i,o)}const av="";class MJ{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(An.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=av}readRange(e,n){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let o=this.text.length;this.readNode(i);let a=i.nextSibling;if(a==n)break;let s=Br.get(i),l=Br.get(a);(s&&l?s.breakAfter:(s?s.breakAfter:Ez(i))||Ez(a)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>o)&&this.lineBreak(),i=a}return this.findPointBefore(r,n),this}readTextNode(e){let n=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,a=1,s;if(this.lineSeparator?(o=n.indexOf(this.lineSeparator,r),a=this.lineSeparator.length):(s=i.exec(n))&&(o=s.index,a=s[0].length),this.append(n.slice(r,o<0?n.length:o)),o<0)break;if(this.lineBreak(),a>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=a-1);r=o+a}}readNode(e){if(e.cmIgnore)return;let n=Br.get(e),r=n&&n.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(e,n){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+Math.min(n,r.offset))}}function Ez(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}class Oz{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}let Ds=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},m8=typeof document<"u"?document:{documentElement:{style:{}}};const v8=/Edge\/(\d+)/.exec(Ds.userAgent),RJ=/MSIE \d/.test(Ds.userAgent),y8=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ds.userAgent),_T=!!(RJ||y8||v8),Iz=!_T&&/gecko\/(\d+)/i.test(Ds.userAgent),D5=!_T&&/Chrome\/(\d+)/.exec(Ds.userAgent),$z="webkitFontSmoothing"in m8.documentElement.style,zJ=!_T&&/Apple Computer/.test(Ds.vendor),Fz=zJ&&(/Mobile\/\w+/.test(Ds.userAgent)||Ds.maxTouchPoints>2);var Tt={mac:Fz||/Mac/.test(Ds.platform),windows:/Win/.test(Ds.platform),linux:/Linux|X11/.test(Ds.platform),ie:_T,ie_version:RJ?m8.documentMode||6:y8?+y8[1]:v8?+v8[1]:0,gecko:Iz,gecko_version:Iz?+(/Firefox\/(\d+)/.exec(Ds.userAgent)||[0,0])[1]:0,chrome:!!D5,chrome_version:D5?+D5[1]:0,ios:Fz,android:/Android\b/.test(Ds.userAgent),webkit:$z,safari:zJ,webkit_version:$z?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:m8.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const U_e=256;class mu extends Br{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,r){return this.flags&8||r&&(!(r instanceof mu)||this.length-(n-e)+r.length>U_e||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new mu(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new xa(this.dom,e)}domBoundsAround(e,n,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return W_e(this.dom,e,n)}}class xf extends Br{constructor(e,n=[],r=0){super(),this.mark=e,this.children=n,this.length=r;for(let i of n)i.setParent(this)}setAttrs(e){if($J(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,r,i,o,a){return r&&(!(r instanceof xf&&r.mark.eq(this.mark))||e&&o<=0||n<this.length&&a<=0)?!1:(NJ(this,e,n,r?r.children:[],o-1,a-1),this.markDirty(),!0)}split(e){let n=[],r=0,i=-1,o=0;for(let s of this.children){let l=r+s.length;l>e&&n.push(r<e?s.split(e-r):s),i<0&&r>=e&&(i=o),r=l,o++}let a=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new xf(this.mark,n,a)}domAtPos(e){return VJ(this,e)}coordsAt(e,n){return jJ(this,e,n)}}function W_e(t,e,n){let r=t.nodeValue.length;e>r&&(e=r);let i=e,o=e,a=0;e==0&&n<0||e==r&&n>=0?Tt.chrome||Tt.gecko||(e?(i--,a=1):o<r&&(o++,a=-1)):n<0?i--:o<r&&o++;let s=wg(t,i,o).getClientRects();if(!s.length)return null;let l=s[(a?a<0:n>=0)?0:s.length-1];return Tt.safari&&!a&&l.width==0&&(l=Array.prototype.find.call(s,c=>c.width)||l),a?ST(l,a<0):l||null}class Up extends Br{constructor(e,n,r){super(),this.widget=e,this.length=n,this.side=r,this.prevWidget=null}static create(e,n,r){return new Up(e,n,r)}split(e){let n=Up.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,n,r,i,o,a){return r&&(!(r instanceof Up)||!this.widget.compare(r.widget)||e>0&&o<=0||n<this.length&&a<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}become(e){return e instanceof Up&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return rr.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,r=n&&n.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):rr.empty}domAtPos(e){return(this.length?e==0:this.side>0)?xa.before(this.dom):xa.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);if(r)return r;let i=this.dom.getClientRects(),o=null;if(!i.length)return null;let a=this.side?this.side<0:e>0;for(let s=a?i.length-1:0;o=i[s],!(e>0?s==0:s==i.length-1||o.top<o.bottom);s+=a?-1:1);return ST(o,!a)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class r0 extends Br{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof r0&&e.side==this.side}split(){return new r0(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?xa.before(this.dom):xa.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return rr.empty}get isHidden(){return!0}}mu.prototype.children=Up.prototype.children=r0.prototype.children=vI;function VJ(t,e){let n=t.dom,{children:r}=t,i=0;for(let o=0;i<r.length;i++){let a=r[i],s=o+a.length;if(!(s==o&&a.getSide()<=0)){if(e>o&&e<s&&a.dom.parentNode==n)return a.domAtPos(e-o);if(e<=o)break;o=s}}for(let o=i;o>0;o--){let a=r[o-1];if(a.dom.parentNode==n)return a.domAtPos(a.length)}for(let o=i;o<r.length;o++){let a=r[o];if(a.dom.parentNode==n)return a.domAtPos(0)}return new xa(n,0)}function BJ(t,e,n){let r,{children:i}=t;n>0&&e instanceof xf&&i.length&&(r=i[i.length-1])instanceof xf&&r.mark.eq(e.mark)?BJ(r,e.children[0],n-1):(i.push(e),e.setParent(t)),t.length+=e.length}function jJ(t,e,n){let r=null,i=-1,o=null,a=-1;function s(c,u){for(let f=0,d=0;f<c.children.length&&d<=u;f++){let h=c.children[f],g=d+h.length;g>=u&&(h.children.length?s(h,u-d):(!o||o.isHidden&&n>0)&&(g>u||d==g&&h.getSide()>0)?(o=h,a=u-d):(d<u||d==g&&h.getSide()<0&&!h.isHidden)&&(r=h,i=u-d)),d=g}}s(t,e);let l=(n<0?r:o)||r||o;return l?l.coordsAt(Math.max(0,l==r?i:a),n):G_e(t)}function G_e(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=n0(e);return n[n.length-1]||null}function b8(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const Lz=Object.create(null);function yI(t,e,n){if(t==e)return!0;t||(t=Lz),e||(e=Lz);let r=Object.keys(t),i=Object.keys(e);if(r.length-(n&&r.indexOf(n)>-1?1:0)!=i.length-(n&&i.indexOf(n)>-1?1:0))return!1;for(let o of r)if(o!=n&&(i.indexOf(o)==-1||t[o]!==e[o]))return!1;return!0}function S8(t,e,n){let r=null;if(e)for(let i in e)n&&i in n||t.removeAttribute(r=i);if(n)for(let i in n)e&&e[i]==n[i]||t.setAttribute(r=i,n[i]);return!!r}function q_e(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let r=t.attributes[n];e[r.name]=r.value}return e}class $f{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,r){return null}get isHidden(){return!1}destroy(e){}}var pi=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(pi||(pi={}));class Ut extends _g{constructor(e,n,r,i){super(),this.startSide=e,this.endSide=n,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new Q2(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return n+=r&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new rh(e,n,n,r,e.widget||null,!1)}static replace(e){let n=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:o,end:a}=HJ(e,n);r=(o?n?-3e8:-1:5e8)-1,i=(a?n?2e8:1:-6e8)+1}return new rh(e,r,i,n,e.widget||null,!0)}static line(e){return new eS(e)}static set(e,n=!1){return ar.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Ut.none=ar.empty;class Q2 extends Ut{constructor(e){let{start:n,end:r}=HJ(e);super(n?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,r;return this==e||e instanceof Q2&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&yI(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}Q2.prototype.point=!1;class eS extends Ut{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof eS&&this.spec.class==e.spec.class&&yI(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}eS.prototype.mapMode=To.TrackBefore;eS.prototype.point=!0;class rh extends Ut{constructor(e,n,r,i,o,a){super(n,r,o,e),this.block=i,this.isReplace=a,this.mapMode=i?n<=0?To.TrackBefore:To.TrackAfter:To.TrackDel}get type(){return this.startSide<this.endSide?pi.WidgetRange:this.startSide<=0?pi.WidgetBefore:pi.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof rh&&Y_e(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}rh.prototype.point=!0;function HJ(t,e=!1){let{inclusiveStart:n,inclusiveEnd:r}=t;return n==null&&(n=t.inclusive),r==null&&(r=t.inclusive),{start:n??e,end:r??e}}function Y_e(t,e){return t==e||!!(t&&e&&t.compare(e))}function _8(t,e,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=t?n[i]=Math.max(n[i],e):n.push(t,e)}class _a extends Br{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,r,i,o,a){if(r){if(!(r instanceof _a))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),NJ(this,e,n,r?r.children:[],o,a),!0}split(e){let n=new _a;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:r,off:i}=this.childPos(e);i&&(n.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let o=r;o<this.children.length;o++)n.append(this.children[o],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){yI(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){BJ(this,e,n)}addLineDeco(e){let n=e.spec.attributes,r=e.spec.class;n&&(this.attrs=b8(n,this.attrs||{})),r&&(this.attrs=b8({class:r},this.attrs||{}))}domAtPos(e){return VJ(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var r;this.dom?this.flags&4&&($J(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(S8(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let i=this.dom.lastChild;for(;i&&Br.get(i)instanceof xf;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=Br.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!Tt.ios||!this.children.some(o=>o instanceof mu))){let o=document.createElement("BR");o.cmIgnore=!0,this.dom.appendChild(o)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let r of this.children){if(!(r instanceof mu)||/[^ -~]/.test(r.text))return null;let i=n0(r.dom);if(i.length!=1)return null;e+=i[0].width,n=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let r=jJ(this,e,n);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,o=r.bottom-r.top;if(Math.abs(o-i.lineHeight)<2&&i.textHeight<o){let a=(o-i.textHeight)/2;return{top:r.top+a,bottom:r.bottom-a,left:r.left,right:r.left}}}return r}become(e){return!1}get type(){return pi.Text}static find(e,n){for(let r=0,i=0;r<e.children.length;r++){let o=e.children[r],a=i+o.length;if(a>=n){if(o instanceof _a)return o;if(a>n)break}i=a+o.breakAfter}return null}}class ig extends Br{constructor(e,n,r){super(),this.widget=e,this.length=n,this.type=r,this.breakAfter=0,this.prevWidget=null}merge(e,n,r,i,o,a){return r&&(!(r instanceof ig)||!this.widget.compare(r.widget)||e>0&&o<=0||n<this.length&&a<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?xa.before(this.dom):xa.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let r=new ig(this.widget,n,this.type);return r.breakAfter=this.breakAfter,r}get children(){return vI}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):rr.empty}domBoundsAround(){return null}become(e){return e instanceof ig&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.type=e.type,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){return this.widget.coordsAt(this.dom,e,n)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Jb{constructor(e,n,r,i){this.doc=e,this.pos=n,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof ig&&e.type==pi.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new _a),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(sw(new r0(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(e,n,r){for(;e>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:a,done:s}=this.cursor.next(this.skip);if(this.skip=0,s)throw new Error("Ran out of text content when drawing inline views");if(a){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=o,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-r)),this.getLine().append(sw(new mu(this.text.slice(this.textOff,this.textOff+i)),n),r),this.atCursorPos=!0,this.textOff+=i,e-=i,r=0}}span(e,n,r,i){this.buildText(n-e,r,i),this.pos=n,this.openStart<0&&(this.openStart=i)}point(e,n,r,i,o,a){if(this.disallowBlockEffectsFor[a]&&r instanceof rh){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let s=n-e;if(r instanceof rh)if(r.block){let{type:l}=r;l==pi.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new ig(r.widget||new Dz("div"),s,l))}else{let l=Up.create(r.widget||new Dz("span"),s,s?0:r.startSide),c=this.atCursorPos&&!l.isEditable&&o<=i.length&&(e<n||r.startSide>0),u=!l.isEditable&&(e<n||o>i.length||r.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!c&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),c&&(f.append(sw(new r0(1),i),o),o=i.length+Math.max(0,o-i.length)),f.append(sw(l,i),o),this.atCursorPos=u,this.pendingBuffer=u?e<n||o>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);s&&(this.textOff+s<=this.text.length?this.textOff+=s:(this.skip+=s-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=o)}static build(e,n,r,i,o){let a=new Jb(e,n,r,o);return a.openEnd=ar.spans(i,n,r,a),a.openStart<0&&(a.openStart=a.openEnd),a.finish(a.openEnd),a}}function sw(t,e){for(let n of e)t=new xf(n,[t],t.length);return t}class Dz extends $f{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}const UJ=_t.define(),WJ=_t.define(),GJ=_t.define(),qJ=_t.define(),w8=_t.define(),YJ=_t.define(),KJ=_t.define(),XJ=_t.define({combine:t=>t.some(e=>e)}),JJ=_t.define({combine:t=>t.some(e=>e)});class a4{constructor(e,n="nearest",r="nearest",i=5,o=5){this.range=e,this.y=n,this.x=r,this.yMargin=i,this.xMargin=o}map(e){return e.empty?this:new a4(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const Nz=cn.define({map:(t,e)=>t.map(e)});function Vs(t,e,n){let r=t.facet(qJ);r.length?r[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}const wT=_t.define({combine:t=>t.length?t[0]:!0});let K_e=0;const kb=_t.define();class Mi{constructor(e,n,r,i){this.id=e,this.create=n,this.domEventHandlers=r,this.extension=i(this)}static define(e,n){const{eventHandlers:r,provide:i,decorations:o}=n||{};return new Mi(K_e++,e,r,a=>{let s=[kb.of(a)];return o&&s.push(z1.of(l=>{let c=l.plugin(a);return c?o(c):Ut.none})),i&&s.push(i(a)),s})}static fromClass(e,n){return Mi.define(r=>new e(r),n)}}class N5{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(r){if(Vs(n.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(n){Vs(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(r){Vs(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const ZJ=_t.define(),bI=_t.define(),z1=_t.define(),SI=_t.define(),QJ=_t.define();function eZ(t){let e=0,n=0,r=0,i=0;for(let o of t.state.facet(QJ)){let a=o(t);a&&(a.left!=null&&(e=Math.max(e,a.left)),a.right!=null&&(n=Math.max(n,a.right)),a.top!=null&&(r=Math.max(r,a.top)),a.bottom!=null&&(i=Math.max(i,a.bottom)))}return{left:e,right:n,top:r,bottom:i}}const xb=_t.define();class Al{constructor(e,n,r,i){this.fromA=e,this.toA=n,this.fromB=r,this.toB=i}join(e){return new Al(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,r=this;for(;n>0;n--){let i=e[n-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(n-1,1)}}return e.splice(n,0,r),e}static extendWithRanges(e,n){if(n.length==0)return e;let r=[];for(let i=0,o=0,a=0,s=0;;i++){let l=i==e.length?null:e[i],c=a-s,u=l?l.fromB:1e9;for(;o<n.length&&n[o]<u;){let f=n[o],d=n[o+1],h=Math.max(s,f),g=Math.min(u,d);if(h<=g&&new Al(h+c,g+c,h,g).addToSet(r),d>u)break;o+=2}if(!l)return r;new Al(l.fromA,l.toA,l.fromB,l.toB).addToSet(r),a=l.toA,s=l.toB}}}class s4{constructor(e,n,r){this.view=e,this.state=n,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=Xi.empty(this.startState.doc.length);for(let o of r)this.changes=this.changes.compose(o.changes);let i=[];this.changes.iterChangedRanges((o,a,s,l)=>i.push(new Al(o,a,s,l))),this.changedRanges=i}static create(e,n,r){return new s4(e,n,r)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var di=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(di||(di={}));const k8=di.LTR,X_e=di.RTL;function tZ(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const J_e=tZ("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Z_e=tZ("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),x8=Object.create(null),Nc=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);x8[e]=n,x8[n]=-e}function Q_e(t){return t<=247?J_e[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?Z_e[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8203?256:64336<=t&&t<=65023?4:t==8204?256:1}const ewe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Ov{constructor(e,n,r){this.from=e,this.to=n,this.level=r}get dir(){return this.level%2?X_e:k8}side(e,n){return this.dir==n==e?this.to:this.from}static find(e,n,r,i){let o=-1;for(let a=0;a<e.length;a++){let s=e[a];if(s.from<=n&&s.to>=n){if(s.level==r)return a;(o<0||(i!=0?i<0?s.from<n:s.to>n:e[o].level>s.level))&&(o=a)}}if(o<0)throw new RangeError("Index out of range");return o}}const li=[];function twe(t,e){let n=t.length,r=e==k8?1:2,i=e==k8?2:1;if(!t||r==1&&!ewe.test(t))return nZ(n);for(let a=0,s=r,l=r;a<n;a++){let c=Q_e(t.charCodeAt(a));c==512?c=s:c==8&&l==4&&(c=16),li[a]=c==4?2:c,c&7&&(l=c),s=c}for(let a=0,s=r,l=r;a<n;a++){let c=li[a];if(c==128)a<n-1&&s==li[a+1]&&s&24?c=li[a]=s:li[a]=256;else if(c==64){let u=a+1;for(;u<n&&li[u]==64;)u++;let f=a&&s==8||u<n&&li[u]==8?l==1?1:8:256;for(let d=a;d<u;d++)li[d]=f;a=u-1}else c==8&&l==1&&(li[a]=1);s=c,c&7&&(l=c)}for(let a=0,s=0,l=0,c,u,f;a<n;a++)if(u=x8[c=t.charCodeAt(a)])if(u<0){for(let d=s-3;d>=0;d-=3)if(Nc[d+1]==-u){let h=Nc[d+2],g=h&2?r:h&4?h&1?i:r:0;g&&(li[a]=li[Nc[d]]=g),s=d;break}}else{if(Nc.length==189)break;Nc[s++]=a,Nc[s++]=c,Nc[s++]=l}else if((f=li[a])==2||f==1){let d=f==r;l=d?0:1;for(let h=s-3;h>=0;h-=3){let g=Nc[h+2];if(g&2)break;if(d)Nc[h+2]|=2;else{if(g&4)break;Nc[h+2]|=4}}}for(let a=0;a<n;a++)if(li[a]==256){let s=a+1;for(;s<n&&li[s]==256;)s++;let l=(a?li[a-1]:r)==1,c=(s<n?li[s]:r)==1,u=l==c?l?1:2:r;for(let f=a;f<s;f++)li[f]=u;a=s-1}let o=[];if(r==1)for(let a=0;a<n;){let s=a,l=li[a++]!=1;for(;a<n&&l==(li[a]!=1);)a++;if(l)for(let c=a;c>s;){let u=c,f=li[--c]!=2;for(;c>s&&f==(li[c-1]!=2);)c--;o.push(new Ov(c,u,f?2:1))}else o.push(new Ov(s,a,0))}else for(let a=0;a<n;){let s=a,l=li[a++]==2;for(;a<n&&l==(li[a]==2);)a++;o.push(new Ov(s,a,l?1:2))}return o}function nZ(t){return[new Ov(0,t,0)]}let rZ="";function nwe(t,e,n,r,i){var o;let a=r.head-t.from,s=-1;if(a==0){if(!i||!t.length)return null;e[0].level!=n&&(a=e[0].side(!1,n),s=0)}else if(a==t.length){if(i)return null;let d=e[e.length-1];d.level!=n&&(a=d.side(!0,n),s=e.length-1)}s<0&&(s=Ov.find(e,a,(o=r.bidiLevel)!==null&&o!==void 0?o:-1,r.assoc));let l=e[s];a==l.side(i,n)&&(l=e[s+=i?1:-1],a=l.side(!i,n));let c=i==(l.dir==n),u=Yo(t.text,a,c);if(rZ=t.text.slice(Math.min(a,u),Math.max(a,u)),u!=l.side(i,n))return Ze.cursor(u+t.from,c?-1:1,l.level);let f=s==(i?e.length-1:0)?null:e[s+(i?1:-1)];return!f&&l.level!=n?Ze.cursor(i?t.to:t.from,i?-1:1,n):f&&f.level<l.level?Ze.cursor(f.side(!i,n)+t.from,i?1:-1,f.level):Ze.cursor(u+t.from,i?-1:1,l.level)}class Mz extends Br{constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[],this.hasComposition=null,this.markedForComposition=new Set,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new _a],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Al(0,0,0,e.state.doc.length)],0,null)}get length(){return this.view.state.doc.length}update(e){let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:s,toA:l})=>l<this.minWidthFrom||s>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let r=this.view.inputState.composing<0?null:iwe(this.view,e.changes);if(this.hasComposition){this.markedForComposition.clear();let{from:s,to:l}=this.hasComposition;n=new Al(s,l,e.changes.mapPos(s,-1),e.changes.mapPos(l,1)).addToSet(n.slice())}this.hasComposition=r?{from:r.range.fromB,to:r.range.toB}:null,(Tt.ie||Tt.chrome)&&!r&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let i=this.decorations,o=this.updateDeco(),a=swe(i,o,e.changes);return n=Al.extendWithRanges(n,a),!(this.flags&7)&&n.length==0?!1:(this.updateInner(n,e.startState.doc.length,r),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let a=Tt.chrome||Tt.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,a),this.flags&=-8,a&&(a.written||i.selectionRange.focusNode!=a.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(a=>a.flags&=-9);let o=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let a of this.children)a instanceof ig&&a.widget instanceof Rz&&o.push(a.dom);i.updateGaps(o)}updateChildren(e,n,r){let i=r?r.range.addToSet(e.slice()):e,o=this.childCursor(n);for(let a=i.length-1;;a--){let s=a>=0?i[a]:null;if(!s)break;let{fromA:l,toA:c,fromB:u,toB:f}=s,d,h,g,y;if(r&&r.range.fromB<f&&r.range.toB>u){let C=Jb.build(this.view.state.doc,u,r.range.fromB,this.decorations,this.dynamicDecorationMap),k=Jb.build(this.view.state.doc,r.range.toB,f,this.decorations,this.dynamicDecorationMap);h=C.breakAtStart,g=C.openStart,y=k.openEnd;let m=this.compositionView(r);k.breakAtStart?m.breakAfter=1:k.content.length&&m.merge(m.length,m.length,k.content[0],!1,k.openStart,0)&&(m.breakAfter=k.content[0].breakAfter,k.content.shift()),C.content.length&&m.merge(0,0,C.content[C.content.length-1],!0,0,C.openEnd)&&C.content.pop(),d=C.content.concat(m).concat(k.content)}else({content:d,breakAtStart:h,openStart:g,openEnd:y}=Jb.build(this.view.state.doc,u,f,this.decorations,this.dynamicDecorationMap));let{i:S,off:v}=o.findPos(c,1),{i:_,off:x}=o.findPos(l,-1);DJ(this,_,x,S,v,d,h,g,y)}r&&this.fixCompositionDOM(r)}compositionView(e){let n=new mu(e.text.nodeValue);n.flags|=8;for(let{deco:i}of e.marks)n=new xf(i,[n],n.length);let r=new _a;return r.append(n,0),r}fixCompositionDOM(e){let n=(o,a)=>{a.flags|=8,this.markedForComposition.add(a);let s=Br.get(o);s!=a&&(s&&(s.dom=null),a.setDOM(o))},r=this.childPos(e.range.fromB,1),i=this.children[r.i];n(e.line,i);for(let o=e.marks.length-1;o>=-1;o--)r=i.childPos(r.off,1),i=i.children[r.i],n(o>=0?e.marks[o].node:e.text,i)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,o=!i&&Qk(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||n||o))return;let a=this.forceSelection;this.forceSelection=!1;let s=this.view.state.selection.main,l=this.domAtPos(s.anchor),c=s.empty?l:this.domAtPos(s.head);if(Tt.gecko&&s.empty&&!this.hasComposition&&rwe(l)){let f=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(f,l.node.childNodes[l.offset]||null)),l=c=new xa(f,0),a=!0}let u=this.view.observer.selectionRange;(a||!u.focusNode||!i4(l.node,l.offset,u.anchorNode,u.anchorOffset)||!i4(c.node,c.offset,u.focusNode,u.focusOffset))&&(this.view.observer.ignore(()=>{Tt.android&&Tt.chrome&&this.dom.contains(u.focusNode)&&lwe(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let f=r4(this.view.root);if(f)if(s.empty){if(Tt.gecko){let d=owe(l.node,l.offset);if(d&&d!=3){let h=oZ(l.node,l.offset,d==1?1:-1);h&&(l=new xa(h,d==1?0:h.nodeValue.length))}}f.collapse(l.node,l.offset),s.bidiLevel!=null&&u.cursorBidiLevel!=null&&(u.cursorBidiLevel=s.bidiLevel)}else if(f.extend){f.collapse(l.node,l.offset);try{f.extend(c.node,c.offset)}catch{}}else{let d=document.createRange();s.anchor>s.head&&([l,c]=[c,l]),d.setEnd(c.node,c.offset),d.setStart(l.node,l.offset),f.removeAllRanges(),f.addRange(d)}o&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(l,c)),this.impreciseAnchor=l.precise?null:new xa(u.anchorNode,u.anchorOffset),this.impreciseHead=c.precise?null:new xa(u.focusNode,u.focusOffset)}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,r=r4(e.root),{anchorNode:i,anchorOffset:o}=e.observer.selectionRange;if(!r||!n.empty||!n.assoc||!r.modify)return;let a=_a.find(this,n.head);if(!a)return;let s=a.posAtStart;if(n.head==s||n.head==s+a.length)return;let l=this.coordsAt(n.head,-1),c=this.coordsAt(n.head,1);if(!l||!c||l.bottom>c.top)return;let u=this.domAtPos(n.head+n.assoc);r.collapse(u.node,u.offset),r.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let f=e.observer.selectionRange;e.docView.posFromDOM(f.anchorNode,f.anchorOffset)!=n.from&&r.collapse(i,o)}nearest(e){for(let n=e;n;){let r=Br.get(n);if(r&&r.rootView==this)return r;n=n.parentNode}return null}posFromDOM(e,n){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,n)+r.posAtStart}domAtPos(e){let{i:n,off:r}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let i=this.children[n];if(r<i.length||i instanceof _a)break;n++,r=0}return this.children[n].domAtPos(r)}coordsAt(e,n){for(let r=this.length,i=this.children.length-1;;i--){let o=this.children[i],a=r-o.breakAfter-o.length;if(e>a||e==a&&o.type!=pi.WidgetBefore&&o.type!=pi.WidgetAfter&&(!i||n==2||this.children[i-1].breakAfter||this.children[i-1].type==pi.WidgetBefore&&n>-2))return o.coordsAt(e-a,n);r=a}}coordsForChar(e){let{i:n,off:r}=this.childPos(e,1),i=this.children[n];if(!(i instanceof _a))return null;for(;i.children.length;){let{i:s,off:l}=i.childPos(r,1);for(;;s++){if(s==i.children.length)return null;if((i=i.children[s]).length)break}r=l}if(!(i instanceof mu))return null;let o=Yo(i.text,r);if(o==r)return null;let a=wg(i.dom,r,o).getClientRects();return!a.length||a[0].top>=a[0].bottom?null:a[0]}measureVisibleLineHeights(e){let n=[],{from:r,to:i}=e,o=this.view.contentDOM.clientWidth,a=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,s=-1,l=this.view.textDirection==di.LTR;for(let c=0,u=0;u<this.children.length;u++){let f=this.children[u],d=c+f.length;if(d>i)break;if(c>=r){let h=f.dom.getBoundingClientRect();if(n.push(h.height),a){let g=f.dom.lastChild,y=g?n0(g):[];if(y.length){let S=y[y.length-1],v=l?S.right-h.left:h.right-S.left;v>s&&(s=v,this.minWidth=o,this.minWidthFrom=c,this.minWidthTo=d)}}}c=d+f.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?di.RTL:di.LTR}measureTextSize(){for(let o of this.children)if(o instanceof _a){let a=o.measureTextSize();if(a)return a}let e=document.createElement("div"),n,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let o=n0(e.firstChild)[0];n=e.getBoundingClientRect().height,r=o?o.width/27:7,i=o?o.height:n,e.remove()}),{lineHeight:n,charWidth:r,textHeight:i}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new LJ(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let r=0,i=0;;i++){let o=i==n.viewports.length?null:n.viewports[i],a=o?o.from-1:this.length;if(a>r){let s=n.lineBlockAt(a).bottom-n.lineBlockAt(r).top;e.push(Ut.replace({widget:new Rz(s),block:!0,inclusive:!0,isBlockGap:!0}).range(r,a))}if(!o)break;r=o.to+1}return Ut.set(e)}updateDeco(){let e=this.view.state.facet(z1).map((n,r)=>(this.dynamicDecorationMap[r]=typeof n=="function")?n(this.view):n);for(let n=e.length;n<e.length+3;n++)this.dynamicDecorationMap[n]=!1;return this.decorations=[...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),i;if(!r)return;!n.empty&&(i=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let o=eZ(this.view),a={left:r.left-o.left,top:r.top-o.top,right:r.right+o.right,bottom:r.bottom+o.bottom};z_e(this.view.scrollDOM,a,n.head<n.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==di.LTR)}}function rwe(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}class Rz extends $f{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function iZ(t){let e=t.observer.selectionRange,n=e.focusNode&&oZ(e.focusNode,e.focusOffset,0);if(!n)return null;let r=Br.get(n),i,o;if(r instanceof mu)i=r.posAtStart,o=i+r.length;else e:for(let a=0,s=n;;){for(let c=s.previousSibling,u;c;c=c.previousSibling){if(u=Br.get(c)){i=o=u.posAtEnd+a;break e}let f=new MJ([],t.state);if(f.readNode(c),f.text.indexOf(av)>-1)return null;a+=f.text.length}if(s=s.parentNode,!s)return null;let l=Br.get(s);if(l){i=o=l.posAtStart+a;break}}return{from:i,to:o,node:n}}function iwe(t,e){let n=iZ(t);if(!n)return null;let{from:r,to:i,node:o}=n,a=e.mapPos(r,-1),s=e.mapPos(i,1),l=o.nodeValue;if(/[\n\r]/.test(l))return null;if(s-a!=l.length){let d=e.mapPos(r,1),h=e.mapPos(i,-1);if(h-d==l.length)a=d,s=h;else if(t.state.doc.sliceString(s-l.length,s)==l)a=s-l.length;else if(t.state.doc.sliceString(a,a+l.length)==l)s=a+l.length;else return null}let{main:c}=t.state.selection;if(t.state.doc.sliceString(a,s)!=l||a>c.head||s<c.head)return null;let u=[],f=new Al(r,i,a,s);for(let d=o.parentNode;;d=d.parentNode){let h=Br.get(d);if(h instanceof xf)u.push({node:d,deco:h.mark});else{if(h instanceof _a||d.nodeName=="DIV"&&d.parentNode==t.contentDOM)return{range:f,text:o,marks:u,line:d};if(d!=t.contentDOM)u.push({node:d,deco:new Q2({inclusive:!0,attributes:q_e(d),tagName:d.tagName.toLowerCase()})});else return null}}}function oZ(t,e,n){if(n<=0)for(let r=t,i=e;;){if(r.nodeType==3)return r;if(r.nodeType==1&&i>0)r=r.childNodes[i-1],i=nh(r);else break}if(n>=0)for(let r=t,i=e;;){if(r.nodeType==3)return r;if(r.nodeType==1&&i<r.childNodes.length&&n>=0)r=r.childNodes[i],i=0;else break}return null}function owe(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}class awe{constructor(){this.changes=[]}compareRange(e,n){_8(e,n,this.changes)}comparePoint(e,n){_8(e,n,this.changes)}}function swe(t,e,n){let r=new awe;return ar.compare(t,e,n,r),r.changes}function lwe(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function cwe(t,e,n=1){let r=t.charCategorizer(e),i=t.doc.lineAt(e),o=e-i.from;if(i.length==0)return Ze.cursor(e);o==0?n=1:o==i.length&&(n=-1);let a=o,s=o;n<0?a=Yo(i.text,o,!1):s=Yo(i.text,o);let l=r(i.text.slice(a,s));for(;a>0;){let c=Yo(i.text,a,!1);if(r(i.text.slice(c,a))!=l)break;a=c}for(;s<i.length;){let c=Yo(i.text,s);if(r(i.text.slice(s,c))!=l)break;s=c}return Ze.range(a+i.from,s+i.from)}function uwe(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function fwe(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function M5(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function zz(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function Vz(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function C8(t,e,n){let r,i,o,a,s=!1,l,c,u,f;for(let g=t.firstChild;g;g=g.nextSibling){let y=n0(g);for(let S=0;S<y.length;S++){let v=y[S];i&&M5(i,v)&&(v=zz(Vz(v,i.bottom),i.top));let _=uwe(e,v),x=fwe(n,v);if(_==0&&x==0)return g.nodeType==3?Bz(g,e,n):C8(g,e,n);if(!r||a>x||a==x&&o>_){r=g,i=v,o=_,a=x;let C=x?n<v.top?-1:1:_?e<v.left?-1:1:0;s=!C||(C>0?S<y.length-1:S>0)}_==0?n>v.bottom&&(!u||u.bottom<v.bottom)?(l=g,u=v):n<v.top&&(!f||f.top>v.top)&&(c=g,f=v):u&&M5(u,v)?u=Vz(u,v.bottom):f&&M5(f,v)&&(f=zz(f,v.top))}}if(u&&u.bottom>=n?(r=l,i=u):f&&f.top<=n&&(r=c,i=f),!r)return{node:t,offset:0};let d=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return Bz(r,d,n);if(s&&r.contentEditable!="false")return C8(r,d,n);let h=Array.prototype.indexOf.call(t.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:t,offset:h}}function Bz(t,e,n){let r=t.nodeValue.length,i=-1,o=1e9,a=0;for(let s=0;s<r;s++){let l=wg(t,s,s+1).getClientRects();for(let c=0;c<l.length;c++){let u=l[c];if(u.top==u.bottom)continue;a||(a=e-u.left);let f=(u.top>n?u.top-n:n-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&f<o){let d=e>=(u.left+u.right)/2,h=d;if((Tt.chrome||Tt.gecko)&&wg(t,s).getBoundingClientRect().left==u.right&&(h=!d),f<=0)return{node:t,offset:s+(h?1:0)};i=s+(h?1:0),o=f}}}return{node:t,offset:i>-1?i:a>0?t.nodeValue.length:0}}function aZ(t,e,n,r=-1){var i,o;let a=t.contentDOM.getBoundingClientRect(),s=a.top+t.viewState.paddingTop,l,{docHeight:c}=t.viewState,{x:u,y:f}=e,d=f-s;if(d<0)return 0;if(d>c)return t.state.doc.length;for(let C=t.viewState.heightOracle.textHeight/2,k=!1;l=t.elementAtHeight(d),l.type!=pi.Text;)for(;d=r>0?l.bottom+C:l.top-C,!(d>=0&&d<=c);){if(k)return n?null:0;k=!0,r=-r}f=s+d;let h=l.from;if(h<t.viewport.from)return t.viewport.from==0?0:n?null:jz(t,a,l,u,f);if(h>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:jz(t,a,l,u,f);let g=t.dom.ownerDocument,y=t.root.elementFromPoint?t.root:g,S=y.elementFromPoint(u,f);S&&!t.contentDOM.contains(S)&&(S=null),S||(u=Math.max(a.left+1,Math.min(a.right-1,u)),S=y.elementFromPoint(u,f),S&&!t.contentDOM.contains(S)&&(S=null));let v,_=-1;if(S&&((i=t.docView.nearest(S))===null||i===void 0?void 0:i.isEditable)!=!1){if(g.caretPositionFromPoint){let C=g.caretPositionFromPoint(u,f);C&&({offsetNode:v,offset:_}=C)}else if(g.caretRangeFromPoint){let C=g.caretRangeFromPoint(u,f);C&&({startContainer:v,startOffset:_}=C,(!t.contentDOM.contains(v)||Tt.safari&&dwe(v,_,u)||Tt.chrome&&hwe(v,_,u))&&(v=void 0))}}if(!v||!t.docView.dom.contains(v)){let C=_a.find(t.docView,h);if(!C)return d>l.top+l.height/2?l.to:l.from;({node:v,offset:_}=C8(C.dom,u,f))}let x=t.docView.nearest(v);if(!x)return null;if(x.isWidget&&((o=x.dom)===null||o===void 0?void 0:o.nodeType)==1){let C=x.dom.getBoundingClientRect();return e.y<C.top||e.y<=C.bottom&&e.x<=(C.left+C.right)/2?x.posAtStart:x.posAtEnd}else return x.localPosFromDOM(v,_)+x.posAtStart}function jz(t,e,n,r,i){let o=Math.round((r-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let s=t.viewState.heightOracle.textHeight,l=Math.floor((i-n.top-(t.defaultLineHeight-s)*.5)/s);o+=l*t.viewState.heightOracle.lineLength}let a=t.state.sliceDoc(n.from,n.to);return n.from+d8(a,o,t.state.tabSize)}function dwe(t,e,n){let r;if(t.nodeType!=3||e!=(r=t.nodeValue.length))return!1;for(let i=t.nextSibling;i;i=i.nextSibling)if(i.nodeType!=1||i.nodeName!="BR")return!1;return wg(t,r-1,r).getBoundingClientRect().left>n}function hwe(t,e,n){if(e!=0)return!1;for(let i=t;;){let o=i.parentNode;if(!o||o.nodeType!=1||o.firstChild!=i)return!1;if(o.classList.contains("cm-line"))break;i=o}let r=t.nodeType==1?t.getBoundingClientRect():wg(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}function T8(t,e){let n=t.lineBlockAt(e);if(Array.isArray(n.type)){for(let r of n.type)if(r.to>e||r.to==e&&(r.to==n.to||r.type==pi.Text))return r}return n}function pwe(t,e,n,r){let i=T8(t,e.head),o=!r||i.type!=pi.Text||!(t.lineWrapping||i.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(o){let a=t.dom.getBoundingClientRect(),s=t.textDirectionAt(i.from),l=t.posAtCoords({x:n==(s==di.LTR)?a.right-1:a.left+1,y:(o.top+o.bottom)/2});if(l!=null)return Ze.cursor(l,n?-1:1)}return Ze.cursor(n?i.to:i.from,n?-1:1)}function Hz(t,e,n,r){let i=t.state.doc.lineAt(e.head),o=t.bidiSpans(i),a=t.textDirectionAt(i.from);for(let s=e,l=null;;){let c=nwe(i,o,a,s,n),u=rZ;if(!c){if(i.number==(n?t.state.doc.lines:1))return s;u=`
`,i=t.state.doc.line(i.number+(n?1:-1)),o=t.bidiSpans(i),c=Ze.cursor(n?i.from:i.to)}if(l){if(!l(u))return s}else{if(!r)return c;l=r(u)}s=c}}function gwe(t,e,n){let r=t.state.charCategorizer(e),i=r(n);return o=>{let a=r(o);return i==oi.Space&&(i=a),i==a}}function mwe(t,e,n,r){let i=e.head,o=n?1:-1;if(i==(n?t.state.doc.length:0))return Ze.cursor(i,e.assoc);let a=e.goalColumn,s,l=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(i),u=t.documentTop;if(c)a==null&&(a=c.left-l.left),s=o<0?c.top:c.bottom;else{let h=t.viewState.lineBlockAt(i);a==null&&(a=Math.min(l.right-l.left,t.defaultCharacterWidth*(i-h.from))),s=(o<0?h.top:h.bottom)+u}let f=l.left+a,d=r??t.viewState.heightOracle.textHeight>>1;for(let h=0;;h+=10){let g=s+(d+h)*o,y=aZ(t,{x:f,y:g},!1,o);if(g<l.top||g>l.bottom||(o<0?y<i:y>i))return Ze.cursor(y,e.assoc,void 0,a)}}function ex(t,e,n){for(;;){let r=0;for(let i of t)i.between(e-1,e+1,(o,a,s)=>{if(e>o&&e<a){let l=r||n||(e-o<a-e?-1:1);e=l<0?o:a,r=l}});if(!r)return e}}function R5(t,e,n){let r=ex(t.state.facet(SI).map(i=>i(t)),n.from,e.head>n.from?-1:1);return r==n.from?n:Ze.cursor(r,r<n.from?1:-1)}class vwe{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null;let n=(r,i)=>{this.ignoreDuringComposition(i)||i.type=="keydown"&&this.keydown(e,i)||(this.mustFlushObserver(i)&&e.observer.forceFlush(),this.runCustomHandlers(i.type,e,i)?i.preventDefault():r(e,i))};for(let r in Bi){let i=Bi[r];e.contentDOM.addEventListener(r,o=>{Uz(e,o)&&n(i,o)},A8[r]),this.registeredEvents.push(r)}e.scrollDOM.addEventListener("mousedown",r=>{if(r.target==e.scrollDOM&&r.clientY>e.contentDOM.getBoundingClientRect().bottom&&(n(Bi.mousedown,r),!r.defaultPrevented&&r.button==2)){let i=e.contentDOM.style.minHeight;e.contentDOM.style.minHeight="100%",setTimeout(()=>e.contentDOM.style.minHeight=i,200)}}),e.scrollDOM.addEventListener("drop",r=>{r.target==e.scrollDOM&&r.clientY>e.contentDOM.getBoundingClientRect().bottom&&n(Bi.drop,r)}),Tt.chrome&&Tt.chrome_version==102&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,Tt.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,n){var r;let i;this.customHandlers=[];for(let o of n)if(i=(r=o.update(e).spec)===null||r===void 0?void 0:r.domEventHandlers){this.customHandlers.push({plugin:o.value,handlers:i});for(let a in i)this.registeredEvents.indexOf(a)<0&&a!="scroll"&&(this.registeredEvents.push(a),e.contentDOM.addEventListener(a,s=>{Uz(e,s)&&this.runCustomHandlers(a,e,s)&&s.preventDefault()}))}}runCustomHandlers(e,n,r){for(let i of this.customHandlers){let o=i.handlers[e];if(o)try{if(o.call(i.plugin,r,n)||r.defaultPrevented)return!0}catch(a){Vs(n.state,a)}}return!1}runScrollHandlers(e,n){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let r of this.customHandlers){let i=r.handlers.scroll;if(i)try{i.call(r.plugin,n,e)}catch(o){Vs(e.state,o)}}}keydown(e,n){if(this.lastKeyCode=n.keyCode,this.lastKeyTime=Date.now(),n.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(n.keyCode!=27&&lZ.indexOf(n.keyCode)<0&&(e.inputState.lastEscPress=0),Tt.android&&Tt.chrome&&!n.synthetic&&(n.keyCode==13||n.keyCode==8))return e.observer.delayAndroidKey(n.key,n.keyCode),!0;let r;return Tt.ios&&!n.synthetic&&!n.altKey&&!n.metaKey&&((r=sZ.find(i=>i.keyCode==n.keyCode))&&!n.ctrlKey||ywe.indexOf(n.key)>-1&&n.ctrlKey&&!n.shiftKey)?(this.pendingIOSKey=r||n,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let n=this.pendingIOSKey;return n?(this.pendingIOSKey=void 0,Ev(e.contentDOM,n.key,n.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Tt.safari&&!Tt.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const sZ=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],ywe="dthko",lZ=[16,17,18,20,91,92,224,225],lw=6;function cw(t){return Math.max(0,t)*.7+8}function bwe(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class Swe{constructor(e,n,r,i){this.view=e,this.startEvent=n,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParent=V_e(e.contentDOM),this.atoms=e.state.facet(SI).map(a=>a(e));let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(An.allowMultipleSelections)&&_we(e,n),this.dragging=kwe(e,n)&&dZ(n)==1?null:!1}start(e){this.dragging===!1&&(e.preventDefault(),this.select(e))}move(e){var n;if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&bwe(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let r=0,i=0,o=((n=this.scrollParent)===null||n===void 0?void 0:n.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},a=eZ(this.view);e.clientX-a.left<=o.left+lw?r=-cw(o.left-e.clientX):e.clientX+a.right>=o.right-lw&&(r=cw(e.clientX-o.right)),e.clientY-a.top<=o.top+lw?i=-cw(o.top-e.clientY):e.clientY+a.bottom>=o.bottom-lw&&(i=cw(e.clientY-o.bottom)),this.setScrollSpeed(r,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],o=null;if(i.empty){let a=ex(this.atoms,i.from,0);a!=i.from&&(o=Ze.cursor(a,-1))}else{let a=ex(this.atoms,i.from,-1),s=ex(this.atoms,i.to,1);(a!=i.from||s!=i.to)&&(o=Ze.range(i.from==i.anchor?a:s,i.from==i.head?a:s))}o&&(n||(n=e.ranges.slice()),n[r]=o)}return n?Ze.create(n,e.mainIndex):e}select(e){let{view:n}=this,r=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(n.state.selection)||r.main.assoc!=n.state.selection.main.assoc&&this.dragging===!1)&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function _we(t,e){let n=t.state.facet(UJ);return n.length?n[0](e):Tt.mac?e.metaKey:e.ctrlKey}function wwe(t,e){let n=t.state.facet(WJ);return n.length?n[0](e):Tt.mac?!e.altKey:!e.ctrlKey}function kwe(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let r=r4(t.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let o=0;o<i.length;o++){let a=i[o];if(a.left<=e.clientX&&a.right>=e.clientX&&a.top<=e.clientY&&a.bottom>=e.clientY)return!0}return!1}function Uz(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,r;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=Br.get(n))&&r.ignoreEvent(e))return!1;return!0}const Bi=Object.create(null),A8=Object.create(null),cZ=Tt.ie&&Tt.ie_version<15||Tt.ios&&Tt.webkit_version<604;function xwe(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),uZ(t,n.value)},50)}function uZ(t,e){let{state:n}=t,r,i=1,o=n.toText(e),a=o.lines==n.selection.ranges.length;if(P8!=null&&n.selection.ranges.every(l=>l.empty)&&P8==o.toString()){let l=-1;r=n.changeByRange(c=>{let u=n.doc.lineAt(c.from);if(u.from==l)return{range:c};l=u.from;let f=n.toText((a?o.line(i++).text:e)+n.lineBreak);return{changes:{from:u.from,insert:f},range:Ze.cursor(c.from+f.length)}})}else a?r=n.changeByRange(l=>{let c=o.line(i++);return{changes:{from:l.from,to:l.to,insert:c.text},range:Ze.cursor(l.from+c.length)}}):r=n.replaceSelection(o);t.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}Bi.keydown=(t,e)=>{t.inputState.setSelectionOrigin("select"),e.keyCode==27&&(t.inputState.lastEscPress=Date.now())};Bi.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Bi.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};A8.touchstart=A8.touchmove={passive:!0};Bi.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return;let n=null;for(let r of t.state.facet(GJ))if(n=r(t,e),n)break;if(!n&&e.button==0&&(n=Awe(t,e)),n){let r=!t.hasFocus;t.inputState.startMouseSelection(new Swe(t,e,n,r)),r&&t.observer.ignore(()=>IJ(t.contentDOM)),t.inputState.mouseSelection&&t.inputState.mouseSelection.start(e)}};function Wz(t,e,n,r){if(r==1)return Ze.cursor(e,n);if(r==2)return cwe(t.state,e,n);{let i=_a.find(t.docView,e),o=t.state.doc.lineAt(i?i.posAtEnd:e),a=i?i.posAtStart:o.from,s=i?i.posAtEnd:o.to;return s<t.state.doc.length&&s==o.to&&s++,Ze.range(a,s)}}let fZ=(t,e)=>t>=e.top&&t<=e.bottom,Gz=(t,e,n)=>fZ(e,n)&&t>=n.left&&t<=n.right;function Cwe(t,e,n,r){let i=_a.find(t.docView,e);if(!i)return 1;let o=e-i.posAtStart;if(o==0)return 1;if(o==i.length)return-1;let a=i.coordsAt(o,-1);if(a&&Gz(n,r,a))return-1;let s=i.coordsAt(o,1);return s&&Gz(n,r,s)?1:a&&fZ(r,a)?-1:1}function qz(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:Cwe(t,n,e.clientX,e.clientY)}}const Twe=Tt.ie&&Tt.ie_version<=11;let Yz=null,Kz=0,Xz=0;function dZ(t){if(!Twe)return t.detail;let e=Yz,n=Xz;return Yz=t,Xz=Date.now(),Kz=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(Kz+1)%3:1}function Awe(t,e){let n=qz(t,e),r=dZ(e),i=t.state.selection;return{update(o){o.docChanged&&(n.pos=o.changes.mapPos(n.pos),i=i.map(o.changes))},get(o,a,s){let l=qz(t,o),c,u=Wz(t,l.pos,l.bias,r);if(n.pos!=l.pos&&!a){let f=Wz(t,n.pos,n.bias,r),d=Math.min(f.from,u.from),h=Math.max(f.to,u.to);u=d<u.from?Ze.range(d,h):Ze.range(h,d)}return a?i.replaceRange(i.main.extend(u.from,u.to)):s&&r==1&&i.ranges.length>1&&(c=Pwe(i,l.pos))?c:s?i.addRange(u):Ze.create([u])}}}function Pwe(t,e){for(let n=0;n<t.ranges.length;n++){let{from:r,to:i}=t.ranges[n];if(r<=e&&i>=e)return Ze.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}Bi.dragstart=(t,e)=>{let{selection:{main:n}}=t.state,{mouseSelection:r}=t.inputState;r&&(r.dragging=n),e.dataTransfer&&(e.dataTransfer.setData("Text",t.state.sliceDoc(n.from,n.to)),e.dataTransfer.effectAllowed="copyMove")};function Jz(t,e,n,r){if(!n)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:o}=t.inputState,a=r&&o&&o.dragging&&wwe(t,e)?{from:o.dragging.from,to:o.dragging.to}:null,s={from:i,insert:n},l=t.state.changes(a?[a,s]:s);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:a?"move.drop":"input.drop"})}Bi.drop=(t,e)=>{if(!e.dataTransfer)return;if(t.state.readOnly)return e.preventDefault();let n=e.dataTransfer.files;if(n&&n.length){e.preventDefault();let r=Array(n.length),i=0,o=()=>{++i==n.length&&Jz(t,e,r.filter(a=>a!=null).join(t.state.lineBreak),!1)};for(let a=0;a<n.length;a++){let s=new FileReader;s.onerror=o,s.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(s.result)||(r[a]=s.result),o()},s.readAsText(n[a])}}else Jz(t,e,e.dataTransfer.getData("Text"),!0)};Bi.paste=(t,e)=>{if(t.state.readOnly)return e.preventDefault();t.observer.flush();let n=cZ?null:e.clipboardData;n?(uZ(t,n.getData("text/plain")||n.getData("text/uri-text")),e.preventDefault()):xwe(t)};function Ewe(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),t.focus()},50)}function Owe(t){let e=[],n=[],r=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let i=-1;for(let{from:o}of t.selection.ranges){let a=t.doc.lineAt(o);a.number>i&&(e.push(a.text),n.push({from:a.from,to:Math.min(t.doc.length,a.to+1)})),i=a.number}r=!0}return{text:e.join(t.lineBreak),ranges:n,linewise:r}}let P8=null;Bi.copy=Bi.cut=(t,e)=>{let{text:n,ranges:r,linewise:i}=Owe(t.state);if(!n&&!i)return;P8=i?n:null;let o=cZ?null:e.clipboardData;o?(e.preventDefault(),o.clearData(),o.setData("text/plain",n)):Ewe(t,n),e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})};const hZ=If.define();function pZ(t,e){let n=[];for(let r of t.facet(KJ)){let i=r(t,e);i&&n.push(i)}return n?t.update({effects:n,annotations:hZ.of(!0)}):null}function gZ(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=pZ(t.state,e);n?t.dispatch(n):t.update([])}},10)}Bi.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),gZ(t)};Bi.blur=t=>{t.observer.clearSelectionRange(),gZ(t)};Bi.compositionstart=Bi.compositionupdate=t=>{t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0)};Bi.compositionend=t=>{t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,Tt.chrome&&Tt.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50)};Bi.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};Bi.beforeinput=(t,e)=>{var n;let r;if(Tt.chrome&&Tt.android&&(r=sZ.find(i=>i.inputType==e.inputType))&&(t.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let i=((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>i+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}};const Zz=["pre-wrap","normal","pre-line","break-spaces"];class Iwe{constructor(e){this.lineWrapping=e,this.doc=rr.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((n-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Zz.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(n=!0,this.heightSamples[Math.floor(i*10)]=!0)}return n}refresh(e,n,r,i,o,a){let s=Zz.indexOf(e)>-1,l=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=s;if(this.lineWrapping=s,this.lineHeight=n,this.charWidth=r,this.textHeight=i,this.lineLength=o,l){this.heightSamples={};for(let c=0;c<a.length;c++){let u=a[c];u<0?c++:this.heightSamples[Math.floor(u*10)]=!0}}return l}}class $we{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class Zc{constructor(e,n,r,i,o){this.from=e,this.length=n,this.top=r,this.height=i,this._content=o}get type(){return typeof this._content=="number"?pi.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof rh?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Zc(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var qr=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(qr||(qr={}));const tx=.001;class Aa{constructor(e,n,r=2){this.length=e,this.height=n,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,n){this.height!=n&&(Math.abs(this.height-n)>tx&&(e.heightChanged=!0),this.height=n)}replace(e,n,r){return Aa.of(r)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,r,i){let o=this,a=r.doc;for(let s=i.length-1;s>=0;s--){let{fromA:l,toA:c,fromB:u,toB:f}=i[s],d=o.lineAt(l,qr.ByPosNoHeight,r.setDoc(n),0,0),h=d.to>=c?d:o.lineAt(c,qr.ByPosNoHeight,r,0,0);for(f+=h.to-c,c=h.to;s>0&&d.from<=i[s-1].toA;)l=i[s-1].fromA,u=i[s-1].fromB,s--,l<d.from&&(d=o.lineAt(l,qr.ByPosNoHeight,r,0,0));u+=d.from-l,l=d.from;let g=_I.build(r.setDoc(a),e,u,f);o=o.replace(l,c,g)}return o.updateHeight(r,0)}static empty(){return new Os(0,0)}static of(e){if(e.length==1)return e[0];let n=0,r=e.length,i=0,o=0;for(;;)if(n==r)if(i>o*2){let s=e[n-1];s.break?e.splice(--n,1,s.left,null,s.right):e.splice(--n,1,s.left,s.right),r+=1+s.break,i-=s.size}else if(o>i*2){let s=e[r];s.break?e.splice(r,1,s.left,null,s.right):e.splice(r,1,s.left,s.right),r+=2+s.break,o-=s.size}else break;else if(i<o){let s=e[n++];s&&(i+=s.size)}else{let s=e[--r];s&&(o+=s.size)}let a=0;return e[n-1]==null?(a=1,n--):e[n]==null&&(a=1,r++),new Fwe(Aa.of(e.slice(0,n)),a,Aa.of(e.slice(r)))}}Aa.prototype.size=1;class mZ extends Aa{constructor(e,n,r){super(e,n),this.deco=r}blockAt(e,n,r,i){return new Zc(i,this.length,r,this.height,this.deco||0)}lineAt(e,n,r,i,o){return this.blockAt(0,r,i,o)}forEachLine(e,n,r,i,o,a){e<=o+this.length&&n>=o&&a(this.blockAt(0,r,i,o))}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more&&this.setHeight(e,i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Os extends mZ{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,r,i){return new Zc(i,this.length,r,this.height,this.breaks)}replace(e,n,r){let i=r[0];return r.length==1&&(i instanceof Os||i instanceof So&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof So?i=new Os(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):Aa.of(r)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more?this.setHeight(e,i.heights[i.index++]):(r||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class So extends Aa{constructor(e){super(e,0)}heightMetrics(e,n){let r=e.doc.lineAt(n).number,i=e.doc.lineAt(n+this.length).number,o=i-r+1,a,s=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*o);a=l/o,this.length>o+1&&(s=(this.height-l)/(this.length-o-1))}else a=this.height/o;return{firstLine:r,lastLine:i,perLine:a,perChar:s}}blockAt(e,n,r,i){let{firstLine:o,lastLine:a,perLine:s,perChar:l}=this.heightMetrics(n,i);if(n.lineWrapping){let c=i+Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length),u=n.doc.lineAt(c),f=s+u.length*l,d=Math.max(r,e-f/2);return new Zc(u.from,u.length,d,f,0)}else{let c=Math.max(0,Math.min(a-o,Math.floor((e-r)/s))),{from:u,length:f}=n.doc.line(o+c);return new Zc(u,f,r+s*c,s,0)}}lineAt(e,n,r,i,o){if(n==qr.ByHeight)return this.blockAt(e,r,i,o);if(n==qr.ByPosNoHeight){let{from:h,to:g}=r.doc.lineAt(e);return new Zc(h,g-h,0,0,0)}let{firstLine:a,perLine:s,perChar:l}=this.heightMetrics(r,o),c=r.doc.lineAt(e),u=s+c.length*l,f=c.number-a,d=i+s*f+l*(c.from-o-f);return new Zc(c.from,c.length,Math.max(i,Math.min(d,i+this.height-u)),u,0)}forEachLine(e,n,r,i,o,a){e=Math.max(e,o),n=Math.min(n,o+this.length);let{firstLine:s,perLine:l,perChar:c}=this.heightMetrics(r,o);for(let u=e,f=i;u<=n;){let d=r.doc.lineAt(u);if(u==e){let g=d.number-s;f+=l*g+c*(e-o-g)}let h=l+c*d.length;a(new Zc(d.from,d.length,f,h,0)),f+=h,u=d.to+1}}replace(e,n,r){let i=this.length-n;if(i>0){let o=r[r.length-1];o instanceof So?r[r.length-1]=new So(o.length+i):r.push(null,new So(i-1))}if(e>0){let o=r[0];o instanceof So?r[0]=new So(e+o.length):r.unshift(new So(e-1),null)}return Aa.of(r)}decomposeLeft(e,n){n.push(new So(e-1),null)}decomposeRight(e,n){n.push(null,new So(this.length-e-1))}updateHeight(e,n=0,r=!1,i){let o=n+this.length;if(i&&i.from<=n+this.length&&i.more){let a=[],s=Math.max(n,i.from),l=-1;for(i.from>n&&a.push(new So(i.from-n-1).updateHeight(e,n));s<=o&&i.more;){let u=e.doc.lineAt(s).length;a.length&&a.push(null);let f=i.heights[i.index++];l==-1?l=f:Math.abs(f-l)>=tx&&(l=-2);let d=new Os(u,f);d.outdated=!1,a.push(d),s+=u+1}s<=o&&a.push(null,new So(o-s).updateHeight(e,s));let c=Aa.of(a);return(l<0||Math.abs(c.height-this.height)>=tx||Math.abs(l-this.heightMetrics(e,n).perLine)>=tx)&&(e.heightChanged=!0),c}else(r||this.outdated)&&(this.setHeight(e,e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class Fwe extends Aa{constructor(e,n,r){super(e.length+n+r.length,e.height+r.height,n|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,n,r,i){let o=r+this.left.height;return e<o?this.left.blockAt(e,n,r,i):this.right.blockAt(e,n,o,i+this.left.length+this.break)}lineAt(e,n,r,i,o){let a=i+this.left.height,s=o+this.left.length+this.break,l=n==qr.ByHeight?e<a:e<s,c=l?this.left.lineAt(e,n,r,i,o):this.right.lineAt(e,n,r,a,s);if(this.break||(l?c.to<s:c.from>s))return c;let u=n==qr.ByPosNoHeight?qr.ByPosNoHeight:qr.ByPos;return l?c.join(this.right.lineAt(s,u,r,a,s)):this.left.lineAt(s,u,r,i,o).join(c)}forEachLine(e,n,r,i,o,a){let s=i+this.left.height,l=o+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,n,r,i,o,a),n>=l&&this.right.forEachLine(e,n,r,s,l,a);else{let c=this.lineAt(l,qr.ByPos,r,i,o);e<c.from&&this.left.forEachLine(e,c.from-1,r,i,o,a),c.to>=e&&c.from<=n&&a(c),n>c.to&&this.right.forEachLine(c.to+1,n,r,s,l,a)}}replace(e,n,r){let i=this.left.length+this.break;if(n<i)return this.balanced(this.left.replace(e,n,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,n-i,r));let o=[];e>0&&this.decomposeLeft(e,o);let a=o.length;for(let s of r)o.push(s);if(e>0&&Qz(o,a-1),n<this.length){let s=o.length;this.decomposeRight(n,o),Qz(o,s)}return Aa.of(o)}decomposeLeft(e,n){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(r++,e>=r&&n.push(null)),e>r&&this.right.decomposeLeft(e-r,n)}decomposeRight(e,n){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,n);e<r&&this.left.decomposeRight(e,n),this.break&&e<i&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?Aa.of(this.break?[e,null,n]:[e,n]):(this.left=e,this.right=n,this.height=e.height+n.height,this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,r=!1,i){let{left:o,right:a}=this,s=n+o.length+this.break,l=null;return i&&i.from<=n+o.length&&i.more?l=o=o.updateHeight(e,n,r,i):o.updateHeight(e,n,r),i&&i.from<=s+a.length&&i.more?l=a=a.updateHeight(e,s,r,i):a.updateHeight(e,s,r),l?this.balanced(o,a):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Qz(t,e){let n,r;t[e]==null&&(n=t[e-1])instanceof So&&(r=t[e+1])instanceof So&&t.splice(e-1,3,new So(n.length+1+r.length))}const Lwe=5;class _I{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let r=Math.min(n,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof Os?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new Os(r-this.pos,-1)),this.writtenTo=r,n>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,r){if(e<n||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,o=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let a=n-e;r.block?this.addBlock(new mZ(a,i,r)):(a||o||i>=Lwe)&&this.addLineDeco(i,o,a)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Os(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let r=new So(n-e);return this.oracle.doc.lineAt(e).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Os)return e;let n=new Os(0,-1);return this.nodes.push(n),n}addBlock(e){var n;this.enterLine();let r=(n=e.deco)===null||n===void 0?void 0:n.type;r==pi.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,r!=pi.WidgetBefore&&(this.covering=e)}addLineDeco(e,n,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=n,this.writtenTo=this.pos=this.pos+r}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof Os)&&!this.isCovered?this.nodes.push(new Os(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof Os&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,n,r,i){let o=new _I(r,e);return ar.spans(n,r,i,o,0),o.finish(r)}}function Dwe(t,e,n){let r=new Nwe;return ar.compare(t,e,n,r,0),r.changes}class Nwe{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,r,i){(e<n||r&&r.heightRelevant||i&&i.heightRelevant)&&_8(e,n,this.changes,5)}}function Mwe(t,e){let n=t.getBoundingClientRect(),r=t.ownerDocument,i=r.defaultView||window,o=Math.max(0,n.left),a=Math.min(i.innerWidth,n.right),s=Math.max(0,n.top),l=Math.min(i.innerHeight,n.bottom);for(let c=t.parentNode;c&&c!=r.body;)if(c.nodeType==1){let u=c,f=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&f.overflow!="visible"){let d=u.getBoundingClientRect();o=Math.max(o,d.left),a=Math.min(a,d.right),s=Math.max(s,d.top),l=c==t.parentNode?d.bottom:Math.min(l,d.bottom)}c=f.position=="absolute"||f.position=="fixed"?u.offsetParent:u.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:o-n.left,right:Math.max(o,a)-n.left,top:s-(n.top+e),bottom:Math.max(s,l)-(n.top+e)}}function Rwe(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class z5{constructor(e,n,r){this.from=e,this.to=n,this.size=r}static same(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=n[r];if(i.from!=o.from||i.to!=o.to||i.size!=o.size)return!1}return!0}draw(e){return Ut.replace({widget:new zwe(this.size,e)}).range(this.from,this.to)}}class zwe extends $f{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class eV{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=tV,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=di.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(bI).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new Iwe(n),this.stateDeco=e.facet(z1).filter(r=>typeof r!="function"),this.heightMap=Aa.empty().applyChanges(this.stateDeco,rr.empty,this.heightOracle.setDoc(e.doc),[new Al(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Ut.set(this.lineGaps.map(r=>r.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let i=r?n.head:n.anchor;if(!e.some(({from:o,to:a})=>i>=o&&i<=a)){let{from:o,to:a}=this.lineBlockAt(i);e.push(new uw(o,a))}}this.viewports=e.sort((r,i)=>r.from-i.from),this.scaler=this.heightMap.height<=7e6?tV:new jwe(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:Cb(e,this.scaler))})}update(e,n=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(z1).filter(u=>typeof u!="function");let i=e.changedRanges,o=Al.extendWithRanges(i,Dwe(r,this.stateDeco,e?e.changes:Xi.empty(this.state.doc.length))),a=this.heightMap.height,s=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),o),this.heightMap.height!=a&&(e.flags|=2),s?(this.scrollAnchorPos=e.changes.mapPos(s.from,-1),this.scrollAnchorHeight=s.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<l.from||n.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,n));let c=!e.changes.empty||e.flags&2||l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,this.updateForViewport(),c&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(JJ)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,r=window.getComputedStyle(n),i=this.heightOracle,o=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?di.RTL:di.LTR;let a=this.heightOracle.mustRefreshForWrapping(o),s=n.getBoundingClientRect(),l=a||this.mustMeasureContent||this.contentDOMHeight!=s.height;this.contentDOMHeight=s.height,this.mustMeasureContent=!1;let c=0,u=0,f=parseInt(r.paddingTop)||0,d=parseInt(r.paddingBottom)||0;(this.paddingTop!=f||this.paddingBottom!=d)&&(this.paddingTop=f,this.paddingBottom=d,c|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=8),this.scrollTop!=e.scrollDOM.scrollTop&&(this.scrollAnchorHeight=-1,this.scrollTop=e.scrollDOM.scrollTop),this.scrolledToBottom=FJ(e.scrollDOM);let h=(this.printing?Rwe:Mwe)(n,this.paddingTop),g=h.top-this.pixelViewport.top,y=h.bottom-this.pixelViewport.bottom;this.pixelViewport=h;let S=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(S!=this.inView&&(this.inView=S,S&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let v=s.width;if((this.contentDOMWidth!=v||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=s.width,this.editorHeight=e.scrollDOM.clientHeight,c|=8),l){let x=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(x)&&(a=!0),a||i.lineWrapping&&Math.abs(v-this.contentDOMWidth)>i.charWidth){let{lineHeight:C,charWidth:k,textHeight:m}=e.docView.measureTextSize();a=C>0&&i.refresh(o,C,k,m,v/k,x),a&&(e.docView.minWidth=0,c|=8)}g>0&&y>0?u=Math.max(g,y):g<0&&y<0&&(u=Math.min(g,y)),i.heightChanged=!1;for(let C of this.viewports){let k=C.from==this.viewport.from?x:e.docView.measureVisibleLineHeights(C);this.heightMap=(a?Aa.empty().applyChanges(this.stateDeco,rr.empty,this.heightOracle,[new Al(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,a,new $we(C.from,k))}i.heightChanged&&(c|=2)}let _=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return _&&(this.viewport=this.getViewport(u,this.scrollTarget)),this.updateForViewport(),(c&2||_)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(a?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,o=this.heightOracle,{visibleTop:a,visibleBottom:s}=this,l=new uw(i.lineAt(a-r*1e3,qr.ByHeight,o,0,0).from,i.lineAt(s+(1-r)*1e3,qr.ByHeight,o,0,0).to);if(n){let{head:c}=n.range;if(c<l.from||c>l.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=i.lineAt(c,qr.ByPos,o,0,0),d;n.y=="center"?d=(f.top+f.bottom)/2-u/2:n.y=="start"||n.y=="nearest"&&c<l.from?d=f.top:d=f.bottom-u,l=new uw(i.lineAt(d-1e3/2,qr.ByHeight,o,0,0).from,i.lineAt(d+u+1e3/2,qr.ByHeight,o,0,0).to)}}return l}mapViewport(e,n){let r=n.mapPos(e.from,-1),i=n.mapPos(e.to,1);return new uw(this.heightMap.lineAt(r,qr.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,qr.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,qr.ByPos,this.heightOracle,0,0),{bottom:o}=this.heightMap.lineAt(n,qr.ByPos,this.heightOracle,0,0),{visibleTop:a,visibleBottom:s}=this;return(e==0||i<=a-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||o>=s+Math.max(10,Math.min(r,250)))&&i>a-2*1e3&&o<s+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let r=[];for(let i of e)n.touchesRange(i.from,i.to)||r.push(new z5(n.mapPos(i.from),n.mapPos(i.to),i.size));return r}ensureLineGaps(e,n){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,o=i>>1,a=i<<1;if(this.defaultTextDirection!=di.LTR&&!r)return[];let s=[],l=(c,u,f,d)=>{if(u-c<o)return;let h=this.state.selection.main,g=[h.from];h.empty||g.push(h.to);for(let S of g)if(S>c&&S<u){l(c,S-10,f,d),l(S+10,u,f,d);return}let y=Bwe(e,S=>S.from>=f.from&&S.to<=f.to&&Math.abs(S.from-c)<o&&Math.abs(S.to-u)<o&&!g.some(v=>S.from<v&&S.to>v));if(!y){if(u<f.to&&n&&r&&n.visibleRanges.some(S=>S.from<=u&&S.to>=u)){let S=n.moveToLineBoundary(Ze.cursor(u),!1,!0).head;S>c&&(u=S)}y=new z5(c,u,this.gapSize(f,c,u,d))}s.push(y)};for(let c of this.viewportLines){if(c.length<a)continue;let u=Vwe(c.from,c.to,this.stateDeco);if(u.total<a)continue;let f=this.scrollTarget?this.scrollTarget.range.head:null,d,h;if(r){let g=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,y,S;if(f!=null){let v=dw(u,f),_=((this.visibleBottom-this.visibleTop)/2+g)/c.height;y=v-_,S=v+_}else y=(this.visibleTop-c.top-g)/c.height,S=(this.visibleBottom-c.top+g)/c.height;d=fw(u,y),h=fw(u,S)}else{let g=u.total*this.heightOracle.charWidth,y=i*this.heightOracle.charWidth,S,v;if(f!=null){let _=dw(u,f),x=((this.pixelViewport.right-this.pixelViewport.left)/2+y)/g;S=_-x,v=_+x}else S=(this.pixelViewport.left-y)/g,v=(this.pixelViewport.right+y)/g;d=fw(u,S),h=fw(u,v)}d>c.from&&l(c.from,d,c,u),h<c.to&&l(h,c.to,c,u)}return s}gapSize(e,n,r,i){let o=dw(i,r)-dw(i,n);return this.heightOracle.lineWrapping?e.height*o:i.total*this.heightOracle.charWidth*o}updateLineGaps(e){z5.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Ut.set(e.map(n=>n.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let n=[];ar.spans(e,this.viewport.from,this.viewport.to,{span(i,o){n.push({from:i,to:o})},point(){}},20);let r=n.length!=this.visibleRanges.length||this.visibleRanges.some((i,o)=>i.from!=n[o].from||i.to!=n[o].to);return this.visibleRanges=n,r?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||Cb(this.heightMap.lineAt(e,qr.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return Cb(this.heightMap.lineAt(this.scaler.fromDOM(e),qr.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return Cb(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class uw{constructor(e,n){this.from=e,this.to=n}}function Vwe(t,e,n){let r=[],i=t,o=0;return ar.spans(n,t,e,{span(){},point(a,s){a>i&&(r.push({from:i,to:a}),o+=a-i),i=s}},20),i<e&&(r.push({from:i,to:e}),o+=e-i),{total:o,ranges:r}}function fw({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let i=0;;i++){let{from:o,to:a}=e[i],s=a-o;if(r<=s)return o+r;r-=s}}function dw(t,e){let n=0;for(let{from:r,to:i}of t.ranges){if(e<=i){n+=e-r;break}n+=i-r}return n/t.total}function Bwe(t,e){for(let n of t)if(e(n))return n}const tV={toDOM(t){return t},fromDOM(t){return t},scale:1};class jwe{constructor(e,n,r){let i=0,o=0,a=0;this.viewports=r.map(({from:s,to:l})=>{let c=n.lineAt(s,qr.ByPos,e,0,0).top,u=n.lineAt(l,qr.ByPos,e,0,0).bottom;return i+=u-c,{from:s,to:l,top:c,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(n.height-i);for(let s of this.viewports)s.domTop=a+(s.top-o)*this.scale,a=s.domBottom=s.domTop+(s.bottom-s.top),o=s.bottom}toDOM(e){for(let n=0,r=0,i=0;;n++){let o=n<this.viewports.length?this.viewports[n]:null;if(!o||e<o.top)return i+(e-r)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);r=o.bottom,i=o.domBottom}}fromDOM(e){for(let n=0,r=0,i=0;;n++){let o=n<this.viewports.length?this.viewports[n]:null;if(!o||e<o.domTop)return r+(e-i)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);r=o.bottom,i=o.domBottom}}}function Cb(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new Zc(t.from,t.length,n,r-n,Array.isArray(t._content)?t._content.map(i=>Cb(i,e)):t._content)}const hw=_t.define({combine:t=>t.join(" ")}),E8=_t.define({combine:t=>t.indexOf(!0)>-1}),O8=eh.newName(),vZ=eh.newName(),yZ=eh.newName(),bZ={"&light":"."+vZ,"&dark":"."+yZ};function I8(t,e,n){return new eh(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return t;if(!n||!n[i])throw new RangeError(`Unsupported selector: ${i}`);return n[i]}):t+" "+r}})}const Hwe=I8("."+O8,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},bZ);class Uwe{constructor(e,n,r,i){this.typeOver=i,this.bounds=null,this.text="";let{impreciseHead:o,impreciseAnchor:a}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,r,0))){let s=o||a?[]:Gwe(e),l=new MJ(s,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=qwe(s,this.bounds.from)}else{let s=e.observer.selectionRange,l=o&&o.node==s.focusNode&&o.offset==s.focusOffset||!g8(e.contentDOM,s.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(s.focusNode,s.focusOffset),c=a&&a.node==s.anchorNode&&a.offset==s.anchorOffset||!g8(e.contentDOM,s.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(s.anchorNode,s.anchorOffset);this.newSel=Ze.single(c,l)}}}function SZ(t,e){let n,{newSel:r}=e,i=t.state.selection.main,o=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:a,to:s}=e.bounds,l=i.from,c=null;(o===8||Tt.android&&e.text.length<s-a)&&(l=i.to,c="end");let u=Wwe(t.state.doc.sliceString(a,s,av),e.text,l-a,c);u&&(Tt.chrome&&o==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==av+av&&u.toB--,n={from:a+u.from,to:a+u.toA,insert:rr.of(e.text.slice(u.from,u.toB).split(av))})}else r&&(!t.hasFocus&&t.state.facet(wT)||r.main.eq(i))&&(r=null);if(!n&&!r)return!1;if(!n&&e.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,i.to))}:(Tt.mac||Tt.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(r&&n.insert.length==2&&(r=Ze.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:rr.of([" "])}):Tt.chrome&&n&&n.from==n.to&&n.from==i.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(r&&(r=Ze.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:rr.of([" "])}),n){let a=t.state;if(Tt.ios&&t.inputState.flushIOSKey(t)||Tt.android&&(n.from==i.from&&n.to==i.to&&n.insert.length==1&&n.insert.lines==2&&Ev(t.contentDOM,"Enter",13)||(n.from==i.from-1&&n.to==i.to&&n.insert.length==0||o==8&&n.insert.length<n.to-n.from)&&Ev(t.contentDOM,"Backspace",8)||n.from==i.from&&n.to==i.to+1&&n.insert.length==0&&Ev(t.contentDOM,"Delete",46)))return!0;let s=n.insert.toString();if(t.state.facet(YJ).some(u=>u(t,n.from,n.to,s)))return!0;t.inputState.composing>=0&&t.inputState.composing++;let l;if(n.from>=i.from&&n.to<=i.to&&n.to-n.from>=(i.to-i.from)/3&&(!r||r.main.empty&&r.main.from==n.from+n.insert.length)&&t.inputState.composing<0){let u=i.from<n.from?a.sliceDoc(i.from,n.from):"",f=i.to>n.to?a.sliceDoc(n.to,i.to):"";l=a.replaceSelection(t.state.toText(u+n.insert.sliceString(0,void 0,t.state.lineBreak)+f))}else{let u=a.changes(n),f=r&&r.main.to<=u.newLength?r.main:void 0;if(a.selection.ranges.length>1&&t.inputState.composing>=0&&n.to<=i.to&&n.to>=i.to-10){let d=t.state.sliceDoc(n.from,n.to),h=iZ(t)||t.state.doc.lineAt(i.head),g=i.to-n.to,y=i.to-i.from;l=a.changeByRange(S=>{if(S.from==i.from&&S.to==i.to)return{changes:u,range:f||S.map(u)};let v=S.to-g,_=v-d.length;if(S.to-S.from!=y||t.state.sliceDoc(_,v)!=d||h&&S.to>=h.from&&S.from<=h.to)return{range:S};let x=a.changes({from:_,to:v,insert:n.insert}),C=S.to-i.to;return{changes:x,range:f?Ze.range(Math.max(0,f.anchor+C),Math.max(0,f.head+C)):S.map(x)}})}else l={changes:u,selection:f&&a.selection.replaceRange(f)}}let c="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,c+=".compose",t.inputState.compositionFirstChange&&(c+=".start",t.inputState.compositionFirstChange=!1)),t.dispatch(l,{scrollIntoView:!0,userEvent:c}),!0}else if(r&&!r.main.eq(i)){let a=!1,s="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(a=!0),s=t.inputState.lastSelectionOrigin),t.dispatch({selection:r,scrollIntoView:a,userEvent:s}),!0}else return!1}function Wwe(t,e,n,r){let i=Math.min(t.length,e.length),o=0;for(;o<i&&t.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==i&&t.length==e.length)return null;let a=t.length,s=e.length;for(;a>0&&s>0&&t.charCodeAt(a-1)==e.charCodeAt(s-1);)a--,s--;if(r=="end"){let l=Math.max(0,o-Math.min(a,s));n-=a+l-o}if(a<o&&t.length<e.length){let l=n<=o&&n>=a?o-n:0;o-=l,s=o+(s-a),a=o}else if(s<o){let l=n<=o&&n>=s?o-n:0;o-=l,a=o+(a-s),s=o}return{from:o,toA:a,toB:s}}function Gwe(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}=t.observer.selectionRange;return n&&(e.push(new Oz(n,r)),(i!=n||o!=r)&&e.push(new Oz(i,o))),e}function qwe(t,e){if(t.length==0)return null;let n=t[0].pos,r=t.length==2?t[1].pos:n;return n>-1&&r>-1?Ze.single(n+e,r+e):null}const Ywe={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},V5=Tt.ie&&Tt.ie_version<=11;class Kwe{constructor(e){this.view=e,this.active=!1,this.selectionRange=new B_e,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);(Tt.ie&&Tt.ie_version<=11||Tt.ios&&e.composing)&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),V5&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM),this.resizeContent=new ResizeObserver(()=>this.view.requestMeasure()),this.resizeContent.observe(e.contentDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runScrollHandlers(this.view,e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,r)=>n!=e[r]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(wT)?r.root.activeElement!=this.dom:!Qk(r.dom,i))return;let o=i.anchorNode&&r.docView.nearest(i.anchorNode);if(o&&o.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(Tt.ie&&Tt.ie_version<=11||Tt.android&&Tt.chrome)&&!r.state.selection.main.empty&&i.focusNode&&i4(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=Tt.safari&&e.root.nodeType==11&&M_e(this.dom.ownerDocument)==this.dom&&Xwe(this.view)||r4(e.root);if(!n||this.selectionRange.eq(n))return!1;let r=Qk(this.dom,n);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&H_e(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let r=this.dom;r;)if(r.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=n)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Ywe),V5&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),V5&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var r;if(!this.delayedAndroidKey){let i=()=>{let o=this.delayedAndroidKey;o&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=o.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&o.force&&Ev(this.dom,o.key,o.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,r=-1,i=!1;for(let o of e){let a=this.readMutation(o);a&&(a.typeOver&&(i=!0),n==-1?{from:n,to:r}=a:(n=Math.min(a.from,n),r=Math.max(a.to,r)))}return{from:n,to:r,typeOver:i}}readChange(){let{from:e,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&Qk(this.dom,this.selectionRange);return e<0&&!i?null:(e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new Uwe(this.view,e,n,r))}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return!1;let r=this.view.state,i=SZ(this.view,n);return this.view.state==r&&this.view.update([]),i}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let r=nV(n,e.previousSibling||e.target.previousSibling,-1),i=nV(n,e.nextSibling||e.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:i?n.posBefore(i):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,n,r,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect(),(i=this.resizeContent)===null||i===void 0||i.disconnect();for(let o of this.scrollTargets)o.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function nV(t,e,n){for(;e;){let r=Br.get(e);if(r&&r.parent==t)return r;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}function Xwe(t){let e=null;function n(l){l.preventDefault(),l.stopImmediatePropagation(),e=l.getTargetRanges()[0]}if(t.contentDOM.addEventListener("beforeinput",n,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",n,!0),!e)return null;let r=e.startContainer,i=e.startOffset,o=e.endContainer,a=e.endOffset,s=t.docView.domAtPos(t.state.selection.main.anchor);return i4(s.node,s.offset,o,a)&&([r,i,o,a]=[o,a,r,i]),{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:a}}class bt{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(n=>this.update([n])),this.dispatch=this.dispatch.bind(this),this._root=e.root||j_e(e.parent)||document,this.viewState=new eV(e.state||An.create(e)),this.plugins=this.state.facet(kb).map(n=>new N5(n));for(let n of this.plugins)n.update(this);this.observer=new Kwe(this),this.inputState=new vwe(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new Mz(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...e){let n=e.length==1&&e[0]instanceof Ji?e[0]:this.state.update(...e);this._dispatch(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,i,o=this.state;for(let d of e){if(d.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=d.state}if(this.destroyed){this.viewState.state=o;return}let a=this.hasFocus,s=0,l=null;e.some(d=>d.annotation(hZ))?(this.inputState.notifiedFocused=a,s=1):a!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=a,l=pZ(o,a),l||(s=1));let c=this.observer.delayedAndroidKey,u=null;if(c?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(u=null)):this.observer.clear(),o.facet(An.phrases)!=this.state.facet(An.phrases))return this.setState(o);i=s4.create(this,o,e),i.flags|=s;let f=this.viewState.scrollTarget;try{this.updateState=2;for(let d of e){if(f&&(f=f.map(d.changes)),d.scrollIntoView){let{main:h}=d.state.selection;f=new a4(h.empty?h:Ze.cursor(h.head,h.head>h.anchor?-1:1))}for(let h of d.effects)h.is(Nz)&&(f=h.value)}this.viewState.update(i,f),this.bidiCache=l4.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),n=this.docView.update(i),this.state.facet(xb)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(d=>d.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(hw)!=i.state.facet(hw)&&(this.viewState.mustMeasureContent=!0),(n||r||f||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!i.empty)for(let d of this.state.facet(w8))d(i);(l||u)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),u&&!SZ(this,u)&&c.force&&Ev(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new eV(e),this.plugins=e.facet(kb).map(r=>new N5(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView=new Mz(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(kb),r=e.state.facet(kb);if(n!=r){let i=[];for(let o of r){let a=n.indexOf(o);if(a<0)i.push(new N5(o));else{let s=this.plugins[a];s.mustUpdate=e,i.push(s)}}for(let o of this.plugins)o.mustUpdate!=e&&o.destroy(this);this.plugins=i,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,r=this.scrollDOM,{scrollTop:i}=r,{scrollAnchorPos:o,scrollAnchorHeight:a}=this.viewState;i!=this.viewState.scrollTop&&(a=-1),this.viewState.scrollAnchorHeight=-1;try{for(let s=0;;s++){if(a<0)if(FJ(r))o=-1,a=this.viewState.heightMap.height;else{let h=this.viewState.scrollAnchorAt(i);o=h.from,a=h.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(s>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];l&4||([this.measureRequests,c]=[c,this.measureRequests]);let u=c.map(h=>{try{return h.read(this)}catch(g){return Vs(this.state,g),rV}}),f=s4.create(this,this.state,[]),d=!1;f.flags|=l,n?n.flags|=l:n=f,this.updateState=2,f.empty||(this.updatePlugins(f),this.inputState.update(f),this.updateAttrs(),d=this.docView.update(f));for(let h=0;h<c.length;h++)if(u[h]!=rV)try{let g=c[h];g.write&&g.write(u[h],this)}catch(g){Vs(this.state,g)}if(d&&this.docView.updateSelection(!0),!f.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null;continue}else{let g=(o<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(o).top)-a;if(g>1||g<-1){i=r.scrollTop=i+g,a=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let s of this.state.facet(w8))s(n)}get themeClasses(){return O8+" "+(this.state.facet(E8)?yZ:vZ)+" "+this.state.facet(hw)}updateAttrs(){let e=iV(this,ZJ,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(wT)?"true":"false",class:"cm-content",style:`${Tt.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),iV(this,bI,n);let r=this.observer.ignore(()=>{let i=S8(this.contentDOM,this.contentAttrs,n),o=S8(this.dom,this.editorAttrs,e);return i||o});return this.editorAttrs=e,this.contentAttrs=n,r}showAnnouncements(e){let n=!0;for(let r of e)for(let i of r.effects)if(i.is(bt.announce)){n&&(this.announceDOM.textContent=""),n=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(xb),eh.mount(this.root,this.styleModules.concat(Hwe).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.spec!=e)&&this.pluginMap.set(e,n=this.plugins.find(r=>r.spec==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,r){return R5(this,e,Hz(this,e,n,r))}moveByGroup(e,n){return R5(this,e,Hz(this,e,n,r=>gwe(this,e.head,r)))}moveToLineBoundary(e,n,r=!0){return pwe(this,e,n,r)}moveVertically(e,n,r){return R5(this,e,mwe(this,e,n,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),aZ(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let r=this.docView.coordsAt(e,n);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),o=this.bidiSpans(i),a=o[Ov.find(o,e-i.from,-1,n)];return ST(r,a.dir==di.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(XJ)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Jwe)return nZ(e.length);let n=this.textDirectionAt(e.from);for(let i of this.bidiCache)if(i.from==e.from&&i.dir==n)return i.order;let r=twe(e.text,n);return this.bidiCache.push(new l4(e.from,e.to,n,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Tt.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{IJ(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return Nz.of(new a4(typeof e=="number"?Ze.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}static domEventHandlers(e){return Mi.define(()=>({}),{eventHandlers:e})}static theme(e,n){let r=eh.newName(),i=[hw.of(r),xb.of(I8(`.${r}`,e))];return n&&n.dark&&i.push(E8.of(!0)),i}static baseTheme(e){return jg.lowest(xb.of(I8("."+O8,e,bZ)))}static findFromDOM(e){var n;let r=e.querySelector(".cm-content"),i=r&&Br.get(r)||Br.get(e);return((n=i==null?void 0:i.rootView)===null||n===void 0?void 0:n.view)||null}}bt.styleModule=xb;bt.inputHandler=YJ;bt.focusChangeEffect=KJ;bt.perLineTextDirection=XJ;bt.exceptionSink=qJ;bt.updateListener=w8;bt.editable=wT;bt.mouseSelectionStyle=GJ;bt.dragMovesSelection=WJ;bt.clickAddsSelectionRange=UJ;bt.decorations=z1;bt.atomicRanges=SI;bt.scrollMargins=QJ;bt.darkTheme=E8;bt.contentAttributes=bI;bt.editorAttributes=ZJ;bt.lineWrapping=bt.contentAttributes.of({class:"cm-lineWrapping"});bt.announce=cn.define();const Jwe=4096,rV={};class l4{constructor(e,n,r,i){this.from=e,this.to=n,this.dir=r,this.order=i}static update(e,n){if(n.empty)return e;let r=[],i=e.length?e[e.length-1].dir:di.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let a=e[o];a.dir==i&&!n.touchesRange(a.from,a.to)&&r.push(new l4(n.mapPos(a.from,1),n.mapPos(a.to,-1),a.dir,a.order))}return r}}function iV(t,e,n){for(let r=t.state.facet(e),i=r.length-1;i>=0;i--){let o=r[i],a=typeof o=="function"?o(t):o;a&&b8(a,n)}return n}const Zwe=Tt.mac?"mac":Tt.windows?"win":Tt.linux?"linux":"key";function Qwe(t,e){const n=t.split(/-(?!$)/);let r=n[n.length-1];r=="Space"&&(r=" ");let i,o,a,s;for(let l=0;l<n.length-1;++l){const c=n[l];if(/^(cmd|meta|m)$/i.test(c))s=!0;else if(/^a(lt)?$/i.test(c))i=!0;else if(/^(c|ctrl|control)$/i.test(c))o=!0;else if(/^s(hift)?$/i.test(c))a=!0;else if(/^mod$/i.test(c))e=="mac"?s=!0:o=!0;else throw new Error("Unrecognized modifier name: "+c)}return i&&(r="Alt-"+r),o&&(r="Ctrl-"+r),s&&(r="Meta-"+r),a&&(r="Shift-"+r),r}function pw(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const eke=jg.default(bt.domEventHandlers({keydown(t,e){return wZ(_Z(e.state),t,e,"editor")}})),tS=_t.define({enables:eke}),oV=new WeakMap;function _Z(t){let e=t.facet(tS),n=oV.get(e);return n||oV.set(e,n=rke(e.reduce((r,i)=>r.concat(i),[]))),n}function tke(t,e,n){return wZ(_Z(t.state),e,t,n)}let yd=null;const nke=4e3;function rke(t,e=Zwe){let n=Object.create(null),r=Object.create(null),i=(a,s)=>{let l=r[a];if(l==null)r[a]=s;else if(l!=s)throw new Error("Key binding "+a+" is used both as a regular binding and as a multi-stroke prefix")},o=(a,s,l,c,u)=>{var f,d;let h=n[a]||(n[a]=Object.create(null)),g=s.split(/ (?!$)/).map(v=>Qwe(v,e));for(let v=1;v<g.length;v++){let _=g.slice(0,v).join(" ");i(_,!0),h[_]||(h[_]={preventDefault:!0,stopPropagation:!1,run:[x=>{let C=yd={view:x,prefix:_,scope:a};return setTimeout(()=>{yd==C&&(yd=null)},nke),!0}]})}let y=g.join(" ");i(y,!1);let S=h[y]||(h[y]={preventDefault:!1,stopPropagation:!1,run:((d=(f=h._any)===null||f===void 0?void 0:f.run)===null||d===void 0?void 0:d.slice())||[]});l&&S.run.push(l),c&&(S.preventDefault=!0),u&&(S.stopPropagation=!0)};for(let a of t){let s=a.scope?a.scope.split(" "):["editor"];if(a.any)for(let c of s){let u=n[c]||(n[c]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let f in u)u[f].run.push(a.any)}let l=a[e]||a.key;if(l)for(let c of s)o(c,l,a.run,a.preventDefault,a.stopPropagation),a.shift&&o(c,"Shift-"+l,a.shift,a.preventDefault,a.stopPropagation)}return n}function wZ(t,e,n,r){let i=N_e(e),o=ko(i,0),a=_l(o)==i.length&&i!=" ",s="",l=!1,c=!1,u=!1;yd&&yd.view==n&&yd.scope==r&&(s=yd.prefix+" ",lZ.indexOf(e.keyCode)<0&&(c=!0,yd=null));let f=new Set,d=S=>{if(S){for(let v of S.run)if(!f.has(v)&&(f.add(v),v(n,e)))return S.stopPropagation&&(u=!0),!0;S.preventDefault&&(S.stopPropagation&&(u=!0),c=!0)}return!1},h=t[r],g,y;return h&&(d(h[s+pw(i,e,!a)])?l=!0:a&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Tt.windows&&e.ctrlKey&&e.altKey)&&(g=th[e.keyCode])&&g!=i?(d(h[s+pw(g,e,!0)])||e.shiftKey&&(y=R1[e.keyCode])!=i&&y!=g&&d(h[s+pw(y,e,!1)]))&&(l=!0):a&&e.shiftKey&&d(h[s+pw(i,e,!0)])&&(l=!0),!l&&d(h._any)&&(l=!0)),c&&(l=!0),l&&u&&e.stopPropagation(),l}class nS{constructor(e,n,r,i,o){this.className=e,this.left=n,this.top=r,this.width=i,this.height=o}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,r){if(r.empty){let i=e.coordsAtPos(r.head,r.assoc||1);if(!i)return[];let o=kZ(e);return[new nS(n,i.left-o.left,i.top-o.top,null,i.bottom-i.top)]}else return ike(e,n,r)}}function kZ(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==di.LTR?e.left:e.right-t.scrollDOM.clientWidth)-t.scrollDOM.scrollLeft,top:e.top-t.scrollDOM.scrollTop}}function aV(t,e,n){let r=Ze.cursor(e);return{from:Math.max(n.from,t.moveToLineBoundary(r,!1,!0).from),to:Math.min(n.to,t.moveToLineBoundary(r,!0,!0).from),type:pi.Text}}function ike(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let r=Math.max(n.from,t.viewport.from),i=Math.min(n.to,t.viewport.to),o=t.textDirection==di.LTR,a=t.contentDOM,s=a.getBoundingClientRect(),l=kZ(t),c=a.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),f=s.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),d=s.right-(u?parseInt(u.paddingRight):0),h=T8(t,r),g=T8(t,i),y=h.type==pi.Text?h:null,S=g.type==pi.Text?g:null;if(y&&(t.lineWrapping||h.widgetLineBreaks)&&(y=aV(t,r,y)),S&&(t.lineWrapping||g.widgetLineBreaks)&&(S=aV(t,i,S)),y&&S&&y.from==S.from)return _(x(n.from,n.to,y));{let k=y?x(n.from,null,y):C(h,!1),m=S?x(null,n.to,S):C(g,!0),T=[];return(y||h).to<(S||g).from-(y&&S?1:0)||h.widgetLineBreaks>1&&k.bottom+t.defaultLineHeight/2<m.top?T.push(v(f,k.bottom,d,m.top)):k.bottom<m.top&&t.elementAtHeight((k.bottom+m.top)/2).type==pi.Text&&(k.bottom=m.top=(k.bottom+m.top)/2),_(k).concat(T).concat(_(m))}function v(k,m,T,E){return new nS(e,k-l.left,m-l.top-.01,T-k,E-m+.01)}function _({top:k,bottom:m,horizontal:T}){let E=[];for(let I=0;I<T.length;I+=2)E.push(v(T[I],k,T[I+1],m));return E}function x(k,m,T){let E=1e9,I=-1e9,D=[];function F(B,ie,oe,_e,Ae){let Pe=t.coordsAtPos(B,B==T.to?-2:2),Se=t.coordsAtPos(oe,oe==T.from?2:-2);!Pe||!Se||(E=Math.min(Pe.top,Se.top,E),I=Math.max(Pe.bottom,Se.bottom,I),Ae==di.LTR?D.push(o&&ie?f:Pe.left,o&&_e?d:Se.right):D.push(!o&&_e?f:Se.left,!o&&ie?d:Pe.right))}let R=k??T.from,z=m??T.to;for(let B of t.visibleRanges)if(B.to>R&&B.from<z)for(let ie=Math.max(B.from,R),oe=Math.min(B.to,z);;){let _e=t.state.doc.lineAt(ie);for(let Ae of t.bidiSpans(_e)){let Pe=Ae.from+_e.from,Se=Ae.to+_e.from;if(Pe>=oe)break;Se>ie&&F(Math.max(Pe,ie),k==null&&Pe<=R,Math.min(Se,oe),m==null&&Se>=z,Ae.dir)}if(ie=_e.to+1,ie>=oe)break}return D.length==0&&F(R,k==null,z,m==null,t.textDirection),{top:E,bottom:I,horizontal:D}}function C(k,m){let T=s.top+(m?k.top:k.bottom);return{top:T,bottom:T,horizontal:[]}}}function oke(t,e){return t.constructor==e.constructor&&t.eq(e)}class ake{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(nx)!=e.state.facet(nx)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&e.view.requestMeasure(this.measureReq)}setOrder(e){let n=0,r=e.facet(nx);for(;n<r.length&&r[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}draw(e){if(e.length!=this.drawn.length||e.some((n,r)=>!oke(n,this.drawn[r]))){let n=this.dom.firstChild,r=0;for(let i of e)i.update&&n&&i.constructor&&this.drawn[r].constructor&&i.update(n,this.drawn[r])?(n=n.nextSibling,r++):this.dom.insertBefore(i.draw(),n);for(;n;){let i=n.nextSibling;n.remove(),n=i}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const nx=_t.define();function xZ(t){return[Mi.define(e=>new ake(e,t)),nx.of(t)]}const CZ=!Tt.ios,V1=_t.define({combine(t){return Sc(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function ske(t={}){return[V1.of(t),lke,cke,uke,JJ.of(!0)]}function TZ(t){return t.startState.facet(V1)!=t.state.facet(V1)}const lke=xZ({above:!0,markers(t){let{state:e}=t,n=e.facet(V1),r=[];for(let i of e.selection.ranges){let o=i==e.selection.main;if(i.empty?!o||CZ:n.drawRangeCursor){let a=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",s=i.empty?i:Ze.cursor(i.head,i.head>i.anchor?-1:1);for(let l of nS.forRange(t,a,s))r.push(l)}}return r},update(t,e){t.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=TZ(t);return n&&sV(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){sV(e.state,t)},class:"cm-cursorLayer"});function sV(t,e){e.style.animationDuration=t.facet(V1).cursorBlinkRate+"ms"}const cke=xZ({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:nS.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||TZ(t)},class:"cm-selectionLayer"}),AZ={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};CZ&&(AZ[".cm-line"].caretColor="transparent !important");const uke=jg.highest(bt.theme(AZ)),PZ=cn.define({map(t,e){return t==null?null:e.mapPos(t)}}),Tb=Hi.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((n,r)=>r.is(PZ)?r.value:n,t)}}),fke=Mi.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(Tb);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(Tb)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let t=this.view.state.field(Tb),e=t!=null&&this.view.coordsAtPos(t);if(!e)return null;let n=this.view.scrollDOM.getBoundingClientRect();return{left:e.left-n.left+this.view.scrollDOM.scrollLeft,top:e.top-n.top+this.view.scrollDOM.scrollTop,height:e.bottom-e.top}}drawCursor(t){this.cursor&&(t?(this.cursor.style.left=t.left+"px",this.cursor.style.top=t.top+"px",this.cursor.style.height=t.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(Tb)!=t&&this.view.dispatch({effects:PZ.of(t)})}},{eventHandlers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function dke(){return[Tb,fke]}function lV(t,e,n,r,i){e.lastIndex=0;for(let o=t.iterRange(n,r),a=n,s;!o.next().done;a+=o.value.length)if(!o.lineBreak)for(;s=e.exec(o.value);)i(a+s.index,s)}function hke(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let r=[];for(let{from:i,to:o}of n)i=Math.max(t.state.doc.lineAt(i).from,i-e),o=Math.min(t.state.doc.lineAt(o).to,o+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=o:r.push({from:i,to:o});return r}class pke{constructor(e){const{regexp:n,decoration:r,decorate:i,boundary:o,maxLength:a=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,i)this.addMatch=(s,l,c,u)=>i(u,c,c+s[0].length,s,l);else if(typeof r=="function")this.addMatch=(s,l,c,u)=>{let f=r(s,l,c);f&&u(c,c+s[0].length,f)};else if(r)this.addMatch=(s,l,c,u)=>u(c,c+s[0].length,r);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=o,this.maxLength=a}createDeco(e){let n=new Qd,r=n.add.bind(n);for(let{from:i,to:o}of hke(e,this.maxLength))lV(e.state.doc,this.regexp,i,o,(a,s)=>this.addMatch(s,e,a,r));return n.finish()}updateDeco(e,n){let r=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((o,a,s,l)=>{l>e.view.viewport.from&&s<e.view.viewport.to&&(r=Math.min(s,r),i=Math.max(l,i))}),e.viewportChanged||i-r>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,n.map(e.changes),r,i):n}updateRange(e,n,r,i){for(let o of e.visibleRanges){let a=Math.max(o.from,r),s=Math.min(o.to,i);if(s>a){let l=e.state.doc.lineAt(a),c=l.to<s?e.state.doc.lineAt(s):l,u=Math.max(o.from,l.from),f=Math.min(o.to,c.to);if(this.boundary){for(;a>l.from;a--)if(this.boundary.test(l.text[a-1-l.from])){u=a;break}for(;s<c.to;s++)if(this.boundary.test(c.text[s-c.from])){f=s;break}}let d=[],h,g=(y,S,v)=>d.push(v.range(y,S));if(l==c)for(this.regexp.lastIndex=u-l.from;(h=this.regexp.exec(l.text))&&h.index<f-l.from;)this.addMatch(h,e,h.index+l.from,g);else lV(e.state.doc,this.regexp,u,f,(y,S)=>this.addMatch(S,e,y,g));n=n.update({filterFrom:u,filterTo:f,filter:(y,S)=>y<u||S>f,add:d})}}return n}}const $8=/x/.unicode!=null?"gu":"g",gke=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,$8),mke={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let B5=null;function vke(){var t;if(B5==null&&typeof document<"u"&&document.body){let e=document.body.style;B5=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return B5||!1}const rx=_t.define({combine(t){let e=Sc(t,{render:null,specialChars:gke,addSpecialChars:null});return(e.replaceTabs=!vke())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,$8)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,$8)),e}});function yke(t={}){return[rx.of(t),bke()]}let cV=null;function bke(){return cV||(cV=Mi.fromClass(class{constructor(t){this.view=t,this.decorations=Ut.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(rx)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new pke({regexp:t.specialChars,decoration:(e,n,r)=>{let{doc:i}=n.state,o=ko(e[0],0);if(o==9){let a=i.lineAt(r),s=n.state.tabSize,l=Z2(a.text,s,r-a.from);return Ut.replace({widget:new kke((s-l%s)*this.view.defaultCharacterWidth)})}return this.decorationCache[o]||(this.decorationCache[o]=Ut.replace({widget:new wke(t,o)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(rx);t.startState.facet(rx)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const Ske="";function _ke(t){return t>=32?Ske:t==10?"":String.fromCharCode(9216+t)}class wke extends $f{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=_ke(this.code),r=e.state.phrase("Control character")+" "+(mke[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,n);if(i)return i;let o=document.createElement("span");return o.textContent=n,o.title=r,o.setAttribute("aria-label",r),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class kke extends $f{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function xke(){return Tke}const Cke=Ut.line({class:"cm-activeLine"}),Tke=Mi.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){let i=t.lineBlockAt(r.head);i.from>e&&(n.push(Cke.range(i.from)),e=i.from)}return Ut.set(n)}},{decorations:t=>t.decorations});class Ake extends $f{constructor(e){super(),this.content=e}toDOM(){let e=document.createElement("span");return e.className="cm-placeholder",e.style.pointerEvents="none",e.appendChild(typeof this.content=="string"?document.createTextNode(this.content):this.content),typeof this.content=="string"?e.setAttribute("aria-label","placeholder "+this.content):e.setAttribute("aria-hidden","true"),e}coordsAt(e){let n=e.firstChild?n0(e.firstChild):[];if(!n.length)return null;let r=window.getComputedStyle(e.parentNode),i=ST(n[0],r.direction!="rtl"),o=parseInt(r.lineHeight);return i.bottom-i.top>o*1.5?{left:i.left,right:i.right,top:i.top,bottom:i.top+o}:i}ignoreEvent(){return!1}}function Pke(t){return Mi.fromClass(class{constructor(e){this.view=e,this.placeholder=t?Ut.set([Ut.widget({widget:new Ake(t),side:1}).range(0)]):Ut.none}get decorations(){return this.view.state.doc.length?Ut.none:this.placeholder}},{decorations:e=>e.decorations})}const F8=2e3;function Eke(t,e,n){let r=Math.min(e.line,n.line),i=Math.max(e.line,n.line),o=[];if(e.off>F8||n.off>F8||e.col<0||n.col<0){let a=Math.min(e.off,n.off),s=Math.max(e.off,n.off);for(let l=r;l<=i;l++){let c=t.doc.line(l);c.length<=s&&o.push(Ze.range(c.from+a,c.to+s))}}else{let a=Math.min(e.col,n.col),s=Math.max(e.col,n.col);for(let l=r;l<=i;l++){let c=t.doc.line(l),u=d8(c.text,a,t.tabSize,!0);if(u<0)o.push(Ze.cursor(c.to));else{let f=d8(c.text,s,t.tabSize);o.push(Ze.range(c.from+u,c.from+f))}}}return o}function Oke(t,e){let n=t.coordsAtPos(t.viewport.from);return n?Math.round(Math.abs((n.left-e)/t.defaultCharacterWidth)):-1}function uV(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1),r=t.state.doc.lineAt(n),i=n-r.from,o=i>F8?-1:i==r.length?Oke(t,e.clientX):Z2(r.text,t.state.tabSize,n-r.from);return{line:r.number,col:o,off:i}}function Ike(t,e){let n=uV(t,e),r=t.state.selection;return n?{update(i){if(i.docChanged){let o=i.changes.mapPos(i.startState.doc.line(n.line).from),a=i.state.doc.lineAt(o);n={line:a.number,col:n.col,off:Math.min(n.off,a.length)},r=r.map(i.changes)}},get(i,o,a){let s=uV(t,i);if(!s)return r;let l=Eke(t.state,n,s);return l.length?a?Ze.create(l.concat(r.ranges)):Ze.create(l):r}}:null}function $ke(t){let e=(t==null?void 0:t.eventFilter)||(n=>n.altKey&&n.button==0);return bt.mouseSelectionStyle.of((n,r)=>e(r)?Ike(n,r):null)}const Fke={Alt:[18,t=>!!t.altKey],Control:[17,t=>!!t.ctrlKey],Shift:[16,t=>!!t.shiftKey],Meta:[91,t=>!!t.metaKey]},Lke={style:"cursor: crosshair"};function Dke(t={}){let[e,n]=Fke[t.key||"Alt"],r=Mi.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventHandlers:{keydown(i){this.set(i.keyCode==e||n(i))},keyup(i){(i.keyCode==e||!n(i))&&this.set(!1)},mousemove(i){this.set(n(i))}}});return[r,bt.contentAttributes.of(i=>{var o;return!((o=i.plugin(r))===null||o===void 0)&&o.isDown?Lke:null})]}const gw="-10000px";class EZ{constructor(e,n,r){this.facet=n,this.createTooltipView=r,this.input=e.state.facet(n),this.tooltips=this.input.filter(i=>i),this.tooltipViews=this.tooltips.map(r)}update(e){var n;let r=e.state.facet(this.facet),i=r.filter(a=>a);if(r===this.input){for(let a of this.tooltipViews)a.update&&a.update(e);return!1}let o=[];for(let a=0;a<i.length;a++){let s=i[a],l=-1;if(s){for(let c=0;c<this.tooltips.length;c++){let u=this.tooltips[c];u&&u.create==s.create&&(l=c)}if(l<0)o[a]=this.createTooltipView(s);else{let c=o[a]=this.tooltipViews[l];c.update&&c.update(e)}}}for(let a of this.tooltipViews)o.indexOf(a)<0&&(a.dom.remove(),(n=a.destroy)===null||n===void 0||n.call(a));return this.input=r,this.tooltips=i,this.tooltipViews=o,!0}}function Nke(t){let{win:e}=t;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const j5=_t.define({combine:t=>{var e,n,r;return{position:Tt.ios?"absolute":((e=t.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(i=>i.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((r=t.find(i=>i.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||Nke}}}),fV=new WeakMap,OZ=Mi.fromClass(class{constructor(t){this.view=t,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(j5);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new EZ(t,kT,n=>this.createTooltip(n)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t);e&&this.observeIntersection();let n=e||t.geometryChanged,r=t.state.facet(j5);if(r.position!=this.position){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t){let e=t.create(this.view);if(e.dom.classList.add("cm-tooltip"),t.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let n=document.createElement("div");n.className="cm-tooltip-arrow",e.dom.appendChild(n)}return e.dom.style.position=this.position,e.dom.style.top=gw,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var t,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),(t=n.destroy)===null||t===void 0||t.call(n);(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=this.view.dom.getBoundingClientRect();return{editor:t,parent:this.parent?this.container.getBoundingClientRect():t,pos:this.manager.tooltips.map((e,n)=>{let r=this.manager.tooltipViews[n];return r.getCoords?r.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(j5).tooltipSpace(this.view)}}writeMeasure(t){var e;let{editor:n,space:r}=t,i=[];for(let o=0;o<this.manager.tooltips.length;o++){let a=this.manager.tooltips[o],s=this.manager.tooltipViews[o],{dom:l}=s,c=t.pos[o],u=t.size[o];if(!c||c.bottom<=Math.max(n.top,r.top)||c.top>=Math.min(n.bottom,r.bottom)||c.right<Math.max(n.left,r.left)-.1||c.left>Math.min(n.right,r.right)+.1){l.style.top=gw;continue}let f=a.arrow?s.dom.querySelector(".cm-tooltip-arrow"):null,d=f?7:0,h=u.right-u.left,g=(e=fV.get(s))!==null&&e!==void 0?e:u.bottom-u.top,y=s.offset||Rke,S=this.view.textDirection==di.LTR,v=u.width>r.right-r.left?S?r.left:r.right-u.width:S?Math.min(c.left-(f?14:0)+y.x,r.right-h):Math.max(r.left,c.left-h+(f?14:0)-y.x),_=!!a.above;!a.strictSide&&(_?c.top-(u.bottom-u.top)-y.y<r.top:c.bottom+(u.bottom-u.top)+y.y>r.bottom)&&_==r.bottom-c.bottom>c.top-r.top&&(_=!_);let x=(_?c.top-r.top:r.bottom-c.bottom)-d;if(x<g&&s.resize!==!1){if(x<this.view.defaultLineHeight){l.style.top=gw;continue}fV.set(s,g),l.style.height=(g=x)+"px"}else l.style.height&&(l.style.height="");let C=_?c.top-g-d-y.y:c.bottom+d+y.y,k=v+h;if(s.overlap!==!0)for(let m of i)m.left<k&&m.right>v&&m.top<C+g&&m.bottom>C&&(C=_?m.top-g-2-d:m.bottom+d+2);this.position=="absolute"?(l.style.top=C-t.parent.top+"px",l.style.left=v-t.parent.left+"px"):(l.style.top=C+"px",l.style.left=v+"px"),f&&(f.style.left=`${c.left+(S?y.x:-y.x)-(v+14-7)}px`),s.overlap!==!0&&i.push({left:v,top:C,right:k,bottom:C+g}),l.classList.toggle("cm-tooltip-above",_),l.classList.toggle("cm-tooltip-below",!_),s.positioned&&s.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=gw}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),Mke=bt.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),Rke={x:0,y:0},kT=_t.define({enables:[OZ,Mke]}),c4=_t.define();class wI{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new EZ(e,c4,n=>this.createHostedView(n))}static create(e){return new wI(e)}createHostedView(e){let n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(n.dom),this.mounted&&n.mount&&n.mount(this.view),n}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}}const zke=kT.compute([c4],t=>{let e=t.facet(c4).filter(n=>n);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.filter(n=>n.end!=null).map(n=>n.end)),create:wI.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class Vke{constructor(e,n,r,i,o){this.view=e,this.source=n,this.field=r,this.setHover=i,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,n=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(n==null)return;let r=this.view.coordsAtPos(n);if(r==null||e.y<r.top||e.y>r.bottom||e.x<r.left-this.view.defaultCharacterWidth||e.x>r.right+this.view.defaultCharacterWidth)return;let i=this.view.bidiSpans(this.view.state.doc.lineAt(n)).find(s=>s.from<=n&&s.to>=n),o=i&&i.dir==di.RTL?-1:1,a=this.source(this.view,n,e.x<r.left?-o:o);if(a!=null&&a.then){let s=this.pending={pos:n};a.then(l=>{this.pending==s&&(this.pending=null,l&&this.view.dispatch({effects:this.setHover.of(l)}))},l=>Vs(this.view.state,l,"hover tooltip"))}else a&&this.view.dispatch({effects:this.setHover.of(a)})}mousemove(e){var n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let r=this.active;if(r&&!dV(this.lastMove.target)||this.pending){let{pos:i}=r||this.pending,o=(n=r==null?void 0:r.end)!==null&&n!==void 0?n:i;(i==o?this.view.posAtCoords(this.lastMove)!=i:!Bke(this.view,i,o,e.clientX,e.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!dV(e.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function dV(t){for(let e=t;e;e=e.parentNode)if(e.nodeType==1&&e.classList.contains("cm-tooltip"))return!0;return!1}function Bke(t,e,n,r,i,o){let a=document.createRange(),s=t.domAtPos(e),l=t.domAtPos(n);a.setEnd(l.node,l.offset),a.setStart(s.node,s.offset);let c=a.getClientRects();a.detach();for(let u=0;u<c.length;u++){let f=c[u];if(Math.max(f.top-i,i-f.bottom,f.left-r,r-f.right)<=o)return!0}return!1}function IZ(t,e={}){let n=cn.define(),r=Hi.define({create(){return null},update(i,o){if(i&&(e.hideOnChange&&(o.docChanged||o.selection)||e.hideOn&&e.hideOn(o,i)))return null;if(i&&o.docChanged){let a=o.changes.mapPos(i.pos,-1,To.TrackDel);if(a==null)return null;let s=Object.assign(Object.create(null),i);s.pos=a,i.end!=null&&(s.end=o.changes.mapPos(i.end)),i=s}for(let a of o.effects)a.is(n)&&(i=a.value),a.is(jke)&&(i=null);return i},provide:i=>c4.from(i)});return[r,Mi.define(i=>new Vke(i,t,r,n,e.hoverTime||300)),zke]}function $Z(t,e){let n=t.plugin(OZ);if(!n)return null;let r=n.manager.tooltips.indexOf(e);return r<0?null:n.manager.tooltipViews[r]}const jke=cn.define(),hV=_t.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function B1(t,e){let n=t.plugin(FZ),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}const FZ=Mi.fromClass(class{constructor(t){this.input=t.state.facet(j1),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(hV);this.top=new mw(t,!0,e.topContainer),this.bottom=new mw(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(hV);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new mw(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new mw(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(j1);if(n!=this.input){let r=n.filter(l=>l),i=[],o=[],a=[],s=[];for(let l of r){let c=this.specs.indexOf(l),u;c<0?(u=l(t.view),s.push(u)):(u=this.panels[c],u.update&&u.update(t)),i.push(u),(u.top?o:a).push(u)}this.specs=r,this.panels=i,this.top.sync(o),this.bottom.sync(a);for(let l of s)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let r of this.panels)r.update&&r.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>bt.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class mw{constructor(e,n,r){this.view=e,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=pV(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=pV(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function pV(t){let e=t.nextSibling;return t.remove(),e}const j1=_t.define({enables:FZ});class vu extends _g{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}vu.prototype.elementClass="";vu.prototype.toDOM=void 0;vu.prototype.mapMode=To.TrackBefore;vu.prototype.startSide=vu.prototype.endSide=-1;vu.prototype.point=!0;const ix=_t.define(),Hke={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>ar.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Zb=_t.define();function xT(t){return[LZ(),Zb.of(Object.assign(Object.assign({},Hke),t))]}const L8=_t.define({combine:t=>t.some(e=>e)});function LZ(t){let e=[Uke];return t&&t.fixed===!1&&e.push(L8.of(!0)),e}const Uke=Mi.fromClass(class{constructor(t){this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=t.state.facet(Zb).map(e=>new mV(t,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!t.state.facet(L8),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}t.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(L8)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&this.dom.remove();let n=ar.iter(this.view.state.facet(ix),this.view.viewport.from),r=[],i=this.gutters.map(o=>new Wke(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(o.type)){let a=!0;for(let s of o.type)if(s.type==pi.Text&&a){D8(n,r,s.from);for(let l of i)l.line(this.view,s,r);a=!1}else if(s.widget)for(let l of i)l.widget(this.view,s)}else if(o.type==pi.Text){D8(n,r,o.from);for(let a of i)a.line(this.view,o,r)}for(let o of i)o.finish();t&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(t){let e=t.startState.facet(Zb),n=t.state.facet(Zb),r=t.docChanged||t.heightChanged||t.viewportChanged||!ar.eq(t.startState.facet(ix),t.state.facet(ix),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let i of this.gutters)i.update(t)&&(r=!0);else{r=!0;let i=[];for(let o of n){let a=e.indexOf(o);a<0?i.push(new mV(this.view,o)):(this.gutters[a].update(t),i.push(this.gutters[a]))}for(let o of this.gutters)o.dom.remove(),i.indexOf(o)<0&&o.destroy();for(let o of i)this.dom.appendChild(o.dom);this.gutters=i}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove()}},{provide:t=>bt.scrollMargins.of(e=>{let n=e.plugin(t);return!n||n.gutters.length==0||!n.fixed?null:e.textDirection==di.LTR?{left:n.dom.offsetWidth}:{right:n.dom.offsetWidth}})});function gV(t){return Array.isArray(t)?t:[t]}function D8(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class Wke{constructor(e,n,r){this.gutter=e,this.height=r,this.i=0,this.cursor=ar.iter(e.markers,n.from)}addElement(e,n,r){let{gutter:i}=this,o=n.top-this.height;if(this.i==i.elements.length){let a=new DZ(e,n.height,o,r);i.elements.push(a),i.dom.appendChild(a.dom)}else i.elements[this.i].update(e,n.height,o,r);this.height=n.bottom,this.i++}line(e,n,r){let i=[];D8(this.cursor,i,n.from),r.length&&(i=i.concat(r));let o=this.gutter.config.lineMarker(e,n,i);o&&i.unshift(o);let a=this.gutter;i.length==0&&!a.config.renderEmptyElements||this.addElement(e,n,i)}widget(e,n){let r=this.gutter.config.widgetMarker(e,n.widget,n);r&&this.addElement(e,n,[r])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class mV{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in n.domEventHandlers)this.dom.addEventListener(r,i=>{let o=i.target,a;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let l=o.getBoundingClientRect();a=(l.top+l.bottom)/2}else a=i.clientY;let s=e.lineBlockAtHeight(a-e.documentTop);n.domEventHandlers[r](e,s,i)&&i.preventDefault()});this.markers=gV(n.markers(e)),n.initialSpacer&&(this.spacer=new DZ(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=gV(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!ar.eq(this.markers,n,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class DZ{constructor(e,n,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,r,i)}update(e,n,r,i){this.height!=n&&(this.dom.style.height=(this.height=n)+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),Gke(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,n){let r="cm-gutterElement",i=this.dom.firstChild;for(let o=0,a=0;;){let s=a,l=o<n.length?n[o++]:null,c=!1;if(l){let u=l.elementClass;u&&(r+=" "+u);for(let f=a;f<this.markers.length;f++)if(this.markers[f].compare(l)){s=f,c=!0;break}}else s=this.markers.length;for(;a<s;){let u=this.markers[a++];if(u.toDOM){u.destroy(i);let f=i.nextSibling;i.remove(),i=f}}if(!l)break;l.toDOM&&(c?i=i.nextSibling:this.dom.insertBefore(l.toDOM(e),i)),c&&a++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}}function Gke(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const qke=_t.define(),sv=_t.define({combine(t){return Sc(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let r=Object.assign({},e);for(let i in n){let o=r[i],a=n[i];r[i]=o?(s,l,c)=>o(s,l,c)||a(s,l,c):a}return r}})}});class H5 extends vu{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function U5(t,e){return t.state.facet(sv).formatNumber(e,t.state)}const Yke=Zb.compute([sv],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(qke)},lineMarker(e,n,r){return r.some(i=>i.toDOM)?null:new H5(U5(e,e.state.doc.lineAt(n.from).number))},widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(sv)!=e.state.facet(sv),initialSpacer(e){return new H5(U5(e,vV(e.state.doc.lines)))},updateSpacer(e,n){let r=U5(n.view,vV(n.view.state.doc.lines));return r==e.number?e:new H5(r)},domEventHandlers:t.facet(sv).domEventHandlers}));function kI(t={}){return[sv.of(t),LZ(),Yke]}function vV(t){let e=9;for(;e<t;)e=e*10+9;return e}const Kke=new class extends vu{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},Xke=ix.compute(["selection"],t=>{let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.head).from;i>n&&(n=i,e.push(Kke.range(i)))}return ar.of(e)});function Jke(){return Xke}const NZ=1024;let Zke=0;class W5{constructor(e,n){this.from=e,this.to=n}}class En{constructor(e={}){this.id=Zke++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=fs.match(e)),n=>{let r=e(n);return r===void 0?null:[this,r]}}}En.closedBy=new En({deserialize:t=>t.split(" ")});En.openedBy=new En({deserialize:t=>t.split(" ")});En.group=new En({deserialize:t=>t.split(" ")});En.contextHash=new En({perNode:!0});En.lookAhead=new En({perNode:!0});En.mounted=new En({perNode:!0});const Qke=Object.create(null);class fs{constructor(e,n,r,i=0){this.name=e,this.props=n,this.id=r,this.flags=i}static define(e){let n=e.props&&e.props.length?Object.create(null):Qke,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new fs(e.name||"",n,e.id,r);if(e.props){for(let o of e.props)if(Array.isArray(o)||(o=o(i)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[o[0].id]=o[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(En.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let i of r.split(" "))n[i]=e[r];return r=>{for(let i=r.prop(En.group),o=-1;o<(i?i.length:0);o++){let a=n[o<0?r.name:i[o]];if(a)return a}}}}fs.none=new fs("",Object.create(null),0,8);class xI{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let r of this.types){let i=null;for(let o of e){let a=o(r);a&&(i||(i=Object.assign({},r.props)),i[a[0].id]=a[1])}n.push(i?new fs(r.name,i,r.id,r.flags):r)}return new xI(n)}}const vw=new WeakMap,yV=new WeakMap;var so;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(so||(so={}));let Po=class N8{constructor(e,n,r,i,o){if(this.type=e,this.children=n,this.positions=r,this.length=i,this.props=null,o&&o.length){this.props=Object.create(null);for(let[a,s]of o)this.props[typeof a=="number"?a:a.id]=s}}toString(){let e=this.prop(En.mounted);if(e&&!e.overlay)return e.tree.toString();let n="";for(let r of this.children){let i=r.toString();i&&(n&&(n+=","),n+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new d4(this.topNode,e)}cursorAt(e,n=0,r=0){let i=vw.get(this)||this.topNode,o=new d4(i);return o.moveTo(e,n),vw.set(this,o._tree),o}get topNode(){return new H1(this,0,0,null)}resolve(e,n=0){let r=i0(vw.get(this)||this.topNode,e,n,!1);return vw.set(this,r),r}resolveInner(e,n=0){let r=i0(yV.get(this)||this.topNode,e,n,!0);return yV.set(this,r),r}iterate(e){let{enter:n,leave:r,from:i=0,to:o=this.length}=e,a=e.mode||0,s=(a&so.IncludeAnonymous)>0;for(let l=this.cursor(a|so.IncludeAnonymous);;){let c=!1;if(l.from<=o&&l.to>=i&&(!s&&l.type.isAnonymous||n(l)!==!1)){if(l.firstChild())continue;c=!0}for(;c&&r&&(s||!l.type.isAnonymous)&&r(l),!l.nextSibling();){if(!l.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:AI(fs.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,i)=>new N8(this.type,n,r,i,this.propValues),e.makeTree||((n,r,i)=>new N8(fs.none,n,r,i)))}static build(e){return txe(e)}};Po.empty=new Po(fs.none,[],[],0);class CI{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new CI(this.buffer,this.index)}}class Hg{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return fs.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],i=this.set.types[n],o=i.name;if(/\W/.test(o)&&!i.isError&&(o=JSON.stringify(o)),e+=4,r==e)return o;let a=[];for(;e<r;)a.push(this.childString(e)),e=this.buffer[e+3];return o+"("+a.join(",")+")"}findChild(e,n,r,i,o){let{buffer:a}=this,s=-1;for(let l=e;l!=n&&!(MZ(o,i,a[l+1],a[l+2])&&(s=l,r>0));l=a[l+3]);return s}slice(e,n,r){let i=this.buffer,o=new Uint16Array(n-e),a=0;for(let s=e,l=0;s<n;){o[l++]=i[s++],o[l++]=i[s++]-r;let c=o[l++]=i[s++]-r;o[l++]=i[s++]-e,a=Math.max(a,c)}return new Hg(o,a,this.set)}}function MZ(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function RZ(t,e){let n=t.childBefore(e);for(;n;){let r=n.lastChild;if(!r||r.to!=n.to)break;r.type.isError&&r.from==r.to?(t=n,n=r.prevSibling):n=r}return t}function i0(t,e,n,r){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let a=!r&&t instanceof H1&&t.index<0?null:t.parent;if(!a)return t;t=a}let o=r?0:so.IgnoreOverlays;if(r)for(let a=t,s=a.parent;s;a=s,s=a.parent)a instanceof H1&&a.index<0&&((i=s.enter(e,n,o))===null||i===void 0?void 0:i.from)!=a.from&&(t=s);for(;;){let a=t.enter(e,n,o);if(!a)return t;t=a}}let H1=class ox{constructor(e,n,r,i){this._tree=e,this.from=n,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,i,o=0){for(let a=this;;){for(let{children:s,positions:l}=a._tree,c=n>0?s.length:-1;e!=c;e+=n){let u=s[e],f=l[e]+a.from;if(MZ(i,r,f,f+u.length)){if(u instanceof Hg){if(o&so.ExcludeBuffers)continue;let d=u.findChild(0,u.buffer.length,n,r-f,i);if(d>-1)return new wd(new exe(a,u,e,f),null,d)}else if(o&so.IncludeAnonymous||!u.type.isAnonymous||TI(u)){let d;if(!(o&so.IgnoreMounts)&&u.props&&(d=u.prop(En.mounted))&&!d.overlay)return new ox(d.tree,f,e,a);let h=new ox(u,f,e,a);return o&so.IncludeAnonymous||!h.type.isAnonymous?h:h.nextChild(n<0?u.children.length-1:0,n,r,i)}}}if(o&so.IncludeAnonymous||!a.type.isAnonymous||(a.index>=0?e=a.index+n:e=n<0?-1:a._parent._tree.children.length,a=a._parent,!a))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,r=0){let i;if(!(r&so.IgnoreOverlays)&&(i=this._tree.prop(En.mounted))&&i.overlay){let o=e-this.from;for(let{from:a,to:s}of i.overlay)if((n>0?a<=o:a<o)&&(n<0?s>=o:s>o))return new ox(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new d4(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,n=0){return i0(this,e,n,!1)}resolveInner(e,n=0){return i0(this,e,n,!0)}enterUnfinishedNodesBefore(e){return RZ(this,e)}getChild(e,n=null,r=null){let i=u4(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return u4(this,e,n,r)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return f4(this,e)}};function u4(t,e,n,r){let i=t.cursor(),o=[];if(!i.firstChild())return o;if(n!=null){for(;!i.type.is(n);)if(!i.nextSibling())return o}for(;;){if(r!=null&&i.type.is(r))return o;if(i.type.is(e)&&o.push(i.node),!i.nextSibling())return r==null?o:[]}}function f4(t,e,n=e.length-1){for(let r=t.parent;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}class exe{constructor(e,n,r,i){this.parent=e,this.buffer=n,this.index=r,this.start=i}}class wd{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,r){this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,n,r){let{buffer:i}=this.context,o=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.context.start,r);return o<0?null:new wd(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,r=0){if(r&so.ExcludeBuffers)return null;let{buffer:i}=this.context,o=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return o<0?null:new wd(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new wd(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new wd(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}cursor(e=0){return new d4(this,e)}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,i=this.index+4,o=r.buffer[this.index+3];if(o>i){let a=r.buffer[this.index+1];e.push(r.slice(i,o,a)),n.push(0)}return new Po(this.type,e,n,this.to-this.from)}resolve(e,n=0){return i0(this,e,n,!1)}resolveInner(e,n=0){return i0(this,e,n,!0)}enterUnfinishedNodesBefore(e){return RZ(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,n=null,r=null){let i=u4(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return u4(this,e,n,r)}get node(){return this}matchContext(e){return f4(this,e)}}class d4{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof H1)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=n||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof H1?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:i}=this.buffer,o=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.buffer.start,r);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?r&so.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&so.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&so.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(n.findChild(i,this.index,-1,0,4))}else{let i=n.buffer[this.index+3];if(i<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(i.buffer.buffer[o+3]<this.index)return!1;({index:n,parent:r}=i)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let o=n+e,a=e<0?-1:r._tree.children.length;o!=a;o+=e){let s=r._tree.children[o];if(this.mode&so.IncludeAnonymous||s instanceof Hg||!s.type.isAnonymous||TI(s))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,o=this.stack.length;o>=0;){for(let a=e;a;a=a._parent)if(a.index==i){if(i==this.index)return a;n=a,r=o+1;break e}i=this.stack[--o]}for(let i=r;i<this.stack.length;i++)n=new wd(this.buffer,n,this.stack[i]);return this.bufferNode=new wd(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;i&&n&&n(this),i=this.type.isAnonymous,!this.nextSibling();){if(!r)return;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return f4(this.node,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let i=e.length-1,o=this.stack.length-1;i>=0;o--){if(o<0)return f4(this.node,e,i);let a=r[n.buffer[this.stack[o]]];if(!a.isAnonymous){if(e[i]&&e[i]!=a.name)return!1;i--}}return!0}}function TI(t){return t.children.some(e=>e instanceof Hg||!e.type.isAnonymous||TI(e))}function txe(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:i=NZ,reused:o=[],minRepeatType:a=r.types.length}=t,s=Array.isArray(n)?new CI(n,n.length):n,l=r.types,c=0,u=0;function f(C,k,m,T,E){let{id:I,start:D,end:F,size:R}=s,z=u;for(;R<0;)if(s.next(),R==-1){let Ae=o[I];m.push(Ae),T.push(D-C);return}else if(R==-3){c=I;return}else if(R==-4){u=I;return}else throw new RangeError(`Unrecognized record size: ${R}`);let B=l[I],ie,oe,_e=D-C;if(F-D<=i&&(oe=y(s.pos-k,E))){let Ae=new Uint16Array(oe.size-oe.skip),Pe=s.pos-oe.size,Se=Ae.length;for(;s.pos>Pe;)Se=S(oe.start,Ae,Se);ie=new Hg(Ae,F-oe.start,r),_e=oe.start-C}else{let Ae=s.pos-R;s.next();let Pe=[],Se=[],se=I>=a?I:-1,ne=0,J=F;for(;s.pos>Ae;)se>=0&&s.id==se&&s.size>=0?(s.end<=J-i&&(h(Pe,Se,D,ne,s.end,J,se,z),ne=Pe.length,J=s.end),s.next()):f(D,Ae,Pe,Se,se);if(se>=0&&ne>0&&ne<Pe.length&&h(Pe,Se,D,ne,D,J,se,z),Pe.reverse(),Se.reverse(),se>-1&&ne>0){let V=d(B);ie=AI(B,Pe,Se,0,Pe.length,0,F-D,V,V)}else ie=g(B,Pe,Se,F-D,z-F)}m.push(ie),T.push(_e)}function d(C){return(k,m,T)=>{let E=0,I=k.length-1,D,F;if(I>=0&&(D=k[I])instanceof Po){if(!I&&D.type==C&&D.length==T)return D;(F=D.prop(En.lookAhead))&&(E=m[I]+D.length+F)}return g(C,k,m,T,E)}}function h(C,k,m,T,E,I,D,F){let R=[],z=[];for(;C.length>T;)R.push(C.pop()),z.push(k.pop()+m-E);C.push(g(r.types[D],R,z,I-E,F-I)),k.push(E-m)}function g(C,k,m,T,E=0,I){if(c){let D=[En.contextHash,c];I=I?[D].concat(I):[D]}if(E>25){let D=[En.lookAhead,E];I=I?[D].concat(I):[D]}return new Po(C,k,m,T,I)}function y(C,k){let m=s.fork(),T=0,E=0,I=0,D=m.end-i,F={size:0,start:0,skip:0};e:for(let R=m.pos-C;m.pos>R;){let z=m.size;if(m.id==k&&z>=0){F.size=T,F.start=E,F.skip=I,I+=4,T+=4,m.next();continue}let B=m.pos-z;if(z<0||B<R||m.start<D)break;let ie=m.id>=a?4:0,oe=m.start;for(m.next();m.pos>B;){if(m.size<0)if(m.size==-3)ie+=4;else break e;else m.id>=a&&(ie+=4);m.next()}E=oe,T+=z,I+=ie}return(k<0||T==C)&&(F.size=T,F.start=E,F.skip=I),F.size>4?F:void 0}function S(C,k,m){let{id:T,start:E,end:I,size:D}=s;if(s.next(),D>=0&&T<a){let F=m;if(D>4){let R=s.pos-(D-4);for(;s.pos>R;)m=S(C,k,m)}k[--m]=F,k[--m]=I-C,k[--m]=E-C,k[--m]=T}else D==-3?c=T:D==-4&&(u=T);return m}let v=[],_=[];for(;s.pos>0;)f(t.start||0,t.bufferStart||0,v,_,-1);let x=(e=t.length)!==null&&e!==void 0?e:v.length?_[0]+v[0].length:0;return new Po(l[t.topID],v.reverse(),_.reverse(),x)}const bV=new WeakMap;function ax(t,e){if(!t.isAnonymous||e instanceof Hg||e.type!=t)return 1;let n=bV.get(e);if(n==null){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof Po)){n=1;break}n+=ax(t,r)}bV.set(e,n)}return n}function AI(t,e,n,r,i,o,a,s,l){let c=0;for(let g=r;g<i;g++)c+=ax(t,e[g]);let u=Math.ceil(c*1.5/8),f=[],d=[];function h(g,y,S,v,_){for(let x=S;x<v;){let C=x,k=y[x],m=ax(t,g[x]);for(x++;x<v;x++){let T=ax(t,g[x]);if(m+T>=u)break;m+=T}if(x==C+1){if(m>u){let T=g[C];h(T.children,T.positions,0,T.children.length,y[C]+_);continue}f.push(g[C])}else{let T=y[x-1]+g[x-1].length-k;f.push(AI(t,g,y,C,x,k,T,null,l))}d.push(k+_-o)}}return h(e,n,r,i,0),(s||l)(f,d,a)}class og{constructor(e,n,r,i,o=!1,a=!1){this.from=e,this.to=n,this.tree=r,this.offset=i,this.open=(o?1:0)|(a?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],r=!1){let i=[new og(0,e.length,e,0,!1,r)];for(let o of n)o.to>e.length&&i.push(o);return i}static applyChanges(e,n,r=128){if(!n.length)return e;let i=[],o=1,a=e.length?e[0]:null;for(let s=0,l=0,c=0;;s++){let u=s<n.length?n[s]:null,f=u?u.fromA:1e9;if(f-l>=r)for(;a&&a.from<f;){let d=a;if(l>=d.from||f<=d.to||c){let h=Math.max(d.from,l)-c,g=Math.min(d.to,f)-c;d=h>=g?null:new og(h,g,d.tree,d.offset+c,s>0,!!u)}if(d&&i.push(d),a.to>f)break;a=o<e.length?e[o++]:null}if(!u)break;l=u.toA,c=u.toA-u.toB}return i}}let zZ=class{startParse(e,n,r){return typeof e=="string"&&(e=new nxe(e)),r=r?r.length?r.map(i=>new W5(i.from,i.to)):[new W5(0,0)]:[new W5(0,e.length)],this.createParse(e,n||[],r)}parse(e,n,r){let i=this.startParse(e,n,r);for(;;){let o=i.advance();if(o)return o}}};class nxe{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new En({perNode:!0});let rxe=0;class Kc{constructor(e,n,r){this.set=e,this.base=n,this.modified=r,this.id=rxe++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let n=new Kc([],null,[]);if(n.set.push(n),e)for(let r of e.set)n.set.push(r);return n}static defineModifier(){let e=new h4;return n=>n.modified.indexOf(e)>-1?n:h4.get(n.base||n,n.modified.concat(e).sort((r,i)=>r.id-i.id))}}let ixe=0;class h4{constructor(){this.instances=[],this.id=ixe++}static get(e,n){if(!n.length)return e;let r=n[0].instances.find(s=>s.base==e&&oxe(n,s.modified));if(r)return r;let i=[],o=new Kc(i,e,n);for(let s of n)s.instances.push(o);let a=axe(n);for(let s of e.set)if(!s.modified.length)for(let l of a)i.push(h4.get(s,l));return o}}function oxe(t,e){return t.length==e.length&&t.every((n,r)=>n==e[r])}function axe(t){let e=[[]];for(let n=0;n<t.length;n++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(t[n]));return e.sort((n,r)=>r.length-n.length)}function VZ(t){let e=Object.create(null);for(let n in t){let r=t[n];Array.isArray(r)||(r=[r]);for(let i of n.split(" "))if(i){let o=[],a=2,s=i;for(let f=0;;){if(s=="..."&&f>0&&f+3==i.length){a=1;break}let d=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(s);if(!d)throw new RangeError("Invalid path: "+i);if(o.push(d[0]=="*"?"":d[0][0]=='"'?JSON.parse(d[0]):d[0]),f+=d[0].length,f==i.length)break;let h=i[f++];if(f==i.length&&h=="!"){a=0;break}if(h!="/")throw new RangeError("Invalid path: "+i);s=i.slice(f)}let l=o.length-1,c=o[l];if(!c)throw new RangeError("Invalid path: "+i);let u=new p4(r,a,l>0?o.slice(0,l):null);e[c]=u.sort(e[c])}}return BZ.add(e)}const BZ=new En;class p4{constructor(e,n,r,i){this.tags=e,this.mode=n,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}p4.empty=new p4([],2,null);function jZ(t,e){let n=Object.create(null);for(let o of t)if(!Array.isArray(o.tag))n[o.tag.id]=o.class;else for(let a of o.tag)n[a.id]=o.class;let{scope:r,all:i=null}=e||{};return{style:o=>{let a=i;for(let s of o)for(let l of s.set){let c=n[l.id];if(c){a=a?a+" "+c:c;break}}return a},scope:r}}function sxe(t,e){let n=null;for(let r of t){let i=r.style(e);i&&(n=n?n+" "+i:i)}return n}function lxe(t,e,n,r=0,i=t.length){let o=new cxe(r,Array.isArray(e)?e:[e],n);o.highlightRange(t.cursor(),r,i,"",o.highlighters),o.flush(i)}class cxe{constructor(e,n,r){this.at=e,this.highlighters=n,this.span=r,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,r,i,o){let{type:a,from:s,to:l}=e;if(s>=r||l<=n)return;a.isTop&&(o=this.highlighters.filter(h=>!h.scope||h.scope(a)));let c=i,u=uxe(e)||p4.empty,f=sxe(o,u.tags);if(f&&(c&&(c+=" "),c+=f,u.mode==1&&(i+=(i?" ":"")+f)),this.startSpan(e.from,c),u.opaque)return;let d=e.tree&&e.tree.prop(En.mounted);if(d&&d.overlay){let h=e.node.enter(d.overlay[0].from+s,1),g=this.highlighters.filter(S=>!S.scope||S.scope(d.tree.type)),y=e.firstChild();for(let S=0,v=s;;S++){let _=S<d.overlay.length?d.overlay[S]:null,x=_?_.from+s:l,C=Math.max(n,v),k=Math.min(r,x);if(C<k&&y)for(;e.from<k&&(this.highlightRange(e,C,k,i,o),this.startSpan(Math.min(k,e.to),c),!(e.to>=x||!e.nextSibling())););if(!_||x>r)break;v=_.to+s,v>n&&(this.highlightRange(h.cursor(),Math.max(n,_.from+s),Math.min(r,v),i,g),this.startSpan(v,c))}y&&e.parent()}else if(e.firstChild()){do if(!(e.to<=n)){if(e.from>=r)break;this.highlightRange(e,n,r,i,o),this.startSpan(Math.min(r,e.to),c)}while(e.nextSibling());e.parent()}}}function uxe(t){let e=t.type.prop(BZ);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const ft=Kc.define,yw=ft(),gd=ft(),SV=ft(gd),_V=ft(gd),md=ft(),bw=ft(md),G5=ft(md),Hc=ft(),Yh=ft(Hc),Mc=ft(),Rc=ft(),M8=ft(),Dy=ft(M8),Sw=ft(),Ge={comment:yw,lineComment:ft(yw),blockComment:ft(yw),docComment:ft(yw),name:gd,variableName:ft(gd),typeName:SV,tagName:ft(SV),propertyName:_V,attributeName:ft(_V),className:ft(gd),labelName:ft(gd),namespace:ft(gd),macroName:ft(gd),literal:md,string:bw,docString:ft(bw),character:ft(bw),attributeValue:ft(bw),number:G5,integer:ft(G5),float:ft(G5),bool:ft(md),regexp:ft(md),escape:ft(md),color:ft(md),url:ft(md),keyword:Mc,self:ft(Mc),null:ft(Mc),atom:ft(Mc),unit:ft(Mc),modifier:ft(Mc),operatorKeyword:ft(Mc),controlKeyword:ft(Mc),definitionKeyword:ft(Mc),moduleKeyword:ft(Mc),operator:Rc,derefOperator:ft(Rc),arithmeticOperator:ft(Rc),logicOperator:ft(Rc),bitwiseOperator:ft(Rc),compareOperator:ft(Rc),updateOperator:ft(Rc),definitionOperator:ft(Rc),typeOperator:ft(Rc),controlOperator:ft(Rc),punctuation:M8,separator:ft(M8),bracket:Dy,angleBracket:ft(Dy),squareBracket:ft(Dy),paren:ft(Dy),brace:ft(Dy),content:Hc,heading:Yh,heading1:ft(Yh),heading2:ft(Yh),heading3:ft(Yh),heading4:ft(Yh),heading5:ft(Yh),heading6:ft(Yh),contentSeparator:ft(Hc),list:ft(Hc),quote:ft(Hc),emphasis:ft(Hc),strong:ft(Hc),link:ft(Hc),monospace:ft(Hc),strikethrough:ft(Hc),inserted:ft(),deleted:ft(),changed:ft(),invalid:ft(),meta:Sw,documentMeta:ft(Sw),annotation:ft(Sw),processingInstruction:ft(Sw),definition:Kc.defineModifier(),constant:Kc.defineModifier(),function:Kc.defineModifier(),standard:Kc.defineModifier(),local:Kc.defineModifier(),special:Kc.defineModifier()};jZ([{tag:Ge.link,class:"tok-link"},{tag:Ge.heading,class:"tok-heading"},{tag:Ge.emphasis,class:"tok-emphasis"},{tag:Ge.strong,class:"tok-strong"},{tag:Ge.keyword,class:"tok-keyword"},{tag:Ge.atom,class:"tok-atom"},{tag:Ge.bool,class:"tok-bool"},{tag:Ge.url,class:"tok-url"},{tag:Ge.labelName,class:"tok-labelName"},{tag:Ge.inserted,class:"tok-inserted"},{tag:Ge.deleted,class:"tok-deleted"},{tag:Ge.literal,class:"tok-literal"},{tag:Ge.string,class:"tok-string"},{tag:Ge.number,class:"tok-number"},{tag:[Ge.regexp,Ge.escape,Ge.special(Ge.string)],class:"tok-string2"},{tag:Ge.variableName,class:"tok-variableName"},{tag:Ge.local(Ge.variableName),class:"tok-variableName tok-local"},{tag:Ge.definition(Ge.variableName),class:"tok-variableName tok-definition"},{tag:Ge.special(Ge.variableName),class:"tok-variableName2"},{tag:Ge.definition(Ge.propertyName),class:"tok-propertyName tok-definition"},{tag:Ge.typeName,class:"tok-typeName"},{tag:Ge.namespace,class:"tok-namespace"},{tag:Ge.className,class:"tok-className"},{tag:Ge.macroName,class:"tok-macroName"},{tag:Ge.propertyName,class:"tok-propertyName"},{tag:Ge.operator,class:"tok-operator"},{tag:Ge.comment,class:"tok-comment"},{tag:Ge.meta,class:"tok-meta"},{tag:Ge.invalid,class:"tok-invalid"},{tag:Ge.punctuation,class:"tok-punctuation"}]);var q5;const lv=new En;function fxe(t){return _t.define({combine:t?e=>e.concat(t):void 0})}const dxe=new En;class cc{constructor(e,n,r=[],i=""){this.data=e,this.name=i,An.prototype.hasOwnProperty("tree")||Object.defineProperty(An.prototype,"tree",{get(){return ji(this)}}),this.parser=n,this.extension=[ih.of(this),An.languageData.of((o,a,s)=>{let l=wV(o,a,s),c=l.type.prop(lv);if(!c)return[];let u=o.facet(c),f=l.type.prop(dxe);if(f){let d=l.resolve(a-l.from,s);for(let h of f)if(h.test(d,o)){let g=o.facet(h.facet);return h.type=="replace"?g:g.concat(u)}}return u})].concat(r)}isActiveAt(e,n,r=-1){return wV(e,n,r).type.prop(lv)==this.data}findRegions(e){let n=e.facet(ih);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],i=(o,a)=>{if(o.prop(lv)==this.data){r.push({from:a,to:a+o.length});return}let s=o.prop(En.mounted);if(s){if(s.tree.prop(lv)==this.data){if(s.overlay)for(let l of s.overlay)r.push({from:l.from+a,to:l.to+a});else r.push({from:a,to:a+o.length});return}else if(s.overlay){let l=r.length;if(i(s.tree,s.overlay[0].from+a),r.length>l)return}}for(let l=0;l<o.children.length;l++){let c=o.children[l];c instanceof Po&&i(c,o.positions[l]+a)}};return i(ji(e),0),r}get allowsNesting(){return!0}}cc.setState=cn.define();function wV(t,e,n){let r=t.facet(ih),i=ji(t).topNode;if(!r||r.allowsNesting)for(let o=i;o;o=o.enter(e,n,so.ExcludeBuffers))o.type.isTop&&(i=o);return i}class g4 extends cc{constructor(e,n,r){super(e,n,[],r),this.parser=n}static define(e){let n=fxe(e.languageData);return new g4(n,e.parser.configure({props:[lv.add(r=>r.isTop?n:void 0)]}),e.name)}configure(e,n){return new g4(this.data,this.parser.configure(e),n||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function ji(t){let e=t.field(cc.state,!1);return e?e.tree:Po.empty}class hxe{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let r=this.cursorPos-this.string.length;return e<r||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-r,n-r)}}let Ny=null;class m4{constructor(e,n,r=[],i,o,a,s,l){this.parser=e,this.state=n,this.fragments=r,this.tree=i,this.treeLen=o,this.viewport=a,this.skipped=s,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,n,r){return new m4(e,n,[],Po.empty,0,r,[],null)}startParse(){return this.parser.startParse(new hxe(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=Po.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(og.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(og.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Ny;Ny=this;try{return e()}finally{Ny=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=kV(e,n.from,n.to);return e}changes(e,n){let{fragments:r,tree:i,treeLen:o,viewport:a,skipped:s}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((c,u,f,d)=>l.push({fromA:c,toA:u,fromB:f,toB:d})),r=og.applyChanges(r,l),i=Po.empty,o=0,a={from:e.mapPos(a.from,-1),to:e.mapPos(a.to,1)},this.skipped.length){s=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),f=e.mapPos(c.to,-1);u<f&&s.push({from:u,to:f})}}}return new m4(this.parser,n,r,i,o,a,s,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:o}=this.skipped[r];i<e.to&&o>e.from&&(this.fragments=kV(this.fragments,i,o),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends zZ{createParse(n,r,i){let o=i[0].from,a=i[i.length-1].to;return{parsedPos:o,advance(){let l=Ny;if(l){for(let c of i)l.tempSkipped.push(c);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=a,new Po(fs.none,[],[],a-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Ny}}function kV(t,e,n){return og.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class o0{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new o0(n)}static init(e){let n=Math.min(3e3,e.doc.length),r=m4.create(e.facet(ih).parser,e,{from:0,to:n});return r.work(20,n)||r.takeTree(),new o0(r)}}cc.state=Hi.define({create:o0.init,update(t,e){for(let n of e.effects)if(n.is(cc.setState))return n.value;return e.startState.facet(ih)!=e.state.facet(ih)?o0.init(e.state):t.apply(e)}});let HZ=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(HZ=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:500-100})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const Y5=typeof navigator<"u"&&(!((q5=navigator.scheduling)===null||q5===void 0)&&q5.isInputPending)?()=>navigator.scheduling.isInputPending():null,pxe=Mi.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(cc.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(cc.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=HZ(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,o=r.field(cc.state);if(o.tree==o.context.tree&&o.context.isDone(i+1e5))return;let a=Date.now()+Math.min(this.chunkBudget,100,e&&!Y5?Math.max(25,e.timeRemaining()-5):1e9),s=o.context.treeLen<i&&r.doc.length>i+1e3,l=o.context.work(()=>Y5&&Y5()||Date.now()>a,i+(s?0:1e5));this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:cc.setState.of(new o0(o.context))})),this.chunkBudget>0&&!(l&&!s)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>Vs(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),ih=_t.define({combine(t){return t.length?t[0]:null},enables:t=>[cc.state,pxe,bt.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class gxe{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const mxe=_t.define(),rS=_t.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function v4(t){let e=t.facet(rS);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function U1(t,e){let n="",r=t.tabSize,i=t.facet(rS)[0];if(i=="	"){for(;e>=r;)n+="	",e-=r;i=" "}for(let o=0;o<e;o++)n+=i;return n}function PI(t,e){t instanceof An&&(t=new CT(t));for(let r of t.state.facet(mxe)){let i=r(t,e);if(i!==void 0)return i}let n=ji(t.state);return n?vxe(t,n,e):null}class CT{constructor(e,n={}){this.state=e,this.options=n,this.unit=v4(e)}lineAt(e,n=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:o}=this.options;return i!=null&&i>=r.from&&i<=r.to?o&&i==e?{text:"",from:e}:(n<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,n);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,n=1){let{text:r,from:i}=this.lineAt(e,n),o=this.countColumn(r,e-i),a=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return a>-1&&(o+=a-this.countColumn(r,r.search(/\S|$/))),o}countColumn(e,n=e.length){return Z2(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:r,from:i}=this.lineAt(e,n),o=this.options.overrideIndentation;if(o){let a=o(i);if(a>-1)return a}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const UZ=new En;function vxe(t,e,n){return WZ(e.resolveInner(n).enterUnfinishedNodesBefore(n),n,t)}function yxe(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function bxe(t){let e=t.type.prop(UZ);if(e)return e;let n=t.firstChild,r;if(n&&(r=n.type.prop(En.closedBy))){let i=t.lastChild,o=i&&r.indexOf(i.name)>-1;return a=>kxe(a,!0,1,void 0,o&&!yxe(a)?i.from:void 0)}return t.parent==null?Sxe:null}function WZ(t,e,n){for(;t;t=t.parent){let r=bxe(t);if(r)return r(EI.create(n,e,t))}return null}function Sxe(){return 0}class EI extends CT{constructor(e,n,r){super(e.state,e.options),this.base=e,this.pos=n,this.node=r}static create(e,n,r){return new EI(e,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(n.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(_xe(r,e))break;n=this.state.doc.lineAt(r.from)}return this.lineIndent(n.from)}continue(){let e=this.node.parent;return e?WZ(e,this.pos,this.base):0}}function _xe(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function wxe(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,o=t.state.doc.lineAt(n.from),a=i==null||i<=o.from?o.to:Math.min(o.to,i);for(let s=n.to;;){let l=e.childAfter(s);if(!l||l==r)return null;if(!l.type.isSkipped)return l.from<a?n:null;s=l.to}}function kxe(t,e,n,r,i){let o=t.textAfter,a=o.match(/^\s*/)[0].length,s=r&&o.slice(a,a+r.length)==r||i==t.pos+a,l=e?wxe(t):null;return l?s?t.column(l.from):t.column(l.to):t.baseIndent+(s?0:t.unit*n)}function xV({except:t,units:e=1}={}){return n=>{let r=t&&t.test(n.textAfter);return n.baseIndent+(r?0:e*n.unit)}}const xxe=200;function Cxe(){return An.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:r}=t.newSelection.main,i=n.lineAt(r);if(r>i.from+xxe)return t;let o=n.sliceString(i.from,r);if(!e.some(c=>c.test(o)))return t;let{state:a}=t,s=-1,l=[];for(let{head:c}of a.selection.ranges){let u=a.doc.lineAt(c);if(u.from==s)continue;s=u.from;let f=PI(a,u.from);if(f==null)continue;let d=/^\s*/.exec(u.text)[0],h=U1(a,f);d!=h&&l.push({from:u.from,to:u.from+d.length,insert:h})}return l.length?[t,{changes:l,sequential:!0}]:t})}const Txe=_t.define(),GZ=new En;function Axe(t){let e=t.firstChild,n=t.lastChild;return e&&e.to<n.from?{from:e.to,to:n.type.isError?t.to:n.from}:null}function Pxe(t,e,n){let r=ji(t);if(r.length<n)return null;let i=r.resolveInner(n,1),o=null;for(let a=i;a;a=a.parent){if(a.to<=n||a.from>n)continue;if(o&&a.from<e)break;let s=a.type.prop(GZ);if(s&&(a.to<r.length-50||r.length==t.doc.length||!Exe(a))){let l=s(a,t);l&&l.from<=n&&l.from>=e&&l.to>n&&(o=l)}}return o}function Exe(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function y4(t,e,n){for(let r of t.facet(Txe)){let i=r(t,e,n);if(i)return i}return Pxe(t,e,n)}function qZ(t,e){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return n>=r?void 0:{from:n,to:r}}const TT=cn.define({map:qZ}),iS=cn.define({map:qZ});function YZ(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(r=>r.from<=n&&r.to>=n)||e.push(t.lineBlockAt(n));return e}const kg=Hi.define({create(){return Ut.none},update(t,e){t=t.map(e.changes);for(let n of e.effects)n.is(TT)&&!Oxe(t,n.value.from,n.value.to)?t=t.update({add:[CV.range(n.value.from,n.value.to)]}):n.is(iS)&&(t=t.update({filter:(r,i)=>n.value.from!=r||n.value.to!=i,filterFrom:n.value.from,filterTo:n.value.to}));if(e.selection){let n=!1,{head:r}=e.selection.main;t.between(r,r,(i,o)=>{i<r&&o>r&&(n=!0)}),n&&(t=t.update({filterFrom:r,filterTo:r,filter:(i,o)=>o<=r||i>=r}))}return t},provide:t=>bt.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(r,i)=>{n.push(r,i)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let r=t[n++],i=t[n++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(CV.range(r,i))}return Ut.set(e,!0)}});function b4(t,e,n){var r;let i=null;return(r=t.field(kg,!1))===null||r===void 0||r.between(e,n,(o,a)=>{(!i||i.from>o)&&(i={from:o,to:a})}),i}function Oxe(t,e,n){let r=!1;return t.between(e,e,(i,o)=>{i==e&&o==n&&(r=!0)}),r}function KZ(t,e){return t.field(kg,!1)?e:e.concat(cn.appendConfig.of(ZZ()))}const Ixe=t=>{for(let e of YZ(t)){let n=y4(t.state,e.from,e.to);if(n)return t.dispatch({effects:KZ(t.state,[TT.of(n),XZ(t,n)])}),!0}return!1},$xe=t=>{if(!t.state.field(kg,!1))return!1;let e=[];for(let n of YZ(t)){let r=b4(t.state,n.from,n.to);r&&e.push(iS.of(r),XZ(t,r,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function XZ(t,e,n=!0){let r=t.state.doc.lineAt(e.from).number,i=t.state.doc.lineAt(e.to).number;return bt.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${r} ${t.state.phrase("to")} ${i}.`)}const Fxe=t=>{let{state:e}=t,n=[];for(let r=0;r<e.doc.length;){let i=t.lineBlockAt(r),o=y4(e,i.from,i.to);o&&n.push(TT.of(o)),r=(o?t.lineBlockAt(o.to):i).to+1}return n.length&&t.dispatch({effects:KZ(t.state,n)}),!!n.length},Lxe=t=>{let e=t.state.field(kg,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(r,i)=>{n.push(iS.of({from:r,to:i}))}),t.dispatch({effects:n}),!0},Dxe=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:Ixe},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:$xe},{key:"Ctrl-Alt-[",run:Fxe},{key:"Ctrl-Alt-]",run:Lxe}],Nxe={placeholderDOM:null,placeholderText:""},JZ=_t.define({combine(t){return Sc(t,Nxe)}});function ZZ(t){let e=[kg,zxe];return t&&e.push(JZ.of(t)),e}const CV=Ut.replace({widget:new class extends $f{toDOM(t){let{state:e}=t,n=e.facet(JZ),r=o=>{let a=t.lineBlockAt(t.posAtDOM(o.target)),s=b4(t.state,a.from,a.to);s&&t.dispatch({effects:iS.of(s)}),o.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(t,r);let i=document.createElement("span");return i.textContent=n.placeholderText,i.setAttribute("aria-label",e.phrase("folded code")),i.title=e.phrase("unfold"),i.className="cm-foldPlaceholder",i.onclick=r,i}}}),Mxe={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class K5 extends vu{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}}function Rxe(t={}){let e=Object.assign(Object.assign({},Mxe),t),n=new K5(e,!0),r=new K5(e,!1),i=Mi.fromClass(class{constructor(a){this.from=a.viewport.from,this.markers=this.buildMarkers(a)}update(a){(a.docChanged||a.viewportChanged||a.startState.facet(ih)!=a.state.facet(ih)||a.startState.field(kg,!1)!=a.state.field(kg,!1)||ji(a.startState)!=ji(a.state)||e.foldingChanged(a))&&(this.markers=this.buildMarkers(a.view))}buildMarkers(a){let s=new Qd;for(let l of a.viewportLineBlocks){let c=b4(a.state,l.from,l.to)?r:y4(a.state,l.from,l.to)?n:null;c&&s.add(l.from,l.from,c)}return s.finish()}}),{domEventHandlers:o}=e;return[i,xT({class:"cm-foldGutter",markers(a){var s;return((s=a.plugin(i))===null||s===void 0?void 0:s.markers)||ar.empty},initialSpacer(){return new K5(e,!1)},domEventHandlers:Object.assign(Object.assign({},o),{click:(a,s,l)=>{if(o.click&&o.click(a,s,l))return!0;let c=b4(a.state,s.from,s.to);if(c)return a.dispatch({effects:iS.of(c)}),!0;let u=y4(a.state,s.from,s.to);return u?(a.dispatch({effects:TT.of(u)}),!0):!1}})}),ZZ()]}const zxe=bt.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class oS{constructor(e,n){this.specs=e;let r;function i(s){let l=eh.newName();return(r||(r=Object.create(null)))["."+l]=s,l}const o=typeof n.all=="string"?n.all:n.all?i(n.all):void 0,a=n.scope;this.scope=a instanceof cc?s=>s.prop(lv)==a.data:a?s=>s==a:void 0,this.style=jZ(e.map(s=>({tag:s.tag,class:s.class||i(Object.assign({},s,{tag:null}))})),{all:o}).style,this.module=r?new eh(r):null,this.themeType=n.themeType}static define(e,n){return new oS(e,n||{})}}const R8=_t.define(),QZ=_t.define({combine(t){return t.length?[t[0]]:null}});function X5(t){let e=t.facet(R8);return e.length?e:t.facet(QZ)}function OI(t,e){let n=[Bxe],r;return t instanceof oS&&(t.module&&n.push(bt.styleModule.of(t.module)),r=t.themeType),e!=null&&e.fallback?n.push(QZ.of(t)):r?n.push(R8.computeN([bt.darkTheme],i=>i.facet(bt.darkTheme)==(r=="dark")?[t]:[])):n.push(R8.of(t)),n}class Vxe{constructor(e){this.markCache=Object.create(null),this.tree=ji(e.state),this.decorations=this.buildDeco(e,X5(e.state))}update(e){let n=ji(e.state),r=X5(e.state),i=r!=X5(e.startState);n.length<e.view.viewport.to&&!i&&n.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(n!=this.tree||e.viewportChanged||i)&&(this.tree=n,this.decorations=this.buildDeco(e.view,r))}buildDeco(e,n){if(!n||!this.tree.length)return Ut.none;let r=new Qd;for(let{from:i,to:o}of e.visibleRanges)lxe(this.tree,n,(a,s,l)=>{r.add(a,s,this.markCache[l]||(this.markCache[l]=Ut.mark({class:l})))},i,o);return r.finish()}}const Bxe=jg.high(Mi.fromClass(Vxe,{decorations:t=>t.decorations})),jxe=oS.define([{tag:Ge.meta,color:"#404740"},{tag:Ge.link,textDecoration:"underline"},{tag:Ge.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Ge.emphasis,fontStyle:"italic"},{tag:Ge.strong,fontWeight:"bold"},{tag:Ge.strikethrough,textDecoration:"line-through"},{tag:Ge.keyword,color:"#708"},{tag:[Ge.atom,Ge.bool,Ge.url,Ge.contentSeparator,Ge.labelName],color:"#219"},{tag:[Ge.literal,Ge.inserted],color:"#164"},{tag:[Ge.string,Ge.deleted],color:"#a11"},{tag:[Ge.regexp,Ge.escape,Ge.special(Ge.string)],color:"#e40"},{tag:Ge.definition(Ge.variableName),color:"#00f"},{tag:Ge.local(Ge.variableName),color:"#30a"},{tag:[Ge.typeName,Ge.namespace],color:"#085"},{tag:Ge.className,color:"#167"},{tag:[Ge.special(Ge.variableName),Ge.macroName],color:"#256"},{tag:Ge.definition(Ge.propertyName),color:"#00c"},{tag:Ge.comment,color:"#940"},{tag:Ge.invalid,color:"#f00"}]),Hxe=bt.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),eQ=1e4,tQ="()[]{}",nQ=_t.define({combine(t){return Sc(t,{afterCursor:!0,brackets:tQ,maxScanDistance:eQ,renderMatch:Gxe})}}),Uxe=Ut.mark({class:"cm-matchingBracket"}),Wxe=Ut.mark({class:"cm-nonmatchingBracket"});function Gxe(t){let e=[],n=t.matched?Uxe:Wxe;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const qxe=Hi.define({create(){return Ut.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],r=e.state.facet(nQ);for(let i of e.state.selection.ranges){if(!i.empty)continue;let o=iu(e.state,i.head,-1,r)||i.head>0&&iu(e.state,i.head-1,1,r)||r.afterCursor&&(iu(e.state,i.head,1,r)||i.head<e.state.doc.length&&iu(e.state,i.head+1,-1,r));o&&(n=n.concat(r.renderMatch(o,e.state)))}return Ut.set(n,!0)},provide:t=>bt.decorations.from(t)}),Yxe=[qxe,Hxe];function II(t={}){return[nQ.of(t),Yxe]}const Kxe=new En;function z8(t,e,n){let r=t.prop(e<0?En.openedBy:En.closedBy);if(r)return r;if(t.name.length==1){let i=n.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[n[i+e]]}return null}function V8(t){let e=t.type.prop(Kxe);return e?e(t.node):t}function iu(t,e,n,r={}){let i=r.maxScanDistance||eQ,o=r.brackets||tQ,a=ji(t),s=a.resolveInner(e,n);for(let l=s;l;l=l.parent){let c=z8(l.type,n,o);if(c&&l.from<l.to){let u=V8(l);if(u&&(n>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return Xxe(t,e,n,l,u,c,o)}}return Jxe(t,e,n,a,s.type,i,o)}function Xxe(t,e,n,r,i,o,a){let s=r.parent,l={from:i.from,to:i.to},c=0,u=s==null?void 0:s.cursor();if(u&&(n<0?u.childBefore(r.from):u.childAfter(r.to)))do if(n<0?u.to<=r.from:u.from>=r.to){if(c==0&&o.indexOf(u.type.name)>-1&&u.from<u.to){let f=V8(u);return{start:l,end:f?{from:f.from,to:f.to}:void 0,matched:!0}}else if(z8(u.type,n,a))c++;else if(z8(u.type,-n,a)){if(c==0){let f=V8(u);return{start:l,end:f&&f.from<f.to?{from:f.from,to:f.to}:void 0,matched:!1}}c--}}while(n<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}function Jxe(t,e,n,r,i,o,a){let s=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=a.indexOf(s);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?e-1:e,to:n>0?e+1:e},u=t.doc.iterRange(e,n>0?t.doc.length:0),f=0;for(let d=0;!u.next().done&&d<=o;){let h=u.value;n<0&&(d+=h.length);let g=e+d*n;for(let y=n>0?0:h.length-1,S=n>0?h.length:-1;y!=S;y+=n){let v=a.indexOf(h[y]);if(!(v<0||r.resolveInner(g+y,1).type!=i))if(v%2==0==n>0)f++;else{if(f==1)return{start:c,end:{from:g+y,to:g+y+1},matched:v>>1==l>>1};f--}}n>0&&(d+=h.length)}return u.done?{start:c,matched:!1}:null}const Zxe=Object.create(null),TV=[fs.none],AV=[],Qxe=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Qxe[t]=e4e(Zxe,e);function J5(t,e){AV.indexOf(t)>-1||(AV.push(t),console.warn(e))}function e4e(t,e){let n=null;for(let o of e.split(".")){let a=t[o]||Ge[o];a?typeof a=="function"?n?n=a(n):J5(o,`Modifier ${o} used at start of tag`):n?J5(o,`Tag ${o} used as modifier`):n=a:J5(o,`Unknown highlighting tag ${o}`)}if(!n)return 0;let r=e.replace(/ /g,"_"),i=fs.define({id:TV.length,name:r,props:[VZ({[r]:n})]});return TV.push(i),i.id}const t4e=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),r=FI(t.state,n.from);return r.line?n4e(t):r.block?i4e(t):!1};function $I(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=t(e,n);return i?(r(n.update(i)),!0):!1}}const n4e=$I(s4e,0),r4e=$I(rQ,0),i4e=$I((t,e)=>rQ(t,e,a4e(e)),0);function FI(t,e){let n=t.languageDataAt("commentTokens",e);return n.length?n[0]:{}}const My=50;function o4e(t,{open:e,close:n},r,i){let o=t.sliceDoc(r-My,r),a=t.sliceDoc(i,i+My),s=/\s*$/.exec(o)[0].length,l=/^\s*/.exec(a)[0].length,c=o.length-s;if(o.slice(c-e.length,c)==e&&a.slice(l,l+n.length)==n)return{open:{pos:r-s,margin:s&&1},close:{pos:i+l,margin:l&&1}};let u,f;i-r<=2*My?u=f=t.sliceDoc(r,i):(u=t.sliceDoc(r,r+My),f=t.sliceDoc(i-My,i));let d=/^\s*/.exec(u)[0].length,h=/\s*$/.exec(f)[0].length,g=f.length-h-n.length;return u.slice(d,d+e.length)==e&&f.slice(g,g+n.length)==n?{open:{pos:r+d+e.length,margin:/\s/.test(u.charAt(d+e.length))?1:0},close:{pos:i-h-n.length,margin:/\s/.test(f.charAt(g-1))?1:0}}:null}function a4e(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),i=n.to<=r.to?r:t.doc.lineAt(n.to),o=e.length-1;o>=0&&e[o].to>r.from?e[o].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function rQ(t,e,n=e.selection.ranges){let r=n.map(o=>FI(e,o.from).block);if(!r.every(o=>o))return null;let i=n.map((o,a)=>o4e(e,r[a],o.from,o.to));if(t!=2&&!i.every(o=>o))return{changes:e.changes(n.map((o,a)=>i[a]?[]:[{from:o.from,insert:r[a].open+" "},{from:o.to,insert:" "+r[a].close}]))};if(t!=1&&i.some(o=>o)){let o=[];for(let a=0,s;a<i.length;a++)if(s=i[a]){let l=r[a],{open:c,close:u}=s;o.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+l.close.length})}return{changes:o}}return null}function s4e(t,e,n=e.selection.ranges){let r=[],i=-1;for(let{from:o,to:a}of n){let s=r.length,l=1e9,c=FI(e,o).line;if(c){for(let u=o;u<=a;){let f=e.doc.lineAt(u);if(f.from>i&&(o==a||a>f.from)){i=f.from;let d=/^\s*/.exec(f.text)[0].length,h=d==f.length,g=f.text.slice(d,d+c.length)==c?d:-1;d<f.text.length&&d<l&&(l=d),r.push({line:f,comment:g,token:c,indent:d,empty:h,single:!1})}u=f.to+1}if(l<1e9)for(let u=s;u<r.length;u++)r[u].indent<r[u].line.text.length&&(r[u].indent=l);r.length==s+1&&(r[s].single=!0)}}if(t!=2&&r.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:s,token:l,indent:c,empty:u,single:f}of r)(f||!u)&&o.push({from:s.from+c,insert:l+" "});let a=e.changes(o);return{changes:a,selection:e.selection.map(a,1)}}else if(t!=1&&r.some(o=>o.comment>=0)){let o=[];for(let{line:a,comment:s,token:l}of r)if(s>=0){let c=a.from+s,u=c+l.length;a.text[u-a.from]==" "&&u++,o.push({from:c,to:u})}return{changes:o}}return null}const B8=If.define(),l4e=If.define(),c4e=_t.define(),iQ=_t.define({combine(t){return Sc(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(r,i)=>e(r,i)||n(r,i)})}});function u4e(t){let e=0;return t.iterChangedRanges((n,r)=>e=r),e}const oQ=Hi.define({create(){return ou.empty},update(t,e){let n=e.state.facet(iQ),r=e.annotation(B8);if(r){let l=e.docChanged?Ze.single(u4e(e.changes)):void 0,c=is.fromTransaction(e,l),u=r.side,f=u==0?t.undone:t.done;return c?f=S4(f,f.length,n.minDepth,c):f=lQ(f,e.startState.selection),new ou(u==0?r.rest:f,u==0?f:r.rest)}let i=e.annotation(l4e);if((i=="full"||i=="before")&&(t=t.isolate()),e.annotation(Ji.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let o=is.fromTransaction(e),a=e.annotation(Ji.time),s=e.annotation(Ji.userEvent);return o?t=t.addChanges(o,a,s,n,e):e.selection&&(t=t.addSelection(e.startState.selection,a,s,n.newGroupDelay)),(i=="full"||i=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new ou(t.done.map(is.fromJSON),t.undone.map(is.fromJSON))}});function LI(t={}){return[oQ,iQ.of(t),bt.domEventHandlers({beforeinput(e,n){let r=e.inputType=="historyUndo"?aQ:e.inputType=="historyRedo"?j8:null;return r?(e.preventDefault(),r(n)):!1}})]}function AT(t,e){return function({state:n,dispatch:r}){if(!e&&n.readOnly)return!1;let i=n.field(oQ,!1);if(!i)return!1;let o=i.pop(t,n,e);return o?(r(o),!0):!1}}const aQ=AT(0,!1),j8=AT(1,!1),f4e=AT(0,!0),d4e=AT(1,!0);class is{constructor(e,n,r,i,o){this.changes=e,this.effects=n,this.mapped=r,this.startSelection=i,this.selectionsAfter=o}setSelAfter(e){return new is(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new is(e.changes&&Xi.fromJSON(e.changes),[],e.mapped&&uu.fromJSON(e.mapped),e.startSelection&&Ze.fromJSON(e.startSelection),e.selectionsAfter.map(Ze.fromJSON))}static fromTransaction(e,n){let r=Cl;for(let i of e.startState.facet(c4e)){let o=i(e);o.length&&(r=r.concat(o))}return!r.length&&e.changes.empty?null:new is(e.changes.invert(e.startState.doc),r,void 0,n||e.startState.selection,Cl)}static selection(e){return new is(void 0,Cl,void 0,void 0,e)}}function S4(t,e,n,r){let i=e+1>n+20?e-n-1:0,o=t.slice(i,e);return o.push(r),o}function h4e(t,e){let n=[],r=!1;return t.iterChangedRanges((i,o)=>n.push(i,o)),e.iterChangedRanges((i,o,a,s)=>{for(let l=0;l<n.length;){let c=n[l++],u=n[l++];s>=c&&a<=u&&(r=!0)}}),r}function p4e(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,r)=>n.empty!=e.ranges[r].empty).length===0}function sQ(t,e){return t.length?e.length?t.concat(e):t:e}const Cl=[],g4e=200;function lQ(t,e){if(t.length){let n=t[t.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-g4e));return r.length&&r[r.length-1].eq(e)?t:(r.push(e),S4(t,t.length-1,1e9,n.setSelAfter(r)))}else return[is.selection([e])]}function m4e(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function Z5(t,e){if(!t.length)return t;let n=t.length,r=Cl;for(;n;){let i=v4e(t[n-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let o=t.slice(0,n);return o[n-1]=i,o}else e=i.mapped,n--,r=i.selectionsAfter}return r.length?[is.selection(r)]:Cl}function v4e(t,e,n){let r=sQ(t.selectionsAfter.length?t.selectionsAfter.map(s=>s.map(e)):Cl,n);if(!t.changes)return is.selection(r);let i=t.changes.map(e),o=e.mapDesc(t.changes,!0),a=t.mapped?t.mapped.composeDesc(o):o;return new is(i,cn.mapEffects(t.effects,e),a,t.startSelection.map(o),r)}const y4e=/^(input\.type|delete)($|\.)/;class ou{constructor(e,n,r=0,i=void 0){this.done=e,this.undone=n,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new ou(this.done,this.undone):this}addChanges(e,n,r,i,o){let a=this.done,s=a[a.length-1];return s&&s.changes&&!s.changes.empty&&e.changes&&(!r||y4e.test(r))&&(!s.selectionsAfter.length&&n-this.prevTime<i.newGroupDelay&&i.joinToEvent(o,h4e(s.changes,e.changes))||r=="input.type.compose")?a=S4(a,a.length-1,i.minDepth,new is(e.changes.compose(s.changes),sQ(e.effects,s.effects),s.mapped,s.startSelection,Cl)):a=S4(a,a.length,i.minDepth,e),new ou(a,Cl,n,r)}addSelection(e,n,r,i){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:Cl;return o.length>0&&n-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&p4e(o[o.length-1],e)?this:new ou(lQ(this.done,e),this.undone,n,r)}addMapping(e){return new ou(Z5(this.done,e),Z5(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let o=i[i.length-1];if(r&&o.selectionsAfter.length)return n.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:B8.of({side:e,rest:m4e(i)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let a=i.length==1?Cl:i.slice(0,i.length-1);return o.mapped&&(a=Z5(a,o.mapped)),n.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:B8.of({side:e,rest:a}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}ou.empty=new ou(Cl,Cl);const b4e=[{key:"Mod-z",run:aQ,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:j8,preventDefault:!0},{linux:"Ctrl-Shift-z",run:j8,preventDefault:!0},{key:"Mod-u",run:f4e,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:d4e,preventDefault:!0}];function O0(t,e){return Ze.create(t.ranges.map(e),t.mainIndex)}function _u(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function _c({state:t,dispatch:e},n){let r=O0(t.selection,n);return r.eq(t.selection)?!1:(e(_u(t,r)),!0)}function PT(t,e){return Ze.cursor(e?t.to:t.from)}function cQ(t,e){return _c(t,n=>n.empty?t.moveByChar(n,e):PT(n,e))}function ia(t){return t.textDirectionAt(t.state.selection.main.head)==di.LTR}const uQ=t=>cQ(t,!ia(t)),fQ=t=>cQ(t,ia(t));function dQ(t,e){return _c(t,n=>n.empty?t.moveByGroup(n,e):PT(n,e))}const S4e=t=>dQ(t,!ia(t)),_4e=t=>dQ(t,ia(t));function w4e(t,e,n){if(e.type.prop(n))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function ET(t,e,n){let r=ji(t).resolveInner(e.head),i=n?En.closedBy:En.openedBy;for(let l=e.head;;){let c=n?r.childAfter(l):r.childBefore(l);if(!c)break;w4e(t,c,i)?r=c:l=n?c.to:c.from}let o=r.type.prop(i),a,s;return o&&(a=n?iu(t,r.from,1):iu(t,r.to,-1))&&a.matched?s=n?a.end.to:a.end.from:s=n?r.to:r.from,Ze.cursor(s,n?-1:1)}const k4e=t=>_c(t,e=>ET(t.state,e,!ia(t))),x4e=t=>_c(t,e=>ET(t.state,e,ia(t)));function hQ(t,e){return _c(t,n=>{if(!n.empty)return PT(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)})}const pQ=t=>hQ(t,!1),gQ=t=>hQ(t,!0);function mQ(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,r=0,i;if(e){for(let o of t.state.facet(bt.scrollMargins)){let a=o(t);a!=null&&a.top&&(n=Math.max(a==null?void 0:a.top,n)),a!=null&&a.bottom&&(r=Math.max(a==null?void 0:a.bottom,r))}i=t.scrollDOM.clientHeight-n-r}else i=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:e,height:Math.max(t.defaultLineHeight,i-5)}}function vQ(t,e){let n=mQ(t),{state:r}=t,i=O0(r.selection,a=>a.empty?t.moveVertically(a,e,n.height):PT(a,e));if(i.eq(r.selection))return!1;let o;if(n.selfScroll){let a=t.coordsAtPos(r.selection.main.head),s=t.scrollDOM.getBoundingClientRect(),l=s.top+n.marginTop,c=s.bottom-n.marginBottom;a&&a.top>l&&a.bottom<c&&(o=bt.scrollIntoView(i.main.head,{y:"start",yMargin:a.top-l}))}return t.dispatch(_u(r,i),{effects:o}),!0}const PV=t=>vQ(t,!1),H8=t=>vQ(t,!0);function ph(t,e,n){let r=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==r.from&&r.length){let o=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;o&&e.head!=r.from+o&&(i=Ze.cursor(r.from+o))}return i}const C4e=t=>_c(t,e=>ph(t,e,!0)),T4e=t=>_c(t,e=>ph(t,e,!1)),A4e=t=>_c(t,e=>ph(t,e,!ia(t))),P4e=t=>_c(t,e=>ph(t,e,ia(t))),E4e=t=>_c(t,e=>Ze.cursor(t.lineBlockAt(e.head).from,1)),O4e=t=>_c(t,e=>Ze.cursor(t.lineBlockAt(e.head).to,-1));function I4e(t,e,n){let r=!1,i=O0(t.selection,o=>{let a=iu(t,o.head,-1)||iu(t,o.head,1)||o.head>0&&iu(t,o.head-1,1)||o.head<t.doc.length&&iu(t,o.head+1,-1);if(!a||!a.end)return o;r=!0;let s=a.start.from==o.head?a.end.to:a.end.from;return n?Ze.range(o.anchor,s):Ze.cursor(s)});return r?(e(_u(t,i)),!0):!1}const $4e=({state:t,dispatch:e})=>I4e(t,e,!1);function Dl(t,e){let n=O0(t.state.selection,r=>{let i=e(r);return Ze.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(_u(t.state,n)),!0)}function yQ(t,e){return Dl(t,n=>t.moveByChar(n,e))}const bQ=t=>yQ(t,!ia(t)),SQ=t=>yQ(t,ia(t));function _Q(t,e){return Dl(t,n=>t.moveByGroup(n,e))}const F4e=t=>_Q(t,!ia(t)),L4e=t=>_Q(t,ia(t)),D4e=t=>Dl(t,e=>ET(t.state,e,!ia(t))),N4e=t=>Dl(t,e=>ET(t.state,e,ia(t)));function wQ(t,e){return Dl(t,n=>t.moveVertically(n,e))}const kQ=t=>wQ(t,!1),xQ=t=>wQ(t,!0);function CQ(t,e){return Dl(t,n=>t.moveVertically(n,e,mQ(t).height))}const EV=t=>CQ(t,!1),OV=t=>CQ(t,!0),M4e=t=>Dl(t,e=>ph(t,e,!0)),R4e=t=>Dl(t,e=>ph(t,e,!1)),z4e=t=>Dl(t,e=>ph(t,e,!ia(t))),V4e=t=>Dl(t,e=>ph(t,e,ia(t))),B4e=t=>Dl(t,e=>Ze.cursor(t.lineBlockAt(e.head).from)),j4e=t=>Dl(t,e=>Ze.cursor(t.lineBlockAt(e.head).to)),IV=({state:t,dispatch:e})=>(e(_u(t,{anchor:0})),!0),$V=({state:t,dispatch:e})=>(e(_u(t,{anchor:t.doc.length})),!0),FV=({state:t,dispatch:e})=>(e(_u(t,{anchor:t.selection.main.anchor,head:0})),!0),LV=({state:t,dispatch:e})=>(e(_u(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),H4e=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),U4e=({state:t,dispatch:e})=>{let n=IT(t).map(({from:r,to:i})=>Ze.range(r,Math.min(i+1,t.doc.length)));return e(t.update({selection:Ze.create(n),userEvent:"select"})),!0},W4e=({state:t,dispatch:e})=>{let n=O0(t.selection,r=>{var i;let o=ji(t).resolveInner(r.head,1);for(;!(o.from<r.from&&o.to>=r.to||o.to>r.to&&o.from<=r.from||!(!((i=o.parent)===null||i===void 0)&&i.parent));)o=o.parent;return Ze.range(o.to,o.from)});return e(_u(t,n)),!0},G4e=({state:t,dispatch:e})=>{let n=t.selection,r=null;return n.ranges.length>1?r=Ze.create([n.main]):n.main.empty||(r=Ze.create([Ze.cursor(n.main.head)])),r?(e(_u(t,r)),!0):!1};function OT(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:r}=t,i=r.changeByRange(o=>{let{from:a,to:s}=o;if(a==s){let l=e(a);l<a?(n="delete.backward",l=_w(t,l,!1)):l>a&&(n="delete.forward",l=_w(t,l,!0)),a=Math.min(a,l),s=Math.max(s,l)}else a=_w(t,a,!1),s=_w(t,s,!0);return a==s?{range:o}:{changes:{from:a,to:s},range:Ze.cursor(a)}});return i.changes.empty?!1:(t.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?bt.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function _w(t,e,n){if(t instanceof bt)for(let r of t.state.facet(bt.atomicRanges).map(i=>i(t)))r.between(e,e,(i,o)=>{i<e&&o>e&&(e=n?o:i)});return e}const TQ=(t,e)=>OT(t,n=>{let{state:r}=t,i=r.doc.lineAt(n),o,a;if(!e&&n>i.from&&n<i.from+200&&!/[^ \t]/.test(o=i.text.slice(0,n-i.from))){if(o[o.length-1]=="	")return n-1;let s=Z2(o,r.tabSize),l=s%v4(r)||v4(r);for(let c=0;c<l&&o[o.length-1-c]==" ";c++)n--;a=n}else a=Yo(i.text,n-i.from,e,e)+i.from,a==n&&i.number!=(e?r.doc.lines:1)&&(a+=e?1:-1);return a}),U8=t=>TQ(t,!1),AQ=t=>TQ(t,!0),PQ=(t,e)=>OT(t,n=>{let r=n,{state:i}=t,o=i.doc.lineAt(r),a=i.charCategorizer(r);for(let s=null;;){if(r==(e?o.to:o.from)){r==n&&o.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let l=Yo(o.text,r-o.from,e)+o.from,c=o.text.slice(Math.min(r,l)-o.from,Math.max(r,l)-o.from),u=a(c);if(s!=null&&u!=s)break;(c!=" "||r!=n)&&(s=u),r=l}return r}),EQ=t=>PQ(t,!1),q4e=t=>PQ(t,!0),OQ=t=>OT(t,e=>{let n=t.lineBlockAt(e).to;return e<n?n:Math.min(t.state.doc.length,e+1)}),Y4e=t=>OT(t,e=>{let n=t.lineBlockAt(e).from;return e>n?n:Math.max(0,e-1)}),K4e=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:rr.of(["",""])},range:Ze.cursor(r.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},X4e=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let i=r.from,o=t.doc.lineAt(i),a=i==o.from?i-1:Yo(o.text,i-o.from,!1)+o.from,s=i==o.to?i+1:Yo(o.text,i-o.from,!0)+o.from;return{changes:{from:a,to:s,insert:t.doc.slice(i,s).append(t.doc.slice(a,i))},range:Ze.cursor(s)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function IT(t){let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.from),o=t.doc.lineAt(r.to);if(!r.empty&&r.to==o.from&&(o=t.doc.lineAt(r.to-1)),n>=i.number){let a=e[e.length-1];a.to=o.to,a.ranges.push(r)}else e.push({from:i.from,to:o.to,ranges:[r]});n=o.number+1}return e}function IQ(t,e,n){if(t.readOnly)return!1;let r=[],i=[];for(let o of IT(t)){if(n?o.to==t.doc.length:o.from==0)continue;let a=t.doc.lineAt(n?o.to+1:o.from-1),s=a.length+1;if(n){r.push({from:o.to,to:a.to},{from:o.from,insert:a.text+t.lineBreak});for(let l of o.ranges)i.push(Ze.range(Math.min(t.doc.length,l.anchor+s),Math.min(t.doc.length,l.head+s)))}else{r.push({from:a.from,to:o.from},{from:o.to,insert:t.lineBreak+a.text});for(let l of o.ranges)i.push(Ze.range(l.anchor-s,l.head-s))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:Ze.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const J4e=({state:t,dispatch:e})=>IQ(t,e,!1),Z4e=({state:t,dispatch:e})=>IQ(t,e,!0);function $Q(t,e,n){if(t.readOnly)return!1;let r=[];for(let i of IT(t))n?r.push({from:i.from,insert:t.doc.slice(i.from,i.to)+t.lineBreak}):r.push({from:i.to,insert:t.lineBreak+t.doc.slice(i.from,i.to)});return e(t.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Q4e=({state:t,dispatch:e})=>$Q(t,e,!1),eCe=({state:t,dispatch:e})=>$Q(t,e,!0),tCe=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(IT(e).map(({from:i,to:o})=>(i>0?i--:o<e.doc.length&&o++,{from:i,to:o}))),r=O0(e.selection,i=>t.moveVertically(i,!0)).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function nCe(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=ji(t).resolveInner(e),r=n.childBefore(e),i=n.childAfter(e),o;return r&&i&&r.to<=e&&i.from>=e&&(o=r.type.prop(En.closedBy))&&o.indexOf(i.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(i.from).from?{from:r.to,to:i.from}:null}const rCe=FQ(!1),iCe=FQ(!0);function FQ(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:o,to:a}=i,s=e.doc.lineAt(o),l=!t&&o==a&&nCe(e,o);t&&(o=a=(a<=s.to?s:e.doc.lineAt(a)).to);let c=new CT(e,{simulateBreak:o,simulateDoubleBreak:!!l}),u=PI(c,o);for(u==null&&(u=/^\s*/.exec(e.doc.lineAt(o).text)[0].length);a<s.to&&/\s/.test(s.text[a-s.from]);)a++;l?{from:o,to:a}=l:o>s.from&&o<s.from+100&&!/\S/.test(s.text.slice(0,o))&&(o=s.from);let f=["",U1(e,u)];return l&&f.push(U1(e,c.lineIndent(s.from,-1))),{changes:{from:o,to:a,insert:rr.of(f)},range:Ze.cursor(o+1+f[1].length)}});return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function DI(t,e){let n=-1;return t.changeByRange(r=>{let i=[];for(let a=r.from;a<=r.to;){let s=t.doc.lineAt(a);s.number>n&&(r.empty||r.to>s.from)&&(e(s,i,r),n=s.number),a=s.to+1}let o=t.changes(i);return{changes:i,range:Ze.range(o.mapPos(r.anchor,1),o.mapPos(r.head,1))}})}const oCe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),r=new CT(t,{overrideIndentation:o=>{let a=n[o];return a??-1}}),i=DI(t,(o,a,s)=>{let l=PI(r,o.from);if(l==null)return;/\S/.test(o.text)||(l=0);let c=/^\s*/.exec(o.text)[0],u=U1(t,l);(c!=u||s.from<o.from+c.length)&&(n[o.from]=l,a.push({from:o.from,to:o.from+c.length,insert:u}))});return i.changes.empty||e(t.update(i,{userEvent:"indent"})),!0},LQ=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(DI(t,(n,r)=>{r.push({from:n.from,insert:t.facet(rS)})}),{userEvent:"input.indent"})),!0),DQ=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(DI(t,(n,r)=>{let i=/^\s*/.exec(n.text)[0];if(!i)return;let o=Z2(i,t.tabSize),a=0,s=U1(t,Math.max(0,o-v4(t)));for(;a<i.length&&a<s.length&&i.charCodeAt(a)==s.charCodeAt(a);)a++;r.push({from:n.from+a,to:n.from+i.length,insert:s.slice(a)})}),{userEvent:"delete.dedent"})),!0),aCe=[{key:"Ctrl-b",run:uQ,shift:bQ,preventDefault:!0},{key:"Ctrl-f",run:fQ,shift:SQ},{key:"Ctrl-p",run:pQ,shift:kQ},{key:"Ctrl-n",run:gQ,shift:xQ},{key:"Ctrl-a",run:E4e,shift:B4e},{key:"Ctrl-e",run:O4e,shift:j4e},{key:"Ctrl-d",run:AQ},{key:"Ctrl-h",run:U8},{key:"Ctrl-k",run:OQ},{key:"Ctrl-Alt-h",run:EQ},{key:"Ctrl-o",run:K4e},{key:"Ctrl-t",run:X4e},{key:"Ctrl-v",run:H8}],sCe=[{key:"ArrowLeft",run:uQ,shift:bQ,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:S4e,shift:F4e,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:A4e,shift:z4e,preventDefault:!0},{key:"ArrowRight",run:fQ,shift:SQ,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:_4e,shift:L4e,preventDefault:!0},{mac:"Cmd-ArrowRight",run:P4e,shift:V4e,preventDefault:!0},{key:"ArrowUp",run:pQ,shift:kQ,preventDefault:!0},{mac:"Cmd-ArrowUp",run:IV,shift:FV},{mac:"Ctrl-ArrowUp",run:PV,shift:EV},{key:"ArrowDown",run:gQ,shift:xQ,preventDefault:!0},{mac:"Cmd-ArrowDown",run:$V,shift:LV},{mac:"Ctrl-ArrowDown",run:H8,shift:OV},{key:"PageUp",run:PV,shift:EV},{key:"PageDown",run:H8,shift:OV},{key:"Home",run:T4e,shift:R4e,preventDefault:!0},{key:"Mod-Home",run:IV,shift:FV},{key:"End",run:C4e,shift:M4e,preventDefault:!0},{key:"Mod-End",run:$V,shift:LV},{key:"Enter",run:rCe},{key:"Mod-a",run:H4e},{key:"Backspace",run:U8,shift:U8},{key:"Delete",run:AQ},{key:"Mod-Backspace",mac:"Alt-Backspace",run:EQ},{key:"Mod-Delete",mac:"Alt-Delete",run:q4e},{mac:"Mod-Backspace",run:Y4e},{mac:"Mod-Delete",run:OQ}].concat(aCe.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),lCe=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:k4e,shift:D4e},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:x4e,shift:N4e},{key:"Alt-ArrowUp",run:J4e},{key:"Shift-Alt-ArrowUp",run:Q4e},{key:"Alt-ArrowDown",run:Z4e},{key:"Shift-Alt-ArrowDown",run:eCe},{key:"Escape",run:G4e},{key:"Mod-Enter",run:iCe},{key:"Alt-l",mac:"Ctrl-l",run:U4e},{key:"Mod-i",run:W4e,preventDefault:!0},{key:"Mod-[",run:DQ},{key:"Mod-]",run:LQ},{key:"Mod-Alt-\\",run:oCe},{key:"Shift-Mod-k",run:tCe},{key:"Shift-Mod-\\",run:$4e},{key:"Mod-/",run:t4e},{key:"Alt-A",run:r4e}].concat(sCe),cCe={key:"Tab",run:LQ,shift:DQ};function Rr(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];typeof i=="string"?t.setAttribute(r,i):i!=null&&(t[r]=i)}e++}for(;e<arguments.length;e++)NQ(t,arguments[e]);return t}function NQ(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)NQ(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}const DV=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class a0{constructor(e,n,r=0,i=e.length,o,a){this.test=a,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=o?s=>o(DV(s)):DV,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return ko(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=hI(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=_l(e);let i=this.normalize(n);for(let o=0,a=r;;o++){let s=i.charCodeAt(o),l=this.match(s,a);if(l)return this.value=l,this;if(o==i.length-1)break;a==r&&o<n.length&&n.charCodeAt(o)==s&&a++}}}match(e,n){let r=null;for(let i=0;i<this.matches.length;i+=2){let o=this.matches[i],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?r={from:this.matches[i+1],to:n+1}:(this.matches[i]++,a=!0)),a||(this.matches.splice(i,2),i-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:n,to:n+1}:this.matches.push(1,n)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferPos)&&(r=null),r}}typeof Symbol<"u"&&(a0.prototype[Symbol.iterator]=function(){return this});const MQ={from:-1,to:-1,match:/.*/.exec("")},NI="gm"+(/x/.unicode==null?"":"u");class RQ{constructor(e,n,r,i=0,o=e.length){if(this.text=e,this.to=o,this.curLine="",this.done=!1,this.value=MQ,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new zQ(e,n,r,i,o);this.re=new RegExp(n,NI+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.iter=e.iter();let a=e.lineAt(i);this.curLineStart=a.from,this.matchPos=_4(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,i=r+n[0].length;if(this.matchPos=_4(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const Q5=new WeakMap;class Iv{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,r){let i=Q5.get(e);if(!i||i.from>=r||i.to<=n){let s=new Iv(n,e.sliceString(n,r));return Q5.set(e,s),s}if(i.from==n&&i.to==r)return i;let{text:o,from:a}=i;return a>n&&(o=e.sliceString(n,a)+o,a=n),i.to<r&&(o+=e.sliceString(i.to,r)),Q5.set(e,new Iv(a,o)),new Iv(n,o.slice(n-a,r-a))}}class zQ{constructor(e,n,r,i,o){this.text=e,this.to=o,this.done=!1,this.value=MQ,this.matchPos=_4(e,i),this.re=new RegExp(n,NI+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.flat=Iv.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,i=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this.matchPos=_4(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Iv.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(RQ.prototype[Symbol.iterator]=zQ.prototype[Symbol.iterator]=function(){return this});function uCe(t){try{return new RegExp(t,NI),!0}catch{return!1}}function _4(t,e){if(e>=t.length)return e;let n=t.lineAt(e),r;for(;e<n.to&&(r=n.text.charCodeAt(e-n.from))>=56320&&r<57344;)e++;return e}function W8(t){let e=Rr("input",{class:"cm-textfield",name:"line"}),n=Rr("form",{class:"cm-gotoLine",onkeydown:i=>{i.keyCode==27?(i.preventDefault(),t.dispatch({effects:w4.of(!1)}),t.focus()):i.keyCode==13&&(i.preventDefault(),r())},onsubmit:i=>{i.preventDefault(),r()}},Rr("label",t.state.phrase("Go to line"),": ",e)," ",Rr("button",{class:"cm-button",type:"submit"},t.state.phrase("go")));function r(){let i=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!i)return;let{state:o}=t,a=o.doc.lineAt(o.selection.main.head),[,s,l,c,u]=i,f=c?+c.slice(1):0,d=l?+l:a.number;if(l&&u){let g=d/100;s&&(g=g*(s=="-"?-1:1)+a.number/o.doc.lines),d=Math.round(o.doc.lines*g)}else l&&s&&(d=d*(s=="-"?-1:1)+a.number);let h=o.doc.line(Math.max(1,Math.min(o.doc.lines,d)));t.dispatch({effects:w4.of(!1),selection:Ze.cursor(h.from+Math.max(0,Math.min(f,h.length))),scrollIntoView:!0}),t.focus()}return{dom:n}}const w4=cn.define(),NV=Hi.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(w4)&&(t=n.value);return t},provide:t=>j1.from(t,e=>e?W8:null)}),fCe=t=>{let e=B1(t,W8);if(!e){let n=[w4.of(!0)];t.state.field(NV,!1)==null&&n.push(cn.appendConfig.of([NV,dCe])),t.dispatch({effects:n}),e=B1(t,W8)}return e&&e.dom.querySelector("input").focus(),!0},dCe=bt.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),hCe={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},VQ=_t.define({combine(t){return Sc(t,hCe,{highlightWordAroundCursor:(e,n)=>e||n,minSelectionLength:Math.min,maxMatches:Math.min})}});function pCe(t){let e=[bCe,yCe];return t&&e.push(VQ.of(t)),e}const gCe=Ut.mark({class:"cm-selectionMatch"}),mCe=Ut.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function MV(t,e,n,r){return(n==0||t(e.sliceDoc(n-1,n))!=oi.Word)&&(r==e.doc.length||t(e.sliceDoc(r,r+1))!=oi.Word)}function vCe(t,e,n,r){return t(e.sliceDoc(n,n+1))==oi.Word&&t(e.sliceDoc(r-1,r))==oi.Word}const yCe=Mi.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(VQ),{state:n}=t,r=n.selection;if(r.ranges.length>1)return Ut.none;let i=r.main,o,a=null;if(i.empty){if(!e.highlightWordAroundCursor)return Ut.none;let l=n.wordAt(i.head);if(!l)return Ut.none;a=n.charCategorizer(i.head),o=n.sliceDoc(l.from,l.to)}else{let l=i.to-i.from;if(l<e.minSelectionLength||l>200)return Ut.none;if(e.wholeWords){if(o=n.sliceDoc(i.from,i.to),a=n.charCategorizer(i.head),!(MV(a,n,i.from,i.to)&&vCe(a,n,i.from,i.to)))return Ut.none}else if(o=n.sliceDoc(i.from,i.to).trim(),!o)return Ut.none}let s=[];for(let l of t.visibleRanges){let c=new a0(n.doc,o,l.from,l.to);for(;!c.next().done;){let{from:u,to:f}=c.value;if((!a||MV(a,n,u,f))&&(i.empty&&u<=i.from&&f>=i.to?s.push(mCe.range(u,f)):(u>=i.to||f<=i.from)&&s.push(gCe.range(u,f)),s.length>e.maxMatches))return Ut.none}}return Ut.set(s)}},{decorations:t=>t.decorations}),bCe=bt.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),SCe=({state:t,dispatch:e})=>{let{selection:n}=t,r=Ze.create(n.ranges.map(i=>t.wordAt(i.head)||Ze.cursor(i.head)),n.mainIndex);return r.eq(n)?!1:(e(t.update({selection:r})),!0)};function _Ce(t,e){let{main:n,ranges:r}=t.selection,i=t.wordAt(n.head),o=i&&i.from==n.from&&i.to==n.to;for(let a=!1,s=new a0(t.doc,e,r[r.length-1].to);;)if(s.next(),s.done){if(a)return null;s=new a0(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),a=!0}else{if(a&&r.some(l=>l.from==s.value.from))continue;if(o){let l=t.wordAt(s.value.from);if(!l||l.from!=s.value.from||l.to!=s.value.to)continue}return s.value}}const wCe=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(o=>o.from===o.to))return SCe({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(o=>t.sliceDoc(o.from,o.to)!=r))return!1;let i=_Ce(t,r);return i?(e(t.update({selection:t.selection.addRange(Ze.range(i.from,i.to),!1),effects:bt.scrollIntoView(i.to)})),!0):!1},I0=_t.define({combine(t){return Sc(t,{top:!1,caseSensitive:!1,literal:!1,wholeWord:!1,createPanel:e=>new LCe(e),scrollToMatch:e=>bt.scrollIntoView(e)})}});class BQ{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||uCe(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new TCe(this):new xCe(this)}getCursor(e,n=0,r){let i=e.doc?e:An.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?qm(this,i,n,r):Gm(this,i,n,r)}}class jQ{constructor(e){this.spec=e}}function Gm(t,e,n,r){return new a0(e.doc,t.unquoted,n,r,t.caseSensitive?void 0:i=>i.toLowerCase(),t.wholeWord?kCe(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function kCe(t,e){return(n,r,i,o)=>((o>n||o+i.length<r)&&(o=Math.max(0,n-2),i=t.sliceString(o,Math.min(t.length,r+2))),(e(k4(i,n-o))!=oi.Word||e(x4(i,n-o))!=oi.Word)&&(e(x4(i,r-o))!=oi.Word||e(k4(i,r-o))!=oi.Word))}class xCe extends jQ{constructor(e){super(e)}nextMatch(e,n,r){let i=Gm(this.spec,e,r,e.doc.length).nextOverlapping();return i.done&&(i=Gm(this.spec,e,0,n).nextOverlapping()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=r;;){let o=Math.max(n,i-1e4-this.spec.unquoted.length),a=Gm(this.spec,e,o,i),s=null;for(;!a.nextOverlapping().done;)s=a.value;if(s)return s;if(o==n)return null;i-=1e4}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let r=Gm(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let o=Gm(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!o.next().done;)i(o.value.from,o.value.to)}}function qm(t,e,n,r){return new RQ(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?CCe(e.charCategorizer(e.selection.main.head)):void 0},n,r)}function k4(t,e){return t.slice(Yo(t,e,!1),e)}function x4(t,e){return t.slice(e,Yo(t,e))}function CCe(t){return(e,n,r)=>!r[0].length||(t(k4(r.input,r.index))!=oi.Word||t(x4(r.input,r.index))!=oi.Word)&&(t(x4(r.input,r.index+r[0].length))!=oi.Word||t(k4(r.input,r.index+r[0].length))!=oi.Word)}class TCe extends jQ{nextMatch(e,n,r){let i=qm(this.spec,e,r,e.doc.length).next();return i.done&&(i=qm(this.spec,e,0,n).next()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=1;;i++){let o=Math.max(n,r-i*1e4),a=qm(this.spec,e,o,r),s=null;for(;!a.next().done;)s=a.value;if(s&&(o==n||s.from>o+10))return s;if(o==n)return null}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(n,r)=>r=="$"?"$":r=="&"?e.match[0]:r!="0"&&+r<e.match.length?e.match[r]:n))}matchAll(e,n){let r=qm(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let o=qm(this.spec,e,Math.max(0,n-250),Math.min(r+250,e.doc.length));for(;!o.next().done;)i(o.value.from,o.value.to)}}const W1=cn.define(),MI=cn.define(),$d=Hi.define({create(t){return new eP(G8(t).create(),null)},update(t,e){for(let n of e.effects)n.is(W1)?t=new eP(n.value.create(),t.panel):n.is(MI)&&(t=new eP(t.query,n.value?RI:null));return t},provide:t=>j1.from(t,e=>e.panel)});class eP{constructor(e,n){this.query=e,this.panel=n}}const ACe=Ut.mark({class:"cm-searchMatch"}),PCe=Ut.mark({class:"cm-searchMatch cm-searchMatch-selected"}),ECe=Mi.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field($d))}update(t){let e=t.state.field($d);(e!=t.startState.field($d)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return Ut.none;let{view:n}=this,r=new Qd;for(let i=0,o=n.visibleRanges,a=o.length;i<a;i++){let{from:s,to:l}=o[i];for(;i<a-1&&l>o[i+1].from-2*250;)l=o[++i].to;t.highlight(n.state,s,l,(c,u)=>{let f=n.state.selection.ranges.some(d=>d.from==c&&d.to==u);r.add(c,u,f?PCe:ACe)})}return r.finish()}},{decorations:t=>t.decorations});function aS(t){return e=>{let n=e.state.field($d,!1);return n&&n.query.spec.valid?t(e,n):WQ(e)}}const C4=aS((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state,n,n);if(!r)return!1;let i=Ze.single(r.from,r.to),o=t.state.facet(I0);return t.dispatch({selection:i,effects:[zI(t,r),o.scrollToMatch(i.main,t)],userEvent:"select.search"}),UQ(t),!0}),T4=aS((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,i=e.prevMatch(n,r,r);if(!i)return!1;let o=Ze.single(i.from,i.to),a=t.state.facet(I0);return t.dispatch({selection:o,effects:[zI(t,i),a.scrollToMatch(o.main,t)],userEvent:"select.search"}),UQ(t),!0}),OCe=aS((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:Ze.create(n.map(r=>Ze.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),ICe=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,o=[],a=0;for(let s=new a0(t.doc,t.sliceDoc(r,i));!s.next().done;){if(o.length>1e3)return!1;s.value.from==r&&(a=o.length),o.push(Ze.range(s.value.from,s.value.to))}return e(t.update({selection:Ze.create(o,a),userEvent:"select.search.matches"})),!0},RV=aS((t,{query:e})=>{let{state:n}=t,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let o=e.nextMatch(n,r,r);if(!o)return!1;let a=[],s,l,c=[];if(o.from==r&&o.to==i&&(l=n.toText(e.getReplacement(o)),a.push({from:o.from,to:o.to,insert:l}),o=e.nextMatch(n,o.from,o.to),c.push(bt.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+"."))),o){let u=a.length==0||a[0].from>=o.to?0:o.to-o.from-l.length;s=Ze.single(o.from-u,o.to-u),c.push(zI(t,o)),c.push(n.facet(I0).scrollToMatch(s.main,t))}return t.dispatch({changes:a,selection:s,effects:c,userEvent:"input.replace"}),!0}),$Ce=aS((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(i=>{let{from:o,to:a}=i;return{from:o,to:a,insert:e.getReplacement(i)}});if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:bt.announce.of(r),userEvent:"input.replace.all"}),!0});function RI(t){return t.state.facet(I0).createPanel(t)}function G8(t,e){var n,r,i,o;let a=t.selection.main,s=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!s)return e;let l=t.facet(I0);return new BQ({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:l.literal)?s:s.replace(/\n/g,"\\n"),caseSensitive:(r=e==null?void 0:e.caseSensitive)!==null&&r!==void 0?r:l.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:l.literal,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:l.wholeWord})}function HQ(t){let e=B1(t,RI);return e&&e.dom.querySelector("[main-field]")}function UQ(t){let e=HQ(t);e&&e==t.root.activeElement&&e.select()}const WQ=t=>{let e=t.state.field($d,!1);if(e&&e.panel){let n=HQ(t);if(n&&n!=t.root.activeElement){let r=G8(t.state,e.query.spec);r.valid&&t.dispatch({effects:W1.of(r)}),n.focus(),n.select()}}else t.dispatch({effects:[MI.of(!0),e?W1.of(G8(t.state,e.query.spec)):cn.appendConfig.of(NCe)]});return!0},GQ=t=>{let e=t.state.field($d,!1);if(!e||!e.panel)return!1;let n=B1(t,RI);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:MI.of(!1)}),!0},FCe=[{key:"Mod-f",run:WQ,scope:"editor search-panel"},{key:"F3",run:C4,shift:T4,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:C4,shift:T4,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:GQ,scope:"editor search-panel"},{key:"Mod-Shift-l",run:ICe},{key:"Alt-g",run:fCe},{key:"Mod-d",run:wCe,preventDefault:!0}];class LCe{constructor(e){this.view=e;let n=this.query=e.state.field($d).query.spec;this.commit=this.commit.bind(this),this.searchField=Rr("input",{value:n.search,placeholder:As(e,"Find"),"aria-label":As(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Rr("input",{value:n.replace,placeholder:As(e,"Replace"),"aria-label":As(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Rr("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=Rr("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=Rr("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(i,o,a){return Rr("button",{class:"cm-button",name:i,onclick:o,type:"button"},a)}this.dom=Rr("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>C4(e),[As(e,"next")]),r("prev",()=>T4(e),[As(e,"previous")]),r("select",()=>OCe(e),[As(e,"all")]),Rr("label",null,[this.caseField,As(e,"match case")]),Rr("label",null,[this.reField,As(e,"regexp")]),Rr("label",null,[this.wordField,As(e,"by word")]),...e.state.readOnly?[]:[Rr("br"),this.replaceField,r("replace",()=>RV(e),[As(e,"replace")]),r("replaceAll",()=>$Ce(e),[As(e,"replace all")])],Rr("button",{name:"close",onclick:()=>GQ(e),"aria-label":As(e,"close"),type:"button"},[""])])}commit(){let e=new BQ({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:W1.of(e)}))}keydown(e){tke(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?T4:C4)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),RV(this.view))}update(e){for(let n of e.transactions)for(let r of n.effects)r.is(W1)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(I0).top}}function As(t,e){return t.state.phrase(e)}const ww=30,kw=/[\s\.,:;?!]/;function zI(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,o=Math.max(r.from,e-ww),a=Math.min(i,n+ww),s=t.state.sliceDoc(o,a);if(o!=r.from){for(let l=0;l<ww;l++)if(!kw.test(s[l+1])&&kw.test(s[l])){s=s.slice(l);break}}if(a!=i){for(let l=s.length-1;l>s.length-ww;l--)if(!kw.test(s[l-1])&&kw.test(s[l])){s=s.slice(0,l);break}}return bt.announce.of(`${t.state.phrase("current match")}. ${s} ${t.state.phrase("on line")} ${r.number}.`)}const DCe=bt.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),NCe=[$d,jg.lowest(ECe),DCe];class qQ{constructor(e,n,r){this.state=e,this.pos=n,this.explicit=r,this.abortListeners=[]}tokenBefore(e){let n=ji(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),r=Math.max(n.from,this.pos-250),i=n.text.slice(r-n.from,this.pos-n.from),o=i.search(YQ(e,!1));return o<0?null:{from:r+o,to:this.pos,text:i.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(e,n){e=="abort"&&this.abortListeners&&this.abortListeners.push(n)}}function zV(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function MCe(t){let e=Object.create(null),n=Object.create(null);for(let{label:i}of t){e[i[0]]=!0;for(let o=1;o<i.length;o++)n[i[o]]=!0}let r=zV(e)+zV(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function RCe(t){let e=t.map(i=>typeof i=="string"?{label:i}:i),[n,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:MCe(e);return i=>{let o=i.matchBefore(r);return o||i.explicit?{from:o?o.from:i.pos,options:e,validFor:n}:null}}class VV{constructor(e,n,r,i){this.completion=e,this.source=n,this.match=r,this.score=i}}function Fd(t){return t.selection.main.from}function YQ(t,e){var n;let{source:r}=t,i=e&&r[0]!="^",o=r[r.length-1]!="$";return!i&&!o?t:new RegExp(`${i?"^":""}(?:${r})${o?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const KQ=If.define();function zCe(t,e,n,r){let{main:i}=t.selection,o=n-i.from,a=r-i.from;return Object.assign(Object.assign({},t.changeByRange(s=>s!=i&&n!=r&&t.sliceDoc(s.from+o,s.from+a)!=t.sliceDoc(n,r)?{range:s}:{changes:{from:s.from+o,to:r==i.from?s.to:s.from+a,insert:e},range:Ze.cursor(s.from+o+e.length)})),{userEvent:"input.complete"})}const BV=new WeakMap;function VCe(t){if(!Array.isArray(t))return t;let e=BV.get(t);return e||BV.set(t,e=RCe(t)),e}const VI=cn.define(),G1=cn.define();class BCe{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let n=0;n<e.length;){let r=ko(e,n),i=_l(r);this.chars.push(r);let o=e.slice(n,n+i),a=o.toUpperCase();this.folded.push(ko(a==o?o.toLowerCase():a,0)),n+=i}this.astral=e.length!=this.chars.length}match(e){if(this.pattern.length==0)return[-100];if(e.length<this.pattern.length)return null;let{chars:n,folded:r,any:i,precise:o,byWord:a}=this;if(n.length==1){let _=ko(e,0),x=_l(_),C=x==e.length?0:-100;if(_!=n[0])if(_==r[0])C+=-200;else return null;return[C,0,x]}let s=e.indexOf(this.pattern);if(s==0)return[e.length==this.pattern.length?0:-100,0,this.pattern.length];let l=n.length,c=0;if(s<0){for(let _=0,x=Math.min(e.length,200);_<x&&c<l;){let C=ko(e,_);(C==n[c]||C==r[c])&&(i[c++]=_),_+=_l(C)}if(c<l)return null}let u=0,f=0,d=!1,h=0,g=-1,y=-1,S=/[a-z]/.test(e),v=!0;for(let _=0,x=Math.min(e.length,200),C=0;_<x&&f<l;){let k=ko(e,_);s<0&&(u<l&&k==n[u]&&(o[u++]=_),h<l&&(k==n[h]||k==r[h]?(h==0&&(g=_),y=_+1,h++):h=0));let m,T=k<255?k>=48&&k<=57||k>=97&&k<=122?2:k>=65&&k<=90?1:0:(m=hI(k))!=m.toLowerCase()?1:m!=m.toUpperCase()?2:0;(!_||T==1&&S||C==0&&T!=0)&&(n[f]==k||r[f]==k&&(d=!0)?a[f++]=_:a.length&&(v=!1)),C=T,_+=_l(k)}return f==l&&a[0]==0&&v?this.result(-100+(d?-200:0),a,e):h==l&&g==0?[-200-e.length+(y==e.length?0:-100),0,y]:s>-1?[-700-e.length,s,s+this.pattern.length]:h==l?[-200+-700-e.length,g,y]:f==l?this.result(-100+(d?-200:0)+-700+(v?0:-1100),a,e):n.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,n,r){let i=[e-r.length],o=1;for(let a of n){let s=a+(this.astral?_l(ko(r,a)):1);o>1&&i[o-1]==a?i[o-1]=s:(i[o++]=a,i[o++]=s)}return i}}const os=_t.define({combine(t){return Sc(t,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:jCe,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>r=>jV(e(r),n(r)),optionClass:(e,n)=>r=>jV(e(r),n(r)),addToOptions:(e,n)=>e.concat(n)})}});function jV(t,e){return t?e?t+" "+e:t:e}function jCe(t,e,n,r,i){let o=t.textDirection==di.RTL,a=o,s=!1,l="top",c,u,f=e.left-i.left,d=i.right-e.right,h=r.right-r.left,g=r.bottom-r.top;if(a&&f<Math.min(h,d)?a=!1:!a&&d<Math.min(h,f)&&(a=!0),h<=(a?f:d))c=Math.max(i.top,Math.min(n.top,i.bottom-g))-e.top,u=Math.min(400,a?f:d);else{s=!0,u=Math.min(400,(o?e.right:i.right-e.left)-30);let y=i.bottom-e.bottom;y>=g||y>e.top?c=n.bottom-e.top:(l="bottom",c=e.bottom-n.top)}return{style:`${l}: ${c}px; max-width: ${u}px`,class:"cm-completionInfo-"+(s?o?"left-narrow":"right-narrow":a?"left":"right")}}function xw(t,e="option"){return n=>{let r=n.state.field(Fs,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<n.state.facet(os).interactionDelay)return!1;let i=1,o;e=="page"&&(o=$Z(n,r.open.tooltip))&&(i=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:a}=r.open.options,s=r.open.selected>-1?r.open.selected+i*(t?1:-1):t?0:a-1;return s<0?s=e=="page"?0:a-1:s>=a&&(s=e=="page"?a-1:0),n.dispatch({effects:ZQ.of(s)}),!0}}const HCe=t=>{let e=t.state.field(Fs,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||Date.now()-e.open.timestamp<t.state.facet(os).interactionDelay?!1:e.open.disabled?!0:XQ(t,e.open.options[e.open.selected])},UCe=t=>t.state.field(Fs,!1)?(t.dispatch({effects:VI.of(!0)}),!0):!1,WCe=t=>{let e=t.state.field(Fs,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:G1.of(null)}),!0)};class GCe{constructor(e,n){this.active=e,this.context=n,this.time=Date.now(),this.updates=[],this.done=void 0}}const HV=50,qCe=50,YCe=1e3,KCe=Mi.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of t.state.field(Fs).active)e.state==1&&this.startQuery(e)}update(t){let e=t.state.field(Fs);if(!t.selectionSet&&!t.docChanged&&t.startState.field(Fs)==e)return;let n=t.transactions.some(r=>(r.selection||r.docChanged)&&!q8(r));for(let r=0;r<this.running.length;r++){let i=this.running[r];if(n||i.updates.length+t.transactions.length>qCe&&Date.now()-i.time>YCe){for(let o of i.context.abortListeners)try{o()}catch(a){Vs(this.view.state,a)}i.context.abortListeners=null,this.running.splice(r--,1)}else i.updates.push(...t.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some(r=>r.state==1&&!this.running.some(i=>i.active.source==r.source))?setTimeout(()=>this.startUpdate(),HV):-1,this.composing!=0)for(let r of t.transactions)q8(r)=="input"?this.composing=2:this.composing==2&&r.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:t}=this.view,e=t.field(Fs);for(let n of e.active)n.state==1&&!this.running.some(r=>r.active.source==n.source)&&this.startQuery(n)}startQuery(t){let{state:e}=this.view,n=Fd(e),r=new qQ(e,n,t.explicitPos==n),i=new GCe(t,r);this.running.push(i),Promise.resolve(t.source(r)).then(o=>{i.context.aborted||(i.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:G1.of(null)}),Vs(this.view.state,o)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),HV))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],n=this.view.state.facet(os);for(let r=0;r<this.running.length;r++){let i=this.running[r];if(i.done===void 0)continue;if(this.running.splice(r--,1),i.done){let a=new $v(i.active.source,i.active.explicitPos,i.done,i.done.from,(t=i.done.to)!==null&&t!==void 0?t:Fd(i.updates.length?i.updates[0].startState:this.view.state));for(let s of i.updates)a=a.update(s,n);if(a.hasResult()){e.push(a);continue}}let o=this.view.state.field(Fs).active.find(a=>a.source==i.active.source);if(o&&o.state==1)if(i.done==null){let a=new Ja(i.active.source,0);for(let s of i.updates)a=a.update(s,n);a.state!=1&&e.push(a)}else this.startQuery(o)}e.length&&this.view.dispatch({effects:JQ.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(Fs,!1);if(e&&e.tooltip&&this.view.state.facet(os).closeOnBlur){let n=e.open&&$Z(this.view,e.open.tooltip);(!n||!n.dom.contains(t.relatedTarget))&&this.view.dispatch({effects:G1.of(null)})}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:VI.of(!1)}),20),this.composing=0}}});function XQ(t,e){const n=e.completion.apply||e.completion.label;let r=t.state.field(Fs).active.find(i=>i.source==e.source);return r instanceof $v?(typeof n=="string"?t.dispatch(Object.assign(Object.assign({},zCe(t.state,n,r.from,r.to)),{annotations:KQ.of(e.completion)})):n(t,e.completion,r.from,r.to),!0):!1}function XCe(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),n.type&&r.classList.add(...n.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(n,r,i){let o=document.createElement("span");o.className="cm-completionLabel";let{label:a}=n,s=0;for(let l=1;l<i.length;){let c=i[l++],u=i[l++];c>s&&o.appendChild(document.createTextNode(a.slice(s,c)));let f=o.appendChild(document.createElement("span"));f.appendChild(document.createTextNode(a.slice(c,u))),f.className="cm-completionMatchedText",s=u}return s<a.length&&o.appendChild(document.createTextNode(a.slice(s))),o},position:50},{render(n){if(!n.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=n.detail,r},position:80}),e.sort((n,r)=>n.position-r.position).map(n=>n.render)}function UV(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let i=Math.floor(e/n);return{from:i*n,to:(i+1)*n}}let r=Math.floor((t-e)/n);return{from:t-(r+1)*n,to:t-r*n}}class JCe{constructor(e,n){this.view=e,this.stateField=n,this.info=null,this.placeInfoReq={read:()=>this.measureInfo(),write:s=>this.placeInfo(s),key:this},this.space=null,this.currentClass="";let r=e.state.field(n),{options:i,selected:o}=r.open,a=e.state.facet(os);this.optionContent=XCe(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=UV(i.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",s=>{for(let l=s.target,c;l&&l!=this.dom;l=l.parentNode)if(l.nodeName=="LI"&&(c=/-(\d+)$/.exec(l.id))&&+c[1]<i.length){XQ(e,i[+c[1]]),s.preventDefault();return}}),this.dom.addEventListener("focusout",s=>{let l=e.state.field(this.stateField,!1);l&&l.tooltip&&e.state.facet(os).closeOnBlur&&s.relatedTarget!=e.contentDOM&&e.dispatch({effects:G1.of(null)})}),this.list=this.dom.appendChild(this.createListBox(i,r.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}mount(){this.updateSel()}update(e){var n,r,i;let o=e.state.field(this.stateField),a=e.startState.field(this.stateField);this.updateTooltipClass(e.state),o!=a&&(this.updateSel(),((n=o.open)===null||n===void 0?void 0:n.disabled)!=((r=a.open)===null||r===void 0?void 0:r.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(!((i=o.open)===null||i===void 0)&&i.disabled)))}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of n.split(" "))r&&this.dom.classList.add(r);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=UV(n.options.length,n.selected,this.view.state.facet(os).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(n.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})),this.updateSelectedOption(n.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:r}=n.options[n.selected],{info:i}=r;if(!i)return;let o=typeof i=="string"?document.createTextNode(i):i(r);if(!o)return;"then"in o?o.then(a=>{a&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(a)}).catch(a=>Vs(this.view.state,a,"completion info")):this.addInfoPane(o)}}addInfoPane(e){let n=this.info=document.createElement("div");n.className="cm-tooltip cm-completionInfo",n.appendChild(e),this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)r.nodeName!="LI"||!r.id?i--:i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),n=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return n&&QCe(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),o=this.space;if(!o){let a=this.dom.ownerDocument.defaultView||window;o={left:0,top:0,right:a.innerWidth,bottom:a.innerHeight}}return i.top>Math.min(o.bottom,n.bottom)-10||i.bottom<Math.max(o.top,n.top)+10?null:this.view.state.facet(os).positionInfo(this.view,n,i,r,o)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,r){const i=document.createElement("ul");i.id=n,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions"));let o=null;for(let a=r.from;a<r.to;a++){let{completion:s,match:l}=e[a],{section:c}=s;if(c){let d=typeof c=="string"?c:c.name;if(d!=o&&(a>r.from||r.from==0))if(o=d,typeof c!="string"&&c.header)i.appendChild(c.header(c));else{let h=i.appendChild(document.createElement("completion-section"));h.textContent=d}}const u=i.appendChild(document.createElement("li"));u.id=n+"-"+a,u.setAttribute("role","option");let f=this.optionClass(s);f&&(u.className=f);for(let d of this.optionContent){let h=d(s,this.view.state,l);h&&u.appendChild(h)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}}function ZCe(t){return e=>new JCe(e,t)}function QCe(t,e){let n=t.getBoundingClientRect(),r=e.getBoundingClientRect();r.top<n.top?t.scrollTop-=n.top-r.top:r.bottom>n.bottom&&(t.scrollTop+=r.bottom-n.bottom)}function WV(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function eTe(t,e){let n=[],r=null,i=l=>{n.push(l);let{section:c}=l.completion;if(c){r||(r=[]);let u=typeof c=="string"?c:c.name;r.some(f=>f.name==u)||r.push(typeof c=="string"?{name:u}:c)}};for(let l of t)if(l.hasResult())if(l.result.filter===!1){let c=l.result.getMatch;for(let u of l.result.options){let f=[1e9-n.length];if(c)for(let d of c(u))f.push(d);i(new VV(u,l.source,f,f[0]))}}else{let c=new BCe(e.sliceDoc(l.from,l.to)),u;for(let f of l.result.options)(u=c.match(f.label))&&i(new VV(f,l.source,u,u[0]+(f.boost||0)))}if(r){let l=Object.create(null),c=0,u=(f,d)=>{var h,g;return((h=f.rank)!==null&&h!==void 0?h:1e9)-((g=d.rank)!==null&&g!==void 0?g:1e9)||(f.name<d.name?-1:1)};for(let f of r.sort(u))c-=1e5,l[f.name]=c;for(let f of n){let{section:d}=f.completion;d&&(f.score+=l[typeof d=="string"?d:d.name])}}let o=[],a=null,s=e.facet(os).compareCompletions;for(let l of n.sort((c,u)=>u.score-c.score||s(c.completion,u.completion)))!a||a.label!=l.completion.label||a.detail!=l.completion.detail||a.type!=null&&l.completion.type!=null&&a.type!=l.completion.type||a.apply!=l.completion.apply?o.push(l):WV(l.completion)>WV(a)&&(o[o.length-1]=l),a=l.completion;return o}class cv{constructor(e,n,r,i,o,a){this.options=e,this.attrs=n,this.tooltip=r,this.timestamp=i,this.selected=o,this.disabled=a}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new cv(this.options,GV(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,r,i,o){let a=eTe(e,n);if(!a.length)return i&&e.some(l=>l.state==1)?new cv(i.options,i.attrs,i.tooltip,i.timestamp,i.selected,!0):null;let s=n.facet(os).selectOnOpen?0:-1;if(i&&i.selected!=s&&i.selected!=-1){let l=i.options[i.selected].completion;for(let c=0;c<a.length;c++)if(a[c].completion==l){s=c;break}}return new cv(a,GV(r,s),{pos:e.reduce((l,c)=>c.hasResult()?Math.min(l,c.from):l,1e8),create:ZCe(Fs),above:o.aboveCursor},i?i.timestamp:Date.now(),s,!1)}map(e){return new cv(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class A4{constructor(e,n,r){this.active=e,this.id=n,this.open=r}static start(){return new A4(rTe,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,r=n.facet(os),o=(r.override||n.languageDataAt("autocomplete",Fd(n)).map(VCe)).map(s=>(this.active.find(c=>c.source==s)||new Ja(s,this.active.some(c=>c.state!=0)?1:0)).update(e,r));o.length==this.active.length&&o.every((s,l)=>s==this.active[l])&&(o=this.active);let a=this.open;a&&e.docChanged&&(a=a.map(e.changes)),e.selection||o.some(s=>s.hasResult()&&e.changes.touchesRange(s.from,s.to))||!tTe(o,this.active)?a=cv.build(o,n,this.id,a,r):a&&a.disabled&&!o.some(s=>s.state==1)&&(a=null),!a&&o.every(s=>s.state!=1)&&o.some(s=>s.hasResult())&&(o=o.map(s=>s.hasResult()?new Ja(s.source,0):s));for(let s of e.effects)s.is(ZQ)&&(a=a&&a.setSelected(s.value,this.id));return o==this.active&&a==this.open?this:new A4(o,this.id,a)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:nTe}}function tTe(t,e){if(t==e)return!0;for(let n=0,r=0;;){for(;n<t.length&&!t[n].hasResult;)n++;for(;r<e.length&&!e[r].hasResult;)r++;let i=n==t.length,o=r==e.length;if(i||o)return i==o;if(t[n++].result!=e[r++].result)return!1}}const nTe={"aria-autocomplete":"list"};function GV(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const rTe=[];function q8(t){return t.isUserEvent("input.type")?"input":t.isUserEvent("delete.backward")?"delete":null}class Ja{constructor(e,n,r=-1){this.source=e,this.state=n,this.explicitPos=r}hasResult(){return!1}update(e,n){let r=q8(e),i=this;r?i=i.handleUserEvent(e,r,n):e.docChanged?i=i.handleChange(e):e.selection&&i.state!=0&&(i=new Ja(i.source,0));for(let o of e.effects)if(o.is(VI))i=new Ja(i.source,1,o.value?Fd(e.state):-1);else if(o.is(G1))i=new Ja(i.source,0);else if(o.is(JQ))for(let a of o.value)a.source==i.source&&(i=a);return i}handleUserEvent(e,n,r){return n=="delete"||!r.activateOnTyping?this.map(e.changes):new Ja(this.source,1)}handleChange(e){return e.changes.touchesRange(Fd(e.startState))?new Ja(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Ja(this.source,this.state,e.mapPos(this.explicitPos))}}class $v extends Ja{constructor(e,n,r,i,o){super(e,2,n),this.result=r,this.from=i,this.to=o}hasResult(){return!0}handleUserEvent(e,n,r){var i;let o=e.changes.mapPos(this.from),a=e.changes.mapPos(this.to,1),s=Fd(e.state);if((this.explicitPos<0?s<=o:s<this.from)||s>a||n=="delete"&&Fd(e.startState)==this.from)return new Ja(this.source,n=="input"&&r.activateOnTyping?1:0);let l=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),c;return iTe(this.result.validFor,e.state,o,a)?new $v(this.source,l,this.result,o,a):this.result.update&&(c=this.result.update(this.result,o,a,new qQ(e.state,s,l>=0)))?new $v(this.source,l,c,c.from,(i=c.to)!==null&&i!==void 0?i:Fd(e.state)):new Ja(this.source,1,l)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new Ja(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new $v(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function iTe(t,e,n,r){if(!t)return!1;let i=e.sliceDoc(n,r);return typeof t=="function"?t(i,n,r,e):YQ(t,!0).test(i)}const JQ=cn.define({map(t,e){return t.map(n=>n.map(e))}}),ZQ=cn.define(),Fs=Hi.define({create(){return A4.start()},update(t,e){return t.update(e)},provide:t=>[kT.from(t,e=>e.tooltip),bt.contentAttributes.from(t,e=>e.attrs)]}),QQ=bt.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class oTe{constructor(e,n,r,i){this.field=e,this.line=n,this.from=r,this.to=i}}class BI{constructor(e,n,r){this.field=e,this.from=n,this.to=r}map(e){let n=e.mapPos(this.from,-1,To.TrackDel),r=e.mapPos(this.to,1,To.TrackDel);return n==null||r==null?null:new BI(this.field,n,r)}}class jI{constructor(e,n){this.lines=e,this.fieldPositions=n}instantiate(e,n){let r=[],i=[n],o=e.doc.lineAt(n),a=/^\s*/.exec(o.text)[0];for(let l of this.lines){if(r.length){let c=a,u=/^\t*/.exec(l)[0].length;for(let f=0;f<u;f++)c+=e.facet(rS);i.push(n+c.length-u),l=c+l.slice(u)}r.push(l),n+=l.length+1}let s=this.fieldPositions.map(l=>new BI(l.field,i[l.line]+l.from,i[l.line]+l.to));return{text:r,ranges:s}}static parse(e){let n=[],r=[],i=[],o;for(let a of e.split(/\r\n?|\n/)){for(;o=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(a);){let s=o[1]?+o[1]:null,l=o[2]||o[3]||"",c=-1;for(let u=0;u<n.length;u++)(s!=null?n[u].seq==s:l&&n[u].name==l)&&(c=u);if(c<0){let u=0;for(;u<n.length&&(s==null||n[u].seq!=null&&n[u].seq<s);)u++;n.splice(u,0,{seq:s,name:l}),c=u;for(let f of i)f.field>=c&&f.field++}i.push(new oTe(c,r.length,o.index,o.index+l.length)),a=a.slice(0,o.index)+l+a.slice(o.index+o[0].length)}for(let s;s=/\\([{}])/.exec(a);){a=a.slice(0,s.index)+s[1]+a.slice(s.index+s[0].length);for(let l of i)l.line==r.length&&l.from>s.index&&(l.from--,l.to--)}r.push(a)}return new jI(r,i)}}let aTe=Ut.widget({widget:new class extends $f{toDOM(){let t=document.createElement("span");return t.className="cm-snippetFieldPosition",t}ignoreEvent(){return!1}}}),sTe=Ut.mark({class:"cm-snippetField"});class $0{constructor(e,n){this.ranges=e,this.active=n,this.deco=Ut.set(e.map(r=>(r.from==r.to?aTe:sTe).range(r.from,r.to)))}map(e){let n=[];for(let r of this.ranges){let i=r.map(e);if(!i)return null;n.push(i)}return new $0(n,this.active)}selectionInsideField(e){return e.ranges.every(n=>this.ranges.some(r=>r.field==this.active&&r.from<=n.from&&r.to>=n.to))}}const sS=cn.define({map(t,e){return t&&t.map(e)}}),lTe=cn.define(),q1=Hi.define({create(){return null},update(t,e){for(let n of e.effects){if(n.is(sS))return n.value;if(n.is(lTe)&&t)return new $0(t.ranges,n.value)}return t&&e.docChanged&&(t=t.map(e.changes)),t&&e.selection&&!t.selectionInsideField(e.selection)&&(t=null),t},provide:t=>bt.decorations.from(t,e=>e?e.deco:Ut.none)});function HI(t,e){return Ze.create(t.filter(n=>n.field==e).map(n=>Ze.range(n.from,n.to)))}function cTe(t){let e=jI.parse(t);return(n,r,i,o)=>{let{text:a,ranges:s}=e.instantiate(n.state,i),l={changes:{from:i,to:o,insert:rr.of(a)},scrollIntoView:!0,annotations:r?KQ.of(r):void 0};if(s.length&&(l.selection=HI(s,0)),s.length>1){let c=new $0(s,0),u=l.effects=[sS.of(c)];n.state.field(q1,!1)===void 0&&u.push(cn.appendConfig.of([q1,pTe,mTe,QQ]))}n.dispatch(n.state.update(l))}}function eee(t){return({state:e,dispatch:n})=>{let r=e.field(q1,!1);if(!r||t<0&&r.active==0)return!1;let i=r.active+t,o=t>0&&!r.ranges.some(a=>a.field==i+t);return n(e.update({selection:HI(r.ranges,i),effects:sS.of(o?null:new $0(r.ranges,i))})),!0}}const uTe=({state:t,dispatch:e})=>t.field(q1,!1)?(e(t.update({effects:sS.of(null)})),!0):!1,fTe=eee(1),dTe=eee(-1),hTe=[{key:"Tab",run:fTe,shift:dTe},{key:"Escape",run:uTe}],qV=_t.define({combine(t){return t.length?t[0]:hTe}}),pTe=jg.highest(tS.compute([qV],t=>t.facet(qV)));function gTe(t,e){return Object.assign(Object.assign({},e),{apply:cTe(t)})}const mTe=bt.domEventHandlers({mousedown(t,e){let n=e.state.field(q1,!1),r;if(!n||(r=e.posAtCoords({x:t.clientX,y:t.clientY}))==null)return!1;let i=n.ranges.find(o=>o.from<=r&&o.to>=r);return!i||i.field==n.active?!1:(e.dispatch({selection:HI(n.ranges,i.field),effects:sS.of(n.ranges.some(o=>o.field>i.field)?new $0(n.ranges,i.field):null)}),!0)}}),Y1={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Wp=cn.define({map(t,e){let n=e.mapPos(t,-1,To.TrackAfter);return n??void 0}}),UI=new class extends _g{};UI.startSide=1;UI.endSide=-1;const tee=Hi.define({create(){return ar.empty},update(t,e){if(e.selection){let n=e.state.doc.lineAt(e.selection.main.head).from,r=e.startState.doc.lineAt(e.startState.selection.main.head).from;n!=e.changes.mapPos(r,-1)&&(t=ar.empty)}t=t.map(e.changes);for(let n of e.effects)n.is(Wp)&&(t=t.update({add:[UI.range(n.value,n.value+1)]}));return t}});function WI(){return[yTe,tee]}const tP="()[]{}<>";function nee(t){for(let e=0;e<tP.length;e+=2)if(tP.charCodeAt(e)==t)return tP.charAt(e+1);return hI(t<128?t:t+1)}function ree(t,e){return t.languageDataAt("closeBrackets",e)[0]||Y1}const vTe=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),yTe=bt.inputHandler.of((t,e,n,r)=>{if((vTe?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let i=t.state.selection.main;if(r.length>2||r.length==2&&_l(ko(r,0))==1||e!=i.from||n!=i.to)return!1;let o=_Te(t.state,r);return o?(t.dispatch(o),!0):!1}),bTe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=ree(t,t.selection.main.head).brackets||Y1.brackets,i=null,o=t.changeByRange(a=>{if(a.empty){let s=wTe(t.doc,a.head);for(let l of r)if(l==s&&$T(t.doc,a.head)==nee(ko(l,0)))return{changes:{from:a.head-l.length,to:a.head+l.length},range:Ze.cursor(a.head-l.length)}}return{range:i=a}});return i||e(t.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!i},STe=[{key:"Backspace",run:bTe}];function _Te(t,e){let n=ree(t,t.selection.main.head),r=n.brackets||Y1.brackets;for(let i of r){let o=nee(ko(i,0));if(e==i)return o==i?CTe(t,i,r.indexOf(i+i+i)>-1,n):kTe(t,i,o,n.before||Y1.before);if(e==o&&iee(t,t.selection.main.from))return xTe(t,i,o)}return null}function iee(t,e){let n=!1;return t.field(tee).between(0,t.doc.length,r=>{r==e&&(n=!0)}),n}function $T(t,e){let n=t.sliceString(e,e+2);return n.slice(0,_l(ko(n,0)))}function wTe(t,e){let n=t.sliceString(e-2,e);return _l(ko(n,0))==n.length?n:n.slice(1)}function kTe(t,e,n,r){let i=null,o=t.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:n,from:a.to}],effects:Wp.of(a.to+e.length),range:Ze.range(a.anchor+e.length,a.head+e.length)};let s=$T(t.doc,a.head);return!s||/\s/.test(s)||r.indexOf(s)>-1?{changes:{insert:e+n,from:a.head},effects:Wp.of(a.head+e.length),range:Ze.cursor(a.head+e.length)}:{range:i=a}});return i?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function xTe(t,e,n){let r=null,i=t.changeByRange(o=>o.empty&&$T(t.doc,o.head)==n?{changes:{from:o.head,to:o.head+n.length,insert:n},range:Ze.cursor(o.head+n.length)}:r={range:o});return r?null:t.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function CTe(t,e,n,r){let i=r.stringPrefixes||Y1.stringPrefixes,o=null,a=t.changeByRange(s=>{if(!s.empty)return{changes:[{insert:e,from:s.from},{insert:e,from:s.to}],effects:Wp.of(s.to+e.length),range:Ze.range(s.anchor+e.length,s.head+e.length)};let l=s.head,c=$T(t.doc,l),u;if(c==e){if(YV(t,l))return{changes:{insert:e+e,from:l},effects:Wp.of(l+e.length),range:Ze.cursor(l+e.length)};if(iee(t,l)){let d=n&&t.sliceDoc(l,l+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:l,to:l+d.length,insert:d},range:Ze.cursor(l+d.length)}}}else{if(n&&t.sliceDoc(l-2*e.length,l)==e+e&&(u=KV(t,l-2*e.length,i))>-1&&YV(t,u))return{changes:{insert:e+e+e+e,from:l},effects:Wp.of(l+e.length),range:Ze.cursor(l+e.length)};if(t.charCategorizer(l)(c)!=oi.Word&&KV(t,l,i)>-1&&!TTe(t,l,e,i))return{changes:{insert:e+e,from:l},effects:Wp.of(l+e.length),range:Ze.cursor(l+e.length)}}return{range:o=s}});return o?null:t.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function YV(t,e){let n=ji(t).resolveInner(e+1);return n.parent&&n.from==e}function TTe(t,e,n,r){let i=ji(t).resolveInner(e,-1),o=r.reduce((a,s)=>Math.max(a,s.length),0);for(let a=0;a<5;a++){let s=t.sliceDoc(i.from,Math.min(i.to,i.from+n.length+o)),l=s.indexOf(n);if(!l||l>-1&&r.indexOf(s.slice(0,l))>-1){let u=i.firstChild;for(;u&&u.from==i.from&&u.to-u.from>n.length+l;){if(t.sliceDoc(u.to-n.length,u.to)==n)return!1;u=u.firstChild}return!0}let c=i.to==e&&i.parent;if(!c)break;i=c}return!1}function KV(t,e,n){let r=t.charCategorizer(e);if(r(t.sliceDoc(e-1,e))!=oi.Word)return e;for(let i of n){let o=e-i.length;if(t.sliceDoc(o,e)==i&&r(t.sliceDoc(o-1,o))!=oi.Word)return o}return-1}function oee(t={}){return[Fs,os.of(t),KCe,ATe,QQ]}const aee=[{key:"Ctrl-Space",run:UCe},{key:"Escape",run:WCe},{key:"ArrowDown",run:xw(!0)},{key:"ArrowUp",run:xw(!1)},{key:"PageDown",run:xw(!0,"page")},{key:"PageUp",run:xw(!1,"page")},{key:"Enter",run:HCe}],ATe=jg.highest(tS.computeN([os],t=>t.facet(os).defaultKeymap?[aee]:[]));class PTe{constructor(e,n,r){this.from=e,this.to=n,this.diagnostic=r}}class Op{constructor(e,n,r){this.diagnostics=e,this.panel=n,this.selected=r}static init(e,n,r){let i=e,o=r.facet(Gp).markerFilter;o&&(i=o(i));let a=Ut.set(i.map(s=>s.from==s.to||s.from==s.to-1&&r.doc.lineAt(s.from).to==s.from?Ut.widget({widget:new NTe(s),diagnostic:s}).range(s.from):Ut.mark({attributes:{class:"cm-lintRange cm-lintRange-"+s.severity+(s.markClass?" "+s.markClass:"")},diagnostic:s}).range(s.from,s.to)),!0);return new Op(a,n,s0(a))}}function s0(t,e=null,n=0){let r=null;return t.between(n,1e9,(i,o,{spec:a})=>{if(!(e&&a.diagnostic!=e))return r=new PTe(i,o,a.diagnostic),!1}),r}function see(t,e){let n=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(r=>r.is(FT))||t.changes.touchesRange(n.from,n.to))}function lee(t,e){return t.field(Rs,!1)?e:e.concat(cn.appendConfig.of(gee))}function ETe(t,e){return{effects:lee(t,[FT.of(e)])}}const FT=cn.define(),GI=cn.define(),cee=cn.define(),Rs=Hi.define({create(){return new Op(Ut.none,null,null)},update(t,e){if(e.docChanged){let n=t.diagnostics.map(e.changes),r=null;if(t.selected){let i=e.changes.mapPos(t.selected.from,1);r=s0(n,t.selected.diagnostic,i)||s0(n,null,i)}t=new Op(n,t.panel,r)}for(let n of e.effects)n.is(FT)?t=Op.init(n.value,t.panel,e.state):n.is(GI)?t=new Op(t.diagnostics,n.value?LT.open:null,t.selected):n.is(cee)&&(t=new Op(t.diagnostics,t.panel,n.value));return t},provide:t=>[j1.from(t,e=>e.panel),bt.decorations.from(t,e=>e.diagnostics)]}),OTe=Ut.mark({class:"cm-lintRange cm-lintRange-active"});function ITe(t,e,n){let{diagnostics:r}=t.state.field(Rs),i=[],o=2e8,a=0;r.between(e-(n<0?1:0),e+(n>0?1:0),(l,c,{spec:u})=>{e>=l&&e<=c&&(l==c||(e>l||n>0)&&(e<c||n<0))&&(i.push(u.diagnostic),o=Math.min(l,o),a=Math.max(c,a))});let s=t.state.facet(Gp).tooltipFilter;return s&&(i=s(i)),i.length?{pos:o,end:a,above:t.state.doc.lineAt(o).to<a,create(){return{dom:uee(t,i)}}}:null}function uee(t,e){return Rr("ul",{class:"cm-tooltip-lint"},e.map(n=>dee(t,n,!1)))}const $Te=t=>{let e=t.state.field(Rs,!1);(!e||!e.panel)&&t.dispatch({effects:lee(t.state,[GI.of(!0)])});let n=B1(t,LT.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},XV=t=>{let e=t.state.field(Rs,!1);return!e||!e.panel?!1:(t.dispatch({effects:GI.of(!1)}),!0)},FTe=t=>{let e=t.state.field(Rs,!1);if(!e)return!1;let n=t.state.selection.main,r=e.diagnostics.iter(n.to+1);return!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==n.from&&r.to==n.to)?!1:(t.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)},LTe=[{key:"Mod-Shift-m",run:$Te,preventDefault:!0},{key:"F8",run:FTe}],DTe=Mi.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet(Gp);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let t=Date.now();if(t<this.lintTime-10)setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:e}=this.view,{sources:n}=e.facet(Gp);Promise.all(n.map(r=>Promise.resolve(r(this.view)))).then(r=>{let i=r.reduce((o,a)=>o.concat(a));this.view.state.doc==e.doc&&this.view.dispatch(ETe(this.view.state,i))},r=>{Vs(this.view.state,r)})}}update(t){let e=t.state.facet(Gp);(t.docChanged||e!=t.startState.facet(Gp)||e.needsRefresh&&e.needsRefresh(t))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),Gp=_t.define({combine(t){return Object.assign({sources:t.map(e=>e.source)},Sc(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,n)=>e?n?r=>e(r)||n(r):e:n}))}});function JV(t,e={}){return[Gp.of({source:t,config:e}),DTe,gee]}function fee(t){let e=[];if(t)e:for(let{name:n}of t){for(let r=0;r<n.length;r++){let i=n[r];if(/[a-zA-Z]/.test(i)&&!e.some(o=>o.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function dee(t,e,n){var r;let i=n?fee(e.actions):[];return Rr("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Rr("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(r=e.actions)===null||r===void 0?void 0:r.map((o,a)=>{let s=!1,l=d=>{if(d.preventDefault(),s)return;s=!0;let h=s0(t.state.field(Rs).diagnostics,e);h&&o.apply(t,h.from,h.to)},{name:c}=o,u=i[a]?c.indexOf(i[a]):-1,f=u<0?c:[c.slice(0,u),Rr("u",c.slice(u,u+1)),c.slice(u+1)];return Rr("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${c}${u<0?"":` (access key "${i[a]})"`}.`},f)}),e.source&&Rr("div",{class:"cm-diagnosticSource"},e.source))}class NTe extends $f{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return Rr("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class ZV{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=dee(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class LT{constructor(e){this.view=e,this.items=[];let n=i=>{if(i.keyCode==27)XV(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],a=fee(o.actions);for(let s=0;s<a.length;s++)if(a[s].toUpperCase().charCodeAt(0)==i.keyCode){let l=s0(this.view.state.field(Rs).diagnostics,o);l&&o.actions[s].apply(e,l.from,l.to)}}else return;i.preventDefault()},r=i=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(i.target)&&this.moveSelection(o)};this.list=Rr("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:r}),this.dom=Rr("div",{class:"cm-panel-lint"},this.list,Rr("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>XV(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(Rs).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(Rs),r=0,i=!1,o=null;for(e.between(0,this.view.state.doc.length,(a,s,{spec:l})=>{let c=-1,u;for(let f=r;f<this.items.length;f++)if(this.items[f].diagnostic==l.diagnostic){c=f;break}c<0?(u=new ZV(this.view,l.diagnostic),this.items.splice(r,0,u),i=!0):(u=this.items[c],c>r&&(this.items.splice(r,c-r),i=!0)),n&&u.diagnostic==n.diagnostic?u.dom.hasAttribute("aria-selected")||(u.dom.setAttribute("aria-selected","true"),o=u):u.dom.hasAttribute("aria-selected")&&u.dom.removeAttribute("aria-selected"),r++});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new ZV(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:s})=>{a.top<s.top?this.list.scrollTop-=s.top-a.top:a.bottom>s.bottom&&(this.list.scrollTop+=a.bottom-s.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function n(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)n();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(Rs),r=s0(n.diagnostics,this.items[e].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:cee.of(r)})}static open(e){return new LT(e)}}function sx(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function Cw(t){return sx(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const MTe=bt.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Cw("#d11")},".cm-lintRange-warning":{backgroundImage:Cw("orange")},".cm-lintRange-info":{backgroundImage:Cw("#999")},".cm-lintRange-hint":{backgroundImage:Cw("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function QV(t){return t=="error"?4:t=="warning"?3:t=="info"?2:1}class RTe extends vu{constructor(e){super(),this.diagnostics=e,this.severity=e.reduce((n,r)=>QV(n)<QV(r.severity)?r.severity:n,"hint")}toDOM(e){let n=document.createElement("div");n.className="cm-lint-marker cm-lint-marker-"+this.severity;let r=this.diagnostics,i=e.state.facet(DT).tooltipFilter;return i&&(r=i(r)),r.length&&(n.onmouseover=()=>VTe(e,n,r)),n}}function zTe(t,e){let n=r=>{let i=e.getBoundingClientRect();if(!(r.clientX>i.left-10&&r.clientX<i.right+10&&r.clientY>i.top-10&&r.clientY<i.bottom+10)){for(let o=r.target;o;o=o.parentNode)if(o.nodeType==1&&o.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",n),t.state.field(pee)&&t.dispatch({effects:qI.of(null)})}};window.addEventListener("mousemove",n)}function VTe(t,e,n){function r(){let a=t.elementAtHeight(e.getBoundingClientRect().top+5-t.documentTop);t.coordsAtPos(a.from)&&t.dispatch({effects:qI.of({pos:a.from,above:!1,create(){return{dom:uee(t,n),getCoords:()=>e.getBoundingClientRect()}}})}),e.onmouseout=e.onmousemove=null,zTe(t,e)}let{hoverTime:i}=t.state.facet(DT),o=setTimeout(r,i);e.onmouseout=()=>{clearTimeout(o),e.onmouseout=e.onmousemove=null},e.onmousemove=()=>{clearTimeout(o),o=setTimeout(r,i)}}function BTe(t,e){let n=Object.create(null);for(let i of e){let o=t.lineAt(i.from);(n[o.from]||(n[o.from]=[])).push(i)}let r=[];for(let i in n)r.push(new RTe(n[i]).range(+i));return ar.of(r,!0)}const jTe=xT({class:"cm-gutter-lint",markers:t=>t.state.field(hee)}),hee=Hi.define({create(){return ar.empty},update(t,e){t=t.map(e.changes);let n=e.state.facet(DT).markerFilter;for(let r of e.effects)if(r.is(FT)){let i=r.value;n&&(i=n(i||[])),t=BTe(e.state.doc,i.slice(0))}return t}}),qI=cn.define(),pee=Hi.define({create(){return null},update(t,e){return t&&e.docChanged&&(t=see(e,t)?null:Object.assign(Object.assign({},t),{pos:e.changes.mapPos(t.pos)})),e.effects.reduce((n,r)=>r.is(qI)?r.value:n,t)},provide:t=>kT.from(t)}),HTe=bt.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:sx('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:sx('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error":{content:sx('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}}),gee=[Rs,bt.decorations.compute([Rs],t=>{let{selected:e,panel:n}=t.field(Rs);return!e||!n||e.from==e.to?Ut.none:Ut.set([OTe.range(e.from,e.to)])}),IZ(ITe,{hideOn:see}),MTe],DT=_t.define({combine(t){return Sc(t,{hoverTime:300,markerFilter:null,tooltipFilter:null})}});function mee(t={}){return[DT.of(t),hee,jTe,HTe,pee]}const Ug=(()=>[kI(),Jke(),yke(),LI(),Rxe(),ske(),dke(),An.allowMultipleSelections.of(!0),Cxe(),OI(jxe,{fallback:!0}),II(),WI(),oee(),$ke(),Dke(),xke(),pCe(),tS.of([...STe,...lCe,...FCe,...b4e,...Dxe,...aee,...LTe])])();/*!
* VueCodemirror v6.1.1
* Copyright (c) Surmon. All rights reserved.
* Released under the MIT License.
* Surmon
*/var UTe=Object.freeze({autofocus:!1,disabled:!1,indentWithTab:!0,tabSize:2,placeholder:"",autoDestroy:!0,extensions:[Ug]}),vee=Symbol("vue-codemirror-global-config"),wa,WTe=function(t){var e=t.onUpdate,n=t.onChange,r=t.onFocus,i=t.onBlur,o=function(a,s){var l={};for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&s.indexOf(c)<0&&(l[c]=a[c]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var u=0;for(c=Object.getOwnPropertySymbols(a);u<c.length;u++)s.indexOf(c[u])<0&&Object.prototype.propertyIsEnumerable.call(a,c[u])&&(l[c[u]]=a[c[u]])}return l}(t,["onUpdate","onChange","onFocus","onBlur"]);return An.create({doc:o.doc,selection:o.selection,extensions:(Array.isArray(o.extensions)?o.extensions:[o.extensions]).concat([bt.updateListener.of(function(a){e(a),a.docChanged&&n(a.state.doc.toString(),a),a.focusChanged&&(a.view.hasFocus?r(a):i(a))})])})},Ym=function(t){var e=new J2;return{compartment:e,run:function(n){e.get(t.state)?t.dispatch({effects:e.reconfigure(n)}):t.dispatch({effects:cn.appendConfig.of(e.of(n))})}}},eB=function(t,e){var n=Ym(t),r=n.compartment,i=n.run;return function(o){var a=r.get(t.state);i(o??a!==e?e:[])}},Tw={type:Boolean,default:void 0},GTe={autofocus:Tw,disabled:Tw,indentWithTab:Tw,tabSize:Number,placeholder:String,style:Object,autoDestroy:Tw,phrases:Object,root:Object,extensions:Array,selection:Object},qTe={modelValue:{type:String,default:""}},YTe=Object.assign(Object.assign({},GTe),qTe);(function(t){t.Change="change",t.Update="update",t.Focus="focus",t.Blur="blur",t.Ready="ready",t.ModelUpdate="update:modelValue"})(wa||(wa={}));var Ip={};Ip[wa.Change]=function(t,e){return!0},Ip[wa.Update]=function(t){return!0},Ip[wa.Focus]=function(t){return!0},Ip[wa.Blur]=function(t){return!0},Ip[wa.Ready]=function(t){return!0};var yee={};yee[wa.ModelUpdate]=Ip[wa.Change];var KTe=Object.assign(Object.assign({},Ip),yee),lx=Rt({name:"VueCodemirror",props:Object.assign({},YTe),emits:Object.assign({},KTe),setup:function(t,e){var n=ru(),r=ru(),i=ru(),o=Object.assign(Object.assign({},UTe),Ni(vee,{})),a=Fn(function(){var s={};return Object.keys(Dn(t)).forEach(function(l){var c;l!=="modelValue"&&(s[l]=(c=t[l])!==null&&c!==void 0?c:o[l])}),s});return Bg(function(){var s;r.value=WTe({doc:t.modelValue,selection:a.value.selection,extensions:(s=o.extensions)!==null&&s!==void 0?s:[],onFocus:function(c){return e.emit(wa.Focus,c)},onBlur:function(c){return e.emit(wa.Blur,c)},onUpdate:function(c){return e.emit(wa.Update,c)},onChange:function(c,u){c!==t.modelValue&&(e.emit(wa.Change,c,u),e.emit(wa.ModelUpdate,c,u))}}),i.value=function(c){return new bt(Object.assign({},c))}({state:r.value,parent:n.value,root:a.value.root});var l=function(c){var u=function(){return c.state.doc.toString()},f=Ym(c).run,d=eB(c,[bt.editable.of(!1),An.readOnly.of(!0)]),h=eB(c,tS.of([cCe])),g=Ym(c).run,y=Ym(c).run,S=Ym(c).run,v=Ym(c).run;return{focus:function(){return c.focus()},getDoc:u,setDoc:function(_){_!==u()&&c.dispatch({changes:{from:0,to:c.state.doc.length,insert:_}})},reExtensions:f,toggleDisabled:d,toggleIndentWithTab:h,setTabSize:function(_){g([An.tabSize.of(_),rS.of(" ".repeat(_))])},setPhrases:function(_){y([An.phrases.of(_)])},setPlaceholder:function(_){S(Pke(_))},setStyle:function(_){_===void 0&&(_={}),v(bt.theme({"&":Object.assign({},_)}))}}}(i.value);ki(function(){return t.modelValue},function(c){c!==l.getDoc()&&l.setDoc(c)}),ki(function(){return t.extensions},function(c){return l.reExtensions(c||[])},{immediate:!0}),ki(function(){return a.value.disabled},function(c){return l.toggleDisabled(c)},{immediate:!0}),ki(function(){return a.value.indentWithTab},function(c){return l.toggleIndentWithTab(c)},{immediate:!0}),ki(function(){return a.value.tabSize},function(c){return l.setTabSize(c)},{immediate:!0}),ki(function(){return a.value.phrases},function(c){return l.setPhrases(c||{})},{immediate:!0}),ki(function(){return a.value.placeholder},function(c){return l.setPlaceholder(c)},{immediate:!0}),ki(function(){return a.value.style},function(c){return l.setStyle(c)},{immediate:!0}),a.value.autofocus&&l.focus(),e.emit(wa.Ready,{state:r.value,view:i.value,container:n.value})}),E0(function(){a.value.autoDestroy&&i.value&&function(s){s.destroy()}(i.value)}),function(){return Xd("div",{class:"v-codemirror",style:{display:"contents"},ref:n})}}}),Wg=lx,XTe=function(t,e){t.component(lx.name,lx),t.component("Codemirror",lx),function(n,r){n.provide(vee,r)}(t,e)},JTe={Codemirror:Wg,install:XTe},ZTe={prefix:"fas",iconName:"circle-minus",icon:[512,512,["minus-circle"],"f056","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM184 232H328c13.3 0 24 10.7 24 24s-10.7 24-24 24H184c-13.3 0-24-10.7-24-24s10.7-24 24-24z"]},QTe=ZTe,e3e={prefix:"fas",iconName:"pen-to-square",icon:[512,512,["edit"],"f044","M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"]},t3e=e3e,n3e={prefix:"fas",iconName:"chart-simple",icon:[448,512,[],"e473","M160 80c0-26.5 21.5-48 48-48h32c26.5 0 48 21.5 48 48V432c0 26.5-21.5 48-48 48H208c-26.5 0-48-21.5-48-48V80zM0 272c0-26.5 21.5-48 48-48H80c26.5 0 48 21.5 48 48V432c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V272zM368 96h32c26.5 0 48 21.5 48 48V432c0 26.5-21.5 48-48 48H368c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48z"]},r3e={prefix:"fas",iconName:"wand-magic-sparkles",icon:[576,512,["magic-wand-sparkles"],"e2ca","M234.7 42.7L197 56.8c-3 1.1-5 4-5 7.2s2 6.1 5 7.2l37.7 14.1L248.8 123c1.1 3 4 5 7.2 5s6.1-2 7.2-5l14.1-37.7L315 71.2c3-1.1 5-4 5-7.2s-2-6.1-5-7.2L277.3 42.7 263.2 5c-1.1-3-4-5-7.2-5s-6.1 2-7.2 5L234.7 42.7zM46.1 395.4c-18.7 18.7-18.7 49.1 0 67.9l34.6 34.6c18.7 18.7 49.1 18.7 67.9 0L529.9 116.5c18.7-18.7 18.7-49.1 0-67.9L495.3 14.1c-18.7-18.7-49.1-18.7-67.9 0L46.1 395.4zM484.6 82.6l-105 105-23.3-23.3 105-105 23.3 23.3zM7.5 117.2C3 118.9 0 123.2 0 128s3 9.1 7.5 10.8L64 160l21.2 56.5c1.7 4.5 6 7.5 10.8 7.5s9.1-3 10.8-7.5L128 160l56.5-21.2c4.5-1.7 7.5-6 7.5-10.8s-3-9.1-7.5-10.8L128 96 106.8 39.5C105.1 35 100.8 32 96 32s-9.1 3-10.8 7.5L64 96 7.5 117.2zm352 256c-4.5 1.7-7.5 6-7.5 10.8s3 9.1 7.5 10.8L416 416l21.2 56.5c1.7 4.5 6 7.5 10.8 7.5s9.1-3 10.8-7.5L480 416l56.5-21.2c4.5-1.7 7.5-6 7.5-10.8s-3-9.1-7.5-10.8L480 352l-21.2-56.5c-1.7-4.5-6-7.5-10.8-7.5s-9.1 3-10.8 7.5L416 352l-56.5 21.2z"]},i3e={prefix:"fas",iconName:"arrow-pointer",icon:[320,512,["mouse-pointer"],"f245","M0 55.2V426c0 12.2 9.9 22 22 22c6.3 0 12.4-2.7 16.6-7.5L121.2 346l58.1 116.3c7.9 15.8 27.1 22.2 42.9 14.3s22.2-27.1 14.3-42.9L179.8 320H297.9c12.2 0 22.1-9.9 22.1-22.1c0-6.3-2.7-12.3-7.4-16.5L38.6 37.9C34.3 34.1 28.9 32 23.2 32C10.4 32 0 42.4 0 55.2z"]},o3e=i3e,a3e={prefix:"fas",iconName:"maximize",icon:[512,512,["expand-arrows-alt"],"f31e","M200 32H56C42.7 32 32 42.7 32 56V200c0 9.7 5.8 18.5 14.8 22.2s19.3 1.7 26.2-5.2l40-40 79 79-79 79L73 295c-6.9-6.9-17.2-8.9-26.2-5.2S32 302.3 32 312V456c0 13.3 10.7 24 24 24H200c9.7 0 18.5-5.8 22.2-14.8s1.7-19.3-5.2-26.2l-40-40 79-79 79 79-40 40c-6.9 6.9-8.9 17.2-5.2 26.2s12.5 14.8 22.2 14.8H456c13.3 0 24-10.7 24-24V312c0-9.7-5.8-18.5-14.8-22.2s-19.3-1.7-26.2 5.2l-40 40-79-79 79-79 40 40c6.9 6.9 17.2 8.9 26.2 5.2s14.8-12.5 14.8-22.2V56c0-13.3-10.7-24-24-24H312c-9.7 0-18.5 5.8-22.2 14.8s-1.7 19.3 5.2 26.2l40 40-79 79-79-79 40-40c6.9-6.9 8.9-17.2 5.2-26.2S209.7 32 200 32z"]},s3e=a3e,l3e={prefix:"fas",iconName:"circle-play",icon:[512,512,[61469,"play-circle"],"f144","M0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zM188.3 147.1c-7.6 4.2-12.3 12.3-12.3 20.9V344c0 8.7 4.7 16.7 12.3 20.9s16.8 4.1 24.3-.5l144-88c7.1-4.4 11.5-12.1 11.5-20.5s-4.4-16.1-11.5-20.5l-144-88c-7.4-4.5-16.7-4.7-24.3-.5z"]},c3e=l3e,u3e={prefix:"fas",iconName:"square",icon:[448,512,[9632,9723,9724,61590],"f0c8","M0 96C0 60.7 28.7 32 64 32H384c35.3 0 64 28.7 64 64V416c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V96z"]},f3e={prefix:"fas",iconName:"filter",icon:[512,512,[],"f0b0","M3.9 54.9C10.5 40.9 24.5 32 40 32H472c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L320 320.9V448c0 12.1-6.8 23.2-17.7 28.6s-23.8 4.3-33.5-3l-64-48c-8.1-6-12.8-15.5-12.8-25.6V320.9L9 97.3C-.7 85.4-2.8 68.8 3.9 54.9z"]},d3e={prefix:"fas",iconName:"question",icon:[320,512,[10067,10068,61736],"3f","M80 160c0-35.3 28.7-64 64-64h32c35.3 0 64 28.7 64 64v3.6c0 21.8-11.1 42.1-29.4 53.8l-42.2 27.1c-25.2 16.2-40.4 44.1-40.4 74V320c0 17.7 14.3 32 32 32s32-14.3 32-32v-1.4c0-8.2 4.2-15.8 11-20.2l42.2-27.1c36.6-23.6 58.8-64.1 58.8-107.7V160c0-70.7-57.3-128-128-128H144C73.3 32 16 89.3 16 160c0 17.7 14.3 32 32 32s32-14.3 32-32zm80 320a40 40 0 1 0 0-80 40 40 0 1 0 0 80z"]},h3e={prefix:"fas",iconName:"arrow-right",icon:[448,512,[8594],"f061","M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"]},p3e={prefix:"fas",iconName:"circle",icon:[512,512,[128308,128309,128992,128993,128994,128995,128996,9679,9898,9899,11044,61708,61915],"f111","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z"]},g3e={prefix:"fas",iconName:"pen",icon:[512,512,[128394],"f304","M362.7 19.3L314.3 67.7 444.3 197.7l48.4-48.4c25-25 25-65.5 0-90.5L453.3 19.3c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2C-1.5 489.7 .8 498.8 7 505s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L421.7 220.3 291.7 90.3z"]},m3e={prefix:"fas",iconName:"trash",icon:[448,512,[],"f1f8","M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z"]},v3e={prefix:"fas",iconName:"up-right-from-square",icon:[512,512,["external-link-alt"],"f35d","M352 0c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9L370.7 96 201.4 265.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L416 141.3l41.4 41.4c9.2 9.2 22.9 11.9 34.9 6.9s19.8-16.6 19.8-29.6V32c0-17.7-14.3-32-32-32H352zM80 32C35.8 32 0 67.8 0 112V432c0 44.2 35.8 80 80 80H400c44.2 0 80-35.8 80-80V320c0-17.7-14.3-32-32-32s-32 14.3-32 32V432c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V112c0-8.8 7.2-16 16-16H192c17.7 0 32-14.3 32-32s-14.3-32-32-32H80z"]},y3e={prefix:"fas",iconName:"circle-info",icon:[512,512,["info-circle"],"f05a","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336h24V272H216c-13.3 0-24-10.7-24-24s10.7-24 24-24h48c13.3 0 24 10.7 24 24v88h8c13.3 0 24 10.7 24 24s-10.7 24-24 24H216c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},b3e=y3e,S3e={prefix:"fas",iconName:"crosshairs",icon:[512,512,[],"f05b","M256 0c17.7 0 32 14.3 32 32V42.4c93.7 13.9 167.7 88 181.6 181.6H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H469.6c-13.9 93.7-88 167.7-181.6 181.6V480c0 17.7-14.3 32-32 32s-32-14.3-32-32V469.6C130.3 455.7 56.3 381.7 42.4 288H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H42.4C56.3 130.3 130.3 56.3 224 42.4V32c0-17.7 14.3-32 32-32zM107.4 288c12.5 58.3 58.4 104.1 116.6 116.6V384c0-17.7 14.3-32 32-32s32 14.3 32 32v20.6c58.3-12.5 104.1-58.4 116.6-116.6H384c-17.7 0-32-14.3-32-32s14.3-32 32-32h20.6C392.1 165.7 346.3 119.9 288 107.4V128c0 17.7-14.3 32-32 32s-32-14.3-32-32V107.4C165.7 119.9 119.9 165.7 107.4 224H128c17.7 0 32 14.3 32 32s-14.3 32-32 32H107.4zM256 224a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},_3e={prefix:"fas",iconName:"minus",icon:[448,512,[8211,8722,10134,"subtract"],"f068","M432 256c0 17.7-14.3 32-32 32L48 288c-17.7 0-32-14.3-32-32s14.3-32 32-32l352 0c17.7 0 32 14.3 32 32z"]},w3e={prefix:"fas",iconName:"file-arrow-down",icon:[384,512,["file-download"],"f56d","M64 0C28.7 0 0 28.7 0 64V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V160H256c-17.7 0-32-14.3-32-32V0H64zM256 0V128H384L256 0zM216 232V334.1l31-31c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-72 72c-9.4 9.4-24.6 9.4-33.9 0l-72-72c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l31 31V232c0-13.3 10.7-24 24-24s24 10.7 24 24z"]},k3e={prefix:"fas",iconName:"plus",icon:[448,512,[10133,61543,"add"],"2b","M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"]},x3e={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},C3e={prefix:"fas",iconName:"percent",icon:[384,512,[62101,62785,"percentage"],"25","M374.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-320 320c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l320-320zM128 128A64 64 0 1 0 0 128a64 64 0 1 0 128 0zM384 384a64 64 0 1 0 -128 0 64 64 0 1 0 128 0z"]},T3e={prefix:"fas",iconName:"circle-plus",icon:[512,512,["plus-circle"],"f055","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM232 344V280H168c-13.3 0-24-10.7-24-24s10.7-24 24-24h64V168c0-13.3 10.7-24 24-24s24 10.7 24 24v64h64c13.3 0 24 10.7 24 24s-10.7 24-24 24H280v64c0 13.3-10.7 24-24 24s-24-10.7-24-24z"]},A3e=T3e,P3e={prefix:"fas",iconName:"check",icon:[448,512,[10003,10004],"f00c","M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]},E3e={prefix:"fas",iconName:"triangle-exclamation",icon:[512,512,[9888,"exclamation-triangle","warning"],"f071","M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},O3e=!1;/*!
  * pinia v2.0.36
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */let bee;const NT=t=>bee=t,See=Symbol();function Y8(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Qb;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Qb||(Qb={}));function I3e(){const t=N6(!0),e=t.run(()=>Tl({}));let n=[],r=[];const i=vg({install(o){NT(i),i._a=o,o.provide(See,i),o.config.globalProperties.$pinia=i,r.forEach(a=>n.push(a)),r=[]},use(o){return!this._a&&!O3e?r.push(o):n.push(o),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return i}const _ee=()=>{};function tB(t,e,n,r=_ee){t.push(e);const i=()=>{const o=t.indexOf(e);o>-1&&(t.splice(o,1),r())};return!n&&M6()&&RK(i),i}function wm(t,...e){t.slice().forEach(n=>{n(...e)})}function K8(t,e){t instanceof Map&&e instanceof Map&&e.forEach((n,r)=>t.set(r,n)),t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],i=t[n];Y8(i)&&Y8(r)&&t.hasOwnProperty(n)&&!fi(r)&&!hf(r)?t[n]=K8(i,r):t[n]=r}return t}const $3e=Symbol();function F3e(t){return!Y8(t)||!t.hasOwnProperty($3e)}const{assign:fd}=Object;function L3e(t){return!!(fi(t)&&t.effect)}function D3e(t,e,n,r){const{state:i,actions:o,getters:a}=e,s=n.state.value[t];let l;function c(){s||(n.state.value[t]=i?i():{});const u=W6(n.state.value[t]);return fd(u,o,Object.keys(a||{}).reduce((f,d)=>(f[d]=vg(Fn(()=>{NT(n);const h=n._s.get(t);return a[d].call(h,h)})),f),{}))}return l=wee(t,c,e,n,r,!0),l}function wee(t,e,n={},r,i,o){let a;const s=fd({actions:{}},n),l={deep:!0};let c,u,f=vg([]),d=vg([]),h;const g=r.state.value[t];!o&&!g&&(r.state.value[t]={}),Tl({});let y;function S(T){let E;c=u=!1,typeof T=="function"?(T(r.state.value[t]),E={type:Qb.patchFunction,storeId:t,events:h}):(K8(r.state.value[t],T),E={type:Qb.patchObject,payload:T,storeId:t,events:h});const I=y=Symbol();P0().then(()=>{y===I&&(c=!0)}),u=!0,wm(f,E,r.state.value[t])}const v=o?function(){const{state:E}=n,I=E?E():{};this.$patch(D=>{fd(D,I)})}:_ee;function _(){a.stop(),f=[],d=[],r._s.delete(t)}function x(T,E){return function(){NT(r);const I=Array.from(arguments),D=[],F=[];function R(ie){D.push(ie)}function z(ie){F.push(ie)}wm(d,{args:I,name:T,store:k,after:R,onError:z});let B;try{B=E.apply(this&&this.$id===t?this:k,I)}catch(ie){throw wm(F,ie),ie}return B instanceof Promise?B.then(ie=>(wm(D,ie),ie)).catch(ie=>(wm(F,ie),Promise.reject(ie))):(wm(D,B),B)}}const C={_p:r,$id:t,$onAction:tB.bind(null,d),$patch:S,$reset:v,$subscribe(T,E={}){const I=tB(f,T,E.detached,()=>D()),D=a.run(()=>ki(()=>r.state.value[t],F=>{(E.flush==="sync"?u:c)&&T({storeId:t,type:Qb.direct,events:h},F)},fd({},l,E)));return I},$dispose:_},k=hh(C);r._s.set(t,k);const m=r._e.run(()=>(a=N6(),a.run(()=>e())));for(const T in m){const E=m[T];if(fi(E)&&!L3e(E)||hf(E))o||(g&&F3e(E)&&(fi(E)?E.value=g[T]:K8(E,g[T])),r.state.value[t][T]=E);else if(typeof E=="function"){const I=x(T,E);m[T]=I,s.actions[T]=E}}return fd(k,m),fd(Dn(k),m),Object.defineProperty(k,"$state",{get:()=>r.state.value[t],set:T=>{S(E=>{fd(E,T)})}}),r._p.forEach(T=>{fd(k,a.run(()=>T({store:k,app:r._a,pinia:r,options:s})))}),g&&o&&n.hydrate&&n.hydrate(k.$state,g),c=!0,u=!0,k}function F0(t,e,n){let r,i;const o=typeof e=="function";typeof t=="string"?(r=t,i=o?n:e):(i=t,r=t.id);function a(s,l){const c=bc();return s=s||c&&Ni(See,null),s&&NT(s),s=bee,s._s.has(r)||(o?wee(r,e,i,s):D3e(r,i,s)),s._s.get(r)}return a.$id=r,a}let N3e="Store";function Mt(...t){return t.reduce((e,n)=>(e[n.$id+N3e]=function(){return n(this.$pinia)},e),{})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var X8=function(t,e){return X8=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},X8(t,e)};function xr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");X8(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var M3e=function(){function t(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return t}(),R3e=function(){function t(){this.browser=new M3e,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return t}(),_p=new R3e;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(_p.wxa=!0,_p.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?_p.worker=!0:typeof navigator>"u"?(_p.node=!0,_p.svgSupported=!0):z3e(navigator.userAgent,_p);function z3e(t,e){var n=e.browser,r=t.match(/Firefox\/([\d.]+)/),i=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/.+?rv:(([\d.]+))/),o=t.match(/Edge?\/([\d.]+)/),a=/micromessenger/i.test(t);r&&(n.firefox=!0,n.version=r[1]),i&&(n.ie=!0,n.version=i[1]),o&&(n.edge=!0,n.version=o[1],n.newEdge=+o[1].split(".")[0]>18),a&&(n.weChat=!0),e.svgSupported=typeof SVGRect<"u",e.touchEventsSupported="ontouchstart"in window&&!n.ie&&!n.edge,e.pointerEventsSupported="onpointerdown"in window&&(n.edge||n.ie&&+n.version>=11),e.domSupported=typeof document<"u";var s=document.documentElement.style;e.transform3dSupported=(n.ie&&"transition"in s||n.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in s)&&!("OTransition"in s),e.transformSupported=e.transform3dSupported||n.ie&&+n.version>=9}const Pn=_p;var YI=12,kee="sans-serif",oh=YI+"px "+kee,V3e=20,B3e=100,j3e="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function H3e(t){var e={};if(typeof JSON>"u")return e;for(var n=0;n<t.length;n++){var r=String.fromCharCode(n+32),i=(t.charCodeAt(n)-V3e)/B3e;e[r]=i}return e}var U3e=H3e(j3e),L0={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var t,e;return function(n,r){if(!t){var i=L0.createCanvas();t=i&&i.getContext("2d")}if(t)return e!==r&&(e=t.font=r||oh),t.measureText(n);n=n||"",r=r||oh;var o=/(\d+)px/.exec(r),a=o&&+o[1]||YI,s=0;if(r.indexOf("mono")>=0)s=a*n.length;else for(var l=0;l<n.length;l++){var c=U3e[n[l]];s+=c==null?a:c*a}return{width:s}}}(),loadImage:function(t,e,n){var r=new Image;return r.onload=e,r.onerror=n,r.src=t,r}},xee=ah(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(t,e){return t["[object "+e+"]"]=!0,t},{}),Cee=ah(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(t,e){return t["[object "+e+"Array]"]=!0,t},{}),lS=Object.prototype.toString,MT=Array.prototype,W3e=MT.forEach,G3e=MT.filter,KI=MT.slice,q3e=MT.map,nB=(function(){}).constructor,Aw=nB?nB.prototype:null,XI="__proto__",Y3e=2311;function Tee(){return Y3e++}function JI(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];typeof console<"u"&&console.error.apply(console,t)}function Gn(t){if(t==null||typeof t!="object")return t;var e=t,n=lS.call(t);if(n==="[object Array]"){if(!e1(t)){e=[];for(var r=0,i=t.length;r<i;r++)e[r]=Gn(t[r])}}else if(Cee[n]){if(!e1(t)){var o=t.constructor;if(o.from)e=o.from(t);else{e=new o(t.length);for(var r=0,i=t.length;r<i;r++)e[r]=t[r]}}}else if(!xee[n]&&!e1(t)&&!P4(t)){e={};for(var a in t)t.hasOwnProperty(a)&&a!==XI&&(e[a]=Gn(t[a]))}return e}function hi(t,e,n){if(!jt(e)||!jt(t))return n?Gn(e):t;for(var r in e)if(e.hasOwnProperty(r)&&r!==XI){var i=t[r],o=e[r];jt(o)&&jt(i)&&!mt(o)&&!mt(i)&&!P4(o)&&!P4(i)&&!rB(o)&&!rB(i)&&!e1(o)&&!e1(i)?hi(i,o,n):(n||!(r in t))&&(t[r]=Gn(e[r]))}return t}function ot(t,e){if(Object.assign)Object.assign(t,e);else for(var n in e)e.hasOwnProperty(n)&&n!==XI&&(t[n]=e[n]);return t}function gi(t,e,n){for(var r=ir(e),i=0;i<r.length;i++){var o=r[i];(n?e[o]!=null:t[o]==null)&&(t[o]=e[o])}return t}function wr(t,e){if(t){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n}return-1}function K3e(t,e){var n=t.prototype;function r(){}r.prototype=e.prototype,t.prototype=new r;for(var i in n)n.hasOwnProperty(i)&&(t.prototype[i]=n[i]);t.prototype.constructor=t,t.superClass=e}function wc(t,e,n){if(t="prototype"in t?t.prototype:t,e="prototype"in e?e.prototype:e,Object.getOwnPropertyNames)for(var r=Object.getOwnPropertyNames(e),i=0;i<r.length;i++){var o=r[i];o!=="constructor"&&(n?e[o]!=null:t[o]==null)&&(t[o]=e[o])}else gi(t,e,n)}function ds(t){return!t||typeof t=="string"?!1:typeof t.length=="number"}function be(t,e,n){if(t&&e)if(t.forEach&&t.forEach===W3e)t.forEach(e,n);else if(t.length===+t.length)for(var r=0,i=t.length;r<i;r++)e.call(n,t[r],r,t);else for(var o in t)t.hasOwnProperty(o)&&e.call(n,t[o],o,t)}function tn(t,e,n){if(!t)return[];if(!e)return ZI(t);if(t.map&&t.map===q3e)return t.map(e,n);for(var r=[],i=0,o=t.length;i<o;i++)r.push(e.call(n,t[i],i,t));return r}function ah(t,e,n,r){if(t&&e){for(var i=0,o=t.length;i<o;i++)n=e.call(r,n,t[i],i,t);return n}}function Za(t,e,n){if(!t)return[];if(!e)return ZI(t);if(t.filter&&t.filter===G3e)return t.filter(e,n);for(var r=[],i=0,o=t.length;i<o;i++)e.call(n,t[i],i,t)&&r.push(t[i]);return r}function ir(t){if(!t)return[];if(Object.keys)return Object.keys(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}function X3e(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return function(){return t.apply(e,n.concat(KI.call(arguments)))}}var Or=Aw&&Qn(Aw.bind)?Aw.call.bind(Aw.bind):X3e;function zr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return function(){return t.apply(this,e.concat(KI.call(arguments)))}}function mt(t){return Array.isArray?Array.isArray(t):lS.call(t)==="[object Array]"}function Qn(t){return typeof t=="function"}function Ot(t){return typeof t=="string"}function J8(t){return lS.call(t)==="[object String]"}function Zr(t){return typeof t=="number"}function jt(t){var e=typeof t;return e==="function"||!!t&&e==="object"}function rB(t){return!!xee[lS.call(t)]}function js(t){return!!Cee[lS.call(t)]}function P4(t){return typeof t=="object"&&typeof t.nodeType=="number"&&typeof t.ownerDocument=="object"}function RT(t){return t.colorStops!=null}function J3e(t){return t.image!=null}function Z3e(t){return t!==t}function xg(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,r=t.length;n<r;n++)if(t[n]!=null)return t[n]}function mn(t,e){return t??e}function Fv(t,e,n){return t??e??n}function ZI(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return KI.apply(t,e)}function Aee(t){if(typeof t=="number")return[t,t,t,t];var e=t.length;return e===2?[t[0],t[1],t[0],t[1]]:e===3?[t[0],t[1],t[2],t[1]]:t}function Hs(t,e){if(!t)throw new Error(e)}function au(t){return t==null?null:typeof t.trim=="function"?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var Pee="__ec_primitive__";function Z8(t){t[Pee]=!0}function e1(t){return t[Pee]}var Q3e=function(){function t(){this.data={}}return t.prototype.delete=function(e){var n=this.has(e);return n&&delete this.data[e],n},t.prototype.has=function(e){return this.data.hasOwnProperty(e)},t.prototype.get=function(e){return this.data[e]},t.prototype.set=function(e,n){return this.data[e]=n,this},t.prototype.keys=function(){return ir(this.data)},t.prototype.forEach=function(e){var n=this.data;for(var r in n)n.hasOwnProperty(r)&&e(n[r],r)},t}(),Eee=typeof Map=="function";function eAe(){return Eee?new Map:new Q3e}var tAe=function(){function t(e){var n=mt(e);this.data=eAe();var r=this;e instanceof t?e.each(i):e&&be(e,i);function i(o,a){n?r.set(o,a):r.set(a,o)}}return t.prototype.hasKey=function(e){return this.data.has(e)},t.prototype.get=function(e){return this.data.get(e)},t.prototype.set=function(e,n){return this.data.set(e,n),n},t.prototype.each=function(e,n){this.data.forEach(function(r,i){e.call(n,r,i)})},t.prototype.keys=function(){var e=this.data.keys();return Eee?Array.from(e):e},t.prototype.removeKey=function(e){this.data.delete(e)},t}();function vn(t){return new tAe(t)}function nAe(t,e){for(var n=new t.constructor(t.length+e.length),r=0;r<t.length;r++)n[r]=t[r];for(var i=t.length,r=0;r<e.length;r++)n[r+i]=e[r];return n}function zT(t,e){var n;if(Object.create)n=Object.create(t);else{var r=function(){};r.prototype=t,n=new r}return e&&ot(n,e),n}function Oee(t){var e=t.style;e.webkitUserSelect="none",e.userSelect="none",e.webkitTapHighlightColor="rgba(0,0,0,0)",e["-webkit-touch-callout"]="none"}function l0(t,e){return t.hasOwnProperty(e)}function Jo(){}var cx=180/Math.PI;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Q8=function(t,e){return Q8=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Q8(t,e)};function Cr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Q8(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function D0(t,e){return t==null&&(t=0),e==null&&(e=0),[t,e]}function rAe(t){return[t[0],t[1]]}function iB(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function iAe(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function oAe(t){return Math.sqrt(aAe(t))}function aAe(t){return t[0]*t[0]+t[1]*t[1]}function nP(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function sAe(t,e){var n=oAe(e);return n===0?(t[0]=0,t[1]=0):(t[0]=e[0]/n,t[1]=e[1]/n),t}function e9(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}var t9=e9;function lAe(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}var Lv=lAe;function rP(t,e,n,r){return t[0]=e[0]+r*(n[0]-e[0]),t[1]=e[1]+r*(n[1]-e[1]),t}function fu(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t}function uv(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function fv(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}var km=function(){function t(e,n){this.target=e,this.topTarget=n&&n.topTarget}return t}(),cAe=function(){function t(e){this.handler=e,e.on("mousedown",this._dragStart,this),e.on("mousemove",this._drag,this),e.on("mouseup",this._dragEnd,this)}return t.prototype._dragStart=function(e){for(var n=e.target;n&&!n.draggable;)n=n.parent||n.__hostTarget;n&&(this._draggingTarget=n,n.dragging=!0,this._x=e.offsetX,this._y=e.offsetY,this.handler.dispatchToElement(new km(n,e),"dragstart",e.event))},t.prototype._drag=function(e){var n=this._draggingTarget;if(n){var r=e.offsetX,i=e.offsetY,o=r-this._x,a=i-this._y;this._x=r,this._y=i,n.drift(o,a,e),this.handler.dispatchToElement(new km(n,e),"drag",e.event);var s=this.handler.findHover(r,i,n).target,l=this._dropTarget;this._dropTarget=s,n!==s&&(l&&s!==l&&this.handler.dispatchToElement(new km(l,e),"dragleave",e.event),s&&s!==l&&this.handler.dispatchToElement(new km(s,e),"dragenter",e.event))}},t.prototype._dragEnd=function(e){var n=this._draggingTarget;n&&(n.dragging=!1),this.handler.dispatchToElement(new km(n,e),"dragend",e.event),this._dropTarget&&this.handler.dispatchToElement(new km(this._dropTarget,e),"drop",e.event),this._draggingTarget=null,this._dropTarget=null},t}();const uAe=cAe;var fAe=function(){function t(e){e&&(this._$eventProcessor=e)}return t.prototype.on=function(e,n,r,i){this._$handlers||(this._$handlers={});var o=this._$handlers;if(typeof n=="function"&&(i=r,r=n,n=null),!r||!e)return this;var a=this._$eventProcessor;n!=null&&a&&a.normalizeQuery&&(n=a.normalizeQuery(n)),o[e]||(o[e]=[]);for(var s=0;s<o[e].length;s++)if(o[e][s].h===r)return this;var l={h:r,query:n,ctx:i||this,callAtLast:r.zrEventfulCallAtLast},c=o[e].length-1,u=o[e][c];return u&&u.callAtLast?o[e].splice(c,0,l):o[e].push(l),this},t.prototype.isSilent=function(e){var n=this._$handlers;return!n||!n[e]||!n[e].length},t.prototype.off=function(e,n){var r=this._$handlers;if(!r)return this;if(!e)return this._$handlers={},this;if(n){if(r[e]){for(var i=[],o=0,a=r[e].length;o<a;o++)r[e][o].h!==n&&i.push(r[e][o]);r[e]=i}r[e]&&r[e].length===0&&delete r[e]}else delete r[e];return this},t.prototype.trigger=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(!this._$handlers)return this;var i=this._$handlers[e],o=this._$eventProcessor;if(i)for(var a=n.length,s=i.length,l=0;l<s;l++){var c=i[l];if(!(o&&o.filter&&c.query!=null&&!o.filter(e,c.query)))switch(a){case 0:c.h.call(c.ctx);break;case 1:c.h.call(c.ctx,n[0]);break;case 2:c.h.call(c.ctx,n[0],n[1]);break;default:c.h.apply(c.ctx,n);break}}return o&&o.afterTrigger&&o.afterTrigger(e),this},t.prototype.triggerWithContext=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(!this._$handlers)return this;var i=this._$handlers[e],o=this._$eventProcessor;if(i)for(var a=n.length,s=n[a-1],l=i.length,c=0;c<l;c++){var u=i[c];if(!(o&&o.filter&&u.query!=null&&!o.filter(e,u.query)))switch(a){case 0:u.h.call(s);break;case 1:u.h.call(s,n[0]);break;case 2:u.h.call(s,n[0],n[1]);break;default:u.h.apply(s,n.slice(1,a-1));break}}return o&&o.afterTrigger&&o.afterTrigger(e),this},t}();const wu=fAe;var dAe=Math.log(2);function n9(t,e,n,r,i,o){var a=r+"-"+i,s=t.length;if(o.hasOwnProperty(a))return o[a];if(e===1){var l=Math.round(Math.log((1<<s)-1&~i)/dAe);return t[n][l]}for(var c=r|1<<n,u=n+1;r&1<<u;)u++;for(var f=0,d=0,h=0;d<s;d++){var g=1<<d;g&i||(f+=(h%2?-1:1)*t[n][d]*n9(t,e-1,u,c,i|g,o),h++)}return o[a]=f,f}function oB(t,e){var n=[[t[0],t[1],1,0,0,0,-e[0]*t[0],-e[0]*t[1]],[0,0,0,t[0],t[1],1,-e[1]*t[0],-e[1]*t[1]],[t[2],t[3],1,0,0,0,-e[2]*t[2],-e[2]*t[3]],[0,0,0,t[2],t[3],1,-e[3]*t[2],-e[3]*t[3]],[t[4],t[5],1,0,0,0,-e[4]*t[4],-e[4]*t[5]],[0,0,0,t[4],t[5],1,-e[5]*t[4],-e[5]*t[5]],[t[6],t[7],1,0,0,0,-e[6]*t[6],-e[6]*t[7]],[0,0,0,t[6],t[7],1,-e[7]*t[6],-e[7]*t[7]]],r={},i=n9(n,8,0,0,0,r);if(i!==0){for(var o=[],a=0;a<8;a++)for(var s=0;s<8;s++)o[s]==null&&(o[s]=0),o[s]+=((a+s)%2?-1:1)*n9(n,7,a===0?1:0,1<<a,1<<s,r)/i*e[a];return function(l,c,u){var f=c*o[6]+u*o[7]+1;l[0]=(c*o[0]+u*o[1]+o[2])/f,l[1]=(c*o[3]+u*o[4]+o[5])/f}}}var aB="___zrEVENTSAVED",iP=[];function hAe(t,e,n,r,i){return r9(iP,e,r,i,!0)&&r9(t,n,iP[0],iP[1])}function r9(t,e,n,r,i){if(e.getBoundingClientRect&&Pn.domSupported&&!Iee(e)){var o=e[aB]||(e[aB]={}),a=pAe(e,o),s=gAe(a,o,i);if(s)return s(t,n,r),!0}return!1}function pAe(t,e){var n=e.markers;if(n)return n;n=e.markers=[];for(var r=["left","right"],i=["top","bottom"],o=0;o<4;o++){var a=document.createElement("div"),s=a.style,l=o%2,c=(o>>1)%2;s.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",r[l]+":0",i[c]+":0",r[1-l]+":auto",i[1-c]+":auto",""].join("!important;"),t.appendChild(a),n.push(a)}return n}function gAe(t,e,n){for(var r=n?"invTrans":"trans",i=e[r],o=e.srcCoords,a=[],s=[],l=!0,c=0;c<4;c++){var u=t[c].getBoundingClientRect(),f=2*c,d=u.left,h=u.top;a.push(d,h),l=l&&o&&d===o[f]&&h===o[f+1],s.push(t[c].offsetLeft,t[c].offsetTop)}return l&&i?i:(e.srcCoords=a,e[r]=n?oB(s,a):oB(a,s))}function Iee(t){return t.nodeName.toUpperCase()==="CANVAS"}var mAe=/([&<>"'])/g,vAe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Ls(t){return t==null?"":(t+"").replace(mAe,function(e,n){return vAe[n]})}var yAe=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,oP=[],bAe=Pn.browser.firefox&&+Pn.browser.version.split(".")[0]<39;function i9(t,e,n,r){return n=n||{},r?sB(t,e,n):bAe&&e.layerX!=null&&e.layerX!==e.offsetX?(n.zrX=e.layerX,n.zrY=e.layerY):e.offsetX!=null?(n.zrX=e.offsetX,n.zrY=e.offsetY):sB(t,e,n),n}function sB(t,e,n){if(Pn.domSupported&&t.getBoundingClientRect){var r=e.clientX,i=e.clientY;if(Iee(t)){var o=t.getBoundingClientRect();n.zrX=r-o.left,n.zrY=i-o.top;return}else if(r9(oP,t,r,i)){n.zrX=oP[0],n.zrY=oP[1];return}}n.zrX=n.zrY=0}function QI(t){return t||window.event}function cl(t,e,n){if(e=QI(e),e.zrX!=null)return e;var r=e.type,i=r&&r.indexOf("touch")>=0;if(i){var a=r!=="touchend"?e.targetTouches[0]:e.changedTouches[0];a&&i9(t,a,e,n)}else{i9(t,e,e,n);var o=SAe(e);e.zrDelta=o?o/120:-(e.detail||0)/3}var s=e.button;return e.which==null&&s!==void 0&&yAe.test(e.type)&&(e.which=s&1?1:s&2?3:s&4?2:0),e}function SAe(t){var e=t.wheelDelta;if(e)return e;var n=t.deltaX,r=t.deltaY;if(n==null||r==null)return e;var i=Math.abs(r!==0?r:n),o=r>0?-1:r<0?1:n>0?-1:1;return 3*i*o}function _Ae(t,e,n,r){t.addEventListener(e,n,r)}function wAe(t,e,n,r){t.removeEventListener(e,n,r)}var $ee=function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0},kAe=function(){function t(){this._track=[]}return t.prototype.recognize=function(e,n,r){return this._doTrack(e,n,r),this._recognize(e)},t.prototype.clear=function(){return this._track.length=0,this},t.prototype._doTrack=function(e,n,r){var i=e.touches;if(i){for(var o={points:[],touches:[],target:n,event:e},a=0,s=i.length;a<s;a++){var l=i[a],c=i9(r,l,{});o.points.push([c.zrX,c.zrY]),o.touches.push(l)}this._track.push(o)}},t.prototype._recognize=function(e){for(var n in aP)if(aP.hasOwnProperty(n)){var r=aP[n](this._track,e);if(r)return r}},t}();function lB(t){var e=t[1][0]-t[0][0],n=t[1][1]-t[0][1];return Math.sqrt(e*e+n*n)}function xAe(t){return[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]}var aP={pinch:function(t,e){var n=t.length;if(n){var r=(t[n-1]||{}).points,i=(t[n-2]||{}).points||r;if(i&&i.length>1&&r&&r.length>1){var o=lB(r)/lB(i);!isFinite(o)&&(o=1),e.pinchScale=o;var a=xAe(r);return e.pinchX=a[0],e.pinchY=a[1],{type:"pinch",target:t[0].target,event:e}}}}};function K1(){return[1,0,0,1,0,0]}function e$(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function CAe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Dv(t,e,n){var r=e[0]*n[0]+e[2]*n[1],i=e[1]*n[0]+e[3]*n[1],o=e[0]*n[2]+e[2]*n[3],a=e[1]*n[2]+e[3]*n[3],s=e[0]*n[4]+e[2]*n[5]+e[4],l=e[1]*n[4]+e[3]*n[5]+e[5];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t}function o9(t,e,n){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+n[0],t[5]=e[5]+n[1],t}function t$(t,e,n){var r=e[0],i=e[2],o=e[4],a=e[1],s=e[3],l=e[5],c=Math.sin(n),u=Math.cos(n);return t[0]=r*u+a*c,t[1]=-r*c+a*u,t[2]=i*u+s*c,t[3]=-i*c+u*s,t[4]=u*o+c*l,t[5]=u*l-c*o,t}function TAe(t,e,n){var r=n[0],i=n[1];return t[0]=e[0]*r,t[1]=e[1]*i,t[2]=e[2]*r,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*i,t}function Fee(t,e){var n=e[0],r=e[2],i=e[4],o=e[1],a=e[3],s=e[5],l=n*a-o*r;return l?(l=1/l,t[0]=a*l,t[1]=-o*l,t[2]=-r*l,t[3]=n*l,t[4]=(r*s-a*i)*l,t[5]=(o*i-n*s)*l,t):null}var AAe=function(){function t(e,n){this.x=e||0,this.y=n||0}return t.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.set=function(e,n){return this.x=e,this.y=n,this},t.prototype.equal=function(e){return e.x===this.x&&e.y===this.y},t.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},t.prototype.scale=function(e){this.x*=e,this.y*=e},t.prototype.scaleAndAdd=function(e,n){this.x+=e.x*n,this.y+=e.y*n},t.prototype.sub=function(e){return this.x-=e.x,this.y-=e.y,this},t.prototype.dot=function(e){return this.x*e.x+this.y*e.y},t.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},t.prototype.normalize=function(){var e=this.len();return this.x/=e,this.y/=e,this},t.prototype.distance=function(e){var n=this.x-e.x,r=this.y-e.y;return Math.sqrt(n*n+r*r)},t.prototype.distanceSquare=function(e){var n=this.x-e.x,r=this.y-e.y;return n*n+r*r},t.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.transform=function(e){if(e){var n=this.x,r=this.y;return this.x=e[0]*n+e[2]*r+e[4],this.y=e[1]*n+e[3]*r+e[5],this}},t.prototype.toArray=function(e){return e[0]=this.x,e[1]=this.y,e},t.prototype.fromArray=function(e){this.x=e[0],this.y=e[1]},t.set=function(e,n,r){e.x=n,e.y=r},t.copy=function(e,n){e.x=n.x,e.y=n.y},t.len=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},t.lenSquare=function(e){return e.x*e.x+e.y*e.y},t.dot=function(e,n){return e.x*n.x+e.y*n.y},t.add=function(e,n,r){e.x=n.x+r.x,e.y=n.y+r.y},t.sub=function(e,n,r){e.x=n.x-r.x,e.y=n.y-r.y},t.scale=function(e,n,r){e.x=n.x*r,e.y=n.y*r},t.scaleAndAdd=function(e,n,r,i){e.x=n.x+r.x*i,e.y=n.y+r.y*i},t.lerp=function(e,n,r,i){var o=1-i;e.x=o*n.x+i*r.x,e.y=o*n.y+i*r.y},t}();const ln=AAe;var Pw=Math.min,Ew=Math.max,Kh=new ln,Xh=new ln,Jh=new ln,Zh=new ln,Ry=new ln,zy=new ln,PAe=function(){function t(e,n,r,i){r<0&&(e=e+r,r=-r),i<0&&(n=n+i,i=-i),this.x=e,this.y=n,this.width=r,this.height=i}return t.prototype.union=function(e){var n=Pw(e.x,this.x),r=Pw(e.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=Ew(e.x+e.width,this.x+this.width)-n:this.width=e.width,isFinite(this.y)&&isFinite(this.height)?this.height=Ew(e.y+e.height,this.y+this.height)-r:this.height=e.height,this.x=n,this.y=r},t.prototype.applyTransform=function(e){t.applyTransform(this,this,e)},t.prototype.calculateTransform=function(e){var n=this,r=e.width/n.width,i=e.height/n.height,o=K1();return o9(o,o,[-n.x,-n.y]),TAe(o,o,[r,i]),o9(o,o,[e.x,e.y]),o},t.prototype.intersect=function(e,n){if(!e)return!1;e instanceof t||(e=t.create(e));var r=this,i=r.x,o=r.x+r.width,a=r.y,s=r.y+r.height,l=e.x,c=e.x+e.width,u=e.y,f=e.y+e.height,d=!(o<l||c<i||s<u||f<a);if(n){var h=1/0,g=0,y=Math.abs(o-l),S=Math.abs(c-i),v=Math.abs(s-u),_=Math.abs(f-a),x=Math.min(y,S),C=Math.min(v,_);o<l||c<i?x>g&&(g=x,y<S?ln.set(zy,-y,0):ln.set(zy,S,0)):x<h&&(h=x,y<S?ln.set(Ry,y,0):ln.set(Ry,-S,0)),s<u||f<a?C>g&&(g=C,v<_?ln.set(zy,0,-v):ln.set(zy,0,_)):x<h&&(h=x,v<_?ln.set(Ry,0,v):ln.set(Ry,0,-_))}return n&&ln.copy(n,d?Ry:zy),d},t.prototype.contain=function(e,n){var r=this;return e>=r.x&&e<=r.x+r.width&&n>=r.y&&n<=r.y+r.height},t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(e){t.copy(this,e)},t.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},t.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},t.prototype.isZero=function(){return this.width===0||this.height===0},t.create=function(e){return new t(e.x,e.y,e.width,e.height)},t.copy=function(e,n){e.x=n.x,e.y=n.y,e.width=n.width,e.height=n.height},t.applyTransform=function(e,n,r){if(!r){e!==n&&t.copy(e,n);return}if(r[1]<1e-5&&r[1]>-1e-5&&r[2]<1e-5&&r[2]>-1e-5){var i=r[0],o=r[3],a=r[4],s=r[5];e.x=n.x*i+a,e.y=n.y*o+s,e.width=n.width*i,e.height=n.height*o,e.width<0&&(e.x+=e.width,e.width=-e.width),e.height<0&&(e.y+=e.height,e.height=-e.height);return}Kh.x=Jh.x=n.x,Kh.y=Zh.y=n.y,Xh.x=Zh.x=n.x+n.width,Xh.y=Jh.y=n.y+n.height,Kh.transform(r),Zh.transform(r),Xh.transform(r),Jh.transform(r),e.x=Pw(Kh.x,Xh.x,Jh.x,Zh.x),e.y=Pw(Kh.y,Xh.y,Jh.y,Zh.y);var l=Ew(Kh.x,Xh.x,Jh.x,Zh.x),c=Ew(Kh.y,Xh.y,Jh.y,Zh.y);e.width=l-e.x,e.height=c-e.y},t}();const Ir=PAe;var Lee="silent";function EAe(t,e,n){return{type:t,event:n,target:e.target,topTarget:e.topTarget,cancelBubble:!1,offsetX:n.zrX,offsetY:n.zrY,gestureEvent:n.gestureEvent,pinchX:n.pinchX,pinchY:n.pinchY,pinchScale:n.pinchScale,wheelDelta:n.zrDelta,zrByTouch:n.zrByTouch,which:n.which,stop:OAe}}function OAe(){$ee(this.event)}var IAe=function(t){Cr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.handler=null,n}return e.prototype.dispose=function(){},e.prototype.setCursor=function(){},e}(wu),Vy=function(){function t(e,n){this.x=e,this.y=n}return t}(),$Ae=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],sP=new Ir(0,0,0,0),Dee=function(t){Cr(e,t);function e(n,r,i,o,a){var s=t.call(this)||this;return s._hovered=new Vy(0,0),s.storage=n,s.painter=r,s.painterRoot=o,s._pointerSize=a,i=i||new IAe,s.proxy=null,s.setHandlerProxy(i),s._draggingMgr=new uAe(s),s}return e.prototype.setHandlerProxy=function(n){this.proxy&&this.proxy.dispose(),n&&(be($Ae,function(r){n.on&&n.on(r,this[r],this)},this),n.handler=this),this.proxy=n},e.prototype.mousemove=function(n){var r=n.zrX,i=n.zrY,o=Nee(this,r,i),a=this._hovered,s=a.target;s&&!s.__zr&&(a=this.findHover(a.x,a.y),s=a.target);var l=this._hovered=o?new Vy(r,i):this.findHover(r,i),c=l.target,u=this.proxy;u.setCursor&&u.setCursor(c?c.cursor:"default"),s&&c!==s&&this.dispatchToElement(a,"mouseout",n),this.dispatchToElement(l,"mousemove",n),c&&c!==s&&this.dispatchToElement(l,"mouseover",n)},e.prototype.mouseout=function(n){var r=n.zrEventControl;r!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",n),r!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:n})},e.prototype.resize=function(){this._hovered=new Vy(0,0)},e.prototype.dispatch=function(n,r){var i=this[n];i&&i.call(this,r)},e.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},e.prototype.setCursorStyle=function(n){var r=this.proxy;r.setCursor&&r.setCursor(n)},e.prototype.dispatchToElement=function(n,r,i){n=n||{};var o=n.target;if(!(o&&o.silent)){for(var a="on"+r,s=EAe(r,n,i);o&&(o[a]&&(s.cancelBubble=!!o[a].call(o,s)),o.trigger(r,s),o=o.__hostTarget?o.__hostTarget:o.parent,!s.cancelBubble););s.cancelBubble||(this.trigger(r,s),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(l){typeof l[a]=="function"&&l[a].call(l,s),l.trigger&&l.trigger(r,s)}))}},e.prototype.findHover=function(n,r,i){var o=this.storage.getDisplayList(),a=new Vy(n,r);if(cB(o,a,n,r,i),this._pointerSize&&!a.target){for(var s=[],l=this._pointerSize,c=l/2,u=new Ir(n-c,r-c,l,l),f=o.length-1;f>=0;f--){var d=o[f];d!==i&&!d.ignore&&!d.ignoreCoarsePointer&&(!d.parent||!d.parent.ignoreCoarsePointer)&&(sP.copy(d.getBoundingRect()),d.transform&&sP.applyTransform(d.transform),sP.intersect(u)&&s.push(d))}if(s.length)for(var h=4,g=Math.PI/12,y=Math.PI*2,S=0;S<c;S+=h)for(var v=0;v<y;v+=g){var _=n+S*Math.cos(v),x=r+S*Math.sin(v);if(cB(s,a,_,x,i),a.target)return a}}return a},e.prototype.processGesture=function(n,r){this._gestureMgr||(this._gestureMgr=new kAe);var i=this._gestureMgr;r==="start"&&i.clear();var o=i.recognize(n,this.findHover(n.zrX,n.zrY,null).target,this.proxy.dom);if(r==="end"&&i.clear(),o){var a=o.type;n.gestureEvent=a;var s=new Vy;s.target=o.target,this.dispatchToElement(s,a,o.event)}},e}(wu);be(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(t){Dee.prototype[t]=function(e){var n=e.zrX,r=e.zrY,i=Nee(this,n,r),o,a;if((t!=="mouseup"||!i)&&(o=this.findHover(n,r),a=o.target),t==="mousedown")this._downEl=a,this._downPoint=[e.zrX,e.zrY],this._upEl=a;else if(t==="mouseup")this._upEl=a;else if(t==="click"){if(this._downEl!==this._upEl||!this._downPoint||t9(this._downPoint,[e.zrX,e.zrY])>4)return;this._downPoint=null}this.dispatchToElement(o,t,e)}});function FAe(t,e,n){if(t[t.rectHover?"rectContain":"contain"](e,n)){for(var r=t,i=void 0,o=!1;r;){if(r.ignoreClip&&(o=!0),!o){var a=r.getClipPath();if(a&&!a.contain(e,n))return!1;r.silent&&(i=!0)}var s=r.__hostTarget;r=s||r.parent}return i?Lee:!0}return!1}function cB(t,e,n,r,i){for(var o=t.length-1;o>=0;o--){var a=t[o],s=void 0;if(a!==i&&!a.ignore&&(s=FAe(a,n,r))&&(!e.topTarget&&(e.topTarget=a),s!==Lee)){e.target=a;break}}}function Nee(t,e,n){var r=t.painter;return e<0||e>r.getWidth()||n<0||n>r.getHeight()}const LAe=Dee;var Mee=32,By=7;function DAe(t){for(var e=0;t>=Mee;)e|=t&1,t>>=1;return t+e}function uB(t,e,n,r){var i=e+1;if(i===n)return 1;if(r(t[i++],t[e])<0){for(;i<n&&r(t[i],t[i-1])<0;)i++;NAe(t,e,i)}else for(;i<n&&r(t[i],t[i-1])>=0;)i++;return i-e}function NAe(t,e,n){for(n--;e<n;){var r=t[e];t[e++]=t[n],t[n--]=r}}function fB(t,e,n,r,i){for(r===e&&r++;r<n;r++){for(var o=t[r],a=e,s=r,l;a<s;)l=a+s>>>1,i(o,t[l])<0?s=l:a=l+1;var c=r-a;switch(c){case 3:t[a+3]=t[a+2];case 2:t[a+2]=t[a+1];case 1:t[a+1]=t[a];break;default:for(;c>0;)t[a+c]=t[a+c-1],c--}t[a]=o}}function lP(t,e,n,r,i,o){var a=0,s=0,l=1;if(o(t,e[n+i])>0){for(s=r-i;l<s&&o(t,e[n+i+l])>0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),a+=i,l+=i}else{for(s=i+1;l<s&&o(t,e[n+i-l])<=0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var c=a;a=i-l,l=i-c}for(a++;a<l;){var u=a+(l-a>>>1);o(t,e[n+u])>0?a=u+1:l=u}return l}function cP(t,e,n,r,i,o){var a=0,s=0,l=1;if(o(t,e[n+i])<0){for(s=i+1;l<s&&o(t,e[n+i-l])<0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var c=a;a=i-l,l=i-c}else{for(s=r-i;l<s&&o(t,e[n+i+l])>=0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),a+=i,l+=i}for(a++;a<l;){var u=a+(l-a>>>1);o(t,e[n+u])<0?l=u:a=u+1}return l}function MAe(t,e){var n=By,r,i,o=0;t.length;var a=[];r=[],i=[];function s(h,g){r[o]=h,i[o]=g,o+=1}function l(){for(;o>1;){var h=o-2;if(h>=1&&i[h-1]<=i[h]+i[h+1]||h>=2&&i[h-2]<=i[h]+i[h-1])i[h-1]<i[h+1]&&h--;else if(i[h]>i[h+1])break;u(h)}}function c(){for(;o>1;){var h=o-2;h>0&&i[h-1]<i[h+1]&&h--,u(h)}}function u(h){var g=r[h],y=i[h],S=r[h+1],v=i[h+1];i[h]=y+v,h===o-3&&(r[h+1]=r[h+2],i[h+1]=i[h+2]),o--;var _=cP(t[S],t,g,y,0,e);g+=_,y-=_,y!==0&&(v=lP(t[g+y-1],t,S,v,v-1,e),v!==0&&(y<=v?f(g,y,S,v):d(g,y,S,v)))}function f(h,g,y,S){var v=0;for(v=0;v<g;v++)a[v]=t[h+v];var _=0,x=y,C=h;if(t[C++]=t[x++],--S===0){for(v=0;v<g;v++)t[C+v]=a[_+v];return}if(g===1){for(v=0;v<S;v++)t[C+v]=t[x+v];t[C+S]=a[_];return}for(var k=n,m,T,E;;){m=0,T=0,E=!1;do if(e(t[x],a[_])<0){if(t[C++]=t[x++],T++,m=0,--S===0){E=!0;break}}else if(t[C++]=a[_++],m++,T=0,--g===1){E=!0;break}while((m|T)<k);if(E)break;do{if(m=cP(t[x],a,_,g,0,e),m!==0){for(v=0;v<m;v++)t[C+v]=a[_+v];if(C+=m,_+=m,g-=m,g<=1){E=!0;break}}if(t[C++]=t[x++],--S===0){E=!0;break}if(T=lP(a[_],t,x,S,0,e),T!==0){for(v=0;v<T;v++)t[C+v]=t[x+v];if(C+=T,x+=T,S-=T,S===0){E=!0;break}}if(t[C++]=a[_++],--g===1){E=!0;break}k--}while(m>=By||T>=By);if(E)break;k<0&&(k=0),k+=2}if(n=k,n<1&&(n=1),g===1){for(v=0;v<S;v++)t[C+v]=t[x+v];t[C+S]=a[_]}else{if(g===0)throw new Error;for(v=0;v<g;v++)t[C+v]=a[_+v]}}function d(h,g,y,S){var v=0;for(v=0;v<S;v++)a[v]=t[y+v];var _=h+g-1,x=S-1,C=y+S-1,k=0,m=0;if(t[C--]=t[_--],--g===0){for(k=C-(S-1),v=0;v<S;v++)t[k+v]=a[v];return}if(S===1){for(C-=g,_-=g,m=C+1,k=_+1,v=g-1;v>=0;v--)t[m+v]=t[k+v];t[C]=a[x];return}for(var T=n;;){var E=0,I=0,D=!1;do if(e(a[x],t[_])<0){if(t[C--]=t[_--],E++,I=0,--g===0){D=!0;break}}else if(t[C--]=a[x--],I++,E=0,--S===1){D=!0;break}while((E|I)<T);if(D)break;do{if(E=g-cP(a[x],t,h,g,g-1,e),E!==0){for(C-=E,_-=E,g-=E,m=C+1,k=_+1,v=E-1;v>=0;v--)t[m+v]=t[k+v];if(g===0){D=!0;break}}if(t[C--]=a[x--],--S===1){D=!0;break}if(I=S-lP(t[_],a,0,S,S-1,e),I!==0){for(C-=I,x-=I,S-=I,m=C+1,k=x+1,v=0;v<I;v++)t[m+v]=a[k+v];if(S<=1){D=!0;break}}if(t[C--]=t[_--],--g===0){D=!0;break}T--}while(E>=By||I>=By);if(D)break;T<0&&(T=0),T+=2}if(n=T,n<1&&(n=1),S===1){for(C-=g,_-=g,m=C+1,k=_+1,v=g-1;v>=0;v--)t[m+v]=t[k+v];t[C]=a[x]}else{if(S===0)throw new Error;for(k=C-(S-1),v=0;v<S;v++)t[k+v]=a[v]}}return{mergeRuns:l,forceMergeRuns:c,pushRun:s}}function ux(t,e,n,r){n||(n=0),r||(r=t.length);var i=r-n;if(!(i<2)){var o=0;if(i<Mee){o=uB(t,n,r,e),fB(t,n,r,n+o,e);return}var a=MAe(t,e),s=DAe(i);do{if(o=uB(t,n,r,e),o<s){var l=i;l>s&&(l=s),fB(t,n,n+l,n+o,e),o=l}a.pushRun(n,o),a.mergeRuns(),i-=o,n+=o}while(i!==0);a.forceMergeRuns()}}var Ns=1,Ab=2,Km=4,dB=!1;function uP(){dB||(dB=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function hB(t,e){return t.zlevel===e.zlevel?t.z===e.z?t.z2-e.z2:t.z-e.z:t.zlevel-e.zlevel}var RAe=function(){function t(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=hB}return t.prototype.traverse=function(e,n){for(var r=0;r<this._roots.length;r++)this._roots[r].traverse(e,n)},t.prototype.getDisplayList=function(e,n){n=n||!1;var r=this._displayList;return(e||!r.length)&&this.updateDisplayList(n),r},t.prototype.updateDisplayList=function(e){this._displayListLen=0;for(var n=this._roots,r=this._displayList,i=0,o=n.length;i<o;i++)this._updateAndAddDisplayable(n[i],null,e);r.length=this._displayListLen,ux(r,hB)},t.prototype._updateAndAddDisplayable=function(e,n,r){if(!(e.ignore&&!r)){e.beforeUpdate(),e.update(),e.afterUpdate();var i=e.getClipPath();if(e.ignoreClip)n=null;else if(i){n?n=n.slice():n=[];for(var o=i,a=e;o;)o.parent=a,o.updateTransform(),n.push(o),a=o,o=o.getClipPath()}if(e.childrenRef){for(var s=e.childrenRef(),l=0;l<s.length;l++){var c=s[l];e.__dirty&&(c.__dirty|=Ns),this._updateAndAddDisplayable(c,n,r)}e.__dirty=0}else{var u=e;n&&n.length?u.__clipPaths=n:u.__clipPaths&&u.__clipPaths.length>0&&(u.__clipPaths=[]),isNaN(u.z)&&(uP(),u.z=0),isNaN(u.z2)&&(uP(),u.z2=0),isNaN(u.zlevel)&&(uP(),u.zlevel=0),this._displayList[this._displayListLen++]=u}var f=e.getDecalElement&&e.getDecalElement();f&&this._updateAndAddDisplayable(f,n,r);var d=e.getTextGuideLine();d&&this._updateAndAddDisplayable(d,n,r);var h=e.getTextContent();h&&this._updateAndAddDisplayable(h,n,r)}},t.prototype.addRoot=function(e){e.__zr&&e.__zr.storage===this||this._roots.push(e)},t.prototype.delRoot=function(e){if(e instanceof Array){for(var n=0,r=e.length;n<r;n++)this.delRoot(e[n]);return}var i=wr(this._roots,e);i>=0&&this._roots.splice(i,1)},t.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},t.prototype.getRoots=function(){return this._roots},t.prototype.dispose=function(){this._displayList=null,this._roots=null},t}();const zAe=RAe;var Ree;Ree=Pn.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(t){return setTimeout(t,16)};const a9=Ree;var fx={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return .5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return t===0?0:Math.pow(1024,t-1)},exponentialOut:function(t){return t===1?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return t===0?0:t===1?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var e,n=.1,r=.4;return t===0?0:t===1?1:(!n||n<1?(n=1,e=r/4):e=r*Math.asin(1/n)/(2*Math.PI),-(n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)))},elasticOut:function(t){var e,n=.1,r=.4;return t===0?0:t===1?1:(!n||n<1?(n=1,e=r/4):e=r*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/r)+1)},elasticInOut:function(t){var e,n=.1,r=.4;return t===0?0:t===1?1:(!n||n<1?(n=1,e=r/4):e=r*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?-.5*(n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)):n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/r)*.5+1)},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},backInOut:function(t){var e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)},bounceIn:function(t){return 1-fx.bounceOut(1-t)},bounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return t<.5?fx.bounceIn(t*2)*.5:fx.bounceOut(t*2-1)*.5+.5}};const zee=fx;var Ow=Math.pow,Ld=Math.sqrt,E4=1e-8,Vee=1e-4,pB=Ld(3),Iw=1/3,Qc=D0(),pl=D0(),Nv=D0();function kd(t){return t>-E4&&t<E4}function Bee(t){return t>E4||t<-E4}function wo(t,e,n,r,i){var o=1-i;return o*o*(o*t+3*i*e)+i*i*(i*r+3*o*n)}function gB(t,e,n,r,i){var o=1-i;return 3*(((e-t)*o+2*(n-e)*i)*o+(r-n)*i*i)}function jee(t,e,n,r,i,o){var a=r+3*(e-n)-t,s=3*(n-e*2+t),l=3*(e-t),c=t-i,u=s*s-3*a*l,f=s*l-9*a*c,d=l*l-3*s*c,h=0;if(kd(u)&&kd(f))if(kd(s))o[0]=0;else{var g=-l/s;g>=0&&g<=1&&(o[h++]=g)}else{var y=f*f-4*u*d;if(kd(y)){var S=f/u,g=-s/a+S,v=-S/2;g>=0&&g<=1&&(o[h++]=g),v>=0&&v<=1&&(o[h++]=v)}else if(y>0){var _=Ld(y),x=u*s+1.5*a*(-f+_),C=u*s+1.5*a*(-f-_);x<0?x=-Ow(-x,Iw):x=Ow(x,Iw),C<0?C=-Ow(-C,Iw):C=Ow(C,Iw);var g=(-s-(x+C))/(3*a);g>=0&&g<=1&&(o[h++]=g)}else{var k=(2*u*s-3*a*f)/(2*Ld(u*u*u)),m=Math.acos(k)/3,T=Ld(u),E=Math.cos(m),g=(-s-2*T*E)/(3*a),v=(-s+T*(E+pB*Math.sin(m)))/(3*a),I=(-s+T*(E-pB*Math.sin(m)))/(3*a);g>=0&&g<=1&&(o[h++]=g),v>=0&&v<=1&&(o[h++]=v),I>=0&&I<=1&&(o[h++]=I)}}return h}function Hee(t,e,n,r,i){var o=6*n-12*e+6*t,a=9*e+3*r-3*t-9*n,s=3*e-3*t,l=0;if(kd(a)){if(Bee(o)){var c=-s/o;c>=0&&c<=1&&(i[l++]=c)}}else{var u=o*o-4*a*s;if(kd(u))i[0]=-o/(2*a);else if(u>0){var f=Ld(u),c=(-o+f)/(2*a),d=(-o-f)/(2*a);c>=0&&c<=1&&(i[l++]=c),d>=0&&d<=1&&(i[l++]=d)}}return l}function O4(t,e,n,r,i,o){var a=(e-t)*i+t,s=(n-e)*i+e,l=(r-n)*i+n,c=(s-a)*i+a,u=(l-s)*i+s,f=(u-c)*i+c;o[0]=t,o[1]=a,o[2]=c,o[3]=f,o[4]=f,o[5]=u,o[6]=l,o[7]=r}function VAe(t,e,n,r,i,o,a,s,l,c,u){var f,d=.005,h=1/0,g,y,S,v;Qc[0]=l,Qc[1]=c;for(var _=0;_<1;_+=.05)pl[0]=wo(t,n,i,a,_),pl[1]=wo(e,r,o,s,_),S=Lv(Qc,pl),S<h&&(f=_,h=S);h=1/0;for(var x=0;x<32&&!(d<Vee);x++)g=f-d,y=f+d,pl[0]=wo(t,n,i,a,g),pl[1]=wo(e,r,o,s,g),S=Lv(pl,Qc),g>=0&&S<h?(f=g,h=S):(Nv[0]=wo(t,n,i,a,y),Nv[1]=wo(e,r,o,s,y),v=Lv(Nv,Qc),y<=1&&v<h?(f=y,h=v):d*=.5);return u&&(u[0]=wo(t,n,i,a,f),u[1]=wo(e,r,o,s,f)),Ld(h)}function BAe(t,e,n,r,i,o,a,s,l){for(var c=t,u=e,f=0,d=1/l,h=1;h<=l;h++){var g=h*d,y=wo(t,n,i,a,g),S=wo(e,r,o,s,g),v=y-c,_=S-u;f+=Math.sqrt(v*v+_*_),c=y,u=S}return f}function Ho(t,e,n,r){var i=1-r;return i*(i*t+2*r*e)+r*r*n}function mB(t,e,n,r){return 2*((1-r)*(e-t)+r*(n-e))}function jAe(t,e,n,r,i){var o=t-2*e+n,a=2*(e-t),s=t-r,l=0;if(kd(o)){if(Bee(a)){var c=-s/a;c>=0&&c<=1&&(i[l++]=c)}}else{var u=a*a-4*o*s;if(kd(u)){var c=-a/(2*o);c>=0&&c<=1&&(i[l++]=c)}else if(u>0){var f=Ld(u),c=(-a+f)/(2*o),d=(-a-f)/(2*o);c>=0&&c<=1&&(i[l++]=c),d>=0&&d<=1&&(i[l++]=d)}}return l}function Uee(t,e,n){var r=t+n-2*e;return r===0?.5:(t-e)/r}function I4(t,e,n,r,i){var o=(e-t)*r+t,a=(n-e)*r+e,s=(a-o)*r+o;i[0]=t,i[1]=o,i[2]=s,i[3]=s,i[4]=a,i[5]=n}function HAe(t,e,n,r,i,o,a,s,l){var c,u=.005,f=1/0;Qc[0]=a,Qc[1]=s;for(var d=0;d<1;d+=.05){pl[0]=Ho(t,n,i,d),pl[1]=Ho(e,r,o,d);var h=Lv(Qc,pl);h<f&&(c=d,f=h)}f=1/0;for(var g=0;g<32&&!(u<Vee);g++){var y=c-u,S=c+u;pl[0]=Ho(t,n,i,y),pl[1]=Ho(e,r,o,y);var h=Lv(pl,Qc);if(y>=0&&h<f)c=y,f=h;else{Nv[0]=Ho(t,n,i,S),Nv[1]=Ho(e,r,o,S);var v=Lv(Nv,Qc);S<=1&&v<f?(c=S,f=v):u*=.5}}return l&&(l[0]=Ho(t,n,i,c),l[1]=Ho(e,r,o,c)),Ld(f)}function UAe(t,e,n,r,i,o,a){for(var s=t,l=e,c=0,u=1/a,f=1;f<=a;f++){var d=f*u,h=Ho(t,n,i,d),g=Ho(e,r,o,d),y=h-s,S=g-l;c+=Math.sqrt(y*y+S*S),s=h,l=g}return c}var WAe=/cubic-bezier\(([0-9,\.e ]+)\)/;function n$(t){var e=t&&WAe.exec(t);if(e){var n=e[1].split(","),r=+au(n[0]),i=+au(n[1]),o=+au(n[2]),a=+au(n[3]);if(isNaN(r+i+o+a))return;var s=[];return function(l){return l<=0?0:l>=1?1:jee(0,r,o,1,l,s)&&wo(0,i,a,1,s[0])}}}var GAe=function(){function t(e){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=e.life||1e3,this._delay=e.delay||0,this.loop=e.loop||!1,this.onframe=e.onframe||Jo,this.ondestroy=e.ondestroy||Jo,this.onrestart=e.onrestart||Jo,e.easing&&this.setEasing(e.easing)}return t.prototype.step=function(e,n){if(this._inited||(this._startTime=e+this._delay,this._inited=!0),this._paused){this._pausedTime+=n;return}var r=this._life,i=e-this._startTime-this._pausedTime,o=i/r;o<0&&(o=0),o=Math.min(o,1);var a=this.easingFunc,s=a?a(o):o;if(this.onframe(s),o===1)if(this.loop){var l=i%r;this._startTime=e-l,this._pausedTime=0,this.onrestart()}else return!0;return!1},t.prototype.pause=function(){this._paused=!0},t.prototype.resume=function(){this._paused=!1},t.prototype.setEasing=function(e){this.easing=e,this.easingFunc=Qn(e)?e:zee[e]||n$(e)},t}();const qAe=GAe;var Wee=function(){function t(e){this.value=e}return t}(),YAe=function(){function t(){this._len=0}return t.prototype.insert=function(e){var n=new Wee(e);return this.insertEntry(n),n},t.prototype.insertEntry=function(e){this.head?(this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e):this.head=this.tail=e,this._len++},t.prototype.remove=function(e){var n=e.prev,r=e.next;n?n.next=r:this.head=r,r?r.prev=n:this.tail=n,e.next=e.prev=null,this._len--},t.prototype.len=function(){return this._len},t.prototype.clear=function(){this.head=this.tail=null,this._len=0},t}(),KAe=function(){function t(e){this._list=new YAe,this._maxSize=10,this._map={},this._maxSize=e}return t.prototype.put=function(e,n){var r=this._list,i=this._map,o=null;if(i[e]==null){var a=r.len(),s=this._lastRemovedEntry;if(a>=this._maxSize&&a>0){var l=r.head;r.remove(l),delete i[l.key],o=l.value,this._lastRemovedEntry=l}s?s.value=n:s=new Wee(n),s.key=e,r.insertEntry(s),i[e]=s}return o},t.prototype.get=function(e){var n=this._map[e],r=this._list;if(n!=null)return n!==r.tail&&(r.remove(n),r.insertEntry(n)),n.value},t.prototype.clear=function(){this._list.clear(),this._map={}},t.prototype.len=function(){return this._list.len()},t}();const cS=KAe;var vB={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Dd(t){return t=Math.round(t),t<0?0:t>255?255:t}function XAe(t){return t=Math.round(t),t<0?0:t>360?360:t}function $4(t){return t<0?0:t>1?1:t}function fP(t){var e=t;return e.length&&e.charAt(e.length-1)==="%"?Dd(parseFloat(e)/100*255):Dd(parseInt(e,10))}function ag(t){var e=t;return e.length&&e.charAt(e.length-1)==="%"?$4(parseFloat(e)/100):$4(parseFloat(e))}function dP(t,e,n){return n<0?n+=1:n>1&&(n-=1),n*6<1?t+(e-t)*n*6:n*2<1?e:n*3<2?t+(e-t)*(2/3-n)*6:t}function $w(t,e,n){return t+(e-t)*n}function ll(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function s9(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}var Gee=new cS(20),Fw=null;function xm(t,e){Fw&&s9(Fw,e),Fw=Gee.put(t,Fw||e.slice())}function dc(t,e){if(t){e=e||[];var n=Gee.get(t);if(n)return s9(e,n);t=t+"";var r=t.replace(/ /g,"").toLowerCase();if(r in vB)return s9(e,vB[r]),xm(t,e),e;var i=r.length;if(r.charAt(0)==="#"){if(i===4||i===5){var o=parseInt(r.slice(1,4),16);if(!(o>=0&&o<=4095)){ll(e,0,0,0,1);return}return ll(e,(o&3840)>>4|(o&3840)>>8,o&240|(o&240)>>4,o&15|(o&15)<<4,i===5?parseInt(r.slice(4),16)/15:1),xm(t,e),e}else if(i===7||i===9){var o=parseInt(r.slice(1,7),16);if(!(o>=0&&o<=16777215)){ll(e,0,0,0,1);return}return ll(e,(o&16711680)>>16,(o&65280)>>8,o&255,i===9?parseInt(r.slice(7),16)/255:1),xm(t,e),e}return}var a=r.indexOf("("),s=r.indexOf(")");if(a!==-1&&s+1===i){var l=r.substr(0,a),c=r.substr(a+1,s-(a+1)).split(","),u=1;switch(l){case"rgba":if(c.length!==4)return c.length===3?ll(e,+c[0],+c[1],+c[2],1):ll(e,0,0,0,1);u=ag(c.pop());case"rgb":if(c.length>=3)return ll(e,fP(c[0]),fP(c[1]),fP(c[2]),c.length===3?u:ag(c[3])),xm(t,e),e;ll(e,0,0,0,1);return;case"hsla":if(c.length!==4){ll(e,0,0,0,1);return}return c[3]=ag(c[3]),l9(c,e),xm(t,e),e;case"hsl":if(c.length!==3){ll(e,0,0,0,1);return}return l9(c,e),xm(t,e),e;default:return}}ll(e,0,0,0,1)}}function l9(t,e){var n=(parseFloat(t[0])%360+360)%360/360,r=ag(t[1]),i=ag(t[2]),o=i<=.5?i*(r+1):i+r-i*r,a=i*2-o;return e=e||[],ll(e,Dd(dP(a,o,n+1/3)*255),Dd(dP(a,o,n)*255),Dd(dP(a,o,n-1/3)*255),1),t.length===4&&(e[3]=t[3]),e}function JAe(t){if(t){var e=t[0]/255,n=t[1]/255,r=t[2]/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=o-i,s=(o+i)/2,l,c;if(a===0)l=0,c=0;else{s<.5?c=a/(o+i):c=a/(2-o-i);var u=((o-e)/6+a/2)/a,f=((o-n)/6+a/2)/a,d=((o-r)/6+a/2)/a;e===o?l=d-f:n===o?l=1/3+u-d:r===o&&(l=2/3+f-u),l<0&&(l+=1),l>1&&(l-=1)}var h=[l*360,c,s];return t[3]!=null&&h.push(t[3]),h}}function c9(t,e){var n=dc(t);if(n){for(var r=0;r<3;r++)e<0?n[r]=n[r]*(1-e)|0:n[r]=(255-n[r])*e+n[r]|0,n[r]>255?n[r]=255:n[r]<0&&(n[r]=0);return Nd(n,n.length===4?"rgba":"rgb")}}function hP(t,e,n){if(!(!(e&&e.length)||!(t>=0&&t<=1))){n=n||[];var r=t*(e.length-1),i=Math.floor(r),o=Math.ceil(r),a=e[i],s=e[o],l=r-i;return n[0]=Dd($w(a[0],s[0],l)),n[1]=Dd($w(a[1],s[1],l)),n[2]=Dd($w(a[2],s[2],l)),n[3]=$4($w(a[3],s[3],l)),n}}function pP(t,e,n,r){var i=dc(t);if(t)return i=JAe(i),e!=null&&(i[0]=XAe(e)),n!=null&&(i[1]=ag(n)),r!=null&&(i[2]=ag(r)),Nd(l9(i),"rgba")}function ZAe(t,e){var n=dc(t);if(n&&e!=null)return n[3]=$4(e),Nd(n,"rgba")}function Nd(t,e){if(!(!t||!t.length)){var n=t[0]+","+t[1]+","+t[2];return(e==="rgba"||e==="hsva"||e==="hsla")&&(n+=","+t[3]),e+"("+n+")"}}function F4(t,e){var n=dc(t);return n?(.299*n[0]+.587*n[1]+.114*n[2])*n[3]/255+(1-n[3])*e:0}var L4=Math.round;function X1(t){var e;if(!t||t==="transparent")t="none";else if(typeof t=="string"&&t.indexOf("rgba")>-1){var n=dc(t);n&&(t="rgb("+n[0]+","+n[1]+","+n[2]+")",e=n[3])}return{color:t,opacity:e??1}}var yB=1e-4;function xd(t){return t<yB&&t>-yB}function Lw(t){return L4(t*1e3)/1e3}function u9(t){return L4(t*1e4)/1e4}function QAe(t){return"matrix("+Lw(t[0])+","+Lw(t[1])+","+Lw(t[2])+","+Lw(t[3])+","+u9(t[4])+","+u9(t[5])+")"}var e5e={left:"start",right:"end",center:"middle",middle:"middle"};function t5e(t,e,n){return n==="top"?t+=e/2:n==="bottom"&&(t-=e/2),t}function n5e(t){return t&&(t.shadowBlur||t.shadowOffsetX||t.shadowOffsetY)}function r5e(t){var e=t.style,n=t.getGlobalScale();return[e.shadowColor,(e.shadowBlur||0).toFixed(2),(e.shadowOffsetX||0).toFixed(2),(e.shadowOffsetY||0).toFixed(2),n[0],n[1]].join(",")}function qee(t){return t&&!!t.image}function i5e(t){return t&&!!t.svgElement}function r$(t){return qee(t)||i5e(t)}function Yee(t){return t.type==="linear"}function Kee(t){return t.type==="radial"}function Xee(t){return t&&(t.type==="linear"||t.type==="radial")}function VT(t){return"url(#"+t+")"}function Jee(t){var e=t.getGlobalScale(),n=Math.max(e[0],e[1]);return Math.max(Math.ceil(Math.log(n)/Math.log(10)),1)}function Zee(t){var e=t.x||0,n=t.y||0,r=(t.rotation||0)*cx,i=mn(t.scaleX,1),o=mn(t.scaleY,1),a=t.skewX||0,s=t.skewY||0,l=[];return(e||n)&&l.push("translate("+e+"px,"+n+"px)"),r&&l.push("rotate("+r+")"),(i!==1||o!==1)&&l.push("scale("+i+","+o+")"),(a||s)&&l.push("skew("+L4(a*cx)+"deg, "+L4(s*cx)+"deg)"),l.join(" ")}var o5e=function(){return Pn.hasGlobalWindow&&Qn(window.btoa)?function(t){return window.btoa(unescape(encodeURIComponent(t)))}:typeof Buffer<"u"?function(t){return Buffer.from(t).toString("base64")}:function(t){return null}}(),f9=Array.prototype.slice;function Ku(t,e,n){return(e-t)*n+t}function gP(t,e,n,r){for(var i=e.length,o=0;o<i;o++)t[o]=Ku(e[o],n[o],r);return t}function a5e(t,e,n,r){for(var i=e.length,o=i&&e[0].length,a=0;a<i;a++){t[a]||(t[a]=[]);for(var s=0;s<o;s++)t[a][s]=Ku(e[a][s],n[a][s],r)}return t}function Dw(t,e,n,r){for(var i=e.length,o=0;o<i;o++)t[o]=e[o]+n[o]*r;return t}function bB(t,e,n,r){for(var i=e.length,o=i&&e[0].length,a=0;a<i;a++){t[a]||(t[a]=[]);for(var s=0;s<o;s++)t[a][s]=e[a][s]+n[a][s]*r}return t}function s5e(t,e){for(var n=t.length,r=e.length,i=n>r?e:t,o=Math.min(n,r),a=i[o-1]||{color:[0,0,0,0],offset:0},s=o;s<Math.max(n,r);s++)i.push({offset:a.offset,color:a.color.slice()})}function l5e(t,e,n){var r=t,i=e;if(!(!r.push||!i.push)){var o=r.length,a=i.length;if(o!==a){var s=o>a;if(s)r.length=a;else for(var l=o;l<a;l++)r.push(n===1?i[l]:f9.call(i[l]))}for(var c=r[0]&&r[0].length,l=0;l<r.length;l++)if(n===1)isNaN(r[l])&&(r[l]=i[l]);else for(var u=0;u<c;u++)isNaN(r[l][u])&&(r[l][u]=i[l][u])}}function dx(t){if(ds(t)){var e=t.length;if(ds(t[0])){for(var n=[],r=0;r<e;r++)n.push(f9.call(t[r]));return n}return f9.call(t)}return t}function hx(t){return t[0]=Math.floor(t[0])||0,t[1]=Math.floor(t[1])||0,t[2]=Math.floor(t[2])||0,t[3]=t[3]==null?1:t[3],"rgba("+t.join(",")+")"}function c5e(t){return ds(t&&t[0])?2:1}var Nw=0,px=1,Qee=2,Pb=3,d9=4,h9=5,SB=6;function _B(t){return t===d9||t===h9}function Mw(t){return t===px||t===Qee}var jy=[0,0,0,0],u5e=function(){function t(e){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=e}return t.prototype.isFinished=function(){return this._finished},t.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},t.prototype.needsAnimate=function(){return this.keyframes.length>=1},t.prototype.getAdditiveTrack=function(){return this._additiveTrack},t.prototype.addKeyframe=function(e,n,r){this._needsSort=!0;var i=this.keyframes,o=i.length,a=!1,s=SB,l=n;if(ds(n)){var c=c5e(n);s=c,(c===1&&!Zr(n[0])||c===2&&!Zr(n[0][0]))&&(a=!0)}else if(Zr(n)&&!Z3e(n))s=Nw;else if(Ot(n))if(!isNaN(+n))s=Nw;else{var u=dc(n);u&&(l=u,s=Pb)}else if(RT(n)){var f=ot({},l);f.colorStops=tn(n.colorStops,function(h){return{offset:h.offset,color:dc(h.color)}}),Yee(n)?s=d9:Kee(n)&&(s=h9),l=f}o===0?this.valType=s:(s!==this.valType||s===SB)&&(a=!0),this.discrete=this.discrete||a;var d={time:e,value:l,rawValue:n,percent:0};return r&&(d.easing=r,d.easingFunc=Qn(r)?r:zee[r]||n$(r)),i.push(d),d},t.prototype.prepare=function(e,n){var r=this.keyframes;this._needsSort&&r.sort(function(y,S){return y.time-S.time});for(var i=this.valType,o=r.length,a=r[o-1],s=this.discrete,l=Mw(i),c=_B(i),u=0;u<o;u++){var f=r[u],d=f.value,h=a.value;f.percent=f.time/e,s||(l&&u!==o-1?l5e(d,h,i):c&&s5e(d.colorStops,h.colorStops))}if(!s&&i!==h9&&n&&this.needsAnimate()&&n.needsAnimate()&&i===n.valType&&!n._finished){this._additiveTrack=n;for(var g=r[0].value,u=0;u<o;u++)i===Nw?r[u].additiveValue=r[u].value-g:i===Pb?r[u].additiveValue=Dw([],r[u].value,g,-1):Mw(i)&&(r[u].additiveValue=i===px?Dw([],r[u].value,g,-1):bB([],r[u].value,g,-1))}},t.prototype.step=function(e,n){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var r=this._additiveTrack!=null,i=r?"additiveValue":"value",o=this.valType,a=this.keyframes,s=a.length,l=this.propName,c=o===Pb,u,f=this._lastFr,d=Math.min,h,g;if(s===1)h=g=a[0];else{if(n<0)u=0;else if(n<this._lastFrP){var y=d(f+1,s-1);for(u=y;u>=0&&!(a[u].percent<=n);u--);u=d(u,s-2)}else{for(u=f;u<s&&!(a[u].percent>n);u++);u=d(u-1,s-2)}g=a[u+1],h=a[u]}if(h&&g){this._lastFr=u,this._lastFrP=n;var S=g.percent-h.percent,v=S===0?1:d((n-h.percent)/S,1);g.easingFunc&&(v=g.easingFunc(v));var _=r?this._additiveValue:c?jy:e[l];if((Mw(o)||c)&&!_&&(_=this._additiveValue=[]),this.discrete)e[l]=v<1?h.rawValue:g.rawValue;else if(Mw(o))o===px?gP(_,h[i],g[i],v):a5e(_,h[i],g[i],v);else if(_B(o)){var x=h[i],C=g[i],k=o===d9;e[l]={type:k?"linear":"radial",x:Ku(x.x,C.x,v),y:Ku(x.y,C.y,v),colorStops:tn(x.colorStops,function(T,E){var I=C.colorStops[E];return{offset:Ku(T.offset,I.offset,v),color:hx(gP([],T.color,I.color,v))}}),global:C.global},k?(e[l].x2=Ku(x.x2,C.x2,v),e[l].y2=Ku(x.y2,C.y2,v)):e[l].r=Ku(x.r,C.r,v)}else if(c)gP(_,h[i],g[i],v),r||(e[l]=hx(_));else{var m=Ku(h[i],g[i],v);r?this._additiveValue=m:e[l]=m}r&&this._addToTarget(e)}}},t.prototype._addToTarget=function(e){var n=this.valType,r=this.propName,i=this._additiveValue;n===Nw?e[r]=e[r]+i:n===Pb?(dc(e[r],jy),Dw(jy,jy,i,1),e[r]=hx(jy)):n===px?Dw(e[r],e[r],i,1):n===Qee&&bB(e[r],e[r],i,1)},t}(),f5e=function(){function t(e,n,r,i){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=e,this._loop=n,n&&i){JI("Can' use additive animation on looped animation.");return}this._additiveAnimators=i,this._allowDiscrete=r}return t.prototype.getMaxTime=function(){return this._maxTime},t.prototype.getDelay=function(){return this._delay},t.prototype.getLoop=function(){return this._loop},t.prototype.getTarget=function(){return this._target},t.prototype.changeTarget=function(e){this._target=e},t.prototype.when=function(e,n,r){return this.whenWithKeys(e,n,ir(n),r)},t.prototype.whenWithKeys=function(e,n,r,i){for(var o=this._tracks,a=0;a<r.length;a++){var s=r[a],l=o[s];if(!l){l=o[s]=new u5e(s);var c=void 0,u=this._getAdditiveTrack(s);if(u){var f=u.keyframes,d=f[f.length-1];c=d&&d.value,u.valType===Pb&&c&&(c=hx(c))}else c=this._target[s];if(c==null)continue;e>0&&l.addKeyframe(0,dx(c),i),this._trackKeys.push(s)}l.addKeyframe(e,dx(n[s]),i)}return this._maxTime=Math.max(this._maxTime,e),this},t.prototype.pause=function(){this._clip.pause(),this._paused=!0},t.prototype.resume=function(){this._clip.resume(),this._paused=!1},t.prototype.isPaused=function(){return!!this._paused},t.prototype.duration=function(e){return this._maxTime=e,this._force=!0,this},t.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var e=this._doneCbs;if(e)for(var n=e.length,r=0;r<n;r++)e[r].call(this)},t.prototype._abortedCallback=function(){this._setTracksFinished();var e=this.animation,n=this._abortedCbs;if(e&&e.removeClip(this._clip),this._clip=null,n)for(var r=0;r<n.length;r++)n[r].call(this)},t.prototype._setTracksFinished=function(){for(var e=this._tracks,n=this._trackKeys,r=0;r<n.length;r++)e[n[r]].setFinished()},t.prototype._getAdditiveTrack=function(e){var n,r=this._additiveAnimators;if(r)for(var i=0;i<r.length;i++){var o=r[i].getTrack(e);o&&(n=o)}return n},t.prototype.start=function(e){if(!(this._started>0)){this._started=1;for(var n=this,r=[],i=this._maxTime||0,o=0;o<this._trackKeys.length;o++){var a=this._trackKeys[o],s=this._tracks[a],l=this._getAdditiveTrack(a),c=s.keyframes,u=c.length;if(s.prepare(i,l),s.needsAnimate())if(!this._allowDiscrete&&s.discrete){var f=c[u-1];f&&(n._target[s.propName]=f.rawValue),s.setFinished()}else r.push(s)}if(r.length||this._force){var d=new qAe({life:i,loop:this._loop,delay:this._delay||0,onframe:function(h){n._started=2;var g=n._additiveAnimators;if(g){for(var y=!1,S=0;S<g.length;S++)if(g[S]._clip){y=!0;break}y||(n._additiveAnimators=null)}for(var S=0;S<r.length;S++)r[S].step(n._target,h);var v=n._onframeCbs;if(v)for(var S=0;S<v.length;S++)v[S](n._target,h)},ondestroy:function(){n._doneCallback()}});this._clip=d,this.animation&&this.animation.addClip(d),e&&d.setEasing(e)}else this._doneCallback();return this}},t.prototype.stop=function(e){if(this._clip){var n=this._clip;e&&n.onframe(1),this._abortedCallback()}},t.prototype.delay=function(e){return this._delay=e,this},t.prototype.during=function(e){return e&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(e)),this},t.prototype.done=function(e){return e&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(e)),this},t.prototype.aborted=function(e){return e&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(e)),this},t.prototype.getClip=function(){return this._clip},t.prototype.getTrack=function(e){return this._tracks[e]},t.prototype.getTracks=function(){var e=this;return tn(this._trackKeys,function(n){return e._tracks[n]})},t.prototype.stopTracks=function(e,n){if(!e.length||!this._clip)return!0;for(var r=this._tracks,i=this._trackKeys,o=0;o<e.length;o++){var a=r[e[o]];a&&!a.isFinished()&&(n?a.step(this._target,1):this._started===1&&a.step(this._target,0),a.setFinished())}for(var s=!0,o=0;o<i.length;o++)if(!r[i[o]].isFinished()){s=!1;break}return s&&this._abortedCallback(),s},t.prototype.saveTo=function(e,n,r){if(e){n=n||this._trackKeys;for(var i=0;i<n.length;i++){var o=n[i],a=this._tracks[o];if(!(!a||a.isFinished())){var s=a.keyframes,l=s[r?0:s.length-1];l&&(e[o]=dx(l.rawValue))}}}},t.prototype.__changeFinalValue=function(e,n){n=n||ir(e);for(var r=0;r<n.length;r++){var i=n[r],o=this._tracks[i];if(o){var a=o.keyframes;if(a.length>1){var s=a.pop();o.addKeyframe(s.time,e[i]),o.prepare(this._maxTime,o.getAdditiveTrack())}}}},t}();const i$=f5e;function dv(){return new Date().getTime()}var d5e=function(t){Cr(e,t);function e(n){var r=t.call(this)||this;return r._running=!1,r._time=0,r._pausedTime=0,r._pauseStart=0,r._paused=!1,n=n||{},r.stage=n.stage||{},r}return e.prototype.addClip=function(n){n.animation&&this.removeClip(n),this._head?(this._tail.next=n,n.prev=this._tail,n.next=null,this._tail=n):this._head=this._tail=n,n.animation=this},e.prototype.addAnimator=function(n){n.animation=this;var r=n.getClip();r&&this.addClip(r)},e.prototype.removeClip=function(n){if(n.animation){var r=n.prev,i=n.next;r?r.next=i:this._head=i,i?i.prev=r:this._tail=r,n.next=n.prev=n.animation=null}},e.prototype.removeAnimator=function(n){var r=n.getClip();r&&this.removeClip(r),n.animation=null},e.prototype.update=function(n){for(var r=dv()-this._pausedTime,i=r-this._time,o=this._head;o;){var a=o.next,s=o.step(r,i);s&&(o.ondestroy(),this.removeClip(o)),o=a}this._time=r,n||(this.trigger("frame",i),this.stage.update&&this.stage.update())},e.prototype._startLoop=function(){var n=this;this._running=!0;function r(){n._running&&(a9(r),!n._paused&&n.update())}a9(r)},e.prototype.start=function(){this._running||(this._time=dv(),this._pausedTime=0,this._startLoop())},e.prototype.stop=function(){this._running=!1},e.prototype.pause=function(){this._paused||(this._pauseStart=dv(),this._paused=!0)},e.prototype.resume=function(){this._paused&&(this._pausedTime+=dv()-this._pauseStart,this._paused=!1)},e.prototype.clear=function(){for(var n=this._head;n;){var r=n.next;n.prev=n.next=n.animation=null,n=r}this._head=this._tail=null},e.prototype.isFinished=function(){return this._head==null},e.prototype.animate=function(n,r){r=r||{},this.start();var i=new i$(n,r.loop);return this.addAnimator(i),i},e}(wu);const h5e=d5e;var p5e=300,mP=Pn.domSupported,vP=function(){var t=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],e=["touchstart","touchend","touchmove"],n={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},r=tn(t,function(i){var o=i.replace("mouse","pointer");return n.hasOwnProperty(o)?o:i});return{mouse:t,touch:e,pointer:r}}(),wB={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},kB=!1;function p9(t){var e=t.pointerType;return e==="pen"||e==="touch"}function g5e(t){t.touching=!0,t.touchTimer!=null&&(clearTimeout(t.touchTimer),t.touchTimer=null),t.touchTimer=setTimeout(function(){t.touching=!1,t.touchTimer=null},700)}function yP(t){t&&(t.zrByTouch=!0)}function m5e(t,e){return cl(t.dom,new v5e(t,e),!0)}function ete(t,e){for(var n=e,r=!1;n&&n.nodeType!==9&&!(r=n.domBelongToZr||n!==e&&n===t.painterRoot);)n=n.parentNode;return r}var v5e=function(){function t(e,n){this.stopPropagation=Jo,this.stopImmediatePropagation=Jo,this.preventDefault=Jo,this.type=n.type,this.target=this.currentTarget=e.dom,this.pointerType=n.pointerType,this.clientX=n.clientX,this.clientY=n.clientY}return t}(),Ql={mousedown:function(t){t=cl(this.dom,t),this.__mayPointerCapture=[t.zrX,t.zrY],this.trigger("mousedown",t)},mousemove:function(t){t=cl(this.dom,t);var e=this.__mayPointerCapture;e&&(t.zrX!==e[0]||t.zrY!==e[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",t)},mouseup:function(t){t=cl(this.dom,t),this.__togglePointerCapture(!1),this.trigger("mouseup",t)},mouseout:function(t){t=cl(this.dom,t);var e=t.toElement||t.relatedTarget;ete(this,e)||(this.__pointerCapturing&&(t.zrEventControl="no_globalout"),this.trigger("mouseout",t))},wheel:function(t){kB=!0,t=cl(this.dom,t),this.trigger("mousewheel",t)},mousewheel:function(t){kB||(t=cl(this.dom,t),this.trigger("mousewheel",t))},touchstart:function(t){t=cl(this.dom,t),yP(t),this.__lastTouchMoment=new Date,this.handler.processGesture(t,"start"),Ql.mousemove.call(this,t),Ql.mousedown.call(this,t)},touchmove:function(t){t=cl(this.dom,t),yP(t),this.handler.processGesture(t,"change"),Ql.mousemove.call(this,t)},touchend:function(t){t=cl(this.dom,t),yP(t),this.handler.processGesture(t,"end"),Ql.mouseup.call(this,t),+new Date-+this.__lastTouchMoment<p5e&&Ql.click.call(this,t)},pointerdown:function(t){Ql.mousedown.call(this,t)},pointermove:function(t){p9(t)||Ql.mousemove.call(this,t)},pointerup:function(t){Ql.mouseup.call(this,t)},pointerout:function(t){p9(t)||Ql.mouseout.call(this,t)}};be(["click","dblclick","contextmenu"],function(t){Ql[t]=function(e){e=cl(this.dom,e),this.trigger(t,e)}});var g9={pointermove:function(t){p9(t)||g9.mousemove.call(this,t)},pointerup:function(t){g9.mouseup.call(this,t)},mousemove:function(t){this.trigger("mousemove",t)},mouseup:function(t){var e=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",t),e&&(t.zrEventControl="only_globalout",this.trigger("mouseout",t))}};function y5e(t,e){var n=e.domHandlers;Pn.pointerEventsSupported?be(vP.pointer,function(r){gx(e,r,function(i){n[r].call(t,i)})}):(Pn.touchEventsSupported&&be(vP.touch,function(r){gx(e,r,function(i){n[r].call(t,i),g5e(e)})}),be(vP.mouse,function(r){gx(e,r,function(i){i=QI(i),e.touching||n[r].call(t,i)})}))}function b5e(t,e){Pn.pointerEventsSupported?be(wB.pointer,n):Pn.touchEventsSupported||be(wB.mouse,n);function n(r){function i(o){o=QI(o),ete(t,o.target)||(o=m5e(t,o),e.domHandlers[r].call(t,o))}gx(e,r,i,{capture:!0})}}function gx(t,e,n,r){t.mounted[e]=n,t.listenerOpts[e]=r,_Ae(t.domTarget,e,n,r)}function bP(t){var e=t.mounted;for(var n in e)e.hasOwnProperty(n)&&wAe(t.domTarget,n,e[n],t.listenerOpts[n]);t.mounted={}}var xB=function(){function t(e,n){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=e,this.domHandlers=n}return t}(),S5e=function(t){Cr(e,t);function e(n,r){var i=t.call(this)||this;return i.__pointerCapturing=!1,i.dom=n,i.painterRoot=r,i._localHandlerScope=new xB(n,Ql),mP&&(i._globalHandlerScope=new xB(document,g9)),y5e(i,i._localHandlerScope),i}return e.prototype.dispose=function(){bP(this._localHandlerScope),mP&&bP(this._globalHandlerScope)},e.prototype.setCursor=function(n){this.dom.style&&(this.dom.style.cursor=n||"default")},e.prototype.__togglePointerCapture=function(n){if(this.__mayPointerCapture=null,mP&&+this.__pointerCapturing^+n){this.__pointerCapturing=n;var r=this._globalHandlerScope;n?b5e(this,r):bP(r)}},e}(wu);const _5e=S5e;var tte=1;Pn.hasGlobalWindow&&(tte=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var D4=tte,m9=.4,v9="#333",y9="#ccc",w5e="#eee",CB=e$,TB=5e-5;function Qh(t){return t>TB||t<-TB}var ep=[],Cm=[],SP=K1(),_P=Math.abs,o$=function(){function t(){}return t.prototype.getLocalTransform=function(e){return t.getLocalTransform(this,e)},t.prototype.setPosition=function(e){this.x=e[0],this.y=e[1]},t.prototype.setScale=function(e){this.scaleX=e[0],this.scaleY=e[1]},t.prototype.setSkew=function(e){this.skewX=e[0],this.skewY=e[1]},t.prototype.setOrigin=function(e){this.originX=e[0],this.originY=e[1]},t.prototype.needLocalTransform=function(){return Qh(this.rotation)||Qh(this.x)||Qh(this.y)||Qh(this.scaleX-1)||Qh(this.scaleY-1)||Qh(this.skewX)||Qh(this.skewY)},t.prototype.updateTransform=function(){var e=this.parent&&this.parent.transform,n=this.needLocalTransform(),r=this.transform;if(!(n||e)){r&&(CB(r),this.invTransform=null);return}r=r||K1(),n?this.getLocalTransform(r):CB(r),e&&(n?Dv(r,e,r):CAe(r,e)),this.transform=r,this._resolveGlobalScaleRatio(r)},t.prototype._resolveGlobalScaleRatio=function(e){var n=this.globalScaleRatio;if(n!=null&&n!==1){this.getGlobalScale(ep);var r=ep[0]<0?-1:1,i=ep[1]<0?-1:1,o=((ep[0]-r)*n+r)/ep[0]||0,a=((ep[1]-i)*n+i)/ep[1]||0;e[0]*=o,e[1]*=o,e[2]*=a,e[3]*=a}this.invTransform=this.invTransform||K1(),Fee(this.invTransform,e)},t.prototype.getComputedTransform=function(){for(var e=this,n=[];e;)n.push(e),e=e.parent;for(;e=n.pop();)e.updateTransform();return this.transform},t.prototype.setLocalTransform=function(e){if(e){var n=e[0]*e[0]+e[1]*e[1],r=e[2]*e[2]+e[3]*e[3],i=Math.atan2(e[1],e[0]),o=Math.PI/2+i-Math.atan2(e[3],e[2]);r=Math.sqrt(r)*Math.cos(o),n=Math.sqrt(n),this.skewX=o,this.skewY=0,this.rotation=-i,this.x=+e[4],this.y=+e[5],this.scaleX=n,this.scaleY=r,this.originX=0,this.originY=0}},t.prototype.decomposeTransform=function(){if(this.transform){var e=this.parent,n=this.transform;e&&e.transform&&(Dv(Cm,e.invTransform,n),n=Cm);var r=this.originX,i=this.originY;(r||i)&&(SP[4]=r,SP[5]=i,Dv(Cm,n,SP),Cm[4]-=r,Cm[5]-=i,n=Cm),this.setLocalTransform(n)}},t.prototype.getGlobalScale=function(e){var n=this.transform;return e=e||[],n?(e[0]=Math.sqrt(n[0]*n[0]+n[1]*n[1]),e[1]=Math.sqrt(n[2]*n[2]+n[3]*n[3]),n[0]<0&&(e[0]=-e[0]),n[3]<0&&(e[1]=-e[1]),e):(e[0]=1,e[1]=1,e)},t.prototype.transformCoordToLocal=function(e,n){var r=[e,n],i=this.invTransform;return i&&fu(r,r,i),r},t.prototype.transformCoordToGlobal=function(e,n){var r=[e,n],i=this.transform;return i&&fu(r,r,i),r},t.prototype.getLineScale=function(){var e=this.transform;return e&&_P(e[0]-1)>1e-10&&_P(e[3]-1)>1e-10?Math.sqrt(_P(e[0]*e[3]-e[2]*e[1])):1},t.prototype.copyTransform=function(e){nte(this,e)},t.getLocalTransform=function(e,n){n=n||[];var r=e.originX||0,i=e.originY||0,o=e.scaleX,a=e.scaleY,s=e.anchorX,l=e.anchorY,c=e.rotation||0,u=e.x,f=e.y,d=e.skewX?Math.tan(e.skewX):0,h=e.skewY?Math.tan(-e.skewY):0;if(r||i||s||l){var g=r+s,y=i+l;n[4]=-g*o-d*y*a,n[5]=-y*a-h*g*o}else n[4]=n[5]=0;return n[0]=o,n[3]=a,n[1]=h*o,n[2]=d*a,c&&t$(n,n,c),n[4]+=r+u,n[5]+=i+f,n},t.initDefaultProps=function(){var e=t.prototype;e.scaleX=e.scaleY=e.globalScaleRatio=1,e.x=e.y=e.originX=e.originY=e.skewX=e.skewY=e.rotation=e.anchorX=e.anchorY=0}(),t}(),J1=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function nte(t,e){for(var n=0;n<J1.length;n++){var r=J1[n];t[r]=e[r]}}var AB={};function Bs(t,e){e=e||oh;var n=AB[e];n||(n=AB[e]=new cS(500));var r=n.get(t);return r==null&&(r=L0.measureText(t,e).width,n.put(t,r)),r}function PB(t,e,n,r){var i=Bs(t,e),o=BT(e),a=Eb(0,i,n),s=Xm(0,o,r),l=new Ir(a,s,i,o);return l}function rte(t,e,n,r){var i=((t||"")+"").split(`
`),o=i.length;if(o===1)return PB(i[0],e,n,r);for(var a=new Ir(0,0,0,0),s=0;s<i.length;s++){var l=PB(i[s],e,n,r);s===0?a.copy(l):a.union(l)}return a}function Eb(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function Xm(t,e,n){return n==="middle"?t-=e/2:n==="bottom"&&(t-=e),t}function BT(t){return Bs("",t)}function c0(t,e){return typeof t=="string"?t.lastIndexOf("%")>=0?parseFloat(t)/100*e:parseFloat(t):t}function ite(t,e,n){var r=e.position||"inside",i=e.distance!=null?e.distance:5,o=n.height,a=n.width,s=o/2,l=n.x,c=n.y,u="left",f="top";if(r instanceof Array)l+=c0(r[0],n.width),c+=c0(r[1],n.height),u=null,f=null;else switch(r){case"left":l-=i,c+=s,u="right",f="middle";break;case"right":l+=i+a,c+=s,f="middle";break;case"top":l+=a/2,c-=i,u="center",f="bottom";break;case"bottom":l+=a/2,c+=o+i,u="center";break;case"inside":l+=a/2,c+=s,u="center",f="middle";break;case"insideLeft":l+=i,c+=s,f="middle";break;case"insideRight":l+=a-i,c+=s,u="right",f="middle";break;case"insideTop":l+=a/2,c+=i,u="center";break;case"insideBottom":l+=a/2,c+=o-i,u="center",f="bottom";break;case"insideTopLeft":l+=i,c+=i;break;case"insideTopRight":l+=a-i,c+=i,u="right";break;case"insideBottomLeft":l+=i,c+=o-i,f="bottom";break;case"insideBottomRight":l+=a-i,c+=o-i,u="right",f="bottom";break}return t=t||{},t.x=l,t.y=c,t.align=u,t.verticalAlign=f,t}var wP="__zr_normal__",kP=J1.concat(["ignore"]),k5e=ah(J1,function(t,e){return t[e]=!0,t},{ignore:!1}),Tm={},x5e=new Ir(0,0,0,0),a$=function(){function t(e){this.id=Tee(),this.animators=[],this.currentStates=[],this.states={},this._init(e)}return t.prototype._init=function(e){this.attr(e)},t.prototype.drift=function(e,n,r){switch(this.draggable){case"horizontal":n=0;break;case"vertical":e=0;break}var i=this.transform;i||(i=this.transform=[1,0,0,1,0,0]),i[4]+=e,i[5]+=n,this.decomposeTransform(),this.markRedraw()},t.prototype.beforeUpdate=function(){},t.prototype.afterUpdate=function(){},t.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},t.prototype.updateInnerText=function(e){var n=this._textContent;if(n&&(!n.ignore||e)){this.textConfig||(this.textConfig={});var r=this.textConfig,i=r.local,o=n.innerTransformable,a=void 0,s=void 0,l=!1;o.parent=i?this:null;var c=!1;if(o.copyTransform(n),r.position!=null){var u=x5e;r.layoutRect?u.copy(r.layoutRect):u.copy(this.getBoundingRect()),i||u.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(Tm,r,u):ite(Tm,r,u),o.x=Tm.x,o.y=Tm.y,a=Tm.align,s=Tm.verticalAlign;var f=r.origin;if(f&&r.rotation!=null){var d=void 0,h=void 0;f==="center"?(d=u.width*.5,h=u.height*.5):(d=c0(f[0],u.width),h=c0(f[1],u.height)),c=!0,o.originX=-o.x+d+(i?0:u.x),o.originY=-o.y+h+(i?0:u.y)}}r.rotation!=null&&(o.rotation=r.rotation);var g=r.offset;g&&(o.x+=g[0],o.y+=g[1],c||(o.originX=-g[0],o.originY=-g[1]));var y=r.inside==null?typeof r.position=="string"&&r.position.indexOf("inside")>=0:r.inside,S=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),v=void 0,_=void 0,x=void 0;y&&this.canBeInsideText()?(v=r.insideFill,_=r.insideStroke,(v==null||v==="auto")&&(v=this.getInsideTextFill()),(_==null||_==="auto")&&(_=this.getInsideTextStroke(v),x=!0)):(v=r.outsideFill,_=r.outsideStroke,(v==null||v==="auto")&&(v=this.getOutsideFill()),(_==null||_==="auto")&&(_=this.getOutsideStroke(v),x=!0)),v=v||"#000",(v!==S.fill||_!==S.stroke||x!==S.autoStroke||a!==S.align||s!==S.verticalAlign)&&(l=!0,S.fill=v,S.stroke=_,S.autoStroke=x,S.align=a,S.verticalAlign=s,n.setDefaultTextStyle(S)),n.__dirty|=Ns,l&&n.dirtyStyle(!0)}},t.prototype.canBeInsideText=function(){return!0},t.prototype.getInsideTextFill=function(){return"#fff"},t.prototype.getInsideTextStroke=function(e){return"#000"},t.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?y9:v9},t.prototype.getOutsideStroke=function(e){var n=this.__zr&&this.__zr.getBackgroundColor(),r=typeof n=="string"&&dc(n);r||(r=[255,255,255,1]);for(var i=r[3],o=this.__zr.isDarkMode(),a=0;a<3;a++)r[a]=r[a]*i+(o?0:255)*(1-i);return r[3]=1,Nd(r,"rgba")},t.prototype.traverse=function(e,n){},t.prototype.attrKV=function(e,n){e==="textConfig"?this.setTextConfig(n):e==="textContent"?this.setTextContent(n):e==="clipPath"?this.setClipPath(n):e==="extra"?(this.extra=this.extra||{},ot(this.extra,n)):this[e]=n},t.prototype.hide=function(){this.ignore=!0,this.markRedraw()},t.prototype.show=function(){this.ignore=!1,this.markRedraw()},t.prototype.attr=function(e,n){if(typeof e=="string")this.attrKV(e,n);else if(jt(e))for(var r=e,i=ir(r),o=0;o<i.length;o++){var a=i[o];this.attrKV(a,e[a])}return this.markRedraw(),this},t.prototype.saveCurrentToNormalState=function(e){this._innerSaveToNormal(e);for(var n=this._normalState,r=0;r<this.animators.length;r++){var i=this.animators[r],o=i.__fromStateTransition;if(!(i.getLoop()||o&&o!==wP)){var a=i.targetName,s=a?n[a]:n;i.saveTo(s)}}},t.prototype._innerSaveToNormal=function(e){var n=this._normalState;n||(n=this._normalState={}),e.textConfig&&!n.textConfig&&(n.textConfig=this.textConfig),this._savePrimaryToNormal(e,n,kP)},t.prototype._savePrimaryToNormal=function(e,n,r){for(var i=0;i<r.length;i++){var o=r[i];e[o]!=null&&!(o in n)&&(n[o]=this[o])}},t.prototype.hasState=function(){return this.currentStates.length>0},t.prototype.getState=function(e){return this.states[e]},t.prototype.ensureState=function(e){var n=this.states;return n[e]||(n[e]={}),n[e]},t.prototype.clearStates=function(e){this.useState(wP,!1,e)},t.prototype.useState=function(e,n,r,i){var o=e===wP,a=this.hasState();if(!(!a&&o)){var s=this.currentStates,l=this.stateTransition;if(!(wr(s,e)>=0&&(n||s.length===1))){var c;if(this.stateProxy&&!o&&(c=this.stateProxy(e)),c||(c=this.states&&this.states[e]),!c&&!o){JI("State "+e+" not exists.");return}o||this.saveCurrentToNormalState(c);var u=!!(c&&c.hoverLayer||i);u&&this._toggleHoverLayerFlag(!0),this._applyStateObj(e,c,this._normalState,n,!r&&!this.__inHover&&l&&l.duration>0,l);var f=this._textContent,d=this._textGuide;return f&&f.useState(e,n,r,u),d&&d.useState(e,n,r,u),o?(this.currentStates=[],this._normalState={}):n?this.currentStates.push(e):this.currentStates=[e],this._updateAnimationTargets(),this.markRedraw(),!u&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Ns),c}}},t.prototype.useStates=function(e,n,r){if(!e.length)this.clearStates();else{var i=[],o=this.currentStates,a=e.length,s=a===o.length;if(s){for(var l=0;l<a;l++)if(e[l]!==o[l]){s=!1;break}}if(s)return;for(var l=0;l<a;l++){var c=e[l],u=void 0;this.stateProxy&&(u=this.stateProxy(c,e)),u||(u=this.states[c]),u&&i.push(u)}var f=i[a-1],d=!!(f&&f.hoverLayer||r);d&&this._toggleHoverLayerFlag(!0);var h=this._mergeStates(i),g=this.stateTransition;this.saveCurrentToNormalState(h),this._applyStateObj(e.join(","),h,this._normalState,!1,!n&&!this.__inHover&&g&&g.duration>0,g);var y=this._textContent,S=this._textGuide;y&&y.useStates(e,n,d),S&&S.useStates(e,n,d),this._updateAnimationTargets(),this.currentStates=e.slice(),this.markRedraw(),!d&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Ns)}},t.prototype._updateAnimationTargets=function(){for(var e=0;e<this.animators.length;e++){var n=this.animators[e];n.targetName&&n.changeTarget(this[n.targetName])}},t.prototype.removeState=function(e){var n=wr(this.currentStates,e);if(n>=0){var r=this.currentStates.slice();r.splice(n,1),this.useStates(r)}},t.prototype.replaceState=function(e,n,r){var i=this.currentStates.slice(),o=wr(i,e),a=wr(i,n)>=0;o>=0?a?i.splice(o,1):i[o]=n:r&&!a&&i.push(n),this.useStates(i)},t.prototype.toggleState=function(e,n){n?this.useState(e,!0):this.removeState(e)},t.prototype._mergeStates=function(e){for(var n={},r,i=0;i<e.length;i++){var o=e[i];ot(n,o),o.textConfig&&(r=r||{},ot(r,o.textConfig))}return r&&(n.textConfig=r),n},t.prototype._applyStateObj=function(e,n,r,i,o,a){var s=!(n&&i);n&&n.textConfig?(this.textConfig=ot({},i?this.textConfig:r.textConfig),ot(this.textConfig,n.textConfig)):s&&r.textConfig&&(this.textConfig=r.textConfig);for(var l={},c=!1,u=0;u<kP.length;u++){var f=kP[u],d=o&&k5e[f];n&&n[f]!=null?d?(c=!0,l[f]=n[f]):this[f]=n[f]:s&&r[f]!=null&&(d?(c=!0,l[f]=r[f]):this[f]=r[f])}if(!o)for(var u=0;u<this.animators.length;u++){var h=this.animators[u],g=h.targetName;h.getLoop()||h.__changeFinalValue(g?(n||r)[g]:n||r)}c&&this._transitionState(e,l,a)},t.prototype._attachComponent=function(e){if(!(e.__zr&&!e.__hostTarget)&&e!==this){var n=this.__zr;n&&e.addSelfToZr(n),e.__zr=n,e.__hostTarget=this}},t.prototype._detachComponent=function(e){e.__zr&&e.removeSelfFromZr(e.__zr),e.__zr=null,e.__hostTarget=null},t.prototype.getClipPath=function(){return this._clipPath},t.prototype.setClipPath=function(e){this._clipPath&&this._clipPath!==e&&this.removeClipPath(),this._attachComponent(e),this._clipPath=e,this.markRedraw()},t.prototype.removeClipPath=function(){var e=this._clipPath;e&&(this._detachComponent(e),this._clipPath=null,this.markRedraw())},t.prototype.getTextContent=function(){return this._textContent},t.prototype.setTextContent=function(e){var n=this._textContent;n!==e&&(n&&n!==e&&this.removeTextContent(),e.innerTransformable=new o$,this._attachComponent(e),this._textContent=e,this.markRedraw())},t.prototype.setTextConfig=function(e){this.textConfig||(this.textConfig={}),ot(this.textConfig,e),this.markRedraw()},t.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},t.prototype.removeTextContent=function(){var e=this._textContent;e&&(e.innerTransformable=null,this._detachComponent(e),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},t.prototype.getTextGuideLine=function(){return this._textGuide},t.prototype.setTextGuideLine=function(e){this._textGuide&&this._textGuide!==e&&this.removeTextGuideLine(),this._attachComponent(e),this._textGuide=e,this.markRedraw()},t.prototype.removeTextGuideLine=function(){var e=this._textGuide;e&&(this._detachComponent(e),this._textGuide=null,this.markRedraw())},t.prototype.markRedraw=function(){this.__dirty|=Ns;var e=this.__zr;e&&(this.__inHover?e.refreshHover():e.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},t.prototype.dirty=function(){this.markRedraw()},t.prototype._toggleHoverLayerFlag=function(e){this.__inHover=e;var n=this._textContent,r=this._textGuide;n&&(n.__inHover=e),r&&(r.__inHover=e)},t.prototype.addSelfToZr=function(e){if(this.__zr!==e){this.__zr=e;var n=this.animators;if(n)for(var r=0;r<n.length;r++)e.animation.addAnimator(n[r]);this._clipPath&&this._clipPath.addSelfToZr(e),this._textContent&&this._textContent.addSelfToZr(e),this._textGuide&&this._textGuide.addSelfToZr(e)}},t.prototype.removeSelfFromZr=function(e){if(this.__zr){this.__zr=null;var n=this.animators;if(n)for(var r=0;r<n.length;r++)e.animation.removeAnimator(n[r]);this._clipPath&&this._clipPath.removeSelfFromZr(e),this._textContent&&this._textContent.removeSelfFromZr(e),this._textGuide&&this._textGuide.removeSelfFromZr(e)}},t.prototype.animate=function(e,n,r){var i=e?this[e]:this,o=new i$(i,n,r);return e&&(o.targetName=e),this.addAnimator(o,e),o},t.prototype.addAnimator=function(e,n){var r=this.__zr,i=this;e.during(function(){i.updateDuringAnimation(n)}).done(function(){var o=i.animators,a=wr(o,e);a>=0&&o.splice(a,1)}),this.animators.push(e),r&&r.animation.addAnimator(e),r&&r.wakeUp()},t.prototype.updateDuringAnimation=function(e){this.markRedraw()},t.prototype.stopAnimation=function(e,n){for(var r=this.animators,i=r.length,o=[],a=0;a<i;a++){var s=r[a];!e||e===s.scope?s.stop(n):o.push(s)}return this.animators=o,this},t.prototype.animateTo=function(e,n,r){xP(this,e,n,r)},t.prototype.animateFrom=function(e,n,r){xP(this,e,n,r,!0)},t.prototype._transitionState=function(e,n,r,i){for(var o=xP(this,n,r,i),a=0;a<o.length;a++)o[a].__fromStateTransition=e},t.prototype.getBoundingRect=function(){return null},t.prototype.getPaintRect=function(){return null},t.initDefaultProps=function(){var e=t.prototype;e.type="element",e.name="",e.ignore=e.silent=e.isGroup=e.draggable=e.dragging=e.ignoreClip=e.__inHover=!1,e.__dirty=Ns;function n(r,i,o,a){Object.defineProperty(e,r,{get:function(){if(!this[i]){var l=this[i]=[];s(this,l)}return this[i]},set:function(l){this[o]=l[0],this[a]=l[1],this[i]=l,s(this,l)}});function s(l,c){Object.defineProperty(c,0,{get:function(){return l[o]},set:function(u){l[o]=u}}),Object.defineProperty(c,1,{get:function(){return l[a]},set:function(u){l[a]=u}})}}Object.defineProperty&&(n("position","_legacyPos","x","y"),n("scale","_legacyScale","scaleX","scaleY"),n("origin","_legacyOrigin","originX","originY"))}(),t}();wc(a$,wu);wc(a$,o$);function xP(t,e,n,r,i){n=n||{};var o=[];ote(t,"",t,e,n,r,o,i);var a=o.length,s=!1,l=n.done,c=n.aborted,u=function(){s=!0,a--,a<=0&&(s?l&&l():c&&c())},f=function(){a--,a<=0&&(s?l&&l():c&&c())};a||l&&l(),o.length>0&&n.during&&o[0].during(function(g,y){n.during(y)});for(var d=0;d<o.length;d++){var h=o[d];u&&h.done(u),f&&h.aborted(f),n.force&&h.duration(n.duration),h.start(n.easing)}return o}function CP(t,e,n){for(var r=0;r<n;r++)t[r]=e[r]}function C5e(t){return ds(t[0])}function T5e(t,e,n){if(ds(e[n]))if(ds(t[n])||(t[n]=[]),js(e[n])){var r=e[n].length;t[n].length!==r&&(t[n]=new e[n].constructor(r),CP(t[n],e[n],r))}else{var i=e[n],o=t[n],a=i.length;if(C5e(i))for(var s=i[0].length,l=0;l<a;l++)o[l]?CP(o[l],i[l],s):o[l]=Array.prototype.slice.call(i[l]);else CP(o,i,a);o.length=i.length}else t[n]=e[n]}function A5e(t,e){return t===e||ds(t)&&ds(e)&&P5e(t,e)}function P5e(t,e){var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function ote(t,e,n,r,i,o,a,s){for(var l=ir(r),c=i.duration,u=i.delay,f=i.additive,d=i.setToFinal,h=!jt(o),g=t.animators,y=[],S=0;S<l.length;S++){var v=l[S],_=r[v];if(_!=null&&n[v]!=null&&(h||o[v]))if(jt(_)&&!ds(_)&&!RT(_)){if(e){s||(n[v]=_,t.updateDuringAnimation(e));continue}ote(t,v,n[v],_,i,o&&o[v],a,s)}else y.push(v);else s||(n[v]=_,t.updateDuringAnimation(e),y.push(v))}var x=y.length;if(!f&&x)for(var C=0;C<g.length;C++){var k=g[C];if(k.targetName===e){var m=k.stopTracks(y);if(m){var T=wr(g,k);g.splice(T,1)}}}if(i.force||(y=Za(y,function(F){return!A5e(r[F],n[F])}),x=y.length),x>0||i.force&&!a.length){var E=void 0,I=void 0,D=void 0;if(s){I={},d&&(E={});for(var C=0;C<x;C++){var v=y[C];I[v]=n[v],d?E[v]=r[v]:n[v]=r[v]}}else if(d){D={};for(var C=0;C<x;C++){var v=y[C];D[v]=dx(n[v]),T5e(n,r,v)}}var k=new i$(n,!1,!1,f?Za(g,function(R){return R.targetName===e}):null);k.targetName=e,i.scope&&(k.scope=i.scope),d&&E&&k.whenWithKeys(0,E,y),D&&k.whenWithKeys(0,D,y),k.whenWithKeys(c??500,s?I:r,y).delay(u||0),t.addAnimator(k,e),a.push(k)}}const ate=a$;var ste=function(t){Cr(e,t);function e(n){var r=t.call(this)||this;return r.isGroup=!0,r._children=[],r.attr(n),r}return e.prototype.childrenRef=function(){return this._children},e.prototype.children=function(){return this._children.slice()},e.prototype.childAt=function(n){return this._children[n]},e.prototype.childOfName=function(n){for(var r=this._children,i=0;i<r.length;i++)if(r[i].name===n)return r[i]},e.prototype.childCount=function(){return this._children.length},e.prototype.add=function(n){return n&&n!==this&&n.parent!==this&&(this._children.push(n),this._doAdd(n)),this},e.prototype.addBefore=function(n,r){if(n&&n!==this&&n.parent!==this&&r&&r.parent===this){var i=this._children,o=i.indexOf(r);o>=0&&(i.splice(o,0,n),this._doAdd(n))}return this},e.prototype.replace=function(n,r){var i=wr(this._children,n);return i>=0&&this.replaceAt(r,i),this},e.prototype.replaceAt=function(n,r){var i=this._children,o=i[r];if(n&&n!==this&&n.parent!==this&&n!==o){i[r]=n,o.parent=null;var a=this.__zr;a&&o.removeSelfFromZr(a),this._doAdd(n)}return this},e.prototype._doAdd=function(n){n.parent&&n.parent.remove(n),n.parent=this;var r=this.__zr;r&&r!==n.__zr&&n.addSelfToZr(r),r&&r.refresh()},e.prototype.remove=function(n){var r=this.__zr,i=this._children,o=wr(i,n);return o<0?this:(i.splice(o,1),n.parent=null,r&&n.removeSelfFromZr(r),r&&r.refresh(),this)},e.prototype.removeAll=function(){for(var n=this._children,r=this.__zr,i=0;i<n.length;i++){var o=n[i];r&&o.removeSelfFromZr(r),o.parent=null}return n.length=0,this},e.prototype.eachChild=function(n,r){for(var i=this._children,o=0;o<i.length;o++){var a=i[o];n.call(r,a,o)}return this},e.prototype.traverse=function(n,r){for(var i=0;i<this._children.length;i++){var o=this._children[i],a=n.call(r,o);o.isGroup&&!a&&o.traverse(n,r)}return this},e.prototype.addSelfToZr=function(n){t.prototype.addSelfToZr.call(this,n);for(var r=0;r<this._children.length;r++){var i=this._children[r];i.addSelfToZr(n)}},e.prototype.removeSelfFromZr=function(n){t.prototype.removeSelfFromZr.call(this,n);for(var r=0;r<this._children.length;r++){var i=this._children[r];i.removeSelfFromZr(n)}},e.prototype.getBoundingRect=function(n){for(var r=new Ir(0,0,0,0),i=n||this._children,o=[],a=null,s=0;s<i.length;s++){var l=i[s];if(!(l.ignore||l.invisible)){var c=l.getBoundingRect(),u=l.getLocalTransform(o);u?(Ir.applyTransform(r,c,u),a=a||r.clone(),a.union(r)):(a=a||c.clone(),a.union(c))}}return a||r},e}(ate);ste.prototype.type="group";const yu=ste;/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var mx={},lte={};function E5e(t){delete lte[t]}function O5e(t){if(!t)return!1;if(typeof t=="string")return F4(t,1)<m9;if(t.colorStops){for(var e=t.colorStops,n=0,r=e.length,i=0;i<r;i++)n+=F4(e[i].color,1);return n/=r,n<m9}return!1}var I5e=function(){function t(e,n,r){var i=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,r=r||{},this.dom=n,this.id=e;var o=new zAe,a=r.renderer||"canvas";mx[a]||(a=ir(mx)[0]),r.useDirtyRect=r.useDirtyRect==null?!1:r.useDirtyRect;var s=new mx[a](n,o,r,e),l=r.ssr||s.ssrOnly;this.storage=o,this.painter=s;var c=!Pn.node&&!Pn.worker&&!l?new _5e(s.getViewportRoot(),s.root):null,u=r.useCoarsePointer,f=u==null||u==="auto"?Pn.touchEventsSupported:!!u,d=44,h;f&&(h=mn(r.pointerSize,d)),this.handler=new LAe(o,s,c,s.root,h),this.animation=new h5e({stage:{update:l?null:function(){return i._flush(!0)}}}),l||this.animation.start()}return t.prototype.add=function(e){e&&(this.storage.addRoot(e),e.addSelfToZr(this),this.refresh())},t.prototype.remove=function(e){e&&(this.storage.delRoot(e),e.removeSelfFromZr(this),this.refresh())},t.prototype.configLayer=function(e,n){this.painter.configLayer&&this.painter.configLayer(e,n),this.refresh()},t.prototype.setBackgroundColor=function(e){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(e),this.refresh(),this._backgroundColor=e,this._darkMode=O5e(e)},t.prototype.getBackgroundColor=function(){return this._backgroundColor},t.prototype.setDarkMode=function(e){this._darkMode=e},t.prototype.isDarkMode=function(){return this._darkMode},t.prototype.refreshImmediately=function(e){e||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},t.prototype.refresh=function(){this._needsRefresh=!0,this.animation.start()},t.prototype.flush=function(){this._flush(!1)},t.prototype._flush=function(e){var n,r=dv();this._needsRefresh&&(n=!0,this.refreshImmediately(e)),this._needsRefreshHover&&(n=!0,this.refreshHoverImmediately());var i=dv();n?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:i-r})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},t.prototype.setSleepAfterStill=function(e){this._sleepAfterStill=e},t.prototype.wakeUp=function(){this.animation.start(),this._stillFrameAccum=0},t.prototype.refreshHover=function(){this._needsRefreshHover=!0},t.prototype.refreshHoverImmediately=function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover()},t.prototype.resize=function(e){e=e||{},this.painter.resize(e.width,e.height),this.handler.resize()},t.prototype.clearAnimation=function(){this.animation.clear()},t.prototype.getWidth=function(){return this.painter.getWidth()},t.prototype.getHeight=function(){return this.painter.getHeight()},t.prototype.setCursorStyle=function(e){this.handler.setCursorStyle(e)},t.prototype.findHover=function(e,n){return this.handler.findHover(e,n)},t.prototype.on=function(e,n,r){return this.handler.on(e,n,r),this},t.prototype.off=function(e,n){this.handler.off(e,n)},t.prototype.trigger=function(e,n){this.handler.trigger(e,n)},t.prototype.clear=function(){for(var e=this.storage.getRoots(),n=0;n<e.length;n++)e[n]instanceof yu&&e[n].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()},t.prototype.dispose=function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,E5e(this.id)},t}();function EB(t,e){var n=new I5e(Tee(),t,e);return lte[n.id]=n,n}function $5e(t,e){mx[t]=e}var OB=1e-4,cte=20;function F5e(t){return t.replace(/^\s+|\s+$/g,"")}function u0(t,e,n,r){var i=e[0],o=e[1],a=n[0],s=n[1],l=o-i,c=s-a;if(l===0)return c===0?a:(a+s)/2;if(r)if(l>0){if(t<=i)return a;if(t>=o)return s}else{if(t>=i)return a;if(t<=o)return s}else{if(t===i)return a;if(t===o)return s}return(t-i)/l*c+a}function Kr(t,e){switch(t){case"center":case"middle":t="50%";break;case"left":case"top":t="0%";break;case"right":case"bottom":t="100%";break}return Ot(t)?F5e(t).match(/%$/)?parseFloat(t)/100*e:parseFloat(t):t==null?NaN:+t}function L5e(t,e,n){return e==null&&(e=10),e=Math.min(Math.max(0,e),cte),t=(+t).toFixed(e),n?t:+t}function IB(t){if(t=+t,isNaN(t))return 0;if(t>1e-14){for(var e=1,n=0;n<15;n++,e*=10)if(Math.round(t*e)/e===t)return n}return D5e(t)}function D5e(t){var e=t.toString().toLowerCase(),n=e.indexOf("e"),r=n>0?+e.slice(n+1):0,i=n>0?n:e.length,o=e.indexOf("."),a=o<0?0:i-1-o;return Math.max(0,a-r)}function N5e(t,e){var n=ah(t,function(h,g){return h+(isNaN(g)?0:g)},0);if(n===0)return[];for(var r=Math.pow(10,e),i=tn(t,function(h){return(isNaN(h)?0:h)/n*r*100}),o=r*100,a=tn(i,function(h){return Math.floor(h)}),s=ah(a,function(h,g){return h+g},0),l=tn(i,function(h,g){return h-a[g]});s<o;){for(var c=Number.NEGATIVE_INFINITY,u=null,f=0,d=l.length;f<d;++f)l[f]>c&&(c=l[f],u=f);++a[u],l[u]=0,++s}return tn(a,function(h){return h/r})}function M5e(t,e){var n=Math.max(IB(t),IB(e)),r=t+e;return n>cte?r:L5e(r,n)}function ute(t){var e=Math.PI*2;return(t%e+e)%e}function N4(t){return t>-OB&&t<OB}var R5e=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function jT(t){if(t instanceof Date)return t;if(Ot(t)){var e=R5e.exec(t);if(!e)return new Date(NaN);if(e[8]){var n=+e[4]||0;return e[8].toUpperCase()!=="Z"&&(n-=+e[8].slice(0,3)),new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,n,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0))}else return new Date(+e[1],+(e[2]||1)-1,+e[3]||1,+e[4]||0,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0)}else if(t==null)return new Date(NaN);return new Date(Math.round(t))}function M4(t){var e=parseFloat(t);return e==t&&(e!==0||!Ot(t)||t.indexOf("x")<=0)?e:NaN}function z5e(t){return!isNaN(M4(t))}function fte(){return Math.round(Math.random()*9)}function dte(t,e){return e===0?t:dte(e,t%e)}function $B(t,e){return t==null?e:e==null?t:t*e/dte(t,e)}function Qa(t){throw new Error(t)}var hte="series\0",V5e="\0_ec_\0";function Zo(t){return t instanceof Array?t:t==null?[]:[t]}function b9(t,e,n){if(t){t[e]=t[e]||{},t.emphasis=t.emphasis||{},t.emphasis[e]=t.emphasis[e]||{};for(var r=0,i=n.length;r<i;r++){var o=n[r];!t.emphasis[e].hasOwnProperty(o)&&t[e].hasOwnProperty(o)&&(t.emphasis[e][o]=t[e][o])}}}var FB=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function uS(t){return jt(t)&&!mt(t)&&!(t instanceof Date)?t.value:t}function B5e(t){return jt(t)&&!(t instanceof Array)}function j5e(t,e,n){var r=n==="normalMerge",i=n==="replaceMerge",o=n==="replaceAll";t=t||[],e=(e||[]).slice();var a=vn();be(e,function(l,c){if(!jt(l)){e[c]=null;return}});var s=H5e(t,a,n);return(r||i)&&U5e(s,t,a,e),r&&W5e(s,e),r||i?G5e(s,e,i):o&&q5e(s,e),Y5e(s),s}function H5e(t,e,n){var r=[];if(n==="replaceAll")return r;for(var i=0;i<t.length;i++){var o=t[i];o&&o.id!=null&&e.set(o.id,i),r.push({existing:n==="replaceMerge"||Z1(o)?null:o,newOption:null,keyInfo:null,brandNew:null})}return r}function U5e(t,e,n,r){be(r,function(i,o){if(!(!i||i.id==null)){var a=t1(i.id),s=n.get(a);if(s!=null){var l=t[s];Hs(!l.newOption,'Duplicated option on id "'+a+'".'),l.newOption=i,l.existing=e[s],r[o]=null}}})}function W5e(t,e){be(e,function(n,r){if(!(!n||n.name==null))for(var i=0;i<t.length;i++){var o=t[i].existing;if(!t[i].newOption&&o&&(o.id==null||n.id==null)&&!Z1(n)&&!Z1(o)&&pte("name",o,n)){t[i].newOption=n,e[r]=null;return}}})}function G5e(t,e,n){be(e,function(r){if(r){for(var i,o=0;(i=t[o])&&(i.newOption||Z1(i.existing)||i.existing&&r.id!=null&&!pte("id",r,i.existing));)o++;i?(i.newOption=r,i.brandNew=n):t.push({newOption:r,brandNew:n,existing:null,keyInfo:null}),o++}})}function q5e(t,e){be(e,function(n){t.push({newOption:n,brandNew:!0,existing:null,keyInfo:null})})}function Y5e(t){var e=vn();be(t,function(n){var r=n.existing;r&&e.set(r.id,n)}),be(t,function(n){var r=n.newOption;Hs(!r||r.id==null||!e.get(r.id)||e.get(r.id)===n,"id duplicates: "+(r&&r.id)),r&&r.id!=null&&e.set(r.id,n),!n.keyInfo&&(n.keyInfo={})}),be(t,function(n,r){var i=n.existing,o=n.newOption,a=n.keyInfo;if(jt(o)){if(a.name=o.name!=null?t1(o.name):i?i.name:hte+r,i)a.id=t1(i.id);else if(o.id!=null)a.id=t1(o.id);else{var s=0;do a.id="\0"+a.name+"\0"+s++;while(e.get(a.id))}e.set(a.id,n)}})}function pte(t,e,n){var r=Pl(e[t],null),i=Pl(n[t],null);return r!=null&&i!=null&&r===i}function t1(t){return Pl(t,"")}function Pl(t,e){return t==null?e:Ot(t)?t:Zr(t)||J8(t)?t+"":e}function s$(t){var e=t.name;return!!(e&&e.indexOf(hte))}function Z1(t){return t&&t.id!=null&&t1(t.id).indexOf(V5e)===0}function K5e(t,e,n){be(t,function(r){var i=r.newOption;jt(i)&&(r.keyInfo.mainType=e,r.keyInfo.subType=X5e(e,i,r.existing,n))})}function X5e(t,e,n,r){var i=e.type?e.type:n?n.subType:r.determineSubType(t,e);return i}function fS(t,e){if(e.dataIndexInside!=null)return e.dataIndexInside;if(e.dataIndex!=null)return mt(e.dataIndex)?tn(e.dataIndex,function(n){return t.indexOfRawIndex(n)}):t.indexOfRawIndex(e.dataIndex);if(e.name!=null)return mt(e.name)?tn(e.name,function(n){return t.indexOfName(n)}):t.indexOfName(e.name)}function no(){var t="__ec_inner_"+J5e++;return function(e){return e[t]||(e[t]={})}}var J5e=fte();function TP(t,e,n){var r=l$(e,n),i=r.mainTypeSpecified,o=r.queryOptionMap,a=r.others,s=a,l=n?n.defaultMainType:null;return!i&&l&&o.set(l,{}),o.each(function(c,u){var f=dS(t,u,c,{useDefault:l===u,enableAll:n&&n.enableAll!=null?n.enableAll:!0,enableNone:n&&n.enableNone!=null?n.enableNone:!0});s[u+"Models"]=f.models,s[u+"Model"]=f.models[0]}),s}function l$(t,e){var n;if(Ot(t)){var r={};r[t+"Index"]=0,n=r}else n=t;var i=vn(),o={},a=!1;return be(n,function(s,l){if(l==="dataIndex"||l==="dataIndexInside"){o[l]=s;return}var c=l.match(/^(\w+)(Index|Id|Name)$/)||[],u=c[1],f=(c[2]||"").toLowerCase();if(!(!u||!f||e&&e.includeMainTypes&&wr(e.includeMainTypes,u)<0)){a=a||!!u;var d=i.get(u)||i.set(u,{});d[f]=s}}),{mainTypeSpecified:a,queryOptionMap:i,others:o}}var qp={useDefault:!0,enableAll:!1,enableNone:!1};function dS(t,e,n,r){r=r||qp;var i=n.index,o=n.id,a=n.name,s={models:null,specified:i!=null||o!=null||a!=null};if(!s.specified){var l=void 0;return s.models=r.useDefault&&(l=t.getComponent(e))?[l]:[],s}return i==="none"||i===!1?(Hs(r.enableNone,'`"none"` or `false` is not a valid value on index option.'),s.models=[],s):(i==="all"&&(Hs(r.enableAll,'`"all"` is not a valid value on index option.'),i=o=a=null),s.models=t.queryComponents({mainType:e,index:i,id:o,name:a}),s)}function gte(t,e,n){t.setAttribute?t.setAttribute(e,n):t[e]=n}function Z5e(t,e){return t.getAttribute?t.getAttribute(e):t[e]}function Q5e(t){return t==="auto"?Pn.domSupported?"html":"richText":t||"html"}function ePe(t,e){var n=vn(),r=[];return be(t,function(i){var o=e(i);(n.get(o)||(r.push(o),n.set(o,[]))).push(i)}),{keys:r,buckets:n}}var tPe=".",tp="___EC__COMPONENT__CONTAINER___",mte="___EC__EXTENDED_CLASS___";function su(t){var e={main:"",sub:""};if(t){var n=t.split(tPe);e.main=n[0]||"",e.sub=n[1]||""}return e}function nPe(t){Hs(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(t),'componentType "'+t+'" illegal')}function rPe(t){return!!(t&&t[mte])}function c$(t,e){t.$constructor=t,t.extend=function(n){var r=this,i;return iPe(r)?i=function(o){xr(a,o);function a(){return o.apply(this,arguments)||this}return a}(r):(i=function(){(n.$constructor||r).apply(this,arguments)},K3e(i,this)),ot(i.prototype,n),i[mte]=!0,i.extend=this.extend,i.superCall=sPe,i.superApply=lPe,i.superClass=r,i}}function iPe(t){return Qn(t)&&/^class\s/.test(Function.prototype.toString.call(t))}function vte(t,e){t.extend=e.extend}var oPe=Math.round(Math.random()*10);function aPe(t){var e=["__\0is_clz",oPe++].join("_");t.prototype[e]=!0,t.isInstance=function(n){return!!(n&&n[e])}}function sPe(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return this.superClass.prototype[e].apply(t,n)}function lPe(t,e,n){return this.superClass.prototype[e].apply(t,n)}function u$(t){var e={};t.registerClass=function(r){var i=r.type||r.prototype.type;if(i){nPe(i),r.prototype.type=i;var o=su(i);if(!o.sub)e[o.main]=r;else if(o.sub!==tp){var a=n(o);a[o.sub]=r}}return r},t.getClass=function(r,i,o){var a=e[r];if(a&&a[tp]&&(a=i?a[i]:null),o&&!a)throw new Error(i?"Component "+r+"."+(i||"")+" is used but not imported.":r+".type should be specified.");return a},t.getClassesByMainType=function(r){var i=su(r),o=[],a=e[i.main];return a&&a[tp]?be(a,function(s,l){l!==tp&&o.push(s)}):o.push(a),o},t.hasClass=function(r){var i=su(r);return!!e[i.main]},t.getAllClassMainTypes=function(){var r=[];return be(e,function(i,o){r.push(o)}),r},t.hasSubTypes=function(r){var i=su(r),o=e[i.main];return o&&o[tp]};function n(r){var i=e[r.main];return(!i||!i[tp])&&(i=e[r.main]={},i[tp]=!0),i}}function Q1(t,e){for(var n=0;n<t.length;n++)t[n][1]||(t[n][1]=t[n][0]);return e=e||!1,function(r,i,o){for(var a={},s=0;s<t.length;s++){var l=t[s][1];if(!(i&&wr(i,l)>=0||o&&wr(o,l)<0)){var c=r.getShallow(l,e);c!=null&&(a[t[s][0]]=c)}}return a}}var cPe=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],uPe=Q1(cPe),fPe=function(){function t(){}return t.prototype.getAreaStyle=function(e,n){return uPe(this,e,n)},t}(),S9=new cS(50);function dPe(t){if(typeof t=="string"){var e=S9.get(t);return e&&e.image}else return t}function f$(t,e,n,r,i){if(t)if(typeof t=="string"){if(e&&e.__zrImageSrc===t||!n)return e;var o=S9.get(t),a={hostEl:n,cb:r,cbPayload:i};return o?(e=o.image,!HT(e)&&o.pending.push(a)):(e=L0.loadImage(t,LB,LB),e.__zrImageSrc=t,S9.put(t,e.__cachedImgObj={image:e,pending:[a]})),e}else return t;else return e}function LB(){var t=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<t.pending.length;e++){var n=t.pending[e],r=n.cb;r&&r(this,n.cbPayload),n.hostEl.dirty()}t.pending.length=0}function HT(t){return t&&t.width&&t.height}var AP=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function hPe(t,e,n,r,i){if(!e)return"";var o=(t+"").split(`
`);i=yte(e,n,r,i);for(var a=0,s=o.length;a<s;a++)o[a]=bte(o[a],i);return o.join(`
`)}function yte(t,e,n,r){r=r||{};var i=ot({},r);i.font=e,n=mn(n,"..."),i.maxIterations=mn(r.maxIterations,2);var o=i.minChar=mn(r.minChar,0);i.cnCharWidth=Bs("",e);var a=i.ascCharWidth=Bs("a",e);i.placeholder=mn(r.placeholder,"");for(var s=t=Math.max(0,t-1),l=0;l<o&&s>=a;l++)s-=a;var c=Bs(n,e);return c>s&&(n="",c=0),s=t-c,i.ellipsis=n,i.ellipsisWidth=c,i.contentWidth=s,i.containerWidth=t,i}function bte(t,e){var n=e.containerWidth,r=e.font,i=e.contentWidth;if(!n)return"";var o=Bs(t,r);if(o<=n)return t;for(var a=0;;a++){if(o<=i||a>=e.maxIterations){t+=e.ellipsis;break}var s=a===0?pPe(t,i,e.ascCharWidth,e.cnCharWidth):o>0?Math.floor(t.length*i/o):0;t=t.substr(0,s),o=Bs(t,r)}return t===""&&(t=e.placeholder),t}function pPe(t,e,n,r){for(var i=0,o=0,a=t.length;o<a&&i<e;o++){var s=t.charCodeAt(o);i+=0<=s&&s<=127?n:r}return o}function gPe(t,e){t!=null&&(t+="");var n=e.overflow,r=e.padding,i=e.font,o=n==="truncate",a=BT(i),s=mn(e.lineHeight,a),l=!!e.backgroundColor,c=e.lineOverflow==="truncate",u=e.width,f;u!=null&&(n==="break"||n==="breakAll")?f=t?Ste(t,e.font,u,n==="breakAll",0).lines:[]:f=t?t.split(`
`):[];var d=f.length*s,h=mn(e.height,d);if(d>h&&c){var g=Math.floor(h/s);f=f.slice(0,g)}if(t&&o&&u!=null)for(var y=yte(u,i,e.ellipsis,{minChar:e.truncateMinChar,placeholder:e.placeholder}),S=0;S<f.length;S++)f[S]=bte(f[S],y);for(var v=h,_=0,S=0;S<f.length;S++)_=Math.max(Bs(f[S],i),_);u==null&&(u=_);var x=_;return r&&(v+=r[0]+r[2],x+=r[1]+r[3],u+=r[1]+r[3]),l&&(x=u),{lines:f,height:h,outerWidth:x,outerHeight:v,lineHeight:s,calculatedLineHeight:a,contentWidth:_,contentHeight:d,width:u}}var mPe=function(){function t(){}return t}(),DB=function(){function t(e){this.tokens=[],e&&(this.tokens=e)}return t}(),vPe=function(){function t(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]}return t}();function yPe(t,e){var n=new vPe;if(t!=null&&(t+=""),!t)return n;for(var r=e.width,i=e.height,o=e.overflow,a=(o==="break"||o==="breakAll")&&r!=null?{width:r,accumWidth:0,breakAll:o==="breakAll"}:null,s=AP.lastIndex=0,l;(l=AP.exec(t))!=null;){var c=l.index;c>s&&PP(n,t.substring(s,c),e,a),PP(n,l[2],e,a,l[1]),s=AP.lastIndex}s<t.length&&PP(n,t.substring(s,t.length),e,a);var u=[],f=0,d=0,h=e.padding,g=o==="truncate",y=e.lineOverflow==="truncate";function S(Ae,Pe,Se){Ae.width=Pe,Ae.lineHeight=Se,f+=Se,d=Math.max(d,Pe)}e:for(var v=0;v<n.lines.length;v++){for(var _=n.lines[v],x=0,C=0,k=0;k<_.tokens.length;k++){var m=_.tokens[k],T=m.styleName&&e.rich[m.styleName]||{},E=m.textPadding=T.padding,I=E?E[1]+E[3]:0,D=m.font=T.font||e.font;m.contentHeight=BT(D);var F=mn(T.height,m.contentHeight);if(m.innerHeight=F,E&&(F+=E[0]+E[2]),m.height=F,m.lineHeight=Fv(T.lineHeight,e.lineHeight,F),m.align=T&&T.align||e.align,m.verticalAlign=T&&T.verticalAlign||"middle",y&&i!=null&&f+m.lineHeight>i){k>0?(_.tokens=_.tokens.slice(0,k),S(_,C,x),n.lines=n.lines.slice(0,v+1)):n.lines=n.lines.slice(0,v);break e}var R=T.width,z=R==null||R==="auto";if(typeof R=="string"&&R.charAt(R.length-1)==="%")m.percentWidth=R,u.push(m),m.contentWidth=Bs(m.text,D);else{if(z){var B=T.backgroundColor,ie=B&&B.image;ie&&(ie=dPe(ie),HT(ie)&&(m.width=Math.max(m.width,ie.width*F/ie.height)))}var oe=g&&r!=null?r-C:null;oe!=null&&oe<m.width?!z||oe<I?(m.text="",m.width=m.contentWidth=0):(m.text=hPe(m.text,oe-I,D,e.ellipsis,{minChar:e.truncateMinChar}),m.width=m.contentWidth=Bs(m.text,D)):m.contentWidth=Bs(m.text,D)}m.width+=I,C+=m.width,T&&(x=Math.max(x,m.lineHeight))}S(_,C,x)}n.outerWidth=n.width=mn(r,d),n.outerHeight=n.height=mn(i,f),n.contentHeight=f,n.contentWidth=d,h&&(n.outerWidth+=h[1]+h[3],n.outerHeight+=h[0]+h[2]);for(var v=0;v<u.length;v++){var m=u[v],_e=m.percentWidth;m.width=parseInt(_e,10)/100*n.width}return n}function PP(t,e,n,r,i){var o=e==="",a=i&&n.rich[i]||{},s=t.lines,l=a.font||n.font,c=!1,u,f;if(r){var d=a.padding,h=d?d[1]+d[3]:0;if(a.width!=null&&a.width!=="auto"){var g=c0(a.width,r.width)+h;s.length>0&&g+r.accumWidth>r.width&&(u=e.split(`
`),c=!0),r.accumWidth=g}else{var y=Ste(e,l,r.width,r.breakAll,r.accumWidth);r.accumWidth=y.accumWidth+h,f=y.linesWidths,u=y.lines}}else u=e.split(`
`);for(var S=0;S<u.length;S++){var v=u[S],_=new mPe;if(_.styleName=i,_.text=v,_.isLineHolder=!v&&!o,typeof a.width=="number"?_.width=a.width:_.width=f?f[S]:Bs(v,l),!S&&!c){var x=(s[s.length-1]||(s[0]=new DB)).tokens,C=x.length;C===1&&x[0].isLineHolder?x[0]=_:(v||!C||o)&&x.push(_)}else s.push(new DB([_]))}}function bPe(t){var e=t.charCodeAt(0);return e>=32&&e<=591||e>=880&&e<=4351||e>=4608&&e<=5119||e>=7680&&e<=8303}var SPe=ah(",&?/;] ".split(""),function(t,e){return t[e]=!0,t},{});function _Pe(t){return bPe(t)?!!SPe[t]:!0}function Ste(t,e,n,r,i){for(var o=[],a=[],s="",l="",c=0,u=0,f=0;f<t.length;f++){var d=t.charAt(f);if(d===`
`){l&&(s+=l,u+=c),o.push(s),a.push(u),s="",l="",c=0,u=0;continue}var h=Bs(d,e),g=r?!1:!_Pe(d);if(o.length?u+h>n:i+u+h>n){u?(s||l)&&(g?(s||(s=l,l="",c=0,u=c),o.push(s),a.push(u-c),l+=d,c+=h,s="",u=c):(l&&(s+=l,l="",c=0),o.push(s),a.push(u),s=d,u=h)):g?(o.push(l),a.push(c),l=d,c=h):(o.push(d),a.push(h));continue}u+=h,g?(l+=d,c+=h):(l&&(s+=l,l="",c=0),s+=d)}return!o.length&&!s&&(s=t,l="",c=0),l&&(s+=l),s&&(o.push(s),a.push(u)),o.length===1&&(u+=i),{accumWidth:u,lines:o,linesWidths:a}}var _9="__zr_style_"+Math.round(Math.random()*10),sg={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},UT={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};sg[_9]=!0;var NB=["z","z2","invisible"],wPe=["invisible"],kPe=function(t){Cr(e,t);function e(n){return t.call(this,n)||this}return e.prototype._init=function(n){for(var r=ir(n),i=0;i<r.length;i++){var o=r[i];o==="style"?this.useStyle(n[o]):t.prototype.attrKV.call(this,o,n[o])}this.style||this.useStyle({})},e.prototype.beforeBrush=function(){},e.prototype.afterBrush=function(){},e.prototype.innerBeforeBrush=function(){},e.prototype.innerAfterBrush=function(){},e.prototype.shouldBePainted=function(n,r,i,o){var a=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&xPe(this,n,r)||a&&!a[0]&&!a[3])return!1;if(i&&this.__clipPaths){for(var s=0;s<this.__clipPaths.length;++s)if(this.__clipPaths[s].isZeroArea())return!1}if(o&&this.parent)for(var l=this.parent;l;){if(l.ignore)return!1;l=l.parent}return!0},e.prototype.contain=function(n,r){return this.rectContain(n,r)},e.prototype.traverse=function(n,r){n.call(r,this)},e.prototype.rectContain=function(n,r){var i=this.transformCoordToLocal(n,r),o=this.getBoundingRect();return o.contain(i[0],i[1])},e.prototype.getPaintRect=function(){var n=this._paintRect;if(!this._paintRect||this.__dirty){var r=this.transform,i=this.getBoundingRect(),o=this.style,a=o.shadowBlur||0,s=o.shadowOffsetX||0,l=o.shadowOffsetY||0;n=this._paintRect||(this._paintRect=new Ir(0,0,0,0)),r?Ir.applyTransform(n,i,r):n.copy(i),(a||s||l)&&(n.width+=a*2+Math.abs(s),n.height+=a*2+Math.abs(l),n.x=Math.min(n.x,n.x+s-a),n.y=Math.min(n.y,n.y+l-a));var c=this.dirtyRectTolerance;n.isZero()||(n.x=Math.floor(n.x-c),n.y=Math.floor(n.y-c),n.width=Math.ceil(n.width+1+c*2),n.height=Math.ceil(n.height+1+c*2))}return n},e.prototype.setPrevPaintRect=function(n){n?(this._prevPaintRect=this._prevPaintRect||new Ir(0,0,0,0),this._prevPaintRect.copy(n)):this._prevPaintRect=null},e.prototype.getPrevPaintRect=function(){return this._prevPaintRect},e.prototype.animateStyle=function(n){return this.animate("style",n)},e.prototype.updateDuringAnimation=function(n){n==="style"?this.dirtyStyle():this.markRedraw()},e.prototype.attrKV=function(n,r){n!=="style"?t.prototype.attrKV.call(this,n,r):this.style?this.setStyle(r):this.useStyle(r)},e.prototype.setStyle=function(n,r){return typeof n=="string"?this.style[n]=r:ot(this.style,n),this.dirtyStyle(),this},e.prototype.dirtyStyle=function(n){n||this.markRedraw(),this.__dirty|=Ab,this._rect&&(this._rect=null)},e.prototype.dirty=function(){this.dirtyStyle()},e.prototype.styleChanged=function(){return!!(this.__dirty&Ab)},e.prototype.styleUpdated=function(){this.__dirty&=~Ab},e.prototype.createStyle=function(n){return zT(sg,n)},e.prototype.useStyle=function(n){n[_9]||(n=this.createStyle(n)),this.__inHover?this.__hoverStyle=n:this.style=n,this.dirtyStyle()},e.prototype.isStyleObject=function(n){return n[_9]},e.prototype._innerSaveToNormal=function(n){t.prototype._innerSaveToNormal.call(this,n);var r=this._normalState;n.style&&!r.style&&(r.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(n,r,NB)},e.prototype._applyStateObj=function(n,r,i,o,a,s){t.prototype._applyStateObj.call(this,n,r,i,o,a,s);var l=!(r&&o),c;if(r&&r.style?a?o?c=r.style:(c=this._mergeStyle(this.createStyle(),i.style),this._mergeStyle(c,r.style)):(c=this._mergeStyle(this.createStyle(),o?this.style:i.style),this._mergeStyle(c,r.style)):l&&(c=i.style),c)if(a){var u=this.style;if(this.style=this.createStyle(l?{}:u),l)for(var f=ir(u),d=0;d<f.length;d++){var h=f[d];h in c&&(c[h]=c[h],this.style[h]=u[h])}for(var g=ir(c),d=0;d<g.length;d++){var h=g[d];this.style[h]=this.style[h]}this._transitionState(n,{style:c},s,this.getAnimationStyleProps())}else this.useStyle(c);for(var y=this.__inHover?wPe:NB,d=0;d<y.length;d++){var h=y[d];r&&r[h]!=null?this[h]=r[h]:l&&i[h]!=null&&(this[h]=i[h])}},e.prototype._mergeStates=function(n){for(var r=t.prototype._mergeStates.call(this,n),i,o=0;o<n.length;o++){var a=n[o];a.style&&(i=i||{},this._mergeStyle(i,a.style))}return i&&(r.style=i),r},e.prototype._mergeStyle=function(n,r){return ot(n,r),n},e.prototype.getAnimationStyleProps=function(){return UT},e.initDefaultProps=function(){var n=e.prototype;n.type="displayable",n.invisible=!1,n.z=0,n.z2=0,n.zlevel=0,n.culling=!1,n.cursor="pointer",n.rectHover=!1,n.incremental=!1,n._rect=null,n.dirtyRectTolerance=0,n.__dirty=Ns|Ab}(),e}(ate),EP=new Ir(0,0,0,0),OP=new Ir(0,0,0,0);function xPe(t,e,n){return EP.copy(t.getBoundingRect()),t.transform&&EP.applyTransform(t.transform),OP.width=e,OP.height=n,!EP.intersect(OP)}const hS=kPe;var gl=Math.min,ml=Math.max,IP=Math.sin,$P=Math.cos,np=Math.PI*2,Rw=D0(),zw=D0(),Vw=D0();function MB(t,e,n,r,i,o){i[0]=gl(t,n),i[1]=gl(e,r),o[0]=ml(t,n),o[1]=ml(e,r)}var RB=[],zB=[];function CPe(t,e,n,r,i,o,a,s,l,c){var u=Hee,f=wo,d=u(t,n,i,a,RB);l[0]=1/0,l[1]=1/0,c[0]=-1/0,c[1]=-1/0;for(var h=0;h<d;h++){var g=f(t,n,i,a,RB[h]);l[0]=gl(g,l[0]),c[0]=ml(g,c[0])}d=u(e,r,o,s,zB);for(var h=0;h<d;h++){var y=f(e,r,o,s,zB[h]);l[1]=gl(y,l[1]),c[1]=ml(y,c[1])}l[0]=gl(t,l[0]),c[0]=ml(t,c[0]),l[0]=gl(a,l[0]),c[0]=ml(a,c[0]),l[1]=gl(e,l[1]),c[1]=ml(e,c[1]),l[1]=gl(s,l[1]),c[1]=ml(s,c[1])}function TPe(t,e,n,r,i,o,a,s){var l=Uee,c=Ho,u=ml(gl(l(t,n,i),1),0),f=ml(gl(l(e,r,o),1),0),d=c(t,n,i,u),h=c(e,r,o,f);a[0]=gl(t,i,d),a[1]=gl(e,o,h),s[0]=ml(t,i,d),s[1]=ml(e,o,h)}function APe(t,e,n,r,i,o,a,s,l){var c=uv,u=fv,f=Math.abs(i-o);if(f%np<1e-4&&f>1e-4){s[0]=t-n,s[1]=e-r,l[0]=t+n,l[1]=e+r;return}if(Rw[0]=$P(i)*n+t,Rw[1]=IP(i)*r+e,zw[0]=$P(o)*n+t,zw[1]=IP(o)*r+e,c(s,Rw,zw),u(l,Rw,zw),i=i%np,i<0&&(i=i+np),o=o%np,o<0&&(o=o+np),i>o&&!a?o+=np:i<o&&a&&(i+=np),a){var d=o;o=i,i=d}for(var h=0;h<o;h+=Math.PI/2)h>i&&(Vw[0]=$P(h)*n+t,Vw[1]=IP(h)*r+e,c(s,Vw,s),u(l,Vw,l))}var ur={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},rp=[],ip=[],zc=[],Zf=[],Vc=[],Bc=[],FP=Math.min,LP=Math.max,op=Math.cos,ap=Math.sin,Bu=Math.abs,w9=Math.PI,dd=w9*2,DP=typeof Float32Array<"u",Hy=[];function NP(t){var e=Math.round(t/w9*1e8)/1e8;return e%2*w9}function PPe(t,e){var n=NP(t[0]);n<0&&(n+=dd);var r=n-t[0],i=t[1];i+=r,!e&&i-n>=dd?i=n+dd:e&&n-i>=dd?i=n-dd:!e&&n>i?i=n+(dd-NP(n-i)):e&&n<i&&(i=n-(dd-NP(i-n))),t[0]=n,t[1]=i}var EPe=function(){function t(e){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,e&&(this._saveData=!1),this._saveData&&(this.data=[])}return t.prototype.increaseVersion=function(){this._version++},t.prototype.getVersion=function(){return this._version},t.prototype.setScale=function(e,n,r){r=r||0,r>0&&(this._ux=Bu(r/D4/e)||0,this._uy=Bu(r/D4/n)||0)},t.prototype.setDPR=function(e){this.dpr=e},t.prototype.setContext=function(e){this._ctx=e},t.prototype.getContext=function(){return this._ctx},t.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},t.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},t.prototype.moveTo=function(e,n){return this._drawPendingPt(),this.addData(ur.M,e,n),this._ctx&&this._ctx.moveTo(e,n),this._x0=e,this._y0=n,this._xi=e,this._yi=n,this},t.prototype.lineTo=function(e,n){var r=Bu(e-this._xi),i=Bu(n-this._yi),o=r>this._ux||i>this._uy;if(this.addData(ur.L,e,n),this._ctx&&o&&this._ctx.lineTo(e,n),o)this._xi=e,this._yi=n,this._pendingPtDist=0;else{var a=r*r+i*i;a>this._pendingPtDist&&(this._pendingPtX=e,this._pendingPtY=n,this._pendingPtDist=a)}return this},t.prototype.bezierCurveTo=function(e,n,r,i,o,a){return this._drawPendingPt(),this.addData(ur.C,e,n,r,i,o,a),this._ctx&&this._ctx.bezierCurveTo(e,n,r,i,o,a),this._xi=o,this._yi=a,this},t.prototype.quadraticCurveTo=function(e,n,r,i){return this._drawPendingPt(),this.addData(ur.Q,e,n,r,i),this._ctx&&this._ctx.quadraticCurveTo(e,n,r,i),this._xi=r,this._yi=i,this},t.prototype.arc=function(e,n,r,i,o,a){this._drawPendingPt(),Hy[0]=i,Hy[1]=o,PPe(Hy,a),i=Hy[0],o=Hy[1];var s=o-i;return this.addData(ur.A,e,n,r,r,i,s,0,a?0:1),this._ctx&&this._ctx.arc(e,n,r,i,o,a),this._xi=op(o)*r+e,this._yi=ap(o)*r+n,this},t.prototype.arcTo=function(e,n,r,i,o){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(e,n,r,i,o),this},t.prototype.rect=function(e,n,r,i){return this._drawPendingPt(),this._ctx&&this._ctx.rect(e,n,r,i),this.addData(ur.R,e,n,r,i),this},t.prototype.closePath=function(){this._drawPendingPt(),this.addData(ur.Z);var e=this._ctx,n=this._x0,r=this._y0;return e&&e.closePath(),this._xi=n,this._yi=r,this},t.prototype.fill=function(e){e&&e.fill(),this.toStatic()},t.prototype.stroke=function(e){e&&e.stroke(),this.toStatic()},t.prototype.len=function(){return this._len},t.prototype.setData=function(e){var n=e.length;!(this.data&&this.data.length===n)&&DP&&(this.data=new Float32Array(n));for(var r=0;r<n;r++)this.data[r]=e[r];this._len=n},t.prototype.appendPath=function(e){e instanceof Array||(e=[e]);for(var n=e.length,r=0,i=this._len,o=0;o<n;o++)r+=e[o].len();DP&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+r));for(var o=0;o<n;o++)for(var a=e[o].data,s=0;s<a.length;s++)this.data[i++]=a[s];this._len=i},t.prototype.addData=function(e,n,r,i,o,a,s,l,c){if(this._saveData){var u=this.data;this._len+arguments.length>u.length&&(this._expandData(),u=this.data);for(var f=0;f<arguments.length;f++)u[this._len++]=arguments[f]}},t.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},t.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var e=[],n=0;n<this._len;n++)e[n]=this.data[n];this.data=e}},t.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var e=this.data;e instanceof Array&&(e.length=this._len,DP&&this._len>11&&(this.data=new Float32Array(e)))}},t.prototype.getBoundingRect=function(){zc[0]=zc[1]=Vc[0]=Vc[1]=Number.MAX_VALUE,Zf[0]=Zf[1]=Bc[0]=Bc[1]=-Number.MAX_VALUE;var e=this.data,n=0,r=0,i=0,o=0,a;for(a=0;a<this._len;){var s=e[a++],l=a===1;switch(l&&(n=e[a],r=e[a+1],i=n,o=r),s){case ur.M:n=i=e[a++],r=o=e[a++],Vc[0]=i,Vc[1]=o,Bc[0]=i,Bc[1]=o;break;case ur.L:MB(n,r,e[a],e[a+1],Vc,Bc),n=e[a++],r=e[a++];break;case ur.C:CPe(n,r,e[a++],e[a++],e[a++],e[a++],e[a],e[a+1],Vc,Bc),n=e[a++],r=e[a++];break;case ur.Q:TPe(n,r,e[a++],e[a++],e[a],e[a+1],Vc,Bc),n=e[a++],r=e[a++];break;case ur.A:var c=e[a++],u=e[a++],f=e[a++],d=e[a++],h=e[a++],g=e[a++]+h;a+=1;var y=!e[a++];l&&(i=op(h)*f+c,o=ap(h)*d+u),APe(c,u,f,d,h,g,y,Vc,Bc),n=op(g)*f+c,r=ap(g)*d+u;break;case ur.R:i=n=e[a++],o=r=e[a++];var S=e[a++],v=e[a++];MB(i,o,i+S,o+v,Vc,Bc);break;case ur.Z:n=i,r=o;break}uv(zc,zc,Vc),fv(Zf,Zf,Bc)}return a===0&&(zc[0]=zc[1]=Zf[0]=Zf[1]=0),new Ir(zc[0],zc[1],Zf[0]-zc[0],Zf[1]-zc[1])},t.prototype._calculateLength=function(){var e=this.data,n=this._len,r=this._ux,i=this._uy,o=0,a=0,s=0,l=0;this._pathSegLen||(this._pathSegLen=[]);for(var c=this._pathSegLen,u=0,f=0,d=0;d<n;){var h=e[d++],g=d===1;g&&(o=e[d],a=e[d+1],s=o,l=a);var y=-1;switch(h){case ur.M:o=s=e[d++],a=l=e[d++];break;case ur.L:{var S=e[d++],v=e[d++],_=S-o,x=v-a;(Bu(_)>r||Bu(x)>i||d===n-1)&&(y=Math.sqrt(_*_+x*x),o=S,a=v);break}case ur.C:{var C=e[d++],k=e[d++],S=e[d++],v=e[d++],m=e[d++],T=e[d++];y=BAe(o,a,C,k,S,v,m,T,10),o=m,a=T;break}case ur.Q:{var C=e[d++],k=e[d++],S=e[d++],v=e[d++];y=UAe(o,a,C,k,S,v,10),o=S,a=v;break}case ur.A:var E=e[d++],I=e[d++],D=e[d++],F=e[d++],R=e[d++],z=e[d++],B=z+R;d+=1,e[d++],g&&(s=op(R)*D+E,l=ap(R)*F+I),y=LP(D,F)*FP(dd,Math.abs(z)),o=op(B)*D+E,a=ap(B)*F+I;break;case ur.R:{s=o=e[d++],l=a=e[d++];var ie=e[d++],oe=e[d++];y=ie*2+oe*2;break}case ur.Z:{var _=s-o,x=l-a;y=Math.sqrt(_*_+x*x),o=s,a=l;break}}y>=0&&(c[f++]=y,u+=y)}return this._pathLen=u,u},t.prototype.rebuildPath=function(e,n){var r=this.data,i=this._ux,o=this._uy,a=this._len,s,l,c,u,f,d,h=n<1,g,y,S=0,v=0,_,x=0,C,k;if(!(h&&(this._pathSegLen||this._calculateLength(),g=this._pathSegLen,y=this._pathLen,_=n*y,!_)))e:for(var m=0;m<a;){var T=r[m++],E=m===1;switch(E&&(c=r[m],u=r[m+1],s=c,l=u),T!==ur.L&&x>0&&(e.lineTo(C,k),x=0),T){case ur.M:s=c=r[m++],l=u=r[m++],e.moveTo(c,u);break;case ur.L:{f=r[m++],d=r[m++];var I=Bu(f-c),D=Bu(d-u);if(I>i||D>o){if(h){var F=g[v++];if(S+F>_){var R=(_-S)/F;e.lineTo(c*(1-R)+f*R,u*(1-R)+d*R);break e}S+=F}e.lineTo(f,d),c=f,u=d,x=0}else{var z=I*I+D*D;z>x&&(C=f,k=d,x=z)}break}case ur.C:{var B=r[m++],ie=r[m++],oe=r[m++],_e=r[m++],Ae=r[m++],Pe=r[m++];if(h){var F=g[v++];if(S+F>_){var R=(_-S)/F;O4(c,B,oe,Ae,R,rp),O4(u,ie,_e,Pe,R,ip),e.bezierCurveTo(rp[1],ip[1],rp[2],ip[2],rp[3],ip[3]);break e}S+=F}e.bezierCurveTo(B,ie,oe,_e,Ae,Pe),c=Ae,u=Pe;break}case ur.Q:{var B=r[m++],ie=r[m++],oe=r[m++],_e=r[m++];if(h){var F=g[v++];if(S+F>_){var R=(_-S)/F;I4(c,B,oe,R,rp),I4(u,ie,_e,R,ip),e.quadraticCurveTo(rp[1],ip[1],rp[2],ip[2]);break e}S+=F}e.quadraticCurveTo(B,ie,oe,_e),c=oe,u=_e;break}case ur.A:var Se=r[m++],se=r[m++],ne=r[m++],J=r[m++],V=r[m++],W=r[m++],ae=r[m++],te=!r[m++],ue=ne>J?ne:J,ce=Bu(ne-J)>.001,fe=V+W,ye=!1;if(h){var F=g[v++];S+F>_&&(fe=V+W*(_-S)/F,ye=!0),S+=F}if(ce&&e.ellipse?e.ellipse(Se,se,ne,J,ae,V,fe,te):e.arc(Se,se,ue,V,fe,te),ye)break e;E&&(s=op(V)*ne+Se,l=ap(V)*J+se),c=op(fe)*ne+Se,u=ap(fe)*J+se;break;case ur.R:s=c=r[m],l=u=r[m+1],f=r[m++],d=r[m++];var j=r[m++],Y=r[m++];if(h){var F=g[v++];if(S+F>_){var O=_-S;e.moveTo(f,d),e.lineTo(f+FP(O,j),d),O-=j,O>0&&e.lineTo(f+j,d+FP(O,Y)),O-=Y,O>0&&e.lineTo(f+LP(j-O,0),d+Y),O-=j,O>0&&e.lineTo(f,d+LP(Y-O,0));break e}S+=F}e.rect(f,d,j,Y);break;case ur.Z:if(h){var F=g[v++];if(S+F>_){var R=(_-S)/F;e.lineTo(c*(1-R)+s*R,u*(1-R)+l*R);break e}S+=F}e.closePath(),c=s,u=l}}},t.prototype.clone=function(){var e=new t,n=this.data;return e.data=n.slice?n.slice():Array.prototype.slice.call(n),e._len=this._len,e},t.CMD=ur,t.initDefaultProps=function(){var e=t.prototype;e._saveData=!0,e._ux=0,e._uy=0,e._pendingPtDist=0,e._version=0}(),t}();const sh=EPe;function Am(t,e,n,r,i,o,a){if(i===0)return!1;var s=i,l=0,c=t;if(a>e+s&&a>r+s||a<e-s&&a<r-s||o>t+s&&o>n+s||o<t-s&&o<n-s)return!1;if(t!==n)l=(e-r)/(t-n),c=(t*r-n*e)/(t-n);else return Math.abs(o-t)<=s/2;var u=l*o-a+c,f=u*u/(l*l+1);return f<=s/2*s/2}function OPe(t,e,n,r,i,o,a,s,l,c,u){if(l===0)return!1;var f=l;if(u>e+f&&u>r+f&&u>o+f&&u>s+f||u<e-f&&u<r-f&&u<o-f&&u<s-f||c>t+f&&c>n+f&&c>i+f&&c>a+f||c<t-f&&c<n-f&&c<i-f&&c<a-f)return!1;var d=VAe(t,e,n,r,i,o,a,s,c,u,null);return d<=f/2}function IPe(t,e,n,r,i,o,a,s,l){if(a===0)return!1;var c=a;if(l>e+c&&l>r+c&&l>o+c||l<e-c&&l<r-c&&l<o-c||s>t+c&&s>n+c&&s>i+c||s<t-c&&s<n-c&&s<i-c)return!1;var u=HAe(t,e,n,r,i,o,s,l,null);return u<=c/2}var VB=Math.PI*2;function hv(t){return t%=VB,t<0&&(t+=VB),t}var Uy=Math.PI*2;function $Pe(t,e,n,r,i,o,a,s,l){if(a===0)return!1;var c=a;s-=t,l-=e;var u=Math.sqrt(s*s+l*l);if(u-c>n||u+c<n)return!1;if(Math.abs(r-i)%Uy<1e-4)return!0;if(o){var f=r;r=hv(i),i=hv(f)}else r=hv(r),i=hv(i);r>i&&(i+=Uy);var d=Math.atan2(l,s);return d<0&&(d+=Uy),d>=r&&d<=i||d+Uy>=r&&d+Uy<=i}function sp(t,e,n,r,i,o){if(o>e&&o>r||o<e&&o<r||r===e)return 0;var a=(o-e)/(r-e),s=r<e?1:-1;(a===1||a===0)&&(s=r<e?.5:-.5);var l=a*(n-t)+t;return l===i?1/0:l>i?s:0}var Qf=sh.CMD,lp=Math.PI*2,FPe=1e-4;function LPe(t,e){return Math.abs(t-e)<FPe}var ya=[-1,-1,-1],dl=[-1,-1];function DPe(){var t=dl[0];dl[0]=dl[1],dl[1]=t}function NPe(t,e,n,r,i,o,a,s,l,c){if(c>e&&c>r&&c>o&&c>s||c<e&&c<r&&c<o&&c<s)return 0;var u=jee(e,r,o,s,c,ya);if(u===0)return 0;for(var f=0,d=-1,h=void 0,g=void 0,y=0;y<u;y++){var S=ya[y],v=S===0||S===1?.5:1,_=wo(t,n,i,a,S);_<l||(d<0&&(d=Hee(e,r,o,s,dl),dl[1]<dl[0]&&d>1&&DPe(),h=wo(e,r,o,s,dl[0]),d>1&&(g=wo(e,r,o,s,dl[1]))),d===2?S<dl[0]?f+=h<e?v:-v:S<dl[1]?f+=g<h?v:-v:f+=s<g?v:-v:S<dl[0]?f+=h<e?v:-v:f+=s<h?v:-v)}return f}function MPe(t,e,n,r,i,o,a,s){if(s>e&&s>r&&s>o||s<e&&s<r&&s<o)return 0;var l=jAe(e,r,o,s,ya);if(l===0)return 0;var c=Uee(e,r,o);if(c>=0&&c<=1){for(var u=0,f=Ho(e,r,o,c),d=0;d<l;d++){var h=ya[d]===0||ya[d]===1?.5:1,g=Ho(t,n,i,ya[d]);g<a||(ya[d]<c?u+=f<e?h:-h:u+=o<f?h:-h)}return u}else{var h=ya[0]===0||ya[0]===1?.5:1,g=Ho(t,n,i,ya[0]);return g<a?0:o<e?h:-h}}function RPe(t,e,n,r,i,o,a,s){if(s-=e,s>n||s<-n)return 0;var l=Math.sqrt(n*n-s*s);ya[0]=-l,ya[1]=l;var c=Math.abs(r-i);if(c<1e-4)return 0;if(c>=lp-1e-4){r=0,i=lp;var u=o?1:-1;return a>=ya[0]+t&&a<=ya[1]+t?u:0}if(r>i){var f=r;r=i,i=f}r<0&&(r+=lp,i+=lp);for(var d=0,h=0;h<2;h++){var g=ya[h];if(g+t>a){var y=Math.atan2(s,g),u=o?1:-1;y<0&&(y=lp+y),(y>=r&&y<=i||y+lp>=r&&y+lp<=i)&&(y>Math.PI/2&&y<Math.PI*1.5&&(u=-u),d+=u)}}return d}function _te(t,e,n,r,i){for(var o=t.data,a=t.len(),s=0,l=0,c=0,u=0,f=0,d,h,g=0;g<a;){var y=o[g++],S=g===1;switch(y===Qf.M&&g>1&&(n||(s+=sp(l,c,u,f,r,i))),S&&(l=o[g],c=o[g+1],u=l,f=c),y){case Qf.M:u=o[g++],f=o[g++],l=u,c=f;break;case Qf.L:if(n){if(Am(l,c,o[g],o[g+1],e,r,i))return!0}else s+=sp(l,c,o[g],o[g+1],r,i)||0;l=o[g++],c=o[g++];break;case Qf.C:if(n){if(OPe(l,c,o[g++],o[g++],o[g++],o[g++],o[g],o[g+1],e,r,i))return!0}else s+=NPe(l,c,o[g++],o[g++],o[g++],o[g++],o[g],o[g+1],r,i)||0;l=o[g++],c=o[g++];break;case Qf.Q:if(n){if(IPe(l,c,o[g++],o[g++],o[g],o[g+1],e,r,i))return!0}else s+=MPe(l,c,o[g++],o[g++],o[g],o[g+1],r,i)||0;l=o[g++],c=o[g++];break;case Qf.A:var v=o[g++],_=o[g++],x=o[g++],C=o[g++],k=o[g++],m=o[g++];g+=1;var T=!!(1-o[g++]);d=Math.cos(k)*x+v,h=Math.sin(k)*C+_,S?(u=d,f=h):s+=sp(l,c,d,h,r,i);var E=(r-v)*C/x+v;if(n){if($Pe(v,_,C,k,k+m,T,e,E,i))return!0}else s+=RPe(v,_,C,k,k+m,T,E,i);l=Math.cos(k+m)*x+v,c=Math.sin(k+m)*C+_;break;case Qf.R:u=l=o[g++],f=c=o[g++];var I=o[g++],D=o[g++];if(d=u+I,h=f+D,n){if(Am(u,f,d,f,e,r,i)||Am(d,f,d,h,e,r,i)||Am(d,h,u,h,e,r,i)||Am(u,h,u,f,e,r,i))return!0}else s+=sp(d,f,d,h,r,i),s+=sp(u,h,u,f,r,i);break;case Qf.Z:if(n){if(Am(l,c,u,f,e,r,i))return!0}else s+=sp(l,c,u,f,r,i);l=u,c=f;break}}return!n&&!LPe(c,f)&&(s+=sp(l,c,u,f,r,i)||0),s!==0}function zPe(t,e,n){return _te(t,0,!1,e,n)}function VPe(t,e,n,r){return _te(t,e,!0,n,r)}var R4=gi({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},sg),BPe={style:gi({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},UT.style)},MP=J1.concat(["invisible","culling","z","z2","zlevel","parent"]),jPe=function(t){Cr(e,t);function e(n){return t.call(this,n)||this}return e.prototype.update=function(){var n=this;t.prototype.update.call(this);var r=this.style;if(r.decal){var i=this._decalEl=this._decalEl||new e;i.buildPath===e.prototype.buildPath&&(i.buildPath=function(l){n.buildPath(l,n.shape)}),i.silent=!0;var o=i.style;for(var a in r)o[a]!==r[a]&&(o[a]=r[a]);o.fill=r.fill?r.decal:null,o.decal=null,o.shadowColor=null,r.strokeFirst&&(o.stroke=null);for(var s=0;s<MP.length;++s)i[MP[s]]=this[MP[s]];i.__dirty|=Ns}else this._decalEl&&(this._decalEl=null)},e.prototype.getDecalElement=function(){return this._decalEl},e.prototype._init=function(n){var r=ir(n);this.shape=this.getDefaultShape();var i=this.getDefaultStyle();i&&this.useStyle(i);for(var o=0;o<r.length;o++){var a=r[o],s=n[a];a==="style"?this.style?ot(this.style,s):this.useStyle(s):a==="shape"?ot(this.shape,s):t.prototype.attrKV.call(this,a,s)}this.style||this.useStyle({})},e.prototype.getDefaultStyle=function(){return null},e.prototype.getDefaultShape=function(){return{}},e.prototype.canBeInsideText=function(){return this.hasFill()},e.prototype.getInsideTextFill=function(){var n=this.style.fill;if(n!=="none"){if(Ot(n)){var r=F4(n,0);return r>.5?v9:r>.2?w5e:y9}else if(n)return y9}return v9},e.prototype.getInsideTextStroke=function(n){var r=this.style.fill;if(Ot(r)){var i=this.__zr,o=!!(i&&i.isDarkMode()),a=F4(n,0)<m9;if(o===a)return r}},e.prototype.buildPath=function(n,r,i){},e.prototype.pathUpdated=function(){this.__dirty&=~Km},e.prototype.getUpdatedPathProxy=function(n){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,n),this.path},e.prototype.createPathProxy=function(){this.path=new sh(!1)},e.prototype.hasStroke=function(){var n=this.style,r=n.stroke;return!(r==null||r==="none"||!(n.lineWidth>0))},e.prototype.hasFill=function(){var n=this.style,r=n.fill;return r!=null&&r!=="none"},e.prototype.getBoundingRect=function(){var n=this._rect,r=this.style,i=!n;if(i){var o=!1;this.path||(o=!0,this.createPathProxy());var a=this.path;(o||this.__dirty&Km)&&(a.beginPath(),this.buildPath(a,this.shape,!1),this.pathUpdated()),n=a.getBoundingRect()}if(this._rect=n,this.hasStroke()&&this.path&&this.path.len()>0){var s=this._rectStroke||(this._rectStroke=n.clone());if(this.__dirty||i){s.copy(n);var l=r.strokeNoScale?this.getLineScale():1,c=r.lineWidth;if(!this.hasFill()){var u=this.strokeContainThreshold;c=Math.max(c,u??4)}l>1e-10&&(s.width+=c/l,s.height+=c/l,s.x-=c/l/2,s.y-=c/l/2)}return s}return n},e.prototype.contain=function(n,r){var i=this.transformCoordToLocal(n,r),o=this.getBoundingRect(),a=this.style;if(n=i[0],r=i[1],o.contain(n,r)){var s=this.path;if(this.hasStroke()){var l=a.lineWidth,c=a.strokeNoScale?this.getLineScale():1;if(c>1e-10&&(this.hasFill()||(l=Math.max(l,this.strokeContainThreshold)),VPe(s,l/c,n,r)))return!0}if(this.hasFill())return zPe(s,n,r)}return!1},e.prototype.dirtyShape=function(){this.__dirty|=Km,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},e.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},e.prototype.animateShape=function(n){return this.animate("shape",n)},e.prototype.updateDuringAnimation=function(n){n==="style"?this.dirtyStyle():n==="shape"?this.dirtyShape():this.markRedraw()},e.prototype.attrKV=function(n,r){n==="shape"?this.setShape(r):t.prototype.attrKV.call(this,n,r)},e.prototype.setShape=function(n,r){var i=this.shape;return i||(i=this.shape={}),typeof n=="string"?i[n]=r:ot(i,n),this.dirtyShape(),this},e.prototype.shapeChanged=function(){return!!(this.__dirty&Km)},e.prototype.createStyle=function(n){return zT(R4,n)},e.prototype._innerSaveToNormal=function(n){t.prototype._innerSaveToNormal.call(this,n);var r=this._normalState;n.shape&&!r.shape&&(r.shape=ot({},this.shape))},e.prototype._applyStateObj=function(n,r,i,o,a,s){t.prototype._applyStateObj.call(this,n,r,i,o,a,s);var l=!(r&&o),c;if(r&&r.shape?a?o?c=r.shape:(c=ot({},i.shape),ot(c,r.shape)):(c=ot({},o?this.shape:i.shape),ot(c,r.shape)):l&&(c=i.shape),c)if(a){this.shape=ot({},this.shape);for(var u={},f=ir(c),d=0;d<f.length;d++){var h=f[d];typeof c[h]=="object"?this.shape[h]=c[h]:u[h]=c[h]}this._transitionState(n,{shape:u},s)}else this.shape=c,this.dirtyShape()},e.prototype._mergeStates=function(n){for(var r=t.prototype._mergeStates.call(this,n),i,o=0;o<n.length;o++){var a=n[o];a.shape&&(i=i||{},this._mergeStyle(i,a.shape))}return i&&(r.shape=i),r},e.prototype.getAnimationStyleProps=function(){return BPe},e.prototype.isZeroArea=function(){return!1},e.extend=function(n){var r=function(o){Cr(a,o);function a(s){var l=o.call(this,s)||this;return n.init&&n.init.call(l,s),l}return a.prototype.getDefaultStyle=function(){return Gn(n.style)},a.prototype.getDefaultShape=function(){return Gn(n.shape)},a}(e);for(var i in n)typeof n[i]=="function"&&(r.prototype[i]=n[i]);return r},e.initDefaultProps=function(){var n=e.prototype;n.type="path",n.strokeContainThreshold=5,n.segmentIgnoreThreshold=0,n.subPixelOptimize=!1,n.autoBatch=!1,n.__dirty=Ns|Ab|Km}(),e}(hS);const Fr=jPe;var HPe=gi({strokeFirst:!0,font:oh,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},R4),wte=function(t){Cr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.hasStroke=function(){var n=this.style,r=n.stroke;return r!=null&&r!=="none"&&n.lineWidth>0},e.prototype.hasFill=function(){var n=this.style,r=n.fill;return r!=null&&r!=="none"},e.prototype.createStyle=function(n){return zT(HPe,n)},e.prototype.setBoundingRect=function(n){this._rect=n},e.prototype.getBoundingRect=function(){var n=this.style;if(!this._rect){var r=n.text;r!=null?r+="":r="";var i=rte(r,n.font,n.textAlign,n.textBaseline);if(i.x+=n.x||0,i.y+=n.y||0,this.hasStroke()){var o=n.lineWidth;i.x-=o/2,i.y-=o/2,i.width+=o,i.height+=o}this._rect=i}return this._rect},e.initDefaultProps=function(){var n=e.prototype;n.dirtyRectTolerance=10}(),e}(hS);wte.prototype.type="tspan";const z4=wte;var UPe=gi({x:0,y:0},sg),WPe={style:gi({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},UT.style)};function GPe(t){return!!(t&&typeof t!="string"&&t.width&&t.height)}var kte=function(t){Cr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.createStyle=function(n){return zT(UPe,n)},e.prototype._getSize=function(n){var r=this.style,i=r[n];if(i!=null)return i;var o=GPe(r.image)?r.image:this.__image;if(!o)return 0;var a=n==="width"?"height":"width",s=r[a];return s==null?o[n]:o[n]/o[a]*s},e.prototype.getWidth=function(){return this._getSize("width")},e.prototype.getHeight=function(){return this._getSize("height")},e.prototype.getAnimationStyleProps=function(){return WPe},e.prototype.getBoundingRect=function(){var n=this.style;return this._rect||(this._rect=new Ir(n.x||0,n.y||0,this.getWidth(),this.getHeight())),this._rect},e}(hS);kte.prototype.type="image";const gh=kte;function qPe(t,e){var n=e.x,r=e.y,i=e.width,o=e.height,a=e.r,s,l,c,u;i<0&&(n=n+i,i=-i),o<0&&(r=r+o,o=-o),typeof a=="number"?s=l=c=u=a:a instanceof Array?a.length===1?s=l=c=u=a[0]:a.length===2?(s=c=a[0],l=u=a[1]):a.length===3?(s=a[0],l=u=a[1],c=a[2]):(s=a[0],l=a[1],c=a[2],u=a[3]):s=l=c=u=0;var f;s+l>i&&(f=s+l,s*=i/f,l*=i/f),c+u>i&&(f=c+u,c*=i/f,u*=i/f),l+c>o&&(f=l+c,l*=o/f,c*=o/f),s+u>o&&(f=s+u,s*=o/f,u*=o/f),t.moveTo(n+s,r),t.lineTo(n+i-l,r),l!==0&&t.arc(n+i-l,r+l,l,-Math.PI/2,0),t.lineTo(n+i,r+o-c),c!==0&&t.arc(n+i-c,r+o-c,c,0,Math.PI/2),t.lineTo(n+u,r+o),u!==0&&t.arc(n+u,r+o-u,u,Math.PI/2,Math.PI),t.lineTo(n,r+s),s!==0&&t.arc(n+s,r+s,s,Math.PI,Math.PI*1.5)}var pv=Math.round;function xte(t,e,n){if(e){var r=e.x1,i=e.x2,o=e.y1,a=e.y2;t.x1=r,t.x2=i,t.y1=o,t.y2=a;var s=n&&n.lineWidth;return s&&(pv(r*2)===pv(i*2)&&(t.x1=t.x2=Yp(r,s,!0)),pv(o*2)===pv(a*2)&&(t.y1=t.y2=Yp(o,s,!0))),t}}function Cte(t,e,n){if(e){var r=e.x,i=e.y,o=e.width,a=e.height;t.x=r,t.y=i,t.width=o,t.height=a;var s=n&&n.lineWidth;return s&&(t.x=Yp(r,s,!0),t.y=Yp(i,s,!0),t.width=Math.max(Yp(r+o,s,!1)-t.x,o===0?0:1),t.height=Math.max(Yp(i+a,s,!1)-t.y,a===0?0:1)),t}}function Yp(t,e,n){if(!e)return t;var r=pv(t*2);return(r+pv(e))%2===0?r/2:(r+(n?1:-1))/2}var YPe=function(){function t(){this.x=0,this.y=0,this.width=0,this.height=0}return t}(),KPe={},Tte=function(t){Cr(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultShape=function(){return new YPe},e.prototype.buildPath=function(n,r){var i,o,a,s;if(this.subPixelOptimize){var l=Cte(KPe,r,this.style);i=l.x,o=l.y,a=l.width,s=l.height,l.r=r.r,r=l}else i=r.x,o=r.y,a=r.width,s=r.height;r.r?qPe(n,r):n.rect(i,o,a,s)},e.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},e}(Fr);Tte.prototype.type="rect";const Qo=Tte;var BB={fill:"#000"},jB=2,XPe={style:gi({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},UT.style)},Ate=function(t){Cr(e,t);function e(n){var r=t.call(this)||this;return r.type="text",r._children=[],r._defaultStyle=BB,r.attr(n),r}return e.prototype.childrenRef=function(){return this._children},e.prototype.update=function(){t.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var n=0;n<this._children.length;n++){var r=this._children[n];r.zlevel=this.zlevel,r.z=this.z,r.z2=this.z2,r.culling=this.culling,r.cursor=this.cursor,r.invisible=this.invisible}},e.prototype.updateTransform=function(){var n=this.innerTransformable;n?(n.updateTransform(),n.transform&&(this.transform=n.transform)):t.prototype.updateTransform.call(this)},e.prototype.getLocalTransform=function(n){var r=this.innerTransformable;return r?r.getLocalTransform(n):t.prototype.getLocalTransform.call(this,n)},e.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),t.prototype.getComputedTransform.call(this)},e.prototype._updateSubTexts=function(){this._childCursor=0,QPe(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},e.prototype.addSelfToZr=function(n){t.prototype.addSelfToZr.call(this,n);for(var r=0;r<this._children.length;r++)this._children[r].__zr=n},e.prototype.removeSelfFromZr=function(n){t.prototype.removeSelfFromZr.call(this,n);for(var r=0;r<this._children.length;r++)this._children[r].__zr=null},e.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var n=new Ir(0,0,0,0),r=this._children,i=[],o=null,a=0;a<r.length;a++){var s=r[a],l=s.getBoundingRect(),c=s.getLocalTransform(i);c?(n.copy(l),n.applyTransform(c),o=o||n.clone(),o.union(n)):(o=o||l.clone(),o.union(l))}this._rect=o||n}return this._rect},e.prototype.setDefaultTextStyle=function(n){this._defaultStyle=n||BB},e.prototype.setTextContent=function(n){},e.prototype._mergeStyle=function(n,r){if(!r)return n;var i=r.rich,o=n.rich||i&&{};return ot(n,r),i&&o?(this._mergeRich(o,i),n.rich=o):o&&(n.rich=o),n},e.prototype._mergeRich=function(n,r){for(var i=ir(r),o=0;o<i.length;o++){var a=i[o];n[a]=n[a]||{},ot(n[a],r[a])}},e.prototype.getAnimationStyleProps=function(){return XPe},e.prototype._getOrCreateChild=function(n){var r=this._children[this._childCursor];return(!r||!(r instanceof n))&&(r=new n),this._children[this._childCursor++]=r,r.__zr=this.__zr,r.parent=this,r},e.prototype._updatePlainTexts=function(){var n=this.style,r=n.font||oh,i=n.padding,o=KB(n),a=gPe(o,n),s=RP(n),l=!!n.backgroundColor,c=a.outerHeight,u=a.outerWidth,f=a.contentWidth,d=a.lines,h=a.lineHeight,g=this._defaultStyle,y=n.x||0,S=n.y||0,v=n.align||g.align||"left",_=n.verticalAlign||g.verticalAlign||"top",x=y,C=Xm(S,a.contentHeight,_);if(s||i){var k=Eb(y,u,v),m=Xm(S,c,_);s&&this._renderBackground(n,n,k,m,u,c)}C+=h/2,i&&(x=YB(y,v,i),_==="top"?C+=i[0]:_==="bottom"&&(C-=i[2]));for(var T=0,E=!1,I=qB("fill"in n?n.fill:(E=!0,g.fill)),D=GB("stroke"in n?n.stroke:!l&&(!g.autoStroke||E)?(T=jB,g.stroke):null),F=n.textShadowBlur>0,R=n.width!=null&&(n.overflow==="truncate"||n.overflow==="break"||n.overflow==="breakAll"),z=a.calculatedLineHeight,B=0;B<d.length;B++){var ie=this._getOrCreateChild(z4),oe=ie.createStyle();ie.useStyle(oe),oe.text=d[B],oe.x=x,oe.y=C,v&&(oe.textAlign=v),oe.textBaseline="middle",oe.opacity=n.opacity,oe.strokeFirst=!0,F&&(oe.shadowBlur=n.textShadowBlur||0,oe.shadowColor=n.textShadowColor||"transparent",oe.shadowOffsetX=n.textShadowOffsetX||0,oe.shadowOffsetY=n.textShadowOffsetY||0),oe.stroke=D,oe.fill=I,D&&(oe.lineWidth=n.lineWidth||T,oe.lineDash=n.lineDash,oe.lineDashOffset=n.lineDashOffset||0),oe.font=r,UB(oe,n),C+=h,R&&ie.setBoundingRect(new Ir(Eb(oe.x,n.width,oe.textAlign),Xm(oe.y,z,oe.textBaseline),f,z))}},e.prototype._updateRichTexts=function(){var n=this.style,r=KB(n),i=yPe(r,n),o=i.width,a=i.outerWidth,s=i.outerHeight,l=n.padding,c=n.x||0,u=n.y||0,f=this._defaultStyle,d=n.align||f.align,h=n.verticalAlign||f.verticalAlign,g=Eb(c,a,d),y=Xm(u,s,h),S=g,v=y;l&&(S+=l[3],v+=l[0]);var _=S+o;RP(n)&&this._renderBackground(n,n,g,y,a,s);for(var x=!!n.backgroundColor,C=0;C<i.lines.length;C++){for(var k=i.lines[C],m=k.tokens,T=m.length,E=k.lineHeight,I=k.width,D=0,F=S,R=_,z=T-1,B=void 0;D<T&&(B=m[D],!B.align||B.align==="left");)this._placeToken(B,n,E,v,F,"left",x),I-=B.width,F+=B.width,D++;for(;z>=0&&(B=m[z],B.align==="right");)this._placeToken(B,n,E,v,R,"right",x),I-=B.width,R-=B.width,z--;for(F+=(o-(F-S)-(_-R)-I)/2;D<=z;)B=m[D],this._placeToken(B,n,E,v,F+B.width/2,"center",x),F+=B.width,D++;v+=E}},e.prototype._placeToken=function(n,r,i,o,a,s,l){var c=r.rich[n.styleName]||{};c.text=n.text;var u=n.verticalAlign,f=o+i/2;u==="top"?f=o+n.height/2:u==="bottom"&&(f=o+i-n.height/2);var d=!n.isLineHolder&&RP(c);d&&this._renderBackground(c,r,s==="right"?a-n.width:s==="center"?a-n.width/2:a,f-n.height/2,n.width,n.height);var h=!!c.backgroundColor,g=n.textPadding;g&&(a=YB(a,s,g),f-=n.height/2-g[0]-n.innerHeight/2);var y=this._getOrCreateChild(z4),S=y.createStyle();y.useStyle(S);var v=this._defaultStyle,_=!1,x=0,C=qB("fill"in c?c.fill:"fill"in r?r.fill:(_=!0,v.fill)),k=GB("stroke"in c?c.stroke:"stroke"in r?r.stroke:!h&&!l&&(!v.autoStroke||_)?(x=jB,v.stroke):null),m=c.textShadowBlur>0||r.textShadowBlur>0;S.text=n.text,S.x=a,S.y=f,m&&(S.shadowBlur=c.textShadowBlur||r.textShadowBlur||0,S.shadowColor=c.textShadowColor||r.textShadowColor||"transparent",S.shadowOffsetX=c.textShadowOffsetX||r.textShadowOffsetX||0,S.shadowOffsetY=c.textShadowOffsetY||r.textShadowOffsetY||0),S.textAlign=s,S.textBaseline="middle",S.font=n.font||oh,S.opacity=Fv(c.opacity,r.opacity,1),UB(S,c),k&&(S.lineWidth=Fv(c.lineWidth,r.lineWidth,x),S.lineDash=mn(c.lineDash,r.lineDash),S.lineDashOffset=r.lineDashOffset||0,S.stroke=k),C&&(S.fill=C);var T=n.contentWidth,E=n.contentHeight;y.setBoundingRect(new Ir(Eb(S.x,T,S.textAlign),Xm(S.y,E,S.textBaseline),T,E))},e.prototype._renderBackground=function(n,r,i,o,a,s){var l=n.backgroundColor,c=n.borderWidth,u=n.borderColor,f=l&&l.image,d=l&&!f,h=n.borderRadius,g=this,y,S;if(d||n.lineHeight||c&&u){y=this._getOrCreateChild(Qo),y.useStyle(y.createStyle()),y.style.fill=null;var v=y.shape;v.x=i,v.y=o,v.width=a,v.height=s,v.r=h,y.dirtyShape()}if(d){var _=y.style;_.fill=l||null,_.fillOpacity=mn(n.fillOpacity,1)}else if(f){S=this._getOrCreateChild(gh),S.onload=function(){g.dirtyStyle()};var x=S.style;x.image=l.image,x.x=i,x.y=o,x.width=a,x.height=s}if(c&&u){var _=y.style;_.lineWidth=c,_.stroke=u,_.strokeOpacity=mn(n.strokeOpacity,1),_.lineDash=n.borderDash,_.lineDashOffset=n.borderDashOffset||0,y.strokeContainThreshold=0,y.hasFill()&&y.hasStroke()&&(_.strokeFirst=!0,_.lineWidth*=2)}var C=(y||S).style;C.shadowBlur=n.shadowBlur||0,C.shadowColor=n.shadowColor||"transparent",C.shadowOffsetX=n.shadowOffsetX||0,C.shadowOffsetY=n.shadowOffsetY||0,C.opacity=Fv(n.opacity,r.opacity,1)},e.makeFont=function(n){var r="";return Ete(n)&&(r=[n.fontStyle,n.fontWeight,Pte(n.fontSize),n.fontFamily||"sans-serif"].join(" ")),r&&au(r)||n.textFont||n.font},e}(hS),JPe={left:!0,right:1,center:1},ZPe={top:1,bottom:1,middle:1},HB=["fontStyle","fontWeight","fontSize","fontFamily"];function Pte(t){return typeof t=="string"&&(t.indexOf("px")!==-1||t.indexOf("rem")!==-1||t.indexOf("em")!==-1)?t:isNaN(+t)?YI+"px":t+"px"}function UB(t,e){for(var n=0;n<HB.length;n++){var r=HB[n],i=e[r];i!=null&&(t[r]=i)}}function Ete(t){return t.fontSize!=null||t.fontFamily||t.fontWeight}function QPe(t){return WB(t),be(t.rich,WB),t}function WB(t){if(t){t.font=Ate.makeFont(t);var e=t.align;e==="middle"&&(e="center"),t.align=e==null||JPe[e]?e:"left";var n=t.verticalAlign;n==="center"&&(n="middle"),t.verticalAlign=n==null||ZPe[n]?n:"top";var r=t.padding;r&&(t.padding=Aee(t.padding))}}function GB(t,e){return t==null||e<=0||t==="transparent"||t==="none"?null:t.image||t.colorStops?"#000":t}function qB(t){return t==null||t==="none"?null:t.image||t.colorStops?"#000":t}function YB(t,e,n){return e==="right"?t-n[1]:e==="center"?t+n[3]/2-n[1]/2:t+n[3]}function KB(t){var e=t.text;return e!=null&&(e+=""),e}function RP(t){return!!(t.backgroundColor||t.lineHeight||t.borderWidth&&t.borderColor)}const ea=Ate;var Vr=no(),e7e=function(t,e,n,r){if(r){var i=Vr(r);i.dataIndex=n,i.dataType=e,i.seriesIndex=t,r.type==="group"&&r.traverse(function(o){var a=Vr(o);a.seriesIndex=t,a.dataIndex=n,a.dataType=e})}},XB=1,JB={},Ote=no(),d$=no(),Ite=0,h$=1,p$=2,pc=["emphasis","blur","select"],e2=["normal","emphasis","blur","select"],t7e=10,n7e=9,lg="highlight",vx="downplay",n1="select",yx="unselect",r1="toggleSelect";function Pm(t){return t!=null&&t!=="none"}var ZB=new cS(100);function QB(t){if(Ot(t)){var e=ZB.get(t);return e||(e=c9(t,-.1),ZB.put(t,e)),e}else if(RT(t)){var n=ot({},t);return n.colorStops=tn(t.colorStops,function(r){return{offset:r.offset,color:c9(r.color,-.1)}}),n}return t}function WT(t,e,n){t.onHoverStateChange&&(t.hoverState||0)!==n&&t.onHoverStateChange(e),t.hoverState=n}function $te(t){WT(t,"emphasis",p$)}function Fte(t){t.hoverState===p$&&WT(t,"normal",Ite)}function g$(t){WT(t,"blur",h$)}function Lte(t){t.hoverState===h$&&WT(t,"normal",Ite)}function r7e(t){t.selected=!0}function i7e(t){t.selected=!1}function ej(t,e,n){e(t,n)}function Ff(t,e,n){ej(t,e,n),t.isGroup&&t.traverse(function(r){ej(r,e,n)})}function o7e(t,e,n,r){for(var i=t.style,o={},a=0;a<e.length;a++){var s=e[a],l=i[s];o[s]=l??(r&&r[s])}for(var a=0;a<t.animators.length;a++){var c=t.animators[a];c.__fromStateTransition&&c.__fromStateTransition.indexOf(n)<0&&c.targetName==="style"&&c.saveTo(o,e)}return o}function a7e(t,e,n,r){var i=n&&wr(n,"select")>=0,o=!1;if(t instanceof Fr){var a=Ote(t),s=i&&a.selectFill||a.normalFill,l=i&&a.selectStroke||a.normalStroke;if(Pm(s)||Pm(l)){r=r||{};var c=r.style||{};c.fill==="inherit"?(o=!0,r=ot({},r),c=ot({},c),c.fill=s):!Pm(c.fill)&&Pm(s)?(o=!0,r=ot({},r),c=ot({},c),c.fill=QB(s)):!Pm(c.stroke)&&Pm(l)&&(o||(r=ot({},r),c=ot({},c)),c.stroke=QB(l)),r.style=c}}if(r&&r.z2==null){o||(r=ot({},r));var u=t.z2EmphasisLift;r.z2=t.z2+(u??t7e)}return r}function s7e(t,e,n){if(n&&n.z2==null){n=ot({},n);var r=t.z2SelectLift;n.z2=t.z2+(r??n7e)}return n}function l7e(t,e,n){var r=wr(t.currentStates,e)>=0,i=t.style.opacity,o=r?null:o7e(t,["opacity"],e,{opacity:1});n=n||{};var a=n.style||{};return a.opacity==null&&(n=ot({},n),a=ot({opacity:r?i:o.opacity*.1},a),n.style=a),n}function zP(t,e){var n=this.states[t];if(this.style){if(t==="emphasis")return a7e(this,t,e,n);if(t==="blur")return l7e(this,t,n);if(t==="select")return s7e(this,t,n)}return n}function c7e(t){t.stateProxy=zP;var e=t.getTextContent(),n=t.getTextGuideLine();e&&(e.stateProxy=zP),n&&(n.stateProxy=zP)}function tj(t,e){!Rte(t,e)&&!t.__highByOuter&&Ff(t,$te)}function nj(t,e){!Rte(t,e)&&!t.__highByOuter&&Ff(t,Fte)}function V4(t,e){t.__highByOuter|=1<<(e||0),Ff(t,$te)}function B4(t,e){!(t.__highByOuter&=~(1<<(e||0)))&&Ff(t,Fte)}function u7e(t){Ff(t,g$)}function Dte(t){Ff(t,Lte)}function Nte(t){Ff(t,r7e)}function Mte(t){Ff(t,i7e)}function Rte(t,e){return t.__highDownSilentOnTouch&&e.zrByTouch}function zte(t){var e=t.getModel(),n=[],r=[];e.eachComponent(function(i,o){var a=d$(o),s=i==="series",l=s?t.getViewOfSeriesModel(o):t.getViewOfComponentModel(o);!s&&r.push(l),a.isBlured&&(l.group.traverse(function(c){Lte(c)}),s&&n.push(o)),a.isBlured=!1}),be(r,function(i){i&&i.toggleBlurSeries&&i.toggleBlurSeries(n,!1,e)})}function k9(t,e,n,r){var i=r.getModel();n=n||"coordinateSystem";function o(c,u){for(var f=0;f<u.length;f++){var d=c.getItemGraphicEl(u[f]);d&&Dte(d)}}if(t!=null&&!(!e||e==="none")){var a=i.getSeriesByIndex(t),s=a.coordinateSystem;s&&s.master&&(s=s.master);var l=[];i.eachSeries(function(c){var u=a===c,f=c.coordinateSystem;f&&f.master&&(f=f.master);var d=f&&s?f===s:u;if(!(n==="series"&&!u||n==="coordinateSystem"&&!d||e==="series"&&u)){var h=r.getViewOfSeriesModel(c);if(h.group.traverse(function(S){S.__highByOuter&&u&&e==="self"||g$(S)}),ds(e))o(c.getData(),e);else if(jt(e))for(var g=ir(e),y=0;y<g.length;y++)o(c.getData(g[y]),e[g[y]]);l.push(c),d$(c).isBlured=!0}}),i.eachComponent(function(c,u){if(c!=="series"){var f=r.getViewOfComponentModel(u);f&&f.toggleBlurSeries&&f.toggleBlurSeries(l,!0,i)}})}}function x9(t,e,n){if(!(t==null||e==null)){var r=n.getModel().getComponent(t,e);if(r){d$(r).isBlured=!0;var i=n.getViewOfComponentModel(r);!i||!i.focusBlurEnabled||i.group.traverse(function(o){g$(o)})}}}function f7e(t,e,n){var r=t.seriesIndex,i=t.getData(e.dataType);if(i){var o=fS(i,e);o=(mt(o)?o[0]:o)||0;var a=i.getItemGraphicEl(o);if(!a)for(var s=i.count(),l=0;!a&&l<s;)a=i.getItemGraphicEl(l++);if(a){var c=Vr(a);k9(r,c.focus,c.blurScope,n)}else{var u=t.get(["emphasis","focus"]),f=t.get(["emphasis","blurScope"]);u!=null&&k9(r,u,f,n)}}}function m$(t,e,n,r){var i={focusSelf:!1,dispatchers:null};if(t==null||t==="series"||e==null||n==null)return i;var o=r.getModel().getComponent(t,e);if(!o)return i;var a=r.getViewOfComponentModel(o);if(!a||!a.findHighDownDispatchers)return i;for(var s=a.findHighDownDispatchers(n),l,c=0;c<s.length;c++)if(Vr(s[c]).focus==="self"){l=!0;break}return{focusSelf:l,dispatchers:s}}function d7e(t,e,n){var r=Vr(t),i=m$(r.componentMainType,r.componentIndex,r.componentHighDownName,n),o=i.dispatchers,a=i.focusSelf;o?(a&&x9(r.componentMainType,r.componentIndex,n),be(o,function(s){return tj(s,e)})):(k9(r.seriesIndex,r.focus,r.blurScope,n),r.focus==="self"&&x9(r.componentMainType,r.componentIndex,n),tj(t,e))}function h7e(t,e,n){zte(n);var r=Vr(t),i=m$(r.componentMainType,r.componentIndex,r.componentHighDownName,n).dispatchers;i?be(i,function(o){return nj(o,e)}):nj(t,e)}function p7e(t,e,n){if(P9(e)){var r=e.dataType,i=t.getData(r),o=fS(i,e);mt(o)||(o=[o]),t[e.type===r1?"toggleSelect":e.type===n1?"select":"unselect"](o,r)}}function rj(t){var e=t.getAllData();be(e,function(n){var r=n.data,i=n.type;r.eachItemGraphicEl(function(o,a){t.isSelected(a,i)?Nte(o):Mte(o)})})}function g7e(t){var e=[];return t.eachSeries(function(n){var r=n.getAllData();be(r,function(i){i.data;var o=i.type,a=n.getSelectedDataIndices();if(a.length>0){var s={dataIndex:a,seriesIndex:n.seriesIndex};o!=null&&(s.dataType=o),e.push(s)}})}),e}function C9(t,e,n){Vte(t,!0),Ff(t,c7e),v7e(t,e,n)}function m7e(t){Vte(t,!1)}function j4(t,e,n,r){r?m7e(t):C9(t,e,n)}function v7e(t,e,n){var r=Vr(t);e!=null?(r.focus=e,r.blurScope=n):r.focus&&(r.focus=null)}var ij=["emphasis","blur","select"],y7e={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function T9(t,e,n,r){n=n||"itemStyle";for(var i=0;i<ij.length;i++){var o=ij[i],a=e.getModel([o,n]),s=t.ensureState(o);s.style=r?r(a):a[y7e[n]]()}}function Vte(t,e){var n=e===!1,r=t;t.highDownSilentOnTouch&&(r.__highDownSilentOnTouch=t.highDownSilentOnTouch),(!n||r.__highDownDispatcher)&&(r.__highByOuter=r.__highByOuter||0,r.__highDownDispatcher=!n)}function A9(t){return!!(t&&t.__highDownDispatcher)}function b7e(t){var e=JB[t];return e==null&&XB<=32&&(e=JB[t]=XB++),e}function P9(t){var e=t.type;return e===n1||e===yx||e===r1}function oj(t){var e=t.type;return e===lg||e===vx}function S7e(t){var e=Ote(t);e.normalFill=t.style.fill,e.normalStroke=t.style.stroke;var n=t.states.select||{};e.selectFill=n.style&&n.style.fill||null,e.selectStroke=n.style&&n.style.stroke||null}var Em=sh.CMD,_7e=[[],[],[]],aj=Math.sqrt,w7e=Math.atan2;function k7e(t,e){if(e){var n=t.data,r=t.len(),i,o,a,s,l,c,u=Em.M,f=Em.C,d=Em.L,h=Em.R,g=Em.A,y=Em.Q;for(a=0,s=0;a<r;){switch(i=n[a++],s=a,o=0,i){case u:o=1;break;case d:o=1;break;case f:o=3;break;case y:o=2;break;case g:var S=e[4],v=e[5],_=aj(e[0]*e[0]+e[1]*e[1]),x=aj(e[2]*e[2]+e[3]*e[3]),C=w7e(-e[1]/x,e[0]/_);n[a]*=_,n[a++]+=S,n[a]*=x,n[a++]+=v,n[a++]*=_,n[a++]*=x,n[a++]+=C,n[a++]+=C,a+=2,s=a;break;case h:c[0]=n[a++],c[1]=n[a++],fu(c,c,e),n[s++]=c[0],n[s++]=c[1],c[0]+=n[a++],c[1]+=n[a++],fu(c,c,e),n[s++]=c[0],n[s++]=c[1]}for(l=0;l<o;l++){var k=_7e[l];k[0]=n[a++],k[1]=n[a++],fu(k,k,e),n[s++]=k[0],n[s++]=k[1]}}t.increaseVersion()}}var VP=Math.sqrt,Bw=Math.sin,jw=Math.cos,Wy=Math.PI;function sj(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function E9(t,e){return(t[0]*e[0]+t[1]*e[1])/(sj(t)*sj(e))}function lj(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(E9(t,e))}function cj(t,e,n,r,i,o,a,s,l,c,u){var f=l*(Wy/180),d=jw(f)*(t-n)/2+Bw(f)*(e-r)/2,h=-1*Bw(f)*(t-n)/2+jw(f)*(e-r)/2,g=d*d/(a*a)+h*h/(s*s);g>1&&(a*=VP(g),s*=VP(g));var y=(i===o?-1:1)*VP((a*a*(s*s)-a*a*(h*h)-s*s*(d*d))/(a*a*(h*h)+s*s*(d*d)))||0,S=y*a*h/s,v=y*-s*d/a,_=(t+n)/2+jw(f)*S-Bw(f)*v,x=(e+r)/2+Bw(f)*S+jw(f)*v,C=lj([1,0],[(d-S)/a,(h-v)/s]),k=[(d-S)/a,(h-v)/s],m=[(-1*d-S)/a,(-1*h-v)/s],T=lj(k,m);if(E9(k,m)<=-1&&(T=Wy),E9(k,m)>=1&&(T=0),T<0){var E=Math.round(T/Wy*1e6)/1e6;T=Wy*2+E%2*Wy}u.addData(c,_,x,a,s,C,T,f,o)}var x7e=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,C7e=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function T7e(t){var e=new sh;if(!t)return e;var n=0,r=0,i=n,o=r,a,s=sh.CMD,l=t.match(x7e);if(!l)return e;for(var c=0;c<l.length;c++){for(var u=l[c],f=u.charAt(0),d=void 0,h=u.match(C7e)||[],g=h.length,y=0;y<g;y++)h[y]=parseFloat(h[y]);for(var S=0;S<g;){var v=void 0,_=void 0,x=void 0,C=void 0,k=void 0,m=void 0,T=void 0,E=n,I=r,D=void 0,F=void 0;switch(f){case"l":n+=h[S++],r+=h[S++],d=s.L,e.addData(d,n,r);break;case"L":n=h[S++],r=h[S++],d=s.L,e.addData(d,n,r);break;case"m":n+=h[S++],r+=h[S++],d=s.M,e.addData(d,n,r),i=n,o=r,f="l";break;case"M":n=h[S++],r=h[S++],d=s.M,e.addData(d,n,r),i=n,o=r,f="L";break;case"h":n+=h[S++],d=s.L,e.addData(d,n,r);break;case"H":n=h[S++],d=s.L,e.addData(d,n,r);break;case"v":r+=h[S++],d=s.L,e.addData(d,n,r);break;case"V":r=h[S++],d=s.L,e.addData(d,n,r);break;case"C":d=s.C,e.addData(d,h[S++],h[S++],h[S++],h[S++],h[S++],h[S++]),n=h[S-2],r=h[S-1];break;case"c":d=s.C,e.addData(d,h[S++]+n,h[S++]+r,h[S++]+n,h[S++]+r,h[S++]+n,h[S++]+r),n+=h[S-2],r+=h[S-1];break;case"S":v=n,_=r,D=e.len(),F=e.data,a===s.C&&(v+=n-F[D-4],_+=r-F[D-3]),d=s.C,E=h[S++],I=h[S++],n=h[S++],r=h[S++],e.addData(d,v,_,E,I,n,r);break;case"s":v=n,_=r,D=e.len(),F=e.data,a===s.C&&(v+=n-F[D-4],_+=r-F[D-3]),d=s.C,E=n+h[S++],I=r+h[S++],n+=h[S++],r+=h[S++],e.addData(d,v,_,E,I,n,r);break;case"Q":E=h[S++],I=h[S++],n=h[S++],r=h[S++],d=s.Q,e.addData(d,E,I,n,r);break;case"q":E=h[S++]+n,I=h[S++]+r,n+=h[S++],r+=h[S++],d=s.Q,e.addData(d,E,I,n,r);break;case"T":v=n,_=r,D=e.len(),F=e.data,a===s.Q&&(v+=n-F[D-4],_+=r-F[D-3]),n=h[S++],r=h[S++],d=s.Q,e.addData(d,v,_,n,r);break;case"t":v=n,_=r,D=e.len(),F=e.data,a===s.Q&&(v+=n-F[D-4],_+=r-F[D-3]),n+=h[S++],r+=h[S++],d=s.Q,e.addData(d,v,_,n,r);break;case"A":x=h[S++],C=h[S++],k=h[S++],m=h[S++],T=h[S++],E=n,I=r,n=h[S++],r=h[S++],d=s.A,cj(E,I,n,r,m,T,x,C,k,d,e);break;case"a":x=h[S++],C=h[S++],k=h[S++],m=h[S++],T=h[S++],E=n,I=r,n+=h[S++],r+=h[S++],d=s.A,cj(E,I,n,r,m,T,x,C,k,d,e);break}}(f==="z"||f==="Z")&&(d=s.Z,e.addData(d),n=i,r=o),a=d}return e.toStatic(),e}var Bte=function(t){Cr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.applyTransform=function(n){},e}(Fr);function jte(t){return t.setData!=null}function Hte(t,e){var n=T7e(t),r=ot({},e);return r.buildPath=function(i){if(jte(i)){i.setData(n.data);var o=i.getContext();o&&i.rebuildPath(o,1)}else{var o=i;n.rebuildPath(o,1)}},r.applyTransform=function(i){k7e(n,i),this.dirtyShape()},r}function A7e(t,e){return new Bte(Hte(t,e))}function P7e(t,e){var n=Hte(t,e),r=function(i){Cr(o,i);function o(a){var s=i.call(this,a)||this;return s.applyTransform=n.applyTransform,s.buildPath=n.buildPath,s}return o}(Bte);return r}function E7e(t,e){for(var n=[],r=t.length,i=0;i<r;i++){var o=t[i];n.push(o.getUpdatedPathProxy(!0))}var a=new Fr(e);return a.createPathProxy(),a.buildPath=function(s){if(jte(s)){s.appendPath(n);var l=s.getContext();l&&s.rebuildPath(l,1)}},a}var O7e=function(){function t(){this.cx=0,this.cy=0,this.r=0}return t}(),Ute=function(t){Cr(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultShape=function(){return new O7e},e.prototype.buildPath=function(n,r){n.moveTo(r.cx+r.r,r.cy),n.arc(r.cx,r.cy,r.r,0,Math.PI*2)},e}(Fr);Ute.prototype.type="circle";const v$=Ute;var I7e=function(){function t(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return t}(),Wte=function(t){Cr(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultShape=function(){return new I7e},e.prototype.buildPath=function(n,r){var i=.5522848,o=r.cx,a=r.cy,s=r.rx,l=r.ry,c=s*i,u=l*i;n.moveTo(o-s,a),n.bezierCurveTo(o-s,a-u,o-c,a-l,o,a-l),n.bezierCurveTo(o+c,a-l,o+s,a-u,o+s,a),n.bezierCurveTo(o+s,a+u,o+c,a+l,o,a+l),n.bezierCurveTo(o-c,a+l,o-s,a+u,o-s,a),n.closePath()},e}(Fr);Wte.prototype.type="ellipse";const Gte=Wte;var qte=Math.PI,BP=qte*2,cp=Math.sin,Om=Math.cos,$7e=Math.acos,Ro=Math.atan2,uj=Math.abs,i1=Math.sqrt,Ob=Math.max,jc=Math.min,Jl=1e-4;function F7e(t,e,n,r,i,o,a,s){var l=n-t,c=r-e,u=a-i,f=s-o,d=f*l-u*c;if(!(d*d<Jl))return d=(u*(e-o)-f*(t-i))/d,[t+d*l,e+d*c]}function Hw(t,e,n,r,i,o,a){var s=t-n,l=e-r,c=(a?o:-o)/i1(s*s+l*l),u=c*l,f=-c*s,d=t+u,h=e+f,g=n+u,y=r+f,S=(d+g)/2,v=(h+y)/2,_=g-d,x=y-h,C=_*_+x*x,k=i-o,m=d*y-g*h,T=(x<0?-1:1)*i1(Ob(0,k*k*C-m*m)),E=(m*x-_*T)/C,I=(-m*_-x*T)/C,D=(m*x+_*T)/C,F=(-m*_+x*T)/C,R=E-S,z=I-v,B=D-S,ie=F-v;return R*R+z*z>B*B+ie*ie&&(E=D,I=F),{cx:E,cy:I,x0:-u,y0:-f,x1:E*(i/k-1),y1:I*(i/k-1)}}function L7e(t){var e;if(mt(t)){var n=t.length;if(!n)return t;n===1?e=[t[0],t[0],0,0]:n===2?e=[t[0],t[0],t[1],t[1]]:n===3?e=t.concat(t[2]):e=t}else e=[t,t,t,t];return e}function D7e(t,e){var n,r=Ob(e.r,0),i=Ob(e.r0||0,0),o=r>0,a=i>0;if(!(!o&&!a)){if(o||(r=i,i=0),i>r){var s=r;r=i,i=s}var l=e.startAngle,c=e.endAngle;if(!(isNaN(l)||isNaN(c))){var u=e.cx,f=e.cy,d=!!e.clockwise,h=uj(c-l),g=h>BP&&h%BP;if(g>Jl&&(h=g),!(r>Jl))t.moveTo(u,f);else if(h>BP-Jl)t.moveTo(u+r*Om(l),f+r*cp(l)),t.arc(u,f,r,l,c,!d),i>Jl&&(t.moveTo(u+i*Om(c),f+i*cp(c)),t.arc(u,f,i,c,l,d));else{var y=void 0,S=void 0,v=void 0,_=void 0,x=void 0,C=void 0,k=void 0,m=void 0,T=void 0,E=void 0,I=void 0,D=void 0,F=void 0,R=void 0,z=void 0,B=void 0,ie=r*Om(l),oe=r*cp(l),_e=i*Om(c),Ae=i*cp(c),Pe=h>Jl;if(Pe){var Se=e.cornerRadius;Se&&(n=L7e(Se),y=n[0],S=n[1],v=n[2],_=n[3]);var se=uj(r-i)/2;if(x=jc(se,v),C=jc(se,_),k=jc(se,y),m=jc(se,S),I=T=Ob(x,C),D=E=Ob(k,m),(T>Jl||E>Jl)&&(F=r*Om(c),R=r*cp(c),z=i*Om(l),B=i*cp(l),h<qte)){var ne=F7e(ie,oe,z,B,F,R,_e,Ae);if(ne){var J=ie-ne[0],V=oe-ne[1],W=F-ne[0],ae=R-ne[1],te=1/cp($7e((J*W+V*ae)/(i1(J*J+V*V)*i1(W*W+ae*ae)))/2),ue=i1(ne[0]*ne[0]+ne[1]*ne[1]);I=jc(T,(r-ue)/(te+1)),D=jc(E,(i-ue)/(te-1))}}}if(!Pe)t.moveTo(u+ie,f+oe);else if(I>Jl){var ce=jc(v,I),fe=jc(_,I),ye=Hw(z,B,ie,oe,r,ce,d),j=Hw(F,R,_e,Ae,r,fe,d);t.moveTo(u+ye.cx+ye.x0,f+ye.cy+ye.y0),I<T&&ce===fe?t.arc(u+ye.cx,f+ye.cy,I,Ro(ye.y0,ye.x0),Ro(j.y0,j.x0),!d):(ce>0&&t.arc(u+ye.cx,f+ye.cy,ce,Ro(ye.y0,ye.x0),Ro(ye.y1,ye.x1),!d),t.arc(u,f,r,Ro(ye.cy+ye.y1,ye.cx+ye.x1),Ro(j.cy+j.y1,j.cx+j.x1),!d),fe>0&&t.arc(u+j.cx,f+j.cy,fe,Ro(j.y1,j.x1),Ro(j.y0,j.x0),!d))}else t.moveTo(u+ie,f+oe),t.arc(u,f,r,l,c,!d);if(!(i>Jl)||!Pe)t.lineTo(u+_e,f+Ae);else if(D>Jl){var ce=jc(y,D),fe=jc(S,D),ye=Hw(_e,Ae,F,R,i,-fe,d),j=Hw(ie,oe,z,B,i,-ce,d);t.lineTo(u+ye.cx+ye.x0,f+ye.cy+ye.y0),D<E&&ce===fe?t.arc(u+ye.cx,f+ye.cy,D,Ro(ye.y0,ye.x0),Ro(j.y0,j.x0),!d):(fe>0&&t.arc(u+ye.cx,f+ye.cy,fe,Ro(ye.y0,ye.x0),Ro(ye.y1,ye.x1),!d),t.arc(u,f,i,Ro(ye.cy+ye.y1,ye.cx+ye.x1),Ro(j.cy+j.y1,j.cx+j.x1),d),ce>0&&t.arc(u+j.cx,f+j.cy,ce,Ro(j.y1,j.x1),Ro(j.y0,j.x0),!d))}else t.lineTo(u+_e,f+Ae),t.arc(u,f,i,c,l,d)}t.closePath()}}}var N7e=function(){function t(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return t}(),Yte=function(t){Cr(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultShape=function(){return new N7e},e.prototype.buildPath=function(n,r){D7e(n,r)},e.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},e}(Fr);Yte.prototype.type="sector";const pS=Yte;var M7e=function(){function t(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return t}(),Kte=function(t){Cr(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultShape=function(){return new M7e},e.prototype.buildPath=function(n,r){var i=r.cx,o=r.cy,a=Math.PI*2;n.moveTo(i+r.r,o),n.arc(i,o,r.r,0,a,!1),n.moveTo(i+r.r0,o),n.arc(i,o,r.r0,0,a,!0)},e}(Fr);Kte.prototype.type="ring";const Xte=Kte;function R7e(t,e,n,r){var i=[],o=[],a=[],s=[],l,c,u,f;if(r){u=[1/0,1/0],f=[-1/0,-1/0];for(var d=0,h=t.length;d<h;d++)uv(u,u,t[d]),fv(f,f,t[d]);uv(u,u,r[0]),fv(f,f,r[1])}for(var d=0,h=t.length;d<h;d++){var g=t[d];if(n)l=t[d?d-1:h-1],c=t[(d+1)%h];else if(d===0||d===h-1){i.push(rAe(t[d]));continue}else l=t[d-1],c=t[d+1];iAe(o,c,l),nP(o,o,e);var y=e9(g,l),S=e9(g,c),v=y+S;v!==0&&(y/=v,S/=v),nP(a,o,-y),nP(s,o,S);var _=iB([],g,a),x=iB([],g,s);r&&(fv(_,_,u),uv(_,_,f),fv(x,x,u),uv(x,x,f)),i.push(_),i.push(x)}return n&&i.push(i.shift()),i}function Jte(t,e,n){var r=e.smooth,i=e.points;if(i&&i.length>=2){if(r){var o=R7e(i,r,n,e.smoothConstraint);t.moveTo(i[0][0],i[0][1]);for(var a=i.length,s=0;s<(n?a:a-1);s++){var l=o[s*2],c=o[s*2+1],u=i[(s+1)%a];t.bezierCurveTo(l[0],l[1],c[0],c[1],u[0],u[1])}}else{t.moveTo(i[0][0],i[0][1]);for(var s=1,f=i.length;s<f;s++)t.lineTo(i[s][0],i[s][1])}n&&t.closePath()}}var z7e=function(){function t(){this.points=null,this.smooth=0,this.smoothConstraint=null}return t}(),Zte=function(t){Cr(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultShape=function(){return new z7e},e.prototype.buildPath=function(n,r){Jte(n,r,!0)},e}(Fr);Zte.prototype.type="polygon";const Qte=Zte;var V7e=function(){function t(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return t}(),ene=function(t){Cr(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new V7e},e.prototype.buildPath=function(n,r){Jte(n,r,!1)},e}(Fr);ene.prototype.type="polyline";const GT=ene;var B7e={},j7e=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return t}(),tne=function(t){Cr(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new j7e},e.prototype.buildPath=function(n,r){var i,o,a,s;if(this.subPixelOptimize){var l=xte(B7e,r,this.style);i=l.x1,o=l.y1,a=l.x2,s=l.y2}else i=r.x1,o=r.y1,a=r.x2,s=r.y2;var c=r.percent;c!==0&&(n.moveTo(i,o),c<1&&(a=i*(1-c)+a*c,s=o*(1-c)+s*c),n.lineTo(a,s))},e.prototype.pointAt=function(n){var r=this.shape;return[r.x1*(1-n)+r.x2*n,r.y1*(1-n)+r.y2*n]},e}(Fr);tne.prototype.type="line";const gS=tne;var ja=[],H7e=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return t}();function fj(t,e,n){var r=t.cpx2,i=t.cpy2;return r!=null||i!=null?[(n?gB:wo)(t.x1,t.cpx1,t.cpx2,t.x2,e),(n?gB:wo)(t.y1,t.cpy1,t.cpy2,t.y2,e)]:[(n?mB:Ho)(t.x1,t.cpx1,t.x2,e),(n?mB:Ho)(t.y1,t.cpy1,t.y2,e)]}var nne=function(t){Cr(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new H7e},e.prototype.buildPath=function(n,r){var i=r.x1,o=r.y1,a=r.x2,s=r.y2,l=r.cpx1,c=r.cpy1,u=r.cpx2,f=r.cpy2,d=r.percent;d!==0&&(n.moveTo(i,o),u==null||f==null?(d<1&&(I4(i,l,a,d,ja),l=ja[1],a=ja[2],I4(o,c,s,d,ja),c=ja[1],s=ja[2]),n.quadraticCurveTo(l,c,a,s)):(d<1&&(O4(i,l,u,a,d,ja),l=ja[1],u=ja[2],a=ja[3],O4(o,c,f,s,d,ja),c=ja[1],f=ja[2],s=ja[3]),n.bezierCurveTo(l,c,u,f,a,s)))},e.prototype.pointAt=function(n){return fj(this.shape,n,!1)},e.prototype.tangentAt=function(n){var r=fj(this.shape,n,!0);return sAe(r,r)},e}(Fr);nne.prototype.type="bezier-curve";const rne=nne;var U7e=function(){function t(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return t}(),ine=function(t){Cr(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new U7e},e.prototype.buildPath=function(n,r){var i=r.cx,o=r.cy,a=Math.max(r.r,0),s=r.startAngle,l=r.endAngle,c=r.clockwise,u=Math.cos(s),f=Math.sin(s);n.moveTo(u*a+i,f*a+o),n.arc(i,o,a,s,l,!c)},e}(Fr);ine.prototype.type="arc";const y$=ine;var W7e=function(t){Cr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="compound",n}return e.prototype._updatePathDirty=function(){for(var n=this.shape.paths,r=this.shapeChanged(),i=0;i<n.length;i++)r=r||n[i].shapeChanged();r&&this.dirtyShape()},e.prototype.beforeBrush=function(){this._updatePathDirty();for(var n=this.shape.paths||[],r=this.getGlobalScale(),i=0;i<n.length;i++)n[i].path||n[i].createPathProxy(),n[i].path.setScale(r[0],r[1],n[i].segmentIgnoreThreshold)},e.prototype.buildPath=function(n,r){for(var i=r.paths||[],o=0;o<i.length;o++)i[o].buildPath(n,i[o].shape,!0)},e.prototype.afterBrush=function(){for(var n=this.shape.paths||[],r=0;r<n.length;r++)n[r].pathUpdated()},e.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Fr.prototype.getBoundingRect.call(this)},e}(Fr);const one=W7e;var G7e=function(){function t(e){this.colorStops=e||[]}return t.prototype.addColorStop=function(e,n){this.colorStops.push({offset:e,color:n})},t}();const ane=G7e;var q7e=function(t){Cr(e,t);function e(n,r,i,o,a,s){var l=t.call(this,a)||this;return l.x=n??0,l.y=r??0,l.x2=i??1,l.y2=o??0,l.type="linear",l.global=s||!1,l}return e}(ane);const sne=q7e;var Y7e=function(t){Cr(e,t);function e(n,r,i,o,a){var s=t.call(this,o)||this;return s.x=n??.5,s.y=r??.5,s.r=i??.5,s.type="radial",s.global=a||!1,s}return e}(ane);const K7e=Y7e;var up=[0,0],fp=[0,0],Uw=new ln,Ww=new ln,X7e=function(){function t(e,n){this._corners=[],this._axes=[],this._origin=[0,0];for(var r=0;r<4;r++)this._corners[r]=new ln;for(var r=0;r<2;r++)this._axes[r]=new ln;e&&this.fromBoundingRect(e,n)}return t.prototype.fromBoundingRect=function(e,n){var r=this._corners,i=this._axes,o=e.x,a=e.y,s=o+e.width,l=a+e.height;if(r[0].set(o,a),r[1].set(s,a),r[2].set(s,l),r[3].set(o,l),n)for(var c=0;c<4;c++)r[c].transform(n);ln.sub(i[0],r[1],r[0]),ln.sub(i[1],r[3],r[0]),i[0].normalize(),i[1].normalize();for(var c=0;c<2;c++)this._origin[c]=i[c].dot(r[0])},t.prototype.intersect=function(e,n){var r=!0,i=!n;return Uw.set(1/0,1/0),Ww.set(0,0),!this._intersectCheckOneSide(this,e,Uw,Ww,i,1)&&(r=!1,i)||!this._intersectCheckOneSide(e,this,Uw,Ww,i,-1)&&(r=!1,i)||i||ln.copy(n,r?Uw:Ww),r},t.prototype._intersectCheckOneSide=function(e,n,r,i,o,a){for(var s=!0,l=0;l<2;l++){var c=this._axes[l];if(this._getProjMinMaxOnAxis(l,e._corners,up),this._getProjMinMaxOnAxis(l,n._corners,fp),up[1]<fp[0]||up[0]>fp[1]){if(s=!1,o)return s;var u=Math.abs(fp[0]-up[1]),f=Math.abs(up[0]-fp[1]);Math.min(u,f)>i.len()&&(u<f?ln.scale(i,c,-u*a):ln.scale(i,c,f*a))}else if(r){var u=Math.abs(fp[0]-up[1]),f=Math.abs(up[0]-fp[1]);Math.min(u,f)<r.len()&&(u<f?ln.scale(r,c,u*a):ln.scale(r,c,-f*a))}}return s},t.prototype._getProjMinMaxOnAxis=function(e,n,r){for(var i=this._axes[e],o=this._origin,a=n[0].dot(i)+o[e],s=a,l=a,c=1;c<n.length;c++){var u=n[c].dot(i)+o[e];s=Math.min(u,s),l=Math.max(u,l)}r[0]=s,r[1]=l},t}();const H4=X7e;var J7e=[],Z7e=function(t){Cr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.notClear=!0,n.incremental=!0,n._displayables=[],n._temporaryDisplayables=[],n._cursor=0,n}return e.prototype.traverse=function(n,r){n.call(r,this)},e.prototype.useStyle=function(){this.style={}},e.prototype.getCursor=function(){return this._cursor},e.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},e.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},e.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},e.prototype.addDisplayable=function(n,r){r?this._temporaryDisplayables.push(n):this._displayables.push(n),this.markRedraw()},e.prototype.addDisplayables=function(n,r){r=r||!1;for(var i=0;i<n.length;i++)this.addDisplayable(n[i],r)},e.prototype.getDisplayables=function(){return this._displayables},e.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},e.prototype.eachPendingDisplayable=function(n){for(var r=this._cursor;r<this._displayables.length;r++)n&&n(this._displayables[r]);for(var r=0;r<this._temporaryDisplayables.length;r++)n&&n(this._temporaryDisplayables[r])},e.prototype.update=function(){this.updateTransform();for(var n=this._cursor;n<this._displayables.length;n++){var r=this._displayables[n];r.parent=this,r.update(),r.parent=null}for(var n=0;n<this._temporaryDisplayables.length;n++){var r=this._temporaryDisplayables[n];r.parent=this,r.update(),r.parent=null}},e.prototype.getBoundingRect=function(){if(!this._rect){for(var n=new Ir(1/0,1/0,-1/0,-1/0),r=0;r<this._displayables.length;r++){var i=this._displayables[r],o=i.getBoundingRect().clone();i.needLocalTransform()&&o.applyTransform(i.getLocalTransform(J7e)),n.union(o)}this._rect=n}return this._rect},e.prototype.contain=function(n,r){var i=this.transformCoordToLocal(n,r),o=this.getBoundingRect();if(o.contain(i[0],i[1]))for(var a=0;a<this._displayables.length;a++){var s=this._displayables[a];if(s.contain(n,r))return!0}return!1},e}(hS);const Q7e=Z7e;var eEe=no();function tEe(t,e,n,r,i){var o;if(e&&e.ecModel){var a=e.ecModel.getUpdatePayload();o=a&&a.animation}var s=e&&e.isAnimationEnabled(),l=t==="update";if(s){var c=void 0,u=void 0,f=void 0;r?(c=mn(r.duration,200),u=mn(r.easing,"cubicOut"),f=0):(c=e.getShallow(l?"animationDurationUpdate":"animationDuration"),u=e.getShallow(l?"animationEasingUpdate":"animationEasing"),f=e.getShallow(l?"animationDelayUpdate":"animationDelay")),o&&(o.duration!=null&&(c=o.duration),o.easing!=null&&(u=o.easing),o.delay!=null&&(f=o.delay)),Qn(f)&&(f=f(n,i)),Qn(c)&&(c=c(n));var d={duration:c||0,delay:f,easing:u};return d}else return null}function b$(t,e,n,r,i,o,a){var s=!1,l;Qn(i)?(a=o,o=i,i=null):jt(i)&&(o=i.cb,a=i.during,s=i.isFrom,l=i.removeOpt,i=i.dataIndex);var c=t==="leave";c||e.stopAnimation("leave");var u=tEe(t,r,i,c?l||{}:null,r&&r.getAnimationDelayParams?r.getAnimationDelayParams(e,i):null);if(u&&u.duration>0){var f=u.duration,d=u.delay,h=u.easing,g={duration:f,delay:d||0,easing:h,done:o,force:!!o||!!a,setToFinal:!c,scope:t,during:a};s?e.animateFrom(n,g):e.animateTo(n,g)}else e.stopAnimation(),!s&&e.attr(n),a&&a(1),o&&o()}function Cg(t,e,n,r,i,o){b$("update",t,e,n,r,i,o)}function Mv(t,e,n,r,i,o){b$("enter",t,e,n,r,i,o)}function o1(t){if(!t.__zr)return!0;for(var e=0;e<t.animators.length;e++){var n=t.animators[e];if(n.scope==="leave")return!0}return!1}function lne(t,e,n,r,i,o){o1(t)||b$("leave",t,e,n,r,i,o)}function dj(t,e,n,r){t.removeTextContent(),t.removeTextGuideLine(),lne(t,{style:{opacity:0}},e,n,r)}function cne(t,e,n){function r(){t.parent&&t.parent.remove(t)}t.isGroup?t.traverse(function(i){i.isGroup||dj(i,e,n,r)}):dj(t,e,n,r)}function une(t){eEe(t).oldStyle=t.style}var U4=Math.max,W4=Math.min,O9={};function nEe(t){return Fr.extend(t)}var rEe=P7e;function iEe(t,e){return rEe(t,e)}function kc(t,e){O9[t]=e}function oEe(t){if(O9.hasOwnProperty(t))return O9[t]}function S$(t,e,n,r){var i=A7e(t,e);return n&&(r==="center"&&(n=dne(n,i.getBoundingRect())),hne(i,n)),i}function fne(t,e,n){var r=new gh({style:{image:t,x:e.x,y:e.y,width:e.width,height:e.height},onload:function(i){if(n==="center"){var o={width:i.width,height:i.height};r.setStyle(dne(e,o))}}});return r}function dne(t,e){var n=e.width/e.height,r=t.height*n,i;r<=t.width?i=t.height:(r=t.width,i=r/n);var o=t.x+t.width/2,a=t.y+t.height/2;return{x:o-r/2,y:a-i/2,width:r,height:i}}var aEe=E7e;function hne(t,e){if(t.applyTransform){var n=t.getBoundingRect(),r=n.calculateTransform(e);t.applyTransform(r)}}function _$(t,e){return xte(t,t,{lineWidth:e}),t}function sEe(t){return Cte(t.shape,t.shape,t.style),t}var lEe=Yp;function cEe(t,e){for(var n=e$([]);t&&t!==e;)Dv(n,t.getLocalTransform(),n),t=t.parent;return n}function w$(t,e,n){return e&&!ds(e)&&(e=o$.getLocalTransform(e)),n&&(e=Fee([],e)),fu([],t,e)}function uEe(t,e,n){var r=e[4]===0||e[5]===0||e[0]===0?1:Math.abs(2*e[4]/e[0]),i=e[4]===0||e[5]===0||e[2]===0?1:Math.abs(2*e[4]/e[2]),o=[t==="left"?-r:t==="right"?r:0,t==="top"?-i:t==="bottom"?i:0];return o=w$(o,e,n),Math.abs(o[0])>Math.abs(o[1])?o[0]>0?"right":"left":o[1]>0?"bottom":"top"}function hj(t){return!t.isGroup}function fEe(t){return t.shape!=null}function dEe(t,e,n){if(!t||!e)return;function r(a){var s={};return a.traverse(function(l){hj(l)&&l.anid&&(s[l.anid]=l)}),s}function i(a){var s={x:a.x,y:a.y,rotation:a.rotation};return fEe(a)&&(s.shape=ot({},a.shape)),s}var o=r(t);e.traverse(function(a){if(hj(a)&&a.anid){var s=o[a.anid];if(s){var l=i(a);a.attr(i(s)),Cg(a,l,n,Vr(a).dataIndex)}}})}function hEe(t,e){return tn(t,function(n){var r=n[0];r=U4(r,e.x),r=W4(r,e.x+e.width);var i=n[1];return i=U4(i,e.y),i=W4(i,e.y+e.height),[r,i]})}function pEe(t,e){var n=U4(t.x,e.x),r=W4(t.x+t.width,e.x+e.width),i=U4(t.y,e.y),o=W4(t.y+t.height,e.y+e.height);if(r>=n&&o>=i)return{x:n,y:i,width:r-n,height:o-i}}function k$(t,e,n){var r=ot({rectHover:!0},e),i=r.style={strokeNoScale:!0};if(n=n||{x:-1,y:-1,width:2,height:2},t)return t.indexOf("image://")===0?(i.image=t.slice(8),gi(i,n),new gh(r)):S$(t.replace("path://",""),r,n,"center")}function gEe(t,e,n,r,i){for(var o=0,a=i[i.length-1];o<i.length;o++){var s=i[o];if(pne(t,e,n,r,s[0],s[1],a[0],a[1]))return!0;a=s}}function pne(t,e,n,r,i,o,a,s){var l=n-t,c=r-e,u=a-i,f=s-o,d=jP(u,f,l,c);if(mEe(d))return!1;var h=t-i,g=e-o,y=jP(h,g,l,c)/d;if(y<0||y>1)return!1;var S=jP(h,g,u,f)/d;return!(S<0||S>1)}function jP(t,e,n,r){return t*r-n*e}function mEe(t){return t<=1e-6&&t>=-1e-6}function x$(t){var e=t.itemTooltipOption,n=t.componentModel,r=t.itemName,i=Ot(e)?{formatter:e}:e,o=n.mainType,a=n.componentIndex,s={componentType:o,name:r,$vars:["name"]};s[o+"Index"]=a;var l=t.formatterParamsExtra;l&&be(ir(l),function(u){l0(s,u)||(s[u]=l[u],s.$vars.push(u))});var c=Vr(t.el);c.componentMainType=o,c.componentIndex=a,c.tooltipConfig={name:r,option:gi({content:r,formatterParams:s},i)}}function pj(t,e){var n;t.isGroup&&(n=e(t)),n||t.traverse(e)}function gne(t,e){if(t)if(mt(t))for(var n=0;n<t.length;n++)pj(t[n],e);else pj(t,e)}kc("circle",v$);kc("ellipse",Gte);kc("sector",pS);kc("ring",Xte);kc("polygon",Qte);kc("polyline",GT);kc("rect",Qo);kc("line",gS);kc("bezierCurve",rne);kc("arc",y$);const vEe=Object.freeze(Object.defineProperty({__proto__:null,Arc:y$,BezierCurve:rne,BoundingRect:Ir,Circle:v$,CompoundPath:one,Ellipse:Gte,Group:yu,Image:gh,IncrementalDisplayable:Q7e,Line:gS,LinearGradient:sne,OrientedBoundingRect:H4,Path:Fr,Point:ln,Polygon:Qte,Polyline:GT,RadialGradient:K7e,Rect:Qo,Ring:Xte,Sector:pS,Text:ea,applyTransform:w$,clipPointsByRect:hEe,clipRectByRect:pEe,createIcon:k$,extendPath:iEe,extendShape:nEe,getShapeClass:oEe,getTransform:cEe,groupTransition:dEe,initProps:Mv,isElementRemoved:o1,lineLineIntersect:pne,linePolygonIntersect:gEe,makeImage:fne,makePath:S$,mergePath:aEe,registerShape:kc,removeElement:lne,removeElementWithFadeOut:cne,resizePath:hne,setTooltipConfig:x$,subPixelOptimize:lEe,subPixelOptimizeLine:_$,subPixelOptimizeRect:sEe,transformDirection:uEe,traverseElements:gne,updateProps:Cg},Symbol.toStringTag,{value:"Module"}));var qT={};function yEe(t,e){for(var n=0;n<pc.length;n++){var r=pc[n],i=e[r],o=t.ensureState(r);o.style=o.style||{},o.style.text=i}var a=t.currentStates.slice();t.clearStates(!0),t.setStyle({text:e.normal}),t.useStates(a,!0)}function gj(t,e,n){var r=t.labelFetcher,i=t.labelDataIndex,o=t.labelDimIndex,a=e.normal,s;r&&(s=r.getFormattedLabel(i,"normal",null,o,a&&a.get("formatter"),n!=null?{interpolatedValue:n}:null)),s==null&&(s=Qn(t.defaultText)?t.defaultText(i,t,n):t.defaultText);for(var l={normal:s},c=0;c<pc.length;c++){var u=pc[c],f=e[u];l[u]=mn(r?r.getFormattedLabel(i,u,null,o,f&&f.get("formatter")):null,s)}return l}function G4(t,e,n,r){n=n||qT;for(var i=t instanceof ea,o=!1,a=0;a<e2.length;a++){var s=e[e2[a]];if(s&&s.getShallow("show")){o=!0;break}}var l=i?t:t.getTextContent();if(o){i||(l||(l=new ea,t.setTextContent(l)),t.stateProxy&&(l.stateProxy=t.stateProxy));var c=gj(n,e),u=e.normal,f=!!u.getShallow("show"),d=Cf(u,r&&r.normal,n,!1,!i);d.text=c.normal,i||t.setTextConfig(mj(u,n,!1));for(var a=0;a<pc.length;a++){var h=pc[a],s=e[h];if(s){var g=l.ensureState(h),y=!!mn(s.getShallow("show"),f);if(y!==f&&(g.ignore=!y),g.style=Cf(s,r&&r[h],n,!0,!i),g.style.text=c[h],!i){var S=t.ensureState(h);S.textConfig=mj(s,n,!0)}}}l.silent=!!u.getShallow("silent"),l.style.x!=null&&(d.x=l.style.x),l.style.y!=null&&(d.y=l.style.y),l.ignore=!f,l.useStyle(d),l.dirty(),n.enableTextSetter&&(wEe(l).setLabelText=function(v){var _=gj(n,e,v);yEe(l,_)})}else l&&(l.ignore=!0);t.dirty()}function I9(t,e){e=e||"label";for(var n={normal:t.getModel(e)},r=0;r<pc.length;r++){var i=pc[r];n[i]=t.getModel([i,e])}return n}function Cf(t,e,n,r,i){var o={};return bEe(o,t,n,r,i),e&&ot(o,e),o}function mj(t,e,n){e=e||{};var r={},i,o=t.getShallow("rotate"),a=mn(t.getShallow("distance"),n?null:5),s=t.getShallow("offset");return i=t.getShallow("position")||(n?null:"inside"),i==="outside"&&(i=e.defaultOutsidePosition||"top"),i!=null&&(r.position=i),s!=null&&(r.offset=s),o!=null&&(o*=Math.PI/180,r.rotation=o),a!=null&&(r.distance=a),r.outsideFill=t.get("color")==="inherit"?e.inheritColor||null:"auto",r}function bEe(t,e,n,r,i){n=n||qT;var o=e.ecModel,a=o&&o.option.textStyle,s=SEe(e),l;if(s){l={};for(var c in s)if(s.hasOwnProperty(c)){var u=e.getModel(["rich",c]);Sj(l[c]={},u,a,n,r,i,!1,!0)}}l&&(t.rich=l);var f=e.get("overflow");f&&(t.overflow=f);var d=e.get("minMargin");d!=null&&(t.margin=d),Sj(t,e,a,n,r,i,!0,!1)}function SEe(t){for(var e;t&&t!==t.ecModel;){var n=(t.option||qT).rich;if(n){e=e||{};for(var r=ir(n),i=0;i<r.length;i++){var o=r[i];e[o]=1}}t=t.parentModel}return e}var vj=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],yj=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],bj=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function Sj(t,e,n,r,i,o,a,s){n=!i&&n||qT;var l=r&&r.inheritColor,c=e.getShallow("color"),u=e.getShallow("textBorderColor"),f=mn(e.getShallow("opacity"),n.opacity);(c==="inherit"||c==="auto")&&(l?c=l:c=null),(u==="inherit"||u==="auto")&&(l?u=l:u=null),o||(c=c||n.color,u=u||n.textBorderColor),c!=null&&(t.fill=c),u!=null&&(t.stroke=u);var d=mn(e.getShallow("textBorderWidth"),n.textBorderWidth);d!=null&&(t.lineWidth=d);var h=mn(e.getShallow("textBorderType"),n.textBorderType);h!=null&&(t.lineDash=h);var g=mn(e.getShallow("textBorderDashOffset"),n.textBorderDashOffset);g!=null&&(t.lineDashOffset=g),!i&&f==null&&!s&&(f=r&&r.defaultOpacity),f!=null&&(t.opacity=f),!i&&!o&&t.fill==null&&r.inheritColor&&(t.fill=r.inheritColor);for(var y=0;y<vj.length;y++){var S=vj[y],v=mn(e.getShallow(S),n[S]);v!=null&&(t[S]=v)}for(var y=0;y<yj.length;y++){var S=yj[y],v=e.getShallow(S);v!=null&&(t[S]=v)}if(t.verticalAlign==null){var _=e.getShallow("baseline");_!=null&&(t.verticalAlign=_)}if(!a||!r.disableBox){for(var y=0;y<bj.length;y++){var S=bj[y],v=e.getShallow(S);v!=null&&(t[S]=v)}var x=e.getShallow("borderType");x!=null&&(t.borderDash=x),(t.backgroundColor==="auto"||t.backgroundColor==="inherit")&&l&&(t.backgroundColor=l),(t.borderColor==="auto"||t.borderColor==="inherit")&&l&&(t.borderColor=l)}}function _Ee(t,e){var n=e&&e.getModel("textStyle");return au([t.fontStyle||n&&n.getShallow("fontStyle")||"",t.fontWeight||n&&n.getShallow("fontWeight")||"",(t.fontSize||n&&n.getShallow("fontSize")||12)+"px",t.fontFamily||n&&n.getShallow("fontFamily")||"sans-serif"].join(" "))}var wEe=no(),kEe=["textStyle","color"],HP=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],UP=new ea,xEe=function(){function t(){}return t.prototype.getTextColor=function(e){var n=this.ecModel;return this.getShallow("color")||(!e&&n?n.get(kEe):null)},t.prototype.getFont=function(){return _Ee({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},t.prototype.getTextRect=function(e){for(var n={text:e,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},r=0;r<HP.length;r++)n[HP[r]]=this.getShallow(HP[r]);return UP.useStyle(n),UP.update(),UP.getBoundingRect()},t}();const CEe=xEe;var mne=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],TEe=Q1(mne),AEe=function(){function t(){}return t.prototype.getLineStyle=function(e){return TEe(this,e)},t}(),vne=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],PEe=Q1(vne),EEe=function(){function t(){}return t.prototype.getItemStyle=function(e,n){return PEe(this,e,n)},t}(),Gg=function(){function t(e,n,r){this.parentModel=n,this.ecModel=r,this.option=e}return t.prototype.init=function(e,n,r){},t.prototype.mergeOption=function(e,n){hi(this.option,e,!0)},t.prototype.get=function(e,n){return e==null?this.option:this._doGet(this.parsePath(e),!n&&this.parentModel)},t.prototype.getShallow=function(e,n){var r=this.option,i=r==null?r:r[e];if(i==null&&!n){var o=this.parentModel;o&&(i=o.getShallow(e))}return i},t.prototype.getModel=function(e,n){var r=e!=null,i=r?this.parsePath(e):null,o=r?this._doGet(i):this.option;return n=n||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(i)),new t(o,n,this.ecModel)},t.prototype.isEmpty=function(){return this.option==null},t.prototype.restoreData=function(){},t.prototype.clone=function(){var e=this.constructor;return new e(Gn(this.option))},t.prototype.parsePath=function(e){return typeof e=="string"?e.split("."):e},t.prototype.resolveParentPath=function(e){return e},t.prototype.isAnimationEnabled=function(){if(!Pn.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},t.prototype._doGet=function(e,n){var r=this.option;if(!e)return r;for(var i=0;i<e.length&&!(e[i]&&(r=r&&typeof r=="object"?r[e[i]]:null,r==null));i++);return r==null&&n&&(r=n._doGet(this.resolveParentPath(e),n.parentModel)),r},t}();c$(Gg);aPe(Gg);wc(Gg,AEe);wc(Gg,EEe);wc(Gg,fPe);wc(Gg,CEe);const co=Gg;var OEe=Math.round(Math.random()*10);function YT(t){return[t||"",OEe++].join("_")}function IEe(t){var e={};t.registerSubTypeDefaulter=function(n,r){var i=su(n);e[i.main]=r},t.determineSubType=function(n,r){var i=r.type;if(!i){var o=su(n).main;t.hasSubTypes(n)&&e[o]&&(i=e[o](r))}return i}}function $Ee(t,e){t.topologicalTravel=function(o,a,s,l){if(!o.length)return;var c=n(a),u=c.graph,f=c.noEntryList,d={};for(be(o,function(_){d[_]=!0});f.length;){var h=f.pop(),g=u[h],y=!!d[h];y&&(s.call(l,h,g.originalDeps.slice()),delete d[h]),be(g.successor,y?v:S)}be(d,function(){var _="";throw new Error(_)});function S(_){u[_].entryCount--,u[_].entryCount===0&&f.push(_)}function v(_){d[_]=!0,S(_)}};function n(o){var a={},s=[];return be(o,function(l){var c=r(a,l),u=c.originalDeps=e(l),f=i(u,o);c.entryCount=f.length,c.entryCount===0&&s.push(l),be(f,function(d){wr(c.predecessor,d)<0&&c.predecessor.push(d);var h=r(a,d);wr(h.successor,d)<0&&h.successor.push(l)})}),{graph:a,noEntryList:s}}function r(o,a){return o[a]||(o[a]={predecessor:[],successor:[]}),o[a]}function i(o,a){var s=[];return be(o,function(l){wr(a,l)>=0&&s.push(l)}),s}}function FEe(t,e){return hi(hi({},t,!0),e,!0)}const LEe={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},DEe={time:{month:["","","","","","","","","","","",""],monthAbbr:["1","2","3","4","5","6","7","8","9","10","11","12"],dayOfWeek:["","","","","","",""],dayOfWeekAbbr:["","","","","","",""]},legend:{selector:{all:"",inverse:""}},toolbox:{brush:{title:{rect:"",polygon:"",lineX:"",lineY:"",keep:"",clear:""}},dataView:{title:"",lang:["","",""]},dataZoom:{title:{zoom:"",back:""}},magicType:{title:{line:"",bar:"",stack:"",tiled:""}},restore:{title:""},saveAsImage:{title:"",lang:[""]}},series:{typeNames:{pie:"",bar:"",line:"",scatter:"",effectScatter:"",radar:"",tree:"",treemap:"",boxplot:"",candlestick:"K",k:"K",heatmap:"",map:"",parallel:"",lines:"",graph:"",sankey:"",funnel:"",gauge:"",pictorialBar:"",themeRiver:"",sunburst:""}},aria:{general:{withTitle:"{title}",withoutTitle:""},series:{single:{prefix:"",withName:"{seriesType}{seriesName}",withoutName:"{seriesType}"},multiple:{prefix:"{seriesCount}",withName:"{seriesId}{seriesName}{seriesType}",withoutName:"{seriesId}{seriesType}",separator:{middle:"",end:""}}},data:{allData:"",partialData:"{displayCnt}",withName:"{name}{value}",withoutName:"{value}",separator:{middle:"",end:""}}}};var q4="ZH",C$="EN",t2=C$,bx={},T$={},yne=Pn.domSupported?function(){var t=(document.documentElement.lang||navigator.language||navigator.browserLanguage).toUpperCase();return t.indexOf(q4)>-1?q4:t2}():t2;function bne(t,e){t=t.toUpperCase(),T$[t]=new co(e),bx[t]=e}function NEe(t){if(Ot(t)){var e=bx[t.toUpperCase()]||{};return t===q4||t===C$?Gn(e):hi(Gn(e),Gn(bx[t2]),!1)}else return hi(Gn(t),Gn(bx[t2]),!1)}function MEe(t){return T$[t]}function REe(){return T$[t2]}bne(C$,LEe);bne(q4,DEe);function ed(t,e){return t+="","0000".substr(0,e-t.length)+t}function Sne(t,e,n,r){var i=jT(t),o=i[zEe(n)](),a=i[VEe(n)]()+1,s=Math.floor((a-1)/3)+1,l=i[BEe(n)](),c=i["get"+(n?"UTC":"")+"Day"](),u=i[jEe(n)](),f=(u-1)%12+1,d=i[HEe(n)](),h=i[UEe(n)](),g=i[WEe(n)](),y=r instanceof co?r:MEe(r||yne)||REe(),S=y.getModel("time"),v=S.get("month"),_=S.get("monthAbbr"),x=S.get("dayOfWeek"),C=S.get("dayOfWeekAbbr");return(e||"").replace(/{yyyy}/g,o+"").replace(/{yy}/g,ed(o%100+"",2)).replace(/{Q}/g,s+"").replace(/{MMMM}/g,v[a-1]).replace(/{MMM}/g,_[a-1]).replace(/{MM}/g,ed(a,2)).replace(/{M}/g,a+"").replace(/{dd}/g,ed(l,2)).replace(/{d}/g,l+"").replace(/{eeee}/g,x[c]).replace(/{ee}/g,C[c]).replace(/{e}/g,c+"").replace(/{HH}/g,ed(u,2)).replace(/{H}/g,u+"").replace(/{hh}/g,ed(f+"",2)).replace(/{h}/g,f+"").replace(/{mm}/g,ed(d,2)).replace(/{m}/g,d+"").replace(/{ss}/g,ed(h,2)).replace(/{s}/g,h+"").replace(/{SSS}/g,ed(g,3)).replace(/{S}/g,g+"")}function zEe(t){return t?"getUTCFullYear":"getFullYear"}function VEe(t){return t?"getUTCMonth":"getMonth"}function BEe(t){return t?"getUTCDate":"getDate"}function jEe(t){return t?"getUTCHours":"getHours"}function HEe(t){return t?"getUTCMinutes":"getMinutes"}function UEe(t){return t?"getUTCSeconds":"getSeconds"}function WEe(t){return t?"getUTCMilliseconds":"getMilliseconds"}function GEe(t){if(!z5e(t))return Ot(t)?t:"-";var e=(t+"").split(".");return e[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(e.length>1?"."+e[1]:"")}function _ne(t,e){return t=(t||"").toLowerCase().replace(/-(.)/g,function(n,r){return r.toUpperCase()}),e&&t&&(t=t.charAt(0).toUpperCase()+t.slice(1)),t}var KT=Aee;function $9(t,e,n){var r="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function i(u){return u&&au(u)?u:"-"}function o(u){return!!(u!=null&&!isNaN(u)&&isFinite(u))}var a=e==="time",s=t instanceof Date;if(a||s){var l=a?jT(t):t;if(isNaN(+l)){if(s)return"-"}else return Sne(l,r,n)}if(e==="ordinal")return J8(t)?i(t):Zr(t)&&o(t)?t+"":"-";var c=M4(t);return o(c)?GEe(c):J8(t)?i(t):typeof t=="boolean"?t+"":"-"}var _j=["a","b","c","d","e","f","g"],WP=function(t,e){return"{"+t+(e??"")+"}"};function wne(t,e,n){mt(e)||(e=[e]);var r=e.length;if(!r)return"";for(var i=e[0].$vars||[],o=0;o<i.length;o++){var a=_j[o];t=t.replace(WP(a),WP(a,0))}for(var s=0;s<r;s++)for(var l=0;l<i.length;l++){var c=e[s][i[l]];t=t.replace(WP(_j[l],s),n?Ls(c):c)}return t}function qEe(t,e){var n=Ot(t)?{color:t,extraCssText:e}:t||{},r=n.color,i=n.type;e=n.extraCssText;var o=n.renderMode||"html";if(!r)return"";if(o==="html")return i==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+Ls(r)+";"+(e||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+Ls(r)+";"+(e||"")+'"></span>';var a=n.markerId||"markerX";return{renderMode:o,content:"{"+a+"|}  ",style:i==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:r}:{width:10,height:10,borderRadius:5,backgroundColor:r}}}function n2(t,e){return e=e||"transparent",Ot(t)?t:jt(t)&&t.colorStops&&(t.colorStops[0]||{}).color||e}function F9(t,e){if(e==="_blank"||e==="blank"){var n=window.open();n.opener=null,n.location.href=t}else window.open(t,e)}var Sx=be,YEe=["left","right","top","bottom","width","height"],Gw=[["width","left","right"],["height","top","bottom"]];function A$(t,e,n,r,i){var o=0,a=0;r==null&&(r=1/0),i==null&&(i=1/0);var s=0;e.eachChild(function(l,c){var u=l.getBoundingRect(),f=e.childAt(c+1),d=f&&f.getBoundingRect(),h,g;if(t==="horizontal"){var y=u.width+(d?-d.x+u.x:0);h=o+y,h>r||l.newline?(o=0,h=y,a+=s+n,s=u.height):s=Math.max(s,u.height)}else{var S=u.height+(d?-d.y+u.y:0);g=a+S,g>i||l.newline?(o+=s+n,a=0,g=S,s=u.width):s=Math.max(s,u.width)}l.newline||(l.x=o,l.y=a,l.markRedraw(),t==="horizontal"?o=h+n:a=g+n)})}var a1=A$;zr(A$,"vertical");zr(A$,"horizontal");function f0(t,e,n){n=KT(n||0);var r=e.width,i=e.height,o=Kr(t.left,r),a=Kr(t.top,i),s=Kr(t.right,r),l=Kr(t.bottom,i),c=Kr(t.width,r),u=Kr(t.height,i),f=n[2]+n[0],d=n[1]+n[3],h=t.aspect;switch(isNaN(c)&&(c=r-s-d-o),isNaN(u)&&(u=i-l-f-a),h!=null&&(isNaN(c)&&isNaN(u)&&(h>r/i?c=r*.8:u=i*.8),isNaN(c)&&(c=h*u),isNaN(u)&&(u=c/h)),isNaN(o)&&(o=r-s-c-d),isNaN(a)&&(a=i-l-u-f),t.left||t.right){case"center":o=r/2-c/2-n[3];break;case"right":o=r-c-d;break}switch(t.top||t.bottom){case"middle":case"center":a=i/2-u/2-n[0];break;case"bottom":a=i-u-f;break}o=o||0,a=a||0,isNaN(c)&&(c=r-d-o-(s||0)),isNaN(u)&&(u=i-f-a-(l||0));var g=new Ir(o+n[3],a+n[0],c,u);return g.margin=n,g}function Y4(t){var e=t.layoutMode||t.constructor.layoutMode;return jt(e)?e:e?{type:e}:null}function r2(t,e,n){var r=n&&n.ignoreSize;!mt(r)&&(r=[r,r]);var i=a(Gw[0],0),o=a(Gw[1],1);c(Gw[0],t,i),c(Gw[1],t,o);function a(u,f){var d={},h=0,g={},y=0,S=2;if(Sx(u,function(x){g[x]=t[x]}),Sx(u,function(x){s(e,x)&&(d[x]=g[x]=e[x]),l(d,x)&&h++,l(g,x)&&y++}),r[f])return l(e,u[1])?g[u[2]]=null:l(e,u[2])&&(g[u[1]]=null),g;if(y===S||!h)return g;if(h>=S)return d;for(var v=0;v<u.length;v++){var _=u[v];if(!s(d,_)&&s(t,_)){d[_]=t[_];break}}return d}function s(u,f){return u.hasOwnProperty(f)}function l(u,f){return u[f]!=null&&u[f]!=="auto"}function c(u,f,d){Sx(u,function(h){f[h]=d[h]})}}function P$(t){return KEe({},t)}function KEe(t,e){return e&&t&&Sx(YEe,function(n){e.hasOwnProperty(n)&&(t[n]=e[n])}),t}var XEe=no(),N0=function(t){xr(e,t);function e(n,r,i){var o=t.call(this,n,r,i)||this;return o.uid=YT("ec_cpt_model"),o}return e.prototype.init=function(n,r,i){this.mergeDefaultAndTheme(n,i)},e.prototype.mergeDefaultAndTheme=function(n,r){var i=Y4(this),o=i?P$(n):{},a=r.getTheme();hi(n,a.get(this.mainType)),hi(n,this.getDefaultOption()),i&&r2(n,o,i)},e.prototype.mergeOption=function(n,r){hi(this.option,n,!0);var i=Y4(this);i&&r2(this.option,n,i)},e.prototype.optionUpdated=function(n,r){},e.prototype.getDefaultOption=function(){var n=this.constructor;if(!rPe(n))return n.defaultOption;var r=XEe(this);if(!r.defaultOption){for(var i=[],o=n;o;){var a=o.prototype.defaultOption;a&&i.push(a),o=o.superClass}for(var s={},l=i.length-1;l>=0;l--)s=hi(s,i[l],!0);r.defaultOption=s}return r.defaultOption},e.prototype.getReferringComponents=function(n,r){var i=n+"Index",o=n+"Id";return dS(this.ecModel,n,{index:this.get(i,!0),id:this.get(o,!0)},r)},e.prototype.getBoxLayoutParams=function(){var n=this;return{left:n.get("left"),top:n.get("top"),right:n.get("right"),bottom:n.get("bottom"),width:n.get("width"),height:n.get("height")}},e.prototype.getZLevelKey=function(){return""},e.prototype.setZLevel=function(n){this.option.zlevel=n},e.protoInitialize=function(){var n=e.prototype;n.type="component",n.id="",n.name="",n.mainType="",n.subType="",n.componentIndex=0}(),e}(co);vte(N0,co);u$(N0);IEe(N0);$Ee(N0,JEe);function JEe(t){var e=[];return be(N0.getClassesByMainType(t),function(n){e=e.concat(n.dependencies||n.prototype.dependencies||[])}),e=tn(e,function(n){return su(n).main}),t!=="dataset"&&wr(e,"dataset")<=0&&e.unshift("dataset"),e}const wi=N0;var kne="";typeof navigator<"u"&&(kne=navigator.platform||"");var Im="rgba(0, 0, 0, 0.2)";const ZEe={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:Im,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:Im,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:Im,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:Im,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:Im,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:Im,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:kne.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var xne=vn(["tooltip","label","itemName","itemId","itemGroupId","seriesName"]),Nl="original",hs="arrayRows",xc="objectRows",ku="keyedColumns",Md="typedArray",Cne="unknown",gf="column",M0="row",bo={Must:1,Might:2,Not:3},Tne=no();function QEe(t){Tne(t).datasetMap=vn()}function e8e(t,e,n){var r={},i=E$(e);if(!i||!t)return r;var o=[],a=[],s=e.ecModel,l=Tne(s).datasetMap,c=i.uid+"_"+n.seriesLayoutBy,u,f;t=t.slice(),be(t,function(y,S){var v=jt(y)?y:t[S]={name:y};v.type==="ordinal"&&u==null&&(u=S,f=g(v)),r[v.name]=[]});var d=l.get(c)||l.set(c,{categoryWayDim:f,valueWayDim:0});be(t,function(y,S){var v=y.name,_=g(y);if(u==null){var x=d.valueWayDim;h(r[v],x,_),h(a,x,_),d.valueWayDim+=_}else if(u===S)h(r[v],0,_),h(o,0,_);else{var x=d.categoryWayDim;h(r[v],x,_),h(a,x,_),d.categoryWayDim+=_}});function h(y,S,v){for(var _=0;_<v;_++)y.push(S+_)}function g(y){var S=y.dimsDef;return S?S.length:1}return o.length&&(r.itemName=o),a.length&&(r.seriesName=a),r}function t8e(t,e,n){var r={},i=E$(t);if(!i)return r;var o=e.sourceFormat,a=e.dimensionsDefine,s;(o===xc||o===ku)&&be(a,function(u,f){(jt(u)?u.name:u)==="name"&&(s=f)});var l=function(){for(var u={},f={},d=[],h=0,g=Math.min(5,n);h<g;h++){var y=Pne(e.data,o,e.seriesLayoutBy,a,e.startIndex,h);d.push(y);var S=y===bo.Not;if(S&&u.v==null&&h!==s&&(u.v=h),(u.n==null||u.n===u.v||!S&&d[u.n]===bo.Not)&&(u.n=h),v(u)&&d[u.n]!==bo.Not)return u;S||(y===bo.Might&&f.v==null&&h!==s&&(f.v=h),(f.n==null||f.n===f.v)&&(f.n=h))}function v(_){return _.v!=null&&_.n!=null}return v(u)?u:v(f)?f:null}();if(l){r.value=[l.v];var c=s??l.n;r.itemName=[c],r.seriesName=[c]}return r}function E$(t){var e=t.get("data",!0);if(!e)return dS(t.ecModel,"dataset",{index:t.get("datasetIndex",!0),id:t.get("datasetId",!0)},qp).models[0]}function n8e(t){return!t.get("transform",!0)&&!t.get("fromTransformResult",!0)?[]:dS(t.ecModel,"dataset",{index:t.get("fromDatasetIndex",!0),id:t.get("fromDatasetId",!0)},qp).models}function Ane(t,e){return Pne(t.data,t.sourceFormat,t.seriesLayoutBy,t.dimensionsDefine,t.startIndex,e)}function Pne(t,e,n,r,i,o){var a,s=5;if(js(t))return bo.Not;var l,c;if(r){var u=r[o];jt(u)?(l=u.name,c=u.type):Ot(u)&&(l=u)}if(c!=null)return c==="ordinal"?bo.Must:bo.Not;if(e===hs){var f=t;if(n===M0){for(var d=f[o],h=0;h<(d||[]).length&&h<s;h++)if((a=C(d[i+h]))!=null)return a}else for(var h=0;h<f.length&&h<s;h++){var g=f[i+h];if(g&&(a=C(g[o]))!=null)return a}}else if(e===xc){var y=t;if(!l)return bo.Not;for(var h=0;h<y.length&&h<s;h++){var S=y[h];if(S&&(a=C(S[l]))!=null)return a}}else if(e===ku){var v=t;if(!l)return bo.Not;var d=v[l];if(!d||js(d))return bo.Not;for(var h=0;h<d.length&&h<s;h++)if((a=C(d[h]))!=null)return a}else if(e===Nl)for(var _=t,h=0;h<_.length&&h<s;h++){var S=_[h],x=uS(S);if(!mt(x))return bo.Not;if((a=C(x[o]))!=null)return a}function C(k){var m=Ot(k);if(k!=null&&isFinite(k)&&k!=="")return m?bo.Might:bo.Not;if(m&&k!=="-")return bo.Must}return bo.Not}var r8e=vn();function i8e(t,e,n){var r=r8e.get(e);if(!r)return n;var i=r(t);return i?n.concat(i):n}var wj=no(),o8e=no(),O$=function(){function t(){}return t.prototype.getColorFromPalette=function(e,n,r){var i=Zo(this.get("color",!0)),o=this.get("colorLayer",!0);return Ene(this,wj,i,o,e,n,r)},t.prototype.clearColorPalette=function(){l8e(this,wj)},t}();function a8e(t,e,n,r){var i=Zo(t.get(["aria","decal","decals"]));return Ene(t,o8e,i,null,e,n,r)}function s8e(t,e){for(var n=t.length,r=0;r<n;r++)if(t[r].length>e)return t[r];return t[n-1]}function Ene(t,e,n,r,i,o,a){o=o||t;var s=e(o),l=s.paletteIdx||0,c=s.paletteNameMap=s.paletteNameMap||{};if(c.hasOwnProperty(i))return c[i];var u=a==null||!r?n:s8e(r,a);if(u=u||n,!(!u||!u.length)){var f=u[l];return i&&(c[i]=f),s.paletteIdx=(l+1)%u.length,f}}function l8e(t,e){e(t).paletteIdx=0,e(t).paletteNameMap={}}var qw,Gy,kj,xj="\0_ec_inner",c8e=1,One=function(t){xr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.init=function(n,r,i,o,a,s){o=o||{},this.option=null,this._theme=new co(o),this._locale=new co(a),this._optionManager=s},e.prototype.setOption=function(n,r,i){var o=Aj(r);this._optionManager.setOption(n,i,o),this._resetOption(null,o)},e.prototype.resetOption=function(n,r){return this._resetOption(n,Aj(r))},e.prototype._resetOption=function(n,r){var i=!1,o=this._optionManager;if(!n||n==="recreate"){var a=o.mountOption(n==="recreate");!this.option||n==="recreate"?kj(this,a):(this.restoreData(),this._mergeOption(a,r)),i=!0}if((n==="timeline"||n==="media")&&this.restoreData(),!n||n==="recreate"||n==="timeline"){var s=o.getTimelineOption(this);s&&(i=!0,this._mergeOption(s,r))}if(!n||n==="recreate"||n==="media"){var l=o.getMediaOption(this);l.length&&be(l,function(c){i=!0,this._mergeOption(c,r)},this)}return i},e.prototype.mergeOption=function(n){this._mergeOption(n,null)},e.prototype._mergeOption=function(n,r){var i=this.option,o=this._componentsMap,a=this._componentsCount,s=[],l=vn(),c=r&&r.replaceMergeMainTypeMap;QEe(this),be(n,function(f,d){f!=null&&(wi.hasClass(d)?d&&(s.push(d),l.set(d,!0)):i[d]=i[d]==null?Gn(f):hi(i[d],f,!0))}),c&&c.each(function(f,d){wi.hasClass(d)&&!l.get(d)&&(s.push(d),l.set(d,!0))}),wi.topologicalTravel(s,wi.getAllClassMainTypes(),u,this);function u(f){var d=i8e(this,f,Zo(n[f])),h=o.get(f),g=h?c&&c.get(f)?"replaceMerge":"normalMerge":"replaceAll",y=j5e(h,d,g);K5e(y,f,wi),i[f]=null,o.set(f,null),a.set(f,0);var S=[],v=[],_=0,x;be(y,function(C,k){var m=C.existing,T=C.newOption;if(!T)m&&(m.mergeOption({},this),m.optionUpdated({},!1));else{var E=f==="series",I=wi.getClass(f,C.keyInfo.subType,!E);if(!I)return;if(f==="tooltip"){if(x)return;x=!0}if(m&&m.constructor===I)m.name=C.keyInfo.name,m.mergeOption(T,this),m.optionUpdated(T,!1);else{var D=ot({componentIndex:k},C.keyInfo);m=new I(T,this,this,D),ot(m,D),C.brandNew&&(m.__requireNewView=!0),m.init(T,this,this),m.optionUpdated(null,!0)}}m?(S.push(m.option),v.push(m),_++):(S.push(void 0),v.push(void 0))},this),i[f]=S,o.set(f,v),a.set(f,_),f==="series"&&qw(this)}this._seriesIndices||qw(this)},e.prototype.getOption=function(){var n=Gn(this.option);return be(n,function(r,i){if(wi.hasClass(i)){for(var o=Zo(r),a=o.length,s=!1,l=a-1;l>=0;l--)o[l]&&!Z1(o[l])?s=!0:(o[l]=null,!s&&a--);o.length=a,n[i]=o}}),delete n[xj],n},e.prototype.getTheme=function(){return this._theme},e.prototype.getLocaleModel=function(){return this._locale},e.prototype.setUpdatePayload=function(n){this._payload=n},e.prototype.getUpdatePayload=function(){return this._payload},e.prototype.getComponent=function(n,r){var i=this._componentsMap.get(n);if(i){var o=i[r||0];if(o)return o;if(r==null){for(var a=0;a<i.length;a++)if(i[a])return i[a]}}},e.prototype.queryComponents=function(n){var r=n.mainType;if(!r)return[];var i=n.index,o=n.id,a=n.name,s=this._componentsMap.get(r);if(!s||!s.length)return[];var l;return i!=null?(l=[],be(Zo(i),function(c){s[c]&&l.push(s[c])})):o!=null?l=Cj("id",o,s):a!=null?l=Cj("name",a,s):l=Za(s,function(c){return!!c}),Tj(l,n)},e.prototype.findComponents=function(n){var r=n.query,i=n.mainType,o=s(r),a=o?this.queryComponents(o):Za(this._componentsMap.get(i),function(c){return!!c});return l(Tj(a,n));function s(c){var u=i+"Index",f=i+"Id",d=i+"Name";return c&&(c[u]!=null||c[f]!=null||c[d]!=null)?{mainType:i,index:c[u],id:c[f],name:c[d]}:null}function l(c){return n.filter?Za(c,n.filter):c}},e.prototype.eachComponent=function(n,r,i){var o=this._componentsMap;if(Qn(n)){var a=r,s=n;o.each(function(f,d){for(var h=0;f&&h<f.length;h++){var g=f[h];g&&s.call(a,d,g,g.componentIndex)}})}else for(var l=Ot(n)?o.get(n):jt(n)?this.findComponents(n):null,c=0;l&&c<l.length;c++){var u=l[c];u&&r.call(i,u,u.componentIndex)}},e.prototype.getSeriesByName=function(n){var r=Pl(n,null);return Za(this._componentsMap.get("series"),function(i){return!!i&&r!=null&&i.name===r})},e.prototype.getSeriesByIndex=function(n){return this._componentsMap.get("series")[n]},e.prototype.getSeriesByType=function(n){return Za(this._componentsMap.get("series"),function(r){return!!r&&r.subType===n})},e.prototype.getSeries=function(){return Za(this._componentsMap.get("series"),function(n){return!!n})},e.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},e.prototype.eachSeries=function(n,r){Gy(this),be(this._seriesIndices,function(i){var o=this._componentsMap.get("series")[i];n.call(r,o,i)},this)},e.prototype.eachRawSeries=function(n,r){be(this._componentsMap.get("series"),function(i){i&&n.call(r,i,i.componentIndex)})},e.prototype.eachSeriesByType=function(n,r,i){Gy(this),be(this._seriesIndices,function(o){var a=this._componentsMap.get("series")[o];a.subType===n&&r.call(i,a,o)},this)},e.prototype.eachRawSeriesByType=function(n,r,i){return be(this.getSeriesByType(n),r,i)},e.prototype.isSeriesFiltered=function(n){return Gy(this),this._seriesIndicesMap.get(n.componentIndex)==null},e.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},e.prototype.filterSeries=function(n,r){Gy(this);var i=[];be(this._seriesIndices,function(o){var a=this._componentsMap.get("series")[o];n.call(r,a,o)&&i.push(o)},this),this._seriesIndices=i,this._seriesIndicesMap=vn(i)},e.prototype.restoreData=function(n){qw(this);var r=this._componentsMap,i=[];r.each(function(o,a){wi.hasClass(a)&&i.push(a)}),wi.topologicalTravel(i,wi.getAllClassMainTypes(),function(o){be(r.get(o),function(a){a&&(o!=="series"||!u8e(a,n))&&a.restoreData()})})},e.internalField=function(){qw=function(n){var r=n._seriesIndices=[];be(n._componentsMap.get("series"),function(i){i&&r.push(i.componentIndex)}),n._seriesIndicesMap=vn(r)},Gy=function(n){},kj=function(n,r){n.option={},n.option[xj]=c8e,n._componentsMap=vn({series:[]}),n._componentsCount=vn();var i=r.aria;jt(i)&&i.enabled==null&&(i.enabled=!0),f8e(r,n._theme.option),hi(r,ZEe,!1),n._mergeOption(r,null)}}(),e}(co);function u8e(t,e){if(e){var n=e.seriesIndex,r=e.seriesId,i=e.seriesName;return n!=null&&t.componentIndex!==n||r!=null&&t.id!==r||i!=null&&t.name!==i}}function f8e(t,e){var n=t.color&&!t.colorLayer;be(e,function(r,i){i==="colorLayer"&&n||wi.hasClass(i)||(typeof r=="object"?t[i]=t[i]?hi(t[i],r,!1):Gn(r):t[i]==null&&(t[i]=r))})}function Cj(t,e,n){if(mt(e)){var r=vn();return be(e,function(o){if(o!=null){var a=Pl(o,null);a!=null&&r.set(o,!0)}}),Za(n,function(o){return o&&r.get(o[t])})}else{var i=Pl(e,null);return Za(n,function(o){return o&&i!=null&&o[t]===i})}}function Tj(t,e){return e.hasOwnProperty("subType")?Za(t,function(n){return n&&n.subType===e.subType}):t}function Aj(t){var e=vn();return t&&be(Zo(t.replaceMerge),function(n){e.set(n,!0)}),{replaceMergeMainTypeMap:e}}wc(One,O$);const Ine=One;var d8e=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],h8e=function(){function t(e){be(d8e,function(n){this[n]=Or(e[n],e)},this)}return t}();const $ne=h8e;var GP={},p8e=function(){function t(){this._coordinateSystems=[]}return t.prototype.create=function(e,n){var r=[];be(GP,function(i,o){var a=i.create(e,n);r=r.concat(a||[])}),this._coordinateSystems=r},t.prototype.update=function(e,n){be(this._coordinateSystems,function(r){r.update&&r.update(e,n)})},t.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},t.register=function(e,n){GP[e]=n},t.get=function(e){return GP[e]},t}();const XT=p8e;var g8e=/^(min|max)?(.+)$/,m8e=function(){function t(e){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=e}return t.prototype.setOption=function(e,n,r){e&&(be(Zo(e.series),function(a){a&&a.data&&js(a.data)&&Z8(a.data)}),be(Zo(e.dataset),function(a){a&&a.source&&js(a.source)&&Z8(a.source)})),e=Gn(e);var i=this._optionBackup,o=v8e(e,n,!i);this._newBaseOption=o.baseOption,i?(o.timelineOptions.length&&(i.timelineOptions=o.timelineOptions),o.mediaList.length&&(i.mediaList=o.mediaList),o.mediaDefault&&(i.mediaDefault=o.mediaDefault)):this._optionBackup=o},t.prototype.mountOption=function(e){var n=this._optionBackup;return this._timelineOptions=n.timelineOptions,this._mediaList=n.mediaList,this._mediaDefault=n.mediaDefault,this._currentMediaIndices=[],Gn(e?n.baseOption:this._newBaseOption)},t.prototype.getTimelineOption=function(e){var n,r=this._timelineOptions;if(r.length){var i=e.getComponent("timeline");i&&(n=Gn(r[i.getCurrentIndex()]))}return n},t.prototype.getMediaOption=function(e){var n=this._api.getWidth(),r=this._api.getHeight(),i=this._mediaList,o=this._mediaDefault,a=[],s=[];if(!i.length&&!o)return s;for(var l=0,c=i.length;l<c;l++)y8e(i[l].query,n,r)&&a.push(l);return!a.length&&o&&(a=[-1]),a.length&&!S8e(a,this._currentMediaIndices)&&(s=tn(a,function(u){return Gn(u===-1?o.option:i[u].option)})),this._currentMediaIndices=a,s},t}();function v8e(t,e,n){var r=[],i,o,a=t.baseOption,s=t.timeline,l=t.options,c=t.media,u=!!t.media,f=!!(l||s||a&&a.timeline);a?(o=a,o.timeline||(o.timeline=s)):((f||u)&&(t.options=t.media=null),o=t),u&&mt(c)&&be(c,function(h){h&&h.option&&(h.query?r.push(h):i||(i=h))}),d(o),be(l,function(h){return d(h)}),be(r,function(h){return d(h.option)});function d(h){be(e,function(g){g(h,n)})}return{baseOption:o,timelineOptions:l||[],mediaDefault:i,mediaList:r}}function y8e(t,e,n){var r={width:e,height:n,aspectratio:e/n},i=!0;return be(t,function(o,a){var s=a.match(g8e);if(!(!s||!s[1]||!s[2])){var l=s[1],c=s[2].toLowerCase();b8e(r[c],o,l)||(i=!1)}}),i}function b8e(t,e,n){return n==="min"?t>=e:n==="max"?t<=e:t===e}function S8e(t,e){return t.join(",")===e.join(",")}const _8e=m8e;var Yl=be,i2=jt,Pj=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function qP(t){var e=t&&t.itemStyle;if(e)for(var n=0,r=Pj.length;n<r;n++){var i=Pj[n],o=e.normal,a=e.emphasis;o&&o[i]&&(t[i]=t[i]||{},t[i].normal?hi(t[i].normal,o[i]):t[i].normal=o[i],o[i]=null),a&&a[i]&&(t[i]=t[i]||{},t[i].emphasis?hi(t[i].emphasis,a[i]):t[i].emphasis=a[i],a[i]=null)}}function Uo(t,e,n){if(t&&t[e]&&(t[e].normal||t[e].emphasis)){var r=t[e].normal,i=t[e].emphasis;r&&(n?(t[e].normal=t[e].emphasis=null,gi(t[e],r)):t[e]=r),i&&(t.emphasis=t.emphasis||{},t.emphasis[e]=i,i.focus&&(t.emphasis.focus=i.focus),i.blurScope&&(t.emphasis.blurScope=i.blurScope))}}function Ib(t){Uo(t,"itemStyle"),Uo(t,"lineStyle"),Uo(t,"areaStyle"),Uo(t,"label"),Uo(t,"labelLine"),Uo(t,"upperLabel"),Uo(t,"edgeLabel")}function $i(t,e){var n=i2(t)&&t[e],r=i2(n)&&n.textStyle;if(r)for(var i=0,o=FB.length;i<o;i++){var a=FB[i];r.hasOwnProperty(a)&&(n[a]=r[a])}}function ul(t){t&&(Ib(t),$i(t,"label"),t.emphasis&&$i(t.emphasis,"label"))}function w8e(t){if(i2(t)){qP(t),Ib(t),$i(t,"label"),$i(t,"upperLabel"),$i(t,"edgeLabel"),t.emphasis&&($i(t.emphasis,"label"),$i(t.emphasis,"upperLabel"),$i(t.emphasis,"edgeLabel"));var e=t.markPoint;e&&(qP(e),ul(e));var n=t.markLine;n&&(qP(n),ul(n));var r=t.markArea;r&&ul(r);var i=t.data;if(t.type==="graph"){i=i||t.nodes;var o=t.links||t.edges;if(o&&!js(o))for(var a=0;a<o.length;a++)ul(o[a]);be(t.categories,function(c){Ib(c)})}if(i&&!js(i))for(var a=0;a<i.length;a++)ul(i[a]);if(e=t.markPoint,e&&e.data)for(var s=e.data,a=0;a<s.length;a++)ul(s[a]);if(n=t.markLine,n&&n.data)for(var l=n.data,a=0;a<l.length;a++)mt(l[a])?(ul(l[a][0]),ul(l[a][1])):ul(l[a]);t.type==="gauge"?($i(t,"axisLabel"),$i(t,"title"),$i(t,"detail")):t.type==="treemap"?(Uo(t.breadcrumb,"itemStyle"),be(t.levels,function(c){Ib(c)})):t.type==="tree"&&Ib(t.leaves)}}function ju(t){return mt(t)?t:t?[t]:[]}function Ej(t){return(mt(t)?t[0]:t)||{}}function k8e(t,e){Yl(ju(t.series),function(r){i2(r)&&w8e(r)});var n=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];e&&n.push("valueAxis","categoryAxis","logAxis","timeAxis"),Yl(n,function(r){Yl(ju(t[r]),function(i){i&&($i(i,"axisLabel"),$i(i.axisPointer,"label"))})}),Yl(ju(t.parallel),function(r){var i=r&&r.parallelAxisDefault;$i(i,"axisLabel"),$i(i&&i.axisPointer,"label")}),Yl(ju(t.calendar),function(r){Uo(r,"itemStyle"),$i(r,"dayLabel"),$i(r,"monthLabel"),$i(r,"yearLabel")}),Yl(ju(t.radar),function(r){$i(r,"name"),r.name&&r.axisName==null&&(r.axisName=r.name,delete r.name),r.nameGap!=null&&r.axisNameGap==null&&(r.axisNameGap=r.nameGap,delete r.nameGap)}),Yl(ju(t.geo),function(r){i2(r)&&(ul(r),Yl(ju(r.regions),function(i){ul(i)}))}),Yl(ju(t.timeline),function(r){ul(r),Uo(r,"label"),Uo(r,"itemStyle"),Uo(r,"controlStyle",!0);var i=r.data;mt(i)&&be(i,function(o){jt(o)&&(Uo(o,"label"),Uo(o,"itemStyle"))})}),Yl(ju(t.toolbox),function(r){Uo(r,"iconStyle"),Yl(r.feature,function(i){Uo(i,"iconStyle")})}),$i(Ej(t.axisPointer),"label"),$i(Ej(t.tooltip).axisPointer,"label")}function x8e(t,e){for(var n=e.split(","),r=t,i=0;i<n.length&&(r=r&&r[n[i]],r!=null);i++);return r}function C8e(t,e,n,r){for(var i=e.split(","),o=t,a,s=0;s<i.length-1;s++)a=i[s],o[a]==null&&(o[a]={}),o=o[a];(r||o[i[s]]==null)&&(o[i[s]]=n)}function Oj(t){t&&be(T8e,function(e){e[0]in t&&!(e[1]in t)&&(t[e[1]]=t[e[0]])})}var T8e=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],A8e=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],YP=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function qy(t){var e=t&&t.itemStyle;if(e)for(var n=0;n<YP.length;n++){var r=YP[n][1],i=YP[n][0];e[r]!=null&&(e[i]=e[r])}}function Ij(t){t&&t.alignTo==="edge"&&t.margin!=null&&t.edgeDistance==null&&(t.edgeDistance=t.margin)}function $j(t){t&&t.downplay&&!t.blur&&(t.blur=t.downplay)}function P8e(t){t&&t.focusNodeAdjacency!=null&&(t.emphasis=t.emphasis||{},t.emphasis.focus==null&&(t.emphasis.focus="adjacency"))}function Fne(t,e){if(t)for(var n=0;n<t.length;n++)e(t[n]),t[n]&&Fne(t[n].children,e)}function Lne(t,e){k8e(t,e),t.series=Zo(t.series),be(t.series,function(n){if(jt(n)){var r=n.type;if(r==="line")n.clipOverflow!=null&&(n.clip=n.clipOverflow);else if(r==="pie"||r==="gauge"){n.clockWise!=null&&(n.clockwise=n.clockWise),Ij(n.label);var i=n.data;if(i&&!js(i))for(var o=0;o<i.length;o++)Ij(i[o]);n.hoverOffset!=null&&(n.emphasis=n.emphasis||{},(n.emphasis.scaleSize=null)&&(n.emphasis.scaleSize=n.hoverOffset))}else if(r==="gauge"){var a=x8e(n,"pointer.color");a!=null&&C8e(n,"itemStyle.color",a)}else if(r==="bar"){qy(n),qy(n.backgroundStyle),qy(n.emphasis);var i=n.data;if(i&&!js(i))for(var o=0;o<i.length;o++)typeof i[o]=="object"&&(qy(i[o]),qy(i[o]&&i[o].emphasis))}else if(r==="sunburst"){var s=n.highlightPolicy;s&&(n.emphasis=n.emphasis||{},n.emphasis.focus||(n.emphasis.focus=s)),$j(n),Fne(n.data,$j)}else r==="graph"||r==="sankey"?P8e(n):r==="map"&&(n.mapType&&!n.map&&(n.map=n.mapType),n.mapLocation&&gi(n,n.mapLocation));n.hoverAnimation!=null&&(n.emphasis=n.emphasis||{},n.emphasis&&n.emphasis.scale==null&&(n.emphasis.scale=n.hoverAnimation)),Oj(n)}}),t.dataRange&&(t.visualMap=t.dataRange),be(A8e,function(n){var r=t[n];r&&(mt(r)||(r=[r]),be(r,function(i){Oj(i)}))})}function E8e(t){var e=vn();t.eachSeries(function(n){var r=n.get("stack");if(r){var i=e.get(r)||e.set(r,[]),o=n.getData(),a={stackResultDimension:o.getCalculationInfo("stackResultDimension"),stackedOverDimension:o.getCalculationInfo("stackedOverDimension"),stackedDimension:o.getCalculationInfo("stackedDimension"),stackedByDimension:o.getCalculationInfo("stackedByDimension"),isStackedByIndex:o.getCalculationInfo("isStackedByIndex"),data:o,seriesModel:n};if(!a.stackedDimension||!(a.isStackedByIndex||a.stackedByDimension))return;i.length&&o.setCalculationInfo("stackedOnSeries",i[i.length-1].seriesModel),i.push(a)}}),e.each(O8e)}function O8e(t){be(t,function(e,n){var r=[],i=[NaN,NaN],o=[e.stackResultDimension,e.stackedOverDimension],a=e.data,s=e.isStackedByIndex,l=e.seriesModel.get("stackStrategy")||"samesign";a.modify(o,function(c,u,f){var d=a.get(e.stackedDimension,f);if(isNaN(d))return i;var h,g;s?g=a.getRawIndex(f):h=a.get(e.stackedByDimension,f);for(var y=NaN,S=n-1;S>=0;S--){var v=t[S];if(s||(g=v.data.rawIndexOf(v.stackedByDimension,h)),g>=0){var _=v.data.getByRawIndex(v.stackResultDimension,g);if(l==="all"||l==="positive"&&_>0||l==="negative"&&_<0||l==="samesign"&&d>=0&&_>0||l==="samesign"&&d<=0&&_<0){d=M5e(d,_),y=_;break}}}return r[0]=d,r[1]=y,r})})}var JT=function(){function t(e){this.data=e.data||(e.sourceFormat===ku?{}:[]),this.sourceFormat=e.sourceFormat||Cne,this.seriesLayoutBy=e.seriesLayoutBy||gf,this.startIndex=e.startIndex||0,this.dimensionsDetectedCount=e.dimensionsDetectedCount,this.metaRawOption=e.metaRawOption;var n=this.dimensionsDefine=e.dimensionsDefine;if(n)for(var r=0;r<n.length;r++){var i=n[r];i.type==null&&Ane(this,r)===bo.Must&&(i.type="ordinal")}}return t}();function I$(t){return t instanceof JT}function L9(t,e,n){n=n||Dne(t);var r=e.seriesLayoutBy,i=$8e(t,n,r,e.sourceHeader,e.dimensions),o=new JT({data:t,sourceFormat:n,seriesLayoutBy:r,dimensionsDefine:i.dimensionsDefine,startIndex:i.startIndex,dimensionsDetectedCount:i.dimensionsDetectedCount,metaRawOption:Gn(e)});return o}function $$(t){return new JT({data:t,sourceFormat:js(t)?Md:Nl})}function I8e(t){return new JT({data:t.data,sourceFormat:t.sourceFormat,seriesLayoutBy:t.seriesLayoutBy,dimensionsDefine:Gn(t.dimensionsDefine),startIndex:t.startIndex,dimensionsDetectedCount:t.dimensionsDetectedCount})}function Dne(t){var e=Cne;if(js(t))e=Md;else if(mt(t)){t.length===0&&(e=hs);for(var n=0,r=t.length;n<r;n++){var i=t[n];if(i!=null){if(mt(i)){e=hs;break}else if(jt(i)){e=xc;break}}}}else if(jt(t)){for(var o in t)if(l0(t,o)&&ds(t[o])){e=ku;break}}return e}function $8e(t,e,n,r,i){var o,a;if(!t)return{dimensionsDefine:Fj(i),startIndex:a,dimensionsDetectedCount:o};if(e===hs){var s=t;r==="auto"||r==null?Lj(function(c){c!=null&&c!=="-"&&(Ot(c)?a==null&&(a=1):a=0)},n,s,10):a=Zr(r)?r:r?1:0,!i&&a===1&&(i=[],Lj(function(c,u){i[u]=c!=null?c+"":""},n,s,1/0)),o=i?i.length:n===M0?s.length:s[0]?s[0].length:null}else if(e===xc)i||(i=F8e(t));else if(e===ku)i||(i=[],be(t,function(c,u){i.push(u)}));else if(e===Nl){var l=uS(t[0]);o=mt(l)&&l.length||1}return{startIndex:a,dimensionsDefine:Fj(i),dimensionsDetectedCount:o}}function F8e(t){for(var e=0,n;e<t.length&&!(n=t[e++]););if(n)return ir(n)}function Fj(t){if(t){var e=vn();return tn(t,function(n,r){n=jt(n)?n:{name:n};var i={name:n.name,displayName:n.displayName,type:n.type};if(i.name==null)return i;i.name+="",i.displayName==null&&(i.displayName=i.name);var o=e.get(i.name);return o?i.name+="-"+o.count++:e.set(i.name,{count:1}),i})}}function Lj(t,e,n,r){if(e===M0)for(var i=0;i<n.length&&i<r;i++)t(n[i]?n[i][0]:null,i);else for(var o=n[0]||[],i=0;i<o.length&&i<r;i++)t(o[i],i)}function Nne(t){var e=t.sourceFormat;return e===xc||e===ku}var dp,hp,pp,Dj,Nj,Mne=function(){function t(e,n){var r=I$(e)?e:$$(e);this._source=r;var i=this._data=r.data;r.sourceFormat===Md&&(this._offset=0,this._dimSize=n,this._data=i),Nj(this,i,r)}return t.prototype.getSource=function(){return this._source},t.prototype.count=function(){return 0},t.prototype.getItem=function(e,n){},t.prototype.appendData=function(e){},t.prototype.clean=function(){},t.protoInitialize=function(){var e=t.prototype;e.pure=!1,e.persistent=!0}(),t.internalField=function(){var e;Nj=function(a,s,l){var c=l.sourceFormat,u=l.seriesLayoutBy,f=l.startIndex,d=l.dimensionsDefine,h=Dj[F$(c,u)];if(ot(a,h),c===Md)a.getItem=n,a.count=i,a.fillStorage=r;else{var g=Rne(c,u);a.getItem=Or(g,null,s,f,d);var y=zne(c,u);a.count=Or(y,null,s,f,d)}};var n=function(a,s){a=a-this._offset,s=s||[];for(var l=this._data,c=this._dimSize,u=c*a,f=0;f<c;f++)s[f]=l[u+f];return s},r=function(a,s,l,c){for(var u=this._data,f=this._dimSize,d=0;d<f;d++){for(var h=c[d],g=h[0]==null?1/0:h[0],y=h[1]==null?-1/0:h[1],S=s-a,v=l[d],_=0;_<S;_++){var x=u[_*f+d];v[a+_]=x,x<g&&(g=x),x>y&&(y=x)}h[0]=g,h[1]=y}},i=function(){return this._data?this._data.length/this._dimSize:0};Dj=(e={},e[hs+"_"+gf]={pure:!0,appendData:o},e[hs+"_"+M0]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},e[xc]={pure:!0,appendData:o},e[ku]={pure:!0,appendData:function(a){var s=this._data;be(a,function(l,c){for(var u=s[c]||(s[c]=[]),f=0;f<(l||[]).length;f++)u.push(l[f])})}},e[Nl]={appendData:o},e[Md]={persistent:!1,pure:!0,appendData:function(a){this._data=a},clean:function(){this._offset+=this.count(),this._data=null}},e);function o(a){for(var s=0;s<a.length;s++)this._data.push(a[s])}}(),t}(),Mj=function(t,e,n,r){return t[r]},L8e=(dp={},dp[hs+"_"+gf]=function(t,e,n,r){return t[r+e]},dp[hs+"_"+M0]=function(t,e,n,r,i){r+=e;for(var o=i||[],a=t,s=0;s<a.length;s++){var l=a[s];o[s]=l?l[r]:null}return o},dp[xc]=Mj,dp[ku]=function(t,e,n,r,i){for(var o=i||[],a=0;a<n.length;a++){var s=n[a].name,l=t[s];o[a]=l?l[r]:null}return o},dp[Nl]=Mj,dp);function Rne(t,e){var n=L8e[F$(t,e)];return n}var Rj=function(t,e,n){return t.length},D8e=(hp={},hp[hs+"_"+gf]=function(t,e,n){return Math.max(0,t.length-e)},hp[hs+"_"+M0]=function(t,e,n){var r=t[0];return r?Math.max(0,r.length-e):0},hp[xc]=Rj,hp[ku]=function(t,e,n){var r=n[0].name,i=t[r];return i?i.length:0},hp[Nl]=Rj,hp);function zne(t,e){var n=D8e[F$(t,e)];return n}var KP=function(t,e,n){return t[e]},N8e=(pp={},pp[hs]=KP,pp[xc]=function(t,e,n){return t[n]},pp[ku]=KP,pp[Nl]=function(t,e,n){var r=uS(t);return r instanceof Array?r[e]:r},pp[Md]=KP,pp);function Vne(t){var e=N8e[t];return e}function F$(t,e){return t===hs?t+"_"+e:t}function K4(t,e,n){if(t){var r=t.getRawDataItem(e);if(r!=null){var i=t.getStore(),o=i.getSource().sourceFormat;if(n!=null){var a=t.getDimensionIndex(n),s=i.getDimensionProperty(a);return Vne(o)(r,a,s)}else{var l=r;return o===Nl&&(l=uS(r)),l}}}}var M8e=/\{@(.+?)\}/g,R8e=function(){function t(){}return t.prototype.getDataParams=function(e,n){var r=this.getData(n),i=this.getRawValue(e,n),o=r.getRawIndex(e),a=r.getName(e),s=r.getRawDataItem(e),l=r.getItemVisual(e,"style"),c=l&&l[r.getItemVisual(e,"drawType")||"fill"],u=l&&l.stroke,f=this.mainType,d=f==="series",h=r.userOutput&&r.userOutput.get();return{componentType:f,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:d?this.subType:null,seriesIndex:this.seriesIndex,seriesId:d?this.id:null,seriesName:d?this.name:null,name:a,dataIndex:o,data:s,dataType:n,value:i,color:c,borderColor:u,dimensionNames:h?h.fullDimensions:null,encode:h?h.encode:null,$vars:["seriesName","name","value"]}},t.prototype.getFormattedLabel=function(e,n,r,i,o,a){n=n||"normal";var s=this.getData(r),l=this.getDataParams(e,r);if(a&&(l.value=a.interpolatedValue),i!=null&&mt(l.value)&&(l.value=l.value[i]),!o){var c=s.getItemModel(e);o=c.get(n==="normal"?["label","formatter"]:[n,"label","formatter"])}if(Qn(o))return l.status=n,l.dimensionIndex=i,o(l);if(Ot(o)){var u=wne(o,l);return u.replace(M8e,function(f,d){var h=d.length,g=d;g.charAt(0)==="["&&g.charAt(h-1)==="]"&&(g=+g.slice(1,h-1));var y=K4(s,e,g);if(a&&mt(a.interpolatedValue)){var S=s.getDimensionIndex(g);S>=0&&(y=a.interpolatedValue[S])}return y!=null?y+"":""})}},t.prototype.getRawValue=function(e,n){return K4(this.getData(n),e)},t.prototype.formatTooltip=function(e,n,r){},t}();function zj(t){var e,n;return jt(t)?t.type&&(n=t):e=t,{text:e,frag:n}}function s1(t){return new z8e(t)}var z8e=function(){function t(e){e=e||{},this._reset=e.reset,this._plan=e.plan,this._count=e.count,this._onDirty=e.onDirty,this._dirty=!0}return t.prototype.perform=function(e){var n=this._upstream,r=e&&e.skip;if(this._dirty&&n){var i=this.context;i.data=i.outputData=n.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var o;this._plan&&!r&&(o=this._plan(this.context));var a=u(this._modBy),s=this._modDataCount||0,l=u(e&&e.modBy),c=e&&e.modDataCount||0;(a!==l||s!==c)&&(o="reset");function u(_){return!(_>=1)&&(_=1),_}var f;(this._dirty||o==="reset")&&(this._dirty=!1,f=this._doReset(r)),this._modBy=l,this._modDataCount=c;var d=e&&e.step;if(n?this._dueEnd=n._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var h=this._dueIndex,g=Math.min(d!=null?this._dueIndex+d:1/0,this._dueEnd);if(!r&&(f||h<g)){var y=this._progress;if(mt(y))for(var S=0;S<y.length;S++)this._doProgress(y[S],h,g,l,c);else this._doProgress(y,h,g,l,c)}this._dueIndex=g;var v=this._settedOutputEnd!=null?this._settedOutputEnd:g;this._outputDueEnd=v}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},t.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},t.prototype._doProgress=function(e,n,r,i,o){Vj.reset(n,r,i,o),this._callingProgress=e,this._callingProgress({start:n,end:r,count:r-n,next:Vj.next},this.context)},t.prototype._doReset=function(e){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var n,r;!e&&this._reset&&(n=this._reset(this.context),n&&n.progress&&(r=n.forceFirstProgress,n=n.progress),mt(n)&&!n.length&&(n=null)),this._progress=n,this._modBy=this._modDataCount=null;var i=this._downstream;return i&&i.dirty(),r},t.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},t.prototype.pipe=function(e){(this._downstream!==e||this._dirty)&&(this._downstream=e,e._upstream=this,e.dirty())},t.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},t.prototype.getUpstream=function(){return this._upstream},t.prototype.getDownstream=function(){return this._downstream},t.prototype.setOutputEnd=function(e){this._outputDueEnd=this._settedOutputEnd=e},t}(),Vj=function(){var t,e,n,r,i,o={reset:function(l,c,u,f){e=l,t=c,n=u,r=f,i=Math.ceil(r/n),o.next=n>1&&r>0?s:a}};return o;function a(){return e<t?e++:null}function s(){var l=e%i*n+Math.ceil(e/i),c=e>=t?null:l<r?l:e;return e++,c}}();function _x(t,e){var n=e&&e.type;return n==="ordinal"?t:(n==="time"&&!Zr(t)&&t!=null&&t!=="-"&&(t=+jT(t)),t==null||t===""?NaN:+t)}vn({number:function(t){return parseFloat(t)},time:function(t){return+jT(t)},trim:function(t){return Ot(t)?au(t):t}});var V8e=function(){function t(e,n){var r=e==="desc";this._resultLT=r?1:-1,n==null&&(n=r?"min":"max"),this._incomparable=n==="min"?-1/0:1/0}return t.prototype.evaluate=function(e,n){var r=Zr(e)?e:M4(e),i=Zr(n)?n:M4(n),o=isNaN(r),a=isNaN(i);if(o&&(r=this._incomparable),a&&(i=this._incomparable),o&&a){var s=Ot(e),l=Ot(n);s&&(r=l?e:0),l&&(i=s?n:0)}return r<i?this._resultLT:r>i?-this._resultLT:0},t}(),B8e=function(){function t(){}return t.prototype.getRawData=function(){throw new Error("not supported")},t.prototype.getRawDataItem=function(e){throw new Error("not supported")},t.prototype.cloneRawData=function(){},t.prototype.getDimensionInfo=function(e){},t.prototype.cloneAllDimensionInfo=function(){},t.prototype.count=function(){},t.prototype.retrieveValue=function(e,n){},t.prototype.retrieveValueFromItem=function(e,n){},t.prototype.convertValue=function(e,n){return _x(e,n)},t}();function j8e(t,e){var n=new B8e,r=t.data,i=n.sourceFormat=t.sourceFormat,o=t.startIndex,a="";t.seriesLayoutBy!==gf&&Qa(a);var s=[],l={},c=t.dimensionsDefine;if(c)be(c,function(y,S){var v=y.name,_={index:S,name:v,displayName:y.displayName};if(s.push(_),v!=null){var x="";l0(l,v)&&Qa(x),l[v]=_}});else for(var u=0;u<t.dimensionsDetectedCount;u++)s.push({index:u});var f=Rne(i,gf);e.__isBuiltIn&&(n.getRawDataItem=function(y){return f(r,o,s,y)},n.getRawData=Or(H8e,null,t)),n.cloneRawData=Or(U8e,null,t);var d=zne(i,gf);n.count=Or(d,null,r,o,s);var h=Vne(i);n.retrieveValue=function(y,S){var v=f(r,o,s,y);return g(v,S)};var g=n.retrieveValueFromItem=function(y,S){if(y!=null){var v=s[S];if(v)return h(y,S,v.name)}};return n.getDimensionInfo=Or(W8e,null,s,l),n.cloneAllDimensionInfo=Or(G8e,null,s),n}function H8e(t){var e=t.sourceFormat;if(!L$(e)){var n="";Qa(n)}return t.data}function U8e(t){var e=t.sourceFormat,n=t.data;if(!L$(e)){var r="";Qa(r)}if(e===hs){for(var i=[],o=0,a=n.length;o<a;o++)i.push(n[o].slice());return i}else if(e===xc){for(var i=[],o=0,a=n.length;o<a;o++)i.push(ot({},n[o]));return i}}function W8e(t,e,n){if(n!=null){if(Zr(n)||!isNaN(n)&&!l0(e,n))return t[n];if(l0(e,n))return e[n]}}function G8e(t){return Gn(t)}var Bne=vn();function q8e(t){t=Gn(t);var e=t.type,n="";e||Qa(n);var r=e.split(":");r.length!==2&&Qa(n);var i=!1;r[0]==="echarts"&&(e=r[1],i=!0),t.__isBuiltIn=i,Bne.set(e,t)}function Y8e(t,e,n){var r=Zo(t),i=r.length,o="";i||Qa(o);for(var a=0,s=i;a<s;a++){var l=r[a];e=K8e(l,e),a!==s-1&&(e.length=Math.max(e.length,1))}return e}function K8e(t,e,n,r){var i="";e.length||Qa(i),jt(t)||Qa(i);var o=t.type,a=Bne.get(o);a||Qa(i);var s=tn(e,function(c){return j8e(c,a)}),l=Zo(a.transform({upstream:s[0],upstreamList:s,config:Gn(t.config)}));return tn(l,function(c,u){var f="";jt(c)||Qa(f),c.data||Qa(f);var d=Dne(c.data);L$(d)||Qa(f);var h,g=e[0];if(g&&u===0&&!c.dimensions){var y=g.startIndex;y&&(c.data=g.data.slice(0,y).concat(c.data)),h={seriesLayoutBy:gf,sourceHeader:y,dimensions:g.metaRawOption.dimensions}}else h={seriesLayoutBy:gf,sourceHeader:0,dimensions:c.dimensions};return L9(c.data,h,null)})}function L$(t){return t===hs||t===xc}var ZT="undefined",X8e=typeof Uint32Array===ZT?Array:Uint32Array,J8e=typeof Uint16Array===ZT?Array:Uint16Array,jne=typeof Int32Array===ZT?Array:Int32Array,Bj=typeof Float64Array===ZT?Array:Float64Array,Hne={float:Bj,int:jne,ordinal:Array,number:Array,time:Bj},XP;function Yy(t){return t>65535?X8e:J8e}function $m(){return[1/0,-1/0]}function Z8e(t){var e=t.constructor;return e===Array?t.slice():new e(t)}function jj(t,e,n,r,i){var o=Hne[n||"float"];if(i){var a=t[e],s=a&&a.length;if(s!==r){for(var l=new o(r),c=0;c<s;c++)l[c]=a[c];t[e]=l}}else t[e]=new o(r)}var D9=function(){function t(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=vn()}return t.prototype.initData=function(e,n,r){this._provider=e,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var i=e.getSource(),o=this.defaultDimValueGetter=XP[i.sourceFormat];this._dimValueGetter=r||o,this._rawExtent=[],Nne(i),this._dimensions=tn(n,function(a){return{type:a.type,property:a.property}}),this._initDataFromProvider(0,e.count())},t.prototype.getProvider=function(){return this._provider},t.prototype.getSource=function(){return this._provider.getSource()},t.prototype.ensureCalculationDimension=function(e,n){var r=this._calcDimNameToIdx,i=this._dimensions,o=r.get(e);if(o!=null){if(i[o].type===n)return o}else o=i.length;return i[o]={type:n},r.set(e,o),this._chunks[o]=new Hne[n||"float"](this._rawCount),this._rawExtent[o]=$m(),o},t.prototype.collectOrdinalMeta=function(e,n){var r=this._chunks[e],i=this._dimensions[e],o=this._rawExtent,a=i.ordinalOffset||0,s=r.length;a===0&&(o[e]=$m());for(var l=o[e],c=a;c<s;c++){var u=r[c]=n.parseAndCollect(r[c]);isNaN(u)||(l[0]=Math.min(u,l[0]),l[1]=Math.max(u,l[1]))}i.ordinalMeta=n,i.ordinalOffset=s,i.type="ordinal"},t.prototype.getOrdinalMeta=function(e){var n=this._dimensions[e],r=n.ordinalMeta;return r},t.prototype.getDimensionProperty=function(e){var n=this._dimensions[e];return n&&n.property},t.prototype.appendData=function(e){var n=this._provider,r=this.count();n.appendData(e);var i=n.count();return n.persistent||(i+=r),r<i&&this._initDataFromProvider(r,i,!0),[r,i]},t.prototype.appendValues=function(e,n){for(var r=this._chunks,i=this._dimensions,o=i.length,a=this._rawExtent,s=this.count(),l=s+Math.max(e.length,n||0),c=0;c<o;c++){var u=i[c];jj(r,c,u.type,l,!0)}for(var f=[],d=s;d<l;d++)for(var h=d-s,g=0;g<o;g++){var u=i[g],y=XP.arrayRows.call(this,e[h]||f,u.property,h,g);r[g][d]=y;var S=a[g];y<S[0]&&(S[0]=y),y>S[1]&&(S[1]=y)}return this._rawCount=this._count=l,{start:s,end:l}},t.prototype._initDataFromProvider=function(e,n,r){for(var i=this._provider,o=this._chunks,a=this._dimensions,s=a.length,l=this._rawExtent,c=tn(a,function(_){return _.property}),u=0;u<s;u++){var f=a[u];l[u]||(l[u]=$m()),jj(o,u,f.type,n,r)}if(i.fillStorage)i.fillStorage(e,n,o,l);else for(var d=[],h=e;h<n;h++){d=i.getItem(h,d);for(var g=0;g<s;g++){var y=o[g],S=this._dimValueGetter(d,c[g],h,g);y[h]=S;var v=l[g];S<v[0]&&(v[0]=S),S>v[1]&&(v[1]=S)}}!i.persistent&&i.clean&&i.clean(),this._rawCount=this._count=n,this._extent=[]},t.prototype.count=function(){return this._count},t.prototype.get=function(e,n){if(!(n>=0&&n<this._count))return NaN;var r=this._chunks[e];return r?r[this.getRawIndex(n)]:NaN},t.prototype.getValues=function(e,n){var r=[],i=[];if(n==null){n=e,e=[];for(var o=0;o<this._dimensions.length;o++)i.push(o)}else i=e;for(var o=0,a=i.length;o<a;o++)r.push(this.get(i[o],n));return r},t.prototype.getByRawIndex=function(e,n){if(!(n>=0&&n<this._rawCount))return NaN;var r=this._chunks[e];return r?r[n]:NaN},t.prototype.getSum=function(e){var n=this._chunks[e],r=0;if(n)for(var i=0,o=this.count();i<o;i++){var a=this.get(e,i);isNaN(a)||(r+=a)}return r},t.prototype.getMedian=function(e){var n=[];this.each([e],function(o){isNaN(o)||n.push(o)});var r=n.sort(function(o,a){return o-a}),i=this.count();return i===0?0:i%2===1?r[(i-1)/2]:(r[i/2]+r[i/2-1])/2},t.prototype.indexOfRawIndex=function(e){if(e>=this._rawCount||e<0)return-1;if(!this._indices)return e;var n=this._indices,r=n[e];if(r!=null&&r<this._count&&r===e)return e;for(var i=0,o=this._count-1;i<=o;){var a=(i+o)/2|0;if(n[a]<e)i=a+1;else if(n[a]>e)o=a-1;else return a}return-1},t.prototype.indicesOfNearest=function(e,n,r){var i=this._chunks,o=i[e],a=[];if(!o)return a;r==null&&(r=1/0);for(var s=1/0,l=-1,c=0,u=0,f=this.count();u<f;u++){var d=this.getRawIndex(u),h=n-o[d],g=Math.abs(h);g<=r&&((g<s||g===s&&h>=0&&l<0)&&(s=g,l=h,c=0),h===l&&(a[c++]=u))}return a.length=c,a},t.prototype.getIndices=function(){var e,n=this._indices;if(n){var r=n.constructor,i=this._count;if(r===Array){e=new r(i);for(var o=0;o<i;o++)e[o]=n[o]}else e=new r(n.buffer,0,i)}else{var r=Yy(this._rawCount);e=new r(this.count());for(var o=0;o<e.length;o++)e[o]=o}return e},t.prototype.filter=function(e,n){if(!this._count)return this;for(var r=this.clone(),i=r.count(),o=Yy(r._rawCount),a=new o(i),s=[],l=e.length,c=0,u=e[0],f=r._chunks,d=0;d<i;d++){var h=void 0,g=r.getRawIndex(d);if(l===0)h=n(d);else if(l===1){var y=f[u][g];h=n(y,d)}else{for(var S=0;S<l;S++)s[S]=f[e[S]][g];s[S]=d,h=n.apply(null,s)}h&&(a[c++]=g)}return c<i&&(r._indices=a),r._count=c,r._extent=[],r._updateGetRawIdx(),r},t.prototype.selectRange=function(e){var n=this.clone(),r=n._count;if(!r)return this;var i=ir(e),o=i.length;if(!o)return this;var a=n.count(),s=Yy(n._rawCount),l=new s(a),c=0,u=i[0],f=e[u][0],d=e[u][1],h=n._chunks,g=!1;if(!n._indices){var y=0;if(o===1){for(var S=h[i[0]],v=0;v<r;v++){var _=S[v];(_>=f&&_<=d||isNaN(_))&&(l[c++]=y),y++}g=!0}else if(o===2){for(var S=h[i[0]],x=h[i[1]],C=e[i[1]][0],k=e[i[1]][1],v=0;v<r;v++){var _=S[v],m=x[v];(_>=f&&_<=d||isNaN(_))&&(m>=C&&m<=k||isNaN(m))&&(l[c++]=y),y++}g=!0}}if(!g)if(o===1)for(var v=0;v<a;v++){var T=n.getRawIndex(v),_=h[i[0]][T];(_>=f&&_<=d||isNaN(_))&&(l[c++]=T)}else for(var v=0;v<a;v++){for(var E=!0,T=n.getRawIndex(v),I=0;I<o;I++){var D=i[I],_=h[D][T];(_<e[D][0]||_>e[D][1])&&(E=!1)}E&&(l[c++]=n.getRawIndex(v))}return c<a&&(n._indices=l),n._count=c,n._extent=[],n._updateGetRawIdx(),n},t.prototype.map=function(e,n){var r=this.clone(e);return this._updateDims(r,e,n),r},t.prototype.modify=function(e,n){this._updateDims(this,e,n)},t.prototype._updateDims=function(e,n,r){for(var i=e._chunks,o=[],a=n.length,s=e.count(),l=[],c=e._rawExtent,u=0;u<n.length;u++)c[n[u]]=$m();for(var f=0;f<s;f++){for(var d=e.getRawIndex(f),h=0;h<a;h++)l[h]=i[n[h]][d];l[a]=f;var g=r&&r.apply(null,l);if(g!=null){typeof g!="object"&&(o[0]=g,g=o);for(var u=0;u<g.length;u++){var y=n[u],S=g[u],v=c[y],_=i[y];_&&(_[d]=S),S<v[0]&&(v[0]=S),S>v[1]&&(v[1]=S)}}}},t.prototype.lttbDownSample=function(e,n){var r=this.clone([e],!0),i=r._chunks,o=i[e],a=this.count(),s=0,l=Math.floor(1/n),c=this.getRawIndex(0),u,f,d,h=new(Yy(this._rawCount))(Math.min((Math.ceil(a/l)+2)*2,a));h[s++]=c;for(var g=1;g<a-1;g+=l){for(var y=Math.min(g+l,a-1),S=Math.min(g+l*2,a),v=(S+y)/2,_=0,x=y;x<S;x++){var C=this.getRawIndex(x),k=o[C];isNaN(k)||(_+=k)}_/=S-y;var m=g,T=Math.min(g+l,a),E=g-1,I=o[c];u=-1,d=m;for(var D=-1,F=0,x=m;x<T;x++){var C=this.getRawIndex(x),k=o[C];if(isNaN(k)){F++,D<0&&(D=C);continue}f=Math.abs((E-v)*(k-I)-(E-x)*(_-I)),f>u&&(u=f,d=C)}F>0&&F<T-m&&(h[s++]=Math.min(D,d),d=Math.max(D,d)),h[s++]=d,c=d}return h[s++]=this.getRawIndex(a-1),r._count=s,r._indices=h,r.getRawIndex=this._getRawIdx,r},t.prototype.downSample=function(e,n,r,i){for(var o=this.clone([e],!0),a=o._chunks,s=[],l=Math.floor(1/n),c=a[e],u=this.count(),f=o._rawExtent[e]=$m(),d=new(Yy(this._rawCount))(Math.ceil(u/l)),h=0,g=0;g<u;g+=l){l>u-g&&(l=u-g,s.length=l);for(var y=0;y<l;y++){var S=this.getRawIndex(g+y);s[y]=c[S]}var v=r(s),_=this.getRawIndex(Math.min(g+i(s,v)||0,u-1));c[_]=v,v<f[0]&&(f[0]=v),v>f[1]&&(f[1]=v),d[h++]=_}return o._count=h,o._indices=d,o._updateGetRawIdx(),o},t.prototype.each=function(e,n){if(this._count)for(var r=e.length,i=this._chunks,o=0,a=this.count();o<a;o++){var s=this.getRawIndex(o);switch(r){case 0:n(o);break;case 1:n(i[e[0]][s],o);break;case 2:n(i[e[0]][s],i[e[1]][s],o);break;default:for(var l=0,c=[];l<r;l++)c[l]=i[e[l]][s];c[l]=o,n.apply(null,c)}}},t.prototype.getDataExtent=function(e){var n=this._chunks[e],r=$m();if(!n)return r;var i=this.count(),o=!this._indices,a;if(o)return this._rawExtent[e].slice();if(a=this._extent[e],a)return a.slice();a=r;for(var s=a[0],l=a[1],c=0;c<i;c++){var u=this.getRawIndex(c),f=n[u];f<s&&(s=f),f>l&&(l=f)}return a=[s,l],this._extent[e]=a,a},t.prototype.getRawDataItem=function(e){var n=this.getRawIndex(e);if(this._provider.persistent)return this._provider.getItem(n);for(var r=[],i=this._chunks,o=0;o<i.length;o++)r.push(i[o][n]);return r},t.prototype.clone=function(e,n){var r=new t,i=this._chunks,o=e&&ah(e,function(s,l){return s[l]=!0,s},{});if(o)for(var a=0;a<i.length;a++)r._chunks[a]=o[a]?Z8e(i[a]):i[a];else r._chunks=i;return this._copyCommonProps(r),n||(r._indices=this._cloneIndices()),r._updateGetRawIdx(),r},t.prototype._copyCommonProps=function(e){e._count=this._count,e._rawCount=this._rawCount,e._provider=this._provider,e._dimensions=this._dimensions,e._extent=Gn(this._extent),e._rawExtent=Gn(this._rawExtent)},t.prototype._cloneIndices=function(){if(this._indices){var e=this._indices.constructor,n=void 0;if(e===Array){var r=this._indices.length;n=new e(r);for(var i=0;i<r;i++)n[i]=this._indices[i]}else n=new e(this._indices);return n}return null},t.prototype._getRawIdxIdentity=function(e){return e},t.prototype._getRawIdx=function(e){return e<this._count&&e>=0?this._indices[e]:-1},t.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},t.internalField=function(){function e(n,r,i,o){return _x(n[o],this._dimensions[o])}XP={arrayRows:e,objectRows:function(n,r,i,o){return _x(n[r],this._dimensions[o])},keyedColumns:e,original:function(n,r,i,o){var a=n&&(n.value==null?n:n.value);return _x(a instanceof Array?a[o]:a,this._dimensions[o])},typedArray:function(n,r,i,o){return n[o]}}}(),t}(),Q8e=function(){function t(e){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=e}return t.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},t.prototype._setLocalSource=function(e,n){this._sourceList=e,this._upstreamSignList=n,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},t.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},t.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},t.prototype._createSource=function(){this._setLocalSource([],[]);var e=this._sourceHost,n=this._getUpstreamSourceManagers(),r=!!n.length,i,o;if(Yw(e)){var a=e,s=void 0,l=void 0,c=void 0;if(r){var u=n[0];u.prepareSource(),c=u.getSource(),s=c.data,l=c.sourceFormat,o=[u._getVersionSign()]}else s=a.get("data",!0),l=js(s)?Md:Nl,o=[];var f=this._getSourceMetaRawOption()||{},d=c&&c.metaRawOption||{},h=mn(f.seriesLayoutBy,d.seriesLayoutBy)||null,g=mn(f.sourceHeader,d.sourceHeader),y=mn(f.dimensions,d.dimensions),S=h!==d.seriesLayoutBy||!!g!=!!d.sourceHeader||y;i=S?[L9(s,{seriesLayoutBy:h,sourceHeader:g,dimensions:y},l)]:[]}else{var v=e;if(r){var _=this._applyTransform(n);i=_.sourceList,o=_.upstreamSignList}else{var x=v.get("source",!0);i=[L9(x,this._getSourceMetaRawOption(),null)],o=[]}}this._setLocalSource(i,o)},t.prototype._applyTransform=function(e){var n=this._sourceHost,r=n.get("transform",!0),i=n.get("fromTransformResult",!0);if(i!=null){var o="";e.length!==1&&Hj(o)}var a,s=[],l=[];return be(e,function(c){c.prepareSource();var u=c.getSource(i||0),f="";i!=null&&!u&&Hj(f),s.push(u),l.push(c._getVersionSign())}),r?a=Y8e(r,s,{datasetIndex:n.componentIndex}):i!=null&&(a=[I8e(s[0])]),{sourceList:a,upstreamSignList:l}},t.prototype._isDirty=function(){if(this._dirty)return!0;for(var e=this._getUpstreamSourceManagers(),n=0;n<e.length;n++){var r=e[n];if(r._isDirty()||this._upstreamSignList[n]!==r._getVersionSign())return!0}},t.prototype.getSource=function(e){e=e||0;var n=this._sourceList[e];if(!n){var r=this._getUpstreamSourceManagers();return r[0]&&r[0].getSource(e)}return n},t.prototype.getSharedDataStore=function(e){var n=e.makeStoreSchema();return this._innerGetDataStore(n.dimensions,e.source,n.hash)},t.prototype._innerGetDataStore=function(e,n,r){var i=0,o=this._storeList,a=o[i];a||(a=o[i]={});var s=a[r];if(!s){var l=this._getUpstreamSourceManagers()[0];Yw(this._sourceHost)&&l?s=l._innerGetDataStore(e,n,r):(s=new D9,s.initData(new Mne(n,e.length),e)),a[r]=s}return s},t.prototype._getUpstreamSourceManagers=function(){var e=this._sourceHost;if(Yw(e)){var n=E$(e);return n?[n.getSourceManager()]:[]}else return tn(n8e(e),function(r){return r.getSourceManager()})},t.prototype._getSourceMetaRawOption=function(){var e=this._sourceHost,n,r,i;if(Yw(e))n=e.get("seriesLayoutBy",!0),r=e.get("sourceHeader",!0),i=e.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var o=e;n=o.get("seriesLayoutBy",!0),r=o.get("sourceHeader",!0),i=o.get("dimensions",!0)}return{seriesLayoutBy:n,sourceHeader:r,dimensions:i}},t}();function Yw(t){return t.mainType==="series"}function Hj(t){throw new Error(t)}var Une="line-height:1";function Wne(t,e){var n=t.color||"#6e7079",r=t.fontSize||12,i=t.fontWeight||"400",o=t.color||"#464646",a=t.fontSize||14,s=t.fontWeight||"900";return e==="html"?{nameStyle:"font-size:"+Ls(r+"")+"px;color:"+Ls(n)+";font-weight:"+Ls(i+""),valueStyle:"font-size:"+Ls(a+"")+"px;color:"+Ls(o)+";font-weight:"+Ls(s+"")}:{nameStyle:{fontSize:r,fill:n,fontWeight:i},valueStyle:{fontSize:a,fill:o,fontWeight:s}}}var e9e=[0,10,20,30],t9e=["",`
`,`

`,`


`];function Tg(t,e){return e.type=t,e}function N9(t){return t.type==="section"}function Gne(t){return N9(t)?n9e:r9e}function qne(t){if(N9(t)){var e=0,n=t.blocks.length,r=n>1||n>0&&!t.noHeader;return be(t.blocks,function(i){var o=qne(i);o>=e&&(e=o+ +(r&&(!o||N9(i)&&!i.noHeader)))}),e}return 0}function n9e(t,e,n,r){var i=e.noHeader,o=i9e(qne(e)),a=[],s=e.blocks||[];Hs(!s||mt(s)),s=s||[];var l=t.orderMode;if(e.sortBlocks&&l){s=s.slice();var c={valueAsc:"asc",valueDesc:"desc"};if(l0(c,l)){var u=new V8e(c[l],null);s.sort(function(g,y){return u.evaluate(g.sortParam,y.sortParam)})}else l==="seriesDesc"&&s.reverse()}be(s,function(g,y){var S=e.valueFormatter,v=Gne(g)(S?ot(ot({},t),{valueFormatter:S}):t,g,y>0?o.html:0,r);v!=null&&a.push(v)});var f=t.renderMode==="richText"?a.join(o.richText):M9(a.join(""),i?n:o.html);if(i)return f;var d=$9(e.header,"ordinal",t.useUTC),h=Wne(r,t.renderMode).nameStyle;return t.renderMode==="richText"?Yne(t,d,h)+o.richText+f:M9('<div style="'+h+";"+Une+';">'+Ls(d)+"</div>"+f,n)}function r9e(t,e,n,r){var i=t.renderMode,o=e.noName,a=e.noValue,s=!e.markerType,l=e.name,c=t.useUTC,u=e.valueFormatter||t.valueFormatter||function(C){return C=mt(C)?C:[C],tn(C,function(k,m){return $9(k,mt(h)?h[m]:h,c)})};if(!(o&&a)){var f=s?"":t.markupStyleCreator.makeTooltipMarker(e.markerType,e.markerColor||"#333",i),d=o?"":$9(l,"ordinal",c),h=e.valueType,g=a?[]:u(e.value),y=!s||!o,S=!s&&o,v=Wne(r,i),_=v.nameStyle,x=v.valueStyle;return i==="richText"?(s?"":f)+(o?"":Yne(t,d,_))+(a?"":s9e(t,g,y,S,x)):M9((s?"":f)+(o?"":o9e(d,!s,_))+(a?"":a9e(g,y,S,x)),n)}}function Uj(t,e,n,r,i,o){if(t){var a=Gne(t),s={useUTC:i,renderMode:n,orderMode:r,markupStyleCreator:e,valueFormatter:t.valueFormatter};return a(s,t,0,o)}}function i9e(t){return{html:e9e[t],richText:t9e[t]}}function M9(t,e){var n='<div style="clear:both"></div>',r="margin: "+e+"px 0 0";return'<div style="'+r+";"+Une+';">'+t+n+"</div>"}function o9e(t,e,n){var r=e?"margin-left:2px":"";return'<span style="'+n+";"+r+'">'+Ls(t)+"</span>"}function a9e(t,e,n,r){var i=n?"10px":"20px",o=e?"float:right;margin-left:"+i:"";return t=mt(t)?t:[t],'<span style="'+o+";"+r+'">'+tn(t,function(a){return Ls(a)}).join("&nbsp;&nbsp;")+"</span>"}function Yne(t,e,n){return t.markupStyleCreator.wrapRichTextStyle(e,n)}function s9e(t,e,n,r,i){var o=[i],a=r?10:20;return n&&o.push({padding:[0,0,0,a],align:"right"}),t.markupStyleCreator.wrapRichTextStyle(mt(e)?e.join("  "):e,o)}function l9e(t,e){var n=t.getData().getItemVisual(e,"style"),r=n[t.visualDrawType];return n2(r)}function Kne(t,e){var n=t.get("padding");return n??(e==="richText"?[8,10]:10)}var JP=function(){function t(){this.richTextStyles={},this._nextStyleNameId=fte()}return t.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},t.prototype.makeTooltipMarker=function(e,n,r){var i=r==="richText"?this._generateStyleName():null,o=qEe({color:n,type:e,renderMode:r,markerId:i});return Ot(o)?o:(this.richTextStyles[i]=o.style,o.content)},t.prototype.wrapRichTextStyle=function(e,n){var r={};mt(n)?be(n,function(o){return ot(r,o)}):ot(r,n);var i=this._generateStyleName();return this.richTextStyles[i]=r,"{"+i+"|"+e+"}"},t}();function c9e(t){var e=t.series,n=t.dataIndex,r=t.multipleSeries,i=e.getData(),o=i.mapDimensionsAll("defaultedTooltip"),a=o.length,s=e.getRawValue(n),l=mt(s),c=l9e(e,n),u,f,d,h;if(a>1||l&&!a){var g=u9e(s,e,n,o,c);u=g.inlineValues,f=g.inlineValueTypes,d=g.blocks,h=g.inlineValues[0]}else if(a){var y=i.getDimensionInfo(o[0]);h=u=K4(i,n,o[0]),f=y.type}else h=u=l?s[0]:s;var S=s$(e),v=S&&e.name||"",_=i.getName(n),x=r?v:_;return Tg("section",{header:v,noHeader:r||!S,sortParam:h,blocks:[Tg("nameValue",{markerType:"item",markerColor:c,name:x,noName:!au(x),value:u,valueType:f})].concat(d||[])})}function u9e(t,e,n,r,i){var o=e.getData(),a=ah(t,function(f,d,h){var g=o.getDimensionInfo(h);return f=f||g&&g.tooltip!==!1&&g.displayName!=null},!1),s=[],l=[],c=[];r.length?be(r,function(f){u(K4(o,n,f),f)}):be(t,u);function u(f,d){var h=o.getDimensionInfo(d);!h||h.otherDims.tooltip===!1||(a?c.push(Tg("nameValue",{markerType:"subItem",markerColor:i,name:h.displayName,value:f,valueType:h.type})):(s.push(f),l.push(h.type)))}return{inlineValues:s,inlineValueTypes:l,blocks:c}}var td=no();function Kw(t,e){return t.getName(e)||t.getId(e)}var f9e="__universalTransitionEnabled",QT=function(t){xr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n._selectedDataIndicesMap={},n}return e.prototype.init=function(n,r,i){this.seriesIndex=this.componentIndex,this.dataTask=s1({count:h9e,reset:p9e}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(n,i);var o=td(this).sourceManager=new Q8e(this);o.prepareSource();var a=this.getInitialData(n,i);Gj(a,this),this.dataTask.context.data=a,td(this).dataBeforeProcessed=a,Wj(this),this._initSelectedMapFromData(a)},e.prototype.mergeDefaultAndTheme=function(n,r){var i=Y4(this),o=i?P$(n):{},a=this.subType;wi.hasClass(a)&&(a+="Series"),hi(n,r.getTheme().get(this.subType)),hi(n,this.getDefaultOption()),b9(n,"label",["show"]),this.fillDataTextStyle(n.data),i&&r2(n,o,i)},e.prototype.mergeOption=function(n,r){n=hi(this.option,n,!0),this.fillDataTextStyle(n.data);var i=Y4(this);i&&r2(this.option,n,i);var o=td(this).sourceManager;o.dirty(),o.prepareSource();var a=this.getInitialData(n,r);Gj(a,this),this.dataTask.dirty(),this.dataTask.context.data=a,td(this).dataBeforeProcessed=a,Wj(this),this._initSelectedMapFromData(a)},e.prototype.fillDataTextStyle=function(n){if(n&&!js(n))for(var r=["show"],i=0;i<n.length;i++)n[i]&&n[i].label&&b9(n[i],"label",r)},e.prototype.getInitialData=function(n,r){},e.prototype.appendData=function(n){var r=this.getRawData();r.appendData(n.data)},e.prototype.getData=function(n){var r=R9(this);if(r){var i=r.context.data;return n==null?i:i.getLinkedData(n)}else return td(this).data},e.prototype.getAllData=function(){var n=this.getData();return n&&n.getLinkedDataAll?n.getLinkedDataAll():[{data:n}]},e.prototype.setData=function(n){var r=R9(this);if(r){var i=r.context;i.outputData=n,r!==this.dataTask&&(i.data=n)}td(this).data=n},e.prototype.getEncode=function(){var n=this.get("encode",!0);if(n)return vn(n)},e.prototype.getSourceManager=function(){return td(this).sourceManager},e.prototype.getSource=function(){return this.getSourceManager().getSource()},e.prototype.getRawData=function(){return td(this).dataBeforeProcessed},e.prototype.getColorBy=function(){var n=this.get("colorBy");return n||"series"},e.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},e.prototype.getBaseAxis=function(){var n=this.coordinateSystem;return n&&n.getBaseAxis&&n.getBaseAxis()},e.prototype.formatTooltip=function(n,r,i){return c9e({series:this,dataIndex:n,multipleSeries:r})},e.prototype.isAnimationEnabled=function(){var n=this.ecModel;if(Pn.node&&!(n&&n.ssr))return!1;var r=this.getShallow("animation");return r&&this.getData().count()>this.getShallow("animationThreshold")&&(r=!1),!!r},e.prototype.restoreData=function(){this.dataTask.dirty()},e.prototype.getColorFromPalette=function(n,r,i){var o=this.ecModel,a=O$.prototype.getColorFromPalette.call(this,n,r,i);return a||(a=o.getColorFromPalette(n,r,i)),a},e.prototype.coordDimToDataDim=function(n){return this.getRawData().mapDimensionsAll(n)},e.prototype.getProgressive=function(){return this.get("progressive")},e.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},e.prototype.select=function(n,r){this._innerSelect(this.getData(r),n)},e.prototype.unselect=function(n,r){var i=this.option.selectedMap;if(i){var o=this.option.selectedMode,a=this.getData(r);if(o==="series"||i==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var s=0;s<n.length;s++){var l=n[s],c=Kw(a,l);i[c]=!1,this._selectedDataIndicesMap[c]=-1}}},e.prototype.toggleSelect=function(n,r){for(var i=[],o=0;o<n.length;o++)i[0]=n[o],this.isSelected(n[o],r)?this.unselect(i,r):this.select(i,r)},e.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var n=this._selectedDataIndicesMap,r=ir(n),i=[],o=0;o<r.length;o++){var a=n[r[o]];a>=0&&i.push(a)}return i},e.prototype.isSelected=function(n,r){var i=this.option.selectedMap;if(!i)return!1;var o=this.getData(r);return(i==="all"||i[Kw(o,n)])&&!o.getItemModel(n).get(["select","disabled"])},e.prototype.isUniversalTransitionEnabled=function(){if(this[f9e])return!0;var n=this.option.universalTransition;return n?n===!0?!0:n&&n.enabled:!1},e.prototype._innerSelect=function(n,r){var i,o,a=this.option,s=a.selectedMode,l=r.length;if(!(!s||!l)){if(s==="series")a.selectedMap="all";else if(s==="multiple"){jt(a.selectedMap)||(a.selectedMap={});for(var c=a.selectedMap,u=0;u<l;u++){var f=r[u],d=Kw(n,f);c[d]=!0,this._selectedDataIndicesMap[d]=n.getRawIndex(f)}}else if(s==="single"||s===!0){var h=r[l-1],d=Kw(n,h);a.selectedMap=(i={},i[d]=!0,i),this._selectedDataIndicesMap=(o={},o[d]=n.getRawIndex(h),o)}}},e.prototype._initSelectedMapFromData=function(n){if(!this.option.selectedMap){var r=[];n.hasItemOption&&n.each(function(i){var o=n.getRawDataItem(i);o&&o.selected&&r.push(i)}),r.length>0&&this._innerSelect(n,r)}},e.registerClass=function(n){return wi.registerClass(n)},e.protoInitialize=function(){var n=e.prototype;n.type="series.__base__",n.seriesIndex=0,n.ignoreStyleOnData=!1,n.hasSymbolVisual=!1,n.defaultSymbol="circle",n.visualStyleAccessPath="itemStyle",n.visualDrawType="fill"}(),e}(wi);wc(QT,R8e);wc(QT,O$);vte(QT,wi);function Wj(t){var e=t.name;s$(t)||(t.name=d9e(t)||e)}function d9e(t){var e=t.getRawData(),n=e.mapDimensionsAll("seriesName"),r=[];return be(n,function(i){var o=e.getDimensionInfo(i);o.displayName&&r.push(o.displayName)}),r.join(" ")}function h9e(t){return t.model.getRawData().count()}function p9e(t){var e=t.model;return e.setData(e.getRawData().cloneShallow()),g9e}function g9e(t,e){e.outputData&&t.end>e.outputData.count()&&e.model.getRawData().cloneShallow(e.outputData)}function Gj(t,e){be(nAe(t.CHANGABLE_METHODS,t.DOWNSAMPLE_METHODS),function(n){t.wrapMethod(n,zr(m9e,e))})}function m9e(t,e){var n=R9(t);return n&&n.setOutputEnd((e||this).count()),e}function R9(t){var e=(t.ecModel||{}).scheduler,n=e&&e.getPipeline(t.uid);if(n){var r=n.currentTask;if(r){var i=r.agentStubMap;i&&(r=i.get(t.uid))}return r}}const Ag=QT;var D$=function(){function t(){this.group=new yu,this.uid=YT("viewComponent")}return t.prototype.init=function(e,n){},t.prototype.render=function(e,n,r,i){},t.prototype.dispose=function(e,n){},t.prototype.updateView=function(e,n,r,i){},t.prototype.updateLayout=function(e,n,r,i){},t.prototype.updateVisual=function(e,n,r,i){},t.prototype.toggleBlurSeries=function(e,n,r){},t.prototype.eachRendered=function(e){var n=this.group;n&&n.traverse(e)},t}();c$(D$);u$(D$);const lh=D$;function v9e(){var t=no();return function(e){var n=t(e),r=e.pipelineContext,i=!!n.large,o=!!n.progressiveRender,a=n.large=!!(r&&r.large),s=n.progressiveRender=!!(r&&r.progressiveRender);return(i!==a||o!==s)&&"reset"}}var Xne=no(),y9e=v9e(),N$=function(){function t(){this.group=new yu,this.uid=YT("viewChart"),this.renderTask=s1({plan:b9e,reset:S9e}),this.renderTask.context={view:this}}return t.prototype.init=function(e,n){},t.prototype.render=function(e,n,r,i){},t.prototype.highlight=function(e,n,r,i){var o=e.getData(i&&i.dataType);o&&Yj(o,i,"emphasis")},t.prototype.downplay=function(e,n,r,i){var o=e.getData(i&&i.dataType);o&&Yj(o,i,"normal")},t.prototype.remove=function(e,n){this.group.removeAll()},t.prototype.dispose=function(e,n){},t.prototype.updateView=function(e,n,r,i){this.render(e,n,r,i)},t.prototype.updateLayout=function(e,n,r,i){this.render(e,n,r,i)},t.prototype.updateVisual=function(e,n,r,i){this.render(e,n,r,i)},t.prototype.eachRendered=function(e){gne(this.group,e)},t.markUpdateMethod=function(e,n){Xne(e).updateMethod=n},t.protoInitialize=function(){var e=t.prototype;e.type="chart"}(),t}();function qj(t,e,n){t&&A9(t)&&(e==="emphasis"?V4:B4)(t,n)}function Yj(t,e,n){var r=fS(t,e),i=e&&e.highlightKey!=null?b7e(e.highlightKey):null;r!=null?be(Zo(r),function(o){qj(t.getItemGraphicEl(o),n,i)}):t.eachItemGraphicEl(function(o){qj(o,n,i)})}c$(N$);u$(N$);function b9e(t){return y9e(t.model)}function S9e(t){var e=t.model,n=t.ecModel,r=t.api,i=t.payload,o=e.pipelineContext.progressiveRender,a=t.view,s=i&&Xne(i).updateMethod,l=o?"incrementalPrepareRender":s&&a[s]?s:"render";return l!=="render"&&a[l](e,n,r,i),_9e[l]}var _9e={incrementalPrepareRender:{progress:function(t,e){e.view.incrementalRender(t,e.model,e.ecModel,e.api,e.payload)}},render:{forceFirstProgress:!0,progress:function(t,e){e.view.render(e.model,e.ecModel,e.api,e.payload)}}};const Rd=N$;var X4="\0__throttleOriginMethod",Kj="\0__throttleRate",Xj="\0__throttleType";function M$(t,e,n){var r,i=0,o=0,a=null,s,l,c,u;e=e||0;function f(){o=new Date().getTime(),a=null,t.apply(l,c||[])}var d=function(){for(var h=[],g=0;g<arguments.length;g++)h[g]=arguments[g];r=new Date().getTime(),l=this,c=h;var y=u||e,S=u||n;u=null,s=r-(S?i:o)-y,clearTimeout(a),S?a=setTimeout(f,y):s>=0?f():a=setTimeout(f,-s),i=r};return d.clear=function(){a&&(clearTimeout(a),a=null)},d.debounceNextCall=function(h){u=h},d}function Jne(t,e,n,r){var i=t[e];if(i){var o=i[X4]||i,a=i[Xj],s=i[Kj];if(s!==n||a!==r){if(n==null||!r)return t[e]=o;i=t[e]=M$(o,n,r==="debounce"),i[X4]=o,i[Xj]=r,i[Kj]=n}return i}}function z9(t,e){var n=t[e];n&&n[X4]&&(n.clear&&n.clear(),t[e]=n[X4])}var Jj=no(),Zj={itemStyle:Q1(vne,!0),lineStyle:Q1(mne,!0)},w9e={lineStyle:"stroke",itemStyle:"fill"};function Zne(t,e){var n=t.visualStyleMapper||Zj[e];return n||(console.warn("Unknown style type '"+e+"'."),Zj.itemStyle)}function Qne(t,e){var n=t.visualDrawType||w9e[e];return n||(console.warn("Unknown style type '"+e+"'."),"fill")}var k9e={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){var n=t.getData(),r=t.visualStyleAccessPath||"itemStyle",i=t.getModel(r),o=Zne(t,r),a=o(i),s=i.getShallow("decal");s&&(n.setVisual("decal",s),s.dirty=!0);var l=Qne(t,r),c=a[l],u=Qn(c)?c:null,f=a.fill==="auto"||a.stroke==="auto";if(!a[l]||u||f){var d=t.getColorFromPalette(t.name,null,e.getSeriesCount());a[l]||(a[l]=d,n.setVisual("colorFromPalette",!0)),a.fill=a.fill==="auto"||Qn(a.fill)?d:a.fill,a.stroke=a.stroke==="auto"||Qn(a.stroke)?d:a.stroke}if(n.setVisual("style",a),n.setVisual("drawType",l),!e.isSeriesFiltered(t)&&u)return n.setVisual("colorFromPalette",!1),{dataEach:function(h,g){var y=t.getDataParams(g),S=ot({},a);S[l]=u(y),h.setItemVisual(g,"style",S)}}}},Ky=new co,x9e={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){if(!(t.ignoreStyleOnData||e.isSeriesFiltered(t))){var n=t.getData(),r=t.visualStyleAccessPath||"itemStyle",i=Zne(t,r),o=n.getVisual("drawType");return{dataEach:n.hasItemOption?function(a,s){var l=a.getRawDataItem(s);if(l&&l[r]){Ky.option=l[r];var c=i(Ky),u=a.ensureUniqueItemVisual(s,"style");ot(u,c),Ky.option.decal&&(a.setItemVisual(s,"decal",Ky.option.decal),Ky.option.decal.dirty=!0),o in c&&a.setItemVisual(s,"colorFromPalette",!1)}}:null}}}},C9e={performRawSeries:!0,overallReset:function(t){var e=vn();t.eachSeries(function(n){var r=n.getColorBy();if(!n.isColorBySeries()){var i=n.type+"-"+r,o=e.get(i);o||(o={},e.set(i,o)),Jj(n).scope=o}}),t.eachSeries(function(n){if(!(n.isColorBySeries()||t.isSeriesFiltered(n))){var r=n.getRawData(),i={},o=n.getData(),a=Jj(n).scope,s=n.visualStyleAccessPath||"itemStyle",l=Qne(n,s);o.each(function(c){var u=o.getRawIndex(c);i[u]=c}),r.each(function(c){var u=i[c],f=o.getItemVisual(u,"colorFromPalette");if(f){var d=o.ensureUniqueItemVisual(u,"style"),h=r.getName(c)||c+"",g=r.count();d[l]=n.getColorFromPalette(h,a,g)}})}})}},Xw=Math.PI;function T9e(t,e){e=e||{},gi(e,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var n=new yu,r=new Qo({style:{fill:e.maskColor},zlevel:e.zlevel,z:1e4});n.add(r);var i=new ea({style:{text:e.text,fill:e.textColor,fontSize:e.fontSize,fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontFamily:e.fontFamily},zlevel:e.zlevel,z:10001}),o=new Qo({style:{fill:"none"},textContent:i,textConfig:{position:"right",distance:10},zlevel:e.zlevel,z:10001});n.add(o);var a;return e.showSpinner&&(a=new y$({shape:{startAngle:-Xw/2,endAngle:-Xw/2+.1,r:e.spinnerRadius},style:{stroke:e.color,lineCap:"round",lineWidth:e.lineWidth},zlevel:e.zlevel,z:10001}),a.animateShape(!0).when(1e3,{endAngle:Xw*3/2}).start("circularInOut"),a.animateShape(!0).when(1e3,{startAngle:Xw*3/2}).delay(300).start("circularInOut"),n.add(a)),n.resize=function(){var s=i.getBoundingRect().width,l=e.showSpinner?e.spinnerRadius:0,c=(t.getWidth()-l*2-(e.showSpinner&&s?10:0)-s)/2-(e.showSpinner&&s?0:5+s/2)+(e.showSpinner?0:s/2)+(s?0:l),u=t.getHeight()/2;e.showSpinner&&a.setShape({cx:c,cy:u}),o.setShape({x:c-l,y:u-l,width:l*2,height:l*2}),r.setShape({x:0,y:0,width:t.getWidth(),height:t.getHeight()})},n.resize(),n}var A9e=function(){function t(e,n,r,i){this._stageTaskMap=vn(),this.ecInstance=e,this.api=n,r=this._dataProcessorHandlers=r.slice(),i=this._visualHandlers=i.slice(),this._allHandlers=r.concat(i)}return t.prototype.restoreData=function(e,n){e.restoreData(n),this._stageTaskMap.each(function(r){var i=r.overallTask;i&&i.dirty()})},t.prototype.getPerformArgs=function(e,n){if(e.__pipeline){var r=this._pipelineMap.get(e.__pipeline.id),i=r.context,o=!n&&r.progressiveEnabled&&(!i||i.progressiveRender)&&e.__idxInPipeline>r.blockIndex,a=o?r.step:null,s=i&&i.modDataCount,l=s!=null?Math.ceil(s/a):null;return{step:a,modBy:l,modDataCount:s}}},t.prototype.getPipeline=function(e){return this._pipelineMap.get(e)},t.prototype.updateStreamModes=function(e,n){var r=this._pipelineMap.get(e.uid),i=e.getData(),o=i.count(),a=r.progressiveEnabled&&n.incrementalPrepareRender&&o>=r.threshold,s=e.get("large")&&o>=e.get("largeThreshold"),l=e.get("progressiveChunkMode")==="mod"?o:null;e.pipelineContext=r.context={progressiveRender:a,modDataCount:l,large:s}},t.prototype.restorePipelines=function(e){var n=this,r=n._pipelineMap=vn();e.eachSeries(function(i){var o=i.getProgressive(),a=i.uid;r.set(a,{id:a,head:null,tail:null,threshold:i.getProgressiveThreshold(),progressiveEnabled:o&&!(i.preventIncremental&&i.preventIncremental()),blockIndex:-1,step:Math.round(o||700),count:0}),n._pipe(i,i.dataTask)})},t.prototype.prepareStageTasks=function(){var e=this._stageTaskMap,n=this.api.getModel(),r=this.api;be(this._allHandlers,function(i){var o=e.get(i.uid)||e.set(i.uid,{}),a="";Hs(!(i.reset&&i.overallReset),a),i.reset&&this._createSeriesStageTask(i,o,n,r),i.overallReset&&this._createOverallStageTask(i,o,n,r)},this)},t.prototype.prepareView=function(e,n,r,i){var o=e.renderTask,a=o.context;a.model=n,a.ecModel=r,a.api=i,o.__block=!e.incrementalPrepareRender,this._pipe(n,o)},t.prototype.performDataProcessorTasks=function(e,n){this._performStageTasks(this._dataProcessorHandlers,e,n,{block:!0})},t.prototype.performVisualTasks=function(e,n,r){this._performStageTasks(this._visualHandlers,e,n,r)},t.prototype._performStageTasks=function(e,n,r,i){i=i||{};var o=!1,a=this;be(e,function(l,c){if(!(i.visualType&&i.visualType!==l.visualType)){var u=a._stageTaskMap.get(l.uid),f=u.seriesTaskMap,d=u.overallTask;if(d){var h,g=d.agentStubMap;g.each(function(S){s(i,S)&&(S.dirty(),h=!0)}),h&&d.dirty(),a.updatePayload(d,r);var y=a.getPerformArgs(d,i.block);g.each(function(S){S.perform(y)}),d.perform(y)&&(o=!0)}else f&&f.each(function(S,v){s(i,S)&&S.dirty();var _=a.getPerformArgs(S,i.block);_.skip=!l.performRawSeries&&n.isSeriesFiltered(S.context.model),a.updatePayload(S,r),S.perform(_)&&(o=!0)})}});function s(l,c){return l.setDirty&&(!l.dirtyMap||l.dirtyMap.get(c.__pipeline.id))}this.unfinished=o||this.unfinished},t.prototype.performSeriesTasks=function(e){var n;e.eachSeries(function(r){n=r.dataTask.perform()||n}),this.unfinished=n||this.unfinished},t.prototype.plan=function(){this._pipelineMap.each(function(e){var n=e.tail;do{if(n.__block){e.blockIndex=n.__idxInPipeline;break}n=n.getUpstream()}while(n)})},t.prototype.updatePayload=function(e,n){n!=="remain"&&(e.context.payload=n)},t.prototype._createSeriesStageTask=function(e,n,r,i){var o=this,a=n.seriesTaskMap,s=n.seriesTaskMap=vn(),l=e.seriesType,c=e.getTargetSeries;e.createOnAllSeries?r.eachRawSeries(u):l?r.eachRawSeriesByType(l,u):c&&c(r,i).each(u);function u(f){var d=f.uid,h=s.set(d,a&&a.get(d)||s1({plan:$9e,reset:F9e,count:D9e}));h.context={model:f,ecModel:r,api:i,useClearVisual:e.isVisual&&!e.isLayout,plan:e.plan,reset:e.reset,scheduler:o},o._pipe(f,h)}},t.prototype._createOverallStageTask=function(e,n,r,i){var o=this,a=n.overallTask=n.overallTask||s1({reset:P9e});a.context={ecModel:r,api:i,overallReset:e.overallReset,scheduler:o};var s=a.agentStubMap,l=a.agentStubMap=vn(),c=e.seriesType,u=e.getTargetSeries,f=!0,d=!1,h="";Hs(!e.createOnAllSeries,h),c?r.eachRawSeriesByType(c,g):u?u(r,i).each(g):(f=!1,be(r.getSeries(),g));function g(y){var S=y.uid,v=l.set(S,s&&s.get(S)||(d=!0,s1({reset:E9e,onDirty:I9e})));v.context={model:y,overallProgress:f},v.agent=a,v.__block=f,o._pipe(y,v)}d&&a.dirty()},t.prototype._pipe=function(e,n){var r=e.uid,i=this._pipelineMap.get(r);!i.head&&(i.head=n),i.tail&&i.tail.pipe(n),i.tail=n,n.__idxInPipeline=i.count++,n.__pipeline=i},t.wrapStageHandler=function(e,n){return Qn(e)&&(e={overallReset:e,seriesType:N9e(e)}),e.uid=YT("stageHandler"),n&&(e.visualType=n),e},t}();function P9e(t){t.overallReset(t.ecModel,t.api,t.payload)}function E9e(t){return t.overallProgress&&O9e}function O9e(){this.agent.dirty(),this.getDownstream().dirty()}function I9e(){this.agent&&this.agent.dirty()}function $9e(t){return t.plan?t.plan(t.model,t.ecModel,t.api,t.payload):null}function F9e(t){t.useClearVisual&&t.data.clearAllVisual();var e=t.resetDefines=Zo(t.reset(t.model,t.ecModel,t.api,t.payload));return e.length>1?tn(e,function(n,r){return ere(r)}):L9e}var L9e=ere(0);function ere(t){return function(e,n){var r=n.data,i=n.resetDefines[t];if(i&&i.dataEach)for(var o=e.start;o<e.end;o++)i.dataEach(r,o);else i&&i.progress&&i.progress(e,r)}}function D9e(t){return t.data.count()}function N9e(t){J4=null;try{t(o2,tre)}catch{}return J4}var o2={},tre={},J4;nre(o2,Ine);nre(tre,$ne);o2.eachSeriesByType=o2.eachRawSeriesByType=function(t){J4=t};o2.eachComponent=function(t){t.mainType==="series"&&t.subType&&(J4=t.subType)};function nre(t,e){for(var n in e.prototype)t[n]=Jo}const rre=A9e;var Qj=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const M9e={color:Qj,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],Qj]};var pa="#B9B8CE",eH="#100C2A",Jw=function(){return{axisLine:{lineStyle:{color:pa}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},tH=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],ire={darkMode:!0,color:tH,backgroundColor:eH,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:pa}},textStyle:{color:pa},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:pa}},dataZoom:{borderColor:"#71708A",textStyle:{color:pa},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:pa}},timeline:{lineStyle:{color:pa},label:{color:pa},controlStyle:{color:pa,borderColor:pa}},calendar:{itemStyle:{color:eH},dayLabel:{color:pa},monthLabel:{color:pa},yearLabel:{color:pa}},timeAxis:Jw(),logAxis:Jw(),valueAxis:Jw(),categoryAxis:Jw(),line:{symbol:"circle"},graph:{color:tH},gauge:{title:{color:pa},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:pa},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};ire.categoryAxis.splitLine.show=!1;const R9e=ire;var z9e=function(){function t(){}return t.prototype.normalizeQuery=function(e){var n={},r={},i={};if(Ot(e)){var o=su(e);n.mainType=o.main||null,n.subType=o.sub||null}else{var a=["Index","Name","Id"],s={name:1,dataIndex:1,dataType:1};be(e,function(l,c){for(var u=!1,f=0;f<a.length;f++){var d=a[f],h=c.lastIndexOf(d);if(h>0&&h===c.length-d.length){var g=c.slice(0,h);g!=="data"&&(n.mainType=g,n[d.toLowerCase()]=l,u=!0)}}s.hasOwnProperty(c)&&(r[c]=l,u=!0),u||(i[c]=l)})}return{cptQuery:n,dataQuery:r,otherQuery:i}},t.prototype.filter=function(e,n){var r=this.eventInfo;if(!r)return!0;var i=r.targetEl,o=r.packedEvent,a=r.model,s=r.view;if(!a||!s)return!0;var l=n.cptQuery,c=n.dataQuery;return u(l,a,"mainType")&&u(l,a,"subType")&&u(l,a,"index","componentIndex")&&u(l,a,"name")&&u(l,a,"id")&&u(c,o,"name")&&u(c,o,"dataIndex")&&u(c,o,"dataType")&&(!s.filterForExposedEvent||s.filterForExposedEvent(e,n.otherQuery,i,o));function u(f,d,h,g){return f[h]==null||d[g||h]===f[h]}},t.prototype.afterTrigger=function(){this.eventInfo=null},t}(),V9=["symbol","symbolSize","symbolRotate","symbolOffset"],nH=V9.concat(["symbolKeepAspect"]),V9e={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){var n=t.getData();if(t.legendIcon&&n.setVisual("legendIcon",t.legendIcon),!t.hasSymbolVisual)return;for(var r={},i={},o=!1,a=0;a<V9.length;a++){var s=V9[a],l=t.get(s);Qn(l)?(o=!0,i[s]=l):r[s]=l}if(r.symbol=r.symbol||t.defaultSymbol,n.setVisual(ot({legendIcon:t.legendIcon||r.symbol,symbolKeepAspect:t.get("symbolKeepAspect")},r)),e.isSeriesFiltered(t))return;var c=ir(i);function u(f,d){for(var h=t.getRawValue(d),g=t.getDataParams(d),y=0;y<c.length;y++){var S=c[y];f.setItemVisual(d,S,i[S](h,g))}}return{dataEach:o?u:null}}},B9e={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){if(!t.hasSymbolVisual||e.isSeriesFiltered(t))return;var n=t.getData();function r(i,o){for(var a=i.getItemModel(o),s=0;s<nH.length;s++){var l=nH[s],c=a.getShallow(l,!0);c!=null&&i.setItemVisual(o,l,c)}}return{dataEach:n.hasItemOption?r:null}}};function j9e(t,e,n){switch(n){case"color":var r=t.getItemVisual(e,"style");return r[t.getVisual("drawType")];case"opacity":return t.getItemVisual(e,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return t.getItemVisual(e,n)}}function H9e(t,e){switch(e){case"color":var n=t.getVisual("style");return n[t.getVisual("drawType")];case"opacity":return t.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return t.getVisual(e)}}function U9e(t,e){function n(r,i){var o=[];return r.eachComponent({mainType:"series",subType:t,query:i},function(a){o.push(a.seriesIndex)}),o}be([[t+"ToggleSelect","toggleSelect"],[t+"Select","select"],[t+"UnSelect","unselect"]],function(r){e(r[0],function(i,o,a){i=ot({},i),a.dispatchAction(ot(i,{type:r[1],seriesIndex:n(o,i)}))})})}function Fm(t,e,n,r,i){var o=t+e;n.isSilent(o)||r.eachComponent({mainType:"series",subType:"pie"},function(a){for(var s=a.seriesIndex,l=a.option.selectedMap,c=i.selected,u=0;u<c.length;u++)if(c[u].seriesIndex===s){var f=a.getData(),d=fS(f,i.fromActionPayload);n.trigger(o,{type:o,seriesId:a.id,name:mt(d)?f.getName(d[0]):f.getName(d),selected:Ot(l)?l:ot({},l)})}})}function W9e(t,e,n){t.on("selectchanged",function(r){var i=n.getModel();r.isFromClick?(Fm("map","selectchanged",e,i,r),Fm("pie","selectchanged",e,i,r)):r.fromAction==="select"?(Fm("map","selected",e,i,r),Fm("pie","selected",e,i,r)):r.fromAction==="unselect"&&(Fm("map","unselected",e,i,r),Fm("pie","unselected",e,i,r))})}function $b(t,e,n){for(var r;t&&!(e(t)&&(r=t,n));)t=t.__hostTarget||t.parent;return r}var G9e=Math.round(Math.random()*9),q9e=typeof Object.defineProperty=="function",Y9e=function(){function t(){this._id="__ec_inner_"+G9e++}return t.prototype.get=function(e){return this._guard(e)[this._id]},t.prototype.set=function(e,n){var r=this._guard(e);return q9e?Object.defineProperty(r,this._id,{value:n,enumerable:!1,configurable:!0}):r[this._id]=n,this},t.prototype.delete=function(e){return this.has(e)?(delete this._guard(e)[this._id],!0):!1},t.prototype.has=function(e){return!!this._guard(e)[this._id]},t.prototype._guard=function(e){if(e!==Object(e))throw TypeError("Value of WeakMap is not a non-null object.");return e},t}();const K9e=Y9e;var X9e=Fr.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,r=e.cy,i=e.width/2,o=e.height/2;t.moveTo(n,r-o),t.lineTo(n+i,r+o),t.lineTo(n-i,r+o),t.closePath()}}),J9e=Fr.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,r=e.cy,i=e.width/2,o=e.height/2;t.moveTo(n,r-o),t.lineTo(n+i,r),t.lineTo(n,r+o),t.lineTo(n-i,r),t.closePath()}}),Z9e=Fr.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.x,r=e.y,i=e.width/5*3,o=Math.max(i,e.height),a=i/2,s=a*a/(o-a),l=r-o+a+s,c=Math.asin(s/a),u=Math.cos(c)*a,f=Math.sin(c),d=Math.cos(c),h=a*.6,g=a*.7;t.moveTo(n-u,l+s),t.arc(n,l,a,Math.PI-c,Math.PI*2+c),t.bezierCurveTo(n+u-f*h,l+s+d*h,n,r-g,n,r),t.bezierCurveTo(n,r-g,n-u+f*h,l+s+d*h,n-u,l+s),t.closePath()}}),Q9e=Fr.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.height,r=e.width,i=e.x,o=e.y,a=r/3*2;t.moveTo(i,o),t.lineTo(i+a,o+n),t.lineTo(i,o+n/4*3),t.lineTo(i-a,o+n),t.lineTo(i,o),t.closePath()}}),eOe={line:gS,rect:Qo,roundRect:Qo,square:Qo,circle:v$,diamond:J9e,pin:Z9e,arrow:Q9e,triangle:X9e},tOe={line:function(t,e,n,r,i){i.x1=t,i.y1=e+r/2,i.x2=t+n,i.y2=e+r/2},rect:function(t,e,n,r,i){i.x=t,i.y=e,i.width=n,i.height=r},roundRect:function(t,e,n,r,i){i.x=t,i.y=e,i.width=n,i.height=r,i.r=Math.min(n,r)/4},square:function(t,e,n,r,i){var o=Math.min(n,r);i.x=t,i.y=e,i.width=o,i.height=o},circle:function(t,e,n,r,i){i.cx=t+n/2,i.cy=e+r/2,i.r=Math.min(n,r)/2},diamond:function(t,e,n,r,i){i.cx=t+n/2,i.cy=e+r/2,i.width=n,i.height=r},pin:function(t,e,n,r,i){i.x=t+n/2,i.y=e+r/2,i.width=n,i.height=r},arrow:function(t,e,n,r,i){i.x=t+n/2,i.y=e+r/2,i.width=n,i.height=r},triangle:function(t,e,n,r,i){i.cx=t+n/2,i.cy=e+r/2,i.width=n,i.height=r}},B9={};be(eOe,function(t,e){B9[e]=new t});var nOe=Fr.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(t,e,n){var r=ite(t,e,n),i=this.shape;return i&&i.symbolType==="pin"&&e.position==="inside"&&(r.y=n.y+n.height*.4),r},buildPath:function(t,e,n){var r=e.symbolType;if(r!=="none"){var i=B9[r];i||(r="rect",i=B9[r]),tOe[r](e.x,e.y,e.width,e.height,i.shape),i.buildPath(t,i.shape,n)}}});function rOe(t,e){if(this.type!=="image"){var n=this.style;this.__isEmptyBrush?(n.stroke=t,n.fill=e||"#fff",n.lineWidth=2):this.shape.symbolType==="line"?n.stroke=t:n.fill=t,this.markRedraw()}}function R$(t,e,n,r,i,o,a){var s=t.indexOf("empty")===0;s&&(t=t.substr(5,1).toLowerCase()+t.substr(6));var l;return t.indexOf("image://")===0?l=fne(t.slice(8),new Ir(e,n,r,i),a?"center":"cover"):t.indexOf("path://")===0?l=S$(t.slice(7),{},new Ir(e,n,r,i),a?"center":"cover"):l=new nOe({shape:{symbolType:t,x:e,y:n,width:r,height:i}}),l.__isEmptyBrush=s,l.setColor=rOe,o&&l.setColor(o),l}function iOe(t,e){if(t!=null)return mt(t)||(t=[t,t]),[Kr(t[0],e[0])||0,Kr(mn(t[1],t[0]),e[1])||0]}function Kp(t){return isFinite(t)}function oOe(t,e,n){var r=e.x==null?0:e.x,i=e.x2==null?1:e.x2,o=e.y==null?0:e.y,a=e.y2==null?0:e.y2;e.global||(r=r*n.width+n.x,i=i*n.width+n.x,o=o*n.height+n.y,a=a*n.height+n.y),r=Kp(r)?r:0,i=Kp(i)?i:1,o=Kp(o)?o:0,a=Kp(a)?a:0;var s=t.createLinearGradient(r,o,i,a);return s}function aOe(t,e,n){var r=n.width,i=n.height,o=Math.min(r,i),a=e.x==null?.5:e.x,s=e.y==null?.5:e.y,l=e.r==null?.5:e.r;e.global||(a=a*r+n.x,s=s*i+n.y,l=l*o),a=Kp(a)?a:.5,s=Kp(s)?s:.5,l=l>=0&&Kp(l)?l:.5;var c=t.createRadialGradient(a,s,0,a,s,l);return c}function j9(t,e,n){for(var r=e.type==="radial"?aOe(t,e,n):oOe(t,e,n),i=e.colorStops,o=0;o<i.length;o++)r.addColorStop(i[o].offset,i[o].color);return r}function sOe(t,e){if(t===e||!t&&!e)return!1;if(!t||!e||t.length!==e.length)return!0;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!0;return!1}function Zw(t){return parseInt(t,10)}function gv(t,e,n){var r=["width","height"][e],i=["clientWidth","clientHeight"][e],o=["paddingLeft","paddingTop"][e],a=["paddingRight","paddingBottom"][e];if(n[r]!=null&&n[r]!=="auto")return parseFloat(n[r]);var s=document.defaultView.getComputedStyle(t);return(t[i]||Zw(s[r])||Zw(t.style[r]))-(Zw(s[o])||0)-(Zw(s[a])||0)|0}function lOe(t,e){return!t||t==="solid"||!(e>0)?null:t==="dashed"?[4*e,2*e]:t==="dotted"?[e]:Zr(t)?[t]:mt(t)?t:null}function z$(t){var e=t.style,n=e.lineDash&&e.lineWidth>0&&lOe(e.lineDash,e.lineWidth),r=e.lineDashOffset;if(n){var i=e.strokeNoScale&&t.getLineScale?t.getLineScale():1;i&&i!==1&&(n=tn(n,function(o){return o/i}),r/=i)}return[n,r]}var cOe=new sh(!0);function Z4(t){var e=t.stroke;return!(e==null||e==="none"||!(t.lineWidth>0))}function rH(t){return typeof t=="string"&&t!=="none"}function Q4(t){var e=t.fill;return e!=null&&e!=="none"}function iH(t,e){if(e.fillOpacity!=null&&e.fillOpacity!==1){var n=t.globalAlpha;t.globalAlpha=e.fillOpacity*e.opacity,t.fill(),t.globalAlpha=n}else t.fill()}function oH(t,e){if(e.strokeOpacity!=null&&e.strokeOpacity!==1){var n=t.globalAlpha;t.globalAlpha=e.strokeOpacity*e.opacity,t.stroke(),t.globalAlpha=n}else t.stroke()}function H9(t,e,n){var r=f$(e.image,e.__image,n);if(HT(r)){var i=t.createPattern(r,e.repeat||"repeat");if(typeof DOMMatrix=="function"&&i&&i.setTransform){var o=new DOMMatrix;o.translateSelf(e.x||0,e.y||0),o.rotateSelf(0,0,(e.rotation||0)*cx),o.scaleSelf(e.scaleX||1,e.scaleY||1),i.setTransform(o)}return i}}function uOe(t,e,n,r){var i,o=Z4(n),a=Q4(n),s=n.strokePercent,l=s<1,c=!e.path;(!e.silent||l)&&c&&e.createPathProxy();var u=e.path||cOe,f=e.__dirty;if(!r){var d=n.fill,h=n.stroke,g=a&&!!d.colorStops,y=o&&!!h.colorStops,S=a&&!!d.image,v=o&&!!h.image,_=void 0,x=void 0,C=void 0,k=void 0,m=void 0;(g||y)&&(m=e.getBoundingRect()),g&&(_=f?j9(t,d,m):e.__canvasFillGradient,e.__canvasFillGradient=_),y&&(x=f?j9(t,h,m):e.__canvasStrokeGradient,e.__canvasStrokeGradient=x),S&&(C=f||!e.__canvasFillPattern?H9(t,d,e):e.__canvasFillPattern,e.__canvasFillPattern=C),v&&(k=f||!e.__canvasStrokePattern?H9(t,h,e):e.__canvasStrokePattern,e.__canvasStrokePattern=C),g?t.fillStyle=_:S&&(C?t.fillStyle=C:a=!1),y?t.strokeStyle=x:v&&(k?t.strokeStyle=k:o=!1)}var T=e.getGlobalScale();u.setScale(T[0],T[1],e.segmentIgnoreThreshold);var E,I;t.setLineDash&&n.lineDash&&(i=z$(e),E=i[0],I=i[1]);var D=!0;(c||f&Km)&&(u.setDPR(t.dpr),l?u.setContext(null):(u.setContext(t),D=!1),u.reset(),e.buildPath(u,e.shape,r),u.toStatic(),e.pathUpdated()),D&&u.rebuildPath(t,l?s:1),E&&(t.setLineDash(E),t.lineDashOffset=I),r||(n.strokeFirst?(o&&oH(t,n),a&&iH(t,n)):(a&&iH(t,n),o&&oH(t,n))),E&&t.setLineDash([])}function fOe(t,e,n){var r=e.__image=f$(n.image,e.__image,e,e.onload);if(!(!r||!HT(r))){var i=n.x||0,o=n.y||0,a=e.getWidth(),s=e.getHeight(),l=r.width/r.height;if(a==null&&s!=null?a=s*l:s==null&&a!=null?s=a/l:a==null&&s==null&&(a=r.width,s=r.height),n.sWidth&&n.sHeight){var c=n.sx||0,u=n.sy||0;t.drawImage(r,c,u,n.sWidth,n.sHeight,i,o,a,s)}else if(n.sx&&n.sy){var c=n.sx,u=n.sy,f=a-c,d=s-u;t.drawImage(r,c,u,f,d,i,o,a,s)}else t.drawImage(r,i,o,a,s)}}function dOe(t,e,n){var r,i=n.text;if(i!=null&&(i+=""),i){t.font=n.font||oh,t.textAlign=n.textAlign,t.textBaseline=n.textBaseline;var o=void 0,a=void 0;t.setLineDash&&n.lineDash&&(r=z$(e),o=r[0],a=r[1]),o&&(t.setLineDash(o),t.lineDashOffset=a),n.strokeFirst?(Z4(n)&&t.strokeText(i,n.x,n.y),Q4(n)&&t.fillText(i,n.x,n.y)):(Q4(n)&&t.fillText(i,n.x,n.y),Z4(n)&&t.strokeText(i,n.x,n.y)),o&&t.setLineDash([])}}var aH=["shadowBlur","shadowOffsetX","shadowOffsetY"],sH=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function ore(t,e,n,r,i){var o=!1;if(!r&&(n=n||{},e===n))return!1;if(r||e.opacity!==n.opacity){ts(t,i),o=!0;var a=Math.max(Math.min(e.opacity,1),0);t.globalAlpha=isNaN(a)?sg.opacity:a}(r||e.blend!==n.blend)&&(o||(ts(t,i),o=!0),t.globalCompositeOperation=e.blend||sg.blend);for(var s=0;s<aH.length;s++){var l=aH[s];(r||e[l]!==n[l])&&(o||(ts(t,i),o=!0),t[l]=t.dpr*(e[l]||0))}return(r||e.shadowColor!==n.shadowColor)&&(o||(ts(t,i),o=!0),t.shadowColor=e.shadowColor||sg.shadowColor),o}function lH(t,e,n,r,i){var o=a2(e,i.inHover),a=r?null:n&&a2(n,i.inHover)||{};if(o===a)return!1;var s=ore(t,o,a,r,i);if((r||o.fill!==a.fill)&&(s||(ts(t,i),s=!0),rH(o.fill)&&(t.fillStyle=o.fill)),(r||o.stroke!==a.stroke)&&(s||(ts(t,i),s=!0),rH(o.stroke)&&(t.strokeStyle=o.stroke)),(r||o.opacity!==a.opacity)&&(s||(ts(t,i),s=!0),t.globalAlpha=o.opacity==null?1:o.opacity),e.hasStroke()){var l=o.lineWidth,c=l/(o.strokeNoScale&&e.getLineScale?e.getLineScale():1);t.lineWidth!==c&&(s||(ts(t,i),s=!0),t.lineWidth=c)}for(var u=0;u<sH.length;u++){var f=sH[u],d=f[0];(r||o[d]!==a[d])&&(s||(ts(t,i),s=!0),t[d]=o[d]||f[1])}return s}function hOe(t,e,n,r,i){return ore(t,a2(e,i.inHover),n&&a2(n,i.inHover),r,i)}function are(t,e){var n=e.transform,r=t.dpr||1;n?t.setTransform(r*n[0],r*n[1],r*n[2],r*n[3],r*n[4],r*n[5]):t.setTransform(r,0,0,r,0,0)}function pOe(t,e,n){for(var r=!1,i=0;i<t.length;i++){var o=t[i];r=r||o.isZeroArea(),are(e,o),e.beginPath(),o.buildPath(e,o.shape),e.clip()}n.allClipped=r}function gOe(t,e){return t&&e?t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||t[4]!==e[4]||t[5]!==e[5]:!(!t&&!e)}var cH=1,uH=2,fH=3,dH=4;function mOe(t){var e=Q4(t),n=Z4(t);return!(t.lineDash||!(+e^+n)||e&&typeof t.fill!="string"||n&&typeof t.stroke!="string"||t.strokePercent<1||t.strokeOpacity<1||t.fillOpacity<1)}function ts(t,e){e.batchFill&&t.fill(),e.batchStroke&&t.stroke(),e.batchFill="",e.batchStroke=""}function a2(t,e){return e&&t.__hoverStyle||t.style}function sre(t,e){Xp(t,e,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function Xp(t,e,n,r){var i=e.transform;if(!e.shouldBePainted(n.viewWidth,n.viewHeight,!1,!1)){e.__dirty&=~Ns,e.__isRendered=!1;return}var o=e.__clipPaths,a=n.prevElClipPaths,s=!1,l=!1;if((!a||sOe(o,a))&&(a&&a.length&&(ts(t,n),t.restore(),l=s=!0,n.prevElClipPaths=null,n.allClipped=!1,n.prevEl=null),o&&o.length&&(ts(t,n),t.save(),pOe(o,t,n),s=!0),n.prevElClipPaths=o),n.allClipped){e.__isRendered=!1;return}e.beforeBrush&&e.beforeBrush(),e.innerBeforeBrush();var c=n.prevEl;c||(l=s=!0);var u=e instanceof Fr&&e.autoBatch&&mOe(e.style);s||gOe(i,c.transform)?(ts(t,n),are(t,e)):u||ts(t,n);var f=a2(e,n.inHover);e instanceof Fr?(n.lastDrawType!==cH&&(l=!0,n.lastDrawType=cH),lH(t,e,c,l,n),(!u||!n.batchFill&&!n.batchStroke)&&t.beginPath(),uOe(t,e,f,u),u&&(n.batchFill=f.fill||"",n.batchStroke=f.stroke||"")):e instanceof z4?(n.lastDrawType!==fH&&(l=!0,n.lastDrawType=fH),lH(t,e,c,l,n),dOe(t,e,f)):e instanceof gh?(n.lastDrawType!==uH&&(l=!0,n.lastDrawType=uH),hOe(t,e,c,l,n),fOe(t,e,f)):e.getTemporalDisplayables&&(n.lastDrawType!==dH&&(l=!0,n.lastDrawType=dH),vOe(t,e,n)),u&&r&&ts(t,n),e.innerAfterBrush(),e.afterBrush&&e.afterBrush(),n.prevEl=e,e.__dirty=0,e.__isRendered=!0}function vOe(t,e,n){var r=e.getDisplayables(),i=e.getTemporalDisplayables();t.save();var o={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:n.viewWidth,viewHeight:n.viewHeight,inHover:n.inHover},a,s;for(a=e.getCursor(),s=r.length;a<s;a++){var l=r[a];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),Xp(t,l,o,a===s-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),o.prevEl=l}for(var c=0,u=i.length;c<u;c++){var l=i[c];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),Xp(t,l,o,c===u-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),o.prevEl=l}e.clearTemporalDisplayables(),e.notClear=!0,t.restore()}var ZP=new K9e,hH=new cS(100),pH=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function eC(t,e){if(t==="none")return null;var n=e.getDevicePixelRatio(),r=e.getZr(),i=r.painter.type==="svg";t.dirty&&ZP.delete(t);var o=ZP.get(t);if(o)return o;var a=gi(t,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});a.backgroundColor==="none"&&(a.backgroundColor=null);var s={repeat:"repeat"};return l(s),s.rotation=a.rotation,s.scaleX=s.scaleY=i?1:1/n,ZP.set(t,s),t.dirty=!1,s;function l(c){for(var u=[n],f=!0,d=0;d<pH.length;++d){var h=a[pH[d]];if(h!=null&&!mt(h)&&!Ot(h)&&!Zr(h)&&typeof h!="boolean"){f=!1;break}u.push(h)}var g;if(f){g=u.join(",")+(i?"-svg":"");var y=hH.get(g);y&&(i?c.svgElement=y:c.image=y)}var S=cre(a.dashArrayX),v=yOe(a.dashArrayY),_=lre(a.symbol),x=bOe(S),C=ure(v),k=!i&&L0.createCanvas(),m=i&&{tag:"g",attrs:{},key:"dcl",children:[]},T=I(),E;k&&(k.width=T.width*n,k.height=T.height*n,E=k.getContext("2d")),D(),f&&hH.put(g,k||m),c.image=k,c.svgElement=m,c.svgWidth=T.width,c.svgHeight=T.height;function I(){for(var F=1,R=0,z=x.length;R<z;++R)F=$B(F,x[R]);for(var B=1,R=0,z=_.length;R<z;++R)B=$B(B,_[R].length);F*=B;var ie=C*x.length*_.length;return{width:Math.max(1,Math.min(F,a.maxTileWidth)),height:Math.max(1,Math.min(ie,a.maxTileHeight))}}function D(){E&&(E.clearRect(0,0,k.width,k.height),a.backgroundColor&&(E.fillStyle=a.backgroundColor,E.fillRect(0,0,k.width,k.height)));for(var F=0,R=0;R<v.length;++R)F+=v[R];if(F<=0)return;for(var z=-C,B=0,ie=0,oe=0;z<T.height;){if(B%2===0){for(var _e=ie/2%_.length,Ae=0,Pe=0,Se=0;Ae<T.width*2;){for(var se=0,R=0;R<S[oe].length;++R)se+=S[oe][R];if(se<=0)break;if(Pe%2===0){var ne=(1-a.symbolSize)*.5,J=Ae+S[oe][Pe]*ne,V=z+v[B]*ne,W=S[oe][Pe]*a.symbolSize,ae=v[B]*a.symbolSize,te=Se/2%_[_e].length;ue(J,V,W,ae,_[_e][te])}Ae+=S[oe][Pe],++Se,++Pe,Pe===S[oe].length&&(Pe=0)}++oe,oe===S.length&&(oe=0)}z+=v[B],++ie,++B,B===v.length&&(B=0)}function ue(ce,fe,ye,j,Y){var O=i?1:n,M=R$(Y,ce*O,fe*O,ye*O,j*O,a.color,a.symbolKeepAspect);if(i){var H=r.painter.renderOneToVNode(M);H&&m.children.push(H)}else sre(E,M)}}}}function lre(t){if(!t||t.length===0)return[["rect"]];if(Ot(t))return[[t]];for(var e=!0,n=0;n<t.length;++n)if(!Ot(t[n])){e=!1;break}if(e)return lre([t]);for(var r=[],n=0;n<t.length;++n)Ot(t[n])?r.push([t[n]]):r.push(t[n]);return r}function cre(t){if(!t||t.length===0)return[[0,0]];if(Zr(t)){var e=Math.ceil(t);return[[e,e]]}for(var n=!0,r=0;r<t.length;++r)if(!Zr(t[r])){n=!1;break}if(n)return cre([t]);for(var i=[],r=0;r<t.length;++r)if(Zr(t[r])){var e=Math.ceil(t[r]);i.push([e,e])}else{var e=tn(t[r],function(s){return Math.ceil(s)});e.length%2===1?i.push(e.concat(e)):i.push(e)}return i}function yOe(t){if(!t||typeof t=="object"&&t.length===0)return[0,0];if(Zr(t)){var e=Math.ceil(t);return[e,e]}var n=tn(t,function(r){return Math.ceil(r)});return t.length%2?n.concat(n):n}function bOe(t){return tn(t,function(e){return ure(e)})}function ure(t){for(var e=0,n=0;n<t.length;++n)e+=t[n];return t.length%2===1?e*2:e}function SOe(t,e){t.eachRawSeries(function(n){if(!t.isSeriesFiltered(n)){var r=n.getData();r.hasItemVisual()&&r.each(function(a){var s=r.getItemVisual(a,"decal");if(s){var l=r.ensureUniqueItemVisual(a,"style");l.decal=eC(s,e)}});var i=r.getVisual("decal");if(i){var o=r.getVisual("style");o.decal=eC(i,e)}}})}var _Oe=new wu;const ec=_Oe;var fre={};function wOe(t,e){fre[t]=e}function kOe(t){return fre[t]}var xOe=1,COe=800,TOe=900,AOe=1e3,POe=2e3,EOe=5e3,dre=1e3,OOe=1100,V$=2e3,hre=3e3,IOe=4e3,e3=4500,$Oe=4600,FOe=5e3,LOe=6e3,pre=7e3,DOe={PROCESSOR:{FILTER:AOe,SERIES_FILTER:COe,STATISTIC:EOe},VISUAL:{LAYOUT:dre,PROGRESSIVE_LAYOUT:OOe,GLOBAL:V$,CHART:hre,POST_CHART_LAYOUT:$Oe,COMPONENT:IOe,BRUSH:FOe,CHART_ITEM:e3,ARIA:LOe,DECAL:pre}},zo="__flagInMainProcess",Ha="__pendingUpdate",QP="__needsUpdateStatus",gH=/^[a-zA-Z0-9_]+$/,e7="__connectUpdateStatus",mH=0,NOe=1,MOe=2;function gre(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(this.isDisposed()){this.id;return}return vre(this,t,e)}}function mre(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return vre(this,t,e)}}function vre(t,e,n){return n[0]=n[0]&&n[0].toLowerCase(),wu.prototype[e].apply(t,n)}var yre=function(t){xr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(wu),bre=yre.prototype;bre.on=mre("on");bre.off=mre("off");var Lm,t7,Qw,nd,n7,r7,i7,Xy,Jy,vH,yH,o7,bH,ek,SH,Sre,al,_H,_re=function(t){xr(e,t);function e(n,r,i){var o=t.call(this,new z9e)||this;o._chartsViews=[],o._chartsMap={},o._componentsViews=[],o._componentsMap={},o._pendingActions=[],i=i||{},Ot(r)&&(r=wre[r]),o._dom=n;var a="canvas",s="auto",l=!1,c=o._zr=EB(n,{renderer:i.renderer||a,devicePixelRatio:i.devicePixelRatio,width:i.width,height:i.height,ssr:i.ssr,useDirtyRect:mn(i.useDirtyRect,l),useCoarsePointer:mn(i.useCoarsePointer,s),pointerSize:i.pointerSize});o._ssr=i.ssr,o._throttledZrFlush=M$(Or(c.flush,c),17),r=Gn(r),r&&Lne(r,!0),o._theme=r,o._locale=NEe(i.locale||yne),o._coordSysMgr=new XT;var u=o._api=SH(o);function f(d,h){return d.__prio-h.__prio}return ux(nC,f),ux(U9,f),o._scheduler=new rre(o,u,U9,nC),o._messageCenter=new yre,o._initEvents(),o.resize=Or(o.resize,o),c.animation.on("frame",o._onframe,o),vH(c,o),yH(c,o),Z8(o),o}return e.prototype._onframe=function(){if(!this._disposed){_H(this);var n=this._scheduler;if(this[Ha]){var r=this[Ha].silent;this[zo]=!0;try{Lm(this),nd.update.call(this,null,this[Ha].updateParams)}catch(l){throw this[zo]=!1,this[Ha]=null,l}this._zr.flush(),this[zo]=!1,this[Ha]=null,Xy.call(this,r),Jy.call(this,r)}else if(n.unfinished){var i=xOe,o=this._model,a=this._api;n.unfinished=!1;do{var s=+new Date;n.performSeriesTasks(o),n.performDataProcessorTasks(o),r7(this,o),n.performVisualTasks(o),ek(this,this._model,a,"remain",{}),i-=+new Date-s}while(i>0&&n.unfinished);n.unfinished||this._zr.flush()}}},e.prototype.getDom=function(){return this._dom},e.prototype.getId=function(){return this.id},e.prototype.getZr=function(){return this._zr},e.prototype.isSSR=function(){return this._ssr},e.prototype.setOption=function(n,r,i){if(!this[zo]){if(this._disposed){this.id;return}var o,a,s;if(jt(r)&&(i=r.lazyUpdate,o=r.silent,a=r.replaceMerge,s=r.transition,r=r.notMerge),this[zo]=!0,!this._model||r){var l=new _8e(this._api),c=this._theme,u=this._model=new Ine;u.scheduler=this._scheduler,u.ssr=this._ssr,u.init(null,null,null,c,this._locale,l)}this._model.setOption(n,{replaceMerge:a},W9);var f={seriesTransition:s,optionChanged:!0};if(i)this[Ha]={silent:o,updateParams:f},this[zo]=!1,this.getZr().wakeUp();else{try{Lm(this),nd.update.call(this,null,f)}catch(d){throw this[Ha]=null,this[zo]=!1,d}this._ssr||this._zr.flush(),this[Ha]=null,this[zo]=!1,Xy.call(this,o),Jy.call(this,o)}}},e.prototype.setTheme=function(){},e.prototype.getModel=function(){return this._model},e.prototype.getOption=function(){return this._model&&this._model.getOption()},e.prototype.getWidth=function(){return this._zr.getWidth()},e.prototype.getHeight=function(){return this._zr.getHeight()},e.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||Pn.hasGlobalWindow&&window.devicePixelRatio||1},e.prototype.getRenderedCanvas=function(n){return this.renderToCanvas(n)},e.prototype.renderToCanvas=function(n){n=n||{};var r=this._zr.painter;return r.getRenderedCanvas({backgroundColor:n.backgroundColor||this._model.get("backgroundColor"),pixelRatio:n.pixelRatio||this.getDevicePixelRatio()})},e.prototype.renderToSVGString=function(n){n=n||{};var r=this._zr.painter;return r.renderToString({useViewBox:n.useViewBox})},e.prototype.getSvgDataURL=function(){if(Pn.svgSupported){var n=this._zr,r=n.storage.getDisplayList();return be(r,function(i){i.stopAnimation(null,!0)}),n.painter.toDataURL()}},e.prototype.getDataURL=function(n){if(this._disposed){this.id;return}n=n||{};var r=n.excludeComponents,i=this._model,o=[],a=this;be(r,function(l){i.eachComponent({mainType:l},function(c){var u=a._componentsMap[c.__viewId];u.group.ignore||(o.push(u),u.group.ignore=!0)})});var s=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(n).toDataURL("image/"+(n&&n.type||"png"));return be(o,function(l){l.group.ignore=!1}),s},e.prototype.getConnectedDataURL=function(n){if(this._disposed){this.id;return}var r=n.type==="svg",i=this.group,o=Math.min,a=Math.max,s=1/0;if(wH[i]){var l=s,c=s,u=-s,f=-s,d=[],h=n&&n.pixelRatio||this.getDevicePixelRatio();be(c1,function(x,C){if(x.group===i){var k=r?x.getZr().painter.getSvgDom().innerHTML:x.renderToCanvas(Gn(n)),m=x.getDom().getBoundingClientRect();l=o(m.left,l),c=o(m.top,c),u=a(m.right,u),f=a(m.bottom,f),d.push({dom:k,left:m.left,top:m.top})}}),l*=h,c*=h,u*=h,f*=h;var g=u-l,y=f-c,S=L0.createCanvas(),v=EB(S,{renderer:r?"svg":"canvas"});if(v.resize({width:g,height:y}),r){var _="";return be(d,function(x){var C=x.left-l,k=x.top-c;_+='<g transform="translate('+C+","+k+')">'+x.dom+"</g>"}),v.painter.getSvgRoot().innerHTML=_,n.connectedBackgroundColor&&v.painter.setBackgroundColor(n.connectedBackgroundColor),v.refreshImmediately(),v.painter.toDataURL()}else return n.connectedBackgroundColor&&v.add(new Qo({shape:{x:0,y:0,width:g,height:y},style:{fill:n.connectedBackgroundColor}})),be(d,function(x){var C=new gh({style:{x:x.left*h-l,y:x.top*h-c,image:x.dom}});v.add(C)}),v.refreshImmediately(),S.toDataURL("image/"+(n&&n.type||"png"))}else return this.getDataURL(n)},e.prototype.convertToPixel=function(n,r){return n7(this,"convertToPixel",n,r)},e.prototype.convertFromPixel=function(n,r){return n7(this,"convertFromPixel",n,r)},e.prototype.containPixel=function(n,r){if(this._disposed){this.id;return}var i=this._model,o,a=TP(i,n);return be(a,function(s,l){l.indexOf("Models")>=0&&be(s,function(c){var u=c.coordinateSystem;if(u&&u.containPoint)o=o||!!u.containPoint(r);else if(l==="seriesModels"){var f=this._chartsMap[c.__viewId];f&&f.containPoint&&(o=o||f.containPoint(r,c))}},this)},this),!!o},e.prototype.getVisual=function(n,r){var i=this._model,o=TP(i,n,{defaultMainType:"series"}),a=o.seriesModel,s=a.getData(),l=o.hasOwnProperty("dataIndexInside")?o.dataIndexInside:o.hasOwnProperty("dataIndex")?s.indexOfRawIndex(o.dataIndex):null;return l!=null?j9e(s,l,r):H9e(s,r)},e.prototype.getViewOfComponentModel=function(n){return this._componentsMap[n.__viewId]},e.prototype.getViewOfSeriesModel=function(n){return this._chartsMap[n.__viewId]},e.prototype._initEvents=function(){var n=this;be(ROe,function(r){var i=function(o){var a=n.getModel(),s=o.target,l,c=r==="globalout";if(c?l={}:s&&$b(s,function(g){var y=Vr(g);if(y&&y.dataIndex!=null){var S=y.dataModel||a.getSeriesByIndex(y.seriesIndex);return l=S&&S.getDataParams(y.dataIndex,y.dataType,s)||{},!0}else if(y.eventData)return l=ot({},y.eventData),!0},!0),l){var u=l.componentType,f=l.componentIndex;(u==="markLine"||u==="markPoint"||u==="markArea")&&(u="series",f=l.seriesIndex);var d=u&&f!=null&&a.getComponent(u,f),h=d&&n[d.mainType==="series"?"_chartsMap":"_componentsMap"][d.__viewId];l.event=o,l.type=r,n._$eventProcessor.eventInfo={targetEl:s,packedEvent:l,model:d,view:h},n.trigger(r,l)}};i.zrEventfulCallAtLast=!0,n._zr.on(r,i,n)}),be(l1,function(r,i){n._messageCenter.on(i,function(o){this.trigger(i,o)},n)}),be(["selectchanged"],function(r){n._messageCenter.on(r,function(i){this.trigger(r,i)},n)}),W9e(this._messageCenter,this,this._api)},e.prototype.isDisposed=function(){return this._disposed},e.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},e.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var n=this.getDom();n&&gte(this.getDom(),j$,"");var r=this,i=r._api,o=r._model;be(r._componentsViews,function(a){a.dispose(o,i)}),be(r._chartsViews,function(a){a.dispose(o,i)}),r._zr.dispose(),r._dom=r._model=r._chartsMap=r._componentsMap=r._chartsViews=r._componentsViews=r._scheduler=r._api=r._zr=r._throttledZrFlush=r._theme=r._coordSysMgr=r._messageCenter=null,delete c1[r.id]},e.prototype.resize=function(n){if(!this[zo]){if(this._disposed){this.id;return}this._zr.resize(n);var r=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!r){var i=r.resetOption("media"),o=n&&n.silent;this[Ha]&&(o==null&&(o=this[Ha].silent),i=!0,this[Ha]=null),this[zo]=!0;try{i&&Lm(this),nd.update.call(this,{type:"resize",animation:ot({duration:0},n&&n.animation)})}catch(a){throw this[zo]=!1,a}this[zo]=!1,Xy.call(this,o),Jy.call(this,o)}}},e.prototype.showLoading=function(n,r){if(this._disposed){this.id;return}if(jt(n)&&(r=n,n=""),n=n||"default",this.hideLoading(),!!G9[n]){var i=G9[n](this._api,r),o=this._zr;this._loadingFX=i,o.add(i)}},e.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},e.prototype.makeActionFromEvent=function(n){var r=ot({},n);return r.type=l1[n.type],r},e.prototype.dispatchAction=function(n,r){if(this._disposed){this.id;return}if(jt(r)||(r={silent:!!r}),!!tC[n.type]&&this._model){if(this[zo]){this._pendingActions.push(n);return}var i=r.silent;i7.call(this,n,i);var o=r.flush;o?this._zr.flush():o!==!1&&Pn.browser.weChat&&this._throttledZrFlush(),Xy.call(this,i),Jy.call(this,i)}},e.prototype.updateLabelLayout=function(){ec.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},e.prototype.appendData=function(n){if(this._disposed){this.id;return}var r=n.seriesIndex,i=this.getModel(),o=i.getSeriesByIndex(r);o.appendData(n),this._scheduler.unfinished=!0,this.getZr().wakeUp()},e.internalField=function(){Lm=function(f){var d=f._scheduler;d.restorePipelines(f._model),d.prepareStageTasks(),t7(f,!0),t7(f,!1),d.plan()},t7=function(f,d){for(var h=f._model,g=f._scheduler,y=d?f._componentsViews:f._chartsViews,S=d?f._componentsMap:f._chartsMap,v=f._zr,_=f._api,x=0;x<y.length;x++)y[x].__alive=!1;d?h.eachComponent(function(m,T){m!=="series"&&C(T)}):h.eachSeries(C);function C(m){var T=m.__requireNewView;m.__requireNewView=!1;var E="_ec_"+m.id+"_"+m.type,I=!T&&S[E];if(!I){var D=su(m.type),F=d?lh.getClass(D.main,D.sub):Rd.getClass(D.sub);I=new F,I.init(h,_),S[E]=I,y.push(I),v.add(I.group)}m.__viewId=I.__id=E,I.__alive=!0,I.__model=m,I.group.__ecComponentInfo={mainType:m.mainType,index:m.componentIndex},!d&&g.prepareView(I,m,h,_)}for(var x=0;x<y.length;){var k=y[x];k.__alive?x++:(!d&&k.renderTask.dispose(),v.remove(k.group),k.dispose(h,_),y.splice(x,1),S[k.__id]===k&&delete S[k.__id],k.__id=k.group.__ecComponentInfo=null)}},Qw=function(f,d,h,g,y){var S=f._model;if(S.setUpdatePayload(h),!g){be([].concat(f._componentsViews).concat(f._chartsViews),k);return}var v={};v[g+"Id"]=h[g+"Id"],v[g+"Index"]=h[g+"Index"],v[g+"Name"]=h[g+"Name"];var _={mainType:g,query:v};y&&(_.subType=y);var x=h.excludeSeriesId,C;x!=null&&(C=vn(),be(Zo(x),function(m){var T=Pl(m,null);T!=null&&C.set(T,!0)})),S&&S.eachComponent(_,function(m){var T=C&&C.get(m.id)!=null;if(!T)if(oj(h))if(m instanceof Ag)h.type===lg&&!h.notBlur&&!m.get(["emphasis","disabled"])&&f7e(m,h,f._api);else{var E=m$(m.mainType,m.componentIndex,h.name,f._api),I=E.focusSelf,D=E.dispatchers;h.type===lg&&I&&!h.notBlur&&x9(m.mainType,m.componentIndex,f._api),D&&be(D,function(F){h.type===lg?V4(F):B4(F)})}else P9(h)&&m instanceof Ag&&(p7e(m,h,f._api),rj(m),al(f))},f),S&&S.eachComponent(_,function(m){var T=C&&C.get(m.id)!=null;T||k(f[g==="series"?"_chartsMap":"_componentsMap"][m.__viewId])},f);function k(m){m&&m.__alive&&m[d]&&m[d](m.__model,S,f._api,h)}},nd={prepareAndUpdate:function(f){Lm(this),nd.update.call(this,f,{optionChanged:f.newOption!=null})},update:function(f,d){var h=this._model,g=this._api,y=this._zr,S=this._coordSysMgr,v=this._scheduler;if(h){h.setUpdatePayload(f),v.restoreData(h,f),v.performSeriesTasks(h),S.create(h,g),v.performDataProcessorTasks(h,f),r7(this,h),S.update(h,g),n(h),v.performVisualTasks(h,f),o7(this,h,g,f,d);var _=h.get("backgroundColor")||"transparent",x=h.get("darkMode");y.setBackgroundColor(_),x!=null&&x!=="auto"&&y.setDarkMode(x),ec.trigger("afterupdate",h,g)}},updateTransform:function(f){var d=this,h=this._model,g=this._api;if(h){h.setUpdatePayload(f);var y=[];h.eachComponent(function(v,_){if(v!=="series"){var x=d.getViewOfComponentModel(_);if(x&&x.__alive)if(x.updateTransform){var C=x.updateTransform(_,h,g,f);C&&C.update&&y.push(x)}else y.push(x)}});var S=vn();h.eachSeries(function(v){var _=d._chartsMap[v.__viewId];if(_.updateTransform){var x=_.updateTransform(v,h,g,f);x&&x.update&&S.set(v.uid,1)}else S.set(v.uid,1)}),n(h),this._scheduler.performVisualTasks(h,f,{setDirty:!0,dirtyMap:S}),ek(this,h,g,f,{},S),ec.trigger("afterupdate",h,g)}},updateView:function(f){var d=this._model;d&&(d.setUpdatePayload(f),Rd.markUpdateMethod(f,"updateView"),n(d),this._scheduler.performVisualTasks(d,f,{setDirty:!0}),o7(this,d,this._api,f,{}),ec.trigger("afterupdate",d,this._api))},updateVisual:function(f){var d=this,h=this._model;h&&(h.setUpdatePayload(f),h.eachSeries(function(g){g.getData().clearAllVisual()}),Rd.markUpdateMethod(f,"updateVisual"),n(h),this._scheduler.performVisualTasks(h,f,{visualType:"visual",setDirty:!0}),h.eachComponent(function(g,y){if(g!=="series"){var S=d.getViewOfComponentModel(y);S&&S.__alive&&S.updateVisual(y,h,d._api,f)}}),h.eachSeries(function(g){var y=d._chartsMap[g.__viewId];y.updateVisual(g,h,d._api,f)}),ec.trigger("afterupdate",h,this._api))},updateLayout:function(f){nd.update.call(this,f)}},n7=function(f,d,h,g){if(f._disposed){f.id;return}for(var y=f._model,S=f._coordSysMgr.getCoordinateSystems(),v,_=TP(y,h),x=0;x<S.length;x++){var C=S[x];if(C[d]&&(v=C[d](y,_,g))!=null)return v}},r7=function(f,d){var h=f._chartsMap,g=f._scheduler;d.eachSeries(function(y){g.updateStreamModes(y,h[y.__viewId])})},i7=function(f,d){var h=this,g=this.getModel(),y=f.type,S=f.escapeConnect,v=tC[y],_=v.actionInfo,x=(_.update||"update").split(":"),C=x.pop(),k=x[0]!=null&&su(x[0]);this[zo]=!0;var m=[f],T=!1;f.batch&&(T=!0,m=tn(f.batch,function(B){return B=gi(ot({},B),f),B.batch=null,B}));var E=[],I,D=P9(f),F=oj(f);if(F&&zte(this._api),be(m,function(B){if(I=v.action(B,h._model,h._api),I=I||ot({},B),I.type=_.event||I.type,E.push(I),F){var ie=l$(f),oe=ie.queryOptionMap,_e=ie.mainTypeSpecified,Ae=_e?oe.keys()[0]:"series";Qw(h,C,B,Ae),al(h)}else D?(Qw(h,C,B,"series"),al(h)):k&&Qw(h,C,B,k.main,k.sub)}),C!=="none"&&!F&&!D&&!k)try{this[Ha]?(Lm(this),nd.update.call(this,f),this[Ha]=null):nd[C].call(this,f)}catch(B){throw this[zo]=!1,B}if(T?I={type:_.event||y,escapeConnect:S,batch:E}:I=E[0],this[zo]=!1,!d){var R=this._messageCenter;if(R.trigger(I.type,I),D){var z={type:"selectchanged",escapeConnect:S,selected:g7e(g),isFromClick:f.isFromClick||!1,fromAction:f.type,fromActionPayload:f};R.trigger(z.type,z)}}},Xy=function(f){for(var d=this._pendingActions;d.length;){var h=d.shift();i7.call(this,h,f)}},Jy=function(f){!f&&this.trigger("updated")},vH=function(f,d){f.on("rendered",function(h){d.trigger("rendered",h),f.animation.isFinished()&&!d[Ha]&&!d._scheduler.unfinished&&!d._pendingActions.length&&d.trigger("finished")})},yH=function(f,d){f.on("mouseover",function(h){var g=h.target,y=$b(g,A9);y&&(d7e(y,h,d._api),al(d))}).on("mouseout",function(h){var g=h.target,y=$b(g,A9);y&&(h7e(y,h,d._api),al(d))}).on("click",function(h){var g=h.target,y=$b(g,function(_){return Vr(_).dataIndex!=null},!0);if(y){var S=y.selected?"unselect":"select",v=Vr(y);d._api.dispatchAction({type:S,dataType:v.dataType,dataIndexInside:v.dataIndex,seriesIndex:v.seriesIndex,isFromClick:!0})}})};function n(f){f.clearColorPalette(),f.eachSeries(function(d){d.clearColorPalette()})}function r(f){var d=[],h=[],g=!1;if(f.eachComponent(function(_,x){var C=x.get("zlevel")||0,k=x.get("z")||0,m=x.getZLevelKey();g=g||!!m,(_==="series"?h:d).push({zlevel:C,z:k,idx:x.componentIndex,type:_,key:m})}),g){var y=d.concat(h),S,v;ux(y,function(_,x){return _.zlevel===x.zlevel?_.z-x.z:_.zlevel-x.zlevel}),be(y,function(_){var x=f.getComponent(_.type,_.idx),C=_.zlevel,k=_.key;S!=null&&(C=Math.max(S,C)),k?(C===S&&k!==v&&C++,v=k):v&&(C===S&&C++,v=""),S=C,x.setZLevel(C)})}}o7=function(f,d,h,g,y){r(d),bH(f,d,h,g,y),be(f._chartsViews,function(S){S.__alive=!1}),ek(f,d,h,g,y),be(f._chartsViews,function(S){S.__alive||S.remove(d,h)})},bH=function(f,d,h,g,y,S){be(S||f._componentsViews,function(v){var _=v.__model;c(_,v),v.render(_,d,h,g),s(_,v),u(_,v)})},ek=function(f,d,h,g,y,S){var v=f._scheduler;y=ot(y||{},{updatedSeries:d.getSeries()}),ec.trigger("series:beforeupdate",d,h,y);var _=!1;d.eachSeries(function(x){var C=f._chartsMap[x.__viewId];C.__alive=!0;var k=C.renderTask;v.updatePayload(k,g),c(x,C),S&&S.get(x.uid)&&k.dirty(),k.perform(v.getPerformArgs(k))&&(_=!0),C.group.silent=!!x.get("silent"),a(x,C),rj(x)}),v.unfinished=_||v.unfinished,ec.trigger("series:layoutlabels",d,h,y),ec.trigger("series:transition",d,h,y),d.eachSeries(function(x){var C=f._chartsMap[x.__viewId];s(x,C),u(x,C)}),o(f,d),ec.trigger("series:afterupdate",d,h,y)},al=function(f){f[QP]=!0,f.getZr().wakeUp()},_H=function(f){f[QP]&&(f.getZr().storage.traverse(function(d){o1(d)||i(d)}),f[QP]=!1)};function i(f){for(var d=[],h=f.currentStates,g=0;g<h.length;g++){var y=h[g];y==="emphasis"||y==="blur"||y==="select"||d.push(y)}f.selected&&f.states.select&&d.push("select"),f.hoverState===p$&&f.states.emphasis?d.push("emphasis"):f.hoverState===h$&&f.states.blur&&d.push("blur"),f.useStates(d)}function o(f,d){var h=f._zr,g=h.storage,y=0;g.traverse(function(S){S.isGroup||y++}),y>d.get("hoverLayerThreshold")&&!Pn.node&&!Pn.worker&&d.eachSeries(function(S){if(!S.preventUsingHoverLayer){var v=f._chartsMap[S.__viewId];v.__alive&&v.eachRendered(function(_){_.states.emphasis&&(_.states.emphasis.hoverLayer=!0)})}})}function a(f,d){var h=f.get("blendMode")||null;d.eachRendered(function(g){g.isGroup||(g.style.blend=h)})}function s(f,d){if(!f.preventAutoZ){var h=f.get("z")||0,g=f.get("zlevel")||0;d.eachRendered(function(y){return l(y,h,g,-1/0),!0})}}function l(f,d,h,g){var y=f.getTextContent(),S=f.getTextGuideLine(),v=f.isGroup;if(v)for(var _=f.childrenRef(),x=0;x<_.length;x++)g=Math.max(l(_[x],d,h,g),g);else f.z=d,f.zlevel=h,g=Math.max(f.z2,g);if(y&&(y.z=d,y.zlevel=h,isFinite(g)&&(y.z2=g+2)),S){var C=f.textGuideLineConfig;S.z=d,S.zlevel=h,isFinite(g)&&(S.z2=g+(C&&C.showAbove?1:-1))}return g}function c(f,d){d.eachRendered(function(h){if(!o1(h)){var g=h.getTextContent(),y=h.getTextGuideLine();h.stateTransition&&(h.stateTransition=null),g&&g.stateTransition&&(g.stateTransition=null),y&&y.stateTransition&&(y.stateTransition=null),h.hasState()?(h.prevStates=h.currentStates,h.clearStates()):h.prevStates&&(h.prevStates=null)}})}function u(f,d){var h=f.getModel("stateAnimation"),g=f.isAnimationEnabled(),y=h.get("duration"),S=y>0?{duration:y,delay:h.get("delay"),easing:h.get("easing")}:null;d.eachRendered(function(v){if(v.states&&v.states.emphasis){if(o1(v))return;if(v instanceof Fr&&S7e(v),v.__dirty){var _=v.prevStates;_&&v.useStates(_)}if(g){v.stateTransition=S;var x=v.getTextContent(),C=v.getTextGuideLine();x&&(x.stateTransition=S),C&&(C.stateTransition=S)}v.__dirty&&i(v)}})}SH=function(f){return new(function(d){xr(h,d);function h(){return d!==null&&d.apply(this,arguments)||this}return h.prototype.getCoordinateSystems=function(){return f._coordSysMgr.getCoordinateSystems()},h.prototype.getComponentByElement=function(g){for(;g;){var y=g.__ecComponentInfo;if(y!=null)return f._model.getComponent(y.mainType,y.index);g=g.parent}},h.prototype.enterEmphasis=function(g,y){V4(g,y),al(f)},h.prototype.leaveEmphasis=function(g,y){B4(g,y),al(f)},h.prototype.enterBlur=function(g){u7e(g),al(f)},h.prototype.leaveBlur=function(g){Dte(g),al(f)},h.prototype.enterSelect=function(g){Nte(g),al(f)},h.prototype.leaveSelect=function(g){Mte(g),al(f)},h.prototype.getModel=function(){return f.getModel()},h.prototype.getViewOfComponentModel=function(g){return f.getViewOfComponentModel(g)},h.prototype.getViewOfSeriesModel=function(g){return f.getViewOfSeriesModel(g)},h}($ne))(f)},Sre=function(f){function d(h,g){for(var y=0;y<h.length;y++){var S=h[y];S[e7]=g}}be(l1,function(h,g){f._messageCenter.on(g,function(y){if(wH[f.group]&&f[e7]!==mH){if(y&&y.escapeConnect)return;var S=f.makeActionFromEvent(y),v=[];be(c1,function(_){_!==f&&_.group===f.group&&v.push(_)}),d(v,mH),be(v,function(_){_[e7]!==NOe&&_.dispatchAction(S)}),d(v,MOe)}})})}}(),e}(wu),B$=_re.prototype;B$.on=gre("on");B$.off=gre("off");B$.one=function(t,e,n){var r=this;function i(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];e&&e.apply&&e.apply(this,o),r.off(t,i)}this.on.call(this,t,i,n)};var ROe=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var tC={},l1={},U9=[],W9=[],nC=[],wre={},G9={},c1={},wH={},zOe=+new Date-0,j$="_echarts_instance_";function VOe(t,e,n){var r=!(n&&n.ssr);if(r){var i=BOe(t);if(i)return i}var o=new _re(t,e,n);return o.id="ec_"+zOe++,c1[o.id]=o,r&&gte(t,j$,o.id),Sre(o),ec.trigger("afterinit",o),o}function BOe(t){return c1[Z5e(t,j$)]}function kre(t,e){wre[t]=e}function xre(t){wr(W9,t)<0&&W9.push(t)}function Cre(t,e){U$(U9,t,e,POe)}function jOe(t){H$("afterinit",t)}function HOe(t){H$("afterupdate",t)}function H$(t,e){ec.on(t,e)}function R0(t,e,n){Qn(e)&&(n=e,e="");var r=jt(t)?t.type:[t,t={event:e}][0];t.event=(t.event||r).toLowerCase(),e=t.event,!l1[e]&&(Hs(gH.test(r)&&gH.test(e)),tC[r]||(tC[r]={action:n,actionInfo:t}),l1[e]=r)}function UOe(t,e){XT.register(t,e)}function WOe(t,e){U$(nC,t,e,dre,"layout")}function qg(t,e){U$(nC,t,e,hre,"visual")}var kH=[];function U$(t,e,n,r,i){if((Qn(e)||jt(e))&&(n=e,e=r),!(wr(kH,n)>=0)){kH.push(n);var o=rre.wrapStageHandler(n,i);o.__prio=e,o.__raw=n,t.push(o)}}function Tre(t,e){G9[t]=e}function GOe(t,e,n){var r=kOe("registerMap");r&&r(t,e,n)}var qOe=q8e;qg(V$,k9e);qg(e3,x9e);qg(e3,C9e);qg(V$,V9e);qg(e3,B9e);qg(pre,SOe);xre(Lne);Cre(TOe,E8e);Tre("default",T9e);R0({type:lg,event:lg,update:lg},Jo);R0({type:vx,event:vx,update:vx},Jo);R0({type:n1,event:n1,update:n1},Jo);R0({type:yx,event:yx,update:yx},Jo);R0({type:r1,event:r1,update:r1},Jo);kre("light",M9e);kre("dark",R9e);function Zy(t){return t==null?0:t.length||1}function xH(t){return t}var YOe=function(){function t(e,n,r,i,o,a){this._old=e,this._new=n,this._oldKeyGetter=r||xH,this._newKeyGetter=i||xH,this.context=o,this._diffModeMultiple=a==="multiple"}return t.prototype.add=function(e){return this._add=e,this},t.prototype.update=function(e){return this._update=e,this},t.prototype.updateManyToOne=function(e){return this._updateManyToOne=e,this},t.prototype.updateOneToMany=function(e){return this._updateOneToMany=e,this},t.prototype.updateManyToMany=function(e){return this._updateManyToMany=e,this},t.prototype.remove=function(e){return this._remove=e,this},t.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},t.prototype._executeOneToOne=function(){var e=this._old,n=this._new,r={},i=new Array(e.length),o=new Array(n.length);this._initIndexMap(e,null,i,"_oldKeyGetter"),this._initIndexMap(n,r,o,"_newKeyGetter");for(var a=0;a<e.length;a++){var s=i[a],l=r[s],c=Zy(l);if(c>1){var u=l.shift();l.length===1&&(r[s]=l[0]),this._update&&this._update(u,a)}else c===1?(r[s]=null,this._update&&this._update(l,a)):this._remove&&this._remove(a)}this._performRestAdd(o,r)},t.prototype._executeMultiple=function(){var e=this._old,n=this._new,r={},i={},o=[],a=[];this._initIndexMap(e,r,o,"_oldKeyGetter"),this._initIndexMap(n,i,a,"_newKeyGetter");for(var s=0;s<o.length;s++){var l=o[s],c=r[l],u=i[l],f=Zy(c),d=Zy(u);if(f>1&&d===1)this._updateManyToOne&&this._updateManyToOne(u,c),i[l]=null;else if(f===1&&d>1)this._updateOneToMany&&this._updateOneToMany(u,c),i[l]=null;else if(f===1&&d===1)this._update&&this._update(u,c),i[l]=null;else if(f>1&&d>1)this._updateManyToMany&&this._updateManyToMany(u,c),i[l]=null;else if(f>1)for(var h=0;h<f;h++)this._remove&&this._remove(c[h]);else this._remove&&this._remove(c)}this._performRestAdd(a,i)},t.prototype._performRestAdd=function(e,n){for(var r=0;r<e.length;r++){var i=e[r],o=n[i],a=Zy(o);if(a>1)for(var s=0;s<a;s++)this._add&&this._add(o[s]);else a===1&&this._add&&this._add(o);n[i]=null}},t.prototype._initIndexMap=function(e,n,r,i){for(var o=this._diffModeMultiple,a=0;a<e.length;a++){var s="_ec_"+this[i](e[a],a);if(o||(r[a]=s),!!n){var l=n[s],c=Zy(l);c===0?(n[s]=a,o&&r.push(s)):c===1?n[s]=[l,a]:l.push(a)}}},t}();const Are=YOe;var KOe=function(){function t(e,n){this._encode=e,this._schema=n}return t.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},t.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},t}();function XOe(t,e){var n={},r=n.encode={},i=vn(),o=[],a=[],s={};be(t.dimensions,function(d){var h=t.getDimensionInfo(d),g=h.coordDim;if(g){var y=h.coordDimIndex;a7(r,g)[y]=d,h.isExtraCoord||(i.set(g,1),ZOe(h.type)&&(o[0]=d),a7(s,g)[y]=t.getDimensionIndex(h.name)),h.defaultTooltip&&a.push(d)}xne.each(function(S,v){var _=a7(r,v),x=h.otherDims[v];x!=null&&x!==!1&&(_[x]=h.name)})});var l=[],c={};i.each(function(d,h){var g=r[h];c[h]=g[0],l=l.concat(g)}),n.dataDimsOnCoord=l,n.dataDimIndicesOnCoord=tn(l,function(d){return t.getDimensionInfo(d).storeDimIndex}),n.encodeFirstDimNotExtra=c;var u=r.label;u&&u.length&&(o=u.slice());var f=r.tooltip;return f&&f.length?a=f.slice():a.length||(a=o.slice()),r.defaultedLabel=o,r.defaultedTooltip=a,n.userOutput=new KOe(s,e),n}function a7(t,e){return t.hasOwnProperty(e)||(t[e]=[]),t[e]}function JOe(t){return t==="category"?"ordinal":t==="time"?"time":"float"}function ZOe(t){return!(t==="ordinal"||t==="time")}var QOe=function(){function t(e){this.otherDims={},e!=null&&ot(this,e)}return t}();const kx=QOe;var e6e=no(),t6e={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},Pre=function(){function t(e){this.dimensions=e.dimensions,this._dimOmitted=e.dimensionOmitted,this.source=e.source,this._fullDimCount=e.fullDimensionCount,this._updateDimOmitted(e.dimensionOmitted)}return t.prototype.isDimensionOmitted=function(){return this._dimOmitted},t.prototype._updateDimOmitted=function(e){this._dimOmitted=e,e&&(this._dimNameMap||(this._dimNameMap=Ire(this.source)))},t.prototype.getSourceDimensionIndex=function(e){return mn(this._dimNameMap.get(e),-1)},t.prototype.getSourceDimension=function(e){var n=this.source.dimensionsDefine;if(n)return n[e]},t.prototype.makeStoreSchema=function(){for(var e=this._fullDimCount,n=Nne(this.source),r=!$re(e),i="",o=[],a=0,s=0;a<e;a++){var l=void 0,c=void 0,u=void 0,f=this.dimensions[s];if(f&&f.storeDimIndex===a)l=n?f.name:null,c=f.type,u=f.ordinalMeta,s++;else{var d=this.getSourceDimension(a);d&&(l=n?d.name:null,c=d.type)}o.push({property:l,type:c,ordinalMeta:u}),n&&l!=null&&(!f||!f.isCalculationCoord)&&(i+=r?l.replace(/\`/g,"`1").replace(/\$/g,"`2"):l),i+="$",i+=t6e[c]||"f",u&&(i+=u.uid),i+="$"}var h=this.source,g=[h.seriesLayoutBy,h.startIndex,i].join("$$");return{dimensions:o,hash:g}},t.prototype.makeOutputDimensionNames=function(){for(var e=[],n=0,r=0;n<this._fullDimCount;n++){var i=void 0,o=this.dimensions[r];if(o&&o.storeDimIndex===n)o.isCalculationCoord||(i=o.name),r++;else{var a=this.getSourceDimension(n);a&&(i=a.name)}e.push(i)}return e},t.prototype.appendCalculationDimension=function(e){this.dimensions.push(e),e.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},t}();function Ere(t){return t instanceof Pre}function Ore(t){for(var e=vn(),n=0;n<(t||[]).length;n++){var r=t[n],i=jt(r)?r.name:r;i!=null&&e.get(i)==null&&e.set(i,n)}return e}function Ire(t){var e=e6e(t);return e.dimNameMap||(e.dimNameMap=Ore(t.dimensionsDefine))}function $re(t){return t>30}var Qy=jt,rd=tn,n6e=typeof Int32Array>"u"?Array:Int32Array,r6e="e\0\0",CH=-1,i6e=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],o6e=["_approximateExtent"],TH,tk,eb,tb,s7,nk,l7,a6e=function(){function t(e,n){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var r,i=!1;Ere(e)?(r=e.dimensions,this._dimOmitted=e.isDimensionOmitted(),this._schema=e):(i=!0,r=e),r=r||["x","y"];for(var o={},a=[],s={},l=!1,c={},u=0;u<r.length;u++){var f=r[u],d=Ot(f)?new kx({name:f}):f instanceof kx?f:new kx(f),h=d.name;d.type=d.type||"float",d.coordDim||(d.coordDim=h,d.coordDimIndex=0);var g=d.otherDims=d.otherDims||{};a.push(h),o[h]=d,c[h]!=null&&(l=!0),d.createInvertedIndices&&(s[h]=[]),g.itemName===0&&(this._nameDimIdx=u),g.itemId===0&&(this._idDimIdx=u),i&&(d.storeDimIndex=u)}if(this.dimensions=a,this._dimInfos=o,this._initGetDimensionInfo(l),this.hostModel=n,this._invertedIndicesMap=s,this._dimOmitted){var y=this._dimIdxToName=vn();be(a,function(S){y.set(o[S].storeDimIndex,S)})}}return t.prototype.getDimension=function(e){var n=this._recognizeDimIndex(e);if(n==null)return e;if(n=e,!this._dimOmitted)return this.dimensions[n];var r=this._dimIdxToName.get(n);if(r!=null)return r;var i=this._schema.getSourceDimension(n);if(i)return i.name},t.prototype.getDimensionIndex=function(e){var n=this._recognizeDimIndex(e);if(n!=null)return n;if(e==null)return-1;var r=this._getDimInfo(e);return r?r.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(e):-1},t.prototype._recognizeDimIndex=function(e){if(Zr(e)||e!=null&&!isNaN(e)&&!this._getDimInfo(e)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(e)<0))return+e},t.prototype._getStoreDimIndex=function(e){var n=this.getDimensionIndex(e);return n},t.prototype.getDimensionInfo=function(e){return this._getDimInfo(this.getDimension(e))},t.prototype._initGetDimensionInfo=function(e){var n=this._dimInfos;this._getDimInfo=e?function(r){return n.hasOwnProperty(r)?n[r]:void 0}:function(r){return n[r]}},t.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},t.prototype.mapDimension=function(e,n){var r=this._dimSummary;if(n==null)return r.encodeFirstDimNotExtra[e];var i=r.encode[e];return i?i[n]:null},t.prototype.mapDimensionsAll=function(e){var n=this._dimSummary,r=n.encode[e];return(r||[]).slice()},t.prototype.getStore=function(){return this._store},t.prototype.initData=function(e,n,r){var i=this,o;if(e instanceof D9&&(o=e),!o){var a=this.dimensions,s=I$(e)||ds(e)?new Mne(e,a.length):e;o=new D9;var l=rd(a,function(c){return{type:i._dimInfos[c].type,property:c}});o.initData(s,l,r)}this._store=o,this._nameList=(n||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,o.count()),this._dimSummary=XOe(this,this._schema),this.userOutput=this._dimSummary.userOutput},t.prototype.appendData=function(e){var n=this._store.appendData(e);this._doInit(n[0],n[1])},t.prototype.appendValues=function(e,n){var r=this._store.appendValues(e,n.length),i=r.start,o=r.end,a=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),n)for(var s=i;s<o;s++){var l=s-i;this._nameList[s]=n[l],a&&l7(this,s)}},t.prototype._updateOrdinalMeta=function(){for(var e=this._store,n=this.dimensions,r=0;r<n.length;r++){var i=this._dimInfos[n[r]];i.ordinalMeta&&e.collectOrdinalMeta(i.storeDimIndex,i.ordinalMeta)}},t.prototype._shouldMakeIdFromName=function(){var e=this._store.getProvider();return this._idDimIdx==null&&e.getSource().sourceFormat!==Md&&!e.fillStorage},t.prototype._doInit=function(e,n){if(!(e>=n)){var r=this._store,i=r.getProvider();this._updateOrdinalMeta();var o=this._nameList,a=this._idList,s=i.getSource().sourceFormat,l=s===Nl;if(l&&!i.pure)for(var c=[],u=e;u<n;u++){var f=i.getItem(u,c);if(!this.hasItemOption&&B5e(f)&&(this.hasItemOption=!0),f){var d=f.name;o[u]==null&&d!=null&&(o[u]=Pl(d,null));var h=f.id;a[u]==null&&h!=null&&(a[u]=Pl(h,null))}}if(this._shouldMakeIdFromName())for(var u=e;u<n;u++)l7(this,u);TH(this)}},t.prototype.getApproximateExtent=function(e){return this._approximateExtent[e]||this._store.getDataExtent(this._getStoreDimIndex(e))},t.prototype.setApproximateExtent=function(e,n){n=this.getDimension(n),this._approximateExtent[n]=e.slice()},t.prototype.getCalculationInfo=function(e){return this._calculationInfo[e]},t.prototype.setCalculationInfo=function(e,n){Qy(e)?ot(this._calculationInfo,e):this._calculationInfo[e]=n},t.prototype.getName=function(e){var n=this.getRawIndex(e),r=this._nameList[n];return r==null&&this._nameDimIdx!=null&&(r=eb(this,this._nameDimIdx,n)),r==null&&(r=""),r},t.prototype._getCategory=function(e,n){var r=this._store.get(e,n),i=this._store.getOrdinalMeta(e);return i?i.categories[r]:r},t.prototype.getId=function(e){return tk(this,this.getRawIndex(e))},t.prototype.count=function(){return this._store.count()},t.prototype.get=function(e,n){var r=this._store,i=this._dimInfos[e];if(i)return r.get(i.storeDimIndex,n)},t.prototype.getByRawIndex=function(e,n){var r=this._store,i=this._dimInfos[e];if(i)return r.getByRawIndex(i.storeDimIndex,n)},t.prototype.getIndices=function(){return this._store.getIndices()},t.prototype.getDataExtent=function(e){return this._store.getDataExtent(this._getStoreDimIndex(e))},t.prototype.getSum=function(e){return this._store.getSum(this._getStoreDimIndex(e))},t.prototype.getMedian=function(e){return this._store.getMedian(this._getStoreDimIndex(e))},t.prototype.getValues=function(e,n){var r=this,i=this._store;return mt(e)?i.getValues(rd(e,function(o){return r._getStoreDimIndex(o)}),n):i.getValues(e)},t.prototype.hasValue=function(e){for(var n=this._dimSummary.dataDimIndicesOnCoord,r=0,i=n.length;r<i;r++)if(isNaN(this._store.get(n[r],e)))return!1;return!0},t.prototype.indexOfName=function(e){for(var n=0,r=this._store.count();n<r;n++)if(this.getName(n)===e)return n;return-1},t.prototype.getRawIndex=function(e){return this._store.getRawIndex(e)},t.prototype.indexOfRawIndex=function(e){return this._store.indexOfRawIndex(e)},t.prototype.rawIndexOf=function(e,n){var r=e&&this._invertedIndicesMap[e],i=r[n];return i==null||isNaN(i)?CH:i},t.prototype.indicesOfNearest=function(e,n,r){return this._store.indicesOfNearest(this._getStoreDimIndex(e),n,r)},t.prototype.each=function(e,n,r){Qn(e)&&(r=n,n=e,e=[]);var i=r||this,o=rd(tb(e),this._getStoreDimIndex,this);this._store.each(o,i?Or(n,i):n)},t.prototype.filterSelf=function(e,n,r){Qn(e)&&(r=n,n=e,e=[]);var i=r||this,o=rd(tb(e),this._getStoreDimIndex,this);return this._store=this._store.filter(o,i?Or(n,i):n),this},t.prototype.selectRange=function(e){var n=this,r={},i=ir(e);return be(i,function(o){var a=n._getStoreDimIndex(o);r[a]=e[o]}),this._store=this._store.selectRange(r),this},t.prototype.mapArray=function(e,n,r){Qn(e)&&(r=n,n=e,e=[]),r=r||this;var i=[];return this.each(e,function(){i.push(n&&n.apply(this,arguments))},r),i},t.prototype.map=function(e,n,r,i){var o=r||i||this,a=rd(tb(e),this._getStoreDimIndex,this),s=nk(this);return s._store=this._store.map(a,o?Or(n,o):n),s},t.prototype.modify=function(e,n,r,i){var o=r||i||this,a=rd(tb(e),this._getStoreDimIndex,this);this._store.modify(a,o?Or(n,o):n)},t.prototype.downSample=function(e,n,r,i){var o=nk(this);return o._store=this._store.downSample(this._getStoreDimIndex(e),n,r,i),o},t.prototype.lttbDownSample=function(e,n){var r=nk(this);return r._store=this._store.lttbDownSample(this._getStoreDimIndex(e),n),r},t.prototype.getRawDataItem=function(e){return this._store.getRawDataItem(e)},t.prototype.getItemModel=function(e){var n=this.hostModel,r=this.getRawDataItem(e);return new co(r,n,n&&n.ecModel)},t.prototype.diff=function(e){var n=this;return new Are(e?e.getStore().getIndices():[],this.getStore().getIndices(),function(r){return tk(e,r)},function(r){return tk(n,r)})},t.prototype.getVisual=function(e){var n=this._visual;return n&&n[e]},t.prototype.setVisual=function(e,n){this._visual=this._visual||{},Qy(e)?ot(this._visual,e):this._visual[e]=n},t.prototype.getItemVisual=function(e,n){var r=this._itemVisuals[e],i=r&&r[n];return i??this.getVisual(n)},t.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},t.prototype.ensureUniqueItemVisual=function(e,n){var r=this._itemVisuals,i=r[e];i||(i=r[e]={});var o=i[n];return o==null&&(o=this.getVisual(n),mt(o)?o=o.slice():Qy(o)&&(o=ot({},o)),i[n]=o),o},t.prototype.setItemVisual=function(e,n,r){var i=this._itemVisuals[e]||{};this._itemVisuals[e]=i,Qy(n)?ot(i,n):i[n]=r},t.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},t.prototype.setLayout=function(e,n){Qy(e)?ot(this._layout,e):this._layout[e]=n},t.prototype.getLayout=function(e){return this._layout[e]},t.prototype.getItemLayout=function(e){return this._itemLayouts[e]},t.prototype.setItemLayout=function(e,n,r){this._itemLayouts[e]=r?ot(this._itemLayouts[e]||{},n):n},t.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},t.prototype.setItemGraphicEl=function(e,n){var r=this.hostModel&&this.hostModel.seriesIndex;e7e(r,this.dataType,e,n),this._graphicEls[e]=n},t.prototype.getItemGraphicEl=function(e){return this._graphicEls[e]},t.prototype.eachItemGraphicEl=function(e,n){be(this._graphicEls,function(r,i){r&&e&&e.call(n,r,i)})},t.prototype.cloneShallow=function(e){return e||(e=new t(this._schema?this._schema:rd(this.dimensions,this._getDimInfo,this),this.hostModel)),s7(e,this),e._store=this._store,e},t.prototype.wrapMethod=function(e,n){var r=this[e];Qn(r)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(e),this[e]=function(){var i=r.apply(this,arguments);return n.apply(this,[i].concat(ZI(arguments)))})},t.internalField=function(){TH=function(e){var n=e._invertedIndicesMap;be(n,function(r,i){var o=e._dimInfos[i],a=o.ordinalMeta,s=e._store;if(a){r=n[i]=new n6e(a.categories.length);for(var l=0;l<r.length;l++)r[l]=CH;for(var l=0;l<s.count();l++)r[s.get(o.storeDimIndex,l)]=l}})},eb=function(e,n,r){return Pl(e._getCategory(n,r),null)},tk=function(e,n){var r=e._idList[n];return r==null&&e._idDimIdx!=null&&(r=eb(e,e._idDimIdx,n)),r==null&&(r=r6e+n),r},tb=function(e){return mt(e)||(e=e!=null?[e]:[]),e},nk=function(e){var n=new t(e._schema?e._schema:rd(e.dimensions,e._getDimInfo,e),e.hostModel);return s7(n,e),n},s7=function(e,n){be(i6e.concat(n.__wrappedMethods||[]),function(r){n.hasOwnProperty(r)&&(e[r]=n[r])}),e.__wrappedMethods=n.__wrappedMethods,be(o6e,function(r){e[r]=Gn(n[r])}),e._calculationInfo=ot({},n._calculationInfo)},l7=function(e,n){var r=e._nameList,i=e._idList,o=e._nameDimIdx,a=e._idDimIdx,s=r[n],l=i[n];if(s==null&&o!=null&&(r[n]=s=eb(e,o,n)),l==null&&a!=null&&(i[n]=l=eb(e,a,n)),l==null&&s!=null){var c=e._nameRepeatCount,u=c[s]=(c[s]||0)+1;l=s,u>1&&(l+="__ec__"+u),i[n]=l}}}(),t}();const s2=a6e;function t3(t,e){I$(t)||(t=$$(t)),e=e||{};var n=e.coordDimensions||[],r=e.dimensionsDefine||t.dimensionsDefine||[],i=vn(),o=[],a=l6e(t,n,r,e.dimensionsCount),s=e.canOmitUnusedDimensions&&$re(a),l=r===t.dimensionsDefine,c=l?Ire(t):Ore(r),u=e.encodeDefine;!u&&e.encodeDefaulter&&(u=e.encodeDefaulter(t,a));for(var f=vn(u),d=new jne(a),h=0;h<d.length;h++)d[h]=-1;function g(I){var D=d[I];if(D<0){var F=r[I],R=jt(F)?F:{name:F},z=new kx,B=R.name;B!=null&&c.get(B)!=null&&(z.name=z.displayName=B),R.type!=null&&(z.type=R.type),R.displayName!=null&&(z.displayName=R.displayName);var ie=o.length;return d[I]=ie,z.storeDimIndex=I,o.push(z),z}return o[D]}if(!s)for(var h=0;h<a;h++)g(h);f.each(function(I,D){var F=Zo(I).slice();if(F.length===1&&!Ot(F[0])&&F[0]<0){f.set(D,!1);return}var R=f.set(D,[]);be(F,function(z,B){var ie=Ot(z)?c.get(z):z;ie!=null&&ie<a&&(R[B]=ie,S(g(ie),D,B))})});var y=0;be(n,function(I){var D,F,R,z;if(Ot(I))D=I,z={};else{z=I,D=z.name;var B=z.ordinalMeta;z.ordinalMeta=null,z=ot({},z),z.ordinalMeta=B,F=z.dimsDef,R=z.otherDims,z.name=z.coordDim=z.coordDimIndex=z.dimsDef=z.otherDims=null}var ie=f.get(D);if(ie!==!1){if(ie=Zo(ie),!ie.length)for(var oe=0;oe<(F&&F.length||1);oe++){for(;y<a&&g(y).coordDim!=null;)y++;y<a&&ie.push(y++)}be(ie,function(_e,Ae){var Pe=g(_e);if(l&&z.type!=null&&(Pe.type=z.type),S(gi(Pe,z),D,Ae),Pe.name==null&&F){var Se=F[Ae];!jt(Se)&&(Se={name:Se}),Pe.name=Pe.displayName=Se.name,Pe.defaultTooltip=Se.defaultTooltip}R&&gi(Pe.otherDims,R)})}});function S(I,D,F){xne.get(D)!=null?I.otherDims[D]=F:(I.coordDim=D,I.coordDimIndex=F,i.set(D,!0))}var v=e.generateCoord,_=e.generateCoordCount,x=_!=null;_=v?_||1:0;var C=v||"value";function k(I){I.name==null&&(I.name=I.coordDim)}if(s)be(o,function(I){k(I)}),o.sort(function(I,D){return I.storeDimIndex-D.storeDimIndex});else for(var m=0;m<a;m++){var T=g(m),E=T.coordDim;E==null&&(T.coordDim=c6e(C,i,x),T.coordDimIndex=0,(!v||_<=0)&&(T.isExtraCoord=!0),_--),k(T),T.type==null&&(Ane(t,m)===bo.Must||T.isExtraCoord&&(T.otherDims.itemName!=null||T.otherDims.seriesName!=null))&&(T.type="ordinal")}return s6e(o),new Pre({source:t,dimensions:o,fullDimensionCount:a,dimensionOmitted:s})}function s6e(t){for(var e=vn(),n=0;n<t.length;n++){var r=t[n],i=r.name,o=e.get(i)||0;o>0&&(r.name=i+(o-1)),o++,e.set(i,o)}}function l6e(t,e,n,r){var i=Math.max(t.dimensionsDetectedCount||1,e.length,n.length,r||0);return be(e,function(o){var a;jt(o)&&(a=o.dimsDef)&&(i=Math.max(i,a.length))}),i}function c6e(t,e,n){if(n||e.hasKey(t)){for(var r=0;e.hasKey(t+r);)r++;t+=r}return e.set(t,!0),t}var u6e=function(){function t(e){this.coordSysDims=[],this.axisMap=vn(),this.categoryAxisMap=vn(),this.coordSysName=e}return t}();function f6e(t){var e=t.get("coordinateSystem"),n=new u6e(e),r=d6e[e];if(r)return r(t,n,n.axisMap,n.categoryAxisMap),n}var d6e={cartesian2d:function(t,e,n,r){var i=t.getReferringComponents("xAxis",qp).models[0],o=t.getReferringComponents("yAxis",qp).models[0];e.coordSysDims=["x","y"],n.set("x",i),n.set("y",o),Dm(i)&&(r.set("x",i),e.firstCategoryDimIndex=0),Dm(o)&&(r.set("y",o),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},singleAxis:function(t,e,n,r){var i=t.getReferringComponents("singleAxis",qp).models[0];e.coordSysDims=["single"],n.set("single",i),Dm(i)&&(r.set("single",i),e.firstCategoryDimIndex=0)},polar:function(t,e,n,r){var i=t.getReferringComponents("polar",qp).models[0],o=i.findAxisModel("radiusAxis"),a=i.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],n.set("radius",o),n.set("angle",a),Dm(o)&&(r.set("radius",o),e.firstCategoryDimIndex=0),Dm(a)&&(r.set("angle",a),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},geo:function(t,e,n,r){e.coordSysDims=["lng","lat"]},parallel:function(t,e,n,r){var i=t.ecModel,o=i.getComponent("parallel",t.get("parallelIndex")),a=e.coordSysDims=o.dimensions.slice();be(o.parallelAxisIndex,function(s,l){var c=i.getComponent("parallelAxis",s),u=a[l];n.set(u,c),Dm(c)&&(r.set(u,c),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=l))})}};function Dm(t){return t.get("type")==="category"}function h6e(t,e,n){n=n||{};var r=n.byIndex,i=n.stackedCoordDimension,o,a,s;p6e(e)?o=e:(a=e.schema,o=a.dimensions,s=e.store);var l=!!(t&&t.get("stack")),c,u,f,d;if(be(o,function(_,x){Ot(_)&&(o[x]=_={name:_}),l&&!_.isExtraCoord&&(!r&&!c&&_.ordinalMeta&&(c=_),!u&&_.type!=="ordinal"&&_.type!=="time"&&(!i||i===_.coordDim)&&(u=_))}),u&&!r&&!c&&(r=!0),u){f="__\0ecstackresult_"+t.id,d="__\0ecstackedover_"+t.id,c&&(c.createInvertedIndices=!0);var h=u.coordDim,g=u.type,y=0;be(o,function(_){_.coordDim===h&&y++});var S={name:f,coordDim:h,coordDimIndex:y,type:g,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:o.length},v={name:d,coordDim:d,coordDimIndex:y+1,type:g,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:o.length+1};a?(s&&(S.storeDimIndex=s.ensureCalculationDimension(d,g),v.storeDimIndex=s.ensureCalculationDimension(f,g)),a.appendCalculationDimension(S),a.appendCalculationDimension(v)):(o.push(S),o.push(v))}return{stackedDimension:u&&u.name,stackedByDimension:c&&c.name,isStackedByIndex:r,stackedOverDimension:d,stackResultDimension:f}}function p6e(t){return!Ere(t.schema)}function g6e(t,e){var n=t.get("coordinateSystem"),r=XT.get(n),i;return e&&e.coordSysDims&&(i=tn(e.coordSysDims,function(o){var a={name:o},s=e.axisMap.get(o);if(s){var l=s.get("type");a.type=JOe(l)}return a})),i||(i=r&&(r.getDimensionsInfo?r.getDimensionsInfo():r.dimensions.slice())||["x","y"]),i}function m6e(t,e,n){var r,i;return n&&be(t,function(o,a){var s=o.coordDim,l=n.categoryAxisMap.get(s);l&&(r==null&&(r=a),o.ordinalMeta=l.getOrdinalMeta(),e&&(o.createInvertedIndices=!0)),o.otherDims.itemName!=null&&(i=!0)}),!i&&r!=null&&(t[r].otherDims.itemName=0),r}function v6e(t,e,n){n=n||{};var r=e.getSourceManager(),i,o=!1;t?(o=!0,i=$$(t)):(i=r.getSource(),o=i.sourceFormat===Nl);var a=f6e(e),s=g6e(e,a),l=n.useEncodeDefaulter,c=Qn(l)?l:l?zr(e8e,s,e):null,u={coordDimensions:s,generateCoord:n.generateCoord,encodeDefine:e.getEncode(),encodeDefaulter:c,canOmitUnusedDimensions:!o},f=t3(i,u),d=m6e(f.dimensions,n.createInvertedIndices,a),h=o?null:r.getSharedDataStore(f),g=h6e(e,{schema:f,store:h}),y=new s2(f,e);y.setCalculationInfo(g);var S=d!=null&&y6e(i)?function(v,_,x,C){return C===d?x:this.defaultDimValueGetter(v,_,x,C)}:null;return y.hasItemOption=!1,y.initData(o?i:h,null,S),y}function y6e(t){if(t.sourceFormat===Nl){var e=b6e(t.data||[]);return!mt(uS(e))}}function b6e(t){for(var e=0;e<t.length&&t[e]==null;)e++;return t[e]}function Fre(t,e){return t.type==="category"?t.scale.getLabel(e):e.value}function S6e(t){var e=t.get("interval");return e??"auto"}function _6e(t){return t.type==="category"&&S6e(t.getLabelModel())===0}var AH=[],w6e={registerPreprocessor:xre,registerProcessor:Cre,registerPostInit:jOe,registerPostUpdate:HOe,registerUpdateLifecycle:H$,registerAction:R0,registerCoordinateSystem:UOe,registerLayout:WOe,registerVisual:qg,registerTransform:qOe,registerLoading:Tre,registerMap:GOe,registerImpl:wOe,PRIORITY:DOe,ComponentModel:wi,ComponentView:lh,SeriesModel:Ag,ChartView:Rd,registerComponentModel:function(t){wi.registerClass(t)},registerComponentView:function(t){lh.registerClass(t)},registerSeriesModel:function(t){Ag.registerClass(t)},registerChartView:function(t){Rd.registerClass(t)},registerSubTypeDefaulter:function(t,e){wi.registerSubTypeDefaulter(t,e)},registerPainter:function(t,e){$5e(t,e)}};function Tf(t){if(mt(t)){be(t,function(e){Tf(e)});return}wr(AH,t)>=0||(AH.push(t),Qn(t)&&(t={install:t}),t.install(w6e))}sh.CMD;function Lre(t,e,n,r,i,o,a,s){var l=i-t,c=o-e,u=n-t,f=r-e,d=Math.sqrt(u*u+f*f);u/=d,f/=d;var h=l*u+c*f,g=h/d;s&&(g=Math.min(Math.max(g,0),1)),g*=d;var y=a[0]=t+g*u,S=a[1]=e+g*f;return Math.sqrt((y-i)*(y-i)+(S-o)*(S-o))}var Cd=new ln,_i=new ln,_o=new ln,Td=new ln,eu=new ln,rC=[],ba=new ln;function k6e(t,e){if(e<=180&&e>0){e=e/180*Math.PI,Cd.fromArray(t[0]),_i.fromArray(t[1]),_o.fromArray(t[2]),ln.sub(Td,Cd,_i),ln.sub(eu,_o,_i);var n=Td.len(),r=eu.len();if(!(n<.001||r<.001)){Td.scale(1/n),eu.scale(1/r);var i=Td.dot(eu),o=Math.cos(e);if(o<i){var a=Lre(_i.x,_i.y,_o.x,_o.y,Cd.x,Cd.y,rC,!1);ba.fromArray(rC),ba.scaleAndAdd(eu,a/Math.tan(Math.PI-e));var s=_o.x!==_i.x?(ba.x-_i.x)/(_o.x-_i.x):(ba.y-_i.y)/(_o.y-_i.y);if(isNaN(s))return;s<0?ln.copy(ba,_i):s>1&&ln.copy(ba,_o),ba.toArray(t[1])}}}}function x6e(t,e,n){if(n<=180&&n>0){n=n/180*Math.PI,Cd.fromArray(t[0]),_i.fromArray(t[1]),_o.fromArray(t[2]),ln.sub(Td,_i,Cd),ln.sub(eu,_o,_i);var r=Td.len(),i=eu.len();if(!(r<.001||i<.001)){Td.scale(1/r),eu.scale(1/i);var o=Td.dot(e),a=Math.cos(n);if(o<a){var s=Lre(_i.x,_i.y,_o.x,_o.y,Cd.x,Cd.y,rC,!1);ba.fromArray(rC);var l=Math.PI/2,c=Math.acos(eu.dot(e)),u=l+c-n;if(u>=l)ln.copy(ba,_o);else{ba.scaleAndAdd(eu,s/Math.tan(Math.PI/2-u));var f=_o.x!==_i.x?(ba.x-_i.x)/(_o.x-_i.x):(ba.y-_i.y)/(_o.y-_i.y);if(isNaN(f))return;f<0?ln.copy(ba,_i):f>1&&ln.copy(ba,_o)}ba.toArray(t[1])}}}}function PH(t,e,n,r){var i=n==="normal",o=i?t:t.ensureState(n);o.ignore=e;var a=r.get("smooth");a&&a===!0&&(a=.3),o.shape=o.shape||{},a>0&&(o.shape.smooth=a);var s=r.getModel("lineStyle").getLineStyle();i?t.useStyle(s):o.style=s}function C6e(t,e){var n=e.smooth,r=e.points;if(r)if(t.moveTo(r[0][0],r[0][1]),n>0&&r.length>=3){var i=t9(r[0],r[1]),o=t9(r[1],r[2]);if(!i||!o){t.lineTo(r[1][0],r[1][1]),t.lineTo(r[2][0],r[2][1]);return}var a=Math.min(i,o)*n,s=rP([],r[1],r[0],a/i),l=rP([],r[1],r[2],a/o),c=rP([],s,l,.5);t.bezierCurveTo(s[0],s[1],s[0],s[1],c[0],c[1]),t.bezierCurveTo(l[0],l[1],l[0],l[1],r[2][0],r[2][1])}else for(var u=1;u<r.length;u++)t.lineTo(r[u][0],r[u][1])}function T6e(t,e,n){var r=t.getTextGuideLine(),i=t.getTextContent();if(!i){r&&t.removeTextGuideLine();return}for(var o=e.normal,a=o.get("show"),s=i.ignore,l=0;l<e2.length;l++){var c=e2[l],u=e[c],f=c==="normal";if(u){var d=u.get("show"),h=f?s:mn(i.states[c]&&i.states[c].ignore,s);if(h||!mn(d,a)){var g=f?r:r&&r.states[c];g&&(g.ignore=!0);continue}r||(r=new GT,t.setTextGuideLine(r),!f&&(s||!a)&&PH(r,!0,"normal",e.normal),t.stateProxy&&(r.stateProxy=t.stateProxy)),PH(r,!1,c,u)}}if(r){gi(r.style,n),r.style.fill=null;var y=o.get("showAbove"),S=t.textGuideLineConfig=t.textGuideLineConfig||{};S.showAbove=y||!1,r.buildPath=C6e}}function A6e(t,e){e=e||"labelLine";for(var n={normal:t.getModel(e)},r=0;r<pc.length;r++){var i=pc[r];n[i]=t.getModel([i,e])}return n}function P6e(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];if(!r.defaultAttr.ignore){var i=r.label,o=i.getComputedTransform(),a=i.getBoundingRect(),s=!o||o[1]<1e-5&&o[2]<1e-5,l=i.style.margin||0,c=a.clone();c.applyTransform(o),c.x-=l/2,c.y-=l/2,c.width+=l,c.height+=l;var u=s?new H4(a,o):null;e.push({label:i,labelLine:r.labelLine,rect:c,localRect:a,obb:u,priority:r.priority,defaultAttr:r.defaultAttr,layoutOption:r.computedLayoutOption,axisAligned:s,transform:o})}}return e}function E6e(t,e,n,r,i,o){var a=t.length;if(a<2)return;t.sort(function(E,I){return E.rect[e]-I.rect[e]});for(var s=0,l,c=!1,u=0,f=0;f<a;f++){var d=t[f],h=d.rect;l=h[e]-s,l<0&&(h[e]-=l,d.label[e]-=l,c=!0);var g=Math.max(-l,0);u+=g,s=h[e]+h[n]}u>0&&o&&k(-u/a,0,a);var y=t[0],S=t[a-1],v,_;x(),v<0&&m(-v,.8),_<0&&m(_,.8),x(),C(v,_,1),C(_,v,-1),x(),v<0&&T(-v),_<0&&T(_);function x(){v=y.rect[e]-r,_=i-S.rect[e]-S.rect[n]}function C(E,I,D){if(E<0){var F=Math.min(I,-E);if(F>0){k(F*D,0,a);var R=F+E;R<0&&m(-R*D,1)}else m(-E*D,1)}}function k(E,I,D){E!==0&&(c=!0);for(var F=I;F<D;F++){var R=t[F],z=R.rect;z[e]+=E,R.label[e]+=E}}function m(E,I){for(var D=[],F=0,R=1;R<a;R++){var z=t[R-1].rect,B=Math.max(t[R].rect[e]-z[e]-z[n],0);D.push(B),F+=B}if(F){var ie=Math.min(Math.abs(E)/F,I);if(E>0)for(var R=0;R<a-1;R++){var oe=D[R]*ie;k(oe,0,R+1)}else for(var R=a-1;R>0;R--){var oe=D[R-1]*ie;k(-oe,R,a)}}}function T(E){var I=E<0?-1:1;E=Math.abs(E);for(var D=Math.ceil(E/(a-1)),F=0;F<a-1;F++)if(I>0?k(D,0,F+1):k(-D,a-F-1,a),E-=D,E<=0)return}return c}function O6e(t,e,n,r){return E6e(t,"y","height",e,n,r)}function I6e(t){var e=[];t.sort(function(y,S){return S.priority-y.priority});var n=new Ir(0,0,0,0);function r(y){if(!y.ignore){var S=y.ensureState("emphasis");S.ignore==null&&(S.ignore=!1)}y.ignore=!0}for(var i=0;i<t.length;i++){var o=t[i],a=o.axisAligned,s=o.localRect,l=o.transform,c=o.label,u=o.labelLine;n.copy(o.rect),n.width-=.1,n.height-=.1,n.x+=.05,n.y+=.05;for(var f=o.obb,d=!1,h=0;h<e.length;h++){var g=e[h];if(n.intersect(g.rect)){if(a&&g.axisAligned){d=!0;break}if(g.obb||(g.obb=new H4(g.localRect,g.transform)),f||(f=new H4(s,l)),f.intersect(g.obb)){d=!0;break}}}d?(r(c),u&&r(u)):(c.attr("ignore",o.defaultAttr.ignore),u&&u.attr("ignore",o.defaultAttr.labelGuideIgnore),e.push(o))}}var c7=null;function $6e(t){return c7||(c7=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){return setTimeout(e,16)}).bind(window)),c7(t)}var u7=null;function F6e(t){u7||(u7=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)}).bind(window)),u7(t)}function L6e(t){var e=document.createElement("style");return e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t)),(document.querySelector("head")||document.body).appendChild(e),e}function rk(t,e){e===void 0&&(e={});var n=document.createElement(t);return Object.keys(e).forEach(function(r){n[r]=e[r]}),n}function Dre(t,e,n){var r=window.getComputedStyle(t,n||null)||{display:"none"};return r[e]}function q9(t){if(!document.documentElement.contains(t))return{detached:!0,rendered:!1};for(var e=t;e!==document;){if(Dre(e,"display")==="none")return{detached:!1,rendered:!1};e=e.parentNode}return{detached:!1,rendered:!0}}var D6e='.resize-triggers{visibility:hidden;opacity:0;pointer-events:none}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}',Y9=0,xx=null;function N6e(t,e){t.__resize_mutation_handler__||(t.__resize_mutation_handler__=z6e.bind(t));var n=t.__resize_listeners__;if(!n){if(t.__resize_listeners__=[],window.ResizeObserver){var r=t.offsetWidth,i=t.offsetHeight,o=new ResizeObserver(function(){!t.__resize_observer_triggered__&&(t.__resize_observer_triggered__=!0,t.offsetWidth===r&&t.offsetHeight===i)||iC(t)}),a=q9(t),s=a.detached,l=a.rendered;t.__resize_observer_triggered__=s===!1&&l===!1,t.__resize_observer__=o,o.observe(t)}else if(t.attachEvent&&t.addEventListener)t.__resize_legacy_resize_handler__=function(){iC(t)},t.attachEvent("onresize",t.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",t.__resize_mutation_handler__);else if(Y9||(xx=L6e(D6e)),V6e(t),t.__resize_rendered__=q9(t).rendered,window.MutationObserver){var c=new MutationObserver(t.__resize_mutation_handler__);c.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),t.__resize_mutation_observer__=c}}t.__resize_listeners__.push(e),Y9++}function M6e(t,e){var n=t.__resize_listeners__;if(n){if(e&&n.splice(n.indexOf(e),1),!n.length||!e){if(t.detachEvent&&t.removeEventListener){t.detachEvent("onresize",t.__resize_legacy_resize_handler__),document.removeEventListener("DOMSubtreeModified",t.__resize_mutation_handler__);return}t.__resize_observer__?(t.__resize_observer__.unobserve(t),t.__resize_observer__.disconnect(),t.__resize_observer__=null):(t.__resize_mutation_observer__&&(t.__resize_mutation_observer__.disconnect(),t.__resize_mutation_observer__=null),t.removeEventListener("scroll",W$),t.removeChild(t.__resize_triggers__.triggers),t.__resize_triggers__=null),t.__resize_listeners__=null}!--Y9&&xx&&xx.parentNode.removeChild(xx)}}function R6e(t){var e=t.__resize_last__,n=e.width,r=e.height,i=t.offsetWidth,o=t.offsetHeight;return i!==n||o!==r?{width:i,height:o}:null}function z6e(){var t=q9(this),e=t.rendered,n=t.detached;e!==this.__resize_rendered__&&(!n&&this.__resize_triggers__&&(G$(this),this.addEventListener("scroll",W$,!0)),this.__resize_rendered__=e,iC(this))}function W$(){var t=this;G$(this),this.__resize_raf__&&F6e(this.__resize_raf__),this.__resize_raf__=$6e(function(){var e=R6e(t);e&&(t.__resize_last__=e,iC(t))})}function iC(t){!t||!t.__resize_listeners__||t.__resize_listeners__.forEach(function(e){e.call(t,t)})}function V6e(t){var e=Dre(t,"position");(!e||e==="static")&&(t.style.position="relative"),t.__resize_old_position__=e,t.__resize_last__={};var n=rk("div",{className:"resize-triggers"}),r=rk("div",{className:"resize-expand-trigger"}),i=rk("div"),o=rk("div",{className:"resize-contract-trigger"});r.appendChild(i),n.appendChild(r),n.appendChild(o),t.appendChild(n),t.__resize_triggers__={triggers:n,expand:r,expandChild:i,contract:o},G$(t),t.addEventListener("scroll",W$,!0),t.__resize_last__={width:t.offsetWidth,height:t.offsetHeight}}function G$(t){var e=t.__resize_triggers__,n=e.expand,r=e.expandChild,i=e.contract,o=i.scrollWidth,a=i.scrollHeight,s=n.offsetWidth,l=n.offsetHeight,c=n.scrollWidth,u=n.scrollHeight;i.scrollLeft=o,i.scrollTop=a,r.style.width=s+1+"px",r.style.height=l+1+"px",n.scrollLeft=c,n.scrollTop=u}var Xu=function(){return Xu=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Xu.apply(this,arguments)};var B6e=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function j6e(t){return e=Object.create(null),B6e.forEach(function(n){e[n]=function(r){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(!t.value)throw new Error("ECharts is not initialized yet.");return t.value[r].apply(t.value,i)}}(n)}),e;var e}var H6e={autoresize:[Boolean,Object]},U6e=/^on[^a-z]/,W6e=function(t){return U6e.test(t)};function ik(t,e){var n=ii(t);return n&&typeof n=="object"&&"value"in n?n.value||e:n||e}var G6e="ecLoadingOptions",q6e={loading:Boolean,loadingOptions:Object},nb=null,Nre="x-vue-echarts",EH=[],rb=[];(function(t,e){if(t&&typeof document<"u"){var n,r=e.prepend===!0?"prepend":"append",i=e.singleTag===!0,o=typeof e.container=="string"?document.querySelector(e.container):document.getElementsByTagName("head")[0];if(i){var a=EH.indexOf(o);a===-1&&(a=EH.push(o)-1,rb[a]={}),n=rb[a]&&rb[a][r]?rb[a][r]:rb[a][r]=s()}else n=s();t.charCodeAt(0)===65279&&(t=t.substring(1)),n.styleSheet?n.styleSheet.cssText+=t:n.appendChild(document.createTextNode(t))}function s(){var l=document.createElement("style");if(l.setAttribute("type","text/css"),e.attributes)for(var c=Object.keys(e.attributes),u=0;u<c.length;u++)l.setAttribute(c[u],e.attributes[c[u]]);var f=r==="prepend"?"afterbegin":"beforeend";return o.insertAdjacentElement(f,l),l}})(`x-vue-echarts{display:block;width:100%;height:100%;min-width:0}x-vue-echarts>[_echarts_instance_]{width:100%;height:100%}
`,{});var Y6e=function(){if(nb!=null)return nb;if(typeof HTMLElement>"u"||typeof customElements>"u")return nb=!1;try{new Function("tag",`class EChartsElement extends HTMLElement {
  __dispose = null;

  disconnectedCallback() {
    if (this.__dispose) {
      this.__dispose();
      this.__dispose = null;
    }
  }
}

if (customElements.get(tag) == null) {
  customElements.define(tag, EChartsElement);
}
`)(Nre)}catch{return nb=!1}return nb=!0}(),Mre="ecTheme",K6e="ecInitOptions",X6e="ecUpdateOptions",J6e=Rt({name:"echarts",props:Xu(Xu({option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean},H6e),q6e),emits:{},inheritAttrs:!1,setup:function(t,e){var n=e.attrs,r=ru(),i=ru(),o=ru(),a=ru(),s=Ni(Mre,null),l=Ni(K6e,null),c=Ni(X6e,null),u=W6(t),f=u.autoresize,d=u.manualUpdate,h=u.loading,g=u.loadingOptions,y=Fn(function(){return a.value||t.option||null}),S=Fn(function(){return t.theme||ik(s,{})}),v=Fn(function(){return t.initOptions||ik(l,{})}),_=Fn(function(){return t.updateOptions||ik(c,{})}),x=Fn(function(){return function(I){var D={};for(var F in I)W6e(F)||(D[F]=I[F]);return D}(n)}),C=bc().proxy.$listeners;function k(I){if(i.value){var D=o.value=VOe(i.value,S.value,v.value);t.group&&(D.group=t.group);var F=C;F||(F={},Object.keys(n).filter(function(z){return z.indexOf("on")===0&&z.length>2}).forEach(function(z){var B=z.charAt(2).toLowerCase()+z.slice(3);B.substring(B.length-4)==="Once"&&(B="~".concat(B.substring(0,B.length-4))),F[B]=n[z]})),Object.keys(F).forEach(function(z){var B=F[z];if(B){var ie=z.toLowerCase();ie.charAt(0)==="~"&&(ie=ie.substring(1),B.__once__=!0);var oe=D;if(ie.indexOf("zr:")===0&&(oe=D.getZr(),ie=ie.substring(3)),B.__once__){delete B.__once__;var _e=B;B=function(){for(var Ae=[],Pe=0;Pe<arguments.length;Pe++)Ae[Pe]=arguments[Pe];_e.apply(void 0,Ae),oe.off(ie,B)}}oe.on(ie,B)}}),f.value?P0(function(){D&&!D.isDisposed()&&D.resize(),R()}):R()}function R(){var z=I||y.value;z&&D.setOption(z,_.value)}}function m(){o.value&&(o.value.dispose(),o.value=void 0)}var T=null;ki(d,function(I){typeof T=="function"&&(T(),T=null),I||(T=ki(function(){return t.option},function(D,F){D&&(o.value?o.value.setOption(D,Xu({notMerge:D!==F},_.value)):k())},{deep:!0}))},{immediate:!0}),ki([S,v],function(){m(),k()},{deep:!0}),BE(function(){t.group&&o.value&&(o.value.group=t.group)});var E=j6e(o);return function(I,D,F){var R=Ni(G6e,{}),z=Fn(function(){return Xu(Xu({},ik(R,{})),F==null?void 0:F.value)});BE(function(){var B=I.value;B&&(D.value?B.showLoading(z.value):B.hideLoading())})}(o,h,g),function(I,D,F){var R=null;ki([F,I,D],function(z,B,ie){var oe=z[0],_e=z[1],Ae=z[2];if(oe&&_e&&Ae){var Pe=Ae===!0?{}:Ae,Se=Pe.throttle,se=Se===void 0?100:Se,ne=Pe.onResize,J=function(){_e.resize(),ne==null||ne()};R=se?M$(J,se):J,N6e(oe,R)}ie(function(){oe&&R&&M6e(oe,R)})})}(o,f,i),Bg(function(){k()}),E0(function(){Y6e&&r.value?r.value.__dispose=m:m()}),Xu({chart:o,root:r,inner:i,setOption:function(I,D){t.manualUpdate&&(a.value=I),o.value?o.value.setOption(I,D||{}):k(I)},nonEventAttrs:x},E)},render:function(){var t=Xu({},this.nonEventAttrs);return t.ref="root",t.class=t.class?["echarts"].concat(t.class):"echarts",Xd(Nre,t,[Xd("div",{ref:"inner"})])}});const ta=F0("uiState",{state:()=>({uiAssistMode:"expert",mode:Kde,showModal:"none",showEditor:"none",lastSelectedID:""}),actions:{setMode(t){this.mode=t},setModal(t,e=""){this.showModal=t,this.lastSelectedID=e}}});function lu(t){"@babel/helpers - typeof";return lu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lu(t)}function Rre(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function OH(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function zre(t,e,n){return e&&OH(t.prototype,e),n&&OH(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Z6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c2(t,e)}function l2(t){return l2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},l2(t)}function c2(t,e){return c2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},c2(t,e)}function Vre(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function u1(t,e,n){return Vre()?u1=Reflect.construct.bind():u1=function(i,o,a){var s=[null];s.push.apply(s,o);var l=Function.bind.apply(i,s),c=new l;return a&&c2(c,a.prototype),c},u1.apply(null,arguments)}function Q6e(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function K9(t){var e=typeof Map=="function"?new Map:void 0;return K9=function(r){if(r===null||!Q6e(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return u1(r,arguments,l2(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),c2(i,r)},K9(t)}function eIe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tIe(t,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eIe(t)}function nIe(t){var e=Vre();return function(){var r=l2(t),i;if(e){var o=l2(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return tIe(this,i)}}function rIe(t){return iIe(t)||oIe(t)||Bre(t)||aIe()}function iIe(t){if(Array.isArray(t))return X9(t)}function oIe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Bre(t,e){if(t){if(typeof t=="string")return X9(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X9(t,e)}}function X9(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function aIe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sIe(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Bre(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,a=!1,s;return{s:function(){n=n.call(t)},n:function(){var l=n.next();return o=l.done,l},e:function(l){a=!0,s=l},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(a)throw s}}}}var qa=Object.prototype.hasOwnProperty;function gp(t,e){return t=t.slice(),t.push(e),t}function J9(t,e){return e=e.slice(),e.unshift(t),e}var lIe=function(t){Z6e(n,t);var e=nIe(n);function n(r){var i;return Rre(this,n),i=e.call(this,'JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)'),i.avoidNew=!0,i.value=r,i.name="NewError",i}return zre(n)}(K9(Error));function _r(t,e,n,r,i){if(!(this instanceof _r))try{return new _r(t,e,n,r,i)}catch(l){if(!l.avoidNew)throw l;return l.value}typeof t=="string"&&(i=r,r=n,n=e,e=t,t=null);var o=t&&lu(t)==="object";if(t=t||{},this.json=t.json||n,this.path=t.path||e,this.resultType=t.resultType||"value",this.flatten=t.flatten||!1,this.wrap=qa.call(t,"wrap")?t.wrap:!0,this.sandbox=t.sandbox||{},this.preventEval=t.preventEval||!1,this.parent=t.parent||null,this.parentProperty=t.parentProperty||null,this.callback=t.callback||r||null,this.otherTypeCallback=t.otherTypeCallback||i||function(){throw new TypeError("You must supply an otherTypeCallback callback option with the @other() operator.")},t.autostart!==!1){var a={path:o?t.path:e};o?"json"in t&&(a.json=t.json):a.json=n;var s=this.evaluate(a);if(!s||lu(s)!=="object")throw new lIe(s);return s}}_r.prototype.evaluate=function(t,e,n,r){var i=this,o=this.parent,a=this.parentProperty,s=this.flatten,l=this.wrap;if(this.currResultType=this.resultType,this.currPreventEval=this.preventEval,this.currSandbox=this.sandbox,n=n||this.callback,this.currOtherTypeCallback=r||this.otherTypeCallback,e=e||this.json,t=t||this.path,t&&lu(t)==="object"&&!Array.isArray(t)){if(!t.path&&t.path!=="")throw new TypeError('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');if(!qa.call(t,"json"))throw new TypeError('You must supply a "json" property when providing an object argument to JSONPath.evaluate().');var c=t;e=c.json,s=qa.call(t,"flatten")?t.flatten:s,this.currResultType=qa.call(t,"resultType")?t.resultType:this.currResultType,this.currSandbox=qa.call(t,"sandbox")?t.sandbox:this.currSandbox,l=qa.call(t,"wrap")?t.wrap:l,this.currPreventEval=qa.call(t,"preventEval")?t.preventEval:this.currPreventEval,n=qa.call(t,"callback")?t.callback:n,this.currOtherTypeCallback=qa.call(t,"otherTypeCallback")?t.otherTypeCallback:this.currOtherTypeCallback,o=qa.call(t,"parent")?t.parent:o,a=qa.call(t,"parentProperty")?t.parentProperty:a,t=t.path}if(o=o||null,a=a||null,Array.isArray(t)&&(t=_r.toPathString(t)),!(!t&&t!==""||!e)){var u=_r.toPathArray(t);u[0]==="$"&&u.length>1&&u.shift(),this._hasParentSelector=null;var f=this._trace(u,e,["$"],o,a,n).filter(function(d){return d&&!d.isParentSelector});return f.length?!l&&f.length===1&&!f[0].hasArrExpr?this._getPreferredOutput(f[0]):f.reduce(function(d,h){var g=i._getPreferredOutput(h);return s&&Array.isArray(g)?d=d.concat(g):d.push(g),d},[]):l?[]:void 0}};_r.prototype._getPreferredOutput=function(t){var e=this.currResultType;switch(e){case"all":{var n=Array.isArray(t.path)?t.path:_r.toPathArray(t.path);return t.pointer=_r.toPointer(n),t.path=typeof t.path=="string"?t.path:_r.toPathString(t.path),t}case"value":case"parent":case"parentProperty":return t[e];case"path":return _r.toPathString(t[e]);case"pointer":return _r.toPointer(t.path);default:throw new TypeError("Unknown result type")}};_r.prototype._handleCallback=function(t,e,n){if(e){var r=this._getPreferredOutput(t);t.path=typeof t.path=="string"?t.path:_r.toPathString(t.path),e(r,n,t)}};_r.prototype._trace=function(t,e,n,r,i,o,a,s){var l=this,c;if(!t.length)return c={path:n,value:e,parent:r,parentProperty:i,hasArrExpr:a},this._handleCallback(c,o,"value"),c;var u=t[0],f=t.slice(1),d=[];function h(F){Array.isArray(F)?F.forEach(function(R){d.push(R)}):d.push(F)}if((typeof u!="string"||s)&&e&&qa.call(e,u))h(this._trace(f,e[u],gp(n,u),e,u,o,a));else if(u==="*")this._walk(e,function(F){h(l._trace(f,e[F],gp(n,F),e,F,o,!0,!0))});else if(u==="..")h(this._trace(f,e,n,r,i,o,a)),this._walk(e,function(F){lu(e[F])==="object"&&h(l._trace(t.slice(),e[F],gp(n,F),e,F,o,!0))});else{if(u==="^")return this._hasParentSelector=!0,{path:n.slice(0,-1),expr:f,isParentSelector:!0};if(u==="~")return c={path:gp(n,u),value:i,parent:r,parentProperty:null},this._handleCallback(c,o,"property"),c;if(u==="$")h(this._trace(f,e,n,null,null,o,a));else if(/^(\x2D?[0-9]*):(\x2D?[0-9]*):?([0-9]*)$/.test(u))h(this._slice(u,f,e,n,r,i,o));else if(u.indexOf("?(")===0){if(this.currPreventEval)throw new Error("Eval [?(expr)] prevented in JSONPath expression.");var g=u.replace(/^\?\(((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?)\)$/,"$1");this._walk(e,function(F){l._eval(g,e[F],F,n,r,i)&&h(l._trace(f,e[F],gp(n,F),e,F,o,!0))})}else if(u[0]==="("){if(this.currPreventEval)throw new Error("Eval [(expr)] prevented in JSONPath expression.");h(this._trace(J9(this._eval(u,e,n[n.length-1],n.slice(0,-1),r,i),f),e,n,r,i,o,a))}else if(u[0]==="@"){var y=!1,S=u.slice(1,-2);switch(S){case"scalar":(!e||!["object","function"].includes(lu(e)))&&(y=!0);break;case"boolean":case"string":case"undefined":case"function":lu(e)===S&&(y=!0);break;case"integer":Number.isFinite(e)&&!(e%1)&&(y=!0);break;case"number":Number.isFinite(e)&&(y=!0);break;case"nonFinite":typeof e=="number"&&!Number.isFinite(e)&&(y=!0);break;case"object":e&&lu(e)===S&&(y=!0);break;case"array":Array.isArray(e)&&(y=!0);break;case"other":y=this.currOtherTypeCallback(e,n,r,i);break;case"null":e===null&&(y=!0);break;default:throw new TypeError("Unknown value type "+S)}if(y)return c={path:n,value:e,parent:r,parentProperty:i},this._handleCallback(c,o,"value"),c}else if(u[0]==="`"&&e&&qa.call(e,u.slice(1))){var v=u.slice(1);h(this._trace(f,e[v],gp(n,v),e,v,o,a,!0))}else if(u.includes(",")){var _=u.split(","),x=sIe(_),C;try{for(x.s();!(C=x.n()).done;){var k=C.value;h(this._trace(J9(k,f),e,n,r,i,o,!0))}}catch(F){x.e(F)}finally{x.f()}}else!s&&e&&qa.call(e,u)&&h(this._trace(f,e[u],gp(n,u),e,u,o,a,!0))}if(this._hasParentSelector)for(var m=0;m<d.length;m++){var T=d[m];if(T&&T.isParentSelector){var E=this._trace(T.expr,e,T.path,r,i,o,a);if(Array.isArray(E)){d[m]=E[0];for(var I=E.length,D=1;D<I;D++)m++,d.splice(m,0,E[D])}else d[m]=E}}return d};_r.prototype._walk=function(t,e){if(Array.isArray(t))for(var n=t.length,r=0;r<n;r++)e(r);else t&&lu(t)==="object"&&Object.keys(t).forEach(function(i){e(i)})};_r.prototype._slice=function(t,e,n,r,i,o,a){if(Array.isArray(n)){var s=n.length,l=t.split(":"),c=l[2]&&Number.parseInt(l[2])||1,u=l[0]&&Number.parseInt(l[0])||0,f=l[1]&&Number.parseInt(l[1])||s;u=u<0?Math.max(0,u+s):Math.min(s,u),f=f<0?Math.max(0,f+s):Math.min(s,f);for(var d=[],h=u;h<f;h+=c){var g=this._trace(J9(h,e),n,r,i,o,a,!0);g.forEach(function(y){d.push(y)})}return d}};_r.prototype._eval=function(t,e,n,r,i,o){this.currSandbox._$_parentProperty=o,this.currSandbox._$_parent=i,this.currSandbox._$_property=n,this.currSandbox._$_root=this.json,this.currSandbox._$_v=e;var a=t.includes("@path");a&&(this.currSandbox._$_path=_r.toPathString(r.concat([n])));var s="script:"+t;if(!_r.cache[s]){var l=t.replace(/@parentProperty/g,"_$_parentProperty").replace(/@parent/g,"_$_parent").replace(/@property/g,"_$_property").replace(/@root/g,"_$_root").replace(/@([\t-\r \)\.\[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])/g,"_$_v$1");a&&(l=l.replace(/@path/g,"_$_path")),_r.cache[s]=new this.vm.Script(l)}try{return _r.cache[s].runInNewContext(this.currSandbox)}catch(c){throw new Error("jsonPath: "+c.message+": "+t)}};_r.cache={};_r.toPathString=function(t){for(var e=t,n=e.length,r="$",i=1;i<n;i++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(e[i])||(r+=/^[\*0-9]+$/.test(e[i])?"["+e[i]+"]":"['"+e[i]+"']");return r};_r.toPointer=function(t){for(var e=t,n=e.length,r="",i=1;i<n;i++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(e[i])||(r+="/"+e[i].toString().replace(/~/g,"~0").replace(/\//g,"~1"));return r};_r.toPathArray=function(t){var e=_r.cache;if(e[t])return e[t].concat();var n=[],r=t.replace(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/g,";$&;").replace(/['\[](\??\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\))['\]]/g,function(o,a){return"[#"+(n.push(a)-1)+"]"}).replace(/\[["']((?:(?!['\]])[\s\S])*)["']\]/g,function(o,a){return"['"+a.replace(/\./g,"%@%").replace(/~/g,"%%@@%%")+"']"}).replace(/~/g,";~;").replace(/["']?\.["']?(?!(?:(?!\[)[\s\S])*\])|\[["']?/g,";").replace(/%@%/g,".").replace(/%%@@%%/g,"~").replace(/(?:;)?(\^+)(?:;)?/g,function(o,a){return";"+a.split("").join(";")+";"}).replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,""),i=r.split(";").map(function(o){var a=o.match(/#([0-9]+)/);return!a||!a[1]?o:n[a[1]]});return e[t]=i,e[t].concat()};var cIe=function(e,n,r){for(var i=e.length,o=0;o<i;o++){var a=e[o];r(a)&&n.push(e.splice(o--,1)[0])}},uIe=function(){function t(e){Rre(this,t),this.code=e}return zre(t,[{key:"runInNewContext",value:function(n){var r=this.code,i=Object.keys(n),o=[];cIe(i,o,function(u){return typeof n[u]=="function"});var a=i.map(function(u,f){return n[u]}),s=o.reduce(function(u,f){var d=n[f].toString();return/function/.test(d)||(d="function "+d),"var "+f+"="+d+";"+u},"");r=s+r,!/(["'])use strict\1/.test(r)&&!i.includes("arguments")&&(r="var arguments = undefined;"+r),r=r.replace(/;[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*$/,"");var l=r.lastIndexOf(";"),c=l>-1?r.slice(0,l+1)+" return "+r.slice(l+1):" return "+r;return u1(Function,i.concat([c])).apply(void 0,rIe(a))}}]),t}();_r.prototype.vm={Script:uIe};function fIe(t,e){return _r({resultType:"pointer",path:e,json:t})}var ui=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function jre(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){if(this instanceof r){var i=[null];i.push.apply(i,arguments);var o=Function.bind.apply(e,i);return new o}return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var dIe=Object.prototype.hasOwnProperty,hIe=Object.prototype.toString,pIe=function(e,n,r){if(hIe.call(n)!=="[object Function]")throw new TypeError("iterator must be a function");var i=e.length;if(i===+i)for(var o=0;o<i;o++)n.call(r,e[o],o,e);else for(var a in e)dIe.call(e,a)&&n.call(r,e[a],a,e)},gIe=pIe,ch=Er;function Er(t,e,n){if(arguments.length===3)return Er.set(t,e,n);if(arguments.length===2)return Er.get(t,e);var r=Er.bind(Er,t);for(var i in Er)Er.hasOwnProperty(i)&&(r[i]=Er[i].bind(r,t));return r}Er.get=function(e,n){for(var r=Array.isArray(n)?n:Er.parse(n),i=0;i<r.length;++i){var o=r[i];if(!(typeof e=="object"&&o in e))throw new Error("Invalid reference token: "+o);e=e[o]}return e};Er.set=function(e,n,r){var i=Array.isArray(n)?n:Er.parse(n),o=i[0];if(i.length===0)throw Error("Can not set the root object");for(var a=0;a<i.length-1;++a){var s=i[a];typeof s!="string"&&typeof s!="number"&&(s=String(s)),!(s==="__proto__"||s==="constructor"||s==="prototype")&&(s==="-"&&Array.isArray(e)&&(s=e.length),o=i[a+1],s in e||(o.match(/^(\d+|-)$/)?e[s]=[]:e[s]={}),e=e[s])}return o==="-"&&Array.isArray(e)&&(o=e.length),e[o]=r,this};Er.remove=function(t,e){var n=Array.isArray(e)?e:Er.parse(e),r=n[n.length-1];if(r===void 0)throw new Error('Invalid JSON pointer for remove: "'+e+'"');var i=Er.get(t,n.slice(0,-1));if(Array.isArray(i)){var o=+r;if(r===""&&isNaN(o))throw new Error('Invalid array index: "'+r+'"');Array.prototype.splice.call(i,o,1)}else delete i[r]};Er.dict=function(e,n){var r={};return Er.walk(e,function(i,o){r[o]=i},n),r};Er.walk=function(e,n,r){var i=[];r=r||function(o){var a=Object.prototype.toString.call(o);return a==="[object Object]"||a==="[object Array]"},function o(a){gIe(a,function(s,l){i.push(String(l)),r(s)?o(s):n(s,Er.compile(i)),i.pop()})}(e)};Er.has=function(e,n){try{Er.get(e,n)}catch{return!1}return!0};Er.escape=function(e){return e.toString().replace(/~/g,"~0").replace(/\//g,"~1")};Er.unescape=function(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")};Er.parse=function(e){if(e==="")return[];if(e.charAt(0)!=="/")throw new Error("Invalid JSON pointer: "+e);return e.substring(1).split(/\//).map(Er.unescape)};Er.compile=function(e){return e.length===0?"":"/"+e.map(Er.escape).join("/")};function cg(t,e){return ch.get(t,e)}function Hre(t,e){return ch.has(t,e)}function ok(t){return t==="/"||t===""?0:ch.parse(t).length}function IH(t){return t==="/"||t===""?"":ch.compile([ch.parse(t)[0]])}function oC(t){if(t==="/"||t==="")return"";const e=ch.parse(t);return e.length>1?(e.pop(),ch.compile(e)):""}function aC(t){const e=/\["|\.|\[/g,n=/"\]|\]/g;return t.replace(e,"/").replace(n,"")}function u2(t){if(t==="/"||t==="")return"";const e=ch.parse(t).pop();return e||""}function mIe(t,e){return t.sort((n,r)=>{if(n===r)return 0;if(ok(n)>ok(r))return 1;if(ok(n)<ok(r))return-1;{const i=oC(n),o=oC(r);if(i!==o)return 0;{const a=cg(e,i);if(Array.isArray(a)){const s=Number(u2(r));return Number(u2(n))<s?-1:1}else return 0}}})}class $H{constructor(e,n,r,i){Un(this,"id");Un(this,"type");Un(this,"place");Un(this,"transition");Un(this,"_filterExpression");Un(this,"pathExpressions");Un(this,"assignedPathExpression");Un(this,"keyVarValue");Un(this,"valueVarValue");Un(this,"tokenVarValue");Un(this,"_tokenVarName");Un(this,"_valueVarName");Un(this,"_keyVarName");this.id=i,this.type=r,this.place=e,this.transition=n,this._tokenVarName="",this._valueVarName="",this._keyVarName="",this.updateVarNames(this.place.name,!0),this._filterExpression="$.*",r==="postset"&&(this._filterExpression="$"),this.assignedPathExpression=null,this.keyVarValue="",this.valueVarValue="",this.tokenVarValue={},this.pathExpressions=this.applyFilterExpression(this._filterExpression)}updateVarNames(e,n=!1){const r=this.camelize(e);let i;this.type==="preset"?i="input_":i="output_";const o={token:this._tokenVarName,key:this._keyVarName,value:this._valueVarName};this._tokenVarName=i+r+"_token",this._valueVarName=i+r+"_value",this._keyVarName=i+r+"_key";const a={token:this._tokenVarName,key:this._keyVarName,value:this._valueVarName};n||this.transition.updateSnippets(o,a)}camelize(e){const n=e.replace(/\W+(.)/g,function(i,o){return o.toUpperCase()});return n.charAt(0).toLowerCase()+n.slice(1)}get tokenVarName(){return this._tokenVarName}get valueVarName(){return this._valueVarName}get keyVarName(){return this._keyVarName}applyFilterExpression(e){const n=this.place.marking,r=fIe(n,e);return this.pathExpressions=r,r}assignVariablesByIndex(e){const n=this.pathExpressions[e];return this.assignVariablesByPathExpression(n)}assignTokenVariableByIndex(e){const n=this.pathExpressions[e];return this.assignTokenVariableByPathExpression(n)}assignVariablesByPathExpression(e){const n=this.place.marking;this.assignedPathExpression=e,this.keyVarValue=u2(e),this.valueVarValue=cg(n,e);const r=IH(e);return this.tokenVarValue=cg(n,r),{key:this.keyVarValue,value:this.valueVarValue,token:this.tokenVarValue}}assignTokenVariableByPathExpression(e){const n=this.place.marking;this.assignedPathExpression=e;const r=IH(e);return this.tokenVarValue=cg(n,r),{token:this.tokenVarValue}}assignKeyAndValueVariables(e,n){this.keyVarValue=e,this.valueVarValue=n}resetAssignment(){this.assignedPathExpression=null,this.keyVarValue="",this.valueVarValue="",this.tokenVarValue={}}set filterExpression(e){this._filterExpression=e,this.resetAssignment()}get filterExpression(){return this._filterExpression}}function vIe(t,e){if(!Array.isArray(e)&&!(typeof e=="object"&&e!==null))throw Error("should be object or array");if(Array.isArray(e)){if(e.length===0)return e;let n;if(typeof t=="string"){if(n=parseInt(t),isNaN(n))return e.pop(),e}else n=t;return n>=e.length||n<0?(e.pop(),e):(e.splice(n,1),e)}else return delete e[t],e}function yIe(t,e,n){if(!Array.isArray(e)&&!(typeof e=="object"&&e!==null))return n;if(Array.isArray(e)){if(e.length===0)return e.push(n),e;let r;if(typeof t=="string"){if(r=parseInt(t),isNaN(r))return e.push(n),e}else r=t;return r>=e.length||r<0?(e.push(n),e):(e.splice(r,0,n),e)}else return e[t]=n,e}function ak(t,e){if(!Hre(e,t))throw Error("value not valid for path expression");const n=oC(t),r=u2(t),i=cg(e,n);return vIe(r,i),e}function sk(t,e,n,r){if(!Hre(e,t))throw Error("value not valid for path expression");const i=cg(e,t);if(bIe(i))return yIe(n,i,r),e;{const o=oC(t),a=u2(t),s=cg(e,o);return s[a]=r,e}}function bIe(t){return Array.isArray(t)?!0:typeof t=="object"&&t!==null}var Z9={exports:{}},Ure={},hc={},d0={},mS={},_n={},f2={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class e{}t._CodeOrName=e,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends e{constructor(_){if(super(),!t.IDENTIFIER.test(_))throw new Error("CodeGen: name must be a valid identifier");this.str=_}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=n;class r extends e{constructor(_){super(),this._items=typeof _=="string"?[_]:_}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const _=this._items[0];return _===""||_==='""'}get str(){var _;return(_=this._str)!==null&&_!==void 0?_:this._str=this._items.reduce((x,C)=>`${x}${C}`,"")}get names(){var _;return(_=this._names)!==null&&_!==void 0?_:this._names=this._items.reduce((x,C)=>(C instanceof n&&(x[C.str]=(x[C.str]||0)+1),x),{})}}t._Code=r,t.nil=new r("");function i(v,..._){const x=[v[0]];let C=0;for(;C<_.length;)s(x,_[C]),x.push(v[++C]);return new r(x)}t._=i;const o=new r("+");function a(v,..._){const x=[h(v[0])];let C=0;for(;C<_.length;)x.push(o),s(x,_[C]),x.push(o,h(v[++C]));return l(x),new r(x)}t.str=a;function s(v,_){_ instanceof r?v.push(..._._items):_ instanceof n?v.push(_):v.push(f(_))}t.addCodeArg=s;function l(v){let _=1;for(;_<v.length-1;){if(v[_]===o){const x=c(v[_-1],v[_+1]);if(x!==void 0){v.splice(_-1,3,x);continue}v[_++]="+"}_++}}function c(v,_){if(_==='""')return v;if(v==='""')return _;if(typeof v=="string")return _ instanceof n||v[v.length-1]!=='"'?void 0:typeof _!="string"?`${v.slice(0,-1)}${_}"`:_[0]==='"'?v.slice(0,-1)+_.slice(1):void 0;if(typeof _=="string"&&_[0]==='"'&&!(v instanceof n))return`"${v}${_.slice(1)}`}function u(v,_){return _.emptyStr()?v:v.emptyStr()?_:a`${v}${_}`}t.strConcat=u;function f(v){return typeof v=="number"||typeof v=="boolean"||v===null?v:h(Array.isArray(v)?v.join(","):v)}function d(v){return new r(h(v))}t.stringify=d;function h(v){return JSON.stringify(v).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.safeStringify=h;function g(v){return typeof v=="string"&&t.IDENTIFIER.test(v)?new r(`.${v}`):i`[${v}]`}t.getProperty=g;function y(v){if(typeof v=="string"&&t.IDENTIFIER.test(v))return new r(`${v}`);throw new Error(`CodeGen: invalid export name: ${v}, use explicit $id name mapping`)}t.getEsmExportName=y;function S(v){return new r(v.toString())}t.regexpCode=S})(f2);var Q9={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const e=f2;class n extends Error{constructor(c){super(`CodeGen: "code" for ${c} not defined`),this.value=c.value}}var r;(function(l){l[l.Started=0]="Started",l[l.Completed=1]="Completed"})(r=t.UsedValueState||(t.UsedValueState={})),t.varKinds={const:new e.Name("const"),let:new e.Name("let"),var:new e.Name("var")};class i{constructor({prefixes:c,parent:u}={}){this._names={},this._prefixes=c,this._parent=u}toName(c){return c instanceof e.Name?c:this.name(c)}name(c){return new e.Name(this._newName(c))}_newName(c){const u=this._names[c]||this._nameGroup(c);return`${c}${u.index++}`}_nameGroup(c){var u,f;if(!((f=(u=this._parent)===null||u===void 0?void 0:u._prefixes)===null||f===void 0)&&f.has(c)||this._prefixes&&!this._prefixes.has(c))throw new Error(`CodeGen: prefix "${c}" is not allowed in this scope`);return this._names[c]={prefix:c,index:0}}}t.Scope=i;class o extends e.Name{constructor(c,u){super(u),this.prefix=c}setValue(c,{property:u,itemIndex:f}){this.value=c,this.scopePath=(0,e._)`.${new e.Name(u)}[${f}]`}}t.ValueScopeName=o;const a=(0,e._)`\n`;class s extends i{constructor(c){super(c),this._values={},this._scope=c.scope,this.opts={...c,_n:c.lines?a:e.nil}}get(){return this._scope}name(c){return new o(c,this._newName(c))}value(c,u){var f;if(u.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(c),{prefix:h}=d,g=(f=u.key)!==null&&f!==void 0?f:u.ref;let y=this._values[h];if(y){const _=y.get(g);if(_)return _}else y=this._values[h]=new Map;y.set(g,d);const S=this._scope[h]||(this._scope[h]=[]),v=S.length;return S[v]=u.ref,d.setValue(u,{property:h,itemIndex:v}),d}getValue(c,u){const f=this._values[c];if(f)return f.get(u)}scopeRefs(c,u=this._values){return this._reduceValues(u,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,e._)`${c}${f.scopePath}`})}scopeCode(c=this._values,u,f){return this._reduceValues(c,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},u,f)}_reduceValues(c,u,f={},d){let h=e.nil;for(const g in c){const y=c[g];if(!y)continue;const S=f[g]=f[g]||new Map;y.forEach(v=>{if(S.has(v))return;S.set(v,r.Started);let _=u(v);if(_){const x=this.opts.es5?t.varKinds.var:t.varKinds.const;h=(0,e._)`${h}${x} ${v} = ${_};${this.opts._n}`}else if(_=d==null?void 0:d(v))h=(0,e._)`${h}${_}${this.opts._n}`;else throw new n(v);S.set(v,r.Completed)})}return h}}t.ValueScope=s})(Q9);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const e=f2,n=Q9;var r=f2;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return r.Name}});var i=Q9;Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),t.operators={GT:new e._Code(">"),GTE:new e._Code(">="),LT:new e._Code("<"),LTE:new e._Code("<="),EQ:new e._Code("==="),NEQ:new e._Code("!=="),NOT:new e._Code("!"),OR:new e._Code("||"),AND:new e._Code("&&"),ADD:new e._Code("+")};class o{optimizeNodes(){return this}optimizeNames(V,W){return this}}class a extends o{constructor(V,W,ae){super(),this.varKind=V,this.name=W,this.rhs=ae}render({es5:V,_n:W}){const ae=V?n.varKinds.var:this.varKind,te=this.rhs===void 0?"":` = ${this.rhs}`;return`${ae} ${this.name}${te};`+W}optimizeNames(V,W){if(V[this.name.str])return this.rhs&&(this.rhs=B(this.rhs,V,W)),this}get names(){return this.rhs instanceof e._CodeOrName?this.rhs.names:{}}}class s extends o{constructor(V,W,ae){super(),this.lhs=V,this.rhs=W,this.sideEffects=ae}render({_n:V}){return`${this.lhs} = ${this.rhs};`+V}optimizeNames(V,W){if(!(this.lhs instanceof e.Name&&!V[this.lhs.str]&&!this.sideEffects))return this.rhs=B(this.rhs,V,W),this}get names(){const V=this.lhs instanceof e.Name?{}:{...this.lhs.names};return z(V,this.rhs)}}class l extends s{constructor(V,W,ae,te){super(V,ae,te),this.op=W}render({_n:V}){return`${this.lhs} ${this.op}= ${this.rhs};`+V}}class c extends o{constructor(V){super(),this.label=V,this.names={}}render({_n:V}){return`${this.label}:`+V}}class u extends o{constructor(V){super(),this.label=V,this.names={}}render({_n:V}){return`break${this.label?` ${this.label}`:""};`+V}}class f extends o{constructor(V){super(),this.error=V}render({_n:V}){return`throw ${this.error};`+V}get names(){return this.error.names}}class d extends o{constructor(V){super(),this.code=V}render({_n:V}){return`${this.code};`+V}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(V,W){return this.code=B(this.code,V,W),this}get names(){return this.code instanceof e._CodeOrName?this.code.names:{}}}class h extends o{constructor(V=[]){super(),this.nodes=V}render(V){return this.nodes.reduce((W,ae)=>W+ae.render(V),"")}optimizeNodes(){const{nodes:V}=this;let W=V.length;for(;W--;){const ae=V[W].optimizeNodes();Array.isArray(ae)?V.splice(W,1,...ae):ae?V[W]=ae:V.splice(W,1)}return V.length>0?this:void 0}optimizeNames(V,W){const{nodes:ae}=this;let te=ae.length;for(;te--;){const ue=ae[te];ue.optimizeNames(V,W)||(ie(V,ue.names),ae.splice(te,1))}return ae.length>0?this:void 0}get names(){return this.nodes.reduce((V,W)=>R(V,W.names),{})}}class g extends h{render(V){return"{"+V._n+super.render(V)+"}"+V._n}}class y extends h{}class S extends g{}S.kind="else";class v extends g{constructor(V,W){super(W),this.condition=V}render(V){let W=`if(${this.condition})`+super.render(V);return this.else&&(W+="else "+this.else.render(V)),W}optimizeNodes(){super.optimizeNodes();const V=this.condition;if(V===!0)return this.nodes;let W=this.else;if(W){const ae=W.optimizeNodes();W=this.else=Array.isArray(ae)?new S(ae):ae}if(W)return V===!1?W instanceof v?W:W.nodes:this.nodes.length?this:new v(oe(V),W instanceof v?[W]:W.nodes);if(!(V===!1||!this.nodes.length))return this}optimizeNames(V,W){var ae;if(this.else=(ae=this.else)===null||ae===void 0?void 0:ae.optimizeNames(V,W),!!(super.optimizeNames(V,W)||this.else))return this.condition=B(this.condition,V,W),this}get names(){const V=super.names;return z(V,this.condition),this.else&&R(V,this.else.names),V}}v.kind="if";class _ extends g{}_.kind="for";class x extends _{constructor(V){super(),this.iteration=V}render(V){return`for(${this.iteration})`+super.render(V)}optimizeNames(V,W){if(super.optimizeNames(V,W))return this.iteration=B(this.iteration,V,W),this}get names(){return R(super.names,this.iteration.names)}}class C extends _{constructor(V,W,ae,te){super(),this.varKind=V,this.name=W,this.from=ae,this.to=te}render(V){const W=V.es5?n.varKinds.var:this.varKind,{name:ae,from:te,to:ue}=this;return`for(${W} ${ae}=${te}; ${ae}<${ue}; ${ae}++)`+super.render(V)}get names(){const V=z(super.names,this.from);return z(V,this.to)}}class k extends _{constructor(V,W,ae,te){super(),this.loop=V,this.varKind=W,this.name=ae,this.iterable=te}render(V){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(V)}optimizeNames(V,W){if(super.optimizeNames(V,W))return this.iterable=B(this.iterable,V,W),this}get names(){return R(super.names,this.iterable.names)}}class m extends g{constructor(V,W,ae){super(),this.name=V,this.args=W,this.async=ae}render(V){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(V)}}m.kind="func";class T extends h{render(V){return"return "+super.render(V)}}T.kind="return";class E extends g{render(V){let W="try"+super.render(V);return this.catch&&(W+=this.catch.render(V)),this.finally&&(W+=this.finally.render(V)),W}optimizeNodes(){var V,W;return super.optimizeNodes(),(V=this.catch)===null||V===void 0||V.optimizeNodes(),(W=this.finally)===null||W===void 0||W.optimizeNodes(),this}optimizeNames(V,W){var ae,te;return super.optimizeNames(V,W),(ae=this.catch)===null||ae===void 0||ae.optimizeNames(V,W),(te=this.finally)===null||te===void 0||te.optimizeNames(V,W),this}get names(){const V=super.names;return this.catch&&R(V,this.catch.names),this.finally&&R(V,this.finally.names),V}}class I extends g{constructor(V){super(),this.error=V}render(V){return`catch(${this.error})`+super.render(V)}}I.kind="catch";class D extends g{render(V){return"finally"+super.render(V)}}D.kind="finally";class F{constructor(V,W={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...W,_n:W.lines?`
`:""},this._extScope=V,this._scope=new n.Scope({parent:V}),this._nodes=[new y]}toString(){return this._root.render(this.opts)}name(V){return this._scope.name(V)}scopeName(V){return this._extScope.name(V)}scopeValue(V,W){const ae=this._extScope.value(V,W);return(this._values[ae.prefix]||(this._values[ae.prefix]=new Set)).add(ae),ae}getScopeValue(V,W){return this._extScope.getValue(V,W)}scopeRefs(V){return this._extScope.scopeRefs(V,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(V,W,ae,te){const ue=this._scope.toName(W);return ae!==void 0&&te&&(this._constants[ue.str]=ae),this._leafNode(new a(V,ue,ae)),ue}const(V,W,ae){return this._def(n.varKinds.const,V,W,ae)}let(V,W,ae){return this._def(n.varKinds.let,V,W,ae)}var(V,W,ae){return this._def(n.varKinds.var,V,W,ae)}assign(V,W,ae){return this._leafNode(new s(V,W,ae))}add(V,W){return this._leafNode(new l(V,t.operators.ADD,W))}code(V){return typeof V=="function"?V():V!==e.nil&&this._leafNode(new d(V)),this}object(...V){const W=["{"];for(const[ae,te]of V)W.length>1&&W.push(","),W.push(ae),(ae!==te||this.opts.es5)&&(W.push(":"),(0,e.addCodeArg)(W,te));return W.push("}"),new e._Code(W)}if(V,W,ae){if(this._blockNode(new v(V)),W&&ae)this.code(W).else().code(ae).endIf();else if(W)this.code(W).endIf();else if(ae)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(V){return this._elseNode(new v(V))}else(){return this._elseNode(new S)}endIf(){return this._endBlockNode(v,S)}_for(V,W){return this._blockNode(V),W&&this.code(W).endFor(),this}for(V,W){return this._for(new x(V),W)}forRange(V,W,ae,te,ue=this.opts.es5?n.varKinds.var:n.varKinds.let){const ce=this._scope.toName(V);return this._for(new C(ue,ce,W,ae),()=>te(ce))}forOf(V,W,ae,te=n.varKinds.const){const ue=this._scope.toName(V);if(this.opts.es5){const ce=W instanceof e.Name?W:this.var("_arr",W);return this.forRange("_i",0,(0,e._)`${ce}.length`,fe=>{this.var(ue,(0,e._)`${ce}[${fe}]`),ae(ue)})}return this._for(new k("of",te,ue,W),()=>ae(ue))}forIn(V,W,ae,te=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(V,(0,e._)`Object.keys(${W})`,ae);const ue=this._scope.toName(V);return this._for(new k("in",te,ue,W),()=>ae(ue))}endFor(){return this._endBlockNode(_)}label(V){return this._leafNode(new c(V))}break(V){return this._leafNode(new u(V))}return(V){const W=new T;if(this._blockNode(W),this.code(V),W.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(T)}try(V,W,ae){if(!W&&!ae)throw new Error('CodeGen: "try" without "catch" and "finally"');const te=new E;if(this._blockNode(te),this.code(V),W){const ue=this.name("e");this._currNode=te.catch=new I(ue),W(ue)}return ae&&(this._currNode=te.finally=new D,this.code(ae)),this._endBlockNode(I,D)}throw(V){return this._leafNode(new f(V))}block(V,W){return this._blockStarts.push(this._nodes.length),V&&this.code(V).endBlock(W),this}endBlock(V){const W=this._blockStarts.pop();if(W===void 0)throw new Error("CodeGen: not in self-balancing block");const ae=this._nodes.length-W;if(ae<0||V!==void 0&&ae!==V)throw new Error(`CodeGen: wrong number of nodes: ${ae} vs ${V} expected`);return this._nodes.length=W,this}func(V,W=e.nil,ae,te){return this._blockNode(new m(V,W,ae)),te&&this.code(te).endFunc(),this}endFunc(){return this._endBlockNode(m)}optimize(V=1){for(;V-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(V){return this._currNode.nodes.push(V),this}_blockNode(V){this._currNode.nodes.push(V),this._nodes.push(V)}_endBlockNode(V,W){const ae=this._currNode;if(ae instanceof V||W&&ae instanceof W)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${W?`${V.kind}/${W.kind}`:V.kind}"`)}_elseNode(V){const W=this._currNode;if(!(W instanceof v))throw new Error('CodeGen: "else" without "if"');return this._currNode=W.else=V,this}get _root(){return this._nodes[0]}get _currNode(){const V=this._nodes;return V[V.length-1]}set _currNode(V){const W=this._nodes;W[W.length-1]=V}}t.CodeGen=F;function R(J,V){for(const W in V)J[W]=(J[W]||0)+(V[W]||0);return J}function z(J,V){return V instanceof e._CodeOrName?R(J,V.names):J}function B(J,V,W){if(J instanceof e.Name)return ae(J);if(!te(J))return J;return new e._Code(J._items.reduce((ue,ce)=>(ce instanceof e.Name&&(ce=ae(ce)),ce instanceof e._Code?ue.push(...ce._items):ue.push(ce),ue),[]));function ae(ue){const ce=W[ue.str];return ce===void 0||V[ue.str]!==1?ue:(delete V[ue.str],ce)}function te(ue){return ue instanceof e._Code&&ue._items.some(ce=>ce instanceof e.Name&&V[ce.str]===1&&W[ce.str]!==void 0)}}function ie(J,V){for(const W in V)J[W]=(J[W]||0)-(V[W]||0)}function oe(J){return typeof J=="boolean"||typeof J=="number"||J===null?!J:(0,e._)`!${ne(J)}`}t.not=oe;const _e=se(t.operators.AND);function Ae(...J){return J.reduce(_e)}t.and=Ae;const Pe=se(t.operators.OR);function Se(...J){return J.reduce(Pe)}t.or=Se;function se(J){return(V,W)=>V===e.nil?W:W===e.nil?V:(0,e._)`${ne(V)} ${J} ${ne(W)}`}function ne(J){return J instanceof e.Name?J:(0,e._)`(${J})`}})(_n);var er={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.checkStrictMode=t.getErrorPath=t.Type=t.useFunc=t.setEvaluated=t.evaluatedPropsToName=t.mergeEvaluated=t.eachItem=t.unescapeJsonPointer=t.escapeJsonPointer=t.escapeFragment=t.unescapeFragment=t.schemaRefOrVal=t.schemaHasRulesButRef=t.schemaHasRules=t.checkUnknownRules=t.alwaysValidSchema=t.toHash=void 0;const e=_n,n=f2;function r(m){const T={};for(const E of m)T[E]=!0;return T}t.toHash=r;function i(m,T){return typeof T=="boolean"?T:Object.keys(T).length===0?!0:(o(m,T),!a(T,m.self.RULES.all))}t.alwaysValidSchema=i;function o(m,T=m.schema){const{opts:E,self:I}=m;if(!E.strictSchema||typeof T=="boolean")return;const D=I.RULES.keywords;for(const F in T)D[F]||k(m,`unknown keyword: "${F}"`)}t.checkUnknownRules=o;function a(m,T){if(typeof m=="boolean")return!m;for(const E in m)if(T[E])return!0;return!1}t.schemaHasRules=a;function s(m,T){if(typeof m=="boolean")return!m;for(const E in m)if(E!=="$ref"&&T.all[E])return!0;return!1}t.schemaHasRulesButRef=s;function l({topSchemaRef:m,schemaPath:T},E,I,D){if(!D){if(typeof E=="number"||typeof E=="boolean")return E;if(typeof E=="string")return(0,e._)`${E}`}return(0,e._)`${m}${T}${(0,e.getProperty)(I)}`}t.schemaRefOrVal=l;function c(m){return d(decodeURIComponent(m))}t.unescapeFragment=c;function u(m){return encodeURIComponent(f(m))}t.escapeFragment=u;function f(m){return typeof m=="number"?`${m}`:m.replace(/~/g,"~0").replace(/\//g,"~1")}t.escapeJsonPointer=f;function d(m){return m.replace(/~1/g,"/").replace(/~0/g,"~")}t.unescapeJsonPointer=d;function h(m,T){if(Array.isArray(m))for(const E of m)T(E);else T(m)}t.eachItem=h;function g({mergeNames:m,mergeToName:T,mergeValues:E,resultToName:I}){return(D,F,R,z)=>{const B=R===void 0?F:R instanceof e.Name?(F instanceof e.Name?m(D,F,R):T(D,F,R),R):F instanceof e.Name?(T(D,R,F),F):E(F,R);return z===e.Name&&!(B instanceof e.Name)?I(D,B):B}}t.mergeEvaluated={props:g({mergeNames:(m,T,E)=>m.if((0,e._)`${E} !== true && ${T} !== undefined`,()=>{m.if((0,e._)`${T} === true`,()=>m.assign(E,!0),()=>m.assign(E,(0,e._)`${E} || {}`).code((0,e._)`Object.assign(${E}, ${T})`))}),mergeToName:(m,T,E)=>m.if((0,e._)`${E} !== true`,()=>{T===!0?m.assign(E,!0):(m.assign(E,(0,e._)`${E} || {}`),S(m,E,T))}),mergeValues:(m,T)=>m===!0?!0:{...m,...T},resultToName:y}),items:g({mergeNames:(m,T,E)=>m.if((0,e._)`${E} !== true && ${T} !== undefined`,()=>m.assign(E,(0,e._)`${T} === true ? true : ${E} > ${T} ? ${E} : ${T}`)),mergeToName:(m,T,E)=>m.if((0,e._)`${E} !== true`,()=>m.assign(E,T===!0?!0:(0,e._)`${E} > ${T} ? ${E} : ${T}`)),mergeValues:(m,T)=>m===!0?!0:Math.max(m,T),resultToName:(m,T)=>m.var("items",T)})};function y(m,T){if(T===!0)return m.var("props",!0);const E=m.var("props",(0,e._)`{}`);return T!==void 0&&S(m,E,T),E}t.evaluatedPropsToName=y;function S(m,T,E){Object.keys(E).forEach(I=>m.assign((0,e._)`${T}${(0,e.getProperty)(I)}`,!0))}t.setEvaluated=S;const v={};function _(m,T){return m.scopeValue("func",{ref:T,code:v[T.code]||(v[T.code]=new n._Code(T.code))})}t.useFunc=_;var x;(function(m){m[m.Num=0]="Num",m[m.Str=1]="Str"})(x=t.Type||(t.Type={}));function C(m,T,E){if(m instanceof e.Name){const I=T===x.Num;return E?I?(0,e._)`"[" + ${m} + "]"`:(0,e._)`"['" + ${m} + "']"`:I?(0,e._)`"/" + ${m}`:(0,e._)`"/" + ${m}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return E?(0,e.getProperty)(m).toString():"/"+f(m)}t.getErrorPath=C;function k(m,T,E=m.opts.strictSchema){if(E){if(T=`strict mode: ${T}`,E===!0)throw new Error(T);m.self.logger.warn(T)}}t.checkStrictMode=k})(er);var xu={};Object.defineProperty(xu,"__esModule",{value:!0});const Vo=_n,SIe={data:new Vo.Name("data"),valCxt:new Vo.Name("valCxt"),instancePath:new Vo.Name("instancePath"),parentData:new Vo.Name("parentData"),parentDataProperty:new Vo.Name("parentDataProperty"),rootData:new Vo.Name("rootData"),dynamicAnchors:new Vo.Name("dynamicAnchors"),vErrors:new Vo.Name("vErrors"),errors:new Vo.Name("errors"),this:new Vo.Name("this"),self:new Vo.Name("self"),scope:new Vo.Name("scope"),json:new Vo.Name("json"),jsonPos:new Vo.Name("jsonPos"),jsonLen:new Vo.Name("jsonLen"),jsonPart:new Vo.Name("jsonPart")};xu.default=SIe;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const e=_n,n=er,r=xu;t.keywordError={message:({keyword:S})=>(0,e.str)`must pass "${S}" keyword validation`},t.keyword$DataError={message:({keyword:S,schemaType:v})=>v?(0,e.str)`"${S}" keyword must be ${v} ($data)`:(0,e.str)`"${S}" keyword is invalid ($data)`};function i(S,v=t.keywordError,_,x){const{it:C}=S,{gen:k,compositeRule:m,allErrors:T}=C,E=f(S,v,_);x??(m||T)?l(k,E):c(C,(0,e._)`[${E}]`)}t.reportError=i;function o(S,v=t.keywordError,_){const{it:x}=S,{gen:C,compositeRule:k,allErrors:m}=x,T=f(S,v,_);l(C,T),k||m||c(x,r.default.vErrors)}t.reportExtraError=o;function a(S,v){S.assign(r.default.errors,v),S.if((0,e._)`${r.default.vErrors} !== null`,()=>S.if(v,()=>S.assign((0,e._)`${r.default.vErrors}.length`,v),()=>S.assign(r.default.vErrors,null)))}t.resetErrorsCount=a;function s({gen:S,keyword:v,schemaValue:_,data:x,errsCount:C,it:k}){if(C===void 0)throw new Error("ajv implementation error");const m=S.name("err");S.forRange("i",C,r.default.errors,T=>{S.const(m,(0,e._)`${r.default.vErrors}[${T}]`),S.if((0,e._)`${m}.instancePath === undefined`,()=>S.assign((0,e._)`${m}.instancePath`,(0,e.strConcat)(r.default.instancePath,k.errorPath))),S.assign((0,e._)`${m}.schemaPath`,(0,e.str)`${k.errSchemaPath}/${v}`),k.opts.verbose&&(S.assign((0,e._)`${m}.schema`,_),S.assign((0,e._)`${m}.data`,x))})}t.extendErrors=s;function l(S,v){const _=S.const("err",v);S.if((0,e._)`${r.default.vErrors} === null`,()=>S.assign(r.default.vErrors,(0,e._)`[${_}]`),(0,e._)`${r.default.vErrors}.push(${_})`),S.code((0,e._)`${r.default.errors}++`)}function c(S,v){const{gen:_,validateName:x,schemaEnv:C}=S;C.$async?_.throw((0,e._)`new ${S.ValidationError}(${v})`):(_.assign((0,e._)`${x}.errors`,v),_.return(!1))}const u={keyword:new e.Name("keyword"),schemaPath:new e.Name("schemaPath"),params:new e.Name("params"),propertyName:new e.Name("propertyName"),message:new e.Name("message"),schema:new e.Name("schema"),parentSchema:new e.Name("parentSchema")};function f(S,v,_){const{createErrors:x}=S.it;return x===!1?(0,e._)`{}`:d(S,v,_)}function d(S,v,_={}){const{gen:x,it:C}=S,k=[h(C,_),g(S,_)];return y(S,v,k),x.object(...k)}function h({errorPath:S},{instancePath:v}){const _=v?(0,e.str)`${S}${(0,n.getErrorPath)(v,n.Type.Str)}`:S;return[r.default.instancePath,(0,e.strConcat)(r.default.instancePath,_)]}function g({keyword:S,it:{errSchemaPath:v}},{schemaPath:_,parentSchema:x}){let C=x?v:(0,e.str)`${v}/${S}`;return _&&(C=(0,e.str)`${C}${(0,n.getErrorPath)(_,n.Type.Str)}`),[u.schemaPath,C]}function y(S,{params:v,message:_},x){const{keyword:C,data:k,schemaValue:m,it:T}=S,{opts:E,propertyName:I,topSchemaRef:D,schemaPath:F}=T;x.push([u.keyword,C],[u.params,typeof v=="function"?v(S):v||(0,e._)`{}`]),E.messages&&x.push([u.message,typeof _=="function"?_(S):_]),E.verbose&&x.push([u.schema,m],[u.parentSchema,(0,e._)`${D}${F}`],[r.default.data,k]),I&&x.push([u.propertyName,I])}})(mS);Object.defineProperty(d0,"__esModule",{value:!0});d0.boolOrEmptySchema=d0.topBoolOrEmptySchema=void 0;const _Ie=mS,wIe=_n,kIe=xu,xIe={message:"boolean schema is false"};function CIe(t){const{gen:e,schema:n,validateName:r}=t;n===!1?Wre(t,!1):typeof n=="object"&&n.$async===!0?e.return(kIe.default.data):(e.assign((0,wIe._)`${r}.errors`,null),e.return(!0))}d0.topBoolOrEmptySchema=CIe;function TIe(t,e){const{gen:n,schema:r}=t;r===!1?(n.var(e,!1),Wre(t)):n.var(e,!0)}d0.boolOrEmptySchema=TIe;function Wre(t,e){const{gen:n,data:r}=t,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,_Ie.reportError)(i,xIe,void 0,e)}var vS={},Pg={};Object.defineProperty(Pg,"__esModule",{value:!0});Pg.getRules=Pg.isJSONType=void 0;const AIe=["string","number","integer","boolean","null","object","array"],PIe=new Set(AIe);function EIe(t){return typeof t=="string"&&PIe.has(t)}Pg.isJSONType=EIe;function OIe(){const t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}Pg.getRules=OIe;var mf={};Object.defineProperty(mf,"__esModule",{value:!0});mf.shouldUseRule=mf.shouldUseGroup=mf.schemaHasRulesForType=void 0;function IIe({schema:t,self:e},n){const r=e.RULES.types[n];return r&&r!==!0&&Gre(t,r)}mf.schemaHasRulesForType=IIe;function Gre(t,e){return e.rules.some(n=>qre(t,n))}mf.shouldUseGroup=Gre;function qre(t,e){var n;return t[e.keyword]!==void 0||((n=e.definition.implements)===null||n===void 0?void 0:n.some(r=>t[r]!==void 0))}mf.shouldUseRule=qre;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.reportTypeError=t.checkDataTypes=t.checkDataType=t.coerceAndCheckDataType=t.getJSONTypes=t.getSchemaTypes=t.DataType=void 0;const e=Pg,n=mf,r=mS,i=_n,o=er;var a;(function(x){x[x.Correct=0]="Correct",x[x.Wrong=1]="Wrong"})(a=t.DataType||(t.DataType={}));function s(x){const C=l(x.type);if(C.includes("null")){if(x.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!C.length&&x.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');x.nullable===!0&&C.push("null")}return C}t.getSchemaTypes=s;function l(x){const C=Array.isArray(x)?x:x?[x]:[];if(C.every(e.isJSONType))return C;throw new Error("type must be JSONType or JSONType[]: "+C.join(","))}t.getJSONTypes=l;function c(x,C){const{gen:k,data:m,opts:T}=x,E=f(C,T.coerceTypes),I=C.length>0&&!(E.length===0&&C.length===1&&(0,n.schemaHasRulesForType)(x,C[0]));if(I){const D=y(C,m,T.strictNumbers,a.Wrong);k.if(D,()=>{E.length?d(x,C,E):v(x)})}return I}t.coerceAndCheckDataType=c;const u=new Set(["string","number","integer","boolean","null"]);function f(x,C){return C?x.filter(k=>u.has(k)||C==="array"&&k==="array"):[]}function d(x,C,k){const{gen:m,data:T,opts:E}=x,I=m.let("dataType",(0,i._)`typeof ${T}`),D=m.let("coerced",(0,i._)`undefined`);E.coerceTypes==="array"&&m.if((0,i._)`${I} == 'object' && Array.isArray(${T}) && ${T}.length == 1`,()=>m.assign(T,(0,i._)`${T}[0]`).assign(I,(0,i._)`typeof ${T}`).if(y(C,T,E.strictNumbers),()=>m.assign(D,T))),m.if((0,i._)`${D} !== undefined`);for(const R of k)(u.has(R)||R==="array"&&E.coerceTypes==="array")&&F(R);m.else(),v(x),m.endIf(),m.if((0,i._)`${D} !== undefined`,()=>{m.assign(T,D),h(x,D)});function F(R){switch(R){case"string":m.elseIf((0,i._)`${I} == "number" || ${I} == "boolean"`).assign(D,(0,i._)`"" + ${T}`).elseIf((0,i._)`${T} === null`).assign(D,(0,i._)`""`);return;case"number":m.elseIf((0,i._)`${I} == "boolean" || ${T} === null
              || (${I} == "string" && ${T} && ${T} == +${T})`).assign(D,(0,i._)`+${T}`);return;case"integer":m.elseIf((0,i._)`${I} === "boolean" || ${T} === null
              || (${I} === "string" && ${T} && ${T} == +${T} && !(${T} % 1))`).assign(D,(0,i._)`+${T}`);return;case"boolean":m.elseIf((0,i._)`${T} === "false" || ${T} === 0 || ${T} === null`).assign(D,!1).elseIf((0,i._)`${T} === "true" || ${T} === 1`).assign(D,!0);return;case"null":m.elseIf((0,i._)`${T} === "" || ${T} === 0 || ${T} === false`),m.assign(D,null);return;case"array":m.elseIf((0,i._)`${I} === "string" || ${I} === "number"
              || ${I} === "boolean" || ${T} === null`).assign(D,(0,i._)`[${T}]`)}}}function h({gen:x,parentData:C,parentDataProperty:k},m){x.if((0,i._)`${C} !== undefined`,()=>x.assign((0,i._)`${C}[${k}]`,m))}function g(x,C,k,m=a.Correct){const T=m===a.Correct?i.operators.EQ:i.operators.NEQ;let E;switch(x){case"null":return(0,i._)`${C} ${T} null`;case"array":E=(0,i._)`Array.isArray(${C})`;break;case"object":E=(0,i._)`${C} && typeof ${C} == "object" && !Array.isArray(${C})`;break;case"integer":E=I((0,i._)`!(${C} % 1) && !isNaN(${C})`);break;case"number":E=I();break;default:return(0,i._)`typeof ${C} ${T} ${x}`}return m===a.Correct?E:(0,i.not)(E);function I(D=i.nil){return(0,i.and)((0,i._)`typeof ${C} == "number"`,D,k?(0,i._)`isFinite(${C})`:i.nil)}}t.checkDataType=g;function y(x,C,k,m){if(x.length===1)return g(x[0],C,k,m);let T;const E=(0,o.toHash)(x);if(E.array&&E.object){const I=(0,i._)`typeof ${C} != "object"`;T=E.null?I:(0,i._)`!${C} || ${I}`,delete E.null,delete E.array,delete E.object}else T=i.nil;E.number&&delete E.integer;for(const I in E)T=(0,i.and)(T,g(I,C,k,m));return T}t.checkDataTypes=y;const S={message:({schema:x})=>`must be ${x}`,params:({schema:x,schemaValue:C})=>typeof x=="string"?(0,i._)`{type: ${x}}`:(0,i._)`{type: ${C}}`};function v(x){const C=_(x);(0,r.reportError)(C,S)}t.reportTypeError=v;function _(x){const{gen:C,data:k,schema:m}=x,T=(0,o.schemaRefOrVal)(x,m,"type");return{gen:C,keyword:"type",data:k,schema:m.type,schemaCode:T,schemaValue:T,parentSchema:m,params:{},it:x}}})(vS);var n3={};Object.defineProperty(n3,"__esModule",{value:!0});n3.assignDefaults=void 0;const Nm=_n,$Ie=er;function FIe(t,e){const{properties:n,items:r}=t.schema;if(e==="object"&&n)for(const i in n)FH(t,i,n[i].default);else e==="array"&&Array.isArray(r)&&r.forEach((i,o)=>FH(t,o,i.default))}n3.assignDefaults=FIe;function FH(t,e,n){const{gen:r,compositeRule:i,data:o,opts:a}=t;if(n===void 0)return;const s=(0,Nm._)`${o}${(0,Nm.getProperty)(e)}`;if(i){(0,$Ie.checkStrictMode)(t,`default is ignored for: ${s}`);return}let l=(0,Nm._)`${s} === undefined`;a.useDefaults==="empty"&&(l=(0,Nm._)`${l} || ${s} === null || ${s} === ""`),r.if(l,(0,Nm._)`${s} = ${(0,Nm.stringify)(n)}`)}var cu={},Tn={};Object.defineProperty(Tn,"__esModule",{value:!0});Tn.validateUnion=Tn.validateArray=Tn.usePattern=Tn.callValidateCode=Tn.schemaProperties=Tn.allSchemaProperties=Tn.noPropertyInData=Tn.propertyInData=Tn.isOwnProperty=Tn.hasPropFunc=Tn.reportMissingProp=Tn.checkMissingProp=Tn.checkReportMissingProp=void 0;const Xr=_n,q$=er,id=xu,LIe=er;function DIe(t,e){const{gen:n,data:r,it:i}=t;n.if(K$(n,r,e,i.opts.ownProperties),()=>{t.setParams({missingProperty:(0,Xr._)`${e}`},!0),t.error()})}Tn.checkReportMissingProp=DIe;function NIe({gen:t,data:e,it:{opts:n}},r,i){return(0,Xr.or)(...r.map(o=>(0,Xr.and)(K$(t,e,o,n.ownProperties),(0,Xr._)`${i} = ${o}`)))}Tn.checkMissingProp=NIe;function MIe(t,e){t.setParams({missingProperty:e},!0),t.error()}Tn.reportMissingProp=MIe;function Yre(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,Xr._)`Object.prototype.hasOwnProperty`})}Tn.hasPropFunc=Yre;function Y$(t,e,n){return(0,Xr._)`${Yre(t)}.call(${e}, ${n})`}Tn.isOwnProperty=Y$;function RIe(t,e,n,r){const i=(0,Xr._)`${e}${(0,Xr.getProperty)(n)} !== undefined`;return r?(0,Xr._)`${i} && ${Y$(t,e,n)}`:i}Tn.propertyInData=RIe;function K$(t,e,n,r){const i=(0,Xr._)`${e}${(0,Xr.getProperty)(n)} === undefined`;return r?(0,Xr.or)(i,(0,Xr.not)(Y$(t,e,n))):i}Tn.noPropertyInData=K$;function Kre(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}Tn.allSchemaProperties=Kre;function zIe(t,e){return Kre(e).filter(n=>!(0,q$.alwaysValidSchema)(t,e[n]))}Tn.schemaProperties=zIe;function VIe({schemaCode:t,data:e,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:o},it:a},s,l,c){const u=c?(0,Xr._)`${t}, ${e}, ${r}${i}`:e,f=[[id.default.instancePath,(0,Xr.strConcat)(id.default.instancePath,o)],[id.default.parentData,a.parentData],[id.default.parentDataProperty,a.parentDataProperty],[id.default.rootData,id.default.rootData]];a.opts.dynamicRef&&f.push([id.default.dynamicAnchors,id.default.dynamicAnchors]);const d=(0,Xr._)`${u}, ${n.object(...f)}`;return l!==Xr.nil?(0,Xr._)`${s}.call(${l}, ${d})`:(0,Xr._)`${s}(${d})`}Tn.callValidateCode=VIe;const BIe=(0,Xr._)`new RegExp`;function jIe({gen:t,it:{opts:e}},n){const r=e.unicodeRegExp?"u":"",{regExp:i}=e.code,o=i(n,r);return t.scopeValue("pattern",{key:o.toString(),ref:o,code:(0,Xr._)`${i.code==="new RegExp"?BIe:(0,LIe.useFunc)(t,i)}(${n}, ${r})`})}Tn.usePattern=jIe;function HIe(t){const{gen:e,data:n,keyword:r,it:i}=t,o=e.name("valid");if(i.allErrors){const s=e.let("valid",!0);return a(()=>e.assign(s,!1)),s}return e.var(o,!0),a(()=>e.break()),o;function a(s){const l=e.const("len",(0,Xr._)`${n}.length`);e.forRange("i",0,l,c=>{t.subschema({keyword:r,dataProp:c,dataPropType:q$.Type.Num},o),e.if((0,Xr.not)(o),s)})}}Tn.validateArray=HIe;function UIe(t){const{gen:e,schema:n,keyword:r,it:i}=t;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(l=>(0,q$.alwaysValidSchema)(i,l))&&!i.opts.unevaluated)return;const a=e.let("valid",!1),s=e.name("_valid");e.block(()=>n.forEach((l,c)=>{const u=t.subschema({keyword:r,schemaProp:c,compositeRule:!0},s);e.assign(a,(0,Xr._)`${a} || ${s}`),t.mergeValidEvaluated(u,s)||e.if((0,Xr.not)(a))})),t.result(a,()=>t.reset(),()=>t.error(!0))}Tn.validateUnion=UIe;Object.defineProperty(cu,"__esModule",{value:!0});cu.validateKeywordUsage=cu.validSchemaType=cu.funcKeywordCode=cu.macroKeywordCode=void 0;const va=_n,$p=xu,WIe=Tn,GIe=mS;function qIe(t,e){const{gen:n,keyword:r,schema:i,parentSchema:o,it:a}=t,s=e.macro.call(a.self,i,o,a),l=Xre(n,r,s);a.opts.validateSchema!==!1&&a.self.validateSchema(s,!0);const c=n.name("valid");t.subschema({schema:s,schemaPath:va.nil,errSchemaPath:`${a.errSchemaPath}/${r}`,topSchemaRef:l,compositeRule:!0},c),t.pass(c,()=>t.error(!0))}cu.macroKeywordCode=qIe;function YIe(t,e){var n;const{gen:r,keyword:i,schema:o,parentSchema:a,$data:s,it:l}=t;XIe(l,e);const c=!s&&e.compile?e.compile.call(l.self,o,a,l):e.validate,u=Xre(r,i,c),f=r.let("valid");t.block$data(f,d),t.ok((n=e.valid)!==null&&n!==void 0?n:f);function d(){if(e.errors===!1)y(),e.modifying&&LH(t),S(()=>t.error());else{const v=e.async?h():g();e.modifying&&LH(t),S(()=>KIe(t,v))}}function h(){const v=r.let("ruleErrs",null);return r.try(()=>y((0,va._)`await `),_=>r.assign(f,!1).if((0,va._)`${_} instanceof ${l.ValidationError}`,()=>r.assign(v,(0,va._)`${_}.errors`),()=>r.throw(_))),v}function g(){const v=(0,va._)`${u}.errors`;return r.assign(v,null),y(va.nil),v}function y(v=e.async?(0,va._)`await `:va.nil){const _=l.opts.passContext?$p.default.this:$p.default.self,x=!("compile"in e&&!s||e.schema===!1);r.assign(f,(0,va._)`${v}${(0,WIe.callValidateCode)(t,u,_,x)}`,e.modifying)}function S(v){var _;r.if((0,va.not)((_=e.valid)!==null&&_!==void 0?_:f),v)}}cu.funcKeywordCode=YIe;function LH(t){const{gen:e,data:n,it:r}=t;e.if(r.parentData,()=>e.assign(n,(0,va._)`${r.parentData}[${r.parentDataProperty}]`))}function KIe(t,e){const{gen:n}=t;n.if((0,va._)`Array.isArray(${e})`,()=>{n.assign($p.default.vErrors,(0,va._)`${$p.default.vErrors} === null ? ${e} : ${$p.default.vErrors}.concat(${e})`).assign($p.default.errors,(0,va._)`${$p.default.vErrors}.length`),(0,GIe.extendErrors)(t)},()=>t.error())}function XIe({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function Xre(t,e,n){if(n===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,va.stringify)(n)})}function JIe(t,e,n=!1){return!e.length||e.some(r=>r==="array"?Array.isArray(t):r==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==r||n&&typeof t>"u")}cu.validSchemaType=JIe;function ZIe({schema:t,opts:e,self:n,errSchemaPath:r},i,o){if(Array.isArray(i.keyword)?!i.keyword.includes(o):i.keyword!==o)throw new Error("ajv implementation error");const a=i.dependencies;if(a!=null&&a.some(s=>!Object.prototype.hasOwnProperty.call(t,s)))throw new Error(`parent schema must have dependencies of ${o}: ${a.join(",")}`);if(i.validateSchema&&!i.validateSchema(t[o])){const l=`keyword "${o}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(e.validateSchema==="log")n.logger.error(l);else throw new Error(l)}}cu.validateKeywordUsage=ZIe;var zd={};Object.defineProperty(zd,"__esModule",{value:!0});zd.extendSubschemaMode=zd.extendSubschemaData=zd.getSubschema=void 0;const tu=_n,Jre=er;function QIe(t,{keyword:e,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:o,topSchemaRef:a}){if(e!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){const s=t.schema[e];return n===void 0?{schema:s,schemaPath:(0,tu._)`${t.schemaPath}${(0,tu.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:s[n],schemaPath:(0,tu._)`${t.schemaPath}${(0,tu.getProperty)(e)}${(0,tu.getProperty)(n)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,Jre.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||o===void 0||a===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:a,errSchemaPath:o}}throw new Error('either "keyword" or "schema" must be passed')}zd.getSubschema=QIe;function e$e(t,e,{dataProp:n,dataPropType:r,data:i,dataTypes:o,propertyName:a}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:s}=e;if(n!==void 0){const{errorPath:c,dataPathArr:u,opts:f}=e,d=s.let("data",(0,tu._)`${e.data}${(0,tu.getProperty)(n)}`,!0);l(d),t.errorPath=(0,tu.str)`${c}${(0,Jre.getErrorPath)(n,r,f.jsPropertySyntax)}`,t.parentDataProperty=(0,tu._)`${n}`,t.dataPathArr=[...u,t.parentDataProperty]}if(i!==void 0){const c=i instanceof tu.Name?i:s.let("data",i,!0);l(c),a!==void 0&&(t.propertyName=a)}o&&(t.dataTypes=o);function l(c){t.data=c,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,c]}}zd.extendSubschemaData=e$e;function t$e(t,{jtdDiscriminator:e,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:o}){r!==void 0&&(t.compositeRule=r),i!==void 0&&(t.createErrors=i),o!==void 0&&(t.allErrors=o),t.jtdDiscriminator=e,t.jtdMetadata=n}zd.extendSubschemaMode=t$e;var Co={},X$=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(o=Object.keys(e),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;i--!==0;){var a=o[i];if(!t(e[a],n[a]))return!1}return!0}return e!==e&&n!==n};const Zre=pr(X$);var Qre={exports:{}},Ad=Qre.exports=function(t,e,n){typeof e=="function"&&(n=e,e={}),n=e.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};Cx(e,r,i,t,"",t)};Ad.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Ad.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Ad.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Ad.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Cx(t,e,n,r,i,o,a,s,l,c){if(r&&typeof r=="object"&&!Array.isArray(r)){e(r,i,o,a,s,l,c);for(var u in r){var f=r[u];if(Array.isArray(f)){if(u in Ad.arrayKeywords)for(var d=0;d<f.length;d++)Cx(t,e,n,f[d],i+"/"+u+"/"+d,o,i,u,r,d)}else if(u in Ad.propsKeywords){if(f&&typeof f=="object")for(var h in f)Cx(t,e,n,f[h],i+"/"+u+"/"+n$e(h),o,i,u,r,h)}else(u in Ad.keywords||t.allKeys&&!(u in Ad.skipKeywords))&&Cx(t,e,n,f,i+"/"+u,o,i,u,r)}n(r,i,o,a,s,l,c)}}function n$e(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}var r$e=Qre.exports;Object.defineProperty(Co,"__esModule",{value:!0});Co.getSchemaRefs=Co.resolveUrl=Co.normalizeId=Co._getFullPath=Co.getFullPath=Co.inlineRef=void 0;const i$e=er,o$e=X$,a$e=r$e,s$e=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function l$e(t,e=!0){return typeof t=="boolean"?!0:e===!0?!eO(t):e?eie(t)<=e:!1}Co.inlineRef=l$e;const c$e=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function eO(t){for(const e in t){if(c$e.has(e))return!0;const n=t[e];if(Array.isArray(n)&&n.some(eO)||typeof n=="object"&&eO(n))return!0}return!1}function eie(t){let e=0;for(const n in t){if(n==="$ref")return 1/0;if(e++,!s$e.has(n)&&(typeof t[n]=="object"&&(0,i$e.eachItem)(t[n],r=>e+=eie(r)),e===1/0))return 1/0}return e}function tie(t,e="",n){n!==!1&&(e=Rv(e));const r=t.parse(e);return nie(t,r)}Co.getFullPath=tie;function nie(t,e){return t.serialize(e).split("#")[0]+"#"}Co._getFullPath=nie;const u$e=/#\/?$/;function Rv(t){return t?t.replace(u$e,""):""}Co.normalizeId=Rv;function f$e(t,e,n){return n=Rv(n),t.resolve(e,n)}Co.resolveUrl=f$e;const d$e=/^[a-z_][-a-z0-9._]*$/i;function h$e(t,e){if(typeof t=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=Rv(t[n]||e),o={"":i},a=tie(r,i,!1),s={},l=new Set;return a$e(t,{allKeys:!0},(f,d,h,g)=>{if(g===void 0)return;const y=a+d;let S=o[g];typeof f[n]=="string"&&(S=v.call(this,f[n])),_.call(this,f.$anchor),_.call(this,f.$dynamicAnchor),o[d]=S;function v(x){const C=this.opts.uriResolver.resolve;if(x=Rv(S?C(S,x):x),l.has(x))throw u(x);l.add(x);let k=this.refs[x];return typeof k=="string"&&(k=this.refs[k]),typeof k=="object"?c(f,k.schema,x):x!==Rv(y)&&(x[0]==="#"?(c(f,s[x],x),s[x]=f):this.refs[x]=y),x}function _(x){if(typeof x=="string"){if(!d$e.test(x))throw new Error(`invalid anchor "${x}"`);v.call(this,`#${x}`)}}}),s;function c(f,d,h){if(d!==void 0&&!o$e(f,d))throw u(h)}function u(f){return new Error(`reference "${f}" resolves to more than one schema`)}}Co.getSchemaRefs=h$e;Object.defineProperty(hc,"__esModule",{value:!0});hc.getData=hc.KeywordCxt=hc.validateFunctionCode=void 0;const rie=d0,DH=vS,J$=mf,sC=vS,p$e=n3,f1=cu,f7=zd,$t=_n,an=xu,g$e=Co,vf=er,ib=mS;function m$e(t){if(aie(t)&&(sie(t),oie(t))){b$e(t);return}iie(t,()=>(0,rie.topBoolOrEmptySchema)(t))}hc.validateFunctionCode=m$e;function iie({gen:t,validateName:e,schema:n,schemaEnv:r,opts:i},o){i.code.es5?t.func(e,(0,$t._)`${an.default.data}, ${an.default.valCxt}`,r.$async,()=>{t.code((0,$t._)`"use strict"; ${NH(n,i)}`),y$e(t,i),t.code(o)}):t.func(e,(0,$t._)`${an.default.data}, ${v$e(i)}`,r.$async,()=>t.code(NH(n,i)).code(o))}function v$e(t){return(0,$t._)`{${an.default.instancePath}="", ${an.default.parentData}, ${an.default.parentDataProperty}, ${an.default.rootData}=${an.default.data}${t.dynamicRef?(0,$t._)`, ${an.default.dynamicAnchors}={}`:$t.nil}}={}`}function y$e(t,e){t.if(an.default.valCxt,()=>{t.var(an.default.instancePath,(0,$t._)`${an.default.valCxt}.${an.default.instancePath}`),t.var(an.default.parentData,(0,$t._)`${an.default.valCxt}.${an.default.parentData}`),t.var(an.default.parentDataProperty,(0,$t._)`${an.default.valCxt}.${an.default.parentDataProperty}`),t.var(an.default.rootData,(0,$t._)`${an.default.valCxt}.${an.default.rootData}`),e.dynamicRef&&t.var(an.default.dynamicAnchors,(0,$t._)`${an.default.valCxt}.${an.default.dynamicAnchors}`)},()=>{t.var(an.default.instancePath,(0,$t._)`""`),t.var(an.default.parentData,(0,$t._)`undefined`),t.var(an.default.parentDataProperty,(0,$t._)`undefined`),t.var(an.default.rootData,an.default.data),e.dynamicRef&&t.var(an.default.dynamicAnchors,(0,$t._)`{}`)})}function b$e(t){const{schema:e,opts:n,gen:r}=t;iie(t,()=>{n.$comment&&e.$comment&&cie(t),x$e(t),r.let(an.default.vErrors,null),r.let(an.default.errors,0),n.unevaluated&&S$e(t),lie(t),A$e(t)})}function S$e(t){const{gen:e,validateName:n}=t;t.evaluated=e.const("evaluated",(0,$t._)`${n}.evaluated`),e.if((0,$t._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,$t._)`${t.evaluated}.props`,(0,$t._)`undefined`)),e.if((0,$t._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,$t._)`${t.evaluated}.items`,(0,$t._)`undefined`))}function NH(t,e){const n=typeof t=="object"&&t[e.schemaId];return n&&(e.code.source||e.code.process)?(0,$t._)`/*# sourceURL=${n} */`:$t.nil}function _$e(t,e){if(aie(t)&&(sie(t),oie(t))){w$e(t,e);return}(0,rie.boolOrEmptySchema)(t,e)}function oie({schema:t,self:e}){if(typeof t=="boolean")return!t;for(const n in t)if(e.RULES.all[n])return!0;return!1}function aie(t){return typeof t.schema!="boolean"}function w$e(t,e){const{schema:n,gen:r,opts:i}=t;i.$comment&&n.$comment&&cie(t),C$e(t),T$e(t);const o=r.const("_errs",an.default.errors);lie(t,o),r.var(e,(0,$t._)`${o} === ${an.default.errors}`)}function sie(t){(0,vf.checkUnknownRules)(t),k$e(t)}function lie(t,e){if(t.opts.jtd)return MH(t,[],!1,e);const n=(0,DH.getSchemaTypes)(t.schema),r=(0,DH.coerceAndCheckDataType)(t,n);MH(t,n,!r,e)}function k$e(t){const{schema:e,errSchemaPath:n,opts:r,self:i}=t;e.$ref&&r.ignoreKeywordsWithRef&&(0,vf.schemaHasRulesButRef)(e,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function x$e(t){const{schema:e,opts:n}=t;e.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,vf.checkStrictMode)(t,"default is ignored in the schema root")}function C$e(t){const e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,g$e.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function T$e(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function cie({gen:t,schemaEnv:e,schema:n,errSchemaPath:r,opts:i}){const o=n.$comment;if(i.$comment===!0)t.code((0,$t._)`${an.default.self}.logger.log(${o})`);else if(typeof i.$comment=="function"){const a=(0,$t.str)`${r}/$comment`,s=t.scopeValue("root",{ref:e.root});t.code((0,$t._)`${an.default.self}.opts.$comment(${o}, ${a}, ${s}.schema)`)}}function A$e(t){const{gen:e,schemaEnv:n,validateName:r,ValidationError:i,opts:o}=t;n.$async?e.if((0,$t._)`${an.default.errors} === 0`,()=>e.return(an.default.data),()=>e.throw((0,$t._)`new ${i}(${an.default.vErrors})`)):(e.assign((0,$t._)`${r}.errors`,an.default.vErrors),o.unevaluated&&P$e(t),e.return((0,$t._)`${an.default.errors} === 0`))}function P$e({gen:t,evaluated:e,props:n,items:r}){n instanceof $t.Name&&t.assign((0,$t._)`${e}.props`,n),r instanceof $t.Name&&t.assign((0,$t._)`${e}.items`,r)}function MH(t,e,n,r){const{gen:i,schema:o,data:a,allErrors:s,opts:l,self:c}=t,{RULES:u}=c;if(o.$ref&&(l.ignoreKeywordsWithRef||!(0,vf.schemaHasRulesButRef)(o,u))){i.block(()=>die(t,"$ref",u.all.$ref.definition));return}l.jtd||E$e(t,e),i.block(()=>{for(const d of u.rules)f(d);f(u.post)});function f(d){(0,J$.shouldUseGroup)(o,d)&&(d.type?(i.if((0,sC.checkDataType)(d.type,a,l.strictNumbers)),RH(t,d),e.length===1&&e[0]===d.type&&n&&(i.else(),(0,sC.reportTypeError)(t)),i.endIf()):RH(t,d),s||i.if((0,$t._)`${an.default.errors} === ${r||0}`))}}function RH(t,e){const{gen:n,schema:r,opts:{useDefaults:i}}=t;i&&(0,p$e.assignDefaults)(t,e.type),n.block(()=>{for(const o of e.rules)(0,J$.shouldUseRule)(r,o)&&die(t,o.keyword,o.definition,e.type)})}function E$e(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(O$e(t,e),t.opts.allowUnionTypes||I$e(t,e),$$e(t,t.dataTypes))}function O$e(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(n=>{uie(t.dataTypes,n)||Z$(t,`type "${n}" not allowed by context "${t.dataTypes.join(",")}"`)}),L$e(t,e)}}function I$e(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&Z$(t,"use allowUnionTypes to allow union type keyword")}function $$e(t,e){const n=t.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,J$.shouldUseRule)(t.schema,i)){const{type:o}=i.definition;o.length&&!o.some(a=>F$e(e,a))&&Z$(t,`missing type "${o.join(",")}" for keyword "${r}"`)}}}function F$e(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function uie(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function L$e(t,e){const n=[];for(const r of t.dataTypes)uie(e,r)?n.push(r):e.includes("integer")&&r==="number"&&n.push("integer");t.dataTypes=n}function Z$(t,e){const n=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${n}" (strictTypes)`,(0,vf.checkStrictMode)(t,e,t.opts.strictTypes)}class fie{constructor(e,n,r){if((0,f1.validateKeywordUsage)(e,n,r),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=r,this.data=e.data,this.schema=e.schema[r],this.$data=n.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,vf.schemaRefOrVal)(e,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=n,this.$data)this.schemaCode=e.gen.const("vSchema",hie(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,f1.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=e.gen.const("_errs",an.default.errors))}result(e,n,r){this.failResult((0,$t.not)(e),n,r)}failResult(e,n,r){this.gen.if(e),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,n){this.failResult((0,$t.not)(e),void 0,n)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:n}=this;this.fail((0,$t._)`${n} !== undefined && (${(0,$t.or)(this.invalid$data(),e)})`)}error(e,n,r){if(n){this.setParams(n),this._error(e,r),this.setParams({});return}this._error(e,r)}_error(e,n){(e?ib.reportExtraError:ib.reportError)(this,this.def.error,n)}$dataError(){(0,ib.reportError)(this,this.def.$dataError||ib.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,ib.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,n){n?Object.assign(this.params,e):this.params=e}block$data(e,n,r=$t.nil){this.gen.block(()=>{this.check$data(e,r),n()})}check$data(e=$t.nil,n=$t.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:o,def:a}=this;r.if((0,$t.or)((0,$t._)`${i} === undefined`,n)),e!==$t.nil&&r.assign(e,!0),(o.length||a.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),e!==$t.nil&&r.assign(e,!1)),r.else()}invalid$data(){const{gen:e,schemaCode:n,schemaType:r,def:i,it:o}=this;return(0,$t.or)(a(),s());function a(){if(r.length){if(!(n instanceof $t.Name))throw new Error("ajv implementation error");const l=Array.isArray(r)?r:[r];return(0,$t._)`${(0,sC.checkDataTypes)(l,n,o.opts.strictNumbers,sC.DataType.Wrong)}`}return $t.nil}function s(){if(i.validateSchema){const l=e.scopeValue("validate$data",{ref:i.validateSchema});return(0,$t._)`!${l}(${n})`}return $t.nil}}subschema(e,n){const r=(0,f7.getSubschema)(this.it,e);(0,f7.extendSubschemaData)(r,this.it,e),(0,f7.extendSubschemaMode)(r,e);const i={...this.it,...r,items:void 0,props:void 0};return _$e(i,n),i}mergeEvaluated(e,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&e.props!==void 0&&(r.props=vf.mergeEvaluated.props(i,e.props,r.props,n)),r.items!==!0&&e.items!==void 0&&(r.items=vf.mergeEvaluated.items(i,e.items,r.items,n)))}mergeValidEvaluated(e,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(e,$t.Name)),!0}}hc.KeywordCxt=fie;function die(t,e,n,r){const i=new fie(t,n,e);"code"in n?n.code(i,r):i.$data&&n.validate?(0,f1.funcKeywordCode)(i,n):"macro"in n?(0,f1.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,f1.funcKeywordCode)(i,n)}const D$e=/^\/(?:[^~]|~0|~1)*$/,N$e=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function hie(t,{dataLevel:e,dataNames:n,dataPathArr:r}){let i,o;if(t==="")return an.default.rootData;if(t[0]==="/"){if(!D$e.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);i=t,o=an.default.rootData}else{const c=N$e.exec(t);if(!c)throw new Error(`Invalid JSON-pointer: ${t}`);const u=+c[1];if(i=c[2],i==="#"){if(u>=e)throw new Error(l("property/index",u));return r[e-u]}if(u>e)throw new Error(l("data",u));if(o=n[e-u],!i)return o}let a=o;const s=i.split("/");for(const c of s)c&&(o=(0,$t._)`${o}${(0,$t.getProperty)((0,vf.unescapeJsonPointer)(c))}`,a=(0,$t._)`${a} && ${o}`);return a;function l(c,u){return`Cannot access ${c} ${u} levels up, current level is ${e}`}}hc.getData=hie;var yS={};Object.defineProperty(yS,"__esModule",{value:!0});class M$e extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}yS.default=M$e;var bS={};Object.defineProperty(bS,"__esModule",{value:!0});const d7=Co;class R$e extends Error{constructor(e,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,d7.resolveUrl)(e,n,r),this.missingSchema=(0,d7.normalizeId)((0,d7.getFullPath)(e,this.missingRef))}}bS.default=R$e;var ns={};Object.defineProperty(ns,"__esModule",{value:!0});ns.resolveSchema=ns.getCompilingSchema=ns.resolveRef=ns.compileSchema=ns.SchemaEnv=void 0;const Kl=_n,z$e=yS,mp=xu,oc=Co,zH=er,V$e=hc;class r3{constructor(e){var n;this.refs={},this.dynamicAnchors={};let r;typeof e.schema=="object"&&(r=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(n=e.baseId)!==null&&n!==void 0?n:(0,oc.normalizeId)(r==null?void 0:r[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}ns.SchemaEnv=r3;function Q$(t){const e=pie.call(this,t);if(e)return e;const n=(0,oc.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:o}=this.opts,a=new Kl.CodeGen(this.scope,{es5:r,lines:i,ownProperties:o});let s;t.$async&&(s=a.scopeValue("Error",{ref:z$e.default,code:(0,Kl._)`require("ajv/dist/runtime/validation_error").default`}));const l=a.scopeName("validate");t.validateName=l;const c={gen:a,allErrors:this.opts.allErrors,data:mp.default.data,parentData:mp.default.parentData,parentDataProperty:mp.default.parentDataProperty,dataNames:[mp.default.data],dataPathArr:[Kl.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:a.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,Kl.stringify)(t.schema)}:{ref:t.schema}),validateName:l,ValidationError:s,schema:t.schema,schemaEnv:t,rootId:n,baseId:t.baseId||n,schemaPath:Kl.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Kl._)`""`,opts:this.opts,self:this};let u;try{this._compilations.add(t),(0,V$e.validateFunctionCode)(c),a.optimize(this.opts.code.optimize);const f=a.toString();u=`${a.scopeRefs(mp.default.scope)}return ${f}`,this.opts.code.process&&(u=this.opts.code.process(u,t));const h=new Function(`${mp.default.self}`,`${mp.default.scope}`,u)(this,this.scope.get());if(this.scope.value(l,{ref:h}),h.errors=null,h.schema=t.schema,h.schemaEnv=t,t.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:l,validateCode:f,scopeValues:a._values}),this.opts.unevaluated){const{props:g,items:y}=c;h.evaluated={props:g instanceof Kl.Name?void 0:g,items:y instanceof Kl.Name?void 0:y,dynamicProps:g instanceof Kl.Name,dynamicItems:y instanceof Kl.Name},h.source&&(h.source.evaluated=(0,Kl.stringify)(h.evaluated))}return t.validate=h,t}catch(f){throw delete t.validate,delete t.validateName,u&&this.logger.error("Error compiling schema, function code:",u),f}finally{this._compilations.delete(t)}}ns.compileSchema=Q$;function B$e(t,e,n){var r;n=(0,oc.resolveUrl)(this.opts.uriResolver,e,n);const i=t.refs[n];if(i)return i;let o=U$e.call(this,t,n);if(o===void 0){const a=(r=t.localRefs)===null||r===void 0?void 0:r[n],{schemaId:s}=this.opts;a&&(o=new r3({schema:a,schemaId:s,root:t,baseId:e}))}if(o!==void 0)return t.refs[n]=j$e.call(this,o)}ns.resolveRef=B$e;function j$e(t){return(0,oc.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:Q$.call(this,t)}function pie(t){for(const e of this._compilations)if(H$e(e,t))return e}ns.getCompilingSchema=pie;function H$e(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function U$e(t,e){let n;for(;typeof(n=this.refs[e])=="string";)e=n;return n||this.schemas[e]||i3.call(this,t,e)}function i3(t,e){const n=this.opts.uriResolver.parse(e),r=(0,oc._getFullPath)(this.opts.uriResolver,n);let i=(0,oc.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&r===i)return h7.call(this,n,t);const o=(0,oc.normalizeId)(r),a=this.refs[o]||this.schemas[o];if(typeof a=="string"){const s=i3.call(this,t,a);return typeof(s==null?void 0:s.schema)!="object"?void 0:h7.call(this,n,s)}if(typeof(a==null?void 0:a.schema)=="object"){if(a.validate||Q$.call(this,a),o===(0,oc.normalizeId)(e)){const{schema:s}=a,{schemaId:l}=this.opts,c=s[l];return c&&(i=(0,oc.resolveUrl)(this.opts.uriResolver,i,c)),new r3({schema:s,schemaId:l,root:t,baseId:i})}return h7.call(this,n,a)}}ns.resolveSchema=i3;const W$e=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function h7(t,{baseId:e,schema:n,root:r}){var i;if(((i=t.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const s of t.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const l=n[(0,zH.unescapeFragment)(s)];if(l===void 0)return;n=l;const c=typeof n=="object"&&n[this.opts.schemaId];!W$e.has(s)&&c&&(e=(0,oc.resolveUrl)(this.opts.uriResolver,e,c))}let o;if(typeof n!="boolean"&&n.$ref&&!(0,zH.schemaHasRulesButRef)(n,this.RULES)){const s=(0,oc.resolveUrl)(this.opts.uriResolver,e,n.$ref);o=i3.call(this,r,s)}const{schemaId:a}=this.opts;if(o=o||new r3({schema:n,schemaId:a,root:r,baseId:e}),o.schema!==o.root.schema)return o}const G$e="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",q$e="Meta-schema for $data reference (JSON AnySchema extension proposal)",Y$e="object",K$e=["$data"],X$e={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},J$e=!1,Z$e={$id:G$e,description:q$e,type:Y$e,required:K$e,properties:X$e,additionalProperties:J$e};var eF={},tO={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(t,e){(function(n,r){r(e)})(ui,function(n){function r(){for(var ke=arguments.length,le=Array(ke),xe=0;xe<ke;xe++)le[xe]=arguments[xe];if(le.length>1){le[0]=le[0].slice(0,-1);for(var Re=le.length-1,Me=1;Me<Re;++Me)le[Me]=le[Me].slice(1,-1);return le[Re]=le[Re].slice(1),le.join("")}else return le[0]}function i(ke){return"(?:"+ke+")"}function o(ke){return ke===void 0?"undefined":ke===null?"null":Object.prototype.toString.call(ke).split(" ").pop().split("]").shift().toLowerCase()}function a(ke){return ke.toUpperCase()}function s(ke){return ke!=null?ke instanceof Array?ke:typeof ke.length!="number"||ke.split||ke.setInterval||ke.call?[ke]:Array.prototype.slice.call(ke):[]}function l(ke,le){var xe=ke;if(le)for(var Re in le)xe[Re]=le[Re];return xe}function c(ke){var le="[A-Za-z]",xe="[0-9]",Re=r(xe,"[A-Fa-f]"),Me=i(i("%[EFef]"+Re+"%"+Re+Re+"%"+Re+Re)+"|"+i("%[89A-Fa-f]"+Re+"%"+Re+Re)+"|"+i("%"+Re+Re)),kt="[\\:\\/\\?\\#\\[\\]\\@]",Ct="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",wn=r(kt,Ct),sr=ke?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Dr=ke?"[\\uE000-\\uF8FF]":"[]",yn=r(le,xe,"[\\-\\.\\_\\~]",sr);i(le+r(le,xe,"[\\+\\-\\.]")+"*"),i(i(Me+"|"+r(yn,Ct,"[\\:]"))+"*");var qn=i(i("25[0-5]")+"|"+i("2[0-4]"+xe)+"|"+i("1"+xe+xe)+"|"+i("0?[1-9]"+xe)+"|0?0?"+xe),Nr=i(qn+"\\."+qn+"\\."+qn+"\\."+qn),Xt=i(Re+"{1,4}"),dr=i(i(Xt+"\\:"+Xt)+"|"+Nr),mr=i(i(Xt+"\\:")+"{6}"+dr),vr=i("\\:\\:"+i(Xt+"\\:")+"{5}"+dr),po=i(i(Xt)+"?\\:\\:"+i(Xt+"\\:")+"{4}"+dr),Ia=i(i(i(Xt+"\\:")+"{0,1}"+Xt)+"?\\:\\:"+i(Xt+"\\:")+"{3}"+dr),$a=i(i(i(Xt+"\\:")+"{0,2}"+Xt)+"?\\:\\:"+i(Xt+"\\:")+"{2}"+dr),Bl=i(i(i(Xt+"\\:")+"{0,3}"+Xt)+"?\\:\\:"+Xt+"\\:"+dr),_s=i(i(i(Xt+"\\:")+"{0,4}"+Xt)+"?\\:\\:"+dr),Wi=i(i(i(Xt+"\\:")+"{0,5}"+Xt)+"?\\:\\:"+Xt),Oo=i(i(i(Xt+"\\:")+"{0,6}"+Xt)+"?\\:\\:"),ei=i([mr,vr,po,Ia,$a,Bl,_s,Wi,Oo].join("|")),ro=i(i(yn+"|"+Me)+"+");i("[vV]"+Re+"+\\."+r(yn,Ct,"[\\:]")+"+"),i(i(Me+"|"+r(yn,Ct))+"*");var Ys=i(Me+"|"+r(yn,Ct,"[\\:\\@]"));return i(i(Me+"|"+r(yn,Ct,"[\\@]"))+"+"),i(i(Ys+"|"+r("[\\/\\?]",Dr))+"*"),{NOT_SCHEME:new RegExp(r("[^]",le,xe,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",yn,Ct),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",yn,Ct),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",yn,Ct),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",yn,Ct),"g"),NOT_QUERY:new RegExp(r("[^\\%]",yn,Ct,"[\\:\\@\\/\\?]",Dr),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",yn,Ct,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",yn,Ct),"g"),UNRESERVED:new RegExp(yn,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",yn,wn),"g"),PCT_ENCODED:new RegExp(Me,"g"),IPV4ADDRESS:new RegExp("^("+Nr+")$"),IPV6ADDRESS:new RegExp("^\\[?("+ei+")"+i(i("\\%25|\\%(?!"+Re+"{2})")+"("+ro+")")+"?\\]?$")}}var u=c(!1),f=c(!0),d=function(){function ke(le,xe){var Re=[],Me=!0,kt=!1,Ct=void 0;try{for(var wn=le[Symbol.iterator](),sr;!(Me=(sr=wn.next()).done)&&(Re.push(sr.value),!(xe&&Re.length===xe));Me=!0);}catch(Dr){kt=!0,Ct=Dr}finally{try{!Me&&wn.return&&wn.return()}finally{if(kt)throw Ct}}return Re}return function(le,xe){if(Array.isArray(le))return le;if(Symbol.iterator in Object(le))return ke(le,xe);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(ke){if(Array.isArray(ke)){for(var le=0,xe=Array(ke.length);le<ke.length;le++)xe[le]=ke[le];return xe}else return Array.from(ke)},g=2147483647,y=36,S=1,v=26,_=38,x=700,C=72,k=128,m="-",T=/^xn--/,E=/[^\0-\x7E]/,I=/[\x2E\u3002\uFF0E\uFF61]/g,D={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},F=y-S,R=Math.floor,z=String.fromCharCode;function B(ke){throw new RangeError(D[ke])}function ie(ke,le){for(var xe=[],Re=ke.length;Re--;)xe[Re]=le(ke[Re]);return xe}function oe(ke,le){var xe=ke.split("@"),Re="";xe.length>1&&(Re=xe[0]+"@",ke=xe[1]),ke=ke.replace(I,".");var Me=ke.split("."),kt=ie(Me,le).join(".");return Re+kt}function _e(ke){for(var le=[],xe=0,Re=ke.length;xe<Re;){var Me=ke.charCodeAt(xe++);if(Me>=55296&&Me<=56319&&xe<Re){var kt=ke.charCodeAt(xe++);(kt&64512)==56320?le.push(((Me&1023)<<10)+(kt&1023)+65536):(le.push(Me),xe--)}else le.push(Me)}return le}var Ae=function(le){return String.fromCodePoint.apply(String,h(le))},Pe=function(le){return le-48<10?le-22:le-65<26?le-65:le-97<26?le-97:y},Se=function(le,xe){return le+22+75*(le<26)-((xe!=0)<<5)},se=function(le,xe,Re){var Me=0;for(le=Re?R(le/x):le>>1,le+=R(le/xe);le>F*v>>1;Me+=y)le=R(le/F);return R(Me+(F+1)*le/(le+_))},ne=function(le){var xe=[],Re=le.length,Me=0,kt=k,Ct=C,wn=le.lastIndexOf(m);wn<0&&(wn=0);for(var sr=0;sr<wn;++sr)le.charCodeAt(sr)>=128&&B("not-basic"),xe.push(le.charCodeAt(sr));for(var Dr=wn>0?wn+1:0;Dr<Re;){for(var yn=Me,qn=1,Nr=y;;Nr+=y){Dr>=Re&&B("invalid-input");var Xt=Pe(le.charCodeAt(Dr++));(Xt>=y||Xt>R((g-Me)/qn))&&B("overflow"),Me+=Xt*qn;var dr=Nr<=Ct?S:Nr>=Ct+v?v:Nr-Ct;if(Xt<dr)break;var mr=y-dr;qn>R(g/mr)&&B("overflow"),qn*=mr}var vr=xe.length+1;Ct=se(Me-yn,vr,yn==0),R(Me/vr)>g-kt&&B("overflow"),kt+=R(Me/vr),Me%=vr,xe.splice(Me++,0,kt)}return String.fromCodePoint.apply(String,xe)},J=function(le){var xe=[];le=_e(le);var Re=le.length,Me=k,kt=0,Ct=C,wn=!0,sr=!1,Dr=void 0;try{for(var yn=le[Symbol.iterator](),qn;!(wn=(qn=yn.next()).done);wn=!0){var Nr=qn.value;Nr<128&&xe.push(z(Nr))}}catch(Ks){sr=!0,Dr=Ks}finally{try{!wn&&yn.return&&yn.return()}finally{if(sr)throw Dr}}var Xt=xe.length,dr=Xt;for(Xt&&xe.push(m);dr<Re;){var mr=g,vr=!0,po=!1,Ia=void 0;try{for(var $a=le[Symbol.iterator](),Bl;!(vr=(Bl=$a.next()).done);vr=!0){var _s=Bl.value;_s>=Me&&_s<mr&&(mr=_s)}}catch(Ks){po=!0,Ia=Ks}finally{try{!vr&&$a.return&&$a.return()}finally{if(po)throw Ia}}var Wi=dr+1;mr-Me>R((g-kt)/Wi)&&B("overflow"),kt+=(mr-Me)*Wi,Me=mr;var Oo=!0,ei=!1,ro=void 0;try{for(var Ys=le[Symbol.iterator](),am;!(Oo=(am=Ys.next()).done);Oo=!0){var Ah=am.value;if(Ah<Me&&++kt>g&&B("overflow"),Ah==Me){for(var jl=kt,Pc=y;;Pc+=y){var ws=Pc<=Ct?S:Pc>=Ct+v?v:Pc-Ct;if(jl<ws)break;var Ph=jl-ws,Eh=y-ws;xe.push(z(Se(ws+Ph%Eh,0))),jl=R(Ph/Eh)}xe.push(z(Se(jl,0))),Ct=se(kt,Wi,dr==Xt),kt=0,++dr}}}catch(Ks){ei=!0,ro=Ks}finally{try{!Oo&&Ys.return&&Ys.return()}finally{if(ei)throw ro}}++kt,++Me}return xe.join("")},V=function(le){return oe(le,function(xe){return T.test(xe)?ne(xe.slice(4).toLowerCase()):xe})},W=function(le){return oe(le,function(xe){return E.test(xe)?"xn--"+J(xe):xe})},ae={version:"2.1.0",ucs2:{decode:_e,encode:Ae},decode:ne,encode:J,toASCII:W,toUnicode:V},te={};function ue(ke){var le=ke.charCodeAt(0),xe=void 0;return le<16?xe="%0"+le.toString(16).toUpperCase():le<128?xe="%"+le.toString(16).toUpperCase():le<2048?xe="%"+(le>>6|192).toString(16).toUpperCase()+"%"+(le&63|128).toString(16).toUpperCase():xe="%"+(le>>12|224).toString(16).toUpperCase()+"%"+(le>>6&63|128).toString(16).toUpperCase()+"%"+(le&63|128).toString(16).toUpperCase(),xe}function ce(ke){for(var le="",xe=0,Re=ke.length;xe<Re;){var Me=parseInt(ke.substr(xe+1,2),16);if(Me<128)le+=String.fromCharCode(Me),xe+=3;else if(Me>=194&&Me<224){if(Re-xe>=6){var kt=parseInt(ke.substr(xe+4,2),16);le+=String.fromCharCode((Me&31)<<6|kt&63)}else le+=ke.substr(xe,6);xe+=6}else if(Me>=224){if(Re-xe>=9){var Ct=parseInt(ke.substr(xe+4,2),16),wn=parseInt(ke.substr(xe+7,2),16);le+=String.fromCharCode((Me&15)<<12|(Ct&63)<<6|wn&63)}else le+=ke.substr(xe,9);xe+=9}else le+=ke.substr(xe,3),xe+=3}return le}function fe(ke,le){function xe(Re){var Me=ce(Re);return Me.match(le.UNRESERVED)?Me:Re}return ke.scheme&&(ke.scheme=String(ke.scheme).replace(le.PCT_ENCODED,xe).toLowerCase().replace(le.NOT_SCHEME,"")),ke.userinfo!==void 0&&(ke.userinfo=String(ke.userinfo).replace(le.PCT_ENCODED,xe).replace(le.NOT_USERINFO,ue).replace(le.PCT_ENCODED,a)),ke.host!==void 0&&(ke.host=String(ke.host).replace(le.PCT_ENCODED,xe).toLowerCase().replace(le.NOT_HOST,ue).replace(le.PCT_ENCODED,a)),ke.path!==void 0&&(ke.path=String(ke.path).replace(le.PCT_ENCODED,xe).replace(ke.scheme?le.NOT_PATH:le.NOT_PATH_NOSCHEME,ue).replace(le.PCT_ENCODED,a)),ke.query!==void 0&&(ke.query=String(ke.query).replace(le.PCT_ENCODED,xe).replace(le.NOT_QUERY,ue).replace(le.PCT_ENCODED,a)),ke.fragment!==void 0&&(ke.fragment=String(ke.fragment).replace(le.PCT_ENCODED,xe).replace(le.NOT_FRAGMENT,ue).replace(le.PCT_ENCODED,a)),ke}function ye(ke){return ke.replace(/^0*(.*)/,"$1")||"0"}function j(ke,le){var xe=ke.match(le.IPV4ADDRESS)||[],Re=d(xe,2),Me=Re[1];return Me?Me.split(".").map(ye).join("."):ke}function Y(ke,le){var xe=ke.match(le.IPV6ADDRESS)||[],Re=d(xe,3),Me=Re[1],kt=Re[2];if(Me){for(var Ct=Me.toLowerCase().split("::").reverse(),wn=d(Ct,2),sr=wn[0],Dr=wn[1],yn=Dr?Dr.split(":").map(ye):[],qn=sr.split(":").map(ye),Nr=le.IPV4ADDRESS.test(qn[qn.length-1]),Xt=Nr?7:8,dr=qn.length-Xt,mr=Array(Xt),vr=0;vr<Xt;++vr)mr[vr]=yn[vr]||qn[dr+vr]||"";Nr&&(mr[Xt-1]=j(mr[Xt-1],le));var po=mr.reduce(function(Wi,Oo,ei){if(!Oo||Oo==="0"){var ro=Wi[Wi.length-1];ro&&ro.index+ro.length===ei?ro.length++:Wi.push({index:ei,length:1})}return Wi},[]),Ia=po.sort(function(Wi,Oo){return Oo.length-Wi.length})[0],$a=void 0;if(Ia&&Ia.length>1){var Bl=mr.slice(0,Ia.index),_s=mr.slice(Ia.index+Ia.length);$a=Bl.join(":")+"::"+_s.join(":")}else $a=mr.join(":");return kt&&($a+="%"+kt),$a}else return ke}var O=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,M="".match(/(){0}/)[1]===void 0;function H(ke){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},xe={},Re=le.iri!==!1?f:u;le.reference==="suffix"&&(ke=(le.scheme?le.scheme+":":"")+"//"+ke);var Me=ke.match(O);if(Me){M?(xe.scheme=Me[1],xe.userinfo=Me[3],xe.host=Me[4],xe.port=parseInt(Me[5],10),xe.path=Me[6]||"",xe.query=Me[7],xe.fragment=Me[8],isNaN(xe.port)&&(xe.port=Me[5])):(xe.scheme=Me[1]||void 0,xe.userinfo=ke.indexOf("@")!==-1?Me[3]:void 0,xe.host=ke.indexOf("//")!==-1?Me[4]:void 0,xe.port=parseInt(Me[5],10),xe.path=Me[6]||"",xe.query=ke.indexOf("?")!==-1?Me[7]:void 0,xe.fragment=ke.indexOf("#")!==-1?Me[8]:void 0,isNaN(xe.port)&&(xe.port=ke.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Me[4]:void 0)),xe.host&&(xe.host=Y(j(xe.host,Re),Re)),xe.scheme===void 0&&xe.userinfo===void 0&&xe.host===void 0&&xe.port===void 0&&!xe.path&&xe.query===void 0?xe.reference="same-document":xe.scheme===void 0?xe.reference="relative":xe.fragment===void 0?xe.reference="absolute":xe.reference="uri",le.reference&&le.reference!=="suffix"&&le.reference!==xe.reference&&(xe.error=xe.error||"URI is not a "+le.reference+" reference.");var kt=te[(le.scheme||xe.scheme||"").toLowerCase()];if(!le.unicodeSupport&&(!kt||!kt.unicodeSupport)){if(xe.host&&(le.domainHost||kt&&kt.domainHost))try{xe.host=ae.toASCII(xe.host.replace(Re.PCT_ENCODED,ce).toLowerCase())}catch(Ct){xe.error=xe.error||"Host's domain name can not be converted to ASCII via punycode: "+Ct}fe(xe,u)}else fe(xe,Re);kt&&kt.parse&&kt.parse(xe,le)}else xe.error=xe.error||"URI can not be parsed.";return xe}function Q(ke,le){var xe=le.iri!==!1?f:u,Re=[];return ke.userinfo!==void 0&&(Re.push(ke.userinfo),Re.push("@")),ke.host!==void 0&&Re.push(Y(j(String(ke.host),xe),xe).replace(xe.IPV6ADDRESS,function(Me,kt,Ct){return"["+kt+(Ct?"%25"+Ct:"")+"]"})),(typeof ke.port=="number"||typeof ke.port=="string")&&(Re.push(":"),Re.push(String(ke.port))),Re.length?Re.join(""):void 0}var ve=/^\.\.?\//,ge=/^\/\.(\/|$)/,De=/^\/\.\.(\/|$)/,Le=/^\/?(?:.|\n)*?(?=\/|$)/;function tt(ke){for(var le=[];ke.length;)if(ke.match(ve))ke=ke.replace(ve,"");else if(ke.match(ge))ke=ke.replace(ge,"/");else if(ke.match(De))ke=ke.replace(De,"/"),le.pop();else if(ke==="."||ke==="..")ke="";else{var xe=ke.match(Le);if(xe){var Re=xe[0];ke=ke.slice(Re.length),le.push(Re)}else throw new Error("Unexpected dot segment condition")}return le.join("")}function Xe(ke){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},xe=le.iri?f:u,Re=[],Me=te[(le.scheme||ke.scheme||"").toLowerCase()];if(Me&&Me.serialize&&Me.serialize(ke,le),ke.host&&!xe.IPV6ADDRESS.test(ke.host)){if(le.domainHost||Me&&Me.domainHost)try{ke.host=le.iri?ae.toUnicode(ke.host):ae.toASCII(ke.host.replace(xe.PCT_ENCODED,ce).toLowerCase())}catch(wn){ke.error=ke.error||"Host's domain name can not be converted to "+(le.iri?"Unicode":"ASCII")+" via punycode: "+wn}}fe(ke,xe),le.reference!=="suffix"&&ke.scheme&&(Re.push(ke.scheme),Re.push(":"));var kt=Q(ke,le);if(kt!==void 0&&(le.reference!=="suffix"&&Re.push("//"),Re.push(kt),ke.path&&ke.path.charAt(0)!=="/"&&Re.push("/")),ke.path!==void 0){var Ct=ke.path;!le.absolutePath&&(!Me||!Me.absolutePath)&&(Ct=tt(Ct)),kt===void 0&&(Ct=Ct.replace(/^\/\//,"/%2F")),Re.push(Ct)}return ke.query!==void 0&&(Re.push("?"),Re.push(ke.query)),ke.fragment!==void 0&&(Re.push("#"),Re.push(ke.fragment)),Re.join("")}function et(ke,le){var xe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Re=arguments[3],Me={};return Re||(ke=H(Xe(ke,xe),xe),le=H(Xe(le,xe),xe)),xe=xe||{},!xe.tolerant&&le.scheme?(Me.scheme=le.scheme,Me.userinfo=le.userinfo,Me.host=le.host,Me.port=le.port,Me.path=tt(le.path||""),Me.query=le.query):(le.userinfo!==void 0||le.host!==void 0||le.port!==void 0?(Me.userinfo=le.userinfo,Me.host=le.host,Me.port=le.port,Me.path=tt(le.path||""),Me.query=le.query):(le.path?(le.path.charAt(0)==="/"?Me.path=tt(le.path):((ke.userinfo!==void 0||ke.host!==void 0||ke.port!==void 0)&&!ke.path?Me.path="/"+le.path:ke.path?Me.path=ke.path.slice(0,ke.path.lastIndexOf("/")+1)+le.path:Me.path=le.path,Me.path=tt(Me.path)),Me.query=le.query):(Me.path=ke.path,le.query!==void 0?Me.query=le.query:Me.query=ke.query),Me.userinfo=ke.userinfo,Me.host=ke.host,Me.port=ke.port),Me.scheme=ke.scheme),Me.fragment=le.fragment,Me}function Qe(ke,le,xe){var Re=l({scheme:"null"},xe);return Xe(et(H(ke,Re),H(le,Re),Re,!0),Re)}function pt(ke,le){return typeof ke=="string"?ke=Xe(H(ke,le),le):o(ke)==="object"&&(ke=H(Xe(ke,le),le)),ke}function zt(ke,le,xe){return typeof ke=="string"?ke=Xe(H(ke,xe),xe):o(ke)==="object"&&(ke=Xe(ke,xe)),typeof le=="string"?le=Xe(H(le,xe),xe):o(le)==="object"&&(le=Xe(le,xe)),ke===le}function Kt(ke,le){return ke&&ke.toString().replace(!le||!le.iri?u.ESCAPE:f.ESCAPE,ue)}function wt(ke,le){return ke&&ke.toString().replace(!le||!le.iri?u.PCT_ENCODED:f.PCT_ENCODED,ce)}var sn={scheme:"http",domainHost:!0,parse:function(le,xe){return le.host||(le.error=le.error||"HTTP URIs must have a host."),le},serialize:function(le,xe){var Re=String(le.scheme).toLowerCase()==="https";return(le.port===(Re?443:80)||le.port==="")&&(le.port=void 0),le.path||(le.path="/"),le}},gr={scheme:"https",domainHost:sn.domainHost,parse:sn.parse,serialize:sn.serialize};function mi(ke){return typeof ke.secure=="boolean"?ke.secure:String(ke.scheme).toLowerCase()==="wss"}var Lr={scheme:"ws",domainHost:!0,parse:function(le,xe){var Re=le;return Re.secure=mi(Re),Re.resourceName=(Re.path||"/")+(Re.query?"?"+Re.query:""),Re.path=void 0,Re.query=void 0,Re},serialize:function(le,xe){if((le.port===(mi(le)?443:80)||le.port==="")&&(le.port=void 0),typeof le.secure=="boolean"&&(le.scheme=le.secure?"wss":"ws",le.secure=void 0),le.resourceName){var Re=le.resourceName.split("?"),Me=d(Re,2),kt=Me[0],Ct=Me[1];le.path=kt&&kt!=="/"?kt:void 0,le.query=Ct,le.resourceName=void 0}return le.fragment=void 0,le}},ho={scheme:"wss",domainHost:Lr.domainHost,parse:Lr.parse,serialize:Lr.serialize},Tr={},Vn="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Bn="[0-9A-Fa-f]",Oa=i(i("%[EFef]"+Bn+"%"+Bn+Bn+"%"+Bn+Bn)+"|"+i("%[89A-Fa-f]"+Bn+"%"+Bn+Bn)+"|"+i("%"+Bn+Bn)),Df="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Tu="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Tc=r(Tu,'[\\"\\\\]'),Ss="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Ui=new RegExp(Vn,"g"),Ac=new RegExp(Oa,"g"),ty=new RegExp(r("[^]",Df,"[\\.]",'[\\"]',Tc),"g"),Nf=new RegExp(r("[^]",Vn,Ss),"g"),Au=Nf;function Th(ke){var le=ce(ke);return le.match(Ui)?le:ke}var om={scheme:"mailto",parse:function(le,xe){var Re=le,Me=Re.to=Re.path?Re.path.split(","):[];if(Re.path=void 0,Re.query){for(var kt=!1,Ct={},wn=Re.query.split("&"),sr=0,Dr=wn.length;sr<Dr;++sr){var yn=wn[sr].split("=");switch(yn[0]){case"to":for(var qn=yn[1].split(","),Nr=0,Xt=qn.length;Nr<Xt;++Nr)Me.push(qn[Nr]);break;case"subject":Re.subject=wt(yn[1],xe);break;case"body":Re.body=wt(yn[1],xe);break;default:kt=!0,Ct[wt(yn[0],xe)]=wt(yn[1],xe);break}}kt&&(Re.headers=Ct)}Re.query=void 0;for(var dr=0,mr=Me.length;dr<mr;++dr){var vr=Me[dr].split("@");if(vr[0]=wt(vr[0]),xe.unicodeSupport)vr[1]=wt(vr[1],xe).toLowerCase();else try{vr[1]=ae.toASCII(wt(vr[1],xe).toLowerCase())}catch(po){Re.error=Re.error||"Email address's domain name can not be converted to ASCII via punycode: "+po}Me[dr]=vr.join("@")}return Re},serialize:function(le,xe){var Re=le,Me=s(le.to);if(Me){for(var kt=0,Ct=Me.length;kt<Ct;++kt){var wn=String(Me[kt]),sr=wn.lastIndexOf("@"),Dr=wn.slice(0,sr).replace(Ac,Th).replace(Ac,a).replace(ty,ue),yn=wn.slice(sr+1);try{yn=xe.iri?ae.toUnicode(yn):ae.toASCII(wt(yn,xe).toLowerCase())}catch(dr){Re.error=Re.error||"Email address's domain name can not be converted to "+(xe.iri?"Unicode":"ASCII")+" via punycode: "+dr}Me[kt]=Dr+"@"+yn}Re.path=Me.join(",")}var qn=le.headers=le.headers||{};le.subject&&(qn.subject=le.subject),le.body&&(qn.body=le.body);var Nr=[];for(var Xt in qn)qn[Xt]!==Tr[Xt]&&Nr.push(Xt.replace(Ac,Th).replace(Ac,a).replace(Nf,ue)+"="+qn[Xt].replace(Ac,Th).replace(Ac,a).replace(Au,ue));return Nr.length&&(Re.query=Nr.join("&")),Re}},ny=/^([^\:]+)\:(.*)/,Pu={scheme:"urn",parse:function(le,xe){var Re=le.path&&le.path.match(ny),Me=le;if(Re){var kt=xe.scheme||Me.scheme||"urn",Ct=Re[1].toLowerCase(),wn=Re[2],sr=kt+":"+(xe.nid||Ct),Dr=te[sr];Me.nid=Ct,Me.nss=wn,Me.path=void 0,Dr&&(Me=Dr.parse(Me,xe))}else Me.error=Me.error||"URN can not be parsed.";return Me},serialize:function(le,xe){var Re=xe.scheme||le.scheme||"urn",Me=le.nid,kt=Re+":"+(xe.nid||Me),Ct=te[kt];Ct&&(le=Ct.serialize(le,xe));var wn=le,sr=le.nss;return wn.path=(Me||xe.nid)+":"+sr,wn}},ry=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Mf={scheme:"urn:uuid",parse:function(le,xe){var Re=le;return Re.uuid=Re.nss,Re.nss=void 0,!xe.tolerant&&(!Re.uuid||!Re.uuid.match(ry))&&(Re.error=Re.error||"UUID is not valid."),Re},serialize:function(le,xe){var Re=le;return Re.nss=(le.uuid||"").toLowerCase(),Re}};te[sn.scheme]=sn,te[gr.scheme]=gr,te[Lr.scheme]=Lr,te[ho.scheme]=ho,te[om.scheme]=om,te[Pu.scheme]=Pu,te[Mf.scheme]=Mf,n.SCHEMES=te,n.pctEncChar=ue,n.pctDecChars=ce,n.parse=H,n.removeDotSegments=tt,n.serialize=Xe,n.resolveComponents=et,n.resolve=Qe,n.normalize=pt,n.equal=zt,n.escapeComponent=Kt,n.unescapeComponent=wt,Object.defineProperty(n,"__esModule",{value:!0})})})(tO,tO.exports);var Q$e=tO.exports;Object.defineProperty(eF,"__esModule",{value:!0});const gie=Q$e;gie.code='require("ajv/dist/runtime/uri").default';eF.default=gie;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var e=hc;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return e.KeywordCxt}});var n=_n;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=yS,i=bS,o=Pg,a=ns,s=_n,l=Co,c=vS,u=er,f=Z$e,d=eF,h=(Se,se)=>new RegExp(Se,se);h.code="new RegExp";const g=["removeAdditional","useDefaults","coerceTypes"],y=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),S={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},v={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},_=200;function x(Se){var se,ne,J,V,W,ae,te,ue,ce,fe,ye,j,Y,O,M,H,Q,ve,ge,De,Le,tt,Xe,et,Qe;const pt=Se.strict,zt=(se=Se.code)===null||se===void 0?void 0:se.optimize,Kt=zt===!0||zt===void 0?1:zt||0,wt=(J=(ne=Se.code)===null||ne===void 0?void 0:ne.regExp)!==null&&J!==void 0?J:h,sn=(V=Se.uriResolver)!==null&&V!==void 0?V:d.default;return{strictSchema:(ae=(W=Se.strictSchema)!==null&&W!==void 0?W:pt)!==null&&ae!==void 0?ae:!0,strictNumbers:(ue=(te=Se.strictNumbers)!==null&&te!==void 0?te:pt)!==null&&ue!==void 0?ue:!0,strictTypes:(fe=(ce=Se.strictTypes)!==null&&ce!==void 0?ce:pt)!==null&&fe!==void 0?fe:"log",strictTuples:(j=(ye=Se.strictTuples)!==null&&ye!==void 0?ye:pt)!==null&&j!==void 0?j:"log",strictRequired:(O=(Y=Se.strictRequired)!==null&&Y!==void 0?Y:pt)!==null&&O!==void 0?O:!1,code:Se.code?{...Se.code,optimize:Kt,regExp:wt}:{optimize:Kt,regExp:wt},loopRequired:(M=Se.loopRequired)!==null&&M!==void 0?M:_,loopEnum:(H=Se.loopEnum)!==null&&H!==void 0?H:_,meta:(Q=Se.meta)!==null&&Q!==void 0?Q:!0,messages:(ve=Se.messages)!==null&&ve!==void 0?ve:!0,inlineRefs:(ge=Se.inlineRefs)!==null&&ge!==void 0?ge:!0,schemaId:(De=Se.schemaId)!==null&&De!==void 0?De:"$id",addUsedSchema:(Le=Se.addUsedSchema)!==null&&Le!==void 0?Le:!0,validateSchema:(tt=Se.validateSchema)!==null&&tt!==void 0?tt:!0,validateFormats:(Xe=Se.validateFormats)!==null&&Xe!==void 0?Xe:!0,unicodeRegExp:(et=Se.unicodeRegExp)!==null&&et!==void 0?et:!0,int32range:(Qe=Se.int32range)!==null&&Qe!==void 0?Qe:!0,uriResolver:sn}}class C{constructor(se={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,se=this.opts={...se,...x(se)};const{es5:ne,lines:J}=this.opts.code;this.scope=new s.ValueScope({scope:{},prefixes:y,es5:ne,lines:J}),this.logger=R(se.logger);const V=se.validateFormats;se.validateFormats=!1,this.RULES=(0,o.getRules)(),k.call(this,S,se,"NOT SUPPORTED"),k.call(this,v,se,"DEPRECATED","warn"),this._metaOpts=D.call(this),se.formats&&E.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),se.keywords&&I.call(this,se.keywords),typeof se.meta=="object"&&this.addMetaSchema(se.meta),T.call(this),se.validateFormats=V}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:se,meta:ne,schemaId:J}=this.opts;let V=f;J==="id"&&(V={...f},V.id=V.$id,delete V.$id),ne&&se&&this.addMetaSchema(V,V[J],!1)}defaultMeta(){const{meta:se,schemaId:ne}=this.opts;return this.opts.defaultMeta=typeof se=="object"?se[ne]||se:void 0}validate(se,ne){let J;if(typeof se=="string"){if(J=this.getSchema(se),!J)throw new Error(`no schema with key or ref "${se}"`)}else J=this.compile(se);const V=J(ne);return"$async"in J||(this.errors=J.errors),V}compile(se,ne){const J=this._addSchema(se,ne);return J.validate||this._compileSchemaEnv(J)}compileAsync(se,ne){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:J}=this.opts;return V.call(this,se,ne);async function V(fe,ye){await W.call(this,fe.$schema);const j=this._addSchema(fe,ye);return j.validate||ae.call(this,j)}async function W(fe){fe&&!this.getSchema(fe)&&await V.call(this,{$ref:fe},!0)}async function ae(fe){try{return this._compileSchemaEnv(fe)}catch(ye){if(!(ye instanceof i.default))throw ye;return te.call(this,ye),await ue.call(this,ye.missingSchema),ae.call(this,fe)}}function te({missingSchema:fe,missingRef:ye}){if(this.refs[fe])throw new Error(`AnySchema ${fe} is loaded but ${ye} cannot be resolved`)}async function ue(fe){const ye=await ce.call(this,fe);this.refs[fe]||await W.call(this,ye.$schema),this.refs[fe]||this.addSchema(ye,fe,ne)}async function ce(fe){const ye=this._loading[fe];if(ye)return ye;try{return await(this._loading[fe]=J(fe))}finally{delete this._loading[fe]}}}addSchema(se,ne,J,V=this.opts.validateSchema){if(Array.isArray(se)){for(const ae of se)this.addSchema(ae,void 0,J,V);return this}let W;if(typeof se=="object"){const{schemaId:ae}=this.opts;if(W=se[ae],W!==void 0&&typeof W!="string")throw new Error(`schema ${ae} must be string`)}return ne=(0,l.normalizeId)(ne||W),this._checkUnique(ne),this.schemas[ne]=this._addSchema(se,J,ne,V,!0),this}addMetaSchema(se,ne,J=this.opts.validateSchema){return this.addSchema(se,ne,!0,J),this}validateSchema(se,ne){if(typeof se=="boolean")return!0;let J;if(J=se.$schema,J!==void 0&&typeof J!="string")throw new Error("$schema must be a string");if(J=J||this.opts.defaultMeta||this.defaultMeta(),!J)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const V=this.validate(J,se);if(!V&&ne){const W="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(W);else throw new Error(W)}return V}getSchema(se){let ne;for(;typeof(ne=m.call(this,se))=="string";)se=ne;if(ne===void 0){const{schemaId:J}=this.opts,V=new a.SchemaEnv({schema:{},schemaId:J});if(ne=a.resolveSchema.call(this,V,se),!ne)return;this.refs[se]=ne}return ne.validate||this._compileSchemaEnv(ne)}removeSchema(se){if(se instanceof RegExp)return this._removeAllSchemas(this.schemas,se),this._removeAllSchemas(this.refs,se),this;switch(typeof se){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const ne=m.call(this,se);return typeof ne=="object"&&this._cache.delete(ne.schema),delete this.schemas[se],delete this.refs[se],this}case"object":{const ne=se;this._cache.delete(ne);let J=se[this.opts.schemaId];return J&&(J=(0,l.normalizeId)(J),delete this.schemas[J],delete this.refs[J]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(se){for(const ne of se)this.addKeyword(ne);return this}addKeyword(se,ne){let J;if(typeof se=="string")J=se,typeof ne=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),ne.keyword=J);else if(typeof se=="object"&&ne===void 0){if(ne=se,J=ne.keyword,Array.isArray(J)&&!J.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(B.call(this,J,ne),!ne)return(0,u.eachItem)(J,W=>ie.call(this,W)),this;_e.call(this,ne);const V={...ne,type:(0,c.getJSONTypes)(ne.type),schemaType:(0,c.getJSONTypes)(ne.schemaType)};return(0,u.eachItem)(J,V.type.length===0?W=>ie.call(this,W,V):W=>V.type.forEach(ae=>ie.call(this,W,V,ae))),this}getKeyword(se){const ne=this.RULES.all[se];return typeof ne=="object"?ne.definition:!!ne}removeKeyword(se){const{RULES:ne}=this;delete ne.keywords[se],delete ne.all[se];for(const J of ne.rules){const V=J.rules.findIndex(W=>W.keyword===se);V>=0&&J.rules.splice(V,1)}return this}addFormat(se,ne){return typeof ne=="string"&&(ne=new RegExp(ne)),this.formats[se]=ne,this}errorsText(se=this.errors,{separator:ne=", ",dataVar:J="data"}={}){return!se||se.length===0?"No errors":se.map(V=>`${J}${V.instancePath} ${V.message}`).reduce((V,W)=>V+ne+W)}$dataMetaSchema(se,ne){const J=this.RULES.all;se=JSON.parse(JSON.stringify(se));for(const V of ne){const W=V.split("/").slice(1);let ae=se;for(const te of W)ae=ae[te];for(const te in J){const ue=J[te];if(typeof ue!="object")continue;const{$data:ce}=ue.definition,fe=ae[te];ce&&fe&&(ae[te]=Pe(fe))}}return se}_removeAllSchemas(se,ne){for(const J in se){const V=se[J];(!ne||ne.test(J))&&(typeof V=="string"?delete se[J]:V&&!V.meta&&(this._cache.delete(V.schema),delete se[J]))}}_addSchema(se,ne,J,V=this.opts.validateSchema,W=this.opts.addUsedSchema){let ae;const{schemaId:te}=this.opts;if(typeof se=="object")ae=se[te];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof se!="boolean")throw new Error("schema must be object or boolean")}let ue=this._cache.get(se);if(ue!==void 0)return ue;J=(0,l.normalizeId)(ae||J);const ce=l.getSchemaRefs.call(this,se,J);return ue=new a.SchemaEnv({schema:se,schemaId:te,meta:ne,baseId:J,localRefs:ce}),this._cache.set(ue.schema,ue),W&&!J.startsWith("#")&&(J&&this._checkUnique(J),this.refs[J]=ue),V&&this.validateSchema(se,!0),ue}_checkUnique(se){if(this.schemas[se]||this.refs[se])throw new Error(`schema with key or id "${se}" already exists`)}_compileSchemaEnv(se){if(se.meta?this._compileMetaSchema(se):a.compileSchema.call(this,se),!se.validate)throw new Error("ajv implementation error");return se.validate}_compileMetaSchema(se){const ne=this.opts;this.opts=this._metaOpts;try{a.compileSchema.call(this,se)}finally{this.opts=ne}}}t.default=C,C.ValidationError=r.default,C.MissingRefError=i.default;function k(Se,se,ne,J="error"){for(const V in Se){const W=V;W in se&&this.logger[J](`${ne}: option ${V}. ${Se[W]}`)}}function m(Se){return Se=(0,l.normalizeId)(Se),this.schemas[Se]||this.refs[Se]}function T(){const Se=this.opts.schemas;if(Se)if(Array.isArray(Se))this.addSchema(Se);else for(const se in Se)this.addSchema(Se[se],se)}function E(){for(const Se in this.opts.formats){const se=this.opts.formats[Se];se&&this.addFormat(Se,se)}}function I(Se){if(Array.isArray(Se)){this.addVocabulary(Se);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const se in Se){const ne=Se[se];ne.keyword||(ne.keyword=se),this.addKeyword(ne)}}function D(){const Se={...this.opts};for(const se of g)delete Se[se];return Se}const F={log(){},warn(){},error(){}};function R(Se){if(Se===!1)return F;if(Se===void 0)return console;if(Se.log&&Se.warn&&Se.error)return Se;throw new Error("logger must implement log, warn and error methods")}const z=/^[a-z_$][a-z0-9_$:-]*$/i;function B(Se,se){const{RULES:ne}=this;if((0,u.eachItem)(Se,J=>{if(ne.keywords[J])throw new Error(`Keyword ${J} is already defined`);if(!z.test(J))throw new Error(`Keyword ${J} has invalid name`)}),!!se&&se.$data&&!("code"in se||"validate"in se))throw new Error('$data keyword must have "code" or "validate" function')}function ie(Se,se,ne){var J;const V=se==null?void 0:se.post;if(ne&&V)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:W}=this;let ae=V?W.post:W.rules.find(({type:ue})=>ue===ne);if(ae||(ae={type:ne,rules:[]},W.rules.push(ae)),W.keywords[Se]=!0,!se)return;const te={keyword:Se,definition:{...se,type:(0,c.getJSONTypes)(se.type),schemaType:(0,c.getJSONTypes)(se.schemaType)}};se.before?oe.call(this,ae,te,se.before):ae.rules.push(te),W.all[Se]=te,(J=se.implements)===null||J===void 0||J.forEach(ue=>this.addKeyword(ue))}function oe(Se,se,ne){const J=Se.rules.findIndex(V=>V.keyword===ne);J>=0?Se.rules.splice(J,0,se):(Se.rules.push(se),this.logger.warn(`rule ${ne} is not defined`))}function _e(Se){let{metaSchema:se}=Se;se!==void 0&&(Se.$data&&this.opts.$data&&(se=Pe(se)),Se.validateSchema=this.compile(se,!0))}const Ae={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Pe(Se){return{anyOf:[Se,Ae]}}})(Ure);var tF={},nF={},rF={};Object.defineProperty(rF,"__esModule",{value:!0});const eFe={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};rF.default=eFe;var Eg={};Object.defineProperty(Eg,"__esModule",{value:!0});Eg.callRef=Eg.getValidate=void 0;const tFe=bS,VH=Tn,Ya=_n,Mm=xu,BH=ns,lk=er,nFe={keyword:"$ref",schemaType:"string",code(t){const{gen:e,schema:n,it:r}=t,{baseId:i,schemaEnv:o,validateName:a,opts:s,self:l}=r,{root:c}=o;if((n==="#"||n==="#/")&&i===c.baseId)return f();const u=BH.resolveRef.call(l,c,i,n);if(u===void 0)throw new tFe.default(r.opts.uriResolver,i,n);if(u instanceof BH.SchemaEnv)return d(u);return h(u);function f(){if(o===c)return Tx(t,a,o,o.$async);const g=e.scopeValue("root",{ref:c});return Tx(t,(0,Ya._)`${g}.validate`,c,c.$async)}function d(g){const y=mie(t,g);Tx(t,y,g,g.$async)}function h(g){const y=e.scopeValue("schema",s.code.source===!0?{ref:g,code:(0,Ya.stringify)(g)}:{ref:g}),S=e.name("valid"),v=t.subschema({schema:g,dataTypes:[],schemaPath:Ya.nil,topSchemaRef:y,errSchemaPath:n},S);t.mergeEvaluated(v),t.ok(S)}}};function mie(t,e){const{gen:n}=t;return e.validate?n.scopeValue("validate",{ref:e.validate}):(0,Ya._)`${n.scopeValue("wrapper",{ref:e})}.validate`}Eg.getValidate=mie;function Tx(t,e,n,r){const{gen:i,it:o}=t,{allErrors:a,schemaEnv:s,opts:l}=o,c=l.passContext?Mm.default.this:Ya.nil;r?u():f();function u(){if(!s.$async)throw new Error("async schema referenced by sync schema");const g=i.let("valid");i.try(()=>{i.code((0,Ya._)`await ${(0,VH.callValidateCode)(t,e,c)}`),h(e),a||i.assign(g,!0)},y=>{i.if((0,Ya._)`!(${y} instanceof ${o.ValidationError})`,()=>i.throw(y)),d(y),a||i.assign(g,!1)}),t.ok(g)}function f(){t.result((0,VH.callValidateCode)(t,e,c),()=>h(e),()=>d(e))}function d(g){const y=(0,Ya._)`${g}.errors`;i.assign(Mm.default.vErrors,(0,Ya._)`${Mm.default.vErrors} === null ? ${y} : ${Mm.default.vErrors}.concat(${y})`),i.assign(Mm.default.errors,(0,Ya._)`${Mm.default.vErrors}.length`)}function h(g){var y;if(!o.opts.unevaluated)return;const S=(y=n==null?void 0:n.validate)===null||y===void 0?void 0:y.evaluated;if(o.props!==!0)if(S&&!S.dynamicProps)S.props!==void 0&&(o.props=lk.mergeEvaluated.props(i,S.props,o.props));else{const v=i.var("props",(0,Ya._)`${g}.evaluated.props`);o.props=lk.mergeEvaluated.props(i,v,o.props,Ya.Name)}if(o.items!==!0)if(S&&!S.dynamicItems)S.items!==void 0&&(o.items=lk.mergeEvaluated.items(i,S.items,o.items));else{const v=i.var("items",(0,Ya._)`${g}.evaluated.items`);o.items=lk.mergeEvaluated.items(i,v,o.items,Ya.Name)}}}Eg.callRef=Tx;Eg.default=nFe;Object.defineProperty(nF,"__esModule",{value:!0});const rFe=rF,iFe=Eg,oFe=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",rFe.default,iFe.default];nF.default=oFe;var iF={},oF={};Object.defineProperty(oF,"__esModule",{value:!0});const lC=_n,od=lC.operators,cC={maximum:{okStr:"<=",ok:od.LTE,fail:od.GT},minimum:{okStr:">=",ok:od.GTE,fail:od.LT},exclusiveMaximum:{okStr:"<",ok:od.LT,fail:od.GTE},exclusiveMinimum:{okStr:">",ok:od.GT,fail:od.LTE}},aFe={message:({keyword:t,schemaCode:e})=>(0,lC.str)`must be ${cC[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,lC._)`{comparison: ${cC[t].okStr}, limit: ${e}}`},sFe={keyword:Object.keys(cC),type:"number",schemaType:"number",$data:!0,error:aFe,code(t){const{keyword:e,data:n,schemaCode:r}=t;t.fail$data((0,lC._)`${n} ${cC[e].fail} ${r} || isNaN(${n})`)}};oF.default=sFe;var aF={};Object.defineProperty(aF,"__esModule",{value:!0});const d1=_n,lFe={message:({schemaCode:t})=>(0,d1.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,d1._)`{multipleOf: ${t}}`},cFe={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:lFe,code(t){const{gen:e,data:n,schemaCode:r,it:i}=t,o=i.opts.multipleOfPrecision,a=e.let("res"),s=o?(0,d1._)`Math.abs(Math.round(${a}) - ${a}) > 1e-${o}`:(0,d1._)`${a} !== parseInt(${a})`;t.fail$data((0,d1._)`(${r} === 0 || (${a} = ${n}/${r}, ${s}))`)}};aF.default=cFe;var sF={},lF={};Object.defineProperty(lF,"__esModule",{value:!0});function vie(t){const e=t.length;let n=0,r=0,i;for(;r<e;)n++,i=t.charCodeAt(r++),i>=55296&&i<=56319&&r<e&&(i=t.charCodeAt(r),(i&64512)===56320&&r++);return n}lF.default=vie;vie.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(sF,"__esModule",{value:!0});const Fp=_n,uFe=er,fFe=lF,dFe={message({keyword:t,schemaCode:e}){const n=t==="maxLength"?"more":"fewer";return(0,Fp.str)`must NOT have ${n} than ${e} characters`},params:({schemaCode:t})=>(0,Fp._)`{limit: ${t}}`},hFe={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:dFe,code(t){const{keyword:e,data:n,schemaCode:r,it:i}=t,o=e==="maxLength"?Fp.operators.GT:Fp.operators.LT,a=i.opts.unicode===!1?(0,Fp._)`${n}.length`:(0,Fp._)`${(0,uFe.useFunc)(t.gen,fFe.default)}(${n})`;t.fail$data((0,Fp._)`${a} ${o} ${r}`)}};sF.default=hFe;var cF={};Object.defineProperty(cF,"__esModule",{value:!0});const pFe=Tn,uC=_n,gFe={message:({schemaCode:t})=>(0,uC.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,uC._)`{pattern: ${t}}`},mFe={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:gFe,code(t){const{data:e,$data:n,schema:r,schemaCode:i,it:o}=t,a=o.opts.unicodeRegExp?"u":"",s=n?(0,uC._)`(new RegExp(${i}, ${a}))`:(0,pFe.usePattern)(t,r);t.fail$data((0,uC._)`!${s}.test(${e})`)}};cF.default=mFe;var uF={};Object.defineProperty(uF,"__esModule",{value:!0});const h1=_n,vFe={message({keyword:t,schemaCode:e}){const n=t==="maxProperties"?"more":"fewer";return(0,h1.str)`must NOT have ${n} than ${e} properties`},params:({schemaCode:t})=>(0,h1._)`{limit: ${t}}`},yFe={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:vFe,code(t){const{keyword:e,data:n,schemaCode:r}=t,i=e==="maxProperties"?h1.operators.GT:h1.operators.LT;t.fail$data((0,h1._)`Object.keys(${n}).length ${i} ${r}`)}};uF.default=yFe;var fF={};Object.defineProperty(fF,"__esModule",{value:!0});const ob=Tn,p1=_n,bFe=er,SFe={message:({params:{missingProperty:t}})=>(0,p1.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,p1._)`{missingProperty: ${t}}`},_Fe={keyword:"required",type:"object",schemaType:"array",$data:!0,error:SFe,code(t){const{gen:e,schema:n,schemaCode:r,data:i,$data:o,it:a}=t,{opts:s}=a;if(!o&&n.length===0)return;const l=n.length>=s.loopRequired;if(a.allErrors?c():u(),s.strictRequired){const h=t.parentSchema.properties,{definedProperties:g}=t.it;for(const y of n)if((h==null?void 0:h[y])===void 0&&!g.has(y)){const S=a.schemaEnv.baseId+a.errSchemaPath,v=`required property "${y}" is not defined at "${S}" (strictRequired)`;(0,bFe.checkStrictMode)(a,v,a.opts.strictRequired)}}function c(){if(l||o)t.block$data(p1.nil,f);else for(const h of n)(0,ob.checkReportMissingProp)(t,h)}function u(){const h=e.let("missing");if(l||o){const g=e.let("valid",!0);t.block$data(g,()=>d(h,g)),t.ok(g)}else e.if((0,ob.checkMissingProp)(t,n,h)),(0,ob.reportMissingProp)(t,h),e.else()}function f(){e.forOf("prop",r,h=>{t.setParams({missingProperty:h}),e.if((0,ob.noPropertyInData)(e,i,h,s.ownProperties),()=>t.error())})}function d(h,g){t.setParams({missingProperty:h}),e.forOf(h,r,()=>{e.assign(g,(0,ob.propertyInData)(e,i,h,s.ownProperties)),e.if((0,p1.not)(g),()=>{t.error(),e.break()})},p1.nil)}}};fF.default=_Fe;var dF={};Object.defineProperty(dF,"__esModule",{value:!0});const g1=_n,wFe={message({keyword:t,schemaCode:e}){const n=t==="maxItems"?"more":"fewer";return(0,g1.str)`must NOT have ${n} than ${e} items`},params:({schemaCode:t})=>(0,g1._)`{limit: ${t}}`},kFe={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:wFe,code(t){const{keyword:e,data:n,schemaCode:r}=t,i=e==="maxItems"?g1.operators.GT:g1.operators.LT;t.fail$data((0,g1._)`${n}.length ${i} ${r}`)}};dF.default=kFe;var hF={},SS={};Object.defineProperty(SS,"__esModule",{value:!0});const yie=X$;yie.code='require("ajv/dist/runtime/equal").default';SS.default=yie;Object.defineProperty(hF,"__esModule",{value:!0});const p7=vS,vo=_n,xFe=er,CFe=SS,TFe={message:({params:{i:t,j:e}})=>(0,vo.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,vo._)`{i: ${t}, j: ${e}}`},AFe={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:TFe,code(t){const{gen:e,data:n,$data:r,schema:i,parentSchema:o,schemaCode:a,it:s}=t;if(!r&&!i)return;const l=e.let("valid"),c=o.items?(0,p7.getSchemaTypes)(o.items):[];t.block$data(l,u,(0,vo._)`${a} === false`),t.ok(l);function u(){const g=e.let("i",(0,vo._)`${n}.length`),y=e.let("j");t.setParams({i:g,j:y}),e.assign(l,!0),e.if((0,vo._)`${g} > 1`,()=>(f()?d:h)(g,y))}function f(){return c.length>0&&!c.some(g=>g==="object"||g==="array")}function d(g,y){const S=e.name("item"),v=(0,p7.checkDataTypes)(c,S,s.opts.strictNumbers,p7.DataType.Wrong),_=e.const("indices",(0,vo._)`{}`);e.for((0,vo._)`;${g}--;`,()=>{e.let(S,(0,vo._)`${n}[${g}]`),e.if(v,(0,vo._)`continue`),c.length>1&&e.if((0,vo._)`typeof ${S} == "string"`,(0,vo._)`${S} += "_"`),e.if((0,vo._)`typeof ${_}[${S}] == "number"`,()=>{e.assign(y,(0,vo._)`${_}[${S}]`),t.error(),e.assign(l,!1).break()}).code((0,vo._)`${_}[${S}] = ${g}`)})}function h(g,y){const S=(0,xFe.useFunc)(e,CFe.default),v=e.name("outer");e.label(v).for((0,vo._)`;${g}--;`,()=>e.for((0,vo._)`${y} = ${g}; ${y}--;`,()=>e.if((0,vo._)`${S}(${n}[${g}], ${n}[${y}])`,()=>{t.error(),e.assign(l,!1).break(v)})))}}};hF.default=AFe;var pF={};Object.defineProperty(pF,"__esModule",{value:!0});const nO=_n,PFe=er,EFe=SS,OFe={message:"must be equal to constant",params:({schemaCode:t})=>(0,nO._)`{allowedValue: ${t}}`},IFe={keyword:"const",$data:!0,error:OFe,code(t){const{gen:e,data:n,$data:r,schemaCode:i,schema:o}=t;r||o&&typeof o=="object"?t.fail$data((0,nO._)`!${(0,PFe.useFunc)(e,EFe.default)}(${n}, ${i})`):t.fail((0,nO._)`${o} !== ${n}`)}};pF.default=IFe;var gF={};Object.defineProperty(gF,"__esModule",{value:!0});const Fb=_n,$Fe=er,FFe=SS,LFe={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,Fb._)`{allowedValues: ${t}}`},DFe={keyword:"enum",schemaType:"array",$data:!0,error:LFe,code(t){const{gen:e,data:n,$data:r,schema:i,schemaCode:o,it:a}=t;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const s=i.length>=a.opts.loopEnum;let l;const c=()=>l??(l=(0,$Fe.useFunc)(e,FFe.default));let u;if(s||r)u=e.let("valid"),t.block$data(u,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const h=e.const("vSchema",o);u=(0,Fb.or)(...i.map((g,y)=>d(h,y)))}t.pass(u);function f(){e.assign(u,!1),e.forOf("v",o,h=>e.if((0,Fb._)`${c()}(${n}, ${h})`,()=>e.assign(u,!0).break()))}function d(h,g){const y=i[g];return typeof y=="object"&&y!==null?(0,Fb._)`${c()}(${n}, ${h}[${g}])`:(0,Fb._)`${n} === ${y}`}}};gF.default=DFe;Object.defineProperty(iF,"__esModule",{value:!0});const NFe=oF,MFe=aF,RFe=sF,zFe=cF,VFe=uF,BFe=fF,jFe=dF,HFe=hF,UFe=pF,WFe=gF,GFe=[NFe.default,MFe.default,RFe.default,zFe.default,VFe.default,BFe.default,jFe.default,HFe.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},UFe.default,WFe.default];iF.default=GFe;var mF={},z0={};Object.defineProperty(z0,"__esModule",{value:!0});z0.validateAdditionalItems=void 0;const Lp=_n,rO=er,qFe={message:({params:{len:t}})=>(0,Lp.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,Lp._)`{limit: ${t}}`},YFe={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:qFe,code(t){const{parentSchema:e,it:n}=t,{items:r}=e;if(!Array.isArray(r)){(0,rO.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}bie(t,r)}};function bie(t,e){const{gen:n,schema:r,data:i,keyword:o,it:a}=t;a.items=!0;const s=n.const("len",(0,Lp._)`${i}.length`);if(r===!1)t.setParams({len:e.length}),t.pass((0,Lp._)`${s} <= ${e.length}`);else if(typeof r=="object"&&!(0,rO.alwaysValidSchema)(a,r)){const c=n.var("valid",(0,Lp._)`${s} <= ${e.length}`);n.if((0,Lp.not)(c),()=>l(c)),t.ok(c)}function l(c){n.forRange("i",e.length,s,u=>{t.subschema({keyword:o,dataProp:u,dataPropType:rO.Type.Num},c),a.allErrors||n.if((0,Lp.not)(c),()=>n.break())})}}z0.validateAdditionalItems=bie;z0.default=YFe;var vF={},V0={};Object.defineProperty(V0,"__esModule",{value:!0});V0.validateTuple=void 0;const jH=_n,Ax=er,KFe=Tn,XFe={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){const{schema:e,it:n}=t;if(Array.isArray(e))return Sie(t,"additionalItems",e);n.items=!0,!(0,Ax.alwaysValidSchema)(n,e)&&t.ok((0,KFe.validateArray)(t))}};function Sie(t,e,n=t.schema){const{gen:r,parentSchema:i,data:o,keyword:a,it:s}=t;u(i),s.opts.unevaluated&&n.length&&s.items!==!0&&(s.items=Ax.mergeEvaluated.items(r,n.length,s.items));const l=r.name("valid"),c=r.const("len",(0,jH._)`${o}.length`);n.forEach((f,d)=>{(0,Ax.alwaysValidSchema)(s,f)||(r.if((0,jH._)`${c} > ${d}`,()=>t.subschema({keyword:a,schemaProp:d,dataProp:d},l)),t.ok(l))});function u(f){const{opts:d,errSchemaPath:h}=s,g=n.length,y=g===f.minItems&&(g===f.maxItems||f[e]===!1);if(d.strictTuples&&!y){const S=`"${a}" is ${g}-tuple, but minItems or maxItems/${e} are not specified or different at path "${h}"`;(0,Ax.checkStrictMode)(s,S,d.strictTuples)}}}V0.validateTuple=Sie;V0.default=XFe;Object.defineProperty(vF,"__esModule",{value:!0});const JFe=V0,ZFe={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,JFe.validateTuple)(t,"items")};vF.default=ZFe;var yF={};Object.defineProperty(yF,"__esModule",{value:!0});const HH=_n,QFe=er,eLe=Tn,tLe=z0,nLe={message:({params:{len:t}})=>(0,HH.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,HH._)`{limit: ${t}}`},rLe={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:nLe,code(t){const{schema:e,parentSchema:n,it:r}=t,{prefixItems:i}=n;r.items=!0,!(0,QFe.alwaysValidSchema)(r,e)&&(i?(0,tLe.validateAdditionalItems)(t,i):t.ok((0,eLe.validateArray)(t)))}};yF.default=rLe;var bF={};Object.defineProperty(bF,"__esModule",{value:!0});const hl=_n,ck=er,iLe={message:({params:{min:t,max:e}})=>e===void 0?(0,hl.str)`must contain at least ${t} valid item(s)`:(0,hl.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,hl._)`{minContains: ${t}}`:(0,hl._)`{minContains: ${t}, maxContains: ${e}}`},oLe={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:iLe,code(t){const{gen:e,schema:n,parentSchema:r,data:i,it:o}=t;let a,s;const{minContains:l,maxContains:c}=r;o.opts.next?(a=l===void 0?1:l,s=c):a=1;const u=e.const("len",(0,hl._)`${i}.length`);if(t.setParams({min:a,max:s}),s===void 0&&a===0){(0,ck.checkStrictMode)(o,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(s!==void 0&&a>s){(0,ck.checkStrictMode)(o,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,ck.alwaysValidSchema)(o,n)){let y=(0,hl._)`${u} >= ${a}`;s!==void 0&&(y=(0,hl._)`${y} && ${u} <= ${s}`),t.pass(y);return}o.items=!0;const f=e.name("valid");s===void 0&&a===1?h(f,()=>e.if(f,()=>e.break())):a===0?(e.let(f,!0),s!==void 0&&e.if((0,hl._)`${i}.length > 0`,d)):(e.let(f,!1),d()),t.result(f,()=>t.reset());function d(){const y=e.name("_valid"),S=e.let("count",0);h(y,()=>e.if(y,()=>g(S)))}function h(y,S){e.forRange("i",0,u,v=>{t.subschema({keyword:"contains",dataProp:v,dataPropType:ck.Type.Num,compositeRule:!0},y),S()})}function g(y){e.code((0,hl._)`${y}++`),s===void 0?e.if((0,hl._)`${y} >= ${a}`,()=>e.assign(f,!0).break()):(e.if((0,hl._)`${y} > ${s}`,()=>e.assign(f,!1).break()),a===1?e.assign(f,!0):e.if((0,hl._)`${y} >= ${a}`,()=>e.assign(f,!0)))}}};bF.default=oLe;var _ie={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const e=_n,n=er,r=Tn;t.error={message:({params:{property:l,depsCount:c,deps:u}})=>{const f=c===1?"property":"properties";return(0,e.str)`must have ${f} ${u} when property ${l} is present`},params:({params:{property:l,depsCount:c,deps:u,missingProperty:f}})=>(0,e._)`{property: ${l},
    missingProperty: ${f},
    depsCount: ${c},
    deps: ${u}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(l){const[c,u]=o(l);a(l,c),s(l,u)}};function o({schema:l}){const c={},u={};for(const f in l){if(f==="__proto__")continue;const d=Array.isArray(l[f])?c:u;d[f]=l[f]}return[c,u]}function a(l,c=l.schema){const{gen:u,data:f,it:d}=l;if(Object.keys(c).length===0)return;const h=u.let("missing");for(const g in c){const y=c[g];if(y.length===0)continue;const S=(0,r.propertyInData)(u,f,g,d.opts.ownProperties);l.setParams({property:g,depsCount:y.length,deps:y.join(", ")}),d.allErrors?u.if(S,()=>{for(const v of y)(0,r.checkReportMissingProp)(l,v)}):(u.if((0,e._)`${S} && (${(0,r.checkMissingProp)(l,y,h)})`),(0,r.reportMissingProp)(l,h),u.else())}}t.validatePropertyDeps=a;function s(l,c=l.schema){const{gen:u,data:f,keyword:d,it:h}=l,g=u.name("valid");for(const y in c)(0,n.alwaysValidSchema)(h,c[y])||(u.if((0,r.propertyInData)(u,f,y,h.opts.ownProperties),()=>{const S=l.subschema({keyword:d,schemaProp:y},g);l.mergeValidEvaluated(S,g)},()=>u.var(g,!0)),l.ok(g))}t.validateSchemaDeps=s,t.default=i})(_ie);var SF={};Object.defineProperty(SF,"__esModule",{value:!0});const wie=_n,aLe=er,sLe={message:"property name must be valid",params:({params:t})=>(0,wie._)`{propertyName: ${t.propertyName}}`},lLe={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:sLe,code(t){const{gen:e,schema:n,data:r,it:i}=t;if((0,aLe.alwaysValidSchema)(i,n))return;const o=e.name("valid");e.forIn("key",r,a=>{t.setParams({propertyName:a}),t.subschema({keyword:"propertyNames",data:a,dataTypes:["string"],propertyName:a,compositeRule:!0},o),e.if((0,wie.not)(o),()=>{t.error(!0),i.allErrors||e.break()})}),t.ok(o)}};SF.default=lLe;var o3={};Object.defineProperty(o3,"__esModule",{value:!0});const uk=Tn,Zl=_n,cLe=xu,fk=er,uLe={message:"must NOT have additional properties",params:({params:t})=>(0,Zl._)`{additionalProperty: ${t.additionalProperty}}`},fLe={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:uLe,code(t){const{gen:e,schema:n,parentSchema:r,data:i,errsCount:o,it:a}=t;if(!o)throw new Error("ajv implementation error");const{allErrors:s,opts:l}=a;if(a.props=!0,l.removeAdditional!=="all"&&(0,fk.alwaysValidSchema)(a,n))return;const c=(0,uk.allSchemaProperties)(r.properties),u=(0,uk.allSchemaProperties)(r.patternProperties);f(),t.ok((0,Zl._)`${o} === ${cLe.default.errors}`);function f(){e.forIn("key",i,S=>{!c.length&&!u.length?g(S):e.if(d(S),()=>g(S))})}function d(S){let v;if(c.length>8){const _=(0,fk.schemaRefOrVal)(a,r.properties,"properties");v=(0,uk.isOwnProperty)(e,_,S)}else c.length?v=(0,Zl.or)(...c.map(_=>(0,Zl._)`${S} === ${_}`)):v=Zl.nil;return u.length&&(v=(0,Zl.or)(v,...u.map(_=>(0,Zl._)`${(0,uk.usePattern)(t,_)}.test(${S})`))),(0,Zl.not)(v)}function h(S){e.code((0,Zl._)`delete ${i}[${S}]`)}function g(S){if(l.removeAdditional==="all"||l.removeAdditional&&n===!1){h(S);return}if(n===!1){t.setParams({additionalProperty:S}),t.error(),s||e.break();return}if(typeof n=="object"&&!(0,fk.alwaysValidSchema)(a,n)){const v=e.name("valid");l.removeAdditional==="failing"?(y(S,v,!1),e.if((0,Zl.not)(v),()=>{t.reset(),h(S)})):(y(S,v),s||e.if((0,Zl.not)(v),()=>e.break()))}}function y(S,v,_){const x={keyword:"additionalProperties",dataProp:S,dataPropType:fk.Type.Str};_===!1&&Object.assign(x,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(x,v)}}};o3.default=fLe;var _F={};Object.defineProperty(_F,"__esModule",{value:!0});const dLe=hc,UH=Tn,g7=er,WH=o3,hLe={keyword:"properties",type:"object",schemaType:"object",code(t){const{gen:e,schema:n,parentSchema:r,data:i,it:o}=t;o.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&WH.default.code(new dLe.KeywordCxt(o,WH.default,"additionalProperties"));const a=(0,UH.allSchemaProperties)(n);for(const f of a)o.definedProperties.add(f);o.opts.unevaluated&&a.length&&o.props!==!0&&(o.props=g7.mergeEvaluated.props(e,(0,g7.toHash)(a),o.props));const s=a.filter(f=>!(0,g7.alwaysValidSchema)(o,n[f]));if(s.length===0)return;const l=e.name("valid");for(const f of s)c(f)?u(f):(e.if((0,UH.propertyInData)(e,i,f,o.opts.ownProperties)),u(f),o.allErrors||e.else().var(l,!0),e.endIf()),t.it.definedProperties.add(f),t.ok(l);function c(f){return o.opts.useDefaults&&!o.compositeRule&&n[f].default!==void 0}function u(f){t.subschema({keyword:"properties",schemaProp:f,dataProp:f},l)}}};_F.default=hLe;var wF={};Object.defineProperty(wF,"__esModule",{value:!0});const GH=Tn,dk=_n,qH=er,YH=er,pLe={keyword:"patternProperties",type:"object",schemaType:"object",code(t){const{gen:e,schema:n,data:r,parentSchema:i,it:o}=t,{opts:a}=o,s=(0,GH.allSchemaProperties)(n),l=s.filter(y=>(0,qH.alwaysValidSchema)(o,n[y]));if(s.length===0||l.length===s.length&&(!o.opts.unevaluated||o.props===!0))return;const c=a.strictSchema&&!a.allowMatchingProperties&&i.properties,u=e.name("valid");o.props!==!0&&!(o.props instanceof dk.Name)&&(o.props=(0,YH.evaluatedPropsToName)(e,o.props));const{props:f}=o;d();function d(){for(const y of s)c&&h(y),o.allErrors?g(y):(e.var(u,!0),g(y),e.if(u))}function h(y){for(const S in c)new RegExp(y).test(S)&&(0,qH.checkStrictMode)(o,`property ${S} matches pattern ${y} (use allowMatchingProperties)`)}function g(y){e.forIn("key",r,S=>{e.if((0,dk._)`${(0,GH.usePattern)(t,y)}.test(${S})`,()=>{const v=l.includes(y);v||t.subschema({keyword:"patternProperties",schemaProp:y,dataProp:S,dataPropType:YH.Type.Str},u),o.opts.unevaluated&&f!==!0?e.assign((0,dk._)`${f}[${S}]`,!0):!v&&!o.allErrors&&e.if((0,dk.not)(u),()=>e.break())})})}}};wF.default=pLe;var kF={};Object.defineProperty(kF,"__esModule",{value:!0});const gLe=er,mLe={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){const{gen:e,schema:n,it:r}=t;if((0,gLe.alwaysValidSchema)(r,n)){t.fail();return}const i=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),t.failResult(i,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};kF.default=mLe;var xF={};Object.defineProperty(xF,"__esModule",{value:!0});const vLe=Tn,yLe={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:vLe.validateUnion,error:{message:"must match a schema in anyOf"}};xF.default=yLe;var CF={};Object.defineProperty(CF,"__esModule",{value:!0});const Px=_n,bLe=er,SLe={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,Px._)`{passingSchemas: ${t.passing}}`},_Le={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:SLe,code(t){const{gen:e,schema:n,parentSchema:r,it:i}=t;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const o=n,a=e.let("valid",!1),s=e.let("passing",null),l=e.name("_valid");t.setParams({passing:s}),e.block(c),t.result(a,()=>t.reset(),()=>t.error(!0));function c(){o.forEach((u,f)=>{let d;(0,bLe.alwaysValidSchema)(i,u)?e.var(l,!0):d=t.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},l),f>0&&e.if((0,Px._)`${l} && ${a}`).assign(a,!1).assign(s,(0,Px._)`[${s}, ${f}]`).else(),e.if(l,()=>{e.assign(a,!0),e.assign(s,f),d&&t.mergeEvaluated(d,Px.Name)})})}}};CF.default=_Le;var TF={};Object.defineProperty(TF,"__esModule",{value:!0});const wLe=er,kLe={keyword:"allOf",schemaType:"array",code(t){const{gen:e,schema:n,it:r}=t;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=e.name("valid");n.forEach((o,a)=>{if((0,wLe.alwaysValidSchema)(r,o))return;const s=t.subschema({keyword:"allOf",schemaProp:a},i);t.ok(i),t.mergeEvaluated(s)})}};TF.default=kLe;var AF={};Object.defineProperty(AF,"__esModule",{value:!0});const fC=_n,kie=er,xLe={message:({params:t})=>(0,fC.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,fC._)`{failingKeyword: ${t.ifClause}}`},CLe={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:xLe,code(t){const{gen:e,parentSchema:n,it:r}=t;n.then===void 0&&n.else===void 0&&(0,kie.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=KH(r,"then"),o=KH(r,"else");if(!i&&!o)return;const a=e.let("valid",!0),s=e.name("_valid");if(l(),t.reset(),i&&o){const u=e.let("ifClause");t.setParams({ifClause:u}),e.if(s,c("then",u),c("else",u))}else i?e.if(s,c("then")):e.if((0,fC.not)(s),c("else"));t.pass(a,()=>t.error(!0));function l(){const u=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},s);t.mergeEvaluated(u)}function c(u,f){return()=>{const d=t.subschema({keyword:u},s);e.assign(a,s),t.mergeValidEvaluated(d,a),f?e.assign(f,(0,fC._)`${u}`):t.setParams({ifClause:u})}}}};function KH(t,e){const n=t.schema[e];return n!==void 0&&!(0,kie.alwaysValidSchema)(t,n)}AF.default=CLe;var PF={};Object.defineProperty(PF,"__esModule",{value:!0});const TLe=er,ALe={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:n}){e.if===void 0&&(0,TLe.checkStrictMode)(n,`"${t}" without "if" is ignored`)}};PF.default=ALe;Object.defineProperty(mF,"__esModule",{value:!0});const PLe=z0,ELe=vF,OLe=V0,ILe=yF,$Le=bF,FLe=_ie,LLe=SF,DLe=o3,NLe=_F,MLe=wF,RLe=kF,zLe=xF,VLe=CF,BLe=TF,jLe=AF,HLe=PF;function ULe(t=!1){const e=[RLe.default,zLe.default,VLe.default,BLe.default,jLe.default,HLe.default,LLe.default,DLe.default,FLe.default,NLe.default,MLe.default];return t?e.push(ELe.default,ILe.default):e.push(PLe.default,OLe.default),e.push($Le.default),e}mF.default=ULe;var EF={},OF={};Object.defineProperty(OF,"__esModule",{value:!0});const Ii=_n,WLe={message:({schemaCode:t})=>(0,Ii.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,Ii._)`{format: ${t}}`},GLe={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:WLe,code(t,e){const{gen:n,data:r,$data:i,schema:o,schemaCode:a,it:s}=t,{opts:l,errSchemaPath:c,schemaEnv:u,self:f}=s;if(!l.validateFormats)return;i?d():h();function d(){const g=n.scopeValue("formats",{ref:f.formats,code:l.code.formats}),y=n.const("fDef",(0,Ii._)`${g}[${a}]`),S=n.let("fType"),v=n.let("format");n.if((0,Ii._)`typeof ${y} == "object" && !(${y} instanceof RegExp)`,()=>n.assign(S,(0,Ii._)`${y}.type || "string"`).assign(v,(0,Ii._)`${y}.validate`),()=>n.assign(S,(0,Ii._)`"string"`).assign(v,y)),t.fail$data((0,Ii.or)(_(),x()));function _(){return l.strictSchema===!1?Ii.nil:(0,Ii._)`${a} && !${v}`}function x(){const C=u.$async?(0,Ii._)`(${y}.async ? await ${v}(${r}) : ${v}(${r}))`:(0,Ii._)`${v}(${r})`,k=(0,Ii._)`(typeof ${v} == "function" ? ${C} : ${v}.test(${r}))`;return(0,Ii._)`${v} && ${v} !== true && ${S} === ${e} && !${k}`}}function h(){const g=f.formats[o];if(!g){_();return}if(g===!0)return;const[y,S,v]=x(g);y===e&&t.pass(C());function _(){if(l.strictSchema===!1){f.logger.warn(k());return}throw new Error(k());function k(){return`unknown format "${o}" ignored in schema at path "${c}"`}}function x(k){const m=k instanceof RegExp?(0,Ii.regexpCode)(k):l.code.formats?(0,Ii._)`${l.code.formats}${(0,Ii.getProperty)(o)}`:void 0,T=n.scopeValue("formats",{key:o,ref:k,code:m});return typeof k=="object"&&!(k instanceof RegExp)?[k.type||"string",k.validate,(0,Ii._)`${T}.validate`]:["string",k,T]}function C(){if(typeof g=="object"&&!(g instanceof RegExp)&&g.async){if(!u.$async)throw new Error("async format in sync schema");return(0,Ii._)`await ${v}(${r})`}return typeof S=="function"?(0,Ii._)`${v}(${r})`:(0,Ii._)`${v}.test(${r})`}}}};OF.default=GLe;Object.defineProperty(EF,"__esModule",{value:!0});const qLe=OF,YLe=[qLe.default];EF.default=YLe;var h0={};Object.defineProperty(h0,"__esModule",{value:!0});h0.contentVocabulary=h0.metadataVocabulary=void 0;h0.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];h0.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(tF,"__esModule",{value:!0});const KLe=nF,XLe=iF,JLe=mF,ZLe=EF,XH=h0,QLe=[KLe.default,XLe.default,(0,JLe.default)(),ZLe.default,XH.metadataVocabulary,XH.contentVocabulary];tF.default=QLe;var IF={},xie={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DiscrError=void 0,function(e){e.Tag="tag",e.Mapping="mapping"}(t.DiscrError||(t.DiscrError={}))})(xie);Object.defineProperty(IF,"__esModule",{value:!0});const Jm=_n,iO=xie,JH=ns,eDe=er,tDe={message:({params:{discrError:t,tagName:e}})=>t===iO.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:n}})=>(0,Jm._)`{error: ${t}, tag: ${n}, tagValue: ${e}}`},nDe={keyword:"discriminator",type:"object",schemaType:"object",error:tDe,code(t){const{gen:e,data:n,schema:r,parentSchema:i,it:o}=t,{oneOf:a}=i;if(!o.opts.discriminator)throw new Error("discriminator: requires discriminator option");const s=r.propertyName;if(typeof s!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!a)throw new Error("discriminator: requires oneOf keyword");const l=e.let("valid",!1),c=e.const("tag",(0,Jm._)`${n}${(0,Jm.getProperty)(s)}`);e.if((0,Jm._)`typeof ${c} == "string"`,()=>u(),()=>t.error(!1,{discrError:iO.DiscrError.Tag,tag:c,tagName:s})),t.ok(l);function u(){const h=d();e.if(!1);for(const g in h)e.elseIf((0,Jm._)`${c} === ${g}`),e.assign(l,f(h[g]));e.else(),t.error(!1,{discrError:iO.DiscrError.Mapping,tag:c,tagName:s}),e.endIf()}function f(h){const g=e.name("valid"),y=t.subschema({keyword:"oneOf",schemaProp:h},g);return t.mergeEvaluated(y,Jm.Name),g}function d(){var h;const g={},y=v(i);let S=!0;for(let C=0;C<a.length;C++){let k=a[C];k!=null&&k.$ref&&!(0,eDe.schemaHasRulesButRef)(k,o.self.RULES)&&(k=JH.resolveRef.call(o.self,o.schemaEnv.root,o.baseId,k==null?void 0:k.$ref),k instanceof JH.SchemaEnv&&(k=k.schema));const m=(h=k==null?void 0:k.properties)===null||h===void 0?void 0:h[s];if(typeof m!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${s}"`);S=S&&(y||v(k)),_(m,C)}if(!S)throw new Error(`discriminator: "${s}" must be required`);return g;function v({required:C}){return Array.isArray(C)&&C.includes(s)}function _(C,k){if(C.const)x(C.const,k);else if(C.enum)for(const m of C.enum)x(m,k);else throw new Error(`discriminator: "properties/${s}" must have "const" or "enum"`)}function x(C,k){if(typeof C!="string"||C in g)throw new Error(`discriminator: "${s}" values must be unique strings`);g[C]=k}}}};IF.default=nDe;const rDe="http://json-schema.org/draft-07/schema#",iDe="http://json-schema.org/draft-07/schema#",oDe="Core schema meta-schema",aDe={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},sDe=["object","boolean"],lDe={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},cDe={$schema:rDe,$id:iDe,title:oDe,definitions:aDe,type:sDe,properties:lDe,default:!0};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MissingRefError=e.ValidationError=e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;const n=Ure,r=tF,i=IF,o=cDe,a=["/properties"],s="http://json-schema.org/draft-07/schema";class l extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(g=>this.addVocabulary(g)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const g=this.opts.$data?this.$dataMetaSchema(o,a):o;this.addMetaSchema(g,s,!1),this.refs["http://json-schema.org/schema"]=s}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(s)?s:void 0)}}t.exports=e=l,Object.defineProperty(e,"__esModule",{value:!0}),e.default=l;var c=hc;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return c.KeywordCxt}});var u=_n;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return u._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return u.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return u.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return u.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return u.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return u.CodeGen}});var f=yS;Object.defineProperty(e,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=bS;Object.defineProperty(e,"MissingRefError",{enumerable:!0,get:function(){return d.default}})})(Z9,Z9.exports);var Cie=Z9.exports;const Tie=pr(Cie),d2=new Tie({validateSchema:!1});function ZH(t){return d2.compile(t)}function uDe(t,e){return{isValid:e(t),error:d2.errorsText(e.errors)}}function Aie(t){d2.removeSchema(t)}function fDe(t){let e;try{e=d2.validateSchema(JSON.parse(t))}catch(n){return{schemaValid:!1,error:n.message}}if(e)return{schemaValid:e};try{return d2.compile(JSON.parse(t)),{schemaValid:e}}catch(n){return{schemaValid:e,error:n.message}}}class dDe{constructor(e,n){Un(this,"ref");Un(this,"_schema");Un(this,"validator");this.ref=e,this._schema=n,this.schema.$id=e,this.validator=ZH(n)}update(e){Aie(this.ref),this._schema=e,this.schema.$id=this.ref,this.validator=ZH(e)}validateMarking(e){return uDe(e,this.validator)}get schema(){return this._schema}}let hk=class{constructor(e,n){Un(this,"id");Un(this,"_name");Un(this,"_schema");Un(this,"marking");Un(this,"defaultMarking");this.id=e,this._name=n,this._schema=new dDe(e,{$id:e,type:"array",items:{type:"object"}}),this.marking=[],this.defaultMarking=[]}set name(e){this._name=e}get name(){return this._name}set schema(e){e.$id=this.id,this._schema.update(e)}get schema(){return this._schema.schema}validateSchema(e){return fDe(JSON.stringify(e))}validateToken(e){return this._schema.validateMarking([e])}validateMarking(e){return this._schema.validateMarking(e)}insertValue(e,n,r,i=!1){if(i){const o=JSON.parse(JSON.stringify(this.marking)),a=sk(e,o,r,n);return this._schema.validateMarking(a)}else return sk(e,this.marking,r,n),!0}removeValue(e,n=!1){if(n){const r=JSON.parse(JSON.stringify(this.marking)),i=ak(e,r);return this._schema.validateMarking(i)}else return ak(e,this.marking),!0}batchOperation(e,n=!1){if(n){const r=JSON.parse(JSON.stringify(this.marking));for(let i=0;i<e.length;i++){const o=e[i];o.type==="insert"?sk(o.pathExpression,r,o.key,o.fragment):o.type==="remove"&&ak(o.pathExpression,r)}return this._schema.validateMarking(r)}else for(let r=0;r<e.length;r++){const i=e[r];i.type==="insert"?sk(i.pathExpression,this.marking,i.key,i.fragment):i.type==="remove"&&ak(i.pathExpression,this.marking)}}};function hDe(t){if(!t)return[];if(!Array.isArray(t))return[];if(t.length==0)return[];for(let i=0;i<t.length;i++)if(!Array.isArray(t[i])||t[i].length==0)return[];const e=new Array(t.length);e.fill(0);const n=[];let r=QH(e,t);for(n.push(r);pDe(e,t);)r=QH(e,t),n.push(r);return n}function QH(t,e){const n=[];for(let r=0;r<t.length;r++)n.push(e[r][t[r]]);return n}function pDe(t,e){for(let n=t.length-1;n>=0;n--){const r=e[n].length-1;if(t[n]+1<=r)return t[n]++,!0;if(n-1<0)return!1;t[n]=0}}function gDe(t){let e="";for(const[n,r]of Object.entries(t))e+=`local ${n} = ${Pie(JSON.stringify(r))}; 
`;return e}function Pie(t){let e=t;return e=e.replace(/\u00c4/g,"Ae"),e=e.replace(/\u00e4/g,"ae"),e=e.replace(/\u00dc/g,"Ue"),e=e.replace(/\u00fc/g,"ue"),e=e.replace(/\u00d6/g,"Oe"),e=e.replace(/\u00f6/g,"oe"),e=e.replace(/\u00df/g,"ss"),e}function zv(t,e={},n=""){t=gDe(e)+Pie(t);try{const i=jsonnet.EvaluateSnippet(n,t);if(i[1].$val)throw new Error(i[1].s);return{evaluation:i[0],hasError:!1}}catch(i){return{evaluation:i,hasError:!0}}}let pk=class{constructor(e,n){Un(this,"id");Un(this,"name");Un(this,"readonly");Un(this,"preset");Un(this,"postset");Un(this,"guard");Un(this,"preface");Un(this,"customVariables");Un(this,"valueVarSnippets");Un(this,"keyVarSnippets");this.id=e,this.name=n,this.preset=[],this.postset=[],this.guard="true",this.preface="",this.valueVarSnippets={},this.keyVarSnippets={},this.readonly=!1,this.customVariables={}}updateAllSnippets(e,n){for(let r=0;r<this.postset.length;r++)this.keyVarSnippets[this.postset[r].keyVarName]="local "+this.postset[r].keyVarName+" = "+e,this.valueVarSnippets[this.postset[r].valueVarName]="local "+this.postset[r].valueVarName+" = "+n}connectArc(e){e.type==="preset"?this.preset.push(e):e.type==="postset"&&(this.valueVarSnippets[e.valueVarName]||(this.valueVarSnippets[e.valueVarName]="local "+e.valueVarName+" = {};"),this.keyVarSnippets[e.keyVarName]||(this.keyVarSnippets[e.keyVarName]="local "+e.keyVarName+" = '-';"),this.postset.push(e))}updateSnippets(e,n){let r=this.guard;r=r.replace(e.value,n.value),r=r.replace(e.key,n.key),r=r.replace(e.token,n.token),this.guard=r;let i=this.preface;if(i=i.replace(e.value,n.value),i=i.replace(e.key,n.key),i=i.replace(e.token,n.token),this.preface=i,this.valueVarSnippets[e.value]){let o=this.valueVarSnippets[e.value];o=o.replace(e.value,n.value),o=o.replace(e.key,n.key),o=o.replace(e.token,n.token),delete this.valueVarSnippets[e.value],this.valueVarSnippets[n.value]=o}if(this.keyVarSnippets[e.key]){let o=this.keyVarSnippets[e.key];o=o.replace(e.value,n.value),o=o.replace(e.key,n.key),o=o.replace(e.token,n.token),delete this.keyVarSnippets[e.key],this.keyVarSnippets[n.key]=o}}disconnectArc(e){e.type==="preset"?this.preset=this.preset.filter(n=>n.id!==e.id):e.type==="postset"&&(this.postset=this.postset.filter(n=>n.id!==e.id?(delete this.valueVarSnippets[e.valueVarName],delete this.keyVarSnippets[e.keyVarName],!0):!1))}resetAssignments(){for(let e=0;e<this.preset.length;e++)this.preset[e].resetAssignment();for(let e=0;e<this.postset.length;e++)this.postset[e].resetAssignment()}fire(){const e=[];for(let n=0;n<this.preset.length;n++){const r=this.preset[n];if(r.assignedPathExpression===null)return[];this.readonly||r.place.removeValue(r.assignedPathExpression,!1),e.push({arcID:r.id,placeID:r.place.id,num:r.place.marking.length})}for(let n=0;n<this.postset.length;n++){const r=this.postset[n];if(r.assignedPathExpression===null)return[];r.place.insertValue(r.assignedPathExpression,r.valueVarValue,r.keyVarValue,!1),e.push({arcID:r.id,placeID:r.place.id,num:r.place.marking.length})}return e}hasCompletePresetAssignment(){const e=this.preset;for(let n=0;n<e.length;n++)if(e[n].assignedPathExpression===null)return!1;return!0}hasCompletePostsetAssignment(){const e=this.postset;for(let n=0;n<e.length;n++)if(e[n].assignedPathExpression===null)return!1;return!0}hasCompleteAssignment(){const e=this.preset.concat(this.postset);for(let n=0;n<e.length;n++)if(e[n].assignedPathExpression===null)return!1;return!0}hasAnyCompleteAssignment(){const e=this.preset.concat(this.postset);for(let n=0;n<e.length;n++){const r=e[n];if(r.applyFilterExpression(r.filterExpression).length===0)return!1}return!0}assignOutputKeyValueVariables(e){for(let n=0;n<this.postset.length;n++){const r=this.postset[n];let i=this.assembleCustomVariables();i+=this.preface,i+=this.valueVarSnippets[r.valueVarName]+r.valueVarName;const o=zv(i,e,this.name);if(o.hasError)return!1;const a=JSON.parse(o.evaluation);e[r.valueVarName]=a;let s=this.assembleCustomVariables();s+=this.preface,s+=this.keyVarSnippets[r.keyVarName]+r.keyVarName;const l=zv(s,e,this.name);if(l.hasError)return!1;const c=String(JSON.parse(l.evaluation));e[r.keyVarName]=c,r.assignKeyAndValueVariables(c,a)}return e}assembleCustomVariables(){let e="";for(const[n,r]of Object.entries(this.customVariables))e+="local "+n+" = "+r+";";return e}evaluateGuard(e){let n=this.assembleCustomVariables();return n+=this.preface,n+=this.guard,console.log("inscription"),console.log(n),zv(n,e,this.name)}checkResultingMarkings(){const e=[];for(let n=0;n<this.preset.length;n++){const r=this.preset[n];let i=!1,o=null;for(let a=0;a<this.postset.length;a++){const s=this.postset[a];s.place.id===r.place.id&&(e.push(s.id),i=!0,o=s)}if(i&&o){let a=[];if(r.assignedPathExpression===null||(a.push(r.assignedPathExpression),o.assignedPathExpression===null))return!1;a.push(o.assignedPathExpression),a=mIe(a,r.place.marking);const s={pathExpression:r.assignedPathExpression,type:"remove"},l={fragment:o.valueVarValue,key:o.keyVarValue,pathExpression:o.assignedPathExpression,type:"insert"},c=[];if(a[0]===r.assignedPathExpression?(c.push(l),c.push(s)):(c.push(s),c.push(l)),!r.place.batchOperation(c,!0))return!1}else if(r.assignedPathExpression===null||!r.place.removeValue(r.assignedPathExpression,!0))return!1}for(let n=0;n<this.postset.length;n++){const r=this.postset[n];if(e.includes(r.id))continue;if(r.assignedPathExpression===null||!r.place.insertValue(r.assignedPathExpression,r.valueVarValue,r.keyVarValue,!0))return!1}return!0}assembleVariablesFromPathAssignments(){const e=[],n=[],r=[],i={};for(let o=0;o<this.preset.length;o++){const a=this.preset[o];a.assignedPathExpression!==null&&(i[a.tokenVarName]=a.tokenVarValue,i[a.keyVarName]=a.keyVarValue,i[a.valueVarName]=a.valueVarValue,e.push(a.valueVarValue),n.push(a.place.name))}for(let o=0;o<this.postset.length;o++){const a=this.postset[o];a.assignedPathExpression!==null&&(i[a.tokenVarName]=a.tokenVarValue,r.push(a.place.name))}return i.transition_name=this.name,i.input_values=e,i.input_names=n,i.output_names=r,i}findAssignment(){this.resetAssignments();const e=[],n=this.preset.concat(this.postset);for(let i=0;i<n.length;i++){const o=[],a=n[i],s=a.applyFilterExpression(a.filterExpression);if(s.length===0)return!1;for(let l=0;l<s.length;l++)o.push({arc:a,assignmentIndex:l});e.push(o)}const r=hDe(e);for(let i=0;i<r.length;i++){const o=r[i],a={},s={},l={},c=[],u=[],f=[];let d=!1;for(let v=0;v<o.length;v++){const _=o[v],x=_.arc;if(x.type==="preset"){const C=x.assignVariablesByIndex(_.assignmentIndex);C||(d=!0),l[x.tokenVarName]=C.token,a[x.keyVarName]=C.key,s[x.valueVarName]=C.value,c.push(C.value),u.push(x.place.name)}else{const C=x.assignTokenVariableByIndex(_.assignmentIndex);C||(d=!0),l[x.tokenVarName]=C.token,f.push(x.place.name)}}if(d)continue;const h=this.assignOutputKeyValueVariables({transition_name:this.name,input_values:c,input_names:u,output_names:f,...a,...s,...l});if(!h)continue;const g=this.evaluateGuard(h);if(g.hasError||JSON.parse(g.evaluation)!==!0)continue;if(this.checkResultingMarkings())return!0}return!1}},gk;const mDe=new Uint8Array(16);function vDe(){if(!gk&&(gk=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!gk))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return gk(mDe)}const mo=[];for(let t=0;t<256;++t)mo.push((t+256).toString(16).slice(1));function yDe(t,e=0){return(mo[t[e+0]]+mo[t[e+1]]+mo[t[e+2]]+mo[t[e+3]]+"-"+mo[t[e+4]]+mo[t[e+5]]+"-"+mo[t[e+6]]+mo[t[e+7]]+"-"+mo[t[e+8]]+mo[t[e+9]]+"-"+mo[t[e+10]]+mo[t[e+11]]+mo[t[e+12]]+mo[t[e+13]]+mo[t[e+14]]+mo[t[e+15]]).toLowerCase()}const bDe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),eU={randomUUID:bDe};function m7(t,e,n){if(eU.randomUUID&&!e&&!t)return eU.randomUUID();t=t||{};const r=t.random||(t.rng||vDe)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let i=0;i<16;++i)e[n+i]=r[i];return e}return yDe(r)}let v7=null;function Bt(){return v7===null&&(v7=new SDe),v7}class SDe{constructor(){Un(this,"_transitions");Un(this,"_places");Un(this,"_arcs");this._transitions=[],this._places=[],this._arcs=[]}findPlace(e){return this._places.find(n=>n.id===e)}removePlace(e){const n=[];return this._places=this._places.filter(i=>i.id!==e),n.push(e),this._arcs.filter(i=>i.place.id===e).forEach(i=>{this.disconnect(i.id),n.push(i.id)}),n}updatePlace(e,n,r,i){const o=this.findPlace(e);if(!o)return!1;if(n!==o.name){o.name=n;const a=this._arcs.filter(s=>s.place.id===e);for(let s=0;s<a.length;s++)a[s].updateVarNames(n)}return r&&(o.schema=r),i&&(o.marking=i),{id:o.id,name:o.name,marking:o.marking,schema:o.schema,hasError:!1,errorType:"none",errorMessage:""}}updatePlaceMarking(e,n){const r=this.findPlace(e);if(!r)return!1;r.marking=n;const i=r.validateMarking(n);return{id:r.id,name:r.name,marking:r.marking,schema:r.schema,hasError:!i.isValid,errorType:"data",errorMessage:i.error}}setDefaultMarking(e){const n=this.findPlace(e);if(!n)return!1;n.defaultMarking=JSON.parse(JSON.stringify(n.marking))}getDefaultMarking(e){const n=this.findPlace(e);return n?JSON.parse(JSON.stringify(n.defaultMarking)):!1}allPlaces(){return JSON.parse(JSON.stringify(this._places))}updatePlaceSchema(e,n){const r=this.findPlace(e);if(!r)return!1;const i=r.validateSchema(n);return i.schemaValid&&(r.schema=n),{id:r.id,name:r.name,marking:r.marking,schema:r.schema,hasError:!i.schemaValid,errorType:"schema",errorMessage:i.error}}validatePlaceName(e,n){return!(this._places.filter(i=>i.name===e&&i.id!==n).length>0)}addTransition(e=m7()){const n=new pk(e,"transition");return this._transitions.push(n),{id:n.id,name:n.name,preface:n.preface,guard:n.guard,readonly:n.readonly,customVariables:n.customVariables}}addPlace(e=m7()){const r="place"+e.substring(0,4),i=new hk(e,r);return i.schema=JSON.parse(JSON.stringify({type:"array",items:{type:"object"}})),i.marking=JSON.parse(JSON.stringify([])),i.defaultMarking=JSON.parse(JSON.stringify([])),this._places.push(i),{id:i.id,name:i.name,marking:i.marking,schema:i.schema,hasError:!1,errorType:"none",errorMessage:""}}updateTransition(e,n,r,i,o,a,s){const l=this.findTransition(e);return l?(l.name=n,i!==void 0&&(l.guard=i),r!==void 0&&(l.preface=r),a!==void 0&&(l.keyVarSnippets=a),o!==void 0&&(l.valueVarSnippets=o),s!==void 0&&(l.customVariables=s),{id:l.id,name:l.name,preface:l.preface,guard:l.guard,readonly:l.readonly,customVariables:l.customVariables}):!1}updateTransitionMode(e,n){const r=this.findTransition(e);return r?(r.readonly=n,{id:r.id,name:r.name,preface:r.preface,guard:r.guard,readonly:r.readonly,customVariables:r.customVariables}):!1}updateTransitionVariable(e,n,r){const i=this.findTransition(e);return i?(i.customVariables[n]=r,{id:i.id,name:i.name,preface:i.preface,guard:i.guard,readonly:i.readonly,customVariables:i.customVariables}):!1}removeTransitionVariable(e,n){const r=this.findTransition(e);return r?(delete r.customVariables[n],{id:r.id,name:r.name,preface:r.preface,guard:r.guard,readonly:r.readonly,customVariables:r.customVariables}):!1}updateTransitionSnippets(e,n,r,i){const o=this.findTransition(e),a=this.findArc(n);!o||!a||(o.keyVarSnippets[a.keyVarName]=r,o.valueVarSnippets[a.valueVarName]=i)}findTransition(e){return this._transitions.find(n=>n.id===e)}assignFilterByPath(e,n){const r=this.findArc(e);if(!r)return!1;r.type==="preset"?r.assignVariablesByPathExpression(n):r.type==="postset"&&r.assignTokenVariableByPathExpression(n);const i=r.transition.hasCompleteAssignment(),o=r.transition.hasCompletePresetAssignment(),a=r.transition.hasCompletePostsetAssignment();return{complete:i,presetComplete:o,postsetComplete:a}}removeTransition(e){const n=[];let r=this.findTransition(e);const i=this._transitions.filter(o=>o.id===e?(r=o,!1):!0);return r?(n.push(r.id),r.preset.forEach(o=>{this.disconnect(o.id),n.push(o.id)}),r.postset.forEach(o=>{this.disconnect(o.id),n.push(o.id)}),this._transitions=i,n):[]}connect(e,n,r=m7()){const i=[...this._places,...this._transitions],o=i.find(l=>l.id===e),a=i.find(l=>l.id===n);let s;return o instanceof hk?a instanceof hk||a instanceof pk&&(s=new $H(o,a,"preset",r),this._arcs.push(s),a.connectArc(s)):o instanceof pk&&(a instanceof pk||a instanceof hk&&(s=new $H(a,o,"postset",r),this._arcs.push(s),o.connectArc(s))),s&&o&&a?{id:s.id,type:s.type,from:o.id,to:a.id}:!1}updateAllTransitionSnippets(e,n,r){const i=this._transitions.find(o=>o.id===e);i&&i.updateAllSnippets(n,r)}disconnect(e){const n=this.findArc(e);n&&(n.transition.disconnectArc(n),this._arcs=this._arcs.filter(r=>r.id!==e))}findArc(e){return this._arcs.find(n=>n.id===e)}updateArc(e,n){const r=this._arcs.find(a=>a.id===e);if(!r)return!1;r.filterExpression=n;let i,o="";return r.type==="preset"?(i=r.place.id,o=r.transition.id):(i=r.transition.id,o=r.place.id),{from:i,to:o,id:r.id,type:r.type}}fireUnderCurrentAssignment(e){const n=this.findTransition(e);return n?n.fire():[]}fireUnderAnyAssignment(e){const n=this.findTransition(e);return n?n.findAssignment()?n.fire():[]:[]}fireAny(){for(let e=0;e<this._transitions.length;e++){let n=this._transitions[e];if(n.findAssignment())return n.fire()}return[]}export(){const e=[],n=[],r=[];for(let o=0;o<this._places.length;o++){let a=this._places[o];e.push({id:a.id,name:a.name,marking:a.marking,schema:a.schema})}for(let o=0;o<this._transitions.length;o++){let a=this._transitions[o];n.push({id:a.id,name:a.name,preface:a.preface,guard:a.guard,customVariables:a.customVariables,keyVarSnippets:a.keyVarSnippets,fragmentVarSnippets:a.valueVarSnippets})}for(let o=0;o<this._arcs.length;o++){let a=this._arcs[o],s,l;a.type==="preset"?(s=a.place.id,l=a.transition.id):a.type==="postset"&&(s=a.transition.id,l=a.place.id),r.push({id:a.id,filter:a.filterExpression,fromId:s,toId:l})}return{places:e,transitions:n,arcs:r}}assignOutputVariables(e){const n=this.findTransition(e);if(n)for(let r=0;r<n.postset.length;r++){const i=n.postset[r],o=n.assembleVariablesFromPathAssignments(),a=n.assignOutputKeyValueVariables(o);a&&i.assignKeyAndValueVariables(String(a[i.keyVarName]),a[i.valueVarName])}}clear(){for(;this._transitions.length>0;)this.removeTransition(this._transitions[0].id);for(;this._places.length>0;)Aie(this._places[0].id),this.removePlace(this._places[0].id)}import(e){this.clear();const n={places:[],transitions:[],arcs:[]};for(let r=0;r<e.places.length;r++){let i=e.places[r];this.addPlace(i.id);const o=this.updatePlace(i.id,i.name,i.schema,i.marking);this.setDefaultMarking(i.id),o&&n.places.push(o)}for(let r=0;r<e.transitions.length;r++){let i=e.transitions[r];this.addTransition(i.id);const o=this.updateTransition(i.id,i.name,i.preface,i.guard,i.fragmentVarSnippets,i.keyVarSnippets,i.customVariables);o&&n.transitions.push(o)}for(let r=0;r<e.arcs.length;r++){let i=e.arcs[r];this.connect(i.fromId,i.toId,i.id);const o=this.updateArc(i.id,i.filter);o&&n.arcs.push(o)}return n}getEvaluations(e){const n=this.findTransition(e);if(!n)return!1;const r=n.assembleVariablesFromPathAssignments();let i=!1,o=!1;const a=zv(n.preface+" true",r);if(a.hasError)return i=!0,{hasAnyError:i,preface:a,variables:r};const s=Object.keys(n.valueVarSnippets),l={};for(let h=0;h<s.length;h++){const g=s[h];let y=n.preface;y+=n.valueVarSnippets[g]+g;const S=zv(y,r);l[g]=S,S.hasError&&(i=!0,o=!0)}const c=Object.keys(n.keyVarSnippets),u={};for(let h=0;h<c.length;h++){const g=c[h];let y=n.preface;y+=n.keyVarSnippets[g]+g;const S=zv(y,r);u[g]=S,S.hasError&&(i=!0,o=!0)}if(o)return{hasAnyError:i,variables:r,hasAnyOutputError:o,preface:a,outputKeyVariables:u,outputValueVariables:l};const f=n.assignOutputKeyValueVariables(r);if(!f)return{hasAnyOutputError:o,hasAnyError:i,variables:r,preface:a,outputValueVariables:l,outputKeyVariables:u,guard:{evaluation:"Output expressions have errors.",hasError:!0}};const d=n.evaluateGuard(f);return d.hasError&&(i=!0),{hasAnyOutputError:o,hasAnyError:i,preface:a,variables:f,outputValueVariables:l,outputKeyVariables:u,guard:d}}}const ss=F0("config",{state:()=>({name:"default",defaultUIAssistMode:"expert",defaultTransitionType:"custom",defaultPlaceType:"custom",placeTypes:[],transitionTypes:[],examples:[],allowAutoLayout:!0,visualisationConfig:{show:!0}}),getters:{getPlaceTypeById:t=>e=>t.placeTypes.find(n=>n.id===e),getTransitionTypeById:t=>e=>t.transitionTypes.find(n=>n.id===e)},actions:{loadConfig(t,e=!1){e||(this.name=t.name),this.placeTypes=t.placeTypes,this.transitionTypes=t.transitionTypes,this.defaultPlaceType=t.defaultPlaceType,this.defaultTransitionType=t.defaultTransitionType,this.examples=t.examples,this.allowAutoLayout=t.allowAutoLayout,this.visualisationConfig=t.visualisationConfig,ta().uiAssistMode=t.defaultUIAssistMode},resetConfig(){this.$reset(),ta().uiAssistMode=this.defaultUIAssistMode}}}),Zn=F0("net",{state:()=>({places:[],transitions:[],transitionTypes:{},placeTypes:{},lastRemovedCells:[],lastCreatedPlaces:[],lastCreatedTransitions:[],lastCreatedArcs:[],lastUpdatedPlace:{},lastUpdatedPlaces:[],lastUpdatedTransition:{},lastFiredArcs:[],layout:{},importedData:{}}),actions:{setLayout(t){this.layout=t},export(){const t=Bt().export(),e=this.layout.toJSON(),n={placeTypes:this.placeTypes,transitionTypes:this.transitionTypes};return JSON.stringify({typeData:n,netData:t,layoutData:e},null,2)},import(t){t.typeData&&(this.placeTypes=t.typeData.placeTypes,this.transitionTypes=t.typeData.transitionTypes);const e=t.layoutData,n=Bt().import(t.netData);this.transitions=n.transitions,this.places=n.places,this.importedData={layoutData:e,netData:n}},connect(t,e){const n=Bt().connect(t,e);if(n){this.lastCreatedArcs=[n];let r="";n.type=="preset"?r=n.to:r=n.from;const i=this.transitionTypes[r];if(i!=="custom"){const o=ss().getTransitionTypeById(i);if(!o)return;n.type=="preset"?Bt().updateArc(n.id,o.presetFilter):(Bt().updateAllTransitionSnippets(r,o.keySnippet,o.valueSnippet),Bt().updateArc(n.id,o.postsetFilter))}}},resetModel(){const t=Bt().allPlaces(),e=[];for(let n=0;n<t.length;n++){const r=t[n];console.log("resetting place"+r.id);const i=Bt().getDefaultMarking(r.id);if(console.log(i),i){const o=Bt().updatePlaceMarking(r.id,i);o&&e.push(o)}}this.lastUpdatedPlaces=e},addPlace(){let t=Bt().addPlace();this.places.push(t);const e=ss();if(this.placeTypes[t.id]=e.defaultPlaceType,e.defaultPlaceType!=="custom"){const n=e.getPlaceTypeById(e.defaultPlaceType);if(!n)return;const r=Bt().updatePlace(t.id,t.name,n.schema,n.marking);r&&(this.lastCreatedPlaces=[r],Bt().setDefaultMarking(t.id))}else this.lastCreatedPlaces=[t]},deletePlace(t){this.lastRemovedCells=Bt().removePlace(t)},addTransition(){let t=Bt().addTransition();this.transitions.push(t);const e=ss();if(this.transitionTypes[t.id]=e.defaultTransitionType,e.defaultTransitionType!=="custom"){const n=e.getTransitionTypeById(e.defaultTransitionType);if(!n)return;let r=Bt().updateTransition(t.id,t.name,n.preface,n.guard);r&&(t=r);const i=Object.keys(n.customVariables);for(let o=0;o<i.length;o++){let a=Bt().updateTransitionVariable(t.id,i[o],n.customVariables[i[o]]);a&&(t=a)}}this.lastCreatedTransitions=[t]},deleteTransition(t){this.lastRemovedCells=Bt().removeTransition(t)},disconnect(t){Bt().disconnect(t),this.lastRemovedCells=[t]},fireUnderAnyAssignment(t){this.lastFiredArcs=Bt().fireUnderAnyAssignment(t)},fireAny(){this.lastFiredArcs=Bt().fireAny()}}});function Eie(t,e){const n=t.target;if(!n)return;const r=new FileReader;r.onload=function(){const i=r.result;e(i)},r.readAsText(n.files[0])}function _De(t,e,n){const r=document.createElement("a"),i=new Blob([t],{type:n});r.href=URL.createObjectURL(i),r.download=e,r.click()}const Yg=F0("transitions",{state:()=>({transition:{},outputArcs:[],inputArcs:[],selectedOutputSnippetIndex:-1,variables:{},assignmentComplete:!1,presetAssignmentComplete:!1,postsetAssignmentComplete:!1,prefaceHasError:!1,guardHasError:!1,guardEvaluation:"",keyEvaluationResults:{},valueEvaluationResults:{},hasAnyError:!1,hasAnyOutputError:!1,isEnabled:!1,selectedInputPlaceIndex:0,selectedInputValueJsonPath:"none",selectedOutputPlaceIndex:0,selectedOutputValueJsonPath:"none",inputDataKey:0,outputDataKey:0}),actions:{saveName(){const t=Bt().updateTransition(this.transition.id,this.transition.name);t&&(this.transition.name=t.name,Zn().lastUpdatedTransition=t)},switchMode(){this.transition.readonly=!this.transition.readonly;const t=Bt().updateTransitionMode(this.transition.id,this.transition.readonly);t&&(this.transition.readonly=t.readonly,Zn().lastUpdatedTransition=t)},updateVariable(t,e){const n=Bt().updateTransitionVariable(this.transition.id,t,e);n&&(this.transition=n,Zn().lastUpdatedTransition=n)},removeVariable(t){const e=Bt().removeTransitionVariable(this.transition.id,t);e&&(this.transition=e,Zn().lastUpdatedTransition=e)},saveInputFilter(){const t=this.inputArcs[this.selectedInputPlaceIndex];Bt().updateArc(t.id,t.filter)},saveOutputFilter(){const t=this.outputArcs[this.selectedOutputPlaceIndex];Bt().updateArc(t.id,t.filter)},saveBasicInscription(){Bt().updateTransition(this.transition.id,this.transition.name,this.transition.preface,this.transition.guard)},saveOutputSnippets(){const t=this.outputArcs[this.selectedOutputSnippetIndex];t&&Bt().updateTransitionSnippets(this.transition.id,t.id,t.keySnippet,t.valueSnippet)},unsetAssignments(){const t=Bt().findTransition(this.transition.id);t&&(t.resetAssignments(),this.selectedInputValueJsonPath="none",this.selectedOutputValueJsonPath="none",this.assignmentComplete=!1)},saveSelectedAssignment(t,e){let n;e==="input"?(this.selectedInputValueJsonPath=t,n=this.inputArcs[this.selectedInputPlaceIndex].id):(this.selectedOutputValueJsonPath=t,n=this.outputArcs[this.selectedOutputPlaceIndex].id);const r=Bt().assignFilterByPath(n,t);r&&(this.assignmentComplete=r.complete,this.presetAssignmentComplete=r.presetComplete,this.postsetAssignmentComplete=r.postsetComplete,this.loadEvaluations(),this.hasAnyError||Bt().assignOutputVariables(n))},loadCurrentInputAssignment(){const t=this.inputArcs[this.selectedInputPlaceIndex].id,e=Bt().findArc(t);e&&(e.assignedPathExpression!==null?this.selectedInputValueJsonPath=e.assignedPathExpression:this.selectedInputValueJsonPath="none")},loadCurrentOutputAssignment(){const t=this.outputArcs[this.selectedOutputPlaceIndex].id,e=Bt().findArc(t);e&&(e.assignedPathExpression!==null?this.selectedOutputValueJsonPath=e.assignedPathExpression:this.selectedOutputValueJsonPath="none")},loadAvailableInputAssignments(){const t=this.inputArcs[this.selectedInputPlaceIndex];if(!t)return;const e=Bt().findArc(t.id);if(!e)return;const n=[],r=e.applyFilterExpression(t.filter);for(let i=0;i<r.length;i++)n.push(r[i]);t.filtered=n},loadAvailableOutputAssignments(){const t=this.outputArcs[this.selectedOutputPlaceIndex];if(!t)return;const e=Bt().findArc(t.id);if(!e)return;const n=[],r=e.applyFilterExpression(t.filter);for(let i=0;i<r.length;i++)n.push(r[i]);t.filtered=n},unsetCurrentInputAssignment(){const t=this.inputArcs[this.selectedInputPlaceIndex];if(!t)return;const e=Bt().findArc(t.id);e&&(e.resetAssignment(),this.selectedInputValueJsonPath="none")},unsetCurrentOutputAssignment(){const t=this.outputArcs[this.selectedOutputPlaceIndex];if(!t)return;const e=Bt().findArc(t.id);e&&(e.resetAssignment(),this.selectedOutputValueJsonPath="none")},resetName(){const t=Bt().findTransition(this.transition.id);t&&(this.transition.name=t.name,Zn().lastUpdatedTransition=t)},resetInputFilter(){const t=this.inputArcs[this.selectedInputPlaceIndex],e=Bt().findArc(t.id);e&&(t.filter=e.filterExpression,this.loadAvailableInputAssignments())},resetOutputFilter(){const t=this.outputArcs[this.selectedOutputPlaceIndex],e=Bt().findArc(t.id);e&&(t.filter=e.filterExpression,this.loadAvailableOutputAssignments())},loadEvaluations(){const t=Bt().getEvaluations(this.transition.id);if(t){if(this.variables=t.variables,!this.assignmentComplete||(this.hasAnyError=t.hasAnyError,this.hasAnyError&&(this.isEnabled=!1),this.prefaceHasError=t.preface.hasError,this.prefaceHasError)||(t.hasAnyOutputError!==void 0&&t.outputKeyVariables&&t.outputValueVariables&&(this.hasAnyOutputError=t.hasAnyOutputError,this.keyEvaluationResults=t.outputKeyVariables,this.valueEvaluationResults=t.outputValueVariables),this.hasAnyOutputError))return;t.guard&&(this.guardHasError=t.guard.hasError,this.guardHasError?this.guardEvaluation=t.guard.evaluation:(this.guardEvaluation=t.guard.evaluation,this.isEnabled=JSON.parse(this.guardEvaluation)))}},initSettings(){this.selectedOutputSnippetIndex=-1,this.selectedInputPlaceIndex=0,this.selectedOutputPlaceIndex=0,this.assignmentComplete=!1},loadTransition(t){let e=Zn().transitions.find(n=>n.id===t);if(e){const n=Bt().findTransition(t);if(!n)return e;e=n,this.transition=n;const r=[];for(let o=0;o<n.postset.length;o++){const a=n.postset[o],s=[],l=a.applyFilterExpression(a.filterExpression);for(let u=0;u<l.length;u++)s.push(l[u]);const c={id:a.id,name:a.place.name,marking:a.place.marking,tokenVar:a.tokenVarName,valueVar:a.valueVarName,keyVar:a.keyVarName,valueSnippet:n.valueVarSnippets[a.valueVarName],keySnippet:n.keyVarSnippets[a.keyVarName],filter:a.filterExpression,filtered:s};r.push(c)}this.outputArcs=r;const i=[];for(let o=0;o<n.preset.length;o++){const a=n.preset[o],s=[],l=a.applyFilterExpression(a.filterExpression);for(let u=0;u<l.length;u++)s.push(l[u]);const c={id:a.id,name:a.place.name,marking:a.place.marking,filter:a.filterExpression,tokenVar:a.tokenVarName,valueVar:a.valueVarName,keyVar:a.keyVarName,filtered:s};i.push(c)}this.inputArcs=i}},forceRender(){this.inputDataKey+=1,this.outputDataKey+=1},fireCurrentTransition(){Bt().assignOutputVariables(this.transition.id);const t=Bt().fireUnderCurrentAssignment(this.transition.id);Zn().lastFiredArcs=t,this.loadTransition(this.transition.id),this.unsetAssignments(),this.loadAvailableInputAssignments(),this.loadAvailableOutputAssignments(),this.loadEvaluations(),this.assignmentComplete=!1,this.presetAssignmentComplete=!1,this.postsetAssignmentComplete=!1,this.forceRender()}}});var Oie={},h2={},dC={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */dC.exports;(function(t,e){(function(){var n,r="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",s="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",c=500,u="__lodash_placeholder__",f=1,d=2,h=4,g=1,y=2,S=1,v=2,_=4,x=8,C=16,k=32,m=64,T=128,E=256,I=512,D=30,F="...",R=800,z=16,B=1,ie=2,oe=3,_e=1/0,Ae=9007199254740991,Pe=17976931348623157e292,Se=0/0,se=4294967295,ne=se-1,J=se>>>1,V=[["ary",T],["bind",S],["bindKey",v],["curry",x],["curryRight",C],["flip",I],["partial",k],["partialRight",m],["rearg",E]],W="[object Arguments]",ae="[object Array]",te="[object AsyncFunction]",ue="[object Boolean]",ce="[object Date]",fe="[object DOMException]",ye="[object Error]",j="[object Function]",Y="[object GeneratorFunction]",O="[object Map]",M="[object Number]",H="[object Null]",Q="[object Object]",ve="[object Promise]",ge="[object Proxy]",De="[object RegExp]",Le="[object Set]",tt="[object String]",Xe="[object Symbol]",et="[object Undefined]",Qe="[object WeakMap]",pt="[object WeakSet]",zt="[object ArrayBuffer]",Kt="[object DataView]",wt="[object Float32Array]",sn="[object Float64Array]",gr="[object Int8Array]",mi="[object Int16Array]",Lr="[object Int32Array]",ho="[object Uint8Array]",Tr="[object Uint8ClampedArray]",Vn="[object Uint16Array]",Bn="[object Uint32Array]",Oa=/\b__p \+= '';/g,Df=/\b(__p \+=) '' \+/g,Tu=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Tc=/&(?:amp|lt|gt|quot|#39);/g,Ss=/[&<>"']/g,Ui=RegExp(Tc.source),Ac=RegExp(Ss.source),ty=/<%-([\s\S]+?)%>/g,Nf=/<%([\s\S]+?)%>/g,Au=/<%=([\s\S]+?)%>/g,Th=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,om=/^\w*$/,ny=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Pu=/[\\^$.*+?()[\]{}|]/g,ry=RegExp(Pu.source),Mf=/^\s+/,ke=/\s/,le=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,xe=/\{\n\/\* \[wrapped with (.+)\] \*/,Re=/,? & /,Me=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,kt=/[()=,{}\[\]\/\s]/,Ct=/\\(\\)?/g,wn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,sr=/\w*$/,Dr=/^[-+]0x[0-9a-f]+$/i,yn=/^0b[01]+$/i,qn=/^\[object .+?Constructor\]$/,Nr=/^0o[0-7]+$/i,Xt=/^(?:0|[1-9]\d*)$/,dr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,mr=/($^)/,vr=/['\n\r\u2028\u2029\\]/g,po="\\ud800-\\udfff",Ia="\\u0300-\\u036f",$a="\\ufe20-\\ufe2f",Bl="\\u20d0-\\u20ff",_s=Ia+$a+Bl,Wi="\\u2700-\\u27bf",Oo="a-z\\xdf-\\xf6\\xf8-\\xff",ei="\\xac\\xb1\\xd7\\xf7",ro="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ys="\\u2000-\\u206f",am=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ah="A-Z\\xc0-\\xd6\\xd8-\\xde",jl="\\ufe0e\\ufe0f",Pc=ei+ro+Ys+am,ws="[']",Ph="["+po+"]",Eh="["+Pc+"]",Ks="["+_s+"]",Fa="\\d+",KS="["+Wi+"]",Rf="["+Oo+"]",XS="[^"+po+Pc+Fa+Wi+Oo+Ah+"]",iy="\\ud83c[\\udffb-\\udfff]",Eu="(?:"+Ks+"|"+iy+")",Ec="[^"+po+"]",Oh="(?:\\ud83c[\\udde6-\\uddff]){2}",oy="[\\ud800-\\udbff][\\udc00-\\udfff]",Ou="["+Ah+"]",ay="\\u200d",zf="(?:"+Rf+"|"+XS+")",JS="(?:"+Ou+"|"+XS+")",sm="(?:"+ws+"(?:d|ll|m|re|s|t|ve))?",ZS="(?:"+ws+"(?:D|LL|M|RE|S|T|VE))?",sy=Eu+"?",QS="["+jl+"]?",lA="(?:"+ay+"(?:"+[Ec,Oh,oy].join("|")+")"+QS+sy+")*",ly="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",cA="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",e_=QS+sy+lA,uA="(?:"+[KS,Oh,oy].join("|")+")"+e_,fA="(?:"+[Ec+Ks+"?",Ks,Oh,oy,Ph].join("|")+")",dA=RegExp(ws,"g"),hA=RegExp(Ks,"g"),cy=RegExp(iy+"(?="+iy+")|"+fA+e_,"g"),t_=RegExp([Ou+"?"+Rf+"+"+sm+"(?="+[Eh,Ou,"$"].join("|")+")",JS+"+"+ZS+"(?="+[Eh,Ou+zf,"$"].join("|")+")",Ou+"?"+zf+"+"+sm,Ou+"+"+ZS,cA,ly,Fa,uA].join("|"),"g"),uy=RegExp("["+ay+po+_s+jl+"]"),n_=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,fy=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],r_=-1,yr={};yr[wt]=yr[sn]=yr[gr]=yr[mi]=yr[Lr]=yr[ho]=yr[Tr]=yr[Vn]=yr[Bn]=!0,yr[W]=yr[ae]=yr[zt]=yr[ue]=yr[Kt]=yr[ce]=yr[ye]=yr[j]=yr[O]=yr[M]=yr[Q]=yr[De]=yr[Le]=yr[tt]=yr[Qe]=!1;var lr={};lr[W]=lr[ae]=lr[zt]=lr[Kt]=lr[ue]=lr[ce]=lr[wt]=lr[sn]=lr[gr]=lr[mi]=lr[Lr]=lr[O]=lr[M]=lr[Q]=lr[De]=lr[Le]=lr[tt]=lr[Xe]=lr[ho]=lr[Tr]=lr[Vn]=lr[Bn]=!0,lr[ye]=lr[j]=lr[Qe]=!1;var pA={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},gA={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},mA={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ih={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},i_=parseFloat,dy=parseInt,o_=typeof ui=="object"&&ui&&ui.Object===Object&&ui,vA=typeof self=="object"&&self&&self.Object===Object&&self,Gi=o_||vA||Function("return this")(),w=e&&!e.nodeType&&e,P=w&&!0&&t&&!t.nodeType&&t,$=P&&P.exports===w,L=$&&o_.process,U=function(){try{var Ee=P&&P.require&&P.require("util").types;return Ee||L&&L.binding&&L.binding("util")}catch{}}(),G=U&&U.isArrayBuffer,X=U&&U.isDate,me=U&&U.isMap,de=U&&U.isRegExp,Fe=U&&U.isSet,Be=U&&U.isTypedArray;function Ye(Ee,We,Ve){switch(Ve.length){case 0:return Ee.call(We);case 1:return Ee.call(We,Ve[0]);case 2:return Ee.call(We,Ve[0],Ve[1]);case 3:return Ee.call(We,Ve[0],Ve[1],Ve[2])}return Ee.apply(We,Ve)}function Ne(Ee,We,Ve,ht){for(var Zt=-1,jn=Ee==null?0:Ee.length;++Zt<jn;){var Ai=Ee[Zt];We(ht,Ai,Ve(Ai),Ee)}return ht}function He(Ee,We){for(var Ve=-1,ht=Ee==null?0:Ee.length;++Ve<ht&&We(Ee[Ve],Ve,Ee)!==!1;);return Ee}function It(Ee,We){for(var Ve=Ee==null?0:Ee.length;Ve--&&We(Ee[Ve],Ve,Ee)!==!1;);return Ee}function nn(Ee,We){for(var Ve=-1,ht=Ee==null?0:Ee.length;++Ve<ht;)if(!We(Ee[Ve],Ve,Ee))return!1;return!0}function vt(Ee,We){for(var Ve=-1,ht=Ee==null?0:Ee.length,Zt=0,jn=[];++Ve<ht;){var Ai=Ee[Ve];We(Ai,Ve,Ee)&&(jn[Zt++]=Ai)}return jn}function ti(Ee,We){var Ve=Ee==null?0:Ee.length;return!!Ve&&La(Ee,We,0)>-1}function ni(Ee,We,Ve){for(var ht=-1,Zt=Ee==null?0:Ee.length;++ht<Zt;)if(Ve(We,Ee[ht]))return!0;return!1}function Cn(Ee,We){for(var Ve=-1,ht=Ee==null?0:Ee.length,Zt=Array(ht);++Ve<ht;)Zt[Ve]=We(Ee[Ve],Ve,Ee);return Zt}function On(Ee,We){for(var Ve=-1,ht=We.length,Zt=Ee.length;++Ve<ht;)Ee[Zt+Ve]=We[Ve];return Ee}function Jt(Ee,We,Ve,ht){var Zt=-1,jn=Ee==null?0:Ee.length;for(ht&&jn&&(Ve=Ee[++Zt]);++Zt<jn;)Ve=We(Ve,Ee[Zt],Zt,Ee);return Ve}function Io(Ee,We,Ve,ht){var Zt=Ee==null?0:Ee.length;for(ht&&Zt&&(Ve=Ee[--Zt]);Zt--;)Ve=We(Ve,Ee[Zt],Zt,Ee);return Ve}function In(Ee,We){for(var Ve=-1,ht=Ee==null?0:Ee.length;++Ve<ht;)if(We(Ee[Ve],Ve,Ee))return!0;return!1}var Hr=Js("length");function $h(Ee){return Ee.split("")}function lm(Ee){return Ee.match(Me)||[]}function $o(Ee,We,Ve){var ht;return Ve(Ee,function(Zt,jn,Ai){if(We(Zt,jn,Ai))return ht=jn,!1}),ht}function Xs(Ee,We,Ve,ht){for(var Zt=Ee.length,jn=Ve+(ht?1:-1);ht?jn--:++jn<Zt;)if(We(Ee[jn],jn,Ee))return jn;return-1}function La(Ee,We,Ve){return We===We?c_(Ee,We,Ve):Xs(Ee,Hl,Ve)}function Fo(Ee,We,Ve,ht){for(var Zt=Ve-1,jn=Ee.length;++Zt<jn;)if(ht(Ee[Zt],We))return Zt;return-1}function Hl(Ee){return Ee!==Ee}function la(Ee,We){var Ve=Ee==null?0:Ee.length;return Ve?Yn(Ee,We)/Ve:Se}function Js(Ee){return function(We){return We==null?n:We[Ee]}}function cm(Ee){return function(We){return Ee==null?n:Ee[We]}}function Oc(Ee,We,Ve,ht,Zt){return Zt(Ee,function(jn,Ai,tr){Ve=ht?(ht=!1,jn):We(Ve,jn,Ai,tr)}),Ve}function hy(Ee,We){var Ve=Ee.length;for(Ee.sort(We);Ve--;)Ee[Ve]=Ee[Ve].value;return Ee}function Yn(Ee,We){for(var Ve,ht=-1,Zt=Ee.length;++ht<Zt;){var jn=We(Ee[ht]);jn!==n&&(Ve=Ve===n?jn:Ve+jn)}return Ve}function Ul(Ee,We){for(var Ve=-1,ht=Array(Ee);++Ve<Ee;)ht[Ve]=We(Ve);return ht}function a_(Ee,We){return Cn(We,function(Ve){return[Ve,Ee[Ve]]})}function um(Ee){return Ee&&Ee.slice(0,Da(Ee)+1).replace(Mf,"")}function ca(Ee){return function(We){return Ee(We)}}function Vf(Ee,We){return Cn(We,function(Ve){return Ee[Ve]})}function Fh(Ee,We){return Ee.has(We)}function py(Ee,We){for(var Ve=-1,ht=Ee.length;++Ve<ht&&La(We,Ee[Ve],0)>-1;);return Ve}function s_(Ee,We){for(var Ve=Ee.length;Ve--&&La(We,Ee[Ve],0)>-1;);return Ve}function yA(Ee,We){for(var Ve=Ee.length,ht=0;Ve--;)Ee[Ve]===We&&++ht;return ht}var bA=cm(pA),fm=cm(gA);function SA(Ee){return"\\"+Ih[Ee]}function _A(Ee,We){return Ee==null?n:Ee[We]}function Bf(Ee){return uy.test(Ee)}function Lh(Ee){return n_.test(Ee)}function wA(Ee){for(var We,Ve=[];!(We=Ee.next()).done;)Ve.push(We.value);return Ve}function Dh(Ee){var We=-1,Ve=Array(Ee.size);return Ee.forEach(function(ht,Zt){Ve[++We]=[Zt,ht]}),Ve}function Zs(Ee,We){return function(Ve){return Ee(We(Ve))}}function io(Ee,We){for(var Ve=-1,ht=Ee.length,Zt=0,jn=[];++Ve<ht;){var Ai=Ee[Ve];(Ai===We||Ai===u)&&(Ee[Ve]=u,jn[Zt++]=Ve)}return jn}function Nh(Ee){var We=-1,Ve=Array(Ee.size);return Ee.forEach(function(ht){Ve[++We]=ht}),Ve}function l_(Ee){var We=-1,Ve=Array(Ee.size);return Ee.forEach(function(ht){Ve[++We]=[ht,ht]}),Ve}function c_(Ee,We,Ve){for(var ht=Ve-1,Zt=Ee.length;++ht<Zt;)if(Ee[ht]===We)return ht;return-1}function kA(Ee,We,Ve){for(var ht=Ve+1;ht--;)if(Ee[ht]===We)return ht;return ht}function Kn(Ee){return Bf(Ee)?gy(Ee):Hr(Ee)}function Lo(Ee){return Bf(Ee)?u_(Ee):$h(Ee)}function Da(Ee){for(var We=Ee.length;We--&&ke.test(Ee.charAt(We)););return We}var Na=cm(mA);function gy(Ee){for(var We=cy.lastIndex=0;cy.test(Ee);)++We;return We}function u_(Ee){return Ee.match(cy)||[]}function xA(Ee){return Ee.match(t_)||[]}var CA=function Ee(We){We=We==null?Gi:Iu.defaults(Gi.Object(),We,Iu.pick(Gi,fy));var Ve=We.Array,ht=We.Date,Zt=We.Error,jn=We.Function,Ai=We.Math,tr=We.Object,Mh=We.RegExp,my=We.String,Ma=We.TypeError,ee=Ve.prototype,pe=jn.prototype,Te=tr.prototype,qe=We["__core-js_shared__"],Ie=pe.toString,ze=Te.hasOwnProperty,nt=0,st=function(){var p=/[^.]+$/.exec(qe&&qe.keys&&qe.keys.IE_PROTO||"");return p?"Symbol(src)_1."+p:""}(),ut=Te.toString,Vt=Ie.call(tr),Lt=Gi._,Ht=Mh("^"+Ie.call(ze).replace(Pu,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fn=$?We.Buffer:n,Nn=We.Symbol,Ft=We.Uint8Array,vi=fn?fn.allocUnsafe:n,Pi=Zs(tr.getPrototypeOf,tr),Do=tr.create,Ar=Te.propertyIsEnumerable,Ic=ee.splice,jf=Nn?Nn.isConcatSpreadable:n,qi=Nn?Nn.iterator:n,Rh=Nn?Nn.toStringTag:n,f_=function(){try{var p=Hh(tr,"defineProperty");return p({},"",{}),p}catch{}}(),lhe=We.clearTimeout!==Gi.clearTimeout&&We.clearTimeout,che=ht&&ht.now!==Gi.Date.now&&ht.now,uhe=We.setTimeout!==Gi.setTimeout&&We.setTimeout,d_=Ai.ceil,h_=Ai.floor,TA=tr.getOwnPropertySymbols,fhe=fn?fn.isBuffer:n,yN=We.isFinite,dhe=ee.join,hhe=Zs(tr.keys,tr),Yi=Ai.max,No=Ai.min,phe=ht.now,ghe=We.parseInt,bN=Ai.random,mhe=ee.reverse,AA=Hh(We,"DataView"),vy=Hh(We,"Map"),PA=Hh(We,"Promise"),dm=Hh(We,"Set"),yy=Hh(We,"WeakMap"),by=Hh(tr,"create"),p_=yy&&new yy,hm={},vhe=Uh(AA),yhe=Uh(vy),bhe=Uh(PA),She=Uh(dm),_he=Uh(yy),g_=Nn?Nn.prototype:n,Sy=g_?g_.valueOf:n,SN=g_?g_.toString:n;function Z(p){if(yi(p)&&!dn(p)&&!(p instanceof Mn)){if(p instanceof Qs)return p;if(ze.call(p,"__wrapped__"))return _M(p)}return new Qs(p)}var pm=function(){function p(){}return function(b){if(!si(b))return{};if(Do)return Do(b);p.prototype=b;var A=new p;return p.prototype=n,A}}();function m_(){}function Qs(p,b){this.__wrapped__=p,this.__actions__=[],this.__chain__=!!b,this.__index__=0,this.__values__=n}Z.templateSettings={escape:ty,evaluate:Nf,interpolate:Au,variable:"",imports:{_:Z}},Z.prototype=m_.prototype,Z.prototype.constructor=Z,Qs.prototype=pm(m_.prototype),Qs.prototype.constructor=Qs;function Mn(p){this.__wrapped__=p,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=se,this.__views__=[]}function whe(){var p=new Mn(this.__wrapped__);return p.__actions__=Ra(this.__actions__),p.__dir__=this.__dir__,p.__filtered__=this.__filtered__,p.__iteratees__=Ra(this.__iteratees__),p.__takeCount__=this.__takeCount__,p.__views__=Ra(this.__views__),p}function khe(){if(this.__filtered__){var p=new Mn(this);p.__dir__=-1,p.__filtered__=!0}else p=this.clone(),p.__dir__*=-1;return p}function xhe(){var p=this.__wrapped__.value(),b=this.__dir__,A=dn(p),N=b<0,q=A?p.length:0,re=Npe(0,q,this.__views__),he=re.start,Ce=re.end,$e=Ce-he,Ke=N?Ce:he-1,Je=this.__iteratees__,it=Je.length,dt=0,At=No($e,this.__takeCount__);if(!A||!N&&q==$e&&At==$e)return UN(p,this.__actions__);var qt=[];e:for(;$e--&&dt<At;){Ke+=b;for(var bn=-1,Yt=p[Ke];++bn<it;){var $n=Je[bn],Hn=$n.iteratee,Cs=$n.type,da=Hn(Yt);if(Cs==ie)Yt=da;else if(!da){if(Cs==B)continue e;break e}}qt[dt++]=Yt}return qt}Mn.prototype=pm(m_.prototype),Mn.prototype.constructor=Mn;function zh(p){var b=-1,A=p==null?0:p.length;for(this.clear();++b<A;){var N=p[b];this.set(N[0],N[1])}}function Che(){this.__data__=by?by(null):{},this.size=0}function The(p){var b=this.has(p)&&delete this.__data__[p];return this.size-=b?1:0,b}function Ahe(p){var b=this.__data__;if(by){var A=b[p];return A===l?n:A}return ze.call(b,p)?b[p]:n}function Phe(p){var b=this.__data__;return by?b[p]!==n:ze.call(b,p)}function Ehe(p,b){var A=this.__data__;return this.size+=this.has(p)?0:1,A[p]=by&&b===n?l:b,this}zh.prototype.clear=Che,zh.prototype.delete=The,zh.prototype.get=Ahe,zh.prototype.has=Phe,zh.prototype.set=Ehe;function $u(p){var b=-1,A=p==null?0:p.length;for(this.clear();++b<A;){var N=p[b];this.set(N[0],N[1])}}function Ohe(){this.__data__=[],this.size=0}function Ihe(p){var b=this.__data__,A=v_(b,p);if(A<0)return!1;var N=b.length-1;return A==N?b.pop():Ic.call(b,A,1),--this.size,!0}function $he(p){var b=this.__data__,A=v_(b,p);return A<0?n:b[A][1]}function Fhe(p){return v_(this.__data__,p)>-1}function Lhe(p,b){var A=this.__data__,N=v_(A,p);return N<0?(++this.size,A.push([p,b])):A[N][1]=b,this}$u.prototype.clear=Ohe,$u.prototype.delete=Ihe,$u.prototype.get=$he,$u.prototype.has=Fhe,$u.prototype.set=Lhe;function Fu(p){var b=-1,A=p==null?0:p.length;for(this.clear();++b<A;){var N=p[b];this.set(N[0],N[1])}}function Dhe(){this.size=0,this.__data__={hash:new zh,map:new(vy||$u),string:new zh}}function Nhe(p){var b=E_(this,p).delete(p);return this.size-=b?1:0,b}function Mhe(p){return E_(this,p).get(p)}function Rhe(p){return E_(this,p).has(p)}function zhe(p,b){var A=E_(this,p),N=A.size;return A.set(p,b),this.size+=A.size==N?0:1,this}Fu.prototype.clear=Dhe,Fu.prototype.delete=Nhe,Fu.prototype.get=Mhe,Fu.prototype.has=Rhe,Fu.prototype.set=zhe;function Vh(p){var b=-1,A=p==null?0:p.length;for(this.__data__=new Fu;++b<A;)this.add(p[b])}function Vhe(p){return this.__data__.set(p,l),this}function Bhe(p){return this.__data__.has(p)}Vh.prototype.add=Vh.prototype.push=Vhe,Vh.prototype.has=Bhe;function Wl(p){var b=this.__data__=new $u(p);this.size=b.size}function jhe(){this.__data__=new $u,this.size=0}function Hhe(p){var b=this.__data__,A=b.delete(p);return this.size=b.size,A}function Uhe(p){return this.__data__.get(p)}function Whe(p){return this.__data__.has(p)}function Ghe(p,b){var A=this.__data__;if(A instanceof $u){var N=A.__data__;if(!vy||N.length<i-1)return N.push([p,b]),this.size=++A.size,this;A=this.__data__=new Fu(N)}return A.set(p,b),this.size=A.size,this}Wl.prototype.clear=jhe,Wl.prototype.delete=Hhe,Wl.prototype.get=Uhe,Wl.prototype.has=Whe,Wl.prototype.set=Ghe;function _N(p,b){var A=dn(p),N=!A&&Wh(p),q=!A&&!N&&qf(p),re=!A&&!N&&!q&&ym(p),he=A||N||q||re,Ce=he?Ul(p.length,my):[],$e=Ce.length;for(var Ke in p)(b||ze.call(p,Ke))&&!(he&&(Ke=="length"||q&&(Ke=="offset"||Ke=="parent")||re&&(Ke=="buffer"||Ke=="byteLength"||Ke=="byteOffset")||Mu(Ke,$e)))&&Ce.push(Ke);return Ce}function wN(p){var b=p.length;return b?p[zA(0,b-1)]:n}function qhe(p,b){return O_(Ra(p),Bh(b,0,p.length))}function Yhe(p){return O_(Ra(p))}function EA(p,b,A){(A!==n&&!Gl(p[b],A)||A===n&&!(b in p))&&Lu(p,b,A)}function _y(p,b,A){var N=p[b];(!(ze.call(p,b)&&Gl(N,A))||A===n&&!(b in p))&&Lu(p,b,A)}function v_(p,b){for(var A=p.length;A--;)if(Gl(p[A][0],b))return A;return-1}function Khe(p,b,A,N){return Hf(p,function(q,re,he){b(N,q,A(q),he)}),N}function kN(p,b){return p&&Fc(b,oo(b),p)}function Xhe(p,b){return p&&Fc(b,Va(b),p)}function Lu(p,b,A){b=="__proto__"&&f_?f_(p,b,{configurable:!0,enumerable:!0,value:A,writable:!0}):p[b]=A}function OA(p,b){for(var A=-1,N=b.length,q=Ve(N),re=p==null;++A<N;)q[A]=re?n:u5(p,b[A]);return q}function Bh(p,b,A){return p===p&&(A!==n&&(p=p<=A?p:A),b!==n&&(p=p>=b?p:b)),p}function el(p,b,A,N,q,re){var he,Ce=b&f,$e=b&d,Ke=b&h;if(A&&(he=q?A(p,N,q,re):A(p)),he!==n)return he;if(!si(p))return p;var Je=dn(p);if(Je){if(he=Rpe(p),!Ce)return Ra(p,he)}else{var it=Mo(p),dt=it==j||it==Y;if(qf(p))return qN(p,Ce);if(it==Q||it==W||dt&&!q){if(he=$e||dt?{}:dM(p),!Ce)return $e?Ape(p,Xhe(he,p)):Tpe(p,kN(he,p))}else{if(!lr[it])return q?p:{};he=zpe(p,it,Ce)}}re||(re=new Wl);var At=re.get(p);if(At)return At;re.set(p,he),BM(p)?p.forEach(function(Yt){he.add(el(Yt,b,A,Yt,p,re))}):zM(p)&&p.forEach(function(Yt,$n){he.set($n,el(Yt,b,A,$n,p,re))});var qt=Ke?$e?XA:KA:$e?Va:oo,bn=Je?n:qt(p);return He(bn||p,function(Yt,$n){bn&&($n=Yt,Yt=p[$n]),_y(he,$n,el(Yt,b,A,$n,p,re))}),he}function Jhe(p){var b=oo(p);return function(A){return xN(A,p,b)}}function xN(p,b,A){var N=A.length;if(p==null)return!N;for(p=tr(p);N--;){var q=A[N],re=b[q],he=p[q];if(he===n&&!(q in p)||!re(he))return!1}return!0}function CN(p,b,A){if(typeof p!="function")throw new Ma(a);return Py(function(){p.apply(n,A)},b)}function wy(p,b,A,N){var q=-1,re=ti,he=!0,Ce=p.length,$e=[],Ke=b.length;if(!Ce)return $e;A&&(b=Cn(b,ca(A))),N?(re=ni,he=!1):b.length>=i&&(re=Fh,he=!1,b=new Vh(b));e:for(;++q<Ce;){var Je=p[q],it=A==null?Je:A(Je);if(Je=N||Je!==0?Je:0,he&&it===it){for(var dt=Ke;dt--;)if(b[dt]===it)continue e;$e.push(Je)}else re(b,it,N)||$e.push(Je)}return $e}var Hf=ZN($c),TN=ZN($A,!0);function Zhe(p,b){var A=!0;return Hf(p,function(N,q,re){return A=!!b(N,q,re),A}),A}function y_(p,b,A){for(var N=-1,q=p.length;++N<q;){var re=p[N],he=b(re);if(he!=null&&(Ce===n?he===he&&!xs(he):A(he,Ce)))var Ce=he,$e=re}return $e}function Qhe(p,b,A,N){var q=p.length;for(A=pn(A),A<0&&(A=-A>q?0:q+A),N=N===n||N>q?q:pn(N),N<0&&(N+=q),N=A>N?0:HM(N);A<N;)p[A++]=b;return p}function AN(p,b){var A=[];return Hf(p,function(N,q,re){b(N,q,re)&&A.push(N)}),A}function go(p,b,A,N,q){var re=-1,he=p.length;for(A||(A=Bpe),q||(q=[]);++re<he;){var Ce=p[re];b>0&&A(Ce)?b>1?go(Ce,b-1,A,N,q):On(q,Ce):N||(q[q.length]=Ce)}return q}var IA=QN(),PN=QN(!0);function $c(p,b){return p&&IA(p,b,oo)}function $A(p,b){return p&&PN(p,b,oo)}function b_(p,b){return vt(b,function(A){return Ru(p[A])})}function jh(p,b){b=Wf(b,p);for(var A=0,N=b.length;p!=null&&A<N;)p=p[Lc(b[A++])];return A&&A==N?p:n}function EN(p,b,A){var N=b(p);return dn(p)?N:On(N,A(p))}function ua(p){return p==null?p===n?et:H:Rh&&Rh in tr(p)?Dpe(p):Ype(p)}function FA(p,b){return p>b}function epe(p,b){return p!=null&&ze.call(p,b)}function tpe(p,b){return p!=null&&b in tr(p)}function npe(p,b,A){return p>=No(b,A)&&p<Yi(b,A)}function LA(p,b,A){for(var N=A?ni:ti,q=p[0].length,re=p.length,he=re,Ce=Ve(re),$e=1/0,Ke=[];he--;){var Je=p[he];he&&b&&(Je=Cn(Je,ca(b))),$e=No(Je.length,$e),Ce[he]=!A&&(b||q>=120&&Je.length>=120)?new Vh(he&&Je):n}Je=p[0];var it=-1,dt=Ce[0];e:for(;++it<q&&Ke.length<$e;){var At=Je[it],qt=b?b(At):At;if(At=A||At!==0?At:0,!(dt?Fh(dt,qt):N(Ke,qt,A))){for(he=re;--he;){var bn=Ce[he];if(!(bn?Fh(bn,qt):N(p[he],qt,A)))continue e}dt&&dt.push(qt),Ke.push(At)}}return Ke}function rpe(p,b,A,N){return $c(p,function(q,re,he){b(N,A(q),re,he)}),N}function ky(p,b,A){b=Wf(b,p),p=mM(p,b);var N=p==null?p:p[Lc(nl(b))];return N==null?n:Ye(N,p,A)}function ON(p){return yi(p)&&ua(p)==W}function ipe(p){return yi(p)&&ua(p)==zt}function ope(p){return yi(p)&&ua(p)==ce}function xy(p,b,A,N,q){return p===b?!0:p==null||b==null||!yi(p)&&!yi(b)?p!==p&&b!==b:ape(p,b,A,N,xy,q)}function ape(p,b,A,N,q,re){var he=dn(p),Ce=dn(b),$e=he?ae:Mo(p),Ke=Ce?ae:Mo(b);$e=$e==W?Q:$e,Ke=Ke==W?Q:Ke;var Je=$e==Q,it=Ke==Q,dt=$e==Ke;if(dt&&qf(p)){if(!qf(b))return!1;he=!0,Je=!1}if(dt&&!Je)return re||(re=new Wl),he||ym(p)?cM(p,b,A,N,q,re):Fpe(p,b,$e,A,N,q,re);if(!(A&g)){var At=Je&&ze.call(p,"__wrapped__"),qt=it&&ze.call(b,"__wrapped__");if(At||qt){var bn=At?p.value():p,Yt=qt?b.value():b;return re||(re=new Wl),q(bn,Yt,A,N,re)}}return dt?(re||(re=new Wl),Lpe(p,b,A,N,q,re)):!1}function spe(p){return yi(p)&&Mo(p)==O}function DA(p,b,A,N){var q=A.length,re=q,he=!N;if(p==null)return!re;for(p=tr(p);q--;){var Ce=A[q];if(he&&Ce[2]?Ce[1]!==p[Ce[0]]:!(Ce[0]in p))return!1}for(;++q<re;){Ce=A[q];var $e=Ce[0],Ke=p[$e],Je=Ce[1];if(he&&Ce[2]){if(Ke===n&&!($e in p))return!1}else{var it=new Wl;if(N)var dt=N(Ke,Je,$e,p,b,it);if(!(dt===n?xy(Je,Ke,g|y,N,it):dt))return!1}}return!0}function IN(p){if(!si(p)||Hpe(p))return!1;var b=Ru(p)?Ht:qn;return b.test(Uh(p))}function lpe(p){return yi(p)&&ua(p)==De}function cpe(p){return yi(p)&&Mo(p)==Le}function upe(p){return yi(p)&&N_(p.length)&&!!yr[ua(p)]}function $N(p){return typeof p=="function"?p:p==null?Ba:typeof p=="object"?dn(p)?DN(p[0],p[1]):LN(p):eR(p)}function NA(p){if(!Ay(p))return hhe(p);var b=[];for(var A in tr(p))ze.call(p,A)&&A!="constructor"&&b.push(A);return b}function fpe(p){if(!si(p))return qpe(p);var b=Ay(p),A=[];for(var N in p)N=="constructor"&&(b||!ze.call(p,N))||A.push(N);return A}function MA(p,b){return p<b}function FN(p,b){var A=-1,N=za(p)?Ve(p.length):[];return Hf(p,function(q,re,he){N[++A]=b(q,re,he)}),N}function LN(p){var b=ZA(p);return b.length==1&&b[0][2]?pM(b[0][0],b[0][1]):function(A){return A===p||DA(A,p,b)}}function DN(p,b){return e5(p)&&hM(b)?pM(Lc(p),b):function(A){var N=u5(A,p);return N===n&&N===b?f5(A,p):xy(b,N,g|y)}}function S_(p,b,A,N,q){p!==b&&IA(b,function(re,he){if(q||(q=new Wl),si(re))dpe(p,b,he,A,S_,N,q);else{var Ce=N?N(n5(p,he),re,he+"",p,b,q):n;Ce===n&&(Ce=re),EA(p,he,Ce)}},Va)}function dpe(p,b,A,N,q,re,he){var Ce=n5(p,A),$e=n5(b,A),Ke=he.get($e);if(Ke){EA(p,A,Ke);return}var Je=re?re(Ce,$e,A+"",p,b,he):n,it=Je===n;if(it){var dt=dn($e),At=!dt&&qf($e),qt=!dt&&!At&&ym($e);Je=$e,dt||At||qt?dn(Ce)?Je=Ce:Ei(Ce)?Je=Ra(Ce):At?(it=!1,Je=qN($e,!0)):qt?(it=!1,Je=YN($e,!0)):Je=[]:Ey($e)||Wh($e)?(Je=Ce,Wh(Ce)?Je=UM(Ce):(!si(Ce)||Ru(Ce))&&(Je=dM($e))):it=!1}it&&(he.set($e,Je),q(Je,$e,N,re,he),he.delete($e)),EA(p,A,Je)}function NN(p,b){var A=p.length;if(A)return b+=b<0?A:0,Mu(b,A)?p[b]:n}function MN(p,b,A){b.length?b=Cn(b,function(re){return dn(re)?function(he){return jh(he,re.length===1?re[0]:re)}:re}):b=[Ba];var N=-1;b=Cn(b,ca(Gt()));var q=FN(p,function(re,he,Ce){var $e=Cn(b,function(Ke){return Ke(re)});return{criteria:$e,index:++N,value:re}});return hy(q,function(re,he){return Cpe(re,he,A)})}function hpe(p,b){return RN(p,b,function(A,N){return f5(p,N)})}function RN(p,b,A){for(var N=-1,q=b.length,re={};++N<q;){var he=b[N],Ce=jh(p,he);A(Ce,he)&&Cy(re,Wf(he,p),Ce)}return re}function ppe(p){return function(b){return jh(b,p)}}function RA(p,b,A,N){var q=N?Fo:La,re=-1,he=b.length,Ce=p;for(p===b&&(b=Ra(b)),A&&(Ce=Cn(p,ca(A)));++re<he;)for(var $e=0,Ke=b[re],Je=A?A(Ke):Ke;($e=q(Ce,Je,$e,N))>-1;)Ce!==p&&Ic.call(Ce,$e,1),Ic.call(p,$e,1);return p}function zN(p,b){for(var A=p?b.length:0,N=A-1;A--;){var q=b[A];if(A==N||q!==re){var re=q;Mu(q)?Ic.call(p,q,1):jA(p,q)}}return p}function zA(p,b){return p+h_(bN()*(b-p+1))}function gpe(p,b,A,N){for(var q=-1,re=Yi(d_((b-p)/(A||1)),0),he=Ve(re);re--;)he[N?re:++q]=p,p+=A;return he}function VA(p,b){var A="";if(!p||b<1||b>Ae)return A;do b%2&&(A+=p),b=h_(b/2),b&&(p+=p);while(b);return A}function kn(p,b){return r5(gM(p,b,Ba),p+"")}function mpe(p){return wN(bm(p))}function vpe(p,b){var A=bm(p);return O_(A,Bh(b,0,A.length))}function Cy(p,b,A,N){if(!si(p))return p;b=Wf(b,p);for(var q=-1,re=b.length,he=re-1,Ce=p;Ce!=null&&++q<re;){var $e=Lc(b[q]),Ke=A;if($e==="__proto__"||$e==="constructor"||$e==="prototype")return p;if(q!=he){var Je=Ce[$e];Ke=N?N(Je,$e,Ce):n,Ke===n&&(Ke=si(Je)?Je:Mu(b[q+1])?[]:{})}_y(Ce,$e,Ke),Ce=Ce[$e]}return p}var VN=p_?function(p,b){return p_.set(p,b),p}:Ba,ype=f_?function(p,b){return f_(p,"toString",{configurable:!0,enumerable:!1,value:h5(b),writable:!0})}:Ba;function bpe(p){return O_(bm(p))}function tl(p,b,A){var N=-1,q=p.length;b<0&&(b=-b>q?0:q+b),A=A>q?q:A,A<0&&(A+=q),q=b>A?0:A-b>>>0,b>>>=0;for(var re=Ve(q);++N<q;)re[N]=p[N+b];return re}function Spe(p,b){var A;return Hf(p,function(N,q,re){return A=b(N,q,re),!A}),!!A}function __(p,b,A){var N=0,q=p==null?N:p.length;if(typeof b=="number"&&b===b&&q<=J){for(;N<q;){var re=N+q>>>1,he=p[re];he!==null&&!xs(he)&&(A?he<=b:he<b)?N=re+1:q=re}return q}return BA(p,b,Ba,A)}function BA(p,b,A,N){var q=0,re=p==null?0:p.length;if(re===0)return 0;b=A(b);for(var he=b!==b,Ce=b===null,$e=xs(b),Ke=b===n;q<re;){var Je=h_((q+re)/2),it=A(p[Je]),dt=it!==n,At=it===null,qt=it===it,bn=xs(it);if(he)var Yt=N||qt;else Ke?Yt=qt&&(N||dt):Ce?Yt=qt&&dt&&(N||!At):$e?Yt=qt&&dt&&!At&&(N||!bn):At||bn?Yt=!1:Yt=N?it<=b:it<b;Yt?q=Je+1:re=Je}return No(re,ne)}function BN(p,b){for(var A=-1,N=p.length,q=0,re=[];++A<N;){var he=p[A],Ce=b?b(he):he;if(!A||!Gl(Ce,$e)){var $e=Ce;re[q++]=he===0?0:he}}return re}function jN(p){return typeof p=="number"?p:xs(p)?Se:+p}function ks(p){if(typeof p=="string")return p;if(dn(p))return Cn(p,ks)+"";if(xs(p))return SN?SN.call(p):"";var b=p+"";return b=="0"&&1/p==-_e?"-0":b}function Uf(p,b,A){var N=-1,q=ti,re=p.length,he=!0,Ce=[],$e=Ce;if(A)he=!1,q=ni;else if(re>=i){var Ke=b?null:Ipe(p);if(Ke)return Nh(Ke);he=!1,q=Fh,$e=new Vh}else $e=b?[]:Ce;e:for(;++N<re;){var Je=p[N],it=b?b(Je):Je;if(Je=A||Je!==0?Je:0,he&&it===it){for(var dt=$e.length;dt--;)if($e[dt]===it)continue e;b&&$e.push(it),Ce.push(Je)}else q($e,it,A)||($e!==Ce&&$e.push(it),Ce.push(Je))}return Ce}function jA(p,b){return b=Wf(b,p),p=mM(p,b),p==null||delete p[Lc(nl(b))]}function HN(p,b,A,N){return Cy(p,b,A(jh(p,b)),N)}function w_(p,b,A,N){for(var q=p.length,re=N?q:-1;(N?re--:++re<q)&&b(p[re],re,p););return A?tl(p,N?0:re,N?re+1:q):tl(p,N?re+1:0,N?q:re)}function UN(p,b){var A=p;return A instanceof Mn&&(A=A.value()),Jt(b,function(N,q){return q.func.apply(q.thisArg,On([N],q.args))},A)}function HA(p,b,A){var N=p.length;if(N<2)return N?Uf(p[0]):[];for(var q=-1,re=Ve(N);++q<N;)for(var he=p[q],Ce=-1;++Ce<N;)Ce!=q&&(re[q]=wy(re[q]||he,p[Ce],b,A));return Uf(go(re,1),b,A)}function WN(p,b,A){for(var N=-1,q=p.length,re=b.length,he={};++N<q;){var Ce=N<re?b[N]:n;A(he,p[N],Ce)}return he}function UA(p){return Ei(p)?p:[]}function WA(p){return typeof p=="function"?p:Ba}function Wf(p,b){return dn(p)?p:e5(p,b)?[p]:SM(cr(p))}var _pe=kn;function Gf(p,b,A){var N=p.length;return A=A===n?N:A,!b&&A>=N?p:tl(p,b,A)}var GN=lhe||function(p){return Gi.clearTimeout(p)};function qN(p,b){if(b)return p.slice();var A=p.length,N=vi?vi(A):new p.constructor(A);return p.copy(N),N}function GA(p){var b=new p.constructor(p.byteLength);return new Ft(b).set(new Ft(p)),b}function wpe(p,b){var A=b?GA(p.buffer):p.buffer;return new p.constructor(A,p.byteOffset,p.byteLength)}function kpe(p){var b=new p.constructor(p.source,sr.exec(p));return b.lastIndex=p.lastIndex,b}function xpe(p){return Sy?tr(Sy.call(p)):{}}function YN(p,b){var A=b?GA(p.buffer):p.buffer;return new p.constructor(A,p.byteOffset,p.length)}function KN(p,b){if(p!==b){var A=p!==n,N=p===null,q=p===p,re=xs(p),he=b!==n,Ce=b===null,$e=b===b,Ke=xs(b);if(!Ce&&!Ke&&!re&&p>b||re&&he&&$e&&!Ce&&!Ke||N&&he&&$e||!A&&$e||!q)return 1;if(!N&&!re&&!Ke&&p<b||Ke&&A&&q&&!N&&!re||Ce&&A&&q||!he&&q||!$e)return-1}return 0}function Cpe(p,b,A){for(var N=-1,q=p.criteria,re=b.criteria,he=q.length,Ce=A.length;++N<he;){var $e=KN(q[N],re[N]);if($e){if(N>=Ce)return $e;var Ke=A[N];return $e*(Ke=="desc"?-1:1)}}return p.index-b.index}function XN(p,b,A,N){for(var q=-1,re=p.length,he=A.length,Ce=-1,$e=b.length,Ke=Yi(re-he,0),Je=Ve($e+Ke),it=!N;++Ce<$e;)Je[Ce]=b[Ce];for(;++q<he;)(it||q<re)&&(Je[A[q]]=p[q]);for(;Ke--;)Je[Ce++]=p[q++];return Je}function JN(p,b,A,N){for(var q=-1,re=p.length,he=-1,Ce=A.length,$e=-1,Ke=b.length,Je=Yi(re-Ce,0),it=Ve(Je+Ke),dt=!N;++q<Je;)it[q]=p[q];for(var At=q;++$e<Ke;)it[At+$e]=b[$e];for(;++he<Ce;)(dt||q<re)&&(it[At+A[he]]=p[q++]);return it}function Ra(p,b){var A=-1,N=p.length;for(b||(b=Ve(N));++A<N;)b[A]=p[A];return b}function Fc(p,b,A,N){var q=!A;A||(A={});for(var re=-1,he=b.length;++re<he;){var Ce=b[re],$e=N?N(A[Ce],p[Ce],Ce,A,p):n;$e===n&&($e=p[Ce]),q?Lu(A,Ce,$e):_y(A,Ce,$e)}return A}function Tpe(p,b){return Fc(p,QA(p),b)}function Ape(p,b){return Fc(p,uM(p),b)}function k_(p,b){return function(A,N){var q=dn(A)?Ne:Khe,re=b?b():{};return q(A,p,Gt(N,2),re)}}function gm(p){return kn(function(b,A){var N=-1,q=A.length,re=q>1?A[q-1]:n,he=q>2?A[2]:n;for(re=p.length>3&&typeof re=="function"?(q--,re):n,he&&fa(A[0],A[1],he)&&(re=q<3?n:re,q=1),b=tr(b);++N<q;){var Ce=A[N];Ce&&p(b,Ce,N,re)}return b})}function ZN(p,b){return function(A,N){if(A==null)return A;if(!za(A))return p(A,N);for(var q=A.length,re=b?q:-1,he=tr(A);(b?re--:++re<q)&&N(he[re],re,he)!==!1;);return A}}function QN(p){return function(b,A,N){for(var q=-1,re=tr(b),he=N(b),Ce=he.length;Ce--;){var $e=he[p?Ce:++q];if(A(re[$e],$e,re)===!1)break}return b}}function Ppe(p,b,A){var N=b&S,q=Ty(p);function re(){var he=this&&this!==Gi&&this instanceof re?q:p;return he.apply(N?A:this,arguments)}return re}function eM(p){return function(b){b=cr(b);var A=Bf(b)?Lo(b):n,N=A?A[0]:b.charAt(0),q=A?Gf(A,1).join(""):b.slice(1);return N[p]()+q}}function mm(p){return function(b){return Jt(ZM(JM(b).replace(dA,"")),p,"")}}function Ty(p){return function(){var b=arguments;switch(b.length){case 0:return new p;case 1:return new p(b[0]);case 2:return new p(b[0],b[1]);case 3:return new p(b[0],b[1],b[2]);case 4:return new p(b[0],b[1],b[2],b[3]);case 5:return new p(b[0],b[1],b[2],b[3],b[4]);case 6:return new p(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new p(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var A=pm(p.prototype),N=p.apply(A,b);return si(N)?N:A}}function Epe(p,b,A){var N=Ty(p);function q(){for(var re=arguments.length,he=Ve(re),Ce=re,$e=vm(q);Ce--;)he[Ce]=arguments[Ce];var Ke=re<3&&he[0]!==$e&&he[re-1]!==$e?[]:io(he,$e);if(re-=Ke.length,re<A)return oM(p,b,x_,q.placeholder,n,he,Ke,n,n,A-re);var Je=this&&this!==Gi&&this instanceof q?N:p;return Ye(Je,this,he)}return q}function tM(p){return function(b,A,N){var q=tr(b);if(!za(b)){var re=Gt(A,3);b=oo(b),A=function(Ce){return re(q[Ce],Ce,q)}}var he=p(b,A,N);return he>-1?q[re?b[he]:he]:n}}function nM(p){return Nu(function(b){var A=b.length,N=A,q=Qs.prototype.thru;for(p&&b.reverse();N--;){var re=b[N];if(typeof re!="function")throw new Ma(a);if(q&&!he&&P_(re)=="wrapper")var he=new Qs([],!0)}for(N=he?N:A;++N<A;){re=b[N];var Ce=P_(re),$e=Ce=="wrapper"?JA(re):n;$e&&t5($e[0])&&$e[1]==(T|x|k|E)&&!$e[4].length&&$e[9]==1?he=he[P_($e[0])].apply(he,$e[3]):he=re.length==1&&t5(re)?he[Ce]():he.thru(re)}return function(){var Ke=arguments,Je=Ke[0];if(he&&Ke.length==1&&dn(Je))return he.plant(Je).value();for(var it=0,dt=A?b[it].apply(this,Ke):Je;++it<A;)dt=b[it].call(this,dt);return dt}})}function x_(p,b,A,N,q,re,he,Ce,$e,Ke){var Je=b&T,it=b&S,dt=b&v,At=b&(x|C),qt=b&I,bn=dt?n:Ty(p);function Yt(){for(var $n=arguments.length,Hn=Ve($n),Cs=$n;Cs--;)Hn[Cs]=arguments[Cs];if(At)var da=vm(Yt),Ts=yA(Hn,da);if(N&&(Hn=XN(Hn,N,q,At)),re&&(Hn=JN(Hn,re,he,At)),$n-=Ts,At&&$n<Ke){var Oi=io(Hn,da);return oM(p,b,x_,Yt.placeholder,A,Hn,Oi,Ce,$e,Ke-$n)}var ql=it?A:this,Vu=dt?ql[p]:p;return $n=Hn.length,Ce?Hn=Kpe(Hn,Ce):qt&&$n>1&&Hn.reverse(),Je&&$e<$n&&(Hn.length=$e),this&&this!==Gi&&this instanceof Yt&&(Vu=bn||Ty(Vu)),Vu.apply(ql,Hn)}return Yt}function rM(p,b){return function(A,N){return rpe(A,p,b(N),{})}}function C_(p,b){return function(A,N){var q;if(A===n&&N===n)return b;if(A!==n&&(q=A),N!==n){if(q===n)return N;typeof A=="string"||typeof N=="string"?(A=ks(A),N=ks(N)):(A=jN(A),N=jN(N)),q=p(A,N)}return q}}function qA(p){return Nu(function(b){return b=Cn(b,ca(Gt())),kn(function(A){var N=this;return p(b,function(q){return Ye(q,N,A)})})})}function T_(p,b){b=b===n?" ":ks(b);var A=b.length;if(A<2)return A?VA(b,p):b;var N=VA(b,d_(p/Kn(b)));return Bf(b)?Gf(Lo(N),0,p).join(""):N.slice(0,p)}function Ope(p,b,A,N){var q=b&S,re=Ty(p);function he(){for(var Ce=-1,$e=arguments.length,Ke=-1,Je=N.length,it=Ve(Je+$e),dt=this&&this!==Gi&&this instanceof he?re:p;++Ke<Je;)it[Ke]=N[Ke];for(;$e--;)it[Ke++]=arguments[++Ce];return Ye(dt,q?A:this,it)}return he}function iM(p){return function(b,A,N){return N&&typeof N!="number"&&fa(b,A,N)&&(A=N=n),b=zu(b),A===n?(A=b,b=0):A=zu(A),N=N===n?b<A?1:-1:zu(N),gpe(b,A,N,p)}}function A_(p){return function(b,A){return typeof b=="string"&&typeof A=="string"||(b=rl(b),A=rl(A)),p(b,A)}}function oM(p,b,A,N,q,re,he,Ce,$e,Ke){var Je=b&x,it=Je?he:n,dt=Je?n:he,At=Je?re:n,qt=Je?n:re;b|=Je?k:m,b&=~(Je?m:k),b&_||(b&=~(S|v));var bn=[p,b,q,At,it,qt,dt,Ce,$e,Ke],Yt=A.apply(n,bn);return t5(p)&&vM(Yt,bn),Yt.placeholder=N,yM(Yt,p,b)}function YA(p){var b=Ai[p];return function(A,N){if(A=rl(A),N=N==null?0:No(pn(N),292),N&&yN(A)){var q=(cr(A)+"e").split("e"),re=b(q[0]+"e"+(+q[1]+N));return q=(cr(re)+"e").split("e"),+(q[0]+"e"+(+q[1]-N))}return b(A)}}var Ipe=dm&&1/Nh(new dm([,-0]))[1]==_e?function(p){return new dm(p)}:m5;function aM(p){return function(b){var A=Mo(b);return A==O?Dh(b):A==Le?l_(b):a_(b,p(b))}}function Du(p,b,A,N,q,re,he,Ce){var $e=b&v;if(!$e&&typeof p!="function")throw new Ma(a);var Ke=N?N.length:0;if(Ke||(b&=~(k|m),N=q=n),he=he===n?he:Yi(pn(he),0),Ce=Ce===n?Ce:pn(Ce),Ke-=q?q.length:0,b&m){var Je=N,it=q;N=q=n}var dt=$e?n:JA(p),At=[p,b,A,N,q,Je,it,re,he,Ce];if(dt&&Gpe(At,dt),p=At[0],b=At[1],A=At[2],N=At[3],q=At[4],Ce=At[9]=At[9]===n?$e?0:p.length:Yi(At[9]-Ke,0),!Ce&&b&(x|C)&&(b&=~(x|C)),!b||b==S)var qt=Ppe(p,b,A);else b==x||b==C?qt=Epe(p,b,Ce):(b==k||b==(S|k))&&!q.length?qt=Ope(p,b,A,N):qt=x_.apply(n,At);var bn=dt?VN:vM;return yM(bn(qt,At),p,b)}function sM(p,b,A,N){return p===n||Gl(p,Te[A])&&!ze.call(N,A)?b:p}function lM(p,b,A,N,q,re){return si(p)&&si(b)&&(re.set(b,p),S_(p,b,n,lM,re),re.delete(b)),p}function $pe(p){return Ey(p)?n:p}function cM(p,b,A,N,q,re){var he=A&g,Ce=p.length,$e=b.length;if(Ce!=$e&&!(he&&$e>Ce))return!1;var Ke=re.get(p),Je=re.get(b);if(Ke&&Je)return Ke==b&&Je==p;var it=-1,dt=!0,At=A&y?new Vh:n;for(re.set(p,b),re.set(b,p);++it<Ce;){var qt=p[it],bn=b[it];if(N)var Yt=he?N(bn,qt,it,b,p,re):N(qt,bn,it,p,b,re);if(Yt!==n){if(Yt)continue;dt=!1;break}if(At){if(!In(b,function($n,Hn){if(!Fh(At,Hn)&&(qt===$n||q(qt,$n,A,N,re)))return At.push(Hn)})){dt=!1;break}}else if(!(qt===bn||q(qt,bn,A,N,re))){dt=!1;break}}return re.delete(p),re.delete(b),dt}function Fpe(p,b,A,N,q,re,he){switch(A){case Kt:if(p.byteLength!=b.byteLength||p.byteOffset!=b.byteOffset)return!1;p=p.buffer,b=b.buffer;case zt:return!(p.byteLength!=b.byteLength||!re(new Ft(p),new Ft(b)));case ue:case ce:case M:return Gl(+p,+b);case ye:return p.name==b.name&&p.message==b.message;case De:case tt:return p==b+"";case O:var Ce=Dh;case Le:var $e=N&g;if(Ce||(Ce=Nh),p.size!=b.size&&!$e)return!1;var Ke=he.get(p);if(Ke)return Ke==b;N|=y,he.set(p,b);var Je=cM(Ce(p),Ce(b),N,q,re,he);return he.delete(p),Je;case Xe:if(Sy)return Sy.call(p)==Sy.call(b)}return!1}function Lpe(p,b,A,N,q,re){var he=A&g,Ce=KA(p),$e=Ce.length,Ke=KA(b),Je=Ke.length;if($e!=Je&&!he)return!1;for(var it=$e;it--;){var dt=Ce[it];if(!(he?dt in b:ze.call(b,dt)))return!1}var At=re.get(p),qt=re.get(b);if(At&&qt)return At==b&&qt==p;var bn=!0;re.set(p,b),re.set(b,p);for(var Yt=he;++it<$e;){dt=Ce[it];var $n=p[dt],Hn=b[dt];if(N)var Cs=he?N(Hn,$n,dt,b,p,re):N($n,Hn,dt,p,b,re);if(!(Cs===n?$n===Hn||q($n,Hn,A,N,re):Cs)){bn=!1;break}Yt||(Yt=dt=="constructor")}if(bn&&!Yt){var da=p.constructor,Ts=b.constructor;da!=Ts&&"constructor"in p&&"constructor"in b&&!(typeof da=="function"&&da instanceof da&&typeof Ts=="function"&&Ts instanceof Ts)&&(bn=!1)}return re.delete(p),re.delete(b),bn}function Nu(p){return r5(gM(p,n,xM),p+"")}function KA(p){return EN(p,oo,QA)}function XA(p){return EN(p,Va,uM)}var JA=p_?function(p){return p_.get(p)}:m5;function P_(p){for(var b=p.name+"",A=hm[b],N=ze.call(hm,b)?A.length:0;N--;){var q=A[N],re=q.func;if(re==null||re==p)return q.name}return b}function vm(p){var b=ze.call(Z,"placeholder")?Z:p;return b.placeholder}function Gt(){var p=Z.iteratee||p5;return p=p===p5?$N:p,arguments.length?p(arguments[0],arguments[1]):p}function E_(p,b){var A=p.__data__;return jpe(b)?A[typeof b=="string"?"string":"hash"]:A.map}function ZA(p){for(var b=oo(p),A=b.length;A--;){var N=b[A],q=p[N];b[A]=[N,q,hM(q)]}return b}function Hh(p,b){var A=_A(p,b);return IN(A)?A:n}function Dpe(p){var b=ze.call(p,Rh),A=p[Rh];try{p[Rh]=n;var N=!0}catch{}var q=ut.call(p);return N&&(b?p[Rh]=A:delete p[Rh]),q}var QA=TA?function(p){return p==null?[]:(p=tr(p),vt(TA(p),function(b){return Ar.call(p,b)}))}:v5,uM=TA?function(p){for(var b=[];p;)On(b,QA(p)),p=Pi(p);return b}:v5,Mo=ua;(AA&&Mo(new AA(new ArrayBuffer(1)))!=Kt||vy&&Mo(new vy)!=O||PA&&Mo(PA.resolve())!=ve||dm&&Mo(new dm)!=Le||yy&&Mo(new yy)!=Qe)&&(Mo=function(p){var b=ua(p),A=b==Q?p.constructor:n,N=A?Uh(A):"";if(N)switch(N){case vhe:return Kt;case yhe:return O;case bhe:return ve;case She:return Le;case _he:return Qe}return b});function Npe(p,b,A){for(var N=-1,q=A.length;++N<q;){var re=A[N],he=re.size;switch(re.type){case"drop":p+=he;break;case"dropRight":b-=he;break;case"take":b=No(b,p+he);break;case"takeRight":p=Yi(p,b-he);break}}return{start:p,end:b}}function Mpe(p){var b=p.match(xe);return b?b[1].split(Re):[]}function fM(p,b,A){b=Wf(b,p);for(var N=-1,q=b.length,re=!1;++N<q;){var he=Lc(b[N]);if(!(re=p!=null&&A(p,he)))break;p=p[he]}return re||++N!=q?re:(q=p==null?0:p.length,!!q&&N_(q)&&Mu(he,q)&&(dn(p)||Wh(p)))}function Rpe(p){var b=p.length,A=new p.constructor(b);return b&&typeof p[0]=="string"&&ze.call(p,"index")&&(A.index=p.index,A.input=p.input),A}function dM(p){return typeof p.constructor=="function"&&!Ay(p)?pm(Pi(p)):{}}function zpe(p,b,A){var N=p.constructor;switch(b){case zt:return GA(p);case ue:case ce:return new N(+p);case Kt:return wpe(p,A);case wt:case sn:case gr:case mi:case Lr:case ho:case Tr:case Vn:case Bn:return YN(p,A);case O:return new N;case M:case tt:return new N(p);case De:return kpe(p);case Le:return new N;case Xe:return xpe(p)}}function Vpe(p,b){var A=b.length;if(!A)return p;var N=A-1;return b[N]=(A>1?"& ":"")+b[N],b=b.join(A>2?", ":" "),p.replace(le,`{
/* [wrapped with `+b+`] */
`)}function Bpe(p){return dn(p)||Wh(p)||!!(jf&&p&&p[jf])}function Mu(p,b){var A=typeof p;return b=b??Ae,!!b&&(A=="number"||A!="symbol"&&Xt.test(p))&&p>-1&&p%1==0&&p<b}function fa(p,b,A){if(!si(A))return!1;var N=typeof b;return(N=="number"?za(A)&&Mu(b,A.length):N=="string"&&b in A)?Gl(A[b],p):!1}function e5(p,b){if(dn(p))return!1;var A=typeof p;return A=="number"||A=="symbol"||A=="boolean"||p==null||xs(p)?!0:om.test(p)||!Th.test(p)||b!=null&&p in tr(b)}function jpe(p){var b=typeof p;return b=="string"||b=="number"||b=="symbol"||b=="boolean"?p!=="__proto__":p===null}function t5(p){var b=P_(p),A=Z[b];if(typeof A!="function"||!(b in Mn.prototype))return!1;if(p===A)return!0;var N=JA(A);return!!N&&p===N[0]}function Hpe(p){return!!st&&st in p}var Upe=qe?Ru:y5;function Ay(p){var b=p&&p.constructor,A=typeof b=="function"&&b.prototype||Te;return p===A}function hM(p){return p===p&&!si(p)}function pM(p,b){return function(A){return A==null?!1:A[p]===b&&(b!==n||p in tr(A))}}function Wpe(p){var b=L_(p,function(N){return A.size===c&&A.clear(),N}),A=b.cache;return b}function Gpe(p,b){var A=p[1],N=b[1],q=A|N,re=q<(S|v|T),he=N==T&&A==x||N==T&&A==E&&p[7].length<=b[8]||N==(T|E)&&b[7].length<=b[8]&&A==x;if(!(re||he))return p;N&S&&(p[2]=b[2],q|=A&S?0:_);var Ce=b[3];if(Ce){var $e=p[3];p[3]=$e?XN($e,Ce,b[4]):Ce,p[4]=$e?io(p[3],u):b[4]}return Ce=b[5],Ce&&($e=p[5],p[5]=$e?JN($e,Ce,b[6]):Ce,p[6]=$e?io(p[5],u):b[6]),Ce=b[7],Ce&&(p[7]=Ce),N&T&&(p[8]=p[8]==null?b[8]:No(p[8],b[8])),p[9]==null&&(p[9]=b[9]),p[0]=b[0],p[1]=q,p}function qpe(p){var b=[];if(p!=null)for(var A in tr(p))b.push(A);return b}function Ype(p){return ut.call(p)}function gM(p,b,A){return b=Yi(b===n?p.length-1:b,0),function(){for(var N=arguments,q=-1,re=Yi(N.length-b,0),he=Ve(re);++q<re;)he[q]=N[b+q];q=-1;for(var Ce=Ve(b+1);++q<b;)Ce[q]=N[q];return Ce[b]=A(he),Ye(p,this,Ce)}}function mM(p,b){return b.length<2?p:jh(p,tl(b,0,-1))}function Kpe(p,b){for(var A=p.length,N=No(b.length,A),q=Ra(p);N--;){var re=b[N];p[N]=Mu(re,A)?q[re]:n}return p}function n5(p,b){if(!(b==="constructor"&&typeof p[b]=="function")&&b!="__proto__")return p[b]}var vM=bM(VN),Py=uhe||function(p,b){return Gi.setTimeout(p,b)},r5=bM(ype);function yM(p,b,A){var N=b+"";return r5(p,Vpe(N,Xpe(Mpe(N),A)))}function bM(p){var b=0,A=0;return function(){var N=phe(),q=z-(N-A);if(A=N,q>0){if(++b>=R)return arguments[0]}else b=0;return p.apply(n,arguments)}}function O_(p,b){var A=-1,N=p.length,q=N-1;for(b=b===n?N:b;++A<b;){var re=zA(A,q),he=p[re];p[re]=p[A],p[A]=he}return p.length=b,p}var SM=Wpe(function(p){var b=[];return p.charCodeAt(0)===46&&b.push(""),p.replace(ny,function(A,N,q,re){b.push(q?re.replace(Ct,"$1"):N||A)}),b});function Lc(p){if(typeof p=="string"||xs(p))return p;var b=p+"";return b=="0"&&1/p==-_e?"-0":b}function Uh(p){if(p!=null){try{return Ie.call(p)}catch{}try{return p+""}catch{}}return""}function Xpe(p,b){return He(V,function(A){var N="_."+A[0];b&A[1]&&!ti(p,N)&&p.push(N)}),p.sort()}function _M(p){if(p instanceof Mn)return p.clone();var b=new Qs(p.__wrapped__,p.__chain__);return b.__actions__=Ra(p.__actions__),b.__index__=p.__index__,b.__values__=p.__values__,b}function Jpe(p,b,A){(A?fa(p,b,A):b===n)?b=1:b=Yi(pn(b),0);var N=p==null?0:p.length;if(!N||b<1)return[];for(var q=0,re=0,he=Ve(d_(N/b));q<N;)he[re++]=tl(p,q,q+=b);return he}function Zpe(p){for(var b=-1,A=p==null?0:p.length,N=0,q=[];++b<A;){var re=p[b];re&&(q[N++]=re)}return q}function Qpe(){var p=arguments.length;if(!p)return[];for(var b=Ve(p-1),A=arguments[0],N=p;N--;)b[N-1]=arguments[N];return On(dn(A)?Ra(A):[A],go(b,1))}var ege=kn(function(p,b){return Ei(p)?wy(p,go(b,1,Ei,!0)):[]}),tge=kn(function(p,b){var A=nl(b);return Ei(A)&&(A=n),Ei(p)?wy(p,go(b,1,Ei,!0),Gt(A,2)):[]}),nge=kn(function(p,b){var A=nl(b);return Ei(A)&&(A=n),Ei(p)?wy(p,go(b,1,Ei,!0),n,A):[]});function rge(p,b,A){var N=p==null?0:p.length;return N?(b=A||b===n?1:pn(b),tl(p,b<0?0:b,N)):[]}function ige(p,b,A){var N=p==null?0:p.length;return N?(b=A||b===n?1:pn(b),b=N-b,tl(p,0,b<0?0:b)):[]}function oge(p,b){return p&&p.length?w_(p,Gt(b,3),!0,!0):[]}function age(p,b){return p&&p.length?w_(p,Gt(b,3),!0):[]}function sge(p,b,A,N){var q=p==null?0:p.length;return q?(A&&typeof A!="number"&&fa(p,b,A)&&(A=0,N=q),Qhe(p,b,A,N)):[]}function wM(p,b,A){var N=p==null?0:p.length;if(!N)return-1;var q=A==null?0:pn(A);return q<0&&(q=Yi(N+q,0)),Xs(p,Gt(b,3),q)}function kM(p,b,A){var N=p==null?0:p.length;if(!N)return-1;var q=N-1;return A!==n&&(q=pn(A),q=A<0?Yi(N+q,0):No(q,N-1)),Xs(p,Gt(b,3),q,!0)}function xM(p){var b=p==null?0:p.length;return b?go(p,1):[]}function lge(p){var b=p==null?0:p.length;return b?go(p,_e):[]}function cge(p,b){var A=p==null?0:p.length;return A?(b=b===n?1:pn(b),go(p,b)):[]}function uge(p){for(var b=-1,A=p==null?0:p.length,N={};++b<A;){var q=p[b];N[q[0]]=q[1]}return N}function CM(p){return p&&p.length?p[0]:n}function fge(p,b,A){var N=p==null?0:p.length;if(!N)return-1;var q=A==null?0:pn(A);return q<0&&(q=Yi(N+q,0)),La(p,b,q)}function dge(p){var b=p==null?0:p.length;return b?tl(p,0,-1):[]}var hge=kn(function(p){var b=Cn(p,UA);return b.length&&b[0]===p[0]?LA(b):[]}),pge=kn(function(p){var b=nl(p),A=Cn(p,UA);return b===nl(A)?b=n:A.pop(),A.length&&A[0]===p[0]?LA(A,Gt(b,2)):[]}),gge=kn(function(p){var b=nl(p),A=Cn(p,UA);return b=typeof b=="function"?b:n,b&&A.pop(),A.length&&A[0]===p[0]?LA(A,n,b):[]});function mge(p,b){return p==null?"":dhe.call(p,b)}function nl(p){var b=p==null?0:p.length;return b?p[b-1]:n}function vge(p,b,A){var N=p==null?0:p.length;if(!N)return-1;var q=N;return A!==n&&(q=pn(A),q=q<0?Yi(N+q,0):No(q,N-1)),b===b?kA(p,b,q):Xs(p,Hl,q,!0)}function yge(p,b){return p&&p.length?NN(p,pn(b)):n}var bge=kn(TM);function TM(p,b){return p&&p.length&&b&&b.length?RA(p,b):p}function Sge(p,b,A){return p&&p.length&&b&&b.length?RA(p,b,Gt(A,2)):p}function _ge(p,b,A){return p&&p.length&&b&&b.length?RA(p,b,n,A):p}var wge=Nu(function(p,b){var A=p==null?0:p.length,N=OA(p,b);return zN(p,Cn(b,function(q){return Mu(q,A)?+q:q}).sort(KN)),N});function kge(p,b){var A=[];if(!(p&&p.length))return A;var N=-1,q=[],re=p.length;for(b=Gt(b,3);++N<re;){var he=p[N];b(he,N,p)&&(A.push(he),q.push(N))}return zN(p,q),A}function i5(p){return p==null?p:mhe.call(p)}function xge(p,b,A){var N=p==null?0:p.length;return N?(A&&typeof A!="number"&&fa(p,b,A)?(b=0,A=N):(b=b==null?0:pn(b),A=A===n?N:pn(A)),tl(p,b,A)):[]}function Cge(p,b){return __(p,b)}function Tge(p,b,A){return BA(p,b,Gt(A,2))}function Age(p,b){var A=p==null?0:p.length;if(A){var N=__(p,b);if(N<A&&Gl(p[N],b))return N}return-1}function Pge(p,b){return __(p,b,!0)}function Ege(p,b,A){return BA(p,b,Gt(A,2),!0)}function Oge(p,b){var A=p==null?0:p.length;if(A){var N=__(p,b,!0)-1;if(Gl(p[N],b))return N}return-1}function Ige(p){return p&&p.length?BN(p):[]}function $ge(p,b){return p&&p.length?BN(p,Gt(b,2)):[]}function Fge(p){var b=p==null?0:p.length;return b?tl(p,1,b):[]}function Lge(p,b,A){return p&&p.length?(b=A||b===n?1:pn(b),tl(p,0,b<0?0:b)):[]}function Dge(p,b,A){var N=p==null?0:p.length;return N?(b=A||b===n?1:pn(b),b=N-b,tl(p,b<0?0:b,N)):[]}function Nge(p,b){return p&&p.length?w_(p,Gt(b,3),!1,!0):[]}function Mge(p,b){return p&&p.length?w_(p,Gt(b,3)):[]}var Rge=kn(function(p){return Uf(go(p,1,Ei,!0))}),zge=kn(function(p){var b=nl(p);return Ei(b)&&(b=n),Uf(go(p,1,Ei,!0),Gt(b,2))}),Vge=kn(function(p){var b=nl(p);return b=typeof b=="function"?b:n,Uf(go(p,1,Ei,!0),n,b)});function Bge(p){return p&&p.length?Uf(p):[]}function jge(p,b){return p&&p.length?Uf(p,Gt(b,2)):[]}function Hge(p,b){return b=typeof b=="function"?b:n,p&&p.length?Uf(p,n,b):[]}function o5(p){if(!(p&&p.length))return[];var b=0;return p=vt(p,function(A){if(Ei(A))return b=Yi(A.length,b),!0}),Ul(b,function(A){return Cn(p,Js(A))})}function AM(p,b){if(!(p&&p.length))return[];var A=o5(p);return b==null?A:Cn(A,function(N){return Ye(b,n,N)})}var Uge=kn(function(p,b){return Ei(p)?wy(p,b):[]}),Wge=kn(function(p){return HA(vt(p,Ei))}),Gge=kn(function(p){var b=nl(p);return Ei(b)&&(b=n),HA(vt(p,Ei),Gt(b,2))}),qge=kn(function(p){var b=nl(p);return b=typeof b=="function"?b:n,HA(vt(p,Ei),n,b)}),Yge=kn(o5);function Kge(p,b){return WN(p||[],b||[],_y)}function Xge(p,b){return WN(p||[],b||[],Cy)}var Jge=kn(function(p){var b=p.length,A=b>1?p[b-1]:n;return A=typeof A=="function"?(p.pop(),A):n,AM(p,A)});function PM(p){var b=Z(p);return b.__chain__=!0,b}function Zge(p,b){return b(p),p}function I_(p,b){return b(p)}var Qge=Nu(function(p){var b=p.length,A=b?p[0]:0,N=this.__wrapped__,q=function(re){return OA(re,p)};return b>1||this.__actions__.length||!(N instanceof Mn)||!Mu(A)?this.thru(q):(N=N.slice(A,+A+(b?1:0)),N.__actions__.push({func:I_,args:[q],thisArg:n}),new Qs(N,this.__chain__).thru(function(re){return b&&!re.length&&re.push(n),re}))});function eme(){return PM(this)}function tme(){return new Qs(this.value(),this.__chain__)}function nme(){this.__values__===n&&(this.__values__=jM(this.value()));var p=this.__index__>=this.__values__.length,b=p?n:this.__values__[this.__index__++];return{done:p,value:b}}function rme(){return this}function ime(p){for(var b,A=this;A instanceof m_;){var N=_M(A);N.__index__=0,N.__values__=n,b?q.__wrapped__=N:b=N;var q=N;A=A.__wrapped__}return q.__wrapped__=p,b}function ome(){var p=this.__wrapped__;if(p instanceof Mn){var b=p;return this.__actions__.length&&(b=new Mn(this)),b=b.reverse(),b.__actions__.push({func:I_,args:[i5],thisArg:n}),new Qs(b,this.__chain__)}return this.thru(i5)}function ame(){return UN(this.__wrapped__,this.__actions__)}var sme=k_(function(p,b,A){ze.call(p,A)?++p[A]:Lu(p,A,1)});function lme(p,b,A){var N=dn(p)?nn:Zhe;return A&&fa(p,b,A)&&(b=n),N(p,Gt(b,3))}function cme(p,b){var A=dn(p)?vt:AN;return A(p,Gt(b,3))}var ume=tM(wM),fme=tM(kM);function dme(p,b){return go($_(p,b),1)}function hme(p,b){return go($_(p,b),_e)}function pme(p,b,A){return A=A===n?1:pn(A),go($_(p,b),A)}function EM(p,b){var A=dn(p)?He:Hf;return A(p,Gt(b,3))}function OM(p,b){var A=dn(p)?It:TN;return A(p,Gt(b,3))}var gme=k_(function(p,b,A){ze.call(p,A)?p[A].push(b):Lu(p,A,[b])});function mme(p,b,A,N){p=za(p)?p:bm(p),A=A&&!N?pn(A):0;var q=p.length;return A<0&&(A=Yi(q+A,0)),M_(p)?A<=q&&p.indexOf(b,A)>-1:!!q&&La(p,b,A)>-1}var vme=kn(function(p,b,A){var N=-1,q=typeof b=="function",re=za(p)?Ve(p.length):[];return Hf(p,function(he){re[++N]=q?Ye(b,he,A):ky(he,b,A)}),re}),yme=k_(function(p,b,A){Lu(p,A,b)});function $_(p,b){var A=dn(p)?Cn:FN;return A(p,Gt(b,3))}function bme(p,b,A,N){return p==null?[]:(dn(b)||(b=b==null?[]:[b]),A=N?n:A,dn(A)||(A=A==null?[]:[A]),MN(p,b,A))}var Sme=k_(function(p,b,A){p[A?0:1].push(b)},function(){return[[],[]]});function _me(p,b,A){var N=dn(p)?Jt:Oc,q=arguments.length<3;return N(p,Gt(b,4),A,q,Hf)}function wme(p,b,A){var N=dn(p)?Io:Oc,q=arguments.length<3;return N(p,Gt(b,4),A,q,TN)}function kme(p,b){var A=dn(p)?vt:AN;return A(p,D_(Gt(b,3)))}function xme(p){var b=dn(p)?wN:mpe;return b(p)}function Cme(p,b,A){(A?fa(p,b,A):b===n)?b=1:b=pn(b);var N=dn(p)?qhe:vpe;return N(p,b)}function Tme(p){var b=dn(p)?Yhe:bpe;return b(p)}function Ame(p){if(p==null)return 0;if(za(p))return M_(p)?Kn(p):p.length;var b=Mo(p);return b==O||b==Le?p.size:NA(p).length}function Pme(p,b,A){var N=dn(p)?In:Spe;return A&&fa(p,b,A)&&(b=n),N(p,Gt(b,3))}var Eme=kn(function(p,b){if(p==null)return[];var A=b.length;return A>1&&fa(p,b[0],b[1])?b=[]:A>2&&fa(b[0],b[1],b[2])&&(b=[b[0]]),MN(p,go(b,1),[])}),F_=che||function(){return Gi.Date.now()};function Ome(p,b){if(typeof b!="function")throw new Ma(a);return p=pn(p),function(){if(--p<1)return b.apply(this,arguments)}}function IM(p,b,A){return b=A?n:b,b=p&&b==null?p.length:b,Du(p,T,n,n,n,n,b)}function $M(p,b){var A;if(typeof b!="function")throw new Ma(a);return p=pn(p),function(){return--p>0&&(A=b.apply(this,arguments)),p<=1&&(b=n),A}}var a5=kn(function(p,b,A){var N=S;if(A.length){var q=io(A,vm(a5));N|=k}return Du(p,N,b,A,q)}),FM=kn(function(p,b,A){var N=S|v;if(A.length){var q=io(A,vm(FM));N|=k}return Du(b,N,p,A,q)});function LM(p,b,A){b=A?n:b;var N=Du(p,x,n,n,n,n,n,b);return N.placeholder=LM.placeholder,N}function DM(p,b,A){b=A?n:b;var N=Du(p,C,n,n,n,n,n,b);return N.placeholder=DM.placeholder,N}function NM(p,b,A){var N,q,re,he,Ce,$e,Ke=0,Je=!1,it=!1,dt=!0;if(typeof p!="function")throw new Ma(a);b=rl(b)||0,si(A)&&(Je=!!A.leading,it="maxWait"in A,re=it?Yi(rl(A.maxWait)||0,b):re,dt="trailing"in A?!!A.trailing:dt);function At(Oi){var ql=N,Vu=q;return N=q=n,Ke=Oi,he=p.apply(Vu,ql),he}function qt(Oi){return Ke=Oi,Ce=Py($n,b),Je?At(Oi):he}function bn(Oi){var ql=Oi-$e,Vu=Oi-Ke,tR=b-ql;return it?No(tR,re-Vu):tR}function Yt(Oi){var ql=Oi-$e,Vu=Oi-Ke;return $e===n||ql>=b||ql<0||it&&Vu>=re}function $n(){var Oi=F_();if(Yt(Oi))return Hn(Oi);Ce=Py($n,bn(Oi))}function Hn(Oi){return Ce=n,dt&&N?At(Oi):(N=q=n,he)}function Cs(){Ce!==n&&GN(Ce),Ke=0,N=$e=q=Ce=n}function da(){return Ce===n?he:Hn(F_())}function Ts(){var Oi=F_(),ql=Yt(Oi);if(N=arguments,q=this,$e=Oi,ql){if(Ce===n)return qt($e);if(it)return GN(Ce),Ce=Py($n,b),At($e)}return Ce===n&&(Ce=Py($n,b)),he}return Ts.cancel=Cs,Ts.flush=da,Ts}var Ime=kn(function(p,b){return CN(p,1,b)}),$me=kn(function(p,b,A){return CN(p,rl(b)||0,A)});function Fme(p){return Du(p,I)}function L_(p,b){if(typeof p!="function"||b!=null&&typeof b!="function")throw new Ma(a);var A=function(){var N=arguments,q=b?b.apply(this,N):N[0],re=A.cache;if(re.has(q))return re.get(q);var he=p.apply(this,N);return A.cache=re.set(q,he)||re,he};return A.cache=new(L_.Cache||Fu),A}L_.Cache=Fu;function D_(p){if(typeof p!="function")throw new Ma(a);return function(){var b=arguments;switch(b.length){case 0:return!p.call(this);case 1:return!p.call(this,b[0]);case 2:return!p.call(this,b[0],b[1]);case 3:return!p.call(this,b[0],b[1],b[2])}return!p.apply(this,b)}}function Lme(p){return $M(2,p)}var Dme=_pe(function(p,b){b=b.length==1&&dn(b[0])?Cn(b[0],ca(Gt())):Cn(go(b,1),ca(Gt()));var A=b.length;return kn(function(N){for(var q=-1,re=No(N.length,A);++q<re;)N[q]=b[q].call(this,N[q]);return Ye(p,this,N)})}),s5=kn(function(p,b){var A=io(b,vm(s5));return Du(p,k,n,b,A)}),MM=kn(function(p,b){var A=io(b,vm(MM));return Du(p,m,n,b,A)}),Nme=Nu(function(p,b){return Du(p,E,n,n,n,b)});function Mme(p,b){if(typeof p!="function")throw new Ma(a);return b=b===n?b:pn(b),kn(p,b)}function Rme(p,b){if(typeof p!="function")throw new Ma(a);return b=b==null?0:Yi(pn(b),0),kn(function(A){var N=A[b],q=Gf(A,0,b);return N&&On(q,N),Ye(p,this,q)})}function zme(p,b,A){var N=!0,q=!0;if(typeof p!="function")throw new Ma(a);return si(A)&&(N="leading"in A?!!A.leading:N,q="trailing"in A?!!A.trailing:q),NM(p,b,{leading:N,maxWait:b,trailing:q})}function Vme(p){return IM(p,1)}function Bme(p,b){return s5(WA(b),p)}function jme(){if(!arguments.length)return[];var p=arguments[0];return dn(p)?p:[p]}function Hme(p){return el(p,h)}function Ume(p,b){return b=typeof b=="function"?b:n,el(p,h,b)}function Wme(p){return el(p,f|h)}function Gme(p,b){return b=typeof b=="function"?b:n,el(p,f|h,b)}function qme(p,b){return b==null||xN(p,b,oo(b))}function Gl(p,b){return p===b||p!==p&&b!==b}var Yme=A_(FA),Kme=A_(function(p,b){return p>=b}),Wh=ON(function(){return arguments}())?ON:function(p){return yi(p)&&ze.call(p,"callee")&&!Ar.call(p,"callee")},dn=Ve.isArray,Xme=G?ca(G):ipe;function za(p){return p!=null&&N_(p.length)&&!Ru(p)}function Ei(p){return yi(p)&&za(p)}function Jme(p){return p===!0||p===!1||yi(p)&&ua(p)==ue}var qf=fhe||y5,Zme=X?ca(X):ope;function Qme(p){return yi(p)&&p.nodeType===1&&!Ey(p)}function eve(p){if(p==null)return!0;if(za(p)&&(dn(p)||typeof p=="string"||typeof p.splice=="function"||qf(p)||ym(p)||Wh(p)))return!p.length;var b=Mo(p);if(b==O||b==Le)return!p.size;if(Ay(p))return!NA(p).length;for(var A in p)if(ze.call(p,A))return!1;return!0}function tve(p,b){return xy(p,b)}function nve(p,b,A){A=typeof A=="function"?A:n;var N=A?A(p,b):n;return N===n?xy(p,b,n,A):!!N}function l5(p){if(!yi(p))return!1;var b=ua(p);return b==ye||b==fe||typeof p.message=="string"&&typeof p.name=="string"&&!Ey(p)}function rve(p){return typeof p=="number"&&yN(p)}function Ru(p){if(!si(p))return!1;var b=ua(p);return b==j||b==Y||b==te||b==ge}function RM(p){return typeof p=="number"&&p==pn(p)}function N_(p){return typeof p=="number"&&p>-1&&p%1==0&&p<=Ae}function si(p){var b=typeof p;return p!=null&&(b=="object"||b=="function")}function yi(p){return p!=null&&typeof p=="object"}var zM=me?ca(me):spe;function ive(p,b){return p===b||DA(p,b,ZA(b))}function ove(p,b,A){return A=typeof A=="function"?A:n,DA(p,b,ZA(b),A)}function ave(p){return VM(p)&&p!=+p}function sve(p){if(Upe(p))throw new Zt(o);return IN(p)}function lve(p){return p===null}function cve(p){return p==null}function VM(p){return typeof p=="number"||yi(p)&&ua(p)==M}function Ey(p){if(!yi(p)||ua(p)!=Q)return!1;var b=Pi(p);if(b===null)return!0;var A=ze.call(b,"constructor")&&b.constructor;return typeof A=="function"&&A instanceof A&&Ie.call(A)==Vt}var c5=de?ca(de):lpe;function uve(p){return RM(p)&&p>=-Ae&&p<=Ae}var BM=Fe?ca(Fe):cpe;function M_(p){return typeof p=="string"||!dn(p)&&yi(p)&&ua(p)==tt}function xs(p){return typeof p=="symbol"||yi(p)&&ua(p)==Xe}var ym=Be?ca(Be):upe;function fve(p){return p===n}function dve(p){return yi(p)&&Mo(p)==Qe}function hve(p){return yi(p)&&ua(p)==pt}var pve=A_(MA),gve=A_(function(p,b){return p<=b});function jM(p){if(!p)return[];if(za(p))return M_(p)?Lo(p):Ra(p);if(qi&&p[qi])return wA(p[qi]());var b=Mo(p),A=b==O?Dh:b==Le?Nh:bm;return A(p)}function zu(p){if(!p)return p===0?p:0;if(p=rl(p),p===_e||p===-_e){var b=p<0?-1:1;return b*Pe}return p===p?p:0}function pn(p){var b=zu(p),A=b%1;return b===b?A?b-A:b:0}function HM(p){return p?Bh(pn(p),0,se):0}function rl(p){if(typeof p=="number")return p;if(xs(p))return Se;if(si(p)){var b=typeof p.valueOf=="function"?p.valueOf():p;p=si(b)?b+"":b}if(typeof p!="string")return p===0?p:+p;p=um(p);var A=yn.test(p);return A||Nr.test(p)?dy(p.slice(2),A?2:8):Dr.test(p)?Se:+p}function UM(p){return Fc(p,Va(p))}function mve(p){return p?Bh(pn(p),-Ae,Ae):p===0?p:0}function cr(p){return p==null?"":ks(p)}var vve=gm(function(p,b){if(Ay(b)||za(b)){Fc(b,oo(b),p);return}for(var A in b)ze.call(b,A)&&_y(p,A,b[A])}),WM=gm(function(p,b){Fc(b,Va(b),p)}),R_=gm(function(p,b,A,N){Fc(b,Va(b),p,N)}),yve=gm(function(p,b,A,N){Fc(b,oo(b),p,N)}),bve=Nu(OA);function Sve(p,b){var A=pm(p);return b==null?A:kN(A,b)}var _ve=kn(function(p,b){p=tr(p);var A=-1,N=b.length,q=N>2?b[2]:n;for(q&&fa(b[0],b[1],q)&&(N=1);++A<N;)for(var re=b[A],he=Va(re),Ce=-1,$e=he.length;++Ce<$e;){var Ke=he[Ce],Je=p[Ke];(Je===n||Gl(Je,Te[Ke])&&!ze.call(p,Ke))&&(p[Ke]=re[Ke])}return p}),wve=kn(function(p){return p.push(n,lM),Ye(GM,n,p)});function kve(p,b){return $o(p,Gt(b,3),$c)}function xve(p,b){return $o(p,Gt(b,3),$A)}function Cve(p,b){return p==null?p:IA(p,Gt(b,3),Va)}function Tve(p,b){return p==null?p:PN(p,Gt(b,3),Va)}function Ave(p,b){return p&&$c(p,Gt(b,3))}function Pve(p,b){return p&&$A(p,Gt(b,3))}function Eve(p){return p==null?[]:b_(p,oo(p))}function Ove(p){return p==null?[]:b_(p,Va(p))}function u5(p,b,A){var N=p==null?n:jh(p,b);return N===n?A:N}function Ive(p,b){return p!=null&&fM(p,b,epe)}function f5(p,b){return p!=null&&fM(p,b,tpe)}var $ve=rM(function(p,b,A){b!=null&&typeof b.toString!="function"&&(b=ut.call(b)),p[b]=A},h5(Ba)),Fve=rM(function(p,b,A){b!=null&&typeof b.toString!="function"&&(b=ut.call(b)),ze.call(p,b)?p[b].push(A):p[b]=[A]},Gt),Lve=kn(ky);function oo(p){return za(p)?_N(p):NA(p)}function Va(p){return za(p)?_N(p,!0):fpe(p)}function Dve(p,b){var A={};return b=Gt(b,3),$c(p,function(N,q,re){Lu(A,b(N,q,re),N)}),A}function Nve(p,b){var A={};return b=Gt(b,3),$c(p,function(N,q,re){Lu(A,q,b(N,q,re))}),A}var Mve=gm(function(p,b,A){S_(p,b,A)}),GM=gm(function(p,b,A,N){S_(p,b,A,N)}),Rve=Nu(function(p,b){var A={};if(p==null)return A;var N=!1;b=Cn(b,function(re){return re=Wf(re,p),N||(N=re.length>1),re}),Fc(p,XA(p),A),N&&(A=el(A,f|d|h,$pe));for(var q=b.length;q--;)jA(A,b[q]);return A});function zve(p,b){return qM(p,D_(Gt(b)))}var Vve=Nu(function(p,b){return p==null?{}:hpe(p,b)});function qM(p,b){if(p==null)return{};var A=Cn(XA(p),function(N){return[N]});return b=Gt(b),RN(p,A,function(N,q){return b(N,q[0])})}function Bve(p,b,A){b=Wf(b,p);var N=-1,q=b.length;for(q||(q=1,p=n);++N<q;){var re=p==null?n:p[Lc(b[N])];re===n&&(N=q,re=A),p=Ru(re)?re.call(p):re}return p}function jve(p,b,A){return p==null?p:Cy(p,b,A)}function Hve(p,b,A,N){return N=typeof N=="function"?N:n,p==null?p:Cy(p,b,A,N)}var YM=aM(oo),KM=aM(Va);function Uve(p,b,A){var N=dn(p),q=N||qf(p)||ym(p);if(b=Gt(b,4),A==null){var re=p&&p.constructor;q?A=N?new re:[]:si(p)?A=Ru(re)?pm(Pi(p)):{}:A={}}return(q?He:$c)(p,function(he,Ce,$e){return b(A,he,Ce,$e)}),A}function Wve(p,b){return p==null?!0:jA(p,b)}function Gve(p,b,A){return p==null?p:HN(p,b,WA(A))}function qve(p,b,A,N){return N=typeof N=="function"?N:n,p==null?p:HN(p,b,WA(A),N)}function bm(p){return p==null?[]:Vf(p,oo(p))}function Yve(p){return p==null?[]:Vf(p,Va(p))}function Kve(p,b,A){return A===n&&(A=b,b=n),A!==n&&(A=rl(A),A=A===A?A:0),b!==n&&(b=rl(b),b=b===b?b:0),Bh(rl(p),b,A)}function Xve(p,b,A){return b=zu(b),A===n?(A=b,b=0):A=zu(A),p=rl(p),npe(p,b,A)}function Jve(p,b,A){if(A&&typeof A!="boolean"&&fa(p,b,A)&&(b=A=n),A===n&&(typeof b=="boolean"?(A=b,b=n):typeof p=="boolean"&&(A=p,p=n)),p===n&&b===n?(p=0,b=1):(p=zu(p),b===n?(b=p,p=0):b=zu(b)),p>b){var N=p;p=b,b=N}if(A||p%1||b%1){var q=bN();return No(p+q*(b-p+i_("1e-"+((q+"").length-1))),b)}return zA(p,b)}var Zve=mm(function(p,b,A){return b=b.toLowerCase(),p+(A?XM(b):b)});function XM(p){return d5(cr(p).toLowerCase())}function JM(p){return p=cr(p),p&&p.replace(dr,bA).replace(hA,"")}function Qve(p,b,A){p=cr(p),b=ks(b);var N=p.length;A=A===n?N:Bh(pn(A),0,N);var q=A;return A-=b.length,A>=0&&p.slice(A,q)==b}function e0e(p){return p=cr(p),p&&Ac.test(p)?p.replace(Ss,fm):p}function t0e(p){return p=cr(p),p&&ry.test(p)?p.replace(Pu,"\\$&"):p}var n0e=mm(function(p,b,A){return p+(A?"-":"")+b.toLowerCase()}),r0e=mm(function(p,b,A){return p+(A?" ":"")+b.toLowerCase()}),i0e=eM("toLowerCase");function o0e(p,b,A){p=cr(p),b=pn(b);var N=b?Kn(p):0;if(!b||N>=b)return p;var q=(b-N)/2;return T_(h_(q),A)+p+T_(d_(q),A)}function a0e(p,b,A){p=cr(p),b=pn(b);var N=b?Kn(p):0;return b&&N<b?p+T_(b-N,A):p}function s0e(p,b,A){p=cr(p),b=pn(b);var N=b?Kn(p):0;return b&&N<b?T_(b-N,A)+p:p}function l0e(p,b,A){return A||b==null?b=0:b&&(b=+b),ghe(cr(p).replace(Mf,""),b||0)}function c0e(p,b,A){return(A?fa(p,b,A):b===n)?b=1:b=pn(b),VA(cr(p),b)}function u0e(){var p=arguments,b=cr(p[0]);return p.length<3?b:b.replace(p[1],p[2])}var f0e=mm(function(p,b,A){return p+(A?"_":"")+b.toLowerCase()});function d0e(p,b,A){return A&&typeof A!="number"&&fa(p,b,A)&&(b=A=n),A=A===n?se:A>>>0,A?(p=cr(p),p&&(typeof b=="string"||b!=null&&!c5(b))&&(b=ks(b),!b&&Bf(p))?Gf(Lo(p),0,A):p.split(b,A)):[]}var h0e=mm(function(p,b,A){return p+(A?" ":"")+d5(b)});function p0e(p,b,A){return p=cr(p),A=A==null?0:Bh(pn(A),0,p.length),b=ks(b),p.slice(A,A+b.length)==b}function g0e(p,b,A){var N=Z.templateSettings;A&&fa(p,b,A)&&(b=n),p=cr(p),b=R_({},b,N,sM);var q=R_({},b.imports,N.imports,sM),re=oo(q),he=Vf(q,re),Ce,$e,Ke=0,Je=b.interpolate||mr,it="__p += '",dt=Mh((b.escape||mr).source+"|"+Je.source+"|"+(Je===Au?wn:mr).source+"|"+(b.evaluate||mr).source+"|$","g"),At="//# sourceURL="+(ze.call(b,"sourceURL")?(b.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++r_+"]")+`
`;p.replace(dt,function(Yt,$n,Hn,Cs,da,Ts){return Hn||(Hn=Cs),it+=p.slice(Ke,Ts).replace(vr,SA),$n&&(Ce=!0,it+=`' +
__e(`+$n+`) +
'`),da&&($e=!0,it+=`';
`+da+`;
__p += '`),Hn&&(it+=`' +
((__t = (`+Hn+`)) == null ? '' : __t) +
'`),Ke=Ts+Yt.length,Yt}),it+=`';
`;var qt=ze.call(b,"variable")&&b.variable;if(!qt)it=`with (obj) {
`+it+`
}
`;else if(kt.test(qt))throw new Zt(s);it=($e?it.replace(Oa,""):it).replace(Df,"$1").replace(Tu,"$1;"),it="function("+(qt||"obj")+`) {
`+(qt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Ce?", __e = _.escape":"")+($e?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+it+`return __p
}`;var bn=QM(function(){return jn(re,At+"return "+it).apply(n,he)});if(bn.source=it,l5(bn))throw bn;return bn}function m0e(p){return cr(p).toLowerCase()}function v0e(p){return cr(p).toUpperCase()}function y0e(p,b,A){if(p=cr(p),p&&(A||b===n))return um(p);if(!p||!(b=ks(b)))return p;var N=Lo(p),q=Lo(b),re=py(N,q),he=s_(N,q)+1;return Gf(N,re,he).join("")}function b0e(p,b,A){if(p=cr(p),p&&(A||b===n))return p.slice(0,Da(p)+1);if(!p||!(b=ks(b)))return p;var N=Lo(p),q=s_(N,Lo(b))+1;return Gf(N,0,q).join("")}function S0e(p,b,A){if(p=cr(p),p&&(A||b===n))return p.replace(Mf,"");if(!p||!(b=ks(b)))return p;var N=Lo(p),q=py(N,Lo(b));return Gf(N,q).join("")}function _0e(p,b){var A=D,N=F;if(si(b)){var q="separator"in b?b.separator:q;A="length"in b?pn(b.length):A,N="omission"in b?ks(b.omission):N}p=cr(p);var re=p.length;if(Bf(p)){var he=Lo(p);re=he.length}if(A>=re)return p;var Ce=A-Kn(N);if(Ce<1)return N;var $e=he?Gf(he,0,Ce).join(""):p.slice(0,Ce);if(q===n)return $e+N;if(he&&(Ce+=$e.length-Ce),c5(q)){if(p.slice(Ce).search(q)){var Ke,Je=$e;for(q.global||(q=Mh(q.source,cr(sr.exec(q))+"g")),q.lastIndex=0;Ke=q.exec(Je);)var it=Ke.index;$e=$e.slice(0,it===n?Ce:it)}}else if(p.indexOf(ks(q),Ce)!=Ce){var dt=$e.lastIndexOf(q);dt>-1&&($e=$e.slice(0,dt))}return $e+N}function w0e(p){return p=cr(p),p&&Ui.test(p)?p.replace(Tc,Na):p}var k0e=mm(function(p,b,A){return p+(A?" ":"")+b.toUpperCase()}),d5=eM("toUpperCase");function ZM(p,b,A){return p=cr(p),b=A?n:b,b===n?Lh(p)?xA(p):lm(p):p.match(b)||[]}var QM=kn(function(p,b){try{return Ye(p,n,b)}catch(A){return l5(A)?A:new Zt(A)}}),x0e=Nu(function(p,b){return He(b,function(A){A=Lc(A),Lu(p,A,a5(p[A],p))}),p});function C0e(p){var b=p==null?0:p.length,A=Gt();return p=b?Cn(p,function(N){if(typeof N[1]!="function")throw new Ma(a);return[A(N[0]),N[1]]}):[],kn(function(N){for(var q=-1;++q<b;){var re=p[q];if(Ye(re[0],this,N))return Ye(re[1],this,N)}})}function T0e(p){return Jhe(el(p,f))}function h5(p){return function(){return p}}function A0e(p,b){return p==null||p!==p?b:p}var P0e=nM(),E0e=nM(!0);function Ba(p){return p}function p5(p){return $N(typeof p=="function"?p:el(p,f))}function O0e(p){return LN(el(p,f))}function I0e(p,b){return DN(p,el(b,f))}var $0e=kn(function(p,b){return function(A){return ky(A,p,b)}}),F0e=kn(function(p,b){return function(A){return ky(p,A,b)}});function g5(p,b,A){var N=oo(b),q=b_(b,N);A==null&&!(si(b)&&(q.length||!N.length))&&(A=b,b=p,p=this,q=b_(b,oo(b)));var re=!(si(A)&&"chain"in A)||!!A.chain,he=Ru(p);return He(q,function(Ce){var $e=b[Ce];p[Ce]=$e,he&&(p.prototype[Ce]=function(){var Ke=this.__chain__;if(re||Ke){var Je=p(this.__wrapped__),it=Je.__actions__=Ra(this.__actions__);return it.push({func:$e,args:arguments,thisArg:p}),Je.__chain__=Ke,Je}return $e.apply(p,On([this.value()],arguments))})}),p}function L0e(){return Gi._===this&&(Gi._=Lt),this}function m5(){}function D0e(p){return p=pn(p),kn(function(b){return NN(b,p)})}var N0e=qA(Cn),M0e=qA(nn),R0e=qA(In);function eR(p){return e5(p)?Js(Lc(p)):ppe(p)}function z0e(p){return function(b){return p==null?n:jh(p,b)}}var V0e=iM(),B0e=iM(!0);function v5(){return[]}function y5(){return!1}function j0e(){return{}}function H0e(){return""}function U0e(){return!0}function W0e(p,b){if(p=pn(p),p<1||p>Ae)return[];var A=se,N=No(p,se);b=Gt(b),p-=se;for(var q=Ul(N,b);++A<p;)b(A);return q}function G0e(p){return dn(p)?Cn(p,Lc):xs(p)?[p]:Ra(SM(cr(p)))}function q0e(p){var b=++nt;return cr(p)+b}var Y0e=C_(function(p,b){return p+b},0),K0e=YA("ceil"),X0e=C_(function(p,b){return p/b},1),J0e=YA("floor");function Z0e(p){return p&&p.length?y_(p,Ba,FA):n}function Q0e(p,b){return p&&p.length?y_(p,Gt(b,2),FA):n}function eye(p){return la(p,Ba)}function tye(p,b){return la(p,Gt(b,2))}function nye(p){return p&&p.length?y_(p,Ba,MA):n}function rye(p,b){return p&&p.length?y_(p,Gt(b,2),MA):n}var iye=C_(function(p,b){return p*b},1),oye=YA("round"),aye=C_(function(p,b){return p-b},0);function sye(p){return p&&p.length?Yn(p,Ba):0}function lye(p,b){return p&&p.length?Yn(p,Gt(b,2)):0}return Z.after=Ome,Z.ary=IM,Z.assign=vve,Z.assignIn=WM,Z.assignInWith=R_,Z.assignWith=yve,Z.at=bve,Z.before=$M,Z.bind=a5,Z.bindAll=x0e,Z.bindKey=FM,Z.castArray=jme,Z.chain=PM,Z.chunk=Jpe,Z.compact=Zpe,Z.concat=Qpe,Z.cond=C0e,Z.conforms=T0e,Z.constant=h5,Z.countBy=sme,Z.create=Sve,Z.curry=LM,Z.curryRight=DM,Z.debounce=NM,Z.defaults=_ve,Z.defaultsDeep=wve,Z.defer=Ime,Z.delay=$me,Z.difference=ege,Z.differenceBy=tge,Z.differenceWith=nge,Z.drop=rge,Z.dropRight=ige,Z.dropRightWhile=oge,Z.dropWhile=age,Z.fill=sge,Z.filter=cme,Z.flatMap=dme,Z.flatMapDeep=hme,Z.flatMapDepth=pme,Z.flatten=xM,Z.flattenDeep=lge,Z.flattenDepth=cge,Z.flip=Fme,Z.flow=P0e,Z.flowRight=E0e,Z.fromPairs=uge,Z.functions=Eve,Z.functionsIn=Ove,Z.groupBy=gme,Z.initial=dge,Z.intersection=hge,Z.intersectionBy=pge,Z.intersectionWith=gge,Z.invert=$ve,Z.invertBy=Fve,Z.invokeMap=vme,Z.iteratee=p5,Z.keyBy=yme,Z.keys=oo,Z.keysIn=Va,Z.map=$_,Z.mapKeys=Dve,Z.mapValues=Nve,Z.matches=O0e,Z.matchesProperty=I0e,Z.memoize=L_,Z.merge=Mve,Z.mergeWith=GM,Z.method=$0e,Z.methodOf=F0e,Z.mixin=g5,Z.negate=D_,Z.nthArg=D0e,Z.omit=Rve,Z.omitBy=zve,Z.once=Lme,Z.orderBy=bme,Z.over=N0e,Z.overArgs=Dme,Z.overEvery=M0e,Z.overSome=R0e,Z.partial=s5,Z.partialRight=MM,Z.partition=Sme,Z.pick=Vve,Z.pickBy=qM,Z.property=eR,Z.propertyOf=z0e,Z.pull=bge,Z.pullAll=TM,Z.pullAllBy=Sge,Z.pullAllWith=_ge,Z.pullAt=wge,Z.range=V0e,Z.rangeRight=B0e,Z.rearg=Nme,Z.reject=kme,Z.remove=kge,Z.rest=Mme,Z.reverse=i5,Z.sampleSize=Cme,Z.set=jve,Z.setWith=Hve,Z.shuffle=Tme,Z.slice=xge,Z.sortBy=Eme,Z.sortedUniq=Ige,Z.sortedUniqBy=$ge,Z.split=d0e,Z.spread=Rme,Z.tail=Fge,Z.take=Lge,Z.takeRight=Dge,Z.takeRightWhile=Nge,Z.takeWhile=Mge,Z.tap=Zge,Z.throttle=zme,Z.thru=I_,Z.toArray=jM,Z.toPairs=YM,Z.toPairsIn=KM,Z.toPath=G0e,Z.toPlainObject=UM,Z.transform=Uve,Z.unary=Vme,Z.union=Rge,Z.unionBy=zge,Z.unionWith=Vge,Z.uniq=Bge,Z.uniqBy=jge,Z.uniqWith=Hge,Z.unset=Wve,Z.unzip=o5,Z.unzipWith=AM,Z.update=Gve,Z.updateWith=qve,Z.values=bm,Z.valuesIn=Yve,Z.without=Uge,Z.words=ZM,Z.wrap=Bme,Z.xor=Wge,Z.xorBy=Gge,Z.xorWith=qge,Z.zip=Yge,Z.zipObject=Kge,Z.zipObjectDeep=Xge,Z.zipWith=Jge,Z.entries=YM,Z.entriesIn=KM,Z.extend=WM,Z.extendWith=R_,g5(Z,Z),Z.add=Y0e,Z.attempt=QM,Z.camelCase=Zve,Z.capitalize=XM,Z.ceil=K0e,Z.clamp=Kve,Z.clone=Hme,Z.cloneDeep=Wme,Z.cloneDeepWith=Gme,Z.cloneWith=Ume,Z.conformsTo=qme,Z.deburr=JM,Z.defaultTo=A0e,Z.divide=X0e,Z.endsWith=Qve,Z.eq=Gl,Z.escape=e0e,Z.escapeRegExp=t0e,Z.every=lme,Z.find=ume,Z.findIndex=wM,Z.findKey=kve,Z.findLast=fme,Z.findLastIndex=kM,Z.findLastKey=xve,Z.floor=J0e,Z.forEach=EM,Z.forEachRight=OM,Z.forIn=Cve,Z.forInRight=Tve,Z.forOwn=Ave,Z.forOwnRight=Pve,Z.get=u5,Z.gt=Yme,Z.gte=Kme,Z.has=Ive,Z.hasIn=f5,Z.head=CM,Z.identity=Ba,Z.includes=mme,Z.indexOf=fge,Z.inRange=Xve,Z.invoke=Lve,Z.isArguments=Wh,Z.isArray=dn,Z.isArrayBuffer=Xme,Z.isArrayLike=za,Z.isArrayLikeObject=Ei,Z.isBoolean=Jme,Z.isBuffer=qf,Z.isDate=Zme,Z.isElement=Qme,Z.isEmpty=eve,Z.isEqual=tve,Z.isEqualWith=nve,Z.isError=l5,Z.isFinite=rve,Z.isFunction=Ru,Z.isInteger=RM,Z.isLength=N_,Z.isMap=zM,Z.isMatch=ive,Z.isMatchWith=ove,Z.isNaN=ave,Z.isNative=sve,Z.isNil=cve,Z.isNull=lve,Z.isNumber=VM,Z.isObject=si,Z.isObjectLike=yi,Z.isPlainObject=Ey,Z.isRegExp=c5,Z.isSafeInteger=uve,Z.isSet=BM,Z.isString=M_,Z.isSymbol=xs,Z.isTypedArray=ym,Z.isUndefined=fve,Z.isWeakMap=dve,Z.isWeakSet=hve,Z.join=mge,Z.kebabCase=n0e,Z.last=nl,Z.lastIndexOf=vge,Z.lowerCase=r0e,Z.lowerFirst=i0e,Z.lt=pve,Z.lte=gve,Z.max=Z0e,Z.maxBy=Q0e,Z.mean=eye,Z.meanBy=tye,Z.min=nye,Z.minBy=rye,Z.stubArray=v5,Z.stubFalse=y5,Z.stubObject=j0e,Z.stubString=H0e,Z.stubTrue=U0e,Z.multiply=iye,Z.nth=yge,Z.noConflict=L0e,Z.noop=m5,Z.now=F_,Z.pad=o0e,Z.padEnd=a0e,Z.padStart=s0e,Z.parseInt=l0e,Z.random=Jve,Z.reduce=_me,Z.reduceRight=wme,Z.repeat=c0e,Z.replace=u0e,Z.result=Bve,Z.round=oye,Z.runInContext=Ee,Z.sample=xme,Z.size=Ame,Z.snakeCase=f0e,Z.some=Pme,Z.sortedIndex=Cge,Z.sortedIndexBy=Tge,Z.sortedIndexOf=Age,Z.sortedLastIndex=Pge,Z.sortedLastIndexBy=Ege,Z.sortedLastIndexOf=Oge,Z.startCase=h0e,Z.startsWith=p0e,Z.subtract=aye,Z.sum=sye,Z.sumBy=lye,Z.template=g0e,Z.times=W0e,Z.toFinite=zu,Z.toInteger=pn,Z.toLength=HM,Z.toLower=m0e,Z.toNumber=rl,Z.toSafeInteger=mve,Z.toString=cr,Z.toUpper=v0e,Z.trim=y0e,Z.trimEnd=b0e,Z.trimStart=S0e,Z.truncate=_0e,Z.unescape=w0e,Z.uniqueId=q0e,Z.upperCase=k0e,Z.upperFirst=d5,Z.each=EM,Z.eachRight=OM,Z.first=CM,g5(Z,function(){var p={};return $c(Z,function(b,A){ze.call(Z.prototype,A)||(p[A]=b)}),p}(),{chain:!1}),Z.VERSION=r,He(["bind","bindKey","curry","curryRight","partial","partialRight"],function(p){Z[p].placeholder=Z}),He(["drop","take"],function(p,b){Mn.prototype[p]=function(A){A=A===n?1:Yi(pn(A),0);var N=this.__filtered__&&!b?new Mn(this):this.clone();return N.__filtered__?N.__takeCount__=No(A,N.__takeCount__):N.__views__.push({size:No(A,se),type:p+(N.__dir__<0?"Right":"")}),N},Mn.prototype[p+"Right"]=function(A){return this.reverse()[p](A).reverse()}}),He(["filter","map","takeWhile"],function(p,b){var A=b+1,N=A==B||A==oe;Mn.prototype[p]=function(q){var re=this.clone();return re.__iteratees__.push({iteratee:Gt(q,3),type:A}),re.__filtered__=re.__filtered__||N,re}}),He(["head","last"],function(p,b){var A="take"+(b?"Right":"");Mn.prototype[p]=function(){return this[A](1).value()[0]}}),He(["initial","tail"],function(p,b){var A="drop"+(b?"":"Right");Mn.prototype[p]=function(){return this.__filtered__?new Mn(this):this[A](1)}}),Mn.prototype.compact=function(){return this.filter(Ba)},Mn.prototype.find=function(p){return this.filter(p).head()},Mn.prototype.findLast=function(p){return this.reverse().find(p)},Mn.prototype.invokeMap=kn(function(p,b){return typeof p=="function"?new Mn(this):this.map(function(A){return ky(A,p,b)})}),Mn.prototype.reject=function(p){return this.filter(D_(Gt(p)))},Mn.prototype.slice=function(p,b){p=pn(p);var A=this;return A.__filtered__&&(p>0||b<0)?new Mn(A):(p<0?A=A.takeRight(-p):p&&(A=A.drop(p)),b!==n&&(b=pn(b),A=b<0?A.dropRight(-b):A.take(b-p)),A)},Mn.prototype.takeRightWhile=function(p){return this.reverse().takeWhile(p).reverse()},Mn.prototype.toArray=function(){return this.take(se)},$c(Mn.prototype,function(p,b){var A=/^(?:filter|find|map|reject)|While$/.test(b),N=/^(?:head|last)$/.test(b),q=Z[N?"take"+(b=="last"?"Right":""):b],re=N||/^find/.test(b);q&&(Z.prototype[b]=function(){var he=this.__wrapped__,Ce=N?[1]:arguments,$e=he instanceof Mn,Ke=Ce[0],Je=$e||dn(he),it=function($n){var Hn=q.apply(Z,On([$n],Ce));return N&&dt?Hn[0]:Hn};Je&&A&&typeof Ke=="function"&&Ke.length!=1&&($e=Je=!1);var dt=this.__chain__,At=!!this.__actions__.length,qt=re&&!dt,bn=$e&&!At;if(!re&&Je){he=bn?he:new Mn(this);var Yt=p.apply(he,Ce);return Yt.__actions__.push({func:I_,args:[it],thisArg:n}),new Qs(Yt,dt)}return qt&&bn?p.apply(this,Ce):(Yt=this.thru(it),qt?N?Yt.value()[0]:Yt.value():Yt)})}),He(["pop","push","shift","sort","splice","unshift"],function(p){var b=ee[p],A=/^(?:push|sort|unshift)$/.test(p)?"tap":"thru",N=/^(?:pop|shift)$/.test(p);Z.prototype[p]=function(){var q=arguments;if(N&&!this.__chain__){var re=this.value();return b.apply(dn(re)?re:[],q)}return this[A](function(he){return b.apply(dn(he)?he:[],q)})}}),$c(Mn.prototype,function(p,b){var A=Z[b];if(A){var N=A.name+"";ze.call(hm,N)||(hm[N]=[]),hm[N].push({name:b,func:A})}}),hm[x_(n,v).name]=[{name:"wrapper",func:n}],Mn.prototype.clone=whe,Mn.prototype.reverse=khe,Mn.prototype.value=xhe,Z.prototype.at=Qge,Z.prototype.chain=eme,Z.prototype.commit=tme,Z.prototype.next=nme,Z.prototype.plant=ime,Z.prototype.reverse=ome,Z.prototype.toJSON=Z.prototype.valueOf=Z.prototype.value=ame,Z.prototype.first=Z.prototype.head,qi&&(Z.prototype[qi]=rme),Z},Iu=CA();P?((P.exports=Iu)._=Iu,w._=Iu):Gi._=Iu}).call(ui)})(dC,dC.exports);var wDe=dC.exports,kDe=ui&&ui.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(h2,"__esModule",{value:!0});h2.mock=void 0;var ga=kDe(wDe);function Iie(t){return t.allOf&&t.allOf[0]&&(t=ga.default.reduce(t.allOf,function(e,n){return ga.default.merge({},e,Iie(n))},t)),t}function Zm(t){if(t=Iie(t),t.example!==void 0)return t.example;if(t.default!==void 0)return t.default;if(t.oneOf&&t.oneOf[0])return Zm(t.oneOf[0]);if(t.anyOf&&t.anyOf[0])return Zm(t.anyOf[0]);var e=ga.default.isArray(t)?ga.default.first(t.type):t.type;if(e==="object"){var n=t,r=n.properties;return r?ga.default.mapValues(r,Zm):{}}if(e==="array"){var i=t,o=i.items;if(!o)return[];var a=[],s=o.oneOf&&o.oneOf[0]||o;if(o.anyOf)for(var l=0,c=o.anyOf;l<c.length;l++){var u=c[l];s=u,a.push(Zm(s))}for(var f=i.minItems||1;a.length<f;)a.push(Zm(s));return i.maxItems?ga.default.take(a,i.maxItems):a}if(ga.default.isArray(t.enum))return t.enum[0];if(e==="string"){var d=t.format,h={email:"user@example.com",hostname:"example.com",ipv4:"8.8.8.8",ipv6:"2001:4860:4860::8888",uri:"https://example.com/path","uri-reference":"/path#anchor","uri-template":"/path/{param}","json-pointer":"/foo/bar","date-time":new Date("1970-01-01").toJSON(),uuid:"3fa85f64-5717-4562-b3fc-2c963f66afa6",_default:"string"},g=h[d]||h._default,y=ga.default.isNil(t.minLength)?0:t.minLength,S=ga.default.isNil(t.maxLength)?g.length:t.maxLength;return g===h._default&&g.length<y?ga.default.padEnd(g,y,g):g.substr(0,ga.default.clamp(g.length,y,S))}if(e==="number"){var v=t.minimum?t.minimum:-Number.MAX_VALUE,_=t.maximum?t.maximum:Number.MAX_VALUE;return t.multipleOf&&(v=Math.ceil(v/t.multipleOf)*t.multipleOf,_=Math.floor(_/t.multipleOf)*t.multipleOf),ga.default.clamp(0,v,_)}if(e==="integer"){var x=t.minimum&&t.exclusiveMinimum?t.minimum+1:t.minimum,C=t.maximum&&t.exclusiveMaximum?t.maximum-1:t.maximum,v=ga.default.isNil(x)?Number.MIN_SAFE_INTEGER:x,_=ga.default.isNil(C)?Number.MAX_SAFE_INTEGER:C;return t.multipleOf&&(v=Math.ceil(v/t.multipleOf)*t.multipleOf,_=Math.floor(_/t.multipleOf)*t.multipleOf),ga.default.clamp(0,v,_)}return e==="null"?null:e==="boolean"?!0:{}}h2.mock=Zm;(function(t){var e=ui&&ui.__createBinding||(Object.create?function(i,o,a,s){s===void 0&&(s=a),Object.defineProperty(i,s,{enumerable:!0,get:function(){return o[a]}})}:function(i,o,a,s){s===void 0&&(s=a),i[s]=o[a]}),n=ui&&ui.__exportStar||function(i,o){for(var a in i)a!=="default"&&!o.hasOwnProperty(a)&&e(o,i,a)};Object.defineProperty(t,"__esModule",{value:!0}),t.mock=void 0;var r=h2;Object.defineProperty(t,"mock",{enumerable:!0,get:function(){return r.mock}}),n(h2,t)})(Oie);const Af=F0("places",{state:()=>({place:{},markingString:"",schemaString:"",databaseMap:{},formsData:{}}),actions:{saveName(){const t=Bt().updatePlace(this.place.id,this.place.name);t&&(this.place.name=t.name,Zn().lastUpdatedPlace=t)},addToken(){let t=Oie.mock(this.place.schema.items);this.place.marking.push(t),this.savePlaceMarkingFromEditor(JSON.stringify(this.place.marking,null,2))},savePlaceMarkingFromEditor(t){try{const e=JSON.parse(t);this.formsData=e,this.markingString=t;const n=Bt().updatePlaceMarking(this.place.id,e);n&&(Bt().setDefaultMarking(this.place.id),this.place.marking=n.marking,this.place.errorMessage=n.errorMessage,this.place.hasError=n.hasError,this.place.errorType=n.errorType,Zn().lastUpdatedPlace=n)}catch{}},resetMarking(){let t=Bt().getDefaultMarking(this.place.id);this.savePlaceMarkingFromForm(t)},savePlaceMarkingFromForm(t){try{this.formsData=t,this.markingString=JSON.stringify(this.formsData,null,2);const e=Bt().updatePlaceMarking(this.place.id,t);e&&(this.place.marking=e.marking,this.place.errorMessage=e.errorMessage,this.place.hasError=e.hasError,this.place.errorType=e.errorType,Zn().lastUpdatedPlace=e)}catch{}},savePlaceSchema(t){try{const e=JSON.parse(t);this.schemaString=t;const n=Bt().updatePlaceSchema(this.place.id,e);n&&(this.place.schema=n.schema,this.place.errorMessage=n.errorMessage,this.place.hasError=n.hasError,this.place.errorType=n.errorType)}catch{}},resetName(){const t=Bt().findPlace(this.place.id);t&&(this.place.name=t.name)},loadPlace(t){const e=Zn().places.find(n=>n.id===t);if(e){this.place=e;const n=Bt().findPlace(this.place.id);n&&(this.place.id=n.id,this.place.name=n.name,this.place.marking=n.marking,this.place.schema=n.schema),this.markingString=JSON.stringify(e.marking,null,2),this.formsData=JSON.parse(JSON.stringify(e.marking)),this.schemaString=JSON.stringify(e.schema,null,2)}}}}),Ju={x:"x",y:"y",width:"w",height:"h",minimum:"s",maximum:"l",diagonal:"d"},xDe=Object.keys(Ju).map(t=>Ju[t]).join(""),y7="[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?",CDe=/\s/g,tU=new RegExp(`^(${y7}\\*)?([${xDe}])(/${y7})?([-+]{1,2}${y7})?$`,"g");function $ie(t){throw new Error(`Invalid calc() expression: ${t}`)}function TDe(t,e){const n=tU.exec(t.replace(CDe,""));n||$ie(t),tU.lastIndex=0;const[,r,i,o,a]=n,{x:s,y:l,width:c,height:u}=e;let f=0;switch(i){case Ju.width:{f=c;break}case Ju.height:{f=u;break}case Ju.x:{f=s;break}case Ju.y:{f=l;break}case Ju.minimum:{f=Math.min(u,c);break}case Ju.maximum:{f=Math.max(u,c);break}case Ju.diagonal:{f=Math.sqrt(u*u+c*c);break}}return r&&(f*=parseFloat(r)),o&&(f/=parseFloat(o.slice(1))),a&&(f+=ADe(a)),f}function ADe(t){if(!t)return 0;const[e]=t;switch(e){case"+":return parseFloat(t.substr(1));case"-":return-parseFloat(t.substr(1))}return parseFloat(t)}function wl(t){return typeof t=="string"&&t.includes("calc")}const Fie="calc(",nU=Fie.length;function kl(t,e){let n=t,r=0;do{let i=n.indexOf(Fie,r);if(i===-1)return n;let o=i+nU,a=1;e:do{switch(n[o]){case"(":{a++;break}case")":{if(a--,a===0)break e;break}case void 0:$ie(n)}o++}while(!0);let s=n.slice(i+nU,o);wl(s)&&(s=kl(s,e));const l=String(TDe(s,e));n=n.slice(0,i)+l+n.slice(o+1),r=i+l.length}while(!0)}const{round:PDe,floor:EDe,PI:Lie}=Math,ODe={linear:function(t,e,n){var r=t[1]-t[0],i=e[1]-e[0];return(n-t[0])/r*i+e[0]||0}},bu=function(t){return t%360+(t<0?360:0)},Og=function(t,e){return e*PDe(t/e)},a3=function(t){return 180*t/Lie%360},ls=function(t,e){return e=e||!1,t=e?t:t%360,t*Lie/180},oO=function(t,e){if(e===void 0)e=t===void 0?1:t,t=0;else if(e<t){const n=t;t=e,e=n}return EDe(Math.random()*(e-t+1)+t)},{cos:mk,sin:b7,atan2:IDe}=Math,Die=function(t,e){var n=ls(t.y),r=ls(e.y),i=t.x,o=e.x,a=ls(o-i),s=b7(a)*mk(r),l=mk(n)*b7(r)-b7(n)*mk(r)*mk(a),c=a3(IDe(s,l)),u=["NE","E","SE","S","SW","W","NW","N"],f=c-22.5;return f<0&&(f+=360),f=parseInt(f/45),u[f]},$F=function(t,e){var n=t.x,r=t.y,i=e.x,o=e.y;return(n-=i)*n+(r-=o)*r},Nie=function(t,e){return Math.sqrt($F(t,e))},gn={Point:1,Line:2,Ellipse:3,Rect:4,Polyline:5,Polygon:6,Curve:7,Path:8},{abs:hC,cos:aO,sin:sO,sqrt:rU,min:iU,max:oU,atan2:$De,round:aU,pow:FDe,PI:sU}=Math,we=function(t,e){if(!(this instanceof we))return new we(t,e);if(typeof t=="string"){var n=t.split(t.indexOf("@")===-1?" ":"@");t=parseFloat(n[0]),e=parseFloat(n[1])}else Object(t)===t&&(e=t.y,t=t.x);this.x=t===void 0?0:t,this.y=e===void 0?0:e};we.fromPolar=function(t,e,n){n=new we(n);var r=hC(t*aO(e)),i=hC(t*sO(e)),o=bu(a3(e));return o<90?i=-i:o<180?(r=-r,i=-i):o<270&&(r=-r),new we(n.x+r,n.y+i)};we.random=function(t,e,n,r){return new we(oO(t,e),oO(n,r))};we.prototype={type:gn.Point,chooseClosest:function(t){var e=t.length;if(e===1)return new we(t[0]);for(var n=null,r=1/0,i=0;i<e;i++){var o=new we(t[i]),a=this.squaredDistance(o);a<r&&(n=o,r=a)}return n},adhereToRect:function(t){return t.containsPoint(this)?this:(this.x=iU(oU(this.x,t.x),t.x+t.width),this.y=iU(oU(this.y,t.y),t.y+t.height),this)},angleBetween:function(t,e){var n=this.equals(t)||this.equals(e)?NaN:this.theta(e)-this.theta(t);return n<0&&(n+=360),n},bearing:function(t){return Die(this,t)},changeInAngle:function(t,e,n){return this.clone().offset(-t,-e).theta(n)-this.theta(n)},clone:function(){return new we(this)},cross:function(t,e){return t&&e?(e.x-this.x)*(t.y-this.y)-(e.y-this.y)*(t.x-this.x):NaN},difference:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),new we(this.x-(t||0),this.y-(e||0))},distance:function(t){return Nie(this,t)},dot:function(t){return t?this.x*t.x+this.y*t.y:NaN},equals:function(t){return!!t&&this.x===t.x&&this.y===t.y},lerp:function(t,e){var n=this.x,r=this.y;return new we((1-e)*n+e*t.x,(1-e)*r+e*t.y)},magnitude:function(){return rU(this.x*this.x+this.y*this.y)||.01},manhattanDistance:function(t){return hC(t.x-this.x)+hC(t.y-this.y)},move:function(t,e){var n=ls(new we(t).theta(this)),r=this.offset(aO(n)*e,-sO(n)*e);return r},normalize:function(t){var e=(t||1)/this.magnitude();return this.scale(e,e)},offset:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),this.x+=t||0,this.y+=e||0,this},reflection:function(t){return new we(t).move(this,this.distance(t))},rotate:function(t,e){if(e===0)return this;t=t||new we(0,0),e=ls(bu(-e));var n=aO(e),r=sO(e),i=n*(this.x-t.x)-r*(this.y-t.y)+t.x,o=r*(this.x-t.x)+n*(this.y-t.y)+t.y;return this.x=i,this.y=o,this},round:function(t){let e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=FDe(10,t);break}return this.x=aU(this.x*e)/e,this.y=aU(this.y*e)/e,this},scale:function(t,e,n){return n=n&&new we(n)||new we(0,0),this.x=n.x+t*(this.x-n.x),this.y=n.y+e*(this.y-n.y),this},snapToGrid:function(t,e){return this.x=Og(this.x,t),this.y=Og(this.y,e||t),this},squaredDistance:function(t){return $F(this,t)},theta:function(t){t=new we(t);var e=-(t.y-this.y),n=t.x-this.x,r=$De(e,n);return r<0&&(r=2*sU+r),180*r/sU},toJSON:function(){return{x:this.x,y:this.y}},toPolar:function(t){t=t&&new we(t)||new we(0,0);var e=this.x,n=this.y;return this.x=rU((e-t.x)*(e-t.x)+(n-t.y)*(n-t.y)),this.y=ls(t.theta(new we(e,n))),this},toString:function(){return this.x+"@"+this.y},serialize:function(){return this.x+","+this.y},update:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),this.x=t||0,this.y=e||0,this},vectorAngle:function(t){var e=new we(0,0);return e.angleBetween(this,t)}};we.prototype.translate=we.prototype.offset;const pC=we,{max:S7,min:_7}=Math,gt=function(t,e){if(!(this instanceof gt))return new gt(t,e);if(t instanceof gt)return new gt(t.start,t.end);this.start=new we(t),this.end=new we(e)};gt.prototype={type:gn.Line,angle:function(){var t=new we(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,t)},bbox:function(){var t=_7(this.start.x,this.end.x),e=_7(this.start.y,this.end.y),n=S7(this.start.x,this.end.x),r=S7(this.start.y,this.end.y);return new lt(t,e,n-t,r-e)},bearing:function(){return Die(this.start,this.end)},clone:function(){return new gt(this.start,this.end)},closestPoint:function(t){return this.pointAt(this.closestPointNormalizedLength(t))},closestPointLength:function(t){return this.closestPointNormalizedLength(t)*this.length()},closestPointNormalizedLength:function(t){var e=this.vector().dot(new gt(this.start,t).vector()),n=_7(1,S7(0,e/this.squaredLength()));return n!==n?0:n},closestPointTangent:function(t){return this.tangentAt(this.closestPointNormalizedLength(t))},containsPoint:function(t){var e=this.start,n=this.end;if(e.cross(t,n)!==0)return!1;var r=this.length();return!(new gt(e,t).length()>r||new gt(t,n).length()>r)},divideAt:function(t){var e=this.pointAt(t);return[new gt(this.start,e),new gt(e,this.end)]},divideAtLength:function(t){var e=this.pointAtLength(t);return[new gt(this.start,e),new gt(e,this.end)]},equals:function(t){return!!t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.end.x===t.end.x&&this.end.y===t.end.y},intersect:function(t,e){if(t&&t.intersectionWithLine){var n=t.intersectionWithLine(this,e);return n&&t instanceof gt&&(n=n[0]),n}return null},intersectionWithLine:function(t){var e=new we(this.end.x-this.start.x,this.end.y-this.start.y),n=new we(t.end.x-t.start.x,t.end.y-t.start.y),r=e.x*n.y-e.y*n.x,i=new we(t.start.x-this.start.x,t.start.y-this.start.y),o=i.x*n.y-i.y*n.x,a=i.x*e.y-i.y*e.x;if(r===0||o*r<0||a*r<0)return null;if(r>0){if(o>r||a>r)return null}else if(o<r||a<r)return null;return[new we(this.start.x+o*e.x/r,this.start.y+o*e.y/r)]},isDifferentiable:function(){return!this.start.equals(this.end)},length:function(){return Nie(this.start,this.end)},midpoint:function(){return new we((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},parallel:function(t){const e=this.clone();if(!this.isDifferentiable())return e;const{start:n,end:r}=e,i=n.clone().rotate(r,270),o=r.clone().rotate(n,90);return n.move(o,t),r.move(i,t),e},pointAt:function(t){var e=this.start,n=this.end;return t<=0?e.clone():t>=1?n.clone():e.lerp(n,t)},pointAtLength:function(t){var e=this.start,n=this.end,r=!0;t<0&&(r=!1,t=-t);var i=this.length();return t>=i?r?n.clone():e.clone():this.pointAt((r?t:i-t)/i)},pointOffset:function(t){t=new we(t);var e=this.start,n=this.end,r=(n.x-e.x)*(t.y-e.y)-(n.y-e.y)*(t.x-e.x);return r/this.length()},rotate:function(t,e){return this.start.rotate(t,e),this.end.rotate(t,e),this},round:function(t){return this.start.round(t),this.end.round(t),this},scale:function(t,e,n){return this.start.scale(t,e,n),this.end.scale(t,e,n),this},setLength:function(t){var e=this.length();if(!e)return this;var n=t/e;return this.scale(n,n,this.start)},squaredLength:function(){return $F(this.start,this.end)},tangentAt:function(t){if(!this.isDifferentiable())return null;var e=this.start,n=this.end,r=this.pointAt(t),i=new gt(e,n);return i.translate(r.x-e.x,r.y-e.y),i},tangentAtLength:function(t){if(!this.isDifferentiable())return null;var e=this.start,n=this.end,r=this.pointAtLength(t),i=new gt(e,n);return i.translate(r.x-e.x,r.y-e.y),i},toString:function(){return this.start.toString()+" "+this.end.toString()},serialize:function(){return this.start.serialize()+" "+this.end.serialize()},translate:function(t,e){return this.start.translate(t,e),this.end.translate(t,e),this},vector:function(){return new we(this.end.x-this.start.x,this.end.y-this.start.y)}};gt.prototype.intersection=gt.prototype.intersect;const ug=gt,{sqrt:lU,round:vk,pow:LDe}=Math,Ca=function(t,e,n){if(!(this instanceof Ca))return new Ca(t,e,n);if(t instanceof Ca)return new Ca(new we(t.x,t.y),t.a,t.b);t=new we(t),this.x=t.x,this.y=t.y,this.a=e,this.b=n};Ca.fromRect=function(t){return t=new lt(t),new Ca(t.center(),t.width/2,t.height/2)};Ca.prototype={type:gn.Ellipse,bbox:function(){return new lt(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},center:function(){return new we(this.x,this.y)},clone:function(){return new Ca(this)},containsPoint:function(t){return this.normalizedDistance(t)<=1},equals:function(t){return!!t&&t.x===this.x&&t.y===this.y&&t.a===this.a&&t.b===this.b},inflate:function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.a+=2*t,this.b+=2*e,this},intersectionWithLine:function(t){var e=[],n=t.start,r=t.end,i=this.a,o=this.b,a=t.vector(),s=n.difference(new we(this)),l=new we(a.x/(i*i),a.y/(o*o)),c=new we(s.x/(i*i),s.y/(o*o)),u=a.dot(l),f=a.dot(c),d=s.dot(c)-1,h=f*f-u*d;if(h<0)return null;if(h>0){var g=lU(h),y=(-f-g)/u,S=(-f+g)/u;if((y<0||1<y)&&(S<0||1<S))return null;0<=y&&y<=1&&e.push(n.lerp(r,y)),0<=S&&S<=1&&e.push(n.lerp(r,S))}else{var v=-f/u;if(0<=v&&v<=1)e.push(n.lerp(r,v));else return null}return e},intersectionWithLineFromCenterToPoint:function(t,e){t=new we(t),e&&t.rotate(new we(this.x,this.y),e);var n=t.x-this.x,r=t.y-this.y,i;if(n===0)return i=this.bbox().pointNearestToPoint(t),e?i.rotate(new we(this.x,this.y),-e):i;var o=r/n,a=o*o,s=this.a*this.a,l=this.b*this.b,c=lU(1/(1/s+a/l));c=n<0?-c:c;var u=o*c;return i=new we(this.x+c,this.y+u),e?i.rotate(new we(this.x,this.y),-e):i},normalizedDistance:function(t){var e=t.x,n=t.y,r=this.a,i=this.b,o=this.x,a=this.y;return(e-o)*(e-o)/(r*r)+(n-a)*(n-a)/(i*i)},round:function(t){let e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=LDe(10,t);break}return this.x=vk(this.x*e)/e,this.y=vk(this.y*e)/e,this.a=vk(this.a*e)/e,this.b=vk(this.b*e)/e,this},tangentTheta:function(t){var e=30,n=t.x,r=t.y,i=this.a,o=this.b,a=this.bbox().center(),s=a.x,l=a.y,c=n>a.x+i/2,u=n<a.x-i/2,f,d;return c||u?(f=n>a.x?r-e:r+e,d=i*i/(n-s)-i*i*(r-l)*(f-l)/(o*o*(n-s))+s):(d=r>a.y?n+e:n-e,f=o*o/(r-l)-o*o*(n-s)*(d-s)/(i*i*(r-l))+l),new we(d,f).theta(t)},toString:function(){return new we(this.x,this.y).toString()+" "+this.a+" "+this.b}};const DDe=Ca,{abs:cU,cos:NDe,sin:MDe,min:ab,max:uU,round:yk,pow:RDe}=Math,lt=function(t,e,n,r){if(!(this instanceof lt))return new lt(t,e,n,r);Object(t)===t&&(e=t.y,n=t.width,r=t.height,t=t.x),this.x=t===void 0?0:t,this.y=e===void 0?0:e,this.width=n===void 0?0:n,this.height=r===void 0?0:r};lt.fromEllipse=function(t){return t=new Ca(t),new lt(t.x-t.a,t.y-t.b,2*t.a,2*t.b)};lt.fromPointUnion=function(...t){if(t.length===0)return null;const e=new we;let n,r,i,o;n=r=1/0,i=o=-1/0;for(let a=0;a<t.length;a++){e.update(t[a]);const s=e.x,l=e.y;s<n&&(n=s),s>i&&(i=s),l<r&&(r=l),l>o&&(o=l)}return new lt(n,r,i-n,o-r)};lt.fromRectUnion=function(...t){if(t.length===0)return null;const e=new lt;let n,r,i,o;n=r=1/0,i=o=-1/0;for(let a=0;a<t.length;a++){e.update(t[a]);const s=e.x,l=e.y,c=s+e.width,u=l+e.height;s<n&&(n=s),c>i&&(i=c),l<r&&(r=l),u>o&&(o=u)}return new lt(n,r,i-n,o-r)};lt.prototype={type:gn.Rect,bbox:function(t){return this.clone().rotateAroundCenter(t)},rotateAroundCenter:function(t){if(!t)return this;const{width:e,height:n}=this,r=ls(t),i=cU(MDe(r)),o=cU(NDe(r)),a=e*o+n*i,s=e*i+n*o;return this.x+=(e-a)/2,this.y+=(n-s)/2,this.width=a,this.height=s,this},bottomLeft:function(){return new we(this.x,this.y+this.height)},bottomLine:function(){return new gt(this.bottomLeft(),this.bottomRight())},bottomMiddle:function(){return new we(this.x+this.width/2,this.y+this.height)},center:function(){return new we(this.x+this.width/2,this.y+this.height/2)},clone:function(){return new lt(this)},containsPoint:function(t){return t=new we(t),t.x>=this.x&&t.x<=this.x+this.width&&t.y>=this.y&&t.y<=this.y+this.height},containsRect:function(t){var e=new lt(this).normalize(),n=new lt(t).normalize(),r=e.width,i=e.height,o=n.width,a=n.height;if(!r||!i||!o||!a)return!1;var s=e.x,l=e.y,c=n.x,u=n.y;return o+=c,r+=s,a+=u,i+=l,s<=c&&o<=r&&l<=u&&a<=i},corner:function(){return new we(this.x+this.width,this.y+this.height)},equals:function(t){var e=new lt(this).normalize(),n=new lt(t).normalize();return e.x===n.x&&e.y===n.y&&e.width===n.width&&e.height===n.height},inflate:function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},intersect:function(t){var e=this.origin(),n=this.corner(),r=t.origin(),i=t.corner();if(i.x<=e.x||i.y<=e.y||r.x>=n.x||r.y>=n.y)return null;var o=uU(e.x,r.x),a=uU(e.y,r.y);return new lt(o,a,ab(n.x,i.x)-o,ab(n.y,i.y)-a)},intersectionWithLine:function(t){var e=this,n=[e.topLine(),e.rightLine(),e.bottomLine(),e.leftLine()],r=[],i=[],o,a,s=n.length;for(a=0;a<s;a++)o=t.intersect(n[a]),o!==null&&i.indexOf(o.toString())<0&&(r.push(o),i.push(o.toString()));return r.length>0?r:null},intersectionWithLineFromCenterToPoint:function(t,e){t=new we(t);var n=new we(this.x+this.width/2,this.y+this.height/2),r;e&&t.rotate(n,e);for(var i=[this.topLine(),this.rightLine(),this.bottomLine(),this.leftLine()],o=new gt(n,t),a=i.length-1;a>=0;--a){var s=i[a].intersection(o);if(s!==null){r=s;break}}return r&&e&&r.rotate(n,-e),r},leftLine:function(){return new gt(this.topLeft(),this.bottomLeft())},leftMiddle:function(){return new we(this.x,this.y+this.height/2)},maxRectScaleToFit:function(t,e){t=new lt(t),e||(e=t.center());var n,r,i,o,a,s,l,c,u=e.x,f=e.y;n=r=i=o=a=s=l=c=1/0;var d=t.topLeft();d.x<u&&(n=(this.x-u)/(d.x-u)),d.y<f&&(a=(this.y-f)/(d.y-f));var h=t.bottomRight();h.x>u&&(r=(this.x+this.width-u)/(h.x-u)),h.y>f&&(s=(this.y+this.height-f)/(h.y-f));var g=t.topRight();g.x>u&&(i=(this.x+this.width-u)/(g.x-u)),g.y<f&&(l=(this.y-f)/(g.y-f));var y=t.bottomLeft();return y.x<u&&(o=(this.x-u)/(y.x-u)),y.y>f&&(c=(this.y+this.height-f)/(y.y-f)),{sx:ab(n,r,i,o),sy:ab(a,s,l,c)}},maxRectUniformScaleToFit:function(t,e){var n=this.maxRectScaleToFit(t,e);return ab(n.sx,n.sy)},moveAndExpand:function(t){return this.x+=t.x||0,this.y+=t.y||0,this.width+=t.width||0,this.height+=t.height||0,this},normalize:function(){var t=this.x,e=this.y,n=this.width,r=this.height;return this.width<0&&(t=this.x+this.width,n=-this.width),this.height<0&&(e=this.y+this.height,r=-this.height),this.x=t,this.y=e,this.width=n,this.height=r,this},offset:function(t,e){return we.prototype.offset.call(this,t,e)},origin:function(){return new we(this.x,this.y)},pointNearestToPoint:function(t){if(t=new we(t),this.containsPoint(t)){var e=this.sideNearestToPoint(t);switch(e){case"right":return new we(this.x+this.width,t.y);case"left":return new we(this.x,t.y);case"bottom":return new we(t.x,this.y+this.height);case"top":return new we(t.x,this.y)}}return t.adhereToRect(this)},rightLine:function(){return new gt(this.topRight(),this.bottomRight())},rightMiddle:function(){return new we(this.x+this.width,this.y+this.height/2)},round:function(t){let e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=RDe(10,t);break}return this.x=yk(this.x*e)/e,this.y=yk(this.y*e)/e,this.width=yk(this.width*e)/e,this.height=yk(this.height*e)/e,this},scale:function(t,e,n){return n=this.origin().scale(t,e,n),this.x=n.x,this.y=n.y,this.width*=t,this.height*=e,this},sideNearestToPoint:function(t){t=new we(t);var e=t.x-this.x,n=this.x+this.width-t.x,r=t.y-this.y,i=this.y+this.height-t.y,o=e,a="left";return n<o&&(o=n,a="right"),r<o&&(o=r,a="top"),i<o&&(a="bottom"),a},snapToGrid:function(t,e){var n=this.origin().snapToGrid(t,e),r=this.corner().snapToGrid(t,e);return this.x=n.x,this.y=n.y,this.width=r.x-n.x,this.height=r.y-n.y,this},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},topLine:function(){return new gt(this.topLeft(),this.topRight())},topMiddle:function(){return new we(this.x+this.width/2,this.y)},topRight:function(){return new we(this.x+this.width,this.y)},toString:function(){return this.origin().toString()+" "+this.corner().toString()},union:function(t){return lt.fromRectUnion(this,t)},update:function(t,e,n,r){return Object(t)===t&&(e=t.y,n=t.width,r=t.height,t=t.x),this.x=t||0,this.y=e||0,this.width=n||0,this.height=r||0,this}};lt.prototype.bottomRight=lt.prototype.corner;lt.prototype.topLeft=lt.prototype.origin;lt.prototype.translate=lt.prototype.offset;const zDe=lt;function Mie(t){const e=t.trim();if(e==="")return[];const n=[],r=e.split(/\b\s*,\s*|,\s*|\s+/),i=r.length;for(let o=0;o<i;o+=2)n.push({x:+r[o],y:+r[o+1]});return n}function Rie(t){const e=t.length;if(e===0)return[];const n=[];for(let r=0;r<e;r++){const i=t[r].clone();n.push(i)}return n}function zie(t){const{abs:e}=Math;var n,r,i=t.length;if(i===0)return[];var o;for(n=0;n<i;n++)(o===void 0||t[n].y<o.y||t[n].y===o.y&&t[n].x>o.x)&&(o=t[n]);var a=[];for(n=0;n<i;n++){var s=o.theta(t[n]);s===0&&(s=360);var l=[t[n],n,s];a.push(l)}if(a.sort(function(z,B){var ie=z[2]-B[2];return ie===0&&(ie=B[1]-z[1]),ie}),a.length>2){var c=a[a.length-1];a.unshift(c)}for(var u={},f=[],d,h,g,y,S,v;a.length!==0;)if(d=a.pop(),h=d[0],!u.hasOwnProperty(d[0]+"@@"+d[1]))for(var _=!1;!_;)if(f.length<2)f.push(d),_=!0;else{g=f.pop(),y=g[0],S=f.pop(),v=S[0];var x=v.cross(y,h);if(x<0)f.push(S),f.push(g),f.push(d),_=!0;else if(x===0){var C=1e-10,k=y.angleBetween(v,h);e(k-180)<C||y.equals(h)||v.equals(y)?(u[g[0]+"@@"+g[1]]=y,f.push(S)):e((k+1)%360-1)<C&&(f.push(S),a.push(g))}else u[g[0]+"@@"+g[1]]=y,f.push(S)}f.length>2&&f.pop();var m,T=-1;for(r=f.length,n=0;n<r;n++){var E=f[n][1];(m===void 0||E<m)&&(m=E,T=n)}var I=[];if(T>0){var D=f.slice(T),F=f.slice(0,T);I=D.concat(F)}else I=f;var R=[];for(r=I.length,n=0;n<r;n++)R.push(I[n][0]);return R}const $r=function(t){if(!(this instanceof $r))return new $r(t);if(typeof t=="string")return new $r.parse(t);this.points=Array.isArray(t)?t.map(we):[]};$r.parse=function(t){return new $r(Mie(t))};$r.fromRect=function(t){return new $r([t.topLeft(),t.topRight(),t.bottomRight(),t.bottomLeft(),t.topLeft()])};$r.prototype={type:gn.Polyline,bbox:function(){var t=1/0,e=-1/0,n=1/0,r=-1/0,i=this.points,o=i.length;if(o===0)return null;for(var a=0;a<o;a++){var s=i[a],l=s.x,c=s.y;l<t&&(t=l),l>e&&(e=l),c<n&&(n=c),c>r&&(r=c)}return new lt(t,n,e-t,r-n)},clone:function(){return new $r(Rie(this.points))},closestPoint:function(t){var e=this.closestPointLength(t);return this.pointAtLength(e)},closestPointLength:function(t){var e=this.lengthPoints(),n=e.length;if(n===0||n===1)return 0;for(var r,i=1/0,o=0,a=n-1,s=0;s<a;s++){var l=new gt(e[s],e[s+1]),c=l.length(),u=l.closestPointNormalizedLength(t),f=l.pointAt(u),d=f.squaredDistance(t);d<i&&(i=d,r=o+u*c),o+=c}return r},closestPointNormalizedLength:function(t){var e=this.closestPointLength(t);if(e===0)return 0;var n=this.length();return n===0?0:e/n},closestPointTangent:function(t){var e=this.closestPointLength(t);return this.tangentAtLength(e)},containsPoint:function(t){var e=this.points,n=e.length;if(n===0)return!1;for(var r=t.x,i=t.y,o=n-1,a=0,s=0,l=new gt,c=new gt,u=new we;a<n;a++){var f=e[o],d=e[a];if(t.equals(f)||(l.start=f,l.end=d,l.containsPoint(t)))return!0;if(i<=f.y&&i>d.y||i>f.y&&i<=d.y){var h=f.x-r>d.x-r?f.x-r:d.x-r;h>=0&&(u.x=r+h,u.y=i,c.start=t,c.end=u,l.intersect(c)&&s++)}o=a}return s%2===1},close:function(){const{start:t,end:e,points:n}=this;return t&&e&&!t.equals(e)&&n.push(t.clone()),this},lengthPoints:function(){return this.points},convexHull:function(){return new $r(zie(this.points))},equals:function(t){if(!t)return!1;var e=this.points,n=t.points,r=e.length;if(n.length!==r)return!1;for(var i=0;i<r;i++){var o=e[i],a=t.points[i];if(!o.equals(a))return!1}return!0},intersectionWithLine:function(t){for(var e=new gt(t),n=[],r=this.lengthPoints(),i=new gt,o=0,a=r.length-1;o<a;o++){i.start=r[o],i.end=r[o+1];var s=e.intersectionWithLine(i);s&&n.push(s[0])}return n.length>0?n:null},isDifferentiable:function(){var t=this.points,e=t.length;if(e===0)return!1;for(var n=new gt,r=e-1,i=0;i<r;i++)if(n.start=t[i],n.end=t[i+1],n.isDifferentiable())return!0;return!1},length:function(){var t=this.lengthPoints(),e=t.length;if(e===0)return 0;for(var n=0,r=e-1,i=0;i<r;i++)n+=t[i].distance(t[i+1]);return n},pointAt:function(t){var e=this.lengthPoints(),n=e.length;if(n===0)return null;if(n===1||t<=0)return e[0].clone();if(t>=1)return e[n-1].clone();var r=this.length(),i=r*t;return this.pointAtLength(i)},pointAtLength:function(t){var e=this.lengthPoints(),n=e.length;if(n===0)return null;if(n===1)return e[0].clone();var r=!0;t<0&&(r=!1,t=-t);for(var i=0,o=n-1,a=0;a<o;a++){var s=r?a:o-1-a,l=e[s],c=e[s+1],u=new gt(l,c),f=l.distance(c);if(t<=i+f)return u.pointAtLength((r?1:-1)*(t-i));i+=f}var d=r?e[n-1]:e[0];return d.clone()},round:function(t){for(var e=this.points,n=e.length,r=0;r<n;r++)e[r].round(t);return this},scale:function(t,e,n){for(var r=this.points,i=r.length,o=0;o<i;o++)r[o].scale(t,e,n);return this},simplify:function(t={}){const e=this.points;if(e.length<3)return this;const n=t.threshold||0;let r=0;for(;e[r+2];){const i=r,o=r+1,a=r+2,s=e[i],l=e[o],c=e[a];new gt(s,c).closestPoint(l).distance(l)<=n?e.splice(o,1):r+=1}return this},tangentAt:function(t){var e=this.lengthPoints(),n=e.length;if(n===0||n===1)return null;t<0&&(t=0),t>1&&(t=1);var r=this.length(),i=r*t;return this.tangentAtLength(i)},tangentAtLength:function(t){var e=this.lengthPoints(),n=e.length;if(n===0||n===1)return null;var r=!0;t<0&&(r=!1,t=-t);for(var i,o=0,a=n-1,s=0;s<a;s++){var l=r?s:a-1-s,c=e[l],u=e[l+1],f=new gt(c,u),d=c.distance(u);if(f.isDifferentiable()){if(t<=o+d)return f.tangentAtLength((r?1:-1)*(t-o));i=f}o+=d}if(i){var h=r?1:0;return i.tangentAt(h)}return null},toString:function(){return this.points+""},translate:function(t,e){for(var n=this.points,r=n.length,i=0;i<r;i++)n[i].translate(t,e);return this},serialize:function(){var t=this.points,e=t.length;if(e===0)return"";for(var n="",r=0;r<e;r++){var i=t[r];n+=i.x+","+i.y+" "}return n.trim()}};Object.defineProperty($r.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var t=this.points,e=t.length;return e===0?null:this.points[0]}});Object.defineProperty($r.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var t=this.points,e=t.length;return e===0?null:this.points[e-1]}});const{abs:bk,sqrt:VDe,min:fU,max:dU,pow:w7}=Math,nr=function(t,e,n,r){if(!(this instanceof nr))return new nr(t,e,n,r);if(t instanceof nr)return new nr(t.start,t.controlPoint1,t.controlPoint2,t.end);this.start=new we(t),this.controlPoint1=new we(e),this.controlPoint2=new we(n),this.end=new we(r)};nr.throughPoints=function(){function t(n){var r=[],i=[],o=n.length-1,a;if(o==1)return r[0]=new we((2*n[0].x+n[1].x)/3,(2*n[0].y+n[1].y)/3),i[0]=new we(2*r[0].x-n[0].x,2*r[0].y-n[0].y),[r,i];var s=[];for(a=1;a<o-1;a++)s[a]=4*n[a].x+2*n[a+1].x;s[0]=n[0].x+2*n[1].x,s[o-1]=(8*n[o-1].x+n[o].x)/2;var l=e(s);for(a=1;a<o-1;++a)s[a]=4*n[a].y+2*n[a+1].y;s[0]=n[0].y+2*n[1].y,s[o-1]=(8*n[o-1].y+n[o].y)/2;var c=e(s);for(a=0;a<o;a++)r.push(new we(l[a],c[a])),a<o-1?i.push(new we(2*n[a+1].x-l[a+1],2*n[a+1].y-c[a+1])):i.push(new we((n[o].x+l[o-1])/2,(n[o].y+c[o-1])/2));return[r,i]}function e(n){var r=n.length,i=[],o=[],a=2;i[0]=n[0]/a;for(var s=1;s<r;s++)o[s]=1/a,a=(s<r-1?4:3.5)-o[s],i[s]=(n[s]-i[s-1])/a;for(s=1;s<r;s++)i[r-s-1]-=o[r-s]*i[r-s];return i}return function(n){if(!n||Array.isArray(n)&&n.length<2)throw new Error("At least 2 points are required");for(var r=t(n),i=[],o=r[0].length,a=0;a<o;a++){var s=new we(r[0][a].x,r[0][a].y),l=new we(r[1][a].x,r[1][a].y);i.push(new nr(n[a],s,l,n[a+1]))}return i}}();nr.prototype={type:gn.Curve,bbox:function(){for(var t=this.start,e=this.controlPoint1,n=this.controlPoint2,r=this.end,i=t.x,o=t.y,a=e.x,s=e.y,l=n.x,c=n.y,u=r.x,f=r.y,d=new Array,h=new Array,g=[new Array,new Array],y,S,v,_,x,C,k,m,T=0;T<2;++T){if(T===0?(S=6*i-12*a+6*l,y=-3*i+9*a-9*l+3*u,v=3*a-3*i):(S=6*o-12*s+6*c,y=-3*o+9*s-9*c+3*f,v=3*s-3*o),bk(y)<1e-12){if(bk(S)<1e-12)continue;_=-v/S,0<_&&_<1&&h.push(_);continue}k=S*S-4*v*y,m=VDe(k),!(k<0)&&(x=(-S+m)/(2*y),0<x&&x<1&&h.push(x),C=(-S-m)/(2*y),0<C&&C<1&&h.push(C))}for(var E=h.length,I=E,D,F,R;E--;)_=h[E],D=1-_,F=D*D*D*i+3*D*D*_*a+3*D*_*_*l+_*_*_*u,g[0][E]=F,R=D*D*D*o+3*D*D*_*s+3*D*_*_*c+_*_*_*f,g[1][E]=R,d[E]={X:F,Y:R};h[I]=0,h[I+1]=1,d[I]={X:i,Y:o},d[I+1]={X:u,Y:f},g[0][I]=i,g[1][I]=o,g[0][I+1]=u,g[1][I+1]=f,h.length=I+2,g[0].length=I+2,g[1].length=I+2,d.length=I+2;var z=fU.apply(null,g[0]),B=fU.apply(null,g[1]),ie=dU.apply(null,g[0]),oe=dU.apply(null,g[1]);return new lt(z,B,ie-z,oe-B)},clone:function(){return new nr(this.start,this.controlPoint1,this.controlPoint2,this.end)},closestPoint:function(t,e){return this.pointAtT(this.closestPointT(t,e))},closestPointLength:function(t,e){e=e||{};var n=e.precision===void 0?this.PRECISION:e.precision,r=e.subdivisions===void 0?this.getSubdivisions({precision:n}):e.subdivisions,i={precision:n,subdivisions:r};return this.lengthAtT(this.closestPointT(t,i),i)},closestPointNormalizedLength:function(t,e){e=e||{};var n=e.precision===void 0?this.PRECISION:e.precision,r=e.subdivisions===void 0?this.getSubdivisions({precision:n}):e.subdivisions,i={precision:n,subdivisions:r},o=this.closestPointLength(t,i);if(!o)return 0;var a=this.length(i);return a===0?0:o/a},closestPointT:function(t,e){e=e||{};for(var n=e.precision===void 0?this.PRECISION:e.precision,r=e.subdivisions===void 0?this.getSubdivisions({precision:n}):e.subdivisions,i,o,a,s,l,c,u,f=r.length,d=f?1/f:0,h=0;h<f;h++){var g=r[h],y=g.start.distance(t),S=g.end.distance(t),v=y+S;(!u||v<u)&&(i=g,o=h*d,a=(h+1)*d,s=y,l=S,c=g.start.distance(g.end),u=v)}for(var _=w7(10,-n);;){var x=s?bk(s-l)/s:0,C=l?bk(s-l)/l:0,k=x<_||C<_,m=s?s<c*_:!0,T=l?l<c*_:!0,E=m||T;if(k||E)return s<=l?o:a;var I=i.divide(.5);d/=2;var D=I[0].start.distance(t),F=I[0].end.distance(t),R=D+F,z=I[1].start.distance(t),B=I[1].end.distance(t),ie=z+B;R<=ie?(i=I[0],a-=d,s=D,l=F):(i=I[1],o+=d,s=z,l=B)}},closestPointTangent:function(t,e){return this.tangentAtT(this.closestPointT(t,e))},containsPoint:function(t,e){var n=this.toPolyline(e);return n.containsPoint(t)},divideAt:function(t,e){if(t<=0)return this.divideAtT(0);if(t>=1)return this.divideAtT(1);var n=this.tAt(t,e);return this.divideAtT(n)},divideAtLength:function(t,e){var n=this.tAtLength(t,e);return this.divideAtT(n)},divideAtT:function(t){var e=this.start,n=this.controlPoint1,r=this.controlPoint2,i=this.end;if(t<=0)return[new nr(e,e,e,e),new nr(e,n,r,i)];if(t>=1)return[new nr(e,n,r,i),new nr(i,i,i,i)];var o=this.getSkeletonPoints(t),a=o.startControlPoint1,s=o.startControlPoint2,l=o.divider,c=o.dividerControlPoint1,u=o.dividerControlPoint2;return[new nr(e,a,s,l),new nr(l,c,u,i)]},endpointDistance:function(){return this.start.distance(this.end)},equals:function(t){return!!t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.controlPoint1.x===t.controlPoint1.x&&this.controlPoint1.y===t.controlPoint1.y&&this.controlPoint2.x===t.controlPoint2.x&&this.controlPoint2.y===t.controlPoint2.y&&this.end.x===t.end.x&&this.end.y===t.end.y},getSkeletonPoints:function(t){var e=this.start,n=this.controlPoint1,r=this.controlPoint2,i=this.end;if(t<=0)return{startControlPoint1:e.clone(),startControlPoint2:e.clone(),divider:e.clone(),dividerControlPoint1:n.clone(),dividerControlPoint2:r.clone()};if(t>=1)return{startControlPoint1:n.clone(),startControlPoint2:r.clone(),divider:i.clone(),dividerControlPoint1:i.clone(),dividerControlPoint2:i.clone()};var o=new gt(e,n).pointAt(t),a=new gt(n,r).pointAt(t),s=new gt(r,i).pointAt(t),l=new gt(o,a).pointAt(t),c=new gt(a,s).pointAt(t),u=new gt(l,c).pointAt(t),f={startControlPoint1:o,startControlPoint2:l,divider:u,dividerControlPoint1:c,dividerControlPoint2:s};return f},getSubdivisions:function(t){t=t||{};var e=t.precision===void 0?this.PRECISION:t.precision,n=this.start,r=this.controlPoint1,i=this.controlPoint2,o=this.end,a=[new nr(n,r,i,o)];if(e===0)return a;var s=!this.isDifferentiable();if(s)return a;var l=this.endpointDistance(),c=w7(10,-e),u=2,f=r.cross(n,o)===0&&i.cross(n,o)===0;f&&(u=2*e);for(var d=0;;){d+=1;for(var h=[],g=a.length,y=0;y<g;y++){var S=a[y],v=S.divide(.5);h.push(v[0],v[1])}for(var _=0,x=h.length,C=0;C<x;C++){var k=h[C];_+=k.endpointDistance()}if(d>=u){var m=_!==0?(_-l)/_:0;if(m<c)return h}a=h,l=_}},isDifferentiable:function(){var t=this.start,e=this.controlPoint1,n=this.controlPoint2,r=this.end;return!(t.equals(e)&&e.equals(n)&&n.equals(r))},length:function(t){t=t||{};for(var e=t.precision===void 0?this.PRECISION:t.precision,n=t.subdivisions===void 0?this.getSubdivisions({precision:e}):t.subdivisions,r=0,i=n.length,o=0;o<i;o++){var a=n[o];r+=a.endpointDistance()}return r},lengthAtT:function(t,e){if(t<=0)return 0;e=e||{};var n=e.precision===void 0?this.PRECISION:e.precision,r=this.divide(t)[0],i=r.length({precision:n});return i},pointAt:function(t,e){if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();var n=this.tAt(t,e);return this.pointAtT(n)},pointAtLength:function(t,e){var n=this.tAtLength(t,e);return this.pointAtT(n)},pointAtT:function(t){return t<=0?this.start.clone():t>=1?this.end.clone():this.getSkeletonPoints(t).divider},PRECISION:3,round:function(t){return this.start.round(t),this.controlPoint1.round(t),this.controlPoint2.round(t),this.end.round(t),this},scale:function(t,e,n){return this.start.scale(t,e,n),this.controlPoint1.scale(t,e,n),this.controlPoint2.scale(t,e,n),this.end.scale(t,e,n),this},tangentAt:function(t,e){if(!this.isDifferentiable())return null;t<0?t=0:t>1&&(t=1);var n=this.tAt(t,e);return this.tangentAtT(n)},tangentAtLength:function(t,e){if(!this.isDifferentiable())return null;var n=this.tAtLength(t,e);return this.tangentAtT(n)},tangentAtT:function(t){if(!this.isDifferentiable())return null;t<0?t=0:t>1&&(t=1);var e=this.getSkeletonPoints(t),n=e.startControlPoint2,r=e.dividerControlPoint1,i=e.divider,o=new gt(n,r);return o.translate(i.x-n.x,i.y-n.y),o},tAt:function(t,e){if(t<=0)return 0;if(t>=1)return 1;e=e||{};var n=e.precision===void 0?this.PRECISION:e.precision,r=e.subdivisions===void 0?this.getSubdivisions({precision:n}):e.subdivisions,i={precision:n,subdivisions:r},o=this.length(i),a=o*t;return this.tAtLength(a,i)},tAtLength:function(t,e){var n=!0;t<0&&(n=!1,t=-t),e=e||{};for(var r=e.precision===void 0?this.PRECISION:e.precision,i=e.subdivisions===void 0?this.getSubdivisions({precision:r}):e.subdivisions,o={precision:r,subdivisions:i},a,s,l,c,u,f=0,d=i.length,h=1/d,g=0;g<d;g++){var y=n?g:d-1-g,S=i[g],v=S.endpointDistance();if(t<=f+v){a=S,s=y*h,l=(y+1)*h,c=n?t-f:v+f-t,u=n?v+f-t:t-f;break}f+=v}if(!a)return n?1:0;for(var _=this.length(o),x=w7(10,-r);;){var C;if(C=_!==0?c/_:0,C<x)return s;if(C=_!==0?u/_:0,C<x)return l;var k,m,T=a.divide(.5);h/=2;var E=T[0].endpointDistance(),I=T[1].endpointDistance();c<=E?(a=T[0],l-=h,k=c,m=E-k):(a=T[1],s+=h,k=c-E,m=I-k),c=k,u=m}},toPoints:function(t){t=t||{};for(var e=t.precision===void 0?this.PRECISION:t.precision,n=t.subdivisions===void 0?this.getSubdivisions({precision:e}):t.subdivisions,r=[n[0].start.clone()],i=n.length,o=0;o<i;o++){var a=n[o];r.push(a.end.clone())}return r},toPolyline:function(t){return new $r(this.toPoints(t))},toString:function(){return this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(t,e){return this.start.translate(t,e),this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e),this}};nr.prototype.divide=nr.prototype.divideAtT;function _S(t){var e,n,r=[];for(n=arguments.length,e=1;e<n;e++)r.push(arguments[e]);if(!t)throw new Error("Missing a parent object.");var i=Object.create(t);for(n=r.length,e=0;e<n;e++){var o=r[e],a,s;for(s in o)o.hasOwnProperty(s)&&(delete i[s],a=Object.getOwnPropertyDescriptor(o,s),Object.defineProperty(i,s,a))}return i}const xt=function(t){if(!(this instanceof xt))return new xt(t);if(typeof t=="string")return new xt.parse(t);this.segments=[];var e,n;if(t)if(Array.isArray(t)&&t.length!==0)if(t=t.reduce(function(s,l){return s.concat(l)},[]),n=t.length,t[0].isSegment)for(e=0;e<n;e++){var r=t[e];this.appendSegment(r)}else{var i=null;for(e=0;e<n;e++){var o=t[e];if(!(o instanceof gt||o instanceof nr))throw new Error("Cannot construct a path segment from the provided object.");e===0&&this.appendSegment(xt.createSegment("M",o.start)),i&&!i.end.equals(o.start)&&this.appendSegment(xt.createSegment("M",o.start)),o instanceof gt?this.appendSegment(xt.createSegment("L",o.end)):o instanceof nr&&this.appendSegment(xt.createSegment("C",o.controlPoint1,o.controlPoint2,o.end)),i=o}}else if(t.isSegment)this.appendSegment(t);else if(t instanceof gt)this.appendSegment(xt.createSegment("M",t.start)),this.appendSegment(xt.createSegment("L",t.end));else if(t instanceof nr)this.appendSegment(xt.createSegment("M",t.start)),this.appendSegment(xt.createSegment("C",t.controlPoint1,t.controlPoint2,t.end));else if(t instanceof $r){if(!(t.points&&t.points.length!==0))return;for(n=t.points.length,e=0;e<n;e++){var a=t.points[e];e===0?this.appendSegment(xt.createSegment("M",a)):this.appendSegment(xt.createSegment("L",a))}}else throw new Error("Cannot construct a path from the provided object.")};xt.parse=function(t){if(!t)return new xt;for(var e=new xt,n=/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g,r=t.match(n),i=r.length,o=0;o<i;o++){var a=r[o],s=/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g,l=a.match(s),c=xt.createSegment.apply(this,l);e.appendSegment(c)}return e};xt.createSegment=function(t){if(!t)throw new Error("Type must be provided.");var e=xt.segmentTypes[t];if(!e)throw new Error(t+" is not a recognized path segment type.");for(var n=[],r=arguments.length,i=1;i<r;i++)n.push(arguments[i]);return du(e,n)};xt.prototype={type:gn.Path,appendSegment:function(t){var e=this.segments,n=e.length,r,i=n!==0?e[n-1]:null,o=null;if(Array.isArray(t)){if(t=t.reduce(function(c,u){return c.concat(u)},[]),!t[0].isSegment)throw new Error("Segments required.");for(var a=t.length,s=0;s<a;s++){var l=t[s];r=this.prepareSegment(l,i,o),e.push(r),i=r}}else{if(!t||!t.isSegment)throw new Error("Segment required.");r=this.prepareSegment(t,i,o),e.push(r)}},bbox:function(){var t=this.segments,e=t.length;if(e===0)return null;for(var n,r=0;r<e;r++){var i=t[r];if(i.isVisible){var o=i.bbox();n=n?n.union(o):o}}if(n)return n;var a=t[e-1];return new lt(a.end.x,a.end.y,0,0)},clone:function(){for(var t=this.segments,e=t.length,n=new xt,r=0;r<e;r++){var i=t[r].clone();n.appendSegment(i)}return n},closestPoint:function(t,e){var n=this.closestPointT(t,e);return n?this.pointAtT(n):null},closestPointLength:function(t,e){e=e||{};var n=e.precision===void 0?this.PRECISION:e.precision,r=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions,i={precision:n,segmentSubdivisions:r},o=this.closestPointT(t,i);return o?this.lengthAtT(o,i):0},closestPointNormalizedLength:function(t,e){e=e||{};var n=e.precision===void 0?this.PRECISION:e.precision,r=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions,i={precision:n,segmentSubdivisions:r},o=this.closestPointLength(t,i);if(o===0)return 0;var a=this.length(i);return a===0?0:o/a},closestPointT:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;e=e||{};for(var i=e.precision===void 0?this.PRECISION:e.precision,o=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,a,s=1/0,l=0;l<r;l++){var c=n[l],u=o[l];if(c.isVisible){var f=c.closestPointT(t,{precision:i,subdivisions:u}),d=c.pointAtT(f),h=new gt(d,t).squaredLength();h<s&&(a={segmentIndex:l,value:f},s=h)}}return a||{segmentIndex:r-1,value:1}},closestPointTangent:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;e=e||{};for(var i=e.precision===void 0?this.PRECISION:e.precision,o=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,a,s=1/0,l=0;l<r;l++){var c=n[l],u=o[l];if(c.isDifferentiable()){var f=c.closestPointT(t,{precision:i,subdivisions:u}),d=c.pointAtT(f),h=new gt(d,t).squaredLength();h<s&&(a=c.tangentAtT(f),s=h)}}return a||null},containsPoint:function(t,e){var n=this.toPolylines(e);if(!n)return!1;for(var r=n.length,i=0,o=0;o<r;o++){var a=n[o];a.containsPoint(t)&&i++}return i%2===1},divideAt:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;t<0&&(t=0),t>1&&(t=1),e=e||{};var i=e.precision===void 0?this.PRECISION:e.precision,o=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,a={precision:i,segmentSubdivisions:o},s=this.length(a),l=s*t;return this.divideAtLength(l,a)},divideAtLength:function(t,e){var n=this.segments.length;if(n===0)return null;var r=!0;t<0&&(r=!1,t=-t),e=e||{};var i=e.precision===void 0?this.PRECISION:e.precision,o=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,a,s,l=0,c,u,f,d,h;for(a=0;a<n;a++){var g=r?a:n-1-a;s=this.getSegment(g);var y=o[g],S=s.length({precision:i,subdivisions:y});if(s.isDifferentiable()&&(f=s,d=g,t<=l+S)){u=g,c=s.divideAtLength((r?1:-1)*(t-l),{precision:i,subdivisions:y});break}l+=S}if(!f)return null;c||(u=d,h=r?1:0,c=f.divideAtT(h));var v=this.clone();v.replaceSegment(u,c);var _=u,x=u+1,C=u+2;c[0].isDifferentiable()||(v.removeSegment(_),x-=1,C-=1);var k=v.getSegment(x).start;v.insertSegment(x,xt.createSegment("M",k)),C+=1,c[1].isDifferentiable()||(v.removeSegment(C-1),C-=1);var m=C-_-1;for(a=C;a<v.segments.length;a++){var T=this.getSegment(a-m);if(s=v.getSegment(a),s.type==="Z"&&!T.subpathStartSegment.end.equals(s.subpathStartSegment.end)){var E=xt.createSegment("L",T.end);v.replaceSegment(a,E)}}var I=new xt(v.segments.slice(0,x)),D=new xt(v.segments.slice(x));return[I,D]},equals:function(t){if(!t)return!1;var e=this.segments,n=t.segments,r=e.length;if(n.length!==r)return!1;for(var i=0;i<r;i++){var o=e[i],a=n[i];if(o.type!==a.type||!o.equals(a))return!1}return!0},getSegment:function(t){var e=this.segments,n=e.length;if(n===0)throw new Error("Path has no segments.");if(t<0&&(t=n+t),t>=n||t<0)throw new Error("Index out of range.");return e[t]},getSegmentSubdivisions:function(t){var e=this.segments,n=e.length;t=t||{};for(var r=t.precision===void 0?this.PRECISION:t.precision,i=[],o=0;o<n;o++){var a=e[o],s=a.getSubdivisions({precision:r});i.push(s)}return i},getSubpaths:function(){const e=this.clone().validate().segments,n=e.length,r=[];for(let i=0;i<n;i++){const o=e[i];o.isSubpathStart?r.push(new xt(o)):r[r.length-1].appendSegment(o)}return r},insertSegment:function(t,e){var n=this.segments,r=n.length;if(t<0&&(t=r+t+1),t>r||t<0)throw new Error("Index out of range.");var i,o=null,a=null;if(r!==0&&(t>=1?(o=n[t-1],a=o.nextSegment):a=n[0]),Array.isArray(e)){if(e=e.reduce(function(u,f){return u.concat(f)},[]),!e[0].isSegment)throw new Error("Segments required.");for(var s=e.length,l=0;l<s;l++){var c=e[l];i=this.prepareSegment(c,o,a),n.splice(t+l,0,i),o=i}}else{if(!e||!e.isSegment)throw new Error("Segment required.");i=this.prepareSegment(e,o,a),n.splice(t,0,i)}},intersectionWithLine:function(t,e){var n=null,r=this.toPolylines(e);if(!r)return null;for(var i=0,o=r.length;i<o;i++){var a=r[i],s=t.intersect(a);s&&(n||(n=[]),Array.isArray(s)?Array.prototype.push.apply(n,s):n.push(s))}return n},isDifferentiable:function(){for(var t=this.segments,e=t.length,n=0;n<e;n++){var r=t[n];if(r.isDifferentiable())return!0}return!1},isValid:function(){var t=this.segments,e=t.length===0||t[0].type==="M";return e},length:function(t){var e=this.segments,n=e.length;if(n===0)return 0;t=t||{};for(var r=t.precision===void 0?this.PRECISION:t.precision,i=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:r}):t.segmentSubdivisions,o=0,a=0;a<n;a++){var s=e[a],l=i[a];o+=s.length({subdivisions:l})}return o},lengthAtT:function(t,e){var n=this.segments,r=n.length;if(r===0)return 0;var i=t.segmentIndex;if(i<0)return 0;var o=t.value;i>=r?(i=r-1,o=1):o<0?o=0:o>1&&(o=1),e=e||{};for(var a=e.precision===void 0?this.PRECISION:e.precision,s=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:a}):e.segmentSubdivisions,l,c=0,u=0;u<i;u++){var f=n[u];l=s[u],c+=f.length({precisison:a,subdivisions:l})}return f=n[i],l=s[i],c+=f.lengthAtT(o,{precisison:a,subdivisions:l}),c},pointAt:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();e=e||{};var i=e.precision===void 0?this.PRECISION:e.precision,o=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,a={precision:i,segmentSubdivisions:o},s=this.length(a),l=s*t;return this.pointAtLength(l,a)},pointAtLength:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;if(t===0)return this.start.clone();var i=!0;t<0&&(i=!1,t=-t),e=e||{};for(var o=e.precision===void 0?this.PRECISION:e.precision,a=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions,s,l=0,c=0;c<r;c++){var u=i?c:r-1-c,f=n[u],d=a[u],h=f.length({precision:o,subdivisions:d});if(f.isVisible){if(t<=l+h)return f.pointAtLength((i?1:-1)*(t-l),{precision:o,subdivisions:d});s=f}l+=h}if(s)return i?s.end:s.start;var g=n[r-1];return g.end.clone()},pointAtT:function(t){var e=this.segments,n=e.length;if(n===0)return null;var r=t.segmentIndex;if(r<0)return e[0].pointAtT(0);if(r>=n)return e[n-1].pointAtT(1);var i=t.value;return i<0?i=0:i>1&&(i=1),e[r].pointAtT(i)},PRECISION:3,prepareSegment:function(t,e,n){t.previousSegment=e,t.nextSegment=n,e&&(e.nextSegment=t),n&&(n.previousSegment=t);var r=t;return t.isSubpathStart&&(t.subpathStartSegment=t,r=n),r&&this.updateSubpathStartSegment(r),t},removeSegment:function(t){var e=this.segments,n=e.length;if(n===0)throw new Error("Path has no segments.");if(t<0&&(t=n+t),t>=n||t<0)throw new Error("Index out of range.");var r=e.splice(t,1)[0],i=r.previousSegment,o=r.nextSegment;i&&(i.nextSegment=o),o&&(o.previousSegment=i),r.isSubpathStart&&o&&this.updateSubpathStartSegment(o)},replaceSegment:function(t,e){var n=this.segments,r=n.length;if(r===0)throw new Error("Path has no segments.");if(t<0&&(t=r+t),t>=r||t<0)throw new Error("Index out of range.");var i,o=n[t],a=o.previousSegment,s=o.nextSegment,l=o.isSubpathStart;if(Array.isArray(e)){if(e=e.reduce(function(d,h){return d.concat(h)},[]),!e[0].isSegment)throw new Error("Segments required.");n.splice(t,1);for(var c=e.length,u=0;u<c;u++){var f=e[u];i=this.prepareSegment(f,a,s),n.splice(t+u,0,i),a=i,l&&i.isSubpathStart&&(l=!1)}}else{if(!e||!e.isSegment)throw new Error("Segment required.");i=this.prepareSegment(e,a,s),n.splice(t,1,i),l&&i.isSubpathStart&&(l=!1)}l&&s&&this.updateSubpathStartSegment(s)},round:function(t){for(var e=this.segments,n=e.length,r=0;r<n;r++){var i=e[r];i.round(t)}return this},scale:function(t,e,n){for(var r=this.segments,i=r.length,o=0;o<i;o++){var a=r[o];a.scale(t,e,n)}return this},segmentAt:function(t,e){var n=this.segmentIndexAt(t,e);return n?this.getSegment(n):null},segmentAtLength:function(t,e){var n=this.segmentIndexAtLength(t,e);return n?this.getSegment(n):null},segmentIndexAt:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;t<0&&(t=0),t>1&&(t=1),e=e||{};var i=e.precision===void 0?this.PRECISION:e.precision,o=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,a={precision:i,segmentSubdivisions:o},s=this.length(a),l=s*t;return this.segmentIndexAtLength(l,a)},segmentIndexAtLength:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;var i=!0;t<0&&(i=!1,t=-t),e=e||{};for(var o=e.precision===void 0?this.PRECISION:e.precision,a=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions,s=null,l=0,c=0;c<r;c++){var u=i?c:r-1-c,f=n[u],d=a[u],h=f.length({precision:o,subdivisions:d});if(f.isVisible){if(t<=l+h)return u;s=u}l+=h}return s},serialize:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.toString()},tangentAt:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;t<0&&(t=0),t>1&&(t=1),e=e||{};var i=e.precision===void 0?this.PRECISION:e.precision,o=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,a={precision:i,segmentSubdivisions:o},s=this.length(a),l=s*t;return this.tangentAtLength(l,a)},tangentAtLength:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;var i=!0;t<0&&(i=!1,t=-t),e=e||{};for(var o=e.precision===void 0?this.PRECISION:e.precision,a=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions,s,l=0,c=0;c<r;c++){var u=i?c:r-1-c,f=n[u],d=a[u],h=f.length({precision:o,subdivisions:d});if(f.isDifferentiable()){if(t<=l+h)return f.tangentAtLength((i?1:-1)*(t-l),{precision:o,subdivisions:d});s=f}l+=h}if(s){var g=i?1:0;return s.tangentAtT(g)}return null},tangentAtT:function(t){var e=this.segments,n=e.length;if(n===0)return null;var r=t.segmentIndex;if(r<0)return e[0].tangentAtT(0);if(r>=n)return e[n-1].tangentAtT(1);var i=t.value;return i<0?i=0:i>1&&(i=1),e[r].tangentAtT(i)},toPoints:function(t){var e=this.segments,n=e.length;if(n===0)return null;t=t||{};for(var r=t.precision===void 0?this.PRECISION:t.precision,i=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:r}):t.segmentSubdivisions,o=[],a=[],s=0;s<n;s++){var l=e[s];if(l.isVisible){var c=i[s];if(c.length>0){var u=c.map(function(f){return f.start});Array.prototype.push.apply(a,u)}else a.push(l.start)}else a.length>0&&(a.push(e[s-1].end),o.push(a),a=[])}return a.length>0&&(a.push(this.end),o.push(a)),o},toPolylines:function(t){var e=[],n=this.toPoints(t);if(!n)return null;for(var r=0,i=n.length;r<i;r++)e.push(new $r(n[r]));return e},toString:function(){for(var t=this.segments,e=t.length,n="",r=0;r<e;r++){var i=t[r];n+=i.serialize()+" "}return n.trim()},translate:function(t,e){for(var n=this.segments,r=n.length,i=0;i<r;i++){var o=n[i];o.translate(t,e)}return this},updateSubpathStartSegment:function(t){for(var e=t.previousSegment;t&&!t.isSubpathStart;)e?t.subpathStartSegment=e.subpathStartSegment:t.subpathStartSegment=null,e=t,t=t.nextSegment},validate:function(){return this.isValid()||this.insertSegment(0,xt.createSegment("M",0,0)),this}};Object.defineProperty(xt.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var t=this.segments,e=t.length;if(e===0)return null;for(var n=0;n<e;n++){var r=t[n];if(r.isVisible)return r.start}return t[e-1].end}});Object.defineProperty(xt.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var t=this.segments,e=t.length;if(e===0)return null;for(var n=e-1;n>=0;n--){var r=t[n];if(r.isVisible)return r.end}return t[e-1].end}});function du(t,e){return e.unshift(null),new(Function.prototype.bind.apply(t,e))}var Kg={bbox:function(){throw new Error("Declaration missing for virtual function.")},clone:function(){throw new Error("Declaration missing for virtual function.")},closestPoint:function(){throw new Error("Declaration missing for virtual function.")},closestPointLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointNormalizedLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointT:function(t){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(t);throw new Error("Neither closestPointT() nor closestPointNormalizedLength() function is implemented.")},closestPointTangent:function(){throw new Error("Declaration missing for virtual function.")},divideAt:function(){throw new Error("Declaration missing for virtual function.")},divideAtLength:function(){throw new Error("Declaration missing for virtual function.")},divideAtT:function(t){if(this.divideAt)return this.divideAt(t);throw new Error("Neither divideAtT() nor divideAt() function is implemented.")},equals:function(){throw new Error("Declaration missing for virtual function.")},getSubdivisions:function(){throw new Error("Declaration missing for virtual function.")},isDifferentiable:function(){throw new Error("Declaration missing for virtual function.")},isSegment:!0,isSubpathStart:!1,isVisible:!0,length:function(){throw new Error("Declaration missing for virtual function.")},lengthAtT:function(t){if(t<=0)return 0;var e=this.length();return t>=1?e:e*t},nextSegment:null,pointAt:function(){throw new Error("Declaration missing for virtual function.")},pointAtLength:function(){throw new Error("Declaration missing for virtual function.")},pointAtT:function(t){if(this.pointAt)return this.pointAt(t);throw new Error("Neither pointAtT() nor pointAt() function is implemented.")},previousSegment:null,round:function(){throw new Error("Declaration missing for virtual function.")},subpathStartSegment:null,scale:function(){throw new Error("Declaration missing for virtual function.")},serialize:function(){throw new Error("Declaration missing for virtual function.")},tangentAt:function(){throw new Error("Declaration missing for virtual function.")},tangentAtLength:function(){throw new Error("Declaration missing for virtual function.")},tangentAtT:function(t){if(this.tangentAt)return this.tangentAt(t);throw new Error("Neither tangentAtT() nor tangentAt() function is implemented.")},toString:function(){throw new Error("Declaration missing for virtual function.")},translate:function(){throw new Error("Declaration missing for virtual function.")}};Object.defineProperty(Kg,"end",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(Kg,"start",{configurable:!0,enumerable:!0,get:function(){if(!this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path; OR segment has not yet been added to a path.)");return this.previousSegment.end}});Object.defineProperty(Kg,"type",{configurable:!0,enumerable:!0,get:function(){throw new Error("Bad segment declaration. No type specified.")}});var Ao=function(){for(var t=[],e=arguments.length,n=0;n<e;n++)t.push(arguments[n]);if(!(this instanceof Ao))return du(Ao,t);if(e===0)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates (none provided).");var r;if(t[0]instanceof gt){if(e===1)return this.end=t[0].end.clone(),this;throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+e+" lines provided).")}else if(typeof t[0]=="string"||typeof t[0]=="number"){if(e===2)return this.end=new we(+t[0],+t[1]),this;if(e<2)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+e+" coordinates provided).");var i;for(r=[],n=0;n<e;n+=2)i=t.slice(n,n+2),r.push(du(Ao,i));return r}else{if(e===1)return this.end=new we(t[0]),this;var o;for(r=[],n=0;n<e;n+=1)o=t[n],r.push(new Ao(o));return r}},Vie={clone:function(){return new Ao(this.end)},divideAt:function(t){var e=new gt(this.start,this.end),n=e.divideAt(t);return[new Ao(n[0]),new Ao(n[1])]},divideAtLength:function(t){var e=new gt(this.start,this.end),n=e.divideAtLength(t);return[new Ao(n[0]),new Ao(n[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return this.previousSegment?!this.start.equals(this.end):!1},round:function(t){return this.end.round(t),this},scale:function(t,e,n){return this.end.scale(t,e,n),this},serialize:function(){var t=this.end;return this.type+" "+t.x+" "+t.y},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(t,e){return this.end.translate(t,e),this}};Object.defineProperty(Vie,"type",{configurable:!0,enumerable:!0,value:"L"});Ao.prototype=_S(Kg,gt.prototype,Vie);var Is=function(){for(var t=[],e=arguments.length,n=0;n<e;n++)t.push(arguments[n]);if(!(this instanceof Is))return du(Is,t);if(e===0)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates (none provided).");var r;if(t[0]instanceof nr){if(e===1)return this.controlPoint1=t[0].controlPoint1.clone(),this.controlPoint2=t[0].controlPoint2.clone(),this.end=t[0].end.clone(),this;throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+e+" curves provided).")}else if(typeof t[0]=="string"||typeof t[0]=="number"){if(e===6)return this.controlPoint1=new we(+t[0],+t[1]),this.controlPoint2=new we(+t[2],+t[3]),this.end=new we(+t[4],+t[5]),this;if(e<6)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+e+" coordinates provided).");var i;for(r=[],n=0;n<e;n+=6)i=t.slice(n,n+6),r.push(du(Is,i));return r}else{if(e===3)return this.controlPoint1=new we(t[0]),this.controlPoint2=new we(t[1]),this.end=new we(t[2]),this;if(e<3)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+e+" points provided).");var o;for(r=[],n=0;n<e;n+=3)o=t.slice(n,n+3),r.push(du(Is,o));return r}},Bie={clone:function(){return new Is(this.controlPoint1,this.controlPoint2,this.end)},divideAt:function(t,e){var n=new nr(this.start,this.controlPoint1,this.controlPoint2,this.end),r=n.divideAt(t,e);return[new Is(r[0]),new Is(r[1])]},divideAtLength:function(t,e){var n=new nr(this.start,this.controlPoint1,this.controlPoint2,this.end),r=n.divideAtLength(t,e);return[new Is(r[0]),new Is(r[1])]},divideAtT:function(t){var e=new nr(this.start,this.controlPoint1,this.controlPoint2,this.end),n=e.divideAtT(t);return[new Is(n[0]),new Is(n[1])]},isDifferentiable:function(){if(!this.previousSegment)return!1;var t=this.start,e=this.controlPoint1,n=this.controlPoint2,r=this.end;return!(t.equals(e)&&e.equals(n)&&n.equals(r))},round:function(t){return this.controlPoint1.round(t),this.controlPoint2.round(t),this.end.round(t),this},scale:function(t,e,n){return this.controlPoint1.scale(t,e,n),this.controlPoint2.scale(t,e,n),this.end.scale(t,e,n),this},serialize:function(){var t=this.controlPoint1,e=this.controlPoint2,n=this.end;return this.type+" "+t.x+" "+t.y+" "+e.x+" "+e.y+" "+n.x+" "+n.y},toString:function(){return this.type+" "+this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(t,e){return this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e),this}};Object.defineProperty(Bie,"type",{configurable:!0,enumerable:!0,value:"C"});Is.prototype=_S(Kg,nr.prototype,Bie);var Jp=function(){for(var t=[],e=arguments.length,n=0;n<e;n++)t.push(arguments[n]);if(!(this instanceof Jp))return du(Jp,t);if(e===0)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (none provided).");var r;if(t[0]instanceof gt){if(e===1)return this.end=t[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+e+" lines provided).")}else if(t[0]instanceof nr){if(e===1)return this.end=t[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+e+" curves provided).")}else if(typeof t[0]=="string"||typeof t[0]=="number"){if(e===2)return this.end=new we(+t[0],+t[1]),this;if(e<2)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+e+" coordinates provided).");var i;for(r=[],n=0;n<e;n+=2)i=t.slice(n,n+2),n===0?r.push(du(Jp,i)):r.push(du(Ao,i));return r}else{if(e===1)return this.end=new we(t[0]),this;var o;for(r=[],n=0;n<e;n+=1)o=t[n],n===0?r.push(new Jp(o)):r.push(new Ao(o));return r}},FF={bbox:function(){return null},clone:function(){return new Jp(this.end)},closestPoint:function(){return this.end.clone()},closestPointNormalizedLength:function(){return 0},closestPointLength:function(){return 0},closestPointT:function(){return 1},closestPointTangent:function(){return null},divideAt:function(){return[this.clone(),this.clone()]},divideAtLength:function(){return[this.clone(),this.clone()]},equals:function(t){return this.end.equals(t.end)},getSubdivisions:function(){return[]},isDifferentiable:function(){return!1},isSubpathStart:!0,isVisible:!1,length:function(){return 0},lengthAtT:function(){return 0},pointAt:function(){return this.end.clone()},pointAtLength:function(){return this.end.clone()},pointAtT:function(){return this.end.clone()},round:function(t){return this.end.round(t),this},scale:function(t,e,n){return this.end.scale(t,e,n),this},serialize:function(){var t=this.end;return this.type+" "+t.x+" "+t.y},tangentAt:function(){return null},tangentAtLength:function(){return null},tangentAtT:function(){return null},toString:function(){return this.type+" "+this.end},translate:function(t,e){return this.end.translate(t,e),this}};Object.defineProperty(FF,"start",{configurable:!0,enumerable:!0,get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}});Object.defineProperty(FF,"type",{configurable:!0,enumerable:!0,value:"M"});Jp.prototype=_S(Kg,FF);var p0=function(){for(var t=[],e=arguments.length,n=0;n<e;n++)t.push(arguments[n]);if(!(this instanceof p0))return du(p0,t);if(e>0)throw new Error("Closepath constructor expects no arguments.");return this},LF={clone:function(){return new p0},divideAt:function(t){var e=new gt(this.start,this.end),n=e.divideAt(t);return[n[1].isDifferentiable()?new Ao(n[0]):this.clone(),new Ao(n[1])]},divideAtLength:function(t){var e=new gt(this.start,this.end),n=e.divideAtLength(t);return[n[1].isDifferentiable()?new Ao(n[0]):this.clone(),new Ao(n[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!this.previousSegment||!this.subpathStartSegment?!1:!this.start.equals(this.end)},round:function(){return this},scale:function(){return this},serialize:function(){return this.type},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(){return this}};Object.defineProperty(LF,"end",{configurable:!0,enumerable:!0,get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. Moveto); OR segment has not yet been added to a path.)");return this.subpathStartSegment.end}});Object.defineProperty(LF,"type",{configurable:!0,enumerable:!0,value:"Z"});p0.prototype=_S(Kg,gt.prototype,LF);var BDe=xt.segmentTypes={L:Ao,C:Is,M:Jp,Z:p0,z:p0};xt.regexSupportedData=new RegExp("^[\\s\\d"+Object.keys(BDe).join("")+",.]*$");xt.isDataSupported=function(t){return typeof t!="string"?!1:this.regexSupportedData.test(t)};const jDe={curveThroughPoints:function(t){return console.warn("deprecated"),new xt(nr.throughPoints(t)).serialize()},getCurveControlPoints:function(t){console.warn("deprecated");var e=[],n=[],r=t.length-1,i;if(r==1)return e[0]=new we((2*t[0].x+t[1].x)/3,(2*t[0].y+t[1].y)/3),n[0]=new we(2*e[0].x-t[0].x,2*e[0].y-t[0].y),[e,n];var o=[];for(i=1;i<r-1;i++)o[i]=4*t[i].x+2*t[i+1].x;o[0]=t[0].x+2*t[1].x,o[r-1]=(8*t[r-1].x+t[r].x)/2;var a=this.getFirstControlPoints(o);for(i=1;i<r-1;++i)o[i]=4*t[i].y+2*t[i+1].y;o[0]=t[0].y+2*t[1].y,o[r-1]=(8*t[r-1].y+t[r].y)/2;var s=this.getFirstControlPoints(o);for(i=0;i<r;i++)e.push(new we(a[i],s[i])),i<r-1?n.push(new we(2*t[i+1].x-a[i+1],2*t[i+1].y-s[i+1])):n.push(new we((t[r].x+a[r-1])/2,(t[r].y+s[r-1])/2));return[e,n]},getCurveDivider:function(t,e,n,r){console.warn("deprecated");var i=new nr(t,e,n,r);return function(a){var s=i.divide(a);return[{p0:s[0].start,p1:s[0].controlPoint1,p2:s[0].controlPoint2,p3:s[0].end},{p0:s[1].start,p1:s[1].controlPoint1,p2:s[1].controlPoint2,p3:s[1].end}]}},getFirstControlPoints:function(t){console.warn("deprecated");var e=t.length,n=[],r=[],i=2;n[0]=t[0]/i;for(var o=1;o<e;o++)r[o]=1/i,i=(o<e-1?4:3.5)-r[o],n[o]=(t[o]-n[o-1])/i;for(o=1;o<e;o++)n[e-o-1]-=r[e-o]*n[e-o];return n},getInversionSolver:function(t,e,n,r){console.warn("deprecated");var i=new nr(t,e,n,r);return function(a){return i.closestPointT(a)}}},cs=function(t){if(!(this instanceof cs))return new cs(t);if(typeof t=="string")return new cs.parse(t);this.points=Array.isArray(t)?t.map(we):[]};cs.parse=function(t){return new cs(Mie(t))};cs.fromRect=function(t){return new cs([t.topLeft(),t.topRight(),t.bottomRight(),t.bottomLeft()])};cs.prototype=_S($r.prototype,{type:gn.Polygon,clone:function(){return new cs(Rie(this.points))},convexHull:function(){return new cs(zie(this.points))},lengthPoints:function(){const{start:t,end:e,points:n}=this;return n.length<=1||t.equals(e)?n:[...n,t.clone()]}});function jie(t,e,n,r){switch(t.type){case gn.Line:{switch(e.type){case gn.Line:return Zp(t,e)}break}case gn.Ellipse:{switch(e.type){case gn.Line:return DF(t,e);case gn.Ellipse:return Hie(t,e)}break}case gn.Rect:{switch(e.type){case gn.Line:return Uie(t,e);case gn.Ellipse:return Wie(t,e);case gn.Rect:return NF(t,e)}break}case gn.Polyline:{switch(e.type){case gn.Line:return s3(t,e);case gn.Ellipse:return MF(t,e);case gn.Rect:return Gie(t,e);case gn.Polyline:return qie(t,e)}break}case gn.Polygon:{switch(e.type){case gn.Line:return RF(t,e);case gn.Ellipse:return l3(t,e);case gn.Rect:return Yie(t,e);case gn.Polyline:return Kie(t,e);case gn.Polygon:return Xie(t,e)}break}case gn.Path:{switch(e.type){case gn.Line:return Jie(t,e,n);case gn.Ellipse:return Zie(t,e,n);case gn.Rect:return Qie(t,e,n);case gn.Polyline:return zF(t,e,n);case gn.Polygon:return c3(t,e,n);case gn.Path:return eoe(t,e,n,r)}break}}switch(e.type){case gn.Ellipse:case gn.Rect:case gn.Polyline:case gn.Polygon:case gn.Path:return jie(e,t,r,n);default:throw Error(`The intersection for ${t} and ${e} could not be found.`)}}function Zp(t,e){const n=t.start.x,r=t.start.y,i=t.end.x,o=t.end.y,a=e.start.x,s=e.start.y,l=e.end.x,c=e.end.y,u=i-n,f=o-r,d=l-a,h=c-s,g=n-a,y=r-s,S=u*h-d*f,v=(u*y-f*g)/S,_=(d*y-h*g)/S;return v>=0&&v<=1&&_>=0&&_<=1}function DF(t,e){const n=t.a,r=t.b,i=t.x,o=t.y,a=e.start.x-i,s=e.end.x-i,l=e.start.y-o,c=e.end.y-o,u=n*n,f=r*r,d=s-a,h=c-l,g=d*d/u+h*h/f,y=2*a*d/u+2*l*h/f,S=a*a/u+l*l/f-1,v=y*y-4*g*S;if(v===0){const _=-y/2/g;return _>=0&&_<=1}else if(v>0){const _=Math.sqrt(v),x=(-y+_)/2/g,C=(-y-_)/2/g;return x>=0&&x<=1||C>=0&&C<=1}return!1}function Hie(t,e){return HDe(t,0,e,0)}function Uie(t,e){const{start:n,end:r}=e,{x:i,y:o,width:a,height:s}=t;return n.x>i+a&&r.x>i+a||n.x<i&&r.x<i||n.y>o+s&&r.y>o+s||n.y<o&&r.y<o?!1:t.containsPoint(e.start)||t.containsPoint(e.end)?!0:Zp(t.topLine(),e)||Zp(t.rightLine(),e)||Zp(t.bottomLine(),e)||Zp(t.leftLine(),e)}function Wie(t,e){return NF(t,lt.fromEllipse(e))?l3(cs.fromRect(t),e):!1}function NF(t,e){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}function s3(t,e){return toe(t,e,{interior:!1})}function MF(t,e){return noe(t,e,{interior:!1})}function Gie(t,e){return roe(t,e,{interior:!1})}function qie(t,e){return u3(t,e,{interior:!1})}function RF(t,e){return toe(t,e,{interior:!0})}function l3(t,e){return noe(t,e,{interior:!0})}function Yie(t,e){return roe(t,e,{interior:!0})}function Kie(t,e){return u3(t,e,{interior:!0})}function Xie(t,e){return VF(t,e,{interior:!0})}function Jie(t,e,n){return t.getSubpaths().some(r=>{const[i]=r.toPolylines(n),{type:o}=r.getSegment(-1);return o==="Z"?RF(i,e):s3(i,e)})}function Zie(t,e,n){return t.getSubpaths().some(r=>{const[i]=r.toPolylines(n),{type:o}=r.getSegment(-1);return o==="Z"?l3(i,e):MF(i,e)})}function Qie(t,e,n){return c3(t,cs.fromRect(e),n)}function zF(t,e,n){return ioe(t,e,n,{interior:!1})}function c3(t,e,n){return ioe(t,e,n,{interior:!0})}function eoe(t,e,n,r){return t.getSubpaths().some(i=>{const[o]=i.toPolylines(n),{type:a}=i.getSegment(-1);return a==="Z"?c3(e,o,r):zF(e,o,r)})}function toe(t,e,n={}){const{interior:r=!1}=n;let i;if(r){if(t.containsPoint(e.start))return!0;const{start:s,end:l,points:c}=t;i=l.equals(s)?c:[...c,s]}else i=t.points;const{length:o}=i,a=new gt;for(let s=0;s<o-1;s++)if(a.start=i[s],a.end=i[s+1],Zp(e,a))return!0;return!1}function noe(t,e,n={}){const{start:r,end:i,points:o}=t;if(e.containsPoint(r))return!0;let a;const{interior:s=!1}=n;if(s){if(t.containsPoint(e.center()))return!0;a=i.equals(r)?o:[...o,r]}else a=o;const{length:l}=a,c=new gt;for(let u=0;u<l-1;u++)if(c.start=a[u],c.end=a[u+1],DF(e,c))return!0;return!1}function roe(t,e,n){const r=cs.fromRect(e);return VF(t,r,n)}function ioe(t,e,n,r){return t.getSubpaths().some(i=>{const[o]=i.toPolylines(n),{type:a}=i.getSegment(-1);return a==="Z"?VF(e,o,r):u3(e,o,r)})}function u3(t,e,n={}){const{interior:r=!1}=n;let i;if(r){const{start:l}=e;if(t.containsPoint(l))return!0;i=t.clone().close()}else i=t;const o=e.points,{length:a}=o,s=new gt;for(let l=0;l<a-1;l++)if(s.start=o[l],s.end=o[l+1],s3(i,s))return!0;return!1}function VF(t,e,n){return e.containsPoint(t.start)||u3(t,e.clone().close(),n)}function HDe(t,e,n,r){const{cos:i,sin:o}=Math,a=o(e),s=i(e),l=o(r),c=i(r),u=a*a,f=s*s,d=a*s,h=l*l,g=c*c,y=l*c,S=t.a*t.a,v=t.b*t.b,_=n.a*n.a,x=n.b*n.b,C=S*u+v*f,k=_*h+x*g,m=S*f+v*u,T=_*g+x*h;let E=2*(v-S)*d,I=2*(x-_)*y,D=-2*C*t.x-E*t.y,F=-2*k*n.x-I*n.y,R=-E*t.x-2*m*t.y,z=-I*n.x-2*T*n.y;const B=C*t.x*t.x+m*t.y*t.y+E*t.x*t.y-S*v,ie=k*n.x*n.x+T*n.y*n.y+I*n.x*n.y-_*x;E=E/2,I=I/2,D=D/2,F=F/2,R=R/2,z=z/2;const oe=ad([[C,E,D],[E,m,R],[D,R,B]]),_e=ad([[k,I,F],[I,T,z],[F,z,ie]]),Ae=.33333333*(ad([[k,E,D],[I,m,R],[F,R,B]])+ad([[C,I,D],[E,T,R],[D,z,B]])+ad([[C,E,F],[E,m,z],[D,R,ie]])),Pe=.33333333*(ad([[C,I,F],[E,T,z],[D,z,ie]])+ad([[k,E,F],[I,m,z],[F,R,ie]])+ad([[k,I,D],[I,T,R],[F,z,B]])),Se=Sk([[oe,Ae],[Ae,Pe]]),se=Sk([[oe,Pe],[Ae,_e]]),ne=Sk([[Ae,Pe],[Pe,_e]]);return!(Sk([[2*Se,se],[se,2*ne]])>0&&(Pe>0||Ae>0))}function Sk(t){return t[0][0]*t[1][1]-t[0][1]*t[1][0]}function ad(t){return t[0][0]*t[1][1]*t[2][2]-t[0][0]*t[1][2]*t[2][1]-t[0][1]*t[1][0]*t[2][2]+t[0][1]*t[1][2]*t[2][0]+t[0][2]*t[1][0]*t[2][1]-t[0][2]*t[1][1]*t[2][0]}const UDe=Object.freeze(Object.defineProperty({__proto__:null,ellipseWithEllipse:Hie,ellipseWithLine:DF,exists:jie,lineWithLine:Zp,pathWithEllipse:Zie,pathWithLine:Jie,pathWithPath:eoe,pathWithPolygon:c3,pathWithPolyline:zF,pathWithRect:Qie,polygonWithEllipse:l3,polygonWithLine:RF,polygonWithPolygon:Xie,polygonWithPolyline:Kie,polygonWithRect:Yie,polylineWithEllipse:MF,polylineWithLine:s3,polylineWithPolyline:qie,polylineWithRect:Gie,rectWithEllipse:Wie,rectWithLine:Uie,rectWithRect:NF},Symbol.toStringTag,{value:"Module"})),WDe=UDe,GDe=Object.freeze(Object.defineProperty({__proto__:null,Curve:nr,Ellipse:Ca,Line:gt,Path:xt,Point:we,Polygon:cs,Polyline:$r,Rect:lt,bezier:jDe,ellipse:DDe,intersection:WDe,line:ug,normalizeAngle:bu,point:pC,random:oO,rect:zDe,scale:ODe,snapToGrid:Og,toDeg:a3,toRad:ls,types:gn},Symbol.toStringTag,{value:"Module"}));var ooe={},BF="1.13.6",hU=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},f3=Array.prototype,jF=Object.prototype,pU=typeof Symbol<"u"?Symbol.prototype:null,qDe=f3.push,wS=f3.slice,p2=jF.toString,YDe=jF.hasOwnProperty,aoe=typeof ArrayBuffer<"u",KDe=typeof DataView<"u",XDe=Array.isArray,gU=Object.keys,mU=Object.create,vU=aoe&&ArrayBuffer.isView,JDe=isNaN,ZDe=isFinite,soe=!{toString:null}.propertyIsEnumerable("toString"),yU=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],QDe=Math.pow(2,53)-1;function Pa(t,e){return e=e==null?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r);case 2:return t.call(this,arguments[0],arguments[1],r)}var o=Array(e+1);for(i=0;i<e;i++)o[i]=arguments[i];return o[e]=r,t.apply(this,o)}}function mh(t){var e=typeof t;return e==="function"||e==="object"&&!!t}function loe(t){return t===null}function HF(t){return t===void 0}function UF(t){return t===!0||t===!1||p2.call(t)==="[object Boolean]"}function coe(t){return!!(t&&t.nodeType===1)}function oa(t){var e="[object "+t+"]";return function(n){return p2.call(n)===e}}const d3=oa("String"),WF=oa("Number"),uoe=oa("Date"),foe=oa("RegExp"),doe=oa("Error"),GF=oa("Symbol"),qF=oa("ArrayBuffer");var hoe=oa("Function"),eNe=hU.document&&hU.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof eNe!="function"&&(hoe=function(t){return typeof t=="function"||!1});const na=hoe,poe=oa("Object");var goe=KDe&&poe(new DataView(new ArrayBuffer(8))),YF=typeof Map<"u"&&poe(new Map),tNe=oa("DataView");function nNe(t){return t!=null&&na(t.getInt8)&&qF(t.buffer)}const g2=goe?nNe:tNe,vh=XDe||oa("Array");function yh(t,e){return t!=null&&YDe.call(t,e)}var lO=oa("Arguments");(function(){lO(arguments)||(lO=function(t){return yh(t,"callee")})})();const h3=lO;function moe(t){return!GF(t)&&ZDe(t)&&!isNaN(parseFloat(t))}function KF(t){return WF(t)&&JDe(t)}function XF(t){return function(){return t}}function voe(t){return function(e){var n=t(e);return typeof n=="number"&&n>=0&&n<=QDe}}function yoe(t){return function(e){return e==null?void 0:e[t]}}const gC=yoe("byteLength"),rNe=voe(gC);var iNe=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function oNe(t){return vU?vU(t)&&!g2(t):rNe(t)&&iNe.test(p2.call(t))}const JF=aoe?oNe:XF(!1),ps=yoe("length");function aNe(t){for(var e={},n=t.length,r=0;r<n;++r)e[t[r]]=!0;return{contains:function(i){return e[i]===!0},push:function(i){return e[i]=!0,t.push(i)}}}function boe(t,e){e=aNe(e);var n=yU.length,r=t.constructor,i=na(r)&&r.prototype||jF,o="constructor";for(yh(t,o)&&!e.contains(o)&&e.push(o);n--;)o=yU[n],o in t&&t[o]!==i[o]&&!e.contains(o)&&e.push(o)}function eo(t){if(!mh(t))return[];if(gU)return gU(t);var e=[];for(var n in t)yh(t,n)&&e.push(n);return soe&&boe(t,e),e}function Soe(t){if(t==null)return!0;var e=ps(t);return typeof e=="number"&&(vh(t)||d3(t)||h3(t))?e===0:ps(eo(t))===0}function ZF(t,e){var n=eo(e),r=n.length;if(t==null)return!r;for(var i=Object(t),o=0;o<r;o++){var a=n[o];if(e[a]!==i[a]||!(a in i))return!1}return!0}function fr(t){if(t instanceof fr)return t;if(!(this instanceof fr))return new fr(t);this._wrapped=t}fr.VERSION=BF;fr.prototype.value=function(){return this._wrapped};fr.prototype.valueOf=fr.prototype.toJSON=fr.prototype.value;fr.prototype.toString=function(){return String(this._wrapped)};function bU(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,gC(t))}var SU="[object DataView]";function cO(t,e,n,r){if(t===e)return t!==0||1/t===1/e;if(t==null||e==null)return!1;if(t!==t)return e!==e;var i=typeof t;return i!=="function"&&i!=="object"&&typeof e!="object"?!1:_oe(t,e,n,r)}function _oe(t,e,n,r){t instanceof fr&&(t=t._wrapped),e instanceof fr&&(e=e._wrapped);var i=p2.call(t);if(i!==p2.call(e))return!1;if(goe&&i=="[object Object]"&&g2(t)){if(!g2(e))return!1;i=SU}switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:+t==0?1/+t===1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return pU.valueOf.call(t)===pU.valueOf.call(e);case"[object ArrayBuffer]":case SU:return _oe(bU(t),bU(e),n,r)}var o=i==="[object Array]";if(!o&&JF(t)){var a=gC(t);if(a!==gC(e))return!1;if(t.buffer===e.buffer&&t.byteOffset===e.byteOffset)return!0;o=!0}if(!o){if(typeof t!="object"||typeof e!="object")return!1;var s=t.constructor,l=e.constructor;if(s!==l&&!(na(s)&&s instanceof s&&na(l)&&l instanceof l)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],r=r||[];for(var c=n.length;c--;)if(n[c]===t)return r[c]===e;if(n.push(t),r.push(e),o){if(c=t.length,c!==e.length)return!1;for(;c--;)if(!cO(t[c],e[c],n,r))return!1}else{var u=eo(t),f;if(c=u.length,eo(e).length!==c)return!1;for(;c--;)if(f=u[c],!(yh(e,f)&&cO(t[f],e[f],n,r)))return!1}return n.pop(),r.pop(),!0}function woe(t,e){return cO(t,e)}function B0(t){if(!mh(t))return[];var e=[];for(var n in t)e.push(n);return soe&&boe(t,e),e}function QF(t){var e=ps(t);return function(n){if(n==null)return!1;var r=B0(n);if(ps(r))return!1;for(var i=0;i<e;i++)if(!na(n[t[i]]))return!1;return t!==Coe||!na(n[eL])}}var eL="forEach",koe="has",tL=["clear","delete"],xoe=["get",koe,"set"],sNe=tL.concat(eL,xoe),Coe=tL.concat(xoe),lNe=["add"].concat(tL,eL,koe);const Toe=YF?QF(sNe):oa("Map"),Aoe=YF?QF(Coe):oa("WeakMap"),Poe=YF?QF(lNe):oa("Set"),Eoe=oa("WeakSet");function Xg(t){for(var e=eo(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r}function Ooe(t){for(var e=eo(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r}function nL(t){for(var e={},n=eo(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e}function m2(t){var e=[];for(var n in t)na(t[n])&&e.push(n);return e.sort()}function rL(t,e){return function(n){var r=arguments.length;if(e&&(n=Object(n)),r<2||n==null)return n;for(var i=1;i<r;i++)for(var o=arguments[i],a=t(o),s=a.length,l=0;l<s;l++){var c=a[l];(!e||n[c]===void 0)&&(n[c]=o[c])}return n}}const iL=rL(B0),g0=rL(eo),oL=rL(B0,!0);function cNe(){return function(){}}function Ioe(t){if(!mh(t))return{};if(mU)return mU(t);var e=cNe();e.prototype=t;var n=new e;return e.prototype=null,n}function $oe(t,e){var n=Ioe(t);return e&&g0(n,e),n}function Foe(t){return mh(t)?vh(t)?t.slice():iL({},t):t}function Loe(t,e){return e(t),t}function aL(t){return vh(t)?t:[t]}fr.toPath=aL;function kS(t){return fr.toPath(t)}function sL(t,e){for(var n=e.length,r=0;r<n;r++){if(t==null)return;t=t[e[r]]}return n?t:void 0}function lL(t,e,n){var r=sL(t,kS(e));return HF(r)?n:r}function Doe(t,e){e=kS(e);for(var n=e.length,r=0;r<n;r++){var i=e[r];if(!yh(t,i))return!1;t=t[i]}return!!n}function p3(t){return t}function Ig(t){return t=g0({},t),function(e){return ZF(e,t)}}function g3(t){return t=kS(t),function(e){return sL(e,t)}}function xS(t,e,n){if(e===void 0)return t;switch(n??3){case 1:return function(r){return t.call(e,r)};case 3:return function(r,i,o){return t.call(e,r,i,o)};case 4:return function(r,i,o,a){return t.call(e,r,i,o,a)}}return function(){return t.apply(e,arguments)}}function Noe(t,e,n){return t==null?p3:na(t)?xS(t,e,n):mh(t)&&!vh(t)?Ig(t):g3(t)}function m3(t,e){return Noe(t,e,1/0)}fr.iteratee=m3;function vs(t,e,n){return fr.iteratee!==m3?fr.iteratee(t,e):Noe(t,e,n)}function Moe(t,e,n){e=vs(e,n);for(var r=eo(t),i=r.length,o={},a=0;a<i;a++){var s=r[a];o[s]=e(t[s],s,t)}return o}function cL(){}function Roe(t){return t==null?cL:function(e){return lL(t,e)}}function zoe(t,e,n){var r=Array(Math.max(0,t));e=xS(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r}function mC(t,e){return e==null&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}const m0=Date.now||function(){return new Date().getTime()};function Voe(t){var e=function(o){return t[o]},n="(?:"+eo(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(o){return o=o==null?"":""+o,r.test(o)?o.replace(i,e):o}}const Boe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},joe=Voe(Boe),uNe=nL(Boe),Hoe=Voe(uNe),Uoe=fr.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var k7=/(.)^/,fNe={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},dNe=/\\|'|\r|\n|\u2028|\u2029/g;function hNe(t){return"\\"+fNe[t]}var pNe=/^\s*(\w|\$)+\s*$/;function Woe(t,e,n){!e&&n&&(e=n),e=oL({},e,fr.templateSettings);var r=RegExp([(e.escape||k7).source,(e.interpolate||k7).source,(e.evaluate||k7).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(r,function(c,u,f,d,h){return o+=t.slice(i,h).replace(dNe,hNe),i=h+c.length,u?o+=`'+
((__t=(`+u+`))==null?'':_.escape(__t))+
'`:f?o+=`'+
((__t=(`+f+`))==null?'':__t)+
'`:d&&(o+=`';
`+d+`
__p+='`),c}),o+=`';
`;var a=e.variable;if(a){if(!pNe.test(a))throw new Error("variable is not a bare identifier: "+a)}else o=`with(obj||{}){
`+o+`}
`,a="obj";o=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+o+`return __p;
`;var s;try{s=new Function(a,"_",o)}catch(c){throw c.source=o,c}var l=function(c){return s.call(this,c,fr)};return l.source="function("+a+`){
`+o+"}",l}function Goe(t,e,n){e=kS(e);var r=e.length;if(!r)return na(n)?n.call(t):n;for(var i=0;i<r;i++){var o=t==null?void 0:t[e[i]];o===void 0&&(o=n,i=r),t=na(o)?o.call(t):o}return t}var gNe=0;function qoe(t){var e=++gNe+"";return t?t+e:e}function Yoe(t){var e=fr(t);return e._chain=!0,e}function Koe(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=Ioe(t.prototype),a=t.apply(o,i);return mh(a)?a:o}var Jg=Pa(function(t,e){var n=Jg.placeholder,r=function(){for(var i=0,o=e.length,a=Array(o),s=0;s<o;s++)a[s]=e[s]===n?arguments[i++]:e[s];for(;i<arguments.length;)a.push(arguments[i++]);return Koe(t,r,this,this,a)};return r});Jg.placeholder=fr;const uL=Pa(function(t,e,n){if(!na(t))throw new TypeError("Bind must be called on a function");var r=Pa(function(i){return Koe(t,r,e,this,n.concat(i))});return r}),Ws=voe(ps);function Zg(t,e,n,r){if(r=r||[],!e&&e!==0)e=1/0;else if(e<=0)return r.concat(t);for(var i=r.length,o=0,a=ps(t);o<a;o++){var s=t[o];if(Ws(s)&&(vh(s)||h3(s)))if(e>1)Zg(s,e-1,n,r),i=r.length;else for(var l=0,c=s.length;l<c;)r[i++]=s[l++];else n||(r[i++]=s)}return r}const Xoe=Pa(function(t,e){e=Zg(e,!1,!1);var n=e.length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=e[n];t[r]=uL(t[r],t)}return t});function Joe(t,e){var n=function(r){var i=n.cache,o=""+(e?e.apply(this,arguments):r);return yh(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n}const fL=Pa(function(t,e,n){return setTimeout(function(){return t.apply(null,n)},e)}),Zoe=Jg(fL,fr,1);function Qoe(t,e,n){var r,i,o,a,s=0;n||(n={});var l=function(){s=n.leading===!1?0:m0(),r=null,a=t.apply(i,o),r||(i=o=null)},c=function(){var u=m0();!s&&n.leading===!1&&(s=u);var f=e-(u-s);return i=this,o=arguments,f<=0||f>e?(r&&(clearTimeout(r),r=null),s=u,a=t.apply(i,o),r||(i=o=null)):!r&&n.trailing!==!1&&(r=setTimeout(l,f)),a};return c.cancel=function(){clearTimeout(r),s=0,r=i=o=null},c}function eae(t,e,n){var r,i,o,a,s,l=function(){var u=m0()-i;e>u?r=setTimeout(l,e-u):(r=null,n||(a=t.apply(s,o)),r||(o=s=null))},c=Pa(function(u){return s=this,o=u,i=m0(),r||(r=setTimeout(l,e),n&&(a=t.apply(s,o))),a});return c.cancel=function(){clearTimeout(r),r=o=s=null},c}function tae(t,e){return Jg(e,t)}function v3(t){return function(){return!t.apply(this,arguments)}}function nae(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}}function rae(t,e){return function(){if(--t<1)return e.apply(this,arguments)}}function dL(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}}const iae=Jg(dL,2);function hL(t,e,n){e=vs(e,n);for(var r=eo(t),i,o=0,a=r.length;o<a;o++)if(i=r[o],e(t[i],i,t))return i}function oae(t){return function(e,n,r){n=vs(n,r);for(var i=ps(e),o=t>0?0:i-1;o>=0&&o<i;o+=t)if(n(e[o],o,e))return o;return-1}}const y3=oae(1),pL=oae(-1);function gL(t,e,n,r){n=vs(n,r,1);for(var i=n(e),o=0,a=ps(t);o<a;){var s=Math.floor((o+a)/2);n(t[s])<i?o=s+1:a=s}return o}function aae(t,e,n){return function(r,i,o){var a=0,s=ps(r);if(typeof o=="number")t>0?a=o>=0?o:Math.max(o+s,a):s=o>=0?Math.min(o+1,s):o+s+1;else if(n&&o&&s)return o=n(r,i),r[o]===i?o:-1;if(i!==i)return o=e(wS.call(r,a,s),KF),o>=0?o+a:-1;for(o=t>0?a:s-1;o>=0&&o<s;o+=t)if(r[o]===i)return o;return-1}}const mL=aae(1,y3,gL),sae=aae(-1,pL);function v2(t,e,n){var r=Ws(t)?y3:hL,i=r(t,e,n);if(i!==void 0&&i!==-1)return t[i]}function lae(t,e){return v2(t,Ig(e))}function gc(t,e,n){e=xS(e,n);var r,i;if(Ws(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var o=eo(t);for(r=0,i=o.length;r<i;r++)e(t[o[r]],o[r],t)}return t}function Pf(t,e,n){e=vs(e,n);for(var r=!Ws(t)&&eo(t),i=(r||t).length,o=Array(i),a=0;a<i;a++){var s=r?r[a]:a;o[a]=e(t[s],s,t)}return o}function cae(t){var e=function(n,r,i,o){var a=!Ws(n)&&eo(n),s=(a||n).length,l=t>0?0:s-1;for(o||(i=n[a?a[l]:l],l+=t);l>=0&&l<s;l+=t){var c=a?a[l]:l;i=r(i,n[c],c,n)}return i};return function(n,r,i,o){var a=arguments.length>=3;return e(n,xS(r,o,4),i,a)}}const Vv=cae(1),vC=cae(-1);function uh(t,e,n){var r=[];return e=vs(e,n),gc(t,function(i,o,a){e(i,o,a)&&r.push(i)}),r}function uae(t,e,n){return uh(t,v3(vs(e)),n)}function yC(t,e,n){e=vs(e,n);for(var r=!Ws(t)&&eo(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(!e(t[a],a,t))return!1}return!0}function bC(t,e,n){e=vs(e,n);for(var r=!Ws(t)&&eo(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(e(t[a],a,t))return!0}return!1}function El(t,e,n,r){return Ws(t)||(t=Xg(t)),(typeof n!="number"||r)&&(n=0),mL(t,e,n)>=0}const fae=Pa(function(t,e,n){var r,i;return na(e)?i=e:(e=kS(e),r=e.slice(0,-1),e=e[e.length-1]),Pf(t,function(o){var a=i;if(!a){if(r&&r.length&&(o=sL(o,r)),o==null)return;a=o[e]}return a==null?a:a.apply(o,n)})});function b3(t,e){return Pf(t,g3(e))}function dae(t,e){return uh(t,Ig(e))}function vL(t,e,n){var r=-1/0,i=-1/0,o,a;if(e==null||typeof e=="number"&&typeof t[0]!="object"&&t!=null){t=Ws(t)?t:Xg(t);for(var s=0,l=t.length;s<l;s++)o=t[s],o!=null&&o>r&&(r=o)}else e=vs(e,n),gc(t,function(c,u,f){a=e(c,u,f),(a>i||a===-1/0&&r===-1/0)&&(r=c,i=a)});return r}function hae(t,e,n){var r=1/0,i=1/0,o,a;if(e==null||typeof e=="number"&&typeof t[0]!="object"&&t!=null){t=Ws(t)?t:Xg(t);for(var s=0,l=t.length;s<l;s++)o=t[s],o!=null&&o<r&&(r=o)}else e=vs(e,n),gc(t,function(c,u,f){a=e(c,u,f),(a<i||a===1/0&&r===1/0)&&(r=c,i=a)});return r}var mNe=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function yL(t){return t?vh(t)?wS.call(t):d3(t)?t.match(mNe):Ws(t)?Pf(t,p3):Xg(t):[]}function bL(t,e,n){if(e==null||n)return Ws(t)||(t=Xg(t)),t[mC(t.length-1)];var r=yL(t),i=ps(r);e=Math.max(Math.min(e,i),0);for(var o=i-1,a=0;a<e;a++){var s=mC(a,o),l=r[a];r[a]=r[s],r[s]=l}return r.slice(0,e)}function pae(t){return bL(t,1/0)}function gae(t,e,n){var r=0;return e=vs(e,n),b3(Pf(t,function(i,o,a){return{value:i,index:r++,criteria:e(i,o,a)}}).sort(function(i,o){var a=i.criteria,s=o.criteria;if(a!==s){if(a>s||a===void 0)return 1;if(a<s||s===void 0)return-1}return i.index-o.index}),"value")}function S3(t,e){return function(n,r,i){var o=e?[[],[]]:{};return r=vs(r,i),gc(n,function(a,s){var l=r(a,s,n);t(o,a,l)}),o}}const mae=S3(function(t,e,n){yh(t,n)?t[n].push(e):t[n]=[e]}),vae=S3(function(t,e,n){t[n]=e}),yae=S3(function(t,e,n){yh(t,n)?t[n]++:t[n]=1}),bae=S3(function(t,e,n){t[n?0:1].push(e)},!0);function Sae(t){return t==null?0:Ws(t)?t.length:eo(t).length}function vNe(t,e,n){return e in n}const SL=Pa(function(t,e){var n={},r=e[0];if(t==null)return n;na(r)?(e.length>1&&(r=xS(r,e[1])),e=B0(t)):(r=vNe,e=Zg(e,!1,!1),t=Object(t));for(var i=0,o=e.length;i<o;i++){var a=e[i],s=t[a];r(s,a,t)&&(n[a]=s)}return n}),_ae=Pa(function(t,e){var n=e[0],r;return na(n)?(n=v3(n),e.length>1&&(r=e[1])):(e=Pf(Zg(e,!1,!1),String),n=function(i,o){return!El(e,o)}),SL(t,n,r)});function _L(t,e,n){return wS.call(t,0,Math.max(0,t.length-(e==null||n?1:e)))}function Bv(t,e,n){return t==null||t.length<1?e==null||n?void 0:[]:e==null||n?t[0]:_L(t,t.length-e)}function fg(t,e,n){return wS.call(t,e==null||n?1:e)}function wae(t,e,n){return t==null||t.length<1?e==null||n?void 0:[]:e==null||n?t[t.length-1]:fg(t,Math.max(0,t.length-e))}function kae(t){return uh(t,Boolean)}function xae(t,e){return Zg(t,e,!1)}const wL=Pa(function(t,e){return e=Zg(e,!0,!0),uh(t,function(n){return!El(e,n)})}),Cae=Pa(function(t,e){return wL(t,e)});function y2(t,e,n,r){UF(e)||(r=n,n=e,e=!1),n!=null&&(n=vs(n,r));for(var i=[],o=[],a=0,s=ps(t);a<s;a++){var l=t[a],c=n?n(l,a,t):l;e&&!n?((!a||o!==c)&&i.push(l),o=c):n?El(o,c)||(o.push(c),i.push(l)):El(i,l)||i.push(l)}return i}const Tae=Pa(function(t){return y2(Zg(t,!0,!0))});function Aae(t){for(var e=[],n=arguments.length,r=0,i=ps(t);r<i;r++){var o=t[r];if(!El(e,o)){var a;for(a=1;a<n&&El(arguments[a],o);a++);a===n&&e.push(o)}}return e}function b2(t){for(var e=t&&vL(t,ps).length||0,n=Array(e),r=0;r<e;r++)n[r]=b3(t,r);return n}const Pae=Pa(b2);function Eae(t,e){for(var n={},r=0,i=ps(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n}function Oae(t,e,n){e==null&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;o<r;o++,t+=n)i[o]=t;return i}function Iae(t,e){if(e==null||e<1)return[];for(var n=[],r=0,i=t.length;r<i;)n.push(wS.call(t,r,r+=e));return n}function kL(t,e){return t._chain?fr(e).chain():e}function xL(t){return gc(m2(t),function(e){var n=fr[e]=t[e];fr.prototype[e]=function(){var r=[this._wrapped];return qDe.apply(r,arguments),kL(this,n.apply(fr,r))}}),fr}gc(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=f3[t];fr.prototype[t]=function(){var n=this._wrapped;return n!=null&&(e.apply(n,arguments),(t==="shift"||t==="splice")&&n.length===0&&delete n[0]),kL(this,n)}});gc(["concat","join","slice"],function(t){var e=f3[t];fr.prototype[t]=function(){var n=this._wrapped;return n!=null&&(n=e.apply(n,arguments)),kL(this,n)}});const yNe=Object.freeze(Object.defineProperty({__proto__:null,VERSION:BF,after:rae,all:yC,allKeys:B0,any:bC,assign:g0,before:dL,bind:uL,bindAll:Xoe,chain:Yoe,chunk:Iae,clone:Foe,collect:Pf,compact:kae,compose:nae,constant:XF,contains:El,countBy:yae,create:$oe,debounce:eae,default:fr,defaults:oL,defer:Zoe,delay:fL,detect:v2,difference:wL,drop:fg,each:gc,escape:joe,every:yC,extend:iL,extendOwn:g0,filter:uh,find:v2,findIndex:y3,findKey:hL,findLastIndex:pL,findWhere:lae,first:Bv,flatten:xae,foldl:Vv,foldr:vC,forEach:gc,functions:m2,get:lL,groupBy:mae,has:Doe,head:Bv,identity:p3,include:El,includes:El,indexBy:vae,indexOf:mL,initial:_L,inject:Vv,intersection:Aae,invert:nL,invoke:fae,isArguments:h3,isArray:vh,isArrayBuffer:qF,isBoolean:UF,isDataView:g2,isDate:uoe,isElement:coe,isEmpty:Soe,isEqual:woe,isError:doe,isFinite:moe,isFunction:na,isMap:Toe,isMatch:ZF,isNaN:KF,isNull:loe,isNumber:WF,isObject:mh,isRegExp:foe,isSet:Poe,isString:d3,isSymbol:GF,isTypedArray:JF,isUndefined:HF,isWeakMap:Aoe,isWeakSet:Eoe,iteratee:m3,keys:eo,last:wae,lastIndexOf:sae,map:Pf,mapObject:Moe,matcher:Ig,matches:Ig,max:vL,memoize:Joe,methods:m2,min:hae,mixin:xL,negate:v3,noop:cL,now:m0,object:Eae,omit:_ae,once:iae,pairs:Ooe,partial:Jg,partition:bae,pick:SL,pluck:b3,property:g3,propertyOf:Roe,random:mC,range:Oae,reduce:Vv,reduceRight:vC,reject:uae,rest:fg,restArguments:Pa,result:Goe,sample:bL,select:uh,shuffle:pae,size:Sae,some:bC,sortBy:gae,sortedIndex:gL,tail:fg,take:Bv,tap:Loe,template:Woe,templateSettings:Uoe,throttle:Qoe,times:zoe,toArray:yL,toPath:aL,transpose:b2,unescape:Hoe,union:Tae,uniq:y2,unique:y2,uniqueId:qoe,unzip:b2,values:Xg,where:dae,without:Cae,wrap:tae,zip:Pae},Symbol.toStringTag,{value:"Module"}));var uO=xL(yNe);uO._=uO;const bNe=Object.freeze(Object.defineProperty({__proto__:null,VERSION:BF,after:rae,all:yC,allKeys:B0,any:bC,assign:g0,before:dL,bind:uL,bindAll:Xoe,chain:Yoe,chunk:Iae,clone:Foe,collect:Pf,compact:kae,compose:nae,constant:XF,contains:El,countBy:yae,create:$oe,debounce:eae,default:uO,defaults:oL,defer:Zoe,delay:fL,detect:v2,difference:wL,drop:fg,each:gc,escape:joe,every:yC,extend:iL,extendOwn:g0,filter:uh,find:v2,findIndex:y3,findKey:hL,findLastIndex:pL,findWhere:lae,first:Bv,flatten:xae,foldl:Vv,foldr:vC,forEach:gc,functions:m2,get:lL,groupBy:mae,has:Doe,head:Bv,identity:p3,include:El,includes:El,indexBy:vae,indexOf:mL,initial:_L,inject:Vv,intersection:Aae,invert:nL,invoke:fae,isArguments:h3,isArray:vh,isArrayBuffer:qF,isBoolean:UF,isDataView:g2,isDate:uoe,isElement:coe,isEmpty:Soe,isEqual:woe,isError:doe,isFinite:moe,isFunction:na,isMap:Toe,isMatch:ZF,isNaN:KF,isNull:loe,isNumber:WF,isObject:mh,isRegExp:foe,isSet:Poe,isString:d3,isSymbol:GF,isTypedArray:JF,isUndefined:HF,isWeakMap:Aoe,isWeakSet:Eoe,iteratee:m3,keys:eo,last:wae,lastIndexOf:sae,map:Pf,mapObject:Moe,matcher:Ig,matches:Ig,max:vL,memoize:Joe,methods:m2,min:hae,mixin:xL,negate:v3,noop:cL,now:m0,object:Eae,omit:_ae,once:iae,pairs:Ooe,partial:Jg,partition:bae,pick:SL,pluck:b3,property:g3,propertyOf:Roe,random:mC,range:Oae,reduce:Vv,reduceRight:vC,reject:uae,rest:fg,restArguments:Pa,result:Goe,sample:bL,select:uh,shuffle:pae,size:Sae,some:bC,sortBy:gae,sortedIndex:gL,tail:fg,take:Bv,tap:Loe,template:Woe,templateSettings:Uoe,throttle:Qoe,times:zoe,toArray:yL,toPath:aL,transpose:b2,unescape:Hoe,union:Tae,uniq:y2,unique:y2,uniqueId:qoe,unzip:b2,values:Xg,where:dae,without:Cae,wrap:tae,zip:Pae},Symbol.toStringTag,{value:"Module"})),SNe=jre(bNe);var x7={exports:{}};/*!
 * jQuery JavaScript Library v3.6.4
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-03-08T15:28Z
 */var _U;function $ae(){return _U||(_U=1,function(t){(function(e,n){t.exports=e.document?n(e,!0):function(r){if(!r.document)throw new Error("jQuery requires a window with a document");return n(r)}})(typeof window<"u"?window:ui,function(e,n){var r=[],i=Object.getPrototypeOf,o=r.slice,a=r.flat?function(w){return r.flat.call(w)}:function(w){return r.concat.apply([],w)},s=r.push,l=r.indexOf,c={},u=c.toString,f=c.hasOwnProperty,d=f.toString,h=d.call(Object),g={},y=function(P){return typeof P=="function"&&typeof P.nodeType!="number"&&typeof P.item!="function"},S=function(P){return P!=null&&P===P.window},v=e.document,_={type:!0,src:!0,nonce:!0,noModule:!0};function x(w,P,$){$=$||v;var L,U,G=$.createElement("script");if(G.text=w,P)for(L in _)U=P[L]||P.getAttribute&&P.getAttribute(L),U&&G.setAttribute(L,U);$.head.appendChild(G).parentNode.removeChild(G)}function C(w){return w==null?w+"":typeof w=="object"||typeof w=="function"?c[u.call(w)]||"object":typeof w}var k="3.6.4",m=function(w,P){return new m.fn.init(w,P)};m.fn=m.prototype={jquery:k,constructor:m,length:0,toArray:function(){return o.call(this)},get:function(w){return w==null?o.call(this):w<0?this[w+this.length]:this[w]},pushStack:function(w){var P=m.merge(this.constructor(),w);return P.prevObject=this,P},each:function(w){return m.each(this,w)},map:function(w){return this.pushStack(m.map(this,function(P,$){return w.call(P,$,P)}))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(m.grep(this,function(w,P){return(P+1)%2}))},odd:function(){return this.pushStack(m.grep(this,function(w,P){return P%2}))},eq:function(w){var P=this.length,$=+w+(w<0?P:0);return this.pushStack($>=0&&$<P?[this[$]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:r.sort,splice:r.splice},m.extend=m.fn.extend=function(){var w,P,$,L,U,G,X=arguments[0]||{},me=1,de=arguments.length,Fe=!1;for(typeof X=="boolean"&&(Fe=X,X=arguments[me]||{},me++),typeof X!="object"&&!y(X)&&(X={}),me===de&&(X=this,me--);me<de;me++)if((w=arguments[me])!=null)for(P in w)L=w[P],!(P==="__proto__"||X===L)&&(Fe&&L&&(m.isPlainObject(L)||(U=Array.isArray(L)))?($=X[P],U&&!Array.isArray($)?G=[]:!U&&!m.isPlainObject($)?G={}:G=$,U=!1,X[P]=m.extend(Fe,G,L)):L!==void 0&&(X[P]=L));return X},m.extend({expando:"jQuery"+(k+Math.random()).replace(/\D/g,""),isReady:!0,error:function(w){throw new Error(w)},noop:function(){},isPlainObject:function(w){var P,$;return!w||u.call(w)!=="[object Object]"?!1:(P=i(w),P?($=f.call(P,"constructor")&&P.constructor,typeof $=="function"&&d.call($)===h):!0)},isEmptyObject:function(w){var P;for(P in w)return!1;return!0},globalEval:function(w,P,$){x(w,{nonce:P&&P.nonce},$)},each:function(w,P){var $,L=0;if(T(w))for($=w.length;L<$&&P.call(w[L],L,w[L])!==!1;L++);else for(L in w)if(P.call(w[L],L,w[L])===!1)break;return w},makeArray:function(w,P){var $=P||[];return w!=null&&(T(Object(w))?m.merge($,typeof w=="string"?[w]:w):s.call($,w)),$},inArray:function(w,P,$){return P==null?-1:l.call(P,w,$)},merge:function(w,P){for(var $=+P.length,L=0,U=w.length;L<$;L++)w[U++]=P[L];return w.length=U,w},grep:function(w,P,$){for(var L,U=[],G=0,X=w.length,me=!$;G<X;G++)L=!P(w[G],G),L!==me&&U.push(w[G]);return U},map:function(w,P,$){var L,U,G=0,X=[];if(T(w))for(L=w.length;G<L;G++)U=P(w[G],G,$),U!=null&&X.push(U);else for(G in w)U=P(w[G],G,$),U!=null&&X.push(U);return a(X)},guid:1,support:g}),typeof Symbol=="function"&&(m.fn[Symbol.iterator]=r[Symbol.iterator]),m.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(w,P){c["[object "+P+"]"]=P.toLowerCase()});function T(w){var P=!!w&&"length"in w&&w.length,$=C(w);return y(w)||S(w)?!1:$==="array"||P===0||typeof P=="number"&&P>0&&P-1 in w}var E=function(w){var P,$,L,U,G,X,me,de,Fe,Be,Ye,Ne,He,It,nn,vt,ti,ni,Cn,On="sizzle"+1*new Date,Jt=w.document,Io=0,In=0,Hr=Lo(),$h=Lo(),lm=Lo(),$o=Lo(),Xs=function(ee,pe){return ee===pe&&(Ye=!0),0},La={}.hasOwnProperty,Fo=[],Hl=Fo.pop,la=Fo.push,Js=Fo.push,cm=Fo.slice,Oc=function(ee,pe){for(var Te=0,qe=ee.length;Te<qe;Te++)if(ee[Te]===pe)return Te;return-1},hy="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Yn="[\\x20\\t\\r\\n\\f]",Ul="(?:\\\\[\\da-fA-F]{1,6}"+Yn+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",a_="\\["+Yn+"*("+Ul+")(?:"+Yn+"*([*^$|!~]?=)"+Yn+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+Ul+"))|)"+Yn+"*\\]",um=":("+Ul+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+a_+")*)|.*)\\)|)",ca=new RegExp(Yn+"+","g"),Vf=new RegExp("^"+Yn+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Yn+"+$","g"),Fh=new RegExp("^"+Yn+"*,"+Yn+"*"),py=new RegExp("^"+Yn+"*([>+~]|"+Yn+")"+Yn+"*"),s_=new RegExp(Yn+"|>"),yA=new RegExp(um),bA=new RegExp("^"+Ul+"$"),fm={ID:new RegExp("^#("+Ul+")"),CLASS:new RegExp("^\\.("+Ul+")"),TAG:new RegExp("^("+Ul+"|[*])"),ATTR:new RegExp("^"+a_),PSEUDO:new RegExp("^"+um),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Yn+"*(even|odd|(([+-]|)(\\d*)n|)"+Yn+"*(?:([+-]|)"+Yn+"*(\\d+)|))"+Yn+"*\\)|)","i"),bool:new RegExp("^(?:"+hy+")$","i"),needsContext:new RegExp("^"+Yn+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Yn+"*((?:-\\d)?\\d*)"+Yn+"*\\)|)(?=[^-]|$)","i")},SA=/HTML$/i,_A=/^(?:input|select|textarea|button)$/i,Bf=/^h\d$/i,Lh=/^[^{]+\{\s*\[native \w/,wA=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Dh=/[+~]/,Zs=new RegExp("\\\\[\\da-fA-F]{1,6}"+Yn+"?|\\\\([^\\r\\n\\f])","g"),io=function(ee,pe){var Te="0x"+ee.slice(1)-65536;return pe||(Te<0?String.fromCharCode(Te+65536):String.fromCharCode(Te>>10|55296,Te&1023|56320))},Nh=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,l_=function(ee,pe){return pe?ee==="\0"?"":ee.slice(0,-1)+"\\"+ee.charCodeAt(ee.length-1).toString(16)+" ":"\\"+ee},c_=function(){Ne()},kA=Zt(function(ee){return ee.disabled===!0&&ee.nodeName.toLowerCase()==="fieldset"},{dir:"parentNode",next:"legend"});try{Js.apply(Fo=cm.call(Jt.childNodes),Jt.childNodes),Fo[Jt.childNodes.length].nodeType}catch{Js={apply:Fo.length?function(pe,Te){la.apply(pe,cm.call(Te))}:function(pe,Te){for(var qe=pe.length,Ie=0;pe[qe++]=Te[Ie++];);pe.length=qe-1}}}function Kn(ee,pe,Te,qe){var Ie,ze,nt,st,ut,Vt,Lt,Ht=pe&&pe.ownerDocument,fn=pe?pe.nodeType:9;if(Te=Te||[],typeof ee!="string"||!ee||fn!==1&&fn!==9&&fn!==11)return Te;if(!qe&&(Ne(pe),pe=pe||He,nn)){if(fn!==11&&(ut=wA.exec(ee)))if(Ie=ut[1]){if(fn===9)if(nt=pe.getElementById(Ie)){if(nt.id===Ie)return Te.push(nt),Te}else return Te;else if(Ht&&(nt=Ht.getElementById(Ie))&&Cn(pe,nt)&&nt.id===Ie)return Te.push(nt),Te}else{if(ut[2])return Js.apply(Te,pe.getElementsByTagName(ee)),Te;if((Ie=ut[3])&&$.getElementsByClassName&&pe.getElementsByClassName)return Js.apply(Te,pe.getElementsByClassName(Ie)),Te}if($.qsa&&!$o[ee+" "]&&(!vt||!vt.test(ee))&&(fn!==1||pe.nodeName.toLowerCase()!=="object")){if(Lt=ee,Ht=pe,fn===1&&(s_.test(ee)||py.test(ee))){for(Ht=Dh.test(ee)&&We(pe.parentNode)||pe,(Ht!==pe||!$.scope)&&((st=pe.getAttribute("id"))?st=st.replace(Nh,l_):pe.setAttribute("id",st=On)),Vt=X(ee),ze=Vt.length;ze--;)Vt[ze]=(st?"#"+st:":scope")+" "+ht(Vt[ze]);Lt=Vt.join(",")}try{return Js.apply(Te,Ht.querySelectorAll(Lt)),Te}catch{$o(ee,!0)}finally{st===On&&pe.removeAttribute("id")}}}return de(ee.replace(Vf,"$1"),pe,Te,qe)}function Lo(){var ee=[];function pe(Te,qe){return ee.push(Te+" ")>L.cacheLength&&delete pe[ee.shift()],pe[Te+" "]=qe}return pe}function Da(ee){return ee[On]=!0,ee}function Na(ee){var pe=He.createElement("fieldset");try{return!!ee(pe)}catch{return!1}finally{pe.parentNode&&pe.parentNode.removeChild(pe),pe=null}}function gy(ee,pe){for(var Te=ee.split("|"),qe=Te.length;qe--;)L.attrHandle[Te[qe]]=pe}function u_(ee,pe){var Te=pe&&ee,qe=Te&&ee.nodeType===1&&pe.nodeType===1&&ee.sourceIndex-pe.sourceIndex;if(qe)return qe;if(Te){for(;Te=Te.nextSibling;)if(Te===pe)return-1}return ee?1:-1}function xA(ee){return function(pe){var Te=pe.nodeName.toLowerCase();return Te==="input"&&pe.type===ee}}function CA(ee){return function(pe){var Te=pe.nodeName.toLowerCase();return(Te==="input"||Te==="button")&&pe.type===ee}}function Iu(ee){return function(pe){return"form"in pe?pe.parentNode&&pe.disabled===!1?"label"in pe?"label"in pe.parentNode?pe.parentNode.disabled===ee:pe.disabled===ee:pe.isDisabled===ee||pe.isDisabled!==!ee&&kA(pe)===ee:pe.disabled===ee:"label"in pe?pe.disabled===ee:!1}}function Ee(ee){return Da(function(pe){return pe=+pe,Da(function(Te,qe){for(var Ie,ze=ee([],Te.length,pe),nt=ze.length;nt--;)Te[Ie=ze[nt]]&&(Te[Ie]=!(qe[Ie]=Te[Ie]))})})}function We(ee){return ee&&typeof ee.getElementsByTagName<"u"&&ee}$=Kn.support={},G=Kn.isXML=function(ee){var pe=ee&&ee.namespaceURI,Te=ee&&(ee.ownerDocument||ee).documentElement;return!SA.test(pe||Te&&Te.nodeName||"HTML")},Ne=Kn.setDocument=function(ee){var pe,Te,qe=ee?ee.ownerDocument||ee:Jt;return qe==He||qe.nodeType!==9||!qe.documentElement||(He=qe,It=He.documentElement,nn=!G(He),Jt!=He&&(Te=He.defaultView)&&Te.top!==Te&&(Te.addEventListener?Te.addEventListener("unload",c_,!1):Te.attachEvent&&Te.attachEvent("onunload",c_)),$.scope=Na(function(Ie){return It.appendChild(Ie).appendChild(He.createElement("div")),typeof Ie.querySelectorAll<"u"&&!Ie.querySelectorAll(":scope fieldset div").length}),$.cssHas=Na(function(){try{return He.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),$.attributes=Na(function(Ie){return Ie.className="i",!Ie.getAttribute("className")}),$.getElementsByTagName=Na(function(Ie){return Ie.appendChild(He.createComment("")),!Ie.getElementsByTagName("*").length}),$.getElementsByClassName=Lh.test(He.getElementsByClassName),$.getById=Na(function(Ie){return It.appendChild(Ie).id=On,!He.getElementsByName||!He.getElementsByName(On).length}),$.getById?(L.filter.ID=function(Ie){var ze=Ie.replace(Zs,io);return function(nt){return nt.getAttribute("id")===ze}},L.find.ID=function(Ie,ze){if(typeof ze.getElementById<"u"&&nn){var nt=ze.getElementById(Ie);return nt?[nt]:[]}}):(L.filter.ID=function(Ie){var ze=Ie.replace(Zs,io);return function(nt){var st=typeof nt.getAttributeNode<"u"&&nt.getAttributeNode("id");return st&&st.value===ze}},L.find.ID=function(Ie,ze){if(typeof ze.getElementById<"u"&&nn){var nt,st,ut,Vt=ze.getElementById(Ie);if(Vt){if(nt=Vt.getAttributeNode("id"),nt&&nt.value===Ie)return[Vt];for(ut=ze.getElementsByName(Ie),st=0;Vt=ut[st++];)if(nt=Vt.getAttributeNode("id"),nt&&nt.value===Ie)return[Vt]}return[]}}),L.find.TAG=$.getElementsByTagName?function(Ie,ze){if(typeof ze.getElementsByTagName<"u")return ze.getElementsByTagName(Ie);if($.qsa)return ze.querySelectorAll(Ie)}:function(Ie,ze){var nt,st=[],ut=0,Vt=ze.getElementsByTagName(Ie);if(Ie==="*"){for(;nt=Vt[ut++];)nt.nodeType===1&&st.push(nt);return st}return Vt},L.find.CLASS=$.getElementsByClassName&&function(Ie,ze){if(typeof ze.getElementsByClassName<"u"&&nn)return ze.getElementsByClassName(Ie)},ti=[],vt=[],($.qsa=Lh.test(He.querySelectorAll))&&(Na(function(Ie){var ze;It.appendChild(Ie).innerHTML="<a id='"+On+"'></a><select id='"+On+"-\r\\' msallowcapture=''><option selected=''></option></select>",Ie.querySelectorAll("[msallowcapture^='']").length&&vt.push("[*^$]="+Yn+`*(?:''|"")`),Ie.querySelectorAll("[selected]").length||vt.push("\\["+Yn+"*(?:value|"+hy+")"),Ie.querySelectorAll("[id~="+On+"-]").length||vt.push("~="),ze=He.createElement("input"),ze.setAttribute("name",""),Ie.appendChild(ze),Ie.querySelectorAll("[name='']").length||vt.push("\\["+Yn+"*name"+Yn+"*="+Yn+`*(?:''|"")`),Ie.querySelectorAll(":checked").length||vt.push(":checked"),Ie.querySelectorAll("a#"+On+"+*").length||vt.push(".#.+[+~]"),Ie.querySelectorAll("\\\f"),vt.push("[\\r\\n\\f]")}),Na(function(Ie){Ie.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var ze=He.createElement("input");ze.setAttribute("type","hidden"),Ie.appendChild(ze).setAttribute("name","D"),Ie.querySelectorAll("[name=d]").length&&vt.push("name"+Yn+"*[*^$|!~]?="),Ie.querySelectorAll(":enabled").length!==2&&vt.push(":enabled",":disabled"),It.appendChild(Ie).disabled=!0,Ie.querySelectorAll(":disabled").length!==2&&vt.push(":enabled",":disabled"),Ie.querySelectorAll("*,:x"),vt.push(",.*:")})),($.matchesSelector=Lh.test(ni=It.matches||It.webkitMatchesSelector||It.mozMatchesSelector||It.oMatchesSelector||It.msMatchesSelector))&&Na(function(Ie){$.disconnectedMatch=ni.call(Ie,"*"),ni.call(Ie,"[s!='']:x"),ti.push("!=",um)}),$.cssHas||vt.push(":has"),vt=vt.length&&new RegExp(vt.join("|")),ti=ti.length&&new RegExp(ti.join("|")),pe=Lh.test(It.compareDocumentPosition),Cn=pe||Lh.test(It.contains)?function(Ie,ze){var nt=Ie.nodeType===9&&Ie.documentElement||Ie,st=ze&&ze.parentNode;return Ie===st||!!(st&&st.nodeType===1&&(nt.contains?nt.contains(st):Ie.compareDocumentPosition&&Ie.compareDocumentPosition(st)&16))}:function(Ie,ze){if(ze){for(;ze=ze.parentNode;)if(ze===Ie)return!0}return!1},Xs=pe?function(Ie,ze){if(Ie===ze)return Ye=!0,0;var nt=!Ie.compareDocumentPosition-!ze.compareDocumentPosition;return nt||(nt=(Ie.ownerDocument||Ie)==(ze.ownerDocument||ze)?Ie.compareDocumentPosition(ze):1,nt&1||!$.sortDetached&&ze.compareDocumentPosition(Ie)===nt?Ie==He||Ie.ownerDocument==Jt&&Cn(Jt,Ie)?-1:ze==He||ze.ownerDocument==Jt&&Cn(Jt,ze)?1:Be?Oc(Be,Ie)-Oc(Be,ze):0:nt&4?-1:1)}:function(Ie,ze){if(Ie===ze)return Ye=!0,0;var nt,st=0,ut=Ie.parentNode,Vt=ze.parentNode,Lt=[Ie],Ht=[ze];if(!ut||!Vt)return Ie==He?-1:ze==He?1:ut?-1:Vt?1:Be?Oc(Be,Ie)-Oc(Be,ze):0;if(ut===Vt)return u_(Ie,ze);for(nt=Ie;nt=nt.parentNode;)Lt.unshift(nt);for(nt=ze;nt=nt.parentNode;)Ht.unshift(nt);for(;Lt[st]===Ht[st];)st++;return st?u_(Lt[st],Ht[st]):Lt[st]==Jt?-1:Ht[st]==Jt?1:0}),He},Kn.matches=function(ee,pe){return Kn(ee,null,null,pe)},Kn.matchesSelector=function(ee,pe){if(Ne(ee),$.matchesSelector&&nn&&!$o[pe+" "]&&(!ti||!ti.test(pe))&&(!vt||!vt.test(pe)))try{var Te=ni.call(ee,pe);if(Te||$.disconnectedMatch||ee.document&&ee.document.nodeType!==11)return Te}catch{$o(pe,!0)}return Kn(pe,He,null,[ee]).length>0},Kn.contains=function(ee,pe){return(ee.ownerDocument||ee)!=He&&Ne(ee),Cn(ee,pe)},Kn.attr=function(ee,pe){(ee.ownerDocument||ee)!=He&&Ne(ee);var Te=L.attrHandle[pe.toLowerCase()],qe=Te&&La.call(L.attrHandle,pe.toLowerCase())?Te(ee,pe,!nn):void 0;return qe!==void 0?qe:$.attributes||!nn?ee.getAttribute(pe):(qe=ee.getAttributeNode(pe))&&qe.specified?qe.value:null},Kn.escape=function(ee){return(ee+"").replace(Nh,l_)},Kn.error=function(ee){throw new Error("Syntax error, unrecognized expression: "+ee)},Kn.uniqueSort=function(ee){var pe,Te=[],qe=0,Ie=0;if(Ye=!$.detectDuplicates,Be=!$.sortStable&&ee.slice(0),ee.sort(Xs),Ye){for(;pe=ee[Ie++];)pe===ee[Ie]&&(qe=Te.push(Ie));for(;qe--;)ee.splice(Te[qe],1)}return Be=null,ee},U=Kn.getText=function(ee){var pe,Te="",qe=0,Ie=ee.nodeType;if(Ie){if(Ie===1||Ie===9||Ie===11){if(typeof ee.textContent=="string")return ee.textContent;for(ee=ee.firstChild;ee;ee=ee.nextSibling)Te+=U(ee)}else if(Ie===3||Ie===4)return ee.nodeValue}else for(;pe=ee[qe++];)Te+=U(pe);return Te},L=Kn.selectors={cacheLength:50,createPseudo:Da,match:fm,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(ee){return ee[1]=ee[1].replace(Zs,io),ee[3]=(ee[3]||ee[4]||ee[5]||"").replace(Zs,io),ee[2]==="~="&&(ee[3]=" "+ee[3]+" "),ee.slice(0,4)},CHILD:function(ee){return ee[1]=ee[1].toLowerCase(),ee[1].slice(0,3)==="nth"?(ee[3]||Kn.error(ee[0]),ee[4]=+(ee[4]?ee[5]+(ee[6]||1):2*(ee[3]==="even"||ee[3]==="odd")),ee[5]=+(ee[7]+ee[8]||ee[3]==="odd")):ee[3]&&Kn.error(ee[0]),ee},PSEUDO:function(ee){var pe,Te=!ee[6]&&ee[2];return fm.CHILD.test(ee[0])?null:(ee[3]?ee[2]=ee[4]||ee[5]||"":Te&&yA.test(Te)&&(pe=X(Te,!0))&&(pe=Te.indexOf(")",Te.length-pe)-Te.length)&&(ee[0]=ee[0].slice(0,pe),ee[2]=Te.slice(0,pe)),ee.slice(0,3))}},filter:{TAG:function(ee){var pe=ee.replace(Zs,io).toLowerCase();return ee==="*"?function(){return!0}:function(Te){return Te.nodeName&&Te.nodeName.toLowerCase()===pe}},CLASS:function(ee){var pe=Hr[ee+" "];return pe||(pe=new RegExp("(^|"+Yn+")"+ee+"("+Yn+"|$)"))&&Hr(ee,function(Te){return pe.test(typeof Te.className=="string"&&Te.className||typeof Te.getAttribute<"u"&&Te.getAttribute("class")||"")})},ATTR:function(ee,pe,Te){return function(qe){var Ie=Kn.attr(qe,ee);return Ie==null?pe==="!=":pe?(Ie+="",pe==="="?Ie===Te:pe==="!="?Ie!==Te:pe==="^="?Te&&Ie.indexOf(Te)===0:pe==="*="?Te&&Ie.indexOf(Te)>-1:pe==="$="?Te&&Ie.slice(-Te.length)===Te:pe==="~="?(" "+Ie.replace(ca," ")+" ").indexOf(Te)>-1:pe==="|="?Ie===Te||Ie.slice(0,Te.length+1)===Te+"-":!1):!0}},CHILD:function(ee,pe,Te,qe,Ie){var ze=ee.slice(0,3)!=="nth",nt=ee.slice(-4)!=="last",st=pe==="of-type";return qe===1&&Ie===0?function(ut){return!!ut.parentNode}:function(ut,Vt,Lt){var Ht,fn,Nn,Ft,vi,Pi,Do=ze!==nt?"nextSibling":"previousSibling",Ar=ut.parentNode,Ic=st&&ut.nodeName.toLowerCase(),jf=!Lt&&!st,qi=!1;if(Ar){if(ze){for(;Do;){for(Ft=ut;Ft=Ft[Do];)if(st?Ft.nodeName.toLowerCase()===Ic:Ft.nodeType===1)return!1;Pi=Do=ee==="only"&&!Pi&&"nextSibling"}return!0}if(Pi=[nt?Ar.firstChild:Ar.lastChild],nt&&jf){for(Ft=Ar,Nn=Ft[On]||(Ft[On]={}),fn=Nn[Ft.uniqueID]||(Nn[Ft.uniqueID]={}),Ht=fn[ee]||[],vi=Ht[0]===Io&&Ht[1],qi=vi&&Ht[2],Ft=vi&&Ar.childNodes[vi];Ft=++vi&&Ft&&Ft[Do]||(qi=vi=0)||Pi.pop();)if(Ft.nodeType===1&&++qi&&Ft===ut){fn[ee]=[Io,vi,qi];break}}else if(jf&&(Ft=ut,Nn=Ft[On]||(Ft[On]={}),fn=Nn[Ft.uniqueID]||(Nn[Ft.uniqueID]={}),Ht=fn[ee]||[],vi=Ht[0]===Io&&Ht[1],qi=vi),qi===!1)for(;(Ft=++vi&&Ft&&Ft[Do]||(qi=vi=0)||Pi.pop())&&!((st?Ft.nodeName.toLowerCase()===Ic:Ft.nodeType===1)&&++qi&&(jf&&(Nn=Ft[On]||(Ft[On]={}),fn=Nn[Ft.uniqueID]||(Nn[Ft.uniqueID]={}),fn[ee]=[Io,qi]),Ft===ut)););return qi-=Ie,qi===qe||qi%qe===0&&qi/qe>=0}}},PSEUDO:function(ee,pe){var Te,qe=L.pseudos[ee]||L.setFilters[ee.toLowerCase()]||Kn.error("unsupported pseudo: "+ee);return qe[On]?qe(pe):qe.length>1?(Te=[ee,ee,"",pe],L.setFilters.hasOwnProperty(ee.toLowerCase())?Da(function(Ie,ze){for(var nt,st=qe(Ie,pe),ut=st.length;ut--;)nt=Oc(Ie,st[ut]),Ie[nt]=!(ze[nt]=st[ut])}):function(Ie){return qe(Ie,0,Te)}):qe}},pseudos:{not:Da(function(ee){var pe=[],Te=[],qe=me(ee.replace(Vf,"$1"));return qe[On]?Da(function(Ie,ze,nt,st){for(var ut,Vt=qe(Ie,null,st,[]),Lt=Ie.length;Lt--;)(ut=Vt[Lt])&&(Ie[Lt]=!(ze[Lt]=ut))}):function(Ie,ze,nt){return pe[0]=Ie,qe(pe,null,nt,Te),pe[0]=null,!Te.pop()}}),has:Da(function(ee){return function(pe){return Kn(ee,pe).length>0}}),contains:Da(function(ee){return ee=ee.replace(Zs,io),function(pe){return(pe.textContent||U(pe)).indexOf(ee)>-1}}),lang:Da(function(ee){return bA.test(ee||"")||Kn.error("unsupported lang: "+ee),ee=ee.replace(Zs,io).toLowerCase(),function(pe){var Te;do if(Te=nn?pe.lang:pe.getAttribute("xml:lang")||pe.getAttribute("lang"))return Te=Te.toLowerCase(),Te===ee||Te.indexOf(ee+"-")===0;while((pe=pe.parentNode)&&pe.nodeType===1);return!1}}),target:function(ee){var pe=w.location&&w.location.hash;return pe&&pe.slice(1)===ee.id},root:function(ee){return ee===It},focus:function(ee){return ee===He.activeElement&&(!He.hasFocus||He.hasFocus())&&!!(ee.type||ee.href||~ee.tabIndex)},enabled:Iu(!1),disabled:Iu(!0),checked:function(ee){var pe=ee.nodeName.toLowerCase();return pe==="input"&&!!ee.checked||pe==="option"&&!!ee.selected},selected:function(ee){return ee.parentNode&&ee.parentNode.selectedIndex,ee.selected===!0},empty:function(ee){for(ee=ee.firstChild;ee;ee=ee.nextSibling)if(ee.nodeType<6)return!1;return!0},parent:function(ee){return!L.pseudos.empty(ee)},header:function(ee){return Bf.test(ee.nodeName)},input:function(ee){return _A.test(ee.nodeName)},button:function(ee){var pe=ee.nodeName.toLowerCase();return pe==="input"&&ee.type==="button"||pe==="button"},text:function(ee){var pe;return ee.nodeName.toLowerCase()==="input"&&ee.type==="text"&&((pe=ee.getAttribute("type"))==null||pe.toLowerCase()==="text")},first:Ee(function(){return[0]}),last:Ee(function(ee,pe){return[pe-1]}),eq:Ee(function(ee,pe,Te){return[Te<0?Te+pe:Te]}),even:Ee(function(ee,pe){for(var Te=0;Te<pe;Te+=2)ee.push(Te);return ee}),odd:Ee(function(ee,pe){for(var Te=1;Te<pe;Te+=2)ee.push(Te);return ee}),lt:Ee(function(ee,pe,Te){for(var qe=Te<0?Te+pe:Te>pe?pe:Te;--qe>=0;)ee.push(qe);return ee}),gt:Ee(function(ee,pe,Te){for(var qe=Te<0?Te+pe:Te;++qe<pe;)ee.push(qe);return ee})}},L.pseudos.nth=L.pseudos.eq;for(P in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})L.pseudos[P]=xA(P);for(P in{submit:!0,reset:!0})L.pseudos[P]=CA(P);function Ve(){}Ve.prototype=L.filters=L.pseudos,L.setFilters=new Ve,X=Kn.tokenize=function(ee,pe){var Te,qe,Ie,ze,nt,st,ut,Vt=$h[ee+" "];if(Vt)return pe?0:Vt.slice(0);for(nt=ee,st=[],ut=L.preFilter;nt;){(!Te||(qe=Fh.exec(nt)))&&(qe&&(nt=nt.slice(qe[0].length)||nt),st.push(Ie=[])),Te=!1,(qe=py.exec(nt))&&(Te=qe.shift(),Ie.push({value:Te,type:qe[0].replace(Vf," ")}),nt=nt.slice(Te.length));for(ze in L.filter)(qe=fm[ze].exec(nt))&&(!ut[ze]||(qe=ut[ze](qe)))&&(Te=qe.shift(),Ie.push({value:Te,type:ze,matches:qe}),nt=nt.slice(Te.length));if(!Te)break}return pe?nt.length:nt?Kn.error(ee):$h(ee,st).slice(0)};function ht(ee){for(var pe=0,Te=ee.length,qe="";pe<Te;pe++)qe+=ee[pe].value;return qe}function Zt(ee,pe,Te){var qe=pe.dir,Ie=pe.next,ze=Ie||qe,nt=Te&&ze==="parentNode",st=In++;return pe.first?function(ut,Vt,Lt){for(;ut=ut[qe];)if(ut.nodeType===1||nt)return ee(ut,Vt,Lt);return!1}:function(ut,Vt,Lt){var Ht,fn,Nn,Ft=[Io,st];if(Lt){for(;ut=ut[qe];)if((ut.nodeType===1||nt)&&ee(ut,Vt,Lt))return!0}else for(;ut=ut[qe];)if(ut.nodeType===1||nt)if(Nn=ut[On]||(ut[On]={}),fn=Nn[ut.uniqueID]||(Nn[ut.uniqueID]={}),Ie&&Ie===ut.nodeName.toLowerCase())ut=ut[qe]||ut;else{if((Ht=fn[ze])&&Ht[0]===Io&&Ht[1]===st)return Ft[2]=Ht[2];if(fn[ze]=Ft,Ft[2]=ee(ut,Vt,Lt))return!0}return!1}}function jn(ee){return ee.length>1?function(pe,Te,qe){for(var Ie=ee.length;Ie--;)if(!ee[Ie](pe,Te,qe))return!1;return!0}:ee[0]}function Ai(ee,pe,Te){for(var qe=0,Ie=pe.length;qe<Ie;qe++)Kn(ee,pe[qe],Te);return Te}function tr(ee,pe,Te,qe,Ie){for(var ze,nt=[],st=0,ut=ee.length,Vt=pe!=null;st<ut;st++)(ze=ee[st])&&(!Te||Te(ze,qe,Ie))&&(nt.push(ze),Vt&&pe.push(st));return nt}function Mh(ee,pe,Te,qe,Ie,ze){return qe&&!qe[On]&&(qe=Mh(qe)),Ie&&!Ie[On]&&(Ie=Mh(Ie,ze)),Da(function(nt,st,ut,Vt){var Lt,Ht,fn,Nn=[],Ft=[],vi=st.length,Pi=nt||Ai(pe||"*",ut.nodeType?[ut]:ut,[]),Do=ee&&(nt||!pe)?tr(Pi,Nn,ee,ut,Vt):Pi,Ar=Te?Ie||(nt?ee:vi||qe)?[]:st:Do;if(Te&&Te(Do,Ar,ut,Vt),qe)for(Lt=tr(Ar,Ft),qe(Lt,[],ut,Vt),Ht=Lt.length;Ht--;)(fn=Lt[Ht])&&(Ar[Ft[Ht]]=!(Do[Ft[Ht]]=fn));if(nt){if(Ie||ee){if(Ie){for(Lt=[],Ht=Ar.length;Ht--;)(fn=Ar[Ht])&&Lt.push(Do[Ht]=fn);Ie(null,Ar=[],Lt,Vt)}for(Ht=Ar.length;Ht--;)(fn=Ar[Ht])&&(Lt=Ie?Oc(nt,fn):Nn[Ht])>-1&&(nt[Lt]=!(st[Lt]=fn))}}else Ar=tr(Ar===st?Ar.splice(vi,Ar.length):Ar),Ie?Ie(null,st,Ar,Vt):Js.apply(st,Ar)})}function my(ee){for(var pe,Te,qe,Ie=ee.length,ze=L.relative[ee[0].type],nt=ze||L.relative[" "],st=ze?1:0,ut=Zt(function(Ht){return Ht===pe},nt,!0),Vt=Zt(function(Ht){return Oc(pe,Ht)>-1},nt,!0),Lt=[function(Ht,fn,Nn){var Ft=!ze&&(Nn||fn!==Fe)||((pe=fn).nodeType?ut(Ht,fn,Nn):Vt(Ht,fn,Nn));return pe=null,Ft}];st<Ie;st++)if(Te=L.relative[ee[st].type])Lt=[Zt(jn(Lt),Te)];else{if(Te=L.filter[ee[st].type].apply(null,ee[st].matches),Te[On]){for(qe=++st;qe<Ie&&!L.relative[ee[qe].type];qe++);return Mh(st>1&&jn(Lt),st>1&&ht(ee.slice(0,st-1).concat({value:ee[st-2].type===" "?"*":""})).replace(Vf,"$1"),Te,st<qe&&my(ee.slice(st,qe)),qe<Ie&&my(ee=ee.slice(qe)),qe<Ie&&ht(ee))}Lt.push(Te)}return jn(Lt)}function Ma(ee,pe){var Te=pe.length>0,qe=ee.length>0,Ie=function(ze,nt,st,ut,Vt){var Lt,Ht,fn,Nn=0,Ft="0",vi=ze&&[],Pi=[],Do=Fe,Ar=ze||qe&&L.find.TAG("*",Vt),Ic=Io+=Do==null?1:Math.random()||.1,jf=Ar.length;for(Vt&&(Fe=nt==He||nt||Vt);Ft!==jf&&(Lt=Ar[Ft])!=null;Ft++){if(qe&&Lt){for(Ht=0,!nt&&Lt.ownerDocument!=He&&(Ne(Lt),st=!nn);fn=ee[Ht++];)if(fn(Lt,nt||He,st)){ut.push(Lt);break}Vt&&(Io=Ic)}Te&&((Lt=!fn&&Lt)&&Nn--,ze&&vi.push(Lt))}if(Nn+=Ft,Te&&Ft!==Nn){for(Ht=0;fn=pe[Ht++];)fn(vi,Pi,nt,st);if(ze){if(Nn>0)for(;Ft--;)vi[Ft]||Pi[Ft]||(Pi[Ft]=Hl.call(ut));Pi=tr(Pi)}Js.apply(ut,Pi),Vt&&!ze&&Pi.length>0&&Nn+pe.length>1&&Kn.uniqueSort(ut)}return Vt&&(Io=Ic,Fe=Do),vi};return Te?Da(Ie):Ie}return me=Kn.compile=function(ee,pe){var Te,qe=[],Ie=[],ze=lm[ee+" "];if(!ze){for(pe||(pe=X(ee)),Te=pe.length;Te--;)ze=my(pe[Te]),ze[On]?qe.push(ze):Ie.push(ze);ze=lm(ee,Ma(Ie,qe)),ze.selector=ee}return ze},de=Kn.select=function(ee,pe,Te,qe){var Ie,ze,nt,st,ut,Vt=typeof ee=="function"&&ee,Lt=!qe&&X(ee=Vt.selector||ee);if(Te=Te||[],Lt.length===1){if(ze=Lt[0]=Lt[0].slice(0),ze.length>2&&(nt=ze[0]).type==="ID"&&pe.nodeType===9&&nn&&L.relative[ze[1].type]){if(pe=(L.find.ID(nt.matches[0].replace(Zs,io),pe)||[])[0],pe)Vt&&(pe=pe.parentNode);else return Te;ee=ee.slice(ze.shift().value.length)}for(Ie=fm.needsContext.test(ee)?0:ze.length;Ie--&&(nt=ze[Ie],!L.relative[st=nt.type]);)if((ut=L.find[st])&&(qe=ut(nt.matches[0].replace(Zs,io),Dh.test(ze[0].type)&&We(pe.parentNode)||pe))){if(ze.splice(Ie,1),ee=qe.length&&ht(ze),!ee)return Js.apply(Te,qe),Te;break}}return(Vt||me(ee,Lt))(qe,pe,!nn,Te,!pe||Dh.test(ee)&&We(pe.parentNode)||pe),Te},$.sortStable=On.split("").sort(Xs).join("")===On,$.detectDuplicates=!!Ye,Ne(),$.sortDetached=Na(function(ee){return ee.compareDocumentPosition(He.createElement("fieldset"))&1}),Na(function(ee){return ee.innerHTML="<a href='#'></a>",ee.firstChild.getAttribute("href")==="#"})||gy("type|href|height|width",function(ee,pe,Te){if(!Te)return ee.getAttribute(pe,pe.toLowerCase()==="type"?1:2)}),(!$.attributes||!Na(function(ee){return ee.innerHTML="<input/>",ee.firstChild.setAttribute("value",""),ee.firstChild.getAttribute("value")===""}))&&gy("value",function(ee,pe,Te){if(!Te&&ee.nodeName.toLowerCase()==="input")return ee.defaultValue}),Na(function(ee){return ee.getAttribute("disabled")==null})||gy(hy,function(ee,pe,Te){var qe;if(!Te)return ee[pe]===!0?pe.toLowerCase():(qe=ee.getAttributeNode(pe))&&qe.specified?qe.value:null}),Kn}(e);m.find=E,m.expr=E.selectors,m.expr[":"]=m.expr.pseudos,m.uniqueSort=m.unique=E.uniqueSort,m.text=E.getText,m.isXMLDoc=E.isXML,m.contains=E.contains,m.escapeSelector=E.escape;var I=function(w,P,$){for(var L=[],U=$!==void 0;(w=w[P])&&w.nodeType!==9;)if(w.nodeType===1){if(U&&m(w).is($))break;L.push(w)}return L},D=function(w,P){for(var $=[];w;w=w.nextSibling)w.nodeType===1&&w!==P&&$.push(w);return $},F=m.expr.match.needsContext;function R(w,P){return w.nodeName&&w.nodeName.toLowerCase()===P.toLowerCase()}var z=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function B(w,P,$){return y(P)?m.grep(w,function(L,U){return!!P.call(L,U,L)!==$}):P.nodeType?m.grep(w,function(L){return L===P!==$}):typeof P!="string"?m.grep(w,function(L){return l.call(P,L)>-1!==$}):m.filter(P,w,$)}m.filter=function(w,P,$){var L=P[0];return $&&(w=":not("+w+")"),P.length===1&&L.nodeType===1?m.find.matchesSelector(L,w)?[L]:[]:m.find.matches(w,m.grep(P,function(U){return U.nodeType===1}))},m.fn.extend({find:function(w){var P,$,L=this.length,U=this;if(typeof w!="string")return this.pushStack(m(w).filter(function(){for(P=0;P<L;P++)if(m.contains(U[P],this))return!0}));for($=this.pushStack([]),P=0;P<L;P++)m.find(w,U[P],$);return L>1?m.uniqueSort($):$},filter:function(w){return this.pushStack(B(this,w||[],!1))},not:function(w){return this.pushStack(B(this,w||[],!0))},is:function(w){return!!B(this,typeof w=="string"&&F.test(w)?m(w):w||[],!1).length}});var ie,oe=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,_e=m.fn.init=function(w,P,$){var L,U;if(!w)return this;if($=$||ie,typeof w=="string")if(w[0]==="<"&&w[w.length-1]===">"&&w.length>=3?L=[null,w,null]:L=oe.exec(w),L&&(L[1]||!P))if(L[1]){if(P=P instanceof m?P[0]:P,m.merge(this,m.parseHTML(L[1],P&&P.nodeType?P.ownerDocument||P:v,!0)),z.test(L[1])&&m.isPlainObject(P))for(L in P)y(this[L])?this[L](P[L]):this.attr(L,P[L]);return this}else return U=v.getElementById(L[2]),U&&(this[0]=U,this.length=1),this;else return!P||P.jquery?(P||$).find(w):this.constructor(P).find(w);else{if(w.nodeType)return this[0]=w,this.length=1,this;if(y(w))return $.ready!==void 0?$.ready(w):w(m)}return m.makeArray(w,this)};_e.prototype=m.fn,ie=m(v);var Ae=/^(?:parents|prev(?:Until|All))/,Pe={children:!0,contents:!0,next:!0,prev:!0};m.fn.extend({has:function(w){var P=m(w,this),$=P.length;return this.filter(function(){for(var L=0;L<$;L++)if(m.contains(this,P[L]))return!0})},closest:function(w,P){var $,L=0,U=this.length,G=[],X=typeof w!="string"&&m(w);if(!F.test(w)){for(;L<U;L++)for($=this[L];$&&$!==P;$=$.parentNode)if($.nodeType<11&&(X?X.index($)>-1:$.nodeType===1&&m.find.matchesSelector($,w))){G.push($);break}}return this.pushStack(G.length>1?m.uniqueSort(G):G)},index:function(w){return w?typeof w=="string"?l.call(m(w),this[0]):l.call(this,w.jquery?w[0]:w):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(w,P){return this.pushStack(m.uniqueSort(m.merge(this.get(),m(w,P))))},addBack:function(w){return this.add(w==null?this.prevObject:this.prevObject.filter(w))}});function Se(w,P){for(;(w=w[P])&&w.nodeType!==1;);return w}m.each({parent:function(w){var P=w.parentNode;return P&&P.nodeType!==11?P:null},parents:function(w){return I(w,"parentNode")},parentsUntil:function(w,P,$){return I(w,"parentNode",$)},next:function(w){return Se(w,"nextSibling")},prev:function(w){return Se(w,"previousSibling")},nextAll:function(w){return I(w,"nextSibling")},prevAll:function(w){return I(w,"previousSibling")},nextUntil:function(w,P,$){return I(w,"nextSibling",$)},prevUntil:function(w,P,$){return I(w,"previousSibling",$)},siblings:function(w){return D((w.parentNode||{}).firstChild,w)},children:function(w){return D(w.firstChild)},contents:function(w){return w.contentDocument!=null&&i(w.contentDocument)?w.contentDocument:(R(w,"template")&&(w=w.content||w),m.merge([],w.childNodes))}},function(w,P){m.fn[w]=function($,L){var U=m.map(this,P,$);return w.slice(-5)!=="Until"&&(L=$),L&&typeof L=="string"&&(U=m.filter(L,U)),this.length>1&&(Pe[w]||m.uniqueSort(U),Ae.test(w)&&U.reverse()),this.pushStack(U)}});var se=/[^\x20\t\r\n\f]+/g;function ne(w){var P={};return m.each(w.match(se)||[],function($,L){P[L]=!0}),P}m.Callbacks=function(w){w=typeof w=="string"?ne(w):m.extend({},w);var P,$,L,U,G=[],X=[],me=-1,de=function(){for(U=U||w.once,L=P=!0;X.length;me=-1)for($=X.shift();++me<G.length;)G[me].apply($[0],$[1])===!1&&w.stopOnFalse&&(me=G.length,$=!1);w.memory||($=!1),P=!1,U&&($?G=[]:G="")},Fe={add:function(){return G&&($&&!P&&(me=G.length-1,X.push($)),function Be(Ye){m.each(Ye,function(Ne,He){y(He)?(!w.unique||!Fe.has(He))&&G.push(He):He&&He.length&&C(He)!=="string"&&Be(He)})}(arguments),$&&!P&&de()),this},remove:function(){return m.each(arguments,function(Be,Ye){for(var Ne;(Ne=m.inArray(Ye,G,Ne))>-1;)G.splice(Ne,1),Ne<=me&&me--}),this},has:function(Be){return Be?m.inArray(Be,G)>-1:G.length>0},empty:function(){return G&&(G=[]),this},disable:function(){return U=X=[],G=$="",this},disabled:function(){return!G},lock:function(){return U=X=[],!$&&!P&&(G=$=""),this},locked:function(){return!!U},fireWith:function(Be,Ye){return U||(Ye=Ye||[],Ye=[Be,Ye.slice?Ye.slice():Ye],X.push(Ye),P||de()),this},fire:function(){return Fe.fireWith(this,arguments),this},fired:function(){return!!L}};return Fe};function J(w){return w}function V(w){throw w}function W(w,P,$,L){var U;try{w&&y(U=w.promise)?U.call(w).done(P).fail($):w&&y(U=w.then)?U.call(w,P,$):P.apply(void 0,[w].slice(L))}catch(G){$.apply(void 0,[G])}}m.extend({Deferred:function(w){var P=[["notify","progress",m.Callbacks("memory"),m.Callbacks("memory"),2],["resolve","done",m.Callbacks("once memory"),m.Callbacks("once memory"),0,"resolved"],["reject","fail",m.Callbacks("once memory"),m.Callbacks("once memory"),1,"rejected"]],$="pending",L={state:function(){return $},always:function(){return U.done(arguments).fail(arguments),this},catch:function(G){return L.then(null,G)},pipe:function(){var G=arguments;return m.Deferred(function(X){m.each(P,function(me,de){var Fe=y(G[de[4]])&&G[de[4]];U[de[1]](function(){var Be=Fe&&Fe.apply(this,arguments);Be&&y(Be.promise)?Be.promise().progress(X.notify).done(X.resolve).fail(X.reject):X[de[0]+"With"](this,Fe?[Be]:arguments)})}),G=null}).promise()},then:function(G,X,me){var de=0;function Fe(Be,Ye,Ne,He){return function(){var It=this,nn=arguments,vt=function(){var ni,Cn;if(!(Be<de)){if(ni=Ne.apply(It,nn),ni===Ye.promise())throw new TypeError("Thenable self-resolution");Cn=ni&&(typeof ni=="object"||typeof ni=="function")&&ni.then,y(Cn)?He?Cn.call(ni,Fe(de,Ye,J,He),Fe(de,Ye,V,He)):(de++,Cn.call(ni,Fe(de,Ye,J,He),Fe(de,Ye,V,He),Fe(de,Ye,J,Ye.notifyWith))):(Ne!==J&&(It=void 0,nn=[ni]),(He||Ye.resolveWith)(It,nn))}},ti=He?vt:function(){try{vt()}catch(ni){m.Deferred.exceptionHook&&m.Deferred.exceptionHook(ni,ti.stackTrace),Be+1>=de&&(Ne!==V&&(It=void 0,nn=[ni]),Ye.rejectWith(It,nn))}};Be?ti():(m.Deferred.getStackHook&&(ti.stackTrace=m.Deferred.getStackHook()),e.setTimeout(ti))}}return m.Deferred(function(Be){P[0][3].add(Fe(0,Be,y(me)?me:J,Be.notifyWith)),P[1][3].add(Fe(0,Be,y(G)?G:J)),P[2][3].add(Fe(0,Be,y(X)?X:V))}).promise()},promise:function(G){return G!=null?m.extend(G,L):L}},U={};return m.each(P,function(G,X){var me=X[2],de=X[5];L[X[1]]=me.add,de&&me.add(function(){$=de},P[3-G][2].disable,P[3-G][3].disable,P[0][2].lock,P[0][3].lock),me.add(X[3].fire),U[X[0]]=function(){return U[X[0]+"With"](this===U?void 0:this,arguments),this},U[X[0]+"With"]=me.fireWith}),L.promise(U),w&&w.call(U,U),U},when:function(w){var P=arguments.length,$=P,L=Array($),U=o.call(arguments),G=m.Deferred(),X=function(me){return function(de){L[me]=this,U[me]=arguments.length>1?o.call(arguments):de,--P||G.resolveWith(L,U)}};if(P<=1&&(W(w,G.done(X($)).resolve,G.reject,!P),G.state()==="pending"||y(U[$]&&U[$].then)))return G.then();for(;$--;)W(U[$],X($),G.reject);return G.promise()}});var ae=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;m.Deferred.exceptionHook=function(w,P){e.console&&e.console.warn&&w&&ae.test(w.name)&&e.console.warn("jQuery.Deferred exception: "+w.message,w.stack,P)},m.readyException=function(w){e.setTimeout(function(){throw w})};var te=m.Deferred();m.fn.ready=function(w){return te.then(w).catch(function(P){m.readyException(P)}),this},m.extend({isReady:!1,readyWait:1,ready:function(w){(w===!0?--m.readyWait:m.isReady)||(m.isReady=!0,!(w!==!0&&--m.readyWait>0)&&te.resolveWith(v,[m]))}}),m.ready.then=te.then;function ue(){v.removeEventListener("DOMContentLoaded",ue),e.removeEventListener("load",ue),m.ready()}v.readyState==="complete"||v.readyState!=="loading"&&!v.documentElement.doScroll?e.setTimeout(m.ready):(v.addEventListener("DOMContentLoaded",ue),e.addEventListener("load",ue));var ce=function(w,P,$,L,U,G,X){var me=0,de=w.length,Fe=$==null;if(C($)==="object"){U=!0;for(me in $)ce(w,P,me,$[me],!0,G,X)}else if(L!==void 0&&(U=!0,y(L)||(X=!0),Fe&&(X?(P.call(w,L),P=null):(Fe=P,P=function(Be,Ye,Ne){return Fe.call(m(Be),Ne)})),P))for(;me<de;me++)P(w[me],$,X?L:L.call(w[me],me,P(w[me],$)));return U?w:Fe?P.call(w):de?P(w[0],$):G},fe=/^-ms-/,ye=/-([a-z])/g;function j(w,P){return P.toUpperCase()}function Y(w){return w.replace(fe,"ms-").replace(ye,j)}var O=function(w){return w.nodeType===1||w.nodeType===9||!+w.nodeType};function M(){this.expando=m.expando+M.uid++}M.uid=1,M.prototype={cache:function(w){var P=w[this.expando];return P||(P={},O(w)&&(w.nodeType?w[this.expando]=P:Object.defineProperty(w,this.expando,{value:P,configurable:!0}))),P},set:function(w,P,$){var L,U=this.cache(w);if(typeof P=="string")U[Y(P)]=$;else for(L in P)U[Y(L)]=P[L];return U},get:function(w,P){return P===void 0?this.cache(w):w[this.expando]&&w[this.expando][Y(P)]},access:function(w,P,$){return P===void 0||P&&typeof P=="string"&&$===void 0?this.get(w,P):(this.set(w,P,$),$!==void 0?$:P)},remove:function(w,P){var $,L=w[this.expando];if(L!==void 0){if(P!==void 0)for(Array.isArray(P)?P=P.map(Y):(P=Y(P),P=P in L?[P]:P.match(se)||[]),$=P.length;$--;)delete L[P[$]];(P===void 0||m.isEmptyObject(L))&&(w.nodeType?w[this.expando]=void 0:delete w[this.expando])}},hasData:function(w){var P=w[this.expando];return P!==void 0&&!m.isEmptyObject(P)}};var H=new M,Q=new M,ve=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ge=/[A-Z]/g;function De(w){return w==="true"?!0:w==="false"?!1:w==="null"?null:w===+w+""?+w:ve.test(w)?JSON.parse(w):w}function Le(w,P,$){var L;if($===void 0&&w.nodeType===1)if(L="data-"+P.replace(ge,"-$&").toLowerCase(),$=w.getAttribute(L),typeof $=="string"){try{$=De($)}catch{}Q.set(w,P,$)}else $=void 0;return $}m.extend({hasData:function(w){return Q.hasData(w)||H.hasData(w)},data:function(w,P,$){return Q.access(w,P,$)},removeData:function(w,P){Q.remove(w,P)},_data:function(w,P,$){return H.access(w,P,$)},_removeData:function(w,P){H.remove(w,P)}}),m.fn.extend({data:function(w,P){var $,L,U,G=this[0],X=G&&G.attributes;if(w===void 0){if(this.length&&(U=Q.get(G),G.nodeType===1&&!H.get(G,"hasDataAttrs"))){for($=X.length;$--;)X[$]&&(L=X[$].name,L.indexOf("data-")===0&&(L=Y(L.slice(5)),Le(G,L,U[L])));H.set(G,"hasDataAttrs",!0)}return U}return typeof w=="object"?this.each(function(){Q.set(this,w)}):ce(this,function(me){var de;if(G&&me===void 0)return de=Q.get(G,w),de!==void 0||(de=Le(G,w),de!==void 0)?de:void 0;this.each(function(){Q.set(this,w,me)})},null,P,arguments.length>1,null,!0)},removeData:function(w){return this.each(function(){Q.remove(this,w)})}}),m.extend({queue:function(w,P,$){var L;if(w)return P=(P||"fx")+"queue",L=H.get(w,P),$&&(!L||Array.isArray($)?L=H.access(w,P,m.makeArray($)):L.push($)),L||[]},dequeue:function(w,P){P=P||"fx";var $=m.queue(w,P),L=$.length,U=$.shift(),G=m._queueHooks(w,P),X=function(){m.dequeue(w,P)};U==="inprogress"&&(U=$.shift(),L--),U&&(P==="fx"&&$.unshift("inprogress"),delete G.stop,U.call(w,X,G)),!L&&G&&G.empty.fire()},_queueHooks:function(w,P){var $=P+"queueHooks";return H.get(w,$)||H.access(w,$,{empty:m.Callbacks("once memory").add(function(){H.remove(w,[P+"queue",$])})})}}),m.fn.extend({queue:function(w,P){var $=2;return typeof w!="string"&&(P=w,w="fx",$--),arguments.length<$?m.queue(this[0],w):P===void 0?this:this.each(function(){var L=m.queue(this,w,P);m._queueHooks(this,w),w==="fx"&&L[0]!=="inprogress"&&m.dequeue(this,w)})},dequeue:function(w){return this.each(function(){m.dequeue(this,w)})},clearQueue:function(w){return this.queue(w||"fx",[])},promise:function(w,P){var $,L=1,U=m.Deferred(),G=this,X=this.length,me=function(){--L||U.resolveWith(G,[G])};for(typeof w!="string"&&(P=w,w=void 0),w=w||"fx";X--;)$=H.get(G[X],w+"queueHooks"),$&&$.empty&&(L++,$.empty.add(me));return me(),U.promise(P)}});var tt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Xe=new RegExp("^(?:([+-])=|)("+tt+")([a-z%]*)$","i"),et=["Top","Right","Bottom","Left"],Qe=v.documentElement,pt=function(w){return m.contains(w.ownerDocument,w)},zt={composed:!0};Qe.getRootNode&&(pt=function(w){return m.contains(w.ownerDocument,w)||w.getRootNode(zt)===w.ownerDocument});var Kt=function(w,P){return w=P||w,w.style.display==="none"||w.style.display===""&&pt(w)&&m.css(w,"display")==="none"};function wt(w,P,$,L){var U,G,X=20,me=L?function(){return L.cur()}:function(){return m.css(w,P,"")},de=me(),Fe=$&&$[3]||(m.cssNumber[P]?"":"px"),Be=w.nodeType&&(m.cssNumber[P]||Fe!=="px"&&+de)&&Xe.exec(m.css(w,P));if(Be&&Be[3]!==Fe){for(de=de/2,Fe=Fe||Be[3],Be=+de||1;X--;)m.style(w,P,Be+Fe),(1-G)*(1-(G=me()/de||.5))<=0&&(X=0),Be=Be/G;Be=Be*2,m.style(w,P,Be+Fe),$=$||[]}return $&&(Be=+Be||+de||0,U=$[1]?Be+($[1]+1)*$[2]:+$[2],L&&(L.unit=Fe,L.start=Be,L.end=U)),U}var sn={};function gr(w){var P,$=w.ownerDocument,L=w.nodeName,U=sn[L];return U||(P=$.body.appendChild($.createElement(L)),U=m.css(P,"display"),P.parentNode.removeChild(P),U==="none"&&(U="block"),sn[L]=U,U)}function mi(w,P){for(var $,L,U=[],G=0,X=w.length;G<X;G++)L=w[G],L.style&&($=L.style.display,P?($==="none"&&(U[G]=H.get(L,"display")||null,U[G]||(L.style.display="")),L.style.display===""&&Kt(L)&&(U[G]=gr(L))):$!=="none"&&(U[G]="none",H.set(L,"display",$)));for(G=0;G<X;G++)U[G]!=null&&(w[G].style.display=U[G]);return w}m.fn.extend({show:function(){return mi(this,!0)},hide:function(){return mi(this)},toggle:function(w){return typeof w=="boolean"?w?this.show():this.hide():this.each(function(){Kt(this)?m(this).show():m(this).hide()})}});var Lr=/^(?:checkbox|radio)$/i,ho=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Tr=/^$|^module$|\/(?:java|ecma)script/i;(function(){var w=v.createDocumentFragment(),P=w.appendChild(v.createElement("div")),$=v.createElement("input");$.setAttribute("type","radio"),$.setAttribute("checked","checked"),$.setAttribute("name","t"),P.appendChild($),g.checkClone=P.cloneNode(!0).cloneNode(!0).lastChild.checked,P.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!P.cloneNode(!0).lastChild.defaultValue,P.innerHTML="<option></option>",g.option=!!P.lastChild})();var Vn={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Vn.tbody=Vn.tfoot=Vn.colgroup=Vn.caption=Vn.thead,Vn.th=Vn.td,g.option||(Vn.optgroup=Vn.option=[1,"<select multiple='multiple'>","</select>"]);function Bn(w,P){var $;return typeof w.getElementsByTagName<"u"?$=w.getElementsByTagName(P||"*"):typeof w.querySelectorAll<"u"?$=w.querySelectorAll(P||"*"):$=[],P===void 0||P&&R(w,P)?m.merge([w],$):$}function Oa(w,P){for(var $=0,L=w.length;$<L;$++)H.set(w[$],"globalEval",!P||H.get(P[$],"globalEval"))}var Df=/<|&#?\w+;/;function Tu(w,P,$,L,U){for(var G,X,me,de,Fe,Be,Ye=P.createDocumentFragment(),Ne=[],He=0,It=w.length;He<It;He++)if(G=w[He],G||G===0)if(C(G)==="object")m.merge(Ne,G.nodeType?[G]:G);else if(!Df.test(G))Ne.push(P.createTextNode(G));else{for(X=X||Ye.appendChild(P.createElement("div")),me=(ho.exec(G)||["",""])[1].toLowerCase(),de=Vn[me]||Vn._default,X.innerHTML=de[1]+m.htmlPrefilter(G)+de[2],Be=de[0];Be--;)X=X.lastChild;m.merge(Ne,X.childNodes),X=Ye.firstChild,X.textContent=""}for(Ye.textContent="",He=0;G=Ne[He++];){if(L&&m.inArray(G,L)>-1){U&&U.push(G);continue}if(Fe=pt(G),X=Bn(Ye.appendChild(G),"script"),Fe&&Oa(X),$)for(Be=0;G=X[Be++];)Tr.test(G.type||"")&&$.push(G)}return Ye}var Tc=/^([^.]*)(?:\.(.+)|)/;function Ss(){return!0}function Ui(){return!1}function Ac(w,P){return w===ty()==(P==="focus")}function ty(){try{return v.activeElement}catch{}}function Nf(w,P,$,L,U,G){var X,me;if(typeof P=="object"){typeof $!="string"&&(L=L||$,$=void 0);for(me in P)Nf(w,me,$,L,P[me],G);return w}if(L==null&&U==null?(U=$,L=$=void 0):U==null&&(typeof $=="string"?(U=L,L=void 0):(U=L,L=$,$=void 0)),U===!1)U=Ui;else if(!U)return w;return G===1&&(X=U,U=function(de){return m().off(de),X.apply(this,arguments)},U.guid=X.guid||(X.guid=m.guid++)),w.each(function(){m.event.add(this,P,U,L,$)})}m.event={global:{},add:function(w,P,$,L,U){var G,X,me,de,Fe,Be,Ye,Ne,He,It,nn,vt=H.get(w);if(O(w))for($.handler&&(G=$,$=G.handler,U=G.selector),U&&m.find.matchesSelector(Qe,U),$.guid||($.guid=m.guid++),(de=vt.events)||(de=vt.events=Object.create(null)),(X=vt.handle)||(X=vt.handle=function(ti){return typeof m<"u"&&m.event.triggered!==ti.type?m.event.dispatch.apply(w,arguments):void 0}),P=(P||"").match(se)||[""],Fe=P.length;Fe--;)me=Tc.exec(P[Fe])||[],He=nn=me[1],It=(me[2]||"").split(".").sort(),He&&(Ye=m.event.special[He]||{},He=(U?Ye.delegateType:Ye.bindType)||He,Ye=m.event.special[He]||{},Be=m.extend({type:He,origType:nn,data:L,handler:$,guid:$.guid,selector:U,needsContext:U&&m.expr.match.needsContext.test(U),namespace:It.join(".")},G),(Ne=de[He])||(Ne=de[He]=[],Ne.delegateCount=0,(!Ye.setup||Ye.setup.call(w,L,It,X)===!1)&&w.addEventListener&&w.addEventListener(He,X)),Ye.add&&(Ye.add.call(w,Be),Be.handler.guid||(Be.handler.guid=$.guid)),U?Ne.splice(Ne.delegateCount++,0,Be):Ne.push(Be),m.event.global[He]=!0)},remove:function(w,P,$,L,U){var G,X,me,de,Fe,Be,Ye,Ne,He,It,nn,vt=H.hasData(w)&&H.get(w);if(!(!vt||!(de=vt.events))){for(P=(P||"").match(se)||[""],Fe=P.length;Fe--;){if(me=Tc.exec(P[Fe])||[],He=nn=me[1],It=(me[2]||"").split(".").sort(),!He){for(He in de)m.event.remove(w,He+P[Fe],$,L,!0);continue}for(Ye=m.event.special[He]||{},He=(L?Ye.delegateType:Ye.bindType)||He,Ne=de[He]||[],me=me[2]&&new RegExp("(^|\\.)"+It.join("\\.(?:.*\\.|)")+"(\\.|$)"),X=G=Ne.length;G--;)Be=Ne[G],(U||nn===Be.origType)&&(!$||$.guid===Be.guid)&&(!me||me.test(Be.namespace))&&(!L||L===Be.selector||L==="**"&&Be.selector)&&(Ne.splice(G,1),Be.selector&&Ne.delegateCount--,Ye.remove&&Ye.remove.call(w,Be));X&&!Ne.length&&((!Ye.teardown||Ye.teardown.call(w,It,vt.handle)===!1)&&m.removeEvent(w,He,vt.handle),delete de[He])}m.isEmptyObject(de)&&H.remove(w,"handle events")}},dispatch:function(w){var P,$,L,U,G,X,me=new Array(arguments.length),de=m.event.fix(w),Fe=(H.get(this,"events")||Object.create(null))[de.type]||[],Be=m.event.special[de.type]||{};for(me[0]=de,P=1;P<arguments.length;P++)me[P]=arguments[P];if(de.delegateTarget=this,!(Be.preDispatch&&Be.preDispatch.call(this,de)===!1)){for(X=m.event.handlers.call(this,de,Fe),P=0;(U=X[P++])&&!de.isPropagationStopped();)for(de.currentTarget=U.elem,$=0;(G=U.handlers[$++])&&!de.isImmediatePropagationStopped();)(!de.rnamespace||G.namespace===!1||de.rnamespace.test(G.namespace))&&(de.handleObj=G,de.data=G.data,L=((m.event.special[G.origType]||{}).handle||G.handler).apply(U.elem,me),L!==void 0&&(de.result=L)===!1&&(de.preventDefault(),de.stopPropagation()));return Be.postDispatch&&Be.postDispatch.call(this,de),de.result}},handlers:function(w,P){var $,L,U,G,X,me=[],de=P.delegateCount,Fe=w.target;if(de&&Fe.nodeType&&!(w.type==="click"&&w.button>=1)){for(;Fe!==this;Fe=Fe.parentNode||this)if(Fe.nodeType===1&&!(w.type==="click"&&Fe.disabled===!0)){for(G=[],X={},$=0;$<de;$++)L=P[$],U=L.selector+" ",X[U]===void 0&&(X[U]=L.needsContext?m(U,this).index(Fe)>-1:m.find(U,this,null,[Fe]).length),X[U]&&G.push(L);G.length&&me.push({elem:Fe,handlers:G})}}return Fe=this,de<P.length&&me.push({elem:Fe,handlers:P.slice(de)}),me},addProp:function(w,P){Object.defineProperty(m.Event.prototype,w,{enumerable:!0,configurable:!0,get:y(P)?function(){if(this.originalEvent)return P(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[w]},set:function($){Object.defineProperty(this,w,{enumerable:!0,configurable:!0,writable:!0,value:$})}})},fix:function(w){return w[m.expando]?w:new m.Event(w)},special:{load:{noBubble:!0},click:{setup:function(w){var P=this||w;return Lr.test(P.type)&&P.click&&R(P,"input")&&Au(P,"click",Ss),!1},trigger:function(w){var P=this||w;return Lr.test(P.type)&&P.click&&R(P,"input")&&Au(P,"click"),!0},_default:function(w){var P=w.target;return Lr.test(P.type)&&P.click&&R(P,"input")&&H.get(P,"click")||R(P,"a")}},beforeunload:{postDispatch:function(w){w.result!==void 0&&w.originalEvent&&(w.originalEvent.returnValue=w.result)}}}};function Au(w,P,$){if(!$){H.get(w,P)===void 0&&m.event.add(w,P,Ss);return}H.set(w,P,!1),m.event.add(w,P,{namespace:!1,handler:function(L){var U,G,X=H.get(this,P);if(L.isTrigger&1&&this[P]){if(X.length)(m.event.special[P]||{}).delegateType&&L.stopPropagation();else if(X=o.call(arguments),H.set(this,P,X),U=$(this,P),this[P](),G=H.get(this,P),X!==G||U?H.set(this,P,!1):G={},X!==G)return L.stopImmediatePropagation(),L.preventDefault(),G&&G.value}else X.length&&(H.set(this,P,{value:m.event.trigger(m.extend(X[0],m.Event.prototype),X.slice(1),this)}),L.stopImmediatePropagation())}})}m.removeEvent=function(w,P,$){w.removeEventListener&&w.removeEventListener(P,$)},m.Event=function(w,P){if(!(this instanceof m.Event))return new m.Event(w,P);w&&w.type?(this.originalEvent=w,this.type=w.type,this.isDefaultPrevented=w.defaultPrevented||w.defaultPrevented===void 0&&w.returnValue===!1?Ss:Ui,this.target=w.target&&w.target.nodeType===3?w.target.parentNode:w.target,this.currentTarget=w.currentTarget,this.relatedTarget=w.relatedTarget):this.type=w,P&&m.extend(this,P),this.timeStamp=w&&w.timeStamp||Date.now(),this[m.expando]=!0},m.Event.prototype={constructor:m.Event,isDefaultPrevented:Ui,isPropagationStopped:Ui,isImmediatePropagationStopped:Ui,isSimulated:!1,preventDefault:function(){var w=this.originalEvent;this.isDefaultPrevented=Ss,w&&!this.isSimulated&&w.preventDefault()},stopPropagation:function(){var w=this.originalEvent;this.isPropagationStopped=Ss,w&&!this.isSimulated&&w.stopPropagation()},stopImmediatePropagation:function(){var w=this.originalEvent;this.isImmediatePropagationStopped=Ss,w&&!this.isSimulated&&w.stopImmediatePropagation(),this.stopPropagation()}},m.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},m.event.addProp),m.each({focus:"focusin",blur:"focusout"},function(w,P){m.event.special[w]={setup:function(){return Au(this,w,Ac),!1},trigger:function(){return Au(this,w),!0},_default:function($){return H.get($.target,w)},delegateType:P}}),m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(w,P){m.event.special[w]={delegateType:P,bindType:P,handle:function($){var L,U=this,G=$.relatedTarget,X=$.handleObj;return(!G||G!==U&&!m.contains(U,G))&&($.type=X.origType,L=X.handler.apply(this,arguments),$.type=P),L}}}),m.fn.extend({on:function(w,P,$,L){return Nf(this,w,P,$,L)},one:function(w,P,$,L){return Nf(this,w,P,$,L,1)},off:function(w,P,$){var L,U;if(w&&w.preventDefault&&w.handleObj)return L=w.handleObj,m(w.delegateTarget).off(L.namespace?L.origType+"."+L.namespace:L.origType,L.selector,L.handler),this;if(typeof w=="object"){for(U in w)this.off(U,P,w[U]);return this}return(P===!1||typeof P=="function")&&($=P,P=void 0),$===!1&&($=Ui),this.each(function(){m.event.remove(this,w,$,P)})}});var Th=/<script|<style|<link/i,om=/checked\s*(?:[^=]|=\s*.checked.)/i,ny=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Pu(w,P){return R(w,"table")&&R(P.nodeType!==11?P:P.firstChild,"tr")&&m(w).children("tbody")[0]||w}function ry(w){return w.type=(w.getAttribute("type")!==null)+"/"+w.type,w}function Mf(w){return(w.type||"").slice(0,5)==="true/"?w.type=w.type.slice(5):w.removeAttribute("type"),w}function ke(w,P){var $,L,U,G,X,me,de;if(P.nodeType===1){if(H.hasData(w)&&(G=H.get(w),de=G.events,de)){H.remove(P,"handle events");for(U in de)for($=0,L=de[U].length;$<L;$++)m.event.add(P,U,de[U][$])}Q.hasData(w)&&(X=Q.access(w),me=m.extend({},X),Q.set(P,me))}}function le(w,P){var $=P.nodeName.toLowerCase();$==="input"&&Lr.test(w.type)?P.checked=w.checked:($==="input"||$==="textarea")&&(P.defaultValue=w.defaultValue)}function xe(w,P,$,L){P=a(P);var U,G,X,me,de,Fe,Be=0,Ye=w.length,Ne=Ye-1,He=P[0],It=y(He);if(It||Ye>1&&typeof He=="string"&&!g.checkClone&&om.test(He))return w.each(function(nn){var vt=w.eq(nn);It&&(P[0]=He.call(this,nn,vt.html())),xe(vt,P,$,L)});if(Ye&&(U=Tu(P,w[0].ownerDocument,!1,w,L),G=U.firstChild,U.childNodes.length===1&&(U=G),G||L)){for(X=m.map(Bn(U,"script"),ry),me=X.length;Be<Ye;Be++)de=U,Be!==Ne&&(de=m.clone(de,!0,!0),me&&m.merge(X,Bn(de,"script"))),$.call(w[Be],de,Be);if(me)for(Fe=X[X.length-1].ownerDocument,m.map(X,Mf),Be=0;Be<me;Be++)de=X[Be],Tr.test(de.type||"")&&!H.access(de,"globalEval")&&m.contains(Fe,de)&&(de.src&&(de.type||"").toLowerCase()!=="module"?m._evalUrl&&!de.noModule&&m._evalUrl(de.src,{nonce:de.nonce||de.getAttribute("nonce")},Fe):x(de.textContent.replace(ny,""),de,Fe))}return w}function Re(w,P,$){for(var L,U=P?m.filter(P,w):w,G=0;(L=U[G])!=null;G++)!$&&L.nodeType===1&&m.cleanData(Bn(L)),L.parentNode&&($&&pt(L)&&Oa(Bn(L,"script")),L.parentNode.removeChild(L));return w}m.extend({htmlPrefilter:function(w){return w},clone:function(w,P,$){var L,U,G,X,me=w.cloneNode(!0),de=pt(w);if(!g.noCloneChecked&&(w.nodeType===1||w.nodeType===11)&&!m.isXMLDoc(w))for(X=Bn(me),G=Bn(w),L=0,U=G.length;L<U;L++)le(G[L],X[L]);if(P)if($)for(G=G||Bn(w),X=X||Bn(me),L=0,U=G.length;L<U;L++)ke(G[L],X[L]);else ke(w,me);return X=Bn(me,"script"),X.length>0&&Oa(X,!de&&Bn(w,"script")),me},cleanData:function(w){for(var P,$,L,U=m.event.special,G=0;($=w[G])!==void 0;G++)if(O($)){if(P=$[H.expando]){if(P.events)for(L in P.events)U[L]?m.event.remove($,L):m.removeEvent($,L,P.handle);$[H.expando]=void 0}$[Q.expando]&&($[Q.expando]=void 0)}}}),m.fn.extend({detach:function(w){return Re(this,w,!0)},remove:function(w){return Re(this,w)},text:function(w){return ce(this,function(P){return P===void 0?m.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=P)})},null,w,arguments.length)},append:function(){return xe(this,arguments,function(w){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var P=Pu(this,w);P.appendChild(w)}})},prepend:function(){return xe(this,arguments,function(w){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var P=Pu(this,w);P.insertBefore(w,P.firstChild)}})},before:function(){return xe(this,arguments,function(w){this.parentNode&&this.parentNode.insertBefore(w,this)})},after:function(){return xe(this,arguments,function(w){this.parentNode&&this.parentNode.insertBefore(w,this.nextSibling)})},empty:function(){for(var w,P=0;(w=this[P])!=null;P++)w.nodeType===1&&(m.cleanData(Bn(w,!1)),w.textContent="");return this},clone:function(w,P){return w=w??!1,P=P??w,this.map(function(){return m.clone(this,w,P)})},html:function(w){return ce(this,function(P){var $=this[0]||{},L=0,U=this.length;if(P===void 0&&$.nodeType===1)return $.innerHTML;if(typeof P=="string"&&!Th.test(P)&&!Vn[(ho.exec(P)||["",""])[1].toLowerCase()]){P=m.htmlPrefilter(P);try{for(;L<U;L++)$=this[L]||{},$.nodeType===1&&(m.cleanData(Bn($,!1)),$.innerHTML=P);$=0}catch{}}$&&this.empty().append(P)},null,w,arguments.length)},replaceWith:function(){var w=[];return xe(this,arguments,function(P){var $=this.parentNode;m.inArray(this,w)<0&&(m.cleanData(Bn(this)),$&&$.replaceChild(P,this))},w)}}),m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(w,P){m.fn[w]=function($){for(var L,U=[],G=m($),X=G.length-1,me=0;me<=X;me++)L=me===X?this:this.clone(!0),m(G[me])[P](L),s.apply(U,L.get());return this.pushStack(U)}});var Me=new RegExp("^("+tt+")(?!px)[a-z%]+$","i"),kt=/^--/,Ct=function(w){var P=w.ownerDocument.defaultView;return(!P||!P.opener)&&(P=e),P.getComputedStyle(w)},wn=function(w,P,$){var L,U,G={};for(U in P)G[U]=w.style[U],w.style[U]=P[U];L=$.call(w);for(U in P)w.style[U]=G[U];return L},sr=new RegExp(et.join("|"),"i"),Dr="[\\x20\\t\\r\\n\\f]",yn=new RegExp("^"+Dr+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Dr+"+$","g");(function(){function w(){if(Fe){de.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Fe.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Qe.appendChild(de).appendChild(Fe);var Be=e.getComputedStyle(Fe);$=Be.top!=="1%",me=P(Be.marginLeft)===12,Fe.style.right="60%",G=P(Be.right)===36,L=P(Be.width)===36,Fe.style.position="absolute",U=P(Fe.offsetWidth/3)===12,Qe.removeChild(de),Fe=null}}function P(Be){return Math.round(parseFloat(Be))}var $,L,U,G,X,me,de=v.createElement("div"),Fe=v.createElement("div");Fe.style&&(Fe.style.backgroundClip="content-box",Fe.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle=Fe.style.backgroundClip==="content-box",m.extend(g,{boxSizingReliable:function(){return w(),L},pixelBoxStyles:function(){return w(),G},pixelPosition:function(){return w(),$},reliableMarginLeft:function(){return w(),me},scrollboxSize:function(){return w(),U},reliableTrDimensions:function(){var Be,Ye,Ne,He;return X==null&&(Be=v.createElement("table"),Ye=v.createElement("tr"),Ne=v.createElement("div"),Be.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Ye.style.cssText="border:1px solid",Ye.style.height="1px",Ne.style.height="9px",Ne.style.display="block",Qe.appendChild(Be).appendChild(Ye).appendChild(Ne),He=e.getComputedStyle(Ye),X=parseInt(He.height,10)+parseInt(He.borderTopWidth,10)+parseInt(He.borderBottomWidth,10)===Ye.offsetHeight,Qe.removeChild(Be)),X}}))})();function qn(w,P,$){var L,U,G,X,me=kt.test(P),de=w.style;return $=$||Ct(w),$&&(X=$.getPropertyValue(P)||$[P],me&&X&&(X=X.replace(yn,"$1")||void 0),X===""&&!pt(w)&&(X=m.style(w,P)),!g.pixelBoxStyles()&&Me.test(X)&&sr.test(P)&&(L=de.width,U=de.minWidth,G=de.maxWidth,de.minWidth=de.maxWidth=de.width=X,X=$.width,de.width=L,de.minWidth=U,de.maxWidth=G)),X!==void 0?X+"":X}function Nr(w,P){return{get:function(){if(w()){delete this.get;return}return(this.get=P).apply(this,arguments)}}}var Xt=["Webkit","Moz","ms"],dr=v.createElement("div").style,mr={};function vr(w){for(var P=w[0].toUpperCase()+w.slice(1),$=Xt.length;$--;)if(w=Xt[$]+P,w in dr)return w}function po(w){var P=m.cssProps[w]||mr[w];return P||(w in dr?w:mr[w]=vr(w)||w)}var Ia=/^(none|table(?!-c[ea]).+)/,$a={position:"absolute",visibility:"hidden",display:"block"},Bl={letterSpacing:"0",fontWeight:"400"};function _s(w,P,$){var L=Xe.exec(P);return L?Math.max(0,L[2]-($||0))+(L[3]||"px"):P}function Wi(w,P,$,L,U,G){var X=P==="width"?1:0,me=0,de=0;if($===(L?"border":"content"))return 0;for(;X<4;X+=2)$==="margin"&&(de+=m.css(w,$+et[X],!0,U)),L?($==="content"&&(de-=m.css(w,"padding"+et[X],!0,U)),$!=="margin"&&(de-=m.css(w,"border"+et[X]+"Width",!0,U))):(de+=m.css(w,"padding"+et[X],!0,U),$!=="padding"?de+=m.css(w,"border"+et[X]+"Width",!0,U):me+=m.css(w,"border"+et[X]+"Width",!0,U));return!L&&G>=0&&(de+=Math.max(0,Math.ceil(w["offset"+P[0].toUpperCase()+P.slice(1)]-G-de-me-.5))||0),de}function Oo(w,P,$){var L=Ct(w),U=!g.boxSizingReliable()||$,G=U&&m.css(w,"boxSizing",!1,L)==="border-box",X=G,me=qn(w,P,L),de="offset"+P[0].toUpperCase()+P.slice(1);if(Me.test(me)){if(!$)return me;me="auto"}return(!g.boxSizingReliable()&&G||!g.reliableTrDimensions()&&R(w,"tr")||me==="auto"||!parseFloat(me)&&m.css(w,"display",!1,L)==="inline")&&w.getClientRects().length&&(G=m.css(w,"boxSizing",!1,L)==="border-box",X=de in w,X&&(me=w[de])),me=parseFloat(me)||0,me+Wi(w,P,$||(G?"border":"content"),X,L,me)+"px"}m.extend({cssHooks:{opacity:{get:function(w,P){if(P){var $=qn(w,"opacity");return $===""?"1":$}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(w,P,$,L){if(!(!w||w.nodeType===3||w.nodeType===8||!w.style)){var U,G,X,me=Y(P),de=kt.test(P),Fe=w.style;if(de||(P=po(me)),X=m.cssHooks[P]||m.cssHooks[me],$!==void 0){if(G=typeof $,G==="string"&&(U=Xe.exec($))&&U[1]&&($=wt(w,P,U),G="number"),$==null||$!==$)return;G==="number"&&!de&&($+=U&&U[3]||(m.cssNumber[me]?"":"px")),!g.clearCloneStyle&&$===""&&P.indexOf("background")===0&&(Fe[P]="inherit"),(!X||!("set"in X)||($=X.set(w,$,L))!==void 0)&&(de?Fe.setProperty(P,$):Fe[P]=$)}else return X&&"get"in X&&(U=X.get(w,!1,L))!==void 0?U:Fe[P]}},css:function(w,P,$,L){var U,G,X,me=Y(P),de=kt.test(P);return de||(P=po(me)),X=m.cssHooks[P]||m.cssHooks[me],X&&"get"in X&&(U=X.get(w,!0,$)),U===void 0&&(U=qn(w,P,L)),U==="normal"&&P in Bl&&(U=Bl[P]),$===""||$?(G=parseFloat(U),$===!0||isFinite(G)?G||0:U):U}}),m.each(["height","width"],function(w,P){m.cssHooks[P]={get:function($,L,U){if(L)return Ia.test(m.css($,"display"))&&(!$.getClientRects().length||!$.getBoundingClientRect().width)?wn($,$a,function(){return Oo($,P,U)}):Oo($,P,U)},set:function($,L,U){var G,X=Ct($),me=!g.scrollboxSize()&&X.position==="absolute",de=me||U,Fe=de&&m.css($,"boxSizing",!1,X)==="border-box",Be=U?Wi($,P,U,Fe,X):0;return Fe&&me&&(Be-=Math.ceil($["offset"+P[0].toUpperCase()+P.slice(1)]-parseFloat(X[P])-Wi($,P,"border",!1,X)-.5)),Be&&(G=Xe.exec(L))&&(G[3]||"px")!=="px"&&($.style[P]=L,L=m.css($,P)),_s($,L,Be)}}}),m.cssHooks.marginLeft=Nr(g.reliableMarginLeft,function(w,P){if(P)return(parseFloat(qn(w,"marginLeft"))||w.getBoundingClientRect().left-wn(w,{marginLeft:0},function(){return w.getBoundingClientRect().left}))+"px"}),m.each({margin:"",padding:"",border:"Width"},function(w,P){m.cssHooks[w+P]={expand:function($){for(var L=0,U={},G=typeof $=="string"?$.split(" "):[$];L<4;L++)U[w+et[L]+P]=G[L]||G[L-2]||G[0];return U}},w!=="margin"&&(m.cssHooks[w+P].set=_s)}),m.fn.extend({css:function(w,P){return ce(this,function($,L,U){var G,X,me={},de=0;if(Array.isArray(L)){for(G=Ct($),X=L.length;de<X;de++)me[L[de]]=m.css($,L[de],!1,G);return me}return U!==void 0?m.style($,L,U):m.css($,L)},w,P,arguments.length>1)}});function ei(w,P,$,L,U){return new ei.prototype.init(w,P,$,L,U)}m.Tween=ei,ei.prototype={constructor:ei,init:function(w,P,$,L,U,G){this.elem=w,this.prop=$,this.easing=U||m.easing._default,this.options=P,this.start=this.now=this.cur(),this.end=L,this.unit=G||(m.cssNumber[$]?"":"px")},cur:function(){var w=ei.propHooks[this.prop];return w&&w.get?w.get(this):ei.propHooks._default.get(this)},run:function(w){var P,$=ei.propHooks[this.prop];return this.options.duration?this.pos=P=m.easing[this.easing](w,this.options.duration*w,0,1,this.options.duration):this.pos=P=w,this.now=(this.end-this.start)*P+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),$&&$.set?$.set(this):ei.propHooks._default.set(this),this}},ei.prototype.init.prototype=ei.prototype,ei.propHooks={_default:{get:function(w){var P;return w.elem.nodeType!==1||w.elem[w.prop]!=null&&w.elem.style[w.prop]==null?w.elem[w.prop]:(P=m.css(w.elem,w.prop,""),!P||P==="auto"?0:P)},set:function(w){m.fx.step[w.prop]?m.fx.step[w.prop](w):w.elem.nodeType===1&&(m.cssHooks[w.prop]||w.elem.style[po(w.prop)]!=null)?m.style(w.elem,w.prop,w.now+w.unit):w.elem[w.prop]=w.now}}},ei.propHooks.scrollTop=ei.propHooks.scrollLeft={set:function(w){w.elem.nodeType&&w.elem.parentNode&&(w.elem[w.prop]=w.now)}},m.easing={linear:function(w){return w},swing:function(w){return .5-Math.cos(w*Math.PI)/2},_default:"swing"},m.fx=ei.prototype.init,m.fx.step={};var ro,Ys,am=/^(?:toggle|show|hide)$/,Ah=/queueHooks$/;function jl(){Ys&&(v.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(jl):e.setTimeout(jl,m.fx.interval),m.fx.tick())}function Pc(){return e.setTimeout(function(){ro=void 0}),ro=Date.now()}function ws(w,P){var $,L=0,U={height:w};for(P=P?1:0;L<4;L+=2-P)$=et[L],U["margin"+$]=U["padding"+$]=w;return P&&(U.opacity=U.width=w),U}function Ph(w,P,$){for(var L,U=(Fa.tweeners[P]||[]).concat(Fa.tweeners["*"]),G=0,X=U.length;G<X;G++)if(L=U[G].call($,P,w))return L}function Eh(w,P,$){var L,U,G,X,me,de,Fe,Be,Ye="width"in P||"height"in P,Ne=this,He={},It=w.style,nn=w.nodeType&&Kt(w),vt=H.get(w,"fxshow");$.queue||(X=m._queueHooks(w,"fx"),X.unqueued==null&&(X.unqueued=0,me=X.empty.fire,X.empty.fire=function(){X.unqueued||me()}),X.unqueued++,Ne.always(function(){Ne.always(function(){X.unqueued--,m.queue(w,"fx").length||X.empty.fire()})}));for(L in P)if(U=P[L],am.test(U)){if(delete P[L],G=G||U==="toggle",U===(nn?"hide":"show"))if(U==="show"&&vt&&vt[L]!==void 0)nn=!0;else continue;He[L]=vt&&vt[L]||m.style(w,L)}if(de=!m.isEmptyObject(P),!(!de&&m.isEmptyObject(He))){Ye&&w.nodeType===1&&($.overflow=[It.overflow,It.overflowX,It.overflowY],Fe=vt&&vt.display,Fe==null&&(Fe=H.get(w,"display")),Be=m.css(w,"display"),Be==="none"&&(Fe?Be=Fe:(mi([w],!0),Fe=w.style.display||Fe,Be=m.css(w,"display"),mi([w]))),(Be==="inline"||Be==="inline-block"&&Fe!=null)&&m.css(w,"float")==="none"&&(de||(Ne.done(function(){It.display=Fe}),Fe==null&&(Be=It.display,Fe=Be==="none"?"":Be)),It.display="inline-block")),$.overflow&&(It.overflow="hidden",Ne.always(function(){It.overflow=$.overflow[0],It.overflowX=$.overflow[1],It.overflowY=$.overflow[2]})),de=!1;for(L in He)de||(vt?"hidden"in vt&&(nn=vt.hidden):vt=H.access(w,"fxshow",{display:Fe}),G&&(vt.hidden=!nn),nn&&mi([w],!0),Ne.done(function(){nn||mi([w]),H.remove(w,"fxshow");for(L in He)m.style(w,L,He[L])})),de=Ph(nn?vt[L]:0,L,Ne),L in vt||(vt[L]=de.start,nn&&(de.end=de.start,de.start=0))}}function Ks(w,P){var $,L,U,G,X;for($ in w)if(L=Y($),U=P[L],G=w[$],Array.isArray(G)&&(U=G[1],G=w[$]=G[0]),$!==L&&(w[L]=G,delete w[$]),X=m.cssHooks[L],X&&"expand"in X){G=X.expand(G),delete w[L];for($ in G)$ in w||(w[$]=G[$],P[$]=U)}else P[L]=U}function Fa(w,P,$){var L,U,G=0,X=Fa.prefilters.length,me=m.Deferred().always(function(){delete de.elem}),de=function(){if(U)return!1;for(var Ye=ro||Pc(),Ne=Math.max(0,Fe.startTime+Fe.duration-Ye),He=Ne/Fe.duration||0,It=1-He,nn=0,vt=Fe.tweens.length;nn<vt;nn++)Fe.tweens[nn].run(It);return me.notifyWith(w,[Fe,It,Ne]),It<1&&vt?Ne:(vt||me.notifyWith(w,[Fe,1,0]),me.resolveWith(w,[Fe]),!1)},Fe=me.promise({elem:w,props:m.extend({},P),opts:m.extend(!0,{specialEasing:{},easing:m.easing._default},$),originalProperties:P,originalOptions:$,startTime:ro||Pc(),duration:$.duration,tweens:[],createTween:function(Ye,Ne){var He=m.Tween(w,Fe.opts,Ye,Ne,Fe.opts.specialEasing[Ye]||Fe.opts.easing);return Fe.tweens.push(He),He},stop:function(Ye){var Ne=0,He=Ye?Fe.tweens.length:0;if(U)return this;for(U=!0;Ne<He;Ne++)Fe.tweens[Ne].run(1);return Ye?(me.notifyWith(w,[Fe,1,0]),me.resolveWith(w,[Fe,Ye])):me.rejectWith(w,[Fe,Ye]),this}}),Be=Fe.props;for(Ks(Be,Fe.opts.specialEasing);G<X;G++)if(L=Fa.prefilters[G].call(Fe,w,Be,Fe.opts),L)return y(L.stop)&&(m._queueHooks(Fe.elem,Fe.opts.queue).stop=L.stop.bind(L)),L;return m.map(Be,Ph,Fe),y(Fe.opts.start)&&Fe.opts.start.call(w,Fe),Fe.progress(Fe.opts.progress).done(Fe.opts.done,Fe.opts.complete).fail(Fe.opts.fail).always(Fe.opts.always),m.fx.timer(m.extend(de,{elem:w,anim:Fe,queue:Fe.opts.queue})),Fe}m.Animation=m.extend(Fa,{tweeners:{"*":[function(w,P){var $=this.createTween(w,P);return wt($.elem,w,Xe.exec(P),$),$}]},tweener:function(w,P){y(w)?(P=w,w=["*"]):w=w.match(se);for(var $,L=0,U=w.length;L<U;L++)$=w[L],Fa.tweeners[$]=Fa.tweeners[$]||[],Fa.tweeners[$].unshift(P)},prefilters:[Eh],prefilter:function(w,P){P?Fa.prefilters.unshift(w):Fa.prefilters.push(w)}}),m.speed=function(w,P,$){var L=w&&typeof w=="object"?m.extend({},w):{complete:$||!$&&P||y(w)&&w,duration:w,easing:$&&P||P&&!y(P)&&P};return m.fx.off?L.duration=0:typeof L.duration!="number"&&(L.duration in m.fx.speeds?L.duration=m.fx.speeds[L.duration]:L.duration=m.fx.speeds._default),(L.queue==null||L.queue===!0)&&(L.queue="fx"),L.old=L.complete,L.complete=function(){y(L.old)&&L.old.call(this),L.queue&&m.dequeue(this,L.queue)},L},m.fn.extend({fadeTo:function(w,P,$,L){return this.filter(Kt).css("opacity",0).show().end().animate({opacity:P},w,$,L)},animate:function(w,P,$,L){var U=m.isEmptyObject(w),G=m.speed(P,$,L),X=function(){var me=Fa(this,m.extend({},w),G);(U||H.get(this,"finish"))&&me.stop(!0)};return X.finish=X,U||G.queue===!1?this.each(X):this.queue(G.queue,X)},stop:function(w,P,$){var L=function(U){var G=U.stop;delete U.stop,G($)};return typeof w!="string"&&($=P,P=w,w=void 0),P&&this.queue(w||"fx",[]),this.each(function(){var U=!0,G=w!=null&&w+"queueHooks",X=m.timers,me=H.get(this);if(G)me[G]&&me[G].stop&&L(me[G]);else for(G in me)me[G]&&me[G].stop&&Ah.test(G)&&L(me[G]);for(G=X.length;G--;)X[G].elem===this&&(w==null||X[G].queue===w)&&(X[G].anim.stop($),U=!1,X.splice(G,1));(U||!$)&&m.dequeue(this,w)})},finish:function(w){return w!==!1&&(w=w||"fx"),this.each(function(){var P,$=H.get(this),L=$[w+"queue"],U=$[w+"queueHooks"],G=m.timers,X=L?L.length:0;for($.finish=!0,m.queue(this,w,[]),U&&U.stop&&U.stop.call(this,!0),P=G.length;P--;)G[P].elem===this&&G[P].queue===w&&(G[P].anim.stop(!0),G.splice(P,1));for(P=0;P<X;P++)L[P]&&L[P].finish&&L[P].finish.call(this);delete $.finish})}}),m.each(["toggle","show","hide"],function(w,P){var $=m.fn[P];m.fn[P]=function(L,U,G){return L==null||typeof L=="boolean"?$.apply(this,arguments):this.animate(ws(P,!0),L,U,G)}}),m.each({slideDown:ws("show"),slideUp:ws("hide"),slideToggle:ws("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(w,P){m.fn[w]=function($,L,U){return this.animate(P,$,L,U)}}),m.timers=[],m.fx.tick=function(){var w,P=0,$=m.timers;for(ro=Date.now();P<$.length;P++)w=$[P],!w()&&$[P]===w&&$.splice(P--,1);$.length||m.fx.stop(),ro=void 0},m.fx.timer=function(w){m.timers.push(w),m.fx.start()},m.fx.interval=13,m.fx.start=function(){Ys||(Ys=!0,jl())},m.fx.stop=function(){Ys=null},m.fx.speeds={slow:600,fast:200,_default:400},m.fn.delay=function(w,P){return w=m.fx&&m.fx.speeds[w]||w,P=P||"fx",this.queue(P,function($,L){var U=e.setTimeout($,w);L.stop=function(){e.clearTimeout(U)}})},function(){var w=v.createElement("input"),P=v.createElement("select"),$=P.appendChild(v.createElement("option"));w.type="checkbox",g.checkOn=w.value!=="",g.optSelected=$.selected,w=v.createElement("input"),w.value="t",w.type="radio",g.radioValue=w.value==="t"}();var KS,Rf=m.expr.attrHandle;m.fn.extend({attr:function(w,P){return ce(this,m.attr,w,P,arguments.length>1)},removeAttr:function(w){return this.each(function(){m.removeAttr(this,w)})}}),m.extend({attr:function(w,P,$){var L,U,G=w.nodeType;if(!(G===3||G===8||G===2)){if(typeof w.getAttribute>"u")return m.prop(w,P,$);if((G!==1||!m.isXMLDoc(w))&&(U=m.attrHooks[P.toLowerCase()]||(m.expr.match.bool.test(P)?KS:void 0)),$!==void 0){if($===null){m.removeAttr(w,P);return}return U&&"set"in U&&(L=U.set(w,$,P))!==void 0?L:(w.setAttribute(P,$+""),$)}return U&&"get"in U&&(L=U.get(w,P))!==null?L:(L=m.find.attr(w,P),L??void 0)}},attrHooks:{type:{set:function(w,P){if(!g.radioValue&&P==="radio"&&R(w,"input")){var $=w.value;return w.setAttribute("type",P),$&&(w.value=$),P}}}},removeAttr:function(w,P){var $,L=0,U=P&&P.match(se);if(U&&w.nodeType===1)for(;$=U[L++];)w.removeAttribute($)}}),KS={set:function(w,P,$){return P===!1?m.removeAttr(w,$):w.setAttribute($,$),$}},m.each(m.expr.match.bool.source.match(/\w+/g),function(w,P){var $=Rf[P]||m.find.attr;Rf[P]=function(L,U,G){var X,me,de=U.toLowerCase();return G||(me=Rf[de],Rf[de]=X,X=$(L,U,G)!=null?de:null,Rf[de]=me),X}});var XS=/^(?:input|select|textarea|button)$/i,iy=/^(?:a|area)$/i;m.fn.extend({prop:function(w,P){return ce(this,m.prop,w,P,arguments.length>1)},removeProp:function(w){return this.each(function(){delete this[m.propFix[w]||w]})}}),m.extend({prop:function(w,P,$){var L,U,G=w.nodeType;if(!(G===3||G===8||G===2))return(G!==1||!m.isXMLDoc(w))&&(P=m.propFix[P]||P,U=m.propHooks[P]),$!==void 0?U&&"set"in U&&(L=U.set(w,$,P))!==void 0?L:w[P]=$:U&&"get"in U&&(L=U.get(w,P))!==null?L:w[P]},propHooks:{tabIndex:{get:function(w){var P=m.find.attr(w,"tabindex");return P?parseInt(P,10):XS.test(w.nodeName)||iy.test(w.nodeName)&&w.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(m.propHooks.selected={get:function(w){var P=w.parentNode;return P&&P.parentNode&&P.parentNode.selectedIndex,null},set:function(w){var P=w.parentNode;P&&(P.selectedIndex,P.parentNode&&P.parentNode.selectedIndex)}}),m.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){m.propFix[this.toLowerCase()]=this});function Eu(w){var P=w.match(se)||[];return P.join(" ")}function Ec(w){return w.getAttribute&&w.getAttribute("class")||""}function Oh(w){return Array.isArray(w)?w:typeof w=="string"?w.match(se)||[]:[]}m.fn.extend({addClass:function(w){var P,$,L,U,G,X;return y(w)?this.each(function(me){m(this).addClass(w.call(this,me,Ec(this)))}):(P=Oh(w),P.length?this.each(function(){if(L=Ec(this),$=this.nodeType===1&&" "+Eu(L)+" ",$){for(G=0;G<P.length;G++)U=P[G],$.indexOf(" "+U+" ")<0&&($+=U+" ");X=Eu($),L!==X&&this.setAttribute("class",X)}}):this)},removeClass:function(w){var P,$,L,U,G,X;return y(w)?this.each(function(me){m(this).removeClass(w.call(this,me,Ec(this)))}):arguments.length?(P=Oh(w),P.length?this.each(function(){if(L=Ec(this),$=this.nodeType===1&&" "+Eu(L)+" ",$){for(G=0;G<P.length;G++)for(U=P[G];$.indexOf(" "+U+" ")>-1;)$=$.replace(" "+U+" "," ");X=Eu($),L!==X&&this.setAttribute("class",X)}}):this):this.attr("class","")},toggleClass:function(w,P){var $,L,U,G,X=typeof w,me=X==="string"||Array.isArray(w);return y(w)?this.each(function(de){m(this).toggleClass(w.call(this,de,Ec(this),P),P)}):typeof P=="boolean"&&me?P?this.addClass(w):this.removeClass(w):($=Oh(w),this.each(function(){if(me)for(G=m(this),U=0;U<$.length;U++)L=$[U],G.hasClass(L)?G.removeClass(L):G.addClass(L);else(w===void 0||X==="boolean")&&(L=Ec(this),L&&H.set(this,"__className__",L),this.setAttribute&&this.setAttribute("class",L||w===!1?"":H.get(this,"__className__")||""))}))},hasClass:function(w){var P,$,L=0;for(P=" "+w+" ";$=this[L++];)if($.nodeType===1&&(" "+Eu(Ec($))+" ").indexOf(P)>-1)return!0;return!1}});var oy=/\r/g;m.fn.extend({val:function(w){var P,$,L,U=this[0];return arguments.length?(L=y(w),this.each(function(G){var X;this.nodeType===1&&(L?X=w.call(this,G,m(this).val()):X=w,X==null?X="":typeof X=="number"?X+="":Array.isArray(X)&&(X=m.map(X,function(me){return me==null?"":me+""})),P=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()],(!P||!("set"in P)||P.set(this,X,"value")===void 0)&&(this.value=X))})):U?(P=m.valHooks[U.type]||m.valHooks[U.nodeName.toLowerCase()],P&&"get"in P&&($=P.get(U,"value"))!==void 0?$:($=U.value,typeof $=="string"?$.replace(oy,""):$??"")):void 0}}),m.extend({valHooks:{option:{get:function(w){var P=m.find.attr(w,"value");return P??Eu(m.text(w))}},select:{get:function(w){var P,$,L,U=w.options,G=w.selectedIndex,X=w.type==="select-one",me=X?null:[],de=X?G+1:U.length;for(G<0?L=de:L=X?G:0;L<de;L++)if($=U[L],($.selected||L===G)&&!$.disabled&&(!$.parentNode.disabled||!R($.parentNode,"optgroup"))){if(P=m($).val(),X)return P;me.push(P)}return me},set:function(w,P){for(var $,L,U=w.options,G=m.makeArray(P),X=U.length;X--;)L=U[X],(L.selected=m.inArray(m.valHooks.option.get(L),G)>-1)&&($=!0);return $||(w.selectedIndex=-1),G}}}}),m.each(["radio","checkbox"],function(){m.valHooks[this]={set:function(w,P){if(Array.isArray(P))return w.checked=m.inArray(m(w).val(),P)>-1}},g.checkOn||(m.valHooks[this].get=function(w){return w.getAttribute("value")===null?"on":w.value})}),g.focusin="onfocusin"in e;var Ou=/^(?:focusinfocus|focusoutblur)$/,ay=function(w){w.stopPropagation()};m.extend(m.event,{trigger:function(w,P,$,L){var U,G,X,me,de,Fe,Be,Ye,Ne=[$||v],He=f.call(w,"type")?w.type:w,It=f.call(w,"namespace")?w.namespace.split("."):[];if(G=Ye=X=$=$||v,!($.nodeType===3||$.nodeType===8)&&!Ou.test(He+m.event.triggered)&&(He.indexOf(".")>-1&&(It=He.split("."),He=It.shift(),It.sort()),de=He.indexOf(":")<0&&"on"+He,w=w[m.expando]?w:new m.Event(He,typeof w=="object"&&w),w.isTrigger=L?2:3,w.namespace=It.join("."),w.rnamespace=w.namespace?new RegExp("(^|\\.)"+It.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,w.result=void 0,w.target||(w.target=$),P=P==null?[w]:m.makeArray(P,[w]),Be=m.event.special[He]||{},!(!L&&Be.trigger&&Be.trigger.apply($,P)===!1))){if(!L&&!Be.noBubble&&!S($)){for(me=Be.delegateType||He,Ou.test(me+He)||(G=G.parentNode);G;G=G.parentNode)Ne.push(G),X=G;X===($.ownerDocument||v)&&Ne.push(X.defaultView||X.parentWindow||e)}for(U=0;(G=Ne[U++])&&!w.isPropagationStopped();)Ye=G,w.type=U>1?me:Be.bindType||He,Fe=(H.get(G,"events")||Object.create(null))[w.type]&&H.get(G,"handle"),Fe&&Fe.apply(G,P),Fe=de&&G[de],Fe&&Fe.apply&&O(G)&&(w.result=Fe.apply(G,P),w.result===!1&&w.preventDefault());return w.type=He,!L&&!w.isDefaultPrevented()&&(!Be._default||Be._default.apply(Ne.pop(),P)===!1)&&O($)&&de&&y($[He])&&!S($)&&(X=$[de],X&&($[de]=null),m.event.triggered=He,w.isPropagationStopped()&&Ye.addEventListener(He,ay),$[He](),w.isPropagationStopped()&&Ye.removeEventListener(He,ay),m.event.triggered=void 0,X&&($[de]=X)),w.result}},simulate:function(w,P,$){var L=m.extend(new m.Event,$,{type:w,isSimulated:!0});m.event.trigger(L,null,P)}}),m.fn.extend({trigger:function(w,P){return this.each(function(){m.event.trigger(w,P,this)})},triggerHandler:function(w,P){var $=this[0];if($)return m.event.trigger(w,P,$,!0)}}),g.focusin||m.each({focus:"focusin",blur:"focusout"},function(w,P){var $=function(L){m.event.simulate(P,L.target,m.event.fix(L))};m.event.special[P]={setup:function(){var L=this.ownerDocument||this.document||this,U=H.access(L,P);U||L.addEventListener(w,$,!0),H.access(L,P,(U||0)+1)},teardown:function(){var L=this.ownerDocument||this.document||this,U=H.access(L,P)-1;U?H.access(L,P,U):(L.removeEventListener(w,$,!0),H.remove(L,P))}}});var zf=e.location,JS={guid:Date.now()},sm=/\?/;m.parseXML=function(w){var P,$;if(!w||typeof w!="string")return null;try{P=new e.DOMParser().parseFromString(w,"text/xml")}catch{}return $=P&&P.getElementsByTagName("parsererror")[0],(!P||$)&&m.error("Invalid XML: "+($?m.map($.childNodes,function(L){return L.textContent}).join(`
`):w)),P};var ZS=/\[\]$/,sy=/\r?\n/g,QS=/^(?:submit|button|image|reset|file)$/i,lA=/^(?:input|select|textarea|keygen)/i;function ly(w,P,$,L){var U;if(Array.isArray(P))m.each(P,function(G,X){$||ZS.test(w)?L(w,X):ly(w+"["+(typeof X=="object"&&X!=null?G:"")+"]",X,$,L)});else if(!$&&C(P)==="object")for(U in P)ly(w+"["+U+"]",P[U],$,L);else L(w,P)}m.param=function(w,P){var $,L=[],U=function(G,X){var me=y(X)?X():X;L[L.length]=encodeURIComponent(G)+"="+encodeURIComponent(me??"")};if(w==null)return"";if(Array.isArray(w)||w.jquery&&!m.isPlainObject(w))m.each(w,function(){U(this.name,this.value)});else for($ in w)ly($,w[$],P,U);return L.join("&")},m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var w=m.prop(this,"elements");return w?m.makeArray(w):this}).filter(function(){var w=this.type;return this.name&&!m(this).is(":disabled")&&lA.test(this.nodeName)&&!QS.test(w)&&(this.checked||!Lr.test(w))}).map(function(w,P){var $=m(this).val();return $==null?null:Array.isArray($)?m.map($,function(L){return{name:P.name,value:L.replace(sy,`\r
`)}}):{name:P.name,value:$.replace(sy,`\r
`)}}).get()}});var cA=/%20/g,e_=/#.*$/,uA=/([?&])_=[^&]*/,fA=/^(.*?):[ \t]*([^\r\n]*)$/mg,dA=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,hA=/^(?:GET|HEAD)$/,cy=/^\/\//,t_={},uy={},n_="*/".concat("*"),fy=v.createElement("a");fy.href=zf.href;function r_(w){return function(P,$){typeof P!="string"&&($=P,P="*");var L,U=0,G=P.toLowerCase().match(se)||[];if(y($))for(;L=G[U++];)L[0]==="+"?(L=L.slice(1)||"*",(w[L]=w[L]||[]).unshift($)):(w[L]=w[L]||[]).push($)}}function yr(w,P,$,L){var U={},G=w===uy;function X(me){var de;return U[me]=!0,m.each(w[me]||[],function(Fe,Be){var Ye=Be(P,$,L);if(typeof Ye=="string"&&!G&&!U[Ye])return P.dataTypes.unshift(Ye),X(Ye),!1;if(G)return!(de=Ye)}),de}return X(P.dataTypes[0])||!U["*"]&&X("*")}function lr(w,P){var $,L,U=m.ajaxSettings.flatOptions||{};for($ in P)P[$]!==void 0&&((U[$]?w:L||(L={}))[$]=P[$]);return L&&m.extend(!0,w,L),w}function pA(w,P,$){for(var L,U,G,X,me=w.contents,de=w.dataTypes;de[0]==="*";)de.shift(),L===void 0&&(L=w.mimeType||P.getResponseHeader("Content-Type"));if(L){for(U in me)if(me[U]&&me[U].test(L)){de.unshift(U);break}}if(de[0]in $)G=de[0];else{for(U in $){if(!de[0]||w.converters[U+" "+de[0]]){G=U;break}X||(X=U)}G=G||X}if(G)return G!==de[0]&&de.unshift(G),$[G]}function gA(w,P,$,L){var U,G,X,me,de,Fe={},Be=w.dataTypes.slice();if(Be[1])for(X in w.converters)Fe[X.toLowerCase()]=w.converters[X];for(G=Be.shift();G;)if(w.responseFields[G]&&($[w.responseFields[G]]=P),!de&&L&&w.dataFilter&&(P=w.dataFilter(P,w.dataType)),de=G,G=Be.shift(),G){if(G==="*")G=de;else if(de!=="*"&&de!==G){if(X=Fe[de+" "+G]||Fe["* "+G],!X){for(U in Fe)if(me=U.split(" "),me[1]===G&&(X=Fe[de+" "+me[0]]||Fe["* "+me[0]],X)){X===!0?X=Fe[U]:Fe[U]!==!0&&(G=me[0],Be.unshift(me[1]));break}}if(X!==!0)if(X&&w.throws)P=X(P);else try{P=X(P)}catch(Ye){return{state:"parsererror",error:X?Ye:"No conversion from "+de+" to "+G}}}}return{state:"success",data:P}}m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:zf.href,type:"GET",isLocal:dA.test(zf.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":n_,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(w,P){return P?lr(lr(w,m.ajaxSettings),P):lr(m.ajaxSettings,w)},ajaxPrefilter:r_(t_),ajaxTransport:r_(uy),ajax:function(w,P){typeof w=="object"&&(P=w,w=void 0),P=P||{};var $,L,U,G,X,me,de,Fe,Be,Ye,Ne=m.ajaxSetup({},P),He=Ne.context||Ne,It=Ne.context&&(He.nodeType||He.jquery)?m(He):m.event,nn=m.Deferred(),vt=m.Callbacks("once memory"),ti=Ne.statusCode||{},ni={},Cn={},On="canceled",Jt={readyState:0,getResponseHeader:function(In){var Hr;if(de){if(!G)for(G={};Hr=fA.exec(U);)G[Hr[1].toLowerCase()+" "]=(G[Hr[1].toLowerCase()+" "]||[]).concat(Hr[2]);Hr=G[In.toLowerCase()+" "]}return Hr==null?null:Hr.join(", ")},getAllResponseHeaders:function(){return de?U:null},setRequestHeader:function(In,Hr){return de==null&&(In=Cn[In.toLowerCase()]=Cn[In.toLowerCase()]||In,ni[In]=Hr),this},overrideMimeType:function(In){return de==null&&(Ne.mimeType=In),this},statusCode:function(In){var Hr;if(In)if(de)Jt.always(In[Jt.status]);else for(Hr in In)ti[Hr]=[ti[Hr],In[Hr]];return this},abort:function(In){var Hr=In||On;return $&&$.abort(Hr),Io(0,Hr),this}};if(nn.promise(Jt),Ne.url=((w||Ne.url||zf.href)+"").replace(cy,zf.protocol+"//"),Ne.type=P.method||P.type||Ne.method||Ne.type,Ne.dataTypes=(Ne.dataType||"*").toLowerCase().match(se)||[""],Ne.crossDomain==null){me=v.createElement("a");try{me.href=Ne.url,me.href=me.href,Ne.crossDomain=fy.protocol+"//"+fy.host!=me.protocol+"//"+me.host}catch{Ne.crossDomain=!0}}if(Ne.data&&Ne.processData&&typeof Ne.data!="string"&&(Ne.data=m.param(Ne.data,Ne.traditional)),yr(t_,Ne,P,Jt),de)return Jt;Fe=m.event&&Ne.global,Fe&&m.active++===0&&m.event.trigger("ajaxStart"),Ne.type=Ne.type.toUpperCase(),Ne.hasContent=!hA.test(Ne.type),L=Ne.url.replace(e_,""),Ne.hasContent?Ne.data&&Ne.processData&&(Ne.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(Ne.data=Ne.data.replace(cA,"+")):(Ye=Ne.url.slice(L.length),Ne.data&&(Ne.processData||typeof Ne.data=="string")&&(L+=(sm.test(L)?"&":"?")+Ne.data,delete Ne.data),Ne.cache===!1&&(L=L.replace(uA,"$1"),Ye=(sm.test(L)?"&":"?")+"_="+JS.guid+++Ye),Ne.url=L+Ye),Ne.ifModified&&(m.lastModified[L]&&Jt.setRequestHeader("If-Modified-Since",m.lastModified[L]),m.etag[L]&&Jt.setRequestHeader("If-None-Match",m.etag[L])),(Ne.data&&Ne.hasContent&&Ne.contentType!==!1||P.contentType)&&Jt.setRequestHeader("Content-Type",Ne.contentType),Jt.setRequestHeader("Accept",Ne.dataTypes[0]&&Ne.accepts[Ne.dataTypes[0]]?Ne.accepts[Ne.dataTypes[0]]+(Ne.dataTypes[0]!=="*"?", "+n_+"; q=0.01":""):Ne.accepts["*"]);for(Be in Ne.headers)Jt.setRequestHeader(Be,Ne.headers[Be]);if(Ne.beforeSend&&(Ne.beforeSend.call(He,Jt,Ne)===!1||de))return Jt.abort();if(On="abort",vt.add(Ne.complete),Jt.done(Ne.success),Jt.fail(Ne.error),$=yr(uy,Ne,P,Jt),!$)Io(-1,"No Transport");else{if(Jt.readyState=1,Fe&&It.trigger("ajaxSend",[Jt,Ne]),de)return Jt;Ne.async&&Ne.timeout>0&&(X=e.setTimeout(function(){Jt.abort("timeout")},Ne.timeout));try{de=!1,$.send(ni,Io)}catch(In){if(de)throw In;Io(-1,In)}}function Io(In,Hr,$h,lm){var $o,Xs,La,Fo,Hl,la=Hr;de||(de=!0,X&&e.clearTimeout(X),$=void 0,U=lm||"",Jt.readyState=In>0?4:0,$o=In>=200&&In<300||In===304,$h&&(Fo=pA(Ne,Jt,$h)),!$o&&m.inArray("script",Ne.dataTypes)>-1&&m.inArray("json",Ne.dataTypes)<0&&(Ne.converters["text script"]=function(){}),Fo=gA(Ne,Fo,Jt,$o),$o?(Ne.ifModified&&(Hl=Jt.getResponseHeader("Last-Modified"),Hl&&(m.lastModified[L]=Hl),Hl=Jt.getResponseHeader("etag"),Hl&&(m.etag[L]=Hl)),In===204||Ne.type==="HEAD"?la="nocontent":In===304?la="notmodified":(la=Fo.state,Xs=Fo.data,La=Fo.error,$o=!La)):(La=la,(In||!la)&&(la="error",In<0&&(In=0))),Jt.status=In,Jt.statusText=(Hr||la)+"",$o?nn.resolveWith(He,[Xs,la,Jt]):nn.rejectWith(He,[Jt,la,La]),Jt.statusCode(ti),ti=void 0,Fe&&It.trigger($o?"ajaxSuccess":"ajaxError",[Jt,Ne,$o?Xs:La]),vt.fireWith(He,[Jt,la]),Fe&&(It.trigger("ajaxComplete",[Jt,Ne]),--m.active||m.event.trigger("ajaxStop")))}return Jt},getJSON:function(w,P,$){return m.get(w,P,$,"json")},getScript:function(w,P){return m.get(w,void 0,P,"script")}}),m.each(["get","post"],function(w,P){m[P]=function($,L,U,G){return y(L)&&(G=G||U,U=L,L=void 0),m.ajax(m.extend({url:$,type:P,dataType:G,data:L,success:U},m.isPlainObject($)&&$))}}),m.ajaxPrefilter(function(w){var P;for(P in w.headers)P.toLowerCase()==="content-type"&&(w.contentType=w.headers[P]||"")}),m._evalUrl=function(w,P,$){return m.ajax({url:w,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(L){m.globalEval(L,P,$)}})},m.fn.extend({wrapAll:function(w){var P;return this[0]&&(y(w)&&(w=w.call(this[0])),P=m(w,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&P.insertBefore(this[0]),P.map(function(){for(var $=this;$.firstElementChild;)$=$.firstElementChild;return $}).append(this)),this},wrapInner:function(w){return y(w)?this.each(function(P){m(this).wrapInner(w.call(this,P))}):this.each(function(){var P=m(this),$=P.contents();$.length?$.wrapAll(w):P.append(w)})},wrap:function(w){var P=y(w);return this.each(function($){m(this).wrapAll(P?w.call(this,$):w)})},unwrap:function(w){return this.parent(w).not("body").each(function(){m(this).replaceWith(this.childNodes)}),this}}),m.expr.pseudos.hidden=function(w){return!m.expr.pseudos.visible(w)},m.expr.pseudos.visible=function(w){return!!(w.offsetWidth||w.offsetHeight||w.getClientRects().length)},m.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch{}};var mA={0:200,1223:204},Ih=m.ajaxSettings.xhr();g.cors=!!Ih&&"withCredentials"in Ih,g.ajax=Ih=!!Ih,m.ajaxTransport(function(w){var P,$;if(g.cors||Ih&&!w.crossDomain)return{send:function(L,U){var G,X=w.xhr();if(X.open(w.type,w.url,w.async,w.username,w.password),w.xhrFields)for(G in w.xhrFields)X[G]=w.xhrFields[G];w.mimeType&&X.overrideMimeType&&X.overrideMimeType(w.mimeType),!w.crossDomain&&!L["X-Requested-With"]&&(L["X-Requested-With"]="XMLHttpRequest");for(G in L)X.setRequestHeader(G,L[G]);P=function(me){return function(){P&&(P=$=X.onload=X.onerror=X.onabort=X.ontimeout=X.onreadystatechange=null,me==="abort"?X.abort():me==="error"?typeof X.status!="number"?U(0,"error"):U(X.status,X.statusText):U(mA[X.status]||X.status,X.statusText,(X.responseType||"text")!=="text"||typeof X.responseText!="string"?{binary:X.response}:{text:X.responseText},X.getAllResponseHeaders()))}},X.onload=P(),$=X.onerror=X.ontimeout=P("error"),X.onabort!==void 0?X.onabort=$:X.onreadystatechange=function(){X.readyState===4&&e.setTimeout(function(){P&&$()})},P=P("abort");try{X.send(w.hasContent&&w.data||null)}catch(me){if(P)throw me}},abort:function(){P&&P()}}}),m.ajaxPrefilter(function(w){w.crossDomain&&(w.contents.script=!1)}),m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(w){return m.globalEval(w),w}}}),m.ajaxPrefilter("script",function(w){w.cache===void 0&&(w.cache=!1),w.crossDomain&&(w.type="GET")}),m.ajaxTransport("script",function(w){if(w.crossDomain||w.scriptAttrs){var P,$;return{send:function(L,U){P=m("<script>").attr(w.scriptAttrs||{}).prop({charset:w.scriptCharset,src:w.url}).on("load error",$=function(G){P.remove(),$=null,G&&U(G.type==="error"?404:200,G.type)}),v.head.appendChild(P[0])},abort:function(){$&&$()}}}});var i_=[],dy=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var w=i_.pop()||m.expando+"_"+JS.guid++;return this[w]=!0,w}}),m.ajaxPrefilter("json jsonp",function(w,P,$){var L,U,G,X=w.jsonp!==!1&&(dy.test(w.url)?"url":typeof w.data=="string"&&(w.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&dy.test(w.data)&&"data");if(X||w.dataTypes[0]==="jsonp")return L=w.jsonpCallback=y(w.jsonpCallback)?w.jsonpCallback():w.jsonpCallback,X?w[X]=w[X].replace(dy,"$1"+L):w.jsonp!==!1&&(w.url+=(sm.test(w.url)?"&":"?")+w.jsonp+"="+L),w.converters["script json"]=function(){return G||m.error(L+" was not called"),G[0]},w.dataTypes[0]="json",U=e[L],e[L]=function(){G=arguments},$.always(function(){U===void 0?m(e).removeProp(L):e[L]=U,w[L]&&(w.jsonpCallback=P.jsonpCallback,i_.push(L)),G&&y(U)&&U(G[0]),G=U=void 0}),"script"}),g.createHTMLDocument=function(){var w=v.implementation.createHTMLDocument("").body;return w.innerHTML="<form></form><form></form>",w.childNodes.length===2}(),m.parseHTML=function(w,P,$){if(typeof w!="string")return[];typeof P=="boolean"&&($=P,P=!1);var L,U,G;return P||(g.createHTMLDocument?(P=v.implementation.createHTMLDocument(""),L=P.createElement("base"),L.href=v.location.href,P.head.appendChild(L)):P=v),U=z.exec(w),G=!$&&[],U?[P.createElement(U[1])]:(U=Tu([w],P,G),G&&G.length&&m(G).remove(),m.merge([],U.childNodes))},m.fn.load=function(w,P,$){var L,U,G,X=this,me=w.indexOf(" ");return me>-1&&(L=Eu(w.slice(me)),w=w.slice(0,me)),y(P)?($=P,P=void 0):P&&typeof P=="object"&&(U="POST"),X.length>0&&m.ajax({url:w,type:U||"GET",dataType:"html",data:P}).done(function(de){G=arguments,X.html(L?m("<div>").append(m.parseHTML(de)).find(L):de)}).always($&&function(de,Fe){X.each(function(){$.apply(this,G||[de.responseText,Fe,de])})}),this},m.expr.pseudos.animated=function(w){return m.grep(m.timers,function(P){return w===P.elem}).length},m.offset={setOffset:function(w,P,$){var L,U,G,X,me,de,Fe,Be=m.css(w,"position"),Ye=m(w),Ne={};Be==="static"&&(w.style.position="relative"),me=Ye.offset(),G=m.css(w,"top"),de=m.css(w,"left"),Fe=(Be==="absolute"||Be==="fixed")&&(G+de).indexOf("auto")>-1,Fe?(L=Ye.position(),X=L.top,U=L.left):(X=parseFloat(G)||0,U=parseFloat(de)||0),y(P)&&(P=P.call(w,$,m.extend({},me))),P.top!=null&&(Ne.top=P.top-me.top+X),P.left!=null&&(Ne.left=P.left-me.left+U),"using"in P?P.using.call(w,Ne):Ye.css(Ne)}},m.fn.extend({offset:function(w){if(arguments.length)return w===void 0?this:this.each(function(U){m.offset.setOffset(this,w,U)});var P,$,L=this[0];if(L)return L.getClientRects().length?(P=L.getBoundingClientRect(),$=L.ownerDocument.defaultView,{top:P.top+$.pageYOffset,left:P.left+$.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var w,P,$,L=this[0],U={top:0,left:0};if(m.css(L,"position")==="fixed")P=L.getBoundingClientRect();else{for(P=this.offset(),$=L.ownerDocument,w=L.offsetParent||$.documentElement;w&&(w===$.body||w===$.documentElement)&&m.css(w,"position")==="static";)w=w.parentNode;w&&w!==L&&w.nodeType===1&&(U=m(w).offset(),U.top+=m.css(w,"borderTopWidth",!0),U.left+=m.css(w,"borderLeftWidth",!0))}return{top:P.top-U.top-m.css(L,"marginTop",!0),left:P.left-U.left-m.css(L,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var w=this.offsetParent;w&&m.css(w,"position")==="static";)w=w.offsetParent;return w||Qe})}}),m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(w,P){var $=P==="pageYOffset";m.fn[w]=function(L){return ce(this,function(U,G,X){var me;if(S(U)?me=U:U.nodeType===9&&(me=U.defaultView),X===void 0)return me?me[P]:U[G];me?me.scrollTo($?me.pageXOffset:X,$?X:me.pageYOffset):U[G]=X},w,L,arguments.length)}}),m.each(["top","left"],function(w,P){m.cssHooks[P]=Nr(g.pixelPosition,function($,L){if(L)return L=qn($,P),Me.test(L)?m($).position()[P]+"px":L})}),m.each({Height:"height",Width:"width"},function(w,P){m.each({padding:"inner"+w,content:P,"":"outer"+w},function($,L){m.fn[L]=function(U,G){var X=arguments.length&&($||typeof U!="boolean"),me=$||(U===!0||G===!0?"margin":"border");return ce(this,function(de,Fe,Be){var Ye;return S(de)?L.indexOf("outer")===0?de["inner"+w]:de.document.documentElement["client"+w]:de.nodeType===9?(Ye=de.documentElement,Math.max(de.body["scroll"+w],Ye["scroll"+w],de.body["offset"+w],Ye["offset"+w],Ye["client"+w])):Be===void 0?m.css(de,Fe,me):m.style(de,Fe,Be,me)},P,X?U:void 0,X)}})}),m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(w,P){m.fn[P]=function($){return this.on(P,$)}}),m.fn.extend({bind:function(w,P,$){return this.on(w,null,P,$)},unbind:function(w,P){return this.off(w,null,P)},delegate:function(w,P,$,L){return this.on(P,w,$,L)},undelegate:function(w,P,$){return arguments.length===1?this.off(w,"**"):this.off(P,w||"**",$)},hover:function(w,P){return this.mouseenter(w).mouseleave(P||w)}}),m.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(w,P){m.fn[P]=function($,L){return arguments.length>0?this.on(P,null,$,L):this.trigger(P)}});var o_=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;m.proxy=function(w,P){var $,L,U;if(typeof P=="string"&&($=w[P],P=w,w=$),!!y(w))return L=o.call(arguments,2),U=function(){return w.apply(P||this,L.concat(o.call(arguments)))},U.guid=w.guid=w.guid||m.guid++,U},m.holdReady=function(w){w?m.readyWait++:m.ready(!0)},m.isArray=Array.isArray,m.parseJSON=JSON.parse,m.nodeName=R,m.isFunction=y,m.isWindow=S,m.camelCase=Y,m.type=C,m.now=Date.now,m.isNumeric=function(w){var P=m.type(w);return(P==="number"||P==="string")&&!isNaN(w-parseFloat(w))},m.trim=function(w){return w==null?"":(w+"").replace(o_,"$1")};var vA=e.jQuery,Gi=e.$;return m.noConflict=function(w){return e.$===m&&(e.$=Gi),w&&e.jQuery===m&&(e.jQuery=vA),m},typeof n>"u"&&(e.jQuery=e.$=m),m})}(x7)),x7.exports}(function(t){(function(e){var n=typeof self=="object"&&self.self===self&&self||typeof ui=="object"&&ui.global===ui&&ui;{var r=SNe,i;try{i=$ae()}catch{}e(n,t,r,i)}})(function(e,n,r,i){var o=e.Backbone,a=Array.prototype.slice;n.VERSION="1.4.1",n.$=i,n.noConflict=function(){return e.Backbone=o,this},n.emulateHTTP=!1,n.emulateJSON=!1;var s=n.Events={},l=/\s+/,c,u=function(O,M,H,Q,ve){var ge=0,De;if(H&&typeof H=="object")for(Q!==void 0&&("context"in ve)&&ve.context===void 0&&(ve.context=Q),De=r.keys(H);ge<De.length;ge++)M=u(O,M,De[ge],H[De[ge]],ve);else if(H&&l.test(H))for(De=H.split(l);ge<De.length;ge++)M=O(M,De[ge],Q,ve);else M=O(M,H,Q,ve);return M};s.on=function(O,M,H){if(this._events=u(f,this._events||{},O,M,{context:H,ctx:this,listening:c}),c){var Q=this._listeners||(this._listeners={});Q[c.id]=c,c.interop=!1}return this},s.listenTo=function(O,M,H){if(!O)return this;var Q=O._listenId||(O._listenId=r.uniqueId("l")),ve=this._listeningTo||(this._listeningTo={}),ge=c=ve[Q];ge||(this._listenId||(this._listenId=r.uniqueId("l")),ge=c=ve[Q]=new v(this,O));var De=d(O,M,H,this);if(c=void 0,De)throw De;return ge.interop&&ge.on(M,H),this};var f=function(O,M,H,Q){if(H){var ve=O[M]||(O[M]=[]),ge=Q.context,De=Q.ctx,Le=Q.listening;Le&&Le.count++,ve.push({callback:H,context:ge,ctx:ge||De,listening:Le})}return O},d=function(O,M,H,Q){try{O.on(M,H,Q)}catch(ve){return ve}};s.off=function(O,M,H){return this._events?(this._events=u(h,this._events,O,M,{context:H,listeners:this._listeners}),this):this},s.stopListening=function(O,M,H){var Q=this._listeningTo;if(!Q)return this;for(var ve=O?[O._listenId]:r.keys(Q),ge=0;ge<ve.length;ge++){var De=Q[ve[ge]];if(!De)break;De.obj.off(M,H,this),De.interop&&De.off(M,H)}return r.isEmpty(Q)&&(this._listeningTo=void 0),this};var h=function(O,M,H,Q){if(O){var ve=Q.context,ge=Q.listeners,De=0,Le;if(!M&&!ve&&!H){for(Le=r.keys(ge);De<Le.length;De++)ge[Le[De]].cleanup();return}for(Le=M?[M]:r.keys(O);De<Le.length;De++){M=Le[De];var tt=O[M];if(!tt)break;for(var Xe=[],et=0;et<tt.length;et++){var Qe=tt[et];if(H&&H!==Qe.callback&&H!==Qe.callback._callback||ve&&ve!==Qe.context)Xe.push(Qe);else{var pt=Qe.listening;pt&&pt.off(M,H)}}Xe.length?O[M]=Xe:delete O[M]}return O}};s.once=function(O,M,H){var Q=u(g,{},O,M,this.off.bind(this));return typeof O=="string"&&H==null&&(M=void 0),this.on(Q,M,H)},s.listenToOnce=function(O,M,H){var Q=u(g,{},M,H,this.stopListening.bind(this,O));return this.listenTo(O,Q)};var g=function(O,M,H,Q){if(H){var ve=O[M]=r.once(function(){Q(M,ve),H.apply(this,arguments)});ve._callback=H}return O};s.trigger=function(O){if(!this._events)return this;for(var M=Math.max(0,arguments.length-1),H=Array(M),Q=0;Q<M;Q++)H[Q]=arguments[Q+1];return u(y,this._events,O,void 0,H),this};var y=function(O,M,H,Q){if(O){var ve=O[M],ge=O.all;ve&&ge&&(ge=ge.slice()),ve&&S(ve,Q),ge&&S(ge,[M].concat(Q))}return O},S=function(O,M){var H,Q=-1,ve=O.length,ge=M[0],De=M[1],Le=M[2];switch(M.length){case 0:for(;++Q<ve;)(H=O[Q]).callback.call(H.ctx);return;case 1:for(;++Q<ve;)(H=O[Q]).callback.call(H.ctx,ge);return;case 2:for(;++Q<ve;)(H=O[Q]).callback.call(H.ctx,ge,De);return;case 3:for(;++Q<ve;)(H=O[Q]).callback.call(H.ctx,ge,De,Le);return;default:for(;++Q<ve;)(H=O[Q]).callback.apply(H.ctx,M);return}},v=function(O,M){this.id=O._listenId,this.listener=O,this.obj=M,this.interop=!0,this.count=0,this._events=void 0};v.prototype.on=s.on,v.prototype.off=function(O,M){var H;this.interop?(this._events=u(h,this._events,O,M,{context:void 0,listeners:void 0}),H=!this._events):(this.count--,H=this.count===0),H&&this.cleanup()},v.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},s.bind=s.on,s.unbind=s.off,r.extend(n,s);var _=n.Model=function(O,M){var H=O||{};M||(M={}),this.preinitialize.apply(this,arguments),this.cid=r.uniqueId(this.cidPrefix),this.attributes={},M.collection&&(this.collection=M.collection),M.parse&&(H=this.parse(H,M)||{});var Q=r.result(this,"defaults");H=r.defaults(r.extend({},Q,H),Q),this.set(H,M),this.changed={},this.initialize.apply(this,arguments)};r.extend(_.prototype,s,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(O){return r.clone(this.attributes)},sync:function(){return n.sync.apply(this,arguments)},get:function(O){return this.attributes[O]},escape:function(O){return r.escape(this.get(O))},has:function(O){return this.get(O)!=null},matches:function(O){return!!r.iteratee(O,this)(this.attributes)},set:function(O,M,H){if(O==null)return this;var Q;if(typeof O=="object"?(Q=O,H=M):(Q={})[O]=M,H||(H={}),!this._validate(Q,H))return!1;var ve=H.unset,ge=H.silent,De=[],Le=this._changing;this._changing=!0,Le||(this._previousAttributes=r.clone(this.attributes),this.changed={});var tt=this.attributes,Xe=this.changed,et=this._previousAttributes;for(var Qe in Q)M=Q[Qe],r.isEqual(tt[Qe],M)||De.push(Qe),r.isEqual(et[Qe],M)?delete Xe[Qe]:Xe[Qe]=M,ve?delete tt[Qe]:tt[Qe]=M;if(this.idAttribute in Q){var pt=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,pt,H)}if(!ge){De.length&&(this._pending=H);for(var zt=0;zt<De.length;zt++)this.trigger("change:"+De[zt],this,tt[De[zt]],H)}if(Le)return this;if(!ge)for(;this._pending;)H=this._pending,this._pending=!1,this.trigger("change",this,H);return this._pending=!1,this._changing=!1,this},unset:function(O,M){return this.set(O,void 0,r.extend({},M,{unset:!0}))},clear:function(O){var M={};for(var H in this.attributes)M[H]=void 0;return this.set(M,r.extend({},O,{unset:!0}))},hasChanged:function(O){return O==null?!r.isEmpty(this.changed):r.has(this.changed,O)},changedAttributes:function(O){if(!O)return this.hasChanged()?r.clone(this.changed):!1;var M=this._changing?this._previousAttributes:this.attributes,H={},Q;for(var ve in O){var ge=O[ve];r.isEqual(M[ve],ge)||(H[ve]=ge,Q=!0)}return Q?H:!1},previous:function(O){return O==null||!this._previousAttributes?null:this._previousAttributes[O]},previousAttributes:function(){return r.clone(this._previousAttributes)},fetch:function(O){O=r.extend({parse:!0},O);var M=this,H=O.success;return O.success=function(Q){var ve=O.parse?M.parse(Q,O):Q;if(!M.set(ve,O))return!1;H&&H.call(O.context,M,Q,O),M.trigger("sync",M,Q,O)},Y(this,O),this.sync("read",this,O)},save:function(O,M,H){var Q;O==null||typeof O=="object"?(Q=O,H=M):(Q={})[O]=M,H=r.extend({validate:!0,parse:!0},H);var ve=H.wait;if(Q&&!ve){if(!this.set(Q,H))return!1}else if(!this._validate(Q,H))return!1;var ge=this,De=H.success,Le=this.attributes;H.success=function(et){ge.attributes=Le;var Qe=H.parse?ge.parse(et,H):et;if(ve&&(Qe=r.extend({},Q,Qe)),Qe&&!ge.set(Qe,H))return!1;De&&De.call(H.context,ge,et,H),ge.trigger("sync",ge,et,H)},Y(this,H),Q&&ve&&(this.attributes=r.extend({},Le,Q));var tt=this.isNew()?"create":H.patch?"patch":"update";tt==="patch"&&!H.attrs&&(H.attrs=Q);var Xe=this.sync(tt,this,H);return this.attributes=Le,Xe},destroy:function(O){O=O?r.clone(O):{};var M=this,H=O.success,Q=O.wait,ve=function(){M.stopListening(),M.trigger("destroy",M,M.collection,O)};O.success=function(De){Q&&ve(),H&&H.call(O.context,M,De,O),M.isNew()||M.trigger("sync",M,De,O)};var ge=!1;return this.isNew()?r.defer(O.success):(Y(this,O),ge=this.sync("delete",this,O)),Q||ve(),ge},url:function(){var O=r.result(this,"urlRoot")||r.result(this.collection,"url")||j();if(this.isNew())return O;var M=this.get(this.idAttribute);return O.replace(/[^\/]$/,"$&/")+encodeURIComponent(M)},parse:function(O,M){return O},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(O){return this._validate({},r.extend({},O,{validate:!0}))},_validate:function(O,M){if(!M.validate||!this.validate)return!0;O=r.extend({},this.attributes,O);var H=this.validationError=this.validate(O,M)||null;return H?(this.trigger("invalid",this,H,r.extend(M,{validationError:H})),!1):!0}});var x=n.Collection=function(O,M){M||(M={}),this.preinitialize.apply(this,arguments),M.model&&(this.model=M.model),M.comparator!==void 0&&(this.comparator=M.comparator),this._reset(),this.initialize.apply(this,arguments),O&&this.reset(O,r.extend({silent:!0},M))},C={add:!0,remove:!0,merge:!0},k={add:!0,remove:!1},m=function(O,M,H){H=Math.min(Math.max(H,0),O.length);var Q=Array(O.length-H),ve=M.length,ge;for(ge=0;ge<Q.length;ge++)Q[ge]=O[ge+H];for(ge=0;ge<ve;ge++)O[ge+H]=M[ge];for(ge=0;ge<Q.length;ge++)O[ge+ve+H]=Q[ge]};r.extend(x.prototype,s,{model:_,preinitialize:function(){},initialize:function(){},toJSON:function(O){return this.map(function(M){return M.toJSON(O)})},sync:function(){return n.sync.apply(this,arguments)},add:function(O,M){return this.set(O,r.extend({merge:!1},M,k))},remove:function(O,M){M=r.extend({},M);var H=!r.isArray(O);O=H?[O]:O.slice();var Q=this._removeModels(O,M);return!M.silent&&Q.length&&(M.changes={added:[],merged:[],removed:Q},this.trigger("update",this,M)),H?Q[0]:Q},set:function(O,M){if(O!=null){M=r.extend({},C,M),M.parse&&!this._isModel(O)&&(O=this.parse(O,M)||[]);var H=!r.isArray(O);O=H?[O]:O.slice();var Q=M.at;Q!=null&&(Q=+Q),Q>this.length&&(Q=this.length),Q<0&&(Q+=this.length+1);var ve=[],ge=[],De=[],Le=[],tt={},Xe=M.add,et=M.merge,Qe=M.remove,pt=!1,zt=this.comparator&&Q==null&&M.sort!==!1,Kt=r.isString(this.comparator)?this.comparator:null,wt,sn;for(sn=0;sn<O.length;sn++){wt=O[sn];var gr=this.get(wt);if(gr){if(et&&wt!==gr){var mi=this._isModel(wt)?wt.attributes:wt;M.parse&&(mi=gr.parse(mi,M)),gr.set(mi,M),De.push(gr),zt&&!pt&&(pt=gr.hasChanged(Kt))}tt[gr.cid]||(tt[gr.cid]=!0,ve.push(gr)),O[sn]=gr}else Xe&&(wt=O[sn]=this._prepareModel(wt,M),wt&&(ge.push(wt),this._addReference(wt,M),tt[wt.cid]=!0,ve.push(wt)))}if(Qe){for(sn=0;sn<this.length;sn++)wt=this.models[sn],tt[wt.cid]||Le.push(wt);Le.length&&this._removeModels(Le,M)}var Lr=!1,ho=!zt&&Xe&&Qe;if(ve.length&&ho?(Lr=this.length!==ve.length||r.some(this.models,function(Tr,Vn){return Tr!==ve[Vn]}),this.models.length=0,m(this.models,ve,0),this.length=this.models.length):ge.length&&(zt&&(pt=!0),m(this.models,ge,Q??this.length),this.length=this.models.length),pt&&this.sort({silent:!0}),!M.silent){for(sn=0;sn<ge.length;sn++)Q!=null&&(M.index=Q+sn),wt=ge[sn],wt.trigger("add",wt,this,M);(pt||Lr)&&this.trigger("sort",this,M),(ge.length||Le.length||De.length)&&(M.changes={added:ge,removed:Le,merged:De},this.trigger("update",this,M))}return H?O[0]:O}},reset:function(O,M){M=M?r.clone(M):{};for(var H=0;H<this.models.length;H++)this._removeReference(this.models[H],M);return M.previousModels=this.models,this._reset(),O=this.add(O,r.extend({silent:!0},M)),M.silent||this.trigger("reset",this,M),O},push:function(O,M){return this.add(O,r.extend({at:this.length},M))},pop:function(O){var M=this.at(this.length-1);return this.remove(M,O)},unshift:function(O,M){return this.add(O,r.extend({at:0},M))},shift:function(O){var M=this.at(0);return this.remove(M,O)},slice:function(){return a.apply(this.models,arguments)},get:function(O){if(O!=null)return this._byId[O]||this._byId[this.modelId(this._isModel(O)?O.attributes:O,O.idAttribute)]||O.cid&&this._byId[O.cid]},has:function(O){return this.get(O)!=null},at:function(O){return O<0&&(O+=this.length),this.models[O]},where:function(O,M){return this[M?"find":"filter"](O)},findWhere:function(O){return this.where(O,!0)},sort:function(O){var M=this.comparator;if(!M)throw new Error("Cannot sort a set without a comparator");O||(O={});var H=M.length;return r.isFunction(M)&&(M=M.bind(this)),H===1||r.isString(M)?this.models=this.sortBy(M):this.models.sort(M),O.silent||this.trigger("sort",this,O),this},pluck:function(O){return this.map(O+"")},fetch:function(O){O=r.extend({parse:!0},O);var M=O.success,H=this;return O.success=function(Q){var ve=O.reset?"reset":"set";H[ve](Q,O),M&&M.call(O.context,H,Q,O),H.trigger("sync",H,Q,O)},Y(this,O),this.sync("read",this,O)},create:function(O,M){M=M?r.clone(M):{};var H=M.wait;if(O=this._prepareModel(O,M),!O)return!1;H||this.add(O,M);var Q=this,ve=M.success;return M.success=function(ge,De,Le){H&&Q.add(ge,Le),ve&&ve.call(Le.context,ge,De,Le)},O.save(null,M),O},parse:function(O,M){return O},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(O,M){return O[M||this.model.prototype.idAttribute||"id"]},values:function(){return new E(this,I)},keys:function(){return new E(this,D)},entries:function(){return new E(this,F)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(O,M){if(this._isModel(O))return O.collection||(O.collection=this),O;M=M?r.clone(M):{},M.collection=this;var H;return this.model.prototype?H=new this.model(O,M):H=this.model(O,M),H.validationError?(this.trigger("invalid",this,H.validationError,M),!1):H},_removeModels:function(O,M){for(var H=[],Q=0;Q<O.length;Q++){var ve=this.get(O[Q]);if(ve){var ge=this.indexOf(ve);this.models.splice(ge,1),this.length--,delete this._byId[ve.cid];var De=this.modelId(ve.attributes,ve.idAttribute);De!=null&&delete this._byId[De],M.silent||(M.index=ge,ve.trigger("remove",ve,this,M)),H.push(ve),this._removeReference(ve,M)}}return H},_isModel:function(O){return O instanceof _},_addReference:function(O,M){this._byId[O.cid]=O;var H=this.modelId(O.attributes,O.idAttribute);H!=null&&(this._byId[H]=O),O.on("all",this._onModelEvent,this)},_removeReference:function(O,M){delete this._byId[O.cid];var H=this.modelId(O.attributes,O.idAttribute);H!=null&&delete this._byId[H],this===O.collection&&delete O.collection,O.off("all",this._onModelEvent,this)},_onModelEvent:function(O,M,H,Q){if(M){if((O==="add"||O==="remove")&&H!==this)return;if(O==="destroy"&&this.remove(M,Q),O==="changeId"){var ve=this.modelId(M.previousAttributes(),M.idAttribute),ge=this.modelId(M.attributes,M.idAttribute);ve!=null&&delete this._byId[ve],ge!=null&&(this._byId[ge]=M)}}this.trigger.apply(this,arguments)}});var T=typeof Symbol=="function"&&Symbol.iterator;T&&(x.prototype[T]=x.prototype.values);var E=function(O,M){this._collection=O,this._kind=M,this._index=0},I=1,D=2,F=3;T&&(E.prototype[T]=function(){return this}),E.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var O=this._collection.at(this._index);this._index++;var M;if(this._kind===I)M=O;else{var H=this._collection.modelId(O.attributes,O.idAttribute);this._kind===D?M=H:M=[H,O]}return{value:M,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var R=n.View=function(O){this.cid=r.uniqueId("view"),this.preinitialize.apply(this,arguments),r.extend(this,r.pick(O,B)),this._ensureElement(),this.initialize.apply(this,arguments)},z=/^(\S+)\s*(.*)$/,B=["model","collection","el","id","attributes","className","tagName","events"];r.extend(R.prototype,s,{tagName:"div",$:function(O){return this.$el.find(O)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(O){return this.undelegateEvents(),this._setElement(O),this.delegateEvents(),this},_setElement:function(O){this.$el=O instanceof n.$?O:n.$(O),this.el=this.$el[0]},delegateEvents:function(O){if(O||(O=r.result(this,"events")),!O)return this;this.undelegateEvents();for(var M in O){var H=O[M];if(r.isFunction(H)||(H=this[H]),!!H){var Q=M.match(z);this.delegate(Q[1],Q[2],H.bind(this))}}return this},delegate:function(O,M,H){return this.$el.on(O+".delegateEvents"+this.cid,M,H),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(O,M,H){return this.$el.off(O+".delegateEvents"+this.cid,M,H),this},_createElement:function(O){return document.createElement(O)},_ensureElement:function(){if(this.el)this.setElement(r.result(this,"el"));else{var O=r.extend({},r.result(this,"attributes"));this.id&&(O.id=r.result(this,"id")),this.className&&(O.class=r.result(this,"className")),this.setElement(this._createElement(r.result(this,"tagName"))),this._setAttributes(O)}},_setAttributes:function(O){this.$el.attr(O)}});var ie=function(O,M,H,Q){switch(M){case 1:return function(){return O[H](this[Q])};case 2:return function(ve){return O[H](this[Q],ve)};case 3:return function(ve,ge){return O[H](this[Q],_e(ve,this),ge)};case 4:return function(ve,ge,De){return O[H](this[Q],_e(ve,this),ge,De)};default:return function(){var ve=a.call(arguments);return ve.unshift(this[Q]),O[H].apply(O,ve)}}},oe=function(O,M,H,Q){r.each(H,function(ve,ge){M[ge]&&(O.prototype[ge]=ie(M,ve,ge,Q))})},_e=function(O,M){return r.isFunction(O)?O:r.isObject(O)&&!M._isModel(O)?Ae(O):r.isString(O)?function(H){return H.get(O)}:O},Ae=function(O){var M=r.matches(O);return function(H){return M(H.attributes)}},Pe={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},Se={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};r.each([[x,Pe,"models"],[_,Se,"attributes"]],function(O){var M=O[0],H=O[1],Q=O[2];M.mixin=function(ve){var ge=r.reduce(r.functions(ve),function(De,Le){return De[Le]=0,De},{});oe(M,ve,ge,Q)},oe(M,r,H,Q)}),n.sync=function(O,M,H){var Q=se[O];r.defaults(H||(H={}),{emulateHTTP:n.emulateHTTP,emulateJSON:n.emulateJSON});var ve={type:Q,dataType:"json"};if(H.url||(ve.url=r.result(M,"url")||j()),H.data==null&&M&&(O==="create"||O==="update"||O==="patch")&&(ve.contentType="application/json",ve.data=JSON.stringify(H.attrs||M.toJSON(H))),H.emulateJSON&&(ve.contentType="application/x-www-form-urlencoded",ve.data=ve.data?{model:ve.data}:{}),H.emulateHTTP&&(Q==="PUT"||Q==="DELETE"||Q==="PATCH")){ve.type="POST",H.emulateJSON&&(ve.data._method=Q);var ge=H.beforeSend;H.beforeSend=function(tt){if(tt.setRequestHeader("X-HTTP-Method-Override",Q),ge)return ge.apply(this,arguments)}}ve.type!=="GET"&&!H.emulateJSON&&(ve.processData=!1);var De=H.error;H.error=function(tt,Xe,et){H.textStatus=Xe,H.errorThrown=et,De&&De.call(H.context,tt,Xe,et)};var Le=H.xhr=n.ajax(r.extend(ve,H));return M.trigger("request",M,Le,H),Le};var se={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};n.ajax=function(){return n.$.ajax.apply(n.$,arguments)};var ne=n.Router=function(O){O||(O={}),this.preinitialize.apply(this,arguments),O.routes&&(this.routes=O.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},J=/\((.*?)\)/g,V=/(\(\?)?:\w+/g,W=/\*\w+/g,ae=/[\-{}\[\]+?.,\\\^$|#\s]/g;r.extend(ne.prototype,s,{preinitialize:function(){},initialize:function(){},route:function(O,M,H){r.isRegExp(O)||(O=this._routeToRegExp(O)),r.isFunction(M)&&(H=M,M=""),H||(H=this[M]);var Q=this;return n.history.route(O,function(ve){var ge=Q._extractParameters(O,ve);Q.execute(H,ge,M)!==!1&&(Q.trigger.apply(Q,["route:"+M].concat(ge)),Q.trigger("route",M,ge),n.history.trigger("route",Q,M,ge))}),this},execute:function(O,M,H){O&&O.apply(this,M)},navigate:function(O,M){return n.history.navigate(O,M),this},_bindRoutes:function(){if(this.routes){this.routes=r.result(this,"routes");for(var O,M=r.keys(this.routes);(O=M.pop())!=null;)this.route(O,this.routes[O])}},_routeToRegExp:function(O){return O=O.replace(ae,"\\$&").replace(J,"(?:$1)?").replace(V,function(M,H){return H?M:"([^/?]+)"}).replace(W,"([^?]*?)"),new RegExp("^"+O+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(O,M){var H=O.exec(M).slice(1);return r.map(H,function(Q,ve){return ve===H.length-1?Q||null:Q?decodeURIComponent(Q):null})}});var te=n.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),typeof window<"u"&&(this.location=window.location,this.history=window.history)},ue=/^[#\/]|\s+$/g,ce=/^\/+|\/+$/g,fe=/#.*$/;te.started=!1,r.extend(te.prototype,s,{interval:50,atRoot:function(){var O=this.location.pathname.replace(/[^\/]$/,"$&/");return O===this.root&&!this.getSearch()},matchRoot:function(){var O=this.decodeFragment(this.location.pathname),M=O.slice(0,this.root.length-1)+"/";return M===this.root},decodeFragment:function(O){return decodeURI(O.replace(/%25/g,"%2525"))},getSearch:function(){var O=this.location.href.replace(/#.*/,"").match(/\?.+/);return O?O[0]:""},getHash:function(O){var M=(O||this).location.href.match(/#(.*)$/);return M?M[1]:""},getPath:function(){var O=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return O.charAt(0)==="/"?O.slice(1):O},getFragment:function(O){return O==null&&(this._usePushState||!this._wantsHashChange?O=this.getPath():O=this.getHash()),O.replace(ue,"")},start:function(O){if(te.started)throw new Error("Backbone.history has already been started");if(te.started=!0,this.options=r.extend({root:"/"},this.options,O),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.history&&this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(ce,"/"),this._wantsHashChange&&this._wantsPushState)if(!this._hasPushState&&!this.atRoot()){var M=this.root.slice(0,-1)||"/";return this.location.replace(M+"#"+this.getPath()),!0}else this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0});if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var H=document.body,Q=H.insertBefore(this.iframe,H.firstChild).contentWindow;Q.document.open(),Q.document.close(),Q.location.hash="#"+this.fragment}var ve=window.addEventListener||function(ge,De){return attachEvent("on"+ge,De)};if(this._usePushState?ve("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?ve("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var O=window.removeEventListener||function(M,H){return detachEvent("on"+M,H)};this._usePushState?O("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&O("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),te.started=!1},route:function(O,M){this.handlers.unshift({route:O,callback:M})},checkUrl:function(O){var M=this.getFragment();if(M===this.fragment&&this.iframe&&(M=this.getHash(this.iframe.contentWindow)),M===this.fragment)return!1;this.iframe&&this.navigate(M),this.loadUrl()},loadUrl:function(O){return this.matchRoot()?(O=this.fragment=this.getFragment(O),r.some(this.handlers,function(M){if(M.route.test(O))return M.callback(O),!0})):!1},navigate:function(O,M){if(!te.started)return!1;(!M||M===!0)&&(M={trigger:!!M}),O=this.getFragment(O||"");var H=this.root;(O===""||O.charAt(0)==="?")&&(H=H.slice(0,-1)||"/");var Q=H+O;O=O.replace(fe,"");var ve=this.decodeFragment(O);if(this.fragment!==ve){if(this.fragment=ve,this._usePushState)this.history[M.replace?"replaceState":"pushState"]({},document.title,Q);else if(this._wantsHashChange){if(this._updateHash(this.location,O,M.replace),this.iframe&&O!==this.getHash(this.iframe.contentWindow)){var ge=this.iframe.contentWindow;M.replace||(ge.document.open(),ge.document.close()),this._updateHash(ge.location,O,M.replace)}}else return this.location.assign(Q);if(M.trigger)return this.loadUrl(O)}},_updateHash:function(O,M,H){if(H){var Q=O.href.replace(/(javascript:|#).*$/,"");O.replace(Q+"#"+M)}else O.hash="#"+M}}),n.history=new te;var ye=function(O,M){var H=this,Q;return O&&r.has(O,"constructor")?Q=O.constructor:Q=function(){return H.apply(this,arguments)},r.extend(Q,H,M),Q.prototype=r.create(H.prototype,O),Q.prototype.constructor=Q,Q.__super__=H.prototype,Q};_.extend=x.extend=ne.extend=R.extend=te.extend=ye;var j=function(){throw new Error('A "url" property or function must be specified')},Y=function(O,M){var H=M.error;M.error=function(Q){H&&H.call(M.context,O,Q,M),O.trigger("error",O,Q,M)}};return n})})(ooe);const Go=pr(ooe);var _Ne=$ae();const zn=pr(_Ne),wNe=function(){var t=typeof window=="object"&&!!window.SVGAngle;if(!t)return function(){throw new Error("SVG is required to use Vectorizer.")};var e={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},n="1.1",r=Math,i=r.PI,o=r.atan2,a=r.sqrt,s=r.min,l=r.max,c=r.cos,u=r.sin,f=function(k,m,T){if(!(this instanceof f))return f.apply(Object.create(f.prototype),arguments);if(k){if(f.isV(k)&&(k=k.node),m=m||{},f.isString(k)){if(k=k.trim(),k.toLowerCase()==="svg")k=f.createSvgDocument();else if(k[0]==="<"){var E=f.createSvgDocument(k);if(E.childNodes.length>1){var I=[],D,F;for(D=0,F=E.childNodes.length;D<F;D++){var R=E.childNodes[D];I.push(new f(document.importNode(R,!0)))}return I}k=document.importNode(E.firstChild,!0)}else k=document.createElementNS(e.svg,k);f.ensureId(k)}return this.node=k,this.setAttributes(m),T&&this.append(T),this}},d=f.prototype;Object.defineProperty(d,"id",{enumerable:!0,get:function(){return this.node.id},set:function(k){this.node.id=k}}),d.getTransformToElement=function(k){var m=this.node;if(f.isSVGGraphicsElement(k)&&f.isSVGGraphicsElement(m)){var T=f.toNode(k).getScreenCTM(),E=m.getScreenCTM();if(T&&E)return T.inverse().multiply(E)}return f.createSVGMatrix()},d.transform=function(k,m){var T=this.node;if(f.isUndefined(k))return f.transformStringToMatrix(this.attr("transform"));if(m&&m.absolute)return this.attr("transform",f.matrixToTransformString(k));var E=f.createSVGTransform(k);return T.transform.baseVal.appendItem(E),this},d.translate=function(k,m,T){T=T||{},m=m||0;var E=this.attr("transform")||"",I=f.parseTransformString(E);if(E=I.value,f.isUndefined(k))return I.translate;E=E.replace(/translate\([^)]*\)/g,"").trim();var D=T.absolute?k:I.translate.tx+k,F=T.absolute?m:I.translate.ty+m,R="translate("+D+","+F+")";return this.attr("transform",(R+" "+E).trim()),this},d.rotate=function(k,m,T,E){E=E||{};var I=this.attr("transform")||"",D=f.parseTransformString(I);if(I=D.value,f.isUndefined(k))return D.rotate;I=I.replace(/rotate\([^)]*\)/g,"").trim(),k%=360;var F=E.absolute?k:D.rotate.angle+k,R=m!==void 0&&T!==void 0?","+m+","+T:"",z="rotate("+F+R+")";return this.attr("transform",(I+" "+z).trim()),this},d.scale=function(k,m){m=f.isUndefined(m)?k:m;var T=this.attr("transform")||"",E=f.parseTransformString(T);if(T=E.value,f.isUndefined(k))return E.scale;T=T.replace(/scale\([^)]*\)/g,"").trim();var I="scale("+k+","+m+")";return this.attr("transform",(T+" "+I).trim()),this},d.bbox=function(k,m){var T,E=this.node,I=E.ownerSVGElement;if(!I)return new lt(0,0,0,0);try{T=E.getBBox()}catch{T={x:E.clientLeft,y:E.clientTop,width:E.clientWidth,height:E.clientHeight}}if(k)return new lt(T);var D=this.getTransformToElement(m||I);return f.transformRect(T,D)},d.getBBox=function(k){var m={},T,E=this.node,I=E.ownerSVGElement;if(!I||!f.isSVGGraphicsElement(E))return new lt(0,0,0,0);if(k&&(k.target&&(m.target=f.toNode(k.target)),k.recursive&&(m.recursive=k.recursive)),m.recursive){var F=this.children(),R=F.length;if(R===0)return this.getBBox({target:m.target,recursive:!1});m.target||(m.target=this);for(var z=0;z<R;z++){var B=F[z],ie;B.children().length===0?ie=B.getBBox({target:m.target,recursive:!1}):ie=B.getBBox({target:m.target,recursive:!0}),T?T=T.union(ie):T=ie}return T}else{try{T=E.getBBox()}catch{T={x:E.clientLeft,y:E.clientTop,width:E.clientWidth,height:E.clientHeight}}if(m.target){var D=this.getTransformToElement(m.target);return f.transformRect(T,D)}else return new lt(T)}};function h(k,m){k||(k={});var T=f("textPath"),E=k.d;if(E&&k["xlink:href"]===void 0){var I=f("path").attr("d",E).appendTo(m.defs());T.attr("xlink:href","#"+I.id)}return f.isObject(k)&&T.attr(k),T.node}function g(k,m,T){T||(T={});for(var E=T.includeAnnotationIndices,I=T.eol,D=T.lineHeight,F=T.baseSize,R=0,z={},B=m.length-1,ie=0;ie<=B;ie++){var oe=m[ie],_e=null;if(f.isObject(oe)){var Ae=oe.attrs,Pe=f("tspan",Ae),Se=Pe.node,se=oe.t;I&&ie===B&&(se+=I),Se.textContent=se;var ne=Ae.class;ne&&Pe.addClass(ne),E&&Pe.attr("annotations",oe.annotations),_e=parseFloat(Ae["font-size"]),isFinite(_e)||(_e=F),_e&&_e>R&&(R=_e)}else I&&ie===B&&(oe+=I),Se=document.createTextNode(oe||" "),F&&F>R&&(R=F);k.appendChild(Se)}return R&&(z.maxFontSize=R),D?z.lineHeight=D:R&&(z.lineHeight=R*1.2),z}var y=/em$/;function S(k,m){var T=parseFloat(k);return y.test(k)?T*m:T}function v(k,m,T,E){if(!Array.isArray(m))return 0;var I=m.length;if(!I)return 0;for(var D=m[0],F=S(D.maxFontSize,T)||T,R=0,z=S(E,T),B=1;B<I;B++){D=m[B];var ie=S(D.lineHeight,T)||z;R+=ie}var oe=S(D.maxFontSize,T)||T,_e;switch(k){case"middle":_e=F/2-.15*oe-R/2;break;case"bottom":_e=-(.25*oe)-R;break;default:case"top":_e=.8*F;break}return _e}d.text=function(k,m){if(k&&typeof k!="string")throw new Error("Vectorizer: text() expects the first argument to be a string.");k=f.sanitizeText(k),m||(m={});var T=m.displayEmpty,E=m.eol,I=m.textPath,D=m.textVerticalAnchor,F=D==="middle"||D==="bottom"||D==="top",R=m.x;R===void 0&&(R=this.attr("x")||0);var z=m.includeAnnotationIndices,B=m.annotations;B&&!f.isArray(B)&&(B=[B]);var ie=m.lineHeight,oe=ie==="auto",_e=oe?"1.5em":ie||"1em";this.empty(),this.attr({"xml:space":"preserve",display:k||T?null:"none"});var Ae=parseFloat(this.attr("font-size"));Ae||(Ae=16,(F||B)&&this.attr("font-size",Ae));var Pe=document,Se;I?(typeof I=="string"&&(I={d:I}),Se=h(I,this)):Se=Pe.createDocumentFragment();for(var se=0,ne=k.split(`
`),J=[],V,W=0,ae=ne.length-1;W<=ae;W++){var te=_e,ue="v-line",ce=Pe.createElementNS(e.svg,"tspan"),fe=ne[W],ye;if(fe)if(B){var j=f.annotateString(fe,B,{offset:-se,includeAnnotationIndices:z});ye=g(ce,j,{includeAnnotationIndices:z,eol:W!==ae&&E,lineHeight:oe?null:_e,baseSize:Ae});var Y=ye.lineHeight;Y&&oe&&W!==0&&(te=Y),W===0&&(V=ye.maxFontSize*.8)}else E&&W!==ae&&(fe+=E),ce.textContent=fe;else{ce.textContent="-",ue+=" v-empty-line";var O=ce.style;if(O.fillOpacity=0,O.strokeOpacity=0,B){ye={},j=f.findAnnotationsAtIndex(B,se);let H=Ae;for(let Q=j.length;Q>0;Q--){const ve=j[Q-1].attrs;if(!ve||!("font-size"in ve))continue;const ge=parseFloat(ve["font-size"]);if(isFinite(ge)){H=ge;break}}oe&&(W>0?te=H*1.2:V=H*.8),ce.setAttribute("font-size",H),ye.maxFontSize=H}}ye&&J.push(ye),W>0&&ce.setAttribute("dy",te),(W>0||I)&&ce.setAttribute("x",R),ce.className.baseVal=ue,Se.appendChild(ce),se+=fe.length+1}if(F)if(B)te=v(D,J,Ae,_e);else if(D==="top")te="0.8em";else{var M;switch(ae>0?(M=parseFloat(_e)||1,M*=ae,y.test(_e)||(M/=Ae)):M=0,D){case"middle":te=.3-M/2+"em";break;case"bottom":te=-M-.3+"em";break}}else D===0?te="0em":D?te=D:(te=0,this.attr("y")===null&&this.attr("y",V||"0.8em"));return Se.firstChild.setAttribute("dy",te),this.append(Se),this},d.removeAttr=function(k){var m=f.qualifyAttr(k),T=this.node;return m.ns?T.hasAttributeNS(m.ns,m.local)&&T.removeAttributeNS(m.ns,m.local):T.hasAttribute(k)&&T.removeAttribute(k),this},d.attr=function(k,m){if(f.isUndefined(k)){for(var T=this.node.attributes,E={},I=0;I<T.length;I++)E[T[I].name]=T[I].value;return E}if(f.isString(k)&&f.isUndefined(m))return this.node.getAttribute(k);if(typeof k=="object")for(var D in k)k.hasOwnProperty(D)&&this.setAttribute(D,k[D]);else this.setAttribute(k,m);return this},d.normalizePath=function(){var k=this.tagName();return k==="PATH"&&this.attr("d",f.normalizePathData(this.attr("d"))),this},d.remove=function(){return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this},d.empty=function(){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);return this},d.setAttributes=function(k){for(var m in k)k.hasOwnProperty(m)&&this.setAttribute(m,k[m]);return this},d.append=function(k){f.isArray(k)||(k=[k]);for(var m=0,T=k.length;m<T;m++)this.node.appendChild(f.toNode(k[m]));return this},d.prepend=function(k){var m=this.node.firstChild;return m?f(m).before(k):this.append(k)},d.before=function(k){var m=this.node,T=m.parentNode;if(T){f.isArray(k)||(k=[k]);for(var E=0,I=k.length;E<I;E++)T.insertBefore(f.toNode(k[E]),m)}return this},d.appendTo=function(k){return f.toNode(k).appendChild(this.node),this},d.svg=function(){return this.node instanceof window.SVGSVGElement?this:f(this.node.ownerSVGElement)},d.tagName=function(){return this.node.tagName.toUpperCase()},d.defs=function(){var k=this.svg()||this,m=k.node.getElementsByTagName("defs")[0];return m?f(m):f("defs").appendTo(k)},d.clone=function(){var k=f(this.node.cloneNode(!0));return k.node.id=f.uniqueId(),k},d.findOne=function(k){var m=this.node.querySelector(k);return m?f(m):void 0},d.find=function(k){var m=[],T=this.node.querySelectorAll(k);if(T)for(var E=0;E<T.length;E++)m.push(f(T[E]));return m},d.children=function(){for(var k=this.node.childNodes,m=[],T=0;T<k.length;T++){var E=k[T];E.nodeType===1&&m.push(f(k[T]))}return m},d.parent=function(){return f(this.node.parentNode)||null},d.index=function(){for(var k=0,m=this.node.previousSibling;m;)m.nodeType===1&&k++,m=m.previousSibling;return k},d.findParentByClass=function(k,m){for(var T=this.node.ownerSVGElement,E=this.node.parentNode;E&&E!==m&&E!==T;){var I=f(E);if(I.hasClass(k))return I;E=E.parentNode}return null},d.contains=function(k){var m=this.node,T=f.toNode(k),E=T&&T.parentNode;return m===E||!!(E&&E.nodeType===1&&m.compareDocumentPosition(E)&16)},d.toLocalPoint=function(k,m){var T=this.svg().node,E=T.createSVGPoint();E.x=k,E.y=m;try{var I=E.matrixTransform(T.getScreenCTM().inverse()),D=this.getTransformToElement(T).inverse()}catch{return E}return I.matrixTransform(D)},d.translateCenterToPoint=function(k){var m=this.getBBox({target:this.svg()}),T=m.center();return this.translate(k.x-T.x,k.y-T.y),this},d.translateAndAutoOrient=function(k,m,T){k=new we(k),m=new we(m),T||(T=this.svg());var E=this.scale();this.attr("transform","");var I=this.getBBox({target:T}).scale(E.sx,E.sy),D=f.createSVGTransform();D.setTranslate(-I.x-I.width/2,-I.y-I.height/2);var F=f.createSVGTransform(),R=k.angleBetween(m,k.clone().offset(1,0));R&&F.setRotate(R,0,0);var z=f.createSVGTransform(),B=k.clone().move(m,I.width/2);z.setTranslate(2*k.x-B.x,2*k.y-B.y);var ie=this.getTransformToElement(T),oe=f.createSVGTransform();return oe.setMatrix(z.matrix.multiply(F.matrix.multiply(D.matrix.multiply(ie.scale(E.sx,E.sy))))),this.attr("transform",f.matrixToTransformString(oe.matrix)),this},d.animateAlongPath=function(k,m){m=f.toNode(m);var T=f.ensureId(m),E=f("animateMotion",k),I=f("mpath",{"xlink:href":"#"+T});E.append(I),this.append(E);try{E.node.beginElement()}catch{if(document.documentElement.getAttribute("smiling")==="fake"){var D=E.node;D.animators=[];var F=D.getAttribute("id");F&&(id2anim[F]=D);for(var R=getTargets(D),z=0,B=R.length;z<B;z++){var ie=R[z],oe=new Animator(D,ie,z);animators.push(oe),D.animators[z]=oe,oe.register()}}}return this};const _=/[^\x20\t\r\n\f]+/g;function x(k){return f.isString(k)?k.trim().match(_)||[]:[]}d.hasClass=function(k){return f.isString(k)?this.node.classList.contains(k.trim()):!1},d.addClass=function(k){return this.node.classList.add(...x(k)),this},d.removeClass=function(k){return this.node.classList.remove(...x(k)),this},d.toggleClass=function(k,m){const T=x(k);for(let E=0;E<T.length;E++)this.node.classList.toggle(T[E],m);return this},d.sample=function(k){k=k||1;for(var m=this.node,T=m.getTotalLength(),E=[],I=0,D;I<T;)D=m.getPointAtLength(I),E.push({x:D.x,y:D.y,distance:I}),I+=k;return E},d.convertToPath=function(){var k=f("path");k.attr(this.attr());var m=this.convertToPathData();return m&&k.attr("d",m),k},d.convertToPathData=function(){var k=this.tagName();switch(k){case"PATH":return this.attr("d");case"LINE":return f.convertLineToPathData(this.node);case"POLYGON":return f.convertPolygonToPathData(this.node);case"POLYLINE":return f.convertPolylineToPathData(this.node);case"ELLIPSE":return f.convertEllipseToPathData(this.node);case"CIRCLE":return f.convertCircleToPathData(this.node);case"RECT":return f.convertRectToPathData(this.node)}throw new Error(k+" cannot be converted to PATH.")},f.prototype.toGeometryShape=function(){var k,m,T,E,I,D,F,R,z,B,ie,oe,_e,Ae,Pe;switch(this.tagName()){case"RECT":return k=parseFloat(this.attr("x"))||0,m=parseFloat(this.attr("y"))||0,T=parseFloat(this.attr("width"))||0,E=parseFloat(this.attr("height"))||0,new lt(k,m,T,E);case"CIRCLE":return I=parseFloat(this.attr("cx"))||0,D=parseFloat(this.attr("cy"))||0,F=parseFloat(this.attr("r"))||0,new Ca({x:I,y:D},F,F);case"ELLIPSE":return I=parseFloat(this.attr("cx"))||0,D=parseFloat(this.attr("cy"))||0,R=parseFloat(this.attr("rx"))||0,z=parseFloat(this.attr("ry"))||0,new Ca({x:I,y:D},R,z);case"POLYLINE":return B=f.getPointsFromSvgNode(this),new $r(B);case"POLYGON":return B=f.getPointsFromSvgNode(this),B.length>1&&B.push(B[0]),new $r(B);case"PATH":return ie=this.attr("d"),xt.isDataSupported(ie)||(ie=f.normalizePathData(ie)),new xt(ie);case"LINE":return oe=parseFloat(this.attr("x1"))||0,Ae=parseFloat(this.attr("y1"))||0,_e=parseFloat(this.attr("x2"))||0,Pe=parseFloat(this.attr("y2"))||0,new gt({x:oe,y:Ae},{x:_e,y:Pe})}return this.getBBox()},d.findIntersection=function(k,m){var T=this.svg().node;m=m||T;var E=this.getBBox({target:m}),I=E.center();if(E.intersectionWithLineFromCenterToPoint(k)){var D,F=this.tagName();if(F==="RECT"){var R=new lt(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),z=this.getTransformToElement(m),B=f.decomposeMatrix(z),ie=T.createSVGTransform();ie.setRotate(-B.rotation,I.x,I.y);var oe=f.transformRect(R,ie.matrix.multiply(z));D=new lt(oe).intersectionWithLineFromCenterToPoint(k,B.rotation)}else if(F==="PATH"||F==="POLYGON"||F==="POLYLINE"||F==="CIRCLE"||F==="ELLIPSE"){var _e=F==="PATH"?this:this.convertToPath(),Ae=_e.sample(),Pe=1/0,Se=[],se,ne,J,V,W,ae;for(se=0;se<Ae.length;se++)ne=Ae[se],J=f.createSVGPoint(ne.x,ne.y),J=J.matrixTransform(this.getTransformToElement(m)),ne=new we(J),V=ne.distance(I),W=ne.distance(k)*1.1,ae=V+W,ae<Pe?(Pe=ae,Se=[{sample:ne,refDistance:W}]):ae<Pe+1&&Se.push({sample:ne,refDistance:W});Se.sort(function(te,ue){return te.refDistance-ue.refDistance}),Se[0]&&(D=Se[0].sample)}return D}},d.setAttribute=function(k,m){var T=this.node;if(m===null)return this.removeAttr(k),this;var E=f.qualifyAttr(k);return E.ns?T.setAttributeNS(E.ns,k,m):k==="id"?T.id=m:T.setAttribute(k,m),this},f.createSvgDocument=function(k){if(k){const T=`<svg xmlns="${e.svg}" xmlns:xlink="${e.xlink}" version="${n}">${k}</svg>`,{documentElement:E}=f.parseXML(T,{async:!1});return E}const m=document.createElementNS(e.svg,"svg");return m.setAttributeNS(e.xmlns,"xmlns:xlink",e.xlink),m.setAttribute("version",n),m},f.createSVGStyle=function(k){const{node:m}=f("style",{type:"text/css"},[f.createCDATASection(k)]);return m},f.createCDATASection=function(k=""){return document.implementation.createDocument(null,"xml",null).createCDATASection(k)},f.idCounter=0,f.uniqueId=function(){return"v-"+ ++f.idCounter},f.toNode=function(k){return f.isV(k)?k.node:k.nodeName&&k||k[0]},f.ensureId=function(k){return k=f.toNode(k),k.id||(k.id=f.uniqueId())},f.sanitizeText=function(k){return(k||"").replace(/ /g,"")},f.isUndefined=function(k){return typeof k>"u"},f.isString=function(k){return typeof k=="string"},f.isObject=function(k){return k&&typeof k=="object"},f.isArray=Array.isArray,f.parseXML=function(k,m){m=m||{};var T;try{var E=new DOMParser;f.isUndefined(m.async)||(E.async=m.async),T=E.parseFromString(k,"text/xml")}catch{T=void 0}if(!T||T.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+k);return T},f.qualifyAttr=function(k){if(k.indexOf(":")!==-1){var m=k.split(":");return{ns:e[m[0]],local:m[1]}}return{ns:null,local:k}},f.transformSeparatorRegex=/[ ,]+/,f.transformRegex=/\b\w+\([^()]+\)/g,f.transformFunctionRegex=/\b(\w+)\(([^()]+)\)/,f.transformTranslateRegex=/\btranslate\(([^()]+)\)/,f.transformRotateRegex=/\brotate\(([^()]+)\)/,f.transformScaleRegex=/\bscale\(([^()]+)\)/,f.transformStringToMatrix=function(k){let m=f.createSVGMatrix();const T=k&&k.match(f.transformRegex);if(!T)return m;const E=T.length;for(let I=0;I<E;I++){const F=T[I].match(f.transformFunctionRegex);if(F){let R,z,B,ie,oe,_e=f.createSVGMatrix();const Ae=F[1].toLowerCase(),Pe=F[2].split(f.transformSeparatorRegex);switch(Ae){case"scale":R=parseFloat(Pe[0]),z=Pe[1]===void 0?R:parseFloat(Pe[1]),_e=_e.scaleNonUniform(R,z);break;case"translate":B=parseFloat(Pe[0]),ie=parseFloat(Pe[1]),_e=_e.translate(B,ie);break;case"rotate":oe=parseFloat(Pe[0]),B=parseFloat(Pe[1])||0,ie=parseFloat(Pe[2])||0,B!==0||ie!==0?_e=_e.translate(B,ie).rotate(oe).translate(-B,-ie):_e=_e.rotate(oe);break;case"skewx":oe=parseFloat(Pe[0]),_e=_e.skewX(oe);break;case"skewy":oe=parseFloat(Pe[0]),_e=_e.skewY(oe);break;case"matrix":_e.a=parseFloat(Pe[0]),_e.b=parseFloat(Pe[1]),_e.c=parseFloat(Pe[2]),_e.d=parseFloat(Pe[3]),_e.e=parseFloat(Pe[4]),_e.f=parseFloat(Pe[5]);break;default:continue}m=m.multiply(_e)}}return m},f.matrixToTransformString=function(k){return k||(k=!0),"matrix("+(k.a!==void 0?k.a:1)+","+(k.b!==void 0?k.b:0)+","+(k.c!==void 0?k.c:0)+","+(k.d!==void 0?k.d:1)+","+(k.e!==void 0?k.e:0)+","+(k.f!==void 0?k.f:0)+")"},f.parseTransformString=function(k){var m,T,E;if(k){var I=f.transformSeparatorRegex;if(k.trim().indexOf("matrix")>=0){var D=f.transformStringToMatrix(k),F=f.decomposeMatrix(D);m=[F.translateX,F.translateY],E=[F.scaleX,F.scaleY],T=[F.rotation];var R=[];(m[0]!==0||m[1]!==0)&&R.push("translate("+m+")"),(E[0]!==1||E[1]!==1)&&R.push("scale("+E+")"),T[0]!==0&&R.push("rotate("+T+")"),k=R.join(" ")}else{const B=k.match(f.transformTranslateRegex);B&&(m=B[1].split(I));const ie=k.match(f.transformRotateRegex);ie&&(T=ie[1].split(I));const oe=k.match(f.transformScaleRegex);oe&&(E=oe[1].split(I))}}var z=E&&E[0]?parseFloat(E[0]):1;return{value:k,translate:{tx:m&&m[0]?parseInt(m[0],10):0,ty:m&&m[1]?parseInt(m[1],10):0},rotate:{angle:T&&T[0]?parseInt(T[0],10):0,cx:T&&T[1]?parseInt(T[1],10):void 0,cy:T&&T[2]?parseInt(T[2],10):void 0},scale:{sx:z,sy:E&&E[1]?parseFloat(E[1]):z}}},f.deltaTransformPoint=function(k,m){var T=m.x*k.a+m.y*k.c+0,E=m.x*k.b+m.y*k.d+0;return{x:T,y:E}},f.decomposeMatrix=function(k){var m=f.deltaTransformPoint(k,{x:0,y:1}),T=f.deltaTransformPoint(k,{x:1,y:0}),E=180/i*o(m.y,m.x)-90,I=180/i*o(T.y,T.x);return{translateX:k.e,translateY:k.f,scaleX:a(k.a*k.a+k.b*k.b),scaleY:a(k.c*k.c+k.d*k.d),skewX:E,skewY:I,rotation:E}},f.matrixToScale=function(k){var m,T,E,I;return k?(m=f.isUndefined(k.a)?1:k.a,I=f.isUndefined(k.d)?1:k.d,T=k.b,E=k.c):m=I=1,{sx:T?a(m*m+T*T):m,sy:E?a(E*E+I*I):I}},f.matrixToRotate=function(k){var m={x:0,y:1};return k&&(m=f.deltaTransformPoint(k,m)),{angle:bu(a3(o(m.y,m.x))-90)}},f.matrixToTranslate=function(k){return{tx:k&&k.e||0,ty:k&&k.f||0}},f.isV=function(k){return k instanceof f},f.isVElement=f.isV,f.isSVGGraphicsElement=function(k){return k?(k=f.toNode(k),k instanceof SVGElement&&typeof k.getScreenCTM=="function"):!1};var C=f("svg").node;return f.createSVGMatrix=function(k){var m=C.createSVGMatrix();for(var T in k)m[T]=k[T];return m},f.createSVGTransform=function(k){return f.isUndefined(k)?C.createSVGTransform():(k instanceof SVGMatrix||(k=f.createSVGMatrix(k)),C.createSVGTransformFromMatrix(k))},f.createSVGPoint=function(k,m){var T=C.createSVGPoint();return T.x=k,T.y=m,T},f.transformRect=function(k,m){var T=C.createSVGPoint();T.x=k.x,T.y=k.y;var E=T.matrixTransform(m);T.x=k.x+k.width,T.y=k.y;var I=T.matrixTransform(m);T.x=k.x+k.width,T.y=k.y+k.height;var D=T.matrixTransform(m);T.x=k.x,T.y=k.y+k.height;var F=T.matrixTransform(m),R=s(E.x,I.x,D.x,F.x),z=l(E.x,I.x,D.x,F.x),B=s(E.y,I.y,D.y,F.y),ie=l(E.y,I.y,D.y,F.y);return new lt(R,B,z-R,ie-B)},f.transformPoint=function(k,m){return new we(f.createSVGPoint(k.x,k.y).matrixTransform(m))},f.transformLine=function(k,m){return new gt(f.transformPoint(k.start,m),f.transformPoint(k.end,m))},f.transformPolyline=function(k,m){var T=k instanceof $r?k.points:k;f.isArray(T)||(T=[]);for(var E=[],I=0,D=T.length;I<D;I++)E[I]=f.transformPoint(T[I],m);return new $r(E)},f.styleToObject=function(k){for(var m={},T=k.split(";"),E=0;E<T.length;E++){var I=T[E],D=I.split("=");m[D[0].trim()]=D[1].trim()}return m},f.createSlicePathData=function(k,m,T,E){var I=2*i-1e-6,D=k,F=m,R=T,z=E,B=(z<R&&(B=R,R=z,z=B),z-R),ie=B<i?"0":"1",oe=c(R),_e=u(R),Ae=c(z),Pe=u(z);return B>=I?D?"M0,"+F+"A"+F+","+F+" 0 1,1 0,"+-F+"A"+F+","+F+" 0 1,1 0,"+F+"M0,"+D+"A"+D+","+D+" 0 1,0 0,"+-D+"A"+D+","+D+" 0 1,0 0,"+D+"Z":"M0,"+F+"A"+F+","+F+" 0 1,1 0,"+-F+"A"+F+","+F+" 0 1,1 0,"+F+"Z":D?"M"+F*oe+","+F*_e+"A"+F+","+F+" 0 "+ie+",1 "+F*Ae+","+F*Pe+"L"+D*Ae+","+D*Pe+"A"+D+","+D+" 0 "+ie+",0 "+D*oe+","+D*_e+"Z":"M"+F*oe+","+F*_e+"A"+F+","+F+" 0 "+ie+",1 "+F*Ae+","+F*Pe+"L0,0Z"},f.mergeAttrs=function(k,m){for(var T in m)T==="class"?k[T]=k[T]?k[T]+" "+m[T]:m[T]:T==="style"?f.isObject(k[T])&&f.isObject(m[T])?k[T]=f.mergeAttrs(k[T],m[T]):f.isObject(k[T])?k[T]=f.mergeAttrs(k[T],f.styleToObject(m[T])):f.isObject(m[T])?k[T]=f.mergeAttrs(f.styleToObject(k[T]),m[T]):k[T]=f.mergeAttrs(f.styleToObject(k[T]),f.styleToObject(m[T])):k[T]=m[T];return k},f.annotateString=function(k,m,T){m=m||[],T=T||{};for(var E=T.offset||0,I=[],D,F=[],R,z,B=0;B<k.length;B++){R=F[B]=k[B];for(var ie=0;ie<m.length;ie++){var oe=m[ie],_e=oe.start+E,Ae=oe.end+E;B>=_e&&B<Ae&&(f.isObject(R)?R.attrs=f.mergeAttrs(f.mergeAttrs({},R.attrs),oe.attrs):R=F[B]={t:k[B],attrs:oe.attrs},T.includeAnnotationIndices&&(R.annotations||(R.annotations=[])).push(ie))}z=F[B-1],z?f.isObject(R)&&f.isObject(z)?JSON.stringify(R.attrs)===JSON.stringify(z.attrs)?D.t+=R.t:(I.push(D),D=R):f.isObject(R)||f.isObject(z)?(I.push(D),D=R):D=(D||"")+R:D=R}return D&&I.push(D),I},f.findAnnotationsAtIndex=function(k,m){var T=[];return k&&k.forEach(function(E){E.start<m&&m<=E.end&&T.push(E)}),T},f.findAnnotationsBetweenIndexes=function(k,m,T){var E=[];return k&&k.forEach(function(I){(m>=I.start&&m<I.end||T>I.start&&T<=I.end||I.start>=m&&I.end<T)&&E.push(I)}),E},f.shiftAnnotations=function(k,m,T){return k&&k.forEach(function(E){E.start<m&&E.end>=m?E.end+=T:E.start>=m&&(E.start+=T,E.end+=T)}),k},f.convertLineToPathData=function(k){k=f(k);var m=["M",k.attr("x1"),k.attr("y1"),"L",k.attr("x2"),k.attr("y2")].join(" ");return m},f.convertPolygonToPathData=function(k){var m=f.getPointsFromSvgNode(k);return m.length===0?null:f.svgPointsToPath(m)+" Z"},f.convertPolylineToPathData=function(k){var m=f.getPointsFromSvgNode(k);return m.length===0?null:f.svgPointsToPath(m)},f.svgPointsToPath=function(k){for(var m=0,T=k.length;m<T;m++)k[m]=k[m].x+" "+k[m].y;return"M "+k.join(" L")},f.getPointsFromSvgNode=function(k){k=f.toNode(k);var m=[],T=k.points;if(T)for(var E=0,I=T.numberOfItems;E<I;E++)m.push(T.getItem(E));return m},f.KAPPA=.551784,f.convertCircleToPathData=function(k){k=f(k);var m=parseFloat(k.attr("cx"))||0,T=parseFloat(k.attr("cy"))||0,E=parseFloat(k.attr("r")),I=E*f.KAPPA,D=["M",m,T-E,"C",m+I,T-E,m+E,T-I,m+E,T,"C",m+E,T+I,m+I,T+E,m,T+E,"C",m-I,T+E,m-E,T+I,m-E,T,"C",m-E,T-I,m-I,T-E,m,T-E,"Z"].join(" ");return D},f.convertEllipseToPathData=function(k){k=f(k);var m=parseFloat(k.attr("cx"))||0,T=parseFloat(k.attr("cy"))||0,E=parseFloat(k.attr("rx")),I=parseFloat(k.attr("ry"))||E,D=E*f.KAPPA,F=I*f.KAPPA,R=["M",m,T-I,"C",m+D,T-I,m+E,T-F,m+E,T,"C",m+E,T+F,m+D,T+I,m,T+I,"C",m-D,T+I,m-E,T+F,m-E,T,"C",m-E,T-F,m-D,T-I,m,T-I,"Z"].join(" ");return R},f.convertRectToPathData=function(k){return k=f(k),f.rectToPath({x:parseFloat(k.attr("x"))||0,y:parseFloat(k.attr("y"))||0,width:parseFloat(k.attr("width"))||0,height:parseFloat(k.attr("height"))||0,rx:parseFloat(k.attr("rx"))||0,ry:parseFloat(k.attr("ry"))||0})},f.rectToPath=function(k){var m,T=k.x,E=k.y,I=k.width,D=k.height,F=s(k.rx||k["top-rx"]||0,I/2),R=s(k.rx||k["bottom-rx"]||0,I/2),z=s(k.ry||k["top-ry"]||0,D/2),B=s(k.ry||k["bottom-ry"]||0,D/2);return F||R||z||B?m=["M",T,E+z,"v",D-z-B,"a",R,B,0,0,0,R,B,"h",I-2*R,"a",R,B,0,0,0,R,-B,"v",-(D-B-z),"a",F,z,0,0,0,-F,-z,"h",-(I-2*F),"a",F,z,0,0,0,-F,z,"Z"]:m=["M",T,E,"H",T+I,"V",E+D,"H",T,"V",E,"Z"],m.join(" ")},f.normalizePathData=function(){var k=`	
\v\f\r \u2028\u2029`,m=new RegExp("([a-z])["+k+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+k+"]*,?["+k+"]*)+)","ig"),T=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+k+"]*,?["+k+"]*","ig"),E=Math,I=E.PI,D=E.sin,F=E.cos,R=E.tan,z=E.asin,B=E.sqrt,ie=E.abs;function oe(ne,J,V,W,ae,te){var ue=.3333333333333333,ce=2/3;return[ue*ne+ce*V,ue*J+ce*W,ue*ae+ce*V,ue*te+ce*W,ae,te]}function _e(ne,J,V){var W=ne*F(V)-J*D(V),ae=ne*D(V)+J*F(V);return{x:W,y:ae}}function Ae(ne,J,V,W,ae,te,ue,ce,fe,ye){var j=I*120/180,Y=I/180*(+ae||0),O=[],M;if(ye)et=ye[0],Qe=ye[1],tt=ye[2],Xe=ye[3];else{M=_e(ne,J,-Y),ne=M.x,J=M.y,M=_e(ce,fe,-Y),ce=M.x,fe=M.y;var H=(ne-ce)/2,Q=(J-fe)/2,ve=H*H/(V*V)+Q*Q/(W*W);ve>1&&(ve=B(ve),V=ve*V,W=ve*W);var ge=V*V,De=W*W,Le=(te==ue?-1:1)*B(ie((ge*De-ge*Q*Q-De*H*H)/(ge*Q*Q+De*H*H))),tt=Le*V*Q/W+(ne+ce)/2,Xe=Le*-W*H/V+(J+fe)/2,et=z(((J-Xe)/W).toFixed(9)),Qe=z(((fe-Xe)/W).toFixed(9));et=ne<tt?I-et:et,Qe=ce<tt?I-Qe:Qe,et<0&&(et=I*2+et),Qe<0&&(Qe=I*2+Qe),ue&&et>Qe&&(et=et-I*2),!ue&&Qe>et&&(Qe=Qe-I*2)}var pt=Qe-et;if(ie(pt)>j){var zt=Qe,Kt=ce,wt=fe;Qe=et+j*(ue&&Qe>et?1:-1),ce=tt+V*F(Qe),fe=Xe+W*D(Qe),O=Ae(ce,fe,V,W,ae,0,ue,Kt,wt,[Qe,zt,tt,Xe])}pt=Qe-et;var sn=F(et),gr=D(et),mi=F(Qe),Lr=D(Qe),ho=R(pt/4),Tr=4/3*(V*ho),Vn=4/3*(W*ho),Bn=[ne,J],Oa=[ne+Tr*gr,J-Vn*sn],Df=[ce+Tr*Lr,fe-Vn*mi],Tu=[ce,fe];if(Oa[0]=2*Bn[0]-Oa[0],Oa[1]=2*Bn[1]-Oa[1],ye)return[Oa,Df,Tu].concat(O);O=[Oa,Df,Tu].concat(O).join().split(",");for(var Tc=[],Ss=O.length,Ui=0;Ui<Ss;Ui++)Tc[Ui]=Ui%2?_e(O[Ui-1],O[Ui],Y).y:_e(O[Ui],O[Ui+1],Y).x;return Tc}function Pe(ne){if(!ne)return null;var J={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},V=[];return String(ne).replace(m,function(W,ae,te){var ue=[],ce=ae.toLowerCase();for(te.replace(T,function(fe,ye){ye&&ue.push(+ye)}),ce==="m"&&ue.length>2&&(V.push([ae].concat(ue.splice(0,2))),ce="l",ae=ae==="m"?"l":"L");ue.length>=J[ce]&&(V.push([ae].concat(ue.splice(0,J[ce]))),!!J[ce]););}),V}function Se(ne){if((!Array.isArray(ne)||!Array.isArray(ne&&ne[0]))&&(ne=Pe(ne)),!ne||!ne.length)return[["M",0,0]];for(var J=[],V=0,W=0,ae=0,te=0,ue=0,ce,fe=ne.length,ye=ue;ye<fe;ye++){var j=[];J.push(j);var Y=ne[ye];if(ce=Y[0],ce!=ce.toUpperCase()){j[0]=ce.toUpperCase();var O,M;switch(j[0]){case"A":j[1]=Y[1],j[2]=Y[2],j[3]=Y[3],j[4]=Y[4],j[5]=Y[5],j[6]=+Y[6]+V,j[7]=+Y[7]+W;break;case"V":j[1]=+Y[1]+W;break;case"H":j[1]=+Y[1]+V;break;case"M":for(ae=+Y[1]+V,te=+Y[2]+W,O=Y.length,M=1;M<O;M++)j[M]=+Y[M]+(M%2?V:W);break;default:for(O=Y.length,M=1;M<O;M++)j[M]=+Y[M]+(M%2?V:W);break}}else for(var H=Y.length,Q=0;Q<H;Q++)j[Q]=Y[Q];switch(j[0]){case"Z":V=+ae,W=+te;break;case"H":V=j[1];break;case"V":W=j[1];break;case"M":ae=j[j.length-2],te=j[j.length-1],V=j[j.length-2],W=j[j.length-1];break;default:V=j[j.length-2],W=j[j.length-1];break}}return J}function se(ne){var J=Se(ne),V={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function W(O,M,H){var Q,ve;if(!O)return["C",M.x,M.y,M.x,M.y,M.x,M.y];switch(O[0]in{T:1,Q:1}||(M.qx=null,M.qy=null),O[0]){case"M":M.X=O[1],M.Y=O[2];break;case"A":parseFloat(O[1])===0||parseFloat(O[2])===0?O=["L",O[6],O[7]]:O=["C"].concat(Ae.apply(0,[M.x,M.y].concat(O.slice(1))));break;case"S":H==="C"||H==="S"?(Q=M.x*2-M.bx,ve=M.y*2-M.by):(Q=M.x,ve=M.y),O=["C",Q,ve].concat(O.slice(1));break;case"T":H==="Q"||H==="T"?(M.qx=M.x*2-M.qx,M.qy=M.y*2-M.qy):(M.qx=M.x,M.qy=M.y),O=["C"].concat(oe(M.x,M.y,M.qx,M.qy,O[1],O[2]));break;case"Q":M.qx=O[1],M.qy=O[2],O=["C"].concat(oe(M.x,M.y,O[1],O[2],O[3],O[4]));break;case"H":O=["L"].concat(O[1],M.y);break;case"V":O=["L"].concat(M.x,O[1]);break}return O}function ae(O,M){if(O[M].length>7){O[M].shift();for(var H=O[M];H.length;)te[M]="A",O.splice(M++,0,["C"].concat(H.splice(0,6)));O.splice(M,1),fe=J.length}}for(var te=[],ue="",ce="",fe=J.length,ye=0;ye<fe;ye++){J[ye]&&(ue=J[ye][0]),ue!=="C"&&(te[ye]=ue,ye>0&&(ce=te[ye-1])),J[ye]=W(J[ye],V,ce),te[ye]!=="A"&&ue==="C"&&(te[ye]="C"),ae(J,ye);var j=J[ye],Y=j.length;V.x=j[Y-2],V.y=j[Y-1],V.bx=parseFloat(j[Y-4])||V.x,V.by=parseFloat(j[Y-3])||V.y}return(!J[0][0]||J[0][0]!=="M")&&J.unshift(["M",0,0]),J}return function(ne){return se(ne).join(",").split(",").join(" ")}}(),f.namespace=e,f.g=GDe,f}(),Ue=wNe,hu={useCSSSelectors:!0,classNamePrefix:"joint-",defaultTheme:"default",doubleTapInterval:300},S2="[object Arguments]",fO="[object Array]",_3="[object Boolean]",CL="[object Date]",Fae="[object Error]",kNe="[object Function]",CS="[object Map]",w3="[object Number]",xNe="[object Null]",mv="[object Object]",TL="[object RegExp]",TS="[object Set]",k3="[object String]",x3="[object Symbol]",CNe="[object Undefined]",TNe="[object WeakMap]",AL="[object ArrayBuffer]",PL="[object DataView]",Lae="[object Float32Array]",Dae="[object Float64Array]",Nae="[object Int8Array]",Mae="[object Int16Array]",Rae="[object Int32Array]",zae="[object Uint8Array]",Vae="[object Uint8ClampedArray]",Bae="[object Uint16Array]",jae="[object Uint32Array]",ANe={[S2]:!0,[fO]:!0,[AL]:!0,[PL]:!0,[_3]:!0,[CL]:!0,[Lae]:!0,[Dae]:!0,[Nae]:!0,[Mae]:!0,[Rae]:!0,[CS]:!0,[w3]:!0,[mv]:!0,[TL]:!0,[TS]:!0,[k3]:!0,[x3]:!0,[zae]:!0,[Vae]:!0,[Bae]:!0,[jae]:!0,[Fae]:!1,[kNe]:!1,[TNe]:!1},EL="\\ud800-\\udfff",PNe="\\u0300-\\u036f",ENe="\\ufe20-\\ufe2f",ONe="\\u20d0-\\u20ff",INe="\\u1ab0-\\u1aff",$Ne="\\u1dc0-\\u1dff",FNe=PNe+ENe+ONe+INe+$Ne,Hae="\\u2700-\\u27bf",Uae="a-z\\xdf-\\xf6\\xf8-\\xff",LNe="\\xac\\xb1\\xd7\\xf7",DNe="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",NNe="\\u2000-\\u206f",MNe=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Wae="A-Z\\xc0-\\xd6\\xd8-\\xde",RNe="\\ufe0e\\ufe0f",Gae=LNe+DNe+NNe+MNe,qae="[']",wU=`[${Gae}]`,OL=`[${FNe}]`,Yae="\\d",zNe=`[${Hae}]`,Kae=`[${Uae}]`,Xae=`[^${EL}${Gae+Yae+Hae+Uae+Wae}]`,dO="\\ud83c[\\udffb-\\udfff]",VNe=`(?:${OL}|${dO})`,Jae=`[^${EL}]`,IL="(?:\\ud83c[\\udde6-\\uddff]){2}",$L="[\\ud800-\\udbff][\\udc00-\\udfff]",Qm=`[${Wae}]`,BNe="\\u200d",kU=`(?:${Kae}|${Xae})`,jNe=`(?:${Qm}|${Xae})`,xU=`(?:${qae}(?:d|ll|m|re|s|t|ve))?`,CU=`(?:${qae}(?:D|LL|M|RE|S|T|VE))?`,Zae=`${VNe}?`,Qae=`[${RNe}]?`,HNe=`(?:${BNe}(?:${[Jae,IL,$L].join("|")})${Qae+Zae})*`,UNe="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",WNe="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ese=Qae+Zae+HNe,GNe=`(?:${[zNe,IL,$L].join("|")})${ese}`,qNe=RegExp([`${Qm}?${Kae}+${xU}(?=${[wU,Qm,"$"].join("|")})`,`${jNe}+${CU}(?=${[wU,Qm+kU,"$"].join("|")})`,`${Qm}?${kU}+${xU}`,`${Qm}+${CU}`,WNe,UNe,`${Yae}+`,GNe].join("|"),"g"),FL=200,hO="__hash_undefined__",YNe=/^\[object (?:Float(?:32|64)|(?:Int|Uint)(?:8|16|32)|Uint8Clamped)Array\]$/,KNe=`[${EL}]`,XNe=`${Jae}${OL}?`,JNe=`(?:${[XNe,OL,IL,$L,KNe].join("|")})`,tse=RegExp(`${dO}(?=${dO})|${JNe+ese}`,"g"),ZNe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,QNe=/^\w*$/,eMe=".".charCodeAt(0),tMe=/\\(\\)?/g,nMe=RegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g"),rMe=/^(?:0|[1-9]\d*)$/,iMe=RegExp.prototype.test.bind(/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/),oMe=4294967295-1,aMe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,nse=t=>tse.test(t),sMe=t=>t.match(tse)||[],lMe=t=>t.split(""),rse=t=>nse(t)?sMe(t):lMe(t),cMe=t=>t==null?[]:AS(t).map(e=>t[e]),AS=t=>Ml(t)?ise(t):Object.keys(Object(t)),uMe=t=>{if(!C3(t))return Object.keys(t);var e=[];for(var n in Object(t))hasOwnProperty.call(t,n)&&n!="constructor"&&e.push(n);return e},ise=(t,e)=>{const n=Array.isArray(t),r=!n&&mc(t)&&Il(t)===S2,i=!n&&!r&&ES(t),o=n||r||i,a=t.length,s=new Array(o?a:0);let l=o?-1:a;for(;++l<a;)s[l]=`${l}`;for(const c in t)(e||hasOwnProperty.call(t,c))&&!(o&&(c==="length"||RL(c,a)))&&s.push(c);return s},_k=(t,e)=>{let{length:n}=t;for(;n--;)if(j0(t[n][0],e))return n;return-1},j0=(t,e)=>t===e||t!==t&&e!==e,mc=t=>t!=null&&typeof t=="object",SC=(t,e,n)=>{if(!Jn(n))return!1;const r=typeof e;return(r=="number"?Ml(n)&&e>-1&&e<n.length:r=="string"&&e in n)?j0(n[e],t):!1},fMe=t=>mc(t)&&Il(t)==TS,dMe=t=>mc(t)&&Il(t)==CS,C3=t=>{const e=t&&t.constructor,n=typeof e=="function"&&e.prototype||Object.prototype;return t===n},H0=(t,e,n)=>{const r=t[e];(!(hasOwnProperty.call(t,e)&&j0(r,n))||n===void 0&&!(e in t))&&(t[e]=n)},PS=(t,e,n)=>{let r=-1;const i=e.length;for(;++r<i;){const o=e[r];H0(n,o,t[o])}return n},Ml=t=>t!=null&&typeof t!="function"&&typeof t.length=="number"&&t.length>-1&&t.length%1===0,v0=t=>typeof t=="symbol"||mc(t)&&Il(t)===x3,hMe=t=>{const e=t.length;let n=new t.constructor(e);return e&&typeof t[0]=="string"&&hasOwnProperty.call(t,"index")&&(n.index=t.index,n.input=t.input),n},LL=(t,e)=>{let n=-1;const r=t.length;for(e||(e=new Array(r));++n<r;)e[n]=t[n];return e},Il=t=>t==null?t===void 0?CNe:xNe:Object.prototype.toString.call(t),DL=t=>{const e=new t.constructor(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e},ose=(t,e)=>{const n=e?DL(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)},pMe=t=>{const e=new t.constructor(t.source,/\w*$/.exec(t));return e.lastIndex=t.lastIndex,e},ase=t=>typeof t.constructor=="function"&&!C3(t)?Object.create(Object.getPrototypeOf(t)):{},NL=t=>t==null?[]:(t=Object(t),Object.getOwnPropertySymbols(t).filter(n=>propertyIsEnumerable.call(t,n))),gMe=(t,e)=>PS(t,NL(t),e);function mMe(t,e){const n=e?DL(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}const vMe=(t,e,n)=>{const r=t.constructor;switch(e){case AL:return DL(t);case _3:case CL:return new r(+t);case PL:return mMe(t,n);case Lae:case Dae:case Nae:case Mae:case Rae:case zae:case Vae:case Bae:case jae:return ose(t,n);case CS:return new r(t);case w3:case k3:return new r(t);case TL:return pMe(t);case TS:return new r;case x3:return Symbol.prototype.valueOf?Object(Symbol.prototype.valueOf.call(t)):{}}},ES=t=>mc(t)&&YNe.test(Il(t)),pO=t=>{const e=Object.keys(t);return!Array.isArray(t)&&t!=null&&e.push(...NL(Object(t))),e},sse=t=>{const e=[];for(;t;)e.push(...NL(t)),t=Object.getPrototypeOf(Object(t));return e},lse=t=>{const e=[];for(const n in t)e.push(n);return Array.isArray(t)||e.push(...sse(t)),e},wk=({__data__:t},e)=>{const n=t;return EMe(e)?n[typeof e=="string"?"string":"hash"]:n.map},yMe=(t,e,n,r)=>{const i=pO(t),o=i.length,s=pO(e).length;if(o!=s)return!1;let l,c=o;for(;c--;)if(l=i[c],!hasOwnProperty.call(e,l))return!1;const u=r.get(t),f=r.get(e);if(u&&f)return u==e&&f==t;let d=!0;r.set(t,e),r.set(e,t);let h;for(;++c<o;){l=i[c];const g=t[l],y=e[l];if(!(g===y||n(g,y,r))){d=!1;break}h||(h=l=="constructor")}if(d&&!h){const g=t.constructor,y=e.constructor;g!=y&&"constructor"in t&&"constructor"in e&&!(typeof g=="function"&&g instanceof g&&typeof y=="function"&&y instanceof y)&&(d=!1)}return r.delete(t),r.delete(e),d},T3=(t,e,n)=>t===e?!0:t==null||e==null||!mc(t)&&!mc(e)?t!==t&&e!==e:bMe(t,e,T3,n),bMe=(t,e,n,r)=>{let i=Array.isArray(t);const o=Array.isArray(e);let a=i?fO:Il(t),s=o?fO:Il(e);a=a==S2?mv:a,s=s==S2?mv:s;let l=a==mv;const c=s==mv,u=a==s;if(u&&!l)return r||(r=new Hv),i||ES(t)?cse(t,e,!1,n,r):wMe(t,e,a,n,r);const f=l&&hasOwnProperty.call(t,"__wrapped__"),d=c&&hasOwnProperty.call(e,"__wrapped__");if(f||d){const h=f?t.value():t,g=d?e.value():e;return r||(r=new Hv),n(h,g,r)}return u?(r||(r=new Hv),yMe(t,e,n,r)):!1},cse=(t,e,n,r,i)=>{const a=t.length,s=e.length;if(a!=s)return!1;const l=i.get(t),c=i.get(e);if(l&&c)return l==e&&c==t;let u=-1,f=!0;const d=n?new w2:void 0;for(i.set(t,e),i.set(e,t);++u<a;){const h=t[u],g=e[u];if(d){if(!SMe(e,(y,S)=>{if(!_Me(d,S)&&(h===y||r(h,y,i)))return d.push(S)})){f=!1;break}}else if(!(h===g||r(h,g,i))){f=!1;break}}return i.delete(t),i.delete(e),f},SMe=(t,e)=>{let n=-1;const r=t==null?0:t.length;for(;++n<r;)if(e(t[n],n,t))return!0;return!1},_Me=(t,e)=>t.has(e),TU=(t,e,n,r)=>!(t.byteLength!=e.byteLength||!n(new Uint8Array(t),new Uint8Array(e),r)),wMe=(t,e,n,r,i)=>{switch(n){case PL:return t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset?!1:(t=t.buffer,e=e.buffer,TU(t,e,r,i));case AL:return TU(t,e,r,i);case _3:case CL:case w3:return j0(+t,+e);case Fae:return t.name==e.name&&t.message==e.message;case TL:case k3:return t==`${e}`;case CS:let o=use;case TS:if(o||(o=A3),t.size!=e.size)return!1;const a=i.get(t);if(a)return a==e;i.set(t,e);const s=cse(o(t),o(e),!0,r,i);return i.delete(t),s;case x3:return Symbol.prototype.valueOf.call(t)==Symbol.prototype.valueOf.call(e)}return!1},use=t=>{let e=-1,n=Array(t.size);return t.forEach((r,i)=>{n[++e]=[i,r]}),n},A3=t=>{let e=-1;const n=new Array(t.size);return t.forEach(r=>{n[++e]=r}),n},ML=(t,e)=>{if(Array.isArray(t))return!1;const n=typeof t;return n==="number"||n==="boolean"||t==null||v0(t)?!0:QNe.test(t)||!ZNe.test(t)||e!=null&&t in Object(e)},kMe=t=>{const e=[];return t.charCodeAt(0)===eMe&&e.push(""),t.replace(nMe,(n,r,i,o)=>{let a=n;i?a=o.replace(tMe,"$1"):r&&(a=r.trim()),e.push(a)}),e},bh=(t,e)=>Array.isArray(t)?t:ML(t,e)?[t]:kMe(`${t}`),OS=(t,e)=>{e=bh(e,t);let n=0;const r=e.length;for(;t!=null&&n<r;)t=t[Sh(e[n])],n++;return n&&n==r?t:void 0};function xMe(t,e){if(t!==e){const n=t!==void 0,r=t===null,i=t===t,o=v0(t),a=e!==void 0,s=e===null,l=e===e,c=v0(e);if(!s&&!c&&!o&&t>e||o&&a&&l&&!s&&!c||r&&a&&l||!n&&l||!i)return 1;if(!r&&!o&&!c&&t<e||c&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!l)return-1}return 0}function CMe(t,e,n){let r=-1;const i=t.criteria,o=e.criteria,a=i.length,s=n.length;for(;++r<a;){const l=r<s?n[r]:null,u=(l&&typeof l=="function"?l:xMe)(i[r],o[r]);if(u)return l&&typeof l!="function"?u*(l=="desc"?-1:1):u}return t.index-e.index}const fse=(t,e)=>{let n=(a,s)=>!!(a==null?0:a.length)&&a.indexOf(s)>-1,r=!0;const i=[],o=e.length;if(!t.length)return i;e.length>=FL&&(n=(a,s)=>a.has(s),r=!1,e=new w2(e));e:for(let a in t){let s=t[a];const l=s;if(s=s!==0?s:0,r&&l===l){let c=o;for(;c--;)if(e[c]===l)continue e;i.push(s)}else n(e,l)||i.push(s)}return i},Sh=t=>{if(typeof t=="string"||v0(t))return t;const e=`${t}`;return e=="0"&&1/t==-1/0?"-0":e},jv=(t,e=!1,n=!1,r=!0,i,o,a,s)=>{let l;if(i&&(l=a?i(t,o,a,s):i(t)),l!==void 0)return l;if(!Jn(t))return t;const c=Array.isArray(t),u=Il(t);if(c){if(l=hMe(t),!e)return LL(t,l)}else{const g=typeof t=="function";if(u===mv||u===S2||g&&!a){if(l=n||g?{}:ase(t),!e)return n?TMe(t,PS(t,Object.keys(t),l)):gMe(t,Object.assign(l,t))}else{if(g||!ANe[u])return a?t:{};l=vMe(t,u,e)}}s||(s=new Hv);const f=s.get(t);if(f)return f;if(s.set(t,l),dMe(t))return t.forEach((g,y)=>{l.set(y,jv(g,e,n,r,i,y,t,s))}),l;if(fMe(t))return t.forEach(g=>{l.add(jv(g,e,n,r,i,g,t,s))}),l;if(ES(t))return l;const h=c?void 0:(r?n?lse:pO:n?hse:AS)(t);return(h||t).forEach((g,y)=>{h&&(y=g,g=t[y]),H0(l,y,jv(g,e,n,r,i,y,t,s))}),l},TMe=(t,e)=>PS(t,sse(t),e),dse=(t,e)=>e.length<2?t:OS(t,e.slice(0,-1)),AMe=(t,e,n)=>{if(!Jn(t))return t;e=bh(e,t);const r=e.length,i=r-1;let o=-1,a=t;for(;a!=null&&++o<r;){const s=Sh(e[o]);let l=n;if(o!=i){const c=a[s];l=void 0,l===void 0&&(l=Jn(c)?c:RL(e[o+1])?[]:{})}H0(a,s,l),a=a[s]}return t},RL=(t,e)=>{const n=typeof t;return e=e??Number.MAX_SAFE_INTEGER,!!e&&(n==="number"||n!=="symbol"&&rMe.test(t))&&t>-1&&t%1==0&&t<e},PMe=(t,e)=>{e=bh(e,t),t=dse(t,e);const n=e[e.length-1];return t==null||delete t[Sh(n)]},EMe=t=>{const e=typeof t;return e==="string"||e==="number"||e==="symbol"||e==="boolean"?t!=="__proto__":t===null},hse=t=>{const e=[];for(const n in t)e.push(n);return e},OMe=t=>{t=Object(t);const e={};for(const n in t)e[n]=t[n];return e},AU=(t,e)=>{if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]};function pse(t,e=!1){return(n,...r)=>{let i=-1,o=r.length,a=o>1?r[o-1]:void 0;const s=o>2?r[2]:void 0;for(a=t.length>3&&typeof a=="function"?(o--,a):e?(l,c)=>{if(Array.isArray(l)&&!Array.isArray(c))return c}:void 0,s&&SC(r[0],r[1],s)&&(a=o<3?void 0:a,o=1),n=Object(n);++i<o;){const l=r[i];l&&t(n,l,i,a)}return n}}const zL=(t,e,n,r,i)=>{t!==e&&yl(e,(o,a)=>{if(Jn(o))i||(i=new Hv),IMe(t,e,a,n,zL,r,i);else{let s=r?r(t[a],o,`${a}`,t,e,i):void 0;s===void 0&&(s=o),gO(t,a,s)}})},IMe=(t,e,n,r,i,o,a)=>{const s=AU(t,n),l=AU(e,n),c=a.get(l);if(c){gO(t,n,c);return}let u=o?o(s,l,`${n}`,t,e,a):void 0,f=u===void 0;if(f){const d=Array.isArray(l),h=!d&&ES(l);u=l,d||h?Array.isArray(s)?u=s:mc(s)&&Ml(s)?u=LL(s):h?(f=!1,u=ose(l,!0)):u=[]:Li(l)||_2(l)?(u=s,_2(s)?u=OMe(s):(typeof s=="function"||!Jn(s))&&(u=ase(l))):f=!1}f&&(a.set(l,u),i(u,l,r,o,a),a.delete(l)),gO(t,n,u)},gO=(t,e,n)=>{(n!==void 0&&!j0(t[e],n)||n===void 0&&!(e in t))&&H0(t,e,n)};function $Me(t,e,n){const r=Object(t),i=n(t);let{length:o}=i,a=-1;for(;o--;){const s=i[++a];if(e(r[s],s,r)===!1)break}return t}const FMe=(t,e)=>t&&$Me(t,e,AS),VL=(t,e)=>{if(t==null)return t;if(!Ml(t))return FMe(t,e);const n=t.length,r=Object(t);let i=-1;for(;++i<n&&e(r[i],i,r)!==!1;);return t};function LMe(t){const e=t==null?0:t.length;return e?t[e-1]:void 0}const DMe=Set&&1/A3(new Set([void 0,-0]))[1]==1/0?t=>new Set(t):()=>{};function gse(t,e,n,r,i,o){return Jn(t)&&Jn(e)&&(o.set(e,t),zL(t,e,void 0,gse,o),o.delete(e)),t}function NMe(t,e,n){e.length?e=e.map(a=>Array.isArray(a)?s=>OS(s,a.length===1?a[0]:a):a):e=[a=>a];let r=-1,i=-1;const o=Ml(t)?new Array(t.length):[];return VL(t,a=>{const s=e.map(l=>l(a));o[++i]={criteria:s,index:++r,value:a}}),MMe(o,(a,s)=>CMe(a,s,n))}function MMe(t,e){let{length:n}=t;for(t.sort(e);n--;)t[n]=t[n].value;return t}function mse(t){return t===t&&!Jn(t)}function vse(t,e){return n=>n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}function yse(t,e){return t!=null&&eRe(t,e,QMe)}function RMe(t,e){return ML(t)&&mse(e)?vse(Sh(t),e):n=>{const r=OS(n,t);return r===void 0&&r===e?yse(n,t):T3(e,r)}}function zMe(t){const e=VMe(t);return e.length===1&&e[0][2]?vse(e[0][0],e[0][1]):n=>n===t||BMe(n,t,e)}function VMe(t){const e=AS(t);let n=e.length;for(;n--;){const r=e[n],i=t[r];e[n]=[r,i,mse(i)]}return e}function BMe(t,e,n,r){let i=n.length;const o=i,a=!r;if(t==null)return!o;let s,l;for(t=Object(t);i--;)if(s=n[i],a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1;for(;++i<o;){s=n[i];const c=s[0],u=t[c],f=s[1];if(a&&s[2]){if(u===void 0&&!(c in t))return!1}else{const d=new Hv;if(r&&(l=r(u,f,c,t,e,d)),!(l===void 0?T3(f,u,d):l))return!1}}return!0}function jMe(t){return ML(t)?HMe(Sh(t)):UMe(t)}function HMe(t){return e=>e==null?void 0:e[t]}function UMe(t){return e=>OS(e,t)}function WMe(t){return typeof t=="function"?t:t==null?e=>e:typeof t=="object"?Array.isArray(t)?RMe(t[0],t[1]):zMe(t):jMe(t)}function P3(){const t=WMe;return arguments.length?t(arguments[0]):t}const GMe=(t,e,n,r)=>{let i=-1;const o=t==null?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n},qMe=(t,e,n,r,i)=>(i(t,(o,a,s)=>{n=r?(r=!1,o):e(n,o,a,s)}),n);function YMe(t,e,n){const r=Array.isArray(t)?GMe:qMe,i=arguments.length<3;return r(t,e,n,i,VL)}const KMe=t=>Array.isArray(t)||_2(t)||!!(t&&t[Symbol.isConcatSpreadable]);function bse(t,e,n,r,i){let o=-1;const a=t.length;for(n||(n=KMe),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?bse(s,e-1,n,r,i):i.push(...s):r||(i[i.length]=s)}return i}const _2=t=>mc(t)&&Il(t)=="[object Arguments]",XMe=(t,e)=>JMe(t,e,(n,r)=>yse(t,r)),JMe=(t,e,n)=>{let r=-1;const i=e.length,o={};for(;++r<i;){const a=e[r],s=OS(t,a);n(s,a)&&AMe(o,bh(a,t),s)}return o},ZMe=t=>typeof t=="number"&&t>-1&&t%1==0&&t<=Number.MAX_SAFE_INTEGER,QMe=(t,e)=>t!=null&&e in Object(t),eRe=(t,e,n)=>{e=bh(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var a=Sh(e[r]);if(!(o=t!=null&&n(t,a)))break;t=t[a]}return o||++r!=i?o:(i=t==null?0:t.length,!!i&&ZMe(i)&&RL(a,i)&&(Array.isArray(t)||_2(t)))},tRe=t=>t.match(aMe),nRe=t=>t.match(qNe),rRe=(t,e)=>e===void 0?(iMe(t)?nRe(t):tRe(t))||[]:t.match(e)||[],iRe=(t,e,n)=>{const{length:r}=t;return n=n===void 0?r:n,!e&&n>=r?t:t.slice(e,n)},oRe=aRe("toUpperCase");function aRe(t){return e=>{if(!e)return"";const n=nse(e)?rse(e):void 0,r=n?n[0]:e[0],i=n?iRe(n,1).join(""):e.slice(1);return r[t]()+i}}let Hv=class{constructor(e){const n=this.__data__=new C7(e);this.size=n.size}clear(){this.__data__=new C7,this.size=0}delete(e){const n=this.__data__,r=n.delete(e);return this.size=n.size,r}get(e){return this.__data__.get(e)}has(e){return this.__data__.has(e)}set(e,n){let r=this.__data__;if(r instanceof C7){const i=r.__data__;if(i.length<FL-1)return i.push([e,n]),this.size=++r.size,this;r=this.__data__=new Sse(i)}return r.set(e,n),this.size=r.size,this}},C7=class{constructor(e){let n=-1;const r=e==null?0:e.length;for(this.clear();++n<r;){const i=e[n];this.set(i[0],i[1])}}clear(){this.__data__=[],this.size=0}delete(e){const n=this.__data__,r=_k(n,e);if(r<0)return!1;const i=n.length-1;return r==i?n.pop():n.splice(r,1),--this.size,!0}get(e){const n=this.__data__,r=_k(n,e);return r<0?void 0:n[r][1]}has(e){return _k(this.__data__,e)>-1}set(e,n){const r=this.__data__,i=_k(r,e);return i<0?(++this.size,r.push([e,n])):r[i][1]=n,this}},Sse=class{constructor(e){let n=-1;const r=e==null?0:e.length;for(this.clear();++n<r;){const i=e[n];this.set(i[0],i[1])}}clear(){this.size=0,this.__data__={hash:new PU,map:new Map,string:new PU}}delete(e){const n=wk(this,e).delete(e);return this.size-=n?1:0,n}get(e){return wk(this,e).get(e)}has(e){return wk(this,e).has(e)}set(e,n){const r=wk(this,e),i=r.size;return r.set(e,n),this.size+=r.size==i?0:1,this}},PU=class{constructor(e){let n=-1;const r=e==null?0:e.length;for(this.clear();++n<r;){const i=e[n];this.set(i[0],i[1])}}clear(){this.__data__=Object.create(null),this.size=0}delete(e){const n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}get(e){const r=this.__data__[e];return r===hO?void 0:r}has(e){return this.__data__[e]!==void 0}set(e,n){const r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n===void 0?hO:n,this}},w2=class{constructor(e){let n=-1;const r=e==null?0:e.length;for(this.__data__=new Sse;++n<r;)this.add(e[n])}add(e){return this.__data__.set(e,hO),this}has(e){return this.__data__.has(e)}};w2.prototype.push=w2.prototype.add;const sRe=function(t){var e=Object.prototype.toString;return t===!0||t===!1||!!t&&typeof t=="object"&&e.call(t)===_3},Jn=function(t){return!!t&&(typeof t=="object"||typeof t=="function")},Ka=function(t){var e=Object.prototype.toString;return typeof t=="number"||!!t&&typeof t=="object"&&e.call(t)===w3},Ko=function(t){var e=Object.prototype.toString;return typeof t=="string"||!!t&&typeof t=="object"&&e.call(t)===k3},Nt=pse((t,e)=>{if(C3(e)||Ml(e)){PS(e,AS(e),t);return}for(var n in e)hasOwnProperty.call(e,n)&&H0(t,n,e[n])}),lRe=(t,...e)=>{let n=-1,r=e.length;const i=r>2?e[2]:void 0;for(i&&SC(e[0],e[1],i)&&(r=1);++n<r;){const o=e[n];if(o==null)continue;const a=Object.keys(o),s=a.length;let l=-1;for(;++l<s;){const c=a[l],u=t[c];(u===void 0||j0(u,Object.prototype[c])&&!hasOwnProperty.call(t,c))&&(t[c]=o[c])}}return t},nc=lRe,cRe=function(...e){return e.push(void 0,gse),Ri.apply(void 0,e)},BL=cRe,uc=(t,e,...n)=>{let r=-1;const i=typeof e=="function",o=Ml(t)?new Array(t.length):[];return VL(t,a=>{o[++r]=i?e.apply(a,n):uRe(a,e,...n)}),o},uRe=(t,e,...n)=>{e=bh(e,t),t=dse(t,e);const r=t==null?t:t[Sh(LMe(e))];return r==null?void 0:r.apply(t,n)},_se=(t,e,n)=>{let r=0,i=t==null?0:t.length;if(i==0)return 0;n=P3(n,2),e=n(e);const o=e!==e,a=e===null,s=v0(e),l=e===void 0;for(;r<i;){let c;const u=Math.floor((r+i)/2),f=n(t[u]),d=f!==void 0,h=f===null,g=f===f,y=v0(f);o?c=g:l?c=g&&d:a?c=g&&d&&!h:s?c=g&&d&&!h&&!y:h||y?c=!1:c=f<e,c?r=u+1:i=u}return Math.min(i,oMe)},IS=(t,e)=>{let n=-1,r=(l,c)=>!!(l==null?0:l.length)&&l.indexOf(c)>-1;e=P3(e,2);let i=!0;const{length:o}=t,a=[];let s=a;if(o>=FL){const l=e?null:DMe(t);if(l)return A3(l);i=!1,r=(c,u)=>c.has(u),s=new w2}else s=e?[]:a;e:for(;++n<o;){let l=t[n];const c=e?e(l):l;if(l=l!==0?l:0,i&&c===c){let u=s.length;for(;u--;)if(s[u]===c)continue e;e&&s.push(c),a.push(l)}else r(s,c)||(s!==a&&s.push(c),a.push(l))}return a},Uc=t=>jv(t),vl=t=>jv(t,!0),Pd=t=>{if(t==null)return!0;if(Ml(t)&&(Array.isArray(t)||typeof t=="string"||typeof t.splice=="function"||ES(t)||_2(t)))return!t.length;const e=Il(t);if(e=="[object Map]"||e=="[object Set]")return!t.size;if(C3(t))return!uMe(t).length;for(const n in t)if(hasOwnProperty.call(t,n))return!1;return!0},vv=(t,e)=>T3(t,e),br=t=>typeof t=="function",Li=t=>{if(!mc(t)||Il(t)!="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},Ln=t=>{if(!t)return[];if(Ml(t))return Ko(t)?rse(t):LL(t);if(Symbol.iterator&&Symbol.iterator in Object(t)){const r=t[Symbol.iterator]();let i;const o=[];for(;!(i=r.next()).done;)o.push(i.value);return o}const e=Il(t);return(e==CS?use:e==TS?A3:cMe)(t)};function fRe(t,e,n){if(typeof t!="function")throw new TypeError("Expected a function");let r,i,o,a,s,l,c=0,u=!1,f=!1,d=!0;const h=!e&&e!==0&&window&&typeof window.requestAnimationFrame=="function";e=+e||0,Jn(n)&&(u=!!n.leading,f="maxWait"in n,o=f?Math.max(+n.maxWait||0,e):o,d="trailing"in n?!!n.trailing:d);function g(T){const E=r,I=i;return r=i=void 0,c=T,a=t.apply(I,E),a}function y(T,E){return h?(window.cancelAnimationFrame(s),window.requestAnimationFrame(T)):setTimeout(T,E)}function S(T){if(h)return window.cancelAnimationFrame(T);clearTimeout(T)}function v(T){return c=T,s=y(C,e),u?g(T):a}function _(T){const E=T-l,I=T-c,D=e-E;return f?Math.min(D,o-I):D}function x(T){const E=T-l,I=T-c;return l===void 0||E>=e||E<0||f&&I>=o}function C(){const T=Date.now();if(x(T))return k(T);s=y(C,_(T))}function k(T){return s=void 0,d&&r?g(T):(r=i=void 0,a)}function m(...T){const E=Date.now(),I=x(E);if(r=T,i=this,l=E,I){if(s===void 0)return v(l);if(f)return s=y(C,e),g(l)}return s===void 0&&(s=y(C,e)),a}return m.cancel=()=>{s!==void 0&&S(s),c=0,r=l=i=s=void 0},m.flush=()=>s===void 0?a:k(Date.now()),m.pending=()=>s!==void 0,m}const dRe=(t,e)=>(e=P3(e,2),YMe(t,(n,r,i)=>(i=e(r),hasOwnProperty.call(n,i)?n[i].push(r):H0(n,i,[r]),n),{})),EU=(t,e=[])=>{if(t==null)return[];const n=e.length;return n>1&&SC(t,e[0],e[1])?e=[]:n>2&&SC(e[0],e[1],e[2])&&(e=[e[0]]),Array.isArray(e)||(e=[P3(e,2)]),NMe(t,e.flat(1),[])},hRe=t=>(t==null?0:t.length)?bse(t,1/0):[],OU=(t,...e)=>Ml(t)?fse(t,e):[],pRe=(t,...e)=>mc(t)&&Ml(t)?fse(t,e.flat(1)):[],mO=(...t)=>{const e=t.flat(1);return IS(e)},cf=(t,e)=>{if(t==null)return!1;typeof e=="string"&&(e=e.split("."));let n=-1,r=t;for(;++n<e.length;){if(!r||!hasOwnProperty.call(r,e[n]))return!1;r=r[e[n]]}return!0},Di=(t,e,n)=>{e=bh(e,t);let r=-1,i=e.length;for(i||(i=1,t=void 0);++r<i;){let o=t==null?void 0:t[Sh(e[r])];o===void 0&&(r=i,o=n),t=typeof o=="function"?o.call(t):o}return t},$g=(t,...e)=>{let n={};if(t==null)return n;let r=!1;e=e.flat(1).map(o=>(o=bh(o,t),r||(r=o.length>1),o)),PS(t,lse(t),n),r&&(n=jv(n,!0,!0,!0,o=>Li(o)?void 0:o));let i=e.length;for(;i--;)PMe(n,e[i]);return n},wse=(t,...e)=>t==null?{}:XMe(t,e.flat(1/0)),yl=(t,e=n=>n)=>{let n=-1;const r=Object(t),i=Ml(t)?ise(t,!0):hse(t);let o=i.length;for(;o--;){const a=i[++n];if(e(r[a],a,r)===!1)break}},gRe=(t="")=>rRe(`${t}`.replace(/['\u2019]/g,"")).reduce((e,n,r)=>(n=n.toLowerCase(),e+(r?oRe(n):n)),"");let mRe=0;const vRe=(t="")=>{const e=++mRe;return`${t}`+e},Ri=pse((t,e,n,r)=>{zL(t,e,n,r)},!0),ac=function(t){return t&&t.toString().split(" ").map(function(e){return e.substr(0,hu.classNamePrefix.length)!==hu.classNamePrefix&&(e=hu.classNamePrefix+e),e}).join(" ")},yRe=function(t){return t&&t.toString().split(" ").map(function(e){return e.substr(0,hu.classNamePrefix.length)===hu.classNamePrefix&&(e=e.substr(hu.classNamePrefix.length)),e}).join(" ")},_C=function(t,e){const n={},r={},i=Ue.namespace.svg,o=e||i,a=document.createDocumentFragment(),s=function(l,c,u){for(let f=0;f<l.length;f++){const d=l[f];if(typeof d=="string"){const C=document.createTextNode(d);c.appendChild(C);continue}if(!d.hasOwnProperty("tagName"))throw new Error("json-dom-parser: missing tagName");const h=d.tagName;let g;d.hasOwnProperty("namespaceURI")&&(u=d.namespaceURI),g=document.createElementNS(u,h);const y=u===i,S=y?Ue:zn,v=d.attributes;v&&S(g).attr(v);const _=d.style;if(_&&zn(g).css(_),d.hasOwnProperty("className")){const C=d.className;y?g.className.baseVal=C:g.className=C}if(d.hasOwnProperty("textContent")&&(g.textContent=d.textContent),d.hasOwnProperty("selector")){const C=d.selector;if(n[C])throw new Error("json-dom-parser: selector must be unique");n[C]=g,S(g).attr("joint-selector",C)}if(d.hasOwnProperty("groupSelector")){let C=d.groupSelector;Array.isArray(C)||(C=[C]);for(let k=0;k<C.length;k++){const m=C[k];let T=r[m];T||(T=r[m]=[]),T.push(g)}}c.appendChild(g);const x=d.children;Array.isArray(x)&&s(x,g,u)}};return s(t,a,o),{fragment:a,selectors:n,groupSelectors:r}},kk=function(t){let e=0;if(t.length===0)return e;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);e=(e<<5)-e+r,e=e&e}return e},k2=function(t,e,n){for(var r=Array.isArray(e)?e:e.split(n||"/"),i,o=0,a=r.length;o<a;)if(i=r[o++],Object(t)===t&&i in t)t=t[i];else return;return t},kse=function(t,e){return typeof e!="string"&&typeof e!="number"&&(e=String(e)),!(e==="constructor"&&typeof t[e]=="function"||e==="__proto__")},vO=function(t,e,n,r){const i=Array.isArray(e)?e:e.split(r||"/"),o=i.length-1;let a=t,s=0;for(;s<o;s++){const l=i[s];if(!kse(a,l))return t;a=a[l]||(a[l]={})}return a[i[o]]=n,t},IU=function(t,e,n){const r=Array.isArray(e)?e:e.split(n||"/"),i=r.length-1;let o=t,a=0;for(;a<i;a++){const s=r[a];if(!kse(o,s))return t;const l=o[s];if(!l)return t;o=l}return delete o[r[i]],t},bRe=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=Math.random()*16|0,n=t==="x"?e:e&3|8;return n.toString(16)})},yv=function(t){return yv.id=yv.id||1,t===void 0?"j_"+yv.id++:(t.id=t.id===void 0?"j_"+yv.id++:t.id,t.id)},SRe=function(t){return t.replace(/[A-Z]/g,"-$&").toLowerCase()},bi=function(t){if(t.normalized)return t;const{originalEvent:e,target:n}=t,r=e&&e.changedTouches&&e.changedTouches[0];if(r)for(let i in r)t[i]===void 0&&(t[i]=r[i]);if(n){const i=n.correspondingUseElement;i&&(t.target=i)}return t.normalized=!0,t},_Re=function(t){let i=0,o=0,a=0,s=0;return"detail"in t&&(o=t.detail),"wheelDelta"in t&&(o=-t.wheelDelta/120),"wheelDeltaY"in t&&(o=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(i=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(i=o,o=0),a="deltaX"in t?t.deltaX:i*10,s="deltaY"in t?t.deltaY:o*10,(a||s)&&t.deltaMode&&(t.deltaMode==1?(a*=40,s*=40):(a*=800,s*=800)),t.deltaX===0&&t.deltaY!==0&&t.shiftKey&&(a=s,s=0,i=o,o=0),a&&!i&&(i=a<1?-1:1),s&&!o&&(o=s<1?-1:1),{spinX:i,spinY:o,deltaX:a,deltaY:s}},wRe=function(t,e){return t>e?e:t<-e?-e:t},yO=function(){var t;if(typeof window<"u"&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),!t){var e=0;t=function(n){var r=new Date().getTime(),i=Math.max(0,16-(r-e)),o=setTimeout(function(){n(r+i)},i);return e=r+i,o}}return function(n,r,...i){return t(r!==void 0?n.bind(r,...i):n)}}(),bO=function(){var t,e=typeof window<"u";return e&&(t=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),t=t||clearTimeout,e?t.bind(window):t}(),Eo=function(t){return Ko(t)&&t.slice(-1)==="%"},kRe=function(t,e){function n(s){var l=new RegExp("(?:\\d+(?:\\.\\d+)*)("+s+")$").exec(t);return l?l[1]:null}var r=parseFloat(t);if(Number.isNaN(r))return null;var i={};i.value=r;var o;if(e==null)o="[A-Za-z]*";else if(Array.isArray(e)){if(e.length===0)return null;o=e.join("|")}else Ko(e)&&(o=e);var a=n(o);return a===null?null:(i.unit=a,i)},wC=0;function xRe(t,e){const n=t.split(e);let r=1;for(let i=0,o=n.length-1;i<o;i++){const a=[];(i>0||n[0]!=="")&&a.push(wC),a.push(e),(i<o-1||n[o]!=="")&&a.push(wC),n.splice(r,0,...a),r+=a.length+1}return n.filter(i=>i!=="")}function $U(t,e){if(t===null)return e.getBBox().height;switch(t.unit){case"em":return e.getBBox().height*t.value;case"px":case"":return t.value}}const xse=function(t,e,n={},r={}){var i=e.width,o=e.height,a=r.svgDocument||Ue("svg").node,s=Ue("tspan").node,l=Ue("text").attr(n).append(s).node,c=document.createTextNode("");l.style.opacity=0,l.style.display="block",s.style.display="block",s.appendChild(c),a.appendChild(l),r.svgDocument||document.body.appendChild(a);const u=r.preserveSpaces,f=" ";var d=r.separator||f,h=r.eol||`
`,g=r.hyphen?new RegExp(r.hyphen):/[^\w\d]/,y=r.maxLineCount;Ka(y)||(y=1/0);var S=t.split(d),v=[],_=[],x,C,k;u&&Ue(s).attr("xml:space","preserve");for(var m=0,T=0,E=S.length;m<E;m++){var I=S[m];if(!(!I&&!u)&&typeof I=="string"){var D=!1;if(h&&I.indexOf(h)>=0)if(I.length>1){const Se=xRe(S[m],h);S.splice(m,1,...Se),m--,E=S.length;continue}else{if(u&&typeof S[m-1]=="string"){S.splice(m,wC,"",wC),E+=2,m--;continue}_[++T]=!u||typeof S[m+1]=="string"?"":void 0,D=!0}if(!D){let Se;if(u?Se=_[T]!==void 0?_[T]+f+I:I:Se=_[T]?_[T]+f+I:I,c.data=Se,s.getComputedTextLength()<=i)_[T]=Se,(x||C)&&(v[T++]=!0,x=0,C=0);else{if(!_[T]||x){var F=!!x;if(x=I.length-1,F||!x){if(!x){if(!_[T]){_=[];break}S.splice(m,2,I+S[m+1]),E--,v[T++]=!0,m--;continue}S[m]=I.substring(0,x),S[m+1]=I.substring(x)+(S[m+1]===void 0?"":S[m+1])}else{if(C)S.splice(m,2,S[m]+S[m+1]),C=0;else{var R=I.search(g);R>-1&&R!==I.length-1&&R!==0&&(C=R+1,x=0),S.splice(m,1,I.substring(0,C||x),I.substring(C||x)),E++}T&&!v[T-1]&&T--}(!u||_[T]!=="")&&m--;continue}T++,m--}}var z=null;if(_.length>y)z=y-1;else if(o!==void 0){if(k===void 0&&c.data!=="")if(n.lineHeight==="auto")k=$U({value:1.5,unit:"em"},l);else{const Se=kRe(n.lineHeight,["em","px",""]);k=$U(Se,l)}k*_.length>o&&(z=Math.floor(o/k)-1)}if(z!==null){_.splice(z+1);var B=r.ellipsis;if(!B||z<0)break;typeof B!="string"&&(B="");var ie=_[z];if(!ie&&!D)break;var oe=ie.length,_e,Ae,Pe;do{if(Ae=ie[oe],_e=ie.substring(0,oe),Ae?Ae.match(d)&&(_e+=Ae):(Pe=typeof d=="string"?d:" ",_e+=Pe),_e+=B,c.data=_e,s.getComputedTextLength()<=i){_[z]=_e;break}oe--}while(oe>=0);break}}}return r.svgDocument?a.removeChild(l):document.body.removeChild(a),_.join(h)},CRe=function(t){var e=zn(zn.parseHTML("<div>"+t+"</div>",null,!1));return e.find("*").each(function(){var n=this;zn.each(n.attributes,function(){var r=this,i=r.name,o=r.value;(i.startsWith("on")||o.startsWith("javascript:")||o.startsWith("data:")||o.startsWith("vbscript:"))&&zn(n).removeAttr(i)})}),e.html()},TRe=function(t,e){var n=zn(t),r=n.map(function(){var i=this,o=i.parentNode,a=o.insertBefore(document.createTextNode(""),i.nextSibling);return function(){if(o===this)throw new Error("You can't sort elements if any one is a descendant of another.");o.insertBefore(this,a),o.removeChild(a)}});return Array.prototype.sort.call(n,e).each(function(i){r[i].call(this)})},Fg=function(t){if(Object(t)!==t){var e=0;return isFinite(t)&&(e=+t),{top:e,right:e,bottom:e,left:e}}var n,r,i,o;return n=r=i=o=0,isFinite(t.vertical)&&(n=i=+t.vertical),isFinite(t.horizontal)&&(r=o=+t.horizontal),isFinite(t.top)&&(n=+t.top),isFinite(t.right)&&(r=+t.right),isFinite(t.bottom)&&(i=+t.bottom),isFinite(t.left)&&(o=+t.left),{top:n,right:r,bottom:i,left:o}},ARe={linear:function(t){return t},quad:function(t){return t*t},cubic:function(t){return t*t*t},inout:function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)},exponential:function(t){return Math.pow(2,10*(t-1))},bounce:function(t){for(var e=0,n=1;;e+=n,n/=2)if(t>=(7-4*e)/11){var r=(11-6*e-11*t)/4;return-r*r+n*n}},reverse:function(t){return function(e){return 1-t(1-e)}},reflect:function(t){return function(e){return .5*(e<.5?t(2*e):2-t(2-2*e))}},clamp:function(t,e,n){return e=e||0,n=n||1,function(r){var i=t(r);return i<e?e:i>n?n:i}},back:function(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}},elastic:function(t){return t||(t=1.5),function(e){return Math.pow(2,10*(e-1))*Math.cos(20*Math.PI*t/3*e)}}},Cse={number:function(t,e){var n=e-t;return function(r){return t+n*r}},object:function(t,e){var n=Object.keys(t);return function(r){var i,o,a={};for(i=n.length-1;i!=-1;i--)o=n[i],a[o]=t[o]+(e[o]-t[o])*r;return a}},hexColor:function(t,e){var n=parseInt(t.slice(1),16),r=parseInt(e.slice(1),16),i=n&255,o=(r&255)-i,a=n&65280,s=(r&65280)-a,l=n&16711680,c=(r&16711680)-l;return function(u){var f=i+o*u&255,d=a+s*u&65280,h=l+c*u&16711680;return"#"+(1<<24|f|d|h).toString(16).slice(1)}},unit:function(t,e){var n=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,r=n.exec(t),i=n.exec(e),o=i[1].indexOf("."),a=o>0?i[1].length-o-1:0;t=+r[1];var s=+i[1]-t,l=r[2];return function(c){return(t+s*c).toFixed(a)+l}}},PRe={outline:function(t){var e='<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${outerRadius}" /><feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${innerRadius}" /><feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/><feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/><feMerge><feMergeNode in="outline"/><feMergeNode in="SourceGraphic"/></feMerge></filter>',n=Number.isFinite(t.margin)?t.margin:2,r=Number.isFinite(t.width)?t.width:1;return ma(e)({color:t.color||"blue",opacity:Number.isFinite(t.opacity)?t.opacity:1,outerRadius:n+r,innerRadius:n})},highlight:function(t){var e='<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${width}"/><feComposite result="composed" in="colored" in2="morphed" operator="in"/><feGaussianBlur result="blured" in="composed" stdDeviation="${blur}"/><feBlend in="SourceGraphic" in2="blured" mode="normal"/></filter>';return ma(e)({color:t.color||"red",width:Number.isFinite(t.width)?t.width:1,blur:Number.isFinite(t.blur)?t.blur:0,opacity:Number.isFinite(t.opacity)?t.opacity:1})},blur:function(t){var e=Number.isFinite(t.x)?t.x:2;return ma('<filter><feGaussianBlur stdDeviation="${stdDeviation}"/></filter>')({stdDeviation:Number.isFinite(t.y)?[e,t.y]:e})},dropShadow:function(t){var e="SVGFEDropShadowElement"in window?'<filter><feDropShadow stdDeviation="${blur}" dx="${dx}" dy="${dy}" flood-color="${color}" flood-opacity="${opacity}"/></filter>':'<filter><feGaussianBlur in="SourceAlpha" stdDeviation="${blur}"/><feOffset dx="${dx}" dy="${dy}" result="offsetblur"/><feFlood flood-color="${color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="${opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';return ma(e)({dx:t.dx||0,dy:t.dy||0,opacity:Number.isFinite(t.opacity)?t.opacity:1,color:t.color||"black",blur:Number.isFinite(t.blur)?t.blur:4})},grayscale:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return ma('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0"/></filter>')({a:.2126+.7874*(1-e),b:.7152-.7152*(1-e),c:.0722-.0722*(1-e),d:.2126-.2126*(1-e),e:.7152+.2848*(1-e),f:.0722-.0722*(1-e),g:.2126-.2126*(1-e),h:.0722+.9278*(1-e)})},sepia:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return ma('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0"/></filter>')({a:.393+.607*(1-e),b:.769-.769*(1-e),c:.189-.189*(1-e),d:.349-.349*(1-e),e:.686+.314*(1-e),f:.168-.168*(1-e),g:.272-.272*(1-e),h:.534-.534*(1-e),i:.131+.869*(1-e)})},saturate:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return ma('<filter><feColorMatrix type="saturate" values="${amount}"/></filter>')({amount:1-e})},hueRotate:function(t){return ma('<filter><feColorMatrix type="hueRotate" values="${angle}"/></filter>')({angle:t.angle||0})},invert:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return ma('<filter><feComponentTransfer><feFuncR type="table" tableValues="${amount} ${amount2}"/><feFuncG type="table" tableValues="${amount} ${amount2}"/><feFuncB type="table" tableValues="${amount} ${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:1-e})},brightness:function(t){return ma('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}"/><feFuncG type="linear" slope="${amount}"/><feFuncB type="linear" slope="${amount}"/></feComponentTransfer></filter>')({amount:Number.isFinite(t.amount)?t.amount:1})},contrast:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return ma('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}" intercept="${amount2}"/><feFuncG type="linear" slope="${amount}" intercept="${amount2}"/><feFuncB type="linear" slope="${amount}" intercept="${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:.5-e/2})}},ma=function(t){var e=/<%= ([^ ]+) %>|\$\{ ?([^{} ]+) ?\}|\{\{([^{} ]+)\}\}/g;return function(n){return n=n||{},t.replace(e,function(r){for(var i=Array.from(arguments),o=i.slice(1,4).find(function(l){return!!l}),a=o.split("."),s=n[a.shift()];s!==void 0&&a.length;)s=s[a.shift()];return s!==void 0?s:""})}},sb=function(){};function Tse(t){t=IS(t);const e=Ln(t).reduce(function(n,r){return n[r.id]=r.clone(),n},{});return Ln(t).forEach(function(n){const r=e[n.id];if(r.isLink()){const a=r.source(),s=r.target();a.id&&e[a.id]&&r.prop("source/id",e[a.id].id),s.id&&e[s.id]&&r.prop("target/id",e[s.id].id)}const i=n.get("parent");i&&e[i]&&r.set("parent",e[i].id);const o=Ln(n.get("embeds")).reduce(function(a,s){return e[s]&&a.push(e[s].id),a},[]);Pd(o)||r.set("embeds",o)}),e}const ERe=["checked","selected","disabled","readOnly","contentEditable","value","indeterminate"],ORe=ERe.reduce((t,e)=>(t[e]=!0,t),{}),IRe={qualify:function(t){return Li(t)},set:function(t,e,n){Object.keys(t).forEach(function(r){if(ORe[r]&&r in n){const i=t[r];n.tagName==="SELECT"&&Array.isArray(i)?Array.from(n.options).forEach(function(o,a){o.selected=i.includes(o.value)}):n[r]=i}})}},$Re=IRe;function sd(t,e){return function(n,r){var i=Eo(n);n=parseFloat(n),i&&(n/=100);var o={};if(isFinite(n)){var a=i||n>=0&&n<=1?n*r[e]:Math.max(n+r[e],0);o[t]=a}return o}}function xk(t,e,n){return function(r,i){var o=Eo(r);r=parseFloat(r),o&&(r/=100);var a;if(isFinite(r)){var s=i[n]();o||r>0&&r<1?a=s[t]+i[e]*r:a=s[t]+r}var l=we();return l[t]=a||0,l}}function FU(t,e,n){return function(r,i){var o;r==="middle"?o=i[e]/2:r===n?o=i[e]:isFinite(r)?o=r>-1&&r<1?-i[e]*r:-r:Eo(r)?o=i[e]*parseFloat(r)/100:o=0;var a=we();return a[t]=-(i[t]+o),a}}function Ase(t,e){var n="joint-shape",r=e&&e.resetOffset;return function(i,o,a){var s=zn(a),l=s.data(n);if(!l||l.value!==i){var c=t(i);l={value:i,shape:c,shapeBBox:c.bbox()},s.data(n,l)}var u=l.shape.clone(),f=l.shapeBBox.clone(),d=f.origin(),h=o.origin();f.x=h.x,f.y=h.y;var g=o.maxRectScaleToFit(f,h),y=f.width===0||o.width===0?1:g.sx,S=f.height===0||o.height===0?1:g.sy;return u.scale(y,S,d),r&&u.translate(-d.x,-d.y),u}}function LU(t){function e(r){return new xt(Ue.normalizePathData(r))}var n=Ase(e,t);return function(r,i,o){var a=n(r,i,o);return{d:a.serialize()}}}function DU(t){var e=Ase($r,t);return function(n,r,i){var o=e(n,r,i);return{points:o.serialize()}}}function Ck(t,e){var n=new we(1,0);return function(r){var i,o,a=this[t](r);return a?(o=e.rotate?a.vector().vectorAngle(n):0,i=a.start):(i=this.path.start,o=0),o===0?{transform:"translate("+i.x+","+i.y+")"}:{transform:"translate("+i.x+","+i.y+") rotate("+o+")"}}}function NU(t){return function(n,r,i){const o=Ue(i);o.attr(t)!==n&&o.attr(t,n)}}function Rm(t,e,n){return n.text!==void 0}function lb(){return this.model.isLink()}function T7(t){var e={},n=t.stroke;typeof n=="string"&&(e.stroke=n,e.fill=n);var r=t.strokeOpacity;return r===void 0&&(r=t["stroke-opacity"]),r===void 0&&(r=t.opacity),r!==void 0&&(e["stroke-opacity"]=r,e["fill-opacity"]=r),e}function MU(t){const{paper:e}=this;return`url(#${t.type==="pattern"?e.definePattern(t):e.defineGradient(t)})`}const un={xlinkShow:{set:"xlink:show"},xlinkRole:{set:"xlink:role"},xlinkType:{set:"xlink:type"},xlinkArcrole:{set:"xlink:arcrole"},xlinkTitle:{set:"xlink:title"},xlinkActuate:{set:"xlink:actuate"},xmlSpace:{set:"xml:space"},xmlBase:{set:"xml:base"},xmlLang:{set:"xml:lang"},preserveAspectRatio:{set:"preserveAspectRatio"},requiredExtension:{set:"requiredExtension"},requiredFeatures:{set:"requiredFeatures"},systemLanguage:{set:"systemLanguage"},externalResourcesRequired:{set:"externalResourceRequired"},href:{set:NU("href")},xlinkHref:{set:NU("xlink:href")},filter:{qualify:Li,set:function(t){return"url(#"+this.paper.defineFilter(t)+")"}},fill:{qualify:Li,set:MU},stroke:{qualify:Li,set:MU},sourceMarker:{qualify:Li,set:function(t,e,n,r){return t=Nt(T7(r),t),{"marker-start":"url(#"+this.paper.defineMarker(t)+")"}}},targetMarker:{qualify:Li,set:function(t,e,n,r){return t=Nt(T7(r),{transform:"rotate(180)"},t),{"marker-end":"url(#"+this.paper.defineMarker(t)+")"}}},vertexMarker:{qualify:Li,set:function(t,e,n,r){return t=Nt(T7(r),t),{"marker-mid":"url(#"+this.paper.defineMarker(t)+")"}}},text:{qualify:function(t,e,n){return!n.textWrap||!Li(n.textWrap)},set:function(t,e,n,r){var i=zn(n),o="joint-text",a=i.data(o),s=wse(r,"lineHeight","annotations","textPath","x","textVerticalAnchor","eol","displayEmpty");const{x:l}=s;wl(l)&&(s.x=kl(l,e));let c=r["font-size"]||r.fontSize;wl(c)&&(c=kl(c,e));var u=s.fontSize=c,f=JSON.stringify([t,s]);if(a===void 0||a!==f){u&&n.setAttribute("font-size",u);var d=s.textPath;if(Jn(d)){var h=d.selector;if(typeof h=="string"){var g=this.findBySelector(h)[0];g instanceof SVGPathElement&&(s.textPath=Nt({"xlink:href":"#"+g.id},d))}}Ue(n).text(""+t,s),i.data(o,f)}}},textWrap:{qualify:Li,set:function(t,e,n,r){var i={},o=t.width||0;Eo(o)?i.width=e.width*parseFloat(o)/100:wl(o)?i.width=Number(kl(o,e)):t.width===null?i.width=1/0:o<=0?i.width=e.width+o:i.width=o;var a=t.height||0;Eo(a)?i.height=e.height*parseFloat(a)/100:wl(a)?i.height=Number(kl(a,e)):t.height===null||(a<=0?i.height=e.height+a:i.height=a);var s,l=t.text;if(l===void 0&&(l=r.text),l!==void 0){const c=t.breakText||xse,u=r["font-size"]||r.fontSize;s=c(""+l,i,{"font-weight":r["font-weight"]||r.fontWeight,"font-size":wl(u)?kl(u,e):u,"font-family":r["font-family"]||r.fontFamily,lineHeight:r.lineHeight,"letter-spacing":"letter-spacing"in r?r["letter-spacing"]:r.letterSpacing},{svgDocument:this.paper.svg,ellipsis:t.ellipsis,hyphen:t.hyphen,maxLineCount:t.maxLineCount,preserveSpaces:t.preserveSpaces})}else s="";un.text.set.call(this,s,e,n,r)}},title:{qualify:function(t,e){return e instanceof SVGElement},set:function(t,e,n){var r=zn(n),i="joint-title",o=r.data(i);if(o===void 0||o!==t){if(r.data(i,t),n.tagName==="title"){n.textContent=t;return}var a=n.firstElementChild;if(a&&a.tagName==="title")a.textContent=t;else{var s=document.createElementNS(n.namespaceURI,"title");s.textContent=t,n.insertBefore(s,a)}}}},lineHeight:{qualify:Rm},textVerticalAnchor:{qualify:Rm},textPath:{qualify:Rm},annotations:{qualify:Rm},eol:{qualify:Rm},displayEmpty:{qualify:Rm},port:{set:function(t){return t===null||t.id===void 0?t:t.id}},style:{qualify:Li,set:function(t,e,n){zn(n).css(t)}},html:{set:function(t,e,n){zn(n).html(t+"")}},props:$Re,ref:{},refX:{position:xk("x","width","origin")},refY:{position:xk("y","height","origin")},refDx:{position:xk("x","width","corner")},refDy:{position:xk("y","height","corner")},refWidth:{set:sd("width","width")},refHeight:{set:sd("height","height")},refRx:{set:sd("rx","width")},refRy:{set:sd("ry","height")},refRInscribed:{set:function(t){var e=sd(t,"width"),n=sd(t,"height");return function(r,i){var o=i.height>i.width?e:n;return o(r,i)}}("r")},refRCircumscribed:{set:function(t,e){var n=Eo(t);t=parseFloat(t),n&&(t/=100);var r=Math.sqrt(e.height*e.height+e.width*e.width),i;return isFinite(t)&&(n||t>=0&&t<=1?i=t*r:i=Math.max(t+r,0)),{r:i}}},refCx:{set:sd("cx","width")},refCy:{set:sd("cy","height")},xAlignment:{offset:FU("x","width","right")},yAlignment:{offset:FU("y","height","bottom")},resetOffset:{offset:function(t,e){return t?{x:-e.x,y:-e.y}:{x:0,y:0}}},refDResetOffset:{set:LU({resetOffset:!0})},refDKeepOffset:{set:LU({resetOffset:!1})},refPointsResetOffset:{set:DU({resetOffset:!0})},refPointsKeepOffset:{set:DU({resetOffset:!1})},connection:{qualify:lb,set:function({stubs:t=0}){let e;if(isFinite(t)&&t!==0){let n;t<0?n=(this.getConnectionLength()+t)/2:n=t;const r=this.getConnection(),i=this.getConnectionSubdivisions(),o=r.divideAtLength(n,{segmentSubdivisions:i}),a=r.divideAtLength(-n,{segmentSubdivisions:i});o&&a&&(e=`${o[0].serialize()} ${a[1].serialize()}`)}return{d:e||this.getSerializedConnection()}}},atConnectionLengthKeepGradient:{qualify:lb,set:Ck("getTangentAtLength",{rotate:!0})},atConnectionLengthIgnoreGradient:{qualify:lb,set:Ck("getTangentAtLength",{rotate:!1})},atConnectionRatioKeepGradient:{qualify:lb,set:Ck("getTangentAtRatio",{rotate:!0})},atConnectionRatioIgnoreGradient:{qualify:lb,set:Ck("getTangentAtRatio",{rotate:!1})}};un["xlink:href"]=un.xlinkHref;["transform","d","points","cx","cy","x1","x2","y1","y2","x","y","dx","dy"].forEach(t=>{un[t]={qualify:wl,set:function(n,r){return{[t]:kl(n,r)}}}});["width","height","r","rx","ry","font-size","stroke-width"].forEach(t=>{un[t]={qualify:wl,set:function(n,r){return{[t]:Math.max(0,kl(n,r))}}}});un.refR=un.refRInscribed;un.refD=un.refDResetOffset;un.refPoints=un.refPointsResetOffset;un.atConnectionLength=un.atConnectionLengthKeepGradient;un.atConnectionRatio=un.atConnectionRatioKeepGradient;un.fontSize=un["font-size"];un.strokeWidth=un["stroke-width"];un.refX2=un.refX;un.refY2=un.refY;un.refWidth2=un.refWidth;un.refHeight2=un.refHeight;un["ref-x"]=un.refX;un["ref-y"]=un.refY;un["ref-dy"]=un.refDy;un["ref-dx"]=un.refDx;un["ref-width"]=un.refWidth;un["ref-height"]=un.refHeight;un["x-alignment"]=un.xAlignment;un["y-alignment"]=un.yAlignment;const Pse=un,pu=Go.Model.extend({constructor:function(t,e){var n,r=t||{};typeof this.preinitialize=="function"&&this.preinitialize.apply(this,arguments),this.cid=vRe("c"),this.attributes={},e&&e.collection&&(this.collection=e.collection),e&&e.parse&&(r=this.parse(r,e)||{}),(n=Di(this,"defaults"))&&(r=Ri({},n,r)),this.set(r,e),this.changed={},this.initialize.apply(this,arguments)},translate:function(t,e,n){throw new Error("Must define a translate() method.")},toJSON:function(){const e=Di(this.constructor.prototype,"defaults").attrs||{},n=this.attributes.attrs,r={};yl(n,function(o,a){const s=e[a];yl(o,function(l,c){Jn(l)&&!Array.isArray(l)?yl(l,function(u,f){(!s||!s[c]||!vv(s[c][f],u))&&(r[a]=r[a]||{},(r[a][c]||(r[a][c]={}))[f]=u)}):(!s||!vv(s[c],l))&&(r[a]=r[a]||{},r[a][c]=l)})});const i=vl($g(this.attributes,"attrs"));return i.attrs=r,i},initialize:function(t){const e=this.getIdAttribute();(!t||t[e]===void 0)&&this.set(e,this.generateId(),{silent:!0}),this._transitionIds={},this._scheduledTransitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},getIdAttribute:function(){return this.idAttribute||"id"},generateId:function(){return bRe()},processPorts:function(){var t=this.ports,e={};yl(this.get("attrs"),function(o,a){o&&o.port&&(o.port.id!==void 0?e[o.port.id]=o.port:e[o.port]={id:o.port})});var n={};if(yl(t,function(o,a){e[a]||(n[a]=!0)}),this.graph&&!Pd(n)){var r=this.graph.getConnectedLinks(this,{inbound:!0});r.forEach(function(o){n[o.get("target").port]&&o.remove()});var i=this.graph.getConnectedLinks(this,{outbound:!0});i.forEach(function(o){n[o.get("source").port]&&o.remove()})}this.ports=e},remove:function(t={}){const{graph:e,collection:n}=this;if(!e)return n&&n.remove(this,t),this;e.startBatch("remove");const r=this.getParentCell();r&&r.unembed(this,t);const i=this.getEmbeddedCells();for(let o=0,a=i.length;o<a;o++){const s=i[o];s&&s.remove(t)}return this.trigger("remove",this,e.attributes.cells,t),e.stopBatch("remove"),this},toFront:function(t){var e=this.graph;if(e){t=t||{};let n;t.deep?(n=this.getEmbeddedCells({deep:!0,breadthFirst:t.breadthFirst!==!1}),n.unshift(this)):n=[this];const r=EU(n,l=>l.z());let o=e.maxZIndex()-n.length+1;const a=e.get("cells");let s=a.indexOf(this)!==a.length-n.length;s||(s=r.some(function(l,c){return l.z()!==o+c})),s&&(this.startBatch("to-front"),o=o+n.length,r.forEach(function(l,c){l.set("z",o+c,t)}),this.stopBatch("to-front"))}return this},toBack:function(t){var e=this.graph;if(e){t=t||{};let r;t.deep?(r=this.getEmbeddedCells({deep:!0,breadthFirst:t.breadthFirst!==!1}),r.unshift(this)):r=[this];const i=EU(r,s=>s.z());let o=e.minZIndex();var n=e.get("cells");let a=n.indexOf(this)!==0;a||(a=i.some(function(s,l){return s.z()!==o+l})),a&&(this.startBatch("to-back"),o-=r.length,i.forEach(function(s,l){s.set("z",o+l,t)}),this.stopBatch("to-back"))}return this},parent:function(t,e){return t===void 0?this.get("parent"):this.set("parent",t,e)},embed:function(t,e){const n=Array.isArray(t)?t:[t];if(!this.canEmbed(n))throw new Error("Recursive embedding not allowed.");if(n.some(r=>r.isEmbedded()&&this.id!==r.parent()))throw new Error("Embedding of already embedded cells is not allowed.");return this._embedCells(n,e),this},unembed:function(t,e){const n=Array.isArray(t)?t:[t];return this._unembedCells(n,e),this},canEmbed:function(t){return(Array.isArray(t)?t:[t]).every(n=>this!==n&&!this.isEmbeddedIn(n))},_embedCells:function(t,e){const n="embed";this.startBatch(n);const r=Nt([],this.get("embeds"));t.forEach(i=>{r[i.isLink()?"unshift":"push"](i.id),i.parent(this.id,e)}),this.set("embeds",IS(r),e),this.stopBatch(n)},_unembedCells:function(t,e){const n="unembed";this.startBatch(n),t.forEach(r=>r.unset("parent",e)),this.set("embeds",OU(this.get("embeds"),...t.map(r=>r.id)),e),this.stopBatch(n)},getParentCell:function(){var t=this.parent(),e=this.graph;return t&&e&&e.getCell(t)||null},getAncestors:function(){var t=[];if(!this.graph)return t;for(var e=this.getParentCell();e;)t.push(e),e=e.getParentCell();return t},getEmbeddedCells:function(t){if(t=t||{},this.graph){var e;if(t.deep)if(t.breadthFirst){e=[];for(var n=this.getEmbeddedCells();n.length>0;){var r=n.shift();e.push(r),n.push.apply(n,r.getEmbeddedCells())}}else e=this.getEmbeddedCells(),e.forEach(function(i){e.push.apply(e,i.getEmbeddedCells(t))});else e=Ln(this.get("embeds")).map(this.graph.getCell,this.graph);return e}return[]},isEmbeddedIn:function(t,e){var n=Ko(t)?t:t.id,r=this.parent();if(e=Nt({deep:!0},e),this.graph&&e.deep){for(;r;){if(r===n)return!0;r=this.graph.getCell(r).parent()}return!1}else return r===n},isEmbedded:function(){return!!this.parent()},clone:function(t){if(t=t||{},t.deep)return Ln(Tse([this].concat(this.getEmbeddedCells({deep:!0}))));var e=Go.Model.prototype.clone.apply(this,arguments);return e.set(this.getIdAttribute(),this.generateId()),e.unset("embeds"),e.unset("parent"),e},prop:function(t,e,n){var r="/",i=Ko(t);if(i||Array.isArray(t))if(arguments.length>1){var o,a;i?(o=t,a=o.split("/")):(o=t.join(r),a=t.slice());var s=a[0],l=a.length;const _=n||{};_.propertyPath=o,_.propertyValue=e,_.propertyPathArray=a,"rewrite"in _||(_.rewrite=!1);for(var c={},u=c,f=s,d=1;d<l;d++){var h=a[d],g=Number.isFinite(i?Number(h):h);u=u[f]=g?[]:{},f=h}c=vO(c,a,e,"/");var y=Ri({},this.attributes);_.rewrite&&IU(y,o,"/");var S=Ri(y,c);return this.set(s,S[s],_)}else return k2(this.attributes,t,r);const v=e||{};return v.propertyPath=null,v.propertyValue=t,v.propertyPathArray=[],"rewrite"in v||(v.rewrite=!1),this.set(Ri({},this.attributes,t),v)},removeProp:function(t,e){e=e||{};var n=Array.isArray(t)?t:t.split("/"),r=n[0];if(r==="attrs"&&(e.dirty=!0),n.length===1)return this.unset(t,e);var i=n.slice(1),o=this.get(r);return o==null?this:(o=vl(o),IU(o,i,"/"),this.set(r,o,e))},attr:function(t,e,n){var r=Array.from(arguments);return r.length===0?this.get("attrs"):(Array.isArray(t)?r[0]=["attrs"].concat(t):Ko(t)?r[0]="attrs/"+t:r[0]={attrs:t},this.prop.apply(this,r))},removeAttr:function(t,e){return Array.isArray(t)?this.removeProp(["attrs"].concat(t)):this.removeProp("attrs/"+t,e)},transition:function(t,e,n,r){r=r||"/";var i={duration:100,delay:10,timingFunction:ARe.linear,valueFunction:Cse.number};n=Nt(i,n);var o=0,a,s=(function(f){var d,h,g;o=o||f,f-=o,h=f/n.duration,h<1?this._transitionIds[t]=d=yO(s):(h=1,delete this._transitionIds[t]),g=a(n.timingFunction(h)),n.transitionId=d,this.prop(t,g,n),d||this.trigger("transition:end",this,t)}).bind(this);const{_scheduledTransitionIds:l}=this;let c;var u=f=>{l[t]&&(l[t]=OU(l[t],c),l[t].length===0&&delete l[t]),this.stopPendingTransitions(t,r),a=n.valueFunction(k2(this.attributes,t,r),e),this._transitionIds[t]=yO(f),this.trigger("transition:start",this,t)};return c=setTimeout(u,n.delay,s),l[t]||(l[t]=[]),l[t].push(c),c},getTransitions:function(){return mO(Object.keys(this._transitionIds),Object.keys(this._scheduledTransitionIds))},stopScheduledTransitions:function(t,e="/"){const{_scheduledTransitionIds:n={}}=this;let r=Object.keys(n);if(t){const i=t.split(e);r=r.filter(o=>vv(i,o.split(e).slice(0,i.length)))}return r.forEach(i=>{n[i].forEach(a=>clearTimeout(a)),delete n[i]}),this},stopPendingTransitions(t,e="/"){const{_transitionIds:n={}}=this;let r=Object.keys(n);if(t){const i=t.split(e);r=r.filter(o=>vv(i,o.split(e).slice(0,i.length)))}r.forEach(i=>{const o=n[i];bO(o),delete n[i],this.trigger("transition:end",this,i)})},stopTransitions:function(t,e="/"){return this.stopScheduledTransitions(t,e),this.stopPendingTransitions(t,e),this},addTo:function(t,e){return t.addCell(this,e),this},findView:function(t){return t.findViewByModel(this)},isElement:function(){return!1},isLink:function(){return!1},startBatch:function(t,e){return this.graph&&this.graph.startBatch(t,Nt({},e,{cell:this})),this},stopBatch:function(t,e){return this.graph&&this.graph.stopBatch(t,Nt({},e,{cell:this})),this},getChangeFlag:function(t){var e=0;if(!t)return e;for(var n in t)!t.hasOwnProperty(n)||!this.hasChanged(n)||(e|=t[n]);return e},angle:function(){return 0},position:function(){return new we(0,0)},z:function(){return this.get("z")||0},getPointFromConnectedLink:function(){return new we},getBBox:function(){return new lt(0,0,0,0)},getPointRotatedAroundCenter(t,e,n){const r=new we(e,n);return t&&r.rotate(this.getBBox().center(),t),r},getAbsolutePointFromRelative(t,e){return this.getPointRotatedAroundCenter(-this.angle(),this.position().offset(t,e))},getRelativePointFromAbsolute(t,e){return this.getPointRotatedAroundCenter(this.angle(),t,e).difference(this.position())}},{getAttributeDefinition:function(t){var e=this.attributes,n=Pse;return e&&e[t]||n[t]},define:function(t,e,n,r){n=Nt({defaults:BL({type:t},e,this.prototype.defaults)},n);var i=this.extend(n,r);return typeof joint<"u"&&cf(joint,"shapes")&&vO(joint.shapes,t,i,"."),i}}),FRe=function(t,e,n){if(Ko(n)){if(!SO[n])throw new Error('Unknown wrapper: "'+n+'"');n=SO[n]}if(!br(n))throw new Error("Wrapper must be a function.");Ln(e).forEach(function(r){t[r]=n(t[r])})},SO={cells:function(t){return function(){var e=Array.from(arguments),n=e.length,r=n>0&&e[0]||[],i=n>1&&e[n-1]||{};return Array.isArray(r)||(i instanceof pu?r=e:r instanceof pu&&(e.length>1&&e.pop(),r=e)),i instanceof pu&&(i={}),t.call(this,r,i)}}},Si={TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left",TOP_LEFT:"top-left",TOP_RIGHT:"top-right",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",CENTER:"center"};function Ese(t,e){const n=new lt(t);switch(e){case void 0:throw new Error("Position required");case Si.LEFT:case"leftMiddle":return n.leftMiddle();case Si.RIGHT:case"rightMiddle":return n.rightMiddle();case Si.TOP:case"topMiddle":return n.topMiddle();case Si.BOTTOM:case"bottomMiddle":return n.bottomMiddle();case Si.TOP_LEFT:case"topLeft":case"origin":return n.topLeft();case Si.TOP_RIGHT:case"topRight":return n.topRight();case Si.BOTTOM_LEFT:case"bottomLeft":return n.bottomLeft();case Si.BOTTOM_RIGHT:case"bottomRight":case"corner":return n.bottomRight();case Si.CENTER:return n.center();default:throw new Error(`Unknown position: ${e}`)}}function Ose(t,e,n){var r=t.toJSON();return r.angle=e||0,nc({},n,r)}function $S(t,e,n,r){return t.map(function(i,o,a){var s=this.pointAt((o+.5)/a.length);return(i.dx||i.dy)&&s.offset(i.dx||0,i.dy||0),Ose(s.round(),0,jL(r,i))},ug(e,n))}function Ise(t,e,n,r){var i=e.center(),o=e.width/e.height,a=e.topMiddle(),s=Ca.fromRect(e);return t.map(function(l,c,u){var f=n+r(c,u.length),d=a.clone().rotate(i,-f).scale(o,1,i),h=l.compensateRotation?-s.tangentTheta(d):0;return(l.dx||l.dy)&&d.offset(l.dx||0,l.dy||0),l.dr&&d.move(i,l.dr),Ose(d.round(),h,jL(e,l))})}function jL(t,e){let{x:n,y:r,angle:i}=e;return Eo(n)?n=parseFloat(n)/100*t.width:wl(n)&&(n=Number(kl(n,t))),Eo(r)?r=parseFloat(r)/100*t.height:wl(r)&&(r=Number(kl(r,t))),{x:n,y:r,angle:i}}function _O(t,e){const{x:n,y:r}=jL(t,e);return new we(n||0,r||0)}const LRe=function(t,e){return t.map(n=>{const r=_O(e,n).round().toJSON();return r.angle=n.angle||0,r})},DRe=function(t,e,n){return n.fn(t,e,n)},NRe=function(t,e,n){var r=_O(e,n.start||e.origin()),i=_O(e,n.end||e.corner());return $S(t,r,i,e)},MRe=function(t,e,n){return $S(t,e.origin(),e.bottomLeft(),e)},RRe=function(t,e,n){return $S(t,e.topRight(),e.corner(),e)},zRe=function(t,e,n){return $S(t,e.origin(),e.topRight(),e)},VRe=function(t,e,n){return $S(t,e.bottomLeft(),e.corner(),e)},BRe=function(t,e,n){var r=n.startAngle||0,i=n.step||360/t.length;return Ise(t,e,r,function(o){return o*i})},jRe=function(t,e,n){var r=n.startAngle||0,i=n.step||20;return Ise(t,e,r,function(o,a){return(o+.5-a/2)*i})},HRe=Object.freeze(Object.defineProperty({__proto__:null,absolute:LRe,bottom:VRe,ellipse:jRe,ellipseSpread:BRe,fn:DRe,left:MRe,line:NRe,right:RRe,top:zRe},Symbol.toStringTag,{value:"Module"}));function _h(t,e){return BL({},t,e,{x:0,y:0,angle:0,attrs:{}})}function $se(t,e,n,r){r=nc({},r,{offset:15});var i=e.center().theta(t),o=Fse(e),a,s,l,c,u=r.offset,f=0;i<o[1]||i>o[2]?(l=".3em",a=u,s=0,c="start"):i<o[0]?(a=0,s=-u,n?(f=-90,c="start",l=".3em"):(c="middle",l="0")):i<o[3]?(l=".3em",a=-u,s=0,c="end"):(a=0,s=u,n?(f=90,c="start",l=".3em"):(c="middle",l=".6em"));var d=Math.round;return _h({x:d(a),y:d(s),angle:f,attrs:{labelText:{y:l,textAnchor:c}}})}function Fse(t){var e=t.center(),n=e.theta(t.origin()),r=e.theta(t.bottomLeft()),i=e.theta(t.corner()),o=e.theta(t.topRight());return[n,o,i,r]}function Lse(t,e,n,r){var i=e.center().theta(t);r=nc({},r,{offset:15});var o,a,s,l,c=r.offset,u=0,f=Fse(e);i<f[1]||i>f[2]?(s=".3em",o=-c,a=0,l="end"):i<f[0]?(o=0,a=c,n?(u=90,l="start",s=".3em"):(l="middle",s=".6em")):i<f[3]?(s=".3em",o=c,a=0,l="start"):(o=0,a=-c,n?(u=-90,l="start",s=".3em"):(l="middle",s="0"));var d=Math.round;return _h({x:d(o),y:d(a),angle:u,attrs:{labelText:{y:s,textAnchor:l}}})}function Dse(t,e,n){n=nc({},n,{offset:20});var r=pC(0,0),i=-t.theta(r),o=i,a=t.clone().move(r,n.offset).difference(t).round(),s=".3em",l;(i+90)%180===0?(l=e?"end":"middle",!e&&i===-270&&(s="0em")):i>-270&&i<-90?(l="start",o=i-180):l="end";var c=Math.round;return _h({x:c(a.x),y:c(a.y),angle:e?o:0,attrs:{labelText:{y:s,textAnchor:l}}})}const URe=function(t,e,n){return _h(n)},WRe=function(t,e,n){return _h(n,{x:-15,attrs:{labelText:{y:".3em",textAnchor:"end"}}})},GRe=function(t,e,n){return _h(n,{x:15,attrs:{labelText:{y:".3em",textAnchor:"start"}}})},qRe=function(t,e,n){return _h(n,{y:-15,attrs:{labelText:{y:"0",textAnchor:"middle"}}})},YRe=function(t,e,n){return _h(n,{y:15,attrs:{labelText:{y:".6em",textAnchor:"middle"}}})},KRe=function(t,e,n){return $se(t,e,!0,n)},XRe=function(t,e,n){return $se(t,e,!1,n)},JRe=function(t,e,n){return Lse(t,e,!0,n)},ZRe=function(t,e,n){return Lse(t,e,!1,n)},QRe=function(t,e,n){return Dse(t.difference(e.center()),!1,n)},eze=function(t,e,n){return Dse(t.difference(e.center()),!0,n)},tze=Object.freeze(Object.defineProperty({__proto__:null,bottom:YRe,inside:ZRe,insideOriented:JRe,left:WRe,manual:URe,outside:XRe,outsideOriented:KRe,radial:QRe,radialOriented:eze,right:GRe,top:qRe},Symbol.toStringTag,{value:"Module"})),Qg=pu.extend({markup:['<path class="connection" stroke="black" d="M 0 0 0 0"/>','<path class="marker-source" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="marker-target" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="connection-wrap" d="M 0 0 0 0"/>','<g class="labels"/>','<g class="marker-vertices"/>','<g class="marker-arrowheads"/>','<g class="link-tools"/>'].join(""),toolMarkup:['<g class="link-tool">','<g class="tool-remove" event="remove">','<circle r="11" />','<path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />',"<title>Remove link.</title>","</g>",'<g class="tool-options" event="link:options">','<circle r="11" transform="translate(25)"/>','<path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>',"<title>Link options.</title>","</g>","</g>"].join(""),doubleToolMarkup:void 0,vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>"].join(""),arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<path class="marker-arrowhead" end="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />',"</g>"].join(""),defaultLabel:void 0,labelMarkup:void 0,_builtins:{defaultLabel:{markup:[{tagName:"rect",selector:"rect"},{tagName:"text",selector:"text"}],attrs:{text:{fill:"#000000",fontSize:14,textAnchor:"middle",yAlignment:"middle",pointerEvents:"none"},rect:{ref:"text",fill:"#ffffff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}}},defaults:{type:"link",source:{},target:{}},isLink:function(){return!0},disconnect:function(t){return this.set({source:{x:0,y:0},target:{x:0,y:0}},t)},source:function(t,e,n){if(t===void 0)return Uc(this.get("source"));var r,i,o=t instanceof pu;if(o)return r=Uc(e)||{},r.id=t.id,i=n,this.set("source",r,i);var a=!Li(t);return a?(r=Uc(e)||{},r.x=t.x,r.y=t.y,i=n,this.set("source",r,i)):(r=t,i=e,this.set("source",r,i))},target:function(t,e,n){if(t===void 0)return Uc(this.get("target"));var r,i,o=t instanceof pu;if(o)return r=Uc(e)||{},r.id=t.id,i=n,this.set("target",r,i);var a=!Li(t);return a?(r=Uc(e)||{},r.x=t.x,r.y=t.y,i=n,this.set("target",r,i)):(r=t,i=e,this.set("target",r,i))},router:function(t,e,n){if(t===void 0){var r=this.get("router");return r?typeof r=="object"?Uc(r):r:this.get("manhattan")?{name:"orthogonal"}:null}var i=typeof t=="object"||typeof t=="function",o=i?t:{name:t,args:e},a=i?e:n;return this.set("router",o,a)},connector:function(t,e,n){if(t===void 0){var r=this.get("connector");return r?typeof r=="object"?Uc(r):r:this.get("smooth")?{name:"smooth"}:null}var i=typeof t=="object"||typeof t=="function",o=i?t:{name:t,args:e},a=i?e:n;return this.set("connector",o,a)},label:function(t,e,n){var r=this.labels();return t=isFinite(t)&&t!==null?t|0:0,t<0&&(t=r.length+t),arguments.length<=1?this.prop(["labels",t]):this.prop(["labels",t],e,n)},labels:function(t,e){return arguments.length===0?(t=this.get("labels"),Array.isArray(t)?t.slice():[]):(Array.isArray(t)||(t=[]),this.set("labels",t,e))},hasLabels:function(){const{labels:t}=this.attributes;return Array.isArray(t)&&t.length>0},insertLabel:function(t,e,n){if(!e)throw new Error("dia.Link: no label provided");var r=this.labels(),i=r.length;return t=isFinite(t)&&t!==null?t|0:i,t<0&&(t=i+t+1),r.splice(t,0,e),this.labels(r,n)},appendLabel:function(t,e){return this.insertLabel(-1,t,e)},removeLabel:function(t,e){var n=this.labels();return t=isFinite(t)&&t!==null?t|0:-1,n.splice(t,1),this.labels(n,e)},vertex:function(t,e,n){var r=this.vertices();if(t=isFinite(t)&&t!==null?t|0:0,t<0&&(t=r.length+t),arguments.length<=1)return this.prop(["vertices",t]);var i=this._normalizeVertex(e);return this.prop(["vertices",t],i,n)},vertices:function(t,e){if(arguments.length===0)return t=this.get("vertices"),Array.isArray(t)?t.slice():[];Array.isArray(t)||(t=[]);for(var n=[],r=0;r<t.length;r++){var i=t[r],o=this._normalizeVertex(i);n.push(o)}return this.set("vertices",n,e)},insertVertex:function(t,e,n){if(!e)throw new Error("dia.Link: no vertex provided");var r=this.vertices(),i=r.length;t=isFinite(t)&&t!==null?t|0:i,t<0&&(t=i+t+1);var o=this._normalizeVertex(e);return r.splice(t,0,o),this.vertices(r,n)},removeVertex:function(t,e){var n=this.vertices();return t=isFinite(t)&&t!==null?t|0:-1,n.splice(t,1),this.vertices(n,e)},_normalizeVertex:function(t){var e=!Li(t);return e?{x:t.x,y:t.y}:t},translate:function(t,e,n){return n=n||{},n.translateBy=n.translateBy||this.id,n.tx=t,n.ty=e,this.applyToPoints(function(r){return{x:(r.x||0)+t,y:(r.y||0)+e}},n)},scale:function(t,e,n,r){return this.applyToPoints(function(i){return we(i).scale(t,e,n).toJSON()},r)},applyToPoints:function(t,e){if(!br(t))throw new TypeError("dia.Link: applyToPoints expects its first parameter to be a function.");var n={},{source:r,target:i}=this.attributes;r.id||(n.source=t(r)),i.id||(n.target=t(i));var o=this.vertices();return o.length>0&&(n.vertices=o.map(t)),this.set(n,e)},getSourcePoint:function(){var t=this.getSourceCell();return t?t.getPointFromConnectedLink(this,"source"):new we(this.source())},getTargetPoint:function(){var t=this.getTargetCell();return t?t.getPointFromConnectedLink(this,"target"):new we(this.target())},getPointFromConnectedLink:function(){return this.getPolyline().pointAt(.5)},getPolyline:function(){const t=[this.getSourcePoint(),...this.vertices().map(we),this.getTargetPoint()];return new $r(t)},getBBox:function(){return this.getPolyline().bbox()},reparent:function(t){var e;if(this.graph){var n=this.getSourceElement(),r=this.getTargetElement(),i=this.getParentCell();n&&r&&(n===r||n.isEmbeddedIn(r)?e=r:r.isEmbeddedIn(n)?e=n:e=this.graph.getCommonAncestor(n,r)),i&&(!e||e.id!==i.id)&&i.unembed(this,t),e&&e.embed(this,t)}return e},hasLoop:function(t){t=t||{};var{source:e,target:n}=this.attributes,r=e.id,i=n.id;if(!r||!i)return!1;var o=r===i;if(!o&&t.deep&&this.graph){var a=this.getSourceCell(),s=this.getTargetCell();o=a.isEmbeddedIn(s)||s.isEmbeddedIn(a)}return o},getSourceCell:function(){const{graph:t,attributes:e}=this;var n=e.source;return n&&n.id&&t&&t.getCell(n.id)||null},getSourceElement:function(){var t=this,e={};do{if(e[t.id])return null;e[t.id]=!0,t=t.getSourceCell()}while(t&&t.isLink());return t},getTargetCell:function(){const{graph:t,attributes:e}=this;var n=e.target;return n&&n.id&&t&&t.getCell(n.id)||null},getTargetElement:function(){var t=this,e={};do{if(e[t.id])return null;e[t.id]=!0,t=t.getTargetCell()}while(t&&t.isLink());return t},getRelationshipAncestor:function(){var t;if(this.graph){var e=[this,this.getSourceElement(),this.getTargetElement()].filter(function(n){return!!n});t=this.graph.getCommonAncestor.apply(this.graph,e)}return t||null},isRelationshipEmbeddedIn:function(t){var e=Ko(t)||Ka(t)?t:t.id,n=this.getRelationshipAncestor();return!!n&&(n.id===e||n.isEmbeddedIn(e))},_getDefaultLabel:function(){var t=this.get("defaultLabel")||this.defaultLabel||{},e={};return e.markup=t.markup||this.get("labelMarkup")||this.labelMarkup,e.position=t.position,e.attrs=t.attrs,e.size=t.size,e}},{endsEqual:function(t,e){var n=t.port===e.port||!t.port&&!e.port;return t.id===e.id&&n}});var Nse=function(t){var e=vl(t)||{};this.ports=[],this.groups={},this.portLayoutNamespace=HRe,this.portLabelLayoutNamespace=tze,this._init(e)};Nse.prototype={getPorts:function(){return this.ports},getGroup:function(t){return this.groups[t]||{}},getPortsByGroup:function(t){return this.ports.filter(function(e){return e.group===t})},getGroupPortsMetrics:function(t,e){var n=this.getGroup(t),r=this.getPortsByGroup(t),i=n.position||{},o=i.name,a=this.portLayoutNamespace;a[o]||(o="left");var s=i.args||{},l=r.map(function(f){return f&&f.position&&f.position.args}),c=a[o](l,e,s),u={ports:r,result:[]};return Ln(c).reduce((function(f,d,h){var g=f.ports[h];return f.result.push({portId:g.id,portTransformation:d,labelTransformation:this._getPortLabelLayout(g,we(d),e),portAttrs:g.attrs,portSize:g.size,labelSize:g.label.size}),f}).bind(this),u),u.result},_getPortLabelLayout:function(t,e,n){var r=this.portLabelLayoutNamespace,i=t.label.position.name||"left";return r[i]?r[i](e,n,t.label.position.args):null},_init:function(t){if(Jn(t.groups))for(var e=Object.keys(t.groups),n=0,r=e.length;n<r;n++){var i=e[n];this.groups[i]=this._evaluateGroup(t.groups[i])}for(var o=Ln(t.items),a=0,s=o.length;a<s;a++)this.ports.push(this._evaluatePort(o[a]))},_evaluateGroup:function(t){return Ri(t,{position:this._getPosition(t.position,!0),label:this._getLabel(t,!0)})},_evaluatePort:function(t){var e=Nt({},t),n=this.getGroup(t.group);return e.markup=e.markup||n.markup,e.attrs=Ri({},n.attrs,e.attrs),e.position=this._createPositionNode(n,e),e.label=Ri({},n.label,this._getLabel(e)),e.z=this._getZIndex(n,e),e.size=Nt({},n.size,e.size),e},_getZIndex:function(t,e){return Ka(e.z)?e.z:Ka(t.z)||t.z==="auto"?t.z:"auto"},_createPositionNode:function(t,e){return Ri({name:"left",args:{}},t.position,{args:e.args})},_getPosition:function(t,e){var n={},r;br(t)?(r="fn",n.fn=t):Ko(t)?r=t:t===void 0?r=e?"left":null:Array.isArray(t)?(r="absolute",n.x=t[0],n.y=t[1]):Jn(t)&&(r=t.name,Nt(n,t.args));var i={args:n};return r&&(i.name=r),i},_getLabel:function(t,e){var n=t.label||{},r=n;return r.position=this._getPosition(n.position,e),r}};const nze={_initializePorts:function(){this._createPortData(),this.on("change:ports",function(){this._processRemovedPort(),this._createPortData()},this)},_processRemovedPort:function(){var t=this.get("ports")||{},e={};Ln(t.items).forEach(function(s){e[s.id]=!0});var n=this.previous("ports")||{},r={};Ln(n.items).forEach(function(s){e[s.id]||(r[s.id]=!0)});var i=this.graph;if(i&&!Pd(r)){var o=i.getConnectedLinks(this,{inbound:!0});o.forEach(function(s){r[s.get("target").port]&&s.remove()});var a=i.getConnectedLinks(this,{outbound:!0});a.forEach(function(s){r[s.get("source").port]&&s.remove()})}},hasPorts:function(){var t=this.prop("ports/items");return Array.isArray(t)&&t.length>0},hasPort:function(t){return this.getPortIndex(t)!==-1},getPorts:function(){return vl(this.prop("ports/items"))||[]},getGroupPorts:function(t){const e=Ln(this.prop(["ports","items"])).filter(n=>n.group===t);return vl(e)},getPort:function(t){return vl(Ln(this.prop("ports/items")).find(function(e){return e.id&&e.id===t}))},getPortsPositions:function(t){var e=this._portSettingsData.getGroupPortsMetrics(t,lt(this.size()));return e.reduce(function(n,r){var i=r.portTransformation;return n[r.portId]={x:i.x,y:i.y,angle:i.angle},n},{})},getPortIndex:function(t){var e=Jn(t)?t.id:t;return this._isValidPortId(e)?Ln(this.prop("ports/items")).findIndex(function(n){return n.id===e}):-1},addPort:function(t,e){if(!Jn(t)||Array.isArray(t))throw new Error("Element: addPort requires an object.");var n=Nt([],this.prop("ports/items"));return n.push(t),this.prop("ports/items",n,e),this},insertPort:function(t,e,n){const r=typeof t=="number"?t:this.getPortIndex(t);if(!Jn(e)||Array.isArray(e))throw new Error("dia.Element: insertPort requires an object.");const i=Nt([],this.prop("ports/items"));return i.splice(r,0,e),this.prop("ports/items",i,n),this},portProp:function(t,e,n,r){var i=this.getPortIndex(t);if(i===-1)throw new Error("Element: unable to find port with id "+t);var o=Array.prototype.slice.call(arguments,1);return Array.isArray(e)?o[0]=["ports","items",i].concat(e):Ko(e)?o[0]=["ports/items/",i,"/",e].join(""):(o=["ports/items/"+i],Li(e)&&(o.push(e),o.push(n))),this.prop.apply(this,o)},_validatePorts:function(){var t=this.get("ports")||{},e=[];t=t||{};var n=Ln(t.items);return n.forEach(function(r){typeof r!="object"&&e.push("Element: invalid port ",r),this._isValidPortId(r.id)||(r.id=this.generatePortId())},this),IS(n,"id").length!==n.length&&e.push("Element: found id duplicities in ports."),e},generatePortId:function(){return this.generateId()},_isValidPortId:function(t){return t!=null&&!Jn(t)},addPorts:function(t,e){return t.length&&this.prop("ports/items",Nt([],this.prop("ports/items")).concat(t),e),this},removePort:function(t,e){const n=e||{},r=this.getPortIndex(t);if(r!==-1){const i=Nt([],this.prop(["ports","items"]));i.splice(r,1),n.rewrite=!0,this.startBatch("port-remove"),this.prop(["ports","items"],i,n),this.stopBatch("port-remove")}return this},removePorts:function(t,e){let n,r;if(Array.isArray(t)){if(n=e||{},t.length===0)return this.this;r=Nt([],this.prop(["ports","items"])).filter(function(o){return!t.some(function(a){const s=Jn(a)?a.id:a;return o.id===s})})}else n=t||{},r=[];return this.startBatch("port-remove"),n.rewrite=!0,this.prop(["ports","items"],r,n),this.stopBatch("port-remove"),this},_createPortData:function(){var t=this._validatePorts();if(t.length>0)throw this.set("ports",this.previous("ports")),new Error(t.join(" "));var e;this._portSettingsData&&(e=this._portSettingsData.getPorts()),this._portSettingsData=new Nse(this.get("ports"));var n=this._portSettingsData.getPorts();if(e){var r=n.filter(function(o){if(!e.find(function(a){return a.id===o.id}))return o}),i=e.filter(function(o){if(!n.find(function(a){return a.id===o.id}))return o});i.length>0&&this.trigger("ports:remove",this,i),r.length>0&&this.trigger("ports:add",this,r)}}},rze={portContainerMarkup:"g",portMarkup:[{tagName:"circle",selector:"circle",attributes:{r:10,fill:"#FFFFFF",stroke:"#000000"}}],portLabelMarkup:[{tagName:"text",selector:"text",attributes:{fill:"#000000"}}],_portElementsCache:null,_initializePorts:function(){this._cleanPortsCache()},_refreshPorts:function(){this._removePorts(),this._cleanPortsCache(),this._renderPorts()},_cleanPortsCache:function(){this._portElementsCache={}},_renderPorts:function(){for(var t=[],e=this._getContainerElement(),n=0,r=e.node.childNodes.length;n<r;n++)t.push(e.node.childNodes[n]);var i=dRe(this.model._portSettingsData.getPorts(),"z"),o="auto";Ln(i[o]).forEach(function(u){var f=this._getPortElement(u);e.append(f),t.push(f)},this);for(var a=Object.keys(i),s=0;s<a.length;s++){var l=a[s];if(l!==o){var c=parseInt(l,10);this._appendPorts(i[l],c,t)}}this._updatePorts()},_getContainerElement:function(){return this.rotatableNode||this.vel},_appendPorts:function(t,e,n){var r=this._getContainerElement(),i=Ln(t).map(this._getPortElement,this);n[e]||e<0?Ue(n[Math.max(e,0)]).before(i):r.append(i)},_getPortElement:function(t){return this._portElementsCache[t.id]?this._portElementsCache[t.id].portElement:this._createPortElement(t)},findPortNode:function(t,e){const n=this._portElementsCache[t];if(!n)return null;if(!e)return n.portContentElement.node;const r=n.portElement.node,i=n.portSelectors,[o=null]=this.findBySelector(e,r,i);return o},_updatePorts:function(){this._updatePortGroup(void 0);var t=Object.keys(this.model._portSettingsData.groups);t.forEach(this._updatePortGroup,this)},_removePorts:function(){uc(this._portElementsCache,"portElement.remove")},_createPortElement:function(t){let e,n,r,i;var o=Ue(this.portContainerMarkup).addClass("joint-port"),a=this._getPortMarkup(t);if(Array.isArray(a)){var s=this.parseDOMJSON(a,o.node),l=s.fragment;l.childNodes.length>1?e=Ue("g").append(l):e=Ue(l.firstChild),i=s.selectors}else e=Ue(a),Array.isArray(e)&&(e=Ue("g").append(e));if(!e)throw new Error("ElementView: Invalid port markup.");e.attr({port:t.id,"port-group":t.group});const c=this._getPortLabelMarkup(t.label);if(Array.isArray(c)){const{fragment:y,selectors:S}=this.parseDOMJSON(c,o.node),v=y.childNodes.length;v>0&&(r=S,n=v===1?Ue(y.firstChild):Ue("g").append(y))}else n=Ue(c),Array.isArray(n)&&(n=Ue("g").append(n));var u;if(i&&r){for(var f in r)if(i[f]&&f!==this.selector)throw new Error("ElementView: selectors within port must be unique.");u=Nt({},i,r)}else u=i||r||{};const d="portRoot",h="labelRoot",g="labelText";if(d in u||(u[d]=e.node),n){const y=n.node;if(h in u||(u[h]=y),!(g in u)){const S=n.tagName()==="TEXT"?y:Array.from(y.querySelectorAll("text"));u[g]=S,r||(r={}),r[g]=S}}return o.append(e.addClass("joint-port-body")),n&&o.append(n.addClass("joint-port-label")),this._portElementsCache[t.id]={portElement:o,portLabelElement:n,portSelectors:u,portLabelSelectors:r,portContentElement:e,portContentSelectors:i},o},_updatePortGroup:function(t){for(var e=lt(this.model.size()),n=this.model._portSettingsData.getGroupPortsMetrics(t,e),r=0,i=n.length;r<i;r++){var o=n[r],a=o.portId,s=this._portElementsCache[a]||{},l=o.portTransformation,c=o.labelTransformation;c&&s.portLabelElement&&(this.updateDOMSubtreeAttributes(s.portLabelElement.node,c.attrs,{rootBBox:new lt(o.labelSize),selectors:s.portLabelSelectors}),this.applyPortTransform(s.portLabelElement,c,-l.angle||0)),this.updateDOMSubtreeAttributes(s.portElement.node,o.portAttrs,{rootBBox:new lt(o.portSize),selectors:s.portSelectors}),this.applyPortTransform(s.portElement,l)}},applyPortTransform:function(t,e,n){var r=Ue.createSVGMatrix().rotate(n||0).translate(e.x||0,e.y||0).rotate(e.angle||0);t.transform(r,{absolute:!0})},_getPortMarkup:function(t){return t.markup||this.model.get("portMarkup")||this.model.portMarkup||this.portMarkup},_getPortLabelMarkup:function(t){return t.markup||this.model.get("portLabelMarkup")||this.model.portLabelMarkup||this.portLabelMarkup}},aa=pu.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},initialize:function(){this._initializePorts(),pu.prototype.initialize.apply(this,arguments)},_initializePorts:function(){},_refreshPorts:function(){},isElement:function(){return!0},position:function(t,e,n){const r=Ka(e);n=(r?n:t)||{};const{parentRelative:i,deep:o,restrictedArea:a}=n;let s;if(i){if(!this.graph)throw new Error("Element must be part of a graph.");const l=this.getParentCell();l&&!l.isLink()&&(s=l.get("position"))}if(r){if(s&&(t+=s.x,e+=s.y),o||a){const{x:l,y:c}=this.get("position");this.translate(t-l,e-c,n)}else this.set("position",{x:t,y:e},n);return this}else{const l=we(this.get("position"));return i?l.difference(s):l}},translate:function(t,e,n){if(t=t||0,e=e||0,t===0&&e===0)return this;n=n||{},n.translateBy=n.translateBy||this.id;var r=this.get("position")||{x:0,y:0},i=n.restrictedArea;if(i&&n.translateBy===this.id)if(typeof i=="function"){var o=i.call(this,r.x+t,r.y+e,n);t=o.x-r.x,e=o.y-r.y}else{var a=this.getBBox({deep:!0}),s=r.x-a.x,l=r.y-a.y,c=Math.max(i.x+s,Math.min(i.x+i.width+s-a.width,r.x+t)),u=Math.max(i.y+l,Math.min(i.y+i.height+l-a.height,r.y+e));t=c-r.x,e=u-r.y}var f={x:r.x+t,y:r.y+e};return n.tx=t,n.ty=e,n.transition?(Jn(n.transition)||(n.transition={}),this.transition("position",f,Nt({},n.transition,{valueFunction:Cse.object})),uc(this.getEmbeddedCells(),"translate",t,e,n)):(this.startBatch("translate",n),this.set("position",f,n),uc(this.getEmbeddedCells(),"translate",t,e,n),this.stopBatch("translate",n)),this},size:function(t,e,n){var r=this.get("size");return t===void 0?{width:r.width,height:r.height}:(Jn(t)&&(n=e,e=Ka(t.height)?t.height:r.height,t=Ka(t.width)?t.width:r.width),this.resize(t,e,n))},resize:function(t,e,n){if(n=n||{},this.startBatch("resize",n),n.direction){var r=this.get("size");switch(n.direction){case"left":case"right":e=r.height;break;case"top":case"bottom":t=r.width;break}var i=bu(this.get("angle")||0),o=this.getBBox(),a;if(i){var s={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[n.direction];n.absolute&&(s+=Math.floor((i+45)/90),s%=4);var l=o[["bottomLeft","corner","topRight","origin"][s]](),c=we(l).rotate(o.center(),-i),u=Math.sqrt(t*t+e*e)/2,f=s*Math.PI/2;f+=Math.atan(s%2==0?e/t:t/e),f-=ls(i);var d=we.fromPolar(u,f,c);a=we(d).offset(t/-2,e/-2)}else switch(a=o.topLeft(),n.direction){case"top":case"top-right":a.offset(0,o.height-e);break;case"left":case"bottom-left":a.offset(o.width-t,0);break;case"top-left":a.offset(o.width-t,o.height-e);break}this.set("size",{width:t,height:e},n),this.position(a.x,a.y,n)}else this.set("size",{width:t,height:e},n);return this.stopBatch("resize",n),this},scale:function(t,e,n,r){var i=this.getBBox().scale(t,e,n);return this.startBatch("scale",r),this.position(i.x,i.y,r),this.resize(i.width,i.height,r),this.stopBatch("scale"),this},fitEmbeds:function(t){return this.fitToChildren(t)},fitToChildren:function(t={}){const{graph:e}=this;if(!e)throw new Error("Element must be part of a graph.");const n=this.getEmbeddedCells().filter(r=>r.isElement());return n.length===0?this:(this.startBatch("fit-embeds",t),t.deep&&uc(n,"fitToChildren",t),this._fitToElements(Object.assign({elements:n},t)),this.stopBatch("fit-embeds"),this)},fitParent:function(t={}){const{graph:e}=this;if(!e)throw new Error("Element must be part of a graph.");if(t.deep&&t.terminator&&(t.terminator===this||t.terminator===this.id))return this;const n=this.getParentCell();if(!n||!n.isElement())return this;const r=n.getEmbeddedCells().filter(i=>i.isElement());return r.length===0?this:(this.startBatch("fit-parent",t),n._fitToElements(Object.assign({elements:r},t)),t.deep&&n.fitParent(t),this.stopBatch("fit-parent"),this)},_fitToElements:function(t={}){const e=this.graph.getCellsBBox(t.elements);if(!e)return;const{expandOnly:n,shrinkOnly:r}=t;if(n&&r)return;let{x:i,y:o,width:a,height:s}=e;const{left:l,right:c,top:u,bottom:f}=Fg(t.padding);i-=l,o-=u,a+=l+c,s+=f+u;let d=new lt(i,o,a,s);if(n)d=this.getBBox().union(d);else if(r){const h=this.getBBox().intersect(d);if(!h)return;d=h}this.set({position:{x:d.x,y:d.y},size:{width:d.width,height:d.height}},t)},rotate:function(t,e,n,r){if(n){var i=this.getBBox().center(),o=this.get("size"),a=this.get("position");i.rotate(n,this.get("angle")-t);var s=i.x-o.width/2-a.x,l=i.y-o.height/2-a.y;this.startBatch("rotate",{angle:t,absolute:e,origin:n}),this.position(a.x+s,a.y+l,r),this.rotate(t,e,null,r),this.stopBatch("rotate")}else this.set("angle",e?t:(this.get("angle")+t)%360,r);return this},angle:function(){return bu(this.get("angle")||0)},getBBox:function(t={}){const{graph:e,attributes:n}=this,{deep:r,rotate:i}=t;if(r&&e){const f=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return f.push(this),e.getCellsBBox(f,t)}const{angle:o=0,position:{x:a,y:s},size:{width:l,height:c}}=n,u=new lt(a,s,l,c);return i&&u.rotateAroundCenter(o),u},getPointFromConnectedLink:function(t,e){var n=this.getBBox(),r=n.center(),i=t.get(e);if(!i)return r;var o=i.port;if(!o||!this.hasPort(o))return r;var a=this.portProp(o,["group"]),s=this.getPortsPositions(a),l=new we(s[o]).offset(n.origin()),c=this.angle();return c&&l.rotate(r,-c),l}});Nt(aa.prototype,nze);const ize=Go.Collection.extend({initialize:function(t,e){e.cellNamespace?this.cellNamespace=e.cellNamespace:this.cellNamespace=typeof joint<"u"&&cf(joint,"shapes")?joint.shapes:null,this.graph=e.graph},model:function(t,e){var n=e.collection,r=n.cellNamespace,i=t.type==="link"?Qg:k2(r,t.type,".")||aa,o=new i(t,e);return e.dry||(o.graph=n.graph),o},comparator:function(t){return t.get("z")||0}}),uf=Go.Model.extend({initialize:function(t,e){e=e||{};var n=new ize([],{model:e.cellModel,cellNamespace:e.cellNamespace,graph:this});Go.Model.prototype.set.call(this,"cells",n),n.on("all",this.trigger,this),this.on("change:z",this._sortOnChangeZ,this),this._out={},this._in={},this._nodes={},this._edges={},this._batches={},n.on("add",this._restructureOnAdd,this),n.on("remove",this._restructureOnRemove,this),n.on("reset",this._restructureOnReset,this),n.on("change:source",this._restructureOnChangeSource,this),n.on("change:target",this._restructureOnChangeTarget,this),n.on("remove",this._removeCell,this)},_sortOnChangeZ:function(){this.get("cells").sort()},_restructureOnAdd:function(t){if(t.isLink()){this._edges[t.id]=!0;var{source:e,target:n}=t.attributes;e.id&&((this._out[e.id]||(this._out[e.id]={}))[t.id]=!0),n.id&&((this._in[n.id]||(this._in[n.id]={}))[t.id]=!0)}else this._nodes[t.id]=!0},_restructureOnRemove:function(t){if(t.isLink()){delete this._edges[t.id];var{source:e,target:n}=t.attributes;e.id&&this._out[e.id]&&this._out[e.id][t.id]&&delete this._out[e.id][t.id],n.id&&this._in[n.id]&&this._in[n.id][t.id]&&delete this._in[n.id][t.id]}else delete this._nodes[t.id]},_restructureOnReset:function(t){t=t.models,this._out={},this._in={},this._nodes={},this._edges={},t.forEach(this._restructureOnAdd,this)},_restructureOnChangeSource:function(t){var e=t.previous("source");e.id&&this._out[e.id]&&delete this._out[e.id][t.id];var n=t.attributes.source;n.id&&((this._out[n.id]||(this._out[n.id]={}))[t.id]=!0)},_restructureOnChangeTarget:function(t){var e=t.previous("target");e.id&&this._in[e.id]&&delete this._in[e.id][t.id];var n=t.get("target");n.id&&((this._in[n.id]||(this._in[n.id]={}))[t.id]=!0)},getOutboundEdges:function(t){return this._out&&this._out[t]||{}},getInboundEdges:function(t){return this._in&&this._in[t]||{}},toJSON:function(){var t=Go.Model.prototype.toJSON.apply(this,arguments);return t.cells=this.get("cells").toJSON(),t},fromJSON:function(t,e){if(!t.cells)throw new Error("Graph JSON must contain cells array.");return this.set(t,e)},set:function(t,e,n){var r;return typeof t=="object"?(r=t,n=e):(r={})[t]=e,r.hasOwnProperty("cells")&&(this.resetCells(r.cells,n),r=$g(r,"cells")),Go.Model.prototype.set.call(this,r,n)},clear:function(t){t=Nt({},t,{clear:!0});var e=this.get("cells");if(e.length===0)return this;this.startBatch("clear",t);var n=e.sortBy(function(r){return r.isLink()?1:2});do n.shift().remove(t);while(n.length>0);return this.stopBatch("clear"),this},_prepareCell:function(t,e){var n;if(t instanceof Go.Model?(n=t.attributes,!t.graph&&(!e||!e.dry)&&(t.graph=this)):n=t,!Ko(n.type))throw new TypeError("dia.Graph: cell type must be a string.");return t},minZIndex:function(){var t=this.get("cells").first();return t&&t.get("z")||0},maxZIndex:function(){var t=this.get("cells").last();return t&&t.get("z")||0},addCell:function(t,e){return Array.isArray(t)?this.addCells(t,e):(t instanceof Go.Model?t.has("z")||t.set("z",this.maxZIndex()+1):t.z===void 0&&(t.z=this.maxZIndex()+1),this.get("cells").add(this._prepareCell(t,e),e||{}),this)},addCells:function(t,e){return t.length===0?this:(t=hRe(t),e.maxPosition=e.position=t.length-1,this.startBatch("add",e),t.forEach(function(n){this.addCell(n,e),e.position--},this),this.stopBatch("add",e),this)},resetCells:function(t,e){var n=Ln(t).map(function(r){return this._prepareCell(r,e)},this);return this.get("cells").reset(n,e),this},removeCells:function(t,e){return t.length&&(this.startBatch("remove"),uc(t,"remove",e),this.stopBatch("remove")),this},_removeCell:function(t,e,n){n=n||{},n.clear||(n.disconnectLinks?this.disconnectLinks(t,n):this.removeLinks(t,n)),this.get("cells").remove(t,{silent:!0}),t.graph===this&&(t.graph=null)},getCell:function(t){return this.get("cells").get(t)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return this.get("cells").filter(t=>t.isElement())},getLinks:function(){return this.get("cells").filter(t=>t.isLink())},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(t,e){e=e||{};var n=e.indirect,r=e.inbound,i=e.outbound;r===void 0&&i===void 0&&(r=i=!0);var o=[],a={};i&&s(this,t),r&&l(this,t);function s(f,d){if(yl(f.getOutboundEdges(d.id),(function(g,y){if(!a[y]){var S=f.getCell(y);o.push(S),a[y]=!0,n&&(r&&l(f,S),i&&s(f,S))}}).bind(f)),n&&d.isLink()){var h=d.getTargetCell();h&&h.isLink()&&(a[h.id]||(o.push(h),s(f,h)))}}function l(f,d){if(yl(f.getInboundEdges(d.id),(function(g,y){if(!a[y]){var S=f.getCell(y);o.push(S),a[y]=!0,n&&(r&&l(f,S),i&&s(f,S))}}).bind(f)),n&&d.isLink()){var h=d.getSourceCell();h&&h.isLink()&&(a[h.id]||(o.push(h),l(f,h)))}}if(e.deep){var c=t.getEmbeddedCells({deep:!0}),u={};c.forEach(function(f){f.isElement()&&(u[f.id]=!0)}),c.forEach(function(f){f.isLink()||(i&&yl(this.getOutboundEdges(f.id),(function(d,h){if(!a[h]){var g=this.getCell(h),{source:y,target:S}=g.attributes,v=y.id,_=S.id;if(!e.includeEnclosed&&v&&u[v]&&_&&u[_])return;o.push(this.getCell(h)),a[h]=!0}}).bind(this)),r&&yl(this.getInboundEdges(f.id),(function(d,h){if(!a[h]){var g=this.getCell(h),{source:y,target:S}=g.attributes,v=y.id,_=S.id;if(!e.includeEnclosed&&v&&u[v]&&_&&u[_])return;o.push(this.getCell(h)),a[h]=!0}}).bind(this)))},this)}return o},getNeighbors:function(t,e){e||(e={});var n=e.inbound,r=e.outbound;n===void 0&&r===void 0&&(n=r=!0);var i=this.getConnectedLinks(t,e).reduce((function(s,l){var{source:c,target:u}=l.attributes,f=l.hasLoop(e);if(n&&cf(c,"id")&&!s[c.id]){var d=this.getCell(c.id);d.isElement()&&(f||d&&d!==t&&(!e.deep||!d.isEmbeddedIn(t)))&&(s[c.id]=d)}if(r&&cf(u,"id")&&!s[u.id]){var h=this.getCell(u.id);h.isElement()&&(f||h&&h!==t&&(!e.deep||!h.isEmbeddedIn(t)))&&(s[u.id]=h)}return s}).bind(this),{});if(t.isLink()){if(n){var o=t.getSourceCell();o&&o.isElement()&&!i[o.id]&&(i[o.id]=o)}if(r){var a=t.getTargetCell();a&&a.isElement()&&!i[a.id]&&(i[a.id]=a)}}return Ln(i)},getCommonAncestor:function(){var t=Array.from(arguments).map(function(n){for(var r=[],i=n.get("parent");i;)r.push(i),i=this.getCell(i).get("parent");return r},this);t=t.sort(function(n,r){return n.length-r.length});var e=Ln(t.shift()).find(function(n){return t.every(function(r){return r.includes(n)})});return this.getCell(e)},getSuccessors:function(t,e){e=e||{};var n=[];return this.search(t,function(r){r!==t&&n.push(r)},Nt({},e,{outbound:!0})),n},cloneCells:Tse,cloneSubgraph:function(t,e){var n=this.getSubgraph(t,e);return this.cloneCells(n)},getSubgraph:function(t,e){e=e||{};var n=[],r={},i=[],o=[];return Ln(t).forEach(function(a){if(r[a.id]||(n.push(a),r[a.id]=a,a.isLink()?o.push(a):i.push(a)),e.deep){var s=a.getEmbeddedCells({deep:!0});s.forEach(function(l){r[l.id]||(n.push(l),r[l.id]=l,l.isLink()?o.push(l):i.push(l))})}}),o.forEach(function(a){var{source:s,target:l}=a.attributes;if(s.id&&!r[s.id]){var c=this.getCell(s.id);n.push(c),r[c.id]=c,i.push(c)}if(l.id&&!r[l.id]){var u=this.getCell(l.id);n.push(this.getCell(l.id)),r[u.id]=u,i.push(u)}},this),i.forEach(function(a){var s=this.getConnectedLinks(a,e);s.forEach(function(l){var{source:c,target:u}=l.attributes;!r[l.id]&&c.id&&r[c.id]&&u.id&&r[u.id]&&(n.push(l),r[l.id]=l)})},this),n},getPredecessors:function(t,e){e=e||{};var n=[];return this.search(t,function(r){r!==t&&n.push(r)},Nt({},e,{inbound:!0})),n},search:function(t,e,n){n=n||{},n.breadthFirst?this.bfs(t,e,n):this.dfs(t,e,n)},bfs:function(t,e,n={}){const r={},i={},o=[];for(o.push(t),i[t.id]=0;o.length>0;){var a=o.shift();if(r[a.id]||(r[a.id]=!0,e.call(this,a,i[a.id])===!1))continue;const s=this.getNeighbors(a,n);for(let l=0,c=s.length;l<c;l++){const u=s[l];i[u.id]=i[a.id]+1,o.push(u)}}},dfs:function(t,e,n={}){const r={},i={},o=[];for(o.push(t),i[t.id]=0;o.length>0;){const a=o.pop();if(r[a.id]||(r[a.id]=!0,e.call(this,a,i[a.id])===!1))continue;const s=this.getNeighbors(a,n),l=o.length;for(let c=0,u=s.length;c<u;c++){const f=s[c];i[f.id]=i[a.id]+1,o.splice(l,0,f)}}},getSources:function(){var t=[];return yl(this._nodes,(function(e,n){(!this._in[n]||Pd(this._in[n]))&&t.push(this.getCell(n))}).bind(this)),t},getSinks:function(){var t=[];return yl(this._nodes,(function(e,n){(!this._out[n]||Pd(this._out[n]))&&t.push(this.getCell(n))}).bind(this)),t},isSource:function(t){return!this._in[t.id]||Pd(this._in[t.id])},isSink:function(t){return!this._out[t.id]||Pd(this._out[t.id])},isSuccessor:function(t,e){var n=!1;return this.search(t,function(r){if(r===e&&r!==t)return n=!0,!1},{outbound:!0}),n},isPredecessor:function(t,e){var n=!1;return this.search(t,function(r){if(r===e&&r!==t)return n=!0,!1},{inbound:!0}),n},isNeighbor:function(t,e,n){n=n||{};var r=n.inbound,i=n.outbound;r===void 0&&i===void 0&&(r=i=!0);var o=!1;return this.getConnectedLinks(t,n).forEach(function(a){var{source:s,target:l}=a.attributes;if(r&&cf(s,"id")&&s.id===e.id||i&&cf(l,"id")&&l.id===e.id)return o=!0,!1}),o},disconnectLinks:function(t,e){this.getConnectedLinks(t).forEach(function(n){n.set(n.attributes.source.id===t.id?"source":"target",{x:0,y:0},e)})},removeLinks:function(t,e){uc(this.getConnectedLinks(t),"remove",e)},findModelsFromPoint:function(t){return this.getElements().filter(e=>e.getBBox({rotate:!0}).containsPoint(t))},findModelsInArea:function(t,e={}){const n=new lt(t),{strict:r=!1}=e,i=r?"containsRect":"intersect";return this.getElements().filter(o=>n[i](o.getBBox({rotate:!0})))},findModelsUnderElement:function(t,e={}){const{searchBy:n="bbox"}=e,r=t.getBBox().rotateAroundCenter(t.angle());return(n==="bbox"?this.findModelsInArea(r):this.findModelsFromPoint(Ese(r,n))).filter(o=>t.id!==o.id&&!o.isEmbeddedIn(t))},getBBox:function(){return this.getCellsBBox(this.getCells())},getCellsBBox:function(t,e={}){const{rotate:n=!0}=e;return Ln(t).reduce(function(r,i){const o=i.getBBox({rotate:n});return o?r?r.union(o):o:r},null)},translate:function(t,e,n){var r=this.getCells().filter(function(i){return!i.isEmbedded()});return uc(r,"translate",t,e,n),this},resize:function(t,e,n){return this.resizeCells(t,e,this.getCells(),n)},resizeCells:function(t,e,n,r){var i=this.getCellsBBox(n);if(i){var o=Math.max(t/i.width,0),a=Math.max(e/i.height,0);uc(n,"scale",o,a,i.origin(),r)}return this},startBatch:function(t,e){return e=e||{},this._batches[t]=(this._batches[t]||0)+1,this.trigger("batch:start",Nt({},e,{batchName:t}))},stopBatch:function(t,e){return e=e||{},this._batches[t]=(this._batches[t]||0)-1,this.trigger("batch:stop",Nt({},e,{batchName:t}))},hasActiveBatch:function(t){const e=this._batches;let n;return arguments.length===0?n=Object.keys(e):Array.isArray(t)?n=t:n=[t],n.some(r=>e[r]>0)}},{validations:{multiLinks:function(t,e){var{source:n,target:r}=e.attributes;if(n.id&&r.id){var i=e.getSourceCell();if(i){var o=t.getConnectedLinks(i,{outbound:!0}),a=o.filter(function(s){var{source:l,target:c}=s.attributes;return l&&l.id===n.id&&(!l.port||l.port===n.port)&&c&&c.id===r.id&&(!c.port||c.port===r.port)});if(a.length>1)return!1}}return!0},linkPinning:function(t,e){var{source:n,target:r}=e.attributes;return n.id&&r.id}}});FRe(uf.prototype,["resetCells","addCells","removeCells"],SO.cells);const Dp={},yf=Go.View.extend({options:{},theme:null,themeClassNamePrefix:ac("theme-"),requireSetThemeOverride:!1,defaultTheme:hu.defaultTheme,children:null,childNodes:null,DETACHABLE:!0,UPDATE_PRIORITY:2,FLAG_INSERT:1<<30,FLAG_REMOVE:1<<29,FLAG_INIT:1<<28,constructor:function(t){this.requireSetThemeOverride=t&&!!t.theme,this.options=Nt({},this.options,t),Go.View.call(this,t)},initialize:function(){Dp[this.cid]=this,this.setTheme(this.options.theme||this.defaultTheme),this.init()},unmount:function(){this.svgElement?this.vel.remove():this.$el.remove()},isMounted:function(){return this.el.parentNode!==null},renderChildren:function(t){if(t||(t=Di(this,"children")),t){var e=this.svgElement,n=Ue.namespace[e?"svg":"xhtml"],r=_C(t,n);(e?this.vel:this.$el).empty().append(r.fragment),this.childNodes=r.selectors}return this},findAttribute:function(t,e){for(var n=e;n&&n.nodeType===1;){var r=n.getAttribute(t);if(r)return r;if(n===this.el)return null;n=n.parentNode}return null},_ensureElement:function(){if(this.el)this.setElement(Di(this,"el"));else{var t=Di(this,"tagName"),e=Nt({},Di(this,"attributes")),n=Nt({},Di(this,"style"));this.id&&(e.id=Di(this,"id")),this.setElement(this._createElement(t)),this._setAttributes(e),this._setStyle(n)}this._ensureElClassName()},_setAttributes:function(t){this.svgElement?this.vel.attr(t):this.$el.attr(t)},_setStyle:function(t){this.$el.css(t)},_createElement:function(t){return this.svgElement?document.createElementNS(Ue.namespace.svg,t):document.createElement(t)},_setElement:function(t){this.$el=t instanceof Go.$?t:Go.$(t),this.el=this.$el[0],this.svgElement&&(this.vel=Ue(this.el))},_ensureElClassName:function(){var t=Di(this,"className");if(t){var e=ac(t);this.svgElement?this.vel.removeClass(t).addClass(e):this.$el.removeClass(t).addClass(e)}},init:function(){},onRender:function(){},confirmUpdate:function(){return 0},setTheme:function(t,e){return e=e||{},this.theme&&this.requireSetThemeOverride&&!e.override?this:(this.removeThemeClassName(),this.addThemeClassName(t),this.onSetTheme(this.theme,t),this.theme=t,this)},addThemeClassName:function(t){if(t=t||this.theme,!t)return this;var e=this.themeClassNamePrefix+t;return this.svgElement?this.vel.addClass(e):this.$el.addClass(e),this},removeThemeClassName:function(t){t=t||this.theme;var e=this.themeClassNamePrefix+t;return this.svgElement?this.vel.removeClass(e):this.$el.removeClass(e),this},onSetTheme:function(t,e){},remove:function(){return this.onRemove(),this.undelegateDocumentEvents(),Dp[this.cid]=null,Go.View.prototype.remove.apply(this,arguments),this},onRemove:function(){},getEventNamespace:function(){return".joint-event-ns-"+this.cid},delegateElementEvents:function(t,e,n){if(!e)return this;n||(n={});var r=this.getEventNamespace();for(var i in e){var o=e[i];typeof o!="function"&&(o=this[o]),o&&zn(t).on(i+r,n,o.bind(this))}return this},undelegateElementEvents:function(t){return zn(t).off(this.getEventNamespace()),this},delegateDocumentEvents:function(t,e){return t||(t=Di(this,"documentEvents")),this.delegateElementEvents(document,t,e)},undelegateDocumentEvents:function(){return this.undelegateElementEvents(document)},eventData:function(t,e){if(!t)throw new Error("eventData(): event object required.");var n=t.data,r="__"+this.cid+"__";return e===void 0?n?n[r]||{}:{}:(n||(n=t.data={}),n[r]||(n[r]={}),Nt(n[r],e),this)},stopPropagation:function(t){return this.eventData(t,{propagationStopped:!0}),this},isPropagationStopped:function(t){return!!this.eventData(t).propagationStopped}},{extend:function(){var t=Array.from(arguments),e=t[0]&&Nt({},t[0])||{},n=t[1]&&Nt({},t[1])||{},r=e.render||this.prototype&&this.prototype.render||null;return e.render=function(){return typeof r=="function"&&r.apply(this,arguments),this.render.__render__===r&&this.onRender(),this},e.render.__render__=r,Go.View.extend.call(this,e,n)}}),RU="dbltap";if(zn.event&&!(RU in zn.event.special)){const t=hu.doubleTapInterval,e=30;zn.event.special[RU]={bindType:"touchend",delegateType:"touchend",handle:function(n,...r){const{handleObj:i,target:o}=n,a=zn.data(o),s=new Date().getTime(),l="lastTouch"in a?s-a.lastTouch:0;l<t&&l>e?(a.lastTouch=null,n.type=i.origType,i.handler.call(this,n,...r)):a.lastTouch=s}}}const bl={CELLS:"cells",BACK:"back",FRONT:"front",TOOLS:"tools",LABELS:"labels"},oze=yf.extend({tagName:"g",svgElement:!0,pivotNodes:null,defaultTheme:null,options:{name:""},className:function(){return ac(`${this.options.name}-layer`)},init:function(){this.pivotNodes={}},insertSortedNode:function(t,e){this.el.insertBefore(t,this.insertPivot(e))},insertNode:function(t){const{el:e}=this;t.parentNode!==e&&e.appendChild(t)},insertPivot:function(t){const{el:e,pivotNodes:n}=this;t=+t,t||(t=0);let r=n[t];if(r)return r;r=n[t]=document.createComment("z-index:"+(t+1));let i=-1/0;for(let o in n)o=+o,o<t&&o>i&&(i=o,t-1);if(i!==-1/0){const o=n[i];e.insertBefore(r,o.nextSibling)}else e.insertBefore(r,e.firstChild);return r},removePivots:function(){const{el:t,pivotNodes:e}=this;for(let n in e)t.removeChild(e[n]);this.pivotNodes={}}});function cb(t){return t?Array.isArray(t)?t:[t]:[]}const sc=yf.extend({tagName:"g",svgElement:!0,className:"highlight",HIGHLIGHT_FLAG:1,UPDATE_PRIORITY:3,DETACHABLE:!1,UPDATABLE:!0,MOUNTABLE:!0,cellView:null,nodeSelector:null,node:null,updateRequested:!1,postponedUpdate:!1,transformGroup:null,detachedTransformGroup:null,requestUpdate(t,e){const{paper:n}=t;this.cellView=t,this.nodeSelector=e,n&&(this.updateRequested=!0,n.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY))},confirmUpdate(){this.updateRequested=!1;const{cellView:t,nodeSelector:e}=this;return t.isMounted()?(this.update(t,e),this.mount(),this.transform(),0):(this.postponedUpdate=!0,0)},findNode(t,e=null){let n;if(typeof e=="string")[n]=t.findBySelector(e);else if(Li(e)){const r=t.model.isLink(),{label:i=null,port:o,selector:a}=e;r&&i!==null?n=t.findLabelNode(i,a):!r&&o?n=t.findPortNode(o,a):[n]=t.findBySelector(a)}else e&&(n=Ue.toNode(e),n instanceof SVGElement||(n=null));return n||null},getNodeMatrix(t,e){const{options:n}=this,{layer:r}=n,{rotatableNode:i}=t,o=t.getNodeMatrix(e);return i?r?i.contains(e)?o:t.getRootRotateMatrix().inverse().multiply(o):t.getNodeRotateMatrix(e).multiply(o):o},mount(){const{MOUNTABLE:t,cellView:e,el:n,options:r,transformGroup:i,detachedTransformGroup:o,postponedUpdate:a,nodeSelector:s}=this;if(!t||i)return;if(a){this.update(e,s),this.transform();return}const{vel:l,paper:c}=e,{layer:u}=r;if(u){let f;o?(f=o,this.detachedTransformGroup=null):f=Ue("g").addClass("highlight-transform").append(n),this.transformGroup=f,c.getLayerView(u).insertSortedNode(f.node,r.z)}else(!n.parentNode||n.nextSibling)&&l.append(n)},unmount(){const{MOUNTABLE:t,transformGroup:e,vel:n}=this;t&&(e?(this.transformGroup=null,this.detachedTransformGroup=e,e.remove()):n.remove())},transform(){const{transformGroup:t,cellView:e,updateRequested:n}=this;if(!t||e.model.isLink()||n)return;const r=e.getRootTranslateMatrix(),i=e.getRootRotateMatrix(),o=r.multiply(i);t.attr("transform",Ue.matrixToTransformString(o))},update(){const{node:t,cellView:e,nodeSelector:n,updateRequested:r,id:i}=this;if(r)return;this.postponedUpdate=!1;const o=this.node=this.findNode(e,n);t&&this.unhighlight(e,t),o?(this.highlight(e,o),this.mount()):(this.unmount(),e.notify("cell:highlight:invalid",i,this))},onRemove(){const{node:t,cellView:e,id:n,constructor:r}=this;t&&this.unhighlight(e,t),this.unmount(),r._removeRef(e,n)},highlight(t,e){},unhighlight(t,e){},listenToUpdateAttributes(t){const e=Di(this,"UPDATE_ATTRIBUTES");!Array.isArray(e)||e.length===0||this.listenTo(t.model,"change",this.onCellAttributeChange)},onCellAttributeChange(){const{cellView:t}=this;if(!t)return;const{model:e,paper:n}=t;Di(this,"UPDATE_ATTRIBUTES").some(i=>e.hasChanged(i))&&n.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY)}},{_views:{},highlight:function(t,e,n){const r=this.uniqueId(e,n);this.add(t,e,r,n)},unhighlight:function(t,e,n){const r=this.uniqueId(e,n);this.remove(t,r)},get(t,e=null){const{cid:n}=t,{_views:r}=this,i=r[n];if(e===null){const o=[];if(!i)return o;for(let a in i){const s=i[a];s instanceof this&&o.push(s)}return o}else{if(!i)return null;if(e in i){const o=i[e];if(o instanceof this)return o}return null}},add(t,e,n,r={}){if(!n)throw new Error("dia.HighlighterView: An ID required.");const i=sc.get(t,n);i&&i.remove();const o=new this(r);return o.id=n,this._addRef(t,n,o),o.requestUpdate(t,e),o.listenToUpdateAttributes(t),o},_addRef(t,e,n){const{cid:r}=t,{_views:i}=this;let o=i[r];o||(o=i[r]={}),o[e]=n},_removeRef(t,e){const{cid:n}=t,{_views:r}=this,i=r[n];if(i){e&&delete i[e];for(let o in i)return;delete r[n]}},remove(t,e=null){cb(this.get(t,e)).forEach(n=>{n.remove()})},removeAll(t,e=null){const{_views:n}=this;for(let r in n)for(let i in n[r]){const o=n[r][i];o.cellView.paper===t&&o instanceof this&&(e===null||i===e)&&o.remove()}},update(t,e=null,n=!1){cb(this.get(t,e)).forEach(r=>{(n||r.UPDATABLE)&&r.update()})},transform(t,e=null){cb(this.get(t,e)).forEach(n=>{n.UPDATABLE&&n.transform()})},unmount(t,e=null){cb(this.get(t,e)).forEach(n=>n.unmount())},mount(t,e=null){cb(this.get(t,e)).forEach(n=>n.mount())},uniqueId(t,e=""){return Ue.ensureId(t)+JSON.stringify(e)}}),zm={DEFAULT:"default",EMBEDDING:"embedding",CONNECTING:"connecting",MAGNET_AVAILABILITY:"magnetAvailability",ELEMENT_AVAILABILITY:"elementAvailability"},aze={TOOLS:"TOOLS"},xn=yf.extend({tagName:"g",svgElement:!0,selector:"root",metrics:null,className:function(){var t=["cell"],e=this.model.get("type");return e&&e.toLowerCase().split(".").forEach(function(n,r,i){t.push("type-"+i.slice(0,r+1).join("-"))}),t.join(" ")},_presentationAttributes:null,_flags:null,setFlags:function(){var t={},e={},n=0,r,i,o,a=Di(this,"presentationAttributes");for(var s in a)if(a.hasOwnProperty(s)){var l=a[s];for(Array.isArray(l)||(l=[l]),r=0,i=l.length;r<i;r++){o=l[r];var c=t[o];c||(c=t[o]=1<<n++),e[s]|=c}}var u=Di(this,"initFlag");for(Array.isArray(u)||(u=[u]),r=0,i=u.length;r<i;r++)o=u[r],t[o]||(t[o]=1<<n++);if(n>25)throw new Error("dia.CellView: Maximum number of flags exceeded.");this._flags=t,this._presentationAttributes=e},hasFlag:function(t,e){return t&this.getFlag(e)},removeFlag:function(t,e){return t^t&this.getFlag(e)},getFlag:function(t){var e=this._flags;if(!e)return 0;var n=0;if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++)n|=e[t[r]];else n|=e[t];return n},attributes:function(){var t=this.model;return{"model-id":t.id,"data-type":t.attributes.type}},constructor:function(t){t.id=t.id||yv(this),yf.call(this,t)},initialize:function(){this.setFlags(),yf.prototype.initialize.apply(this,arguments),this.cleanNodesCache(),this.$el.data("view",this),this.startListening()},startListening:function(){this.listenTo(this.model,"change",this.onAttributesChange)},onAttributesChange:function(t,e){var n=t.getChangeFlag(this._presentationAttributes);e.updateHandled||!n||(e.dirty&&this.hasFlag(n,"UPDATE")&&(n|=this.getFlag("RENDER")),e.tool&&(e.async=!1),this.requestUpdate(n,e))},requestUpdate:function(t,e){const{paper:n}=this;n&&t>0&&n.requestViewUpdate(this,t,this.UPDATE_PRIORITY,e)},parseDOMJSON:function(t,e){var n=_C(t),r=n.selectors,i=n.groupSelectors;for(var o in i){if(r[o])throw new Error("dia.CellView: ambiguous group selector");r[o]=i[o]}if(e){var a=this.selector;if(r[a])throw new Error("dia.CellView: ambiguous root selector.");r[a]=e}return{fragment:n.fragment,selectors:r}},can:function(t){var e=br(this.options.interactive)?this.options.interactive(this):this.options.interactive;return Jn(e)&&e[t]!==!1||sRe(e)&&e!==!1},findBySelector:function(t,e,n){if(e||(e=this.el),n||(n=this.selectors),!t||t===".")return[e];if(n){var r=n[t];if(r)return Array.isArray(r)?r:[r]}return zn(e).find(t).toArray()},notify:function(t){if(this.paper){var e=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[t].concat(e)),this.paper.trigger.apply(this.paper,[t,this].concat(e))}},getBBox:function(t){var e;if(t&&t.useModelGeometry){var n=this.model;e=n.getBBox().bbox(n.angle())}else e=this.getNodeBBox(this.el);return this.paper.localToPaperRect(e)},getNodeBBox:function(t){const e=this.getNodeBoundingRect(t),n=this.getRootTranslateMatrix().multiply(this.getNodeRotateMatrix(t)),r=this.getNodeMatrix(t);return Ue.transformRect(e,n.multiply(r))},getNodeRotateMatrix(t){return!this.rotatableNode||this.rotatableNode.contains(t)?this.getRootRotateMatrix():Ue.createSVGMatrix()},getNodeUnrotatedBBox:function(t){var e=this.getNodeBoundingRect(t),n=this.getNodeMatrix(t),r=this.getRootTranslateMatrix();return Ue.transformRect(e,r.multiply(n))},getRootTranslateMatrix:function(){var t=this.model,e=t.position(),n=Ue.createSVGMatrix().translate(e.x,e.y);return n},getRootRotateMatrix:function(){var t=Ue.createSVGMatrix(),e=this.model,n=e.angle();if(n){var r=e.getBBox(),i=r.width/2,o=r.height/2;t=t.translate(i,o).rotate(n).translate(-i,-o)}return t},_notifyHighlight:function(t,e,n={}){const{el:r}=this;let i;if(typeof e=="string"?[i=r]=this.findBySelector(e):[i=r]=this.$(e),n.partial=i!==r,n.type===void 0){let o;switch(!0){case n.embedding:o=zm.EMBEDDING;break;case n.connecting:o=zm.CONNECTING;break;case n.magnetAvailability:o=zm.MAGNET_AVAILABILITY;break;case n.elementAvailability:o=zm.ELEMENT_AVAILABILITY;break;default:o=zm.DEFAULT;break}n.type=o}return this.notify(t,i,n),this},highlight:function(t,e){return this._notifyHighlight("cell:highlight",t,e)},unhighlight:function(t,e={}){return this._notifyHighlight("cell:unhighlight",t,e)},findMagnet:function(t){const e=this.el;let n=this.$(t)[0];n||(n=e);do{const r=n.getAttribute("magnet"),i=n===e;if((r||i)&&r!=="false")return n;if(i)return;n=n.parentNode}while(n)},findProxyNode:function(t,e){t||(t=this.el);const n=t.getAttribute(`${e}-selector`);if(n){const[r]=this.findBySelector(n);if(r)return r}return t},getSelector:function(t,e){var n;if(t===this.el)return typeof e=="string"&&(n="> "+e),n;if(t){var r=Ue(t).index()+1;n=t.tagName+":nth-child("+r+")",e&&(n+=" > "+e),n=this.getSelector(t.parentNode,n)}return n},addLinkFromMagnet:function(t,e,n){var r=this.paper,i=r.model,o=r.getDefaultLink(this,t);return o.set({source:this.getLinkEnd(t,e,n,o,"source"),target:{x:e,y:n}}).addTo(i,{async:!1,ui:!0}),o.findView(r)},getLinkEnd:function(t,...e){var n=this.model,r=n.id,i=this.findAttribute("port",t),o=t.getAttribute("joint-selector"),a={id:r};return o!=null&&(a.magnet=o),i!=null?(a.port=i,!n.hasPort(i)&&!o&&(a.selector=this.getSelector(t))):o==null&&this.el!==t&&(a.selector=this.getSelector(t)),this.customizeLinkEnd(a,t,...e)},customizeLinkEnd:function(t,e,n,r,i,o){const{paper:a}=this,{connectionStrategy:s}=a.options;if(typeof s=="function"){var l=s.call(a,t,this,e,new we(n,r),i,o,a);if(l)return l}return t},getMagnetFromLinkEnd:function(t){var e=this.el,n=t.port,r=t.magnet,i=this.model,o;return n!=null&&i.isElement()&&i.hasPort(n)?o=this.findPortNode(n,r)||e:(r||(r=t.selector),!r&&n!=null&&(r='[port="'+n+'"]'),o=this.findBySelector(r,e,this.selectors)[0]),this.findProxyNode(o,"magnet")},dragLinkStart:function(t,e,n,r){this.model.startBatch("add-link");const i=this.addLinkFromMagnet(e,n,r);i.notifyPointerdown(t,n,r),i.eventData(t,i.startArrowheadMove("target",{whenNotAllowed:"remove"})),this.eventData(t,{linkView:i})},dragLink:function(t,e,n){var r=this.eventData(t),i=r.linkView;if(i)i.pointermove(t,e,n);else{var o=this.paper,a=o.options.magnetThreshold,s=this.getEventTarget(t),l=r.targetMagnet;if(a==="onleave"){if(l===s||Ue(l).contains(s))return}else if(o.eventData(t).mousemoved<=a)return;this.dragLinkStart(t,l,e,n)}},dragLinkEnd:function(t,e,n){var r=this.eventData(t),i=r.linkView;i&&(i.pointerup(t,e,n),this.model.stopBatch("add-link"))},getAttributeDefinition:function(t){return this.model.constructor.getAttributeDefinition(t)},setNodeAttributes:function(t,e){Pd(e)||(t instanceof SVGElement?Ue(t).attr(e):zn(t).attr(e))},processNodeAttributes:function(t,e){var n,r,i,o,a,s,l,c,u,f=[];for(n in e)e.hasOwnProperty(n)&&(r=e[n],i=this.getAttributeDefinition(n),i&&(!br(i.qualify)||i.qualify.call(this,r,t,e,this))?(Ko(i.set)&&(s||(s={}),s[i.set]=r),r!==null&&f.push(n,i)):(s||(s={}),s[SRe(n)]=r));for(o=0,a=f.length;o<a;o+=2)n=f[o],i=f[o+1],r=e[n],br(i.set)&&(l||(l={}),l[n]=r),br(i.position)&&(c||(c={}),c[n]=r),br(i.offset)&&(u||(u={}),u[n]=r);return{raw:e,normal:s,set:l,position:c,offset:u}},updateRelativeAttributes:function(t,e,n,r){r||(r={});var i,o,a,s=e.raw||{},l=e.normal||{},c=e.set,u=e.position,f=e.offset;for(i in c){o=c[i],a=this.getAttributeDefinition(i);var d=a.set.call(this,o,n.clone(),t,s,this);Jn(d)?Nt(l,d):d!==void 0&&(l[i]=d)}if(t instanceof HTMLElement){this.setNodeAttributes(t,l);return}var h=l.transform,g=Ue.transformStringToMatrix(h),y=we(g.e,g.f);h&&(l=$g(l,"transform"),g.e=g.f=0);var S,v,_;if(u||f){var x=this.getNodeScale(t,r.scalableNode);S=x.sx,v=x.sy}var C=!1;for(i in u)o=u[i],a=this.getAttributeDefinition(i),_=a.position.call(this,o,n.clone(),t,s,this),_&&(y.offset(we(_).scale(S,v)),C||(C=!0));this.setNodeAttributes(t,l);var k=!1;if(f){var m=this.getNodeBoundingRect(t);if(m.width>0&&m.height>0){var T=Ue.transformRect(m,g).scale(1/S,1/v);for(i in f)o=f[i],a=this.getAttributeDefinition(i),_=a.offset.call(this,o,T,t,s,this),_&&(y.offset(we(_).scale(S,v)),k||(k=!0))}}(h!==void 0||C||k)&&(y.round(1),g.e=y.x,g.f=y.y,t.setAttribute("transform",Ue.matrixToTransformString(g)))},getNodeScale:function(t,e){var n,r;if(e&&e.contains(t)){var i=e.scale();n=1/i.sx,r=1/i.sy}else n=1,r=1;return{sx:n,sy:r}},cleanNodesCache:function(){this.metrics={}},nodeCache:function(t){var e=this.metrics;if(!e)return{};var n=Ue.ensureId(t),r=e[n];return r||(r=e[n]={}),r},getNodeData:function(t){var e=this.nodeCache(t);return e.data||(e.data={}),e.data},getNodeBoundingRect:function(t){var e=this.nodeCache(t);return e.boundingRect===void 0&&(e.boundingRect=Ue(t).getBBox()),new lt(e.boundingRect)},getNodeMatrix:function(t){const e=this.nodeCache(t);if(e.magnetMatrix===void 0){const{rotatableNode:n,el:r}=this;let i;n&&n.contains(t)?i=n:i=r,e.magnetMatrix=Ue(t).getTransformToElement(i)}return Ue.createSVGMatrix(e.magnetMatrix)},getNodeShape:function(t){var e=this.nodeCache(t);return e.geometryShape===void 0&&(e.geometryShape=Ue(t).toGeometryShape()),e.geometryShape.clone()},isNodeConnection:function(t){return this.model.isLink()&&(!t||t===this.el)},findNodesAttributes:function(t,e,n,r){var i,o,a,s,l={},c=[];for(var u in t)if(t.hasOwnProperty(u)&&(a=t[u],!!Li(a))){var f=n[u]=this.findBySelector(u,e,r);for(i=0,o=f.length;i<o;i++){var d=f[i];s=Ue.ensureId(d);var h=r&&r[u]===d,g=l[s];if(g){g.array||(c.push(s),g.array=!0,g.attributes=[g.attributes],g.selectedLength=[g.selectedLength]);var y=g.attributes,S=g.selectedLength;if(h)y.unshift(a),S.unshift(-1);else{var v=_se(S,o);y.splice(v,0,a),S.splice(v,0,o)}}else l[s]={attributes:a,selectedLength:h?-1:o,node:d,array:!1}}}for(i=0,o=c.length;i<o;i++)s=c[i],a=l[s],a.attributes=Ri({},...a.attributes.reverse());return l},getEventTarget:function(t,e={}){const{target:n,type:r,clientX:i=0,clientY:o=0}=t;return e.fromPoint||r==="touchmove"||r==="touchend"||"pointerId"in t&&n.hasPointerCapture(t.pointerId)?document.elementFromPoint(i,o):n},updateDOMSubtreeAttributes:function(t,e,n){n||(n={}),n.rootBBox||(n.rootBBox=lt()),n.selectors||(n.selectors=this.selectors);var r={},i={},o=[],a=[],s,l,c,u,f,d=n.roAttributes,h=this.findNodesAttributes(d||e,t,r,n.selectors),g=d?this.findNodesAttributes(e,t,r,n.selectors):h;for(var y in h)if(u=h[y],c=u.attributes,l=u.node,f=this.processNodeAttributes(l,c),!f.set&&!f.position&&!f.offset)this.setNodeAttributes(l,f.normal);else{var S=g[y]&&g[y].attributes,v=S&&c.ref===void 0?S.ref:c.ref,_;if(v){if(_=(r[v]||this.findBySelector(v,t,n.selectors))[0],!_)throw new Error('dia.CellView: "'+v+'" reference does not exist.')}else _=null;if(s={node:l,refNode:_,processedAttributes:f,allAttributes:S},_){var x=a.findIndex(function(C){return C.refNode===l});x>-1?a.splice(x,0,s):a.push(s)}else o.push(s)}o.push(...a);for(let C=0,k=o.length;C<k;C++){s=o[C],l=s.node,_=s.refNode;const m=_?Ue.ensureId(_):"";let T=i[m];T||(T=i[m]=_?Ue(_).getBBox({target:sze(l,_)}):n.rootBBox),d?(f=this.processNodeAttributes(l,s.allAttributes),this.mergeProcessedAttributes(f,s.processedAttributes)):f=s.processedAttributes,this.updateRelativeAttributes(l,f,T,n)}},mergeProcessedAttributes:function(t,e){t.set||(t.set={}),t.position||(t.position={}),t.offset||(t.offset={}),Nt(t.set,e.set),Nt(t.position,e.position),Nt(t.offset,e.offset);var n=t.normal&&t.normal.transform;n!==void 0&&e.normal&&(e.normal.transform=n),t.normal=e.normal},onMount(t){t||(this.mountTools(),sc.mount(this))},onDetach(){this.unmountTools(),sc.unmount(this)},onRemove:function(){this.removeTools(),this.removeHighlighters()},_toolsView:null,hasTools:function(t){var e=this._toolsView;return e?t?e.getName()===t:!0:!1},addTools:function(t){return this.removeTools(),t&&(this._toolsView=t,t.configure({relatedView:this}),t.listenTo(this.paper,"tools:event",this.onToolEvent.bind(this))),this},unmountTools(){const t=this._toolsView;return t&&t.unmount(),this},mountTools(){const t=this._toolsView;return t&&!t.isMounted()&&t.mount(),this},updateTools:function(t){var e=this._toolsView;return e&&e.update(t),this},removeTools:function(){var t=this._toolsView;return t&&(t.remove(),this._toolsView=null),this},hideTools:function(){var t=this._toolsView;return t&&t.hide(),this},showTools:function(){var t=this._toolsView;return t&&t.show(),this},onToolEvent:function(t){switch(t){case"remove":this.removeTools();break;case"hide":this.hideTools();break;case"show":this.showTools();break}},removeHighlighters:function(){sc.remove(this)},updateHighlighters:function(t=!1){sc.update(this,null,t)},transformHighlighters:function(){sc.transform(this)},preventDefaultInteraction(t){this.eventData(t,{defaultInteractionPrevented:!0})},isDefaultInteractionPrevented(t){const{defaultInteractionPrevented:e=!1}=this.eventData(t);return e},pointerdblclick:function(t,e,n){this.notify("cell:pointerdblclick",t,e,n)},pointerclick:function(t,e,n){this.notify("cell:pointerclick",t,e,n)},contextmenu:function(t,e,n){this.notify("cell:contextmenu",t,e,n)},pointerdown:function(t,e,n){const{model:r}=this,{graph:i}=r;i&&(r.startBatch("pointer"),this.eventData(t,{graph:i})),this.notify("cell:pointerdown",t,e,n)},pointermove:function(t,e,n){this.notify("cell:pointermove",t,e,n)},pointerup:function(t,e,n){const{graph:r}=this.eventData(t);this.notify("cell:pointerup",t,e,n),r&&r.stopBatch("pointer",{cell:this.model})},mouseover:function(t){this.notify("cell:mouseover",t)},mouseout:function(t){this.notify("cell:mouseout",t)},mouseenter:function(t){this.notify("cell:mouseenter",t)},mouseleave:function(t){this.notify("cell:mouseleave",t)},mousewheel:function(t,e,n,r){this.notify("cell:mousewheel",t,e,n,r)},onevent:function(t,e,n,r){this.notify(e,t,n,r)},onmagnet:function(){},magnetpointerdblclick:function(){},magnetcontextmenu:function(){},checkMouseleave(t){const{paper:e,model:n}=this;if(e.isAsync()){if(n.isLink()){const o=n.getSourceElement();if(o){const s=e.findViewByModel(o);s&&(e.dumpView(s),e.checkViewVisibility(s))}const a=n.getTargetElement();if(a){const s=e.findViewByModel(a);s&&(e.dumpView(s),e.checkViewVisibility(s))}}e.dumpView(this),e.checkViewVisibility(this)}const r=this.getEventTarget(t,{fromPoint:!0}),i=e.findView(r);i!==this&&(this.mouseleave(t),i&&i.mouseenter(t))},setInteractivity:function(t){this.options.interactive=t}},{Flags:aze,Highlighting:zm,addPresentationAttributes:function(t){return Ri({},Di(this.prototype,"presentationAttributes"),t,function(e,n){if(!(!e||!n)&&(typeof e=="string"&&(e=[e]),typeof n=="string"&&(n=[n]),Array.isArray(e)&&Array.isArray(n)))return IS(e.concat(n))})}});function sze(t,e){let n=t;do{if(n.contains(e))return n;n=n.parentNode}while(n);return null}const Rn={TOOLS:xn.Flags.TOOLS,UPDATE:"UPDATE",TRANSLATE:"TRANSLATE",RESIZE:"RESIZE",PORTS:"PORTS",ROTATE:"ROTATE",RENDER:"RENDER"},Vm={MOVE:"move",MAGNET:"magnet"},ao=xn.extend({_removePorts:function(){},_renderPorts:function(){},className:function(){var t=xn.prototype.className.apply(this).split(" ");return t.push("element"),t.join(" ")},initialize:function(){xn.prototype.initialize.apply(this,arguments),this._initializePorts()},presentationAttributes:{attrs:[Rn.UPDATE],position:[Rn.TRANSLATE,Rn.TOOLS],size:[Rn.RESIZE,Rn.PORTS,Rn.TOOLS],angle:[Rn.ROTATE,Rn.TOOLS],markup:[Rn.RENDER],ports:[Rn.PORTS]},initFlag:[Rn.RENDER],UPDATE_PRIORITY:0,confirmUpdate:function(t,e){const{useCSSSelectors:n}=hu;this.hasFlag(t,Rn.PORTS)&&(this._removePorts(),this._cleanPortsCache());let r=!1;if(this.hasFlag(t,Rn.RENDER))this.render(),this.updateTools(e),this.updateHighlighters(!0),r=!0,t=this.removeFlag(t,[Rn.RENDER,Rn.UPDATE,Rn.RESIZE,Rn.TRANSLATE,Rn.ROTATE,Rn.PORTS,Rn.TOOLS]);else{let i=!1;this.hasFlag(t,Rn.RESIZE)&&(this.resize(e),i=!0,t=this.removeFlag(t,[Rn.RESIZE,Rn.UPDATE]),n&&(t=this.removeFlag(t,Rn.PORTS))),this.hasFlag(t,Rn.UPDATE)&&(this.update(this.model,null,e),t=this.removeFlag(t,Rn.UPDATE),i=!0,n&&(t=this.removeFlag(t,Rn.PORTS))),this.hasFlag(t,Rn.TRANSLATE)&&(this.translate(),t=this.removeFlag(t,Rn.TRANSLATE),r=!0),this.hasFlag(t,Rn.ROTATE)&&(this.rotate(),t=this.removeFlag(t,Rn.ROTATE),r=!0),this.hasFlag(t,Rn.PORTS)&&(this._renderPorts(),i=!0,t=this.removeFlag(t,Rn.PORTS)),i&&this.updateHighlighters(!1)}return r&&this.transformHighlighters(),this.hasFlag(t,Rn.TOOLS)&&(this.updateTools(e),t=this.removeFlag(t,Rn.TOOLS)),t},_initializePorts:function(){},update:function(t,e){this.cleanNodesCache();const{useCSSSelectors:n}=hu;n&&this._removePorts();var r=this.model,i=r.attr();this.updateDOMSubtreeAttributes(this.el,i,{rootBBox:new lt(r.size()),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode,roAttributes:e===i?null:e}),n&&this._renderPorts()},rotatableSelector:"rotatable",scalableSelector:"scalable",scalableNode:null,rotatableNode:null,renderMarkup:function(){var t=this.model,e=t.get("markup")||t.markup;if(!e)throw new Error("dia.ElementView: markup required");if(Array.isArray(e))return this.renderJSONMarkup(e);if(typeof e=="string")return this.renderStringMarkup(e);throw new Error("dia.ElementView: invalid markup")},renderJSONMarkup:function(t){var e=this.parseDOMJSON(t,this.el),n=this.selectors=e.selectors;this.rotatableNode=Ue(n[this.rotatableSelector])||null,this.scalableNode=Ue(n[this.scalableSelector])||null,this.vel.append(e.fragment)},renderStringMarkup:function(t){var e=this.vel;e.append(Ue(t)),this.rotatableNode=e.findOne(".rotatable"),this.scalableNode=e.findOne(".scalable");var n=this.selectors={};n[this.selector]=this.el},render:function(){return this.vel.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransformation(),this},resize:function(t){if(this.scalableNode)return this.sgResize(t);this.model.attributes.angle&&this.rotate(),this.update()},translate:function(){if(this.rotatableNode)return this.rgTranslate();this.updateTransformation()},rotate:function(){if(this.rotatableNode){this.rgRotate(),this.update();return}this.updateTransformation()},updateTransformation:function(){var t=this.getTranslateString(),e=this.getRotateString();e&&(t+=" "+e),this.vel.attr("transform",t)},getTranslateString:function(){var t=this.model.attributes.position;return"translate("+t.x+","+t.y+")"},getRotateString:function(){var t=this.model.attributes,e=t.angle;if(!e)return null;var n=t.size;return"rotate("+e+","+n.width/2+","+n.height/2+")"},rgRotate:function(){this.rotatableNode.attr("transform",this.getRotateString())},rgTranslate:function(){this.vel.attr("transform",this.getTranslateString())},sgResize:function(t){var e=this.model,n=e.angle(),r=e.size(),i=this.scalableNode,o=!1;i.node.getElementsByTagName("path").length>0&&(o=!0);var a=i.getBBox({recursive:o}),s=r.width/(a.width||1),l=r.height/(a.height||1);i.attr("transform","scale("+s+","+l+")");var c=this.rotatableNode,u=c&&c.attr("transform");if(u){c.attr("transform",u+" rotate("+-n+","+r.width/2+","+r.height/2+")");var f=i.getBBox({target:this.paper.cells});e.set("position",{x:f.x,y:f.y},Nt({updateHandled:!0},t)),this.translate(),this.rotate()}this.update()},prepareEmbedding:function(t={}){const e=t.model||this.model,r=(t.paper||this.paper).model,i=t.initialZIndices={},o=e.getEmbeddedCells({deep:!0}),a=r.getConnectedLinks(e,{deep:!0,includeEnclosed:!0});[e,...o,...a].forEach(c=>i[c.id]=c.attributes.z),e.startBatch("to-front"),e.toFront({deep:!0,ui:!0});const s=r.getElements().reduce((c,u)=>Math.max(c,u.attributes.z||0),0);a.forEach(c=>{c.attributes.z<=s&&c.set("z",s+1,{ui:!0})}),e.stopBatch("to-front");const l=e.parent();l?(r.getCell(l).unembed(e,{ui:!0}),t.initialParentId=l):t.initialParentId=null},processEmbedding:function(t={},e,n,r){const i=t.model||this.model,o=t.paper||this.paper,a=o.model,{findParentBy:s,frontParentOnly:l,validateEmbedding:c}=o.options;let u;br(s)?u=Ln(s.call(a,this,e,n,r)):s==="pointer"?u=Ln(a.findModelsFromPoint({x:n,y:r})):u=a.findModelsUnderElement(i,{searchBy:s}),u=u.filter(h=>h instanceof pu&&i.id!==h.id&&!h.isEmbeddedIn(i)),l&&(u=u.slice(-1));let f=null;const d=t.candidateEmbedView;for(let h=u.length-1;h>=0;h--){const g=u[h];if(d&&d.model.id==g.id){f=d;break}else{const y=g.findView(o);if(!br(c)||c.call(o,this,y)){f=y;break}}}f&&f!=d&&(this.clearEmbedding(t),t.candidateEmbedView=f.highlight(f.findProxyNode(null,"container"),{embedding:!0})),!f&&d&&this.clearEmbedding(t)},clearEmbedding:function(t){t||(t={});var e=t.candidateEmbedView;e&&(e.unhighlight(e.findProxyNode(null,"container"),{embedding:!0}),t.candidateEmbedView=null)},finalizeEmbedding:function(t={}){const e=t.candidateEmbedView,n=t.model||this.model,r=t.paper||this.paper;if(e)e.model.embed(n,{ui:!0}),e.unhighlight(e.findProxyNode(null,"container"),{embedding:!0}),t.candidateEmbedView=null;else{const{validateUnembedding:i}=r.options,{initialParentId:o}=t;if(o&&typeof i=="function"&&!i.call(r,this)){this._disallowUnembed(t);return}}r.model.getConnectedLinks(n,{deep:!0}).forEach(i=>{i.reparent({ui:!0})})},_disallowUnembed:function(t){const{model:e,whenNotAllowed:n="revert"}=t,r=e||this.model,o=(t.paper||this.paper).model;switch(n){case"remove":{r.remove({ui:!0});break}case"revert":{const{initialParentId:a,initialPosition:s,initialZIndices:l}=t;if(s){const{x:u,y:f}=s;r.position(u,f,{deep:!0,ui:!0})}l&&Object.keys(l).forEach(u=>{const f=o.getCell(u);f&&f.set("z",l[u],{ui:!0})});const c=o.getCell(a);c&&c.embed(r,{ui:!0});break}}},getDelegatedView:function(){for(var t=this,e=t.model,n=t.paper;t&&!e.isLink();){if(!e.isEmbedded()||t.can("stopDelegation"))return t;e=e.getParentCell(),t=n.findViewByModel(e)}return null},findProxyNode:function(t,e){t||(t=this.el);const n=t.getAttribute(`${e}-selector`);if(n){const r=this.findAttribute("port",t);if(r){const i=this.findPortNode(r,n);if(i)return i}else{const[i]=this.findBySelector(n);if(i)return i}}return t},notifyPointerdown(t,e,n){xn.prototype.pointerdown.call(this,t,e,n),this.notify("element:pointerdown",t,e,n)},notifyPointermove(t,e,n){xn.prototype.pointermove.call(this,t,e,n),this.notify("element:pointermove",t,e,n)},notifyPointerup(t,e,n){this.notify("element:pointerup",t,e,n),xn.prototype.pointerup.call(this,t,e,n)},pointerdblclick:function(t,e,n){xn.prototype.pointerdblclick.apply(this,arguments),this.notify("element:pointerdblclick",t,e,n)},pointerclick:function(t,e,n){xn.prototype.pointerclick.apply(this,arguments),this.notify("element:pointerclick",t,e,n)},contextmenu:function(t,e,n){xn.prototype.contextmenu.apply(this,arguments),this.notify("element:contextmenu",t,e,n)},pointerdown:function(t,e,n){this.notifyPointerdown(t,e,n),this.dragStart(t,e,n)},pointermove:function(t,e,n){const r=this.eventData(t),{targetMagnet:i,action:o,delegatedView:a}=r;switch(i&&this.magnetpointermove(t,i,e,n),o){case Vm.MAGNET:this.dragMagnet(t,e,n);break;case Vm.MOVE:(a||this).drag(t,e,n);default:if(r.preventPointerEvents)break;this.notifyPointermove(t,e,n);break}this.eventData(t,r)},pointerup:function(t,e,n){const r=this.eventData(t),{targetMagnet:i,action:o,delegatedView:a}=r;switch(i&&this.magnetpointerup(t,i,e,n),o){case Vm.MAGNET:this.dragMagnetEnd(t,e,n);break;case Vm.MOVE:(a||this).dragEnd(t,e,n);default:if(r.preventPointerEvents)break;this.notifyPointerup(t,e,n)}i&&this.magnetpointerclick(t,i,e,n),this.checkMouseleave(t)},mouseover:function(t){xn.prototype.mouseover.apply(this,arguments),this.notify("element:mouseover",t)},mouseout:function(t){xn.prototype.mouseout.apply(this,arguments),this.notify("element:mouseout",t)},mouseenter:function(t){xn.prototype.mouseenter.apply(this,arguments),this.notify("element:mouseenter",t)},mouseleave:function(t){xn.prototype.mouseleave.apply(this,arguments),this.notify("element:mouseleave",t)},mousewheel:function(t,e,n,r){xn.prototype.mousewheel.apply(this,arguments),this.notify("element:mousewheel",t,e,n,r)},onmagnet:function(t,e,n){const{currentTarget:r}=t;this.magnetpointerdown(t,r,e,n),this.eventData(t,{targetMagnet:r}),this.dragMagnetStart(t,e,n)},magnetpointerdown:function(t,e,n,r){this.notify("element:magnet:pointerdown",t,e,n,r)},magnetpointermove:function(t,e,n,r){this.notify("element:magnet:pointermove",t,e,n,r)},magnetpointerup:function(t,e,n,r){this.notify("element:magnet:pointerup",t,e,n,r)},magnetpointerdblclick:function(t,e,n,r){this.notify("element:magnet:pointerdblclick",t,e,n,r)},magnetcontextmenu:function(t,e,n,r){this.notify("element:magnet:contextmenu",t,e,n,r)},dragStart:function(t,e,n){if(this.isDefaultInteractionPrevented(t))return;var r=this.getDelegatedView();if(!r||!r.can("elementMove"))return;this.eventData(t,{action:Vm.MOVE,delegatedView:r});const i=r.model.position();r.eventData(t,{initialPosition:i,pointerOffset:i.difference(e,n),restrictedArea:this.paper.getRestrictedArea(r,e,n)})},dragMagnetStart:function(t,e,n){const{paper:r}=this,i=t.isPropagationStopped();if(i&&this.eventData(t,{preventPointerEvents:!0}),this.isDefaultInteractionPrevented(t)||!this.can("addLinkFromMagnet"))return;const{targetMagnet:o=t.currentTarget}=this.eventData(t);if(t.stopPropagation(),!r.options.validateMagnet.call(r,this,o,t)){i?this.dragStart(t,e,n):this.pointerdown(t,e,n);return}r.options.magnetThreshold<=0&&this.dragLinkStart(t,o,e,n),this.eventData(t,{action:Vm.MAGNET})},drag:function(t,e,n){var r=this.paper,i=r.options.gridSize,o=this.model,a=this.eventData(t),{pointerOffset:s,restrictedArea:l,embedding:c}=a,u=Og(e+s.x,i),f=Og(n+s.y,i);o.position(u,f,{restrictedArea:l,deep:!0,ui:!0}),r.options.embeddingMode&&(c||(this.prepareEmbedding(a),c=!0),this.processEmbedding(a,t,e,n)),this.eventData(t,{embedding:c})},dragMagnet:function(t,e,n){this.dragLink(t,e,n)},dragEnd:function(t,e,n){var r=this.eventData(t);r.embedding&&this.finalizeEmbedding(r)},dragMagnetEnd:function(t,e,n){this.dragLinkEnd(t,e,n)},magnetpointerclick:function(t,e,n,r){var i=this.paper;i.eventData(t).mousemoved>i.options.clickThreshold||this.notify("element:magnet:pointerclick",t,e,n,r)}},{Flags:Rn});Nt(ao.prototype,rze);const lze=function(t,e,n){return t},cze=function(t,e,n){var r=e.side||"bottom",i=Fg(e.padding||40),o=n.sourceBBox,a=n.targetBBox,s=o.center(),l=a.center(),c,u,f;switch(r){case"bottom":f=1,c="y",u="height";break;case"top":f=-1,c="y",u="height";break;case"left":f=-1,c="x",u="width";break;case"right":f=1,c="x",u="width";break;default:throw new Error("Router: invalid side")}return s[c]+=f*(o[u]/2+i[r]),l[c]+=f*(a[u]/2+i[r]),f*(s[c]-l[c])>0?l[c]=s[c]:s[c]=l[c],[s].concat(t,l)};var uze={N:"S",S:"N",E:"W",W:"E"},fze={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function kC(t,e,n){var r=new we(t.x,e.y);return n.containsPoint(r)&&(r=new we(e.x,t.y)),r}function wO(t,e){return t[e==="W"||e==="E"?"width":"height"]}function Ta(t,e){return t.x===e.x?t.y>e.y?"N":"S":t.y===e.y?t.x>e.x?"W":"E":null}function Tk(t){return new lt(t.x,t.y,0,0)}function xC(t){var e=Fg(t.padding||t.elementPadding||20);return{x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}function Mse(t,e){return t.sourceBBox.clone().moveAndExpand(xC(e))}function Rse(t,e){return t.targetBBox.clone().moveAndExpand(xC(e))}function dze(t,e){if(t.sourceAnchor)return t.sourceAnchor;var n=Mse(t,e);return n.center()}function hze(t,e){if(t.targetAnchor)return t.targetAnchor;var n=Rse(t,e);return n.center()}function zse(t,e,n){var r=new we(t.x,e.y),i=new we(e.x,t.y),o=Ta(t,r),a=Ta(t,i),s=uze[n],l=o===n||o!==s&&(a===s||a!==n)?r:i;return{points:[l],direction:Ta(l,e)}}function Ex(t,e,n){var r=kC(t,e,n);return{points:[r],direction:Ta(r,e)}}function pze(t,e,n,r){var i={},o=[new we(t.x,e.y),new we(e.x,t.y)],a=o.filter(function(f){return!n.containsPoint(f)}),s=a.filter(function(f){return Ta(f,t)!==r}),l;if(s.length>0)l=s.filter(function(f){return Ta(t,f)===r}).pop(),l=l||s[0],i.points=[l],i.direction=Ta(l,e);else{l=pRe(o,a)[0];var c=new we(e).move(l,-wO(n,r)/2),u=kC(c,t,n);i.points=[u,c],i.direction=Ta(c,e)}return i}function gze(t,e,n,r){var i=Ex(e,t,r),o=i.points[0];if(n.containsPoint(o)){i=Ex(t,e,n);var a=i.points[0];if(r.containsPoint(a)){var s=new we(t).move(a,-wO(n,Ta(t,a))/2),l=new we(e).move(o,-wO(r,Ta(e,o))/2),c=new gt(s,l).midpoint(),u=Ex(t,c,n),f=zse(c,e,u.direction);i.points=[u.points[0],f.points[0]],i.direction=f.direction}}return i}function A7(t,e,n,r,i){var o={},a=n.union(r).inflate(1),s=a.center().distance(e)>a.center().distance(t),l=s?e:t,c=s?t:e,u,f,d;return i?(u=we.fromPolar(a.width+a.height,fze[i],l),u=a.pointNearestToPoint(u).move(u,-1)):u=a.pointNearestToPoint(l).move(l,1),f=kC(u,c,a),u.round().equals(f.round())?(f=we.fromPolar(a.width+a.height,ls(u.theta(l))+Math.PI/2,c),f=a.pointNearestToPoint(f).move(c,1).round(),d=kC(u,f,a),o.points=s?[f,d,u]:[u,d,f]):o.points=s?[f,u]:[u,f],o.direction=Ta(s?u:f,e),o}function kO(t,e,n){var r=Mse(n,e),i=Rse(n,e),o=dze(n,e),a=hze(n,e);r=r.union(Tk(o)),i=i.union(Tk(a)),t=Ln(t).map(we),t.unshift(o),t.push(a);for(var s,l=[],c=0,u=t.length-1;c<u;c++){var f=null,d=t[c],h=t[c+1],g=!!Ta(d,h);if(c===0)c+1===u?r.intersect(i.clone().inflate(1))?f=A7(d,h,r,i):g||(f=gze(d,h,r,i)):r.containsPoint(h)?f=A7(d,h,r,Tk(h).moveAndExpand(xC(e))):g||(f=Ex(d,h,r));else if(c+1===u){var y=g&&Ta(h,d)===s;i.containsPoint(d)||y?f=A7(d,h,Tk(d).moveAndExpand(xC(e)),i,s):g||(f=pze(d,h,i,s))}else g||(f=zse(d,h,s));f?(Array.prototype.push.apply(l,f.points),s=f.direction):s=Ta(d,h),c+1<u&&l.push(h)}return l}var Vse={step:10,maximumLoops:2e3,precision:1,maxAllowedDirectionChange:90,perpendicular:!0,excludeEnds:[],excludeTypes:["basic.Text"],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){return this.step},directions:function(){var t=this.step,e=this.cost();return[{offsetX:t,offsetY:0,cost:e},{offsetX:-t,offsetY:0,cost:e},{offsetX:0,offsetY:t,cost:e},{offsetX:0,offsetY:-t,cost:e}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},paddingBox:function(){var t=this.step;return{x:-t,y:-t,width:2*t,height:2*t}},isPointObstacle:null,fallbackRouter:function(t,e,n){if(!br(kO))throw new Error("Manhattan requires the orthogonal router as default fallback.");return kO(t,Nt({},Vse,e),n)},fallbackRoute:function(t,e,n){return null},draggingRoute:null};function HL(t){this.map={},this.options=t,this.mapGridSize=100}HL.prototype.build=function(t,e){var n=this.options,r=Ln(n.excludeEnds).reduce(function(l,c){var u=e.get(c);if(u){var f=t.getCell(u.id);f&&l.push(f)}return l},[]),i=[],o=t.getCell(e.get("source").id);o&&(i=mO(i,o.getAncestors().map(function(l){return l.id})));var a=t.getCell(e.get("target").id);a&&(i=mO(i,a.getAncestors().map(function(l){return l.id})));var s=this.mapGridSize;return t.getElements().reduce(function(l,c){var u=Ln(n.excludeTypes).includes(c.get("type")),f=r.find(function(C){return C.id===c.id}),d=i.includes(c.id),h=u||f||d;if(!h)for(var g=c.getBBox().moveAndExpand(n.paddingBox),y=g.origin().snapToGrid(s),S=g.corner().snapToGrid(s),v=y.x;v<=S.x;v+=s)for(var _=y.y;_<=S.y;_+=s){var x=v+"@"+_;l[x]=l[x]||[],l[x].push(g)}return l},this.map),this};HL.prototype.isPointAccessible=function(t){var e=t.clone().snapToGrid(this.mapGridSize).toString();return Ln(this.map[e]).every(function(n){return!n.containsPoint(t)})};function em(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}em.prototype.add=function(t,e){this.hash[t]?this.items.splice(this.items.indexOf(t),1):this.hash[t]=this.OPEN,this.values[t]=e;var n=_se(this.items,t,(function(r){return this.values[r]}).bind(this));this.items.splice(n,0,t)};em.prototype.remove=function(t){this.hash[t]=this.CLOSE};em.prototype.isOpen=function(t){return this.hash[t]===this.OPEN};em.prototype.isClose=function(t){return this.hash[t]===this.CLOSE};em.prototype.isEmpty=function(){return this.items.length===0};em.prototype.pop=function(){var t=this.items.shift();return this.remove(t),t};function Bse(t,e){return e&&e.paddingBox?t.sourceBBox.clone().moveAndExpand(e.paddingBox):t.sourceBBox.clone()}function jse(t,e){return e&&e.paddingBox?t.targetBBox.clone().moveAndExpand(e.paddingBox):t.targetBBox.clone()}function Hse(t,e){if(t.sourceAnchor)return t.sourceAnchor;var n=Bse(t,e);return n.center()}function mze(t,e){if(t.targetAnchor)return t.targetAnchor;var n=jse(t,e);return n.center()}function P7(t,e,n,r,i){var o=360/n,a=t.theta(vze(t,e,r,i)),s=bu(a+o/2);return o*Math.floor(s/o)}function vze(t,e,n,r){var i=r.step,o=e.x-t.x,a=e.y-t.y,s=o/n.x,l=a/n.y,c=s*i,u=l*i;return new we(t.x+c,t.y+u)}function zU(t,e){var n=Math.abs(t-e);return n>180?360-n:n}function yze(t,e,n){var r=n.step;Ln(n.directions).forEach(function(i){i.gridOffsetX=i.offsetX/r*e.x,i.gridOffsetY=i.offsetY/r*e.y})}function bze(t,e,n){return{source:e.clone(),x:VU(n.x-e.x,t),y:VU(n.y-e.y,t)}}function VU(t,e){if(!t)return e;var n=Math.abs(t),r=Math.round(n/e);if(!r)return n;var i=r*e,o=n-i,a=o/r;return e+a}function Sze(t,e){var n=e.source,r=Og(t.x-n.x,e.x)+n.x,i=Og(t.y-n.y,e.y)+n.y;return new we(r,i)}function Lb(t,e){return t.round(e)}function Ox(t,e,n){return Lb(Sze(t.clone(),e),n)}function m1(t){return t.clone().toString()}function E7(t){return new we(t.x===0?0:Math.abs(t.x)/t.x,t.y===0?0:Math.abs(t.y)/t.y)}function _ze(t,e,n,r,i,o,a){for(var s=[],l=E7(i.difference(n)),c=m1(n),u=t[c],f;u;){f=e[c];var d=E7(f.difference(u));d.equals(l)||(s.unshift(f),l=d),c=m1(u),u=t[c]}var h=e[c],g=E7(h.difference(r));return g.equals(l)||s.unshift(h),s}function BU(t,e){for(var n=1/0,r=0,i=e.length;r<i;r++){var o=t.manhattanDistance(e[r]);o<n&&(n=o)}return n}function jU(t,e,n,r,i){var o=i.precision,a=i.directionMap,s=t.difference(e.center()),l=Jn(a)?Object.keys(a):[],c=Ln(n),u=l.reduce(function(f,d){if(c.includes(d)){for(var h=a[d],g=new we(t.x+h.x*(Math.abs(s.x)+e.width),t.y+h.y*(Math.abs(s.y)+e.height)),y=new gt(t,g),S=y.intersect(e)||[],v=S.length,_,x=null,C=0;C<v;C++){var k=S[C],m=t.squaredDistance(k);(_===void 0||m>_)&&(_=m,x=k)}if(x){var T=Ox(x,r,o);e.containsPoint(T)&&(T=Ox(T.offset(h.x*r.x,h.y*r.y),r,o)),f.push(T)}}return f},[]);return e.containsPoint(t)||u.push(Ox(t,r,o)),u}function wze(t,e,n,r){var i=r.precision,o,a;t instanceof lt?o=Lb(Hse(this,r).clone(),i):o=Lb(t.clone(),i),e instanceof lt?a=Lb(mze(this,r).clone(),i):a=Lb(e.clone(),i);var s=bze(r.step,o,a),l,c,u,f;if(t instanceof lt?(l=o,u=jU(l,t,r.startDirections,s,r)):(l=o,u=[l]),e instanceof lt?(c=a,f=jU(a,e,r.endDirections,s,r)):(c=a,f=[c]),u=u.filter(ye=>!n(ye)),f=f.filter(ye=>!n(ye)),u.length>0&&f.length>0){for(var d=new em,h={},g={},y={},S=0,v=u.length;S<v;S++){var _=u[S],x=m1(_);d.add(x,BU(_,f)),h[x]=_,y[x]=0}var C=r.previousDirectionAngle,k=C===void 0,m,T,E=r.directions;yze(E,s,r);for(var I=E.length,D=Ln(f).reduce(function(ye,j){var Y=m1(j);return ye.push(Y),ye},[]),F=r.maximumLoops;!d.isEmpty()&&F>0;){var R=d.pop(),z=h[R],B=g[R],ie=y[R],oe=B===void 0,_e=z.equals(l),Ae;oe?k?_e?Ae=null:Ae=P7(l,z,I,s,r):Ae=C:Ae=P7(B,z,I,s,r);var Pe=u.length===f.length;if(Pe){for(var Se=0;Se<u.length;Se++)if(!u[Se].equals(f[Se])){Pe=!1;break}}var se=oe&&Pe;if(!se&&D.indexOf(R)>=0)return r.previousDirectionAngle=Ae,_ze(g,h,z,l,c);for(S=0;S<I;S++){m=E[S];var ne=m.angle;if(T=zU(Ae,ne),!(!(k&&_e)&&T>r.maxAllowedDirectionChange)){var J=Ox(z.clone().offset(m.gridOffsetX,m.gridOffsetY),s,i),V=m1(J);if(!(d.isClose(V)||n(J))){if(D.indexOf(V)>=0){var W=J.equals(c);if(!W){var ae=P7(J,c,I,s,r),te=zU(ne,ae);if(te>r.maxAllowedDirectionChange)continue}}var ue=m.cost,ce=_e?0:r.penalties[T],fe=ie+ue+ce;(!d.isOpen(V)||fe<y[V])&&(h[V]=J,g[V]=z,y[V]=fe,d.add(V,fe+BU(J,f)))}}}F--}}return r.fallbackRoute.call(this,l,c,r)}function kze(t){if(t.directions=Di(t,"directions"),t.penalties=Di(t,"penalties"),t.paddingBox=Di(t,"paddingBox"),t.padding=Di(t,"padding"),t.padding){var e=Fg(t.padding);t.paddingBox={x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}Ln(t.directions).forEach(function(n){var r=new we(0,0),i=new we(n.offsetX,n.offsetY);n.angle=bu(r.theta(i))})}function xze(t,e,n){kze(e),n.options.perpendicular=!!e.perpendicular;var r=Bse(n,e),i=jse(n,e),o=Hse(n,e);let a;if(typeof e.isPointObstacle=="function")a=e.isPointObstacle;else{const x=new HL(e);x.build(n.paper.model,n.model),a=C=>!x.isPointAccessible(C)}for(var s=Ln(t).map(we),l=[],c=o,u,f,d=0,h=s.length;d<=h;d++){var g=null;if(f=u||r,u=s[d],!u){u=i;var y=!n.model.get("source").id||!n.model.get("target").id;if(y&&br(e.draggingRoute)){var S=f===r?o:f,v=u.origin();g=e.draggingRoute.call(n,S,v,e)}}if(g=g||wze.call(n,f,u,a,e),g===null)return e.fallbackRouter(t,e,n);var _=g[0];_&&_.equals(c)&&g.shift(),c=g[g.length-1]||c,Array.prototype.push.apply(l,g)}return l}const xO=function(t,e,n){return xze(t,Nt({},Vse,e),n)};var Cze={maxAllowedDirectionChange:45,diagonalCost:function(){var t=this.step;return Math.ceil(Math.sqrt(t*t<<1))},directions:function(){var t=this.step,e=this.cost(),n=this.diagonalCost();return[{offsetX:t,offsetY:0,cost:e},{offsetX:t,offsetY:t,cost:n},{offsetX:0,offsetY:t,cost:e},{offsetX:-t,offsetY:t,cost:n},{offsetX:-t,offsetY:0,cost:e},{offsetX:-t,offsetY:-t,cost:n},{offsetX:0,offsetY:-t,cost:e},{offsetX:t,offsetY:-t,cost:n}]},fallbackRoute:function(t,e,n){var r=t.theta(e),i=[],o={x:e.x,y:t.y},a={x:t.x,y:e.y};if(r%180>90){var s=o;o=a,a=s}var l=r%90<45?o:a,c=new gt(t,l),u=90*Math.ceil(r/90),f=we.fromPolar(c.squaredLength(),ls(u+135),l),d=new gt(e,f),h=c.intersection(d),g=h||e,y=h?g:t,S=360/n.directions.length,v=y.theta(e),_=bu(v+S/2),x=S*Math.floor(_/S);return n.previousDirectionAngle=x,g&&i.push(g.round()),i.push(e),i}};const Tze=function(t,e,n){if(!br(xO))throw new Error("Metro requires the manhattan router.");return xO(t,Nt({},Cze,e),n)},Gr={AUTO:"auto",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",ANCHOR_SIDE:"anchor-side",MAGNET_SIDE:"magnet-side"},HU=[Gr.LEFT,Gr.RIGHT,Gr.TOP,Gr.BOTTOM];function UU(t,e,n){const r=n.getTangentAtLength(n.getClosestPointLength(e));switch(Math.round(r.angle()/90)*90){case 0:case 360:return t.y<e.y?Gr.TOP:Gr.BOTTOM;case 90:return t.x<e.x?Gr.LEFT:Gr.RIGHT;case 180:return t.y<e.y?Gr.TOP:Gr.BOTTOM;case 270:return t.x<e.x?Gr.LEFT:Gr.RIGHT}}function Use(t,e,n){const r=e.margin||20;let{sourceDirection:i=Gr.AUTO,targetDirection:o=Gr.AUTO}=e;const a=n.sourceView,s=n.targetView,l=!!n.model.source().port,c=!!n.model.target().port;i===Gr.AUTO&&(i=l?Gr.MAGNET_SIDE:Gr.ANCHOR_SIDE),o===Gr.AUTO&&(o=c?Gr.MAGNET_SIDE:Gr.ANCHOR_SIDE);const u=n.sourceBBox,f=n.targetBBox,d=n.sourceAnchor,h=n.targetAnchor;let{x:g,y,width:S=0,height:v=0}=a&&a.model.isElement()?lt.fromRectUnion(u,a.model.getBBox()):n.sourceAnchor,{x:_,y:x,width:C=0,height:k=0}=s&&s.model.isElement()?lt.fromRectUnion(f,s.model.getBBox()):n.targetAnchor;const m=_+C,T=x+k,E=g+S,I=y+v,D=g-r,F=E+r,R=y-r,z=I+r,B=_-r,ie=m+r,oe=x-r,_e=T+r,Ae=d.clone();let Pe;if(a)a.model.isLink()?Pe=UU(h,d,a):i===Gr.ANCHOR_SIDE?Pe=u.sideNearestToPoint(d):i===Gr.MAGNET_SIDE?Pe=a.model.getBBox().sideNearestToPoint(d):Pe=i;else{const j=new lt(g,y,0,0);Pe=HU.includes(i)?i:j.sideNearestToPoint(h)}switch(Pe){case"left":Ae.x=D;break;case"right":Ae.x=F;break;case"top":Ae.y=R;break;case"bottom":Ae.y=z;break}const Se=h.clone();let se;if(s)s.model.isLink()?se=UU(d,h,s):o===Gr.ANCHOR_SIDE?se=f.sideNearestToPoint(h):o===Gr.MAGNET_SIDE?se=s.model.getBBox().sideNearestToPoint(h):se=o;else{const j=new lt(_,x,0,0);se=HU.includes(o)?o:j.sideNearestToPoint(d)}switch(se){case"left":Se.x=B;break;case"right":Se.x=ie;break;case"top":Se.y=oe;break;case"bottom":Se.y=_e;break}const{x:ne,y:J}=Ae,{x:V,y:W}=Se,ae=(_+m)/2,te=(x+T)/2,ue=(g+E)/2,ce=(y+I)/2,fe=(ue<ae?E+_:m+g)/2,ye=(ce<te?I+x:T+y)/2;if(Pe==="left"&&se==="right"){if(D<=m){let Y=ye;return E<=_&&(T>=R&&W<J?Y=Math.min(oe,R):x<=z&&W>=J&&(Y=Math.max(_e,z))),[{x:ne,y:J},{x:ne,y:Y},{x:V,y:Y},{x:V,y:W}]}const j=(ne+V)/2;return[{x:j,y:J},{x:j,y:W}]}else if(Pe==="right"&&se==="left"){if(F>=_){let Y=ye;return ne>m&&(T>=R&&W<J?Y=Math.min(oe,R):x<=z&&W>=J&&(Y=Math.max(_e,z))),[{x:ne,y:J},{x:ne,y:Y},{x:V,y:Y},{x:V,y:W}]}const j=(ne+V)/2;return[{x:j,y:J},{x:j,y:W}]}else if(Pe==="top"&&se==="bottom"){if(J<W){let Y=fe,O=J;return J<x&&(m>=D&&V<ne?Y=Math.min(B,D):_<=F&&V>=ne&&(Y=Math.max(ie,F))),[{x:ne,y:O},{x:Y,y:O},{x:Y,y:W},{x:V,y:W}]}const j=(J+W)/2;return[{x:ne,y:j},{x:V,y:j}]}else if(Pe==="bottom"&&se==="top"){if(J-r>W){let Y=fe,O=J;return J>T&&(m>=D&&V<ne?Y=Math.min(B,D):_<=F&&V>=ne&&(Y=Math.max(ie,F))),[{x:ne,y:O},{x:Y,y:O},{x:Y,y:W},{x:V,y:W}]}const j=(J+W)/2;return[{x:ne,y:j},{x:V,y:j}]}else if(Pe==="top"&&se==="top"){let j,Y=Math.min((I+x)/2,W),O=Math.min((y+T)/2,J);if(W<J){if(ne>=ie||ne<=B)return[{x:ne,y:Math.min(J,W)},{x:V,y:Math.min(J,W)}];V>ne?j=Math.min(ne,B):j=Math.max(ne,ie)}else{if(V>=F||V<=D)return[{x:ne,y:Math.min(J,W)},{x:V,y:Math.min(J,W)}];V>=ne?j=Math.max(V,F):j=Math.min(V,D)}return[{x:ne,y:O},{x:j,y:O},{x:j,y:Y},{x:V,y:Y}]}else if(Pe==="bottom"&&se==="bottom"){if(_>=ne+r||m<=ne-r)return[{x:ne,y:Math.max(J,W)},{x:V,y:Math.max(J,W)}];let j,Y,O;return W>J?(Y=Math.max((I+x)/2,W),O=Math.max((I+x)/2,J),V>ne?j=Math.min(ne,B):j=Math.max(ne,ie)):(Y=Math.max((y+T)/2,W),O=Math.max((y+T)/2,J),V>ne?j=Math.min(V,D):j=Math.max(V,F)),[{x:ne,y:O},{x:j,y:O},{x:j,y:Y},{x:V,y:Y}]}else if(Pe==="left"&&se==="left"){let j,Y=Math.min((E+_)/2,V),O=Math.min((g+m)/2,ne);return V>ne?W<=J?j=Math.min(R,W):j=Math.max(z,W):W>=J?j=Math.min(oe,J):j=Math.max(_e,J),[{x:O,y:J},{x:O,y:j},{x:Y,y:j},{x:Y,y:W}]}else if(Pe==="right"&&se==="right"){let j,Y=Math.max((g+m)/2,V),O=Math.max((E+_)/2,ne);return V<ne?W<=J?j=Math.min(R,W):j=Math.max(z,W):W>=J?j=Math.min(oe,J):j=Math.max(_e,J),[{x:O,y:J},{x:O,y:j},{x:Y,y:j},{x:Y,y:W}]}else if(Pe==="top"&&se==="right"){if(J>W){if(ne<V){let Y=(y+T)/2;return Y>te&&Y<_e&&ne<B&&(Y=oe),[{x:ne,y:Y},{x:V,y:Y},{x:V,y:W}]}return[{x:ne,y:W}]}const j=(g+m)/2;if(ne>V&&I>=W)return[{x:ne,y:J},{x:j,y:J},{x:j,y:W}];if(j>D&&J<T){const Y=Math.min(y,x)-r,O=Math.max(E,m)+r;return[{x:ne,y:Y},{x:O,y:Y},{x:O,y:W}]}return[{x:ne,y:J},{x:j,y:J},{x:j,y:W}]}else if(Pe==="top"&&se==="left"){if(J>W){if(ne>V){let Y=(y+T)/2;return Y>te&&Y<_e&&ne>ie&&(Y=oe),[{x:ne,y:Y},{x:V,y:Y},{x:V,y:W}]}return[{x:ne,y:W}]}const j=(E+_)/2;if(ne<V&&I>=W)return[{x:ne,y:J},{x:j,y:J},{x:j,y:W}];if(j<F&&J<T){const Y=Math.min(y,x)-r,O=Math.min(g,_)-r;return[{x:ne,y:Y},{x:O,y:Y},{x:O,y:W}]}return[{x:ne,y:J},{x:j,y:J},{x:j,y:W}]}else if(Pe==="bottom"&&se==="right"){if(J<W){if(ne<V){let Y=(I+x)/2;return Y<te&&Y>oe&&ne<B&&(Y=_e),[{x:ne,y:Y},{x:V,y:Y},{x:V,y:W}]}return[{x:ne,y:W}]}else if(g<V){const Y=Math.max(I,T)+r,O=Math.max(E,m)+r;return[{x:ne,y:Y},{x:O,y:Y},{x:O,y:W}]}const j=fe;return[{x:ne,y:J},{x:j,y:J},{x:j,y:W}]}else if(Pe==="bottom"&&se==="left"){if(J<W){if(ne>V){let Y=(I+x)/2;return Y<te&&Y>oe&&ne>ie&&(Y=_e),[{x:ne,y:Y},{x:V,y:Y},{x:V,y:W}]}return[{x:ne,y:W}]}else if(E>V){const Y=Math.max(I,T)+r,O=Math.min(g,_)-r;return[{x:ne,y:Y},{x:O,y:Y},{x:O,y:W}]}const j=fe;return[{x:ne,y:J},{x:j,y:J},{x:j,y:W}]}else if(Pe==="left"&&se==="bottom"){if(ne>V&&J>=_e)return[{x:V,y:J}];if(ne>=m&&J<W){const O=(E+_)/2;return[{x:O,y:J},{x:O,y:W},{x:V,y:W}]}if(V<E&&T<=y){const O=(y+T)/2;return[{x:ne,y:J},{x:ne,y:O},{x:V,y:O}]}const j=Math.min(B,ne),Y=Math.max(I,T)+r;return[{x:j,y:J},{x:j,y:Y},{x:V,y:Y}]}else if(Pe==="left"&&se==="top"){if(ne>V&&J<oe)return[{x:V,y:J}];if(ne>=m&&J>W){const O=(g+m)/2;return[{x:O,y:J},{x:O,y:W},{x:V,y:W}]}if(V<=E&&W>J){const O=(x+I)/2;return[{x:ne,y:J},{x:ne,y:O},{x:V,y:O}]}const j=W<J?Math.min(g,_)-r:D,Y=Math.min(y,x)-r;return[{x:j,y:J},{x:j,y:Y},{x:V,y:Y}]}else if(Pe==="right"&&se==="top"){if(ne<V&&J<oe)return[{x:V,y:J}];if(E<_&&J>W){let O=(E+_)/2;return[{x:O,y:J},{x:O,y:W},{x:V,y:W}]}if(V<ne&&x>I){const O=(I+x)/2;return[{x:ne,y:J},{x:ne,y:O},{x:V,y:O}]}const j=Math.max(E,m)+r,Y=Math.min(y,x)-r;return[{x:j,y:J},{x:j,y:Y},{x:V,y:Y}]}else if(Pe==="right"&&se==="bottom"){if(ne<V&&J>=_e)return[{x:V,y:J}];if(ne<=_&&J<W){const O=(E+_)/2;return[{x:O,y:J},{x:O,y:W},{x:V,y:W}]}if(V>g&&T<y){const O=(y+T)/2;return[{x:ne,y:J},{x:ne,y:O},{x:V,y:O}]}const j=Math.max(ie,ne),Y=Math.max(I,T)+r;return[{x:j,y:J},{x:j,y:Y},{x:V,y:Y}]}}Use.Directions=Gr;const Aze=Use,Pze=Object.freeze(Object.defineProperty({__proto__:null,manhattan:xO,metro:Tze,normal:lze,oneSide:cze,orthogonal:kO,rightAngle:Aze},Symbol.toStringTag,{value:"Module"})),ev={POINT:"point",CUBIC:"cubic",LINE:"line",GAP:"gap"},Eze=Object.values(ev),Oze=10,Ize=1,UL=function(t,e,n=[],r={}){const{cornerType:i=ev.POINT,cornerRadius:o=Oze,cornerPreserveAspectRatio:a=!1,precision:s=Ize,raw:l=!1}=r;if(Eze.indexOf(i)===-1)throw new Error("Invalid `cornerType` provided to `straight` connector.");let c;if(i===ev.POINT||!o){const u=[t].concat(n).concat([e]),f=new $r(u);c=new xt(f)}else{c=new xt,c.appendSegment(xt.createSegment("M",t));let u;const f=n.length;for(let d=0;d<f;d++){const h=new we(n[d]),g=n[d-1]||t,y=n[d+1]||e,S=u||h.distance(g)/2;u=h.distance(y)/2;let v,_;a?v=_=-Math.min(o,S,u):(v=-Math.min(o,S),_=-Math.min(o,u));const x=h.clone().move(g,v).round(s),C=h.clone().move(y,_).round(s);switch(c.appendSegment(xt.createSegment("L",x)),i){case ev.CUBIC:{const k=.3333333333333333,m=2/3,T=new we(k*x.x+m*h.x,m*h.y+k*x.y),E=new we(k*C.x+m*h.x,m*h.y+k*C.y);c.appendSegment(xt.createSegment("C",T,E,C));break}case ev.LINE:{c.appendSegment(xt.createSegment("L",C));break}case ev.GAP:{c.appendSegment(xt.createSegment("M",C));break}}}c.appendSegment(xt.createSegment("L",e))}return l?c:c.serialize()};var $ze=5,WU=["arc","gap","cubic"],Fze=0,GU=1,Lze=["smooth"],Ak=1/3,Pk=2/3;function O7(t,e,n){var r=[].concat(t,n,e);return r.reduce(function(i,o,a){var s=r[a+1];return s!=null&&(i[a]=ug(o,s)),i},[])}function Dze(t){var e=t.paper,n=e._jumpOverUpdateList;if(n==null){n=e._jumpOverUpdateList=[];var r=e.model;r.on("batch:stop",function(){this.hasActiveBatch()||Nze(e)}),r.on("reset",function(){n=e._jumpOverUpdateList=[]})}n.indexOf(t)<0&&(n.push(t),t.listenToOnce(t.model,"change:connector remove",function(){n.splice(n.indexOf(t),1)}))}function Nze(t){for(var e=t._jumpOverUpdateList,n=0;n<e.length;n++){const r=e[n],i=r.getFlag(r.constructor.Flags.CONNECTOR);r.requestUpdate(i)}}function Mze(t,e){return Ln(e).reduce(function(n,r){var i=t.intersection(r);return i&&n.push(i),n},[])}function qU(t,e){return ug(t,e).squaredLength()}function Rze(t,e,n){return e.reduce(function(r,i,o){if(i.skip===!0)return r;var a=r.pop()||t,s=pC(i).move(a.start,-n),l=pC(i).move(a.start,+n),c=e[o+1];if(c!=null){var u=l.distance(c);u<=n&&(l=c.move(a.start,u),c.skip=!0)}else{var f=s.distance(a.end);if(f<n*2+GU)return r.push(a),r}var d=l.distance(a.start);if(d<n*2+GU)return r.push(a),r;var h=ug(s,l);return h.isJump=!0,r.push(ug(a.start,s),h,ug(l,a.end)),r},[])}function YU(t,e,n,r){var i=new xt,o;return o=xt.createSegment("M",t[0].start),i.appendSegment(o),Ln(t).forEach(function(a,s){if(a.isJump){var l,c,u,f;if(n==="arc"){l=-90,c=a.start.difference(a.end);var d=+(c.x<0||c.x===0&&c.y<0);d&&(l+=180);var h=a.midpoint(),g=new gt(h,a.end).rotate(h,l),y;y=new gt(a.start,h),u=y.pointAt(2/3).rotate(a.start,l),f=g.pointAt(1/3).rotate(g.end,-l),o=xt.createSegment("C",u,f,g.end),i.appendSegment(o),y=new gt(h,a.end),u=g.pointAt(1/3).rotate(g.end,l),f=y.pointAt(1/3).rotate(a.end,-l),o=xt.createSegment("C",u,f,a.end),i.appendSegment(o)}else if(n==="gap")o=xt.createSegment("M",a.end),i.appendSegment(o);else if(n==="cubic"){l=a.start.theta(a.end);var S=e*.6,v=e*1.35;c=a.start.difference(a.end),d=+(c.x<0||c.x===0&&c.y<0),d&&(v*=-1),u=we(a.start.x+S,a.start.y+v).rotate(a.start,l),f=we(a.end.x-S,a.end.y+v).rotate(a.end,l),o=xt.createSegment("C",u,f,a.end),i.appendSegment(o)}}else{var _=t[s+1];r==0||!_||_.isJump?(o=xt.createSegment("L",a.end),i.appendSegment(o)):zze(r,i,a.end,a.start,_.end)}}),i}function zze(t,e,n,r,i){var o=n.distance(r)/2,a=n.distance(i)/2,s=-Math.min(t,o),l=-Math.min(t,a),c=n.clone().move(r,s).round(),u=n.clone().move(i,l).round(),f=new we(Ak*c.x+Pk*n.x,Pk*n.y+Ak*c.y),d=new we(Ak*u.x+Pk*n.x,Pk*n.y+Ak*u.y),h;h=xt.createSegment("L",c),e.appendSegment(h),h=xt.createSegment("C",f,d,u),e.appendSegment(h)}const Vze=function(t,e,n,r){Dze(this);var i=r.raw,o=r.size||$ze,a=r.jump&&(""+r.jump).toLowerCase(),s=r.radius||Fze,l=r.ignoreConnectors||Lze;WU.indexOf(a)===-1&&(a=WU[0]);var c=this.paper,u=c.model,f=u.getLinks();if(f.length===1)return YU(O7(t,e,n),o,a,s);var d=this.model,h=f.indexOf(d),g=c.options.defaultConnector||{},y=f.filter(function(k,m){var T=k.get("connector")||g;return Ln(l).includes(T.name)?!1:m>h?T.name!=="jumpover":!0}),S=y.map(function(k){return c.findViewByModel(k)}),v=O7(t,e,n),_=S.map(function(k){return k==null?[]:k===this?v:O7(k.sourcePoint,k.targetPoint,k.route)},this),x=v.reduce(function(k,m){var T=y.reduce(function(E,I,D){if(I!==d){var F=Mze(m,_[D]);E.push.apply(E,F)}return E},[]).sort(function(E,I){return qU(m.start,E)-qU(m.start,I)});return T.length>0?k.push.apply(k,Rze(m,T,o)):k.push(m),k},[]),C=YU(x,o,a,s);return i?C:C.serialize()},Bze=function(t,e,n=[],r={}){const{raw:i}=r;return UL(t,e,n,{cornerType:"point",raw:i})},jze=10,Hze=0,Uze=function(t,e,n=[],r={}){const{radius:i=jze,raw:o}=r;return UL(t,e,n,{cornerType:"cubic",cornerRadius:i,precision:Hze,raw:o})},Wze=function(t,e,n,r){var i=r&&r.raw,o;if(n&&n.length!==0){var a=[t].concat(n).concat([e]),s=nr.throughPoints(a);o=new xt(s)}else{o=new xt;var l;if(l=xt.createSegment("M",t),o.appendSegment(l),Math.abs(t.x-e.x)>=Math.abs(t.y-e.y)){var c=(t.x+e.x)/2;l=xt.createSegment("C",c,t.y,c,e.y,e.x,e.y),o.appendSegment(l)}else{var u=(t.y+e.y)/2;l=xt.createSegment("C",t.x,u,e.x,u,e.x,e.y),o.appendSegment(l)}}return i?o:o.serialize()},xl={AUTO:"auto",HORIZONTAL:"horizontal",VERTICAL:"vertical",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},Sa={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",AUTO:"auto",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},WL=function(t,e,n=[],r={},i){const o=!!r.raw,{direction:a=xl.AUTO,precision:s=3}=r,l={coeff:r.distanceCoefficient||.6,angleTangentCoefficient:r.angleTangentCoefficient||80,tau:r.tension||.5,sourceTangent:r.sourceTangent?new we(r.sourceTangent):null,targetTangent:r.targetTangent?new we(r.targetTangent):null,rotate:!!r.rotate};typeof r.sourceDirection=="string"?l.sourceDirection=r.sourceDirection:typeof r.sourceDirection=="number"?l.sourceDirection=new we(1,0).rotate(null,r.sourceDirection):l.sourceDirection=r.sourceDirection?new we(r.sourceDirection).normalize():null,typeof r.targetDirection=="string"?l.targetDirection=r.targetDirection:typeof r.targetDirection=="number"?l.targetDirection=new we(1,0).rotate(null,r.targetDirection):l.targetDirection=r.targetDirection?new we(r.targetDirection).normalize():null;const c=[t,...n,e].map(y=>new we(y));let u;if(l.sourceTangent)u=l.sourceTangent;else{const y=Xze(i,c,a,l),S=c[0].distance(c[1])*l.coeff,v=c[1].difference(c[0]).normalize(),_=CO(y,v);if(_>Math.PI/4){const x=S+(_-Math.PI/4)*l.angleTangentCoefficient;u=y.clone().scale(x,x)}else u=y.clone().scale(S,S)}let f;if(l.targetTangent)f=l.targetTangent;else{const y=Jze(i,c,a,l),S=c.length-1,v=c[S-1].distance(c[S])*l.coeff,_=c[S-1].difference(c[S]).normalize(),x=CO(y,_);if(x>Math.PI/4){const C=v+(x-Math.PI/4)*l.angleTangentCoefficient;f=y.clone().scale(C,C)}else f=y.clone().scale(v,v)}const h=Qze(c,u,f,l).map(y=>eVe(y,l)),g=new xt(h).round(s);return o?g:g.serialize()};WL.Directions=xl;WL.TangentDirections=Sa;function Gze(t,e,n){const{sourceBBox:r}=t;let i,o;if(!t.sourceView)r.x>e[1].x?i="right":i="left";else if(o=t.sourceView.model.angle(),n.rotate&&o){const s=t.sourceView.getNodeUnrotatedBBox(t.sourceView.el),l=e[0].clone();l.rotate(r.center(),o),i=s.sideNearestToPoint(l)}else i=r.sideNearestToPoint(e[0]);let a;switch(i){case"left":a=new we(-1,0);break;case"right":default:a=new we(1,0);break}return n.rotate&&o&&a.rotate(null,-o),a}function qze(t,e,n){const{targetBBox:r}=t;let i,o;if(!t.targetView)r.x>e[e.length-2].x?i="left":i="right";else if(o=t.targetView.model.angle(),n.rotate&&o){const s=t.targetView.getNodeUnrotatedBBox(t.targetView.el),l=e[e.length-1].clone();l.rotate(r.center(),o),i=s.sideNearestToPoint(l)}else i=r.sideNearestToPoint(e[e.length-1]);let a;switch(i){case"left":a=new we(-1,0);break;case"right":default:a=new we(1,0);break}return n.rotate&&o&&a.rotate(null,-o),a}function Yze(t,e,n){const{sourceBBox:r}=t;let i,o;if(!t.sourceView)r.y>e[1].y?i="bottom":i="top";else if(o=t.sourceView.model.angle(),n.rotate&&o){const s=t.sourceView.getNodeUnrotatedBBox(t.sourceView.el),l=e[0].clone();l.rotate(r.center(),o),i=s.sideNearestToPoint(l)}else i=r.sideNearestToPoint(e[0]);let a;switch(i){case"top":a=new we(0,-1);break;case"bottom":default:a=new we(0,1);break}return n.rotate&&o&&a.rotate(null,-o),a}function Kze(t,e,n){const{targetBBox:r}=t;let i,o;if(!t.targetView)r.y>e[e.length-2].y?i="top":i="bottom";else if(o=t.targetView.model.angle(),n.rotate&&o){const s=t.targetView.getNodeUnrotatedBBox(t.targetView.el),l=e[e.length-1].clone();l.rotate(r.center(),o),i=s.sideNearestToPoint(l)}else i=r.sideNearestToPoint(e[e.length-1]);let a;switch(i){case"top":a=new we(0,-1);break;case"bottom":default:a=new we(0,1);break}return n.rotate&&o&&a.rotate(null,-o),a}function KU(t,e,n){const{sourceBBox:r}=t;let i,o;if(!t.sourceView)i=r.sideNearestToPoint(e[1]);else if(o=t.sourceView.model.angle(),n.rotate&&o){const s=t.sourceView.getNodeUnrotatedBBox(t.sourceView.el),l=e[0].clone();l.rotate(r.center(),o),i=s.sideNearestToPoint(l)}else i=r.sideNearestToPoint(e[0]);let a;switch(i){case"top":a=new we(0,-1);break;case"bottom":a=new we(0,1);break;case"right":a=new we(1,0);break;case"left":a=new we(-1,0);break}return n.rotate&&o&&a.rotate(null,-o),a}function XU(t,e,n){const{targetBBox:r}=t;let i,o;if(!t.targetView)i=r.sideNearestToPoint(e[e.length-2]);else if(o=t.targetView.model.angle(),n.rotate&&o){const s=t.targetView.getNodeUnrotatedBBox(t.targetView.el),l=e[e.length-1].clone();l.rotate(r.center(),o),i=s.sideNearestToPoint(l)}else i=r.sideNearestToPoint(e[e.length-1]);let a;switch(i){case"top":a=new we(0,-1);break;case"bottom":a=new we(0,1);break;case"right":a=new we(1,0);break;case"left":a=new we(-1,0);break}return n.rotate&&o&&a.rotate(null,-o),a}function JU(t,e,n){return e[1].difference(e[0]).normalize()}function ZU(t,e,n){const r=e.length-1;return e[r-1].difference(e[r]).normalize()}function QU(t,e,n){const{sourceBBox:r}=t,i=r.center();return e[0].difference(i).normalize()}function eW(t,e,n){const{targetBBox:r}=t,i=r.center();return e[e.length-1].difference(i).normalize()}function Xze(t,e,n,r){if(r.sourceDirection)switch(r.sourceDirection){case Sa.UP:return new we(0,-1);case Sa.DOWN:return new we(0,1);case Sa.LEFT:return new we(-1,0);case Sa.RIGHT:return new we(1,0);case Sa.AUTO:return KU(t,e,r);case Sa.CLOSEST_POINT:return JU(t,e);case Sa.OUTWARDS:return QU(t,e);default:return r.sourceDirection}switch(n){case xl.HORIZONTAL:return Gze(t,e,r);case xl.VERTICAL:return Yze(t,e,r);case xl.CLOSEST_POINT:return JU(t,e);case xl.OUTWARDS:return QU(t,e);case xl.AUTO:default:return KU(t,e,r)}}function Jze(t,e,n,r){if(r.targetDirection)switch(r.targetDirection){case Sa.UP:return new we(0,-1);case Sa.DOWN:return new we(0,1);case Sa.LEFT:return new we(-1,0);case Sa.RIGHT:return new we(0,1);case Sa.AUTO:return XU(t,e,r);case Sa.CLOSEST_POINT:return ZU(t,e);case Sa.OUTWARDS:return eW(t,e);default:return r.targetDirection}switch(n){case xl.HORIZONTAL:return qze(t,e,r);case xl.VERTICAL:return Kze(t,e,r);case xl.CLOSEST_POINT:return ZU(t,e);case xl.OUTWARDS:return eW(t,e);case xl.AUTO:default:return XU(t,e,r)}}function Zze(t,e){const n=Math.cos(e),r=Math.sin(e),i=n*t.x-r*t.y,o=r*t.x+n*t.y;t.x=i,t.y=o}function CO(t,e){let n=t.dot(e)/(t.magnitude()*e.magnitude());return n<-1&&(n=-1),n>1&&(n=1),Math.acos(n)}function tW(t,e){return t.x*e.y-t.y*e.x}function Qze(t,e,n,r){const{tau:i,coeff:o}=r,a=[],s=[],l=[],c=t.length-1;for(let u=0;u<c;u++)a[u]=t[u].distance(t[u+1]);s[0]=e,s[c]=n;for(let u=1;u<c;u++){let f,d;u===1?f=t[u-1].clone().offset(s[u-1].x,s[u-1].y):f=t[u-1].clone(),u===c-1?d=t[u+1].clone().offset(s[u+1].x,s[u+1].y):d=t[u+1].clone();const h=f.difference(t[u]).normalize(),g=d.difference(t[u]).normalize(),y=CO(h,g);let S=(Math.PI-y)/2,v;const _=tW(h,g);let x;x=tW(t[u].difference(t[u+1]),t[u].difference(t[u-1])),_<0&&(S=-S),y<Math.PI/2&&(S<0&&x<0||S>0&&x>0)&&(S=S-Math.PI),v=g.clone(),Zze(v,S);const C=v.clone(),k=v.clone(),m=a[u-1]*o,T=a[u]*o;C.scale(m,m),k.scale(T,T),s[u]=[C,k]}for(let u=0;u<c;u++){let f,d;u===0?f=t[u+1].difference(s[u].x/i,s[u].y/i):f=t[u+1].difference(s[u][1].x/i,s[u][1].y/i),u===c-1?d=t[u].clone().offset(s[u+1].x/i,s[u+1].y/i):d=t[u].difference(s[u+1][0].x/i,s[u+1][0].y/i),l[u]=[f,t[u],t[u+1],d]}return l}function eVe(t,e){const{tau:n}=e,r=new we;r.x=t[1].x+(t[2].x-t[0].x)/(6*n),r.y=t[1].y+(t[2].y-t[0].y)/(6*n);const i=new we;return i.x=t[2].x+(t[3].x-t[1].x)/(6*n),i.y=t[2].y+(t[3].y-t[1].y)/(6*n),new nr(t[1],r,i,t[2])}const tVe=Object.freeze(Object.defineProperty({__proto__:null,curve:WL,jumpover:Vze,normal:Bze,rounded:Uze,smooth:Wze,straight:UL},Symbol.toStringTag,{value:"Module"})),rn={TOOLS:xn.Flags.TOOLS,RENDER:"RENDER",UPDATE:"UPDATE",LEGACY_TOOLS:"LEGACY_TOOLS",LABELS:"LABELS",VERTICES:"VERTICES",SOURCE:"SOURCE",TARGET:"TARGET",CONNECTOR:"CONNECTOR"},v1=xn.extend({className:function(){var t=xn.prototype.className.apply(this).split(" ");return t.push("link"),t.join(" ")},options:{shortLinkLength:105,doubleLinkTools:!1,longLinkLength:155,linkToolsOffset:40,doubleLinkToolsOffset:65,sampleInterval:50},_labelCache:null,_labelSelectors:null,_markerCache:null,_V:null,_dragData:null,metrics:null,decimalsRounding:2,initialize:function(){xn.prototype.initialize.apply(this,arguments),this._labelCache={},this._labelSelectors={},this._markerCache={},this._V={},this.cleanNodesCache()},presentationAttributes:{markup:[rn.RENDER],attrs:[rn.UPDATE],router:[rn.UPDATE],connector:[rn.CONNECTOR],smooth:[rn.UPDATE],manhattan:[rn.UPDATE],toolMarkup:[rn.LEGACY_TOOLS],labels:[rn.LABELS],labelMarkup:[rn.LABELS],vertices:[rn.VERTICES,rn.UPDATE],vertexMarkup:[rn.VERTICES],source:[rn.SOURCE,rn.UPDATE],target:[rn.TARGET,rn.UPDATE]},initFlag:[rn.RENDER,rn.SOURCE,rn.TARGET,rn.TOOLS],UPDATE_PRIORITY:1,confirmUpdate:function(t,e){if(e||(e={}),this.hasFlag(t,rn.SOURCE)){if(!this.updateEndProperties("source"))return t;t=this.removeFlag(t,rn.SOURCE)}if(this.hasFlag(t,rn.TARGET)){if(!this.updateEndProperties("target"))return t;t=this.removeFlag(t,rn.TARGET)}const{paper:n,sourceView:r,targetView:i}=this;if(n&&(r&&!n.isViewMounted(r)||i&&!n.isViewMounted(i)))return t;if(this.hasFlag(t,rn.RENDER))return this.render(),this.updateHighlighters(!0),this.updateTools(e),t=this.removeFlag(t,[rn.RENDER,rn.UPDATE,rn.VERTICES,rn.LABELS,rn.TOOLS,rn.LEGACY_TOOLS,rn.CONNECTOR]),t;let o=!1;this.hasFlag(t,rn.VERTICES)&&(this.renderVertexMarkers(),t=this.removeFlag(t,rn.VERTICES));const{model:a}=this,{attributes:s}=a;let l=this.hasFlag(t,rn.LABELS),c=this.hasFlag(t,rn.LEGACY_TOOLS);l&&(this.onLabelsChange(a,s.labels,e),t=this.removeFlag(t,rn.LABELS),o=!0),c&&(this.renderTools(),t=this.removeFlag(t,rn.LEGACY_TOOLS));const u=this.hasFlag(t,rn.UPDATE),f=this.hasFlag(t,rn.CONNECTOR);return(u||f)&&(u?e.translateBy&&a.isRelationshipEmbeddedIn(e.translateBy)?this.translate(e.tx,e.ty):this.update():(this.updatePath(),this.updateDOM()),this.updateTools(e),t=this.removeFlag(t,[rn.UPDATE,rn.TOOLS,rn.CONNECTOR]),l=!1,c=!1,o=!0),l&&this.updateLabelPositions(),c&&this.updateToolsPosition(),o&&this.updateHighlighters(),this.hasFlag(t,rn.TOOLS)&&(this.updateTools(e),t=this.removeFlag(t,rn.TOOLS)),t},requestConnectionUpdate:function(t){this.requestUpdate(this.getFlag(rn.UPDATE),t)},isLabelsRenderRequired:function(t={}){const e=this.model.previous("labels");if(!e)return!0;if("propertyPathArray"in t&&"propertyValue"in t){var n=t.propertyPathArray||[],r=n.length;if(r>1){var i=!!e[n[1]];if(i){if(r===2)return"markup"in Object(t.propertyValue);if(n[2]!=="markup")return!1}}}return!0},onLabelsChange:function(t,e,n){this.isLabelsRenderRequired(n)?this.renderLabels():this.updateLabels()},render:function(){return this.vel.empty(),this.unmountLabels(),this._V={},this.renderMarkup(),this.renderLabels(),this.update(),this},renderMarkup:function(){var t=this.model,e=t.get("markup")||t.markup;if(!e)throw new Error("dia.LinkView: markup required");if(Array.isArray(e))return this.renderJSONMarkup(e);if(typeof e=="string")return this.renderStringMarkup(e);throw new Error("dia.LinkView: invalid markup")},renderJSONMarkup:function(t){var e=this.parseDOMJSON(t,this.el);this.selectors=e.selectors,this.vel.append(e.fragment)},renderStringMarkup:function(t){var e=Ue(t);Array.isArray(e)||(e=[e]);for(var n=this._V,r=0,i=e.length;r<i;r++){var o=e[r],a=o.attr("class");a&&(a=yRe(a),n[zn.camelCase(a)]=o)}this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),this.vel.append(e)},_getLabelMarkup:function(t){if(t){if(Array.isArray(t))return this.parseDOMJSON(t,null);if(typeof t=="string")return this._getLabelStringMarkup(t);throw new Error("dia.linkView: invalid label markup")}},_getLabelStringMarkup:function(t){var e=Ue(t),n=document.createDocumentFragment();if(!Array.isArray(e))n.appendChild(e.node);else for(var r=0,i=e.length;r<i;r++){var o=e[r].node;n.appendChild(o)}return{fragment:n,selectors:{}}},_normalizeLabelMarkup:function(t){if(t){var e=t.fragment;if(!(t.fragment instanceof DocumentFragment)||!t.fragment.hasChildNodes())throw new Error("dia.LinkView: invalid label markup.");var n,r=e.childNodes;return r.length>1||r[0].nodeName.toUpperCase()!=="G"?n=Ue("g").append(e):n=Ue(r[0]),n.addClass("label"),{node:n.node,selectors:t.selectors}}},renderLabels:function(){var t=this._V,e=t.labels,n=this._labelCache={},r=this._labelSelectors={},i=this.model,o=i.attributes.labels||[],a=o.length;if(a===0)return e&&e.remove(),this;e?e.empty():(e=t.labels=Ue("g").addClass("labels"),this.options.labelsLayer&&(e.addClass(ac(Di(this,"className"))),e.attr("model-id",i.id)));for(var s=0;s<a;s++){var l=o[s],c=this._normalizeLabelMarkup(this._getLabelMarkup(l.markup)),u,f;if(c)u=c.node,f=c.selectors;else{var d=i._builtins.defaultLabel,h=this._normalizeLabelMarkup(this._getLabelMarkup(d.markup)),g=i._getDefaultLabel(),y=this._normalizeLabelMarkup(this._getLabelMarkup(g.markup)),S=y||h;u=S.node,f=S.selectors}u.setAttribute("label-idx",s),e.append(u),n[s]=u;var v=this.selector;if(f[v])throw new Error("dia.LinkView: ambiguous label root selector.");f[v]=u,r[s]=f}return e.parent()||this.mountLabels(),this.updateLabels(),this},mountLabels:function(){const{el:t,paper:e,model:n,_V:r,options:i}=this,{labels:o}=r;if(!o||!n.hasLabels())return;const{node:a}=o;i.labelsLayer?e.getLayerView(i.labelsLayer).insertSortedNode(a,n.get("z")):a.parentNode!==t&&t.appendChild(a)},unmountLabels:function(){const{options:t,_V:e}=this;if(!e)return;const{labels:n}=e;n&&t.labelsLayer&&n.remove()},findLabelNode:function(t,e){const n=this._labelCache[t];if(!n)return null;const r=this._labelSelectors[t],[i=null]=this.findBySelector(e,n,r);return i},_mergeLabelAttrs:function(t,e,n,r){return e===null?null:e===void 0?n===null?null:n===void 0?t?void 0:r:t?n:Ri({},r,n):t?Ri({},n,e):Ri({},r,n,e)},_mergeLabelSize:function(t,e){return t===null?null:t===void 0?e===null?null:e===void 0?void 0:e:Ri({},e,t)},updateLabels:function(){if(!this._V.labels)return this;for(var t=this.model,e=t.get("labels")||[],n=this.can("labelMove"),r=t._builtins.defaultLabel,i=r.attrs,o=t._getDefaultLabel(),a=o.markup,s=o.attrs,l=o.size,c=0,u=e.length;c<u;c++){var f=this._labelCache[c];f.setAttribute("cursor",n?"move":"default");var d=this._labelSelectors[c],h=e[c],g=h.markup,y=h.attrs,S=h.size,v=this._mergeLabelAttrs(g||a,y,s,i),_=this._mergeLabelSize(S,l);this.updateDOMSubtreeAttributes(f,v,{rootBBox:new lt(_),selectors:d})}return this},renderTools:function(){if(!this._V.linkTools)return this;var t=zn(this._V.linkTools.node).empty(),e=ma(this.model.get("toolMarkup")||this.model.toolMarkup),n=Ue(e());if(t.append(n.node),this._toolCache=n,this.options.doubleLinkTools){var r;this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup?(e=ma(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup),r=Ue(e())):r=n.clone(),t.append(r.node),this._tool2Cache=r}return this},renderVertexMarkers:function(){if(!this._V.markerVertices)return this;var t=zn(this._V.markerVertices.node).empty(),e=ma(this.model.get("vertexMarkup")||this.model.vertexMarkup);return this.model.vertices().forEach(function(n,r){t.append(Ue(e(Nt({idx:r},n))).node)}),this},renderArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;var t=zn(this._V.markerArrowheads.node);t.empty();var e=ma(this.model.get("arrowheadMarkup")||this.model.arrowheadMarkup);return this._V.sourceArrowhead=Ue(e({end:"source"})),this._V.targetArrowhead=Ue(e({end:"target"})),t.append(this._V.sourceArrowhead.node,this._V.targetArrowhead.node),this},removeRedundantLinearVertices:function(t){const n=this.model,r=n.vertices(),i=[this.sourceAnchor,...r,this.targetAnchor],o=i.length,a=new $r(i);a.simplify({threshold:.001});const s=a.points.map(c=>c.toJSON()),l=s.length;return o===l?0:(n.vertices(s.slice(1,l-1),t),o-l)},updateDefaultConnectionPath:function(){var t=this._V;t.connection&&t.connection.attr("d",this.getSerializedConnection()),t.connectionWrap&&t.connectionWrap.attr("d",this.getSerializedConnection()),t.markerSource&&t.markerTarget&&this._translateAndAutoOrientArrows(t.markerSource,t.markerTarget)},getEndView:function(t){switch(t){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("dia.LinkView: type parameter required.")}},getEndAnchor:function(t){switch(t){case"source":return new we(this.sourceAnchor);case"target":return new we(this.targetAnchor);default:throw new Error("dia.LinkView: type parameter required.")}},getEndConnectionPoint:function(t){switch(t){case"source":return new we(this.sourcePoint);case"target":return new we(this.targetPoint);default:throw new Error("dia.LinkView: type parameter required.")}},getEndMagnet:function(t){switch(t){case"source":var e=this.sourceView;if(!e)break;return this.sourceMagnet||e.el;case"target":var n=this.targetView;if(!n)break;return this.targetMagnet||n.el;default:throw new Error("dia.LinkView: type parameter required.")}return null},update:function(){return this.updateRoute(),this.updatePath(),this.updateDOM(),this},translate:function(t=0,e=0){const{route:n,path:r}=this;if(!n||!r)return;const i=new $r(n);i.translate(t,e),this.route=i.points,this._translateConnectionPoints(t,e),r.translate(t,e),this.updateDOM()},updateDOM(){const{el:t,model:e,selectors:n}=this;this.cleanNodesCache(),this.updateDOMSubtreeAttributes(t,e.attr(),{selectors:n}),this.updateDefaultConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.options.perpendicular=null},updateRoute:function(){const{model:t}=this,e=t.vertices(),n=this.findAnchors(e),r=this.sourceAnchor=n.source,i=this.targetAnchor=n.target,o=this.findRoute(e);this.route=o;var a=this.findConnectionPoints(o,r,i);this.sourcePoint=a.source,this.targetPoint=a.target},updatePath:function(){const{route:t,sourcePoint:e,targetPoint:n}=this,r=this.findMarkerPoints(t,e,n),i=this.findPath(t,r.source||e,r.target||n);this.path=i},findMarkerPoints:function(t,e,n){var r=t[0],i=t[t.length-1],o=this._markerCache,a,s;return this._V.markerSource&&(o.sourceBBox=o.sourceBBox||this._V.markerSource.getBBox(),a=we(e).move(r||n,o.sourceBBox.width*this._V.markerSource.scale().sx*-1).round()),this._V.markerTarget&&(o.targetBBox=o.targetBBox||this._V.markerTarget.getBBox(),s=we(n).move(i||e,o.targetBBox.width*this._V.markerTarget.scale().sx*-1).round()),o.sourcePoint=a||e.clone(),o.targetPoint=s||n.clone(),{source:a,target:s}},findAnchorsOrdered:function(t,e,n,r){var i,o,a,s,l=this.model,c=l.get(t),u=l.get(n),f=this.getEndView(t),d=this.getEndView(n),h=this.getEndMagnet(t),g=this.getEndMagnet(n);f?(e?a=new we(e):d?a=g:a=new we(u),i=this.getAnchor(c.anchor,f,h,a,t)):i=new we(c),d?(s=new we(r||i),o=this.getAnchor(u.anchor,d,g,s,n)):o=new we(u);var y={};return y[t]=i,y[n]=o,y},findAnchors:function(t){var e=this.model,n=t[0],r=t[t.length-1];return e.target().priority&&!e.source().priority?this.findAnchorsOrdered("target",r,"source",n):this.findAnchorsOrdered("source",n,"target",r)},findConnectionPoints:function(t,e,n){var r=t[0],i=t[t.length-1],o=this.model,a=o.get("source"),s=o.get("target"),l=this.sourceView,c=this.targetView,u=this.paper.options,f,d,h;if(l&&!l.isNodeConnection(this.sourceMagnet)){f=this.sourceMagnet||l.el;var g=a.connectionPoint||u.defaultConnectionPoint,y=r||n,S=new gt(y,e);h=this.getConnectionPoint(g,l,f,S,"source")}else h=e;var v;if(c&&!c.isNodeConnection(this.targetMagnet)){d=this.targetMagnet||c.el;var _=s.connectionPoint||u.defaultConnectionPoint,x=i||e,C=new gt(x,n);v=this.getConnectionPoint(_,c,d,C,"target")}else v=n;return{source:h,target:v}},getAnchor:function(t,e,n,r,i){var o=e.isNodeConnection(n),a=this.paper.options;if(t||(o?t=a.defaultLinkAnchor:a.perpendicularLinks||this.options.perpendicular?t={name:"perpendicular"}:t=a.defaultAnchor),!t)throw new Error("Anchor required.");var s;if(typeof t=="function")s=t;else{var l=t.name,c=o?"linkAnchorNamespace":"anchorNamespace";if(s=a[c][l],typeof s!="function")throw new Error("Unknown anchor: "+l)}var u=s.call(this,e,n,r,t.args||{},i,this);return u?u.round(this.decimalsRounding):new we},getConnectionPoint:function(t,e,n,r,i){var o,a=r.end,s=this.paper.options;if(typeof s.linkConnectionPoint=="function"){var l=n===e.el?void 0:n;if(o=s.linkConnectionPoint(this,e,l,r.start,i),o)return o}if(!t)return a;var c;if(typeof t=="function")c=t;else{var u=t.name;if(c=s.connectionPointNamespace[u],typeof c!="function")throw new Error("Unknown connection point: "+u)}return o=c.call(this,r,e,n,t.args||{},i,this),o?o.round(this.decimalsRounding):a},_translateConnectionPoints:function(t,e){var n=this._markerCache;n.sourcePoint.offset(t,e),n.targetPoint.offset(t,e),this.sourcePoint.offset(t,e),this.targetPoint.offset(t,e),this.sourceAnchor.offset(t,e),this.targetAnchor.offset(t,e)},_getDefaultLabelPositionProperty:function(){var t=this.model,e=t._builtins.defaultLabel,n=e.position,r=t._getDefaultLabel(),i=this._normalizeLabelPosition(r.position);return Ri({},n,i)},_normalizeLabelPosition:function(t){return typeof t=="number"?{distance:t,offset:null,angle:0,args:null}:t},_mergeLabelPositionProperty:function(t,e){return t===null?null:t===void 0?e===null?null:e:Ri({},e,t)},updateLabelPositions:function(){if(!this._V.labels)return this;var t=this.path;if(!t)return this;var e=this.model,n=e.get("labels")||[];if(!n.length)return this;for(var r=this._getDefaultLabelPositionProperty(),i=0,o=n.length;i<o;i++){var a=this._labelCache[i];if(a){var s=n[i],l=this._normalizeLabelPosition(s.position),c=this._mergeLabelPositionProperty(l,r),u=this._getLabelTransformationMatrix(c);a.setAttribute("transform",Ue.matrixToTransformString(u)),this._cleanLabelMatrices(i)}}return this},_cleanLabelMatrices:function(t){const{metrics:e,_labelSelectors:n}=this,r=n[t];if(r)for(let i in r){const{id:o}=r[i];o&&o in e&&delete e[o].magnetMatrix}},updateToolsPosition:function(){if(!this._V.linkTools)return this;var t="",e=this.options.linkToolsOffset,n=this.getConnectionLength();if(!Number.isNaN(n)){n<this.options.shortLinkLength&&(t="scale(.5)",e/=2);var r=this.getPointAtLength(e);if(this._toolCache.attr("transform","translate("+r.x+", "+r.y+") "+t),this.options.doubleLinkTools&&n>=this.options.longLinkLength){var i=this.options.doubleLinkToolsOffset||e;r=this.getPointAtLength(n-i),this._tool2Cache.attr("transform","translate("+r.x+", "+r.y+") "+t),this._tool2Cache.attr("visibility","visible")}else this.options.doubleLinkTools&&this._tool2Cache.attr("visibility","hidden")}return this},updateArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;if(zn.css(this._V.markerArrowheads.node,"display")==="none")return this;var t=this.getConnectionLength()<this.options.shortLinkLength?.5:1;return this._V.sourceArrowhead.scale(t),this._V.targetArrowhead.scale(t),this._translateAndAutoOrientArrows(this._V.sourceArrowhead,this._V.targetArrowhead),this},updateEndProperties:function(t){const{model:e,paper:n}=this,r=`${t}View`,i=e.get(t),o=i&&i.id;if(!o)return this[r]=null,this.updateEndMagnet(t),!0;const a=n.getModelById(o);if(!a)throw new Error("LinkView: invalid "+t+" cell.");const s=a.findView(n);return s?(this[r]=s,this.updateEndMagnet(t),!0):!1},updateEndMagnet:function(t){const e=`${t}Magnet`,n=this.getEndView(t);if(n){let r=n.getMagnetFromLinkEnd(this.model.get(t));r===n.el&&(r=null),this[e]=r}else this[e]=null},_translateAndAutoOrientArrows:function(t,e){var n=Ln(this.route);t&&t.translateAndAutoOrient(this.sourcePoint,n[0]||this.targetPoint,this.paper.cells),e&&e.translateAndAutoOrient(this.targetPoint,n[n.length-1]||this.sourcePoint,this.paper.cells)},_getLabelPositionProperty:function(t){return this.model.label(t).position||{}},_getLabelPositionAngle:function(t){var e=this._getLabelPositionProperty(t);return e.angle||0},_getLabelPositionArgs:function(t){var e=this._getLabelPositionProperty(t);return e.args},_getDefaultLabelPositionArgs:function(){var t=this.model._getDefaultLabel(),e=t.position||{};return e.args},_mergeLabelPositionArgs:function(t,e){return t===null?null:t===void 0?e===null?null:e:Ri({},e,t)},addLabel:function(t,e,n,r){var i,o,a=0,s;typeof t!="number"?(i=t.x,o=t.y,typeof e=="number"?(a=e,s=n):s=e):(i=t,o=e,typeof n=="number"?(a=n,s=r):s=n);var l=this._getDefaultLabelPositionArgs(),c=s,u=this._mergeLabelPositionArgs(c,l),f={position:this.getLabelPosition(i,o,a,u)},d=-1;return this.model.insertLabel(d,f,s),d},addVertex:function(t,e,n){var r=typeof t!="number",i=r?t.x:t,o=r?t.y:e,a=r?e:n,s={x:i,y:o},l=this.getVertexIndex(i,o);return this.model.insertVertex(l,s,a),l},sendToken:function(t,e,n){function r(f,d){return function(){f.remove(),typeof d=="function"&&d()}}var i,o,a;Jn(e)?(i=e.duration,o=e.direction==="reverse",a=e.connection):(i=e,o=!1,a=null),i=i||1e3;var s={dur:i+"ms",repeatCount:1,calcMode:"linear",fill:"freeze"};o&&(s.keyPoints="1;0",s.keyTimes="0;1");var l=Ue(t),c;if(typeof a=="string")c=this.findBySelector(a,this.el,this.selectors)[0];else{var u=this._V;c=u.connection?u.connection.node:this.el.querySelector("path")}if(!(c instanceof SVGPathElement))throw new Error("dia.LinkView: token animation requires a valid connection path.");l.appendTo(this.paper.cells).animateAlongPath(s,c),setTimeout(r(l,n),i)},findRoute:function(t){t||(t=[]);var e=this.paper.options.routerNamespace||Pze,n=this.model.router(),r=this.paper.options.defaultRouter;if(!n)if(r)n=r;else return t.map(we);var i=br(n)?n:e[n.name];if(!br(i))throw new Error('dia.LinkView: unknown router: "'+n.name+'".');var o=n.args||{},a=i.call(this,t,o,this);return a||t.map(we)},findPath:function(t,e,n){var r=this.paper.options.connectorNamespace||tVe,i=this.model.connector(),o=this.paper.options.defaultConnector;i||(i=o||{});var a=br(i)?i:r[i.name];if(!br(a))throw new Error('dia.LinkView: unknown connector: "'+i.name+'".');var s=Uc(i.args||{});s.raw=!0;var l=a.call(this,e,n,t,s,this);return typeof l=="string"&&(l=new xt(Ue.normalizePathData(l))),l},getConnection:function(){var t=this.path;return t?t.clone():null},getSerializedConnection:function(){var t=this.path;if(!t)return null;var e=this.metrics;if(e.hasOwnProperty("data"))return e.data;var n=t.serialize();return e.data=n,n},getConnectionSubdivisions:function(){var t=this.path;if(!t)return null;var e=this.metrics;if(e.hasOwnProperty("segmentSubdivisions"))return e.segmentSubdivisions;var n=t.getSegmentSubdivisions();return e.segmentSubdivisions=n,n},getConnectionLength:function(){var t=this.path;if(!t)return 0;var e=this.metrics;if(e.hasOwnProperty("length"))return e.length;var n=t.length({segmentSubdivisions:this.getConnectionSubdivisions()});return e.length=n,n},getPointAtLength:function(t){var e=this.path;return e?e.pointAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getPointAtRatio:function(t){var e=this.path;return e?(Eo(t)&&(t=parseFloat(t)/100),e.pointAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()})):null},getTangentAtLength:function(t){var e=this.path;return e?e.tangentAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getTangentAtRatio:function(t){var e=this.path;return e?e.tangentAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPoint:function(t){var e=this.path;return e?e.closestPoint(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointLength:function(t){var e=this.path;return e?e.closestPointLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointRatio:function(t){var e=this.path;return e?e.closestPointNormalizedLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getLabelPosition:function(t,e,n,r){var i={},o=0,a;typeof n=="number"?(o=n,a=r):a=n,a&&(i.args=a);var s=!(a&&a.absoluteDistance),l=a&&a.absoluteDistance&&a.reverseDistance,c=a&&a.absoluteOffset,u=this.path,f={segmentSubdivisions:this.getConnectionSubdivisions()},d=new we(t,e),h=u.closestPointT(d,f),g=u.lengthAtT(h,f);s&&(g=g/this.getConnectionLength()||0),l&&(g=-1*(this.getConnectionLength()-g)||1),i.distance=g;var y;c||(y=u.tangentAtT(h));var S;if(y)S=y.pointOffset(d);else{var v=u.pointAtT(h),_=d.difference(v);S={x:_.x,y:_.y}}return i.offset=S,i.angle=o,i},_getLabelTransformationMatrix:function(t){var e,n=0,r={};if(typeof t=="number")e=t;else if(typeof t.distance=="number")r=t.args||{},e=t.distance,n=t.angle||0;else throw new Error("dia.LinkView: invalid label position distance.");var i=e>0&&e<=1,o=0,a={x:0,y:0};if(t.offset){var s=t.offset;typeof s=="number"&&(o=s),s.x&&(a.x=s.x),s.y&&(a.y=s.y)}var l=a.x!==0||a.y!==0||o===0,c=r.keepGradient,u=r.ensureLegibility,f=this.path,d={segmentSubdivisions:this.getConnectionSubdivisions()},h=i?e*this.getConnectionLength():e,g=f.tangentAtLength(h,d),y,S=n;if(g){if(l)y=g.start.clone(),y.offset(a);else{var v=g.clone();v.rotate(g.start,-90),v.setLength(o),y=v.end}c&&(S=g.angle()+n,u&&(S=bu((S+90)%180-90)))}else y=f.start.clone(),l&&y.offset(a);return Ue.createSVGMatrix().translate(y.x,y.y).rotate(S)},getLabelCoordinates:function(t){var e=this._getLabelTransformationMatrix(t);return new we(e.e,e.f)},getVertexIndex:function(t,e){for(var n=this.model,r=n.vertices(),i=this.getClosestPointLength(new we(t,e)),o=0,a=r.length;o<a;o++){var s=r[o],l=this.getClosestPointLength(s);if(i<l)break}return o},notifyPointerdown(t,e,n){xn.prototype.pointerdown.call(this,t,e,n),this.notify("link:pointerdown",t,e,n)},notifyPointermove(t,e,n){xn.prototype.pointermove.call(this,t,e,n),this.notify("link:pointermove",t,e,n)},notifyPointerup(t,e,n){this.notify("link:pointerup",t,e,n),xn.prototype.pointerup.call(this,t,e,n)},pointerdblclick:function(t,e,n){xn.prototype.pointerdblclick.apply(this,arguments),this.notify("link:pointerdblclick",t,e,n)},pointerclick:function(t,e,n){xn.prototype.pointerclick.apply(this,arguments),this.notify("link:pointerclick",t,e,n)},contextmenu:function(t,e,n){xn.prototype.contextmenu.apply(this,arguments),this.notify("link:contextmenu",t,e,n)},pointerdown:function(t,e,n){this.notifyPointerdown(t,e,n);var r=t.target.getAttribute("class");switch(r){case"marker-vertex":this.dragVertexStart(t,e,n);return;case"marker-vertex-remove":case"marker-vertex-remove-area":this.dragVertexRemoveStart(t,e,n);return;case"marker-arrowhead":this.dragArrowheadStart(t,e,n);return;case"connection":case"connection-wrap":this.dragConnectionStart(t,e,n);return;case"marker-source":case"marker-target":return}this.dragStart(t,e,n)},pointermove:function(t,e,n){var r=this._dragData;r&&this.eventData(t,r);var i=this.eventData(t);switch(i.action){case"vertex-move":this.dragVertex(t,e,n);break;case"label-move":this.dragLabel(t,e,n);break;case"arrowhead-move":this.dragArrowhead(t,e,n);break;case"move":this.drag(t,e,n);break}r&&Nt(r,this.eventData(t)),this.notifyPointermove(t,e,n)},pointerup:function(t,e,n){var r=this._dragData;r&&(this.eventData(t,r),this._dragData=null);var i=this.eventData(t);switch(i.action){case"vertex-move":this.dragVertexEnd(t,e,n);break;case"label-move":this.dragLabelEnd(t,e,n);break;case"arrowhead-move":this.dragArrowheadEnd(t,e,n);break;case"move":this.dragEnd(t,e,n)}this.notifyPointerup(t,e,n),this.checkMouseleave(t)},mouseover:function(t){xn.prototype.mouseover.apply(this,arguments),this.notify("link:mouseover",t)},mouseout:function(t){xn.prototype.mouseout.apply(this,arguments),this.notify("link:mouseout",t)},mouseenter:function(t){xn.prototype.mouseenter.apply(this,arguments),this.notify("link:mouseenter",t)},mouseleave:function(t){xn.prototype.mouseleave.apply(this,arguments),this.notify("link:mouseleave",t)},mousewheel:function(t,e,n,r){xn.prototype.mousewheel.apply(this,arguments),this.notify("link:mousewheel",t,e,n,r)},onevent:function(t,e,n,r){var i=Ue(t.target).findParentByClass("link-tool",this.el);if(i){if(t.stopPropagation(),this.can("useLinkTools"))if(e==="remove"){this.model.remove({ui:!0});return}else this.notify(e,t,n,r);this.notifyPointerdown(t,n,r),this.paper.delegateDragEvents(this,t.data)}else xn.prototype.onevent.apply(this,arguments)},onlabel:function(t,e,n){this.notifyPointerdown(t,e,n),this.dragLabelStart(t,e,n);var r=this.eventData(t).stopPropagation;r&&t.stopPropagation()},dragConnectionStart:function(t,e,n){if(this.can("vertexAdd")){var r=this.addVertex({x:e,y:n},{ui:!0});this.eventData(t,{action:"vertex-move",vertexIdx:r})}},dragLabelStart:function(t,e,n){if(this.can("labelMove")){if(this.isDefaultInteractionPrevented(t))return;var r=t.currentTarget,i=parseInt(r.getAttribute("label-idx"),10),o=this._getDefaultLabelPositionProperty(),a=this._normalizeLabelPosition(this._getLabelPositionProperty(i)),s=this._mergeLabelPositionProperty(a,o),l=this.getLabelCoordinates(s),c=l.x-e,u=l.y-n,f=this._getLabelPositionAngle(i),d=this._getLabelPositionArgs(i),h=this._getDefaultLabelPositionArgs(),g=this._mergeLabelPositionArgs(d,h);this.eventData(t,{action:"label-move",labelIdx:i,dx:c,dy:u,positionAngle:f,positionArgs:g,stopPropagation:!0})}else this.eventData(t,{stopPropagation:!0});this.paper.delegateDragEvents(this,t.data)},dragVertexStart:function(t,e,n){if(this.can("vertexMove")){var r=t.target,i=parseInt(r.getAttribute("idx"),10);this.eventData(t,{action:"vertex-move",vertexIdx:i})}},dragVertexRemoveStart:function(t,e,n){if(this.can("vertexRemove")){var r=t.target,i=parseInt(r.getAttribute("idx"),10);this.model.removeVertex(i)}},dragArrowheadStart:function(t,e,n){if(this.can("arrowheadMove")){var r=t.target,i=r.getAttribute("end"),o=this.startArrowheadMove(i,{ignoreBackwardsCompatibility:!0});this.eventData(t,o)}},dragStart:function(t,e,n){this.isDefaultInteractionPrevented(t)||this.can("linkMove")&&this.eventData(t,{action:"move",dx:e,dy:n})},dragLabel:function(t,e,n){var r=this.eventData(t),i={position:this.getLabelPosition(e+r.dx,n+r.dy,r.positionAngle,r.positionArgs)};this.paper.options.snapLabels&&delete i.position.offset;const o={ui:!0};this.paper.isAsync()&&t.type==="touchmove"&&(o.async=!1),this.model.label(r.labelIdx,i,o)},dragVertex:function(t,e,n){var r=this.eventData(t);this.model.vertex(r.vertexIdx,{x:e,y:n},{ui:!0})},dragArrowhead:function(t,e,n){this.paper.options.snapLinks?!this._snapArrowhead(t,e,n)&&this.paper.options.snapLinksSelf&&this._snapArrowheadSelf(t,e,n):this.paper.options.snapLinksSelf?this._snapArrowheadSelf(t,e,n):this._connectArrowhead(this.getEventTarget(t),e,n,this.eventData(t))},drag:function(t,e,n){var r=this.eventData(t);this.model.translate(e-r.dx,n-r.dy,{ui:!0}),this.eventData(t,{dx:e,dy:n})},dragLabelEnd:function(){},dragVertexEnd:function(){},dragArrowheadEnd:function(t,e,n){var r=this.eventData(t),i=this.paper;i.options.snapLinks?this._snapArrowheadEnd(r):this._connectArrowheadEnd(r,e,n),i.linkAllowed(this)?(this._finishEmbedding(r),this._notifyConnectEvent(r,t)):this._disallow(r),this._afterArrowheadMove(r)},dragEnd:function(){},_disallow:function(t){switch(t.whenNotAllowed){case"remove":this.model.remove({ui:!0});break;case"revert":default:this.model.set(t.arrowhead,t.initialEnd,{ui:!0});break}},_finishEmbedding:function(t){this.paper.options.embeddingMode&&this.model.reparent()&&(t.z=null)},_notifyConnectEvent:function(t,e){var n=t.arrowhead,r=t.initialEnd,i=this.model.prop(n),o=i&&!Qg.endsEqual(r,i);if(o){var a=this.paper;r.id&&this.notify("link:disconnect",e,a.findViewByModel(r.id),t.initialMagnet,n),i.id&&this.notify("link:connect",e,a.findViewByModel(i.id),t.magnetUnderPointer,n)}},_snapToPoints:function(t,e,n){let r=null,i=1/0,o=null,a=1/0,s=t.x,l=t.y;for(let c=0;c<e.length;c++){const u=Math.abs(e[c].x-t.x);u<i&&(i=u,r=e[c]);const f=Math.abs(e[c].y-t.y);f<a&&(a=f,o=e[c])}return i<n&&(s=r.x),a<n&&(l=o.y),{x:s,y:l}},_snapArrowheadSelf:function(t,e,n){const{paper:r,model:i}=this,{snapLinksSelf:o}=r.options,a=this.eventData(t),s=o.radius||20,l=this.getEndAnchor(a.arrowhead==="source"?"target":"source"),c=i.vertices(),u=[l,...c],f=this._snapToPoints({x:e,y:n},u,s);this._connectArrowhead(document.elementFromPoint(f.x,f.y),f.x,f.y,this.eventData(t))},_snapArrowhead:function(t,e,n){const{paper:r}=this,{snapLinks:i,connectionStrategy:o}=r.options,a=this.eventData(t);let s=!1;var l=i.radius||50,c=r.findViewsInArea({x:e-l,y:n-l,width:2*l,height:2*l}),u=a.closestView||null,f=a.closestMagnet||null,d=a.magnetProxy||null;a.closestView=a.closestMagnet=a.magnetProxy=null;var h=Number.MAX_VALUE,g=new we(e,n);c.forEach(function(k){const m=[];k.el.getAttribute("magnet")!=="false"&&m.push({bbox:k.model.getBBox(),magnet:k.el}),k.$("[magnet]").toArray().forEach(T=>{m.push({bbox:k.getNodeBBox(T),magnet:T})}),m.forEach(T=>{const{magnet:E,bbox:I}=T,D=I.center().squaredDistance(g);D<h&&(f===E||r.options.validateConnection.apply(r,a.validateConnectionArgs(k,k.el===E?null:E)))&&(h=D,a.closestView=k,a.closestMagnet=E)})},this);var y,S=null,v=a.closestView,_=a.closestMagnet;_&&(S=a.magnetProxy=v.findProxyNode(_,"highlighter"));var x=a.arrowhead,C=f!==_;if(u&&C&&u.unhighlight(d,{connecting:!0,snapping:!0}),v){const{prevEnd:k,prevX:m,prevY:T}=a;if(a.prevX=e,a.prevY=n,s=!0,!C&&(typeof o!="function"||m===e&&T===n)||(y=v.getLinkEnd(_,e,n,this.model,x),!C&&vv(k,y)))return s;a.prevEnd=y,C&&v.highlight(S,{connecting:!0,snapping:!0})}else y={x:e,y:n};return this.model.set(x,y||{x:e,y:n},{ui:!0}),u&&this.notify("link:snap:disconnect",t,u,f,x),v&&this.notify("link:snap:connect",t,v,_,x),s},_snapArrowheadEnd:function(t){var e=t.closestView,n=t.closestMagnet;e&&n&&(e.unhighlight(t.magnetProxy,{connecting:!0,snapping:!0}),t.magnetUnderPointer=e.findMagnet(n)),t.closestView=t.closestMagnet=null},_connectArrowhead:function(t,e,n,r){const{paper:i,model:o}=this;if(r.eventTarget!==t){r.magnetProxy&&r.viewUnderPointer.unhighlight(r.magnetProxy,{connecting:!0});const a=r.viewUnderPointer=i.findView(t);if(a){const s=r.magnetUnderPointer=a.findMagnet(t),l=r.magnetProxy=a.findProxyNode(s,"highlighter");s&&this.paper.options.validateConnection.apply(i,r.validateConnectionArgs(a,s))?l&&a.highlight(l,{connecting:!0}):(r.magnetUnderPointer=null,r.magnetProxy=null)}else r.magnetUnderPointer=null,r.magnetProxy=null}r.eventTarget=t,o.set(r.arrowhead,{x:e,y:n},{ui:!0})},_connectArrowheadEnd:function(t={},e,n){const{model:r}=this,{viewUnderPointer:i,magnetUnderPointer:o,magnetProxy:a,arrowhead:s}=t;if(!o||!a||!i)return;i.unhighlight(a,{connecting:!0});const l=i.getLinkEnd(o,e,n,r,s);r.set(s,l,{ui:!0})},_beforeArrowheadMove:function(t){t.z=this.model.get("z"),this.model.toFront();var e=this.el.style;t.pointerEvents=e.pointerEvents,e.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets(t)},_afterArrowheadMove:function(t){t.z!==null&&(this.model.set("z",t.z,{ui:!0}),t.z=null),this.el.style.pointerEvents=t.pointerEvents,this.paper.options.markAvailable&&this._unmarkAvailableMagnets(t)},_createValidateConnectionArgs:function(t){var e=[];e[4]=t,e[5]=this;var n,r=0,i=0;t==="source"?(r=2,n="target"):(i=2,n="source");var o=this.model.get(n);if(o.id){var a=e[r]=this.paper.findViewByModel(o.id),s=a.getMagnetFromLinkEnd(o);s===a.el&&(s=void 0),e[r+1]=s}function l(c,u){return e[i]=c,e[i+1]=c.el===u?void 0:u,e}return l},_markAvailableMagnets:function(t){function e(f,d){var h=f.paper,g=h.options.validateConnection;return g.apply(h,this.validateConnectionArgs(f,d))}var n=this.paper,r=n.model.getCells();t.marked={};for(var i=0,o=r.length;i<o;i++){var a=r[i].findView(n);if(a){var s=Array.prototype.slice.call(a.el.querySelectorAll("[magnet]"));a.el.getAttribute("magnet")!=="false"&&s.push(a.el);var l=s.filter(e.bind(t,a));if(l.length>0){for(var c=0,u=l.length;c<u;c++)a.highlight(l[c],{magnetAvailability:!0});a.highlight(null,{elementAvailability:!0}),t.marked[a.model.id]=l}}}},_unmarkAvailableMagnets:function(t){for(var e=Object.keys(t.marked),n,r,i=0,o=e.length;i<o;i++){n=e[i],r=t.marked[n];var a=this.paper.findViewByModel(n);if(a){for(var s=0,l=r.length;s<l;s++)a.unhighlight(r[s],{magnetAvailability:!0});a.unhighlight(null,{elementAvailability:!0})}}t.marked=null},startArrowheadMove:function(t,e){e||(e={});var n={action:"arrowhead-move",arrowhead:t,whenNotAllowed:e.whenNotAllowed||"revert",initialMagnet:this[t+"Magnet"]||(this[t+"View"]?this[t+"View"].el:null),initialEnd:Uc(this.model.get(t)),validateConnectionArgs:this._createValidateConnectionArgs(t)};return this._beforeArrowheadMove(n),e.ignoreBackwardsCompatibility!==!0&&(this._dragData=n),n},onMount:function(){xn.prototype.onMount.apply(this,arguments),this.mountLabels()},onDetach:function(){xn.prototype.onDetach.apply(this,arguments),this.unmountLabels()},onRemove:function(){xn.prototype.onRemove.apply(this,arguments),this.unmountLabels()}},{Flags:rn});Object.defineProperty(v1.prototype,"sourceBBox",{enumerable:!0,get:function(){var t=this.sourceView;if(!t){var e=this.model.source();return new lt(e.x,e.y)}var n=this.sourceMagnet;return t.isNodeConnection(n)?new lt(this.sourceAnchor):t.getNodeBBox(n||t.el)}});Object.defineProperty(v1.prototype,"targetBBox",{enumerable:!0,get:function(){var t=this.targetView;if(!t){var e=this.model.target();return new lt(e.x,e.y)}var n=this.targetMagnet;return t.isNodeConnection(n)?new lt(this.targetAnchor):t.getNodeBBox(n||t.el)}});const nVe=sc.extend({tagName:"path",className:"highlight-stroke",attributes:{"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},options:{padding:3,rx:0,ry:0,useFirstSubpath:!1,attrs:{"stroke-width":3,stroke:"#FEB663"}},getPathData(t,e){const{options:n}=this,{useFirstSubpath:r}=n;let i;try{const o=Ue(e);if(i=o.convertToPathData().trim(),o.tagName()==="PATH"&&r){const a=i.search(/.M/i)+1;a>0&&(i=i.substr(0,a))}}catch{const a=t.getNodeBoundingRect(e);i=Ue.rectToPath(Nt({},n,a.toJSON()))}return i},highlightConnection(t){this.vel.attr("d",t.getSerializedConnection())},highlightNode(t,e){const{vel:n,options:r}=this,{padding:i,layer:o}=r;let a=this.getNodeMatrix(t,e);if(i){!o&&e===t.el&&n.remove();let s=t.getNodeBoundingRect(e);const l=s.x+s.width/2,c=s.y+s.height/2;s=Ue.transformRect(s,a);const u=Math.max(s.width,1),f=Math.max(s.height,1),d=(u+i)/u,h=(f+i)/f,g=Ue.createSVGMatrix({a:d,b:0,c:0,d:h,e:l-d*l,f:c-h*c});a=a.multiply(g)}n.attr({d:this.getPathData(t,e),transform:Ue.matrixToTransformString(a)})},highlight(t,e){const{vel:n,options:r}=this;n.attr(r.attrs),t.isNodeConnection(e)?this.highlightConnection(t):this.highlightNode(t,e)}}),nW=20;function rVe(t,e){const n=t.children();for(;n.length>0;){const r=n.shift();e(r)&&n.push(...r.children())}}const iVe=sc.extend({tagName:"rect",className:"highlight-mask",attributes:{"pointer-events":"none"},options:{padding:3,maskClip:nW,deep:!1,attrs:{stroke:"#FEB663","stroke-width":3,"stroke-linecap":"butt","stroke-linejoin":"miter"}},VISIBLE:"white",INVISIBLE:"black",MASK_ROOT_ATTRIBUTE_BLACKLIST:["marker-start","marker-end","marker-mid","transform","stroke-dasharray","class"],MASK_CHILD_ATTRIBUTE_BLACKLIST:["stroke","fill","stroke-width","stroke-opacity","stroke-dasharray","fill-opacity","marker-start","marker-end","marker-mid","class"],MASK_REPLACE_TAGS:["FOREIGNOBJECT","IMAGE","USE","TEXT","TSPAN","TEXTPATH"],MASK_REMOVE_TAGS:["TEXT","TSPAN","TEXTPATH"],transformMaskChild(t,e){const{MASK_CHILD_ATTRIBUTE_BLACKLIST:n,MASK_REPLACE_TAGS:r,MASK_REMOVE_TAGS:i}=this,o=e.tagName();if(!Ue.isSVGGraphicsElement(e)||i.includes(o))return e.remove(),!1;if(r.includes(o)){const a=t.vel.findOne(`#${e.id}`);if(a){const{node:s}=a;let l=t.getNodeBoundingRect(s);t.model.isElement()&&(l=Ue.transformRect(l,t.getNodeMatrix(s)));const c=Ue("rect",l.toJSON()),{x:u,y:f}=l.center(),{angle:d,cx:h=u,cy:g=f}=a.rotate();d&&c.rotate(d,h,g),e.parent().append(c)}return e.remove(),!1}return n.forEach(a=>{a==="fill"&&e.attr("fill")==="none"||e.removeAttr(a)}),!0},transformMaskRoot(t,e){const{MASK_ROOT_ATTRIBUTE_BLACKLIST:n}=this;n.forEach(r=>{e.removeAttr(r)})},getMaskShape(t,e){const{options:n,MASK_REPLACE_TAGS:r}=this,{deep:i}=n,o=e.tagName();let a;if(o==="G"){if(!i)return null;a=e.clone(),rVe(a,s=>this.transformMaskChild(t,s))}else{if(r.includes(o))return null;a=e.clone()}return this.transformMaskRoot(t,a),a},getMaskId(){return`highlight-mask-${this.cid}`},getMask(t,e){const{VISIBLE:n,INVISIBLE:r,options:i}=this,{padding:o,attrs:a}=i,s="stroke-width"in a?a["stroke-width"]:1,l=e.attr("fill")!=="none";let c=parseFloat(e.attr("stroke-width"));isNaN(c)&&(c=1);const u=c+o*2,f=u+s*2;let d=this.getMaskShape(t,e);if(!d){const h=t.getNodeBoundingRect(e.node);h.inflate(h.width?0:.5,h.height?0:.5),d=Ue("rect",h.toJSON())}return d.attr(a),Ue("mask",{id:this.getMaskId()}).append([d.clone().attr({fill:l?n:"none",stroke:n,"stroke-width":f}),d.clone().attr({fill:l?r:"none",stroke:r,"stroke-width":u})])},removeMask(t){const e=t.svg.getElementById(this.getMaskId());e&&t.defs.removeChild(e)},addMask(t,e){t.defs.appendChild(e.node)},highlight(t,e){const{options:n,vel:r}=this,{padding:i,attrs:o,maskClip:a=nW,layer:s}=n,l="stroke"in o?o.stroke:"#000000";!s&&e===t.el&&r.remove();const c=t.getNodeBoundingRect(e).inflate(i+a),u=this.getNodeMatrix(t,e),f=this.getMask(t,Ue(e));this.addMask(t.paper,f),r.attr(c.toJSON()),r.attr({transform:Ue.matrixToTransformString(u),mask:`url(#${f.id})`,fill:l})},unhighlight(t){this.removeMask(t.paper)}}),oVe=sc.extend({UPDATABLE:!1,MOUNTABLE:!1,opacityClassName:ac("highlight-opacity"),highlight:function(t,e){Ue(e).addClass(this.opacityClassName)},unhighlight:function(t,e){Ue(e).removeClass(this.opacityClassName)}}),rW=ac("highlighted"),aVe=sc.extend({UPDATABLE:!1,MOUNTABLE:!1,options:{className:rW},highlight:function(t,e){Ue(e).addClass(this.options.className)},unhighlight:function(t,e){Ue(e).removeClass(this.options.className)}},{className:rW}),I7={ROW:"row",COLUMN:"column"},sVe=sc.extend({tagName:"g",MOUNTABLE:!0,UPDATE_ATTRIBUTES:function(){return[this.options.attribute]},_prevItems:null,highlight(t,e){const n=t.model,{attribute:r,size:i=20,gap:o=5,direction:a=I7.ROW}=this.options;if(!r)throw new Error("List: attribute is required");const s=typeof i=="number"?{width:i,height:i}:i,l=a===I7.ROW,c=l?s.width:s.height;let u=n.get(r);Array.isArray(u)||(u=[]);const f=this._prevItems||[],d=u.map((S,v)=>vv(f[v],u[v]));if(f.length!==u.length||d.some(S=>!S)){const S=this.vel.children(),v=u.map((_,x)=>{const C=x in S?S[x].node:null;if(d[x])return C;const k=this.createListItem(_,s,C);if(!k)return null;if(!(k instanceof SVGElement))throw new Error("List: item must be an SVGElement");k.dataset.index=x,k.dataset.attribute=r;const m=x*(c+o);return k.setAttribute("transform",l?`translate(${m}, 0)`:`translate(0, ${m})`),k});this.vel.empty().append(v),this._prevItems=u}const h=u.length,g=h===0?0:h*c+(h-1)*o,y=l?{width:g,height:s.height}:{width:s.width,height:g};this.position(n,y)},position(t,e){const{vel:n,options:r}=this,{margin:i=5,position:o="top-left"}=r,{width:a,height:s}=t.size(),{left:l,right:c,top:u,bottom:f}=Fg(i),d=new lt(l,u,a-(l+c),s-(u+f));let{x:h,y:g}=Ese(d,o);switch(o){case Si.CENTER:case Si.TOP:case Si.BOTTOM:{h-=e.width/2;break}case Si.RIGHT:case Si.BOTTOM_RIGHT:case Si.TOP_RIGHT:{h-=e.width;break}}switch(o){case Si.CENTER:case Si.RIGHT:case Si.LEFT:{g-=e.height/2;break}case Si.BOTTOM:case Si.BOTTOM_RIGHT:case Si.BOTTOM_LEFT:{g-=e.height;break}}n.attr("transform",`translate(${h}, ${g})`)}},{Directions:I7,Positions:Si}),lVe=Object.freeze(Object.defineProperty({__proto__:null,addClass:aVe,list:sVe,mask:iVe,opacity:oVe,stroke:nVe},Symbol.toStringTag,{value:"Module"}));function cVe(t,e,n,r){var i="ratio"in r?r.ratio:.5;return t.getPointAtRatio(i)}function uVe(t,e,n,r){var i="length"in r?r.length:20;return t.getPointAtLength(i)}function fVe(t,e,n,r){var i=1e6,o=t.getConnection(),a=t.getConnectionSubdivisions(),s=new gt(n.clone().offset(0,i),n.clone().offset(0,-i)),l=new gt(n.clone().offset(i,0),n.clone().offset(-i,0)),c=s.intersect(o,{segmentSubdivisions:a}),u=l.intersect(o,{segmentSubdivisions:a}),f=[];return c&&Array.prototype.push.apply(f,c),u&&Array.prototype.push.apply(f,u),f.length>0?n.chooseClosest(f):"fallbackAt"in r?Wse(t,r.fallbackAt):Gse(t,e,n,r)}function dVe(t,e,n,r){var i=t.getClosestPoint(n);return i||new we}function FS(t){return function(e,n,r,i){if(r instanceof Element){var o=this.paper.findView(r),a;if(o)if(o.isNodeConnection(r)){var s="fixedAt"in i?i.fixedAt:"50%";a=Wse(o,s)}else a=o.getNodeBBox(r).center();else a=new we;return t.call(this,e,n,a,i)}return t.apply(this,arguments)}}function Wse(t,e){var n=parseFloat(e);return Eo(e)?t.getPointAtRatio(n/100):t.getPointAtLength(n)}const hVe=FS(fVe),Gse=FS(dVe),pVe=Object.freeze(Object.defineProperty({__proto__:null,connectionClosest:Gse,connectionLength:uVe,connectionPerpendicular:hVe,connectionRatio:cVe,resolveRef:FS},Symbol.toStringTag,{value:"Module"}));function E3(t,e,n){if(Li(n)){const{x:i,y:o}=n;if(isFinite(o)){const a=new gt(e,t),{start:s,end:l}=a.parallel(o);e=s,t=l}n=i}if(!isFinite(n))return t;var r=t.distance(e);return n===0&&r>0?t:t.move(e,-Math.min(n,r-1))}function GL(t){var e=t.getAttribute("stroke-width");return e===null?0:parseFloat(e)||0}function gVe(t,e,n=0){let r,i,o,a;const{start:s,end:l}=t;switch(e){case"left":r="x",i=l,o=s,a=-1;break;case"right":r="x",i=s,o=l,a=1;break;case"top":r="y",i=l,o=s,a=-1;break;case"bottom":r="y",i=s,o=l,a=1;break;default:return}s[r]<l[r]?i[r]=o[r]:o[r]=i[r],isFinite(n)&&(i[r]+=a*n,o[r]+=a*n)}function mVe(t,e,n,r){let{offset:i,alignOffset:o,align:a}=r;return a&&gVe(t,a,o),E3(t.end,t.start,i)}function qse(t,e,n,r){var i=e.getNodeBBox(n);r.stroke&&i.inflate(GL(n)/2);var o=t.intersect(i),a=o?t.start.chooseClosest(o):t.end;return E3(a,t.start,r.offset)}function vVe(t,e,n,r){var i=e.model.angle();if(i===0)return qse(t,e,n,r);var o=e.getNodeUnrotatedBBox(n);r.stroke&&o.inflate(GL(n)/2);var a=o.center(),s=t.clone().rotate(a,i),l=s.setLength(1e6).intersect(o),c=l?s.start.chooseClosest(l).rotate(a,-i):t.end;return E3(c,t.start,r.offset)}function yVe(t){if(!t)return null;var e=t;do{var n=e.tagName;if(typeof n!="string")return null;if(n=n.toUpperCase(),n==="G")e=e.firstElementChild;else if(n==="TITLE")e=e.nextElementSibling;else break}while(e);return e}var $7="segmentSubdivisons",F7="shapeBBox";function bVe(t,e,n,r){var i,o,a=r.selector,s=t.end;if(typeof a=="string"?i=e.findBySelector(a)[0]:a===!1?i=n:Array.isArray(a)?i=k2(n,a):i=yVe(n),!Ue.isSVGGraphicsElement(i)){if(i===n||!Ue.isSVGGraphicsElement(n))return s;i=n}var l=e.getNodeShape(i),c=e.getNodeMatrix(i),u=e.getRootTranslateMatrix(),f=e.getRootRotateMatrix(),d=u.multiply(f).multiply(c),h=d.inverse(),g=Ue.transformLine(t,h),y=g.start.clone(),S=e.getNodeData(i);if(r.insideout===!1){S[F7]||(S[F7]=l.bbox());var v=S[F7];if(v.containsPoint(y))return s}var _;if(l instanceof xt){var x=r.precision||2;S[$7]||(S[$7]=l.getSegmentSubdivisions({precision:x})),_={precision:x,segmentSubdivisions:S[$7]}}r.extrapolate===!0&&g.setLength(1e6),o=g.intersect(l,_),o?Ue.isArray(o)&&(o=y.chooseClosest(o)):r.sticky===!0&&(l instanceof lt?o=l.pointNearestToPoint(y):l instanceof Ca?o=l.intersectionWithLineFromCenterToPoint(y):o=l.closestPoint(y,_));var C=o?Ue.transformPoint(o,d):s,k=r.offset||0;return r.stroke&&(k+=GL(i)/2),E3(C,t.start,k)}const SVe=mVe,_Ve=qse,wVe=vVe,kVe=bVe,xVe=Object.freeze(Object.defineProperty({__proto__:null,anchor:SVe,bbox:_Ve,boundary:kVe,rectangle:wVe},Symbol.toStringTag,{value:"Module"}));function Lf(t){return function(e,n,r,i){var o=!!i.rotate,a=o?e.getNodeUnrotatedBBox(n):e.getNodeBBox(n),s=a[t](),l=i.dx;if(l){var c=Eo(l);l=parseFloat(l),isFinite(l)&&(c&&(l/=100,l*=a.width),s.x+=l)}var u=i.dy;if(u){var f=Eo(u);u=parseFloat(u),isFinite(u)&&(f&&(u/=100,u*=a.height),s.y+=u)}return o?s.rotate(e.model.getBBox().center(),-e.model.angle()):s}}function CVe(t,e,n,r){var i=t.model.angle(),o=t.getNodeBBox(e),a=o.center(),s=o.origin(),l=o.corner(),c=r.padding;if(isFinite(c)||(c=0),s.y+c<=n.y&&n.y<=l.y-c){var u=n.y-a.y;a.x+=i===0||i===180?0:u*1/Math.tan(ls(i)),a.y+=u}else if(s.x+c<=n.x&&n.x<=l.x-c){var f=n.x-a.x;a.y+=i===90||i===270?0:f*Math.tan(ls(i)),a.x+=f}return a}function TVe(t,e,n,r){var i=!!r.rotate,o,a,s;i?(o=t.getNodeUnrotatedBBox(e),s=t.model.getBBox().center(),a=t.model.angle()):o=t.getNodeBBox(e);var l=r.padding;isFinite(l)&&o.inflate(l),i&&n.rotate(s,a);var c=o.sideNearestToPoint(n),u;switch(c){case"left":u=o.leftMiddle();break;case"right":u=o.rightMiddle();break;case"top":u=o.topMiddle();break;case"bottom":u=o.bottomMiddle();break}return i?u.rotate(s,-a):u}function AVe(t,e,n,r,i){return t.model.getPointFromConnectedLink(this.model,i).offset(r.dx,r.dy)}const PVe=Lf("center"),EVe=Lf("topMiddle"),OVe=Lf("bottomMiddle"),IVe=Lf("leftMiddle"),$Ve=Lf("rightMiddle"),FVe=Lf("origin"),LVe=Lf("topRight"),DVe=Lf("bottomLeft"),NVe=Lf("corner"),MVe=FS(CVe),RVe=FS(TVe),zVe=AVe,VVe=Object.freeze(Object.defineProperty({__proto__:null,bottom:OVe,bottomLeft:DVe,bottomRight:NVe,center:PVe,left:IVe,midSide:RVe,modelCenter:zVe,perpendicular:MVe,right:$Ve,top:EVe,topLeft:FVe,topRight:LVe},Symbol.toStringTag,{value:"Module"})),Bm={NONE:"sorting-none",APPROX:"sorting-approximate",EXACT:"sorting-exact"},BVe=50,iW=20,oW=1e3,jVe=1/0,Ek=9007199254740991,L7=xn.Highlighting,aW={[L7.DEFAULT]:{name:"stroke",options:{padding:3}},[L7.MAGNET_AVAILABILITY]:{name:"addClass",options:{className:"available-magnet"}},[L7.ELEMENT_AVAILABILITY]:{name:"addClass",options:{className:"available-cell"}}},HVe=[{name:bl.BACK},{name:bl.CELLS},{name:bl.LABELS},{name:bl.FRONT},{name:bl.TOOLS}],UVe=yf.extend({className:"paper",options:{width:800,height:600,origin:{x:0,y:0},gridSize:1,drawGrid:!1,drawGridSize:null,background:!1,perpendicularLinks:!1,elementView:ao,linkView:v1,snapLabels:!1,snapLinks:!1,snapLinksSelf:!1,labelsLayer:!1,multiLinks:!0,guard:function(t,e){return!1},highlighting:aW,preventContextMenu:!0,preventDefaultBlankAction:!0,preventDefaultViewAction:!0,restrictTranslate:!1,markAvailable:!1,defaultLink:new Qg,defaultConnector:{name:"normal"},defaultRouter:{name:"normal"},defaultAnchor:{name:"center"},defaultLinkAnchor:{name:"connectionRatio"},defaultConnectionPoint:{name:"bbox"},connectionStrategy:null,validateMagnet:function(t,e,n){return e.getAttribute("magnet")!=="passive"},validateConnection:function(t,e,n,r,i,o){return(i==="target"?n:t)instanceof ao},embeddingMode:!1,validateEmbedding:function(t,e){return!0},validateUnembedding:function(t){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,allowLink:null,clickThreshold:0,moveThreshold:0,magnetThreshold:0,sorting:Bm.EXACT,frozen:!1,autoFreeze:!1,onViewUpdate:function(t,e,n,r,i){e&(t.FLAG_INSERT|t.FLAG_REMOVE)||r.mounting||r.isolate||i.requestConnectedLinksUpdate(t,n,r)},onViewPostponed:function(t,e,n){return n.forcePostponedViewUpdate(t,e)},beforeRender:null,afterRender:null,viewport:null,cellViewNamespace:null,routerNamespace:null,connectorNamespace:null,highlighterNamespace:lVe,anchorNamespace:VVe,linkAnchorNamespace:pVe,connectionPointNamespace:xVe,overflow:!1},events:{dblclick:"pointerdblclick",dbltap:"pointerdblclick",contextmenu:"contextmenu",mousedown:"pointerdown",touchstart:"pointerdown",mouseover:"mouseover",mouseout:"mouseout",mouseenter:"mouseenter",mouseleave:"mouseleave",wheel:"mousewheel","mouseenter .joint-cell":"mouseenter","mouseleave .joint-cell":"mouseleave","mouseenter .joint-tools":"mouseenter","mouseleave .joint-tools":"mouseleave","dblclick .joint-cell [magnet]":"magnetpointerdblclick","contextmenu .joint-cell [magnet]":"magnetcontextmenu","mousedown .joint-link .label":"onlabel","touchstart .joint-link .label":"onlabel","dragstart .joint-cell image":"onImageDragStart"},documentEvents:{mousemove:"pointermove",touchmove:"pointermove",mouseup:"pointerup",touchend:"pointerup",touchcancel:"pointerup"},svg:null,viewport:null,defs:null,tools:null,$background:null,layers:null,$grid:null,$document:null,_viewportMatrix:null,_viewportTransformString:null,_updates:null,_layers:null,SORT_DELAYING_BATCHES:["add","to-front","to-back"],UPDATE_DELAYING_BATCHES:["translate"],FORM_CONTROL_TAG_NAMES:["TEXTAREA","INPUT","BUTTON","SELECT","OPTION"],GUARDED_TAG_NAMES:["SELECT"],MIN_SCALE:1e-6,init:function(){const{options:t,el:e}=this;t.cellViewNamespace||(t.cellViewNamespace=typeof joint<"u"&&cf(joint,"shapes")?joint.shapes:null);const n=this.model=t.model||new uf;this._layers={},this.setGrid(t.drawGrid),this.cloneOptions(),this.render(),this._setDimensions(),this.startListening(),this._views={},this._mw_evt_buffer={event:null,deltas:[]},this.$document=zn(e.ownerDocument),this.resetViews(n.attributes.cells.models),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()},_resetUpdates:function(){return this._updates={id:null,priorities:[{},{},{}],unmountedCids:[],mountedCids:[],unmounted:{},mounted:{},count:0,keyFrozen:!1,freezeKey:null,sort:!1,disabled:!1,idle:!1}},startListening:function(){var t=this.model;this.listenTo(t,"add",this.onCellAdded).listenTo(t,"remove",this.onCellRemoved).listenTo(t,"change",this.onCellChange).listenTo(t,"reset",this.onGraphReset).listenTo(t,"sort",this.onGraphSort).listenTo(t,"batch:stop",this.onGraphBatchStop),this.on("cell:highlight",this.onCellHighlight).on("cell:unhighlight",this.onCellUnhighlight).on("scale translate",this.update)},onCellAdded:function(t,e,n){var r=n.position;this.isAsync()||!Ka(r)?this.renderView(t,n):(n.maxPosition===r&&this.freeze({key:"addCells"}),this.renderView(t,n),r===0&&this.unfreeze({key:"addCells"}))},onCellRemoved:function(t,e,n){const r=this.findViewByModel(t);r&&this.requestViewUpdate(r,r.FLAG_REMOVE,r.UPDATE_PRIORITY,n)},onCellChange:function(t,e){if(t!==this.model.attributes.cells&&t.hasChanged("z")&&this.options.sorting===Bm.APPROX){const n=this.findViewByModel(t);n&&this.requestViewUpdate(n,n.FLAG_INSERT,n.UPDATE_PRIORITY,e)}},onGraphReset:function(t,e){this.resetLayers(),this.resetViews(t.models,e)},onGraphSort:function(){this.model.hasActiveBatch(this.SORT_DELAYING_BATCHES)||this.sortViews()},onGraphBatchStop:function(t){if(!this.isFrozen()){var e=t&&t.batchName,n=this.model;if(!this.isAsync()){var r=this.UPDATE_DELAYING_BATCHES;r.includes(e)&&!n.hasActiveBatch(r)&&this.updateViews(t)}var i=this.SORT_DELAYING_BATCHES;i.includes(e)&&!n.hasActiveBatch(i)&&this.sortViews()}},cloneOptions:function(){const{options:t}=this,{defaultConnector:e,defaultRouter:n,defaultConnectionPoint:r,defaultAnchor:i,defaultLinkAnchor:o,origin:a,highlighting:s,cellViewNamespace:l,interactive:c}=t;!l&&typeof joint<"u"&&cf(joint,"shapes")&&(t.cellViewNamespace=joint.shapes),br(e)||(t.defaultConnector=vl(e)),br(n)||(t.defaultRouter=vl(n)),br(r)||(t.defaultConnectionPoint=vl(r)),br(i)||(t.defaultAnchor=vl(i)),br(o)||(t.defaultLinkAnchor=vl(o)),Li(c)&&(t.interactive=Nt({},c)),Li(s)&&(t.highlighting=BL({},s,aW)),t.origin=Nt({},a)},children:function(){var t=Ue.namespace;return[{namespaceURI:t.xhtml,tagName:"div",className:ac("paper-background"),selector:"background"},{namespaceURI:t.xhtml,tagName:"div",className:ac("paper-grid"),selector:"grid"},{namespaceURI:t.svg,tagName:"svg",attributes:{width:"100%",height:"100%","xmlns:xlink":t.xlink},selector:"svg",children:[{tagName:"defs",selector:"defs"},{tagName:"g",className:ac("layers"),selector:"layers"}]}]},hasLayerView(t){return t in this._layers},getLayerView(t){const{_layers:e}=this;if(t in e)return e[t];throw new Error(`dia.Paper: Unknown layer "${t}"`)},getLayerNode(t){return this.getLayerView(t).el},render:function(){this.renderChildren();const{childNodes:t,options:e}=this,{svg:n,defs:r,layers:i,background:o,grid:a}=t;return n.style.overflow=e.overflow?"visible":"hidden",this.svg=n,this.defs=r,this.layers=i,this.$background=zn(o),this.$grid=zn(a),this.renderLayers(),Ue.ensureId(n),e.background&&this.drawBackground(e.background),e.drawGrid&&this.drawGrid(),this},renderLayers:function(t=HVe){this.removeLayers(),t.forEach(({name:i,sorted:o})=>{const a=new oze({name:i});this.layers.appendChild(a.el),this._layers[i]=a});const e=this.getLayerView(bl.CELLS),n=this.getLayerView(bl.TOOLS),r=this.getLayerView(bl.LABELS);this.tools=n.el,this.cells=this.viewport=e.el,e.vel.addClass(ac("viewport")),r.vel.addClass(ac("viewport"))},removeLayers:function(){const{_layers:t}=this;Object.keys(t).forEach(e=>{t[e].remove(),delete t[e]})},resetLayers:function(){const{_layers:t}=this;Object.keys(t).forEach(e=>{t[e].removePivots()})},update:function(){return this.options.drawGrid&&this.drawGrid(),this._background&&this.updateBackgroundImage(this._background),this},matrix:function(t){var e=this.layers;if(t===void 0){var n=e.getAttribute("transform");return(this._viewportTransformString||null)===n?t=this._viewportMatrix:(t=e.getCTM(),this._viewportMatrix=t,this._viewportTransformString=n),Ue.createSVGMatrix(t)}t=Ue.createSVGMatrix(t);var r=Ue.matrixToTransformString(t);return e.setAttribute("transform",r),this._viewportMatrix=t,this._viewportTransformString=e.getAttribute("transform"),this},clientMatrix:function(){return Ue.createSVGMatrix(this.cells.getScreenCTM())},requestConnectedLinksUpdate:function(t,e,n){if(t instanceof xn)for(var r=t.model,i=this.model.getConnectedLinks(r),o=0,a=i.length;o<a;o++){var s=i[o],l=this.findViewByModel(s);if(l){var c=["UPDATE"];s.getTargetCell()===r&&c.push("TARGET"),s.getSourceCell()===r&&c.push("SOURCE");var u=Math.max(e+1,l.UPDATE_PRIORITY);this.scheduleViewUpdate(l,l.getFlag(c),u,n)}}},forcePostponedViewUpdate:function(t,e){if(!t||!(t instanceof xn))return!1;var n=t.model;if(n.isElement())return!1;if(!(e&t.getFlag(["SOURCE","TARGET"]))){var r={silent:!0},i=0,o=this.findViewByModel(n.getSourceCell());o&&!this.isViewMounted(o)&&(i=this.dumpView(o,r),t.updateEndMagnet("source"));var a=0,s=this.findViewByModel(n.getTargetCell());if(s&&!this.isViewMounted(s)&&(a=this.dumpView(s,r),t.updateEndMagnet("target")),i===0&&a===0)return!this.dumpView(t,r)}return!1},requestViewUpdate:function(t,e,n,r){r||(r={}),this.scheduleViewUpdate(t,e,n,r);var i=this.isAsync();if(!(this.isFrozen()||i&&r.async!==!1)&&!this.model.hasActiveBatch(this.UPDATE_DELAYING_BATCHES)){var o=this.updateViews(r);i&&this.notifyAfterRender(o,r)}},scheduleViewUpdate:function(t,e,n,r){const{_updates:i,options:o}=this;i.idle&&o.autoFreeze&&(i.idle=!1,this.unfreeze());const{FLAG_REMOVE:a,FLAG_INSERT:s,UPDATE_PRIORITY:l,cid:c}=t;let u=i.priorities[n];if(u||(u=i.priorities[n]={}),n>l)for(let h=n-1;h>=l;h--){const g=i.priorities[h];!g||!(c in g)||(u[c]|=g[c],delete g[c])}let f=u[c]||0;if((f&e)===e)return;f||i.count++,e&a&&f&s?u[c]^=s:e&s&&f&a&&(u[c]^=a),u[c]|=e;const d=o.onViewUpdate;typeof d=="function"&&d.call(this,t,e,n,r||{},this)},dumpViewUpdate:function(t){if(!t)return 0;var e=this._updates,n=t.cid,r=e.priorities[t.UPDATE_PRIORITY],i=this.registerMountedView(t)|r[n];return delete r[n],i},dumpView:function(t,e={}){const n=this.dumpViewUpdate(t);if(!n)return 0;const r=!e.silent;r&&this.notifyBeforeRender(e);const i=this.updateView(t,n,e);if(r){const o={updated:1,priority:t.UPDATE_PRIORITY};this.notifyAfterRender(o,e)}return i},updateView:function(t,e,n){if(!t)return 0;const{FLAG_REMOVE:r,FLAG_INSERT:i,FLAG_INIT:o,model:a}=t;if(t instanceof xn){if(e&r)return this.removeView(a),0;if(e&i){const s=!!(e&o);s&&(e^=o),this.insertView(t,s),e^=i}}return e?t.confirmUpdate(e,n||{}):0},requireView:function(t,e){var n=this.findViewByModel(t);return n?(this.dumpView(n,e),n):null},registerUnmountedView:function(t){var e=t.cid,n=this._updates;if(e in n.unmounted)return 0;var r=n.unmounted[e]|=t.FLAG_INSERT;return n.unmountedCids.push(e),delete n.mounted[e],r},registerMountedView:function(t){var e=t.cid,n=this._updates;if(e in n.mounted)return 0;n.mounted[e]=!0,n.mountedCids.push(e);var r=n.unmounted[e]||0;return delete n.unmounted[e],r},isViewMounted:function(t){if(!t)return!1;var e=t.cid,n=this._updates;return e in n.mounted},dumpViews:function(t){var e=nc({},t,{viewport:null});this.checkViewport(e),this.updateViews(e)},updateViews:function(t){this.notifyBeforeRender(t);let e,n=0,r=0,i=Ek;do r++,e=this.updateViewsBatch(t),n+=e.updated,i=Math.min(e.priority,i);while(!e.empty);const o={updated:n,batches:r,priority:i};return this.notifyAfterRender(o,t),o},hasScheduledUpdates:function(){const t=this._updates.priorities,e=Object.keys(t);let n=e.length;for(;n>0&&n--;)for(let r in t[e[n]])return!0;return!1},updateViewsAsync:function(t,e){t||(t={}),e||(e={processed:0,priority:Ek});const{_updates:n,options:r}=this,i=n.id;if(i){bO(i),e.processed===0&&this.hasScheduledUpdates()&&this.notifyBeforeRender(t);const o=this.updateViewsBatch(t),a=nc({},t,{mountBatchSize:oW-o.mounted,unmountBatchSize:oW-o.unmounted}),s=this.checkViewport(a),l=s.unmounted,c=s.mounted;let u=e.processed;const f=n.count;o.updated>0?(u+=o.updated+o.unmounted,o.processed=u,e.priority=Math.min(o.priority,e.priority),o.empty&&c===0?(o.unmounted+=l,o.mounted+=c,o.priority=e.priority,this.notifyAfterRender(o,t),e.processed=0,e.priority=Ek,n.count=0):e.processed=u):n.idle||r.autoFreeze&&(this.freeze(),n.idle=!0,this.trigger("render:idle",t));const d=t.progress;if(f&&typeof d=="function"&&d.call(this,o.empty,u,f,o,this),n.id!==i)return}if(n.disabled)throw new Error("dia.Paper: can not unfreeze the paper after it was removed");n.id=yO(this.updateViewsAsync,this,t,e)},notifyBeforeRender:function(t={}){let e=t.beforeRender;typeof e!="function"&&(e=this.options.beforeRender,typeof e!="function")||e.call(this,t,this)},notifyAfterRender:function(t,e={}){let n=e.afterRender;typeof n!="function"&&(n=this.options.afterRender),typeof n=="function"&&n.call(this,t,e,this),this.trigger("render:done",t,e)},updateViewsBatch:function(t){t||(t={});var e=t.batchSize||jVe,n=this._updates,r=0,i=0,o=0,a=0,s=Ek,l=!0,c=this.options,u=n.priorities,f="viewport"in t?t.viewport:c.viewport;typeof f!="function"&&(f=null);var d=c.onViewPostponed;typeof d!="function"&&(d=null);var h=Object.keys(u);e:for(var g=0,y=h.length;g<y;g++){var S=+h[g],v=u[S];for(var _ in v){if(r>=e){l=!1;break e}var x=Dp[_];if(!x){delete v[_];continue}var C=v[_];if(!(C&x.FLAG_REMOVE)){var k=_ in n.unmounted;if(x.DETACHABLE&&f&&!f.call(this,x,!k,this)){k||(this.registerUnmountedView(x),this.detachView(x)),n.unmounted[_]|=C,delete v[_],o++;continue}k&&(C|=x.FLAG_INSERT,a++),C|=this.registerMountedView(x)}var m=this.updateView(x,C,t);if(m>0&&(v[_]=m,!d||!d.call(this,x,m,this)||v[_])){i++,l=!1;continue}s>S&&(s=S),r++,delete v[_]}}return{priority:s,updated:r,postponed:i,unmounted:o,mounted:a,empty:l}},getUnmountedViews:function(){const t=this._updates,e=Object.keys(t.unmounted),n=e.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=Dp[e[i]];return r},getMountedViews:function(){const t=this._updates,e=Object.keys(t.mounted),n=e.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=Dp[e[i]];return r},checkUnmountedViews:function(t,e){e||(e={});var n=0;typeof t!="function"&&(t=null);for(var r=("mountBatchSize"in e)?e.mountBatchSize:1/0,i=this._updates,o=i.unmountedCids,a=i.unmounted,s=0,l=Math.min(o.length,r);s<l;s++){var c=o[s];if(c in a){var u=Dp[c];if(u){if(u.DETACHABLE&&t&&!t.call(this,u,!1,this)){o.push(c);continue}n++;var f=this.registerMountedView(u);f&&this.scheduleViewUpdate(u,f,u.UPDATE_PRIORITY,{mounting:!0})}}}return o.splice(0,s),n},checkMountedViews:function(t,e){e||(e={});var n=0;if(typeof t!="function")return n;for(var r=("unmountBatchSize"in e)?e.unmountBatchSize:1/0,i=this._updates,o=i.mountedCids,a=i.mounted,s=0,l=Math.min(o.length,r);s<l;s++){var c=o[s];if(c in a){var u=Dp[c];if(u){if(!u.DETACHABLE||t.call(this,u,!0,this)){o.push(c);continue}n++;var f=this.registerUnmountedView(u);f&&this.detachView(u)}}}return o.splice(0,s),n},checkViewVisibility:function(t,e={}){let n="viewport"in e?e.viewport:this.options.viewport;typeof n!="function"&&(n=null);const r=this._updates,{mounted:i,unmounted:o}=r,a=!t.DETACHABLE||!n||n.call(this,t,!1,this);let s=!1,l=!1;if(t.cid in i&&!a){this.registerUnmountedView(t)&&this.detachView(t);const f=r.mountedCids.indexOf(t.cid);r.mountedCids.splice(f,1),s=!0}if(!s&&t.cid in o&&a){const u=r.unmountedCids.indexOf(t.cid);r.unmountedCids.splice(u,1);var c=this.registerMountedView(t);c&&this.scheduleViewUpdate(t,c,t.UPDATE_PRIORITY,{mounting:!0}),l=!0}return{mounted:l?1:0,unmounted:s?1:0}},checkViewport:function(t){var e=nc({},t,{mountBatchSize:1/0,unmountBatchSize:1/0}),n="viewport"in e?e.viewport:this.options.viewport,r=this.checkMountedViews(n,e);if(r>0){var i=this._updates.unmountedCids;e.mountBatchSize=Math.min(i.length-r,e.mountBatchSize)}var o=this.checkUnmountedViews(n,e);return{mounted:o,unmounted:r}},freeze:function(t){t||(t={});var e=this._updates,n=t.key,r=this.options.frozen,i=e.freezeKey;if(n&&n!==i){if(r&&i)return;e.freezeKey=n,e.keyFrozen=r}this.options.frozen=!0;var o=e.id;e.id=null,this.isAsync()&&o&&bO(o)},unfreeze:function(t){t||(t={});var e=this._updates,n=t.key,r=e.freezeKey;n&&r&&n!==r||(e.freezeKey=null,!(n&&n===r&&e.keyFrozen)&&(this.isAsync()?(this.freeze(),this.updateViewsAsync(t)):this.updateViews(t),this.options.frozen=e.keyFrozen=!1,e.sort&&(this.sortViews(),e.sort=!1)))},isAsync:function(){return!!this.options.async},isFrozen:function(){return!!this.options.frozen},isExactSorting:function(){return this.options.sorting===Bm.EXACT},onRemove:function(){this.freeze(),this._updates.disabled=!0,this.removeLayers(),this.removeViews()},getComputedSize:function(){var t=this.options,e=t.width,n=t.height;return Ka(e)||(e=this.el.clientWidth),Ka(n)||(n=this.el.clientHeight),{width:e,height:n}},setDimensions:function(t,e){const{options:n}=this,{width:r,height:i}=n;let o=t===void 0?r:t,a=e===void 0?i:e;if(r===o&&i===a)return;n.width=o,n.height=a,this._setDimensions();const s=this.getComputedSize();this.trigger("resize",s.width,s.height)},_setDimensions:function(){const{options:t}=this;let e=t.width,n=t.height;Ka(e)&&(e=Math.round(e)),Ka(n)&&(n=Math.round(n)),this.$el.css({width:e===null?"":e,height:n===null?"":n})},setOrigin:function(t,e){return this.translate(t||0,e||0)},fitToContent:function(t,e,n,r){Jn(t)?r=t:r=Nt({gridWidth:t,gridHeight:e,padding:n},r);const{x:i,y:o,width:a,height:s}=this.getFitToContentArea(r),{sx:l,sy:c}=this.scale();return this.setOrigin(-i*l,-o*c),this.setDimensions(a*l,s*c),new lt(i,o,a,s)},getFitToContentArea:function(t={}){const e=t.gridWidth||1,n=t.gridHeight||1,r=Fg(t.padding||0),i=Math.max(t.minWidth||0,e),o=Math.max(t.minHeight||0,n),a=t.maxWidth||Number.MAX_VALUE,s=t.maxHeight||Number.MAX_VALUE,l=t.allowNewOrigin,c="contentArea"in t?new lt(t.contentArea):this.getContentArea(t),{sx:u,sy:f}=this.scale();c.x*=u,c.y*=f,c.width*=u,c.height*=f;let d=Math.ceil((c.width+c.x)/e),h=Math.ceil((c.height+c.y)/n);t.allowNegativeBottomRight||(d=Math.max(d,1),h=Math.max(h,1)),d*=e,h*=n;let g=0;(l==="negative"&&c.x<0||l==="positive"&&c.x>=0||l==="any")&&(g=Math.ceil(-c.x/e)*e,g+=r.left,d+=g);let y=0;return(l==="negative"&&c.y<0||l==="positive"&&c.y>=0||l==="any")&&(y=Math.ceil(-c.y/n)*n,y+=r.top,h+=y),d+=r.right,h+=r.bottom,d=Math.max(d,i),h=Math.max(h,o),d=Math.min(d,a),h=Math.min(h,s),new lt(-g/u,-y/f,d/u,h/f)},transformToFitContent:function(t){t||(t={});let e,n;if("contentArea"in t){const S=t.contentArea;e=this.localToPaperRect(S),n=new we(S)}else e=this.getContentBBox(t),n=this.paperToLocalPoint(e);if(!e.width||!e.height)return;nc(t,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE,verticalAlign:"top",horizontalAlign:"left"});const r=Fg(t.padding),i=t.minScaleX||t.minScale,o=t.maxScaleX||t.maxScale,a=t.minScaleY||t.minScale,s=t.maxScaleY||t.maxScale;let l;if(t.fittingBBox)l=t.fittingBBox;else{const S=this.translate(),v=this.getComputedSize();l={x:S.tx,y:S.ty,width:v.width,height:v.height}}l=new lt(l).moveAndExpand({x:r.left,y:r.top,width:-r.left-r.right,height:-r.top-r.bottom});const c=this.scale();let u=l.width/e.width*c.sx,f=l.height/e.height*c.sy;if(t.preserveAspectRatio&&(u=f=Math.min(u,f)),t.scaleGrid){const S=t.scaleGrid;u=S*Math.floor(u/S),f=S*Math.floor(f/S)}u=Math.min(o,Math.max(i,u)),f=Math.min(s,Math.max(a,f));const d={x:u/c.sx,y:f/c.sy},h=this.options.origin;let g=l.x-n.x*u-h.x,y=l.y-n.y*f-h.y;switch(t.verticalAlign){case"middle":y=y+(l.height-e.height*d.y)/2;break;case"bottom":y=y+(l.height-e.height*d.y);break}switch(t.horizontalAlign){case"middle":g=g+(l.width-e.width*d.x)/2;break;case"right":g=g+(l.width-e.width*d.x);break}this.scale(u,f),this.translate(g,y)},scaleContentToFit:function(t){this.transformToFitContent(t)},getContentArea:function(t){return t&&t.useModelGeometry?this.model.getBBox()||new lt:Ue(this.cells).getBBox()},getContentBBox:function(t){return this.localToPaperRect(this.getContentArea(t))},getArea:function(){return this.paperToLocalRect(this.getComputedSize())},getRestrictedArea:function(...t){const{restrictTranslate:e}=this.options;let n;return br(e)?n=e.apply(this,t):e===!0?n=this.getArea():e?n=new lt(e):n=null,n},createViewForModel:function(t){const{options:e}=this;var n,r,i=e.cellViewNamespace,o=t.get("type")+"View",a=k2(i,o,".");t.isLink()?(n=e.linkView,r=v1):(n=e.elementView,r=ao);var s=n.prototype instanceof Go.View?a||n:n.call(this,t)||a||r;return new s({model:t,interactive:e.interactive,labelsLayer:e.labelsLayer===!0?bl.LABELS:e.labelsLayer})},removeView:function(t){const{id:e}=t,{_views:n,_updates:r}=this,i=n[e];if(i){var{cid:o}=i;const{mounted:a,unmounted:s}=r;i.remove(),delete n[e],delete a[o],delete s[o]}return i},renderView:function(t,e){const{id:n}=t,r=this._views;let i,o,a=!0;return n in r&&(i=r[n],i.model===t?(o=i.FLAG_INSERT,a=!1):this.removeView(t)),a&&(i=r[n]=this.createViewForModel(t),i.paper=this,o=this.registerUnmountedView(i)|this.FLAG_INIT|i.getFlag(Di(i,"initFlag"))),this.requestViewUpdate(i,o,i.UPDATE_PRIORITY,e),i},onImageDragStart:function(){return!1},resetViews:function(t,e){e||(e={}),t||(t=[]),this._resetUpdates(),this.removeViews();const n=this.options.autoFreeze?null:"reset";this.freeze({key:n});for(var r=0,i=t.length;r<i;r++)this.renderView(t[r],e);this.unfreeze({key:n}),this.sortViews()},removeViews:function(){uc(this._views,"remove"),this._views={}},sortViews:function(){if(this.isExactSorting()){if(this.isFrozen()){this._updates.sort=!0;return}this.sortViewsExact()}},sortViewsExact:function(){var t=zn(this.cells).children("[model-id]"),e=this.model.get("cells");TRe(t,function(n,r){var i=e.get(n.getAttribute("model-id")),o=e.get(r.getAttribute("model-id")),a=i.attributes.z||0,s=o.attributes.z||0;return a===s?0:a<s?-1:1})},insertView:function(t,e){const n=this.getLayerView(bl.CELLS),{el:r,model:i}=t;switch(this.options.sorting){case Bm.APPROX:n.insertSortedNode(r,i.get("z"));break;case Bm.EXACT:default:n.insertNode(r);break}t.onMount(e)},detachView(t){t.unmount(),t.onDetach()},scale:function(t,e,n,r){if(t===void 0)return Ue.matrixToScale(this.matrix());e===void 0&&(e=t),n===void 0&&(n=0,r=0);var i=this.translate();if(n||r||i.tx||i.ty){var o=i.tx-n*(t-1),a=i.ty-r*(e-1);this.translate(o,a)}t=Math.max(t||0,this.MIN_SCALE),e=Math.max(e||0,this.MIN_SCALE);var s=this.matrix();return s.a=t,s.d=e,this.matrix(s),this.trigger("scale",t,e,n,r),this},rotate:function(t,e,n){if(t===void 0)return Ue.matrixToRotate(this.matrix());if(e===void 0){var r=this.cells.getBBox();e=r.width/2,n=r.height/2}var i=this.matrix().translate(e,n).rotate(t).translate(-e,-n);return this.matrix(i),this},translate:function(t,e){if(t===void 0)return Ue.matrixToTranslate(this.matrix());const{options:n}=this,{origin:r,drawGrid:i}=n;t||(t=0),e||(e=0);const o=this.matrix();if(o.e===t&&o.f===e)return this;o.e=t,o.f=e,this.matrix(o);const{tx:a,ty:s}=this.translate();return r.x=a,r.y=s,this.trigger("translate",a,s),i&&this.drawGrid(),this},findView:function(t){var e=Ko(t)?this.cells.querySelector(t):t instanceof zn?t[0]:t,n=this.findAttribute("model-id",e);if(n)return this._views[n]},findViewByModel:function(t){var e=Ko(t)||Ka(t)?t:t&&t.id;return this._views[e]},findViewsFromPoint:function(t){t=new we(t);var e=this.model.getElements().map(this.findViewByModel,this);return e.filter(function(n){return n&&n.vel.getBBox({target:this.cells}).containsPoint(t)},this)},findViewsInArea:function(t,e){e=nc(e||{},{strict:!1}),t=new lt(t);var n=this.model.getElements().map(this.findViewByModel,this),r=e.strict?"containsRect":"intersect";return n.filter(function(i){return i&&t[r](i.vel.getBBox({target:this.cells}))},this)},removeTools:function(){return this.dispatchToolsEvent("remove"),this},hideTools:function(){return this.dispatchToolsEvent("hide"),this},showTools:function(){return this.dispatchToolsEvent("show"),this},dispatchToolsEvent:function(t,...e){typeof t=="string"&&this.trigger("tools:event",t,...e)},getModelById:function(t){return this.model.getCell(t)},snapToGrid:function(t,e){return this.clientToLocalPoint(t,e).snapToGrid(this.options.gridSize)},localToPaperPoint:function(t,e){var n=new we(t,e),r=Ue.transformPoint(n,this.matrix());return r},localToPaperRect:function(t,e,n,r){var i=new lt(t,e,n,r),o=Ue.transformRect(i,this.matrix());return o},paperToLocalPoint:function(t,e){var n=new we(t,e),r=Ue.transformPoint(n,this.matrix().inverse());return r},paperToLocalRect:function(t,e,n,r){var i=new lt(t,e,n,r),o=Ue.transformRect(i,this.matrix().inverse());return o},localToClientPoint:function(t,e){var n=new we(t,e),r=Ue.transformPoint(n,this.clientMatrix());return r},localToClientRect:function(t,e,n,r){var i=new lt(t,e,n,r),o=Ue.transformRect(i,this.clientMatrix());return o},clientToLocalPoint:function(t,e){var n=new we(t,e),r=Ue.transformPoint(n,this.clientMatrix().inverse());return r},clientToLocalRect:function(t,e,n,r){var i=new lt(t,e,n,r),o=Ue.transformRect(i,this.clientMatrix().inverse());return o},localToPagePoint:function(t,e){return this.localToPaperPoint(t,e).offset(this.pageOffset())},localToPageRect:function(t,e,n,r){return this.localToPaperRect(t,e,n,r).offset(this.pageOffset())},pageToLocalPoint:function(t,e){var n=new we(t,e),r=n.difference(this.pageOffset());return this.paperToLocalPoint(r)},pageToLocalRect:function(t,e,n,r){var i=this.pageOffset(),o=new lt(t,e,n,r);return o.x-=i.x,o.y-=i.y,this.paperToLocalRect(o)},clientOffset:function(){var t=this.svg.getBoundingClientRect();return new we(t.left,t.top)},pageOffset:function(){return this.clientOffset().offset(window.scrollX,window.scrollY)},linkAllowed:function(t){if(!(t instanceof v1))throw new Error("Must provide a linkView.");var e=t.model,n=this.options,r=this.model,i=r.constructor.validations;return!(!n.multiLinks&&!i.multiLinks.call(this,r,e)||!n.linkPinning&&!i.linkPinning.call(this,r,e)||typeof n.allowLink=="function"&&!n.allowLink.call(this,t,this))},getDefaultLink:function(t,e){return br(this.options.defaultLink)?this.options.defaultLink.call(this,t,e):this.options.defaultLink.clone()},resolveHighlighter:function(t={}){let{highlighter:e,type:n}=t;const{highlighting:r,highlighterNamespace:i}=this.options;if(e===void 0){if(!r||n&&(e=r[n],e===!1))return!1;e||(e=r.default)}if(!e)return!1;Ko(e)&&(e={name:e});const o=e.name,a=i[o];if(!a)throw new Error('Unknown highlighter ("'+o+'")');if(typeof a.highlight!="function")throw new Error('Highlighter ("'+o+'") is missing required highlight() method');if(typeof a.unhighlight!="function")throw new Error('Highlighter ("'+o+'") is missing required unhighlight() method');return{highlighter:a,options:e.options||{},name:o}},onCellHighlight:function(t,e,n){const r=this.resolveHighlighter(n);if(!r)return;const{highlighter:i,options:o}=r;i.highlight(t,e,o)},onCellUnhighlight:function(t,e,n){const r=this.resolveHighlighter(n);if(!r)return;const{highlighter:i,options:o}=r;i.unhighlight(t,e,o)},pointerdblclick:function(t){t.preventDefault(),t=bi(t);var e=this.findView(t.target);if(!this.guard(t,e)){var n=this.snapToGrid(t.clientX,t.clientY);e?e.pointerdblclick(t,n.x,n.y):this.trigger("blank:pointerdblclick",t,n.x,n.y)}},pointerclick:function(t){var e=this.eventData(t);if(e.mousemoved<=this.options.clickThreshold){t=bi(t);var n=this.findView(t.target);if(this.guard(t,n))return;var r=this.snapToGrid(t.clientX,t.clientY);n?n.pointerclick(t,r.x,r.y):this.trigger("blank:pointerclick",t,r.x,r.y)}},contextmenu:function(t){if(this.options.preventContextMenu&&t.preventDefault(),this.contextMenuFired){this.contextMenuFired=!1;return}t=bi(t),this.contextMenuTrigger(t)},contextMenuTrigger:function(t){var e=this.findView(t.target);if(!this.guard(t,e)){var n=this.snapToGrid(t.clientX,t.clientY);e?e.contextmenu(t,n.x,n.y):this.trigger("blank:contextmenu",t,n.x,n.y)}},pointerdown:function(t){t=bi(t);const{target:e,button:n}=t,r=this.findView(e),i=n===2;if(r){if(!i&&this.guard(t,r))return;const o=this.FORM_CONTROL_TAG_NAMES.includes(e.tagName);this.options.preventDefaultViewAction&&!o&&t.preventDefault(),o&&r.preventDefaultInteraction(t);const a=r.el,s=e.closest("[event]");if(s&&a!==s&&r.el.contains(s)){const c=bi(zn.Event(t.originalEvent,{data:t.data,currentTarget:s}));if(this.onevent(c),c.isDefaultPrevented()&&t.preventDefault(),c.isPropagationStopped())return;t.data=c.data}const l=e.closest("[magnet]");if(l&&r.el!==l&&r.el.contains(l)){const c=bi(zn.Event(t.originalEvent,{data:t.data,currentTarget:l}));if(this.onmagnet(c),c.isDefaultPrevented()&&t.preventDefault(),c.isPropagationStopped()){if(i)return;this.delegateDragEvents(r,c.data);return}t.data=c.data}}if(i){this.contextMenuFired=!0;const o=zn.Event(t.originalEvent,{type:"contextmenu",data:t.data});this.contextMenuTrigger(o)}else{const o=this.snapToGrid(t.clientX,t.clientY);r?r.pointerdown(t,o.x,o.y):(this.options.preventDefaultBlankAction&&t.preventDefault(),this.trigger("blank:pointerdown",t,o.x,o.y)),this.delegateDragEvents(r,t.data)}},pointermove:function(t){var e=this.eventData(t);e.mousemoved||(e.mousemoved=0,this.undelegateEvents());var n=++e.mousemoved;if(!(n<=this.options.moveThreshold)){t=bi(t);var r=this.snapToGrid(t.clientX,t.clientY),i=e.sourceView;i?i.pointermove(t,r.x,r.y):this.trigger("blank:pointermove",t,r.x,r.y),this.eventData(t,e)}},pointerup:function(t){this.undelegateDocumentEvents();var e=bi(t),n=this.snapToGrid(e.clientX,e.clientY),r=this.eventData(t).sourceView;r?r.pointerup(e,n.x,n.y):this.trigger("blank:pointerup",e,n.x,n.y),e.isPropagationStopped()||this.pointerclick(zn.Event(t.originalEvent,{type:"click",data:t.data})),this.delegateEvents()},mouseover:function(t){t=bi(t);var e=this.findView(t.target);if(!this.guard(t,e))if(e)e.mouseover(t);else{if(this.el===t.target)return;this.trigger("blank:mouseover",t)}},mouseout:function(t){t=bi(t);var e=this.findView(t.target);if(!this.guard(t,e))if(e)e.mouseout(t);else{if(this.el===t.target)return;this.trigger("blank:mouseout",t)}},mouseenter:function(t){t=bi(t);const{target:e,relatedTarget:n,currentTarget:r}=t,i=this.findView(e);if(this.guard(t,i))return;const o=this.findView(n);i&&(o===i||(i.mouseenter(t),this.el.contains(n)))||o||r===this.el&&this.trigger("paper:mouseenter",t)},mouseleave:function(t){t=bi(t);const{target:e,relatedTarget:n,currentTarget:r}=t,i=this.findView(e);if(this.guard(t,i))return;const o=this.findView(n);i&&(o===i||(i.mouseleave(t),this.el.contains(n)))||o||r===this.el&&this.trigger("paper:mouseleave",t)},_processMouseWheelEvtBuf:fRe(function(){const{event:t,deltas:e}=this._mw_evt_buffer,n=e.reduce((a,s)=>a+wRe(s,BVe),0),r=Math.pow(.995,n),{x:i,y:o}=this.clientToLocalPoint(t.clientX,t.clientY);this.trigger("paper:pinch",t,i,o,r),this._mw_evt_buffer={event:null,deltas:[]}},iW,{maxWait:iW}),mousewheel:function(t){t=bi(t);const e=this.findView(t.target);if(this.guard(t,e))return;const n=t.originalEvent,r=this.snapToGrid(n.clientX,n.clientY),{deltaX:i,deltaY:o}=_Re(n),a=this._events["paper:pinch"];if(t.ctrlKey&&a&&a.length>0)n.preventDefault(),this._mw_evt_buffer.event=n,this._mw_evt_buffer.deltas.push(o),this._processMouseWheelEvtBuf();else{const s=Math.max(-1,Math.min(1,n.wheelDelta));e?e.mousewheel(t,r.x,r.y,s):this.trigger("blank:mousewheel",t,r.x,r.y,s),this.trigger("paper:pan",t,i,o)}},onevent:function(t){var e=t.currentTarget,n=e.getAttribute("event");if(n){var r=this.findView(e);if(r){if(t=bi(t),this.guard(t,r))return;var i=this.snapToGrid(t.clientX,t.clientY);r.onevent(t,n,i.x,i.y)}}},magnetEvent:function(t,e){var n=t.currentTarget,r=n.getAttribute("magnet");if(r){var i=this.findView(n);if(i){if(t=bi(t),this.guard(t,i))return;var o=this.snapToGrid(t.clientX,t.clientY);e.call(this,i,t,n,o.x,o.y)}}},onmagnet:function(t){if(t.button===2){this.contextMenuFired=!0,this.magnetContextMenuFired=!0;const e=zn.Event(t.originalEvent,{type:"contextmenu",data:t.data,currentTarget:t.currentTarget});this.magnetContextMenuTrigger(e),e.isPropagationStopped()&&t.stopPropagation()}else this.magnetEvent(t,function(e,n,r,i,o){e.onmagnet(n,i,o)})},magnetpointerdblclick:function(t){this.magnetEvent(t,function(e,n,r,i,o){e.magnetpointerdblclick(n,r,i,o)})},magnetcontextmenu:function(t){if(this.options.preventContextMenu&&t.preventDefault(),this.magnetContextMenuFired){this.magnetContextMenuFired=!1;return}this.magnetContextMenuTrigger(t)},magnetContextMenuTrigger:function(t){this.magnetEvent(t,function(e,n,r,i,o){e.magnetcontextmenu(n,r,i,o)})},onlabel:function(t){var e=t.currentTarget,n=this.findView(e);if(n){if(t=bi(t),this.guard(t,n))return;var r=this.snapToGrid(t.clientX,t.clientY);n.onlabel(t,r.x,r.y)}},getPointerArgs(t){const e=bi(t),{x:n,y:r}=this.snapToGrid(e.clientX,e.clientY);return[e,n,r]},delegateDragEvents:function(t,e){e||(e={}),this.eventData({data:e},{sourceView:t||null,mousemoved:0}),this.delegateDocumentEvents(null,e)},guard:function(t,e){if(t.type==="mousedown"&&t.button===2||this.options.guard&&this.options.guard(t,e))return!0;if(t.data&&t.data.guarded!==void 0)return t.data.guarded;const{target:n}=t;return this.GUARDED_TAG_NAMES.includes(n.tagName)?!0:!(e&&e.model&&e.model instanceof pu||this.svg===n||this.el===n||zn.contains(this.svg,n))},setGridSize:function(t){const{options:e}=this;return e.gridSize=t,e.drawGrid&&!e.drawGridSize&&this.drawGrid(),this},clearGrid:function(){return this.$grid&&this.$grid.css("backgroundImage","none"),this},_getGridRefs:function(){return this._gridCache||(this._gridCache={root:Ue("svg",{width:"100%",height:"100%"},Ue("defs")),patterns:{},add:function(t,e){Ue(this.root.node.childNodes[0]).append(e),this.patterns[t]=e,this.root.append(Ue("rect",{width:"100%",height:"100%",fill:"url(#"+t+")"}))},get:function(t){return this.patterns[t]},exist:function(t){return this.patterns[t]!==void 0}}),this._gridCache},setGrid:function(t){this.clearGrid(),this._gridCache=null,this._gridSettings=[];var e=Array.isArray(t)?t:[t||{}];return e.forEach(function(n){this._gridSettings.push.apply(this._gridSettings,this._resolveDrawGridOption(n))},this),this},_resolveDrawGridOption:function(t){var e=this.constructor.gridPatterns;if(Ko(t)&&Array.isArray(e[t]))return e[t].map(function(l){return Nt({},l)});var n=t||{args:[{}]},r=Array.isArray(n),i=n.name;if(!r&&!i&&!n.markup&&(i="dot"),i&&Array.isArray(e[i])){var o=e[i].map(function(l){return Nt({},l)}),a=Array.isArray(n.args)?n.args:[n.args||{}];nc(a[0],$g(t,"args"));for(var s=0;s<a.length;s++)o[s]&&Nt(o[s],a[s]);return o}return r?n:[n]},drawGrid:function(t){const e=this.options.drawGridSize||this.options.gridSize;if(e<=1)return this.clearGrid();var n=Array.isArray(t)?t:[t],r=this.matrix(),i=this._getGridRefs();this._gridSettings.forEach(function(a,s){var l="pattern_"+s,c=Ri(a,n[s],{sx:r.a||1,sy:r.d||1,ox:r.e||0,oy:r.f||0});c.width=e*(r.a||1)*(c.scaleFactor||1),c.height=e*(r.d||1)*(c.scaleFactor||1),i.exist(l)||i.add(l,Ue("pattern",{id:l,patternUnits:"userSpaceOnUse"},Ue(c.markup)));var u=i.get(l);br(c.update)&&c.update(u.node.childNodes[0],c);var f=c.ox%c.width;f<0&&(f+=c.width);var d=c.oy%c.height;d<0&&(d+=c.height),u.attr({x:f,y:d,width:c.width,height:c.height})});var o=new XMLSerializer().serializeToString(i.root.node);return o="url(data:image/svg+xml;base64,"+btoa(o)+")",this.$grid.css("backgroundImage",o),this},updateBackgroundImage:function(t){t=t||{};var e=t.position||"center",n=t.size||"auto auto",r=this.scale(),i=this.translate();if(Jn(e)){var o=i.tx+r.sx*(e.x||0),a=i.ty+r.sy*(e.y||0);e=o+"px "+a+"px"}Jn(n)&&(n=new lt(n).scale(r.sx,r.sy),n=n.width+"px "+n.height+"px"),this.$background.css({backgroundSize:n,backgroundPosition:e})},drawBackgroundImage:function(t,e){if(!(t instanceof HTMLImageElement)){this.$background.css("backgroundImage","");return}if(!(!this._background||this._background.id!==e.id)){e=e||{};var n,r=e.size,i=e.repeat||"no-repeat",o=e.opacity||1,a=Math.abs(e.quality)||1,s=this.constructor.backgroundPatterns[gRe(i)];if(br(s)){t.width*=a,t.height*=a;var l=s(t,e);if(!(l instanceof HTMLCanvasElement))throw new Error("dia.Paper: background pattern must return an HTML Canvas instance");n=l.toDataURL("image/png"),i="repeat",Jn(r)?(r.width*=l.width/t.width,r.height*=l.height/t.height):r===void 0&&(e.size={width:l.width/a,height:l.height/a})}else n=t.src,r===void 0&&(e.size={width:t.width,height:t.height});this.$background.css({opacity:o,backgroundRepeat:i,backgroundImage:"url("+n+")"}),this.updateBackgroundImage(e)}},updateBackgroundColor:function(t){this.$el.css("backgroundColor",t||"")},drawBackground:function(t){if(t=t||{},this.updateBackgroundColor(t.color),t.image){t=this._background=vl(t),yv(t);var e=document.createElement("img");e.onload=this.drawBackgroundImage.bind(this,e,t),e.src=t.image}else this.drawBackgroundImage(null),this._background=null;return this},setInteractivity:function(t){this.options.interactive=t,uc(this._views,"setInteractivity",t)},isDefined:function(t){return!!this.svg.getElementById(t)},defineFilter:function(t){if(!Jn(t))throw new TypeError("dia.Paper: defineFilter() requires 1. argument to be an object.");var e=t.id,n=t.name;if(e||(e=n+this.svg.id+kk(JSON.stringify(t))),!this.isDefined(e)){var r=PRe,i=r[n]&&r[n](t.args||{});if(!i)throw new Error("Non-existing filter "+n);var o=Nt({filterUnits:"objectBoundingBox",x:-1,y:-1,width:3,height:3},t.attrs,{id:e});Ue(i,o).appendTo(this.defs)}return e},defineGradient:function(t){if(!Jn(t))throw new TypeError("dia.Paper: defineGradient() requires 1. argument to be an object.");const{svg:e,defs:n}=this,{type:r,id:i=r+e.id+kk(JSON.stringify(t)),stops:o,attrs:a={}}=t;if(this.isDefined(i))return i;const s=Ln(o).map(({offset:c,color:u,opacity:f})=>Ue("stop").attr({offset:c,"stop-color":u,"stop-opacity":Number.isFinite(f)?f:1})),l=Ue(r,a,s);return l.id=i,l.appendTo(n),i},definePattern:function(t){if(!Jn(t))throw new TypeError("dia.Paper: definePattern() requires 1. argument to be an object.");const{svg:e,defs:n}=this,{id:r=e.id+kk(JSON.stringify(t)),markup:i,attrs:o={}}=t;if(!i)throw new TypeError("dia.Paper: definePattern() requires markup.");if(this.isDefined(r))return r;const a=Ue("pattern",{patternUnits:"userSpaceOnUse"});if(a.id=r,a.attr(o),typeof i=="string")a.append(Ue(i));else{const{fragment:s}=_C(i);a.append(s)}return a.appendTo(n),r},defineMarker:function(t){if(!Jn(t))throw new TypeError("dia.Paper: defineMarker() requires the first argument to be an object.");const{svg:e,defs:n}=this,{id:r=e.id+kk(JSON.stringify(t)),markup:i,attrs:o={},markerUnits:a="userSpaceOnUse"}=t;if(this.isDefined(r))return r;const s=Ue("marker",{orient:"auto",overflow:"visible",markerUnits:a});s.id=r,s.attr(o);let l;if(i){let f;if(typeof i=="string")f=Ue(i),f=Array.isArray(f)?f:[f];else{const{fragment:d}=_C(i);f=Ue(d).children()}f.length>1?l=Ue("g").append(f):l=f[0]}else{const{type:f="path"}=t;l=Ue(f)}const c=$g(t,"type","id","markup","attrs","markerUnits");return Object.keys(c).forEach(f=>{const d=c[f],h=l.attr(f);if(h==null)l.attr(f,d);else switch(f){case"transform":l.attr(f,d+" "+h);break}}),l.appendTo(s),s.appendTo(n),r}},{sorting:Bm,Layers:bl,backgroundPatterns:{flipXy:function(t){var e=document.createElement("canvas"),n=t.width,r=t.height;e.width=2*n,e.height=2*r;var i=e.getContext("2d");return i.drawImage(t,0,0,n,r),i.setTransform(-1,0,0,-1,e.width,e.height),i.drawImage(t,0,0,n,r),i.setTransform(-1,0,0,1,e.width,0),i.drawImage(t,0,0,n,r),i.setTransform(1,0,0,-1,0,e.height),i.drawImage(t,0,0,n,r),e},flipX:function(t){var e=document.createElement("canvas"),n=t.width,r=t.height;e.width=n*2,e.height=r;var i=e.getContext("2d");return i.drawImage(t,0,0,n,r),i.translate(2*n,0),i.scale(-1,1),i.drawImage(t,0,0,n,r),e},flipY:function(t){var e=document.createElement("canvas"),n=t.width,r=t.height;e.width=n,e.height=r*2;var i=e.getContext("2d");return i.drawImage(t,0,0,n,r),i.translate(0,2*r),i.scale(1,-1),i.drawImage(t,0,0,n,r),e},watermark:function(t,e){e=e||{};var n=t.width,r=t.height,i=document.createElement("canvas");i.width=n*3,i.height=r*3;for(var o=i.getContext("2d"),a=Ka(e.watermarkAngle)?-e.watermarkAngle:-20,s=ls(a),l=i.width/4,c=i.height/4,u=0;u<4;u++)for(var f=0;f<4;f++)(u+f)%2>0&&(o.setTransform(1,0,0,1,(2*u-1)*l,(2*f-1)*c),o.rotate(s),o.drawImage(t,-n/2,-r/2,n,r));return i}},gridPatterns:{dot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(t,e){Ue(t).attr({width:e.thickness*e.sx,height:e.thickness*e.sy,fill:e.color})}}],fixedDot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(t,e){var n=e.sx<=1?e.thickness*e.sx:e.thickness;Ue(t).attr({width:n,height:n,fill:e.color})}}],mesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(t,e){var n,r=e.width,i=e.height,o=e.thickness;r-o>=0&&i-o>=0?n=["M",r,0,"H0 M0 0 V0",i].join(" "):n="M 0 0 0 0",Ue(t).attr({d:n,stroke:e.color,"stroke-width":e.thickness})}}],doubleMesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(t,e){var n,r=e.width,i=e.height,o=e.thickness;r-o>=0&&i-o>=0?n=["M",r,0,"H0 M0 0 V0",i].join(" "):n="M 0 0 0 0",Ue(t).attr({d:n,stroke:e.color,"stroke-width":e.thickness})}},{color:"#000000",thickness:3,scaleFactor:4,markup:"path",update:function(t,e){var n,r=e.width,i=e.height,o=e.thickness;r-o>=0&&i-o>=0?n=["M",r,0,"H0 M0 0 V0",i].join(" "):n="M 0 0 0 0",Ue(t).attr({d:n,stroke:e.color,"stroke-width":e.thickness})}}]}}),qL=yf.extend({name:null,tagName:"g",className:"tool",svgElement:!0,_visible:!0,init:function(){var t=this.name;t&&this.vel.attr("data-tool-name",t)},configure:function(t,e){return this.relatedView=t,this.paper=t.paper,this.parentView=e,this.simulateRelatedView(this.el),this.delegateEvents(),this},simulateRelatedView:function(t){t&&t.setAttribute("model-id",this.relatedView.model.id)},getName:function(){return this.name},show:function(){this.el.style.display="",this._visible=!0},hide:function(){this.el.style.display="none",this._visible=!1},isVisible:function(){return!!this._visible},focus:function(){var t=this.options.focusOpacity;isFinite(t)&&(this.el.style.opacity=t),this.parentView.focusTool(this)},blur:function(){this.el.style.opacity="",this.parentView.blurTool(this)},update:function(){},guard:function(t){const{paper:e,relatedView:n}=this;return!e||!n?!0:e.guard(t,n)}}),y0=yf.extend({tagName:"g",className:"tools",svgElement:!0,tools:null,isRendered:!1,options:{tools:null,relatedView:null,name:null},configure:function(t){t=Nt(this.options,t);var e=t.tools;if(!Array.isArray(e))return this;var n=t.relatedView;if(!(n instanceof xn))return this;for(var r=this.tools=[],i=0,o=e.length;i<o;i++){var a=e[i];a instanceof qL&&(a.configure(n,this),this.vel.append(a.el),r.push(a))}return this.isRendered=!1,n.requestUpdate(n.getFlag("TOOLS")),this},getName:function(){return this.options.name},update:function(t){t||(t={});var e=this.tools;if(!e)return this;for(var n=this.isRendered,r=0,i=e.length;r<i;r++){var o=e[r];n?t.tool!==o.cid&&o.isVisible()&&o.update():o.render()}return this.isMounted()||this.mount(),n||(this.blurTool(),this.isRendered=!0),this},focusTool:function(t){var e=this.tools;if(!e)return this;for(var n=0,r=e.length;n<r;n++){var i=e[n];t===i?i.show():i.hide()}return this},blurTool:function(t){var e=this.tools;if(!e)return this;for(var n=0,r=e.length;n<r;n++){var i=e[n];i!==t&&!i.isVisible()&&(i.show(),i.update())}return this},hide:function(){return this.focusTool(null)},show:function(){return this.blurTool(null)},onRemove:function(){var t=this.tools;if(!t)return this;for(var e=0,n=t.length;e<n;e++)t[e].remove();this.tools=null},mount:function(){const{options:t,el:e}=this,{relatedView:n,layer:r=bl.TOOLS,z:i}=t;return n&&(r?n.paper.getLayerView(r).insertSortedNode(e,i):n.el.appendChild(e)),this}}),x2={exportElement:function(t){return t.size()},exportLink:function(t){var e=t.get("labelSize")||{},n={minLen:t.get("minLen")||1,weight:t.get("weight")||1,labelpos:t.get("labelPosition")||"c",labeloffset:t.get("labelOffset")||0,width:e.width||0,height:e.height||0};return n},importElement:function(t,e,n){var r=this.getCell(e),i=n.node(e);t.setPosition?t.setPosition(r,i):r.set("position",{x:i.x-i.width/2,y:i.y-i.height/2})},importLink:function(t,e,n){const i=this.getCell(e.name),o=n.edge(e),a=o.points||[],s=new $r(a);if(t.setVertices||t.setLinkVertices)if(br(t.setVertices))t.setVertices(i,a);else{s.simplify({threshold:.001});const l=s.points.map(u=>u.toJSON()),c=l.length;i.set("vertices",l.slice(1,c-1))}if(t.setLabels&&"x"in o&&"y"in o){const l={x:o.x,y:o.y};if(br(t.setLabels))t.setLabels(i,l,a);else{const c=s.closestPointLength(l),u=s.pointAtLength(c),f=c/s.length(),d=new we(l).difference(u).toJSON();i.label(0,{position:{distance:f,offset:d}})}}},layout:function(t,e){var n;t instanceof uf?n=t:n=new uf().resetCells(t,{dry:!0,sort:!1}),t=null,e=nc(e||{},{resizeClusters:!0,clusterPadding:10,exportElement:this.exportElement,exportLink:this.exportLink});const r=e.dagre||(typeof dagre<"u"?dagre:void 0);if(r===void 0)throw new Error('The the "dagre" utility is a mandatory dependency.');var i=x2.toGraphLib(n,{graphlib:e.graphlib,directed:!0,multigraph:!0,compound:!0,setNodeLabel:e.exportElement,setEdgeLabel:e.exportLink,setEdgeName:function(u){return u.id}}),o={},a=e.marginX||0,s=e.marginY||0;if(e.rankDir&&(o.rankdir=e.rankDir),e.align&&(o.align=e.align),e.nodeSep&&(o.nodesep=e.nodeSep),e.edgeSep&&(o.edgesep=e.edgeSep),e.rankSep&&(o.ranksep=e.rankSep),e.ranker&&(o.ranker=e.ranker),a&&(o.marginx=a),s&&(o.marginy=s),i.setGraph(o),r.layout(i,{debugTiming:!!e.debugTiming}),n.startBatch("layout"),x2.fromGraphLib(i,{importNode:this.importElement.bind(n,e),importEdge:this.importLink.bind(n,e)}),e.resizeClusters){var l=i.nodes().filter(function(u){return i.children(u).length>0}).map(n.getCell.bind(n)).sort(function(u,f){return f.getAncestors().length-u.getAncestors().length});uc(l,"fitToChildren",{padding:e.clusterPadding})}n.stopBatch("layout");var c=i.graph();return new lt(a,s,Math.abs(c.width-2*a),Math.abs(c.height-2*s))},fromGraphLib:function(t,e){e=e||{};var n=e.importNode||sb,r=e.importEdge||sb,i=this instanceof uf?this:new uf;return t.nodes().forEach(function(o){n.call(i,o,t,i,e)}),t.edges().forEach(function(o){r.call(i,o,t,i,e)}),i},toGraphLib:function(t,e){e=e||{};const n=e.graphlib||(typeof graphlib<"u"?graphlib:void 0);if(n===void 0)throw new Error('The the "graphlib" utility is a mandatory dependency.');for(var r=wse(e,"directed","compound","multigraph"),i=new n.Graph(r),o=e.setNodeLabel||sb,a=e.setEdgeLabel||sb,s=e.setEdgeName||sb,l=t.get("cells"),c=0,u=l.length;c<u;c++){var f=l.at(c);if(f.isLink()){var d=f.get("source"),h=f.get("target");if(!d.id||!h.id)break;i.setEdge(d.id,h.id,a(f),s(f))}else if(i.setNode(f.id,o(f)),i.isCompound()&&f.has("parent")){var g=f.get("parent");l.has(g)&&i.setParent(f.id,g)}}return i}};uf.prototype.toGraphLib=function(t){return x2.toGraphLib(this,t)};uf.prototype.fromGraphLib=function(t,e){return x2.fromGraphLib.call(this,t,e)};const Yse={_results:{},_tests:{svgforeignobject:function(){return!!document.createElementNS&&/SVGForeignObject/.test({}.toString.call(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")))}},addTest:function(t,e){return this._tests[t]=e},test:function(t){var e=this._tests[t];if(!e)throw new Error('Test not defined ("'+t+'"). Use `joint.env.addTest(name, fn) to add a new test.`');var n=this._results[t];if(typeof n<"u")return n;try{n=e()}catch{n=!1}return this._results[t]=n,n}},$l=aa.define("basic.Generic",{attrs:{".":{fill:"#ffffff",stroke:"none"}}});$l.define("basic.Rect",{attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:100,height:60},text:{fill:"#000000",text:"","font-size":14,"ref-x":.5,"ref-y":.5,"text-anchor":"middle","y-alignment":"middle","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><rect/></g><text/></g>'});ao.extend({presentationAttributes:ao.addPresentationAttributes({attrs:["SCALE"]}),confirmUpdate:function(){var t=ao.prototype.confirmUpdate.apply(this,arguments);return this.hasFlag(t,"SCALE")&&(this.resize(),t=this.removeFlag(t,"SCALE")),t}});$l.define("basic.Text",{attrs:{text:{"font-size":18,fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><text/></g></g>'});$l.define("basic.Circle",{size:{width:60,height:60},attrs:{circle:{fill:"#ffffff",stroke:"#000000",r:30,cx:30,cy:30},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><circle/></g><text/></g>'});$l.define("basic.Ellipse",{size:{width:60,height:40},attrs:{ellipse:{fill:"#ffffff",stroke:"#000000",rx:30,ry:20,cx:30,cy:20},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><ellipse/></g><text/></g>'});$l.define("basic.Polygon",{size:{width:60,height:40},attrs:{polygon:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon/></g><text/></g>'});$l.define("basic.Polyline",{size:{width:60,height:40},attrs:{polyline:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><polyline/></g><text/></g>'});$l.define("basic.Image",{attrs:{text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><image/></g><text/></g>'});const WVe=$l.define("basic.Path",{size:{width:60,height:60},attrs:{path:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle",ref:"path","ref-x":.5,"ref-dy":10,fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><path/></g><text/></g>'});WVe.define("basic.Rhombus",{attrs:{path:{d:"M 30 0 L 60 30 30 60 0 30 z"},text:{"ref-y":.5,"ref-dy":null,"y-alignment":"middle"}}});const CC=Yse.test("svgforeignobject");$l.define("basic.TextBlock",{attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:80,height:100},text:{fill:"#000000","font-size":14,"font-family":"Arial, helvetica, sans-serif"},".content":{text:"","ref-x":.5,"ref-y":.5,"y-alignment":"middle","x-alignment":"middle"}},content:""},{markup:['<g class="rotatable">','<g class="scalable"><rect/></g>',CC?'<foreignObject class="fobj"><body xmlns="http://www.w3.org/1999/xhtml"><div class="content"/></body></foreignObject>':'<text class="content"/>',"</g>"].join(""),initialize:function(){this.listenTo(this,"change:size",this.updateSize),this.listenTo(this,"change:content",this.updateContent),this.updateSize(this,this.get("size")),this.updateContent(this,this.get("content")),$l.prototype.initialize.apply(this,arguments)},updateSize:function(t,e){this.attr({".fobj":Nt({},e),div:{style:Nt({},e)}})},updateContent:function(t,e){CC?this.attr({".content":{html:CRe(e)}}):this.attr({".content":{text:e}})},setForeignObjectSize:function(){this.updateSize.apply(this,arguments)},setDivContent:function(){this.updateContent.apply(this,arguments)}});ao.extend({presentationAttributes:CC?ao.prototype.presentationAttributes:ao.addPresentationAttributes({content:["CONTENT"],size:["CONTENT"]}),initFlag:["RENDER","CONTENT"],confirmUpdate:function(){var t=ao.prototype.confirmUpdate.apply(this,arguments);return this.hasFlag(t,"CONTENT")&&(this.updateContent(this.model),t=this.removeFlag(t,"CONTENT")),t},update:function(t,e){var n=this.model;if(CC)ao.prototype.update.call(this,n,e);else{var r=$g(e||n.get("attrs"),".content");ao.prototype.update.call(this,n,r),(!e||cf(e,".content"))&&this.updateContent(n,e)}},updateContent:function(t,e){var n=Ri({},(e||t.get("attrs"))[".content"]);n=$g(n,"text");var r=xse(t.get("content"),t.get("size"),n,{svgDocument:this.paper.svg}),i=vO({},".content",n,"/");i[".content"].text=r,ao.prototype.update.call(this,t,i)}});const GVe=aa.define("standard.Rectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}]}),qVe=aa.define("standard.Circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}]}),YVe=aa.define("standard.Ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"body"},{tagName:"text",selector:"label"}]}),KVe=aa.define("standard.Path",{attrs:{body:{refD:"M 0 0 L 10 0 10 10 0 10 Z",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}]}),XVe=aa.define("standard.Polygon",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polygon",selector:"body"},{tagName:"text",selector:"label"}]}),JVe=aa.define("standard.Polyline",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10 0 0",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polyline",selector:"body"},{tagName:"text",selector:"label"}]}),ZVe=aa.define("standard.Image",{attrs:{image:{refWidth:"100%",refHeight:"100%"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),QVe=aa.define("standard.BorderedImage",{attrs:{border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#FFFFFF"},image:{refWidth:-1,refHeight:-1,x:.5,y:.5},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"background",attributes:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),eBe=aa.define("standard.EmbeddedImage",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"},label:{textVerticalAnchor:"top",textAnchor:"left",refX:"30%",refX2:20,refY:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),tBe=aa.define("standard.InscribedImage",{attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#FFFFFF"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),nBe=aa.define("standard.HeaderedRectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},header:{refWidth:"100%",height:30,strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},headerText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:15,fontSize:16,fill:"#333333"},bodyText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}]});var D7=10;const rBe=aa.define("standard.Cylinder",{attrs:{body:{lateralArea:D7,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},top:{refCx:"50%",cy:D7,refRx:"50%",ry:D7,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"100%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],topRy:function(t,e){if(t===void 0)return this.attr("body/lateralArea");var n=Eo(t),r={lateralArea:t},i=n?{refCy:t,refRy:t,cy:null,ry:null}:{refCy:null,refRy:null,cy:t,ry:t};return this.attr({body:r,top:i},e)}},{attributes:{lateralArea:{set:function(t,e){var n=Eo(t);n&&(t=parseFloat(t)/100);var r=e.x,i=e.y,o=e.width,a=e.height,s=o/2,l=n?a*t:t,c=Ue.KAPPA,u=c*s,f=c*(n?a*t:t),d=r,h=r+o/2,g=r+o,y=i+l,S=y-l,v=i+a-l,_=i+a,x=["M",d,y,"L",d,v,"C",r,v+f,h-u,_,h,_,"C",h+u,_,g,v+f,g,v,"L",g,y,"C",g,y-f,h+u,S,h,S,"C",h-u,S,d,y-f,d,y,"Z"];return{d:x.join(" ")}}}}});var iBe={tagName:"foreignObject",selector:"foreignObject",attributes:{overflow:"hidden"},children:[{tagName:"div",namespaceURI:"http://www.w3.org/1999/xhtml",selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]},oBe={tagName:"text",selector:"label",attributes:{"text-anchor":"middle"}},aBe=Yse.test("svgforeignobject")?iBe:oBe;const sBe=aa.define("standard.TextBlock",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#ffffff",strokeWidth:2},foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}}},{markup:[{tagName:"rect",selector:"body"},aBe]},{attributes:{text:{set:function(t,e,n,r){if(n instanceof HTMLElement)n.textContent=t;else{var i=r.style||{},o={text:t,width:-5,height:"100%"},a=Nt({textVerticalAnchor:"middle"},i);return Pse.textWrap.set.call(this,o,e,n,a),{fill:i.color||null}}},position:function(t,e,n){if(n instanceof SVGElement)return e.center()}}}}),Kse=Qg.define("standard.Link",{attrs:{line:{connection:!0,stroke:"#333333",strokeWidth:2,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 10 -5 0 0 10 5 z"}},wrapper:{connection:!0,strokeWidth:10,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"wrapper",attributes:{fill:"none",cursor:"pointer",stroke:"transparent","stroke-linecap":"round"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]}),lBe=Qg.define("standard.DoubleLink",{attrs:{line:{connection:!0,stroke:"#DDDDDD",strokeWidth:4,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"outline",attributes:{fill:"none"}},{tagName:"path",selector:"line",attributes:{fill:"none"}}]}),cBe=Qg.define("standard.ShadowLink",{attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}}}},{markup:[{tagName:"path",selector:"shadow",attributes:{fill:"none"}},{tagName:"path",selector:"line",attributes:{fill:"none"}}]}),uBe=Object.freeze(Object.defineProperty({__proto__:null,BorderedImage:QVe,Circle:qVe,Cylinder:rBe,DoubleLink:lBe,Ellipse:YVe,EmbeddedImage:eBe,HeaderedRectangle:nBe,Image:ZVe,InscribedImage:tBe,Link:Kse,Path:KVe,Polygon:XVe,Polyline:JVe,Rectangle:GVe,ShadowLink:cBe,TextBlock:sBe},Symbol.toStringTag,{value:"Module"})),Xse=$l.define("pn.Place",{size:{width:50,height:50},attrs:{".root":{r:25,fill:"#ffffff",stroke:"#000000",transform:"translate(25, 25)"},".label":{"text-anchor":"middle","ref-x":.5,"ref-y":-20,ref:".root",fill:"#000000","font-size":12},".tokens > circle":{fill:"#000000",r:5},".tokens.one > circle":{transform:"translate(25, 25)"},".tokens.two > circle:nth-child(1)":{transform:"translate(19, 25)"},".tokens.two > circle:nth-child(2)":{transform:"translate(31, 25)"},".tokens.three > circle:nth-child(1)":{transform:"translate(18, 29)"},".tokens.three > circle:nth-child(2)":{transform:"translate(25, 19)"},".tokens.three > circle:nth-child(3)":{transform:"translate(32, 29)"},".tokens.alot > text":{transform:"translate(25, 18)","text-anchor":"middle",fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><circle class="root"/><g class="tokens" /></g><text class="label"/></g>'}),fBe=ao.extend({presentationAttributes:ao.addPresentationAttributes({tokens:["TOKENS"]}),initFlag:ao.prototype.initFlag.concat(["TOKENS"]),confirmUpdate:function(...t){let e=ao.prototype.confirmUpdate.call(this,...t);return this.hasFlag(e,"TOKENS")&&(this.renderTokens(),this.update(),e=this.removeFlag(e,"TOKENS")),e},renderTokens:function(){const t=this.vel.findOne(".tokens").empty();["one","two","three","alot"].forEach(function(n){t.removeClass(n)});var e=this.model.get("tokens");if(e)switch(e){case 1:t.addClass("one"),t.append(Ue("circle"));break;case 2:t.addClass("two"),t.append([Ue("circle"),Ue("circle")]);break;case 3:t.addClass("three"),t.append([Ue("circle"),Ue("circle"),Ue("circle")]);break;default:t.addClass("alot"),t.append(Ue("text").text(e+""));break}}}),Jse=$l.define("pn.Transition",{size:{width:12,height:50},attrs:{rect:{width:12,height:50,fill:"#000000",stroke:"#000000"},".label":{"text-anchor":"middle","ref-x":.5,"ref-y":-20,ref:"rect",fill:"#000000","font-size":12}}},{markup:'<g class="rotatable"><g class="scalable"><rect class="root"/></g></g><text class="label"/>'}),dBe=Qg.define("pn.Link",{attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z"}}}),hBe=Object.freeze(Object.defineProperty({__proto__:null,Link:dBe,Place:Xse,PlaceView:fBe,Transition:Jse},Symbol.toStringTag,{value:"Module"}));var sW=yf.extend({tagName:"circle",svgElement:!0,className:"marker-vertex",events:{mousedown:"onPointerDown",touchstart:"onPointerDown",dblclick:"onDoubleClick",dbltap:"onDoubleClick"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},attributes:{r:6,fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move"},position:function(t,e){const{vel:n,options:r}=this,{scale:i}=r;let o=Ue.createSVGMatrix().translate(t,e);i&&(o=o.scale(i)),n.transform(o,{absolute:!0})},onPointerDown:function(t){this.options.guard(t)||(t.stopPropagation(),t.preventDefault(),this.options.paper.undelegateEvents(),this.delegateDocumentEvents(null,t.data),this.trigger("will-change",this,t))},onPointerMove:function(t){this.trigger("changing",this,t)},onDoubleClick:function(t){this.trigger("remove",this,t)},onPointerUp:function(t){this.trigger("changed",this,t),this.undelegateDocumentEvents(),this.options.paper.delegateEvents()}});const pBe=qL.extend({name:"vertices",options:{handleClass:sW,snapRadius:20,redundancyRemoval:!0,vertexAdding:!0,stopPropagation:!0,scale:null},children:[{tagName:"path",selector:"connection",className:"joint-vertices-path",attributes:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"cell"}}],handles:null,events:{"mousedown .joint-vertices-path":"onPathPointerDown","touchstart .joint-vertices-path":"onPathPointerDown"},onRender:function(){return this.options.vertexAdding&&(this.renderChildren(),this.updatePath()),this.resetHandles(),this.renderHandles(),this},update:function(){var t=this.relatedView,e=t.model.vertices();return e.length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.vertexAdding&&this.updatePath(),this},resetHandles:function(){var t=this.handles;if(this.handles=[],this.stopListening(),!!Array.isArray(t))for(var e=0,n=t.length;e<n;e++)t[e].remove()},renderHandles:function(){for(var t=this.relatedView,e=t.model.vertices(),n=0,r=e.length;n<r;n++){var i=e[n],o=new this.options.handleClass({index:n,paper:this.paper,scale:this.options.scale,guard:a=>this.guard(a)});o.render(),o.position(i.x,i.y),this.simulateRelatedView(o.el),o.vel.appendTo(this.el),this.handles.push(o),this.startHandleListening(o)}},updateHandles:function(){for(var t=this.relatedView,e=t.model.vertices(),n=0,r=e.length;n<r;n++){var i=e[n],o=this.handles[n];if(!o)return;o.position(i.x,i.y)}},updatePath:function(){var t=this.childNodes.connection;t&&t.setAttribute("d",this.relatedView.getSerializedConnection())},startHandleListening:function(t){var e=this.relatedView;e.can("vertexMove")&&(this.listenTo(t,"will-change",this.onHandleWillChange),this.listenTo(t,"changing",this.onHandleChanging),this.listenTo(t,"changed",this.onHandleChanged)),e.can("vertexRemove")&&this.listenTo(t,"remove",this.onHandleRemove)},getNeighborPoints:function(t){var e=this.relatedView,n=e.model.vertices(),r=t>0?n[t-1]:e.sourceAnchor,i=t<n.length-1?n[t+1]:e.targetAnchor;return{prev:new we(r),next:new we(i)}},onHandleWillChange:function(t,e){this.focus();const{relatedView:n,options:r}=this;n.model.startBatch("vertex-move",{ui:!0,tool:this.cid}),r.stopPropagation||n.notifyPointerdown(...n.paper.getPointerArgs(e))},onHandleChanging:function(t,e){const{options:n,relatedView:r}=this;var i=t.options.index,[o,a,s]=r.paper.getPointerArgs(e),l={x:a,y:s};this.snapVertex(l,i),r.model.vertex(i,l,{ui:!0,tool:this.cid}),t.position(l.x,l.y),n.stopPropagation||r.notifyPointermove(o,a,s)},onHandleChanged:function(t,e){const{options:n,relatedView:r}=this;if(n.vertexAdding&&this.updatePath(),!!n.redundancyRemoval){var i=r.removeRedundantLinearVertices({ui:!0,tool:this.cid});i&&this.render(),this.blur(),r.model.stopBatch("vertex-move",{ui:!0,tool:this.cid}),this.eventData(e).vertexAdded&&r.model.stopBatch("vertex-add",{ui:!0,tool:this.cid});var[o,a,s]=r.paper.getPointerArgs(e);n.stopPropagation||r.notifyPointerup(o,a,s),r.checkMouseleave(o)}},snapVertex:function(t,e){var n=this.options.snapRadius;if(n>0){var r=this.getNeighborPoints(e),i=r.prev,o=r.next;Math.abs(t.x-i.x)<n?t.x=i.x:Math.abs(t.x-o.x)<n&&(t.x=o.x),Math.abs(t.y-i.y)<n?t.y=r.prev.y:Math.abs(t.y-o.y)<n&&(t.y=o.y)}},onHandleRemove:function(t,e){var n=t.options.index,r=this.relatedView;r.model.removeVertex(n,{ui:!0}),this.options.vertexAdding&&this.updatePath(),r.checkMouseleave(bi(e))},onPathPointerDown:function(t){if(!this.guard(t)){t.stopPropagation(),t.preventDefault();var e=bi(t),n=this.paper.snapToGrid(e.clientX,e.clientY).toJSON(),r=this.relatedView;r.model.startBatch("vertex-add",{ui:!0,tool:this.cid});var i=r.getVertexIndex(n.x,n.y);this.snapVertex(n,i),r.model.insertVertex(i,n,{ui:!0,tool:this.cid}),this.update();var o=this.handles[i];this.eventData(e,{vertexAdded:!0}),o.onPointerDown(e)}},onRemove:function(){this.resetHandles()}},{VertexHandle:sW});function gBe(t,e){const{model:n}=t;return e?n.getBBox():n.isLink()?t.getConnection().bbox():t.getNodeUnrotatedBBox(t.el)}const U0=qL.extend({name:"button",events:{mousedown:"onPointerDown",touchstart:"onPointerDown"},options:{distance:0,offset:0,scale:null,rotate:!1},onRender:function(){this.renderChildren(this.options.markup),this.update()},update:function(){return this.position(),this},position:function(){const{vel:t}=this;t.transform(this.getCellMatrix(),{absolute:!0})},getCellMatrix(){return this.relatedView.model.isLink()?this.getLinkMatrix():this.getElementMatrix()},getElementMatrix(){const{relatedView:t,options:e}=this;let{x:n=0,y:r=0,offset:i={},useModelGeometry:o,rotate:a,scale:s}=e,l=gBe(t,o);const c=t.model.angle();a||(l=l.bbox(c));const{x:u=0,y:f=0}=i;Eo(n)?n=parseFloat(n)/100*l.width:wl(n)&&(n=Number(kl(n,l))),Eo(r)?r=parseFloat(r)/100*l.height:wl(r)&&(r=Number(kl(r,l)));let d=Ue.createSVGMatrix().translate(l.x+l.width/2,l.y+l.height/2);return a&&(d=d.rotate(c)),d=d.translate(n+u-l.width/2,r+f-l.height/2),s&&(d=d.scale(s)),d},getLinkMatrix(){const{relatedView:t,options:e}=this,{offset:n=0,distance:r=0,rotate:i,scale:o}=e;let a,s,l;Eo(r)?a=t.getTangentAtRatio(parseFloat(r)/100):a=t.getTangentAtLength(r),a?(s=a.start,l=a.vector().vectorAngle(new we(1,0))||0):(s=t.getConnection().start,l=0);let c=Ue.createSVGMatrix().translate(s.x,s.y).rotate(l).translate(0,n);return i||(c=c.rotate(-l)),o&&(c=c.scale(o)),c},onPointerDown:function(t){if(!this.guard(t)){t.stopPropagation(),t.preventDefault();var e=this.options.action;typeof e=="function"&&e.call(this.relatedView,t,this.relatedView,this)}}});U0.extend({children:[{tagName:"circle",selector:"button",attributes:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],options:{distance:60,offset:0,action:function(t,e,n){e.model.remove({ui:!0,tool:n.cid})}}});const mBe=U0.extend({name:"connect",documentEvents:{mousemove:"drag",touchmove:"drag",mouseup:"dragend",touchend:"dragend",touchcancel:"dragend"},children:[{tagName:"circle",selector:"button",attributes:{r:7,fill:"#333333",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"M -4 -1 L 0 -1 L 0 -4 L 4 0 L 0 4 0 1 -4 1 z",fill:"#FFFFFF",stroke:"none","stroke-width":2,"pointer-events":"none"}}],options:{distance:80,offset:0,magnet:t=>t.el,action:(t,e,n)=>n.dragstart(t)},getMagnetNode:function(){const{options:t,relatedView:e}=this,{magnet:n}=t;let r;switch(typeof n){case"function":{r=n.call(this,e,this);break}case"string":{[r]=e.findBySelector(n);break}default:{r=n;break}}if(r||(r=e.el),r instanceof SVGElement)return r;throw new Error("Connect: magnet must be an SVGElement")},dragstart:function(t){const{paper:e,relatedView:n}=this,r=bi(t),{x:i,y:o}=e.clientToLocalPoint(r.clientX,r.clientY);n.dragLinkStart(r,this.getMagnetNode(),i,o),e.undelegateEvents(),this.delegateDocumentEvents(null,r.data),this.focus()},drag:function(t){const{paper:e,relatedView:n}=this,r=bi(t),{x:i,y:o}=e.snapToGrid(r.clientX,r.clientY);n.dragLink(r,i,o)},dragend:function(t){const{paper:e,relatedView:n}=this,r=bi(t),{x:i,y:o}=e.snapToGrid(r.clientX,r.clientY);n.dragLinkEnd(r,i,o),this.undelegateDocumentEvents(),e.delegateEvents(),this.blur(),n.checkMouseleave(r)}});class lW extends Kse{constructor(e,n,r,i){super({source:{id:e,selector:".root"},target:{id:n,selector:".root"},attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}}),this.set("id",r),this.prop("jsonnetsType",i),this.connector("straight",{cornerType:"cubic"})}addInteractionTools(e){const n=new U0({markup:[{tagName:"circle",selector:"button",attributes:{r:8,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],distance:30,action:()=>{Zn().disconnect(String(this.id))}}),r=new y0({tools:[n]});let i=this.findView(e);i.addTools(r),i.hideTools()}addVerticesTools(e){var n=new pBe;const r=new y0({tools:[n]});let i=this.findView(e);i.addTools(r),i.hideTools()}}class Zse extends U0{constructor(e,n){super({markup:[{tagName:"circle",selector:"button",attributes:{r:8,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],useModelGeometry:!0,x:e,y:"100%",offset:{x:0,y:0},rotate:!0,action:function(){const r=Zn();n.get("jsonnetsType")==="place"?r.deletePlace(String(n.id)):n.get("jsonnetsType")==="transition"&&r.deleteTransition(String(n.id))}})}}class Qse extends U0{constructor(e,n){super({markup:[{tagName:"circle",selector:"button",attributes:{r:8,fill:"green",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"M -2 4 2 4 M 0 3 0 0 M -2 -1 1 -1 M -1 -4 1 -4",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],useModelGeometry:!0,x:e,y:"100%",offset:{x:0,y:0},rotate:!0,action:()=>{ta().setModal(n.get("jsonnetsType"),n.id)}})}}class ele extends mBe{constructor(){super({x:"100%",y:"50%",useModelGeometry:!0,markup:[{tagName:"circle",selector:"button",attributes:{r:8,fill:"#7a7e9b",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"M -4 -1 L 0 -1 L 0 -4 L 4 0 L 0 4 0 1 -4 1 z",fill:"#FFFFFF",stroke:"none","stroke-width":2,"pointer-events":"none"}}]})}}class cW extends Xse{constructor(e,n,r,i,o){super({position:{x:e-25,y:n-25},attrs:{".label":{text:r,fill:"#7a7e9b"},".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2}},tokens:o}),this.set("id",i),this.prop("jsonnetsType","place")}addInteractionTools(e){const n="25%",r="75%",i=new Zse(n,this),o=new Qse(r,this),a=new y0({tools:[i,o]}),s=this.findView(e);s.addTools(a),s.hideTools()}addConnectTools(e){const n=new ele,r=new y0({tools:[n]}),i=this.findView(e);i.addTools(r),i.hideTools()}}class uW extends Jse{constructor(e,n,r,i){super({position:{x:e-25,y:n-25},attrs:{".label":{text:r,fill:"#7a7e9b"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"}}}),this.set("id",i),this.prop("jsonnetsType","transition"),this.resize(100,50)}addInteractionTools(e){const n="0%",r="100%",i=new Zse(n,this),o=new Qse(r,this),a=new U0({markup:[{tagName:"circle",selector:"button",attributes:{r:8,fill:"blue",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"M75,5 l-60,0 0,90 M15,45 l50,0",transform:"translate(-3,-3) scale(0.09)",fill:"none",stroke:"white","stroke-width":20,cursor:"pointer"}}],useModelGeometry:!0,x:"50%",y:"100%",offset:{x:0,y:0},rotate:!0,action:()=>{Zn().fireUnderAnyAssignment(String(this.id))}}),s=new y0({tools:[i,o,a]}),l=this.findView(e);l.addTools(s),l.hideTools()}addConnectTools(e){const n=new ele,r=new y0({tools:[n]}),i=this.findView(e);i.addTools(r),i.hideTools()}}var vBe="\0",vp="\0",fW="",Wa,eg,Ps,N2,Gv,qv,fl,qc,bd,Yc,Sd,ef,tf,Yv,Kv,nf,tc,M2,TO,rK;let yBe=(rK=class{constructor(e){ri(this,M2);ri(this,Wa,!0);ri(this,eg,!1);ri(this,Ps,!1);ri(this,N2,void 0);ri(this,Gv,()=>{});ri(this,qv,()=>{});ri(this,fl,{});ri(this,qc,{});ri(this,bd,{});ri(this,Yc,{});ri(this,Sd,{});ri(this,ef,{});ri(this,tf,{});ri(this,Yv,0);ri(this,Kv,0);ri(this,nf,void 0);ri(this,tc,void 0);e&&(il(this,Wa,e.hasOwnProperty("directed")?e.directed:!0),il(this,eg,e.hasOwnProperty("multigraph")?e.multigraph:!1),il(this,Ps,e.hasOwnProperty("compound")?e.compound:!1)),rt(this,Ps)&&(il(this,nf,{}),il(this,tc,{}),rt(this,tc)[vp]={})}isDirected(){return rt(this,Wa)}isMultigraph(){return rt(this,eg)}isCompound(){return rt(this,Ps)}setGraph(e){return il(this,N2,e),this}graph(){return rt(this,N2)}setDefaultNodeLabel(e){return il(this,Gv,e),typeof e!="function"&&il(this,Gv,()=>e),this}nodeCount(){return rt(this,Yv)}nodes(){return Object.keys(rt(this,fl))}sources(){var e=this;return this.nodes().filter(n=>Object.keys(rt(e,qc)[n]).length===0)}sinks(){var e=this;return this.nodes().filter(n=>Object.keys(rt(e,Yc)[n]).length===0)}setNodes(e,n){var r=arguments,i=this;return e.forEach(function(o){r.length>1?i.setNode(o,n):i.setNode(o)}),this}setNode(e,n){return rt(this,fl).hasOwnProperty(e)?(arguments.length>1&&(rt(this,fl)[e]=n),this):(rt(this,fl)[e]=arguments.length>1?n:rt(this,Gv).call(this,e),rt(this,Ps)&&(rt(this,nf)[e]=vp,rt(this,tc)[e]={},rt(this,tc)[vp][e]=!0),rt(this,qc)[e]={},rt(this,bd)[e]={},rt(this,Yc)[e]={},rt(this,Sd)[e]={},++Oy(this,Yv)._,this)}node(e){return rt(this,fl)[e]}hasNode(e){return rt(this,fl).hasOwnProperty(e)}removeNode(e){var n=this;if(rt(this,fl).hasOwnProperty(e)){var r=i=>n.removeEdge(rt(n,ef)[i]);delete rt(this,fl)[e],rt(this,Ps)&&(Dc(this,M2,TO).call(this,e),delete rt(this,nf)[e],this.children(e).forEach(function(i){n.setParent(i)}),delete rt(this,tc)[e]),Object.keys(rt(this,qc)[e]).forEach(r),delete rt(this,qc)[e],delete rt(this,bd)[e],Object.keys(rt(this,Yc)[e]).forEach(r),delete rt(this,Yc)[e],delete rt(this,Sd)[e],--Oy(this,Yv)._}return this}setParent(e,n){if(!rt(this,Ps))throw new Error("Cannot set parent in a non-compound graph");if(n===void 0)n=vp;else{n+="";for(var r=n;r!==void 0;r=this.parent(r))if(r===e)throw new Error("Setting "+n+" as parent of "+e+" would create a cycle");this.setNode(n)}return this.setNode(e),Dc(this,M2,TO).call(this,e),rt(this,nf)[e]=n,rt(this,tc)[n][e]=!0,this}parent(e){if(rt(this,Ps)){var n=rt(this,nf)[e];if(n!==vp)return n}}children(e=vp){if(rt(this,Ps)){var n=rt(this,tc)[e];if(n)return Object.keys(n)}else{if(e===vp)return this.nodes();if(this.hasNode(e))return[]}}predecessors(e){var n=rt(this,bd)[e];if(n)return Object.keys(n)}successors(e){var n=rt(this,Sd)[e];if(n)return Object.keys(n)}neighbors(e){var n=this.predecessors(e);if(n){const i=new Set(n);for(var r of this.successors(e))i.add(r);return Array.from(i.values())}}isLeaf(e){var n;return this.isDirected()?n=this.successors(e):n=this.neighbors(e),n.length===0}filterNodes(e){var n=new this.constructor({directed:rt(this,Wa),multigraph:rt(this,eg),compound:rt(this,Ps)});n.setGraph(this.graph());var r=this;Object.entries(rt(this,fl)).forEach(function([a,s]){e(a)&&n.setNode(a,s)}),Object.values(rt(this,ef)).forEach(function(a){n.hasNode(a.v)&&n.hasNode(a.w)&&n.setEdge(a,r.edge(a))});var i={};function o(a){var s=r.parent(a);return s===void 0||n.hasNode(s)?(i[a]=s,s):s in i?i[s]:o(s)}return rt(this,Ps)&&n.nodes().forEach(a=>n.setParent(a,o(a))),n}setDefaultEdgeLabel(e){return il(this,qv,e),typeof e!="function"&&il(this,qv,()=>e),this}edgeCount(){return rt(this,Kv)}edges(){return Object.values(rt(this,ef))}setPath(e,n){var r=this,i=arguments;return e.reduce(function(o,a){return i.length>1?r.setEdge(o,a,n):r.setEdge(o,a),a}),this}setEdge(){var e,n,r,i,o=!1,a=arguments[0];typeof a=="object"&&a!==null&&"v"in a?(e=a.v,n=a.w,r=a.name,arguments.length===2&&(i=arguments[1],o=!0)):(e=a,n=arguments[1],r=arguments[3],arguments.length>2&&(i=arguments[2],o=!0)),e=""+e,n=""+n,r!==void 0&&(r=""+r);var s=Db(rt(this,Wa),e,n,r);if(rt(this,tf).hasOwnProperty(s))return o&&(rt(this,tf)[s]=i),this;if(r!==void 0&&!rt(this,eg))throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(n),rt(this,tf)[s]=o?i:rt(this,qv).call(this,e,n,r);var l=bBe(rt(this,Wa),e,n,r);return e=l.v,n=l.w,Object.freeze(l),rt(this,ef)[s]=l,dW(rt(this,bd)[n],e),dW(rt(this,Sd)[e],n),rt(this,qc)[n][s]=l,rt(this,Yc)[e][s]=l,Oy(this,Kv)._++,this}edge(e,n,r){var i=arguments.length===1?N7(rt(this,Wa),arguments[0]):Db(rt(this,Wa),e,n,r);return rt(this,tf)[i]}edgeAsObj(){const e=this.edge(...arguments);return typeof e!="object"?{label:e}:e}hasEdge(e,n,r){var i=arguments.length===1?N7(rt(this,Wa),arguments[0]):Db(rt(this,Wa),e,n,r);return rt(this,tf).hasOwnProperty(i)}removeEdge(e,n,r){var i=arguments.length===1?N7(rt(this,Wa),arguments[0]):Db(rt(this,Wa),e,n,r),o=rt(this,ef)[i];return o&&(e=o.v,n=o.w,delete rt(this,tf)[i],delete rt(this,ef)[i],hW(rt(this,bd)[n],e),hW(rt(this,Sd)[e],n),delete rt(this,qc)[n][i],delete rt(this,Yc)[e][i],Oy(this,Kv)._--),this}inEdges(e,n){var r=rt(this,qc)[e];if(r){var i=Object.values(r);return n?i.filter(o=>o.v===n):i}}outEdges(e,n){var r=rt(this,Yc)[e];if(r){var i=Object.values(r);return n?i.filter(o=>o.w===n):i}}nodeEdges(e,n){var r=this.inEdges(e,n);if(r)return r.concat(this.outEdges(e,n))}},Wa=new WeakMap,eg=new WeakMap,Ps=new WeakMap,N2=new WeakMap,Gv=new WeakMap,qv=new WeakMap,fl=new WeakMap,qc=new WeakMap,bd=new WeakMap,Yc=new WeakMap,Sd=new WeakMap,ef=new WeakMap,tf=new WeakMap,Yv=new WeakMap,Kv=new WeakMap,nf=new WeakMap,tc=new WeakMap,M2=new WeakSet,TO=function(e){delete rt(this,tc)[rt(this,nf)[e]][e]},rK);function dW(t,e){t[e]?t[e]++:t[e]=1}function hW(t,e){--t[e]||delete t[e]}function Db(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var a=i;i=o,o=a}return i+fW+o+fW+(r===void 0?vBe:r)}function bBe(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var a=i;i=o,o=a}var s={v:i,w:o};return r&&(s.name=r),s}function N7(t,e){return Db(t,e.v,e.w,e.name)}var YL=yBe,SBe="2.1.13",_Be={Graph:YL,version:SBe},wBe=YL,kBe={write:xBe,read:ABe};function xBe(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:CBe(t),edges:TBe(t)};return t.graph()!==void 0&&(e.value=structuredClone(t.graph())),e}function CBe(t){return t.nodes().map(function(e){var n=t.node(e),r=t.parent(e),i={v:e};return n!==void 0&&(i.value=n),r!==void 0&&(i.parent=r),i})}function TBe(t){return t.edges().map(function(e){var n=t.edge(e),r={v:e.v,w:e.w};return e.name!==void 0&&(r.name=e.name),n!==void 0&&(r.value=n),r})}function ABe(t){var e=new wBe(t.options).setGraph(t.value);return t.nodes.forEach(function(n){e.setNode(n.v,n.value),n.parent&&e.setParent(n.v,n.parent)}),t.edges.forEach(function(n){e.setEdge({v:n.v,w:n.w,name:n.name},n.value)}),e}var PBe=EBe;function EBe(t){var e={},n=[],r;function i(o){e.hasOwnProperty(o)||(e[o]=!0,r.push(o),t.successors(o).forEach(i),t.predecessors(o).forEach(i))}return t.nodes().forEach(function(o){r=[],i(o),r.length&&n.push(r)}),n}var jo,rf,R2,AO,z2,PO,Xv,Ix,iK;let OBe=(iK=class{constructor(){ri(this,R2);ri(this,z2);ri(this,Xv);ri(this,jo,[]);ri(this,rf,{})}size(){return rt(this,jo).length}keys(){return rt(this,jo).map(function(e){return e.key})}has(e){return rt(this,rf).hasOwnProperty(e)}priority(e){var n=rt(this,rf)[e];if(n!==void 0)return rt(this,jo)[n].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return rt(this,jo)[0].key}add(e,n){var r=rt(this,rf);if(e=String(e),!r.hasOwnProperty(e)){var i=rt(this,jo),o=i.length;return r[e]=o,i.push({key:e,priority:n}),Dc(this,z2,PO).call(this,o),!0}return!1}removeMin(){Dc(this,Xv,Ix).call(this,0,rt(this,jo).length-1);var e=rt(this,jo).pop();return delete rt(this,rf)[e.key],Dc(this,R2,AO).call(this,0),e.key}decrease(e,n){var r=rt(this,rf)[e];if(n>rt(this,jo)[r].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+rt(this,jo)[r].priority+" New: "+n);rt(this,jo)[r].priority=n,Dc(this,z2,PO).call(this,r)}},jo=new WeakMap,rf=new WeakMap,R2=new WeakSet,AO=function(e){var n=rt(this,jo),r=2*e,i=r+1,o=e;r<n.length&&(o=n[r].priority<n[o].priority?r:o,i<n.length&&(o=n[i].priority<n[o].priority?i:o),o!==e&&(Dc(this,Xv,Ix).call(this,e,o),Dc(this,R2,AO).call(this,o)))},z2=new WeakSet,PO=function(e){for(var n=rt(this,jo),r=n[e].priority,i;e!==0&&(i=e>>1,!(n[i].priority<r));)Dc(this,Xv,Ix).call(this,e,i),e=i},Xv=new WeakSet,Ix=function(e,n){var r=rt(this,jo),i=rt(this,rf),o=r[e],a=r[n];r[e]=a,r[n]=o,i[a.key]=e,i[o.key]=n},iK);var tle=OBe,IBe=tle,nle=FBe,$Be=()=>1;function FBe(t,e,n,r){return LBe(t,String(e),n||$Be,r||function(i){return t.outEdges(i)})}function LBe(t,e,n,r){var i={},o=new IBe,a,s,l=function(c){var u=c.v!==a?c.v:c.w,f=i[u],d=n(c),h=s.distance+d;if(d<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+c+" Weight: "+d);h<f.distance&&(f.distance=h,f.predecessor=a,o.decrease(u,h))};for(t.nodes().forEach(function(c){var u=c===e?0:Number.POSITIVE_INFINITY;i[c]={distance:u},o.add(c,u)});o.size()>0&&(a=o.removeMin(),s=i[a],s.distance!==Number.POSITIVE_INFINITY);)r(a).forEach(l);return i}var DBe=nle,NBe=MBe;function MBe(t,e,n){return t.nodes().reduce(function(r,i){return r[i]=DBe(t,i,e,n),r},{})}var rle=RBe;function RBe(t){var e=0,n=[],r={},i=[];function o(a){var s=r[a]={onStack:!0,lowlink:e,index:e++};if(n.push(a),t.successors(a).forEach(function(u){r.hasOwnProperty(u)?r[u].onStack&&(s.lowlink=Math.min(s.lowlink,r[u].index)):(o(u),s.lowlink=Math.min(s.lowlink,r[u].lowlink))}),s.lowlink===s.index){var l=[],c;do c=n.pop(),r[c].onStack=!1,l.push(c);while(a!==c);i.push(l)}}return t.nodes().forEach(function(a){r.hasOwnProperty(a)||o(a)}),i}var zBe=rle,VBe=BBe;function BBe(t){return zBe(t).filter(function(e){return e.length>1||e.length===1&&t.hasEdge(e[0],e[0])})}var jBe=UBe,HBe=()=>1;function UBe(t,e,n){return WBe(t,e||HBe,n||function(r){return t.outEdges(r)})}function WBe(t,e,n){var r={},i=t.nodes();return i.forEach(function(o){r[o]={},r[o][o]={distance:0},i.forEach(function(a){o!==a&&(r[o][a]={distance:Number.POSITIVE_INFINITY})}),n(o).forEach(function(a){var s=a.v===o?a.w:a.v,l=e(a);r[o][s]={distance:l,predecessor:o}})}),i.forEach(function(o){var a=r[o];i.forEach(function(s){var l=r[s];i.forEach(function(c){var u=l[o],f=a[c],d=l[c],h=u.distance+f.distance;h<d.distance&&(d.distance=h,d.predecessor=f.predecessor)})})}),r}function ile(t){var e={},n={},r=[];function i(o){if(n.hasOwnProperty(o))throw new EO;e.hasOwnProperty(o)||(n[o]=!0,e[o]=!0,t.predecessors(o).forEach(i),delete n[o],r.push(o))}if(t.sinks().forEach(i),Object.keys(e).length!==t.nodeCount())throw new EO;return r}class EO extends Error{constructor(){super(...arguments)}}var ole=ile;ile.CycleException=EO;var pW=ole,GBe=qBe;function qBe(t){try{pW(t)}catch(e){if(e instanceof pW.CycleException)return!1;throw e}return!0}var ale=YBe;function YBe(t,e,n){Array.isArray(e)||(e=[e]);var r=t.isDirected()?s=>t.successors(s):s=>t.neighbors(s),i=n==="post"?KBe:XBe,o=[],a={};return e.forEach(s=>{if(!t.hasNode(s))throw new Error("Graph does not have node: "+s);i(s,r,a,o)}),o}function KBe(t,e,n,r){for(var i=[[t,!1]];i.length>0;){var o=i.pop();o[1]?r.push(o[0]):n.hasOwnProperty(o[0])||(n[o[0]]=!0,i.push([o[0],!0]),sle(e(o[0]),a=>i.push([a,!1])))}}function XBe(t,e,n,r){for(var i=[t];i.length>0;){var o=i.pop();n.hasOwnProperty(o)||(n[o]=!0,r.push(o),sle(e(o),a=>i.push(a)))}}function sle(t,e){for(var n=t.length;n--;)e(t[n],n,t);return t}var JBe=ale,ZBe=QBe;function QBe(t,e){return JBe(t,e,"post")}var eje=ale,tje=nje;function nje(t,e){return eje(t,e,"pre")}var rje=YL,ije=tle,oje=aje;function aje(t,e){var n=new rje,r={},i=new ije,o;function a(l){var c=l.v===o?l.w:l.v,u=i.priority(c);if(u!==void 0){var f=e(l);f<u&&(r[c]=o,i.decrease(c,f))}}if(t.nodeCount()===0)return n;t.nodes().forEach(function(l){i.add(l,Number.POSITIVE_INFINITY),n.setNode(l)}),i.decrease(t.nodes()[0],0);for(var s=!1;i.size()>0;){if(o=i.removeMin(),r.hasOwnProperty(o))n.setEdge(o,r[o]);else{if(s)throw new Error("Input graph is not connected: "+t);s=!0}t.nodeEdges(o).forEach(a)}return n}var sje={components:PBe,dijkstra:nle,dijkstraAll:NBe,findCycles:VBe,floydWarshall:jBe,isAcyclic:GBe,postorder:ZBe,preorder:tje,prim:oje,tarjan:rle,topsort:ole},gW=_Be,Gs={Graph:gW.Graph,json:kBe,alg:sje,version:gW.version};const lje=pr(Gs),cje=oK({__proto__:null,default:lje},[Gs]);var uje=O3;function O3(){var t={};t._next=t._prev=t,this._sentinel=t}O3.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return lle(e),e};O3.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&lle(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e};O3.prototype.toString=function(){for(var t=[],e=this._sentinel,n=e._prev;n!==e;)t.push(JSON.stringify(n,fje)),n=n._prev;return"["+t.join(", ")+"]"};function lle(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function fje(t,e){if(t!=="_next"&&t!=="_prev")return e}var dje=Gs.Graph,hje=uje,pje=mje,gje=()=>1;function mje(t,e){if(t.nodeCount()<=1)return[];var n=yje(t,e||gje),r=vje(n.graph,n.buckets,n.zeroIdx);return r.flatMap(i=>t.outEdges(i.v,i.w))}function vje(t,e,n){for(var r=[],i=e[e.length-1],o=e[0],a;t.nodeCount();){for(;a=o.dequeue();)M7(t,e,n,a);for(;a=i.dequeue();)M7(t,e,n,a);if(t.nodeCount()){for(var s=e.length-2;s>0;--s)if(a=e[s].dequeue(),a){r=r.concat(M7(t,e,n,a,!0));break}}}return r}function M7(t,e,n,r,i){var o=i?[]:void 0;return t.inEdges(r.v).forEach(function(a){var s=t.edge(a),l=t.node(a.v);i&&o.push({v:a.v,w:a.w}),l.out-=s,OO(e,n,l)}),t.outEdges(r.v).forEach(function(a){var s=t.edge(a),l=a.w,c=t.node(l);c.in-=s,OO(e,n,c)}),t.removeNode(r.v),o}function yje(t,e){var n=new dje,r=0,i=0;t.nodes().forEach(function(s){n.setNode(s,{v:s,in:0,out:0})}),t.edges().forEach(function(s){var l=n.edge(s.v,s.w)||0,c=e(s),u=l+c;n.setEdge(s.v,s.w,u),i=Math.max(i,n.node(s.v).out+=c),r=Math.max(r,n.node(s.w).in+=c)});var o=bje(i+r+3).map(()=>new hje),a=r+1;return n.nodes().forEach(function(s){OO(o,a,n.node(s))}),{graph:n,buckets:o,zeroIdx:a}}function OO(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}function bje(t){const e=[];for(let n=0;n<t;n++)e.push(n);return e}var cle=Gs.Graph,to={addBorderNode:Pje,addDummyNode:ule,asNonCompoundGraph:_je,buildLayerMatrix:Cje,intersectRect:xje,mapValues:Lje,maxRank:fle,normalizeRanks:Tje,notime:Ije,partition:Eje,pick:Fje,predecessorWeights:kje,range:hle,removeEmptyRanks:Aje,simplify:Sje,successorWeights:wje,time:Oje,uniqueId:dle,zipObject:KL};function ule(t,e,n,r){var i;do i=dle(r);while(t.hasNode(i));return n.dummy=e,t.setNode(i,n),i}function Sje(t){var e=new cle().setGraph(t.graph());return t.nodes().forEach(n=>e.setNode(n,t.node(n))),t.edges().forEach(n=>{var r=e.edge(n.v,n.w)||{weight:0,minlen:1},i=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),e}function _je(t){var e=new cle({multigraph:t.isMultigraph()}).setGraph(t.graph());return t.nodes().forEach(n=>{t.children(n).length||e.setNode(n,t.node(n))}),t.edges().forEach(n=>{e.setEdge(n,t.edge(n))}),e}function wje(t){var e=t.nodes().map(n=>{var r={};return t.outEdges(n).forEach(i=>{r[i.w]=(r[i.w]||0)+t.edge(i).weight}),r});return KL(t.nodes(),e)}function kje(t){var e=t.nodes().map(n=>{var r={};return t.inEdges(n).forEach(i=>{r[i.v]=(r[i.v]||0)+t.edge(i).weight}),r});return KL(t.nodes(),e)}function xje(t,e){var n=t.x,r=t.y,i=e.x-n,o=e.y-r,a=t.width/2,s=t.height/2;if(!i&&!o)throw new Error("Not possible to find intersection inside of the rectangle");var l,c;return Math.abs(o)*a>Math.abs(i)*s?(o<0&&(s=-s),l=s*i/o,c=s):(i<0&&(a=-a),l=a,c=a*o/i),{x:n+l,y:r+c}}function Cje(t){var e=hle(fle(t)+1).map(()=>[]);return t.nodes().forEach(n=>{var r=t.node(n),i=r.rank;i!==void 0&&(e[i][r.order]=n)}),e}function Tje(t){var e=Math.min(...t.nodes().map(n=>{var r=t.node(n).rank;return r===void 0?Number.MAX_VALUE:r}));t.nodes().forEach(n=>{var r=t.node(n);r.hasOwnProperty("rank")&&(r.rank-=e)})}function Aje(t){var e=Math.min(...t.nodes().map(o=>t.node(o).rank)),n=[];t.nodes().forEach(o=>{var a=t.node(o).rank-e;n[a]||(n[a]=[]),n[a].push(o)});var r=0,i=t.graph().nodeRankFactor;Array.from(n).forEach((o,a)=>{o===void 0&&a%i!==0?--r:o!==void 0&&r&&o.forEach(s=>t.node(s).rank+=r)})}function Pje(t,e,n,r){var i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),ule(t,"border",i,e)}function fle(t){return Math.max(...t.nodes().map(e=>{var n=t.node(e).rank;return n===void 0?Number.MIN_VALUE:n}))}function Eje(t,e){var n={lhs:[],rhs:[]};return t.forEach(r=>{e(r)?n.lhs.push(r):n.rhs.push(r)}),n}function Oje(t,e){var n=Date.now();try{return e()}finally{console.log(t+" time: "+(Date.now()-n)+"ms")}}function Ije(t,e){return e()}let $je=0;function dle(t){var e=++$je;return toString(t)+e}function hle(t,e,n=1){e==null&&(e=t,t=0);let r=o=>o<e;n<0&&(r=o=>e<o);const i=[];for(let o=t;r(o);o+=n)i.push(o);return i}function Fje(t,e){const n={};for(const r of e)t[r]!==void 0&&(n[r]=t[r]);return n}function Lje(t,e){let n=e;return typeof e=="string"&&(n=r=>r[e]),Object.entries(t).reduce((r,[i,o])=>(r[i]=n(o,i),r),{})}function KL(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}var Dje=pje,Nje=to.uniqueId,Mje={run:Rje,undo:Vje};function Rje(t){var e=t.graph().acyclicer==="greedy"?Dje(t,n(t)):zje(t);e.forEach(function(r){var i=t.edge(r);t.removeEdge(r),i.forwardName=r.name,i.reversed=!0,t.setEdge(r.w,r.v,i,Nje("rev"))});function n(r){return function(i){return r.edge(i).weight}}}function zje(t){var e=[],n={},r={};function i(o){r.hasOwnProperty(o)||(r[o]=!0,n[o]=!0,t.outEdges(o).forEach(function(a){n.hasOwnProperty(a.w)?e.push(a):i(a.w)}),delete n[o])}return t.nodes().forEach(i),e}function Vje(t){t.edges().forEach(function(e){var n=t.edge(e);if(n.reversed){t.removeEdge(e);var r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}})}var Bje=to,jje={run:Hje,undo:Wje};function Hje(t){t.graph().dummyChains=[],t.edges().forEach(e=>Uje(t,e))}function Uje(t,e){var n=e.v,r=t.node(n).rank,i=e.w,o=t.node(i).rank,a=e.name,s=t.edge(e),l=s.labelRank;if(o!==r+1){t.removeEdge(e);var c,u,f;for(f=0,++r;r<o;++f,++r)s.points=[],u={width:0,height:0,edgeLabel:s,edgeObj:e,rank:r},c=Bje.addDummyNode(t,"edge",u,"_d"),r===l&&(u.width=s.width,u.height=s.height,u.dummy="edge-label",u.labelpos=s.labelpos),t.setEdge(n,c,{weight:s.weight},a),f===0&&t.graph().dummyChains.push(c),n=c;t.setEdge(n,i,{weight:s.weight},a)}}function Wje(t){t.graph().dummyChains.forEach(function(e){var n=t.node(e),r=n.edgeLabel,i;for(t.setEdge(n.edgeObj,r);n.dummy;)i=t.successors(e)[0],t.removeNode(e),r.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),e=i,n=t.node(e)})}var I3={longestPath:Gje,slack:qje};function Gje(t){var e={};function n(r){var i=t.node(r);if(e.hasOwnProperty(r))return i.rank;e[r]=!0;var o=Math.min(...t.outEdges(r).map(a=>a==null?Number.POSITIVE_INFINITY:n(a.w)-t.edge(a).minlen));return o===Number.POSITIVE_INFINITY&&(o=0),i.rank=o}t.sources().forEach(n)}function qje(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}var Yje=Gs.Graph,TC=I3.slack,ple=Kje;function Kje(t){var e=new Yje({directed:!1}),n=t.nodes()[0],r=t.nodeCount();e.setNode(n,{});for(var i,o;Xje(e,t)<r;)i=Jje(e,t),o=e.hasNode(i.v)?TC(t,i):-TC(t,i),Zje(e,t,o);return e}function Xje(t,e){function n(r){e.nodeEdges(r).forEach(function(i){var o=i.v,a=r===o?i.w:o;!t.hasNode(a)&&!TC(e,i)&&(t.setNode(a,{}),t.setEdge(r,a,{}),n(a))})}return t.nodes().forEach(n),t.nodeCount()}function Jje(t,e){return e.edges().reduce((r,i)=>{let o=Number.POSITIVE_INFINITY;return t.hasNode(i.v)!==t.hasNode(i.w)&&(o=TC(e,i)),o<r[0]?[o,i]:r},[Number.POSITIVE_INFINITY,null])[1]}function Zje(t,e,n){t.nodes().forEach(r=>e.node(r).rank+=n)}var Qje=ple,mW=I3.slack,eHe=I3.longestPath,tHe=Gs.alg.preorder,nHe=Gs.alg.postorder,rHe=to.simplify,iHe=tm;tm.initLowLimValues=JL;tm.initCutValues=XL;tm.calcCutValue=gle;tm.leaveEdge=vle;tm.enterEdge=yle;tm.exchangeEdges=ble;function tm(t){t=rHe(t),eHe(t);var e=Qje(t);JL(e),XL(e,t);for(var n,r;n=vle(e);)r=yle(e,t,n),ble(e,t,n,r)}function XL(t,e){var n=nHe(t,t.nodes());n=n.slice(0,n.length-1),n.forEach(r=>oHe(t,e,r))}function oHe(t,e,n){var r=t.node(n),i=r.parent;t.edge(n,i).cutvalue=gle(t,e,n)}function gle(t,e,n){var r=t.node(n),i=r.parent,o=!0,a=e.edge(n,i),s=0;return a||(o=!1,a=e.edge(i,n)),s=a.weight,e.nodeEdges(n).forEach(function(l){var c=l.v===n,u=c?l.w:l.v;if(u!==i){var f=c===o,d=e.edge(l).weight;if(s+=f?d:-d,sHe(t,n,u)){var h=t.edge(n,u).cutvalue;s+=f?-h:h}}}),s}function JL(t,e){arguments.length<2&&(e=t.nodes()[0]),mle(t,{},1,e)}function mle(t,e,n,r,i){var o=n,a=t.node(r);return e[r]=!0,t.neighbors(r).forEach(function(s){e.hasOwnProperty(s)||(n=mle(t,e,n,s,r))}),a.low=o,a.lim=n++,i?a.parent=i:delete a.parent,n}function vle(t){return t.edges().find(e=>t.edge(e).cutvalue<0)}function yle(t,e,n){var r=n.v,i=n.w;e.hasEdge(r,i)||(r=n.w,i=n.v);var o=t.node(r),a=t.node(i),s=o,l=!1;o.lim>a.lim&&(s=a,l=!0);var c=e.edges().filter(function(u){return l===vW(t,t.node(u.v),s)&&l!==vW(t,t.node(u.w),s)});return c.reduce((u,f)=>mW(e,f)<mW(e,u)?f:u)}function ble(t,e,n,r){var i=n.v,o=n.w;t.removeEdge(i,o),t.setEdge(r.v,r.w,{}),JL(t),XL(t,e),aHe(t,e)}function aHe(t,e){var n=t.nodes().find(i=>!e.node(i).parent),r=tHe(t,n);r=r.slice(1),r.forEach(function(i){var o=t.node(i).parent,a=e.edge(i,o),s=!1;a||(a=e.edge(o,i),s=!0),e.node(i).rank=e.node(o).rank+(s?a.minlen:-a.minlen)})}function sHe(t,e,n){return t.hasEdge(e,n)}function vW(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}var lHe=I3,Sle=lHe.longestPath,cHe=ple,uHe=iHe,fHe=dHe;function dHe(t){switch(t.graph().ranker){case"network-simplex":yW(t);break;case"tight-tree":pHe(t);break;case"longest-path":hHe(t);break;default:yW(t)}}var hHe=Sle;function pHe(t){Sle(t),cHe(t)}function yW(t){uHe(t)}var gHe=mHe;function mHe(t){var e=yHe(t);t.graph().dummyChains.forEach(function(n){for(var r=t.node(n),i=r.edgeObj,o=vHe(t,e,i.v,i.w),a=o.path,s=o.lca,l=0,c=a[l],u=!0;n!==i.w;){if(r=t.node(n),u){for(;(c=a[l])!==s&&t.node(c).maxRank<r.rank;)l++;c===s&&(u=!1)}if(!u){for(;l<a.length-1&&t.node(c=a[l+1]).minRank<=r.rank;)l++;c=a[l]}t.setParent(n,c),n=t.successors(n)[0]}})}function vHe(t,e,n,r){var i=[],o=[],a=Math.min(e[n].low,e[r].low),s=Math.max(e[n].lim,e[r].lim),l,c;l=n;do l=t.parent(l),i.push(l);while(l&&(e[l].low>a||s>e[l].lim));for(c=l,l=r;(l=t.parent(l))!==c;)o.push(l);return{path:i.concat(o.reverse()),lca:c}}function yHe(t){var e={},n=0;function r(i){var o=n;t.children(i).forEach(r),e[i]={low:o,lim:n++}}return t.children().forEach(r),e}var IO=to,bHe={run:SHe,cleanup:kHe};function SHe(t){var e=IO.addDummyNode(t,"root",{},"_root"),n=_He(t),r=Math.max(...Object.values(n))-1,i=2*r+1;t.graph().nestingRoot=e,t.edges().forEach(a=>t.edge(a).minlen*=i);var o=wHe(t)+1;t.children().forEach(function(a){_le(t,e,i,o,r,n,a)}),t.graph().nodeRankFactor=i}function _le(t,e,n,r,i,o,a){var s=t.children(a);if(!s.length){a!==e&&t.setEdge(e,a,{weight:0,minlen:n});return}var l=IO.addBorderNode(t,"_bt"),c=IO.addBorderNode(t,"_bb"),u=t.node(a);t.setParent(l,a),u.borderTop=l,t.setParent(c,a),u.borderBottom=c,s.forEach(function(f){_le(t,e,n,r,i,o,f);var d=t.node(f),h=d.borderTop?d.borderTop:f,g=d.borderBottom?d.borderBottom:f,y=d.borderTop?r:2*r,S=h!==g?1:i-o[a]+1;t.setEdge(l,h,{weight:y,minlen:S,nestingEdge:!0}),t.setEdge(g,c,{weight:y,minlen:S,nestingEdge:!0})}),t.parent(a)||t.setEdge(e,l,{weight:0,minlen:i+o[a]})}function _He(t){var e={};function n(r,i){var o=t.children(r);o&&o.length&&o.forEach(a=>n(a,i+1)),e[r]=i}return t.children().forEach(r=>n(r,1)),e}function wHe(t){return t.edges().reduce((e,n)=>e+t.edge(n).weight,0)}function kHe(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,t.edges().forEach(n=>{var r=t.edge(n);r.nestingEdge&&t.removeEdge(n)})}var xHe=to,CHe=THe;function THe(t){function e(n){var r=t.children(n),i=t.node(n);if(r.length&&r.forEach(e),i.hasOwnProperty("minRank")){i.borderLeft=[],i.borderRight=[];for(var o=i.minRank,a=i.maxRank+1;o<a;++o)bW(t,"borderLeft","_bl",n,i,o),bW(t,"borderRight","_br",n,i,o)}}t.children().forEach(e)}function bW(t,e,n,r,i,o){var a={width:0,height:0,rank:o,borderType:e},s=i[e][o-1],l=xHe.addDummyNode(t,"border",a,n);i[e][o]=l,t.setParent(l,r),s&&t.setEdge(s,l,{weight:1})}var AHe={adjust:PHe,undo:EHe};function PHe(t){var e=t.graph().rankdir.toLowerCase();(e==="lr"||e==="rl")&&wle(t)}function EHe(t){var e=t.graph().rankdir.toLowerCase();(e==="bt"||e==="rl")&&OHe(t),(e==="lr"||e==="rl")&&(IHe(t),wle(t))}function wle(t){t.nodes().forEach(e=>SW(t.node(e))),t.edges().forEach(e=>SW(t.edge(e)))}function SW(t){var e=t.width;t.width=t.height,t.height=e}function OHe(t){t.nodes().forEach(e=>R7(t.node(e))),t.edges().forEach(function(e){var n=t.edge(e);n.points.forEach(R7),n.hasOwnProperty("y")&&R7(n)})}function R7(t){t.y=-t.y}function IHe(t){t.nodes().forEach(e=>z7(t.node(e))),t.edges().forEach(function(e){var n=t.edge(e);n.points.forEach(z7),n.hasOwnProperty("x")&&z7(n)})}function z7(t){var e=t.x;t.x=t.y,t.y=e}var $He=to,FHe=LHe;function LHe(t){var e={},n=t.nodes().filter(s=>!t.children(s).length),r=Math.max(...n.map(s=>t.node(s).rank)),i=$He.range(r+1).map(()=>[]);function o(s){if(!e[s]){e[s]=!0;var l=t.node(s);i[l.rank].push(s),t.successors(s).forEach(o)}}var a=n.sort((s,l)=>t.node(s).rank-t.node(l).rank);return a.forEach(o),i}var DHe=to.zipObject,NHe=MHe;function MHe(t,e){for(var n=0,r=1;r<e.length;++r)n+=RHe(t,e[r-1],e[r]);return n}function RHe(t,e,n){for(var r=DHe(n,n.map((c,u)=>u)),i=e.flatMap(c=>t.outEdges(c).map(u=>({pos:r[u.w],weight:t.edge(u).weight})).sort((u,f)=>u.pos-f.pos)),o=1;o<n.length;)o<<=1;var a=2*o-1;o-=1;var s=new Array(a).fill(0),l=0;return i.forEach(c=>{var u=c.pos+o;s[u]+=c.weight;for(var f=0;u>0;)u%2&&(f+=s[u+1]),u=u-1>>1,s[u]+=c.weight;l+=c.weight*f}),l}var zHe=VHe;function VHe(t,e=[]){return e.map(n=>{var r=t.inEdges(n);if(r.length){var i=r.reduce((o,a)=>{var s=t.edge(a),l=t.node(a.v);return{sum:o.sum+s.weight*l.order,weight:o.weight+s.weight}},{sum:0,weight:0});return{v:n,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:n}})}var BHe=to,jHe=HHe;function HHe(t,e){var n={};t.forEach((i,o)=>{var a=n[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:o};i.barycenter!==void 0&&(a.barycenter=i.barycenter,a.weight=i.weight)}),e.edges().forEach(i=>{var o=n[i.v],a=n[i.w];o!==void 0&&a!==void 0&&(a.indegree++,o.out.push(n[i.w]))});var r=Object.values(n).filter(i=>!i.indegree);return UHe(r)}function UHe(t){var e=[];function n(o){return function(a){a.merged||(a.barycenter===void 0||o.barycenter===void 0||a.barycenter>=o.barycenter)&&WHe(o,a)}}function r(o){return function(a){a.in.push(o),--a.indegree===0&&t.push(a)}}for(;t.length;){var i=t.pop();e.push(i),i.in.reverse().forEach(n(i)),i.out.forEach(r(i))}return e.filter(o=>!o.merged).map(o=>BHe.pick(o,["vs","i","barycenter","weight"]))}function WHe(t,e){var n=0,r=0;t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.vs=e.vs.concat(t.vs),t.barycenter=n/r,t.weight=r,t.i=Math.min(e.i,t.i),e.merged=!0}var GHe=to,qHe=YHe;function YHe(t,e){var n=GHe.partition(t,function(u){return u.hasOwnProperty("barycenter")}),r=n.lhs,i=n.rhs.sort((u,f)=>f.i-u.i),o=[],a=0,s=0,l=0;r.sort(KHe(!!e)),l=_W(o,i,l),r.forEach(function(u){l+=u.vs.length,o.push(u.vs),a+=u.barycenter*u.weight,s+=u.weight,l=_W(o,i,l)});var c={vs:o.flat(!0)};return s&&(c.barycenter=a/s,c.weight=s),c}function _W(t,e,n){for(var r;e.length&&(r=e[e.length-1]).i<=n;)e.pop(),t.push(r.vs),n++;return n}function KHe(t){return function(e,n){return e.barycenter<n.barycenter?-1:e.barycenter>n.barycenter?1:t?n.i-e.i:e.i-n.i}}var XHe=zHe,JHe=jHe,ZHe=qHe,QHe=kle;function kle(t,e,n,r){var i=t.children(e),o=t.node(e),a=o?o.borderLeft:void 0,s=o?o.borderRight:void 0,l={};a&&(i=i.filter(g=>g!==a&&g!==s));var c=XHe(t,i);c.forEach(function(g){if(t.children(g.v).length){var y=kle(t,g.v,n,r);l[g.v]=y,y.hasOwnProperty("barycenter")&&tUe(g,y)}});var u=JHe(c,n);eUe(u,l);var f=ZHe(u,r);if(a&&(f.vs=[a,f.vs,s].flat(!0),t.predecessors(a).length)){var d=t.node(t.predecessors(a)[0]),h=t.node(t.predecessors(s)[0]);f.hasOwnProperty("barycenter")||(f.barycenter=0,f.weight=0),f.barycenter=(f.barycenter*f.weight+d.order+h.order)/(f.weight+2),f.weight+=2}return f}function eUe(t,e){t.forEach(function(n){n.vs=n.vs.flatMap(function(r){return e[r]?e[r].vs:r})})}function tUe(t,e){t.barycenter!==void 0?(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight):(t.barycenter=e.barycenter,t.weight=e.weight)}var nUe=Gs.Graph,rUe=to,iUe=oUe;function oUe(t,e,n){var r=aUe(t),i=new nUe({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(o){return t.node(o)});return t.nodes().forEach(function(o){var a=t.node(o),s=t.parent(o);(a.rank===e||a.minRank<=e&&e<=a.maxRank)&&(i.setNode(o),i.setParent(o,s||r),t[n](o).forEach(function(l){var c=l.v===o?l.w:l.v,u=i.edge(c,o),f=u!==void 0?u.weight:0;i.setEdge(c,o,{weight:t.edge(l).weight+f})}),a.hasOwnProperty("minRank")&&i.setNode(o,{borderLeft:a.borderLeft[e],borderRight:a.borderRight[e]}))}),i}function aUe(t){for(var e;t.hasNode(e=rUe.uniqueId("_root")););return e}var sUe=lUe;function lUe(t,e,n){var r={},i;n.forEach(function(o){for(var a=t.parent(o),s,l;a;){if(s=t.parent(a),s?(l=r[s],r[s]=a):(l=i,i=a),l&&l!==a){e.setEdge(l,a);return}a=s}})}var cUe=FHe,uUe=NHe,fUe=QHe,dUe=iUe,hUe=sUe,pUe=Gs.Graph,Ok=to,gUe=mUe;function mUe(t){var e=Ok.maxRank(t),n=wW(t,Ok.range(1,e+1),"inEdges"),r=wW(t,Ok.range(e-1,-1,-1),"outEdges"),i=cUe(t);kW(t,i);for(var o=Number.POSITIVE_INFINITY,a,s=0,l=0;l<4;++s,++l){vUe(s%2?n:r,s%4>=2),i=Ok.buildLayerMatrix(t);var c=uUe(t,i);c<o&&(l=0,a=Object.assign({},i),o=c)}kW(t,a)}function wW(t,e,n){return e.map(function(r){return dUe(t,r,n)})}function vUe(t,e){var n=new pUe;t.forEach(function(r){var i=r.graph().root,o=fUe(r,i,n,e);o.vs.forEach((a,s)=>r.node(a).order=s),hUe(r,n,o.vs)})}function kW(t,e){Object.values(e).forEach(n=>n.forEach((r,i)=>t.node(r).order=i))}var yUe=Gs.Graph,C2=to,bUe={positionX:wUe,findType1Conflicts:xle,findType2Conflicts:Cle,addConflict:ZL,hasConflict:Tle,verticalAlignment:Ale,horizontalCompaction:Ple,alignCoordinates:Ole,findSmallestWidthAlignment:Ele,balance:Ile};function xle(t,e){var n={};function r(i,o){var a=0,s=0,l=i.length,c=o[o.length-1];return o.forEach(function(u,f){var d=SUe(t,u),h=d?t.node(d).order:l;(d||u===c)&&(o.slice(s,f+1).forEach(function(g){t.predecessors(g).forEach(function(y){var S=t.node(y),v=S.order;(v<a||h<v)&&!(S.dummy&&t.node(g).dummy)&&ZL(n,y,g)})}),s=f+1,a=h)}),o}return e.reduce(r),n}function Cle(t,e){var n={};function r(o,a,s,l,c){var u;C2.range(a,s).forEach(function(f){u=o[f],t.node(u).dummy&&t.predecessors(u).forEach(function(d){var h=t.node(d);h.dummy&&(h.order<l||h.order>c)&&ZL(n,d,u)})})}function i(o,a){var s=-1,l,c=0;return a.forEach(function(u,f){if(t.node(u).dummy==="border"){var d=t.predecessors(u);d.length&&(l=t.node(d[0]).order,r(a,c,f,s,l),c=f,s=l)}r(a,c,a.length,l,o.length)}),a}return e.reduce(i),n}function SUe(t,e){if(t.node(e).dummy)return t.predecessors(e).find(n=>t.node(n).dummy)}function ZL(t,e,n){if(e>n){var r=e;e=n,n=r}var i=t[e];i||(t[e]=i={}),i[n]=!0}function Tle(t,e,n){if(e>n){var r=e;e=n,n=r}return!!t[e]&&t[e].hasOwnProperty(n)}function Ale(t,e,n,r){var i={},o={},a={};return e.forEach(function(s){s.forEach(function(l,c){i[l]=l,o[l]=l,a[l]=c})}),e.forEach(function(s){var l=-1;s.forEach(function(c){var u=r(c);if(u.length){u=u.sort((y,S)=>a[y]-a[S]);for(var f=(u.length-1)/2,d=Math.floor(f),h=Math.ceil(f);d<=h;++d){var g=u[d];o[c]===c&&l<a[g]&&!Tle(n,c,g)&&(o[g]=c,o[c]=i[c]=i[g],l=a[g])}}})}),{root:i,align:o}}function Ple(t,e,n,r,i){var o={},a=_Ue(t,e,n,i),s=i?"borderLeft":"borderRight";function l(f,d){for(var h=a.nodes(),g=h.pop(),y={};g;)y[g]?f(g):(y[g]=!0,h.push(g),h=h.concat(d(g))),g=h.pop()}function c(f){o[f]=a.inEdges(f).reduce(function(d,h){return Math.max(d,o[h.v]+a.edge(h))},0)}function u(f){var d=a.outEdges(f).reduce(function(g,y){return Math.min(g,o[y.w]-a.edge(y))},Number.POSITIVE_INFINITY),h=t.node(f);d!==Number.POSITIVE_INFINITY&&h.borderType!==s&&(o[f]=Math.max(o[f],d))}return l(c,a.predecessors.bind(a)),l(u,a.successors.bind(a)),Object.keys(r).forEach(f=>o[f]=o[n[f]]),o}function _Ue(t,e,n,r){var i=new yUe,o=t.graph(),a=kUe(o.nodesep,o.edgesep,r);return e.forEach(function(s){var l;s.forEach(function(c){var u=n[c];if(i.setNode(u),l){var f=n[l],d=i.edge(f,u);i.setEdge(f,u,Math.max(a(t,c,l),d||0))}l=c})}),i}function Ele(t,e){return Object.values(e).reduce((n,r)=>{var i=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;Object.entries(r).forEach(([s,l])=>{var c=xUe(t,s)/2;i=Math.max(l+c,i),o=Math.min(l-c,o)});const a=i-o;return a<n[0]&&(n=[a,r]),n},[Number.POSITIVE_INFINITY,null])[1]}function Ole(t,e){var n=Object.values(e),r=Math.min(...n),i=Math.max(...n);["u","d"].forEach(function(o){["l","r"].forEach(function(a){var s=o+a,l=t[s];if(l===e)return;var c=Object.values(l);let u=r-Math.min(...c);a!=="l"&&(u=i-Math.max(...c)),u&&(t[s]=C2.mapValues(l,f=>f+u))})})}function Ile(t,e){return C2.mapValues(t.ul,function(n,r){if(e)return t[e.toLowerCase()][r];var i=Object.values(t).map(o=>o[r]).sort((o,a)=>o-a);return(i[1]+i[2])/2})}function wUe(t){var e=C2.buildLayerMatrix(t),n=Object.assign(xle(t,e),Cle(t,e)),r={},i;["u","d"].forEach(function(a){i=a==="u"?e:Object.values(e).reverse(),["l","r"].forEach(function(s){s==="r"&&(i=i.map(f=>Object.values(f).reverse()));var l=(a==="u"?t.predecessors:t.successors).bind(t),c=Ale(t,i,n,l),u=Ple(t,i,c.root,c.align,s==="r");s==="r"&&(u=C2.mapValues(u,f=>-f)),r[a+s]=u})});var o=Ele(t,r);return Ole(r,o),Ile(r,t.graph().align)}function kUe(t,e,n){return function(r,i,o){var a=r.node(i),s=r.node(o),l=0,c;if(l+=a.width/2,a.hasOwnProperty("labelpos"))switch(a.labelpos.toLowerCase()){case"l":c=-a.width/2;break;case"r":c=a.width/2;break}if(c&&(l+=n?c:-c),c=0,l+=(a.dummy?e:t)/2,l+=(s.dummy?e:t)/2,l+=s.width/2,s.hasOwnProperty("labelpos"))switch(s.labelpos.toLowerCase()){case"l":c=s.width/2;break;case"r":c=-s.width/2;break}return c&&(l+=n?c:-c),c=0,l}}function xUe(t,e){return t.node(e).width}var $le=to,CUe=bUe.positionX,TUe=AUe;function AUe(t){t=$le.asNonCompoundGraph(t),PUe(t),Object.entries(CUe(t)).forEach(([e,n])=>t.node(e).x=n)}function PUe(t){var e=$le.buildLayerMatrix(t),n=t.graph().ranksep,r=0;e.forEach(function(i){const o=i.reduce((a,s)=>{const l=t.node(s).height;return a>l?a:l},0);i.forEach(a=>t.node(a).y=r+o/2),r+=o+n})}var xW=Mje,CW=jje,EUe=fHe,OUe=to.normalizeRanks,IUe=gHe,$Ue=to.removeEmptyRanks,TW=bHe,FUe=CHe,AW=AHe,LUe=gUe,DUe=TUe,Fl=to,NUe=Gs.Graph,MUe=RUe;function RUe(t,e){var n=e&&e.debugTiming?Fl.time:Fl.notime;n("layout",function(){var r=n("  buildLayoutGraph",function(){return YUe(t)});n("  runLayout",function(){zUe(r,n)}),n("  updateInputGraph",function(){VUe(t,r)})})}function zUe(t,e){e("    makeSpaceForEdgeLabels",function(){KUe(t)}),e("    removeSelfEdges",function(){iWe(t)}),e("    acyclic",function(){xW.run(t)}),e("    nestingGraph.run",function(){TW.run(t)}),e("    rank",function(){EUe(Fl.asNonCompoundGraph(t))}),e("    injectEdgeLabelProxies",function(){XUe(t)}),e("    removeEmptyRanks",function(){$Ue(t)}),e("    nestingGraph.cleanup",function(){TW.cleanup(t)}),e("    normalizeRanks",function(){OUe(t)}),e("    assignRankMinMax",function(){JUe(t)}),e("    removeEdgeLabelProxies",function(){ZUe(t)}),e("    normalize.run",function(){CW.run(t)}),e("    parentDummyChains",function(){IUe(t)}),e("    addBorderSegments",function(){FUe(t)}),e("    order",function(){LUe(t)}),e("    insertSelfEdges",function(){oWe(t)}),e("    adjustCoordinateSystem",function(){AW.adjust(t)}),e("    position",function(){DUe(t)}),e("    positionSelfEdges",function(){aWe(t)}),e("    removeBorderNodes",function(){rWe(t)}),e("    normalize.undo",function(){CW.undo(t)}),e("    fixupEdgeLabelCoords",function(){tWe(t)}),e("    undoCoordinateSystem",function(){AW.undo(t)}),e("    translateGraph",function(){QUe(t)}),e("    assignNodeIntersects",function(){eWe(t)}),e("    reversePoints",function(){nWe(t)}),e("    acyclic.undo",function(){xW.undo(t)})}function VUe(t,e){t.nodes().forEach(n=>{var r=t.node(n),i=e.node(n);r&&(r.x=i.x,r.y=i.y,r.rank=i.rank,e.children(n).length&&(r.width=i.width,r.height=i.height))}),t.edges().forEach(n=>{var r=t.edge(n),i=e.edge(n);r.points=i.points,i.hasOwnProperty("x")&&(r.x=i.x,r.y=i.y)}),t.graph().width=e.graph().width,t.graph().height=e.graph().height}var BUe=["nodesep","edgesep","ranksep","marginx","marginy"],jUe={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},HUe=["acyclicer","ranker","rankdir","align"],UUe=["width","height"],PW={width:0,height:0},WUe=["minlen","weight","width","height","labeloffset"],GUe={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},qUe=["labelpos"];function YUe(t){var e=new NUe({multigraph:!0,compound:!0}),n=B7(t.graph());return e.setGraph(Object.assign({},jUe,V7(n,BUe),Fl.pick(n,HUe))),t.nodes().forEach(r=>{var i=B7(t.node(r));const o=V7(i,UUe);Object.keys(PW).forEach(a=>{o[a]===void 0&&(o[a]=PW[a])}),e.setNode(r,o),e.setParent(r,t.parent(r))}),t.edges().forEach(r=>{var i=B7(t.edge(r));e.setEdge(r,Object.assign({},GUe,V7(i,WUe),Fl.pick(i,qUe)))}),e}function KUe(t){var e=t.graph();e.ranksep/=2,t.edges().forEach(n=>{var r=t.edge(n);r.minlen*=2,r.labelpos.toLowerCase()!=="c"&&(e.rankdir==="TB"||e.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function XUe(t){t.edges().forEach(e=>{var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),i=t.node(e.w),o={rank:(i.rank-r.rank)/2+r.rank,e};Fl.addDummyNode(t,"edge-proxy",o,"_ep")}})}function JUe(t){var e=0;t.nodes().forEach(n=>{var r=t.node(n);r.borderTop&&(r.minRank=t.node(r.borderTop).rank,r.maxRank=t.node(r.borderBottom).rank,e=Math.max(e,r.maxRank))}),t.graph().maxRank=e}function ZUe(t){t.nodes().forEach(e=>{var n=t.node(e);n.dummy==="edge-proxy"&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))})}function QUe(t){var e=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,i=0,o=t.graph(),a=o.marginx||0,s=o.marginy||0;function l(c){var u=c.x,f=c.y,d=c.width,h=c.height;e=Math.min(e,u-d/2),n=Math.max(n,u+d/2),r=Math.min(r,f-h/2),i=Math.max(i,f+h/2)}t.nodes().forEach(c=>l(t.node(c))),t.edges().forEach(c=>{var u=t.edge(c);u.hasOwnProperty("x")&&l(u)}),e-=a,r-=s,t.nodes().forEach(c=>{var u=t.node(c);u.x-=e,u.y-=r}),t.edges().forEach(c=>{var u=t.edge(c);u.points.forEach(f=>{f.x-=e,f.y-=r}),u.hasOwnProperty("x")&&(u.x-=e),u.hasOwnProperty("y")&&(u.y-=r)}),o.width=n-e+a,o.height=i-r+s}function eWe(t){t.edges().forEach(e=>{var n=t.edge(e),r=t.node(e.v),i=t.node(e.w),o,a;n.points?(o=n.points[0],a=n.points[n.points.length-1]):(n.points=[],o=i,a=r),n.points.unshift(Fl.intersectRect(r,o)),n.points.push(Fl.intersectRect(i,a))})}function tWe(t){t.edges().forEach(e=>{var n=t.edge(e);if(n.hasOwnProperty("x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function nWe(t){t.edges().forEach(e=>{var n=t.edge(e);n.reversed&&n.points.reverse()})}function rWe(t){t.nodes().forEach(e=>{if(t.children(e).length){var n=t.node(e),r=t.node(n.borderTop),i=t.node(n.borderBottom),o=t.node(n.borderLeft[n.borderLeft.length-1]),a=t.node(n.borderRight[n.borderRight.length-1]);n.width=Math.abs(a.x-o.x),n.height=Math.abs(i.y-r.y),n.x=o.x+n.width/2,n.y=r.y+n.height/2}}),t.nodes().forEach(e=>{t.node(e).dummy==="border"&&t.removeNode(e)})}function iWe(t){t.edges().forEach(e=>{if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e,label:t.edge(e)}),t.removeEdge(e)}})}function oWe(t){var e=Fl.buildLayerMatrix(t);e.forEach(n=>{var r=0;n.forEach((i,o)=>{var a=t.node(i);a.order=o+r,(a.selfEdges||[]).forEach(s=>{Fl.addDummyNode(t,"selfedge",{width:s.label.width,height:s.label.height,rank:a.rank,order:o+ ++r,e:s.e,label:s.label},"_se")}),delete a.selfEdges})})}function aWe(t){t.nodes().forEach(e=>{var n=t.node(e);if(n.dummy==="selfedge"){var r=t.node(n.e.v),i=r.x+r.width/2,o=r.y,a=n.x-i,s=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:i+2*a/3,y:o-s},{x:i+5*a/6,y:o-s},{x:i+a,y:o},{x:i+5*a/6,y:o+s},{x:i+2*a/3,y:o+s}],n.label.x=n.x,n.label.y=n.y}})}function V7(t,e){return Fl.mapValues(Fl.pick(t,e),Number)}function B7(t){var e={};return t&&Object.entries(t).forEach(([n,r])=>{typeof n=="string"&&(n=n.toLowerCase()),e[n]=r}),e}var sWe=to,lWe=Gs.Graph,cWe={debugOrdering:uWe};function uWe(t){var e=sWe.buildLayerMatrix(t),n=new lWe({compound:!0,multigraph:!0}).setGraph({});return t.nodes().forEach(function(r){n.setNode(r,{label:r}),n.setParent(r,"layer"+t.node(r).rank)}),t.edges().forEach(function(r){n.setEdge(r.v,r.w,{},r.name)}),e.forEach(function(r,i){var o="layer"+i;n.setNode(o,{rank:"same"}),r.reduce(function(a,s){return n.setEdge(a,s,{style:"invis"}),s})}),n}var fWe="1.0.2",Fle={graphlib:Gs,layout:MUe,debug:cWe,util:{time:to.time,notime:to.notime},version:fWe};const dWe=pr(Fle),hWe=oK({__proto__:null,default:dWe},[Fle]);let ci,Ur;const pWe=Rt({data(){return{panX:0,panY:0,clickX:0,clickY:0,isPanning:!1,graphScale:1}},computed:{isInteractive(){return this.uiStateStore.mode===qu||this.uiStateStore.mode==Bx||this.uiStateStore.mode==jx||this.uiStateStore.mode===zb},isAddingElements(){return this.uiStateStore.mode===Bx||this.uiStateStore.mode===jx},isPannableMode(){return(this.uiStateStore.mode===qu||this.uiStateStore.mode===Tp)&&!this.isPanning},isPanningMode(){return(this.uiStateStore.mode===qu||this.uiStateStore.mode===Tp)&&this.isPanning},...Mt(ta),...Mt(Yg),...Mt(Af),...Mt(Zn)},watch:{"uiStateStore.mode"(t){this.onModeChange(t)},"netStore.lastRemovedCells"(t){for(let e=0;e<t.length;e++)Ur.removeCells([Ur.getCell(t[e])])},"netStore.lastUpdatedPlace"(t){const e=Ur.getCell(t.id);e.set("tokens",t.marking.length),e.attr(".label/text",t.name)},"netStore.lastUpdatedTransition.name"(t){const e=Ur.getCell(this.netStore.lastUpdatedTransition.id);e&&e.attr(".label/text",t)},"netStore.lastFiredArcs"(t){for(let n=0;n<t.length;n++){const r=t[n],i=Ur.getCell(r.arcID);Ur.getCell(r.placeID).set("tokens",r.num);var e=Ue("circle",{r:5,fill:"#feb662"});let a=1;i.findView(ci).sendToken(e,a*1e3)}},"netStore.importedData"(t){if(Ur.clear(),!t.layoutData)return;const e=t.netData,n=e.transitions;for(let a=0;a<n.length;a++){const s=n[a];new uW(this.clickX,this.clickY,s.name,s.id).addTo(Ur)}const r=e.places;for(let a=0;a<r.length;a++){const s=r[a],l=new cW(this.clickX,this.clickY,s.name,s.id,s.marking.length);l.addTo(Ur),l.set("tokens",s.marking.length)}const i=e.arcs;for(let a=0;a<i.length;a++){const s=i[a],l=new lW(s.from,s.to,s.id,s.type);l.addTo(Ur),l.addVerticesTools(ci)}const o=t.layoutData;for(let a=0;a<o.cells.length;a++){const s=o.cells[a],l=Ur.getCell(s.id);s.type==="pn.Place"||s.type==="pn.Transition"?l.set("position",{x:s.position.x,y:s.position.y}):s.type==="standard.Link"&&l.vertices(s.vertices)}},"netStore.lastCreatedTransitions"(t){for(let e=0;e<t.length;e++){const n=t[e];new uW(this.clickX,this.clickY,n.name,n.id).addTo(Ur)}},"netStore.lastCreatedPlaces"(t){for(let e=0;e<t.length;e++){const n=t[e];new cW(this.clickX,this.clickY,n.name,n.id,n.marking.length).addTo(Ur)}},"netStore.lastUpdatedPlaces"(t){for(let e=0;e<t.length;e++){const n=t[e],r=Ur.getCell(n.id);r.set("tokens",n.marking.length),r.attr(".label/text",n.name)}},"netStore.lastCreatedArcs"(t){for(let e=0;e<t.length;e++){const n=t[e],r=new lW(n.from,n.to,n.id,n.type);r.addTo(Ur),r.addVerticesTools(ci)}}},mounted(){const t=hBe,e=uBe;Ur=new uf,ci=new UVe({el:document.getElementById("jointCanvas"),cellViewNamespace:{pn:t},model:Ur,width:window.innerWidth,height:window.innerHeight,gridSize:12,drawGrid:!0,background:{color:"#f6f6f6"},interactive:(r,i)=>this.isInteractive,linkPinning:!1,defaultLink:()=>new e.Link,defaultAnchor:{name:"modelCenter"},defaultConnectionPoint:{name:"boundary"},markAvailable:!0,validateConnection:(r,i,o,a,s,l)=>!(o.model.isLink()||r.model.isLink()||o.model.get("jsonnetsType")===r.model.get("jsonnetsType"))}),this.netStore.setLayout(Ur),window.onresize=function(){ci.setDimensions(window.innerWidth,window.innerHeight)},ci.on("blank:pointerclick",(r,i,o)=>{this.onPaperClick(i,o)}),ci.on("element:mouseenter",r=>{(this.uiStateStore.mode===zb||this.uiStateStore.mode===qu)&&r.showTools()}),ci.on("element:mouseleave",r=>{r.hideTools()}),ci.on("link:mouseenter",r=>{(this.uiStateStore.mode===zb||this.uiStateStore.mode===qu)&&r.showTools()}),ci.on("link:mouseleave",r=>{r.hideTools()}),ci.on("blank:pointerdown",(r,i,o)=>{this.onDragStart(i,o)});const n=document.getElementById("jointCanvas");n&&(n.onmousemove=r=>{this.onMouseMove(r)}),ci.on("cell:pointerup blank:pointerup",()=>{this.onDragEnd()}),ci.on("link:connect",r=>{let i=String(r.model.source().id),o=String(r.model.target().id);Ur.removeCells([r.model]),this.netStore.connect(i,o)})},methods:{scalePaper(t,e){ci.scale(t,e)},zoomOut(){this.graphScale-=.1,this.scalePaper(this.graphScale,this.graphScale)},zoomIn(){this.graphScale+=.1,this.scalePaper(this.graphScale,this.graphScale)},resetZoom(){this.graphScale=1,this.scalePaper(this.graphScale,this.graphScale)},onModeChange(t){ci.removeTools();const e=Ur.getElements();for(let n=0;n<e.length;n++)e[n].attr({body:{cursor:"auto"},label:{cursor:"auto"}});if(t===zb){const n=Ur.getElements();for(let i=0;i<n.length;i++)n[i].addConnectTools(ci);const r=Ur.getLinks();for(let i=0;i<r.length;i++)r[i].addVerticesTools(ci)}else if(t===qu){const n=Ur.getElements();for(let i=0;i<n.length;i++)n[i].addInteractionTools(ci);const r=Ur.getLinks();for(let i=0;i<r.length;i++)r[i].addInteractionTools(ci)}else if(t===Xde)this.updateGraphLayout(),this.uiStateStore.mode=Kde;else if(t===Tp){let n=setInterval(()=>{this.uiStateStore.mode!==Tp?clearInterval(n):(this.netStore.fireAny(),this.netStore.lastFiredArcs.length===0&&(clearInterval(n),alert("Berechnung abgeschlossen.")))},1500)}},onPaperClick(t,e){this.clickX=t,this.clickY=e,this.uiStateStore.mode===Bx?this.netStore.addPlace():this.uiStateStore.mode===jx&&this.netStore.addTransition()},updateGraphLayout(){ci.freeze(),x2.layout(Ur,{nodeSep:100,edgeSep:100,rankSep:100,rankDir:"LR",dagre:hWe,graphlib:cje}),ci.translate(100,200),ci.unfreeze()},onDragStart(t,e){var n;(this.uiStateStore.mode===qu||this.uiStateStore.mode===Tp)&&(this.isPanning=!0,(n=document.getElementById("canvasContainer"))==null||n.classList.add("panning-mode"),this.panX=t*this.graphScale,this.panY=e*this.graphScale)},onDragEnd(){var t;(this.uiStateStore.mode===qu||this.uiStateStore.mode===Tp)&&((t=document.getElementById("canvasContainer"))==null||t.classList.remove("panning-mode"),this.isPanning=!1)},onMouseMove(t){this.isPanning&&ci.translate(t.offsetX-this.panX,t.offsetY-this.panY)}}});const Qr=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},gWe=t=>(zg("data-v-377da0bb"),t=t(),Vg(),t),mWe=gWe(()=>K("div",{id:"jointCanvas"},null,-1)),vWe=[mWe],yWe={id:"zoomButtons"},bWe={class:"icon is-small"},SWe={class:"icon is-small"},_We={class:"icon is-small"};function wWe(t,e,n,r,i,o){const a=Pt("font-awesome-icon");return Oe(),je(hn,null,[K("div",{id:"canvasContainer",class:Wt({"scoped-canvas-add":t.isAddingElements,"scoped-canvas-panning":t.isPanningMode,"scoped-canvas-pannable":t.isPannableMode,"elements-unmovable":!t.isInteractive})},vWe,2),K("div",yWe,[K("button",{class:"button is-small",onClick:e[0]||(e[0]=s=>t.zoomIn())},[K("span",bWe,[at(a,{icon:"fas fa-plus"})])]),K("button",{class:"button is-small",onClick:e[1]||(e[1]=s=>t.zoomOut())},[K("span",SWe,[at(a,{icon:"fas fa-minus"})])]),K("button",{class:"button is-small",onClick:e[2]||(e[2]=s=>t.resetZoom())},[K("span",_We,[at(a,{icon:"fas fa-crosshairs"})])])])],64)}const kWe=Qr(pWe,[["render",wWe],["__scopeId","data-v-377da0bb"]]),xWe="/assets/manual-214c6c59.png",CWe=Rt({data(){return{image:xWe}},computed:{...Mt(ta)},methods:{close(){this.uiStateStore.showModal="none"}}}),TWe={class:"modal is-active"},AWe=K("div",{class:"modal-background"},null,-1),PWe={class:"modal-card jsn-modal-wide"},EWe={class:"modal-card-head"},OWe=K("p",{class:"modal-card-title"},"Manual",-1),IWe={class:"modal-card-body"},$We={class:"content"},FWe=NX("<h2>Get started</h2><p><b>Create a place:</b> Click on the button showing a circle, then click on the canvas to add a new place. </p><p><b>Create a transition:</b> Click on the button showing a square, then click on the canvas to add a new transition. </p><p><b>Create an arc:</b> Click on the button showing an arc. When you now hover over a place or a transition, it will show a small arc icon. Click on the icon and drag a new arc towards another place or transition. </p><p>You can click on the magic wand button to automagically layout the net.</p><h2>Edit</h2><p> Click on the cursor button to go into <b>edit mode</b>. In edit mode, when you hover over places, transitions and arcs, they will show several buttons: </p>",7),LWe={class:"columns is-vcentered"},DWe={class:"column is-narrow"},NWe=["src"],MWe=K("div",{class:"column"},[K("p",null,[K("b",null,"Delete element:"),Vi(" Click on the delete button to delete the element.")]),K("p",null,[K("b",null,"Edit element:"),Vi(" Click on the edit button to change the name, inscription and content of elements. ")]),K("p",null,[K("b",null,"Fire transition:"),Vi(" Transitions additionally show a fire button. Click on it to make the transition fire and consume or create new tokens in the neighbouring places. If the transition is not enabled, you will receive an alert. ")])],-1),RWe=K("h2",null,"Play",-1),zWe=K("p",null,[Vi(" Click on the play button to go into "),K("b",null,"play mode"),Vi(". In play mode, one transition after another will fire automatically, until no transition is enabled any more. ")],-1),VWe={class:"modal-card-foot"};function BWe(t,e,n,r,i,o){return Oe(),je("div",TWe,[AWe,K("div",PWe,[K("header",EWe,[OWe,K("button",{class:"delete","aria-label":"close",onClick:e[0]||(e[0]=(...a)=>t.close&&t.close(...a))})]),K("section",IWe,[K("div",$We,[FWe,K("div",LWe,[K("div",DWe,[K("img",{src:t.image,width:"300"},null,8,NWe)]),MWe]),RWe,zWe])]),K("footer",VWe,[K("button",{class:"button",onClick:e[1]||(e[1]=(...a)=>t.close&&t.close(...a))},"Close")])])])}const jWe=Qr(CWe,[["render",BWe]]),Ik={log:(...t)=>{}},Pr={STRING:"String",NUMBER:"Number",TRUE:"True",FALSE:"False",NULL:"Null",OBJECT:"Object",ARRAY:"Array",PROPERTY:"Property",PROPERTY_NAME:"PropertyName",PROPERTY_COLON:"PropertyColon",JSON_TEXT:"JsonText",INVALID:""},QL=[Pr.STRING,Pr.NUMBER,Pr.TRUE,Pr.FALSE,Pr.NULL],Lle=[Pr.OBJECT,Pr.ARRAY],EW=(t,e,n=-1)=>ji(t).resolveInner(e,n),$O=t=>t.replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1"),Nb=(t,e,n=!0)=>{const r=e?t.sliceString(e.from,e.to):"";return n?$O(r):r},Dle=t=>{var e,n;return t.name===Pr.INVALID&&(((e=t.prevSibling)===null||e===void 0?void 0:e.name)===Pr.PROPERTY_NAME||((n=t.prevSibling)===null||n===void 0?void 0:n.name)===Pr.PROPERTY_COLON)},$x=t=>QL.includes(t.name)||Dle(t),HWe=t=>[...QL,...Lle].includes(t.name)||Dle(t),$k=t=>{var e,n;return t.name===Pr.PROPERTY_NAME||t.name===Pr.INVALID&&(((e=t.prevSibling)===null||e===void 0?void 0:e.name)===Pr.PROPERTY||((n=t.prevSibling)===null||n===void 0?void 0:n.name)==="{")},Nle=t=>{const e=[];let n=t.firstChild;for(;n;)n&&e.push(n),n=n==null?void 0:n.nextSibling;return e},OW=t=>Nle(t).find(e=>$x(e)),UWe=t=>Nle(t).filter(e=>QL.includes(e.name)||Lle.includes(e.name)),Mle=(t,e)=>UWe(t).findIndex(n=>n.from===e.from&&n.to===e.to),WWe={AdditionalItemsError:"Array at `{{pointer}}` may not have an additional item `{{key}}`",AdditionalPropertiesError:"Additional property `{{property}}` on `{{pointer}}` does not match schema `{{schema}}`",AllOfError:"Value `{{value}}` at `{{pointer}}` does not match schema of `{{allOf}}`",AnyOfError:"Value `{{value}}` at `{{pointer}}` does not match any schema of `{{anyOf}}`",ConstError:"Expected value at `{{pointer}}` to be `{{expected}}`, but value given is `{{value}}`",containsAnyError:"The array at `{{pointer}}` must contain at least one item",ContainsArrayError:"The property at `{{pointer}}` must not be an array",ContainsError:"The array at `{{pointer}}` must contain an element that matches `{{schema}}`",EnumError:"Expected given value `{{value}}` in `{{pointer}}` to be one of `{{values}}`",ForbiddenPropertyError:"Property name `{{property}}` at `{{pointer}}` is not allowed",FormatDateError:"Value `{{value}}` at `{{pointer}}` is not a valid date",FormatDateTimeError:"Value `{{value}}` at `{{pointer}}` is not a valid date-time",FormatEmailError:"Value `{{value}}` at `{{pointer}}` is not a valid email",FormatHostnameError:"Value `{{value}}` at `{{pointer}}` is not a valid hostname",FormatIPV4Error:"Value `{{value}}` at `{{pointer}}` is not a valid IPv4 address",FormatIPV4LeadingZeroError:"IPv4 addresses starting with zero are invalid, since they are interpreted as octals",FormatIPV6Error:"Value `{{value}}` at `{{pointer}}` is not a valid IPv6 address",FormatIPV6LeadingZeroError:"IPv6 addresses starting with zero are invalid, since they are interpreted as octals",FormatJsonPointerError:"Value `{{value}}` at `{{pointer}}` is not a valid json-pointer",FormatRegExError:"Value `{{value}}` at `{{pointer}}` is not a valid regular expression",FormatTimeError:"Value `{{value}}` at `{{pointer}}` is not a valid time",FormatURIError:"Value `{{value}}` at `{{pointer}}` is not a valid uri",FormatURIReferenceError:"Value `{{value}}` at `{{pointer}}` is not a valid uri-reference",FormatURITemplateError:"Value `{{value}}` at `{{pointer}}` is not a valid uri-template",FormatURLError:"Value `{{value}}` at `{{pointer}}` is not a valid url",InvalidDataError:"No value may be specified in `{{pointer}}`",InvalidPropertyNameError:"Invalid property name `{{property}}` at `{{pointer}}`",MaximumError:"Value in `{{pointer}}` is `{{length}}`, but should be `{{maximum}}` at maximum",MaxItemsError:"Too many items in `{{pointer}}`, should be `{{maximum}}` at most, but got `{{length}}`",MaxLengthError:"Value `{{pointer}}` should have a maximum length of `{{maxLength}}`, but got `{{length}}`.",MaxPropertiesError:"Too many properties in `{{pointer}}`, should be `{{maximum}}` at most, but got `{{length}}`",MinimumError:"Value in `{{pointer}}` is `{{length}}`, but should be `{{minimum}}` at minimum",MinItemsError:"Too few items in `{{pointer}}`, should be at least `{{minimum}}`, but got `{{length}}`",MinItemsOneError:"At least one item is required in `{{pointer}}`",MinLengthError:"Value `{{pointer}}` should have a minimum length of `{{minLength}}`, but got `{{length}}`.",MinLengthOneError:"A value is required in `{{pointer}}`",MinPropertiesError:"Too few properties in `{{pointer}}`, should be at least `{{minimum}}`, but got `{{length}}`",MissingDependencyError:"The required propery '{{missingProperty}}' in `{{pointer}}` is missing",MissingOneOfPropertyError:"Value at `{{pointer}}` property: `{{property}}`",MultipleOfError:"Expected `{{value}}` in `{{pointer}}` to be multiple of `{{multipleOf}}`",MultipleOneOfError:"Value `{{value}}` should not match multiple schemas in oneOf `{{matches}}`",NoAdditionalPropertiesError:"Additional property `{{property}}` in `{{pointer}}` is not allowed",NotError:"Value `{{value}}` at pointer should not match schema `{{not}}`",OneOfError:"Value `{{value}}` in `{{pointer}}` does not match any given oneof schema",OneOfPropertyError:"Failed finding a matching oneOfProperty schema in `{{pointer}}` where `{{property}}` matches `{{value}}`",PatternError:"Value in `{{pointer}}` should match `{{description}}`, but received `{{received}}`",PatternPropertiesError:"Property `{{key}}` does not match any patterns in `{{pointer}}`. Valid patterns are: {{patterns}}",RequiredPropertyError:"The required property `{{key}}` is missing at `{{pointer}}`",TypeError:"Expected `{{value}}` ({{received}}) in `{{pointer}}` to be of type `{{expected}}`",UndefinedValueError:"Value must not be undefined in `{{pointer}}`",UniqueItemsError:"Items in array must be unique. Value `{{value}}` in `{{pointer}}` is a duplicate of {{duplicatePointer}}.",UnknownPropertyError:"Could not find a valid schema for property `{{pointer}}` within object",ValueNotEmptyError:"A value for `{{property}}` is required at `{{pointer}}`"},GWe=Object.prototype.toString;function Sn(t){const e=GWe.call(t).match(/\s([^\]]+)\]/).pop().toLowerCase();return e==="file"?"object":e}const qWe="object",YWe="array";function KWe(t,e={}){return t.replace(/\{\{\w+\}\}/g,n=>{const r=n.replace(/[{}]/g,""),i=e[r],o=Sn(i);return o===qWe||o===YWe?JSON.stringify(i):i})}function XWe(t,e,n=t){var r;const i=(r=WWe[t])!==null&&r!==void 0?r:n;return KWe(i,e)}function JWe(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ZWe(t,e){return{type:"error",name:t,code:JWe(t),message:XWe(t,e),data:e}}function Dt(t){return ZWe.bind(null,t)}function T2(t,e=[]){for(let n=0;n<t.length;n+=1){const r=t[n];Array.isArray(r)?T2(r,e):e.push(r)}return e}const W0={DECLARATOR_ONEOF:"oneOfProperty",GET_TEMPLATE_RECURSION_LIMIT:1,floatingPointPrecision:1e4,propertyBlacklist:["_id"],templateDefaultOptions:{addOptionalProps:!1,removeInvalidData:!1}};function y1(t,e,n){const r={...e};return Object.defineProperty(r,"getOneOfOrigin",{enumerable:!1,value:()=>({index:n,schema:t})}),r}function gs(t){return(t==null?void 0:t.type)==="error"}function QWe(t){return t instanceof Promise}function AC(t){return gs(t)||QWe(t)}const{DECLARATOR_ONEOF:Uv}=W0;function Rle(t,e,n=t.rootSchema,r="#"){if(e!=null&&n[Uv]){const a=[],s=n[Uv],l=e[n[Uv]];if(l===void 0)return t.errors.missingOneOfPropertyError({property:s,pointer:r});for(let c=0;c<n.oneOf.length;c+=1){const u=t.resolveRef(n.oneOf[c]),f=t.step(s,u,e,r);if(gs(f))return f;let d=T2(t.validate(l,f,r));if(d=d.filter(AC),d.length>0)a.push(...d);else return y1(n,u,c)}return t.errors.oneOfPropertyError({property:s,value:l,pointer:r,errors:a})}const i=[],o=[];for(let a=0;a<n.oneOf.length;a+=1){const s=t.resolveRef(n.oneOf[a]);let l=T2(t.validate(e,s,r));l=l.filter(AC),l.length>0?o.push(...l):i.push({index:a,schema:s})}return i.length===1?y1(n,i[0].schema,i[0].index):i.length>1?t.errors.multipleOneOfError({value:e,pointer:r,matches:i}):t.errors.oneOfError({value:JSON.stringify(e),pointer:r,oneOf:n.oneOf,errors:o})}function eGe(t,e,n,r){if(n==null||e.properties==null)return-1;let i=0;const o=Object.keys(e.properties);for(let a=0;a<o.length;a+=1){const s=o[a];n[s]!=null&&t.isValid(n[s],e.properties[s],r)&&(i+=1)}return i}function $3(t,e,n=t.rootSchema,r="#"){if(e!=null&&n[Uv]){const o=[],a=n[Uv],s=e[n[Uv]];if(s===void 0)return t.errors.missingOneOfPropertyError({property:a,pointer:r});for(let l=0;l<n.oneOf.length;l+=1){const c=t.resolveRef(n.oneOf[l]),u=t.step(a,c,e,r);if(gs(u))return u;let f=T2(t.validate(s,u,r));if(f=f.filter(AC),f.length>0)o.push(...f);else return y1(n,c,l)}return t.errors.oneOfPropertyError({property:a,value:s,pointer:r,errors:o})}const i=[];for(let o=0;o<n.oneOf.length;o+=1){const a=t.resolveRef(n.oneOf[o]);t.isValid(e,a,r)&&i.push({schema:a,index:o})}if(i.length===1)return y1(n,i[0].schema,i[0].index);if(Sn(e)==="object"){let o,a=-1,s=0;for(let l=0;l<n.oneOf.length;l+=1){const c=t.resolveRef(n.oneOf[l]),u=eGe(t,c,e);s<u&&(s=u,o=n.oneOf[l],a=l)}return o===void 0?t.errors.oneOfError({value:JSON.stringify(e),pointer:r,oneOf:n.oneOf}):y1(n,o,a)}return i.length>1?t.errors.multipleOneOfError({matches:i,data:e,pointer:r}):t.errors.oneOfError({value:JSON.stringify(e),pointer:r,oneOf:n.oneOf})}const tGe=(t,e,n,r)=>{if(Array.isArray(e.oneOf)){const i=t.resolveOneOf(n,e,r);if(gs(i))return i}};var nGe=function(e){return rGe(e)&&!iGe(e)};function rGe(t){return!!t&&typeof t=="object"}function iGe(t){var e=Object.prototype.toString.call(t);return e==="[object RegExp]"||e==="[object Date]"||sGe(t)}var oGe=typeof Symbol=="function"&&Symbol.for,aGe=oGe?Symbol.for("react.element"):60103;function sGe(t){return t.$$typeof===aGe}function lGe(t){return Array.isArray(t)?[]:{}}function A2(t,e){return e.clone!==!1&&e.isMergeableObject(t)?b0(lGe(t),t,e):t}function cGe(t,e,n){return t.concat(e).map(function(r){return A2(r,n)})}function uGe(t,e){if(!e.customMerge)return b0;var n=e.customMerge(t);return typeof n=="function"?n:b0}function fGe(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return Object.propertyIsEnumerable.call(t,e)}):[]}function IW(t){return Object.keys(t).concat(fGe(t))}function zle(t,e){try{return e in t}catch{return!1}}function dGe(t,e){return zle(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))}function hGe(t,e,n){var r={};return n.isMergeableObject(t)&&IW(t).forEach(function(i){r[i]=A2(t[i],n)}),IW(e).forEach(function(i){dGe(t,i)||(zle(t,i)&&n.isMergeableObject(e[i])?r[i]=uGe(i,n)(t[i],e[i],n):r[i]=A2(e[i],n))}),r}function b0(t,e,n){n=n||{},n.arrayMerge=n.arrayMerge||cGe,n.isMergeableObject=n.isMergeableObject||nGe,n.cloneUnlessOtherwiseSpecified=A2;var r=Array.isArray(e),i=Array.isArray(t),o=r===i;return o?r?n.arrayMerge(t,e,n):hGe(t,e,n):A2(e,n)}b0.all=function(e,n){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(r,i){return b0(r,i,n)},{})};var pGe=b0,gGe=pGe;const Vle=pr(gGe),mGe=(t,e)=>e,eD=(t,e)=>Vle(t,e,{arrayMerge:mGe}),vGe=(t,e)=>{const n=t.concat(e);return n.filter((r,i)=>n.indexOf(r)===i)},yGe=(t,e)=>Vle(t,e,{arrayMerge:vGe});function es(t,e){const n=Sn(t),r=Sn(e);if(n!==r)return t;const i=yGe(t,e);return t.getOneOfOrigin?Object.defineProperty(i,"getOneOfOrigin",{enumerable:!1,value:t.getOneOfOrigin}):e.getOneOfOrigin&&Object.defineProperty(i,"getOneOfOrigin",{enumerable:!1,value:e.getOneOfOrigin}),i}function F3(t,...e){const n={};return Object.keys(t).forEach(r=>{e.includes(r)||(n[r]=t[r])}),t.getOneOfOrigin&&Object.defineProperty(n,"getOneOfOrigin",{enumerable:!1,value:t.getOneOfOrigin}),n}var bGe=Function.prototype.toString,j7=Object.create,SGe=Object.prototype.toString,_Ge=function(){function t(){this._keys=[],this._values=[]}return t.prototype.has=function(e){return!!~this._keys.indexOf(e)},t.prototype.get=function(e){return this._values[this._keys.indexOf(e)]},t.prototype.set=function(e,n){this._keys.push(e),this._values.push(n)},t}();function wGe(){return new _Ge}function kGe(){return new WeakMap}var xGe=typeof WeakMap<"u"?kGe:wGe;function tD(t){if(!t)return j7(null);var e=t.constructor;if(e===Object)return t===Object.prototype?{}:j7(t);if(~bGe.call(e).indexOf("[native code]"))try{return new e}catch{}return j7(t)}function CGe(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}function TGe(t){return t.flags}var AGe=/test/g.flags==="g"?TGe:CGe;function Ble(t){var e=SGe.call(t);return e.substring(8,e.length-1)}function PGe(t){return t[Symbol.toStringTag]||Ble(t)}var EGe=typeof Symbol<"u"?PGe:Ble,OGe=Object.defineProperty,IGe=Object.getOwnPropertyDescriptor,jle=Object.getOwnPropertyNames,nD=Object.getOwnPropertySymbols,Hle=Object.prototype,Ule=Hle.hasOwnProperty,$Ge=Hle.propertyIsEnumerable,Wle=typeof nD=="function";function FGe(t){return jle(t).concat(nD(t))}var LGe=Wle?FGe:jle;function L3(t,e,n){for(var r=LGe(t),i=0,o=r.length,a=void 0,s=void 0;i<o;++i)if(a=r[i],!(a==="callee"||a==="caller")){if(s=IGe(t,a),!s){e[a]=n.copier(t[a],n);continue}!s.get&&!s.set&&(s.value=n.copier(s.value,n));try{OGe(e,a,s)}catch{e[a]=s.value}}return e}function DGe(t,e){var n=new e.Constructor;e.cache.set(t,n);for(var r=0,i=t.length;r<i;++r)n[r]=e.copier(t[r],e);return n}function NGe(t,e){var n=new e.Constructor;return e.cache.set(t,n),L3(t,n,e)}function Gle(t,e){return t.slice(0)}function MGe(t,e){return t.slice(0,t.size,t.type)}function RGe(t,e){return new e.Constructor(Gle(t.buffer))}function zGe(t,e){return new e.Constructor(t.getTime())}function qle(t,e){var n=new e.Constructor;return e.cache.set(t,n),t.forEach(function(r,i){n.set(i,e.copier(r,e))}),n}function VGe(t,e){return L3(t,qle(t,e),e)}function BGe(t,e){var n=tD(e.prototype);e.cache.set(t,n);for(var r in t)Ule.call(t,r)&&(n[r]=e.copier(t[r],e));return n}function jGe(t,e){var n=tD(e.prototype);e.cache.set(t,n);for(var r in t)Ule.call(t,r)&&(n[r]=e.copier(t[r],e));for(var i=nD(t),o=0,a=i.length,s=void 0;o<a;++o)s=i[o],$Ge.call(t,s)&&(n[s]=e.copier(t[s],e));return n}var HGe=Wle?jGe:BGe;function UGe(t,e){var n=tD(e.prototype);return e.cache.set(t,n),L3(t,n,e)}function H7(t,e){return new e.Constructor(t.valueOf())}function WGe(t,e){var n=new e.Constructor(t.source,AGe(t));return n.lastIndex=t.lastIndex,n}function Fx(t,e){return t}function Yle(t,e){var n=new e.Constructor;return e.cache.set(t,n),t.forEach(function(r){n.add(e.copier(r,e))}),n}function GGe(t,e){return L3(t,Yle(t,e),e)}var qGe=Array.isArray,rD=Object.assign,YGe=Object.getPrototypeOf||function(t){return t.__proto__},Kle={array:DGe,arrayBuffer:Gle,blob:MGe,dataView:RGe,date:zGe,error:Fx,map:qle,object:HGe,regExp:WGe,set:Yle},KGe=rD({},Kle,{array:NGe,map:VGe,object:UGe,set:GGe});function XGe(t){return{Arguments:t.object,Array:t.array,ArrayBuffer:t.arrayBuffer,Blob:t.blob,Boolean:H7,DataView:t.dataView,Date:t.date,Error:t.error,Float32Array:t.arrayBuffer,Float64Array:t.arrayBuffer,Int8Array:t.arrayBuffer,Int16Array:t.arrayBuffer,Int32Array:t.arrayBuffer,Map:t.map,Number:H7,Object:t.object,Promise:Fx,RegExp:t.regExp,Set:t.set,String:H7,WeakMap:Fx,WeakSet:Fx,Uint8Array:t.arrayBuffer,Uint8ClampedArray:t.arrayBuffer,Uint16Array:t.arrayBuffer,Uint32Array:t.arrayBuffer,Uint64Array:t.arrayBuffer}}function Xle(t){var e=rD({},Kle,t),n=XGe(e),r=n.Array,i=n.Object;function o(a,s){if(s.prototype=s.Constructor=void 0,!a||typeof a!="object")return a;if(s.cache.has(a))return s.cache.get(a);if(s.prototype=YGe(a),s.Constructor=s.prototype&&s.prototype.constructor,!s.Constructor||s.Constructor===Object)return i(a,s);if(qGe(a))return r(a,s);var l=n[EGe(a)];return l?l(a,s):typeof a.then=="function"?a:i(a,s)}return function(s){return o(s,{Constructor:void 0,cache:xGe(),copier:o,prototype:void 0})}}function JGe(t){return Xle(rD({},KGe,t))}JGe({});var iD=Xle({});function D3(t,e,n){if(e.if===!1)return e.else;if(e.if&&(e.then||e.else)){const r=t.validate(n,t.resolveRef(e.if));if(r.length===0&&e.then)return t.resolveRef(e.then);if(r.length!==0&&e.else)return t.resolveRef(e.else)}}const ZGe=(t,e,n,r)=>{const i=D3(t,e,n);if(i)return t.validate(n,i,r)};function QGe(t,e,n){var r;const i={...(r=t.resolveRef(e))!==null&&r!==void 0?r:{}},o=D3(t,i,n);return o||F3(i,"if","then","else")}function Jle(t,e,n=t.rootSchema){let r=iD(n);for(let i=0;i<n.allOf.length;i+=1){const o=QGe(t,n.allOf[i],e);r=es(r,o),e=t.getTemplate(e,r)}return delete r.allOf,r}function Zle(t,e){const{allOf:n}=e;if(!Array.isArray(n)||n.length===0)return;let r={};return n.forEach(i=>{r=es(r,t.resolveRef(i))}),r}const eqe=(t,e,n,r)=>{const{allOf:i}=e;if(!Array.isArray(i)||i.length===0)return;const o=[];return e.allOf.forEach(a=>{o.push(...t.validate(n,a,r))}),o};function Qle(t,e){return t==null||t.$ref==null?t:t.getRoot?t.getRoot().getRef(t):e.getRef(t)}function tqe(t,e){if(t==null||t.$ref==null)return t;const n=e.getRef(t),r=Object.assign({},n,t);return delete r.$ref,Object.defineProperty(r,"__ref",{enumerable:!1,value:t.__ref}),Object.defineProperty(r,"getRoot",{enumerable:!1,value:t.getRoot}),r}function nqe(t){return t.filter((e,n)=>t.indexOf(e)===n)}function dg(t){return Sn(t)==="object"}function ece(t,e,n){const{dependencies:r}=e;if(!dg(r)||!dg(n))return;let i=!1,o={required:[]};if(Object.keys(r).forEach(a=>{var s,l;if(n[a]==null&&!(!((s=e.required)===null||s===void 0)&&s.includes(a)||!((l=o.required)===null||l===void 0)&&l.includes(a)))return;const c=r[a];if(Array.isArray(c)){i=!0,o.required.push(...c);return}if(dg(c)){i=!0,o=es(o,t.resolveRef(c));return}}),i)return o.required=nqe(o.required),o}const rqe=(t,e,n,r)=>{if(Sn(e.dependencies)!=="object")return;const i=[];return Object.keys(n).forEach(o=>{if(e.dependencies[o]===void 0||e.dependencies[o]===!0)return;if(e.dependencies[o]===!1){i.push(t.errors.missingDependencyError({pointer:r}));return}let a;const s=Sn(e.dependencies[o]);if(s==="array")a=e.dependencies[o].filter(l=>n[l]===void 0).map(l=>t.errors.missingDependencyError({missingProperty:l,pointer:r}));else if(s==="object")a=t.validate(n,e.dependencies[o],r);else throw new Error(`Invalid dependency definition for ${r}/${o}. Must be string[] or schema`);i.push(...a)}),i.length>0?i:void 0},Wn={additionalItemsError:Dt("AdditionalItemsError"),additionalPropertiesError:Dt("AdditionalPropertiesError"),anyOfError:Dt("AnyOfError"),allOfError:Dt("AllOfError"),constError:Dt("ConstError"),containsError:Dt("ContainsError"),containsArrayError:Dt("ContainsArrayError"),containsAnyError:Dt("ContainsAnyError"),enumError:Dt("EnumError"),forbiddenPropertyError:Dt("ForbiddenPropertyError"),formatURLError:Dt("FormatURLError"),formatURIError:Dt("FormatURIError"),formatURIReferenceError:Dt("FormatURIReferenceError"),formatURITemplateError:Dt("FormatURITemplateError"),formatDateError:Dt("FormatDateaError"),formatDateTimeError:Dt("FormatDateTimeError"),formatEmailError:Dt("FormatEmailError"),formatHostnameError:Dt("FormatHostnameError"),formatIPV4Error:Dt("FormatIPV4Error"),formatIPV4LeadingZeroError:Dt("FormatIPV4LeadingZeroError"),formatIPV6Error:Dt("FormatIPV6Error"),formatIPV6LeadingZeroError:Dt("FormatIPV6LeadingZeroError"),formatJsonPointerError:Dt("FormatJsonPointerError"),formatRegExError:Dt("FormatRegExError"),formatTimeError:Dt("FormatTimeError"),invalidSchemaError:Dt("InvalidSchemaError"),invalidDataError:Dt("InvalidDataError"),invalidTypeError:Dt("InvalidTypeError"),invalidPropertyNameError:Dt("InvalidPropertyNameError"),maximumError:Dt("MaximumError"),maxItemsError:Dt("MaxItemsError"),maxLengthError:Dt("MaxLengthError"),maxPropertiesError:Dt("MaxPropertiesError"),minimumError:Dt("MinimumError"),minItemsError:Dt("MinItemsError"),minItemsOneError:Dt("MinItemsOneError"),minLengthError:Dt("MinLengthError"),minLengthOneError:Dt("MinLengthOneError"),minPropertiesError:Dt("MinPropertiesError"),missingDependencyError:Dt("MissingDependencyError"),missingOneOfPropertyError:Dt("MissingOneOfPropertyError"),multipleOfError:Dt("MultipleOfError"),multipleOneOfError:Dt("MultipleOneOfError"),noAdditionalPropertiesError:Dt("NoAdditionalPropertiesError"),notError:Dt("NotError"),oneOfError:Dt("OneOfError"),oneOfPropertyError:Dt("OneOfPropertyError"),patternError:Dt("PatternError"),patternPropertiesError:Dt("PatternPropertiesError"),requiredPropertyError:Dt("RequiredPropertyError"),typeError:Dt("TypeError"),undefinedValueError:Dt("UndefinedValueError"),uniqueItemsError:Dt("UniqueItemsError"),unknownPropertyError:Dt("UnknownPropertyError"),valueNotEmptyError:Dt("ValueNotEmptyError")};function tce(t,e,n){if(!Array.isArray(e.anyOf)||e.anyOf.length===0)return;let r;return e.anyOf.forEach(i=>{i=t.resolveRef(i),t.isValid(n,i)&&(r=r?es(r,i):i)}),r}function nce(t,e,n=t.rootSchema,r="#"){const{anyOf:i}=n;if(!Array.isArray(i)||i.length===0)return n;const o=tce(t,n,e);if(o==null)return Wn.anyOfError({value:e,pointer:r,anyOf:JSON.stringify(i)});const a=es(n,o);return F3(a,"anyOf")}const iqe=(t,e,n,r)=>{if(!(!Array.isArray(e.anyOf)||e.anyOf.length===0)){for(let i=0;i<e.anyOf.length;i+=1)if(t.isValid(n,e.anyOf[i]))return;return t.errors.anyOfError({anyOf:e.anyOf,value:n,pointer:r})}},oqe=["allOf","anyOf","oneOf","dependencies","if","then","else"];function rce(t,e,n){let r;if(e=t.resolveRef(e),e.oneOf){const c=$3(t,n,e);c&&c.type!=="error"&&(r=es(r??{},c))}const i=Zle(t,e);i&&(r=es(r??{},i));const o=tce(t,e,n);o&&(r=es(r??{},o));const a=ece(t,e,n);a&&(r=es(r??{},a));const s=D3(t,e,n);if(s&&(r=es(r??{},s)),r==null)return;const l=rce(t,r,n);return l&&(r=es(r,l)),F3(r,...oqe)}const aqe=["allOf","anyOf","oneOf","dependencies","if","then","else"];function PC(t,e,n){let r=rce(t,e,n);return r?(r=es(e,r),F3(r,...aqe)):e}class ice{constructor(e,n){this.remotes={},this.errors={},this.typeKeywords={},this.validateKeyword={},this.validateType={},this.validateFormat={},this.config=e,this.typeKeywords=iD(e.typeKeywords),this.validateKeyword=Object.assign({},e.validateKeyword),this.validateType=Object.assign({},e.validateType),this.validateFormat=Object.assign({},e.validateFormat),this.errors=Object.assign({},e.errors),this.setSchema(n)}get rootSchema(){return this.__rootSchema}set rootSchema(e){e!=null&&(this.__rootSchema=this.config.compileSchema(this,e))}addRemoteSchema(e,n){this.config.addRemoteSchema(this,e,n)}compileSchema(e){var n;return this.config.compileSchema(this,e,(n=this.rootSchema)!==null&&n!==void 0?n:e)}createSchemaOf(e){return this.config.createSchemaOf(e)}each(e,n,r,i){return this.config.each(this,e,n,r,i)}eachSchema(e,n=this.rootSchema){return this.config.eachSchema(n,e)}getChildSchemaSelection(e,n){return this.config.getChildSchemaSelection(this,e,n)}getSchema(e="#",n,r){return this.config.getSchema(this,e,n,r)}getTemplate(e,n,r=this.config.templateDefaultOptions){return this.config.getTemplate(this,e,n,r)}isValid(e,n,r){return this.config.isValid(this,e,n,r)}resolveAnyOf(e,n,r){return this.config.resolveAnyOf(this,e,n,r)}resolveAllOf(e,n){return this.config.resolveAllOf(this,e,n)}resolveRef(e){return this.config.resolveRef(e,this.rootSchema)}resolveOneOf(e,n,r){return this.config.resolveOneOf(this,e,n,r)}setSchema(e){this.rootSchema=e}step(e,n,r,i){return this.config.step(this,e,n,r,i)}validate(e,n,r){return this.config.validate(this,e,n,r)}}function oce(t,e,n){n.id=n.id||e,t.remotes[e]=t.compileSchema(n)}var ace={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(typeof self<"u"?self:ui,()=>(()=>{var n={d:(z,B)=>{for(var ie in B)n.o(B,ie)&&!n.o(z,ie)&&Object.defineProperty(z,ie,{enumerable:!0,get:B[ie]})},o:(z,B)=>Object.prototype.hasOwnProperty.call(z,B),r:z=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(z,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(z,"__esModule",{value:!0})}},r={};function i(z){return z==="#"||z===""||Array.isArray(z)&&z.length===0||!1}n.r(r),n.d(r,{default:()=>R,get:()=>d,isRoot:()=>i,join:()=>D,remove:()=>k,removeUndefinedItems:()=>C,set:()=>v,split:()=>f,splitLast:()=>F});const o=/~1/g,a=/~0/g,s=/\/+/g,l=/(^[#/]*|\/+$)/g;function c(z){return z.replace(o,"/").replace(a,"~")}function u(z){return c(decodeURIComponent(z))}function f(z){if(z==null||typeof z!="string"||i(z))return Array.isArray(z)?z:[];const B=z.indexOf("#")>=0?u:c,ie=(z=(z=z.replace(s,"/")).replace(l,"")).split("/");for(let oe=0,_e=ie.length;oe<_e;oe+=1)ie[oe]=B(ie[oe]);return ie}function d(z,B,ie=void 0){if(B==null||z==null)return ie;if(i(B))return z;const oe=h(z,f(B));return oe===void 0?ie:oe}function h(z,B){const ie=B.shift();if(z!==void 0)return ie!==void 0?h(z[ie],B):z}const g=/^\[.*\]$/,y=/^\[(.+)\]$/;function S(z,B){return z==="__proto__"||z=="constructor"&&B.length>0&&B[0]=="prototype"}function v(z,B,ie){if(B==null)return z;const oe=f(B);if(oe.length===0)return z;z==null&&(z=g.test(oe[0])?[]:{});let _e,Ae,Pe=z;for(;oe.length>1;)_e=oe.shift(),Ae=g.test(oe[0]),S(_e,oe)||(Pe=x(Pe,_e,Ae));return _e=oe.pop(),_(Pe,_e,ie),z}function _(z,B,ie){let oe;const _e=B.match(y);B==="[]"&&Array.isArray(z)?z.push(ie):_e?(oe=_e.pop(),z[oe]=ie):z[B]=ie}function x(z,B,ie){if(z[B]!=null)return z[B];const oe=ie?[]:{};return _(z,B,oe),oe}function C(z){let B=0,ie=0;for(;B+ie<z.length;)z[B+ie]===void 0&&(ie+=1),z[B]=z[B+ie],B+=1;return z.length=z.length-ie,z}function k(z,B,ie){const oe=f(B),_e=oe.pop(),Ae=d(z,oe);return Ae&&delete Ae[_e],Array.isArray(Ae)&&ie!==!0&&C(Ae),z}const m=/\/+/g,T=/~/g,E=/\//g;function I(z,B){if(z.length===0)return B?"#":"";for(let ie=0,oe=z.length;ie<oe;ie+=1)z[ie]=z[ie].replace(T,"~0").replace(E,"~1"),B&&(z[ie]=encodeURIComponent(z[ie]));return((B?"#/":"/")+z.join("/")).replace(m,"/")}function D(z,...B){const ie=[];if(Array.isArray(z))return I(z,arguments[1]===!0);const oe=arguments[arguments.length-1],_e=typeof oe=="boolean"?oe:z&&z[0]==="#";for(let Pe=0,Se=arguments.length;Pe<Se;Pe+=1)ie.push.apply(ie,f(arguments[Pe]));const Ae=[];for(let Pe=0,Se=ie.length;Pe<Se;Pe+=1)if(ie[Pe]===".."){if(Ae.length===0)return _e?"#":"";Ae.pop()}else Ae.push(ie[Pe]);return I(Ae,_e)}function F(z){const B=f(z);if(B.length===0)return typeof z=="string"&&z[0]==="#"?["#",B[0]]:["",void 0];if(B.length===1)return z[0]==="#"?["#",B[0]]:["",B[0]];const ie=B.pop();return[D(B,z[0]==="#"),ie]}const R={get:d,set:v,remove:k,join:D,split:f,splitLast:F,isRoot:i,removeUndefinedItems:C};return r})())})(ace);var Qp=ace.exports;const S0=pr(Qp);var sce={},Ms={},N3={};Object.defineProperty(N3,"__esModule",{value:!0});N3.TokenError=void 0;class sqe extends Error{constructor(e,n){if(super(e),this.message=e,this.token=n,n&&n.errors)n.errors.push(this);else throw this}inspect(){return"SyntaxError: "+this.message}}N3.TokenError=sqe;Object.defineProperty(Ms,"__esModule",{value:!0});Ms.Parser=Ms.findRuleByName=Ms.parseRuleName=Ms.escapeRegExp=Ms.readToken=void 0;const $W=/^[A-Z0-9_]+$/,FW=/(\?|\+|\*)$/,LW=/^(@|&|!)/,Fk="WS",Lk=N3;function FO(t,e){let n=e.exec(t);return n&&n.index==0?n[0].length==0&&e.source.length>0?null:{type:null,text:n[0],rest:t.substr(n[0].length),start:0,end:n[0].length-1,fullText:n[0],errors:[],children:[],parent:null}:null}Ms.readToken=FO;function lce(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}Ms.escapeRegExp=lce;function cce(t){t.rest="",t.children&&t.children.forEach(e=>cce(e))}function uce(t,e){t.start+=e,t.end+=e,t.children&&t.children.forEach(n=>uce(n,t.start))}function fce(t,e){e.errors&&e.errors.length&&e.errors.forEach(n=>t.push(n)),e.children&&e.children.forEach(n=>fce(t,n))}function Np(t){let e=FW.exec(t),n=LW.exec(t),r=e&&e[0]||"",i=n&&n[0]||"",o={raw:t,name:t.replace(FW,"").replace(LW,""),isOptional:r=="?"||r=="*",allowRepetition:r=="+"||r=="*",atLeastOne:r=="+",lookupPositive:i=="&",lookupNegative:i=="!",pinned:i=="@",lookup:!1,isLiteral:!1};return o.isLiteral=o.name[0]=="'"||o.name[0]=='"',o.lookup=o.lookupNegative||o.lookupPositive,o}Ms.parseRuleName=Np;function dce(t,e){let n=Np(t);return e.cachedRules[n.name]||null}Ms.findRuleByName=dce;function LO(t,e){if(t.children){let n=t.children.filter(r=>r.type&&e.test(r.type));for(let r=0;r<n.length;r++){let i=t.children.indexOf(n[r]);i!=-1&&t.children.splice(i,1)}t.children.forEach(r=>LO(r,e))}}const lqe=["EOF"];class hce{constructor(e,n){this.grammarRules=e,this.options=n,this.cachedRules={},this.debug=n?n.debug===!0:!1;let r=[],i=[];if(e.forEach(o=>{let a=Np(o.name);if(a.name in this.cachedRules){r.push("Duplicated rule "+a.name);return}else this.cachedRules[a.name]=o;if(!o.bnf||!o.bnf.length){let s="Missing rule content, rule: "+o.name;r.indexOf(s)==-1&&r.push(s)}else o.bnf.forEach(s=>{if(typeof s[0]=="string"&&Np(s[0]).name==o.name){let c="Left recursion is not allowed, rule: "+o.name;r.indexOf(c)==-1&&r.push(c)}s.forEach(l=>{if(typeof l=="string"){let c=Np(l);!c.isLiteral&&i.indexOf(c.name)==-1&&lqe.indexOf(c.name)==-1&&i.push(c.name)}})});Fk==o.name&&(o.implicitWs=!1),o.implicitWs&&i.indexOf(Fk)==-1&&i.push(Fk),o.recover&&i.indexOf(o.recover)==-1&&i.push(o.recover)}),i.forEach(o=>{o in this.cachedRules||r.push("Missing rule "+o)}),r.length)throw new Error(r.join(`
`))}getAST(e,n){n||(n=this.grammarRules.filter(i=>!i.fragment&&i.name.indexOf("%")!=0)[0].name);let r=this.parse(e,n);if(r){fce(r.errors,r),uce(r,0),LO(r,/^%/),(!this.options||!this.options.keepUpperRules)&&LO(r,$W);let i=r.rest;i&&new Lk.TokenError(`Unexpected end of input: 
`+i,r),cce(r),r.rest=i}return r}emitSource(){return"CANNOT EMIT SOURCE FROM BASE Parser"}parse(e,n,r=0){let i=null,o=Np(n),a,s=this.debug&&!$W.test(o.name);s&&console.log(new Array(r).join("  ")+"Trying to get "+n+" from "+JSON.stringify(e.split(`
`)[0]));let l=o.name,c=dce(o.name,this);if(o.name=="EOF"){if(e.length)return null;if(e.length==0)return{type:"EOF",text:"",rest:"",start:0,end:0,fullText:"",errors:[],children:[],parent:null}}try{if(!c&&o.isLiteral){let u=o.name.trim();if(u.startsWith('"')?u=JSON.parse(u):u.startsWith("'")&&(u=u.replace(/^'(.+)'$/,"$1").replace(/\\'/g,"'")),u==="")return{type:"%%EMPTY%%",text:"",rest:e,start:0,end:0,fullText:"",errors:[],children:[],parent:null};a=new RegExp(lce(u)),l=null}}catch(u){return u instanceof ReferenceError&&console.error(u),null}if(a){let u=FO(e,a);if(u)return u.type=l,u}else{let u=c.bnf;u instanceof Array&&u.forEach(f=>{if(i)return;let d=null,h={type:o.name,text:"",children:[],end:0,errors:[],fullText:"",parent:null,start:0,rest:e};c.fragment&&(h.fragment=!0);let g=e,y=0,S=f.length>0,v=!1;for(let _=0;_<f.length;_++)if(typeof f[_]=="string"){let x=Np(f[_]);S=S&&x.isOptional;let C,k=!1;do{if(C=null,c.implicitWs&&(C=this.parse(g,x.name,r+1),!C)){let m;do if(m=this.parse(g,Fk,r+1),m)h.text=h.text+m.text,h.end=h.text.length,m.parent=h,h.children.push(m),g=g.substr(m.text.length),y+=m.text.length;else break;while(m&&m.text.length)}if(C=C||this.parse(g,x.name,r+1),x.lookupNegative){if(C)return;break}if(x.lookupPositive&&!C)return;if(!C&&(x.isOptional||x.atLeastOne&&k))break;if(C&&c.pinned==_+1&&(d=C,s&&console.log(new Array(r+1).join("  ")+" "+C.type+" PINNED")),C||(C=this.parseRecovery(c,g,r+1)),!C)if(d)i=h,C={type:"SyntaxError",text:g,children:[],end:g.length,errors:[],fullText:"",parent:null,start:0,rest:""},g.length?new Lk.TokenError(`Unexpected end of input. Expecting ${x.name} Got: ${g}`,C):new Lk.TokenError(`Unexpected end of input. Missing ${x.name}`,C),s&&console.log(new Array(r+1).join("  ")+" "+C.type+" "+JSON.stringify(C.text));else return;if(k=!0,v=!0,C.type=="%%EMPTY%%")break;C.start+=y,C.end+=y,!x.lookupPositive&&C.type&&(C.fragment?C.children&&C.children.forEach(m=>{m.start+=y,m.end+=y,m.parent=h,h.children.push(m)}):(C.parent=h,h.children.push(C))),x.lookup&&(C.lookup=!0),s&&console.log(new Array(r+1).join("  ")+" "+C.type+" "+JSON.stringify(C.text)),!x.lookup&&!C.lookup&&(h.text=h.text+C.text,h.end=h.text.length,g=g.substr(C.text.length),y+=C.text.length),h.rest=g}while(C&&x.allowRepetition&&g.length&&!C.lookup)}else{let x=FO(g,f[_]);if(!x)return;s&&console.log(new Array(r+1).join("  ")+"> "+JSON.stringify(x.text)+f[_].source),v=!0,x.start+=y,x.end+=y,h.text=h.text+x.text,h.end=h.text.length,g=g.substr(x.text.length),y+=x.text.length,h.rest=g}v&&(i=h,s&&console.log(new Array(r).join("  ")+"<< PUSHING "+i.type+" "+JSON.stringify(i.text)))}),i&&c.simplifyWhenOneChildren&&i.children.length==1&&(i=i.children[0])}return i||s&&console.log(n+" NOT RESOLVED FROM "+e),i}parseRecovery(e,n,r){if(e.recover&&n.length){let i=this.debug;i&&console.log(new Array(r+1).join("  ")+"Trying to recover until token "+e.recover+" from "+JSON.stringify(n.split(`
`)[0]+n.split(`
`)[1]));let o={type:"SyntaxError",text:"",children:[],end:0,errors:[],fullText:"",parent:null,start:0,rest:""},a;do if(a=this.parse(n,e.recover,r+1),a){new Lk.TokenError('Unexpected input: "'+o.text+`" Expecting: ${e.name}`,o);break}else o.text=o.text+n[0],o.end=o.text.length,n=n.substr(1);while(!a&&n.length>0);if(o.text.length>0&&a)return i&&console.log(new Array(r+1).join("  ")+"Recovered text: "+JSON.stringify(o.text)),o}return null}}Ms.Parser=hce;Ms.default=hce;Object.defineProperty(sce,"__esModule",{value:!0});const ub=Ms;var DO;(function(t){t.RULES=[{name:"Grammar",bnf:[["RULE_S*","%Atomic*","EOF"]]},{name:"%Atomic",bnf:[["Production","RULE_S*"]],fragment:!0},{name:"Production",bnf:[["NCName","RULE_S*",'"::="',"RULE_WHITESPACE*","Choice","RULE_WHITESPACE*","RULE_EOL+","RULE_S*"]]},{name:"NCName",bnf:[[/[a-zA-Z][a-zA-Z_0-9]*/]]},{name:"Choice",bnf:[["SequenceOrDifference","%_Choice_1*"]],fragment:!0},{name:"%_Choice_1",bnf:[["RULE_WHITESPACE*",'"|"',"RULE_WHITESPACE*","SequenceOrDifference"]],fragment:!0},{name:"SequenceOrDifference",bnf:[["Item","RULE_WHITESPACE*","%_Item_1?"]]},{name:"%_Item_1",bnf:[["Minus","Item"],["Item*"]],fragment:!0},{name:"Minus",bnf:[['"-"']]},{name:"Item",bnf:[["RULE_WHITESPACE*","%Primary","PrimaryDecoration?"]],fragment:!0},{name:"PrimaryDecoration",bnf:[['"?"'],['"*"'],['"+"']]},{name:"DecorationName",bnf:[['"ebnf://"',/[^\x5D#]+/]]},{name:"%Primary",bnf:[["NCName"],["StringLiteral"],["CharCode"],["CharClass"],["SubItem"]],fragment:!0},{name:"SubItem",bnf:[['"("',"RULE_WHITESPACE*","Choice","RULE_WHITESPACE*",'")"']]},{name:"StringLiteral",bnf:[[`'"'`,/[^"]*/,`'"'`],[`"'"`,/[^']*/,`"'"`]],pinned:1},{name:"CharCode",bnf:[['"#x"',/[0-9a-zA-Z]+/]]},{name:"CharClass",bnf:[["'['","'^'?","%RULE_CharClass_1+",'"]"']]},{name:"%RULE_CharClass_1",bnf:[["CharCodeRange"],["CharRange"],["CharCode"],["RULE_Char"]],fragment:!0},{name:"RULE_Char",bnf:[[/\x09/],[/\x0A/],[/\x0D/],[/[\x20-\x5c]/],[/[\x5e-\uD7FF]/],[/[\uE000-\uFFFD]/]]},{name:"CharRange",bnf:[["RULE_Char",'"-"',"RULE_Char"]]},{name:"CharCodeRange",bnf:[["CharCode",'"-"',"CharCode"]]},{name:"RULE_WHITESPACE",bnf:[["%RULE_WHITESPACE_CHAR*"],["Comment","RULE_WHITESPACE*"]]},{name:"RULE_S",bnf:[["RULE_WHITESPACE","RULE_S*"],["RULE_EOL","RULE_S*"]]},{name:"%RULE_WHITESPACE_CHAR",bnf:[[/\x09/],[/\x20/]],fragment:!0},{name:"Comment",bnf:[['"/*"',"%RULE_Comment_Body*",'"*/"']]},{name:"%RULE_Comment_Body",bnf:[['!"*/"',/[^*]/]],fragment:!0},{name:"RULE_EOL",bnf:[[/\x0D/,/\x0A/],[/\x0A/],[/\x0D/]]},{name:"Link",bnf:[["'['","Url","']'"]]},{name:"Url",bnf:[[/[^\x5D:/?#]/,'"://"',/[^\x5D#]+/,"%Url1?"]]},{name:"%Url1",bnf:[['"#"',"NCName"]],fragment:!0}],t.defaultParser=new ub.Parser(t.RULES,{debug:!1});const e=/^(!|&)/,n=/(\?|\+|\*)$/,r=/^%/;function i(v,_){if(typeof v=="string"){if(e.test(v))return"";if(r.test(v)){let C=n.exec(v),k=C?C[0]+" ":"";return o(v,_)?s(v,_)+k:"("+s(v,_)+")"+k}return v}else return v.source.replace(/\\(?:x|u)([a-zA-Z0-9]+)/g,"#x$1").replace(/\[\\(?:x|u)([a-zA-Z0-9]+)-\\(?:x|u)([a-zA-Z0-9]+)\]/g,"[#x$1-#x$2]")}function o(v,_){let x=ub.findRuleByName(v,_);return x&&x.bnf.length==1&&x.bnf[0].length==1&&(x.bnf[0][0]instanceof RegExp||x.bnf[0][0][0]=='"'||x.bnf[0][0][0]=="'")}function a(v,_){return v.map(x=>i(x,_)).join(" ")}function s(v,_){let x=ub.findRuleByName(v,_);return x?x.bnf.map(C=>a(C,_)).join(" | "):"RULE_NOT_FOUND {"+v+"}"}function l(v){let _=[];return v.grammarRules.forEach(x=>{if(!/^%/.test(x.name)){let C=x.recover?" /* { recoverUntil="+x.recover+" } */":"";_.push(x.name+" ::= "+s(x.name,v)+C)}}),_.join(`
`)}t.emit=l;let c=0;function u(v,_){throw console.log("reberia restar "+_+" a "+v),new Error("Difference not supported yet")}function f(v){return new RegExp(v.replace(/#x([a-zA-Z0-9]{4})/g,"\\u$1").replace(/#x([a-zA-Z0-9]{3})/g,"\\u0$1").replace(/#x([a-zA-Z0-9]{2})/g,"\\x$1").replace(/#x([a-zA-Z0-9]{1})/g,"\\x0$1"))}function d(v,_,x){let C=null,k=[];return _.children.forEach((m,T)=>{m.type=="Minus"&&u(C,m);let E=_.children[T+1];E=E&&E.type=="PrimaryDecoration"&&E.text||"";let I="";switch(m.type){case"SubItem":let D="%"+(x+c++);h(v,m,D),k.push(I+D+E);break;case"NCName":case"StringLiteral":k.push(I+m.text+E);break;case"CharCode":case"CharClass":if(E||I){let F={name:"%"+(x+c++),bnf:[[f(m.text)]]};v.push(F),k.push(I+F.name+E)}else k.push(f(m.text));break;case"PrimaryDecoration":break;default:throw new Error(" HOW SHOULD I PARSE THIS? "+m.type+" -> "+JSON.stringify(m.text))}C=m}),k}function h(v,_,x){let C=_.children.filter(T=>T.type=="SequenceOrDifference").map(T=>d(v,T,x)),k={name:x,bnf:C},m=null;C.forEach(T=>{m=m||T.recover,delete T.recover}),x.indexOf("%")==0&&(k.fragment=!0),m&&(k.recover=m),v.push(k)}function g(v,_=t.defaultParser){let x=_.getAST(v);if(!x)throw new Error("Could not parse "+v);if(x.errors&&x.errors.length)throw x.errors[0];let C=[];return x.children.filter(k=>k.type=="Production").map(k=>{let m=k.children.filter(T=>T.type=="NCName")[0].text;h(C,k,m)}),C}t.getRules=g;function y(v,_=t.defaultParser){return g(v.join(""),_)}t.Transform=y;class S extends ub.Parser{constructor(_,x){const C=x&&x.debugRulesParser===!0?new ub.Parser(t.RULES,{debug:!0}):t.defaultParser;super(g(_,C),x)}emitSource(){return l(this)}}t.Parser=S})(DO||(DO={}));var cqe=sce.default=DO;const uqe="[^?/{}*,()#]+",fqe=`
root ::= ("#" recursion | recursion | (query | pattern) recursion* | "#" SEP? | SEP)
recursion ::= (SEP query | pattern)*

query ::= (ESC escaped ESC | property | all | any | regex) typecheck? lookahead?
property ::= ${uqe}
regex ::= "{" [^}]+ "}"
SEP ::= "/"
all ::= "**"
any ::= "*"

typecheck ::= "?:" ("value" | "boolean" | "string" | "number" | "object" | "array")
lookahead ::= "?" expression ((andExpr | orExpr) expression)*
andExpr ::= S? "&&" S?
orExpr ::= S? "||" S?

expression ::= (exprProperty | ESC escaped ESC) ((isnot | is) (exprProperty | regex | ESC escaped ESC))*
exprProperty ::= [a-zA-Z0-9-_ $]+
escaped ::= [^"]+
is ::= ":"
isnot ::= ":!"
ESC ::= '"'

pattern ::= S? "(" (SEP query | pattern (orPattern? pattern)*)* ")" quantifier? S? lookahead?
quantifier ::= "+" | "*" | [0-9]+
orPattern ::= S? "," S?

S ::= [ ]*
`,dqe=new cqe.Parser(fqe),hqe=t=>dqe.getAST(t),Xa=0,_0=3,EC=(t,e)=>`${t}/${e}`,pce=Object.prototype.toString,pqe=/Object|Array/,NO=t=>pqe.test(pce.call(t)),gqe=t=>pce.call(t).match(/\s([^\]]+)\]/).pop().toLowerCase();function gce(t){return new RegExp(t.text.replace(/(^{|}$)/g,""))}function mqe(t,e){Array.isArray(t)?t.forEach(e):Object.prototype.toString.call(t)==="[object Object]"&&Object.keys(t).forEach(function(n){e(t[n],n,t)})}function DW(t){return Array.isArray(t)?t.map(function(e,n){return`${n}`}):Object.prototype.toString.call(t)==="[object Object]"?Object.keys(t):[]}const Vd={mem:[],get(t,e){const n=t[Xa][e];if(!Vd.mem.includes(n))return NO(n)&&Vd.mem.push(n),[n,e,t[Xa],EC(t[_0],e)]},reset(){Vd.mem.length=0}},MO={any(t,e){const n=e[Xa];return DW(n).map(r=>[n[r],r,n,EC(e[_0],r)])},all(t,e){const n=[e];return mqe(e[Xa],(r,i)=>{const o=Vd.get(e,i);o&&n.push(...MO.all(t,o))}),n},regex(t,e){const n=gce(t),r=e[Xa];return DW(r).filter(i=>n.test(i)).map(i=>[r[i],i,r,EC(e[_0],i)])}},OC={escaped:(t,e)=>OC.property(t,e),property:(t,e)=>{const n=t.text;if(e[Xa]&&e[Xa][n]!==void 0)return[e[Xa][n],n,e[Xa],EC(e[_0],n)]},typecheck:(t,e)=>{const n=t.text.replace(/^\?:/,"");if(n==="value")return NO(e[Xa])?void 0:e;if(gqe(e[Xa])===n)return e},lookahead:(t,e)=>{let n=!0,r=!1;return t.children.forEach(i=>{if(i.type==="expression"){const o=OC.expression(i,e)!==void 0;n=r===!0?n||o:n&&o}else r=i.type==="orExpr"}),n?e:void 0},expression:(t,e)=>{const n=t.children[0].text,r=t.children[1],i=t.children[2],o=e[Xa];if(NO(o)!==!1)return vqe(o[n],r,i)?e:void 0}};function vqe(t,e,n){if(e===void 0)return t!==void 0;let r;const i=`${t}`;return n.type==="regex"?r=gce(n).test(i):r=i===n.text,e.type==="isnot"&&(r=r===!1&&t!==void 0),r}function yqe(t,e,n,r){const i=[];for(let o=0,a=e.length;o<a;o+=1)i.push(...t(n,e[o],n,r));return i}function bqe(t,e,n,r){const i=[];for(let o=0,a=e.length;o<a;o+=1){const s=t(n,e[o],r);s&&i.push(s)}return i}function Sqe(t,e,n){let r=t;return e.children.forEach(i=>{if(MO[i.type])r=yqe(MO[i.type],r,i,n);else if(OC[i.type])r=bqe(OC[i.type],r,i,n);else throw new Error(`Unknown filter ${i.type}`)}),r}function _qe(t,e,n){const r=[];let i=t;return e.children.forEach(o=>{if(o.type==="orPattern"){r.push(...i),i=t;return}i=oD(i,o,n)}),r.push(...i),r}function wqe(t){if(t==null)return 1;if(t==="*"||t==="+")return 1/0;const e=parseInt(t);return isNaN(e)?1:e}function kqe(t,e,n){const r=[],i=e.children.find(l=>l.type==="quantifier"),o=wqe(i&&i.text);let a=t;i&&i.text==="*"&&r.push(...a);let s=0;for(;a.length>0&&s<o;)a=_qe(a,e,n),r.push(...a),s+=1;return r}function xqe(t,e,n){let r=t;return e.children.forEach(i=>r=oD(r,i,n)),r}function oD(t,e,n){let r;return e.type==="query"?r=Sqe(t,e,n):e.type==="pattern"?r=kqe(t,e,n):r=xqe(t,e,n),Vd.reset(),Vd.mem.push(t),r}function Cqe(t,e){return Vd.reset(),Vd.mem.push(t),oD([[t,null,null,"#"]],e)}const NW={value:t=>t.map(e=>e[Xa]),pointer:t=>t.map(e=>e[_0]),all:t=>t,map:t=>{const e={};return t.forEach(n=>e[n[_0]]=n[Xa]),e}};var Lg;(function(t){t.POINTER="pointer",t.VALUE="value",t.ALL="all",t.MAP="map"})(Lg||(Lg={}));LS.POINTER=Lg.POINTER;LS.VALUE=Lg.VALUE;LS.ALL=Lg.ALL;LS.MAP=Lg.MAP;function LS(t,e,n=Lg.VALUE){if(e==null)return[];e=e.replace(/(\/$)/g,""),e===""&&(e="#");const r=hqe(e);if(r==null)throw new Error(`empty ast for '${e}'`);if(r.rest!=="")throw new Error(`Failed parsing queryString from: '${r.rest}'`);const i=Cqe(t,r);return typeof n=="function"?i.map(o=>n(...o)):NW[n]?NW[n](i):i}var IC;(function(t){t.REPLACE_ITEMS="replace",t.INSERT_ITEMS="insert"})(IC||(IC={}));IC.REPLACE_ITEMS;IC.INSERT_ITEMS;const sf={$ref:{type:!1},allOf:{type:!1,definitions:["allOf/*"]},anyOf:{type:!1,definitions:["anyOf/*"]},array:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not","items","items/*","additionalItems"],validationKeywords:["minItems","maxItems","uniqueItems"],keywords:["items","additionalItems","minItems","maxItems","uniqueItems"]},boolean:{type:!0},enum:{type:!1},integer:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not"],validationKeywords:["minimum","maximum","multipleOf"]},not:{type:!1,definitions:["not"]},number:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not"],validationKeywords:["minimum","maximum","multipleOf"]},null:{type:!0},object:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not","properties/*","additionalProperties","patternProperties/*","dependencies/*"],validationKeywords:["minProperties","maxProperties","required"],keywords:["properties","additionalProperties","patternProperties","dependencies","minProperties","maxProperties","required"]},oneOf:{type:!1,definitions:["oneOf/*"]},string:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not"],validationKeywords:["minLength","maxLength","pattern"]}},Tqe=Object.keys(sf).filter(t=>sf[t].type===!1),MW=Object.prototype.hasOwnProperty;function RW(t){if(dg(t)===!1)return;if(t.enum)return"enum";if(sf[t.type]||Array.isArray(t.type))return t.type;const e=Tqe.filter(n=>t[n]);if(e.length===1)return e[0];if(e.length===0){for(let n=0,r=sf.object.keywords.length;n<r;n+=1){const i=sf.object.keywords[n];if(MW.call(t,i))return"object"}for(let n=0,r=sf.array.keywords.length;n<r;n+=1){const i=sf.array.keywords[n];if(MW.call(t,i))return"array"}return}throw new Error(`Mutiple typeIds [${e.join(", ")}] matched in ${JSON.stringify(t)}`)}function Aqe(t){const e=[],n=RW(t);if(n==null)return e;let r;if(Array.isArray(n)){r={};for(let i=0,o=n.length;i<o;i+=1)Object.assign(r,sf[n[i]])}else r=sf[n];return r.definitions==null||r.definitions.forEach(i=>{LS(t,i,(o,a,s,l)=>{dg(o)&&RW(o)&&e.push({pointer:S0.join(S0.split(l),!1),def:o})})}),e}function Pqe(t,e){if(this.callback(t,e)===!0)return;Aqe(t).forEach(r=>this.nextTypeDefs(r.def,S0.join(e,r.pointer,!1)))}function Dk(t,e,n,r="definitions"){const i=e[r];Object.keys(i).forEach(o=>{if(i[o]===!1||dg(i[o])){t.nextTypeDefs(i[o],S0.join(n,r,o,!1));return}})}function M3(t,e,n="#"){const r={callback:e,nextTypeDefs:Pqe};r.nextTypeDefs(t,n),t.definitions!=null&&(r.callback=(i,o)=>{e(i,o),i.definitions!=null&&Dk(r,i,o)},Dk(r,t,n)),t.$defs!=null&&(r.callback=(i,o)=>{e(i,o),i.definitions!=null&&Dk(r,i,o)},Dk(r,t,n,"$defs"))}const Eqe=/(#|\/)+$/,Nk=/#$/,Oqe=/^[^:]+:\/\/[^/]+\//,Iqe=/\/[^/]*$/,$qe=/#.*$/;function $C(t,e){return t==null&&e==null?"#":e==null?t.replace(Nk,""):t==null?e.replace(Nk,""):e[0]==="#"?`${t.replace($qe,"")}${e.replace(Eqe,"")}`:Oqe.test(e)?e.replace(Nk,""):`${t.replace(Iqe,"")}/${e.replace(Nk,"")}`}const fb=/(#|\/)+$/g,Fqe=["",null,"#"];function Lqe(t){if(Fqe.includes(t))return[];if(t=t.replace(fb,""),t.indexOf("#")===-1)return[t.replace(fb,"")];if(t.indexOf("#")===0)return[t.replace(fb,"")];const e=t.split("#");return e[0]=e[0].replace(fb,""),e[1]=`#${e[1].replace(fb,"")}`,e}const Dqe=/(#|\/)+$/g,Nqe=t=>Sn(t)==="object";function Zu(t,e,n){if(Nqe(n)&&(n=n.__ref||n.$ref),n==null)return e;let r;const i=n.replace(Dqe,"");if(t.remotes[i])return r=t.remotes[i],r&&r.$ref?Zu(t,e,r.$ref):r;if(t.ids[n])return r=Qp.get(e,t.ids[n]),r&&r.$ref?Zu(t,e,r.$ref):r;const o=Lqe(n);if(o.length===0)return e;if(o.length===1){if(n=o[0],t.remotes[n])return r=t.remotes[n],Zu(t,e,r.$ref);if(t.ids[n])return r=Qp.get(e,t.ids[n]),r&&r.$ref?Zu(t,e,r.$ref):r}if(o.length===2){const a=o[0];if(n=o[1],t.remotes[a])return t.remotes[a].getRef?t.remotes[a].getRef(n):Zu(t,t.remotes[a],n);if(t.ids[a])return Zu(t,Qp.get(e,t.ids[a]),n)}return r=Qp.get(e,t.ids[n]||n),r&&r.$ref?Zu(t,e,r.$ref):r}const zW="__compiled",VW="__ref",Mqe="getRef",Rqe="getRoot",zqe=/(#|\/)+$/g;function Vqe(t,e,n=e,r=!1){if(!e||e[zW]!==void 0)return e;const i={ids:{},remotes:t.remotes},o=JSON.stringify(e),a=JSON.parse(o);if(Object.defineProperty(a,zW,{enumerable:!1,value:!0}),Object.defineProperty(a,Mqe,{enumerable:!1,value:Zu.bind(null,i,a)}),r===!1&&o.includes("$ref")===!1)return a;e!==n&&Object.defineProperty(a,"definitions",{enumerable:!1,value:Object.assign({},n.definitions,n.$defs,e.definitions,e.$defs)});const s={},l=()=>a;return M3(a,(c,u)=>{var f;if(c.id){if(c.id.startsWith("http")&&/(allOf|anyOf|oneOf)\/\d+$/.test(u)){const S=u.replace(/\/(allOf|anyOf|oneOf)\/\d+$/,""),v=Qp.get(a,S);c.id=(f=v.id)!==null&&f!==void 0?f:c.id}i.ids[c.id.replace(zqe,"")]=u}u=`#${u}`.replace(/##+/,"#");const d=u.replace(/\/[^/]+$/,""),h=u.replace(/\/[^/]+\/[^/]+$/,""),g=s[d]||s[h],y=$C(g,c.id);s[u]=y,i.ids[y]==null&&(i.ids[y]=u),c.$ref&&!c[VW]&&(Object.defineProperty(c,VW,{enumerable:!1,value:$C(y,c.$ref)}),Object.defineProperty(c,Rqe,{enumerable:!1,value:l}))}),a}function mce(t,e,n,r=t.rootSchema,i="#"){r=t.resolveRef(r),n(r,e,i);const o=Sn(e);o==="object"?Object.keys(e).forEach(a=>{const s=t.step(a,r,e,i),l=e[a];t.each(l,n,s,`${i}/${a}`)}):o==="array"&&e.forEach((a,s)=>{const l=t.step(s,r,e,i);t.each(a,n,l,`${i}/${s}`)})}var vce={exports:{}};(function(t){(function(e){e.exports.is_uri=r,e.exports.is_http_uri=i,e.exports.is_https_uri=o,e.exports.is_web_uri=a,e.exports.isUri=r,e.exports.isHttpUri=i,e.exports.isHttpsUri=o,e.exports.isWebUri=a;var n=function(s){var l=s.match(/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/);return l};function r(s){if(s&&!/[^a-z0-9\:\/\?\#\[\]\@\!\$\&\'\(\)\*\+\,\;\=\.\-\_\~\%]/i.test(s)&&!/%[^0-9a-f]/i.test(s)&&!/%[0-9a-f](:?[^0-9a-f]|$)/i.test(s)){var l=[],c="",u="",f="",d="",h="",g="";if(l=n(s),c=l[1],u=l[2],f=l[3],d=l[4],h=l[5],!!(c&&c.length&&f.length>=0)){if(u&&u.length){if(!(f.length===0||/^\//.test(f)))return}else if(/^\/\//.test(f))return;if(/^[a-z][a-z0-9\+\-\.]*$/.test(c.toLowerCase()))return g+=c+":",u&&u.length&&(g+="//"+u),g+=f,d&&d.length&&(g+="?"+d),h&&h.length&&(g+="#"+h),g}}}function i(s,l){if(r(s)){var c=[],u="",f="",d="",h="",g="",y="",S="";if(c=n(s),u=c[1],f=c[2],d=c[3],g=c[4],y=c[5],!!u){if(l){if(u.toLowerCase()!="https")return}else if(u.toLowerCase()!="http")return;if(f)return/:(\d+)$/.test(f)&&(h=f.match(/:(\d+)$/)[0],f=f.replace(/:\d+$/,"")),S+=u+":",S+="//"+f,h&&(S+=h),S+=d,g&&g.length&&(S+="?"+g),y&&y.length&&(S+="#"+y),S}}}function o(s){return i(s,!0)}function a(s){return i(s)||o(s)}})(t)})(vce);var Bqe=vce.exports;const BW=pr(Bqe),jqe=new RegExp("^([0-9]+)-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])[Tt]([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\\.[0-9]+)?(([Zz])|([\\+|\\-]([01][0-9]|2[0-3]):[0-5][0-9]))$"),Hqe=/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,Uqe=/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,Wqe=/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,Gqe=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,qqe=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,Yqe=[0,31,28,31,30,31,30,31,31,30,31,30,31],Kqe=/^(?:\/(?:[^~/]|~0|~1)*)*$/,Xqe=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,Jqe=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,Zqe=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,yce={date:(t,e,n,r)=>{if(typeof n!="string")return;const i=n.match(Gqe);if(!i)return Wn.formatDateTimeError({value:n,pointer:r});const o=+i[1],a=+i[2],s=+i[3],l=o%4===0&&(o%100!==0||o%400===0);if(!(a>=1&&a<=12&&s>=1&&s<=(a==2&&l?29:Yqe[a])))return Wn.formatDateError({value:n,pointer:r})},"date-time":(t,e,n,r)=>{if(typeof n=="string")return n===""||jqe.test(n)?new Date(n).toString()==="Invalid Date"?Wn.formatDateTimeError({value:n,pointer:r}):void 0:Wn.formatDateTimeError({value:n,pointer:r})},email:(t,e,n,r)=>{if(typeof n!="string")return;if(n[0]==='"')return Wn.formatEmailError({value:n,pointer:r});const[i,o,...a]=n.split("@");if(!i||!o||a.length!==0||i.length>64||o.length>253)return Wn.formatEmailError({value:n,pointer:r});if(i[0]==="."||i.endsWith(".")||i.includes(".."))return Wn.formatEmailError({value:n,pointer:r});if(!/^[a-z0-9.-]+$/i.test(o)||!/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+$/i.test(i))return Wn.formatEmailError({value:n,pointer:r});if(!o.split(".").every(s=>/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(s)))return Wn.formatEmailError({value:n,pointer:r})},hostname:(t,e,n,r)=>{if(typeof n=="string"&&!(n===""||Wqe.test(n)))return Wn.formatHostnameError({value:n,pointer:r})},ipv4:(t,e,n,r)=>{if(!(typeof n!="string"||n==="")){if(n&&n[0]==="0")return Wn.formatIPV4LeadingZeroError({value:n,pointer:r});if(!(n.length<=15&&Hqe.test(n)))return Wn.formatIPV4Error({value:n,pointer:r})}},ipv6:(t,e,n,r)=>{if(!(typeof n!="string"||n==="")){if(n&&n[0]==="0")return Wn.formatIPV6LeadingZeroError({value:n,pointer:r});if(!(n.length<=45&&Uqe.test(n)))return Wn.formatIPV6Error({value:n,pointer:r})}},"json-pointer":(t,e,n,r)=>{if(!(typeof n!="string"||n==="")&&!Kqe.test(n))return Wn.formatJsonPointerError({value:n,pointer:r})},"relative-json-pointer":(t,e,n,r)=>{if(!(typeof n!="string"||n==="")&&!Xqe.test(n))return Wn.formatJsonPointerError({value:n,pointer:r})},regex:(t,e,n,r)=>{if(typeof n=="string"&&/\\Z$/.test(n)===!1){try{new RegExp(n);return}catch{}return Wn.formatRegExError({value:n,pointer:r})}if(!(typeof n=="object"||typeof n=="number"||Array.isArray(n)))return Wn.formatRegExError({value:n,pointer:r})},time:(t,e,n,r)=>{if(typeof n!="string")return;const i=n.match(qqe);if(!i)return Wn.formatDateTimeError({value:n,pointer:r});const o=+i[1],a=+i[2],s=+i[3],l=!!i[5];if(!((o<=23&&a<=59&&s<=59||o==23&&a==59&&s==60)&&l))return Wn.formatTimeError({value:n,pointer:r})},uri:(t,e,n,r)=>{if(!(typeof n!="string"||n==="")&&!BW.isUri(n))return Wn.formatURIError({value:n,pointer:r})},"uri-reference":(t,e,n,r)=>{if(!(typeof n!="string"||n==="")&&!Jqe.test(n))return Wn.formatURIReferenceError({value:n,pointer:r})},"uri-template":(t,e,n,r)=>{if(!(typeof n!="string"||n==="")&&!Zqe.test(n))return Wn.formatURITemplateError({value:n,pointer:r})},url:(t,e,n,r)=>{if(!(n===""||BW.isWebUri(n)))return Wn.formatURLError({value:n,pointer:r})}},Qqe={};function bce(t,e,n,r=t.rootSchema){const i=S0.split(e);return r=t.resolveRef(r),Sce(t,r,i,e,n)}function Sce(t,e,n,r,i=Qqe){if(n.length===0)return t.resolveRef(e);const o=n.shift();return e=t.step(o,e,i,r),gs(e)?e:(i=i[o],Sce(t,e,n,`${r}/${o}`,i))}function eYe(t){switch(Sn(t)){case"string":case"array":return t.length===0;case"null":case"undefined":return!0;case"object":return Object.keys(t).length===0;default:return!1}}const tYe={addOptionalProps:!1,removeInvalidData:!1};let lf;function U7(t,e){const{$ref:n}=t;return n==null?!0:(lf[e]==null||lf[e][n]==null?0:lf[e][n])<W0.GET_TEMPLATE_RECURSION_LIMIT}function jW(t,e,n){const{$ref:r}=e;return r==null?e:(lf[n]=lf[n]||{},lf[n][r]=lf[n][r]||0,lf[n][r]+=1,t.resolveRef(e))}function nYe(t,e){if(t==="string")return JSON.stringify(e);if(typeof e!="string")return null;try{if(e=JSON.parse(e),typeof e===t)return e}catch{}return null}function _ce(t,e,n,r){if(Sn(e)!=="object")return Object.assign({pointer:r},e);if(U7(e,r)===!1&&n==null)return!1;let i=iD(jW(t,e,r));if(Array.isArray(e.anyOf)&&e.anyOf.length>0){if(U7(e.anyOf[0],`${r}/anyOf/0`)){const o=jW(t,e.anyOf[0],`${r}/anyOf/0`);i=eD(i,o),i.pointer=e.anyOf[0].$ref||i.pointer}delete i.anyOf}if(Array.isArray(e.allOf)&&e.allOf.map((a,s)=>U7(a,`${r}/allOf/${s}`)).reduceRight((a,s)=>a&&s,!0)){const a=Zle(t,e);a&&(i=es(i,a))}return i.pointer=i.pointer||e.$ref||r,i}const HW=t=>t&&typeof t=="object";function Gu(t,e,n,r,i){var o;if(n==null)throw new Error(`getTemplate: missing schema for data: ${JSON.stringify(e)}`);if(r==null)throw new Error("Missing pointer");let a=_ce(t,n,e,r);if(!HW(a))return;if(r=a.pointer,a!=null&&a.const)return a.const;if(Array.isArray(a.oneOf))if(eYe(e)){const u=a.oneOf[0].type||a.type||a.const&&typeof a.const||Sn(e);a={...a.oneOf[0],type:u}}else{const u=$3(t,e,a);if(gs(u)){if(e!=null&&i.removeInvalidData!==!0)return e;a=a.oneOf[0],e=void 0}else u.type=(o=u.type)!==null&&o!==void 0?o:a.type,a=u}if(!HW(a)||a.type==null)return;const s=Array.isArray(a.type)?rYe(a.type,e,a.default):a.type,l=Sn(e);return e!=null&&l!==s&&!(l==="number"&&s==="integer")&&(e=nYe(s,e)),UW[s]==null?i.removeInvalidData?void 0:e:UW[s](t,a,e,r,i)}function rYe(t,e,n){if(e==null){if(n!=null){const i=Sn(n);if(t.includes(i))return i}return t[0]}const r=Sn(e);return t.includes(r)?r:t[0]}const UW={null:(t,e,n)=>db(e,n,null),string:(t,e,n)=>db(e,n,""),number:(t,e,n)=>db(e,n,0),integer:(t,e,n)=>db(e,n,0),boolean:(t,e,n)=>db(e,n,!1),object:(t,e,n,r,i)=>{var o;const a=e.default===void 0?{}:e.default,s={},l=(o=e.required)!==null&&o!==void 0?o:[];e.properties&&Object.keys(e.properties).forEach(f=>{const d=n==null||n[f]==null?a[f]:n[f],h=l.includes(f);(d!=null||h||i.addOptionalProps)&&(s[f]=Gu(t,d,e.properties[f],`${r}/properties/${f}`,i))});let c=ece(t,e,s);if(c){c=es(e,c),delete c.dependencies;const f=Gu(t,n,c,`${r}/dependencies`,i);Object.assign(s,f)}n&&(i.removeInvalidData===!0&&(e.additionalProperties===!1||Sn(e.additionalProperties)==="object")?Sn(e.additionalProperties)==="object"&&Object.keys(n).forEach(f=>{s[f]==null&&t.isValid(n[f],e.additionalProperties)&&(s[f]=n[f])}):Object.keys(n).forEach(f=>s[f]==null&&(s[f]=n[f])));const u=D3(t,e,s);if(u){const f=Gu(t,s,{type:"object",...u},r,i);Object.assign(s,f)}return s},array:(t,e,n,r,i)=>{var o,a;if(e.items==null)return n||[];const s=e.default===void 0?[]:e.default,l=n||s,c=e.minItems||0;if(Array.isArray(e.items)){for(let f=0,d=Math.max(c??0,(a=(o=e.items)===null||o===void 0?void 0:o.length)!==null&&a!==void 0?a:0);f<d;f+=1)l[f]=Gu(t,l[f]==null?s[f]:l[f],e.items[f],`${r}/items/${f}`,i);return l}if(Sn(e.items)!=="object")return l;const u=_ce(t,e.items,n,r);if(u===!1)return l;if(r=u.pointer||r,u.oneOf&&l.length===0){const f=u.oneOf[0];for(let d=0;d<c;d+=1)l[d]=Gu(t,l[d]==null?s[d]:l[d],f,`${r}/oneOf/0`,i);return l}if(u.oneOf&&l.length>0){const f=Math.max(c,l.length);for(let d=0;d<f;d+=1){let h=l[d]==null?s[d]:l[d],g=$3(t,h,u);g==null||gs(g)?h!=null&&i.removeInvalidData!==!0?l[d]=h:(h=void 0,g=u.oneOf[0],l[d]=Gu(t,h,g,`${r}/oneOf/${d}`,i)):l[d]=Gu(t,h,g,`${r}/oneOf/${d}`,i)}return l}if(u.type){for(let f=0,d=Math.max(c,l.length);f<d;f+=1)l[f]=Gu(t,l[f]==null?s[f]:l[f],u,`${r}/items`,i);return l}return l}};function db(t,e,n){return e??(t.const?t.const:t.default===void 0&&Array.isArray(t.enum)?t.enum[0]:t.default===void 0?n:t.default)}const wce=(t,e,n=t.rootSchema,r=tYe)=>(lf={},Gu(t,e,n,"#",r));function kce(t,e,n=t.rootSchema,r="#"){return t.validate(e,n,r).length===0}function WW(t){const e=[];let n=0;const r=t.length;for(;n<r;){const i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){const o=t.charCodeAt(n++);(o&64512)==56320?e.push(((i&1023)<<10)+(o&1023)+65536):(e.push(i),n--)}else e.push(i)}return e}const W7=W0.floatingPointPrecision,iYe=Object.prototype.hasOwnProperty,GW=(t,e)=>!(t[e]===void 0||!iYe.call(t,e)),xce={additionalProperties:(t,e,n,r)=>{if(e.additionalProperties===!0||e.additionalProperties==null||Sn(e.patternProperties)==="object"&&e.additionalProperties===!1)return;const i=[];let o=Object.keys(n).filter(s=>W0.propertyBlacklist.includes(s)===!1);const a=Object.keys(e.properties||{});if(Sn(e.patternProperties)==="object"){const s=Object.keys(e.patternProperties).map(l=>new RegExp(l));o=o.filter(l=>{for(let c=0;c<s.length;c+=1)if(s[c].test(l))return!1;return!0})}for(let s=0,l=o.length;s<l;s+=1){const c=o[s];if(a.indexOf(c)===-1){const u=dg(e.additionalProperties);if(u&&Array.isArray(e.additionalProperties.oneOf)){const f=t.resolveOneOf(n[c],e.additionalProperties,`${r}/${c}`);gs(f)?i.push(t.errors.additionalPropertiesError({schema:e.additionalProperties,property:o[s],properties:a,pointer:r,errors:f.data.errors})):i.push(...t.validate(n[c],f,r))}else u?i.push(...t.validate(n[c],e.additionalProperties,`${r}/${c}`)):i.push(t.errors.noAdditionalPropertiesError({property:o[s],properties:a,pointer:r}))}}return i},allOf:eqe,anyOf:iqe,dependencies:rqe,enum:(t,e,n,r)=>{const i=Sn(n);if(i==="object"||i==="array"){const o=JSON.stringify(n);for(let a=0;a<e.enum.length;a+=1)if(JSON.stringify(e.enum[a])===o)return}else if(e.enum.includes(n))return;return t.errors.enumError({values:e.enum,value:n,pointer:r})},format:(t,e,n,r)=>{if(t.validateFormat[e.format])return t.validateFormat[e.format](t,e,n,r)},items:(t,e,n,r)=>{if(e.items===!1)return Array.isArray(n)&&n.length===0?void 0:t.errors.invalidDataError({pointer:r,value:n});const i=[];for(let o=0;o<n.length;o+=1){const a=n[o],s=t.step(o,e,n,r);if(gs(s))return[s];const l=t.validate(a,s,`${r}/${o}`);i.push(...l)}return i},maximum:(t,e,n,r)=>{if(!isNaN(e.maximum)){if(e.maximum&&e.maximum<n)return t.errors.maximumError({maximum:e.maximum,length:n,pointer:r});if(e.maximum&&e.exclusiveMaximum===!0&&e.maximum===n)return t.errors.maximumError({maximum:e.maximum,length:n,pointer:r})}},maxItems:(t,e,n,r)=>{if(!isNaN(e.maxItems)&&e.maxItems<n.length)return t.errors.maxItemsError({maximum:e.maxItems,length:n.length,pointer:r})},maxLength:(t,e,n,r)=>{if(isNaN(e.maxLength))return;const i=WW(n).length;if(e.maxLength<i)return t.errors.maxLengthError({maxLength:e.maxLength,length:i,pointer:r})},maxProperties:(t,e,n,r)=>{const i=Object.keys(n).length;if(isNaN(e.maxProperties)===!1&&e.maxProperties<i)return t.errors.maxPropertiesError({maxProperties:e.maxProperties,length:i,pointer:r})},minLength:(t,e,n,r)=>{if(isNaN(e.minLength))return;const i=WW(n).length;if(e.minLength>i)return e.minLength===1?t.errors.minLengthOneError({minLength:e.minLength,length:i,pointer:r}):t.errors.minLengthError({minLength:e.minLength,length:i,pointer:r})},minimum:(t,e,n,r)=>{if(!isNaN(e.minimum)){if(e.minimum>n)return t.errors.minimumError({minimum:e.minimum,length:n,pointer:r});if(e.exclusiveMinimum===!0&&e.minimum===n)return t.errors.minimumError({minimum:e.minimum,length:n,pointer:r})}},minItems:(t,e,n,r)=>{if(!isNaN(e.minItems)&&e.minItems>n.length)return e.minItems===1?t.errors.minItemsOneError({minItems:e.minItems,length:n.length,pointer:r}):t.errors.minItemsError({minItems:e.minItems,length:n.length,pointer:r})},minProperties:(t,e,n,r)=>{if(isNaN(e.minProperties))return;const i=Object.keys(n).length;if(e.minProperties>i)return t.errors.minPropertiesError({minProperties:e.minProperties,length:i,pointer:r})},multipleOf:(t,e,n,r)=>{if(!isNaN(e.multipleOf)&&n*W7%(e.multipleOf*W7)/W7!==0)return t.errors.multipleOfError({multipleOf:e.multipleOf,value:n,pointer:r})},not:(t,e,n,r)=>{const i=[];return t.validate(n,e.not,r).length===0&&i.push(t.errors.notError({value:n,not:e.not,pointer:r})),i},oneOf:tGe,pattern:(t,e,n,r)=>{if(new RegExp(e.pattern,"u").test(n)===!1)return t.errors.patternError({pattern:e.pattern,description:e.patternExample||e.pattern,received:n,pointer:r})},patternProperties:(t,e,n,r)=>{const i=e.properties||{},o=e.patternProperties;if(Sn(o)!=="object")return;const a=[],s=Object.keys(n),l=Object.keys(o).map(c=>({regex:new RegExp(c),patternSchema:o[c]}));return s.forEach(c=>{let u=!1;for(let f=0,d=l.length;f<d;f+=1)if(l[f].regex.test(c)){u=!0;const h=t.validate(n[c],l[f].patternSchema,`${r}/${c}`);h&&h.length>0&&a.push(...h)}i[c]||u===!1&&e.additionalProperties===!1&&a.push(t.errors.patternPropertiesError({key:c,pointer:r,patterns:Object.keys(o).join(",")}))}),a},properties:(t,e,n,r)=>{const i=[],o=Object.keys(e.properties||{});for(let a=0;a<o.length;a+=1){const s=o[a];if(GW(n,s)){const l=t.step(s,e,n,r),c=t.validate(n[s],l,`${r}/${s}`);i.push(...c)}}return i},propertiesRequired:(t,e,n,r)=>{const i=[],o=Object.keys(e.properties||{});for(let a=0;a<o.length;a+=1){const s=o[a];if(n[s]===void 0)i.push(t.errors.requiredPropertyError({key:s,pointer:r}));else{const l=t.step(s,e,n,r),c=t.validate(n[s],l,`${r}/${s}`);i.push(...c)}}return i},required:(t,e,n,r)=>{if(Array.isArray(e.required)!==!1)return e.required.map(i=>{if(!GW(n,i))return t.errors.requiredPropertyError({key:i,pointer:r})})},requiredNotEmpty:(t,e,n,r)=>{if(Array.isArray(e.required)!==!1)return e.required.map(i=>{if(n[i]==null||n[i]==="")return t.errors.valueNotEmptyError({property:i,pointer:`${r}/${i}`})})},uniqueItems:(t,e,n,r)=>{if((Array.isArray(n)&&e.uniqueItems)===!1)return;const i=[],o=[];return n.forEach((a,s)=>{for(let l=s+1;l<n.length;l+=1)Zre(a,n[l])&&!i.includes(l)&&(o.push(t.errors.uniqueItemsError({pointer:`${r}/${l}`,duplicatePointer:`${r}/${s}`,arrayPointer:r,value:JSON.stringify(a)})),i.push(l))}),o}};function ka(t){const e={type:Sn(t)};return e.type==="object"&&(e.properties={},Object.keys(t).forEach(n=>e.properties[n]=ka(t[n]))),e.type==="array"&&t.length===1?e.items=ka(t[0]):e.type==="array"&&(e.items=t.map(ka)),e}const qW={array:(t,e,n,r,i)=>{const o=r==null?void 0:r[e],a=Sn(n.items);if(a==="object")return PC(t,n.items,o)||t.resolveRef(n.items);if(a==="array"){if(n.items[e]===!0)return ka(o);if(n.items[e]===!1)return Wn.invalidDataError({key:e,value:o,pointer:i});if(n.items[e])return t.resolveRef(n.items[e]);if(n.additionalItems===!1)return Wn.additionalItemsError({key:e,value:o,pointer:i});if(n.additionalItems===!0||n.additionalItems===void 0)return ka(o);if(Sn(n.additionalItems)==="object")return n.additionalItems;throw new Error(`Invalid schema ${JSON.stringify(n,null,4)} for ${JSON.stringify(r,null,4)}`)}return n.additionalItems!==!1&&o?ka(o):new Error(`Invalid array schema for ${e} at ${i}`)},object:(t,e,n,r,i)=>{var o;n=PC(t,n,r);const a=(o=n==null?void 0:n.properties)===null||o===void 0?void 0:o[e];if(a!==void 0){if(a===!1)return Wn.forbiddenPropertyError({property:e,value:r,pointer:`${i}`});if(a===!0)return ka(r==null?void 0:r[e]);const c=t.resolveRef(a);if(gs(c))return c;if(c&&Array.isArray(c.oneOf))return t.resolveOneOf(r[e],c,`${i}/${e}`);if(c)return c}const{patternProperties:s}=n;if(Sn(s)==="object"){let c;const u=Object.keys(s);for(let f=0,d=u.length;f<d;f+=1)if(c=new RegExp(u[f]),c.test(e))return s[u[f]]}const{additionalProperties:l}=n;return Sn(l)==="object"?n.additionalProperties:r&&(l===void 0||l===!0)?ka(r[e]):Wn.unknownPropertyError({property:e,value:r,pointer:`${i}`})}};function Cce(t,e,n,r,i="#"){if(Array.isArray(n.type)){const s=Sn(r);return n.type.includes(s)?qW[s](t,`${e}`,n,r,i):t.errors.typeError({value:r,pointer:i,expected:n.type,received:s})}const o=n.type||Sn(r),a=qW[o];return a?a(t,`${e}`,n,r,i):new Error(`Unsupported schema type ${n.type} for key ${e}`)}function Tce(t,e,n=t.rootSchema){var r;if(n.oneOf)return n.oneOf.map(o=>t.resolveRef(o));if(!((r=n.items)===null||r===void 0)&&r.oneOf)return n.items.oneOf.map(o=>t.resolveRef(o));const i=t.step(e,n,{},"#");return gs(i)?i:[i]}const oYe={array:(t,e,n,r)=>t.typeKeywords.array.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),object:(t,e,n,r)=>t.typeKeywords.object.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),string:(t,e,n,r)=>t.typeKeywords.string.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),integer:(t,e,n,r)=>t.typeKeywords.number.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),number:(t,e,n,r)=>t.typeKeywords.number.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),boolean:(t,e,n,r)=>t.typeKeywords.boolean.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),null:(t,e,n,r)=>t.typeKeywords.null.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r))};function aYe(t,e){const n=Sn(t);return n==="number"&&(e==="integer"||Array.isArray(e)&&e.includes("integer"))?Number.isInteger(t)||isNaN(t)?"integer":"number":n}function Ace(t,e,n=t.rootSchema,r="#"){if(n=t.resolveRef(n),Sn(n)==="boolean")return n?[]:[t.errors.invalidDataError({value:e,pointer:r})];if(gs(n))return[n];if(n.const!==void 0)return Zre(n.const,e)?[]:[t.errors.constError({value:e,expected:n.const,pointer:r})];const i=aYe(e,n.type),o=n.type||i;return i!==o&&(!Array.isArray(o)||!o.includes(i))?[t.errors.typeError({received:i,expected:o,value:e,pointer:r})]:t.validateType[i]==null?[t.errors.invalidTypeError({receivedType:i,pointer:r})]:T2(t.validateType[i](t,n,e,r)).filter(AC)}const sYe={typeKeywords:{array:["allOf","anyOf","enum","items","maxItems","minItems","not","oneOf","uniqueItems"],boolean:["enum","not","allOf","anyOf","oneOf"],object:["additionalProperties","dependencies","enum","format","minProperties","maxProperties","patternProperties","properties","required","not","oneOf","allOf","anyOf"],string:["allOf","anyOf","enum","format","maxLength","minLength","not","oneOf","pattern"],number:["allOf","anyOf","enum","format","maximum","minimum","multipleOf","not","oneOf"],null:["allOf","anyOf","enum","format","not","oneOf"]},validateKeyword:xce,validateType:oYe,validateFormat:yce,errors:Wn,addRemoteSchema:oce,compileSchema:Vqe,createSchemaOf:ka,each:mce,eachSchema:M3,getChildSchemaSelection:Tce,getSchema:bce,getTemplate:wce,isValid:kce,resolveAllOf:Jle,resolveAnyOf:nce,resolveOneOf:Rle,resolveRef:Qle,step:Cce,validate:Ace,templateDefaultOptions:W0.templateDefaultOptions};class Pce extends ice{constructor(e,n={}){super(eD(sYe,n),e)}}const YW="__compiled",KW="__ref",lYe="getRef",cYe="getRoot",uYe=/(#|\/)+$/g;function fYe(t,e,n=e,r=!1){if(e===!0||e===!1||e===void 0||e[YW]!==void 0)return e;const i={ids:{},remotes:t.remotes},o=JSON.stringify(e),a=JSON.parse(o);if(Object.defineProperty(a,YW,{enumerable:!1,value:!0}),Object.defineProperty(a,lYe,{enumerable:!1,value:Zu.bind(null,i,a)}),r===!1&&o.includes("$ref")===!1)return a;a!==n&&Object.defineProperty(a,"$defs",{enumerable:!0,value:Object.assign({},n.definitions,n.$defs,a.definitions,a.$defs)});const s={},l=()=>a;return M3(a,(c,u)=>{var f;if(c.$id){if(c.$id.startsWith("http")&&/(allOf|anyOf|oneOf)\/\d+$/.test(u)){const S=u.replace(/\/(allOf|anyOf|oneOf)\/\d+$/,""),v=Qp.get(a,S);c.$id=(f=v.$id)!==null&&f!==void 0?f:c.$id}i.ids[c.$id.replace(uYe,"")]=u}u=`#${u}`.replace(/##+/,"#");const d=u.replace(/\/[^/]+$/,""),h=u.replace(/\/[^/]+\/[^/]+$/,""),g=s[d]||s[h],y=$C(g,c.$id);s[u]=y,i.ids[y]==null&&(i.ids[y]=u),c.$ref&&!c[KW]&&(Object.defineProperty(c,KW,{enumerable:!1,value:$C(y,c.$ref)}),Object.defineProperty(c,cYe,{enumerable:!1,value:l}))}),a}const dYe={...xce,contains:(t,e,n,r)=>{if(e.contains===!1)return t.errors.containsArrayError({pointer:r,value:n});if(e.contains===!0)return Array.isArray(n)&&n.length===0?t.errors.containsAnyError({pointer:r}):void 0;if(Sn(e.contains)==="object"){for(let i=0;i<n.length;i+=1)if(t.isValid(n[i],e.contains))return;return t.errors.containsError({pointer:r,schema:JSON.stringify(e.contains)})}},exclusiveMaximum:(t,e,n,r)=>{if(!isNaN(e.exclusiveMaximum)&&e.exclusiveMaximum<=n)return t.errors.maximumError({maximum:e.exclusiveMaximum,length:n,pointer:r})},exclusiveMinimum:(t,e,n,r)=>{if(!isNaN(e.exclusiveMinimum)&&e.exclusiveMinimum>=n)return t.errors.minimumError({minimum:e.exclusiveMinimum,length:n,pointer:r})},if:ZGe,maximum:(t,e,n,r)=>{if(!isNaN(e.maximum)&&e.maximum&&e.maximum<n)return t.errors.maximumError({maximum:e.maximum,length:n,pointer:r})},minimum:(t,e,n,r)=>{if(!isNaN(e.minimum)&&e.minimum>n)return t.errors.minimumError({minimum:e.minimum,length:n,pointer:r})},patternProperties:(t,e,n,r)=>{const i=e.properties||{},o=e.patternProperties;if(Sn(o)!=="object")return;const a=[],s=Object.keys(n),l=Object.keys(o).map(c=>({regex:new RegExp(c),patternSchema:o[c]}));return s.forEach(c=>{let u=!1;for(let f=0,d=l.length;f<d;f+=1)if(l[f].regex.test(c)){if(u=!0,l[f].patternSchema===!1){a.push(t.errors.patternPropertiesError({key:c,pointer:r,patterns:Object.keys(o).join(",")}));return}const h=t.validate(n[c],l[f].patternSchema,`${r}/${c}`);h&&h.length>0&&a.push(...h)}i[c]||u===!1&&e.additionalProperties===!1&&a.push(t.errors.patternPropertiesError({key:c,pointer:r,patterns:Object.keys(o).join(",")}))}),a},propertyNames:(t,e,n,r)=>{if(e.propertyNames===!1)return Object.keys(n).length===0?void 0:t.errors.invalidPropertyNameError({property:Object.keys(n),pointer:r,value:n});if(e.propertyNames===!0||Sn(e.propertyNames)!=="object")return;const i=[],o=Object.keys(n),a={...e.propertyNames,type:"string"};return o.forEach(s=>{const l=t.validate(s,a,`${r}/${s}`);l.length>0&&i.push(t.errors.invalidPropertyNameError({property:s,pointer:r,validationError:l[0],value:n[s]}))}),i}},hYe={array:(t,e,n,r)=>t.typeKeywords.array.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),object:(t,e,n,r)=>t.typeKeywords.object.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),string:(t,e,n,r)=>t.typeKeywords.string.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),integer:(t,e,n,r)=>t.typeKeywords.number.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),number:(t,e,n,r)=>t.typeKeywords.number.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),boolean:(t,e,n,r)=>t.typeKeywords.boolean.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),null:(t,e,n,r)=>t.typeKeywords.null.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r))},Ece={typeKeywords:{array:["allOf","anyOf","contains","enum","if","items","maxItems","minItems","not","oneOf","uniqueItems"],boolean:["allOf","anyOf","enum","not","oneOf"],object:["additionalProperties","allOf","anyOf","dependencies","enum","format","if","maxProperties","minProperties","not","oneOf","patternProperties","properties","propertyNames","required"],string:["allOf","anyOf","enum","format","if","maxLength","minLength","not","oneOf","pattern"],number:["allOf","anyOf","enum","exclusiveMaximum","exclusiveMinimum","format","if","maximum","minimum","multipleOf","not","oneOf"],null:["allOf","anyOf","enum","format","not","oneOf"]},validateKeyword:dYe,validateType:hYe,validateFormat:yce,errors:Wn,addRemoteSchema:oce,compileSchema:fYe,createSchemaOf:ka,each:mce,eachSchema:M3,getChildSchemaSelection:Tce,getSchema:bce,getTemplate:wce,isValid:kce,resolveAllOf:Jle,resolveAnyOf:nce,resolveOneOf:Rle,resolveRef:Qle,step:Cce,validate:Ace,templateDefaultOptions:W0.templateDefaultOptions};class pYe extends ice{constructor(e,n={}){super(eD(Ece,n),e)}}({...Ece});function Oce(t,e){const n=[];for(let r=e;r!=null&&r.parent;r=r.parent)switch(r.parent.name){case Pr.PROPERTY:{const i=r.parent.getChild(Pr.PROPERTY_NAME);i&&n.unshift(Nb(t,i).replace(/[/~]/g,o=>o==="~"?"~0":"~1"));break}case Pr.ARRAY:{if(HWe(r)){const i=Mle(r.parent,r);n.unshift(`${i}`)}break}}return n.unshift(""),n.join("/")}const Ice=(t,e,n=-1)=>Oce(t.doc,ji(t).resolve(e,n)),gYe=(t,e="json4")=>{const n=ji(t),r=new Map;return n.iterate({enter:i=>{var o,a,s,l,c,u,f,d;if(i.name==="PropertyName"){const h=Oce(t.doc,i.node),{from:g,to:y}=i.node;if(!(!((a=(o=i.node)===null||o===void 0?void 0:o.nextSibling)===null||a===void 0)&&a.node))return r.set(h,{keyFrom:g,keyTo:y}),!0;const S=e==="json4"?(l=(s=i.node)===null||s===void 0?void 0:s.nextSibling)===null||l===void 0?void 0:l.node:(d=(f=(u=(c=i.node)===null||c===void 0?void 0:c.nextSibling)===null||u===void 0?void 0:u.node)===null||f===void 0?void 0:f.nextSibling)===null||d===void 0?void 0:d.node;if(!S)return r.set(h,{keyFrom:g,keyTo:y}),!0;const{from:v,to:_}=S;return r.set(h,{keyFrom:g,keyTo:y,valueFrom:v,valueTo:_}),!0}}}),r},XW={array:(t,e,n,r,i)=>{const o=r==null?void 0:r[e],a=Sn(n.items);if(a==="object")return PC(t,n.items,o)||t.resolveRef(n.items);if(a==="array"){if(n.items[e]===!0)return ka(o);if(n.items[e]===!1)return Wn.invalidDataError({key:e,value:o,pointer:i});if(n.items[e])return t.resolveRef(n.items[e]);if(n.additionalItems===!1)return Wn.additionalItemsError({key:e,value:o,pointer:i});if(n.additionalItems===!0||n.additionalItems===void 0)return ka(o);if(Sn(n.additionalItems)==="object")return n.additionalItems;throw new Error(`Invalid schema ${JSON.stringify(n,null,4)} for ${JSON.stringify(r,null,4)}`)}return n.additionalItems!==!1&&o?ka(o):new Error(`Invalid array schema for ${e} at ${i}`)},object:(t,e,n,r,i)=>{var o;n=PC(t,n,r);const a=(o=n==null?void 0:n.properties)===null||o===void 0?void 0:o[e];if(a!==void 0){if(a===!1)return Wn.forbiddenPropertyError({property:e,value:r,pointer:`${i}`});if(a===!0)return ka(r==null?void 0:r[e]);const c=t.resolveRef(a);if(gs(c))return c;if(c&&Array.isArray(c.oneOf))return r===void 0||r[e]===void 0?c:t.resolveOneOf(r[e],c,`${i}/${e}`);if(c)return c}const{patternProperties:s}=n;if(Sn(s)==="object"){let c;const u=Object.keys(s);for(let f=0,d=u.length;f<d;f+=1)if(c=new RegExp(u[f]),c.test(e))return s[u[f]]}const{additionalProperties:l}=n;return Sn(l)==="object"?n.additionalProperties:r&&(l===void 0||l===!0)?ka(r[e]):Wn.unknownPropertyError({property:e,value:r,pointer:`${i}`})}};function mYe(t,e,n,r,i="#"){if(Array.isArray(n.type)){const s=Sn(r);return n.type.includes(s)?XW[s](t,`${e}`,n,r,i):t.errors.typeError({value:r,pointer:i,expected:n.type,received:s})}const o=n.type||Sn(r),a=XW[o];return a?a(t,`${e}`,n,r,i):new Error(`Unsupported schema type ${n.type} for key ${e}`)}const vYe={};function FC(t,e,n,r=t.rootSchema){const i=S0.split(e);return r=t.resolveRef(r),$ce(t,r,i,e,n)}function $ce(t,e,n,r,i=vYe){if(n.length===0)return t.resolveRef(e);const o=n.shift();return e=mYe(t,o,e,i,r),gs(e)?e:(i=i[o],$ce(t,e,n,`${r}/${o}`,i))}function yYe(t,e){return t.startsWith('"')?`"${e}"`:t.startsWith("'")?`'${e}'`:e}class bYe{constructor(){this.completions=new Map,this.reservedKeys=new Set}reserve(e){this.reservedKeys.add(e)}add(e){this.reservedKeys.has(e.label)||this.completions.set(e.label,e)}}class SYe{constructor(e,n){this.schema=e,this.opts=n}doComplete(e){var n,r;const i={from:e.pos,to:e.pos,options:[],filter:!1},o=e.state.doc.sliceString(0);let a=EW(e.state,e.pos);const s=e.state.sliceDoc(a.from,e.pos).replace(/^("|')/,"");if(!($x(a)||$k(a))&&!e.explicit)return i;const l=Nb(e.state.doc,a),c=Nb(e.state.doc,a,!1);if(a&&($x(a)||$k(a)))i.from=a.from,i.to=a.to;else{const d=e.matchBefore(/[A-Za-z0-9._]*/),h=e.pos-l.length;Ik.log("xxx","overwriteStart after",h,"ctx.pos",e.pos,"word",d,"currentWord",l,"=>",o[h-1],"..",o[h],"..",o),i.from=a.name===Pr.INVALID?(n=d==null?void 0:d.from)!==null&&n!==void 0?n:e.pos:h,i.to=e.pos}const u=new bYe;let f=!0;if($k(a)){const d=a.parent;if(d){const h=OW(d);f=!h||h.name===Pr.INVALID&&h.from-h.to===0,Ik.log("xxx","addValue",f,OW(d),a),a=(r=[d,d.parent].find(g=>(g==null?void 0:g.name)===Pr.OBJECT))!==null&&r!==void 0?r:null}}if(a&&(a.name===Pr.OBJECT||a.name===Pr.JSON_TEXT)&&$k(EW(e.state,e.pos))){if(a.from===e.pos)return i;this.getPropertyCompletions(this.schema,e,a,u,f,c)}else{const d={};this.getValueCompletions(this.schema,e,d,u)}return i.options=Array.from(u.completions.values()).filter(d=>$O(d.label).startsWith(s)),Ik.log("xxx","result",i,"prefix",s,"collector.completions",u.completions,"reservedKeys",u.reservedKeys),i}applySnippetCompletion(e){return gTe(typeof e.apply!="string"?e.label:e.apply,e)}getPropertyCompletions(e,n,r,i,o,a){r.getChildren(Pr.PROPERTY).forEach(c=>{const u=Nb(n.state.doc,c.getChild(Pr.PROPERTY_NAME));i.reserve($O(u))}),this.getSchemas(e,n).forEach(c=>{if(typeof c!="object")return;const u=c.properties;u&&Object.entries(u).forEach(([d,h])=>{var g,y;if(typeof h=="object"){const S=(g=h.description)!==null&&g!==void 0?g:"",v=(y=h.type)!==null&&y!==void 0?y:"",_=Array.isArray(v)?v.toString():v,x={label:d,apply:this.getInsertTextForProperty(d,o,a,h),type:"property",detail:_,info:S};i.add(this.applySnippetCompletion(x))}});const f=c.propertyNames;if(typeof f=="object"&&(f.enum&&f.enum.forEach(d=>{const h=d==null?void 0:d.toString();if(h){const g={label:h,apply:this.getInsertTextForProperty(h,o,a),type:"property"};i.add(this.applySnippetCompletion(g))}}),f.const)){const d=f.const.toString(),h={label:d,apply:this.getInsertTextForProperty(d,o,a),type:"property"};i.add(this.applySnippetCompletion(h))}})}getInsertTextForProperty(e,n,r,i){var o;i=i&&this.expandSchemaProperty(i,this.schema);const a=((o=this.opts)===null||o===void 0?void 0:o.mode)==="json5";let s=a?yYe(r,e):`"${e}"`;if(!n)return s;s+=": ";let l,c=0;if(typeof i=="object"){if(typeof i.default<"u")l||(l=this.getInsertTextForGuessedValue(i.default,"")),c++;else if(i.enum&&(!l&&i.enum.length===1&&(l=this.getInsertTextForGuessedValue(i.enum[0],"")),c+=i.enum.length),typeof i.const<"u"&&(l||(l=this.getInsertTextForGuessedValue(i.const,"")),c++),Array.isArray(i.examples)&&i.examples.length&&(l||(l=this.getInsertTextForGuessedValue(i.examples[0],"")),c+=i.examples.length),l===void 0&&c===0){let u=Array.isArray(i.type)?i.type[0]:i.type;switch(u||(i.properties?u="object":i.items&&(u="array")),u){case"boolean":l="#{}";break;case"string":l=a?"'#{}'":'"#{}"';break;case"object":l="{#{}}";break;case"array":l="[#{}]";break;case"number":case"integer":l="#{0}";break;case"null":l="#{null}";break;default:l="#{}";break}}}return(!l||c>1)&&(l="#{}"),s+l}getInsertTextForGuessedValue(e,n=""){switch(typeof e){case"object":return e===null?"${null}"+n:this.getInsertTextForValue(e,n);case"string":{let r=JSON.stringify(e);return r=r.substr(1,r.length-2),r=this.getInsertTextForPlainText(r),'"${'+r+'}"'+n}case"number":case"boolean":return"${"+JSON.stringify(e)+"}"+n}return this.getInsertTextForValue(e,n)}getInsertTextForPlainText(e){return e.replace(/[\\$}]/g,"\\$&")}getInsertTextForValue(e,n){const r=JSON.stringify(e,null,"	");return r==="{}"?"{#{}}"+n:r==="[]"?"[#{}]"+n:this.getInsertTextForPlainText(r+n)}getValueCompletions(e,n,r,i){let o=ji(n.state).resolveInner(n.pos,-1),a=null,s;if(o&&$x(o)&&(a=o,o=o.parent),!o){this.addSchemaValueCompletions(e,r,i);return}if(o.name===Pr.PROPERTY){const l=o.getChild(Pr.PROPERTY_NAME);l&&(s=Nb(n.state.doc,l),o=o.parent)}if(o&&(s!==void 0||o.name===Pr.ARRAY)){const l=this.getSchemas(e,n);for(const c of l){if(typeof c!="object")return;if(o.name===Pr.ARRAY&&c.items){let u=i;if(c.uniqueItems&&(u=Object.assign(Object.assign({},u),{add(f){u.completions.has(f.label)||i.add(f)},reserve(f){i.reserve(f)}})),Array.isArray(c.items)){let f=0;if(a){const h=Mle(o,a);h>=0&&(f=h)}const d=c.items[f];d&&this.addSchemaValueCompletions(d,r,u)}else this.addSchemaValueCompletions(c.items,r,u)}if(s!==void 0){let u=!1;if(c.properties){const f=c.properties[s];f&&(u=!0,this.addSchemaValueCompletions(f,r,i))}if(c.patternProperties&&!u)for(const f of Object.keys(c.patternProperties)){const d=this.extendedRegExp(f);if(d!=null&&d.test(s)){u=!0;const h=c.patternProperties[f];h&&this.addSchemaValueCompletions(h,r,i)}}if(c.additionalProperties&&!u){const f=c.additionalProperties;this.addSchemaValueCompletions(f,r,i)}}r.boolean&&(this.addBooleanValueCompletion(!0,i),this.addBooleanValueCompletion(!1,i)),r.null&&this.addNullValueCompletion(i)}}}addSchemaValueCompletions(e,n,r){typeof e=="object"&&(this.addEnumValueCompletions(e,r),this.addDefaultValueCompletions(e,r),this.collectTypes(e,n),Array.isArray(e.allOf)&&e.allOf.forEach(i=>this.addSchemaValueCompletions(i,n,r)),Array.isArray(e.anyOf)&&e.anyOf.forEach(i=>this.addSchemaValueCompletions(i,n,r)),Array.isArray(e.oneOf)&&e.oneOf.forEach(i=>this.addSchemaValueCompletions(i,n,r)))}addDefaultValueCompletions(e,n,r=0){let i=!1;if(typeof e.default<"u"){let o=e.type,a=e.default;for(let l=r;l>0;l--)a=[a],o="array";const s={type:o==null?void 0:o.toString(),label:this.getLabelForValue(a),detail:"Default value"};n.add(s),i=!0}Array.isArray(e.examples)&&e.examples.forEach(o=>{let a=e.type,s=o;for(let l=r;l>0;l--)s=[s],a="array";n.add({type:a==null?void 0:a.toString(),label:this.getLabelForValue(s)}),i=!0}),!i&&typeof e.items=="object"&&!Array.isArray(e.items)&&r<5&&this.addDefaultValueCompletions(e.items,n,r+1)}addEnumValueCompletions(e,n){var r,i;if(typeof e.const<"u"&&n.add({type:(r=e.type)===null||r===void 0?void 0:r.toString(),label:this.getLabelForValue(e.const),info:e.description}),Array.isArray(e.enum))for(let o=0,a=e.enum.length;o<a;o++){const s=e.enum[o];n.add({type:(i=e.type)===null||i===void 0?void 0:i.toString(),label:this.getLabelForValue(s),info:e.description})}}addBooleanValueCompletion(e,n){n.add({type:"boolean",label:e?"true":"false"})}addNullValueCompletion(e){e.add({type:"null",label:"null"})}collectTypes(e,n){if(Array.isArray(e.enum)||typeof e.const<"u")return;const r=e.type;Array.isArray(r)?r.forEach(i=>n[i]=!0):r&&(n[r]=!0)}getSchemas(e,n){const r=new pYe(this.schema);let i=Ice(n.state,n.pos),o=FC(r,i);return(!o||o.name==="UnknownPropertyError"||o.enum||o.type==="undefined")&&(i=i.replace(/\/[^/]*$/,"/"),o=FC(r,i)),Ik.log("xxx","pointer..",JSON.stringify(i)),!i||i==="/"?[e]:this.isJsonError(o)?[]:Array.isArray(o.allOf)?[o,...o.allOf.map(a=>this.expandSchemaProperty(a,e))]:Array.isArray(o.oneOf)?[o,...o.oneOf.map(a=>this.expandSchemaProperty(a,e))]:Array.isArray(o.anyOf)?[o,...o.anyOf.map(a=>this.expandSchemaProperty(a,e))]:[o]}isJsonError(e){return e.type==="error"}expandSchemaProperty(e,n){if(typeof e=="object"&&e.$ref){const r=this.getReferenceSchema(n,e.$ref);if(typeof r=="object"){const i=Object.assign(Object.assign({},e),r);return Reflect.deleteProperty(i,"$ref"),i}}return e}getReferenceSchema(e,n){const r=n.split("/");let i=e;return r.forEach(o=>{if(o){if(o==="#"){i=e;return}typeof i=="object"&&(i=i[o])}}),i}getLabelForValue(e){return JSON.stringify(e)}getValueFromLabel(e){return JSON.parse(e)}extendedRegExp(e){let n="";e.startsWith("(?i)")&&(e=e.substring(4),n="i");try{return new RegExp(e,n+"u")}catch{try{return new RegExp(e,n)}catch{return}}}}function _Ye(t,e={}){const n=new SYe(t,e);return function(i){return n.doComplete(i)}}const LC=(t,e)=>{const n=t.length>2;let r=t.map((i,o)=>{const a="`"+(e?JSON.stringify(e(i)):i)+"`";return o===t.length-1?"or "+a:a});return n?r.join(", "):r.join(" ")};let wYe=class RO{constructor(e,n,r,i,o,a,s,l,c,u=0,f){this.p=e,this.stack=n,this.state=r,this.reducePos=i,this.pos=o,this.score=a,this.buffer=s,this.bufferBase=l,this.curContext=c,this.lookAhead=u,this.parent=f}toString(){return`[${this.stack.filter((e,n)=>n%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,n,r=0){let i=e.parser.context;return new RO(e,[],n,r,r,0,[],0,i?new JW(i,i.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,n){this.stack.push(this.state,n,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var n;let r=e>>19,i=e&65535,{parser:o}=this.p,a=o.dynamicPrecedence(i);if(a&&(this.score+=a),r==0){this.pushState(o.getGoto(this.state,i,!0),this.reducePos),i<o.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,4,!0),this.reduceContext(i,this.reducePos);return}let s=this.stack.length-(r-1)*3-(e&262144?6:0),l=s?this.stack[s-2]:this.p.ranges[0].from,c=this.reducePos-l;c>=2e3&&!(!((n=this.p.parser.nodeSet.types[i])===null||n===void 0)&&n.isAnonymous)&&(l==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=c):this.p.lastBigReductionSize<c&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=l,this.p.lastBigReductionSize=c));let u=s?this.stack[s-1]:0,f=this.bufferBase+this.buffer.length-u;if(i<o.minRepeatTerm||e&131072){let d=o.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,l,d,f+4,!0)}if(e&262144)this.state=this.stack[s];else{let d=this.stack[s-3];this.state=o.getGoto(d,i,!0)}for(;this.stack.length>s;)this.stack.pop();this.reduceContext(i,l)}storeNode(e,n,r,i=4,o=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let a=this,s=this.buffer.length;if(s==0&&a.parent&&(s=a.bufferBase-a.parent.bufferBase,a=a.parent),s>0&&a.buffer[s-4]==0&&a.buffer[s-1]>-1){if(n==r)return;if(a.buffer[s-2]>=n){a.buffer[s-2]=r;return}}}if(!o||this.pos==r)this.buffer.push(e,n,r,i);else{let a=this.buffer.length;if(a>0&&this.buffer[a-4]!=0)for(;a>0&&this.buffer[a-2]>r;)this.buffer[a]=this.buffer[a-4],this.buffer[a+1]=this.buffer[a-3],this.buffer[a+2]=this.buffer[a-2],this.buffer[a+3]=this.buffer[a-1],a-=4,i>4&&(i-=4);this.buffer[a]=e,this.buffer[a+1]=n,this.buffer[a+2]=r,this.buffer[a+3]=i}}shift(e,n,r){let i=this.pos;if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=r,this.shiftContext(n,i),n<=this.p.parser.maxNode&&this.buffer.push(n,i,r,4);else{let o=e,{parser:a}=this.p;(r>this.pos||n<=a.maxNode)&&(this.pos=r,a.stateFlag(o,1)||(this.reducePos=r)),this.pushState(o,i),this.shiftContext(n,i),n<=a.maxNode&&this.buffer.push(n,i,r,4)}}apply(e,n,r){e&65536?this.reduce(e):this.shift(e,n,r)}useNode(e,n){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(n,i),this.buffer.push(r,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,n=e.buffer.length;for(;n>0&&e.buffer[n-2]>e.reducePos;)n-=4;let r=e.buffer.slice(n),i=e.bufferBase+n;for(;e&&i==e.bufferBase;)e=e.parent;return new RO(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,i,this.curContext,this.lookAhead,e)}recoverByDelete(e,n){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,n,4),this.storeNode(0,this.pos,n,r?8:4),this.pos=this.reducePos=n,this.score-=190}canShift(e){for(let n=new kYe(this);;){let r=this.p.parser.stateSlot(n.state,4)||this.p.parser.hasAction(n.state,e);if(r==0)return!1;if(!(r&65536))return!0;n.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let n=this.p.parser.nextStates(this.state);if(n.length>8||this.stack.length>=120){let i=[];for(let o=0,a;o<n.length;o+=2)(a=n[o+1])!=this.state&&this.p.parser.hasAction(a,e)&&i.push(n[o],a);if(this.stack.length<120)for(let o=0;i.length<8&&o<n.length;o+=2){let a=n[o+1];i.some((s,l)=>l&1&&s==a)||i.push(n[o],a)}n=i}let r=[];for(let i=0;i<n.length&&r.length<4;i+=2){let o=n[i+1];if(o==this.state)continue;let a=this.split();a.pushState(o,this.pos),a.storeNode(0,a.pos,a.pos,4,!0),a.shiftContext(n[i],this.pos),a.score-=200,r.push(a)}return r}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);if(!(e&65536))return!1;let{parser:n}=this.p;if(!n.validAction(this.state,e)){let r=e>>19,i=e&65535,o=this.stack.length-r*3;if(o<0||n.getGoto(this.stack[o],i,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let n=0;n<this.stack.length;n+=3)if(this.stack[n]!=e.stack[n])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(n)))}reduceContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(n)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(e){if(e!=this.curContext.context){let n=new JW(this.curContext.tracker,e);n.hash!=this.curContext.hash&&this.emitContext(),this.curContext=n}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}};class JW{constructor(e,n){this.tracker=e,this.context=n,this.hash=e.strict?e.hash(n):0}}var ZW;(function(t){t[t.Insert=200]="Insert",t[t.Delete=190]="Delete",t[t.Reduce=100]="Reduce",t[t.MaxNext=4]="MaxNext",t[t.MaxInsertStackDepth=300]="MaxInsertStackDepth",t[t.DampenInsertStackDepth=120]="DampenInsertStackDepth",t[t.MinBigReduction=2e3]="MinBigReduction"})(ZW||(ZW={}));class kYe{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let n=e&65535,r=e>>19;r==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(r-1)*3;let i=this.start.p.parser.getGoto(this.stack[this.base-3],n,!0);this.state=i}}class DC{constructor(e,n,r){this.stack=e,this.pos=n,this.index=r,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,n=e.bufferBase+e.buffer.length){return new DC(e,n,n-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new DC(this.stack,this.pos,this.index)}}function Mk(t,e=Uint16Array){if(typeof t!="string")return t;let n=null;for(let r=0,i=0;r<t.length;){let o=0;for(;;){let a=t.charCodeAt(r++),s=!1;if(a==126){o=65535;break}a>=92&&a--,a>=34&&a--;let l=a-32;if(l>=46&&(l-=46,s=!0),o+=l,s)break;o*=46}n?n[i++]=o:n=new e(o)}return n}class Lx{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const QW=new Lx;class xYe{constructor(e,n){this.input=e,this.ranges=n,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=QW,this.rangeIndex=0,this.pos=this.chunkPos=n[0].from,this.range=n[0],this.end=n[n.length-1].to,this.readNext()}resolveOffset(e,n){let r=this.range,i=this.rangeIndex,o=this.pos+e;for(;o<r.from;){if(!i)return null;let a=this.ranges[--i];o-=r.from-a.to,r=a}for(;n<0?o>r.to:o>=r.to;){if(i==this.ranges.length-1)return null;let a=this.ranges[++i];o+=a.from-r.to,r=a}return o}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let n of this.ranges)if(n.to>e)return Math.max(e,n.from);return this.end}peek(e){let n=this.chunkOff+e,r,i;if(n>=0&&n<this.chunk.length)r=this.pos+e,i=this.chunk.charCodeAt(n);else{let o=this.resolveOffset(e,1);if(o==null)return-1;if(r=o,r>=this.chunk2Pos&&r<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(r-this.chunk2Pos);else{let a=this.rangeIndex,s=this.range;for(;s.to<=r;)s=this.ranges[++a];this.chunk2=this.input.chunk(this.chunk2Pos=r),r+this.chunk2.length>s.to&&(this.chunk2=this.chunk2.slice(0,s.to-r)),i=this.chunk2.charCodeAt(0)}}return r>=this.token.lookAhead&&(this.token.lookAhead=r+1),i}acceptToken(e,n=0){let r=n?this.resolveOffset(n,-1):this.pos;if(r==null||r<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=r}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:n}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=n,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),n=this.pos+e.length;this.chunk=n>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,n){if(n?(this.token=n,n.start=e,n.lookAhead=e+1,n.value=n.extended=-1):this.token=QW,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,n){if(e>=this.chunkPos&&n<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,n-this.chunkPos);if(e>=this.chunk2Pos&&n<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,n-this.chunk2Pos);if(e>=this.range.from&&n<=this.range.to)return this.input.read(e,n);let r="";for(let i of this.ranges){if(i.from>=n)break;i.to>e&&(r+=this.input.read(Math.max(i.from,e),Math.min(i.to,n)))}return r}}class Wv{constructor(e,n){this.data=e,this.id=n}token(e,n){let{parser:r}=n.p;CYe(this.data,e,n,this.id,r.data,r.tokenPrecTable)}}Wv.prototype.contextual=Wv.prototype.fallback=Wv.prototype.extend=!1;Wv.prototype.fallback=Wv.prototype.extend=!1;function CYe(t,e,n,r,i,o){let a=0,s=1<<r,{dialect:l}=n.p.parser;e:for(;s&t[a];){let c=t[a+1];for(let h=a+3;h<c;h+=2)if((t[h+1]&s)>0){let g=t[h];if(l.allows(g)&&(e.token.value==-1||e.token.value==g||TYe(g,e.token.value,i,o))){e.acceptToken(g);break}}let u=e.next,f=0,d=t[a+2];if(e.next<0&&d>f&&t[c+d*3-3]==65535&&t[c+d*3-3]==65535){a=t[c+d*3-1];continue e}for(;f<d;){let h=f+d>>1,g=c+h+(h<<1),y=t[g],S=t[g+1]||65536;if(u<y)d=h;else if(u>=S)f=h+1;else{a=t[g+2],e.advance();continue e}}break}}function eG(t,e,n){for(let r=e,i;(i=t[r])!=65535;r++)if(i==n)return r-e;return-1}function TYe(t,e,n,r){let i=eG(n,r,e);return i<0||eG(n,r,t)<i}const Xl=typeof process<"u"&&process.env&&/\bparse\b/.test({}.LOG);let G7=null;var tG;(function(t){t[t.Margin=25]="Margin"})(tG||(tG={}));function nG(t,e,n){let r=t.cursor(so.IncludeAnonymous);for(r.moveTo(e);;)if(!(n<0?r.childBefore(e):r.childAfter(e)))for(;;){if((n<0?r.to<e:r.from>e)&&!r.type.isError)return n<0?Math.max(0,Math.min(r.to-1,e-25)):Math.min(t.length,Math.max(r.from+1,e+25));if(n<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return n<0?0:t.length}}class AYe{constructor(e,n){this.fragments=e,this.nodeSet=n,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?nG(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?nG(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let n=this.trees.length-1;if(n<0)return this.nextFragment(),null;let r=this.trees[n],i=this.index[n];if(i==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let o=r.children[i],a=this.start[n]+r.positions[i];if(a>e)return this.nextStart=a,null;if(o instanceof Po){if(a==e){if(a<this.safeFrom)return null;let s=a+o.length;if(s<=this.safeTo){let l=o.prop(En.lookAhead);if(!l||s+l<this.fragment.to)return o}}this.index[n]++,a+o.length>=Math.max(this.safeFrom,e)&&(this.trees.push(o),this.start.push(a),this.index.push(0))}else this.index[n]++,this.nextStart=a+o.length}}}class PYe{constructor(e,n){this.stream=n,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(r=>new Lx)}getActions(e){let n=0,r=null,{parser:i}=e.p,{tokenizers:o}=i,a=i.stateSlot(e.state,3),s=e.curContext?e.curContext.hash:0,l=0;for(let c=0;c<o.length;c++){if(!(1<<c&a))continue;let u=o[c],f=this.tokens[c];if(!(r&&!u.fallback)&&((u.contextual||f.start!=e.pos||f.mask!=a||f.context!=s)&&(this.updateCachedToken(f,u,e),f.mask=a,f.context=s),f.lookAhead>f.end+25&&(l=Math.max(f.lookAhead,l)),f.value!=0)){let d=n;if(f.extended>-1&&(n=this.addActions(e,f.extended,f.end,n)),n=this.addActions(e,f.value,f.end,n),!u.extend&&(r=f,n>d))break}}for(;this.actions.length>n;)this.actions.pop();return l&&e.setLookAhead(l),!r&&e.pos==this.stream.end&&(r=new Lx,r.value=e.p.parser.eofTerm,r.start=r.end=e.pos,n=this.addActions(e,r.value,r.end,n)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let n=new Lx,{pos:r,p:i}=e;return n.start=r,n.end=Math.min(r+1,i.stream.end),n.value=r==i.stream.end?i.parser.eofTerm:0,n}updateCachedToken(e,n,r){let i=this.stream.clipPos(r.pos);if(n.token(this.stream.reset(i,e),r),e.value>-1){let{parser:o}=r.p;for(let a=0;a<o.specialized.length;a++)if(o.specialized[a]==e.value){let s=o.specializers[a](this.stream.read(e.start,e.end),r);if(s>=0&&r.p.parser.dialect.allows(s>>1)){s&1?e.extended=s>>1:e.value=s>>1;break}}}else e.value=0,e.end=this.stream.clipPos(i+1)}putAction(e,n,r,i){for(let o=0;o<i;o+=3)if(this.actions[o]==e)return i;return this.actions[i++]=e,this.actions[i++]=n,this.actions[i++]=r,i}addActions(e,n,r,i){let{state:o}=e,{parser:a}=e.p,{data:s}=a;for(let l=0;l<2;l++)for(let c=a.stateSlot(o,l?2:1);;c+=3){if(s[c]==65535)if(s[c+1]==1)c=Qu(s,c+2);else{i==0&&s[c+1]==2&&(i=this.putAction(Qu(s,c+2),n,r,i));break}s[c]==n&&(i=this.putAction(Qu(s,c+1),n,r,i))}return i}}var rG;(function(t){t[t.Distance=5]="Distance",t[t.MaxRemainingPerStep=3]="MaxRemainingPerStep",t[t.MinBufferLengthPrune=500]="MinBufferLengthPrune",t[t.ForceReduceLimit=10]="ForceReduceLimit",t[t.CutDepth=15e3]="CutDepth",t[t.CutTo=9e3]="CutTo",t[t.MaxLeftAssociativeReductionCount=300]="MaxLeftAssociativeReductionCount",t[t.MaxStackCount=12]="MaxStackCount"})(rG||(rG={}));class EYe{constructor(e,n,r,i){this.parser=e,this.input=n,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new xYe(n,i),this.tokens=new PYe(e,this.stream),this.topTerm=e.top[1];let{from:o}=i[0];this.stacks=[wYe.start(this,e.top[0],o)],this.fragments=r.length&&this.stream.end-o>e.bufferLength*4?new AYe(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,n=this.minStackPos,r=this.stacks=[],i,o;if(this.bigReductionCount>300&&e.length==1){let[a]=e;for(;a.forceReduce()&&a.stack.length&&a.stack[a.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let a=0;a<e.length;a++){let s=e[a];for(;;){if(this.tokens.mainToken=null,s.pos>n)r.push(s);else{if(this.advanceStack(s,r,e))continue;{i||(i=[],o=[]),i.push(s);let l=this.tokens.getMainToken(s);o.push(l.value,l.end)}}break}}if(!r.length){let a=i&&IYe(i);if(a)return this.stackToTree(a);if(this.parser.strict)throw Xl&&i&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+n);this.recovering||(this.recovering=5)}if(this.recovering&&i){let a=this.stoppedAt!=null&&i[0].pos>this.stoppedAt?i[0]:this.runRecovery(i,o,r);if(a)return this.stackToTree(a.forceAll())}if(this.recovering){let a=this.recovering==1?1:this.recovering*3;if(r.length>a)for(r.sort((s,l)=>l.score-s.score);r.length>a;)r.pop();r.some(s=>s.reducePos>n)&&this.recovering--}else if(r.length>1){e:for(let a=0;a<r.length-1;a++){let s=r[a];for(let l=a+1;l<r.length;l++){let c=r[l];if(s.sameState(c)||s.buffer.length>500&&c.buffer.length>500)if((s.score-c.score||s.buffer.length-c.buffer.length)>0)r.splice(l--,1);else{r.splice(a--,1);continue e}}}r.length>12&&r.splice(12,r.length-12)}this.minStackPos=r[0].pos;for(let a=1;a<r.length;a++)r[a].pos<this.minStackPos&&(this.minStackPos=r[a].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,n,r){let i=e.pos,{parser:o}=this,a=Xl?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&i>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let c=e.curContext&&e.curContext.tracker.strict,u=c?e.curContext.hash:0;for(let f=this.fragments.nodeAt(i);f;){let d=this.parser.nodeSet.types[f.type.id]==f.type?o.getGoto(e.state,f.type.id):-1;if(d>-1&&f.length&&(!c||(f.prop(En.contextHash)||0)==u))return e.useNode(f,d),Xl&&console.log(a+this.stackID(e)+` (via reuse of ${o.getName(f.type.id)})`),!0;if(!(f instanceof Po)||f.children.length==0||f.positions[0]>0)break;let h=f.children[0];if(h instanceof Po&&f.positions[0]==0)f=h;else break}}let s=o.stateSlot(e.state,4);if(s>0)return e.reduce(s),Xl&&console.log(a+this.stackID(e)+` (via always-reduce ${o.getName(s&65535)})`),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let l=this.tokens.getActions(e);for(let c=0;c<l.length;){let u=l[c++],f=l[c++],d=l[c++],h=c==l.length||!r,g=h?e:e.split();if(g.apply(u,f,d),Xl&&console.log(a+this.stackID(g)+` (via ${u&65536?`reduce of ${o.getName(u&65535)}`:"shift"} for ${o.getName(f)} @ ${i}${g==e?"":", split"})`),h)return!0;g.pos>i?n.push(g):r.push(g)}return!1}advanceFully(e,n){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return iG(e,n),!0}}runRecovery(e,n,r){let i=null,o=!1;for(let a=0;a<e.length;a++){let s=e[a],l=n[a<<1],c=n[(a<<1)+1],u=Xl?this.stackID(s)+" -> ":"";if(s.deadEnd&&(o||(o=!0,s.restart(),Xl&&console.log(u+this.stackID(s)+" (restarted)"),this.advanceFully(s,r))))continue;let f=s.split(),d=u;for(let h=0;f.forceReduce()&&h<10&&(Xl&&console.log(d+this.stackID(f)+" (via force-reduce)"),!this.advanceFully(f,r));h++)Xl&&(d=this.stackID(f)+" -> ");for(let h of s.recoverByInsert(l))Xl&&console.log(u+this.stackID(h)+" (via recover-insert)"),this.advanceFully(h,r);this.stream.end>s.pos?(c==s.pos&&(c++,l=0),s.recoverByDelete(l,c),Xl&&console.log(u+this.stackID(s)+` (via recover-delete ${this.parser.getName(l)})`),iG(s,r)):(!i||i.score<s.score)&&(i=s)}return i}stackToTree(e){return e.close(),Po.build({buffer:DC.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let n=(G7||(G7=new WeakMap)).get(e);return n||G7.set(e,n=String.fromCodePoint(this.nextStackID++)),n+e}}function iG(t,e){for(let n=0;n<e.length;n++){let r=e[n];if(r.pos==t.pos&&r.sameState(t)){e[n].score<t.score&&(e[n]=t);return}}e.push(t)}class OYe{constructor(e,n,r){this.source=e,this.flags=n,this.disabled=r}allows(e){return!this.disabled||this.disabled[e]==0}}class NC extends zZ{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let n=e.nodeNames.split(" ");this.minRepeatTerm=n.length;for(let s=0;s<e.repeatNodeCount;s++)n.push("");let r=Object.keys(e.topRules).map(s=>e.topRules[s][1]),i=[];for(let s=0;s<n.length;s++)i.push([]);function o(s,l,c){i[s].push([l,l.deserialize(String(c))])}if(e.nodeProps)for(let s of e.nodeProps){let l=s[0];typeof l=="string"&&(l=En[l]);for(let c=1;c<s.length;){let u=s[c++];if(u>=0)o(u,l,s[c++]);else{let f=s[c+-u];for(let d=-u;d>0;d--)o(s[c++],l,f);c++}}}this.nodeSet=new xI(n.map((s,l)=>fs.define({name:l>=this.minRepeatTerm?void 0:s,id:l,props:i[l],top:r.indexOf(l)>-1,error:l==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(l)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=NZ;let a=Mk(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let s=0;s<this.specializerSpecs.length;s++)this.specialized[s]=this.specializerSpecs[s].term;this.specializers=this.specializerSpecs.map(oG),this.states=Mk(e.states,Uint32Array),this.data=Mk(e.stateData),this.goto=Mk(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(s=>typeof s=="number"?new Wv(a,s):s),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,n,r){let i=new EYe(this,e,n,r);for(let o of this.wrappers)i=o(i,e,n,r);return i}getGoto(e,n,r=!1){let i=this.goto;if(n>=i[0])return-1;for(let o=i[n+1];;){let a=i[o++],s=a&1,l=i[o++];if(s&&r)return l;for(let c=o+(a>>1);o<c;o++)if(i[o]==e)return l;if(s)return-1}}hasAction(e,n){let r=this.data;for(let i=0;i<2;i++)for(let o=this.stateSlot(e,i?2:1),a;;o+=3){if((a=r[o])==65535)if(r[o+1]==1)a=r[o=Qu(r,o+2)];else{if(r[o+1]==2)return Qu(r,o+2);break}if(a==n||a==0)return Qu(r,o+1)}return 0}stateSlot(e,n){return this.states[e*6+n]}stateFlag(e,n){return(this.stateSlot(e,0)&n)>0}validAction(e,n){if(n==this.stateSlot(e,4))return!0;for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=Qu(this.data,r+2);else return!1;if(n==Qu(this.data,r+1))return!0}}nextStates(e){let n=[];for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=Qu(this.data,r+2);else break;if(!(this.data[r+2]&1)){let i=this.data[r+1];n.some((o,a)=>a&1&&o==i)||n.push(this.data[r],i)}}return n}configure(e){let n=Object.assign(Object.create(NC.prototype),this);if(e.props&&(n.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw new RangeError(`Invalid top rule name ${e.top}`);n.top=r}return e.tokenizers&&(n.tokenizers=this.tokenizers.map(r=>{let i=e.tokenizers.find(o=>o.from==r);return i?i.to:r})),e.specializers&&(n.specializers=this.specializers.slice(),n.specializerSpecs=this.specializerSpecs.map((r,i)=>{let o=e.specializers.find(s=>s.from==r.external);if(!o)return r;let a=Object.assign(Object.assign({},r),{external:o.to});return n.specializers[i]=oG(a),a})),e.contextTracker&&(n.context=e.contextTracker),e.dialect&&(n.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(n.strict=e.strict),e.wrap&&(n.wrappers=n.wrappers.concat(e.wrap)),e.bufferLength!=null&&(n.bufferLength=e.bufferLength),n}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let n=this.dynamicPrecedences;return n==null?0:n[e]||0}parseDialect(e){let n=Object.keys(this.dialects),r=n.map(()=>!1);if(e)for(let o of e.split(" ")){let a=n.indexOf(o);a>=0&&(r[a]=!0)}let i=null;for(let o=0;o<n.length;o++)if(!r[o])for(let a=this.dialects[n[o]],s;(s=this.data[a++])!=65535;)(i||(i=new Uint8Array(this.maxTerm+1)))[s]=1;return new OYe(e,r,i)}static deserialize(e){return new NC(e)}}function Qu(t,e){return t[e]|t[e+1]<<16}function IYe(t){let e=null;for(let n of t){let r=n.p.stoppedAt;(n.pos==n.p.stream.end||r!=null&&n.pos>r)&&n.p.parser.stateFlag(n.state,2)&&(!e||e.score<n.score)&&(e=n)}return e}function oG(t){if(t.external){let e=t.extend?1:0;return(n,r)=>t.external(n,r)<<1|e}return t.get}const $Ye=VZ({String:Ge.string,Number:Ge.number,"True False":Ge.bool,PropertyName:Ge.propertyName,Null:Ge.null,",":Ge.separator,"[ ]":Ge.squareBracket,"{ }":Ge.brace}),FYe=NC.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#CjOOQO'#Cp'#CpQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CrOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59U,59UO!iQPO,59UOVQPO,59QOqQPO'#CkO!nQPO,59^OOQO1G.k1G.kOVQPO'#ClO!vQPO,59aOOQO1G.p1G.pOOQO1G.l1G.lOOQO,59V,59VOOQO-E6i-E6iOOQO,59W,59WOOQO-E6j-E6j",stateData:"#O~OcOS~OQSORSOSSOTSOWQO]ROePO~OVXOeUO~O[[O~PVOg^O~Oh_OVfX~OVaO~OhbO[iX~O[dO~Oh_OVfa~OhbO[ia~O",goto:"!kjPPPPPPkPPkqwPPk{!RPPP!XP!ePP!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:" JsonText True False Null Number String } { Object Property PropertyName ] [ Array",maxTerm:25,nodeProps:[["openedBy",7,"{",12,"["],["closedBy",8,"}",13,"]"]],propSources:[$Ye],skippedNodes:[0],repeatNodeCount:2,tokenData:"(p~RaXY!WYZ!W]^!Wpq!Wrs!]|}$i}!O$n!Q!R$w!R![&V![!]&h!}#O&m#P#Q&r#Y#Z&w#b#c'f#h#i'}#o#p(f#q#r(k~!]Oc~~!`Upq!]qr!]rs!rs#O!]#O#P!w#P~!]~!wOe~~!zXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#g~#jR!Q![#s!c!i#s#T#Z#s~#vR!Q![$P!c!i$P#T#Z$P~$SR!Q![$]!c!i$]#T#Z$]~$`R!Q![!]!c!i!]#T#Z!]~$nOh~~$qQ!Q!R$w!R![&V~$|RT~!O!P%V!g!h%k#X#Y%k~%YP!Q![%]~%bRT~!Q![%]!g!h%k#X#Y%k~%nR{|%w}!O%w!Q![%}~%zP!Q![%}~&SPT~!Q![%}~&[ST~!O!P%V!Q![&V!g!h%k#X#Y%k~&mOg~~&rO]~~&wO[~~&zP#T#U&}~'QP#`#a'T~'WP#g#h'Z~'^P#X#Y'a~'fOR~~'iP#i#j'l~'oP#`#a'r~'uP#`#a'x~'}OS~~(QP#f#g(T~(WP#i#j(Z~(^P#X#Y(a~(fOQ~~(kOW~~(pOV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),LYe=()=>t=>{try{JSON.parse(t.state.doc.toString())}catch(e){if(!(e instanceof SyntaxError))throw e;const n=DYe(e,t.state.doc);return[{from:n,message:e.message,severity:"error",to:n}]}return[]};function DYe(t,e){let n;return(n=t.message.match(/at position (\d+)/))?Math.min(+n[1],e.length):(n=t.message.match(/at line (\d+) column (\d+)/))?Math.min(e.line(+n[1]).from+ +n[2]-1,e.length):0}const Fce=g4.define({name:"json",parser:FYe.configure({props:[UZ.add({Object:xV({except:/^\s*\}/}),Array:xV({except:/^\s*\]/})}),GZ.add({"Object Array":Axe})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function Lce(){return new gxe(Fce)}function NYe(t){let e=null;try{e=JSON.parse(t.doc.toString())}catch{}const n=gYe(t,"json4");return{data:e,pointers:n}}const MYe=t=>{var e,n,r;return!((e=t==null?void 0:t.data)===null||e===void 0)&&e.pointer&&((n=t==null?void 0:t.data)===null||n===void 0?void 0:n.pointer)!=="#"?t.data.pointer.slice(1):!((r=t==null?void 0:t.data)===null||r===void 0)&&r.property?`/${t.data.property}`:""};function RYe(t,e){const n=new zYe(t,e);return function(i){return n.doValidation(i)}}class zYe{constructor(e,n){this.rewriteError=r=>{var i,o,a,s,l,c;return r.code==="one-of-error"?`Expected one of ${LC((i=r==null?void 0:r.data)===null||i===void 0?void 0:i.errors,f=>f.data.expected)}`:r.code==="type-error"?`Expected \`${!((o=r==null?void 0:r.data)===null||o===void 0)&&o.expected&&Array.isArray((a=r==null?void 0:r.data)===null||a===void 0?void 0:a.expected)?LC((s=r==null?void 0:r.data)===null||s===void 0?void 0:s.expected):(l=r==null?void 0:r.data)===null||l===void 0?void 0:l.expected}\` but received \`${(c=r==null?void 0:r.data)===null||c===void 0?void 0:c.received}\``:r.message.replaceAll("#/","").replaceAll("/",".")},this.options=Object.assign({jsonParser:NYe},n),this.schema=new Pce(e)}get schemaTitle(){var e;return(e=this.schema.getSchema().title)!==null&&e!==void 0?e:"json-schema"}doValidation(e){if(!this.schema)return[];const n=e.state.doc.toString();if(!n||n.trim().length<3)return[];const r=this.options.jsonParser(e.state);let i=[];try{i=this.schema.validate(r.data)}catch{}return i.length?i.reduce((o,a)=>{const s=MYe(a),l=r.pointers.get(s);if(l){const c=a.name==="NoAdditionalPropertiesError";o.push({from:c?l.keyFrom:l.valueFrom,to:c?l.keyTo:l.valueTo,message:this.rewriteError(a),severity:"error",source:this.schemaTitle})}return o},[]):[]}}function yp(t,e,n=[]){const r=document.createElement(t);return Object.entries(e).forEach(([i,o])=>{if(i==="text"){r.innerText=o;return}r.setAttribute(i,o)}),n.forEach(i=>r.appendChild(i)),r}function VYe(t,e){const n=new BYe(t,e);return async function(i,o,a){return n.doHover(i,o,a)}}function q7(t,e,n){return`${e}: ${LC(t[e].map(r=>{var i;return(i=r.type)!==null&&i!==void 0?i:n.resolveRef(r).type}))}`}class BYe{constructor(e,n){this.opts=n,this.schema=new Pce(e),this.opts=Object.assign({parser:JSON.parse},this.opts)}getDataForCursor(e,n,r){const i=Ice(e.state,n,r);let o;try{o=this.opts.parser(e.state.doc.toString())}catch{}if(!i)return null;let a=FC(this.schema,i,o);return a.type==="error"&&o!==void 0&&(a=FC(this.schema,i,void 0),a.type==="error")?{pointer:i}:{schema:a,pointer:i}}formatMessage(e){const{message:n,typeInfo:r}=e;return n?yp("div",{class:"cm6-json-schema-hover"},[yp("div",{class:"cm6-json-schema-hover--description",text:n}),yp("div",{class:"cm6-json-schema-hover--code-wrapper"},[yp("code",{class:"cm6-json-schema-hover--code",text:r})])]):yp("div",{class:"cm6-json-schema-hover"},[yp("div",{class:"cm6-json-schema-hover--code-wrapper"},[yp("code",{class:"cm6-json-schema-hover--code",text:r})])])}getHoverTexts(e,n){let r=null,i=null;const{schema:o}=e;return o.oneOf&&(r=q7(o,"oneOf",n)),o.anyOf&&(r=q7(o,"anyOf",n)),o.allOf&&(r=q7(o,"allOf",n)),o.type&&(r=Array.isArray(o.type)?LC(o.type):o.type),o.description&&(i=o.description),{message:i,typeInfo:r}}async doHover(e,n,r){var i,o,a,s;const l=n,c=n;try{const u=this.getDataForCursor(e,n,r);if(!(u!=null&&u.schema))return null;const d=((o=(i=this.opts)===null||i===void 0?void 0:i.getHoverTexts)!==null&&o!==void 0?o:this.getHoverTexts)(u,this.schema),g=((s=(a=this.opts)===null||a===void 0?void 0:a.formatHover)!==null&&s!==void 0?s:this.formatMessage)(d);return{pos:l,end:c,arrow:!0,above:!0,create:y=>({dom:g})}}catch{return null}}}function Dce(t){return[Lce(),JV(LYe()),JV(RYe(t)),Fce.data.of({autocomplete:_Ye(t)}),IZ(VYe(t))]}const jYe="#e5c07b",aG="#e06c75",HYe="#56b6c2",UYe="#ffffff",WYe="#abb2bf",sG="#7d8799",GYe="#61afef",qYe="#98c379",lG="#d19a66",YYe="#c678dd",Nce=oS.define([{tag:Ge.keyword,color:YYe},{tag:[Ge.name,Ge.deleted,Ge.character,Ge.propertyName,Ge.macroName],color:aG},{tag:[Ge.function(Ge.variableName),Ge.labelName],color:GYe},{tag:[Ge.color,Ge.constant(Ge.name),Ge.standard(Ge.name)],color:lG},{tag:[Ge.definition(Ge.name),Ge.separator],color:WYe},{tag:[Ge.typeName,Ge.className,Ge.number,Ge.changed,Ge.annotation,Ge.modifier,Ge.self,Ge.namespace],color:jYe},{tag:[Ge.operator,Ge.operatorKeyword,Ge.url,Ge.escape,Ge.regexp,Ge.link,Ge.special(Ge.string)],color:HYe},{tag:[Ge.meta,Ge.comment],color:sG},{tag:Ge.strong,fontWeight:"bold"},{tag:Ge.emphasis,fontStyle:"italic"},{tag:Ge.strikethrough,textDecoration:"line-through"},{tag:Ge.link,color:sG,textDecoration:"underline"},{tag:Ge.heading,fontWeight:"bold",color:aG},{tag:[Ge.atom,Ge.bool,Ge.special(Ge.variableName)],color:lG},{tag:[Ge.processingInstruction,Ge.string,Ge.inserted],color:qYe},{tag:Ge.invalid,color:UYe}]),KYe=Rt({props:{helpText:String}}),XYe={class:"dropdown is-hoverable is-left"},JYe={class:"dropdown-trigger"},ZYe={class:"icon is-small is-clickable"},QYe={class:"dropdown-menu"},eKe={class:"dropdown-content"},tKe={class:"dropdown-item"},nKe=["innerHTML"];function rKe(t,e,n,r,i,o){const a=Pt("font-awesome-icon");return Oe(),je("div",XYe,[K("div",JYe,[K("span",ZYe,[at(a,{icon:"fas fa-info-circle"})])]),K("div",QYe,[K("div",eKe,[K("div",tKe,[K("p",{class:"is-size-7 has-text-weight-normal",innerHTML:t.helpText},null,8,nKe)])])])])}const nm=Qr(KYe,[["render",rKe]]),iKe=Rt({components:{Codemirror:Wg,HelpButton:nm},setup(){const t=Af();return{extensions:[xT({class:"CodeMirror-lint-markers"}),II(),Ug,WI(),LI(),kI(),mee(),bt.lineWrapping,An.tabSize.of(2),OI(Nce),Dce(t.place.schema)]}},computed:{...Mt(Af)},methods:{onAddTokenClick(){this.placesStore.addToken()}}}),oKe={class:"block"},aKe={class:"field"},sKe={class:"label is-small icon-text"},lKe={class:"control is-small jsn-code"},cKe={key:0,class:"help"},uKe={key:1,class:"help is-danger"};function fKe(t,e,n,r,i,o){const a=Pt("HelpButton"),s=Pt("Codemirror");return Oe(),je("div",oKe,[K("div",aKe,[K("label",sKe,[Vi("Place marking "),at(a,{"help-text":`
                            Edit the JSON array to insert or remove data. 
                            <a href='https://www.json.org/json-en.html' target='_blank'
                            >Click here</a> for more information about JSON.
                            `}),K("button",{class:"button is-pulled-right is-small is-ghost",style:{"margin-left":"auto"},onClick:e[0]||(e[0]=(...l)=>t.onAddTokenClick&&t.onAddTokenClick(...l))},"Add token")]),K("div",lKe,[at(s,{modelValue:t.placesStore.markingString,"onUpdate:modelValue":e[1]||(e[1]=l=>t.placesStore.markingString=l),placeholder:"Edit place data.",autofocus:!0,"indent-with-tab":!0,"tab-size":2,style:{height:"400px"},extensions:t.extensions},null,8,["modelValue","extensions"])]),t.placesStore.place.hasError?ct("",!0):(Oe(),je("p",cKe,Qt(t.placesStore.place.errorMessage)+"  ",1)),t.placesStore.place.hasError&&t.placesStore.place.errorType==="data"?(Oe(),je("p",uKe,Qt(t.placesStore.place.errorMessage),1)):ct("",!0)])])}const Mce=Qr(iKe,[["render",fKe]]),dKe=Rt({computed:{...Mt(ss),...Mt(Af),...Mt(Zn)},methods:{setPlaceType(t){const e=t.target.value;if(this.netStore.placeTypes[this.placesStore.place.id]=e,e==="custom")return;const n=this.configStore.getPlaceTypeById(e),r=JSON.stringify(n==null?void 0:n.schema,null,2),i=JSON.stringify(n==null?void 0:n.marking,null,2);this.placesStore.schemaString=r,this.placesStore.savePlaceSchema(r),this.placesStore.savePlaceMarkingFromEditor(i)}}}),hKe={class:"block"},pKe={class:"field"},gKe=K("label",{class:"label is-small"},"Knotentyp:",-1),mKe={class:"select is-small"},vKe=["selected"],yKe=["value","selected"],bKe={class:"block"},SKe={key:0,class:"notification is-info is-light is-size-7"},_Ke=["innerHTML"],wKe=K("hr",null,null,-1);function kKe(t,e,n,r,i,o){var a;return Oe(),je(hn,null,[K("div",hKe,[K("div",pKe,[gKe,K("div",mKe,[K("select",{onChange:e[0]||(e[0]=(...s)=>t.setPlaceType&&t.setPlaceType(...s))},[K("option",{value:"custom",selected:t.netStore.placeTypes[t.placesStore.place.id]==="custom"},"Individuell",8,vKe),(Oe(!0),je(hn,null,uo(t.configStore.placeTypes,s=>(Oe(),je("option",{value:s.id,selected:s.id===t.netStore.placeTypes[t.placesStore.place.id]},Qt(s.schema.title),9,yKe))),256))],32)])])]),K("div",bKe,[t.netStore.placeTypes[t.placesStore.place.id]==="custom"?(Oe(),je("div",SKe," Sie knnen Schema und Markierung anpassen. ")):(Oe(),je("div",{key:1,class:"notification is-info is-light is-size-7",innerHTML:(a=t.configStore.getPlaceTypeById(t.netStore.placeTypes[t.placesStore.place.id]))==null?void 0:a.schema.description},null,8,_Ke))]),wKe],64)}const xKe=Qr(dKe,[["render",kKe]]);var Rce={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.jsonSchema=void 0,t.jsonSchema={$schema:"https://meta.json-schema.tools/",$id:"https://meta.json-schema.tools/",title:"JSONSchema",default:{},oneOf:[{$ref:"#/definitions/JSONSchemaObject"},{$ref:"#/definitions/JSONSchemaBoolean"}],definitions:{$id:{title:"$id",type:"string",format:"uri-reference"},$schema:{title:"$schema",type:"string",format:"uri"},$ref:{title:"$ref",type:"string",format:"uri-reference"},$comment:{title:"$comment",type:"string"},title:{title:"title",type:"string"},description:{title:"description",type:"string"},AlwaysTrue:!0,readOnly:{title:"readOnly",type:"boolean",default:!1},examples:{title:"examples",type:"array",items:!0},multipleOf:{title:"multipleOf",type:"number",exclusiveMinimum:0},maximum:{title:"maximum",type:"number"},exclusiveMaximum:{title:"exclusiveMaximum",type:"number"},minimum:{title:"minimum",type:"number"},exclusiveMinimum:{title:"exclusiveMinimum",type:"number"},nonNegativeInteger:{title:"nonNegativeInteger",type:"integer",minimum:0},nonNegativeIntegerDefaultZero:{title:"nonNegativeIntegerDefaultZero",type:"integer",minimum:0,default:0},pattern:{title:"pattern",type:"string",format:"regex"},JSONSchema:{$ref:"#",isCycle:!0},schemaArray:{title:"schemaArray",type:"array",minItems:1,items:{$ref:"#/definitions/JSONSchema",isCycle:!0}},items:{title:"items",anyOf:[{$ref:"#/definitions/JSONSchema",isCycle:!0},{$ref:"#/definitions/schemaArray"}],default:!0},uniqueItems:{title:"uniqueItems",type:"boolean",default:!1},string_doaGddGA:{type:"string",title:"string_doaGddGA"},stringArray:{title:"stringArray",type:"array",items:{$ref:"#/definitions/string_doaGddGA"},uniqueItems:!0,default:[]},definitions:{title:"definitions",type:"object",additionalProperties:{$ref:"#/definitions/JSONSchema",isCycle:!0},default:{}},properties:{title:"properties",type:"object",additionalProperties:{$ref:"#/definitions/JSONSchema",isCycle:!0},default:{}},patternProperties:{title:"patternProperties",type:"object",additionalProperties:{$ref:"#/definitions/JSONSchema",isCycle:!0},propertyNames:{title:"propertyNames",format:"regex"},default:{}},dependenciesSet:{title:"dependenciesSet",anyOf:[{$ref:"#/definitions/JSONSchema",isCycle:!0},{$ref:"#/definitions/stringArray"}]},dependencies:{title:"dependencies",type:"object",additionalProperties:{$ref:"#/definitions/dependenciesSet"}},enum:{title:"enum",type:"array",items:!0,minItems:1,uniqueItems:!0},simpleTypes:{title:"simpleTypes",type:"string",enum:["array","boolean","integer","null","number","object","string"]},arrayOfSimpleTypes:{title:"arrayOfSimpleTypes",type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0},type:{title:"type",anyOf:[{$ref:"#/definitions/simpleTypes"},{$ref:"#/definitions/arrayOfSimpleTypes"}]},format:{title:"format",type:"string"},contentMediaType:{title:"contentMediaType",type:"string"},contentEncoding:{title:"contentEncoding",type:"string"},JSONSchemaObject:{title:"JSONSchemaObject",type:"object",properties:{$id:{$ref:"#/definitions/$id"},$schema:{$ref:"#/definitions/$schema"},$ref:{$ref:"#/definitions/$ref"},$comment:{$ref:"#/definitions/$comment"},title:{$ref:"#/definitions/title"},description:{$ref:"#/definitions/description"},default:!0,readOnly:{$ref:"#/definitions/readOnly"},examples:{$ref:"#/definitions/examples"},multipleOf:{$ref:"#/definitions/multipleOf"},maximum:{$ref:"#/definitions/maximum"},exclusiveMaximum:{$ref:"#/definitions/exclusiveMaximum"},minimum:{$ref:"#/definitions/minimum"},exclusiveMinimum:{$ref:"#/definitions/exclusiveMinimum"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefaultZero"},pattern:{$ref:"#/definitions/pattern"},additionalItems:{$ref:"#/definitions/JSONSchema",isCycle:!0},items:{$ref:"#/definitions/items"},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefaultZero"},uniqueItems:{$ref:"#/definitions/uniqueItems"},contains:{$ref:"#/definitions/JSONSchema",isCycle:!0},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefaultZero"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#/definitions/JSONSchema",isCycle:!0},definitions:{$ref:"#/definitions/definitions"},properties:{$ref:"#/definitions/properties"},patternProperties:{$ref:"#/definitions/patternProperties"},dependencies:{$ref:"#/definitions/dependencies"},propertyNames:{$ref:"#/definitions/JSONSchema",isCycle:!0},const:!0,enum:{$ref:"#/definitions/enum"},type:{$ref:"#/definitions/type"},format:{$ref:"#/definitions/format"},contentMediaType:{$ref:"#/definitions/contentMediaType"},contentEncoding:{$ref:"#/definitions/contentEncoding"},if:{$ref:"#/definitions/JSONSchema",isCycle:!0},then:{$ref:"#/definitions/JSONSchema",isCycle:!0},else:{$ref:"#/definitions/JSONSchema",isCycle:!0},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#/definitions/JSONSchema",isCycle:!0}}},JSONSchemaBoolean:{title:"JSONSchemaBoolean",description:"Always valid if true. Never valid if false. Is constant.",type:"boolean"}},isCycle:!0},t.default=t.jsonSchema})(Rce);const CKe=pr(Rce);var TKe=typeof ui=="object"&&ui&&ui.Object===Object&&ui,zce=TKe,AKe=zce,PKe=typeof self=="object"&&self&&self.Object===Object&&self,EKe=AKe||PKe||Function("return this")(),ys=EKe,OKe=ys,IKe=OKe.Symbol,G0=IKe,cG=G0,Vce=Object.prototype,$Ke=Vce.hasOwnProperty,FKe=Vce.toString,hb=cG?cG.toStringTag:void 0;function LKe(t){var e=$Ke.call(t,hb),n=t[hb];try{t[hb]=void 0;var r=!0}catch{}var i=FKe.call(t);return r&&(e?t[hb]=n:delete t[hb]),i}var DKe=LKe,NKe=Object.prototype,MKe=NKe.toString;function RKe(t){return MKe.call(t)}var zKe=RKe,uG=G0,VKe=DKe,BKe=zKe,jKe="[object Null]",HKe="[object Undefined]",fG=uG?uG.toStringTag:void 0;function UKe(t){return t==null?t===void 0?HKe:jKe:fG&&fG in Object(t)?VKe(t):BKe(t)}var wh=UKe;function WKe(t){return t!=null&&typeof t=="object"}var qs=WKe,GKe=wh,qKe=qs,YKe="[object Symbol]";function KKe(t){return typeof t=="symbol"||qKe(t)&&GKe(t)==YKe}var q0=KKe,XKe=q0;function JKe(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(a!=null&&(s===void 0?a===a&&!XKe(a):n(a,s)))var s=a,l=o}return l}var ZKe=JKe;function QKe(t,e){return t>e}var eXe=QKe;function tXe(){this.__data__=[],this.size=0}var nXe=tXe;function rXe(t,e){return t===e||t!==t&&e!==e}var DS=rXe,iXe=DS;function oXe(t,e){for(var n=t.length;n--;)if(iXe(t[n][0],e))return n;return-1}var R3=oXe,aXe=R3,sXe=Array.prototype,lXe=sXe.splice;function cXe(t){var e=this.__data__,n=aXe(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():lXe.call(e,n,1),--this.size,!0}var uXe=cXe,fXe=R3;function dXe(t){var e=this.__data__,n=fXe(e,t);return n<0?void 0:e[n][1]}var hXe=dXe,pXe=R3;function gXe(t){return pXe(this.__data__,t)>-1}var mXe=gXe,vXe=R3;function yXe(t,e){var n=this.__data__,r=vXe(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var bXe=yXe,SXe=nXe,_Xe=uXe,wXe=hXe,kXe=mXe,xXe=bXe;function Y0(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Y0.prototype.clear=SXe;Y0.prototype.delete=_Xe;Y0.prototype.get=wXe;Y0.prototype.has=kXe;Y0.prototype.set=xXe;var z3=Y0,CXe=z3;function TXe(){this.__data__=new CXe,this.size=0}var AXe=TXe;function PXe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var EXe=PXe;function OXe(t){return this.__data__.get(t)}var IXe=OXe;function $Xe(t){return this.__data__.has(t)}var FXe=$Xe;function LXe(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Rl=LXe,DXe=wh,NXe=Rl,MXe="[object AsyncFunction]",RXe="[object Function]",zXe="[object GeneratorFunction]",VXe="[object Proxy]";function BXe(t){if(!NXe(t))return!1;var e=DXe(t);return e==RXe||e==zXe||e==MXe||e==VXe}var NS=BXe;const jXe=pr(NS);var HXe=ys,UXe=HXe["__core-js_shared__"],WXe=UXe,Y7=WXe,dG=function(){var t=/[^.]+$/.exec(Y7&&Y7.keys&&Y7.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function GXe(t){return!!dG&&dG in t}var qXe=GXe,YXe=Function.prototype,KXe=YXe.toString;function XXe(t){if(t!=null){try{return KXe.call(t)}catch{}try{return t+""}catch{}}return""}var Bce=XXe,JXe=NS,ZXe=qXe,QXe=Rl,eJe=Bce,tJe=/[\\^$.*+?()[\]{}|]/g,nJe=/^\[object .+?Constructor\]$/,rJe=Function.prototype,iJe=Object.prototype,oJe=rJe.toString,aJe=iJe.hasOwnProperty,sJe=RegExp("^"+oJe.call(aJe).replace(tJe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function lJe(t){if(!QXe(t)||ZXe(t))return!1;var e=JXe(t)?sJe:nJe;return e.test(eJe(t))}var cJe=lJe;function uJe(t,e){return t==null?void 0:t[e]}var fJe=uJe,dJe=cJe,hJe=fJe;function pJe(t,e){var n=hJe(t,e);return dJe(n)?n:void 0}var rm=pJe,gJe=rm,mJe=ys,vJe=gJe(mJe,"Map"),aD=vJe,yJe=rm,bJe=yJe(Object,"create"),V3=bJe,hG=V3;function SJe(){this.__data__=hG?hG(null):{},this.size=0}var _Je=SJe;function wJe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var kJe=wJe,xJe=V3,CJe="__lodash_hash_undefined__",TJe=Object.prototype,AJe=TJe.hasOwnProperty;function PJe(t){var e=this.__data__;if(xJe){var n=e[t];return n===CJe?void 0:n}return AJe.call(e,t)?e[t]:void 0}var EJe=PJe,OJe=V3,IJe=Object.prototype,$Je=IJe.hasOwnProperty;function FJe(t){var e=this.__data__;return OJe?e[t]!==void 0:$Je.call(e,t)}var LJe=FJe,DJe=V3,NJe="__lodash_hash_undefined__";function MJe(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=DJe&&e===void 0?NJe:e,this}var RJe=MJe,zJe=_Je,VJe=kJe,BJe=EJe,jJe=LJe,HJe=RJe;function K0(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}K0.prototype.clear=zJe;K0.prototype.delete=VJe;K0.prototype.get=BJe;K0.prototype.has=jJe;K0.prototype.set=HJe;var UJe=K0,pG=UJe,WJe=z3,GJe=aD;function qJe(){this.size=0,this.__data__={hash:new pG,map:new(GJe||WJe),string:new pG}}var YJe=qJe;function KJe(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var XJe=KJe,JJe=XJe;function ZJe(t,e){var n=t.__data__;return JJe(e)?n[typeof e=="string"?"string":"hash"]:n.map}var B3=ZJe,QJe=B3;function eZe(t){var e=QJe(this,t).delete(t);return this.size-=e?1:0,e}var tZe=eZe,nZe=B3;function rZe(t){return nZe(this,t).get(t)}var iZe=rZe,oZe=B3;function aZe(t){return oZe(this,t).has(t)}var sZe=aZe,lZe=B3;function cZe(t,e){var n=lZe(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var uZe=cZe,fZe=YJe,dZe=tZe,hZe=iZe,pZe=sZe,gZe=uZe;function X0(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}X0.prototype.clear=fZe;X0.prototype.delete=dZe;X0.prototype.get=hZe;X0.prototype.has=pZe;X0.prototype.set=gZe;var sD=X0,mZe=z3,vZe=aD,yZe=sD,bZe=200;function SZe(t,e){var n=this.__data__;if(n instanceof mZe){var r=n.__data__;if(!vZe||r.length<bZe-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new yZe(r)}return n.set(t,e),this.size=n.size,this}var _Ze=SZe,wZe=z3,kZe=AXe,xZe=EXe,CZe=IXe,TZe=FXe,AZe=_Ze;function J0(t){var e=this.__data__=new wZe(t);this.size=e.size}J0.prototype.clear=kZe;J0.prototype.delete=xZe;J0.prototype.get=CZe;J0.prototype.has=TZe;J0.prototype.set=AZe;var j3=J0,PZe="__lodash_hash_undefined__";function EZe(t){return this.__data__.set(t,PZe),this}var OZe=EZe;function IZe(t){return this.__data__.has(t)}var $Ze=IZe,FZe=sD,LZe=OZe,DZe=$Ze;function MC(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new FZe;++e<n;)this.add(t[e])}MC.prototype.add=MC.prototype.push=LZe;MC.prototype.has=DZe;var NZe=MC;function MZe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var RZe=MZe;function zZe(t,e){return t.has(e)}var VZe=zZe,BZe=NZe,jZe=RZe,HZe=VZe,UZe=1,WZe=2;function GZe(t,e,n,r,i,o){var a=n&UZe,s=t.length,l=e.length;if(s!=l&&!(a&&l>s))return!1;var c=o.get(t),u=o.get(e);if(c&&u)return c==e&&u==t;var f=-1,d=!0,h=n&WZe?new BZe:void 0;for(o.set(t,e),o.set(e,t);++f<s;){var g=t[f],y=e[f];if(r)var S=a?r(y,g,f,e,t,o):r(g,y,f,t,e,o);if(S!==void 0){if(S)continue;d=!1;break}if(h){if(!jZe(e,function(v,_){if(!HZe(h,_)&&(g===v||i(g,v,n,r,o)))return h.push(_)})){d=!1;break}}else if(!(g===y||i(g,y,n,r,o))){d=!1;break}}return o.delete(t),o.delete(e),d}var jce=GZe,qZe=ys,YZe=qZe.Uint8Array,Hce=YZe;function KZe(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var XZe=KZe;function JZe(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var ZZe=JZe,gG=G0,mG=Hce,QZe=DS,eQe=jce,tQe=XZe,nQe=ZZe,rQe=1,iQe=2,oQe="[object Boolean]",aQe="[object Date]",sQe="[object Error]",lQe="[object Map]",cQe="[object Number]",uQe="[object RegExp]",fQe="[object Set]",dQe="[object String]",hQe="[object Symbol]",pQe="[object ArrayBuffer]",gQe="[object DataView]",vG=gG?gG.prototype:void 0,K7=vG?vG.valueOf:void 0;function mQe(t,e,n,r,i,o,a){switch(n){case gQe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case pQe:return!(t.byteLength!=e.byteLength||!o(new mG(t),new mG(e)));case oQe:case aQe:case cQe:return QZe(+t,+e);case sQe:return t.name==e.name&&t.message==e.message;case uQe:case dQe:return t==e+"";case lQe:var s=tQe;case fQe:var l=r&rQe;if(s||(s=nQe),t.size!=e.size&&!l)return!1;var c=a.get(t);if(c)return c==e;r|=iQe,a.set(t,e);var u=eQe(s(t),s(e),r,i,o,a);return a.delete(t),u;case hQe:if(K7)return K7.call(t)==K7.call(e)}return!1}var vQe=mQe;function yQe(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var lD=yQe,bQe=Array.isArray,fo=bQe;const SQe=pr(fo);var _Qe=lD,wQe=fo;function kQe(t,e,n){var r=e(t);return wQe(t)?r:_Qe(r,n(t))}var Uce=kQe;function xQe(t,e){for(var n=-1,r=t==null?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}var Wce=xQe;function CQe(){return[]}var Gce=CQe,TQe=Wce,AQe=Gce,PQe=Object.prototype,EQe=PQe.propertyIsEnumerable,yG=Object.getOwnPropertySymbols,OQe=yG?function(t){return t==null?[]:(t=Object(t),TQe(yG(t),function(e){return EQe.call(t,e)}))}:AQe,cD=OQe;function IQe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var $Qe=IQe,FQe=wh,LQe=qs,DQe="[object Arguments]";function NQe(t){return LQe(t)&&FQe(t)==DQe}var MQe=NQe,bG=MQe,RQe=qs,qce=Object.prototype,zQe=qce.hasOwnProperty,VQe=qce.propertyIsEnumerable,BQe=bG(function(){return arguments}())?bG:function(t){return RQe(t)&&zQe.call(t,"callee")&&!VQe.call(t,"callee")},MS=BQe,RC={exports:{}};function jQe(){return!1}var HQe=jQe;RC.exports;(function(t,e){var n=ys,r=HQe,i=e&&!e.nodeType&&e,o=i&&!0&&t&&!t.nodeType&&t,a=o&&o.exports===i,s=a?n.Buffer:void 0,l=s?s.isBuffer:void 0,c=l||r;t.exports=c})(RC,RC.exports);var RS=RC.exports,UQe=9007199254740991,WQe=/^(?:0|[1-9]\d*)$/;function GQe(t,e){var n=typeof t;return e=e??UQe,!!e&&(n=="number"||n!="symbol"&&WQe.test(t))&&t>-1&&t%1==0&&t<e}var zS=GQe,qQe=9007199254740991;function YQe(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=qQe}var uD=YQe,KQe=wh,XQe=uD,JQe=qs,ZQe="[object Arguments]",QQe="[object Array]",eet="[object Boolean]",tet="[object Date]",net="[object Error]",ret="[object Function]",iet="[object Map]",oet="[object Number]",aet="[object Object]",set="[object RegExp]",cet="[object Set]",uet="[object String]",fet="[object WeakMap]",det="[object ArrayBuffer]",het="[object DataView]",pet="[object Float32Array]",get="[object Float64Array]",met="[object Int8Array]",vet="[object Int16Array]",yet="[object Int32Array]",bet="[object Uint8Array]",_et="[object Uint8ClampedArray]",wet="[object Uint16Array]",ket="[object Uint32Array]",Wr={};Wr[pet]=Wr[get]=Wr[met]=Wr[vet]=Wr[yet]=Wr[bet]=Wr[_et]=Wr[wet]=Wr[ket]=!0;Wr[ZQe]=Wr[QQe]=Wr[det]=Wr[eet]=Wr[het]=Wr[tet]=Wr[net]=Wr[ret]=Wr[iet]=Wr[oet]=Wr[aet]=Wr[set]=Wr[cet]=Wr[uet]=Wr[fet]=!1;function xet(t){return JQe(t)&&XQe(t.length)&&!!Wr[KQe(t)]}var Cet=xet;function Tet(t){return function(e){return t(e)}}var fD=Tet,zC={exports:{}};zC.exports;(function(t,e){var n=zce,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===r,a=o&&n.process,s=function(){try{var l=i&&i.require&&i.require("util").types;return l||a&&a.binding&&a.binding("util")}catch{}}();t.exports=s})(zC,zC.exports);var dD=zC.exports,Aet=Cet,Pet=fD,SG=dD,_G=SG&&SG.isTypedArray,Eet=_G?Pet(_G):Aet,H3=Eet,Oet=$Qe,Iet=MS,$et=fo,Fet=RS,Let=zS,Det=H3,Net=Object.prototype,Met=Net.hasOwnProperty;function Ret(t,e){var n=$et(t),r=!n&&Iet(t),i=!n&&!r&&Fet(t),o=!n&&!r&&!i&&Det(t),a=n||r||i||o,s=a?Oet(t.length,String):[],l=s.length;for(var c in t)(e||Met.call(t,c))&&!(a&&(c=="length"||i&&(c=="offset"||c=="parent")||o&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Let(c,l)))&&s.push(c);return s}var Yce=Ret,zet=Object.prototype;function Vet(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||zet;return t===n}var U3=Vet;function Bet(t,e){return function(n){return t(e(n))}}var Kce=Bet,jet=Kce,Het=jet(Object.keys,Object),Uet=Het,Wet=U3,Get=Uet,qet=Object.prototype,Yet=qet.hasOwnProperty;function Ket(t){if(!Wet(t))return Get(t);var e=[];for(var n in Object(t))Yet.call(t,n)&&n!="constructor"&&e.push(n);return e}var hD=Ket,Xet=NS,Jet=uD;function Zet(t){return t!=null&&Jet(t.length)&&!Xet(t)}var kh=Zet,Qet=Yce,ett=hD,ttt=kh;function ntt(t){return ttt(t)?Qet(t):ett(t)}var xh=ntt;const rtt=pr(xh);var itt=Uce,ott=cD,att=xh;function stt(t){return itt(t,att,ott)}var Xce=stt,wG=Xce,ltt=1,ctt=Object.prototype,utt=ctt.hasOwnProperty;function ftt(t,e,n,r,i,o){var a=n&ltt,s=wG(t),l=s.length,c=wG(e),u=c.length;if(l!=u&&!a)return!1;for(var f=l;f--;){var d=s[f];if(!(a?d in e:utt.call(e,d)))return!1}var h=o.get(t),g=o.get(e);if(h&&g)return h==e&&g==t;var y=!0;o.set(t,e),o.set(e,t);for(var S=a;++f<l;){d=s[f];var v=t[d],_=e[d];if(r)var x=a?r(_,v,d,e,t,o):r(v,_,d,t,e,o);if(!(x===void 0?v===_||i(v,_,n,r,o):x)){y=!1;break}S||(S=d=="constructor")}if(y&&!S){var C=t.constructor,k=e.constructor;C!=k&&"constructor"in t&&"constructor"in e&&!(typeof C=="function"&&C instanceof C&&typeof k=="function"&&k instanceof k)&&(y=!1)}return o.delete(t),o.delete(e),y}var dtt=ftt,htt=rm,ptt=ys,gtt=htt(ptt,"DataView"),mtt=gtt,vtt=rm,ytt=ys,btt=vtt(ytt,"Promise"),Stt=btt,_tt=rm,wtt=ys,ktt=_tt(wtt,"Set"),xtt=ktt,Ctt=rm,Ttt=ys,Att=Ctt(Ttt,"WeakMap"),Jce=Att,zO=mtt,VO=aD,BO=Stt,jO=xtt,HO=Jce,Zce=wh,Z0=Bce,kG="[object Map]",Ptt="[object Object]",xG="[object Promise]",CG="[object Set]",TG="[object WeakMap]",AG="[object DataView]",Ett=Z0(zO),Ott=Z0(VO),Itt=Z0(BO),$tt=Z0(jO),Ftt=Z0(HO),wp=Zce;(zO&&wp(new zO(new ArrayBuffer(1)))!=AG||VO&&wp(new VO)!=kG||BO&&wp(BO.resolve())!=xG||jO&&wp(new jO)!=CG||HO&&wp(new HO)!=TG)&&(wp=function(t){var e=Zce(t),n=e==Ptt?t.constructor:void 0,r=n?Z0(n):"";if(r)switch(r){case Ett:return AG;case Ott:return kG;case Itt:return xG;case $tt:return CG;case Ftt:return TG}return e});var Q0=wp,X7=j3,Ltt=jce,Dtt=vQe,Ntt=dtt,PG=Q0,EG=fo,OG=RS,Mtt=H3,Rtt=1,IG="[object Arguments]",$G="[object Array]",Rk="[object Object]",ztt=Object.prototype,FG=ztt.hasOwnProperty;function Vtt(t,e,n,r,i,o){var a=EG(t),s=EG(e),l=a?$G:PG(t),c=s?$G:PG(e);l=l==IG?Rk:l,c=c==IG?Rk:c;var u=l==Rk,f=c==Rk,d=l==c;if(d&&OG(t)){if(!OG(e))return!1;a=!0,u=!1}if(d&&!u)return o||(o=new X7),a||Mtt(t)?Ltt(t,e,n,r,i,o):Dtt(t,e,l,n,r,i,o);if(!(n&Rtt)){var h=u&&FG.call(t,"__wrapped__"),g=f&&FG.call(e,"__wrapped__");if(h||g){var y=h?t.value():t,S=g?e.value():e;return o||(o=new X7),i(y,S,n,r,o)}}return d?(o||(o=new X7),Ntt(t,e,n,r,i,o)):!1}var Btt=Vtt,jtt=Btt,LG=qs;function Qce(t,e,n,r,i){return t===e?!0:t==null||e==null||!LG(t)&&!LG(e)?t!==t&&e!==e:jtt(t,e,n,r,Qce,i)}var pD=Qce,Htt=j3,Utt=pD,Wtt=1,Gtt=2;function qtt(t,e,n,r){var i=n.length,o=i,a=!r;if(t==null)return!o;for(t=Object(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){s=n[i];var l=s[0],c=t[l],u=s[1];if(a&&s[2]){if(c===void 0&&!(l in t))return!1}else{var f=new Htt;if(r)var d=r(c,u,l,t,e,f);if(!(d===void 0?Utt(u,c,Wtt|Gtt,r,f):d))return!1}}return!0}var Ytt=qtt,Ktt=Rl;function Xtt(t){return t===t&&!Ktt(t)}var eue=Xtt,Jtt=eue,Ztt=xh;function Qtt(t){for(var e=Ztt(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Jtt(i)]}return e}var ent=Qtt;function tnt(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var tue=tnt,nnt=Ytt,rnt=ent,int=tue;function ont(t){var e=rnt(t);return e.length==1&&e[0][2]?int(e[0][0],e[0][1]):function(n){return n===t||nnt(n,t,e)}}var ant=ont,snt=fo,lnt=q0,cnt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,unt=/^\w*$/;function fnt(t,e){if(snt(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||lnt(t)?!0:unt.test(t)||!cnt.test(t)||e!=null&&t in Object(e)}var gD=fnt,nue=sD,dnt="Expected a function";function mD(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(dnt);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(mD.Cache||nue),n}mD.Cache=nue;var hnt=mD,pnt=hnt,gnt=500;function mnt(t){var e=pnt(t,function(r){return n.size===gnt&&n.clear(),r}),n=e.cache;return e}var vnt=mnt,ynt=vnt,bnt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Snt=/\\(\\)?/g,_nt=ynt(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(bnt,function(n,r,i,o){e.push(i?o.replace(Snt,"$1"):r||n)}),e}),rue=_nt;function wnt(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var vD=wnt,DG=G0,knt=vD,xnt=fo,Cnt=q0,Tnt=1/0,NG=DG?DG.prototype:void 0,MG=NG?NG.toString:void 0;function iue(t){if(typeof t=="string")return t;if(xnt(t))return knt(t,iue)+"";if(Cnt(t))return MG?MG.call(t):"";var e=t+"";return e=="0"&&1/t==-Tnt?"-0":e}var Ant=iue,Pnt=Ant;function Ent(t){return t==null?"":Pnt(t)}var VS=Ent,Ont=fo,Int=gD,$nt=rue,Fnt=VS;function Lnt(t,e){return Ont(t)?t:Int(t,e)?[t]:$nt(Fnt(t))}var yD=Lnt,Dnt=q0,Nnt=1/0;function Mnt(t){if(typeof t=="string"||Dnt(t))return t;var e=t+"";return e=="0"&&1/t==-Nnt?"-0":e}var ey=Mnt,Rnt=yD,znt=ey;function Vnt(t,e){e=Rnt(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[znt(e[n++])];return n&&n==r?t:void 0}var oue=Vnt,Bnt=oue;function jnt(t,e,n){var r=t==null?void 0:Bnt(t,e);return r===void 0?n:r}var aue=jnt;const ra=pr(aue);function Hnt(t,e){return t!=null&&e in Object(t)}var Unt=Hnt,Wnt=yD,Gnt=MS,qnt=fo,Ynt=zS,Knt=uD,Xnt=ey;function Jnt(t,e,n){e=Wnt(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var a=Xnt(e[r]);if(!(o=t!=null&&n(t,a)))break;t=t[a]}return o||++r!=i?o:(i=t==null?0:t.length,!!i&&Knt(i)&&Ynt(a,i)&&(qnt(t)||Gnt(t)))}var sue=Jnt,Znt=Unt,Qnt=sue;function ert(t,e){return t!=null&&Qnt(t,e,Znt)}var trt=ert,nrt=pD,rrt=aue,irt=trt,ort=gD,art=eue,srt=tue,lrt=ey,crt=1,urt=2;function frt(t,e){return ort(t)&&art(e)?srt(lrt(t),e):function(n){var r=rrt(n,t);return r===void 0&&r===e?irt(n,t):nrt(e,r,crt|urt)}}var drt=frt;function hrt(t){return t}var W3=hrt;function prt(t){return function(e){return e==null?void 0:e[t]}}var grt=prt,mrt=oue;function vrt(t){return function(e){return mrt(e,t)}}var yrt=vrt,brt=grt,Srt=yrt,_rt=gD,wrt=ey;function krt(t){return _rt(t)?brt(wrt(t)):Srt(t)}var xrt=krt,Crt=ant,Trt=drt,Art=W3,Prt=fo,Ert=xrt;function Ort(t){return typeof t=="function"?t:t==null?Art:typeof t=="object"?Prt(t)?Trt(t[0],t[1]):Crt(t):Ert(t)}var BS=Ort,Irt=ZKe,$rt=eXe,Frt=BS;function Lrt(t,e){return t&&t.length?Irt(t,Frt(e),$rt):void 0}var Drt=Lrt;const bD=pr(Drt);var Nrt=hD,Mrt=Q0,Rrt=MS,zrt=fo,Vrt=kh,Brt=RS,jrt=U3,Hrt=H3,Urt="[object Map]",Wrt="[object Set]",Grt=Object.prototype,qrt=Grt.hasOwnProperty;function Yrt(t){if(t==null)return!0;if(Vrt(t)&&(zrt(t)||typeof t=="string"||typeof t.splice=="function"||Brt(t)||Hrt(t)||Rrt(t)))return!t.length;var e=Mrt(t);if(e==Urt||e==Wrt)return!t.size;if(jrt(t))return!Nrt(t).length;for(var n in t)if(qrt.call(t,n))return!1;return!0}var Krt=Yrt;const or=pr(Krt);function Xrt(t,e,n,r){var i=-1,o=t==null?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}var Jrt=Xrt;function Zrt(t){return function(e){return t==null?void 0:t[e]}}var Qrt=Zrt,eit=Qrt,tit={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},nit=eit(tit),rit=nit,iit=rit,oit=VS,ait=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,sit="\\u0300-\\u036f",lit="\\ufe20-\\ufe2f",cit="\\u20d0-\\u20ff",uit=sit+lit+cit,fit="["+uit+"]",dit=RegExp(fit,"g");function hit(t){return t=oit(t),t&&t.replace(ait,iit).replace(dit,"")}var pit=hit,git=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function mit(t){return t.match(git)||[]}var vit=mit,yit=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function bit(t){return yit.test(t)}var Sit=bit,lue="\\ud800-\\udfff",_it="\\u0300-\\u036f",wit="\\ufe20-\\ufe2f",kit="\\u20d0-\\u20ff",xit=_it+wit+kit,cue="\\u2700-\\u27bf",uue="a-z\\xdf-\\xf6\\xf8-\\xff",Cit="\\xac\\xb1\\xd7\\xf7",Tit="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ait="\\u2000-\\u206f",Pit=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",fue="A-Z\\xc0-\\xd6\\xd8-\\xde",Eit="\\ufe0e\\ufe0f",due=Cit+Tit+Ait+Pit,hue="[']",RG="["+due+"]",Oit="["+xit+"]",pue="\\d+",Iit="["+cue+"]",gue="["+uue+"]",mue="[^"+lue+due+pue+cue+uue+fue+"]",$it="\\ud83c[\\udffb-\\udfff]",Fit="(?:"+Oit+"|"+$it+")",Lit="[^"+lue+"]",vue="(?:\\ud83c[\\udde6-\\uddff]){2}",yue="[\\ud800-\\udbff][\\udc00-\\udfff]",tv="["+fue+"]",Dit="\\u200d",zG="(?:"+gue+"|"+mue+")",Nit="(?:"+tv+"|"+mue+")",VG="(?:"+hue+"(?:d|ll|m|re|s|t|ve))?",BG="(?:"+hue+"(?:D|LL|M|RE|S|T|VE))?",bue=Fit+"?",Sue="["+Eit+"]?",Mit="(?:"+Dit+"(?:"+[Lit,vue,yue].join("|")+")"+Sue+bue+")*",Rit="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",zit="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Vit=Sue+bue+Mit,Bit="(?:"+[Iit,vue,yue].join("|")+")"+Vit,jit=RegExp([tv+"?"+gue+"+"+VG+"(?="+[RG,tv,"$"].join("|")+")",Nit+"+"+BG+"(?="+[RG,tv+zG,"$"].join("|")+")",tv+"?"+zG+"+"+VG,tv+"+"+BG,zit,Rit,pue,Bit].join("|"),"g");function Hit(t){return t.match(jit)||[]}var Uit=Hit,Wit=vit,Git=Sit,qit=VS,Yit=Uit;function Kit(t,e,n){return t=qit(t),e=n?void 0:e,e===void 0?Git(t)?Yit(t):Wit(t):t.match(e)||[]}var Xit=Kit,Jit=Jrt,Zit=pit,Qit=Xit,eot="[']",tot=RegExp(eot,"g");function not(t){return function(e){return Jit(Qit(Zit(e).replace(tot,"")),t,"")}}var rot=not;function iot(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}var oot=iot,aot=oot;function sot(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:aot(t,e,n)}var lot=sot,cot="\\ud800-\\udfff",uot="\\u0300-\\u036f",fot="\\ufe20-\\ufe2f",dot="\\u20d0-\\u20ff",hot=uot+fot+dot,pot="\\ufe0e\\ufe0f",got="\\u200d",mot=RegExp("["+got+cot+hot+pot+"]");function vot(t){return mot.test(t)}var _ue=vot;function yot(t){return t.split("")}var bot=yot,wue="\\ud800-\\udfff",Sot="\\u0300-\\u036f",_ot="\\ufe20-\\ufe2f",wot="\\u20d0-\\u20ff",kot=Sot+_ot+wot,xot="\\ufe0e\\ufe0f",Cot="["+wue+"]",UO="["+kot+"]",WO="\\ud83c[\\udffb-\\udfff]",Tot="(?:"+UO+"|"+WO+")",kue="[^"+wue+"]",xue="(?:\\ud83c[\\udde6-\\uddff]){2}",Cue="[\\ud800-\\udbff][\\udc00-\\udfff]",Aot="\\u200d",Tue=Tot+"?",Aue="["+xot+"]?",Pot="(?:"+Aot+"(?:"+[kue,xue,Cue].join("|")+")"+Aue+Tue+")*",Eot=Aue+Tue+Pot,Oot="(?:"+[kue+UO+"?",UO,xue,Cue,Cot].join("|")+")",Iot=RegExp(WO+"(?="+WO+")|"+Oot+Eot,"g");function $ot(t){return t.match(Iot)||[]}var Fot=$ot,Lot=bot,Dot=_ue,Not=Fot;function Mot(t){return Dot(t)?Not(t):Lot(t)}var Rot=Mot,zot=lot,Vot=_ue,Bot=Rot,jot=VS;function Hot(t){return function(e){e=jot(e);var n=Vot(e)?Bot(e):void 0,r=n?n[0]:e.charAt(0),i=n?zot(n,1).join(""):e.slice(1);return r[t]()+i}}var Uot=Hot,Wot=Uot,Got=Wot("toUpperCase"),qot=Got,Yot=rot,Kot=qot,Xot=Yot(function(t,e,n){return t+(n?" ":"")+Kot(e)}),Jot=Xot;const Pue=pr(Jot);var Zot=rm,Qot=function(){try{var t=Zot(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Eue=Qot,jG=Eue;function eat(t,e,n){e=="__proto__"&&jG?jG(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var SD=eat,tat=SD,nat=DS;function rat(t,e,n){(n!==void 0&&!nat(t[e],n)||n===void 0&&!(e in t))&&tat(t,e,n)}var Oue=rat;function iat(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var l=a[t?s:++i];if(n(o[l],l,o)===!1)break}return e}}var oat=iat,aat=oat,sat=aat(),Iue=sat,VC={exports:{}};VC.exports;(function(t,e){var n=ys,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===r,a=o?n.Buffer:void 0,s=a?a.allocUnsafe:void 0;function l(c,u){if(u)return c.slice();var f=c.length,d=s?s(f):new c.constructor(f);return c.copy(d),d}t.exports=l})(VC,VC.exports);var $ue=VC.exports,HG=Hce;function lat(t){var e=new t.constructor(t.byteLength);return new HG(e).set(new HG(t)),e}var _D=lat,cat=_D;function uat(t,e){var n=e?cat(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var Fue=uat;function fat(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var jS=fat,dat=Rl,UG=Object.create,hat=function(){function t(){}return function(e){if(!dat(e))return{};if(UG)return UG(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),G3=hat,pat=Kce,gat=pat(Object.getPrototypeOf,Object),wD=gat,mat=G3,vat=wD,yat=U3;function bat(t){return typeof t.constructor=="function"&&!yat(t)?mat(vat(t)):{}}var Lue=bat,Sat=kh,_at=qs;function wat(t){return _at(t)&&Sat(t)}var kat=wat,xat=wh,Cat=wD,Tat=qs,Aat="[object Object]",Pat=Function.prototype,Eat=Object.prototype,Due=Pat.toString,Oat=Eat.hasOwnProperty,Iat=Due.call(Object);function $at(t){if(!Tat(t)||xat(t)!=Aat)return!1;var e=Cat(t);if(e===null)return!0;var n=Oat.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Due.call(n)==Iat}var Nue=$at;function Fat(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var Mue=Fat,Lat=SD,Dat=DS,Nat=Object.prototype,Mat=Nat.hasOwnProperty;function Rat(t,e,n){var r=t[e];(!(Mat.call(t,e)&&Dat(r,n))||n===void 0&&!(e in t))&&Lat(t,e,n)}var kD=Rat,zat=kD,Vat=SD;function Bat(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],l=r?r(n[s],t[s],s,n,t):void 0;l===void 0&&(l=t[s]),i?Vat(n,s,l):zat(n,s,l)}return n}var HS=Bat;function jat(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var Hat=jat,Uat=Rl,Wat=U3,Gat=Hat,qat=Object.prototype,Yat=qat.hasOwnProperty;function Kat(t){if(!Uat(t))return Gat(t);var e=Wat(t),n=[];for(var r in t)r=="constructor"&&(e||!Yat.call(t,r))||n.push(r);return n}var Xat=Kat,Jat=Yce,Zat=Xat,Qat=kh;function est(t){return Qat(t)?Jat(t,!0):Zat(t)}var US=est,tst=HS,nst=US;function rst(t){return tst(t,nst(t))}var ist=rst,WG=Oue,ost=$ue,ast=Fue,sst=jS,lst=Lue,GG=MS,qG=fo,cst=kat,ust=RS,fst=NS,dst=Rl,hst=Nue,pst=H3,YG=Mue,gst=ist;function mst(t,e,n,r,i,o,a){var s=YG(t,n),l=YG(e,n),c=a.get(l);if(c){WG(t,n,c);return}var u=o?o(s,l,n+"",t,e,a):void 0,f=u===void 0;if(f){var d=qG(l),h=!d&&ust(l),g=!d&&!h&&pst(l);u=l,d||h||g?qG(s)?u=s:cst(s)?u=sst(s):h?(f=!1,u=ost(l,!0)):g?(f=!1,u=ast(l,!0)):u=[]:hst(l)||GG(l)?(u=s,GG(s)?u=gst(s):(!dst(s)||fst(s))&&(u=lst(l))):f=!1}f&&(a.set(l,u),i(u,l,r,o,a),a.delete(l)),WG(t,n,u)}var vst=mst,yst=j3,bst=Oue,Sst=Iue,_st=vst,wst=Rl,kst=US,xst=Mue;function Rue(t,e,n,r,i){t!==e&&Sst(e,function(o,a){if(i||(i=new yst),wst(o))_st(t,e,a,n,Rue,r,i);else{var s=r?r(xst(t,a),o,a+"",t,e,i):void 0;s===void 0&&(s=o),bst(t,a,s)}},kst)}var zue=Rue;function Cst(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var xD=Cst,Tst=xD,KG=Math.max;function Ast(t,e,n){return e=KG(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=KG(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),Tst(t,this,s)}}var Vue=Ast;function Pst(t){return function(){return t}}var Est=Pst,Ost=Est,XG=Eue,Ist=W3,$st=XG?function(t,e){return XG(t,"toString",{configurable:!0,enumerable:!1,value:Ost(e),writable:!0})}:Ist,Fst=$st,Lst=800,Dst=16,Nst=Date.now;function Mst(t){var e=0,n=0;return function(){var r=Nst(),i=Dst-(r-n);if(n=r,i>0){if(++e>=Lst)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var Bue=Mst,Rst=Fst,zst=Bue,Vst=zst(Rst),CD=Vst,Bst=W3,jst=Vue,Hst=CD;function Ust(t,e){return Hst(jst(t,e,Bst),t+"")}var Wst=Ust,Gst=DS,qst=kh,Yst=zS,Kst=Rl;function Xst(t,e,n){if(!Kst(n))return!1;var r=typeof e;return(r=="number"?qst(n)&&Yst(e,n.length):r=="string"&&e in n)?Gst(n[e],t):!1}var jue=Xst,Jst=Wst,Zst=jue;function Qst(t){return Jst(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=t.length>3&&typeof o=="function"?(i--,o):void 0,a&&Zst(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var s=n[r];s&&t(e,s,r,o)}return e})}var Hue=Qst,elt=zue,tlt=Hue,nlt=tlt(function(t,e,n){elt(t,e,n)}),rlt=nlt;const Bd=pr(rlt);function ilt(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}var TD=ilt,olt=HS,alt=xh;function slt(t,e){return t&&olt(e,alt(e),t)}var Uue=slt,llt=HS,clt=US;function ult(t,e){return t&&llt(e,clt(e),t)}var flt=ult,dlt=HS,hlt=cD;function plt(t,e){return dlt(t,hlt(t),e)}var glt=plt,mlt=lD,vlt=wD,ylt=cD,blt=Gce,Slt=Object.getOwnPropertySymbols,_lt=Slt?function(t){for(var e=[];t;)mlt(e,ylt(t)),t=vlt(t);return e}:blt,Wue=_lt,wlt=HS,klt=Wue;function xlt(t,e){return wlt(t,klt(t),e)}var Clt=xlt,Tlt=Uce,Alt=Wue,Plt=US;function Elt(t){return Tlt(t,Plt,Alt)}var Olt=Elt,Ilt=Object.prototype,$lt=Ilt.hasOwnProperty;function Flt(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&$lt.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var Llt=Flt,Dlt=_D;function Nlt(t,e){var n=e?Dlt(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var Mlt=Nlt,Rlt=/\w*$/;function zlt(t){var e=new t.constructor(t.source,Rlt.exec(t));return e.lastIndex=t.lastIndex,e}var Vlt=zlt,JG=G0,ZG=JG?JG.prototype:void 0,QG=ZG?ZG.valueOf:void 0;function Blt(t){return QG?Object(QG.call(t)):{}}var jlt=Blt,Hlt=_D,Ult=Mlt,Wlt=Vlt,Glt=jlt,qlt=Fue,Ylt="[object Boolean]",Klt="[object Date]",Xlt="[object Map]",Jlt="[object Number]",Zlt="[object RegExp]",Qlt="[object Set]",ect="[object String]",tct="[object Symbol]",nct="[object ArrayBuffer]",rct="[object DataView]",ict="[object Float32Array]",oct="[object Float64Array]",act="[object Int8Array]",sct="[object Int16Array]",lct="[object Int32Array]",cct="[object Uint8Array]",uct="[object Uint8ClampedArray]",fct="[object Uint16Array]",dct="[object Uint32Array]";function hct(t,e,n){var r=t.constructor;switch(e){case nct:return Hlt(t);case Ylt:case Klt:return new r(+t);case rct:return Ult(t,n);case ict:case oct:case act:case sct:case lct:case cct:case uct:case fct:case dct:return qlt(t,n);case Xlt:return new r;case Jlt:case ect:return new r(t);case Zlt:return Wlt(t);case Qlt:return new r;case tct:return Glt(t)}}var pct=hct,gct=Q0,mct=qs,vct="[object Map]";function yct(t){return mct(t)&&gct(t)==vct}var bct=yct,Sct=bct,_ct=fD,eq=dD,tq=eq&&eq.isMap,wct=tq?_ct(tq):Sct,kct=wct,xct=Q0,Cct=qs,Tct="[object Set]";function Act(t){return Cct(t)&&xct(t)==Tct}var Pct=Act,Ect=Pct,Oct=fD,nq=dD,rq=nq&&nq.isSet,Ict=rq?Oct(rq):Ect,$ct=Ict,Fct=j3,Lct=TD,Dct=kD,Nct=Uue,Mct=flt,Rct=$ue,zct=jS,Vct=glt,Bct=Clt,jct=Xce,Hct=Olt,Uct=Q0,Wct=Llt,Gct=pct,qct=Lue,Yct=fo,Kct=RS,Xct=kct,Jct=Rl,Zct=$ct,Qct=xh,eut=US,tut=1,nut=2,rut=4,Gue="[object Arguments]",iut="[object Array]",out="[object Boolean]",aut="[object Date]",sut="[object Error]",que="[object Function]",lut="[object GeneratorFunction]",cut="[object Map]",uut="[object Number]",Yue="[object Object]",fut="[object RegExp]",dut="[object Set]",hut="[object String]",put="[object Symbol]",gut="[object WeakMap]",mut="[object ArrayBuffer]",vut="[object DataView]",yut="[object Float32Array]",but="[object Float64Array]",Sut="[object Int8Array]",_ut="[object Int16Array]",wut="[object Int32Array]",kut="[object Uint8Array]",xut="[object Uint8ClampedArray]",Cut="[object Uint16Array]",Tut="[object Uint32Array]",Mr={};Mr[Gue]=Mr[iut]=Mr[mut]=Mr[vut]=Mr[out]=Mr[aut]=Mr[yut]=Mr[but]=Mr[Sut]=Mr[_ut]=Mr[wut]=Mr[cut]=Mr[uut]=Mr[Yue]=Mr[fut]=Mr[dut]=Mr[hut]=Mr[put]=Mr[kut]=Mr[xut]=Mr[Cut]=Mr[Tut]=!0;Mr[sut]=Mr[que]=Mr[gut]=!1;function Dx(t,e,n,r,i,o){var a,s=e&tut,l=e&nut,c=e&rut;if(n&&(a=i?n(t,r,i,o):n(t)),a!==void 0)return a;if(!Jct(t))return t;var u=Yct(t);if(u){if(a=Wct(t),!s)return zct(t,a)}else{var f=Uct(t),d=f==que||f==lut;if(Kct(t))return Rct(t,s);if(f==Yue||f==Gue||d&&!i){if(a=l||d?{}:qct(t),!s)return l?Bct(t,Mct(a,t)):Vct(t,Nct(a,t))}else{if(!Mr[f])return i?t:{};a=Gct(t,f,s)}}o||(o=new Fct);var h=o.get(t);if(h)return h;o.set(t,a),Zct(t)?t.forEach(function(S){a.add(Dx(S,e,n,S,t,o))}):Xct(t)&&t.forEach(function(S,v){a.set(v,Dx(S,e,n,v,t,o))});var g=c?l?Hct:jct:l?eut:Qct,y=u?void 0:g(t);return Lct(y||t,function(S,v){y&&(v=S,S=t[v]),Dct(a,v,Dx(S,e,n,v,t,o))}),a}var AD=Dx,Aut=AD,Put=1,Eut=4;function Out(t){return Aut(t,Put|Eut)}var Iut=Out;const vc=pr(Iut);var Kue={};(function(t){t.aliasToReal={each:"forEach",eachRight:"forEachRight",entries:"toPairs",entriesIn:"toPairsIn",extend:"assignIn",extendAll:"assignInAll",extendAllWith:"assignInAllWith",extendWith:"assignInWith",first:"head",conforms:"conformsTo",matches:"isMatch",property:"get",__:"placeholder",F:"stubFalse",T:"stubTrue",all:"every",allPass:"overEvery",always:"constant",any:"some",anyPass:"overSome",apply:"spread",assoc:"set",assocPath:"set",complement:"negate",compose:"flowRight",contains:"includes",dissoc:"unset",dissocPath:"unset",dropLast:"dropRight",dropLastWhile:"dropRightWhile",equals:"isEqual",identical:"eq",indexBy:"keyBy",init:"initial",invertObj:"invert",juxt:"over",omitAll:"omit",nAry:"ary",path:"get",pathEq:"matchesProperty",pathOr:"getOr",paths:"at",pickAll:"pick",pipe:"flow",pluck:"map",prop:"get",propEq:"matchesProperty",propOr:"getOr",props:"at",symmetricDifference:"xor",symmetricDifferenceBy:"xorBy",symmetricDifferenceWith:"xorWith",takeLast:"takeRight",takeLastWhile:"takeRightWhile",unapply:"rest",unnest:"flatten",useWith:"overArgs",where:"conformsTo",whereEq:"isMatch",zipObj:"zipObject"},t.aryMethod={1:["assignAll","assignInAll","attempt","castArray","ceil","create","curry","curryRight","defaultsAll","defaultsDeepAll","floor","flow","flowRight","fromPairs","invert","iteratee","memoize","method","mergeAll","methodOf","mixin","nthArg","over","overEvery","overSome","rest","reverse","round","runInContext","spread","template","trim","trimEnd","trimStart","uniqueId","words","zipAll"],2:["add","after","ary","assign","assignAllWith","assignIn","assignInAllWith","at","before","bind","bindAll","bindKey","chunk","cloneDeepWith","cloneWith","concat","conformsTo","countBy","curryN","curryRightN","debounce","defaults","defaultsDeep","defaultTo","delay","difference","divide","drop","dropRight","dropRightWhile","dropWhile","endsWith","eq","every","filter","find","findIndex","findKey","findLast","findLastIndex","findLastKey","flatMap","flatMapDeep","flattenDepth","forEach","forEachRight","forIn","forInRight","forOwn","forOwnRight","get","groupBy","gt","gte","has","hasIn","includes","indexOf","intersection","invertBy","invoke","invokeMap","isEqual","isMatch","join","keyBy","lastIndexOf","lt","lte","map","mapKeys","mapValues","matchesProperty","maxBy","meanBy","merge","mergeAllWith","minBy","multiply","nth","omit","omitBy","overArgs","pad","padEnd","padStart","parseInt","partial","partialRight","partition","pick","pickBy","propertyOf","pull","pullAll","pullAt","random","range","rangeRight","rearg","reject","remove","repeat","restFrom","result","sampleSize","some","sortBy","sortedIndex","sortedIndexOf","sortedLastIndex","sortedLastIndexOf","sortedUniqBy","split","spreadFrom","startsWith","subtract","sumBy","take","takeRight","takeRightWhile","takeWhile","tap","throttle","thru","times","trimChars","trimCharsEnd","trimCharsStart","truncate","union","uniqBy","uniqWith","unset","unzipWith","without","wrap","xor","zip","zipObject","zipObjectDeep"],3:["assignInWith","assignWith","clamp","differenceBy","differenceWith","findFrom","findIndexFrom","findLastFrom","findLastIndexFrom","getOr","includesFrom","indexOfFrom","inRange","intersectionBy","intersectionWith","invokeArgs","invokeArgsMap","isEqualWith","isMatchWith","flatMapDepth","lastIndexOfFrom","mergeWith","orderBy","padChars","padCharsEnd","padCharsStart","pullAllBy","pullAllWith","rangeStep","rangeStepRight","reduce","reduceRight","replace","set","slice","sortedIndexBy","sortedLastIndexBy","transform","unionBy","unionWith","update","xorBy","xorWith","zipWith"],4:["fill","setWith","updateWith"]},t.aryRearg={2:[1,0],3:[2,0,1],4:[3,2,0,1]},t.iterateeAry={dropRightWhile:1,dropWhile:1,every:1,filter:1,find:1,findFrom:1,findIndex:1,findIndexFrom:1,findKey:1,findLast:1,findLastFrom:1,findLastIndex:1,findLastIndexFrom:1,findLastKey:1,flatMap:1,flatMapDeep:1,flatMapDepth:1,forEach:1,forEachRight:1,forIn:1,forInRight:1,forOwn:1,forOwnRight:1,map:1,mapKeys:1,mapValues:1,partition:1,reduce:2,reduceRight:2,reject:1,remove:1,some:1,takeRightWhile:1,takeWhile:1,times:1,transform:2},t.iterateeRearg={mapKeys:[1],reduceRight:[1,0]},t.methodRearg={assignInAllWith:[1,0],assignInWith:[1,2,0],assignAllWith:[1,0],assignWith:[1,2,0],differenceBy:[1,2,0],differenceWith:[1,2,0],getOr:[2,1,0],intersectionBy:[1,2,0],intersectionWith:[1,2,0],isEqualWith:[1,2,0],isMatchWith:[2,1,0],mergeAllWith:[1,0],mergeWith:[1,2,0],padChars:[2,1,0],padCharsEnd:[2,1,0],padCharsStart:[2,1,0],pullAllBy:[2,1,0],pullAllWith:[2,1,0],rangeStep:[1,2,0],rangeStepRight:[1,2,0],setWith:[3,1,2,0],sortedIndexBy:[2,1,0],sortedLastIndexBy:[2,1,0],unionBy:[1,2,0],unionWith:[1,2,0],updateWith:[3,1,2,0],xorBy:[1,2,0],xorWith:[1,2,0],zipWith:[1,2,0]},t.methodSpread={assignAll:{start:0},assignAllWith:{start:0},assignInAll:{start:0},assignInAllWith:{start:0},defaultsAll:{start:0},defaultsDeepAll:{start:0},invokeArgs:{start:2},invokeArgsMap:{start:2},mergeAll:{start:0},mergeAllWith:{start:0},partial:{start:1},partialRight:{start:1},without:{start:1},zipAll:{start:0}},t.mutate={array:{fill:!0,pull:!0,pullAll:!0,pullAllBy:!0,pullAllWith:!0,pullAt:!0,remove:!0,reverse:!0},object:{assign:!0,assignAll:!0,assignAllWith:!0,assignIn:!0,assignInAll:!0,assignInAllWith:!0,assignInWith:!0,assignWith:!0,defaults:!0,defaultsAll:!0,defaultsDeep:!0,defaultsDeepAll:!0,merge:!0,mergeAll:!0,mergeAllWith:!0,mergeWith:!0},set:{set:!0,setWith:!0,unset:!0,update:!0,updateWith:!0}},t.realToAlias=function(){var e=Object.prototype.hasOwnProperty,n=t.aliasToReal,r={};for(var i in n){var o=n[i];e.call(r,o)?r[o].push(i):r[o]=[i]}return r}(),t.remap={assignAll:"assign",assignAllWith:"assignWith",assignInAll:"assignIn",assignInAllWith:"assignInWith",curryN:"curry",curryRightN:"curryRight",defaultsAll:"defaults",defaultsDeepAll:"defaultsDeep",findFrom:"find",findIndexFrom:"findIndex",findLastFrom:"findLast",findLastIndexFrom:"findLastIndex",getOr:"get",includesFrom:"includes",indexOfFrom:"indexOf",invokeArgs:"invoke",invokeArgsMap:"invokeMap",lastIndexOfFrom:"lastIndexOf",mergeAll:"merge",mergeAllWith:"mergeWith",padChars:"pad",padCharsEnd:"padEnd",padCharsStart:"padStart",propertyOf:"get",rangeStep:"range",rangeStepRight:"rangeRight",restFrom:"rest",spreadFrom:"spread",trimChars:"trim",trimCharsEnd:"trimEnd",trimCharsStart:"trimStart",zipAll:"zip"},t.skipFixed={castArray:!0,flow:!0,flowRight:!0,iteratee:!0,mixin:!0,rearg:!0,runInContext:!0},t.skipRearg={add:!0,assign:!0,assignIn:!0,bind:!0,bindKey:!0,concat:!0,difference:!0,divide:!0,eq:!0,gt:!0,gte:!0,isEqual:!0,lt:!0,lte:!0,matchesProperty:!0,merge:!0,multiply:!0,overArgs:!0,partial:!0,partialRight:!0,propertyOf:!0,random:!0,range:!0,rangeRight:!0,subtract:!0,zip:!0,zipObject:!0,zipObjectDeep:!0}})(Kue);var J7,iq;function Xue(){return iq||(iq=1,J7={}),J7}var Ki=Kue,$ut=Xue(),oq=Array.prototype.push;function Fut(t,e){return e==2?function(n,r){return t.apply(void 0,arguments)}:function(n){return t.apply(void 0,arguments)}}function Z7(t,e){return e==2?function(n,r){return t(n,r)}:function(n){return t(n)}}function aq(t){for(var e=t?t.length:0,n=Array(e);e--;)n[e]=t[e];return n}function Lut(t){return function(e){return t({},e)}}function Dut(t,e){return function(){for(var n=arguments.length,r=n-1,i=Array(n);n--;)i[n]=arguments[n];var o=i[e],a=i.slice(0,e);return o&&oq.apply(a,o),e!=r&&oq.apply(a,i.slice(e+1)),t.apply(this,a)}}function Q7(t,e){return function(){var n=arguments.length;if(n){for(var r=Array(n);n--;)r[n]=arguments[n];var i=r[0]=e.apply(void 0,r);return t.apply(void 0,r),i}}}function GO(t,e,n,r){var i=typeof e=="function",o=e===Object(e);if(o&&(r=n,n=e,e=void 0),n==null)throw new TypeError;r||(r={});var a={cap:"cap"in r?r.cap:!0,curry:"curry"in r?r.curry:!0,fixed:"fixed"in r?r.fixed:!0,immutable:"immutable"in r?r.immutable:!0,rearg:"rearg"in r?r.rearg:!0},s=i?n:$ut,l="curry"in r&&r.curry,c="fixed"in r&&r.fixed,u="rearg"in r&&r.rearg,f=i?n.runInContext():void 0,d=i?n:{ary:t.ary,assign:t.assign,clone:t.clone,curry:t.curry,forEach:t.forEach,isArray:t.isArray,isError:t.isError,isFunction:t.isFunction,isWeakMap:t.isWeakMap,iteratee:t.iteratee,keys:t.keys,rearg:t.rearg,toInteger:t.toInteger,toPath:t.toPath},h=d.ary,g=d.assign,y=d.clone,S=d.curry,v=d.forEach,_=d.isArray,x=d.isError,C=d.isFunction,k=d.isWeakMap,m=d.keys,T=d.rearg,E=d.toInteger,I=d.toPath,D=m(Ki.aryMethod),F={castArray:function(W){return function(){var ae=arguments[0];return _(ae)?W(aq(ae)):W.apply(void 0,arguments)}},iteratee:function(W){return function(){var ae=arguments[0],te=arguments[1],ue=W(ae,te),ce=ue.length;return a.cap&&typeof te=="number"?(te=te>2?te-2:1,ce&&ce<=te?ue:Z7(ue,te)):ue}},mixin:function(W){return function(ae){var te=this;if(!C(te))return W(te,Object(ae));var ue=[];return v(m(ae),function(ce){C(ae[ce])&&ue.push([ce,te.prototype[ce]])}),W(te,Object(ae)),v(ue,function(ce){var fe=ce[1];C(fe)?te.prototype[ce[0]]=fe:delete te.prototype[ce[0]]}),te}},nthArg:function(W){return function(ae){var te=ae<0?1:E(ae)+1;return S(W(ae),te)}},rearg:function(W){return function(ae,te){var ue=te?te.length:0;return S(W(ae,te),ue)}},runInContext:function(W){return function(ae){return GO(t,W(ae),r)}}};function R(W,ae){if(a.cap){var te=Ki.iterateeRearg[W];if(te)return Se(ae,te);var ue=!i&&Ki.iterateeAry[W];if(ue)return Pe(ae,ue)}return ae}function z(W,ae,te){return l||a.curry&&te>1?S(ae,te):ae}function B(W,ae,te){if(a.fixed&&(c||!Ki.skipFixed[W])){var ue=Ki.methodSpread[W],ce=ue&&ue.start;return ce===void 0?h(ae,te):Dut(ae,ce)}return ae}function ie(W,ae,te){return a.rearg&&te>1&&(u||!Ki.skipRearg[W])?T(ae,Ki.methodRearg[W]||Ki.aryRearg[te]):ae}function oe(W,ae){ae=I(ae);for(var te=-1,ue=ae.length,ce=ue-1,fe=y(Object(W)),ye=fe;ye!=null&&++te<ue;){var j=ae[te],Y=ye[j];Y!=null&&!(C(Y)||x(Y)||k(Y))&&(ye[j]=y(te==ce?Y:Object(Y))),ye=ye[j]}return fe}function _e(W){return J.runInContext.convert(W)(void 0)}function Ae(W,ae){var te=Ki.aliasToReal[W]||W,ue=Ki.remap[te]||te,ce=r;return function(fe){var ye=i?f:d,j=i?f[ue]:ae,Y=g(g({},ce),fe);return GO(ye,te,j,Y)}}function Pe(W,ae){return se(W,function(te){return typeof te=="function"?Z7(te,ae):te})}function Se(W,ae){return se(W,function(te){var ue=ae.length;return Fut(T(Z7(te,ue),ae),ue)})}function se(W,ae){return function(){var te=arguments.length;if(!te)return W();for(var ue=Array(te);te--;)ue[te]=arguments[te];var ce=a.rearg?0:te-1;return ue[ce]=ae(ue[ce]),W.apply(void 0,ue)}}function ne(W,ae,te){var ue,ce=Ki.aliasToReal[W]||W,fe=ae,ye=F[ce];return ye?fe=ye(ae):a.immutable&&(Ki.mutate.array[ce]?fe=Q7(ae,aq):Ki.mutate.object[ce]?fe=Q7(ae,Lut(ae)):Ki.mutate.set[ce]&&(fe=Q7(ae,oe))),v(D,function(j){return v(Ki.aryMethod[j],function(Y){if(ce==Y){var O=Ki.methodSpread[ce],M=O&&O.afterRearg;return ue=M?B(ce,ie(ce,fe,j),j):ie(ce,B(ce,fe,j),j),ue=R(ce,ue),ue=z(ce,ue,j),!1}}),!ue}),ue||(ue=fe),ue==ae&&(ue=l?S(ue,1):function(){return ae.apply(this,arguments)}),ue.convert=Ae(ce,ae),ue.placeholder=ae.placeholder=te,ue}if(!o)return ne(e,n,s);var J=n,V=[];return v(D,function(W){v(Ki.aryMethod[W],function(ae){var te=J[Ki.remap[ae]||ae];te&&V.push([ae,ne(ae,te,J)])})}),v(m(J),function(W){var ae=J[W];if(typeof ae=="function"){for(var te=V.length;te--;)if(V[te][0]==W)return;ae.convert=Ae(W,ae),V.push([W,ae])}}),v(V,function(W){J[W[0]]=W[1]}),J.convert=_e,J.placeholder=J,v(m(J),function(W){v(Ki.realToAlias[W]||[],function(ae){J[ae]=J[W]})}),J}var Nut=GO,sq=Jce,Mut=sq&&new sq,Jue=Mut,Rut=W3,lq=Jue,zut=lq?function(t,e){return lq.set(t,e),t}:Rut,Zue=zut,Vut=G3,But=Rl;function jut(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Vut(t.prototype),r=t.apply(n,e);return But(r)?r:n}}var q3=jut,Hut=q3,Uut=ys,Wut=1;function Gut(t,e,n){var r=e&Wut,i=Hut(t);function o(){var a=this&&this!==Uut&&this instanceof o?i:t;return a.apply(r?n:this,arguments)}return o}var qut=Gut,Yut=Math.max;function Kut(t,e,n,r){for(var i=-1,o=t.length,a=n.length,s=-1,l=e.length,c=Yut(o-a,0),u=Array(l+c),f=!r;++s<l;)u[s]=e[s];for(;++i<a;)(f||i<o)&&(u[n[i]]=t[i]);for(;c--;)u[s++]=t[i++];return u}var Que=Kut,Xut=Math.max;function Jut(t,e,n,r){for(var i=-1,o=t.length,a=-1,s=n.length,l=-1,c=e.length,u=Xut(o-s,0),f=Array(u+c),d=!r;++i<u;)f[i]=t[i];for(var h=i;++l<c;)f[h+l]=e[l];for(;++a<s;)(d||i<o)&&(f[h+n[a]]=t[i++]);return f}var efe=Jut;function Zut(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}var Qut=Zut;function eft(){}var PD=eft,tft=G3,nft=PD,rft=4294967295;function BC(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=rft,this.__views__=[]}BC.prototype=tft(nft.prototype);BC.prototype.constructor=BC;var ED=BC;function ift(){}var oft=ift,cq=Jue,aft=oft,sft=cq?function(t){return cq.get(t)}:aft,tfe=sft,lft={},cft=lft,uq=cft,uft=Object.prototype,fft=uft.hasOwnProperty;function dft(t){for(var e=t.name+"",n=uq[e],r=fft.call(uq,e)?n.length:0;r--;){var i=n[r],o=i.func;if(o==null||o==t)return i.name}return e}var hft=dft,pft=G3,gft=PD;function jC(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}jC.prototype=pft(gft.prototype);jC.prototype.constructor=jC;var nfe=jC,mft=ED,vft=nfe,yft=jS;function bft(t){if(t instanceof mft)return t.clone();var e=new vft(t.__wrapped__,t.__chain__);return e.__actions__=yft(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Sft=bft,_ft=ED,fq=nfe,wft=PD,kft=fo,xft=qs,Cft=Sft,Tft=Object.prototype,Aft=Tft.hasOwnProperty;function HC(t){if(xft(t)&&!kft(t)&&!(t instanceof _ft)){if(t instanceof fq)return t;if(Aft.call(t,"__wrapped__"))return Cft(t)}return new fq(t)}HC.prototype=wft.prototype;HC.prototype.constructor=HC;var Pft=HC,Eft=ED,Oft=tfe,Ift=hft,$ft=Pft;function Fft(t){var e=Ift(t),n=$ft[e];if(typeof n!="function"||!(e in Eft.prototype))return!1;if(t===n)return!0;var r=Oft(n);return!!r&&t===r[0]}var Lft=Fft,Dft=Zue,Nft=Bue,Mft=Nft(Dft),rfe=Mft,Rft=/\{\n\/\* \[wrapped with (.+)\] \*/,zft=/,? & /;function Vft(t){var e=t.match(Rft);return e?e[1].split(zft):[]}var Bft=Vft,jft=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function Hft(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(jft,`{
/* [wrapped with `+e+`] */
`)}var Uft=Hft;function Wft(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var ife=Wft;function Gft(t){return t!==t}var qft=Gft;function Yft(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var Kft=Yft,Xft=ife,Jft=qft,Zft=Kft;function Qft(t,e,n){return e===e?Zft(t,e,n):Xft(t,Jft,n)}var ofe=Qft,edt=ofe;function tdt(t,e){var n=t==null?0:t.length;return!!n&&edt(t,e,0)>-1}var ndt=tdt,rdt=TD,idt=ndt,odt=1,adt=2,sdt=8,ldt=16,cdt=32,udt=64,fdt=128,ddt=256,hdt=512,pdt=[["ary",fdt],["bind",odt],["bindKey",adt],["curry",sdt],["curryRight",ldt],["flip",hdt],["partial",cdt],["partialRight",udt],["rearg",ddt]];function gdt(t,e){return rdt(pdt,function(n){var r="_."+n[0];e&n[1]&&!idt(t,r)&&t.push(r)}),t.sort()}var mdt=gdt,vdt=Bft,ydt=Uft,bdt=CD,Sdt=mdt;function _dt(t,e,n){var r=e+"";return bdt(t,ydt(r,Sdt(vdt(r),n)))}var afe=_dt,wdt=Lft,kdt=rfe,xdt=afe,Cdt=1,Tdt=2,Adt=4,Pdt=8,dq=32,hq=64;function Edt(t,e,n,r,i,o,a,s,l,c){var u=e&Pdt,f=u?a:void 0,d=u?void 0:a,h=u?o:void 0,g=u?void 0:o;e|=u?dq:hq,e&=~(u?hq:dq),e&Adt||(e&=~(Cdt|Tdt));var y=[t,e,i,h,f,g,d,s,l,c],S=n.apply(void 0,y);return wdt(t)&&kdt(S,y),S.placeholder=r,xdt(S,t,e)}var sfe=Edt;function Odt(t){var e=t;return e.placeholder}var lfe=Odt,Idt=jS,$dt=zS,Fdt=Math.min;function Ldt(t,e){for(var n=t.length,r=Fdt(e.length,n),i=Idt(t);r--;){var o=e[r];t[r]=$dt(o,n)?i[o]:void 0}return t}var Ddt=Ldt,pq="__lodash_placeholder__";function Ndt(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];(a===e||a===pq)&&(t[n]=pq,o[i++]=n)}return o}var OD=Ndt,Mdt=Que,Rdt=efe,zdt=Qut,gq=q3,Vdt=sfe,Bdt=lfe,jdt=Ddt,Hdt=OD,Udt=ys,Wdt=1,Gdt=2,qdt=8,Ydt=16,Kdt=128,Xdt=512;function cfe(t,e,n,r,i,o,a,s,l,c){var u=e&Kdt,f=e&Wdt,d=e&Gdt,h=e&(qdt|Ydt),g=e&Xdt,y=d?void 0:gq(t);function S(){for(var v=arguments.length,_=Array(v),x=v;x--;)_[x]=arguments[x];if(h)var C=Bdt(S),k=zdt(_,C);if(r&&(_=Mdt(_,r,i,h)),o&&(_=Rdt(_,o,a,h)),v-=k,h&&v<c){var m=Hdt(_,C);return Vdt(t,e,cfe,S.placeholder,n,_,m,s,l,c-v)}var T=f?n:this,E=d?T[t]:t;return v=_.length,s?_=jdt(_,s):g&&v>1&&_.reverse(),u&&l<v&&(_.length=l),this&&this!==Udt&&this instanceof S&&(E=y||gq(E)),E.apply(T,_)}return S}var ufe=cfe,Jdt=xD,Zdt=q3,Qdt=ufe,eht=sfe,tht=lfe,nht=OD,rht=ys;function iht(t,e,n){var r=Zdt(t);function i(){for(var o=arguments.length,a=Array(o),s=o,l=tht(i);s--;)a[s]=arguments[s];var c=o<3&&a[0]!==l&&a[o-1]!==l?[]:nht(a,l);if(o-=c.length,o<n)return eht(t,e,Qdt,i.placeholder,void 0,a,c,void 0,void 0,n-o);var u=this&&this!==rht&&this instanceof i?r:t;return Jdt(u,this,a)}return i}var oht=iht,aht=xD,sht=q3,lht=ys,cht=1;function uht(t,e,n,r){var i=e&cht,o=sht(t);function a(){for(var s=-1,l=arguments.length,c=-1,u=r.length,f=Array(u+l),d=this&&this!==lht&&this instanceof a?o:t;++c<u;)f[c]=r[c];for(;l--;)f[c++]=arguments[++s];return aht(d,i?n:this,f)}return a}var fht=uht,dht=Que,hht=efe,mq=OD,vq="__lodash_placeholder__",eE=1,pht=2,ght=4,yq=8,pb=128,bq=256,mht=Math.min;function vht(t,e){var n=t[1],r=e[1],i=n|r,o=i<(eE|pht|pb),a=r==pb&&n==yq||r==pb&&n==bq&&t[7].length<=e[8]||r==(pb|bq)&&e[7].length<=e[8]&&n==yq;if(!(o||a))return t;r&eE&&(t[2]=e[2],i|=n&eE?0:ght);var s=e[3];if(s){var l=t[3];t[3]=l?dht(l,s,e[4]):s,t[4]=l?mq(t[3],vq):e[4]}return s=e[5],s&&(l=t[5],t[5]=l?hht(l,s,e[6]):s,t[6]=l?mq(t[5],vq):e[6]),s=e[7],s&&(t[7]=s),r&pb&&(t[8]=t[8]==null?e[8]:mht(t[8],e[8])),t[9]==null&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}var yht=vht,bht=/\s/;function Sht(t){for(var e=t.length;e--&&bht.test(t.charAt(e)););return e}var _ht=Sht,wht=_ht,kht=/^\s+/;function xht(t){return t&&t.slice(0,wht(t)+1).replace(kht,"")}var Cht=xht,Tht=Cht,Sq=Rl,Aht=q0,_q=0/0,Pht=/^[-+]0x[0-9a-f]+$/i,Eht=/^0b[01]+$/i,Oht=/^0o[0-7]+$/i,Iht=parseInt;function $ht(t){if(typeof t=="number")return t;if(Aht(t))return _q;if(Sq(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Sq(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Tht(t);var n=Eht.test(t);return n||Oht.test(t)?Iht(t.slice(2),n?2:8):Pht.test(t)?_q:+t}var Fht=$ht,Lht=Fht,wq=1/0,Dht=17976931348623157e292;function Nht(t){if(!t)return t===0?t:0;if(t=Lht(t),t===wq||t===-wq){var e=t<0?-1:1;return e*Dht}return t===t?t:0}var ffe=Nht,Mht=ffe;function Rht(t){var e=Mht(t),n=e%1;return e===e?n?e-n:e:0}var Y3=Rht,zht=Zue,Vht=qut,Bht=oht,jht=ufe,Hht=fht,Uht=tfe,Wht=yht,Ght=rfe,qht=afe,kq=Y3,Yht="Expected a function",xq=1,Kht=2,tE=8,nE=16,rE=32,Cq=64,Tq=Math.max;function Xht(t,e,n,r,i,o,a,s){var l=e&Kht;if(!l&&typeof t!="function")throw new TypeError(Yht);var c=r?r.length:0;if(c||(e&=~(rE|Cq),r=i=void 0),a=a===void 0?a:Tq(kq(a),0),s=s===void 0?s:kq(s),c-=i?i.length:0,e&Cq){var u=r,f=i;r=i=void 0}var d=l?void 0:Uht(t),h=[t,e,n,r,i,u,f,o,a,s];if(d&&Wht(h,d),t=h[0],e=h[1],n=h[2],r=h[3],i=h[4],s=h[9]=h[9]===void 0?l?0:t.length:Tq(h[9]-c,0),!s&&e&(tE|nE)&&(e&=~(tE|nE)),!e||e==xq)var g=Vht(t,e,n);else e==tE||e==nE?g=Bht(t,e,s):(e==rE||e==(xq|rE))&&!i.length?g=Hht(t,e,n,r):g=jht.apply(void 0,h);var y=d?zht:Ght;return qht(y(g,h),t,e)}var ID=Xht,Jht=ID,Zht=128;function Qht(t,e,n){return e=n?void 0:e,e=t&&e==null?t.length:e,Jht(t,Zht,void 0,void 0,void 0,void 0,e)}var ept=Qht,tpt=AD,npt=4;function rpt(t){return tpt(t,npt)}var ipt=rpt,opt=ID,apt=8;function $D(t,e,n){e=n?void 0:e;var r=opt(t,apt,void 0,void 0,void 0,void 0,void 0,e);return r.placeholder=$D.placeholder,r}$D.placeholder={};var spt=$D,lpt=wh,cpt=qs,upt=Nue,fpt="[object DOMException]",dpt="[object Error]";function hpt(t){if(!cpt(t))return!1;var e=lpt(t);return e==dpt||e==fpt||typeof t.message=="string"&&typeof t.name=="string"&&!upt(t)}var ppt=hpt,gpt=Q0,mpt=qs,vpt="[object WeakMap]";function ypt(t){return mpt(t)&&gpt(t)==vpt}var bpt=ypt,Spt=AD,_pt=BS,wpt=1;function kpt(t){return _pt(typeof t=="function"?t:Spt(t,wpt))}var xpt=kpt,Aq=G0,Cpt=MS,Tpt=fo,Pq=Aq?Aq.isConcatSpreadable:void 0;function Apt(t){return Tpt(t)||Cpt(t)||!!(Pq&&t&&t[Pq])}var Ppt=Apt,Ept=lD,Opt=Ppt;function dfe(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=Opt),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?dfe(s,e-1,n,r,i):Ept(i,s):r||(i[i.length]=s)}return i}var Ipt=dfe,$pt=Ipt;function Fpt(t){var e=t==null?0:t.length;return e?$pt(t,1):[]}var Lpt=Fpt,Dpt=Lpt,Npt=Vue,Mpt=CD;function Rpt(t){return Mpt(Npt(t,void 0,Dpt),t+"")}var zpt=Rpt,Vpt=ID,Bpt=zpt,jpt=256,Hpt=Bpt(function(t,e){return Vpt(t,jpt,void 0,void 0,void 0,e)}),Upt=Hpt,Wpt=vD,Gpt=jS,qpt=fo,Ypt=q0,Kpt=rue,Xpt=ey,Jpt=VS;function Zpt(t){return qpt(t)?Wpt(t,Xpt):Ypt(t)?[t]:Gpt(Kpt(Jpt(t)))}var Qpt=Zpt,egt={ary:ept,assign:Uue,clone:ipt,curry:spt,forEach:TD,isArray:fo,isError:ppt,isFunction:NS,isWeakMap:bpt,iteratee:xpt,keys:hD,rearg:Upt,toInteger:Y3,toPath:Qpt},tgt=Nut,ngt=egt;function rgt(t,e,n){return tgt(ngt,t,e,n)}var igt=rgt,iE,Eq;function ogt(){if(Eq)return iE;Eq=1;var t=kD,e=yD,n=zS,r=Rl,i=ey;function o(a,s,l,c){if(!r(a))return a;s=e(s,a);for(var u=-1,f=s.length,d=f-1,h=a;h!=null&&++u<f;){var g=i(s[u]),y=l;if(g==="__proto__"||g==="constructor"||g==="prototype")return a;if(u!=d){var S=h[g];y=c?c(S,g,h):void 0,y===void 0&&(y=r(S)?S:n(s[u+1])?[]:{})}t(h,g,y),h=h[g]}return a}return iE=o,iE}var oE,Oq;function agt(){if(Oq)return oE;Oq=1;var t=ogt();function e(n,r,i){return n==null?n:t(n,r,i)}return oE=e,oE}var sgt=igt,hfe=sgt("set",agt());hfe.placeholder=Xue();var lgt=hfe;const cgt=pr(lgt);var ugt=Iue,fgt=xh;function dgt(t,e){return t&&ugt(t,e,fgt)}var hgt=dgt,pgt=kh;function ggt(t,e){return function(n,r){if(n==null)return n;if(!pgt(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Object(n);(e?o--:++o<i)&&r(a[o],o,a)!==!1;);return n}}var mgt=ggt,vgt=hgt,ygt=mgt,bgt=ygt(vgt),Sgt=bgt,_gt=Sgt;function wgt(t,e){var n=[];return _gt(t,function(r,i,o){e(r,i,o)&&n.push(r)}),n}var kgt=wgt,xgt=Wce,Cgt=kgt,Tgt=BS,Agt=fo;function Pgt(t,e){var n=Agt(t)?xgt:Cgt;return n(t,Tgt(e))}var Egt=Pgt;const Iq=pr(Egt);var Ogt=pD;function Igt(t,e){return Ogt(t,e)}var $gt=Igt;const pfe=pr($gt);var Fgt=wh,Lgt=fo,Dgt=qs,Ngt="[object String]";function Mgt(t){return typeof t=="string"||!Lgt(t)&&Dgt(t)&&Fgt(t)==Ngt}var Rgt=Mgt,zgt=vD;function Vgt(t,e){return zgt(e,function(n){return t[n]})}var Bgt=Vgt,jgt=Bgt,Hgt=xh;function Ugt(t){return t==null?[]:jgt(t,Hgt(t))}var Wgt=Ugt,Ggt=ofe,qgt=kh,Ygt=Rgt,Kgt=Y3,Xgt=Wgt,Jgt=Math.max;function Zgt(t,e,n,r){t=qgt(t)?t:Xgt(t),n=n&&!r?Kgt(n):0;var i=t.length;return n<0&&(n=Jgt(i+n,0)),Ygt(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Ggt(t,e,n)>-1}var Qgt=Zgt;const emt=pr(Qgt);var tmt=BS,nmt=kh,rmt=xh;function imt(t){return function(e,n,r){var i=Object(e);if(!nmt(e)){var o=tmt(n);e=rmt(e),n=function(s){return o(i[s],s,i)}}var a=t(e,n,r);return a>-1?i[o?e[a]:a]:void 0}}var omt=imt,amt=ife,smt=BS,lmt=Y3,cmt=Math.max;function umt(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:lmt(n);return i<0&&(i=cmt(r+i,0)),amt(t,smt(e),i)}var fmt=umt,dmt=omt,hmt=fmt,pmt=dmt(hmt),gmt=pmt;const gfe=pr(gmt);var mmt=Math.ceil,vmt=Math.max;function ymt(t,e,n,r){for(var i=-1,o=vmt(mmt((e-t)/(n||1)),0),a=Array(o);o--;)a[r?o:++i]=t,t+=n;return a}var bmt=ymt,Smt=bmt,_mt=jue,aE=ffe;function wmt(t){return function(e,n,r){return r&&typeof r!="number"&&_mt(e,n,r)&&(n=r=void 0),e=aE(e),n===void 0?(n=e,e=0):n=aE(n),r=r===void 0?e<n?1:-1:aE(r),Smt(e,n,r,t)}}var kmt=wmt,xmt=kmt,Cmt=xmt(),Tmt=Cmt;const Amt=pr(Tmt);var Pmt=Object.prototype,Emt=Pmt.hasOwnProperty;function Omt(t,e){return t!=null&&Emt.call(t,e)}var Imt=Omt,$mt=Imt,Fmt=sue;function Lmt(t,e){return t!=null&&Fmt(t,e,$mt)}var Dmt=Lmt;const Nmt=pr(Dmt);var qO={exports:{}},mfe={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.formatNames=t.fastFormats=t.fullFormats=void 0;function e(I,D){return{validate:I,compare:D}}t.fullFormats={date:e(o,a),time:e(l,c),"date-time":e(f,d),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:y,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:E,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:v,int32:{type:"number",validate:C},int64:{type:"number",validate:k},float:{type:"number",validate:m},double:{type:"number",validate:m},password:!0,binary:!0},t.fastFormats={...t.fullFormats,date:e(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,a),time:e(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,c),"date-time":e(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,d),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},t.formatNames=Object.keys(t.fullFormats);function n(I){return I%4===0&&(I%100!==0||I%400===0)}const r=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,i=[0,31,28,31,30,31,30,31,31,30,31,30,31];function o(I){const D=r.exec(I);if(!D)return!1;const F=+D[1],R=+D[2],z=+D[3];return R>=1&&R<=12&&z>=1&&z<=(R===2&&n(F)?29:i[R])}function a(I,D){if(I&&D)return I>D?1:I<D?-1:0}const s=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function l(I,D){const F=s.exec(I);if(!F)return!1;const R=+F[1],z=+F[2],B=+F[3],ie=F[5];return(R<=23&&z<=59&&B<=59||R===23&&z===59&&B===60)&&(!D||ie!=="")}function c(I,D){if(!(I&&D))return;const F=s.exec(I),R=s.exec(D);if(F&&R)return I=F[1]+F[2]+F[3]+(F[4]||""),D=R[1]+R[2]+R[3]+(R[4]||""),I>D?1:I<D?-1:0}const u=/t|\s/i;function f(I){const D=I.split(u);return D.length===2&&o(D[0])&&l(D[1],!0)}function d(I,D){if(!(I&&D))return;const[F,R]=I.split(u),[z,B]=D.split(u),ie=a(F,z);if(ie!==void 0)return ie||c(R,B)}const h=/\/|:/,g=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function y(I){return h.test(I)&&g.test(I)}const S=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function v(I){return S.lastIndex=0,S.test(I)}const _=-(2**31),x=2**31-1;function C(I){return Number.isInteger(I)&&I<=x&&I>=_}function k(I){return Number.isInteger(I)}function m(){return!0}const T=/[^\\]\\Z/;function E(I){if(T.test(I))return!1;try{return new RegExp(I),!0}catch{return!1}}})(mfe);var vfe={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.formatLimitDefinition=void 0;const e=Cie,n=_n,r=n.operators,i={formatMaximum:{okStr:"<=",ok:r.LTE,fail:r.GT},formatMinimum:{okStr:">=",ok:r.GTE,fail:r.LT},formatExclusiveMaximum:{okStr:"<",ok:r.LT,fail:r.GTE},formatExclusiveMinimum:{okStr:">",ok:r.GT,fail:r.LTE}},o={message:({keyword:s,schemaCode:l})=>n.str`should be ${i[s].okStr} ${l}`,params:({keyword:s,schemaCode:l})=>n._`{comparison: ${i[s].okStr}, limit: ${l}}`};t.formatLimitDefinition={keyword:Object.keys(i),type:"string",schemaType:"string",$data:!0,error:o,code(s){const{gen:l,data:c,schemaCode:u,keyword:f,it:d}=s,{opts:h,self:g}=d;if(!h.validateFormats)return;const y=new e.KeywordCxt(d,g.RULES.all.format.definition,"format");y.$data?S():v();function S(){const x=l.scopeValue("formats",{ref:g.formats,code:h.code.formats}),C=l.const("fmt",n._`${x}[${y.schemaCode}]`);s.fail$data(n.or(n._`typeof ${C} != "object"`,n._`${C} instanceof RegExp`,n._`typeof ${C}.compare != "function"`,_(C)))}function v(){const x=y.schema,C=g.formats[x];if(!C||C===!0)return;if(typeof C!="object"||C instanceof RegExp||typeof C.compare!="function")throw new Error(`"${f}": format "${x}" does not define "compare" function`);const k=l.scopeValue("formats",{key:x,ref:C,code:h.code.formats?n._`${h.code.formats}${n.getProperty(x)}`:void 0});s.fail$data(_(k))}function _(x){return n._`${x}.compare(${c}, ${u}) ${i[f].fail} 0`}},dependencies:["format"]};const a=s=>(s.addKeyword(t.formatLimitDefinition),s);t.default=a})(vfe);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});const n=mfe,r=vfe,i=_n,o=new i.Name("fullFormats"),a=new i.Name("fastFormats"),s=(c,u={keywords:!0})=>{if(Array.isArray(u))return l(c,u,n.fullFormats,o),c;const[f,d]=u.mode==="fast"?[n.fastFormats,a]:[n.fullFormats,o],h=u.formats||n.formatNames;return l(c,h,f,d),u.keywords&&r.default(c),c};s.get=(c,u="full")=>{const d=(u==="fast"?n.fastFormats:n.fullFormats)[c];if(!d)throw new Error(`Unknown format "${c}"`);return d};function l(c,u,f,d){var h,g;(h=(g=c.opts.code).formats)!==null&&h!==void 0||(g.formats=i._`require("ajv-formats/dist/formats").${d}`);for(const y of u)c.addFormat(y,f[y])}t.exports=e=s,Object.defineProperty(e,"__esModule",{value:!0}),e.default=s})(qO,qO.exports);var Mmt=qO.exports;const Rmt=pr(Mmt),Nx="additionalProperties",Mx="required",zmt=(t,e)=>{const n={};return t.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:(n[i]=!0,!0)})};class Vmt{constructor(e){this.findOption=e,this.schemaObject=n=>{const r=this.properties(n),i={type:"object",properties:r,additionalProperties:this.findOption(r)(Nx)},o=this.findOption(r)(Mx);return o.length>0&&(i.required=o),i},this.properties=n=>{const r={};return Object.keys(n).reduce((i,o)=>(i[o]=this.property(n[o]),i),r)},this.property=n=>{switch(typeof n){case"string":return{type:"string"};case"boolean":return{type:"boolean"};case"number":return Number.isInteger(n)?{type:"integer"}:{type:"number"};case"object":return n==null?{type:"null"}:this.schemaObjectOrArray(n);default:return{}}},this.schemaObjectOrArray=n=>n instanceof Array?this.schemaArray(n):this.schemaObject(n),this.schemaArray=n=>{if(n.length>0){const r=n.map(this.property),i=zmt(r,o=>JSON.stringify(o));return i.length===1?{type:"array",items:i[0]}:{type:"array",items:{oneOf:i}}}else return{type:"array",items:{}}}}}const yfe=(t,e={})=>{const n=i=>o=>{switch(o){case Nx:return Object.prototype.hasOwnProperty.call(e,Nx)?e[Nx]:!0;case Mx:return Object.prototype.hasOwnProperty.call(e,Mx)?e[Mx](i):Object.keys(i);default:return}};return new Vmt(n).schemaObject(t)};var Su;(function(t){t.HIDE="HIDE",t.SHOW="SHOW",t.ENABLE="ENABLE",t.DISABLE="DISABLE"})(Su||(Su={}));const bfe=t=>typeof t=="object"&&t!==null&&typeof t.i18n=="string",Bmt=t=>t.type==="Group",FD=t=>t.elements!==void 0,jmt=t=>!!t&&typeof t=="object",Hmt=t=>jmt(t)&&typeof t.scope=="string",Umt=t=>!!t&&typeof t=="object",Sfe=(t,e,n)=>{const r=e+n;if(r<0||r>=t.length)return;const i=[e,r].sort((o,a)=>o-a);t.splice(i[0],2,t[i[1]],t[i[0]])},Wmt=(t,e)=>{Sfe(t,e,-1)},Gmt=(t,e)=>{Sfe(t,e,1)},qmt={restrict:!1,trim:!1,showUnfocusedDescription:!1,hideRequiredAsterisk:!1},$q=(t={})=>Bd({},qmt,t),Fq=(t=$q(),e)=>{switch(e.type){case XD:return $q(e.config);default:return t}},Hu=(t,e)=>t===void 0?[]:t(e)?[]:t.errors,Ymt={data:{},schema:{},uischema:void 0,errors:[],validator:void 0,ajv:void 0,validationMode:"ValidateAndShow",additionalErrors:[]},YO=(t,e)=>((Object.prototype.hasOwnProperty.call(e,"id")||Object.prototype.hasOwnProperty.call(e,"$id"))&&t.removeSchema(e),t),Lq=(t,e)=>{if(e){if(Kmt(e.options))return e.options.ajv;if(e.options!==void 0&&jXe(e.options.compile))return e.options}return t.ajv?e!=null&&e.schema?YO(t.ajv,e.schema):t.ajv:s0t()},Kmt=t=>t?t.ajv!==void 0:!1,Dq=(t,e)=>e&&Xmt(e.options)?e.options.validationMode:t.validationMode,Xmt=t=>t?t.validationMode!==void 0:!1,Jmt=t=>t?t.additionalErrors!==void 0:!1,Nq=(t,e)=>e&&Jmt(e.options)?e.options.additionalErrors:t.additionalErrors,sE=(t=Ymt,e)=>{switch(e.type){case WD:{const n=Lq(t,e),r=Dq(t,e),i=r==="NoValidation"?void 0:n.compile(e.schema),o=Hu(i,e.data),a=Nq(t,e);return{...t,data:e.data,schema:e.schema,uischema:e.uischema,additionalErrors:a,errors:o,validator:i,ajv:n,validationMode:r}}case GD:{const n=Lq(t,e),r=Dq(t,e);let i=t.validator,o=t.errors;t.schema!==e.schema||t.validationMode!==r||t.ajv!==n?(i=r==="NoValidation"?void 0:n.compile(e.schema),o=Hu(i,e.data)):t.data!==e.data&&(o=Hu(i,e.data));const a=Nq(t,e);return t.data!==e.data||t.schema!==e.schema||t.uischema!==e.uischema||t.ajv!==n||t.errors!==o||t.validator!==i||t.validationMode!==r||t.additionalErrors!==a?{...t,data:e.data,schema:e.schema,uischema:e.uischema,ajv:n,errors:pfe(o,t.errors)?t.errors:o,validator:i,validationMode:r,additionalErrors:a}:t}case qD:{const n=e.ajv,r=t.validationMode==="NoValidation"?void 0:n.compile(t.schema),i=Hu(r,t.data);return{...t,validator:r,errors:i}}case JD:{const r=e.schema&&t.ajv&&t.validationMode!=="NoValidation"?YO(t.ajv,e.schema).compile(e.schema):t.validator,i=Hu(r,t.data);return{...t,validator:r,schema:e.schema,errors:i}}case ZD:return{...t,uischema:e.uischema};case YD:{if(e.path===void 0||e.path===null)return t;if(e.path===""){const n=e.updater(vc(t.data)),r=Hu(t.validator,n);return{...t,data:n,errors:r}}else{const n=ra(t.data,e.path),r=e.updater(vc(n)),i=cgt(e.path,r,t.data===void 0?{}:t.data),o=Hu(t.validator,i);return{...t,data:i,errors:o}}}case KD:return{...t,errors:e.errors};case QD:{if(t.validationMode===e.validationMode)return t;if(e.validationMode==="NoValidation"){const n=Hu(void 0,t.data);return{...t,errors:n,validationMode:e.validationMode}}if(t.validationMode==="NoValidation"){const n=YO(t.ajv,t.schema).compile(t.schema),r=Hu(n,t.data);return{...t,validator:n,errors:r,validationMode:e.validationMode}}return{...t,validationMode:e.validationMode}}default:return t}},Zmt=t=>ra(t,"data"),Qmt=t=>ra(t,"schema"),evt=t=>ra(t,"uischema"),tvt=t=>ra(t,"ajv"),nvt=t=>{switch(t.keyword){case"required":case"dependencies":return t.params.missingProperty;case"additionalProperties":return t.params.additionalProperty;default:return}},KO=t=>{let e=t.dataPath||t.instancePath||"";e=e.replace(/\//g,".");const n=nvt(t);return n!==void 0&&!e.endsWith(n)&&(e=`${e}.${n}`),e=e.replace(/^./,""),e=Z3(e),e},rvt=(t,e,n)=>r=>{const i=Iq(r,o=>o.keyword==="oneOf"||o.keyword==="anyOf").map(o=>KO(o));return Iq(r,o=>{if(ovt.indexOf(o.keyword)!==-1&&!ZO(o.parentSchema))return!1;const a=KO(o);let s=n(a);const l=o.parentSchema;return s&&!ivt(l)&&!ZO(l)&&i.findIndex(c=>t.startsWith(c))!==-1&&(s=s&&pfe(l,e)),s})},ivt=t=>(t==null?void 0:t.type)==="object"||!!(t!=null&&t.properties),ovt=["additionalProperties","allOf","anyOf","oneOf"],_fe=(t,e,n)=>r=>{const i=r.errors??[],o=r.additionalErrors??[];return rvt(t,e,n)(r.validationMode==="ValidateAndHide"?o:[...i,...o])},avt=(t,e)=>_fe(t,e,n=>n===t),svt=(t,e)=>_fe(t,e,n=>n.startsWith(t+".")),LD=(t,e)=>bfe(e)?e.i18n:(t==null?void 0:t.i18n)??void 0,lvt=t=>(t==null?void 0:t.split(".").filter(e=>!/^\d+$/.test(e)).join("."))||"root",P2=(t,e,n)=>LD(t,e)??lvt(n),UC=(t,e,n,r)=>`${P2(t,e,n)}.${r}`,cvt=(t,e)=>`${t}.${e}`,DD=(t,e)=>e,ND=(t,e,n)=>{var s;const r=UC(t.parentSchema,n,KO(t),`error.${t.keyword}`),i=e(r,void 0,{error:t});if(i!==void 0)return i;const o=e(`error.${t.keyword}`,void 0,{error:t});if(o!==void 0)return o;const a=e(t.message,void 0,{error:t});return a!==void 0?a:t.keyword==="required"&&((s=t.message)!=null&&s.startsWith("must have required property"))?e("is a required property","is a required property",{error:t}):t.message},wfe=(t,e,n,r,i,o)=>{if(t.length>0&&n){const a=UC(r,i,o,"error.custom"),s=n(a,void 0,{schema:r,uischema:i,path:o,errors:t});if(s!==void 0)return s}return Vvt(t.map(a=>e(a,n,i)))},uvt=(t,e)=>{if(t.label===!1||(t.label===void 0||t.label===null||t.label===!0)&&!bfe(t))return;const n=typeof t.label=="string"?t.label:JSON.stringify(t.label),r=LD(void 0,t),i=typeof r=="string"?`${r}.label`:n;return e(i,n,{uischema:t})},fvt=(t,e,n,r)=>{const i={};return e.forEach(o=>{const a=cvt(n,o.key);i[o.key]=t(a,o.default(r))}),i};var Bo;(function(t){t.addTooltip="addTooltip",t.addAriaLabel="addAriaLabel",t.removeTooltip="removeTooltip",t.upAriaLabel="upAriaLabel",t.downAriaLabel="downAriaLabel",t.noSelection="noSelection",t.removeAriaLabel="removeAriaLabel",t.noDataMessage="noDataMessage",t.deleteDialogTitle="deleteDialogTitle",t.deleteDialogMessage="deleteDialogMessage",t.deleteDialogAccept="deleteDialogAccept",t.deleteDialogDecline="deleteDialogDecline",t.up="up",t.down="down"})(Bo||(Bo={}));const dvt=[{key:Bo.addTooltip,default:t=>t?`Add to ${t}`:"Add"},{key:Bo.addAriaLabel,default:t=>t?`Add to ${t} button`:"Add button"},{key:Bo.removeTooltip,default:()=>"Delete"},{key:Bo.removeAriaLabel,default:()=>"Delete button"},{key:Bo.upAriaLabel,default:()=>"Move item up"},{key:Bo.up,default:()=>"Up"},{key:Bo.down,default:()=>"Down"},{key:Bo.downAriaLabel,default:()=>"Move item down"},{key:Bo.noDataMessage,default:()=>"No data"},{key:Bo.noSelection,default:()=>"No selection"},{key:Bo.deleteDialogTitle,default:()=>"Confirm Deletion"},{key:Bo.deleteDialogMessage,default:()=>"Are you sure you want to delete the selected entry?"},{key:Bo.deleteDialogAccept,default:()=>"Yes"},{key:Bo.deleteDialogDecline,default:()=>"No"}],zk={locale:"en",translate:DD,translateError:ND},Mq=(t=zk,e)=>{switch(e.type){case nN:{const n=e.locale??zk.locale,r=e.translator??zk.translate,i=e.errorTranslator??zk.translateError;return n!==t.locale||r!==t.translate||i!==t.translateError?{...t,locale:n,translate:r,translateError:i}:t}case tN:return{...t,translate:e.translator??DD,translateError:e.errorTranslator??ND};case eN:return{...t,locale:e.locale??navigator.languages[0]};default:return t}},hvt=t=>t===void 0?DD:t.translate,pvt=t=>t===void 0?ND:t.translateError,kfe=-1,gvt=t=>!or(t)&&t.scope!==void 0,E2=t=>(e,n,r)=>{if(or(e)||!gvt(e)||or(n))return!1;const i=e.scope;if(or(i))return!1;let o=n;return HD(n,"object")&&(o=O2(n,i,r==null?void 0:r.rootSchema)),o===void 0?!1:t(o,r==null?void 0:r.rootSchema)},WS=t=>E2(e=>!or(e)&&HD(e,t)),MD=t=>E2(e=>!or(e)&&e.format===t&&HD(e,"string")),zl=t=>e=>!or(e)&&e.type===t,K3=(t,e)=>n=>{if(or(n))return!1;const r=n.options;return!or(r)&&r[t]===e},Vl=(...t)=>(e,n,r)=>t.reduce((i,o)=>i&&o(e,n,r),!0),X3=(...t)=>(e,n,r)=>t.reduce((i,o)=>i||o(e,n,r),!1),bs=(t,e)=>(n,r,i)=>e(n,r,i)?t:kfe,mvt=Vl(zl("Control"),WS("boolean")),vvt=Vl(zl("Control"),X3(E2(t=>Object.prototype.hasOwnProperty.call(t,"enum")),E2(t=>Object.prototype.hasOwnProperty.call(t,"const")))),yvt=Vl(zl("Control"),E2(t=>ZO(t))),bvt=Vl(zl("Control"),WS("integer")),Svt=Vl(zl("Control"),WS("number")),xfe=Vl(zl("Control"),WS("string")),_vt=Vl(zl("Control"),K3("multi",!0)),wvt=Vl(zl("Control"),X3(MD("date"),K3("format","date"))),kvt=Vl(zl("Control"),X3(MD("time"),K3("format","time"))),xvt=Vl(zl("Control"),X3(MD("date-time"),K3("format","date-time"))),Cvt=t=>(e,n,r)=>{const i=bD(t,o=>o.tester(e,n,r));if(i!==void 0&&i.tester(e,n,r)!==kfe)return i.uischema},Tvt=(t,e,n,r,i="VerticalLayout",o,a)=>{if(o&&o.options&&o.options.detail){if(typeof o.options.detail=="string"){if(o.options.detail.toUpperCase()==="GENERATE")return typeof i=="function"?i():Mp.uiSchema(e,i)}else if(typeof o.options.detail=="object"&&o.options.detail.type&&typeof o.options.detail.type=="string")return o.options.detail}const s=Cvt(t)(e,n,r);return s===void 0?typeof i=="function"?i():Mp.uiSchema(e,i,"#",a):s},Cfe=(t,e)=>n=>avt(t,e)(n.jsonforms.core),Avt=(t,e)=>n=>svt(t,e)(n.jsonforms.core),Dg=t=>t.jsonforms.config,fh=()=>t=>hvt(ra(t,"jsonforms.i18n")),Tfe=()=>t=>pvt(ra(t,"jsonforms.i18n")),J3=t=>Zmt(ra(t,"jsonforms.core")),WC=t=>Qmt(ra(t,"jsonforms.core")),Pvt=t=>evt(ra(t,"jsonforms.core")),GS=t=>tvt(ra(t,"jsonforms.core")),RD=t=>ra(t,"jsonforms.renderers"),zD=t=>ra(t,"jsonforms.cells"),VD=(t,e)=>{let n=t;return!or(t)&&!or(e)&&!e.startsWith("[")&&(n=t+"."),or(n)?e:or(e)?n:`${n}${e}`},Evt=t=>{const r=t.replace(/(anyOf|allOf|oneOf)\/[\d]\//g,"").replace(/(then|else)\//g,"").split("/").map(Z3),o=r[0]==="#"||r[0]===""?2:1;return Amt(o,r.length,2).map(a=>r[a])},Afe=(t,e)=>{if(!Hmt(t))return e??"";const n=Evt(t.scope);return or(n)?e??"":VD(e,n.join("."))},Ovt=t=>t==null?void 0:t.replace(/~/g,"~0").replace(/\//g,"~1"),Z3=t=>t==null?void 0:t.replace(/~1/g,"/").replace(/~0/,"~"),XO=(t,e)=>or(e)?t:e.split(".").reduce((r,i)=>{if(!(!r||!Object.prototype.hasOwnProperty.call(r,i)))return r[i]},t),Ivt=t=>t==="#"||t===void 0||t==="",O2=(t,e,n)=>{const r=e==null?void 0:e.split("/").map(Z3);return Rx(t,r,n)},Rx=(t,e,n)=>{if(or(t))return;if(t.$ref&&(t=O2(n,t.$ref,n)),!e||e.length===0)return t;const[r,...i]=e;if(Ivt(r))return Rx(t,i,n);const o=ra(t,r),a=Rx(o,i,n);if(a)return a;if(r==="properties"||r==="items"){let s;const l=[].concat(t.oneOf??[],t.allOf??[],t.anyOf??[],t.then??[],t.else??[]);for(const c of l)if(s=Rx(c,[r,...i],n),s)break;return s}},$vt=t=>t.type==="OR",Fvt=t=>t.type==="AND",Lvt=t=>t.type==="LEAF",Dvt=t=>Nmt(t,"schema"),Rq=(t,e)=>Afe(t,e),JO=(t,e,n,r)=>{if(Fvt(e))return e.conditions.reduce((i,o)=>i&&JO(t,o,n,r),!0);if($vt(e))return e.conditions.reduce((i,o)=>i||JO(t,o,n,r),!1);if(Lvt(e))return XO(t,Rq(e,n))===e.expectedValue;if(Dvt(e)){const i=XO(t,Rq(e,n));return r.validate(e.schema,i)}else return!0},Pfe=(t,e,n,r)=>{const i=t.rule.condition;return JO(e,i,n,r)},Nvt=(t,e,n=void 0,r)=>{const i=Pfe(t,e,n,r);switch(t.rule.effect){case Su.HIDE:return!i;case Su.SHOW:return i;default:return!0}},Mvt=(t,e,n=void 0,r)=>{const i=Pfe(t,e,n,r);switch(t.rule.effect){case Su.DISABLE:return!i;case Su.ENABLE:return i;default:return!0}},BD=t=>!!(t.rule&&(t.rule.effect===Su.SHOW||t.rule.effect===Su.HIDE)),Rvt=t=>!!(t.rule&&(t.rule.effect===Su.ENABLE||t.rule.effect===Su.DISABLE)),Q3=(t,e,n=void 0,r)=>t.rule?Nvt(t,e,n,r):!0,zvt=(t,e,n=void 0,r)=>t.rule?Mvt(t,e,n,r):!0,jD=(t,e,n,r,i,o)=>{var a,s,l;return(a=t==null?void 0:t.jsonforms)!=null&&a.readonly?!1:n&&Rvt(n)?zvt(n,i,e==null?void 0:e.path,GS(t)):typeof((s=n==null?void 0:n.options)==null?void 0:s.readonly)=="boolean"?!n.options.readonly:typeof((l=n==null?void 0:n.options)==null?void 0:l.readOnly)=="boolean"?!n.options.readOnly:typeof(o==null?void 0:o.readonly)=="boolean"?!o.readonly:typeof(o==null?void 0:o.readOnly)=="boolean"?!o.readOnly:(r==null?void 0:r.readOnly)===!0?!1:typeof(e==null?void 0:e.enabled)=="boolean"?e.enabled:!0},Vvt=t=>t==null?"":t.join(`
`),HD=(t,e)=>emt(GC(t),e),GC=t=>{if(or(t))return[];if(!or(t.type)&&typeof t.type=="string")return[t.type];if(SQe(t.type))return t.type;if(!or(t.properties)||!or(t.additionalProperties))return["object"];if(!or(t.items))return["array"];if(!or(t.allOf)){const e=gfe(t.allOf,n=>GC(n).length!==0);if(e)return GC(e)}return[]},Ng={schema:O2,data:XO},lE=(t,e)=>{if(e&&typeof e.title=="string")return e.title;if(typeof t.scope=="string"){const n=t.scope,r=Z3(n.substr(n.lastIndexOf("/")+1));return Pue(r)}return""},Bvt=(t,e)=>{const n=t.label;if(typeof n=="boolean")return Vk(lE(t,e),n);if(typeof n=="string")return Vk(n,!0);if(typeof n=="object"){const r=typeof n.text=="string"?n.text:lE(t,e),i=typeof n.show=="boolean"?n.show:!0;return Vk(r,i)}return Vk(lE(t,e),!0)},Vk=(t,e)=>({text:t,show:e}),jvt=(t,e,n)=>{const r=e.split("/"),i=r[r.length-1],a=r.slice(0,r.length-2).join("/"),s=Ng.schema(t,a,n);return s!==void 0&&s.required!==void 0&&s.required.indexOf(i)!==-1},Hvt=(t,e,n)=>`${t??""}${e&&!n?"*":""}`,zq=t=>{switch(t.type){case"string":return t.format==="date-time"||t.format==="date"||t.format==="time"?new Date:"";case"integer":case"number":return 0;case"boolean":return!1;case"array":return[];case"null":return null;default:return{}}},Uvt=(t,e,n,r)=>e===void 0||e!==void 0&&!t||!r&&!n,Vq=(t,e,n)=>{let r=typeof t=="string"?t:JSON.stringify(t);return e&&(n?r=e(`${n}.${r}`,r):r=e(r,r)),{label:r,value:t}},Wvt=(t,e,n)=>{let r=t.title??(typeof t.const=="string"?t.const:JSON.stringify(t.const));return e&&(t.i18n?r=e(t.i18n,r):n?r=e(`${n}.${r}`,r):r=e(r,r)),{label:r,value:t.const}},eA=(t,e)=>{const{uischema:n}=e,r=J3(t),i=Afe(n,e.path),o=e.visible===void 0||BD(n)?Q3(n,r,e.path,GS(t)):e.visible,a=n,s=e.id,l=WC(t),c=a.scope!==void 0&&jvt(e.schema,a.scope,l),u=Ng.schema(e.schema||l,a.scope,l),f=Cfe(i,u)(t),d=u!==void 0?u.description:"",h=Ng.data(r,i),g=Bvt(n,u),y=g.show?g.text:"",S=Dg(t),v=jD(t,e,n,u||l,r,S),_=u??l,x=fh()(t),C=Tfe()(t),k=P2(_,n,i),m=x(UC(_,n,i,"label"),y,{schema:_,uischema:n,path:i,errors:f}),T=x(UC(_,n,i,"description"),d,{schema:_,uischema:n,path:i,errors:f}),E=wfe(f,C,x,_,n,i);return{data:h,description:T,errors:E,label:m,visible:o,enabled:v,id:s,path:i,required:c,uischema:n,schema:_,config:Dg(t),cells:e.cells||t.jsonforms.cells,rootSchema:l,i18nKeyPrefix:k}},tA=t=>({handleChange(e,n){t(bv(e,()=>n))}}),Gvt=(t,e)=>{var i;const n=eA(t,e),r=e.options||((i=n.schema.enum)==null?void 0:i.map(o=>Vq(o,fh()(t),P2(n.schema,n.uischema,n.path))))||n.schema.const&&[Vq(n.schema.const,fh()(t),P2(n.schema,n.uischema,n.path))];return{...n,options:r}},qvt=(t,e)=>{var i;const n=eA(t,e),r=e.options||((i=n.schema.oneOf)==null?void 0:i.map(o=>Wvt(o,fh()(t),P2(n.schema,n.uischema,n.path))));return{...n,options:r}},Yvt=(t,e)=>{const{...n}=eA(t,e);return{...n,uischemas:t.jsonforms.uischemas}},Kvt=(t,e)=>{const{path:n,schema:r,uischema:i,i18nKeyPrefix:o,label:a,...s}=Yvt(t,e),l=Ng.schema(r,"items",s.rootSchema),c=Avt(n,l)(t),u=fh()(t);return{...s,label:a,path:n,uischema:i,schema:l,childErrors:c,renderers:e.renderers||RD(t),cells:e.cells||zD(t),translations:fvt(u,dvt,o,a)}},Xvt=t=>({addItem:(e,n)=>()=>{t(bv(e,r=>r==null?[n]:(r.push(n),r)))},removeItems:(e,n)=>()=>{t(bv(e,r=>(n.sort().reverse().forEach(i=>r.splice(i,1)),r)))},moveUp:(e,n)=>()=>{t(bv(e,r=>(Wmt(r,n),r)))},moveDown:(e,n)=>()=>{t(bv(e,r=>(Gmt(r,n),r)))}}),Efe={visible:!0,enabled:!0,path:"",direction:"column"},Jvt=t=>t.type==="HorizontalLayout"?"row":t.type==="VerticalLayout"?"column":Efe.direction,Zvt=(t,e)=>{const n=J3(t),{uischema:r}=e,i=e.visible===void 0||BD(r)?Q3(e.uischema,n,e.path,GS(t)):e.visible,o=Ng.data(n,e.path),a=Dg(t),s=jD(t,e,r,void 0,n,a),l=fh()(t),c=Umt(r)?uvt(r,l):void 0;return{...Efe,renderers:e.renderers||RD(t),cells:e.cells||zD(t),visible:i,enabled:s,path:e.path,data:o,uischema:e.uischema,schema:e.schema,direction:e.direction??Jvt(r),config:a,label:c}},Qvt=(t,e)=>({renderers:e.renderers||ra(t.jsonforms,"renderers"),cells:e.cells||ra(t.jsonforms,"cells"),schema:e.schema||WC(t),rootSchema:WC(t),uischema:e.uischema||Pvt(t),path:e.path,enabled:e.enabled,config:Dg(t)}),e0t=(t,e)=>{const{uischema:n}=e,r=e.visible===void 0||BD(n)?Q3(e.uischema,J3(t),e.path,GS(t)):e.visible,i=n.text,o=fh()(t),a=LD(void 0,n),s=a?`${a}.text`:i??"";return{text:o(s,i,{uischema:n}),visible:r,config:Dg(t),renderers:e.renderers||RD(t),cells:e.cells||zD(t)}},t0t=(t,e)=>{const{id:n,schema:r,path:i,uischema:o,renderers:a,cells:s}=e,l=J3(t),c=e.visible!==void 0?e.visible:Q3(o,l,void 0,GS(t)),u=WC(t),f=Dg(t);let d;t.jsonforms.readonly===!0?d=!1:typeof e.enabled=="boolean"?d=e.enabled:d=jD(t,e,o,r||u,l,f);const h=fh()(t),g=Tfe()(t),y=wfe(Cfe(i,r)(t),g,h,r,o,i),S=or(y);return{data:Ng.data(l,i),visible:c,enabled:d,id:n,path:i,errors:y,isValid:S,schema:r,uischema:o,config:Dg(t),rootSchema:u,renderers:a,cells:s}},n0t=(t,e)=>{const n=t0t(t,e),{renderers:r,cells:i,...o}=e;return{...n,...o,cells:i||t.jsonforms.cells||[]}},UD=new Set,Ofe=(t,e)=>e<=1?t:t+e.toString(),r0t=(t,e)=>{const n=Ofe(t,e);return!UD.has(n)},i0t=t=>{t===void 0&&(t="undefined");let e=0;for(;!r0t(t,e);)e++;const n=Ofe(t,e);return UD.add(n),n},o0t=t=>UD.delete(t),a0t=t=>{if(t.properties)return gfe(Object.keys(t.properties),e=>{const n=t.properties[e];return n.type==="string"||n.type==="number"||n.type==="integer"})},ZO=t=>!!t&&Object.prototype.hasOwnProperty.call(t,"oneOf")&&t.oneOf&&t.oneOf.every(e=>e.const!==void 0),s0t=t=>{const e=new Tie({allErrors:!0,verbose:!0,strict:!1,...t});return Rmt(e),e},Ife=t=>({type:t,elements:[]}),zx=t=>({type:"Control",scope:t}),l0t=(t,e)=>{if(!or(t)&&!FD(t)){const n=Ife(e);return n.elements.push(t),n}return t},c0t=(t,e)=>{if(!or(e)){const n=Pue(e);if(Bmt(t))t.label=n;else{const r={type:"Label",text:n};t.elements.push(r)}}},u0t=t=>!or(t)&&(!or(t.oneOf)||!or(t.anyOf)||!or(t.allOf)),QO=(t,e,n,r,i,o)=>{if(!or(t)&&t.$ref!==void 0)return QO(O2(o,t.$ref,o),e,n,r,i,o);if(u0t(t)){const s=zx(n);return e.push(s),s}const a=GC(t);if(a.length===0)return null;if(a.length>1){const s=zx(n);return e.push(s),s}if(n==="#"&&a[0]==="object"){const s=Ife(i);if(e.push(s),t.properties&&rtt(t.properties).length>1&&c0t(s,r),!or(t.properties)){const l=n+"/properties";Object.keys(t.properties).map(c=>{let u=t.properties[c];const f=`${l}/${Ovt(c)}`;u.$ref!==void 0&&(u=O2(o,u.$ref,o)),QO(u,s.elements,f,c,i,o)})}return s}switch(a[0]){case"object":case"array":case"string":case"number":case"integer":case"boolean":{const s=zx(n);return e.push(s),s}default:throw new Error("Unknown type: "+JSON.stringify(t))}},$fe=(t,e="VerticalLayout",n="#",r=t)=>l0t(QO(t,[],n,"",e,r),e),Mp={jsonSchema:yfe,uiSchema:$fe,controlElement:zx},WD="jsonforms/INIT",GD="jsonforms/UPDATE_CORE",qD="jsonforms/SET_AJV",YD="jsonforms/UPDATE",KD="jsonforms/UPDATE_ERRORS",f0t="jsonforms/VALIDATE",Ffe="jsonforms/ADD_RENDERER",Lfe="jsonforms/REMOVE_RENDERER",Dfe="jsonforms/ADD_CELL",Nfe="jsonforms/REMOVE_CELL",XD="jsonforms/SET_CONFIG",Mfe="jsonforms/ADD_UI_SCHEMA",Rfe="jsonforms/REMOVE_UI_SCHEMA",JD="jsonforms/SET_SCHEMA",ZD="jsonforms/SET_UISCHEMA",QD="jsonforms/SET_VALIDATION_MODE",eN="jsonforms/SET_LOCALE",tN="jsonforms/SET_TRANSLATOR",nN="jsonforms/UPDATE_I18N",zfe="jsonforms/ADD_DEFAULT_DATA",Vfe="jsonforms/REMOVE_DEFAULT_DATA",d0t=(t,e=yfe(t),n,r)=>({type:WD,data:t,schema:e,uischema:typeof n=="object"?n:$fe(e),options:r}),h0t=(t,e,n,r)=>({type:GD,data:t,schema:e,uischema:n,options:r}),p0t=(t,e)=>({type:zfe,schemaPath:t,data:e}),g0t=t=>({type:Vfe,schemaPath:t}),m0t=t=>({type:qD,ajv:t}),bv=(t,e)=>({type:YD,path:t,updater:e}),v0t=t=>({type:KD,errors:t}),y0t=(t,e)=>({type:Ffe,tester:t,renderer:e}),b0t=(t,e)=>({type:Dfe,tester:t,cell:e}),S0t=(t,e)=>({type:Nfe,tester:t,cell:e}),_0t=(t,e)=>({type:Lfe,tester:t,renderer:e}),w0t=t=>({type:XD,config:t}),k0t=t=>({type:QD,validationMode:t}),x0t=(t,e)=>({type:Mfe,tester:t,uischema:e}),C0t=t=>({type:Rfe,tester:t}),T0t=t=>({type:eN,locale:t}),A0t=t=>({type:JD,schema:t}),P0t=(t,e)=>({type:tN,translator:t,errorTranslator:e}),E0t=(t,e,n)=>({type:nN,locale:t,translator:e,errorTranslator:n}),O0t=t=>({type:ZD,uischema:t});var jm=Object.freeze({__proto__:null,INIT:WD,UPDATE_CORE:GD,SET_AJV:qD,UPDATE_DATA:YD,UPDATE_ERRORS:KD,VALIDATE:f0t,ADD_RENDERER:Ffe,REMOVE_RENDERER:Lfe,ADD_CELL:Dfe,REMOVE_CELL:Nfe,SET_CONFIG:XD,ADD_UI_SCHEMA:Mfe,REMOVE_UI_SCHEMA:Rfe,SET_SCHEMA:JD,SET_UISCHEMA:ZD,SET_VALIDATION_MODE:QD,SET_LOCALE:eN,SET_TRANSLATOR:tN,UPDATE_I18N:nN,ADD_DEFAULT_DATA:zfe,REMOVE_DEFAULT_DATA:Vfe,init:d0t,updateCore:h0t,registerDefaultData:p0t,unregisterDefaultData:g0t,setAjv:m0t,update:bv,updateErrors:v0t,registerRenderer:y0t,registerCell:b0t,unregisterCell:S0t,unregisterRenderer:_0t,setConfig:w0t,setValidationMode:k0t,registerUISchema:x0t,unregisterUISchema:C0t,setLocale:T0t,setSchema:A0t,setTranslator:P0t,updateI18n:E0t,setUISchema:O0t});function Bq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ff(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Bq(Object(n),!0).forEach(function(r){I0t(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function e6(t){"@babel/helpers - typeof";return e6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e6(t)}function I0t(t,e,n){return e=L0t(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $0t(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function nA(t,e){if(t==null)return{};var n=$0t(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function F0t(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function L0t(t){var e=F0t(t,"string");return typeof e=="symbol"?e:String(e)}var rN=Rt({name:"UnknownRenderer"});function D0t(t,e,n,r,i,o){return Oe(),je("div",null,"No applicable renderer found.")}rN.render=D0t;var N0t=["control"],M0t=["rootSchema"],R0t=["control"],z0t=["control"],sa=function(){return{schema:{required:!0,type:[Object,Boolean]},uischema:{required:!0,type:Object},path:{required:!0,type:String},enabled:{required:!1,type:Boolean,default:void 0},renderers:{required:!1,type:Array,default:void 0},cells:{required:!1,type:Array,default:void 0},config:{required:!1,type:Object,default:void 0}}};function im(t,e,n){var r=Ni("jsonforms"),i=Ni("dispatch");if(!r||!i)throw"'jsonforms' or 'dispatch' couldn't be injected. Are you within JSON Forms?";var o=Tl(void 0),a=Fn(function(){return ff(ff(ff({},t),e({jsonforms:r},t)),{},{id:o.value})}),s=n==null?void 0:n(i);return Z6(function(){a.value.uischema.scope&&(o.value=i0t(a.value.uischema.scope))}),K2(function(){o.value&&(o0t(o.value),o.value=void 0)}),ff({control:a},s)}var Ch=function(e){return im(e,eA,tA)},V0t=function(e){return im(e,Gvt,tA)},B0t=function(e){return im(e,qvt,tA)},j0t=function(e){return im(e,Kvt,Xvt)},Bfe=function(e){var n=im(e,Zvt),r=n.control,i=nA(n,N0t);return ff({layout:r},i)},H0t=function(e){var n=Ni("jsonforms"),r=Ni("dispatch");if(!n||!r)throw"'jsonforms' or 'dispatch' couldn't be injected. Are you within JSON Forms?";var i=Fn(function(){return Qvt({jsonforms:n},e)}),o=Fn(function(){return i.value.rootSchema}),a=Fn(function(){var s=i.value;s.rootSchema;var l=nA(s,M0t);return l});return{renderer:a,rootSchema:o}},U0t=function(e){var n=im(e,e0t),r=n.control,i=nA(n,R0t);return ff({label:r},i)},W0t=function(e){var n=im(e,n0t,tA),r=n.control,i=nA(n,z0t);return ff({cell:r},i)},qS=Rt({name:"DispatchRenderer",props:ff({},sa()),setup:function(e){return H0t(e)},computed:{determinedRenderer:function(){var e=this,n={rootSchema:this.rootSchema,config:this.config},r=bD(this.renderer.renderers,function(i){return i.tester(e.renderer.uischema,e.renderer.schema,n)});return r===void 0||r.tester(this.renderer.uischema,this.renderer.schema,n)===-1?rN:r.renderer}}});function G0t(t,e,n,r,i,o){return Oe(),en(eI(t.determinedRenderer),L6(vT(t.renderer)),null,16)}qS.render=G0t;var q0t=Rt({name:"DispatchCell",props:ff({},sa()),setup:function(e){return W0t(e)},computed:{determinedCell:function(){var e=this,n={rootSchema:this.cell.rootSchema,config:this.config},r=bD(this.cell.cells,function(i){return i.tester(e.cell.uischema,e.cell.schema,n)});return r===void 0||r.tester(this.cell.uischema,this.cell.schema,n)===-1?rN:r.cell}}});function Y0t(t,e,n,r,i,o){return Oe(),en(eI(t.determinedCell),L6(vT(t.cell)),null,16)}q0t.render=Y0t;var jq=function(e){return e&&e6(e)==="object"},K0t=hh([]),jfe=Rt({name:"JsonForms",components:{DispatchRenderer:qS},provide:function(){return{jsonforms:this.jsonforms,dispatch:this.dispatch}},props:{data:{required:!0,type:[String,Number,Boolean,Array,Object]},schema:{required:!1,type:[Object,Boolean],default:void 0},uischema:{required:!1,type:Object,default:void 0},renderers:{required:!0,type:Array},cells:{required:!1,type:Array,default:function(){return[]}},config:{required:!1,type:Object,default:void 0},readonly:{required:!1,type:Boolean,default:!1},uischemas:{required:!1,type:Array,default:function(){return[]}},validationMode:{required:!1,type:String,default:"ValidateAndShow"},ajv:{required:!1,type:Object,default:void 0},i18n:{required:!1,type:Object,default:void 0},additionalErrors:{required:!1,type:Array,default:function(){return K0t}}},emits:["change"],data:function(){var e,n,r=this,i,o,a,s=this.data,l=jq(s)?s:{},c=(e=this.schema)!==null&&e!==void 0?e:Mp.jsonSchema(l),u=(n=this.uischema)!==null&&n!==void 0?n:Mp.uiSchema(c),f=function(){var h={data:s,schema:c,uischema:u},g=sE(h,jm.init(s,c,u,{validationMode:r.validationMode,ajv:r.ajv,additionalErrors:r.additionalErrors}));return g};return{schemaToUse:c,dataToUse:s,uischemaToUse:u,jsonforms:{core:f(),config:Fq(void 0,jm.setConfig(this.config)),i18n:Mq(this.i18n,jm.updateI18n((i=this.i18n)===null||i===void 0?void 0:i.locale,(o=this.i18n)===null||o===void 0?void 0:o.translate,(a=this.i18n)===null||a===void 0?void 0:a.translateError)),renderers:this.renderers,cells:this.cells,uischemas:this.uischemas,readonly:this.readonly}}},computed:{coreDataToUpdate:function(){return[this.dataToUse,this.schemaToUse,this.uischemaToUse,this.validationMode,this.ajv,this.additionalErrors]},eventToEmit:function(){return{data:this.jsonforms.core.data,errors:this.jsonforms.core.errors}}},watch:{schema:function(e){var n=jq(this.data)?this.data:{};this.schemaToUse=e??Mp.jsonSchema(n),this.uischema||(this.uischemaToUse=Mp.uiSchema(this.schemaToUse))},uischema:function(e){this.uischemaToUse=e??Mp.uiSchema(this.schemaToUse)},data:function(e){this.dataToUse=e},renderers:function(e){this.jsonforms.renderers=e},cells:function(e){this.jsonforms.cells=e},uischemas:function(e){this.jsonforms.uischemas=e},config:{handler:function(e){this.jsonforms.config=Fq(void 0,jm.setConfig(e))},deep:!0},readonly:function(e){this.jsonforms.readonly=e},coreDataToUpdate:function(){this.jsonforms.core=sE(this.jsonforms.core,jm.updateCore(this.dataToUse,this.schemaToUse,this.uischemaToUse,{validationMode:this.validationMode,ajv:this.ajv,additionalErrors:this.additionalErrors}))},eventToEmit:function(e){this.$emit("change",e)},i18n:{handler:function(e){this.jsonforms.i18n=Mq(this.jsonforms.i18n,jm.updateI18n(e==null?void 0:e.locale,e==null?void 0:e.translate,e==null?void 0:e.translateError))},deep:!0}},mounted:function(){this.$emit("change",{data:this.jsonforms.core.data,errors:this.jsonforms.core.errors})},methods:{dispatch:function(e){this.jsonforms.core=sE(this.jsonforms.core,e)}}});function X0t(t,e,n,r,i,o){var a=Pt("dispatch-renderer");return Oe(),en(a,{schema:t.jsonforms.core.schema,uischema:t.jsonforms.core.uischema,path:""},null,8,["schema","uischema"])}jfe.render=X0t;var J0t=zue,Z0t=Hue,Q0t=Z0t(function(t,e,n,r){J0t(t,e,n,r)}),eyt=Q0t;const tyt=pr(eyt);function Hq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ci(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Hq(Object(n),!0).forEach(function(r){nyt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Hq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nyt(t,e,n){return e=lyt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uq(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function Bk(t){return ryt(t)||iyt(t)||oyt(t)||ayt()}function ryt(t){if(Array.isArray(t))return t6(t)}function iyt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function oyt(t,e){if(t){if(typeof t=="string")return t6(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t6(t,e)}}function t6(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ayt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function syt(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lyt(t){var e=syt(t,"string");return typeof e=="symbol"?e:String(e)}var qC={control:{root:"control",wrapper:"wrapper",label:"label",description:"description",input:"input",error:"error",textarea:"text-area",select:"select",option:"option"},verticalLayout:{root:"vertical-layout",item:"vertical-layout-item"},horizontalLayout:{root:"horizontal-layout",item:"horizontal-layout-item"},group:{root:"group",label:"group-label",item:"group-item"},arrayList:{root:"array-list",legend:"array-list-legend",addButton:"array-list-add",label:"array-list-label",itemWrapper:"array-list-item-wrapper",noData:"array-list-no-data",item:"array-list-item",itemToolbar:"array-list-item-toolbar",itemLabel:"array-list-item-label",itemContent:"array-list-item-content",itemExpanded:"expanded",itemMoveUp:"array-list-item-move-up",itemMoveDown:"array-list-item-move-down",itemDelete:"array-list-item-delete"},label:{root:"label-element"}},cyt=function(){return{control:{},verticalLayout:{},horizontalLayout:{},group:{},arrayList:{},label:{}}},rA=function(e){var n,r,i=Ni("styles",qC);if(!(e!=null&&(n=e.options)!==null&&n!==void 0&&n.styles))return i;var o=cyt();return i?Bd(o,i):Bd(o,qC),e!=null&&(r=e.options)!==null&&r!==void 0&&r.styles&&Bd(o,e.options.styles),o},Wq=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return e.reduce(function(o,a,s){return"".concat(o).concat(a).concat(r[s]||"")},"").trim()},uyt=function(e,n){var r=vc(e);return tyt(r,n,function(i,o){if(typeof i=="string"&&typeof o=="string")return"".concat(i," ").concat(o)}),r},Cu=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(s){return s.value},r=Fn(function(){return Bd({},vc(e.control.value.config),vc(e.control.value.uischema.options))}),i=Tl(!1),o=function(l){e.handleChange(e.control.value.path,n(l.target))},a=Fn(function(){var s=e.control.value,l=s.id,c=s.description,u=s.errors,f=s.label,d=s.visible,h=s.required;return{id:l,description:c,errors:u,label:f,visible:d,required:h}});return Ci(Ci({},e),{},{styles:rA(e.control.value.uischema),isFocused:i,appliedOptions:r,controlWrapper:a,onChange:o})},Hfe=function(e){var n=Fn(function(){return Bd({},vc(e.layout.value.config),vc(e.layout.value.uischema.options))});return Ci(Ci({},e),{},{styles:rA(e.layout.value.uischema),appliedOptions:n})},fyt=function(e){var n=Fn(function(){return Bd({},vc(e.label.value.config),vc(e.label.value.uischema.options))});return Ci(Ci({},e),{},{styles:rA(e.label.value.uischema),appliedOptions:n})},dyt=function(e){var n=Fn(function(){return Bd({},vc(e.control.value.config),vc(e.control.value.uischema.options))}),r=Fn(function(){return Tvt(e.control.value.uischemas,e.control.value.schema,e.control.value.uischema.scope,e.control.value.path,void 0,e.control.value.uischema,e.control.value.rootSchema)}),i=function(a){var s,l,c=(s=(l=e.control.value.uischema.options)===null||l===void 0?void 0:l.childLabelProp)!==null&&s!==void 0?s:a0t(e.control.value.schema);if(!c)return"".concat(a);var u=Ng.data(e.control.value.data,VD("".concat(a),c));return u==null||isNaN(u)?"":"".concat(u)};return Ci(Ci({},e),{},{styles:rA(e.control.value.uischema),appliedOptions:n,childUiSchema:r,childLabelForIndex:i})},Gq,qq,Ufe=Rt({name:"ArrayListElement",props:{initiallyExpanded:{required:!1,type:Boolean,default:!1},label:{required:!1,type:String,default:""},moveUpEnabled:{required:!1,type:Boolean,default:!0},moveDownEnabled:{required:!1,type:Boolean,default:!0},moveUp:{required:!1,type:Function,default:void 0},moveDown:{required:!1,type:Function,default:void 0},delete:{required:!1,type:Function,default:void 0},styles:{required:!0,type:Object}},data:function(){return{expanded:this.initiallyExpanded}},computed:{contentClasses:function(){return Wq(Gq||(Gq=Uq([""," ",""])),this.styles.arrayList.itemContent,this.expanded&&this.styles.arrayList.itemExpanded)},toolbarClasses:function(){return Wq(qq||(qq=Uq([""," ",""])),this.styles.arrayList.itemToolbar,this.expanded&&this.styles.arrayList.itemExpanded)}},methods:{expandClicked:function(){this.expanded=!this.expanded},moveUpClicked:function(e){var n;e.stopPropagation(),(n=this.moveUp)===null||n===void 0||n.call(this)},moveDownClicked:function(e){var n;e.stopPropagation(),(n=this.moveDown)===null||n===void 0||n.call(this)},deleteClicked:function(e){var n;e.stopPropagation(),(n=this.delete)===null||n===void 0||n.call(this)}}}),hyt=["disabled"],pyt=["disabled"];function gyt(t,e,n,r,i,o){return Oe(),je("div",{class:Wt(t.styles.arrayList.item)},[K("div",{class:Wt(t.toolbarClasses),onClick:e[3]||(e[3]=function(){return t.expandClicked&&t.expandClicked.apply(t,arguments)})},[K("div",{class:Wt(t.styles.arrayList.itemLabel)},Qt(t.label),3),K("button",{disabled:!t.moveUpEnabled,class:Wt(t.styles.arrayList.itemMoveUp),type:"button",onClick:e[0]||(e[0]=function(){return t.moveUpClicked&&t.moveUpClicked.apply(t,arguments)})},"  ",10,hyt),K("button",{disabled:!t.moveDownEnabled,class:Wt(t.styles.arrayList.itemMoveDown),type:"button",onClick:e[1]||(e[1]=function(){return t.moveDownClicked&&t.moveDownClicked.apply(t,arguments)})},"  ",10,pyt),K("button",{class:Wt(t.styles.arrayList.itemDelete),type:"button",onClick:e[2]||(e[2]=function(){return t.deleteClicked&&t.deleteClicked.apply(t,arguments)})},"  ",2)],2),K("div",{class:Wt(t.contentClasses)},[nI(t.$slots,"default")],2)],2)}Ufe.render=gyt;var Wfe=Rt({name:"ArrayListRenderer",components:{ArrayListElement:Ufe,DispatchRenderer:qS},props:Ci({},sa()),setup:function(e){return dyt(j0t(e))},computed:{noData:function(){return!this.control.data||this.control.data.length===0}},methods:{composePaths:VD,createDefaultValue:zq,addButtonClick:function(){this.addItem(this.control.path,zq(this.control.schema))()}}}),myt={renderer:Wfe,tester:bs(2,WS("array"))};function vyt(t,e,n,r,i,o){var a=Pt("dispatch-renderer"),s=Pt("array-list-element");return t.control.visible?(Oe(),je("fieldset",{key:0,class:Wt(t.styles.arrayList.root)},[K("legend",{class:Wt(t.styles.arrayList.legend)},[K("button",{class:Wt(t.styles.arrayList.addButton),type:"button",onClick:e[0]||(e[0]=function(){return t.addButtonClick&&t.addButtonClick.apply(t,arguments)})}," + ",2),K("label",{class:Wt(t.styles.arrayList.label)},Qt(t.control.label),3)],2),(Oe(!0),je(hn,null,uo(t.control.data,function(l,c){return Oe(),je("div",{key:"".concat(t.control.path,"-").concat(c),class:Wt(t.styles.arrayList.itemWrapper)},[at(s,{"move-up":t.moveUp(t.control.path,c),"move-up-enabled":c>0,"move-down":t.moveDown(t.control.path,c),"move-down-enabled":c<t.control.data.length-1,delete:t.removeItems(t.control.path,[c]),label:t.childLabelForIndex(c),styles:t.styles},{default:ms(function(){return[at(a,{schema:t.control.schema,uischema:t.childUiSchema,path:t.composePaths(t.control.path,"".concat(c)),enabled:t.control.enabled,renderers:t.control.renderers,cells:t.control.cells},null,8,["schema","uischema","path","enabled","renderers","cells"])]}),_:2},1032,["move-up","move-up-enabled","move-down","move-down-enabled","delete","label","styles"])],2)}),128)),t.noData?(Oe(),je("div",{key:0,class:Wt(t.styles.arrayList.noData)},Qt(t.control.translations.noDataMessage),3)):ct("",!0)],2)):ct("",!0)}Wfe.render=vyt;var yyt=[myt],Cc=Rt({name:"ControlWrapper",props:{id:{required:!0,type:String},description:{required:!1,type:String,default:void 0},errors:{required:!1,type:String,default:void 0},label:{required:!1,type:String,default:void 0},appliedOptions:{required:!1,type:Object,default:void 0},visible:{required:!1,type:Boolean,default:!0},required:{required:!1,type:Boolean,default:!1},isFocused:{required:!1,type:Boolean,default:!1},styles:{required:!0,type:Object}},computed:{showDescription:function(){var e;return!Uvt(this.visible,this.description,this.isFocused,!!((e=this.appliedOptions)!==null&&e!==void 0&&e.showUnfocusedDescription))},computedLabel:function(){var e;return Hvt(this.label,this.required,!!((e=this.appliedOptions)!==null&&e!==void 0&&e.hideRequiredAsterisk))}}}),byt=["id"],Syt=["for"];function _yt(t,e,n,r,i,o){return t.visible?(Oe(),je("div",{key:0,id:t.id,class:Wt(t.styles.control.root)},[K("label",{for:t.id+"-input",class:Wt(t.styles.control.label)},Qt(t.computedLabel),11,Syt),K("div",{class:Wt(t.styles.control.wrapper)},[nI(t.$slots,"default")],2),K("div",{class:Wt(t.errors?t.styles.control.error:t.styles.control.description)},Qt(t.errors?t.errors:t.showDescription?t.description:null),3)],10,byt)):ct("",!0)}Cc.render=_yt;var Gfe=Rt({name:"StringControlRenderer",components:{ControlWrapper:Cc},props:Ci({},sa()),setup:function(e){return Cu(Ch(e),function(n){return n.value||void 0})}}),wyt={renderer:Gfe,tester:bs(1,xfe)},kyt=["id","value","disabled","autofocus","placeholder"];function xyt(t,e,n,r,i,o){var a=Pt("control-wrapper");return Oe(),en(a,Ll(t.controlWrapper,{styles:t.styles,"is-focused":t.isFocused,"applied-options":t.appliedOptions}),{default:ms(function(){return[K("input",{id:t.control.id+"-input",class:Wt(t.styles.control.input),value:t.control.data,disabled:!t.control.enabled,autofocus:t.appliedOptions.focus,placeholder:t.appliedOptions.placeholder,onChange:e[0]||(e[0]=function(){return t.onChange&&t.onChange.apply(t,arguments)}),onFocus:e[1]||(e[1]=function(s){return t.isFocused=!0}),onBlur:e[2]||(e[2]=function(s){return t.isFocused=!1})},null,42,kyt)]}),_:1},16,["styles","is-focused","applied-options"])}Gfe.render=xyt;var qfe=Rt({name:"MultiStringControlRenderer",components:{ControlWrapper:Cc},props:Ci({},sa()),setup:function(e){return Cu(Ch(e),function(n){return n.value||void 0})}}),Cyt={renderer:qfe,tester:bs(2,Vl(xfe,_vt))},Tyt=["id","value","disabled","autofocus","placeholder"];function Ayt(t,e,n,r,i,o){var a=Pt("control-wrapper");return Oe(),en(a,Ll(t.controlWrapper,{styles:t.styles,"is-focused":t.isFocused,"applied-options":t.appliedOptions}),{default:ms(function(){return[K("textarea",{id:t.control.id+"-input",class:Wt(t.styles.control.textarea),value:t.control.data,disabled:!t.control.enabled,autofocus:t.appliedOptions.focus,placeholder:t.appliedOptions.placeholder,onChange:e[0]||(e[0]=function(){return t.onChange&&t.onChange.apply(t,arguments)}),onFocus:e[1]||(e[1]=function(s){return t.isFocused=!0}),onBlur:e[2]||(e[2]=function(s){return t.isFocused=!1})},null,42,Tyt)]}),_:1},16,["styles","is-focused","applied-options"])}qfe.render=Ayt;var Yfe=Rt({name:"NumberControlRenderer",components:{ControlWrapper:Cc},props:Ci({},sa()),setup:function(e){return Cu(Ch(e),function(n){return n.value===""?void 0:Number(n.value)})},computed:{step:function(){var e,n=this.appliedOptions;return(e=n.step)!==null&&e!==void 0?e:.1}}}),Pyt={renderer:Yfe,tester:bs(1,Svt)},Eyt=["id","step","value","disabled","autofocus","placeholder"];function Oyt(t,e,n,r,i,o){var a=Pt("control-wrapper");return Oe(),en(a,Ll(t.controlWrapper,{styles:t.styles,"is-focused":t.isFocused,"applied-options":t.appliedOptions}),{default:ms(function(){return[K("input",{id:t.control.id+"-input",type:"number",step:t.step,class:Wt(t.styles.control.input),value:t.control.data,disabled:!t.control.enabled,autofocus:t.appliedOptions.focus,placeholder:t.appliedOptions.placeholder,onChange:e[0]||(e[0]=function(){return t.onChange&&t.onChange.apply(t,arguments)}),onFocus:e[1]||(e[1]=function(s){return t.isFocused=!0}),onBlur:e[2]||(e[2]=function(s){return t.isFocused=!1})},null,42,Eyt)]}),_:1},16,["styles","is-focused","applied-options"])}Yfe.render=Oyt;var Kfe=Rt({name:"IntegerControlRenderer",components:{ControlWrapper:Cc},props:Ci({},sa()),setup:function(e){return Cu(Ch(e),function(n){return n.value===""?void 0:parseInt(n.value,10)})}}),Iyt={renderer:Kfe,tester:bs(1,bvt)},$yt=["id","value","disabled","autofocus","placeholder"];function Fyt(t,e,n,r,i,o){var a=Pt("control-wrapper");return Oe(),en(a,Ll(t.controlWrapper,{styles:t.styles,"is-focused":t.isFocused,"applied-options":t.appliedOptions}),{default:ms(function(){return[K("input",{id:t.control.id+"-input",type:"number",step:1,class:Wt(t.styles.control.input),value:t.control.data,disabled:!t.control.enabled,autofocus:t.appliedOptions.focus,placeholder:t.appliedOptions.placeholder,onChange:e[0]||(e[0]=function(){return t.onChange&&t.onChange.apply(t,arguments)}),onFocus:e[1]||(e[1]=function(s){return t.isFocused=!0}),onBlur:e[2]||(e[2]=function(s){return t.isFocused=!1})},null,42,$yt)]}),_:1},16,["styles","is-focused","applied-options"])}Kfe.render=Fyt;var Xfe=Rt({name:"EnumControlRenderer",components:{ControlWrapper:Cc},props:Ci({},sa()),setup:function(e){return Cu(V0t(e),function(n){return n.selectedIndex===0?void 0:n.value})}}),Lyt={renderer:Xfe,tester:bs(2,vvt)},Dyt=["id","value","disabled","autofocus"],Nyt=["value","label"];function Myt(t,e,n,r,i,o){var a=Pt("control-wrapper");return Oe(),en(a,Ll(t.controlWrapper,{styles:t.styles,"is-focused":t.isFocused,"applied-options":t.appliedOptions}),{default:ms(function(){return[K("select",{id:t.control.id+"-select",class:Wt(t.styles.control.select),value:t.control.data,disabled:!t.control.enabled,autofocus:t.appliedOptions.focus,onChange:e[0]||(e[0]=function(){return t.onChange&&t.onChange.apply(t,arguments)}),onFocus:e[1]||(e[1]=function(s){return t.isFocused=!0}),onBlur:e[2]||(e[2]=function(s){return t.isFocused=!1})},[K("option",{key:"empty",value:"",class:Wt(t.styles.control.option)},null,2),(Oe(!0),je(hn,null,uo(t.control.options,function(s){return Oe(),je("option",{key:s.value,value:s.value,label:s.label,class:Wt(t.styles.control.option)},null,10,Nyt)}),128))],42,Dyt)]}),_:1},16,["styles","is-focused","applied-options"])}Xfe.render=Myt;var Jfe=Rt({name:"EnumOneofControlRenderer",components:{ControlWrapper:Cc},props:Ci({},sa()),setup:function(e){return Cu(B0t(e),function(n){return n.selectedIndex===0?void 0:n.value})}}),Ryt={renderer:Jfe,tester:bs(2,yvt)},zyt=["id","value","disabled","autofocus"],Vyt=["value","label"];function Byt(t,e,n,r,i,o){var a=Pt("control-wrapper");return Oe(),en(a,Ll(t.controlWrapper,{styles:t.styles,"is-focused":t.isFocused,"applied-options":t.appliedOptions}),{default:ms(function(){return[K("select",{id:t.control.id+"-input",class:Wt(t.styles.control.select),value:t.control.data,disabled:!t.control.enabled,autofocus:t.appliedOptions.focus,onChange:e[0]||(e[0]=function(){return t.onChange&&t.onChange.apply(t,arguments)}),onFocus:e[1]||(e[1]=function(s){return t.isFocused=!0}),onBlur:e[2]||(e[2]=function(s){return t.isFocused=!1})},[K("option",{key:"empty",value:"",class:Wt(t.styles.control.option)},null,2),(Oe(!0),je(hn,null,uo(t.control.options,function(s){return Oe(),je("option",{key:s.value,value:s.value,label:s.label,class:Wt(t.styles.control.option)},null,10,Vyt)}),128))],42,zyt)]}),_:1},16,["styles","is-focused","applied-options"])}Jfe.render=Byt;var Zfe=Rt({name:"DateControlRenderer",components:{ControlWrapper:Cc},props:Ci({},sa()),setup:function(e){return Cu(Ch(e),function(n){return n.value||void 0})}}),jyt={renderer:Zfe,tester:bs(2,wvt)},Hyt=["id","value","disabled","autofocus","placeholder"];function Uyt(t,e,n,r,i,o){var a=Pt("control-wrapper");return Oe(),en(a,Ll(t.controlWrapper,{styles:t.styles,"is-focused":t.isFocused,"applied-options":t.appliedOptions}),{default:ms(function(){return[K("input",{id:t.control.id+"-input",type:"date",class:Wt(t.styles.control.input),value:t.control.data,disabled:!t.control.enabled,autofocus:t.appliedOptions.focus,placeholder:t.appliedOptions.placeholder,onChange:e[0]||(e[0]=function(){return t.onChange&&t.onChange.apply(t,arguments)}),onFocus:e[1]||(e[1]=function(s){return t.isFocused=!0}),onBlur:e[2]||(e[2]=function(s){return t.isFocused=!1})},null,42,Hyt)]}),_:1},16,["styles","is-focused","applied-options"])}Zfe.render=Uyt;var Wyt=function(e){return e===""?void 0:e+":00.000Z"},Qfe=Rt({name:"DatetimeControlRenderer",components:{ControlWrapper:Cc},props:Ci({},sa()),setup:function(e){return Cu(Ch(e),function(n){return Wyt(n.value)})},computed:{dataTime:function(){var e;return((e=this.control.data)!==null&&e!==void 0?e:"").substr(0,16)}}}),Gyt={renderer:Qfe,tester:bs(2,xvt)},qyt=["id","value","disabled","autofocus","placeholder"];function Yyt(t,e,n,r,i,o){var a=Pt("control-wrapper");return Oe(),en(a,Ll(t.controlWrapper,{styles:t.styles,"is-focused":t.isFocused,"applied-options":t.appliedOptions}),{default:ms(function(){return[K("input",{id:t.control.id+"-input",type:"datetime-local",class:Wt(t.styles.control.input),value:t.dataTime,disabled:!t.control.enabled,autofocus:t.appliedOptions.focus,placeholder:t.appliedOptions.placeholder,onChange:e[0]||(e[0]=function(){return t.onChange&&t.onChange.apply(t,arguments)}),onFocus:e[1]||(e[1]=function(s){return t.isFocused=!0}),onBlur:e[2]||(e[2]=function(s){return t.isFocused=!1})},null,42,qyt)]}),_:1},16,["styles","is-focused","applied-options"])}Qfe.render=Yyt;var ede=Rt({name:"TimeControlRenderer",components:{ControlWrapper:Cc},props:Ci({},sa()),setup:function(e){return Cu(Ch(e),function(n){return n.value||void 0})}}),Kyt={renderer:ede,tester:bs(2,kvt)},Xyt=["id","value","disabled","autofocus","placeholder"];function Jyt(t,e,n,r,i,o){var a=Pt("control-wrapper");return Oe(),en(a,Ll(t.controlWrapper,{styles:t.styles,"is-focused":t.isFocused,"applied-options":t.appliedOptions}),{default:ms(function(){return[K("input",{id:t.control.id+"-input",type:"time",class:Wt(t.styles.control.input),value:t.control.data,disabled:!t.control.enabled,autofocus:t.appliedOptions.focus,placeholder:t.appliedOptions.placeholder,onChange:e[0]||(e[0]=function(){return t.onChange&&t.onChange.apply(t,arguments)}),onFocus:e[1]||(e[1]=function(s){return t.isFocused=!0}),onBlur:e[2]||(e[2]=function(s){return t.isFocused=!1})},null,42,Xyt)]}),_:1},16,["styles","is-focused","applied-options"])}ede.render=Jyt;var tde=Rt({name:"BooleanControlRenderer",components:{ControlWrapper:Cc},props:Ci({},sa()),setup:function(e){return Cu(Ch(e),function(n){return n.checked})}}),Zyt={renderer:tde,tester:bs(1,mvt)},Qyt=["id","checked","disabled","autofocus","placeholder"];function ebt(t,e,n,r,i,o){var a=Pt("control-wrapper");return Oe(),en(a,Ll(t.controlWrapper,{styles:t.styles,"is-focused":t.isFocused,"applied-options":t.appliedOptions}),{default:ms(function(){return[K("input",{id:t.control.id+"-input",type:"checkbox",class:Wt(t.styles.control.input),checked:!!t.control.data,disabled:!t.control.enabled,autofocus:t.appliedOptions.focus,placeholder:t.appliedOptions.placeholder,onChange:e[0]||(e[0]=function(){return t.onChange&&t.onChange.apply(t,arguments)}),onFocus:e[1]||(e[1]=function(s){return t.isFocused=!0}),onBlur:e[2]||(e[2]=function(s){return t.isFocused=!1})},null,42,Qyt)]}),_:1},16,["styles","is-focused","applied-options"])}tde.render=ebt;var tbt=[wyt,Cyt,Pyt,Iyt,Lyt,Ryt,jyt,Gyt,Kyt,Zyt],nde=Rt({name:"LayoutRenderer",components:{DispatchRenderer:qS},props:Ci({},sa()),setup:function(e){return Hfe(Bfe(e))},computed:{layoutClassObject:function(){return this.layout.direction==="row"?this.styles.horizontalLayout:this.styles.verticalLayout}}}),nbt={renderer:nde,tester:bs(1,FD)};function rbt(t,e,n,r,i,o){var a=Pt("dispatch-renderer");return t.layout.visible?(Oe(),je("div",{key:0,class:Wt(t.layoutClassObject.root)},[(Oe(!0),je(hn,null,uo(t.layout.uischema.elements,function(s,l){return Oe(),je("div",{key:"".concat(t.layout.path,"-").concat(l),class:Wt(t.layoutClassObject.item)},[at(a,{schema:t.layout.schema,uischema:s,path:t.layout.path,enabled:t.layout.enabled,renderers:t.layout.renderers,cells:t.layout.cells},null,8,["schema","uischema","path","enabled","renderers","cells"])],2)}),128))],2)):ct("",!0)}nde.render=rbt;var rde=Rt({name:"GroupRenderer",components:{DispatchRenderer:qS},props:Ci({},sa()),setup:function(e){return Hfe(Bfe(e))}}),ibt={renderer:rde,tester:bs(2,Vl(FD,zl("Group")))};function obt(t,e,n,r,i,o){var a=Pt("dispatch-renderer");return t.layout.visible?(Oe(),je("fieldset",{key:0,class:Wt(t.styles.group.root)},[t.layout.label?(Oe(),je("legend",{key:0,class:Wt(t.styles.group.label)},Qt(t.layout.label),3)):ct("",!0),(Oe(!0),je(hn,null,uo(t.layout.uischema.elements,function(s,l){return Oe(),je("div",{key:"".concat(t.layout.path,"-").concat(l),class:Wt(t.styles.group.item)},[at(a,{schema:t.layout.schema,uischema:s,path:t.layout.path,enabled:t.layout.enabled,renderers:t.layout.renderers,cells:t.layout.cells},null,8,["schema","uischema","path","enabled","renderers","cells"])],2)}),128))],2)):ct("",!0)}rde.render=obt;var abt=[nbt,ibt],ide=Rt({name:"LabelRenderer",props:Ci({},sa()),setup:function(e){return fyt(U0t(e))}}),sbt={renderer:ide,tester:bs(1,zl("Label"))};function lbt(t,e,n,r,i,o){return t.label.visible?(Oe(),je("label",{key:0,class:Wt(t.styles.label.root)},Qt(t.label.text),3)):ct("",!0)}ide.render=lbt;var cbt=[sbt],ubt=[].concat(Bk(tbt),Bk(abt),Bk(yyt),Bk(cbt));const fbt=uyt(qC,{arrayList:{addButton:"is-hidden",itemContent:"expanded",itemToolbar:"is-hidden"}}),dbt=[...ubt],hbt=Rt({components:{JsonForms:jfe},provide(){const t=this.placesStore.place.schema;return t.maxItems&&t.maxItems===1?{styles:fbt}:{styles:qC}},data(){return{renderers:Object.freeze(dbt)}},computed:{...Mt(Af),...Mt(ta)},methods:{onFormChange(t){this.placesStore.savePlaceMarkingFromForm(t.data)},onSingleTokenFormChange(t){this.placesStore.savePlaceMarkingFromForm([t.data])}}}),pbt={class:"block"};function gbt(t,e,n,r,i,o){const a=Pt("json-forms");return Oe(),je("div",pbt,[t.placesStore.place.schema.maxItems!==1?(Oe(),en(a,{key:0,data:t.placesStore.formsData,schema:t.placesStore.place.schema,renderers:t.renderers,onChange:t.onFormChange},null,8,["data","schema","renderers","onChange"])):ct("",!0),t.placesStore.place.marking.length>0?(Oe(),en(a,{key:1,data:t.placesStore.formsData[0],schema:t.placesStore.place.schema.items,renderers:t.renderers,onChange:t.onSingleTokenFormChange},null,8,["data","schema","renderers","onChange"])):ct("",!0)])}const mbt=Qr(hbt,[["render",gbt]]),vbt=Rt({data(){return{data:{data:null}}},computed:{...Mt(Af),...Mt(Zn),...Mt(ta),...Mt(ss)},created(){this.load()},methods:{async load(){var n;const t=(n=this.configStore.getPlaceTypeById(this.netStore.placeTypes[this.placesStore.place.id]))==null?void 0:n.externalInteraction;if(!t||t.type==="none")return;const e=await fetch(t.url);this.data=await e.json()},loadModel(t){this.netStore.import(t.model)},setPlaceData(t){var r;this.placesStore.place.name=t.name,this.placesStore.saveName();const e=(r=this.configStore.getPlaceTypeById(this.netStore.placeTypes[this.placesStore.place.id]))==null?void 0:r.externalInteraction;if(!e||e.type!=="pull")return;const n=t.marking;n[0]={...t.marking[0],...e.enforcedMarking},this.placesStore.savePlaceMarkingFromEditor(JSON.stringify(n))}}}),ybt={key:0},bbt={class:"table is-size-7 is-fullwidth"},Sbt=K("thead",null,[K("th",null,"Eintrag"),K("th",null,"Aktionen")],-1),_bt=["onClick"],wbt=["onClick"],kbt=K("hr",null,null,-1);function xbt(t,e,n,r,i,o){return t.data?(Oe(),je("div",ybt,[K("table",bbt,[Sbt,K("tbody",null,[(Oe(!0),je(hn,null,uo(t.data.data,a=>(Oe(),je("tr",null,[K("td",null,Qt(a.name),1),K("td",null,[t.uiStateStore.uiAssistMode==="expert"?(Oe(),je("a",{key:0,class:"mr-5",onClick:s=>t.loadModel(a)}," Modell ffnen ",8,_bt)):ct("",!0),K("a",{onClick:s=>t.setPlaceData(a)}," Laden ",8,wbt)])]))),256))])]),kbt])):ct("",!0)}const Cbt=Qr(vbt,[["render",xbt]]),Tbt=Rt({components:{DataForm:mbt,DataEditor:Mce,DataLoader:Cbt},computed:{...Mt(Af),...Mt(Zn),...Mt(ta),...Mt(ss),isDeletable(){return this.placesStore.databaseMap[this.placesStore.place.id]!==""}},watch:{"placesStore.markingString"(t){this.placesStore.savePlaceMarkingFromEditor(t)}},methods:{async deleteData(){var n;const t=(n=this.configStore.getPlaceTypeById(this.netStore.placeTypes[this.placesStore.place.id]))==null?void 0:n.externalInteraction;if(!t||t.type==="none")return;const e=this.placesStore.databaseMap[this.placesStore.place.id];!e||e===""?alert("Daten wurden bisher noch nicht verffentlicht."):await fetch(t.url+e,{method:"DELETE"}).then(r=>r.json()).then(()=>{this.placesStore.databaseMap[this.placesStore.place.id]="",alert("Daten wurden gelscht.")})},async publish(){var o;const t=(o=this.configStore.getPlaceTypeById(this.netStore.placeTypes[this.placesStore.place.id]))==null?void 0:o.externalInteraction;if(!t||t.type==="none")return;const e=this.placesStore.databaseMap[this.placesStore.place.id],n=JSON.parse(JSON.stringify(this.placesStore.place.marking));Zn().resetModel();const r=Zn().export(),i={name:this.placesStore.place.name,marking:n,model:JSON.parse(r)};e?await fetch(t.url+e,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(a=>a.json()).then(a=>{alert("Daten wurden aktualisiert (ID: "+e+").")}):await fetch(t.url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(a=>a.json()).then(a=>{const s=a._id;alert("Daten wurden verffentlicht (ID: "+s+"). Das Modell wurde zurckgesetzt."),this.placesStore.databaseMap[this.placesStore.place.id]=s})}}}),Abt={key:3,class:"block"},Pbt=["disabled"];function Ebt(t,e,n,r,i,o){var c,u;const a=Pt("DataLoader"),s=Pt("DataForm"),l=Pt("DataEditor");return Oe(),je(hn,null,[((c=t.configStore.getPlaceTypeById(t.netStore.placeTypes[t.placesStore.place.id]))==null?void 0:c.externalInteraction.type)==="pull"?(Oe(),en(a,{key:0})):ct("",!0),t.uiStateStore.uiAssistMode==="assisted"?(Oe(),en(s,{key:1})):t.uiStateStore.uiAssistMode==="expert"?(Oe(),en(l,{key:2})):ct("",!0),((u=t.configStore.getPlaceTypeById(t.netStore.placeTypes[t.placesStore.place.id]))==null?void 0:u.externalInteraction.type)==="push"&&t.placesStore.place.marking.length>0?(Oe(),je("div",Abt,[K("button",{class:"button is-pulled-right is-primary is-small",style:{"margin-left":"auto"},onClick:e[0]||(e[0]=f=>t.publish())},"Verffentlichen"),K("button",{class:"button is-pulled-right is-danger is-small mr-2",style:{"margin-left":"auto"},onClick:e[1]||(e[1]=f=>t.deleteData()),disabled:!t.isDeletable},"Lschen",8,Pbt)])):ct("",!0)],64)}const Obt=Qr(Tbt,[["render",Ebt]]);function Sv(t,e,n){var r=t.get("borderRadius");if(r==null)return n?{cornerRadius:0}:null;mt(r)||(r=[r,r,r,r]);var i=Math.abs(e.r||0-e.r0||0);return{cornerRadius:tn(r,function(o){return c0(o,i)})}}var jk=Math.PI*2,Yq=Math.PI/180;function ode(t,e){return f0(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function ade(t,e){var n=ode(t,e),r=t.get("center"),i=t.get("radius");mt(i)||(i=[0,i]);var o=Kr(n.width,e.getWidth()),a=Kr(n.height,e.getHeight()),s=Math.min(o,a),l=Kr(i[0],s/2),c=Kr(i[1],s/2),u,f,d=t.coordinateSystem;if(d){var h=d.dataToPoint(r);u=h[0]||0,f=h[1]||0}else mt(r)||(r=[r,r]),u=Kr(r[0],o)+n.x,f=Kr(r[1],a)+n.y;return{cx:u,cy:f,r0:l,r:c}}function Ibt(t,e,n){e.eachSeriesByType(t,function(r){var i=r.getData(),o=i.mapDimension("value"),a=ode(r,n),s=ade(r,n),l=s.cx,c=s.cy,u=s.r,f=s.r0,d=-r.get("startAngle")*Yq,h=r.get("minAngle")*Yq,g=0;i.each(o,function(D){!isNaN(D)&&g++});var y=i.getSum(o),S=Math.PI/(y||g)*2,v=r.get("clockwise"),_=r.get("roseType"),x=r.get("stillShowZeroSum"),C=i.getDataExtent(o);C[0]=0;var k=jk,m=0,T=d,E=v?1:-1;if(i.setLayout({viewRect:a,r:u}),i.each(o,function(D,F){var R;if(isNaN(D)){i.setItemLayout(F,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:v,cx:l,cy:c,r0:f,r:_?NaN:u});return}_!=="area"?R=y===0&&x?S:D*S:R=jk/g,R<h?(R=h,k-=h):m+=D;var z=T+E*R;i.setItemLayout(F,{angle:R,startAngle:T,endAngle:z,clockwise:v,cx:l,cy:c,r0:f,r:_?u0(D,C,[f,u]):u}),T=z}),k<jk&&g)if(k<=.001){var I=jk/g;i.each(o,function(D,F){if(!isNaN(D)){var R=i.getItemLayout(F);R.angle=I,R.startAngle=d+E*F*I,R.endAngle=d+E*(F+1)*I}})}else S=k/m,T=d,i.each(o,function(D,F){if(!isNaN(D)){var R=i.getItemLayout(F),z=R.angle===h?h:D*S;R.startAngle=T,R.endAngle=T+E*z,T+=E*z}})})}function sde(t){return{seriesType:t,reset:function(e,n){var r=n.findComponents({mainType:"legend"});if(!(!r||!r.length)){var i=e.getData();i.filterSelf(function(o){for(var a=i.getName(o),s=0;s<r.length;s++)if(!r[s].isSelected(a))return!1;return!0})}}}}var $bt=Math.PI/180;function Kq(t,e,n,r,i,o,a,s,l,c){if(t.length<2)return;function u(y){for(var S=y.rB,v=S*S,_=0;_<y.list.length;_++){var x=y.list[_],C=Math.abs(x.label.y-n),k=r+x.len,m=k*k,T=Math.sqrt((1-Math.abs(C*C/v))*m),E=e+(T+x.len2)*i,I=E-x.label.x,D=x.targetTextWidth-I*i;lde(x,D,!0),x.label.x=E}}function f(y){for(var S={list:[],maxY:0},v={list:[],maxY:0},_=0;_<y.length;_++)if(y[_].labelAlignTo==="none"){var x=y[_],C=x.label.y>n?v:S,k=Math.abs(x.label.y-n);if(k>=C.maxY){var m=x.label.x-e-x.len2*i,T=r+x.len,E=Math.abs(m)<T?Math.sqrt(k*k/(1-m*m/T/T)):T;C.rB=E,C.maxY=k}C.list.push(x)}u(S),u(v)}for(var d=t.length,h=0;h<d;h++)if(t[h].position==="outer"&&t[h].labelAlignTo==="labelLine"){var g=t[h].label.x-c;t[h].linePoints[1][0]+=g,t[h].label.x=c}O6e(t,l,l+a)&&f(t)}function Fbt(t,e,n,r,i,o,a,s){for(var l=[],c=[],u=Number.MAX_VALUE,f=-Number.MAX_VALUE,d=0;d<t.length;d++){var h=t[d].label;cE(t[d])||(h.x<e?(u=Math.min(u,h.x),l.push(t[d])):(f=Math.max(f,h.x),c.push(t[d])))}for(var d=0;d<t.length;d++){var g=t[d];if(!cE(g)&&g.linePoints){if(g.labelStyleWidth!=null)continue;var h=g.label,y=g.linePoints,S=void 0;g.labelAlignTo==="edge"?h.x<e?S=y[2][0]-g.labelDistance-a-g.edgeDistance:S=a+i-g.edgeDistance-y[2][0]-g.labelDistance:g.labelAlignTo==="labelLine"?h.x<e?S=u-a-g.bleedMargin:S=a+i-f-g.bleedMargin:h.x<e?S=h.x-a-g.bleedMargin:S=a+i-h.x-g.bleedMargin,g.targetTextWidth=S,lde(g,S)}}Kq(c,e,n,r,1,i,o,a,s,f),Kq(l,e,n,r,-1,i,o,a,s,u);for(var d=0;d<t.length;d++){var g=t[d];if(!cE(g)&&g.linePoints){var h=g.label,y=g.linePoints,v=g.labelAlignTo==="edge",_=h.style.padding,x=_?_[1]+_[3]:0,C=h.style.backgroundColor?0:x,k=g.rect.width+C,m=y[1][0]-y[2][0];v?h.x<e?y[2][0]=a+g.edgeDistance+k+g.labelDistance:y[2][0]=a+i-g.edgeDistance-k-g.labelDistance:(h.x<e?y[2][0]=h.x+g.labelDistance:y[2][0]=h.x-g.labelDistance,y[1][0]=y[2][0]+m),y[1][1]=y[2][1]=h.y}}}function lde(t,e,n){if(n===void 0&&(n=!1),t.labelStyleWidth==null){var r=t.label,i=r.style,o=t.rect,a=i.backgroundColor,s=i.padding,l=s?s[1]+s[3]:0,c=i.overflow,u=o.width+(a?0:l);if(e<u||n){var f=o.height;if(c&&c.match("break")){r.setStyle("backgroundColor",null),r.setStyle("width",e-l);var d=r.getBoundingRect();r.setStyle("width",Math.ceil(d.width)),r.setStyle("backgroundColor",a)}else{var h=e-l,g=e<u?h:n?h>t.unconstrainedWidth?null:h:null;r.setStyle("width",g)}var y=r.getBoundingRect();o.width=y.width;var S=(r.style.margin||0)+2.1;o.height=y.height+S,o.y-=(o.height-f)/2}}}function cE(t){return t.position==="center"}function Lbt(t){var e=t.getData(),n=[],r,i,o=!1,a=(t.get("minShowLabelAngle")||0)*$bt,s=e.getLayout("viewRect"),l=e.getLayout("r"),c=s.width,u=s.x,f=s.y,d=s.height;function h(m){m.ignore=!0}function g(m){if(!m.ignore)return!0;for(var T in m.states)if(m.states[T].ignore===!1)return!0;return!1}e.each(function(m){var T=e.getItemGraphicEl(m),E=T.shape,I=T.getTextContent(),D=T.getTextGuideLine(),F=e.getItemModel(m),R=F.getModel("label"),z=R.get("position")||F.get(["emphasis","label","position"]),B=R.get("distanceToLabelLine"),ie=R.get("alignTo"),oe=Kr(R.get("edgeDistance"),c),_e=R.get("bleedMargin"),Ae=F.getModel("labelLine"),Pe=Ae.get("length");Pe=Kr(Pe,c);var Se=Ae.get("length2");if(Se=Kr(Se,c),Math.abs(E.endAngle-E.startAngle)<a){be(I.states,h),I.ignore=!0,D&&(be(D.states,h),D.ignore=!0);return}if(g(I)){var se=(E.startAngle+E.endAngle)/2,ne=Math.cos(se),J=Math.sin(se),V,W,ae,te;r=E.cx,i=E.cy;var ue=z==="inside"||z==="inner";if(z==="center")V=E.cx,W=E.cy,te="center";else{var ce=(ue?(E.r+E.r0)/2*ne:E.r*ne)+r,fe=(ue?(E.r+E.r0)/2*J:E.r*J)+i;if(V=ce+ne*3,W=fe+J*3,!ue){var ye=ce+ne*(Pe+l-E.r),j=fe+J*(Pe+l-E.r),Y=ye+(ne<0?-1:1)*Se,O=j;ie==="edge"?V=ne<0?u+oe:u+c-oe:V=Y+(ne<0?-B:B),W=O,ae=[[ce,fe],[ye,j],[Y,O]]}te=ue?"center":ie==="edge"?ne>0?"right":"left":ne>0?"left":"right"}var M=Math.PI,H=0,Q=R.get("rotate");if(Zr(Q))H=Q*(M/180);else if(z==="center")H=0;else if(Q==="radial"||Q===!0){var ve=ne<0?-se+M:-se;H=ve}else if(Q==="tangential"&&z!=="outside"&&z!=="outer"){var ge=Math.atan2(ne,J);ge<0&&(ge=M*2+ge);var De=J>0;De&&(ge=M+ge),H=ge-M}if(o=!!H,I.x=V,I.y=W,I.rotation=H,I.setStyle({verticalAlign:"middle"}),ue){I.setStyle({align:te});var Xe=I.states.select;Xe&&(Xe.x+=I.x,Xe.y+=I.y)}else{var Le=I.getBoundingRect().clone();Le.applyTransform(I.getComputedTransform());var tt=(I.style.margin||0)+2.1;Le.y-=tt/2,Le.height+=tt,n.push({label:I,labelLine:D,position:z,len:Pe,len2:Se,minTurnAngle:Ae.get("minTurnAngle"),maxSurfaceAngle:Ae.get("maxSurfaceAngle"),surfaceNormal:new ln(ne,J),linePoints:ae,textAlign:te,labelDistance:B,labelAlignTo:ie,edgeDistance:oe,bleedMargin:_e,rect:Le,unconstrainedWidth:Le.width,labelStyleWidth:I.style.width})}T.setTextConfig({inside:ue})}}),!o&&t.get("avoidLabelOverlap")&&Fbt(n,r,i,l,c,d,u,f);for(var y=0;y<n.length;y++){var S=n[y],v=S.label,_=S.labelLine,x=isNaN(v.x)||isNaN(v.y);if(v){v.setStyle({align:S.textAlign}),x&&(be(v.states,h),v.ignore=!0);var C=v.states.select;C&&(C.x+=v.x,C.y+=v.y)}if(_){var k=S.linePoints;x||!k?(be(_.states,h),_.ignore=!0):(k6e(k,S.minTurnAngle),x6e(k,S.surfaceNormal,S.maxSurfaceAngle),_.setShape({points:k}),v.__hostTarget.textGuideLineConfig={anchor:new ln(k[0][0],k[0][1])})}}}var Dbt=function(t){xr(e,t);function e(n,r,i){var o=t.call(this)||this;o.z2=2;var a=new ea;return o.setTextContent(a),o.updateData(n,r,i,!0),o}return e.prototype.updateData=function(n,r,i,o){var a=this,s=n.hostModel,l=n.getItemModel(r),c=l.getModel("emphasis"),u=n.getItemLayout(r),f=ot(Sv(l.getModel("itemStyle"),u,!0),u);if(isNaN(f.startAngle)){a.setShape(f);return}if(o){a.setShape(f);var d=s.getShallow("animationType");s.ecModel.ssr?(Mv(a,{scaleX:0,scaleY:0},s,{dataIndex:r,isFrom:!0}),a.originX=f.cx,a.originY=f.cy):d==="scale"?(a.shape.r=u.r0,Mv(a,{shape:{r:u.r}},s,r)):i!=null?(a.setShape({startAngle:i,endAngle:i}),Mv(a,{shape:{startAngle:u.startAngle,endAngle:u.endAngle}},s,r)):(a.shape.endAngle=u.startAngle,Cg(a,{shape:{endAngle:u.endAngle}},s,r))}else une(a),Cg(a,{shape:f},s,r);a.useStyle(n.getItemVisual(r,"style")),T9(a,l);var h=(u.startAngle+u.endAngle)/2,g=s.get("selectedOffset"),y=Math.cos(h)*g,S=Math.sin(h)*g,v=l.getShallow("cursor");v&&a.attr("cursor",v),this._updateLabel(s,n,r),a.ensureState("emphasis").shape=ot({r:u.r+(c.get("scale")&&c.get("scaleSize")||0)},Sv(c.getModel("itemStyle"),u)),ot(a.ensureState("select"),{x:y,y:S,shape:Sv(l.getModel(["select","itemStyle"]),u)}),ot(a.ensureState("blur"),{shape:Sv(l.getModel(["blur","itemStyle"]),u)});var _=a.getTextGuideLine(),x=a.getTextContent();_&&ot(_.ensureState("select"),{x:y,y:S}),ot(x.ensureState("select"),{x:y,y:S}),j4(this,c.get("focus"),c.get("blurScope"),c.get("disabled"))},e.prototype._updateLabel=function(n,r,i){var o=this,a=r.getItemModel(i),s=a.getModel("labelLine"),l=r.getItemVisual(i,"style"),c=l&&l.fill,u=l&&l.opacity;G4(o,I9(a),{labelFetcher:r.hostModel,labelDataIndex:i,inheritColor:c,defaultOpacity:u,defaultText:n.getFormattedLabel(i,"normal")||r.getName(i)});var f=o.getTextContent();o.setTextConfig({position:null,rotation:null}),f.attr({z2:10});var d=n.get(["label","position"]);if(d!=="outside"&&d!=="outer")o.removeTextGuideLine();else{var h=this.getTextGuideLine();h||(h=new GT,this.setTextGuideLine(h)),T6e(this,A6e(a),{stroke:c,opacity:Fv(s.get(["lineStyle","opacity"]),u,1)})}},e}(pS),Nbt=function(t){xr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.ignoreLabelLineUpdate=!0,n}return e.prototype.render=function(n,r,i,o){var a=n.getData(),s=this._data,l=this.group,c;if(!s&&a.count()>0){for(var u=a.getItemLayout(0),f=1;isNaN(u&&u.startAngle)&&f<a.count();++f)u=a.getItemLayout(f);u&&(c=u.startAngle)}if(this._emptyCircleSector&&l.remove(this._emptyCircleSector),a.count()===0&&n.get("showEmptyCircle")){var d=new pS({shape:ade(n,i)});d.useStyle(n.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=d,l.add(d)}a.diff(s).add(function(h){var g=new Dbt(a,h,c);a.setItemGraphicEl(h,g),l.add(g)}).update(function(h,g){var y=s.getItemGraphicEl(g);y.updateData(a,h,c),y.off("click"),l.add(y),a.setItemGraphicEl(h,y)}).remove(function(h){var g=s.getItemGraphicEl(h);cne(g,n,h)}).execute(),Lbt(n),n.get("animationTypeUpdate")!=="expansion"&&(this._data=a)},e.prototype.dispose=function(){},e.prototype.containPoint=function(n,r){var i=r.getData(),o=i.getItemLayout(0);if(o){var a=n[0]-o.cx,s=n[1]-o.cy,l=Math.sqrt(a*a+s*s);return l<=o.r&&l>=o.r0}},e.type="pie",e}(Rd);const Mbt=Nbt;function Rbt(t,e,n){e=mt(e)&&{coordDimensions:e}||ot({encodeDefine:t.getEncode()},e);var r=t.getSource(),i=t3(r,e).dimensions,o=new s2(i,t);return o.initData(r,n),o}var zbt=function(){function t(e,n){this._getDataWithEncodedVisual=e,this._getRawData=n}return t.prototype.getAllNames=function(){var e=this._getRawData();return e.mapArray(e.getName)},t.prototype.containName=function(e){var n=this._getRawData();return n.indexOfName(e)>=0},t.prototype.indexOfName=function(e){var n=this._getDataWithEncodedVisual();return n.indexOfName(e)},t.prototype.getItemVisual=function(e,n){var r=this._getDataWithEncodedVisual();return r.getItemVisual(e,n)},t}();const Vbt=zbt;var Bbt=no(),jbt=function(t){xr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.init=function(n){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new Vbt(Or(this.getData,this),Or(this.getRawData,this)),this._defaultLabelLine(n)},e.prototype.mergeOption=function(){t.prototype.mergeOption.apply(this,arguments)},e.prototype.getInitialData=function(){return Rbt(this,{coordDimensions:["value"],encodeDefaulter:zr(t8e,this)})},e.prototype.getDataParams=function(n){var r=this.getData(),i=Bbt(r),o=i.seats;if(!o){var a=[];r.each(r.mapDimension("value"),function(l){a.push(l)}),o=i.seats=N5e(a,r.hostModel.get("percentPrecision"))}var s=t.prototype.getDataParams.call(this,n);return s.percent=o[n]||0,s.$vars.push("percent"),s},e.prototype._defaultLabelLine=function(n){b9(n,"labelLine",["show"]);var r=n.labelLine,i=n.emphasis.labelLine;r.show=r.show&&n.label.show,i.show=i.show&&n.emphasis.label.show},e.type="series.pie",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},e}(Ag);const Hbt=jbt;function Ubt(t){return{seriesType:t,reset:function(e,n){var r=e.getData();r.filterSelf(function(i){var o=r.mapDimension("value"),a=r.get(o,i);return!(Zr(a)&&!isNaN(a)&&a<0)})}}}function Wbt(t){t.registerChartView(Mbt),t.registerSeriesModel(Hbt),U9e("pie",t.registerAction),t.registerLayout(zr(Ibt,"pie")),t.registerProcessor(sde("pie")),t.registerProcessor(Ubt("pie"))}function Xq(t,e,n){n=n||{};var r=t.coordinateSystem,i=e.axis,o={},a=i.getAxesOnZeroOf()[0],s=i.position,l=a?"onZero":s,c=i.dim,u=r.getRect(),f=[u.x,u.x+u.width,u.y,u.y+u.height],d={left:0,right:1,top:0,bottom:1,onZero:2},h=e.get("offset")||0,g=c==="x"?[f[2]-h,f[3]+h]:[f[0]-h,f[1]+h];if(a){var y=a.toGlobalCoord(a.dataToCoord(0));g[d.onZero]=Math.max(Math.min(y,g[1]),g[0])}o.position=[c==="y"?g[d[l]]:f[0],c==="x"?g[d[l]]:f[3]],o.rotation=Math.PI/2*(c==="x"?0:1);var S={top:-1,bottom:1,left:-1,right:1};o.labelDirection=o.tickDirection=o.nameDirection=S[s],o.labelOffset=a?g[d[s]]-g[d.onZero]:0,e.get(["axisTick","inside"])&&(o.tickDirection=-o.tickDirection),xg(n.labelInside,e.get(["axisLabel","inside"]))&&(o.labelDirection=-o.labelDirection);var v=e.get(["axisLabel","rotate"]);return o.labelRotate=l==="top"?-v:v,o.z2=1,o}var Ed=Math.PI,hg=function(){function t(e,n){this.group=new yu,this.opt=n,this.axisModel=e,gi(n,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var r=new yu({x:n.position[0],y:n.position[1],rotation:n.rotation});r.updateTransform(),this._transformGroup=r}return t.prototype.hasBuilder=function(e){return!!Jq[e]},t.prototype.add=function(e){Jq[e](this.opt,this.axisModel,this.group,this._transformGroup)},t.prototype.getGroup=function(){return this.group},t.innerTextLayout=function(e,n,r){var i=ute(n-e),o,a;return N4(i)?(a=r>0?"top":"bottom",o="center"):N4(i-Ed)?(a=r>0?"bottom":"top",o="center"):(a="middle",i>0&&i<Ed?o=r>0?"right":"left":o=r>0?"left":"right"),{rotation:i,textAlign:o,textVerticalAlign:a}},t.makeAxisEventDataBase=function(e){var n={componentType:e.mainType,componentIndex:e.componentIndex};return n[e.mainType+"Index"]=e.componentIndex,n},t.isLabelSilent=function(e){var n=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||n&&n.show)},t}(),Jq={axisLine:function(t,e,n,r){var i=e.get(["axisLine","show"]);if(i==="auto"&&t.handleAutoShown&&(i=t.handleAutoShown("axisLine")),!!i){var o=e.axis.getExtent(),a=r.transform,s=[o[0],0],l=[o[1],0],c=s[0]>l[0];a&&(fu(s,s,a),fu(l,l,a));var u=ot({lineCap:"round"},e.getModel(["axisLine","lineStyle"]).getLineStyle()),f=new gS({shape:{x1:s[0],y1:s[1],x2:l[0],y2:l[1]},style:u,strokeContainThreshold:t.strokeContainThreshold||5,silent:!0,z2:1});_$(f.shape,f.style.lineWidth),f.anid="line",n.add(f);var d=e.get(["axisLine","symbol"]);if(d!=null){var h=e.get(["axisLine","symbolSize"]);Ot(d)&&(d=[d,d]),(Ot(h)||Zr(h))&&(h=[h,h]);var g=iOe(e.get(["axisLine","symbolOffset"])||0,h),y=h[0],S=h[1];be([{rotate:t.rotation+Math.PI/2,offset:g[0],r:0},{rotate:t.rotation-Math.PI/2,offset:g[1],r:Math.sqrt((s[0]-l[0])*(s[0]-l[0])+(s[1]-l[1])*(s[1]-l[1]))}],function(v,_){if(d[_]!=="none"&&d[_]!=null){var x=R$(d[_],-y/2,-S/2,y,S,u.stroke,!0),C=v.r+v.offset,k=c?l:s;x.attr({rotation:v.rotate,x:k[0]+C*Math.cos(t.rotation),y:k[1]-C*Math.sin(t.rotation),silent:!0,z2:11}),n.add(x)}})}}},axisTickLabel:function(t,e,n,r){var i=Ybt(n,r,e,t),o=Xbt(n,r,e,t);if(qbt(e,o,i),Kbt(n,r,e,t.tickDirection),e.get(["axisLabel","hideOverlap"])){var a=P6e(tn(o,function(s){return{label:s,priority:s.z2,defaultAttr:{ignore:s.ignore}}}));I6e(a)}},axisName:function(t,e,n,r){var i=xg(t.axisName,e.get("name"));if(i){var o=e.get("nameLocation"),a=t.nameDirection,s=e.getModel("nameTextStyle"),l=e.get("nameGap")||0,c=e.axis.getExtent(),u=c[0]>c[1]?-1:1,f=[o==="start"?c[0]-u*l:o==="end"?c[1]+u*l:(c[0]+c[1])/2,Qq(o)?t.labelOffset+a*l:0],d,h=e.get("nameRotate");h!=null&&(h=h*Ed/180);var g;Qq(o)?d=hg.innerTextLayout(t.rotation,h??t.rotation,a):(d=Gbt(t.rotation,o,h||0,c),g=t.axisNameAvailableWidth,g!=null&&(g=Math.abs(g/Math.sin(d.rotation)),!isFinite(g)&&(g=null)));var y=s.getFont(),S=e.get("nameTruncate",!0)||{},v=S.ellipsis,_=xg(t.nameTruncateMaxWidth,S.maxWidth,g),x=new ea({x:f[0],y:f[1],rotation:d.rotation,silent:hg.isLabelSilent(e),style:Cf(s,{text:i,font:y,overflow:"truncate",width:_,ellipsis:v,fill:s.getTextColor()||e.get(["axisLine","lineStyle","color"]),align:s.get("align")||d.textAlign,verticalAlign:s.get("verticalAlign")||d.textVerticalAlign}),z2:1});if(x$({el:x,componentModel:e,itemName:i}),x.__fullText=i,x.anid="name",e.get("triggerEvent")){var C=hg.makeAxisEventDataBase(e);C.targetType="axisName",C.name=i,Vr(x).eventData=C}r.add(x),x.updateTransform(),n.add(x),x.decomposeTransform()}}};function Gbt(t,e,n,r){var i=ute(n-t),o,a,s=r[0]>r[1],l=e==="start"&&!s||e!=="start"&&s;return N4(i-Ed/2)?(a=l?"bottom":"top",o="center"):N4(i-Ed*1.5)?(a=l?"top":"bottom",o="center"):(a="middle",i<Ed*1.5&&i>Ed/2?o=l?"left":"right":o=l?"right":"left"),{rotation:i,textAlign:o,textVerticalAlign:a}}function qbt(t,e,n){if(!_6e(t.axis)){var r=t.get(["axisLabel","showMinLabel"]),i=t.get(["axisLabel","showMaxLabel"]);e=e||[],n=n||[];var o=e[0],a=e[1],s=e[e.length-1],l=e[e.length-2],c=n[0],u=n[1],f=n[n.length-1],d=n[n.length-2];r===!1?(sl(o),sl(c)):Zq(o,a)&&(r?(sl(a),sl(u)):(sl(o),sl(c))),i===!1?(sl(s),sl(f)):Zq(l,s)&&(i?(sl(l),sl(d)):(sl(s),sl(f)))}}function sl(t){t&&(t.ignore=!0)}function Zq(t,e){var n=t&&t.getBoundingRect().clone(),r=e&&e.getBoundingRect().clone();if(!(!n||!r)){var i=e$([]);return t$(i,i,-t.rotation),n.applyTransform(Dv([],i,t.getLocalTransform())),r.applyTransform(Dv([],i,e.getLocalTransform())),n.intersect(r)}}function Qq(t){return t==="middle"||t==="center"}function cde(t,e,n,r,i){for(var o=[],a=[],s=[],l=0;l<t.length;l++){var c=t[l].coord;a[0]=c,a[1]=0,s[0]=c,s[1]=n,e&&(fu(a,a,e),fu(s,s,e));var u=new gS({shape:{x1:a[0],y1:a[1],x2:s[0],y2:s[1]},style:r,z2:2,autoBatch:!0,silent:!0});_$(u.shape,u.style.lineWidth),u.anid=i+"_"+t[l].tickValue,o.push(u)}return o}function Ybt(t,e,n,r){var i=n.axis,o=n.getModel("axisTick"),a=o.get("show");if(a==="auto"&&r.handleAutoShown&&(a=r.handleAutoShown("axisTick")),!(!a||i.scale.isBlank())){for(var s=o.getModel("lineStyle"),l=r.tickDirection*o.get("length"),c=i.getTicksCoords(),u=cde(c,e.transform,l,gi(s.getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])}),"ticks"),f=0;f<u.length;f++)t.add(u[f]);return u}}function Kbt(t,e,n,r){var i=n.axis,o=n.getModel("minorTick");if(!(!o.get("show")||i.scale.isBlank())){var a=i.getMinorTicksCoords();if(a.length)for(var s=o.getModel("lineStyle"),l=r*o.get("length"),c=gi(s.getLineStyle(),gi(n.getModel("axisTick").getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])})),u=0;u<a.length;u++)for(var f=cde(a[u],e.transform,l,c,"minorticks_"+u),d=0;d<f.length;d++)t.add(f[d])}}function Xbt(t,e,n,r){var i=n.axis,o=xg(r.axisLabelShow,n.get(["axisLabel","show"]));if(!(!o||i.scale.isBlank())){var a=n.getModel("axisLabel"),s=a.get("margin"),l=i.getViewLabels(),c=(xg(r.labelRotate,a.get("rotate"))||0)*Ed/180,u=hg.innerTextLayout(r.rotation,c,r.labelDirection),f=n.getCategories&&n.getCategories(!0),d=[],h=hg.isLabelSilent(n),g=n.get("triggerEvent");return be(l,function(y,S){var v=i.scale.type==="ordinal"?i.scale.getRawOrdinalNumber(y.tickValue):y.tickValue,_=y.formattedLabel,x=y.rawLabel,C=a;if(f&&f[v]){var k=f[v];jt(k)&&k.textStyle&&(C=new co(k.textStyle,a,n.ecModel))}var m=C.getTextColor()||n.get(["axisLine","lineStyle","color"]),T=i.dataToCoord(v),E=new ea({x:T,y:r.labelOffset+r.labelDirection*s,rotation:u.rotation,silent:h,z2:10+(y.level||0),style:Cf(C,{text:_,align:C.getShallow("align",!0)||u.textAlign,verticalAlign:C.getShallow("verticalAlign",!0)||C.getShallow("baseline",!0)||u.textVerticalAlign,fill:Qn(m)?m(i.type==="category"?x:i.type==="value"?v+"":v,S):m})});if(E.anid="label_"+v,g){var I=hg.makeAxisEventDataBase(n);I.targetType="axisLabel",I.value=x,I.tickIndex=S,i.type==="category"&&(I.dataIndex=v),Vr(E).eventData=I}e.add(E),E.updateTransform(),d.push(E),t.add(E),E.decomposeTransform()}),d}}const Jbt=hg;function Zbt(t,e){var n={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return Qbt(n,t,e),n.seriesInvolved&&t1t(n,t),n}function Qbt(t,e,n){var r=e.getComponent("tooltip"),i=e.getComponent("axisPointer"),o=i.get("link",!0)||[],a=[];be(n.getCoordinateSystems(),function(s){if(!s.axisPointerEnabled)return;var l=I2(s.model),c=t.coordSysAxesInfo[l]={};t.coordSysMap[l]=s;var u=s.model,f=u.getModel("tooltip",r);if(be(s.getAxes(),zr(y,!1,null)),s.getTooltipAxes&&r&&f.get("show")){var d=f.get("trigger")==="axis",h=f.get(["axisPointer","type"])==="cross",g=s.getTooltipAxes(f.get(["axisPointer","axis"]));(d||h)&&be(g.baseAxes,zr(y,h?"cross":!0,d)),h&&be(g.otherAxes,zr(y,"cross",!1))}function y(S,v,_){var x=_.model.getModel("axisPointer",i),C=x.get("show");if(!(!C||C==="auto"&&!S&&!n6(x))){v==null&&(v=x.get("triggerTooltip")),x=S?e1t(_,f,i,e,S,v):x;var k=x.get("snap"),m=x.get("triggerEmphasis"),T=I2(_.model),E=v||k||_.type==="category",I=t.axesInfo[T]={key:T,axis:_,coordSys:s,axisPointerModel:x,triggerTooltip:v,triggerEmphasis:m,involveSeries:E,snap:k,useHandle:n6(x),seriesModels:[],linkGroup:null};c[T]=I,t.seriesInvolved=t.seriesInvolved||E;var D=n1t(o,_);if(D!=null){var F=a[D]||(a[D]={axesInfo:{}});F.axesInfo[T]=I,F.mapper=o[D].mapper,I.linkGroup=F}}}})}function e1t(t,e,n,r,i,o){var a=e.getModel("axisPointer"),s=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};be(s,function(d){l[d]=Gn(a.get(d))}),l.snap=t.type!=="category"&&!!o,a.get("type")==="cross"&&(l.type="line");var c=l.label||(l.label={});if(c.show==null&&(c.show=!1),i==="cross"){var u=a.get(["label","show"]);if(c.show=u??!0,!o){var f=l.lineStyle=a.get("crossStyle");f&&gi(c,f.textStyle)}}return t.model.getModel("axisPointer",new co(l,n,r))}function t1t(t,e){e.eachSeries(function(n){var r=n.coordinateSystem,i=n.get(["tooltip","trigger"],!0),o=n.get(["tooltip","show"],!0);!r||i==="none"||i===!1||i==="item"||o===!1||n.get(["axisPointer","show"],!0)===!1||be(t.coordSysAxesInfo[I2(r.model)],function(a){var s=a.axis;r.getAxis(s.dim)===s&&(a.seriesModels.push(n),a.seriesDataCount==null&&(a.seriesDataCount=0),a.seriesDataCount+=n.getData().count())})})}function n1t(t,e){for(var n=e.model,r=e.dim,i=0;i<t.length;i++){var o=t[i]||{};if(uE(o[r+"AxisId"],n.id)||uE(o[r+"AxisIndex"],n.componentIndex)||uE(o[r+"AxisName"],n.name))return i}}function uE(t,e){return t==="all"||mt(t)&&wr(t,e)>=0||t===e}function r1t(t){var e=iN(t);if(e){var n=e.axisPointerModel,r=e.axis.scale,i=n.option,o=n.get("status"),a=n.get("value");a!=null&&(a=r.parse(a));var s=n6(n);o==null&&(i.status=s?"show":"hide");var l=r.getExtent().slice();l[0]>l[1]&&l.reverse(),(a==null||a>l[1])&&(a=l[1]),a<l[0]&&(a=l[0]),i.value=a,s&&(i.status=e.axis.scale.isBlank()?"hide":"show")}}function iN(t){var e=(t.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[I2(t)]}function i1t(t){var e=iN(t);return e&&e.axisPointerModel}function n6(t){return!!t.get(["handle","show"])}function I2(t){return t.type+"||"+t.id}var eY={},o1t=function(t){xr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i,o){this.axisPointerClass&&r1t(n),t.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(n,i,!0)},e.prototype.updateAxisPointer=function(n,r,i,o){this._doUpdateAxisPointerClass(n,i,!1)},e.prototype.remove=function(n,r){var i=this._axisPointer;i&&i.remove(r)},e.prototype.dispose=function(n,r){this._disposeAxisPointer(r),t.prototype.dispose.apply(this,arguments)},e.prototype._doUpdateAxisPointerClass=function(n,r,i){var o=e.getAxisPointerClass(this.axisPointerClass);if(o){var a=i1t(n);a?(this._axisPointer||(this._axisPointer=new o)).render(n,a,r,i):this._disposeAxisPointer(r)}},e.prototype._disposeAxisPointer=function(n){this._axisPointer&&this._axisPointer.dispose(n),this._axisPointer=null},e.registerAxisPointerClass=function(n,r){eY[n]=r},e.getAxisPointerClass=function(n){return n&&eY[n]},e.type="axis",e}(lh);const a1t=o1t;var Ol=no();function ude(t){var e=t.mainData,n=t.datas;n||(n={main:e},t.datasAttr={main:"data"}),t.datas=t.mainData=null,fde(e,n,t),be(n,function(r){be(e.TRANSFERABLE_METHODS,function(i){r.wrapMethod(i,zr(s1t,t))})}),e.wrapMethod("cloneShallow",zr(c1t,t)),be(e.CHANGABLE_METHODS,function(r){e.wrapMethod(r,zr(l1t,t))}),Hs(n[e.dataType]===e)}function s1t(t,e){if(d1t(this)){var n=ot({},Ol(this).datas);n[this.dataType]=e,fde(e,n,t)}else oN(e,this.dataType,Ol(this).mainData,t);return e}function l1t(t,e){return t.struct&&t.struct.update(),e}function c1t(t,e){return be(Ol(e).datas,function(n,r){n!==e&&oN(n.cloneShallow(),r,e,t)}),e}function u1t(t){var e=Ol(this).mainData;return t==null||e==null?e:Ol(e).datas[t]}function f1t(){var t=Ol(this).mainData;return t==null?[{data:t}]:tn(ir(Ol(t).datas),function(e){return{type:e,data:Ol(t).datas[e]}})}function d1t(t){return Ol(t).mainData===t}function fde(t,e,n){Ol(t).datas={},be(e,function(r,i){oN(r,i,t,n)})}function oN(t,e,n,r){Ol(n).datas[e]=t,Ol(t).mainData=n,t.dataType=e,r.struct&&(t[r.structAttr]=r.struct,r.struct[r.datasAttr[e]]=t),t.getLinkedData=u1t,t.getLinkedDataAll=f1t}var h1t=function(){function t(e,n){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=e||"",this.hostTree=n}return t.prototype.isRemoved=function(){return this.dataIndex<0},t.prototype.eachNode=function(e,n,r){Qn(e)&&(r=n,n=e,e=null),e=e||{},Ot(e)&&(e={order:e});var i=e.order||"preorder",o=this[e.attr||"children"],a;i==="preorder"&&(a=n.call(r,this));for(var s=0;!a&&s<o.length;s++)o[s].eachNode(e,n,r);i==="postorder"&&n.call(r,this)},t.prototype.updateDepthAndHeight=function(e){var n=0;this.depth=e;for(var r=0;r<this.children.length;r++){var i=this.children[r];i.updateDepthAndHeight(e+1),i.height>n&&(n=i.height)}this.height=n+1},t.prototype.getNodeById=function(e){if(this.getId()===e)return this;for(var n=0,r=this.children,i=r.length;n<i;n++){var o=r[n].getNodeById(e);if(o)return o}},t.prototype.contains=function(e){if(e===this)return!0;for(var n=0,r=this.children,i=r.length;n<i;n++){var o=r[n].contains(e);if(o)return o}},t.prototype.getAncestors=function(e){for(var n=[],r=e?this:this.parentNode;r;)n.push(r),r=r.parentNode;return n.reverse(),n},t.prototype.getAncestorsIndices=function(){for(var e=[],n=this;n;)e.push(n.dataIndex),n=n.parentNode;return e.reverse(),e},t.prototype.getDescendantIndices=function(){var e=[];return this.eachNode(function(n){e.push(n.dataIndex)}),e},t.prototype.getValue=function(e){var n=this.hostTree.data;return n.getStore().get(n.getDimensionIndex(e||"value"),this.dataIndex)},t.prototype.setLayout=function(e,n){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,e,n)},t.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},t.prototype.getModel=function(e){if(!(this.dataIndex<0)){var n=this.hostTree,r=n.data.getItemModel(this.dataIndex);return r.getModel(e)}},t.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},t.prototype.setVisual=function(e,n){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,e,n)},t.prototype.getVisual=function(e){return this.hostTree.data.getItemVisual(this.dataIndex,e)},t.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},t.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},t.prototype.getChildIndex=function(){if(this.parentNode){for(var e=this.parentNode.children,n=0;n<e.length;++n)if(e[n]===this)return n;return-1}return-1},t.prototype.isAncestorOf=function(e){for(var n=e.parentNode;n;){if(n===this)return!0;n=n.parentNode}return!1},t.prototype.isDescendantOf=function(e){return e!==this&&e.isAncestorOf(this)},t}(),p1t=function(){function t(e){this.type="tree",this._nodes=[],this.hostModel=e}return t.prototype.eachNode=function(e,n,r){this.root.eachNode(e,n,r)},t.prototype.getNodeByDataIndex=function(e){var n=this.data.getRawIndex(e);return this._nodes[n]},t.prototype.getNodeById=function(e){return this.root.getNodeById(e)},t.prototype.update=function(){for(var e=this.data,n=this._nodes,r=0,i=n.length;r<i;r++)n[r].dataIndex=-1;for(var r=0,i=e.count();r<i;r++)n[e.getRawIndex(r)].dataIndex=r},t.prototype.clearLayouts=function(){this.data.clearItemLayouts()},t.createTree=function(e,n,r){var i=new t(n),o=[],a=1;s(e);function s(u,f){var d=u.value;a=Math.max(a,mt(d)?d.length:1),o.push(u);var h=new h1t(Pl(u.name,""),i);f?g1t(h,f):i.root=h,i._nodes.push(h);var g=u.children;if(g)for(var y=0;y<g.length;y++)s(g[y],h)}i.root.updateDepthAndHeight(0);var l=t3(o,{coordDimensions:["value"],dimensionsCount:a}).dimensions,c=new s2(l,n);return c.initData(o),r&&r(c),ude({mainData:c,struct:i,structAttr:"tree"}),i.update(),i},t}();function g1t(t,e){var n=e.children;t.parentNode!==e&&(n.push(t),t.parentNode=e)}const m1t=p1t;function tY(t,e,n){if(t&&wr(e,t.type)>=0){var r=n.getData().tree.root,i=t.targetNode;if(Ot(i)&&(i=r.getNodeById(i)),i&&r.contains(i))return{node:i};var o=t.targetNodeId;if(o!=null&&(i=r.getNodeById(o)))return{node:i}}}function v1t(t){for(var e=[];t;)t=t.parentNode,t&&e.push(t);return e.reverse()}function y1t(t,e){var n=v1t(t);return wr(n,e)>=0}function b1t(t,e){for(var n=[];t;){var r=t.dataIndex;n.push({name:t.name,dataIndex:r,value:e.getRawValue(r)}),t=t.parentNode}return n.reverse(),n}function S1t(t){var e=t.getData(),n=e.tree,r={};n.eachNode(function(i){for(var o=i;o&&o.depth>1;)o=o.parentNode;var a=a8e(t.ecModel,o.name||o.dataIndex+"",r);i.setVisual("decal",a)})}var $2=be,_1t=jt,YC=-1,aN=function(){function t(e){var n=e.mappingMethod,r=e.type,i=this.option=Gn(e);this.type=r,this.mappingMethod=n,this._normalizeData=x1t[n];var o=t.visualHandlers[r];this.applyVisual=o.applyVisual,this.getColorMapper=o.getColorMapper,this._normalizedToVisual=o._normalizedToVisual[n],n==="piecewise"?(fE(i),w1t(i)):n==="category"?i.categories?k1t(i):fE(i,!0):(Hs(n!=="linear"||i.dataExtent),fE(i))}return t.prototype.mapValueToVisual=function(e){var n=this._normalizeData(e);return this._normalizedToVisual(n,e)},t.prototype.getNormalizer=function(){return Or(this._normalizeData,this)},t.listVisualTypes=function(){return ir(t.visualHandlers)},t.isValidType=function(e){return t.visualHandlers.hasOwnProperty(e)},t.eachVisual=function(e,n,r){jt(e)?be(e,n,r):n.call(r,e)},t.mapVisual=function(e,n,r){var i,o=mt(e)?[]:jt(e)?{}:(i=!0,null);return t.eachVisual(e,function(a,s){var l=n.call(r,a,s);i?o=l:o[s]=l}),o},t.retrieveVisuals=function(e){var n={},r;return e&&$2(t.visualHandlers,function(i,o){e.hasOwnProperty(o)&&(n[o]=e[o],r=!0)}),r?n:null},t.prepareVisualTypes=function(e){if(mt(e))e=e.slice();else if(_1t(e)){var n=[];$2(e,function(r,i){n.push(i)}),e=n}else return[];return e.sort(function(r,i){return i==="color"&&r!=="color"&&r.indexOf("color")===0?1:-1}),e},t.dependsOn=function(e,n){return n==="color"?!!(e&&e.indexOf(n)===0):e===n},t.findPieceIndex=function(e,n,r){for(var i,o=1/0,a=0,s=n.length;a<s;a++){var l=n[a].value;if(l!=null){if(l===e||Ot(l)&&l===e+"")return a;r&&d(l,a)}}for(var a=0,s=n.length;a<s;a++){var c=n[a],u=c.interval,f=c.close;if(u){if(u[0]===-1/0){if(Uk(f[1],e,u[1]))return a}else if(u[1]===1/0){if(Uk(f[0],u[0],e))return a}else if(Uk(f[0],u[0],e)&&Uk(f[1],e,u[1]))return a;r&&d(u[0],a),r&&d(u[1],a)}}if(r)return e===1/0?n.length-1:e===-1/0?0:i;function d(h,g){var y=Math.abs(h-e);y<o&&(o=y,i=g)}},t.visualHandlers={color:{applyVisual:gb("color"),getColorMapper:function(){var e=this.option;return Or(e.mappingMethod==="category"?function(n,r){return!r&&(n=this._normalizeData(n)),Mb.call(this,n)}:function(n,r,i){var o=!!i;return!r&&(n=this._normalizeData(n)),i=hP(n,e.parsedVisual,i),o?i:Nd(i,"rgba")},this)},_normalizedToVisual:{linear:function(e){return Nd(hP(e,this.option.parsedVisual),"rgba")},category:Mb,piecewise:function(e,n){var r=i6.call(this,n);return r==null&&(r=Nd(hP(e,this.option.parsedVisual),"rgba")),r},fixed:kp}},colorHue:Hk(function(e,n){return pP(e,n)}),colorSaturation:Hk(function(e,n){return pP(e,null,n)}),colorLightness:Hk(function(e,n){return pP(e,null,null,n)}),colorAlpha:Hk(function(e,n){return ZAe(e,n)}),decal:{applyVisual:gb("decal"),_normalizedToVisual:{linear:null,category:Mb,piecewise:null,fixed:null}},opacity:{applyVisual:gb("opacity"),_normalizedToVisual:r6([0,1])},liftZ:{applyVisual:gb("liftZ"),_normalizedToVisual:{linear:kp,category:kp,piecewise:kp,fixed:kp}},symbol:{applyVisual:function(e,n,r){var i=this.mapValueToVisual(e);r("symbol",i)},_normalizedToVisual:{linear:nY,category:Mb,piecewise:function(e,n){var r=i6.call(this,n);return r==null&&(r=nY.call(this,e)),r},fixed:kp}},symbolSize:{applyVisual:gb("symbolSize"),_normalizedToVisual:r6([0,1])}},t}();function w1t(t){var e=t.pieceList;t.hasSpecialVisual=!1,be(e,function(n,r){n.originIndex=r,n.visual!=null&&(t.hasSpecialVisual=!0)})}function k1t(t){var e=t.categories,n=t.categoryMap={},r=t.visual;if($2(e,function(a,s){n[a]=s}),!mt(r)){var i=[];jt(r)?$2(r,function(a,s){var l=n[s];i[l??YC]=a}):i[YC]=r,r=dde(t,i)}for(var o=e.length-1;o>=0;o--)r[o]==null&&(delete n[e[o]],e.pop())}function fE(t,e){var n=t.visual,r=[];jt(n)?$2(n,function(o){r.push(o)}):n!=null&&r.push(n);var i={color:1,symbol:1};!e&&r.length===1&&!i.hasOwnProperty(t.type)&&(r[1]=r[0]),dde(t,r)}function Hk(t){return{applyVisual:function(e,n,r){var i=this.mapValueToVisual(e);r("color",t(n("color"),i))},_normalizedToVisual:r6([0,1])}}function nY(t){var e=this.option.visual;return e[Math.round(u0(t,[0,1],[0,e.length-1],!0))]||{}}function gb(t){return function(e,n,r){r(t,this.mapValueToVisual(e))}}function Mb(t){var e=this.option.visual;return e[this.option.loop&&t!==YC?t%e.length:t]}function kp(){return this.option.visual[0]}function r6(t){return{linear:function(e){return u0(e,t,this.option.visual,!0)},category:Mb,piecewise:function(e,n){var r=i6.call(this,n);return r==null&&(r=u0(e,t,this.option.visual,!0)),r},fixed:kp}}function i6(t){var e=this.option,n=e.pieceList;if(e.hasSpecialVisual){var r=aN.findPieceIndex(t,n),i=n[r];if(i&&i.visual)return i.visual[this.type]}}function dde(t,e){return t.visual=e,t.type==="color"&&(t.parsedVisual=tn(e,function(n){var r=dc(n);return r||[0,0,0,1]})),e}var x1t={linear:function(t){return u0(t,this.option.dataExtent,[0,1],!0)},piecewise:function(t){var e=this.option.pieceList,n=aN.findPieceIndex(t,e,!0);if(n!=null)return u0(n,[0,e.length-1],[0,1],!0)},category:function(t){var e=this.option.categories?this.option.categoryMap[t]:t;return e??YC},fixed:Jo};function Uk(t,e,n){return t?e<=n:e<n}const C1t=aN;function Hm(t){return"_EC_"+t}var T1t=function(){function t(e){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=e||!1}return t.prototype.isDirected=function(){return this._directed},t.prototype.addNode=function(e,n){e=e==null?""+n:""+e;var r=this._nodesMap;if(!r[Hm(e)]){var i=new xp(e,n);return i.hostGraph=this,this.nodes.push(i),r[Hm(e)]=i,i}},t.prototype.getNodeByIndex=function(e){var n=this.data.getRawIndex(e);return this.nodes[n]},t.prototype.getNodeById=function(e){return this._nodesMap[Hm(e)]},t.prototype.addEdge=function(e,n,r){var i=this._nodesMap,o=this._edgesMap;if(Zr(e)&&(e=this.nodes[e]),Zr(n)&&(n=this.nodes[n]),e instanceof xp||(e=i[Hm(e)]),n instanceof xp||(n=i[Hm(n)]),!(!e||!n)){var a=e.id+"-"+n.id,s=new hde(e,n,r);return s.hostGraph=this,this._directed&&(e.outEdges.push(s),n.inEdges.push(s)),e.edges.push(s),e!==n&&n.edges.push(s),this.edges.push(s),o[a]=s,s}},t.prototype.getEdgeByIndex=function(e){var n=this.edgeData.getRawIndex(e);return this.edges[n]},t.prototype.getEdge=function(e,n){e instanceof xp&&(e=e.id),n instanceof xp&&(n=n.id);var r=this._edgesMap;return this._directed?r[e+"-"+n]:r[e+"-"+n]||r[n+"-"+e]},t.prototype.eachNode=function(e,n){for(var r=this.nodes,i=r.length,o=0;o<i;o++)r[o].dataIndex>=0&&e.call(n,r[o],o)},t.prototype.eachEdge=function(e,n){for(var r=this.edges,i=r.length,o=0;o<i;o++)r[o].dataIndex>=0&&r[o].node1.dataIndex>=0&&r[o].node2.dataIndex>=0&&e.call(n,r[o],o)},t.prototype.breadthFirstTraverse=function(e,n,r,i){if(n instanceof xp||(n=this._nodesMap[Hm(n)]),!!n){for(var o=r==="out"?"outEdges":r==="in"?"inEdges":"edges",a=0;a<this.nodes.length;a++)this.nodes[a].__visited=!1;if(!e.call(i,n,null))for(var s=[n];s.length;)for(var l=s.shift(),c=l[o],a=0;a<c.length;a++){var u=c[a],f=u.node1===l?u.node2:u.node1;if(!f.__visited){if(e.call(i,f,l))return;s.push(f),f.__visited=!0}}}},t.prototype.update=function(){for(var e=this.data,n=this.edgeData,r=this.nodes,i=this.edges,o=0,a=r.length;o<a;o++)r[o].dataIndex=-1;for(var o=0,a=e.count();o<a;o++)r[e.getRawIndex(o)].dataIndex=o;n.filterSelf(function(s){var l=i[n.getRawIndex(s)];return l.node1.dataIndex>=0&&l.node2.dataIndex>=0});for(var o=0,a=i.length;o<a;o++)i[o].dataIndex=-1;for(var o=0,a=n.count();o<a;o++)i[n.getRawIndex(o)].dataIndex=o},t.prototype.clone=function(){for(var e=new t(this._directed),n=this.nodes,r=this.edges,i=0;i<n.length;i++)e.addNode(n[i].id,n[i].dataIndex);for(var i=0;i<r.length;i++){var o=r[i];e.addEdge(o.node1.id,o.node2.id,o.dataIndex)}return e},t}(),xp=function(){function t(e,n){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=e??"",this.dataIndex=n??-1}return t.prototype.degree=function(){return this.edges.length},t.prototype.inDegree=function(){return this.inEdges.length},t.prototype.outDegree=function(){return this.outEdges.length},t.prototype.getModel=function(e){if(!(this.dataIndex<0)){var n=this.hostGraph,r=n.data.getItemModel(this.dataIndex);return r.getModel(e)}},t.prototype.getAdjacentDataIndices=function(){for(var e={edge:[],node:[]},n=0;n<this.edges.length;n++){var r=this.edges[n];r.dataIndex<0||(e.edge.push(r.dataIndex),e.node.push(r.node1.dataIndex,r.node2.dataIndex))}return e},t.prototype.getTrajectoryDataIndices=function(){for(var e=vn(),n=vn(),r=0;r<this.edges.length;r++){var i=this.edges[r];if(!(i.dataIndex<0)){e.set(i.dataIndex,!0);for(var o=[i.node1],a=[i.node2],s=0;s<o.length;){var l=o[s];s++,n.set(l.dataIndex,!0);for(var c=0;c<l.inEdges.length;c++)e.set(l.inEdges[c].dataIndex,!0),o.push(l.inEdges[c].node1)}for(s=0;s<a.length;){var u=a[s];s++,n.set(u.dataIndex,!0);for(var c=0;c<u.outEdges.length;c++)e.set(u.outEdges[c].dataIndex,!0),a.push(u.outEdges[c].node2)}}}return{edge:e.keys(),node:n.keys()}},t}(),hde=function(){function t(e,n,r){this.dataIndex=-1,this.node1=e,this.node2=n,this.dataIndex=r??-1}return t.prototype.getModel=function(e){if(!(this.dataIndex<0)){var n=this.hostGraph,r=n.edgeData.getItemModel(this.dataIndex);return r.getModel(e)}},t.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},t.prototype.getTrajectoryDataIndices=function(){var e=vn(),n=vn();e.set(this.dataIndex,!0);for(var r=[this.node1],i=[this.node2],o=0;o<r.length;){var a=r[o];o++,n.set(a.dataIndex,!0);for(var s=0;s<a.inEdges.length;s++)e.set(a.inEdges[s].dataIndex,!0),r.push(a.inEdges[s].node1)}for(o=0;o<i.length;){var l=i[o];o++,n.set(l.dataIndex,!0);for(var s=0;s<l.outEdges.length;s++)e.set(l.outEdges[s].dataIndex,!0),i.push(l.outEdges[s].node2)}return{edge:e.keys(),node:n.keys()}},t}();function pde(t,e){return{getValue:function(n){var r=this[t][e];return r.getStore().get(r.getDimensionIndex(n||"value"),this.dataIndex)},setVisual:function(n,r){this.dataIndex>=0&&this[t][e].setItemVisual(this.dataIndex,n,r)},getVisual:function(n){return this[t][e].getItemVisual(this.dataIndex,n)},setLayout:function(n,r){this.dataIndex>=0&&this[t][e].setItemLayout(this.dataIndex,n,r)},getLayout:function(){return this[t][e].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[t][e].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[t][e].getRawIndex(this.dataIndex)}}}wc(xp,pde("hostGraph","data"));wc(hde,pde("hostGraph","edgeData"));const A1t=T1t;function P1t(t,e,n,r,i){for(var o=new A1t(r),a=0;a<t.length;a++)o.addNode(xg(t[a].id,t[a].name,a),a);for(var s=[],l=[],c=0,a=0;a<e.length;a++){var u=e[a],f=u.source,d=u.target;o.addEdge(f,d,c)&&(l.push(u),s.push(xg(Pl(u.id,null),f+" > "+d)),c++)}var h=n.get("coordinateSystem"),g;if(h==="cartesian2d"||h==="polar")g=v6e(t,n);else{var y=XT.get(h),S=y?y.dimensions||[]:[];wr(S,"value")<0&&S.concat(["value"]);var v=t3(t,{coordDimensions:S,encodeDefine:n.getEncode()}).dimensions;g=new s2(v,n),g.initData(t)}var _=new s2(["value"],n);return _.initData(l,s),i&&i(g,_),ude({mainData:g,struct:o,structAttr:"graph",datas:{node:g,edge:_},datasAttr:{node:"data",edge:"edgeData"}}),o.update(),o}var E1t=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return t}(),O1t=function(t){xr(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultShape=function(){return new E1t},e.prototype.buildPath=function(n,r){var i=r.extent;n.moveTo(r.x1,r.y1),n.bezierCurveTo(r.cpx1,r.cpy1,r.cpx2,r.cpy2,r.x2,r.y2),r.orient==="vertical"?(n.lineTo(r.x2+i,r.y2),n.bezierCurveTo(r.cpx2+i,r.cpy2,r.cpx1+i,r.cpy1,r.x1+i,r.y1)):(n.lineTo(r.x2,r.y2+i),n.bezierCurveTo(r.cpx2,r.cpy2+i,r.cpx1,r.cpy1+i,r.x1,r.y1+i)),n.closePath()},e.prototype.highlight=function(){V4(this)},e.prototype.downplay=function(){B4(this)},e}(Fr),I1t=function(t){xr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n._focusAdjacencyDisabled=!1,n}return e.prototype.render=function(n,r,i){var o=this,a=n.getGraph(),s=this.group,l=n.layoutInfo,c=l.width,u=l.height,f=n.getData(),d=n.getData("edge"),h=n.get("orient");this._model=n,s.removeAll(),s.x=l.x,s.y=l.y,a.eachEdge(function(g){var y=new O1t,S=Vr(y);S.dataIndex=g.dataIndex,S.seriesIndex=n.seriesIndex,S.dataType="edge";var v=g.getModel(),_=v.getModel("lineStyle"),x=_.get("curveness"),C=g.node1.getLayout(),k=g.node1.getModel(),m=k.get("localX"),T=k.get("localY"),E=g.node2.getLayout(),I=g.node2.getModel(),D=I.get("localX"),F=I.get("localY"),R=g.getLayout(),z,B,ie,oe,_e,Ae,Pe,Se;y.shape.extent=Math.max(1,R.dy),y.shape.orient=h,h==="vertical"?(z=(m!=null?m*c:C.x)+R.sy,B=(T!=null?T*u:C.y)+C.dy,ie=(D!=null?D*c:E.x)+R.ty,oe=F!=null?F*u:E.y,_e=z,Ae=B*(1-x)+oe*x,Pe=ie,Se=B*x+oe*(1-x)):(z=(m!=null?m*c:C.x)+C.dx,B=(T!=null?T*u:C.y)+R.sy,ie=D!=null?D*c:E.x,oe=(F!=null?F*u:E.y)+R.ty,_e=z*(1-x)+ie*x,Ae=B,Pe=z*x+ie*(1-x),Se=oe),y.setShape({x1:z,y1:B,x2:ie,y2:oe,cpx1:_e,cpy1:Ae,cpx2:Pe,cpy2:Se}),y.useStyle(_.getItemStyle()),rY(y.style,h,g);var se=""+v.get("value"),ne=I9(v,"edgeLabel");G4(y,ne,{labelFetcher:{getFormattedLabel:function(W,ae,te,ue,ce,fe){return n.getFormattedLabel(W,ae,"edge",ue,Fv(ce,ne.normal&&ne.normal.get("formatter"),se),fe)}},labelDataIndex:g.dataIndex,defaultText:se}),y.setTextConfig({position:"inside"});var J=v.getModel("emphasis");T9(y,v,"lineStyle",function(W){var ae=W.getItemStyle();return rY(ae,h,g),ae}),s.add(y),d.setItemGraphicEl(g.dataIndex,y);var V=J.get("focus");j4(y,V==="adjacency"?g.getAdjacentDataIndices():V==="trajectory"?g.getTrajectoryDataIndices():V,J.get("blurScope"),J.get("disabled"))}),a.eachNode(function(g){var y=g.getLayout(),S=g.getModel(),v=S.get("localX"),_=S.get("localY"),x=S.getModel("emphasis"),C=new Qo({shape:{x:v!=null?v*c:y.x,y:_!=null?_*u:y.y,width:y.dx,height:y.dy},style:S.getModel("itemStyle").getItemStyle(),z2:10});G4(C,I9(S),{labelFetcher:{getFormattedLabel:function(m,T){return n.getFormattedLabel(m,T,"node")}},labelDataIndex:g.dataIndex,defaultText:g.id}),C.disableLabelAnimation=!0,C.setStyle("fill",g.getVisual("color")),C.setStyle("decal",g.getVisual("style").decal),T9(C,S),s.add(C),f.setItemGraphicEl(g.dataIndex,C),Vr(C).dataType="node";var k=x.get("focus");j4(C,k==="adjacency"?g.getAdjacentDataIndices():k==="trajectory"?g.getTrajectoryDataIndices():k,x.get("blurScope"),x.get("disabled"))}),f.eachItemGraphicEl(function(g,y){var S=f.getItemModel(y);S.get("draggable")&&(g.drift=function(v,_){o._focusAdjacencyDisabled=!0,this.shape.x+=v,this.shape.y+=_,this.dirty(),i.dispatchAction({type:"dragNode",seriesId:n.id,dataIndex:f.getRawIndex(y),localX:this.shape.x/c,localY:this.shape.y/u})},g.ondragend=function(){o._focusAdjacencyDisabled=!1},g.draggable=!0,g.cursor="move")}),!this._data&&n.isAnimationEnabled()&&s.setClipPath($1t(s.getBoundingRect(),n,function(){s.removeClipPath()})),this._data=n.getData()},e.prototype.dispose=function(){},e.type="sankey",e}(Rd);function rY(t,e,n){switch(t.fill){case"source":t.fill=n.node1.getVisual("color"),t.decal=n.node1.getVisual("style").decal;break;case"target":t.fill=n.node2.getVisual("color"),t.decal=n.node2.getVisual("style").decal;break;case"gradient":var r=n.node1.getVisual("color"),i=n.node2.getVisual("color");Ot(r)&&Ot(i)&&(t.fill=new sne(0,0,+(e==="horizontal"),+(e==="vertical"),[{color:r,offset:0},{color:i,offset:1}]))}}function $1t(t,e,n){var r=new Qo({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return Mv(r,{shape:{width:t.width+20}},e,n),r}const F1t=I1t;var L1t=function(t){xr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.getInitialData=function(n,r){var i=n.edges||n.links,o=n.data||n.nodes,a=n.levels;this.levelModels=[];for(var s=this.levelModels,l=0;l<a.length;l++)a[l].depth!=null&&a[l].depth>=0&&(s[a[l].depth]=new co(a[l],this,r));if(o&&i){var c=P1t(o,i,this,!0,u);return c.data}function u(f,d){f.wrapMethod("getItemModel",function(h,g){var y=h.parentModel,S=y.getData().getItemLayout(g);if(S){var v=S.depth,_=y.levelModels[v];_&&(h.parentModel=_)}return h}),d.wrapMethod("getItemModel",function(h,g){var y=h.parentModel,S=y.getGraph().getEdgeByIndex(g),v=S.node1.getLayout();if(v){var _=v.depth,x=y.levelModels[_];x&&(h.parentModel=x)}return h})}},e.prototype.setNodePosition=function(n,r){var i=this.option.data||this.option.nodes,o=i[n];o.localX=r[0],o.localY=r[1]},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.formatTooltip=function(n,r,i){function o(h){return isNaN(h)||h==null}if(i==="edge"){var a=this.getDataParams(n,i),s=a.data,l=a.value,c=s.source+" -- "+s.target;return Tg("nameValue",{name:c,value:l,noValue:o(l)})}else{var u=this.getGraph().getNodeByIndex(n),f=u.getLayout().value,d=this.getDataParams(n,i).data.name;return Tg("nameValue",{name:d!=null?d+"":null,value:f,noValue:o(f)})}},e.prototype.optionUpdated=function(){},e.prototype.getDataParams=function(n,r){var i=t.prototype.getDataParams.call(this,n,r);if(i.value==null&&r==="node"){var o=this.getGraph().getNodeByIndex(n),a=o.getLayout().value;i.value=a}return i},e.type="series.sankey",e.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},e}(Ag);const D1t=L1t;function N1t(t,e){t.eachSeriesByType("sankey",function(n){var r=n.get("nodeWidth"),i=n.get("nodeGap"),o=M1t(n,e);n.layoutInfo=o;var a=o.width,s=o.height,l=n.getGraph(),c=l.nodes,u=l.edges;z1t(c);var f=Za(c,function(y){return y.getLayout().value===0}),d=f.length!==0?0:n.get("layoutIterations"),h=n.get("orient"),g=n.get("nodeAlign");R1t(c,u,r,i,a,s,d,h,g)})}function M1t(t,e){return f0(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function R1t(t,e,n,r,i,o,a,s,l){V1t(t,e,n,i,o,s,l),U1t(t,e,o,i,r,a,s),Q1t(t,s)}function z1t(t){be(t,function(e){var n=jd(e.outEdges,KC),r=jd(e.inEdges,KC),i=e.getValue()||0,o=Math.max(n,r,i);e.setLayout({value:o},!0)})}function V1t(t,e,n,r,i,o,a){for(var s=[],l=[],c=[],u=[],f=0,d=0;d<e.length;d++)s[d]=1;for(var d=0;d<t.length;d++)l[d]=t[d].inEdges.length,l[d]===0&&c.push(t[d]);for(var h=-1;c.length;){for(var g=0;g<c.length;g++){var y=c[g],S=y.hostGraph.data.getRawDataItem(y.dataIndex),v=S.depth!=null&&S.depth>=0;v&&S.depth>h&&(h=S.depth),y.setLayout({depth:v?S.depth:f},!0),o==="vertical"?y.setLayout({dy:n},!0):y.setLayout({dx:n},!0);for(var _=0;_<y.outEdges.length;_++){var x=y.outEdges[_],C=e.indexOf(x);s[C]=0;var k=x.node2,m=t.indexOf(k);--l[m]===0&&u.indexOf(k)<0&&u.push(k)}}++f,c=u,u=[]}for(var d=0;d<s.length;d++)if(s[d]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var T=h>f-1?h:f-1;a&&a!=="left"&&B1t(t,a,o,T);var E=o==="vertical"?(i-n)/T:(r-n)/T;H1t(t,E,o)}function gde(t){var e=t.hostGraph.data.getRawDataItem(t.dataIndex);return e.depth!=null&&e.depth>=0}function B1t(t,e,n,r){if(e==="right"){for(var i=[],o=t,a=0;o.length;){for(var s=0;s<o.length;s++){var l=o[s];l.setLayout({skNodeHeight:a},!0);for(var c=0;c<l.inEdges.length;c++){var u=l.inEdges[c];i.indexOf(u.node1)<0&&i.push(u.node1)}}o=i,i=[],++a}be(t,function(f){gde(f)||f.setLayout({depth:Math.max(0,r-f.getLayout().skNodeHeight)},!0)})}else e==="justify"&&j1t(t,r)}function j1t(t,e){be(t,function(n){!gde(n)&&!n.outEdges.length&&n.setLayout({depth:e},!0)})}function H1t(t,e,n){be(t,function(r){var i=r.getLayout().depth*e;n==="vertical"?r.setLayout({y:i},!0):r.setLayout({x:i},!0)})}function U1t(t,e,n,r,i,o,a){var s=W1t(t,a);G1t(s,e,n,r,i,a),dE(s,i,n,r,a);for(var l=1;o>0;o--)l*=.99,q1t(s,l,a),dE(s,i,n,r,a),Z1t(s,l,a),dE(s,i,n,r,a)}function W1t(t,e){var n=[],r=e==="vertical"?"y":"x",i=ePe(t,function(o){return o.getLayout()[r]});return i.keys.sort(function(o,a){return o-a}),be(i.keys,function(o){n.push(i.buckets.get(o))}),n}function G1t(t,e,n,r,i,o){var a=1/0;be(t,function(s){var l=s.length,c=0;be(s,function(f){c+=f.getLayout().value});var u=o==="vertical"?(r-(l-1)*i)/c:(n-(l-1)*i)/c;u<a&&(a=u)}),be(t,function(s){be(s,function(l,c){var u=l.getLayout().value*a;o==="vertical"?(l.setLayout({x:c},!0),l.setLayout({dx:u},!0)):(l.setLayout({y:c},!0),l.setLayout({dy:u},!0))})}),be(e,function(s){var l=+s.getValue()*a;s.setLayout({dy:l},!0)})}function dE(t,e,n,r,i){var o=i==="vertical"?"x":"y";be(t,function(a){a.sort(function(y,S){return y.getLayout()[o]-S.getLayout()[o]});for(var s,l,c,u=0,f=a.length,d=i==="vertical"?"dx":"dy",h=0;h<f;h++)l=a[h],c=u-l.getLayout()[o],c>0&&(s=l.getLayout()[o]+c,i==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0)),u=l.getLayout()[o]+l.getLayout()[d]+e;var g=i==="vertical"?r:n;if(c=u-e-g,c>0){s=l.getLayout()[o]-c,i==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0),u=s;for(var h=f-2;h>=0;--h)l=a[h],c=l.getLayout()[o]+l.getLayout()[d]+e-u,c>0&&(s=l.getLayout()[o]-c,i==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0)),u=l.getLayout()[o]}})}function q1t(t,e,n){be(t.slice().reverse(),function(r){be(r,function(i){if(i.outEdges.length){var o=jd(i.outEdges,Y1t,n)/jd(i.outEdges,KC);if(isNaN(o)){var a=i.outEdges.length;o=a?jd(i.outEdges,K1t,n)/a:0}if(n==="vertical"){var s=i.getLayout().x+(o-dh(i,n))*e;i.setLayout({x:s},!0)}else{var l=i.getLayout().y+(o-dh(i,n))*e;i.setLayout({y:l},!0)}}})})}function Y1t(t,e){return dh(t.node2,e)*t.getValue()}function K1t(t,e){return dh(t.node2,e)}function X1t(t,e){return dh(t.node1,e)*t.getValue()}function J1t(t,e){return dh(t.node1,e)}function dh(t,e){return e==="vertical"?t.getLayout().x+t.getLayout().dx/2:t.getLayout().y+t.getLayout().dy/2}function KC(t){return t.getValue()}function jd(t,e,n){for(var r=0,i=t.length,o=-1;++o<i;){var a=+e(t[o],n);isNaN(a)||(r+=a)}return r}function Z1t(t,e,n){be(t,function(r){be(r,function(i){if(i.inEdges.length){var o=jd(i.inEdges,X1t,n)/jd(i.inEdges,KC);if(isNaN(o)){var a=i.inEdges.length;o=a?jd(i.inEdges,J1t,n)/a:0}if(n==="vertical"){var s=i.getLayout().x+(o-dh(i,n))*e;i.setLayout({x:s},!0)}else{var l=i.getLayout().y+(o-dh(i,n))*e;i.setLayout({y:l},!0)}}})})}function Q1t(t,e){var n=e==="vertical"?"x":"y";be(t,function(r){r.outEdges.sort(function(i,o){return i.node2.getLayout()[n]-o.node2.getLayout()[n]}),r.inEdges.sort(function(i,o){return i.node1.getLayout()[n]-o.node1.getLayout()[n]})}),be(t,function(r){var i=0,o=0;be(r.outEdges,function(a){a.setLayout({sy:i},!0),i+=a.getLayout().dy}),be(r.inEdges,function(a){a.setLayout({ty:o},!0),o+=a.getLayout().dy})})}function e2t(t){t.eachSeriesByType("sankey",function(e){var n=e.getGraph(),r=n.nodes,i=n.edges;if(r.length){var o=1/0,a=-1/0;be(r,function(s){var l=s.getLayout().value;l<o&&(o=l),l>a&&(a=l)}),be(r,function(s){var l=new C1t({type:"color",mappingMethod:"linear",dataExtent:[o,a],visual:e.get("color")}),c=l.mapValueToVisual(s.getLayout().value),u=s.getModel().get(["itemStyle","color"]);u!=null?(s.setVisual("color",u),s.setVisual("style",{fill:u})):(s.setVisual("color",c),s.setVisual("style",{fill:c}))})}i.length&&be(i,function(s){var l=s.getModel().get("lineStyle");s.setVisual("style",l)})})}function t2t(t){t.registerChartView(F1t),t.registerSeriesModel(D1t),t.registerLayout(N1t),t.registerVisual(e2t),t.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(e,n){n.eachComponent({mainType:"series",subType:"sankey",query:e},function(r){r.setNodePosition(e.dataIndex,[e.localX,e.localY])})})}var n2t=2,r2t=4,i2t=function(t){xr(e,t);function e(n,r,i,o){var a=t.call(this)||this;a.z2=n2t,a.textConfig={inside:!0},Vr(a).seriesIndex=r.seriesIndex;var s=new ea({z2:r2t,silent:n.getModel().get(["label","silent"])});return a.setTextContent(s),a.updateData(!0,n,r,i,o),a}return e.prototype.updateData=function(n,r,i,o,a){this.node=r,r.piece=this,i=i||this._seriesModel,o=o||this._ecModel;var s=this;Vr(s).dataIndex=r.dataIndex;var l=r.getModel(),c=l.getModel("emphasis"),u=r.getLayout(),f=ot({},u);f.label=null;var d=r.getVisual("style");d.lineJoin="bevel";var h=r.getVisual("decal");h&&(d.decal=eC(h,a));var g=Sv(l.getModel("itemStyle"),f,!0);ot(f,g),be(pc,function(_){var x=s.ensureState(_),C=l.getModel([_,"itemStyle"]);x.style=C.getItemStyle();var k=Sv(C,f);k&&(x.shape=k)}),n?(s.setShape(f),s.shape.r=u.r0,Mv(s,{shape:{r:u.r}},i,r.dataIndex)):(Cg(s,{shape:f},i),une(s)),s.useStyle(d),this._updateLabel(i);var y=l.getShallow("cursor");y&&s.attr("cursor",y),this._seriesModel=i||this._seriesModel,this._ecModel=o||this._ecModel;var S=c.get("focus"),v=S==="ancestor"?r.getAncestorsIndices():S==="descendant"?r.getDescendantIndices():S;j4(this,v,c.get("blurScope"),c.get("disabled"))},e.prototype._updateLabel=function(n){var r=this,i=this.node.getModel(),o=i.getModel("label"),a=this.node.getLayout(),s=a.endAngle-a.startAngle,l=(a.startAngle+a.endAngle)/2,c=Math.cos(l),u=Math.sin(l),f=this,d=f.getTextContent(),h=this.node.dataIndex,g=o.get("minAngle")/180*Math.PI,y=o.get("show")&&!(g!=null&&Math.abs(s)<g);d.ignore=!y,be(e2,function(v){var _=v==="normal"?i.getModel("label"):i.getModel([v,"label"]),x=v==="normal",C=x?d:d.ensureState(v),k=n.getFormattedLabel(h,v);x&&(k=k||r.node.name),C.style=Cf(_,{},null,v!=="normal",!0),k&&(C.style.text=k);var m=_.get("show");m!=null&&!x&&(C.ignore=!m);var T=S(_,"position"),E=x?f:f.states[v],I=E.style.fill;E.textConfig={outsideFill:_.get("color")==="inherit"?I:null,inside:T!=="outside"};var D,F=S(_,"distance")||0,R=S(_,"align");T==="outside"?(D=a.r+F,R=l>Math.PI/2?"right":"left"):!R||R==="center"?(s===2*Math.PI&&a.r0===0?D=0:D=(a.r+a.r0)/2,R="center"):R==="left"?(D=a.r0+F,l>Math.PI/2&&(R="right")):R==="right"&&(D=a.r-F,l>Math.PI/2&&(R="left")),C.style.align=R,C.style.verticalAlign=S(_,"verticalAlign")||"middle",C.x=D*c+a.cx,C.y=D*u+a.cy;var z=S(_,"rotate"),B=0;z==="radial"?(B=hv(-l),B>Math.PI/2&&B<Math.PI*1.5&&(B+=Math.PI)):z==="tangential"?(B=Math.PI/2-l,B>Math.PI/2?B-=Math.PI:B<-Math.PI/2&&(B+=Math.PI)):Zr(z)&&(B=z*Math.PI/180),C.rotation=hv(B)});function S(v,_){var x=v.get(_);return x??o.get(_)}d.dirtyStyle()},e}(pS);const iY=i2t;var o6="sunburstRootToNode",oY="sunburstHighlight",o2t="sunburstUnhighlight";function a2t(t){t.registerAction({type:o6,update:"updateView"},function(e,n){n.eachComponent({mainType:"series",subType:"sunburst",query:e},r);function r(i,o){var a=tY(e,[o6],i);if(a){var s=i.getViewRoot();s&&(e.direction=y1t(s,a.node)?"rollUp":"drillDown"),i.resetViewRoot(a.node)}}}),t.registerAction({type:oY,update:"none"},function(e,n,r){e=ot({},e),n.eachComponent({mainType:"series",subType:"sunburst",query:e},i);function i(o){var a=tY(e,[oY],o);a&&(e.dataIndex=a.node.dataIndex)}r.dispatchAction(ot(e,{type:"highlight"}))}),t.registerAction({type:o2t,update:"updateView"},function(e,n,r){e=ot({},e),r.dispatchAction(ot(e,{type:"downplay"}))})}var s2t=function(t){xr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i,o){var a=this;this.seriesModel=n,this.api=i,this.ecModel=r;var s=n.getData(),l=s.tree.root,c=n.getViewRoot(),u=this.group,f=n.get("renderLabelForZeroData"),d=[];c.eachNode(function(_){d.push(_)});var h=this._oldChildren||[];g(d,h),v(l,c),this._initEvents(),this._oldChildren=d;function g(_,x){if(_.length===0&&x.length===0)return;new Are(x,_,C,C).add(k).update(k).remove(zr(k,null)).execute();function C(m){return m.getId()}function k(m,T){var E=m==null?null:_[m],I=T==null?null:x[T];y(E,I)}}function y(_,x){if(!f&&_&&!_.getValue()&&(_=null),_!==l&&x!==l){if(x&&x.piece)_?(x.piece.updateData(!1,_,n,r,i),s.setItemGraphicEl(_.dataIndex,x.piece)):S(x);else if(_){var C=new iY(_,n,r,i);u.add(C),s.setItemGraphicEl(_.dataIndex,C)}}}function S(_){_&&_.piece&&(u.remove(_.piece),_.piece=null)}function v(_,x){x.depth>0?(a.virtualPiece?a.virtualPiece.updateData(!1,_,n,r,i):(a.virtualPiece=new iY(_,n,r,i),u.add(a.virtualPiece)),x.piece.off("click"),a.virtualPiece.on("click",function(C){a._rootToNode(x.parentNode)})):a.virtualPiece&&(u.remove(a.virtualPiece),a.virtualPiece=null)}},e.prototype._initEvents=function(){var n=this;this.group.off("click"),this.group.on("click",function(r){var i=!1,o=n.seriesModel.getViewRoot();o.eachNode(function(a){if(!i&&a.piece&&a.piece===r.target){var s=a.getModel().get("nodeClick");if(s==="rootToNode")n._rootToNode(a);else if(s==="link"){var l=a.getModel(),c=l.get("link");if(c){var u=l.get("target",!0)||"_blank";F9(c,u)}}i=!0}})})},e.prototype._rootToNode=function(n){n!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:o6,from:this.uid,seriesId:this.seriesModel.id,targetNode:n})},e.prototype.containPoint=function(n,r){var i=r.getData(),o=i.getItemLayout(0);if(o){var a=n[0]-o.cx,s=n[1]-o.cy,l=Math.sqrt(a*a+s*s);return l<=o.r&&l>=o.r0}},e.type="sunburst",e}(Rd);const l2t=s2t;var c2t=function(t){xr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.ignoreStyleOnData=!0,n}return e.prototype.getInitialData=function(n,r){var i={name:n.name,children:n.data};mde(i);var o=this._levelModels=tn(n.levels||[],function(l){return new co(l,this,r)},this),a=m1t.createTree(i,this,s);function s(l){l.wrapMethod("getItemModel",function(c,u){var f=a.getNodeByDataIndex(u),d=o[f.depth];return d&&(c.parentModel=d),c})}return a.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.getDataParams=function(n){var r=t.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(n);return r.treePathInfo=b1t(i,this),r},e.prototype.getLevelModel=function(n){return this._levelModels&&this._levelModels[n.depth]},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(n){n?this._viewRoot=n:n=this._viewRoot;var r=this.getRawData().tree.root;(!n||n!==r&&!r.contains(n))&&(this._viewRoot=r)},e.prototype.enableAriaDecal=function(){S1t(this)},e.type="series.sunburst",e.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},e}(Ag);function mde(t){var e=0;be(t.children,function(r){mde(r);var i=r.value;mt(i)&&(i=i[0]),e+=i});var n=t.value;mt(n)&&(n=n[0]),(n==null||isNaN(n))&&(n=e),n<0&&(n=0),mt(t.value)?t.value[0]=n:t.value=n}const u2t=c2t;var aY=Math.PI/180;function f2t(t,e,n){e.eachSeriesByType(t,function(r){var i=r.get("center"),o=r.get("radius");mt(o)||(o=[0,o]),mt(i)||(i=[i,i]);var a=n.getWidth(),s=n.getHeight(),l=Math.min(a,s),c=Kr(i[0],a),u=Kr(i[1],s),f=Kr(o[0],l/2),d=Kr(o[1],l/2),h=-r.get("startAngle")*aY,g=r.get("minAngle")*aY,y=r.getData().tree.root,S=r.getViewRoot(),v=S.depth,_=r.get("sort");_!=null&&vde(S,_);var x=0;be(S.children,function(oe){!isNaN(oe.getValue())&&x++});var C=S.getValue(),k=Math.PI/(C||x)*2,m=S.depth>0,T=S.height-(m?-1:1),E=(d-f)/(T||1),I=r.get("clockwise"),D=r.get("stillShowZeroSum"),F=I?1:-1,R=function(oe,_e){if(oe){var Ae=_e;if(oe!==y){var Pe=oe.getValue(),Se=C===0&&D?k:Pe*k;Se<g&&(Se=g),Ae=_e+F*Se;var se=oe.depth-v-(m?-1:1),ne=f+E*se,J=f+E*(se+1),V=r.getLevelModel(oe);if(V){var W=V.get("r0",!0),ae=V.get("r",!0),te=V.get("radius",!0);te!=null&&(W=te[0],ae=te[1]),W!=null&&(ne=Kr(W,l/2)),ae!=null&&(J=Kr(ae,l/2))}oe.setLayout({angle:Se,startAngle:_e,endAngle:Ae,clockwise:I,cx:c,cy:u,r0:ne,r:J})}if(oe.children&&oe.children.length){var ue=0;be(oe.children,function(ce){ue+=R(ce,_e+ue)})}return Ae-_e}};if(m){var z=f,B=f+E,ie=Math.PI*2;y.setLayout({angle:ie,startAngle:h,endAngle:h+ie,clockwise:I,cx:c,cy:u,r0:z,r:B})}R(S,h)})}function vde(t,e){var n=t.children||[];t.children=d2t(n,e),n.length&&be(t.children,function(r){vde(r,e)})}function d2t(t,e){if(Qn(e)){var n=tn(t,function(i,o){var a=i.getValue();return{params:{depth:i.depth,height:i.height,dataIndex:i.dataIndex,getValue:function(){return a}},index:o}});return n.sort(function(i,o){return e(i.params,o.params)}),tn(n,function(i){return t[i.index]})}else{var r=e==="asc";return t.sort(function(i,o){var a=(i.getValue()-o.getValue())*(r?1:-1);return a===0?(i.dataIndex-o.dataIndex)*(r?-1:1):a})}}function h2t(t){var e={};function n(r,i,o){for(var a=r;a&&a.depth>1;)a=a.parentNode;var s=i.getColorFromPalette(a.name||a.dataIndex+"",e);return r.depth>1&&Ot(s)&&(s=c9(s,(r.depth-1)/(o-1)*.5)),s}t.eachSeriesByType("sunburst",function(r){var i=r.getData(),o=i.tree;o.eachNode(function(a){var s=a.getModel(),l=s.getModel("itemStyle").getItemStyle();l.fill||(l.fill=n(a,r,o.root.height));var c=i.ensureUniqueItemVisual(a.dataIndex,"style");ot(c,l)})})}function yde(t){t.registerChartView(l2t),t.registerSeriesModel(u2t),t.registerLayout(zr(f2t,"sunburst")),t.registerProcessor(zr(sde,"sunburst")),t.registerVisual(h2t),a2t(t)}var Rp=no(),sY=Gn,hE=Or,p2t=function(){function t(){this._dragging=!1,this.animationThreshold=15}return t.prototype.render=function(e,n,r,i){var o=n.get("value"),a=n.get("status");if(this._axisModel=e,this._axisPointerModel=n,this._api=r,!(!i&&this._lastValue===o&&this._lastStatus===a)){this._lastValue=o,this._lastStatus=a;var s=this._group,l=this._handle;if(!a||a==="hide"){s&&s.hide(),l&&l.hide();return}s&&s.show(),l&&l.show();var c={};this.makeElOption(c,o,e,n,r);var u=c.graphicKey;u!==this._lastGraphicKey&&this.clear(r),this._lastGraphicKey=u;var f=this._moveAnimation=this.determineAnimation(e,n);if(!s)s=this._group=new yu,this.createPointerEl(s,c,e,n),this.createLabelEl(s,c,e,n),r.getZr().add(s);else{var d=zr(lY,n,f);this.updatePointerEl(s,c,d),this.updateLabelEl(s,c,d,n)}uY(s,n,!0),this._renderHandle(o)}},t.prototype.remove=function(e){this.clear(e)},t.prototype.dispose=function(e){this.clear(e)},t.prototype.determineAnimation=function(e,n){var r=n.get("animation"),i=e.axis,o=i.type==="category",a=n.get("snap");if(!a&&!o)return!1;if(r==="auto"||r==null){var s=this.animationThreshold;if(o&&i.getBandWidth()>s)return!0;if(a){var l=iN(e).seriesDataCount,c=i.getExtent();return Math.abs(c[0]-c[1])/l>s}return!1}return r===!0},t.prototype.makeElOption=function(e,n,r,i,o){},t.prototype.createPointerEl=function(e,n,r,i){var o=n.pointer;if(o){var a=Rp(e).pointerEl=new vEe[o.type](sY(n.pointer));e.add(a)}},t.prototype.createLabelEl=function(e,n,r,i){if(n.label){var o=Rp(e).labelEl=new ea(sY(n.label));e.add(o),cY(o,i)}},t.prototype.updatePointerEl=function(e,n,r){var i=Rp(e).pointerEl;i&&n.pointer&&(i.setStyle(n.pointer.style),r(i,{shape:n.pointer.shape}))},t.prototype.updateLabelEl=function(e,n,r,i){var o=Rp(e).labelEl;o&&(o.setStyle(n.label.style),r(o,{x:n.label.x,y:n.label.y}),cY(o,i))},t.prototype._renderHandle=function(e){if(!(this._dragging||!this.updateHandleTransform)){var n=this._axisPointerModel,r=this._api.getZr(),i=this._handle,o=n.getModel("handle"),a=n.get("status");if(!o.get("show")||!a||a==="hide"){i&&r.remove(i),this._handle=null;return}var s;this._handle||(s=!0,i=this._handle=k$(o.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(c){$ee(c.event)},onmousedown:hE(this._onHandleDragMove,this,0,0),drift:hE(this._onHandleDragMove,this),ondragend:hE(this._onHandleDragEnd,this)}),r.add(i)),uY(i,n,!1),i.setStyle(o.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=o.get("size");mt(l)||(l=[l,l]),i.scaleX=l[0]/2,i.scaleY=l[1]/2,Jne(this,"_doDispatchAxisPointer",o.get("throttle")||0,"fixRate"),this._moveHandleToValue(e,s)}},t.prototype._moveHandleToValue=function(e,n){lY(this._axisPointerModel,!n&&this._moveAnimation,this._handle,pE(this.getHandleTransform(e,this._axisModel,this._axisPointerModel)))},t.prototype._onHandleDragMove=function(e,n){var r=this._handle;if(r){this._dragging=!0;var i=this.updateHandleTransform(pE(r),[e,n],this._axisModel,this._axisPointerModel);this._payloadInfo=i,r.stopAnimation(),r.attr(pE(i)),Rp(r).lastProp=null,this._doDispatchAxisPointer()}},t.prototype._doDispatchAxisPointer=function(){var e=this._handle;if(e){var n=this._payloadInfo,r=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:n.cursorPoint[0],y:n.cursorPoint[1],tooltipOption:n.tooltipOption,axesInfo:[{axisDim:r.axis.dim,axisIndex:r.componentIndex}]})}},t.prototype._onHandleDragEnd=function(){this._dragging=!1;var e=this._handle;if(e){var n=this._axisPointerModel.get("value");this._moveHandleToValue(n),this._api.dispatchAction({type:"hideTip"})}},t.prototype.clear=function(e){this._lastValue=null,this._lastStatus=null;var n=e.getZr(),r=this._group,i=this._handle;n&&r&&(this._lastGraphicKey=null,r&&n.remove(r),i&&n.remove(i),this._group=null,this._handle=null,this._payloadInfo=null),z9(this,"_doDispatchAxisPointer")},t.prototype.doClear=function(){},t.prototype.buildLabel=function(e,n,r){return r=r||0,{x:e[r],y:e[1-r],width:n[r],height:n[1-r]}},t}();function lY(t,e,n,r){bde(Rp(n).lastProp,r)||(Rp(n).lastProp=r,e?Cg(n,r,t):(n.stopAnimation(),n.attr(r)))}function bde(t,e){if(jt(t)&&jt(e)){var n=!0;return be(e,function(r,i){n=n&&bde(t[i],r)}),!!n}else return t===e}function cY(t,e){t[e.get(["label","show"])?"show":"hide"]()}function pE(t){return{x:t.x||0,y:t.y||0,rotation:t.rotation||0}}function uY(t,e,n){var r=e.get("z"),i=e.get("zlevel");t&&t.traverse(function(o){o.type!=="group"&&(r!=null&&(o.z=r),i!=null&&(o.zlevel=i),o.silent=n)})}const g2t=p2t;function m2t(t){var e=t.get("type"),n=t.getModel(e+"Style"),r;return e==="line"?(r=n.getLineStyle(),r.fill=null):e==="shadow"&&(r=n.getAreaStyle(),r.stroke=null),r}function v2t(t,e,n,r,i){var o=n.get("value"),a=Sde(o,e.axis,e.ecModel,n.get("seriesDataIndices"),{precision:n.get(["label","precision"]),formatter:n.get(["label","formatter"])}),s=n.getModel("label"),l=KT(s.get("padding")||0),c=s.getFont(),u=rte(a,c),f=i.position,d=u.width+l[1]+l[3],h=u.height+l[0]+l[2],g=i.align;g==="right"&&(f[0]-=d),g==="center"&&(f[0]-=d/2);var y=i.verticalAlign;y==="bottom"&&(f[1]-=h),y==="middle"&&(f[1]-=h/2),y2t(f,d,h,r);var S=s.get("backgroundColor");(!S||S==="auto")&&(S=e.get(["axisLine","lineStyle","color"])),t.label={x:f[0],y:f[1],style:Cf(s,{text:a,font:c,fill:s.getTextColor(),padding:l,backgroundColor:S}),z2:10}}function y2t(t,e,n,r){var i=r.getWidth(),o=r.getHeight();t[0]=Math.min(t[0]+e,i)-e,t[1]=Math.min(t[1]+n,o)-n,t[0]=Math.max(t[0],0),t[1]=Math.max(t[1],0)}function Sde(t,e,n,r,i){t=e.scale.parse(t);var o=e.scale.getLabel({value:t},{precision:i.precision}),a=i.formatter;if(a){var s={value:Fre(e,{value:t}),axisDimension:e.dim,axisIndex:e.index,seriesData:[]};be(r,function(l){var c=n.getSeriesByIndex(l.seriesIndex),u=l.dataIndexInside,f=c&&c.getDataParams(u);f&&s.seriesData.push(f)}),Ot(a)?o=a.replace("{value}",o):Qn(a)&&(o=a(s))}return o}function _de(t,e,n){var r=K1();return t$(r,r,n.rotation),o9(r,r,n.position),w$([t.dataToCoord(e),(n.labelOffset||0)+(n.labelDirection||1)*(n.labelMargin||0)],r)}function b2t(t,e,n,r,i,o){var a=Jbt.innerTextLayout(n.rotation,0,n.labelDirection);n.labelMargin=i.get(["label","margin"]),v2t(e,r,i,o,{position:_de(r.axis,t,n),align:a.textAlign,verticalAlign:a.textVerticalAlign})}function S2t(t,e,n){return n=n||0,{x1:t[n],y1:t[1-n],x2:e[n],y2:e[1-n]}}function _2t(t,e,n){return n=n||0,{x:t[n],y:t[1-n],width:e[n],height:e[1-n]}}var w2t=function(t){xr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.makeElOption=function(n,r,i,o,a){var s=i.axis,l=s.grid,c=o.get("type"),u=fY(l,s).getOtherAxis(s).getGlobalExtent(),f=s.toGlobalCoord(s.dataToCoord(r,!0));if(c&&c!=="none"){var d=m2t(o),h=k2t[c](s,f,u);h.style=d,n.graphicKey=h.type,n.pointer=h}var g=Xq(l.model,i);b2t(r,n,g,i,o,a)},e.prototype.getHandleTransform=function(n,r,i){var o=Xq(r.axis.grid.model,r,{labelInside:!1});o.labelMargin=i.get(["handle","margin"]);var a=_de(r.axis,n,o);return{x:a[0],y:a[1],rotation:o.rotation+(o.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(n,r,i,o){var a=i.axis,s=a.grid,l=a.getGlobalExtent(!0),c=fY(s,a).getOtherAxis(a).getGlobalExtent(),u=a.dim==="x"?0:1,f=[n.x,n.y];f[u]+=r[u],f[u]=Math.min(l[1],f[u]),f[u]=Math.max(l[0],f[u]);var d=(c[1]+c[0])/2,h=[d,d];h[u]=f[u];var g=[{verticalAlign:"middle"},{align:"center"}];return{x:f[0],y:f[1],rotation:n.rotation,cursorPoint:h,tooltipOption:g[u]}},e}(g2t);function fY(t,e){var n={};return n[e.dim+"AxisIndex"]=e.index,t.getCartesian(n)}var k2t={line:function(t,e,n){var r=S2t([e,n[0]],[e,n[1]],dY(t));return{type:"Line",subPixelOptimize:!0,shape:r}},shadow:function(t,e,n){var r=Math.max(1,t.getBandWidth()),i=n[1]-n[0];return{type:"Rect",shape:_2t([e-r/2,n[0]],[r,i],dY(t))}}};function dY(t){return t.dim==="x"?0:1}const x2t=w2t;var C2t=function(t){xr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="axisPointer",e.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},e}(wi);const T2t=C2t;var df=no(),A2t=be;function wde(t,e,n){if(!Pn.node){var r=e.getZr();df(r).records||(df(r).records={}),P2t(r,e);var i=df(r).records[t]||(df(r).records[t]={});i.handler=n}}function P2t(t,e){if(df(t).initialized)return;df(t).initialized=!0,n("click",zr(hY,"click")),n("mousemove",zr(hY,"mousemove")),n("globalout",O2t);function n(r,i){t.on(r,function(o){var a=I2t(e);A2t(df(t).records,function(s){s&&i(s,o,a.dispatchAction)}),E2t(a.pendings,e)})}}function E2t(t,e){var n=t.showTip.length,r=t.hideTip.length,i;n?i=t.showTip[n-1]:r&&(i=t.hideTip[r-1]),i&&(i.dispatchAction=null,e.dispatchAction(i))}function O2t(t,e,n){t.handler("leave",null,n)}function hY(t,e,n,r){e.handler(t,n,r)}function I2t(t){var e={showTip:[],hideTip:[]},n=function(r){var i=e[r.type];i?i.push(r):(r.dispatchAction=n,t.dispatchAction(r))};return{dispatchAction:n,pendings:e}}function a6(t,e){if(!Pn.node){var n=e.getZr(),r=(df(n).records||{})[t];r&&(df(n).records[t]=null)}}var $2t=function(t){xr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i){var o=r.getComponent("tooltip"),a=n.get("triggerOn")||o&&o.get("triggerOn")||"mousemove|click";wde("axisPointer",i,function(s,l,c){a!=="none"&&(s==="leave"||a.indexOf(s)>=0)&&c({type:"updateAxisPointer",currTrigger:s,x:l&&l.offsetX,y:l&&l.offsetY})})},e.prototype.remove=function(n,r){a6("axisPointer",r)},e.prototype.dispose=function(n,r){a6("axisPointer",r)},e.type="axisPointer",e}(lh);const F2t=$2t;function kde(t,e){var n=[],r=t.seriesIndex,i;if(r==null||!(i=e.getSeriesByIndex(r)))return{point:[]};var o=i.getData(),a=fS(o,t);if(a==null||a<0||mt(a))return{point:[]};var s=o.getItemGraphicEl(a),l=i.coordinateSystem;if(i.getTooltipPosition)n=i.getTooltipPosition(a)||[];else if(l&&l.dataToPoint)if(t.isStacked){var c=l.getBaseAxis(),u=l.getOtherAxis(c),f=u.dim,d=c.dim,h=f==="x"||f==="radius"?1:0,g=o.mapDimension(d),y=[];y[h]=o.get(g,a),y[1-h]=o.get(o.getCalculationInfo("stackResultDimension"),a),n=l.dataToPoint(y)||[]}else n=l.dataToPoint(o.getValues(tn(l.dimensions,function(v){return o.mapDimension(v)}),a))||[];else if(s){var S=s.getBoundingRect().clone();S.applyTransform(s.transform),n=[S.x+S.width/2,S.y+S.height/2]}return{point:n,el:s}}var pY=no();function L2t(t,e,n){var r=t.currTrigger,i=[t.x,t.y],o=t,a=t.dispatchAction||Or(n.dispatchAction,n),s=e.getComponent("axisPointer").coordSysAxesInfo;if(s){Vx(i)&&(i=kde({seriesIndex:o.seriesIndex,dataIndex:o.dataIndex},e).point);var l=Vx(i),c=o.axesInfo,u=s.axesInfo,f=r==="leave"||Vx(i),d={},h={},g={list:[],map:{}},y={showPointer:zr(N2t,h),showTooltip:zr(M2t,g)};be(s.coordSysMap,function(v,_){var x=l||v.containPoint(i);be(s.coordSysAxesInfo[_],function(C,k){var m=C.axis,T=B2t(c,C);if(!f&&x&&(!c||T)){var E=T&&T.value;E==null&&!l&&(E=m.pointToData(i)),E!=null&&gY(C,E,y,!1,d)}})});var S={};return be(u,function(v,_){var x=v.linkGroup;x&&!h[_]&&be(x.axesInfo,function(C,k){var m=h[k];if(C!==v&&m){var T=m.value;x.mapper&&(T=v.axis.scale.parse(x.mapper(T,mY(C),mY(v)))),S[v.key]=T}})}),be(S,function(v,_){gY(u[_],v,y,!0,d)}),R2t(h,u,d),z2t(g,i,t,a),V2t(u,a,n),d}}function gY(t,e,n,r,i){var o=t.axis;if(!(o.scale.isBlank()||!o.containData(e))){if(!t.involveSeries){n.showPointer(t,e);return}var a=D2t(e,t),s=a.payloadBatch,l=a.snapToValue;s[0]&&i.seriesIndex==null&&ot(i,s[0]),!r&&t.snap&&o.containData(l)&&l!=null&&(e=l),n.showPointer(t,e,s),n.showTooltip(t,a,l)}}function D2t(t,e){var n=e.axis,r=n.dim,i=t,o=[],a=Number.MAX_VALUE,s=-1;return be(e.seriesModels,function(l,c){var u=l.getData().mapDimensionsAll(r),f,d;if(l.getAxisTooltipData){var h=l.getAxisTooltipData(u,t,n);d=h.dataIndices,f=h.nestestValue}else{if(d=l.getData().indicesOfNearest(u[0],t,n.type==="category"?.5:null),!d.length)return;f=l.getData().get(u[0],d[0])}if(!(f==null||!isFinite(f))){var g=t-f,y=Math.abs(g);y<=a&&((y<a||g>=0&&s<0)&&(a=y,s=g,i=f,o.length=0),be(d,function(S){o.push({seriesIndex:l.seriesIndex,dataIndexInside:S,dataIndex:l.getData().getRawIndex(S)})}))}}),{payloadBatch:o,snapToValue:i}}function N2t(t,e,n,r){t[e.key]={value:n,payloadBatch:r}}function M2t(t,e,n,r){var i=n.payloadBatch,o=e.axis,a=o.model,s=e.axisPointerModel;if(!(!e.triggerTooltip||!i.length)){var l=e.coordSys.model,c=I2(l),u=t.map[c];u||(u=t.map[c]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},t.list.push(u)),u.dataByAxis.push({axisDim:o.dim,axisIndex:a.componentIndex,axisType:a.type,axisId:a.id,value:r,valueLabelOpt:{precision:s.get(["label","precision"]),formatter:s.get(["label","formatter"])},seriesDataIndices:i.slice()})}}function R2t(t,e,n){var r=n.axesInfo=[];be(e,function(i,o){var a=i.axisPointerModel.option,s=t[o];s?(!i.useHandle&&(a.status="show"),a.value=s.value,a.seriesDataIndices=(s.payloadBatch||[]).slice()):!i.useHandle&&(a.status="hide"),a.status==="show"&&r.push({axisDim:i.axis.dim,axisIndex:i.axis.model.componentIndex,value:a.value})})}function z2t(t,e,n,r){if(Vx(e)||!t.list.length){r({type:"hideTip"});return}var i=((t.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};r({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:n.tooltipOption,position:n.position,dataIndexInside:i.dataIndexInside,dataIndex:i.dataIndex,seriesIndex:i.seriesIndex,dataByCoordSys:t.list})}function V2t(t,e,n){var r=n.getZr(),i="axisPointerLastHighlights",o=pY(r)[i]||{},a=pY(r)[i]={};be(t,function(c,u){var f=c.axisPointerModel.option;f.status==="show"&&c.triggerEmphasis&&be(f.seriesDataIndices,function(d){var h=d.seriesIndex+" | "+d.dataIndex;a[h]=d})});var s=[],l=[];be(o,function(c,u){!a[u]&&l.push(c)}),be(a,function(c,u){!o[u]&&s.push(c)}),l.length&&n.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),s.length&&n.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:s})}function B2t(t,e){for(var n=0;n<(t||[]).length;n++){var r=t[n];if(e.axis.dim===r.axisDim&&e.axis.model.componentIndex===r.axisIndex)return r}}function mY(t){var e=t.axis.model,n={},r=n.axisDim=t.axis.dim;return n.axisIndex=n[r+"AxisIndex"]=e.componentIndex,n.axisName=n[r+"AxisName"]=e.name,n.axisId=n[r+"AxisId"]=e.id,n}function Vx(t){return!t||t[0]==null||isNaN(t[0])||t[1]==null||isNaN(t[1])}function j2t(t){a1t.registerAxisPointerClass("CartesianAxisPointer",x2t),t.registerComponentModel(T2t),t.registerComponentView(F2t),t.registerPreprocessor(function(e){if(e){(!e.axisPointer||e.axisPointer.length===0)&&(e.axisPointer={});var n=e.axisPointer.link;n&&!mt(n)&&(e.axisPointer.link=[n])}}),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,function(e,n){e.getComponent("axisPointer").coordSysAxesInfo=Zbt(e,n)}),t.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},L2t)}function H2t(t,e){var n=KT(e.get("padding")),r=e.getItemStyle(["color","opacity"]);return r.fill=e.get("backgroundColor"),t=new Qo({shape:{x:t.x-n[3],y:t.y-n[0],width:t.width+n[1]+n[3],height:t.height+n[0]+n[2],r:e.get("borderRadius")},style:r,silent:!0,z2:-1}),t}var U2t=function(t){xr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="tooltip",e.dependencies=["axisPointer"],e.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},e}(wi);const W2t=U2t;function xde(t){var e=t.get("confine");return e!=null?!!e:t.get("renderMode")==="richText"}function Cde(t){if(Pn.domSupported){for(var e=document.documentElement.style,n=0,r=t.length;n<r;n++)if(t[n]in e)return t[n]}}var Tde=Cde(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),G2t=Cde(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function Ade(t,e){if(!t)return e;e=_ne(e,!0);var n=t.indexOf(e);return t=n===-1?e:"-"+t.slice(0,n)+"-"+e,t.toLowerCase()}function q2t(t,e){var n=t.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(t);return n?e?n[e]:n:null}var Y2t=Ade(G2t,"transition"),sN=Ade(Tde,"transform"),K2t="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(Pn.transform3dSupported?"will-change:transform;":"");function X2t(t){return t=t==="left"?"right":t==="right"?"left":t==="top"?"bottom":"top",t}function J2t(t,e,n){if(!Ot(n)||n==="inside")return"";var r=t.get("backgroundColor"),i=t.get("borderWidth");e=n2(e);var o=X2t(n),a=Math.max(Math.round(i)*1.5,6),s="",l=sN+":",c;wr(["left","right"],o)>-1?(s+="top:50%",l+="translateY(-50%) rotate("+(c=o==="left"?-225:-45)+"deg)"):(s+="left:50%",l+="translateX(-50%) rotate("+(c=o==="top"?225:45)+"deg)");var u=c*Math.PI/180,f=a+i,d=f*Math.abs(Math.cos(u))+f*Math.abs(Math.sin(u)),h=Math.round(((d-Math.SQRT2*i)/2+Math.SQRT2*i-(d-f)/2)*100)/100;s+=";"+o+":-"+h+"px";var g=e+" solid "+i+"px;",y=["position:absolute;width:"+a+"px;height:"+a+"px;z-index:-1;",s+";"+l+";","border-bottom:"+g,"border-right:"+g,"background-color:"+r+";"];return'<div style="'+y.join("")+'"></div>'}function Z2t(t,e){var n="cubic-bezier(0.23,1,0.32,1)",r=" "+t/2+"s "+n,i="opacity"+r+",visibility"+r;return e||(r=" "+t+"s "+n,i+=Pn.transformSupported?","+sN+r:",left"+r+",top"+r),Y2t+":"+i}function vY(t,e,n){var r=t.toFixed(0)+"px",i=e.toFixed(0)+"px";if(!Pn.transformSupported)return n?"top:"+i+";left:"+r+";":[["top",i],["left",r]];var o=Pn.transform3dSupported,a="translate"+(o?"3d":"")+"("+r+","+i+(o?",0":"")+")";return n?"top:0;left:0;"+sN+":"+a+";":[["top",0],["left",0],[Tde,a]]}function Q2t(t){var e=[],n=t.get("fontSize"),r=t.getTextColor();r&&e.push("color:"+r),e.push("font:"+t.getFont()),n&&e.push("line-height:"+Math.round(n*3/2)+"px");var i=t.get("textShadowColor"),o=t.get("textShadowBlur")||0,a=t.get("textShadowOffsetX")||0,s=t.get("textShadowOffsetY")||0;return i&&o&&e.push("text-shadow:"+a+"px "+s+"px "+o+"px "+i),be(["decoration","align"],function(l){var c=t.get(l);c&&e.push("text-"+l+":"+c)}),e.join(";")}function eSt(t,e,n){var r=[],i=t.get("transitionDuration"),o=t.get("backgroundColor"),a=t.get("shadowBlur"),s=t.get("shadowColor"),l=t.get("shadowOffsetX"),c=t.get("shadowOffsetY"),u=t.getModel("textStyle"),f=Kne(t,"html"),d=l+"px "+c+"px "+a+"px "+s;return r.push("box-shadow:"+d),e&&i&&r.push(Z2t(i,n)),o&&r.push("background-color:"+o),be(["width","color","radius"],function(h){var g="border-"+h,y=_ne(g),S=t.get(y);S!=null&&r.push(g+":"+S+(h==="color"?"":"px"))}),r.push(Q2t(u)),f!=null&&r.push("padding:"+KT(f).join("px ")+"px"),r.join(";")+";"}function yY(t,e,n,r,i){var o=e&&e.painter;if(n){var a=o&&o.getViewportRoot();a&&hAe(t,a,document.body,r,i)}else{t[0]=r,t[1]=i;var s=o&&o.getViewportRootOffset();s&&(t[0]+=s.offsetLeft,t[1]+=s.offsetTop)}t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}var tSt=function(){function t(e,n,r){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,Pn.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var o=this._zr=n.getZr(),a=this._appendToBody=r&&r.appendToBody;yY(this._styleCoord,o,a,n.getWidth()/2,n.getHeight()/2),a?document.body.appendChild(i):e.appendChild(i),this._container=e;var s=this;i.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},i.onmousemove=function(l){if(l=l||window.event,!s._enterable){var c=o.handler,u=o.painter.getViewportRoot();cl(u,l,!0),c.dispatch("mousemove",l)}},i.onmouseleave=function(){s._inContent=!1,s._enterable&&s._show&&s.hideLater(s._hideDelay)}}return t.prototype.update=function(e){var n=this._container,r=q2t(n,"position"),i=n.style;i.position!=="absolute"&&r!=="absolute"&&(i.position="relative");var o=e.get("alwaysShowContent");o&&this._moveIfResized(),this._alwaysShowContent=o,this.el.className=e.get("className")||""},t.prototype.show=function(e,n){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var r=this.el,i=r.style,o=this._styleCoord;r.innerHTML?i.cssText=K2t+eSt(e,!this._firstShow,this._longHide)+vY(o[0],o[1],!0)+("border-color:"+n2(n)+";")+(e.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):i.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},t.prototype.setContent=function(e,n,r,i,o){var a=this.el;if(e==null){a.innerHTML="";return}var s="";if(Ot(o)&&r.get("trigger")==="item"&&!xde(r)&&(s=J2t(r,i,o)),Ot(e))a.innerHTML=e+s;else if(e){a.innerHTML="",mt(e)||(e=[e]);for(var l=0;l<e.length;l++)P4(e[l])&&e[l].parentNode!==a&&a.appendChild(e[l]);if(s&&a.childNodes.length){var c=document.createElement("div");c.innerHTML=s,a.appendChild(c)}}},t.prototype.setEnterable=function(e){this._enterable=e},t.prototype.getSize=function(){var e=this.el;return[e.offsetWidth,e.offsetHeight]},t.prototype.moveTo=function(e,n){var r=this._styleCoord;if(yY(r,this._zr,this._appendToBody,e,n),r[0]!=null&&r[1]!=null){var i=this.el.style,o=vY(r[0],r[1]);be(o,function(a){i[a[0]]=a[1]})}},t.prototype._moveIfResized=function(){var e=this._styleCoord[2],n=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),n*this._zr.getHeight())},t.prototype.hide=function(){var e=this,n=this.el.style;n.visibility="hidden",n.opacity="0",Pn.transform3dSupported&&(n.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return e._longHide=!0},500)},t.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(Or(this.hide,this),e)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},t}();const nSt=tSt;var rSt=function(){function t(e){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=e.getZr(),SY(this._styleCoord,this._zr,e.getWidth()/2,e.getHeight()/2)}return t.prototype.update=function(e){var n=e.get("alwaysShowContent");n&&this._moveIfResized(),this._alwaysShowContent=n},t.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},t.prototype.setContent=function(e,n,r,i,o){var a=this;jt(e)&&Qa(""),this.el&&this._zr.remove(this.el);var s=r.getModel("textStyle");this.el=new ea({style:{rich:n.richTextStyles,text:e,lineHeight:22,borderWidth:1,borderColor:i,textShadowColor:s.get("textShadowColor"),fill:r.get(["textStyle","color"]),padding:Kne(r,"richText"),verticalAlign:"top",align:"left"},z:r.get("z")}),be(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(c){a.el.style[c]=r.get(c)}),be(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(c){a.el.style[c]=s.get(c)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},t.prototype.setEnterable=function(e){this._enterable=e},t.prototype.getSize=function(){var e=this.el,n=this.el.getBoundingRect(),r=bY(e.style);return[n.width+r.left+r.right,n.height+r.top+r.bottom]},t.prototype.moveTo=function(e,n){var r=this.el;if(r){var i=this._styleCoord;SY(i,this._zr,e,n),e=i[0],n=i[1];var o=r.style,a=hd(o.borderWidth||0),s=bY(o);r.x=e+a+s.left,r.y=n+a+s.top,r.markRedraw()}},t.prototype._moveIfResized=function(){var e=this._styleCoord[2],n=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),n*this._zr.getHeight())},t.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},t.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(Or(this.hide,this),e)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){this._zr.remove(this.el)},t}();function hd(t){return Math.max(0,t)}function bY(t){var e=hd(t.shadowBlur||0),n=hd(t.shadowOffsetX||0),r=hd(t.shadowOffsetY||0);return{left:hd(e-n),right:hd(e+n),top:hd(e-r),bottom:hd(e+r)}}function SY(t,e,n,r){t[0]=n,t[1]=r,t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}const iSt=rSt;var oSt=new Qo({shape:{x:-1,y:-1,width:2,height:2}}),aSt=function(t){xr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.init=function(n,r){if(!(Pn.node||!r.getDom())){var i=n.getComponent("tooltip"),o=this._renderMode=Q5e(i.get("renderMode"));this._tooltipContent=o==="richText"?new iSt(r):new nSt(r.getDom(),r,{appendToBody:i.get("appendToBody",!0)})}},e.prototype.render=function(n,r,i){if(!(Pn.node||!i.getDom())){this.group.removeAll(),this._tooltipModel=n,this._ecModel=r,this._api=i;var o=this._tooltipContent;o.update(n),o.setEnterable(n.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&n.get("transitionDuration")?Jne(this,"_updatePosition",50,"fixRate"):z9(this,"_updatePosition")}},e.prototype._initGlobalListener=function(){var n=this._tooltipModel,r=n.get("triggerOn");wde("itemTooltip",this._api,Or(function(i,o,a){r!=="none"&&(r.indexOf(i)>=0?this._tryShow(o,a):i==="leave"&&this._hide(a))},this))},e.prototype._keepShow=function(){var n=this._tooltipModel,r=this._ecModel,i=this._api,o=n.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&o!=="none"&&o!=="click"){var a=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!i.isDisposed()&&a.manuallyShowTip(n,r,i,{x:a._lastX,y:a._lastY,dataByCoordSys:a._lastDataByCoordSys})})}},e.prototype.manuallyShowTip=function(n,r,i,o){if(!(o.from===this.uid||Pn.node||!i.getDom())){var a=_Y(o,i);this._ticket="";var s=o.dataByCoordSys,l=uSt(o,r,i);if(l){var c=l.el.getBoundingRect().clone();c.applyTransform(l.el.transform),this._tryShow({offsetX:c.x+c.width/2,offsetY:c.y+c.height/2,target:l.el,position:o.position,positionDefault:"bottom"},a)}else if(o.tooltip&&o.x!=null&&o.y!=null){var u=oSt;u.x=o.x,u.y=o.y,u.update(),Vr(u).tooltipConfig={name:null,option:o.tooltip},this._tryShow({offsetX:o.x,offsetY:o.y,target:u},a)}else if(s)this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,dataByCoordSys:s,tooltipOption:o.tooltipOption},a);else if(o.seriesIndex!=null){if(this._manuallyAxisShowTip(n,r,i,o))return;var f=kde(o,r),d=f.point[0],h=f.point[1];d!=null&&h!=null&&this._tryShow({offsetX:d,offsetY:h,target:f.el,position:o.position,positionDefault:"bottom"},a)}else o.x!=null&&o.y!=null&&(i.dispatchAction({type:"updateAxisPointer",x:o.x,y:o.y}),this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,target:i.getZr().findHover(o.x,o.y).target},a))}},e.prototype.manuallyHideTip=function(n,r,i,o){var a=this._tooltipContent;this._tooltipModel&&a.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,o.from!==this.uid&&this._hide(_Y(o,i))},e.prototype._manuallyAxisShowTip=function(n,r,i,o){var a=o.seriesIndex,s=o.dataIndex,l=r.getComponent("axisPointer").coordSysAxesInfo;if(!(a==null||s==null||l==null)){var c=r.getSeriesByIndex(a);if(c){var u=c.getData(),f=mb([u.getItemModel(s),c,(c.coordinateSystem||{}).model],this._tooltipModel);if(f.get("trigger")==="axis")return i.dispatchAction({type:"updateAxisPointer",seriesIndex:a,dataIndex:s,position:o.position}),!0}}},e.prototype._tryShow=function(n,r){var i=n.target,o=this._tooltipModel;if(o){this._lastX=n.offsetX,this._lastY=n.offsetY;var a=n.dataByCoordSys;if(a&&a.length)this._showAxisTooltip(a,n);else if(i){this._lastDataByCoordSys=null;var s,l;$b(i,function(c){if(Vr(c).dataIndex!=null)return s=c,!0;if(Vr(c).tooltipConfig!=null)return l=c,!0},!0),s?this._showSeriesItemTooltip(n,s,r):l?this._showComponentItemTooltip(n,l,r):this._hide(r)}else this._lastDataByCoordSys=null,this._hide(r)}},e.prototype._showOrMove=function(n,r){var i=n.get("showDelay");r=Or(r,this),clearTimeout(this._showTimout),i>0?this._showTimout=setTimeout(r,i):r()},e.prototype._showAxisTooltip=function(n,r){var i=this._ecModel,o=this._tooltipModel,a=[r.offsetX,r.offsetY],s=mb([r.tooltipOption],o),l=this._renderMode,c=[],u=Tg("section",{blocks:[],noHeader:!0}),f=[],d=new JP;be(n,function(_){be(_.dataByAxis,function(x){var C=i.getComponent(x.axisDim+"Axis",x.axisIndex),k=x.value;if(!(!C||k==null)){var m=Sde(k,C.axis,i,x.seriesDataIndices,x.valueLabelOpt),T=Tg("section",{header:m,noHeader:!au(m),sortBlocks:!0,blocks:[]});u.blocks.push(T),be(x.seriesDataIndices,function(E){var I=i.getSeriesByIndex(E.seriesIndex),D=E.dataIndexInside,F=I.getDataParams(D);if(!(F.dataIndex<0)){F.axisDim=x.axisDim,F.axisIndex=x.axisIndex,F.axisType=x.axisType,F.axisId=x.axisId,F.axisValue=Fre(C.axis,{value:k}),F.axisValueLabel=m,F.marker=d.makeTooltipMarker("item",n2(F.color),l);var R=zj(I.formatTooltip(D,!0,null)),z=R.frag;if(z){var B=mb([I],o).get("valueFormatter");T.blocks.push(B?ot({valueFormatter:B},z):z)}R.text&&f.push(R.text),c.push(F)}})}})}),u.blocks.reverse(),f.reverse();var h=r.position,g=s.get("order"),y=Uj(u,d,l,g,i.get("useUTC"),s.get("textStyle"));y&&f.unshift(y);var S=l==="richText"?`

`:"<br/>",v=f.join(S);this._showOrMove(s,function(){this._updateContentNotChangedOnAxis(n,c)?this._updatePosition(s,h,a[0],a[1],this._tooltipContent,c):this._showTooltipContent(s,v,c,Math.random()+"",a[0],a[1],h,null,d)})},e.prototype._showSeriesItemTooltip=function(n,r,i){var o=this._ecModel,a=Vr(r),s=a.seriesIndex,l=o.getSeriesByIndex(s),c=a.dataModel||l,u=a.dataIndex,f=a.dataType,d=c.getData(f),h=this._renderMode,g=n.positionDefault,y=mb([d.getItemModel(u),c,l&&(l.coordinateSystem||{}).model],this._tooltipModel,g?{position:g}:null),S=y.get("trigger");if(!(S!=null&&S!=="item")){var v=c.getDataParams(u,f),_=new JP;v.marker=_.makeTooltipMarker("item",n2(v.color),h);var x=zj(c.formatTooltip(u,!1,f)),C=y.get("order"),k=y.get("valueFormatter"),m=x.frag,T=m?Uj(k?ot({valueFormatter:k},m):m,_,h,C,o.get("useUTC"),y.get("textStyle")):x.text,E="item_"+c.name+"_"+u;this._showOrMove(y,function(){this._showTooltipContent(y,T,v,E,n.offsetX,n.offsetY,n.position,n.target,_)}),i({type:"showTip",dataIndexInside:u,dataIndex:d.getRawIndex(u),seriesIndex:s,from:this.uid})}},e.prototype._showComponentItemTooltip=function(n,r,i){var o=Vr(r),a=o.tooltipConfig,s=a.option||{};if(Ot(s)){var l=s;s={content:l,formatter:l}}var c=[s],u=this._ecModel.getComponent(o.componentMainType,o.componentIndex);u&&c.push(u),c.push({formatter:s.content});var f=n.positionDefault,d=mb(c,this._tooltipModel,f?{position:f}:null),h=d.get("content"),g=Math.random()+"",y=new JP;this._showOrMove(d,function(){var S=Gn(d.get("formatterParams")||{});this._showTooltipContent(d,h,S,g,n.offsetX,n.offsetY,n.position,r,y)}),i({type:"showTip",from:this.uid})},e.prototype._showTooltipContent=function(n,r,i,o,a,s,l,c,u){if(this._ticket="",!(!n.get("showContent")||!n.get("show"))){var f=this._tooltipContent;f.setEnterable(n.get("enterable"));var d=n.get("formatter");l=l||n.get("position");var h=r,g=this._getNearestPoint([a,s],i,n.get("trigger"),n.get("borderColor")),y=g.color;if(d)if(Ot(d)){var S=n.ecModel.get("useUTC"),v=mt(i)?i[0]:i,_=v&&v.axisType&&v.axisType.indexOf("time")>=0;h=d,_&&(h=Sne(v.axisValue,h,S)),h=wne(h,i,!0)}else if(Qn(d)){var x=Or(function(C,k){C===this._ticket&&(f.setContent(k,u,n,y,l),this._updatePosition(n,l,a,s,f,i,c))},this);this._ticket=o,h=d(i,o,x)}else h=d;f.setContent(h,u,n,y,l),f.show(n,y),this._updatePosition(n,l,a,s,f,i,c)}},e.prototype._getNearestPoint=function(n,r,i,o){if(i==="axis"||mt(r))return{color:o||(this._renderMode==="html"?"#fff":"none")};if(!mt(r))return{color:o||r.color||r.borderColor}},e.prototype._updatePosition=function(n,r,i,o,a,s,l){var c=this._api.getWidth(),u=this._api.getHeight();r=r||n.get("position");var f=a.getSize(),d=n.get("align"),h=n.get("verticalAlign"),g=l&&l.getBoundingRect().clone();if(l&&g.applyTransform(l.transform),Qn(r)&&(r=r([i,o],s,a.el,g,{viewSize:[c,u],contentSize:f.slice()})),mt(r))i=Kr(r[0],c),o=Kr(r[1],u);else if(jt(r)){var y=r;y.width=f[0],y.height=f[1];var S=f0(y,{width:c,height:u});i=S.x,o=S.y,d=null,h=null}else if(Ot(r)&&l){var v=cSt(r,g,f,n.get("borderWidth"));i=v[0],o=v[1]}else{var v=sSt(i,o,a,c,u,d?null:20,h?null:20);i=v[0],o=v[1]}if(d&&(i-=wY(d)?f[0]/2:d==="right"?f[0]:0),h&&(o-=wY(h)?f[1]/2:h==="bottom"?f[1]:0),xde(n)){var v=lSt(i,o,a,c,u);i=v[0],o=v[1]}a.moveTo(i,o)},e.prototype._updateContentNotChangedOnAxis=function(n,r){var i=this._lastDataByCoordSys,o=this._cbParamsList,a=!!i&&i.length===n.length;return a&&be(i,function(s,l){var c=s.dataByAxis||[],u=n[l]||{},f=u.dataByAxis||[];a=a&&c.length===f.length,a&&be(c,function(d,h){var g=f[h]||{},y=d.seriesDataIndices||[],S=g.seriesDataIndices||[];a=a&&d.value===g.value&&d.axisType===g.axisType&&d.axisId===g.axisId&&y.length===S.length,a&&be(y,function(v,_){var x=S[_];a=a&&v.seriesIndex===x.seriesIndex&&v.dataIndex===x.dataIndex}),o&&be(d.seriesDataIndices,function(v){var _=v.seriesIndex,x=r[_],C=o[_];x&&C&&C.data!==x.data&&(a=!1)})})}),this._lastDataByCoordSys=n,this._cbParamsList=r,!!a},e.prototype._hide=function(n){this._lastDataByCoordSys=null,n({type:"hideTip",from:this.uid})},e.prototype.dispose=function(n,r){Pn.node||!r.getDom()||(z9(this,"_updatePosition"),this._tooltipContent.dispose(),a6("itemTooltip",r))},e.type="tooltip",e}(lh);function mb(t,e,n){var r=e.ecModel,i;n?(i=new co(n,r,r),i=new co(e.option,i,r)):i=e;for(var o=t.length-1;o>=0;o--){var a=t[o];a&&(a instanceof co&&(a=a.get("tooltip",!0)),Ot(a)&&(a={formatter:a}),a&&(i=new co(a,i,r)))}return i}function _Y(t,e){return t.dispatchAction||Or(e.dispatchAction,e)}function sSt(t,e,n,r,i,o,a){var s=n.getSize(),l=s[0],c=s[1];return o!=null&&(t+l+o+2>r?t-=l+o:t+=o),a!=null&&(e+c+a>i?e-=c+a:e+=a),[t,e]}function lSt(t,e,n,r,i){var o=n.getSize(),a=o[0],s=o[1];return t=Math.min(t+a,r)-a,e=Math.min(e+s,i)-s,t=Math.max(t,0),e=Math.max(e,0),[t,e]}function cSt(t,e,n,r){var i=n[0],o=n[1],a=Math.ceil(Math.SQRT2*r)+8,s=0,l=0,c=e.width,u=e.height;switch(t){case"inside":s=e.x+c/2-i/2,l=e.y+u/2-o/2;break;case"top":s=e.x+c/2-i/2,l=e.y-o-a;break;case"bottom":s=e.x+c/2-i/2,l=e.y+u+a;break;case"left":s=e.x-i-a,l=e.y+u/2-o/2;break;case"right":s=e.x+c+a,l=e.y+u/2-o/2}return[s,l]}function wY(t){return t==="center"||t==="middle"}function uSt(t,e,n){var r=l$(t).queryOptionMap,i=r.keys()[0];if(!(!i||i==="series")){var o=dS(e,i,r.get(i),{useDefault:!1,enableAll:!1,enableNone:!1}),a=o.models[0];if(a){var s=n.getViewOfComponentModel(a),l;if(s.group.traverse(function(c){var u=Vr(c).tooltipConfig;if(u&&u.name===t.name)return l=c,!0}),l)return{componentMainType:i,componentIndex:a.componentIndex,el:l}}}}const fSt=aSt;function lN(t){Tf(j2t),t.registerComponentModel(W2t),t.registerComponentView(fSt),t.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},Jo),t.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},Jo)}var dSt=function(t){xr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.layoutMode={type:"box",ignoreSize:!0},n}return e.type="title",e.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},e}(wi),hSt=function(t){xr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i){if(this.group.removeAll(),!!n.get("show")){var o=this.group,a=n.getModel("textStyle"),s=n.getModel("subtextStyle"),l=n.get("textAlign"),c=mn(n.get("textBaseline"),n.get("textVerticalAlign")),u=new ea({style:Cf(a,{text:n.get("text"),fill:a.getTextColor()},{disableBox:!0}),z2:10}),f=u.getBoundingRect(),d=n.get("subtext"),h=new ea({style:Cf(s,{text:d,fill:s.getTextColor(),y:f.height+n.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),g=n.get("link"),y=n.get("sublink"),S=n.get("triggerEvent",!0);u.silent=!g&&!S,h.silent=!y&&!S,g&&u.on("click",function(){F9(g,"_"+n.get("target"))}),y&&h.on("click",function(){F9(y,"_"+n.get("subtarget"))}),Vr(u).eventData=Vr(h).eventData=S?{componentType:"title",componentIndex:n.componentIndex}:null,o.add(u),d&&o.add(h);var v=o.getBoundingRect(),_=n.getBoxLayoutParams();_.width=v.width,_.height=v.height;var x=f0(_,{width:i.getWidth(),height:i.getHeight()},n.get("padding"));l||(l=n.get("left")||n.get("right"),l==="middle"&&(l="center"),l==="right"?x.x+=x.width:l==="center"&&(x.x+=x.width/2)),c||(c=n.get("top")||n.get("bottom"),c==="center"&&(c="middle"),c==="bottom"?x.y+=x.height:c==="middle"&&(x.y+=x.height/2),c=c||"top"),o.x=x.x,o.y=x.y,o.markRedraw();var C={align:l,verticalAlign:c};u.setStyle(C),h.setStyle(C),v=o.getBoundingRect();var k=x.margin,m=n.getItemStyle(["color","opacity"]);m.fill=n.get("backgroundColor");var T=new Qo({shape:{x:v.x-k[3],y:v.y-k[0],width:v.width+k[1]+k[3],height:v.height+k[0]+k[2],r:n.get("borderRadius")},style:m,subPixelOptimize:!0,silent:!0});o.add(T)}},e.type="title",e}(lh);function cN(t){t.registerComponentModel(dSt),t.registerComponentView(hSt)}var pSt=function(t,e){if(e==="all")return{type:"all",title:t.getLocaleModel().get(["legend","selector","all"])};if(e==="inverse")return{type:"inverse",title:t.getLocaleModel().get(["legend","selector","inverse"])}},gSt=function(t){xr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.layoutMode={type:"box",ignoreSize:!0},n}return e.prototype.init=function(n,r,i){this.mergeDefaultAndTheme(n,i),n.selected=n.selected||{},this._updateSelector(n)},e.prototype.mergeOption=function(n,r){t.prototype.mergeOption.call(this,n,r),this._updateSelector(n)},e.prototype._updateSelector=function(n){var r=n.selector,i=this.ecModel;r===!0&&(r=n.selector=["all","inverse"]),mt(r)&&be(r,function(o,a){Ot(o)&&(o={type:o}),r[a]=hi(o,pSt(i,o.type))})},e.prototype.optionUpdated=function(){this._updateData(this.ecModel);var n=this._data;if(n[0]&&this.get("selectedMode")==="single"){for(var r=!1,i=0;i<n.length;i++){var o=n[i].get("name");if(this.isSelected(o)){this.select(o),r=!0;break}}!r&&this.select(n[0].get("name"))}},e.prototype._updateData=function(n){var r=[],i=[];n.eachRawSeries(function(l){var c=l.name;i.push(c);var u;if(l.legendVisualProvider){var f=l.legendVisualProvider,d=f.getAllNames();n.isSeriesFiltered(l)||(i=i.concat(d)),d.length?r=r.concat(d):u=!0}else u=!0;u&&s$(l)&&r.push(l.name)}),this._availableNames=i;var o=this.get("data")||r,a=vn(),s=tn(o,function(l){return(Ot(l)||Zr(l))&&(l={name:l}),a.get(l.name)?null:(a.set(l.name,!0),new co(l,this,this.ecModel))},this);this._data=Za(s,function(l){return!!l})},e.prototype.getData=function(){return this._data},e.prototype.select=function(n){var r=this.option.selected,i=this.get("selectedMode");if(i==="single"){var o=this._data;be(o,function(a){r[a.get("name")]=!1})}r[n]=!0},e.prototype.unSelect=function(n){this.get("selectedMode")!=="single"&&(this.option.selected[n]=!1)},e.prototype.toggleSelected=function(n){var r=this.option.selected;r.hasOwnProperty(n)||(r[n]=!0),this[r[n]?"unSelect":"select"](n)},e.prototype.allSelect=function(){var n=this._data,r=this.option.selected;be(n,function(i){r[i.get("name",!0)]=!0})},e.prototype.inverseSelect=function(){var n=this._data,r=this.option.selected;be(n,function(i){var o=i.get("name",!0);r.hasOwnProperty(o)||(r[o]=!0),r[o]=!r[o]})},e.prototype.isSelected=function(n){var r=this.option.selected;return!(r.hasOwnProperty(n)&&!r[n])&&wr(this._availableNames,n)>=0},e.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},e.type="legend.plain",e.dependencies=["series"],e.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},e}(wi);const s6=gSt;var Um=zr,l6=be,Wk=yu,mSt=function(t){xr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.newlineDisabled=!1,n}return e.prototype.init=function(){this.group.add(this._contentGroup=new Wk),this.group.add(this._selectorGroup=new Wk),this._isFirstRender=!0},e.prototype.getContentGroup=function(){return this._contentGroup},e.prototype.getSelectorGroup=function(){return this._selectorGroup},e.prototype.render=function(n,r,i){var o=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!n.get("show",!0)){var a=n.get("align"),s=n.get("orient");(!a||a==="auto")&&(a=n.get("left")==="right"&&s==="vertical"?"right":"left");var l=n.get("selector",!0),c=n.get("selectorPosition",!0);l&&(!c||c==="auto")&&(c=s==="horizontal"?"end":"start"),this.renderInner(a,n,r,i,l,s,c);var u=n.getBoxLayoutParams(),f={width:i.getWidth(),height:i.getHeight()},d=n.get("padding"),h=f0(u,f,d),g=this.layoutInner(n,a,h,o,l,c),y=f0(gi({width:g.width,height:g.height},u),f,d);this.group.x=y.x-g.x,this.group.y=y.y-g.y,this.group.markRedraw(),this.group.add(this._backgroundEl=H2t(g,n))}},e.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},e.prototype.renderInner=function(n,r,i,o,a,s,l){var c=this.getContentGroup(),u=vn(),f=r.get("selectedMode"),d=[];i.eachRawSeries(function(h){!h.get("legendHoverLink")&&d.push(h.id)}),l6(r.getData(),function(h,g){var y=h.get("name");if(!this.newlineDisabled&&(y===""||y===`
`)){var S=new Wk;S.newline=!0,c.add(S);return}var v=i.getSeriesByName(y)[0];if(!u.get(y))if(v){var _=v.getData(),x=_.getVisual("legendLineStyle")||{},C=_.getVisual("legendIcon"),k=_.getVisual("style"),m=this._createItem(v,y,g,h,r,n,x,k,C,f,o);m.on("click",Um(kY,y,null,o,d)).on("mouseover",Um(c6,v.name,null,o,d)).on("mouseout",Um(u6,v.name,null,o,d)),u.set(y,!0)}else i.eachRawSeries(function(T){if(!u.get(y)&&T.legendVisualProvider){var E=T.legendVisualProvider;if(!E.containName(y))return;var I=E.indexOfName(y),D=E.getItemVisual(I,"style"),F=E.getItemVisual(I,"legendIcon"),R=dc(D.fill);R&&R[3]===0&&(R[3]=.2,D=ot(ot({},D),{fill:Nd(R,"rgba")}));var z=this._createItem(T,y,g,h,r,n,{},D,F,f,o);z.on("click",Um(kY,null,y,o,d)).on("mouseover",Um(c6,null,y,o,d)).on("mouseout",Um(u6,null,y,o,d)),u.set(y,!0)}},this)},this),a&&this._createSelector(a,r,o,s,l)},e.prototype._createSelector=function(n,r,i,o,a){var s=this.getSelectorGroup();l6(n,function(c){var u=c.type,f=new ea({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){i.dispatchAction({type:u==="all"?"legendAllSelect":"legendInverseSelect"})}});s.add(f);var d=r.getModel("selectorLabel"),h=r.getModel(["emphasis","selectorLabel"]);G4(f,{normal:d,emphasis:h},{defaultText:c.title}),C9(f)})},e.prototype._createItem=function(n,r,i,o,a,s,l,c,u,f,d){var h=n.visualDrawType,g=a.get("itemWidth"),y=a.get("itemHeight"),S=a.isSelected(r),v=o.get("symbolRotate"),_=o.get("symbolKeepAspect"),x=o.get("icon");u=x||u||"roundRect";var C=vSt(u,o,l,c,h,S,d),k=new Wk,m=o.getModel("textStyle");if(Qn(n.getLegendIcon)&&(!x||x==="inherit"))k.add(n.getLegendIcon({itemWidth:g,itemHeight:y,icon:u,iconRotate:v,itemStyle:C.itemStyle,lineStyle:C.lineStyle,symbolKeepAspect:_}));else{var T=x==="inherit"&&n.getData().getVisual("symbol")?v==="inherit"?n.getData().getVisual("symbolRotate"):v:0;k.add(ySt({itemWidth:g,itemHeight:y,icon:u,iconRotate:T,itemStyle:C.itemStyle,lineStyle:C.lineStyle,symbolKeepAspect:_}))}var E=s==="left"?g+5:-5,I=s,D=a.get("formatter"),F=r;Ot(D)&&D?F=D.replace("{name}",r??""):Qn(D)&&(F=D(r));var R=S?m.getTextColor():o.get("inactiveColor");k.add(new ea({style:Cf(m,{text:F,x:E,y:y/2,fill:R,align:I,verticalAlign:"middle"},{inheritColor:R})}));var z=new Qo({shape:k.getBoundingRect(),invisible:!0}),B=o.getModel("tooltip");return B.get("show")&&x$({el:z,componentModel:a,itemName:r,itemTooltipOption:B.option}),k.add(z),k.eachChild(function(ie){ie.silent=!0}),z.silent=!f,this.getContentGroup().add(k),C9(k),k.__legendDataIndex=i,k},e.prototype.layoutInner=function(n,r,i,o,a,s){var l=this.getContentGroup(),c=this.getSelectorGroup();a1(n.get("orient"),l,n.get("itemGap"),i.width,i.height);var u=l.getBoundingRect(),f=[-u.x,-u.y];if(c.markRedraw(),l.markRedraw(),a){a1("horizontal",c,n.get("selectorItemGap",!0));var d=c.getBoundingRect(),h=[-d.x,-d.y],g=n.get("selectorButtonGap",!0),y=n.getOrient().index,S=y===0?"width":"height",v=y===0?"height":"width",_=y===0?"y":"x";s==="end"?h[y]+=u[S]+g:f[y]+=d[S]+g,h[1-y]+=u[v]/2-d[v]/2,c.x=h[0],c.y=h[1],l.x=f[0],l.y=f[1];var x={x:0,y:0};return x[S]=u[S]+g+d[S],x[v]=Math.max(u[v],d[v]),x[_]=Math.min(0,d[_]+h[1-y]),x}else return l.x=f[0],l.y=f[1],this.group.getBoundingRect()},e.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},e.type="legend.plain",e}(lh);function vSt(t,e,n,r,i,o,a){function s(S,v){S.lineWidth==="auto"&&(S.lineWidth=v.lineWidth>0?2:0),l6(S,function(_,x){S[x]==="inherit"&&(S[x]=v[x])})}var l=e.getModel("itemStyle"),c=l.getItemStyle(),u=t.lastIndexOf("empty",0)===0?"fill":"stroke",f=l.getShallow("decal");c.decal=!f||f==="inherit"?r.decal:eC(f,a),c.fill==="inherit"&&(c.fill=r[i]),c.stroke==="inherit"&&(c.stroke=r[u]),c.opacity==="inherit"&&(c.opacity=(i==="fill"?r:n).opacity),s(c,r);var d=e.getModel("lineStyle"),h=d.getLineStyle();if(s(h,n),c.fill==="auto"&&(c.fill=r.fill),c.stroke==="auto"&&(c.stroke=r.fill),h.stroke==="auto"&&(h.stroke=r.fill),!o){var g=e.get("inactiveBorderWidth"),y=c[u];c.lineWidth=g==="auto"?r.lineWidth>0&&y?2:0:c.lineWidth,c.fill=e.get("inactiveColor"),c.stroke=e.get("inactiveBorderColor"),h.stroke=d.get("inactiveColor"),h.lineWidth=d.get("inactiveWidth")}return{itemStyle:c,lineStyle:h}}function ySt(t){var e=t.icon||"roundRect",n=R$(e,0,0,t.itemWidth,t.itemHeight,t.itemStyle.fill,t.symbolKeepAspect);return n.setStyle(t.itemStyle),n.rotation=(t.iconRotate||0)*Math.PI/180,n.setOrigin([t.itemWidth/2,t.itemHeight/2]),e.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill="#fff",n.style.lineWidth=2),n}function kY(t,e,n,r){u6(t,e,n,r),n.dispatchAction({type:"legendToggleSelect",name:t??e}),c6(t,e,n,r)}function Pde(t){for(var e=t.getZr().storage.getDisplayList(),n,r=0,i=e.length;r<i&&!(n=e[r].states.emphasis);)r++;return n&&n.hoverLayer}function c6(t,e,n,r){Pde(n)||n.dispatchAction({type:"highlight",seriesName:t,name:e,excludeSeriesId:r})}function u6(t,e,n,r){Pde(n)||n.dispatchAction({type:"downplay",seriesName:t,name:e,excludeSeriesId:r})}const Ede=mSt;function bSt(t){var e=t.findComponents({mainType:"legend"});e&&e.length&&t.filterSeries(function(n){for(var r=0;r<e.length;r++)if(!e[r].isSelected(n.name))return!1;return!0})}function vb(t,e,n){var r={},i=t==="toggleSelected",o;return n.eachComponent("legend",function(a){i&&o!=null?a[o?"select":"unSelect"](e.name):t==="allSelect"||t==="inverseSelect"?a[t]():(a[t](e.name),o=a.isSelected(e.name));var s=a.getData();be(s,function(l){var c=l.get("name");if(!(c===`
`||c==="")){var u=a.isSelected(c);r.hasOwnProperty(c)?r[c]=r[c]&&u:r[c]=u}})}),t==="allSelect"||t==="inverseSelect"?{selected:r}:{name:e.name,selected:r}}function SSt(t){t.registerAction("legendToggleSelect","legendselectchanged",zr(vb,"toggleSelected")),t.registerAction("legendAllSelect","legendselectall",zr(vb,"allSelect")),t.registerAction("legendInverseSelect","legendinverseselect",zr(vb,"inverseSelect")),t.registerAction("legendSelect","legendselected",zr(vb,"select")),t.registerAction("legendUnSelect","legendunselected",zr(vb,"unSelect"))}function Ode(t){t.registerComponentModel(s6),t.registerComponentView(Ede),t.registerProcessor(t.PRIORITY.PROCESSOR.SERIES_FILTER,bSt),t.registerSubTypeDefaulter("legend",function(){return"plain"}),SSt(t)}var _St=function(t){xr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.setScrollDataIndex=function(n){this.option.scrollDataIndex=n},e.prototype.init=function(n,r,i){var o=P$(n);t.prototype.init.call(this,n,r,i),xY(this,n,o)},e.prototype.mergeOption=function(n,r){t.prototype.mergeOption.call(this,n,r),xY(this,this.option,n)},e.type="legend.scroll",e.defaultOption=FEe(s6.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),e}(s6);function xY(t,e,n){var r=t.getOrient(),i=[1,1];i[r.index]=0,r2(e,n,{type:"box",ignoreSize:!!i})}const wSt=_St;var CY=yu,gE=["width","height"],mE=["x","y"],kSt=function(t){xr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.newlineDisabled=!0,n._currentIndex=0,n}return e.prototype.init=function(){t.prototype.init.call(this),this.group.add(this._containerGroup=new CY),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new CY)},e.prototype.resetInner=function(){t.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},e.prototype.renderInner=function(n,r,i,o,a,s,l){var c=this;t.prototype.renderInner.call(this,n,r,i,o,a,s,l);var u=this._controllerGroup,f=r.get("pageIconSize",!0),d=mt(f)?f:[f,f];g("pagePrev",0);var h=r.getModel("pageTextStyle");u.add(new ea({name:"pageText",style:{text:"xx/xx",fill:h.getTextColor(),font:h.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),g("pageNext",1);function g(y,S){var v=y+"DataIndex",_=k$(r.get("pageIcons",!0)[r.getOrient().name][S],{onclick:Or(c._pageGo,c,v,r,o)},{x:-d[0]/2,y:-d[1]/2,width:d[0],height:d[1]});_.name=y,u.add(_)}},e.prototype.layoutInner=function(n,r,i,o,a,s){var l=this.getSelectorGroup(),c=n.getOrient().index,u=gE[c],f=mE[c],d=gE[1-c],h=mE[1-c];a&&a1("horizontal",l,n.get("selectorItemGap",!0));var g=n.get("selectorButtonGap",!0),y=l.getBoundingRect(),S=[-y.x,-y.y],v=Gn(i);a&&(v[u]=i[u]-y[u]-g);var _=this._layoutContentAndController(n,o,v,c,u,d,h,f);if(a){if(s==="end")S[c]+=_[u]+g;else{var x=y[u]+g;S[c]-=x,_[f]-=x}_[u]+=y[u]+g,S[1-c]+=_[h]+_[d]/2-y[d]/2,_[d]=Math.max(_[d],y[d]),_[h]=Math.min(_[h],y[h]+S[1-c]),l.x=S[0],l.y=S[1],l.markRedraw()}return _},e.prototype._layoutContentAndController=function(n,r,i,o,a,s,l,c){var u=this.getContentGroup(),f=this._containerGroup,d=this._controllerGroup;a1(n.get("orient"),u,n.get("itemGap"),o?i.width:null,o?null:i.height),a1("horizontal",d,n.get("pageButtonItemGap",!0));var h=u.getBoundingRect(),g=d.getBoundingRect(),y=this._showController=h[a]>i[a],S=[-h.x,-h.y];r||(S[o]=u[c]);var v=[0,0],_=[-g.x,-g.y],x=mn(n.get("pageButtonGap",!0),n.get("itemGap",!0));if(y){var C=n.get("pageButtonPosition",!0);C==="end"?_[o]+=i[a]-g[a]:v[o]+=g[a]+x}_[1-o]+=h[s]/2-g[s]/2,u.setPosition(S),f.setPosition(v),d.setPosition(_);var k={x:0,y:0};if(k[a]=y?i[a]:h[a],k[s]=Math.max(h[s],g[s]),k[l]=Math.min(0,g[l]+_[1-o]),f.__rectSize=i[a],y){var m={x:0,y:0};m[a]=Math.max(i[a]-g[a]-x,0),m[s]=k[s],f.setClipPath(new Qo({shape:m})),f.__rectSize=m[a]}else d.eachChild(function(E){E.attr({invisible:!0,silent:!0})});var T=this._getPageInfo(n);return T.pageIndex!=null&&Cg(u,{x:T.contentPosition[0],y:T.contentPosition[1]},y?n:null),this._updatePageInfoView(n,T),k},e.prototype._pageGo=function(n,r,i){var o=this._getPageInfo(r)[n];o!=null&&i.dispatchAction({type:"legendScroll",scrollDataIndex:o,legendId:r.id})},e.prototype._updatePageInfoView=function(n,r){var i=this._controllerGroup;be(["pagePrev","pageNext"],function(u){var f=u+"DataIndex",d=r[f]!=null,h=i.childOfName(u);h&&(h.setStyle("fill",d?n.get("pageIconColor",!0):n.get("pageIconInactiveColor",!0)),h.cursor=d?"pointer":"default")});var o=i.childOfName("pageText"),a=n.get("pageFormatter"),s=r.pageIndex,l=s!=null?s+1:0,c=r.pageCount;o&&a&&o.setStyle("text",Ot(a)?a.replace("{current}",l==null?"":l+"").replace("{total}",c==null?"":c+""):a({current:l,total:c}))},e.prototype._getPageInfo=function(n){var r=n.get("scrollDataIndex",!0),i=this.getContentGroup(),o=this._containerGroup.__rectSize,a=n.getOrient().index,s=gE[a],l=mE[a],c=this._findTargetItemIndex(r),u=i.children(),f=u[c],d=u.length,h=d?1:0,g={contentPosition:[i.x,i.y],pageCount:h,pageIndex:h-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!f)return g;var y=C(f);g.contentPosition[a]=-y.s;for(var S=c+1,v=y,_=y,x=null;S<=d;++S)x=C(u[S]),(!x&&_.e>v.s+o||x&&!k(x,v.s))&&(_.i>v.i?v=_:v=x,v&&(g.pageNextDataIndex==null&&(g.pageNextDataIndex=v.i),++g.pageCount)),_=x;for(var S=c-1,v=y,_=y,x=null;S>=-1;--S)x=C(u[S]),(!x||!k(_,x.s))&&v.i<_.i&&(_=v,g.pagePrevDataIndex==null&&(g.pagePrevDataIndex=v.i),++g.pageCount,++g.pageIndex),v=x;return g;function C(m){if(m){var T=m.getBoundingRect(),E=T[l]+m[l];return{s:E,e:E+T[s],i:m.__legendDataIndex}}}function k(m,T){return m.e>=T&&m.s<=T+o}},e.prototype._findTargetItemIndex=function(n){if(!this._showController)return 0;var r,i=this.getContentGroup(),o;return i.eachChild(function(a,s){var l=a.__legendDataIndex;o==null&&l!=null&&(o=s),l===n&&(r=s)}),r??o},e.type="legend.scroll",e}(Ede);const xSt=kSt;function CSt(t){t.registerAction("legendScroll","legendscroll",function(e,n){var r=e.scrollDataIndex;r!=null&&n.eachComponent({mainType:"legend",subType:"scroll",query:e},function(i){i.setScrollDataIndex(r)})})}function TSt(t){Tf(Ode),t.registerComponentModel(wSt),t.registerComponentView(xSt),CSt(t)}function uN(t){Tf(Ode),Tf(TSt)}var vE=Math.sin,yE=Math.cos,Ide=Math.PI,bp=Math.PI*2,ASt=180/Ide,PSt=function(){function t(){}return t.prototype.reset=function(e){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,e||4)},t.prototype.moveTo=function(e,n){this._add("M",e,n)},t.prototype.lineTo=function(e,n){this._add("L",e,n)},t.prototype.bezierCurveTo=function(e,n,r,i,o,a){this._add("C",e,n,r,i,o,a)},t.prototype.quadraticCurveTo=function(e,n,r,i){this._add("Q",e,n,r,i)},t.prototype.arc=function(e,n,r,i,o,a){this.ellipse(e,n,r,r,0,i,o,a)},t.prototype.ellipse=function(e,n,r,i,o,a,s,l){var c=s-a,u=!l,f=Math.abs(c),d=xd(f-bp)||(u?c>=bp:-c>=bp),h=c>0?c%bp:c%bp+bp,g=!1;d?g=!0:xd(f)?g=!1:g=h>=Ide==!!u;var y=e+r*yE(a),S=n+i*vE(a);this._start&&this._add("M",y,S);var v=Math.round(o*ASt);if(d){var _=1/this._p,x=(u?1:-1)*(bp-_);this._add("A",r,i,v,1,+u,e+r*yE(a+x),n+i*vE(a+x)),_>.01&&this._add("A",r,i,v,0,+u,y,S)}else{var C=e+r*yE(s),k=n+i*vE(s);this._add("A",r,i,v,+g,+u,C,k)}},t.prototype.rect=function(e,n,r,i){this._add("M",e,n),this._add("l",r,0),this._add("l",0,i),this._add("l",-r,0),this._add("Z")},t.prototype.closePath=function(){this._d.length>0&&this._add("Z")},t.prototype._add=function(e,n,r,i,o,a,s,l,c){for(var u=[],f=this._p,d=1;d<arguments.length;d++){var h=arguments[d];if(isNaN(h)){this._invalid=!0;return}u.push(Math.round(h*f)/f)}this._d.push(e+u.join(" ")),this._start=e==="Z"},t.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},t.prototype.getStr=function(){return this._str},t}();const $de=PSt;var b1="none",ESt=Math.round;function OSt(t){var e=t.fill;return e!=null&&e!==b1}function ISt(t){var e=t.stroke;return e!=null&&e!==b1}var f6=["lineCap","miterLimit","lineJoin"],$St=tn(f6,function(t){return"stroke-"+t.toLowerCase()});function FSt(t,e,n,r){var i=e.opacity==null?1:e.opacity;if(n instanceof gh){t("opacity",i);return}if(OSt(e)){var o=X1(e.fill);t("fill",o.color);var a=e.fillOpacity!=null?e.fillOpacity*o.opacity*i:o.opacity*i;(r||a<1)&&t("fill-opacity",a)}else t("fill",b1);if(ISt(e)){var s=X1(e.stroke);t("stroke",s.color);var l=e.strokeNoScale?n.getLineScale():1,c=l?(e.lineWidth||0)/l:0,u=e.strokeOpacity!=null?e.strokeOpacity*s.opacity*i:s.opacity*i,f=e.strokeFirst;if((r||c!==1)&&t("stroke-width",c),(r||f)&&t("paint-order",f?"stroke":"fill"),(r||u<1)&&t("stroke-opacity",u),e.lineDash){var d=z$(n),h=d[0],g=d[1];h&&(g=ESt(g||0),t("stroke-dasharray",h.join(",")),(g||r)&&t("stroke-dashoffset",g))}else r&&t("stroke-dasharray",b1);for(var y=0;y<f6.length;y++){var S=f6[y];if(r||e[S]!==R4[S]){var v=e[S]||R4[S];v&&t($St[y],v)}}}else r&&t("stroke",b1)}var Fde="http://www.w3.org/2000/svg",Lde="http://www.w3.org/1999/xlink",LSt="http://www.w3.org/2000/xmlns/",DSt="http://www.w3.org/XML/1998/namespace";function Dde(t){return document.createElementNS(Fde,t)}function Zi(t,e,n,r,i){return{tag:t,attrs:n||{},children:r,text:i,key:e}}function NSt(t,e){var n=[];if(e)for(var r in e){var i=e[r],o=r;i!==!1&&(i!==!0&&i!=null&&(o+='="'+i+'"'),n.push(o))}return"<"+t+" "+n.join(" ")+">"}function MSt(t){return"</"+t+">"}function fN(t,e){e=e||{};var n=e.newline?`
`:"";function r(i){var o=i.children,a=i.tag,s=i.attrs,l=i.text;return NSt(a,s)+(a!=="style"?Ls(l):l||"")+(o?""+n+tn(o,function(c){return r(c)}).join(n)+n:"")+MSt(a)}return r(t)}function RSt(t,e,n){n=n||{};var r=n.newline?`
`:"",i=" {"+r,o=r+"}",a=tn(ir(t),function(l){return l+i+tn(ir(t[l]),function(c){return c+":"+t[l][c]+";"}).join(r)+o}).join(r),s=tn(ir(e),function(l){return"@keyframes "+l+i+tn(ir(e[l]),function(c){return c+i+tn(ir(e[l][c]),function(u){var f=e[l][c][u];return u==="d"&&(f='path("'+f+'")'),u+":"+f+";"}).join(r)+o}).join(r)+o}).join(r);return!a&&!s?"":["<![CDATA[",a,s,"]]>"].join(r)}function d6(t){return{zrId:t,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssClassIdx:0,cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function TY(t,e,n,r){return Zi("svg","root",{width:t,height:e,xmlns:Fde,"xmlns:xlink":Lde,version:"1.1",baseProfile:"full",viewBox:r?"0 0 "+t+" "+e:!1},n)}var AY={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},Cp="transform-origin";function zSt(t,e,n){var r=ot({},t.shape);ot(r,e),t.buildPath(n,r);var i=new $de;return i.reset(Jee(t)),n.rebuildPath(i,1),i.generateStr(),i.getStr()}function VSt(t,e){var n=e.originX,r=e.originY;(n||r)&&(t[Cp]=n+"px "+r+"px")}var BSt={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function Nde(t,e){var n=e.zrId+"-ani-"+e.cssAnimIdx++;return e.cssAnims[n]=t,n}function jSt(t,e,n){var r=t.shape.paths,i={},o,a;if(be(r,function(l){var c=d6(n.zrId);c.animation=!0,iA(l,{},c,!0);var u=c.cssAnims,f=c.cssNodes,d=ir(u),h=d.length;if(h){a=d[h-1];var g=u[a];for(var y in g){var S=g[y];i[y]=i[y]||{d:""},i[y].d+=S.d||""}for(var v in f){var _=f[v].animation;_.indexOf(a)>=0&&(o=_)}}}),!!o){e.d=!1;var s=Nde(i,n);return o.replace(a,s)}}function PY(t){return Ot(t)?AY[t]?"cubic-bezier("+AY[t]+")":n$(t)?t:"":""}function iA(t,e,n,r){var i=t.animators,o=i.length,a=[];if(t instanceof one){var s=jSt(t,e,n);if(s)a.push(s);else if(!o)return}else if(!o)return;for(var l={},c=0;c<o;c++){var u=i[c],f=[u.getMaxTime()/1e3+"s"],d=PY(u.getClip().easing),h=u.getDelay();d?f.push(d):f.push("linear"),h&&f.push(h/1e3+"s"),u.getLoop()&&f.push("infinite");var g=f.join(" ");l[g]=l[g]||[g,[]],l[g][1].push(u)}function y(_){var x=_[1],C=x.length,k={},m={},T={},E="animation-timing-function";function I(ue,ce,fe){for(var ye=ue.getTracks(),j=ue.getMaxTime(),Y=0;Y<ye.length;Y++){var O=ye[Y];if(O.needsAnimate()){var M=O.keyframes,H=O.propName;if(fe&&(H=fe(H)),H)for(var Q=0;Q<M.length;Q++){var ve=M[Q],ge=Math.round(ve.time/j*100)+"%",De=PY(ve.easing),Le=ve.rawValue;(Ot(Le)||Zr(Le))&&(ce[ge]=ce[ge]||{},ce[ge][H]=ve.rawValue,De&&(ce[ge][E]=De))}}}}for(var D=0;D<C;D++){var F=x[D],R=F.targetName;R?R==="shape"&&I(F,m):!r&&I(F,k)}for(var z in k){var B={};nte(B,t),ot(B,k[z]);var ie=Zee(B),oe=k[z][E];T[z]=ie?{transform:ie}:{},VSt(T[z],B),oe&&(T[z][E]=oe)}var _e,Ae=!0;for(var z in m){T[z]=T[z]||{};var Pe=!_e,oe=m[z][E];Pe&&(_e=new sh);var Se=_e.len();_e.reset(),T[z].d=zSt(t,m[z],_e);var se=_e.len();if(!Pe&&Se!==se){Ae=!1;break}oe&&(T[z][E]=oe)}if(!Ae)for(var z in T)delete T[z].d;if(!r)for(var D=0;D<C;D++){var F=x[D],R=F.targetName;R==="style"&&I(F,T,function(ye){return BSt[ye]})}for(var ne=ir(T),J=!0,V,D=1;D<ne.length;D++){var W=ne[D-1],ae=ne[D];if(T[W][Cp]!==T[ae][Cp]){J=!1;break}V=T[W][Cp]}if(J&&V){for(var z in T)T[z][Cp]&&delete T[z][Cp];e[Cp]=V}if(Za(ne,function(ue){return ir(T[ue]).length>0}).length){var te=Nde(T,n);return te+" "+_[0]+" both"}}for(var S in l){var s=y(l[S]);s&&a.push(s)}if(a.length){var v=n.zrId+"-cls-"+n.cssClassIdx++;n.cssNodes["."+v]={animation:a.join(",")},e.class=v}}var F2=Math.round;function Mde(t){return t&&Ot(t.src)}function Rde(t){return t&&Qn(t.toDataURL)}function dN(t,e,n,r){FSt(function(i,o){var a=i==="fill"||i==="stroke";a&&Xee(o)?Vde(e,t,i,r):a&&r$(o)?Bde(n,t,i,r):t[i]=o},e,n,!1),KSt(n,t,r)}function EY(t){return xd(t[0]-1)&&xd(t[1])&&xd(t[2])&&xd(t[3]-1)}function HSt(t){return xd(t[4])&&xd(t[5])}function hN(t,e,n){if(e&&!(HSt(e)&&EY(e))){var r=n?10:1e4;t.transform=EY(e)?"translate("+F2(e[4]*r)/r+" "+F2(e[5]*r)/r+")":QAe(e)}}function OY(t,e,n){for(var r=t.points,i=[],o=0;o<r.length;o++)i.push(F2(r[o][0]*n)/n),i.push(F2(r[o][1]*n)/n);e.points=i.join(" ")}function IY(t){return!t.smooth}function USt(t){var e=tn(t,function(n){return typeof n=="string"?[n,n]:n});return function(n,r,i){for(var o=0;o<e.length;o++){var a=e[o],s=n[a[0]];s!=null&&(r[a[1]]=F2(s*i)/i)}}}var WSt={circle:[USt(["cx","cy","r"])],polyline:[OY,IY],polygon:[OY,IY]};function GSt(t){for(var e=t.animators,n=0;n<e.length;n++)if(e[n].targetName==="shape")return!0;return!1}function zde(t,e){var n=t.style,r=t.shape,i=WSt[t.type],o={},a=e.animation,s="path",l=t.style.strokePercent,c=e.compress&&Jee(t)||4;if(i&&!e.willUpdate&&!(i[1]&&!i[1](r))&&!(a&&GSt(t))&&!(l<1)){s=t.type;var u=Math.pow(10,c);i[0](r,o,u)}else{var f=!t.path||t.shapeChanged();t.path||t.createPathProxy();var d=t.path;f&&(d.beginPath(),t.buildPath(d,t.shape),t.pathUpdated());var h=d.getVersion(),g=t,y=g.__svgPathBuilder;(g.__svgPathVersion!==h||!y||l!==g.__svgPathStrokePercent)&&(y||(y=g.__svgPathBuilder=new $de),y.reset(c),d.rebuildPath(y,l),y.generateStr(),g.__svgPathVersion=h,g.__svgPathStrokePercent=l),o.d=y.getStr()}return hN(o,t.transform),dN(o,n,t,e),e.animation&&iA(t,o,e),Zi(s,t.id+"",o)}function qSt(t,e){var n=t.style,r=n.image;if(r&&!Ot(r)&&(Mde(r)?r=r.src:Rde(r)&&(r=r.toDataURL())),!!r){var i=n.x||0,o=n.y||0,a=n.width,s=n.height,l={href:r,width:a,height:s};return i&&(l.x=i),o&&(l.y=o),hN(l,t.transform),dN(l,n,t,e),e.animation&&iA(t,l,e),Zi("image",t.id+"",l)}}function YSt(t,e){var n=t.style,r=n.text;if(r!=null&&(r+=""),!(!r||isNaN(n.x)||isNaN(n.y))){var i=n.font||oh,o=n.x||0,a=t5e(n.y||0,BT(i),n.textBaseline),s=e5e[n.textAlign]||n.textAlign,l={"dominant-baseline":"central","text-anchor":s};if(Ete(n)){var c="",u=n.fontStyle,f=Pte(n.fontSize);if(!parseFloat(f))return;var d=n.fontFamily||kee,h=n.fontWeight;c+="font-size:"+f+";font-family:"+d+";",u&&u!=="normal"&&(c+="font-style:"+u+";"),h&&h!=="normal"&&(c+="font-weight:"+h+";"),l.style=c}else l.style="font: "+i;return r.match(/\s/)&&(l["xml:space"]="preserve"),o&&(l.x=o),a&&(l.y=a),hN(l,t.transform),dN(l,n,t,e),e.animation&&iA(t,l,e),Zi("text",t.id+"",l,void 0,r)}}function $Y(t,e){if(t instanceof Fr)return zde(t,e);if(t instanceof gh)return qSt(t,e);if(t instanceof z4)return YSt(t,e)}function KSt(t,e,n){var r=t.style;if(n5e(r)){var i=r5e(t),o=n.shadowCache,a=o[i];if(!a){var s=t.getGlobalScale(),l=s[0],c=s[1];if(!l||!c)return;var u=r.shadowOffsetX||0,f=r.shadowOffsetY||0,d=r.shadowBlur,h=X1(r.shadowColor),g=h.opacity,y=h.color,S=d/2/l,v=d/2/c,_=S+" "+v;a=n.zrId+"-s"+n.shadowIdx++,n.defs[a]=Zi("filter",a,{id:a,x:"-100%",y:"-100%",width:"300%",height:"300%"},[Zi("feDropShadow","",{dx:u/l,dy:f/c,stdDeviation:_,"flood-color":y,"flood-opacity":g})]),o[i]=a}e.filter=VT(a)}}function Vde(t,e,n,r){var i=t[n],o,a={gradientUnits:i.global?"userSpaceOnUse":"objectBoundingBox"};if(Yee(i))o="linearGradient",a.x1=i.x,a.y1=i.y,a.x2=i.x2,a.y2=i.y2;else if(Kee(i))o="radialGradient",a.cx=mn(i.x,.5),a.cy=mn(i.y,.5),a.r=mn(i.r,.5);else return;for(var s=i.colorStops,l=[],c=0,u=s.length;c<u;++c){var f=u9(s[c].offset)*100+"%",d=s[c].color,h=X1(d),g=h.color,y=h.opacity,S={offset:f};S["stop-color"]=g,y<1&&(S["stop-opacity"]=y),l.push(Zi("stop",c+"",S))}var v=Zi(o,"",a,l),_=fN(v),x=r.gradientCache,C=x[_];C||(C=r.zrId+"-g"+r.gradientIdx++,x[_]=C,a.id=C,r.defs[C]=Zi(o,C,a,l)),e[n]=VT(C)}function Bde(t,e,n,r){var i=t.style[n],o=t.getBoundingRect(),a={},s=i.repeat,l=s==="no-repeat",c=s==="repeat-x",u=s==="repeat-y",f;if(qee(i)){var d=i.imageWidth,h=i.imageHeight,g=void 0,y=i.image;if(Ot(y)?g=y:Mde(y)?g=y.src:Rde(y)&&(g=y.toDataURL()),typeof Image>"u"){var S="Image width/height must been given explictly in svg-ssr renderer.";Hs(d,S),Hs(h,S)}else if(d==null||h==null){var v=function(D,F){if(D){var R=D.elm,z=d||F.width,B=h||F.height;D.tag==="pattern"&&(c?(B=1,z/=o.width):u&&(z=1,B/=o.height)),D.attrs.width=z,D.attrs.height=B,R&&(R.setAttribute("width",z),R.setAttribute("height",B))}},_=f$(g,null,t,function(D){l||v(m,D),v(f,D)});_&&_.width&&_.height&&(d=d||_.width,h=h||_.height)}f=Zi("image","img",{href:g,width:d,height:h}),a.width=d,a.height=h}else i.svgElement&&(f=Gn(i.svgElement),a.width=i.svgWidth,a.height=i.svgHeight);if(f){var x,C;l?x=C=1:c?(C=1,x=a.width/o.width):u?(x=1,C=a.height/o.height):a.patternUnits="userSpaceOnUse",x!=null&&!isNaN(x)&&(a.width=x),C!=null&&!isNaN(C)&&(a.height=C);var k=Zee(i);k&&(a.patternTransform=k);var m=Zi("pattern","",a,[f]),T=fN(m),E=r.patternCache,I=E[T];I||(I=r.zrId+"-p"+r.patternIdx++,E[T]=I,a.id=I,m=r.defs[I]=Zi("pattern",I,a,[f])),e[n]=VT(I)}}function XSt(t,e,n){var r=n.clipPathCache,i=n.defs,o=r[t.id];if(!o){o=n.zrId+"-c"+n.clipPathIdx++;var a={id:o};r[t.id]=o,i[o]=Zi("clipPath",o,a,[zde(t,n)])}e["clip-path"]=VT(o)}function FY(t){return document.createTextNode(t)}function zp(t,e,n){t.insertBefore(e,n)}function LY(t,e){t.removeChild(e)}function DY(t,e){t.appendChild(e)}function jde(t){return t.parentNode}function Hde(t){return t.nextSibling}function bE(t,e){t.textContent=e}var NY=58,JSt=120,ZSt=Zi("","");function h6(t){return t===void 0}function Gc(t){return t!==void 0}function QSt(t,e,n){for(var r={},i=e;i<=n;++i){var o=t[i].key;o!==void 0&&(r[o]=i)}return r}function Rb(t,e){var n=t.key===e.key,r=t.tag===e.tag;return r&&n}function L2(t){var e,n=t.children,r=t.tag;if(Gc(r)){var i=t.elm=Dde(r);if(pN(ZSt,t),mt(n))for(e=0;e<n.length;++e){var o=n[e];o!=null&&DY(i,L2(o))}else Gc(t.text)&&!jt(t.text)&&DY(i,FY(t.text))}else t.elm=FY(t.text);return t.elm}function Ude(t,e,n,r,i){for(;r<=i;++r){var o=n[r];o!=null&&zp(t,L2(o),e)}}function XC(t,e,n,r){for(;n<=r;++n){var i=e[n];if(i!=null)if(Gc(i.tag)){var o=jde(i.elm);LY(o,i.elm)}else LY(t,i.elm)}}function pN(t,e){var n,r=e.elm,i=t&&t.attrs||{},o=e.attrs||{};if(i!==o){for(n in o){var a=o[n],s=i[n];s!==a&&(a===!0?r.setAttribute(n,""):a===!1?r.removeAttribute(n):n.charCodeAt(0)!==JSt?r.setAttribute(n,a):n==="xmlns:xlink"||n==="xmlns"?r.setAttributeNS(LSt,n,a):n.charCodeAt(3)===NY?r.setAttributeNS(DSt,n,a):n.charCodeAt(5)===NY?r.setAttributeNS(Lde,n,a):r.setAttribute(n,a))}for(n in i)n in o||r.removeAttribute(n)}}function e_t(t,e,n){for(var r=0,i=0,o=e.length-1,a=e[0],s=e[o],l=n.length-1,c=n[0],u=n[l],f,d,h,g;r<=o&&i<=l;)a==null?a=e[++r]:s==null?s=e[--o]:c==null?c=n[++i]:u==null?u=n[--l]:Rb(a,c)?(nv(a,c),a=e[++r],c=n[++i]):Rb(s,u)?(nv(s,u),s=e[--o],u=n[--l]):Rb(a,u)?(nv(a,u),zp(t,a.elm,Hde(s.elm)),a=e[++r],u=n[--l]):Rb(s,c)?(nv(s,c),zp(t,s.elm,a.elm),s=e[--o],c=n[++i]):(h6(f)&&(f=QSt(e,r,o)),d=f[c.key],h6(d)?zp(t,L2(c),a.elm):(h=e[d],h.tag!==c.tag?zp(t,L2(c),a.elm):(nv(h,c),e[d]=void 0,zp(t,h.elm,a.elm))),c=n[++i]);(r<=o||i<=l)&&(r>o?(g=n[l+1]==null?null:n[l+1].elm,Ude(t,g,n,i,l)):XC(t,e,r,o))}function nv(t,e){var n=e.elm=t.elm,r=t.children,i=e.children;t!==e&&(pN(t,e),h6(e.text)?Gc(r)&&Gc(i)?r!==i&&e_t(n,r,i):Gc(i)?(Gc(t.text)&&bE(n,""),Ude(n,null,i,0,i.length-1)):Gc(r)?XC(n,r,0,r.length-1):Gc(t.text)&&bE(n,""):t.text!==e.text&&(Gc(r)&&XC(n,r,0,r.length-1),bE(n,e.text)))}function t_t(t,e){if(Rb(t,e))nv(t,e);else{var n=t.elm,r=jde(n);L2(e),r!==null&&(zp(r,e.elm,Hde(n)),XC(r,[t],0,0))}return e}var n_t=0,r_t=function(){function t(e,n,r){if(this.type="svg",this.refreshHover=MY(),this.configLayer=MY(),this.storage=n,this._opts=r=ot({},r),this.root=e,this._id="zr"+n_t++,this._oldVNode=TY(r.width,r.height),e&&!r.ssr){var i=this._viewport=document.createElement("div");i.style.cssText="position:relative;overflow:hidden";var o=this._svgDom=this._oldVNode.elm=Dde("svg");pN(null,this._oldVNode),i.appendChild(o),e.appendChild(i)}this.resize(r.width,r.height)}return t.prototype.getType=function(){return this.type},t.prototype.getViewportRoot=function(){return this._viewport},t.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},t.prototype.getSvgDom=function(){return this._svgDom},t.prototype.refresh=function(){if(this.root){var e=this.renderToVNode({willUpdate:!0});e.attrs.style="position:absolute;left:0;top:0;user-select:none",t_t(this._oldVNode,e),this._oldVNode=e}},t.prototype.renderOneToVNode=function(e){return $Y(e,d6(this._id))},t.prototype.renderToVNode=function(e){e=e||{};var n=this.storage.getDisplayList(!0),r=this._width,i=this._height,o=d6(this._id);o.animation=e.animation,o.willUpdate=e.willUpdate,o.compress=e.compress;var a=[],s=this._bgVNode=i_t(r,i,this._backgroundColor,o);s&&a.push(s);var l=e.compress?null:this._mainVNode=Zi("g","main",{},[]);this._paintList(n,o,l?l.children:a),l&&a.push(l);var c=tn(ir(o.defs),function(d){return o.defs[d]});if(c.length&&a.push(Zi("defs","defs",{},c)),e.animation){var u=RSt(o.cssNodes,o.cssAnims,{newline:!0});if(u){var f=Zi("style","stl",{},[],u);a.push(f)}}return TY(r,i,a,e.useViewBox)},t.prototype.renderToString=function(e){return e=e||{},fN(this.renderToVNode({animation:mn(e.cssAnimation,!0),willUpdate:!1,compress:!0,useViewBox:mn(e.useViewBox,!0)}),{newline:!0})},t.prototype.setBackgroundColor=function(e){this._backgroundColor=e},t.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},t.prototype._paintList=function(e,n,r){for(var i=e.length,o=[],a=0,s,l,c=0,u=0;u<i;u++){var f=e[u];if(!f.invisible){var d=f.__clipPaths,h=d&&d.length||0,g=l&&l.length||0,y=void 0;for(y=Math.max(h-1,g-1);y>=0&&!(d&&l&&d[y]===l[y]);y--);for(var S=g-1;S>y;S--)a--,s=o[a-1];for(var v=y+1;v<h;v++){var _={};XSt(d[v],_,n);var x=Zi("g","clip-g-"+c++,_,[]);(s?s.children:r).push(x),o[a++]=x,s=x}l=d;var C=$Y(f,n);C&&(s?s.children:r).push(C)}}},t.prototype.resize=function(e,n){var r=this._opts,i=this.root,o=this._viewport;if(e!=null&&(r.width=e),n!=null&&(r.height=n),i&&o&&(o.style.display="none",e=gv(i,0,r),n=gv(i,1,r),o.style.display=""),this._width!==e||this._height!==n){if(this._width=e,this._height=n,o){var a=o.style;a.width=e+"px",a.height=n+"px"}if(r$(this._backgroundColor))this.refresh();else{var s=this._svgDom;s&&(s.setAttribute("width",e),s.setAttribute("height",n));var l=this._bgVNode&&this._bgVNode.elm;l&&(l.setAttribute("width",e),l.setAttribute("height",n))}}},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},t.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},t.prototype.toDataURL=function(e){var n=this.renderToString(),r="data:image/svg+xml;";return e?(n=o5e(n),n&&r+"base64,"+n):r+"charset=UTF-8,"+encodeURIComponent(n)},t}();function MY(t){return function(){}}function i_t(t,e,n,r){var i;if(n&&n!=="none")if(i=Zi("rect","bg",{width:t,height:e,x:"0",y:"0",id:"0"}),Xee(n))Vde({fill:n},i.attrs,"fill",r);else if(r$(n))Bde({style:{fill:n},dirty:Jo,getBoundingRect:function(){return{width:t,height:e}}},i.attrs,"fill",r);else{var o=X1(n),a=o.color,s=o.opacity;i.attrs.fill=a,s<1&&(i.attrs["fill-opacity"]=s)}return i}const o_t=r_t;function a_t(t){t.registerPainter("svg",o_t)}function RY(t,e,n){var r=L0.createCanvas(),i=e.getWidth(),o=e.getHeight(),a=r.style;return a&&(a.position="absolute",a.left="0",a.top="0",a.width=i+"px",a.height=o+"px",r.setAttribute("data-zr-dom-id",t)),r.width=i*n,r.height=o*n,r}var s_t=function(t){Cr(e,t);function e(n,r,i){var o=t.call(this)||this;o.motionBlur=!1,o.lastFrameAlpha=.7,o.dpr=1,o.virtual=!1,o.config={},o.incremental=!1,o.zlevel=0,o.maxRepaintRectCount=5,o.__dirty=!0,o.__firstTimePaint=!0,o.__used=!1,o.__drawIndex=0,o.__startIndex=0,o.__endIndex=0,o.__prevStartIndex=null,o.__prevEndIndex=null;var a;i=i||D4,typeof n=="string"?a=RY(n,r,i):jt(n)&&(a=n,n=a.id),o.id=n,o.dom=a;var s=a.style;return s&&(Oee(a),a.onselectstart=function(){return!1},s.padding="0",s.margin="0",s.borderWidth="0"),o.painter=r,o.dpr=i,o}return e.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},e.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},e.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},e.prototype.setUnpainted=function(){this.__firstTimePaint=!0},e.prototype.createBackBuffer=function(){var n=this.dpr;this.domBack=RY("back-"+this.id,this.painter,n),this.ctxBack=this.domBack.getContext("2d"),n!==1&&this.ctxBack.scale(n,n)},e.prototype.createRepaintRects=function(n,r,i,o){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var a=[],s=this.maxRepaintRectCount,l=!1,c=new Ir(0,0,0,0);function u(_){if(!(!_.isFinite()||_.isZero()))if(a.length===0){var x=new Ir(0,0,0,0);x.copy(_),a.push(x)}else{for(var C=!1,k=1/0,m=0,T=0;T<a.length;++T){var E=a[T];if(E.intersect(_)){var I=new Ir(0,0,0,0);I.copy(E),I.union(_),a[T]=I,C=!0;break}else if(l){c.copy(_),c.union(E);var D=_.width*_.height,F=E.width*E.height,R=c.width*c.height,z=R-D-F;z<k&&(k=z,m=T)}}if(l&&(a[m].union(_),C=!0),!C){var x=new Ir(0,0,0,0);x.copy(_),a.push(x)}l||(l=a.length>=s)}}for(var f=this.__startIndex;f<this.__endIndex;++f){var d=n[f];if(d){var h=d.shouldBePainted(i,o,!0,!0),g=d.__isRendered&&(d.__dirty&Ns||!h)?d.getPrevPaintRect():null;g&&u(g);var y=h&&(d.__dirty&Ns||!d.__isRendered)?d.getPaintRect():null;y&&u(y)}}for(var f=this.__prevStartIndex;f<this.__prevEndIndex;++f){var d=r[f],h=d.shouldBePainted(i,o,!0,!0);if(d&&(!h||!d.__zr)&&d.__isRendered){var g=d.getPrevPaintRect();g&&u(g)}}var S;do{S=!1;for(var f=0;f<a.length;){if(a[f].isZero()){a.splice(f,1);continue}for(var v=f+1;v<a.length;)a[f].intersect(a[v])?(S=!0,a[f].union(a[v]),a.splice(v,1)):v++;f++}}while(S);return this._paintRects=a,a},e.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},e.prototype.resize=function(n,r){var i=this.dpr,o=this.dom,a=o.style,s=this.domBack;a&&(a.width=n+"px",a.height=r+"px"),o.width=n*i,o.height=r*i,s&&(s.width=n*i,s.height=r*i,i!==1&&this.ctxBack.scale(i,i))},e.prototype.clear=function(n,r,i){var o=this.dom,a=this.ctx,s=o.width,l=o.height;r=r||this.clearColor;var c=this.motionBlur&&!n,u=this.lastFrameAlpha,f=this.dpr,d=this;c&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(o,0,0,s/f,l/f));var h=this.domBack;function g(y,S,v,_){if(a.clearRect(y,S,v,_),r&&r!=="transparent"){var x=void 0;if(RT(r)){var C=r.global||r.__width===v&&r.__height===_;x=C&&r.__canvasGradient||j9(a,r,{x:0,y:0,width:v,height:_}),r.__canvasGradient=x,r.__width=v,r.__height=_}else J3e(r)&&(r.scaleX=r.scaleX||f,r.scaleY=r.scaleY||f,x=H9(a,r,{dirty:function(){d.setUnpainted(),d.__painter.refresh()}}));a.save(),a.fillStyle=x||r,a.fillRect(y,S,v,_),a.restore()}c&&(a.save(),a.globalAlpha=u,a.drawImage(h,y,S,v,_),a.restore())}!i||c?g(0,0,s,l):i.length&&be(i,function(y){g(y.x*f,y.y*f,y.width*f,y.height*f)})},e}(wu);const SE=s_t;var zY=1e5,Sp=314159,Gk=.01,l_t=.001;function c_t(t){return t?t.__builtin__?!0:!(typeof t.resize!="function"||typeof t.refresh!="function"):!1}function u_t(t,e){var n=document.createElement("div");return n.style.cssText=["position:relative","width:"+t+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",n}var f_t=function(){function t(e,n,r,i){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var o=!e.nodeName||e.nodeName.toUpperCase()==="CANVAS";this._opts=r=ot({},r||{}),this.dpr=r.devicePixelRatio||D4,this._singleCanvas=o,this.root=e;var a=e.style;a&&(Oee(e),e.innerHTML=""),this.storage=n;var s=this._zlevelList;this._prevDisplayList=[];var l=this._layers;if(o){var u=e,f=u.width,d=u.height;r.width!=null&&(f=r.width),r.height!=null&&(d=r.height),this.dpr=r.devicePixelRatio||1,u.width=f*this.dpr,u.height=d*this.dpr,this._width=f,this._height=d;var h=new SE(u,this,this.dpr);h.__builtin__=!0,h.initContext(),l[Sp]=h,h.zlevel=Sp,s.push(Sp),this._domRoot=e}else{this._width=gv(e,0,r),this._height=gv(e,1,r);var c=this._domRoot=u_t(this._width,this._height);e.appendChild(c)}}return t.prototype.getType=function(){return"canvas"},t.prototype.isSingleCanvas=function(){return this._singleCanvas},t.prototype.getViewportRoot=function(){return this._domRoot},t.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},t.prototype.refresh=function(e){var n=this.storage.getDisplayList(!0),r=this._prevDisplayList,i=this._zlevelList;this._redrawId=Math.random(),this._paintList(n,r,e,this._redrawId);for(var o=0;o<i.length;o++){var a=i[o],s=this._layers[a];if(!s.__builtin__&&s.refresh){var l=o===0?this._backgroundColor:null;s.refresh(l)}}return this._opts.useDirtyRect&&(this._prevDisplayList=n.slice()),this},t.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},t.prototype._paintHoverList=function(e){var n=e.length,r=this._hoverlayer;if(r&&r.clear(),!!n){for(var i={inHover:!0,viewWidth:this._width,viewHeight:this._height},o,a=0;a<n;a++){var s=e[a];s.__inHover&&(r||(r=this._hoverlayer=this.getLayer(zY)),o||(o=r.ctx,o.save()),Xp(o,s,i,a===n-1))}o&&o.restore()}},t.prototype.getHoverLayer=function(){return this.getLayer(zY)},t.prototype.paintOne=function(e,n){sre(e,n)},t.prototype._paintList=function(e,n,r,i){if(this._redrawId===i){r=r||!1,this._updateLayerStatus(e);var o=this._doPaintList(e,n,r),a=o.finished,s=o.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),s&&this._paintHoverList(e),a)this.eachLayer(function(c){c.afterBrush&&c.afterBrush()});else{var l=this;a9(function(){l._paintList(e,n,r,i)})}}},t.prototype._compositeManually=function(){var e=this.getLayer(Sp).ctx,n=this._domRoot.width,r=this._domRoot.height;e.clearRect(0,0,n,r),this.eachBuiltinLayer(function(i){i.virtual&&e.drawImage(i.dom,0,0,n,r)})},t.prototype._doPaintList=function(e,n,r){for(var i=this,o=[],a=this._opts.useDirtyRect,s=0;s<this._zlevelList.length;s++){var l=this._zlevelList[s],c=this._layers[l];c.__builtin__&&c!==this._hoverlayer&&(c.__dirty||r)&&o.push(c)}for(var u=!0,f=!1,d=function(y){var S=o[y],v=S.ctx,_=a&&S.createRepaintRects(e,n,h._width,h._height),x=r?S.__startIndex:S.__drawIndex,C=!r&&S.incremental&&Date.now,k=C&&Date.now(),m=S.zlevel===h._zlevelList[0]?h._backgroundColor:null;if(S.__startIndex===S.__endIndex)S.clear(!1,m,_);else if(x===S.__startIndex){var T=e[x];(!T.incremental||!T.notClear||r)&&S.clear(!1,m,_)}x===-1&&(console.error("For some unknown reason. drawIndex is -1"),x=S.__startIndex);var E,I=function(z){var B={inHover:!1,allClipped:!1,prevEl:null,viewWidth:i._width,viewHeight:i._height};for(E=x;E<S.__endIndex;E++){var ie=e[E];if(ie.__inHover&&(f=!0),i._doPaintEl(ie,S,a,z,B,E===S.__endIndex-1),C){var oe=Date.now()-k;if(oe>15)break}}B.prevElClipPaths&&v.restore()};if(_)if(_.length===0)E=S.__endIndex;else for(var D=h.dpr,F=0;F<_.length;++F){var R=_[F];v.save(),v.beginPath(),v.rect(R.x*D,R.y*D,R.width*D,R.height*D),v.clip(),I(R),v.restore()}else v.save(),I(),v.restore();S.__drawIndex=E,S.__drawIndex<S.__endIndex&&(u=!1)},h=this,g=0;g<o.length;g++)d(g);return Pn.wxa&&be(this._layers,function(y){y&&y.ctx&&y.ctx.draw&&y.ctx.draw()}),{finished:u,needsRefreshHover:f}},t.prototype._doPaintEl=function(e,n,r,i,o,a){var s=n.ctx;if(r){var l=e.getPaintRect();(!i||l&&l.intersect(i))&&(Xp(s,e,o,a),e.setPrevPaintRect(l))}else Xp(s,e,o,a)},t.prototype.getLayer=function(e,n){this._singleCanvas&&!this._needsManuallyCompositing&&(e=Sp);var r=this._layers[e];return r||(r=new SE("zr_"+e,this,this.dpr),r.zlevel=e,r.__builtin__=!0,this._layerConfig[e]?hi(r,this._layerConfig[e],!0):this._layerConfig[e-Gk]&&hi(r,this._layerConfig[e-Gk],!0),n&&(r.virtual=n),this.insertLayer(e,r),r.initContext()),r},t.prototype.insertLayer=function(e,n){var r=this._layers,i=this._zlevelList,o=i.length,a=this._domRoot,s=null,l=-1;if(!r[e]&&c_t(n)){if(o>0&&e>i[0]){for(l=0;l<o-1&&!(i[l]<e&&i[l+1]>e);l++);s=r[i[l]]}if(i.splice(l+1,0,e),r[e]=n,!n.virtual)if(s){var c=s.dom;c.nextSibling?a.insertBefore(n.dom,c.nextSibling):a.appendChild(n.dom)}else a.firstChild?a.insertBefore(n.dom,a.firstChild):a.appendChild(n.dom);n.__painter=this}},t.prototype.eachLayer=function(e,n){for(var r=this._zlevelList,i=0;i<r.length;i++){var o=r[i];e.call(n,this._layers[o],o)}},t.prototype.eachBuiltinLayer=function(e,n){for(var r=this._zlevelList,i=0;i<r.length;i++){var o=r[i],a=this._layers[o];a.__builtin__&&e.call(n,a,o)}},t.prototype.eachOtherLayer=function(e,n){for(var r=this._zlevelList,i=0;i<r.length;i++){var o=r[i],a=this._layers[o];a.__builtin__||e.call(n,a,o)}},t.prototype.getLayers=function(){return this._layers},t.prototype._updateLayerStatus=function(e){this.eachBuiltinLayer(function(f,d){f.__dirty=f.__used=!1});function n(f){o&&(o.__endIndex!==f&&(o.__dirty=!0),o.__endIndex=f)}if(this._singleCanvas)for(var r=1;r<e.length;r++){var i=e[r];if(i.zlevel!==e[r-1].zlevel||i.incremental){this._needsManuallyCompositing=!0;break}}var o=null,a=0,s,l;for(l=0;l<e.length;l++){var i=e[l],c=i.zlevel,u=void 0;s!==c&&(s=c,a=0),i.incremental?(u=this.getLayer(c+l_t,this._needsManuallyCompositing),u.incremental=!0,a=1):u=this.getLayer(c+(a>0?Gk:0),this._needsManuallyCompositing),u.__builtin__||JI("ZLevel "+c+" has been used by unkown layer "+u.id),u!==o&&(u.__used=!0,u.__startIndex!==l&&(u.__dirty=!0),u.__startIndex=l,u.incremental?u.__drawIndex=-1:u.__drawIndex=l,n(l),o=u),i.__dirty&Ns&&!i.__inHover&&(u.__dirty=!0,u.incremental&&u.__drawIndex<0&&(u.__drawIndex=l))}n(l),this.eachBuiltinLayer(function(f,d){!f.__used&&f.getElementCount()>0&&(f.__dirty=!0,f.__startIndex=f.__endIndex=f.__drawIndex=0),f.__dirty&&f.__drawIndex<0&&(f.__drawIndex=f.__startIndex)})},t.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},t.prototype._clearLayer=function(e){e.clear()},t.prototype.setBackgroundColor=function(e){this._backgroundColor=e,be(this._layers,function(n){n.setUnpainted()})},t.prototype.configLayer=function(e,n){if(n){var r=this._layerConfig;r[e]?hi(r[e],n,!0):r[e]=n;for(var i=0;i<this._zlevelList.length;i++){var o=this._zlevelList[i];if(o===e||o===e+Gk){var a=this._layers[o];hi(a,r[e],!0)}}}},t.prototype.delLayer=function(e){var n=this._layers,r=this._zlevelList,i=n[e];i&&(i.dom.parentNode.removeChild(i.dom),delete n[e],r.splice(wr(r,e),1))},t.prototype.resize=function(e,n){if(this._domRoot.style){var r=this._domRoot;r.style.display="none";var i=this._opts,o=this.root;if(e!=null&&(i.width=e),n!=null&&(i.height=n),e=gv(o,0,i),n=gv(o,1,i),r.style.display="",this._width!==e||n!==this._height){r.style.width=e+"px",r.style.height=n+"px";for(var a in this._layers)this._layers.hasOwnProperty(a)&&this._layers[a].resize(e,n);this.refresh(!0)}this._width=e,this._height=n}else{if(e==null||n==null)return;this._width=e,this._height=n,this.getLayer(Sp).resize(e,n)}return this},t.prototype.clearLayer=function(e){var n=this._layers[e];n&&n.clear()},t.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},t.prototype.getRenderedCanvas=function(e){if(e=e||{},this._singleCanvas&&!this._compositeManually)return this._layers[Sp].dom;var n=new SE("image",this,e.pixelRatio||this.dpr);n.initContext(),n.clear(!1,e.backgroundColor||this._backgroundColor);var r=n.ctx;if(e.pixelRatio<=this.dpr){this.refresh();var i=n.dom.width,o=n.dom.height;this.eachLayer(function(f){f.__builtin__?r.drawImage(f.dom,0,0,i,o):f.renderToCanvas&&(r.save(),f.renderToCanvas(r),r.restore())})}else for(var a={inHover:!1,viewWidth:this._width,viewHeight:this._height},s=this.storage.getDisplayList(!0),l=0,c=s.length;l<c;l++){var u=s[l];Xp(r,u,a,l===c-1)}return n.dom},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t}();const d_t=f_t;function Wde(t){t.registerPainter("canvas",d_t)}Tf([cN,lN,uN,Wbt,a_t]);const oA=F0("indicator",{state:()=>({visualisationData:"",numberData:{},sunburstData:{},sankeyData:{}}),actions:{setVisualisationData(t){if(this.visualisationData=t,t.type==="number"){const n=+(Math.round(+(String(t.value)+"e+6"))+"e-6");this.numberData=t.description+": "+n+" "+t.unit}else t.type==="sunburst"?this.sunburstData=this.compileSunburstOption(t.value,this.compileFormatter(6,t.unit),t.description):t.type==="sankey"&&(this.sankeyData=this.compileSankeyOption(t.value,this.compileFormatter(6,t.unit)))},compileFormatter(t,e){return n=>{const r=+(Math.round(+(String(n.value)+"e+"+t))+"e-"+t);return`${n.data.name}: ${r} ${e}`}},compileSunburstOption(t,e,n,r=!0){if(r)for(let o=0;o<t.length;o++){let a=this.processContributions(t[o].children);t[o].children=a}return{title:{text:n,left:"center"},tooltip:{trigger:"item",formatter:e},legend:{orient:"vertical",left:"left",data:[]},series:[{name:n,center:["50%","50%"],type:"sunburst",emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},data:t,radius:[60,"80%"]}]}},compileSankeyOption(t,e,n=!0){return{series:{type:"sankey",layout:"none",nodeAlign:"right",label:{normal:{formatter:e}},emphasis:{focus:"adjacency"},data:n?this.removeDuplicates(t.data):t.data,links:t.links}}},processContributions(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n];if(!e.find(i=>i.name==r.name))e.push(r);else{const i=e.find(o=>o.name==r.name);i.value+=r.value}}return e},removeDuplicates(t){return t.filter((n,r,i)=>r===i.findIndex(o=>o.name===n.name))}}});Tf([t2t,Wde]);const h_t=Rt({name:"Contributions",computed:{...Mt(oA)},setup(){return{option:Tl()}}});function p_t(t,e,n,r,i,o){const a=Pt("v-chart");return Oe(),en(a,{class:"chart",option:t.indicatorStore.sankeyData,autoresize:""},null,8,["option"])}const g_t=Qr(h_t,[["render",p_t],["__scopeId","data-v-bdba7406"]]),m_t=Rt({computed:{...Mt(oA)}}),v_t={class:"block"},y_t={class:"has-text-weight-bold"};function b_t(t,e,n,r,i,o){return Oe(),je("div",v_t,[K("p",y_t,Qt(t.indicatorStore.numberData),1)])}const S_t=Qr(m_t,[["render",b_t]]);Tf([cN,lN,uN,yde]);Tf([Wde,yde,cN,lN,uN]);const __t=Mre,w_t=Rt({name:"Contributions",provide:{[__t]:"light"},computed:{...Mt(oA)}});function k_t(t,e,n,r,i,o){const a=Pt("v-chart");return Oe(),en(a,{class:"chart",option:t.indicatorStore.sunburstData,autoresize:""},null,8,["option"])}const x_t=Qr(w_t,[["render",k_t],["__scopeId","data-v-ebbe0cfa"]]),C_t=Rt({components:{SankeyChart:g_t,NumberDisplay:S_t,SunburstChart:x_t},computed:{...Mt(oA),...Mt(ss),...Mt(Af),visualisations(){const t=this.placesStore.place.marking[0].$visualisations;return t||!1}},mounted(){this.visualisations&&this.indicatorStore.setVisualisationData(this.visualisations[0])},methods:{onVisualisationSelect(t){const e=Number(t.target.value);this.visualisations&&this.indicatorStore.setVisualisationData(this.visualisations[e])}}}),T_t={class:"block"},A_t={key:0,class:"field"},P_t=K("label",{class:"label is-small"},"Available visualisations and indicators:",-1),E_t={class:"select is-small"},O_t=["value"],I_t={key:1,class:"notification is-info is-light is-size-7"},$_t={class:"block"};function F_t(t,e,n,r,i,o){const a=Pt("NumberDisplay"),s=Pt("SunburstChart"),l=Pt("SankeyChart");return Oe(),je(hn,null,[K("div",T_t,[t.visualisations?(Oe(),je("div",A_t,[P_t,K("div",E_t,[K("select",{onChange:e[0]||(e[0]=(...c)=>t.onVisualisationSelect&&t.onVisualisationSelect(...c))},[(Oe(!0),je(hn,null,uo(t.visualisations,(c,u)=>(Oe(),je("option",{value:u},Qt(c.description),9,O_t))),256))],32)])])):(Oe(),je("div",I_t," No visualisations available. "))]),K("div",$_t,[t.indicatorStore.visualisationData.type==="number"?(Oe(),en(a,{key:0})):t.indicatorStore.visualisationData.type==="sunburst"?(Oe(),en(s,{key:1})):t.indicatorStore.visualisationData.type==="sankey"?(Oe(),en(l,{key:2})):ct("",!0)])],64)}const L_t=Qr(C_t,[["render",F_t]]),D_t=Rt({components:{PlaceTypeSelector:xKe,Codemirror:Wg,DataEditor:Mce,HelpButton:nm,DataTab:Obt,VisualisationTab:L_t},setup(t){return{extensions:[xT({class:"CodeMirror-lint-markers"}),II(),Ug,WI(),LI(),oee(),kI(),mee(),bt.lineWrapping,An.tabSize.of(2),OI(Nce),Dce(CKe)]}},data(){return{shownTab:"data",showNameInput:!1}},computed:{...Mt(ta),...Mt(Af),...Mt(ss),...Mt(Zn)},created(){this.placesStore.loadPlace(this.uiStateStore.lastSelectedID)},watch:{"placesStore.schemaString"(t){this.placesStore.savePlaceSchema(t)}},methods:{close(){this.uiStateStore.showModal="none"},onCancelNameEdit(){this.placesStore.resetName(),this.showNameInput=!1},onNameSave(){this.placesStore.saveName(),this.showNameInput=!1},showTab(t){this.shownTab=t}}});const aA=t=>(zg("data-v-91c35e35"),t=t(),Vg(),t),N_t={class:"modal is-active"},M_t=aA(()=>K("div",{class:"modal-background"},null,-1)),R_t={class:"modal-card-head scoped-modal-header"},z_t=aA(()=>K("span",{class:"has-text-weight-bold"},"Place:",-1)),V_t={class:"ml-1"},B_t={class:"scoped-edit-button icon has-text-grey-light"},j_t={key:1,class:"level"},H_t={class:"icon is-small has-text-grey"},U_t={class:"icon is-small"},W_t=aA(()=>K("p",{class:"modal-card-title"},null,-1)),G_t={class:"tabs is-left is-small has-background-light mb-0"},q_t={class:"modal-card-body"},Y_t={key:3,class:"block"},K_t={class:"field"},X_t={class:"label is-small icon-text"},J_t={class:"control is-small jsn-code"},Z_t={key:0,class:"help"},Q_t={key:1,class:"help is-danger"},ewt=aA(()=>K("footer",{class:"modal-card-foot"},null,-1));function twt(t,e,n,r,i,o){const a=Pt("font-awesome-icon"),s=Pt("PlaceTypeSelector"),l=Pt("DataTab"),c=Pt("VisualisationTab"),u=Pt("HelpButton"),f=Pt("Codemirror");return Oe(),je("div",N_t,[M_t,K("div",{class:Wt(["modal-card",{"jsn-modal-wide":t.shownTab==="visualisation","jsn-modal-medium":t.shownTab!=="visualisation"}])},[K("header",R_t,[z_t,K("span",V_t,[t.showNameInput?ct("",!0):(Oe(),je("span",{key:0,class:"is-ghost icon-text has-text-weight-bold scoped-modal-title is-clickable",onClick:e[0]||(e[0]=d=>t.showNameInput=!0)},[K("span",null,Qt(t.placesStore.place.name),1),K("span",B_t,[at(a,{icon:"fas fa-pen"})])])),t.showNameInput?(Oe(),je("span",j_t,[kf(K("input",{style:{width:"100px"},class:"input is-small level-item","onUpdate:modelValue":e[1]||(e[1]=d=>t.placesStore.place.name=d)},null,512),[[Zd,t.placesStore.place.name]]),K("button",{class:"ml-1 button is-small level-item",onClick:e[2]||(e[2]=(...d)=>t.onCancelNameEdit&&t.onCancelNameEdit(...d))},[K("span",H_t,[at(a,{icon:"fas fa-xmark"})])]),K("button",{onClick:e[3]||(e[3]=(...d)=>t.onNameSave&&t.onNameSave(...d)),class:"ml-1 button is-small level-item is-primary"},[K("span",U_t,[at(a,{icon:"fas fa-check"})])])])):ct("",!0)]),W_t,K("button",{class:"delete","aria-label":"close",onClick:e[4]||(e[4]=(...d)=>t.close&&t.close(...d))})]),K("div",G_t,[K("ul",null,[K("li",{class:Wt({"is-active":t.shownTab==="data"})},[K("a",{onClick:e[5]||(e[5]=()=>{t.showTab("data")})},"Data")],2),t.uiStateStore.uiAssistMode==="expert"?(Oe(),je("li",{key:0,class:Wt({"is-active":t.shownTab==="schema"})},[K("a",{onClick:e[6]||(e[6]=()=>{t.showTab("schema")})},"Schema")],2)):ct("",!0),t.configStore.visualisationConfig.show?(Oe(),je("li",{key:1,class:Wt({"is-active":t.shownTab==="visualisation"})},[K("a",{onClick:e[7]||(e[7]=()=>{t.showTab("visualisation")})},"Visualisation")],2)):ct("",!0)])]),K("section",q_t,[t.shownTab!=="visualisation"?(Oe(),en(s,{key:0})):ct("",!0),t.shownTab==="data"?(Oe(),en(l,{key:1})):ct("",!0),t.shownTab==="visualisation"?(Oe(),en(c,{key:2})):ct("",!0),t.shownTab==="schema"?(Oe(),je("div",Y_t,[K("div",K_t,[K("label",X_t,[Vi("Token schema "),at(u,{"help-text":`
                          Describe the structure of data tokens stored in the place with 
                          <a href='https://json-schema.org/' target='_blank'>JSON Schema</a>.
                        `})]),K("div",J_t,[at(f,{modelValue:t.placesStore.schemaString,"onUpdate:modelValue":e[8]||(e[8]=d=>t.placesStore.schemaString=d),placeholder:"Edit place schema.",autofocus:!0,"indent-with-tab":!0,"tab-size":2,style:{height:"400px"},extensions:t.extensions,disabled:t.netStore.placeTypes[t.placesStore.place.id]!=="custom"},null,8,["modelValue","extensions","disabled"])]),t.placesStore.place.hasError?ct("",!0):(Oe(),je("p",Z_t,Qt(t.placesStore.place.errorMessage),1)),t.placesStore.place.hasError&&t.placesStore.place.errorType==="schema"?(Oe(),je("p",Q_t,Qt(t.placesStore.place.errorMessage),1)):ct("",!0)])])):ct("",!0)]),ewt],2)])}const nwt=Qr(D_t,[["render",twt],["__scopeId","data-v-91c35e35"]]);var Gde={exports:{}};const rwt=jre(o_e);(function(t,e){(function(n,r){t.exports=r(rwt)})(ui,function(n){return function(){var r={789:function(s){s.exports=n}},i={};function o(s){var l=i[s];if(l!==void 0)return l.exports;var c=i[s]={exports:{}};return r[s](c,c.exports,o),c.exports}o.d=function(s,l){for(var c in l)o.o(l,c)&&!o.o(s,c)&&Object.defineProperty(s,c,{enumerable:!0,get:l[c]})},o.o=function(s,l){return Object.prototype.hasOwnProperty.call(s,l)},o.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})};var a={};return function(){function s(F,R){(R==null||R>F.length)&&(R=F.length);for(var z=0,B=new Array(R);z<R;z++)B[z]=F[z];return B}function l(F,R){if(F){if(typeof F=="string")return s(F,R);var z=Object.prototype.toString.call(F).slice(8,-1);return z==="Object"&&F.constructor&&(z=F.constructor.name),z==="Map"||z==="Set"?Array.from(F):z==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(z)?s(F,R):void 0}}function c(F){return function(R){if(Array.isArray(R))return s(R)}(F)||function(R){if(typeof Symbol<"u"&&R[Symbol.iterator]!=null||R["@@iterator"]!=null)return Array.from(R)}(F)||l(F)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function u(F,R,z){return R in F?Object.defineProperty(F,R,{value:z,enumerable:!0,configurable:!0,writable:!0}):F[R]=z,F}o.r(a),o.d(a,{default:function(){return D}});var f=o(789),d=(0,f.defineComponent)({props:{data:{required:!0,type:String},onClick:Function},render:function(){var F=this.data,R=this.onClick;return(0,f.createVNode)("span",{class:"vjs-tree-brackets",onClick:R},[F])}}),h=(0,f.defineComponent)({emits:["change","update:modelValue"],props:{checked:{type:Boolean,default:!1},isMultiple:Boolean,onChange:Function},setup:function(F,R){var z=R.emit;return{uiType:(0,f.computed)(function(){return F.isMultiple?"checkbox":"radio"}),model:(0,f.computed)({get:function(){return F.checked},set:function(B){return z("update:modelValue",B)}})}},render:function(){var F=this.uiType,R=this.model,z=this.$emit;return(0,f.createVNode)("label",{class:["vjs-check-controller",R?"is-checked":""],onClick:function(B){return B.stopPropagation()}},[(0,f.createVNode)("span",{class:"vjs-check-controller-inner is-".concat(F)},null),(0,f.createVNode)("input",{checked:R,class:"vjs-check-controller-original is-".concat(F),type:F,onChange:function(){return z("change",R)}},null)])}}),g=(0,f.defineComponent)({props:{nodeType:{required:!0,type:String},onClick:Function},render:function(){var F=this.nodeType,R=this.onClick,z=F==="objectStart"||F==="arrayStart";return z||F==="objectCollapsed"||F==="arrayCollapsed"?(0,f.createVNode)("span",{class:"vjs-carets vjs-carets-".concat(z?"open":"close"),onClick:R},[(0,f.createVNode)("svg",{viewBox:"0 0 1024 1024",focusable:"false","data-icon":"caret-down",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},[(0,f.createVNode)("path",{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"},null)])]):null}});function y(F){return y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},y(F)}function S(F){return Object.prototype.toString.call(F).slice(8,-1).toLowerCase()}function v(F){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"root",z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,B=arguments.length>3?arguments[3]:void 0,ie=B||{},oe=ie.key,_e=ie.index,Ae=ie.type,Pe=Ae===void 0?"content":Ae,Se=ie.showComma,se=Se!==void 0&&Se,ne=ie.length,J=ne===void 0?1:ne,V=S(F);if(V==="array"){var W=_(F.map(function(ue,ce,fe){return v(ue,"".concat(R,"[").concat(ce,"]"),z+1,{index:ce,showComma:ce!==fe.length-1,length:J,type:Pe})}));return[v("[",R,z,{showComma:!1,key:oe,length:F.length,type:"arrayStart"})[0]].concat(W,v("]",R,z,{showComma:se,length:F.length,type:"arrayEnd"})[0])}if(V==="object"){var ae=Object.keys(F),te=_(ae.map(function(ue,ce,fe){return v(F[ue],/^[a-zA-Z_]\w*$/.test(ue)?"".concat(R,".").concat(ue):"".concat(R,'["').concat(ue,'"]'),z+1,{key:ue,showComma:ce!==fe.length-1,length:J,type:Pe})}));return[v("{",R,z,{showComma:!1,key:oe,index:_e,length:ae.length,type:"objectStart"})[0]].concat(te,v("}",R,z,{showComma:se,length:ae.length,type:"objectEnd"})[0])}return[{content:F,level:z,key:oe,index:_e,path:R,showComma:se,length:J,type:Pe}]}function _(F){if(typeof Array.prototype.flat=="function")return F.flat();for(var R=c(F),z=[];R.length;){var B=R.shift();Array.isArray(B)?R.unshift.apply(R,c(B)):z.push(B)}return z}function x(F){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new WeakMap;if(F==null)return F;if(F instanceof Date)return new Date(F);if(F instanceof RegExp)return new RegExp(F);if(y(F)!=="object")return F;if(R.get(F))return R.get(F);if(Array.isArray(F)){var z=F.map(function(oe){return x(oe,R)});return R.set(F,z),z}var B={};for(var ie in F)B[ie]=x(F[ie],R);return R.set(F,B),B}function C(F,R){var z=Object.keys(F);if(Object.getOwnPropertySymbols){var B=Object.getOwnPropertySymbols(F);R&&(B=B.filter(function(ie){return Object.getOwnPropertyDescriptor(F,ie).enumerable})),z.push.apply(z,B)}return z}function k(F){for(var R=1;R<arguments.length;R++){var z=arguments[R]!=null?arguments[R]:{};R%2?C(Object(z),!0).forEach(function(B){u(F,B,z[B])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(z)):C(Object(z)).forEach(function(B){Object.defineProperty(F,B,Object.getOwnPropertyDescriptor(z,B))})}return F}var m={showLength:{type:Boolean,default:!1},showDoubleQuotes:{type:Boolean,default:!0},renderNodeKey:Function,renderNodeValue:Function,selectableType:String,showSelectController:{type:Boolean,default:!1},showLine:{type:Boolean,default:!0},showLineNumber:{type:Boolean,default:!1},selectOnClickNode:{type:Boolean,default:!0},nodeSelectable:{type:Function,default:function(){return!0}},highlightSelectedNode:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!1},showKeyValueSpace:{type:Boolean,default:!0},editable:{type:Boolean,default:!1},editableTrigger:{type:String,default:"click"},onNodeClick:{type:Function},onBracketsClick:{type:Function},onIconClick:{type:Function},onValueChange:{type:Function}},T=(0,f.defineComponent)({name:"TreeNode",props:k(k({},m),{},{node:{type:Object,required:!0},collapsed:Boolean,checked:Boolean,style:Object,onSelectedChange:{type:Function}}),emits:["nodeClick","bracketsClick","iconClick","selectedChange","valueChange"],setup:function(F,R){var z=R.emit,B=(0,f.computed)(function(){return S(F.node.content)}),ie=(0,f.computed)(function(){return"vjs-value vjs-value-".concat(B.value)}),oe=(0,f.computed)(function(){return F.showDoubleQuotes?'"'.concat(F.node.key,'"'):F.node.key}),_e=(0,f.computed)(function(){return F.selectableType==="multiple"}),Ae=(0,f.computed)(function(){return F.selectableType==="single"}),Pe=(0,f.computed)(function(){return F.nodeSelectable(F.node)&&(_e.value||Ae.value)}),Se=(0,f.reactive)({editing:!1}),se=function(ce){var fe,ye,j=(ye=(fe=ce.target)===null||fe===void 0?void 0:fe.value)==="null"?null:ye==="undefined"?void 0:ye==="true"||ye!=="false"&&(ye[0]+ye[ye.length-1]==='""'||ye[0]+ye[ye.length-1]==="''"?ye.slice(1,-1):typeof Number(ye)=="number"&&!isNaN(Number(ye))||ye==="NaN"?Number(ye):ye);z("valueChange",j,F.node.path)},ne=(0,f.computed)(function(){var ce,fe=(ce=F.node)===null||ce===void 0?void 0:ce.content;return fe===null?fe="null":fe===void 0&&(fe="undefined"),B.value==="string"?'"'.concat(fe,'"'):fe+""}),J=function(){var ce=F.renderNodeValue;return ce?ce({node:F.node,defaultValue:ne.value}):ne.value},V=function(){z("bracketsClick",!F.collapsed,F.node.path)},W=function(){z("iconClick",!F.collapsed,F.node.path)},ae=function(){z("selectedChange",F.node)},te=function(){z("nodeClick",F.node),Pe.value&&F.selectOnClickNode&&z("selectedChange",F.node)},ue=function(ce){if(F.editable&&!Se.editing){Se.editing=!0;var fe=function ye(j){var Y;j.target!==ce.target&&((Y=j.target)===null||Y===void 0?void 0:Y.parentElement)!==ce.target&&(Se.editing=!1,document.removeEventListener("click",ye))};document.removeEventListener("click",fe),document.addEventListener("click",fe)}};return function(){var ce,fe=F.node;return(0,f.createVNode)("div",{class:{"vjs-tree-node":!0,"has-selector":F.showSelectController,"has-carets":F.showIcon,"is-highlight":F.highlightSelectedNode&&F.checked},onClick:te,style:F.style},[F.showLineNumber&&(0,f.createVNode)("span",{class:"vjs-node-index"},[fe.id+1]),F.showSelectController&&Pe.value&&fe.type!=="objectEnd"&&fe.type!=="arrayEnd"&&(0,f.createVNode)(h,{isMultiple:_e.value,checked:F.checked,onChange:ae},null),(0,f.createVNode)("div",{class:"vjs-indent"},[Array.from(Array(fe.level)).map(function(ye,j){return(0,f.createVNode)("div",{key:j,class:{"vjs-indent-unit":!0,"has-line":F.showLine}},null)}),F.showIcon&&(0,f.createVNode)(g,{nodeType:fe.type,onClick:W},null)]),fe.key&&(0,f.createVNode)("span",{class:"vjs-key"},[(ce=F.renderNodeKey,ce?ce({node:F.node,defaultKey:oe.value||""}):oe.value),(0,f.createVNode)("span",{class:"vjs-colon"},[":".concat(F.showKeyValueSpace?" ":"")])]),(0,f.createVNode)("span",null,[fe.type!=="content"&&fe.content?(0,f.createVNode)(d,{data:fe.content.toString(),onClick:V},null):(0,f.createVNode)("span",{class:ie.value,onClick:!F.editable||F.editableTrigger&&F.editableTrigger!=="click"?void 0:ue,onDblclick:F.editable&&F.editableTrigger==="dblclick"?ue:void 0},[F.editable&&Se.editing?(0,f.createVNode)("input",{value:ne.value,onChange:se,style:{padding:"3px 8px",border:"1px solid #eee",boxShadow:"none",boxSizing:"border-box",borderRadius:5,fontFamily:"inherit"}},null):J()]),fe.showComma&&(0,f.createVNode)("span",null,[","]),F.showLength&&F.collapsed&&(0,f.createVNode)("span",{class:"vjs-comment"},[(0,f.createTextVNode)(" // "),fe.length,(0,f.createTextVNode)(" items ")])])])}}});function E(F,R){var z=Object.keys(F);if(Object.getOwnPropertySymbols){var B=Object.getOwnPropertySymbols(F);R&&(B=B.filter(function(ie){return Object.getOwnPropertyDescriptor(F,ie).enumerable})),z.push.apply(z,B)}return z}function I(F){for(var R=1;R<arguments.length;R++){var z=arguments[R]!=null?arguments[R]:{};R%2?E(Object(z),!0).forEach(function(B){u(F,B,z[B])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(z)):E(Object(z)).forEach(function(B){Object.defineProperty(F,B,Object.getOwnPropertyDescriptor(z,B))})}return F}var D=(0,f.defineComponent)({name:"Tree",props:I(I({},m),{},{data:{type:[String,Number,Boolean,Array,Object],default:null},deep:{type:Number,default:1/0},pathCollapsible:{type:Function,default:function(){return!1}},rootPath:{type:String,default:"root"},virtual:{type:Boolean,default:!1},height:{type:Number,default:400},itemHeight:{type:Number,default:20},selectedValue:{type:[String,Array],default:function(){return""}},collapsedOnClickBrackets:{type:Boolean,default:!0},style:Object,onSelectedChange:{type:Function}}),slots:["renderNodeKey","renderNodeValue"],emits:["nodeClick","bracketsClick","iconClick","selectedChange","update:selectedValue","update:data"],setup:function(F,R){var z=R.emit,B=R.slots,ie=(0,f.ref)(),oe=(0,f.computed)(function(){return v(F.data,F.rootPath)}),_e=function(fe){return oe.value.reduce(function(ye,j){var Y,O=j.level>=fe,M=(Y=F.pathCollapsible)===null||Y===void 0?void 0:Y.call(F,j);return j.type!=="objectStart"&&j.type!=="arrayStart"||!O&&!M?ye:I(I({},ye),{},u({},j.path,1))},{})},Ae=(0,f.reactive)({translateY:0,visibleData:null,hiddenPaths:_e(F.deep)}),Pe=(0,f.computed)(function(){for(var fe=null,ye=[],j=oe.value.length,Y=0;Y<j;Y++){var O=I(I({},oe.value[Y]),{},{id:Y}),M=Ae.hiddenPaths[O.path];if(fe&&fe.path===O.path){var H=fe.type==="objectStart",Q=I(I(I({},O),fe),{},{showComma:O.showComma,content:H?"{...}":"[...]",type:H?"objectCollapsed":"arrayCollapsed"});fe=null,ye.push(Q)}else{if(M&&!fe){fe=O;continue}if(fe)continue;ye.push(O)}}return ye}),Se=(0,f.computed)(function(){var fe=F.selectedValue;return fe&&F.selectableType==="multiple"&&Array.isArray(fe)?fe:[fe]}),se=(0,f.computed)(function(){return!F.selectableType||F.selectOnClickNode||F.showSelectController?"":"When selectableType is not null, selectOnClickNode and showSelectController cannot be false at the same time, because this will cause the selection to fail."}),ne=function(){var fe=Pe.value;if(F.virtual){var ye,j=F.height/F.itemHeight,Y=((ye=ie.value)===null||ye===void 0?void 0:ye.scrollTop)||0,O=Math.floor(Y/F.itemHeight),M=O<0?0:O+j>fe.length?fe.length-j:O;M<0&&(M=0);var H=M+j;Ae.translateY=M*F.itemHeight,Ae.visibleData=fe.filter(function(Q,ve){return ve>=M&&ve<H})}else Ae.visibleData=fe},J=function(){ne()},V=function(fe){var ye,j,Y=fe.path,O=F.selectableType;if(O==="multiple"){var M=Se.value.findIndex(function(ge){return ge===Y}),H=c(Se.value);M!==-1?H.splice(M,1):H.push(Y),z("update:selectedValue",H),z("selectedChange",H,c(Se.value))}else if(O==="single"&&Se.value[0]!==Y){var Q=(ye=Se.value,j=1,function(ge){if(Array.isArray(ge))return ge}(ye)||function(ge,De){var Le=ge==null?null:typeof Symbol<"u"&&ge[Symbol.iterator]||ge["@@iterator"];if(Le!=null){var tt,Xe,et=[],Qe=!0,pt=!1;try{for(Le=Le.call(ge);!(Qe=(tt=Le.next()).done)&&(et.push(tt.value),!De||et.length!==De);Qe=!0);}catch(zt){pt=!0,Xe=zt}finally{try{Qe||Le.return==null||Le.return()}finally{if(pt)throw Xe}}return et}}(ye,j)||l(ye,j)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}())[0],ve=Y;z("update:selectedValue",ve),z("selectedChange",ve,Q)}},W=function(fe){z("nodeClick",fe)},ae=function(fe,ye){if(fe)Ae.hiddenPaths=I(I({},Ae.hiddenPaths),{},u({},ye,1));else{var j=I({},Ae.hiddenPaths);delete j[ye],Ae.hiddenPaths=j}},te=function(fe,ye){F.collapsedOnClickBrackets&&ae(fe,ye),z("bracketsClick",fe)},ue=function(fe,ye){ae(fe,ye),z("iconClick",fe)},ce=function(fe,ye){var j=x(F.data),Y=F.rootPath;new Function("data","val","data".concat(ye.slice(Y.length),"=val"))(j,fe),z("update:data",j)};return(0,f.watchEffect)(function(){se.value&&function(fe){throw new Error("[VueJSONPretty] ".concat(fe))}(se.value)}),(0,f.watchEffect)(function(){Pe.value&&ne()}),(0,f.watch)(function(){return F.deep},function(fe){fe&&(Ae.hiddenPaths=_e(fe))}),function(){var fe,ye,j=(fe=F.renderNodeKey)!==null&&fe!==void 0?fe:B.renderNodeKey,Y=(ye=F.renderNodeValue)!==null&&ye!==void 0?ye:B.renderNodeValue,O=Ae.visibleData&&Ae.visibleData.map(function(M){return(0,f.createVNode)(T,{key:M.id,node:M,collapsed:!!Ae.hiddenPaths[M.path],showDoubleQuotes:F.showDoubleQuotes,showLength:F.showLength,checked:Se.value.includes(M.path),selectableType:F.selectableType,showLine:F.showLine,showLineNumber:F.showLineNumber,showSelectController:F.showSelectController,selectOnClickNode:F.selectOnClickNode,nodeSelectable:F.nodeSelectable,highlightSelectedNode:F.highlightSelectedNode,editable:F.editable,editableTrigger:F.editableTrigger,showIcon:F.showIcon,showKeyValueSpace:F.showKeyValueSpace,renderNodeKey:j,renderNodeValue:Y,onNodeClick:W,onBracketsClick:te,onIconClick:ue,onSelectedChange:V,onValueChange:ce,style:F.itemHeight&&F.itemHeight!==20?{lineHeight:"".concat(F.itemHeight,"px")}:{}},null)});return(0,f.createVNode)("div",{ref:ie,class:{"vjs-tree":!0,"is-virtual":F.virtual},onScroll:F.virtual?J:void 0,style:F.showLineNumber?I({paddingLeft:"".concat(12*Number(oe.value.length.toString().length),"px")},F.style):F.style},[F.virtual?(0,f.createVNode)("div",{class:"vjs-tree-list",style:{height:"".concat(F.height,"px")}},[(0,f.createVNode)("div",{class:"vjs-tree-list-holder",style:{height:"".concat(Pe.value.length*F.itemHeight,"px")}},[(0,f.createVNode)("div",{class:"vjs-tree-list-holder-inner",style:{transform:"translateY(".concat(Ae.translateY,"px)")}},[O])])]):O])}}})}(),a}()})})(Gde);var iwt=Gde.exports;const gN=pr(iwt);const owt=Rt({components:{Codemirror:Wg,HelpButton:nm},setup(){return{extensions:[Ug,bt.lineWrapping]}},computed:{...Mt(Yg),...Mt(ta),...Mt(Zn),keyHasError(){const t=this.transitionsStore.outputArcs[this.transitionsStore.selectedOutputSnippetIndex].keyVar;return this.transitionsStore.keyEvaluationResults[t].hasError},keyEvaluation(){const t=this.transitionsStore.outputArcs[this.transitionsStore.selectedOutputSnippetIndex].keyVar;return this.transitionsStore.keyEvaluationResults[t].evaluation},valueHasError(){const t=this.transitionsStore.outputArcs[this.transitionsStore.selectedOutputSnippetIndex].valueVar;return this.transitionsStore.valueEvaluationResults[t].hasError},valueEvaluation(){const t=this.transitionsStore.outputArcs[this.transitionsStore.selectedOutputSnippetIndex].valueVar;return this.transitionsStore.valueEvaluationResults[t].evaluation}},watch:{"transitionsStore.outputArcs":{handler(t,e){this.transitionsStore.saveOutputSnippets(),this.transitionsStore.loadEvaluations()},deep:!0}},methods:{getShortString(t){return t.length>8?t.slice(0,8)+"...":t},getFormattedString(t){return JSON.stringify(JSON.parse(t),null,2)}}}),awt={class:"field"},swt={class:"label is-small"},lwt={class:"control is-small jsn-code"},cwt={key:0},uwt={key:0,class:"help is-danger"},fwt={key:1,class:"help"},dwt=["data-tooltip"],hwt={class:"field"},pwt={class:"label is-small"},gwt={class:"control is-small jsn-code"},mwt={key:0},vwt={key:0,class:"help is-danger"},ywt={key:1,class:"help"},bwt=["data-tooltip"];function Swt(t,e,n,r,i,o){const a=Pt("HelpButton"),s=Pt("font-awesome-icon"),l=Pt("Codemirror");return Oe(),je(hn,null,[K("div",awt,[K("label",swt,[Vi("Key "),at(a,{"help-text":`
                Output key variables define the field of a selected object or position in a selected array, where the corresponding output value is inserted.
              `}),K("span",{onClick:e[0]||(e[0]=()=>{t.uiStateStore.showEditor="key"}),class:"icon is-small is-pulled-right has-text-grey-light is-clickable"},[at(s,{icon:"fas fa-up-right-from-square"})])]),K("div",lwt,[at(l,{placeholder:"Define key in Jsonnet",style:{height:"50px"},"indent-with-tab":!0,"tab-size":2,extensions:t.extensions,modelValue:t.transitionsStore.outputArcs[t.transitionsStore.selectedOutputSnippetIndex].keySnippet,"onUpdate:modelValue":e[1]||(e[1]=c=>t.transitionsStore.outputArcs[t.transitionsStore.selectedOutputSnippetIndex].keySnippet=c),disabled:t.netStore.transitionTypes[t.transitionsStore.transition.id]!=="custom"},null,8,["extensions","modelValue","disabled"])]),t.transitionsStore.assignmentComplete&&!t.transitionsStore.prefaceHasError?(Oe(),je("div",cwt,[t.keyHasError?(Oe(),je("p",uwt,"Key expression has errors.")):ct("",!0),t.keyHasError?ct("",!0):(Oe(),je("p",fwt,[Vi("Result: "),K("code",{class:"has-text-grey has-tooltip-bottom","data-tooltip":t.getFormattedString(t.keyEvaluation)},Qt(t.getShortString(t.keyEvaluation)),9,dwt)]))])):ct("",!0)]),K("div",hwt,[K("label",pwt,[Vi("Value "),at(a,{"help-text":`
                Output value variables define the value that is inserted in the corresponding place.
              `}),K("span",{onClick:e[2]||(e[2]=()=>{t.uiStateStore.showEditor="value"}),class:"icon is-small is-pulled-right has-text-grey-light is-clickable"},[at(s,{icon:"fas fa-up-right-from-square"})])]),K("div",gwt,[at(l,{placeholder:"Define value in Jsonnet",style:{height:"50px"},"indent-with-tab":!0,"tab-size":2,extensions:t.extensions,modelValue:t.transitionsStore.outputArcs[t.transitionsStore.selectedOutputSnippetIndex].valueSnippet,"onUpdate:modelValue":e[3]||(e[3]=c=>t.transitionsStore.outputArcs[t.transitionsStore.selectedOutputSnippetIndex].valueSnippet=c),disabled:t.netStore.transitionTypes[t.transitionsStore.transition.id]!=="custom"},null,8,["extensions","modelValue","disabled"])]),t.transitionsStore.assignmentComplete&&!t.transitionsStore.prefaceHasError?(Oe(),je("div",mwt,[t.valueHasError?(Oe(),je("p",vwt,"Value expression has errors.")):ct("",!0),t.valueHasError?ct("",!0):(Oe(),je("p",ywt,[Vi("Result: "),K("code",{class:"has-text-grey has-tooltip-bottom","data-tooltip":t.getFormattedString(t.valueEvaluation)},Qt(t.getShortString(t.valueEvaluation)),9,bwt)]))])):ct("",!0)])],64)}const _wt=Qr(owt,[["render",Swt]]),wwt=Rt({components:{VueJsonPretty:gN,HelpButton:nm},data(){return{showFilterInput:!1,pathDictionary:{}}},computed:{...Mt(Yg),...Mt(Zn),selectedInputValueDotsBracketsPath:{get(){const t=this.transitionsStore.selectedInputValueJsonPath;if(t==="none")return"none";const e=this.pathDictionary[t];return e||"none"},set(t){}}},created(){this.pathDictionary={}},methods:{cancelFilterEdit(){this.transitionsStore.resetInputFilter(),this.showFilterInput=!1},saveFilter(){this.transitionsStore.saveInputFilter(),this.showFilterInput=!1},onFilterInput(){this.transitionsStore.unsetCurrentInputAssignment(),this.pathDictionary={},this.transitionsStore.loadAvailableInputAssignments()},onInputPlaceSelect(){this.showFilterInput=!1,this.pathDictionary={},this.transitionsStore.loadCurrentInputAssignment()},valueSelectable(t){let e="";const n=t.path.substring(4);e=aC(n);const i=this.transitionsStore.inputArcs[this.transitionsStore.selectedInputPlaceIndex].filtered.includes(e);return i&&(this.pathDictionary[e]=t.path),i},onSelectValueClick(t,e){if(Array.isArray(t))return;const n=t.substring(4),r=aC(n);this.transitionsStore.saveSelectedAssignment(r,"input")}}});const kwt=t=>(zg("data-v-14abc5ec"),t=t(),Vg(),t),xwt={class:"card scoped-modal-side has-background-light scoped-modal-left"},Cwt={class:"m-5 scoped-scrollable-outer"},Twt={key:0,class:"scoped-scrollable-container"},Awt={class:"level mb-4"},Pwt={class:"level-left"},Ewt={class:"level-item"},Owt={class:"field has-addons"},Iwt=kwt(()=>K("p",{class:"control"},[K("a",{class:"button is-static is-small"}," Input ")],-1)),$wt={class:"control"},Fwt={class:"select is-small"},Lwt=["value"],Dwt={key:0,class:"level-right"},Nwt={class:"level-item"},Mwt={class:"icon is-small has-text-warning is-clickable mr-2 has-tooltip-bottom","data-tooltip":"Some places have unselected values."},Rwt={class:"level mb-4"},zwt={class:"level-left"},Vwt={key:0,class:"level-item"},Bwt={class:"icon mr-1 has-text-grey-light"},jwt={class:"has-text-grey"},Hwt={key:1,class:"level-item"},Uwt={class:"icon mr-1 has-text-grey-light"},Wwt=["disabled"],Gwt={class:"icon is-small has-text-grey"},qwt={class:"icon is-small"},Ywt={class:"scoped-scrollable jsn-code p-2"},Kwt={key:1,class:"notification is-info is-light is-size-7"};function Xwt(t,e,n,r,i,o){const a=Pt("font-awesome-icon"),s=Pt("HelpButton"),l=Pt("vue-json-pretty");return Oe(),je("div",xwt,[K("section",Cwt,[t.transitionsStore.inputArcs.length>0?(Oe(),je("div",Twt,[K("div",Awt,[K("div",Pwt,[K("div",Ewt,[K("div",Owt,[Iwt,K("p",$wt,[K("span",Fwt,[kf(K("select",{"onUpdate:modelValue":e[0]||(e[0]=c=>t.transitionsStore.selectedInputPlaceIndex=c),onChange:e[1]||(e[1]=(...c)=>t.onInputPlaceSelect&&t.onInputPlaceSelect(...c))},[(Oe(!0),je(hn,null,uo(t.transitionsStore.inputArcs,(c,u)=>(Oe(),je("option",{value:u},Qt(c.name),9,Lwt))),256))],544),[[X2,t.transitionsStore.selectedInputPlaceIndex]])])])])])]),t.transitionsStore.presetAssignmentComplete?ct("",!0):(Oe(),je("div",Dwt,[K("div",Nwt,[K("span",Mwt,[at(a,{icon:"fas fa-triangle-exclamation"})])])]))]),K("div",Rwt,[K("div",zwt,[t.showFilterInput?(Oe(),je("div",Hwt,[K("span",Uwt,[at(a,{icon:"fas fa-filter"})]),kf(K("input",{onInput:e[3]||(e[3]=(...c)=>t.onFilterInput&&t.onFilterInput(...c)),style:{width:"100px"},class:"input is-small mr-1","onUpdate:modelValue":e[4]||(e[4]=c=>t.transitionsStore.inputArcs[t.transitionsStore.selectedInputPlaceIndex].filter=c),disabled:t.netStore.transitionTypes[t.transitionsStore.transition.id]!=="custom"},null,40,Wwt),[[Zd,t.transitionsStore.inputArcs[t.transitionsStore.selectedInputPlaceIndex].filter]]),K("button",{class:"mr-1 button is-small",onClick:e[5]||(e[5]=(...c)=>t.cancelFilterEdit&&t.cancelFilterEdit(...c))},[K("span",Gwt,[at(a,{icon:"fas fa-xmark"})])]),K("button",{onClick:e[6]||(e[6]=(...c)=>t.saveFilter&&t.saveFilter(...c)),class:"button is-small is-primary"},[K("span",qwt,[at(a,{icon:"fas fa-check"})])])])):(Oe(),je("div",Vwt,[K("span",{class:"icon-text is-clickable",onClick:e[2]||(e[2]=c=>t.showFilterInput=!0)},[K("span",Bwt,[at(a,{icon:"fas fa-filter"})]),K("span",jwt,Qt(t.transitionsStore.inputArcs[t.transitionsStore.selectedInputPlaceIndex].filtered.length)+" selectable values ",1),Vi("  "),at(s,{class:"has-text-grey-light","help-text":`
                      You can edit the filter to make other values selectable. Filter expressions are written in 
                      <a href='https://goessner.net/articles/JSONPath/' target='_blank'>
                        JsonPath
                      </a>.
                      `})])]))])]),K("div",Ywt,[(Oe(),en(l,{key:t.transitionsStore.inputDataKey,data:t.transitionsStore.inputArcs[t.transitionsStore.selectedInputPlaceIndex].marking,onSelectedChange:t.onSelectValueClick,"selected-value":t.selectedInputValueDotsBracketsPath,"selectable-type":"single","select-on-click-node":!0,"show-select-controller":!0,"node-selectable":t.valueSelectable,"show-icon":!0},null,8,["data","onSelectedChange","selected-value","node-selectable"]))])])):(Oe(),je("div",Kwt,"Transition has no input places."))])])}const Jwt=Qr(wwt,[["render",Xwt],["__scopeId","data-v-14abc5ec"]]),Zwt=Rt({components:{VueJsonPretty:gN,HelpButton:nm},data(){return{showFilterOutput:!1,pathDictionary:{}}},computed:{...Mt(Yg),...Mt(Zn),selectedOutputValueDotsBracketsPath:{get(){const t=this.transitionsStore.selectedOutputValueJsonPath;if(t==="none")return"none";const e=this.pathDictionary[t];return e||"none"},set(t){}}},created(){this.pathDictionary={}},methods:{cancelFilterEdit(){this.transitionsStore.resetOutputFilter(),this.showFilterOutput=!1},saveFilter(){this.transitionsStore.saveOutputFilter(),this.showFilterOutput=!1},onFilterOutput(){this.transitionsStore.unsetCurrentOutputAssignment(),this.pathDictionary={},this.transitionsStore.loadAvailableOutputAssignments()},onOutputPlaceSelect(){this.showFilterOutput=!1,this.pathDictionary={},this.transitionsStore.loadCurrentOutputAssignment()},valueSelectable(t){let e="";const n=t.path.substring(4);e=aC(n);const i=this.transitionsStore.outputArcs[this.transitionsStore.selectedOutputPlaceIndex].filtered.includes(e);return i&&(this.pathDictionary[e]=t.path),i},onSelectValueClick(t,e){if(Array.isArray(t))return;const n=t.substring(4),r=aC(n);this.transitionsStore.saveSelectedAssignment(r,"output")}}});const Qwt=t=>(zg("data-v-7bf902ef"),t=t(),Vg(),t),ekt={class:"card scoped-modal-side has-background-light scoped-modal-right"},tkt={class:"m-5 scoped-scrollable-outer"},nkt={key:0,class:"scoped-scrollable-container"},rkt={class:"level mb-4"},ikt={class:"level-left"},okt={class:"level-item"},akt={class:"field has-addons"},skt=Qwt(()=>K("p",{class:"control"},[K("a",{class:"button is-static is-small"}," Output ")],-1)),lkt={class:"control"},ckt={class:"select is-small"},ukt=["value"],fkt={key:0,class:"level-right"},dkt={class:"level-item"},hkt={class:"icon is-small has-text-warning is-clickable mr-2 has-tooltip-bottom","data-tooltip":"Some places have unselected values."},pkt={class:"level mb-4"},gkt={class:"level-left"},mkt={key:0,class:"level-item"},vkt={class:"icon mr-1 has-text-grey-light"},ykt={class:"has-text-grey"},bkt={key:1,class:"level-item"},Skt={class:"icon mr-1 has-text-grey-light"},_kt=["disabled"],wkt={class:"icon is-small has-text-grey"},kkt={class:"icon is-small"},xkt={class:"scoped-scrollable jsn-code p-2"},Ckt={key:1,class:"notification is-info is-light is-size-7"};function Tkt(t,e,n,r,i,o){const a=Pt("font-awesome-icon"),s=Pt("HelpButton"),l=Pt("vue-json-pretty");return Oe(),je("div",ekt,[K("section",tkt,[t.transitionsStore.outputArcs.length>0?(Oe(),je("div",nkt,[K("div",rkt,[K("div",ikt,[K("div",okt,[K("div",akt,[skt,K("p",lkt,[K("span",ckt,[kf(K("select",{"onUpdate:modelValue":e[0]||(e[0]=c=>t.transitionsStore.selectedOutputPlaceIndex=c),onChange:e[1]||(e[1]=(...c)=>t.onOutputPlaceSelect&&t.onOutputPlaceSelect(...c))},[(Oe(!0),je(hn,null,uo(t.transitionsStore.outputArcs,(c,u)=>(Oe(),je("option",{value:u},Qt(c.name),9,ukt))),256))],544),[[X2,t.transitionsStore.selectedOutputPlaceIndex]])])])])])]),t.transitionsStore.postsetAssignmentComplete?ct("",!0):(Oe(),je("div",fkt,[K("div",dkt,[K("span",hkt,[at(a,{icon:"fas fa-triangle-exclamation"})])])]))]),K("div",pkt,[K("div",gkt,[t.showFilterOutput?(Oe(),je("div",bkt,[K("span",Skt,[at(a,{icon:"fas fa-filter"})]),kf(K("input",{onInput:e[3]||(e[3]=(...c)=>t.onFilterOutput&&t.onFilterOutput(...c)),style:{width:"100px"},class:"input is-small mr-1","onUpdate:modelValue":e[4]||(e[4]=c=>t.transitionsStore.outputArcs[t.transitionsStore.selectedOutputPlaceIndex].filter=c),disabled:t.netStore.transitionTypes[t.transitionsStore.transition.id]!=="custom"},null,40,_kt),[[Zd,t.transitionsStore.outputArcs[t.transitionsStore.selectedOutputPlaceIndex].filter]]),K("button",{class:"mr-1 button is-small",onClick:e[5]||(e[5]=(...c)=>t.cancelFilterEdit&&t.cancelFilterEdit(...c))},[K("span",wkt,[at(a,{icon:"fas fa-xmark"})])]),K("button",{onClick:e[6]||(e[6]=(...c)=>t.saveFilter&&t.saveFilter(...c)),class:"button is-small is-primary"},[K("span",kkt,[at(a,{icon:"fas fa-check"})])])])):(Oe(),je("div",mkt,[K("span",{class:"icon-text is-clickable",onClick:e[2]||(e[2]=c=>t.showFilterOutput=!0)},[K("span",vkt,[at(a,{icon:"fas fa-filter"})]),K("span",ykt,Qt(t.transitionsStore.outputArcs[t.transitionsStore.selectedOutputPlaceIndex].filtered.length)+" selectable values",1),Vi("  "),at(s,{class:"has-text-grey-light","help-text":`
                      You can edit the filter to make other values selectable. Filter expressions are written in 
                      <a href='https://goessner.net/articles/JSONPath/' target='_blank'>
                        JsonPath
                      </a>.
                      `})])]))])]),K("div",xkt,[(Oe(),en(l,{key:t.transitionsStore.outputDataKey,data:t.transitionsStore.outputArcs[t.transitionsStore.selectedOutputPlaceIndex].marking,onSelectedChange:t.onSelectValueClick,"selected-value":t.selectedOutputValueDotsBracketsPath,"selectable-type":"single","select-on-click-node":!0,"show-select-controller":!0,"node-selectable":t.valueSelectable,"show-icon":!0},null,8,["data","onSelectedChange","selected-value","node-selectable"]))])])):(Oe(),je("div",Ckt,"Transition has no output places."))])])}const Akt=Qr(Zwt,[["render",Tkt],["__scopeId","data-v-7bf902ef"]]),Pkt=Rt({computed:{...Mt(ss),...Mt(Yg),...Mt(Zn)},methods:{setTransitionType(t){const e=t.target.value;if(e==="custom"){const i=this.netStore.transitionTypes[this.transitionsStore.transition.id],o=this.configStore.getTransitionTypeById(i);if(o){const a=Object.keys(o.customVariables);for(let s=0;s<a.length;s++)this.transitionsStore.removeVariable(a[s])}}this.netStore.transitionTypes[this.transitionsStore.transition.id]=e;const n=this.configStore.getTransitionTypeById(e);if(!n)return;this.transitionsStore.transition.preface=n.preface,this.transitionsStore.transition.guard=n.guard,this.transitionsStore.saveBasicInscription();for(let i=0;i<this.transitionsStore.outputArcs.length;i++){this.transitionsStore.selectedOutputSnippetIndex=i;let o=this.transitionsStore.outputArcs[i].valueSnippet,a=this.transitionsStore.outputArcs[i].keySnippet,s=o.substring(0,o.indexOf("=")+2)+n.valueSnippet,l=a.substring(0,a.indexOf("=")+2)+n.keySnippet;this.transitionsStore.outputArcs[i].valueSnippet=s,this.transitionsStore.outputArcs[i].keySnippet=l,this.transitionsStore.saveOutputSnippets(),this.transitionsStore.selectedOutputPlaceIndex=i,this.transitionsStore.outputArcs[i].filter=n.postsetFilter,this.transitionsStore.saveOutputFilter()}for(let i=0;i<this.transitionsStore.inputArcs.length;i++)this.transitionsStore.selectedInputPlaceIndex=i,this.transitionsStore.inputArcs[i].filter=n.presetFilter,this.transitionsStore.saveInputFilter();this.transitionsStore.selectedInputPlaceIndex=0,this.transitionsStore.selectedOutputPlaceIndex=0,this.transitionsStore.selectedOutputSnippetIndex=0;const r=Object.keys(n.customVariables);for(let i=0;i<r.length;i++)this.transitionsStore.updateVariable(r[i],n.customVariables[r[i]])}}}),Ekt={class:"block"},Okt={class:"field"},Ikt=K("label",{class:"label is-small"},"Knotentyp:",-1),$kt={class:"select is-small"},Fkt=["selected"],Lkt=["value","selected"],Dkt={class:"block"},Nkt={key:0,class:"notification is-info is-light is-size-7"},Mkt=["innerHTML"],Rkt=K("hr",null,null,-1);function zkt(t,e,n,r,i,o){var a;return Oe(),je(hn,null,[K("div",Ekt,[K("div",Okt,[Ikt,K("div",$kt,[K("select",{onChange:e[0]||(e[0]=(...s)=>t.setTransitionType&&t.setTransitionType(...s))},[K("option",{value:"custom",selected:t.netStore.transitionTypes[t.transitionsStore.transition.id]==="custom"},"Individuell ",8,Fkt),(Oe(!0),je(hn,null,uo(t.configStore.transitionTypes,s=>(Oe(),je("option",{value:s.id,selected:s.id===t.netStore.transitionTypes[t.transitionsStore.transition.id]},Qt(s.title),9,Lkt))),256))],32)])])]),K("div",Dkt,[t.netStore.transitionTypes[t.transitionsStore.transition.id]==="custom"?(Oe(),je("div",Nkt," Sie knnen die Transitionsinschrift anpassen. ")):(Oe(),je("div",{key:1,class:"notification is-info is-light is-size-7",innerHTML:(a=t.configStore.getTransitionTypeById(t.netStore.transitionTypes[t.transitionsStore.transition.id]))==null?void 0:a.description},null,8,Mkt))]),Rkt],64)}const Vkt=Qr(Pkt,[["render",zkt]]),Bkt=Rt({components:{Codemirror:Wg,VueJsonPretty:gN,SnippetInput:_wt,PostsetFilter:Akt,PresetFilter:Jwt,HelpButton:nm,TransitionTypeSelector:Vkt},setup(){return{extensions:[Ug]}},data(){return{showNameInput:!1}},computed:{...Mt(ta),...Mt(Zn),...Mt(Yg)},created(){this.transitionsStore.initSettings(),this.transitionsStore.loadTransition(this.uiStateStore.lastSelectedID)},watch:{"transitionsStore.transition.guard"(t){this.transitionsStore.saveBasicInscription(),this.transitionsStore.loadEvaluations()},"transitionsStore.transition.preface"(t){this.transitionsStore.saveBasicInscription(),this.transitionsStore.loadEvaluations()}},methods:{onCancelNameEdit(){this.transitionsStore.resetName(),this.showNameInput=!1},onNameSave(){this.transitionsStore.saveName(),this.showNameInput=!1},close(){this.uiStateStore.showModal="none",this.transitionsStore.unsetAssignments()},onFireClick(){this.transitionsStore.isEnabled&&this.transitionsStore.fireCurrentTransition()},getShortString(t){return t.length>8?t.slice(0,8)+"...":t},getFormattedString(t){return JSON.stringify(JSON.parse(t),null,2)},onVariableInput(t,e){e||(e="0"),this.transitionsStore.updateVariable(t,e)}}});const Ea=t=>(zg("data-v-711130b5"),t=t(),Vg(),t),jkt={class:"modal is-active"},Hkt=Ea(()=>K("div",{class:"modal-background"},null,-1)),Ukt={class:"scoped-modal-container"},Wkt={class:"modal-card scoped-modal-center"},Gkt={class:"modal-card-head"},qkt=Ea(()=>K("span",{class:"has-text-weight-bold"},"Transition:",-1)),Ykt={class:"ml-1"},Kkt={class:"scoped-edit-button icon has-text-grey-light"},Xkt={key:1,class:"level"},Jkt={class:"icon is-small has-text-grey"},Zkt={class:"icon is-small"},Qkt=Ea(()=>K("p",{class:"modal-card-title"},null,-1)),ext={key:0,class:"modal-card-body"},txt={class:"block"},nxt={class:"field"},rxt={class:"label is-small"},ixt={class:"control is-small jsn-code"},oxt={key:0,class:"help is-danger"},axt=Ea(()=>K("hr",null,null,-1)),sxt={key:0,class:"block"},lxt={class:"field"},cxt=Ea(()=>K("label",{class:"label is-small"},"Output Expressions ",-1)),uxt={class:"select is-small"},fxt=Ea(()=>K("option",{value:-1,selected:"",disabled:""},"Select output place",-1)),dxt=["value"],hxt={key:0,class:"help is-danger"},pxt={key:1,class:"block"},gxt=Ea(()=>K("div",{class:"notification is-info is-light is-size-7"},"Transition has no output places.",-1)),mxt=[gxt],vxt=Ea(()=>K("hr",null,null,-1)),yxt={class:"block"},bxt={class:"field"},Sxt={class:"label is-small"},_xt={class:"control is-small jsn-code"},wxt={key:0},kxt={key:0,class:"help is-danger"},xxt={key:1,class:"help"},Cxt=["data-tooltip"],Txt=Ea(()=>K("hr",null,null,-1)),Axt={class:"block"},Pxt={class:"field"},Ext=Ea(()=>K("label",{class:"label is-small"},"Settings",-1)),Oxt={class:"control"},Ixt={class:"field"},$xt=["checked"],Fxt=Ea(()=>K("label",{for:"readonly-switch"},"Only read input values",-1)),Lxt={key:2,class:"block"},Dxt=Ea(()=>K("div",{class:"notification is-warning is-light is-size-7"}," Select a value for each input and output place to see expression evaluations. ",-1)),Nxt=[Dxt],Mxt={key:3,class:"block"},Rxt=Ea(()=>K("div",{class:"notification is-danger is-light is-size-7"}," The transition inscription has errors. ",-1)),zxt=[Rxt],Vxt={key:4,class:"block"},Bxt=Ea(()=>K("div",{class:"notification is-warning is-light is-size-7"}," The transition can't fire with selected values. ",-1)),jxt=[Bxt],Hxt={key:5,class:"block"},Uxt=Ea(()=>K("div",{class:"notification is-success is-light is-size-7"}," The transition can fire with selected values. ",-1)),Wxt=[Uxt],Gxt={key:1,class:"modal-card-body"},qxt={class:"field"},Yxt={class:"label is-small"},Kxt={class:"control has-icons-right"},Xxt=["value","onInput"],Jxt={class:"icon is-small is-right"},Zxt={key:2,class:"modal-card-foot"},Qxt=["disabled"];function e4t(t,e,n,r,i,o){const a=Pt("PresetFilter"),s=Pt("font-awesome-icon"),l=Pt("TransitionTypeSelector"),c=Pt("HelpButton"),u=Pt("Codemirror"),f=Pt("SnippetInput"),d=Pt("PostsetFilter");return Oe(),je("div",jkt,[Hkt,K("div",Ukt,[t.uiStateStore.uiAssistMode==="expert"?(Oe(),en(a,{key:0})):ct("",!0),K("div",Wkt,[K("header",Gkt,[qkt,K("span",Ykt,[t.showNameInput?ct("",!0):(Oe(),je("span",{key:0,class:"is-ghost icon-text has-text-weight-bold scoped-modal-title is-clickable",onClick:e[0]||(e[0]=h=>t.showNameInput=!0)},[K("span",null,Qt(t.transitionsStore.transition.name),1),K("span",Kkt,[at(s,{icon:"fas fa-pen"})])])),t.showNameInput?(Oe(),je("span",Xkt,[kf(K("input",{style:{width:"100px"},class:"input is-small level-item","onUpdate:modelValue":e[1]||(e[1]=h=>t.transitionsStore.transition.name=h)},null,512),[[Zd,t.transitionsStore.transition.name]]),K("button",{class:"ml-1 button is-small level-item",onClick:e[2]||(e[2]=(...h)=>t.onCancelNameEdit&&t.onCancelNameEdit(...h))},[K("span",Jkt,[at(s,{icon:"fas fa-xmark"})])]),K("button",{onClick:e[3]||(e[3]=(...h)=>t.onNameSave&&t.onNameSave(...h)),class:"ml-1 button is-small level-item is-primary"},[K("span",Zkt,[at(s,{icon:"fas fa-check"})])])])):ct("",!0)]),Qkt,K("button",{class:"delete","aria-label":"close",onClick:e[4]||(e[4]=(...h)=>t.close&&t.close(...h))})]),t.uiStateStore.uiAssistMode==="expert"?(Oe(),je("section",ext,[at(l),K("div",txt,[K("div",nxt,[K("label",rxt,[Vi("Preface "),at(c,{"help-text":`
                                Preface is evaluated before any output expression or guard. Use it to define custom variables and functions.
                              `}),K("span",{onClick:e[5]||(e[5]=()=>{t.uiStateStore.showEditor="preface"}),class:"icon is-small is-pulled-right has-text-grey-light is-clickable"},[at(s,{icon:"fas fa-up-right-from-square"})])]),K("div",ixt,[at(u,{placeholder:"Define preface in Jsonnet",style:{height:"50px"},"indent-with-tab":!0,"tab-size":2,extensions:t.extensions,modelValue:t.transitionsStore.transition.preface,"onUpdate:modelValue":e[6]||(e[6]=h=>t.transitionsStore.transition.preface=h),disabled:t.netStore.transitionTypes[t.transitionsStore.transition.id]!=="custom"},null,8,["extensions","modelValue","disabled"])]),t.transitionsStore.prefaceHasError?(Oe(),je("p",oxt," Expression has errors. Use preface only for variable and function definitions.")):ct("",!0)])]),axt,t.transitionsStore.outputArcs.length>0?(Oe(),je("div",sxt,[K("div",lxt,[cxt,K("div",uxt,[kf(K("select",{"onUpdate:modelValue":e[7]||(e[7]=h=>t.transitionsStore.selectedOutputSnippetIndex=h)},[fxt,(Oe(!0),je(hn,null,uo(t.transitionsStore.outputArcs,(h,g)=>(Oe(),je("option",{value:g},Qt(h.name),9,dxt))),256))],512),[[X2,t.transitionsStore.selectedOutputSnippetIndex]])]),t.transitionsStore.hasAnyOutputError?(Oe(),je("p",hxt,"Some output expressions have errors.")):ct("",!0)]),t.transitionsStore.selectedOutputSnippetIndex!==-1?(Oe(),en(f,{key:0})):ct("",!0)])):(Oe(),je("div",pxt,mxt)),vxt,K("div",yxt,[K("div",bxt,[K("label",Sxt,[Vi("Guard Expression "),at(c,{"help-text":`
                                The guard is a function that evaluates to true or false. Use it to describe rules when the transition is enabled.
                              `}),K("span",{onClick:e[8]||(e[8]=()=>{t.uiStateStore.showEditor="guard"}),class:"icon is-small is-pulled-right has-text-grey-light is-clickable"},[at(s,{icon:"fas fa-up-right-from-square"})])]),K("div",_xt,[at(u,{placeholder:"Define guard in Jsonnet",style:{height:"50px"},"indent-with-tab":!0,"tab-size":2,extensions:t.extensions,modelValue:t.transitionsStore.transition.guard,"onUpdate:modelValue":e[9]||(e[9]=h=>t.transitionsStore.transition.guard=h),disabled:t.netStore.transitionTypes[t.transitionsStore.transition.id]!=="custom"},null,8,["extensions","modelValue","disabled"])]),t.transitionsStore.assignmentComplete&&!t.transitionsStore.prefaceHasError&&!t.transitionsStore.hasAnyError?(Oe(),je("div",wxt,[t.transitionsStore.guardHasError?(Oe(),je("p",kxt,"Guard expression has errors. ")):ct("",!0),t.transitionsStore.guardHasError?ct("",!0):(Oe(),je("p",xxt,[Vi("Result: "),K("code",{class:"has-text-grey has-tooltip-bottom","data-tooltip":t.getFormattedString(t.transitionsStore.guardEvaluation)},Qt(t.getShortString(t.transitionsStore.guardEvaluation)),9,Cxt)]))])):ct("",!0)])]),Txt,K("div",Axt,[K("div",Pxt,[Ext,K("div",Oxt,[K("div",Ixt,[K("input",{onClick:e[10]||(e[10]=h=>t.transitionsStore.switchMode()),id:"readonly-switch",type:"checkbox",name:"readonly-switch",class:"switch is-rtl is-small",checked:t.transitionsStore.transition.readonly},null,8,$xt),Fxt])])])]),t.transitionsStore.assignmentComplete?t.transitionsStore.hasAnyError?(Oe(),je("div",Mxt,zxt)):t.transitionsStore.isEnabled?t.transitionsStore.isEnabled?(Oe(),je("div",Hxt,Wxt)):ct("",!0):(Oe(),je("div",Vxt,jxt)):(Oe(),je("div",Lxt,Nxt))])):(Oe(),je("section",Gxt,[at(l),(Oe(!0),je(hn,null,uo(Object.entries(t.transitionsStore.transition.customVariables),([h,g])=>(Oe(),je("div",qxt,[K("label",Yxt,Qt(h),1),K("div",Kxt,[K("input",{class:"input is-small",value:g,onInput:y=>{if(y.target){const S=y.target;t.onVariableInput(h,S.value)}}},null,40,Xxt),K("span",Jxt,[at(s,{icon:"fas fa-percent"})])])]))),256))])),t.uiStateStore.uiAssistMode==="expert"?(Oe(),je("footer",Zxt,[K("button",{class:"button is-pulled-right is-danger is-small",disabled:!t.transitionsStore.isEnabled,style:{"margin-left":"auto"},onClick:e[11]||(e[11]=(...h)=>t.onFireClick&&t.onFireClick(...h))},"Fire!",8,Qxt)])):ct("",!0)]),t.uiStateStore.uiAssistMode==="expert"?(Oe(),en(d,{key:1})):ct("",!0)])])}const t4t=Qr(Bkt,[["render",e4t],["__scopeId","data-v-711130b5"]]),n4t=Rt({computed:{...Mt(ta),...Mt(Zn),...Mt(ss)},methods:{importNet(t){this.netStore.import(t),this.close()},close(){this.uiStateStore.showModal="none"}}}),r4t={class:"modal is-active"},i4t=K("div",{class:"modal-background"},null,-1),o4t={class:"modal-card jsn-modal-wide"},a4t={class:"modal-card-head"},s4t=K("p",{class:"modal-card-title"},"Beispiele",-1),l4t={class:"modal-card-body"},c4t={class:"content"},u4t=K("div",{class:"notification is-info is-light is-size-7"}," Whlen Sie ein Beispiel-Modell aus, um es in den Editor zu laden. ",-1),f4t={class:"table is-size-7 is-fullwidth"},d4t=K("thead",null,[K("th",null,"Modell"),K("th",null,"Aktionen")],-1),h4t=["onClick"];function p4t(t,e,n,r,i,o){return Oe(),je("div",r4t,[i4t,K("div",o4t,[K("header",a4t,[s4t,K("button",{class:"delete","aria-label":"close",onClick:e[0]||(e[0]=(...a)=>t.close&&t.close(...a))})]),K("section",l4t,[K("div",c4t,[u4t,K("div",null,[K("table",f4t,[d4t,K("tbody",null,[(Oe(!0),je(hn,null,uo(t.configStore.examples,a=>(Oe(),je("tr",null,[K("td",null,Qt(a.name),1),K("td",null,[K("a",{onClick:()=>{t.importNet(a.net)}},"Laden",8,h4t)])]))),256))])])])])])])])}const g4t=Qr(n4t,[["render",p4t]]),m4t=Rt({components:{Codemirror:Wg},props:{content:String,language:{type:String,default:"json"},class:String},setup(){return{jsonExtensions:[Lce()],jsonnetExtensions:[Ug]}}});function v4t(t,e,n,r,i,o){const a=Pt("Codemirror");return Oe(),je(hn,null,[t.language==="jsonnet"?(Oe(),en(a,{key:0,modelValue:t.content,"onUpdate:modelValue":e[0]||(e[0]=s=>t.content=s),disabled:!0,autofocus:!0,"indent-with-tab":!0,"tab-size":2,extensions:t.jsonnetExtensions,class:Wt(t.class)},null,8,["modelValue","extensions","class"])):ct("",!0),t.language==="json"?(Oe(),en(a,{key:1,modelValue:t.content,"onUpdate:modelValue":e[1]||(e[1]=s=>t.content=s),disabled:!0,autofocus:!0,"indent-with-tab":!0,"tab-size":2,extensions:t.jsonExtensions,class:Wt(t.class)},null,8,["modelValue","extensions","class"])):ct("",!0)],64)}const y4t=Qr(m4t,[["render",v4t]]),b4t=Rt({components:{StaticCodeEditor:y4t},props:{examples:{type:Array,required:!0},isTransition:Boolean},methods:{toggleAccordion(t){this.examples[t].isExpanded===!1?this.examples[t].isExpanded=!0:this.examples[t].isExpanded=!1}}});const S4t={class:"accordion"},_4t=["onClick"],w4t=["onClick"],k4t={class:"scoped-accordion-content jsn-code"};function x4t(t,e,n,r,i,o){const a=Pt("font-awesome-icon"),s=Pt("StaticCodeEditor");return Oe(),je("div",S4t,[(Oe(!0),je(hn,null,uo(t.examples,(l,c)=>(Oe(),je("div",{key:c},[K("button",{class:"button is-ghost",onClick:u=>t.toggleAccordion(c)},Qt(l.question),9,_4t),K("button",{class:"button is-ghost is-pulled-right",onClick:u=>t.toggleAccordion(c)},[l.isExpanded?ct("",!0):(Oe(),en(a,{key:0,icon:"fas fa-plus-circle scoped-accordion-button"})),l.isExpanded?(Oe(),en(a,{key:1,icon:"fas fa-minus-circle scoped-accordion-button"})):ct("",!0)],8,w4t),kf(K("div",k4t,[at(s,{class:"my-1",content:l.answer,language:"jsonnet"},null,8,["content"])],512),[[dI,l.isExpanded]])]))),128))])}const C4t=Qr(b4t,[["render",x4t],["__scopeId","data-v-617f9126"]]),T4t={student:[{id:1,name:"Alice",age:25,email:"alice@uni.edu",semester:4,lecturesNotYetDone:["Process Modeling","Database Systems"]}],request:[{id:1,lecture:"Process Modeling",serviceFee:15}],jsonnet:[{question:"Always evaluate to true (no check functionality)",answer:"true",evaluation:!0,isExpanded:!1},{question:"Comparison of two attributes of different tokens",answer:"input_somplace_token.id == output_otherplace_token.id",evaluation:!0,isExpanded:!1},{question:"Comparison of an attribute with a value",answer:"input_someplace_value.name == 'Tom'",evaluation:!1,isExpanded:!1},{question:"Compare whether value is greater or smaller",answer:"input_someplace_value.age > 18",evaluation:!0,isExpanded:!1},{question:"Combine multiple conditions",answer:`input_someplace_value.name == 'Tom' &&
 input_someplace_value.age > 18`,evaluation:!0,isExpanded:!1}]},A4t={student:[{id:1,name:"Alice",age:25,email:"alice@uni.edu",semester:4,lecturesNotYetDone:["Process Modeling","Database Systems"]}],lecture:[{id:1,lecture:"Process Modeling",serviceFee:15}],jsonnet:[{question:"Pass some static simple value as output.",answer:"local output_somplace_value = true;",evaluation:{id:1,lecture:"Process Modeling"},isExpanded:!1},{question:"Pass some static complex value as output.",answer:'local output_somplace_value = { "id": 1, "lecture": "Process Modeling" };',evaluation:{id:1,lecture:"Process Modeling"},isExpanded:!1},{question:"Pass some input value unchanged.",answer:"local output_somplace_value = input_otherplace_value;",evaluation:{id:1,lecture:"Process Modeling"},isExpanded:!1},{question:"Merge objects.",answer:"local output_someplace_value = input_otherplace_value + {email: somevariable.email};",evaluation:{email:"alice@uni.edu",id:1,lecture:"Process Modeling"},isExpanded:!1}]},P4t={student:[{id:1,name:"Alice",age:25,email:"alice@uni.edu",semester:4,lecturesNotYetDone:["Process Modeling","Database Systems"]}],lecture:[{id:1,lecture:"Process Modeling",serviceFee:15}],jsonnet:[{question:"Insert corresponding output value at a specific field of an object.",answer:'local output_someplace_key = "price";',evaluation:{id:1,lecture:"Process Modeling"},isExpanded:!1},{question:"Insert corresponding output value in the beginning of an array.",answer:"local output_someplace_key = 0;",evaluation:{email:"alice@uni.edu",id:1,lecture:"Process Modeling"},isExpanded:!1},{question:"Insert corresponding output value at the end of an array.",answer:'local output_someplace_key = "-";',evaluation:{email:"alice@uni.edu",message:"The request for Process Modeling was accepted."},isExpanded:!1},{question:"Use the key of some input value as output key.",answer:"local output_someplace_key = input_otherplace_key;",evaluation:{age:25,email:"alice@uni.edu",id:1,name:"Alice",semester:4,totalTuition:1600},isExpanded:!1}]},E4t={student:[{id:1,name:"Alice",age:25,email:"alice@uni.edu",semester:4,lecturesNotYetDone:["Process Modeling","Database Systems"]}],lecture:[{id:1,lecture:"Process Modeling",serviceFee:15}],jsonnet:[{question:"Definition of a variable",answer:"local tuitionPerSemester = 400;",evaluation:{age:25,email:"alice@uni.edu",id:1,name:"Alice",semester:4,totalTuition:1600},isExpanded:!1},{question:"Definition of a function",answer:"local calculateTotalTuition(tuitionPerSemester, numberSemester) = tuitionPerSemester * numberSemester;",evaluation:{age:25,email:"alice@uni.edu",id:1,name:"Alice",semester:4,totalTuition:1600},isExpanded:!1}]},O4t=Rt({components:{Codemirror:Wg,HelpButton:nm,ExampleAccordion:C4t},setup(){const t=[Ug];return{view:ru(),extensions:t}},computed:{getCurrentExample(){return this.uiStateStore.showEditor==="guard"?this.guardExamples.jsonnet:this.uiStateStore.showEditor==="value"?this.valueExamples.jsonnet:this.uiStateStore.showEditor==="key"?this.keyExamples.jsonnet:this.prefaceExamples.jsonnet},title(){return this.uiStateStore.showEditor==="guard"?this.transitionsStore.transition.name+" guard":this.uiStateStore.showEditor==="preface"?this.transitionsStore.transition.name+" preface":this.uiStateStore.showEditor==="key"?this.transitionsStore.outputArcs[this.transitionsStore.selectedOutputSnippetIndex].name+" key":this.uiStateStore.showEditor==="value"?this.transitionsStore.outputArcs[this.transitionsStore.selectedOutputSnippetIndex].name+" value":""},keyHasError(){const t=this.transitionsStore.outputArcs[this.transitionsStore.selectedOutputSnippetIndex].keyVar;return this.transitionsStore.keyEvaluationResults[t].hasError},keyEvaluation(){const t=this.transitionsStore.outputArcs[this.transitionsStore.selectedOutputSnippetIndex].keyVar;return this.transitionsStore.keyEvaluationResults[t].evaluation},valueHasError(){const t=this.transitionsStore.outputArcs[this.transitionsStore.selectedOutputSnippetIndex].valueVar;return this.transitionsStore.valueEvaluationResults[t].hasError},valueEvaluation(){const t=this.transitionsStore.outputArcs[this.transitionsStore.selectedOutputSnippetIndex].valueVar;return this.transitionsStore.valueEvaluationResults[t].evaluation},...Mt(ta),...Mt(Zn),...Mt(Yg)},data(){return{activeItems:[],expandedExamples:!1,guardExamples:T4t,keyExamples:P4t,valueExamples:A4t,prefaceExamples:E4t}},methods:{getVariableTooltip(t){return this.transitionsStore.variables[t]!==void 0?JSON.stringify(this.transitionsStore.variables[t],null,2):"Variable has no value assigned."},expandExamples(){this.expandedExamples=!this.expandedExamples},toggleActive(t){this.activeItems.includes(t)?this.activeItems.splice(this.activeItems.indexOf(t),1):this.activeItems.push(t)},close(){this.uiStateStore.showEditor="none"},onEditorReady(t){this.view=t.view},insertVariableName(t){const n=this.view.state.selection.ranges[0].anchor;this.view.dispatch({changes:{from:n,insert:t}})}}});const Ti=t=>(zg("data-v-91768d95"),t=t(),Vg(),t),I4t={class:"modal is-active"},$4t=Ti(()=>K("div",{class:"modal-background"},null,-1)),F4t={class:"modal-card scoped-modal jsn-modal-wide"},L4t={class:"modal-card-head"},D4t={class:"has-text-weight-bold"},N4t=Ti(()=>K("p",{class:"modal-card-title"},null,-1)),M4t={class:"modal-card-body"},R4t={class:"columns scoped-scrollable-outer"},z4t={class:"column is-one-quarter scoped-scroll-container"},V4t={class:"menu is-small scoped-scrollable"},B4t=Ti(()=>K("p",{class:"menu-label"}," Variable Explorer ",-1)),j4t={class:"menu-list"},H4t={key:0},U4t=["onClick"],W4t={key:0},G4t=["data-tooltip","onClick"],q4t=Ti(()=>K("span",{class:"has-text-weight-semibold"},"Key ",-1)),Y4t=Ti(()=>K("br",null,null,-1)),K4t={class:"is-family-code"},X4t=["data-tooltip","onClick"],J4t=Ti(()=>K("span",{class:"has-text-weight-semibold"},"Value ",-1)),Z4t=Ti(()=>K("br",null,null,-1)),Q4t={class:"is-family-code"},eCt=["data-tooltip","onClick"],tCt=Ti(()=>K("span",{class:"has-text-weight-semibold"},"Token ",-1)),nCt=Ti(()=>K("br",null,null,-1)),rCt={class:"is-family-code"},iCt={key:0},oCt=["onClick"],aCt={key:0},sCt=["data-tooltip","onClick"],lCt=Ti(()=>K("span",{class:"has-text-weight-semibold"},"Key ",-1)),cCt=Ti(()=>K("br",null,null,-1)),uCt={class:"is-family-code"},fCt=["data-tooltip","onClick"],dCt=Ti(()=>K("span",{class:"has-text-weight-semibold"},"Value ",-1)),hCt=Ti(()=>K("br",null,null,-1)),pCt={class:"is-family-code"},gCt=["data-tooltip","onClick"],mCt=Ti(()=>K("span",{class:"has-text-weight-semibold"},"Token ",-1)),vCt=Ti(()=>K("br",null,null,-1)),yCt={class:"is-family-code"},bCt={class:"column"},SCt={class:"notification is-info is-light"},_Ct={key:0},wCt={class:"block"},kCt={key:1},xCt={class:"block"},CCt={class:"block"},TCt={class:"block"},ACt={class:"field"},PCt={class:"label is-small"},ECt={class:"control is-small jsn-code"},OCt={key:0,class:"block"},ICt={key:0,class:"field"},$Ct=Ti(()=>K("label",{class:"label is-small"}," Evaluation ",-1)),FCt={key:0,class:"notification is-small jsn-code jsn-code-font is-light is-danger",style:{height:"200px"}},LCt={key:1,class:"notification is-small jsn-code jsn-code-font is-light is-danger",style:{height:"200px"}},DCt={key:2,class:"notification is-small jsn-code jsn-code-font is-light is-success",style:{height:"200px"}},NCt={key:3,class:"notification is-small jsn-code json-code-font is-light is-danger",style:{height:"200px"}},MCt={key:1,class:"field"},RCt=Ti(()=>K("label",{class:"label is-small"}," Evaluation ",-1)),zCt={key:0,class:"notification is-small jsn-code jsn-code-font is-light is-success",style:{height:"200px"}},VCt=Ti(()=>K("span",null,"Preface seems to be fine.",-1)),BCt=[VCt],jCt={key:1,class:"notification is-small jsn-code jsn-code-font is-light is-danger",style:{height:"200px"}},HCt=Ti(()=>K("span",null,"Preface results in an error.",-1)),UCt=[HCt],WCt={key:2,class:"field"},GCt=Ti(()=>K("label",{class:"label is-small"}," Evaluation ",-1)),qCt={key:0,class:"notification is-small jsn-code jsn-code-font is-light is-danger",style:{height:"200px"}},YCt={key:1,class:"notification is-small jsn-code jsn-code-font is-light is-success",style:{height:"200px"}},KCt={key:2,class:"notification is-small jsn-code jsn-code-font is-light is-danger",style:{height:"200px"}},XCt={key:3,class:"field"},JCt=Ti(()=>K("label",{class:"label is-small"}," Evaluation ",-1)),ZCt={key:0,class:"notification is-small jsn-code jsn-code-font is-light is-danger",style:{height:"200px"}},QCt={key:1,class:"notification is-small jsn-code jsn-code-font is-light is-success",style:{height:"200px"}},eTt={key:2,class:"notification is-small jsn-code jsn-code-font is-light is-danger",style:{height:"200px"}},tTt={key:1,class:"block"},nTt=Ti(()=>K("div",{class:"notification is-warning is-light is-size-7"}," Select a value for each input and output place to see expression evaluations. ",-1)),rTt=[nTt];function iTt(t,e,n,r,i,o){const a=Pt("font-awesome-icon"),s=Pt("ExampleAccordion"),l=Pt("HelpButton"),c=Pt("Codemirror");return Oe(),je("div",I4t,[$4t,K("div",F4t,[K("header",L4t,[K("span",D4t,"Expression Editor: "+Qt(t.title),1),N4t,K("button",{class:"delete","aria-label":"close",onClick:e[0]||(e[0]=(...u)=>t.close&&t.close(...u))})]),K("section",M4t,[K("div",R4t,[K("div",z4t,[K("aside",V4t,[B4t,K("ul",j4t,[K("li",null,[K("a",{onClick:e[1]||(e[1]=()=>{t.toggleActive("input")})}," Input ("+Qt(t.transitionsStore.inputArcs.length)+" places) ",1),t.activeItems.includes("input")?(Oe(),je("ul",H4t,[(Oe(!0),je(hn,null,uo(t.transitionsStore.inputArcs,(u,f)=>(Oe(),je("li",null,[K("a",{onClick:()=>{t.toggleActive(u.name)}},Qt(u.name),9,U4t),t.activeItems.includes(u.name)?(Oe(),je("ul",W4t,[K("li",null,[K("a",{class:"has-tooltip-bottom","data-tooltip":t.getVariableTooltip(u.keyVar),onClick:()=>{t.insertVariableName(u.keyVar)}},[q4t,Y4t,K("span",K4t,Qt(u.keyVar),1)],8,G4t)]),K("li",null,[K("a",{class:"has-tooltip-bottom","data-tooltip":t.getVariableTooltip(u.valueVar),onClick:()=>{t.insertVariableName(u.valueVar)}},[J4t,Z4t,K("span",Q4t,Qt(u.valueVar),1)],8,X4t)]),K("li",null,[K("a",{class:"has-tooltip-bottom","data-tooltip":t.getVariableTooltip(u.tokenVar),onClick:()=>{t.insertVariableName(u.tokenVar)}},[tCt,nCt,K("span",rCt,Qt(u.tokenVar),1)],8,eCt)])])):ct("",!0)]))),256))])):ct("",!0)]),K("li",null,[K("a",{onClick:e[2]||(e[2]=()=>{t.toggleActive("output")})},"Output ("+Qt(t.transitionsStore.outputArcs.length)+" places)",1),t.activeItems.includes("output")?(Oe(),je("ul",iCt,[(Oe(!0),je(hn,null,uo(t.transitionsStore.outputArcs,(u,f)=>(Oe(),je("li",null,[K("a",{onClick:()=>{t.toggleActive(u.name)}},Qt(u.name),9,oCt),t.activeItems.includes(u.name)?(Oe(),je("ul",aCt,[K("li",null,[K("a",{class:"has-tooltip-bottom","data-tooltip":t.getVariableTooltip(u.keyVar),onClick:()=>{t.insertVariableName(u.keyVar)}},[lCt,cCt,K("span",uCt,Qt(u.keyVar),1)],8,sCt)]),K("li",null,[K("a",{class:"has-tooltip-bottom","data-tooltip":t.getVariableTooltip(u.valueVar),onClick:()=>{t.insertVariableName(u.valueVar)}},[dCt,hCt,K("span",pCt,Qt(u.valueVar),1)],8,fCt)]),K("li",null,[K("a",{class:"has-tooltip-bottom","data-tooltip":t.getVariableTooltip(u.tokenVar),onClick:()=>{t.insertVariableName(u.tokenVar)}},[mCt,vCt,K("span",yCt,Qt(u.tokenVar),1)],8,gCt)])])):ct("",!0)]))),256))])):ct("",!0)])])])]),K("div",bCt,[K("div",SCt,[t.expandedExamples==!1?(Oe(),je("div",_Ct,[K("div",wCt,[K("span",{onClick:e[3]||(e[3]=(...u)=>t.expandExamples&&t.expandExamples(...u)),class:"icon is-clickable"},[at(a,{icon:"fas fa-plus-circle"})]),K("span",null,"Expand examples for "+Qt(t.uiStateStore.showEditor)+" expressions.",1)])])):(Oe(),je("div",kCt,[K("div",xCt,[K("span",{onClick:e[4]||(e[4]=(...u)=>t.expandExamples&&t.expandExamples(...u)),class:"icon is-clickable"},[at(a,{icon:"fas fa-minus-circle"})]),K("span",null,"Hide examples for "+Qt(t.uiStateStore.showEditor)+" expressions.",1)]),K("div",CCt,[at(s,{examples:t.getCurrentExample},null,8,["examples"])])]))]),K("div",TCt,[K("div",ACt,[K("label",PCt,[Vi("Expression "),at(l,{"help-text":`
                                 Expressions are written in 
                                <a href='https://jsonnet.org/' target='_blank'>
                                  Jsonnet
                                </a>. Click on variable names in the explorer to insert them at cursor position in the code.
                              `})]),K("div",ECt,[t.uiStateStore.showEditor==="guard"?(Oe(),en(c,{key:0,placeholder:"Enter guard expression ...",style:{height:"200px"},"indent-with-tab":!0,"tab-size":2,extensions:t.extensions,modelValue:t.transitionsStore.transition.guard,"onUpdate:modelValue":e[5]||(e[5]=u=>t.transitionsStore.transition.guard=u),onReady:t.onEditorReady,disabled:t.netStore.transitionTypes[t.transitionsStore.transition.id]!=="custom"},null,8,["extensions","modelValue","onReady","disabled"])):ct("",!0),t.uiStateStore.showEditor==="preface"?(Oe(),en(c,{key:1,placeholder:"Enter preface ...",style:{height:"200px"},"indent-with-tab":!0,"tab-size":2,extensions:t.extensions,modelValue:t.transitionsStore.transition.preface,"onUpdate:modelValue":e[6]||(e[6]=u=>t.transitionsStore.transition.preface=u),onReady:t.onEditorReady,disabled:t.netStore.transitionTypes[t.transitionsStore.transition.id]!=="custom"},null,8,["extensions","modelValue","onReady","disabled"])):ct("",!0),t.uiStateStore.showEditor==="key"?(Oe(),en(c,{key:2,placeholder:"Enter output key expression ...",style:{height:"200px"},"indent-with-tab":!0,"tab-size":2,extensions:t.extensions,modelValue:t.transitionsStore.outputArcs[t.transitionsStore.selectedOutputSnippetIndex].keySnippet,"onUpdate:modelValue":e[7]||(e[7]=u=>t.transitionsStore.outputArcs[t.transitionsStore.selectedOutputSnippetIndex].keySnippet=u),onReady:t.onEditorReady,disabled:t.netStore.transitionTypes[t.transitionsStore.transition.id]!=="custom"},null,8,["extensions","modelValue","onReady","disabled"])):ct("",!0),t.uiStateStore.showEditor==="value"?(Oe(),en(c,{key:3,placeholder:"Enter output value expression ...",style:{height:"200px"},"indent-with-tab":!0,"tab-size":2,extensions:t.extensions,modelValue:t.transitionsStore.outputArcs[t.transitionsStore.selectedOutputSnippetIndex].valueSnippet,"onUpdate:modelValue":e[8]||(e[8]=u=>t.transitionsStore.outputArcs[t.transitionsStore.selectedOutputSnippetIndex].valueSnippet=u),onReady:t.onEditorReady,disabled:t.netStore.transitionTypes[t.transitionsStore.transition.id]!=="custom"},null,8,["extensions","modelValue","onReady","disabled"])):ct("",!0)])])]),t.transitionsStore.assignmentComplete?(Oe(),je("div",OCt,[t.uiStateStore.showEditor=="guard"?(Oe(),je("div",ICt,[$Ct,t.transitionsStore.prefaceHasError?(Oe(),je("div",FCt," Fix errors in preface to see evaluations. ")):ct("",!0),t.transitionsStore.hasAnyOutputError?(Oe(),je("div",LCt," Fix errors in output expressions to see evaluations. ")):t.transitionsStore.guardHasError?t.transitionsStore.guardHasError?(Oe(),je("div",NCt,[K("span",null,Qt(t.transitionsStore.guardEvaluation),1)])):ct("",!0):(Oe(),je("div",DCt,[K("span",null,Qt(JSON.stringify(JSON.parse(t.transitionsStore.guardEvaluation),null,2)),1)]))])):ct("",!0),t.uiStateStore.showEditor=="preface"?(Oe(),je("div",MCt,[RCt,t.transitionsStore.prefaceHasError?ct("",!0):(Oe(),je("div",zCt,BCt)),t.transitionsStore.prefaceHasError?(Oe(),je("div",jCt,UCt)):ct("",!0)])):ct("",!0),t.uiStateStore.showEditor=="key"?(Oe(),je("div",WCt,[GCt,t.transitionsStore.prefaceHasError?(Oe(),je("div",qCt," Fix errors in preface to see evaluations. ")):t.keyHasError?t.keyHasError?(Oe(),je("div",KCt,[K("span",null,Qt(t.keyEvaluation),1)])):ct("",!0):(Oe(),je("div",YCt,[K("span",null,Qt(t.keyEvaluation),1)]))])):ct("",!0),t.uiStateStore.showEditor=="value"?(Oe(),je("div",XCt,[JCt,t.transitionsStore.prefaceHasError?(Oe(),je("div",ZCt," Fix errors in preface to see evaluations. ")):t.valueHasError?t.valueHasError?(Oe(),je("div",eTt,[K("span",null,Qt(t.valueEvaluation),1)])):ct("",!0):(Oe(),je("div",QCt,[K("span",null,Qt(t.valueEvaluation),1)]))])):ct("",!0)])):ct("",!0),t.transitionsStore.assignmentComplete?ct("",!0):(Oe(),je("div",tTt,rTt))])])])])])}const oTt=Qr(O4t,[["render",iTt],["__scopeId","data-v-91768d95"]]),aTt="scope3tool",sTt="assisted",lTt="activity",cTt="scope1",uTt=!1,fTt={show:!0},dTt=[{name:"Kamera",net:{typeData:{placeTypes:{"c49b0296-19cf-4857-90c0-3f93b638b877":"start","f1f4dfea-5277-4c6a-88f2-b76d3a12ce5d":"control","cd4b6f24-d1b8-458d-815a-5dece4b147ac":"end","bd54b190-4747-4b82-a2b0-0b4851681059":"control"},transitionTypes:{"9ab06d0d-29d3-4580-bf44-8e36194e65f1":"activity","7f9900f0-7d76-4067-b22e-391bdd91a101":"activity","a8940d72-5eff-49ae-98f3-ac64e086ff8d":"activity"}},netData:{places:[{id:"c49b0296-19cf-4857-90c0-3f93b638b877",name:"Start",marking:[{amount:1,ghgFactor:0,scope:"start",pds:0}],schema:{type:"array",title:"start",maxItems:1,items:{type:"object"},$id:"c49b0296-19cf-4857-90c0-3f93b638b877"}},{id:"f1f4dfea-5277-4c6a-88f2-b76d3a12ce5d",name:"p1",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"f1f4dfea-5277-4c6a-88f2-b76d3a12ce5d"}},{id:"cd4b6f24-d1b8-458d-815a-5dece4b147ac",name:"Kamera",marking:[],schema:{type:"array",title:"end",maxItems:1,items:{type:"object"},$id:"cd4b6f24-d1b8-458d-815a-5dece4b147ac"}},{id:"bd54b190-4747-4b82-a2b0-0b4851681059",name:"p2",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"bd54b190-4747-4b82-a2b0-0b4851681059"}}],transitions:[{id:"9ab06d0d-29d3-4580-bf44-8e36194e65f1",name:"Montage",preface:`// calculations
// ghg factors in kg CO2e per g
local ghgFactors = { 'NF3': 13.4, 'SF6': 18.3, 'CF4': 5.3};
local calculateFootprint(component) = component.amount  * (if component.scope == 1 then (if component.unit == 'mg' then 0.001 else if component.unit == 'kg' then 1000 else 1) * ghgFactors[component.ghg] * component.scalingFactor else if component.scope == 2 then (if component.unit == 'Wh' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'g CO2e / kWh' then 0.001 else if component.ghgFactorUnit == 'mg CO2e / kWh' then 0.000001 else 1) * component.scalingFactor else if component.scope == 3 then (if component.unit == 'mg (Gewicht)' then 0.000001 else if component.unit == 'g (Gewicht)' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'mg CO2e / Stueck oder kg' then 0.000001 else if component.ghgFactorUnit == 'g CO2e / Stueck oder kg' then 0.001 else 1) * component.scalingFactor else component.ghgFactor) * Allokation / 100;
local individualFootprints = std.map(calculateFootprint,input_values);
// calculate Scope 1-Emissions
local generateScope1Contribution(index,element) = if (element.scope == 1) then { name: input_names[index], value: individualFootprints[index] };
local sum(arr, n) = if (n <= 0) then 0 else sum(arr, n-1) + arr[n-1];
local totalFootprint = sum(individualFootprints, std.length(individualFootprints));
local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;
local footprintShares = std.map(calculatePCFShare,individualFootprints);
local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;
local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));
local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));
// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != 'start') && (element.scope != 'control')) then { name: input_names[index], value: individualFootprints[index] };
local generateScope2Contribution(index,element) = if (element.scope == 2) then { name: input_names[index], value: individualFootprints[index] };
local generateScope3Contribution(index,element) = if (element.scope == 3) then { name: input_names[index], value: individualFootprints[index] };
local filterNull(element) = element != null;
local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));
// fetch contributions from incoming places
local filterControl(element) = element.scope == 'control';
local incomingControlPlaces = std.filter(filterControl, input_values);
local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions['1'];
local getScope2Contribution(element) = element.footprintContributions['2'];
local getScope3Contribution(element) = element.footprintContributions['3'];
local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));
local footprintContributions = { '1': incomingScope1Contributions + scope1FromThisTransition, '2': incomingScope2Contributions + scope2FromThisTransition,'3': incomingScope3Contributions + scope3FromThisTransition};
local scope1Contributions = incomingScope1Contributions + scope1FromThisTransition;
local scope2Contributions = incomingScope2Contributions + scope2FromThisTransition;
local scope3Contributions = incomingScope3Contributions + scope3FromThisTransition;
// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != 'control') && (input_values[index].scope != 'start') then { name: element }; local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));
local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];
//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };
local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));
local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;
// Visualisations:
local visualisations = [{
'type': 'number',
'unit': 'kg CO2e',
'description': 'THG-Fussabdruck',
'value': totalFootprint
},
{
'type': 'sunburst',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sunburst)',
'value': [
{
'name': 'Scope 1',
'children': scope1Contributions
},
{
'name': 'Scope 2',
'children': scope2Contributions
},
{
'name': 'Scope 3',
'children': scope3Contributions
}
]
}
,{
'type': 'sankey',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sankey)',
'value': {
'data': sankeyNodes,
'links': sankeyLinks
}
},
{
'type': 'number',
'unit': '%',
'description': 'Primrdatenanteil',
'value': outputPDS * 100
}];`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p1_key:"local output_p1_key = '-';"},fragmentVarSnippets:{output_p1_value:"local output_p1_value = { scope: 'control', ghgFactorUnit: 'kg CO2e / Stueck', ghgFactor: totalFootprint, amount: 1, unit: 'Stueck (Stueckzahl)', type: 'Primaerdaten', pds: outputPDS, footprintContributions: footprintContributions, sankeyNodes: sankeyNodes,sankeyLinks: sankeyLinks, nodeName: transition_name, '$visualisations': visualisations };"}},{id:"7f9900f0-7d76-4067-b22e-391bdd91a101",name:"Reinigung",preface:`// calculations
// ghg factors in kg CO2e per g
local ghgFactors = { 'NF3': 13.4, 'SF6': 18.3, 'CF4': 5.3};
local calculateFootprint(component) = component.amount  * (if component.scope == 1 then (if component.unit == 'mg' then 0.001 else if component.unit == 'kg' then 1000 else 1) * ghgFactors[component.ghg] * component.scalingFactor else if component.scope == 2 then (if component.unit == 'Wh' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'g CO2e / kWh' then 0.001 else if component.ghgFactorUnit == 'mg CO2e / kWh' then 0.000001 else 1) * component.scalingFactor else if component.scope == 3 then (if component.unit == 'mg (Gewicht)' then 0.000001 else if component.unit == 'g (Gewicht)' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'mg CO2e / Stueck oder kg' then 0.000001 else if component.ghgFactorUnit == 'g CO2e / Stueck oder kg' then 0.001 else 1) * component.scalingFactor else component.ghgFactor) * Allokation / 100;
local individualFootprints = std.map(calculateFootprint,input_values);
// calculate Scope 1-Emissions
local generateScope1Contribution(index,element) = if (element.scope == 1) then { name: input_names[index], value: individualFootprints[index] };
local sum(arr, n) = if (n <= 0) then 0 else sum(arr, n-1) + arr[n-1];
local totalFootprint = sum(individualFootprints, std.length(individualFootprints));
local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;
local footprintShares = std.map(calculatePCFShare,individualFootprints);
local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;
local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));
local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));
// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != 'start') && (element.scope != 'control')) then { name: input_names[index], value: individualFootprints[index] };
local generateScope2Contribution(index,element) = if (element.scope == 2) then { name: input_names[index], value: individualFootprints[index] };
local generateScope3Contribution(index,element) = if (element.scope == 3) then { name: input_names[index], value: individualFootprints[index] };
local filterNull(element) = element != null;
local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));
// fetch contributions from incoming places
local filterControl(element) = element.scope == 'control';
local incomingControlPlaces = std.filter(filterControl, input_values);
local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions['1'];
local getScope2Contribution(element) = element.footprintContributions['2'];
local getScope3Contribution(element) = element.footprintContributions['3'];
local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));
local footprintContributions = { '1': incomingScope1Contributions + scope1FromThisTransition, '2': incomingScope2Contributions + scope2FromThisTransition,'3': incomingScope3Contributions + scope3FromThisTransition};
local scope1Contributions = incomingScope1Contributions + scope1FromThisTransition;
local scope2Contributions = incomingScope2Contributions + scope2FromThisTransition;
local scope3Contributions = incomingScope3Contributions + scope3FromThisTransition;
// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != 'control') && (input_values[index].scope != 'start') then { name: element }; local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));
local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];
//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };
local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));
local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;
// Visualisations:
local visualisations = [{
'type': 'number',
'unit': 'kg CO2e',
'description': 'THG-Fussabdruck',
'value': totalFootprint
},
{
'type': 'sunburst',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sunburst)',
'value': [
{
'name': 'Scope 1',
'children': scope1Contributions
},
{
'name': 'Scope 2',
'children': scope2Contributions
},
{
'name': 'Scope 3',
'children': scope3Contributions
}
]
}
,{
'type': 'sankey',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sankey)',
'value': {
'data': sankeyNodes,
'links': sankeyLinks
}
},
{
'type': 'number',
'unit': '%',
'description': 'Primrdatenanteil',
'value': outputPDS * 100
}];`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p2_key:"local output_p2_key = '-';"},fragmentVarSnippets:{output_p2_value:"local output_p2_value = { scope: 'control', ghgFactorUnit: 'kg CO2e / Stueck', ghgFactor: totalFootprint, amount: 1, unit: 'Stueck (Stueckzahl)', type: 'Primaerdaten', pds: outputPDS, footprintContributions: footprintContributions, sankeyNodes: sankeyNodes,sankeyLinks: sankeyLinks, nodeName: transition_name, '$visualisations': visualisations };"}},{id:"a8940d72-5eff-49ae-98f3-ac64e086ff8d",name:"Prfung",preface:`// calculations
// ghg factors in kg CO2e per g
local ghgFactors = { 'NF3': 13.4, 'SF6': 18.3, 'CF4': 5.3};
local calculateFootprint(component) = component.amount  * (if component.scope == 1 then (if component.unit == 'mg' then 0.001 else if component.unit == 'kg' then 1000 else 1) * ghgFactors[component.ghg] * component.scalingFactor else if component.scope == 2 then (if component.unit == 'Wh' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'g CO2e / kWh' then 0.001 else if component.ghgFactorUnit == 'mg CO2e / kWh' then 0.000001 else 1) * component.scalingFactor else if component.scope == 3 then (if component.unit == 'mg (Gewicht)' then 0.000001 else if component.unit == 'g (Gewicht)' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'mg CO2e / Stueck oder kg' then 0.000001 else if component.ghgFactorUnit == 'g CO2e / Stueck oder kg' then 0.001 else 1) * component.scalingFactor else component.ghgFactor) * Allokation / 100;
local individualFootprints = std.map(calculateFootprint,input_values);
// calculate Scope 1-Emissions
local generateScope1Contribution(index,element) = if (element.scope == 1) then { name: input_names[index], value: individualFootprints[index] };
local sum(arr, n) = if (n <= 0) then 0 else sum(arr, n-1) + arr[n-1];
local totalFootprint = sum(individualFootprints, std.length(individualFootprints));
local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;
local footprintShares = std.map(calculatePCFShare,individualFootprints);
local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;
local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));
local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));
// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != 'start') && (element.scope != 'control')) then { name: input_names[index], value: individualFootprints[index] };
local generateScope2Contribution(index,element) = if (element.scope == 2) then { name: input_names[index], value: individualFootprints[index] };
local generateScope3Contribution(index,element) = if (element.scope == 3) then { name: input_names[index], value: individualFootprints[index] };
local filterNull(element) = element != null;
local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));
// fetch contributions from incoming places
local filterControl(element) = element.scope == 'control';
local incomingControlPlaces = std.filter(filterControl, input_values);
local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions['1'];
local getScope2Contribution(element) = element.footprintContributions['2'];
local getScope3Contribution(element) = element.footprintContributions['3'];
local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));
local footprintContributions = { '1': incomingScope1Contributions + scope1FromThisTransition, '2': incomingScope2Contributions + scope2FromThisTransition,'3': incomingScope3Contributions + scope3FromThisTransition};
local scope1Contributions = incomingScope1Contributions + scope1FromThisTransition;
local scope2Contributions = incomingScope2Contributions + scope2FromThisTransition;
local scope3Contributions = incomingScope3Contributions + scope3FromThisTransition;
// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != 'control') && (input_values[index].scope != 'start') then { name: element }; local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));
local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];
//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };
local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));
local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;
// Visualisations:
local visualisations = [{
'type': 'number',
'unit': 'kg CO2e',
'description': 'THG-Fussabdruck',
'value': totalFootprint
},
{
'type': 'sunburst',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sunburst)',
'value': [
{
'name': 'Scope 1',
'children': scope1Contributions
},
{
'name': 'Scope 2',
'children': scope2Contributions
},
{
'name': 'Scope 3',
'children': scope3Contributions
}
]
}
,{
'type': 'sankey',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sankey)',
'value': {
'data': sankeyNodes,
'links': sankeyLinks
}
},
{
'type': 'number',
'unit': '%',
'description': 'Primrdatenanteil',
'value': outputPDS * 100
}];`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_kamera_key:"local output_kamera_key = '-';"},fragmentVarSnippets:{output_kamera_value:"local output_kamera_value = { scope: 'control', ghgFactorUnit: 'kg CO2e / Stueck', ghgFactor: totalFootprint, amount: 1, unit: 'Stueck (Stueckzahl)', type: 'Primaerdaten', pds: outputPDS, footprintContributions: footprintContributions, sankeyNodes: sankeyNodes,sankeyLinks: sankeyLinks, nodeName: transition_name, '$visualisations': visualisations };"}}],arcs:[{id:"2fec368f-9bd4-41f2-bfb6-fd0901c9d325",filter:"$.*",fromId:"c49b0296-19cf-4857-90c0-3f93b638b877",toId:"9ab06d0d-29d3-4580-bf44-8e36194e65f1"},{id:"03a523fd-aa6c-4f9e-aebc-b30acdb1dc04",filter:"$",fromId:"9ab06d0d-29d3-4580-bf44-8e36194e65f1",toId:"f1f4dfea-5277-4c6a-88f2-b76d3a12ce5d"},{id:"6b836a80-ac07-4b53-b0ee-7367cb417425",filter:"$.*",fromId:"f1f4dfea-5277-4c6a-88f2-b76d3a12ce5d",toId:"7f9900f0-7d76-4067-b22e-391bdd91a101"},{id:"3e4a241e-f6b4-49fd-963a-485682dee440",filter:"$",fromId:"7f9900f0-7d76-4067-b22e-391bdd91a101",toId:"bd54b190-4747-4b82-a2b0-0b4851681059"},{id:"aee2a50a-3045-49ff-9a60-2a4bede9ba1d",filter:"$.*",fromId:"bd54b190-4747-4b82-a2b0-0b4851681059",toId:"a8940d72-5eff-49ae-98f3-ac64e086ff8d"},{id:"12e6cf18-84f2-41cd-bff2-1a211d93754d",filter:"$",fromId:"a8940d72-5eff-49ae-98f3-ac64e086ff8d",toId:"cd4b6f24-d1b8-458d-815a-5dece4b147ac"}]},layoutData:{cells:[{type:"pn.Transition",size:{width:100,height:50},position:{x:348,y:360},angle:0,id:"9ab06d0d-29d3-4580-bf44-8e36194e65f1",jsonnetsType:"transition",z:1,attrs:{".label":{fill:"#7a7e9b",text:"Montage"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:696,y:360},angle:0,id:"7f9900f0-7d76-4067-b22e-391bdd91a101",jsonnetsType:"transition",z:2,attrs:{".label":{fill:"#7a7e9b",text:"Reinigung"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:1032,y:360},angle:0,id:"a8940d72-5eff-49ae-98f3-ac64e086ff8d",jsonnetsType:"transition",z:3,attrs:{".label":{fill:"#7a7e9b",text:"Prfung"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:204,y:360},angle:0,tokens:1,id:"c49b0296-19cf-4857-90c0-3f93b638b877",jsonnetsType:"place",z:4,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Start"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:552,y:360},angle:0,tokens:0,id:"f1f4dfea-5277-4c6a-88f2-b76d3a12ce5d",jsonnetsType:"place",z:5,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p1"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:1248,y:360},angle:0,tokens:0,id:"cd4b6f24-d1b8-458d-815a-5dece4b147ac",jsonnetsType:"place",z:6,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Kamera"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:900,y:360},angle:0,tokens:0,id:"bd54b190-4747-4b82-a2b0-0b4851681059",jsonnetsType:"place",z:7,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p2"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"standard.Link",source:{id:"c49b0296-19cf-4857-90c0-3f93b638b877",selector:".root"},target:{id:"9ab06d0d-29d3-4580-bf44-8e36194e65f1",selector:".root"},id:"2fec368f-9bd4-41f2-bfb6-fd0901c9d325",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:8,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"9ab06d0d-29d3-4580-bf44-8e36194e65f1",selector:".root"},target:{id:"f1f4dfea-5277-4c6a-88f2-b76d3a12ce5d",selector:".root"},id:"03a523fd-aa6c-4f9e-aebc-b30acdb1dc04",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:9,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"f1f4dfea-5277-4c6a-88f2-b76d3a12ce5d",selector:".root"},target:{id:"7f9900f0-7d76-4067-b22e-391bdd91a101",selector:".root"},id:"6b836a80-ac07-4b53-b0ee-7367cb417425",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:10,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"7f9900f0-7d76-4067-b22e-391bdd91a101",selector:".root"},target:{id:"bd54b190-4747-4b82-a2b0-0b4851681059",selector:".root"},id:"3e4a241e-f6b4-49fd-963a-485682dee440",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:11,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"bd54b190-4747-4b82-a2b0-0b4851681059",selector:".root"},target:{id:"a8940d72-5eff-49ae-98f3-ac64e086ff8d",selector:".root"},id:"aee2a50a-3045-49ff-9a60-2a4bede9ba1d",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:12,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"a8940d72-5eff-49ae-98f3-ac64e086ff8d",selector:".root"},target:{id:"cd4b6f24-d1b8-458d-815a-5dece4b147ac",selector:".root"},id:"12e6cf18-84f2-41cd-bff2-1a211d93754d",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:13,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}}]}}},{name:"Chip",net:{typeData:{placeTypes:{"1ccfb8d3-f7b8-415c-acbb-87313e9241b3":"start","626ede19-6726-45bf-b355-341f3b2d290e":"control","c1f857bb-220a-4ea0-aa0e-82a8dae72243":"control","6437bc37-738c-4d32-8c31-5d21821116aa":"control","84c18531-ecc9-4595-a717-71ab141e17af":"control","4ce5f483-ed78-4c30-bd67-5f7f161541e7":"control","54473421-8f35-47de-b64a-bc7ae45a2ea6":"control","58d13880-c38c-4a0f-8a41-642bf69009e0":"control","74a6a016-cdc3-4a3f-833c-6561d5e8dc08":"control","0256c4d8-833a-4318-9d4b-9f1c1cd46565":"control","a6d0ebbc-4df6-4c67-bae7-a5b3f38b1454":"end","2c8c59c6-eddf-44c8-885c-f1434af4360c":"scope2"},transitionTypes:{"589f4456-a1c2-47b9-b8a9-7502d40447ad":"activity","00bf5b16-edf5-49aa-be39-5702f0657392":"activity","c4b7aad3-0472-4528-8324-95557d8a5f23":"activity","3388253a-bd47-4743-a84e-57e33bb2dd69":"activity","6649229c-dc74-49b3-81c4-16bcaf2df2de":"activity","7211dcc4-5212-4b32-b057-ea94869b20ee":"activity","9abe5df7-814c-4395-b25b-dd529fbf423f":"activity","09de952b-e9b9-484e-b277-ec53b1b18d8b":"activity","09a0982b-c37a-432b-9636-05548b0b683b":"activity","123cd5e5-f7f2-462f-8a2c-4b7d9a926b04":"activity"}},netData:{places:[{id:"1ccfb8d3-f7b8-415c-acbb-87313e9241b3",name:"Start",marking:[{amount:1,ghgFactor:0,scope:"start",pds:0}],schema:{type:"array",title:"start",maxItems:1,items:{type:"object"},$id:"1ccfb8d3-f7b8-415c-acbb-87313e9241b3"}},{id:"626ede19-6726-45bf-b355-341f3b2d290e",name:"p1",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"626ede19-6726-45bf-b355-341f3b2d290e"}},{id:"c1f857bb-220a-4ea0-aa0e-82a8dae72243",name:"p2",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"c1f857bb-220a-4ea0-aa0e-82a8dae72243"}},{id:"6437bc37-738c-4d32-8c31-5d21821116aa",name:"p3",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"6437bc37-738c-4d32-8c31-5d21821116aa"}},{id:"84c18531-ecc9-4595-a717-71ab141e17af",name:"p4",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"84c18531-ecc9-4595-a717-71ab141e17af"}},{id:"4ce5f483-ed78-4c30-bd67-5f7f161541e7",name:"p5",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"4ce5f483-ed78-4c30-bd67-5f7f161541e7"}},{id:"54473421-8f35-47de-b64a-bc7ae45a2ea6",name:"p6",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"54473421-8f35-47de-b64a-bc7ae45a2ea6"}},{id:"58d13880-c38c-4a0f-8a41-642bf69009e0",name:"p7",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"58d13880-c38c-4a0f-8a41-642bf69009e0"}},{id:"74a6a016-cdc3-4a3f-833c-6561d5e8dc08",name:"p8",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"74a6a016-cdc3-4a3f-833c-6561d5e8dc08"}},{id:"a6d0ebbc-4df6-4c67-bae7-a5b3f38b1454",name:"Chip",marking:[],schema:{type:"array",title:"end",maxItems:1,items:{type:"object"},$id:"a6d0ebbc-4df6-4c67-bae7-a5b3f38b1454"}},{id:"0256c4d8-833a-4318-9d4b-9f1c1cd46565",name:"p9",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"0256c4d8-833a-4318-9d4b-9f1c1cd46565"}}],transitions:[{id:"589f4456-a1c2-47b9-b8a9-7502d40447ad",name:"Lithografie",preface:`// calculations
// ghg factors in kg CO2e per g
local ghgFactors = { 'NF3': 13.4, 'SF6': 18.3, 'CF4': 5.3};
local calculateFootprint(component) = component.amount  * (if component.scope == 1 then (if component.unit == 'mg' then 0.001 else if component.unit == 'kg' then 1000 else 1) * ghgFactors[component.ghg] * component.scalingFactor else if component.scope == 2 then (if component.unit == 'Wh' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'g CO2e / kWh' then 0.001 else if component.ghgFactorUnit == 'mg CO2e / kWh' then 0.000001 else 1) * component.scalingFactor else if component.scope == 3 then (if component.unit == 'mg (Gewicht)' then 0.000001 else if component.unit == 'g (Gewicht)' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'mg CO2e / Stueck oder kg' then 0.000001 else if component.ghgFactorUnit == 'g CO2e / Stueck oder kg' then 0.001 else 1) * component.scalingFactor else component.ghgFactor) * Allokation / 100;
local individualFootprints = std.map(calculateFootprint,input_values);
// calculate Scope 1-Emissions
local generateScope1Contribution(index,element) = if (element.scope == 1) then { name: input_names[index], value: individualFootprints[index] };
local sum(arr, n) = if (n <= 0) then 0 else sum(arr, n-1) + arr[n-1];
local totalFootprint = sum(individualFootprints, std.length(individualFootprints));
local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;
local footprintShares = std.map(calculatePCFShare,individualFootprints);
local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;
local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));
local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));
// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != 'start') && (element.scope != 'control')) then { name: input_names[index], value: individualFootprints[index] };
local generateScope2Contribution(index,element) = if (element.scope == 2) then { name: input_names[index], value: individualFootprints[index] };
local generateScope3Contribution(index,element) = if (element.scope == 3) then { name: input_names[index], value: individualFootprints[index] };
local filterNull(element) = element != null;
local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));
// fetch contributions from incoming places
local filterControl(element) = element.scope == 'control';
local incomingControlPlaces = std.filter(filterControl, input_values);
local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions['1'];
local getScope2Contribution(element) = element.footprintContributions['2'];
local getScope3Contribution(element) = element.footprintContributions['3'];
local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));
local footprintContributions = { '1': incomingScope1Contributions + scope1FromThisTransition, '2': incomingScope2Contributions + scope2FromThisTransition,'3': incomingScope3Contributions + scope3FromThisTransition};
local scope1Contributions = incomingScope1Contributions + scope1FromThisTransition;
local scope2Contributions = incomingScope2Contributions + scope2FromThisTransition;
local scope3Contributions = incomingScope3Contributions + scope3FromThisTransition;
// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != 'control') && (input_values[index].scope != 'start') then { name: element }; local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));
local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];
//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };
local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));
local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;
// Visualisations:
local visualisations = [{
'type': 'number',
'unit': 'kg CO2e',
'description': 'THG-Fussabdruck',
'value': totalFootprint
},
{
'type': 'sunburst',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sunburst)',
'value': [
{
'name': 'Scope 1',
'children': scope1Contributions
},
{
'name': 'Scope 2',
'children': scope2Contributions
},
{
'name': 'Scope 3',
'children': scope3Contributions
}
]
}
,{
'type': 'sankey',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sankey)',
'value': {
'data': sankeyNodes,
'links': sankeyLinks
}
},
{
'type': 'number',
'unit': '%',
'description': 'Primrdatenanteil',
'value': outputPDS * 100
}];`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p1_key:"local output_p1_key = '-';"},fragmentVarSnippets:{output_p1_value:"local output_p1_value = { scope: 'control', ghgFactorUnit: 'kg CO2e / Stueck', ghgFactor: totalFootprint, amount: 1, unit: 'Stueck (Stueckzahl)', type: 'Primaerdaten', pds: outputPDS, footprintContributions: footprintContributions, sankeyNodes: sankeyNodes,sankeyLinks: sankeyLinks, nodeName: transition_name, '$visualisations': visualisations };"}},{id:"00bf5b16-edf5-49aa-be39-5702f0657392",name:"Dampfphasenabscheidung",preface:`// calculations
// ghg factors in kg CO2e per g
local ghgFactors = { 'NF3': 13.4, 'SF6': 18.3, 'CF4': 5.3};
local calculateFootprint(component) = component.amount  * (if component.scope == 1 then (if component.unit == 'mg' then 0.001 else if component.unit == 'kg' then 1000 else 1) * ghgFactors[component.ghg] * component.scalingFactor else if component.scope == 2 then (if component.unit == 'Wh' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'g CO2e / kWh' then 0.001 else if component.ghgFactorUnit == 'mg CO2e / kWh' then 0.000001 else 1) * component.scalingFactor else if component.scope == 3 then (if component.unit == 'mg (Gewicht)' then 0.000001 else if component.unit == 'g (Gewicht)' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'mg CO2e / Stueck oder kg' then 0.000001 else if component.ghgFactorUnit == 'g CO2e / Stueck oder kg' then 0.001 else 1) * component.scalingFactor else component.ghgFactor) * Allokation / 100;
local individualFootprints = std.map(calculateFootprint,input_values);
// calculate Scope 1-Emissions
local generateScope1Contribution(index,element) = if (element.scope == 1) then { name: input_names[index], value: individualFootprints[index] };
local sum(arr, n) = if (n <= 0) then 0 else sum(arr, n-1) + arr[n-1];
local totalFootprint = sum(individualFootprints, std.length(individualFootprints));
local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;
local footprintShares = std.map(calculatePCFShare,individualFootprints);
local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;
local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));
local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));
// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != 'start') && (element.scope != 'control')) then { name: input_names[index], value: individualFootprints[index] };
local generateScope2Contribution(index,element) = if (element.scope == 2) then { name: input_names[index], value: individualFootprints[index] };
local generateScope3Contribution(index,element) = if (element.scope == 3) then { name: input_names[index], value: individualFootprints[index] };
local filterNull(element) = element != null;
local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));
// fetch contributions from incoming places
local filterControl(element) = element.scope == 'control';
local incomingControlPlaces = std.filter(filterControl, input_values);
local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions['1'];
local getScope2Contribution(element) = element.footprintContributions['2'];
local getScope3Contribution(element) = element.footprintContributions['3'];
local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));
local footprintContributions = { '1': incomingScope1Contributions + scope1FromThisTransition, '2': incomingScope2Contributions + scope2FromThisTransition,'3': incomingScope3Contributions + scope3FromThisTransition};
local scope1Contributions = incomingScope1Contributions + scope1FromThisTransition;
local scope2Contributions = incomingScope2Contributions + scope2FromThisTransition;
local scope3Contributions = incomingScope3Contributions + scope3FromThisTransition;
// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != 'control') && (input_values[index].scope != 'start') then { name: element }; local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));
local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];
//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };
local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));
local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;
// Visualisations:
local visualisations = [{
'type': 'number',
'unit': 'kg CO2e',
'description': 'THG-Fussabdruck',
'value': totalFootprint
},
{
'type': 'sunburst',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sunburst)',
'value': [
{
'name': 'Scope 1',
'children': scope1Contributions
},
{
'name': 'Scope 2',
'children': scope2Contributions
},
{
'name': 'Scope 3',
'children': scope3Contributions
}
]
}
,{
'type': 'sankey',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sankey)',
'value': {
'data': sankeyNodes,
'links': sankeyLinks
}
},
{
'type': 'number',
'unit': '%',
'description': 'Primrdatenanteil',
'value': outputPDS * 100
}];`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p2_key:"local output_p2_key = '-';"},fragmentVarSnippets:{output_p2_value:"local output_p2_value = { scope: 'control', ghgFactorUnit: 'kg CO2e / Stueck', ghgFactor: totalFootprint, amount: 1, unit: 'Stueck (Stueckzahl)', type: 'Primaerdaten', pds: outputPDS, footprintContributions: footprintContributions, sankeyNodes: sankeyNodes,sankeyLinks: sankeyLinks, nodeName: transition_name, '$visualisations': visualisations };"}},{id:"c4b7aad3-0472-4528-8324-95557d8a5f23",name:"Epitaxie",preface:`// calculations
// ghg factors in kg CO2e per g
local ghgFactors = { 'NF3': 13.4, 'SF6': 18.3, 'CF4': 5.3};
local calculateFootprint(component) = component.amount  * (if component.scope == 1 then (if component.unit == 'mg' then 0.001 else if component.unit == 'kg' then 1000 else 1) * ghgFactors[component.ghg] * component.scalingFactor else if component.scope == 2 then (if component.unit == 'Wh' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'g CO2e / kWh' then 0.001 else if component.ghgFactorUnit == 'mg CO2e / kWh' then 0.000001 else 1) * component.scalingFactor else if component.scope == 3 then (if component.unit == 'mg (Gewicht)' then 0.000001 else if component.unit == 'g (Gewicht)' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'mg CO2e / Stueck oder kg' then 0.000001 else if component.ghgFactorUnit == 'g CO2e / Stueck oder kg' then 0.001 else 1) * component.scalingFactor else component.ghgFactor) * Allokation / 100;
local individualFootprints = std.map(calculateFootprint,input_values);
// calculate Scope 1-Emissions
local generateScope1Contribution(index,element) = if (element.scope == 1) then { name: input_names[index], value: individualFootprints[index] };
local sum(arr, n) = if (n <= 0) then 0 else sum(arr, n-1) + arr[n-1];
local totalFootprint = sum(individualFootprints, std.length(individualFootprints));
local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;
local footprintShares = std.map(calculatePCFShare,individualFootprints);
local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;
local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));
local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));
// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != 'start') && (element.scope != 'control')) then { name: input_names[index], value: individualFootprints[index] };
local generateScope2Contribution(index,element) = if (element.scope == 2) then { name: input_names[index], value: individualFootprints[index] };
local generateScope3Contribution(index,element) = if (element.scope == 3) then { name: input_names[index], value: individualFootprints[index] };
local filterNull(element) = element != null;
local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));
// fetch contributions from incoming places
local filterControl(element) = element.scope == 'control';
local incomingControlPlaces = std.filter(filterControl, input_values);
local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions['1'];
local getScope2Contribution(element) = element.footprintContributions['2'];
local getScope3Contribution(element) = element.footprintContributions['3'];
local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));
local footprintContributions = { '1': incomingScope1Contributions + scope1FromThisTransition, '2': incomingScope2Contributions + scope2FromThisTransition,'3': incomingScope3Contributions + scope3FromThisTransition};
local scope1Contributions = incomingScope1Contributions + scope1FromThisTransition;
local scope2Contributions = incomingScope2Contributions + scope2FromThisTransition;
local scope3Contributions = incomingScope3Contributions + scope3FromThisTransition;
// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != 'control') && (input_values[index].scope != 'start') then { name: element }; local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));
local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];
//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };
local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));
local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;
// Visualisations:
local visualisations = [{
'type': 'number',
'unit': 'kg CO2e',
'description': 'THG-Fussabdruck',
'value': totalFootprint
},
{
'type': 'sunburst',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sunburst)',
'value': [
{
'name': 'Scope 1',
'children': scope1Contributions
},
{
'name': 'Scope 2',
'children': scope2Contributions
},
{
'name': 'Scope 3',
'children': scope3Contributions
}
]
}
,{
'type': 'sankey',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sankey)',
'value': {
'data': sankeyNodes,
'links': sankeyLinks
}
},
{
'type': 'number',
'unit': '%',
'description': 'Primrdatenanteil',
'value': outputPDS * 100
}];`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p3_key:"local output_p3_key = '-';"},fragmentVarSnippets:{output_p3_value:"local output_p3_value = { scope: 'control', ghgFactorUnit: 'kg CO2e / Stueck', ghgFactor: totalFootprint, amount: 1, unit: 'Stueck (Stueckzahl)', type: 'Primaerdaten', pds: outputPDS, footprintContributions: footprintContributions, sankeyNodes: sankeyNodes,sankeyLinks: sankeyLinks, nodeName: transition_name, '$visualisations': visualisations };"}},{id:"3388253a-bd47-4743-a84e-57e33bb2dd69",name:"Dotieren",preface:`// calculations
// ghg factors in kg CO2e per g
local ghgFactors = { 'NF3': 13.4, 'SF6': 18.3, 'CF4': 5.3};
local calculateFootprint(component) = component.amount  * (if component.scope == 1 then (if component.unit == 'mg' then 0.001 else if component.unit == 'kg' then 1000 else 1) * ghgFactors[component.ghg] * component.scalingFactor else if component.scope == 2 then (if component.unit == 'Wh' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'g CO2e / kWh' then 0.001 else if component.ghgFactorUnit == 'mg CO2e / kWh' then 0.000001 else 1) * component.scalingFactor else if component.scope == 3 then (if component.unit == 'mg (Gewicht)' then 0.000001 else if component.unit == 'g (Gewicht)' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'mg CO2e / Stueck oder kg' then 0.000001 else if component.ghgFactorUnit == 'g CO2e / Stueck oder kg' then 0.001 else 1) * component.scalingFactor else component.ghgFactor) * Allokation / 100;
local individualFootprints = std.map(calculateFootprint,input_values);
// calculate Scope 1-Emissions
local generateScope1Contribution(index,element) = if (element.scope == 1) then { name: input_names[index], value: individualFootprints[index] };
local sum(arr, n) = if (n <= 0) then 0 else sum(arr, n-1) + arr[n-1];
local totalFootprint = sum(individualFootprints, std.length(individualFootprints));
local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;
local footprintShares = std.map(calculatePCFShare,individualFootprints);
local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;
local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));
local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));
// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != 'start') && (element.scope != 'control')) then { name: input_names[index], value: individualFootprints[index] };
local generateScope2Contribution(index,element) = if (element.scope == 2) then { name: input_names[index], value: individualFootprints[index] };
local generateScope3Contribution(index,element) = if (element.scope == 3) then { name: input_names[index], value: individualFootprints[index] };
local filterNull(element) = element != null;
local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));
// fetch contributions from incoming places
local filterControl(element) = element.scope == 'control';
local incomingControlPlaces = std.filter(filterControl, input_values);
local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions['1'];
local getScope2Contribution(element) = element.footprintContributions['2'];
local getScope3Contribution(element) = element.footprintContributions['3'];
local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));
local footprintContributions = { '1': incomingScope1Contributions + scope1FromThisTransition, '2': incomingScope2Contributions + scope2FromThisTransition,'3': incomingScope3Contributions + scope3FromThisTransition};
local scope1Contributions = incomingScope1Contributions + scope1FromThisTransition;
local scope2Contributions = incomingScope2Contributions + scope2FromThisTransition;
local scope3Contributions = incomingScope3Contributions + scope3FromThisTransition;
// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != 'control') && (input_values[index].scope != 'start') then { name: element }; local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));
local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];
//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };
local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));
local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;
// Visualisations:
local visualisations = [{
'type': 'number',
'unit': 'kg CO2e',
'description': 'THG-Fussabdruck',
'value': totalFootprint
},
{
'type': 'sunburst',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sunburst)',
'value': [
{
'name': 'Scope 1',
'children': scope1Contributions
},
{
'name': 'Scope 2',
'children': scope2Contributions
},
{
'name': 'Scope 3',
'children': scope3Contributions
}
]
}
,{
'type': 'sankey',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sankey)',
'value': {
'data': sankeyNodes,
'links': sankeyLinks
}
},
{
'type': 'number',
'unit': '%',
'description': 'Primrdatenanteil',
'value': outputPDS * 100
}];`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p4_key:"local output_p4_key = '-';"},fragmentVarSnippets:{output_p4_value:"local output_p4_value = { scope: 'control', ghgFactorUnit: 'kg CO2e / Stueck', ghgFactor: totalFootprint, amount: 1, unit: 'Stueck (Stueckzahl)', type: 'Primaerdaten', pds: outputPDS, footprintContributions: footprintContributions, sankeyNodes: sankeyNodes,sankeyLinks: sankeyLinks, nodeName: transition_name, '$visualisations': visualisations };"}},{id:"6649229c-dc74-49b3-81c4-16bcaf2df2de",name:"Diffussion",preface:`// calculations
// ghg factors in kg CO2e per g
local ghgFactors = { 'NF3': 13.4, 'SF6': 18.3, 'CF4': 5.3};
local calculateFootprint(component) = component.amount  * (if component.scope == 1 then (if component.unit == 'mg' then 0.001 else if component.unit == 'kg' then 1000 else 1) * ghgFactors[component.ghg] * component.scalingFactor else if component.scope == 2 then (if component.unit == 'Wh' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'g CO2e / kWh' then 0.001 else if component.ghgFactorUnit == 'mg CO2e / kWh' then 0.000001 else 1) * component.scalingFactor else if component.scope == 3 then (if component.unit == 'mg (Gewicht)' then 0.000001 else if component.unit == 'g (Gewicht)' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'mg CO2e / Stueck oder kg' then 0.000001 else if component.ghgFactorUnit == 'g CO2e / Stueck oder kg' then 0.001 else 1) * component.scalingFactor else component.ghgFactor) * Allokation / 100;
local individualFootprints = std.map(calculateFootprint,input_values);
// calculate Scope 1-Emissions
local generateScope1Contribution(index,element) = if (element.scope == 1) then { name: input_names[index], value: individualFootprints[index] };
local sum(arr, n) = if (n <= 0) then 0 else sum(arr, n-1) + arr[n-1];
local totalFootprint = sum(individualFootprints, std.length(individualFootprints));
local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;
local footprintShares = std.map(calculatePCFShare,individualFootprints);
local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;
local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));
local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));
// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != 'start') && (element.scope != 'control')) then { name: input_names[index], value: individualFootprints[index] };
local generateScope2Contribution(index,element) = if (element.scope == 2) then { name: input_names[index], value: individualFootprints[index] };
local generateScope3Contribution(index,element) = if (element.scope == 3) then { name: input_names[index], value: individualFootprints[index] };
local filterNull(element) = element != null;
local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));
// fetch contributions from incoming places
local filterControl(element) = element.scope == 'control';
local incomingControlPlaces = std.filter(filterControl, input_values);
local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions['1'];
local getScope2Contribution(element) = element.footprintContributions['2'];
local getScope3Contribution(element) = element.footprintContributions['3'];
local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));
local footprintContributions = { '1': incomingScope1Contributions + scope1FromThisTransition, '2': incomingScope2Contributions + scope2FromThisTransition,'3': incomingScope3Contributions + scope3FromThisTransition};
local scope1Contributions = incomingScope1Contributions + scope1FromThisTransition;
local scope2Contributions = incomingScope2Contributions + scope2FromThisTransition;
local scope3Contributions = incomingScope3Contributions + scope3FromThisTransition;
// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != 'control') && (input_values[index].scope != 'start') then { name: element }; local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));
local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];
//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };
local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));
local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;
// Visualisations:
local visualisations = [{
'type': 'number',
'unit': 'kg CO2e',
'description': 'THG-Fussabdruck',
'value': totalFootprint
},
{
'type': 'sunburst',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sunburst)',
'value': [
{
'name': 'Scope 1',
'children': scope1Contributions
},
{
'name': 'Scope 2',
'children': scope2Contributions
},
{
'name': 'Scope 3',
'children': scope3Contributions
}
]
}
,{
'type': 'sankey',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sankey)',
'value': {
'data': sankeyNodes,
'links': sankeyLinks
}
},
{
'type': 'number',
'unit': '%',
'description': 'Primrdatenanteil',
'value': outputPDS * 100
}];`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p5_key:"local output_p5_key = '-';"},fragmentVarSnippets:{output_p5_value:"local output_p5_value = { scope: 'control', ghgFactorUnit: 'kg CO2e / Stueck', ghgFactor: totalFootprint, amount: 1, unit: 'Stueck (Stueckzahl)', type: 'Primaerdaten', pds: outputPDS, footprintContributions: footprintContributions, sankeyNodes: sankeyNodes,sankeyLinks: sankeyLinks, nodeName: transition_name, '$visualisations': visualisations };"}},{id:"7211dcc4-5212-4b32-b057-ea94869b20ee",name:"Nassprozesse",preface:`// calculations
// ghg factors in kg CO2e per g
local ghgFactors = { 'NF3': 13.4, 'SF6': 18.3, 'CF4': 5.3};
local calculateFootprint(component) = component.amount  * (if component.scope == 1 then (if component.unit == 'mg' then 0.001 else if component.unit == 'kg' then 1000 else 1) * ghgFactors[component.ghg] * component.scalingFactor else if component.scope == 2 then (if component.unit == 'Wh' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'g CO2e / kWh' then 0.001 else if component.ghgFactorUnit == 'mg CO2e / kWh' then 0.000001 else 1) * component.scalingFactor else if component.scope == 3 then (if component.unit == 'mg (Gewicht)' then 0.000001 else if component.unit == 'g (Gewicht)' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'mg CO2e / Stueck oder kg' then 0.000001 else if component.ghgFactorUnit == 'g CO2e / Stueck oder kg' then 0.001 else 1) * component.scalingFactor else component.ghgFactor) * Allokation / 100;
local individualFootprints = std.map(calculateFootprint,input_values);
// calculate Scope 1-Emissions
local generateScope1Contribution(index,element) = if (element.scope == 1) then { name: input_names[index], value: individualFootprints[index] };
local sum(arr, n) = if (n <= 0) then 0 else sum(arr, n-1) + arr[n-1];
local totalFootprint = sum(individualFootprints, std.length(individualFootprints));
local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;
local footprintShares = std.map(calculatePCFShare,individualFootprints);
local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;
local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));
local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));
// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != 'start') && (element.scope != 'control')) then { name: input_names[index], value: individualFootprints[index] };
local generateScope2Contribution(index,element) = if (element.scope == 2) then { name: input_names[index], value: individualFootprints[index] };
local generateScope3Contribution(index,element) = if (element.scope == 3) then { name: input_names[index], value: individualFootprints[index] };
local filterNull(element) = element != null;
local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));
// fetch contributions from incoming places
local filterControl(element) = element.scope == 'control';
local incomingControlPlaces = std.filter(filterControl, input_values);
local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions['1'];
local getScope2Contribution(element) = element.footprintContributions['2'];
local getScope3Contribution(element) = element.footprintContributions['3'];
local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));
local footprintContributions = { '1': incomingScope1Contributions + scope1FromThisTransition, '2': incomingScope2Contributions + scope2FromThisTransition,'3': incomingScope3Contributions + scope3FromThisTransition};
local scope1Contributions = incomingScope1Contributions + scope1FromThisTransition;
local scope2Contributions = incomingScope2Contributions + scope2FromThisTransition;
local scope3Contributions = incomingScope3Contributions + scope3FromThisTransition;
// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != 'control') && (input_values[index].scope != 'start') then { name: element }; local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));
local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];
//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };
local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));
local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;
// Visualisations:
local visualisations = [{
'type': 'number',
'unit': 'kg CO2e',
'description': 'THG-Fussabdruck',
'value': totalFootprint
},
{
'type': 'sunburst',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sunburst)',
'value': [
{
'name': 'Scope 1',
'children': scope1Contributions
},
{
'name': 'Scope 2',
'children': scope2Contributions
},
{
'name': 'Scope 3',
'children': scope3Contributions
}
]
}
,{
'type': 'sankey',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sankey)',
'value': {
'data': sankeyNodes,
'links': sankeyLinks
}
},
{
'type': 'number',
'unit': '%',
'description': 'Primrdatenanteil',
'value': outputPDS * 100
}];`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p6_key:"local output_p6_key = '-';"},fragmentVarSnippets:{output_p6_value:"local output_p6_value = { scope: 'control', ghgFactorUnit: 'kg CO2e / Stueck', ghgFactor: totalFootprint, amount: 1, unit: 'Stueck (Stueckzahl)', type: 'Primaerdaten', pds: outputPDS, footprintContributions: footprintContributions, sankeyNodes: sankeyNodes,sankeyLinks: sankeyLinks, nodeName: transition_name, '$visualisations': visualisations };"}},{id:"9abe5df7-814c-4395-b25b-dd529fbf423f",name:"Trockentzen",preface:`// calculations
// ghg factors in kg CO2e per g
local ghgFactors = { 'NF3': 13.4, 'SF6': 18.3, 'CF4': 5.3};
local calculateFootprint(component) = component.amount  * (if component.scope == 1 then (if component.unit == 'mg' then 0.001 else if component.unit == 'kg' then 1000 else 1) * ghgFactors[component.ghg] * component.scalingFactor else if component.scope == 2 then (if component.unit == 'Wh' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'g CO2e / kWh' then 0.001 else if component.ghgFactorUnit == 'mg CO2e / kWh' then 0.000001 else 1) * component.scalingFactor else if component.scope == 3 then (if component.unit == 'mg (Gewicht)' then 0.000001 else if component.unit == 'g (Gewicht)' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'mg CO2e / Stueck oder kg' then 0.000001 else if component.ghgFactorUnit == 'g CO2e / Stueck oder kg' then 0.001 else 1) * component.scalingFactor else component.ghgFactor) * Allokation / 100;
local individualFootprints = std.map(calculateFootprint,input_values);
// calculate Scope 1-Emissions
local generateScope1Contribution(index,element) = if (element.scope == 1) then { name: input_names[index], value: individualFootprints[index] };
local sum(arr, n) = if (n <= 0) then 0 else sum(arr, n-1) + arr[n-1];
local totalFootprint = sum(individualFootprints, std.length(individualFootprints));
local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;
local footprintShares = std.map(calculatePCFShare,individualFootprints);
local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;
local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));
local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));
// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != 'start') && (element.scope != 'control')) then { name: input_names[index], value: individualFootprints[index] };
local generateScope2Contribution(index,element) = if (element.scope == 2) then { name: input_names[index], value: individualFootprints[index] };
local generateScope3Contribution(index,element) = if (element.scope == 3) then { name: input_names[index], value: individualFootprints[index] };
local filterNull(element) = element != null;
local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));
// fetch contributions from incoming places
local filterControl(element) = element.scope == 'control';
local incomingControlPlaces = std.filter(filterControl, input_values);
local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions['1'];
local getScope2Contribution(element) = element.footprintContributions['2'];
local getScope3Contribution(element) = element.footprintContributions['3'];
local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));
local footprintContributions = { '1': incomingScope1Contributions + scope1FromThisTransition, '2': incomingScope2Contributions + scope2FromThisTransition,'3': incomingScope3Contributions + scope3FromThisTransition};
local scope1Contributions = incomingScope1Contributions + scope1FromThisTransition;
local scope2Contributions = incomingScope2Contributions + scope2FromThisTransition;
local scope3Contributions = incomingScope3Contributions + scope3FromThisTransition;
// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != 'control') && (input_values[index].scope != 'start') then { name: element }; local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));
local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];
//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };
local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));
local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;
// Visualisations:
local visualisations = [{
'type': 'number',
'unit': 'kg CO2e',
'description': 'THG-Fussabdruck',
'value': totalFootprint
},
{
'type': 'sunburst',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sunburst)',
'value': [
{
'name': 'Scope 1',
'children': scope1Contributions
},
{
'name': 'Scope 2',
'children': scope2Contributions
},
{
'name': 'Scope 3',
'children': scope3Contributions
}
]
}
,{
'type': 'sankey',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sankey)',
'value': {
'data': sankeyNodes,
'links': sankeyLinks
}
},
{
'type': 'number',
'unit': '%',
'description': 'Primrdatenanteil',
'value': outputPDS * 100
}];`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p7_key:"local output_p7_key = '-';"},fragmentVarSnippets:{output_p7_value:"local output_p7_value = { scope: 'control', ghgFactorUnit: 'kg CO2e / Stueck', ghgFactor: totalFootprint, amount: 1, unit: 'Stueck (Stueckzahl)', type: 'Primaerdaten', pds: outputPDS, footprintContributions: footprintContributions, sankeyNodes: sankeyNodes,sankeyLinks: sankeyLinks, nodeName: transition_name, '$visualisations': visualisations };"}},{id:"09de952b-e9b9-484e-b277-ec53b1b18d8b",name:"Beschichten",preface:`// calculations
// ghg factors in kg CO2e per g
local ghgFactors = { 'NF3': 13.4, 'SF6': 18.3, 'CF4': 5.3};
local calculateFootprint(component) = component.amount  * (if component.scope == 1 then (if component.unit == 'mg' then 0.001 else if component.unit == 'kg' then 1000 else 1) * ghgFactors[component.ghg] * component.scalingFactor else if component.scope == 2 then (if component.unit == 'Wh' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'g CO2e / kWh' then 0.001 else if component.ghgFactorUnit == 'mg CO2e / kWh' then 0.000001 else 1) * component.scalingFactor else if component.scope == 3 then (if component.unit == 'mg (Gewicht)' then 0.000001 else if component.unit == 'g (Gewicht)' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'mg CO2e / Stueck oder kg' then 0.000001 else if component.ghgFactorUnit == 'g CO2e / Stueck oder kg' then 0.001 else 1) * component.scalingFactor else component.ghgFactor) * Allokation / 100;
local individualFootprints = std.map(calculateFootprint,input_values);
// calculate Scope 1-Emissions
local generateScope1Contribution(index,element) = if (element.scope == 1) then { name: input_names[index], value: individualFootprints[index] };
local sum(arr, n) = if (n <= 0) then 0 else sum(arr, n-1) + arr[n-1];
local totalFootprint = sum(individualFootprints, std.length(individualFootprints));
local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;
local footprintShares = std.map(calculatePCFShare,individualFootprints);
local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;
local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));
local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));
// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != 'start') && (element.scope != 'control')) then { name: input_names[index], value: individualFootprints[index] };
local generateScope2Contribution(index,element) = if (element.scope == 2) then { name: input_names[index], value: individualFootprints[index] };
local generateScope3Contribution(index,element) = if (element.scope == 3) then { name: input_names[index], value: individualFootprints[index] };
local filterNull(element) = element != null;
local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));
// fetch contributions from incoming places
local filterControl(element) = element.scope == 'control';
local incomingControlPlaces = std.filter(filterControl, input_values);
local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions['1'];
local getScope2Contribution(element) = element.footprintContributions['2'];
local getScope3Contribution(element) = element.footprintContributions['3'];
local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));
local footprintContributions = { '1': incomingScope1Contributions + scope1FromThisTransition, '2': incomingScope2Contributions + scope2FromThisTransition,'3': incomingScope3Contributions + scope3FromThisTransition};
local scope1Contributions = incomingScope1Contributions + scope1FromThisTransition;
local scope2Contributions = incomingScope2Contributions + scope2FromThisTransition;
local scope3Contributions = incomingScope3Contributions + scope3FromThisTransition;
// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != 'control') && (input_values[index].scope != 'start') then { name: element }; local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));
local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];
//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };
local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));
local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;
// Visualisations:
local visualisations = [{
'type': 'number',
'unit': 'kg CO2e',
'description': 'THG-Fussabdruck',
'value': totalFootprint
},
{
'type': 'sunburst',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sunburst)',
'value': [
{
'name': 'Scope 1',
'children': scope1Contributions
},
{
'name': 'Scope 2',
'children': scope2Contributions
},
{
'name': 'Scope 3',
'children': scope3Contributions
}
]
}
,{
'type': 'sankey',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sankey)',
'value': {
'data': sankeyNodes,
'links': sankeyLinks
}
},
{
'type': 'number',
'unit': '%',
'description': 'Primrdatenanteil',
'value': outputPDS * 100
}];`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p8_key:"local output_p8_key = '-';"},fragmentVarSnippets:{output_p8_value:"local output_p8_value = { scope: 'control', ghgFactorUnit: 'kg CO2e / Stueck', ghgFactor: totalFootprint, amount: 1, unit: 'Stueck (Stueckzahl)', type: 'Primaerdaten', pds: outputPDS, footprintContributions: footprintContributions, sankeyNodes: sankeyNodes,sankeyLinks: sankeyLinks, nodeName: transition_name, '$visualisations': visualisations };"}},{id:"09a0982b-c37a-432b-9636-05548b0b683b",name:"Polieren",preface:`// calculations
// ghg factors in kg CO2e per g
local ghgFactors = { 'NF3': 13.4, 'SF6': 18.3, 'CF4': 5.3};
local calculateFootprint(component) = component.amount  * (if component.scope == 1 then (if component.unit == 'mg' then 0.001 else if component.unit == 'kg' then 1000 else 1) * ghgFactors[component.ghg] * component.scalingFactor else if component.scope == 2 then (if component.unit == 'Wh' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'g CO2e / kWh' then 0.001 else if component.ghgFactorUnit == 'mg CO2e / kWh' then 0.000001 else 1) * component.scalingFactor else if component.scope == 3 then (if component.unit == 'mg (Gewicht)' then 0.000001 else if component.unit == 'g (Gewicht)' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'mg CO2e / Stueck oder kg' then 0.000001 else if component.ghgFactorUnit == 'g CO2e / Stueck oder kg' then 0.001 else 1) * component.scalingFactor else component.ghgFactor) * Allokation / 100;
local individualFootprints = std.map(calculateFootprint,input_values);
// calculate Scope 1-Emissions
local generateScope1Contribution(index,element) = if (element.scope == 1) then { name: input_names[index], value: individualFootprints[index] };
local sum(arr, n) = if (n <= 0) then 0 else sum(arr, n-1) + arr[n-1];
local totalFootprint = sum(individualFootprints, std.length(individualFootprints));
local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;
local footprintShares = std.map(calculatePCFShare,individualFootprints);
local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;
local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));
local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));
// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != 'start') && (element.scope != 'control')) then { name: input_names[index], value: individualFootprints[index] };
local generateScope2Contribution(index,element) = if (element.scope == 2) then { name: input_names[index], value: individualFootprints[index] };
local generateScope3Contribution(index,element) = if (element.scope == 3) then { name: input_names[index], value: individualFootprints[index] };
local filterNull(element) = element != null;
local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));
// fetch contributions from incoming places
local filterControl(element) = element.scope == 'control';
local incomingControlPlaces = std.filter(filterControl, input_values);
local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions['1'];
local getScope2Contribution(element) = element.footprintContributions['2'];
local getScope3Contribution(element) = element.footprintContributions['3'];
local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));
local footprintContributions = { '1': incomingScope1Contributions + scope1FromThisTransition, '2': incomingScope2Contributions + scope2FromThisTransition,'3': incomingScope3Contributions + scope3FromThisTransition};
local scope1Contributions = incomingScope1Contributions + scope1FromThisTransition;
local scope2Contributions = incomingScope2Contributions + scope2FromThisTransition;
local scope3Contributions = incomingScope3Contributions + scope3FromThisTransition;
// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != 'control') && (input_values[index].scope != 'start') then { name: element }; local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));
local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];
//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };
local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));
local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;
// Visualisations:
local visualisations = [{
'type': 'number',
'unit': 'kg CO2e',
'description': 'THG-Fussabdruck',
'value': totalFootprint
},
{
'type': 'sunburst',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sunburst)',
'value': [
{
'name': 'Scope 1',
'children': scope1Contributions
},
{
'name': 'Scope 2',
'children': scope2Contributions
},
{
'name': 'Scope 3',
'children': scope3Contributions
}
]
}
,{
'type': 'sankey',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sankey)',
'value': {
'data': sankeyNodes,
'links': sankeyLinks
}
},
{
'type': 'number',
'unit': '%',
'description': 'Primrdatenanteil',
'value': outputPDS * 100
}];`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p9_key:"local output_p9_key = '-';"},fragmentVarSnippets:{output_p9_value:"local output_p9_value = { scope: 'control', ghgFactorUnit: 'kg CO2e / Stueck', ghgFactor: totalFootprint, amount: 1, unit: 'Stueck (Stueckzahl)', type: 'Primaerdaten', pds: outputPDS, footprintContributions: footprintContributions, sankeyNodes: sankeyNodes,sankeyLinks: sankeyLinks, nodeName: transition_name, '$visualisations': visualisations };"}},{id:"123cd5e5-f7f2-462f-8a2c-4b7d9a926b04",name:"Metrologie",preface:`// calculations
// ghg factors in kg CO2e per g
local ghgFactors = { 'NF3': 13.4, 'SF6': 18.3, 'CF4': 5.3};
local calculateFootprint(component) = component.amount  * (if component.scope == 1 then (if component.unit == 'mg' then 0.001 else if component.unit == 'kg' then 1000 else 1) * ghgFactors[component.ghg] * component.scalingFactor else if component.scope == 2 then (if component.unit == 'Wh' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'g CO2e / kWh' then 0.001 else if component.ghgFactorUnit == 'mg CO2e / kWh' then 0.000001 else 1) * component.scalingFactor else if component.scope == 3 then (if component.unit == 'mg (Gewicht)' then 0.000001 else if component.unit == 'g (Gewicht)' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'mg CO2e / Stueck oder kg' then 0.000001 else if component.ghgFactorUnit == 'g CO2e / Stueck oder kg' then 0.001 else 1) * component.scalingFactor else component.ghgFactor) * Allokation / 100;
local individualFootprints = std.map(calculateFootprint,input_values);
// calculate Scope 1-Emissions
local generateScope1Contribution(index,element) = if (element.scope == 1) then { name: input_names[index], value: individualFootprints[index] };
local sum(arr, n) = if (n <= 0) then 0 else sum(arr, n-1) + arr[n-1];
local totalFootprint = sum(individualFootprints, std.length(individualFootprints));
local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;
local footprintShares = std.map(calculatePCFShare,individualFootprints);
local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;
local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));
local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));
// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != 'start') && (element.scope != 'control')) then { name: input_names[index], value: individualFootprints[index] };
local generateScope2Contribution(index,element) = if (element.scope == 2) then { name: input_names[index], value: individualFootprints[index] };
local generateScope3Contribution(index,element) = if (element.scope == 3) then { name: input_names[index], value: individualFootprints[index] };
local filterNull(element) = element != null;
local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));
// fetch contributions from incoming places
local filterControl(element) = element.scope == 'control';
local incomingControlPlaces = std.filter(filterControl, input_values);
local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions['1'];
local getScope2Contribution(element) = element.footprintContributions['2'];
local getScope3Contribution(element) = element.footprintContributions['3'];
local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));
local footprintContributions = { '1': incomingScope1Contributions + scope1FromThisTransition, '2': incomingScope2Contributions + scope2FromThisTransition,'3': incomingScope3Contributions + scope3FromThisTransition};
local scope1Contributions = incomingScope1Contributions + scope1FromThisTransition;
local scope2Contributions = incomingScope2Contributions + scope2FromThisTransition;
local scope3Contributions = incomingScope3Contributions + scope3FromThisTransition;
// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != 'control') && (input_values[index].scope != 'start') then { name: element }; local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));
local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];
//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };
local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));
local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;
// Visualisations:
local visualisations = [{
'type': 'number',
'unit': 'kg CO2e',
'description': 'THG-Fussabdruck',
'value': totalFootprint
},
{
'type': 'sunburst',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sunburst)',
'value': [
{
'name': 'Scope 1',
'children': scope1Contributions
},
{
'name': 'Scope 2',
'children': scope2Contributions
},
{
'name': 'Scope 3',
'children': scope3Contributions
}
]
}
,{
'type': 'sankey',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sankey)',
'value': {
'data': sankeyNodes,
'links': sankeyLinks
}
},
{
'type': 'number',
'unit': '%',
'description': 'Primrdatenanteil',
'value': outputPDS * 100
}];`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_chip_key:"local output_chip_key = '-';"},fragmentVarSnippets:{output_chip_value:"local output_chip_value = { scope: 'control', ghgFactorUnit: 'kg CO2e / Stueck', ghgFactor: totalFootprint, amount: 1, unit: 'Stueck (Stueckzahl)', type: 'Primaerdaten', pds: outputPDS, footprintContributions: footprintContributions, sankeyNodes: sankeyNodes,sankeyLinks: sankeyLinks, nodeName: transition_name, '$visualisations': visualisations };"}}],arcs:[{id:"1db9e399-2f4c-40df-8525-967520f257f5",filter:"$.*",fromId:"1ccfb8d3-f7b8-415c-acbb-87313e9241b3",toId:"589f4456-a1c2-47b9-b8a9-7502d40447ad"},{id:"1306fd03-766e-4c1e-accb-c2744e221301",filter:"$",fromId:"589f4456-a1c2-47b9-b8a9-7502d40447ad",toId:"626ede19-6726-45bf-b355-341f3b2d290e"},{id:"57c342a1-36ff-4b82-8fa7-fc7bc502434c",filter:"$.*",fromId:"626ede19-6726-45bf-b355-341f3b2d290e",toId:"00bf5b16-edf5-49aa-be39-5702f0657392"},{id:"54f08425-a3d5-4ab4-8b1d-bc51f5a43d73",filter:"$",fromId:"00bf5b16-edf5-49aa-be39-5702f0657392",toId:"c1f857bb-220a-4ea0-aa0e-82a8dae72243"},{id:"b0056d56-4888-40a2-8bd6-1c8cf904c29b",filter:"$.*",fromId:"c1f857bb-220a-4ea0-aa0e-82a8dae72243",toId:"c4b7aad3-0472-4528-8324-95557d8a5f23"},{id:"e1a943b2-fee8-4961-a41d-b95ba022528a",filter:"$",fromId:"c4b7aad3-0472-4528-8324-95557d8a5f23",toId:"6437bc37-738c-4d32-8c31-5d21821116aa"},{id:"bcc337af-901d-4735-b740-43b57acd8c95",filter:"$.*",fromId:"6437bc37-738c-4d32-8c31-5d21821116aa",toId:"3388253a-bd47-4743-a84e-57e33bb2dd69"},{id:"dd535a8f-7a85-4e11-9b38-adf4c307a796",filter:"$",fromId:"3388253a-bd47-4743-a84e-57e33bb2dd69",toId:"84c18531-ecc9-4595-a717-71ab141e17af"},{id:"5abc56e8-3e3e-49d1-b0b3-673eea0dd027",filter:"$.*",fromId:"84c18531-ecc9-4595-a717-71ab141e17af",toId:"6649229c-dc74-49b3-81c4-16bcaf2df2de"},{id:"692a6008-670c-4415-917f-c78b426f47f9",filter:"$",fromId:"6649229c-dc74-49b3-81c4-16bcaf2df2de",toId:"4ce5f483-ed78-4c30-bd67-5f7f161541e7"},{id:"ddc6e979-4c04-413a-b98f-99b61337c44d",filter:"$.*",fromId:"4ce5f483-ed78-4c30-bd67-5f7f161541e7",toId:"7211dcc4-5212-4b32-b057-ea94869b20ee"},{id:"d312cb51-db72-4c88-9e30-a9d0c60b5dfe",filter:"$",fromId:"7211dcc4-5212-4b32-b057-ea94869b20ee",toId:"54473421-8f35-47de-b64a-bc7ae45a2ea6"},{id:"8b54b8a8-f2bb-404d-953f-307d33f4af07",filter:"$.*",fromId:"54473421-8f35-47de-b64a-bc7ae45a2ea6",toId:"9abe5df7-814c-4395-b25b-dd529fbf423f"},{id:"493716c2-ac90-48b0-abd3-48abbdedf7b4",filter:"$",fromId:"9abe5df7-814c-4395-b25b-dd529fbf423f",toId:"58d13880-c38c-4a0f-8a41-642bf69009e0"},{id:"739a7280-ff27-440b-acd4-5e184f257175",filter:"$.*",fromId:"58d13880-c38c-4a0f-8a41-642bf69009e0",toId:"09de952b-e9b9-484e-b277-ec53b1b18d8b"},{id:"5e830217-0bbe-4cad-b36c-05405fc6282c",filter:"$",fromId:"09de952b-e9b9-484e-b277-ec53b1b18d8b",toId:"74a6a016-cdc3-4a3f-833c-6561d5e8dc08"},{id:"de186182-5c9b-4eb2-ac70-af87d3e90b32",filter:"$.*",fromId:"74a6a016-cdc3-4a3f-833c-6561d5e8dc08",toId:"09a0982b-c37a-432b-9636-05548b0b683b"},{id:"86640be4-3672-466a-9934-4c65d64f4087",filter:"$",fromId:"09a0982b-c37a-432b-9636-05548b0b683b",toId:"0256c4d8-833a-4318-9d4b-9f1c1cd46565"},{id:"65494ab6-bacb-419c-973a-23adb0b630c2",filter:"$.*",fromId:"0256c4d8-833a-4318-9d4b-9f1c1cd46565",toId:"123cd5e5-f7f2-462f-8a2c-4b7d9a926b04"},{id:"45fd2474-4e75-4548-83c4-6d14be8e3c97",filter:"$",fromId:"123cd5e5-f7f2-462f-8a2c-4b7d9a926b04",toId:"a6d0ebbc-4df6-4c67-bae7-a5b3f38b1454"}]},layoutData:{cells:[{type:"pn.Transition",size:{width:100,height:50},position:{x:288,y:300},angle:0,id:"589f4456-a1c2-47b9-b8a9-7502d40447ad",jsonnetsType:"transition",z:1,attrs:{".label":{fill:"#7a7e9b",text:"Lithografie"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:708,y:300},angle:0,id:"00bf5b16-edf5-49aa-be39-5702f0657392",jsonnetsType:"transition",z:2,attrs:{".label":{fill:"#7a7e9b",text:"Dampfphasenabscheidung"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:1104,y:300},angle:0,id:"c4b7aad3-0472-4528-8324-95557d8a5f23",jsonnetsType:"transition",z:3,attrs:{".label":{fill:"#7a7e9b",text:"Epitaxie"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:1308,y:444},angle:0,id:"3388253a-bd47-4743-a84e-57e33bb2dd69",jsonnetsType:"transition",z:4,attrs:{".label":{fill:"#7a7e9b",text:"Dotieren"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:1104,y:600},angle:0,id:"6649229c-dc74-49b3-81c4-16bcaf2df2de",jsonnetsType:"transition",z:5,attrs:{".label":{fill:"#7a7e9b",text:"Diffussion"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:708,y:600},angle:0,id:"7211dcc4-5212-4b32-b057-ea94869b20ee",jsonnetsType:"transition",z:6,attrs:{".label":{fill:"#7a7e9b",text:"Nassprozesse"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:288,y:600},angle:0,id:"9abe5df7-814c-4395-b25b-dd529fbf423f",jsonnetsType:"transition",z:7,attrs:{".label":{fill:"#7a7e9b",text:"Trockentzen"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:84,y:744},angle:0,id:"09de952b-e9b9-484e-b277-ec53b1b18d8b",jsonnetsType:"transition",z:8,attrs:{".label":{fill:"#7a7e9b",text:"Beschichten"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:276,y:876},angle:0,id:"09a0982b-c37a-432b-9636-05548b0b683b",jsonnetsType:"transition",z:9,attrs:{".label":{fill:"#7a7e9b",text:"Polieren"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:720,y:876},angle:0,id:"123cd5e5-f7f2-462f-8a2c-4b7d9a926b04",jsonnetsType:"transition",z:10,attrs:{".label":{fill:"#7a7e9b",text:"Metrologie"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:96,y:300},angle:0,tokens:1,id:"1ccfb8d3-f7b8-415c-acbb-87313e9241b3",jsonnetsType:"place",z:11,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Start"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:528,y:300},angle:0,tokens:0,id:"626ede19-6726-45bf-b355-341f3b2d290e",jsonnetsType:"place",z:12,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p1"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:947,y:299},angle:0,tokens:0,id:"c1f857bb-220a-4ea0-aa0e-82a8dae72243",jsonnetsType:"place",z:13,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p2"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:1332,y:300},angle:0,tokens:0,id:"6437bc37-738c-4d32-8c31-5d21821116aa",jsonnetsType:"place",z:14,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p3"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:1332,y:600},angle:0,tokens:0,id:"84c18531-ecc9-4595-a717-71ab141e17af",jsonnetsType:"place",z:15,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p4"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:948,y:600},angle:0,tokens:0,id:"4ce5f483-ed78-4c30-bd67-5f7f161541e7",jsonnetsType:"place",z:16,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p5"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:516,y:600},angle:0,tokens:0,id:"54473421-8f35-47de-b64a-bc7ae45a2ea6",jsonnetsType:"place",z:17,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p6"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:108,y:600},angle:0,tokens:0,id:"58d13880-c38c-4a0f-8a41-642bf69009e0",jsonnetsType:"place",z:18,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p7"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:108,y:876},angle:0,tokens:0,id:"74a6a016-cdc3-4a3f-833c-6561d5e8dc08",jsonnetsType:"place",z:19,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p8"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:960,y:876},angle:0,tokens:0,id:"a6d0ebbc-4df6-4c67-bae7-a5b3f38b1454",jsonnetsType:"place",z:20,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Chip"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:504,y:876},angle:0,tokens:0,id:"0256c4d8-833a-4318-9d4b-9f1c1cd46565",jsonnetsType:"place",z:21,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p9"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"standard.Link",source:{id:"1ccfb8d3-f7b8-415c-acbb-87313e9241b3",selector:".root"},target:{id:"589f4456-a1c2-47b9-b8a9-7502d40447ad",selector:".root"},id:"1db9e399-2f4c-40df-8525-967520f257f5",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:22,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"589f4456-a1c2-47b9-b8a9-7502d40447ad",selector:".root"},target:{id:"626ede19-6726-45bf-b355-341f3b2d290e",selector:".root"},id:"1306fd03-766e-4c1e-accb-c2744e221301",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:23,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"626ede19-6726-45bf-b355-341f3b2d290e",selector:".root"},target:{id:"00bf5b16-edf5-49aa-be39-5702f0657392",selector:".root"},id:"57c342a1-36ff-4b82-8fa7-fc7bc502434c",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:24,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"00bf5b16-edf5-49aa-be39-5702f0657392",selector:".root"},target:{id:"c1f857bb-220a-4ea0-aa0e-82a8dae72243",selector:".root"},id:"54f08425-a3d5-4ab4-8b1d-bc51f5a43d73",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:25,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"c1f857bb-220a-4ea0-aa0e-82a8dae72243",selector:".root"},target:{id:"c4b7aad3-0472-4528-8324-95557d8a5f23",selector:".root"},id:"b0056d56-4888-40a2-8bd6-1c8cf904c29b",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:26,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"c4b7aad3-0472-4528-8324-95557d8a5f23",selector:".root"},target:{id:"6437bc37-738c-4d32-8c31-5d21821116aa",selector:".root"},id:"e1a943b2-fee8-4961-a41d-b95ba022528a",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:27,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"6437bc37-738c-4d32-8c31-5d21821116aa",selector:".root"},target:{id:"3388253a-bd47-4743-a84e-57e33bb2dd69",selector:".root"},id:"bcc337af-901d-4735-b740-43b57acd8c95",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:28,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"3388253a-bd47-4743-a84e-57e33bb2dd69",selector:".root"},target:{id:"84c18531-ecc9-4595-a717-71ab141e17af",selector:".root"},id:"dd535a8f-7a85-4e11-9b38-adf4c307a796",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:29,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"84c18531-ecc9-4595-a717-71ab141e17af",selector:".root"},target:{id:"6649229c-dc74-49b3-81c4-16bcaf2df2de",selector:".root"},id:"5abc56e8-3e3e-49d1-b0b3-673eea0dd027",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:30,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"6649229c-dc74-49b3-81c4-16bcaf2df2de",selector:".root"},target:{id:"4ce5f483-ed78-4c30-bd67-5f7f161541e7",selector:".root"},id:"692a6008-670c-4415-917f-c78b426f47f9",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:31,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"4ce5f483-ed78-4c30-bd67-5f7f161541e7",selector:".root"},target:{id:"7211dcc4-5212-4b32-b057-ea94869b20ee",selector:".root"},id:"ddc6e979-4c04-413a-b98f-99b61337c44d",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:32,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"7211dcc4-5212-4b32-b057-ea94869b20ee",selector:".root"},target:{id:"54473421-8f35-47de-b64a-bc7ae45a2ea6",selector:".root"},id:"d312cb51-db72-4c88-9e30-a9d0c60b5dfe",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:33,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"54473421-8f35-47de-b64a-bc7ae45a2ea6",selector:".root"},target:{id:"9abe5df7-814c-4395-b25b-dd529fbf423f",selector:".root"},id:"8b54b8a8-f2bb-404d-953f-307d33f4af07",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:34,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"9abe5df7-814c-4395-b25b-dd529fbf423f",selector:".root"},target:{id:"58d13880-c38c-4a0f-8a41-642bf69009e0",selector:".root"},id:"493716c2-ac90-48b0-abd3-48abbdedf7b4",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:35,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"58d13880-c38c-4a0f-8a41-642bf69009e0",selector:".root"},target:{id:"09de952b-e9b9-484e-b277-ec53b1b18d8b",selector:".root"},id:"739a7280-ff27-440b-acd4-5e184f257175",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:36,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"09de952b-e9b9-484e-b277-ec53b1b18d8b",selector:".root"},target:{id:"74a6a016-cdc3-4a3f-833c-6561d5e8dc08",selector:".root"},id:"5e830217-0bbe-4cad-b36c-05405fc6282c",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:37,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"74a6a016-cdc3-4a3f-833c-6561d5e8dc08",selector:".root"},target:{id:"09a0982b-c37a-432b-9636-05548b0b683b",selector:".root"},id:"de186182-5c9b-4eb2-ac70-af87d3e90b32",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:38,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"09a0982b-c37a-432b-9636-05548b0b683b",selector:".root"},target:{id:"0256c4d8-833a-4318-9d4b-9f1c1cd46565",selector:".root"},id:"86640be4-3672-466a-9934-4c65d64f4087",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:39,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"0256c4d8-833a-4318-9d4b-9f1c1cd46565",selector:".root"},target:{id:"123cd5e5-f7f2-462f-8a2c-4b7d9a926b04",selector:".root"},id:"65494ab6-bacb-419c-973a-23adb0b630c2",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:40,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"123cd5e5-f7f2-462f-8a2c-4b7d9a926b04",selector:".root"},target:{id:"a6d0ebbc-4df6-4c67-bae7-a5b3f38b1454",selector:".root"},id:"45fd2474-4e75-4548-83c4-6d14be8e3c97",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:41,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}}]}}},{name:"Anschluss",net:{typeData:{placeTypes:{"167bbbd6-95ec-4fd6-be40-26c1a487f170":"start","834fca4a-9079-417a-8768-afd52bcc0c94":"end","77993295-6870-418a-bd0d-b145e603292f":"control","2f69a08e-2351-4bdf-84d7-564928a829aa":"control"},transitionTypes:{"67438c44-8f16-41b3-ac44-0438014633c0":"activity","e6d19788-6dec-476e-a333-14397384d651":"activity","480049a0-4dbe-4f96-b7fc-2fdd039ed064":"activity"}},netData:{places:[{id:"167bbbd6-95ec-4fd6-be40-26c1a487f170",name:"Start",marking:[{amount:1,ghgFactor:0,scope:"start",pds:0}],schema:{type:"array",title:"start",maxItems:1,items:{type:"object"},$id:"167bbbd6-95ec-4fd6-be40-26c1a487f170"}},{id:"77993295-6870-418a-bd0d-b145e603292f",name:"p1",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"77993295-6870-418a-bd0d-b145e603292f"}},{id:"2f69a08e-2351-4bdf-84d7-564928a829aa",name:"p2",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"2f69a08e-2351-4bdf-84d7-564928a829aa"}},{id:"834fca4a-9079-417a-8768-afd52bcc0c94",name:"Kameraanschluss",marking:[],schema:{type:"array",title:"end",maxItems:1,items:{type:"object"},$id:"834fca4a-9079-417a-8768-afd52bcc0c94"}}],transitions:[{id:"67438c44-8f16-41b3-ac44-0438014633c0",name:"Reinigen",preface:`// calculations
// ghg factors in kg CO2e per g
local ghgFactors = { 'NF3': 13.4, 'SF6': 18.3, 'CF4': 5.3};
local calculateFootprint(component) = component.amount  * (if component.scope == 1 then (if component.unit == 'mg' then 0.001 else if component.unit == 'kg' then 1000 else 1) * ghgFactors[component.ghg] * component.scalingFactor else if component.scope == 2 then (if component.unit == 'Wh' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'g CO2e / kWh' then 0.001 else if component.ghgFactorUnit == 'mg CO2e / kWh' then 0.000001 else 1) * component.scalingFactor else if component.scope == 3 then (if component.unit == 'mg (Gewicht)' then 0.000001 else if component.unit == 'g (Gewicht)' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'mg CO2e / Stueck oder kg' then 0.000001 else if component.ghgFactorUnit == 'g CO2e / Stueck oder kg' then 0.001 else 1) * component.scalingFactor else component.ghgFactor) * Allokation / 100;
local individualFootprints = std.map(calculateFootprint,input_values);
// calculate Scope 1-Emissions
local generateScope1Contribution(index,element) = if (element.scope == 1) then { name: input_names[index], value: individualFootprints[index] };
local sum(arr, n) = if (n <= 0) then 0 else sum(arr, n-1) + arr[n-1];
local totalFootprint = sum(individualFootprints, std.length(individualFootprints));
local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;
local footprintShares = std.map(calculatePCFShare,individualFootprints);
local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;
local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));
local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));
// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != 'start') && (element.scope != 'control')) then { name: input_names[index], value: individualFootprints[index] };
local generateScope2Contribution(index,element) = if (element.scope == 2) then { name: input_names[index], value: individualFootprints[index] };
local generateScope3Contribution(index,element) = if (element.scope == 3) then { name: input_names[index], value: individualFootprints[index] };
local filterNull(element) = element != null;
local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));
// fetch contributions from incoming places
local filterControl(element) = element.scope == 'control';
local incomingControlPlaces = std.filter(filterControl, input_values);
local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions['1'];
local getScope2Contribution(element) = element.footprintContributions['2'];
local getScope3Contribution(element) = element.footprintContributions['3'];
local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));
local footprintContributions = { '1': incomingScope1Contributions + scope1FromThisTransition, '2': incomingScope2Contributions + scope2FromThisTransition,'3': incomingScope3Contributions + scope3FromThisTransition};
local scope1Contributions = incomingScope1Contributions + scope1FromThisTransition;
local scope2Contributions = incomingScope2Contributions + scope2FromThisTransition;
local scope3Contributions = incomingScope3Contributions + scope3FromThisTransition;
// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != 'control') && (input_values[index].scope != 'start') then { name: element }; local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));
local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];
//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };
local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));
local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;
// Visualisations:
local visualisations = [{
'type': 'number',
'unit': 'kg CO2e',
'description': 'THG-Fussabdruck',
'value': totalFootprint
},
{
'type': 'sunburst',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sunburst)',
'value': [
{
'name': 'Scope 1',
'children': scope1Contributions
},
{
'name': 'Scope 2',
'children': scope2Contributions
},
{
'name': 'Scope 3',
'children': scope3Contributions
}
]
}
,{
'type': 'sankey',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sankey)',
'value': {
'data': sankeyNodes,
'links': sankeyLinks
}
},
{
'type': 'number',
'unit': '%',
'description': 'Primrdatenanteil',
'value': outputPDS * 100
}];`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p1_key:"local output_p1_key = '-';"},fragmentVarSnippets:{output_p1_value:"local output_p1_value = { scope: 'control', ghgFactorUnit: 'kg CO2e / Stueck', ghgFactor: totalFootprint, amount: 1, unit: 'Stueck (Stueckzahl)', type: 'Primaerdaten', pds: outputPDS, footprintContributions: footprintContributions, sankeyNodes: sankeyNodes,sankeyLinks: sankeyLinks, nodeName: transition_name, '$visualisations': visualisations };"}},{id:"e6d19788-6dec-476e-a333-14397384d651",name:"Lten",preface:`// calculations
// ghg factors in kg CO2e per g
local ghgFactors = { 'NF3': 13.4, 'SF6': 18.3, 'CF4': 5.3};
local calculateFootprint(component) = component.amount  * (if component.scope == 1 then (if component.unit == 'mg' then 0.001 else if component.unit == 'kg' then 1000 else 1) * ghgFactors[component.ghg] * component.scalingFactor else if component.scope == 2 then (if component.unit == 'Wh' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'g CO2e / kWh' then 0.001 else if component.ghgFactorUnit == 'mg CO2e / kWh' then 0.000001 else 1) * component.scalingFactor else if component.scope == 3 then (if component.unit == 'mg (Gewicht)' then 0.000001 else if component.unit == 'g (Gewicht)' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'mg CO2e / Stueck oder kg' then 0.000001 else if component.ghgFactorUnit == 'g CO2e / Stueck oder kg' then 0.001 else 1) * component.scalingFactor else component.ghgFactor) * Allokation / 100;
local individualFootprints = std.map(calculateFootprint,input_values);
// calculate Scope 1-Emissions
local generateScope1Contribution(index,element) = if (element.scope == 1) then { name: input_names[index], value: individualFootprints[index] };
local sum(arr, n) = if (n <= 0) then 0 else sum(arr, n-1) + arr[n-1];
local totalFootprint = sum(individualFootprints, std.length(individualFootprints));
local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;
local footprintShares = std.map(calculatePCFShare,individualFootprints);
local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;
local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));
local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));
// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != 'start') && (element.scope != 'control')) then { name: input_names[index], value: individualFootprints[index] };
local generateScope2Contribution(index,element) = if (element.scope == 2) then { name: input_names[index], value: individualFootprints[index] };
local generateScope3Contribution(index,element) = if (element.scope == 3) then { name: input_names[index], value: individualFootprints[index] };
local filterNull(element) = element != null;
local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));
// fetch contributions from incoming places
local filterControl(element) = element.scope == 'control';
local incomingControlPlaces = std.filter(filterControl, input_values);
local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions['1'];
local getScope2Contribution(element) = element.footprintContributions['2'];
local getScope3Contribution(element) = element.footprintContributions['3'];
local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));
local footprintContributions = { '1': incomingScope1Contributions + scope1FromThisTransition, '2': incomingScope2Contributions + scope2FromThisTransition,'3': incomingScope3Contributions + scope3FromThisTransition};
local scope1Contributions = incomingScope1Contributions + scope1FromThisTransition;
local scope2Contributions = incomingScope2Contributions + scope2FromThisTransition;
local scope3Contributions = incomingScope3Contributions + scope3FromThisTransition;
// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != 'control') && (input_values[index].scope != 'start') then { name: element }; local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));
local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];
//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };
local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));
local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;
// Visualisations:
local visualisations = [{
'type': 'number',
'unit': 'kg CO2e',
'description': 'THG-Fussabdruck',
'value': totalFootprint
},
{
'type': 'sunburst',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sunburst)',
'value': [
{
'name': 'Scope 1',
'children': scope1Contributions
},
{
'name': 'Scope 2',
'children': scope2Contributions
},
{
'name': 'Scope 3',
'children': scope3Contributions
}
]
}
,{
'type': 'sankey',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sankey)',
'value': {
'data': sankeyNodes,
'links': sankeyLinks
}
},
{
'type': 'number',
'unit': '%',
'description': 'Primrdatenanteil',
'value': outputPDS * 100
}];`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p2_key:"local output_p2_key = '-';"},fragmentVarSnippets:{output_p2_value:"local output_p2_value = { scope: 'control', ghgFactorUnit: 'kg CO2e / Stueck', ghgFactor: totalFootprint, amount: 1, unit: 'Stueck (Stueckzahl)', type: 'Primaerdaten', pds: outputPDS, footprintContributions: footprintContributions, sankeyNodes: sankeyNodes,sankeyLinks: sankeyLinks, nodeName: transition_name, '$visualisations': visualisations };"}},{id:"480049a0-4dbe-4f96-b7fc-2fdd039ed064",name:"Trennen",preface:`// calculations
// ghg factors in kg CO2e per g
local ghgFactors = { 'NF3': 13.4, 'SF6': 18.3, 'CF4': 5.3};
local calculateFootprint(component) = component.amount  * (if component.scope == 1 then (if component.unit == 'mg' then 0.001 else if component.unit == 'kg' then 1000 else 1) * ghgFactors[component.ghg] * component.scalingFactor else if component.scope == 2 then (if component.unit == 'Wh' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'g CO2e / kWh' then 0.001 else if component.ghgFactorUnit == 'mg CO2e / kWh' then 0.000001 else 1) * component.scalingFactor else if component.scope == 3 then (if component.unit == 'mg (Gewicht)' then 0.000001 else if component.unit == 'g (Gewicht)' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'mg CO2e / Stueck oder kg' then 0.000001 else if component.ghgFactorUnit == 'g CO2e / Stueck oder kg' then 0.001 else 1) * component.scalingFactor else component.ghgFactor) * Allokation / 100;
local individualFootprints = std.map(calculateFootprint,input_values);
// calculate Scope 1-Emissions
local generateScope1Contribution(index,element) = if (element.scope == 1) then { name: input_names[index], value: individualFootprints[index] };
local sum(arr, n) = if (n <= 0) then 0 else sum(arr, n-1) + arr[n-1];
local totalFootprint = sum(individualFootprints, std.length(individualFootprints));
local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;
local footprintShares = std.map(calculatePCFShare,individualFootprints);
local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;
local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));
local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));
// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != 'start') && (element.scope != 'control')) then { name: input_names[index], value: individualFootprints[index] };
local generateScope2Contribution(index,element) = if (element.scope == 2) then { name: input_names[index], value: individualFootprints[index] };
local generateScope3Contribution(index,element) = if (element.scope == 3) then { name: input_names[index], value: individualFootprints[index] };
local filterNull(element) = element != null;
local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));
// fetch contributions from incoming places
local filterControl(element) = element.scope == 'control';
local incomingControlPlaces = std.filter(filterControl, input_values);
local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions['1'];
local getScope2Contribution(element) = element.footprintContributions['2'];
local getScope3Contribution(element) = element.footprintContributions['3'];
local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));
local footprintContributions = { '1': incomingScope1Contributions + scope1FromThisTransition, '2': incomingScope2Contributions + scope2FromThisTransition,'3': incomingScope3Contributions + scope3FromThisTransition};
local scope1Contributions = incomingScope1Contributions + scope1FromThisTransition;
local scope2Contributions = incomingScope2Contributions + scope2FromThisTransition;
local scope3Contributions = incomingScope3Contributions + scope3FromThisTransition;
// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != 'control') && (input_values[index].scope != 'start') then { name: element }; local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));
local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];
//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };
local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));
local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;
// Visualisations:
local visualisations = [{
'type': 'number',
'unit': 'kg CO2e',
'description': 'THG-Fussabdruck',
'value': totalFootprint
},
{
'type': 'sunburst',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sunburst)',
'value': [
{
'name': 'Scope 1',
'children': scope1Contributions
},
{
'name': 'Scope 2',
'children': scope2Contributions
},
{
'name': 'Scope 3',
'children': scope3Contributions
}
]
}
,{
'type': 'sankey',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sankey)',
'value': {
'data': sankeyNodes,
'links': sankeyLinks
}
},
{
'type': 'number',
'unit': '%',
'description': 'Primrdatenanteil',
'value': outputPDS * 100
}];`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_kameraanschluss_key:"local output_kameraanschluss_key = '-';"},fragmentVarSnippets:{output_kameraanschluss_value:"local output_kameraanschluss_value = { scope: 'control', ghgFactorUnit: 'kg CO2e / Stueck', ghgFactor: totalFootprint, amount: 1, unit: 'Stueck (Stueckzahl)', type: 'Primaerdaten', pds: outputPDS, footprintContributions: footprintContributions, sankeyNodes: sankeyNodes,sankeyLinks: sankeyLinks, nodeName: transition_name, '$visualisations': visualisations };"}}],arcs:[{id:"9005b5ac-3466-4378-8277-3332c51a2afe",filter:"$.*",fromId:"167bbbd6-95ec-4fd6-be40-26c1a487f170",toId:"67438c44-8f16-41b3-ac44-0438014633c0"},{id:"55fe0403-4136-4ace-8504-60e737ca6bef",filter:"$",fromId:"67438c44-8f16-41b3-ac44-0438014633c0",toId:"77993295-6870-418a-bd0d-b145e603292f"},{id:"e983560b-dfff-4fd4-ad18-21f9e485d471",filter:"$.*",fromId:"77993295-6870-418a-bd0d-b145e603292f",toId:"e6d19788-6dec-476e-a333-14397384d651"},{id:"c20f81e1-d19b-46b4-9262-438307da4af6",filter:"$",fromId:"e6d19788-6dec-476e-a333-14397384d651",toId:"2f69a08e-2351-4bdf-84d7-564928a829aa"},{id:"26da7c32-e6b0-4221-9a5b-2ccb9ce7560b",filter:"$.*",fromId:"2f69a08e-2351-4bdf-84d7-564928a829aa",toId:"480049a0-4dbe-4f96-b7fc-2fdd039ed064"},{id:"3826748f-3eb9-49d9-8d2a-54ae1952f284",filter:"$",fromId:"480049a0-4dbe-4f96-b7fc-2fdd039ed064",toId:"834fca4a-9079-417a-8768-afd52bcc0c94"}]},layoutData:{cells:[{type:"pn.Transition",size:{width:100,height:50},position:{x:300,y:312},angle:0,id:"67438c44-8f16-41b3-ac44-0438014633c0",jsonnetsType:"transition",z:1,attrs:{".label":{fill:"#7a7e9b",text:"Reinigen"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:683,y:311},angle:0,id:"e6d19788-6dec-476e-a333-14397384d651",jsonnetsType:"transition",z:2,attrs:{".label":{fill:"#7a7e9b",text:"Lten"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:1056,y:312},angle:0,id:"480049a0-4dbe-4f96-b7fc-2fdd039ed064",jsonnetsType:"transition",z:3,attrs:{".label":{fill:"#7a7e9b",text:"Trennen"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:132,y:312},angle:0,tokens:1,id:"167bbbd6-95ec-4fd6-be40-26c1a487f170",jsonnetsType:"place",z:4,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Start"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:528,y:312},angle:0,tokens:0,id:"77993295-6870-418a-bd0d-b145e603292f",jsonnetsType:"place",z:5,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p1"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:876,y:312},angle:0,tokens:0,id:"2f69a08e-2351-4bdf-84d7-564928a829aa",jsonnetsType:"place",z:6,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p2"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:1284,y:312},angle:0,tokens:0,id:"834fca4a-9079-417a-8768-afd52bcc0c94",jsonnetsType:"place",z:7,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Kameraanschluss"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"standard.Link",source:{id:"167bbbd6-95ec-4fd6-be40-26c1a487f170",selector:".root"},target:{id:"67438c44-8f16-41b3-ac44-0438014633c0",selector:".root"},id:"9005b5ac-3466-4378-8277-3332c51a2afe",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:8,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"67438c44-8f16-41b3-ac44-0438014633c0",selector:".root"},target:{id:"77993295-6870-418a-bd0d-b145e603292f",selector:".root"},id:"55fe0403-4136-4ace-8504-60e737ca6bef",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:9,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"77993295-6870-418a-bd0d-b145e603292f",selector:".root"},target:{id:"e6d19788-6dec-476e-a333-14397384d651",selector:".root"},id:"e983560b-dfff-4fd4-ad18-21f9e485d471",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:10,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"e6d19788-6dec-476e-a333-14397384d651",selector:".root"},target:{id:"2f69a08e-2351-4bdf-84d7-564928a829aa",selector:".root"},id:"c20f81e1-d19b-46b4-9262-438307da4af6",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:11,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"2f69a08e-2351-4bdf-84d7-564928a829aa",selector:".root"},target:{id:"480049a0-4dbe-4f96-b7fc-2fdd039ed064",selector:".root"},id:"26da7c32-e6b0-4221-9a5b-2ccb9ce7560b",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:12,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"480049a0-4dbe-4f96-b7fc-2fdd039ed064",selector:".root"},target:{id:"834fca4a-9079-417a-8768-afd52bcc0c94",selector:".root"},id:"3826748f-3eb9-49d9-8d2a-54ae1952f284",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:13,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}}]}}},{name:"Leiterplatte",net:{typeData:{placeTypes:{"5309778c-2f6a-44c0-aa17-bb3f15b7a606":"start","b1987eda-8e08-4ced-b830-b6567f952ded":"control","f08869f7-1c58-44f1-a0ee-51f8d948856c":"control","4d6e9dac-bf68-4b7b-86e2-fdbbb1261448":"control","487ea0ae-a4de-43e7-bb49-5953c547398b":"control","d312e07b-ebb7-4901-baa3-4685f2ebff45":"control","d779b8e0-9388-4502-971c-bf3b4addc44e":"control","257dbecb-8cf9-4411-8f95-1c787c8333c4":"control","f5cf8f49-6389-4307-8c11-579e41685514":"control","6032860d-f236-4f7e-8be7-197934f4114b":"control","2575f3d8-5e2b-41d6-ad8f-0d085c266c07":"end"},transitionTypes:{"24b114f0-0cf6-4cac-9aad-e034420f35e3":"activity","ad131bbd-9f06-450f-92a9-02a23ff57dc9":"activity","282fe852-ee69-4f85-93c7-b8b2a3aabe06":"activity","c7c6e86a-5446-4ef5-ba45-d4547bff759d":"activity","cdfc3613-646a-45d2-80ff-d1a05eef5867":"activity","5b35b671-368c-42fc-8f5e-55acbe10d9de":"activity","5ae74711-b66a-4d67-831d-c69f190f6117":"activity","f73a9c93-3918-4ec1-9418-4c7ee1e4e1f0":"activity","cb95ac77-e8db-4099-8e29-4ac3121c2878":"activity","6c5f99f4-2b10-4dd9-8427-bd2bd18696a1":"activity"}},netData:{places:[{id:"5309778c-2f6a-44c0-aa17-bb3f15b7a606",name:"Start",marking:[{amount:1,ghgFactor:0,scope:"start",pds:0}],schema:{type:"array",title:"start",maxItems:1,items:{type:"object"},$id:"5309778c-2f6a-44c0-aa17-bb3f15b7a606"}},{id:"b1987eda-8e08-4ced-b830-b6567f952ded",name:"p1",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"b1987eda-8e08-4ced-b830-b6567f952ded"}},{id:"f08869f7-1c58-44f1-a0ee-51f8d948856c",name:"p2",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"f08869f7-1c58-44f1-a0ee-51f8d948856c"}},{id:"4d6e9dac-bf68-4b7b-86e2-fdbbb1261448",name:"p3",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"4d6e9dac-bf68-4b7b-86e2-fdbbb1261448"}},{id:"487ea0ae-a4de-43e7-bb49-5953c547398b",name:"p4",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"487ea0ae-a4de-43e7-bb49-5953c547398b"}},{id:"d312e07b-ebb7-4901-baa3-4685f2ebff45",name:"p5",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"d312e07b-ebb7-4901-baa3-4685f2ebff45"}},{id:"d779b8e0-9388-4502-971c-bf3b4addc44e",name:"p6",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"d779b8e0-9388-4502-971c-bf3b4addc44e"}},{id:"257dbecb-8cf9-4411-8f95-1c787c8333c4",name:"p7",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"257dbecb-8cf9-4411-8f95-1c787c8333c4"}},{id:"6032860d-f236-4f7e-8be7-197934f4114b",name:"p9",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"6032860d-f236-4f7e-8be7-197934f4114b"}},{id:"2575f3d8-5e2b-41d6-ad8f-0d085c266c07",name:"Leiterplatte",marking:[],schema:{type:"array",title:"end",maxItems:1,items:{type:"object"},$id:"2575f3d8-5e2b-41d6-ad8f-0d085c266c07"}},{id:"f5cf8f49-6389-4307-8c11-579e41685514",name:"p8",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"f5cf8f49-6389-4307-8c11-579e41685514"}}],transitions:[{id:"24b114f0-0cf6-4cac-9aad-e034420f35e3",name:"Lagenaufbau",preface:`// calculations
// ghg factors in kg CO2e per g
local ghgFactors = { 'NF3': 13.4, 'SF6': 18.3, 'CF4': 5.3};
local calculateFootprint(component) = component.amount  * (if component.scope == 1 then (if component.unit == 'mg' then 0.001 else if component.unit == 'kg' then 1000 else 1) * ghgFactors[component.ghg] * component.scalingFactor else if component.scope == 2 then (if component.unit == 'Wh' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'g CO2e / kWh' then 0.001 else if component.ghgFactorUnit == 'mg CO2e / kWh' then 0.000001 else 1) * component.scalingFactor else if component.scope == 3 then (if component.unit == 'mg (Gewicht)' then 0.000001 else if component.unit == 'g (Gewicht)' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'mg CO2e / Stueck oder kg' then 0.000001 else if component.ghgFactorUnit == 'g CO2e / Stueck oder kg' then 0.001 else 1) * component.scalingFactor else component.ghgFactor) * Allokation / 100;
local individualFootprints = std.map(calculateFootprint,input_values);
// calculate Scope 1-Emissions
local generateScope1Contribution(index,element) = if (element.scope == 1) then { name: input_names[index], value: individualFootprints[index] };
local sum(arr, n) = if (n <= 0) then 0 else sum(arr, n-1) + arr[n-1];
local totalFootprint = sum(individualFootprints, std.length(individualFootprints));
local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;
local footprintShares = std.map(calculatePCFShare,individualFootprints);
local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;
local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));
local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));
// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != 'start') && (element.scope != 'control')) then { name: input_names[index], value: individualFootprints[index] };
local generateScope2Contribution(index,element) = if (element.scope == 2) then { name: input_names[index], value: individualFootprints[index] };
local generateScope3Contribution(index,element) = if (element.scope == 3) then { name: input_names[index], value: individualFootprints[index] };
local filterNull(element) = element != null;
local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));
// fetch contributions from incoming places
local filterControl(element) = element.scope == 'control';
local incomingControlPlaces = std.filter(filterControl, input_values);
local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions['1'];
local getScope2Contribution(element) = element.footprintContributions['2'];
local getScope3Contribution(element) = element.footprintContributions['3'];
local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));
local footprintContributions = { '1': incomingScope1Contributions + scope1FromThisTransition, '2': incomingScope2Contributions + scope2FromThisTransition,'3': incomingScope3Contributions + scope3FromThisTransition};
local scope1Contributions = incomingScope1Contributions + scope1FromThisTransition;
local scope2Contributions = incomingScope2Contributions + scope2FromThisTransition;
local scope3Contributions = incomingScope3Contributions + scope3FromThisTransition;
// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != 'control') && (input_values[index].scope != 'start') then { name: element }; local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));
local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];
//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };
local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));
local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;
// Visualisations:
local visualisations = [{
'type': 'number',
'unit': 'kg CO2e',
'description': 'THG-Fussabdruck',
'value': totalFootprint
},
{
'type': 'sunburst',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sunburst)',
'value': [
{
'name': 'Scope 1',
'children': scope1Contributions
},
{
'name': 'Scope 2',
'children': scope2Contributions
},
{
'name': 'Scope 3',
'children': scope3Contributions
}
]
}
,{
'type': 'sankey',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sankey)',
'value': {
'data': sankeyNodes,
'links': sankeyLinks
}
},
{
'type': 'number',
'unit': '%',
'description': 'Primrdatenanteil',
'value': outputPDS * 100
}];`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p1_key:"local output_p1_key = '-';"},fragmentVarSnippets:{output_p1_value:"local output_p1_value = { scope: 'control', ghgFactorUnit: 'kg CO2e / Stueck', ghgFactor: totalFootprint, amount: 1, unit: 'Stueck (Stueckzahl)', type: 'Primaerdaten', pds: outputPDS, footprintContributions: footprintContributions, sankeyNodes: sankeyNodes,sankeyLinks: sankeyLinks, nodeName: transition_name, '$visualisations': visualisations };"}},{id:"ad131bbd-9f06-450f-92a9-02a23ff57dc9",name:"Laminieren",preface:`// calculations
// ghg factors in kg CO2e per g
local ghgFactors = { 'NF3': 13.4, 'SF6': 18.3, 'CF4': 5.3};
local calculateFootprint(component) = component.amount  * (if component.scope == 1 then (if component.unit == 'mg' then 0.001 else if component.unit == 'kg' then 1000 else 1) * ghgFactors[component.ghg] * component.scalingFactor else if component.scope == 2 then (if component.unit == 'Wh' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'g CO2e / kWh' then 0.001 else if component.ghgFactorUnit == 'mg CO2e / kWh' then 0.000001 else 1) * component.scalingFactor else if component.scope == 3 then (if component.unit == 'mg (Gewicht)' then 0.000001 else if component.unit == 'g (Gewicht)' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'mg CO2e / Stueck oder kg' then 0.000001 else if component.ghgFactorUnit == 'g CO2e / Stueck oder kg' then 0.001 else 1) * component.scalingFactor else component.ghgFactor) * Allokation / 100;
local individualFootprints = std.map(calculateFootprint,input_values);
// calculate Scope 1-Emissions
local generateScope1Contribution(index,element) = if (element.scope == 1) then { name: input_names[index], value: individualFootprints[index] };
local sum(arr, n) = if (n <= 0) then 0 else sum(arr, n-1) + arr[n-1];
local totalFootprint = sum(individualFootprints, std.length(individualFootprints));
local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;
local footprintShares = std.map(calculatePCFShare,individualFootprints);
local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;
local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));
local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));
// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != 'start') && (element.scope != 'control')) then { name: input_names[index], value: individualFootprints[index] };
local generateScope2Contribution(index,element) = if (element.scope == 2) then { name: input_names[index], value: individualFootprints[index] };
local generateScope3Contribution(index,element) = if (element.scope == 3) then { name: input_names[index], value: individualFootprints[index] };
local filterNull(element) = element != null;
local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));
// fetch contributions from incoming places
local filterControl(element) = element.scope == 'control';
local incomingControlPlaces = std.filter(filterControl, input_values);
local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions['1'];
local getScope2Contribution(element) = element.footprintContributions['2'];
local getScope3Contribution(element) = element.footprintContributions['3'];
local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));
local footprintContributions = { '1': incomingScope1Contributions + scope1FromThisTransition, '2': incomingScope2Contributions + scope2FromThisTransition,'3': incomingScope3Contributions + scope3FromThisTransition};
local scope1Contributions = incomingScope1Contributions + scope1FromThisTransition;
local scope2Contributions = incomingScope2Contributions + scope2FromThisTransition;
local scope3Contributions = incomingScope3Contributions + scope3FromThisTransition;
// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != 'control') && (input_values[index].scope != 'start') then { name: element }; local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));
local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];
//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };
local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));
local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;
// Visualisations:
local visualisations = [{
'type': 'number',
'unit': 'kg CO2e',
'description': 'THG-Fussabdruck',
'value': totalFootprint
},
{
'type': 'sunburst',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sunburst)',
'value': [
{
'name': 'Scope 1',
'children': scope1Contributions
},
{
'name': 'Scope 2',
'children': scope2Contributions
},
{
'name': 'Scope 3',
'children': scope3Contributions
}
]
}
,{
'type': 'sankey',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sankey)',
'value': {
'data': sankeyNodes,
'links': sankeyLinks
}
},
{
'type': 'number',
'unit': '%',
'description': 'Primrdatenanteil',
'value': outputPDS * 100
}];`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p2_key:"local output_p2_key = '-';"},fragmentVarSnippets:{output_p2_value:"local output_p2_value = { scope: 'control', ghgFactorUnit: 'kg CO2e / Stueck', ghgFactor: totalFootprint, amount: 1, unit: 'Stueck (Stueckzahl)', type: 'Primaerdaten', pds: outputPDS, footprintContributions: footprintContributions, sankeyNodes: sankeyNodes,sankeyLinks: sankeyLinks, nodeName: transition_name, '$visualisations': visualisations };"}},{id:"282fe852-ee69-4f85-93c7-b8b2a3aabe06",name:"Bohren",preface:`// calculations
// ghg factors in kg CO2e per g
local ghgFactors = { 'NF3': 13.4, 'SF6': 18.3, 'CF4': 5.3};
local calculateFootprint(component) = component.amount  * (if component.scope == 1 then (if component.unit == 'mg' then 0.001 else if component.unit == 'kg' then 1000 else 1) * ghgFactors[component.ghg] * component.scalingFactor else if component.scope == 2 then (if component.unit == 'Wh' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'g CO2e / kWh' then 0.001 else if component.ghgFactorUnit == 'mg CO2e / kWh' then 0.000001 else 1) * component.scalingFactor else if component.scope == 3 then (if component.unit == 'mg (Gewicht)' then 0.000001 else if component.unit == 'g (Gewicht)' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'mg CO2e / Stueck oder kg' then 0.000001 else if component.ghgFactorUnit == 'g CO2e / Stueck oder kg' then 0.001 else 1) * component.scalingFactor else component.ghgFactor) * Allokation / 100;
local individualFootprints = std.map(calculateFootprint,input_values);
// calculate Scope 1-Emissions
local generateScope1Contribution(index,element) = if (element.scope == 1) then { name: input_names[index], value: individualFootprints[index] };
local sum(arr, n) = if (n <= 0) then 0 else sum(arr, n-1) + arr[n-1];
local totalFootprint = sum(individualFootprints, std.length(individualFootprints));
local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;
local footprintShares = std.map(calculatePCFShare,individualFootprints);
local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;
local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));
local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));
// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != 'start') && (element.scope != 'control')) then { name: input_names[index], value: individualFootprints[index] };
local generateScope2Contribution(index,element) = if (element.scope == 2) then { name: input_names[index], value: individualFootprints[index] };
local generateScope3Contribution(index,element) = if (element.scope == 3) then { name: input_names[index], value: individualFootprints[index] };
local filterNull(element) = element != null;
local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));
// fetch contributions from incoming places
local filterControl(element) = element.scope == 'control';
local incomingControlPlaces = std.filter(filterControl, input_values);
local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions['1'];
local getScope2Contribution(element) = element.footprintContributions['2'];
local getScope3Contribution(element) = element.footprintContributions['3'];
local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));
local footprintContributions = { '1': incomingScope1Contributions + scope1FromThisTransition, '2': incomingScope2Contributions + scope2FromThisTransition,'3': incomingScope3Contributions + scope3FromThisTransition};
local scope1Contributions = incomingScope1Contributions + scope1FromThisTransition;
local scope2Contributions = incomingScope2Contributions + scope2FromThisTransition;
local scope3Contributions = incomingScope3Contributions + scope3FromThisTransition;
// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != 'control') && (input_values[index].scope != 'start') then { name: element }; local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));
local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];
//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };
local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));
local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;
// Visualisations:
local visualisations = [{
'type': 'number',
'unit': 'kg CO2e',
'description': 'THG-Fussabdruck',
'value': totalFootprint
},
{
'type': 'sunburst',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sunburst)',
'value': [
{
'name': 'Scope 1',
'children': scope1Contributions
},
{
'name': 'Scope 2',
'children': scope2Contributions
},
{
'name': 'Scope 3',
'children': scope3Contributions
}
]
}
,{
'type': 'sankey',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sankey)',
'value': {
'data': sankeyNodes,
'links': sankeyLinks
}
},
{
'type': 'number',
'unit': '%',
'description': 'Primrdatenanteil',
'value': outputPDS * 100
}];`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p3_key:"local output_p3_key = '-';"},fragmentVarSnippets:{output_p3_value:"local output_p3_value = { scope: 'control', ghgFactorUnit: 'kg CO2e / Stueck', ghgFactor: totalFootprint, amount: 1, unit: 'Stueck (Stueckzahl)', type: 'Primaerdaten', pds: outputPDS, footprintContributions: footprintContributions, sankeyNodes: sankeyNodes,sankeyLinks: sankeyLinks, nodeName: transition_name, '$visualisations': visualisations };"}},{id:"c7c6e86a-5446-4ef5-ba45-d4547bff759d",name:"Plating",preface:`// calculations
// ghg factors in kg CO2e per g
local ghgFactors = { 'NF3': 13.4, 'SF6': 18.3, 'CF4': 5.3};
local calculateFootprint(component) = component.amount  * (if component.scope == 1 then (if component.unit == 'mg' then 0.001 else if component.unit == 'kg' then 1000 else 1) * ghgFactors[component.ghg] * component.scalingFactor else if component.scope == 2 then (if component.unit == 'Wh' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'g CO2e / kWh' then 0.001 else if component.ghgFactorUnit == 'mg CO2e / kWh' then 0.000001 else 1) * component.scalingFactor else if component.scope == 3 then (if component.unit == 'mg (Gewicht)' then 0.000001 else if component.unit == 'g (Gewicht)' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'mg CO2e / Stueck oder kg' then 0.000001 else if component.ghgFactorUnit == 'g CO2e / Stueck oder kg' then 0.001 else 1) * component.scalingFactor else component.ghgFactor) * Allokation / 100;
local individualFootprints = std.map(calculateFootprint,input_values);
// calculate Scope 1-Emissions
local generateScope1Contribution(index,element) = if (element.scope == 1) then { name: input_names[index], value: individualFootprints[index] };
local sum(arr, n) = if (n <= 0) then 0 else sum(arr, n-1) + arr[n-1];
local totalFootprint = sum(individualFootprints, std.length(individualFootprints));
local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;
local footprintShares = std.map(calculatePCFShare,individualFootprints);
local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;
local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));
local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));
// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != 'start') && (element.scope != 'control')) then { name: input_names[index], value: individualFootprints[index] };
local generateScope2Contribution(index,element) = if (element.scope == 2) then { name: input_names[index], value: individualFootprints[index] };
local generateScope3Contribution(index,element) = if (element.scope == 3) then { name: input_names[index], value: individualFootprints[index] };
local filterNull(element) = element != null;
local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));
// fetch contributions from incoming places
local filterControl(element) = element.scope == 'control';
local incomingControlPlaces = std.filter(filterControl, input_values);
local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions['1'];
local getScope2Contribution(element) = element.footprintContributions['2'];
local getScope3Contribution(element) = element.footprintContributions['3'];
local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));
local footprintContributions = { '1': incomingScope1Contributions + scope1FromThisTransition, '2': incomingScope2Contributions + scope2FromThisTransition,'3': incomingScope3Contributions + scope3FromThisTransition};
local scope1Contributions = incomingScope1Contributions + scope1FromThisTransition;
local scope2Contributions = incomingScope2Contributions + scope2FromThisTransition;
local scope3Contributions = incomingScope3Contributions + scope3FromThisTransition;
// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != 'control') && (input_values[index].scope != 'start') then { name: element }; local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));
local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];
//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };
local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));
local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;
// Visualisations:
local visualisations = [{
'type': 'number',
'unit': 'kg CO2e',
'description': 'THG-Fussabdruck',
'value': totalFootprint
},
{
'type': 'sunburst',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sunburst)',
'value': [
{
'name': 'Scope 1',
'children': scope1Contributions
},
{
'name': 'Scope 2',
'children': scope2Contributions
},
{
'name': 'Scope 3',
'children': scope3Contributions
}
]
}
,{
'type': 'sankey',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sankey)',
'value': {
'data': sankeyNodes,
'links': sankeyLinks
}
},
{
'type': 'number',
'unit': '%',
'description': 'Primrdatenanteil',
'value': outputPDS * 100
}];`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p4_key:"local output_p4_key = '-';"},fragmentVarSnippets:{output_p4_value:"local output_p4_value = { scope: 'control', ghgFactorUnit: 'kg CO2e / Stueck', ghgFactor: totalFootprint, amount: 1, unit: 'Stueck (Stueckzahl)', type: 'Primaerdaten', pds: outputPDS, footprintContributions: footprintContributions, sankeyNodes: sankeyNodes,sankeyLinks: sankeyLinks, nodeName: transition_name, '$visualisations': visualisations };"}},{id:"cdfc3613-646a-45d2-80ff-d1a05eef5867",name:"Ltstoppmaske",preface:`// calculations
// ghg factors in kg CO2e per g
local ghgFactors = { 'NF3': 13.4, 'SF6': 18.3, 'CF4': 5.3};
local calculateFootprint(component) = component.amount  * (if component.scope == 1 then (if component.unit == 'mg' then 0.001 else if component.unit == 'kg' then 1000 else 1) * ghgFactors[component.ghg] * component.scalingFactor else if component.scope == 2 then (if component.unit == 'Wh' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'g CO2e / kWh' then 0.001 else if component.ghgFactorUnit == 'mg CO2e / kWh' then 0.000001 else 1) * component.scalingFactor else if component.scope == 3 then (if component.unit == 'mg (Gewicht)' then 0.000001 else if component.unit == 'g (Gewicht)' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'mg CO2e / Stueck oder kg' then 0.000001 else if component.ghgFactorUnit == 'g CO2e / Stueck oder kg' then 0.001 else 1) * component.scalingFactor else component.ghgFactor) * Allokation / 100;
local individualFootprints = std.map(calculateFootprint,input_values);
// calculate Scope 1-Emissions
local generateScope1Contribution(index,element) = if (element.scope == 1) then { name: input_names[index], value: individualFootprints[index] };
local sum(arr, n) = if (n <= 0) then 0 else sum(arr, n-1) + arr[n-1];
local totalFootprint = sum(individualFootprints, std.length(individualFootprints));
local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;
local footprintShares = std.map(calculatePCFShare,individualFootprints);
local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;
local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));
local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));
// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != 'start') && (element.scope != 'control')) then { name: input_names[index], value: individualFootprints[index] };
local generateScope2Contribution(index,element) = if (element.scope == 2) then { name: input_names[index], value: individualFootprints[index] };
local generateScope3Contribution(index,element) = if (element.scope == 3) then { name: input_names[index], value: individualFootprints[index] };
local filterNull(element) = element != null;
local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));
// fetch contributions from incoming places
local filterControl(element) = element.scope == 'control';
local incomingControlPlaces = std.filter(filterControl, input_values);
local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions['1'];
local getScope2Contribution(element) = element.footprintContributions['2'];
local getScope3Contribution(element) = element.footprintContributions['3'];
local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));
local footprintContributions = { '1': incomingScope1Contributions + scope1FromThisTransition, '2': incomingScope2Contributions + scope2FromThisTransition,'3': incomingScope3Contributions + scope3FromThisTransition};
local scope1Contributions = incomingScope1Contributions + scope1FromThisTransition;
local scope2Contributions = incomingScope2Contributions + scope2FromThisTransition;
local scope3Contributions = incomingScope3Contributions + scope3FromThisTransition;
// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != 'control') && (input_values[index].scope != 'start') then { name: element }; local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));
local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];
//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };
local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));
local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;
// Visualisations:
local visualisations = [{
'type': 'number',
'unit': 'kg CO2e',
'description': 'THG-Fussabdruck',
'value': totalFootprint
},
{
'type': 'sunburst',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sunburst)',
'value': [
{
'name': 'Scope 1',
'children': scope1Contributions
},
{
'name': 'Scope 2',
'children': scope2Contributions
},
{
'name': 'Scope 3',
'children': scope3Contributions
}
]
}
,{
'type': 'sankey',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sankey)',
'value': {
'data': sankeyNodes,
'links': sankeyLinks
}
},
{
'type': 'number',
'unit': '%',
'description': 'Primrdatenanteil',
'value': outputPDS * 100
}];`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p5_key:"local output_p5_key = '-';"},fragmentVarSnippets:{output_p5_value:"local output_p5_value = { scope: 'control', ghgFactorUnit: 'kg CO2e / Stueck', ghgFactor: totalFootprint, amount: 1, unit: 'Stueck (Stueckzahl)', type: 'Primaerdaten', pds: outputPDS, footprintContributions: footprintContributions, sankeyNodes: sankeyNodes,sankeyLinks: sankeyLinks, nodeName: transition_name, '$visualisations': visualisations };"}},{id:"5b35b671-368c-42fc-8f5e-55acbe10d9de",name:"Lithografie",preface:`// calculations
// ghg factors in kg CO2e per g
local ghgFactors = { 'NF3': 13.4, 'SF6': 18.3, 'CF4': 5.3};
local calculateFootprint(component) = component.amount  * (if component.scope == 1 then (if component.unit == 'mg' then 0.001 else if component.unit == 'kg' then 1000 else 1) * ghgFactors[component.ghg] * component.scalingFactor else if component.scope == 2 then (if component.unit == 'Wh' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'g CO2e / kWh' then 0.001 else if component.ghgFactorUnit == 'mg CO2e / kWh' then 0.000001 else 1) * component.scalingFactor else if component.scope == 3 then (if component.unit == 'mg (Gewicht)' then 0.000001 else if component.unit == 'g (Gewicht)' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'mg CO2e / Stueck oder kg' then 0.000001 else if component.ghgFactorUnit == 'g CO2e / Stueck oder kg' then 0.001 else 1) * component.scalingFactor else component.ghgFactor) * Allokation / 100;
local individualFootprints = std.map(calculateFootprint,input_values);
// calculate Scope 1-Emissions
local generateScope1Contribution(index,element) = if (element.scope == 1) then { name: input_names[index], value: individualFootprints[index] };
local sum(arr, n) = if (n <= 0) then 0 else sum(arr, n-1) + arr[n-1];
local totalFootprint = sum(individualFootprints, std.length(individualFootprints));
local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;
local footprintShares = std.map(calculatePCFShare,individualFootprints);
local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;
local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));
local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));
// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != 'start') && (element.scope != 'control')) then { name: input_names[index], value: individualFootprints[index] };
local generateScope2Contribution(index,element) = if (element.scope == 2) then { name: input_names[index], value: individualFootprints[index] };
local generateScope3Contribution(index,element) = if (element.scope == 3) then { name: input_names[index], value: individualFootprints[index] };
local filterNull(element) = element != null;
local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));
// fetch contributions from incoming places
local filterControl(element) = element.scope == 'control';
local incomingControlPlaces = std.filter(filterControl, input_values);
local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions['1'];
local getScope2Contribution(element) = element.footprintContributions['2'];
local getScope3Contribution(element) = element.footprintContributions['3'];
local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));
local footprintContributions = { '1': incomingScope1Contributions + scope1FromThisTransition, '2': incomingScope2Contributions + scope2FromThisTransition,'3': incomingScope3Contributions + scope3FromThisTransition};
local scope1Contributions = incomingScope1Contributions + scope1FromThisTransition;
local scope2Contributions = incomingScope2Contributions + scope2FromThisTransition;
local scope3Contributions = incomingScope3Contributions + scope3FromThisTransition;
// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != 'control') && (input_values[index].scope != 'start') then { name: element }; local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));
local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];
//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };
local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));
local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;
// Visualisations:
local visualisations = [{
'type': 'number',
'unit': 'kg CO2e',
'description': 'THG-Fussabdruck',
'value': totalFootprint
},
{
'type': 'sunburst',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sunburst)',
'value': [
{
'name': 'Scope 1',
'children': scope1Contributions
},
{
'name': 'Scope 2',
'children': scope2Contributions
},
{
'name': 'Scope 3',
'children': scope3Contributions
}
]
}
,{
'type': 'sankey',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sankey)',
'value': {
'data': sankeyNodes,
'links': sankeyLinks
}
},
{
'type': 'number',
'unit': '%',
'description': 'Primrdatenanteil',
'value': outputPDS * 100
}];`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p6_key:"local output_p6_key = '-';"},fragmentVarSnippets:{output_p6_value:"local output_p6_value = { scope: 'control', ghgFactorUnit: 'kg CO2e / Stueck', ghgFactor: totalFootprint, amount: 1, unit: 'Stueck (Stueckzahl)', type: 'Primaerdaten', pds: outputPDS, footprintContributions: footprintContributions, sankeyNodes: sankeyNodes,sankeyLinks: sankeyLinks, nodeName: transition_name, '$visualisations': visualisations };"}},{id:"5ae74711-b66a-4d67-831d-c69f190f6117",name:"Nachbearbeiten",preface:`// calculations
// ghg factors in kg CO2e per g
local ghgFactors = { 'NF3': 13.4, 'SF6': 18.3, 'CF4': 5.3};
local calculateFootprint(component) = component.amount  * (if component.scope == 1 then (if component.unit == 'mg' then 0.001 else if component.unit == 'kg' then 1000 else 1) * ghgFactors[component.ghg] * component.scalingFactor else if component.scope == 2 then (if component.unit == 'Wh' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'g CO2e / kWh' then 0.001 else if component.ghgFactorUnit == 'mg CO2e / kWh' then 0.000001 else 1) * component.scalingFactor else if component.scope == 3 then (if component.unit == 'mg (Gewicht)' then 0.000001 else if component.unit == 'g (Gewicht)' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'mg CO2e / Stueck oder kg' then 0.000001 else if component.ghgFactorUnit == 'g CO2e / Stueck oder kg' then 0.001 else 1) * component.scalingFactor else component.ghgFactor) * Allokation / 100;
local individualFootprints = std.map(calculateFootprint,input_values);
// calculate Scope 1-Emissions
local generateScope1Contribution(index,element) = if (element.scope == 1) then { name: input_names[index], value: individualFootprints[index] };
local sum(arr, n) = if (n <= 0) then 0 else sum(arr, n-1) + arr[n-1];
local totalFootprint = sum(individualFootprints, std.length(individualFootprints));
local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;
local footprintShares = std.map(calculatePCFShare,individualFootprints);
local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;
local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));
local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));
// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != 'start') && (element.scope != 'control')) then { name: input_names[index], value: individualFootprints[index] };
local generateScope2Contribution(index,element) = if (element.scope == 2) then { name: input_names[index], value: individualFootprints[index] };
local generateScope3Contribution(index,element) = if (element.scope == 3) then { name: input_names[index], value: individualFootprints[index] };
local filterNull(element) = element != null;
local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));
// fetch contributions from incoming places
local filterControl(element) = element.scope == 'control';
local incomingControlPlaces = std.filter(filterControl, input_values);
local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions['1'];
local getScope2Contribution(element) = element.footprintContributions['2'];
local getScope3Contribution(element) = element.footprintContributions['3'];
local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));
local footprintContributions = { '1': incomingScope1Contributions + scope1FromThisTransition, '2': incomingScope2Contributions + scope2FromThisTransition,'3': incomingScope3Contributions + scope3FromThisTransition};
local scope1Contributions = incomingScope1Contributions + scope1FromThisTransition;
local scope2Contributions = incomingScope2Contributions + scope2FromThisTransition;
local scope3Contributions = incomingScope3Contributions + scope3FromThisTransition;
// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != 'control') && (input_values[index].scope != 'start') then { name: element }; local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));
local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];
//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };
local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));
local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;
// Visualisations:
local visualisations = [{
'type': 'number',
'unit': 'kg CO2e',
'description': 'THG-Fussabdruck',
'value': totalFootprint
},
{
'type': 'sunburst',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sunburst)',
'value': [
{
'name': 'Scope 1',
'children': scope1Contributions
},
{
'name': 'Scope 2',
'children': scope2Contributions
},
{
'name': 'Scope 3',
'children': scope3Contributions
}
]
}
,{
'type': 'sankey',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sankey)',
'value': {
'data': sankeyNodes,
'links': sankeyLinks
}
},
{
'type': 'number',
'unit': '%',
'description': 'Primrdatenanteil',
'value': outputPDS * 100
}];`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p7_key:"local output_p7_key = '-';"},fragmentVarSnippets:{output_p7_value:"local output_p7_value = { scope: 'control', ghgFactorUnit: 'kg CO2e / Stueck', ghgFactor: totalFootprint, amount: 1, unit: 'Stueck (Stueckzahl)', type: 'Primaerdaten', pds: outputPDS, footprintContributions: footprintContributions, sankeyNodes: sankeyNodes,sankeyLinks: sankeyLinks, nodeName: transition_name, '$visualisations': visualisations };"}},{id:"f73a9c93-3918-4ec1-9418-4c7ee1e4e1f0",name:"Testen",preface:`// calculations
// ghg factors in kg CO2e per g
local ghgFactors = { 'NF3': 13.4, 'SF6': 18.3, 'CF4': 5.3};
local calculateFootprint(component) = component.amount  * (if component.scope == 1 then (if component.unit == 'mg' then 0.001 else if component.unit == 'kg' then 1000 else 1) * ghgFactors[component.ghg] * component.scalingFactor else if component.scope == 2 then (if component.unit == 'Wh' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'g CO2e / kWh' then 0.001 else if component.ghgFactorUnit == 'mg CO2e / kWh' then 0.000001 else 1) * component.scalingFactor else if component.scope == 3 then (if component.unit == 'mg (Gewicht)' then 0.000001 else if component.unit == 'g (Gewicht)' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'mg CO2e / Stueck oder kg' then 0.000001 else if component.ghgFactorUnit == 'g CO2e / Stueck oder kg' then 0.001 else 1) * component.scalingFactor else component.ghgFactor) * Allokation / 100;
local individualFootprints = std.map(calculateFootprint,input_values);
// calculate Scope 1-Emissions
local generateScope1Contribution(index,element) = if (element.scope == 1) then { name: input_names[index], value: individualFootprints[index] };
local sum(arr, n) = if (n <= 0) then 0 else sum(arr, n-1) + arr[n-1];
local totalFootprint = sum(individualFootprints, std.length(individualFootprints));
local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;
local footprintShares = std.map(calculatePCFShare,individualFootprints);
local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;
local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));
local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));
// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != 'start') && (element.scope != 'control')) then { name: input_names[index], value: individualFootprints[index] };
local generateScope2Contribution(index,element) = if (element.scope == 2) then { name: input_names[index], value: individualFootprints[index] };
local generateScope3Contribution(index,element) = if (element.scope == 3) then { name: input_names[index], value: individualFootprints[index] };
local filterNull(element) = element != null;
local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));
// fetch contributions from incoming places
local filterControl(element) = element.scope == 'control';
local incomingControlPlaces = std.filter(filterControl, input_values);
local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions['1'];
local getScope2Contribution(element) = element.footprintContributions['2'];
local getScope3Contribution(element) = element.footprintContributions['3'];
local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));
local footprintContributions = { '1': incomingScope1Contributions + scope1FromThisTransition, '2': incomingScope2Contributions + scope2FromThisTransition,'3': incomingScope3Contributions + scope3FromThisTransition};
local scope1Contributions = incomingScope1Contributions + scope1FromThisTransition;
local scope2Contributions = incomingScope2Contributions + scope2FromThisTransition;
local scope3Contributions = incomingScope3Contributions + scope3FromThisTransition;
// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != 'control') && (input_values[index].scope != 'start') then { name: element }; local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));
local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];
//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };
local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));
local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;
// Visualisations:
local visualisations = [{
'type': 'number',
'unit': 'kg CO2e',
'description': 'THG-Fussabdruck',
'value': totalFootprint
},
{
'type': 'sunburst',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sunburst)',
'value': [
{
'name': 'Scope 1',
'children': scope1Contributions
},
{
'name': 'Scope 2',
'children': scope2Contributions
},
{
'name': 'Scope 3',
'children': scope3Contributions
}
]
}
,{
'type': 'sankey',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sankey)',
'value': {
'data': sankeyNodes,
'links': sankeyLinks
}
},
{
'type': 'number',
'unit': '%',
'description': 'Primrdatenanteil',
'value': outputPDS * 100
}];`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p8_key:"local output_p8_key = '-';"},fragmentVarSnippets:{output_p8_value:"local output_p8_value = { scope: 'control', ghgFactorUnit: 'kg CO2e / Stueck', ghgFactor: totalFootprint, amount: 1, unit: 'Stueck (Stueckzahl)', type: 'Primaerdaten', pds: outputPDS, footprintContributions: footprintContributions, sankeyNodes: sankeyNodes,sankeyLinks: sankeyLinks, nodeName: transition_name, '$visualisations': visualisations };"}},{id:"cb95ac77-e8db-4099-8e29-4ac3121c2878",name:"Oberflchenfinish",preface:`// calculations
// ghg factors in kg CO2e per g
local ghgFactors = { 'NF3': 13.4, 'SF6': 18.3, 'CF4': 5.3};
local calculateFootprint(component) = component.amount  * (if component.scope == 1 then (if component.unit == 'mg' then 0.001 else if component.unit == 'kg' then 1000 else 1) * ghgFactors[component.ghg] * component.scalingFactor else if component.scope == 2 then (if component.unit == 'Wh' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'g CO2e / kWh' then 0.001 else if component.ghgFactorUnit == 'mg CO2e / kWh' then 0.000001 else 1) * component.scalingFactor else if component.scope == 3 then (if component.unit == 'mg (Gewicht)' then 0.000001 else if component.unit == 'g (Gewicht)' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'mg CO2e / Stueck oder kg' then 0.000001 else if component.ghgFactorUnit == 'g CO2e / Stueck oder kg' then 0.001 else 1) * component.scalingFactor else component.ghgFactor) * Allokation / 100;
local individualFootprints = std.map(calculateFootprint,input_values);
// calculate Scope 1-Emissions
local generateScope1Contribution(index,element) = if (element.scope == 1) then { name: input_names[index], value: individualFootprints[index] };
local sum(arr, n) = if (n <= 0) then 0 else sum(arr, n-1) + arr[n-1];
local totalFootprint = sum(individualFootprints, std.length(individualFootprints));
local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;
local footprintShares = std.map(calculatePCFShare,individualFootprints);
local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;
local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));
local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));
// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != 'start') && (element.scope != 'control')) then { name: input_names[index], value: individualFootprints[index] };
local generateScope2Contribution(index,element) = if (element.scope == 2) then { name: input_names[index], value: individualFootprints[index] };
local generateScope3Contribution(index,element) = if (element.scope == 3) then { name: input_names[index], value: individualFootprints[index] };
local filterNull(element) = element != null;
local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));
// fetch contributions from incoming places
local filterControl(element) = element.scope == 'control';
local incomingControlPlaces = std.filter(filterControl, input_values);
local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions['1'];
local getScope2Contribution(element) = element.footprintContributions['2'];
local getScope3Contribution(element) = element.footprintContributions['3'];
local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));
local footprintContributions = { '1': incomingScope1Contributions + scope1FromThisTransition, '2': incomingScope2Contributions + scope2FromThisTransition,'3': incomingScope3Contributions + scope3FromThisTransition};
local scope1Contributions = incomingScope1Contributions + scope1FromThisTransition;
local scope2Contributions = incomingScope2Contributions + scope2FromThisTransition;
local scope3Contributions = incomingScope3Contributions + scope3FromThisTransition;
// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != 'control') && (input_values[index].scope != 'start') then { name: element }; local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));
local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];
//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };
local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));
local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;
// Visualisations:
local visualisations = [{
'type': 'number',
'unit': 'kg CO2e',
'description': 'THG-Fussabdruck',
'value': totalFootprint
},
{
'type': 'sunburst',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sunburst)',
'value': [
{
'name': 'Scope 1',
'children': scope1Contributions
},
{
'name': 'Scope 2',
'children': scope2Contributions
},
{
'name': 'Scope 3',
'children': scope3Contributions
}
]
}
,{
'type': 'sankey',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sankey)',
'value': {
'data': sankeyNodes,
'links': sankeyLinks
}
},
{
'type': 'number',
'unit': '%',
'description': 'Primrdatenanteil',
'value': outputPDS * 100
}];`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p9_key:"local output_p9_key = '-';"},fragmentVarSnippets:{output_p9_value:"local output_p9_value = { scope: 'control', ghgFactorUnit: 'kg CO2e / Stueck', ghgFactor: totalFootprint, amount: 1, unit: 'Stueck (Stueckzahl)', type: 'Primaerdaten', pds: outputPDS, footprintContributions: footprintContributions, sankeyNodes: sankeyNodes,sankeyLinks: sankeyLinks, nodeName: transition_name, '$visualisations': visualisations };"}},{id:"6c5f99f4-2b10-4dd9-8427-bd2bd18696a1",name:"Legendendruck",preface:`// calculations
// ghg factors in kg CO2e per g
local ghgFactors = { 'NF3': 13.4, 'SF6': 18.3, 'CF4': 5.3};
local calculateFootprint(component) = component.amount  * (if component.scope == 1 then (if component.unit == 'mg' then 0.001 else if component.unit == 'kg' then 1000 else 1) * ghgFactors[component.ghg] * component.scalingFactor else if component.scope == 2 then (if component.unit == 'Wh' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'g CO2e / kWh' then 0.001 else if component.ghgFactorUnit == 'mg CO2e / kWh' then 0.000001 else 1) * component.scalingFactor else if component.scope == 3 then (if component.unit == 'mg (Gewicht)' then 0.000001 else if component.unit == 'g (Gewicht)' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'mg CO2e / Stueck oder kg' then 0.000001 else if component.ghgFactorUnit == 'g CO2e / Stueck oder kg' then 0.001 else 1) * component.scalingFactor else component.ghgFactor) * Allokation / 100;
local individualFootprints = std.map(calculateFootprint,input_values);
// calculate Scope 1-Emissions
local generateScope1Contribution(index,element) = if (element.scope == 1) then { name: input_names[index], value: individualFootprints[index] };
local sum(arr, n) = if (n <= 0) then 0 else sum(arr, n-1) + arr[n-1];
local totalFootprint = sum(individualFootprints, std.length(individualFootprints));
local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;
local footprintShares = std.map(calculatePCFShare,individualFootprints);
local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;
local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));
local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));
// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != 'start') && (element.scope != 'control')) then { name: input_names[index], value: individualFootprints[index] };
local generateScope2Contribution(index,element) = if (element.scope == 2) then { name: input_names[index], value: individualFootprints[index] };
local generateScope3Contribution(index,element) = if (element.scope == 3) then { name: input_names[index], value: individualFootprints[index] };
local filterNull(element) = element != null;
local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));
// fetch contributions from incoming places
local filterControl(element) = element.scope == 'control';
local incomingControlPlaces = std.filter(filterControl, input_values);
local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions['1'];
local getScope2Contribution(element) = element.footprintContributions['2'];
local getScope3Contribution(element) = element.footprintContributions['3'];
local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));
local footprintContributions = { '1': incomingScope1Contributions + scope1FromThisTransition, '2': incomingScope2Contributions + scope2FromThisTransition,'3': incomingScope3Contributions + scope3FromThisTransition};
local scope1Contributions = incomingScope1Contributions + scope1FromThisTransition;
local scope2Contributions = incomingScope2Contributions + scope2FromThisTransition;
local scope3Contributions = incomingScope3Contributions + scope3FromThisTransition;
// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != 'control') && (input_values[index].scope != 'start') then { name: element }; local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));
local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];
//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };
local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));
local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;
// Visualisations:
local visualisations = [{
'type': 'number',
'unit': 'kg CO2e',
'description': 'THG-Fussabdruck',
'value': totalFootprint
},
{
'type': 'sunburst',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sunburst)',
'value': [
{
'name': 'Scope 1',
'children': scope1Contributions
},
{
'name': 'Scope 2',
'children': scope2Contributions
},
{
'name': 'Scope 3',
'children': scope3Contributions
}
]
}
,{
'type': 'sankey',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sankey)',
'value': {
'data': sankeyNodes,
'links': sankeyLinks
}
},
{
'type': 'number',
'unit': '%',
'description': 'Primrdatenanteil',
'value': outputPDS * 100
}];`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_leiterplatte_key:"local output_leiterplatte_key = '-';"},fragmentVarSnippets:{output_leiterplatte_value:"local output_leiterplatte_value = { scope: 'control', ghgFactorUnit: 'kg CO2e / Stueck', ghgFactor: totalFootprint, amount: 1, unit: 'Stueck (Stueckzahl)', type: 'Primaerdaten', pds: outputPDS, footprintContributions: footprintContributions, sankeyNodes: sankeyNodes,sankeyLinks: sankeyLinks, nodeName: transition_name, '$visualisations': visualisations };"}}],arcs:[{id:"ebc2cbb5-32c4-4d19-ae03-a525b2cafe46",filter:"$.*",fromId:"5309778c-2f6a-44c0-aa17-bb3f15b7a606",toId:"24b114f0-0cf6-4cac-9aad-e034420f35e3"},{id:"189b44da-07d6-4bf6-9512-b47cc9a673f7",filter:"$",fromId:"24b114f0-0cf6-4cac-9aad-e034420f35e3",toId:"b1987eda-8e08-4ced-b830-b6567f952ded"},{id:"394700a9-4fa6-4f52-b5c5-a1ec92fbf559",filter:"$.*",fromId:"b1987eda-8e08-4ced-b830-b6567f952ded",toId:"ad131bbd-9f06-450f-92a9-02a23ff57dc9"},{id:"663eb46f-5c4e-4050-a69d-ebc8c7d17f6f",filter:"$",fromId:"ad131bbd-9f06-450f-92a9-02a23ff57dc9",toId:"f08869f7-1c58-44f1-a0ee-51f8d948856c"},{id:"8eb7b925-fd54-489c-9a8b-8c5034a857bf",filter:"$.*",fromId:"f08869f7-1c58-44f1-a0ee-51f8d948856c",toId:"282fe852-ee69-4f85-93c7-b8b2a3aabe06"},{id:"33c16aeb-6a8c-407c-b847-00e69c01c724",filter:"$",fromId:"282fe852-ee69-4f85-93c7-b8b2a3aabe06",toId:"4d6e9dac-bf68-4b7b-86e2-fdbbb1261448"},{id:"ea62e657-95a9-4e5f-97d7-ab9d18e9966d",filter:"$.*",fromId:"4d6e9dac-bf68-4b7b-86e2-fdbbb1261448",toId:"c7c6e86a-5446-4ef5-ba45-d4547bff759d"},{id:"0d1cd340-ac29-415b-bf07-c97c8dd2144c",filter:"$",fromId:"c7c6e86a-5446-4ef5-ba45-d4547bff759d",toId:"487ea0ae-a4de-43e7-bb49-5953c547398b"},{id:"ecd4967b-149e-4db8-adbb-ecbe792c50b8",filter:"$.*",fromId:"487ea0ae-a4de-43e7-bb49-5953c547398b",toId:"cdfc3613-646a-45d2-80ff-d1a05eef5867"},{id:"8d9fb05d-0763-4c85-b354-d5cd9f5e2c71",filter:"$",fromId:"cdfc3613-646a-45d2-80ff-d1a05eef5867",toId:"d312e07b-ebb7-4901-baa3-4685f2ebff45"},{id:"1cbde8e6-32f6-45e5-a766-b144951b18fc",filter:"$.*",fromId:"d312e07b-ebb7-4901-baa3-4685f2ebff45",toId:"5b35b671-368c-42fc-8f5e-55acbe10d9de"},{id:"33ad877d-e190-4b1c-8c08-994cfb8057fb",filter:"$",fromId:"5b35b671-368c-42fc-8f5e-55acbe10d9de",toId:"d779b8e0-9388-4502-971c-bf3b4addc44e"},{id:"b7df865d-b5f2-4daf-9939-eb6605863784",filter:"$.*",fromId:"d779b8e0-9388-4502-971c-bf3b4addc44e",toId:"5ae74711-b66a-4d67-831d-c69f190f6117"},{id:"6a9ed89c-33f7-4132-89db-a3f4aa9706a7",filter:"$",fromId:"5ae74711-b66a-4d67-831d-c69f190f6117",toId:"257dbecb-8cf9-4411-8f95-1c787c8333c4"},{id:"6eab3779-35ef-4ca2-a4ff-ec648fde309a",filter:"$.*",fromId:"257dbecb-8cf9-4411-8f95-1c787c8333c4",toId:"f73a9c93-3918-4ec1-9418-4c7ee1e4e1f0"},{id:"2899503b-e44b-4994-8705-34d457f601fc",filter:"$",fromId:"f73a9c93-3918-4ec1-9418-4c7ee1e4e1f0",toId:"f5cf8f49-6389-4307-8c11-579e41685514"},{id:"a019943d-d5e9-4a95-9172-5f7fb1564528",filter:"$.*",fromId:"f5cf8f49-6389-4307-8c11-579e41685514",toId:"cb95ac77-e8db-4099-8e29-4ac3121c2878"},{id:"12d77567-c04b-4668-a54c-cd27c8700f54",filter:"$",fromId:"cb95ac77-e8db-4099-8e29-4ac3121c2878",toId:"6032860d-f236-4f7e-8be7-197934f4114b"},{id:"71278fb4-3e78-421a-98d2-8e0fe0c1046f",filter:"$.*",fromId:"6032860d-f236-4f7e-8be7-197934f4114b",toId:"6c5f99f4-2b10-4dd9-8427-bd2bd18696a1"},{id:"fb9cf236-7666-4473-9c86-9a8679a003b3",filter:"$",fromId:"6c5f99f4-2b10-4dd9-8427-bd2bd18696a1",toId:"2575f3d8-5e2b-41d6-ad8f-0d085c266c07"}]},layoutData:{cells:[{type:"pn.Transition",size:{width:100,height:50},position:{x:275,y:275},angle:0,id:"24b114f0-0cf6-4cac-9aad-e034420f35e3",jsonnetsType:"transition",z:1,attrs:{".label":{fill:"#7a7e9b",text:"Lagenaufbau"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:648,y:276},angle:0,id:"ad131bbd-9f06-450f-92a9-02a23ff57dc9",jsonnetsType:"transition",z:2,attrs:{".label":{fill:"#7a7e9b",text:"Laminieren"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:1068,y:276},angle:0,id:"282fe852-ee69-4f85-93c7-b8b2a3aabe06",jsonnetsType:"transition",z:3,attrs:{".label":{fill:"#7a7e9b",text:"Bohren"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:1320,y:420},angle:0,id:"c7c6e86a-5446-4ef5-ba45-d4547bff759d",jsonnetsType:"transition",z:4,attrs:{".label":{fill:"#7a7e9b",text:"Plating"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:1068,y:564},angle:0,id:"cdfc3613-646a-45d2-80ff-d1a05eef5867",jsonnetsType:"transition",z:5,attrs:{".label":{fill:"#7a7e9b",text:"Ltstoppmaske"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:648,y:564},angle:0,id:"5b35b671-368c-42fc-8f5e-55acbe10d9de",jsonnetsType:"transition",z:6,attrs:{".label":{fill:"#7a7e9b",text:"Lithografie"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:264,y:564},angle:0,id:"5ae74711-b66a-4d67-831d-c69f190f6117",jsonnetsType:"transition",z:7,attrs:{".label":{fill:"#7a7e9b",text:"Nachbearbeiten"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:72,y:744},angle:0,id:"f73a9c93-3918-4ec1-9418-4c7ee1e4e1f0",jsonnetsType:"transition",z:8,attrs:{".label":{fill:"#7a7e9b",text:"Testen"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:252,y:912},angle:0,id:"cb95ac77-e8db-4099-8e29-4ac3121c2878",jsonnetsType:"transition",z:9,attrs:{".label":{fill:"#7a7e9b",text:"Oberflchenfinish"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:648,y:912},angle:0,id:"6c5f99f4-2b10-4dd9-8427-bd2bd18696a1",jsonnetsType:"transition",z:10,attrs:{".label":{fill:"#7a7e9b",text:"Legendendruck"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:108,y:276},angle:0,tokens:1,id:"5309778c-2f6a-44c0-aa17-bb3f15b7a606",jsonnetsType:"place",z:11,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Start"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:480,y:276},angle:0,tokens:0,id:"b1987eda-8e08-4ced-b830-b6567f952ded",jsonnetsType:"place",z:12,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p1"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:888,y:276},angle:0,tokens:0,id:"f08869f7-1c58-44f1-a0ee-51f8d948856c",jsonnetsType:"place",z:13,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p2"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:1344,y:276},angle:0,tokens:0,id:"4d6e9dac-bf68-4b7b-86e2-fdbbb1261448",jsonnetsType:"place",z:14,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p3"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:1344,y:564},angle:0,tokens:0,id:"487ea0ae-a4de-43e7-bb49-5953c547398b",jsonnetsType:"place",z:15,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p4"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:876,y:564},angle:0,tokens:0,id:"d312e07b-ebb7-4901-baa3-4685f2ebff45",jsonnetsType:"place",z:16,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p5"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:468,y:564},angle:0,tokens:0,id:"d779b8e0-9388-4502-971c-bf3b4addc44e",jsonnetsType:"place",z:17,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p6"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:96,y:564},angle:0,tokens:0,id:"257dbecb-8cf9-4411-8f95-1c787c8333c4",jsonnetsType:"place",z:18,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p7"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:480,y:912},angle:0,tokens:0,id:"6032860d-f236-4f7e-8be7-197934f4114b",jsonnetsType:"place",z:19,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p9"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:876,y:912},angle:0,tokens:0,id:"2575f3d8-5e2b-41d6-ad8f-0d085c266c07",jsonnetsType:"place",z:20,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Leiterplatte"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:96,y:912},angle:0,tokens:0,id:"f5cf8f49-6389-4307-8c11-579e41685514",jsonnetsType:"place",z:21,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p8"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"standard.Link",source:{id:"5309778c-2f6a-44c0-aa17-bb3f15b7a606",selector:".root"},target:{id:"24b114f0-0cf6-4cac-9aad-e034420f35e3",selector:".root"},id:"ebc2cbb5-32c4-4d19-ae03-a525b2cafe46",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:22,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"24b114f0-0cf6-4cac-9aad-e034420f35e3",selector:".root"},target:{id:"b1987eda-8e08-4ced-b830-b6567f952ded",selector:".root"},id:"189b44da-07d6-4bf6-9512-b47cc9a673f7",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:23,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"b1987eda-8e08-4ced-b830-b6567f952ded",selector:".root"},target:{id:"ad131bbd-9f06-450f-92a9-02a23ff57dc9",selector:".root"},id:"394700a9-4fa6-4f52-b5c5-a1ec92fbf559",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:24,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"ad131bbd-9f06-450f-92a9-02a23ff57dc9",selector:".root"},target:{id:"f08869f7-1c58-44f1-a0ee-51f8d948856c",selector:".root"},id:"663eb46f-5c4e-4050-a69d-ebc8c7d17f6f",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:25,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"f08869f7-1c58-44f1-a0ee-51f8d948856c",selector:".root"},target:{id:"282fe852-ee69-4f85-93c7-b8b2a3aabe06",selector:".root"},id:"8eb7b925-fd54-489c-9a8b-8c5034a857bf",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:26,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"282fe852-ee69-4f85-93c7-b8b2a3aabe06",selector:".root"},target:{id:"4d6e9dac-bf68-4b7b-86e2-fdbbb1261448",selector:".root"},id:"33c16aeb-6a8c-407c-b847-00e69c01c724",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:27,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"4d6e9dac-bf68-4b7b-86e2-fdbbb1261448",selector:".root"},target:{id:"c7c6e86a-5446-4ef5-ba45-d4547bff759d",selector:".root"},id:"ea62e657-95a9-4e5f-97d7-ab9d18e9966d",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:28,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"c7c6e86a-5446-4ef5-ba45-d4547bff759d",selector:".root"},target:{id:"487ea0ae-a4de-43e7-bb49-5953c547398b",selector:".root"},id:"0d1cd340-ac29-415b-bf07-c97c8dd2144c",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:29,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"487ea0ae-a4de-43e7-bb49-5953c547398b",selector:".root"},target:{id:"cdfc3613-646a-45d2-80ff-d1a05eef5867",selector:".root"},id:"ecd4967b-149e-4db8-adbb-ecbe792c50b8",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:30,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"cdfc3613-646a-45d2-80ff-d1a05eef5867",selector:".root"},target:{id:"d312e07b-ebb7-4901-baa3-4685f2ebff45",selector:".root"},id:"8d9fb05d-0763-4c85-b354-d5cd9f5e2c71",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:31,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"d312e07b-ebb7-4901-baa3-4685f2ebff45",selector:".root"},target:{id:"5b35b671-368c-42fc-8f5e-55acbe10d9de",selector:".root"},id:"1cbde8e6-32f6-45e5-a766-b144951b18fc",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:32,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"5b35b671-368c-42fc-8f5e-55acbe10d9de",selector:".root"},target:{id:"d779b8e0-9388-4502-971c-bf3b4addc44e",selector:".root"},id:"33ad877d-e190-4b1c-8c08-994cfb8057fb",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:33,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"d779b8e0-9388-4502-971c-bf3b4addc44e",selector:".root"},target:{id:"5ae74711-b66a-4d67-831d-c69f190f6117",selector:".root"},id:"b7df865d-b5f2-4daf-9939-eb6605863784",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:34,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"5ae74711-b66a-4d67-831d-c69f190f6117",selector:".root"},target:{id:"257dbecb-8cf9-4411-8f95-1c787c8333c4",selector:".root"},id:"6a9ed89c-33f7-4132-89db-a3f4aa9706a7",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:35,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"257dbecb-8cf9-4411-8f95-1c787c8333c4",selector:".root"},target:{id:"f73a9c93-3918-4ec1-9418-4c7ee1e4e1f0",selector:".root"},id:"6eab3779-35ef-4ca2-a4ff-ec648fde309a",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:36,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"f73a9c93-3918-4ec1-9418-4c7ee1e4e1f0",selector:".root"},target:{id:"f5cf8f49-6389-4307-8c11-579e41685514",selector:".root"},id:"2899503b-e44b-4994-8705-34d457f601fc",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:37,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"f5cf8f49-6389-4307-8c11-579e41685514",selector:".root"},target:{id:"cb95ac77-e8db-4099-8e29-4ac3121c2878",selector:".root"},id:"a019943d-d5e9-4a95-9172-5f7fb1564528",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:38,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"cb95ac77-e8db-4099-8e29-4ac3121c2878",selector:".root"},target:{id:"6032860d-f236-4f7e-8be7-197934f4114b",selector:".root"},id:"12d77567-c04b-4668-a54c-cd27c8700f54",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:39,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"6032860d-f236-4f7e-8be7-197934f4114b",selector:".root"},target:{id:"6c5f99f4-2b10-4dd9-8427-bd2bd18696a1",selector:".root"},id:"71278fb4-3e78-421a-98d2-8e0fe0c1046f",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:40,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"6c5f99f4-2b10-4dd9-8427-bd2bd18696a1",selector:".root"},target:{id:"2575f3d8-5e2b-41d6-ad8f-0d085c266c07",selector:".root"},id:"fb9cf236-7666-4473-9c86-9a8679a003b3",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:41,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}}]}}},{name:"Wafer",net:{typeData:{placeTypes:{"5826fe10-c01b-486e-b213-9e33f30cf8c2":"start","8be9e972-2eba-4766-8af4-1d5e18f2f0d3":"end","6b2916e9-3c05-4b3c-8f4d-469b81cb05a9":"control","d52d8bfb-4e9e-4e45-8487-6794fb4c9c60":"control","f5c8291f-8cb8-4f85-825a-33e170c20c11":"control","f1205391-5230-47f3-b7ac-6615d1830898":"control","8d30c6c3-65d0-4485-a8cd-714ee0ba569c":"control","825401fa-60cd-497d-927e-ccd110cbd236":"control"},transitionTypes:{"83447b3c-d063-4eb3-82df-d6ac7e5838f9":"activity","be938c8c-eb3f-4019-9248-d06df11f6668":"activity","7da089da-d214-432c-a8fd-6ab38081843b":"activity","425ec761-277c-4bc6-8b63-60e651b1223e":"activity","3d887d06-6b5e-4733-b487-fb28393f995a":"activity","9df90d66-8f44-4709-aa9e-015d92d6f907":"activity","e364df88-9898-4317-9dd4-71eced03218c":"activity"}},netData:{places:[{id:"5826fe10-c01b-486e-b213-9e33f30cf8c2",name:"Start",marking:[{amount:1,ghgFactor:0,scope:"start",pds:0}],schema:{type:"array",title:"start",maxItems:1,items:{type:"object"},$id:"5826fe10-c01b-486e-b213-9e33f30cf8c2"}},{id:"6b2916e9-3c05-4b3c-8f4d-469b81cb05a9",name:"p1",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"6b2916e9-3c05-4b3c-8f4d-469b81cb05a9"}},{id:"d52d8bfb-4e9e-4e45-8487-6794fb4c9c60",name:"p2",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"d52d8bfb-4e9e-4e45-8487-6794fb4c9c60"}},{id:"f5c8291f-8cb8-4f85-825a-33e170c20c11",name:"p3",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"f5c8291f-8cb8-4f85-825a-33e170c20c11"}},{id:"f1205391-5230-47f3-b7ac-6615d1830898",name:"p4",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"f1205391-5230-47f3-b7ac-6615d1830898"}},{id:"8d30c6c3-65d0-4485-a8cd-714ee0ba569c",name:"p5",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"8d30c6c3-65d0-4485-a8cd-714ee0ba569c"}},{id:"825401fa-60cd-497d-927e-ccd110cbd236",name:"p6",marking:[],schema:{type:"array",title:"control",maxItems:1,items:{type:"object"},$id:"825401fa-60cd-497d-927e-ccd110cbd236"}},{id:"8be9e972-2eba-4766-8af4-1d5e18f2f0d3",name:"Wafer",marking:[],schema:{type:"array",title:"end",maxItems:1,items:{type:"object"},$id:"8be9e972-2eba-4766-8af4-1d5e18f2f0d3"}}],transitions:[{id:"83447b3c-d063-4eb3-82df-d6ac7e5838f9",name:"Siliziumpulver einschmelzen",preface:`// calculations
// ghg factors in kg CO2e per g
local ghgFactors = { 'NF3': 13.4, 'SF6': 18.3, 'CF4': 5.3};
local calculateFootprint(component) = component.amount  * (if component.scope == 1 then (if component.unit == 'mg' then 0.001 else if component.unit == 'kg' then 1000 else 1) * ghgFactors[component.ghg] * component.scalingFactor else if component.scope == 2 then (if component.unit == 'Wh' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'g CO2e / kWh' then 0.001 else if component.ghgFactorUnit == 'mg CO2e / kWh' then 0.000001 else 1) * component.scalingFactor else if component.scope == 3 then (if component.unit == 'mg (Gewicht)' then 0.000001 else if component.unit == 'g (Gewicht)' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'mg CO2e / Stueck oder kg' then 0.000001 else if component.ghgFactorUnit == 'g CO2e / Stueck oder kg' then 0.001 else 1) * component.scalingFactor else component.ghgFactor) * Allokation / 100;
local individualFootprints = std.map(calculateFootprint,input_values);
// calculate Scope 1-Emissions
local generateScope1Contribution(index,element) = if (element.scope == 1) then { name: input_names[index], value: individualFootprints[index] };
local sum(arr, n) = if (n <= 0) then 0 else sum(arr, n-1) + arr[n-1];
local totalFootprint = sum(individualFootprints, std.length(individualFootprints));
local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;
local footprintShares = std.map(calculatePCFShare,individualFootprints);
local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;
local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));
local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));
// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != 'start') && (element.scope != 'control')) then { name: input_names[index], value: individualFootprints[index] };
local generateScope2Contribution(index,element) = if (element.scope == 2) then { name: input_names[index], value: individualFootprints[index] };
local generateScope3Contribution(index,element) = if (element.scope == 3) then { name: input_names[index], value: individualFootprints[index] };
local filterNull(element) = element != null;
local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));
// fetch contributions from incoming places
local filterControl(element) = element.scope == 'control';
local incomingControlPlaces = std.filter(filterControl, input_values);
local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions['1'];
local getScope2Contribution(element) = element.footprintContributions['2'];
local getScope3Contribution(element) = element.footprintContributions['3'];
local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));
local footprintContributions = { '1': incomingScope1Contributions + scope1FromThisTransition, '2': incomingScope2Contributions + scope2FromThisTransition,'3': incomingScope3Contributions + scope3FromThisTransition};
local scope1Contributions = incomingScope1Contributions + scope1FromThisTransition;
local scope2Contributions = incomingScope2Contributions + scope2FromThisTransition;
local scope3Contributions = incomingScope3Contributions + scope3FromThisTransition;
// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != 'control') && (input_values[index].scope != 'start') then { name: element }; local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));
local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];
//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };
local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));
local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;
// Visualisations:
local visualisations = [{
'type': 'number',
'unit': 'kg CO2e',
'description': 'THG-Fussabdruck',
'value': totalFootprint
},
{
'type': 'sunburst',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sunburst)',
'value': [
{
'name': 'Scope 1',
'children': scope1Contributions
},
{
'name': 'Scope 2',
'children': scope2Contributions
},
{
'name': 'Scope 3',
'children': scope3Contributions
}
]
}
,{
'type': 'sankey',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sankey)',
'value': {
'data': sankeyNodes,
'links': sankeyLinks
}
},
{
'type': 'number',
'unit': '%',
'description': 'Primrdatenanteil',
'value': outputPDS * 100
}];`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p1_key:"local output_p1_key = '-';"},fragmentVarSnippets:{output_p1_value:"local output_p1_value = { scope: 'control', ghgFactorUnit: 'kg CO2e / Stueck', ghgFactor: totalFootprint, amount: 1, unit: 'Stueck (Stueckzahl)', type: 'Primaerdaten', pds: outputPDS, footprintContributions: footprintContributions, sankeyNodes: sankeyNodes,sankeyLinks: sankeyLinks, nodeName: transition_name, '$visualisations': visualisations };"}},{id:"be938c8c-eb3f-4019-9248-d06df11f6668",name:"Reinigen",preface:`// calculations
// ghg factors in kg CO2e per g
local ghgFactors = { 'NF3': 13.4, 'SF6': 18.3, 'CF4': 5.3};
local calculateFootprint(component) = component.amount  * (if component.scope == 1 then (if component.unit == 'mg' then 0.001 else if component.unit == 'kg' then 1000 else 1) * ghgFactors[component.ghg] * component.scalingFactor else if component.scope == 2 then (if component.unit == 'Wh' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'g CO2e / kWh' then 0.001 else if component.ghgFactorUnit == 'mg CO2e / kWh' then 0.000001 else 1) * component.scalingFactor else if component.scope == 3 then (if component.unit == 'mg (Gewicht)' then 0.000001 else if component.unit == 'g (Gewicht)' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'mg CO2e / Stueck oder kg' then 0.000001 else if component.ghgFactorUnit == 'g CO2e / Stueck oder kg' then 0.001 else 1) * component.scalingFactor else component.ghgFactor) * Allokation / 100;
local individualFootprints = std.map(calculateFootprint,input_values);
// calculate Scope 1-Emissions
local generateScope1Contribution(index,element) = if (element.scope == 1) then { name: input_names[index], value: individualFootprints[index] };
local sum(arr, n) = if (n <= 0) then 0 else sum(arr, n-1) + arr[n-1];
local totalFootprint = sum(individualFootprints, std.length(individualFootprints));
local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;
local footprintShares = std.map(calculatePCFShare,individualFootprints);
local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;
local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));
local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));
// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != 'start') && (element.scope != 'control')) then { name: input_names[index], value: individualFootprints[index] };
local generateScope2Contribution(index,element) = if (element.scope == 2) then { name: input_names[index], value: individualFootprints[index] };
local generateScope3Contribution(index,element) = if (element.scope == 3) then { name: input_names[index], value: individualFootprints[index] };
local filterNull(element) = element != null;
local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));
// fetch contributions from incoming places
local filterControl(element) = element.scope == 'control';
local incomingControlPlaces = std.filter(filterControl, input_values);
local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions['1'];
local getScope2Contribution(element) = element.footprintContributions['2'];
local getScope3Contribution(element) = element.footprintContributions['3'];
local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));
local footprintContributions = { '1': incomingScope1Contributions + scope1FromThisTransition, '2': incomingScope2Contributions + scope2FromThisTransition,'3': incomingScope3Contributions + scope3FromThisTransition};
local scope1Contributions = incomingScope1Contributions + scope1FromThisTransition;
local scope2Contributions = incomingScope2Contributions + scope2FromThisTransition;
local scope3Contributions = incomingScope3Contributions + scope3FromThisTransition;
// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != 'control') && (input_values[index].scope != 'start') then { name: element }; local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));
local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];
//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };
local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));
local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;
// Visualisations:
local visualisations = [{
'type': 'number',
'unit': 'kg CO2e',
'description': 'THG-Fussabdruck',
'value': totalFootprint
},
{
'type': 'sunburst',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sunburst)',
'value': [
{
'name': 'Scope 1',
'children': scope1Contributions
},
{
'name': 'Scope 2',
'children': scope2Contributions
},
{
'name': 'Scope 3',
'children': scope3Contributions
}
]
}
,{
'type': 'sankey',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sankey)',
'value': {
'data': sankeyNodes,
'links': sankeyLinks
}
},
{
'type': 'number',
'unit': '%',
'description': 'Primrdatenanteil',
'value': outputPDS * 100
}];`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p2_key:"local output_p2_key = '-';"},fragmentVarSnippets:{output_p2_value:"local output_p2_value = { scope: 'control', ghgFactorUnit: 'kg CO2e / Stueck', ghgFactor: totalFootprint, amount: 1, unit: 'Stueck (Stueckzahl)', type: 'Primaerdaten', pds: outputPDS, footprintContributions: footprintContributions, sankeyNodes: sankeyNodes,sankeyLinks: sankeyLinks, nodeName: transition_name, '$visualisations': visualisations };"}},{id:"7da089da-d214-432c-a8fd-6ab38081843b",name:"Polysilizium einschmelzen",preface:`// calculations
// ghg factors in kg CO2e per g
local ghgFactors = { 'NF3': 13.4, 'SF6': 18.3, 'CF4': 5.3};
local calculateFootprint(component) = component.amount  * (if component.scope == 1 then (if component.unit == 'mg' then 0.001 else if component.unit == 'kg' then 1000 else 1) * ghgFactors[component.ghg] * component.scalingFactor else if component.scope == 2 then (if component.unit == 'Wh' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'g CO2e / kWh' then 0.001 else if component.ghgFactorUnit == 'mg CO2e / kWh' then 0.000001 else 1) * component.scalingFactor else if component.scope == 3 then (if component.unit == 'mg (Gewicht)' then 0.000001 else if component.unit == 'g (Gewicht)' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'mg CO2e / Stueck oder kg' then 0.000001 else if component.ghgFactorUnit == 'g CO2e / Stueck oder kg' then 0.001 else 1) * component.scalingFactor else component.ghgFactor) * Allokation / 100;
local individualFootprints = std.map(calculateFootprint,input_values);
// calculate Scope 1-Emissions
local generateScope1Contribution(index,element) = if (element.scope == 1) then { name: input_names[index], value: individualFootprints[index] };
local sum(arr, n) = if (n <= 0) then 0 else sum(arr, n-1) + arr[n-1];
local totalFootprint = sum(individualFootprints, std.length(individualFootprints));
local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;
local footprintShares = std.map(calculatePCFShare,individualFootprints);
local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;
local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));
local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));
// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != 'start') && (element.scope != 'control')) then { name: input_names[index], value: individualFootprints[index] };
local generateScope2Contribution(index,element) = if (element.scope == 2) then { name: input_names[index], value: individualFootprints[index] };
local generateScope3Contribution(index,element) = if (element.scope == 3) then { name: input_names[index], value: individualFootprints[index] };
local filterNull(element) = element != null;
local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));
// fetch contributions from incoming places
local filterControl(element) = element.scope == 'control';
local incomingControlPlaces = std.filter(filterControl, input_values);
local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions['1'];
local getScope2Contribution(element) = element.footprintContributions['2'];
local getScope3Contribution(element) = element.footprintContributions['3'];
local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));
local footprintContributions = { '1': incomingScope1Contributions + scope1FromThisTransition, '2': incomingScope2Contributions + scope2FromThisTransition,'3': incomingScope3Contributions + scope3FromThisTransition};
local scope1Contributions = incomingScope1Contributions + scope1FromThisTransition;
local scope2Contributions = incomingScope2Contributions + scope2FromThisTransition;
local scope3Contributions = incomingScope3Contributions + scope3FromThisTransition;
// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != 'control') && (input_values[index].scope != 'start') then { name: element }; local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));
local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];
//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };
local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));
local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;
// Visualisations:
local visualisations = [{
'type': 'number',
'unit': 'kg CO2e',
'description': 'THG-Fussabdruck',
'value': totalFootprint
},
{
'type': 'sunburst',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sunburst)',
'value': [
{
'name': 'Scope 1',
'children': scope1Contributions
},
{
'name': 'Scope 2',
'children': scope2Contributions
},
{
'name': 'Scope 3',
'children': scope3Contributions
}
]
}
,{
'type': 'sankey',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sankey)',
'value': {
'data': sankeyNodes,
'links': sankeyLinks
}
},
{
'type': 'number',
'unit': '%',
'description': 'Primrdatenanteil',
'value': outputPDS * 100
}];`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p3_key:"local output_p3_key = '-';"},fragmentVarSnippets:{output_p3_value:"local output_p3_value = { scope: 'control', ghgFactorUnit: 'kg CO2e / Stueck', ghgFactor: totalFootprint, amount: 1, unit: 'Stueck (Stueckzahl)', type: 'Primaerdaten', pds: outputPDS, footprintContributions: footprintContributions, sankeyNodes: sankeyNodes,sankeyLinks: sankeyLinks, nodeName: transition_name, '$visualisations': visualisations };"}},{id:"425ec761-277c-4bc6-8b63-60e651b1223e",name:"Czochralski-Verfahren",preface:`// calculations
// ghg factors in kg CO2e per g
local ghgFactors = { 'NF3': 13.4, 'SF6': 18.3, 'CF4': 5.3};
local calculateFootprint(component) = component.amount  * (if component.scope == 1 then (if component.unit == 'mg' then 0.001 else if component.unit == 'kg' then 1000 else 1) * ghgFactors[component.ghg] * component.scalingFactor else if component.scope == 2 then (if component.unit == 'Wh' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'g CO2e / kWh' then 0.001 else if component.ghgFactorUnit == 'mg CO2e / kWh' then 0.000001 else 1) * component.scalingFactor else if component.scope == 3 then (if component.unit == 'mg (Gewicht)' then 0.000001 else if component.unit == 'g (Gewicht)' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'mg CO2e / Stueck oder kg' then 0.000001 else if component.ghgFactorUnit == 'g CO2e / Stueck oder kg' then 0.001 else 1) * component.scalingFactor else component.ghgFactor) * Allokation / 100;
local individualFootprints = std.map(calculateFootprint,input_values);
// calculate Scope 1-Emissions
local generateScope1Contribution(index,element) = if (element.scope == 1) then { name: input_names[index], value: individualFootprints[index] };
local sum(arr, n) = if (n <= 0) then 0 else sum(arr, n-1) + arr[n-1];
local totalFootprint = sum(individualFootprints, std.length(individualFootprints));
local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;
local footprintShares = std.map(calculatePCFShare,individualFootprints);
local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;
local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));
local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));
// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != 'start') && (element.scope != 'control')) then { name: input_names[index], value: individualFootprints[index] };
local generateScope2Contribution(index,element) = if (element.scope == 2) then { name: input_names[index], value: individualFootprints[index] };
local generateScope3Contribution(index,element) = if (element.scope == 3) then { name: input_names[index], value: individualFootprints[index] };
local filterNull(element) = element != null;
local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));
// fetch contributions from incoming places
local filterControl(element) = element.scope == 'control';
local incomingControlPlaces = std.filter(filterControl, input_values);
local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions['1'];
local getScope2Contribution(element) = element.footprintContributions['2'];
local getScope3Contribution(element) = element.footprintContributions['3'];
local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));
local footprintContributions = { '1': incomingScope1Contributions + scope1FromThisTransition, '2': incomingScope2Contributions + scope2FromThisTransition,'3': incomingScope3Contributions + scope3FromThisTransition};
local scope1Contributions = incomingScope1Contributions + scope1FromThisTransition;
local scope2Contributions = incomingScope2Contributions + scope2FromThisTransition;
local scope3Contributions = incomingScope3Contributions + scope3FromThisTransition;
// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != 'control') && (input_values[index].scope != 'start') then { name: element }; local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));
local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];
//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };
local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));
local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;
// Visualisations:
local visualisations = [{
'type': 'number',
'unit': 'kg CO2e',
'description': 'THG-Fussabdruck',
'value': totalFootprint
},
{
'type': 'sunburst',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sunburst)',
'value': [
{
'name': 'Scope 1',
'children': scope1Contributions
},
{
'name': 'Scope 2',
'children': scope2Contributions
},
{
'name': 'Scope 3',
'children': scope3Contributions
}
]
}
,{
'type': 'sankey',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sankey)',
'value': {
'data': sankeyNodes,
'links': sankeyLinks
}
},
{
'type': 'number',
'unit': '%',
'description': 'Primrdatenanteil',
'value': outputPDS * 100
}];`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p4_key:"local output_p4_key = '-';"},fragmentVarSnippets:{output_p4_value:"local output_p4_value = { scope: 'control', ghgFactorUnit: 'kg CO2e / Stueck', ghgFactor: totalFootprint, amount: 1, unit: 'Stueck (Stueckzahl)', type: 'Primaerdaten', pds: outputPDS, footprintContributions: footprintContributions, sankeyNodes: sankeyNodes,sankeyLinks: sankeyLinks, nodeName: transition_name, '$visualisations': visualisations };"}},{id:"3d887d06-6b5e-4733-b487-fb28393f995a",name:"Sgen",preface:`// calculations
// ghg factors in kg CO2e per g
local ghgFactors = { 'NF3': 13.4, 'SF6': 18.3, 'CF4': 5.3};
local calculateFootprint(component) = component.amount  * (if component.scope == 1 then (if component.unit == 'mg' then 0.001 else if component.unit == 'kg' then 1000 else 1) * ghgFactors[component.ghg] * component.scalingFactor else if component.scope == 2 then (if component.unit == 'Wh' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'g CO2e / kWh' then 0.001 else if component.ghgFactorUnit == 'mg CO2e / kWh' then 0.000001 else 1) * component.scalingFactor else if component.scope == 3 then (if component.unit == 'mg (Gewicht)' then 0.000001 else if component.unit == 'g (Gewicht)' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'mg CO2e / Stueck oder kg' then 0.000001 else if component.ghgFactorUnit == 'g CO2e / Stueck oder kg' then 0.001 else 1) * component.scalingFactor else component.ghgFactor) * Allokation / 100;
local individualFootprints = std.map(calculateFootprint,input_values);
// calculate Scope 1-Emissions
local generateScope1Contribution(index,element) = if (element.scope == 1) then { name: input_names[index], value: individualFootprints[index] };
local sum(arr, n) = if (n <= 0) then 0 else sum(arr, n-1) + arr[n-1];
local totalFootprint = sum(individualFootprints, std.length(individualFootprints));
local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;
local footprintShares = std.map(calculatePCFShare,individualFootprints);
local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;
local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));
local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));
// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != 'start') && (element.scope != 'control')) then { name: input_names[index], value: individualFootprints[index] };
local generateScope2Contribution(index,element) = if (element.scope == 2) then { name: input_names[index], value: individualFootprints[index] };
local generateScope3Contribution(index,element) = if (element.scope == 3) then { name: input_names[index], value: individualFootprints[index] };
local filterNull(element) = element != null;
local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));
// fetch contributions from incoming places
local filterControl(element) = element.scope == 'control';
local incomingControlPlaces = std.filter(filterControl, input_values);
local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions['1'];
local getScope2Contribution(element) = element.footprintContributions['2'];
local getScope3Contribution(element) = element.footprintContributions['3'];
local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));
local footprintContributions = { '1': incomingScope1Contributions + scope1FromThisTransition, '2': incomingScope2Contributions + scope2FromThisTransition,'3': incomingScope3Contributions + scope3FromThisTransition};
local scope1Contributions = incomingScope1Contributions + scope1FromThisTransition;
local scope2Contributions = incomingScope2Contributions + scope2FromThisTransition;
local scope3Contributions = incomingScope3Contributions + scope3FromThisTransition;
// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != 'control') && (input_values[index].scope != 'start') then { name: element }; local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));
local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];
//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };
local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));
local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;
// Visualisations:
local visualisations = [{
'type': 'number',
'unit': 'kg CO2e',
'description': 'THG-Fussabdruck',
'value': totalFootprint
},
{
'type': 'sunburst',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sunburst)',
'value': [
{
'name': 'Scope 1',
'children': scope1Contributions
},
{
'name': 'Scope 2',
'children': scope2Contributions
},
{
'name': 'Scope 3',
'children': scope3Contributions
}
]
}
,{
'type': 'sankey',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sankey)',
'value': {
'data': sankeyNodes,
'links': sankeyLinks
}
},
{
'type': 'number',
'unit': '%',
'description': 'Primrdatenanteil',
'value': outputPDS * 100
}];`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p5_key:"local output_p5_key = '-';"},fragmentVarSnippets:{output_p5_value:"local output_p5_value = { scope: 'control', ghgFactorUnit: 'kg CO2e / Stueck', ghgFactor: totalFootprint, amount: 1, unit: 'Stueck (Stueckzahl)', type: 'Primaerdaten', pds: outputPDS, footprintContributions: footprintContributions, sankeyNodes: sankeyNodes,sankeyLinks: sankeyLinks, nodeName: transition_name, '$visualisations': visualisations };"}},{id:"9df90d66-8f44-4709-aa9e-015d92d6f907",name:"Schleifen",preface:`// calculations
// ghg factors in kg CO2e per g
local ghgFactors = { 'NF3': 13.4, 'SF6': 18.3, 'CF4': 5.3};
local calculateFootprint(component) = component.amount  * (if component.scope == 1 then (if component.unit == 'mg' then 0.001 else if component.unit == 'kg' then 1000 else 1) * ghgFactors[component.ghg] * component.scalingFactor else if component.scope == 2 then (if component.unit == 'Wh' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'g CO2e / kWh' then 0.001 else if component.ghgFactorUnit == 'mg CO2e / kWh' then 0.000001 else 1) * component.scalingFactor else if component.scope == 3 then (if component.unit == 'mg (Gewicht)' then 0.000001 else if component.unit == 'g (Gewicht)' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'mg CO2e / Stueck oder kg' then 0.000001 else if component.ghgFactorUnit == 'g CO2e / Stueck oder kg' then 0.001 else 1) * component.scalingFactor else component.ghgFactor) * Allokation / 100;
local individualFootprints = std.map(calculateFootprint,input_values);
// calculate Scope 1-Emissions
local generateScope1Contribution(index,element) = if (element.scope == 1) then { name: input_names[index], value: individualFootprints[index] };
local sum(arr, n) = if (n <= 0) then 0 else sum(arr, n-1) + arr[n-1];
local totalFootprint = sum(individualFootprints, std.length(individualFootprints));
local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;
local footprintShares = std.map(calculatePCFShare,individualFootprints);
local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;
local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));
local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));
// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != 'start') && (element.scope != 'control')) then { name: input_names[index], value: individualFootprints[index] };
local generateScope2Contribution(index,element) = if (element.scope == 2) then { name: input_names[index], value: individualFootprints[index] };
local generateScope3Contribution(index,element) = if (element.scope == 3) then { name: input_names[index], value: individualFootprints[index] };
local filterNull(element) = element != null;
local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));
// fetch contributions from incoming places
local filterControl(element) = element.scope == 'control';
local incomingControlPlaces = std.filter(filterControl, input_values);
local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions['1'];
local getScope2Contribution(element) = element.footprintContributions['2'];
local getScope3Contribution(element) = element.footprintContributions['3'];
local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));
local footprintContributions = { '1': incomingScope1Contributions + scope1FromThisTransition, '2': incomingScope2Contributions + scope2FromThisTransition,'3': incomingScope3Contributions + scope3FromThisTransition};
local scope1Contributions = incomingScope1Contributions + scope1FromThisTransition;
local scope2Contributions = incomingScope2Contributions + scope2FromThisTransition;
local scope3Contributions = incomingScope3Contributions + scope3FromThisTransition;
// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != 'control') && (input_values[index].scope != 'start') then { name: element }; local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));
local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];
//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };
local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));
local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;
// Visualisations:
local visualisations = [{
'type': 'number',
'unit': 'kg CO2e',
'description': 'THG-Fussabdruck',
'value': totalFootprint
},
{
'type': 'sunburst',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sunburst)',
'value': [
{
'name': 'Scope 1',
'children': scope1Contributions
},
{
'name': 'Scope 2',
'children': scope2Contributions
},
{
'name': 'Scope 3',
'children': scope3Contributions
}
]
}
,{
'type': 'sankey',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sankey)',
'value': {
'data': sankeyNodes,
'links': sankeyLinks
}
},
{
'type': 'number',
'unit': '%',
'description': 'Primrdatenanteil',
'value': outputPDS * 100
}];`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_p6_key:"local output_p6_key = '-';"},fragmentVarSnippets:{output_p6_value:"local output_p6_value = { scope: 'control', ghgFactorUnit: 'kg CO2e / Stueck', ghgFactor: totalFootprint, amount: 1, unit: 'Stueck (Stueckzahl)', type: 'Primaerdaten', pds: outputPDS, footprintContributions: footprintContributions, sankeyNodes: sankeyNodes,sankeyLinks: sankeyLinks, nodeName: transition_name, '$visualisations': visualisations };"}},{id:"e364df88-9898-4317-9dd4-71eced03218c",name:"Oberflchenbehandlung",preface:`// calculations
// ghg factors in kg CO2e per g
local ghgFactors = { 'NF3': 13.4, 'SF6': 18.3, 'CF4': 5.3};
local calculateFootprint(component) = component.amount  * (if component.scope == 1 then (if component.unit == 'mg' then 0.001 else if component.unit == 'kg' then 1000 else 1) * ghgFactors[component.ghg] * component.scalingFactor else if component.scope == 2 then (if component.unit == 'Wh' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'g CO2e / kWh' then 0.001 else if component.ghgFactorUnit == 'mg CO2e / kWh' then 0.000001 else 1) * component.scalingFactor else if component.scope == 3 then (if component.unit == 'mg (Gewicht)' then 0.000001 else if component.unit == 'g (Gewicht)' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'mg CO2e / Stueck oder kg' then 0.000001 else if component.ghgFactorUnit == 'g CO2e / Stueck oder kg' then 0.001 else 1) * component.scalingFactor else component.ghgFactor) * Allokation / 100;
local individualFootprints = std.map(calculateFootprint,input_values);
// calculate Scope 1-Emissions
local generateScope1Contribution(index,element) = if (element.scope == 1) then { name: input_names[index], value: individualFootprints[index] };
local sum(arr, n) = if (n <= 0) then 0 else sum(arr, n-1) + arr[n-1];
local totalFootprint = sum(individualFootprints, std.length(individualFootprints));
local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;
local footprintShares = std.map(calculatePCFShare,individualFootprints);
local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;
local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));
local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));
// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != 'start') && (element.scope != 'control')) then { name: input_names[index], value: individualFootprints[index] };
local generateScope2Contribution(index,element) = if (element.scope == 2) then { name: input_names[index], value: individualFootprints[index] };
local generateScope3Contribution(index,element) = if (element.scope == 3) then { name: input_names[index], value: individualFootprints[index] };
local filterNull(element) = element != null;
local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));
// fetch contributions from incoming places
local filterControl(element) = element.scope == 'control';
local incomingControlPlaces = std.filter(filterControl, input_values);
local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions['1'];
local getScope2Contribution(element) = element.footprintContributions['2'];
local getScope3Contribution(element) = element.footprintContributions['3'];
local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));
local footprintContributions = { '1': incomingScope1Contributions + scope1FromThisTransition, '2': incomingScope2Contributions + scope2FromThisTransition,'3': incomingScope3Contributions + scope3FromThisTransition};
local scope1Contributions = incomingScope1Contributions + scope1FromThisTransition;
local scope2Contributions = incomingScope2Contributions + scope2FromThisTransition;
local scope3Contributions = incomingScope3Contributions + scope3FromThisTransition;
// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != 'control') && (input_values[index].scope != 'start') then { name: element }; local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));
local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];
//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };
local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));
local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;
// Visualisations:
local visualisations = [{
'type': 'number',
'unit': 'kg CO2e',
'description': 'THG-Fussabdruck',
'value': totalFootprint
},
{
'type': 'sunburst',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sunburst)',
'value': [
{
'name': 'Scope 1',
'children': scope1Contributions
},
{
'name': 'Scope 2',
'children': scope2Contributions
},
{
'name': 'Scope 3',
'children': scope3Contributions
}
]
}
,{
'type': 'sankey',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sankey)',
'value': {
'data': sankeyNodes,
'links': sankeyLinks
}
},
{
'type': 'number',
'unit': '%',
'description': 'Primrdatenanteil',
'value': outputPDS * 100
}];`,guard:"true",customVariables:{Allokation:"100"},keyVarSnippets:{output_wafer_key:"local output_wafer_key = '-';"},fragmentVarSnippets:{output_wafer_value:"local output_wafer_value = { scope: 'control', ghgFactorUnit: 'kg CO2e / Stueck', ghgFactor: totalFootprint, amount: 1, unit: 'Stueck (Stueckzahl)', type: 'Primaerdaten', pds: outputPDS, footprintContributions: footprintContributions, sankeyNodes: sankeyNodes,sankeyLinks: sankeyLinks, nodeName: transition_name, '$visualisations': visualisations };"}}],arcs:[{id:"9952bbb5-ee12-47f5-9f8c-6ecc65e9978e",filter:"$.*",fromId:"5826fe10-c01b-486e-b213-9e33f30cf8c2",toId:"83447b3c-d063-4eb3-82df-d6ac7e5838f9"},{id:"98564d96-90e1-4bd7-88d1-7ea2fd0e3e6a",filter:"$",fromId:"83447b3c-d063-4eb3-82df-d6ac7e5838f9",toId:"6b2916e9-3c05-4b3c-8f4d-469b81cb05a9"},{id:"fd2ec139-fb41-47fe-801b-3bb11b1e8e25",filter:"$.*",fromId:"6b2916e9-3c05-4b3c-8f4d-469b81cb05a9",toId:"be938c8c-eb3f-4019-9248-d06df11f6668"},{id:"ae5dc3e8-7f0d-4f8a-84bd-4881cdfef516",filter:"$",fromId:"be938c8c-eb3f-4019-9248-d06df11f6668",toId:"d52d8bfb-4e9e-4e45-8487-6794fb4c9c60"},{id:"1dd9e330-42b4-4cfc-a172-e17023e63f43",filter:"$.*",fromId:"d52d8bfb-4e9e-4e45-8487-6794fb4c9c60",toId:"7da089da-d214-432c-a8fd-6ab38081843b"},{id:"da9e1ee2-3c85-4829-890c-ebdc01a38a4e",filter:"$",fromId:"7da089da-d214-432c-a8fd-6ab38081843b",toId:"f5c8291f-8cb8-4f85-825a-33e170c20c11"},{id:"bb71cb17-306f-4249-8af8-b6fbd3f72196",filter:"$.*",fromId:"f5c8291f-8cb8-4f85-825a-33e170c20c11",toId:"425ec761-277c-4bc6-8b63-60e651b1223e"},{id:"3b591ef6-51bf-4910-add7-4a58d16cc052",filter:"$",fromId:"425ec761-277c-4bc6-8b63-60e651b1223e",toId:"f1205391-5230-47f3-b7ac-6615d1830898"},{id:"d9e4a496-a108-4cd5-a4e3-5613f1cac1fb",filter:"$.*",fromId:"f1205391-5230-47f3-b7ac-6615d1830898",toId:"3d887d06-6b5e-4733-b487-fb28393f995a"},{id:"19df2ab5-08d5-4766-915d-88fd58c604ad",filter:"$",fromId:"3d887d06-6b5e-4733-b487-fb28393f995a",toId:"8d30c6c3-65d0-4485-a8cd-714ee0ba569c"},{id:"6830cef6-fba6-47ab-9e98-831a79189874",filter:"$.*",fromId:"8d30c6c3-65d0-4485-a8cd-714ee0ba569c",toId:"9df90d66-8f44-4709-aa9e-015d92d6f907"},{id:"01d4e222-45b7-4b90-91fd-24fb2b4b3703",filter:"$",fromId:"9df90d66-8f44-4709-aa9e-015d92d6f907",toId:"825401fa-60cd-497d-927e-ccd110cbd236"},{id:"0aa216cb-2780-478a-bfe7-0b5767c073a6",filter:"$.*",fromId:"825401fa-60cd-497d-927e-ccd110cbd236",toId:"e364df88-9898-4317-9dd4-71eced03218c"},{id:"3414b4ea-d6c5-431f-ad59-3f6a4cdc8c04",filter:"$",fromId:"e364df88-9898-4317-9dd4-71eced03218c",toId:"8be9e972-2eba-4766-8af4-1d5e18f2f0d3"}]},layoutData:{cells:[{type:"pn.Transition",size:{width:100,height:50},position:{x:300,y:264},angle:0,id:"83447b3c-d063-4eb3-82df-d6ac7e5838f9",jsonnetsType:"transition",z:1,attrs:{".label":{fill:"#7a7e9b",text:"Siliziumpulver einschmelzen"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:648,y:264},angle:0,id:"be938c8c-eb3f-4019-9248-d06df11f6668",jsonnetsType:"transition",z:2,attrs:{".label":{fill:"#7a7e9b",text:"Reinigen"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:1032,y:264},angle:0,id:"7da089da-d214-432c-a8fd-6ab38081843b",jsonnetsType:"transition",z:3,attrs:{".label":{fill:"#7a7e9b",text:"Polysilizium einschmelzen"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:1272,y:396},angle:0,id:"425ec761-277c-4bc6-8b63-60e651b1223e",jsonnetsType:"transition",z:4,attrs:{".label":{fill:"#7a7e9b",text:"Czochralski-Verfahren"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:1032,y:516},angle:0,id:"3d887d06-6b5e-4733-b487-fb28393f995a",jsonnetsType:"transition",z:5,attrs:{".label":{fill:"#7a7e9b",text:"Sgen"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:648,y:516},angle:0,id:"9df90d66-8f44-4709-aa9e-015d92d6f907",jsonnetsType:"transition",z:6,attrs:{".label":{fill:"#7a7e9b",text:"Schleifen"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:300,y:516},angle:0,id:"e364df88-9898-4317-9dd4-71eced03218c",jsonnetsType:"transition",z:7,attrs:{".label":{fill:"#7a7e9b",text:"Oberflchenbehandlung"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:132,y:264},angle:0,tokens:1,id:"5826fe10-c01b-486e-b213-9e33f30cf8c2",jsonnetsType:"place",z:8,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Start"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:504,y:264},angle:0,tokens:0,id:"6b2916e9-3c05-4b3c-8f4d-469b81cb05a9",jsonnetsType:"place",z:9,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p1"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:840,y:264},angle:0,tokens:0,id:"d52d8bfb-4e9e-4e45-8487-6794fb4c9c60",jsonnetsType:"place",z:10,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p2"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:1296,y:264},angle:0,tokens:0,id:"f5c8291f-8cb8-4f85-825a-33e170c20c11",jsonnetsType:"place",z:11,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p3"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:1296,y:516},angle:0,tokens:0,id:"f1205391-5230-47f3-b7ac-6615d1830898",jsonnetsType:"place",z:12,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p4"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:840,y:516},angle:0,tokens:0,id:"8d30c6c3-65d0-4485-a8cd-714ee0ba569c",jsonnetsType:"place",z:13,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p5"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:504,y:516},angle:0,tokens:0,id:"825401fa-60cd-497d-927e-ccd110cbd236",jsonnetsType:"place",z:14,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p6"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:132,y:516},angle:0,tokens:0,id:"8be9e972-2eba-4766-8af4-1d5e18f2f0d3",jsonnetsType:"place",z:15,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Wafer"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"standard.Link",source:{id:"5826fe10-c01b-486e-b213-9e33f30cf8c2",selector:".root"},target:{id:"83447b3c-d063-4eb3-82df-d6ac7e5838f9",selector:".root"},id:"9952bbb5-ee12-47f5-9f8c-6ecc65e9978e",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:16,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"83447b3c-d063-4eb3-82df-d6ac7e5838f9",selector:".root"},target:{id:"6b2916e9-3c05-4b3c-8f4d-469b81cb05a9",selector:".root"},id:"98564d96-90e1-4bd7-88d1-7ea2fd0e3e6a",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:17,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"6b2916e9-3c05-4b3c-8f4d-469b81cb05a9",selector:".root"},target:{id:"be938c8c-eb3f-4019-9248-d06df11f6668",selector:".root"},id:"fd2ec139-fb41-47fe-801b-3bb11b1e8e25",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:18,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"be938c8c-eb3f-4019-9248-d06df11f6668",selector:".root"},target:{id:"d52d8bfb-4e9e-4e45-8487-6794fb4c9c60",selector:".root"},id:"ae5dc3e8-7f0d-4f8a-84bd-4881cdfef516",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:19,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"d52d8bfb-4e9e-4e45-8487-6794fb4c9c60",selector:".root"},target:{id:"7da089da-d214-432c-a8fd-6ab38081843b",selector:".root"},id:"1dd9e330-42b4-4cfc-a172-e17023e63f43",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:20,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"7da089da-d214-432c-a8fd-6ab38081843b",selector:".root"},target:{id:"f5c8291f-8cb8-4f85-825a-33e170c20c11",selector:".root"},id:"da9e1ee2-3c85-4829-890c-ebdc01a38a4e",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:21,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"f5c8291f-8cb8-4f85-825a-33e170c20c11",selector:".root"},target:{id:"425ec761-277c-4bc6-8b63-60e651b1223e",selector:".root"},id:"bb71cb17-306f-4249-8af8-b6fbd3f72196",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:22,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"425ec761-277c-4bc6-8b63-60e651b1223e",selector:".root"},target:{id:"f1205391-5230-47f3-b7ac-6615d1830898",selector:".root"},id:"3b591ef6-51bf-4910-add7-4a58d16cc052",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:23,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"f1205391-5230-47f3-b7ac-6615d1830898",selector:".root"},target:{id:"3d887d06-6b5e-4733-b487-fb28393f995a",selector:".root"},id:"d9e4a496-a108-4cd5-a4e3-5613f1cac1fb",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:24,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"3d887d06-6b5e-4733-b487-fb28393f995a",selector:".root"},target:{id:"8d30c6c3-65d0-4485-a8cd-714ee0ba569c",selector:".root"},id:"19df2ab5-08d5-4766-915d-88fd58c604ad",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:25,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"8d30c6c3-65d0-4485-a8cd-714ee0ba569c",selector:".root"},target:{id:"9df90d66-8f44-4709-aa9e-015d92d6f907",selector:".root"},id:"6830cef6-fba6-47ab-9e98-831a79189874",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:26,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"9df90d66-8f44-4709-aa9e-015d92d6f907",selector:".root"},target:{id:"825401fa-60cd-497d-927e-ccd110cbd236",selector:".root"},id:"01d4e222-45b7-4b90-91fd-24fb2b4b3703",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:27,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"825401fa-60cd-497d-927e-ccd110cbd236",selector:".root"},target:{id:"e364df88-9898-4317-9dd4-71eced03218c",selector:".root"},id:"0aa216cb-2780-478a-bfe7-0b5767c073a6",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:28,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"e364df88-9898-4317-9dd4-71eced03218c",selector:".root"},target:{id:"8be9e972-2eba-4766-8af4-1d5e18f2f0d3",selector:".root"},id:"3414b4ea-d6c5-431f-ad59-3f6a4cdc8c04",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:29,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}}]}}}],hTt=[{id:"activity",title:"Aktivitt",description:"Eine Transition stellt eine Aktivitt (wie zum Beispiel 'Lten') in Ihrem Prozessmodell dar. Fgen Sie der Aktivitt Input-Stellen (Kreise) vom Typ 'Scope 1 - Emissionen', 'Scope 2 - Emissionen' oder 'Scope 3 - Emissionen' zu, um die der Aktivitt zuzuordnenden Treibhausgasemissionen zu erfassen. ber das Feld 'Allokation' knnen Sie die berechneten Gesamt-Emissionen prozentual skalieren.",keySnippet:"'-';",valueSnippet:"{ scope: 'control', ghgFactorUnit: 'kg CO2e / Stueck', ghgFactor: totalFootprint, amount: 1, unit: 'Stueck (Stueckzahl)', type: 'Primaerdaten', pds: outputPDS, footprintContributions: footprintContributions, sankeyNodes: sankeyNodes,sankeyLinks: sankeyLinks, nodeName: transition_name, '$visualisations': visualisations };",preface:`// calculations
// ghg factors in kg CO2e per g
local ghgFactors = { 'NF3': 13.4, 'SF6': 18.3, 'CF4': 5.3};
local calculateFootprint(component) = component.amount  * (if component.scope == 1 then (if component.unit == 'mg' then 0.001 else if component.unit == 'kg' then 1000 else 1) * ghgFactors[component.ghg] * component.scalingFactor else if component.scope == 2 then (if component.unit == 'Wh' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'g CO2e / kWh' then 0.001 else if component.ghgFactorUnit == 'mg CO2e / kWh' then 0.000001 else 1) * component.scalingFactor else if component.scope == 3 then (if component.unit == 'mg (Gewicht)' then 0.000001 else if component.unit == 'g (Gewicht)' then 0.001 else 1) * component.ghgFactor * (if component.ghgFactorUnit == 'mg CO2e / Stueck oder kg' then 0.000001 else if component.ghgFactorUnit == 'g CO2e / Stueck oder kg' then 0.001 else 1) * component.scalingFactor else component.ghgFactor) * Allokation / 100;
local individualFootprints = std.map(calculateFootprint,input_values);
// calculate Scope 1-Emissions
local generateScope1Contribution(index,element) = if (element.scope == 1) then { name: input_names[index], value: individualFootprints[index] };
local sum(arr, n) = if (n <= 0) then 0 else sum(arr, n-1) + arr[n-1];
local totalFootprint = sum(individualFootprints, std.length(individualFootprints));
local calculatePCFShare(partFootprint) = if totalFootprint > 0 then partFootprint/totalFootprint else 0;
local footprintShares = std.map(calculatePCFShare,individualFootprints);
local calculatePrimaryDataShare(index) = footprintShares[index] * input_values[index].pds;
local primaryDataShares = std.map(calculatePrimaryDataShare,std.range(0,std.length(input_values)-1));
local outputPDS = sum(primaryDataShares,std.length(primaryDataShares));
// for each emission input (not start or control-flow place) an object containing name and ghg-emission as value is created
local generateFootprintContribution(index,element) = if ((element.scope != 'start') && (element.scope != 'control')) then { name: input_names[index], value: individualFootprints[index] };
local generateScope2Contribution(index,element) = if (element.scope == 2) then { name: input_names[index], value: individualFootprints[index] };
local generateScope3Contribution(index,element) = if (element.scope == 3) then { name: input_names[index], value: individualFootprints[index] };
local filterNull(element) = element != null;
local footprintContributionsFromThisTransition = std.filter(filterNull,std.mapWithIndex(generateFootprintContribution,input_values));
local scope1FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope1Contribution,input_values));
local scope2FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope2Contribution,input_values));
local scope3FromThisTransition = std.filter(filterNull,std.mapWithIndex(generateScope3Contribution,input_values));
// fetch contributions from incoming places
local filterControl(element) = element.scope == 'control';
local incomingControlPlaces = std.filter(filterControl, input_values);
local getContribution(element) = element.footprintContributions;
local getScope1Contribution(element) = element.footprintContributions['1'];
local getScope2Contribution(element) = element.footprintContributions['2'];
local getScope3Contribution(element) = element.footprintContributions['3'];
local incomingScope1Contributions = std.flattenArrays(std.map(getScope1Contribution,incomingControlPlaces));
local incomingScope2Contributions = std.flattenArrays(std.map(getScope2Contribution,incomingControlPlaces));
local incomingScope3Contributions = std.flattenArrays(std.map(getScope3Contribution,incomingControlPlaces));
local footprintContributions = { '1': incomingScope1Contributions + scope1FromThisTransition, '2': incomingScope2Contributions + scope2FromThisTransition,'3': incomingScope3Contributions + scope3FromThisTransition};
local scope1Contributions = incomingScope1Contributions + scope1FromThisTransition;
local scope2Contributions = incomingScope2Contributions + scope2FromThisTransition;
local scope3Contributions = incomingScope3Contributions + scope3FromThisTransition;
// for each incoming place
local generateSankeyNode(index,element) = if (input_values[index].scope != 'control') && (input_values[index].scope != 'start') then { name: element }; local getNodes(element) = element.sankeyNodes;
local incomingNodes = std.flattenArrays(std.map(getNodes,incomingControlPlaces));
local sankeyNodes = incomingNodes + std.filter(filterNull,std.mapWithIndex(generateSankeyNode,input_names)) + [{ name: transition_name }];
//currently assuming we have exactly one output place
local generateSankeyLink(element) = { source: element.name, value: element.value, target: transition_name };
local getLinks(element) = element.sankeyLinks;
local incomingLinks = std.flattenArrays(std.map(getLinks,incomingControlPlaces));
local controlLink = if std.length(incomingControlPlaces) > 0 then [{ source: incomingControlPlaces[0].nodeName, target: transition_name, value: incomingControlPlaces[0].ghgFactor }] else [];
local sankeyLinks = incomingLinks + std.map(generateSankeyLink,footprintContributionsFromThisTransition) + controlLink;
// Visualisations:
local visualisations = [{
'type': 'number',
'unit': 'kg CO2e',
'description': 'THG-Fussabdruck',
'value': totalFootprint
},
{
'type': 'sunburst',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sunburst)',
'value': [
{
'name': 'Scope 1',
'children': scope1Contributions
},
{
'name': 'Scope 2',
'children': scope2Contributions
},
{
'name': 'Scope 3',
'children': scope3Contributions
}
]
}
,{
'type': 'sankey',
'unit': 'kg CO2e',
'description': 'THG-Beitrge (Sankey)',
'value': {
'data': sankeyNodes,
'links': sankeyLinks
}
},
{
'type': 'number',
'unit': '%',
'description': 'Primrdatenanteil',
'value': outputPDS * 100
}];`,guard:"true",presetFilter:"$.*",postsetFilter:"$",customVariables:{Allokation:"100"}}],pTt=[{id:"start",externalInteraction:{type:"none"},schema:{type:"array",title:"Start",description:"Um Berechnungen durchfhren zu knnen, muss das Prozessmodell am Anfang genau einen Knoten vom Typ 'Start' haben.",maxItems:1,items:{type:"object"}},marking:[{amount:1,ghgFactor:0,scope:"start",pds:0}]},{id:"end",externalInteraction:{type:"push",url:"https://s3t.uber.space/footprints/"},schema:{type:"array",title:"Ende",description:"Das Prozessmodell sollte am Ende einen Knoten vom Typ 'Ende' haben. Wenn eine Berechung abgeschlossen wurde, und Daten im Knoten vorhanden sind, knnen Sie die Daten verffentlichen und so in das Lieferketten-Verzeichnis laden.",maxItems:1,items:{type:"object"}},marking:[]},{id:"control",externalInteraction:{type:"none"},schema:{type:"array",title:"Kontrollfluss",description:"Um Berechnungen durchfhren zu knnen, mssen Aktivitten miteinander mit Knoten vom Typ 'Kontrollfluss' verbunden werden.",maxItems:1,items:{type:"object"}},marking:[]},{id:"scope1",externalInteraction:{type:"none"},schema:{type:"array",title:"Scope 1 - Emissionen",description:"Whlen Sie zunchst das betreffende <b>Treibhausgas</b> im Formular aus. Als <b>Maeinheit</b> knnen Sie 'mg', 'g' oder 'kg' whlen. ber den <b>Skalierungsfaktor</b> knnen Sie die anzurechnende <b>Menge</b> skalieren. Wenn zum Beispiel die Hlfte der angegebenen Menge angerechnet werden soll, geben Sie den <b>Skalierungsfaktor</b> '0,5' an.",maxItems:1,items:{type:"object",properties:{scope:{type:"number",title:"Scope",enum:[1],readOnly:!0},ghg:{type:"string",title:"Treibhausgas",enum:["NF3","SF6","CF4"],default:"NF3",description:"Whlen Sie das emittierte Treibhausgas aus."},unit:{type:"string",title:"Maeinheit fr Mengenangabe",enum:["mg","g","kg"],default:"g",description:"Whlen Sie die Maeinheit aus, in der Sie die Menge angeben mchten."},amount:{type:"number",title:"Menge",description:"Mengenangabe in mg, g oder kg fr das emittierte Treibhausgas."},scalingFactor:{type:"number",title:"Skalierungsfaktor",default:1,description:"Die angegebene Menge wird mit dem Skalierungsfaktor multipliziert."},type:{type:"string",enum:["Primaerdaten"],title:"Datentyp",readOnly:!0},note:{type:"string",title:"Notiz",description:"In diesem Feld knnen Sie Anmerkungen hinterlegen."}},required:["scope","ghg","unit","amount","scalingFactor","type"]}},marking:[{scope:1,amount:1,unit:"g",ghg:"NF3",scalingFactor:1,type:"Primaerdaten",pds:1,note:"test"}]},{id:"scope2",externalInteraction:{type:"none"},schema:{type:"array",title:"Scope 2 - Emissionen",description:"Whlen Sie zunchst eine <b>Maeinheit</b> ('Wh' oder 'kWh') fr den angegebenen <b>Energieverbrauch</b>. Der <b>Emissionsfaktor</b> gibt an, welche Menge an Treibhausgasen <i>pro kWh</i> mit der Erzeugung der bezogenen Energie verbunden sind. Als <b>Maeinheit fr den Emissionsfaktor</b> knnen Sie 'mg', 'g' oder 'kg' CO2e / kWh auswhlen. ber den <b>Skalierungsfaktor</b> knnen Sie den anzurechnenden Energieverbrauch skalieren. Wenn zum Beispiel die Hlfte der angegebenen Menge angerechnet werden soll, geben Sie den <b>Skalierungsfaktor</b> '0,5' an.",maxItems:1,items:{type:"object",properties:{scope:{type:"number",enum:[2],title:"Scope",readOnly:!0},unit:{type:"string",enum:["Wh","kWh"],default:"kWh",title:"Maeinheit fr Energieverbrauch",description:"Whlen Sie die Maeinheit aus, in der Sie den Energieverbrauch angeben mchten."},amount:{type:"number",title:"Energieverbrauch",description:"Mengenangabe in Wh oder kWh fr den Energieverbrauch."},ghgFactorUnit:{type:"string",enum:["mg CO2e / kWh","g CO2e / kWh","kg CO2e / kWh"],default:"kg CO2e / kWh",title:"Maeinheit fr Emissionsfaktor",description:"Whlen Sie die Maeinheit aus, in der Sie den Emissionsfaktor angeben mchten."},ghgFactor:{type:"number",title:"Emissionsfaktor",description:"Angabe der Menge an emittierten Treibhausgasen in mg, g oder kg CO2e pro kWh."},scalingFactor:{type:"number",title:"Skalierungsfaktor",default:1,description:"Der angegebene Energieverbrauch wird mit dem Skalierungsfaktor multipliziert."},type:{type:"string",enum:["Primaerdaten"],title:"Datentyp",readOnly:!0},note:{type:"string",title:"Notiz",description:"In diesem Feld knnen Sie Anmerkungen hinterlegen."}},required:["scope","unit","amount","ghgFactorUnit","ghgFactor","scalingFactor","type"]}},marking:[{scope:2,unit:"kWh",amount:1,ghgFactorUnit:"kg CO2e / kWh",ghgFactor:1,scalingFactor:1,type:"Primaerdaten",pds:1,note:""}]},{id:"scope3-secondary",externalInteraction:{type:"none"},schema:{type:"array",title:"Scope 3 - Emissionen (Sekundrdaten)",description:"Whlen Sie zunchst die <b>Maeinheit</b> (entweder 'Stckzahl' oder 'Gewicht' in mg, g oder kg) fr die Angabe der Menge an Material oder Komponenten. Der <b>Emissionsfaktor</b> gibt an, welche Menge an Treibhausgasen mit der Produktion des Materials oder der Komponente verbunden sind. Die Angabe des Emissionsfaktors erfolgt immer <i>pro Stck oder kg</i>. Als <b>Maeinheit fr den Emissionsfaktor</b> knnen Sie 'mg', 'g' oder 'kg' CO2e / Stck oder kg auswhlen. ber den <b>Skalierungsfaktor</b> knnen Sie die anzurechnende <b>Menge</b> skalieren. Wenn zum Beispiel die Hlfte der angegebenen Menge angerechnet werden soll, geben Sie den <b>Skalierungsfaktor</b> '0,5' an.",maxItems:1,items:{type:"object",properties:{scope:{type:"number",enum:[3],readOnly:!0},unit:{type:"string",title:"Maeinheit fr Mengenangabe",enum:["mg (Gewicht)","g (Gewicht)","kg (Gewicht)","Stueck (Stueckzahl)"],description:"Whlen Sie die Maeinheit aus, in der Sie die Menge an Material oder Komponenten angeben mchten."},amount:{type:"number",title:"Menge",description:"Mengenangabe in Gewicht (mg, g oder kg) oder als Stckzahl."},ghgFactorUnit:{type:"string",enum:["mg CO2e / Stueck oder kg","g CO2e / Stueck oder kg","kg CO2e / Stueck oder kg"],default:"kg CO2e / Stueck oder kg",title:"Maeinheit fr Emissionsfaktor",description:"Whlen Sie die Maeinheit aus, in der Sie den Emissionsfaktor angeben mchten."},ghgFactor:{type:"number",title:"Emissionsfaktor",description:"Angabe der Menge an emittierten Treibhausgasen in mg, g oder kg CO2e / Stck oder kg."},scalingFactor:{type:"number",title:"Skalierungsfaktor",default:1,description:"Die angegebene Menge wird mit dem Skalierungsfaktor multipliziert."},type:{type:"string",enum:["Sekundaerdaten"],title:"Datentyp",readOnly:!0},note:{type:"string",title:"Notiz",description:"In diesem Feld knnen Sie Anmerkungen hinterlegen."}},required:["scope","unit","amount","ghgFactorUnit","ghgFactor","scalingFactor","type"]}},marking:[{scope:3,unit:"Stueck (Stueckzahl)",amount:1,ghgFactorUnit:"kg CO2e / Stueck oder kg",ghgFactor:1,scalingFactor:1,type:"Sekundaerdaten",pds:0,note:""}]},{id:"scope3-primary",externalInteraction:{type:"pull",url:"https://s3t.uber.space/footprints/",enforcedMarking:{scope:3,title:"scope3",scalingFactor:1,fromSupplyChain:!0,note:"loaded"}},schema:{type:"array",title:"Scope 3 - Emissionen (Primrdaten)",description:"Laden Sie Primrdaten von Ihren Lieferanten aus dem Lieferkettenverzeichnis. Nach dem Laden knnen Sie den von ihrem Lieferanten bermittelten <b>Emissionsfaktor</b> und <b>Primrdatenanteil</b> einsehen. Es wird angenommen, dass die Angaben zu Treibhausgasemission von Ihrem Lieferanten in <i>kg CO2e pro Stck</i> erfolgen. Sie knnen eine <b>Mengenangabe</b> als Stckzahl vornehmen und die angegebene Menge ber einen <b>Skalierungsfaktor</b> skalieren. Wenn zum Beispiel die Hlfte der angegebenen Menge angerechnet werden soll, geben Sie den <b>Skalierungsfaktor</b> '0,5' an.",maxItems:1,items:{type:"object",properties:{scope:{type:"number",title:"Scope",enum:[3],readOnly:!0},unit:{type:"string",title:"Mengeneinheit",enum:["Stueck (Stueckzahl)"],readOnly:!0},amount:{type:"number",title:"Menge",description:"Mengenangabe als Stckzahl."},ghgFactorUnit:{type:"string",enum:["kg CO2e / Stueck"],default:"kg CO2e / Stueck",title:"Maeinheit fr Emissionsfaktor",readOnly:!0},scalingFactor:{type:"number",title:"Skalierungsfaktor",default:1,description:"Die angegebene Menge wird mit dem Skalierungsfaktor multipliziert."},ghgFactor:{type:"number",title:"Emissionsfaktor",readOnly:!0},pds:{type:"number",title:"Primaerdatenanteil",readOnly:!0},note:{type:"string",title:"Notiz",description:"In diesem Feld knnen Sie Anmerkungen hinterlegen."}},required:["scope","unit","amount","ghgFactorUnit","ghgFactor","scalingFactor","pds"]}},marking:[]}],qde={name:aTt,defaultUIAssistMode:sTt,defaultTransitionType:lTt,defaultPlaceType:cTt,allowAutoLayout:uTt,visualisationConfig:fTt,examples:dTt,transitionTypes:hTt,placeTypes:pTt},gTt="Illustratives Szenario",mTt="expert",vTt="simple",yTt="simple",bTt=!0,STt={show:!0},_Tt=[{id:"simple",title:"Einfach",description:"Transition, die einfache Marken verbraucht und erzeugt.",keySnippet:"'-';",valueSnippet:"{};",preface:"",guard:"true",presetFilter:"$.*",postsetFilter:"$",customVariables:{}},{id:"instances",title:"Prozessinstanzen",description:"Transition, die Marken mit ProzessinstanzIDs verbraucht und erzeugt.",keySnippet:"'-';",valueSnippet:"input_values[0];",preface:"",guard:"true",presetFilter:"$.*",postsetFilter:"$",customVariables:{}},{id:"instances-ghg",title:"Prozessinstanzen (kologische Nachhaltigkeitsanalyse)",description:"Transition, die Marken mit ProzessinstanzIDs und Informationen zu Treibhausgasemissionen verbraucht und erzeugt.",keySnippet:"'-';",valueSnippet:`instanceToken + {
'impact': impact,
'$visualisations': visualisations
};`,preface:`// general function library (these are reimplementations of missing standard functions)
 
local sumRecursive(arr, n) =
  if (n <= 0) then 0
  else sumRecursive(arr, n-1) + arr[n-1];
local sum(arr) = sumRecursive(arr, std.length(arr));
 
// helper functions and variables
 
local isInstanceToken(token) = std.objectHas(token, 'instanceID');
local instanceToken = std.filter(isInstanceToken, input_values)[0];
 
local isScope(scope, token) = std.objectHas(token, 'scope') && token.scope == scope;
 
// calculation of impact value and contributions
 
local outputAllocation = 1;
local calculateContribution(token) = 
  if isInstanceToken(token) then token.impact 
  else token.amount * token.impactFactor * token.allocationFactor;
local contributions = std.map(calculateContribution, input_values);
local impact = sum(contributions) / outputAllocation;
 
// assemble data for visualisations and indicators
 
local applyOutputAllocation(contribution) = { name: contribution.name, value: contribution.value / outputAllocation};
local assembleScope1Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][0]['children'])
  else if isScope(1,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope1ContributionArrays = std.mapWithIndex(assembleScope1Contributions, input_values);
local scope1Contributions = std.flattenArrays(scope1ContributionArrays);
 
local assembleScope2Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][1]['children'])
  else if isScope(2,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope2ContributionArrays = std.mapWithIndex(assembleScope2Contributions, input_values);
local scope2Contributions = std.flattenArrays(scope2ContributionArrays);
 
local assembleScope3Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][2]['children'])
  else if isScope(3,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope3ContributionArrays = std.mapWithIndex(assembleScope3Contributions, input_values);
local scope3Contributions = std.flattenArrays(scope3ContributionArrays);
 
local visualisations =  [
  {
    'type': 'number',
    'unit': 'kg CO2e',
    'description': 'THG-Fussabdruck',
    'value': impact
  },
  {
    'type': 'sunburst',
    'unit': 'kg CO2e',
    'description': 'THG-Beitrge (Sunburst)',
    'value': [
    {
      'name': 'Scope 1',
      'children': scope1Contributions
    },
    {
      'name': 'Scope 2',
      'children': scope2Contributions
    },
    {
    'name': 'Scope 3',
    'children': scope3Contributions
    }]
  }
];`,guard:"true",presetFilter:"$.*",postsetFilter:"$",customVariables:{}},{id:"instances-social-sustainability",title:"Prozessinstanzen (Soziale Nachhaltigkeitsanalyse)",description:"Transition, die Marken mit ProzessinstanzIDs und Informationen zu sozialen Nachhaltigkeitsauswirkungen verbraucht und erzeugt.",keySnippet:"'-';",valueSnippet:`instanceToken + {
'impact': impact,
'$visualisations': visualisations
};`,preface:`// general function library (these are reimplementations of missing standard functions)
 
local sumRecursive(arr, n) =
  if (n <= 0) then 0
  else sumRecursive(arr, n-1) + arr[n-1];
local sum(arr) = sumRecursive(arr, std.length(arr));
 
// helper functions and variables
 
local isInstanceToken(token) = std.objectHas(token, 'instanceID');
local instanceToken = std.filter(isInstanceToken, input_values)[0];
 
local isScope(scope, token) = std.objectHas(token, 'scope') && token.scope == scope;
 
// calculation of impact value and contributions
 
local outputAllocation = 1;
local calculateContribution(token) = 
  if isInstanceToken(token) then token.impact 
  else token.amount * token.impactFactor * token.allocationFactor;
local contributions = std.map(calculateContribution, input_values);
local impact = sum(contributions) / outputAllocation;
 
// assemble data for visualisations and indicators
 
local applyOutputAllocation(contribution) = { name: contribution.name, value: contribution.value / outputAllocation};
local assembleScope1Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][0]['children'])
  else if isScope(1,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope1ContributionArrays = std.mapWithIndex(assembleScope1Contributions, input_values);
local scope1Contributions = std.flattenArrays(scope1ContributionArrays);
 
local assembleScope2Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][1]['children'])
  else if isScope(2,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope2ContributionArrays = std.mapWithIndex(assembleScope2Contributions, input_values);
local scope2Contributions = std.flattenArrays(scope2ContributionArrays);
 
local assembleScope3Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][2]['children'])
  else if isScope(3,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope3ContributionArrays = std.mapWithIndex(assembleScope3Contributions, input_values);
local scope3Contributions = std.flattenArrays(scope3ContributionArrays);
 
local visualisations =  [
  {
    'type': 'number',
    'unit': 'Arbeitsunfaelle',
    'description': 'Gesundheit und Arbeitssicherheit',
    'value': impact
  },
  {
    'type': 'sunburst',
    'unit': 'Arbeitsunfaelle',
    'description': 'Gesundheit und Arbeitssicherheit (Sunburst)',
    'value': [
    {
      'name': 'Scope 1',
      'children': scope1Contributions
    },
    {
      'name': 'Scope 2',
      'children': scope2Contributions
    },
    {
    'name': 'Scope 3',
    'children': scope3Contributions
    }]
  }
];`,guard:"true",presetFilter:"$.*",postsetFilter:"$",customVariables:{}}],wTt=[{id:"simple",externalInteraction:{type:"none"},schema:{title:"Einfach",description:"Eine Stelle, die einfache Marken (leere Objekte) speichert.",type:"array",items:{type:"object"}},marking:[]},{id:"instances",externalInteraction:{type:"none"},schema:{title:"Prozessinstanzen",description:"Eine Stelle, die Marken mit Prozessinstanz-IDs speichert.",type:"array",items:{type:"object",properties:{instanceID:{type:"string"}},required:["instanceID"]}},marking:[]},{id:"instances-sustainability",externalInteraction:{type:"none"},schema:{title:"Prozessinstanzen (Nachhaltigkeitsanalyse)",description:"Eine Stelle, die Prozessinstanzmarken mit einem Indikatorwert fr Nachhaltigkeitsauswirkungen speichert.",type:"array",items:{type:"object",properties:{instanceID:{type:"string"},impact:{type:"number"}},required:["instanceID","impact"]}},marking:[]},{id:"inventory",externalInteraction:{type:"none"},schema:{title:"Nachhaltigkeitsauswirkungen",description:"Eine Stelle, Angaben zu Nachhaltigkeitsauswirkungen einer Aktivitt speichert.",type:"array",items:{type:"object",properties:{amount:{type:"number"},impactFactor:{type:"number"},allocationFactor:{type:"number"},scope:{type:"number",enum:[1,2,3]}},required:["amount","impactFactor","allocationFactor","scope"]}},marking:[]}],kTt=[{name:"Nachhaltigkeitsanalyse-Sozial",net:{typeData:{placeTypes:{"4876d2d5-014f-4206-af09-170d900b0acc":"instances-sustainability","1d43ff03-0740-4ce8-9fca-d6c459704a18":"instances-sustainability","58e67779-3f56-4819-9d47-4de2a1189d47":"instances-sustainability","4528501a-f423-4bef-acf6-1975ee7766cb":"instances-sustainability","499c4196-fac1-4280-b317-33dc927a3fed":"instances-sustainability","52641fb4-fcee-41be-b8f5-d8af3da3ac8d":"instances-sustainability","73573b72-5df0-4564-81e8-9d4d20d92712":"instances-sustainability","8ca9f3ce-ee02-4ced-b29e-952277fbf3d7":"simple","f5ae0fa5-acab-4e05-83fc-751379fef9e8":"instances-sustainability","772856ca-b248-42d4-870e-88cb29d13c78":"instances-sustainability","8ca9f3ce-ee01-4ced-b29e-952277fbf3d7":"instances-sustainability","22360929-87ca-4b40-8ff1-b5fc9bce77f0":"emissions-scope2","5e4737f9-e14f-4414-b556-fa97ac5b33ce":"inventory","3cfcc9c0-4e99-4add-bb16-6fa0bbf42978":"inventory","d2367fcf-09d5-47a1-8a22-1da880f7ebee":"emissions-scope2","7cc54764-c50e-45c9-80c8-0fad982c6dcb":"inventory","ed65430f-6db7-47ed-a33a-00f3b8e1cfb5":"inventory","9f8ae18b-e462-4844-8e5a-2ddd0ab5e53c":"inventory","124b9b41-d677-4b17-9953-1e708f341943":"emissions-scope2","bb9cfc45-953c-4e0d-930d-e2a34c833935":"inventory","6acb76b6-3e03-4056-b32d-1c885da956f5":"inventory","b2841683-d07a-4480-a162-99bf0e73315a":"simple","ca2c2c3c-f44e-40ce-ac68-e8c1e15fd949":"simple","34129aac-ce86-40ff-8abe-516d0d8820d6":"simple","4d88a40c-8b6f-42cc-beb7-55577fb473f7":"inventory","4e0f81dc-ebdd-493c-a423-3e041143701e":"custom","766c9a50-7cd8-445c-98f7-5d83344b77ea":"custom","fe15d7b8-6252-4a85-9850-e70bdd5f64a3":"inventory","c326acc4-2df8-4ca5-aa96-3f073acac234":"custom","fbbdf700-160d-43f6-9880-4a9d01cd2106":"custom","01ae64d9-13f5-45c7-892a-80d8a656c321":"emissions-scope2","ee5397c5-cab3-4d74-a7d9-627c598b19a2":"inventory","6d53ef11-aa46-4f3c-81cf-45da906a4129":"inventory","341c3fe1-9570-4c00-b77d-9f14c3c51798":"inventory","c4c90bd8-a10e-44ab-a081-014eab7a2d28":"inventory","801a9262-02ca-4cf4-bd54-32d033c1dcac":"simple","3e798139-85d4-4d0f-8a10-5f579075d635":"inventory","157c51c3-a1cc-4b46-981c-8e37bc319c9a":"inventory","cf45d7d2-9bf2-46ef-886f-221615aa8251":"inventory","141f370b-67ed-4900-a3fe-8168fc8e716f":"inventory"},transitionTypes:{"8e754bc9-f9d1-4324-9838-6ea63048046f":"instances-social-sustainability","5c3f975e-950e-48bd-b168-bdd589dbd61f":"custom","ce46dfb7-5437-4e7a-ae61-58bfe7e5ff5c":"instances-social-sustainability","f2b5e259-e916-41bd-9eda-ed593f5db96b":"instances-social-sustainability","26b1c55e-a751-4c41-a00d-dbf268342c50":"instances-social-sustainability","1a064205-ba07-47e1-8c4f-8e95f398a484":"custom","1a524b1b-f347-4f08-9f43-9a2d0aac6a8e":"instances-social-sustainability","ff42c022-b73e-4fa2-8b9f-fbe84e514647":"instances-social-sustainability","4d4cc127-90e2-4478-abe8-42f258562e43":"instances-social-sustainability"}},netData:{places:[{id:"4876d2d5-014f-4206-af09-170d900b0acc",name:"p0",marking:[{instanceID:"i0",impact:0},{instanceID:"i1",impact:0}],schema:{title:"Prozessinstanzen (Nachhaltigkeitsanalyse)",description:"Eine Stelle, die Prozessinstanzmarken mit einem Indikatorwert fr Nachhaltigkeitsauswirkungen speichert.",type:"array",items:{type:"object",properties:{instanceID:{type:"string"},impact:{type:"number"}},required:["instanceID","impact"]},$id:"4876d2d5-014f-4206-af09-170d900b0acc"}},{id:"1d43ff03-0740-4ce8-9fca-d6c459704a18",name:"p1",marking:[],schema:{title:"Prozessinstanzen (Nachhaltigkeitsanalyse)",description:"Eine Stelle, die Prozessinstanzmarken mit einem Indikatorwert fr Nachhaltigkeitsauswirkungen speichert.",type:"array",items:{type:"object",properties:{instanceID:{type:"string"},impact:{type:"number"}},required:["instanceID","impact"]},$id:"1d43ff03-0740-4ce8-9fca-d6c459704a18"}},{id:"58e67779-3f56-4819-9d47-4de2a1189d47",name:"p3",marking:[],schema:{title:"Prozessinstanzen (Nachhaltigkeitsanalyse)",description:"Eine Stelle, die Prozessinstanzmarken mit einem Indikatorwert fr Nachhaltigkeitsauswirkungen speichert.",type:"array",items:{type:"object",properties:{instanceID:{type:"string"},impact:{type:"number"}},required:["instanceID","impact"]},$id:"58e67779-3f56-4819-9d47-4de2a1189d47"}},{id:"4528501a-f423-4bef-acf6-1975ee7766cb",name:"p2",marking:[],schema:{title:"Prozessinstanzen (Nachhaltigkeitsanalyse)",description:"Eine Stelle, die Prozessinstanzmarken mit einem Indikatorwert fr Nachhaltigkeitsauswirkungen speichert.",type:"array",items:{type:"object",properties:{instanceID:{type:"string"},impact:{type:"number"}},required:["instanceID","impact"]},$id:"4528501a-f423-4bef-acf6-1975ee7766cb"}},{id:"499c4196-fac1-4280-b317-33dc927a3fed",name:"p4",marking:[],schema:{title:"Prozessinstanzen (Nachhaltigkeitsanalyse)",description:"Eine Stelle, die Prozessinstanzmarken mit einem Indikatorwert fr Nachhaltigkeitsauswirkungen speichert.",type:"array",items:{type:"object",properties:{instanceID:{type:"string"},impact:{type:"number"}},required:["instanceID","impact"]},$id:"499c4196-fac1-4280-b317-33dc927a3fed"}},{id:"52641fb4-fcee-41be-b8f5-d8af3da3ac8d",name:"p7",marking:[],schema:{title:"Prozessinstanzen (Nachhaltigkeitsanalyse)",description:"Eine Stelle, die Prozessinstanzmarken mit einem Indikatorwert fr Nachhaltigkeitsauswirkungen speichert.",type:"array",items:{type:"object",properties:{instanceID:{type:"string"},impact:{type:"number"}},required:["instanceID","impact"]},$id:"52641fb4-fcee-41be-b8f5-d8af3da3ac8d"}},{id:"73573b72-5df0-4564-81e8-9d4d20d92712",name:"p5",marking:[],schema:{title:"Prozessinstanzen (Nachhaltigkeitsanalyse)",description:"Eine Stelle, die Prozessinstanzmarken mit einem Indikatorwert fr Nachhaltigkeitsauswirkungen speichert.",type:"array",items:{type:"object",properties:{instanceID:{type:"string"},impact:{type:"number"}},required:["instanceID","impact"]},$id:"73573b72-5df0-4564-81e8-9d4d20d92712"}},{id:"8ca9f3ce-ee01-4ced-b29e-952277fbf3d7",name:"p6",marking:[],schema:{title:"Prozessinstanzen (Nachhaltigkeitsanalyse)",description:"Eine Stelle, die Prozessinstanzmarken mit einem Indikatorwert fr Nachhaltigkeitsauswirkungen speichert.",type:"array",items:{type:"object",properties:{instanceID:{type:"string"},impact:{type:"number"}},required:["instanceID","impact"]},$id:"8ca9f3ce-ee01-4ced-b29e-952277fbf3d7"}},{id:"f5ae0fa5-acab-4e05-83fc-751379fef9e8",name:"p8",marking:[],schema:{title:"Prozessinstanzen (Nachhaltigkeitsanalyse)",description:"Eine Stelle, die Prozessinstanzmarken mit einem Indikatorwert fr Nachhaltigkeitsauswirkungen speichert.",type:"array",items:{type:"object",properties:{instanceID:{type:"string"},impact:{type:"number"}},required:["instanceID","impact"]},$id:"f5ae0fa5-acab-4e05-83fc-751379fef9e8"}},{id:"772856ca-b248-42d4-870e-88cb29d13c78",name:"p9",marking:[],schema:{title:"Prozessinstanzen (Nachhaltigkeitsanalyse)",description:"Eine Stelle, die Prozessinstanzmarken mit einem Indikatorwert fr Nachhaltigkeitsauswirkungen speichert.",type:"array",items:{type:"object",properties:{instanceID:{type:"string"},impact:{type:"number"}},required:["instanceID","impact"]},$id:"772856ca-b248-42d4-870e-88cb29d13c78"}},{id:"5e4737f9-e14f-4414-b556-fa97ac5b33ce",name:"Arbeitsleistung Produktion",marking:[{amount:.083,impactFactor:106e-7,allocationFactor:1,scope:1}],schema:{title:"Nachhaltigkeitsauswirkungen",description:"Eine Stelle, Angaben zu Nachhaltigkeitsauswirkungen einer Aktivitt speichert.",type:"array",items:{type:"object",properties:{amount:{type:"number"},impactFactor:{type:"number"},allocationFactor:{type:"number"},scope:{type:"number",enum:[1,2,3]}},required:["amount","impactFactor","allocationFactor","scope"]},$id:"5e4737f9-e14f-4414-b556-fa97ac5b33ce"}},{id:"3cfcc9c0-4e99-4add-bb16-6fa0bbf42978",name:"Arbeitsleistung Bro",marking:[{amount:.017,impactFactor:874e-8,allocationFactor:1,scope:1}],schema:{title:"Nachhaltigkeitsauswirkungen",description:"Eine Stelle, Angaben zu Nachhaltigkeitsauswirkungen einer Aktivitt speichert.",type:"array",items:{type:"object",properties:{amount:{type:"number"},impactFactor:{type:"number"},allocationFactor:{type:"number"},scope:{type:"number",enum:[1,2,3]}},required:["amount","impactFactor","allocationFactor","scope"]},$id:"3cfcc9c0-4e99-4add-bb16-6fa0bbf42978"}},{id:"7cc54764-c50e-45c9-80c8-0fad982c6dcb",name:"Arbeitsleistung Bro",marking:[{amount:.017,impactFactor:874e-8,allocationFactor:1,scope:1}],schema:{title:"Nachhaltigkeitsauswirkungen",description:"Eine Stelle, Angaben zu Nachhaltigkeitsauswirkungen einer Aktivitt speichert.",type:"array",items:{type:"object",properties:{amount:{type:"number"},impactFactor:{type:"number"},allocationFactor:{type:"number"},scope:{type:"number",enum:[1,2,3]}},required:["amount","impactFactor","allocationFactor","scope"]},$id:"7cc54764-c50e-45c9-80c8-0fad982c6dcb"}},{id:"ed65430f-6db7-47ed-a33a-00f3b8e1cfb5",name:"Arbeitsleistung Transport",marking:[{amount:3.5,impactFactor:18e-6,allocationFactor:1e-4,scope:3}],schema:{title:"Nachhaltigkeitsauswirkungen",description:"Eine Stelle, Angaben zu Nachhaltigkeitsauswirkungen einer Aktivitt speichert.",type:"array",items:{type:"object",properties:{amount:{type:"number"},impactFactor:{type:"number"},allocationFactor:{type:"number"},scope:{type:"number",enum:[1,2,3]}},required:["amount","impactFactor","allocationFactor","scope"]},$id:"ed65430f-6db7-47ed-a33a-00f3b8e1cfb5"}},{id:"9f8ae18b-e462-4844-8e5a-2ddd0ab5e53c",name:"Arbeitsleistung Bro",marking:[{amount:.017,impactFactor:874e-8,allocationFactor:1,scope:1}],schema:{title:"Nachhaltigkeitsauswirkungen",description:"Eine Stelle, Angaben zu Nachhaltigkeitsauswirkungen einer Aktivitt speichert.",type:"array",items:{type:"object",properties:{amount:{type:"number"},impactFactor:{type:"number"},allocationFactor:{type:"number"},scope:{type:"number",enum:[1,2,3]}},required:["amount","impactFactor","allocationFactor","scope"]},$id:"9f8ae18b-e462-4844-8e5a-2ddd0ab5e53c"}},{id:"bb9cfc45-953c-4e0d-930d-e2a34c833935",name:"Arbeitsleistung Bro",marking:[{amount:.017,impactFactor:874e-8,allocationFactor:1,scope:1}],schema:{title:"Nachhaltigkeitsauswirkungen",description:"Eine Stelle, Angaben zu Nachhaltigkeitsauswirkungen einer Aktivitt speichert.",type:"array",items:{type:"object",properties:{amount:{type:"number"},impactFactor:{type:"number"},allocationFactor:{type:"number"},scope:{type:"number",enum:[1,2,3]}},required:["amount","impactFactor","allocationFactor","scope"]},$id:"bb9cfc45-953c-4e0d-930d-e2a34c833935"}},{id:"6acb76b6-3e03-4056-b32d-1c885da956f5",name:"Arbeitsleistung Bro",marking:[{amount:.017,impactFactor:874e-8,allocationFactor:1,scope:1}],schema:{title:"Nachhaltigkeitsauswirkungen",description:"Eine Stelle, Angaben zu Nachhaltigkeitsauswirkungen einer Aktivitt speichert.",type:"array",items:{type:"object",properties:{amount:{type:"number"},impactFactor:{type:"number"},allocationFactor:{type:"number"},scope:{type:"number",enum:[1,2,3]}},required:["amount","impactFactor","allocationFactor","scope"]},$id:"6acb76b6-3e03-4056-b32d-1c885da956f5"}},{id:"4d88a40c-8b6f-42cc-beb7-55577fb473f7",name:"Arbeitsleistung Bro",marking:[{amount:.017,impactFactor:874e-8,allocationFactor:1,scope:1}],schema:{title:"Nachhaltigkeitsauswirkungen",description:"Eine Stelle, Angaben zu Nachhaltigkeitsauswirkungen einer Aktivitt speichert.",type:"array",items:{type:"object",properties:{amount:{type:"number"},impactFactor:{type:"number"},allocationFactor:{type:"number"},scope:{type:"number",enum:[1,2,3]}},required:["amount","impactFactor","allocationFactor","scope"]},$id:"4d88a40c-8b6f-42cc-beb7-55577fb473f7"}},{id:"fe15d7b8-6252-4a85-9850-e70bdd5f64a3",name:"Arbeitsleistung Bro",marking:[{amount:.017,impactFactor:874e-8,allocationFactor:1,scope:1}],schema:{title:"Nachhaltigkeitsauswirkungen",description:"Eine Stelle, Angaben zu Nachhaltigkeitsauswirkungen einer Aktivitt speichert.",type:"array",items:{type:"object",properties:{amount:{type:"number"},impactFactor:{type:"number"},allocationFactor:{type:"number"},scope:{type:"number",enum:[1,2,3]}},required:["amount","impactFactor","allocationFactor","scope"]},$id:"fe15d7b8-6252-4a85-9850-e70bdd5f64a3"}},{id:"ee5397c5-cab3-4d74-a7d9-627c598b19a2",name:"IT-Infrastruktur",marking:[{amount:1,impactFactor:.00450133,allocationFactor:585206e-10,scope:3}],schema:{title:"Nachhaltigkeitsauswirkungen",description:"Eine Stelle, Angaben zu Nachhaltigkeitsauswirkungen einer Aktivitt speichert.",type:"array",items:{type:"object",properties:{amount:{type:"number"},impactFactor:{type:"number"},allocationFactor:{type:"number"},scope:{type:"number",enum:[1,2,3]}},required:["amount","impactFactor","allocationFactor","scope"]},$id:"ee5397c5-cab3-4d74-a7d9-627c598b19a2"}},{id:"6d53ef11-aa46-4f3c-81cf-45da906a4129",name:"IT-Infrastruktur",marking:[{amount:1,impactFactor:.00450133,allocationFactor:585206e-10,scope:3}],schema:{title:"Nachhaltigkeitsauswirkungen",description:"Eine Stelle, Angaben zu Nachhaltigkeitsauswirkungen einer Aktivitt speichert.",type:"array",items:{type:"object",properties:{amount:{type:"number"},impactFactor:{type:"number"},allocationFactor:{type:"number"},scope:{type:"number",enum:[1,2,3]}},required:["amount","impactFactor","allocationFactor","scope"]},$id:"6d53ef11-aa46-4f3c-81cf-45da906a4129"}},{id:"341c3fe1-9570-4c00-b77d-9f14c3c51798",name:"IT-Infrastruktur",marking:[{amount:1,impactFactor:.00450133,allocationFactor:585206e-10,scope:3}],schema:{title:"Nachhaltigkeitsauswirkungen",description:"Eine Stelle, Angaben zu Nachhaltigkeitsauswirkungen einer Aktivitt speichert.",type:"array",items:{type:"object",properties:{amount:{type:"number"},impactFactor:{type:"number"},allocationFactor:{type:"number"},scope:{type:"number",enum:[1,2,3]}},required:["amount","impactFactor","allocationFactor","scope"]},$id:"341c3fe1-9570-4c00-b77d-9f14c3c51798"}},{id:"c4c90bd8-a10e-44ab-a081-014eab7a2d28",name:"IT-Infrastruktur",marking:[{amount:1,impactFactor:.00450133,allocationFactor:585206e-10,scope:3}],schema:{title:"Nachhaltigkeitsauswirkungen",description:"Eine Stelle, Angaben zu Nachhaltigkeitsauswirkungen einer Aktivitt speichert.",type:"array",items:{type:"object",properties:{amount:{type:"number"},impactFactor:{type:"number"},allocationFactor:{type:"number"},scope:{type:"number",enum:[1,2,3]}},required:["amount","impactFactor","allocationFactor","scope"]},$id:"c4c90bd8-a10e-44ab-a081-014eab7a2d28"}},{id:"3e798139-85d4-4d0f-8a10-5f579075d635",name:"IT-Infrastruktur",marking:[{amount:1,impactFactor:.00450133,allocationFactor:585206e-10,scope:3}],schema:{title:"Nachhaltigkeitsauswirkungen",description:"Eine Stelle, Angaben zu Nachhaltigkeitsauswirkungen einer Aktivitt speichert.",type:"array",items:{type:"object",properties:{amount:{type:"number"},impactFactor:{type:"number"},allocationFactor:{type:"number"},scope:{type:"number",enum:[1,2,3]}},required:["amount","impactFactor","allocationFactor","scope"]},$id:"3e798139-85d4-4d0f-8a10-5f579075d635"}},{id:"157c51c3-a1cc-4b46-981c-8e37bc319c9a",name:"IT-Infrastruktur",marking:[{amount:1,impactFactor:.00450133,allocationFactor:585206e-10,scope:3}],schema:{title:"Nachhaltigkeitsauswirkungen",description:"Eine Stelle, Angaben zu Nachhaltigkeitsauswirkungen einer Aktivitt speichert.",type:"array",items:{type:"object",properties:{amount:{type:"number"},impactFactor:{type:"number"},allocationFactor:{type:"number"},scope:{type:"number",enum:[1,2,3]}},required:["amount","impactFactor","allocationFactor","scope"]},$id:"157c51c3-a1cc-4b46-981c-8e37bc319c9a"}},{id:"cf45d7d2-9bf2-46ef-886f-221615aa8251",name:"Artikel Scope 1",marking:[{amount:1,impactFactor:8798e-10,allocationFactor:1,scope:1}],schema:{title:"Nachhaltigkeitsauswirkungen",description:"Eine Stelle, Angaben zu Nachhaltigkeitsauswirkungen einer Aktivitt speichert.",type:"array",items:{type:"object",properties:{amount:{type:"number"},impactFactor:{type:"number"},allocationFactor:{type:"number"},scope:{type:"number",enum:[1,2,3]}},required:["amount","impactFactor","allocationFactor","scope"]},$id:"cf45d7d2-9bf2-46ef-886f-221615aa8251"}},{id:"141f370b-67ed-4900-a3fe-8168fc8e716f",name:"Artikel Scope 3",marking:[{amount:1,impactFactor:26342053239799996e-23,allocationFactor:1,scope:1}],schema:{title:"Nachhaltigkeitsauswirkungen",description:"Eine Stelle, Angaben zu Nachhaltigkeitsauswirkungen einer Aktivitt speichert.",type:"array",items:{type:"object",properties:{amount:{type:"number"},impactFactor:{type:"number"},allocationFactor:{type:"number"},scope:{type:"number",enum:[1,2,3]}},required:["amount","impactFactor","allocationFactor","scope"]},$id:"141f370b-67ed-4900-a3fe-8168fc8e716f"}}],transitions:[{id:"8e754bc9-f9d1-4324-9838-6ea63048046f",name:"t0: Verfgbarkeit prfen",preface:`// general function library (these are reimplementations of missing standard functions)
 
local sumRecursive(arr, n) =
  if (n <= 0) then 0
  else sumRecursive(arr, n-1) + arr[n-1];
local sum(arr) = sumRecursive(arr, std.length(arr));
 
// helper functions and variables
 
local isInstanceToken(token) = std.objectHas(token, 'instanceID');
local instanceToken = std.filter(isInstanceToken, input_values)[0];
 
local isScope(scope, token) = std.objectHas(token, 'scope') && token.scope == scope;
 
// calculation of impact value and contributions
 
local outputAllocation = 1;
local calculateContribution(token) = 
  if isInstanceToken(token) then token.impact 
  else token.amount * token.impactFactor * token.allocationFactor;
local contributions = std.map(calculateContribution, input_values);
local impact = sum(contributions) / outputAllocation;
 
// assemble data for visualisations and indicators
 
local applyOutputAllocation(contribution) = { name: contribution.name, value: contribution.value / outputAllocation};
local assembleScope1Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][0]['children'])
  else if isScope(1,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope1ContributionArrays = std.mapWithIndex(assembleScope1Contributions, input_values);
local scope1Contributions = std.flattenArrays(scope1ContributionArrays);
 
local assembleScope2Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][1]['children'])
  else if isScope(2,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope2ContributionArrays = std.mapWithIndex(assembleScope2Contributions, input_values);
local scope2Contributions = std.flattenArrays(scope2ContributionArrays);
 
local assembleScope3Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][2]['children'])
  else if isScope(3,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope3ContributionArrays = std.mapWithIndex(assembleScope3Contributions, input_values);
local scope3Contributions = std.flattenArrays(scope3ContributionArrays);
 
local visualisations =  [
  {
    'type': 'number',
    'unit': 'Arbeitsunfaelle',
    'description': 'Gesundheit und Arbeitssicherheit',
    'value': impact
  },
  {
    'type': 'sunburst',
    'unit': 'Arbeitsunfaelle',
    'description': 'Gesundheit und Arbeitssicherheit (Sunburst)',
    'value': [
    {
      'name': 'Scope 1',
      'children': scope1Contributions
    },
    {
      'name': 'Scope 2',
      'children': scope2Contributions
    },
    {
    'name': 'Scope 3',
    'children': scope3Contributions
    }]
  }
];`,guard:"true",customVariables:{},keyVarSnippets:{output_p1_key:"local output_p1_key = '-';"},fragmentVarSnippets:{output_p1_value:`local output_p1_value = instanceToken + {
'impact': impact,
'$visualisations': visualisations
};`}},{id:"5c3f975e-950e-48bd-b168-bdd589dbd61f",name:"t4: Versand vorbereiten",preface:`// general function library (these are reimplementations of missing standard functions)
 
local sumRecursive(arr, n) =
  if (n <= 0) then 0
  else sumRecursive(arr, n-1) + arr[n-1];
local sum(arr) = sumRecursive(arr, std.length(arr));
 
// helper functions and variables
 
local isInstanceToken(token) = std.objectHas(token, 'instanceID');
local instanceToken = std.filter(isInstanceToken, input_values)[0];
 
local isScope(scope, token) = std.objectHas(token, 'scope') && token.scope == scope;
 
// calculation of impact value and contributions
 
local outputAllocation = 2;
local calculateContribution(token) = 
  if isInstanceToken(token) then token.impact 
  else token.amount * token.impactFactor * token.allocationFactor;
local contributions = std.map(calculateContribution, input_values);
local impact = sum(contributions) / outputAllocation;
 
// assemble data for visualisations and indicators
 
local applyOutputAllocation(contribution) = { name: contribution.name, value: contribution.value / outputAllocation};
local assembleScope1Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][0]['children'])
  else if isScope(1,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope1ContributionArrays = std.mapWithIndex(assembleScope1Contributions, input_values);
local scope1Contributions = std.flattenArrays(scope1ContributionArrays);
 
local assembleScope2Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][1]['children'])
  else if isScope(2,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope2ContributionArrays = std.mapWithIndex(assembleScope2Contributions, input_values);
local scope2Contributions = std.flattenArrays(scope2ContributionArrays);
 
local assembleScope3Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][2]['children'])
  else if isScope(3,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope3ContributionArrays = std.mapWithIndex(assembleScope3Contributions, input_values);
local scope3Contributions = std.flattenArrays(scope3ContributionArrays);
 
local visualisations =  [
  {
    'type': 'number',
    'unit': 'Arbeitsunfaelle',
    'description': 'Gesundheit und Arbeitssicherheit',
    'value': impact
  },
  {
    'type': 'sunburst',
    'unit': 'Arbeitsunfaelle',
    'description': 'Gesundheit und Arbeitssicherheit (Sunburst)',
    'value': [
    {
      'name': 'Scope 1',
      'children': scope1Contributions
    },
    {
      'name': 'Scope 2',
      'children': scope2Contributions
    },
    {
    'name': 'Scope 3',
    'children': scope3Contributions
    }]
  }
];`,guard:"true",customVariables:{},keyVarSnippets:{output_p4_key:"local output_p4_key = '-';",output_p7_key:"local output_p7_key = '-';"},fragmentVarSnippets:{output_p4_value:`local output_p4_value = instanceToken + {
'impact': impact,
'$visualisations': visualisations
};`,output_p7_value:`local output_p7_value = instanceToken + {
'impact': impact,
'$visualisations': visualisations
};`}},{id:"ce46dfb7-5437-4e7a-ae61-58bfe7e5ff5c",name:"t1: Produktion durchfhren",preface:`// general function library (these are reimplementations of missing standard functions)
 
local sumRecursive(arr, n) =
  if (n <= 0) then 0
  else sumRecursive(arr, n-1) + arr[n-1];
local sum(arr) = sumRecursive(arr, std.length(arr));
 
// helper functions and variables
 
local isInstanceToken(token) = std.objectHas(token, 'instanceID');
local instanceToken = std.filter(isInstanceToken, input_values)[0];
 
local isScope(scope, token) = std.objectHas(token, 'scope') && token.scope == scope;
 
// calculation of impact value and contributions
 
local outputAllocation = 1;
local calculateContribution(token) = 
  if isInstanceToken(token) then token.impact 
  else token.amount * token.impactFactor * token.allocationFactor;
local contributions = std.map(calculateContribution, input_values);
local impact = sum(contributions) / outputAllocation;
 
// assemble data for visualisations and indicators
 
local applyOutputAllocation(contribution) = { name: contribution.name, value: contribution.value / outputAllocation};
local assembleScope1Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][0]['children'])
  else if isScope(1,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope1ContributionArrays = std.mapWithIndex(assembleScope1Contributions, input_values);
local scope1Contributions = std.flattenArrays(scope1ContributionArrays);
 
local assembleScope2Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][1]['children'])
  else if isScope(2,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope2ContributionArrays = std.mapWithIndex(assembleScope2Contributions, input_values);
local scope2Contributions = std.flattenArrays(scope2ContributionArrays);
 
local assembleScope3Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][2]['children'])
  else if isScope(3,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope3ContributionArrays = std.mapWithIndex(assembleScope3Contributions, input_values);
local scope3Contributions = std.flattenArrays(scope3ContributionArrays);
 
local visualisations =  [
  {
    'type': 'number',
    'unit': 'Arbeitsunfaelle',
    'description': 'Gesundheit und Arbeitssicherheit',
    'value': impact
  },
  {
    'type': 'sunburst',
    'unit': 'Arbeitsunfaelle',
    'description': 'Gesundheit und Arbeitssicherheit (Sunburst)',
    'value': [
    {
      'name': 'Scope 1',
      'children': scope1Contributions
    },
    {
      'name': 'Scope 2',
      'children': scope2Contributions
    },
    {
    'name': 'Scope 3',
    'children': scope3Contributions
    }]
  }
];`,guard:"true",customVariables:{},keyVarSnippets:{output_p3_key:"local output_p3_key = '-';"},fragmentVarSnippets:{output_p3_value:`local output_p3_value = instanceToken + {
'impact': impact,
'$visualisations': visualisations
};`}},{id:"f2b5e259-e916-41bd-9eda-ed593f5db96b",name:"t2: Artikel reservieren",preface:`// general function library (these are reimplementations of missing standard functions)
 
local sumRecursive(arr, n) =
  if (n <= 0) then 0
  else sumRecursive(arr, n-1) + arr[n-1];
local sum(arr) = sumRecursive(arr, std.length(arr));
 
// helper functions and variables
 
local isInstanceToken(token) = std.objectHas(token, 'instanceID');
local instanceToken = std.filter(isInstanceToken, input_values)[0];
 
local isScope(scope, token) = std.objectHas(token, 'scope') && token.scope == scope;
 
// calculation of impact value and contributions
 
local outputAllocation = 1;
local calculateContribution(token) = 
  if isInstanceToken(token) then token.impact 
  else token.amount * token.impactFactor * token.allocationFactor;
local contributions = std.map(calculateContribution, input_values);
local impact = sum(contributions) / outputAllocation;
 
// assemble data for visualisations and indicators
 
local applyOutputAllocation(contribution) = { name: contribution.name, value: contribution.value / outputAllocation};
local assembleScope1Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][0]['children'])
  else if isScope(1,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope1ContributionArrays = std.mapWithIndex(assembleScope1Contributions, input_values);
local scope1Contributions = std.flattenArrays(scope1ContributionArrays);
 
local assembleScope2Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][1]['children'])
  else if isScope(2,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope2ContributionArrays = std.mapWithIndex(assembleScope2Contributions, input_values);
local scope2Contributions = std.flattenArrays(scope2ContributionArrays);
 
local assembleScope3Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][2]['children'])
  else if isScope(3,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope3ContributionArrays = std.mapWithIndex(assembleScope3Contributions, input_values);
local scope3Contributions = std.flattenArrays(scope3ContributionArrays);
 
local visualisations =  [
  {
    'type': 'number',
    'unit': 'Arbeitsunfaelle',
    'description': 'Gesundheit und Arbeitssicherheit',
    'value': impact
  },
  {
    'type': 'sunburst',
    'unit': 'Arbeitsunfaelle',
    'description': 'Gesundheit und Arbeitssicherheit (Sunburst)',
    'value': [
    {
      'name': 'Scope 1',
      'children': scope1Contributions
    },
    {
      'name': 'Scope 2',
      'children': scope2Contributions
    },
    {
    'name': 'Scope 3',
    'children': scope3Contributions
    }]
  }
];`,guard:"true",customVariables:{},keyVarSnippets:{output_p2_key:"local output_p2_key = '-';"},fragmentVarSnippets:{output_p2_value:`local output_p2_value = instanceToken + {
'impact': impact,
'$visualisations': visualisations
};`}},{id:"26b1c55e-a751-4c41-a00d-dbf268342c50",name:"t3: Artikel aus Lager holen",preface:`// general function library (these are reimplementations of missing standard functions)
 
local sumRecursive(arr, n) =
  if (n <= 0) then 0
  else sumRecursive(arr, n-1) + arr[n-1];
local sum(arr) = sumRecursive(arr, std.length(arr));
 
// helper functions and variables
 
local isInstanceToken(token) = std.objectHas(token, 'instanceID');
local instanceToken = std.filter(isInstanceToken, input_values)[0];
 
local isScope(scope, token) = std.objectHas(token, 'scope') && token.scope == scope;
 
// calculation of impact value and contributions
 
local outputAllocation = 1;
local calculateContribution(token) = 
  if isInstanceToken(token) then token.impact 
  else token.amount * token.impactFactor * token.allocationFactor;
local contributions = std.map(calculateContribution, input_values);
local impact = sum(contributions) / outputAllocation;
 
// assemble data for visualisations and indicators
 
local applyOutputAllocation(contribution) = { name: contribution.name, value: contribution.value / outputAllocation};
local assembleScope1Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][0]['children'])
  else if isScope(1,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope1ContributionArrays = std.mapWithIndex(assembleScope1Contributions, input_values);
local scope1Contributions = std.flattenArrays(scope1ContributionArrays);
 
local assembleScope2Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][1]['children'])
  else if isScope(2,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope2ContributionArrays = std.mapWithIndex(assembleScope2Contributions, input_values);
local scope2Contributions = std.flattenArrays(scope2ContributionArrays);
 
local assembleScope3Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][2]['children'])
  else if isScope(3,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope3ContributionArrays = std.mapWithIndex(assembleScope3Contributions, input_values);
local scope3Contributions = std.flattenArrays(scope3ContributionArrays);
 
local visualisations =  [
  {
    'type': 'number',
    'unit': 'Arbeitsunfaelle',
    'description': 'Gesundheit und Arbeitssicherheit',
    'value': impact
  },
  {
    'type': 'sunburst',
    'unit': 'Arbeitsunfaelle',
    'description': 'Gesundheit und Arbeitssicherheit (Sunburst)',
    'value': [
    {
      'name': 'Scope 1',
      'children': scope1Contributions
    },
    {
      'name': 'Scope 2',
      'children': scope2Contributions
    },
    {
    'name': 'Scope 3',
    'children': scope3Contributions
    }]
  }
];`,guard:"true",customVariables:{},keyVarSnippets:{output_p3_key:"local output_p3_key = '-';"},fragmentVarSnippets:{output_p3_value:`local output_p3_value = instanceToken + {
'impact': impact,
'$visualisations': visualisations
};`}},{id:"1a064205-ba07-47e1-8c4f-8e95f398a484",name:"t8: Verkaufsprozess abschlieen",preface:`// general function library (these are reimplementations of missing standard functions)
 
local sumRecursive(arr, n) =
  if (n <= 0) then 0
  else sumRecursive(arr, n-1) + arr[n-1];
local sum(arr) = sumRecursive(arr, std.length(arr));
 
// helper functions and variables
 
local isInstanceToken(token) = std.objectHas(token, 'instanceID');
local instanceToken = std.filter(isInstanceToken, input_values)[0];
 
local isScope(scope, token) = std.objectHas(token, 'scope') && token.scope == scope;
 
// calculation of impact value and contributions
 
local outputAllocation = 1;
local calculateContribution(token) = 
  if isInstanceToken(token) then token.impact 
  else token.amount * token.impactFactor * token.allocationFactor;
local contributions = std.map(calculateContribution, input_values);
local impact = sum(contributions) / outputAllocation;
 
// assemble data for visualisations and indicators
 
local applyOutputAllocation(contribution) = { name: contribution.name, value: contribution.value / outputAllocation};
local assembleScope1Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][0]['children'])
  else if isScope(1,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope1ContributionArrays = std.mapWithIndex(assembleScope1Contributions, input_values);
local scope1Contributions = std.flattenArrays(scope1ContributionArrays);
 
local assembleScope2Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][1]['children'])
  else if isScope(2,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope2ContributionArrays = std.mapWithIndex(assembleScope2Contributions, input_values);
local scope2Contributions = std.flattenArrays(scope2ContributionArrays);
 
local assembleScope3Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][2]['children'])
  else if isScope(3,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope3ContributionArrays = std.mapWithIndex(assembleScope3Contributions, input_values);
local scope3Contributions = std.flattenArrays(scope3ContributionArrays);
 
local visualisations =  [
  {
    'type': 'number',
    'unit': 'Arbeitsunfaelle',
    'description': 'Gesundheit und Arbeitssicherheit',
    'value': impact
  },
  {
    'type': 'sunburst',
    'unit': 'Arbeitsunfaelle',
    'description': 'Gesundheit und Arbeitssicherheit (Sunburst)',
    'value': [
    {
      'name': 'Scope 1',
      'children': scope1Contributions
    },
    {
      'name': 'Scope 2',
      'children': scope2Contributions
    },
    {
    'name': 'Scope 3',
    'children': scope3Contributions
    }]
  }
];`,guard:"input_p6_value.instanceID == input_p8_value.instanceID",customVariables:{},keyVarSnippets:{output_p9_key:"local output_p9_key = '-';"},fragmentVarSnippets:{output_p9_value:`local output_p9_value = instanceToken + {
'impact': impact,
'$visualisations': visualisations
};`}},{id:"1a524b1b-f347-4f08-9f43-9a2d0aac6a8e",name:"t6: Rechnung verschicken",preface:`// general function library (these are reimplementations of missing standard functions)
 
local sumRecursive(arr, n) =
  if (n <= 0) then 0
  else sumRecursive(arr, n-1) + arr[n-1];
local sum(arr) = sumRecursive(arr, std.length(arr));
 
// helper functions and variables
 
local isInstanceToken(token) = std.objectHas(token, 'instanceID');
local instanceToken = std.filter(isInstanceToken, input_values)[0];
 
local isScope(scope, token) = std.objectHas(token, 'scope') && token.scope == scope;
 
// calculation of impact value and contributions
 
local outputAllocation = 1;
local calculateContribution(token) = 
  if isInstanceToken(token) then token.impact 
  else token.amount * token.impactFactor * token.allocationFactor;
local contributions = std.map(calculateContribution, input_values);
local impact = sum(contributions) / outputAllocation;
 
// assemble data for visualisations and indicators
 
local applyOutputAllocation(contribution) = { name: contribution.name, value: contribution.value / outputAllocation};
local assembleScope1Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][0]['children'])
  else if isScope(1,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope1ContributionArrays = std.mapWithIndex(assembleScope1Contributions, input_values);
local scope1Contributions = std.flattenArrays(scope1ContributionArrays);
 
local assembleScope2Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][1]['children'])
  else if isScope(2,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope2ContributionArrays = std.mapWithIndex(assembleScope2Contributions, input_values);
local scope2Contributions = std.flattenArrays(scope2ContributionArrays);
 
local assembleScope3Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][2]['children'])
  else if isScope(3,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope3ContributionArrays = std.mapWithIndex(assembleScope3Contributions, input_values);
local scope3Contributions = std.flattenArrays(scope3ContributionArrays);
 
local visualisations =  [
  {
    'type': 'number',
    'unit': 'Arbeitsunfaelle',
    'description': 'Gesundheit und Arbeitssicherheit',
    'value': impact
  },
  {
    'type': 'sunburst',
    'unit': 'Arbeitsunfaelle',
    'description': 'Gesundheit und Arbeitssicherheit (Sunburst)',
    'value': [
    {
      'name': 'Scope 1',
      'children': scope1Contributions
    },
    {
      'name': 'Scope 2',
      'children': scope2Contributions
    },
    {
    'name': 'Scope 3',
    'children': scope3Contributions
    }]
  }
];`,guard:"true",customVariables:{},keyVarSnippets:{output_p6_key:"local output_p6_key = '-';"},fragmentVarSnippets:{output_p6_value:`local output_p6_value = instanceToken + {
'impact': impact,
'$visualisations': visualisations
};`}},{id:"ff42c022-b73e-4fa2-8b9f-fbe84e514647",name:"t5: Rechnung stellen",preface:`// general function library (these are reimplementations of missing standard functions)
 
local sumRecursive(arr, n) =
  if (n <= 0) then 0
  else sumRecursive(arr, n-1) + arr[n-1];
local sum(arr) = sumRecursive(arr, std.length(arr));
 
// helper functions and variables
 
local isInstanceToken(token) = std.objectHas(token, 'instanceID');
local instanceToken = std.filter(isInstanceToken, input_values)[0];
 
local isScope(scope, token) = std.objectHas(token, 'scope') && token.scope == scope;
 
// calculation of impact value and contributions
 
local outputAllocation = 1;
local calculateContribution(token) = 
  if isInstanceToken(token) then token.impact 
  else token.amount * token.impactFactor * token.allocationFactor;
local contributions = std.map(calculateContribution, input_values);
local impact = sum(contributions) / outputAllocation;
 
// assemble data for visualisations and indicators
 
local applyOutputAllocation(contribution) = { name: contribution.name, value: contribution.value / outputAllocation};
local assembleScope1Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][0]['children'])
  else if isScope(1,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope1ContributionArrays = std.mapWithIndex(assembleScope1Contributions, input_values);
local scope1Contributions = std.flattenArrays(scope1ContributionArrays);
 
local assembleScope2Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][1]['children'])
  else if isScope(2,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope2ContributionArrays = std.mapWithIndex(assembleScope2Contributions, input_values);
local scope2Contributions = std.flattenArrays(scope2ContributionArrays);
 
local assembleScope3Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][2]['children'])
  else if isScope(3,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope3ContributionArrays = std.mapWithIndex(assembleScope3Contributions, input_values);
local scope3Contributions = std.flattenArrays(scope3ContributionArrays);
 
local visualisations =  [
  {
    'type': 'number',
    'unit': 'Arbeitsunfaelle',
    'description': 'Gesundheit und Arbeitssicherheit',
    'value': impact
  },
  {
    'type': 'sunburst',
    'unit': 'Arbeitsunfaelle',
    'description': 'Gesundheit und Arbeitssicherheit (Sunburst)',
    'value': [
    {
      'name': 'Scope 1',
      'children': scope1Contributions
    },
    {
      'name': 'Scope 2',
      'children': scope2Contributions
    },
    {
    'name': 'Scope 3',
    'children': scope3Contributions
    }]
  }
];`,guard:"true",customVariables:{},keyVarSnippets:{output_p5_key:"local output_p5_key = '-';"},fragmentVarSnippets:{output_p5_value:`local output_p5_value = instanceToken + {
'impact': impact,
'$visualisations': visualisations
};`}},{id:"4d4cc127-90e2-4478-abe8-42f258562e43",name:"t7: Transportieren",preface:`// general function library (these are reimplementations of missing standard functions)
 
local sumRecursive(arr, n) =
  if (n <= 0) then 0
  else sumRecursive(arr, n-1) + arr[n-1];
local sum(arr) = sumRecursive(arr, std.length(arr));
 
// helper functions and variables
 
local isInstanceToken(token) = std.objectHas(token, 'instanceID');
local instanceToken = std.filter(isInstanceToken, input_values)[0];
 
local isScope(scope, token) = std.objectHas(token, 'scope') && token.scope == scope;
 
// calculation of impact value and contributions
 
local outputAllocation = 1;
local calculateContribution(token) = 
  if isInstanceToken(token) then token.impact 
  else token.amount * token.impactFactor * token.allocationFactor;
local contributions = std.map(calculateContribution, input_values);
local impact = sum(contributions) / outputAllocation;
 
// assemble data for visualisations and indicators
 
local applyOutputAllocation(contribution) = { name: contribution.name, value: contribution.value / outputAllocation};
local assembleScope1Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][0]['children'])
  else if isScope(1,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope1ContributionArrays = std.mapWithIndex(assembleScope1Contributions, input_values);
local scope1Contributions = std.flattenArrays(scope1ContributionArrays);
 
local assembleScope2Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][1]['children'])
  else if isScope(2,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope2ContributionArrays = std.mapWithIndex(assembleScope2Contributions, input_values);
local scope2Contributions = std.flattenArrays(scope2ContributionArrays);
 
local assembleScope3Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][2]['children'])
  else if isScope(3,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope3ContributionArrays = std.mapWithIndex(assembleScope3Contributions, input_values);
local scope3Contributions = std.flattenArrays(scope3ContributionArrays);
 
local visualisations =  [
  {
    'type': 'number',
    'unit': 'Arbeitsunfaelle',
    'description': 'Gesundheit und Arbeitssicherheit',
    'value': impact
  },
  {
    'type': 'sunburst',
    'unit': 'Arbeitsunfaelle',
    'description': 'Gesundheit und Arbeitssicherheit (Sunburst)',
    'value': [
    {
      'name': 'Scope 1',
      'children': scope1Contributions
    },
    {
      'name': 'Scope 2',
      'children': scope2Contributions
    },
    {
    'name': 'Scope 3',
    'children': scope3Contributions
    }]
  }
];`,guard:"true",customVariables:{},keyVarSnippets:{output_p8_key:"local output_p8_key = '-';"},fragmentVarSnippets:{output_p8_value:`local output_p8_value = instanceToken + {
'impact': impact,
'$visualisations': visualisations
};`}}],arcs:[{id:"dbf968cc-fcf7-440c-bf35-471a230c7584",filter:"$.*",fromId:"4876d2d5-014f-4206-af09-170d900b0acc",toId:"8e754bc9-f9d1-4324-9838-6ea63048046f"},{id:"d920242a-64a3-4bd7-bfd0-01ec77be49ac",filter:"$",fromId:"8e754bc9-f9d1-4324-9838-6ea63048046f",toId:"1d43ff03-0740-4ce8-9fca-d6c459704a18"},{id:"ebe47cb1-5fad-4656-9064-13164107019f",filter:"$.*",fromId:"1d43ff03-0740-4ce8-9fca-d6c459704a18",toId:"ce46dfb7-5437-4e7a-ae61-58bfe7e5ff5c"},{id:"108d81cb-cbc8-490e-85e9-424f6f1b55f8",filter:"$",fromId:"ce46dfb7-5437-4e7a-ae61-58bfe7e5ff5c",toId:"58e67779-3f56-4819-9d47-4de2a1189d47"},{id:"bda372bd-0083-40f5-b4b2-bd708d2e4402",filter:"$.*",fromId:"58e67779-3f56-4819-9d47-4de2a1189d47",toId:"5c3f975e-950e-48bd-b168-bdd589dbd61f"},{id:"d342db48-dab4-4660-8847-97c73f142b83",filter:"$",fromId:"5c3f975e-950e-48bd-b168-bdd589dbd61f",toId:"499c4196-fac1-4280-b317-33dc927a3fed"},{id:"cfce7d5a-db54-4b2d-997a-d2ad04fa4bf0",filter:"$.*",fromId:"499c4196-fac1-4280-b317-33dc927a3fed",toId:"ff42c022-b73e-4fa2-8b9f-fbe84e514647"},{id:"16cd8671-29d6-439b-bda2-c804665b8671",filter:"$",fromId:"ff42c022-b73e-4fa2-8b9f-fbe84e514647",toId:"73573b72-5df0-4564-81e8-9d4d20d92712"},{id:"e60292b6-5900-4d31-bd65-f85de6109a3f",filter:"$.*",fromId:"73573b72-5df0-4564-81e8-9d4d20d92712",toId:"1a524b1b-f347-4f08-9f43-9a2d0aac6a8e"},{id:"8fda0a53-608d-4565-90a1-d427dccabeeb",filter:"$",fromId:"1a524b1b-f347-4f08-9f43-9a2d0aac6a8e",toId:"8ca9f3ce-ee01-4ced-b29e-952277fbf3d7"},{id:"14655dd5-456c-40aa-b0a2-9113005c7906",filter:"$.*",fromId:"8ca9f3ce-ee01-4ced-b29e-952277fbf3d7",toId:"1a064205-ba07-47e1-8c4f-8e95f398a484"},{id:"b45a639f-4fbf-47bf-8ded-10f66ec6f792",filter:"$",fromId:"1a064205-ba07-47e1-8c4f-8e95f398a484",toId:"772856ca-b248-42d4-870e-88cb29d13c78"},{id:"1e011651-7c7a-430e-a52e-2fc0ffe514db",filter:"$",fromId:"5c3f975e-950e-48bd-b168-bdd589dbd61f",toId:"52641fb4-fcee-41be-b8f5-d8af3da3ac8d"},{id:"42cc1c6c-5cac-4653-a8aa-8453320cdea8",filter:"$.*",fromId:"52641fb4-fcee-41be-b8f5-d8af3da3ac8d",toId:"4d4cc127-90e2-4478-abe8-42f258562e43"},{id:"faa16a48-a017-4fe2-a4e4-2ccc6db0cbb9",filter:"$",fromId:"4d4cc127-90e2-4478-abe8-42f258562e43",toId:"f5ae0fa5-acab-4e05-83fc-751379fef9e8"},{id:"ac8f1222-aff3-4f3d-ba1d-2a8ea8fc0c69",filter:"$.*",fromId:"f5ae0fa5-acab-4e05-83fc-751379fef9e8",toId:"1a064205-ba07-47e1-8c4f-8e95f398a484"},{id:"3525627a-9d60-4727-8ded-65f859997c45",filter:"$.*",fromId:"1d43ff03-0740-4ce8-9fca-d6c459704a18",toId:"f2b5e259-e916-41bd-9eda-ed593f5db96b"},{id:"f0ba74cb-a5c6-4817-b97e-224ffadfbc9f",filter:"$",fromId:"f2b5e259-e916-41bd-9eda-ed593f5db96b",toId:"4528501a-f423-4bef-acf6-1975ee7766cb"},{id:"53a48601-e158-417e-bc80-d73899a90156",filter:"$.*",fromId:"4528501a-f423-4bef-acf6-1975ee7766cb",toId:"26b1c55e-a751-4c41-a00d-dbf268342c50"},{id:"c34917fe-888d-4404-86f8-18413c4281fe",filter:"$",fromId:"26b1c55e-a751-4c41-a00d-dbf268342c50",toId:"58e67779-3f56-4819-9d47-4de2a1189d47"},{id:"b40f5521-d3fc-4c18-a252-81f16608977e",filter:"$.*",fromId:"5e4737f9-e14f-4414-b556-fa97ac5b33ce",toId:"ce46dfb7-5437-4e7a-ae61-58bfe7e5ff5c"},{id:"5c42e3fe-28c9-4362-a784-93ad0dc2edd0",filter:"$.*",fromId:"9f8ae18b-e462-4844-8e5a-2ddd0ab5e53c",toId:"1a524b1b-f347-4f08-9f43-9a2d0aac6a8e"},{id:"b566ccf0-326a-4e0f-9063-97a4175a368d",filter:"$.*",fromId:"7cc54764-c50e-45c9-80c8-0fad982c6dcb",toId:"5c3f975e-950e-48bd-b168-bdd589dbd61f"},{id:"bf85e032-2d2a-4e9c-a139-edcf76c4125b",filter:"$.*",fromId:"ed65430f-6db7-47ed-a33a-00f3b8e1cfb5",toId:"4d4cc127-90e2-4478-abe8-42f258562e43"},{id:"a92776c2-be2b-4153-8b41-f01c2662e464",filter:"$.*",fromId:"bb9cfc45-953c-4e0d-930d-e2a34c833935",toId:"1a064205-ba07-47e1-8c4f-8e95f398a484"},{id:"23533fac-384e-4dac-ae7a-babe5f892895",filter:"$.*",fromId:"6acb76b6-3e03-4056-b32d-1c885da956f5",toId:"26b1c55e-a751-4c41-a00d-dbf268342c50"},{id:"b9dc6a8b-6474-4f4d-bdec-02779707ca56",filter:"$.*",fromId:"3cfcc9c0-4e99-4add-bb16-6fa0bbf42978",toId:"f2b5e259-e916-41bd-9eda-ed593f5db96b"},{id:"09e9aa54-7118-46b5-80d5-482edf655ae7",filter:"$.*",fromId:"4d88a40c-8b6f-42cc-beb7-55577fb473f7",toId:"8e754bc9-f9d1-4324-9838-6ea63048046f"},{id:"79fa0305-9adf-43ec-a002-5eafcca63155",filter:"$.*",fromId:"fe15d7b8-6252-4a85-9850-e70bdd5f64a3",toId:"ff42c022-b73e-4fa2-8b9f-fbe84e514647"},{id:"38702339-fa77-4c72-9cf7-bcbfd0c7cea0",filter:"$.*",fromId:"ee5397c5-cab3-4d74-a7d9-627c598b19a2",toId:"8e754bc9-f9d1-4324-9838-6ea63048046f"},{id:"83167ddc-04b4-41bd-94fa-1508712c9a70",filter:"$.*",fromId:"6d53ef11-aa46-4f3c-81cf-45da906a4129",toId:"ce46dfb7-5437-4e7a-ae61-58bfe7e5ff5c"},{id:"cc9f4a0e-17a1-40a5-b069-3f3208f8c132",filter:"$.*",fromId:"341c3fe1-9570-4c00-b77d-9f14c3c51798",toId:"f2b5e259-e916-41bd-9eda-ed593f5db96b"},{id:"cf35c352-2d2f-4796-addf-381e5f58c148",filter:"$.*",fromId:"c4c90bd8-a10e-44ab-a081-014eab7a2d28",toId:"5c3f975e-950e-48bd-b168-bdd589dbd61f"},{id:"d3e3e1a7-15af-4161-bff5-36b6cd43443e",filter:"$.*",fromId:"3e798139-85d4-4d0f-8a10-5f579075d635",toId:"1a524b1b-f347-4f08-9f43-9a2d0aac6a8e"},{id:"1d179874-112f-4bf7-97d1-998a541c0365",filter:"$.*",fromId:"157c51c3-a1cc-4b46-981c-8e37bc319c9a",toId:"1a064205-ba07-47e1-8c4f-8e95f398a484"},{id:"d98ca297-164c-44e6-bf5c-c39aac3993d5",filter:"$.*",fromId:"cf45d7d2-9bf2-46ef-886f-221615aa8251",toId:"26b1c55e-a751-4c41-a00d-dbf268342c50"},{id:"344573a0-38b0-4f9f-a666-a9591687e610",filter:"$.*",fromId:"141f370b-67ed-4900-a3fe-8168fc8e716f",toId:"26b1c55e-a751-4c41-a00d-dbf268342c50"}]},layoutData:{cells:[{type:"pn.Transition",size:{width:100,height:50},position:{x:288,y:276},angle:0,id:"8e754bc9-f9d1-4324-9838-6ea63048046f",jsonnetsType:"transition",z:1,attrs:{".label":{fill:"#7a7e9b",text:"t0: Verfgbarkeit prfen"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:1200,y:636},angle:0,id:"5c3f975e-950e-48bd-b168-bdd589dbd61f",jsonnetsType:"transition",z:2,attrs:{".label":{fill:"#7a7e9b",text:"t4: Versand vorbereiten"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:732,y:144},angle:0,id:"ce46dfb7-5437-4e7a-ae61-58bfe7e5ff5c",jsonnetsType:"transition",z:3,attrs:{".label":{fill:"#7a7e9b",text:"t1: Produktion durchfhren"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:588,y:372},angle:0,id:"f2b5e259-e916-41bd-9eda-ed593f5db96b",jsonnetsType:"transition",z:4,attrs:{".label":{fill:"#7a7e9b",text:"t2: Artikel reservieren"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:900,y:372},angle:0,id:"26b1c55e-a751-4c41-a00d-dbf268342c50",jsonnetsType:"transition",z:5,attrs:{".label":{fill:"#7a7e9b",text:"t3: Artikel aus Lager holen"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:288,y:624},angle:0,id:"1a064205-ba07-47e1-8c4f-8e95f398a484",jsonnetsType:"transition",z:6,attrs:{".label":{fill:"#7a7e9b",text:"t8: Verkaufsprozess abschlieen"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:588,y:540},angle:0,id:"1a524b1b-f347-4f08-9f43-9a2d0aac6a8e",jsonnetsType:"transition",z:7,attrs:{".label":{fill:"#7a7e9b",text:"t6: Rechnung verschicken"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:900,y:540},angle:0,id:"ff42c022-b73e-4fa2-8b9f-fbe84e514647",jsonnetsType:"transition",z:8,attrs:{".label":{fill:"#7a7e9b",text:"t5: Rechnung stellen"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:732,y:732},angle:0,id:"4d4cc127-90e2-4478-abe8-42f258562e43",jsonnetsType:"transition",z:9,attrs:{".label":{fill:"#7a7e9b",text:"t7: Transportieren"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:132,y:276},angle:0,tokens:2,id:"4876d2d5-014f-4206-af09-170d900b0acc",jsonnetsType:"place",z:10,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p0"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:480,y:276},angle:0,tokens:0,id:"1d43ff03-0740-4ce8-9fca-d6c459704a18",jsonnetsType:"place",z:11,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p1"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:1080,y:264},angle:0,tokens:0,id:"58e67779-3f56-4819-9d47-4de2a1189d47",jsonnetsType:"place",z:12,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p3"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:756,y:372},angle:0,tokens:0,id:"4528501a-f423-4bef-acf6-1975ee7766cb",jsonnetsType:"place",z:13,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p2"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:1068,y:540},angle:0,tokens:0,id:"499c4196-fac1-4280-b317-33dc927a3fed",jsonnetsType:"place",z:14,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p4"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:1068,y:732},angle:0,tokens:0,id:"52641fb4-fcee-41be-b8f5-d8af3da3ac8d",jsonnetsType:"place",z:15,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p7"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:756,y:540},angle:0,tokens:0,id:"73573b72-5df0-4564-81e8-9d4d20d92712",jsonnetsType:"place",z:16,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p5"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:456,y:540},angle:0,tokens:0,id:"8ca9f3ce-ee01-4ced-b29e-952277fbf3d7",jsonnetsType:"place",z:17,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p6"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:444,y:732},angle:0,tokens:0,id:"f5ae0fa5-acab-4e05-83fc-751379fef9e8",jsonnetsType:"place",z:18,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p8"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:132,y:624},angle:0,tokens:0,id:"772856ca-b248-42d4-870e-88cb29d13c78",jsonnetsType:"place",z:19,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p9"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:660,y:36},angle:0,tokens:1,id:"5e4737f9-e14f-4414-b556-fa97ac5b33ce",jsonnetsType:"place",z:20,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Arbeitsleistung Produktion"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:672,y:456},angle:0,tokens:1,id:"3cfcc9c0-4e99-4add-bb16-6fa0bbf42978",jsonnetsType:"place",z:21,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Arbeitsleistung Bro"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:1392,y:564},angle:0,tokens:1,id:"7cc54764-c50e-45c9-80c8-0fad982c6dcb",jsonnetsType:"place",z:22,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Arbeitsleistung Bro"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:756,y:828},angle:0,tokens:1,id:"ed65430f-6db7-47ed-a33a-00f3b8e1cfb5",jsonnetsType:"place",z:23,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Arbeitsleistung Transport"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:528,y:636},angle:0,tokens:1,id:"9f8ae18b-e462-4844-8e5a-2ddd0ab5e53c",jsonnetsType:"place",z:24,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Arbeitsleistung Bro"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:204,y:504},angle:0,tokens:1,id:"bb9cfc45-953c-4e0d-930d-e2a34c833935",jsonnetsType:"place",z:25,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Arbeitsleistung Bro"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:852,y:456},angle:0,tokens:1,id:"6acb76b6-3e03-4056-b32d-1c885da956f5",jsonnetsType:"place",z:26,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Arbeitsleistung Bro"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:240,y:144},angle:0,tokens:1,id:"4d88a40c-8b6f-42cc-beb7-55577fb473f7",jsonnetsType:"place",z:27,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Arbeitsleistung Bro"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:924,y:636},angle:0,tokens:1,id:"fe15d7b8-6252-4a85-9850-e70bdd5f64a3",jsonnetsType:"place",z:28,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Arbeitsleistung Bro"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:408,y:144},angle:0,tokens:1,id:"ee5397c5-cab3-4d74-a7d9-627c598b19a2",jsonnetsType:"place",z:29,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"IT-Infrastruktur"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:852,y:36},angle:0,tokens:1,id:"6d53ef11-aa46-4f3c-81cf-45da906a4129",jsonnetsType:"place",z:30,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"IT-Infrastruktur"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:516,y:456},angle:0,tokens:1,id:"341c3fe1-9570-4c00-b77d-9f14c3c51798",jsonnetsType:"place",z:31,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"IT-Infrastruktur"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:1392,y:708},angle:0,tokens:1,id:"c4c90bd8-a10e-44ab-a081-014eab7a2d28",jsonnetsType:"place",z:32,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"IT-Infrastruktur"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:696,y:636},angle:0,tokens:1,id:"3e798139-85d4-4d0f-8a10-5f579075d635",jsonnetsType:"place",z:33,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"IT-Infrastruktur"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:372,y:504},angle:0,tokens:1,id:"157c51c3-a1cc-4b46-981c-8e37bc319c9a",jsonnetsType:"place",z:34,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"IT-Infrastruktur"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:1020,y:456},angle:0,tokens:1,id:"cf45d7d2-9bf2-46ef-886f-221615aa8251",jsonnetsType:"place",z:35,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Artikel Scope 1"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:1152,y:456},angle:0,tokens:1,id:"141f370b-67ed-4900-a3fe-8168fc8e716f",jsonnetsType:"place",z:36,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Artikel Scope 3"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"standard.Link",source:{id:"4876d2d5-014f-4206-af09-170d900b0acc",selector:".root"},target:{id:"8e754bc9-f9d1-4324-9838-6ea63048046f",selector:".root"},id:"dbf968cc-fcf7-440c-bf35-471a230c7584",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:37,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"8e754bc9-f9d1-4324-9838-6ea63048046f",selector:".root"},target:{id:"1d43ff03-0740-4ce8-9fca-d6c459704a18",selector:".root"},id:"d920242a-64a3-4bd7-bfd0-01ec77be49ac",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:38,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"1d43ff03-0740-4ce8-9fca-d6c459704a18",selector:".root"},target:{id:"ce46dfb7-5437-4e7a-ae61-58bfe7e5ff5c",selector:".root"},id:"ebe47cb1-5fad-4656-9064-13164107019f",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:39,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"ce46dfb7-5437-4e7a-ae61-58bfe7e5ff5c",selector:".root"},target:{id:"58e67779-3f56-4819-9d47-4de2a1189d47",selector:".root"},id:"108d81cb-cbc8-490e-85e9-424f6f1b55f8",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:40,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"58e67779-3f56-4819-9d47-4de2a1189d47",selector:".root"},target:{id:"5c3f975e-950e-48bd-b168-bdd589dbd61f",selector:".root"},id:"bda372bd-0083-40f5-b4b2-bd708d2e4402",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:41,vertices:[{x:1248,y:289}],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"5c3f975e-950e-48bd-b168-bdd589dbd61f",selector:".root"},target:{id:"499c4196-fac1-4280-b317-33dc927a3fed",selector:".root"},id:"d342db48-dab4-4660-8847-97c73f142b83",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:42,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"499c4196-fac1-4280-b317-33dc927a3fed",selector:".root"},target:{id:"ff42c022-b73e-4fa2-8b9f-fbe84e514647",selector:".root"},id:"cfce7d5a-db54-4b2d-997a-d2ad04fa4bf0",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:43,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"ff42c022-b73e-4fa2-8b9f-fbe84e514647",selector:".root"},target:{id:"73573b72-5df0-4564-81e8-9d4d20d92712",selector:".root"},id:"16cd8671-29d6-439b-bda2-c804665b8671",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:44,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"73573b72-5df0-4564-81e8-9d4d20d92712",selector:".root"},target:{id:"1a524b1b-f347-4f08-9f43-9a2d0aac6a8e",selector:".root"},id:"e60292b6-5900-4d31-bd65-f85de6109a3f",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:45,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"1a524b1b-f347-4f08-9f43-9a2d0aac6a8e",selector:".root"},target:{id:"8ca9f3ce-ee01-4ced-b29e-952277fbf3d7",selector:".root"},id:"8fda0a53-608d-4565-90a1-d427dccabeeb",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:46,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"8ca9f3ce-ee01-4ced-b29e-952277fbf3d7",selector:".root"},target:{id:"1a064205-ba07-47e1-8c4f-8e95f398a484",selector:".root"},id:"14655dd5-456c-40aa-b0a2-9113005c7906",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:47,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"1a064205-ba07-47e1-8c4f-8e95f398a484",selector:".root"},target:{id:"772856ca-b248-42d4-870e-88cb29d13c78",selector:".root"},id:"b45a639f-4fbf-47bf-8ded-10f66ec6f792",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:48,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"5c3f975e-950e-48bd-b168-bdd589dbd61f",selector:".root"},target:{id:"52641fb4-fcee-41be-b8f5-d8af3da3ac8d",selector:".root"},id:"1e011651-7c7a-430e-a52e-2fc0ffe514db",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:49,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"52641fb4-fcee-41be-b8f5-d8af3da3ac8d",selector:".root"},target:{id:"4d4cc127-90e2-4478-abe8-42f258562e43",selector:".root"},id:"42cc1c6c-5cac-4653-a8aa-8453320cdea8",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:50,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"4d4cc127-90e2-4478-abe8-42f258562e43",selector:".root"},target:{id:"f5ae0fa5-acab-4e05-83fc-751379fef9e8",selector:".root"},id:"faa16a48-a017-4fe2-a4e4-2ccc6db0cbb9",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:51,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"f5ae0fa5-acab-4e05-83fc-751379fef9e8",selector:".root"},target:{id:"1a064205-ba07-47e1-8c4f-8e95f398a484",selector:".root"},id:"ac8f1222-aff3-4f3d-ba1d-2a8ea8fc0c69",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:52,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"1d43ff03-0740-4ce8-9fca-d6c459704a18",selector:".root"},target:{id:"f2b5e259-e916-41bd-9eda-ed593f5db96b",selector:".root"},id:"3525627a-9d60-4727-8ded-65f859997c45",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:53,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"f2b5e259-e916-41bd-9eda-ed593f5db96b",selector:".root"},target:{id:"4528501a-f423-4bef-acf6-1975ee7766cb",selector:".root"},id:"f0ba74cb-a5c6-4817-b97e-224ffadfbc9f",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:54,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"4528501a-f423-4bef-acf6-1975ee7766cb",selector:".root"},target:{id:"26b1c55e-a751-4c41-a00d-dbf268342c50",selector:".root"},id:"53a48601-e158-417e-bc80-d73899a90156",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:55,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"26b1c55e-a751-4c41-a00d-dbf268342c50",selector:".root"},target:{id:"58e67779-3f56-4819-9d47-4de2a1189d47",selector:".root"},id:"c34917fe-888d-4404-86f8-18413c4281fe",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:56,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"5e4737f9-e14f-4414-b556-fa97ac5b33ce",selector:".root"},target:{id:"ce46dfb7-5437-4e7a-ae61-58bfe7e5ff5c",selector:".root"},id:"b40f5521-d3fc-4c18-a252-81f16608977e",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:57,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"9f8ae18b-e462-4844-8e5a-2ddd0ab5e53c",selector:".root"},target:{id:"1a524b1b-f347-4f08-9f43-9a2d0aac6a8e",selector:".root"},id:"5c42e3fe-28c9-4362-a784-93ad0dc2edd0",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:58,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"7cc54764-c50e-45c9-80c8-0fad982c6dcb",selector:".root"},target:{id:"5c3f975e-950e-48bd-b168-bdd589dbd61f",selector:".root"},id:"b566ccf0-326a-4e0f-9063-97a4175a368d",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:59,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"ed65430f-6db7-47ed-a33a-00f3b8e1cfb5",selector:".root"},target:{id:"4d4cc127-90e2-4478-abe8-42f258562e43",selector:".root"},id:"bf85e032-2d2a-4e9c-a139-edcf76c4125b",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:60,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"bb9cfc45-953c-4e0d-930d-e2a34c833935",selector:".root"},target:{id:"1a064205-ba07-47e1-8c4f-8e95f398a484",selector:".root"},id:"a92776c2-be2b-4153-8b41-f01c2662e464",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:61,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"6acb76b6-3e03-4056-b32d-1c885da956f5",selector:".root"},target:{id:"26b1c55e-a751-4c41-a00d-dbf268342c50",selector:".root"},id:"23533fac-384e-4dac-ae7a-babe5f892895",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:62,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"3cfcc9c0-4e99-4add-bb16-6fa0bbf42978",selector:".root"},target:{id:"f2b5e259-e916-41bd-9eda-ed593f5db96b",selector:".root"},id:"b9dc6a8b-6474-4f4d-bdec-02779707ca56",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:63,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"4d88a40c-8b6f-42cc-beb7-55577fb473f7",selector:".root"},target:{id:"8e754bc9-f9d1-4324-9838-6ea63048046f",selector:".root"},id:"09e9aa54-7118-46b5-80d5-482edf655ae7",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:64,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"fe15d7b8-6252-4a85-9850-e70bdd5f64a3",selector:".root"},target:{id:"ff42c022-b73e-4fa2-8b9f-fbe84e514647",selector:".root"},id:"79fa0305-9adf-43ec-a002-5eafcca63155",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:65,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"ee5397c5-cab3-4d74-a7d9-627c598b19a2",selector:".root"},target:{id:"8e754bc9-f9d1-4324-9838-6ea63048046f",selector:".root"},id:"38702339-fa77-4c72-9cf7-bcbfd0c7cea0",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:66,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"6d53ef11-aa46-4f3c-81cf-45da906a4129",selector:".root"},target:{id:"ce46dfb7-5437-4e7a-ae61-58bfe7e5ff5c",selector:".root"},id:"83167ddc-04b4-41bd-94fa-1508712c9a70",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:67,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"341c3fe1-9570-4c00-b77d-9f14c3c51798",selector:".root"},target:{id:"f2b5e259-e916-41bd-9eda-ed593f5db96b",selector:".root"},id:"cc9f4a0e-17a1-40a5-b069-3f3208f8c132",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:68,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"c4c90bd8-a10e-44ab-a081-014eab7a2d28",selector:".root"},target:{id:"5c3f975e-950e-48bd-b168-bdd589dbd61f",selector:".root"},id:"cf35c352-2d2f-4796-addf-381e5f58c148",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:69,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"3e798139-85d4-4d0f-8a10-5f579075d635",selector:".root"},target:{id:"1a524b1b-f347-4f08-9f43-9a2d0aac6a8e",selector:".root"},id:"d3e3e1a7-15af-4161-bff5-36b6cd43443e",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:70,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"157c51c3-a1cc-4b46-981c-8e37bc319c9a",selector:".root"},target:{id:"1a064205-ba07-47e1-8c4f-8e95f398a484",selector:".root"},id:"1d179874-112f-4bf7-97d1-998a541c0365",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:71,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"cf45d7d2-9bf2-46ef-886f-221615aa8251",selector:".root"},target:{id:"26b1c55e-a751-4c41-a00d-dbf268342c50",selector:".root"},id:"d98ca297-164c-44e6-bf5c-c39aac3993d5",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:72,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"141f370b-67ed-4900-a3fe-8168fc8e716f",selector:".root"},target:{id:"26b1c55e-a751-4c41-a00d-dbf268342c50",selector:".root"},id:"344573a0-38b0-4f9f-a666-a9591687e610",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:73,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}}]}}},{name:"Nachhaltigkeitsanalyse-THG",net:{typeData:{placeTypes:{"4876d2d5-014f-4206-af09-170d900b0acc":"instances-sustainability","1d43ff03-0740-4ce8-9fca-d6c459704a18":"instances-sustainability","58e67779-3f56-4819-9d47-4de2a1189d47":"instances-sustainability","4528501a-f423-4bef-acf6-1975ee7766cb":"instances-sustainability","499c4196-fac1-4280-b317-33dc927a3fed":"instances-sustainability","52641fb4-fcee-41be-b8f5-d8af3da3ac8d":"instances-sustainability","73573b72-5df0-4564-81e8-9d4d20d92712":"instances-sustainability","8ca9f3ce-ee02-4ced-b29e-952277fbf3d7":"simple","f5ae0fa5-acab-4e05-83fc-751379fef9e8":"instances-sustainability","772856ca-b248-42d4-870e-88cb29d13c78":"instances-sustainability","8ca9f3ce-ee01-4ced-b29e-952277fbf3d7":"instances-sustainability","22360929-87ca-4b40-8ff1-b5fc9bce77f0":"inventory","5e4737f9-e14f-4414-b556-fa97ac5b33ce":"inventory","3cfcc9c0-4e99-4add-bb16-6fa0bbf42978":"inventory","d2367fcf-09d5-47a1-8a22-1da880f7ebee":"emissions-scope2","7cc54764-c50e-45c9-80c8-0fad982c6dcb":"inventory","ed65430f-6db7-47ed-a33a-00f3b8e1cfb5":"inventory","9f8ae18b-e462-4844-8e5a-2ddd0ab5e53c":"inventory","124b9b41-d677-4b17-9953-1e708f341943":"inventory","bb9cfc45-953c-4e0d-930d-e2a34c833935":"inventory","6acb76b6-3e03-4056-b32d-1c885da956f5":"inventory","b2841683-d07a-4480-a162-99bf0e73315a":"simple","ca2c2c3c-f44e-40ce-ac68-e8c1e15fd949":"simple","34129aac-ce86-40ff-8abe-516d0d8820d6":"simple","4d88a40c-8b6f-42cc-beb7-55577fb473f7":"inventory","4e0f81dc-ebdd-493c-a423-3e041143701e":"inventory","766c9a50-7cd8-445c-98f7-5d83344b77ea":"inventory","fe15d7b8-6252-4a85-9850-e70bdd5f64a3":"inventory","c326acc4-2df8-4ca5-aa96-3f073acac234":"inventory","fbbdf700-160d-43f6-9880-4a9d01cd2106":"inventory","01ae64d9-13f5-45c7-892a-80d8a656c321":"inventory","4f409ac9-20e1-48d3-a2cd-9e1b1b363b21":"inventory"},transitionTypes:{"8e754bc9-f9d1-4324-9838-6ea63048046f":"instances-ghg","5c3f975e-950e-48bd-b168-bdd589dbd61f":"custom","ce46dfb7-5437-4e7a-ae61-58bfe7e5ff5c":"instances-ghg","f2b5e259-e916-41bd-9eda-ed593f5db96b":"instances-ghg","26b1c55e-a751-4c41-a00d-dbf268342c50":"instances-ghg","1a064205-ba07-47e1-8c4f-8e95f398a484":"custom","1a524b1b-f347-4f08-9f43-9a2d0aac6a8e":"instances-ghg","ff42c022-b73e-4fa2-8b9f-fbe84e514647":"instances-ghg","4d4cc127-90e2-4478-abe8-42f258562e43":"instances-ghg"}},netData:{places:[{id:"4876d2d5-014f-4206-af09-170d900b0acc",name:"p0",marking:[{instanceID:"i0",impact:0},{instanceID:"i1",impact:0}],schema:{title:"Prozessinstanzen (Nachhaltigkeitsanalyse)",description:"Eine Stelle, die Prozessinstanzmarken mit einem Indikatorwert fr Nachhaltigkeitsauswirkungen speichert.",type:"array",items:{type:"object",properties:{instanceID:{type:"string"},impact:{type:"number"}},required:["instanceID","impact"]},$id:"4876d2d5-014f-4206-af09-170d900b0acc"}},{id:"1d43ff03-0740-4ce8-9fca-d6c459704a18",name:"p1",marking:[],schema:{title:"Prozessinstanzen (Nachhaltigkeitsanalyse)",description:"Eine Stelle, die Prozessinstanzmarken mit einem Indikatorwert fr Nachhaltigkeitsauswirkungen speichert.",type:"array",items:{type:"object",properties:{instanceID:{type:"string"},impact:{type:"number"}},required:["instanceID","impact"]},$id:"1d43ff03-0740-4ce8-9fca-d6c459704a18"}},{id:"58e67779-3f56-4819-9d47-4de2a1189d47",name:"p3",marking:[],schema:{title:"Prozessinstanzen (Nachhaltigkeitsanalyse)",description:"Eine Stelle, die Prozessinstanzmarken mit einem Indikatorwert fr Nachhaltigkeitsauswirkungen speichert.",type:"array",items:{type:"object",properties:{instanceID:{type:"string"},impact:{type:"number"}},required:["instanceID","impact"]},$id:"58e67779-3f56-4819-9d47-4de2a1189d47"}},{id:"4528501a-f423-4bef-acf6-1975ee7766cb",name:"p2",marking:[],schema:{title:"Prozessinstanzen (Nachhaltigkeitsanalyse)",description:"Eine Stelle, die Prozessinstanzmarken mit einem Indikatorwert fr Nachhaltigkeitsauswirkungen speichert.",type:"array",items:{type:"object",properties:{instanceID:{type:"string"},impact:{type:"number"}},required:["instanceID","impact"]},$id:"4528501a-f423-4bef-acf6-1975ee7766cb"}},{id:"499c4196-fac1-4280-b317-33dc927a3fed",name:"p4",marking:[],schema:{title:"Prozessinstanzen (Nachhaltigkeitsanalyse)",description:"Eine Stelle, die Prozessinstanzmarken mit einem Indikatorwert fr Nachhaltigkeitsauswirkungen speichert.",type:"array",items:{type:"object",properties:{instanceID:{type:"string"},impact:{type:"number"}},required:["instanceID","impact"]},$id:"499c4196-fac1-4280-b317-33dc927a3fed"}},{id:"52641fb4-fcee-41be-b8f5-d8af3da3ac8d",name:"p7",marking:[],schema:{title:"Prozessinstanzen (Nachhaltigkeitsanalyse)",description:"Eine Stelle, die Prozessinstanzmarken mit einem Indikatorwert fr Nachhaltigkeitsauswirkungen speichert.",type:"array",items:{type:"object",properties:{instanceID:{type:"string"},impact:{type:"number"}},required:["instanceID","impact"]},$id:"52641fb4-fcee-41be-b8f5-d8af3da3ac8d"}},{id:"73573b72-5df0-4564-81e8-9d4d20d92712",name:"p5",marking:[],schema:{title:"Prozessinstanzen (Nachhaltigkeitsanalyse)",description:"Eine Stelle, die Prozessinstanzmarken mit einem Indikatorwert fr Nachhaltigkeitsauswirkungen speichert.",type:"array",items:{type:"object",properties:{instanceID:{type:"string"},impact:{type:"number"}},required:["instanceID","impact"]},$id:"73573b72-5df0-4564-81e8-9d4d20d92712"}},{id:"8ca9f3ce-ee01-4ced-b29e-952277fbf3d7",name:"p6",marking:[],schema:{title:"Prozessinstanzen (Nachhaltigkeitsanalyse)",description:"Eine Stelle, die Prozessinstanzmarken mit einem Indikatorwert fr Nachhaltigkeitsauswirkungen speichert.",type:"array",items:{type:"object",properties:{instanceID:{type:"string"},impact:{type:"number"}},required:["instanceID","impact"]},$id:"8ca9f3ce-ee01-4ced-b29e-952277fbf3d7"}},{id:"f5ae0fa5-acab-4e05-83fc-751379fef9e8",name:"p8",marking:[],schema:{title:"Prozessinstanzen (Nachhaltigkeitsanalyse)",description:"Eine Stelle, die Prozessinstanzmarken mit einem Indikatorwert fr Nachhaltigkeitsauswirkungen speichert.",type:"array",items:{type:"object",properties:{instanceID:{type:"string"},impact:{type:"number"}},required:["instanceID","impact"]},$id:"f5ae0fa5-acab-4e05-83fc-751379fef9e8"}},{id:"772856ca-b248-42d4-870e-88cb29d13c78",name:"p9",marking:[],schema:{title:"Prozessinstanzen (Nachhaltigkeitsanalyse)",description:"Eine Stelle, die Prozessinstanzmarken mit einem Indikatorwert fr Nachhaltigkeitsauswirkungen speichert.",type:"array",items:{type:"object",properties:{instanceID:{type:"string"},impact:{type:"number"}},required:["instanceID","impact"]},$id:"772856ca-b248-42d4-870e-88cb29d13c78"}},{id:"22360929-87ca-4b40-8ff1-b5fc9bce77f0",name:"Energie IT",marking:[{amount:556e-6,impactFactor:.38,allocationFactor:1,scope:2}],schema:{title:"Nachhaltigkeitsauswirkungen",description:"Eine Stelle, Angaben zu Nachhaltigkeitsauswirkungen einer Aktivitt speichert.",type:"array",items:{type:"object",properties:{amount:{type:"number"},impactFactor:{type:"number"},allocationFactor:{type:"number"},scope:{type:"number",enum:[1,2,3]}},required:["amount","impactFactor","allocationFactor","scope"]},$id:"22360929-87ca-4b40-8ff1-b5fc9bce77f0"}},{id:"5e4737f9-e14f-4414-b556-fa97ac5b33ce",name:"Energie Produktion",marking:[{amount:.24,impactFactor:.38,allocationFactor:1,scope:2}],schema:{title:"Nachhaltigkeitsauswirkungen",description:"Eine Stelle, Angaben zu Nachhaltigkeitsauswirkungen einer Aktivitt speichert.",type:"array",items:{type:"object",properties:{amount:{type:"number"},impactFactor:{type:"number"},allocationFactor:{type:"number"},scope:{type:"number",enum:[1,2,3]}},required:["amount","impactFactor","allocationFactor","scope"]},$id:"5e4737f9-e14f-4414-b556-fa97ac5b33ce"}},{id:"3cfcc9c0-4e99-4add-bb16-6fa0bbf42978",name:"Energie IT",marking:[{amount:556e-6,impactFactor:.38,allocationFactor:1,scope:2}],schema:{title:"Nachhaltigkeitsauswirkungen",description:"Eine Stelle, Angaben zu Nachhaltigkeitsauswirkungen einer Aktivitt speichert.",type:"array",items:{type:"object",properties:{amount:{type:"number"},impactFactor:{type:"number"},allocationFactor:{type:"number"},scope:{type:"number",enum:[1,2,3]}},required:["amount","impactFactor","allocationFactor","scope"]},$id:"3cfcc9c0-4e99-4add-bb16-6fa0bbf42978"}},{id:"7cc54764-c50e-45c9-80c8-0fad982c6dcb",name:"Energie IT",marking:[{amount:556e-6,impactFactor:.38,allocationFactor:1,scope:2}],schema:{title:"Nachhaltigkeitsauswirkungen",description:"Eine Stelle, Angaben zu Nachhaltigkeitsauswirkungen einer Aktivitt speichert.",type:"array",items:{type:"object",properties:{amount:{type:"number"},impactFactor:{type:"number"},allocationFactor:{type:"number"},scope:{type:"number",enum:[1,2,3]}},required:["amount","impactFactor","allocationFactor","scope"]},$id:"7cc54764-c50e-45c9-80c8-0fad982c6dcb"}},{id:"ed65430f-6db7-47ed-a33a-00f3b8e1cfb5",name:"Transportleistung",marking:[{amount:.03,impactFactor:.0532,allocationFactor:1,scope:3}],schema:{title:"Nachhaltigkeitsauswirkungen",description:"Eine Stelle, Angaben zu Nachhaltigkeitsauswirkungen einer Aktivitt speichert.",type:"array",items:{type:"object",properties:{amount:{type:"number"},impactFactor:{type:"number"},allocationFactor:{type:"number"},scope:{type:"number",enum:[1,2,3]}},required:["amount","impactFactor","allocationFactor","scope"]},$id:"ed65430f-6db7-47ed-a33a-00f3b8e1cfb5"}},{id:"9f8ae18b-e462-4844-8e5a-2ddd0ab5e53c",name:"Energie IT",marking:[{amount:556e-6,impactFactor:.38,allocationFactor:1,scope:2}],schema:{title:"Nachhaltigkeitsauswirkungen",description:"Eine Stelle, Angaben zu Nachhaltigkeitsauswirkungen einer Aktivitt speichert.",type:"array",items:{type:"object",properties:{amount:{type:"number"},impactFactor:{type:"number"},allocationFactor:{type:"number"},scope:{type:"number",enum:[1,2,3]}},required:["amount","impactFactor","allocationFactor","scope"]},$id:"9f8ae18b-e462-4844-8e5a-2ddd0ab5e53c"}},{id:"124b9b41-d677-4b17-9953-1e708f341943",name:"Energie IT",marking:[{amount:556e-6,impactFactor:.38,allocationFactor:1,scope:2}],schema:{title:"Nachhaltigkeitsauswirkungen",description:"Eine Stelle, Angaben zu Nachhaltigkeitsauswirkungen einer Aktivitt speichert.",type:"array",items:{type:"object",properties:{amount:{type:"number"},impactFactor:{type:"number"},allocationFactor:{type:"number"},scope:{type:"number",enum:[1,2,3]}},required:["amount","impactFactor","allocationFactor","scope"]},$id:"124b9b41-d677-4b17-9953-1e708f341943"}},{id:"bb9cfc45-953c-4e0d-930d-e2a34c833935",name:"Energie IT",marking:[{amount:556e-6,impactFactor:.38,allocationFactor:1,scope:2}],schema:{title:"Nachhaltigkeitsauswirkungen",description:"Eine Stelle, Angaben zu Nachhaltigkeitsauswirkungen einer Aktivitt speichert.",type:"array",items:{type:"object",properties:{amount:{type:"number"},impactFactor:{type:"number"},allocationFactor:{type:"number"},scope:{type:"number",enum:[1,2,3]}},required:["amount","impactFactor","allocationFactor","scope"]},$id:"bb9cfc45-953c-4e0d-930d-e2a34c833935"}},{id:"6acb76b6-3e03-4056-b32d-1c885da956f5",name:"Lager Scope 2",marking:[{amount:1,impactFactor:.0912,allocationFactor:1,scope:2}],schema:{title:"Nachhaltigkeitsauswirkungen",description:"Eine Stelle, Angaben zu Nachhaltigkeitsauswirkungen einer Aktivitt speichert.",type:"array",items:{type:"object",properties:{amount:{type:"number"},impactFactor:{type:"number"},allocationFactor:{type:"number"},scope:{type:"number",enum:[1,2,3]}},required:["amount","impactFactor","allocationFactor","scope"]},$id:"6acb76b6-3e03-4056-b32d-1c885da956f5"}},{id:"4d88a40c-8b6f-42cc-beb7-55577fb473f7",name:"IT-Infrastruktur",marking:[{amount:1,impactFactor:800.3,allocationFactor:12e-8,scope:3}],schema:{title:"Nachhaltigkeitsauswirkungen",description:"Eine Stelle, Angaben zu Nachhaltigkeitsauswirkungen einer Aktivitt speichert.",type:"array",items:{type:"object",properties:{amount:{type:"number"},impactFactor:{type:"number"},allocationFactor:{type:"number"},scope:{type:"number",enum:[1,2,3]}},required:["amount","impactFactor","allocationFactor","scope"]},$id:"4d88a40c-8b6f-42cc-beb7-55577fb473f7"}},{id:"4e0f81dc-ebdd-493c-a423-3e041143701e",name:"IT-Infrastruktur",marking:[{amount:1,impactFactor:800.3,allocationFactor:12e-8,scope:3}],schema:{title:"Nachhaltigkeitsauswirkungen",description:"Eine Stelle, Angaben zu Nachhaltigkeitsauswirkungen einer Aktivitt speichert.",type:"array",items:{type:"object",properties:{amount:{type:"number"},impactFactor:{type:"number"},allocationFactor:{type:"number"},scope:{type:"number",enum:[1,2,3]}},required:["amount","impactFactor","allocationFactor","scope"]},$id:"4e0f81dc-ebdd-493c-a423-3e041143701e"}},{id:"766c9a50-7cd8-445c-98f7-5d83344b77ea",name:"IT-Infrastruktur",marking:[{amount:1,impactFactor:800.3,allocationFactor:12e-8,scope:3}],schema:{title:"Nachhaltigkeitsauswirkungen",description:"Eine Stelle, Angaben zu Nachhaltigkeitsauswirkungen einer Aktivitt speichert.",type:"array",items:{type:"object",properties:{amount:{type:"number"},impactFactor:{type:"number"},allocationFactor:{type:"number"},scope:{type:"number",enum:[1,2,3]}},required:["amount","impactFactor","allocationFactor","scope"]},$id:"766c9a50-7cd8-445c-98f7-5d83344b77ea"}},{id:"fe15d7b8-6252-4a85-9850-e70bdd5f64a3",name:"IT-Infrastruktur",marking:[{amount:1,impactFactor:800.3,allocationFactor:12e-8,scope:3}],schema:{title:"Nachhaltigkeitsauswirkungen",description:"Eine Stelle, Angaben zu Nachhaltigkeitsauswirkungen einer Aktivitt speichert.",type:"array",items:{type:"object",properties:{amount:{type:"number"},impactFactor:{type:"number"},allocationFactor:{type:"number"},scope:{type:"number",enum:[1,2,3]}},required:["amount","impactFactor","allocationFactor","scope"]},$id:"fe15d7b8-6252-4a85-9850-e70bdd5f64a3"}},{id:"c326acc4-2df8-4ca5-aa96-3f073acac234",name:"IT-Infrastruktur",marking:[{amount:1,impactFactor:800.3,allocationFactor:12e-8,scope:3}],schema:{title:"Nachhaltigkeitsauswirkungen",description:"Eine Stelle, Angaben zu Nachhaltigkeitsauswirkungen einer Aktivitt speichert.",type:"array",items:{type:"object",properties:{amount:{type:"number"},impactFactor:{type:"number"},allocationFactor:{type:"number"},scope:{type:"number",enum:[1,2,3]}},required:["amount","impactFactor","allocationFactor","scope"]},$id:"c326acc4-2df8-4ca5-aa96-3f073acac234"}},{id:"fbbdf700-160d-43f6-9880-4a9d01cd2106",name:"IT-Infrastruktur",marking:[{amount:1,impactFactor:800.3,allocationFactor:12e-8,scope:3}],schema:{title:"Nachhaltigkeitsauswirkungen",description:"Eine Stelle, Angaben zu Nachhaltigkeitsauswirkungen einer Aktivitt speichert.",type:"array",items:{type:"object",properties:{amount:{type:"number"},impactFactor:{type:"number"},allocationFactor:{type:"number"},scope:{type:"number",enum:[1,2,3]}},required:["amount","impactFactor","allocationFactor","scope"]},$id:"fbbdf700-160d-43f6-9880-4a9d01cd2106"}},{id:"01ae64d9-13f5-45c7-892a-80d8a656c321",name:"Material",marking:[{amount:.01,impactFactor:6.52,allocationFactor:1,scope:3}],schema:{title:"Nachhaltigkeitsauswirkungen",description:"Eine Stelle, Angaben zu Nachhaltigkeitsauswirkungen einer Aktivitt speichert.",type:"array",items:{type:"object",properties:{amount:{type:"number"},impactFactor:{type:"number"},allocationFactor:{type:"number"},scope:{type:"number",enum:[1,2,3]}},required:["amount","impactFactor","allocationFactor","scope"]},$id:"01ae64d9-13f5-45c7-892a-80d8a656c321"}},{id:"4f409ac9-20e1-48d3-a2cd-9e1b1b363b21",name:"Lager Scope 3",marking:[{amount:1,impactFactor:.0652,allocationFactor:1,scope:3}],schema:{title:"Nachhaltigkeitsauswirkungen",description:"Eine Stelle, Angaben zu Nachhaltigkeitsauswirkungen einer Aktivitt speichert.",type:"array",items:{type:"object",properties:{amount:{type:"number"},impactFactor:{type:"number"},allocationFactor:{type:"number"},scope:{type:"number",enum:[1,2,3]}},required:["amount","impactFactor","allocationFactor","scope"]},$id:"4f409ac9-20e1-48d3-a2cd-9e1b1b363b21"}}],transitions:[{id:"8e754bc9-f9d1-4324-9838-6ea63048046f",name:"t0: Verfgbarkeit prfen",preface:`// general function library (these are reimplementations of missing standard functions)
 
local sumRecursive(arr, n) =
  if (n <= 0) then 0
  else sumRecursive(arr, n-1) + arr[n-1];
local sum(arr) = sumRecursive(arr, std.length(arr));
 
// helper functions and variables
 
local isInstanceToken(token) = std.objectHas(token, 'instanceID');
local instanceToken = std.filter(isInstanceToken, input_values)[0];
 
local isScope(scope, token) = std.objectHas(token, 'scope') && token.scope == scope;
 
// calculation of impact value and contributions
 
local outputAllocation = 1;
local calculateContribution(token) = 
  if isInstanceToken(token) then token.impact 
  else token.amount * token.impactFactor * token.allocationFactor;
local contributions = std.map(calculateContribution, input_values);
local impact = sum(contributions) / outputAllocation;
 
// assemble data for visualisations and indicators
 
local applyOutputAllocation(contribution) = { name: contribution.name, value: contribution.value / outputAllocation};
local assembleScope1Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][0]['children'])
  else if isScope(1,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope1ContributionArrays = std.mapWithIndex(assembleScope1Contributions, input_values);
local scope1Contributions = std.flattenArrays(scope1ContributionArrays);
 
local assembleScope2Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][1]['children'])
  else if isScope(2,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope2ContributionArrays = std.mapWithIndex(assembleScope2Contributions, input_values);
local scope2Contributions = std.flattenArrays(scope2ContributionArrays);
 
local assembleScope3Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][2]['children'])
  else if isScope(3,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope3ContributionArrays = std.mapWithIndex(assembleScope3Contributions, input_values);
local scope3Contributions = std.flattenArrays(scope3ContributionArrays);
 
local visualisations =  [
  {
    'type': 'number',
    'unit': 'kg CO2e',
    'description': 'THG-Fussabdruck',
    'value': impact
  },
  {
    'type': 'sunburst',
    'unit': 'kg CO2e',
    'description': 'THG-Beitrge (Sunburst)',
    'value': [
    {
      'name': 'Scope 1',
      'children': scope1Contributions
    },
    {
      'name': 'Scope 2',
      'children': scope2Contributions
    },
    {
    'name': 'Scope 3',
    'children': scope3Contributions
    }]
  }
];`,guard:"true",customVariables:{},keyVarSnippets:{output_p1_key:"local output_p1_key = '-';"},fragmentVarSnippets:{output_p1_value:`local output_p1_value = instanceToken + {
'impact': impact,
'$visualisations': visualisations
};`}},{id:"5c3f975e-950e-48bd-b168-bdd589dbd61f",name:"t4: Versand vorbereiten",preface:`// general function library (these are reimplementations of missing standard functions)
 
local sumRecursive(arr, n) =
  if (n <= 0) then 0
  else sumRecursive(arr, n-1) + arr[n-1];
local sum(arr) = sumRecursive(arr, std.length(arr));
 
// helper functions and variables
 
local isInstanceToken(token) = std.objectHas(token, 'instanceID');
local instanceToken = std.filter(isInstanceToken, input_values)[0];
 
local isScope(scope, token) = std.objectHas(token, 'scope') && token.scope == scope;
 
// calculation of impact value and contributions
 
local outputAllocation = 2;
local calculateContribution(token) = 
  if isInstanceToken(token) then token.impact 
  else token.amount * token.impactFactor * token.allocationFactor;
local contributions = std.map(calculateContribution, input_values);
local impact = sum(contributions) / outputAllocation;
 
// assemble data for visualisations and indicators
 
local applyOutputAllocation(contribution) = { name: contribution.name, value: contribution.value / outputAllocation};
local assembleScope1Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][0]['children'])
  else if isScope(1,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope1ContributionArrays = std.mapWithIndex(assembleScope1Contributions, input_values);
local scope1Contributions = std.flattenArrays(scope1ContributionArrays);
 
local assembleScope2Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][1]['children'])
  else if isScope(2,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope2ContributionArrays = std.mapWithIndex(assembleScope2Contributions, input_values);
local scope2Contributions = std.flattenArrays(scope2ContributionArrays);
 
local assembleScope3Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][2]['children'])
  else if isScope(3,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope3ContributionArrays = std.mapWithIndex(assembleScope3Contributions, input_values);
local scope3Contributions = std.flattenArrays(scope3ContributionArrays);
 
local visualisations =  [
  {
    'type': 'number',
    'unit': 'kg CO2e',
    'description': 'THG-Fussabdruck',
    'value': impact
  },
  {
    'type': 'sunburst',
    'unit': 'kg CO2e',
    'description': 'THG-Beitrge (Sunburst)',
    'value': [
    {
      'name': 'Scope 1',
      'children': scope1Contributions
    },
    {
      'name': 'Scope 2',
      'children': scope2Contributions
    },
    {
    'name': 'Scope 3',
    'children': scope3Contributions
    }]
  }
];`,guard:"true",customVariables:{},keyVarSnippets:{output_p4_key:"local output_p4_key = '-';",output_p7_key:"local output_p7_key = '-';"},fragmentVarSnippets:{output_p4_value:`local output_p4_value = instanceToken + {
'impact': impact,
'$visualisations': visualisations
};`,output_p7_value:`local output_p7_value = instanceToken + {
'impact': impact,
'$visualisations': visualisations
};`}},{id:"ce46dfb7-5437-4e7a-ae61-58bfe7e5ff5c",name:"t1: Produktion durchfhren",preface:`// general function library (these are reimplementations of missing standard functions)
 
local sumRecursive(arr, n) =
  if (n <= 0) then 0
  else sumRecursive(arr, n-1) + arr[n-1];
local sum(arr) = sumRecursive(arr, std.length(arr));
 
// helper functions and variables
 
local isInstanceToken(token) = std.objectHas(token, 'instanceID');
local instanceToken = std.filter(isInstanceToken, input_values)[0];
 
local isScope(scope, token) = std.objectHas(token, 'scope') && token.scope == scope;
 
// calculation of impact value and contributions
 
local outputAllocation = 1;
local calculateContribution(token) = 
  if isInstanceToken(token) then token.impact 
  else token.amount * token.impactFactor * token.allocationFactor;
local contributions = std.map(calculateContribution, input_values);
local impact = sum(contributions) / outputAllocation;
 
// assemble data for visualisations and indicators
 
local applyOutputAllocation(contribution) = { name: contribution.name, value: contribution.value / outputAllocation};
local assembleScope1Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][0]['children'])
  else if isScope(1,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope1ContributionArrays = std.mapWithIndex(assembleScope1Contributions, input_values);
local scope1Contributions = std.flattenArrays(scope1ContributionArrays);
 
local assembleScope2Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][1]['children'])
  else if isScope(2,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope2ContributionArrays = std.mapWithIndex(assembleScope2Contributions, input_values);
local scope2Contributions = std.flattenArrays(scope2ContributionArrays);
 
local assembleScope3Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][2]['children'])
  else if isScope(3,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope3ContributionArrays = std.mapWithIndex(assembleScope3Contributions, input_values);
local scope3Contributions = std.flattenArrays(scope3ContributionArrays);
 
local visualisations =  [
  {
    'type': 'number',
    'unit': 'kg CO2e',
    'description': 'THG-Fussabdruck',
    'value': impact
  },
  {
    'type': 'sunburst',
    'unit': 'kg CO2e',
    'description': 'THG-Beitrge (Sunburst)',
    'value': [
    {
      'name': 'Scope 1',
      'children': scope1Contributions
    },
    {
      'name': 'Scope 2',
      'children': scope2Contributions
    },
    {
    'name': 'Scope 3',
    'children': scope3Contributions
    }]
  }
];`,guard:"true",customVariables:{},keyVarSnippets:{output_p3_key:"local output_p3_key = '-';"},fragmentVarSnippets:{output_p3_value:`local output_p3_value = instanceToken + {
'impact': impact,
'$visualisations': visualisations
};`}},{id:"f2b5e259-e916-41bd-9eda-ed593f5db96b",name:"t2: Artikel reservieren",preface:`// general function library (these are reimplementations of missing standard functions)
 
local sumRecursive(arr, n) =
  if (n <= 0) then 0
  else sumRecursive(arr, n-1) + arr[n-1];
local sum(arr) = sumRecursive(arr, std.length(arr));
 
// helper functions and variables
 
local isInstanceToken(token) = std.objectHas(token, 'instanceID');
local instanceToken = std.filter(isInstanceToken, input_values)[0];
 
local isScope(scope, token) = std.objectHas(token, 'scope') && token.scope == scope;
 
// calculation of impact value and contributions
 
local outputAllocation = 1;
local calculateContribution(token) = 
  if isInstanceToken(token) then token.impact 
  else token.amount * token.impactFactor * token.allocationFactor;
local contributions = std.map(calculateContribution, input_values);
local impact = sum(contributions) / outputAllocation;
 
// assemble data for visualisations and indicators
 
local applyOutputAllocation(contribution) = { name: contribution.name, value: contribution.value / outputAllocation};
local assembleScope1Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][0]['children'])
  else if isScope(1,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope1ContributionArrays = std.mapWithIndex(assembleScope1Contributions, input_values);
local scope1Contributions = std.flattenArrays(scope1ContributionArrays);
 
local assembleScope2Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][1]['children'])
  else if isScope(2,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope2ContributionArrays = std.mapWithIndex(assembleScope2Contributions, input_values);
local scope2Contributions = std.flattenArrays(scope2ContributionArrays);
 
local assembleScope3Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][2]['children'])
  else if isScope(3,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope3ContributionArrays = std.mapWithIndex(assembleScope3Contributions, input_values);
local scope3Contributions = std.flattenArrays(scope3ContributionArrays);
 
local visualisations =  [
  {
    'type': 'number',
    'unit': 'kg CO2e',
    'description': 'THG-Fussabdruck',
    'value': impact
  },
  {
    'type': 'sunburst',
    'unit': 'kg CO2e',
    'description': 'THG-Beitrge (Sunburst)',
    'value': [
    {
      'name': 'Scope 1',
      'children': scope1Contributions
    },
    {
      'name': 'Scope 2',
      'children': scope2Contributions
    },
    {
    'name': 'Scope 3',
    'children': scope3Contributions
    }]
  }
];`,guard:"true",customVariables:{},keyVarSnippets:{output_p2_key:"local output_p2_key = '-';"},fragmentVarSnippets:{output_p2_value:`local output_p2_value = instanceToken + {
'impact': impact,
'$visualisations': visualisations
};`}},{id:"26b1c55e-a751-4c41-a00d-dbf268342c50",name:"t3: Artikel aus Lager holen",preface:`// general function library (these are reimplementations of missing standard functions)
 
local sumRecursive(arr, n) =
  if (n <= 0) then 0
  else sumRecursive(arr, n-1) + arr[n-1];
local sum(arr) = sumRecursive(arr, std.length(arr));
 
// helper functions and variables
 
local isInstanceToken(token) = std.objectHas(token, 'instanceID');
local instanceToken = std.filter(isInstanceToken, input_values)[0];
 
local isScope(scope, token) = std.objectHas(token, 'scope') && token.scope == scope;
 
// calculation of impact value and contributions
 
local outputAllocation = 1;
local calculateContribution(token) = 
  if isInstanceToken(token) then token.impact 
  else token.amount * token.impactFactor * token.allocationFactor;
local contributions = std.map(calculateContribution, input_values);
local impact = sum(contributions) / outputAllocation;
 
// assemble data for visualisations and indicators
 
local applyOutputAllocation(contribution) = { name: contribution.name, value: contribution.value / outputAllocation};
local assembleScope1Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][0]['children'])
  else if isScope(1,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope1ContributionArrays = std.mapWithIndex(assembleScope1Contributions, input_values);
local scope1Contributions = std.flattenArrays(scope1ContributionArrays);
 
local assembleScope2Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][1]['children'])
  else if isScope(2,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope2ContributionArrays = std.mapWithIndex(assembleScope2Contributions, input_values);
local scope2Contributions = std.flattenArrays(scope2ContributionArrays);
 
local assembleScope3Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][2]['children'])
  else if isScope(3,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope3ContributionArrays = std.mapWithIndex(assembleScope3Contributions, input_values);
local scope3Contributions = std.flattenArrays(scope3ContributionArrays);
 
local visualisations =  [
  {
    'type': 'number',
    'unit': 'kg CO2e',
    'description': 'THG-Fussabdruck',
    'value': impact
  },
  {
    'type': 'sunburst',
    'unit': 'kg CO2e',
    'description': 'THG-Beitrge (Sunburst)',
    'value': [
    {
      'name': 'Scope 1',
      'children': scope1Contributions
    },
    {
      'name': 'Scope 2',
      'children': scope2Contributions
    },
    {
    'name': 'Scope 3',
    'children': scope3Contributions
    }]
  }
];`,guard:"true",customVariables:{},keyVarSnippets:{output_p3_key:"local output_p3_key = '-';"},fragmentVarSnippets:{output_p3_value:`local output_p3_value = instanceToken + {
'impact': impact,
'$visualisations': visualisations
};`}},{id:"1a064205-ba07-47e1-8c4f-8e95f398a484",name:"t8: Verkaufsprozess abschlieen",preface:`// general function library (these are reimplementations of missing standard functions)
 
local sumRecursive(arr, n) =
  if (n <= 0) then 0
  else sumRecursive(arr, n-1) + arr[n-1];
local sum(arr) = sumRecursive(arr, std.length(arr));
 
// helper functions and variables
 
local isInstanceToken(token) = std.objectHas(token, 'instanceID');
local instanceToken = std.filter(isInstanceToken, input_values)[0];
 
local isScope(scope, token) = std.objectHas(token, 'scope') && token.scope == scope;
 
// calculation of impact value and contributions
 
local outputAllocation = 1;
local calculateContribution(token) = 
  if isInstanceToken(token) then token.impact 
  else token.amount * token.impactFactor * token.allocationFactor;
local contributions = std.map(calculateContribution, input_values);
local impact = sum(contributions) / outputAllocation;
 
// assemble data for visualisations and indicators
 
local applyOutputAllocation(contribution) = { name: contribution.name, value: contribution.value / outputAllocation};
local assembleScope1Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][0]['children'])
  else if isScope(1,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope1ContributionArrays = std.mapWithIndex(assembleScope1Contributions, input_values);
local scope1Contributions = std.flattenArrays(scope1ContributionArrays);
 
local assembleScope2Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][1]['children'])
  else if isScope(2,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope2ContributionArrays = std.mapWithIndex(assembleScope2Contributions, input_values);
local scope2Contributions = std.flattenArrays(scope2ContributionArrays);
 
local assembleScope3Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][2]['children'])
  else if isScope(3,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope3ContributionArrays = std.mapWithIndex(assembleScope3Contributions, input_values);
local scope3Contributions = std.flattenArrays(scope3ContributionArrays);
 
local visualisations =  [
  {
    'type': 'number',
    'unit': 'kg CO2e',
    'description': 'THG-Fussabdruck',
    'value': impact
  },
  {
    'type': 'sunburst',
    'unit': 'kg CO2e',
    'description': 'THG-Beitrge (Sunburst)',
    'value': [
    {
      'name': 'Scope 1',
      'children': scope1Contributions
    },
    {
      'name': 'Scope 2',
      'children': scope2Contributions
    },
    {
    'name': 'Scope 3',
    'children': scope3Contributions
    }]
  }
];`,guard:"input_p6_value.instanceID == input_p8_value.instanceID",customVariables:{},keyVarSnippets:{output_p9_key:"local output_p9_key = '-';"},fragmentVarSnippets:{output_p9_value:`local output_p9_value = instanceToken + {
'impact': impact,
'$visualisations': visualisations
};`}},{id:"1a524b1b-f347-4f08-9f43-9a2d0aac6a8e",name:"t6: Rechnung verschicken",preface:`// general function library (these are reimplementations of missing standard functions)
 
local sumRecursive(arr, n) =
  if (n <= 0) then 0
  else sumRecursive(arr, n-1) + arr[n-1];
local sum(arr) = sumRecursive(arr, std.length(arr));
 
// helper functions and variables
 
local isInstanceToken(token) = std.objectHas(token, 'instanceID');
local instanceToken = std.filter(isInstanceToken, input_values)[0];
 
local isScope(scope, token) = std.objectHas(token, 'scope') && token.scope == scope;
 
// calculation of impact value and contributions
 
local outputAllocation = 1;
local calculateContribution(token) = 
  if isInstanceToken(token) then token.impact 
  else token.amount * token.impactFactor * token.allocationFactor;
local contributions = std.map(calculateContribution, input_values);
local impact = sum(contributions) / outputAllocation;
 
// assemble data for visualisations and indicators
 
local applyOutputAllocation(contribution) = { name: contribution.name, value: contribution.value / outputAllocation};
local assembleScope1Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][0]['children'])
  else if isScope(1,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope1ContributionArrays = std.mapWithIndex(assembleScope1Contributions, input_values);
local scope1Contributions = std.flattenArrays(scope1ContributionArrays);
 
local assembleScope2Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][1]['children'])
  else if isScope(2,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope2ContributionArrays = std.mapWithIndex(assembleScope2Contributions, input_values);
local scope2Contributions = std.flattenArrays(scope2ContributionArrays);
 
local assembleScope3Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][2]['children'])
  else if isScope(3,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope3ContributionArrays = std.mapWithIndex(assembleScope3Contributions, input_values);
local scope3Contributions = std.flattenArrays(scope3ContributionArrays);
 
local visualisations =  [
  {
    'type': 'number',
    'unit': 'kg CO2e',
    'description': 'THG-Fussabdruck',
    'value': impact
  },
  {
    'type': 'sunburst',
    'unit': 'kg CO2e',
    'description': 'THG-Beitrge (Sunburst)',
    'value': [
    {
      'name': 'Scope 1',
      'children': scope1Contributions
    },
    {
      'name': 'Scope 2',
      'children': scope2Contributions
    },
    {
    'name': 'Scope 3',
    'children': scope3Contributions
    }]
  }
];`,guard:"true",customVariables:{},keyVarSnippets:{output_p6_key:"local output_p6_key = '-';"},fragmentVarSnippets:{output_p6_value:`local output_p6_value = instanceToken + {
'impact': impact,
'$visualisations': visualisations
};`}},{id:"ff42c022-b73e-4fa2-8b9f-fbe84e514647",name:"t5: Rechnung stellen",preface:`// general function library (these are reimplementations of missing standard functions)
 
local sumRecursive(arr, n) =
  if (n <= 0) then 0
  else sumRecursive(arr, n-1) + arr[n-1];
local sum(arr) = sumRecursive(arr, std.length(arr));
 
// helper functions and variables
 
local isInstanceToken(token) = std.objectHas(token, 'instanceID');
local instanceToken = std.filter(isInstanceToken, input_values)[0];
 
local isScope(scope, token) = std.objectHas(token, 'scope') && token.scope == scope;
 
// calculation of impact value and contributions
 
local outputAllocation = 1;
local calculateContribution(token) = 
  if isInstanceToken(token) then token.impact 
  else token.amount * token.impactFactor * token.allocationFactor;
local contributions = std.map(calculateContribution, input_values);
local impact = sum(contributions) / outputAllocation;
 
// assemble data for visualisations and indicators
 
local applyOutputAllocation(contribution) = { name: contribution.name, value: contribution.value / outputAllocation};
local assembleScope1Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][0]['children'])
  else if isScope(1,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope1ContributionArrays = std.mapWithIndex(assembleScope1Contributions, input_values);
local scope1Contributions = std.flattenArrays(scope1ContributionArrays);
 
local assembleScope2Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][1]['children'])
  else if isScope(2,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope2ContributionArrays = std.mapWithIndex(assembleScope2Contributions, input_values);
local scope2Contributions = std.flattenArrays(scope2ContributionArrays);
 
local assembleScope3Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][2]['children'])
  else if isScope(3,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope3ContributionArrays = std.mapWithIndex(assembleScope3Contributions, input_values);
local scope3Contributions = std.flattenArrays(scope3ContributionArrays);
 
local visualisations =  [
  {
    'type': 'number',
    'unit': 'kg CO2e',
    'description': 'THG-Fussabdruck',
    'value': impact
  },
  {
    'type': 'sunburst',
    'unit': 'kg CO2e',
    'description': 'THG-Beitrge (Sunburst)',
    'value': [
    {
      'name': 'Scope 1',
      'children': scope1Contributions
    },
    {
      'name': 'Scope 2',
      'children': scope2Contributions
    },
    {
    'name': 'Scope 3',
    'children': scope3Contributions
    }]
  }
];`,guard:"true",customVariables:{},keyVarSnippets:{output_p5_key:"local output_p5_key = '-';"},fragmentVarSnippets:{output_p5_value:`local output_p5_value = instanceToken + {
'impact': impact,
'$visualisations': visualisations
};`}},{id:"4d4cc127-90e2-4478-abe8-42f258562e43",name:"t7: Transportieren",preface:`// general function library (these are reimplementations of missing standard functions)
 
local sumRecursive(arr, n) =
  if (n <= 0) then 0
  else sumRecursive(arr, n-1) + arr[n-1];
local sum(arr) = sumRecursive(arr, std.length(arr));
 
// helper functions and variables
 
local isInstanceToken(token) = std.objectHas(token, 'instanceID');
local instanceToken = std.filter(isInstanceToken, input_values)[0];
 
local isScope(scope, token) = std.objectHas(token, 'scope') && token.scope == scope;
 
// calculation of impact value and contributions
 
local outputAllocation = 1;
local calculateContribution(token) = 
  if isInstanceToken(token) then token.impact 
  else token.amount * token.impactFactor * token.allocationFactor;
local contributions = std.map(calculateContribution, input_values);
local impact = sum(contributions) / outputAllocation;
 
// assemble data for visualisations and indicators
 
local applyOutputAllocation(contribution) = { name: contribution.name, value: contribution.value / outputAllocation};
local assembleScope1Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][0]['children'])
  else if isScope(1,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope1ContributionArrays = std.mapWithIndex(assembleScope1Contributions, input_values);
local scope1Contributions = std.flattenArrays(scope1ContributionArrays);
 
local assembleScope2Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][1]['children'])
  else if isScope(2,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope2ContributionArrays = std.mapWithIndex(assembleScope2Contributions, input_values);
local scope2Contributions = std.flattenArrays(scope2ContributionArrays);
 
local assembleScope3Contributions(index, token) = 
  if std.objectHas(token, '$visualisations') then
    std.map(applyOutputAllocation,token['$visualisations'][1]['value'][2]['children'])
  else if isScope(3,token) then
    [{ name: input_names[index], value: contributions[index] / outputAllocation }]
  else [];
local scope3ContributionArrays = std.mapWithIndex(assembleScope3Contributions, input_values);
local scope3Contributions = std.flattenArrays(scope3ContributionArrays);
 
local visualisations =  [
  {
    'type': 'number',
    'unit': 'kg CO2e',
    'description': 'THG-Fussabdruck',
    'value': impact
  },
  {
    'type': 'sunburst',
    'unit': 'kg CO2e',
    'description': 'THG-Beitrge (Sunburst)',
    'value': [
    {
      'name': 'Scope 1',
      'children': scope1Contributions
    },
    {
      'name': 'Scope 2',
      'children': scope2Contributions
    },
    {
    'name': 'Scope 3',
    'children': scope3Contributions
    }]
  }
];`,guard:"true",customVariables:{},keyVarSnippets:{output_p8_key:"local output_p8_key = '-';"},fragmentVarSnippets:{output_p8_value:`local output_p8_value = instanceToken + {
'impact': impact,
'$visualisations': visualisations
};`}}],arcs:[{id:"dbf968cc-fcf7-440c-bf35-471a230c7584",filter:"$.*",fromId:"4876d2d5-014f-4206-af09-170d900b0acc",toId:"8e754bc9-f9d1-4324-9838-6ea63048046f"},{id:"d920242a-64a3-4bd7-bfd0-01ec77be49ac",filter:"$",fromId:"8e754bc9-f9d1-4324-9838-6ea63048046f",toId:"1d43ff03-0740-4ce8-9fca-d6c459704a18"},{id:"ebe47cb1-5fad-4656-9064-13164107019f",filter:"$.*",fromId:"1d43ff03-0740-4ce8-9fca-d6c459704a18",toId:"ce46dfb7-5437-4e7a-ae61-58bfe7e5ff5c"},{id:"108d81cb-cbc8-490e-85e9-424f6f1b55f8",filter:"$",fromId:"ce46dfb7-5437-4e7a-ae61-58bfe7e5ff5c",toId:"58e67779-3f56-4819-9d47-4de2a1189d47"},{id:"bda372bd-0083-40f5-b4b2-bd708d2e4402",filter:"$.*",fromId:"58e67779-3f56-4819-9d47-4de2a1189d47",toId:"5c3f975e-950e-48bd-b168-bdd589dbd61f"},{id:"d342db48-dab4-4660-8847-97c73f142b83",filter:"$",fromId:"5c3f975e-950e-48bd-b168-bdd589dbd61f",toId:"499c4196-fac1-4280-b317-33dc927a3fed"},{id:"cfce7d5a-db54-4b2d-997a-d2ad04fa4bf0",filter:"$.*",fromId:"499c4196-fac1-4280-b317-33dc927a3fed",toId:"ff42c022-b73e-4fa2-8b9f-fbe84e514647"},{id:"16cd8671-29d6-439b-bda2-c804665b8671",filter:"$",fromId:"ff42c022-b73e-4fa2-8b9f-fbe84e514647",toId:"73573b72-5df0-4564-81e8-9d4d20d92712"},{id:"e60292b6-5900-4d31-bd65-f85de6109a3f",filter:"$.*",fromId:"73573b72-5df0-4564-81e8-9d4d20d92712",toId:"1a524b1b-f347-4f08-9f43-9a2d0aac6a8e"},{id:"8fda0a53-608d-4565-90a1-d427dccabeeb",filter:"$",fromId:"1a524b1b-f347-4f08-9f43-9a2d0aac6a8e",toId:"8ca9f3ce-ee01-4ced-b29e-952277fbf3d7"},{id:"14655dd5-456c-40aa-b0a2-9113005c7906",filter:"$.*",fromId:"8ca9f3ce-ee01-4ced-b29e-952277fbf3d7",toId:"1a064205-ba07-47e1-8c4f-8e95f398a484"},{id:"b45a639f-4fbf-47bf-8ded-10f66ec6f792",filter:"$",fromId:"1a064205-ba07-47e1-8c4f-8e95f398a484",toId:"772856ca-b248-42d4-870e-88cb29d13c78"},{id:"1e011651-7c7a-430e-a52e-2fc0ffe514db",filter:"$",fromId:"5c3f975e-950e-48bd-b168-bdd589dbd61f",toId:"52641fb4-fcee-41be-b8f5-d8af3da3ac8d"},{id:"42cc1c6c-5cac-4653-a8aa-8453320cdea8",filter:"$.*",fromId:"52641fb4-fcee-41be-b8f5-d8af3da3ac8d",toId:"4d4cc127-90e2-4478-abe8-42f258562e43"},{id:"faa16a48-a017-4fe2-a4e4-2ccc6db0cbb9",filter:"$",fromId:"4d4cc127-90e2-4478-abe8-42f258562e43",toId:"f5ae0fa5-acab-4e05-83fc-751379fef9e8"},{id:"ac8f1222-aff3-4f3d-ba1d-2a8ea8fc0c69",filter:"$.*",fromId:"f5ae0fa5-acab-4e05-83fc-751379fef9e8",toId:"1a064205-ba07-47e1-8c4f-8e95f398a484"},{id:"3525627a-9d60-4727-8ded-65f859997c45",filter:"$.*",fromId:"1d43ff03-0740-4ce8-9fca-d6c459704a18",toId:"f2b5e259-e916-41bd-9eda-ed593f5db96b"},{id:"f0ba74cb-a5c6-4817-b97e-224ffadfbc9f",filter:"$",fromId:"f2b5e259-e916-41bd-9eda-ed593f5db96b",toId:"4528501a-f423-4bef-acf6-1975ee7766cb"},{id:"53a48601-e158-417e-bc80-d73899a90156",filter:"$.*",fromId:"4528501a-f423-4bef-acf6-1975ee7766cb",toId:"26b1c55e-a751-4c41-a00d-dbf268342c50"},{id:"c34917fe-888d-4404-86f8-18413c4281fe",filter:"$",fromId:"26b1c55e-a751-4c41-a00d-dbf268342c50",toId:"58e67779-3f56-4819-9d47-4de2a1189d47"},{id:"77bcb9ad-4637-4a8d-ae96-1e3f602c3757",filter:"$.*",fromId:"22360929-87ca-4b40-8ff1-b5fc9bce77f0",toId:"8e754bc9-f9d1-4324-9838-6ea63048046f"},{id:"b40f5521-d3fc-4c18-a252-81f16608977e",filter:"$.*",fromId:"5e4737f9-e14f-4414-b556-fa97ac5b33ce",toId:"ce46dfb7-5437-4e7a-ae61-58bfe7e5ff5c"},{id:"cd7bfae8-34bf-43dc-a00b-d82665722aa7",filter:"$.*",fromId:"124b9b41-d677-4b17-9953-1e708f341943",toId:"ff42c022-b73e-4fa2-8b9f-fbe84e514647"},{id:"5c42e3fe-28c9-4362-a784-93ad0dc2edd0",filter:"$.*",fromId:"9f8ae18b-e462-4844-8e5a-2ddd0ab5e53c",toId:"1a524b1b-f347-4f08-9f43-9a2d0aac6a8e"},{id:"b566ccf0-326a-4e0f-9063-97a4175a368d",filter:"$.*",fromId:"7cc54764-c50e-45c9-80c8-0fad982c6dcb",toId:"5c3f975e-950e-48bd-b168-bdd589dbd61f"},{id:"bf85e032-2d2a-4e9c-a139-edcf76c4125b",filter:"$.*",fromId:"ed65430f-6db7-47ed-a33a-00f3b8e1cfb5",toId:"4d4cc127-90e2-4478-abe8-42f258562e43"},{id:"a92776c2-be2b-4153-8b41-f01c2662e464",filter:"$.*",fromId:"bb9cfc45-953c-4e0d-930d-e2a34c833935",toId:"1a064205-ba07-47e1-8c4f-8e95f398a484"},{id:"23533fac-384e-4dac-ae7a-babe5f892895",filter:"$.*",fromId:"6acb76b6-3e03-4056-b32d-1c885da956f5",toId:"26b1c55e-a751-4c41-a00d-dbf268342c50"},{id:"b9dc6a8b-6474-4f4d-bdec-02779707ca56",filter:"$.*",fromId:"3cfcc9c0-4e99-4add-bb16-6fa0bbf42978",toId:"f2b5e259-e916-41bd-9eda-ed593f5db96b"},{id:"09e9aa54-7118-46b5-80d5-482edf655ae7",filter:"$.*",fromId:"4d88a40c-8b6f-42cc-beb7-55577fb473f7",toId:"8e754bc9-f9d1-4324-9838-6ea63048046f"},{id:"3c73e0d0-f3ca-4aed-ae6d-d7ca1602a3aa",filter:"$.*",fromId:"4e0f81dc-ebdd-493c-a423-3e041143701e",toId:"f2b5e259-e916-41bd-9eda-ed593f5db96b"},{id:"e17d521e-e53f-4ee3-b579-b91664d1189e",filter:"$.*",fromId:"766c9a50-7cd8-445c-98f7-5d83344b77ea",toId:"5c3f975e-950e-48bd-b168-bdd589dbd61f"},{id:"79fa0305-9adf-43ec-a002-5eafcca63155",filter:"$.*",fromId:"fe15d7b8-6252-4a85-9850-e70bdd5f64a3",toId:"ff42c022-b73e-4fa2-8b9f-fbe84e514647"},{id:"a9b58c49-0a61-41e1-b38c-58e98d251f03",filter:"$.*",fromId:"c326acc4-2df8-4ca5-aa96-3f073acac234",toId:"1a524b1b-f347-4f08-9f43-9a2d0aac6a8e"},{id:"c0c7287f-969b-466f-8ca4-15b10593c972",filter:"$.*",fromId:"fbbdf700-160d-43f6-9880-4a9d01cd2106",toId:"1a064205-ba07-47e1-8c4f-8e95f398a484"},{id:"c3d4cc24-efa6-4579-a84f-1b35f99bf8db",filter:"$.*",fromId:"01ae64d9-13f5-45c7-892a-80d8a656c321",toId:"ce46dfb7-5437-4e7a-ae61-58bfe7e5ff5c"},{id:"fd792a2c-5b7f-4f07-8f44-94c72335901a",filter:"$.*",fromId:"4f409ac9-20e1-48d3-a2cd-9e1b1b363b21",toId:"26b1c55e-a751-4c41-a00d-dbf268342c50"}]},layoutData:{cells:[{type:"pn.Transition",size:{width:100,height:50},position:{x:288,y:276},angle:0,id:"8e754bc9-f9d1-4324-9838-6ea63048046f",jsonnetsType:"transition",z:1,attrs:{".label":{fill:"#7a7e9b",text:"t0: Verfgbarkeit prfen"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:1200,y:636},angle:0,id:"5c3f975e-950e-48bd-b168-bdd589dbd61f",jsonnetsType:"transition",z:2,attrs:{".label":{fill:"#7a7e9b",text:"t4: Versand vorbereiten"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:732,y:144},angle:0,id:"ce46dfb7-5437-4e7a-ae61-58bfe7e5ff5c",jsonnetsType:"transition",z:3,attrs:{".label":{fill:"#7a7e9b",text:"t1: Produktion durchfhren"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:588,y:372},angle:0,id:"f2b5e259-e916-41bd-9eda-ed593f5db96b",jsonnetsType:"transition",z:4,attrs:{".label":{fill:"#7a7e9b",text:"t2: Artikel reservieren"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:900,y:372},angle:0,id:"26b1c55e-a751-4c41-a00d-dbf268342c50",jsonnetsType:"transition",z:5,attrs:{".label":{fill:"#7a7e9b",text:"t3: Artikel aus Lager holen"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:288,y:624},angle:0,id:"1a064205-ba07-47e1-8c4f-8e95f398a484",jsonnetsType:"transition",z:6,attrs:{".label":{fill:"#7a7e9b",text:"t8: Verkaufsprozess abschlieen"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:588,y:540},angle:0,id:"1a524b1b-f347-4f08-9f43-9a2d0aac6a8e",jsonnetsType:"transition",z:7,attrs:{".label":{fill:"#7a7e9b",text:"t6: Rechnung verschicken"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:900,y:540},angle:0,id:"ff42c022-b73e-4fa2-8b9f-fbe84e514647",jsonnetsType:"transition",z:8,attrs:{".label":{fill:"#7a7e9b",text:"t5: Rechnung stellen"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:732,y:732},angle:0,id:"4d4cc127-90e2-4478-abe8-42f258562e43",jsonnetsType:"transition",z:9,attrs:{".label":{fill:"#7a7e9b",text:"t7: Transportieren"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:132,y:276},angle:0,tokens:2,id:"4876d2d5-014f-4206-af09-170d900b0acc",jsonnetsType:"place",z:10,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p0"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:480,y:276},angle:0,tokens:0,id:"1d43ff03-0740-4ce8-9fca-d6c459704a18",jsonnetsType:"place",z:11,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p1"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:1080,y:264},angle:0,tokens:0,id:"58e67779-3f56-4819-9d47-4de2a1189d47",jsonnetsType:"place",z:12,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p3"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:756,y:372},angle:0,tokens:0,id:"4528501a-f423-4bef-acf6-1975ee7766cb",jsonnetsType:"place",z:13,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p2"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:1068,y:540},angle:0,tokens:0,id:"499c4196-fac1-4280-b317-33dc927a3fed",jsonnetsType:"place",z:14,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p4"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:1068,y:732},angle:0,tokens:0,id:"52641fb4-fcee-41be-b8f5-d8af3da3ac8d",jsonnetsType:"place",z:15,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p7"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:756,y:540},angle:0,tokens:0,id:"73573b72-5df0-4564-81e8-9d4d20d92712",jsonnetsType:"place",z:16,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p5"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:456,y:540},angle:0,tokens:0,id:"8ca9f3ce-ee01-4ced-b29e-952277fbf3d7",jsonnetsType:"place",z:17,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p6"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:444,y:732},angle:0,tokens:0,id:"f5ae0fa5-acab-4e05-83fc-751379fef9e8",jsonnetsType:"place",z:18,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p8"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:132,y:624},angle:0,tokens:0,id:"772856ca-b248-42d4-870e-88cb29d13c78",jsonnetsType:"place",z:19,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p9"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:252,y:144},angle:0,tokens:1,id:"22360929-87ca-4b40-8ff1-b5fc9bce77f0",jsonnetsType:"place",z:20,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Energie IT"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:684,y:48},angle:0,tokens:1,id:"5e4737f9-e14f-4414-b556-fa97ac5b33ce",jsonnetsType:"place",z:21,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Energie Produktion"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:672,y:456},angle:0,tokens:1,id:"3cfcc9c0-4e99-4add-bb16-6fa0bbf42978",jsonnetsType:"place",z:22,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Energie IT"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:1404,y:600},angle:0,tokens:1,id:"7cc54764-c50e-45c9-80c8-0fad982c6dcb",jsonnetsType:"place",z:23,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Energie IT"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:756,y:828},angle:0,tokens:1,id:"ed65430f-6db7-47ed-a33a-00f3b8e1cfb5",jsonnetsType:"place",z:24,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Transportleistung"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:660,y:636},angle:0,tokens:1,id:"9f8ae18b-e462-4844-8e5a-2ddd0ab5e53c",jsonnetsType:"place",z:25,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Energie IT"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:864,y:636},angle:0,tokens:1,id:"124b9b41-d677-4b17-9953-1e708f341943",jsonnetsType:"place",z:26,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Energie IT"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:360,y:516},angle:0,tokens:1,id:"bb9cfc45-953c-4e0d-930d-e2a34c833935",jsonnetsType:"place",z:27,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Energie IT"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:864,y:456},angle:0,tokens:1,id:"6acb76b6-3e03-4056-b32d-1c885da956f5",jsonnetsType:"place",z:28,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Lager Scope 2"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:384,y:144},angle:0,tokens:1,id:"4d88a40c-8b6f-42cc-beb7-55577fb473f7",jsonnetsType:"place",z:29,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"IT-Infrastruktur"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:516,y:456},angle:0,tokens:1,id:"4e0f81dc-ebdd-493c-a423-3e041143701e",jsonnetsType:"place",z:30,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"IT-Infrastruktur"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:1404,y:708},angle:0,tokens:1,id:"766c9a50-7cd8-445c-98f7-5d83344b77ea",jsonnetsType:"place",z:31,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"IT-Infrastruktur"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:984,y:636},angle:0,tokens:1,id:"fe15d7b8-6252-4a85-9850-e70bdd5f64a3",jsonnetsType:"place",z:32,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"IT-Infrastruktur"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:515,y:635},angle:0,tokens:1,id:"c326acc4-2df8-4ca5-aa96-3f073acac234",jsonnetsType:"place",z:33,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"IT-Infrastruktur"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:228,y:516},angle:0,tokens:1,id:"fbbdf700-160d-43f6-9880-4a9d01cd2106",jsonnetsType:"place",z:34,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"IT-Infrastruktur"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:852,y:48},angle:0,tokens:1,id:"01ae64d9-13f5-45c7-892a-80d8a656c321",jsonnetsType:"place",z:35,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Material"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:996,y:456},angle:0,tokens:1,id:"4f409ac9-20e1-48d3-a2cd-9e1b1b363b21",jsonnetsType:"place",z:36,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Lager Scope 3"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"standard.Link",source:{id:"4876d2d5-014f-4206-af09-170d900b0acc",selector:".root"},target:{id:"8e754bc9-f9d1-4324-9838-6ea63048046f",selector:".root"},id:"dbf968cc-fcf7-440c-bf35-471a230c7584",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:37,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"8e754bc9-f9d1-4324-9838-6ea63048046f",selector:".root"},target:{id:"1d43ff03-0740-4ce8-9fca-d6c459704a18",selector:".root"},id:"d920242a-64a3-4bd7-bfd0-01ec77be49ac",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:38,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"1d43ff03-0740-4ce8-9fca-d6c459704a18",selector:".root"},target:{id:"ce46dfb7-5437-4e7a-ae61-58bfe7e5ff5c",selector:".root"},id:"ebe47cb1-5fad-4656-9064-13164107019f",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:39,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"ce46dfb7-5437-4e7a-ae61-58bfe7e5ff5c",selector:".root"},target:{id:"58e67779-3f56-4819-9d47-4de2a1189d47",selector:".root"},id:"108d81cb-cbc8-490e-85e9-424f6f1b55f8",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:40,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"58e67779-3f56-4819-9d47-4de2a1189d47",selector:".root"},target:{id:"5c3f975e-950e-48bd-b168-bdd589dbd61f",selector:".root"},id:"bda372bd-0083-40f5-b4b2-bd708d2e4402",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:41,vertices:[{x:1248,y:289}],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"5c3f975e-950e-48bd-b168-bdd589dbd61f",selector:".root"},target:{id:"499c4196-fac1-4280-b317-33dc927a3fed",selector:".root"},id:"d342db48-dab4-4660-8847-97c73f142b83",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:42,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"499c4196-fac1-4280-b317-33dc927a3fed",selector:".root"},target:{id:"ff42c022-b73e-4fa2-8b9f-fbe84e514647",selector:".root"},id:"cfce7d5a-db54-4b2d-997a-d2ad04fa4bf0",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:43,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"ff42c022-b73e-4fa2-8b9f-fbe84e514647",selector:".root"},target:{id:"73573b72-5df0-4564-81e8-9d4d20d92712",selector:".root"},id:"16cd8671-29d6-439b-bda2-c804665b8671",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:44,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"73573b72-5df0-4564-81e8-9d4d20d92712",selector:".root"},target:{id:"1a524b1b-f347-4f08-9f43-9a2d0aac6a8e",selector:".root"},id:"e60292b6-5900-4d31-bd65-f85de6109a3f",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:45,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"1a524b1b-f347-4f08-9f43-9a2d0aac6a8e",selector:".root"},target:{id:"8ca9f3ce-ee01-4ced-b29e-952277fbf3d7",selector:".root"},id:"8fda0a53-608d-4565-90a1-d427dccabeeb",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:46,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"8ca9f3ce-ee01-4ced-b29e-952277fbf3d7",selector:".root"},target:{id:"1a064205-ba07-47e1-8c4f-8e95f398a484",selector:".root"},id:"14655dd5-456c-40aa-b0a2-9113005c7906",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:47,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"1a064205-ba07-47e1-8c4f-8e95f398a484",selector:".root"},target:{id:"772856ca-b248-42d4-870e-88cb29d13c78",selector:".root"},id:"b45a639f-4fbf-47bf-8ded-10f66ec6f792",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:48,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"5c3f975e-950e-48bd-b168-bdd589dbd61f",selector:".root"},target:{id:"52641fb4-fcee-41be-b8f5-d8af3da3ac8d",selector:".root"},id:"1e011651-7c7a-430e-a52e-2fc0ffe514db",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:49,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"52641fb4-fcee-41be-b8f5-d8af3da3ac8d",selector:".root"},target:{id:"4d4cc127-90e2-4478-abe8-42f258562e43",selector:".root"},id:"42cc1c6c-5cac-4653-a8aa-8453320cdea8",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:50,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"4d4cc127-90e2-4478-abe8-42f258562e43",selector:".root"},target:{id:"f5ae0fa5-acab-4e05-83fc-751379fef9e8",selector:".root"},id:"faa16a48-a017-4fe2-a4e4-2ccc6db0cbb9",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:51,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"f5ae0fa5-acab-4e05-83fc-751379fef9e8",selector:".root"},target:{id:"1a064205-ba07-47e1-8c4f-8e95f398a484",selector:".root"},id:"ac8f1222-aff3-4f3d-ba1d-2a8ea8fc0c69",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:52,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"1d43ff03-0740-4ce8-9fca-d6c459704a18",selector:".root"},target:{id:"f2b5e259-e916-41bd-9eda-ed593f5db96b",selector:".root"},id:"3525627a-9d60-4727-8ded-65f859997c45",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:53,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"f2b5e259-e916-41bd-9eda-ed593f5db96b",selector:".root"},target:{id:"4528501a-f423-4bef-acf6-1975ee7766cb",selector:".root"},id:"f0ba74cb-a5c6-4817-b97e-224ffadfbc9f",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:54,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"4528501a-f423-4bef-acf6-1975ee7766cb",selector:".root"},target:{id:"26b1c55e-a751-4c41-a00d-dbf268342c50",selector:".root"},id:"53a48601-e158-417e-bc80-d73899a90156",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:55,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"26b1c55e-a751-4c41-a00d-dbf268342c50",selector:".root"},target:{id:"58e67779-3f56-4819-9d47-4de2a1189d47",selector:".root"},id:"c34917fe-888d-4404-86f8-18413c4281fe",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:56,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"22360929-87ca-4b40-8ff1-b5fc9bce77f0",selector:".root"},target:{id:"8e754bc9-f9d1-4324-9838-6ea63048046f",selector:".root"},id:"77bcb9ad-4637-4a8d-ae96-1e3f602c3757",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:57,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"5e4737f9-e14f-4414-b556-fa97ac5b33ce",selector:".root"},target:{id:"ce46dfb7-5437-4e7a-ae61-58bfe7e5ff5c",selector:".root"},id:"b40f5521-d3fc-4c18-a252-81f16608977e",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:58,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"124b9b41-d677-4b17-9953-1e708f341943",selector:".root"},target:{id:"ff42c022-b73e-4fa2-8b9f-fbe84e514647",selector:".root"},id:"cd7bfae8-34bf-43dc-a00b-d82665722aa7",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:59,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"9f8ae18b-e462-4844-8e5a-2ddd0ab5e53c",selector:".root"},target:{id:"1a524b1b-f347-4f08-9f43-9a2d0aac6a8e",selector:".root"},id:"5c42e3fe-28c9-4362-a784-93ad0dc2edd0",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:60,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"7cc54764-c50e-45c9-80c8-0fad982c6dcb",selector:".root"},target:{id:"5c3f975e-950e-48bd-b168-bdd589dbd61f",selector:".root"},id:"b566ccf0-326a-4e0f-9063-97a4175a368d",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:61,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"ed65430f-6db7-47ed-a33a-00f3b8e1cfb5",selector:".root"},target:{id:"4d4cc127-90e2-4478-abe8-42f258562e43",selector:".root"},id:"bf85e032-2d2a-4e9c-a139-edcf76c4125b",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:62,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"bb9cfc45-953c-4e0d-930d-e2a34c833935",selector:".root"},target:{id:"1a064205-ba07-47e1-8c4f-8e95f398a484",selector:".root"},id:"a92776c2-be2b-4153-8b41-f01c2662e464",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:63,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"6acb76b6-3e03-4056-b32d-1c885da956f5",selector:".root"},target:{id:"26b1c55e-a751-4c41-a00d-dbf268342c50",selector:".root"},id:"23533fac-384e-4dac-ae7a-babe5f892895",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:64,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"3cfcc9c0-4e99-4add-bb16-6fa0bbf42978",selector:".root"},target:{id:"f2b5e259-e916-41bd-9eda-ed593f5db96b",selector:".root"},id:"b9dc6a8b-6474-4f4d-bdec-02779707ca56",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:65,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"4d88a40c-8b6f-42cc-beb7-55577fb473f7",selector:".root"},target:{id:"8e754bc9-f9d1-4324-9838-6ea63048046f",selector:".root"},id:"09e9aa54-7118-46b5-80d5-482edf655ae7",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:66,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"4e0f81dc-ebdd-493c-a423-3e041143701e",selector:".root"},target:{id:"f2b5e259-e916-41bd-9eda-ed593f5db96b",selector:".root"},id:"3c73e0d0-f3ca-4aed-ae6d-d7ca1602a3aa",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:67,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"766c9a50-7cd8-445c-98f7-5d83344b77ea",selector:".root"},target:{id:"5c3f975e-950e-48bd-b168-bdd589dbd61f",selector:".root"},id:"e17d521e-e53f-4ee3-b579-b91664d1189e",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:68,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"fe15d7b8-6252-4a85-9850-e70bdd5f64a3",selector:".root"},target:{id:"ff42c022-b73e-4fa2-8b9f-fbe84e514647",selector:".root"},id:"79fa0305-9adf-43ec-a002-5eafcca63155",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:69,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"c326acc4-2df8-4ca5-aa96-3f073acac234",selector:".root"},target:{id:"1a524b1b-f347-4f08-9f43-9a2d0aac6a8e",selector:".root"},id:"a9b58c49-0a61-41e1-b38c-58e98d251f03",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:70,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"fbbdf700-160d-43f6-9880-4a9d01cd2106",selector:".root"},target:{id:"1a064205-ba07-47e1-8c4f-8e95f398a484",selector:".root"},id:"c0c7287f-969b-466f-8ca4-15b10593c972",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:71,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"01ae64d9-13f5-45c7-892a-80d8a656c321",selector:".root"},target:{id:"ce46dfb7-5437-4e7a-ae61-58bfe7e5ff5c",selector:".root"},id:"c3d4cc24-efa6-4579-a84f-1b35f99bf8db",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:72,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"4f409ac9-20e1-48d3-a2cd-9e1b1b363b21",selector:".root"},target:{id:"26b1c55e-a751-4c41-a00d-dbf268342c50",selector:".root"},id:"fd792a2c-5b7f-4f07-8f44-94c72335901a",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:73,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}}]}}},{name:"Prozessinstanzen",net:{typeData:{placeTypes:{"4876d2d5-014f-4206-af09-170d900b0acc":"instances","1d43ff03-0740-4ce8-9fca-d6c459704a18":"instances","58e67779-3f56-4819-9d47-4de2a1189d47":"instances","4528501a-f423-4bef-acf6-1975ee7766cb":"instances","499c4196-fac1-4280-b317-33dc927a3fed":"instances","52641fb4-fcee-41be-b8f5-d8af3da3ac8d":"instances","73573b72-5df0-4564-81e8-9d4d20d92712":"instances","8ca9f3ce-ee02-4ced-b29e-952277fbf3d7":"simple","f5ae0fa5-acab-4e05-83fc-751379fef9e8":"instances","772856ca-b248-42d4-870e-88cb29d13c78":"instances","8ca9f3ce-ee01-4ced-b29e-952277fbf3d7":"instances"},transitionTypes:{"8e754bc9-f9d1-4324-9838-6ea63048046f":"instances","5c3f975e-950e-48bd-b168-bdd589dbd61f":"instances","ce46dfb7-5437-4e7a-ae61-58bfe7e5ff5c":"instances","f2b5e259-e916-41bd-9eda-ed593f5db96b":"instances","26b1c55e-a751-4c41-a00d-dbf268342c50":"instances","1a064205-ba07-47e1-8c4f-8e95f398a484":"custom","1a524b1b-f347-4f08-9f43-9a2d0aac6a8e":"instances","ff42c022-b73e-4fa2-8b9f-fbe84e514647":"instances","4d4cc127-90e2-4478-abe8-42f258562e43":"instances"}},netData:{places:[{id:"4876d2d5-014f-4206-af09-170d900b0acc",name:"p0",marking:[{instanceID:"i0"},{instanceID:"i1"}],schema:{title:"Prozessinstanzen",description:"Eine Stelle, die Marken mit ProzessinstanzIDs speichert.",type:"array",items:{type:"object",properties:{instanceID:{type:"string"}},required:["instanceID"]},$id:"4876d2d5-014f-4206-af09-170d900b0acc"}},{id:"1d43ff03-0740-4ce8-9fca-d6c459704a18",name:"p1",marking:[],schema:{title:"Prozessinstanzen",description:"Eine Stelle, die Marken mit ProzessinstanzIDs speichert.",type:"array",items:{type:"object",properties:{instanceID:{type:"string"}},required:["instanceID"]},$id:"1d43ff03-0740-4ce8-9fca-d6c459704a18"}},{id:"58e67779-3f56-4819-9d47-4de2a1189d47",name:"p3",marking:[],schema:{title:"Prozessinstanzen",description:"Eine Stelle, die Marken mit ProzessinstanzIDs speichert.",type:"array",items:{type:"object",properties:{instanceID:{type:"string"}},required:["instanceID"]},$id:"58e67779-3f56-4819-9d47-4de2a1189d47"}},{id:"4528501a-f423-4bef-acf6-1975ee7766cb",name:"p2",marking:[],schema:{title:"Prozessinstanzen",description:"Eine Stelle, die Marken mit ProzessinstanzIDs speichert.",type:"array",items:{type:"object",properties:{instanceID:{type:"string"}},required:["instanceID"]},$id:"4528501a-f423-4bef-acf6-1975ee7766cb"}},{id:"499c4196-fac1-4280-b317-33dc927a3fed",name:"p4",marking:[],schema:{title:"Prozessinstanzen",description:"Eine Stelle, die Marken mit ProzessinstanzIDs speichert.",type:"array",items:{type:"object",properties:{instanceID:{type:"string"}},required:["instanceID"]},$id:"499c4196-fac1-4280-b317-33dc927a3fed"}},{id:"52641fb4-fcee-41be-b8f5-d8af3da3ac8d",name:"p7",marking:[],schema:{title:"Prozessinstanzen",description:"Eine Stelle, die Marken mit ProzessinstanzIDs speichert.",type:"array",items:{type:"object",properties:{instanceID:{type:"string"}},required:["instanceID"]},$id:"52641fb4-fcee-41be-b8f5-d8af3da3ac8d"}},{id:"73573b72-5df0-4564-81e8-9d4d20d92712",name:"p5",marking:[],schema:{title:"Prozessinstanzen",description:"Eine Stelle, die Marken mit ProzessinstanzIDs speichert.",type:"array",items:{type:"object",properties:{instanceID:{type:"string"}},required:["instanceID"]},$id:"73573b72-5df0-4564-81e8-9d4d20d92712"}},{id:"8ca9f3ce-ee01-4ced-b29e-952277fbf3d7",name:"p6",marking:[],schema:{title:"Prozessinstanzen",description:"Eine Stelle, die Marken mit ProzessinstanzIDs speichert.",type:"array",items:{type:"object",properties:{instanceID:{type:"string"}},required:["instanceID"]},$id:"8ca9f3ce-ee01-4ced-b29e-952277fbf3d7"}},{id:"f5ae0fa5-acab-4e05-83fc-751379fef9e8",name:"p8",marking:[],schema:{title:"Prozessinstanzen",description:"Eine Stelle, die Marken mit ProzessinstanzIDs speichert.",type:"array",items:{type:"object",properties:{instanceID:{type:"string"}},required:["instanceID"]},$id:"f5ae0fa5-acab-4e05-83fc-751379fef9e8"}},{id:"772856ca-b248-42d4-870e-88cb29d13c78",name:"p9",marking:[],schema:{title:"Prozessinstanzen",description:"Eine Stelle, die Marken mit ProzessinstanzIDs speichert.",type:"array",items:{type:"object",properties:{instanceID:{type:"string"}},required:["instanceID"]},$id:"772856ca-b248-42d4-870e-88cb29d13c78"}}],transitions:[{id:"8e754bc9-f9d1-4324-9838-6ea63048046f",name:"t0: Verfgbarkeit prfen",preface:"",guard:"true",customVariables:{},keyVarSnippets:{output_p1_key:"local output_p1_key = '-';"},fragmentVarSnippets:{output_p1_value:"local output_p1_value = input_values[0];"}},{id:"5c3f975e-950e-48bd-b168-bdd589dbd61f",name:"t4: Versand vorbereiten",preface:"",guard:"true",customVariables:{},keyVarSnippets:{output_p4_key:"local output_p4_key = '-';",output_p7_key:"local output_p7_key = '-';"},fragmentVarSnippets:{output_p4_value:"local output_p4_value = input_values[0];",output_p7_value:"local output_p7_value = input_values[0];"}},{id:"ce46dfb7-5437-4e7a-ae61-58bfe7e5ff5c",name:"t1: Produktion durchfhren",preface:"",guard:"true",customVariables:{},keyVarSnippets:{output_p3_key:"local output_p3_key = '-';"},fragmentVarSnippets:{output_p3_value:"local output_p3_value = input_values[0];"}},{id:"f2b5e259-e916-41bd-9eda-ed593f5db96b",name:"t2: Artikel reservieren",preface:"",guard:"true",customVariables:{},keyVarSnippets:{output_p2_key:"local output_p2_key = '-';"},fragmentVarSnippets:{output_p2_value:"local output_p2_value = input_values[0];"}},{id:"26b1c55e-a751-4c41-a00d-dbf268342c50",name:"t3: Artikel aus Lager holen",preface:"",guard:"true",customVariables:{},keyVarSnippets:{output_p3_key:"local output_p3_key = '-';"},fragmentVarSnippets:{output_p3_value:"local output_p3_value = input_values[0];"}},{id:"1a064205-ba07-47e1-8c4f-8e95f398a484",name:"t8: Verkaufsprozess abschlieen",preface:"",guard:"input_p6_value.instanceID == input_p8_value.instanceID",customVariables:{},keyVarSnippets:{output_p9_key:"local output_p9_key = '-';"},fragmentVarSnippets:{output_p9_value:"local output_p9_value = input_values[0];"}},{id:"1a524b1b-f347-4f08-9f43-9a2d0aac6a8e",name:"t6: Rechnung verschicken",preface:"",guard:"true",customVariables:{},keyVarSnippets:{output_p6_key:"local output_p6_key = '-';"},fragmentVarSnippets:{output_p6_value:"local output_p6_value = input_values[0];"}},{id:"ff42c022-b73e-4fa2-8b9f-fbe84e514647",name:"t5: Rechnung stellen",preface:"",guard:"true",customVariables:{},keyVarSnippets:{output_p5_key:"local output_p5_key = '-';"},fragmentVarSnippets:{output_p5_value:"local output_p5_value = input_values[0];"}},{id:"4d4cc127-90e2-4478-abe8-42f258562e43",name:"t7: Transportieren",preface:"",guard:"true",customVariables:{},keyVarSnippets:{output_p8_key:"local output_p8_key = '-';"},fragmentVarSnippets:{output_p8_value:"local output_p8_value = input_values[0];"}}],arcs:[{id:"dbf968cc-fcf7-440c-bf35-471a230c7584",filter:"$.*",fromId:"4876d2d5-014f-4206-af09-170d900b0acc",toId:"8e754bc9-f9d1-4324-9838-6ea63048046f"},{id:"d920242a-64a3-4bd7-bfd0-01ec77be49ac",filter:"$",fromId:"8e754bc9-f9d1-4324-9838-6ea63048046f",toId:"1d43ff03-0740-4ce8-9fca-d6c459704a18"},{id:"ebe47cb1-5fad-4656-9064-13164107019f",filter:"$.*",fromId:"1d43ff03-0740-4ce8-9fca-d6c459704a18",toId:"ce46dfb7-5437-4e7a-ae61-58bfe7e5ff5c"},{id:"108d81cb-cbc8-490e-85e9-424f6f1b55f8",filter:"$",fromId:"ce46dfb7-5437-4e7a-ae61-58bfe7e5ff5c",toId:"58e67779-3f56-4819-9d47-4de2a1189d47"},{id:"bda372bd-0083-40f5-b4b2-bd708d2e4402",filter:"$.*",fromId:"58e67779-3f56-4819-9d47-4de2a1189d47",toId:"5c3f975e-950e-48bd-b168-bdd589dbd61f"},{id:"d342db48-dab4-4660-8847-97c73f142b83",filter:"$",fromId:"5c3f975e-950e-48bd-b168-bdd589dbd61f",toId:"499c4196-fac1-4280-b317-33dc927a3fed"},{id:"cfce7d5a-db54-4b2d-997a-d2ad04fa4bf0",filter:"$.*",fromId:"499c4196-fac1-4280-b317-33dc927a3fed",toId:"ff42c022-b73e-4fa2-8b9f-fbe84e514647"},{id:"16cd8671-29d6-439b-bda2-c804665b8671",filter:"$",fromId:"ff42c022-b73e-4fa2-8b9f-fbe84e514647",toId:"73573b72-5df0-4564-81e8-9d4d20d92712"},{id:"e60292b6-5900-4d31-bd65-f85de6109a3f",filter:"$.*",fromId:"73573b72-5df0-4564-81e8-9d4d20d92712",toId:"1a524b1b-f347-4f08-9f43-9a2d0aac6a8e"},{id:"8fda0a53-608d-4565-90a1-d427dccabeeb",filter:"$",fromId:"1a524b1b-f347-4f08-9f43-9a2d0aac6a8e",toId:"8ca9f3ce-ee01-4ced-b29e-952277fbf3d7"},{id:"14655dd5-456c-40aa-b0a2-9113005c7906",filter:"$.*",fromId:"8ca9f3ce-ee01-4ced-b29e-952277fbf3d7",toId:"1a064205-ba07-47e1-8c4f-8e95f398a484"},{id:"b45a639f-4fbf-47bf-8ded-10f66ec6f792",filter:"$",fromId:"1a064205-ba07-47e1-8c4f-8e95f398a484",toId:"772856ca-b248-42d4-870e-88cb29d13c78"},{id:"1e011651-7c7a-430e-a52e-2fc0ffe514db",filter:"$",fromId:"5c3f975e-950e-48bd-b168-bdd589dbd61f",toId:"52641fb4-fcee-41be-b8f5-d8af3da3ac8d"},{id:"42cc1c6c-5cac-4653-a8aa-8453320cdea8",filter:"$.*",fromId:"52641fb4-fcee-41be-b8f5-d8af3da3ac8d",toId:"4d4cc127-90e2-4478-abe8-42f258562e43"},{id:"faa16a48-a017-4fe2-a4e4-2ccc6db0cbb9",filter:"$",fromId:"4d4cc127-90e2-4478-abe8-42f258562e43",toId:"f5ae0fa5-acab-4e05-83fc-751379fef9e8"},{id:"ac8f1222-aff3-4f3d-ba1d-2a8ea8fc0c69",filter:"$.*",fromId:"f5ae0fa5-acab-4e05-83fc-751379fef9e8",toId:"1a064205-ba07-47e1-8c4f-8e95f398a484"},{id:"3525627a-9d60-4727-8ded-65f859997c45",filter:"$.*",fromId:"1d43ff03-0740-4ce8-9fca-d6c459704a18",toId:"f2b5e259-e916-41bd-9eda-ed593f5db96b"},{id:"f0ba74cb-a5c6-4817-b97e-224ffadfbc9f",filter:"$",fromId:"f2b5e259-e916-41bd-9eda-ed593f5db96b",toId:"4528501a-f423-4bef-acf6-1975ee7766cb"},{id:"53a48601-e158-417e-bc80-d73899a90156",filter:"$.*",fromId:"4528501a-f423-4bef-acf6-1975ee7766cb",toId:"26b1c55e-a751-4c41-a00d-dbf268342c50"},{id:"c34917fe-888d-4404-86f8-18413c4281fe",filter:"$",fromId:"26b1c55e-a751-4c41-a00d-dbf268342c50",toId:"58e67779-3f56-4819-9d47-4de2a1189d47"}]},layoutData:{cells:[{type:"pn.Transition",size:{width:100,height:50},position:{x:288,y:276},angle:0,id:"8e754bc9-f9d1-4324-9838-6ea63048046f",jsonnetsType:"transition",z:1,attrs:{".label":{fill:"#7a7e9b",text:"t0: Verfgbarkeit prfen"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:1200,y:636},angle:0,id:"5c3f975e-950e-48bd-b168-bdd589dbd61f",jsonnetsType:"transition",z:2,attrs:{".label":{fill:"#7a7e9b",text:"t4: Versand vorbereiten"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:732,y:144},angle:0,id:"ce46dfb7-5437-4e7a-ae61-58bfe7e5ff5c",jsonnetsType:"transition",z:3,attrs:{".label":{fill:"#7a7e9b",text:"t1: Produktion durchfhren"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:588,y:372},angle:0,id:"f2b5e259-e916-41bd-9eda-ed593f5db96b",jsonnetsType:"transition",z:4,attrs:{".label":{fill:"#7a7e9b",text:"t2: Artikel reservieren"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:900,y:372},angle:0,id:"26b1c55e-a751-4c41-a00d-dbf268342c50",jsonnetsType:"transition",z:5,attrs:{".label":{fill:"#7a7e9b",text:"t3: Artikel aus Lager holen"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:288,y:624},angle:0,id:"1a064205-ba07-47e1-8c4f-8e95f398a484",jsonnetsType:"transition",z:6,attrs:{".label":{fill:"#7a7e9b",text:"t8: Verkaufsprozess abschlieen"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:588,y:540},angle:0,id:"1a524b1b-f347-4f08-9f43-9a2d0aac6a8e",jsonnetsType:"transition",z:7,attrs:{".label":{fill:"#7a7e9b",text:"t6: Rechnung verschicken"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:900,y:540},angle:0,id:"ff42c022-b73e-4fa2-8b9f-fbe84e514647",jsonnetsType:"transition",z:8,attrs:{".label":{fill:"#7a7e9b",text:"t5: Rechnung stellen"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:732,y:732},angle:0,id:"4d4cc127-90e2-4478-abe8-42f258562e43",jsonnetsType:"transition",z:9,attrs:{".label":{fill:"#7a7e9b",text:"t7: Transportieren"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:132,y:276},angle:0,tokens:2,id:"4876d2d5-014f-4206-af09-170d900b0acc",jsonnetsType:"place",z:10,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p0"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:480,y:276},angle:0,tokens:0,id:"1d43ff03-0740-4ce8-9fca-d6c459704a18",jsonnetsType:"place",z:11,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p1"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:1080,y:264},angle:0,tokens:0,id:"58e67779-3f56-4819-9d47-4de2a1189d47",jsonnetsType:"place",z:12,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p3"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:756,y:372},angle:0,tokens:0,id:"4528501a-f423-4bef-acf6-1975ee7766cb",jsonnetsType:"place",z:13,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p2"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:1068,y:540},angle:0,tokens:0,id:"499c4196-fac1-4280-b317-33dc927a3fed",jsonnetsType:"place",z:14,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p4"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:1068,y:732},angle:0,tokens:0,id:"52641fb4-fcee-41be-b8f5-d8af3da3ac8d",jsonnetsType:"place",z:15,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p7"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:756,y:540},angle:0,tokens:0,id:"73573b72-5df0-4564-81e8-9d4d20d92712",jsonnetsType:"place",z:16,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p5"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:456,y:540},angle:0,tokens:0,id:"8ca9f3ce-ee01-4ced-b29e-952277fbf3d7",jsonnetsType:"place",z:17,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p6"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:444,y:732},angle:0,tokens:0,id:"f5ae0fa5-acab-4e05-83fc-751379fef9e8",jsonnetsType:"place",z:18,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p8"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:132,y:624},angle:0,tokens:0,id:"772856ca-b248-42d4-870e-88cb29d13c78",jsonnetsType:"place",z:19,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p9"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"standard.Link",source:{id:"4876d2d5-014f-4206-af09-170d900b0acc",selector:".root"},target:{id:"8e754bc9-f9d1-4324-9838-6ea63048046f",selector:".root"},id:"dbf968cc-fcf7-440c-bf35-471a230c7584",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:20,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"8e754bc9-f9d1-4324-9838-6ea63048046f",selector:".root"},target:{id:"1d43ff03-0740-4ce8-9fca-d6c459704a18",selector:".root"},id:"d920242a-64a3-4bd7-bfd0-01ec77be49ac",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:21,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"1d43ff03-0740-4ce8-9fca-d6c459704a18",selector:".root"},target:{id:"ce46dfb7-5437-4e7a-ae61-58bfe7e5ff5c",selector:".root"},id:"ebe47cb1-5fad-4656-9064-13164107019f",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:22,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"ce46dfb7-5437-4e7a-ae61-58bfe7e5ff5c",selector:".root"},target:{id:"58e67779-3f56-4819-9d47-4de2a1189d47",selector:".root"},id:"108d81cb-cbc8-490e-85e9-424f6f1b55f8",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:23,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"58e67779-3f56-4819-9d47-4de2a1189d47",selector:".root"},target:{id:"5c3f975e-950e-48bd-b168-bdd589dbd61f",selector:".root"},id:"bda372bd-0083-40f5-b4b2-bd708d2e4402",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:24,vertices:[{x:1248,y:289}],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"5c3f975e-950e-48bd-b168-bdd589dbd61f",selector:".root"},target:{id:"499c4196-fac1-4280-b317-33dc927a3fed",selector:".root"},id:"d342db48-dab4-4660-8847-97c73f142b83",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:25,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"499c4196-fac1-4280-b317-33dc927a3fed",selector:".root"},target:{id:"ff42c022-b73e-4fa2-8b9f-fbe84e514647",selector:".root"},id:"cfce7d5a-db54-4b2d-997a-d2ad04fa4bf0",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:26,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"ff42c022-b73e-4fa2-8b9f-fbe84e514647",selector:".root"},target:{id:"73573b72-5df0-4564-81e8-9d4d20d92712",selector:".root"},id:"16cd8671-29d6-439b-bda2-c804665b8671",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:27,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"73573b72-5df0-4564-81e8-9d4d20d92712",selector:".root"},target:{id:"1a524b1b-f347-4f08-9f43-9a2d0aac6a8e",selector:".root"},id:"e60292b6-5900-4d31-bd65-f85de6109a3f",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:28,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"1a524b1b-f347-4f08-9f43-9a2d0aac6a8e",selector:".root"},target:{id:"8ca9f3ce-ee01-4ced-b29e-952277fbf3d7",selector:".root"},id:"8fda0a53-608d-4565-90a1-d427dccabeeb",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:29,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"8ca9f3ce-ee01-4ced-b29e-952277fbf3d7",selector:".root"},target:{id:"1a064205-ba07-47e1-8c4f-8e95f398a484",selector:".root"},id:"14655dd5-456c-40aa-b0a2-9113005c7906",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:30,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"1a064205-ba07-47e1-8c4f-8e95f398a484",selector:".root"},target:{id:"772856ca-b248-42d4-870e-88cb29d13c78",selector:".root"},id:"b45a639f-4fbf-47bf-8ded-10f66ec6f792",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:31,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"5c3f975e-950e-48bd-b168-bdd589dbd61f",selector:".root"},target:{id:"52641fb4-fcee-41be-b8f5-d8af3da3ac8d",selector:".root"},id:"1e011651-7c7a-430e-a52e-2fc0ffe514db",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:32,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"52641fb4-fcee-41be-b8f5-d8af3da3ac8d",selector:".root"},target:{id:"4d4cc127-90e2-4478-abe8-42f258562e43",selector:".root"},id:"42cc1c6c-5cac-4653-a8aa-8453320cdea8",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:33,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"4d4cc127-90e2-4478-abe8-42f258562e43",selector:".root"},target:{id:"f5ae0fa5-acab-4e05-83fc-751379fef9e8",selector:".root"},id:"faa16a48-a017-4fe2-a4e4-2ccc6db0cbb9",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:34,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"f5ae0fa5-acab-4e05-83fc-751379fef9e8",selector:".root"},target:{id:"1a064205-ba07-47e1-8c4f-8e95f398a484",selector:".root"},id:"ac8f1222-aff3-4f3d-ba1d-2a8ea8fc0c69",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:35,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"1d43ff03-0740-4ce8-9fca-d6c459704a18",selector:".root"},target:{id:"f2b5e259-e916-41bd-9eda-ed593f5db96b",selector:".root"},id:"3525627a-9d60-4727-8ded-65f859997c45",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:36,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"f2b5e259-e916-41bd-9eda-ed593f5db96b",selector:".root"},target:{id:"4528501a-f423-4bef-acf6-1975ee7766cb",selector:".root"},id:"f0ba74cb-a5c6-4817-b97e-224ffadfbc9f",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:37,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"4528501a-f423-4bef-acf6-1975ee7766cb",selector:".root"},target:{id:"26b1c55e-a751-4c41-a00d-dbf268342c50",selector:".root"},id:"53a48601-e158-417e-bc80-d73899a90156",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:38,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"26b1c55e-a751-4c41-a00d-dbf268342c50",selector:".root"},target:{id:"58e67779-3f56-4819-9d47-4de2a1189d47",selector:".root"},id:"c34917fe-888d-4404-86f8-18413c4281fe",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:39,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}}]}}},{name:"Netzstruktur",net:{typeData:{placeTypes:{"4876d2d5-014f-4206-af09-170d900b0acc":"simple","1d43ff03-0740-4ce8-9fca-d6c459704a18":"simple","58e67779-3f56-4819-9d47-4de2a1189d47":"simple","4528501a-f423-4bef-acf6-1975ee7766cb":"simple","499c4196-fac1-4280-b317-33dc927a3fed":"simple","52641fb4-fcee-41be-b8f5-d8af3da3ac8d":"simple","73573b72-5df0-4564-81e8-9d4d20d92712":"simple","8ca9f3ce-ee02-4ced-b29e-952277fbf3d7":"simple","f5ae0fa5-acab-4e05-83fc-751379fef9e8":"simple","772856ca-b248-42d4-870e-88cb29d13c78":"simple"},transitionTypes:{"8e754bc9-f9d1-4324-9838-6ea63048046f":"simple","5c3f975e-950e-48bd-b168-bdd589dbd61f":"simple","ce46dfb7-5437-4e7a-ae61-58bfe7e5ff5c":"simple","f2b5e259-e916-41bd-9eda-ed593f5db96b":"simple","26b1c55e-a751-4c41-a00d-dbf268342c50":"simple","1a064205-ba07-47e1-8c4f-8e95f398a484":"simple","1a524b1b-f347-4f08-9f43-9a2d0aac6a8e":"simple","ff42c022-b73e-4fa2-8b9f-fbe84e514647":"simple","4d4cc127-90e2-4478-abe8-42f258562e43":"simple"}},netData:{places:[{id:"4876d2d5-014f-4206-af09-170d900b0acc",name:"p0",marking:[{}],schema:{title:"Einfach",description:"Eine Stelle, die einfache Marken (leere Objekte) speichert.",type:"array",items:{type:"object"},$id:"4876d2d5-014f-4206-af09-170d900b0acc"}},{id:"1d43ff03-0740-4ce8-9fca-d6c459704a18",name:"p1",marking:[],schema:{title:"Einfach",description:"Eine Stelle, die einfache Marken (leere Objekte) speichert.",type:"array",items:{type:"object"},$id:"1d43ff03-0740-4ce8-9fca-d6c459704a18"}},{id:"58e67779-3f56-4819-9d47-4de2a1189d47",name:"p3",marking:[],schema:{title:"Einfach",description:"Eine Stelle, die einfache Marken (leere Objekte) speichert.",type:"array",items:{type:"object"},$id:"772856ca-b248-42d4-870e-88cb29d13c78"}},{id:"4528501a-f423-4bef-acf6-1975ee7766cb",name:"p2",marking:[],schema:{title:"Einfach",description:"Eine Stelle, die einfache Marken (leere Objekte) speichert.",type:"array",items:{type:"object"},$id:"4528501a-f423-4bef-acf6-1975ee7766cb"}},{id:"499c4196-fac1-4280-b317-33dc927a3fed",name:"p4",marking:[],schema:{title:"Einfach",description:"Eine Stelle, die einfache Marken (leere Objekte) speichert.",type:"array",items:{type:"object"},$id:"772856ca-b248-42d4-870e-88cb29d13c78"}},{id:"52641fb4-fcee-41be-b8f5-d8af3da3ac8d",name:"p7",marking:[],schema:{title:"Einfach",description:"Eine Stelle, die einfache Marken (leere Objekte) speichert.",type:"array",items:{type:"object"},$id:"52641fb4-fcee-41be-b8f5-d8af3da3ac8d"}},{id:"73573b72-5df0-4564-81e8-9d4d20d92712",name:"p5",marking:[],schema:{title:"Einfach",description:"Eine Stelle, die einfache Marken (leere Objekte) speichert.",type:"array",items:{type:"object"},$id:"73573b72-5df0-4564-81e8-9d4d20d92712"}},{id:"8ca9f3ce-ee01-4ced-b29e-952277fbf3d7",name:"p6",marking:[],schema:{title:"Einfach",description:"Eine Stelle, die einfache Marken (leere Objekte) speichert.",type:"array",items:{type:"object"},$id:"772856ca-b248-42d4-870e-88cb29d13c78"}},{id:"f5ae0fa5-acab-4e05-83fc-751379fef9e8",name:"p8",marking:[],schema:{title:"Einfach",description:"Eine Stelle, die einfache Marken (leere Objekte) speichert.",type:"array",items:{type:"object"},$id:"772856ca-b248-42d4-870e-88cb29d13c78"}},{id:"772856ca-b248-42d4-870e-88cb29d13c78",name:"p9",marking:[],schema:{title:"Einfach",description:"Eine Stelle, die einfache Marken (leere Objekte) speichert.",type:"array",items:{type:"object"},$id:"772856ca-b248-42d4-870e-88cb29d13c78"}}],transitions:[{id:"8e754bc9-f9d1-4324-9838-6ea63048046f",name:"t0: Verfgbarkeit prfen",preface:"",guard:"true",customVariables:{},keyVarSnippets:{output_p1_key:"local output_p1_key = '-';"},fragmentVarSnippets:{output_p1_value:"local output_p1_value = {};"}},{id:"5c3f975e-950e-48bd-b168-bdd589dbd61f",name:"t4: Versand vorbereiten",preface:"",guard:"true",customVariables:{},keyVarSnippets:{output_p4_key:"local output_p4_key = '-';",output_p7_key:"local output_p7_key = '-';"},fragmentVarSnippets:{output_p4_value:"local output_p4_value = {};",output_p7_value:"local output_p7_value = {};"}},{id:"ce46dfb7-5437-4e7a-ae61-58bfe7e5ff5c",name:"t1: Produktion durchfhren",preface:"",guard:"true",customVariables:{},keyVarSnippets:{output_p3_key:"local output_p3_key = '-';"},fragmentVarSnippets:{output_p3_value:"local output_p3_value = {};"}},{id:"f2b5e259-e916-41bd-9eda-ed593f5db96b",name:"t2: Artikel reservieren",preface:"",guard:"true",customVariables:{},keyVarSnippets:{output_p2_key:"local output_p2_key = '-';"},fragmentVarSnippets:{output_p2_value:"local output_p2_value = {};"}},{id:"26b1c55e-a751-4c41-a00d-dbf268342c50",name:"t3: Artikel aus Lager holen",preface:"",guard:"true",customVariables:{},keyVarSnippets:{output_p3_key:"local output_p3_key = '-';"},fragmentVarSnippets:{output_p3_value:"local output_p3_value = {};"}},{id:"1a064205-ba07-47e1-8c4f-8e95f398a484",name:"t8: Verkaufsprozess abschlieen",preface:"",guard:"true",customVariables:{},keyVarSnippets:{output_p9_key:"local output_p9_key = '-';"},fragmentVarSnippets:{output_p9_value:"local output_p9_value = {};"}},{id:"1a524b1b-f347-4f08-9f43-9a2d0aac6a8e",name:"t6: Rechnung verschicken",preface:"",guard:"true",customVariables:{},keyVarSnippets:{output_p6_key:"local output_p6_key = '-';"},fragmentVarSnippets:{output_p6_value:"local output_p6_value = {};"}},{id:"ff42c022-b73e-4fa2-8b9f-fbe84e514647",name:"t5: Rechnung stellen",preface:"",guard:"true",customVariables:{},keyVarSnippets:{output_p5_key:"local output_p5_key = '-';"},fragmentVarSnippets:{output_p5_value:"local output_p5_value = {};"}},{id:"4d4cc127-90e2-4478-abe8-42f258562e43",name:"t7: Transportieren",preface:"",guard:"true",customVariables:{},keyVarSnippets:{output_p8_key:"local output_p8_key = '-';"},fragmentVarSnippets:{output_p8_value:"local output_p8_value = {};"}}],arcs:[{id:"dbf968cc-fcf7-440c-bf35-471a230c7584",filter:"$.*",fromId:"4876d2d5-014f-4206-af09-170d900b0acc",toId:"8e754bc9-f9d1-4324-9838-6ea63048046f"},{id:"d920242a-64a3-4bd7-bfd0-01ec77be49ac",filter:"$",fromId:"8e754bc9-f9d1-4324-9838-6ea63048046f",toId:"1d43ff03-0740-4ce8-9fca-d6c459704a18"},{id:"ebe47cb1-5fad-4656-9064-13164107019f",filter:"$.*",fromId:"1d43ff03-0740-4ce8-9fca-d6c459704a18",toId:"ce46dfb7-5437-4e7a-ae61-58bfe7e5ff5c"},{id:"108d81cb-cbc8-490e-85e9-424f6f1b55f8",filter:"$",fromId:"ce46dfb7-5437-4e7a-ae61-58bfe7e5ff5c",toId:"58e67779-3f56-4819-9d47-4de2a1189d47"},{id:"bda372bd-0083-40f5-b4b2-bd708d2e4402",filter:"$.*",fromId:"58e67779-3f56-4819-9d47-4de2a1189d47",toId:"5c3f975e-950e-48bd-b168-bdd589dbd61f"},{id:"d342db48-dab4-4660-8847-97c73f142b83",filter:"$",fromId:"5c3f975e-950e-48bd-b168-bdd589dbd61f",toId:"499c4196-fac1-4280-b317-33dc927a3fed"},{id:"cfce7d5a-db54-4b2d-997a-d2ad04fa4bf0",filter:"$.*",fromId:"499c4196-fac1-4280-b317-33dc927a3fed",toId:"ff42c022-b73e-4fa2-8b9f-fbe84e514647"},{id:"16cd8671-29d6-439b-bda2-c804665b8671",filter:"$",fromId:"ff42c022-b73e-4fa2-8b9f-fbe84e514647",toId:"73573b72-5df0-4564-81e8-9d4d20d92712"},{id:"e60292b6-5900-4d31-bd65-f85de6109a3f",filter:"$.*",fromId:"73573b72-5df0-4564-81e8-9d4d20d92712",toId:"1a524b1b-f347-4f08-9f43-9a2d0aac6a8e"},{id:"8fda0a53-608d-4565-90a1-d427dccabeeb",filter:"$",fromId:"1a524b1b-f347-4f08-9f43-9a2d0aac6a8e",toId:"8ca9f3ce-ee01-4ced-b29e-952277fbf3d7"},{id:"14655dd5-456c-40aa-b0a2-9113005c7906",filter:"$.*",fromId:"8ca9f3ce-ee01-4ced-b29e-952277fbf3d7",toId:"1a064205-ba07-47e1-8c4f-8e95f398a484"},{id:"b45a639f-4fbf-47bf-8ded-10f66ec6f792",filter:"$",fromId:"1a064205-ba07-47e1-8c4f-8e95f398a484",toId:"772856ca-b248-42d4-870e-88cb29d13c78"},{id:"1e011651-7c7a-430e-a52e-2fc0ffe514db",filter:"$",fromId:"5c3f975e-950e-48bd-b168-bdd589dbd61f",toId:"52641fb4-fcee-41be-b8f5-d8af3da3ac8d"},{id:"42cc1c6c-5cac-4653-a8aa-8453320cdea8",filter:"$.*",fromId:"52641fb4-fcee-41be-b8f5-d8af3da3ac8d",toId:"4d4cc127-90e2-4478-abe8-42f258562e43"},{id:"faa16a48-a017-4fe2-a4e4-2ccc6db0cbb9",filter:"$",fromId:"4d4cc127-90e2-4478-abe8-42f258562e43",toId:"f5ae0fa5-acab-4e05-83fc-751379fef9e8"},{id:"ac8f1222-aff3-4f3d-ba1d-2a8ea8fc0c69",filter:"$.*",fromId:"f5ae0fa5-acab-4e05-83fc-751379fef9e8",toId:"1a064205-ba07-47e1-8c4f-8e95f398a484"},{id:"3525627a-9d60-4727-8ded-65f859997c45",filter:"$.*",fromId:"1d43ff03-0740-4ce8-9fca-d6c459704a18",toId:"f2b5e259-e916-41bd-9eda-ed593f5db96b"},{id:"f0ba74cb-a5c6-4817-b97e-224ffadfbc9f",filter:"$",fromId:"f2b5e259-e916-41bd-9eda-ed593f5db96b",toId:"4528501a-f423-4bef-acf6-1975ee7766cb"},{id:"53a48601-e158-417e-bc80-d73899a90156",filter:"$.*",fromId:"4528501a-f423-4bef-acf6-1975ee7766cb",toId:"26b1c55e-a751-4c41-a00d-dbf268342c50"},{id:"c34917fe-888d-4404-86f8-18413c4281fe",filter:"$",fromId:"26b1c55e-a751-4c41-a00d-dbf268342c50",toId:"58e67779-3f56-4819-9d47-4de2a1189d47"}]},layoutData:{cells:[{type:"pn.Place",size:{width:50,height:50},position:{x:132,y:276},angle:0,tokens:1,id:"4876d2d5-014f-4206-af09-170d900b0acc",jsonnetsType:"place",z:1,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p0"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:288,y:276},angle:0,id:"8e754bc9-f9d1-4324-9838-6ea63048046f",jsonnetsType:"transition",z:2,attrs:{".label":{fill:"#7a7e9b",text:"t0: Verfgbarkeit prfen"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"standard.Link",source:{id:"4876d2d5-014f-4206-af09-170d900b0acc",selector:".root"},target:{id:"8e754bc9-f9d1-4324-9838-6ea63048046f",selector:".root"},id:"dbf968cc-fcf7-440c-bf35-471a230c7584",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:3,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:480,y:276},angle:0,tokens:0,id:"1d43ff03-0740-4ce8-9fca-d6c459704a18",jsonnetsType:"place",z:4,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p1"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:1080,y:264},angle:0,tokens:0,id:"58e67779-3f56-4819-9d47-4de2a1189d47",jsonnetsType:"place",z:5,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p3"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:756,y:372},angle:0,tokens:0,id:"4528501a-f423-4bef-acf6-1975ee7766cb",jsonnetsType:"place",z:6,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p2"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:1200,y:636},angle:0,id:"5c3f975e-950e-48bd-b168-bdd589dbd61f",jsonnetsType:"transition",z:7,attrs:{".label":{fill:"#7a7e9b",text:"t4: Versand vorbereiten"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:732,y:144},angle:0,id:"ce46dfb7-5437-4e7a-ae61-58bfe7e5ff5c",jsonnetsType:"transition",z:8,attrs:{".label":{fill:"#7a7e9b",text:"t1: Produktion durchfhren"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:588,y:372},angle:0,id:"f2b5e259-e916-41bd-9eda-ed593f5db96b",jsonnetsType:"transition",z:9,attrs:{".label":{fill:"#7a7e9b",text:"t2: Artikel reservieren"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:900,y:372},angle:0,id:"26b1c55e-a751-4c41-a00d-dbf268342c50",jsonnetsType:"transition",z:10,attrs:{".label":{fill:"#7a7e9b",text:"t3: Artikel aus Lager holen"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:1068,y:540},angle:0,tokens:0,id:"499c4196-fac1-4280-b317-33dc927a3fed",jsonnetsType:"place",z:11,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p4"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:1068,y:732},angle:0,tokens:0,id:"52641fb4-fcee-41be-b8f5-d8af3da3ac8d",jsonnetsType:"place",z:12,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p7"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:756,y:540},angle:0,tokens:0,id:"73573b72-5df0-4564-81e8-9d4d20d92712",jsonnetsType:"place",z:13,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p5"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:456,y:540},angle:0,tokens:0,id:"8ca9f3ce-ee01-4ced-b29e-952277fbf3d7",jsonnetsType:"place",z:14,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p6"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:444,y:732},angle:0,tokens:0,id:"f5ae0fa5-acab-4e05-83fc-751379fef9e8",jsonnetsType:"place",z:15,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p8"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:132,y:624},angle:0,tokens:0,id:"772856ca-b248-42d4-870e-88cb29d13c78",jsonnetsType:"place",z:16,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"p9"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:288,y:624},angle:0,id:"1a064205-ba07-47e1-8c4f-8e95f398a484",jsonnetsType:"transition",z:17,attrs:{".label":{fill:"#7a7e9b",text:"t8: Verkaufsprozess abschlieen"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:588,y:540},angle:0,id:"1a524b1b-f347-4f08-9f43-9a2d0aac6a8e",jsonnetsType:"transition",z:18,attrs:{".label":{fill:"#7a7e9b",text:"t6: Rechnung verschicken"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:900,y:540},angle:0,id:"ff42c022-b73e-4fa2-8b9f-fbe84e514647",jsonnetsType:"transition",z:19,attrs:{".label":{fill:"#7a7e9b",text:"t5: Rechnung stellen"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"pn.Transition",size:{width:100,height:50},position:{x:732,y:732},angle:0,id:"4d4cc127-90e2-4478-abe8-42f258562e43",jsonnetsType:"transition",z:20,attrs:{".label":{fill:"#7a7e9b",text:"t7: Transportieren"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"},body:{cursor:"auto"},label:{cursor:"auto"}}},{type:"standard.Link",source:{id:"8e754bc9-f9d1-4324-9838-6ea63048046f",selector:".root"},target:{id:"1d43ff03-0740-4ce8-9fca-d6c459704a18",selector:".root"},id:"d920242a-64a3-4bd7-bfd0-01ec77be49ac",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:21,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"1d43ff03-0740-4ce8-9fca-d6c459704a18",selector:".root"},target:{id:"ce46dfb7-5437-4e7a-ae61-58bfe7e5ff5c",selector:".root"},id:"ebe47cb1-5fad-4656-9064-13164107019f",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:22,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"ce46dfb7-5437-4e7a-ae61-58bfe7e5ff5c",selector:".root"},target:{id:"58e67779-3f56-4819-9d47-4de2a1189d47",selector:".root"},id:"108d81cb-cbc8-490e-85e9-424f6f1b55f8",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:23,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"58e67779-3f56-4819-9d47-4de2a1189d47",selector:".root"},target:{id:"5c3f975e-950e-48bd-b168-bdd589dbd61f",selector:".root"},id:"bda372bd-0083-40f5-b4b2-bd708d2e4402",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:24,vertices:[{x:1248,y:289}],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"5c3f975e-950e-48bd-b168-bdd589dbd61f",selector:".root"},target:{id:"499c4196-fac1-4280-b317-33dc927a3fed",selector:".root"},id:"d342db48-dab4-4660-8847-97c73f142b83",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:25,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"499c4196-fac1-4280-b317-33dc927a3fed",selector:".root"},target:{id:"ff42c022-b73e-4fa2-8b9f-fbe84e514647",selector:".root"},id:"cfce7d5a-db54-4b2d-997a-d2ad04fa4bf0",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:26,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"ff42c022-b73e-4fa2-8b9f-fbe84e514647",selector:".root"},target:{id:"73573b72-5df0-4564-81e8-9d4d20d92712",selector:".root"},id:"16cd8671-29d6-439b-bda2-c804665b8671",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:27,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"73573b72-5df0-4564-81e8-9d4d20d92712",selector:".root"},target:{id:"1a524b1b-f347-4f08-9f43-9a2d0aac6a8e",selector:".root"},id:"e60292b6-5900-4d31-bd65-f85de6109a3f",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:28,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"1a524b1b-f347-4f08-9f43-9a2d0aac6a8e",selector:".root"},target:{id:"8ca9f3ce-ee01-4ced-b29e-952277fbf3d7",selector:".root"},id:"8fda0a53-608d-4565-90a1-d427dccabeeb",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:29,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"8ca9f3ce-ee01-4ced-b29e-952277fbf3d7",selector:".root"},target:{id:"1a064205-ba07-47e1-8c4f-8e95f398a484",selector:".root"},id:"14655dd5-456c-40aa-b0a2-9113005c7906",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:30,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"1a064205-ba07-47e1-8c4f-8e95f398a484",selector:".root"},target:{id:"772856ca-b248-42d4-870e-88cb29d13c78",selector:".root"},id:"b45a639f-4fbf-47bf-8ded-10f66ec6f792",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:31,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"5c3f975e-950e-48bd-b168-bdd589dbd61f",selector:".root"},target:{id:"52641fb4-fcee-41be-b8f5-d8af3da3ac8d",selector:".root"},id:"1e011651-7c7a-430e-a52e-2fc0ffe514db",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:32,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"52641fb4-fcee-41be-b8f5-d8af3da3ac8d",selector:".root"},target:{id:"4d4cc127-90e2-4478-abe8-42f258562e43",selector:".root"},id:"42cc1c6c-5cac-4653-a8aa-8453320cdea8",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:33,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"4d4cc127-90e2-4478-abe8-42f258562e43",selector:".root"},target:{id:"f5ae0fa5-acab-4e05-83fc-751379fef9e8",selector:".root"},id:"faa16a48-a017-4fe2-a4e4-2ccc6db0cbb9",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:34,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"f5ae0fa5-acab-4e05-83fc-751379fef9e8",selector:".root"},target:{id:"1a064205-ba07-47e1-8c4f-8e95f398a484",selector:".root"},id:"ac8f1222-aff3-4f3d-ba1d-2a8ea8fc0c69",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:35,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"1d43ff03-0740-4ce8-9fca-d6c459704a18",selector:".root"},target:{id:"f2b5e259-e916-41bd-9eda-ed593f5db96b",selector:".root"},id:"3525627a-9d60-4727-8ded-65f859997c45",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:36,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"f2b5e259-e916-41bd-9eda-ed593f5db96b",selector:".root"},target:{id:"4528501a-f423-4bef-acf6-1975ee7766cb",selector:".root"},id:"f0ba74cb-a5c6-4817-b97e-224ffadfbc9f",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:37,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"4528501a-f423-4bef-acf6-1975ee7766cb",selector:".root"},target:{id:"26b1c55e-a751-4c41-a00d-dbf268342c50",selector:".root"},id:"53a48601-e158-417e-bc80-d73899a90156",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:38,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"26b1c55e-a751-4c41-a00d-dbf268342c50",selector:".root"},target:{id:"58e67779-3f56-4819-9d47-4de2a1189d47",selector:".root"},id:"c34917fe-888d-4404-86f8-18413c4281fe",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:39,attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}}]}}}],Yde={name:gTt,defaultUIAssistMode:mTt,defaultTransitionType:vTt,defaultPlaceType:yTt,allowAutoLayout:bTt,visualisationConfig:STt,transitionTypes:_Tt,placeTypes:wTt,examples:kTt},xTt=Rt({computed:{...Mt(ta),...Mt(Zn),...Mt(ss)},methods:{close(){this.uiStateStore.showModal="none"},onUserModeClick(t){this.uiStateStore.uiAssistMode=t},setConfig(t){const e=t.target.value;Bt().clear(),this.netStore.transitions=[],this.netStore.places=[],this.netStore.importedData={},e==="default"?this.configStore.resetConfig():e==="scope3tool"?this.configStore.loadConfig(qde):e==="scenario"?this.configStore.loadConfig(Yde):e==="uploaded"&&(this.configStore.resetConfig(),this.configStore.name="uploaded")},readFile(t){Eie(t,this.importConfig)},importConfig(t){let e=JSON.parse(t);ss().loadConfig(e,!0)}}}),CTt={class:"modal is-active"},TTt=K("div",{class:"modal-background"},null,-1),ATt={class:"modal-card jsn-modal-wide"},PTt={class:"modal-card-head"},ETt=K("p",{class:"modal-card-title"},"Einstellungen",-1),OTt={class:"modal-card-body"},ITt={class:"content"},$Tt={class:"block"},FTt={class:"field"},LTt=K("label",{class:"label is-small"},"Configuration:",-1),DTt={class:"select is-small"},NTt=["selected"],MTt=["selected"],RTt=["selected"],zTt=["selected"],VTt={key:0,class:"field"},BTt=K("label",{class:"label is-small"},"Upload config file:",-1),jTt={class:"block is-flex is-justify-content-center"},HTt={class:"field has-addons"},UTt={class:"control"},WTt=K("span",null,"Assisted",-1),GTt=[WTt],qTt={class:"control"},YTt=K("span",null,"Expert",-1),KTt=[YTt];function XTt(t,e,n,r,i,o){return Oe(),je("div",CTt,[TTt,K("div",ATt,[K("header",PTt,[ETt,K("button",{class:"delete","aria-label":"close",onClick:e[0]||(e[0]=(...a)=>t.close&&t.close(...a))})]),K("section",OTt,[K("div",ITt,[K("div",$Tt,[K("div",FTt,[LTt,K("div",DTt,[K("select",{onChange:e[1]||(e[1]=(...a)=>t.setConfig&&t.setConfig(...a))},[K("option",{value:"default",selected:t.configStore.name==="default"},"Default",8,NTt),K("option",{value:"scope3tool",selected:t.configStore.name==="scope3tool"},"Scope3tool ",8,MTt),K("option",{value:"scenario",selected:t.configStore.name==="scenario"},"Scenario ",8,RTt),K("option",{value:"uploaded",selected:t.configStore.name==="uploaded"},"Upload custom ...",8,zTt)],32)])]),t.configStore.name==="uploaded"?(Oe(),je("div",VTt,[BTt,K("input",{class:"button is-small",style:{"margin-left":"15px"},type:"file",name:"configfile",onChange:e[2]||(e[2]=a=>{t.readFile(a)})},null,32)])):ct("",!0)]),K("div",jTt,[K("div",HTt,[K("p",UTt,[K("button",{onClick:e[3]||(e[3]=a=>t.onUserModeClick("assisted")),class:Wt(["button is-small",t.uiStateStore.uiAssistMode==="assisted"?"is-primary":""])},GTt,2)]),K("p",qTt,[K("button",{onClick:e[4]||(e[4]=a=>t.onUserModeClick("expert")),class:Wt(["button is-small",t.uiStateStore.uiAssistMode==="expert"?"is-primary":""])},KTt,2)])])])])])])])}const JTt=Qr(xTt,[["render",XTt]]),ZTt=Rt({props:{icon:String,mode:{type:String,required:!0},callback:Function},computed:{notActive(){return this.mode!==this.uiStateStore.mode},...Mt(ta)},methods:{onClick(){this.callback===void 0?this.uiStateStore.setMode(this.mode):(this.uiStateStore.setMode(this.mode),this.callback())}}});const QTt={class:"icon is-small"};function e3t(t,e,n,r,i,o){const a=Pt("font-awesome-icon");return Oe(),je("button",{class:Wt(["button is-primary",{"is-outlined":t.notActive}]),onClick:e[0]||(e[0]=fI((...s)=>t.onClick&&t.onClick(...s),["stop"]))},[K("span",QTt,[at(a,{icon:t.icon},null,8,["icon"])])],2)}const ld=Qr(ZTt,[["render",e3t],["__scopeId","data-v-9cb724c1"]]),t3t={id:"menu"},n3t={style:{position:"absolute",bottom:"5px",right:"5px"}},r3t={style:{position:"absolute",bottom:"5px",left:"5px"}},Kde="MODE_NONE",Bx="MODE_ADD_PLACE",jx="MODE_ADD_TRANSITION",qu="MODE_MOVE",zb="MODE_CONNECT_START",Xde="MODE_LAYOUT",i3t="MODE_EXPORT",Tp="MODE_PLAY",o3t="MODE_HELP",a3t=Rt({__name:"App",setup(t){const e=ta(),n=ss();function r(){return Zn().export()}function i(o){let a;o==="1"||(a=JSON.parse(o)),Zn().import(a)}return(o,a)=>{const s=Pt("RouterView");return Oe(),je(hn,null,[at(kWe),K("div",t3t,[at(ld,{icon:"fas fa-circle",mode:Bx}),at(ld,{icon:"fas fa-square",mode:jx}),at(ld,{icon:"fas fa-arrow-right",mode:zb}),ii(n).allowAutoLayout?(Oe(),en(ld,{key:0,icon:"fas fa-wand-magic-sparkles",mode:Xde})):ct("",!0),at(ld,{icon:"fas fa-mouse-pointer",mode:qu}),at(ld,{icon:"fas fa-play-circle",mode:Tp}),at(ld,{icon:"fas fa-file-arrow-down",mode:i3t,callback:()=>{ii(_De)(r(),"export.json","application/json")}},null,8,["callback"]),K("input",{class:"button is-primary is-outlined",style:{"margin-left":"15px"},type:"file",name:"netfile",onChange:a[0]||(a[0]=l=>{ii(Eie)(l,i)})},null,32),ii(n).examples&&ii(n).examples.length>0?(Oe(),je("button",{key:1,style:{"margin-left":"15px"},onClick:a[1]||(a[1]=fI(()=>{ii(e).setModal("examples")},["stop"])),class:"button is-primary is-outlined"}," Beispiele ")):ct("",!0),at(ld,{icon:"fas fa-question",mode:o3t,callback:()=>{ii(e).showModal="help"}},null,8,["callback"])]),ii(e).showModal==="transition"?(Oe(),en(t4t,{key:0})):ct("",!0),ii(e).showModal==="place"?(Oe(),en(nwt,{key:1})):ct("",!0),ii(e).showEditor!=="none"?(Oe(),en(oTt,{key:2})):ct("",!0),ii(e).showModal==="help"?(Oe(),en(jWe,{key:3})):ct("",!0),ii(e).showModal==="examples"?(Oe(),en(g4t,{key:4})):ct("",!0),ii(e).showModal==="settings"?(Oe(),en(JTt,{key:5})):ct("",!0),at(s),K("div",n3t,[K("a",{onClick:a[2]||(a[2]=l=>ii(Zn)().resetModel())},"Modell zurcksetzen")]),K("div",r3t,[K("a",{onClick:a[3]||(a[3]=()=>{ii(e).showModal="settings"})},"Einstellungen")])],64)}}});/*!
  * vue-router v4.2.0
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const rv=typeof window<"u";function s3t(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const hr=Object.assign;function _E(t,e){const n={};for(const r in e){const i=e[r];n[r]=yc(i)?i.map(t):t(i)}return n}const S1=()=>{},yc=Array.isArray,l3t=/\/$/,c3t=t=>t.replace(l3t,"");function wE(t,e,n="/"){let r,i={},o="",a="";const s=e.indexOf("#");let l=e.indexOf("?");return s<l&&s>=0&&(l=-1),l>-1&&(r=e.slice(0,l),o=e.slice(l+1,s>-1?s:e.length),i=t(o)),s>-1&&(r=r||e.slice(0,s),a=e.slice(s,e.length)),r=h3t(r??e,n),{fullPath:r+(o&&"?")+o+a,path:r,query:i,hash:a}}function u3t(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function VY(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function f3t(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&w0(e.matched[r],n.matched[i])&&Jde(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function w0(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Jde(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!d3t(t[n],e[n]))return!1;return!0}function d3t(t,e){return yc(t)?BY(t,e):yc(e)?BY(e,t):t===e}function BY(t,e){return yc(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function h3t(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let o=n.length-1,a,s;for(a=0;a<r.length;a++)if(s=r[a],s!==".")if(s==="..")o>1&&o--;else break;return n.slice(0,o).join("/")+"/"+r.slice(a-(a===r.length?1:0)).join("/")}var D2;(function(t){t.pop="pop",t.push="push"})(D2||(D2={}));var _1;(function(t){t.back="back",t.forward="forward",t.unknown=""})(_1||(_1={}));function p3t(t){if(!t)if(rv){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),c3t(t)}const g3t=/^[^#]+#/;function m3t(t,e){return t.replace(g3t,"#")+e}function v3t(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const sA=()=>({left:window.pageXOffset,top:window.pageYOffset});function y3t(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=v3t(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function jY(t,e){return(history.state?history.state.position-e:-1)+t}const p6=new Map;function b3t(t,e){p6.set(t,e)}function S3t(t){const e=p6.get(t);return p6.delete(t),e}let _3t=()=>location.protocol+"//"+location.host;function Zde(t,e){const{pathname:n,search:r,hash:i}=e,o=t.indexOf("#");if(o>-1){let s=i.includes(t.slice(o))?t.slice(o).length:1,l=i.slice(s);return l[0]!=="/"&&(l="/"+l),VY(l,"")}return VY(n,t)+r+i}function w3t(t,e,n,r){let i=[],o=[],a=null;const s=({state:d})=>{const h=Zde(t,location),g=n.value,y=e.value;let S=0;if(d){if(n.value=h,e.value=d,a&&a===g){a=null;return}S=y?d.position-y.position:0}else r(h);i.forEach(v=>{v(n.value,g,{delta:S,type:D2.pop,direction:S?S>0?_1.forward:_1.back:_1.unknown})})};function l(){a=n.value}function c(d){i.push(d);const h=()=>{const g=i.indexOf(d);g>-1&&i.splice(g,1)};return o.push(h),h}function u(){const{history:d}=window;d.state&&d.replaceState(hr({},d.state,{scroll:sA()}),"")}function f(){for(const d of o)d();o=[],window.removeEventListener("popstate",s),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",s),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:f}}function HY(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?sA():null}}function k3t(t){const{history:e,location:n}=window,r={value:Zde(t,n)},i={value:e.state};i.value||o(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function o(l,c,u){const f=t.indexOf("#"),d=f>-1?(n.host&&document.querySelector("base")?t:t.slice(f))+l:_3t()+t+l;try{e[u?"replaceState":"pushState"](c,"",d),i.value=c}catch(h){console.error(h),n[u?"replace":"assign"](d)}}function a(l,c){const u=hr({},e.state,HY(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});o(l,u,!0),r.value=l}function s(l,c){const u=hr({},i.value,e.state,{forward:l,scroll:sA()});o(u.current,u,!0);const f=hr({},HY(r.value,l,null),{position:u.position+1},c);o(l,f,!1),r.value=l}return{location:r,state:i,push:s,replace:a}}function x3t(t){t=p3t(t);const e=k3t(t),n=w3t(t,e.state,e.location,e.replace);function r(o,a=!0){a||n.pauseListeners(),history.go(o)}const i=hr({location:"",base:t,go:r,createHref:m3t.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function C3t(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),x3t(t)}function T3t(t){return typeof t=="string"||t&&typeof t=="object"}function Qde(t){return typeof t=="string"||typeof t=="symbol"}const cd={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},ehe=Symbol("");var UY;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(UY||(UY={}));function k0(t,e){return hr(new Error,{type:t,[ehe]:!0},e)}function Uu(t,e){return t instanceof Error&&ehe in t&&(e==null||!!(t.type&e))}const WY="[^/]+?",A3t={sensitive:!1,strict:!1,start:!0,end:!0},P3t=/[.+*?^${}()[\]/\\]/g;function E3t(t,e){const n=hr({},A3t,e),r=[];let i=n.start?"^":"";const o=[];for(const c of t){const u=c.length?[]:[90];n.strict&&!c.length&&(i+="/");for(let f=0;f<c.length;f++){const d=c[f];let h=40+(n.sensitive?.25:0);if(d.type===0)f||(i+="/"),i+=d.value.replace(P3t,"\\$&"),h+=40;else if(d.type===1){const{value:g,repeatable:y,optional:S,regexp:v}=d;o.push({name:g,repeatable:y,optional:S});const _=v||WY;if(_!==WY){h+=10;try{new RegExp(`(${_})`)}catch(C){throw new Error(`Invalid custom RegExp for param "${g}" (${_}): `+C.message)}}let x=y?`((?:${_})(?:/(?:${_}))*)`:`(${_})`;f||(x=S&&c.length<2?`(?:/${x})`:"/"+x),S&&(x+="?"),i+=x,h+=20,S&&(h+=-8),y&&(h+=-20),_===".*"&&(h+=-50)}u.push(h)}r.push(u)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const a=new RegExp(i,n.sensitive?"":"i");function s(c){const u=c.match(a),f={};if(!u)return null;for(let d=1;d<u.length;d++){const h=u[d]||"",g=o[d-1];f[g.name]=h&&g.repeatable?h.split("/"):h}return f}function l(c){let u="",f=!1;for(const d of t){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const h of d)if(h.type===0)u+=h.value;else if(h.type===1){const{value:g,repeatable:y,optional:S}=h,v=g in c?c[g]:"";if(yc(v)&&!y)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const _=yc(v)?v.join("/"):v;if(!_)if(S)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${g}"`);u+=_}}return u||"/"}return{re:a,score:r,keys:o,parse:s,stringify:l}}function O3t(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function I3t(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const o=O3t(r[n],i[n]);if(o)return o;n++}if(Math.abs(i.length-r.length)===1){if(GY(r))return 1;if(GY(i))return-1}return i.length-r.length}function GY(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const $3t={type:0,value:""},F3t=/[a-zA-Z0-9_]/;function L3t(t){if(!t)return[[]];if(t==="/")return[[$3t]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(h){throw new Error(`ERR (${n})/"${c}": ${h}`)}let n=0,r=n;const i=[];let o;function a(){o&&i.push(o),o=[]}let s=0,l,c="",u="";function f(){c&&(n===0?o.push({type:0,value:c}):n===1||n===2||n===3?(o.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function d(){c+=l}for(;s<t.length;){if(l=t[s++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&f(),a()):l===":"?(f(),n=1):d();break;case 4:d(),n=r;break;case 1:l==="("?n=2:F3t.test(l)?d():(f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&s--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&s--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),f(),a(),i}function D3t(t,e,n){const r=E3t(L3t(t.path),n),i=hr(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function N3t(t,e){const n=[],r=new Map;e=KY({strict:!1,end:!0,sensitive:!1},e);function i(u){return r.get(u)}function o(u,f,d){const h=!d,g=M3t(u);g.aliasOf=d&&d.record;const y=KY(e,u),S=[g];if("alias"in u){const x=typeof u.alias=="string"?[u.alias]:u.alias;for(const C of x)S.push(hr({},g,{components:d?d.record.components:g.components,path:C,aliasOf:d?d.record:g}))}let v,_;for(const x of S){const{path:C}=x;if(f&&C[0]!=="/"){const k=f.record.path,m=k[k.length-1]==="/"?"":"/";x.path=f.record.path+(C&&m+C)}if(v=D3t(x,f,y),d?d.alias.push(v):(_=_||v,_!==v&&_.alias.push(v),h&&u.name&&!YY(v)&&a(u.name)),g.children){const k=g.children;for(let m=0;m<k.length;m++)o(k[m],v,d&&d.children[m])}d=d||v,(v.record.components&&Object.keys(v.record.components).length||v.record.name||v.record.redirect)&&l(v)}return _?()=>{a(_)}:S1}function a(u){if(Qde(u)){const f=r.get(u);f&&(r.delete(u),n.splice(n.indexOf(f),1),f.children.forEach(a),f.alias.forEach(a))}else{const f=n.indexOf(u);f>-1&&(n.splice(f,1),u.record.name&&r.delete(u.record.name),u.children.forEach(a),u.alias.forEach(a))}}function s(){return n}function l(u){let f=0;for(;f<n.length&&I3t(u,n[f])>=0&&(u.record.path!==n[f].record.path||!the(u,n[f]));)f++;n.splice(f,0,u),u.record.name&&!YY(u)&&r.set(u.record.name,u)}function c(u,f){let d,h={},g,y;if("name"in u&&u.name){if(d=r.get(u.name),!d)throw k0(1,{location:u});y=d.record.name,h=hr(qY(f.params,d.keys.filter(_=>!_.optional).map(_=>_.name)),u.params&&qY(u.params,d.keys.map(_=>_.name))),g=d.stringify(h)}else if("path"in u)g=u.path,d=n.find(_=>_.re.test(g)),d&&(h=d.parse(g),y=d.record.name);else{if(d=f.name?r.get(f.name):n.find(_=>_.re.test(f.path)),!d)throw k0(1,{location:u,currentLocation:f});y=d.record.name,h=hr({},f.params,u.params),g=d.stringify(h)}const S=[];let v=d;for(;v;)S.unshift(v.record),v=v.parent;return{name:y,path:g,params:h,matched:S,meta:z3t(S)}}return t.forEach(u=>o(u)),{addRoute:o,resolve:c,removeRoute:a,getRoutes:s,getRecordMatcher:i}}function qY(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function M3t(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:R3t(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function R3t(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="boolean"?n:n[r];return e}function YY(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function z3t(t){return t.reduce((e,n)=>hr(e,n.meta),{})}function KY(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function the(t,e){return e.children.some(n=>n===t||the(t,n))}const nhe=/#/g,V3t=/&/g,B3t=/\//g,j3t=/=/g,H3t=/\?/g,rhe=/\+/g,U3t=/%5B/g,W3t=/%5D/g,ihe=/%5E/g,G3t=/%60/g,ohe=/%7B/g,q3t=/%7C/g,ahe=/%7D/g,Y3t=/%20/g;function mN(t){return encodeURI(""+t).replace(q3t,"|").replace(U3t,"[").replace(W3t,"]")}function K3t(t){return mN(t).replace(ohe,"{").replace(ahe,"}").replace(ihe,"^")}function g6(t){return mN(t).replace(rhe,"%2B").replace(Y3t,"+").replace(nhe,"%23").replace(V3t,"%26").replace(G3t,"`").replace(ohe,"{").replace(ahe,"}").replace(ihe,"^")}function X3t(t){return g6(t).replace(j3t,"%3D")}function J3t(t){return mN(t).replace(nhe,"%23").replace(H3t,"%3F")}function Z3t(t){return t==null?"":J3t(t).replace(B3t,"%2F")}function JC(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function Q3t(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const o=r[i].replace(rhe," "),a=o.indexOf("="),s=JC(a<0?o:o.slice(0,a)),l=a<0?null:JC(o.slice(a+1));if(s in e){let c=e[s];yc(c)||(c=e[s]=[c]),c.push(l)}else e[s]=l}return e}function XY(t){let e="";for(let n in t){const r=t[n];if(n=X3t(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(yc(r)?r.map(o=>o&&g6(o)):[r&&g6(r)]).forEach(o=>{o!==void 0&&(e+=(e.length?"&":"")+n,o!=null&&(e+="="+o))})}return e}function eAt(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=yc(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const tAt=Symbol(""),JY=Symbol(""),vN=Symbol(""),she=Symbol(""),m6=Symbol("");function yb(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t,reset:n}}function vd(t,e,n,r,i){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,s)=>{const l=f=>{f===!1?s(k0(4,{from:n,to:e})):f instanceof Error?s(f):T3t(f)?s(k0(2,{from:e,to:f})):(o&&r.enterCallbacks[i]===o&&typeof f=="function"&&o.push(f),a())},c=t.call(r&&r.instances[i],e,n,l);let u=Promise.resolve(c);t.length<3&&(u=u.then(l)),u.catch(f=>s(f))})}function kE(t,e,n,r){const i=[];for(const o of t)for(const a in o.components){let s=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(nAt(s)){const c=(s.__vccOpts||s)[e];c&&i.push(vd(c,n,r,o,a))}else{let l=s();i.push(()=>l.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const u=s3t(c)?c.default:c;o.components[a]=u;const d=(u.__vccOpts||u)[e];return d&&vd(d,n,r,o,a)()}))}}return i}function nAt(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function ZY(t){const e=Ni(vN),n=Ni(she),r=Fn(()=>e.resolve(ii(t.to))),i=Fn(()=>{const{matched:l}=r.value,{length:c}=l,u=l[c-1],f=n.matched;if(!u||!f.length)return-1;const d=f.findIndex(w0.bind(null,u));if(d>-1)return d;const h=QY(l[c-2]);return c>1&&QY(u)===h&&f[f.length-1].path!==h?f.findIndex(w0.bind(null,l[c-2])):d}),o=Fn(()=>i.value>-1&&aAt(n.params,r.value.params)),a=Fn(()=>i.value>-1&&i.value===n.matched.length-1&&Jde(n.params,r.value.params));function s(l={}){return oAt(l)?e[ii(t.replace)?"replace":"push"](ii(t.to)).catch(S1):Promise.resolve()}return{route:r,href:Fn(()=>r.value.href),isActive:o,isExactActive:a,navigate:s}}const rAt=Rt({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:ZY,setup(t,{slots:e}){const n=hh(ZY(t)),{options:r}=Ni(vN),i=Fn(()=>({[eK(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[eK(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const o=e.default&&e.default(n);return t.custom?o:Xd("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},o)}}}),iAt=rAt;function oAt(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function aAt(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!yc(i)||i.length!==r.length||r.some((o,a)=>o!==i[a]))return!1}return!0}function QY(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const eK=(t,e,n)=>t??e??n,sAt=Rt({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Ni(m6),i=Fn(()=>t.route||r.value),o=Ni(JY,0),a=Fn(()=>{let c=ii(o);const{matched:u}=i.value;let f;for(;(f=u[c])&&!f.components;)c++;return c}),s=Fn(()=>i.value.matched[a.value]);Wb(JY,Fn(()=>a.value+1)),Wb(tAt,s),Wb(m6,i);const l=Tl();return ki(()=>[l.value,s.value,t.name],([c,u,f],[d,h,g])=>{u&&(u.instances[f]=c,h&&h!==u&&c&&c===d&&(u.leaveGuards.size||(u.leaveGuards=h.leaveGuards),u.updateGuards.size||(u.updateGuards=h.updateGuards))),c&&u&&(!h||!w0(u,h)||!d)&&(u.enterCallbacks[f]||[]).forEach(y=>y(c))},{flush:"post"}),()=>{const c=i.value,u=t.name,f=s.value,d=f&&f.components[u];if(!d)return tK(n.default,{Component:d,route:c});const h=f.props[u],g=h?h===!0?c.params:typeof h=="function"?h(c):h:null,S=Xd(d,hr({},g,e,{onVnodeUnmounted:v=>{v.component.isUnmounted&&(f.instances[u]=null)},ref:l}));return tK(n.default,{Component:S,route:c})||S}}});function tK(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const lAt=sAt;function cAt(t){const e=N3t(t.routes,t),n=t.parseQuery||Q3t,r=t.stringifyQuery||XY,i=t.history,o=yb(),a=yb(),s=yb(),l=ru(cd);let c=cd;rv&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=_E.bind(null,te=>""+te),f=_E.bind(null,Z3t),d=_E.bind(null,JC);function h(te,ue){let ce,fe;return Qde(te)?(ce=e.getRecordMatcher(te),fe=ue):fe=te,e.addRoute(fe,ce)}function g(te){const ue=e.getRecordMatcher(te);ue&&e.removeRoute(ue)}function y(){return e.getRoutes().map(te=>te.record)}function S(te){return!!e.getRecordMatcher(te)}function v(te,ue){if(ue=hr({},ue||l.value),typeof te=="string"){const O=wE(n,te,ue.path),M=e.resolve({path:O.path},ue),H=i.createHref(O.fullPath);return hr(O,M,{params:d(M.params),hash:JC(O.hash),redirectedFrom:void 0,href:H})}let ce;if("path"in te)ce=hr({},te,{path:wE(n,te.path,ue.path).path});else{const O=hr({},te.params);for(const M in O)O[M]==null&&delete O[M];ce=hr({},te,{params:f(O)}),ue.params=f(ue.params)}const fe=e.resolve(ce,ue),ye=te.hash||"";fe.params=u(d(fe.params));const j=u3t(r,hr({},te,{hash:K3t(ye),path:fe.path})),Y=i.createHref(j);return hr({fullPath:j,hash:ye,query:r===XY?eAt(te.query):te.query||{}},fe,{redirectedFrom:void 0,href:Y})}function _(te){return typeof te=="string"?wE(n,te,l.value.path):hr({},te)}function x(te,ue){if(c!==te)return k0(8,{from:ue,to:te})}function C(te){return T(te)}function k(te){return C(hr(_(te),{replace:!0}))}function m(te){const ue=te.matched[te.matched.length-1];if(ue&&ue.redirect){const{redirect:ce}=ue;let fe=typeof ce=="function"?ce(te):ce;return typeof fe=="string"&&(fe=fe.includes("?")||fe.includes("#")?fe=_(fe):{path:fe},fe.params={}),hr({query:te.query,hash:te.hash,params:"path"in fe?{}:te.params},fe)}}function T(te,ue){const ce=c=v(te),fe=l.value,ye=te.state,j=te.force,Y=te.replace===!0,O=m(ce);if(O)return T(hr(_(O),{state:typeof O=="object"?hr({},ye,O.state):ye,force:j,replace:Y}),ue||ce);const M=ce;M.redirectedFrom=ue;let H;return!j&&f3t(r,fe,ce)&&(H=k0(16,{to:M,from:fe}),se(fe,fe,!0,!1)),(H?Promise.resolve(H):D(M,fe)).catch(Q=>Uu(Q)?Uu(Q,2)?Q:Se(Q):Ae(Q,M,fe)).then(Q=>{if(Q){if(Uu(Q,2))return T(hr({replace:Y},_(Q.to),{state:typeof Q.to=="object"?hr({},ye,Q.to.state):ye,force:j}),ue||M)}else Q=R(M,fe,!0,Y,ye);return F(M,fe,Q),Q})}function E(te,ue){const ce=x(te,ue);return ce?Promise.reject(ce):Promise.resolve()}function I(te){const ue=V.values().next().value;return ue&&typeof ue.runWithContext=="function"?ue.runWithContext(te):te()}function D(te,ue){let ce;const[fe,ye,j]=uAt(te,ue);ce=kE(fe.reverse(),"beforeRouteLeave",te,ue);for(const O of fe)O.leaveGuards.forEach(M=>{ce.push(vd(M,te,ue))});const Y=E.bind(null,te,ue);return ce.push(Y),ae(ce).then(()=>{ce=[];for(const O of o.list())ce.push(vd(O,te,ue));return ce.push(Y),ae(ce)}).then(()=>{ce=kE(ye,"beforeRouteUpdate",te,ue);for(const O of ye)O.updateGuards.forEach(M=>{ce.push(vd(M,te,ue))});return ce.push(Y),ae(ce)}).then(()=>{ce=[];for(const O of te.matched)if(O.beforeEnter&&!ue.matched.includes(O))if(yc(O.beforeEnter))for(const M of O.beforeEnter)ce.push(vd(M,te,ue));else ce.push(vd(O.beforeEnter,te,ue));return ce.push(Y),ae(ce)}).then(()=>(te.matched.forEach(O=>O.enterCallbacks={}),ce=kE(j,"beforeRouteEnter",te,ue),ce.push(Y),ae(ce))).then(()=>{ce=[];for(const O of a.list())ce.push(vd(O,te,ue));return ce.push(Y),ae(ce)}).catch(O=>Uu(O,8)?O:Promise.reject(O))}function F(te,ue,ce){for(const fe of s.list())I(()=>fe(te,ue,ce))}function R(te,ue,ce,fe,ye){const j=x(te,ue);if(j)return j;const Y=ue===cd,O=rv?history.state:{};ce&&(fe||Y?i.replace(te.fullPath,hr({scroll:Y&&O&&O.scroll},ye)):i.push(te.fullPath,ye)),l.value=te,se(te,ue,ce,Y),Se()}let z;function B(){z||(z=i.listen((te,ue,ce)=>{if(!W.listening)return;const fe=v(te),ye=m(fe);if(ye){T(hr(ye,{replace:!0}),fe).catch(S1);return}c=fe;const j=l.value;rv&&b3t(jY(j.fullPath,ce.delta),sA()),D(fe,j).catch(Y=>Uu(Y,12)?Y:Uu(Y,2)?(T(Y.to,fe).then(O=>{Uu(O,20)&&!ce.delta&&ce.type===D2.pop&&i.go(-1,!1)}).catch(S1),Promise.reject()):(ce.delta&&i.go(-ce.delta,!1),Ae(Y,fe,j))).then(Y=>{Y=Y||R(fe,j,!1),Y&&(ce.delta&&!Uu(Y,8)?i.go(-ce.delta,!1):ce.type===D2.pop&&Uu(Y,20)&&i.go(-1,!1)),F(fe,j,Y)}).catch(S1)}))}let ie=yb(),oe=yb(),_e;function Ae(te,ue,ce){Se(te);const fe=oe.list();return fe.length?fe.forEach(ye=>ye(te,ue,ce)):console.error(te),Promise.reject(te)}function Pe(){return _e&&l.value!==cd?Promise.resolve():new Promise((te,ue)=>{ie.add([te,ue])})}function Se(te){return _e||(_e=!te,B(),ie.list().forEach(([ue,ce])=>te?ce(te):ue()),ie.reset()),te}function se(te,ue,ce,fe){const{scrollBehavior:ye}=t;if(!rv||!ye)return Promise.resolve();const j=!ce&&S3t(jY(te.fullPath,0))||(fe||!ce)&&history.state&&history.state.scroll||null;return P0().then(()=>ye(te,ue,j)).then(Y=>Y&&y3t(Y)).catch(Y=>Ae(Y,te,ue))}const ne=te=>i.go(te);let J;const V=new Set,W={currentRoute:l,listening:!0,addRoute:h,removeRoute:g,hasRoute:S,getRoutes:y,resolve:v,options:t,push:C,replace:k,go:ne,back:()=>ne(-1),forward:()=>ne(1),beforeEach:o.add,beforeResolve:a.add,afterEach:s.add,onError:oe.add,isReady:Pe,install(te){const ue=this;te.component("RouterLink",iAt),te.component("RouterView",lAt),te.config.globalProperties.$router=ue,Object.defineProperty(te.config.globalProperties,"$route",{enumerable:!0,get:()=>ii(l)}),rv&&!J&&l.value===cd&&(J=!0,C(i.location).catch(ye=>{}));const ce={};for(const ye in cd)ce[ye]=Fn(()=>l.value[ye]);te.provide(vN,ue),te.provide(she,hh(ce)),te.provide(m6,l);const fe=te.unmount;V.add(te),te.unmount=function(){V.delete(te),V.size<1&&(c=cd,z&&z(),z=null,l.value=cd,J=!1,_e=!1),fe()}}};function ae(te){return te.reduce((ue,ce)=>ue.then(()=>I(ce)),Promise.resolve())}return W}function uAt(t,e){const n=[],r=[],i=[],o=Math.max(e.matched.length,t.matched.length);for(let a=0;a<o;a++){const s=e.matched[a];s&&(t.matched.find(c=>w0(c,s))?r.push(s):n.push(s));const l=t.matched[a];l&&(e.matched.find(c=>w0(c,l))||i.push(l))}return[n,r,i]}const fAt=Rt({computed:{...Mt(ss),...Mt(Zn)},mounted(){const t=this.$route.params.configID;t==="scope3tool"?this.configStore.loadConfig(qde):t==="scenario"&&this.configStore.loadConfig(Yde);const e=this.$route.params.modelID;if(e){const n=this.configStore.examples.find(r=>r.name===e);n&&this.netStore.import(n.net)}}});function dAt(t,e,n,r,i,o){return null}const nK=Qr(fAt,[["render",dAt]]),hAt=cAt({history:C3t("/"),routes:[{path:"/:configID",name:"config",component:nK},{path:"/:configID/:modelID",name:"model",component:nK}]});Hbe.add(p3e,u3e,h3e,m3e,o3e,s3e,t3e,c3e,w3e,b3e,A3e,QTe,r3e,d3e,g3e,v3e,f3e,E3e,x3e,P3e,n3e,C3e,k3e,_3e,S3e);const YS=sJ(a3t).component("font-awesome-icon",g_e);YS.use(hAt);YS.use(I3e());YS.use(JTe,{extensions:[]});YS.component("v-chart",J6e);YS.mount("#app");
