var lW=Object.defineProperty;var uW=(t,e,n)=>e in t?lW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Rn=(t,e,n)=>(uW(t,typeof e!="symbol"?e+"":e,n),n),Gx=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var et=(t,e,n)=>(Gx(t,e,"read from private field"),n?n.call(t):e.get(t)),wr=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},Mo=(t,e,n,r)=>(Gx(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);var Tp=(t,e,n,r)=>({set _(i){Mo(t,e,i,n)},get _(){return et(t,e,r)}}),La=(t,e,n)=>(Gx(t,e,"access private method"),n);function VR(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function i2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?i2(Object(n),!0).forEach(function(r){li(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Yy(t){"@babel/helpers - typeof";return Yy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yy(t)}function cW(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function fW(t,e,n){return e&&s2(t.prototype,e),n&&s2(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function li(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TA(t,e){return dW(t)||gW(t,e)||BR(t,e)||vW()}function Em(t){return hW(t)||pW(t)||BR(t)||mW()}function hW(t){if(Array.isArray(t))return dE(t)}function dW(t){if(Array.isArray(t))return t}function pW(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function gW(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,a;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw a}}return r}}function BR(t,e){if(t){if(typeof t=="string")return dE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dE(t,e)}}function dE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function mW(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o2=function(){},MA={},jR={},zR=null,HR={mark:o2,measure:o2};try{typeof window<"u"&&(MA=window),typeof document<"u"&&(jR=document),typeof MutationObserver<"u"&&(zR=MutationObserver),typeof performance<"u"&&(HR=performance)}catch{}var yW=MA.navigator||{},a2=yW.userAgent,l2=a2===void 0?"":a2,Xu=MA,mr=jR,u2=zR,t0=HR;Xu.document;var ru=!!mr.documentElement&&!!mr.head&&typeof mr.addEventListener=="function"&&typeof mr.createElement=="function",UR=~l2.indexOf("MSIE")||~l2.indexOf("Trident/"),n0,r0,i0,s0,o0,Jl="___FONT_AWESOME___",pE=16,qR="fa",WR="svg-inline--fa",kf="data-fa-i2svg",gE="data-fa-pseudo-element",bW="data-fa-pseudo-element-pending",NA="data-prefix",IA="data-icon",c2="fontawesome-i2svg",wW="async",xW=["HTML","HEAD","STYLE","SCRIPT"],GR=function(){try{return!0}catch{return!1}}(),pr="classic",$r="sharp",$A=[pr,$r];function _m(t){return new Proxy(t,{get:function(n,r){return r in n?n[r]:n[pr]}})}var Cg=_m((n0={},li(n0,pr,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit"}),li(n0,$r,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light"}),n0)),Pg=_m((r0={},li(r0,pr,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),li(r0,$r,{solid:"fass",regular:"fasr",light:"fasl"}),r0)),Og=_m((i0={},li(i0,pr,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),li(i0,$r,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light"}),i0)),SW=_m((s0={},li(s0,pr,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),li(s0,$r,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl"}),s0)),EW=/fa(s|r|l|t|d|b|k|ss|sr|sl)?[\-\ ]/,KR="fa-layers-text",_W=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,AW=_m((o0={},li(o0,pr,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),li(o0,$r,{900:"fass",400:"fasr",300:"fasl"}),o0)),YR=[1,2,3,4,5,6,7,8,9,10],kW=YR.concat([11,12,13,14,15,16,17,18,19,20]),CW=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],sf={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},Tg=new Set;Object.keys(Pg[pr]).map(Tg.add.bind(Tg));Object.keys(Pg[$r]).map(Tg.add.bind(Tg));var PW=[].concat($A,Em(Tg),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",sf.GROUP,sf.SWAP_OPACITY,sf.PRIMARY,sf.SECONDARY]).concat(YR.map(function(t){return"".concat(t,"x")})).concat(kW.map(function(t){return"w-".concat(t)})),ig=Xu.FontAwesomeConfig||{};function OW(t){var e=mr.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}function TW(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}if(mr&&typeof mr.querySelector=="function"){var MW=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];MW.forEach(function(t){var e=TA(t,2),n=e[0],r=e[1],i=TW(OW(n));i!=null&&(ig[r]=i)})}var JR={styleDefault:"solid",familyDefault:"classic",cssPrefix:qR,replacementClass:WR,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};ig.familyPrefix&&(ig.cssPrefix=ig.familyPrefix);var yd=pt(pt({},JR),ig);yd.autoReplaceSvg||(yd.observeMutations=!1);var _t={};Object.keys(JR).forEach(function(t){Object.defineProperty(_t,t,{enumerable:!0,set:function(n){yd[t]=n,sg.forEach(function(r){return r(_t)})},get:function(){return yd[t]}})});Object.defineProperty(_t,"familyPrefix",{enumerable:!0,set:function(e){yd.cssPrefix=e,sg.forEach(function(n){return n(_t)})},get:function(){return yd.cssPrefix}});Xu.FontAwesomeConfig=_t;var sg=[];function NW(t){return sg.push(t),function(){sg.splice(sg.indexOf(t),1)}}var Su=pE,Xa={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function IW(t){if(!(!t||!ru)){var e=mr.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;for(var n=mr.head.childNodes,r=null,i=n.length-1;i>-1;i--){var s=n[i],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(r=s)}return mr.head.insertBefore(e,r),t}}var $W="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function Mg(){for(var t=12,e="";t-- >0;)e+=$W[Math.random()*62|0];return e}function Vd(t){for(var e=[],n=(t||[]).length>>>0;n--;)e[n]=t[n];return e}function RA(t){return t.classList?Vd(t.classList):(t.getAttribute("class")||"").split(" ").filter(function(e){return e})}function XR(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function RW(t){return Object.keys(t||{}).reduce(function(e,n){return e+"".concat(n,'="').concat(XR(t[n]),'" ')},"").trim()}function h1(t){return Object.keys(t||{}).reduce(function(e,n){return e+"".concat(n,": ").concat(t[n].trim(),";")},"")}function LA(t){return t.size!==Xa.size||t.x!==Xa.x||t.y!==Xa.y||t.rotate!==Xa.rotate||t.flipX||t.flipY}function LW(t){var e=t.transform,n=t.containerWidth,r=t.iconWidth,i={transform:"translate(".concat(n/2," 256)")},s="translate(".concat(e.x*32,", ").concat(e.y*32,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)"),l={transform:"".concat(s," ").concat(o," ").concat(a)},u={transform:"translate(".concat(r/2*-1," -256)")};return{outer:i,inner:l,path:u}}function DW(t){var e=t.transform,n=t.width,r=n===void 0?pE:n,i=t.height,s=i===void 0?pE:i,o=t.startCentered,a=o===void 0?!1:o,l="";return a&&UR?l+="translate(".concat(e.x/Su-r/2,"em, ").concat(e.y/Su-s/2,"em) "):a?l+="translate(calc(-50% + ".concat(e.x/Su,"em), calc(-50% + ").concat(e.y/Su,"em)) "):l+="translate(".concat(e.x/Su,"em, ").concat(e.y/Su,"em) "),l+="scale(".concat(e.size/Su*(e.flipX?-1:1),", ").concat(e.size/Su*(e.flipY?-1:1),") "),l+="rotate(".concat(e.rotate,"deg) "),l}var FW=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    -webkit-transition-delay: 0s;
            transition-delay: 0s;
    -webkit-transition-duration: 0s;
            transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function ZR(){var t=qR,e=WR,n=_t.cssPrefix,r=_t.replacementClass,i=FW;if(n!==t||r!==e){var s=new RegExp("\\.".concat(t,"\\-"),"g"),o=new RegExp("\\--".concat(t,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");i=i.replace(s,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(a,".".concat(r))}return i}var f2=!1;function Kx(){_t.autoAddCss&&!f2&&(IW(ZR()),f2=!0)}var VW={mixout:function(){return{dom:{css:ZR,insertCss:Kx}}},hooks:function(){return{beforeDOMElementCreation:function(){Kx()},beforeI2svg:function(){Kx()}}}},Xl=Xu||{};Xl[Jl]||(Xl[Jl]={});Xl[Jl].styles||(Xl[Jl].styles={});Xl[Jl].hooks||(Xl[Jl].hooks={});Xl[Jl].shims||(Xl[Jl].shims=[]);var ma=Xl[Jl],QR=[],BW=function t(){mr.removeEventListener("DOMContentLoaded",t),Jy=1,QR.map(function(e){return e()})},Jy=!1;ru&&(Jy=(mr.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(mr.readyState),Jy||mr.addEventListener("DOMContentLoaded",BW));function jW(t){ru&&(Jy?setTimeout(t,0):QR.push(t))}function Am(t){var e=t.tag,n=t.attributes,r=n===void 0?{}:n,i=t.children,s=i===void 0?[]:i;return typeof t=="string"?XR(t):"<".concat(e," ").concat(RW(r),">").concat(s.map(Am).join(""),"</").concat(e,">")}function h2(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}var zW=function(e,n){return function(r,i,s,o){return e.call(n,r,i,s,o)}},Yx=function(e,n,r,i){var s=Object.keys(e),o=s.length,a=i!==void 0?zW(n,i):n,l,u,c;for(r===void 0?(l=1,c=e[s[0]]):(l=0,c=r);l<o;l++)u=s[l],c=a(c,e[u],u,e);return c};function HW(t){for(var e=[],n=0,r=t.length;n<r;){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var s=t.charCodeAt(n++);(s&64512)==56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),n--)}else e.push(i)}return e}function mE(t){var e=HW(t);return e.length===1?e[0].toString(16):null}function UW(t,e){var n=t.length,r=t.charCodeAt(e),i;return r>=55296&&r<=56319&&n>e+1&&(i=t.charCodeAt(e+1),i>=56320&&i<=57343)?(r-55296)*1024+i-56320+65536:r}function d2(t){return Object.keys(t).reduce(function(e,n){var r=t[n],i=!!r.icon;return i?e[r.iconName]=r.icon:e[n]=r,e},{})}function vE(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.skipHooks,i=r===void 0?!1:r,s=d2(e);typeof ma.hooks.addPack=="function"&&!i?ma.hooks.addPack(t,d2(e)):ma.styles[t]=pt(pt({},ma.styles[t]||{}),s),t==="fas"&&vE("fa",e)}var a0,l0,u0,Fh=ma.styles,qW=ma.shims,WW=(a0={},li(a0,pr,Object.values(Og[pr])),li(a0,$r,Object.values(Og[$r])),a0),DA=null,eL={},tL={},nL={},rL={},iL={},GW=(l0={},li(l0,pr,Object.keys(Cg[pr])),li(l0,$r,Object.keys(Cg[$r])),l0);function KW(t){return~PW.indexOf(t)}function YW(t,e){var n=e.split("-"),r=n[0],i=n.slice(1).join("-");return r===t&&i!==""&&!KW(i)?i:null}var sL=function(){var e=function(s){return Yx(Fh,function(o,a,l){return o[l]=Yx(a,s,{}),o},{})};eL=e(function(i,s,o){if(s[3]&&(i[s[3]]=o),s[2]){var a=s[2].filter(function(l){return typeof l=="number"});a.forEach(function(l){i[l.toString(16)]=o})}return i}),tL=e(function(i,s,o){if(i[o]=o,s[2]){var a=s[2].filter(function(l){return typeof l=="string"});a.forEach(function(l){i[l]=o})}return i}),iL=e(function(i,s,o){var a=s[2];return i[o]=o,a.forEach(function(l){i[l]=o}),i});var n="far"in Fh||_t.autoFetchSvg,r=Yx(qW,function(i,s){var o=s[0],a=s[1],l=s[2];return a==="far"&&!n&&(a="fas"),typeof o=="string"&&(i.names[o]={prefix:a,iconName:l}),typeof o=="number"&&(i.unicodes[o.toString(16)]={prefix:a,iconName:l}),i},{names:{},unicodes:{}});nL=r.names,rL=r.unicodes,DA=d1(_t.styleDefault,{family:_t.familyDefault})};NW(function(t){DA=d1(t.styleDefault,{family:_t.familyDefault})});sL();function FA(t,e){return(eL[t]||{})[e]}function JW(t,e){return(tL[t]||{})[e]}function of(t,e){return(iL[t]||{})[e]}function oL(t){return nL[t]||{prefix:null,iconName:null}}function XW(t){var e=rL[t],n=FA("fas",t);return e||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function Zu(){return DA}var VA=function(){return{prefix:null,iconName:null,rest:[]}};function d1(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.family,r=n===void 0?pr:n,i=Cg[r][t],s=Pg[r][t]||Pg[r][i],o=t in ma.styles?t:null;return s||o||null}var p2=(u0={},li(u0,pr,Object.keys(Og[pr])),li(u0,$r,Object.keys(Og[$r])),u0);function p1(t){var e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.skipLookups,i=r===void 0?!1:r,s=(e={},li(e,pr,"".concat(_t.cssPrefix,"-").concat(pr)),li(e,$r,"".concat(_t.cssPrefix,"-").concat($r)),e),o=null,a=pr;(t.includes(s[pr])||t.some(function(u){return p2[pr].includes(u)}))&&(a=pr),(t.includes(s[$r])||t.some(function(u){return p2[$r].includes(u)}))&&(a=$r);var l=t.reduce(function(u,c){var f=YW(_t.cssPrefix,c);if(Fh[c]?(c=WW[a].includes(c)?SW[a][c]:c,o=c,u.prefix=c):GW[a].indexOf(c)>-1?(o=c,u.prefix=d1(c,{family:a})):f?u.iconName=f:c!==_t.replacementClass&&c!==s[pr]&&c!==s[$r]&&u.rest.push(c),!i&&u.prefix&&u.iconName){var p=o==="fa"?oL(u.iconName):{},v=of(u.prefix,u.iconName);p.prefix&&(o=null),u.iconName=p.iconName||v||u.iconName,u.prefix=p.prefix||u.prefix,u.prefix==="far"&&!Fh.far&&Fh.fas&&!_t.autoFetchSvg&&(u.prefix="fas")}return u},VA());return(t.includes("fa-brands")||t.includes("fab"))&&(l.prefix="fab"),(t.includes("fa-duotone")||t.includes("fad"))&&(l.prefix="fad"),!l.prefix&&a===$r&&(Fh.fass||_t.autoFetchSvg)&&(l.prefix="fass",l.iconName=of(l.prefix,l.iconName)||l.iconName),(l.prefix==="fa"||o==="fa")&&(l.prefix=Zu()||"fas"),l}var ZW=function(){function t(){cW(this,t),this.definitions={}}return fW(t,[{key:"add",value:function(){for(var n=this,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var o=i.reduce(this._pullDefinitions,{});Object.keys(o).forEach(function(a){n.definitions[a]=pt(pt({},n.definitions[a]||{}),o[a]),vE(a,o[a]);var l=Og[pr][a];l&&vE(l,o[a]),sL()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(n,r){var i=r.prefix&&r.iconName&&r.icon?{0:r}:r;return Object.keys(i).map(function(s){var o=i[s],a=o.prefix,l=o.iconName,u=o.icon,c=u[2];n[a]||(n[a]={}),c.length>0&&c.forEach(function(f){typeof f=="string"&&(n[a][f]=u)}),n[a][l]=u}),n}}]),t}(),g2=[],Vh={},Gh={},QW=Object.keys(Gh);function eG(t,e){var n=e.mixoutsTo;return g2=t,Vh={},Object.keys(Gh).forEach(function(r){QW.indexOf(r)===-1&&delete Gh[r]}),g2.forEach(function(r){var i=r.mixout?r.mixout():{};if(Object.keys(i).forEach(function(o){typeof i[o]=="function"&&(n[o]=i[o]),Yy(i[o])==="object"&&Object.keys(i[o]).forEach(function(a){n[o]||(n[o]={}),n[o][a]=i[o][a]})}),r.hooks){var s=r.hooks();Object.keys(s).forEach(function(o){Vh[o]||(Vh[o]=[]),Vh[o].push(s[o])})}r.provides&&r.provides(Gh)}),n}function yE(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var s=Vh[t]||[];return s.forEach(function(o){e=o.apply(null,[e].concat(r))}),e}function Cf(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=Vh[t]||[];i.forEach(function(s){s.apply(null,n)})}function Zl(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);return Gh[t]?Gh[t].apply(null,e):void 0}function bE(t){t.prefix==="fa"&&(t.prefix="fas");var e=t.iconName,n=t.prefix||Zu();if(e)return e=of(n,e)||e,h2(aL.definitions,n,e)||h2(ma.styles,n,e)}var aL=new ZW,tG=function(){_t.autoReplaceSvg=!1,_t.observeMutations=!1,Cf("noAuto")},nG={i2svg:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ru?(Cf("beforeI2svg",e),Zl("pseudoElements2svg",e),Zl("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.autoReplaceSvgRoot;_t.autoReplaceSvg===!1&&(_t.autoReplaceSvg=!0),_t.observeMutations=!0,jW(function(){iG({autoReplaceSvgRoot:n}),Cf("watch",e)})}},rG={icon:function(e){if(e===null)return null;if(Yy(e)==="object"&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:of(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&e.length===2){var n=e[1].indexOf("fa-")===0?e[1].slice(3):e[1],r=d1(e[0]);return{prefix:r,iconName:of(r,n)||n}}if(typeof e=="string"&&(e.indexOf("".concat(_t.cssPrefix,"-"))>-1||e.match(EW))){var i=p1(e.split(" "),{skipLookups:!0});return{prefix:i.prefix||Zu(),iconName:of(i.prefix,i.iconName)||i.iconName}}if(typeof e=="string"){var s=Zu();return{prefix:s,iconName:of(s,e)||e}}}},vo={noAuto:tG,config:_t,dom:nG,parse:rG,library:aL,findIconDefinition:bE,toHtml:Am},iG=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.autoReplaceSvgRoot,r=n===void 0?mr:n;(Object.keys(ma.styles).length>0||_t.autoFetchSvg)&&ru&&_t.autoReplaceSvg&&vo.dom.i2svg({node:r})};function g1(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(function(r){return Am(r)})}}),Object.defineProperty(t,"node",{get:function(){if(ru){var r=mr.createElement("div");return r.innerHTML=t.html,r.children}}}),t}function sG(t){var e=t.children,n=t.main,r=t.mask,i=t.attributes,s=t.styles,o=t.transform;if(LA(o)&&n.found&&!r.found){var a=n.width,l=n.height,u={x:a/l/2,y:.5};i.style=h1(pt(pt({},s),{},{"transform-origin":"".concat(u.x+o.x/16,"em ").concat(u.y+o.y/16,"em")}))}return[{tag:"svg",attributes:i,children:e}]}function oG(t){var e=t.prefix,n=t.iconName,r=t.children,i=t.attributes,s=t.symbol,o=s===!0?"".concat(e,"-").concat(_t.cssPrefix,"-").concat(n):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:pt(pt({},i),{},{id:o}),children:r}]}]}function BA(t){var e=t.icons,n=e.main,r=e.mask,i=t.prefix,s=t.iconName,o=t.transform,a=t.symbol,l=t.title,u=t.maskId,c=t.titleId,f=t.extra,p=t.watchable,v=p===void 0?!1:p,b=r.found?r:n,E=b.width,P=b.height,S=i==="fak",A=[_t.replacementClass,s?"".concat(_t.cssPrefix,"-").concat(s):""].filter(function(D){return f.classes.indexOf(D)===-1}).filter(function(D){return D!==""||!!D}).concat(f.classes).join(" "),I={children:[],attributes:pt(pt({},f.attributes),{},{"data-prefix":i,"data-icon":s,class:A,role:f.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(E," ").concat(P)})},N=S&&!~f.classes.indexOf("fa-fw")?{width:"".concat(E/P*16*.0625,"em")}:{};v&&(I.attributes[kf]=""),l&&(I.children.push({tag:"title",attributes:{id:I.attributes["aria-labelledby"]||"title-".concat(c||Mg())},children:[l]}),delete I.attributes.title);var x=pt(pt({},I),{},{prefix:i,iconName:s,main:n,mask:r,maskId:u,transform:o,symbol:a,styles:pt(pt({},N),f.styles)}),g=r.found&&n.found?Zl("generateAbstractMask",x)||{children:[],attributes:{}}:Zl("generateAbstractIcon",x)||{children:[],attributes:{}},_=g.children,M=g.attributes;return x.children=_,x.attributes=M,a?oG(x):sG(x)}function m2(t){var e=t.content,n=t.width,r=t.height,i=t.transform,s=t.title,o=t.extra,a=t.watchable,l=a===void 0?!1:a,u=pt(pt(pt({},o.attributes),s?{title:s}:{}),{},{class:o.classes.join(" ")});l&&(u[kf]="");var c=pt({},o.styles);LA(i)&&(c.transform=DW({transform:i,startCentered:!0,width:n,height:r}),c["-webkit-transform"]=c.transform);var f=h1(c);f.length>0&&(u.style=f);var p=[];return p.push({tag:"span",attributes:u,children:[e]}),s&&p.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),p}function aG(t){var e=t.content,n=t.title,r=t.extra,i=pt(pt(pt({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),s=h1(r.styles);s.length>0&&(i.style=s);var o=[];return o.push({tag:"span",attributes:i,children:[e]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}var Jx=ma.styles;function wE(t){var e=t[0],n=t[1],r=t.slice(4),i=TA(r,1),s=i[0],o=null;return Array.isArray(s)?o={tag:"g",attributes:{class:"".concat(_t.cssPrefix,"-").concat(sf.GROUP)},children:[{tag:"path",attributes:{class:"".concat(_t.cssPrefix,"-").concat(sf.SECONDARY),fill:"currentColor",d:s[0]}},{tag:"path",attributes:{class:"".concat(_t.cssPrefix,"-").concat(sf.PRIMARY),fill:"currentColor",d:s[1]}}]}:o={tag:"path",attributes:{fill:"currentColor",d:s}},{found:!0,width:e,height:n,icon:o}}var lG={found:!1,width:512,height:512};function uG(t,e){!GR&&!_t.showMissingIcons&&t&&console.error('Icon with name "'.concat(t,'" and prefix "').concat(e,'" is missing.'))}function xE(t,e){var n=e;return e==="fa"&&_t.styleDefault!==null&&(e=Zu()),new Promise(function(r,i){if(Zl("missingIconAbstract"),n==="fa"){var s=oL(t)||{};t=s.iconName||t,e=s.prefix||e}if(t&&e&&Jx[e]&&Jx[e][t]){var o=Jx[e][t];return r(wE(o))}uG(t,e),r(pt(pt({},lG),{},{icon:_t.showMissingIcons&&t?Zl("missingIconAbstract")||{}:{}}))})}var v2=function(){},SE=_t.measurePerformance&&t0&&t0.mark&&t0.measure?t0:{mark:v2,measure:v2},Gp='FA "6.4.0"',cG=function(e){return SE.mark("".concat(Gp," ").concat(e," begins")),function(){return lL(e)}},lL=function(e){SE.mark("".concat(Gp," ").concat(e," ends")),SE.measure("".concat(Gp," ").concat(e),"".concat(Gp," ").concat(e," begins"),"".concat(Gp," ").concat(e," ends"))},jA={begin:cG,end:lL},Sy=function(){};function y2(t){var e=t.getAttribute?t.getAttribute(kf):null;return typeof e=="string"}function fG(t){var e=t.getAttribute?t.getAttribute(NA):null,n=t.getAttribute?t.getAttribute(IA):null;return e&&n}function hG(t){return t&&t.classList&&t.classList.contains&&t.classList.contains(_t.replacementClass)}function dG(){if(_t.autoReplaceSvg===!0)return Ey.replace;var t=Ey[_t.autoReplaceSvg];return t||Ey.replace}function pG(t){return mr.createElementNS("http://www.w3.org/2000/svg",t)}function gG(t){return mr.createElement(t)}function uL(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.ceFn,r=n===void 0?t.tag==="svg"?pG:gG:n;if(typeof t=="string")return mr.createTextNode(t);var i=r(t.tag);Object.keys(t.attributes||[]).forEach(function(o){i.setAttribute(o,t.attributes[o])});var s=t.children||[];return s.forEach(function(o){i.appendChild(uL(o,{ceFn:r}))}),i}function mG(t){var e=" ".concat(t.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}var Ey={replace:function(e){var n=e[0];if(n.parentNode)if(e[1].forEach(function(i){n.parentNode.insertBefore(uL(i),n)}),n.getAttribute(kf)===null&&_t.keepOriginalSource){var r=mr.createComment(mG(n));n.parentNode.replaceChild(r,n)}else n.remove()},nest:function(e){var n=e[0],r=e[1];if(~RA(n).indexOf(_t.replacementClass))return Ey.replace(e);var i=new RegExp("".concat(_t.cssPrefix,"-.*"));if(delete r[0].attributes.id,r[0].attributes.class){var s=r[0].attributes.class.split(" ").reduce(function(a,l){return l===_t.replacementClass||l.match(i)?a.toSvg.push(l):a.toNode.push(l),a},{toNode:[],toSvg:[]});r[0].attributes.class=s.toSvg.join(" "),s.toNode.length===0?n.removeAttribute("class"):n.setAttribute("class",s.toNode.join(" "))}var o=r.map(function(a){return Am(a)}).join(`
`);n.setAttribute(kf,""),n.innerHTML=o}};function b2(t){t()}function cL(t,e){var n=typeof e=="function"?e:Sy;if(t.length===0)n();else{var r=b2;_t.mutateApproach===wW&&(r=Xu.requestAnimationFrame||b2),r(function(){var i=dG(),s=jA.begin("mutate");t.map(i),s(),n()})}}var zA=!1;function fL(){zA=!0}function EE(){zA=!1}var Xy=null;function w2(t){if(u2&&_t.observeMutations){var e=t.treeCallback,n=e===void 0?Sy:e,r=t.nodeCallback,i=r===void 0?Sy:r,s=t.pseudoElementsCallback,o=s===void 0?Sy:s,a=t.observeMutationsRoot,l=a===void 0?mr:a;Xy=new u2(function(u){if(!zA){var c=Zu();Vd(u).forEach(function(f){if(f.type==="childList"&&f.addedNodes.length>0&&!y2(f.addedNodes[0])&&(_t.searchPseudoElements&&o(f.target),n(f.target)),f.type==="attributes"&&f.target.parentNode&&_t.searchPseudoElements&&o(f.target.parentNode),f.type==="attributes"&&y2(f.target)&&~CW.indexOf(f.attributeName))if(f.attributeName==="class"&&fG(f.target)){var p=p1(RA(f.target)),v=p.prefix,b=p.iconName;f.target.setAttribute(NA,v||c),b&&f.target.setAttribute(IA,b)}else hG(f.target)&&i(f.target)})}}),ru&&Xy.observe(l,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function vG(){Xy&&Xy.disconnect()}function yG(t){var e=t.getAttribute("style"),n=[];return e&&(n=e.split(";").reduce(function(r,i){var s=i.split(":"),o=s[0],a=s.slice(1);return o&&a.length>0&&(r[o]=a.join(":").trim()),r},{})),n}function bG(t){var e=t.getAttribute("data-prefix"),n=t.getAttribute("data-icon"),r=t.innerText!==void 0?t.innerText.trim():"",i=p1(RA(t));return i.prefix||(i.prefix=Zu()),e&&n&&(i.prefix=e,i.iconName=n),i.iconName&&i.prefix||(i.prefix&&r.length>0&&(i.iconName=JW(i.prefix,t.innerText)||FA(i.prefix,mE(t.innerText))),!i.iconName&&_t.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(i.iconName=t.firstChild.data)),i}function wG(t){var e=Vd(t.attributes).reduce(function(i,s){return i.name!=="class"&&i.name!=="style"&&(i[s.name]=s.value),i},{}),n=t.getAttribute("title"),r=t.getAttribute("data-fa-title-id");return _t.autoA11y&&(n?e["aria-labelledby"]="".concat(_t.replacementClass,"-title-").concat(r||Mg()):(e["aria-hidden"]="true",e.focusable="false")),e}function xG(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Xa,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function x2(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},n=bG(t),r=n.iconName,i=n.prefix,s=n.rest,o=wG(t),a=yE("parseNodeAttributes",{},t),l=e.styleParser?yG(t):[];return pt({iconName:r,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:i,transform:Xa,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:s,styles:l,attributes:o}},a)}var SG=ma.styles;function hL(t){var e=_t.autoReplaceSvg==="nest"?x2(t,{styleParser:!1}):x2(t);return~e.extra.classes.indexOf(KR)?Zl("generateLayersText",t,e):Zl("generateSvgReplacementMutation",t,e)}var Qu=new Set;$A.map(function(t){Qu.add("fa-".concat(t))});Object.keys(Cg[pr]).map(Qu.add.bind(Qu));Object.keys(Cg[$r]).map(Qu.add.bind(Qu));Qu=Em(Qu);function S2(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!ru)return Promise.resolve();var n=mr.documentElement.classList,r=function(f){return n.add("".concat(c2,"-").concat(f))},i=function(f){return n.remove("".concat(c2,"-").concat(f))},s=_t.autoFetchSvg?Qu:$A.map(function(c){return"fa-".concat(c)}).concat(Object.keys(SG));s.includes("fa")||s.push("fa");var o=[".".concat(KR,":not([").concat(kf,"])")].concat(s.map(function(c){return".".concat(c,":not([").concat(kf,"])")})).join(", ");if(o.length===0)return Promise.resolve();var a=[];try{a=Vd(t.querySelectorAll(o))}catch{}if(a.length>0)r("pending"),i("complete");else return Promise.resolve();var l=jA.begin("onTree"),u=a.reduce(function(c,f){try{var p=hL(f);p&&c.push(p)}catch(v){GR||v.name==="MissingIcon"&&console.error(v)}return c},[]);return new Promise(function(c,f){Promise.all(u).then(function(p){cL(p,function(){r("active"),r("complete"),i("pending"),typeof e=="function"&&e(),l(),c()})}).catch(function(p){l(),f(p)})})}function EG(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;hL(t).then(function(n){n&&cL([n],e)})}function _G(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=(e||{}).icon?e:bE(e||{}),i=n.mask;return i&&(i=(i||{}).icon?i:bE(i||{})),t(r,pt(pt({},n),{},{mask:i}))}}var AG=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.transform,i=r===void 0?Xa:r,s=n.symbol,o=s===void 0?!1:s,a=n.mask,l=a===void 0?null:a,u=n.maskId,c=u===void 0?null:u,f=n.title,p=f===void 0?null:f,v=n.titleId,b=v===void 0?null:v,E=n.classes,P=E===void 0?[]:E,S=n.attributes,A=S===void 0?{}:S,I=n.styles,N=I===void 0?{}:I;if(e){var x=e.prefix,g=e.iconName,_=e.icon;return g1(pt({type:"icon"},e),function(){return Cf("beforeDOMElementCreation",{iconDefinition:e,params:n}),_t.autoA11y&&(p?A["aria-labelledby"]="".concat(_t.replacementClass,"-title-").concat(b||Mg()):(A["aria-hidden"]="true",A.focusable="false")),BA({icons:{main:wE(_),mask:l?wE(l.icon):{found:!1,width:null,height:null,icon:{}}},prefix:x,iconName:g,transform:pt(pt({},Xa),i),symbol:o,title:p,maskId:c,titleId:b,extra:{attributes:A,styles:N,classes:P}})})}},kG={mixout:function(){return{icon:_G(AG)}},hooks:function(){return{mutationObserverCallbacks:function(n){return n.treeCallback=S2,n.nodeCallback=EG,n}}},provides:function(e){e.i2svg=function(n){var r=n.node,i=r===void 0?mr:r,s=n.callback,o=s===void 0?function(){}:s;return S2(i,o)},e.generateSvgReplacementMutation=function(n,r){var i=r.iconName,s=r.title,o=r.titleId,a=r.prefix,l=r.transform,u=r.symbol,c=r.mask,f=r.maskId,p=r.extra;return new Promise(function(v,b){Promise.all([xE(i,a),c.iconName?xE(c.iconName,c.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(E){var P=TA(E,2),S=P[0],A=P[1];v([n,BA({icons:{main:S,mask:A},prefix:a,iconName:i,transform:l,symbol:u,maskId:f,title:s,titleId:o,extra:p,watchable:!0})])}).catch(b)})},e.generateAbstractIcon=function(n){var r=n.children,i=n.attributes,s=n.main,o=n.transform,a=n.styles,l=h1(a);l.length>0&&(i.style=l);var u;return LA(o)&&(u=Zl("generateAbstractTransformGrouping",{main:s,transform:o,containerWidth:s.width,iconWidth:s.width})),r.push(u||s.icon),{children:r,attributes:i}}}},CG={mixout:function(){return{layer:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.classes,s=i===void 0?[]:i;return g1({type:"layer"},function(){Cf("beforeDOMElementCreation",{assembler:n,params:r});var o=[];return n(function(a){Array.isArray(a)?a.map(function(l){o=o.concat(l.abstract)}):o=o.concat(a.abstract)}),[{tag:"span",attributes:{class:["".concat(_t.cssPrefix,"-layers")].concat(Em(s)).join(" ")},children:o}]})}}}},PG={mixout:function(){return{counter:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.title,s=i===void 0?null:i,o=r.classes,a=o===void 0?[]:o,l=r.attributes,u=l===void 0?{}:l,c=r.styles,f=c===void 0?{}:c;return g1({type:"counter",content:n},function(){return Cf("beforeDOMElementCreation",{content:n,params:r}),aG({content:n.toString(),title:s,extra:{attributes:u,styles:f,classes:["".concat(_t.cssPrefix,"-layers-counter")].concat(Em(a))}})})}}}},OG={mixout:function(){return{text:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.transform,s=i===void 0?Xa:i,o=r.title,a=o===void 0?null:o,l=r.classes,u=l===void 0?[]:l,c=r.attributes,f=c===void 0?{}:c,p=r.styles,v=p===void 0?{}:p;return g1({type:"text",content:n},function(){return Cf("beforeDOMElementCreation",{content:n,params:r}),m2({content:n,transform:pt(pt({},Xa),s),title:a,extra:{attributes:f,styles:v,classes:["".concat(_t.cssPrefix,"-layers-text")].concat(Em(u))}})})}}},provides:function(e){e.generateLayersText=function(n,r){var i=r.title,s=r.transform,o=r.extra,a=null,l=null;if(UR){var u=parseInt(getComputedStyle(n).fontSize,10),c=n.getBoundingClientRect();a=c.width/u,l=c.height/u}return _t.autoA11y&&!i&&(o.attributes["aria-hidden"]="true"),Promise.resolve([n,m2({content:n.innerHTML,width:a,height:l,transform:s,title:i,extra:o,watchable:!0})])}}},TG=new RegExp('"',"ug"),E2=[1105920,1112319];function MG(t){var e=t.replace(TG,""),n=UW(e,0),r=n>=E2[0]&&n<=E2[1],i=e.length===2?e[0]===e[1]:!1;return{value:mE(i?e[0]:e),isSecondary:r||i}}function _2(t,e){var n="".concat(bW).concat(e.replace(":","-"));return new Promise(function(r,i){if(t.getAttribute(n)!==null)return r();var s=Vd(t.children),o=s.filter(function(_){return _.getAttribute(gE)===e})[0],a=Xu.getComputedStyle(t,e),l=a.getPropertyValue("font-family").match(_W),u=a.getPropertyValue("font-weight"),c=a.getPropertyValue("content");if(o&&!l)return t.removeChild(o),r();if(l&&c!=="none"&&c!==""){var f=a.getPropertyValue("content"),p=~["Sharp"].indexOf(l[2])?$r:pr,v=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(l[2])?Pg[p][l[2].toLowerCase()]:AW[p][u],b=MG(f),E=b.value,P=b.isSecondary,S=l[0].startsWith("FontAwesome"),A=FA(v,E),I=A;if(S){var N=XW(E);N.iconName&&N.prefix&&(A=N.iconName,v=N.prefix)}if(A&&!P&&(!o||o.getAttribute(NA)!==v||o.getAttribute(IA)!==I)){t.setAttribute(n,I),o&&t.removeChild(o);var x=xG(),g=x.extra;g.attributes[gE]=e,xE(A,v).then(function(_){var M=BA(pt(pt({},x),{},{icons:{main:_,mask:VA()},prefix:v,iconName:I,extra:g,watchable:!0})),D=mr.createElement("svg");e==="::before"?t.insertBefore(D,t.firstChild):t.appendChild(D),D.outerHTML=M.map(function(q){return Am(q)}).join(`
`),t.removeAttribute(n),r()}).catch(i)}else r()}else r()})}function NG(t){return Promise.all([_2(t,"::before"),_2(t,"::after")])}function IG(t){return t.parentNode!==document.head&&!~xW.indexOf(t.tagName.toUpperCase())&&!t.getAttribute(gE)&&(!t.parentNode||t.parentNode.tagName!=="svg")}function A2(t){if(ru)return new Promise(function(e,n){var r=Vd(t.querySelectorAll("*")).filter(IG).map(NG),i=jA.begin("searchPseudoElements");fL(),Promise.all(r).then(function(){i(),EE(),e()}).catch(function(){i(),EE(),n()})})}var $G={hooks:function(){return{mutationObserverCallbacks:function(n){return n.pseudoElementsCallback=A2,n}}},provides:function(e){e.pseudoElements2svg=function(n){var r=n.node,i=r===void 0?mr:r;_t.searchPseudoElements&&A2(i)}}},k2=!1,RG={mixout:function(){return{dom:{unwatch:function(){fL(),k2=!0}}}},hooks:function(){return{bootstrap:function(){w2(yE("mutationObserverCallbacks",{}))},noAuto:function(){vG()},watch:function(n){var r=n.observeMutationsRoot;k2?EE():w2(yE("mutationObserverCallbacks",{observeMutationsRoot:r}))}}}},C2=function(e){var n={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e.toLowerCase().split(" ").reduce(function(r,i){var s=i.toLowerCase().split("-"),o=s[0],a=s.slice(1).join("-");if(o&&a==="h")return r.flipX=!0,r;if(o&&a==="v")return r.flipY=!0,r;if(a=parseFloat(a),isNaN(a))return r;switch(o){case"grow":r.size=r.size+a;break;case"shrink":r.size=r.size-a;break;case"left":r.x=r.x-a;break;case"right":r.x=r.x+a;break;case"up":r.y=r.y-a;break;case"down":r.y=r.y+a;break;case"rotate":r.rotate=r.rotate+a;break}return r},n)},LG={mixout:function(){return{parse:{transform:function(n){return C2(n)}}}},hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-transform");return i&&(n.transform=C2(i)),n}}},provides:function(e){e.generateAbstractTransformGrouping=function(n){var r=n.main,i=n.transform,s=n.containerWidth,o=n.iconWidth,a={transform:"translate(".concat(s/2," 256)")},l="translate(".concat(i.x*32,", ").concat(i.y*32,") "),u="scale(".concat(i.size/16*(i.flipX?-1:1),", ").concat(i.size/16*(i.flipY?-1:1),") "),c="rotate(".concat(i.rotate," 0 0)"),f={transform:"".concat(l," ").concat(u," ").concat(c)},p={transform:"translate(".concat(o/2*-1," -256)")},v={outer:a,inner:f,path:p};return{tag:"g",attributes:pt({},v.outer),children:[{tag:"g",attributes:pt({},v.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:pt(pt({},r.icon.attributes),v.path)}]}]}}}},Xx={x:0,y:0,width:"100%",height:"100%"};function P2(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function DG(t){return t.tag==="g"?t.children:[t]}var FG={hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-mask"),s=i?p1(i.split(" ").map(function(o){return o.trim()})):VA();return s.prefix||(s.prefix=Zu()),n.mask=s,n.maskId=r.getAttribute("data-fa-mask-id"),n}}},provides:function(e){e.generateAbstractMask=function(n){var r=n.children,i=n.attributes,s=n.main,o=n.mask,a=n.maskId,l=n.transform,u=s.width,c=s.icon,f=o.width,p=o.icon,v=LW({transform:l,containerWidth:f,iconWidth:u}),b={tag:"rect",attributes:pt(pt({},Xx),{},{fill:"white"})},E=c.children?{children:c.children.map(P2)}:{},P={tag:"g",attributes:pt({},v.inner),children:[P2(pt({tag:c.tag,attributes:pt(pt({},c.attributes),v.path)},E))]},S={tag:"g",attributes:pt({},v.outer),children:[P]},A="mask-".concat(a||Mg()),I="clip-".concat(a||Mg()),N={tag:"mask",attributes:pt(pt({},Xx),{},{id:A,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[b,S]},x={tag:"defs",children:[{tag:"clipPath",attributes:{id:I},children:DG(p)},N]};return r.push(x,{tag:"rect",attributes:pt({fill:"currentColor","clip-path":"url(#".concat(I,")"),mask:"url(#".concat(A,")")},Xx)}),{children:r,attributes:i}}}},VG={provides:function(e){var n=!1;Xu.matchMedia&&(n=Xu.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var r=[],i={fill:"currentColor"},s={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};r.push({tag:"path",attributes:pt(pt({},i),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var o=pt(pt({},s),{},{attributeName:"opacity"}),a={tag:"circle",attributes:pt(pt({},i),{},{cx:"256",cy:"364",r:"28"}),children:[]};return n||a.children.push({tag:"animate",attributes:pt(pt({},s),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:pt(pt({},o),{},{values:"1;0;1;1;0;1;"})}),r.push(a),r.push({tag:"path",attributes:pt(pt({},i),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:n?[]:[{tag:"animate",attributes:pt(pt({},o),{},{values:"1;0;0;0;0;1;"})}]}),n||r.push({tag:"path",attributes:pt(pt({},i),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:pt(pt({},o),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:r}}}},BG={hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-symbol"),s=i===null?!1:i===""?!0:i;return n.symbol=s,n}}}},jG=[VW,kG,CG,PG,OG,$G,RG,LG,FG,VG,BG];eG(jG,{mixoutsTo:vo});vo.noAuto;vo.config;var zG=vo.library;vo.dom;var _E=vo.parse;vo.findIconDefinition;vo.toHtml;var HG=vo.icon;vo.layer;vo.text;vo.counter;function m1(t,e){const n=Object.create(null),r=t.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return e?i=>!!n[i.toLowerCase()]:i=>!!n[i]}const Jn={},Kh=[],ba=()=>{},UG=()=>!1,qG=/^on[^a-z]/,km=t=>qG.test(t),HA=t=>t.startsWith("onUpdate:"),cr=Object.assign,UA=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},WG=Object.prototype.hasOwnProperty,Mn=(t,e)=>WG.call(t,e),mt=Array.isArray,Yh=t=>Bd(t)==="[object Map]",Uf=t=>Bd(t)==="[object Set]",O2=t=>Bd(t)==="[object Date]",GG=t=>Bd(t)==="[object RegExp]",qt=t=>typeof t=="function",Sr=t=>typeof t=="string",Ng=t=>typeof t=="symbol",Zn=t=>t!==null&&typeof t=="object",qA=t=>Zn(t)&&qt(t.then)&&qt(t.catch),dL=Object.prototype.toString,Bd=t=>dL.call(t),KG=t=>Bd(t).slice(8,-1),pL=t=>Bd(t)==="[object Object]",WA=t=>Sr(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,og=m1(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),v1=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},YG=/-(\w)/g,zs=v1(t=>t.replace(YG,(e,n)=>n?n.toUpperCase():"")),JG=/\B([A-Z])/g,Fo=v1(t=>t.replace(JG,"-$1").toLowerCase()),Cm=v1(t=>t.charAt(0).toUpperCase()+t.slice(1)),ag=v1(t=>t?`on${Cm(t)}`:""),bd=(t,e)=>!Object.is(t,e),Jh=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},Zy=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},Qy=t=>{const e=parseFloat(t);return isNaN(e)?t:e},eb=t=>{const e=Sr(t)?Number(t):NaN;return isNaN(e)?t:e};let T2;const AE=()=>T2||(T2=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),XG="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console",ZG=m1(XG);function Pm(t){if(mt(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=Sr(r)?nK(r):Pm(r);if(i)for(const s in i)e[s]=i[s]}return e}else{if(Sr(t))return t;if(Zn(t))return t}}const QG=/;(?![^(]*\))/g,eK=/:([^]+)/,tK=new RegExp("\\/\\*.*?\\*\\/","gs");function nK(t){const e={};return t.replace(tK,"").split(QG).forEach(n=>{if(n){const r=n.split(eK);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function xa(t){let e="";if(Sr(t))e=t;else if(mt(t))for(let n=0;n<t.length;n++){const r=xa(t[n]);r&&(e+=r+" ")}else if(Zn(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function rK(t){if(!t)return null;let{class:e,style:n}=t;return e&&!Sr(e)&&(t.class=xa(e)),n&&(t.style=Pm(n)),t}const iK="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",sK=m1(iK);function gL(t){return!!t||t===""}function oK(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=ec(t[r],e[r]);return n}function ec(t,e){if(t===e)return!0;let n=O2(t),r=O2(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Ng(t),r=Ng(e),n||r)return t===e;if(n=mt(t),r=mt(e),n||r)return n&&r?oK(t,e):!1;if(n=Zn(t),r=Zn(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,s=Object.keys(e).length;if(i!==s)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!ec(t[o],e[o]))return!1}}return String(t)===String(e)}function y1(t,e){return t.findIndex(n=>ec(n,e))}const Cn=t=>Sr(t)?t:t==null?"":mt(t)||Zn(t)&&(t.toString===dL||!qt(t.toString))?JSON.stringify(t,mL,2):String(t),mL=(t,e)=>e&&e.__v_isRef?mL(t,e.value):Yh(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i])=>(n[`${r} =>`]=i,n),{})}:Uf(e)?{[`Set(${e.size})`]:[...e.values()]}:Zn(e)&&!mt(e)&&!pL(e)?String(e):e;let so;class GA{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=so,!e&&so&&(this.index=(so.scopes||(so.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=so;try{return so=this,e()}finally{so=n}}}on(){so=this}off(){so=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function KA(t){return new GA(t)}function vL(t,e=so){e&&e.active&&e.effects.push(t)}function YA(){return so}function yL(t){so&&so.cleanups.push(t)}const JA=t=>{const e=new Set(t);return e.w=0,e.n=0,e},bL=t=>(t.w&tc)>0,wL=t=>(t.n&tc)>0,aK=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=tc},lK=t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const i=e[r];bL(i)&&!wL(i)?i.delete(t):e[n++]=i,i.w&=~tc,i.n&=~tc}e.length=n}},tb=new WeakMap;let Kp=0,tc=1;const kE=30;let fa;const mf=Symbol(""),CE=Symbol("");class Om{constructor(e,n=null,r){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,vL(this,r)}run(){if(!this.active)return this.fn();let e=fa,n=Uu;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=fa,fa=this,Uu=!0,tc=1<<++Kp,Kp<=kE?aK(this):M2(this),this.fn()}finally{Kp<=kE&&lK(this),tc=1<<--Kp,fa=this.parent,Uu=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){fa===this?this.deferStop=!0:this.active&&(M2(this),this.onStop&&this.onStop(),this.active=!1)}}function M2(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}function uK(t,e){t.effect&&(t=t.effect.fn);const n=new Om(t);e&&(cr(n,e),e.scope&&vL(n,e.scope)),(!e||!e.lazy)&&n.run();const r=n.run.bind(n);return r.effect=n,r}function cK(t){t.effect.stop()}let Uu=!0;const xL=[];function jd(){xL.push(Uu),Uu=!1}function zd(){const t=xL.pop();Uu=t===void 0?!0:t}function qs(t,e,n){if(Uu&&fa){let r=tb.get(t);r||tb.set(t,r=new Map);let i=r.get(n);i||r.set(n,i=JA()),SL(i)}}function SL(t,e){let n=!1;Kp<=kE?wL(t)||(t.n|=tc,n=!bL(t)):n=!t.has(fa),n&&(t.add(fa),fa.deps.push(t))}function Ql(t,e,n,r,i,s){const o=tb.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&mt(t)){const l=Number(r);o.forEach((u,c)=>{(c==="length"||c>=l)&&a.push(u)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":mt(t)?WA(n)&&a.push(o.get("length")):(a.push(o.get(mf)),Yh(t)&&a.push(o.get(CE)));break;case"delete":mt(t)||(a.push(o.get(mf)),Yh(t)&&a.push(o.get(CE)));break;case"set":Yh(t)&&a.push(o.get(mf));break}if(a.length===1)a[0]&&PE(a[0]);else{const l=[];for(const u of a)u&&l.push(...u);PE(JA(l))}}function PE(t,e){const n=mt(t)?t:[...t];for(const r of n)r.computed&&N2(r);for(const r of n)r.computed||N2(r)}function N2(t,e){(t!==fa||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}function fK(t,e){var n;return(n=tb.get(t))==null?void 0:n.get(e)}const hK=m1("__proto__,__v_isRef,__isVue"),EL=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Ng)),dK=b1(),pK=b1(!1,!0),gK=b1(!0),mK=b1(!0,!0),I2=vK();function vK(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=mn(this);for(let s=0,o=this.length;s<o;s++)qs(r,"get",s+"");const i=r[e](...n);return i===-1||i===!1?r[e](...n.map(mn)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){jd();const r=mn(this)[e].apply(this,n);return zd(),r}}),t}function yK(t){const e=mn(this);return qs(e,"has",t),e.hasOwnProperty(t)}function b1(t=!1,e=!1){return function(r,i,s){if(i==="__v_isReactive")return!t;if(i==="__v_isReadonly")return t;if(i==="__v_isShallow")return e;if(i==="__v_raw"&&s===(t?e?TL:OL:e?PL:CL).get(r))return r;const o=mt(r);if(!t){if(o&&Mn(I2,i))return Reflect.get(I2,i,s);if(i==="hasOwnProperty")return yK}const a=Reflect.get(r,i,s);return(Ng(i)?EL.has(i):hK(i))||(t||qs(r,"get",i),e)?a:kr(a)?o&&WA(i)?a:a.value:Zn(a)?t?ZA(a):Tm(a):a}}const bK=_L(),wK=_L(!0);function _L(t=!1){return function(n,r,i,s){let o=n[r];if(Pf(o)&&kr(o)&&!kr(i))return!1;if(!t&&(!Ig(i)&&!Pf(i)&&(o=mn(o),i=mn(i)),!mt(n)&&kr(o)&&!kr(i)))return o.value=i,!0;const a=mt(n)&&WA(r)?Number(r)<n.length:Mn(n,r),l=Reflect.set(n,r,i,s);return n===mn(s)&&(a?bd(i,o)&&Ql(n,"set",r,i):Ql(n,"add",r,i)),l}}function xK(t,e){const n=Mn(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&Ql(t,"delete",e,void 0),r}function SK(t,e){const n=Reflect.has(t,e);return(!Ng(e)||!EL.has(e))&&qs(t,"has",e),n}function EK(t){return qs(t,"iterate",mt(t)?"length":mf),Reflect.ownKeys(t)}const AL={get:dK,set:bK,deleteProperty:xK,has:SK,ownKeys:EK},kL={get:gK,set(t,e){return!0},deleteProperty(t,e){return!0}},_K=cr({},AL,{get:pK,set:wK}),AK=cr({},kL,{get:mK}),XA=t=>t,w1=t=>Reflect.getPrototypeOf(t);function c0(t,e,n=!1,r=!1){t=t.__v_raw;const i=mn(t),s=mn(e);n||(e!==s&&qs(i,"get",e),qs(i,"get",s));const{has:o}=w1(i),a=r?XA:n?ek:$g;if(o.call(i,e))return a(t.get(e));if(o.call(i,s))return a(t.get(s));t!==i&&t.get(e)}function f0(t,e=!1){const n=this.__v_raw,r=mn(n),i=mn(t);return e||(t!==i&&qs(r,"has",t),qs(r,"has",i)),t===i?n.has(t):n.has(t)||n.has(i)}function h0(t,e=!1){return t=t.__v_raw,!e&&qs(mn(t),"iterate",mf),Reflect.get(t,"size",t)}function $2(t){t=mn(t);const e=mn(this);return w1(e).has.call(e,t)||(e.add(t),Ql(e,"add",t,t)),this}function R2(t,e){e=mn(e);const n=mn(this),{has:r,get:i}=w1(n);let s=r.call(n,t);s||(t=mn(t),s=r.call(n,t));const o=i.call(n,t);return n.set(t,e),s?bd(e,o)&&Ql(n,"set",t,e):Ql(n,"add",t,e),this}function L2(t){const e=mn(this),{has:n,get:r}=w1(e);let i=n.call(e,t);i||(t=mn(t),i=n.call(e,t)),r&&r.call(e,t);const s=e.delete(t);return i&&Ql(e,"delete",t,void 0),s}function D2(){const t=mn(this),e=t.size!==0,n=t.clear();return e&&Ql(t,"clear",void 0,void 0),n}function d0(t,e){return function(r,i){const s=this,o=s.__v_raw,a=mn(o),l=e?XA:t?ek:$g;return!t&&qs(a,"iterate",mf),o.forEach((u,c)=>r.call(i,l(u),l(c),s))}}function p0(t,e,n){return function(...r){const i=this.__v_raw,s=mn(i),o=Yh(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=i[t](...r),c=n?XA:e?ek:$g;return!e&&qs(s,"iterate",l?CE:mf),{next(){const{value:f,done:p}=u.next();return p?{value:f,done:p}:{value:a?[c(f[0]),c(f[1])]:c(f),done:p}},[Symbol.iterator](){return this}}}}function Eu(t){return function(...e){return t==="delete"?!1:this}}function kK(){const t={get(s){return c0(this,s)},get size(){return h0(this)},has:f0,add:$2,set:R2,delete:L2,clear:D2,forEach:d0(!1,!1)},e={get(s){return c0(this,s,!1,!0)},get size(){return h0(this)},has:f0,add:$2,set:R2,delete:L2,clear:D2,forEach:d0(!1,!0)},n={get(s){return c0(this,s,!0)},get size(){return h0(this,!0)},has(s){return f0.call(this,s,!0)},add:Eu("add"),set:Eu("set"),delete:Eu("delete"),clear:Eu("clear"),forEach:d0(!0,!1)},r={get(s){return c0(this,s,!0,!0)},get size(){return h0(this,!0)},has(s){return f0.call(this,s,!0)},add:Eu("add"),set:Eu("set"),delete:Eu("delete"),clear:Eu("clear"),forEach:d0(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=p0(s,!1,!1),n[s]=p0(s,!0,!1),e[s]=p0(s,!1,!0),r[s]=p0(s,!0,!0)}),[t,n,e,r]}const[CK,PK,OK,TK]=kK();function x1(t,e){const n=e?t?TK:OK:t?PK:CK;return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(Mn(n,i)&&i in r?n:r,i,s)}const MK={get:x1(!1,!1)},NK={get:x1(!1,!0)},IK={get:x1(!0,!1)},$K={get:x1(!0,!0)},CL=new WeakMap,PL=new WeakMap,OL=new WeakMap,TL=new WeakMap;function RK(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function LK(t){return t.__v_skip||!Object.isExtensible(t)?0:RK(KG(t))}function Tm(t){return Pf(t)?t:S1(t,!1,AL,MK,CL)}function ML(t){return S1(t,!1,_K,NK,PL)}function ZA(t){return S1(t,!0,kL,IK,OL)}function DK(t){return S1(t,!0,AK,$K,TL)}function S1(t,e,n,r,i){if(!Zn(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const o=LK(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return i.set(t,a),a}function Ul(t){return Pf(t)?Ul(t.__v_raw):!!(t&&t.__v_isReactive)}function Pf(t){return!!(t&&t.__v_isReadonly)}function Ig(t){return!!(t&&t.__v_isShallow)}function QA(t){return Ul(t)||Pf(t)}function mn(t){const e=t&&t.__v_raw;return e?mn(e):t}function Of(t){return Zy(t,"__v_skip",!0),t}const $g=t=>Zn(t)?Tm(t):t,ek=t=>Zn(t)?ZA(t):t;function tk(t){Uu&&fa&&(t=mn(t),SL(t.dep||(t.dep=JA())))}function E1(t,e){t=mn(t);const n=t.dep;n&&PE(n)}function kr(t){return!!(t&&t.__v_isRef===!0)}function qu(t){return NL(t,!1)}function lg(t){return NL(t,!0)}function NL(t,e){return kr(t)?t:new FK(t,e)}class FK{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:mn(e),this._value=n?e:$g(e)}get value(){return tk(this),this._value}set value(e){const n=this.__v_isShallow||Ig(e)||Pf(e);e=n?e:mn(e),bd(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:$g(e),E1(this))}}function VK(t){E1(t)}function la(t){return kr(t)?t.value:t}function BK(t){return qt(t)?t():la(t)}const jK={get:(t,e,n)=>la(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return kr(i)&&!kr(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function nk(t){return Ul(t)?t:new Proxy(t,jK)}class zK{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:n,set:r}=e(()=>tk(this),()=>E1(this));this._get=n,this._set=r}get value(){return this._get()}set value(e){this._set(e)}}function HK(t){return new zK(t)}function IL(t){const e=mt(t)?new Array(t.length):{};for(const n in t)e[n]=$L(t,n);return e}class UK{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return fK(mn(this._object),this._key)}}class qK{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function WK(t,e,n){return kr(t)?t:qt(t)?new qK(t):Zn(t)&&arguments.length>1?$L(t,e,n):qu(t)}function $L(t,e,n){const r=t[e];return kr(r)?r:new UK(t,e,n)}class GK{constructor(e,n,r,i){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Om(e,()=>{this._dirty||(this._dirty=!0,E1(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const e=mn(this);return tk(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function KK(t,e,n=!1){let r,i;const s=qt(t);return s?(r=t,i=ba):(r=t.get,i=t.set),new GK(r,i,s||!i,n)}function YK(t,...e){}function JK(t,e){}function ql(t,e,n,r){let i;try{i=r?t(...r):t()}catch(s){qf(s,e,n)}return i}function go(t,e,n,r){if(qt(t)){const s=ql(t,e,n,r);return s&&qA(s)&&s.catch(o=>{qf(o,e,n)}),s}const i=[];for(let s=0;s<t.length;s++)i.push(go(t[s],e,n,r));return i}function qf(t,e,n,r=!0){const i=e?e.vnode:null;if(e){let s=e.parent;const o=e.proxy,a=n;for(;s;){const u=s.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](t,o,a)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){ql(l,null,10,[t,o,a]);return}}XK(t,n,i,r)}function XK(t,e,n,r=!0){console.error(t)}let Rg=!1,OE=!1;const qi=[];let Ga=0;const Xh=[];let Tl=null,Kc=0;const RL=Promise.resolve();let rk=null;function _1(t){const e=rk||RL;return t?e.then(this?t.bind(this):t):e}function ZK(t){let e=Ga+1,n=qi.length;for(;e<n;){const r=e+n>>>1;Lg(qi[r])<t?e=r+1:n=r}return e}function A1(t){(!qi.length||!qi.includes(t,Rg&&t.allowRecurse?Ga+1:Ga))&&(t.id==null?qi.push(t):qi.splice(ZK(t.id),0,t),LL())}function LL(){!Rg&&!OE&&(OE=!0,rk=RL.then(DL))}function QK(t){const e=qi.indexOf(t);e>Ga&&qi.splice(e,1)}function ik(t){mt(t)?Xh.push(...t):(!Tl||!Tl.includes(t,t.allowRecurse?Kc+1:Kc))&&Xh.push(t),LL()}function F2(t,e=Rg?Ga+1:0){for(;e<qi.length;e++){const n=qi[e];n&&n.pre&&(qi.splice(e,1),e--,n())}}function nb(t){if(Xh.length){const e=[...new Set(Xh)];if(Xh.length=0,Tl){Tl.push(...e);return}for(Tl=e,Tl.sort((n,r)=>Lg(n)-Lg(r)),Kc=0;Kc<Tl.length;Kc++)Tl[Kc]();Tl=null,Kc=0}}const Lg=t=>t.id==null?1/0:t.id,eY=(t,e)=>{const n=Lg(t)-Lg(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function DL(t){OE=!1,Rg=!0,qi.sort(eY);const e=ba;try{for(Ga=0;Ga<qi.length;Ga++){const n=qi[Ga];n&&n.active!==!1&&ql(n,null,14)}}finally{Ga=0,qi.length=0,nb(),Rg=!1,rk=null,(qi.length||Xh.length)&&DL()}}let Th,g0=[];function FL(t,e){var n,r;Th=t,Th?(Th.enabled=!0,g0.forEach(({event:i,args:s})=>Th.emit(i,...s)),g0=[]):typeof window<"u"&&window.HTMLElement&&!((r=(n=window.navigator)==null?void 0:n.userAgent)!=null&&r.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{FL(s,e)}),setTimeout(()=>{Th||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,g0=[])},3e3)):g0=[]}function tY(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Jn;let i=n;const s=e.startsWith("update:"),o=s&&e.slice(7);if(o&&o in r){const c=`${o==="modelValue"?"model":o}Modifiers`,{number:f,trim:p}=r[c]||Jn;p&&(i=n.map(v=>Sr(v)?v.trim():v)),f&&(i=n.map(Qy))}let a,l=r[a=ag(e)]||r[a=ag(zs(e))];!l&&s&&(l=r[a=ag(Fo(e))]),l&&go(l,t,6,i);const u=r[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,go(u,t,6,i)}}function VL(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(!qt(t)){const l=u=>{const c=VL(u,e,!0);c&&(a=!0,cr(o,c))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(Zn(t)&&r.set(t,null),null):(mt(s)?s.forEach(l=>o[l]=null):cr(o,s),Zn(t)&&r.set(t,o),o)}function k1(t,e){return!t||!km(e)?!1:(e=e.slice(2).replace(/Once$/,""),Mn(t,e[0].toLowerCase()+e.slice(1))||Mn(t,Fo(e))||Mn(t,e))}let vi=null,C1=null;function Dg(t){const e=vi;return vi=t,C1=t&&t.type.__scopeId||null,e}function Wf(t){C1=t}function Gf(){C1=null}const nY=t=>sk;function sk(t,e=vi,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&LE(-1);const s=Dg(e);let o;try{o=t(...i)}finally{Dg(s),r._d&&LE(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function _y(t){const{type:e,vnode:n,proxy:r,withProxy:i,props:s,propsOptions:[o],slots:a,attrs:l,emit:u,render:c,renderCache:f,data:p,setupState:v,ctx:b,inheritAttrs:E}=t;let P,S;const A=Dg(t);try{if(n.shapeFlag&4){const N=i||r;P=lo(c.call(N,N,f,s,v,p,b)),S=l}else{const N=e;P=lo(N.length>1?N(s,{attrs:l,slots:a,emit:u}):N(s,null)),S=e.props?l:iY(l)}}catch(N){fg.length=0,qf(N,t,1),P=lt(Ki)}let I=P;if(S&&E!==!1){const N=Object.keys(S),{shapeFlag:x}=I;N.length&&x&7&&(o&&N.some(HA)&&(S=sY(S,o)),I=ol(I,S))}return n.dirs&&(I=ol(I),I.dirs=I.dirs?I.dirs.concat(n.dirs):n.dirs),n.transition&&(I.transition=n.transition),P=I,Dg(A),P}function rY(t){let e;for(let n=0;n<t.length;n++){const r=t[n];if(nc(r)){if(r.type!==Ki||r.children==="v-if"){if(e)return;e=r}}else return}return e}const iY=t=>{let e;for(const n in t)(n==="class"||n==="style"||km(n))&&((e||(e={}))[n]=t[n]);return e},sY=(t,e)=>{const n={};for(const r in t)(!HA(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function oY(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:l}=e,u=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?V2(r,o,u):!!o;if(l&8){const c=e.dynamicProps;for(let f=0;f<c.length;f++){const p=c[f];if(o[p]!==r[p]&&!k1(u,p))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?V2(r,o,u):!0:!!o;return!1}function V2(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!k1(n,s))return!0}return!1}function ok({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const BL=t=>t.__isSuspense,aY={name:"Suspense",__isSuspense:!0,process(t,e,n,r,i,s,o,a,l,u){t==null?uY(e,n,r,i,s,o,a,l,u):cY(t,e,n,r,i,o,a,l,u)},hydrate:fY,create:ak,normalize:hY},lY=aY;function Fg(t,e){const n=t.props&&t.props[e];qt(n)&&n()}function uY(t,e,n,r,i,s,o,a,l){const{p:u,o:{createElement:c}}=l,f=c("div"),p=t.suspense=ak(t,i,r,e,f,n,s,o,a,l);u(null,p.pendingBranch=t.ssContent,f,null,r,p,s,o),p.deps>0?(Fg(t,"onPending"),Fg(t,"onFallback"),u(null,t.ssFallback,e,n,r,null,s,o),Zh(p,t.ssFallback)):p.resolve(!1,!0)}function cY(t,e,n,r,i,s,o,a,{p:l,um:u,o:{createElement:c}}){const f=e.suspense=t.suspense;f.vnode=e,e.el=t.el;const p=e.ssContent,v=e.ssFallback,{activeBranch:b,pendingBranch:E,isInFallback:P,isHydrating:S}=f;if(E)f.pendingBranch=p,ha(p,E)?(l(E,p,f.hiddenContainer,null,i,f,s,o,a),f.deps<=0?f.resolve():P&&(l(b,v,n,r,i,null,s,o,a),Zh(f,v))):(f.pendingId++,S?(f.isHydrating=!1,f.activeBranch=E):u(E,i,f),f.deps=0,f.effects.length=0,f.hiddenContainer=c("div"),P?(l(null,p,f.hiddenContainer,null,i,f,s,o,a),f.deps<=0?f.resolve():(l(b,v,n,r,i,null,s,o,a),Zh(f,v))):b&&ha(p,b)?(l(b,p,n,r,i,f,s,o,a),f.resolve(!0)):(l(null,p,f.hiddenContainer,null,i,f,s,o,a),f.deps<=0&&f.resolve()));else if(b&&ha(p,b))l(b,p,n,r,i,f,s,o,a),Zh(f,p);else if(Fg(e,"onPending"),f.pendingBranch=p,f.pendingId++,l(null,p,f.hiddenContainer,null,i,f,s,o,a),f.deps<=0)f.resolve();else{const{timeout:A,pendingId:I}=f;A>0?setTimeout(()=>{f.pendingId===I&&f.fallback(v)},A):A===0&&f.fallback(v)}}function ak(t,e,n,r,i,s,o,a,l,u,c=!1){const{p:f,m:p,um:v,n:b,o:{parentNode:E,remove:P}}=u;let S;const A=dY(t);A&&e!=null&&e.pendingBranch&&(S=e.pendingId,e.deps++);const I=t.props?eb(t.props.timeout):void 0,N={vnode:t,parent:e,parentComponent:n,isSVG:o,container:r,hiddenContainer:i,anchor:s,deps:0,pendingId:0,timeout:typeof I=="number"?I:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:c,isUnmounted:!1,effects:[],resolve(x=!1,g=!1){const{vnode:_,activeBranch:M,pendingBranch:D,pendingId:q,effects:R,parentComponent:W,container:G}=N;if(N.isHydrating)N.isHydrating=!1;else if(!x){const be=M&&D.transition&&D.transition.mode==="out-in";be&&(M.transition.afterLeave=()=>{q===N.pendingId&&p(D,G,_e,0)});let{anchor:_e}=N;M&&(_e=b(M),v(M,W,N,!0)),be||p(D,G,_e,0)}Zh(N,D),N.pendingBranch=null,N.isInFallback=!1;let Z=N.parent,de=!1;for(;Z;){if(Z.pendingBranch){Z.effects.push(...R),de=!0;break}Z=Z.parent}de||ik(R),N.effects=[],A&&e&&e.pendingBranch&&S===e.pendingId&&(e.deps--,e.deps===0&&!g&&e.resolve()),Fg(_,"onResolve")},fallback(x){if(!N.pendingBranch)return;const{vnode:g,activeBranch:_,parentComponent:M,container:D,isSVG:q}=N;Fg(g,"onFallback");const R=b(_),W=()=>{N.isInFallback&&(f(null,x,D,R,M,null,q,a,l),Zh(N,x))},G=x.transition&&x.transition.mode==="out-in";G&&(_.transition.afterLeave=W),N.isInFallback=!0,v(_,M,null,!0),G||W()},move(x,g,_){N.activeBranch&&p(N.activeBranch,x,g,_),N.container=x},next(){return N.activeBranch&&b(N.activeBranch)},registerDep(x,g){const _=!!N.pendingBranch;_&&N.deps++;const M=x.vnode.el;x.asyncDep.catch(D=>{qf(D,x,0)}).then(D=>{if(x.isUnmounted||N.isUnmounted||N.pendingId!==x.suspenseId)return;x.asyncResolved=!0;const{vnode:q}=x;DE(x,D,!1),M&&(q.el=M);const R=!M&&x.subTree.el;g(x,q,E(M||x.subTree.el),M?null:b(x.subTree),N,o,l),R&&P(R),ok(x,q.el),_&&--N.deps===0&&N.resolve()})},unmount(x,g){N.isUnmounted=!0,N.activeBranch&&v(N.activeBranch,n,x,g),N.pendingBranch&&v(N.pendingBranch,n,x,g)}};return N}function fY(t,e,n,r,i,s,o,a,l){const u=e.suspense=ak(e,r,n,t.parentNode,document.createElement("div"),null,i,s,o,a,!0),c=l(t,u.pendingBranch=e.ssContent,n,u,s,o);return u.deps===0&&u.resolve(!1,!0),c}function hY(t){const{shapeFlag:e,children:n}=t,r=e&32;t.ssContent=B2(r?n.default:n),t.ssFallback=r?B2(n.fallback):lt(Ki)}function B2(t){let e;if(qt(t)){const n=If&&t._c;n&&(t._d=!1,Ze()),t=t(),n&&(t._d=!0,e=Vs,mD())}return mt(t)&&(t=rY(t)),t=lo(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function jL(t,e){e&&e.pendingBranch?mt(t)?e.effects.push(...t):e.effects.push(t):ik(t)}function Zh(t,e){t.activeBranch=e;const{vnode:n,parentComponent:r}=t,i=n.el=e.el;r&&r.subTree===n&&(r.vnode.el=i,ok(r,i))}function dY(t){var e;return((e=t.props)==null?void 0:e.suspensible)!=null&&t.props.suspensible!==!1}function pY(t,e){return Mm(t,null,e)}function zL(t,e){return Mm(t,null,{flush:"post"})}function gY(t,e){return Mm(t,null,{flush:"sync"})}const m0={};function Ai(t,e,n){return Mm(t,e,n)}function Mm(t,e,{immediate:n,deep:r,flush:i,onTrack:s,onTrigger:o}=Jn){var a;const l=YA()===((a=Gr)==null?void 0:a.scope)?Gr:null;let u,c=!1,f=!1;if(kr(t)?(u=()=>t.value,c=Ig(t)):Ul(t)?(u=()=>t,r=!0):mt(t)?(f=!0,c=t.some(N=>Ul(N)||Ig(N)),u=()=>t.map(N=>{if(kr(N))return N.value;if(Ul(N))return af(N);if(qt(N))return ql(N,l,2)})):qt(t)?e?u=()=>ql(t,l,2):u=()=>{if(!(l&&l.isUnmounted))return p&&p(),go(t,l,3,[v])}:u=ba,e&&r){const N=u;u=()=>af(N())}let p,v=N=>{p=A.onStop=()=>{ql(N,l,4)}},b;if(xd)if(v=ba,e?n&&go(e,l,3,[u(),f?[]:void 0,v]):u(),i==="sync"){const N=PD();b=N.__watcherHandles||(N.__watcherHandles=[])}else return ba;let E=f?new Array(t.length).fill(m0):m0;const P=()=>{if(A.active)if(e){const N=A.run();(r||c||(f?N.some((x,g)=>bd(x,E[g])):bd(N,E)))&&(p&&p(),go(e,l,3,[N,E===m0?void 0:f&&E[0]===m0?[]:E,v]),E=N)}else A.run()};P.allowRecurse=!!e;let S;i==="sync"?S=P:i==="post"?S=()=>Ei(P,l&&l.suspense):(P.pre=!0,l&&(P.id=l.uid),S=()=>A1(P));const A=new Om(u,S);e?n?P():E=A.run():i==="post"?Ei(A.run.bind(A),l&&l.suspense):A.run();const I=()=>{A.stop(),l&&l.scope&&UA(l.scope.effects,A)};return b&&b.push(I),I}function mY(t,e,n){const r=this.proxy,i=Sr(t)?t.includes(".")?HL(r,t):()=>r[t]:t.bind(r,r);let s;qt(e)?s=e:(s=e.handler,n=e);const o=Gr;rc(this);const a=Mm(i,s.bind(r),n);return o?rc(o):Wu(),a}function HL(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function af(t,e){if(!Zn(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),kr(t))af(t.value,e);else if(mt(t))for(let n=0;n<t.length;n++)af(t[n],e);else if(Uf(t)||Yh(t))t.forEach(n=>{af(n,e)});else if(pL(t))for(const n in t)af(t[n],e);return t}function eu(t,e){const n=vi;if(n===null)return t;const r=I1(n)||n.proxy,i=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[o,a,l,u=Jn]=e[s];o&&(qt(o)&&(o={mounted:o,updated:o}),o.deep&&af(a),i.push({dir:o,instance:r,value:a,oldValue:void 0,arg:l,modifiers:u}))}return t}function za(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(jd(),go(l,n,8,[t.el,a,t,e]),zd())}}function lk(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Hd(()=>{t.isMounted=!0}),Im(()=>{t.isUnmounting=!0}),t}const No=[Function,Array],uk={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:No,onEnter:No,onAfterEnter:No,onEnterCancelled:No,onBeforeLeave:No,onLeave:No,onAfterLeave:No,onLeaveCancelled:No,onBeforeAppear:No,onAppear:No,onAfterAppear:No,onAppearCancelled:No},vY={name:"BaseTransition",props:uk,setup(t,{slots:e}){const n=cl(),r=lk();let i;return()=>{const s=e.default&&P1(e.default(),!0);if(!s||!s.length)return;let o=s[0];if(s.length>1){for(const E of s)if(E.type!==Ki){o=E;break}}const a=mn(t),{mode:l}=a;if(r.isLeaving)return Zx(o);const u=j2(o);if(!u)return Zx(o);const c=wd(u,a,r,n);Tf(u,c);const f=n.subTree,p=f&&j2(f);let v=!1;const{getTransitionKey:b}=u.type;if(b){const E=b();i===void 0?i=E:E!==i&&(i=E,v=!0)}if(p&&p.type!==Ki&&(!ha(u,p)||v)){const E=wd(p,a,r,n);if(Tf(p,E),l==="out-in")return r.isLeaving=!0,E.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&n.update()},Zx(o);l==="in-out"&&u.type!==Ki&&(E.delayLeave=(P,S,A)=>{const I=qL(r,p);I[String(p.key)]=p,P._leaveCb=()=>{S(),P._leaveCb=void 0,delete c.delayedLeave},c.delayedLeave=A})}return o}}},UL=vY;function qL(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function wd(t,e,n,r){const{appear:i,mode:s,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:u,onEnterCancelled:c,onBeforeLeave:f,onLeave:p,onAfterLeave:v,onLeaveCancelled:b,onBeforeAppear:E,onAppear:P,onAfterAppear:S,onAppearCancelled:A}=e,I=String(t.key),N=qL(n,t),x=(M,D)=>{M&&go(M,r,9,D)},g=(M,D)=>{const q=D[1];x(M,D),mt(M)?M.every(R=>R.length<=1)&&q():M.length<=1&&q()},_={mode:s,persisted:o,beforeEnter(M){let D=a;if(!n.isMounted)if(i)D=E||a;else return;M._leaveCb&&M._leaveCb(!0);const q=N[I];q&&ha(t,q)&&q.el._leaveCb&&q.el._leaveCb(),x(D,[M])},enter(M){let D=l,q=u,R=c;if(!n.isMounted)if(i)D=P||l,q=S||u,R=A||c;else return;let W=!1;const G=M._enterCb=Z=>{W||(W=!0,Z?x(R,[M]):x(q,[M]),_.delayedLeave&&_.delayedLeave(),M._enterCb=void 0)};D?g(D,[M,G]):G()},leave(M,D){const q=String(t.key);if(M._enterCb&&M._enterCb(!0),n.isUnmounting)return D();x(f,[M]);let R=!1;const W=M._leaveCb=G=>{R||(R=!0,D(),G?x(b,[M]):x(v,[M]),M._leaveCb=void 0,N[q]===t&&delete N[q])};N[q]=t,p?g(p,[M,W]):W()},clone(M){return wd(M,e,n,r)}};return _}function Zx(t){if(Nm(t))return t=ol(t),t.children=null,t}function j2(t){return Nm(t)?t.children?t.children[0]:void 0:t}function Tf(t,e){t.shapeFlag&6&&t.component?Tf(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function P1(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===lr?(o.patchFlag&128&&i++,r=r.concat(P1(o.children,e,a))):(e||o.type!==Ki)&&r.push(a!=null?ol(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}function fi(t,e){return qt(t)?(()=>cr({name:t.name},e,{setup:t}))():t}const vf=t=>!!t.type.__asyncLoader;function yY(t){qt(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:r,delay:i=200,timeout:s,suspensible:o=!0,onError:a}=t;let l=null,u,c=0;const f=()=>(c++,l=null,p()),p=()=>{let v;return l||(v=l=e().catch(b=>{if(b=b instanceof Error?b:new Error(String(b)),a)return new Promise((E,P)=>{a(b,()=>E(f()),()=>P(b),c+1)});throw b}).then(b=>v!==l&&l?l:(b&&(b.__esModule||b[Symbol.toStringTag]==="Module")&&(b=b.default),u=b,b)))};return fi({name:"AsyncComponentWrapper",__asyncLoader:p,get __asyncResolved(){return u},setup(){const v=Gr;if(u)return()=>Qx(u,v);const b=A=>{l=null,qf(A,v,13,!r)};if(o&&v.suspense||xd)return p().then(A=>()=>Qx(A,v)).catch(A=>(b(A),()=>r?lt(r,{error:A}):null));const E=qu(!1),P=qu(),S=qu(!!i);return i&&setTimeout(()=>{S.value=!1},i),s!=null&&setTimeout(()=>{if(!E.value&&!P.value){const A=new Error(`Async component timed out after ${s}ms.`);b(A),P.value=A}},s),p().then(()=>{E.value=!0,v.parent&&Nm(v.parent.vnode)&&A1(v.parent.update)}).catch(A=>{b(A),P.value=A}),()=>{if(E.value&&u)return Qx(u,v);if(P.value&&r)return lt(r,{error:P.value});if(n&&!S.value)return lt(n)}}})}function Qx(t,e){const{ref:n,props:r,children:i,ce:s}=e.vnode,o=lt(t,r,i);return o.ref=n,o.ce=s,delete e.vnode.ce,o}const Nm=t=>t.type.__isKeepAlive,bY={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=cl(),r=n.ctx;if(!r.renderer)return()=>{const A=e.default&&e.default();return A&&A.length===1?A[0]:A};const i=new Map,s=new Set;let o=null;const a=n.suspense,{renderer:{p:l,m:u,um:c,o:{createElement:f}}}=r,p=f("div");r.activate=(A,I,N,x,g)=>{const _=A.component;u(A,I,N,0,a),l(_.vnode,A,I,N,_,a,x,A.slotScopeIds,g),Ei(()=>{_.isDeactivated=!1,_.a&&Jh(_.a);const M=A.props&&A.props.onVnodeMounted;M&&Ms(M,_.parent,A)},a)},r.deactivate=A=>{const I=A.component;u(A,p,null,1,a),Ei(()=>{I.da&&Jh(I.da);const N=A.props&&A.props.onVnodeUnmounted;N&&Ms(N,I.parent,A),I.isDeactivated=!0},a)};function v(A){eS(A),c(A,n,a,!0)}function b(A){i.forEach((I,N)=>{const x=VE(I.type);x&&(!A||!A(x))&&E(N)})}function E(A){const I=i.get(A);!o||!ha(I,o)?v(I):o&&eS(o),i.delete(A),s.delete(A)}Ai(()=>[t.include,t.exclude],([A,I])=>{A&&b(N=>Yp(A,N)),I&&b(N=>!Yp(I,N))},{flush:"post",deep:!0});let P=null;const S=()=>{P!=null&&i.set(P,tS(n.subTree))};return Hd(S),T1(S),Im(()=>{i.forEach(A=>{const{subTree:I,suspense:N}=n,x=tS(I);if(A.type===x.type&&A.key===x.key){eS(x);const g=x.component.da;g&&Ei(g,N);return}v(A)})}),()=>{if(P=null,!e.default)return null;const A=e.default(),I=A[0];if(A.length>1)return o=null,A;if(!nc(I)||!(I.shapeFlag&4)&&!(I.shapeFlag&128))return o=null,I;let N=tS(I);const x=N.type,g=VE(vf(N)?N.type.__asyncResolved||{}:x),{include:_,exclude:M,max:D}=t;if(_&&(!g||!Yp(_,g))||M&&g&&Yp(M,g))return o=N,I;const q=N.key==null?x:N.key,R=i.get(q);return N.el&&(N=ol(N),I.shapeFlag&128&&(I.ssContent=N)),P=q,R?(N.el=R.el,N.component=R.component,N.transition&&Tf(N,N.transition),N.shapeFlag|=512,s.delete(q),s.add(q)):(s.add(q),D&&s.size>parseInt(D,10)&&E(s.values().next().value)),N.shapeFlag|=256,o=N,BL(I.type)?I:N}}},wY=bY;function Yp(t,e){return mt(t)?t.some(n=>Yp(n,e)):Sr(t)?t.split(",").includes(e):GG(t)?t.test(e):!1}function WL(t,e){KL(t,"a",e)}function GL(t,e){KL(t,"da",e)}function KL(t,e,n=Gr){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(O1(e,r,n),n){let i=n.parent;for(;i&&i.parent;)Nm(i.parent.vnode)&&xY(r,e,n,i),i=i.parent}}function xY(t,e,n,r){const i=O1(e,t,r,!0);M1(()=>{UA(r[e],i)},n)}function eS(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function tS(t){return t.shapeFlag&128?t.ssContent:t}function O1(t,e,n=Gr,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;jd(),rc(n);const a=go(e,n,t,o);return Wu(),zd(),a});return r?i.unshift(s):i.push(s),s}}const iu=t=>(e,n=Gr)=>(!xd||t==="sp")&&O1(t,(...r)=>e(...r),n),YL=iu("bm"),Hd=iu("m"),JL=iu("bu"),T1=iu("u"),Im=iu("bum"),M1=iu("um"),XL=iu("sp"),ZL=iu("rtg"),QL=iu("rtc");function eD(t,e=Gr){O1("ec",t,e)}const ck="components",SY="directives";function Fn(t,e){return fk(ck,t,!0,e)||t}const tD=Symbol.for("v-ndc");function EY(t){return Sr(t)?fk(ck,t,!1)||t:t||tD}function _Y(t){return fk(SY,t)}function fk(t,e,n=!0,r=!1){const i=vi||Gr;if(i){const s=i.type;if(t===ck){const a=VE(s,!1);if(a&&(a===e||a===zs(e)||a===Cm(zs(e))))return s}const o=z2(i[t]||s[t],e)||z2(i.appContext[t],e);return!o&&r?s:o}}function z2(t,e){return t&&(t[e]||t[zs(e)]||t[Cm(zs(e))])}function Mf(t,e,n,r){let i;const s=n&&n[r];if(mt(t)||Sr(t)){i=new Array(t.length);for(let o=0,a=t.length;o<a;o++)i[o]=e(t[o],o,void 0,s&&s[o])}else if(typeof t=="number"){i=new Array(t);for(let o=0;o<t;o++)i[o]=e(o+1,o,void 0,s&&s[o])}else if(Zn(t))if(t[Symbol.iterator])i=Array.from(t,(o,a)=>e(o,a,void 0,s&&s[a]));else{const o=Object.keys(t);i=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const u=o[a];i[a]=e(t[u],u,a,s&&s[a])}}else i=[];return n&&(n[r]=i),i}function AY(t,e){for(let n=0;n<e.length;n++){const r=e[n];if(mt(r))for(let i=0;i<r.length;i++)t[r[i].name]=r[i].fn;else r&&(t[r.name]=r.key?(...i)=>{const s=r.fn(...i);return s&&(s.key=r.key),s}:r.fn)}return t}function kY(t,e,n={},r,i){if(vi.isCE||vi.parent&&vf(vi.parent)&&vi.parent.isCE)return e!=="default"&&(n.name=e),lt("slot",n,r&&r());let s=t[e];s&&s._c&&(s._d=!1),Ze();const o=s&&nD(s(n)),a=oi(lr,{key:n.key||o&&o.key||`_${e}`},o||(r?r():[]),o&&t._===1?64:-2);return!i&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),s&&s._c&&(s._d=!0),a}function nD(t){return t.some(e=>nc(e)?!(e.type===Ki||e.type===lr&&!nD(e.children)):!0)?t:null}function CY(t,e){const n={};for(const r in t)n[e&&/[A-Z]/.test(r)?`on:${r}`:ag(r)]=t[r];return n}const TE=t=>t?ED(t)?I1(t)||t.proxy:TE(t.parent):null,ug=cr(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>TE(t.parent),$root:t=>TE(t.root),$emit:t=>t.emit,$options:t=>hk(t),$forceUpdate:t=>t.f||(t.f=()=>A1(t.update)),$nextTick:t=>t.n||(t.n=_1.bind(t.proxy)),$watch:t=>mY.bind(t)}),nS=(t,e)=>t!==Jn&&!t.__isScriptSetup&&Mn(t,e),ME={get({_:t},e){const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=t;let u;if(e[0]!=="$"){const v=o[e];if(v!==void 0)switch(v){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(nS(r,e))return o[e]=1,r[e];if(i!==Jn&&Mn(i,e))return o[e]=2,i[e];if((u=t.propsOptions[0])&&Mn(u,e))return o[e]=3,s[e];if(n!==Jn&&Mn(n,e))return o[e]=4,n[e];NE&&(o[e]=0)}}const c=ug[e];let f,p;if(c)return e==="$attrs"&&qs(t,"get",e),c(t);if((f=a.__cssModules)&&(f=f[e]))return f;if(n!==Jn&&Mn(n,e))return o[e]=4,n[e];if(p=l.config.globalProperties,Mn(p,e))return p[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return nS(i,e)?(i[e]=n,!0):r!==Jn&&Mn(r,e)?(r[e]=n,!0):Mn(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!n[o]||t!==Jn&&Mn(t,o)||nS(e,o)||(a=s[0])&&Mn(a,o)||Mn(r,o)||Mn(ug,o)||Mn(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Mn(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}},PY=cr({},ME,{get(t,e){if(e!==Symbol.unscopables)return ME.get(t,e,t)},has(t,e){return e[0]!=="_"&&!ZG(e)}});function OY(){return null}function TY(){return null}function MY(t){}function NY(t){}function IY(){return null}function $Y(){}function RY(t,e){return null}function LY(){return rD().slots}function DY(){return rD().attrs}function FY(t,e,n){const r=cl();if(n&&n.local){const i=qu(t[e]);return Ai(()=>t[e],s=>i.value=s),Ai(i,s=>{s!==t[e]&&r.emit(`update:${e}`,s)}),i}else return{__v_isRef:!0,get value(){return t[e]},set value(i){r.emit(`update:${e}`,i)}}}function rD(){const t=cl();return t.setupContext||(t.setupContext=kD(t))}function Vg(t){return mt(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function VY(t,e){const n=Vg(t);for(const r in e){if(r.startsWith("__skip"))continue;let i=n[r];i?mt(i)||qt(i)?i=n[r]={type:i,default:e[r]}:i.default=e[r]:i===null&&(i=n[r]={default:e[r]}),i&&e[`__skip_${r}`]&&(i.skipFactory=!0)}return n}function BY(t,e){return!t||!e?t||e:mt(t)&&mt(e)?t.concat(e):cr({},Vg(t),Vg(e))}function jY(t,e){const n={};for(const r in t)e.includes(r)||Object.defineProperty(n,r,{enumerable:!0,get:()=>t[r]});return n}function zY(t){const e=cl();let n=t();return Wu(),qA(n)&&(n=n.catch(r=>{throw rc(e),r})),[n,()=>rc(e)]}let NE=!0;function HY(t){const e=hk(t),n=t.proxy,r=t.ctx;NE=!1,e.beforeCreate&&H2(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:u,created:c,beforeMount:f,mounted:p,beforeUpdate:v,updated:b,activated:E,deactivated:P,beforeDestroy:S,beforeUnmount:A,destroyed:I,unmounted:N,render:x,renderTracked:g,renderTriggered:_,errorCaptured:M,serverPrefetch:D,expose:q,inheritAttrs:R,components:W,directives:G,filters:Z}=e;if(u&&UY(u,r,null),o)for(const _e in o){const Te=o[_e];qt(Te)&&(r[_e]=Te.bind(n))}if(i){const _e=i.call(n,n);Zn(_e)&&(t.data=Tm(_e))}if(NE=!0,s)for(const _e in s){const Te=s[_e],Le=qt(Te)?Te.bind(n,n):qt(Te.get)?Te.get.bind(n,n):ba,Ee=!qt(Te)&&qt(Te.set)?Te.set.bind(n):ba,re=qa({get:Le,set:Ee});Object.defineProperty(r,_e,{enumerable:!0,configurable:!0,get:()=>re.value,set:ne=>re.value=ne})}if(a)for(const _e in a)iD(a[_e],r,n,_e);if(l){const _e=qt(l)?l.call(n):l;Reflect.ownKeys(_e).forEach(Te=>{oD(Te,_e[Te])})}c&&H2(c,t,"c");function be(_e,Te){mt(Te)?Te.forEach(Le=>_e(Le.bind(n))):Te&&_e(Te.bind(n))}if(be(YL,f),be(Hd,p),be(JL,v),be(T1,b),be(WL,E),be(GL,P),be(eD,M),be(QL,g),be(ZL,_),be(Im,A),be(M1,N),be(XL,D),mt(q))if(q.length){const _e=t.exposed||(t.exposed={});q.forEach(Te=>{Object.defineProperty(_e,Te,{get:()=>n[Te],set:Le=>n[Te]=Le})})}else t.exposed||(t.exposed={});x&&t.render===ba&&(t.render=x),R!=null&&(t.inheritAttrs=R),W&&(t.components=W),G&&(t.directives=G)}function UY(t,e,n=ba){mt(t)&&(t=IE(t));for(const r in t){const i=t[r];let s;Zn(i)?"default"in i?s=yf(i.from||r,i.default,!0):s=yf(i.from||r):s=yf(i),kr(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function H2(t,e,n){go(mt(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function iD(t,e,n,r){const i=r.includes(".")?HL(n,r):()=>n[r];if(Sr(t)){const s=e[t];qt(s)&&Ai(i,s)}else if(qt(t))Ai(i,t.bind(n));else if(Zn(t))if(mt(t))t.forEach(s=>iD(s,e,n,r));else{const s=qt(t.handler)?t.handler.bind(n):e[t.handler];qt(s)&&Ai(i,s,t)}}function hk(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!n&&!r?l=e:(l={},i.length&&i.forEach(u=>rb(l,u,o,!0)),rb(l,e,o)),Zn(e)&&s.set(e,l),l}function rb(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&rb(t,s,n,!0),i&&i.forEach(o=>rb(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=qY[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const qY={data:U2,props:q2,emits:q2,methods:Jp,computed:Jp,beforeCreate:is,created:is,beforeMount:is,mounted:is,beforeUpdate:is,updated:is,beforeDestroy:is,beforeUnmount:is,destroyed:is,unmounted:is,activated:is,deactivated:is,errorCaptured:is,serverPrefetch:is,components:Jp,directives:Jp,watch:GY,provide:U2,inject:WY};function U2(t,e){return e?t?function(){return cr(qt(t)?t.call(this,this):t,qt(e)?e.call(this,this):e)}:e:t}function WY(t,e){return Jp(IE(t),IE(e))}function IE(t){if(mt(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function is(t,e){return t?[...new Set([].concat(t,e))]:e}function Jp(t,e){return t?cr(Object.create(null),t,e):e}function q2(t,e){return t?mt(t)&&mt(e)?[...new Set([...t,...e])]:cr(Object.create(null),Vg(t),Vg(e??{})):e}function GY(t,e){if(!t)return e;if(!e)return t;const n=cr(Object.create(null),t);for(const r in e)n[r]=is(t[r],e[r]);return n}function sD(){return{app:null,config:{isNativeTag:UG,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let KY=0;function YY(t,e){return function(r,i=null){qt(r)||(r=cr({},r)),i!=null&&!Zn(i)&&(i=null);const s=sD(),o=new Set;let a=!1;const l=s.app={_uid:KY++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:TD,get config(){return s.config},set config(u){},use(u,...c){return o.has(u)||(u&&qt(u.install)?(o.add(u),u.install(l,...c)):qt(u)&&(o.add(u),u(l,...c))),l},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),l},component(u,c){return c?(s.components[u]=c,l):s.components[u]},directive(u,c){return c?(s.directives[u]=c,l):s.directives[u]},mount(u,c,f){if(!a){const p=lt(r,i);return p.appContext=s,c&&e?e(p,u):t(p,u,f),a=!0,l._container=u,u.__vue_app__=l,I1(p.component)||p.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(u,c){return s.provides[u]=c,l},runWithContext(u){Bg=l;try{return u()}finally{Bg=null}}};return l}}let Bg=null;function oD(t,e){if(Gr){let n=Gr.provides;const r=Gr.parent&&Gr.parent.provides;r===n&&(n=Gr.provides=Object.create(r)),n[t]=e}}function yf(t,e,n=!1){const r=Gr||vi;if(r||Bg){const i=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Bg._context.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&qt(e)?e.call(r&&r.proxy):e}}function JY(){return!!(Gr||vi||Bg)}function XY(t,e,n,r=!1){const i={},s={};Zy(s,N1,1),t.propsDefaults=Object.create(null),aD(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:ML(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function ZY(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=mn(i),[l]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const c=t.vnode.dynamicProps;for(let f=0;f<c.length;f++){let p=c[f];if(k1(t.emitsOptions,p))continue;const v=e[p];if(l)if(Mn(s,p))v!==s[p]&&(s[p]=v,u=!0);else{const b=zs(p);i[b]=$E(l,a,b,v,t,!1)}else v!==s[p]&&(s[p]=v,u=!0)}}}else{aD(t,e,i,s)&&(u=!0);let c;for(const f in a)(!e||!Mn(e,f)&&((c=Fo(f))===f||!Mn(e,c)))&&(l?n&&(n[f]!==void 0||n[c]!==void 0)&&(i[f]=$E(l,a,f,void 0,t,!0)):delete i[f]);if(s!==a)for(const f in s)(!e||!Mn(e,f))&&(delete s[f],u=!0)}u&&Ql(t,"set","$attrs")}function aD(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(og(l))continue;const u=e[l];let c;i&&Mn(i,c=zs(l))?!s||!s.includes(c)?n[c]=u:(a||(a={}))[c]=u:k1(t.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(s){const l=mn(n),u=a||Jn;for(let c=0;c<s.length;c++){const f=s[c];n[f]=$E(i,l,f,u[f],t,!Mn(u,f))}}return o}function $E(t,e,n,r,i,s){const o=t[n];if(o!=null){const a=Mn(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&qt(l)){const{propsDefaults:u}=i;n in u?r=u[n]:(rc(i),r=u[n]=l.call(null,e),Wu())}else r=l}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===Fo(n))&&(r=!0))}return r}function lD(t,e,n=!1){const r=e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},a=[];let l=!1;if(!qt(t)){const c=f=>{l=!0;const[p,v]=lD(f,e,!0);cr(o,p),v&&a.push(...v)};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!s&&!l)return Zn(t)&&r.set(t,Kh),Kh;if(mt(s))for(let c=0;c<s.length;c++){const f=zs(s[c]);W2(f)&&(o[f]=Jn)}else if(s)for(const c in s){const f=zs(c);if(W2(f)){const p=s[c],v=o[f]=mt(p)||qt(p)?{type:p}:cr({},p);if(v){const b=Y2(Boolean,v.type),E=Y2(String,v.type);v[0]=b>-1,v[1]=E<0||b<E,(b>-1||Mn(v,"default"))&&a.push(f)}}}const u=[o,a];return Zn(t)&&r.set(t,u),u}function W2(t){return t[0]!=="$"}function G2(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function K2(t,e){return G2(t)===G2(e)}function Y2(t,e){return mt(e)?e.findIndex(n=>K2(n,t)):qt(e)&&K2(e,t)?0:-1}const uD=t=>t[0]==="_"||t==="$stable",dk=t=>mt(t)?t.map(lo):[lo(t)],QY=(t,e,n)=>{if(e._n)return e;const r=sk((...i)=>dk(e(...i)),n);return r._c=!1,r},cD=(t,e,n)=>{const r=t._ctx;for(const i in t){if(uD(i))continue;const s=t[i];if(qt(s))e[i]=QY(i,s,r);else if(s!=null){const o=dk(s);e[i]=()=>o}}},fD=(t,e)=>{const n=dk(e);t.slots.default=()=>n},eJ=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=mn(e),Zy(e,"_",n)):cD(e,t.slots={})}else t.slots={},e&&fD(t,e);Zy(t.slots,N1,1)},tJ=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=Jn;if(r.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:(cr(i,e),!n&&a===1&&delete i._):(s=!e.$stable,cD(e,i)),o=e}else e&&(fD(t,e),o={default:1});if(s)for(const a in i)!uD(a)&&!(a in o)&&delete i[a]};function ib(t,e,n,r,i=!1){if(mt(t)){t.forEach((p,v)=>ib(p,e&&(mt(e)?e[v]:e),n,r,i));return}if(vf(r)&&!i)return;const s=r.shapeFlag&4?I1(r.component)||r.component.proxy:r.el,o=i?null:s,{i:a,r:l}=t,u=e&&e.r,c=a.refs===Jn?a.refs={}:a.refs,f=a.setupState;if(u!=null&&u!==l&&(Sr(u)?(c[u]=null,Mn(f,u)&&(f[u]=null)):kr(u)&&(u.value=null)),qt(l))ql(l,a,12,[o,c]);else{const p=Sr(l),v=kr(l);if(p||v){const b=()=>{if(t.f){const E=p?Mn(f,l)?f[l]:c[l]:l.value;i?mt(E)&&UA(E,s):mt(E)?E.includes(s)||E.push(s):p?(c[l]=[s],Mn(f,l)&&(f[l]=c[l])):(l.value=[s],t.k&&(c[t.k]=l.value))}else p?(c[l]=o,Mn(f,l)&&(f[l]=o)):v&&(l.value=o,t.k&&(c[t.k]=o))};o?(b.id=-1,Ei(b,n)):b()}}}let _u=!1;const v0=t=>/svg/.test(t.namespaceURI)&&t.tagName!=="foreignObject",y0=t=>t.nodeType===8;function nJ(t){const{mt:e,p:n,o:{patchProp:r,createText:i,nextSibling:s,parentNode:o,remove:a,insert:l,createComment:u}}=t,c=(S,A)=>{if(!A.hasChildNodes()){n(null,S,A),nb(),A._vnode=S;return}_u=!1,f(A.firstChild,S,null,null,null),nb(),A._vnode=S,_u&&console.error("Hydration completed but contains mismatches.")},f=(S,A,I,N,x,g=!1)=>{const _=y0(S)&&S.data==="[",M=()=>E(S,A,I,N,x,_),{type:D,ref:q,shapeFlag:R,patchFlag:W}=A;let G=S.nodeType;A.el=S,W===-2&&(g=!1,A.dynamicChildren=null);let Z=null;switch(D){case Nf:G!==3?A.children===""?(l(A.el=i(""),o(S),S),Z=S):Z=M():(S.data!==A.children&&(_u=!0,S.data=A.children),Z=s(S));break;case Ki:G!==8||_?Z=M():Z=s(S);break;case bf:if(_&&(S=s(S),G=S.nodeType),G===1||G===3){Z=S;const de=!A.children.length;for(let be=0;be<A.staticCount;be++)de&&(A.children+=Z.nodeType===1?Z.outerHTML:Z.data),be===A.staticCount-1&&(A.anchor=Z),Z=s(Z);return _?s(Z):Z}else M();break;case lr:_?Z=b(S,A,I,N,x,g):Z=M();break;default:if(R&1)G!==1||A.type.toLowerCase()!==S.tagName.toLowerCase()?Z=M():Z=p(S,A,I,N,x,g);else if(R&6){A.slotScopeIds=x;const de=o(S);if(e(A,de,null,I,N,v0(de),g),Z=_?P(S):s(S),Z&&y0(Z)&&Z.data==="teleport end"&&(Z=s(Z)),vf(A)){let be;_?(be=lt(lr),be.anchor=Z?Z.previousSibling:de.lastChild):be=S.nodeType===3?Kr(""):lt("div"),be.el=S,A.component.subTree=be}}else R&64?G!==8?Z=M():Z=A.type.hydrate(S,A,I,N,x,g,t,v):R&128&&(Z=A.type.hydrate(S,A,I,N,v0(o(S)),x,g,t,f))}return q!=null&&ib(q,null,N,A),Z},p=(S,A,I,N,x,g)=>{g=g||!!A.dynamicChildren;const{type:_,props:M,patchFlag:D,shapeFlag:q,dirs:R}=A,W=_==="input"&&R||_==="option";if(W||D!==-1){if(R&&za(A,null,I,"created"),M)if(W||!g||D&48)for(const Z in M)(W&&Z.endsWith("value")||km(Z)&&!og(Z))&&r(S,Z,null,M[Z],!1,void 0,I);else M.onClick&&r(S,"onClick",null,M.onClick,!1,void 0,I);let G;if((G=M&&M.onVnodeBeforeMount)&&Ms(G,I,A),R&&za(A,null,I,"beforeMount"),((G=M&&M.onVnodeMounted)||R)&&jL(()=>{G&&Ms(G,I,A),R&&za(A,null,I,"mounted")},N),q&16&&!(M&&(M.innerHTML||M.textContent))){let Z=v(S.firstChild,A,S,I,N,x,g);for(;Z;){_u=!0;const de=Z;Z=Z.nextSibling,a(de)}}else q&8&&S.textContent!==A.children&&(_u=!0,S.textContent=A.children)}return S.nextSibling},v=(S,A,I,N,x,g,_)=>{_=_||!!A.dynamicChildren;const M=A.children,D=M.length;for(let q=0;q<D;q++){const R=_?M[q]:M[q]=lo(M[q]);if(S)S=f(S,R,N,x,g,_);else{if(R.type===Nf&&!R.children)continue;_u=!0,n(null,R,I,null,N,x,v0(I),g)}}return S},b=(S,A,I,N,x,g)=>{const{slotScopeIds:_}=A;_&&(x=x?x.concat(_):_);const M=o(S),D=v(s(S),A,M,I,N,x,g);return D&&y0(D)&&D.data==="]"?s(A.anchor=D):(_u=!0,l(A.anchor=u("]"),M,D),D)},E=(S,A,I,N,x,g)=>{if(_u=!0,A.el=null,g){const D=P(S);for(;;){const q=s(S);if(q&&q!==D)a(q);else break}}const _=s(S),M=o(S);return a(S),n(null,A,M,_,I,N,v0(M),x),_},P=S=>{let A=0;for(;S;)if(S=s(S),S&&y0(S)&&(S.data==="["&&A++,S.data==="]")){if(A===0)return s(S);A--}return S};return[c,f]}const Ei=jL;function hD(t){return pD(t)}function dD(t){return pD(t,nJ)}function pD(t,e){const n=AE();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:u,setElementText:c,parentNode:f,nextSibling:p,setScopeId:v=ba,insertStaticContent:b}=t,E=(z,K,C,$=null,V=null,Q=null,ce=!1,ue=null,ke=!!K.dynamicChildren)=>{if(z===K)return;z&&!ha(z,K)&&($=Fe(z),ne(z,V,Q,!0),z=null),K.patchFlag===-2&&(ke=!1,K.dynamicChildren=null);const{type:Ae,ref:tt,shapeFlag:Je}=K;switch(Ae){case Nf:P(z,K,C,$);break;case Ki:S(z,K,C,$);break;case bf:z==null&&A(K,C,$,ce);break;case lr:W(z,K,C,$,V,Q,ce,ue,ke);break;default:Je&1?x(z,K,C,$,V,Q,ce,ue,ke):Je&6?G(z,K,C,$,V,Q,ce,ue,ke):(Je&64||Je&128)&&Ae.process(z,K,C,$,V,Q,ce,ue,ke,Be)}tt!=null&&V&&ib(tt,z&&z.ref,Q,K||z,!K)},P=(z,K,C,$)=>{if(z==null)r(K.el=a(K.children),C,$);else{const V=K.el=z.el;K.children!==z.children&&u(V,K.children)}},S=(z,K,C,$)=>{z==null?r(K.el=l(K.children||""),C,$):K.el=z.el},A=(z,K,C,$)=>{[z.el,z.anchor]=b(z.children,K,C,$,z.el,z.anchor)},I=({el:z,anchor:K},C,$)=>{let V;for(;z&&z!==K;)V=p(z),r(z,C,$),z=V;r(K,C,$)},N=({el:z,anchor:K})=>{let C;for(;z&&z!==K;)C=p(z),i(z),z=C;i(K)},x=(z,K,C,$,V,Q,ce,ue,ke)=>{ce=ce||K.type==="svg",z==null?g(K,C,$,V,Q,ce,ue,ke):D(z,K,V,Q,ce,ue,ke)},g=(z,K,C,$,V,Q,ce,ue)=>{let ke,Ae;const{type:tt,props:Je,shapeFlag:Xe,transition:Ye,dirs:ft}=z;if(ke=z.el=o(z.type,Q,Je&&Je.is,Je),Xe&8?c(ke,z.children):Xe&16&&M(z.children,ke,null,$,V,Q&&tt!=="foreignObject",ce,ue),ft&&za(z,null,$,"created"),_(ke,z,z.scopeId,ce,$),Je){for(const Vt in Je)Vt!=="value"&&!og(Vt)&&s(ke,Vt,null,Je[Vt],Q,z.children,$,V,ye);"value"in Je&&s(ke,"value",null,Je.value),(Ae=Je.onVnodeBeforeMount)&&Ms(Ae,$,z)}ft&&za(z,null,$,"beforeMount");const Nt=(!V||V&&!V.pendingBranch)&&Ye&&!Ye.persisted;Nt&&Ye.beforeEnter(ke),r(ke,K,C),((Ae=Je&&Je.onVnodeMounted)||Nt||ft)&&Ei(()=>{Ae&&Ms(Ae,$,z),Nt&&Ye.enter(ke),ft&&za(z,null,$,"mounted")},V)},_=(z,K,C,$,V)=>{if(C&&v(z,C),$)for(let Q=0;Q<$.length;Q++)v(z,$[Q]);if(V){let Q=V.subTree;if(K===Q){const ce=V.vnode;_(z,ce,ce.scopeId,ce.slotScopeIds,V.parent)}}},M=(z,K,C,$,V,Q,ce,ue,ke=0)=>{for(let Ae=ke;Ae<z.length;Ae++){const tt=z[Ae]=ue?$u(z[Ae]):lo(z[Ae]);E(null,tt,K,C,$,V,Q,ce,ue)}},D=(z,K,C,$,V,Q,ce)=>{const ue=K.el=z.el;let{patchFlag:ke,dynamicChildren:Ae,dirs:tt}=K;ke|=z.patchFlag&16;const Je=z.props||Jn,Xe=K.props||Jn;let Ye;C&&jc(C,!1),(Ye=Xe.onVnodeBeforeUpdate)&&Ms(Ye,C,K,z),tt&&za(K,z,C,"beforeUpdate"),C&&jc(C,!0);const ft=V&&K.type!=="foreignObject";if(Ae?q(z.dynamicChildren,Ae,ue,C,$,ft,Q):ce||Te(z,K,ue,null,C,$,ft,Q,!1),ke>0){if(ke&16)R(ue,K,Je,Xe,C,$,V);else if(ke&2&&Je.class!==Xe.class&&s(ue,"class",null,Xe.class,V),ke&4&&s(ue,"style",Je.style,Xe.style,V),ke&8){const Nt=K.dynamicProps;for(let Vt=0;Vt<Nt.length;Vt++){const yt=Nt[Vt],Gt=Je[yt],qn=Xe[yt];(qn!==Gt||yt==="value")&&s(ue,yt,Gt,qn,V,z.children,C,$,ye)}}ke&1&&z.children!==K.children&&c(ue,K.children)}else!ce&&Ae==null&&R(ue,K,Je,Xe,C,$,V);((Ye=Xe.onVnodeUpdated)||tt)&&Ei(()=>{Ye&&Ms(Ye,C,K,z),tt&&za(K,z,C,"updated")},$)},q=(z,K,C,$,V,Q,ce)=>{for(let ue=0;ue<K.length;ue++){const ke=z[ue],Ae=K[ue],tt=ke.el&&(ke.type===lr||!ha(ke,Ae)||ke.shapeFlag&70)?f(ke.el):C;E(ke,Ae,tt,null,$,V,Q,ce,!0)}},R=(z,K,C,$,V,Q,ce)=>{if(C!==$){if(C!==Jn)for(const ue in C)!og(ue)&&!(ue in $)&&s(z,ue,C[ue],null,ce,K.children,V,Q,ye);for(const ue in $){if(og(ue))continue;const ke=$[ue],Ae=C[ue];ke!==Ae&&ue!=="value"&&s(z,ue,Ae,ke,ce,K.children,V,Q,ye)}"value"in $&&s(z,"value",C.value,$.value)}},W=(z,K,C,$,V,Q,ce,ue,ke)=>{const Ae=K.el=z?z.el:a(""),tt=K.anchor=z?z.anchor:a("");let{patchFlag:Je,dynamicChildren:Xe,slotScopeIds:Ye}=K;Ye&&(ue=ue?ue.concat(Ye):Ye),z==null?(r(Ae,C,$),r(tt,C,$),M(K.children,C,tt,V,Q,ce,ue,ke)):Je>0&&Je&64&&Xe&&z.dynamicChildren?(q(z.dynamicChildren,Xe,C,V,Q,ce,ue),(K.key!=null||V&&K===V.subTree)&&pk(z,K,!0)):Te(z,K,C,tt,V,Q,ce,ue,ke)},G=(z,K,C,$,V,Q,ce,ue,ke)=>{K.slotScopeIds=ue,z==null?K.shapeFlag&512?V.ctx.activate(K,C,$,ce,ke):Z(K,C,$,V,Q,ce,ke):de(z,K,ke)},Z=(z,K,C,$,V,Q,ce)=>{const ue=z.component=SD(z,$,V);if(Nm(z)&&(ue.ctx.renderer=Be),_D(ue),ue.asyncDep){if(V&&V.registerDep(ue,be),!z.el){const ke=ue.subTree=lt(Ki);S(null,ke,K,C)}return}be(ue,z,K,C,V,Q,ce)},de=(z,K,C)=>{const $=K.component=z.component;if(oY(z,K,C))if($.asyncDep&&!$.asyncResolved){_e($,K,C);return}else $.next=K,QK($.update),$.update();else K.el=z.el,$.vnode=K},be=(z,K,C,$,V,Q,ce)=>{const ue=()=>{if(z.isMounted){let{next:tt,bu:Je,u:Xe,parent:Ye,vnode:ft}=z,Nt=tt,Vt;jc(z,!1),tt?(tt.el=ft.el,_e(z,tt,ce)):tt=ft,Je&&Jh(Je),(Vt=tt.props&&tt.props.onVnodeBeforeUpdate)&&Ms(Vt,Ye,tt,ft),jc(z,!0);const yt=_y(z),Gt=z.subTree;z.subTree=yt,E(Gt,yt,f(Gt.el),Fe(Gt),z,V,Q),tt.el=yt.el,Nt===null&&ok(z,yt.el),Xe&&Ei(Xe,V),(Vt=tt.props&&tt.props.onVnodeUpdated)&&Ei(()=>Ms(Vt,Ye,tt,ft),V)}else{let tt;const{el:Je,props:Xe}=K,{bm:Ye,m:ft,parent:Nt}=z,Vt=vf(K);if(jc(z,!1),Ye&&Jh(Ye),!Vt&&(tt=Xe&&Xe.onVnodeBeforeMount)&&Ms(tt,Nt,K),jc(z,!0),Je&&Ve){const yt=()=>{z.subTree=_y(z),Ve(Je,z.subTree,z,V,null)};Vt?K.type.__asyncLoader().then(()=>!z.isUnmounted&&yt()):yt()}else{const yt=z.subTree=_y(z);E(null,yt,C,$,z,V,Q),K.el=yt.el}if(ft&&Ei(ft,V),!Vt&&(tt=Xe&&Xe.onVnodeMounted)){const yt=K;Ei(()=>Ms(tt,Nt,yt),V)}(K.shapeFlag&256||Nt&&vf(Nt.vnode)&&Nt.vnode.shapeFlag&256)&&z.a&&Ei(z.a,V),z.isMounted=!0,K=C=$=null}},ke=z.effect=new Om(ue,()=>A1(Ae),z.scope),Ae=z.update=()=>ke.run();Ae.id=z.uid,jc(z,!0),Ae()},_e=(z,K,C)=>{K.component=z;const $=z.vnode.props;z.vnode=K,z.next=null,ZY(z,K.props,$,C),tJ(z,K.children,C),jd(),F2(),zd()},Te=(z,K,C,$,V,Q,ce,ue,ke=!1)=>{const Ae=z&&z.children,tt=z?z.shapeFlag:0,Je=K.children,{patchFlag:Xe,shapeFlag:Ye}=K;if(Xe>0){if(Xe&128){Ee(Ae,Je,C,$,V,Q,ce,ue,ke);return}else if(Xe&256){Le(Ae,Je,C,$,V,Q,ce,ue,ke);return}}Ye&8?(tt&16&&ye(Ae,V,Q),Je!==Ae&&c(C,Je)):tt&16?Ye&16?Ee(Ae,Je,C,$,V,Q,ce,ue,ke):ye(Ae,V,Q,!0):(tt&8&&c(C,""),Ye&16&&M(Je,C,$,V,Q,ce,ue,ke))},Le=(z,K,C,$,V,Q,ce,ue,ke)=>{z=z||Kh,K=K||Kh;const Ae=z.length,tt=K.length,Je=Math.min(Ae,tt);let Xe;for(Xe=0;Xe<Je;Xe++){const Ye=K[Xe]=ke?$u(K[Xe]):lo(K[Xe]);E(z[Xe],Ye,C,null,V,Q,ce,ue,ke)}Ae>tt?ye(z,V,Q,!0,!1,Je):M(K,C,$,V,Q,ce,ue,ke,Je)},Ee=(z,K,C,$,V,Q,ce,ue,ke)=>{let Ae=0;const tt=K.length;let Je=z.length-1,Xe=tt-1;for(;Ae<=Je&&Ae<=Xe;){const Ye=z[Ae],ft=K[Ae]=ke?$u(K[Ae]):lo(K[Ae]);if(ha(Ye,ft))E(Ye,ft,C,null,V,Q,ce,ue,ke);else break;Ae++}for(;Ae<=Je&&Ae<=Xe;){const Ye=z[Je],ft=K[Xe]=ke?$u(K[Xe]):lo(K[Xe]);if(ha(Ye,ft))E(Ye,ft,C,null,V,Q,ce,ue,ke);else break;Je--,Xe--}if(Ae>Je){if(Ae<=Xe){const Ye=Xe+1,ft=Ye<tt?K[Ye].el:$;for(;Ae<=Xe;)E(null,K[Ae]=ke?$u(K[Ae]):lo(K[Ae]),C,ft,V,Q,ce,ue,ke),Ae++}}else if(Ae>Xe)for(;Ae<=Je;)ne(z[Ae],V,Q,!0),Ae++;else{const Ye=Ae,ft=Ae,Nt=new Map;for(Ae=ft;Ae<=Xe;Ae++){const Qn=K[Ae]=ke?$u(K[Ae]):lo(K[Ae]);Qn.key!=null&&Nt.set(Qn.key,Ae)}let Vt,yt=0;const Gt=Xe-ft+1;let qn=!1,Or=0;const ir=new Array(Gt);for(Ae=0;Ae<Gt;Ae++)ir[Ae]=0;for(Ae=Ye;Ae<=Je;Ae++){const Qn=z[Ae];if(yt>=Gt){ne(Qn,V,Q,!0);continue}let Sn;if(Qn.key!=null)Sn=Nt.get(Qn.key);else for(Vt=ft;Vt<=Xe;Vt++)if(ir[Vt-ft]===0&&ha(Qn,K[Vt])){Sn=Vt;break}Sn===void 0?ne(Qn,V,Q,!0):(ir[Sn-ft]=Ae+1,Sn>=Or?Or=Sn:qn=!0,E(Qn,K[Sn],C,null,V,Q,ce,ue,ke),yt++)}const yi=qn?rJ(ir):Kh;for(Vt=yi.length-1,Ae=Gt-1;Ae>=0;Ae--){const Qn=ft+Ae,Sn=K[Qn],En=Qn+1<tt?K[Qn+1].el:$;ir[Ae]===0?E(null,Sn,C,En,V,Q,ce,ue,ke):qn&&(Vt<0||Ae!==yi[Vt]?re(Sn,C,En,2):Vt--)}}},re=(z,K,C,$,V=null)=>{const{el:Q,type:ce,transition:ue,children:ke,shapeFlag:Ae}=z;if(Ae&6){re(z.component.subTree,K,C,$);return}if(Ae&128){z.suspense.move(K,C,$);return}if(Ae&64){ce.move(z,K,C,Be);return}if(ce===lr){r(Q,K,C);for(let Je=0;Je<ke.length;Je++)re(ke[Je],K,C,$);r(z.anchor,K,C);return}if(ce===bf){I(z,K,C);return}if($!==2&&Ae&1&&ue)if($===0)ue.beforeEnter(Q),r(Q,K,C),Ei(()=>ue.enter(Q),V);else{const{leave:Je,delayLeave:Xe,afterLeave:Ye}=ue,ft=()=>r(Q,K,C),Nt=()=>{Je(Q,()=>{ft(),Ye&&Ye()})};Xe?Xe(Q,ft,Nt):Nt()}else r(Q,K,C)},ne=(z,K,C,$=!1,V=!1)=>{const{type:Q,props:ce,ref:ue,children:ke,dynamicChildren:Ae,shapeFlag:tt,patchFlag:Je,dirs:Xe}=z;if(ue!=null&&ib(ue,null,C,z,!0),tt&256){K.ctx.deactivate(z);return}const Ye=tt&1&&Xe,ft=!vf(z);let Nt;if(ft&&(Nt=ce&&ce.onVnodeBeforeUnmount)&&Ms(Nt,K,z),tt&6)U(z.component,C,$);else{if(tt&128){z.suspense.unmount(C,$);return}Ye&&za(z,null,K,"beforeUnmount"),tt&64?z.type.remove(z,K,C,V,Be,$):Ae&&(Q!==lr||Je>0&&Je&64)?ye(Ae,K,C,!1,!0):(Q===lr&&Je&384||!V&&tt&16)&&ye(ke,K,C),$&&ee(z)}(ft&&(Nt=ce&&ce.onVnodeUnmounted)||Ye)&&Ei(()=>{Nt&&Ms(Nt,K,z),Ye&&za(z,null,K,"unmounted")},C)},ee=z=>{const{type:K,el:C,anchor:$,transition:V}=z;if(K===lr){F(C,$);return}if(K===bf){N(z);return}const Q=()=>{i(C),V&&!V.persisted&&V.afterLeave&&V.afterLeave()};if(z.shapeFlag&1&&V&&!V.persisted){const{leave:ce,delayLeave:ue}=V,ke=()=>ce(C,Q);ue?ue(z.el,Q,ke):ke()}else Q()},F=(z,K)=>{let C;for(;z!==K;)C=p(z),i(z),z=C;i(K)},U=(z,K,C)=>{const{bum:$,scope:V,update:Q,subTree:ce,um:ue}=z;$&&Jh($),V.stop(),Q&&(Q.active=!1,ne(ce,z,K,C)),ue&&Ei(ue,K),Ei(()=>{z.isUnmounted=!0},K),K&&K.pendingBranch&&!K.isUnmounted&&z.asyncDep&&!z.asyncResolved&&z.suspenseId===K.pendingId&&(K.deps--,K.deps===0&&K.resolve())},ye=(z,K,C,$=!1,V=!1,Q=0)=>{for(let ce=Q;ce<z.length;ce++)ne(z[ce],K,C,$,V)},Fe=z=>z.shapeFlag&6?Fe(z.component.subTree):z.shapeFlag&128?z.suspense.next():p(z.anchor||z.el),He=(z,K,C)=>{z==null?K._vnode&&ne(K._vnode,null,null,!0):E(K._vnode||null,z,K,null,null,null,C),F2(),nb(),K._vnode=z},Be={p:E,um:ne,m:re,r:ee,mt:Z,mc:M,pc:Te,pbc:q,n:Fe,o:t};let Pe,Ve;return e&&([Pe,Ve]=e(Be)),{render:He,hydrate:Pe,createApp:YY(He,Pe)}}function jc({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function pk(t,e,n=!1){const r=t.children,i=e.children;if(mt(r)&&mt(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=$u(i[s]),a.el=o.el),n||pk(o,a)),a.type===Nf&&(a.el=o.el)}}function rJ(t){const e=t.slice(),n=[0];let r,i,s,o,a;const l=t.length;for(r=0;r<l;r++){const u=t[r];if(u!==0){if(i=n[n.length-1],t[i]<u){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<u?s=a+1:o=a;u<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}const iJ=t=>t.__isTeleport,cg=t=>t&&(t.disabled||t.disabled===""),J2=t=>typeof SVGElement<"u"&&t instanceof SVGElement,RE=(t,e)=>{const n=t&&t.to;return Sr(n)?e?e(n):null:n},sJ={__isTeleport:!0,process(t,e,n,r,i,s,o,a,l,u){const{mc:c,pc:f,pbc:p,o:{insert:v,querySelector:b,createText:E,createComment:P}}=u,S=cg(e.props);let{shapeFlag:A,children:I,dynamicChildren:N}=e;if(t==null){const x=e.el=E(""),g=e.anchor=E("");v(x,n,r),v(g,n,r);const _=e.target=RE(e.props,b),M=e.targetAnchor=E("");_&&(v(M,_),o=o||J2(_));const D=(q,R)=>{A&16&&c(I,q,R,i,s,o,a,l)};S?D(n,g):_&&D(_,M)}else{e.el=t.el;const x=e.anchor=t.anchor,g=e.target=t.target,_=e.targetAnchor=t.targetAnchor,M=cg(t.props),D=M?n:g,q=M?x:_;if(o=o||J2(g),N?(p(t.dynamicChildren,N,D,i,s,o,a),pk(t,e,!0)):l||f(t,e,D,q,i,s,o,a,!1),S)M||b0(e,n,x,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const R=e.target=RE(e.props,b);R&&b0(e,R,null,u,0)}else M&&b0(e,g,_,u,1)}gD(e)},remove(t,e,n,r,{um:i,o:{remove:s}},o){const{shapeFlag:a,children:l,anchor:u,targetAnchor:c,target:f,props:p}=t;if(f&&s(c),(o||!cg(p))&&(s(u),a&16))for(let v=0;v<l.length;v++){const b=l[v];i(b,e,n,!0,!!b.dynamicChildren)}},move:b0,hydrate:oJ};function b0(t,e,n,{o:{insert:r},m:i},s=2){s===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:u,props:c}=t,f=s===2;if(f&&r(o,e,n),(!f||cg(c))&&l&16)for(let p=0;p<u.length;p++)i(u[p],e,n,2);f&&r(a,e,n)}function oJ(t,e,n,r,i,s,{o:{nextSibling:o,parentNode:a,querySelector:l}},u){const c=e.target=RE(e.props,l);if(c){const f=c._lpa||c.firstChild;if(e.shapeFlag&16)if(cg(e.props))e.anchor=u(o(t),e,a(t),n,r,i,s),e.targetAnchor=f;else{e.anchor=o(t);let p=f;for(;p;)if(p=o(p),p&&p.nodeType===8&&p.data==="teleport anchor"){e.targetAnchor=p,c._lpa=e.targetAnchor&&o(e.targetAnchor);break}u(f,e,c,n,r,i,s)}gD(e)}return e.anchor&&o(e.anchor)}const aJ=sJ;function gD(t){const e=t.ctx;if(e&&e.ut){let n=t.children[0].el;for(;n!==t.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}const lr=Symbol.for("v-fgt"),Nf=Symbol.for("v-txt"),Ki=Symbol.for("v-cmt"),bf=Symbol.for("v-stc"),fg=[];let Vs=null;function Ze(t=!1){fg.push(Vs=t?null:[])}function mD(){fg.pop(),Vs=fg[fg.length-1]||null}let If=1;function LE(t){If+=t}function vD(t){return t.dynamicChildren=If>0?Vs||Kh:null,mD(),If>0&&Vs&&Vs.push(t),t}function rt(t,e,n,r,i,s){return vD(oe(t,e,n,r,i,s,!0))}function oi(t,e,n,r,i){return vD(lt(t,e,n,r,i,!0))}function nc(t){return t?t.__v_isVNode===!0:!1}function ha(t,e){return t.type===e.type&&t.key===e.key}function lJ(t){}const N1="__vInternal",yD=({key:t})=>t??null,Ay=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Sr(t)||kr(t)||qt(t)?{i:vi,r:t,k:e,f:!!n}:t:null);function oe(t,e=null,n=null,r=0,i=null,s=t===lr?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&yD(e),ref:e&&Ay(e),scopeId:C1,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:vi};return a?(gk(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=Sr(n)?8:16),If>0&&!o&&Vs&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Vs.push(l),l}const lt=uJ;function uJ(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===tD)&&(t=Ki),nc(t)){const a=ol(t,e,!0);return n&&gk(a,n),If>0&&!s&&Vs&&(a.shapeFlag&6?Vs[Vs.indexOf(t)]=a:Vs.push(a)),a.patchFlag|=-2,a}if(mJ(t)&&(t=t.__vccOpts),e){e=bD(e);let{class:a,style:l}=e;a&&!Sr(a)&&(e.class=xa(a)),Zn(l)&&(QA(l)&&!mt(l)&&(l=cr({},l)),e.style=Pm(l))}const o=Sr(t)?1:BL(t)?128:iJ(t)?64:Zn(t)?4:qt(t)?2:0;return oe(t,e,n,r,i,o,s,!0)}function bD(t){return t?QA(t)||N1 in t?cr({},t):t:null}function ol(t,e,n=!1){const{props:r,ref:i,patchFlag:s,children:o}=t,a=e?xD(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&yD(a),ref:e&&e.ref?n&&i?mt(i)?i.concat(Ay(e)):[i,Ay(e)]:Ay(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==lr?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&ol(t.ssContent),ssFallback:t.ssFallback&&ol(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function Kr(t=" ",e=0){return lt(Nf,null,t,e)}function wD(t,e){const n=lt(bf,null,t);return n.staticCount=e,n}function Tt(t="",e=!1){return e?(Ze(),oi(Ki,null,t)):lt(Ki,null,t)}function lo(t){return t==null||typeof t=="boolean"?lt(Ki):mt(t)?lt(lr,null,t.slice()):typeof t=="object"?$u(t):lt(Nf,null,String(t))}function $u(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:ol(t)}function gk(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(mt(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),gk(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!(N1 in e)?e._ctx=vi:i===3&&vi&&(vi.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else qt(e)?(e={default:e,_ctx:vi},n=32):(e=String(e),r&64?(n=16,e=[Kr(e)]):n=8);t.children=e,t.shapeFlag|=n}function xD(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=xa([e.class,r.class]));else if(i==="style")e.style=Pm([e.style,r.style]);else if(km(i)){const s=e[i],o=r[i];o&&s!==o&&!(mt(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function Ms(t,e,n,r=null){go(t,e,7,[n,r])}const cJ=sD();let fJ=0;function SD(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||cJ,s={uid:fJ++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new GA(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:lD(r,i),emitsOptions:VL(r,i),emit:null,emitted:null,propsDefaults:Jn,inheritAttrs:r.inheritAttrs,ctx:Jn,data:Jn,props:Jn,attrs:Jn,slots:Jn,refs:Jn,setupState:Jn,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=tY.bind(null,s),t.ce&&t.ce(s),s}let Gr=null;const cl=()=>Gr||vi;let mk,xh,X2="__VUE_INSTANCE_SETTERS__";(xh=AE()[X2])||(xh=AE()[X2]=[]),xh.push(t=>Gr=t),mk=t=>{xh.length>1?xh.forEach(e=>e(t)):xh[0](t)};const rc=t=>{mk(t),t.scope.on()},Wu=()=>{Gr&&Gr.scope.off(),mk(null)};function ED(t){return t.vnode.shapeFlag&4}let xd=!1;function _D(t,e=!1){xd=e;const{props:n,children:r}=t.vnode,i=ED(t);XY(t,n,i,e),eJ(t,r);const s=i?hJ(t,e):void 0;return xd=!1,s}function hJ(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=Of(new Proxy(t.ctx,ME));const{setup:r}=n;if(r){const i=t.setupContext=r.length>1?kD(t):null;rc(t),jd();const s=ql(r,t,0,[t.props,i]);if(zd(),Wu(),qA(s)){if(s.then(Wu,Wu),e)return s.then(o=>{DE(t,o,e)}).catch(o=>{qf(o,t,0)});t.asyncDep=s}else DE(t,s,e)}else AD(t,e)}function DE(t,e,n){qt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Zn(e)&&(t.setupState=nk(e)),AD(t,n)}let sb,FE;function dJ(t){sb=t,FE=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,PY))}}const pJ=()=>!sb;function AD(t,e,n){const r=t.type;if(!t.render){if(!e&&sb&&!r.render){const i=r.template||hk(t).template;if(i){const{isCustomElement:s,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,u=cr(cr({isCustomElement:s,delimiters:a},o),l);r.render=sb(i,u)}}t.render=r.render||ba,FE&&FE(t)}rc(t),jd(),HY(t),zd(),Wu()}function gJ(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return qs(t,"get","$attrs"),e[n]}}))}function kD(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return gJ(t)},slots:t.slots,emit:t.emit,expose:e}}function I1(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(nk(Of(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in ug)return ug[n](t)},has(e,n){return n in e||n in ug}}))}function VE(t,e=!0){return qt(t)?t.displayName||t.name:t.name||e&&t.__name}function mJ(t){return qt(t)&&"__vccOpts"in t}const qa=(t,e)=>KK(t,e,xd);function $1(t,e,n){const r=arguments.length;return r===2?Zn(e)&&!mt(e)?nc(e)?lt(t,null,[e]):lt(t,e):lt(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&nc(n)&&(n=[n]),lt(t,e,n))}const CD=Symbol.for("v-scx"),PD=()=>yf(CD);function vJ(){}function yJ(t,e,n,r){const i=n[r];if(i&&OD(i,t))return i;const s=e();return s.memo=t.slice(),n[r]=s}function OD(t,e){const n=t.memo;if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(bd(n[r],e[r]))return!1;return If>0&&Vs&&Vs.push(t),!0}const TD="3.3.2",bJ={createComponentInstance:SD,setupComponent:_D,renderComponentRoot:_y,setCurrentRenderingInstance:Dg,isVNode:nc,normalizeVNode:lo},wJ=bJ,xJ=null,SJ=null,EJ="http://www.w3.org/2000/svg",Yc=typeof document<"u"?document:null,Z2=Yc&&Yc.createElement("template"),_J={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e?Yc.createElementNS(EJ,t):Yc.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>Yc.createTextNode(t),createComment:t=>Yc.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Yc.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{Z2.innerHTML=r?`<svg>${t}</svg>`:t;const a=Z2.content;if(r){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function AJ(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function kJ(t,e,n){const r=t.style,i=Sr(n);if(n&&!i){if(e&&!Sr(e))for(const s in e)n[s]==null&&BE(r,s,"");for(const s in n)BE(r,s,n[s])}else{const s=r.display;i?e!==n&&(r.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(r.display=s)}}const Q2=/\s*!important$/;function BE(t,e,n){if(mt(n))n.forEach(r=>BE(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=CJ(t,e);Q2.test(n)?t.setProperty(Fo(r),n.replace(Q2,""),"important"):t[r]=n}}const eM=["Webkit","Moz","ms"],rS={};function CJ(t,e){const n=rS[e];if(n)return n;let r=zs(e);if(r!=="filter"&&r in t)return rS[e]=r;r=Cm(r);for(let i=0;i<eM.length;i++){const s=eM[i]+r;if(s in t)return rS[e]=s}return e}const tM="http://www.w3.org/1999/xlink";function PJ(t,e,n,r,i){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(tM,e.slice(6,e.length)):t.setAttributeNS(tM,e,n);else{const s=sK(e);n==null||s&&!gL(n)?t.removeAttribute(e):t.setAttribute(e,s?"":n)}}function OJ(t,e,n,r,i,s,o){if(e==="innerHTML"||e==="textContent"){r&&o(r,i,s),t[e]=n??"";return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){t._value=n;const u=a==="OPTION"?t.getAttribute("value"):t.value,c=n??"";u!==c&&(t.value=c),n==null&&t.removeAttribute(e);return}let l=!1;if(n===""||n==null){const u=typeof t[e];u==="boolean"?n=gL(n):n==null&&u==="string"?(n="",l=!0):u==="number"&&(n=0,l=!0)}try{t[e]=n}catch{}l&&t.removeAttribute(e)}function Fl(t,e,n,r){t.addEventListener(e,n,r)}function TJ(t,e,n,r){t.removeEventListener(e,n,r)}function MJ(t,e,n,r,i=null){const s=t._vei||(t._vei={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=NJ(e);if(r){const u=s[e]=RJ(r,i);Fl(t,a,u,l)}else o&&(TJ(t,a,o,l),s[e]=void 0)}}const nM=/(?:Once|Passive|Capture)$/;function NJ(t){let e;if(nM.test(t)){e={};let r;for(;r=t.match(nM);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Fo(t.slice(2)),e]}let iS=0;const IJ=Promise.resolve(),$J=()=>iS||(IJ.then(()=>iS=0),iS=Date.now());function RJ(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;go(LJ(r,n.value),e,5,[r])};return n.value=t,n.attached=$J(),n}function LJ(t,e){if(mt(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const rM=/^on[a-z]/,DJ=(t,e,n,r,i=!1,s,o,a,l)=>{e==="class"?AJ(t,r,i):e==="style"?kJ(t,n,r):km(e)?HA(e)||MJ(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):FJ(t,e,r,i))?OJ(t,e,r,s,o,a,l):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),PJ(t,e,r,i))};function FJ(t,e,n,r){return r?!!(e==="innerHTML"||e==="textContent"||e in t&&rM.test(e)&&qt(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||rM.test(e)&&Sr(n)?!1:e in t}function MD(t,e){const n=fi(t);class r extends R1{constructor(s){super(n,s,e)}}return r.def=n,r}const VJ=t=>MD(t,qD),BJ=typeof HTMLElement<"u"?HTMLElement:class{};class R1 extends BJ{constructor(e,n={},r){super(),this._def=e,this._props=n,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&r?r(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,_1(()=>{this._connected||(HE(null,this.shadowRoot),this._instance=null)})}_resolveDef(){this._resolved=!0;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);new MutationObserver(r=>{for(const i of r)this._setAttr(i.attributeName)}).observe(this,{attributes:!0});const e=(r,i=!1)=>{const{props:s,styles:o}=r;let a;if(s&&!mt(s))for(const l in s){const u=s[l];(u===Number||u&&u.type===Number)&&(l in this._props&&(this._props[l]=eb(this._props[l])),(a||(a=Object.create(null)))[zs(l)]=!0)}this._numberProps=a,i&&this._resolveProps(r),this._applyStyles(o),this._update()},n=this._def.__asyncLoader;n?n().then(r=>e(r,!0)):e(this._def)}_resolveProps(e){const{props:n}=e,r=mt(n)?n:Object.keys(n||{});for(const i of Object.keys(this))i[0]!=="_"&&r.includes(i)&&this._setProp(i,this[i],!0,!1);for(const i of r.map(zs))Object.defineProperty(this,i,{get(){return this._getProp(i)},set(s){this._setProp(i,s)}})}_setAttr(e){let n=this.getAttribute(e);const r=zs(e);this._numberProps&&this._numberProps[r]&&(n=eb(n)),this._setProp(r,n,!1)}_getProp(e){return this._props[e]}_setProp(e,n,r=!0,i=!0){n!==this._props[e]&&(this._props[e]=n,i&&this._instance&&this._update(),r&&(n===!0?this.setAttribute(Fo(e),""):typeof n=="string"||typeof n=="number"?this.setAttribute(Fo(e),n+""):n||this.removeAttribute(Fo(e))))}_update(){HE(this._createVNode(),this.shadowRoot)}_createVNode(){const e=lt(this._def,cr({},this._props));return this._instance||(e.ce=n=>{this._instance=n,n.isCE=!0;const r=(s,o)=>{this.dispatchEvent(new CustomEvent(s,{detail:o}))};n.emit=(s,...o)=>{r(s,o),Fo(s)!==s&&r(Fo(s),o)};let i=this;for(;i=i&&(i.parentNode||i.host);)if(i instanceof R1){n.parent=i._instance,n.provides=i._instance.provides;break}}),e}_applyStyles(e){e&&e.forEach(n=>{const r=document.createElement("style");r.textContent=n,this.shadowRoot.appendChild(r)})}}function jJ(t="$style"){{const e=cl();if(!e)return Jn;const n=e.type.__cssModules;if(!n)return Jn;const r=n[t];return r||Jn}}function zJ(t){const e=cl();if(!e)return;const n=e.ut=(i=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(s=>zE(s,i))},r=()=>{const i=t(e.proxy);jE(e.subTree,i),n(i)};zL(r),Hd(()=>{const i=new MutationObserver(r);i.observe(e.subTree.el.parentNode,{childList:!0}),M1(()=>i.disconnect())})}function jE(t,e){if(t.shapeFlag&128){const n=t.suspense;t=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{jE(n.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)zE(t.el,e);else if(t.type===lr)t.children.forEach(n=>jE(n,e));else if(t.type===bf){let{el:n,anchor:r}=t;for(;n&&(zE(n,e),n!==r);)n=n.nextSibling}}function zE(t,e){if(t.nodeType===1){const n=t.style;for(const r in e)n.setProperty(`--${r}`,e[r])}}const Au="transition",Mp="animation",vk=(t,{slots:e})=>$1(UL,ID(t),e);vk.displayName="Transition";const ND={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},HJ=vk.props=cr({},uk,ND),zc=(t,e=[])=>{mt(t)?t.forEach(n=>n(...e)):t&&t(...e)},iM=t=>t?mt(t)?t.some(e=>e.length>1):t.length>1:!1;function ID(t){const e={};for(const W in t)W in ND||(e[W]=t[W]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:u=o,appearToClass:c=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:v=`${n}-leave-to`}=t,b=UJ(i),E=b&&b[0],P=b&&b[1],{onBeforeEnter:S,onEnter:A,onEnterCancelled:I,onLeave:N,onLeaveCancelled:x,onBeforeAppear:g=S,onAppear:_=A,onAppearCancelled:M=I}=e,D=(W,G,Z)=>{Mu(W,G?c:a),Mu(W,G?u:o),Z&&Z()},q=(W,G)=>{W._isLeaving=!1,Mu(W,f),Mu(W,v),Mu(W,p),G&&G()},R=W=>(G,Z)=>{const de=W?_:A,be=()=>D(G,W,Z);zc(de,[G,be]),sM(()=>{Mu(G,W?l:s),Pl(G,W?c:a),iM(de)||oM(G,r,E,be)})};return cr(e,{onBeforeEnter(W){zc(S,[W]),Pl(W,s),Pl(W,o)},onBeforeAppear(W){zc(g,[W]),Pl(W,l),Pl(W,u)},onEnter:R(!1),onAppear:R(!0),onLeave(W,G){W._isLeaving=!0;const Z=()=>q(W,G);Pl(W,f),RD(),Pl(W,p),sM(()=>{W._isLeaving&&(Mu(W,f),Pl(W,v),iM(N)||oM(W,r,P,Z))}),zc(N,[W,Z])},onEnterCancelled(W){D(W,!1),zc(I,[W])},onAppearCancelled(W){D(W,!0),zc(M,[W])},onLeaveCancelled(W){q(W),zc(x,[W])}})}function UJ(t){if(t==null)return null;if(Zn(t))return[sS(t.enter),sS(t.leave)];{const e=sS(t);return[e,e]}}function sS(t){return eb(t)}function Pl(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t._vtc||(t._vtc=new Set)).add(e)}function Mu(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function sM(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let qJ=0;function oM(t,e,n,r){const i=t._endId=++qJ,s=()=>{i===t._endId&&r()};if(n)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=$D(t,e);if(!o)return r();const u=o+"end";let c=0;const f=()=>{t.removeEventListener(u,p),s()},p=v=>{v.target===t&&++c>=l&&f()};setTimeout(()=>{c<l&&f()},a+1),t.addEventListener(u,p)}function $D(t,e){const n=window.getComputedStyle(t),r=b=>(n[b]||"").split(", "),i=r(`${Au}Delay`),s=r(`${Au}Duration`),o=aM(i,s),a=r(`${Mp}Delay`),l=r(`${Mp}Duration`),u=aM(a,l);let c=null,f=0,p=0;e===Au?o>0&&(c=Au,f=o,p=s.length):e===Mp?u>0&&(c=Mp,f=u,p=l.length):(f=Math.max(o,u),c=f>0?o>u?Au:Mp:null,p=c?c===Au?s.length:l.length:0);const v=c===Au&&/\b(transform|all)(,|$)/.test(r(`${Au}Property`).toString());return{type:c,timeout:f,propCount:p,hasTransform:v}}function aM(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>lM(n)+lM(t[r])))}function lM(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function RD(){return document.body.offsetHeight}const LD=new WeakMap,DD=new WeakMap,FD={name:"TransitionGroup",props:cr({},HJ,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=cl(),r=lk();let i,s;return T1(()=>{if(!i.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!XJ(i[0].el,n.vnode.el,o))return;i.forEach(KJ),i.forEach(YJ);const a=i.filter(JJ);RD(),a.forEach(l=>{const u=l.el,c=u.style;Pl(u,o),c.transform=c.webkitTransform=c.transitionDuration="";const f=u._moveCb=p=>{p&&p.target!==u||(!p||/transform$/.test(p.propertyName))&&(u.removeEventListener("transitionend",f),u._moveCb=null,Mu(u,o))};u.addEventListener("transitionend",f)})}),()=>{const o=mn(t),a=ID(o);let l=o.tag||lr;i=s,s=e.default?P1(e.default()):[];for(let u=0;u<s.length;u++){const c=s[u];c.key!=null&&Tf(c,wd(c,a,r,n))}if(i)for(let u=0;u<i.length;u++){const c=i[u];Tf(c,wd(c,a,r,n)),LD.set(c,c.el.getBoundingClientRect())}return lt(l,null,s)}}},WJ=t=>delete t.mode;FD.props;const GJ=FD;function KJ(t){const e=t.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function YJ(t){DD.set(t,t.el.getBoundingClientRect())}function JJ(t){const e=LD.get(t),n=DD.get(t),r=e.left-n.left,i=e.top-n.top;if(r||i){const s=t.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${i}px)`,s.transitionDuration="0s",t}}function XJ(t,e,n){const r=t.cloneNode();t._vtc&&t._vtc.forEach(o=>{o.split(/\s+/).forEach(a=>a&&r.classList.remove(a))}),n.split(/\s+/).forEach(o=>o&&r.classList.add(o)),r.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(r);const{hasTransform:s}=$D(r);return i.removeChild(r),s}const ic=t=>{const e=t.props["onUpdate:modelValue"]||!1;return mt(e)?n=>Jh(e,n):e};function ZJ(t){t.target.composing=!0}function uM(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const sc={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t._assign=ic(i);const s=r||i.props&&i.props.type==="number";Fl(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),s&&(a=Qy(a)),t._assign(a)}),n&&Fl(t,"change",()=>{t.value=t.value.trim()}),e||(Fl(t,"compositionstart",ZJ),Fl(t,"compositionend",uM),Fl(t,"change",uM))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:r,number:i}},s){if(t._assign=ic(s),t.composing||document.activeElement===t&&t.type!=="range"&&(n||r&&t.value.trim()===e||(i||t.type==="number")&&Qy(t.value)===e))return;const o=e??"";t.value!==o&&(t.value=o)}},yk={deep:!0,created(t,e,n){t._assign=ic(n),Fl(t,"change",()=>{const r=t._modelValue,i=Sd(t),s=t.checked,o=t._assign;if(mt(r)){const a=y1(r,i),l=a!==-1;if(s&&!l)o(r.concat(i));else if(!s&&l){const u=[...r];u.splice(a,1),o(u)}}else if(Uf(r)){const a=new Set(r);s?a.add(i):a.delete(i),o(a)}else o(VD(t,s))})},mounted:cM,beforeUpdate(t,e,n){t._assign=ic(n),cM(t,e,n)}};function cM(t,{value:e,oldValue:n},r){t._modelValue=e,mt(e)?t.checked=y1(e,r.props.value)>-1:Uf(e)?t.checked=e.has(r.props.value):e!==n&&(t.checked=ec(e,VD(t,!0)))}const bk={created(t,{value:e},n){t.checked=ec(e,n.props.value),t._assign=ic(n),Fl(t,"change",()=>{t._assign(Sd(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t._assign=ic(r),e!==n&&(t.checked=ec(e,r.props.value))}},$m={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const i=Uf(e);Fl(t,"change",()=>{const s=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?Qy(Sd(o)):Sd(o));t._assign(t.multiple?i?new Set(s):s:s[0])}),t._assign=ic(r)},mounted(t,{value:e}){fM(t,e)},beforeUpdate(t,e,n){t._assign=ic(n)},updated(t,{value:e}){fM(t,e)}};function fM(t,e){const n=t.multiple;if(!(n&&!mt(e)&&!Uf(e))){for(let r=0,i=t.options.length;r<i;r++){const s=t.options[r],o=Sd(s);if(n)mt(e)?s.selected=y1(e,o)>-1:s.selected=e.has(o);else if(ec(Sd(s),e)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Sd(t){return"_value"in t?t._value:t.value}function VD(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const BD={created(t,e,n){w0(t,e,n,null,"created")},mounted(t,e,n){w0(t,e,n,null,"mounted")},beforeUpdate(t,e,n,r){w0(t,e,n,r,"beforeUpdate")},updated(t,e,n,r){w0(t,e,n,r,"updated")}};function jD(t,e){switch(t){case"SELECT":return $m;case"TEXTAREA":return sc;default:switch(e){case"checkbox":return yk;case"radio":return bk;default:return sc}}}function w0(t,e,n,r,i){const o=jD(t.tagName,n.props&&n.props.type)[i];o&&o(t,e,n,r)}function QJ(){sc.getSSRProps=({value:t})=>({value:t}),bk.getSSRProps=({value:t},e)=>{if(e.props&&ec(e.props.value,t))return{checked:!0}},yk.getSSRProps=({value:t},e)=>{if(mt(t)){if(e.props&&y1(t,e.props.value)>-1)return{checked:!0}}else if(Uf(t)){if(e.props&&t.has(e.props.value))return{checked:!0}}else if(t)return{checked:!0}},BD.getSSRProps=(t,e)=>{if(typeof e.type!="string")return;const n=jD(e.type.toUpperCase(),e.props&&e.props.type);if(n.getSSRProps)return n.getSSRProps(t,e)}}const eX=["ctrl","shift","alt","meta"],tX={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>eX.some(n=>t[`${n}Key`]&&!e.includes(n))},wk=(t,e)=>(n,...r)=>{for(let i=0;i<e.length;i++){const s=tX[e[i]];if(s&&s(n,e))return}return t(n,...r)},nX={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},rX=(t,e)=>n=>{if(!("key"in n))return;const r=Fo(n.key);if(e.some(i=>i===r||nX[i]===r))return t(n)},xk={beforeMount(t,{value:e},{transition:n}){t._vod=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Np(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Np(t,!0),r.enter(t)):r.leave(t,()=>{Np(t,!1)}):Np(t,e))},beforeUnmount(t,{value:e}){Np(t,e)}};function Np(t,e){t.style.display=e?t._vod:"none"}function iX(){xk.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}const zD=cr({patchProp:DJ},_J);let hg,hM=!1;function HD(){return hg||(hg=hD(zD))}function UD(){return hg=hM?hg:dD(zD),hM=!0,hg}const HE=(...t)=>{HD().render(...t)},qD=(...t)=>{UD().hydrate(...t)},WD=(...t)=>{const e=HD().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=GD(r);if(!i)return;const s=e._component;!qt(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const o=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e},sX=(...t)=>{const e=UD().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=GD(r);if(i)return n(i,!0,i instanceof SVGElement)},e};function GD(t){return Sr(t)?document.querySelector(t):t}let dM=!1;const oX=()=>{dM||(dM=!0,QJ(),iX())},aX=()=>{},lX=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:UL,BaseTransitionPropsValidators:uk,Comment:Ki,EffectScope:GA,Fragment:lr,KeepAlive:wY,ReactiveEffect:Om,Static:bf,Suspense:lY,Teleport:aJ,Text:Nf,Transition:vk,TransitionGroup:GJ,VueElement:R1,assertNumber:JK,callWithAsyncErrorHandling:go,callWithErrorHandling:ql,camelize:zs,capitalize:Cm,cloneVNode:ol,compatUtils:SJ,compile:aX,computed:qa,createApp:WD,createBlock:oi,createCommentVNode:Tt,createElementBlock:rt,createElementVNode:oe,createHydrationRenderer:dD,createPropsRestProxy:jY,createRenderer:hD,createSSRApp:sX,createSlots:AY,createStaticVNode:wD,createTextVNode:Kr,createVNode:lt,customRef:HK,defineAsyncComponent:yY,defineComponent:fi,defineCustomElement:MD,defineEmits:TY,defineExpose:MY,defineModel:$Y,defineOptions:NY,defineProps:OY,defineSSRCustomElement:VJ,defineSlots:IY,get devtools(){return Th},effect:uK,effectScope:KA,getCurrentInstance:cl,getCurrentScope:YA,getTransitionRawChildren:P1,guardReactiveProps:bD,h:$1,handleError:qf,hasInjectionContext:JY,hydrate:qD,initCustomFormatter:vJ,initDirectivesForSSR:oX,inject:yf,isMemoSame:OD,isProxy:QA,isReactive:Ul,isReadonly:Pf,isRef:kr,isRuntimeOnly:pJ,isShallow:Ig,isVNode:nc,markRaw:Of,mergeDefaults:VY,mergeModels:BY,mergeProps:xD,nextTick:_1,normalizeClass:xa,normalizeProps:rK,normalizeStyle:Pm,onActivated:WL,onBeforeMount:YL,onBeforeUnmount:Im,onBeforeUpdate:JL,onDeactivated:GL,onErrorCaptured:eD,onMounted:Hd,onRenderTracked:QL,onRenderTriggered:ZL,onScopeDispose:yL,onServerPrefetch:XL,onUnmounted:M1,onUpdated:T1,openBlock:Ze,popScopeId:Gf,provide:oD,proxyRefs:nk,pushScopeId:Wf,queuePostFlushCb:ik,reactive:Tm,readonly:ZA,ref:qu,registerRuntimeCompiler:dJ,render:HE,renderList:Mf,renderSlot:kY,resolveComponent:Fn,resolveDirective:_Y,resolveDynamicComponent:EY,resolveFilter:xJ,resolveTransitionHooks:wd,setBlockTracking:LE,setDevtoolsHook:FL,setTransitionHooks:Tf,shallowReactive:ML,shallowReadonly:DK,shallowRef:lg,ssrContextKey:CD,ssrUtils:wJ,stop:cK,toDisplayString:Cn,toHandlerKey:ag,toHandlers:CY,toRaw:mn,toRef:WK,toRefs:IL,toValue:BK,transformVNodeArgs:lJ,triggerRef:VK,unref:la,useAttrs:DY,useCssModule:jJ,useCssVars:zJ,useModel:FY,useSSRContext:PD,useSlots:LY,useTransitionState:lk,vModelCheckbox:yk,vModelDynamic:BD,vModelRadio:bk,vModelSelect:$m,vModelText:sc,vShow:xk,version:TD,warn:YK,watch:Ai,watchEffect:pY,watchPostEffect:zL,watchSyncEffect:gY,withAsyncContext:zY,withCtx:sk,withDefaults:RY,withDirectives:eu,withKeys:rX,withMemo:yJ,withModifiers:wk,withScopeId:nY},Symbol.toStringTag,{value:"Module"}));function pM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Vl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pM(Object(n),!0).forEach(function(r){Os(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ob(t){"@babel/helpers - typeof";return ob=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ob(t)}function Os(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uX(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function cX(t,e){if(t==null)return{};var n=uX(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}var fX=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},KD={exports:{}};(function(t){(function(e){var n=function(S,A,I){if(!u(A)||f(A)||p(A)||v(A)||l(A))return A;var N,x=0,g=0;if(c(A))for(N=[],g=A.length;x<g;x++)N.push(n(S,A[x],I));else{N={};for(var _ in A)Object.prototype.hasOwnProperty.call(A,_)&&(N[S(_,I)]=n(S,A[_],I))}return N},r=function(S,A){A=A||{};var I=A.separator||"_",N=A.split||/(?=[A-Z])/;return S.split(N).join(I)},i=function(S){return b(S)?S:(S=S.replace(/[\-_\s]+(.)?/g,function(A,I){return I?I.toUpperCase():""}),S.substr(0,1).toLowerCase()+S.substr(1))},s=function(S){var A=i(S);return A.substr(0,1).toUpperCase()+A.substr(1)},o=function(S,A){return r(S,A).toLowerCase()},a=Object.prototype.toString,l=function(S){return typeof S=="function"},u=function(S){return S===Object(S)},c=function(S){return a.call(S)=="[object Array]"},f=function(S){return a.call(S)=="[object Date]"},p=function(S){return a.call(S)=="[object RegExp]"},v=function(S){return a.call(S)=="[object Boolean]"},b=function(S){return S=S-0,S===S},E=function(S,A){var I=A&&"process"in A?A.process:A;return typeof I!="function"?S:function(N,x){return I(N,S,x)}},P={camelize:i,decamelize:o,pascalize:s,depascalize:o,camelizeKeys:function(S,A){return n(E(i,A),S)},decamelizeKeys:function(S,A){return n(E(o,A),S,A)},pascalizeKeys:function(S,A){return n(E(s,A),S)},depascalizeKeys:function(){return this.decamelizeKeys.apply(this,arguments)}};t.exports?t.exports=P:e.humps=P})(fX)})(KD);var hX=KD.exports,dX=["class","style"];function pX(t){return t.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,n){var r=n.indexOf(":"),i=hX.camelize(n.slice(0,r)),s=n.slice(r+1).trim();return e[i]=s,e},{})}function gX(t){return t.split(/\s+/).reduce(function(e,n){return e[n]=!0,e},{})}function YD(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var r=(t.children||[]).map(function(l){return YD(l)}),i=Object.keys(t.attributes||{}).reduce(function(l,u){var c=t.attributes[u];switch(u){case"class":l.class=gX(c);break;case"style":l.style=pX(c);break;default:l.attrs[u]=c}return l},{attrs:{},class:{},style:{}});n.class;var s=n.style,o=s===void 0?{}:s,a=cX(n,dX);return $1(t.tag,Vl(Vl(Vl({},e),{},{class:i.class,style:Vl(Vl({},i.style),o)},i.attrs),a),r)}var JD=!1;try{JD=!0}catch{}function mX(){if(!JD&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function oS(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?Os({},t,e):{}}function vX(t){var e,n=(e={"fa-spin":t.spin,"fa-pulse":t.pulse,"fa-fw":t.fixedWidth,"fa-border":t.border,"fa-li":t.listItem,"fa-inverse":t.inverse,"fa-flip":t.flip===!0,"fa-flip-horizontal":t.flip==="horizontal"||t.flip==="both","fa-flip-vertical":t.flip==="vertical"||t.flip==="both"},Os(e,"fa-".concat(t.size),t.size!==null),Os(e,"fa-rotate-".concat(t.rotation),t.rotation!==null),Os(e,"fa-pull-".concat(t.pull),t.pull!==null),Os(e,"fa-swap-opacity",t.swapOpacity),Os(e,"fa-bounce",t.bounce),Os(e,"fa-shake",t.shake),Os(e,"fa-beat",t.beat),Os(e,"fa-fade",t.fade),Os(e,"fa-beat-fade",t.beatFade),Os(e,"fa-flash",t.flash),Os(e,"fa-spin-pulse",t.spinPulse),Os(e,"fa-spin-reverse",t.spinReverse),e);return Object.keys(n).map(function(r){return n[r]?r:null}).filter(function(r){return r})}function gM(t){if(t&&ob(t)==="object"&&t.prefix&&t.iconName&&t.icon)return t;if(_E.icon)return _E.icon(t);if(t===null)return null;if(ob(t)==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}var yX=fi({name:"FontAwesomeIcon",props:{border:{type:Boolean,default:!1},fixedWidth:{type:Boolean,default:!1},flip:{type:[Boolean,String],default:!1,validator:function(e){return[!0,!1,"horizontal","vertical","both"].indexOf(e)>-1}},icon:{type:[Object,Array,String],required:!0},mask:{type:[Object,Array,String],default:null},listItem:{type:Boolean,default:!1},pull:{type:String,default:null,validator:function(e){return["right","left"].indexOf(e)>-1}},pulse:{type:Boolean,default:!1},rotation:{type:[String,Number],default:null,validator:function(e){return[90,180,270].indexOf(Number.parseInt(e,10))>-1}},swapOpacity:{type:Boolean,default:!1},size:{type:String,default:null,validator:function(e){return["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"].indexOf(e)>-1}},spin:{type:Boolean,default:!1},transform:{type:[String,Object],default:null},symbol:{type:[Boolean,String],default:!1},title:{type:String,default:null},inverse:{type:Boolean,default:!1},bounce:{type:Boolean,default:!1},shake:{type:Boolean,default:!1},beat:{type:Boolean,default:!1},fade:{type:Boolean,default:!1},beatFade:{type:Boolean,default:!1},flash:{type:Boolean,default:!1},spinPulse:{type:Boolean,default:!1},spinReverse:{type:Boolean,default:!1}},setup:function(e,n){var r=n.attrs,i=qa(function(){return gM(e.icon)}),s=qa(function(){return oS("classes",vX(e))}),o=qa(function(){return oS("transform",typeof e.transform=="string"?_E.transform(e.transform):e.transform)}),a=qa(function(){return oS("mask",gM(e.mask))}),l=qa(function(){return HG(i.value,Vl(Vl(Vl(Vl({},s.value),o.value),a.value),{},{symbol:e.symbol,title:e.title}))});Ai(l,function(c){if(!c)return mX("Could not find one or more icon(s)",i.value,a.value)},{immediate:!0});var u=qa(function(){return l.value?YD(l.value.abstract[0],{},r):null});return function(){return u.value}}});class Dn{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,r){let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(n,this.length,i,1),Ka.from(i,this.length-(n-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){let r=[];return this.decompose(e,n,r,0),Ka.from(r,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new dg(this),s=new dg(e);for(let o=n,a=n;;){if(i.next(o),s.next(o),o=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(a+=i.value.length,i.done||a>=r)return!0}}iter(e=1){return new dg(this,e)}iterRange(e,n=this.length){return new XD(this,e,n)}iterLines(e,n){let r;if(e==null)r=this.iter();else{n==null&&(n=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new ZD(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Dn.empty:e.length<=32?new zr(e):Ka.from(zr.split(e,[]))}}class zr extends Dn{constructor(e,n=bX(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,r,i){for(let s=0;;s++){let o=this.text[s],a=i+o.length;if((n?r:a)>=e)return new wX(i,a,r,o);i=a+1,r++}}decompose(e,n,r,i){let s=e<=0&&n>=this.length?this:new zr(mM(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(i&1){let o=r.pop(),a=ky(s.text,o.text.slice(),0,s.length);if(a.length<=32)r.push(new zr(a,o.length+s.length));else{let l=a.length>>1;r.push(new zr(a.slice(0,l)),new zr(a.slice(l)))}}else r.push(s)}replace(e,n,r){if(!(r instanceof zr))return super.replace(e,n,r);let i=ky(this.text,ky(r.text,mM(this.text,0,e)),n),s=this.length+r.length-(n-e);return i.length<=32?new zr(i,s):Ka.from(zr.split(i,[]),s)}sliceString(e,n=this.length,r=`
`){let i="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(i+=r),e<l&&n>s&&(i+=a.slice(Math.max(0,e-s),n-s)),s=l+1}return i}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(n.push(new zr(r,i)),r=[],i=-1);return i>-1&&n.push(new zr(r,i)),n}}class Ka extends Dn{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,n,r,i){for(let s=0;;s++){let o=this.children[s],a=i+o.length,l=r+o.lines-1;if((n?l:a)>=e)return o.lineInner(e,n,r,i);i=a+1,r=l+1}}decompose(e,n,r,i){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&n>=o){let u=i&((o<=e?1:0)|(l>=n?2:0));o>=e&&l<=n&&!u?r.push(a):a.decompose(e-o,n-o,r,u)}o=l+1}}replace(e,n,r){if(r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let o=this.children[i],a=s+o.length;if(e>=s&&n<=a){let l=o.replace(e-s,n-s,r),u=this.lines-o.lines+l.lines;if(l.lines<u>>5-1&&l.lines>u>>5+1){let c=this.children.slice();return c[i]=l,new Ka(c,this.length-(n-e)+r.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,n,r)}sliceString(e,n=this.length,r=`
`){let i="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(i+=r),e<l&&n>o&&(i+=a.sliceString(e-o,n-o,r)),o=l+1}return i}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof Ka))return 0;let r=0,[i,s,o,a]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=n,s+=n){if(i==o||s==a)return r;let l=this.children[i],u=e.children[s];if(l!=u)return r+l.scanIdentical(u,n);r+=l.length+1}}static from(e,n=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let v of e)r+=v.lines;if(r<32){let v=[];for(let b of e)b.flatten(v);return new zr(v,n)}let i=Math.max(32,r>>5),s=i<<1,o=i>>1,a=[],l=0,u=-1,c=[];function f(v){let b;if(v.lines>s&&v instanceof Ka)for(let E of v.children)f(E);else v.lines>o&&(l>o||!l)?(p(),a.push(v)):v instanceof zr&&l&&(b=c[c.length-1])instanceof zr&&v.lines+b.lines<=32?(l+=v.lines,u+=v.length+1,c[c.length-1]=new zr(b.text.concat(v.text),b.length+1+v.length)):(l+v.lines>i&&p(),l+=v.lines,u+=v.length+1,c.push(v))}function p(){l!=0&&(a.push(c.length==1?c[0]:Ka.from(c,u)),u=-1,l=c.length=0)}for(let v of e)f(v);return p(),a.length==1?a[0]:new Ka(a,n)}}Dn.empty=new zr([""],0);function bX(t){let e=-1;for(let n of t)e+=n.length+1;return e}function ky(t,e,n=0,r=1e9){for(let i=0,s=0,o=!0;s<t.length&&i<=r;s++){let a=t[s],l=i+a.length;l>=n&&(l>r&&(a=a.slice(0,r-i)),i<n&&(a=a.slice(n-i)),o?(e[e.length-1]+=a,o=!1):e.push(a)),i=l+1}return e}function mM(t,e,n){return ky(t,[""],e,n)}class dg{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof zr?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],o=s>>1,a=i instanceof zr?i.text.length:i.children.length;if(o==(n>0?a:0)){if(r==0)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[r]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof zr){let l=i.text[o+(n<0?-1:0)];if(this.offsets[r]+=n,l.length>Math.max(0,e))return this.value=e==0?l:n>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=i.children[o+(n<0?-1:0)];e>l.length?(e-=l.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(l),this.offsets.push(n>0?1:(l instanceof zr?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class XD{constructor(e,n,r){this.value="",this.done=!1,this.cursor=new dg(e,n>r?-1:1),this.pos=n>r?e.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*n,this.value=i.length<=r?i:n<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class ZD{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:r,value:i}=this.inner.next(e);return n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Dn.prototype[Symbol.iterator]=function(){return this.iter()},dg.prototype[Symbol.iterator]=XD.prototype[Symbol.iterator]=ZD.prototype[Symbol.iterator]=function(){return this});let wX=class{constructor(e,n,r,i){this.from=e,this.to=n,this.number=r,this.text=i}get length(){return this.to-this.from}},Qh="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(t=>t?parseInt(t,36):1);for(let t=1;t<Qh.length;t++)Qh[t]+=Qh[t-1];function xX(t){for(let e=1;e<Qh.length;e+=2)if(Qh[e]>t)return Qh[e-1]<=t;return!1}function vM(t){return t>=127462&&t<=127487}const yM=8205;function Wi(t,e,n=!0,r=!0){return(n?QD:SX)(t,e,r)}function QD(t,e,n){if(e==t.length)return e;e&&e3(t.charCodeAt(e))&&t3(t.charCodeAt(e-1))&&e--;let r=ki(t,e);for(e+=Vo(r);e<t.length;){let i=ki(t,e);if(r==yM||i==yM||n&&xX(i))e+=Vo(i),r=i;else if(vM(i)){let s=0,o=e-2;for(;o>=0&&vM(ki(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function SX(t,e,n){for(;e>0;){let r=QD(t,e-2,n);if(r<e)return r;e--}return 0}function e3(t){return t>=56320&&t<57344}function t3(t){return t>=55296&&t<56320}function ki(t,e){let n=t.charCodeAt(e);if(!t3(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return e3(r)?(n-55296<<10)+(r-56320)+65536:n}function Sk(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function Vo(t){return t<65536?1:2}const UE=/\r\n?|\n/;var Oi=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(Oi||(Oi={}));class nl{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];e+=r<0?this.sections[n]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,r=0,i=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(r,i,s),i+=s):i+=o,r+=s}}iterChangedRanges(e,n=!1){qE(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];i<0?e.push(r,i):e.push(i,r)}return new nl(e)}composeDesc(e){return this.empty?e:e.empty?this:n3(this,e)}mapDesc(e,n=!1){return e.empty?this:WE(this,e,n)}mapPos(e,n=-1,r=Oi.Simple){let i=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],u=i+a;if(l<0){if(u>e)return s+(e-i);s+=a}else{if(r!=Oi.Simple&&u>=e&&(r==Oi.TrackDel&&i<e&&u>e||r==Oi.TrackBefore&&i<e||r==Oi.TrackAfter&&u>e))return null;if(u>e||u==e&&n<0&&!a)return e==i||n<0?s:s+l;s+=l}i=u}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,n=e){for(let r=0,i=0;r<this.sections.length&&i<=n;){let s=this.sections[r++],o=this.sections[r++],a=i+s;if(o>=0&&i<=n&&a>=e)return i<e&&a>n?"cover":!0;i=a}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new nl(e)}static create(e){return new nl(e)}}class ii extends nl{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return qE(this,(n,r,i,s,o)=>e=e.replace(i,i+(r-n),o),!1),e}mapDesc(e,n=!1){return WE(this,e,n,!0)}invert(e){let n=this.sections.slice(),r=[];for(let i=0,s=0;i<n.length;i+=2){let o=n[i],a=n[i+1];if(a>=0){n[i]=a,n[i+1]=o;let l=i>>1;for(;r.length<l;)r.push(Dn.empty);r.push(o?e.slice(s,s+o):Dn.empty)}s+=o}return new ii(n,r)}compose(e){return this.empty?e:e.empty?this:n3(this,e,!0)}map(e,n=!1){return e.empty?this:WE(this,e,n,!0)}iterChanges(e,n=!1){qE(this,e,n)}get desc(){return nl.create(this.sections)}filter(e){let n=[],r=[],i=[],s=new jg(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let c=Math.min(s.len,l-a);Hi(i,c,-1);let f=s.ins==-1?-1:s.off==0?s.ins:0;Hi(n,c,f),f>0&&Bu(r,n,s.text),s.forward(c),a+=c}let u=e[o++];for(;a<u;){if(s.done)break e;let c=Math.min(s.len,u-a);Hi(n,c,-1),Hi(i,c,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(c),a+=c}}return{changes:new ii(n,r),filtered:nl.create(i)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],i=this.sections[n+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,r){let i=[],s=[],o=0,a=null;function l(c=!1){if(!c&&!i.length)return;o<n&&Hi(i,n-o,-1);let f=new ii(i,s);a=a?a.compose(f.map(a)):f,i=[],s=[],o=0}function u(c){if(Array.isArray(c))for(let f of c)u(f);else if(c instanceof ii){if(c.length!=n)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${n})`);l(),a=a?a.compose(c.map(a)):c}else{let{from:f,to:p=f,insert:v}=c;if(f>p||f<0||p>n)throw new RangeError(`Invalid change range ${f} to ${p} (in doc of length ${n})`);let b=v?typeof v=="string"?Dn.of(v.split(r||UE)):v:Dn.empty,E=b.length;if(f==p&&E==0)return;f<o&&l(),f>o&&Hi(i,f-o,-1),Hi(i,p-f,E),Bu(s,i,b),o=p}}return u(e),l(!a),a}static empty(e){return new ii(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;r.length<i;)r.push(Dn.empty);r[i]=Dn.of(s.slice(1)),n.push(s[0],r[i].length)}}}return new ii(n,r)}static createSet(e,n){return new ii(e,n)}}function Hi(t,e,n,r=!1){if(e==0&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:e==0&&t[i]==0?t[i+1]+=n:r?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function Bu(t,e,n){if(n.length==0)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<r;)t.push(Dn.empty);t.push(n)}}function qE(t,e,n){let r=t.inserted;for(let i=0,s=0,o=0;o<t.sections.length;){let a=t.sections[o++],l=t.sections[o++];if(l<0)i+=a,s+=a;else{let u=i,c=s,f=Dn.empty;for(;u+=a,c+=l,l&&r&&(f=f.append(r[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],l=t.sections[o++];e(i,u,s,c,f),i=u,s=c}}}function WE(t,e,n,r=!1){let i=[],s=r?[]:null,o=new jg(t),a=new jg(e);for(let l=-1;;)if(o.ins==-1&&a.ins==-1){let u=Math.min(o.len,a.len);Hi(i,u,-1),o.forward(u),a.forward(u)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!n))){let u=a.len;for(Hi(i,a.ins,-1);u;){let c=Math.min(o.len,u);o.ins>=0&&l<o.i&&o.len<=c&&(Hi(i,0,o.ins),s&&Bu(s,i,o.text),l=o.i),o.forward(c),u-=c}a.next()}else if(o.ins>=0){let u=0,c=o.len;for(;c;)if(a.ins==-1){let f=Math.min(c,a.len);u+=f,c-=f,a.forward(f)}else if(a.ins==0&&a.len<c)c-=a.len,a.next();else break;Hi(i,u,l<o.i?o.ins:0),s&&l<o.i&&Bu(s,i,o.text),l=o.i,o.forward(o.len-c)}else{if(o.done&&a.done)return s?ii.createSet(i,s):nl.create(i);throw new Error("Mismatched change set lengths")}}function n3(t,e,n=!1){let r=[],i=n?[]:null,s=new jg(t),o=new jg(e);for(let a=!1;;){if(s.done&&o.done)return i?ii.createSet(r,i):nl.create(r);if(s.ins==0)Hi(r,s.len,0,a),s.next();else if(o.len==0&&!o.done)Hi(r,0,o.ins,a),i&&Bu(i,r,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),u=r.length;if(s.ins==-1){let c=o.ins==-1?-1:o.off?0:o.ins;Hi(r,l,c,a),i&&c&&Bu(i,r,o.text)}else o.ins==-1?(Hi(r,s.off?0:s.len,l,a),i&&Bu(i,r,s.textBit(l))):(Hi(r,s.off?0:s.len,o.off?0:o.ins,a),i&&!o.off&&Bu(i,r,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||r.length>u),s.forward2(l),o.forward(l)}}}}class jg{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?Dn.empty:e[n]}textBit(e){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!e?Dn.empty:n[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class lf{constructor(e,n,r){this.from=e,this.to=n,this.flags=r}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,n=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,n):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new lf(r,i,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return Ke.range(e,n);let r=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return Ke.range(this.anchor,r)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return Ke.range(e.anchor,e.head)}static create(e,n,r){return new lf(e,n,r)}}class Ke{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:Ke.create(this.ranges.map(r=>r.map(e,n)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new Ke([this.main],0)}addRange(e,n=!0){return Ke.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let r=this.ranges.slice();return r[n]=e,Ke.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Ke(e.ranges.map(n=>lf.fromJSON(n)),e.main)}static single(e,n=e){return new Ke([Ke.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return Ke.normalized(e.slice(),n);r=s.to}return new Ke(e,n)}static cursor(e,n=0,r,i){return lf.create(e,e,(n==0?0:n<0?4:8)|(r==null?3:Math.min(2,r))|(i??33554431)<<5)}static range(e,n,r,i){let s=(r??33554431)<<5|(i==null?3:Math.min(2,i));return n<e?lf.create(n,e,24|s):lf.create(e,n,(n>e?4:0)|s)}static normalized(e,n=0){let r=e[n];e.sort((i,s)=>i.from-s.from),n=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],o=e[i-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);i<=n&&n--,e.splice(--i,2,s.anchor>s.head?Ke.range(l,a):Ke.range(a,l))}}return new Ke(e,n)}}function r3(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let Ek=0;class vt{constructor(e,n,r,i,s){this.combine=e,this.compareInput=n,this.compare=r,this.isStatic=i,this.id=Ek++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}static define(e={}){return new vt(e.combine||(n=>n),e.compareInput||((n,r)=>n===r),e.compare||(e.combine?(n,r)=>n===r:_k),!!e.static,e.enables)}of(e){return new Cy([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Cy(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Cy(e,this,2,n)}from(e,n){return n||(n=r=>r),this.compute([e],r=>n(r.field(e)))}}function _k(t,e){return t==e||t.length==e.length&&t.every((n,r)=>n===e[r])}class Cy{constructor(e,n,r,i){this.dependencies=e,this.facet=n,this.type=r,this.value=i,this.id=Ek++}dynamicSlot(e){var n;let r=this.value,i=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,u=!1,c=[];for(let f of this.dependencies)f=="doc"?l=!0:f=="selection"?u=!0:((n=e[f.id])!==null&&n!==void 0?n:1)&1||c.push(e[f.id]);return{create(f){return f.values[o]=r(f),1},update(f,p){if(l&&p.docChanged||u&&(p.docChanged||p.selection)||GE(f,c)){let v=r(f);if(a?!bM(v,f.values[o],i):!i(v,f.values[o]))return f.values[o]=v,1}return 0},reconfigure:(f,p)=>{let v,b=p.config.address[s];if(b!=null){let E=lb(p,b);if(this.dependencies.every(P=>P instanceof vt?p.facet(P)===f.facet(P):P instanceof Zr?p.field(P,!1)==f.field(P,!1):!0)||(a?bM(v=r(f),E,i):i(v=r(f),E)))return f.values[o]=E,0}else v=r(f);return f.values[o]=v,1}}}}function bM(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function GE(t,e){let n=!1;for(let r of e)pg(t,r)&1&&(n=!0);return n}function EX(t,e,n){let r=n.map(l=>t[l.id]),i=n.map(l=>l.type),s=r.filter(l=>!(l&1)),o=t[e.id]>>1;function a(l){let u=[];for(let c=0;c<r.length;c++){let f=lb(l,r[c]);if(i[c]==2)for(let p of f)u.push(p);else u.push(f)}return e.combine(u)}return{create(l){for(let u of r)pg(l,u);return l.values[o]=a(l),1},update(l,u){if(!GE(l,s))return 0;let c=a(l);return e.compare(c,l.values[o])?0:(l.values[o]=c,1)},reconfigure(l,u){let c=GE(l,r),f=u.config.facets[e.id],p=u.facet(e);if(f&&!c&&_k(n,f))return l.values[o]=p,0;let v=a(l);return e.compare(v,p)?(l.values[o]=p,0):(l.values[o]=v,1)}}}const wM=vt.define({static:!0});class Zr{constructor(e,n,r,i,s){this.id=e,this.createF=n,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let n=new Zr(Ek++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(wM).find(r=>r.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:r=>(r.values[n]=this.create(r),1),update:(r,i)=>{let s=r.values[n],o=this.updateF(s,i);return this.compareF(s,o)?0:(r.values[n]=o,1)},reconfigure:(r,i)=>i.config.address[this.id]!=null?(r.values[n]=i.field(this),0):(r.values[n]=this.create(r),1)}}init(e){return[this,wM.of({field:this,create:e})]}get extension(){return this}}const Jc={lowest:4,low:3,default:2,high:1,highest:0};function Ip(t){return e=>new i3(e,t)}const Kf={highest:Ip(Jc.highest),high:Ip(Jc.high),default:Ip(Jc.default),low:Ip(Jc.low),lowest:Ip(Jc.lowest)};class i3{constructor(e,n){this.inner=e,this.prec=n}}class Rm{of(e){return new KE(this,e)}reconfigure(e){return Rm.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class KE{constructor(e,n){this.compartment=e,this.inner=n}}class ab{constructor(e,n,r,i,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,r){let i=[],s=Object.create(null),o=new Map;for(let p of _X(e,n,o))p instanceof Zr?i.push(p):(s[p.facet.id]||(s[p.facet.id]=[])).push(p);let a=Object.create(null),l=[],u=[];for(let p of i)a[p.id]=u.length<<1,u.push(v=>p.slot(v));let c=r==null?void 0:r.config.facets;for(let p in s){let v=s[p],b=v[0].facet,E=c&&c[p]||[];if(v.every(P=>P.type==0))if(a[b.id]=l.length<<1|1,_k(E,v))l.push(r.facet(b));else{let P=b.combine(v.map(S=>S.value));l.push(r&&b.compare(P,r.facet(b))?r.facet(b):P)}else{for(let P of v)P.type==0?(a[P.id]=l.length<<1|1,l.push(P.value)):(a[P.id]=u.length<<1,u.push(S=>P.dynamicSlot(S)));a[b.id]=u.length<<1,u.push(P=>EX(P,b,v))}}let f=u.map(p=>p(a));return new ab(e,o,f,a,l,s)}}function _X(t,e,n){let r=[[],[],[],[],[]],i=new Map;function s(o,a){let l=i.get(o);if(l!=null){if(l<=a)return;let u=r[l].indexOf(o);u>-1&&r[l].splice(u,1),o instanceof KE&&n.delete(o.compartment)}if(i.set(o,a),Array.isArray(o))for(let u of o)s(u,a);else if(o instanceof KE){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(o.compartment)||o.inner;n.set(o.compartment,u),s(u,a)}else if(o instanceof i3)s(o.inner,o.prec);else if(o instanceof Zr)r[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof Cy)r[a].push(o),o.facet.extensions&&s(o.facet.extensions,Jc.default);else{let u=o.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(u,a)}}return s(t,Jc.default),r.reduce((o,a)=>o.concat(a))}function pg(t,e){if(e&1)return 2;let n=e>>1,r=t.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;t.status[n]=4;let i=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|i}function lb(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const s3=vt.define(),o3=vt.define({combine:t=>t.some(e=>e),static:!0}),a3=vt.define({combine:t=>t.length?t[0]:void 0,static:!0}),l3=vt.define(),u3=vt.define(),c3=vt.define(),f3=vt.define({combine:t=>t.length?t[0]:!1});class su{constructor(e,n){this.type=e,this.value=n}static define(){return new AX}}class AX{of(e){return new su(this,e)}}class kX{constructor(e){this.map=e}of(e){return new Kt(this,e)}}class Kt{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new Kt(this.type,n)}is(e){return this.type==e}static define(e={}){return new kX(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(n);s&&r.push(s)}return r}}Kt.reconfigure=Kt.define();Kt.appendConfig=Kt.define();class ai{constructor(e,n,r,i,s,o){this.startState=e,this.changes=n,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,r&&r3(r,n.newLength),s.some(a=>a.type==ai.time)||(this.annotations=s.concat(ai.time.of(Date.now())))}static create(e,n,r,i,s,o){return new ai(e,n,r,i,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(ai.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}ai.time=su.define();ai.userEvent=su.define();ai.addToHistory=su.define();ai.remote=su.define();function CX(t,e){let n=[];for(let r=0,i=0;;){let s,o;if(r<t.length&&(i==e.length||e[i]>=t[r]))s=t[r++],o=t[r++];else if(i<e.length)s=e[i++],o=e[i++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function h3(t,e,n){var r;let i,s,o;return n?(i=e.changes,s=ii.empty(e.changes.length),o=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(i)),{changes:o,selection:e.selection?e.selection.map(s):(r=t.selection)===null||r===void 0?void 0:r.map(i),effects:Kt.mapEffects(t.effects,i).concat(Kt.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function YE(t,e,n){let r=e.selection,i=ed(e.annotations);return e.userEvent&&(i=i.concat(ai.userEvent.of(e.userEvent))),{changes:e.changes instanceof ii?e.changes:ii.of(e.changes||[],n,t.facet(a3)),selection:r&&(r instanceof Ke?r:Ke.single(r.anchor,r.head)),effects:ed(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function d3(t,e,n){let r=YE(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;r=h3(r,YE(t,e[s],o?r.changes.newLength:t.doc.length),o)}let i=ai.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return OX(n?PX(i):i)}function PX(t){let e=t.startState,n=!0;for(let i of e.facet(l3)){let s=i(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:CX(n,s))}if(n!==!0){let i,s;if(n===!1)s=t.changes.invertedDesc,i=ii.empty(e.doc.length);else{let o=t.changes.filter(n);i=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=ai.create(e,i,t.selection&&t.selection.map(s),Kt.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let r=e.facet(u3);for(let i=r.length-1;i>=0;i--){let s=r[i](t);s instanceof ai?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof ai?t=s[0]:t=d3(e,ed(s),!1)}return t}function OX(t){let e=t.startState,n=e.facet(c3),r=t;for(let i=n.length-1;i>=0;i--){let s=n[i](t);s&&Object.keys(s).length&&(r=h3(r,YE(e,s,t.changes.newLength),!0))}return r==t?t:ai.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}const TX=[];function ed(t){return t==null?TX:Array.isArray(t)?t:[t]}var xr=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(xr||(xr={}));const MX=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let JE;try{JE=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function NX(t){if(JE)return JE.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||MX.test(n)))return!0}return!1}function IX(t){return e=>{if(!/\S/.test(e))return xr.Space;if(NX(e))return xr.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return xr.Word;return xr.Other}}class un{constructor(e,n,r,i,s,o){this.config=e,this.doc=n,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)pg(this,a<<1);this.computeSlot=null}field(e,n=!0){let r=this.config.address[e.id];if(r==null){if(n)throw new RangeError("Field is not present in this state");return}return pg(this,r),lb(this,r)}update(...e){return d3(this,e,!0)}applyTransaction(e){let n=this.config,{base:r,compartments:i}=n;for(let o of e.effects)o.is(Rm.reconfigure)?(n&&(i=new Map,n.compartments.forEach((a,l)=>i.set(l,a)),n=null),i.set(o.value.compartment,o.value.extension)):o.is(Kt.reconfigure)?(n=null,r=o.value):o.is(Kt.appendConfig)&&(n=null,r=ed(r).concat(o.value));let s;n?s=e.startState.values.slice():(n=ab.resolve(r,i,this),s=new un(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(a,l)=>l.reconfigure(a,this),null).values),new un(n,e.newDoc,e.newSelection,s,(o,a)=>a.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:Ke.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,r=e(n.ranges[0]),i=this.changes(r.changes),s=[r.range],o=ed(r.effects);for(let a=1;a<n.ranges.length;a++){let l=e(n.ranges[a]),u=this.changes(l.changes),c=u.map(i);for(let p=0;p<a;p++)s[p]=s[p].map(c);let f=i.mapDesc(u,!0);s.push(l.range.map(f)),i=i.compose(c),o=Kt.mapEffects(o,c).concat(Kt.mapEffects(ed(l.effects),f))}return{changes:i,selection:Ke.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof ii?e:ii.of(e,this.doc.length,this.facet(un.lineSeparator))}toText(e){return Dn.of(e.split(this.facet(un.lineSeparator)||UE))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(pg(this,n),lb(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof Zr&&this.config.address[i.id]!=null&&(n[r]=i.spec.toJSON(this.field(e[r]),this))}return n}static fromJSON(e,n={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let o=r[s],a=e[s];i.push(o.init(l=>o.spec.fromJSON(a,l)))}}return un.create({doc:e.doc,selection:Ke.fromJSON(e.selection),extensions:n.extensions?i.concat([n.extensions]):i})}static create(e={}){let n=ab.resolve(e.extensions||[],new Map),r=e.doc instanceof Dn?e.doc:Dn.of((e.doc||"").split(n.staticFacet(un.lineSeparator)||UE)),i=e.selection?e.selection instanceof Ke?e.selection:Ke.single(e.selection.anchor,e.selection.head):Ke.single(0);return r3(i,r.length),n.staticFacet(o3)||(i=i.asSingle()),new un(n,r,i,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(un.tabSize)}get lineBreak(){return this.facet(un.lineSeparator)||`
`}get readOnly(){return this.facet(f3)}phrase(e,...n){for(let r of this.facet(un.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>n.length?r:n[s-1]})),e}languageDataAt(e,n,r=-1){let i=[];for(let s of this.facet(s3))for(let o of s(this,n,r))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){return IX(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-r,a=e-r;for(;o>0;){let l=Wi(n,o,!1);if(s(n.slice(l,o))!=xr.Word)break;o=l}for(;a<i;){let l=Wi(n,a);if(s(n.slice(a,l))!=xr.Word)break;a=l}return o==a?null:Ke.range(o+r,a+r)}}un.allowMultipleSelections=o3;un.tabSize=vt.define({combine:t=>t.length?t[0]:4});un.lineSeparator=a3;un.readOnly=f3;un.phrases=vt.define({compare(t,e){let n=Object.keys(t),r=Object.keys(e);return n.length==r.length&&n.every(i=>t[i]==e[i])}});un.languageData=s3;un.changeFilter=l3;un.transactionFilter=u3;un.transactionExtender=c3;Rm.reconfigure=Kt.define();function _a(t,e,n={}){let r={};for(let i of t)for(let s of Object.keys(i)){let o=i[s],a=r[s];if(a===void 0)r[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(n,s))r[s]=n[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class $f{eq(e){return this==e}range(e,n=e){return XE.create(e,n,this)}}$f.prototype.startSide=$f.prototype.endSide=0;$f.prototype.point=!1;$f.prototype.mapMode=Oi.TrackDel;let XE=class p3{constructor(e,n,r){this.from=e,this.to=n,this.value=r}static create(e,n,r){return new p3(e,n,r)}};function ZE(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class Ak{constructor(e,n,r,i){this.from=e,this.to=n,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,n,r,i=0){let s=r?this.to:this.from;for(let o=i,a=s.length;;){if(o==a)return o;let l=o+a>>1,u=s[l]-e||(r?this.value[l].endSide:this.value[l].startSide)-n;if(l==o)return u>=0?o:a;u>=0?a=l:o=l+1}}between(e,n,r,i){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(r,1e9,!1,s);s<o;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let r=[],i=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let u=this.value[l],c=this.from[l]+e,f=this.to[l]+e,p,v;if(c==f){let b=n.mapPos(c,u.startSide,u.mapMode);if(b==null||(p=v=b,u.startSide!=u.endSide&&(v=n.mapPos(c,u.endSide),v<p)))continue}else if(p=n.mapPos(c,u.startSide),v=n.mapPos(f,u.endSide),p>v||p==v&&u.startSide>0&&u.endSide<=0)continue;(v-p||u.endSide-u.startSide)<0||(o<0&&(o=p),u.point&&(a=Math.max(a,v-p)),r.push(u),i.push(p-o),s.push(v-o))}return{mapped:r.length?new Ak(i,s,r,a):null,pos:o}}}class Vn{constructor(e,n,r,i){this.chunkPos=e,this.chunk=n,this.nextLayer=r,this.maxPoint=i}static create(e,n,r,i){return new Vn(e,n,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(r&&(n=n.slice().sort(ZE)),this.isEmpty)return n.length?Vn.of(n):this;let a=new g3(this,null,-1).goto(0),l=0,u=[],c=new oc;for(;a.value||l<n.length;)if(l<n.length&&(a.from-n[l].from||a.startSide-n[l].value.startSide)>=0){let f=n[l++];c.addInner(f.from,f.to,f.value)||u.push(f)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==n.length||this.chunkEnd(a.chunkIndex)<n[l].from)&&(!o||i>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&c.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||i>a.to||s<a.from||o(a.from,a.to,a.value))&&(c.addInner(a.from,a.to,a.value)||u.push(XE.create(a.from,a.to,a.value))),a.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?Vn.empty:this.nextLayer.update({add:u,filter:o,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],r=[],i=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],u=e.touchesRange(a,a+l.length);if(u===!1)i=Math.max(i,l.maxPoint),n.push(l),r.push(e.mapPos(a));else if(u===!0){let{mapped:c,pos:f}=l.map(a,e);c&&(i=Math.max(i,c.maxPoint),n.push(c),r.push(f))}}let s=this.nextLayer.map(e);return n.length==0?s:new Vn(r,n,s||Vn.empty,i)}between(e,n,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],o=this.chunk[i];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,r)===!1)return}this.nextLayer.between(e,n,r)}}iter(e=0){return zg.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return zg.from(e).goto(n)}static compare(e,n,r,i,s=-1){let o=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=s),a=n.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=s),l=xM(o,a,r),u=new $p(o,l,s),c=new $p(a,l,s);r.iterGaps((f,p,v)=>SM(u,f,c,p,v,i)),r.empty&&r.length==0&&SM(u,0,c,0,0,i)}static eq(e,n,r=0,i){i==null&&(i=1e9-1);let s=e.filter(c=>!c.isEmpty&&n.indexOf(c)<0),o=n.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=xM(s,o),l=new $p(s,a,0).goto(r),u=new $p(o,a,0).goto(r);for(;;){if(l.to!=u.to||!QE(l.active,u.active)||l.point&&(!u.point||!l.point.eq(u.point)))return!1;if(l.to>i)return!0;l.next(),u.next()}}static spans(e,n,r,i,s=-1){let o=new $p(e,null,s).goto(n),a=n,l=o.openStart;for(;;){let u=Math.min(o.to,r);if(o.point){let c=o.activeForPoint(o.to),f=o.pointFrom<n?c.length+1:Math.min(c.length,l);i.point(a,u,o.point,c,f,o.pointRank),l=Math.min(o.openEnd(u),c.length)}else u>a&&(i.span(a,u,o.active,l),l=o.openEnd(u));if(o.to>r)return l+(o.point&&o.to>r?1:0);a=o.to,o.next()}}static of(e,n=!1){let r=new oc;for(let i of e instanceof XE?[e]:n?$X(e):e)r.add(i.from,i.to,i.value);return r.finish()}}Vn.empty=new Vn([],[],null,-1);function $X(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let r=t[n];if(ZE(e,r)>0)return t.slice().sort(ZE);e=r}return t}Vn.empty.nextLayer=Vn.empty;class oc{finishChunk(e){this.chunks.push(new Ak(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,r){this.addInner(e,n,r)||(this.nextLayer||(this.nextLayer=new oc)).add(e,n,r)}addInner(e,n,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+e,this.lastTo=n.to[r]+e,!0}finish(){return this.finishInner(Vn.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=Vn.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function xM(t,e,n){let r=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&r.set(s.chunk[o],s.chunkPos[o]);let i=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=r.get(s.chunk[o]);a!=null&&(n?n.mapPos(a):a)==s.chunkPos[o]&&!(n!=null&&n.touchesRange(a,a+s.chunk[o].length))&&i.add(s.chunk[o])}return i}class g3{constructor(e,n,r,i=0){this.layer=e,this.skip=n,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=e+n.from[this.rangeIndex];if(this.from=r,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class zg{constructor(e){this.heap=e}static from(e,n=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=r&&i.push(new g3(o,n,r,s));return i.length==1?i[0]:new zg(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let r of this.heap)r.goto(e,n);for(let r=this.heap.length>>1;r>=0;r--)aS(this.heap,r);return this.next(),this}forward(e,n){for(let r of this.heap)r.forward(e,n);for(let r=this.heap.length>>1;r>=0;r--)aS(this.heap,r);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),aS(this.heap,0)}}}function aS(t,e){for(let n=t[e];;){let r=(e<<1)+1;if(r>=t.length)break;let i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0&&(i=t[r+1],r++),n.compare(i)<0)break;t[r]=n,t[e]=i,e=r}}class $p{constructor(e,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=zg.from(e,n,r)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){x0(this.active,e),x0(this.activeTo,e),x0(this.activeRank,e),this.minActive=EM(this.active,this.activeTo)}addActive(e){let n=0,{value:r,to:i,rank:s}=this.cursor;for(;n<this.activeRank.length&&this.activeRank[n]<=s;)n++;S0(this.active,n,r),S0(this.activeTo,n,i),S0(this.activeRank,n,s),e&&S0(e,n,this.cursor.from),this.minActive=EM(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&x0(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(e){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)n++;return n}}function SM(t,e,n,r,i,s){t.goto(e),n.goto(r);let o=r+i,a=r,l=r-e;for(;;){let u=t.to+l-n.to||t.endSide-n.endSide,c=u<0?t.to+l:n.to,f=Math.min(c,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&QE(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(a,f,t.point,n.point):f>a&&!QE(t.active,n.active)&&s.compareRange(a,f,t.active,n.active),c>o)break;a=c,u<=0&&t.next(),u>=0&&n.next()}}function QE(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function x0(t,e){for(let n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function S0(t,e,n){for(let r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=n}function EM(t,e){let n=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||t[i].endSide-t[n].endSide)<0&&(n=i,r=e[i]);return n}function Lm(t,e,n=t.length){let r=0;for(let i=0;i<n;)t.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=Wi(t,i));return r}function e_(t,e,n,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==t.length)break;s+=t.charCodeAt(i)==9?n-s%n:1,i=Wi(t,i)}return r===!0?-1:t.length}const t_="",_M=typeof Symbol>"u"?"__"+t_:Symbol.for(t_),n_=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),AM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class ac{constructor(e,n){this.rules=[];let{finish:r}=n||{};function i(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,u){let c=[],f=/^@(\w+)\b/.exec(o[0]),p=f&&f[1]=="keyframes";if(f&&a==null)return l.push(o[0]+";");for(let v in a){let b=a[v];if(/&/.test(v))s(v.split(/,\s*/).map(E=>o.map(P=>E.replace(/&/,P))).reduce((E,P)=>E.concat(P)),b,l);else if(b&&typeof b=="object"){if(!f)throw new RangeError("The value of a property ("+v+") should be a primitive value.");s(i(v),b,c,p)}else b!=null&&c.push(v.replace(/_.*/,"").replace(/[A-Z]/g,E=>"-"+E.toLowerCase())+": "+b+";")}(c.length||p)&&l.push((r&&!f&&!u?o.map(r):o).join(", ")+" {"+c.join(" ")+"}")}for(let o in e)s(i(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=AM[_M]||1;return AM[_M]=e+1,t_+e.toString(36)}static mount(e,n){(e[n_]||new RX(e)).mount(Array.isArray(n)?n:[n])}}let kM=new Map;class RX{constructor(e){let n=e.ownerDocument||e,r=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let i=kM.get(n);if(i)return e.adoptedStyleSheets=[i.sheet,...e.adoptedStyleSheets],e[n_]=i;this.sheet=new r.CSSStyleSheet,e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets],kM.set(n,this)}else{this.styleTag=n.createElement("style");let i=e.head||e;i.insertBefore(this.styleTag,i.firstChild)}this.modules=[],e[n_]=this}mount(e){let n=this.sheet,r=0,i=0;for(let s=0;s<e.length;s++){let o=e[s],a=this.modules.indexOf(o);if(a<i&&a>-1&&(this.modules.splice(a,1),i--,a=-1),a==-1){if(this.modules.splice(i++,0,o),n)for(let l=0;l<o.rules.length;l++)n.insertRule(o.rules[l],r++)}else{for(;i<a;)r+=this.modules[i++].rules.length;r+=o.rules.length,i++}}if(!n){let s="";for(let o=0;o<this.modules.length;o++)s+=this.modules[o].getRules()+`
`;this.styleTag.textContent=s}}}var lc={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Hg={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},CM=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent),LX=typeof navigator<"u"&&/Mac/.test(navigator.platform),DX=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),FX=LX||CM&&+CM[1]<57;for(var Ci=0;Ci<10;Ci++)lc[48+Ci]=lc[96+Ci]=String(Ci);for(var Ci=1;Ci<=24;Ci++)lc[Ci+111]="F"+Ci;for(var Ci=65;Ci<=90;Ci++)lc[Ci]=String.fromCharCode(Ci+32),Hg[Ci]=String.fromCharCode(Ci);for(var lS in lc)Hg.hasOwnProperty(lS)||(Hg[lS]=lc[lS]);function VX(t){var e=FX&&(t.ctrlKey||t.altKey||t.metaKey)||DX&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Hg:lc)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function ub(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function r_(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function BX(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Py(t,e){if(!e.anchorNode)return!1;try{return r_(t,e.anchorNode)}catch{return!1}}function Ed(t){return t.nodeType==3?Rf(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function cb(t,e,n,r){return n?PM(t,e,n,r,-1)||PM(t,e,n,r,1):!1}function fb(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function PM(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:uc(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=fb(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?uc(t):0}else return!1}}function uc(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function L1(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function jX(t){return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function zX(t,e,n,r,i,s,o,a){let l=t.ownerDocument,u=l.defaultView||window;for(let c=t,f=!1;c&&!f;)if(c.nodeType==1){let p,v=c==l.body;if(v)p=jX(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(f=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let P=c.getBoundingClientRect();p={left:P.left,right:P.left+c.clientWidth,top:P.top,bottom:P.top+c.clientHeight}}let b=0,E=0;if(i=="nearest")e.top<p.top?(E=-(p.top-e.top+o),n>0&&e.bottom>p.bottom+E&&(E=e.bottom-p.bottom+E+o)):e.bottom>p.bottom&&(E=e.bottom-p.bottom+o,n<0&&e.top-E<p.top&&(E=-(p.top+E-e.top+o)));else{let P=e.bottom-e.top,S=p.bottom-p.top;E=(i=="center"&&P<=S?e.top+P/2-S/2:i=="start"||i=="center"&&n<0?e.top-o:e.bottom-S+o)-p.top}if(r=="nearest"?e.left<p.left?(b=-(p.left-e.left+s),n>0&&e.right>p.right+b&&(b=e.right-p.right+b+s)):e.right>p.right&&(b=e.right-p.right+s,n<0&&e.left<p.left+b&&(b=-(p.left+b-e.left+s))):b=(r=="center"?e.left+(e.right-e.left)/2-(p.right-p.left)/2:r=="start"==a?e.left-s:e.right-(p.right-p.left)+s)-p.left,b||E)if(v)u.scrollBy(b,E);else{let P=0,S=0;if(E){let A=c.scrollTop;c.scrollTop+=E,S=c.scrollTop-A}if(b){let A=c.scrollLeft;c.scrollLeft+=b,P=c.scrollLeft-A}e={left:e.left-P,top:e.top-S,right:e.right-P,bottom:e.bottom-S},P&&Math.abs(P-b)<1&&(r="nearest"),S&&Math.abs(S-E)<1&&(i="nearest")}if(v)break;c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function HX(t){let e=t.ownerDocument;for(let n=t.parentNode;n&&n!=e.body;)if(n.nodeType==1){if(n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)return n;n=n.assignedSlot||n.parentNode}else if(n.nodeType==11)n=n.host;else break;return null}class UX{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:r}=e;this.set(n,Math.min(e.anchorOffset,n?uc(n):0),r,Math.min(e.focusOffset,r?uc(r):0))}set(e,n,r,i){this.anchorNode=e,this.anchorOffset=n,this.focusNode=r,this.focusOffset=i}}let Sh=null;function m3(t){if(t.setActive)return t.setActive();if(Sh)return t.focus(Sh);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(Sh==null?{get preventScroll(){return Sh={preventScroll:!0},!0}}:void 0),!Sh){Sh=!1;for(let n=0;n<e.length;){let r=e[n++],i=e[n++],s=e[n++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let OM;function Rf(t,e,n=e){let r=OM||(OM=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function td(t,e,n){let r={key:e,code:e,keyCode:n,which:n,cancelable:!0},i=new KeyboardEvent("keydown",r);i.synthetic=!0,t.dispatchEvent(i);let s=new KeyboardEvent("keyup",r);return s.synthetic=!0,t.dispatchEvent(s),i.defaultPrevented||s.defaultPrevented}function qX(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function v3(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function WX(t,e){let n=e.focusNode,r=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=r)return!1;for(r=Math.min(r,uc(n));;)if(r){if(n.nodeType!=1)return!1;let i=n.childNodes[r-1];i.contentEditable=="false"?r--:(n=i,r=uc(n))}else{if(n==t)return!0;r=fb(n),n=n.parentNode}}function y3(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}class hs{constructor(e,n,r=!0){this.node=e,this.offset=n,this.precise=r}static before(e,n){return new hs(e.parentNode,fb(e),n)}static after(e,n){return new hs(e.parentNode,fb(e)+1,n)}}const kk=[];class ur{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let r of this.children){if(r==e)return n;n+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let r=this.dom,i=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=i?i.nextSibling:r.firstChild)){let a=ur.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,n),o.flags&=-8}if(s=i?i.nextSibling:r.firstChild,n&&!n.written&&n.node==r&&s!=o.dom&&(n.written=!0),o.dom.parentNode==r)for(;s&&s!=o.dom;)s=TM(s);else r.insertBefore(o.dom,s);i=o.dom}for(s=i?i.nextSibling:r.firstChild,s&&n&&n.node==r&&(n.written=!0);s;)s=TM(s)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,n),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let r;if(e==this.dom)r=this.dom.childNodes[n];else{let i=uc(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!ur.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let o=this.children[i];if(o.dom==r)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,n,r=0){let i=-1,s=-1,o=-1,a=-1;for(let l=0,u=r,c=r;l<this.children.length;l++){let f=this.children[l],p=u+f.length;if(u<e&&p>n)return f.domBoundsAround(e,n,u);if(p>=e&&i==-1&&(i=l,s=u),u>n&&f.dom.parentNode==this.dom){o=l,a=c;break}c=p,u=p+f.breakAfter}return{from:s,to:a<0?r+this.length:a,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,r=kk){this.markDirty();for(let i=e;i<n;i++){let s=this.children[i];s.parent==this&&s.destroy()}this.children.splice(e,n-e,...r);for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new b3(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,r,i,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){this.parent=null}}ur.prototype.breakAfter=0;function TM(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class b3{constructor(e,n,r){this.children=e,this.pos=n,this.i=r,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function w3(t,e,n,r,i,s,o,a,l){let{children:u}=t,c=u.length?u[e]:null,f=s.length?s[s.length-1]:null,p=f?f.breakAfter:o;if(!(e==r&&c&&!o&&!p&&s.length<2&&c.merge(n,i,s.length?f:null,n==0,a,l))){if(r<u.length){let v=u[r];v&&i<v.length?(e==r&&(v=v.split(i),i=0),!p&&f&&v.merge(0,i,f,!0,0,l)?s[s.length-1]=v:(i&&v.merge(0,i,null,!1,0,l),s.push(v))):v!=null&&v.breakAfter&&(f?f.breakAfter=1:o=1),r++}for(c&&(c.breakAfter=o,n>0&&(!o&&s.length&&c.merge(n,c.length,s[0],!1,a,0)?c.breakAfter=s.shift().breakAfter:(n<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(n,c.length,null,!1,a,0),e++));e<r&&s.length;)if(u[r-1].become(s[s.length-1]))r--,s.pop(),l=s.length?0:a;else if(u[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&r<u.length&&!u[e-1].breakAfter&&u[r].merge(0,0,u[e-1],!1,a,l)&&e--,(e<r||s.length)&&t.replaceChildren(e,r,s)}}function x3(t,e,n,r,i,s){let o=t.childCursor(),{i:a,off:l}=o.findPos(n,1),{i:u,off:c}=o.findPos(e,-1),f=e-n;for(let p of r)f+=p.length;t.length+=f,w3(t,u,c,a,l,r,0,i,s)}const Bh="";class S3{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(un.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Bh}readRange(e,n){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let s=this.text.length;this.readNode(i);let o=i.nextSibling;if(o==n)break;let a=ur.get(i),l=ur.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:MM(i))||MM(o)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>s)&&this.lineBreak(),i=o}return this.findPointBefore(r,n),this}readTextNode(e){let n=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,r),o=this.lineSeparator.length):(a=i.exec(n))&&(s=a.index,o=a[0].length),this.append(n.slice(r,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);r=s+o}}readNode(e){if(e.cmIgnore)return;let n=ur.get(e),r=n&&n.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(e,n){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+Math.min(n,r.offset))}}function MM(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}class NM{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}let co=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},i_=typeof document<"u"?document:{documentElement:{style:{}}};const s_=/Edge\/(\d+)/.exec(co.userAgent),E3=/MSIE \d/.test(co.userAgent),o_=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(co.userAgent),D1=!!(E3||o_||s_),IM=!D1&&/gecko\/(\d+)/i.test(co.userAgent),uS=!D1&&/Chrome\/(\d+)/.exec(co.userAgent),$M="webkitFontSmoothing"in i_.documentElement.style,_3=!D1&&/Apple Computer/.test(co.vendor),RM=_3&&(/Mobile\/\w+/.test(co.userAgent)||co.maxTouchPoints>2);var St={mac:RM||/Mac/.test(co.platform),windows:/Win/.test(co.platform),linux:/Linux|X11/.test(co.platform),ie:D1,ie_version:E3?i_.documentMode||6:o_?+o_[1]:s_?+s_[1]:0,gecko:IM,gecko_version:IM?+(/Firefox\/(\d+)/.exec(co.userAgent)||[0,0])[1]:0,chrome:!!uS,chrome_version:uS?+uS[1]:0,ios:RM,android:/Android\b/.test(co.userAgent),webkit:$M,safari:_3,webkit_version:$M?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:i_.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const GX=256;class al extends ur{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,r){return this.flags&8||r&&(!(r instanceof al)||this.length-(n-e)+r.length>GX||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new al(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new hs(this.dom,e)}domBoundsAround(e,n,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return KX(this.dom,e,n)}}class tu extends ur{constructor(e,n=[],r=0){super(),this.mark=e,this.children=n,this.length=r;for(let i of n)i.setParent(this)}setAttrs(e){if(v3(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,r,i,s,o){return r&&(!(r instanceof tu&&r.mark.eq(this.mark))||e&&s<=0||n<this.length&&o<=0)?!1:(x3(this,e,n,r?r.children:[],s-1,o-1),this.markDirty(),!0)}split(e){let n=[],r=0,i=-1,s=0;for(let a of this.children){let l=r+a.length;l>e&&n.push(r<e?a.split(e-r):a),i<0&&r>=e&&(i=s),r=l,s++}let o=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new tu(this.mark,n,o)}domAtPos(e){return A3(this,e)}coordsAt(e,n){return C3(this,e,n)}}function KX(t,e,n){let r=t.nodeValue.length;e>r&&(e=r);let i=e,s=e,o=0;e==0&&n<0||e==r&&n>=0?St.chrome||St.gecko||(e?(i--,o=1):s<r&&(s++,o=-1)):n<0?i--:s<r&&s++;let a=Rf(t,i,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:n>=0)?0:a.length-1];return St.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,u=>u.width)||l),o?L1(l,o<0):l||null}class uf extends ur{constructor(e,n,r){super(),this.widget=e,this.length=n,this.side=r,this.prevWidget=null}static create(e,n,r){return new uf(e,n,r)}split(e){let n=uf.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,n,r,i,s,o){return r&&(!(r instanceof uf)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}become(e){return e instanceof uf&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Dn.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,r=n&&n.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):Dn.empty}domAtPos(e){return(this.length?e==0:this.side>0)?hs.before(this.dom):hs.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);if(r)return r;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?i.length-1:0;s=i[a],!(e>0?a==0:a==i.length-1||s.top<s.bottom);a+=o?-1:1);return L1(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class _d extends ur{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof _d&&e.side==this.side}split(){return new _d(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?hs.before(this.dom):hs.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Dn.empty}get isHidden(){return!0}}al.prototype.children=uf.prototype.children=_d.prototype.children=kk;function A3(t,e){let n=t.dom,{children:r}=t,i=0;for(let s=0;i<r.length;i++){let o=r[i],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==n)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=i;s>0;s--){let o=r[s-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let s=i;s<r.length;s++){let o=r[s];if(o.dom.parentNode==n)return o.domAtPos(0)}return new hs(n,0)}function k3(t,e,n){let r,{children:i}=t;n>0&&e instanceof tu&&i.length&&(r=i[i.length-1])instanceof tu&&r.mark.eq(e.mark)?k3(r,e.children[0],n-1):(i.push(e),e.setParent(t)),t.length+=e.length}function C3(t,e,n){let r=null,i=-1,s=null,o=-1;function a(u,c){for(let f=0,p=0;f<u.children.length&&p<=c;f++){let v=u.children[f],b=p+v.length;b>=c&&(v.children.length?a(v,c-p):(!s||s.isHidden&&n>0)&&(b>c||p==b&&v.getSide()>0)?(s=v,o=c-p):(p<c||p==b&&v.getSide()<0&&!v.isHidden)&&(r=v,i=c-p)),p=b}}a(t,e);let l=(n<0?r:s)||r||s;return l?l.coordsAt(Math.max(0,l==r?i:o),n):YX(t)}function YX(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=Ed(e);return n[n.length-1]||null}function a_(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const LM=Object.create(null);function Ck(t,e,n){if(t==e)return!0;t||(t=LM),e||(e=LM);let r=Object.keys(t),i=Object.keys(e);if(r.length-(n&&r.indexOf(n)>-1?1:0)!=i.length-(n&&i.indexOf(n)>-1?1:0))return!1;for(let s of r)if(s!=n&&(i.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function l_(t,e,n){let r=null;if(e)for(let i in e)n&&i in n||t.removeAttribute(r=i);if(n)for(let i in n)e&&e[i]==n[i]||t.setAttribute(r=i,n[i]);return!!r}function JX(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let r=t.attributes[n];e[r.name]=r.value}return e}class ou{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,r){return null}get isHidden(){return!1}destroy(e){}}var Pr=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(Pr||(Pr={}));class Rt extends $f{constructor(e,n,r,i){super(),this.startSide=e,this.endSide=n,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new Dm(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return n+=r&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new cc(e,n,n,r,e.widget||null,!1)}static replace(e){let n=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:o}=P3(e,n);r=(s?n?-3e8:-1:5e8)-1,i=(o?n?2e8:1:-6e8)+1}return new cc(e,r,i,n,e.widget||null,!0)}static line(e){return new Fm(e)}static set(e,n=!1){return Vn.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Rt.none=Vn.empty;class Dm extends Rt{constructor(e){let{start:n,end:r}=P3(e);super(n?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,r;return this==e||e instanceof Dm&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&Ck(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}Dm.prototype.point=!1;class Fm extends Rt{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Fm&&this.spec.class==e.spec.class&&Ck(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}Fm.prototype.mapMode=Oi.TrackBefore;Fm.prototype.point=!0;class cc extends Rt{constructor(e,n,r,i,s,o){super(n,r,s,e),this.block=i,this.isReplace=o,this.mapMode=i?n<=0?Oi.TrackBefore:Oi.TrackAfter:Oi.TrackDel}get type(){return this.startSide<this.endSide?Pr.WidgetRange:this.startSide<=0?Pr.WidgetBefore:Pr.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof cc&&XX(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}cc.prototype.point=!0;function P3(t,e=!1){let{inclusiveStart:n,inclusiveEnd:r}=t;return n==null&&(n=t.inclusive),r==null&&(r=t.inclusive),{start:n??e,end:r??e}}function XX(t,e){return t==e||!!(t&&e&&t.compare(e))}function u_(t,e,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=t?n[i]=Math.max(n[i],e):n.push(t,e)}class us extends ur{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,r,i,s,o){if(r){if(!(r instanceof us))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),x3(this,e,n,r?r.children:[],s,o),!0}split(e){let n=new us;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:r,off:i}=this.childPos(e);i&&(n.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)n.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Ck(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){k3(this,e,n)}addLineDeco(e){let n=e.spec.attributes,r=e.spec.class;n&&(this.attrs=a_(n,this.attrs||{})),r&&(this.attrs=a_({class:r},this.attrs||{}))}domAtPos(e){return A3(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var r;this.dom?this.flags&4&&(v3(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(l_(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let i=this.dom.lastChild;for(;i&&ur.get(i)instanceof tu;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=ur.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!St.ios||!this.children.some(s=>s instanceof al))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let r of this.children){if(!(r instanceof al)||/[^ -~]/.test(r.text))return null;let i=Ed(r.dom);if(i.length!=1)return null;e+=i[0].width,n=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let r=C3(this,e,n);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=r.bottom-r.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let o=(s-i.textHeight)/2;return{top:r.top+o,bottom:r.bottom-o,left:r.left,right:r.left}}}return r}become(e){return!1}get type(){return Pr.Text}static find(e,n){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],o=i+s.length;if(o>=n){if(s instanceof us)return s;if(o>n)break}i=o+s.breakAfter}return null}}class wf extends ur{constructor(e,n,r){super(),this.widget=e,this.length=n,this.type=r,this.breakAfter=0,this.prevWidget=null}merge(e,n,r,i,s,o){return r&&(!(r instanceof wf)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?hs.before(this.dom):hs.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let r=new wf(this.widget,n,this.type);return r.breakAfter=this.breakAfter,r}get children(){return kk}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Dn.empty}domBoundsAround(){return null}become(e){return e instanceof wf&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.type=e.type,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){return this.widget.coordsAt(this.dom,e,n)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class gg{constructor(e,n,r,i){this.doc=e,this.pos=n,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof wf&&e.type==Pr.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new us),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(E0(new _d(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(e,n,r){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-r)),this.getLine().append(E0(new al(this.text.slice(this.textOff,this.textOff+i)),n),r),this.atCursorPos=!0,this.textOff+=i,e-=i,r=0}}span(e,n,r,i){this.buildText(n-e,r,i),this.pos=n,this.openStart<0&&(this.openStart=i)}point(e,n,r,i,s,o){if(this.disallowBlockEffectsFor[o]&&r instanceof cc){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=n-e;if(r instanceof cc)if(r.block){let{type:l}=r;l==Pr.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new wf(r.widget||new DM("div"),a,l))}else{let l=uf.create(r.widget||new DM("span"),a,a?0:r.startSide),u=this.atCursorPos&&!l.isEditable&&s<=i.length&&(e<n||r.startSide>0),c=!l.isEditable&&(e<n||s>i.length||r.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!u&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),u&&(f.append(E0(new _d(1),i),s),s=i.length+Math.max(0,s-i.length)),f.append(E0(l,i),s),this.atCursorPos=c,this.pendingBuffer=c?e<n||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,r,i,s){let o=new gg(e,n,r,s);return o.openEnd=Vn.spans(i,n,r,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function E0(t,e){for(let n of e)t=new tu(n,[t],t.length);return t}class DM extends ou{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}const O3=vt.define(),T3=vt.define(),M3=vt.define(),N3=vt.define(),c_=vt.define(),I3=vt.define(),$3=vt.define(),R3=vt.define({combine:t=>t.some(e=>e)}),L3=vt.define({combine:t=>t.some(e=>e)});class hb{constructor(e,n="nearest",r="nearest",i=5,s=5){this.range=e,this.y=n,this.x=r,this.yMargin=i,this.xMargin=s}map(e){return e.empty?this:new hb(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const FM=Kt.define({map:(t,e)=>t.map(e)});function mo(t,e,n){let r=t.facet(N3);r.length?r[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}const F1=vt.define({combine:t=>t.length?t[0]:!0});let ZX=0;const Xp=vt.define();class qr{constructor(e,n,r,i){this.id=e,this.create=n,this.domEventHandlers=r,this.extension=i(this)}static define(e,n){const{eventHandlers:r,provide:i,decorations:s}=n||{};return new qr(ZX++,e,r,o=>{let a=[Xp.of(o)];return s&&a.push(Ug.of(l=>{let u=l.plugin(o);return u?s(u):Rt.none})),i&&a.push(i(o)),a})}static fromClass(e,n){return qr.define(r=>new e(r),n)}}class cS{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(r){if(mo(n.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(n){mo(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(r){mo(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const D3=vt.define(),Pk=vt.define(),Ug=vt.define(),Ok=vt.define(),F3=vt.define();function V3(t){let e=0,n=0,r=0,i=0;for(let s of t.state.facet(F3)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(r=Math.max(r,o.top)),o.bottom!=null&&(i=Math.max(i,o.bottom)))}return{left:e,right:n,top:r,bottom:i}}const Zp=vt.define();class Uo{constructor(e,n,r,i){this.fromA=e,this.toA=n,this.fromB=r,this.toB=i}join(e){return new Uo(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,r=this;for(;n>0;n--){let i=e[n-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(n-1,1)}}return e.splice(n,0,r),e}static extendWithRanges(e,n){if(n.length==0)return e;let r=[];for(let i=0,s=0,o=0,a=0;;i++){let l=i==e.length?null:e[i],u=o-a,c=l?l.fromB:1e9;for(;s<n.length&&n[s]<c;){let f=n[s],p=n[s+1],v=Math.max(a,f),b=Math.min(c,p);if(v<=b&&new Uo(v+u,b+u,v,b).addToSet(r),p>c)break;s+=2}if(!l)return r;new Uo(l.fromA,l.toA,l.fromB,l.toB).addToSet(r),o=l.toA,a=l.toB}}}class db{constructor(e,n,r){this.view=e,this.state=n,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=ii.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,o,a,l)=>i.push(new Uo(s,o,a,l))),this.changedRanges=i}static create(e,n,r){return new db(e,n,r)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var Cr=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(Cr||(Cr={}));const f_=Cr.LTR,QX=Cr.RTL;function B3(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const eZ=B3("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),tZ=B3("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),h_=Object.create(null),Da=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);h_[e]=n,h_[n]=-e}function nZ(t){return t<=247?eZ[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?tZ[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8203?256:64336<=t&&t<=65023?4:t==8204?256:1}const rZ=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class nd{constructor(e,n,r){this.from=e,this.to=n,this.level=r}get dir(){return this.level%2?QX:f_}side(e,n){return this.dir==n==e?this.to:this.from}static find(e,n,r,i){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=n&&a.to>=n){if(a.level==r)return o;(s<0||(i!=0?i<0?a.from<n:a.to>n:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}const _r=[];function iZ(t,e){let n=t.length,r=e==f_?1:2,i=e==f_?2:1;if(!t||r==1&&!rZ.test(t))return j3(n);for(let o=0,a=r,l=r;o<n;o++){let u=nZ(t.charCodeAt(o));u==512?u=a:u==8&&l==4&&(u=16),_r[o]=u==4?2:u,u&7&&(l=u),a=u}for(let o=0,a=r,l=r;o<n;o++){let u=_r[o];if(u==128)o<n-1&&a==_r[o+1]&&a&24?u=_r[o]=a:_r[o]=256;else if(u==64){let c=o+1;for(;c<n&&_r[c]==64;)c++;let f=o&&a==8||c<n&&_r[c]==8?l==1?1:8:256;for(let p=o;p<c;p++)_r[p]=f;o=c-1}else u==8&&l==1&&(_r[o]=1);a=u,u&7&&(l=u)}for(let o=0,a=0,l=0,u,c,f;o<n;o++)if(c=h_[u=t.charCodeAt(o)])if(c<0){for(let p=a-3;p>=0;p-=3)if(Da[p+1]==-c){let v=Da[p+2],b=v&2?r:v&4?v&1?i:r:0;b&&(_r[o]=_r[Da[p]]=b),a=p;break}}else{if(Da.length==189)break;Da[a++]=o,Da[a++]=u,Da[a++]=l}else if((f=_r[o])==2||f==1){let p=f==r;l=p?0:1;for(let v=a-3;v>=0;v-=3){let b=Da[v+2];if(b&2)break;if(p)Da[v+2]|=2;else{if(b&4)break;Da[v+2]|=4}}}for(let o=0;o<n;o++)if(_r[o]==256){let a=o+1;for(;a<n&&_r[a]==256;)a++;let l=(o?_r[o-1]:r)==1,u=(a<n?_r[a]:r)==1,c=l==u?l?1:2:r;for(let f=o;f<a;f++)_r[f]=c;o=a-1}let s=[];if(r==1)for(let o=0;o<n;){let a=o,l=_r[o++]!=1;for(;o<n&&l==(_r[o]!=1);)o++;if(l)for(let u=o;u>a;){let c=u,f=_r[--u]!=2;for(;u>a&&f==(_r[u-1]!=2);)u--;s.push(new nd(u,c,f?2:1))}else s.push(new nd(a,o,0))}else for(let o=0;o<n;){let a=o,l=_r[o++]==2;for(;o<n&&l==(_r[o]==2);)o++;s.push(new nd(a,o,l?1:2))}return s}function j3(t){return[new nd(0,t,0)]}let z3="";function sZ(t,e,n,r,i){var s;let o=r.head-t.from,a=-1;if(o==0){if(!i||!t.length)return null;e[0].level!=n&&(o=e[0].side(!1,n),a=0)}else if(o==t.length){if(i)return null;let p=e[e.length-1];p.level!=n&&(o=p.side(!0,n),a=e.length-1)}a<0&&(a=nd.find(e,o,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc));let l=e[a];o==l.side(i,n)&&(l=e[a+=i?1:-1],o=l.side(!i,n));let u=i==(l.dir==n),c=Wi(t.text,o,u);if(z3=t.text.slice(Math.min(o,c),Math.max(o,c)),c!=l.side(i,n))return Ke.cursor(c+t.from,u?-1:1,l.level);let f=a==(i?e.length-1:0)?null:e[a+(i?1:-1)];return!f&&l.level!=n?Ke.cursor(i?t.to:t.from,i?-1:1,n):f&&f.level<l.level?Ke.cursor(f.side(!i,n)+t.from,i?1:-1,f.level):Ke.cursor(c+t.from,i?-1:1,l.level)}class VM extends ur{constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[],this.hasComposition=null,this.markedForComposition=new Set,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new us],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Uo(0,0,0,e.state.doc.length)],0,null)}get length(){return this.view.state.doc.length}update(e){let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:a,toA:l})=>l<this.minWidthFrom||a>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let r=this.view.inputState.composing<0?null:aZ(this.view,e.changes);if(this.hasComposition){this.markedForComposition.clear();let{from:a,to:l}=this.hasComposition;n=new Uo(a,l,e.changes.mapPos(a,-1),e.changes.mapPos(l,1)).addToSet(n.slice())}this.hasComposition=r?{from:r.range.fromB,to:r.range.toB}:null,(St.ie||St.chrome)&&!r&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let i=this.decorations,s=this.updateDeco(),o=cZ(i,s,e.changes);return n=Uo.extendWithRanges(n,o),!(this.flags&7)&&n.length==0?!1:(this.updateInner(n,e.startState.doc.length,r),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=St.chrome||St.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||i.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof wf&&o.widget instanceof BM&&s.push(o.dom);i.updateGaps(s)}updateChildren(e,n,r){let i=r?r.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let o=i.length-1;;o--){let a=o>=0?i[o]:null;if(!a)break;let{fromA:l,toA:u,fromB:c,toB:f}=a,p,v,b,E;if(r&&r.range.fromB<f&&r.range.toB>c){let N=gg.build(this.view.state.doc,c,r.range.fromB,this.decorations,this.dynamicDecorationMap),x=gg.build(this.view.state.doc,r.range.toB,f,this.decorations,this.dynamicDecorationMap);v=N.breakAtStart,b=N.openStart,E=x.openEnd;let g=this.compositionView(r);x.breakAtStart?g.breakAfter=1:x.content.length&&g.merge(g.length,g.length,x.content[0],!1,x.openStart,0)&&(g.breakAfter=x.content[0].breakAfter,x.content.shift()),N.content.length&&g.merge(0,0,N.content[N.content.length-1],!0,0,N.openEnd)&&N.content.pop(),p=N.content.concat(g).concat(x.content)}else({content:p,breakAtStart:v,openStart:b,openEnd:E}=gg.build(this.view.state.doc,c,f,this.decorations,this.dynamicDecorationMap));let{i:P,off:S}=s.findPos(u,1),{i:A,off:I}=s.findPos(l,-1);w3(this,A,I,P,S,p,v,b,E)}r&&this.fixCompositionDOM(r)}compositionView(e){let n=new al(e.text.nodeValue);n.flags|=8;for(let{deco:i}of e.marks)n=new tu(i,[n],n.length);let r=new us;return r.append(n,0),r}fixCompositionDOM(e){let n=(s,o)=>{o.flags|=8,this.markedForComposition.add(o);let a=ur.get(s);a!=o&&(a&&(a.dom=null),o.setDOM(s))},r=this.childPos(e.range.fromB,1),i=this.children[r.i];n(e.line,i);for(let s=e.marks.length-1;s>=-1;s--)r=i.childPos(r.off,1),i=i.children[r.i],n(s>=0?e.marks[s].node:e.text,i)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,s=!i&&Py(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||n||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.domAtPos(a.anchor),u=a.empty?l:this.domAtPos(a.head);if(St.gecko&&a.empty&&!this.hasComposition&&oZ(l)){let f=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(f,l.node.childNodes[l.offset]||null)),l=u=new hs(f,0),o=!0}let c=this.view.observer.selectionRange;(o||!c.focusNode||!cb(l.node,l.offset,c.anchorNode,c.anchorOffset)||!cb(u.node,u.offset,c.focusNode,c.focusOffset))&&(this.view.observer.ignore(()=>{St.android&&St.chrome&&this.dom.contains(c.focusNode)&&fZ(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let f=ub(this.view.root);if(f)if(a.empty){if(St.gecko){let p=lZ(l.node,l.offset);if(p&&p!=3){let v=U3(l.node,l.offset,p==1?1:-1);v&&(l=new hs(v,p==1?0:v.nodeValue.length))}}f.collapse(l.node,l.offset),a.bidiLevel!=null&&c.cursorBidiLevel!=null&&(c.cursorBidiLevel=a.bidiLevel)}else if(f.extend){f.collapse(l.node,l.offset);try{f.extend(u.node,u.offset)}catch{}}else{let p=document.createRange();a.anchor>a.head&&([l,u]=[u,l]),p.setEnd(u.node,u.offset),p.setStart(l.node,l.offset),f.removeAllRanges(),f.addRange(p)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(l,u)),this.impreciseAnchor=l.precise?null:new hs(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new hs(c.focusNode,c.focusOffset)}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,r=ub(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!n.empty||!n.assoc||!r.modify)return;let o=us.find(this,n.head);if(!o)return;let a=o.posAtStart;if(n.head==a||n.head==a+o.length)return;let l=this.coordsAt(n.head,-1),u=this.coordsAt(n.head,1);if(!l||!u||l.bottom>u.top)return;let c=this.domAtPos(n.head+n.assoc);r.collapse(c.node,c.offset),r.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let f=e.observer.selectionRange;e.docView.posFromDOM(f.anchorNode,f.anchorOffset)!=n.from&&r.collapse(i,s)}nearest(e){for(let n=e;n;){let r=ur.get(n);if(r&&r.rootView==this)return r;n=n.parentNode}return null}posFromDOM(e,n){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,n)+r.posAtStart}domAtPos(e){let{i:n,off:r}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let i=this.children[n];if(r<i.length||i instanceof us)break;n++,r=0}return this.children[n].domAtPos(r)}coordsAt(e,n){for(let r=this.length,i=this.children.length-1;;i--){let s=this.children[i],o=r-s.breakAfter-s.length;if(e>o||e==o&&s.type!=Pr.WidgetBefore&&s.type!=Pr.WidgetAfter&&(!i||n==2||this.children[i-1].breakAfter||this.children[i-1].type==Pr.WidgetBefore&&n>-2))return s.coordsAt(e-o,n);r=o}}coordsForChar(e){let{i:n,off:r}=this.childPos(e,1),i=this.children[n];if(!(i instanceof us))return null;for(;i.children.length;){let{i:a,off:l}=i.childPos(r,1);for(;;a++){if(a==i.children.length)return null;if((i=i.children[a]).length)break}r=l}if(!(i instanceof al))return null;let s=Wi(i.text,r);if(s==r)return null;let o=Rf(i.dom,r,s).getClientRects();return!o.length||o[0].top>=o[0].bottom?null:o[0]}measureVisibleLineHeights(e){let n=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==Cr.LTR;for(let u=0,c=0;c<this.children.length;c++){let f=this.children[c],p=u+f.length;if(p>i)break;if(u>=r){let v=f.dom.getBoundingClientRect();if(n.push(v.height),o){let b=f.dom.lastChild,E=b?Ed(b):[];if(E.length){let P=E[E.length-1],S=l?P.right-v.left:v.right-P.left;S>a&&(a=S,this.minWidth=s,this.minWidthFrom=u,this.minWidthTo=p)}}}u=p+f.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?Cr.RTL:Cr.LTR}measureTextSize(){for(let s of this.children)if(s instanceof us){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),n,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Ed(e.firstChild)[0];n=e.getBoundingClientRect().height,r=s?s.width/27:7,i=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:r,textHeight:i}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new b3(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let r=0,i=0;;i++){let s=i==n.viewports.length?null:n.viewports[i],o=s?s.from-1:this.length;if(o>r){let a=n.lineBlockAt(o).bottom-n.lineBlockAt(r).top;e.push(Rt.replace({widget:new BM(a),block:!0,inclusive:!0,isBlockGap:!0}).range(r,o))}if(!s)break;r=s.to+1}return Rt.set(e)}updateDeco(){let e=this.view.state.facet(Ug).map((n,r)=>(this.dynamicDecorationMap[r]=typeof n=="function")?n(this.view):n);for(let n=e.length;n<e.length+3;n++)this.dynamicDecorationMap[n]=!1;return this.decorations=[...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),i;if(!r)return;!n.empty&&(i=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=V3(this.view),o={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom};zX(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==Cr.LTR)}}function oZ(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}class BM extends ou{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function H3(t){let e=t.observer.selectionRange,n=e.focusNode&&U3(e.focusNode,e.focusOffset,0);if(!n)return null;let r=ur.get(n),i,s;if(r instanceof al)i=r.posAtStart,s=i+r.length;else e:for(let o=0,a=n;;){for(let u=a.previousSibling,c;u;u=u.previousSibling){if(c=ur.get(u)){i=s=c.posAtEnd+o;break e}let f=new S3([],t.state);if(f.readNode(u),f.text.indexOf(Bh)>-1)return null;o+=f.text.length}if(a=a.parentNode,!a)return null;let l=ur.get(a);if(l){i=s=l.posAtStart+o;break}}return{from:i,to:s,node:n}}function aZ(t,e){let n=H3(t);if(!n)return null;let{from:r,to:i,node:s}=n,o=e.mapPos(r,-1),a=e.mapPos(i,1),l=s.nodeValue;if(/[\n\r]/.test(l))return null;if(a-o!=l.length){let p=e.mapPos(r,1),v=e.mapPos(i,-1);if(v-p==l.length)o=p,a=v;else if(t.state.doc.sliceString(a-l.length,a)==l)o=a-l.length;else if(t.state.doc.sliceString(o,o+l.length)==l)a=o+l.length;else return null}let{main:u}=t.state.selection;if(t.state.doc.sliceString(o,a)!=l||o>u.head||a<u.head)return null;let c=[],f=new Uo(r,i,o,a);for(let p=s.parentNode;;p=p.parentNode){let v=ur.get(p);if(v instanceof tu)c.push({node:p,deco:v.mark});else{if(v instanceof us||p.nodeName=="DIV"&&p.parentNode==t.contentDOM)return{range:f,text:s,marks:c,line:p};if(p!=t.contentDOM)c.push({node:p,deco:new Dm({inclusive:!0,attributes:JX(p),tagName:p.tagName.toLowerCase()})});else return null}}}function U3(t,e,n){if(n<=0)for(let r=t,i=e;;){if(r.nodeType==3)return r;if(r.nodeType==1&&i>0)r=r.childNodes[i-1],i=uc(r);else break}if(n>=0)for(let r=t,i=e;;){if(r.nodeType==3)return r;if(r.nodeType==1&&i<r.childNodes.length&&n>=0)r=r.childNodes[i],i=0;else break}return null}function lZ(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}class uZ{constructor(){this.changes=[]}compareRange(e,n){u_(e,n,this.changes)}comparePoint(e,n){u_(e,n,this.changes)}}function cZ(t,e,n){let r=new uZ;return Vn.compare(t,e,n,r),r.changes}function fZ(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function hZ(t,e,n=1){let r=t.charCategorizer(e),i=t.doc.lineAt(e),s=e-i.from;if(i.length==0)return Ke.cursor(e);s==0?n=1:s==i.length&&(n=-1);let o=s,a=s;n<0?o=Wi(i.text,s,!1):a=Wi(i.text,s);let l=r(i.text.slice(o,a));for(;o>0;){let u=Wi(i.text,o,!1);if(r(i.text.slice(u,o))!=l)break;o=u}for(;a<i.length;){let u=Wi(i.text,a);if(r(i.text.slice(a,u))!=l)break;a=u}return Ke.range(o+i.from,a+i.from)}function dZ(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function pZ(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function fS(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function jM(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function zM(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function d_(t,e,n){let r,i,s,o,a=!1,l,u,c,f;for(let b=t.firstChild;b;b=b.nextSibling){let E=Ed(b);for(let P=0;P<E.length;P++){let S=E[P];i&&fS(i,S)&&(S=jM(zM(S,i.bottom),i.top));let A=dZ(e,S),I=pZ(n,S);if(A==0&&I==0)return b.nodeType==3?HM(b,e,n):d_(b,e,n);if(!r||o>I||o==I&&s>A){r=b,i=S,s=A,o=I;let N=I?n<S.top?-1:1:A?e<S.left?-1:1:0;a=!N||(N>0?P<E.length-1:P>0)}A==0?n>S.bottom&&(!c||c.bottom<S.bottom)?(l=b,c=S):n<S.top&&(!f||f.top>S.top)&&(u=b,f=S):c&&fS(c,S)?c=zM(c,S.bottom):f&&fS(f,S)&&(f=jM(f,S.top))}}if(c&&c.bottom>=n?(r=l,i=c):f&&f.top<=n&&(r=u,i=f),!r)return{node:t,offset:0};let p=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return HM(r,p,n);if(a&&r.contentEditable!="false")return d_(r,p,n);let v=Array.prototype.indexOf.call(t.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:t,offset:v}}function HM(t,e,n){let r=t.nodeValue.length,i=-1,s=1e9,o=0;for(let a=0;a<r;a++){let l=Rf(t,a,a+1).getClientRects();for(let u=0;u<l.length;u++){let c=l[u];if(c.top==c.bottom)continue;o||(o=e-c.left);let f=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&f<s){let p=e>=(c.left+c.right)/2,v=p;if((St.chrome||St.gecko)&&Rf(t,a).getBoundingClientRect().left==c.right&&(v=!p),f<=0)return{node:t,offset:a+(v?1:0)};i=a+(v?1:0),s=f}}}return{node:t,offset:i>-1?i:o>0?t.nodeValue.length:0}}function q3(t,e,n,r=-1){var i,s;let o=t.contentDOM.getBoundingClientRect(),a=o.top+t.viewState.paddingTop,l,{docHeight:u}=t.viewState,{x:c,y:f}=e,p=f-a;if(p<0)return 0;if(p>u)return t.state.doc.length;for(let N=t.viewState.heightOracle.textHeight/2,x=!1;l=t.elementAtHeight(p),l.type!=Pr.Text;)for(;p=r>0?l.bottom+N:l.top-N,!(p>=0&&p<=u);){if(x)return n?null:0;x=!0,r=-r}f=a+p;let v=l.from;if(v<t.viewport.from)return t.viewport.from==0?0:n?null:UM(t,o,l,c,f);if(v>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:UM(t,o,l,c,f);let b=t.dom.ownerDocument,E=t.root.elementFromPoint?t.root:b,P=E.elementFromPoint(c,f);P&&!t.contentDOM.contains(P)&&(P=null),P||(c=Math.max(o.left+1,Math.min(o.right-1,c)),P=E.elementFromPoint(c,f),P&&!t.contentDOM.contains(P)&&(P=null));let S,A=-1;if(P&&((i=t.docView.nearest(P))===null||i===void 0?void 0:i.isEditable)!=!1){if(b.caretPositionFromPoint){let N=b.caretPositionFromPoint(c,f);N&&({offsetNode:S,offset:A}=N)}else if(b.caretRangeFromPoint){let N=b.caretRangeFromPoint(c,f);N&&({startContainer:S,startOffset:A}=N,(!t.contentDOM.contains(S)||St.safari&&gZ(S,A,c)||St.chrome&&mZ(S,A,c))&&(S=void 0))}}if(!S||!t.docView.dom.contains(S)){let N=us.find(t.docView,v);if(!N)return p>l.top+l.height/2?l.to:l.from;({node:S,offset:A}=d_(N.dom,c,f))}let I=t.docView.nearest(S);if(!I)return null;if(I.isWidget&&((s=I.dom)===null||s===void 0?void 0:s.nodeType)==1){let N=I.dom.getBoundingClientRect();return e.y<N.top||e.y<=N.bottom&&e.x<=(N.left+N.right)/2?I.posAtStart:I.posAtEnd}else return I.localPosFromDOM(S,A)+I.posAtStart}function UM(t,e,n,r,i){let s=Math.round((r-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,l=Math.floor((i-n.top-(t.defaultLineHeight-a)*.5)/a);s+=l*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+e_(o,s,t.state.tabSize)}function gZ(t,e,n){let r;if(t.nodeType!=3||e!=(r=t.nodeValue.length))return!1;for(let i=t.nextSibling;i;i=i.nextSibling)if(i.nodeType!=1||i.nodeName!="BR")return!1;return Rf(t,r-1,r).getBoundingClientRect().left>n}function mZ(t,e,n){if(e!=0)return!1;for(let i=t;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let r=t.nodeType==1?t.getBoundingClientRect():Rf(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}function p_(t,e){let n=t.lineBlockAt(e);if(Array.isArray(n.type)){for(let r of n.type)if(r.to>e||r.to==e&&(r.to==n.to||r.type==Pr.Text))return r}return n}function vZ(t,e,n,r){let i=p_(t,e.head),s=!r||i.type!=Pr.Text||!(t.lineWrapping||i.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(i.from),l=t.posAtCoords({x:n==(a==Cr.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return Ke.cursor(l,n?-1:1)}return Ke.cursor(n?i.to:i.from,n?-1:1)}function qM(t,e,n,r){let i=t.state.doc.lineAt(e.head),s=t.bidiSpans(i),o=t.textDirectionAt(i.from);for(let a=e,l=null;;){let u=sZ(i,s,o,a,n),c=z3;if(!u){if(i.number==(n?t.state.doc.lines:1))return a;c=`
`,i=t.state.doc.line(i.number+(n?1:-1)),s=t.bidiSpans(i),u=Ke.cursor(n?i.from:i.to)}if(l){if(!l(c))return a}else{if(!r)return u;l=r(c)}a=u}}function yZ(t,e,n){let r=t.state.charCategorizer(e),i=r(n);return s=>{let o=r(s);return i==xr.Space&&(i=o),i==o}}function bZ(t,e,n,r){let i=e.head,s=n?1:-1;if(i==(n?t.state.doc.length:0))return Ke.cursor(i,e.assoc);let o=e.goalColumn,a,l=t.contentDOM.getBoundingClientRect(),u=t.coordsAtPos(i),c=t.documentTop;if(u)o==null&&(o=u.left-l.left),a=s<0?u.top:u.bottom;else{let v=t.viewState.lineBlockAt(i);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(i-v.from))),a=(s<0?v.top:v.bottom)+c}let f=l.left+o,p=r??t.viewState.heightOracle.textHeight>>1;for(let v=0;;v+=10){let b=a+(p+v)*s,E=q3(t,{x:f,y:b},!1,s);if(b<l.top||b>l.bottom||(s<0?E<i:E>i))return Ke.cursor(E,e.assoc,void 0,o)}}function Oy(t,e,n){for(;;){let r=0;for(let i of t)i.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=r||n||(e-s<o-e?-1:1);e=l<0?s:o,r=l}});if(!r)return e}}function hS(t,e,n){let r=Oy(t.state.facet(Ok).map(i=>i(t)),n.from,e.head>n.from?-1:1);return r==n.from?n:Ke.cursor(r,r<n.from?1:-1)}class wZ{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null;let n=(r,i)=>{this.ignoreDuringComposition(i)||i.type=="keydown"&&this.keydown(e,i)||(this.mustFlushObserver(i)&&e.observer.forceFlush(),this.runCustomHandlers(i.type,e,i)?i.preventDefault():r(e,i))};for(let r in Yr){let i=Yr[r];e.contentDOM.addEventListener(r,s=>{WM(e,s)&&n(i,s)},g_[r]),this.registeredEvents.push(r)}e.scrollDOM.addEventListener("mousedown",r=>{if(r.target==e.scrollDOM&&r.clientY>e.contentDOM.getBoundingClientRect().bottom&&(n(Yr.mousedown,r),!r.defaultPrevented&&r.button==2)){let i=e.contentDOM.style.minHeight;e.contentDOM.style.minHeight="100%",setTimeout(()=>e.contentDOM.style.minHeight=i,200)}}),e.scrollDOM.addEventListener("drop",r=>{r.target==e.scrollDOM&&r.clientY>e.contentDOM.getBoundingClientRect().bottom&&n(Yr.drop,r)}),St.chrome&&St.chrome_version==102&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,St.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,n){var r;let i;this.customHandlers=[];for(let s of n)if(i=(r=s.update(e).spec)===null||r===void 0?void 0:r.domEventHandlers){this.customHandlers.push({plugin:s.value,handlers:i});for(let o in i)this.registeredEvents.indexOf(o)<0&&o!="scroll"&&(this.registeredEvents.push(o),e.contentDOM.addEventListener(o,a=>{WM(e,a)&&this.runCustomHandlers(o,e,a)&&a.preventDefault()}))}}runCustomHandlers(e,n,r){for(let i of this.customHandlers){let s=i.handlers[e];if(s)try{if(s.call(i.plugin,r,n)||r.defaultPrevented)return!0}catch(o){mo(n.state,o)}}return!1}runScrollHandlers(e,n){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let r of this.customHandlers){let i=r.handlers.scroll;if(i)try{i.call(r.plugin,n,e)}catch(s){mo(e.state,s)}}}keydown(e,n){if(this.lastKeyCode=n.keyCode,this.lastKeyTime=Date.now(),n.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(n.keyCode!=27&&G3.indexOf(n.keyCode)<0&&(e.inputState.lastEscPress=0),St.android&&St.chrome&&!n.synthetic&&(n.keyCode==13||n.keyCode==8))return e.observer.delayAndroidKey(n.key,n.keyCode),!0;let r;return St.ios&&!n.synthetic&&!n.altKey&&!n.metaKey&&((r=W3.find(i=>i.keyCode==n.keyCode))&&!n.ctrlKey||xZ.indexOf(n.key)>-1&&n.ctrlKey&&!n.shiftKey)?(this.pendingIOSKey=r||n,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let n=this.pendingIOSKey;return n?(this.pendingIOSKey=void 0,td(e.contentDOM,n.key,n.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:St.safari&&!St.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const W3=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],xZ="dthko",G3=[16,17,18,20,91,92,224,225],_0=6;function A0(t){return Math.max(0,t)*.7+8}function SZ(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class EZ{constructor(e,n,r,i){this.view=e,this.startEvent=n,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParent=HX(e.contentDOM),this.atoms=e.state.facet(Ok).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(un.allowMultipleSelections)&&_Z(e,n),this.dragging=kZ(e,n)&&X3(n)==1?null:!1}start(e){this.dragging===!1&&(e.preventDefault(),this.select(e))}move(e){var n;if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&SZ(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let r=0,i=0,s=((n=this.scrollParent)===null||n===void 0?void 0:n.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},o=V3(this.view);e.clientX-o.left<=s.left+_0?r=-A0(s.left-e.clientX):e.clientX+o.right>=s.right-_0&&(r=A0(e.clientX-s.right)),e.clientY-o.top<=s.top+_0?i=-A0(s.top-e.clientY):e.clientY+o.bottom>=s.bottom-_0&&(i=A0(e.clientY-s.bottom)),this.setScrollSpeed(r,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],s=null;if(i.empty){let o=Oy(this.atoms,i.from,0);o!=i.from&&(s=Ke.cursor(o,-1))}else{let o=Oy(this.atoms,i.from,-1),a=Oy(this.atoms,i.to,1);(o!=i.from||a!=i.to)&&(s=Ke.range(i.from==i.anchor?o:a,i.from==i.head?o:a))}s&&(n||(n=e.ranges.slice()),n[r]=s)}return n?Ke.create(n,e.mainIndex):e}select(e){let{view:n}=this,r=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(n.state.selection)||r.main.assoc!=n.state.selection.main.assoc&&this.dragging===!1)&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function _Z(t,e){let n=t.state.facet(O3);return n.length?n[0](e):St.mac?e.metaKey:e.ctrlKey}function AZ(t,e){let n=t.state.facet(T3);return n.length?n[0](e):St.mac?!e.altKey:!e.ctrlKey}function kZ(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let r=ub(t.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let o=i[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function WM(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,r;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=ur.get(n))&&r.ignoreEvent(e))return!1;return!0}const Yr=Object.create(null),g_=Object.create(null),K3=St.ie&&St.ie_version<15||St.ios&&St.webkit_version<604;function CZ(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),Y3(t,n.value)},50)}function Y3(t,e){let{state:n}=t,r,i=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if(m_!=null&&n.selection.ranges.every(l=>l.empty)&&m_==s.toString()){let l=-1;r=n.changeByRange(u=>{let c=n.doc.lineAt(u.from);if(c.from==l)return{range:u};l=c.from;let f=n.toText((o?s.line(i++).text:e)+n.lineBreak);return{changes:{from:c.from,insert:f},range:Ke.cursor(u.from+f.length)}})}else o?r=n.changeByRange(l=>{let u=s.line(i++);return{changes:{from:l.from,to:l.to,insert:u.text},range:Ke.cursor(l.from+u.length)}}):r=n.replaceSelection(s);t.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}Yr.keydown=(t,e)=>{t.inputState.setSelectionOrigin("select"),e.keyCode==27&&(t.inputState.lastEscPress=Date.now())};Yr.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Yr.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};g_.touchstart=g_.touchmove={passive:!0};Yr.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return;let n=null;for(let r of t.state.facet(M3))if(n=r(t,e),n)break;if(!n&&e.button==0&&(n=TZ(t,e)),n){let r=!t.hasFocus;t.inputState.startMouseSelection(new EZ(t,e,n,r)),r&&t.observer.ignore(()=>m3(t.contentDOM)),t.inputState.mouseSelection&&t.inputState.mouseSelection.start(e)}};function GM(t,e,n,r){if(r==1)return Ke.cursor(e,n);if(r==2)return hZ(t.state,e,n);{let i=us.find(t.docView,e),s=t.state.doc.lineAt(i?i.posAtEnd:e),o=i?i.posAtStart:s.from,a=i?i.posAtEnd:s.to;return a<t.state.doc.length&&a==s.to&&a++,Ke.range(o,a)}}let J3=(t,e)=>t>=e.top&&t<=e.bottom,KM=(t,e,n)=>J3(e,n)&&t>=n.left&&t<=n.right;function PZ(t,e,n,r){let i=us.find(t.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let o=i.coordsAt(s,-1);if(o&&KM(n,r,o))return-1;let a=i.coordsAt(s,1);return a&&KM(n,r,a)?1:o&&J3(r,o)?-1:1}function YM(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:PZ(t,n,e.clientX,e.clientY)}}const OZ=St.ie&&St.ie_version<=11;let JM=null,XM=0,ZM=0;function X3(t){if(!OZ)return t.detail;let e=JM,n=ZM;return JM=t,ZM=Date.now(),XM=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(XM+1)%3:1}function TZ(t,e){let n=YM(t,e),r=X3(e),i=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),i=i.map(s.changes))},get(s,o,a){let l=YM(t,s),u,c=GM(t,l.pos,l.bias,r);if(n.pos!=l.pos&&!o){let f=GM(t,n.pos,n.bias,r),p=Math.min(f.from,c.from),v=Math.max(f.to,c.to);c=p<c.from?Ke.range(p,v):Ke.range(v,p)}return o?i.replaceRange(i.main.extend(c.from,c.to)):a&&r==1&&i.ranges.length>1&&(u=MZ(i,l.pos))?u:a?i.addRange(c):Ke.create([c])}}}function MZ(t,e){for(let n=0;n<t.ranges.length;n++){let{from:r,to:i}=t.ranges[n];if(r<=e&&i>=e)return Ke.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}Yr.dragstart=(t,e)=>{let{selection:{main:n}}=t.state,{mouseSelection:r}=t.inputState;r&&(r.dragging=n),e.dataTransfer&&(e.dataTransfer.setData("Text",t.state.sliceDoc(n.from,n.to)),e.dataTransfer.effectAllowed="copyMove")};function QM(t,e,n,r){if(!n)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:s}=t.inputState,o=r&&s&&s.dragging&&AZ(t,e)?{from:s.dragging.from,to:s.dragging.to}:null,a={from:i,insert:n},l=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"})}Yr.drop=(t,e)=>{if(!e.dataTransfer)return;if(t.state.readOnly)return e.preventDefault();let n=e.dataTransfer.files;if(n&&n.length){e.preventDefault();let r=Array(n.length),i=0,s=()=>{++i==n.length&&QM(t,e,r.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(r[o]=a.result),s()},a.readAsText(n[o])}}else QM(t,e,e.dataTransfer.getData("Text"),!0)};Yr.paste=(t,e)=>{if(t.state.readOnly)return e.preventDefault();t.observer.flush();let n=K3?null:e.clipboardData;n?(Y3(t,n.getData("text/plain")||n.getData("text/uri-text")),e.preventDefault()):CZ(t)};function NZ(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),t.focus()},50)}function IZ(t){let e=[],n=[],r=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let i=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>i&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),i=o.number}r=!0}return{text:e.join(t.lineBreak),ranges:n,linewise:r}}let m_=null;Yr.copy=Yr.cut=(t,e)=>{let{text:n,ranges:r,linewise:i}=IZ(t.state);if(!n&&!i)return;m_=i?n:null;let s=K3?null:e.clipboardData;s?(e.preventDefault(),s.clearData(),s.setData("text/plain",n)):NZ(t,n),e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})};const Z3=su.define();function Q3(t,e){let n=[];for(let r of t.facet($3)){let i=r(t,e);i&&n.push(i)}return n?t.update({effects:n,annotations:Z3.of(!0)}):null}function e4(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=Q3(t.state,e);n?t.dispatch(n):t.update([])}},10)}Yr.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),e4(t)};Yr.blur=t=>{t.observer.clearSelectionRange(),e4(t)};Yr.compositionstart=Yr.compositionupdate=t=>{t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0)};Yr.compositionend=t=>{t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,St.chrome&&St.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50)};Yr.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};Yr.beforeinput=(t,e)=>{var n;let r;if(St.chrome&&St.android&&(r=W3.find(i=>i.inputType==e.inputType))&&(t.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let i=((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>i+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}};const eN=["pre-wrap","normal","pre-line","break-spaces"];class $Z{constructor(e){this.lineWrapping=e,this.doc=Dn.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((n-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return eN.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(n=!0,this.heightSamples[Math.floor(i*10)]=!0)}return n}refresh(e,n,r,i,s,o){let a=eN.indexOf(e)>-1,l=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=n,this.charWidth=r,this.textHeight=i,this.lineLength=s,l){this.heightSamples={};for(let u=0;u<o.length;u++){let c=o[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return l}}class RZ{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class Ya{constructor(e,n,r,i,s){this.from=e,this.length=n,this.top=r,this.height=i,this._content=s}get type(){return typeof this._content=="number"?Pr.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof cc?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Ya(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var dr=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(dr||(dr={}));const Ty=.001;class gs{constructor(e,n,r=2){this.length=e,this.height=n,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,n){this.height!=n&&(Math.abs(this.height-n)>Ty&&(e.heightChanged=!0),this.height=n)}replace(e,n,r){return gs.of(r)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,r,i){let s=this,o=r.doc;for(let a=i.length-1;a>=0;a--){let{fromA:l,toA:u,fromB:c,toB:f}=i[a],p=s.lineAt(l,dr.ByPosNoHeight,r.setDoc(n),0,0),v=p.to>=u?p:s.lineAt(u,dr.ByPosNoHeight,r,0,0);for(f+=v.to-u,u=v.to;a>0&&p.from<=i[a-1].toA;)l=i[a-1].fromA,c=i[a-1].fromB,a--,l<p.from&&(p=s.lineAt(l,dr.ByPosNoHeight,r,0,0));c+=p.from-l,l=p.from;let b=Tk.build(r.setDoc(o),e,c,f);s=s.replace(l,u,b)}return s.updateHeight(r,0)}static empty(){return new oo(0,0)}static of(e){if(e.length==1)return e[0];let n=0,r=e.length,i=0,s=0;for(;;)if(n==r)if(i>s*2){let a=e[n-1];a.break?e.splice(--n,1,a.left,null,a.right):e.splice(--n,1,a.left,a.right),r+=1+a.break,i-=a.size}else if(s>i*2){let a=e[r];a.break?e.splice(r,1,a.left,null,a.right):e.splice(r,1,a.left,a.right),r+=2+a.break,s-=a.size}else break;else if(i<s){let a=e[n++];a&&(i+=a.size)}else{let a=e[--r];a&&(s+=a.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,r++),new LZ(gs.of(e.slice(0,n)),o,gs.of(e.slice(r)))}}gs.prototype.size=1;class t4 extends gs{constructor(e,n,r){super(e,n),this.deco=r}blockAt(e,n,r,i){return new Ya(i,this.length,r,this.height,this.deco||0)}lineAt(e,n,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,n,r,i,s,o){e<=s+this.length&&n>=s&&o(this.blockAt(0,r,i,s))}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more&&this.setHeight(e,i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class oo extends t4{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,r,i){return new Ya(i,this.length,r,this.height,this.breaks)}replace(e,n,r){let i=r[0];return r.length==1&&(i instanceof oo||i instanceof _i&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof _i?i=new oo(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):gs.of(r)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more?this.setHeight(e,i.heights[i.index++]):(r||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class _i extends gs{constructor(e){super(e,0)}heightMetrics(e,n){let r=e.doc.lineAt(n).number,i=e.doc.lineAt(n+this.length).number,s=i-r+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:r,lastLine:i,perLine:o,perChar:a}}blockAt(e,n,r,i){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(n,i);if(n.lineWrapping){let u=i+Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length),c=n.doc.lineAt(u),f=a+c.length*l,p=Math.max(r,e-f/2);return new Ya(c.from,c.length,p,f,0)}else{let u=Math.max(0,Math.min(o-s,Math.floor((e-r)/a))),{from:c,length:f}=n.doc.line(s+u);return new Ya(c,f,r+a*u,a,0)}}lineAt(e,n,r,i,s){if(n==dr.ByHeight)return this.blockAt(e,r,i,s);if(n==dr.ByPosNoHeight){let{from:v,to:b}=r.doc.lineAt(e);return new Ya(v,b-v,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(r,s),u=r.doc.lineAt(e),c=a+u.length*l,f=u.number-o,p=i+a*f+l*(u.from-s-f);return new Ya(u.from,u.length,Math.max(i,Math.min(p,i+this.height-c)),c,0)}forEachLine(e,n,r,i,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:a,perLine:l,perChar:u}=this.heightMetrics(r,s);for(let c=e,f=i;c<=n;){let p=r.doc.lineAt(c);if(c==e){let b=p.number-a;f+=l*b+u*(e-s-b)}let v=l+u*p.length;o(new Ya(p.from,p.length,f,v,0)),f+=v,c=p.to+1}}replace(e,n,r){let i=this.length-n;if(i>0){let s=r[r.length-1];s instanceof _i?r[r.length-1]=new _i(s.length+i):r.push(null,new _i(i-1))}if(e>0){let s=r[0];s instanceof _i?r[0]=new _i(e+s.length):r.unshift(new _i(e-1),null)}return gs.of(r)}decomposeLeft(e,n){n.push(new _i(e-1),null)}decomposeRight(e,n){n.push(null,new _i(this.length-e-1))}updateHeight(e,n=0,r=!1,i){let s=n+this.length;if(i&&i.from<=n+this.length&&i.more){let o=[],a=Math.max(n,i.from),l=-1;for(i.from>n&&o.push(new _i(i.from-n-1).updateHeight(e,n));a<=s&&i.more;){let c=e.doc.lineAt(a).length;o.length&&o.push(null);let f=i.heights[i.index++];l==-1?l=f:Math.abs(f-l)>=Ty&&(l=-2);let p=new oo(c,f);p.outdated=!1,o.push(p),a+=c+1}a<=s&&o.push(null,new _i(s-a).updateHeight(e,a));let u=gs.of(o);return(l<0||Math.abs(u.height-this.height)>=Ty||Math.abs(l-this.heightMetrics(e,n).perLine)>=Ty)&&(e.heightChanged=!0),u}else(r||this.outdated)&&(this.setHeight(e,e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class LZ extends gs{constructor(e,n,r){super(e.length+n+r.length,e.height+r.height,n|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,n,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,n,r,i):this.right.blockAt(e,n,s,i+this.left.length+this.break)}lineAt(e,n,r,i,s){let o=i+this.left.height,a=s+this.left.length+this.break,l=n==dr.ByHeight?e<o:e<a,u=l?this.left.lineAt(e,n,r,i,s):this.right.lineAt(e,n,r,o,a);if(this.break||(l?u.to<a:u.from>a))return u;let c=n==dr.ByPosNoHeight?dr.ByPosNoHeight:dr.ByPos;return l?u.join(this.right.lineAt(a,c,r,o,a)):this.left.lineAt(a,c,r,i,s).join(u)}forEachLine(e,n,r,i,s,o){let a=i+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,n,r,i,s,o),n>=l&&this.right.forEachLine(e,n,r,a,l,o);else{let u=this.lineAt(l,dr.ByPos,r,i,s);e<u.from&&this.left.forEachLine(e,u.from-1,r,i,s,o),u.to>=e&&u.from<=n&&o(u),n>u.to&&this.right.forEachLine(u.to+1,n,r,a,l,o)}}replace(e,n,r){let i=this.left.length+this.break;if(n<i)return this.balanced(this.left.replace(e,n,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,n-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of r)s.push(a);if(e>0&&tN(s,o-1),n<this.length){let a=s.length;this.decomposeRight(n,s),tN(s,a)}return gs.of(s)}decomposeLeft(e,n){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(r++,e>=r&&n.push(null)),e>r&&this.right.decomposeLeft(e-r,n)}decomposeRight(e,n){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,n);e<r&&this.left.decomposeRight(e,n),this.break&&e<i&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?gs.of(this.break?[e,null,n]:[e,n]):(this.left=e,this.right=n,this.height=e.height+n.height,this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,r=!1,i){let{left:s,right:o}=this,a=n+s.length+this.break,l=null;return i&&i.from<=n+s.length&&i.more?l=s=s.updateHeight(e,n,r,i):s.updateHeight(e,n,r),i&&i.from<=a+o.length&&i.more?l=o=o.updateHeight(e,a,r,i):o.updateHeight(e,a,r),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function tN(t,e){let n,r;t[e]==null&&(n=t[e-1])instanceof _i&&(r=t[e+1])instanceof _i&&t.splice(e-1,3,new _i(n.length+1+r.length))}const DZ=5;class Tk{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let r=Math.min(n,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof oo?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new oo(r-this.pos,-1)),this.writtenTo=r,n>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,r){if(e<n||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=n-e;r.block?this.addBlock(new t4(o,i,r)):(o||s||i>=DZ)&&this.addLineDeco(i,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new oo(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let r=new _i(n-e);return this.oracle.doc.lineAt(e).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof oo)return e;let n=new oo(0,-1);return this.nodes.push(n),n}addBlock(e){var n;this.enterLine();let r=(n=e.deco)===null||n===void 0?void 0:n.type;r==Pr.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,r!=Pr.WidgetBefore&&(this.covering=e)}addLineDeco(e,n,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=n,this.writtenTo=this.pos=this.pos+r}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof oo)&&!this.isCovered?this.nodes.push(new oo(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof oo&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,n,r,i){let s=new Tk(r,e);return Vn.spans(n,r,i,s,0),s.finish(r)}}function FZ(t,e,n){let r=new VZ;return Vn.compare(t,e,n,r,0),r.changes}class VZ{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,r,i){(e<n||r&&r.heightRelevant||i&&i.heightRelevant)&&u_(e,n,this.changes,5)}}function BZ(t,e){let n=t.getBoundingClientRect(),r=t.ownerDocument,i=r.defaultView||window,s=Math.max(0,n.left),o=Math.min(i.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(i.innerHeight,n.bottom);for(let u=t.parentNode;u&&u!=r.body;)if(u.nodeType==1){let c=u,f=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&f.overflow!="visible"){let p=c.getBoundingClientRect();s=Math.max(s,p.left),o=Math.min(o,p.right),a=Math.max(a,p.top),l=u==t.parentNode?p.bottom:Math.min(l,p.bottom)}u=f.position=="absolute"||f.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function jZ(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class dS{constructor(e,n,r){this.from=e,this.to=n,this.size=r}static same(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=n[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e){return Rt.replace({widget:new zZ(this.size,e)}).range(this.from,this.to)}}class zZ extends ou{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class nN{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=rN,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Cr.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(Pk).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new $Z(n),this.stateDeco=e.facet(Ug).filter(r=>typeof r!="function"),this.heightMap=gs.empty().applyChanges(this.stateDeco,Dn.empty,this.heightOracle.setDoc(e.doc),[new Uo(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Rt.set(this.lineGaps.map(r=>r.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let i=r?n.head:n.anchor;if(!e.some(({from:s,to:o})=>i>=s&&i<=o)){let{from:s,to:o}=this.lineBlockAt(i);e.push(new k0(s,o))}}this.viewports=e.sort((r,i)=>r.from-i.from),this.scaler=this.heightMap.height<=7e6?rN:new qZ(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:Qp(e,this.scaler))})}update(e,n=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(Ug).filter(c=>typeof c!="function");let i=e.changedRanges,s=Uo.extendWithRanges(i,FZ(r,this.stateDeco,e?e.changes:ii.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),this.heightMap.height!=o&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<l.from||n.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,n));let u=!e.changes.empty||e.flags&2||l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,this.updateForViewport(),u&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(L3)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,r=window.getComputedStyle(n),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?Cr.RTL:Cr.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=n.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let u=0,c=0,f=parseInt(r.paddingTop)||0,p=parseInt(r.paddingBottom)||0;(this.paddingTop!=f||this.paddingBottom!=p)&&(this.paddingTop=f,this.paddingBottom=p,u|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=8),this.scrollTop!=e.scrollDOM.scrollTop&&(this.scrollAnchorHeight=-1,this.scrollTop=e.scrollDOM.scrollTop),this.scrolledToBottom=y3(e.scrollDOM);let v=(this.printing?jZ:BZ)(n,this.paddingTop),b=v.top-this.pixelViewport.top,E=v.bottom-this.pixelViewport.bottom;this.pixelViewport=v;let P=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(P!=this.inView&&(this.inView=P,P&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let S=a.width;if((this.contentDOMWidth!=S||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,u|=8),l){let I=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(I)&&(o=!0),o||i.lineWrapping&&Math.abs(S-this.contentDOMWidth)>i.charWidth){let{lineHeight:N,charWidth:x,textHeight:g}=e.docView.measureTextSize();o=N>0&&i.refresh(s,N,x,g,S/x,I),o&&(e.docView.minWidth=0,u|=8)}b>0&&E>0?c=Math.max(b,E):b<0&&E<0&&(c=Math.min(b,E)),i.heightChanged=!1;for(let N of this.viewports){let x=N.from==this.viewport.from?I:e.docView.measureVisibleLineHeights(N);this.heightMap=(o?gs.empty().applyChanges(this.stateDeco,Dn.empty,this.heightOracle,[new Uo(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new RZ(N.from,x))}i.heightChanged&&(u|=2)}let A=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return A&&(this.viewport=this.getViewport(c,this.scrollTarget)),this.updateForViewport(),(u&2||A)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new k0(i.lineAt(o-r*1e3,dr.ByHeight,s,0,0).from,i.lineAt(a+(1-r)*1e3,dr.ByHeight,s,0,0).to);if(n){let{head:u}=n.range;if(u<l.from||u>l.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=i.lineAt(u,dr.ByPos,s,0,0),p;n.y=="center"?p=(f.top+f.bottom)/2-c/2:n.y=="start"||n.y=="nearest"&&u<l.from?p=f.top:p=f.bottom-c,l=new k0(i.lineAt(p-1e3/2,dr.ByHeight,s,0,0).from,i.lineAt(p+c+1e3/2,dr.ByHeight,s,0,0).to)}}return l}mapViewport(e,n){let r=n.mapPos(e.from,-1),i=n.mapPos(e.to,1);return new k0(this.heightMap.lineAt(r,dr.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,dr.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,dr.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,dr.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||i<=o-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||s>=a+Math.max(10,Math.min(r,250)))&&i>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let r=[];for(let i of e)n.touchesRange(i.from,i.to)||r.push(new dS(n.mapPos(i.from),n.mapPos(i.to),i.size));return r}ensureLineGaps(e,n){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,o=i<<1;if(this.defaultTextDirection!=Cr.LTR&&!r)return[];let a=[],l=(u,c,f,p)=>{if(c-u<s)return;let v=this.state.selection.main,b=[v.from];v.empty||b.push(v.to);for(let P of b)if(P>u&&P<c){l(u,P-10,f,p),l(P+10,c,f,p);return}let E=UZ(e,P=>P.from>=f.from&&P.to<=f.to&&Math.abs(P.from-u)<s&&Math.abs(P.to-c)<s&&!b.some(S=>P.from<S&&P.to>S));if(!E){if(c<f.to&&n&&r&&n.visibleRanges.some(P=>P.from<=c&&P.to>=c)){let P=n.moveToLineBoundary(Ke.cursor(c),!1,!0).head;P>u&&(c=P)}E=new dS(u,c,this.gapSize(f,u,c,p))}a.push(E)};for(let u of this.viewportLines){if(u.length<o)continue;let c=HZ(u.from,u.to,this.stateDeco);if(c.total<o)continue;let f=this.scrollTarget?this.scrollTarget.range.head:null,p,v;if(r){let b=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,E,P;if(f!=null){let S=P0(c,f),A=((this.visibleBottom-this.visibleTop)/2+b)/u.height;E=S-A,P=S+A}else E=(this.visibleTop-u.top-b)/u.height,P=(this.visibleBottom-u.top+b)/u.height;p=C0(c,E),v=C0(c,P)}else{let b=c.total*this.heightOracle.charWidth,E=i*this.heightOracle.charWidth,P,S;if(f!=null){let A=P0(c,f),I=((this.pixelViewport.right-this.pixelViewport.left)/2+E)/b;P=A-I,S=A+I}else P=(this.pixelViewport.left-E)/b,S=(this.pixelViewport.right+E)/b;p=C0(c,P),v=C0(c,S)}p>u.from&&l(u.from,p,u,c),v<u.to&&l(v,u.to,u,c)}return a}gapSize(e,n,r,i){let s=P0(i,r)-P0(i,n);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){dS.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Rt.set(e.map(n=>n.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let n=[];Vn.spans(e,this.viewport.from,this.viewport.to,{span(i,s){n.push({from:i,to:s})},point(){}},20);let r=n.length!=this.visibleRanges.length||this.visibleRanges.some((i,s)=>i.from!=n[s].from||i.to!=n[s].to);return this.visibleRanges=n,r?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||Qp(this.heightMap.lineAt(e,dr.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return Qp(this.heightMap.lineAt(this.scaler.fromDOM(e),dr.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return Qp(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class k0{constructor(e,n){this.from=e,this.to=n}}function HZ(t,e,n){let r=[],i=t,s=0;return Vn.spans(n,t,e,{span(){},point(o,a){o>i&&(r.push({from:i,to:o}),s+=o-i),i=a}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function C0({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let i=0;;i++){let{from:s,to:o}=e[i],a=o-s;if(r<=a)return s+r;r-=a}}function P0(t,e){let n=0;for(let{from:r,to:i}of t.ranges){if(e<=i){n+=e-r;break}n+=i-r}return n/t.total}function UZ(t,e){for(let n of t)if(e(n))return n}const rN={toDOM(t){return t},fromDOM(t){return t},scale:1};class qZ{constructor(e,n,r){let i=0,s=0,o=0;this.viewports=r.map(({from:a,to:l})=>{let u=n.lineAt(a,dr.ByPos,e,0,0).top,c=n.lineAt(l,dr.ByPos,e,0,0).bottom;return i+=c-u,{from:a,to:l,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(n.height-i);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}}function Qp(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new Ya(t.from,t.length,n,r-n,Array.isArray(t._content)?t._content.map(i=>Qp(i,e)):t._content)}const O0=vt.define({combine:t=>t.join(" ")}),v_=vt.define({combine:t=>t.indexOf(!0)>-1}),y_=ac.newName(),n4=ac.newName(),r4=ac.newName(),i4={"&light":"."+n4,"&dark":"."+r4};function b_(t,e,n){return new ac(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return t;if(!n||!n[i])throw new RangeError(`Unsupported selector: ${i}`);return n[i]}):t+" "+r}})}const WZ=b_("."+y_,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},i4);class GZ{constructor(e,n,r,i){this.typeOver=i,this.bounds=null,this.text="";let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,r,0))){let a=s||o?[]:YZ(e),l=new S3(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=JZ(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!r_(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),u=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!r_(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset);this.newSel=Ke.single(u,l)}}}function s4(t,e){let n,{newSel:r}=e,i=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=i.from,u=null;(s===8||St.android&&e.text.length<a-o)&&(l=i.to,u="end");let c=KZ(t.state.doc.sliceString(o,a,Bh),e.text,l-o,u);c&&(St.chrome&&s==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==Bh+Bh&&c.toB--,n={from:o+c.from,to:o+c.toA,insert:Dn.of(e.text.slice(c.from,c.toB).split(Bh))})}else r&&(!t.hasFocus&&t.state.facet(F1)||r.main.eq(i))&&(r=null);if(!n&&!r)return!1;if(!n&&e.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,i.to))}:(St.mac||St.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(r&&n.insert.length==2&&(r=Ke.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:Dn.of([" "])}):St.chrome&&n&&n.from==n.to&&n.from==i.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(r&&(r=Ke.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:Dn.of([" "])}),n){let o=t.state;if(St.ios&&t.inputState.flushIOSKey(t)||St.android&&(n.from==i.from&&n.to==i.to&&n.insert.length==1&&n.insert.lines==2&&td(t.contentDOM,"Enter",13)||(n.from==i.from-1&&n.to==i.to&&n.insert.length==0||s==8&&n.insert.length<n.to-n.from)&&td(t.contentDOM,"Backspace",8)||n.from==i.from&&n.to==i.to+1&&n.insert.length==0&&td(t.contentDOM,"Delete",46)))return!0;let a=n.insert.toString();if(t.state.facet(I3).some(c=>c(t,n.from,n.to,a)))return!0;t.inputState.composing>=0&&t.inputState.composing++;let l;if(n.from>=i.from&&n.to<=i.to&&n.to-n.from>=(i.to-i.from)/3&&(!r||r.main.empty&&r.main.from==n.from+n.insert.length)&&t.inputState.composing<0){let c=i.from<n.from?o.sliceDoc(i.from,n.from):"",f=i.to>n.to?o.sliceDoc(n.to,i.to):"";l=o.replaceSelection(t.state.toText(c+n.insert.sliceString(0,void 0,t.state.lineBreak)+f))}else{let c=o.changes(n),f=r&&r.main.to<=c.newLength?r.main:void 0;if(o.selection.ranges.length>1&&t.inputState.composing>=0&&n.to<=i.to&&n.to>=i.to-10){let p=t.state.sliceDoc(n.from,n.to),v=H3(t)||t.state.doc.lineAt(i.head),b=i.to-n.to,E=i.to-i.from;l=o.changeByRange(P=>{if(P.from==i.from&&P.to==i.to)return{changes:c,range:f||P.map(c)};let S=P.to-b,A=S-p.length;if(P.to-P.from!=E||t.state.sliceDoc(A,S)!=p||v&&P.to>=v.from&&P.from<=v.to)return{range:P};let I=o.changes({from:A,to:S,insert:n.insert}),N=P.to-i.to;return{changes:I,range:f?Ke.range(Math.max(0,f.anchor+N),Math.max(0,f.head+N)):P.map(I)}})}else l={changes:c,selection:f&&o.selection.replaceRange(f)}}let u="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,u+=".compose",t.inputState.compositionFirstChange&&(u+=".start",t.inputState.compositionFirstChange=!1)),t.dispatch(l,{scrollIntoView:!0,userEvent:u}),!0}else if(r&&!r.main.eq(i)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin),t.dispatch({selection:r,scrollIntoView:o,userEvent:a}),!0}else return!1}function KZ(t,e,n,r){let i=Math.min(t.length,e.length),s=0;for(;s<i&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(r=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.length<e.length){let l=n<=s&&n>=o?s-n:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function YZ(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new NM(n,r)),(i!=n||s!=r)&&e.push(new NM(i,s))),e}function JZ(t,e){if(t.length==0)return null;let n=t[0].pos,r=t.length==2?t[1].pos:n;return n>-1&&r>-1?Ke.single(n+e,r+e):null}const XZ={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},pS=St.ie&&St.ie_version<=11;class ZZ{constructor(e){this.view=e,this.active=!1,this.selectionRange=new UX,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);(St.ie&&St.ie_version<=11||St.ios&&e.composing)&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),pS&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM),this.resizeContent=new ResizeObserver(()=>this.view.requestMeasure()),this.resizeContent.observe(e.contentDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runScrollHandlers(this.view,e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,r)=>n!=e[r]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(F1)?r.root.activeElement!=this.dom:!Py(r.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(St.ie&&St.ie_version<=11||St.android&&St.chrome)&&!r.state.selection.main.empty&&i.focusNode&&cb(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=St.safari&&e.root.nodeType==11&&BX(this.dom.ownerDocument)==this.dom&&QZ(this.view)||ub(e.root);if(!n||this.selectionRange.eq(n))return!1;let r=Py(this.dom,n);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&WX(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let r=this.dom;r;)if(r.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=n)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,XZ),pS&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),pS&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&td(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,r=-1,i=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(i=!0),n==-1?{from:n,to:r}=o:(n=Math.min(o.from,n),r=Math.max(o.to,r)))}return{from:n,to:r,typeOver:i}}readChange(){let{from:e,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&Py(this.dom,this.selectionRange);return e<0&&!i?null:(e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new GZ(this.view,e,n,r))}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return!1;let r=this.view.state,i=s4(this.view,n);return this.view.state==r&&this.view.update([]),i}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let r=iN(n,e.previousSibling||e.target.previousSibling,-1),i=iN(n,e.nextSibling||e.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:i?n.posBefore(i):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,n,r,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect(),(i=this.resizeContent)===null||i===void 0||i.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function iN(t,e,n){for(;e;){let r=ur.get(e);if(r&&r.parent==t)return r;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}function QZ(t){let e=null;function n(l){l.preventDefault(),l.stopImmediatePropagation(),e=l.getTargetRanges()[0]}if(t.contentDOM.addEventListener("beforeinput",n,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",n,!0),!e)return null;let r=e.startContainer,i=e.startOffset,s=e.endContainer,o=e.endOffset,a=t.docView.domAtPos(t.state.selection.main.anchor);return cb(a.node,a.offset,s,o)&&([r,i,s,o]=[s,o,r,i]),{anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:o}}class gt{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(n=>this.update([n])),this.dispatch=this.dispatch.bind(this),this._root=e.root||qX(e.parent)||document,this.viewState=new nN(e.state||un.create(e)),this.plugins=this.state.facet(Xp).map(n=>new cS(n));for(let n of this.plugins)n.update(this);this.observer=new ZZ(this),this.inputState=new wZ(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new VM(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...e){let n=e.length==1&&e[0]instanceof ai?e[0]:this.state.update(...e);this._dispatch(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,i,s=this.state;for(let p of e){if(p.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=p.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(p=>p.annotation(Z3))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=Q3(s,o),l||(a=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(c=null)):this.observer.clear(),s.facet(un.phrases)!=this.state.facet(un.phrases))return this.setState(s);i=db.create(this,s,e),i.flags|=a;let f=this.viewState.scrollTarget;try{this.updateState=2;for(let p of e){if(f&&(f=f.map(p.changes)),p.scrollIntoView){let{main:v}=p.state.selection;f=new hb(v.empty?v:Ke.cursor(v.head,v.head>v.anchor?-1:1))}for(let v of p.effects)v.is(FM)&&(f=v.value)}this.viewState.update(i,f),this.bidiCache=pb.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),n=this.docView.update(i),this.state.facet(Zp)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(p=>p.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(O0)!=i.state.facet(O0)&&(this.viewState.mustMeasureContent=!0),(n||r||f||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!i.empty)for(let p of this.state.facet(c_))p(i);(l||c)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),c&&!s4(this,c)&&u.force&&td(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new nN(e),this.plugins=e.facet(Xp).map(r=>new cS(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView=new VM(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(Xp),r=e.state.facet(Xp);if(n!=r){let i=[];for(let s of r){let o=n.indexOf(s);if(o<0)i.push(new cS(s));else{let a=this.plugins[o];a.mustUpdate=e,i.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,r=this.scrollDOM,{scrollTop:i}=r,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;i!=this.viewState.scrollTop&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(y3(r))s=-1,o=this.viewState.heightMap.height;else{let v=this.viewState.scrollAnchorAt(i);s=v.from,o=v.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];l&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(v=>{try{return v.read(this)}catch(b){return mo(this.state,b),sN}}),f=db.create(this,this.state,[]),p=!1;f.flags|=l,n?n.flags|=l:n=f,this.updateState=2,f.empty||(this.updatePlugins(f),this.inputState.update(f),this.updateAttrs(),p=this.docView.update(f));for(let v=0;v<u.length;v++)if(c[v]!=sN)try{let b=u[v];b.write&&b.write(c[v],this)}catch(b){mo(this.state,b)}if(p&&this.docView.updateSelection(!0),!f.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null;continue}else{let b=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(b>1||b<-1){i=r.scrollTop=i+b,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let a of this.state.facet(c_))a(n)}get themeClasses(){return y_+" "+(this.state.facet(v_)?r4:n4)+" "+this.state.facet(O0)}updateAttrs(){let e=oN(this,D3,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(F1)?"true":"false",class:"cm-content",style:`${St.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),oN(this,Pk,n);let r=this.observer.ignore(()=>{let i=l_(this.contentDOM,this.contentAttrs,n),s=l_(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=n,r}showAnnouncements(e){let n=!0;for(let r of e)for(let i of r.effects)if(i.is(gt.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(Zp),ac.mount(this.root,this.styleModules.concat(WZ).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.spec!=e)&&this.pluginMap.set(e,n=this.plugins.find(r=>r.spec==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,r){return hS(this,e,qM(this,e,n,r))}moveByGroup(e,n){return hS(this,e,qM(this,e,n,r=>yZ(this,e.head,r)))}moveToLineBoundary(e,n,r=!0){return vZ(this,e,n,r)}moveVertically(e,n,r){return hS(this,e,bZ(this,e,n,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),q3(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let r=this.docView.coordsAt(e,n);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),o=s[nd.find(s,e-i.from,-1,n)];return L1(r,o.dir==Cr.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(R3)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>eQ)return j3(e.length);let n=this.textDirectionAt(e.from);for(let i of this.bidiCache)if(i.from==e.from&&i.dir==n)return i.order;let r=iZ(e.text,n);return this.bidiCache.push(new pb(e.from,e.to,n,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||St.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{m3(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return FM.of(new hb(typeof e=="number"?Ke.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}static domEventHandlers(e){return qr.define(()=>({}),{eventHandlers:e})}static theme(e,n){let r=ac.newName(),i=[O0.of(r),Zp.of(b_(`.${r}`,e))];return n&&n.dark&&i.push(v_.of(!0)),i}static baseTheme(e){return Kf.lowest(Zp.of(b_("."+y_,e,i4)))}static findFromDOM(e){var n;let r=e.querySelector(".cm-content"),i=r&&ur.get(r)||ur.get(e);return((n=i==null?void 0:i.rootView)===null||n===void 0?void 0:n.view)||null}}gt.styleModule=Zp;gt.inputHandler=I3;gt.focusChangeEffect=$3;gt.perLineTextDirection=R3;gt.exceptionSink=N3;gt.updateListener=c_;gt.editable=F1;gt.mouseSelectionStyle=M3;gt.dragMovesSelection=T3;gt.clickAddsSelectionRange=O3;gt.decorations=Ug;gt.atomicRanges=Ok;gt.scrollMargins=F3;gt.darkTheme=v_;gt.contentAttributes=Pk;gt.editorAttributes=D3;gt.lineWrapping=gt.contentAttributes.of({class:"cm-lineWrapping"});gt.announce=Kt.define();const eQ=4096,sN={};class pb{constructor(e,n,r,i){this.from=e,this.to=n,this.dir=r,this.order=i}static update(e,n){if(n.empty)return e;let r=[],i=e.length?e[e.length-1].dir:Cr.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==i&&!n.touchesRange(o.from,o.to)&&r.push(new pb(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.order))}return r}}function oN(t,e,n){for(let r=t.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],o=typeof s=="function"?s(t):s;o&&a_(o,n)}return n}const tQ=St.mac?"mac":St.windows?"win":St.linux?"linux":"key";function nQ(t,e){const n=t.split(/-(?!$)/);let r=n[n.length-1];r=="Space"&&(r=" ");let i,s,o,a;for(let l=0;l<n.length-1;++l){const u=n[l];if(/^(cmd|meta|m)$/i.test(u))a=!0;else if(/^a(lt)?$/i.test(u))i=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))o=!0;else if(/^mod$/i.test(u))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),a&&(r="Meta-"+r),o&&(r="Shift-"+r),r}function T0(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const rQ=Kf.default(gt.domEventHandlers({keydown(t,e){return a4(o4(e.state),t,e,"editor")}})),Vm=vt.define({enables:rQ}),aN=new WeakMap;function o4(t){let e=t.facet(Vm),n=aN.get(e);return n||aN.set(e,n=oQ(e.reduce((r,i)=>r.concat(i),[]))),n}function iQ(t,e,n){return a4(o4(t.state),e,t,n)}let Du=null;const sQ=4e3;function oQ(t,e=tQ){let n=Object.create(null),r=Object.create(null),i=(o,a)=>{let l=r[o];if(l==null)r[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,u,c)=>{var f,p;let v=n[o]||(n[o]=Object.create(null)),b=a.split(/ (?!$)/).map(S=>nQ(S,e));for(let S=1;S<b.length;S++){let A=b.slice(0,S).join(" ");i(A,!0),v[A]||(v[A]={preventDefault:!0,stopPropagation:!1,run:[I=>{let N=Du={view:I,prefix:A,scope:o};return setTimeout(()=>{Du==N&&(Du=null)},sQ),!0}]})}let E=b.join(" ");i(E,!1);let P=v[E]||(v[E]={preventDefault:!1,stopPropagation:!1,run:((p=(f=v._any)===null||f===void 0?void 0:f.run)===null||p===void 0?void 0:p.slice())||[]});l&&P.run.push(l),u&&(P.preventDefault=!0),c&&(P.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let u of a){let c=n[u]||(n[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let f in c)c[f].run.push(o.any)}let l=o[e]||o.key;if(l)for(let u of a)s(u,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(u,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return n}function a4(t,e,n,r){let i=VX(e),s=ki(i,0),o=Vo(s)==i.length&&i!=" ",a="",l=!1,u=!1,c=!1;Du&&Du.view==n&&Du.scope==r&&(a=Du.prefix+" ",G3.indexOf(e.keyCode)<0&&(u=!0,Du=null));let f=new Set,p=P=>{if(P){for(let S of P.run)if(!f.has(S)&&(f.add(S),S(n,e)))return P.stopPropagation&&(c=!0),!0;P.preventDefault&&(P.stopPropagation&&(c=!0),u=!0)}return!1},v=t[r],b,E;return v&&(p(v[a+T0(i,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(St.windows&&e.ctrlKey&&e.altKey)&&(b=lc[e.keyCode])&&b!=i?(p(v[a+T0(b,e,!0)])||e.shiftKey&&(E=Hg[e.keyCode])!=i&&E!=b&&p(v[a+T0(E,e,!1)]))&&(l=!0):o&&e.shiftKey&&p(v[a+T0(i,e,!0)])&&(l=!0),!l&&p(v._any)&&(l=!0)),u&&(l=!0),l&&c&&e.stopPropagation(),l}class Bm{constructor(e,n,r,i,s){this.className=e,this.left=n,this.top=r,this.width=i,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,r){if(r.empty){let i=e.coordsAtPos(r.head,r.assoc||1);if(!i)return[];let s=l4(e);return[new Bm(n,i.left-s.left,i.top-s.top,null,i.bottom-i.top)]}else return aQ(e,n,r)}}function l4(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==Cr.LTR?e.left:e.right-t.scrollDOM.clientWidth)-t.scrollDOM.scrollLeft,top:e.top-t.scrollDOM.scrollTop}}function lN(t,e,n){let r=Ke.cursor(e);return{from:Math.max(n.from,t.moveToLineBoundary(r,!1,!0).from),to:Math.min(n.to,t.moveToLineBoundary(r,!0,!0).from),type:Pr.Text}}function aQ(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let r=Math.max(n.from,t.viewport.from),i=Math.min(n.to,t.viewport.to),s=t.textDirection==Cr.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),l=l4(t),u=o.querySelector(".cm-line"),c=u&&window.getComputedStyle(u),f=a.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),p=a.right-(c?parseInt(c.paddingRight):0),v=p_(t,r),b=p_(t,i),E=v.type==Pr.Text?v:null,P=b.type==Pr.Text?b:null;if(E&&(t.lineWrapping||v.widgetLineBreaks)&&(E=lN(t,r,E)),P&&(t.lineWrapping||b.widgetLineBreaks)&&(P=lN(t,i,P)),E&&P&&E.from==P.from)return A(I(n.from,n.to,E));{let x=E?I(n.from,null,E):N(v,!1),g=P?I(null,n.to,P):N(b,!0),_=[];return(E||v).to<(P||b).from-(E&&P?1:0)||v.widgetLineBreaks>1&&x.bottom+t.defaultLineHeight/2<g.top?_.push(S(f,x.bottom,p,g.top)):x.bottom<g.top&&t.elementAtHeight((x.bottom+g.top)/2).type==Pr.Text&&(x.bottom=g.top=(x.bottom+g.top)/2),A(x).concat(_).concat(A(g))}function S(x,g,_,M){return new Bm(e,x-l.left,g-l.top-.01,_-x,M-g+.01)}function A({top:x,bottom:g,horizontal:_}){let M=[];for(let D=0;D<_.length;D+=2)M.push(S(_[D],x,_[D+1],g));return M}function I(x,g,_){let M=1e9,D=-1e9,q=[];function R(Z,de,be,_e,Te){let Le=t.coordsAtPos(Z,Z==_.to?-2:2),Ee=t.coordsAtPos(be,be==_.from?2:-2);!Le||!Ee||(M=Math.min(Le.top,Ee.top,M),D=Math.max(Le.bottom,Ee.bottom,D),Te==Cr.LTR?q.push(s&&de?f:Le.left,s&&_e?p:Ee.right):q.push(!s&&_e?f:Ee.left,!s&&de?p:Le.right))}let W=x??_.from,G=g??_.to;for(let Z of t.visibleRanges)if(Z.to>W&&Z.from<G)for(let de=Math.max(Z.from,W),be=Math.min(Z.to,G);;){let _e=t.state.doc.lineAt(de);for(let Te of t.bidiSpans(_e)){let Le=Te.from+_e.from,Ee=Te.to+_e.from;if(Le>=be)break;Ee>de&&R(Math.max(Le,de),x==null&&Le<=W,Math.min(Ee,be),g==null&&Ee>=G,Te.dir)}if(de=_e.to+1,de>=be)break}return q.length==0&&R(W,x==null,G,g==null,t.textDirection),{top:M,bottom:D,horizontal:q}}function N(x,g){let _=a.top+(g?x.top:x.bottom);return{top:_,bottom:_,horizontal:[]}}}function lQ(t,e){return t.constructor==e.constructor&&t.eq(e)}class uQ{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(My)!=e.state.facet(My)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&e.view.requestMeasure(this.measureReq)}setOrder(e){let n=0,r=e.facet(My);for(;n<r.length&&r[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}draw(e){if(e.length!=this.drawn.length||e.some((n,r)=>!lQ(n,this.drawn[r]))){let n=this.dom.firstChild,r=0;for(let i of e)i.update&&n&&i.constructor&&this.drawn[r].constructor&&i.update(n,this.drawn[r])?(n=n.nextSibling,r++):this.dom.insertBefore(i.draw(),n);for(;n;){let i=n.nextSibling;n.remove(),n=i}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const My=vt.define();function u4(t){return[qr.define(e=>new uQ(e,t)),My.of(t)]}const c4=!St.ios,qg=vt.define({combine(t){return _a(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function cQ(t={}){return[qg.of(t),fQ,hQ,dQ,L3.of(!0)]}function f4(t){return t.startState.facet(qg)!=t.state.facet(qg)}const fQ=u4({above:!0,markers(t){let{state:e}=t,n=e.facet(qg),r=[];for(let i of e.selection.ranges){let s=i==e.selection.main;if(i.empty?!s||c4:n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=i.empty?i:Ke.cursor(i.head,i.head>i.anchor?-1:1);for(let l of Bm.forRange(t,o,a))r.push(l)}}return r},update(t,e){t.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=f4(t);return n&&uN(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){uN(e.state,t)},class:"cm-cursorLayer"});function uN(t,e){e.style.animationDuration=t.facet(qg).cursorBlinkRate+"ms"}const hQ=u4({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:Bm.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||f4(t)},class:"cm-selectionLayer"}),h4={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};c4&&(h4[".cm-line"].caretColor="transparent !important");const dQ=Kf.highest(gt.theme(h4)),d4=Kt.define({map(t,e){return t==null?null:e.mapPos(t)}}),eg=Zr.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((n,r)=>r.is(d4)?r.value:n,t)}}),pQ=qr.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(eg);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(eg)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let t=this.view.state.field(eg),e=t!=null&&this.view.coordsAtPos(t);if(!e)return null;let n=this.view.scrollDOM.getBoundingClientRect();return{left:e.left-n.left+this.view.scrollDOM.scrollLeft,top:e.top-n.top+this.view.scrollDOM.scrollTop,height:e.bottom-e.top}}drawCursor(t){this.cursor&&(t?(this.cursor.style.left=t.left+"px",this.cursor.style.top=t.top+"px",this.cursor.style.height=t.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(eg)!=t&&this.view.dispatch({effects:d4.of(t)})}},{eventHandlers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function gQ(){return[eg,pQ]}function cN(t,e,n,r,i){e.lastIndex=0;for(let s=t.iterRange(n,r),o=n,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)i(o+a.index,a)}function mQ(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let r=[];for(let{from:i,to:s}of n)i=Math.max(t.state.doc.lineAt(i).from,i-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=s:r.push({from:i,to:s});return r}class vQ{constructor(e){const{regexp:n,decoration:r,decorate:i,boundary:s,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,i)this.addMatch=(a,l,u,c)=>i(c,u,u+a[0].length,a,l);else if(typeof r=="function")this.addMatch=(a,l,u,c)=>{let f=r(a,l,u);f&&c(u,u+a[0].length,f)};else if(r)this.addMatch=(a,l,u,c)=>c(u,u+a[0].length,r);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let n=new oc,r=n.add.bind(n);for(let{from:i,to:s}of mQ(e,this.maxLength))cN(e.state.doc,this.regexp,i,s,(o,a)=>this.addMatch(a,e,o,r));return n.finish()}updateDeco(e,n){let r=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>e.view.viewport.from&&a<e.view.viewport.to&&(r=Math.min(a,r),i=Math.max(l,i))}),e.viewportChanged||i-r>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,n.map(e.changes),r,i):n}updateRange(e,n,r,i){for(let s of e.visibleRanges){let o=Math.max(s.from,r),a=Math.min(s.to,i);if(a>o){let l=e.state.doc.lineAt(o),u=l.to<a?e.state.doc.lineAt(a):l,c=Math.max(s.from,l.from),f=Math.min(s.to,u.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){c=o;break}for(;a<u.to;a++)if(this.boundary.test(u.text[a-u.from])){f=a;break}}let p=[],v,b=(E,P,S)=>p.push(S.range(E,P));if(l==u)for(this.regexp.lastIndex=c-l.from;(v=this.regexp.exec(l.text))&&v.index<f-l.from;)this.addMatch(v,e,v.index+l.from,b);else cN(e.state.doc,this.regexp,c,f,(E,P)=>this.addMatch(P,e,E,b));n=n.update({filterFrom:c,filterTo:f,filter:(E,P)=>E<c||P>f,add:p})}}return n}}const w_=/x/.unicode!=null?"gu":"g",yQ=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,w_),bQ={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let gS=null;function wQ(){var t;if(gS==null&&typeof document<"u"&&document.body){let e=document.body.style;gS=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return gS||!1}const Ny=vt.define({combine(t){let e=_a(t,{render:null,specialChars:yQ,addSpecialChars:null});return(e.replaceTabs=!wQ())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,w_)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,w_)),e}});function xQ(t={}){return[Ny.of(t),SQ()]}let fN=null;function SQ(){return fN||(fN=qr.fromClass(class{constructor(t){this.view=t,this.decorations=Rt.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(Ny)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new vQ({regexp:t.specialChars,decoration:(e,n,r)=>{let{doc:i}=n.state,s=ki(e[0],0);if(s==9){let o=i.lineAt(r),a=n.state.tabSize,l=Lm(o.text,a,r-o.from);return Rt.replace({widget:new kQ((a-l%a)*this.view.defaultCharacterWidth)})}return this.decorationCache[s]||(this.decorationCache[s]=Rt.replace({widget:new AQ(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(Ny);t.startState.facet(Ny)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const EQ="";function _Q(t){return t>=32?EQ:t==10?"":String.fromCharCode(9216+t)}class AQ extends ou{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=_Q(this.code),r=e.state.phrase("Control character")+" "+(bQ[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,n);if(i)return i;let s=document.createElement("span");return s.textContent=n,s.title=r,s.setAttribute("aria-label",r),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class kQ extends ou{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function CQ(){return OQ}const PQ=Rt.line({class:"cm-activeLine"}),OQ=qr.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){let i=t.lineBlockAt(r.head);i.from>e&&(n.push(PQ.range(i.from)),e=i.from)}return Rt.set(n)}},{decorations:t=>t.decorations});class TQ extends ou{constructor(e){super(),this.content=e}toDOM(){let e=document.createElement("span");return e.className="cm-placeholder",e.style.pointerEvents="none",e.appendChild(typeof this.content=="string"?document.createTextNode(this.content):this.content),typeof this.content=="string"?e.setAttribute("aria-label","placeholder "+this.content):e.setAttribute("aria-hidden","true"),e}coordsAt(e){let n=e.firstChild?Ed(e.firstChild):[];if(!n.length)return null;let r=window.getComputedStyle(e.parentNode),i=L1(n[0],r.direction!="rtl"),s=parseInt(r.lineHeight);return i.bottom-i.top>s*1.5?{left:i.left,right:i.right,top:i.top,bottom:i.top+s}:i}ignoreEvent(){return!1}}function MQ(t){return qr.fromClass(class{constructor(e){this.view=e,this.placeholder=t?Rt.set([Rt.widget({widget:new TQ(t),side:1}).range(0)]):Rt.none}get decorations(){return this.view.state.doc.length?Rt.none:this.placeholder}},{decorations:e=>e.decorations})}const x_=2e3;function NQ(t,e,n){let r=Math.min(e.line,n.line),i=Math.max(e.line,n.line),s=[];if(e.off>x_||n.off>x_||e.col<0||n.col<0){let o=Math.min(e.off,n.off),a=Math.max(e.off,n.off);for(let l=r;l<=i;l++){let u=t.doc.line(l);u.length<=a&&s.push(Ke.range(u.from+o,u.to+a))}}else{let o=Math.min(e.col,n.col),a=Math.max(e.col,n.col);for(let l=r;l<=i;l++){let u=t.doc.line(l),c=e_(u.text,o,t.tabSize,!0);if(c<0)s.push(Ke.cursor(u.to));else{let f=e_(u.text,a,t.tabSize);s.push(Ke.range(u.from+c,u.from+f))}}}return s}function IQ(t,e){let n=t.coordsAtPos(t.viewport.from);return n?Math.round(Math.abs((n.left-e)/t.defaultCharacterWidth)):-1}function hN(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1),r=t.state.doc.lineAt(n),i=n-r.from,s=i>x_?-1:i==r.length?IQ(t,e.clientX):Lm(r.text,t.state.tabSize,n-r.from);return{line:r.number,col:s,off:i}}function $Q(t,e){let n=hN(t,e),r=t.state.selection;return n?{update(i){if(i.docChanged){let s=i.changes.mapPos(i.startState.doc.line(n.line).from),o=i.state.doc.lineAt(s);n={line:o.number,col:n.col,off:Math.min(n.off,o.length)},r=r.map(i.changes)}},get(i,s,o){let a=hN(t,i);if(!a)return r;let l=NQ(t.state,n,a);return l.length?o?Ke.create(l.concat(r.ranges)):Ke.create(l):r}}:null}function RQ(t){let e=(t==null?void 0:t.eventFilter)||(n=>n.altKey&&n.button==0);return gt.mouseSelectionStyle.of((n,r)=>e(r)?$Q(n,r):null)}const LQ={Alt:[18,t=>!!t.altKey],Control:[17,t=>!!t.ctrlKey],Shift:[16,t=>!!t.shiftKey],Meta:[91,t=>!!t.metaKey]},DQ={style:"cursor: crosshair"};function FQ(t={}){let[e,n]=LQ[t.key||"Alt"],r=qr.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventHandlers:{keydown(i){this.set(i.keyCode==e||n(i))},keyup(i){(i.keyCode==e||!n(i))&&this.set(!1)},mousemove(i){this.set(n(i))}}});return[r,gt.contentAttributes.of(i=>{var s;return!((s=i.plugin(r))===null||s===void 0)&&s.isDown?DQ:null})]}const M0="-10000px";class p4{constructor(e,n,r){this.facet=n,this.createTooltipView=r,this.input=e.state.facet(n),this.tooltips=this.input.filter(i=>i),this.tooltipViews=this.tooltips.map(r)}update(e){var n;let r=e.state.facet(this.facet),i=r.filter(o=>o);if(r===this.input){for(let o of this.tooltipViews)o.update&&o.update(e);return!1}let s=[];for(let o=0;o<i.length;o++){let a=i[o],l=-1;if(a){for(let u=0;u<this.tooltips.length;u++){let c=this.tooltips[u];c&&c.create==a.create&&(l=u)}if(l<0)s[o]=this.createTooltipView(a);else{let u=s[o]=this.tooltipViews[l];u.update&&u.update(e)}}}for(let o of this.tooltipViews)s.indexOf(o)<0&&(o.dom.remove(),(n=o.destroy)===null||n===void 0||n.call(o));return this.input=r,this.tooltips=i,this.tooltipViews=s,!0}}function VQ(t){let{win:e}=t;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const mS=vt.define({combine:t=>{var e,n,r;return{position:St.ios?"absolute":((e=t.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(i=>i.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((r=t.find(i=>i.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||VQ}}}),dN=new WeakMap,g4=qr.fromClass(class{constructor(t){this.view=t,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(mS);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new p4(t,V1,n=>this.createTooltip(n)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t);e&&this.observeIntersection();let n=e||t.geometryChanged,r=t.state.facet(mS);if(r.position!=this.position){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t){let e=t.create(this.view);if(e.dom.classList.add("cm-tooltip"),t.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let n=document.createElement("div");n.className="cm-tooltip-arrow",e.dom.appendChild(n)}return e.dom.style.position=this.position,e.dom.style.top=M0,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var t,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),(t=n.destroy)===null||t===void 0||t.call(n);(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=this.view.dom.getBoundingClientRect();return{editor:t,parent:this.parent?this.container.getBoundingClientRect():t,pos:this.manager.tooltips.map((e,n)=>{let r=this.manager.tooltipViews[n];return r.getCoords?r.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(mS).tooltipSpace(this.view)}}writeMeasure(t){var e;let{editor:n,space:r}=t,i=[];for(let s=0;s<this.manager.tooltips.length;s++){let o=this.manager.tooltips[s],a=this.manager.tooltipViews[s],{dom:l}=a,u=t.pos[s],c=t.size[s];if(!u||u.bottom<=Math.max(n.top,r.top)||u.top>=Math.min(n.bottom,r.bottom)||u.right<Math.max(n.left,r.left)-.1||u.left>Math.min(n.right,r.right)+.1){l.style.top=M0;continue}let f=o.arrow?a.dom.querySelector(".cm-tooltip-arrow"):null,p=f?7:0,v=c.right-c.left,b=(e=dN.get(a))!==null&&e!==void 0?e:c.bottom-c.top,E=a.offset||jQ,P=this.view.textDirection==Cr.LTR,S=c.width>r.right-r.left?P?r.left:r.right-c.width:P?Math.min(u.left-(f?14:0)+E.x,r.right-v):Math.max(r.left,u.left-v+(f?14:0)-E.x),A=!!o.above;!o.strictSide&&(A?u.top-(c.bottom-c.top)-E.y<r.top:u.bottom+(c.bottom-c.top)+E.y>r.bottom)&&A==r.bottom-u.bottom>u.top-r.top&&(A=!A);let I=(A?u.top-r.top:r.bottom-u.bottom)-p;if(I<b&&a.resize!==!1){if(I<this.view.defaultLineHeight){l.style.top=M0;continue}dN.set(a,b),l.style.height=(b=I)+"px"}else l.style.height&&(l.style.height="");let N=A?u.top-b-p-E.y:u.bottom+p+E.y,x=S+v;if(a.overlap!==!0)for(let g of i)g.left<x&&g.right>S&&g.top<N+b&&g.bottom>N&&(N=A?g.top-b-2-p:g.bottom+p+2);this.position=="absolute"?(l.style.top=N-t.parent.top+"px",l.style.left=S-t.parent.left+"px"):(l.style.top=N+"px",l.style.left=S+"px"),f&&(f.style.left=`${u.left+(P?E.x:-E.x)-(S+14-7)}px`),a.overlap!==!0&&i.push({left:S,top:N,right:x,bottom:N+b}),l.classList.toggle("cm-tooltip-above",A),l.classList.toggle("cm-tooltip-below",!A),a.positioned&&a.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=M0}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),BQ=gt.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),jQ={x:0,y:0},V1=vt.define({enables:[g4,BQ]}),gb=vt.define();class Mk{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new p4(e,gb,n=>this.createHostedView(n))}static create(e){return new Mk(e)}createHostedView(e){let n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(n.dom),this.mounted&&n.mount&&n.mount(this.view),n}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}}const zQ=V1.compute([gb],t=>{let e=t.facet(gb).filter(n=>n);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.filter(n=>n.end!=null).map(n=>n.end)),create:Mk.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class HQ{constructor(e,n,r,i,s){this.view=e,this.source=n,this.field=r,this.setHover=i,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,n=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(n==null)return;let r=this.view.coordsAtPos(n);if(r==null||e.y<r.top||e.y>r.bottom||e.x<r.left-this.view.defaultCharacterWidth||e.x>r.right+this.view.defaultCharacterWidth)return;let i=this.view.bidiSpans(this.view.state.doc.lineAt(n)).find(a=>a.from<=n&&a.to>=n),s=i&&i.dir==Cr.RTL?-1:1,o=this.source(this.view,n,e.x<r.left?-s:s);if(o!=null&&o.then){let a=this.pending={pos:n};o.then(l=>{this.pending==a&&(this.pending=null,l&&this.view.dispatch({effects:this.setHover.of(l)}))},l=>mo(this.view.state,l,"hover tooltip"))}else o&&this.view.dispatch({effects:this.setHover.of(o)})}mousemove(e){var n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let r=this.active;if(r&&!pN(this.lastMove.target)||this.pending){let{pos:i}=r||this.pending,s=(n=r==null?void 0:r.end)!==null&&n!==void 0?n:i;(i==s?this.view.posAtCoords(this.lastMove)!=i:!UQ(this.view,i,s,e.clientX,e.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!pN(e.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function pN(t){for(let e=t;e;e=e.parentNode)if(e.nodeType==1&&e.classList.contains("cm-tooltip"))return!0;return!1}function UQ(t,e,n,r,i,s){let o=document.createRange(),a=t.domAtPos(e),l=t.domAtPos(n);o.setEnd(l.node,l.offset),o.setStart(a.node,a.offset);let u=o.getClientRects();o.detach();for(let c=0;c<u.length;c++){let f=u[c];if(Math.max(f.top-i,i-f.bottom,f.left-r,r-f.right)<=s)return!0}return!1}function m4(t,e={}){let n=Kt.define(),r=Zr.define({create(){return null},update(i,s){if(i&&(e.hideOnChange&&(s.docChanged||s.selection)||e.hideOn&&e.hideOn(s,i)))return null;if(i&&s.docChanged){let o=s.changes.mapPos(i.pos,-1,Oi.TrackDel);if(o==null)return null;let a=Object.assign(Object.create(null),i);a.pos=o,i.end!=null&&(a.end=s.changes.mapPos(i.end)),i=a}for(let o of s.effects)o.is(n)&&(i=o.value),o.is(qQ)&&(i=null);return i},provide:i=>gb.from(i)});return[r,qr.define(i=>new HQ(i,t,r,n,e.hoverTime||300)),zQ]}function v4(t,e){let n=t.plugin(g4);if(!n)return null;let r=n.manager.tooltips.indexOf(e);return r<0?null:n.manager.tooltipViews[r]}const qQ=Kt.define(),gN=vt.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function Wg(t,e){let n=t.plugin(y4),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}const y4=qr.fromClass(class{constructor(t){this.input=t.state.facet(Gg),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(gN);this.top=new N0(t,!0,e.topContainer),this.bottom=new N0(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(gN);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new N0(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new N0(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(Gg);if(n!=this.input){let r=n.filter(l=>l),i=[],s=[],o=[],a=[];for(let l of r){let u=this.specs.indexOf(l),c;u<0?(c=l(t.view),a.push(c)):(c=this.panels[u],c.update&&c.update(t)),i.push(c),(c.top?s:o).push(c)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let r of this.panels)r.update&&r.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>gt.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class N0{constructor(e,n,r){this.view=e,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=mN(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=mN(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function mN(t){let e=t.nextSibling;return t.remove(),e}const Gg=vt.define({enables:y4});class ll extends $f{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}ll.prototype.elementClass="";ll.prototype.toDOM=void 0;ll.prototype.mapMode=Oi.TrackBefore;ll.prototype.startSide=ll.prototype.endSide=-1;ll.prototype.point=!0;const Iy=vt.define(),WQ={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Vn.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},mg=vt.define();function B1(t){return[b4(),mg.of(Object.assign(Object.assign({},WQ),t))]}const S_=vt.define({combine:t=>t.some(e=>e)});function b4(t){let e=[GQ];return t&&t.fixed===!1&&e.push(S_.of(!0)),e}const GQ=qr.fromClass(class{constructor(t){this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=t.state.facet(mg).map(e=>new yN(t,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!t.state.facet(S_),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}t.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(S_)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&this.dom.remove();let n=Vn.iter(this.view.state.facet(Iy),this.view.viewport.from),r=[],i=this.gutters.map(s=>new KQ(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==Pr.Text&&o){E_(n,r,a.from);for(let l of i)l.line(this.view,a,r);o=!1}else if(a.widget)for(let l of i)l.widget(this.view,a)}else if(s.type==Pr.Text){E_(n,r,s.from);for(let o of i)o.line(this.view,s,r)}for(let s of i)s.finish();t&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(t){let e=t.startState.facet(mg),n=t.state.facet(mg),r=t.docChanged||t.heightChanged||t.viewportChanged||!Vn.eq(t.startState.facet(Iy),t.state.facet(Iy),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let i of this.gutters)i.update(t)&&(r=!0);else{r=!0;let i=[];for(let s of n){let o=e.indexOf(s);o<0?i.push(new yN(this.view,s)):(this.gutters[o].update(t),i.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove()}},{provide:t=>gt.scrollMargins.of(e=>{let n=e.plugin(t);return!n||n.gutters.length==0||!n.fixed?null:e.textDirection==Cr.LTR?{left:n.dom.offsetWidth}:{right:n.dom.offsetWidth}})});function vN(t){return Array.isArray(t)?t:[t]}function E_(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class KQ{constructor(e,n,r){this.gutter=e,this.height=r,this.i=0,this.cursor=Vn.iter(e.markers,n.from)}addElement(e,n,r){let{gutter:i}=this,s=n.top-this.height;if(this.i==i.elements.length){let o=new w4(e,n.height,s,r);i.elements.push(o),i.dom.appendChild(o.dom)}else i.elements[this.i].update(e,n.height,s,r);this.height=n.bottom,this.i++}line(e,n,r){let i=[];E_(this.cursor,i,n.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,n,i);s&&i.unshift(s);let o=this.gutter;i.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,i)}widget(e,n){let r=this.gutter.config.widgetMarker(e,n.widget,n);r&&this.addElement(e,n,[r])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class yN{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in n.domEventHandlers)this.dom.addEventListener(r,i=>{let s=i.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=i.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[r](e,a,i)&&i.preventDefault()});this.markers=vN(n.markers(e)),n.initialSpacer&&(this.spacer=new w4(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=vN(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!Vn.eq(this.markers,n,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class w4{constructor(e,n,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,r,i)}update(e,n,r,i){this.height!=n&&(this.dom.style.height=(this.height=n)+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),YQ(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,n){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<n.length?n[s++]:null,u=!1;if(l){let c=l.elementClass;c&&(r+=" "+c);for(let f=o;f<this.markers.length;f++)if(this.markers[f].compare(l)){a=f,u=!0;break}}else a=this.markers.length;for(;o<a;){let c=this.markers[o++];if(c.toDOM){c.destroy(i);let f=i.nextSibling;i.remove(),i=f}}if(!l)break;l.toDOM&&(u?i=i.nextSibling:this.dom.insertBefore(l.toDOM(e),i)),u&&o++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}}function YQ(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const JQ=vt.define(),jh=vt.define({combine(t){return _a(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let r=Object.assign({},e);for(let i in n){let s=r[i],o=n[i];r[i]=s?(a,l,u)=>s(a,l,u)||o(a,l,u):o}return r}})}});class vS extends ll{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function yS(t,e){return t.state.facet(jh).formatNumber(e,t.state)}const XQ=mg.compute([jh],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(JQ)},lineMarker(e,n,r){return r.some(i=>i.toDOM)?null:new vS(yS(e,e.state.doc.lineAt(n.from).number))},widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(jh)!=e.state.facet(jh),initialSpacer(e){return new vS(yS(e,bN(e.state.doc.lines)))},updateSpacer(e,n){let r=yS(n.view,bN(n.view.state.doc.lines));return r==e.number?e:new vS(r)},domEventHandlers:t.facet(jh).domEventHandlers}));function Nk(t={}){return[jh.of(t),b4(),XQ]}function bN(t){let e=9;for(;e<t;)e=e*10+9;return e}const ZQ=new class extends ll{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},QQ=Iy.compute(["selection"],t=>{let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.head).from;i>n&&(n=i,e.push(ZQ.range(i)))}return Vn.of(e)});function eee(){return QQ}const x4=1024;let tee=0;class bS{constructor(e,n){this.from=e,this.to=n}}class cn{constructor(e={}){this.id=tee++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Ws.match(e)),n=>{let r=e(n);return r===void 0?null:[this,r]}}}cn.closedBy=new cn({deserialize:t=>t.split(" ")});cn.openedBy=new cn({deserialize:t=>t.split(" ")});cn.group=new cn({deserialize:t=>t.split(" ")});cn.contextHash=new cn({perNode:!0});cn.lookAhead=new cn({perNode:!0});cn.mounted=new cn({perNode:!0});const nee=Object.create(null);class Ws{constructor(e,n,r,i=0){this.name=e,this.props=n,this.id=r,this.flags=i}static define(e){let n=e.props&&e.props.length?Object.create(null):nee,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new Ws(e.name||"",n,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(cn.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let i of r.split(" "))n[i]=e[r];return r=>{for(let i=r.prop(cn.group),s=-1;s<(i?i.length:0);s++){let o=n[s<0?r.name:i[s]];if(o)return o}}}}Ws.none=new Ws("",Object.create(null),0,8);class Ik{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let r of this.types){let i=null;for(let s of e){let o=s(r);o&&(i||(i=Object.assign({},r.props)),i[o[0].id]=o[1])}n.push(i?new Ws(r.name,i,r.id,r.flags):r)}return new Ik(n)}}const I0=new WeakMap,wN=new WeakMap;var mi;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(mi||(mi={}));class Jr{constructor(e,n,r,i,s){if(this.type=e,this.children=n,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=this.prop(cn.mounted);if(e&&!e.overlay)return e.tree.toString();let n="";for(let r of this.children){let i=r.toString();i&&(n&&(n+=","),n+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new yb(this.topNode,e)}cursorAt(e,n=0,r=0){let i=I0.get(this)||this.topNode,s=new yb(i);return s.moveTo(e,n),I0.set(this,s._tree),s}get topNode(){return new Wl(this,0,0,null)}resolve(e,n=0){let r=Ad(I0.get(this)||this.topNode,e,n,!1);return I0.set(this,r),r}resolveInner(e,n=0){let r=Ad(wN.get(this)||this.topNode,e,n,!0);return wN.set(this,r),r}iterate(e){let{enter:n,leave:r,from:i=0,to:s=this.length}=e,o=e.mode||0,a=(o&mi.IncludeAnonymous)>0;for(let l=this.cursor(o|mi.IncludeAnonymous);;){let u=!1;if(l.from<=s&&l.to>=i&&(!a&&l.type.isAnonymous||n(l)!==!1)){if(l.firstChild())continue;u=!0}for(;u&&r&&(a||!l.type.isAnonymous)&&r(l),!l.nextSibling();){if(!l.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:Lk(Ws.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,i)=>new Jr(this.type,n,r,i,this.propValues),e.makeTree||((n,r,i)=>new Jr(Ws.none,n,r,i)))}static build(e){return iee(e)}}Jr.empty=new Jr(Ws.none,[],[],0);class $k{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new $k(this.buffer,this.index)}}class Yf{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return Ws.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],i=this.set.types[n],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let o=[];for(;e<r;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,r,i,s){let{buffer:o}=this,a=-1;for(let l=e;l!=n&&!(S4(s,i,o[l+1],o[l+2])&&(a=l,r>0));l=o[l+3]);return a}slice(e,n,r){let i=this.buffer,s=new Uint16Array(n-e),o=0;for(let a=e,l=0;a<n;){s[l++]=i[a++],s[l++]=i[a++]-r;let u=s[l++]=i[a++]-r;s[l++]=i[a++]-e,o=Math.max(o,u)}return new Yf(s,o,this.set)}}function S4(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function E4(t,e){let n=t.childBefore(e);for(;n;){let r=n.lastChild;if(!r||r.to!=n.to)break;r.type.isError&&r.from==r.to?(t=n,n=r.prevSibling):n=r}return t}function Ad(t,e,n,r){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!r&&t instanceof Wl&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=r?0:mi.IgnoreOverlays;if(r)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof Wl&&o.index<0&&((i=a.enter(e,n,s))===null||i===void 0?void 0:i.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class Wl{constructor(e,n,r,i){this._tree=e,this.from=n,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,i,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,u=n>0?a.length:-1;e!=u;e+=n){let c=a[e],f=l[e]+o.from;if(S4(i,r,f,f+c.length)){if(c instanceof Yf){if(s&mi.ExcludeBuffers)continue;let p=c.findChild(0,c.buffer.length,n,r-f,i);if(p>-1)return new ju(new ree(o,c,e,f),null,p)}else if(s&mi.IncludeAnonymous||!c.type.isAnonymous||Rk(c)){let p;if(!(s&mi.IgnoreMounts)&&c.props&&(p=c.prop(cn.mounted))&&!p.overlay)return new Wl(p.tree,f,e,o);let v=new Wl(c,f,e,o);return s&mi.IncludeAnonymous||!v.type.isAnonymous?v:v.nextChild(n<0?c.children.length-1:0,n,r,i)}}}if(s&mi.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,r=0){let i;if(!(r&mi.IgnoreOverlays)&&(i=this._tree.prop(cn.mounted))&&i.overlay){let s=e-this.from;for(let{from:o,to:a}of i.overlay)if((n>0?o<=s:o<s)&&(n<0?a>=s:a>s))return new Wl(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new yb(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,n=0){return Ad(this,e,n,!1)}resolveInner(e,n=0){return Ad(this,e,n,!0)}enterUnfinishedNodesBefore(e){return E4(this,e)}getChild(e,n=null,r=null){let i=mb(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return mb(this,e,n,r)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return vb(this,e)}}function mb(t,e,n,r){let i=t.cursor(),s=[];if(!i.firstChild())return s;if(n!=null){for(;!i.type.is(n);)if(!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function vb(t,e,n=e.length-1){for(let r=t.parent;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}class ree{constructor(e,n,r,i){this.parent=e,this.buffer=n,this.index=r,this.start=i}}class ju{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,r){this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,n,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.context.start,r);return s<0?null:new ju(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,r=0){if(r&mi.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new ju(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new ju(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new ju(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}cursor(e=0){return new yb(this,e)}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let o=r.buffer[this.index+1];e.push(r.slice(i,s,o)),n.push(0)}return new Jr(this.type,e,n,this.to-this.from)}resolve(e,n=0){return Ad(this,e,n,!1)}resolveInner(e,n=0){return Ad(this,e,n,!0)}enterUnfinishedNodesBefore(e){return E4(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,n=null,r=null){let i=mb(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return mb(this,e,n,r)}get node(){return this}matchContext(e){return vb(this,e)}}class yb{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Wl)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=n||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof Wl?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?r&mi.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&mi.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&mi.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(n.findChild(i,this.index,-1,0,4))}else{let i=n.buffer[this.index+3];if(i<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:r}=i)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let s=n+e,o=e<0?-1:r._tree.children.length;s!=o;s+=e){let a=r._tree.children[s];if(this.mode&mi.IncludeAnonymous||a instanceof Yf||!a.type.isAnonymous||Rk(a))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;n=o,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)n=new ju(this.buffer,n,this.stack[i]);return this.bufferNode=new ju(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;i&&n&&n(this),i=this.type.isAnonymous,!this.nextSibling();){if(!r)return;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return vb(this.node,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return vb(this.node,e,i);let o=r[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}}function Rk(t){return t.children.some(e=>e instanceof Yf||!e.type.isAnonymous||Rk(e))}function iee(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:i=x4,reused:s=[],minRepeatType:o=r.types.length}=t,a=Array.isArray(n)?new $k(n,n.length):n,l=r.types,u=0,c=0;function f(N,x,g,_,M){let{id:D,start:q,end:R,size:W}=a,G=c;for(;W<0;)if(a.next(),W==-1){let Te=s[D];g.push(Te),_.push(q-N);return}else if(W==-3){u=D;return}else if(W==-4){c=D;return}else throw new RangeError(`Unrecognized record size: ${W}`);let Z=l[D],de,be,_e=q-N;if(R-q<=i&&(be=E(a.pos-x,M))){let Te=new Uint16Array(be.size-be.skip),Le=a.pos-be.size,Ee=Te.length;for(;a.pos>Le;)Ee=P(be.start,Te,Ee);de=new Yf(Te,R-be.start,r),_e=be.start-N}else{let Te=a.pos-W;a.next();let Le=[],Ee=[],re=D>=o?D:-1,ne=0,ee=R;for(;a.pos>Te;)re>=0&&a.id==re&&a.size>=0?(a.end<=ee-i&&(v(Le,Ee,q,ne,a.end,ee,re,G),ne=Le.length,ee=a.end),a.next()):f(q,Te,Le,Ee,re);if(re>=0&&ne>0&&ne<Le.length&&v(Le,Ee,q,ne,q,ee,re,G),Le.reverse(),Ee.reverse(),re>-1&&ne>0){let F=p(Z);de=Lk(Z,Le,Ee,0,Le.length,0,R-q,F,F)}else de=b(Z,Le,Ee,R-q,G-R)}g.push(de),_.push(_e)}function p(N){return(x,g,_)=>{let M=0,D=x.length-1,q,R;if(D>=0&&(q=x[D])instanceof Jr){if(!D&&q.type==N&&q.length==_)return q;(R=q.prop(cn.lookAhead))&&(M=g[D]+q.length+R)}return b(N,x,g,_,M)}}function v(N,x,g,_,M,D,q,R){let W=[],G=[];for(;N.length>_;)W.push(N.pop()),G.push(x.pop()+g-M);N.push(b(r.types[q],W,G,D-M,R-D)),x.push(M-g)}function b(N,x,g,_,M=0,D){if(u){let q=[cn.contextHash,u];D=D?[q].concat(D):[q]}if(M>25){let q=[cn.lookAhead,M];D=D?[q].concat(D):[q]}return new Jr(N,x,g,_,D)}function E(N,x){let g=a.fork(),_=0,M=0,D=0,q=g.end-i,R={size:0,start:0,skip:0};e:for(let W=g.pos-N;g.pos>W;){let G=g.size;if(g.id==x&&G>=0){R.size=_,R.start=M,R.skip=D,D+=4,_+=4,g.next();continue}let Z=g.pos-G;if(G<0||Z<W||g.start<q)break;let de=g.id>=o?4:0,be=g.start;for(g.next();g.pos>Z;){if(g.size<0)if(g.size==-3)de+=4;else break e;else g.id>=o&&(de+=4);g.next()}M=be,_+=G,D+=de}return(x<0||_==N)&&(R.size=_,R.start=M,R.skip=D),R.size>4?R:void 0}function P(N,x,g){let{id:_,start:M,end:D,size:q}=a;if(a.next(),q>=0&&_<o){let R=g;if(q>4){let W=a.pos-(q-4);for(;a.pos>W;)g=P(N,x,g)}x[--g]=R,x[--g]=D-N,x[--g]=M-N,x[--g]=_}else q==-3?u=_:q==-4&&(c=_);return g}let S=[],A=[];for(;a.pos>0;)f(t.start||0,t.bufferStart||0,S,A,-1);let I=(e=t.length)!==null&&e!==void 0?e:S.length?A[0]+S[0].length:0;return new Jr(l[t.topID],S.reverse(),A.reverse(),I)}const xN=new WeakMap;function $y(t,e){if(!t.isAnonymous||e instanceof Yf||e.type!=t)return 1;let n=xN.get(e);if(n==null){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof Jr)){n=1;break}n+=$y(t,r)}xN.set(e,n)}return n}function Lk(t,e,n,r,i,s,o,a,l){let u=0;for(let b=r;b<i;b++)u+=$y(t,e[b]);let c=Math.ceil(u*1.5/8),f=[],p=[];function v(b,E,P,S,A){for(let I=P;I<S;){let N=I,x=E[I],g=$y(t,b[I]);for(I++;I<S;I++){let _=$y(t,b[I]);if(g+_>=c)break;g+=_}if(I==N+1){if(g>c){let _=b[N];v(_.children,_.positions,0,_.children.length,E[N]+A);continue}f.push(b[N])}else{let _=E[I-1]+b[I-1].length-x;f.push(Lk(t,b,E,N,I,x,_,null,l))}p.push(x+A-s)}}return v(e,n,r,i,0),(a||l)(f,p,o)}class xf{constructor(e,n,r,i,s=!1,o=!1){this.from=e,this.to=n,this.tree=r,this.offset=i,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],r=!1){let i=[new xf(0,e.length,e,0,!1,r)];for(let s of n)s.to>e.length&&i.push(s);return i}static applyChanges(e,n,r=128){if(!n.length)return e;let i=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,u=0;;a++){let c=a<n.length?n[a]:null,f=c?c.fromA:1e9;if(f-l>=r)for(;o&&o.from<f;){let p=o;if(l>=p.from||f<=p.to||u){let v=Math.max(p.from,l)-u,b=Math.min(p.to,f)-u;p=v>=b?null:new xf(v,b,p.tree,p.offset+u,a>0,!!c)}if(p&&i.push(p),o.to>f)break;o=s<e.length?e[s++]:null}if(!c)break;l=c.toA,u=c.toA-c.toB}return i}}let _4=class{startParse(e,n,r){return typeof e=="string"&&(e=new see(e)),r=r?r.length?r.map(i=>new bS(i.from,i.to)):[new bS(0,0)]:[new bS(0,e.length)],this.createParse(e,n||[],r)}parse(e,n,r){let i=this.startParse(e,n,r);for(;;){let s=i.advance();if(s)return s}}};class see{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new cn({perNode:!0});let oee=0;class Wa{constructor(e,n,r){this.set=e,this.base=n,this.modified=r,this.id=oee++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let n=new Wa([],null,[]);if(n.set.push(n),e)for(let r of e.set)n.set.push(r);return n}static defineModifier(){let e=new bb;return n=>n.modified.indexOf(e)>-1?n:bb.get(n.base||n,n.modified.concat(e).sort((r,i)=>r.id-i.id))}}let aee=0;class bb{constructor(){this.instances=[],this.id=aee++}static get(e,n){if(!n.length)return e;let r=n[0].instances.find(a=>a.base==e&&lee(n,a.modified));if(r)return r;let i=[],s=new Wa(i,e,n);for(let a of n)a.instances.push(s);let o=uee(n);for(let a of e.set)if(!a.modified.length)for(let l of o)i.push(bb.get(a,l));return s}}function lee(t,e){return t.length==e.length&&t.every((n,r)=>n==e[r])}function uee(t){let e=[[]];for(let n=0;n<t.length;n++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(t[n]));return e.sort((n,r)=>r.length-n.length)}function A4(t){let e=Object.create(null);for(let n in t){let r=t[n];Array.isArray(r)||(r=[r]);for(let i of n.split(" "))if(i){let s=[],o=2,a=i;for(let f=0;;){if(a=="..."&&f>0&&f+3==i.length){o=1;break}let p=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!p)throw new RangeError("Invalid path: "+i);if(s.push(p[0]=="*"?"":p[0][0]=='"'?JSON.parse(p[0]):p[0]),f+=p[0].length,f==i.length)break;let v=i[f++];if(f==i.length&&v=="!"){o=0;break}if(v!="/")throw new RangeError("Invalid path: "+i);a=i.slice(f)}let l=s.length-1,u=s[l];if(!u)throw new RangeError("Invalid path: "+i);let c=new wb(r,o,l>0?s.slice(0,l):null);e[u]=c.sort(e[u])}}return k4.add(e)}const k4=new cn;class wb{constructor(e,n,r,i){this.tags=e,this.mode=n,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}wb.empty=new wb([],2,null);function C4(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let o=i;for(let a of s)for(let l of a.set){let u=n[l.id];if(u){o=o?o+" "+u:u;break}}return o},scope:r}}function cee(t,e){let n=null;for(let r of t){let i=r.style(e);i&&(n=n?n+" "+i:i)}return n}function fee(t,e,n,r=0,i=t.length){let s=new hee(r,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),r,i,"",s.highlighters),s.flush(i)}class hee{constructor(e,n,r){this.at=e,this.highlighters=n,this.span=r,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,r,i,s){let{type:o,from:a,to:l}=e;if(a>=r||l<=n)return;o.isTop&&(s=this.highlighters.filter(v=>!v.scope||v.scope(o)));let u=i,c=dee(e)||wb.empty,f=cee(s,c.tags);if(f&&(u&&(u+=" "),u+=f,c.mode==1&&(i+=(i?" ":"")+f)),this.startSpan(e.from,u),c.opaque)return;let p=e.tree&&e.tree.prop(cn.mounted);if(p&&p.overlay){let v=e.node.enter(p.overlay[0].from+a,1),b=this.highlighters.filter(P=>!P.scope||P.scope(p.tree.type)),E=e.firstChild();for(let P=0,S=a;;P++){let A=P<p.overlay.length?p.overlay[P]:null,I=A?A.from+a:l,N=Math.max(n,S),x=Math.min(r,I);if(N<x&&E)for(;e.from<x&&(this.highlightRange(e,N,x,i,s),this.startSpan(Math.min(x,e.to),u),!(e.to>=I||!e.nextSibling())););if(!A||I>r)break;S=A.to+a,S>n&&(this.highlightRange(v.cursor(),Math.max(n,A.from+a),Math.min(r,S),i,b),this.startSpan(S,u))}E&&e.parent()}else if(e.firstChild()){do if(!(e.to<=n)){if(e.from>=r)break;this.highlightRange(e,n,r,i,s),this.startSpan(Math.min(r,e.to),u)}while(e.nextSibling());e.parent()}}}function dee(t){let e=t.type.prop(k4);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const at=Wa.define,$0=at(),Ru=at(),SN=at(Ru),EN=at(Ru),Lu=at(),R0=at(Lu),wS=at(Lu),Ba=at(),Hc=at(Ba),Fa=at(),Va=at(),__=at(),Rp=at(__),L0=at(),ze={comment:$0,lineComment:at($0),blockComment:at($0),docComment:at($0),name:Ru,variableName:at(Ru),typeName:SN,tagName:at(SN),propertyName:EN,attributeName:at(EN),className:at(Ru),labelName:at(Ru),namespace:at(Ru),macroName:at(Ru),literal:Lu,string:R0,docString:at(R0),character:at(R0),attributeValue:at(R0),number:wS,integer:at(wS),float:at(wS),bool:at(Lu),regexp:at(Lu),escape:at(Lu),color:at(Lu),url:at(Lu),keyword:Fa,self:at(Fa),null:at(Fa),atom:at(Fa),unit:at(Fa),modifier:at(Fa),operatorKeyword:at(Fa),controlKeyword:at(Fa),definitionKeyword:at(Fa),moduleKeyword:at(Fa),operator:Va,derefOperator:at(Va),arithmeticOperator:at(Va),logicOperator:at(Va),bitwiseOperator:at(Va),compareOperator:at(Va),updateOperator:at(Va),definitionOperator:at(Va),typeOperator:at(Va),controlOperator:at(Va),punctuation:__,separator:at(__),bracket:Rp,angleBracket:at(Rp),squareBracket:at(Rp),paren:at(Rp),brace:at(Rp),content:Ba,heading:Hc,heading1:at(Hc),heading2:at(Hc),heading3:at(Hc),heading4:at(Hc),heading5:at(Hc),heading6:at(Hc),contentSeparator:at(Ba),list:at(Ba),quote:at(Ba),emphasis:at(Ba),strong:at(Ba),link:at(Ba),monospace:at(Ba),strikethrough:at(Ba),inserted:at(),deleted:at(),changed:at(),invalid:at(),meta:L0,documentMeta:at(L0),annotation:at(L0),processingInstruction:at(L0),definition:Wa.defineModifier(),constant:Wa.defineModifier(),function:Wa.defineModifier(),standard:Wa.defineModifier(),local:Wa.defineModifier(),special:Wa.defineModifier()};C4([{tag:ze.link,class:"tok-link"},{tag:ze.heading,class:"tok-heading"},{tag:ze.emphasis,class:"tok-emphasis"},{tag:ze.strong,class:"tok-strong"},{tag:ze.keyword,class:"tok-keyword"},{tag:ze.atom,class:"tok-atom"},{tag:ze.bool,class:"tok-bool"},{tag:ze.url,class:"tok-url"},{tag:ze.labelName,class:"tok-labelName"},{tag:ze.inserted,class:"tok-inserted"},{tag:ze.deleted,class:"tok-deleted"},{tag:ze.literal,class:"tok-literal"},{tag:ze.string,class:"tok-string"},{tag:ze.number,class:"tok-number"},{tag:[ze.regexp,ze.escape,ze.special(ze.string)],class:"tok-string2"},{tag:ze.variableName,class:"tok-variableName"},{tag:ze.local(ze.variableName),class:"tok-variableName tok-local"},{tag:ze.definition(ze.variableName),class:"tok-variableName tok-definition"},{tag:ze.special(ze.variableName),class:"tok-variableName2"},{tag:ze.definition(ze.propertyName),class:"tok-propertyName tok-definition"},{tag:ze.typeName,class:"tok-typeName"},{tag:ze.namespace,class:"tok-namespace"},{tag:ze.className,class:"tok-className"},{tag:ze.macroName,class:"tok-macroName"},{tag:ze.propertyName,class:"tok-propertyName"},{tag:ze.operator,class:"tok-operator"},{tag:ze.comment,class:"tok-comment"},{tag:ze.meta,class:"tok-meta"},{tag:ze.invalid,class:"tok-invalid"},{tag:ze.punctuation,class:"tok-punctuation"}]);var xS;const zh=new cn;function pee(t){return vt.define({combine:t?e=>e.concat(t):void 0})}const gee=new cn;class va{constructor(e,n,r=[],i=""){this.data=e,this.name=i,un.prototype.hasOwnProperty("tree")||Object.defineProperty(un.prototype,"tree",{get(){return Xr(this)}}),this.parser=n,this.extension=[fc.of(this),un.languageData.of((s,o,a)=>{let l=_N(s,o,a),u=l.type.prop(zh);if(!u)return[];let c=s.facet(u),f=l.type.prop(gee);if(f){let p=l.resolve(o-l.from,a);for(let v of f)if(v.test(p,s)){let b=s.facet(v.facet);return v.type=="replace"?b:b.concat(c)}}return c})].concat(r)}isActiveAt(e,n,r=-1){return _N(e,n,r).type.prop(zh)==this.data}findRegions(e){let n=e.facet(fc);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],i=(s,o)=>{if(s.prop(zh)==this.data){r.push({from:o,to:o+s.length});return}let a=s.prop(cn.mounted);if(a){if(a.tree.prop(zh)==this.data){if(a.overlay)for(let l of a.overlay)r.push({from:l.from+o,to:l.to+o});else r.push({from:o,to:o+s.length});return}else if(a.overlay){let l=r.length;if(i(a.tree,a.overlay[0].from+o),r.length>l)return}}for(let l=0;l<s.children.length;l++){let u=s.children[l];u instanceof Jr&&i(u,s.positions[l]+o)}};return i(Xr(e),0),r}get allowsNesting(){return!0}}va.setState=Kt.define();function _N(t,e,n){let r=t.facet(fc),i=Xr(t).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,n,mi.ExcludeBuffers))s.type.isTop&&(i=s);return i}class xb extends va{constructor(e,n,r){super(e,n,[],r),this.parser=n}static define(e){let n=pee(e.languageData);return new xb(n,e.parser.configure({props:[zh.add(r=>r.isTop?n:void 0)]}),e.name)}configure(e,n){return new xb(this.data,this.parser.configure(e),n||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function Xr(t){let e=t.field(va.state,!1);return e?e.tree:Jr.empty}class mee{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let r=this.cursorPos-this.string.length;return e<r||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-r,n-r)}}let Lp=null;class Sb{constructor(e,n,r=[],i,s,o,a,l){this.parser=e,this.state=n,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,n,r){return new Sb(e,n,[],Jr.empty,0,r,[],null)}startParse(){return this.parser.startParse(new mee(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=Jr.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(xf.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(xf.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Lp;Lp=this;try{return e()}finally{Lp=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=AN(e,n.from,n.to);return e}changes(e,n){let{fragments:r,tree:i,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((u,c,f,p)=>l.push({fromA:u,toA:c,fromB:f,toB:p})),r=xf.applyChanges(r,l),i=Jr.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),f=e.mapPos(u.to,-1);c<f&&a.push({from:c,to:f})}}}return new Sb(this.parser,n,r,i,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=AN(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends _4{createParse(n,r,i){let s=i[0].from,o=i[i.length-1].to;return{parsedPos:s,advance(){let l=Lp;if(l){for(let u of i)l.tempSkipped.push(u);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new Jr(Ws.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Lp}}function AN(t,e,n){return xf.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class kd{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new kd(n)}static init(e){let n=Math.min(3e3,e.doc.length),r=Sb.create(e.facet(fc).parser,e,{from:0,to:n});return r.work(20,n)||r.takeTree(),new kd(r)}}va.state=Zr.define({create:kd.init,update(t,e){for(let n of e.effects)if(n.is(va.setState))return n.value;return e.startState.facet(fc)!=e.state.facet(fc)?kd.init(e.state):t.apply(e)}});let P4=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(P4=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:500-100})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const SS=typeof navigator<"u"&&(!((xS=navigator.scheduling)===null||xS===void 0)&&xS.isInputPending)?()=>navigator.scheduling.isInputPending():null,vee=qr.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(va.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(va.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=P4(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(va.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!SS?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<i&&r.doc.length>i+1e3,l=s.context.work(()=>SS&&SS()||Date.now()>o,i+(a?0:1e5));this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:va.setState.of(new kd(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>mo(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),fc=vt.define({combine(t){return t.length?t[0]:null},enables:t=>[va.state,vee,gt.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class yee{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const bee=vt.define(),jm=vt.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Eb(t){let e=t.facet(jm);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function Kg(t,e){let n="",r=t.tabSize,i=t.facet(jm)[0];if(i=="	"){for(;e>=r;)n+="	",e-=r;i=" "}for(let s=0;s<e;s++)n+=i;return n}function Dk(t,e){t instanceof un&&(t=new j1(t));for(let r of t.state.facet(bee)){let i=r(t,e);if(i!==void 0)return i}let n=Xr(t.state);return n?wee(t,n,e):null}class j1{constructor(e,n={}){this.state=e,this.options=n,this.unit=Eb(e)}lineAt(e,n=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(n<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,n);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.countColumn(r,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(s+=o-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,n=e.length){return Lm(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(i);if(o>-1)return o}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const O4=new cn;function wee(t,e,n){return T4(e.resolveInner(n).enterUnfinishedNodesBefore(n),n,t)}function xee(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function See(t){let e=t.type.prop(O4);if(e)return e;let n=t.firstChild,r;if(n&&(r=n.type.prop(cn.closedBy))){let i=t.lastChild,s=i&&r.indexOf(i.name)>-1;return o=>kee(o,!0,1,void 0,s&&!xee(o)?i.from:void 0)}return t.parent==null?Eee:null}function T4(t,e,n){for(;t;t=t.parent){let r=See(t);if(r)return r(Fk.create(n,e,t))}return null}function Eee(){return 0}class Fk extends j1{constructor(e,n,r){super(e.state,e.options),this.base=e,this.pos=n,this.node=r}static create(e,n,r){return new Fk(e,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(n.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(_ee(r,e))break;n=this.state.doc.lineAt(r.from)}return this.lineIndent(n.from)}continue(){let e=this.node.parent;return e?T4(e,this.pos,this.base):0}}function _ee(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function Aee(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let a=n.to;;){let l=e.childAfter(a);if(!l||l==r)return null;if(!l.type.isSkipped)return l.from<o?n:null;a=l.to}}function kee(t,e,n,r,i){let s=t.textAfter,o=s.match(/^\s*/)[0].length,a=r&&s.slice(o,o+r.length)==r||i==t.pos+o,l=e?Aee(t):null;return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}function kN({except:t,units:e=1}={}){return n=>{let r=t&&t.test(n.textAfter);return n.baseIndent+(r?0:e*n.unit)}}const Cee=200;function Pee(){return un.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:r}=t.newSelection.main,i=n.lineAt(r);if(r>i.from+Cee)return t;let s=n.sliceString(i.from,r);if(!e.some(u=>u.test(s)))return t;let{state:o}=t,a=-1,l=[];for(let{head:u}of o.selection.ranges){let c=o.doc.lineAt(u);if(c.from==a)continue;a=c.from;let f=Dk(o,c.from);if(f==null)continue;let p=/^\s*/.exec(c.text)[0],v=Kg(o,f);p!=v&&l.push({from:c.from,to:c.from+p.length,insert:v})}return l.length?[t,{changes:l,sequential:!0}]:t})}const Oee=vt.define(),M4=new cn;function Tee(t){let e=t.firstChild,n=t.lastChild;return e&&e.to<n.from?{from:e.to,to:n.type.isError?t.to:n.from}:null}function Mee(t,e,n){let r=Xr(t);if(r.length<n)return null;let i=r.resolveInner(n,1),s=null;for(let o=i;o;o=o.parent){if(o.to<=n||o.from>n)continue;if(s&&o.from<e)break;let a=o.type.prop(M4);if(a&&(o.to<r.length-50||r.length==t.doc.length||!Nee(o))){let l=a(o,t);l&&l.from<=n&&l.from>=e&&l.to>n&&(s=l)}}return s}function Nee(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function _b(t,e,n){for(let r of t.facet(Oee)){let i=r(t,e,n);if(i)return i}return Mee(t,e,n)}function N4(t,e){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return n>=r?void 0:{from:n,to:r}}const z1=Kt.define({map:N4}),zm=Kt.define({map:N4});function I4(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(r=>r.from<=n&&r.to>=n)||e.push(t.lineBlockAt(n));return e}const Lf=Zr.define({create(){return Rt.none},update(t,e){t=t.map(e.changes);for(let n of e.effects)n.is(z1)&&!Iee(t,n.value.from,n.value.to)?t=t.update({add:[CN.range(n.value.from,n.value.to)]}):n.is(zm)&&(t=t.update({filter:(r,i)=>n.value.from!=r||n.value.to!=i,filterFrom:n.value.from,filterTo:n.value.to}));if(e.selection){let n=!1,{head:r}=e.selection.main;t.between(r,r,(i,s)=>{i<r&&s>r&&(n=!0)}),n&&(t=t.update({filterFrom:r,filterTo:r,filter:(i,s)=>s<=r||i>=r}))}return t},provide:t=>gt.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(r,i)=>{n.push(r,i)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let r=t[n++],i=t[n++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(CN.range(r,i))}return Rt.set(e,!0)}});function Ab(t,e,n){var r;let i=null;return(r=t.field(Lf,!1))===null||r===void 0||r.between(e,n,(s,o)=>{(!i||i.from>s)&&(i={from:s,to:o})}),i}function Iee(t,e,n){let r=!1;return t.between(e,e,(i,s)=>{i==e&&s==n&&(r=!0)}),r}function $4(t,e){return t.field(Lf,!1)?e:e.concat(Kt.appendConfig.of(D4()))}const $ee=t=>{for(let e of I4(t)){let n=_b(t.state,e.from,e.to);if(n)return t.dispatch({effects:$4(t.state,[z1.of(n),R4(t,n)])}),!0}return!1},Ree=t=>{if(!t.state.field(Lf,!1))return!1;let e=[];for(let n of I4(t)){let r=Ab(t.state,n.from,n.to);r&&e.push(zm.of(r),R4(t,r,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function R4(t,e,n=!0){let r=t.state.doc.lineAt(e.from).number,i=t.state.doc.lineAt(e.to).number;return gt.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${r} ${t.state.phrase("to")} ${i}.`)}const Lee=t=>{let{state:e}=t,n=[];for(let r=0;r<e.doc.length;){let i=t.lineBlockAt(r),s=_b(e,i.from,i.to);s&&n.push(z1.of(s)),r=(s?t.lineBlockAt(s.to):i).to+1}return n.length&&t.dispatch({effects:$4(t.state,n)}),!!n.length},Dee=t=>{let e=t.state.field(Lf,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(r,i)=>{n.push(zm.of({from:r,to:i}))}),t.dispatch({effects:n}),!0},Fee=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:$ee},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:Ree},{key:"Ctrl-Alt-[",run:Lee},{key:"Ctrl-Alt-]",run:Dee}],Vee={placeholderDOM:null,placeholderText:""},L4=vt.define({combine(t){return _a(t,Vee)}});function D4(t){let e=[Lf,zee];return t&&e.push(L4.of(t)),e}const CN=Rt.replace({widget:new class extends ou{toDOM(t){let{state:e}=t,n=e.facet(L4),r=s=>{let o=t.lineBlockAt(t.posAtDOM(s.target)),a=Ab(t.state,o.from,o.to);a&&t.dispatch({effects:zm.of(a)}),s.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(t,r);let i=document.createElement("span");return i.textContent=n.placeholderText,i.setAttribute("aria-label",e.phrase("folded code")),i.title=e.phrase("unfold"),i.className="cm-foldPlaceholder",i.onclick=r,i}}}),Bee={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class ES extends ll{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}}function jee(t={}){let e=Object.assign(Object.assign({},Bee),t),n=new ES(e,!0),r=new ES(e,!1),i=qr.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(fc)!=o.state.facet(fc)||o.startState.field(Lf,!1)!=o.state.field(Lf,!1)||Xr(o.startState)!=Xr(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let a=new oc;for(let l of o.viewportLineBlocks){let u=Ab(o.state,l.from,l.to)?r:_b(o.state,l.from,l.to)?n:null;u&&a.add(l.from,l.from,u)}return a.finish()}}),{domEventHandlers:s}=e;return[i,B1({class:"cm-foldGutter",markers(o){var a;return((a=o.plugin(i))===null||a===void 0?void 0:a.markers)||Vn.empty},initialSpacer(){return new ES(e,!1)},domEventHandlers:Object.assign(Object.assign({},s),{click:(o,a,l)=>{if(s.click&&s.click(o,a,l))return!0;let u=Ab(o.state,a.from,a.to);if(u)return o.dispatch({effects:zm.of(u)}),!0;let c=_b(o.state,a.from,a.to);return c?(o.dispatch({effects:z1.of(c)}),!0):!1}})}),D4()]}const zee=gt.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Hm{constructor(e,n){this.specs=e;let r;function i(a){let l=ac.newName();return(r||(r=Object.create(null)))["."+l]=a,l}const s=typeof n.all=="string"?n.all:n.all?i(n.all):void 0,o=n.scope;this.scope=o instanceof va?a=>a.prop(zh)==o.data:o?a=>a==o:void 0,this.style=C4(e.map(a=>({tag:a.tag,class:a.class||i(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=r?new ac(r):null,this.themeType=n.themeType}static define(e,n){return new Hm(e,n||{})}}const A_=vt.define(),F4=vt.define({combine(t){return t.length?[t[0]]:null}});function _S(t){let e=t.facet(A_);return e.length?e:t.facet(F4)}function Vk(t,e){let n=[Uee],r;return t instanceof Hm&&(t.module&&n.push(gt.styleModule.of(t.module)),r=t.themeType),e!=null&&e.fallback?n.push(F4.of(t)):r?n.push(A_.computeN([gt.darkTheme],i=>i.facet(gt.darkTheme)==(r=="dark")?[t]:[])):n.push(A_.of(t)),n}class Hee{constructor(e){this.markCache=Object.create(null),this.tree=Xr(e.state),this.decorations=this.buildDeco(e,_S(e.state))}update(e){let n=Xr(e.state),r=_S(e.state),i=r!=_S(e.startState);n.length<e.view.viewport.to&&!i&&n.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(n!=this.tree||e.viewportChanged||i)&&(this.tree=n,this.decorations=this.buildDeco(e.view,r))}buildDeco(e,n){if(!n||!this.tree.length)return Rt.none;let r=new oc;for(let{from:i,to:s}of e.visibleRanges)fee(this.tree,n,(o,a,l)=>{r.add(o,a,this.markCache[l]||(this.markCache[l]=Rt.mark({class:l})))},i,s);return r.finish()}}const Uee=Kf.high(qr.fromClass(Hee,{decorations:t=>t.decorations})),qee=Hm.define([{tag:ze.meta,color:"#404740"},{tag:ze.link,textDecoration:"underline"},{tag:ze.heading,textDecoration:"underline",fontWeight:"bold"},{tag:ze.emphasis,fontStyle:"italic"},{tag:ze.strong,fontWeight:"bold"},{tag:ze.strikethrough,textDecoration:"line-through"},{tag:ze.keyword,color:"#708"},{tag:[ze.atom,ze.bool,ze.url,ze.contentSeparator,ze.labelName],color:"#219"},{tag:[ze.literal,ze.inserted],color:"#164"},{tag:[ze.string,ze.deleted],color:"#a11"},{tag:[ze.regexp,ze.escape,ze.special(ze.string)],color:"#e40"},{tag:ze.definition(ze.variableName),color:"#00f"},{tag:ze.local(ze.variableName),color:"#30a"},{tag:[ze.typeName,ze.namespace],color:"#085"},{tag:ze.className,color:"#167"},{tag:[ze.special(ze.variableName),ze.macroName],color:"#256"},{tag:ze.definition(ze.propertyName),color:"#00c"},{tag:ze.comment,color:"#940"},{tag:ze.invalid,color:"#f00"}]),Wee=gt.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),V4=1e4,B4="()[]{}",j4=vt.define({combine(t){return _a(t,{afterCursor:!0,brackets:B4,maxScanDistance:V4,renderMatch:Yee})}}),Gee=Rt.mark({class:"cm-matchingBracket"}),Kee=Rt.mark({class:"cm-nonmatchingBracket"});function Yee(t){let e=[],n=t.matched?Gee:Kee;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const Jee=Zr.define({create(){return Rt.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],r=e.state.facet(j4);for(let i of e.state.selection.ranges){if(!i.empty)continue;let s=Za(e.state,i.head,-1,r)||i.head>0&&Za(e.state,i.head-1,1,r)||r.afterCursor&&(Za(e.state,i.head,1,r)||i.head<e.state.doc.length&&Za(e.state,i.head+1,-1,r));s&&(n=n.concat(r.renderMatch(s,e.state)))}return Rt.set(n,!0)},provide:t=>gt.decorations.from(t)}),Xee=[Jee,Wee];function Bk(t={}){return[j4.of(t),Xee]}const Zee=new cn;function k_(t,e,n){let r=t.prop(e<0?cn.openedBy:cn.closedBy);if(r)return r;if(t.name.length==1){let i=n.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[n[i+e]]}return null}function C_(t){let e=t.type.prop(Zee);return e?e(t.node):t}function Za(t,e,n,r={}){let i=r.maxScanDistance||V4,s=r.brackets||B4,o=Xr(t),a=o.resolveInner(e,n);for(let l=a;l;l=l.parent){let u=k_(l.type,n,s);if(u&&l.from<l.to){let c=C_(l);if(c&&(n>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return Qee(t,e,n,l,c,u,s)}}return ete(t,e,n,o,a.type,i,s)}function Qee(t,e,n,r,i,s,o){let a=r.parent,l={from:i.from,to:i.to},u=0,c=a==null?void 0:a.cursor();if(c&&(n<0?c.childBefore(r.from):c.childAfter(r.to)))do if(n<0?c.to<=r.from:c.from>=r.to){if(u==0&&s.indexOf(c.type.name)>-1&&c.from<c.to){let f=C_(c);return{start:l,end:f?{from:f.from,to:f.to}:void 0,matched:!0}}else if(k_(c.type,n,o))u++;else if(k_(c.type,-n,o)){if(u==0){let f=C_(c);return{start:l,end:f&&f.from<f.to?{from:f.from,to:f.to}:void 0,matched:!1}}u--}}while(n<0?c.prevSibling():c.nextSibling());return{start:l,matched:!1}}function ete(t,e,n,r,i,s,o){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=n>0)return null;let u={from:n<0?e-1:e,to:n>0?e+1:e},c=t.doc.iterRange(e,n>0?t.doc.length:0),f=0;for(let p=0;!c.next().done&&p<=s;){let v=c.value;n<0&&(p+=v.length);let b=e+p*n;for(let E=n>0?0:v.length-1,P=n>0?v.length:-1;E!=P;E+=n){let S=o.indexOf(v[E]);if(!(S<0||r.resolveInner(b+E,1).type!=i))if(S%2==0==n>0)f++;else{if(f==1)return{start:u,end:{from:b+E,to:b+E+1},matched:S>>1==l>>1};f--}}n>0&&(p+=v.length)}return c.done?{start:u,matched:!1}:null}const tte=Object.create(null),PN=[Ws.none],ON=[],nte=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])nte[t]=rte(tte,e);function AS(t,e){ON.indexOf(t)>-1||(ON.push(t),console.warn(e))}function rte(t,e){let n=null;for(let s of e.split(".")){let o=t[s]||ze[s];o?typeof o=="function"?n?n=o(n):AS(s,`Modifier ${s} used at start of tag`):n?AS(s,`Tag ${s} used as modifier`):n=o:AS(s,`Unknown highlighting tag ${s}`)}if(!n)return 0;let r=e.replace(/ /g,"_"),i=Ws.define({id:PN.length,name:r,props:[A4({[r]:n})]});return PN.push(i),i.id}const ite=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),r=zk(t.state,n.from);return r.line?ste(t):r.block?ate(t):!1};function jk(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=t(e,n);return i?(r(n.update(i)),!0):!1}}const ste=jk(cte,0),ote=jk(z4,0),ate=jk((t,e)=>z4(t,e,ute(e)),0);function zk(t,e){let n=t.languageDataAt("commentTokens",e);return n.length?n[0]:{}}const Dp=50;function lte(t,{open:e,close:n},r,i){let s=t.sliceDoc(r-Dp,r),o=t.sliceDoc(i,i+Dp),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,u=s.length-a;if(s.slice(u-e.length,u)==e&&o.slice(l,l+n.length)==n)return{open:{pos:r-a,margin:a&&1},close:{pos:i+l,margin:l&&1}};let c,f;i-r<=2*Dp?c=f=t.sliceDoc(r,i):(c=t.sliceDoc(r,r+Dp),f=t.sliceDoc(i-Dp,i));let p=/^\s*/.exec(c)[0].length,v=/\s*$/.exec(f)[0].length,b=f.length-v-n.length;return c.slice(p,p+e.length)==e&&f.slice(b,b+n.length)==n?{open:{pos:r+p+e.length,margin:/\s/.test(c.charAt(p+e.length))?1:0},close:{pos:i-v-n.length,margin:/\s/.test(f.charAt(b-1))?1:0}}:null}function ute(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),i=n.to<=r.to?r:t.doc.lineAt(n.to),s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function z4(t,e,n=e.selection.ranges){let r=n.map(s=>zk(e,s.from).block);if(!r.every(s=>s))return null;let i=n.map((s,o)=>lte(e,r[o],s.from,s.to));if(t!=2&&!i.every(s=>s))return{changes:e.changes(n.map((s,o)=>i[o]?[]:[{from:s.from,insert:r[o].open+" "},{from:s.to,insert:" "+r[o].close}]))};if(t!=1&&i.some(s=>s)){let s=[];for(let o=0,a;o<i.length;o++)if(a=i[o]){let l=r[o],{open:u,close:c}=a;s.push({from:u.pos-l.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+l.close.length})}return{changes:s}}return null}function cte(t,e,n=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:o}of n){let a=r.length,l=1e9,u=zk(e,s).line;if(u){for(let c=s;c<=o;){let f=e.doc.lineAt(c);if(f.from>i&&(s==o||o>f.from)){i=f.from;let p=/^\s*/.exec(f.text)[0].length,v=p==f.length,b=f.text.slice(p,p+u.length)==u?p:-1;p<f.text.length&&p<l&&(l=p),r.push({line:f,comment:b,token:u,indent:p,empty:v,single:!1})}c=f.to+1}if(l<1e9)for(let c=a;c<r.length;c++)r[c].indent<r[c].line.text.length&&(r[c].indent=l);r.length==a+1&&(r[a].single=!0)}}if(t!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:u,empty:c,single:f}of r)(f||!c)&&s.push({from:a.from+u,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of r)if(a>=0){let u=o.from+a,c=u+l.length;o.text[c-o.from]==" "&&c++,s.push({from:u,to:c})}return{changes:s}}return null}const P_=su.define(),fte=su.define(),hte=vt.define(),H4=vt.define({combine(t){return _a(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(r,i)=>e(r,i)||n(r,i)})}});function dte(t){let e=0;return t.iterChangedRanges((n,r)=>e=r),e}const U4=Zr.define({create(){return Qa.empty},update(t,e){let n=e.state.facet(H4),r=e.annotation(P_);if(r){let l=e.docChanged?Ke.single(dte(e.changes)):void 0,u=Bs.fromTransaction(e,l),c=r.side,f=c==0?t.undone:t.done;return u?f=kb(f,f.length,n.minDepth,u):f=G4(f,e.startState.selection),new Qa(c==0?r.rest:f,c==0?f:r.rest)}let i=e.annotation(fte);if((i=="full"||i=="before")&&(t=t.isolate()),e.annotation(ai.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=Bs.fromTransaction(e),o=e.annotation(ai.time),a=e.annotation(ai.userEvent);return s?t=t.addChanges(s,o,a,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,n.newGroupDelay)),(i=="full"||i=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new Qa(t.done.map(Bs.fromJSON),t.undone.map(Bs.fromJSON))}});function Hk(t={}){return[U4,H4.of(t),gt.domEventHandlers({beforeinput(e,n){let r=e.inputType=="historyUndo"?q4:e.inputType=="historyRedo"?O_:null;return r?(e.preventDefault(),r(n)):!1}})]}function H1(t,e){return function({state:n,dispatch:r}){if(!e&&n.readOnly)return!1;let i=n.field(U4,!1);if(!i)return!1;let s=i.pop(t,n,e);return s?(r(s),!0):!1}}const q4=H1(0,!1),O_=H1(1,!1),pte=H1(0,!0),gte=H1(1,!0);class Bs{constructor(e,n,r,i,s){this.changes=e,this.effects=n,this.mapped=r,this.startSelection=i,this.selectionsAfter=s}setSelAfter(e){return new Bs(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new Bs(e.changes&&ii.fromJSON(e.changes),[],e.mapped&&nl.fromJSON(e.mapped),e.startSelection&&Ke.fromJSON(e.startSelection),e.selectionsAfter.map(Ke.fromJSON))}static fromTransaction(e,n){let r=Ho;for(let i of e.startState.facet(hte)){let s=i(e);s.length&&(r=r.concat(s))}return!r.length&&e.changes.empty?null:new Bs(e.changes.invert(e.startState.doc),r,void 0,n||e.startState.selection,Ho)}static selection(e){return new Bs(void 0,Ho,void 0,void 0,e)}}function kb(t,e,n,r){let i=e+1>n+20?e-n-1:0,s=t.slice(i,e);return s.push(r),s}function mte(t,e){let n=[],r=!1;return t.iterChangedRanges((i,s)=>n.push(i,s)),e.iterChangedRanges((i,s,o,a)=>{for(let l=0;l<n.length;){let u=n[l++],c=n[l++];a>=u&&o<=c&&(r=!0)}}),r}function vte(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,r)=>n.empty!=e.ranges[r].empty).length===0}function W4(t,e){return t.length?e.length?t.concat(e):t:e}const Ho=[],yte=200;function G4(t,e){if(t.length){let n=t[t.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-yte));return r.length&&r[r.length-1].eq(e)?t:(r.push(e),kb(t,t.length-1,1e9,n.setSelAfter(r)))}else return[Bs.selection([e])]}function bte(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function kS(t,e){if(!t.length)return t;let n=t.length,r=Ho;for(;n;){let i=wte(t[n-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let s=t.slice(0,n);return s[n-1]=i,s}else e=i.mapped,n--,r=i.selectionsAfter}return r.length?[Bs.selection(r)]:Ho}function wte(t,e,n){let r=W4(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):Ho,n);if(!t.changes)return Bs.selection(r);let i=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new Bs(i,Kt.mapEffects(t.effects,e),o,t.startSelection.map(s),r)}const xte=/^(input\.type|delete)($|\.)/;class Qa{constructor(e,n,r=0,i=void 0){this.done=e,this.undone=n,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new Qa(this.done,this.undone):this}addChanges(e,n,r,i,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!r||xte.test(r))&&(!a.selectionsAfter.length&&n-this.prevTime<i.newGroupDelay&&i.joinToEvent(s,mte(a.changes,e.changes))||r=="input.type.compose")?o=kb(o,o.length-1,i.minDepth,new Bs(e.changes.compose(a.changes),W4(e.effects,a.effects),a.mapped,a.startSelection,Ho)):o=kb(o,o.length,i.minDepth,e),new Qa(o,Ho,n,r)}addSelection(e,n,r,i){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:Ho;return s.length>0&&n-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&vte(s[s.length-1],e)?this:new Qa(G4(this.done,e),this.undone,n,r)}addMapping(e){return new Qa(kS(this.done,e),kS(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let s=i[i.length-1];if(r&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:P_.of({side:e,rest:bte(i)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let o=i.length==1?Ho:i.slice(0,i.length-1);return s.mapped&&(o=kS(o,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:P_.of({side:e,rest:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Qa.empty=new Qa(Ho,Ho);const Ste=[{key:"Mod-z",run:q4,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:O_,preventDefault:!0},{linux:"Ctrl-Shift-z",run:O_,preventDefault:!0},{key:"Mod-u",run:pte,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:gte,preventDefault:!0}];function Ud(t,e){return Ke.create(t.ranges.map(e),t.mainIndex)}function fl(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Aa({state:t,dispatch:e},n){let r=Ud(t.selection,n);return r.eq(t.selection)?!1:(e(fl(t,r)),!0)}function U1(t,e){return Ke.cursor(e?t.to:t.from)}function K4(t,e){return Aa(t,n=>n.empty?t.moveByChar(n,e):U1(n,e))}function Ji(t){return t.textDirectionAt(t.state.selection.main.head)==Cr.LTR}const Y4=t=>K4(t,!Ji(t)),J4=t=>K4(t,Ji(t));function X4(t,e){return Aa(t,n=>n.empty?t.moveByGroup(n,e):U1(n,e))}const Ete=t=>X4(t,!Ji(t)),_te=t=>X4(t,Ji(t));function Ate(t,e,n){if(e.type.prop(n))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function q1(t,e,n){let r=Xr(t).resolveInner(e.head),i=n?cn.closedBy:cn.openedBy;for(let l=e.head;;){let u=n?r.childAfter(l):r.childBefore(l);if(!u)break;Ate(t,u,i)?r=u:l=n?u.to:u.from}let s=r.type.prop(i),o,a;return s&&(o=n?Za(t,r.from,1):Za(t,r.to,-1))&&o.matched?a=n?o.end.to:o.end.from:a=n?r.to:r.from,Ke.cursor(a,n?-1:1)}const kte=t=>Aa(t,e=>q1(t.state,e,!Ji(t))),Cte=t=>Aa(t,e=>q1(t.state,e,Ji(t)));function Z4(t,e){return Aa(t,n=>{if(!n.empty)return U1(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)})}const Q4=t=>Z4(t,!1),eF=t=>Z4(t,!0);function tF(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,r=0,i;if(e){for(let s of t.state.facet(gt.scrollMargins)){let o=s(t);o!=null&&o.top&&(n=Math.max(o==null?void 0:o.top,n)),o!=null&&o.bottom&&(r=Math.max(o==null?void 0:o.bottom,r))}i=t.scrollDOM.clientHeight-n-r}else i=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:e,height:Math.max(t.defaultLineHeight,i-5)}}function nF(t,e){let n=tF(t),{state:r}=t,i=Ud(r.selection,o=>o.empty?t.moveVertically(o,e,n.height):U1(o,e));if(i.eq(r.selection))return!1;let s;if(n.selfScroll){let o=t.coordsAtPos(r.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),l=a.top+n.marginTop,u=a.bottom-n.marginBottom;o&&o.top>l&&o.bottom<u&&(s=gt.scrollIntoView(i.main.head,{y:"start",yMargin:o.top-l}))}return t.dispatch(fl(r,i),{effects:s}),!0}const TN=t=>nF(t,!1),T_=t=>nF(t,!0);function pc(t,e,n){let r=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==r.from&&r.length){let s=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=Ke.cursor(r.from+s))}return i}const Pte=t=>Aa(t,e=>pc(t,e,!0)),Ote=t=>Aa(t,e=>pc(t,e,!1)),Tte=t=>Aa(t,e=>pc(t,e,!Ji(t))),Mte=t=>Aa(t,e=>pc(t,e,Ji(t))),Nte=t=>Aa(t,e=>Ke.cursor(t.lineBlockAt(e.head).from,1)),Ite=t=>Aa(t,e=>Ke.cursor(t.lineBlockAt(e.head).to,-1));function $te(t,e,n){let r=!1,i=Ud(t.selection,s=>{let o=Za(t,s.head,-1)||Za(t,s.head,1)||s.head>0&&Za(t,s.head-1,1)||s.head<t.doc.length&&Za(t,s.head+1,-1);if(!o||!o.end)return s;r=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return n?Ke.range(s.anchor,a):Ke.cursor(a)});return r?(e(fl(t,i)),!0):!1}const Rte=({state:t,dispatch:e})=>$te(t,e,!1);function Yo(t,e){let n=Ud(t.state.selection,r=>{let i=e(r);return Ke.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(fl(t.state,n)),!0)}function rF(t,e){return Yo(t,n=>t.moveByChar(n,e))}const iF=t=>rF(t,!Ji(t)),sF=t=>rF(t,Ji(t));function oF(t,e){return Yo(t,n=>t.moveByGroup(n,e))}const Lte=t=>oF(t,!Ji(t)),Dte=t=>oF(t,Ji(t)),Fte=t=>Yo(t,e=>q1(t.state,e,!Ji(t))),Vte=t=>Yo(t,e=>q1(t.state,e,Ji(t)));function aF(t,e){return Yo(t,n=>t.moveVertically(n,e))}const lF=t=>aF(t,!1),uF=t=>aF(t,!0);function cF(t,e){return Yo(t,n=>t.moveVertically(n,e,tF(t).height))}const MN=t=>cF(t,!1),NN=t=>cF(t,!0),Bte=t=>Yo(t,e=>pc(t,e,!0)),jte=t=>Yo(t,e=>pc(t,e,!1)),zte=t=>Yo(t,e=>pc(t,e,!Ji(t))),Hte=t=>Yo(t,e=>pc(t,e,Ji(t))),Ute=t=>Yo(t,e=>Ke.cursor(t.lineBlockAt(e.head).from)),qte=t=>Yo(t,e=>Ke.cursor(t.lineBlockAt(e.head).to)),IN=({state:t,dispatch:e})=>(e(fl(t,{anchor:0})),!0),$N=({state:t,dispatch:e})=>(e(fl(t,{anchor:t.doc.length})),!0),RN=({state:t,dispatch:e})=>(e(fl(t,{anchor:t.selection.main.anchor,head:0})),!0),LN=({state:t,dispatch:e})=>(e(fl(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),Wte=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),Gte=({state:t,dispatch:e})=>{let n=G1(t).map(({from:r,to:i})=>Ke.range(r,Math.min(i+1,t.doc.length)));return e(t.update({selection:Ke.create(n),userEvent:"select"})),!0},Kte=({state:t,dispatch:e})=>{let n=Ud(t.selection,r=>{var i;let s=Xr(t).resolveInner(r.head,1);for(;!(s.from<r.from&&s.to>=r.to||s.to>r.to&&s.from<=r.from||!(!((i=s.parent)===null||i===void 0)&&i.parent));)s=s.parent;return Ke.range(s.to,s.from)});return e(fl(t,n)),!0},Yte=({state:t,dispatch:e})=>{let n=t.selection,r=null;return n.ranges.length>1?r=Ke.create([n.main]):n.main.empty||(r=Ke.create([Ke.cursor(n.main.head)])),r?(e(fl(t,r)),!0):!1};function W1(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:r}=t,i=r.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(o);l<o?(n="delete.backward",l=D0(t,l,!1)):l>o&&(n="delete.forward",l=D0(t,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=D0(t,o,!1),a=D0(t,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:Ke.cursor(o)}});return i.changes.empty?!1:(t.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?gt.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function D0(t,e,n){if(t instanceof gt)for(let r of t.state.facet(gt.atomicRanges).map(i=>i(t)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=n?s:i)});return e}const fF=(t,e)=>W1(t,n=>{let{state:r}=t,i=r.doc.lineAt(n),s,o;if(!e&&n>i.from&&n<i.from+200&&!/[^ \t]/.test(s=i.text.slice(0,n-i.from))){if(s[s.length-1]=="	")return n-1;let a=Lm(s,r.tabSize),l=a%Eb(r)||Eb(r);for(let u=0;u<l&&s[s.length-1-u]==" ";u++)n--;o=n}else o=Wi(i.text,n-i.from,e,e)+i.from,o==n&&i.number!=(e?r.doc.lines:1)&&(o+=e?1:-1);return o}),M_=t=>fF(t,!1),hF=t=>fF(t,!0),dF=(t,e)=>W1(t,n=>{let r=n,{state:i}=t,s=i.doc.lineAt(r),o=i.charCategorizer(r);for(let a=null;;){if(r==(e?s.to:s.from)){r==n&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let l=Wi(s.text,r-s.from,e)+s.from,u=s.text.slice(Math.min(r,l)-s.from,Math.max(r,l)-s.from),c=o(u);if(a!=null&&c!=a)break;(u!=" "||r!=n)&&(a=c),r=l}return r}),pF=t=>dF(t,!1),Jte=t=>dF(t,!0),gF=t=>W1(t,e=>{let n=t.lineBlockAt(e).to;return e<n?n:Math.min(t.state.doc.length,e+1)}),Xte=t=>W1(t,e=>{let n=t.lineBlockAt(e).from;return e>n?n:Math.max(0,e-1)}),Zte=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:Dn.of(["",""])},range:Ke.cursor(r.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},Qte=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let i=r.from,s=t.doc.lineAt(i),o=i==s.from?i-1:Wi(s.text,i-s.from,!1)+s.from,a=i==s.to?i+1:Wi(s.text,i-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:t.doc.slice(i,a).append(t.doc.slice(o,i))},range:Ke.cursor(a)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function G1(t){let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.from),s=t.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=t.doc.lineAt(r.to-1)),n>=i.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});n=s.number+1}return e}function mF(t,e,n){if(t.readOnly)return!1;let r=[],i=[];for(let s of G1(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),a=o.length+1;if(n){r.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let l of s.ranges)i.push(Ke.range(Math.min(t.doc.length,l.anchor+a),Math.min(t.doc.length,l.head+a)))}else{r.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let l of s.ranges)i.push(Ke.range(l.anchor-a,l.head-a))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:Ke.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const ene=({state:t,dispatch:e})=>mF(t,e,!1),tne=({state:t,dispatch:e})=>mF(t,e,!0);function vF(t,e,n){if(t.readOnly)return!1;let r=[];for(let i of G1(t))n?r.push({from:i.from,insert:t.doc.slice(i.from,i.to)+t.lineBreak}):r.push({from:i.to,insert:t.lineBreak+t.doc.slice(i.from,i.to)});return e(t.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const nne=({state:t,dispatch:e})=>vF(t,e,!1),rne=({state:t,dispatch:e})=>vF(t,e,!0),ine=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(G1(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=Ud(e.selection,i=>t.moveVertically(i,!0)).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function sne(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=Xr(t).resolveInner(e),r=n.childBefore(e),i=n.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(cn.closedBy))&&s.indexOf(i.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(i.from).from?{from:r.to,to:i.from}:null}const one=yF(!1),ane=yF(!0);function yF(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:o}=i,a=e.doc.lineAt(s),l=!t&&s==o&&sne(e,s);t&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let u=new j1(e,{simulateBreak:s,simulateDoubleBreak:!!l}),c=Dk(u,s);for(c==null&&(c=/^\s*/.exec(e.doc.lineAt(s).text)[0].length);o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let f=["",Kg(e,c)];return l&&f.push(Kg(e,u.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:Dn.of(f)},range:Ke.cursor(s+1+f[1].length)}});return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function Uk(t,e){let n=-1;return t.changeByRange(r=>{let i=[];for(let o=r.from;o<=r.to;){let a=t.doc.lineAt(o);a.number>n&&(r.empty||r.to>a.from)&&(e(a,i,r),n=a.number),o=a.to+1}let s=t.changes(i);return{changes:i,range:Ke.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const lne=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),r=new j1(t,{overrideIndentation:s=>{let o=n[s];return o??-1}}),i=Uk(t,(s,o,a)=>{let l=Dk(r,s.from);if(l==null)return;/\S/.test(s.text)||(l=0);let u=/^\s*/.exec(s.text)[0],c=Kg(t,l);(u!=c||a.from<s.from+u.length)&&(n[s.from]=l,o.push({from:s.from,to:s.from+u.length,insert:c}))});return i.changes.empty||e(t.update(i,{userEvent:"indent"})),!0},bF=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Uk(t,(n,r)=>{r.push({from:n.from,insert:t.facet(jm)})}),{userEvent:"input.indent"})),!0),wF=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Uk(t,(n,r)=>{let i=/^\s*/.exec(n.text)[0];if(!i)return;let s=Lm(i,t.tabSize),o=0,a=Kg(t,Math.max(0,s-Eb(t)));for(;o<i.length&&o<a.length&&i.charCodeAt(o)==a.charCodeAt(o);)o++;r.push({from:n.from+o,to:n.from+i.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),une=[{key:"Ctrl-b",run:Y4,shift:iF,preventDefault:!0},{key:"Ctrl-f",run:J4,shift:sF},{key:"Ctrl-p",run:Q4,shift:lF},{key:"Ctrl-n",run:eF,shift:uF},{key:"Ctrl-a",run:Nte,shift:Ute},{key:"Ctrl-e",run:Ite,shift:qte},{key:"Ctrl-d",run:hF},{key:"Ctrl-h",run:M_},{key:"Ctrl-k",run:gF},{key:"Ctrl-Alt-h",run:pF},{key:"Ctrl-o",run:Zte},{key:"Ctrl-t",run:Qte},{key:"Ctrl-v",run:T_}],cne=[{key:"ArrowLeft",run:Y4,shift:iF,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Ete,shift:Lte,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:Tte,shift:zte,preventDefault:!0},{key:"ArrowRight",run:J4,shift:sF,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:_te,shift:Dte,preventDefault:!0},{mac:"Cmd-ArrowRight",run:Mte,shift:Hte,preventDefault:!0},{key:"ArrowUp",run:Q4,shift:lF,preventDefault:!0},{mac:"Cmd-ArrowUp",run:IN,shift:RN},{mac:"Ctrl-ArrowUp",run:TN,shift:MN},{key:"ArrowDown",run:eF,shift:uF,preventDefault:!0},{mac:"Cmd-ArrowDown",run:$N,shift:LN},{mac:"Ctrl-ArrowDown",run:T_,shift:NN},{key:"PageUp",run:TN,shift:MN},{key:"PageDown",run:T_,shift:NN},{key:"Home",run:Ote,shift:jte,preventDefault:!0},{key:"Mod-Home",run:IN,shift:RN},{key:"End",run:Pte,shift:Bte,preventDefault:!0},{key:"Mod-End",run:$N,shift:LN},{key:"Enter",run:one},{key:"Mod-a",run:Wte},{key:"Backspace",run:M_,shift:M_},{key:"Delete",run:hF},{key:"Mod-Backspace",mac:"Alt-Backspace",run:pF},{key:"Mod-Delete",mac:"Alt-Delete",run:Jte},{mac:"Mod-Backspace",run:Xte},{mac:"Mod-Delete",run:gF}].concat(une.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),fne=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:kte,shift:Fte},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:Cte,shift:Vte},{key:"Alt-ArrowUp",run:ene},{key:"Shift-Alt-ArrowUp",run:nne},{key:"Alt-ArrowDown",run:tne},{key:"Shift-Alt-ArrowDown",run:rne},{key:"Escape",run:Yte},{key:"Mod-Enter",run:ane},{key:"Alt-l",mac:"Ctrl-l",run:Gte},{key:"Mod-i",run:Kte,preventDefault:!0},{key:"Mod-[",run:wF},{key:"Mod-]",run:bF},{key:"Mod-Alt-\\",run:lne},{key:"Shift-Mod-k",run:ine},{key:"Shift-Mod-\\",run:Rte},{key:"Mod-/",run:ite},{key:"Alt-A",run:ote}].concat(cne),hne={key:"Tab",run:bF,shift:wF};function ar(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];typeof i=="string"?t.setAttribute(r,i):i!=null&&(t[r]=i)}e++}for(;e<arguments.length;e++)xF(t,arguments[e]);return t}function xF(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)xF(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}const DN=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Cd{constructor(e,n,r=0,i=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?a=>s(DN(a)):DN,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return ki(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=Sk(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=Vo(e);let i=this.normalize(n);for(let s=0,o=r;;s++){let a=i.charCodeAt(s),l=this.match(a,o);if(l)return this.value=l,this;if(s==i.length-1)break;o==r&&s<n.length&&n.charCodeAt(s)==a&&o++}}}match(e,n){let r=null;for(let i=0;i<this.matches.length;i+=2){let s=this.matches[i],o=!1;this.query.charCodeAt(s)==e&&(s==this.query.length-1?r={from:this.matches[i+1],to:n+1}:(this.matches[i]++,o=!0)),o||(this.matches.splice(i,2),i-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:n,to:n+1}:this.matches.push(1,n)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferPos)&&(r=null),r}}typeof Symbol<"u"&&(Cd.prototype[Symbol.iterator]=function(){return this});const SF={from:-1,to:-1,match:/.*/.exec("")},qk="gm"+(/x/.unicode==null?"":"u");class EF{constructor(e,n,r,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=SF,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new _F(e,n,r,i,s);this.re=new RegExp(n,qk+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.iter=e.iter();let o=e.lineAt(i);this.curLineStart=o.from,this.matchPos=Cb(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,i=r+n[0].length;if(this.matchPos=Cb(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const CS=new WeakMap;class rd{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,r){let i=CS.get(e);if(!i||i.from>=r||i.to<=n){let a=new rd(n,e.sliceString(n,r));return CS.set(e,a),a}if(i.from==n&&i.to==r)return i;let{text:s,from:o}=i;return o>n&&(s=e.sliceString(n,o)+s,o=n),i.to<r&&(s+=e.sliceString(i.to,r)),CS.set(e,new rd(o,s)),new rd(n,s.slice(n-o,r-o))}}class _F{constructor(e,n,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=SF,this.matchPos=Cb(e,i),this.re=new RegExp(n,qk+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.flat=rd.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,i=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this.matchPos=Cb(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=rd.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(EF.prototype[Symbol.iterator]=_F.prototype[Symbol.iterator]=function(){return this});function dne(t){try{return new RegExp(t,qk),!0}catch{return!1}}function Cb(t,e){if(e>=t.length)return e;let n=t.lineAt(e),r;for(;e<n.to&&(r=n.text.charCodeAt(e-n.from))>=56320&&r<57344;)e++;return e}function N_(t){let e=ar("input",{class:"cm-textfield",name:"line"}),n=ar("form",{class:"cm-gotoLine",onkeydown:i=>{i.keyCode==27?(i.preventDefault(),t.dispatch({effects:Pb.of(!1)}),t.focus()):i.keyCode==13&&(i.preventDefault(),r())},onsubmit:i=>{i.preventDefault(),r()}},ar("label",t.state.phrase("Go to line"),": ",e)," ",ar("button",{class:"cm-button",type:"submit"},t.state.phrase("go")));function r(){let i=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!i)return;let{state:s}=t,o=s.doc.lineAt(s.selection.main.head),[,a,l,u,c]=i,f=u?+u.slice(1):0,p=l?+l:o.number;if(l&&c){let b=p/100;a&&(b=b*(a=="-"?-1:1)+o.number/s.doc.lines),p=Math.round(s.doc.lines*b)}else l&&a&&(p=p*(a=="-"?-1:1)+o.number);let v=s.doc.line(Math.max(1,Math.min(s.doc.lines,p)));t.dispatch({effects:Pb.of(!1),selection:Ke.cursor(v.from+Math.max(0,Math.min(f,v.length))),scrollIntoView:!0}),t.focus()}return{dom:n}}const Pb=Kt.define(),FN=Zr.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(Pb)&&(t=n.value);return t},provide:t=>Gg.from(t,e=>e?N_:null)}),pne=t=>{let e=Wg(t,N_);if(!e){let n=[Pb.of(!0)];t.state.field(FN,!1)==null&&n.push(Kt.appendConfig.of([FN,gne])),t.dispatch({effects:n}),e=Wg(t,N_)}return e&&e.dom.querySelector("input").focus(),!0},gne=gt.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),mne={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},AF=vt.define({combine(t){return _a(t,mne,{highlightWordAroundCursor:(e,n)=>e||n,minSelectionLength:Math.min,maxMatches:Math.min})}});function vne(t){let e=[Sne,xne];return t&&e.push(AF.of(t)),e}const yne=Rt.mark({class:"cm-selectionMatch"}),bne=Rt.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function VN(t,e,n,r){return(n==0||t(e.sliceDoc(n-1,n))!=xr.Word)&&(r==e.doc.length||t(e.sliceDoc(r,r+1))!=xr.Word)}function wne(t,e,n,r){return t(e.sliceDoc(n,n+1))==xr.Word&&t(e.sliceDoc(r-1,r))==xr.Word}const xne=qr.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(AF),{state:n}=t,r=n.selection;if(r.ranges.length>1)return Rt.none;let i=r.main,s,o=null;if(i.empty){if(!e.highlightWordAroundCursor)return Rt.none;let l=n.wordAt(i.head);if(!l)return Rt.none;o=n.charCategorizer(i.head),s=n.sliceDoc(l.from,l.to)}else{let l=i.to-i.from;if(l<e.minSelectionLength||l>200)return Rt.none;if(e.wholeWords){if(s=n.sliceDoc(i.from,i.to),o=n.charCategorizer(i.head),!(VN(o,n,i.from,i.to)&&wne(o,n,i.from,i.to)))return Rt.none}else if(s=n.sliceDoc(i.from,i.to).trim(),!s)return Rt.none}let a=[];for(let l of t.visibleRanges){let u=new Cd(n.doc,s,l.from,l.to);for(;!u.next().done;){let{from:c,to:f}=u.value;if((!o||VN(o,n,c,f))&&(i.empty&&c<=i.from&&f>=i.to?a.push(bne.range(c,f)):(c>=i.to||f<=i.from)&&a.push(yne.range(c,f)),a.length>e.maxMatches))return Rt.none}}return Rt.set(a)}},{decorations:t=>t.decorations}),Sne=gt.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),Ene=({state:t,dispatch:e})=>{let{selection:n}=t,r=Ke.create(n.ranges.map(i=>t.wordAt(i.head)||Ke.cursor(i.head)),n.mainIndex);return r.eq(n)?!1:(e(t.update({selection:r})),!0)};function _ne(t,e){let{main:n,ranges:r}=t.selection,i=t.wordAt(n.head),s=i&&i.from==n.from&&i.to==n.to;for(let o=!1,a=new Cd(t.doc,e,r[r.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new Cd(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),o=!0}else{if(o&&r.some(l=>l.from==a.value.from))continue;if(s){let l=t.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const Ane=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return Ene({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=r))return!1;let i=_ne(t,r);return i?(e(t.update({selection:t.selection.addRange(Ke.range(i.from,i.to),!1),effects:gt.scrollIntoView(i.to)})),!0):!1},qd=vt.define({combine(t){return _a(t,{top:!1,caseSensitive:!1,literal:!1,wholeWord:!1,createPanel:e=>new Dne(e),scrollToMatch:e=>gt.scrollIntoView(e)})}});class kF{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||dne(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new One(this):new Cne(this)}getCursor(e,n=0,r){let i=e.doc?e:un.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?Nh(this,i,n,r):Mh(this,i,n,r)}}class CF{constructor(e){this.spec=e}}function Mh(t,e,n,r){return new Cd(e.doc,t.unquoted,n,r,t.caseSensitive?void 0:i=>i.toLowerCase(),t.wholeWord?kne(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function kne(t,e){return(n,r,i,s)=>((s>n||s+i.length<r)&&(s=Math.max(0,n-2),i=t.sliceString(s,Math.min(t.length,r+2))),(e(Ob(i,n-s))!=xr.Word||e(Tb(i,n-s))!=xr.Word)&&(e(Tb(i,r-s))!=xr.Word||e(Ob(i,r-s))!=xr.Word))}class Cne extends CF{constructor(e){super(e)}nextMatch(e,n,r){let i=Mh(this.spec,e,r,e.doc.length).nextOverlapping();return i.done&&(i=Mh(this.spec,e,0,n).nextOverlapping()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=r;;){let s=Math.max(n,i-1e4-this.spec.unquoted.length),o=Mh(this.spec,e,s,i),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==n)return null;i-=1e4}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let r=Mh(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=Mh(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function Nh(t,e,n,r){return new EF(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?Pne(e.charCategorizer(e.selection.main.head)):void 0},n,r)}function Ob(t,e){return t.slice(Wi(t,e,!1),e)}function Tb(t,e){return t.slice(e,Wi(t,e))}function Pne(t){return(e,n,r)=>!r[0].length||(t(Ob(r.input,r.index))!=xr.Word||t(Tb(r.input,r.index))!=xr.Word)&&(t(Tb(r.input,r.index+r[0].length))!=xr.Word||t(Ob(r.input,r.index+r[0].length))!=xr.Word)}class One extends CF{nextMatch(e,n,r){let i=Nh(this.spec,e,r,e.doc.length).next();return i.done&&(i=Nh(this.spec,e,0,n).next()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=1;;i++){let s=Math.max(n,r-i*1e4),o=Nh(this.spec,e,s,r),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==n||a.from>s+10))return a;if(s==n)return null}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(n,r)=>r=="$"?"$":r=="&"?e.match[0]:r!="0"&&+r<e.match.length?e.match[r]:n))}matchAll(e,n){let r=Nh(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=Nh(this.spec,e,Math.max(0,n-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const Yg=Kt.define(),Wk=Kt.define(),Gu=Zr.define({create(t){return new PS(I_(t).create(),null)},update(t,e){for(let n of e.effects)n.is(Yg)?t=new PS(n.value.create(),t.panel):n.is(Wk)&&(t=new PS(t.query,n.value?Gk:null));return t},provide:t=>Gg.from(t,e=>e.panel)});class PS{constructor(e,n){this.query=e,this.panel=n}}const Tne=Rt.mark({class:"cm-searchMatch"}),Mne=Rt.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Nne=qr.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(Gu))}update(t){let e=t.state.field(Gu);(e!=t.startState.field(Gu)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return Rt.none;let{view:n}=this,r=new oc;for(let i=0,s=n.visibleRanges,o=s.length;i<o;i++){let{from:a,to:l}=s[i];for(;i<o-1&&l>s[i+1].from-2*250;)l=s[++i].to;t.highlight(n.state,a,l,(u,c)=>{let f=n.state.selection.ranges.some(p=>p.from==u&&p.to==c);r.add(u,c,f?Mne:Tne)})}return r.finish()}},{decorations:t=>t.decorations});function Um(t){return e=>{let n=e.state.field(Gu,!1);return n&&n.query.spec.valid?t(e,n):TF(e)}}const Mb=Um((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state,n,n);if(!r)return!1;let i=Ke.single(r.from,r.to),s=t.state.facet(qd);return t.dispatch({selection:i,effects:[Kk(t,r),s.scrollToMatch(i.main,t)],userEvent:"select.search"}),OF(t),!0}),Nb=Um((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,i=e.prevMatch(n,r,r);if(!i)return!1;let s=Ke.single(i.from,i.to),o=t.state.facet(qd);return t.dispatch({selection:s,effects:[Kk(t,i),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),OF(t),!0}),Ine=Um((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:Ke.create(n.map(r=>Ke.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),$ne=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,s=[],o=0;for(let a=new Cd(t.doc,t.sliceDoc(r,i));!a.next().done;){if(s.length>1e3)return!1;a.value.from==r&&(o=s.length),s.push(Ke.range(a.value.from,a.value.to))}return e(t.update({selection:Ke.create(s,o),userEvent:"select.search.matches"})),!0},BN=Um((t,{query:e})=>{let{state:n}=t,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,r,r);if(!s)return!1;let o=[],a,l,u=[];if(s.from==r&&s.to==i&&(l=n.toText(e.getReplacement(s)),o.push({from:s.from,to:s.to,insert:l}),s=e.nextMatch(n,s.from,s.to),u.push(gt.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+"."))),s){let c=o.length==0||o[0].from>=s.to?0:s.to-s.from-l.length;a=Ke.single(s.from-c,s.to-c),u.push(Kk(t,s)),u.push(n.facet(qd).scrollToMatch(a.main,t))}return t.dispatch({changes:o,selection:a,effects:u,userEvent:"input.replace"}),!0}),Rne=Um((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(i=>{let{from:s,to:o}=i;return{from:s,to:o,insert:e.getReplacement(i)}});if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:gt.announce.of(r),userEvent:"input.replace.all"}),!0});function Gk(t){return t.state.facet(qd).createPanel(t)}function I_(t,e){var n,r,i,s;let o=t.selection.main,a=o.empty||o.to>o.from+100?"":t.sliceDoc(o.from,o.to);if(e&&!a)return e;let l=t.facet(qd);return new kF({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:l.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(r=e==null?void 0:e.caseSensitive)!==null&&r!==void 0?r:l.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:l.literal,wholeWord:(s=e==null?void 0:e.wholeWord)!==null&&s!==void 0?s:l.wholeWord})}function PF(t){let e=Wg(t,Gk);return e&&e.dom.querySelector("[main-field]")}function OF(t){let e=PF(t);e&&e==t.root.activeElement&&e.select()}const TF=t=>{let e=t.state.field(Gu,!1);if(e&&e.panel){let n=PF(t);if(n&&n!=t.root.activeElement){let r=I_(t.state,e.query.spec);r.valid&&t.dispatch({effects:Yg.of(r)}),n.focus(),n.select()}}else t.dispatch({effects:[Wk.of(!0),e?Yg.of(I_(t.state,e.query.spec)):Kt.appendConfig.of(Vne)]});return!0},MF=t=>{let e=t.state.field(Gu,!1);if(!e||!e.panel)return!1;let n=Wg(t,Gk);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:Wk.of(!1)}),!0},Lne=[{key:"Mod-f",run:TF,scope:"editor search-panel"},{key:"F3",run:Mb,shift:Nb,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Mb,shift:Nb,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:MF,scope:"editor search-panel"},{key:"Mod-Shift-l",run:$ne},{key:"Alt-g",run:pne},{key:"Mod-d",run:Ane,preventDefault:!0}];class Dne{constructor(e){this.view=e;let n=this.query=e.state.field(Gu).query.spec;this.commit=this.commit.bind(this),this.searchField=ar("input",{value:n.search,placeholder:ro(e,"Find"),"aria-label":ro(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=ar("input",{value:n.replace,placeholder:ro(e,"Replace"),"aria-label":ro(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=ar("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=ar("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=ar("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(i,s,o){return ar("button",{class:"cm-button",name:i,onclick:s,type:"button"},o)}this.dom=ar("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>Mb(e),[ro(e,"next")]),r("prev",()=>Nb(e),[ro(e,"previous")]),r("select",()=>Ine(e),[ro(e,"all")]),ar("label",null,[this.caseField,ro(e,"match case")]),ar("label",null,[this.reField,ro(e,"regexp")]),ar("label",null,[this.wordField,ro(e,"by word")]),...e.state.readOnly?[]:[ar("br"),this.replaceField,r("replace",()=>BN(e),[ro(e,"replace")]),r("replaceAll",()=>Rne(e),[ro(e,"replace all")])],ar("button",{name:"close",onclick:()=>MF(e),"aria-label":ro(e,"close"),type:"button"},[""])])}commit(){let e=new kF({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Yg.of(e)}))}keydown(e){iQ(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Nb:Mb)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),BN(this.view))}update(e){for(let n of e.transactions)for(let r of n.effects)r.is(Yg)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(qd).top}}function ro(t,e){return t.state.phrase(e)}const F0=30,V0=/[\s\.,:;?!]/;function Kk(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,s=Math.max(r.from,e-F0),o=Math.min(i,n+F0),a=t.state.sliceDoc(s,o);if(s!=r.from){for(let l=0;l<F0;l++)if(!V0.test(a[l+1])&&V0.test(a[l])){a=a.slice(l);break}}if(o!=i){for(let l=a.length-1;l>a.length-F0;l--)if(!V0.test(a[l-1])&&V0.test(a[l])){a=a.slice(0,l);break}}return gt.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${r.number}.`)}const Fne=gt.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Vne=[Gu,Kf.lowest(Nne),Fne];class NF{constructor(e,n,r){this.state=e,this.pos=n,this.explicit=r,this.abortListeners=[]}tokenBefore(e){let n=Xr(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),r=Math.max(n.from,this.pos-250),i=n.text.slice(r-n.from,this.pos-n.from),s=i.search(IF(e,!1));return s<0?null:{from:r+s,to:this.pos,text:i.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n){e=="abort"&&this.abortListeners&&this.abortListeners.push(n)}}function jN(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function Bne(t){let e=Object.create(null),n=Object.create(null);for(let{label:i}of t){e[i[0]]=!0;for(let s=1;s<i.length;s++)n[i[s]]=!0}let r=jN(e)+jN(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function jne(t){let e=t.map(i=>typeof i=="string"?{label:i}:i),[n,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:Bne(e);return i=>{let s=i.matchBefore(r);return s||i.explicit?{from:s?s.from:i.pos,options:e,validFor:n}:null}}class zN{constructor(e,n,r,i){this.completion=e,this.source=n,this.match=r,this.score=i}}function Ku(t){return t.selection.main.from}function IF(t,e){var n;let{source:r}=t,i=e&&r[0]!="^",s=r[r.length-1]!="$";return!i&&!s?t:new RegExp(`${i?"^":""}(?:${r})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const $F=su.define();function zne(t,e,n,r){let{main:i}=t.selection,s=n-i.from,o=r-i.from;return Object.assign(Object.assign({},t.changeByRange(a=>a!=i&&n!=r&&t.sliceDoc(a.from+s,a.from+o)!=t.sliceDoc(n,r)?{range:a}:{changes:{from:a.from+s,to:r==i.from?a.to:a.from+o,insert:e},range:Ke.cursor(a.from+s+e.length)})),{userEvent:"input.complete"})}const HN=new WeakMap;function Hne(t){if(!Array.isArray(t))return t;let e=HN.get(t);return e||HN.set(t,e=jne(t)),e}const Yk=Kt.define(),Jg=Kt.define();class Une{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let n=0;n<e.length;){let r=ki(e,n),i=Vo(r);this.chars.push(r);let s=e.slice(n,n+i),o=s.toUpperCase();this.folded.push(ki(o==s?s.toLowerCase():o,0)),n+=i}this.astral=e.length!=this.chars.length}match(e){if(this.pattern.length==0)return[-100];if(e.length<this.pattern.length)return null;let{chars:n,folded:r,any:i,precise:s,byWord:o}=this;if(n.length==1){let A=ki(e,0),I=Vo(A),N=I==e.length?0:-100;if(A!=n[0])if(A==r[0])N+=-200;else return null;return[N,0,I]}let a=e.indexOf(this.pattern);if(a==0)return[e.length==this.pattern.length?0:-100,0,this.pattern.length];let l=n.length,u=0;if(a<0){for(let A=0,I=Math.min(e.length,200);A<I&&u<l;){let N=ki(e,A);(N==n[u]||N==r[u])&&(i[u++]=A),A+=Vo(N)}if(u<l)return null}let c=0,f=0,p=!1,v=0,b=-1,E=-1,P=/[a-z]/.test(e),S=!0;for(let A=0,I=Math.min(e.length,200),N=0;A<I&&f<l;){let x=ki(e,A);a<0&&(c<l&&x==n[c]&&(s[c++]=A),v<l&&(x==n[v]||x==r[v]?(v==0&&(b=A),E=A+1,v++):v=0));let g,_=x<255?x>=48&&x<=57||x>=97&&x<=122?2:x>=65&&x<=90?1:0:(g=Sk(x))!=g.toLowerCase()?1:g!=g.toUpperCase()?2:0;(!A||_==1&&P||N==0&&_!=0)&&(n[f]==x||r[f]==x&&(p=!0)?o[f++]=A:o.length&&(S=!1)),N=_,A+=Vo(x)}return f==l&&o[0]==0&&S?this.result(-100+(p?-200:0),o,e):v==l&&b==0?[-200-e.length+(E==e.length?0:-100),0,E]:a>-1?[-700-e.length,a,a+this.pattern.length]:v==l?[-200+-700-e.length,b,E]:f==l?this.result(-100+(p?-200:0)+-700+(S?0:-1100),o,e):n.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,n,r){let i=[e-r.length],s=1;for(let o of n){let a=o+(this.astral?Vo(ki(r,o)):1);s>1&&i[s-1]==o?i[s-1]=a:(i[s++]=o,i[s++]=a)}return i}}const js=vt.define({combine(t){return _a(t,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:qne,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>r=>UN(e(r),n(r)),optionClass:(e,n)=>r=>UN(e(r),n(r)),addToOptions:(e,n)=>e.concat(n)})}});function UN(t,e){return t?e?t+" "+e:t:e}function qne(t,e,n,r,i){let s=t.textDirection==Cr.RTL,o=s,a=!1,l="top",u,c,f=e.left-i.left,p=i.right-e.right,v=r.right-r.left,b=r.bottom-r.top;if(o&&f<Math.min(v,p)?o=!1:!o&&p<Math.min(v,f)&&(o=!0),v<=(o?f:p))u=Math.max(i.top,Math.min(n.top,i.bottom-b))-e.top,c=Math.min(400,o?f:p);else{a=!0,c=Math.min(400,(s?e.right:i.right-e.left)-30);let E=i.bottom-e.bottom;E>=b||E>e.top?u=n.bottom-e.top:(l="bottom",u=e.bottom-n.top)}return{style:`${l}: ${u}px; max-width: ${c}px`,class:"cm-completionInfo-"+(a?s?"left-narrow":"right-narrow":o?"left":"right")}}function B0(t,e="option"){return n=>{let r=n.state.field(uo,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<n.state.facet(js).interactionDelay)return!1;let i=1,s;e=="page"&&(s=v4(n,r.open.tooltip))&&(i=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=r.open.options,a=r.open.selected>-1?r.open.selected+i*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),n.dispatch({effects:DF.of(a)}),!0}}const Wne=t=>{let e=t.state.field(uo,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||Date.now()-e.open.timestamp<t.state.facet(js).interactionDelay?!1:e.open.disabled?!0:RF(t,e.open.options[e.open.selected])},Gne=t=>t.state.field(uo,!1)?(t.dispatch({effects:Yk.of(!0)}),!0):!1,Kne=t=>{let e=t.state.field(uo,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:Jg.of(null)}),!0)};class Yne{constructor(e,n){this.active=e,this.context=n,this.time=Date.now(),this.updates=[],this.done=void 0}}const qN=50,Jne=50,Xne=1e3,Zne=qr.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of t.state.field(uo).active)e.state==1&&this.startQuery(e)}update(t){let e=t.state.field(uo);if(!t.selectionSet&&!t.docChanged&&t.startState.field(uo)==e)return;let n=t.transactions.some(r=>(r.selection||r.docChanged)&&!$_(r));for(let r=0;r<this.running.length;r++){let i=this.running[r];if(n||i.updates.length+t.transactions.length>Jne&&Date.now()-i.time>Xne){for(let s of i.context.abortListeners)try{s()}catch(o){mo(this.view.state,o)}i.context.abortListeners=null,this.running.splice(r--,1)}else i.updates.push(...t.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some(r=>r.state==1&&!this.running.some(i=>i.active.source==r.source))?setTimeout(()=>this.startUpdate(),qN):-1,this.composing!=0)for(let r of t.transactions)$_(r)=="input"?this.composing=2:this.composing==2&&r.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:t}=this.view,e=t.field(uo);for(let n of e.active)n.state==1&&!this.running.some(r=>r.active.source==n.source)&&this.startQuery(n)}startQuery(t){let{state:e}=this.view,n=Ku(e),r=new NF(e,n,t.explicitPos==n),i=new Yne(t,r);this.running.push(i),Promise.resolve(t.source(r)).then(s=>{i.context.aborted||(i.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:Jg.of(null)}),mo(this.view.state,s)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),qN))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],n=this.view.state.facet(js);for(let r=0;r<this.running.length;r++){let i=this.running[r];if(i.done===void 0)continue;if(this.running.splice(r--,1),i.done){let o=new id(i.active.source,i.active.explicitPos,i.done,i.done.from,(t=i.done.to)!==null&&t!==void 0?t:Ku(i.updates.length?i.updates[0].startState:this.view.state));for(let a of i.updates)o=o.update(a,n);if(o.hasResult()){e.push(o);continue}}let s=this.view.state.field(uo).active.find(o=>o.source==i.active.source);if(s&&s.state==1)if(i.done==null){let o=new Ls(i.active.source,0);for(let a of i.updates)o=o.update(a,n);o.state!=1&&e.push(o)}else this.startQuery(s)}e.length&&this.view.dispatch({effects:LF.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(uo,!1);if(e&&e.tooltip&&this.view.state.facet(js).closeOnBlur){let n=e.open&&v4(this.view,e.open.tooltip);(!n||!n.dom.contains(t.relatedTarget))&&this.view.dispatch({effects:Jg.of(null)})}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Yk.of(!1)}),20),this.composing=0}}});function RF(t,e){const n=e.completion.apply||e.completion.label;let r=t.state.field(uo).active.find(i=>i.source==e.source);return r instanceof id?(typeof n=="string"?t.dispatch(Object.assign(Object.assign({},zne(t.state,n,r.from,r.to)),{annotations:$F.of(e.completion)})):n(t,e.completion,r.from,r.to),!0):!1}function Qne(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),n.type&&r.classList.add(...n.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(n,r,i){let s=document.createElement("span");s.className="cm-completionLabel";let{label:o}=n,a=0;for(let l=1;l<i.length;){let u=i[l++],c=i[l++];u>a&&s.appendChild(document.createTextNode(o.slice(a,u)));let f=s.appendChild(document.createElement("span"));f.appendChild(document.createTextNode(o.slice(u,c))),f.className="cm-completionMatchedText",a=c}return a<o.length&&s.appendChild(document.createTextNode(o.slice(a))),s},position:50},{render(n){if(!n.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=n.detail,r},position:80}),e.sort((n,r)=>n.position-r.position).map(n=>n.render)}function WN(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let i=Math.floor(e/n);return{from:i*n,to:(i+1)*n}}let r=Math.floor((t-e)/n);return{from:t-(r+1)*n,to:t-r*n}}class ere{constructor(e,n){this.view=e,this.stateField=n,this.info=null,this.placeInfoReq={read:()=>this.measureInfo(),write:a=>this.placeInfo(a),key:this},this.space=null,this.currentClass="";let r=e.state.field(n),{options:i,selected:s}=r.open,o=e.state.facet(js);this.optionContent=Qne(o),this.optionClass=o.optionClass,this.tooltipClass=o.tooltipClass,this.range=WN(i.length,s,o.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",a=>{for(let l=a.target,u;l&&l!=this.dom;l=l.parentNode)if(l.nodeName=="LI"&&(u=/-(\d+)$/.exec(l.id))&&+u[1]<i.length){RF(e,i[+u[1]]),a.preventDefault();return}}),this.dom.addEventListener("focusout",a=>{let l=e.state.field(this.stateField,!1);l&&l.tooltip&&e.state.facet(js).closeOnBlur&&a.relatedTarget!=e.contentDOM&&e.dispatch({effects:Jg.of(null)})}),this.list=this.dom.appendChild(this.createListBox(i,r.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}mount(){this.updateSel()}update(e){var n,r,i;let s=e.state.field(this.stateField),o=e.startState.field(this.stateField);this.updateTooltipClass(e.state),s!=o&&(this.updateSel(),((n=s.open)===null||n===void 0?void 0:n.disabled)!=((r=o.open)===null||r===void 0?void 0:r.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(!((i=s.open)===null||i===void 0)&&i.disabled)))}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of n.split(" "))r&&this.dom.classList.add(r);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=WN(n.options.length,n.selected,this.view.state.facet(js).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(n.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})),this.updateSelectedOption(n.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:r}=n.options[n.selected],{info:i}=r;if(!i)return;let s=typeof i=="string"?document.createTextNode(i):i(r);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o)}).catch(o=>mo(this.view.state,o,"completion info")):this.addInfoPane(s)}}addInfoPane(e){let n=this.info=document.createElement("div");n.className="cm-tooltip cm-completionInfo",n.appendChild(e),this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)r.nodeName!="LI"||!r.id?i--:i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),n=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return n&&nre(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.defaultView||window;s={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return i.top>Math.min(s.bottom,n.bottom)-10||i.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet(js).positionInfo(this.view,n,i,r,s)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,r){const i=document.createElement("ul");i.id=n,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions"));let s=null;for(let o=r.from;o<r.to;o++){let{completion:a,match:l}=e[o],{section:u}=a;if(u){let p=typeof u=="string"?u:u.name;if(p!=s&&(o>r.from||r.from==0))if(s=p,typeof u!="string"&&u.header)i.appendChild(u.header(u));else{let v=i.appendChild(document.createElement("completion-section"));v.textContent=p}}const c=i.appendChild(document.createElement("li"));c.id=n+"-"+o,c.setAttribute("role","option");let f=this.optionClass(a);f&&(c.className=f);for(let p of this.optionContent){let v=p(a,this.view.state,l);v&&c.appendChild(v)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}}function tre(t){return e=>new ere(e,t)}function nre(t,e){let n=t.getBoundingClientRect(),r=e.getBoundingClientRect();r.top<n.top?t.scrollTop-=n.top-r.top:r.bottom>n.bottom&&(t.scrollTop+=r.bottom-n.bottom)}function GN(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function rre(t,e){let n=[],r=null,i=l=>{n.push(l);let{section:u}=l.completion;if(u){r||(r=[]);let c=typeof u=="string"?u:u.name;r.some(f=>f.name==c)||r.push(typeof u=="string"?{name:c}:u)}};for(let l of t)if(l.hasResult())if(l.result.filter===!1){let u=l.result.getMatch;for(let c of l.result.options){let f=[1e9-n.length];if(u)for(let p of u(c))f.push(p);i(new zN(c,l.source,f,f[0]))}}else{let u=new Une(e.sliceDoc(l.from,l.to)),c;for(let f of l.result.options)(c=u.match(f.label))&&i(new zN(f,l.source,c,c[0]+(f.boost||0)))}if(r){let l=Object.create(null),u=0,c=(f,p)=>{var v,b;return((v=f.rank)!==null&&v!==void 0?v:1e9)-((b=p.rank)!==null&&b!==void 0?b:1e9)||(f.name<p.name?-1:1)};for(let f of r.sort(c))u-=1e5,l[f.name]=u;for(let f of n){let{section:p}=f.completion;p&&(f.score+=l[typeof p=="string"?p:p.name])}}let s=[],o=null,a=e.facet(js).compareCompletions;for(let l of n.sort((u,c)=>c.score-u.score||a(u.completion,c.completion)))!o||o.label!=l.completion.label||o.detail!=l.completion.detail||o.type!=null&&l.completion.type!=null&&o.type!=l.completion.type||o.apply!=l.completion.apply?s.push(l):GN(l.completion)>GN(o)&&(s[s.length-1]=l),o=l.completion;return s}class Hh{constructor(e,n,r,i,s,o){this.options=e,this.attrs=n,this.tooltip=r,this.timestamp=i,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new Hh(this.options,KN(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,r,i,s){let o=rre(e,n);if(!o.length)return i&&e.some(l=>l.state==1)?new Hh(i.options,i.attrs,i.tooltip,i.timestamp,i.selected,!0):null;let a=n.facet(js).selectOnOpen?0:-1;if(i&&i.selected!=a&&i.selected!=-1){let l=i.options[i.selected].completion;for(let u=0;u<o.length;u++)if(o[u].completion==l){a=u;break}}return new Hh(o,KN(r,a),{pos:e.reduce((l,u)=>u.hasResult()?Math.min(l,u.from):l,1e8),create:tre(uo),above:s.aboveCursor},i?i.timestamp:Date.now(),a,!1)}map(e){return new Hh(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class Ib{constructor(e,n,r){this.active=e,this.id=n,this.open=r}static start(){return new Ib(ore,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,r=n.facet(js),s=(r.override||n.languageDataAt("autocomplete",Ku(n)).map(Hne)).map(a=>(this.active.find(u=>u.source==a)||new Ls(a,this.active.some(u=>u.state!=0)?1:0)).update(e,r));s.length==this.active.length&&s.every((a,l)=>a==this.active[l])&&(s=this.active);let o=this.open;o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!ire(s,this.active)?o=Hh.build(s,n,this.id,o,r):o&&o.disabled&&!s.some(a=>a.state==1)&&(o=null),!o&&s.every(a=>a.state!=1)&&s.some(a=>a.hasResult())&&(s=s.map(a=>a.hasResult()?new Ls(a.source,0):a));for(let a of e.effects)a.is(DF)&&(o=o&&o.setSelected(a.value,this.id));return s==this.active&&o==this.open?this:new Ib(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:sre}}function ire(t,e){if(t==e)return!0;for(let n=0,r=0;;){for(;n<t.length&&!t[n].hasResult;)n++;for(;r<e.length&&!e[r].hasResult;)r++;let i=n==t.length,s=r==e.length;if(i||s)return i==s;if(t[n++].result!=e[r++].result)return!1}}const sre={"aria-autocomplete":"list"};function KN(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const ore=[];function $_(t){return t.isUserEvent("input.type")?"input":t.isUserEvent("delete.backward")?"delete":null}class Ls{constructor(e,n,r=-1){this.source=e,this.state=n,this.explicitPos=r}hasResult(){return!1}update(e,n){let r=$_(e),i=this;r?i=i.handleUserEvent(e,r,n):e.docChanged?i=i.handleChange(e):e.selection&&i.state!=0&&(i=new Ls(i.source,0));for(let s of e.effects)if(s.is(Yk))i=new Ls(i.source,1,s.value?Ku(e.state):-1);else if(s.is(Jg))i=new Ls(i.source,0);else if(s.is(LF))for(let o of s.value)o.source==i.source&&(i=o);return i}handleUserEvent(e,n,r){return n=="delete"||!r.activateOnTyping?this.map(e.changes):new Ls(this.source,1)}handleChange(e){return e.changes.touchesRange(Ku(e.startState))?new Ls(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Ls(this.source,this.state,e.mapPos(this.explicitPos))}}class id extends Ls{constructor(e,n,r,i,s){super(e,2,n),this.result=r,this.from=i,this.to=s}hasResult(){return!0}handleUserEvent(e,n,r){var i;let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=Ku(e.state);if((this.explicitPos<0?a<=s:a<this.from)||a>o||n=="delete"&&Ku(e.startState)==this.from)return new Ls(this.source,n=="input"&&r.activateOnTyping?1:0);let l=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),u;return are(this.result.validFor,e.state,s,o)?new id(this.source,l,this.result,s,o):this.result.update&&(u=this.result.update(this.result,s,o,new NF(e.state,a,l>=0)))?new id(this.source,l,u,u.from,(i=u.to)!==null&&i!==void 0?i:Ku(e.state)):new Ls(this.source,1,l)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new Ls(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new id(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function are(t,e,n,r){if(!t)return!1;let i=e.sliceDoc(n,r);return typeof t=="function"?t(i,n,r,e):IF(t,!0).test(i)}const LF=Kt.define({map(t,e){return t.map(n=>n.map(e))}}),DF=Kt.define(),uo=Zr.define({create(){return Ib.start()},update(t,e){return t.update(e)},provide:t=>[V1.from(t,e=>e.tooltip),gt.contentAttributes.from(t,e=>e.attrs)]}),FF=gt.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class lre{constructor(e,n,r,i){this.field=e,this.line=n,this.from=r,this.to=i}}class Jk{constructor(e,n,r){this.field=e,this.from=n,this.to=r}map(e){let n=e.mapPos(this.from,-1,Oi.TrackDel),r=e.mapPos(this.to,1,Oi.TrackDel);return n==null||r==null?null:new Jk(this.field,n,r)}}class Xk{constructor(e,n){this.lines=e,this.fieldPositions=n}instantiate(e,n){let r=[],i=[n],s=e.doc.lineAt(n),o=/^\s*/.exec(s.text)[0];for(let l of this.lines){if(r.length){let u=o,c=/^\t*/.exec(l)[0].length;for(let f=0;f<c;f++)u+=e.facet(jm);i.push(n+u.length-c),l=u+l.slice(c)}r.push(l),n+=l.length+1}let a=this.fieldPositions.map(l=>new Jk(l.field,i[l.line]+l.from,i[l.line]+l.to));return{text:r,ranges:a}}static parse(e){let n=[],r=[],i=[],s;for(let o of e.split(/\r\n?|\n/)){for(;s=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(o);){let a=s[1]?+s[1]:null,l=s[2]||s[3]||"",u=-1;for(let c=0;c<n.length;c++)(a!=null?n[c].seq==a:l&&n[c].name==l)&&(u=c);if(u<0){let c=0;for(;c<n.length&&(a==null||n[c].seq!=null&&n[c].seq<a);)c++;n.splice(c,0,{seq:a,name:l}),u=c;for(let f of i)f.field>=u&&f.field++}i.push(new lre(u,r.length,s.index,s.index+l.length)),o=o.slice(0,s.index)+l+o.slice(s.index+s[0].length)}for(let a;a=/\\([{}])/.exec(o);){o=o.slice(0,a.index)+a[1]+o.slice(a.index+a[0].length);for(let l of i)l.line==r.length&&l.from>a.index&&(l.from--,l.to--)}r.push(o)}return new Xk(r,i)}}let ure=Rt.widget({widget:new class extends ou{toDOM(){let t=document.createElement("span");return t.className="cm-snippetFieldPosition",t}ignoreEvent(){return!1}}}),cre=Rt.mark({class:"cm-snippetField"});class Wd{constructor(e,n){this.ranges=e,this.active=n,this.deco=Rt.set(e.map(r=>(r.from==r.to?ure:cre).range(r.from,r.to)))}map(e){let n=[];for(let r of this.ranges){let i=r.map(e);if(!i)return null;n.push(i)}return new Wd(n,this.active)}selectionInsideField(e){return e.ranges.every(n=>this.ranges.some(r=>r.field==this.active&&r.from<=n.from&&r.to>=n.to))}}const qm=Kt.define({map(t,e){return t&&t.map(e)}}),fre=Kt.define(),Xg=Zr.define({create(){return null},update(t,e){for(let n of e.effects){if(n.is(qm))return n.value;if(n.is(fre)&&t)return new Wd(t.ranges,n.value)}return t&&e.docChanged&&(t=t.map(e.changes)),t&&e.selection&&!t.selectionInsideField(e.selection)&&(t=null),t},provide:t=>gt.decorations.from(t,e=>e?e.deco:Rt.none)});function Zk(t,e){return Ke.create(t.filter(n=>n.field==e).map(n=>Ke.range(n.from,n.to)))}function hre(t){let e=Xk.parse(t);return(n,r,i,s)=>{let{text:o,ranges:a}=e.instantiate(n.state,i),l={changes:{from:i,to:s,insert:Dn.of(o)},scrollIntoView:!0,annotations:r?$F.of(r):void 0};if(a.length&&(l.selection=Zk(a,0)),a.length>1){let u=new Wd(a,0),c=l.effects=[qm.of(u)];n.state.field(Xg,!1)===void 0&&c.push(Kt.appendConfig.of([Xg,vre,bre,FF]))}n.dispatch(n.state.update(l))}}function VF(t){return({state:e,dispatch:n})=>{let r=e.field(Xg,!1);if(!r||t<0&&r.active==0)return!1;let i=r.active+t,s=t>0&&!r.ranges.some(o=>o.field==i+t);return n(e.update({selection:Zk(r.ranges,i),effects:qm.of(s?null:new Wd(r.ranges,i))})),!0}}const dre=({state:t,dispatch:e})=>t.field(Xg,!1)?(e(t.update({effects:qm.of(null)})),!0):!1,pre=VF(1),gre=VF(-1),mre=[{key:"Tab",run:pre,shift:gre},{key:"Escape",run:dre}],YN=vt.define({combine(t){return t.length?t[0]:mre}}),vre=Kf.highest(Vm.compute([YN],t=>t.facet(YN)));function yre(t,e){return Object.assign(Object.assign({},e),{apply:hre(t)})}const bre=gt.domEventHandlers({mousedown(t,e){let n=e.state.field(Xg,!1),r;if(!n||(r=e.posAtCoords({x:t.clientX,y:t.clientY}))==null)return!1;let i=n.ranges.find(s=>s.from<=r&&s.to>=r);return!i||i.field==n.active?!1:(e.dispatch({selection:Zk(n.ranges,i.field),effects:qm.of(n.ranges.some(s=>s.field>i.field)?new Wd(n.ranges,i.field):null)}),!0)}}),Zg={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},cf=Kt.define({map(t,e){let n=e.mapPos(t,-1,Oi.TrackAfter);return n??void 0}}),Qk=new class extends $f{};Qk.startSide=1;Qk.endSide=-1;const BF=Zr.define({create(){return Vn.empty},update(t,e){if(e.selection){let n=e.state.doc.lineAt(e.selection.main.head).from,r=e.startState.doc.lineAt(e.startState.selection.main.head).from;n!=e.changes.mapPos(r,-1)&&(t=Vn.empty)}t=t.map(e.changes);for(let n of e.effects)n.is(cf)&&(t=t.update({add:[Qk.range(n.value,n.value+1)]}));return t}});function eC(){return[xre,BF]}const OS="()[]{}<>";function jF(t){for(let e=0;e<OS.length;e+=2)if(OS.charCodeAt(e)==t)return OS.charAt(e+1);return Sk(t<128?t:t+1)}function zF(t,e){return t.languageDataAt("closeBrackets",e)[0]||Zg}const wre=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),xre=gt.inputHandler.of((t,e,n,r)=>{if((wre?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let i=t.state.selection.main;if(r.length>2||r.length==2&&Vo(ki(r,0))==1||e!=i.from||n!=i.to)return!1;let s=_re(t.state,r);return s?(t.dispatch(s),!0):!1}),Sre=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=zF(t,t.selection.main.head).brackets||Zg.brackets,i=null,s=t.changeByRange(o=>{if(o.empty){let a=Are(t.doc,o.head);for(let l of r)if(l==a&&K1(t.doc,o.head)==jF(ki(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:Ke.cursor(o.head-l.length)}}return{range:i=o}});return i||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!i},Ere=[{key:"Backspace",run:Sre}];function _re(t,e){let n=zF(t,t.selection.main.head),r=n.brackets||Zg.brackets;for(let i of r){let s=jF(ki(i,0));if(e==i)return s==i?Pre(t,i,r.indexOf(i+i+i)>-1,n):kre(t,i,s,n.before||Zg.before);if(e==s&&HF(t,t.selection.main.from))return Cre(t,i,s)}return null}function HF(t,e){let n=!1;return t.field(BF).between(0,t.doc.length,r=>{r==e&&(n=!0)}),n}function K1(t,e){let n=t.sliceString(e,e+2);return n.slice(0,Vo(ki(n,0)))}function Are(t,e){let n=t.sliceString(e-2,e);return Vo(ki(n,0))==n.length?n:n.slice(1)}function kre(t,e,n,r){let i=null,s=t.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:n,from:o.to}],effects:cf.of(o.to+e.length),range:Ke.range(o.anchor+e.length,o.head+e.length)};let a=K1(t.doc,o.head);return!a||/\s/.test(a)||r.indexOf(a)>-1?{changes:{insert:e+n,from:o.head},effects:cf.of(o.head+e.length),range:Ke.cursor(o.head+e.length)}:{range:i=o}});return i?null:t.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function Cre(t,e,n){let r=null,i=t.changeByRange(s=>s.empty&&K1(t.doc,s.head)==n?{changes:{from:s.head,to:s.head+n.length,insert:n},range:Ke.cursor(s.head+n.length)}:r={range:s});return r?null:t.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function Pre(t,e,n,r){let i=r.stringPrefixes||Zg.stringPrefixes,s=null,o=t.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:e,from:a.to}],effects:cf.of(a.to+e.length),range:Ke.range(a.anchor+e.length,a.head+e.length)};let l=a.head,u=K1(t.doc,l),c;if(u==e){if(JN(t,l))return{changes:{insert:e+e,from:l},effects:cf.of(l+e.length),range:Ke.cursor(l+e.length)};if(HF(t,l)){let p=n&&t.sliceDoc(l,l+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:l,to:l+p.length,insert:p},range:Ke.cursor(l+p.length)}}}else{if(n&&t.sliceDoc(l-2*e.length,l)==e+e&&(c=XN(t,l-2*e.length,i))>-1&&JN(t,c))return{changes:{insert:e+e+e+e,from:l},effects:cf.of(l+e.length),range:Ke.cursor(l+e.length)};if(t.charCategorizer(l)(u)!=xr.Word&&XN(t,l,i)>-1&&!Ore(t,l,e,i))return{changes:{insert:e+e,from:l},effects:cf.of(l+e.length),range:Ke.cursor(l+e.length)}}return{range:s=a}});return s?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function JN(t,e){let n=Xr(t).resolveInner(e+1);return n.parent&&n.from==e}function Ore(t,e,n,r){let i=Xr(t).resolveInner(e,-1),s=r.reduce((o,a)=>Math.max(o,a.length),0);for(let o=0;o<5;o++){let a=t.sliceDoc(i.from,Math.min(i.to,i.from+n.length+s)),l=a.indexOf(n);if(!l||l>-1&&r.indexOf(a.slice(0,l))>-1){let c=i.firstChild;for(;c&&c.from==i.from&&c.to-c.from>n.length+l;){if(t.sliceDoc(c.to-n.length,c.to)==n)return!1;c=c.firstChild}return!0}let u=i.to==e&&i.parent;if(!u)break;i=u}return!1}function XN(t,e,n){let r=t.charCategorizer(e);if(r(t.sliceDoc(e-1,e))!=xr.Word)return e;for(let i of n){let s=e-i.length;if(t.sliceDoc(s,e)==i&&r(t.sliceDoc(s-1,s))!=xr.Word)return s}return-1}function UF(t={}){return[uo,js.of(t),Zne,Tre,FF]}const qF=[{key:"Ctrl-Space",run:Gne},{key:"Escape",run:Kne},{key:"ArrowDown",run:B0(!0)},{key:"ArrowUp",run:B0(!1)},{key:"PageDown",run:B0(!0,"page")},{key:"PageUp",run:B0(!1,"page")},{key:"Enter",run:Wne}],Tre=Kf.highest(Vm.computeN([js],t=>t.facet(js).defaultKeymap?[qF]:[]));class Mre{constructor(e,n,r){this.from=e,this.to=n,this.diagnostic=r}}class Xc{constructor(e,n,r){this.diagnostics=e,this.panel=n,this.selected=r}static init(e,n,r){let i=e,s=r.facet(ff).markerFilter;s&&(i=s(i));let o=Rt.set(i.map(a=>a.from==a.to||a.from==a.to-1&&r.doc.lineAt(a.from).to==a.from?Rt.widget({widget:new Vre(a),diagnostic:a}).range(a.from):Rt.mark({attributes:{class:"cm-lintRange cm-lintRange-"+a.severity+(a.markClass?" "+a.markClass:"")},diagnostic:a}).range(a.from,a.to)),!0);return new Xc(o,n,Pd(o))}}function Pd(t,e=null,n=0){let r=null;return t.between(n,1e9,(i,s,{spec:o})=>{if(!(e&&o.diagnostic!=e))return r=new Mre(i,s,o.diagnostic),!1}),r}function WF(t,e){let n=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(r=>r.is(Y1))||t.changes.touchesRange(n.from,n.to))}function GF(t,e){return t.field(ho,!1)?e:e.concat(Kt.appendConfig.of(eV))}function Nre(t,e){return{effects:GF(t,[Y1.of(e)])}}const Y1=Kt.define(),tC=Kt.define(),KF=Kt.define(),ho=Zr.define({create(){return new Xc(Rt.none,null,null)},update(t,e){if(e.docChanged){let n=t.diagnostics.map(e.changes),r=null;if(t.selected){let i=e.changes.mapPos(t.selected.from,1);r=Pd(n,t.selected.diagnostic,i)||Pd(n,null,i)}t=new Xc(n,t.panel,r)}for(let n of e.effects)n.is(Y1)?t=Xc.init(n.value,t.panel,e.state):n.is(tC)?t=new Xc(t.diagnostics,n.value?J1.open:null,t.selected):n.is(KF)&&(t=new Xc(t.diagnostics,t.panel,n.value));return t},provide:t=>[Gg.from(t,e=>e.panel),gt.decorations.from(t,e=>e.diagnostics)]}),Ire=Rt.mark({class:"cm-lintRange cm-lintRange-active"});function $re(t,e,n){let{diagnostics:r}=t.state.field(ho),i=[],s=2e8,o=0;r.between(e-(n<0?1:0),e+(n>0?1:0),(l,u,{spec:c})=>{e>=l&&e<=u&&(l==u||(e>l||n>0)&&(e<u||n<0))&&(i.push(c.diagnostic),s=Math.min(l,s),o=Math.max(u,o))});let a=t.state.facet(ff).tooltipFilter;return a&&(i=a(i)),i.length?{pos:s,end:o,above:t.state.doc.lineAt(s).to<o,create(){return{dom:YF(t,i)}}}:null}function YF(t,e){return ar("ul",{class:"cm-tooltip-lint"},e.map(n=>XF(t,n,!1)))}const Rre=t=>{let e=t.state.field(ho,!1);(!e||!e.panel)&&t.dispatch({effects:GF(t.state,[tC.of(!0)])});let n=Wg(t,J1.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},ZN=t=>{let e=t.state.field(ho,!1);return!e||!e.panel?!1:(t.dispatch({effects:tC.of(!1)}),!0)},Lre=t=>{let e=t.state.field(ho,!1);if(!e)return!1;let n=t.state.selection.main,r=e.diagnostics.iter(n.to+1);return!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==n.from&&r.to==n.to)?!1:(t.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)},Dre=[{key:"Mod-Shift-m",run:Rre,preventDefault:!0},{key:"F8",run:Lre}],Fre=qr.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet(ff);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let t=Date.now();if(t<this.lintTime-10)setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:e}=this.view,{sources:n}=e.facet(ff);Promise.all(n.map(r=>Promise.resolve(r(this.view)))).then(r=>{let i=r.reduce((s,o)=>s.concat(o));this.view.state.doc==e.doc&&this.view.dispatch(Nre(this.view.state,i))},r=>{mo(this.view.state,r)})}}update(t){let e=t.state.facet(ff);(t.docChanged||e!=t.startState.facet(ff)||e.needsRefresh&&e.needsRefresh(t))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),ff=vt.define({combine(t){return Object.assign({sources:t.map(e=>e.source)},_a(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,n)=>e?n?r=>e(r)||n(r):e:n}))}});function QN(t,e={}){return[ff.of({source:t,config:e}),Fre,eV]}function JF(t){let e=[];if(t)e:for(let{name:n}of t){for(let r=0;r<n.length;r++){let i=n[r];if(/[a-zA-Z]/.test(i)&&!e.some(s=>s.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function XF(t,e,n){var r;let i=n?JF(e.actions):[];return ar("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},ar("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(r=e.actions)===null||r===void 0?void 0:r.map((s,o)=>{let a=!1,l=p=>{if(p.preventDefault(),a)return;a=!0;let v=Pd(t.state.field(ho).diagnostics,e);v&&s.apply(t,v.from,v.to)},{name:u}=s,c=i[o]?u.indexOf(i[o]):-1,f=c<0?u:[u.slice(0,c),ar("u",u.slice(c,c+1)),u.slice(c+1)];return ar("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${u}${c<0?"":` (access key "${i[o]})"`}.`},f)}),e.source&&ar("div",{class:"cm-diagnosticSource"},e.source))}class Vre extends ou{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return ar("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class eI{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=XF(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class J1{constructor(e){this.view=e,this.items=[];let n=i=>{if(i.keyCode==27)ZN(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=JF(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==i.keyCode){let l=Pd(this.view.state.field(ho).diagnostics,s);l&&s.actions[a].apply(e,l.from,l.to)}}else return;i.preventDefault()},r=i=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(i.target)&&this.moveSelection(s)};this.list=ar("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:r}),this.dom=ar("div",{class:"cm-panel-lint"},this.list,ar("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>ZN(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(ho).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(ho),r=0,i=!1,s=null;for(e.between(0,this.view.state.doc.length,(o,a,{spec:l})=>{let u=-1,c;for(let f=r;f<this.items.length;f++)if(this.items[f].diagnostic==l.diagnostic){u=f;break}u<0?(c=new eI(this.view,l.diagnostic),this.items.splice(r,0,c),i=!0):(c=this.items[u],u>r&&(this.items.splice(r,u-r),i=!0)),n&&c.diagnostic==n.diagnostic?c.dom.hasAttribute("aria-selected")||(c.dom.setAttribute("aria-selected","true"),s=c):c.dom.hasAttribute("aria-selected")&&c.dom.removeAttribute("aria-selected"),r++});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new eI(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:a})=>{o.top<a.top?this.list.scrollTop-=a.top-o.top:o.bottom>a.bottom&&(this.list.scrollTop+=o.bottom-a.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function n(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)n();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(ho),r=Pd(n.diagnostics,this.items[e].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:KF.of(r)})}static open(e){return new J1(e)}}function Ry(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function j0(t){return Ry(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const Bre=gt.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:j0("#d11")},".cm-lintRange-warning":{backgroundImage:j0("orange")},".cm-lintRange-info":{backgroundImage:j0("#999")},".cm-lintRange-hint":{backgroundImage:j0("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function tI(t){return t=="error"?4:t=="warning"?3:t=="info"?2:1}class jre extends ll{constructor(e){super(),this.diagnostics=e,this.severity=e.reduce((n,r)=>tI(n)<tI(r.severity)?r.severity:n,"hint")}toDOM(e){let n=document.createElement("div");n.className="cm-lint-marker cm-lint-marker-"+this.severity;let r=this.diagnostics,i=e.state.facet(X1).tooltipFilter;return i&&(r=i(r)),r.length&&(n.onmouseover=()=>Hre(e,n,r)),n}}function zre(t,e){let n=r=>{let i=e.getBoundingClientRect();if(!(r.clientX>i.left-10&&r.clientX<i.right+10&&r.clientY>i.top-10&&r.clientY<i.bottom+10)){for(let s=r.target;s;s=s.parentNode)if(s.nodeType==1&&s.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",n),t.state.field(QF)&&t.dispatch({effects:nC.of(null)})}};window.addEventListener("mousemove",n)}function Hre(t,e,n){function r(){let o=t.elementAtHeight(e.getBoundingClientRect().top+5-t.documentTop);t.coordsAtPos(o.from)&&t.dispatch({effects:nC.of({pos:o.from,above:!1,create(){return{dom:YF(t,n),getCoords:()=>e.getBoundingClientRect()}}})}),e.onmouseout=e.onmousemove=null,zre(t,e)}let{hoverTime:i}=t.state.facet(X1),s=setTimeout(r,i);e.onmouseout=()=>{clearTimeout(s),e.onmouseout=e.onmousemove=null},e.onmousemove=()=>{clearTimeout(s),s=setTimeout(r,i)}}function Ure(t,e){let n=Object.create(null);for(let i of e){let s=t.lineAt(i.from);(n[s.from]||(n[s.from]=[])).push(i)}let r=[];for(let i in n)r.push(new jre(n[i]).range(+i));return Vn.of(r,!0)}const qre=B1({class:"cm-gutter-lint",markers:t=>t.state.field(ZF)}),ZF=Zr.define({create(){return Vn.empty},update(t,e){t=t.map(e.changes);let n=e.state.facet(X1).markerFilter;for(let r of e.effects)if(r.is(Y1)){let i=r.value;n&&(i=n(i||[])),t=Ure(e.state.doc,i.slice(0))}return t}}),nC=Kt.define(),QF=Zr.define({create(){return null},update(t,e){return t&&e.docChanged&&(t=WF(e,t)?null:Object.assign(Object.assign({},t),{pos:e.changes.mapPos(t.pos)})),e.effects.reduce((n,r)=>r.is(nC)?r.value:n,t)},provide:t=>V1.from(t)}),Wre=gt.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:Ry('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:Ry('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error":{content:Ry('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}}),eV=[ho,gt.decorations.compute([ho],t=>{let{selected:e,panel:n}=t.field(ho);return!e||!n||e.from==e.to?Rt.none:Rt.set([Ire.range(e.from,e.to)])}),m4($re,{hideOn:WF}),Bre],X1=vt.define({combine(t){return _a(t,{hoverTime:300,markerFilter:null,tooltipFilter:null})}});function tV(t={}){return[X1.of(t),ZF,qre,Wre,QF]}const Jf=(()=>[Nk(),eee(),xQ(),Hk(),jee(),cQ(),gQ(),un.allowMultipleSelections.of(!0),Pee(),Vk(qee,{fallback:!0}),Bk(),eC(),UF(),RQ(),FQ(),CQ(),vne(),Vm.of([...Ere,...fne,...Lne,...Ste,...Fee,...qF,...Dre])])();/*!
* VueCodemirror v6.1.1
* Copyright (c) Surmon. All rights reserved.
* Released under the MIT License.
* Surmon
*/var Gre=Object.freeze({autofocus:!1,disabled:!1,indentWithTab:!0,tabSize:2,placeholder:"",autoDestroy:!0,extensions:[Jf]}),nV=Symbol("vue-codemirror-global-config"),cs,Kre=function(t){var e=t.onUpdate,n=t.onChange,r=t.onFocus,i=t.onBlur,s=function(o,a){var l={};for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&a.indexOf(u)<0&&(l[u]=o[u]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function"){var c=0;for(u=Object.getOwnPropertySymbols(o);c<u.length;c++)a.indexOf(u[c])<0&&Object.prototype.propertyIsEnumerable.call(o,u[c])&&(l[u[c]]=o[u[c]])}return l}(t,["onUpdate","onChange","onFocus","onBlur"]);return un.create({doc:s.doc,selection:s.selection,extensions:(Array.isArray(s.extensions)?s.extensions:[s.extensions]).concat([gt.updateListener.of(function(o){e(o),o.docChanged&&n(o.state.doc.toString(),o),o.focusChanged&&(o.view.hasFocus?r(o):i(o))})])})},Ih=function(t){var e=new Rm;return{compartment:e,run:function(n){e.get(t.state)?t.dispatch({effects:e.reconfigure(n)}):t.dispatch({effects:Kt.appendConfig.of(e.of(n))})}}},nI=function(t,e){var n=Ih(t),r=n.compartment,i=n.run;return function(s){var o=r.get(t.state);i(s??o!==e?e:[])}},z0={type:Boolean,default:void 0},Yre={autofocus:z0,disabled:z0,indentWithTab:z0,tabSize:Number,placeholder:String,style:Object,autoDestroy:z0,phrases:Object,root:Object,extensions:Array,selection:Object},Jre={modelValue:{type:String,default:""}},Xre=Object.assign(Object.assign({},Yre),Jre);(function(t){t.Change="change",t.Update="update",t.Focus="focus",t.Blur="blur",t.Ready="ready",t.ModelUpdate="update:modelValue"})(cs||(cs={}));var Zc={};Zc[cs.Change]=function(t,e){return!0},Zc[cs.Update]=function(t){return!0},Zc[cs.Focus]=function(t){return!0},Zc[cs.Blur]=function(t){return!0},Zc[cs.Ready]=function(t){return!0};var rV={};rV[cs.ModelUpdate]=Zc[cs.Change];var Zre=Object.assign(Object.assign({},Zc),rV),Ly=fi({name:"VueCodemirror",props:Object.assign({},Xre),emits:Object.assign({},Zre),setup:function(t,e){var n=lg(),r=lg(),i=lg(),s=Object.assign(Object.assign({},Gre),yf(nV,{})),o=qa(function(){var a={};return Object.keys(mn(t)).forEach(function(l){var u;l!=="modelValue"&&(a[l]=(u=t[l])!==null&&u!==void 0?u:s[l])}),a});return Hd(function(){var a;r.value=Kre({doc:t.modelValue,selection:o.value.selection,extensions:(a=s.extensions)!==null&&a!==void 0?a:[],onFocus:function(u){return e.emit(cs.Focus,u)},onBlur:function(u){return e.emit(cs.Blur,u)},onUpdate:function(u){return e.emit(cs.Update,u)},onChange:function(u,c){u!==t.modelValue&&(e.emit(cs.Change,u,c),e.emit(cs.ModelUpdate,u,c))}}),i.value=function(u){return new gt(Object.assign({},u))}({state:r.value,parent:n.value,root:o.value.root});var l=function(u){var c=function(){return u.state.doc.toString()},f=Ih(u).run,p=nI(u,[gt.editable.of(!1),un.readOnly.of(!0)]),v=nI(u,Vm.of([hne])),b=Ih(u).run,E=Ih(u).run,P=Ih(u).run,S=Ih(u).run;return{focus:function(){return u.focus()},getDoc:c,setDoc:function(A){A!==c()&&u.dispatch({changes:{from:0,to:u.state.doc.length,insert:A}})},reExtensions:f,toggleDisabled:p,toggleIndentWithTab:v,setTabSize:function(A){b([un.tabSize.of(A),jm.of(" ".repeat(A))])},setPhrases:function(A){E([un.phrases.of(A)])},setPlaceholder:function(A){P(MQ(A))},setStyle:function(A){A===void 0&&(A={}),S(gt.theme({"&":Object.assign({},A)}))}}}(i.value);Ai(function(){return t.modelValue},function(u){u!==l.getDoc()&&l.setDoc(u)}),Ai(function(){return t.extensions},function(u){return l.reExtensions(u||[])},{immediate:!0}),Ai(function(){return o.value.disabled},function(u){return l.toggleDisabled(u)},{immediate:!0}),Ai(function(){return o.value.indentWithTab},function(u){return l.toggleIndentWithTab(u)},{immediate:!0}),Ai(function(){return o.value.tabSize},function(u){return l.setTabSize(u)},{immediate:!0}),Ai(function(){return o.value.phrases},function(u){return l.setPhrases(u||{})},{immediate:!0}),Ai(function(){return o.value.placeholder},function(u){return l.setPlaceholder(u)},{immediate:!0}),Ai(function(){return o.value.style},function(u){return l.setStyle(u)},{immediate:!0}),o.value.autofocus&&l.focus(),e.emit(cs.Ready,{state:r.value,view:i.value,container:n.value})}),Im(function(){o.value.autoDestroy&&i.value&&function(a){a.destroy()}(i.value)}),function(){return $1("div",{class:"v-codemirror",style:{display:"contents"},ref:n})}}}),Xf=Ly,Qre=function(t,e){t.component(Ly.name,Ly),t.component("Codemirror",Ly),function(n,r){n.provide(nV,r)}(t,e)},eie={Codemirror:Xf,install:Qre},tie={prefix:"fas",iconName:"circle-minus",icon:[512,512,["minus-circle"],"f056","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM184 232H328c13.3 0 24 10.7 24 24s-10.7 24-24 24H184c-13.3 0-24-10.7-24-24s10.7-24 24-24z"]},nie=tie,rie={prefix:"fas",iconName:"pen-to-square",icon:[512,512,["edit"],"f044","M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"]},iie=rie,sie={prefix:"fas",iconName:"wand-magic-sparkles",icon:[576,512,["magic-wand-sparkles"],"e2ca","M234.7 42.7L197 56.8c-3 1.1-5 4-5 7.2s2 6.1 5 7.2l37.7 14.1L248.8 123c1.1 3 4 5 7.2 5s6.1-2 7.2-5l14.1-37.7L315 71.2c3-1.1 5-4 5-7.2s-2-6.1-5-7.2L277.3 42.7 263.2 5c-1.1-3-4-5-7.2-5s-6.1 2-7.2 5L234.7 42.7zM46.1 395.4c-18.7 18.7-18.7 49.1 0 67.9l34.6 34.6c18.7 18.7 49.1 18.7 67.9 0L529.9 116.5c18.7-18.7 18.7-49.1 0-67.9L495.3 14.1c-18.7-18.7-49.1-18.7-67.9 0L46.1 395.4zM484.6 82.6l-105 105-23.3-23.3 105-105 23.3 23.3zM7.5 117.2C3 118.9 0 123.2 0 128s3 9.1 7.5 10.8L64 160l21.2 56.5c1.7 4.5 6 7.5 10.8 7.5s9.1-3 10.8-7.5L128 160l56.5-21.2c4.5-1.7 7.5-6 7.5-10.8s-3-9.1-7.5-10.8L128 96 106.8 39.5C105.1 35 100.8 32 96 32s-9.1 3-10.8 7.5L64 96 7.5 117.2zm352 256c-4.5 1.7-7.5 6-7.5 10.8s3 9.1 7.5 10.8L416 416l21.2 56.5c1.7 4.5 6 7.5 10.8 7.5s9.1-3 10.8-7.5L480 416l56.5-21.2c4.5-1.7 7.5-6 7.5-10.8s-3-9.1-7.5-10.8L480 352l-21.2-56.5c-1.7-4.5-6-7.5-10.8-7.5s-9.1 3-10.8 7.5L416 352l-56.5 21.2z"]},oie={prefix:"fas",iconName:"arrow-pointer",icon:[320,512,["mouse-pointer"],"f245","M0 55.2V426c0 12.2 9.9 22 22 22c6.3 0 12.4-2.7 16.6-7.5L121.2 346l58.1 116.3c7.9 15.8 27.1 22.2 42.9 14.3s22.2-27.1 14.3-42.9L179.8 320H297.9c12.2 0 22.1-9.9 22.1-22.1c0-6.3-2.7-12.3-7.4-16.5L38.6 37.9C34.3 34.1 28.9 32 23.2 32C10.4 32 0 42.4 0 55.2z"]},aie=oie,lie={prefix:"fas",iconName:"maximize",icon:[512,512,["expand-arrows-alt"],"f31e","M200 32H56C42.7 32 32 42.7 32 56V200c0 9.7 5.8 18.5 14.8 22.2s19.3 1.7 26.2-5.2l40-40 79 79-79 79L73 295c-6.9-6.9-17.2-8.9-26.2-5.2S32 302.3 32 312V456c0 13.3 10.7 24 24 24H200c9.7 0 18.5-5.8 22.2-14.8s1.7-19.3-5.2-26.2l-40-40 79-79 79 79-40 40c-6.9 6.9-8.9 17.2-5.2 26.2s12.5 14.8 22.2 14.8H456c13.3 0 24-10.7 24-24V312c0-9.7-5.8-18.5-14.8-22.2s-19.3-1.7-26.2 5.2l-40 40-79-79 79-79 40 40c6.9 6.9 17.2 8.9 26.2 5.2s14.8-12.5 14.8-22.2V56c0-13.3-10.7-24-24-24H312c-9.7 0-18.5 5.8-22.2 14.8s-1.7 19.3 5.2 26.2l40 40-79 79-79-79 40-40c6.9-6.9 8.9-17.2 5.2-26.2S209.7 32 200 32z"]},uie=lie,cie={prefix:"fas",iconName:"circle-play",icon:[512,512,[61469,"play-circle"],"f144","M0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zM188.3 147.1c-7.6 4.2-12.3 12.3-12.3 20.9V344c0 8.7 4.7 16.7 12.3 20.9s16.8 4.1 24.3-.5l144-88c7.1-4.4 11.5-12.1 11.5-20.5s-4.4-16.1-11.5-20.5l-144-88c-7.4-4.5-16.7-4.7-24.3-.5z"]},fie=cie,hie={prefix:"fas",iconName:"square",icon:[448,512,[9632,9723,9724,61590],"f0c8","M0 96C0 60.7 28.7 32 64 32H384c35.3 0 64 28.7 64 64V416c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V96z"]},die={prefix:"fas",iconName:"filter",icon:[512,512,[],"f0b0","M3.9 54.9C10.5 40.9 24.5 32 40 32H472c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L320 320.9V448c0 12.1-6.8 23.2-17.7 28.6s-23.8 4.3-33.5-3l-64-48c-8.1-6-12.8-15.5-12.8-25.6V320.9L9 97.3C-.7 85.4-2.8 68.8 3.9 54.9z"]},pie={prefix:"fas",iconName:"question",icon:[320,512,[10067,10068,61736],"3f","M80 160c0-35.3 28.7-64 64-64h32c35.3 0 64 28.7 64 64v3.6c0 21.8-11.1 42.1-29.4 53.8l-42.2 27.1c-25.2 16.2-40.4 44.1-40.4 74V320c0 17.7 14.3 32 32 32s32-14.3 32-32v-1.4c0-8.2 4.2-15.8 11-20.2l42.2-27.1c36.6-23.6 58.8-64.1 58.8-107.7V160c0-70.7-57.3-128-128-128H144C73.3 32 16 89.3 16 160c0 17.7 14.3 32 32 32s32-14.3 32-32zm80 320a40 40 0 1 0 0-80 40 40 0 1 0 0 80z"]},gie={prefix:"fas",iconName:"arrow-right",icon:[448,512,[8594],"f061","M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"]},mie={prefix:"fas",iconName:"circle",icon:[512,512,[128308,128309,128992,128993,128994,128995,128996,9679,9898,9899,11044,61708,61915],"f111","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z"]},vie={prefix:"fas",iconName:"pen",icon:[512,512,[128394],"f304","M362.7 19.3L314.3 67.7 444.3 197.7l48.4-48.4c25-25 25-65.5 0-90.5L453.3 19.3c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2C-1.5 489.7 .8 498.8 7 505s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L421.7 220.3 291.7 90.3z"]},yie={prefix:"fas",iconName:"trash",icon:[448,512,[],"f1f8","M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z"]},bie={prefix:"fas",iconName:"up-right-from-square",icon:[512,512,["external-link-alt"],"f35d","M352 0c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9L370.7 96 201.4 265.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L416 141.3l41.4 41.4c9.2 9.2 22.9 11.9 34.9 6.9s19.8-16.6 19.8-29.6V32c0-17.7-14.3-32-32-32H352zM80 32C35.8 32 0 67.8 0 112V432c0 44.2 35.8 80 80 80H400c44.2 0 80-35.8 80-80V320c0-17.7-14.3-32-32-32s-32 14.3-32 32V432c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V112c0-8.8 7.2-16 16-16H192c17.7 0 32-14.3 32-32s-14.3-32-32-32H80z"]},wie={prefix:"fas",iconName:"circle-info",icon:[512,512,["info-circle"],"f05a","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336h24V272H216c-13.3 0-24-10.7-24-24s10.7-24 24-24h48c13.3 0 24 10.7 24 24v88h8c13.3 0 24 10.7 24 24s-10.7 24-24 24H216c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},xie=wie,Sie={prefix:"fas",iconName:"file-arrow-down",icon:[384,512,["file-download"],"f56d","M64 0C28.7 0 0 28.7 0 64V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V160H256c-17.7 0-32-14.3-32-32V0H64zM256 0V128H384L256 0zM216 232V334.1l31-31c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-72 72c-9.4 9.4-24.6 9.4-33.9 0l-72-72c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l31 31V232c0-13.3 10.7-24 24-24s24 10.7 24 24z"]},Eie={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},_ie={prefix:"fas",iconName:"circle-plus",icon:[512,512,["plus-circle"],"f055","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM232 344V280H168c-13.3 0-24-10.7-24-24s10.7-24 24-24h64V168c0-13.3 10.7-24 24-24s24 10.7 24 24v64h64c13.3 0 24 10.7 24 24s-10.7 24-24 24H280v64c0 13.3-10.7 24-24 24s-24-10.7-24-24z"]},Aie=_ie,kie={prefix:"fas",iconName:"check",icon:[448,512,[10003,10004],"f00c","M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]},Cie={prefix:"fas",iconName:"triangle-exclamation",icon:[512,512,[9888,"exclamation-triangle","warning"],"f071","M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},Pie=!1;/*!
  * pinia v2.0.36
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */let iV;const Z1=t=>iV=t,sV=Symbol();function R_(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var vg;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(vg||(vg={}));function Oie(){const t=KA(!0),e=t.run(()=>qu({}));let n=[],r=[];const i=Of({install(s){Z1(i),i._a=s,s.provide(sV,i),s.config.globalProperties.$pinia=i,r.forEach(o=>n.push(o)),r=[]},use(s){return!this._a&&!Pie?r.push(s):n.push(s),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return i}const oV=()=>{};function rI(t,e,n,r=oV){t.push(e);const i=()=>{const s=t.indexOf(e);s>-1&&(t.splice(s,1),r())};return!n&&YA()&&yL(i),i}function Eh(t,...e){t.slice().forEach(n=>{n(...e)})}function L_(t,e){t instanceof Map&&e instanceof Map&&e.forEach((n,r)=>t.set(r,n)),t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],i=t[n];R_(i)&&R_(r)&&t.hasOwnProperty(n)&&!kr(r)&&!Ul(r)?t[n]=L_(i,r):t[n]=r}return t}const Tie=Symbol();function Mie(t){return!R_(t)||!t.hasOwnProperty(Tie)}const{assign:Nu}=Object;function Nie(t){return!!(kr(t)&&t.effect)}function Iie(t,e,n,r){const{state:i,actions:s,getters:o}=e,a=n.state.value[t];let l;function u(){a||(n.state.value[t]=i?i():{});const c=IL(n.state.value[t]);return Nu(c,s,Object.keys(o||{}).reduce((f,p)=>(f[p]=Of(qa(()=>{Z1(n);const v=n._s.get(t);return o[p].call(v,v)})),f),{}))}return l=aV(t,u,e,n,r,!0),l}function aV(t,e,n={},r,i,s){let o;const a=Nu({actions:{}},n),l={deep:!0};let u,c,f=Of([]),p=Of([]),v;const b=r.state.value[t];!s&&!b&&(r.state.value[t]={}),qu({});let E;function P(_){let M;u=c=!1,typeof _=="function"?(_(r.state.value[t]),M={type:vg.patchFunction,storeId:t,events:v}):(L_(r.state.value[t],_),M={type:vg.patchObject,payload:_,storeId:t,events:v});const D=E=Symbol();_1().then(()=>{E===D&&(u=!0)}),c=!0,Eh(f,M,r.state.value[t])}const S=s?function(){const{state:M}=n,D=M?M():{};this.$patch(q=>{Nu(q,D)})}:oV;function A(){o.stop(),f=[],p=[],r._s.delete(t)}function I(_,M){return function(){Z1(r);const D=Array.from(arguments),q=[],R=[];function W(de){q.push(de)}function G(de){R.push(de)}Eh(p,{args:D,name:_,store:x,after:W,onError:G});let Z;try{Z=M.apply(this&&this.$id===t?this:x,D)}catch(de){throw Eh(R,de),de}return Z instanceof Promise?Z.then(de=>(Eh(q,de),de)).catch(de=>(Eh(R,de),Promise.reject(de))):(Eh(q,Z),Z)}}const N={_p:r,$id:t,$onAction:rI.bind(null,p),$patch:P,$reset:S,$subscribe(_,M={}){const D=rI(f,_,M.detached,()=>q()),q=o.run(()=>Ai(()=>r.state.value[t],R=>{(M.flush==="sync"?c:u)&&_({storeId:t,type:vg.direct,events:v},R)},Nu({},l,M)));return D},$dispose:A},x=Tm(N);r._s.set(t,x);const g=r._e.run(()=>(o=KA(),o.run(()=>e())));for(const _ in g){const M=g[_];if(kr(M)&&!Nie(M)||Ul(M))s||(b&&Mie(M)&&(kr(M)?M.value=b[_]:L_(M,b[_])),r.state.value[t][_]=M);else if(typeof M=="function"){const D=I(_,M);g[_]=D,a.actions[_]=M}}return Nu(x,g),Nu(mn(x),g),Object.defineProperty(x,"$state",{get:()=>r.state.value[t],set:_=>{P(M=>{Nu(M,_)})}}),r._p.forEach(_=>{Nu(x,o.run(()=>_({store:x,app:r._a,pinia:r,options:a})))}),b&&s&&n.hydrate&&n.hydrate(x.$state,b),u=!0,c=!0,x}function Q1(t,e,n){let r,i;const s=typeof e=="function";typeof t=="string"?(r=t,i=s?n:e):(i=t,r=t.id);function o(a,l){const u=cl();return a=a||u&&yf(sV,null),a&&Z1(a),a=iV,a._s.has(r)||(s?aV(r,e,i,a):Iie(r,i,a)),a._s.get(r)}return o.$id=r,o}let $ie="Store";function Mi(...t){return t.reduce((e,n)=>(e[n.$id+$ie]=function(){return n(this.$pinia)},e),{})}const au=Q1("uiState",{state:()=>({mode:sz,showModal:"test",showEditor:"none",lastSelectedID:""}),actions:{setMode(t){this.mode=t},setModal(t,e=""){this.showModal=t,this.lastSelectedID=e}}});function el(t){"@babel/helpers - typeof";return el=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},el(t)}function lV(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function iI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function uV(t,e,n){return e&&iI(t.prototype,e),n&&iI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Rie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&em(t,e)}function Qg(t){return Qg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Qg(t)}function em(t,e){return em=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},em(t,e)}function cV(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function yg(t,e,n){return cV()?yg=Reflect.construct.bind():yg=function(i,s,o){var a=[null];a.push.apply(a,s);var l=Function.bind.apply(i,a),u=new l;return o&&em(u,o.prototype),u},yg.apply(null,arguments)}function Lie(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function D_(t){var e=typeof Map=="function"?new Map:void 0;return D_=function(r){if(r===null||!Lie(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return yg(r,arguments,Qg(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),em(i,r)},D_(t)}function Die(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Fie(t,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Die(t)}function Vie(t){var e=cV();return function(){var r=Qg(t),i;if(e){var s=Qg(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return Fie(this,i)}}function Bie(t){return jie(t)||zie(t)||fV(t)||Hie()}function jie(t){if(Array.isArray(t))return F_(t)}function zie(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function fV(t,e){if(t){if(typeof t=="string")return F_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F_(t,e)}}function F_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Hie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Uie(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=fV(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){n=n.call(t)},n:function(){var l=n.next();return s=l.done,l},e:function(l){o=!0,a=l},f:function(){try{!s&&n.return!=null&&n.return()}finally{if(o)throw a}}}}var Ns=Object.prototype.hasOwnProperty;function Uc(t,e){return t=t.slice(),t.push(e),t}function V_(t,e){return e=e.slice(),e.unshift(t),e}var qie=function(t){Rie(n,t);var e=Vie(n);function n(r){var i;return lV(this,n),i=e.call(this,'JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)'),i.avoidNew=!0,i.value=r,i.name="NewError",i}return uV(n)}(D_(Error));function Xn(t,e,n,r,i){if(!(this instanceof Xn))try{return new Xn(t,e,n,r,i)}catch(l){if(!l.avoidNew)throw l;return l.value}typeof t=="string"&&(i=r,r=n,n=e,e=t,t=null);var s=t&&el(t)==="object";if(t=t||{},this.json=t.json||n,this.path=t.path||e,this.resultType=t.resultType||"value",this.flatten=t.flatten||!1,this.wrap=Ns.call(t,"wrap")?t.wrap:!0,this.sandbox=t.sandbox||{},this.preventEval=t.preventEval||!1,this.parent=t.parent||null,this.parentProperty=t.parentProperty||null,this.callback=t.callback||r||null,this.otherTypeCallback=t.otherTypeCallback||i||function(){throw new TypeError("You must supply an otherTypeCallback callback option with the @other() operator.")},t.autostart!==!1){var o={path:s?t.path:e};s?"json"in t&&(o.json=t.json):o.json=n;var a=this.evaluate(o);if(!a||el(a)!=="object")throw new qie(a);return a}}Xn.prototype.evaluate=function(t,e,n,r){var i=this,s=this.parent,o=this.parentProperty,a=this.flatten,l=this.wrap;if(this.currResultType=this.resultType,this.currPreventEval=this.preventEval,this.currSandbox=this.sandbox,n=n||this.callback,this.currOtherTypeCallback=r||this.otherTypeCallback,e=e||this.json,t=t||this.path,t&&el(t)==="object"&&!Array.isArray(t)){if(!t.path&&t.path!=="")throw new TypeError('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');if(!Ns.call(t,"json"))throw new TypeError('You must supply a "json" property when providing an object argument to JSONPath.evaluate().');var u=t;e=u.json,a=Ns.call(t,"flatten")?t.flatten:a,this.currResultType=Ns.call(t,"resultType")?t.resultType:this.currResultType,this.currSandbox=Ns.call(t,"sandbox")?t.sandbox:this.currSandbox,l=Ns.call(t,"wrap")?t.wrap:l,this.currPreventEval=Ns.call(t,"preventEval")?t.preventEval:this.currPreventEval,n=Ns.call(t,"callback")?t.callback:n,this.currOtherTypeCallback=Ns.call(t,"otherTypeCallback")?t.otherTypeCallback:this.currOtherTypeCallback,s=Ns.call(t,"parent")?t.parent:s,o=Ns.call(t,"parentProperty")?t.parentProperty:o,t=t.path}if(s=s||null,o=o||null,Array.isArray(t)&&(t=Xn.toPathString(t)),!(!t&&t!==""||!e)){var c=Xn.toPathArray(t);c[0]==="$"&&c.length>1&&c.shift(),this._hasParentSelector=null;var f=this._trace(c,e,["$"],s,o,n).filter(function(p){return p&&!p.isParentSelector});return f.length?!l&&f.length===1&&!f[0].hasArrExpr?this._getPreferredOutput(f[0]):f.reduce(function(p,v){var b=i._getPreferredOutput(v);return a&&Array.isArray(b)?p=p.concat(b):p.push(b),p},[]):l?[]:void 0}};Xn.prototype._getPreferredOutput=function(t){var e=this.currResultType;switch(e){case"all":{var n=Array.isArray(t.path)?t.path:Xn.toPathArray(t.path);return t.pointer=Xn.toPointer(n),t.path=typeof t.path=="string"?t.path:Xn.toPathString(t.path),t}case"value":case"parent":case"parentProperty":return t[e];case"path":return Xn.toPathString(t[e]);case"pointer":return Xn.toPointer(t.path);default:throw new TypeError("Unknown result type")}};Xn.prototype._handleCallback=function(t,e,n){if(e){var r=this._getPreferredOutput(t);t.path=typeof t.path=="string"?t.path:Xn.toPathString(t.path),e(r,n,t)}};Xn.prototype._trace=function(t,e,n,r,i,s,o,a){var l=this,u;if(!t.length)return u={path:n,value:e,parent:r,parentProperty:i,hasArrExpr:o},this._handleCallback(u,s,"value"),u;var c=t[0],f=t.slice(1),p=[];function v(R){Array.isArray(R)?R.forEach(function(W){p.push(W)}):p.push(R)}if((typeof c!="string"||a)&&e&&Ns.call(e,c))v(this._trace(f,e[c],Uc(n,c),e,c,s,o));else if(c==="*")this._walk(e,function(R){v(l._trace(f,e[R],Uc(n,R),e,R,s,!0,!0))});else if(c==="..")v(this._trace(f,e,n,r,i,s,o)),this._walk(e,function(R){el(e[R])==="object"&&v(l._trace(t.slice(),e[R],Uc(n,R),e,R,s,!0))});else{if(c==="^")return this._hasParentSelector=!0,{path:n.slice(0,-1),expr:f,isParentSelector:!0};if(c==="~")return u={path:Uc(n,c),value:i,parent:r,parentProperty:null},this._handleCallback(u,s,"property"),u;if(c==="$")v(this._trace(f,e,n,null,null,s,o));else if(/^(\x2D?[0-9]*):(\x2D?[0-9]*):?([0-9]*)$/.test(c))v(this._slice(c,f,e,n,r,i,s));else if(c.indexOf("?(")===0){if(this.currPreventEval)throw new Error("Eval [?(expr)] prevented in JSONPath expression.");var b=c.replace(/^\?\(((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?)\)$/,"$1");this._walk(e,function(R){l._eval(b,e[R],R,n,r,i)&&v(l._trace(f,e[R],Uc(n,R),e,R,s,!0))})}else if(c[0]==="("){if(this.currPreventEval)throw new Error("Eval [(expr)] prevented in JSONPath expression.");v(this._trace(V_(this._eval(c,e,n[n.length-1],n.slice(0,-1),r,i),f),e,n,r,i,s,o))}else if(c[0]==="@"){var E=!1,P=c.slice(1,-2);switch(P){case"scalar":(!e||!["object","function"].includes(el(e)))&&(E=!0);break;case"boolean":case"string":case"undefined":case"function":el(e)===P&&(E=!0);break;case"integer":Number.isFinite(e)&&!(e%1)&&(E=!0);break;case"number":Number.isFinite(e)&&(E=!0);break;case"nonFinite":typeof e=="number"&&!Number.isFinite(e)&&(E=!0);break;case"object":e&&el(e)===P&&(E=!0);break;case"array":Array.isArray(e)&&(E=!0);break;case"other":E=this.currOtherTypeCallback(e,n,r,i);break;case"null":e===null&&(E=!0);break;default:throw new TypeError("Unknown value type "+P)}if(E)return u={path:n,value:e,parent:r,parentProperty:i},this._handleCallback(u,s,"value"),u}else if(c[0]==="`"&&e&&Ns.call(e,c.slice(1))){var S=c.slice(1);v(this._trace(f,e[S],Uc(n,S),e,S,s,o,!0))}else if(c.includes(",")){var A=c.split(","),I=Uie(A),N;try{for(I.s();!(N=I.n()).done;){var x=N.value;v(this._trace(V_(x,f),e,n,r,i,s,!0))}}catch(R){I.e(R)}finally{I.f()}}else!a&&e&&Ns.call(e,c)&&v(this._trace(f,e[c],Uc(n,c),e,c,s,o,!0))}if(this._hasParentSelector)for(var g=0;g<p.length;g++){var _=p[g];if(_&&_.isParentSelector){var M=this._trace(_.expr,e,_.path,r,i,s,o);if(Array.isArray(M)){p[g]=M[0];for(var D=M.length,q=1;q<D;q++)g++,p.splice(g,0,M[q])}else p[g]=M}}return p};Xn.prototype._walk=function(t,e){if(Array.isArray(t))for(var n=t.length,r=0;r<n;r++)e(r);else t&&el(t)==="object"&&Object.keys(t).forEach(function(i){e(i)})};Xn.prototype._slice=function(t,e,n,r,i,s,o){if(Array.isArray(n)){var a=n.length,l=t.split(":"),u=l[2]&&Number.parseInt(l[2])||1,c=l[0]&&Number.parseInt(l[0])||0,f=l[1]&&Number.parseInt(l[1])||a;c=c<0?Math.max(0,c+a):Math.min(a,c),f=f<0?Math.max(0,f+a):Math.min(a,f);for(var p=[],v=c;v<f;v+=u){var b=this._trace(V_(v,e),n,r,i,s,o,!0);b.forEach(function(E){p.push(E)})}return p}};Xn.prototype._eval=function(t,e,n,r,i,s){this.currSandbox._$_parentProperty=s,this.currSandbox._$_parent=i,this.currSandbox._$_property=n,this.currSandbox._$_root=this.json,this.currSandbox._$_v=e;var o=t.includes("@path");o&&(this.currSandbox._$_path=Xn.toPathString(r.concat([n])));var a="script:"+t;if(!Xn.cache[a]){var l=t.replace(/@parentProperty/g,"_$_parentProperty").replace(/@parent/g,"_$_parent").replace(/@property/g,"_$_property").replace(/@root/g,"_$_root").replace(/@([\t-\r \)\.\[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])/g,"_$_v$1");o&&(l=l.replace(/@path/g,"_$_path")),Xn.cache[a]=new this.vm.Script(l)}try{return Xn.cache[a].runInNewContext(this.currSandbox)}catch(u){throw new Error("jsonPath: "+u.message+": "+t)}};Xn.cache={};Xn.toPathString=function(t){for(var e=t,n=e.length,r="$",i=1;i<n;i++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(e[i])||(r+=/^[\*0-9]+$/.test(e[i])?"["+e[i]+"]":"['"+e[i]+"']");return r};Xn.toPointer=function(t){for(var e=t,n=e.length,r="",i=1;i<n;i++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(e[i])||(r+="/"+e[i].toString().replace(/~/g,"~0").replace(/\//g,"~1"));return r};Xn.toPathArray=function(t){var e=Xn.cache;if(e[t])return e[t].concat();var n=[],r=t.replace(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/g,";$&;").replace(/['\[](\??\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\))['\]]/g,function(s,o){return"[#"+(n.push(o)-1)+"]"}).replace(/\[["']((?:(?!['\]])[\s\S])*)["']\]/g,function(s,o){return"['"+o.replace(/\./g,"%@%").replace(/~/g,"%%@@%%")+"']"}).replace(/~/g,";~;").replace(/["']?\.["']?(?!(?:(?!\[)[\s\S])*\])|\[["']?/g,";").replace(/%@%/g,".").replace(/%%@@%%/g,"~").replace(/(?:;)?(\^+)(?:;)?/g,function(s,o){return";"+o.split("").join(";")+";"}).replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,""),i=r.split(";").map(function(s){var o=s.match(/#([0-9]+)/);return!o||!o[1]?s:n[o[1]]});return e[t]=i,e[t].concat()};var Wie=function(e,n,r){for(var i=e.length,s=0;s<i;s++){var o=e[s];r(o)&&n.push(e.splice(s--,1)[0])}},Gie=function(){function t(e){lV(this,t),this.code=e}return uV(t,[{key:"runInNewContext",value:function(n){var r=this.code,i=Object.keys(n),s=[];Wie(i,s,function(c){return typeof n[c]=="function"});var o=i.map(function(c,f){return n[c]}),a=s.reduce(function(c,f){var p=n[f].toString();return/function/.test(p)||(p="function "+p),"var "+f+"="+p+";"+c},"");r=a+r,!/(["'])use strict\1/.test(r)&&!i.includes("arguments")&&(r="var arguments = undefined;"+r),r=r.replace(/;[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*$/,"");var l=r.lastIndexOf(";"),u=l>-1?r.slice(0,l+1)+" return "+r.slice(l+1):" return "+r;return yg(Function,i.concat([u])).apply(void 0,Bie(o))}}]),t}();Xn.prototype.vm={Script:Gie};function Kie(t,e){return Xn({resultType:"pointer",path:e,json:t})}var si=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ka(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function hV(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){if(this instanceof r){var i=[null];i.push.apply(i,arguments);var s=Function.bind.apply(e,i);return new s}return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var Yie=Object.prototype.hasOwnProperty,Jie=Object.prototype.toString,Xie=function(e,n,r){if(Jie.call(n)!=="[object Function]")throw new TypeError("iterator must be a function");var i=e.length;if(i===+i)for(var s=0;s<i;s++)n.call(r,e[s],s,e);else for(var o in e)Yie.call(e,o)&&n.call(r,e[o],o,e)},Zie=Xie,hc=nr;function nr(t,e,n){if(arguments.length===3)return nr.set(t,e,n);if(arguments.length===2)return nr.get(t,e);var r=nr.bind(nr,t);for(var i in nr)nr.hasOwnProperty(i)&&(r[i]=nr[i].bind(r,t));return r}nr.get=function(e,n){for(var r=Array.isArray(n)?n:nr.parse(n),i=0;i<r.length;++i){var s=r[i];if(!(typeof e=="object"&&s in e))throw new Error("Invalid reference token: "+s);e=e[s]}return e};nr.set=function(e,n,r){var i=Array.isArray(n)?n:nr.parse(n),s=i[0];if(i.length===0)throw Error("Can not set the root object");for(var o=0;o<i.length-1;++o){var a=i[o];typeof a!="string"&&typeof a!="number"&&(a=String(a)),!(a==="__proto__"||a==="constructor"||a==="prototype")&&(a==="-"&&Array.isArray(e)&&(a=e.length),s=i[o+1],a in e||(s.match(/^(\d+|-)$/)?e[a]=[]:e[a]={}),e=e[a])}return s==="-"&&Array.isArray(e)&&(s=e.length),e[s]=r,this};nr.remove=function(t,e){var n=Array.isArray(e)?e:nr.parse(e),r=n[n.length-1];if(r===void 0)throw new Error('Invalid JSON pointer for remove: "'+e+'"');var i=nr.get(t,n.slice(0,-1));if(Array.isArray(i)){var s=+r;if(r===""&&isNaN(s))throw new Error('Invalid array index: "'+r+'"');Array.prototype.splice.call(i,s,1)}else delete i[r]};nr.dict=function(e,n){var r={};return nr.walk(e,function(i,s){r[s]=i},n),r};nr.walk=function(e,n,r){var i=[];r=r||function(s){var o=Object.prototype.toString.call(s);return o==="[object Object]"||o==="[object Array]"},function s(o){Zie(o,function(a,l){i.push(String(l)),r(a)?s(a):n(a,nr.compile(i)),i.pop()})}(e)};nr.has=function(e,n){try{nr.get(e,n)}catch{return!1}return!0};nr.escape=function(e){return e.toString().replace(/~/g,"~0").replace(/\//g,"~1")};nr.unescape=function(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")};nr.parse=function(e){if(e==="")return[];if(e.charAt(0)!=="/")throw new Error("Invalid JSON pointer: "+e);return e.substring(1).split(/\//).map(nr.unescape)};nr.compile=function(e){return e.length===0?"":"/"+e.map(nr.escape).join("/")};var B_={exports:{}},dV={},wa={},Od={},Wm={},fn={},tm={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class e{}t._CodeOrName=e,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends e{constructor(A){if(super(),!t.IDENTIFIER.test(A))throw new Error("CodeGen: name must be a valid identifier");this.str=A}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=n;class r extends e{constructor(A){super(),this._items=typeof A=="string"?[A]:A}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const A=this._items[0];return A===""||A==='""'}get str(){var A;return(A=this._str)!==null&&A!==void 0?A:this._str=this._items.reduce((I,N)=>`${I}${N}`,"")}get names(){var A;return(A=this._names)!==null&&A!==void 0?A:this._names=this._items.reduce((I,N)=>(N instanceof n&&(I[N.str]=(I[N.str]||0)+1),I),{})}}t._Code=r,t.nil=new r("");function i(S,...A){const I=[S[0]];let N=0;for(;N<A.length;)a(I,A[N]),I.push(S[++N]);return new r(I)}t._=i;const s=new r("+");function o(S,...A){const I=[v(S[0])];let N=0;for(;N<A.length;)I.push(s),a(I,A[N]),I.push(s,v(S[++N]));return l(I),new r(I)}t.str=o;function a(S,A){A instanceof r?S.push(...A._items):A instanceof n?S.push(A):S.push(f(A))}t.addCodeArg=a;function l(S){let A=1;for(;A<S.length-1;){if(S[A]===s){const I=u(S[A-1],S[A+1]);if(I!==void 0){S.splice(A-1,3,I);continue}S[A++]="+"}A++}}function u(S,A){if(A==='""')return S;if(S==='""')return A;if(typeof S=="string")return A instanceof n||S[S.length-1]!=='"'?void 0:typeof A!="string"?`${S.slice(0,-1)}${A}"`:A[0]==='"'?S.slice(0,-1)+A.slice(1):void 0;if(typeof A=="string"&&A[0]==='"'&&!(S instanceof n))return`"${S}${A.slice(1)}`}function c(S,A){return A.emptyStr()?S:S.emptyStr()?A:o`${S}${A}`}t.strConcat=c;function f(S){return typeof S=="number"||typeof S=="boolean"||S===null?S:v(Array.isArray(S)?S.join(","):S)}function p(S){return new r(v(S))}t.stringify=p;function v(S){return JSON.stringify(S).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.safeStringify=v;function b(S){return typeof S=="string"&&t.IDENTIFIER.test(S)?new r(`.${S}`):i`[${S}]`}t.getProperty=b;function E(S){if(typeof S=="string"&&t.IDENTIFIER.test(S))return new r(`${S}`);throw new Error(`CodeGen: invalid export name: ${S}, use explicit $id name mapping`)}t.getEsmExportName=E;function P(S){return new r(S.toString())}t.regexpCode=P})(tm);var j_={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const e=tm;class n extends Error{constructor(u){super(`CodeGen: "code" for ${u} not defined`),this.value=u.value}}var r;(function(l){l[l.Started=0]="Started",l[l.Completed=1]="Completed"})(r=t.UsedValueState||(t.UsedValueState={})),t.varKinds={const:new e.Name("const"),let:new e.Name("let"),var:new e.Name("var")};class i{constructor({prefixes:u,parent:c}={}){this._names={},this._prefixes=u,this._parent=c}toName(u){return u instanceof e.Name?u:this.name(u)}name(u){return new e.Name(this._newName(u))}_newName(u){const c=this._names[u]||this._nameGroup(u);return`${u}${c.index++}`}_nameGroup(u){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(u)||this._prefixes&&!this._prefixes.has(u))throw new Error(`CodeGen: prefix "${u}" is not allowed in this scope`);return this._names[u]={prefix:u,index:0}}}t.Scope=i;class s extends e.Name{constructor(u,c){super(c),this.prefix=u}setValue(u,{property:c,itemIndex:f}){this.value=u,this.scopePath=(0,e._)`.${new e.Name(c)}[${f}]`}}t.ValueScopeName=s;const o=(0,e._)`\n`;class a extends i{constructor(u){super(u),this._values={},this._scope=u.scope,this.opts={...u,_n:u.lines?o:e.nil}}get(){return this._scope}name(u){return new s(u,this._newName(u))}value(u,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const p=this.toName(u),{prefix:v}=p,b=(f=c.key)!==null&&f!==void 0?f:c.ref;let E=this._values[v];if(E){const A=E.get(b);if(A)return A}else E=this._values[v]=new Map;E.set(b,p);const P=this._scope[v]||(this._scope[v]=[]),S=P.length;return P[S]=c.ref,p.setValue(c,{property:v,itemIndex:S}),p}getValue(u,c){const f=this._values[u];if(f)return f.get(c)}scopeRefs(u,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,e._)`${u}${f.scopePath}`})}scopeCode(u=this._values,c,f){return this._reduceValues(u,p=>{if(p.value===void 0)throw new Error(`CodeGen: name "${p}" has no value`);return p.value.code},c,f)}_reduceValues(u,c,f={},p){let v=e.nil;for(const b in u){const E=u[b];if(!E)continue;const P=f[b]=f[b]||new Map;E.forEach(S=>{if(P.has(S))return;P.set(S,r.Started);let A=c(S);if(A){const I=this.opts.es5?t.varKinds.var:t.varKinds.const;v=(0,e._)`${v}${I} ${S} = ${A};${this.opts._n}`}else if(A=p==null?void 0:p(S))v=(0,e._)`${v}${A}${this.opts._n}`;else throw new n(S);P.set(S,r.Completed)})}return v}}t.ValueScope=a})(j_);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const e=tm,n=j_;var r=tm;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return r.Name}});var i=j_;Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),t.operators={GT:new e._Code(">"),GTE:new e._Code(">="),LT:new e._Code("<"),LTE:new e._Code("<="),EQ:new e._Code("==="),NEQ:new e._Code("!=="),NOT:new e._Code("!"),OR:new e._Code("||"),AND:new e._Code("&&"),ADD:new e._Code("+")};class s{optimizeNodes(){return this}optimizeNames(F,U){return this}}class o extends s{constructor(F,U,ye){super(),this.varKind=F,this.name=U,this.rhs=ye}render({es5:F,_n:U}){const ye=F?n.varKinds.var:this.varKind,Fe=this.rhs===void 0?"":` = ${this.rhs}`;return`${ye} ${this.name}${Fe};`+U}optimizeNames(F,U){if(F[this.name.str])return this.rhs&&(this.rhs=Z(this.rhs,F,U)),this}get names(){return this.rhs instanceof e._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(F,U,ye){super(),this.lhs=F,this.rhs=U,this.sideEffects=ye}render({_n:F}){return`${this.lhs} = ${this.rhs};`+F}optimizeNames(F,U){if(!(this.lhs instanceof e.Name&&!F[this.lhs.str]&&!this.sideEffects))return this.rhs=Z(this.rhs,F,U),this}get names(){const F=this.lhs instanceof e.Name?{}:{...this.lhs.names};return G(F,this.rhs)}}class l extends a{constructor(F,U,ye,Fe){super(F,ye,Fe),this.op=U}render({_n:F}){return`${this.lhs} ${this.op}= ${this.rhs};`+F}}class u extends s{constructor(F){super(),this.label=F,this.names={}}render({_n:F}){return`${this.label}:`+F}}class c extends s{constructor(F){super(),this.label=F,this.names={}}render({_n:F}){return`break${this.label?` ${this.label}`:""};`+F}}class f extends s{constructor(F){super(),this.error=F}render({_n:F}){return`throw ${this.error};`+F}get names(){return this.error.names}}class p extends s{constructor(F){super(),this.code=F}render({_n:F}){return`${this.code};`+F}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(F,U){return this.code=Z(this.code,F,U),this}get names(){return this.code instanceof e._CodeOrName?this.code.names:{}}}class v extends s{constructor(F=[]){super(),this.nodes=F}render(F){return this.nodes.reduce((U,ye)=>U+ye.render(F),"")}optimizeNodes(){const{nodes:F}=this;let U=F.length;for(;U--;){const ye=F[U].optimizeNodes();Array.isArray(ye)?F.splice(U,1,...ye):ye?F[U]=ye:F.splice(U,1)}return F.length>0?this:void 0}optimizeNames(F,U){const{nodes:ye}=this;let Fe=ye.length;for(;Fe--;){const He=ye[Fe];He.optimizeNames(F,U)||(de(F,He.names),ye.splice(Fe,1))}return ye.length>0?this:void 0}get names(){return this.nodes.reduce((F,U)=>W(F,U.names),{})}}class b extends v{render(F){return"{"+F._n+super.render(F)+"}"+F._n}}class E extends v{}class P extends b{}P.kind="else";class S extends b{constructor(F,U){super(U),this.condition=F}render(F){let U=`if(${this.condition})`+super.render(F);return this.else&&(U+="else "+this.else.render(F)),U}optimizeNodes(){super.optimizeNodes();const F=this.condition;if(F===!0)return this.nodes;let U=this.else;if(U){const ye=U.optimizeNodes();U=this.else=Array.isArray(ye)?new P(ye):ye}if(U)return F===!1?U instanceof S?U:U.nodes:this.nodes.length?this:new S(be(F),U instanceof S?[U]:U.nodes);if(!(F===!1||!this.nodes.length))return this}optimizeNames(F,U){var ye;if(this.else=(ye=this.else)===null||ye===void 0?void 0:ye.optimizeNames(F,U),!!(super.optimizeNames(F,U)||this.else))return this.condition=Z(this.condition,F,U),this}get names(){const F=super.names;return G(F,this.condition),this.else&&W(F,this.else.names),F}}S.kind="if";class A extends b{}A.kind="for";class I extends A{constructor(F){super(),this.iteration=F}render(F){return`for(${this.iteration})`+super.render(F)}optimizeNames(F,U){if(super.optimizeNames(F,U))return this.iteration=Z(this.iteration,F,U),this}get names(){return W(super.names,this.iteration.names)}}class N extends A{constructor(F,U,ye,Fe){super(),this.varKind=F,this.name=U,this.from=ye,this.to=Fe}render(F){const U=F.es5?n.varKinds.var:this.varKind,{name:ye,from:Fe,to:He}=this;return`for(${U} ${ye}=${Fe}; ${ye}<${He}; ${ye}++)`+super.render(F)}get names(){const F=G(super.names,this.from);return G(F,this.to)}}class x extends A{constructor(F,U,ye,Fe){super(),this.loop=F,this.varKind=U,this.name=ye,this.iterable=Fe}render(F){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(F)}optimizeNames(F,U){if(super.optimizeNames(F,U))return this.iterable=Z(this.iterable,F,U),this}get names(){return W(super.names,this.iterable.names)}}class g extends b{constructor(F,U,ye){super(),this.name=F,this.args=U,this.async=ye}render(F){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(F)}}g.kind="func";class _ extends v{render(F){return"return "+super.render(F)}}_.kind="return";class M extends b{render(F){let U="try"+super.render(F);return this.catch&&(U+=this.catch.render(F)),this.finally&&(U+=this.finally.render(F)),U}optimizeNodes(){var F,U;return super.optimizeNodes(),(F=this.catch)===null||F===void 0||F.optimizeNodes(),(U=this.finally)===null||U===void 0||U.optimizeNodes(),this}optimizeNames(F,U){var ye,Fe;return super.optimizeNames(F,U),(ye=this.catch)===null||ye===void 0||ye.optimizeNames(F,U),(Fe=this.finally)===null||Fe===void 0||Fe.optimizeNames(F,U),this}get names(){const F=super.names;return this.catch&&W(F,this.catch.names),this.finally&&W(F,this.finally.names),F}}class D extends b{constructor(F){super(),this.error=F}render(F){return`catch(${this.error})`+super.render(F)}}D.kind="catch";class q extends b{render(F){return"finally"+super.render(F)}}q.kind="finally";class R{constructor(F,U={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...U,_n:U.lines?`
`:""},this._extScope=F,this._scope=new n.Scope({parent:F}),this._nodes=[new E]}toString(){return this._root.render(this.opts)}name(F){return this._scope.name(F)}scopeName(F){return this._extScope.name(F)}scopeValue(F,U){const ye=this._extScope.value(F,U);return(this._values[ye.prefix]||(this._values[ye.prefix]=new Set)).add(ye),ye}getScopeValue(F,U){return this._extScope.getValue(F,U)}scopeRefs(F){return this._extScope.scopeRefs(F,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(F,U,ye,Fe){const He=this._scope.toName(U);return ye!==void 0&&Fe&&(this._constants[He.str]=ye),this._leafNode(new o(F,He,ye)),He}const(F,U,ye){return this._def(n.varKinds.const,F,U,ye)}let(F,U,ye){return this._def(n.varKinds.let,F,U,ye)}var(F,U,ye){return this._def(n.varKinds.var,F,U,ye)}assign(F,U,ye){return this._leafNode(new a(F,U,ye))}add(F,U){return this._leafNode(new l(F,t.operators.ADD,U))}code(F){return typeof F=="function"?F():F!==e.nil&&this._leafNode(new p(F)),this}object(...F){const U=["{"];for(const[ye,Fe]of F)U.length>1&&U.push(","),U.push(ye),(ye!==Fe||this.opts.es5)&&(U.push(":"),(0,e.addCodeArg)(U,Fe));return U.push("}"),new e._Code(U)}if(F,U,ye){if(this._blockNode(new S(F)),U&&ye)this.code(U).else().code(ye).endIf();else if(U)this.code(U).endIf();else if(ye)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(F){return this._elseNode(new S(F))}else(){return this._elseNode(new P)}endIf(){return this._endBlockNode(S,P)}_for(F,U){return this._blockNode(F),U&&this.code(U).endFor(),this}for(F,U){return this._for(new I(F),U)}forRange(F,U,ye,Fe,He=this.opts.es5?n.varKinds.var:n.varKinds.let){const Be=this._scope.toName(F);return this._for(new N(He,Be,U,ye),()=>Fe(Be))}forOf(F,U,ye,Fe=n.varKinds.const){const He=this._scope.toName(F);if(this.opts.es5){const Be=U instanceof e.Name?U:this.var("_arr",U);return this.forRange("_i",0,(0,e._)`${Be}.length`,Pe=>{this.var(He,(0,e._)`${Be}[${Pe}]`),ye(He)})}return this._for(new x("of",Fe,He,U),()=>ye(He))}forIn(F,U,ye,Fe=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(F,(0,e._)`Object.keys(${U})`,ye);const He=this._scope.toName(F);return this._for(new x("in",Fe,He,U),()=>ye(He))}endFor(){return this._endBlockNode(A)}label(F){return this._leafNode(new u(F))}break(F){return this._leafNode(new c(F))}return(F){const U=new _;if(this._blockNode(U),this.code(F),U.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(_)}try(F,U,ye){if(!U&&!ye)throw new Error('CodeGen: "try" without "catch" and "finally"');const Fe=new M;if(this._blockNode(Fe),this.code(F),U){const He=this.name("e");this._currNode=Fe.catch=new D(He),U(He)}return ye&&(this._currNode=Fe.finally=new q,this.code(ye)),this._endBlockNode(D,q)}throw(F){return this._leafNode(new f(F))}block(F,U){return this._blockStarts.push(this._nodes.length),F&&this.code(F).endBlock(U),this}endBlock(F){const U=this._blockStarts.pop();if(U===void 0)throw new Error("CodeGen: not in self-balancing block");const ye=this._nodes.length-U;if(ye<0||F!==void 0&&ye!==F)throw new Error(`CodeGen: wrong number of nodes: ${ye} vs ${F} expected`);return this._nodes.length=U,this}func(F,U=e.nil,ye,Fe){return this._blockNode(new g(F,U,ye)),Fe&&this.code(Fe).endFunc(),this}endFunc(){return this._endBlockNode(g)}optimize(F=1){for(;F-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(F){return this._currNode.nodes.push(F),this}_blockNode(F){this._currNode.nodes.push(F),this._nodes.push(F)}_endBlockNode(F,U){const ye=this._currNode;if(ye instanceof F||U&&ye instanceof U)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${U?`${F.kind}/${U.kind}`:F.kind}"`)}_elseNode(F){const U=this._currNode;if(!(U instanceof S))throw new Error('CodeGen: "else" without "if"');return this._currNode=U.else=F,this}get _root(){return this._nodes[0]}get _currNode(){const F=this._nodes;return F[F.length-1]}set _currNode(F){const U=this._nodes;U[U.length-1]=F}}t.CodeGen=R;function W(ee,F){for(const U in F)ee[U]=(ee[U]||0)+(F[U]||0);return ee}function G(ee,F){return F instanceof e._CodeOrName?W(ee,F.names):ee}function Z(ee,F,U){if(ee instanceof e.Name)return ye(ee);if(!Fe(ee))return ee;return new e._Code(ee._items.reduce((He,Be)=>(Be instanceof e.Name&&(Be=ye(Be)),Be instanceof e._Code?He.push(...Be._items):He.push(Be),He),[]));function ye(He){const Be=U[He.str];return Be===void 0||F[He.str]!==1?He:(delete F[He.str],Be)}function Fe(He){return He instanceof e._Code&&He._items.some(Be=>Be instanceof e.Name&&F[Be.str]===1&&U[Be.str]!==void 0)}}function de(ee,F){for(const U in F)ee[U]=(ee[U]||0)-(F[U]||0)}function be(ee){return typeof ee=="boolean"||typeof ee=="number"||ee===null?!ee:(0,e._)`!${ne(ee)}`}t.not=be;const _e=re(t.operators.AND);function Te(...ee){return ee.reduce(_e)}t.and=Te;const Le=re(t.operators.OR);function Ee(...ee){return ee.reduce(Le)}t.or=Ee;function re(ee){return(F,U)=>F===e.nil?U:U===e.nil?F:(0,e._)`${ne(F)} ${ee} ${ne(U)}`}function ne(ee){return ee instanceof e.Name?ee:(0,e._)`(${ee})`}})(fn);var In={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.checkStrictMode=t.getErrorPath=t.Type=t.useFunc=t.setEvaluated=t.evaluatedPropsToName=t.mergeEvaluated=t.eachItem=t.unescapeJsonPointer=t.escapeJsonPointer=t.escapeFragment=t.unescapeFragment=t.schemaRefOrVal=t.schemaHasRulesButRef=t.schemaHasRules=t.checkUnknownRules=t.alwaysValidSchema=t.toHash=void 0;const e=fn,n=tm;function r(g){const _={};for(const M of g)_[M]=!0;return _}t.toHash=r;function i(g,_){return typeof _=="boolean"?_:Object.keys(_).length===0?!0:(s(g,_),!o(_,g.self.RULES.all))}t.alwaysValidSchema=i;function s(g,_=g.schema){const{opts:M,self:D}=g;if(!M.strictSchema||typeof _=="boolean")return;const q=D.RULES.keywords;for(const R in _)q[R]||x(g,`unknown keyword: "${R}"`)}t.checkUnknownRules=s;function o(g,_){if(typeof g=="boolean")return!g;for(const M in g)if(_[M])return!0;return!1}t.schemaHasRules=o;function a(g,_){if(typeof g=="boolean")return!g;for(const M in g)if(M!=="$ref"&&_.all[M])return!0;return!1}t.schemaHasRulesButRef=a;function l({topSchemaRef:g,schemaPath:_},M,D,q){if(!q){if(typeof M=="number"||typeof M=="boolean")return M;if(typeof M=="string")return(0,e._)`${M}`}return(0,e._)`${g}${_}${(0,e.getProperty)(D)}`}t.schemaRefOrVal=l;function u(g){return p(decodeURIComponent(g))}t.unescapeFragment=u;function c(g){return encodeURIComponent(f(g))}t.escapeFragment=c;function f(g){return typeof g=="number"?`${g}`:g.replace(/~/g,"~0").replace(/\//g,"~1")}t.escapeJsonPointer=f;function p(g){return g.replace(/~1/g,"/").replace(/~0/g,"~")}t.unescapeJsonPointer=p;function v(g,_){if(Array.isArray(g))for(const M of g)_(M);else _(g)}t.eachItem=v;function b({mergeNames:g,mergeToName:_,mergeValues:M,resultToName:D}){return(q,R,W,G)=>{const Z=W===void 0?R:W instanceof e.Name?(R instanceof e.Name?g(q,R,W):_(q,R,W),W):R instanceof e.Name?(_(q,W,R),R):M(R,W);return G===e.Name&&!(Z instanceof e.Name)?D(q,Z):Z}}t.mergeEvaluated={props:b({mergeNames:(g,_,M)=>g.if((0,e._)`${M} !== true && ${_} !== undefined`,()=>{g.if((0,e._)`${_} === true`,()=>g.assign(M,!0),()=>g.assign(M,(0,e._)`${M} || {}`).code((0,e._)`Object.assign(${M}, ${_})`))}),mergeToName:(g,_,M)=>g.if((0,e._)`${M} !== true`,()=>{_===!0?g.assign(M,!0):(g.assign(M,(0,e._)`${M} || {}`),P(g,M,_))}),mergeValues:(g,_)=>g===!0?!0:{...g,..._},resultToName:E}),items:b({mergeNames:(g,_,M)=>g.if((0,e._)`${M} !== true && ${_} !== undefined`,()=>g.assign(M,(0,e._)`${_} === true ? true : ${M} > ${_} ? ${M} : ${_}`)),mergeToName:(g,_,M)=>g.if((0,e._)`${M} !== true`,()=>g.assign(M,_===!0?!0:(0,e._)`${M} > ${_} ? ${M} : ${_}`)),mergeValues:(g,_)=>g===!0?!0:Math.max(g,_),resultToName:(g,_)=>g.var("items",_)})};function E(g,_){if(_===!0)return g.var("props",!0);const M=g.var("props",(0,e._)`{}`);return _!==void 0&&P(g,M,_),M}t.evaluatedPropsToName=E;function P(g,_,M){Object.keys(M).forEach(D=>g.assign((0,e._)`${_}${(0,e.getProperty)(D)}`,!0))}t.setEvaluated=P;const S={};function A(g,_){return g.scopeValue("func",{ref:_,code:S[_.code]||(S[_.code]=new n._Code(_.code))})}t.useFunc=A;var I;(function(g){g[g.Num=0]="Num",g[g.Str=1]="Str"})(I=t.Type||(t.Type={}));function N(g,_,M){if(g instanceof e.Name){const D=_===I.Num;return M?D?(0,e._)`"[" + ${g} + "]"`:(0,e._)`"['" + ${g} + "']"`:D?(0,e._)`"/" + ${g}`:(0,e._)`"/" + ${g}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return M?(0,e.getProperty)(g).toString():"/"+f(g)}t.getErrorPath=N;function x(g,_,M=g.opts.strictSchema){if(M){if(_=`strict mode: ${_}`,M===!0)throw new Error(_);g.self.logger.warn(_)}}t.checkStrictMode=x})(In);var hl={};Object.defineProperty(hl,"__esModule",{value:!0});const ji=fn,Qie={data:new ji.Name("data"),valCxt:new ji.Name("valCxt"),instancePath:new ji.Name("instancePath"),parentData:new ji.Name("parentData"),parentDataProperty:new ji.Name("parentDataProperty"),rootData:new ji.Name("rootData"),dynamicAnchors:new ji.Name("dynamicAnchors"),vErrors:new ji.Name("vErrors"),errors:new ji.Name("errors"),this:new ji.Name("this"),self:new ji.Name("self"),scope:new ji.Name("scope"),json:new ji.Name("json"),jsonPos:new ji.Name("jsonPos"),jsonLen:new ji.Name("jsonLen"),jsonPart:new ji.Name("jsonPart")};hl.default=Qie;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const e=fn,n=In,r=hl;t.keywordError={message:({keyword:P})=>(0,e.str)`must pass "${P}" keyword validation`},t.keyword$DataError={message:({keyword:P,schemaType:S})=>S?(0,e.str)`"${P}" keyword must be ${S} ($data)`:(0,e.str)`"${P}" keyword is invalid ($data)`};function i(P,S=t.keywordError,A,I){const{it:N}=P,{gen:x,compositeRule:g,allErrors:_}=N,M=f(P,S,A);I??(g||_)?l(x,M):u(N,(0,e._)`[${M}]`)}t.reportError=i;function s(P,S=t.keywordError,A){const{it:I}=P,{gen:N,compositeRule:x,allErrors:g}=I,_=f(P,S,A);l(N,_),x||g||u(I,r.default.vErrors)}t.reportExtraError=s;function o(P,S){P.assign(r.default.errors,S),P.if((0,e._)`${r.default.vErrors} !== null`,()=>P.if(S,()=>P.assign((0,e._)`${r.default.vErrors}.length`,S),()=>P.assign(r.default.vErrors,null)))}t.resetErrorsCount=o;function a({gen:P,keyword:S,schemaValue:A,data:I,errsCount:N,it:x}){if(N===void 0)throw new Error("ajv implementation error");const g=P.name("err");P.forRange("i",N,r.default.errors,_=>{P.const(g,(0,e._)`${r.default.vErrors}[${_}]`),P.if((0,e._)`${g}.instancePath === undefined`,()=>P.assign((0,e._)`${g}.instancePath`,(0,e.strConcat)(r.default.instancePath,x.errorPath))),P.assign((0,e._)`${g}.schemaPath`,(0,e.str)`${x.errSchemaPath}/${S}`),x.opts.verbose&&(P.assign((0,e._)`${g}.schema`,A),P.assign((0,e._)`${g}.data`,I))})}t.extendErrors=a;function l(P,S){const A=P.const("err",S);P.if((0,e._)`${r.default.vErrors} === null`,()=>P.assign(r.default.vErrors,(0,e._)`[${A}]`),(0,e._)`${r.default.vErrors}.push(${A})`),P.code((0,e._)`${r.default.errors}++`)}function u(P,S){const{gen:A,validateName:I,schemaEnv:N}=P;N.$async?A.throw((0,e._)`new ${P.ValidationError}(${S})`):(A.assign((0,e._)`${I}.errors`,S),A.return(!1))}const c={keyword:new e.Name("keyword"),schemaPath:new e.Name("schemaPath"),params:new e.Name("params"),propertyName:new e.Name("propertyName"),message:new e.Name("message"),schema:new e.Name("schema"),parentSchema:new e.Name("parentSchema")};function f(P,S,A){const{createErrors:I}=P.it;return I===!1?(0,e._)`{}`:p(P,S,A)}function p(P,S,A={}){const{gen:I,it:N}=P,x=[v(N,A),b(P,A)];return E(P,S,x),I.object(...x)}function v({errorPath:P},{instancePath:S}){const A=S?(0,e.str)`${P}${(0,n.getErrorPath)(S,n.Type.Str)}`:P;return[r.default.instancePath,(0,e.strConcat)(r.default.instancePath,A)]}function b({keyword:P,it:{errSchemaPath:S}},{schemaPath:A,parentSchema:I}){let N=I?S:(0,e.str)`${S}/${P}`;return A&&(N=(0,e.str)`${N}${(0,n.getErrorPath)(A,n.Type.Str)}`),[c.schemaPath,N]}function E(P,{params:S,message:A},I){const{keyword:N,data:x,schemaValue:g,it:_}=P,{opts:M,propertyName:D,topSchemaRef:q,schemaPath:R}=_;I.push([c.keyword,N],[c.params,typeof S=="function"?S(P):S||(0,e._)`{}`]),M.messages&&I.push([c.message,typeof A=="function"?A(P):A]),M.verbose&&I.push([c.schema,g],[c.parentSchema,(0,e._)`${q}${R}`],[r.default.data,x]),D&&I.push([c.propertyName,D])}})(Wm);Object.defineProperty(Od,"__esModule",{value:!0});Od.boolOrEmptySchema=Od.topBoolOrEmptySchema=void 0;const ese=Wm,tse=fn,nse=hl,rse={message:"boolean schema is false"};function ise(t){const{gen:e,schema:n,validateName:r}=t;n===!1?pV(t,!1):typeof n=="object"&&n.$async===!0?e.return(nse.default.data):(e.assign((0,tse._)`${r}.errors`,null),e.return(!0))}Od.topBoolOrEmptySchema=ise;function sse(t,e){const{gen:n,schema:r}=t;r===!1?(n.var(e,!1),pV(t)):n.var(e,!0)}Od.boolOrEmptySchema=sse;function pV(t,e){const{gen:n,data:r}=t,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,ese.reportError)(i,rse,void 0,e)}var Gm={},Df={};Object.defineProperty(Df,"__esModule",{value:!0});Df.getRules=Df.isJSONType=void 0;const ose=["string","number","integer","boolean","null","object","array"],ase=new Set(ose);function lse(t){return typeof t=="string"&&ase.has(t)}Df.isJSONType=lse;function use(){const t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}Df.getRules=use;var Gl={};Object.defineProperty(Gl,"__esModule",{value:!0});Gl.shouldUseRule=Gl.shouldUseGroup=Gl.schemaHasRulesForType=void 0;function cse({schema:t,self:e},n){const r=e.RULES.types[n];return r&&r!==!0&&gV(t,r)}Gl.schemaHasRulesForType=cse;function gV(t,e){return e.rules.some(n=>mV(t,n))}Gl.shouldUseGroup=gV;function mV(t,e){var n;return t[e.keyword]!==void 0||((n=e.definition.implements)===null||n===void 0?void 0:n.some(r=>t[r]!==void 0))}Gl.shouldUseRule=mV;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.reportTypeError=t.checkDataTypes=t.checkDataType=t.coerceAndCheckDataType=t.getJSONTypes=t.getSchemaTypes=t.DataType=void 0;const e=Df,n=Gl,r=Wm,i=fn,s=In;var o;(function(I){I[I.Correct=0]="Correct",I[I.Wrong=1]="Wrong"})(o=t.DataType||(t.DataType={}));function a(I){const N=l(I.type);if(N.includes("null")){if(I.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!N.length&&I.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');I.nullable===!0&&N.push("null")}return N}t.getSchemaTypes=a;function l(I){const N=Array.isArray(I)?I:I?[I]:[];if(N.every(e.isJSONType))return N;throw new Error("type must be JSONType or JSONType[]: "+N.join(","))}t.getJSONTypes=l;function u(I,N){const{gen:x,data:g,opts:_}=I,M=f(N,_.coerceTypes),D=N.length>0&&!(M.length===0&&N.length===1&&(0,n.schemaHasRulesForType)(I,N[0]));if(D){const q=E(N,g,_.strictNumbers,o.Wrong);x.if(q,()=>{M.length?p(I,N,M):S(I)})}return D}t.coerceAndCheckDataType=u;const c=new Set(["string","number","integer","boolean","null"]);function f(I,N){return N?I.filter(x=>c.has(x)||N==="array"&&x==="array"):[]}function p(I,N,x){const{gen:g,data:_,opts:M}=I,D=g.let("dataType",(0,i._)`typeof ${_}`),q=g.let("coerced",(0,i._)`undefined`);M.coerceTypes==="array"&&g.if((0,i._)`${D} == 'object' && Array.isArray(${_}) && ${_}.length == 1`,()=>g.assign(_,(0,i._)`${_}[0]`).assign(D,(0,i._)`typeof ${_}`).if(E(N,_,M.strictNumbers),()=>g.assign(q,_))),g.if((0,i._)`${q} !== undefined`);for(const W of x)(c.has(W)||W==="array"&&M.coerceTypes==="array")&&R(W);g.else(),S(I),g.endIf(),g.if((0,i._)`${q} !== undefined`,()=>{g.assign(_,q),v(I,q)});function R(W){switch(W){case"string":g.elseIf((0,i._)`${D} == "number" || ${D} == "boolean"`).assign(q,(0,i._)`"" + ${_}`).elseIf((0,i._)`${_} === null`).assign(q,(0,i._)`""`);return;case"number":g.elseIf((0,i._)`${D} == "boolean" || ${_} === null
              || (${D} == "string" && ${_} && ${_} == +${_})`).assign(q,(0,i._)`+${_}`);return;case"integer":g.elseIf((0,i._)`${D} === "boolean" || ${_} === null
              || (${D} === "string" && ${_} && ${_} == +${_} && !(${_} % 1))`).assign(q,(0,i._)`+${_}`);return;case"boolean":g.elseIf((0,i._)`${_} === "false" || ${_} === 0 || ${_} === null`).assign(q,!1).elseIf((0,i._)`${_} === "true" || ${_} === 1`).assign(q,!0);return;case"null":g.elseIf((0,i._)`${_} === "" || ${_} === 0 || ${_} === false`),g.assign(q,null);return;case"array":g.elseIf((0,i._)`${D} === "string" || ${D} === "number"
              || ${D} === "boolean" || ${_} === null`).assign(q,(0,i._)`[${_}]`)}}}function v({gen:I,parentData:N,parentDataProperty:x},g){I.if((0,i._)`${N} !== undefined`,()=>I.assign((0,i._)`${N}[${x}]`,g))}function b(I,N,x,g=o.Correct){const _=g===o.Correct?i.operators.EQ:i.operators.NEQ;let M;switch(I){case"null":return(0,i._)`${N} ${_} null`;case"array":M=(0,i._)`Array.isArray(${N})`;break;case"object":M=(0,i._)`${N} && typeof ${N} == "object" && !Array.isArray(${N})`;break;case"integer":M=D((0,i._)`!(${N} % 1) && !isNaN(${N})`);break;case"number":M=D();break;default:return(0,i._)`typeof ${N} ${_} ${I}`}return g===o.Correct?M:(0,i.not)(M);function D(q=i.nil){return(0,i.and)((0,i._)`typeof ${N} == "number"`,q,x?(0,i._)`isFinite(${N})`:i.nil)}}t.checkDataType=b;function E(I,N,x,g){if(I.length===1)return b(I[0],N,x,g);let _;const M=(0,s.toHash)(I);if(M.array&&M.object){const D=(0,i._)`typeof ${N} != "object"`;_=M.null?D:(0,i._)`!${N} || ${D}`,delete M.null,delete M.array,delete M.object}else _=i.nil;M.number&&delete M.integer;for(const D in M)_=(0,i.and)(_,b(D,N,x,g));return _}t.checkDataTypes=E;const P={message:({schema:I})=>`must be ${I}`,params:({schema:I,schemaValue:N})=>typeof I=="string"?(0,i._)`{type: ${I}}`:(0,i._)`{type: ${N}}`};function S(I){const N=A(I);(0,r.reportError)(N,P)}t.reportTypeError=S;function A(I){const{gen:N,data:x,schema:g}=I,_=(0,s.schemaRefOrVal)(I,g,"type");return{gen:N,keyword:"type",data:x,schema:g.type,schemaCode:_,schemaValue:_,parentSchema:g,params:{},it:I}}})(Gm);var ew={};Object.defineProperty(ew,"__esModule",{value:!0});ew.assignDefaults=void 0;const _h=fn,fse=In;function hse(t,e){const{properties:n,items:r}=t.schema;if(e==="object"&&n)for(const i in n)sI(t,i,n[i].default);else e==="array"&&Array.isArray(r)&&r.forEach((i,s)=>sI(t,s,i.default))}ew.assignDefaults=hse;function sI(t,e,n){const{gen:r,compositeRule:i,data:s,opts:o}=t;if(n===void 0)return;const a=(0,_h._)`${s}${(0,_h.getProperty)(e)}`;if(i){(0,fse.checkStrictMode)(t,`default is ignored for: ${a}`);return}let l=(0,_h._)`${a} === undefined`;o.useDefaults==="empty"&&(l=(0,_h._)`${l} || ${a} === null || ${a} === ""`),r.if(l,(0,_h._)`${a} = ${(0,_h.stringify)(n)}`)}var tl={},ln={};Object.defineProperty(ln,"__esModule",{value:!0});ln.validateUnion=ln.validateArray=ln.usePattern=ln.callValidateCode=ln.schemaProperties=ln.allSchemaProperties=ln.noPropertyInData=ln.propertyInData=ln.isOwnProperty=ln.hasPropFunc=ln.reportMissingProp=ln.checkMissingProp=ln.checkReportMissingProp=void 0;const gr=fn,rC=In,ku=hl,dse=In;function pse(t,e){const{gen:n,data:r,it:i}=t;n.if(sC(n,r,e,i.opts.ownProperties),()=>{t.setParams({missingProperty:(0,gr._)`${e}`},!0),t.error()})}ln.checkReportMissingProp=pse;function gse({gen:t,data:e,it:{opts:n}},r,i){return(0,gr.or)(...r.map(s=>(0,gr.and)(sC(t,e,s,n.ownProperties),(0,gr._)`${i} = ${s}`)))}ln.checkMissingProp=gse;function mse(t,e){t.setParams({missingProperty:e},!0),t.error()}ln.reportMissingProp=mse;function vV(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,gr._)`Object.prototype.hasOwnProperty`})}ln.hasPropFunc=vV;function iC(t,e,n){return(0,gr._)`${vV(t)}.call(${e}, ${n})`}ln.isOwnProperty=iC;function vse(t,e,n,r){const i=(0,gr._)`${e}${(0,gr.getProperty)(n)} !== undefined`;return r?(0,gr._)`${i} && ${iC(t,e,n)}`:i}ln.propertyInData=vse;function sC(t,e,n,r){const i=(0,gr._)`${e}${(0,gr.getProperty)(n)} === undefined`;return r?(0,gr.or)(i,(0,gr.not)(iC(t,e,n))):i}ln.noPropertyInData=sC;function yV(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}ln.allSchemaProperties=yV;function yse(t,e){return yV(e).filter(n=>!(0,rC.alwaysValidSchema)(t,e[n]))}ln.schemaProperties=yse;function bse({schemaCode:t,data:e,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:s},it:o},a,l,u){const c=u?(0,gr._)`${t}, ${e}, ${r}${i}`:e,f=[[ku.default.instancePath,(0,gr.strConcat)(ku.default.instancePath,s)],[ku.default.parentData,o.parentData],[ku.default.parentDataProperty,o.parentDataProperty],[ku.default.rootData,ku.default.rootData]];o.opts.dynamicRef&&f.push([ku.default.dynamicAnchors,ku.default.dynamicAnchors]);const p=(0,gr._)`${c}, ${n.object(...f)}`;return l!==gr.nil?(0,gr._)`${a}.call(${l}, ${p})`:(0,gr._)`${a}(${p})`}ln.callValidateCode=bse;const wse=(0,gr._)`new RegExp`;function xse({gen:t,it:{opts:e}},n){const r=e.unicodeRegExp?"u":"",{regExp:i}=e.code,s=i(n,r);return t.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,gr._)`${i.code==="new RegExp"?wse:(0,dse.useFunc)(t,i)}(${n}, ${r})`})}ln.usePattern=xse;function Sse(t){const{gen:e,data:n,keyword:r,it:i}=t,s=e.name("valid");if(i.allErrors){const a=e.let("valid",!0);return o(()=>e.assign(a,!1)),a}return e.var(s,!0),o(()=>e.break()),s;function o(a){const l=e.const("len",(0,gr._)`${n}.length`);e.forRange("i",0,l,u=>{t.subschema({keyword:r,dataProp:u,dataPropType:rC.Type.Num},s),e.if((0,gr.not)(s),a)})}}ln.validateArray=Sse;function Ese(t){const{gen:e,schema:n,keyword:r,it:i}=t;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(l=>(0,rC.alwaysValidSchema)(i,l))&&!i.opts.unevaluated)return;const o=e.let("valid",!1),a=e.name("_valid");e.block(()=>n.forEach((l,u)=>{const c=t.subschema({keyword:r,schemaProp:u,compositeRule:!0},a);e.assign(o,(0,gr._)`${o} || ${a}`),t.mergeValidEvaluated(c,a)||e.if((0,gr.not)(o))})),t.result(o,()=>t.reset(),()=>t.error(!0))}ln.validateUnion=Ese;Object.defineProperty(tl,"__esModule",{value:!0});tl.validateKeywordUsage=tl.validSchemaType=tl.funcKeywordCode=tl.macroKeywordCode=void 0;const as=fn,Qc=hl,_se=ln,Ase=Wm;function kse(t,e){const{gen:n,keyword:r,schema:i,parentSchema:s,it:o}=t,a=e.macro.call(o.self,i,s,o),l=bV(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const u=n.name("valid");t.subschema({schema:a,schemaPath:as.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:l,compositeRule:!0},u),t.pass(u,()=>t.error(!0))}tl.macroKeywordCode=kse;function Cse(t,e){var n;const{gen:r,keyword:i,schema:s,parentSchema:o,$data:a,it:l}=t;Ose(l,e);const u=!a&&e.compile?e.compile.call(l.self,s,o,l):e.validate,c=bV(r,i,u),f=r.let("valid");t.block$data(f,p),t.ok((n=e.valid)!==null&&n!==void 0?n:f);function p(){if(e.errors===!1)E(),e.modifying&&oI(t),P(()=>t.error());else{const S=e.async?v():b();e.modifying&&oI(t),P(()=>Pse(t,S))}}function v(){const S=r.let("ruleErrs",null);return r.try(()=>E((0,as._)`await `),A=>r.assign(f,!1).if((0,as._)`${A} instanceof ${l.ValidationError}`,()=>r.assign(S,(0,as._)`${A}.errors`),()=>r.throw(A))),S}function b(){const S=(0,as._)`${c}.errors`;return r.assign(S,null),E(as.nil),S}function E(S=e.async?(0,as._)`await `:as.nil){const A=l.opts.passContext?Qc.default.this:Qc.default.self,I=!("compile"in e&&!a||e.schema===!1);r.assign(f,(0,as._)`${S}${(0,_se.callValidateCode)(t,c,A,I)}`,e.modifying)}function P(S){var A;r.if((0,as.not)((A=e.valid)!==null&&A!==void 0?A:f),S)}}tl.funcKeywordCode=Cse;function oI(t){const{gen:e,data:n,it:r}=t;e.if(r.parentData,()=>e.assign(n,(0,as._)`${r.parentData}[${r.parentDataProperty}]`))}function Pse(t,e){const{gen:n}=t;n.if((0,as._)`Array.isArray(${e})`,()=>{n.assign(Qc.default.vErrors,(0,as._)`${Qc.default.vErrors} === null ? ${e} : ${Qc.default.vErrors}.concat(${e})`).assign(Qc.default.errors,(0,as._)`${Qc.default.vErrors}.length`),(0,Ase.extendErrors)(t)},()=>t.error())}function Ose({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function bV(t,e,n){if(n===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,as.stringify)(n)})}function Tse(t,e,n=!1){return!e.length||e.some(r=>r==="array"?Array.isArray(t):r==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==r||n&&typeof t>"u")}tl.validSchemaType=Tse;function Mse({schema:t,opts:e,self:n,errSchemaPath:r},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const o=i.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(t,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(t[s])){const l=`keyword "${s}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(e.validateSchema==="log")n.logger.error(l);else throw new Error(l)}}tl.validateKeywordUsage=Mse;var Yu={};Object.defineProperty(Yu,"__esModule",{value:!0});Yu.extendSubschemaMode=Yu.extendSubschemaData=Yu.getSubschema=void 0;const Ja=fn,wV=In;function Nse(t,{keyword:e,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(e!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){const a=t.schema[e];return n===void 0?{schema:a,schemaPath:(0,Ja._)`${t.schemaPath}${(0,Ja.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:a[n],schemaPath:(0,Ja._)`${t.schemaPath}${(0,Ja.getProperty)(e)}${(0,Ja.getProperty)(n)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,wV.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}Yu.getSubschema=Nse;function Ise(t,e,{dataProp:n,dataPropType:r,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=e;if(n!==void 0){const{errorPath:u,dataPathArr:c,opts:f}=e,p=a.let("data",(0,Ja._)`${e.data}${(0,Ja.getProperty)(n)}`,!0);l(p),t.errorPath=(0,Ja.str)`${u}${(0,wV.getErrorPath)(n,r,f.jsPropertySyntax)}`,t.parentDataProperty=(0,Ja._)`${n}`,t.dataPathArr=[...c,t.parentDataProperty]}if(i!==void 0){const u=i instanceof Ja.Name?i:a.let("data",i,!0);l(u),o!==void 0&&(t.propertyName=o)}s&&(t.dataTypes=s);function l(u){t.data=u,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,u]}}Yu.extendSubschemaData=Ise;function $se(t,{jtdDiscriminator:e,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:s}){r!==void 0&&(t.compositeRule=r),i!==void 0&&(t.createErrors=i),s!==void 0&&(t.allErrors=s),t.jtdDiscriminator=e,t.jtdMetadata=n}Yu.extendSubschemaMode=$se;var Pi={},oC=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n};const xV=ka(oC);var SV={exports:{}},zu=SV.exports=function(t,e,n){typeof e=="function"&&(n=e,e={}),n=e.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};Dy(e,r,i,t,"",t)};zu.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};zu.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};zu.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};zu.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Dy(t,e,n,r,i,s,o,a,l,u){if(r&&typeof r=="object"&&!Array.isArray(r)){e(r,i,s,o,a,l,u);for(var c in r){var f=r[c];if(Array.isArray(f)){if(c in zu.arrayKeywords)for(var p=0;p<f.length;p++)Dy(t,e,n,f[p],i+"/"+c+"/"+p,s,i,c,r,p)}else if(c in zu.propsKeywords){if(f&&typeof f=="object")for(var v in f)Dy(t,e,n,f[v],i+"/"+c+"/"+Rse(v),s,i,c,r,v)}else(c in zu.keywords||t.allKeys&&!(c in zu.skipKeywords))&&Dy(t,e,n,f,i+"/"+c,s,i,c,r)}n(r,i,s,o,a,l,u)}}function Rse(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}var Lse=SV.exports;Object.defineProperty(Pi,"__esModule",{value:!0});Pi.getSchemaRefs=Pi.resolveUrl=Pi.normalizeId=Pi._getFullPath=Pi.getFullPath=Pi.inlineRef=void 0;const Dse=In,Fse=oC,Vse=Lse,Bse=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function jse(t,e=!0){return typeof t=="boolean"?!0:e===!0?!z_(t):e?EV(t)<=e:!1}Pi.inlineRef=jse;const zse=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function z_(t){for(const e in t){if(zse.has(e))return!0;const n=t[e];if(Array.isArray(n)&&n.some(z_)||typeof n=="object"&&z_(n))return!0}return!1}function EV(t){let e=0;for(const n in t){if(n==="$ref")return 1/0;if(e++,!Bse.has(n)&&(typeof t[n]=="object"&&(0,Dse.eachItem)(t[n],r=>e+=EV(r)),e===1/0))return 1/0}return e}function _V(t,e="",n){n!==!1&&(e=sd(e));const r=t.parse(e);return AV(t,r)}Pi.getFullPath=_V;function AV(t,e){return t.serialize(e).split("#")[0]+"#"}Pi._getFullPath=AV;const Hse=/#\/?$/;function sd(t){return t?t.replace(Hse,""):""}Pi.normalizeId=sd;function Use(t,e,n){return n=sd(n),t.resolve(e,n)}Pi.resolveUrl=Use;const qse=/^[a-z_][-a-z0-9._]*$/i;function Wse(t,e){if(typeof t=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=sd(t[n]||e),s={"":i},o=_V(r,i,!1),a={},l=new Set;return Vse(t,{allKeys:!0},(f,p,v,b)=>{if(b===void 0)return;const E=o+p;let P=s[b];typeof f[n]=="string"&&(P=S.call(this,f[n])),A.call(this,f.$anchor),A.call(this,f.$dynamicAnchor),s[p]=P;function S(I){const N=this.opts.uriResolver.resolve;if(I=sd(P?N(P,I):I),l.has(I))throw c(I);l.add(I);let x=this.refs[I];return typeof x=="string"&&(x=this.refs[x]),typeof x=="object"?u(f,x.schema,I):I!==sd(E)&&(I[0]==="#"?(u(f,a[I],I),a[I]=f):this.refs[I]=E),I}function A(I){if(typeof I=="string"){if(!qse.test(I))throw new Error(`invalid anchor "${I}"`);S.call(this,`#${I}`)}}}),a;function u(f,p,v){if(p!==void 0&&!Fse(f,p))throw c(v)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}Pi.getSchemaRefs=Wse;Object.defineProperty(wa,"__esModule",{value:!0});wa.getData=wa.KeywordCxt=wa.validateFunctionCode=void 0;const kV=Od,aI=Gm,aC=Gl,$b=Gm,Gse=ew,bg=tl,TS=Yu,kt=fn,Wt=hl,Kse=Pi,Kl=In,Fp=Wm;function Yse(t){if(OV(t)&&(TV(t),PV(t))){Zse(t);return}CV(t,()=>(0,kV.topBoolOrEmptySchema)(t))}wa.validateFunctionCode=Yse;function CV({gen:t,validateName:e,schema:n,schemaEnv:r,opts:i},s){i.code.es5?t.func(e,(0,kt._)`${Wt.default.data}, ${Wt.default.valCxt}`,r.$async,()=>{t.code((0,kt._)`"use strict"; ${lI(n,i)}`),Xse(t,i),t.code(s)}):t.func(e,(0,kt._)`${Wt.default.data}, ${Jse(i)}`,r.$async,()=>t.code(lI(n,i)).code(s))}function Jse(t){return(0,kt._)`{${Wt.default.instancePath}="", ${Wt.default.parentData}, ${Wt.default.parentDataProperty}, ${Wt.default.rootData}=${Wt.default.data}${t.dynamicRef?(0,kt._)`, ${Wt.default.dynamicAnchors}={}`:kt.nil}}={}`}function Xse(t,e){t.if(Wt.default.valCxt,()=>{t.var(Wt.default.instancePath,(0,kt._)`${Wt.default.valCxt}.${Wt.default.instancePath}`),t.var(Wt.default.parentData,(0,kt._)`${Wt.default.valCxt}.${Wt.default.parentData}`),t.var(Wt.default.parentDataProperty,(0,kt._)`${Wt.default.valCxt}.${Wt.default.parentDataProperty}`),t.var(Wt.default.rootData,(0,kt._)`${Wt.default.valCxt}.${Wt.default.rootData}`),e.dynamicRef&&t.var(Wt.default.dynamicAnchors,(0,kt._)`${Wt.default.valCxt}.${Wt.default.dynamicAnchors}`)},()=>{t.var(Wt.default.instancePath,(0,kt._)`""`),t.var(Wt.default.parentData,(0,kt._)`undefined`),t.var(Wt.default.parentDataProperty,(0,kt._)`undefined`),t.var(Wt.default.rootData,Wt.default.data),e.dynamicRef&&t.var(Wt.default.dynamicAnchors,(0,kt._)`{}`)})}function Zse(t){const{schema:e,opts:n,gen:r}=t;CV(t,()=>{n.$comment&&e.$comment&&NV(t),roe(t),r.let(Wt.default.vErrors,null),r.let(Wt.default.errors,0),n.unevaluated&&Qse(t),MV(t),ooe(t)})}function Qse(t){const{gen:e,validateName:n}=t;t.evaluated=e.const("evaluated",(0,kt._)`${n}.evaluated`),e.if((0,kt._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,kt._)`${t.evaluated}.props`,(0,kt._)`undefined`)),e.if((0,kt._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,kt._)`${t.evaluated}.items`,(0,kt._)`undefined`))}function lI(t,e){const n=typeof t=="object"&&t[e.schemaId];return n&&(e.code.source||e.code.process)?(0,kt._)`/*# sourceURL=${n} */`:kt.nil}function eoe(t,e){if(OV(t)&&(TV(t),PV(t))){toe(t,e);return}(0,kV.boolOrEmptySchema)(t,e)}function PV({schema:t,self:e}){if(typeof t=="boolean")return!t;for(const n in t)if(e.RULES.all[n])return!0;return!1}function OV(t){return typeof t.schema!="boolean"}function toe(t,e){const{schema:n,gen:r,opts:i}=t;i.$comment&&n.$comment&&NV(t),ioe(t),soe(t);const s=r.const("_errs",Wt.default.errors);MV(t,s),r.var(e,(0,kt._)`${s} === ${Wt.default.errors}`)}function TV(t){(0,Kl.checkUnknownRules)(t),noe(t)}function MV(t,e){if(t.opts.jtd)return uI(t,[],!1,e);const n=(0,aI.getSchemaTypes)(t.schema),r=(0,aI.coerceAndCheckDataType)(t,n);uI(t,n,!r,e)}function noe(t){const{schema:e,errSchemaPath:n,opts:r,self:i}=t;e.$ref&&r.ignoreKeywordsWithRef&&(0,Kl.schemaHasRulesButRef)(e,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function roe(t){const{schema:e,opts:n}=t;e.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,Kl.checkStrictMode)(t,"default is ignored in the schema root")}function ioe(t){const e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,Kse.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function soe(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function NV({gen:t,schemaEnv:e,schema:n,errSchemaPath:r,opts:i}){const s=n.$comment;if(i.$comment===!0)t.code((0,kt._)`${Wt.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const o=(0,kt.str)`${r}/$comment`,a=t.scopeValue("root",{ref:e.root});t.code((0,kt._)`${Wt.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function ooe(t){const{gen:e,schemaEnv:n,validateName:r,ValidationError:i,opts:s}=t;n.$async?e.if((0,kt._)`${Wt.default.errors} === 0`,()=>e.return(Wt.default.data),()=>e.throw((0,kt._)`new ${i}(${Wt.default.vErrors})`)):(e.assign((0,kt._)`${r}.errors`,Wt.default.vErrors),s.unevaluated&&aoe(t),e.return((0,kt._)`${Wt.default.errors} === 0`))}function aoe({gen:t,evaluated:e,props:n,items:r}){n instanceof kt.Name&&t.assign((0,kt._)`${e}.props`,n),r instanceof kt.Name&&t.assign((0,kt._)`${e}.items`,r)}function uI(t,e,n,r){const{gen:i,schema:s,data:o,allErrors:a,opts:l,self:u}=t,{RULES:c}=u;if(s.$ref&&(l.ignoreKeywordsWithRef||!(0,Kl.schemaHasRulesButRef)(s,c))){i.block(()=>RV(t,"$ref",c.all.$ref.definition));return}l.jtd||loe(t,e),i.block(()=>{for(const p of c.rules)f(p);f(c.post)});function f(p){(0,aC.shouldUseGroup)(s,p)&&(p.type?(i.if((0,$b.checkDataType)(p.type,o,l.strictNumbers)),cI(t,p),e.length===1&&e[0]===p.type&&n&&(i.else(),(0,$b.reportTypeError)(t)),i.endIf()):cI(t,p),a||i.if((0,kt._)`${Wt.default.errors} === ${r||0}`))}}function cI(t,e){const{gen:n,schema:r,opts:{useDefaults:i}}=t;i&&(0,Gse.assignDefaults)(t,e.type),n.block(()=>{for(const s of e.rules)(0,aC.shouldUseRule)(r,s)&&RV(t,s.keyword,s.definition,e.type)})}function loe(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(uoe(t,e),t.opts.allowUnionTypes||coe(t,e),foe(t,t.dataTypes))}function uoe(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(n=>{IV(t.dataTypes,n)||lC(t,`type "${n}" not allowed by context "${t.dataTypes.join(",")}"`)}),doe(t,e)}}function coe(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&lC(t,"use allowUnionTypes to allow union type keyword")}function foe(t,e){const n=t.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,aC.shouldUseRule)(t.schema,i)){const{type:s}=i.definition;s.length&&!s.some(o=>hoe(e,o))&&lC(t,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function hoe(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function IV(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function doe(t,e){const n=[];for(const r of t.dataTypes)IV(e,r)?n.push(r):e.includes("integer")&&r==="number"&&n.push("integer");t.dataTypes=n}function lC(t,e){const n=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${n}" (strictTypes)`,(0,Kl.checkStrictMode)(t,e,t.opts.strictTypes)}class $V{constructor(e,n,r){if((0,bg.validateKeywordUsage)(e,n,r),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=r,this.data=e.data,this.schema=e.schema[r],this.$data=n.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Kl.schemaRefOrVal)(e,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=n,this.$data)this.schemaCode=e.gen.const("vSchema",LV(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,bg.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=e.gen.const("_errs",Wt.default.errors))}result(e,n,r){this.failResult((0,kt.not)(e),n,r)}failResult(e,n,r){this.gen.if(e),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,n){this.failResult((0,kt.not)(e),void 0,n)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:n}=this;this.fail((0,kt._)`${n} !== undefined && (${(0,kt.or)(this.invalid$data(),e)})`)}error(e,n,r){if(n){this.setParams(n),this._error(e,r),this.setParams({});return}this._error(e,r)}_error(e,n){(e?Fp.reportExtraError:Fp.reportError)(this,this.def.error,n)}$dataError(){(0,Fp.reportError)(this,this.def.$dataError||Fp.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Fp.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,n){n?Object.assign(this.params,e):this.params=e}block$data(e,n,r=kt.nil){this.gen.block(()=>{this.check$data(e,r),n()})}check$data(e=kt.nil,n=kt.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:s,def:o}=this;r.if((0,kt.or)((0,kt._)`${i} === undefined`,n)),e!==kt.nil&&r.assign(e,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),e!==kt.nil&&r.assign(e,!1)),r.else()}invalid$data(){const{gen:e,schemaCode:n,schemaType:r,def:i,it:s}=this;return(0,kt.or)(o(),a());function o(){if(r.length){if(!(n instanceof kt.Name))throw new Error("ajv implementation error");const l=Array.isArray(r)?r:[r];return(0,kt._)`${(0,$b.checkDataTypes)(l,n,s.opts.strictNumbers,$b.DataType.Wrong)}`}return kt.nil}function a(){if(i.validateSchema){const l=e.scopeValue("validate$data",{ref:i.validateSchema});return(0,kt._)`!${l}(${n})`}return kt.nil}}subschema(e,n){const r=(0,TS.getSubschema)(this.it,e);(0,TS.extendSubschemaData)(r,this.it,e),(0,TS.extendSubschemaMode)(r,e);const i={...this.it,...r,items:void 0,props:void 0};return eoe(i,n),i}mergeEvaluated(e,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&e.props!==void 0&&(r.props=Kl.mergeEvaluated.props(i,e.props,r.props,n)),r.items!==!0&&e.items!==void 0&&(r.items=Kl.mergeEvaluated.items(i,e.items,r.items,n)))}mergeValidEvaluated(e,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(e,kt.Name)),!0}}wa.KeywordCxt=$V;function RV(t,e,n,r){const i=new $V(t,n,e);"code"in n?n.code(i,r):i.$data&&n.validate?(0,bg.funcKeywordCode)(i,n):"macro"in n?(0,bg.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,bg.funcKeywordCode)(i,n)}const poe=/^\/(?:[^~]|~0|~1)*$/,goe=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function LV(t,{dataLevel:e,dataNames:n,dataPathArr:r}){let i,s;if(t==="")return Wt.default.rootData;if(t[0]==="/"){if(!poe.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);i=t,s=Wt.default.rootData}else{const u=goe.exec(t);if(!u)throw new Error(`Invalid JSON-pointer: ${t}`);const c=+u[1];if(i=u[2],i==="#"){if(c>=e)throw new Error(l("property/index",c));return r[e-c]}if(c>e)throw new Error(l("data",c));if(s=n[e-c],!i)return s}let o=s;const a=i.split("/");for(const u of a)u&&(s=(0,kt._)`${s}${(0,kt.getProperty)((0,Kl.unescapeJsonPointer)(u))}`,o=(0,kt._)`${o} && ${s}`);return o;function l(u,c){return`Cannot access ${u} ${c} levels up, current level is ${e}`}}wa.getData=LV;var Km={};Object.defineProperty(Km,"__esModule",{value:!0});class moe extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}Km.default=moe;var Ym={};Object.defineProperty(Ym,"__esModule",{value:!0});const MS=Pi;class voe extends Error{constructor(e,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,MS.resolveUrl)(e,n,r),this.missingSchema=(0,MS.normalizeId)((0,MS.getFullPath)(e,this.missingRef))}}Ym.default=voe;var Fs={};Object.defineProperty(Fs,"__esModule",{value:!0});Fs.resolveSchema=Fs.getCompilingSchema=Fs.resolveRef=Fs.compileSchema=Fs.SchemaEnv=void 0;const sa=fn,yoe=Km,qc=hl,da=Pi,fI=In,boe=wa;class tw{constructor(e){var n;this.refs={},this.dynamicAnchors={};let r;typeof e.schema=="object"&&(r=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(n=e.baseId)!==null&&n!==void 0?n:(0,da.normalizeId)(r==null?void 0:r[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}Fs.SchemaEnv=tw;function uC(t){const e=DV.call(this,t);if(e)return e;const n=(0,da.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new sa.CodeGen(this.scope,{es5:r,lines:i,ownProperties:s});let a;t.$async&&(a=o.scopeValue("Error",{ref:yoe.default,code:(0,sa._)`require("ajv/dist/runtime/validation_error").default`}));const l=o.scopeName("validate");t.validateName=l;const u={gen:o,allErrors:this.opts.allErrors,data:qc.default.data,parentData:qc.default.parentData,parentDataProperty:qc.default.parentDataProperty,dataNames:[qc.default.data],dataPathArr:[sa.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,sa.stringify)(t.schema)}:{ref:t.schema}),validateName:l,ValidationError:a,schema:t.schema,schemaEnv:t,rootId:n,baseId:t.baseId||n,schemaPath:sa.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,sa._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(t),(0,boe.validateFunctionCode)(u),o.optimize(this.opts.code.optimize);const f=o.toString();c=`${o.scopeRefs(qc.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,t));const v=new Function(`${qc.default.self}`,`${qc.default.scope}`,c)(this,this.scope.get());if(this.scope.value(l,{ref:v}),v.errors=null,v.schema=t.schema,v.schemaEnv=t,t.$async&&(v.$async=!0),this.opts.code.source===!0&&(v.source={validateName:l,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){const{props:b,items:E}=u;v.evaluated={props:b instanceof sa.Name?void 0:b,items:E instanceof sa.Name?void 0:E,dynamicProps:b instanceof sa.Name,dynamicItems:E instanceof sa.Name},v.source&&(v.source.evaluated=(0,sa.stringify)(v.evaluated))}return t.validate=v,t}catch(f){throw delete t.validate,delete t.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(t)}}Fs.compileSchema=uC;function woe(t,e,n){var r;n=(0,da.resolveUrl)(this.opts.uriResolver,e,n);const i=t.refs[n];if(i)return i;let s=Eoe.call(this,t,n);if(s===void 0){const o=(r=t.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(s=new tw({schema:o,schemaId:a,root:t,baseId:e}))}if(s!==void 0)return t.refs[n]=xoe.call(this,s)}Fs.resolveRef=woe;function xoe(t){return(0,da.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:uC.call(this,t)}function DV(t){for(const e of this._compilations)if(Soe(e,t))return e}Fs.getCompilingSchema=DV;function Soe(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function Eoe(t,e){let n;for(;typeof(n=this.refs[e])=="string";)e=n;return n||this.schemas[e]||nw.call(this,t,e)}function nw(t,e){const n=this.opts.uriResolver.parse(e),r=(0,da._getFullPath)(this.opts.uriResolver,n);let i=(0,da.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&r===i)return NS.call(this,n,t);const s=(0,da.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=nw.call(this,t,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:NS.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||uC.call(this,o),s===(0,da.normalizeId)(e)){const{schema:a}=o,{schemaId:l}=this.opts,u=a[l];return u&&(i=(0,da.resolveUrl)(this.opts.uriResolver,i,u)),new tw({schema:a,schemaId:l,root:t,baseId:i})}return NS.call(this,n,o)}}Fs.resolveSchema=nw;const _oe=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function NS(t,{baseId:e,schema:n,root:r}){var i;if(((i=t.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of t.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const l=n[(0,fI.unescapeFragment)(a)];if(l===void 0)return;n=l;const u=typeof n=="object"&&n[this.opts.schemaId];!_oe.has(a)&&u&&(e=(0,da.resolveUrl)(this.opts.uriResolver,e,u))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,fI.schemaHasRulesButRef)(n,this.RULES)){const a=(0,da.resolveUrl)(this.opts.uriResolver,e,n.$ref);s=nw.call(this,r,a)}const{schemaId:o}=this.opts;if(s=s||new tw({schema:n,schemaId:o,root:r,baseId:e}),s.schema!==s.root.schema)return s}const Aoe="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",koe="Meta-schema for $data reference (JSON AnySchema extension proposal)",Coe="object",Poe=["$data"],Ooe={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},Toe=!1,Moe={$id:Aoe,description:koe,type:Coe,required:Poe,properties:Ooe,additionalProperties:Toe};var cC={},H_={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(t,e){(function(n,r){r(e)})(si,function(n){function r(){for(var he=arguments.length,te=Array(he),pe=0;pe<he;pe++)te[pe]=arguments[pe];if(te.length>1){te[0]=te[0].slice(0,-1);for(var Me=te.length-1,Oe=1;Oe<Me;++Oe)te[Oe]=te[Oe].slice(1,-1);return te[Me]=te[Me].slice(1),te.join("")}else return te[0]}function i(he){return"(?:"+he+")"}function s(he){return he===void 0?"undefined":he===null?"null":Object.prototype.toString.call(he).split(" ").pop().split("]").shift().toLowerCase()}function o(he){return he.toUpperCase()}function a(he){return he!=null?he instanceof Array?he:typeof he.length!="number"||he.split||he.setInterval||he.call?[he]:Array.prototype.slice.call(he):[]}function l(he,te){var pe=he;if(te)for(var Me in te)pe[Me]=te[Me];return pe}function u(he){var te="[A-Za-z]",pe="[0-9]",Me=r(pe,"[A-Fa-f]"),Oe=i(i("%[EFef]"+Me+"%"+Me+Me+"%"+Me+Me)+"|"+i("%[89A-Fa-f]"+Me+"%"+Me+Me)+"|"+i("%"+Me+Me)),bt="[\\:\\/\\?\\#\\[\\]\\@]",xt="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",rn=r(bt,xt),Bn=he?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",sr=he?"[\\uE000-\\uF8FF]":"[]",en=r(te,pe,"[\\-\\.\\_\\~]",Bn);i(te+r(te,pe,"[\\+\\-\\.]")+"*"),i(i(Oe+"|"+r(en,xt,"[\\:]"))+"*");var Pn=i(i("25[0-5]")+"|"+i("2[0-4]"+pe)+"|"+i("1"+pe+pe)+"|"+i("0?[1-9]"+pe)+"|0?0?"+pe),or=i(Pn+"\\."+Pn+"\\."+Pn+"\\."+Pn),Bt=i(Me+"{1,4}"),Un=i(i(Bt+"\\:"+Bt)+"|"+or),Wn=i(i(Bt+"\\:")+"{6}"+Un),Gn=i("\\:\\:"+i(Bt+"\\:")+"{5}"+Un),bi=i(i(Bt)+"?\\:\\:"+i(Bt+"\\:")+"{4}"+Un),ys=i(i(i(Bt+"\\:")+"{0,1}"+Bt)+"?\\:\\:"+i(Bt+"\\:")+"{3}"+Un),bs=i(i(i(Bt+"\\:")+"{0,2}"+Bt)+"?\\:\\:"+i(Bt+"\\:")+"{2}"+Un),Zo=i(i(i(Bt+"\\:")+"{0,3}"+Bt)+"?\\:\\:"+Bt+"\\:"+Un),Xs=i(i(i(Bt+"\\:")+"{0,4}"+Bt)+"?\\:\\:"+Un),ei=i(i(i(Bt+"\\:")+"{0,5}"+Bt)+"?\\:\\:"+Bt),Ii=i(i(i(Bt+"\\:")+"{0,6}"+Bt)+"?\\:\\:"),vr=i([Wn,Gn,bi,ys,bs,Zo,Xs,ei,Ii].join("|")),hi=i(i(en+"|"+Oe)+"+");i("[vV]"+Me+"+\\."+r(en,xt,"[\\:]")+"+"),i(i(Oe+"|"+r(en,xt))+"*");var xo=i(Oe+"|"+r(en,xt,"[\\:\\@]"));return i(i(Oe+"|"+r(en,xt,"[\\@]"))+"+"),i(i(xo+"|"+r("[\\/\\?]",sr))+"*"),{NOT_SCHEME:new RegExp(r("[^]",te,pe,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",en,xt),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",en,xt),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",en,xt),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",en,xt),"g"),NOT_QUERY:new RegExp(r("[^\\%]",en,xt,"[\\:\\@\\/\\?]",sr),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",en,xt,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",en,xt),"g"),UNRESERVED:new RegExp(en,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",en,rn),"g"),PCT_ENCODED:new RegExp(Oe,"g"),IPV4ADDRESS:new RegExp("^("+or+")$"),IPV6ADDRESS:new RegExp("^\\[?("+vr+")"+i(i("\\%25|\\%(?!"+Me+"{2})")+"("+hi+")")+"?\\]?$")}}var c=u(!1),f=u(!0),p=function(){function he(te,pe){var Me=[],Oe=!0,bt=!1,xt=void 0;try{for(var rn=te[Symbol.iterator](),Bn;!(Oe=(Bn=rn.next()).done)&&(Me.push(Bn.value),!(pe&&Me.length===pe));Oe=!0);}catch(sr){bt=!0,xt=sr}finally{try{!Oe&&rn.return&&rn.return()}finally{if(bt)throw xt}}return Me}return function(te,pe){if(Array.isArray(te))return te;if(Symbol.iterator in Object(te))return he(te,pe);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),v=function(he){if(Array.isArray(he)){for(var te=0,pe=Array(he.length);te<he.length;te++)pe[te]=he[te];return pe}else return Array.from(he)},b=2147483647,E=36,P=1,S=26,A=38,I=700,N=72,x=128,g="-",_=/^xn--/,M=/[^\0-\x7E]/,D=/[\x2E\u3002\uFF0E\uFF61]/g,q={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=E-P,W=Math.floor,G=String.fromCharCode;function Z(he){throw new RangeError(q[he])}function de(he,te){for(var pe=[],Me=he.length;Me--;)pe[Me]=te(he[Me]);return pe}function be(he,te){var pe=he.split("@"),Me="";pe.length>1&&(Me=pe[0]+"@",he=pe[1]),he=he.replace(D,".");var Oe=he.split("."),bt=de(Oe,te).join(".");return Me+bt}function _e(he){for(var te=[],pe=0,Me=he.length;pe<Me;){var Oe=he.charCodeAt(pe++);if(Oe>=55296&&Oe<=56319&&pe<Me){var bt=he.charCodeAt(pe++);(bt&64512)==56320?te.push(((Oe&1023)<<10)+(bt&1023)+65536):(te.push(Oe),pe--)}else te.push(Oe)}return te}var Te=function(te){return String.fromCodePoint.apply(String,v(te))},Le=function(te){return te-48<10?te-22:te-65<26?te-65:te-97<26?te-97:E},Ee=function(te,pe){return te+22+75*(te<26)-((pe!=0)<<5)},re=function(te,pe,Me){var Oe=0;for(te=Me?W(te/I):te>>1,te+=W(te/pe);te>R*S>>1;Oe+=E)te=W(te/R);return W(Oe+(R+1)*te/(te+A))},ne=function(te){var pe=[],Me=te.length,Oe=0,bt=x,xt=N,rn=te.lastIndexOf(g);rn<0&&(rn=0);for(var Bn=0;Bn<rn;++Bn)te.charCodeAt(Bn)>=128&&Z("not-basic"),pe.push(te.charCodeAt(Bn));for(var sr=rn>0?rn+1:0;sr<Me;){for(var en=Oe,Pn=1,or=E;;or+=E){sr>=Me&&Z("invalid-input");var Bt=Le(te.charCodeAt(sr++));(Bt>=E||Bt>W((b-Oe)/Pn))&&Z("overflow"),Oe+=Bt*Pn;var Un=or<=xt?P:or>=xt+S?S:or-xt;if(Bt<Un)break;var Wn=E-Un;Pn>W(b/Wn)&&Z("overflow"),Pn*=Wn}var Gn=pe.length+1;xt=re(Oe-en,Gn,en==0),W(Oe/Gn)>b-bt&&Z("overflow"),bt+=W(Oe/Gn),Oe%=Gn,pe.splice(Oe++,0,bt)}return String.fromCodePoint.apply(String,pe)},ee=function(te){var pe=[];te=_e(te);var Me=te.length,Oe=x,bt=0,xt=N,rn=!0,Bn=!1,sr=void 0;try{for(var en=te[Symbol.iterator](),Pn;!(rn=(Pn=en.next()).done);rn=!0){var or=Pn.value;or<128&&pe.push(G(or))}}catch(So){Bn=!0,sr=So}finally{try{!rn&&en.return&&en.return()}finally{if(Bn)throw sr}}var Bt=pe.length,Un=Bt;for(Bt&&pe.push(g);Un<Me;){var Wn=b,Gn=!0,bi=!1,ys=void 0;try{for(var bs=te[Symbol.iterator](),Zo;!(Gn=(Zo=bs.next()).done);Gn=!0){var Xs=Zo.value;Xs>=Oe&&Xs<Wn&&(Wn=Xs)}}catch(So){bi=!0,ys=So}finally{try{!Gn&&bs.return&&bs.return()}finally{if(bi)throw ys}}var ei=Un+1;Wn-Oe>W((b-bt)/ei)&&Z("overflow"),bt+=(Wn-Oe)*ei,Oe=Wn;var Ii=!0,vr=!1,hi=void 0;try{for(var xo=te[Symbol.iterator](),ah;!(Ii=(ah=xo.next()).done);Ii=!0){var Sc=ah.value;if(Sc<Oe&&++bt>b&&Z("overflow"),Sc==Oe){for(var Qo=bt,Oa=E;;Oa+=E){var Zs=Oa<=xt?P:Oa>=xt+S?S:Oa-xt;if(Qo<Zs)break;var Ec=Qo-Zs,_c=E-Zs;pe.push(G(Ee(Zs+Ec%_c,0))),Qo=W(Ec/_c)}pe.push(G(Ee(Qo,0))),xt=re(bt,ei,Un==Bt),bt=0,++Un}}}catch(So){vr=!0,hi=So}finally{try{!Ii&&xo.return&&xo.return()}finally{if(vr)throw hi}}++bt,++Oe}return pe.join("")},F=function(te){return be(te,function(pe){return _.test(pe)?ne(pe.slice(4).toLowerCase()):pe})},U=function(te){return be(te,function(pe){return M.test(pe)?"xn--"+ee(pe):pe})},ye={version:"2.1.0",ucs2:{decode:_e,encode:Te},decode:ne,encode:ee,toASCII:U,toUnicode:F},Fe={};function He(he){var te=he.charCodeAt(0),pe=void 0;return te<16?pe="%0"+te.toString(16).toUpperCase():te<128?pe="%"+te.toString(16).toUpperCase():te<2048?pe="%"+(te>>6|192).toString(16).toUpperCase()+"%"+(te&63|128).toString(16).toUpperCase():pe="%"+(te>>12|224).toString(16).toUpperCase()+"%"+(te>>6&63|128).toString(16).toUpperCase()+"%"+(te&63|128).toString(16).toUpperCase(),pe}function Be(he){for(var te="",pe=0,Me=he.length;pe<Me;){var Oe=parseInt(he.substr(pe+1,2),16);if(Oe<128)te+=String.fromCharCode(Oe),pe+=3;else if(Oe>=194&&Oe<224){if(Me-pe>=6){var bt=parseInt(he.substr(pe+4,2),16);te+=String.fromCharCode((Oe&31)<<6|bt&63)}else te+=he.substr(pe,6);pe+=6}else if(Oe>=224){if(Me-pe>=9){var xt=parseInt(he.substr(pe+4,2),16),rn=parseInt(he.substr(pe+7,2),16);te+=String.fromCharCode((Oe&15)<<12|(xt&63)<<6|rn&63)}else te+=he.substr(pe,9);pe+=9}else te+=he.substr(pe,3),pe+=3}return te}function Pe(he,te){function pe(Me){var Oe=Be(Me);return Oe.match(te.UNRESERVED)?Oe:Me}return he.scheme&&(he.scheme=String(he.scheme).replace(te.PCT_ENCODED,pe).toLowerCase().replace(te.NOT_SCHEME,"")),he.userinfo!==void 0&&(he.userinfo=String(he.userinfo).replace(te.PCT_ENCODED,pe).replace(te.NOT_USERINFO,He).replace(te.PCT_ENCODED,o)),he.host!==void 0&&(he.host=String(he.host).replace(te.PCT_ENCODED,pe).toLowerCase().replace(te.NOT_HOST,He).replace(te.PCT_ENCODED,o)),he.path!==void 0&&(he.path=String(he.path).replace(te.PCT_ENCODED,pe).replace(he.scheme?te.NOT_PATH:te.NOT_PATH_NOSCHEME,He).replace(te.PCT_ENCODED,o)),he.query!==void 0&&(he.query=String(he.query).replace(te.PCT_ENCODED,pe).replace(te.NOT_QUERY,He).replace(te.PCT_ENCODED,o)),he.fragment!==void 0&&(he.fragment=String(he.fragment).replace(te.PCT_ENCODED,pe).replace(te.NOT_FRAGMENT,He).replace(te.PCT_ENCODED,o)),he}function Ve(he){return he.replace(/^0*(.*)/,"$1")||"0"}function z(he,te){var pe=he.match(te.IPV4ADDRESS)||[],Me=p(pe,2),Oe=Me[1];return Oe?Oe.split(".").map(Ve).join("."):he}function K(he,te){var pe=he.match(te.IPV6ADDRESS)||[],Me=p(pe,3),Oe=Me[1],bt=Me[2];if(Oe){for(var xt=Oe.toLowerCase().split("::").reverse(),rn=p(xt,2),Bn=rn[0],sr=rn[1],en=sr?sr.split(":").map(Ve):[],Pn=Bn.split(":").map(Ve),or=te.IPV4ADDRESS.test(Pn[Pn.length-1]),Bt=or?7:8,Un=Pn.length-Bt,Wn=Array(Bt),Gn=0;Gn<Bt;++Gn)Wn[Gn]=en[Gn]||Pn[Un+Gn]||"";or&&(Wn[Bt-1]=z(Wn[Bt-1],te));var bi=Wn.reduce(function(ei,Ii,vr){if(!Ii||Ii==="0"){var hi=ei[ei.length-1];hi&&hi.index+hi.length===vr?hi.length++:ei.push({index:vr,length:1})}return ei},[]),ys=bi.sort(function(ei,Ii){return Ii.length-ei.length})[0],bs=void 0;if(ys&&ys.length>1){var Zo=Wn.slice(0,ys.index),Xs=Wn.slice(ys.index+ys.length);bs=Zo.join(":")+"::"+Xs.join(":")}else bs=Wn.join(":");return bt&&(bs+="%"+bt),bs}else return he}var C=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,$="".match(/(){0}/)[1]===void 0;function V(he){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},pe={},Me=te.iri!==!1?f:c;te.reference==="suffix"&&(he=(te.scheme?te.scheme+":":"")+"//"+he);var Oe=he.match(C);if(Oe){$?(pe.scheme=Oe[1],pe.userinfo=Oe[3],pe.host=Oe[4],pe.port=parseInt(Oe[5],10),pe.path=Oe[6]||"",pe.query=Oe[7],pe.fragment=Oe[8],isNaN(pe.port)&&(pe.port=Oe[5])):(pe.scheme=Oe[1]||void 0,pe.userinfo=he.indexOf("@")!==-1?Oe[3]:void 0,pe.host=he.indexOf("//")!==-1?Oe[4]:void 0,pe.port=parseInt(Oe[5],10),pe.path=Oe[6]||"",pe.query=he.indexOf("?")!==-1?Oe[7]:void 0,pe.fragment=he.indexOf("#")!==-1?Oe[8]:void 0,isNaN(pe.port)&&(pe.port=he.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Oe[4]:void 0)),pe.host&&(pe.host=K(z(pe.host,Me),Me)),pe.scheme===void 0&&pe.userinfo===void 0&&pe.host===void 0&&pe.port===void 0&&!pe.path&&pe.query===void 0?pe.reference="same-document":pe.scheme===void 0?pe.reference="relative":pe.fragment===void 0?pe.reference="absolute":pe.reference="uri",te.reference&&te.reference!=="suffix"&&te.reference!==pe.reference&&(pe.error=pe.error||"URI is not a "+te.reference+" reference.");var bt=Fe[(te.scheme||pe.scheme||"").toLowerCase()];if(!te.unicodeSupport&&(!bt||!bt.unicodeSupport)){if(pe.host&&(te.domainHost||bt&&bt.domainHost))try{pe.host=ye.toASCII(pe.host.replace(Me.PCT_ENCODED,Be).toLowerCase())}catch(xt){pe.error=pe.error||"Host's domain name can not be converted to ASCII via punycode: "+xt}Pe(pe,c)}else Pe(pe,Me);bt&&bt.parse&&bt.parse(pe,te)}else pe.error=pe.error||"URI can not be parsed.";return pe}function Q(he,te){var pe=te.iri!==!1?f:c,Me=[];return he.userinfo!==void 0&&(Me.push(he.userinfo),Me.push("@")),he.host!==void 0&&Me.push(K(z(String(he.host),pe),pe).replace(pe.IPV6ADDRESS,function(Oe,bt,xt){return"["+bt+(xt?"%25"+xt:"")+"]"})),(typeof he.port=="number"||typeof he.port=="string")&&(Me.push(":"),Me.push(String(he.port))),Me.length?Me.join(""):void 0}var ce=/^\.\.?\//,ue=/^\/\.(\/|$)/,ke=/^\/\.\.(\/|$)/,Ae=/^\/?(?:.|\n)*?(?=\/|$)/;function tt(he){for(var te=[];he.length;)if(he.match(ce))he=he.replace(ce,"");else if(he.match(ue))he=he.replace(ue,"/");else if(he.match(ke))he=he.replace(ke,"/"),te.pop();else if(he==="."||he==="..")he="";else{var pe=he.match(Ae);if(pe){var Me=pe[0];he=he.slice(Me.length),te.push(Me)}else throw new Error("Unexpected dot segment condition")}return te.join("")}function Je(he){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},pe=te.iri?f:c,Me=[],Oe=Fe[(te.scheme||he.scheme||"").toLowerCase()];if(Oe&&Oe.serialize&&Oe.serialize(he,te),he.host&&!pe.IPV6ADDRESS.test(he.host)){if(te.domainHost||Oe&&Oe.domainHost)try{he.host=te.iri?ye.toUnicode(he.host):ye.toASCII(he.host.replace(pe.PCT_ENCODED,Be).toLowerCase())}catch(rn){he.error=he.error||"Host's domain name can not be converted to "+(te.iri?"Unicode":"ASCII")+" via punycode: "+rn}}Pe(he,pe),te.reference!=="suffix"&&he.scheme&&(Me.push(he.scheme),Me.push(":"));var bt=Q(he,te);if(bt!==void 0&&(te.reference!=="suffix"&&Me.push("//"),Me.push(bt),he.path&&he.path.charAt(0)!=="/"&&Me.push("/")),he.path!==void 0){var xt=he.path;!te.absolutePath&&(!Oe||!Oe.absolutePath)&&(xt=tt(xt)),bt===void 0&&(xt=xt.replace(/^\/\//,"/%2F")),Me.push(xt)}return he.query!==void 0&&(Me.push("?"),Me.push(he.query)),he.fragment!==void 0&&(Me.push("#"),Me.push(he.fragment)),Me.join("")}function Xe(he,te){var pe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Me=arguments[3],Oe={};return Me||(he=V(Je(he,pe),pe),te=V(Je(te,pe),pe)),pe=pe||{},!pe.tolerant&&te.scheme?(Oe.scheme=te.scheme,Oe.userinfo=te.userinfo,Oe.host=te.host,Oe.port=te.port,Oe.path=tt(te.path||""),Oe.query=te.query):(te.userinfo!==void 0||te.host!==void 0||te.port!==void 0?(Oe.userinfo=te.userinfo,Oe.host=te.host,Oe.port=te.port,Oe.path=tt(te.path||""),Oe.query=te.query):(te.path?(te.path.charAt(0)==="/"?Oe.path=tt(te.path):((he.userinfo!==void 0||he.host!==void 0||he.port!==void 0)&&!he.path?Oe.path="/"+te.path:he.path?Oe.path=he.path.slice(0,he.path.lastIndexOf("/")+1)+te.path:Oe.path=te.path,Oe.path=tt(Oe.path)),Oe.query=te.query):(Oe.path=he.path,te.query!==void 0?Oe.query=te.query:Oe.query=he.query),Oe.userinfo=he.userinfo,Oe.host=he.host,Oe.port=he.port),Oe.scheme=he.scheme),Oe.fragment=te.fragment,Oe}function Ye(he,te,pe){var Me=l({scheme:"null"},pe);return Je(Xe(V(he,Me),V(te,Me),Me,!0),Me)}function ft(he,te){return typeof he=="string"?he=Je(V(he,te),te):s(he)==="object"&&(he=V(Je(he,te),te)),he}function Nt(he,te,pe){return typeof he=="string"?he=Je(V(he,pe),pe):s(he)==="object"&&(he=Je(he,pe)),typeof te=="string"?te=Je(V(te,pe),pe):s(te)==="object"&&(te=Je(te,pe)),he===te}function Vt(he,te){return he&&he.toString().replace(!te||!te.iri?c.ESCAPE:f.ESCAPE,He)}function yt(he,te){return he&&he.toString().replace(!te||!te.iri?c.PCT_ENCODED:f.PCT_ENCODED,Be)}var Gt={scheme:"http",domainHost:!0,parse:function(te,pe){return te.host||(te.error=te.error||"HTTP URIs must have a host."),te},serialize:function(te,pe){var Me=String(te.scheme).toLowerCase()==="https";return(te.port===(Me?443:80)||te.port==="")&&(te.port=void 0),te.path||(te.path="/"),te}},qn={scheme:"https",domainHost:Gt.domainHost,parse:Gt.parse,serialize:Gt.serialize};function Or(he){return typeof he.secure=="boolean"?he.secure:String(he.scheme).toLowerCase()==="wss"}var ir={scheme:"ws",domainHost:!0,parse:function(te,pe){var Me=te;return Me.secure=Or(Me),Me.resourceName=(Me.path||"/")+(Me.query?"?"+Me.query:""),Me.path=void 0,Me.query=void 0,Me},serialize:function(te,pe){if((te.port===(Or(te)?443:80)||te.port==="")&&(te.port=void 0),typeof te.secure=="boolean"&&(te.scheme=te.secure?"wss":"ws",te.secure=void 0),te.resourceName){var Me=te.resourceName.split("?"),Oe=p(Me,2),bt=Oe[0],xt=Oe[1];te.path=bt&&bt!=="/"?bt:void 0,te.query=xt,te.resourceName=void 0}return te.fragment=void 0,te}},yi={scheme:"wss",domainHost:ir.domainHost,parse:ir.parse,serialize:ir.serialize},Qn={},Sn="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",En="[0-9A-Fa-f]",vs=i(i("%[EFef]"+En+"%"+En+En+"%"+En+En)+"|"+i("%[89A-Fa-f]"+En+"%"+En+En)+"|"+i("%"+En+En)),uu="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",dl="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Ca=r(dl,'[\\"\\\\]'),Js="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Qr=new RegExp(Sn,"g"),Pa=new RegExp(vs,"g"),tp=new RegExp(r("[^]",uu,"[\\.]",'[\\"]',Ca),"g"),cu=new RegExp(r("[^]",Sn,Js),"g"),pl=cu;function xc(he){var te=Be(he);return te.match(Qr)?te:he}var oh={scheme:"mailto",parse:function(te,pe){var Me=te,Oe=Me.to=Me.path?Me.path.split(","):[];if(Me.path=void 0,Me.query){for(var bt=!1,xt={},rn=Me.query.split("&"),Bn=0,sr=rn.length;Bn<sr;++Bn){var en=rn[Bn].split("=");switch(en[0]){case"to":for(var Pn=en[1].split(","),or=0,Bt=Pn.length;or<Bt;++or)Oe.push(Pn[or]);break;case"subject":Me.subject=yt(en[1],pe);break;case"body":Me.body=yt(en[1],pe);break;default:bt=!0,xt[yt(en[0],pe)]=yt(en[1],pe);break}}bt&&(Me.headers=xt)}Me.query=void 0;for(var Un=0,Wn=Oe.length;Un<Wn;++Un){var Gn=Oe[Un].split("@");if(Gn[0]=yt(Gn[0]),pe.unicodeSupport)Gn[1]=yt(Gn[1],pe).toLowerCase();else try{Gn[1]=ye.toASCII(yt(Gn[1],pe).toLowerCase())}catch(bi){Me.error=Me.error||"Email address's domain name can not be converted to ASCII via punycode: "+bi}Oe[Un]=Gn.join("@")}return Me},serialize:function(te,pe){var Me=te,Oe=a(te.to);if(Oe){for(var bt=0,xt=Oe.length;bt<xt;++bt){var rn=String(Oe[bt]),Bn=rn.lastIndexOf("@"),sr=rn.slice(0,Bn).replace(Pa,xc).replace(Pa,o).replace(tp,He),en=rn.slice(Bn+1);try{en=pe.iri?ye.toUnicode(en):ye.toASCII(yt(en,pe).toLowerCase())}catch(Un){Me.error=Me.error||"Email address's domain name can not be converted to "+(pe.iri?"Unicode":"ASCII")+" via punycode: "+Un}Oe[bt]=sr+"@"+en}Me.path=Oe.join(",")}var Pn=te.headers=te.headers||{};te.subject&&(Pn.subject=te.subject),te.body&&(Pn.body=te.body);var or=[];for(var Bt in Pn)Pn[Bt]!==Qn[Bt]&&or.push(Bt.replace(Pa,xc).replace(Pa,o).replace(cu,He)+"="+Pn[Bt].replace(Pa,xc).replace(Pa,o).replace(pl,He));return or.length&&(Me.query=or.join("&")),Me}},np=/^([^\:]+)\:(.*)/,gl={scheme:"urn",parse:function(te,pe){var Me=te.path&&te.path.match(np),Oe=te;if(Me){var bt=pe.scheme||Oe.scheme||"urn",xt=Me[1].toLowerCase(),rn=Me[2],Bn=bt+":"+(pe.nid||xt),sr=Fe[Bn];Oe.nid=xt,Oe.nss=rn,Oe.path=void 0,sr&&(Oe=sr.parse(Oe,pe))}else Oe.error=Oe.error||"URN can not be parsed.";return Oe},serialize:function(te,pe){var Me=pe.scheme||te.scheme||"urn",Oe=te.nid,bt=Me+":"+(pe.nid||Oe),xt=Fe[bt];xt&&(te=xt.serialize(te,pe));var rn=te,Bn=te.nss;return rn.path=(Oe||pe.nid)+":"+Bn,rn}},rp=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,fu={scheme:"urn:uuid",parse:function(te,pe){var Me=te;return Me.uuid=Me.nss,Me.nss=void 0,!pe.tolerant&&(!Me.uuid||!Me.uuid.match(rp))&&(Me.error=Me.error||"UUID is not valid."),Me},serialize:function(te,pe){var Me=te;return Me.nss=(te.uuid||"").toLowerCase(),Me}};Fe[Gt.scheme]=Gt,Fe[qn.scheme]=qn,Fe[ir.scheme]=ir,Fe[yi.scheme]=yi,Fe[oh.scheme]=oh,Fe[gl.scheme]=gl,Fe[fu.scheme]=fu,n.SCHEMES=Fe,n.pctEncChar=He,n.pctDecChars=Be,n.parse=V,n.removeDotSegments=tt,n.serialize=Je,n.resolveComponents=Xe,n.resolve=Ye,n.normalize=ft,n.equal=Nt,n.escapeComponent=Vt,n.unescapeComponent=yt,Object.defineProperty(n,"__esModule",{value:!0})})})(H_,H_.exports);var Noe=H_.exports;Object.defineProperty(cC,"__esModule",{value:!0});const FV=Noe;FV.code='require("ajv/dist/runtime/uri").default';cC.default=FV;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var e=wa;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return e.KeywordCxt}});var n=fn;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=Km,i=Ym,s=Df,o=Fs,a=fn,l=Pi,u=Gm,c=In,f=Moe,p=cC,v=(Ee,re)=>new RegExp(Ee,re);v.code="new RegExp";const b=["removeAdditional","useDefaults","coerceTypes"],E=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),P={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},S={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},A=200;function I(Ee){var re,ne,ee,F,U,ye,Fe,He,Be,Pe,Ve,z,K,C,$,V,Q,ce,ue,ke,Ae,tt,Je,Xe,Ye;const ft=Ee.strict,Nt=(re=Ee.code)===null||re===void 0?void 0:re.optimize,Vt=Nt===!0||Nt===void 0?1:Nt||0,yt=(ee=(ne=Ee.code)===null||ne===void 0?void 0:ne.regExp)!==null&&ee!==void 0?ee:v,Gt=(F=Ee.uriResolver)!==null&&F!==void 0?F:p.default;return{strictSchema:(ye=(U=Ee.strictSchema)!==null&&U!==void 0?U:ft)!==null&&ye!==void 0?ye:!0,strictNumbers:(He=(Fe=Ee.strictNumbers)!==null&&Fe!==void 0?Fe:ft)!==null&&He!==void 0?He:!0,strictTypes:(Pe=(Be=Ee.strictTypes)!==null&&Be!==void 0?Be:ft)!==null&&Pe!==void 0?Pe:"log",strictTuples:(z=(Ve=Ee.strictTuples)!==null&&Ve!==void 0?Ve:ft)!==null&&z!==void 0?z:"log",strictRequired:(C=(K=Ee.strictRequired)!==null&&K!==void 0?K:ft)!==null&&C!==void 0?C:!1,code:Ee.code?{...Ee.code,optimize:Vt,regExp:yt}:{optimize:Vt,regExp:yt},loopRequired:($=Ee.loopRequired)!==null&&$!==void 0?$:A,loopEnum:(V=Ee.loopEnum)!==null&&V!==void 0?V:A,meta:(Q=Ee.meta)!==null&&Q!==void 0?Q:!0,messages:(ce=Ee.messages)!==null&&ce!==void 0?ce:!0,inlineRefs:(ue=Ee.inlineRefs)!==null&&ue!==void 0?ue:!0,schemaId:(ke=Ee.schemaId)!==null&&ke!==void 0?ke:"$id",addUsedSchema:(Ae=Ee.addUsedSchema)!==null&&Ae!==void 0?Ae:!0,validateSchema:(tt=Ee.validateSchema)!==null&&tt!==void 0?tt:!0,validateFormats:(Je=Ee.validateFormats)!==null&&Je!==void 0?Je:!0,unicodeRegExp:(Xe=Ee.unicodeRegExp)!==null&&Xe!==void 0?Xe:!0,int32range:(Ye=Ee.int32range)!==null&&Ye!==void 0?Ye:!0,uriResolver:Gt}}class N{constructor(re={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,re=this.opts={...re,...I(re)};const{es5:ne,lines:ee}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:E,es5:ne,lines:ee}),this.logger=W(re.logger);const F=re.validateFormats;re.validateFormats=!1,this.RULES=(0,s.getRules)(),x.call(this,P,re,"NOT SUPPORTED"),x.call(this,S,re,"DEPRECATED","warn"),this._metaOpts=q.call(this),re.formats&&M.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),re.keywords&&D.call(this,re.keywords),typeof re.meta=="object"&&this.addMetaSchema(re.meta),_.call(this),re.validateFormats=F}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:re,meta:ne,schemaId:ee}=this.opts;let F=f;ee==="id"&&(F={...f},F.id=F.$id,delete F.$id),ne&&re&&this.addMetaSchema(F,F[ee],!1)}defaultMeta(){const{meta:re,schemaId:ne}=this.opts;return this.opts.defaultMeta=typeof re=="object"?re[ne]||re:void 0}validate(re,ne){let ee;if(typeof re=="string"){if(ee=this.getSchema(re),!ee)throw new Error(`no schema with key or ref "${re}"`)}else ee=this.compile(re);const F=ee(ne);return"$async"in ee||(this.errors=ee.errors),F}compile(re,ne){const ee=this._addSchema(re,ne);return ee.validate||this._compileSchemaEnv(ee)}compileAsync(re,ne){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:ee}=this.opts;return F.call(this,re,ne);async function F(Pe,Ve){await U.call(this,Pe.$schema);const z=this._addSchema(Pe,Ve);return z.validate||ye.call(this,z)}async function U(Pe){Pe&&!this.getSchema(Pe)&&await F.call(this,{$ref:Pe},!0)}async function ye(Pe){try{return this._compileSchemaEnv(Pe)}catch(Ve){if(!(Ve instanceof i.default))throw Ve;return Fe.call(this,Ve),await He.call(this,Ve.missingSchema),ye.call(this,Pe)}}function Fe({missingSchema:Pe,missingRef:Ve}){if(this.refs[Pe])throw new Error(`AnySchema ${Pe} is loaded but ${Ve} cannot be resolved`)}async function He(Pe){const Ve=await Be.call(this,Pe);this.refs[Pe]||await U.call(this,Ve.$schema),this.refs[Pe]||this.addSchema(Ve,Pe,ne)}async function Be(Pe){const Ve=this._loading[Pe];if(Ve)return Ve;try{return await(this._loading[Pe]=ee(Pe))}finally{delete this._loading[Pe]}}}addSchema(re,ne,ee,F=this.opts.validateSchema){if(Array.isArray(re)){for(const ye of re)this.addSchema(ye,void 0,ee,F);return this}let U;if(typeof re=="object"){const{schemaId:ye}=this.opts;if(U=re[ye],U!==void 0&&typeof U!="string")throw new Error(`schema ${ye} must be string`)}return ne=(0,l.normalizeId)(ne||U),this._checkUnique(ne),this.schemas[ne]=this._addSchema(re,ee,ne,F,!0),this}addMetaSchema(re,ne,ee=this.opts.validateSchema){return this.addSchema(re,ne,!0,ee),this}validateSchema(re,ne){if(typeof re=="boolean")return!0;let ee;if(ee=re.$schema,ee!==void 0&&typeof ee!="string")throw new Error("$schema must be a string");if(ee=ee||this.opts.defaultMeta||this.defaultMeta(),!ee)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const F=this.validate(ee,re);if(!F&&ne){const U="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(U);else throw new Error(U)}return F}getSchema(re){let ne;for(;typeof(ne=g.call(this,re))=="string";)re=ne;if(ne===void 0){const{schemaId:ee}=this.opts,F=new o.SchemaEnv({schema:{},schemaId:ee});if(ne=o.resolveSchema.call(this,F,re),!ne)return;this.refs[re]=ne}return ne.validate||this._compileSchemaEnv(ne)}removeSchema(re){if(re instanceof RegExp)return this._removeAllSchemas(this.schemas,re),this._removeAllSchemas(this.refs,re),this;switch(typeof re){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const ne=g.call(this,re);return typeof ne=="object"&&this._cache.delete(ne.schema),delete this.schemas[re],delete this.refs[re],this}case"object":{const ne=re;this._cache.delete(ne);let ee=re[this.opts.schemaId];return ee&&(ee=(0,l.normalizeId)(ee),delete this.schemas[ee],delete this.refs[ee]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(re){for(const ne of re)this.addKeyword(ne);return this}addKeyword(re,ne){let ee;if(typeof re=="string")ee=re,typeof ne=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),ne.keyword=ee);else if(typeof re=="object"&&ne===void 0){if(ne=re,ee=ne.keyword,Array.isArray(ee)&&!ee.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(Z.call(this,ee,ne),!ne)return(0,c.eachItem)(ee,U=>de.call(this,U)),this;_e.call(this,ne);const F={...ne,type:(0,u.getJSONTypes)(ne.type),schemaType:(0,u.getJSONTypes)(ne.schemaType)};return(0,c.eachItem)(ee,F.type.length===0?U=>de.call(this,U,F):U=>F.type.forEach(ye=>de.call(this,U,F,ye))),this}getKeyword(re){const ne=this.RULES.all[re];return typeof ne=="object"?ne.definition:!!ne}removeKeyword(re){const{RULES:ne}=this;delete ne.keywords[re],delete ne.all[re];for(const ee of ne.rules){const F=ee.rules.findIndex(U=>U.keyword===re);F>=0&&ee.rules.splice(F,1)}return this}addFormat(re,ne){return typeof ne=="string"&&(ne=new RegExp(ne)),this.formats[re]=ne,this}errorsText(re=this.errors,{separator:ne=", ",dataVar:ee="data"}={}){return!re||re.length===0?"No errors":re.map(F=>`${ee}${F.instancePath} ${F.message}`).reduce((F,U)=>F+ne+U)}$dataMetaSchema(re,ne){const ee=this.RULES.all;re=JSON.parse(JSON.stringify(re));for(const F of ne){const U=F.split("/").slice(1);let ye=re;for(const Fe of U)ye=ye[Fe];for(const Fe in ee){const He=ee[Fe];if(typeof He!="object")continue;const{$data:Be}=He.definition,Pe=ye[Fe];Be&&Pe&&(ye[Fe]=Le(Pe))}}return re}_removeAllSchemas(re,ne){for(const ee in re){const F=re[ee];(!ne||ne.test(ee))&&(typeof F=="string"?delete re[ee]:F&&!F.meta&&(this._cache.delete(F.schema),delete re[ee]))}}_addSchema(re,ne,ee,F=this.opts.validateSchema,U=this.opts.addUsedSchema){let ye;const{schemaId:Fe}=this.opts;if(typeof re=="object")ye=re[Fe];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof re!="boolean")throw new Error("schema must be object or boolean")}let He=this._cache.get(re);if(He!==void 0)return He;ee=(0,l.normalizeId)(ye||ee);const Be=l.getSchemaRefs.call(this,re,ee);return He=new o.SchemaEnv({schema:re,schemaId:Fe,meta:ne,baseId:ee,localRefs:Be}),this._cache.set(He.schema,He),U&&!ee.startsWith("#")&&(ee&&this._checkUnique(ee),this.refs[ee]=He),F&&this.validateSchema(re,!0),He}_checkUnique(re){if(this.schemas[re]||this.refs[re])throw new Error(`schema with key or id "${re}" already exists`)}_compileSchemaEnv(re){if(re.meta?this._compileMetaSchema(re):o.compileSchema.call(this,re),!re.validate)throw new Error("ajv implementation error");return re.validate}_compileMetaSchema(re){const ne=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,re)}finally{this.opts=ne}}}t.default=N,N.ValidationError=r.default,N.MissingRefError=i.default;function x(Ee,re,ne,ee="error"){for(const F in Ee){const U=F;U in re&&this.logger[ee](`${ne}: option ${F}. ${Ee[U]}`)}}function g(Ee){return Ee=(0,l.normalizeId)(Ee),this.schemas[Ee]||this.refs[Ee]}function _(){const Ee=this.opts.schemas;if(Ee)if(Array.isArray(Ee))this.addSchema(Ee);else for(const re in Ee)this.addSchema(Ee[re],re)}function M(){for(const Ee in this.opts.formats){const re=this.opts.formats[Ee];re&&this.addFormat(Ee,re)}}function D(Ee){if(Array.isArray(Ee)){this.addVocabulary(Ee);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const re in Ee){const ne=Ee[re];ne.keyword||(ne.keyword=re),this.addKeyword(ne)}}function q(){const Ee={...this.opts};for(const re of b)delete Ee[re];return Ee}const R={log(){},warn(){},error(){}};function W(Ee){if(Ee===!1)return R;if(Ee===void 0)return console;if(Ee.log&&Ee.warn&&Ee.error)return Ee;throw new Error("logger must implement log, warn and error methods")}const G=/^[a-z_$][a-z0-9_$:-]*$/i;function Z(Ee,re){const{RULES:ne}=this;if((0,c.eachItem)(Ee,ee=>{if(ne.keywords[ee])throw new Error(`Keyword ${ee} is already defined`);if(!G.test(ee))throw new Error(`Keyword ${ee} has invalid name`)}),!!re&&re.$data&&!("code"in re||"validate"in re))throw new Error('$data keyword must have "code" or "validate" function')}function de(Ee,re,ne){var ee;const F=re==null?void 0:re.post;if(ne&&F)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:U}=this;let ye=F?U.post:U.rules.find(({type:He})=>He===ne);if(ye||(ye={type:ne,rules:[]},U.rules.push(ye)),U.keywords[Ee]=!0,!re)return;const Fe={keyword:Ee,definition:{...re,type:(0,u.getJSONTypes)(re.type),schemaType:(0,u.getJSONTypes)(re.schemaType)}};re.before?be.call(this,ye,Fe,re.before):ye.rules.push(Fe),U.all[Ee]=Fe,(ee=re.implements)===null||ee===void 0||ee.forEach(He=>this.addKeyword(He))}function be(Ee,re,ne){const ee=Ee.rules.findIndex(F=>F.keyword===ne);ee>=0?Ee.rules.splice(ee,0,re):(Ee.rules.push(re),this.logger.warn(`rule ${ne} is not defined`))}function _e(Ee){let{metaSchema:re}=Ee;re!==void 0&&(Ee.$data&&this.opts.$data&&(re=Le(re)),Ee.validateSchema=this.compile(re,!0))}const Te={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Le(Ee){return{anyOf:[Ee,Te]}}})(dV);var fC={},hC={},dC={};Object.defineProperty(dC,"__esModule",{value:!0});const Ioe={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};dC.default=Ioe;var Ff={};Object.defineProperty(Ff,"__esModule",{value:!0});Ff.callRef=Ff.getValidate=void 0;const $oe=Ym,hI=ln,Is=fn,Ah=hl,dI=Fs,H0=In,Roe={keyword:"$ref",schemaType:"string",code(t){const{gen:e,schema:n,it:r}=t,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:l}=r,{root:u}=s;if((n==="#"||n==="#/")&&i===u.baseId)return f();const c=dI.resolveRef.call(l,u,i,n);if(c===void 0)throw new $oe.default(r.opts.uriResolver,i,n);if(c instanceof dI.SchemaEnv)return p(c);return v(c);function f(){if(s===u)return Fy(t,o,s,s.$async);const b=e.scopeValue("root",{ref:u});return Fy(t,(0,Is._)`${b}.validate`,u,u.$async)}function p(b){const E=VV(t,b);Fy(t,E,b,b.$async)}function v(b){const E=e.scopeValue("schema",a.code.source===!0?{ref:b,code:(0,Is.stringify)(b)}:{ref:b}),P=e.name("valid"),S=t.subschema({schema:b,dataTypes:[],schemaPath:Is.nil,topSchemaRef:E,errSchemaPath:n},P);t.mergeEvaluated(S),t.ok(P)}}};function VV(t,e){const{gen:n}=t;return e.validate?n.scopeValue("validate",{ref:e.validate}):(0,Is._)`${n.scopeValue("wrapper",{ref:e})}.validate`}Ff.getValidate=VV;function Fy(t,e,n,r){const{gen:i,it:s}=t,{allErrors:o,schemaEnv:a,opts:l}=s,u=l.passContext?Ah.default.this:Is.nil;r?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const b=i.let("valid");i.try(()=>{i.code((0,Is._)`await ${(0,hI.callValidateCode)(t,e,u)}`),v(e),o||i.assign(b,!0)},E=>{i.if((0,Is._)`!(${E} instanceof ${s.ValidationError})`,()=>i.throw(E)),p(E),o||i.assign(b,!1)}),t.ok(b)}function f(){t.result((0,hI.callValidateCode)(t,e,u),()=>v(e),()=>p(e))}function p(b){const E=(0,Is._)`${b}.errors`;i.assign(Ah.default.vErrors,(0,Is._)`${Ah.default.vErrors} === null ? ${E} : ${Ah.default.vErrors}.concat(${E})`),i.assign(Ah.default.errors,(0,Is._)`${Ah.default.vErrors}.length`)}function v(b){var E;if(!s.opts.unevaluated)return;const P=(E=n==null?void 0:n.validate)===null||E===void 0?void 0:E.evaluated;if(s.props!==!0)if(P&&!P.dynamicProps)P.props!==void 0&&(s.props=H0.mergeEvaluated.props(i,P.props,s.props));else{const S=i.var("props",(0,Is._)`${b}.evaluated.props`);s.props=H0.mergeEvaluated.props(i,S,s.props,Is.Name)}if(s.items!==!0)if(P&&!P.dynamicItems)P.items!==void 0&&(s.items=H0.mergeEvaluated.items(i,P.items,s.items));else{const S=i.var("items",(0,Is._)`${b}.evaluated.items`);s.items=H0.mergeEvaluated.items(i,S,s.items,Is.Name)}}}Ff.callRef=Fy;Ff.default=Roe;Object.defineProperty(hC,"__esModule",{value:!0});const Loe=dC,Doe=Ff,Foe=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Loe.default,Doe.default];hC.default=Foe;var pC={},gC={};Object.defineProperty(gC,"__esModule",{value:!0});const Rb=fn,Cu=Rb.operators,Lb={maximum:{okStr:"<=",ok:Cu.LTE,fail:Cu.GT},minimum:{okStr:">=",ok:Cu.GTE,fail:Cu.LT},exclusiveMaximum:{okStr:"<",ok:Cu.LT,fail:Cu.GTE},exclusiveMinimum:{okStr:">",ok:Cu.GT,fail:Cu.LTE}},Voe={message:({keyword:t,schemaCode:e})=>(0,Rb.str)`must be ${Lb[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,Rb._)`{comparison: ${Lb[t].okStr}, limit: ${e}}`},Boe={keyword:Object.keys(Lb),type:"number",schemaType:"number",$data:!0,error:Voe,code(t){const{keyword:e,data:n,schemaCode:r}=t;t.fail$data((0,Rb._)`${n} ${Lb[e].fail} ${r} || isNaN(${n})`)}};gC.default=Boe;var mC={};Object.defineProperty(mC,"__esModule",{value:!0});const wg=fn,joe={message:({schemaCode:t})=>(0,wg.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,wg._)`{multipleOf: ${t}}`},zoe={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:joe,code(t){const{gen:e,data:n,schemaCode:r,it:i}=t,s=i.opts.multipleOfPrecision,o=e.let("res"),a=s?(0,wg._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,wg._)`${o} !== parseInt(${o})`;t.fail$data((0,wg._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};mC.default=zoe;var vC={},yC={};Object.defineProperty(yC,"__esModule",{value:!0});function BV(t){const e=t.length;let n=0,r=0,i;for(;r<e;)n++,i=t.charCodeAt(r++),i>=55296&&i<=56319&&r<e&&(i=t.charCodeAt(r),(i&64512)===56320&&r++);return n}yC.default=BV;BV.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(vC,"__esModule",{value:!0});const ef=fn,Hoe=In,Uoe=yC,qoe={message({keyword:t,schemaCode:e}){const n=t==="maxLength"?"more":"fewer";return(0,ef.str)`must NOT have ${n} than ${e} characters`},params:({schemaCode:t})=>(0,ef._)`{limit: ${t}}`},Woe={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:qoe,code(t){const{keyword:e,data:n,schemaCode:r,it:i}=t,s=e==="maxLength"?ef.operators.GT:ef.operators.LT,o=i.opts.unicode===!1?(0,ef._)`${n}.length`:(0,ef._)`${(0,Hoe.useFunc)(t.gen,Uoe.default)}(${n})`;t.fail$data((0,ef._)`${o} ${s} ${r}`)}};vC.default=Woe;var bC={};Object.defineProperty(bC,"__esModule",{value:!0});const Goe=ln,Db=fn,Koe={message:({schemaCode:t})=>(0,Db.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,Db._)`{pattern: ${t}}`},Yoe={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Koe,code(t){const{data:e,$data:n,schema:r,schemaCode:i,it:s}=t,o=s.opts.unicodeRegExp?"u":"",a=n?(0,Db._)`(new RegExp(${i}, ${o}))`:(0,Goe.usePattern)(t,r);t.fail$data((0,Db._)`!${a}.test(${e})`)}};bC.default=Yoe;var wC={};Object.defineProperty(wC,"__esModule",{value:!0});const xg=fn,Joe={message({keyword:t,schemaCode:e}){const n=t==="maxProperties"?"more":"fewer";return(0,xg.str)`must NOT have ${n} than ${e} properties`},params:({schemaCode:t})=>(0,xg._)`{limit: ${t}}`},Xoe={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Joe,code(t){const{keyword:e,data:n,schemaCode:r}=t,i=e==="maxProperties"?xg.operators.GT:xg.operators.LT;t.fail$data((0,xg._)`Object.keys(${n}).length ${i} ${r}`)}};wC.default=Xoe;var xC={};Object.defineProperty(xC,"__esModule",{value:!0});const Vp=ln,Sg=fn,Zoe=In,Qoe={message:({params:{missingProperty:t}})=>(0,Sg.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,Sg._)`{missingProperty: ${t}}`},eae={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Qoe,code(t){const{gen:e,schema:n,schemaCode:r,data:i,$data:s,it:o}=t,{opts:a}=o;if(!s&&n.length===0)return;const l=n.length>=a.loopRequired;if(o.allErrors?u():c(),a.strictRequired){const v=t.parentSchema.properties,{definedProperties:b}=t.it;for(const E of n)if((v==null?void 0:v[E])===void 0&&!b.has(E)){const P=o.schemaEnv.baseId+o.errSchemaPath,S=`required property "${E}" is not defined at "${P}" (strictRequired)`;(0,Zoe.checkStrictMode)(o,S,o.opts.strictRequired)}}function u(){if(l||s)t.block$data(Sg.nil,f);else for(const v of n)(0,Vp.checkReportMissingProp)(t,v)}function c(){const v=e.let("missing");if(l||s){const b=e.let("valid",!0);t.block$data(b,()=>p(v,b)),t.ok(b)}else e.if((0,Vp.checkMissingProp)(t,n,v)),(0,Vp.reportMissingProp)(t,v),e.else()}function f(){e.forOf("prop",r,v=>{t.setParams({missingProperty:v}),e.if((0,Vp.noPropertyInData)(e,i,v,a.ownProperties),()=>t.error())})}function p(v,b){t.setParams({missingProperty:v}),e.forOf(v,r,()=>{e.assign(b,(0,Vp.propertyInData)(e,i,v,a.ownProperties)),e.if((0,Sg.not)(b),()=>{t.error(),e.break()})},Sg.nil)}}};xC.default=eae;var SC={};Object.defineProperty(SC,"__esModule",{value:!0});const Eg=fn,tae={message({keyword:t,schemaCode:e}){const n=t==="maxItems"?"more":"fewer";return(0,Eg.str)`must NOT have ${n} than ${e} items`},params:({schemaCode:t})=>(0,Eg._)`{limit: ${t}}`},nae={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:tae,code(t){const{keyword:e,data:n,schemaCode:r}=t,i=e==="maxItems"?Eg.operators.GT:Eg.operators.LT;t.fail$data((0,Eg._)`${n}.length ${i} ${r}`)}};SC.default=nae;var EC={},Jm={};Object.defineProperty(Jm,"__esModule",{value:!0});const jV=oC;jV.code='require("ajv/dist/runtime/equal").default';Jm.default=jV;Object.defineProperty(EC,"__esModule",{value:!0});const IS=Gm,Si=fn,rae=In,iae=Jm,sae={message:({params:{i:t,j:e}})=>(0,Si.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,Si._)`{i: ${t}, j: ${e}}`},oae={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:sae,code(t){const{gen:e,data:n,$data:r,schema:i,parentSchema:s,schemaCode:o,it:a}=t;if(!r&&!i)return;const l=e.let("valid"),u=s.items?(0,IS.getSchemaTypes)(s.items):[];t.block$data(l,c,(0,Si._)`${o} === false`),t.ok(l);function c(){const b=e.let("i",(0,Si._)`${n}.length`),E=e.let("j");t.setParams({i:b,j:E}),e.assign(l,!0),e.if((0,Si._)`${b} > 1`,()=>(f()?p:v)(b,E))}function f(){return u.length>0&&!u.some(b=>b==="object"||b==="array")}function p(b,E){const P=e.name("item"),S=(0,IS.checkDataTypes)(u,P,a.opts.strictNumbers,IS.DataType.Wrong),A=e.const("indices",(0,Si._)`{}`);e.for((0,Si._)`;${b}--;`,()=>{e.let(P,(0,Si._)`${n}[${b}]`),e.if(S,(0,Si._)`continue`),u.length>1&&e.if((0,Si._)`typeof ${P} == "string"`,(0,Si._)`${P} += "_"`),e.if((0,Si._)`typeof ${A}[${P}] == "number"`,()=>{e.assign(E,(0,Si._)`${A}[${P}]`),t.error(),e.assign(l,!1).break()}).code((0,Si._)`${A}[${P}] = ${b}`)})}function v(b,E){const P=(0,rae.useFunc)(e,iae.default),S=e.name("outer");e.label(S).for((0,Si._)`;${b}--;`,()=>e.for((0,Si._)`${E} = ${b}; ${E}--;`,()=>e.if((0,Si._)`${P}(${n}[${b}], ${n}[${E}])`,()=>{t.error(),e.assign(l,!1).break(S)})))}}};EC.default=oae;var _C={};Object.defineProperty(_C,"__esModule",{value:!0});const U_=fn,aae=In,lae=Jm,uae={message:"must be equal to constant",params:({schemaCode:t})=>(0,U_._)`{allowedValue: ${t}}`},cae={keyword:"const",$data:!0,error:uae,code(t){const{gen:e,data:n,$data:r,schemaCode:i,schema:s}=t;r||s&&typeof s=="object"?t.fail$data((0,U_._)`!${(0,aae.useFunc)(e,lae.default)}(${n}, ${i})`):t.fail((0,U_._)`${s} !== ${n}`)}};_C.default=cae;var AC={};Object.defineProperty(AC,"__esModule",{value:!0});const tg=fn,fae=In,hae=Jm,dae={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,tg._)`{allowedValues: ${t}}`},pae={keyword:"enum",schemaType:"array",$data:!0,error:dae,code(t){const{gen:e,data:n,$data:r,schema:i,schemaCode:s,it:o}=t;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let l;const u=()=>l??(l=(0,fae.useFunc)(e,hae.default));let c;if(a||r)c=e.let("valid"),t.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const v=e.const("vSchema",s);c=(0,tg.or)(...i.map((b,E)=>p(v,E)))}t.pass(c);function f(){e.assign(c,!1),e.forOf("v",s,v=>e.if((0,tg._)`${u()}(${n}, ${v})`,()=>e.assign(c,!0).break()))}function p(v,b){const E=i[b];return typeof E=="object"&&E!==null?(0,tg._)`${u()}(${n}, ${v}[${b}])`:(0,tg._)`${n} === ${E}`}}};AC.default=pae;Object.defineProperty(pC,"__esModule",{value:!0});const gae=gC,mae=mC,vae=vC,yae=bC,bae=wC,wae=xC,xae=SC,Sae=EC,Eae=_C,_ae=AC,Aae=[gae.default,mae.default,vae.default,yae.default,bae.default,wae.default,xae.default,Sae.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},Eae.default,_ae.default];pC.default=Aae;var kC={},Gd={};Object.defineProperty(Gd,"__esModule",{value:!0});Gd.validateAdditionalItems=void 0;const tf=fn,q_=In,kae={message:({params:{len:t}})=>(0,tf.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,tf._)`{limit: ${t}}`},Cae={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:kae,code(t){const{parentSchema:e,it:n}=t,{items:r}=e;if(!Array.isArray(r)){(0,q_.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}zV(t,r)}};function zV(t,e){const{gen:n,schema:r,data:i,keyword:s,it:o}=t;o.items=!0;const a=n.const("len",(0,tf._)`${i}.length`);if(r===!1)t.setParams({len:e.length}),t.pass((0,tf._)`${a} <= ${e.length}`);else if(typeof r=="object"&&!(0,q_.alwaysValidSchema)(o,r)){const u=n.var("valid",(0,tf._)`${a} <= ${e.length}`);n.if((0,tf.not)(u),()=>l(u)),t.ok(u)}function l(u){n.forRange("i",e.length,a,c=>{t.subschema({keyword:s,dataProp:c,dataPropType:q_.Type.Num},u),o.allErrors||n.if((0,tf.not)(u),()=>n.break())})}}Gd.validateAdditionalItems=zV;Gd.default=Cae;var CC={},Kd={};Object.defineProperty(Kd,"__esModule",{value:!0});Kd.validateTuple=void 0;const pI=fn,Vy=In,Pae=ln,Oae={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){const{schema:e,it:n}=t;if(Array.isArray(e))return HV(t,"additionalItems",e);n.items=!0,!(0,Vy.alwaysValidSchema)(n,e)&&t.ok((0,Pae.validateArray)(t))}};function HV(t,e,n=t.schema){const{gen:r,parentSchema:i,data:s,keyword:o,it:a}=t;c(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=Vy.mergeEvaluated.items(r,n.length,a.items));const l=r.name("valid"),u=r.const("len",(0,pI._)`${s}.length`);n.forEach((f,p)=>{(0,Vy.alwaysValidSchema)(a,f)||(r.if((0,pI._)`${u} > ${p}`,()=>t.subschema({keyword:o,schemaProp:p,dataProp:p},l)),t.ok(l))});function c(f){const{opts:p,errSchemaPath:v}=a,b=n.length,E=b===f.minItems&&(b===f.maxItems||f[e]===!1);if(p.strictTuples&&!E){const P=`"${o}" is ${b}-tuple, but minItems or maxItems/${e} are not specified or different at path "${v}"`;(0,Vy.checkStrictMode)(a,P,p.strictTuples)}}}Kd.validateTuple=HV;Kd.default=Oae;Object.defineProperty(CC,"__esModule",{value:!0});const Tae=Kd,Mae={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,Tae.validateTuple)(t,"items")};CC.default=Mae;var PC={};Object.defineProperty(PC,"__esModule",{value:!0});const gI=fn,Nae=In,Iae=ln,$ae=Gd,Rae={message:({params:{len:t}})=>(0,gI.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,gI._)`{limit: ${t}}`},Lae={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Rae,code(t){const{schema:e,parentSchema:n,it:r}=t,{prefixItems:i}=n;r.items=!0,!(0,Nae.alwaysValidSchema)(r,e)&&(i?(0,$ae.validateAdditionalItems)(t,i):t.ok((0,Iae.validateArray)(t)))}};PC.default=Lae;var OC={};Object.defineProperty(OC,"__esModule",{value:!0});const $o=fn,U0=In,Dae={message:({params:{min:t,max:e}})=>e===void 0?(0,$o.str)`must contain at least ${t} valid item(s)`:(0,$o.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,$o._)`{minContains: ${t}}`:(0,$o._)`{minContains: ${t}, maxContains: ${e}}`},Fae={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Dae,code(t){const{gen:e,schema:n,parentSchema:r,data:i,it:s}=t;let o,a;const{minContains:l,maxContains:u}=r;s.opts.next?(o=l===void 0?1:l,a=u):o=1;const c=e.const("len",(0,$o._)`${i}.length`);if(t.setParams({min:o,max:a}),a===void 0&&o===0){(0,U0.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,U0.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,U0.alwaysValidSchema)(s,n)){let E=(0,$o._)`${c} >= ${o}`;a!==void 0&&(E=(0,$o._)`${E} && ${c} <= ${a}`),t.pass(E);return}s.items=!0;const f=e.name("valid");a===void 0&&o===1?v(f,()=>e.if(f,()=>e.break())):o===0?(e.let(f,!0),a!==void 0&&e.if((0,$o._)`${i}.length > 0`,p)):(e.let(f,!1),p()),t.result(f,()=>t.reset());function p(){const E=e.name("_valid"),P=e.let("count",0);v(E,()=>e.if(E,()=>b(P)))}function v(E,P){e.forRange("i",0,c,S=>{t.subschema({keyword:"contains",dataProp:S,dataPropType:U0.Type.Num,compositeRule:!0},E),P()})}function b(E){e.code((0,$o._)`${E}++`),a===void 0?e.if((0,$o._)`${E} >= ${o}`,()=>e.assign(f,!0).break()):(e.if((0,$o._)`${E} > ${a}`,()=>e.assign(f,!1).break()),o===1?e.assign(f,!0):e.if((0,$o._)`${E} >= ${o}`,()=>e.assign(f,!0)))}}};OC.default=Fae;var UV={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const e=fn,n=In,r=ln;t.error={message:({params:{property:l,depsCount:u,deps:c}})=>{const f=u===1?"property":"properties";return(0,e.str)`must have ${f} ${c} when property ${l} is present`},params:({params:{property:l,depsCount:u,deps:c,missingProperty:f}})=>(0,e._)`{property: ${l},
    missingProperty: ${f},
    depsCount: ${u},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(l){const[u,c]=s(l);o(l,u),a(l,c)}};function s({schema:l}){const u={},c={};for(const f in l){if(f==="__proto__")continue;const p=Array.isArray(l[f])?u:c;p[f]=l[f]}return[u,c]}function o(l,u=l.schema){const{gen:c,data:f,it:p}=l;if(Object.keys(u).length===0)return;const v=c.let("missing");for(const b in u){const E=u[b];if(E.length===0)continue;const P=(0,r.propertyInData)(c,f,b,p.opts.ownProperties);l.setParams({property:b,depsCount:E.length,deps:E.join(", ")}),p.allErrors?c.if(P,()=>{for(const S of E)(0,r.checkReportMissingProp)(l,S)}):(c.if((0,e._)`${P} && (${(0,r.checkMissingProp)(l,E,v)})`),(0,r.reportMissingProp)(l,v),c.else())}}t.validatePropertyDeps=o;function a(l,u=l.schema){const{gen:c,data:f,keyword:p,it:v}=l,b=c.name("valid");for(const E in u)(0,n.alwaysValidSchema)(v,u[E])||(c.if((0,r.propertyInData)(c,f,E,v.opts.ownProperties),()=>{const P=l.subschema({keyword:p,schemaProp:E},b);l.mergeValidEvaluated(P,b)},()=>c.var(b,!0)),l.ok(b))}t.validateSchemaDeps=a,t.default=i})(UV);var TC={};Object.defineProperty(TC,"__esModule",{value:!0});const qV=fn,Vae=In,Bae={message:"property name must be valid",params:({params:t})=>(0,qV._)`{propertyName: ${t.propertyName}}`},jae={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Bae,code(t){const{gen:e,schema:n,data:r,it:i}=t;if((0,Vae.alwaysValidSchema)(i,n))return;const s=e.name("valid");e.forIn("key",r,o=>{t.setParams({propertyName:o}),t.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),e.if((0,qV.not)(s),()=>{t.error(!0),i.allErrors||e.break()})}),t.ok(s)}};TC.default=jae;var rw={};Object.defineProperty(rw,"__esModule",{value:!0});const q0=ln,aa=fn,zae=hl,W0=In,Hae={message:"must NOT have additional properties",params:({params:t})=>(0,aa._)`{additionalProperty: ${t.additionalProperty}}`},Uae={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Hae,code(t){const{gen:e,schema:n,parentSchema:r,data:i,errsCount:s,it:o}=t;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:l}=o;if(o.props=!0,l.removeAdditional!=="all"&&(0,W0.alwaysValidSchema)(o,n))return;const u=(0,q0.allSchemaProperties)(r.properties),c=(0,q0.allSchemaProperties)(r.patternProperties);f(),t.ok((0,aa._)`${s} === ${zae.default.errors}`);function f(){e.forIn("key",i,P=>{!u.length&&!c.length?b(P):e.if(p(P),()=>b(P))})}function p(P){let S;if(u.length>8){const A=(0,W0.schemaRefOrVal)(o,r.properties,"properties");S=(0,q0.isOwnProperty)(e,A,P)}else u.length?S=(0,aa.or)(...u.map(A=>(0,aa._)`${P} === ${A}`)):S=aa.nil;return c.length&&(S=(0,aa.or)(S,...c.map(A=>(0,aa._)`${(0,q0.usePattern)(t,A)}.test(${P})`))),(0,aa.not)(S)}function v(P){e.code((0,aa._)`delete ${i}[${P}]`)}function b(P){if(l.removeAdditional==="all"||l.removeAdditional&&n===!1){v(P);return}if(n===!1){t.setParams({additionalProperty:P}),t.error(),a||e.break();return}if(typeof n=="object"&&!(0,W0.alwaysValidSchema)(o,n)){const S=e.name("valid");l.removeAdditional==="failing"?(E(P,S,!1),e.if((0,aa.not)(S),()=>{t.reset(),v(P)})):(E(P,S),a||e.if((0,aa.not)(S),()=>e.break()))}}function E(P,S,A){const I={keyword:"additionalProperties",dataProp:P,dataPropType:W0.Type.Str};A===!1&&Object.assign(I,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(I,S)}}};rw.default=Uae;var MC={};Object.defineProperty(MC,"__esModule",{value:!0});const qae=wa,mI=ln,$S=In,vI=rw,Wae={keyword:"properties",type:"object",schemaType:"object",code(t){const{gen:e,schema:n,parentSchema:r,data:i,it:s}=t;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&vI.default.code(new qae.KeywordCxt(s,vI.default,"additionalProperties"));const o=(0,mI.allSchemaProperties)(n);for(const f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=$S.mergeEvaluated.props(e,(0,$S.toHash)(o),s.props));const a=o.filter(f=>!(0,$S.alwaysValidSchema)(s,n[f]));if(a.length===0)return;const l=e.name("valid");for(const f of a)u(f)?c(f):(e.if((0,mI.propertyInData)(e,i,f,s.opts.ownProperties)),c(f),s.allErrors||e.else().var(l,!0),e.endIf()),t.it.definedProperties.add(f),t.ok(l);function u(f){return s.opts.useDefaults&&!s.compositeRule&&n[f].default!==void 0}function c(f){t.subschema({keyword:"properties",schemaProp:f,dataProp:f},l)}}};MC.default=Wae;var NC={};Object.defineProperty(NC,"__esModule",{value:!0});const yI=ln,G0=fn,bI=In,wI=In,Gae={keyword:"patternProperties",type:"object",schemaType:"object",code(t){const{gen:e,schema:n,data:r,parentSchema:i,it:s}=t,{opts:o}=s,a=(0,yI.allSchemaProperties)(n),l=a.filter(E=>(0,bI.alwaysValidSchema)(s,n[E]));if(a.length===0||l.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const u=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=e.name("valid");s.props!==!0&&!(s.props instanceof G0.Name)&&(s.props=(0,wI.evaluatedPropsToName)(e,s.props));const{props:f}=s;p();function p(){for(const E of a)u&&v(E),s.allErrors?b(E):(e.var(c,!0),b(E),e.if(c))}function v(E){for(const P in u)new RegExp(E).test(P)&&(0,bI.checkStrictMode)(s,`property ${P} matches pattern ${E} (use allowMatchingProperties)`)}function b(E){e.forIn("key",r,P=>{e.if((0,G0._)`${(0,yI.usePattern)(t,E)}.test(${P})`,()=>{const S=l.includes(E);S||t.subschema({keyword:"patternProperties",schemaProp:E,dataProp:P,dataPropType:wI.Type.Str},c),s.opts.unevaluated&&f!==!0?e.assign((0,G0._)`${f}[${P}]`,!0):!S&&!s.allErrors&&e.if((0,G0.not)(c),()=>e.break())})})}}};NC.default=Gae;var IC={};Object.defineProperty(IC,"__esModule",{value:!0});const Kae=In,Yae={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){const{gen:e,schema:n,it:r}=t;if((0,Kae.alwaysValidSchema)(r,n)){t.fail();return}const i=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),t.failResult(i,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};IC.default=Yae;var $C={};Object.defineProperty($C,"__esModule",{value:!0});const Jae=ln,Xae={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Jae.validateUnion,error:{message:"must match a schema in anyOf"}};$C.default=Xae;var RC={};Object.defineProperty(RC,"__esModule",{value:!0});const By=fn,Zae=In,Qae={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,By._)`{passingSchemas: ${t.passing}}`},ele={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Qae,code(t){const{gen:e,schema:n,parentSchema:r,it:i}=t;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const s=n,o=e.let("valid",!1),a=e.let("passing",null),l=e.name("_valid");t.setParams({passing:a}),e.block(u),t.result(o,()=>t.reset(),()=>t.error(!0));function u(){s.forEach((c,f)=>{let p;(0,Zae.alwaysValidSchema)(i,c)?e.var(l,!0):p=t.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},l),f>0&&e.if((0,By._)`${l} && ${o}`).assign(o,!1).assign(a,(0,By._)`[${a}, ${f}]`).else(),e.if(l,()=>{e.assign(o,!0),e.assign(a,f),p&&t.mergeEvaluated(p,By.Name)})})}}};RC.default=ele;var LC={};Object.defineProperty(LC,"__esModule",{value:!0});const tle=In,nle={keyword:"allOf",schemaType:"array",code(t){const{gen:e,schema:n,it:r}=t;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=e.name("valid");n.forEach((s,o)=>{if((0,tle.alwaysValidSchema)(r,s))return;const a=t.subschema({keyword:"allOf",schemaProp:o},i);t.ok(i),t.mergeEvaluated(a)})}};LC.default=nle;var DC={};Object.defineProperty(DC,"__esModule",{value:!0});const Fb=fn,WV=In,rle={message:({params:t})=>(0,Fb.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,Fb._)`{failingKeyword: ${t.ifClause}}`},ile={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:rle,code(t){const{gen:e,parentSchema:n,it:r}=t;n.then===void 0&&n.else===void 0&&(0,WV.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=xI(r,"then"),s=xI(r,"else");if(!i&&!s)return;const o=e.let("valid",!0),a=e.name("_valid");if(l(),t.reset(),i&&s){const c=e.let("ifClause");t.setParams({ifClause:c}),e.if(a,u("then",c),u("else",c))}else i?e.if(a,u("then")):e.if((0,Fb.not)(a),u("else"));t.pass(o,()=>t.error(!0));function l(){const c=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);t.mergeEvaluated(c)}function u(c,f){return()=>{const p=t.subschema({keyword:c},a);e.assign(o,a),t.mergeValidEvaluated(p,o),f?e.assign(f,(0,Fb._)`${c}`):t.setParams({ifClause:c})}}}};function xI(t,e){const n=t.schema[e];return n!==void 0&&!(0,WV.alwaysValidSchema)(t,n)}DC.default=ile;var FC={};Object.defineProperty(FC,"__esModule",{value:!0});const sle=In,ole={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:n}){e.if===void 0&&(0,sle.checkStrictMode)(n,`"${t}" without "if" is ignored`)}};FC.default=ole;Object.defineProperty(kC,"__esModule",{value:!0});const ale=Gd,lle=CC,ule=Kd,cle=PC,fle=OC,hle=UV,dle=TC,ple=rw,gle=MC,mle=NC,vle=IC,yle=$C,ble=RC,wle=LC,xle=DC,Sle=FC;function Ele(t=!1){const e=[vle.default,yle.default,ble.default,wle.default,xle.default,Sle.default,dle.default,ple.default,hle.default,gle.default,mle.default];return t?e.push(lle.default,cle.default):e.push(ale.default,ule.default),e.push(fle.default),e}kC.default=Ele;var VC={},BC={};Object.defineProperty(BC,"__esModule",{value:!0});const jr=fn,_le={message:({schemaCode:t})=>(0,jr.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,jr._)`{format: ${t}}`},Ale={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:_le,code(t,e){const{gen:n,data:r,$data:i,schema:s,schemaCode:o,it:a}=t,{opts:l,errSchemaPath:u,schemaEnv:c,self:f}=a;if(!l.validateFormats)return;i?p():v();function p(){const b=n.scopeValue("formats",{ref:f.formats,code:l.code.formats}),E=n.const("fDef",(0,jr._)`${b}[${o}]`),P=n.let("fType"),S=n.let("format");n.if((0,jr._)`typeof ${E} == "object" && !(${E} instanceof RegExp)`,()=>n.assign(P,(0,jr._)`${E}.type || "string"`).assign(S,(0,jr._)`${E}.validate`),()=>n.assign(P,(0,jr._)`"string"`).assign(S,E)),t.fail$data((0,jr.or)(A(),I()));function A(){return l.strictSchema===!1?jr.nil:(0,jr._)`${o} && !${S}`}function I(){const N=c.$async?(0,jr._)`(${E}.async ? await ${S}(${r}) : ${S}(${r}))`:(0,jr._)`${S}(${r})`,x=(0,jr._)`(typeof ${S} == "function" ? ${N} : ${S}.test(${r}))`;return(0,jr._)`${S} && ${S} !== true && ${P} === ${e} && !${x}`}}function v(){const b=f.formats[s];if(!b){A();return}if(b===!0)return;const[E,P,S]=I(b);E===e&&t.pass(N());function A(){if(l.strictSchema===!1){f.logger.warn(x());return}throw new Error(x());function x(){return`unknown format "${s}" ignored in schema at path "${u}"`}}function I(x){const g=x instanceof RegExp?(0,jr.regexpCode)(x):l.code.formats?(0,jr._)`${l.code.formats}${(0,jr.getProperty)(s)}`:void 0,_=n.scopeValue("formats",{key:s,ref:x,code:g});return typeof x=="object"&&!(x instanceof RegExp)?[x.type||"string",x.validate,(0,jr._)`${_}.validate`]:["string",x,_]}function N(){if(typeof b=="object"&&!(b instanceof RegExp)&&b.async){if(!c.$async)throw new Error("async format in sync schema");return(0,jr._)`await ${S}(${r})`}return typeof P=="function"?(0,jr._)`${S}(${r})`:(0,jr._)`${S}.test(${r})`}}}};BC.default=Ale;Object.defineProperty(VC,"__esModule",{value:!0});const kle=BC,Cle=[kle.default];VC.default=Cle;var Td={};Object.defineProperty(Td,"__esModule",{value:!0});Td.contentVocabulary=Td.metadataVocabulary=void 0;Td.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Td.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(fC,"__esModule",{value:!0});const Ple=hC,Ole=pC,Tle=kC,Mle=VC,SI=Td,Nle=[Ple.default,Ole.default,(0,Tle.default)(),Mle.default,SI.metadataVocabulary,SI.contentVocabulary];fC.default=Nle;var jC={},GV={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DiscrError=void 0,function(e){e.Tag="tag",e.Mapping="mapping"}(t.DiscrError||(t.DiscrError={}))})(GV);Object.defineProperty(jC,"__esModule",{value:!0});const $h=fn,W_=GV,EI=Fs,Ile=In,$le={message:({params:{discrError:t,tagName:e}})=>t===W_.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:n}})=>(0,$h._)`{error: ${t}, tag: ${n}, tagValue: ${e}}`},Rle={keyword:"discriminator",type:"object",schemaType:"object",error:$le,code(t){const{gen:e,data:n,schema:r,parentSchema:i,it:s}=t,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const l=e.let("valid",!1),u=e.const("tag",(0,$h._)`${n}${(0,$h.getProperty)(a)}`);e.if((0,$h._)`typeof ${u} == "string"`,()=>c(),()=>t.error(!1,{discrError:W_.DiscrError.Tag,tag:u,tagName:a})),t.ok(l);function c(){const v=p();e.if(!1);for(const b in v)e.elseIf((0,$h._)`${u} === ${b}`),e.assign(l,f(v[b]));e.else(),t.error(!1,{discrError:W_.DiscrError.Mapping,tag:u,tagName:a}),e.endIf()}function f(v){const b=e.name("valid"),E=t.subschema({keyword:"oneOf",schemaProp:v},b);return t.mergeEvaluated(E,$h.Name),b}function p(){var v;const b={},E=S(i);let P=!0;for(let N=0;N<o.length;N++){let x=o[N];x!=null&&x.$ref&&!(0,Ile.schemaHasRulesButRef)(x,s.self.RULES)&&(x=EI.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,x==null?void 0:x.$ref),x instanceof EI.SchemaEnv&&(x=x.schema));const g=(v=x==null?void 0:x.properties)===null||v===void 0?void 0:v[a];if(typeof g!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);P=P&&(E||S(x)),A(g,N)}if(!P)throw new Error(`discriminator: "${a}" must be required`);return b;function S({required:N}){return Array.isArray(N)&&N.includes(a)}function A(N,x){if(N.const)I(N.const,x);else if(N.enum)for(const g of N.enum)I(g,x);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function I(N,x){if(typeof N!="string"||N in b)throw new Error(`discriminator: "${a}" values must be unique strings`);b[N]=x}}}};jC.default=Rle;const Lle="http://json-schema.org/draft-07/schema#",Dle="http://json-schema.org/draft-07/schema#",Fle="Core schema meta-schema",Vle={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Ble=["object","boolean"],jle={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},zle={$schema:Lle,$id:Dle,title:Fle,definitions:Vle,type:Ble,properties:jle,default:!0};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MissingRefError=e.ValidationError=e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;const n=dV,r=fC,i=jC,s=zle,o=["/properties"],a="http://json-schema.org/draft-07/schema";class l extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(b=>this.addVocabulary(b)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const b=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(b,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.exports=e=l,Object.defineProperty(e,"__esModule",{value:!0}),e.default=l;var u=wa;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return u.KeywordCxt}});var c=fn;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=Km;Object.defineProperty(e,"ValidationError",{enumerable:!0,get:function(){return f.default}});var p=Ym;Object.defineProperty(e,"MissingRefError",{enumerable:!0,get:function(){return p.default}})})(B_,B_.exports);var Hle=B_.exports;const Ule=ka(Hle);function Sf(t,e){return hc.get(t,e)}function KV(t,e){return hc.has(t,e)}function K0(t){return t==="/"||t===""?0:hc.parse(t).length}function _I(t){return t==="/"||t===""?"":hc.compile([hc.parse(t)[0]])}function Vb(t){if(t==="/"||t==="")return"";const e=hc.parse(t);return e.length>1?(e.pop(),hc.compile(e)):""}function Bb(t){const e=/\["|\.|\[/g,n=/"\]|\]/g;return t.replace(e,"/").replace(n,"")}function nm(t){if(t==="/"||t==="")return"";const e=hc.parse(t).pop();return e||""}function qle(t,e){return t.sort((n,r)=>{if(n===r)return 0;if(K0(n)>K0(r))return 1;if(K0(n)<K0(r))return-1;{const i=Vb(n),s=Vb(r);if(i!==s)return 0;{const o=Sf(e,i);if(Array.isArray(o)){const a=Number(nm(r));return Number(nm(n))<a?-1:1}else return 0}}})}class AI{constructor(e,n,r,i){Rn(this,"id");Rn(this,"type");Rn(this,"place");Rn(this,"transition");Rn(this,"_filterExpression");Rn(this,"pathExpressions");Rn(this,"assignedPathExpression");Rn(this,"keyVarValue");Rn(this,"valueVarValue");Rn(this,"tokenVarValue");Rn(this,"_tokenVarName");Rn(this,"_valueVarName");Rn(this,"_keyVarName");this.id=i,this.type=r,this.place=e,this.transition=n,this._tokenVarName="",this._valueVarName="",this._keyVarName="",this.updateVarNames(this.place.name,!0),this._filterExpression="$.*",r==="postset"&&(this._filterExpression="$"),this.assignedPathExpression=null,this.keyVarValue="",this.valueVarValue="",this.tokenVarValue={},this.pathExpressions=this.applyFilterExpression(this._filterExpression)}updateVarNames(e,n=!1){const r=this.camelize(e);let i;this.type==="preset"?i="input_":i="output_";const s={token:this._tokenVarName,key:this._keyVarName,value:this._valueVarName};this._tokenVarName=i+r+"_token",this._valueVarName=i+r+"_value",this._keyVarName=i+r+"_key";const o={token:this._tokenVarName,key:this._keyVarName,value:this._valueVarName};n||this.transition.updateSnippets(s,o)}camelize(e){const n=e.replace(/\W+(.)/g,function(i,s){return s.toUpperCase()});return n.charAt(0).toLowerCase()+n.slice(1)}get tokenVarName(){return this._tokenVarName}get valueVarName(){return this._valueVarName}get keyVarName(){return this._keyVarName}applyFilterExpression(e){const n=this.place.marking,r=Kie(n,e);return this.pathExpressions=r,r}assignVariablesByIndex(e){const n=this.pathExpressions[e];return this.assignVariablesByPathExpression(n)}assignTokenVariableByIndex(e){const n=this.pathExpressions[e];return this.assignTokenVariableByPathExpression(n)}assignVariablesByPathExpression(e){const n=this.place.marking;this.assignedPathExpression=e,this.keyVarValue=nm(e),this.valueVarValue=Sf(n,e);const r=_I(e);return this.tokenVarValue=Sf(n,r),{key:this.keyVarValue,value:this.valueVarValue,token:this.tokenVarValue}}assignTokenVariableByPathExpression(e){const n=this.place.marking;this.assignedPathExpression=e;const r=_I(e);return this.tokenVarValue=Sf(n,r),{token:this.tokenVarValue}}assignKeyAndValueVariables(e,n){this.keyVarValue=e,this.valueVarValue=n}resetAssignment(){this.assignedPathExpression=null,this.keyVarValue="",this.valueVarValue="",this.tokenVarValue={}}set filterExpression(e){this._filterExpression=e,this.resetAssignment()}get filterExpression(){return this._filterExpression}}function Wle(t,e){if(!Array.isArray(e)&&!(typeof e=="object"&&e!==null))throw Error("should be object or array");if(Array.isArray(e)){if(e.length===0)return e;let n;if(typeof t=="string"){if(n=parseInt(t),isNaN(n))return e.pop(),e}else n=t;return n>=e.length||n<0?(e.pop(),e):(e.splice(n,1),e)}else return delete e[t],e}function Gle(t,e,n){if(!Array.isArray(e)&&!(typeof e=="object"&&e!==null))return n;if(Array.isArray(e)){if(e.length===0)return e.push(n),e;let r;if(typeof t=="string"){if(r=parseInt(t),isNaN(r))return e.push(n),e}else r=t;return r>=e.length||r<0?(e.push(n),e):(e.splice(r,0,n),e)}else return e[t]=n,e}function Y0(t,e){if(!KV(e,t))throw Error("value not valid for path expression");const n=Vb(t),r=nm(t),i=Sf(e,n);return Wle(r,i),e}function J0(t,e,n,r){if(!KV(e,t))throw Error("value not valid for path expression");const i=Sf(e,t);if(Kle(i))return Gle(n,i,r),e;{const s=Vb(t),o=nm(t),a=Sf(e,s);return a[o]=r,e}}function Kle(t){return Array.isArray(t)?!0:typeof t=="object"&&t!==null}const rm=new Ule({validateSchema:!1});function kI(t){return rm.compile(t)}function Yle(t,e){return{isValid:e(t),error:rm.errorsText(e.errors)}}function YV(t){rm.removeSchema(t)}function Jle(t){let e;try{e=rm.validateSchema(JSON.parse(t))}catch(n){return{schemaValid:!1,error:n.message}}if(e)return{schemaValid:e};try{return rm.compile(JSON.parse(t)),{schemaValid:e}}catch(n){return{schemaValid:e,error:n.message}}}class Xle{constructor(e,n){Rn(this,"ref");Rn(this,"_schema");Rn(this,"validator");this.ref=e,this._schema=n,this.schema.$id=e,this.validator=kI(n)}update(e){YV(this.ref),this._schema=e,this.schema.$id=this.ref,this.validator=kI(e)}validateMarking(e){return Yle(e,this.validator)}get schema(){return this._schema}}let X0=class{constructor(e,n){Rn(this,"id");Rn(this,"_name");Rn(this,"_schema");Rn(this,"marking");this.id=e,this._name=n,this._schema=new Xle(e,{$id:e,type:"array",items:{type:"object"}}),this.marking=[]}set name(e){this._name=e}get name(){return this._name}set schema(e){const n={$id:this.id,type:"array",items:e};this._schema.update(n)}get schema(){return this._schema.schema}validateSchema(e){return Jle(JSON.stringify(e))}validateToken(e){return this._schema.validateMarking([e])}validateMarking(e){return this._schema.validateMarking(e)}insertValue(e,n,r,i=!1){if(i){const s=JSON.parse(JSON.stringify(this.marking)),o=J0(e,s,r,n);return this._schema.validateMarking(o)}else return J0(e,this.marking,r,n),!0}removeValue(e,n=!1){if(n){const r=JSON.parse(JSON.stringify(this.marking)),i=Y0(e,r);return this._schema.validateMarking(i)}else return Y0(e,this.marking),!0}batchOperation(e,n=!1){if(n){const r=JSON.parse(JSON.stringify(this.marking));for(let i=0;i<e.length;i++){const s=e[i];s.type==="insert"?J0(s.pathExpression,r,s.key,s.fragment):s.type==="remove"&&Y0(s.pathExpression,r)}return this._schema.validateMarking(r)}else for(let r=0;r<e.length;r++){const i=e[r];i.type==="insert"?J0(i.pathExpression,this.marking,i.key,i.fragment):i.type==="remove"&&Y0(i.pathExpression,this.marking)}}};function Zle(t){if(!t)return[];if(!Array.isArray(t))return[];if(t.length==0)return[];for(let i=0;i<t.length;i++)if(!Array.isArray(t[i])||t[i].length==0)return[];const e=new Array(t.length);e.fill(0);const n=[];let r=CI(e,t);for(n.push(r);Qle(e,t);)r=CI(e,t),n.push(r);return n}function CI(t,e){const n=[];for(let r=0;r<t.length;r++)n.push(e[r][t[r]]);return n}function Qle(t,e){for(let n=t.length-1;n>=0;n--){const r=e[n].length-1;if(t[n]+1<=r)return t[n]++,!0;if(n-1<0)return!1;t[n]=0}}function eue(t){let e="";for(const[n,r]of Object.entries(t))e+=`local ${n} = ${JSON.stringify(r)}; 
`;return e}function od(t,e={},n=""){t=eue(e)+t;try{const i=jsonnet.EvaluateSnippet(n,t);if(i[1].$val)throw new Error(i[1].s);return{evaluation:i[0],hasError:!1}}catch(i){return{evaluation:i,hasError:!0}}}let Z0=class{constructor(e,n){Rn(this,"id");Rn(this,"name");Rn(this,"preset");Rn(this,"postset");Rn(this,"guard");Rn(this,"preface");Rn(this,"valueVarSnippets");Rn(this,"keyVarSnippets");this.id=e,this.name=n,this.preset=[],this.postset=[],this.guard="true",this.preface="",this.valueVarSnippets={},this.keyVarSnippets={}}connectArc(e){e.type==="preset"?this.preset.push(e):e.type==="postset"&&(this.valueVarSnippets[e.valueVarName]||(this.valueVarSnippets[e.valueVarName]="local "+e.valueVarName+" = {};"),this.keyVarSnippets[e.keyVarName]||(this.keyVarSnippets[e.keyVarName]="local "+e.keyVarName+" = '-';"),this.postset.push(e))}updateSnippets(e,n){let r=this.guard;r=r.replace(e.value,n.value),r=r.replace(e.key,n.key),r=r.replace(e.token,n.token),this.guard=r;let i=this.preface;if(i=i.replace(e.value,n.value),i=i.replace(e.key,n.key),i=i.replace(e.token,n.token),this.preface=i,this.valueVarSnippets[e.value]){let s=this.valueVarSnippets[e.value];s=s.replace(e.value,n.value),s=s.replace(e.key,n.key),s=s.replace(e.token,n.token),delete this.valueVarSnippets[e.value],this.valueVarSnippets[n.value]=s}if(this.keyVarSnippets[e.key]){let s=this.keyVarSnippets[e.key];s=s.replace(e.value,n.value),s=s.replace(e.key,n.key),s=s.replace(e.token,n.token),delete this.keyVarSnippets[e.key],this.keyVarSnippets[n.key]=s}}disconnectArc(e){e.type==="preset"?this.preset=this.preset.filter(n=>n.id!==e.id):e.type==="postset"&&(this.postset=this.postset.filter(n=>n.id!==e.id?(delete this.valueVarSnippets[e.valueVarName],delete this.keyVarSnippets[e.keyVarName],!0):!1))}resetAssignments(){for(let e=0;e<this.preset.length;e++)this.preset[e].resetAssignment();for(let e=0;e<this.postset.length;e++)this.postset[e].resetAssignment()}fire(){const e=[];for(let n=0;n<this.preset.length;n++){const r=this.preset[n];if(r.assignedPathExpression===null)return[];r.place.removeValue(r.assignedPathExpression,!1),e.push({arcID:r.id,placeID:r.place.id,num:r.place.marking.length})}for(let n=0;n<this.postset.length;n++){const r=this.postset[n];if(r.assignedPathExpression===null)return[];r.place.insertValue(r.assignedPathExpression,r.valueVarValue,r.keyVarValue,!1),e.push({arcID:r.id,placeID:r.place.id,num:r.place.marking.length})}return e}hasCompletePresetAssignment(){const e=this.preset;for(let n=0;n<e.length;n++)if(e[n].assignedPathExpression===null)return!1;return!0}hasCompletePostsetAssignment(){const e=this.postset;for(let n=0;n<e.length;n++)if(e[n].assignedPathExpression===null)return!1;return!0}hasCompleteAssignment(){const e=this.preset.concat(this.postset);for(let n=0;n<e.length;n++)if(e[n].assignedPathExpression===null)return!1;return!0}hasAnyCompleteAssignment(){const e=this.preset.concat(this.postset);for(let n=0;n<e.length;n++){const r=e[n];if(r.applyFilterExpression(r.filterExpression).length===0)return!1}return!0}assignOutputKeyValueVariables(e){for(let n=0;n<this.postset.length;n++){const r=this.postset[n];let i=this.preface;i+=this.valueVarSnippets[r.valueVarName]+r.valueVarName;const s=od(i,e,this.name);if(s.hasError)return!1;const o=JSON.parse(s.evaluation);e[r.valueVarName]=o;let a=this.preface;a+=this.keyVarSnippets[r.keyVarName]+r.keyVarName;const l=od(a,e,this.name);if(l.hasError)return!1;const u=String(JSON.parse(l.evaluation));e[r.keyVarName]=u,r.assignKeyAndValueVariables(u,o)}return e}evaluateGuard(e){let n=this.preface;return n+=this.guard,od(n,e,this.name)}checkResultingMarkings(){const e=[];for(let n=0;n<this.preset.length;n++){const r=this.preset[n];let i=!1,s=null;for(let o=0;o<this.postset.length;o++){const a=this.postset[o];a.place.id===r.place.id&&(e.push(a.id),i=!0,s=a)}if(i&&s){let o=[];if(r.assignedPathExpression===null||(o.push(r.assignedPathExpression),s.assignedPathExpression===null))return!1;o.push(s.assignedPathExpression),o=qle(o,r.place.marking);const a={pathExpression:r.assignedPathExpression,type:"remove"},l={fragment:s.valueVarValue,key:s.keyVarValue,pathExpression:s.assignedPathExpression,type:"insert"},u=[];if(o[0]===r.assignedPathExpression?(u.push(l),u.push(a)):(u.push(a),u.push(l)),!r.place.batchOperation(u,!0))return!1}else if(r.assignedPathExpression===null||!r.place.removeValue(r.assignedPathExpression,!0))return!1}for(let n=0;n<this.postset.length;n++){const r=this.postset[n];if(e.includes(r.id))continue;if(r.assignedPathExpression===null||!r.place.insertValue(r.assignedPathExpression,r.valueVarValue,r.keyVarValue,!0))return!1}return!0}assembleVariablesFromPathAssignments(){const e={};for(let n=0;n<this.preset.length;n++){const r=this.preset[n];r.assignedPathExpression!==null&&(e[r.tokenVarName]=r.tokenVarValue,e[r.keyVarName]=r.keyVarValue,e[r.valueVarName]=r.valueVarValue)}for(let n=0;n<this.postset.length;n++){const r=this.postset[n];r.assignedPathExpression!==null&&(e[r.tokenVarName]=r.tokenVarValue)}return e}findAssignment(){this.resetAssignments();const e=[],n=this.preset.concat(this.postset);for(let i=0;i<n.length;i++){const s=[],o=n[i],a=o.applyFilterExpression(o.filterExpression);if(a.length===0)return!1;for(let l=0;l<a.length;l++)s.push({arc:o,assignmentIndex:l});e.push(s)}const r=Zle(e);for(let i=0;i<r.length;i++){const s=r[i],o={},a={},l={};let u=!1;for(let b=0;b<s.length;b++){const E=s[b],P=E.arc;if(P.type==="preset"){const S=P.assignVariablesByIndex(E.assignmentIndex);S||(u=!0),l[P.tokenVarName]=S.token,o[P.keyVarName]=S.key,a[P.valueVarName]=S.value}else{const S=P.assignTokenVariableByIndex(E.assignmentIndex);S||(u=!0),l[P.tokenVarName]=S.token}}if(u)continue;const c=this.assignOutputKeyValueVariables({...o,...a,...l});if(!c)continue;const f=this.evaluateGuard(c);if(f.hasError||JSON.parse(f.evaluation)!==!0)continue;if(this.checkResultingMarkings())return!0}return!1}},Q0;const tue=new Uint8Array(16);function nue(){if(!Q0&&(Q0=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Q0))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Q0(tue)}const xi=[];for(let t=0;t<256;++t)xi.push((t+256).toString(16).slice(1));function rue(t,e=0){return(xi[t[e+0]]+xi[t[e+1]]+xi[t[e+2]]+xi[t[e+3]]+"-"+xi[t[e+4]]+xi[t[e+5]]+"-"+xi[t[e+6]]+xi[t[e+7]]+"-"+xi[t[e+8]]+xi[t[e+9]]+"-"+xi[t[e+10]]+xi[t[e+11]]+xi[t[e+12]]+xi[t[e+13]]+xi[t[e+14]]+xi[t[e+15]]).toLowerCase()}const iue=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),PI={randomUUID:iue};function RS(t,e,n){if(PI.randomUUID&&!e&&!t)return PI.randomUUID();t=t||{};const r=t.random||(t.rng||nue)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let i=0;i<16;++i)e[n+i]=r[i];return e}return rue(r)}let LS=null;function wn(){return LS===null&&(LS=new sue),LS}class sue{constructor(){Rn(this,"_transitions");Rn(this,"_places");Rn(this,"_arcs");this._transitions=[],this._places=[],this._arcs=[]}findPlace(e){return this._places.find(n=>n.id===e)}removePlace(e){const n=[];return this._places=this._places.filter(i=>i.id!==e),n.push(e),this._arcs.filter(i=>i.place.id===e).forEach(i=>{this.disconnect(i.id),n.push(i.id)}),n}updatePlace(e,n,r,i){const s=this.findPlace(e);if(!s)return!1;if(n!==s.name){s.name=n;const o=this._arcs.filter(a=>a.place.id===e);for(let a=0;a<o.length;a++)o[a].updateVarNames(n)}return r&&(s.schema=r),i&&(s.marking=i),{id:s.id,name:s.name,marking:s.marking,schema:s.schema,hasError:!1,errorType:"none",errorMessage:""}}updatePlaceMarking(e,n){const r=this.findPlace(e);if(!r)return!1;r.marking=n;const i=r.validateMarking(n);return{id:r.id,name:r.name,marking:r.marking,schema:r.schema,hasError:!i.isValid,errorType:"data",errorMessage:i.error}}updatePlaceSchema(e,n){const r=this.findPlace(e);if(!r)return!1;const i=r.validateSchema(n);return i.schemaValid&&(r.schema=n),{id:r.id,name:r.name,marking:r.marking,schema:r.schema,hasError:!i.schemaValid,errorType:"schema",errorMessage:i.error}}validatePlaceName(e,n){return!(this._places.filter(i=>i.name===e&&i.id!==n).length>0)}addTransition(e=RS()){const n=new Z0(e,"transition");return this._transitions.push(n),{id:n.id,name:n.name,preface:n.preface,guard:n.guard}}addPlace(e=RS()){const r="place"+e.substring(0,4),i=new X0(e,r);return this._places.push(i),{id:i.id,name:i.name,marking:i.marking,schema:i.schema,hasError:!1,errorType:"none",errorMessage:""}}updateTransition(e,n,r,i,s,o){const a=this.findTransition(e);return a?(a.name=n,i!==void 0&&(a.guard=i),r!==void 0&&(a.preface=r),o!==void 0&&(a.keyVarSnippets=o),s!==void 0&&(a.valueVarSnippets=s),{id:a.id,name:a.name,preface:a.preface,guard:a.guard}):!1}updateTransitionSnippets(e,n,r,i){const s=this.findTransition(e),o=this.findArc(n);!s||!o||(s.keyVarSnippets[o.keyVarName]=r,s.valueVarSnippets[o.valueVarName]=i)}findTransition(e){return this._transitions.find(n=>n.id===e)}assignFilterByPath(e,n){const r=this.findArc(e);if(!r)return!1;r.type==="preset"?r.assignVariablesByPathExpression(n):r.type==="postset"&&r.assignTokenVariableByPathExpression(n);const i=r.transition.hasCompleteAssignment(),s=r.transition.hasCompletePresetAssignment(),o=r.transition.hasCompletePostsetAssignment();return{complete:i,presetComplete:s,postsetComplete:o}}removeTransition(e){const n=[];let r=this.findTransition(e);const i=this._transitions.filter(s=>s.id===e?(r=s,!1):!0);return r?(n.push(r.id),r.preset.forEach(s=>{this.disconnect(s.id),n.push(s.id)}),r.postset.forEach(s=>{this.disconnect(s.id),n.push(s.id)}),this._transitions=i,n):[]}connect(e,n,r=RS()){const i=[...this._places,...this._transitions],s=i.find(l=>l.id===e),o=i.find(l=>l.id===n);let a;return s instanceof X0?o instanceof X0||o instanceof Z0&&(a=new AI(s,o,"preset",r),this._arcs.push(a),o.connectArc(a)):s instanceof Z0&&(o instanceof Z0||o instanceof X0&&(a=new AI(o,s,"postset",r),this._arcs.push(a),s.connectArc(a))),a&&s&&o?{id:a.id,type:a.type,from:s.id,to:o.id}:!1}disconnect(e){const n=this.findArc(e);n&&(n.transition.disconnectArc(n),this._arcs=this._arcs.filter(r=>r.id!==e))}findArc(e){return this._arcs.find(n=>n.id===e)}updateArc(e,n){const r=this._arcs.find(o=>o.id===e);if(!r)return!1;r.filterExpression=n;let i,s="";return r.type==="preset"?(i=r.place.id,s=r.transition.id):(i=r.transition.id,s=r.place.id),{from:i,to:s,id:r.id,type:r.type}}fireUnderCurrentAssignment(e){const n=this.findTransition(e);return n?n.fire():[]}fireUnderAnyAssignment(e){const n=this.findTransition(e);return n?n.findAssignment()?n.fire():[]:[]}fireAny(){for(let e=0;e<this._transitions.length;e++){let n=this._transitions[e];if(n.findAssignment())return n.fire()}return[]}export(){const e=[],n=[],r=[];for(let s=0;s<this._places.length;s++){let o=this._places[s];e.push({id:o.id,name:o.name,marking:o.marking,schema:o.schema.items})}for(let s=0;s<this._transitions.length;s++){let o=this._transitions[s];n.push({id:o.id,name:o.name,preface:o.preface,guard:o.guard,keyVarSnippets:o.keyVarSnippets,fragmentVarSnippets:o.valueVarSnippets})}for(let s=0;s<this._arcs.length;s++){let o=this._arcs[s],a,l;o.type==="preset"?(a=o.place.id,l=o.transition.id):o.type==="postset"&&(a=o.transition.id,l=o.place.id),r.push({id:o.id,filter:o.filterExpression,fromId:a,toId:l})}return{places:e,transitions:n,arcs:r}}assignOutputVariables(e){const n=this.findTransition(e);if(n)for(let r=0;r<n.postset.length;r++){const i=n.postset[r],s=n.assembleVariablesFromPathAssignments(),o=n.assignOutputKeyValueVariables(s);o&&i.assignKeyAndValueVariables(String(o[i.keyVarName]),o[i.valueVarName])}}clear(){for(;this._transitions.length>0;)this.removeTransition(this._transitions[0].id);for(;this._places.length>0;)YV(this._places[0].id),this.removePlace(this._places[0].id)}import(e){this.clear();const n={places:[],transitions:[],arcs:[]};for(let r=0;r<e.places.length;r++){let i=e.places[r];this.addPlace(i.id);const s=this.updatePlace(i.id,i.name,i.schema,i.marking);s&&n.places.push(s)}for(let r=0;r<e.transitions.length;r++){let i=e.transitions[r];this.addTransition(i.id);const s=this.updateTransition(i.id,i.name,i.preface,i.guard,i.fragmentVarSnippets,i.keyVarSnippets);s&&n.transitions.push(s)}for(let r=0;r<e.arcs.length;r++){let i=e.arcs[r];this.connect(i.fromId,i.toId,i.id);const s=this.updateArc(i.id,i.filter);s&&n.arcs.push(s)}return n}getEvaluations(e){const n=this.findTransition(e);if(!n)return!1;const r=n.assembleVariablesFromPathAssignments();let i=!1,s=!1;const o=od(n.preface+" true",r);if(o.hasError)return i=!0,{hasAnyError:i,preface:o,variables:r};const a=Object.keys(n.valueVarSnippets),l={};for(let v=0;v<a.length;v++){const b=a[v];let E=n.preface;E+=n.valueVarSnippets[b]+b;const P=od(E,r);l[b]=P,P.hasError&&(i=!0,s=!0)}const u=Object.keys(n.keyVarSnippets),c={};for(let v=0;v<u.length;v++){const b=u[v];let E=n.preface;E+=n.keyVarSnippets[b]+b;const P=od(E,r);c[b]=P,P.hasError&&(i=!0,s=!0)}if(s)return{hasAnyError:i,variables:r,hasAnyOutputError:s,preface:o,outputKeyVariables:c,outputValueVariables:l};const f=n.assignOutputKeyValueVariables(r);if(!f)return{hasAnyOutputError:s,hasAnyError:i,variables:r,preface:o,outputValueVariables:l,outputKeyVariables:c,guard:{evaluation:"Output expressions have errors.",hasError:!0}};const p=n.evaluateGuard(f);return p.hasError&&(i=!0),{hasAnyOutputError:s,hasAnyError:i,preface:o,variables:f,outputValueVariables:l,outputKeyVariables:c,guard:p}}}const po=Q1("net",{state:()=>({places:[],transitions:[],lastRemovedCells:[],lastCreatedPlaces:[],lastCreatedTransitions:[],lastCreatedArcs:[],lastUpdatedPlace:{},lastUpdatedTransition:{},lastFiredArcs:[],layout:{},importedData:{}}),actions:{setLayout(t){this.layout=t},export(){const t=wn().export(),e=this.layout.toJSON();return JSON.stringify({netData:t,layoutData:e},null,2)},import(t){const e=t.layoutData,n=wn().import(t.netData);this.transitions=n.transitions,this.places=n.places,this.importedData={layoutData:e,netData:n}},connect(t,e){const n=wn().connect(t,e);n&&(this.lastCreatedArcs=[n])},addPlace(){let t=wn().addPlace();this.places.push(t),this.lastCreatedPlaces=[t]},deletePlace(t){this.lastRemovedCells=wn().removePlace(t)},addTransition(){let t=wn().addTransition();this.transitions.push(t),this.lastCreatedTransitions=[t]},deleteTransition(t){this.lastRemovedCells=wn().removeTransition(t)},disconnect(t){wn().disconnect(t),this.lastRemovedCells=[t]},fireUnderAnyAssignment(t){this.lastFiredArcs=wn().fireUnderAnyAssignment(t)},fireAny(){this.lastFiredArcs=wn().fireAny()}}}),oue={netData:{places:[{id:"bf3fa260-01c9-405f-8ce4-5fa1d50b63bd",name:"Component",marking:[{name:"RAM",carbonFootprint:110,unit:"kgCO2eq"},{name:"RAM",carbonFootprint:110,unit:"kgCO2eq"}],schema:{type:"object",properties:{name:{type:"string"},carbonFootprint:{type:"number"},unit:{type:"string"}},required:["name","carbonFootprint","unit"]}},{id:"ba181779-5f73-46fc-b43d-522240f98aa1",name:"Product",marking:[{orderRef:1,name:"Server X3000",totalEmissions:0,components:[]},{orderRef:3,name:"Server X5000",totalEmissions:0,components:[]}],schema:{type:"object",properties:{orderRef:{type:"number"},name:{type:"string"},totalEmissions:{type:"number"},components:{type:"array",items:{type:"string"}}},required:["orderRef","name","totalEmissions","components"]}},{id:"57a12cb8-6a4d-44ae-82fa-5703b2ffb2dc",name:"Order",marking:[{orderId:1,name:"Server X3000",positions:[{name:"SSD",qty:10},{name:"RAM",qty:4},{name:"CPU",qty:2}]},{orderId:2,name:"Server X2000",positions:[{name:"SSD",qty:5},{name:"RAM",qty:1},{name:"CPU",qty:1}]}],schema:{type:"object",properties:{orderId:{type:"number"},name:{type:"string"},positions:{type:"array",items:{type:"object",properties:{name:{type:"string"},qty:{type:"number"}},required:["name","qty"]}}},required:["orderId","name","positions"]}},{id:"354bc422-60d9-40ca-a544-9e3f004aeb17",name:"Energy",marking:[{emissions:10,unit:"kgCO2eq"},{emissions:10,unit:"kgCO2eq"},{emissions:10,unit:"kgCO2eq"},{emissions:10,unit:"kgCO2eq"},{emissions:10,unit:"kgCO2eq"},{emissions:10,unit:"kgCO2eq"}],schema:{type:"object",properties:{emissions:{type:"number"},unit:{type:"string"}},required:["emissions","unit"]}}],transitions:[{id:"cecb8d48-a308-4f65-acc4-d11b6338e394",name:"Assemble Product",preface:"",guard:`input_Order_token == output_Order_token   
&& input_Order_token.orderId == output_Order_token.orderId 
&& input_Order_value.qty > 1  `,keyVarSnippets:{output_Product_key:"local output_Product_key = input_Product_key;",output_Order_key:"local output_Order_key = input_Product_key;"},fragmentVarSnippets:{output_Product_value:`local output_Product_value = input_Product_value + {
totalEmissions: input_Product_value.totalEmissions + input_Component_value.carbonFootprint,
components: input_Product_value.components + [input_Component_value.name]
};`,output_Order_value:"local output_Order_value = input_Order_value + { qty: input_Order_value.qty - 1};"}}],arcs:[{id:"6e37ad49-34bc-4baa-ab05-7e94f35e3dda",filter:"$.*",fromId:"bf3fa260-01c9-405f-8ce4-5fa1d50b63bd",toId:"cecb8d48-a308-4f65-acc4-d11b6338e394"},{id:"8b990fca-324f-4723-9815-8861ebf9b2fd",filter:"$.*.positions.*",fromId:"57a12cb8-6a4d-44ae-82fa-5703b2ffb2dc",toId:"cecb8d48-a308-4f65-acc4-d11b6338e394"},{id:"50b6bcdc-4a9f-4648-802c-b8637a504705",filter:"$.*",fromId:"354bc422-60d9-40ca-a544-9e3f004aeb17",toId:"cecb8d48-a308-4f65-acc4-d11b6338e394"},{id:"3bb8b09b-88b0-4cc6-850a-eb1e15091e43",filter:"$",fromId:"cecb8d48-a308-4f65-acc4-d11b6338e394",toId:"ba181779-5f73-46fc-b43d-522240f98aa1"},{id:"1cc9edfb-25e3-4b37-ba9f-149025cc6eda",filter:"$.*.positions",fromId:"cecb8d48-a308-4f65-acc4-d11b6338e394",toId:"57a12cb8-6a4d-44ae-82fa-5703b2ffb2dc"},{id:"58c0500f-dcc2-4ac8-b780-334d160739a2",filter:"$.*",fromId:"ba181779-5f73-46fc-b43d-522240f98aa1",toId:"cecb8d48-a308-4f65-acc4-d11b6338e394"}]},layoutData:{cells:[{type:"pn.Transition",size:{width:100,height:50},position:{x:156,y:144},angle:0,id:"cecb8d48-a308-4f65-acc4-d11b6338e394",jsonnetsType:"transition",z:1,attrs:{".label":{fill:"#7a7e9b",text:"Assemble Product"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"}}},{type:"pn.Place",size:{width:50,height:50},position:{x:72,y:264},angle:0,tokens:2,id:"bf3fa260-01c9-405f-8ce4-5fa1d50b63bd",jsonnetsType:"place",z:2,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Component"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2}}},{type:"pn.Place",size:{width:50,height:50},position:{x:360,y:144},angle:0,tokens:2,id:"ba181779-5f73-46fc-b43d-522240f98aa1",jsonnetsType:"place",z:3,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Product"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2}}},{type:"pn.Place",size:{width:50,height:50},position:{x:0,y:144},angle:0,tokens:2,id:"57a12cb8-6a4d-44ae-82fa-5703b2ffb2dc",jsonnetsType:"place",z:4,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Order"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2}}},{type:"pn.Place",size:{width:50,height:50},position:{x:288,y:264},angle:0,tokens:6,id:"354bc422-60d9-40ca-a544-9e3f004aeb17",jsonnetsType:"place",z:5,attrs:{".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".label":{fill:"#7a7e9b",text:"Energy"},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2}}},{type:"standard.Link",source:{id:"bf3fa260-01c9-405f-8ce4-5fa1d50b63bd",selector:".root"},target:{id:"cecb8d48-a308-4f65-acc4-d11b6338e394",selector:".root"},id:"6e37ad49-34bc-4baa-ab05-7e94f35e3dda",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:6,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"57a12cb8-6a4d-44ae-82fa-5703b2ffb2dc",selector:".root"},target:{id:"cecb8d48-a308-4f65-acc4-d11b6338e394",selector:".root"},id:"8b990fca-324f-4723-9815-8861ebf9b2fd",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:7,vertices:[{x:72,y:192},{x:132,y:192}],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"354bc422-60d9-40ca-a544-9e3f004aeb17",selector:".root"},target:{id:"cecb8d48-a308-4f65-acc4-d11b6338e394",selector:".root"},id:"50b6bcdc-4a9f-4648-802c-b8637a504705",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:8,vertices:[],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"cecb8d48-a308-4f65-acc4-d11b6338e394",selector:".root"},target:{id:"ba181779-5f73-46fc-b43d-522240f98aa1",selector:".root"},id:"3bb8b09b-88b0-4cc6-850a-eb1e15091e43",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:9,vertices:[{x:288,y:192},{x:324,y:192}],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"cecb8d48-a308-4f65-acc4-d11b6338e394",selector:".root"},target:{id:"57a12cb8-6a4d-44ae-82fa-5703b2ffb2dc",selector:".root"},id:"1cc9edfb-25e3-4b37-ba9f-149025cc6eda",jsonnetsType:"postset",connector:{name:"straight",args:{cornerType:"cubic"}},z:10,vertices:[{x:132,y:144},{x:72,y:144}],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}},{type:"standard.Link",source:{id:"ba181779-5f73-46fc-b43d-522240f98aa1",selector:".root"},target:{id:"cecb8d48-a308-4f65-acc4-d11b6338e394",selector:".root"},id:"58c0500f-dcc2-4ac8-b780-334d160739a2",jsonnetsType:"preset",connector:{name:"straight",args:{cornerType:"cubic"}},z:11,vertices:[{x:336,y:144},{x:288,y:144}],attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}}]}};function aue(t,e){const n=t.target;if(!n)return;const r=new FileReader;r.onload=function(){const i=r.result;e(i)},r.readAsText(n.files[0])}function lue(t,e,n){const r=document.createElement("a"),i=new Blob([t],{type:n});r.href=URL.createObjectURL(i),r.download=e,r.click()}const Yd=Q1("transitions",{state:()=>({transition:{},outputArcs:[],inputArcs:[],selectedOutputSnippetIndex:-1,variables:{},assignmentComplete:!1,presetAssignmentComplete:!1,postsetAssignmentComplete:!1,prefaceHasError:!1,guardHasError:!1,guardEvaluation:"",keyEvaluationResults:{},valueEvaluationResults:{},hasAnyError:!1,hasAnyOutputError:!1,isEnabled:!1,selectedInputPlaceIndex:0,selectedInputValueJsonPath:"none",selectedOutputPlaceIndex:0,selectedOutputValueJsonPath:"none",inputDataKey:0,outputDataKey:0}),actions:{saveName(){const t=wn().updateTransition(this.transition.id,this.transition.name);t&&(this.transition.name=t.name,po().lastUpdatedTransition=t)},saveInputFilter(){const t=this.inputArcs[this.selectedInputPlaceIndex];wn().updateArc(t.id,t.filter)},saveOutputFilter(){const t=this.outputArcs[this.selectedOutputPlaceIndex];wn().updateArc(t.id,t.filter)},saveBasicInscription(){wn().updateTransition(this.transition.id,this.transition.name,this.transition.preface,this.transition.guard)},saveOutputSnippets(){const t=this.outputArcs[this.selectedOutputSnippetIndex];wn().updateTransitionSnippets(this.transition.id,t.id,t.keySnippet,t.valueSnippet)},unsetAssignments(){const t=wn().findTransition(this.transition.id);t&&(t.resetAssignments(),this.selectedInputValueJsonPath="none",this.selectedOutputValueJsonPath="none",this.assignmentComplete=!1)},saveSelectedAssignment(t,e){let n;e==="input"?(this.selectedInputValueJsonPath=t,n=this.inputArcs[this.selectedInputPlaceIndex].id):(this.selectedOutputValueJsonPath=t,n=this.outputArcs[this.selectedOutputPlaceIndex].id);const r=wn().assignFilterByPath(n,t);r&&(this.assignmentComplete=r.complete,this.presetAssignmentComplete=r.presetComplete,this.postsetAssignmentComplete=r.postsetComplete,this.loadEvaluations(),this.hasAnyError||wn().assignOutputVariables(n))},loadCurrentInputAssignment(){const t=this.inputArcs[this.selectedInputPlaceIndex].id,e=wn().findArc(t);e&&(e.assignedPathExpression!==null?this.selectedInputValueJsonPath=e.assignedPathExpression:this.selectedInputValueJsonPath="none")},loadCurrentOutputAssignment(){const t=this.outputArcs[this.selectedOutputPlaceIndex].id,e=wn().findArc(t);e&&(e.assignedPathExpression!==null?this.selectedOutputValueJsonPath=e.assignedPathExpression:this.selectedOutputValueJsonPath="none")},loadAvailableInputAssignments(){const t=this.inputArcs[this.selectedInputPlaceIndex];if(!t)return;const e=wn().findArc(t.id);if(!e)return;const n=[],r=e.applyFilterExpression(t.filter);for(let i=0;i<r.length;i++)n.push(r[i]);t.filtered=n},loadAvailableOutputAssignments(){const t=this.outputArcs[this.selectedOutputPlaceIndex];if(!t)return;const e=wn().findArc(t.id);if(!e)return;const n=[],r=e.applyFilterExpression(t.filter);for(let i=0;i<r.length;i++)n.push(r[i]);t.filtered=n},unsetCurrentInputAssignment(){const t=this.inputArcs[this.selectedInputPlaceIndex];if(!t)return;const e=wn().findArc(t.id);e&&(e.resetAssignment(),this.selectedInputValueJsonPath="none")},unsetCurrentOutputAssignment(){const t=this.outputArcs[this.selectedOutputPlaceIndex];if(!t)return;const e=wn().findArc(t.id);e&&(e.resetAssignment(),this.selectedOutputValueJsonPath="none")},resetName(){const t=wn().findTransition(this.transition.id);t&&(this.transition.name=t.name,po().lastUpdatedTransition=t)},resetInputFilter(){const t=this.inputArcs[this.selectedInputPlaceIndex],e=wn().findArc(t.id);e&&(t.filter=e.filterExpression,this.loadAvailableInputAssignments())},resetOutputFilter(){const t=this.outputArcs[this.selectedOutputPlaceIndex],e=wn().findArc(t.id);e&&(t.filter=e.filterExpression,this.loadAvailableOutputAssignments())},loadEvaluations(){const t=wn().getEvaluations(this.transition.id);if(t){if(this.variables=t.variables,!this.assignmentComplete||(this.hasAnyError=t.hasAnyError,this.hasAnyError&&(this.isEnabled=!1),this.prefaceHasError=t.preface.hasError,this.prefaceHasError)||(t.hasAnyOutputError!==void 0&&t.outputKeyVariables&&t.outputValueVariables&&(this.hasAnyOutputError=t.hasAnyOutputError,this.keyEvaluationResults=t.outputKeyVariables,this.valueEvaluationResults=t.outputValueVariables),this.hasAnyOutputError))return;t.guard&&(this.guardHasError=t.guard.hasError,this.guardHasError?this.guardEvaluation=t.guard.evaluation:(this.guardEvaluation=t.guard.evaluation,this.isEnabled=JSON.parse(this.guardEvaluation)))}},initSettings(){this.selectedOutputSnippetIndex=-1,this.selectedInputPlaceIndex=0,this.selectedOutputPlaceIndex=0,this.assignmentComplete=!1},loadTransition(t){const e=po().transitions.find(n=>n.id===t);if(e){this.transition=e;const n=wn().findTransition(this.transition.id);if(!n)return e;const r=[];for(let s=0;s<n.postset.length;s++){const o=n.postset[s],a=[],l=o.applyFilterExpression(o.filterExpression);for(let c=0;c<l.length;c++)a.push(l[c]);const u={id:o.id,name:o.place.name,marking:o.place.marking,tokenVar:o.tokenVarName,valueVar:o.valueVarName,keyVar:o.keyVarName,valueSnippet:n.valueVarSnippets[o.valueVarName],keySnippet:n.keyVarSnippets[o.keyVarName],filter:o.filterExpression,filtered:a};r.push(u)}this.outputArcs=r;const i=[];for(let s=0;s<n.preset.length;s++){const o=n.preset[s],a=[],l=o.applyFilterExpression(o.filterExpression);for(let c=0;c<l.length;c++)a.push(l[c]);const u={id:o.id,name:o.place.name,marking:o.place.marking,filter:o.filterExpression,tokenVar:o.tokenVarName,valueVar:o.valueVarName,keyVar:o.keyVarName,filtered:a};i.push(u)}this.inputArcs=i}},forceRender(){this.inputDataKey+=1,this.outputDataKey+=1},fireCurrentTransition(){wn().assignOutputVariables(this.transition.id);const t=wn().fireUnderCurrentAssignment(this.transition.id);po().lastFiredArcs=t,this.loadTransition(this.transition.id),this.unsetAssignments(),this.loadAvailableInputAssignments(),this.loadAvailableOutputAssignments(),this.loadEvaluations(),this.assignmentComplete=!1,this.presetAssignmentComplete=!1,this.postsetAssignmentComplete=!1,this.forceRender()}}});var JV={},im={},jb={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */jb.exports;(function(t,e){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",u=500,c="__lodash_placeholder__",f=1,p=2,v=4,b=1,E=2,P=1,S=2,A=4,I=8,N=16,x=32,g=64,_=128,M=256,D=512,q=30,R="...",W=800,G=16,Z=1,de=2,be=3,_e=1/0,Te=9007199254740991,Le=17976931348623157e292,Ee=0/0,re=4294967295,ne=re-1,ee=re>>>1,F=[["ary",_],["bind",P],["bindKey",S],["curry",I],["curryRight",N],["flip",D],["partial",x],["partialRight",g],["rearg",M]],U="[object Arguments]",ye="[object Array]",Fe="[object AsyncFunction]",He="[object Boolean]",Be="[object Date]",Pe="[object DOMException]",Ve="[object Error]",z="[object Function]",K="[object GeneratorFunction]",C="[object Map]",$="[object Number]",V="[object Null]",Q="[object Object]",ce="[object Promise]",ue="[object Proxy]",ke="[object RegExp]",Ae="[object Set]",tt="[object String]",Je="[object Symbol]",Xe="[object Undefined]",Ye="[object WeakMap]",ft="[object WeakSet]",Nt="[object ArrayBuffer]",Vt="[object DataView]",yt="[object Float32Array]",Gt="[object Float64Array]",qn="[object Int8Array]",Or="[object Int16Array]",ir="[object Int32Array]",yi="[object Uint8Array]",Qn="[object Uint8ClampedArray]",Sn="[object Uint16Array]",En="[object Uint32Array]",vs=/\b__p \+= '';/g,uu=/\b(__p \+=) '' \+/g,dl=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ca=/&(?:amp|lt|gt|quot|#39);/g,Js=/[&<>"']/g,Qr=RegExp(Ca.source),Pa=RegExp(Js.source),tp=/<%-([\s\S]+?)%>/g,cu=/<%([\s\S]+?)%>/g,pl=/<%=([\s\S]+?)%>/g,xc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,oh=/^\w*$/,np=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,gl=/[\\^$.*+?()[\]{}|]/g,rp=RegExp(gl.source),fu=/^\s+/,he=/\s/,te=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,pe=/\{\n\/\* \[wrapped with (.+)\] \*/,Me=/,? & /,Oe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,bt=/[()=,{}\[\]\/\s]/,xt=/\\(\\)?/g,rn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Bn=/\w*$/,sr=/^[-+]0x[0-9a-f]+$/i,en=/^0b[01]+$/i,Pn=/^\[object .+?Constructor\]$/,or=/^0o[0-7]+$/i,Bt=/^(?:0|[1-9]\d*)$/,Un=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Wn=/($^)/,Gn=/['\n\r\u2028\u2029\\]/g,bi="\\ud800-\\udfff",ys="\\u0300-\\u036f",bs="\\ufe20-\\ufe2f",Zo="\\u20d0-\\u20ff",Xs=ys+bs+Zo,ei="\\u2700-\\u27bf",Ii="a-z\\xdf-\\xf6\\xf8-\\xff",vr="\\xac\\xb1\\xd7\\xf7",hi="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",xo="\\u2000-\\u206f",ah=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Sc="A-Z\\xc0-\\xd6\\xd8-\\xde",Qo="\\ufe0e\\ufe0f",Oa=vr+hi+xo+ah,Zs="[']",Ec="["+bi+"]",_c="["+Oa+"]",So="["+Xs+"]",ws="\\d+",fv="["+ei+"]",hu="["+Ii+"]",hv="[^"+bi+Oa+ws+ei+Ii+Sc+"]",ip="\\ud83c[\\udffb-\\udfff]",ml="(?:"+So+"|"+ip+")",Ta="[^"+bi+"]",Ac="(?:\\ud83c[\\udde6-\\uddff]){2}",sp="[\\ud800-\\udbff][\\udc00-\\udfff]",vl="["+Sc+"]",op="\\u200d",du="(?:"+hu+"|"+hv+")",dv="(?:"+vl+"|"+hv+")",lh="(?:"+Zs+"(?:d|ll|m|re|s|t|ve))?",pv="(?:"+Zs+"(?:D|LL|M|RE|S|T|VE))?",ap=ml+"?",gv="["+Qo+"]?",Lw="(?:"+op+"(?:"+[Ta,Ac,sp].join("|")+")"+gv+ap+")*",lp="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Dw="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",mv=gv+ap+Lw,Fw="(?:"+[fv,Ac,sp].join("|")+")"+mv,Vw="(?:"+[Ta+So+"?",So,Ac,sp,Ec].join("|")+")",Bw=RegExp(Zs,"g"),jw=RegExp(So,"g"),up=RegExp(ip+"(?="+ip+")|"+Vw+mv,"g"),vv=RegExp([vl+"?"+hu+"+"+lh+"(?="+[_c,vl,"$"].join("|")+")",dv+"+"+pv+"(?="+[_c,vl+du,"$"].join("|")+")",vl+"?"+du+"+"+lh,vl+"+"+pv,Dw,lp,ws,Fw].join("|"),"g"),cp=RegExp("["+op+bi+Xs+Qo+"]"),yv=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,fp=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],bv=-1,Kn={};Kn[yt]=Kn[Gt]=Kn[qn]=Kn[Or]=Kn[ir]=Kn[yi]=Kn[Qn]=Kn[Sn]=Kn[En]=!0,Kn[U]=Kn[ye]=Kn[Nt]=Kn[He]=Kn[Vt]=Kn[Be]=Kn[Ve]=Kn[z]=Kn[C]=Kn[$]=Kn[Q]=Kn[ke]=Kn[Ae]=Kn[tt]=Kn[Ye]=!1;var jn={};jn[U]=jn[ye]=jn[Nt]=jn[Vt]=jn[He]=jn[Be]=jn[yt]=jn[Gt]=jn[qn]=jn[Or]=jn[ir]=jn[C]=jn[$]=jn[Q]=jn[ke]=jn[Ae]=jn[tt]=jn[Je]=jn[yi]=jn[Qn]=jn[Sn]=jn[En]=!0,jn[Ve]=jn[z]=jn[Ye]=!1;var zw={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Hw={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Uw={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},kc={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},wv=parseFloat,hp=parseInt,xv=typeof si=="object"&&si&&si.Object===Object&&si,qw=typeof self=="object"&&self&&self.Object===Object&&self,ti=xv||qw||Function("return this")(),m=e&&!e.nodeType&&e,w=m&&!0&&t&&!t.nodeType&&t,k=w&&w.exports===m,O=k&&xv.process,L=function(){try{var ve=w&&w.require&&w.require("util").types;return ve||O&&O.binding&&O.binding("util")}catch{}}(),B=L&&L.isArrayBuffer,H=L&&L.isDate,le=L&&L.isMap,ie=L&&L.isRegExp,Se=L&&L.isSet,$e=L&&L.isTypedArray;function qe(ve,je,Ie){switch(Ie.length){case 0:return ve.call(je);case 1:return ve.call(je,Ie[0]);case 2:return ve.call(je,Ie[0],Ie[1]);case 3:return ve.call(je,Ie[0],Ie[1],Ie[2])}return ve.apply(je,Ie)}function Ce(ve,je,Ie,ct){for(var zt=-1,_n=ve==null?0:ve.length;++zt<_n;){var Lr=ve[zt];je(ct,Lr,Ie(Lr),ve)}return ct}function Re(ve,je){for(var Ie=-1,ct=ve==null?0:ve.length;++Ie<ct&&je(ve[Ie],Ie,ve)!==!1;);return ve}function At(ve,je){for(var Ie=ve==null?0:ve.length;Ie--&&je(ve[Ie],Ie,ve)!==!1;);return ve}function Ht(ve,je){for(var Ie=-1,ct=ve==null?0:ve.length;++Ie<ct;)if(!je(ve[Ie],Ie,ve))return!1;return!0}function dt(ve,je){for(var Ie=-1,ct=ve==null?0:ve.length,zt=0,_n=[];++Ie<ct;){var Lr=ve[Ie];je(Lr,Ie,ve)&&(_n[zt++]=Lr)}return _n}function yr(ve,je){var Ie=ve==null?0:ve.length;return!!Ie&&xs(ve,je,0)>-1}function br(ve,je,Ie){for(var ct=-1,zt=ve==null?0:ve.length;++ct<zt;)if(Ie(je,ve[ct]))return!0;return!1}function an(ve,je){for(var Ie=-1,ct=ve==null?0:ve.length,zt=Array(ct);++Ie<ct;)zt[Ie]=je(ve[Ie],Ie,ve);return zt}function hn(ve,je){for(var Ie=-1,ct=je.length,zt=ve.length;++Ie<ct;)ve[zt+Ie]=je[Ie];return ve}function jt(ve,je,Ie,ct){var zt=-1,_n=ve==null?0:ve.length;for(ct&&_n&&(Ie=ve[++zt]);++zt<_n;)Ie=je(Ie,ve[zt],zt,ve);return Ie}function $i(ve,je,Ie,ct){var zt=ve==null?0:ve.length;for(ct&&zt&&(Ie=ve[--zt]);zt--;)Ie=je(Ie,ve[zt],zt,ve);return Ie}function dn(ve,je){for(var Ie=-1,ct=ve==null?0:ve.length;++Ie<ct;)if(je(ve[Ie],Ie,ve))return!0;return!1}var fr=_o("length");function Cc(ve){return ve.split("")}function uh(ve){return ve.match(Oe)||[]}function Ri(ve,je,Ie){var ct;return Ie(ve,function(zt,_n,Lr){if(je(zt,_n,Lr))return ct=_n,!1}),ct}function Eo(ve,je,Ie,ct){for(var zt=ve.length,_n=Ie+(ct?1:-1);ct?_n--:++_n<zt;)if(je(ve[_n],_n,ve))return _n;return-1}function xs(ve,je,Ie){return je===je?Av(ve,je,Ie):Eo(ve,ea,Ie)}function Li(ve,je,Ie,ct){for(var zt=Ie-1,_n=ve.length;++zt<_n;)if(ct(ve[zt],je))return zt;return-1}function ea(ve){return ve!==ve}function Qi(ve,je){var Ie=ve==null?0:ve.length;return Ie?On(ve,je)/Ie:Ee}function _o(ve){return function(je){return je==null?n:je[ve]}}function ch(ve){return function(je){return ve==null?n:ve[je]}}function Ma(ve,je,Ie,ct,zt){return zt(ve,function(_n,Lr,$n){Ie=ct?(ct=!1,_n):je(Ie,_n,Lr,$n)}),Ie}function dp(ve,je){var Ie=ve.length;for(ve.sort(je);Ie--;)ve[Ie]=ve[Ie].value;return ve}function On(ve,je){for(var Ie,ct=-1,zt=ve.length;++ct<zt;){var _n=je(ve[ct]);_n!==n&&(Ie=Ie===n?_n:Ie+_n)}return Ie}function ta(ve,je){for(var Ie=-1,ct=Array(ve);++Ie<ve;)ct[Ie]=je(Ie);return ct}function Sv(ve,je){return an(je,function(Ie){return[Ie,ve[Ie]]})}function fh(ve){return ve&&ve.slice(0,Ss(ve)+1).replace(fu,"")}function es(ve){return function(je){return ve(je)}}function pu(ve,je){return an(je,function(Ie){return ve[Ie]})}function Pc(ve,je){return ve.has(je)}function pp(ve,je){for(var Ie=-1,ct=ve.length;++Ie<ct&&xs(je,ve[Ie],0)>-1;);return Ie}function Ev(ve,je){for(var Ie=ve.length;Ie--&&xs(je,ve[Ie],0)>-1;);return Ie}function Ww(ve,je){for(var Ie=ve.length,ct=0;Ie--;)ve[Ie]===je&&++ct;return ct}var Gw=ch(zw),hh=ch(Hw);function Kw(ve){return"\\"+kc[ve]}function Yw(ve,je){return ve==null?n:ve[je]}function gu(ve){return cp.test(ve)}function Oc(ve){return yv.test(ve)}function Jw(ve){for(var je,Ie=[];!(je=ve.next()).done;)Ie.push(je.value);return Ie}function Tc(ve){var je=-1,Ie=Array(ve.size);return ve.forEach(function(ct,zt){Ie[++je]=[zt,ct]}),Ie}function Ao(ve,je){return function(Ie){return ve(je(Ie))}}function di(ve,je){for(var Ie=-1,ct=ve.length,zt=0,_n=[];++Ie<ct;){var Lr=ve[Ie];(Lr===je||Lr===c)&&(ve[Ie]=c,_n[zt++]=Ie)}return _n}function Mc(ve){var je=-1,Ie=Array(ve.size);return ve.forEach(function(ct){Ie[++je]=ct}),Ie}function _v(ve){var je=-1,Ie=Array(ve.size);return ve.forEach(function(ct){Ie[++je]=[ct,ct]}),Ie}function Av(ve,je,Ie){for(var ct=Ie-1,zt=ve.length;++ct<zt;)if(ve[ct]===je)return ct;return-1}function Xw(ve,je,Ie){for(var ct=Ie+1;ct--;)if(ve[ct]===je)return ct;return ct}function Tn(ve){return gu(ve)?gp(ve):fr(ve)}function Di(ve){return gu(ve)?kv(ve):Cc(ve)}function Ss(ve){for(var je=ve.length;je--&&he.test(ve.charAt(je)););return je}var Es=ch(Uw);function gp(ve){for(var je=up.lastIndex=0;up.test(ve);)++je;return je}function kv(ve){return ve.match(up)||[]}function Zw(ve){return ve.match(vv)||[]}var Qw=function ve(je){je=je==null?ti:yl.defaults(ti.Object(),je,yl.pick(ti,fp));var Ie=je.Array,ct=je.Date,zt=je.Error,_n=je.Function,Lr=je.Math,$n=je.Object,Nc=je.RegExp,mp=je.String,_s=je.TypeError,J=Ie.prototype,ae=_n.prototype,me=$n.prototype,Ue=je["__core-js_shared__"],we=ae.toString,Ne=me.hasOwnProperty,Qe=0,it=function(){var h=/[^.]+$/.exec(Ue&&Ue.keys&&Ue.keys.IE_PROTO||"");return h?"Symbol(src)_1."+h:""}(),ot=me.toString,It=we.call($n),Pt=ti._,$t=Nc("^"+we.call(Ne).replace(gl,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Jt=k?je.Buffer:n,vn=je.Symbol,Ct=je.Uint8Array,Tr=Jt?Jt.allocUnsafe:n,Dr=Ao($n.getPrototypeOf,$n),Fi=$n.create,er=me.propertyIsEnumerable,Na=J.splice,mu=vn?vn.isConcatSpreadable:n,ni=vn?vn.iterator:n,Ic=vn?vn.toStringTag:n,Cv=function(){try{var h=Fc($n,"defineProperty");return h({},"",{}),h}catch{}}(),az=je.clearTimeout!==ti.clearTimeout&&je.clearTimeout,lz=ct&&ct.now!==ti.Date.now&&ct.now,uz=je.setTimeout!==ti.setTimeout&&je.setTimeout,Pv=Lr.ceil,Ov=Lr.floor,ex=$n.getOwnPropertySymbols,cz=Jt?Jt.isBuffer:n,wO=je.isFinite,fz=J.join,hz=Ao($n.keys,$n),ri=Lr.max,Vi=Lr.min,dz=ct.now,pz=je.parseInt,xO=Lr.random,gz=J.reverse,tx=Fc(je,"DataView"),vp=Fc(je,"Map"),nx=Fc(je,"Promise"),dh=Fc(je,"Set"),yp=Fc(je,"WeakMap"),bp=Fc($n,"create"),Tv=yp&&new yp,ph={},mz=Vc(tx),vz=Vc(vp),yz=Vc(nx),bz=Vc(dh),wz=Vc(yp),Mv=vn?vn.prototype:n,wp=Mv?Mv.valueOf:n,SO=Mv?Mv.toString:n;function Y(h){if(Mr(h)&&!Xt(h)&&!(h instanceof yn)){if(h instanceof ko)return h;if(Ne.call(h,"__wrapped__"))return ET(h)}return new ko(h)}var gh=function(){function h(){}return function(d){if(!Er(d))return{};if(Fi)return Fi(d);h.prototype=d;var y=new h;return h.prototype=n,y}}();function Nv(){}function ko(h,d){this.__wrapped__=h,this.__actions__=[],this.__chain__=!!d,this.__index__=0,this.__values__=n}Y.templateSettings={escape:tp,evaluate:cu,interpolate:pl,variable:"",imports:{_:Y}},Y.prototype=Nv.prototype,Y.prototype.constructor=Y,ko.prototype=gh(Nv.prototype),ko.prototype.constructor=ko;function yn(h){this.__wrapped__=h,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=re,this.__views__=[]}function xz(){var h=new yn(this.__wrapped__);return h.__actions__=As(this.__actions__),h.__dir__=this.__dir__,h.__filtered__=this.__filtered__,h.__iteratees__=As(this.__iteratees__),h.__takeCount__=this.__takeCount__,h.__views__=As(this.__views__),h}function Sz(){if(this.__filtered__){var h=new yn(this);h.__dir__=-1,h.__filtered__=!0}else h=this.clone(),h.__dir__*=-1;return h}function Ez(){var h=this.__wrapped__.value(),d=this.__dir__,y=Xt(h),T=d<0,j=y?h.length:0,X=R9(0,j,this.__views__),se=X.start,ge=X.end,xe=ge-se,We=T?ge:se-1,Ge=this.__iteratees__,nt=Ge.length,ut=0,Et=Vi(xe,this.__takeCount__);if(!y||!T&&j==xe&&Et==xe)return WO(h,this.__actions__);var Dt=[];e:for(;xe--&&ut<Et;){We+=d;for(var tn=-1,Ft=h[We];++tn<nt;){var pn=Ge[tn],An=pn.iteratee,to=pn.type,rs=An(Ft);if(to==de)Ft=rs;else if(!rs){if(to==Z)continue e;break e}}Dt[ut++]=Ft}return Dt}yn.prototype=gh(Nv.prototype),yn.prototype.constructor=yn;function $c(h){var d=-1,y=h==null?0:h.length;for(this.clear();++d<y;){var T=h[d];this.set(T[0],T[1])}}function _z(){this.__data__=bp?bp(null):{},this.size=0}function Az(h){var d=this.has(h)&&delete this.__data__[h];return this.size-=d?1:0,d}function kz(h){var d=this.__data__;if(bp){var y=d[h];return y===l?n:y}return Ne.call(d,h)?d[h]:n}function Cz(h){var d=this.__data__;return bp?d[h]!==n:Ne.call(d,h)}function Pz(h,d){var y=this.__data__;return this.size+=this.has(h)?0:1,y[h]=bp&&d===n?l:d,this}$c.prototype.clear=_z,$c.prototype.delete=Az,$c.prototype.get=kz,$c.prototype.has=Cz,$c.prototype.set=Pz;function bl(h){var d=-1,y=h==null?0:h.length;for(this.clear();++d<y;){var T=h[d];this.set(T[0],T[1])}}function Oz(){this.__data__=[],this.size=0}function Tz(h){var d=this.__data__,y=Iv(d,h);if(y<0)return!1;var T=d.length-1;return y==T?d.pop():Na.call(d,y,1),--this.size,!0}function Mz(h){var d=this.__data__,y=Iv(d,h);return y<0?n:d[y][1]}function Nz(h){return Iv(this.__data__,h)>-1}function Iz(h,d){var y=this.__data__,T=Iv(y,h);return T<0?(++this.size,y.push([h,d])):y[T][1]=d,this}bl.prototype.clear=Oz,bl.prototype.delete=Tz,bl.prototype.get=Mz,bl.prototype.has=Nz,bl.prototype.set=Iz;function wl(h){var d=-1,y=h==null?0:h.length;for(this.clear();++d<y;){var T=h[d];this.set(T[0],T[1])}}function $z(){this.size=0,this.__data__={hash:new $c,map:new(vp||bl),string:new $c}}function Rz(h){var d=qv(this,h).delete(h);return this.size-=d?1:0,d}function Lz(h){return qv(this,h).get(h)}function Dz(h){return qv(this,h).has(h)}function Fz(h,d){var y=qv(this,h),T=y.size;return y.set(h,d),this.size+=y.size==T?0:1,this}wl.prototype.clear=$z,wl.prototype.delete=Rz,wl.prototype.get=Lz,wl.prototype.has=Dz,wl.prototype.set=Fz;function Rc(h){var d=-1,y=h==null?0:h.length;for(this.__data__=new wl;++d<y;)this.add(h[d])}function Vz(h){return this.__data__.set(h,l),this}function Bz(h){return this.__data__.has(h)}Rc.prototype.add=Rc.prototype.push=Vz,Rc.prototype.has=Bz;function na(h){var d=this.__data__=new bl(h);this.size=d.size}function jz(){this.__data__=new bl,this.size=0}function zz(h){var d=this.__data__,y=d.delete(h);return this.size=d.size,y}function Hz(h){return this.__data__.get(h)}function Uz(h){return this.__data__.has(h)}function qz(h,d){var y=this.__data__;if(y instanceof bl){var T=y.__data__;if(!vp||T.length<i-1)return T.push([h,d]),this.size=++y.size,this;y=this.__data__=new wl(T)}return y.set(h,d),this.size=y.size,this}na.prototype.clear=jz,na.prototype.delete=zz,na.prototype.get=Hz,na.prototype.has=Uz,na.prototype.set=qz;function EO(h,d){var y=Xt(h),T=!y&&Bc(h),j=!y&&!T&&xu(h),X=!y&&!T&&!j&&bh(h),se=y||T||j||X,ge=se?ta(h.length,mp):[],xe=ge.length;for(var We in h)(d||Ne.call(h,We))&&!(se&&(We=="length"||j&&(We=="offset"||We=="parent")||X&&(We=="buffer"||We=="byteLength"||We=="byteOffset")||_l(We,xe)))&&ge.push(We);return ge}function _O(h){var d=h.length;return d?h[dx(0,d-1)]:n}function Wz(h,d){return Wv(As(h),Lc(d,0,h.length))}function Gz(h){return Wv(As(h))}function rx(h,d,y){(y!==n&&!ra(h[d],y)||y===n&&!(d in h))&&xl(h,d,y)}function xp(h,d,y){var T=h[d];(!(Ne.call(h,d)&&ra(T,y))||y===n&&!(d in h))&&xl(h,d,y)}function Iv(h,d){for(var y=h.length;y--;)if(ra(h[y][0],d))return y;return-1}function Kz(h,d,y,T){return vu(h,function(j,X,se){d(T,j,y(j),se)}),T}function AO(h,d){return h&&$a(d,pi(d),h)}function Yz(h,d){return h&&$a(d,Cs(d),h)}function xl(h,d,y){d=="__proto__"&&Cv?Cv(h,d,{configurable:!0,enumerable:!0,value:y,writable:!0}):h[d]=y}function ix(h,d){for(var y=-1,T=d.length,j=Ie(T),X=h==null;++y<T;)j[y]=X?n:Fx(h,d[y]);return j}function Lc(h,d,y){return h===h&&(y!==n&&(h=h<=y?h:y),d!==n&&(h=h>=d?h:d)),h}function Co(h,d,y,T,j,X){var se,ge=d&f,xe=d&p,We=d&v;if(y&&(se=j?y(h,T,j,X):y(h)),se!==n)return se;if(!Er(h))return h;var Ge=Xt(h);if(Ge){if(se=D9(h),!ge)return As(h,se)}else{var nt=Bi(h),ut=nt==z||nt==K;if(xu(h))return YO(h,ge);if(nt==Q||nt==U||ut&&!j){if(se=xe||ut?{}:pT(h),!ge)return xe?k9(h,Yz(se,h)):A9(h,AO(se,h))}else{if(!jn[nt])return j?h:{};se=F9(h,nt,ge)}}X||(X=new na);var Et=X.get(h);if(Et)return Et;X.set(h,se),HT(h)?h.forEach(function(Ft){se.add(Co(Ft,d,y,Ft,h,X))}):jT(h)&&h.forEach(function(Ft,pn){se.set(pn,Co(Ft,d,y,pn,h,X))});var Dt=We?xe?_x:Ex:xe?Cs:pi,tn=Ge?n:Dt(h);return Re(tn||h,function(Ft,pn){tn&&(pn=Ft,Ft=h[pn]),xp(se,pn,Co(Ft,d,y,pn,h,X))}),se}function Jz(h){var d=pi(h);return function(y){return kO(y,h,d)}}function kO(h,d,y){var T=y.length;if(h==null)return!T;for(h=$n(h);T--;){var j=y[T],X=d[j],se=h[j];if(se===n&&!(j in h)||!X(se))return!1}return!0}function CO(h,d,y){if(typeof h!="function")throw new _s(o);return Pp(function(){h.apply(n,y)},d)}function Sp(h,d,y,T){var j=-1,X=yr,se=!0,ge=h.length,xe=[],We=d.length;if(!ge)return xe;y&&(d=an(d,es(y))),T?(X=br,se=!1):d.length>=i&&(X=Pc,se=!1,d=new Rc(d));e:for(;++j<ge;){var Ge=h[j],nt=y==null?Ge:y(Ge);if(Ge=T||Ge!==0?Ge:0,se&&nt===nt){for(var ut=We;ut--;)if(d[ut]===nt)continue e;xe.push(Ge)}else X(d,nt,T)||xe.push(Ge)}return xe}var vu=eT(Ia),PO=eT(ox,!0);function Xz(h,d){var y=!0;return vu(h,function(T,j,X){return y=!!d(T,j,X),y}),y}function $v(h,d,y){for(var T=-1,j=h.length;++T<j;){var X=h[T],se=d(X);if(se!=null&&(ge===n?se===se&&!eo(se):y(se,ge)))var ge=se,xe=X}return xe}function Zz(h,d,y,T){var j=h.length;for(y=Zt(y),y<0&&(y=-y>j?0:j+y),T=T===n||T>j?j:Zt(T),T<0&&(T+=j),T=y>T?0:qT(T);y<T;)h[y++]=d;return h}function OO(h,d){var y=[];return vu(h,function(T,j,X){d(T,j,X)&&y.push(T)}),y}function wi(h,d,y,T,j){var X=-1,se=h.length;for(y||(y=B9),j||(j=[]);++X<se;){var ge=h[X];d>0&&y(ge)?d>1?wi(ge,d-1,y,T,j):hn(j,ge):T||(j[j.length]=ge)}return j}var sx=tT(),TO=tT(!0);function Ia(h,d){return h&&sx(h,d,pi)}function ox(h,d){return h&&TO(h,d,pi)}function Rv(h,d){return dt(d,function(y){return Al(h[y])})}function Dc(h,d){d=bu(d,h);for(var y=0,T=d.length;h!=null&&y<T;)h=h[Ra(d[y++])];return y&&y==T?h:n}function MO(h,d,y){var T=d(h);return Xt(h)?T:hn(T,y(h))}function ts(h){return h==null?h===n?Xe:V:Ic&&Ic in $n(h)?$9(h):G9(h)}function ax(h,d){return h>d}function Qz(h,d){return h!=null&&Ne.call(h,d)}function e9(h,d){return h!=null&&d in $n(h)}function t9(h,d,y){return h>=Vi(d,y)&&h<ri(d,y)}function lx(h,d,y){for(var T=y?br:yr,j=h[0].length,X=h.length,se=X,ge=Ie(X),xe=1/0,We=[];se--;){var Ge=h[se];se&&d&&(Ge=an(Ge,es(d))),xe=Vi(Ge.length,xe),ge[se]=!y&&(d||j>=120&&Ge.length>=120)?new Rc(se&&Ge):n}Ge=h[0];var nt=-1,ut=ge[0];e:for(;++nt<j&&We.length<xe;){var Et=Ge[nt],Dt=d?d(Et):Et;if(Et=y||Et!==0?Et:0,!(ut?Pc(ut,Dt):T(We,Dt,y))){for(se=X;--se;){var tn=ge[se];if(!(tn?Pc(tn,Dt):T(h[se],Dt,y)))continue e}ut&&ut.push(Dt),We.push(Et)}}return We}function n9(h,d,y,T){return Ia(h,function(j,X,se){d(T,y(j),X,se)}),T}function Ep(h,d,y){d=bu(d,h),h=yT(h,d);var T=h==null?h:h[Ra(Oo(d))];return T==null?n:qe(T,h,y)}function NO(h){return Mr(h)&&ts(h)==U}function r9(h){return Mr(h)&&ts(h)==Nt}function i9(h){return Mr(h)&&ts(h)==Be}function _p(h,d,y,T,j){return h===d?!0:h==null||d==null||!Mr(h)&&!Mr(d)?h!==h&&d!==d:s9(h,d,y,T,_p,j)}function s9(h,d,y,T,j,X){var se=Xt(h),ge=Xt(d),xe=se?ye:Bi(h),We=ge?ye:Bi(d);xe=xe==U?Q:xe,We=We==U?Q:We;var Ge=xe==Q,nt=We==Q,ut=xe==We;if(ut&&xu(h)){if(!xu(d))return!1;se=!0,Ge=!1}if(ut&&!Ge)return X||(X=new na),se||bh(h)?fT(h,d,y,T,j,X):N9(h,d,xe,y,T,j,X);if(!(y&b)){var Et=Ge&&Ne.call(h,"__wrapped__"),Dt=nt&&Ne.call(d,"__wrapped__");if(Et||Dt){var tn=Et?h.value():h,Ft=Dt?d.value():d;return X||(X=new na),j(tn,Ft,y,T,X)}}return ut?(X||(X=new na),I9(h,d,y,T,j,X)):!1}function o9(h){return Mr(h)&&Bi(h)==C}function ux(h,d,y,T){var j=y.length,X=j,se=!T;if(h==null)return!X;for(h=$n(h);j--;){var ge=y[j];if(se&&ge[2]?ge[1]!==h[ge[0]]:!(ge[0]in h))return!1}for(;++j<X;){ge=y[j];var xe=ge[0],We=h[xe],Ge=ge[1];if(se&&ge[2]){if(We===n&&!(xe in h))return!1}else{var nt=new na;if(T)var ut=T(We,Ge,xe,h,d,nt);if(!(ut===n?_p(Ge,We,b|E,T,nt):ut))return!1}}return!0}function IO(h){if(!Er(h)||z9(h))return!1;var d=Al(h)?$t:Pn;return d.test(Vc(h))}function a9(h){return Mr(h)&&ts(h)==ke}function l9(h){return Mr(h)&&Bi(h)==Ae}function u9(h){return Mr(h)&&Zv(h.length)&&!!Kn[ts(h)]}function $O(h){return typeof h=="function"?h:h==null?Ps:typeof h=="object"?Xt(h)?DO(h[0],h[1]):LO(h):n2(h)}function cx(h){if(!Cp(h))return hz(h);var d=[];for(var y in $n(h))Ne.call(h,y)&&y!="constructor"&&d.push(y);return d}function c9(h){if(!Er(h))return W9(h);var d=Cp(h),y=[];for(var T in h)T=="constructor"&&(d||!Ne.call(h,T))||y.push(T);return y}function fx(h,d){return h<d}function RO(h,d){var y=-1,T=ks(h)?Ie(h.length):[];return vu(h,function(j,X,se){T[++y]=d(j,X,se)}),T}function LO(h){var d=kx(h);return d.length==1&&d[0][2]?mT(d[0][0],d[0][1]):function(y){return y===h||ux(y,h,d)}}function DO(h,d){return Px(h)&&gT(d)?mT(Ra(h),d):function(y){var T=Fx(y,h);return T===n&&T===d?Vx(y,h):_p(d,T,b|E)}}function Lv(h,d,y,T,j){h!==d&&sx(d,function(X,se){if(j||(j=new na),Er(X))f9(h,d,se,y,Lv,T,j);else{var ge=T?T(Tx(h,se),X,se+"",h,d,j):n;ge===n&&(ge=X),rx(h,se,ge)}},Cs)}function f9(h,d,y,T,j,X,se){var ge=Tx(h,y),xe=Tx(d,y),We=se.get(xe);if(We){rx(h,y,We);return}var Ge=X?X(ge,xe,y+"",h,d,se):n,nt=Ge===n;if(nt){var ut=Xt(xe),Et=!ut&&xu(xe),Dt=!ut&&!Et&&bh(xe);Ge=xe,ut||Et||Dt?Xt(ge)?Ge=ge:Fr(ge)?Ge=As(ge):Et?(nt=!1,Ge=YO(xe,!0)):Dt?(nt=!1,Ge=JO(xe,!0)):Ge=[]:Op(xe)||Bc(xe)?(Ge=ge,Bc(ge)?Ge=WT(ge):(!Er(ge)||Al(ge))&&(Ge=pT(xe))):nt=!1}nt&&(se.set(xe,Ge),j(Ge,xe,T,X,se),se.delete(xe)),rx(h,y,Ge)}function FO(h,d){var y=h.length;if(y)return d+=d<0?y:0,_l(d,y)?h[d]:n}function VO(h,d,y){d.length?d=an(d,function(X){return Xt(X)?function(se){return Dc(se,X.length===1?X[0]:X)}:X}):d=[Ps];var T=-1;d=an(d,es(Lt()));var j=RO(h,function(X,se,ge){var xe=an(d,function(We){return We(X)});return{criteria:xe,index:++T,value:X}});return dp(j,function(X,se){return _9(X,se,y)})}function h9(h,d){return BO(h,d,function(y,T){return Vx(h,T)})}function BO(h,d,y){for(var T=-1,j=d.length,X={};++T<j;){var se=d[T],ge=Dc(h,se);y(ge,se)&&Ap(X,bu(se,h),ge)}return X}function d9(h){return function(d){return Dc(d,h)}}function hx(h,d,y,T){var j=T?Li:xs,X=-1,se=d.length,ge=h;for(h===d&&(d=As(d)),y&&(ge=an(h,es(y)));++X<se;)for(var xe=0,We=d[X],Ge=y?y(We):We;(xe=j(ge,Ge,xe,T))>-1;)ge!==h&&Na.call(ge,xe,1),Na.call(h,xe,1);return h}function jO(h,d){for(var y=h?d.length:0,T=y-1;y--;){var j=d[y];if(y==T||j!==X){var X=j;_l(j)?Na.call(h,j,1):mx(h,j)}}return h}function dx(h,d){return h+Ov(xO()*(d-h+1))}function p9(h,d,y,T){for(var j=-1,X=ri(Pv((d-h)/(y||1)),0),se=Ie(X);X--;)se[T?X:++j]=h,h+=y;return se}function px(h,d){var y="";if(!h||d<1||d>Te)return y;do d%2&&(y+=h),d=Ov(d/2),d&&(h+=h);while(d);return y}function sn(h,d){return Mx(vT(h,d,Ps),h+"")}function g9(h){return _O(wh(h))}function m9(h,d){var y=wh(h);return Wv(y,Lc(d,0,y.length))}function Ap(h,d,y,T){if(!Er(h))return h;d=bu(d,h);for(var j=-1,X=d.length,se=X-1,ge=h;ge!=null&&++j<X;){var xe=Ra(d[j]),We=y;if(xe==="__proto__"||xe==="constructor"||xe==="prototype")return h;if(j!=se){var Ge=ge[xe];We=T?T(Ge,xe,ge):n,We===n&&(We=Er(Ge)?Ge:_l(d[j+1])?[]:{})}xp(ge,xe,We),ge=ge[xe]}return h}var zO=Tv?function(h,d){return Tv.set(h,d),h}:Ps,v9=Cv?function(h,d){return Cv(h,"toString",{configurable:!0,enumerable:!1,value:jx(d),writable:!0})}:Ps;function y9(h){return Wv(wh(h))}function Po(h,d,y){var T=-1,j=h.length;d<0&&(d=-d>j?0:j+d),y=y>j?j:y,y<0&&(y+=j),j=d>y?0:y-d>>>0,d>>>=0;for(var X=Ie(j);++T<j;)X[T]=h[T+d];return X}function b9(h,d){var y;return vu(h,function(T,j,X){return y=d(T,j,X),!y}),!!y}function Dv(h,d,y){var T=0,j=h==null?T:h.length;if(typeof d=="number"&&d===d&&j<=ee){for(;T<j;){var X=T+j>>>1,se=h[X];se!==null&&!eo(se)&&(y?se<=d:se<d)?T=X+1:j=X}return j}return gx(h,d,Ps,y)}function gx(h,d,y,T){var j=0,X=h==null?0:h.length;if(X===0)return 0;d=y(d);for(var se=d!==d,ge=d===null,xe=eo(d),We=d===n;j<X;){var Ge=Ov((j+X)/2),nt=y(h[Ge]),ut=nt!==n,Et=nt===null,Dt=nt===nt,tn=eo(nt);if(se)var Ft=T||Dt;else We?Ft=Dt&&(T||ut):ge?Ft=Dt&&ut&&(T||!Et):xe?Ft=Dt&&ut&&!Et&&(T||!tn):Et||tn?Ft=!1:Ft=T?nt<=d:nt<d;Ft?j=Ge+1:X=Ge}return Vi(X,ne)}function HO(h,d){for(var y=-1,T=h.length,j=0,X=[];++y<T;){var se=h[y],ge=d?d(se):se;if(!y||!ra(ge,xe)){var xe=ge;X[j++]=se===0?0:se}}return X}function UO(h){return typeof h=="number"?h:eo(h)?Ee:+h}function Qs(h){if(typeof h=="string")return h;if(Xt(h))return an(h,Qs)+"";if(eo(h))return SO?SO.call(h):"";var d=h+"";return d=="0"&&1/h==-_e?"-0":d}function yu(h,d,y){var T=-1,j=yr,X=h.length,se=!0,ge=[],xe=ge;if(y)se=!1,j=br;else if(X>=i){var We=d?null:T9(h);if(We)return Mc(We);se=!1,j=Pc,xe=new Rc}else xe=d?[]:ge;e:for(;++T<X;){var Ge=h[T],nt=d?d(Ge):Ge;if(Ge=y||Ge!==0?Ge:0,se&&nt===nt){for(var ut=xe.length;ut--;)if(xe[ut]===nt)continue e;d&&xe.push(nt),ge.push(Ge)}else j(xe,nt,y)||(xe!==ge&&xe.push(nt),ge.push(Ge))}return ge}function mx(h,d){return d=bu(d,h),h=yT(h,d),h==null||delete h[Ra(Oo(d))]}function qO(h,d,y,T){return Ap(h,d,y(Dc(h,d)),T)}function Fv(h,d,y,T){for(var j=h.length,X=T?j:-1;(T?X--:++X<j)&&d(h[X],X,h););return y?Po(h,T?0:X,T?X+1:j):Po(h,T?X+1:0,T?j:X)}function WO(h,d){var y=h;return y instanceof yn&&(y=y.value()),jt(d,function(T,j){return j.func.apply(j.thisArg,hn([T],j.args))},y)}function vx(h,d,y){var T=h.length;if(T<2)return T?yu(h[0]):[];for(var j=-1,X=Ie(T);++j<T;)for(var se=h[j],ge=-1;++ge<T;)ge!=j&&(X[j]=Sp(X[j]||se,h[ge],d,y));return yu(wi(X,1),d,y)}function GO(h,d,y){for(var T=-1,j=h.length,X=d.length,se={};++T<j;){var ge=T<X?d[T]:n;y(se,h[T],ge)}return se}function yx(h){return Fr(h)?h:[]}function bx(h){return typeof h=="function"?h:Ps}function bu(h,d){return Xt(h)?h:Px(h,d)?[h]:ST(zn(h))}var w9=sn;function wu(h,d,y){var T=h.length;return y=y===n?T:y,!d&&y>=T?h:Po(h,d,y)}var KO=az||function(h){return ti.clearTimeout(h)};function YO(h,d){if(d)return h.slice();var y=h.length,T=Tr?Tr(y):new h.constructor(y);return h.copy(T),T}function wx(h){var d=new h.constructor(h.byteLength);return new Ct(d).set(new Ct(h)),d}function x9(h,d){var y=d?wx(h.buffer):h.buffer;return new h.constructor(y,h.byteOffset,h.byteLength)}function S9(h){var d=new h.constructor(h.source,Bn.exec(h));return d.lastIndex=h.lastIndex,d}function E9(h){return wp?$n(wp.call(h)):{}}function JO(h,d){var y=d?wx(h.buffer):h.buffer;return new h.constructor(y,h.byteOffset,h.length)}function XO(h,d){if(h!==d){var y=h!==n,T=h===null,j=h===h,X=eo(h),se=d!==n,ge=d===null,xe=d===d,We=eo(d);if(!ge&&!We&&!X&&h>d||X&&se&&xe&&!ge&&!We||T&&se&&xe||!y&&xe||!j)return 1;if(!T&&!X&&!We&&h<d||We&&y&&j&&!T&&!X||ge&&y&&j||!se&&j||!xe)return-1}return 0}function _9(h,d,y){for(var T=-1,j=h.criteria,X=d.criteria,se=j.length,ge=y.length;++T<se;){var xe=XO(j[T],X[T]);if(xe){if(T>=ge)return xe;var We=y[T];return xe*(We=="desc"?-1:1)}}return h.index-d.index}function ZO(h,d,y,T){for(var j=-1,X=h.length,se=y.length,ge=-1,xe=d.length,We=ri(X-se,0),Ge=Ie(xe+We),nt=!T;++ge<xe;)Ge[ge]=d[ge];for(;++j<se;)(nt||j<X)&&(Ge[y[j]]=h[j]);for(;We--;)Ge[ge++]=h[j++];return Ge}function QO(h,d,y,T){for(var j=-1,X=h.length,se=-1,ge=y.length,xe=-1,We=d.length,Ge=ri(X-ge,0),nt=Ie(Ge+We),ut=!T;++j<Ge;)nt[j]=h[j];for(var Et=j;++xe<We;)nt[Et+xe]=d[xe];for(;++se<ge;)(ut||j<X)&&(nt[Et+y[se]]=h[j++]);return nt}function As(h,d){var y=-1,T=h.length;for(d||(d=Ie(T));++y<T;)d[y]=h[y];return d}function $a(h,d,y,T){var j=!y;y||(y={});for(var X=-1,se=d.length;++X<se;){var ge=d[X],xe=T?T(y[ge],h[ge],ge,y,h):n;xe===n&&(xe=h[ge]),j?xl(y,ge,xe):xp(y,ge,xe)}return y}function A9(h,d){return $a(h,Cx(h),d)}function k9(h,d){return $a(h,hT(h),d)}function Vv(h,d){return function(y,T){var j=Xt(y)?Ce:Kz,X=d?d():{};return j(y,h,Lt(T,2),X)}}function mh(h){return sn(function(d,y){var T=-1,j=y.length,X=j>1?y[j-1]:n,se=j>2?y[2]:n;for(X=h.length>3&&typeof X=="function"?(j--,X):n,se&&ns(y[0],y[1],se)&&(X=j<3?n:X,j=1),d=$n(d);++T<j;){var ge=y[T];ge&&h(d,ge,T,X)}return d})}function eT(h,d){return function(y,T){if(y==null)return y;if(!ks(y))return h(y,T);for(var j=y.length,X=d?j:-1,se=$n(y);(d?X--:++X<j)&&T(se[X],X,se)!==!1;);return y}}function tT(h){return function(d,y,T){for(var j=-1,X=$n(d),se=T(d),ge=se.length;ge--;){var xe=se[h?ge:++j];if(y(X[xe],xe,X)===!1)break}return d}}function C9(h,d,y){var T=d&P,j=kp(h);function X(){var se=this&&this!==ti&&this instanceof X?j:h;return se.apply(T?y:this,arguments)}return X}function nT(h){return function(d){d=zn(d);var y=gu(d)?Di(d):n,T=y?y[0]:d.charAt(0),j=y?wu(y,1).join(""):d.slice(1);return T[h]()+j}}function vh(h){return function(d){return jt(e2(QT(d).replace(Bw,"")),h,"")}}function kp(h){return function(){var d=arguments;switch(d.length){case 0:return new h;case 1:return new h(d[0]);case 2:return new h(d[0],d[1]);case 3:return new h(d[0],d[1],d[2]);case 4:return new h(d[0],d[1],d[2],d[3]);case 5:return new h(d[0],d[1],d[2],d[3],d[4]);case 6:return new h(d[0],d[1],d[2],d[3],d[4],d[5]);case 7:return new h(d[0],d[1],d[2],d[3],d[4],d[5],d[6])}var y=gh(h.prototype),T=h.apply(y,d);return Er(T)?T:y}}function P9(h,d,y){var T=kp(h);function j(){for(var X=arguments.length,se=Ie(X),ge=X,xe=yh(j);ge--;)se[ge]=arguments[ge];var We=X<3&&se[0]!==xe&&se[X-1]!==xe?[]:di(se,xe);if(X-=We.length,X<y)return aT(h,d,Bv,j.placeholder,n,se,We,n,n,y-X);var Ge=this&&this!==ti&&this instanceof j?T:h;return qe(Ge,this,se)}return j}function rT(h){return function(d,y,T){var j=$n(d);if(!ks(d)){var X=Lt(y,3);d=pi(d),y=function(ge){return X(j[ge],ge,j)}}var se=h(d,y,T);return se>-1?j[X?d[se]:se]:n}}function iT(h){return El(function(d){var y=d.length,T=y,j=ko.prototype.thru;for(h&&d.reverse();T--;){var X=d[T];if(typeof X!="function")throw new _s(o);if(j&&!se&&Uv(X)=="wrapper")var se=new ko([],!0)}for(T=se?T:y;++T<y;){X=d[T];var ge=Uv(X),xe=ge=="wrapper"?Ax(X):n;xe&&Ox(xe[0])&&xe[1]==(_|I|x|M)&&!xe[4].length&&xe[9]==1?se=se[Uv(xe[0])].apply(se,xe[3]):se=X.length==1&&Ox(X)?se[ge]():se.thru(X)}return function(){var We=arguments,Ge=We[0];if(se&&We.length==1&&Xt(Ge))return se.plant(Ge).value();for(var nt=0,ut=y?d[nt].apply(this,We):Ge;++nt<y;)ut=d[nt].call(this,ut);return ut}})}function Bv(h,d,y,T,j,X,se,ge,xe,We){var Ge=d&_,nt=d&P,ut=d&S,Et=d&(I|N),Dt=d&D,tn=ut?n:kp(h);function Ft(){for(var pn=arguments.length,An=Ie(pn),to=pn;to--;)An[to]=arguments[to];if(Et)var rs=yh(Ft),no=Ww(An,rs);if(T&&(An=ZO(An,T,j,Et)),X&&(An=QO(An,X,se,Et)),pn-=no,Et&&pn<We){var Vr=di(An,rs);return aT(h,d,Bv,Ft.placeholder,y,An,Vr,ge,xe,We-pn)}var ia=nt?y:this,Cl=ut?ia[h]:h;return pn=An.length,ge?An=K9(An,ge):Dt&&pn>1&&An.reverse(),Ge&&xe<pn&&(An.length=xe),this&&this!==ti&&this instanceof Ft&&(Cl=tn||kp(Cl)),Cl.apply(ia,An)}return Ft}function sT(h,d){return function(y,T){return n9(y,h,d(T),{})}}function jv(h,d){return function(y,T){var j;if(y===n&&T===n)return d;if(y!==n&&(j=y),T!==n){if(j===n)return T;typeof y=="string"||typeof T=="string"?(y=Qs(y),T=Qs(T)):(y=UO(y),T=UO(T)),j=h(y,T)}return j}}function xx(h){return El(function(d){return d=an(d,es(Lt())),sn(function(y){var T=this;return h(d,function(j){return qe(j,T,y)})})})}function zv(h,d){d=d===n?" ":Qs(d);var y=d.length;if(y<2)return y?px(d,h):d;var T=px(d,Pv(h/Tn(d)));return gu(d)?wu(Di(T),0,h).join(""):T.slice(0,h)}function O9(h,d,y,T){var j=d&P,X=kp(h);function se(){for(var ge=-1,xe=arguments.length,We=-1,Ge=T.length,nt=Ie(Ge+xe),ut=this&&this!==ti&&this instanceof se?X:h;++We<Ge;)nt[We]=T[We];for(;xe--;)nt[We++]=arguments[++ge];return qe(ut,j?y:this,nt)}return se}function oT(h){return function(d,y,T){return T&&typeof T!="number"&&ns(d,y,T)&&(y=T=n),d=kl(d),y===n?(y=d,d=0):y=kl(y),T=T===n?d<y?1:-1:kl(T),p9(d,y,T,h)}}function Hv(h){return function(d,y){return typeof d=="string"&&typeof y=="string"||(d=To(d),y=To(y)),h(d,y)}}function aT(h,d,y,T,j,X,se,ge,xe,We){var Ge=d&I,nt=Ge?se:n,ut=Ge?n:se,Et=Ge?X:n,Dt=Ge?n:X;d|=Ge?x:g,d&=~(Ge?g:x),d&A||(d&=~(P|S));var tn=[h,d,j,Et,nt,Dt,ut,ge,xe,We],Ft=y.apply(n,tn);return Ox(h)&&bT(Ft,tn),Ft.placeholder=T,wT(Ft,h,d)}function Sx(h){var d=Lr[h];return function(y,T){if(y=To(y),T=T==null?0:Vi(Zt(T),292),T&&wO(y)){var j=(zn(y)+"e").split("e"),X=d(j[0]+"e"+(+j[1]+T));return j=(zn(X)+"e").split("e"),+(j[0]+"e"+(+j[1]-T))}return d(y)}}var T9=dh&&1/Mc(new dh([,-0]))[1]==_e?function(h){return new dh(h)}:Ux;function lT(h){return function(d){var y=Bi(d);return y==C?Tc(d):y==Ae?_v(d):Sv(d,h(d))}}function Sl(h,d,y,T,j,X,se,ge){var xe=d&S;if(!xe&&typeof h!="function")throw new _s(o);var We=T?T.length:0;if(We||(d&=~(x|g),T=j=n),se=se===n?se:ri(Zt(se),0),ge=ge===n?ge:Zt(ge),We-=j?j.length:0,d&g){var Ge=T,nt=j;T=j=n}var ut=xe?n:Ax(h),Et=[h,d,y,T,j,Ge,nt,X,se,ge];if(ut&&q9(Et,ut),h=Et[0],d=Et[1],y=Et[2],T=Et[3],j=Et[4],ge=Et[9]=Et[9]===n?xe?0:h.length:ri(Et[9]-We,0),!ge&&d&(I|N)&&(d&=~(I|N)),!d||d==P)var Dt=C9(h,d,y);else d==I||d==N?Dt=P9(h,d,ge):(d==x||d==(P|x))&&!j.length?Dt=O9(h,d,y,T):Dt=Bv.apply(n,Et);var tn=ut?zO:bT;return wT(tn(Dt,Et),h,d)}function uT(h,d,y,T){return h===n||ra(h,me[y])&&!Ne.call(T,y)?d:h}function cT(h,d,y,T,j,X){return Er(h)&&Er(d)&&(X.set(d,h),Lv(h,d,n,cT,X),X.delete(d)),h}function M9(h){return Op(h)?n:h}function fT(h,d,y,T,j,X){var se=y&b,ge=h.length,xe=d.length;if(ge!=xe&&!(se&&xe>ge))return!1;var We=X.get(h),Ge=X.get(d);if(We&&Ge)return We==d&&Ge==h;var nt=-1,ut=!0,Et=y&E?new Rc:n;for(X.set(h,d),X.set(d,h);++nt<ge;){var Dt=h[nt],tn=d[nt];if(T)var Ft=se?T(tn,Dt,nt,d,h,X):T(Dt,tn,nt,h,d,X);if(Ft!==n){if(Ft)continue;ut=!1;break}if(Et){if(!dn(d,function(pn,An){if(!Pc(Et,An)&&(Dt===pn||j(Dt,pn,y,T,X)))return Et.push(An)})){ut=!1;break}}else if(!(Dt===tn||j(Dt,tn,y,T,X))){ut=!1;break}}return X.delete(h),X.delete(d),ut}function N9(h,d,y,T,j,X,se){switch(y){case Vt:if(h.byteLength!=d.byteLength||h.byteOffset!=d.byteOffset)return!1;h=h.buffer,d=d.buffer;case Nt:return!(h.byteLength!=d.byteLength||!X(new Ct(h),new Ct(d)));case He:case Be:case $:return ra(+h,+d);case Ve:return h.name==d.name&&h.message==d.message;case ke:case tt:return h==d+"";case C:var ge=Tc;case Ae:var xe=T&b;if(ge||(ge=Mc),h.size!=d.size&&!xe)return!1;var We=se.get(h);if(We)return We==d;T|=E,se.set(h,d);var Ge=fT(ge(h),ge(d),T,j,X,se);return se.delete(h),Ge;case Je:if(wp)return wp.call(h)==wp.call(d)}return!1}function I9(h,d,y,T,j,X){var se=y&b,ge=Ex(h),xe=ge.length,We=Ex(d),Ge=We.length;if(xe!=Ge&&!se)return!1;for(var nt=xe;nt--;){var ut=ge[nt];if(!(se?ut in d:Ne.call(d,ut)))return!1}var Et=X.get(h),Dt=X.get(d);if(Et&&Dt)return Et==d&&Dt==h;var tn=!0;X.set(h,d),X.set(d,h);for(var Ft=se;++nt<xe;){ut=ge[nt];var pn=h[ut],An=d[ut];if(T)var to=se?T(An,pn,ut,d,h,X):T(pn,An,ut,h,d,X);if(!(to===n?pn===An||j(pn,An,y,T,X):to)){tn=!1;break}Ft||(Ft=ut=="constructor")}if(tn&&!Ft){var rs=h.constructor,no=d.constructor;rs!=no&&"constructor"in h&&"constructor"in d&&!(typeof rs=="function"&&rs instanceof rs&&typeof no=="function"&&no instanceof no)&&(tn=!1)}return X.delete(h),X.delete(d),tn}function El(h){return Mx(vT(h,n,kT),h+"")}function Ex(h){return MO(h,pi,Cx)}function _x(h){return MO(h,Cs,hT)}var Ax=Tv?function(h){return Tv.get(h)}:Ux;function Uv(h){for(var d=h.name+"",y=ph[d],T=Ne.call(ph,d)?y.length:0;T--;){var j=y[T],X=j.func;if(X==null||X==h)return j.name}return d}function yh(h){var d=Ne.call(Y,"placeholder")?Y:h;return d.placeholder}function Lt(){var h=Y.iteratee||zx;return h=h===zx?$O:h,arguments.length?h(arguments[0],arguments[1]):h}function qv(h,d){var y=h.__data__;return j9(d)?y[typeof d=="string"?"string":"hash"]:y.map}function kx(h){for(var d=pi(h),y=d.length;y--;){var T=d[y],j=h[T];d[y]=[T,j,gT(j)]}return d}function Fc(h,d){var y=Yw(h,d);return IO(y)?y:n}function $9(h){var d=Ne.call(h,Ic),y=h[Ic];try{h[Ic]=n;var T=!0}catch{}var j=ot.call(h);return T&&(d?h[Ic]=y:delete h[Ic]),j}var Cx=ex?function(h){return h==null?[]:(h=$n(h),dt(ex(h),function(d){return er.call(h,d)}))}:qx,hT=ex?function(h){for(var d=[];h;)hn(d,Cx(h)),h=Dr(h);return d}:qx,Bi=ts;(tx&&Bi(new tx(new ArrayBuffer(1)))!=Vt||vp&&Bi(new vp)!=C||nx&&Bi(nx.resolve())!=ce||dh&&Bi(new dh)!=Ae||yp&&Bi(new yp)!=Ye)&&(Bi=function(h){var d=ts(h),y=d==Q?h.constructor:n,T=y?Vc(y):"";if(T)switch(T){case mz:return Vt;case vz:return C;case yz:return ce;case bz:return Ae;case wz:return Ye}return d});function R9(h,d,y){for(var T=-1,j=y.length;++T<j;){var X=y[T],se=X.size;switch(X.type){case"drop":h+=se;break;case"dropRight":d-=se;break;case"take":d=Vi(d,h+se);break;case"takeRight":h=ri(h,d-se);break}}return{start:h,end:d}}function L9(h){var d=h.match(pe);return d?d[1].split(Me):[]}function dT(h,d,y){d=bu(d,h);for(var T=-1,j=d.length,X=!1;++T<j;){var se=Ra(d[T]);if(!(X=h!=null&&y(h,se)))break;h=h[se]}return X||++T!=j?X:(j=h==null?0:h.length,!!j&&Zv(j)&&_l(se,j)&&(Xt(h)||Bc(h)))}function D9(h){var d=h.length,y=new h.constructor(d);return d&&typeof h[0]=="string"&&Ne.call(h,"index")&&(y.index=h.index,y.input=h.input),y}function pT(h){return typeof h.constructor=="function"&&!Cp(h)?gh(Dr(h)):{}}function F9(h,d,y){var T=h.constructor;switch(d){case Nt:return wx(h);case He:case Be:return new T(+h);case Vt:return x9(h,y);case yt:case Gt:case qn:case Or:case ir:case yi:case Qn:case Sn:case En:return JO(h,y);case C:return new T;case $:case tt:return new T(h);case ke:return S9(h);case Ae:return new T;case Je:return E9(h)}}function V9(h,d){var y=d.length;if(!y)return h;var T=y-1;return d[T]=(y>1?"& ":"")+d[T],d=d.join(y>2?", ":" "),h.replace(te,`{
/* [wrapped with `+d+`] */
`)}function B9(h){return Xt(h)||Bc(h)||!!(mu&&h&&h[mu])}function _l(h,d){var y=typeof h;return d=d??Te,!!d&&(y=="number"||y!="symbol"&&Bt.test(h))&&h>-1&&h%1==0&&h<d}function ns(h,d,y){if(!Er(y))return!1;var T=typeof d;return(T=="number"?ks(y)&&_l(d,y.length):T=="string"&&d in y)?ra(y[d],h):!1}function Px(h,d){if(Xt(h))return!1;var y=typeof h;return y=="number"||y=="symbol"||y=="boolean"||h==null||eo(h)?!0:oh.test(h)||!xc.test(h)||d!=null&&h in $n(d)}function j9(h){var d=typeof h;return d=="string"||d=="number"||d=="symbol"||d=="boolean"?h!=="__proto__":h===null}function Ox(h){var d=Uv(h),y=Y[d];if(typeof y!="function"||!(d in yn.prototype))return!1;if(h===y)return!0;var T=Ax(y);return!!T&&h===T[0]}function z9(h){return!!it&&it in h}var H9=Ue?Al:Wx;function Cp(h){var d=h&&h.constructor,y=typeof d=="function"&&d.prototype||me;return h===y}function gT(h){return h===h&&!Er(h)}function mT(h,d){return function(y){return y==null?!1:y[h]===d&&(d!==n||h in $n(y))}}function U9(h){var d=Jv(h,function(T){return y.size===u&&y.clear(),T}),y=d.cache;return d}function q9(h,d){var y=h[1],T=d[1],j=y|T,X=j<(P|S|_),se=T==_&&y==I||T==_&&y==M&&h[7].length<=d[8]||T==(_|M)&&d[7].length<=d[8]&&y==I;if(!(X||se))return h;T&P&&(h[2]=d[2],j|=y&P?0:A);var ge=d[3];if(ge){var xe=h[3];h[3]=xe?ZO(xe,ge,d[4]):ge,h[4]=xe?di(h[3],c):d[4]}return ge=d[5],ge&&(xe=h[5],h[5]=xe?QO(xe,ge,d[6]):ge,h[6]=xe?di(h[5],c):d[6]),ge=d[7],ge&&(h[7]=ge),T&_&&(h[8]=h[8]==null?d[8]:Vi(h[8],d[8])),h[9]==null&&(h[9]=d[9]),h[0]=d[0],h[1]=j,h}function W9(h){var d=[];if(h!=null)for(var y in $n(h))d.push(y);return d}function G9(h){return ot.call(h)}function vT(h,d,y){return d=ri(d===n?h.length-1:d,0),function(){for(var T=arguments,j=-1,X=ri(T.length-d,0),se=Ie(X);++j<X;)se[j]=T[d+j];j=-1;for(var ge=Ie(d+1);++j<d;)ge[j]=T[j];return ge[d]=y(se),qe(h,this,ge)}}function yT(h,d){return d.length<2?h:Dc(h,Po(d,0,-1))}function K9(h,d){for(var y=h.length,T=Vi(d.length,y),j=As(h);T--;){var X=d[T];h[T]=_l(X,y)?j[X]:n}return h}function Tx(h,d){if(!(d==="constructor"&&typeof h[d]=="function")&&d!="__proto__")return h[d]}var bT=xT(zO),Pp=uz||function(h,d){return ti.setTimeout(h,d)},Mx=xT(v9);function wT(h,d,y){var T=d+"";return Mx(h,V9(T,Y9(L9(T),y)))}function xT(h){var d=0,y=0;return function(){var T=dz(),j=G-(T-y);if(y=T,j>0){if(++d>=W)return arguments[0]}else d=0;return h.apply(n,arguments)}}function Wv(h,d){var y=-1,T=h.length,j=T-1;for(d=d===n?T:d;++y<d;){var X=dx(y,j),se=h[X];h[X]=h[y],h[y]=se}return h.length=d,h}var ST=U9(function(h){var d=[];return h.charCodeAt(0)===46&&d.push(""),h.replace(np,function(y,T,j,X){d.push(j?X.replace(xt,"$1"):T||y)}),d});function Ra(h){if(typeof h=="string"||eo(h))return h;var d=h+"";return d=="0"&&1/h==-_e?"-0":d}function Vc(h){if(h!=null){try{return we.call(h)}catch{}try{return h+""}catch{}}return""}function Y9(h,d){return Re(F,function(y){var T="_."+y[0];d&y[1]&&!yr(h,T)&&h.push(T)}),h.sort()}function ET(h){if(h instanceof yn)return h.clone();var d=new ko(h.__wrapped__,h.__chain__);return d.__actions__=As(h.__actions__),d.__index__=h.__index__,d.__values__=h.__values__,d}function J9(h,d,y){(y?ns(h,d,y):d===n)?d=1:d=ri(Zt(d),0);var T=h==null?0:h.length;if(!T||d<1)return[];for(var j=0,X=0,se=Ie(Pv(T/d));j<T;)se[X++]=Po(h,j,j+=d);return se}function X9(h){for(var d=-1,y=h==null?0:h.length,T=0,j=[];++d<y;){var X=h[d];X&&(j[T++]=X)}return j}function Z9(){var h=arguments.length;if(!h)return[];for(var d=Ie(h-1),y=arguments[0],T=h;T--;)d[T-1]=arguments[T];return hn(Xt(y)?As(y):[y],wi(d,1))}var Q9=sn(function(h,d){return Fr(h)?Sp(h,wi(d,1,Fr,!0)):[]}),eH=sn(function(h,d){var y=Oo(d);return Fr(y)&&(y=n),Fr(h)?Sp(h,wi(d,1,Fr,!0),Lt(y,2)):[]}),tH=sn(function(h,d){var y=Oo(d);return Fr(y)&&(y=n),Fr(h)?Sp(h,wi(d,1,Fr,!0),n,y):[]});function nH(h,d,y){var T=h==null?0:h.length;return T?(d=y||d===n?1:Zt(d),Po(h,d<0?0:d,T)):[]}function rH(h,d,y){var T=h==null?0:h.length;return T?(d=y||d===n?1:Zt(d),d=T-d,Po(h,0,d<0?0:d)):[]}function iH(h,d){return h&&h.length?Fv(h,Lt(d,3),!0,!0):[]}function sH(h,d){return h&&h.length?Fv(h,Lt(d,3),!0):[]}function oH(h,d,y,T){var j=h==null?0:h.length;return j?(y&&typeof y!="number"&&ns(h,d,y)&&(y=0,T=j),Zz(h,d,y,T)):[]}function _T(h,d,y){var T=h==null?0:h.length;if(!T)return-1;var j=y==null?0:Zt(y);return j<0&&(j=ri(T+j,0)),Eo(h,Lt(d,3),j)}function AT(h,d,y){var T=h==null?0:h.length;if(!T)return-1;var j=T-1;return y!==n&&(j=Zt(y),j=y<0?ri(T+j,0):Vi(j,T-1)),Eo(h,Lt(d,3),j,!0)}function kT(h){var d=h==null?0:h.length;return d?wi(h,1):[]}function aH(h){var d=h==null?0:h.length;return d?wi(h,_e):[]}function lH(h,d){var y=h==null?0:h.length;return y?(d=d===n?1:Zt(d),wi(h,d)):[]}function uH(h){for(var d=-1,y=h==null?0:h.length,T={};++d<y;){var j=h[d];T[j[0]]=j[1]}return T}function CT(h){return h&&h.length?h[0]:n}function cH(h,d,y){var T=h==null?0:h.length;if(!T)return-1;var j=y==null?0:Zt(y);return j<0&&(j=ri(T+j,0)),xs(h,d,j)}function fH(h){var d=h==null?0:h.length;return d?Po(h,0,-1):[]}var hH=sn(function(h){var d=an(h,yx);return d.length&&d[0]===h[0]?lx(d):[]}),dH=sn(function(h){var d=Oo(h),y=an(h,yx);return d===Oo(y)?d=n:y.pop(),y.length&&y[0]===h[0]?lx(y,Lt(d,2)):[]}),pH=sn(function(h){var d=Oo(h),y=an(h,yx);return d=typeof d=="function"?d:n,d&&y.pop(),y.length&&y[0]===h[0]?lx(y,n,d):[]});function gH(h,d){return h==null?"":fz.call(h,d)}function Oo(h){var d=h==null?0:h.length;return d?h[d-1]:n}function mH(h,d,y){var T=h==null?0:h.length;if(!T)return-1;var j=T;return y!==n&&(j=Zt(y),j=j<0?ri(T+j,0):Vi(j,T-1)),d===d?Xw(h,d,j):Eo(h,ea,j,!0)}function vH(h,d){return h&&h.length?FO(h,Zt(d)):n}var yH=sn(PT);function PT(h,d){return h&&h.length&&d&&d.length?hx(h,d):h}function bH(h,d,y){return h&&h.length&&d&&d.length?hx(h,d,Lt(y,2)):h}function wH(h,d,y){return h&&h.length&&d&&d.length?hx(h,d,n,y):h}var xH=El(function(h,d){var y=h==null?0:h.length,T=ix(h,d);return jO(h,an(d,function(j){return _l(j,y)?+j:j}).sort(XO)),T});function SH(h,d){var y=[];if(!(h&&h.length))return y;var T=-1,j=[],X=h.length;for(d=Lt(d,3);++T<X;){var se=h[T];d(se,T,h)&&(y.push(se),j.push(T))}return jO(h,j),y}function Nx(h){return h==null?h:gz.call(h)}function EH(h,d,y){var T=h==null?0:h.length;return T?(y&&typeof y!="number"&&ns(h,d,y)?(d=0,y=T):(d=d==null?0:Zt(d),y=y===n?T:Zt(y)),Po(h,d,y)):[]}function _H(h,d){return Dv(h,d)}function AH(h,d,y){return gx(h,d,Lt(y,2))}function kH(h,d){var y=h==null?0:h.length;if(y){var T=Dv(h,d);if(T<y&&ra(h[T],d))return T}return-1}function CH(h,d){return Dv(h,d,!0)}function PH(h,d,y){return gx(h,d,Lt(y,2),!0)}function OH(h,d){var y=h==null?0:h.length;if(y){var T=Dv(h,d,!0)-1;if(ra(h[T],d))return T}return-1}function TH(h){return h&&h.length?HO(h):[]}function MH(h,d){return h&&h.length?HO(h,Lt(d,2)):[]}function NH(h){var d=h==null?0:h.length;return d?Po(h,1,d):[]}function IH(h,d,y){return h&&h.length?(d=y||d===n?1:Zt(d),Po(h,0,d<0?0:d)):[]}function $H(h,d,y){var T=h==null?0:h.length;return T?(d=y||d===n?1:Zt(d),d=T-d,Po(h,d<0?0:d,T)):[]}function RH(h,d){return h&&h.length?Fv(h,Lt(d,3),!1,!0):[]}function LH(h,d){return h&&h.length?Fv(h,Lt(d,3)):[]}var DH=sn(function(h){return yu(wi(h,1,Fr,!0))}),FH=sn(function(h){var d=Oo(h);return Fr(d)&&(d=n),yu(wi(h,1,Fr,!0),Lt(d,2))}),VH=sn(function(h){var d=Oo(h);return d=typeof d=="function"?d:n,yu(wi(h,1,Fr,!0),n,d)});function BH(h){return h&&h.length?yu(h):[]}function jH(h,d){return h&&h.length?yu(h,Lt(d,2)):[]}function zH(h,d){return d=typeof d=="function"?d:n,h&&h.length?yu(h,n,d):[]}function Ix(h){if(!(h&&h.length))return[];var d=0;return h=dt(h,function(y){if(Fr(y))return d=ri(y.length,d),!0}),ta(d,function(y){return an(h,_o(y))})}function OT(h,d){if(!(h&&h.length))return[];var y=Ix(h);return d==null?y:an(y,function(T){return qe(d,n,T)})}var HH=sn(function(h,d){return Fr(h)?Sp(h,d):[]}),UH=sn(function(h){return vx(dt(h,Fr))}),qH=sn(function(h){var d=Oo(h);return Fr(d)&&(d=n),vx(dt(h,Fr),Lt(d,2))}),WH=sn(function(h){var d=Oo(h);return d=typeof d=="function"?d:n,vx(dt(h,Fr),n,d)}),GH=sn(Ix);function KH(h,d){return GO(h||[],d||[],xp)}function YH(h,d){return GO(h||[],d||[],Ap)}var JH=sn(function(h){var d=h.length,y=d>1?h[d-1]:n;return y=typeof y=="function"?(h.pop(),y):n,OT(h,y)});function TT(h){var d=Y(h);return d.__chain__=!0,d}function XH(h,d){return d(h),h}function Gv(h,d){return d(h)}var ZH=El(function(h){var d=h.length,y=d?h[0]:0,T=this.__wrapped__,j=function(X){return ix(X,h)};return d>1||this.__actions__.length||!(T instanceof yn)||!_l(y)?this.thru(j):(T=T.slice(y,+y+(d?1:0)),T.__actions__.push({func:Gv,args:[j],thisArg:n}),new ko(T,this.__chain__).thru(function(X){return d&&!X.length&&X.push(n),X}))});function QH(){return TT(this)}function e7(){return new ko(this.value(),this.__chain__)}function t7(){this.__values__===n&&(this.__values__=UT(this.value()));var h=this.__index__>=this.__values__.length,d=h?n:this.__values__[this.__index__++];return{done:h,value:d}}function n7(){return this}function r7(h){for(var d,y=this;y instanceof Nv;){var T=ET(y);T.__index__=0,T.__values__=n,d?j.__wrapped__=T:d=T;var j=T;y=y.__wrapped__}return j.__wrapped__=h,d}function i7(){var h=this.__wrapped__;if(h instanceof yn){var d=h;return this.__actions__.length&&(d=new yn(this)),d=d.reverse(),d.__actions__.push({func:Gv,args:[Nx],thisArg:n}),new ko(d,this.__chain__)}return this.thru(Nx)}function s7(){return WO(this.__wrapped__,this.__actions__)}var o7=Vv(function(h,d,y){Ne.call(h,y)?++h[y]:xl(h,y,1)});function a7(h,d,y){var T=Xt(h)?Ht:Xz;return y&&ns(h,d,y)&&(d=n),T(h,Lt(d,3))}function l7(h,d){var y=Xt(h)?dt:OO;return y(h,Lt(d,3))}var u7=rT(_T),c7=rT(AT);function f7(h,d){return wi(Kv(h,d),1)}function h7(h,d){return wi(Kv(h,d),_e)}function d7(h,d,y){return y=y===n?1:Zt(y),wi(Kv(h,d),y)}function MT(h,d){var y=Xt(h)?Re:vu;return y(h,Lt(d,3))}function NT(h,d){var y=Xt(h)?At:PO;return y(h,Lt(d,3))}var p7=Vv(function(h,d,y){Ne.call(h,y)?h[y].push(d):xl(h,y,[d])});function g7(h,d,y,T){h=ks(h)?h:wh(h),y=y&&!T?Zt(y):0;var j=h.length;return y<0&&(y=ri(j+y,0)),Qv(h)?y<=j&&h.indexOf(d,y)>-1:!!j&&xs(h,d,y)>-1}var m7=sn(function(h,d,y){var T=-1,j=typeof d=="function",X=ks(h)?Ie(h.length):[];return vu(h,function(se){X[++T]=j?qe(d,se,y):Ep(se,d,y)}),X}),v7=Vv(function(h,d,y){xl(h,y,d)});function Kv(h,d){var y=Xt(h)?an:RO;return y(h,Lt(d,3))}function y7(h,d,y,T){return h==null?[]:(Xt(d)||(d=d==null?[]:[d]),y=T?n:y,Xt(y)||(y=y==null?[]:[y]),VO(h,d,y))}var b7=Vv(function(h,d,y){h[y?0:1].push(d)},function(){return[[],[]]});function w7(h,d,y){var T=Xt(h)?jt:Ma,j=arguments.length<3;return T(h,Lt(d,4),y,j,vu)}function x7(h,d,y){var T=Xt(h)?$i:Ma,j=arguments.length<3;return T(h,Lt(d,4),y,j,PO)}function S7(h,d){var y=Xt(h)?dt:OO;return y(h,Xv(Lt(d,3)))}function E7(h){var d=Xt(h)?_O:g9;return d(h)}function _7(h,d,y){(y?ns(h,d,y):d===n)?d=1:d=Zt(d);var T=Xt(h)?Wz:m9;return T(h,d)}function A7(h){var d=Xt(h)?Gz:y9;return d(h)}function k7(h){if(h==null)return 0;if(ks(h))return Qv(h)?Tn(h):h.length;var d=Bi(h);return d==C||d==Ae?h.size:cx(h).length}function C7(h,d,y){var T=Xt(h)?dn:b9;return y&&ns(h,d,y)&&(d=n),T(h,Lt(d,3))}var P7=sn(function(h,d){if(h==null)return[];var y=d.length;return y>1&&ns(h,d[0],d[1])?d=[]:y>2&&ns(d[0],d[1],d[2])&&(d=[d[0]]),VO(h,wi(d,1),[])}),Yv=lz||function(){return ti.Date.now()};function O7(h,d){if(typeof d!="function")throw new _s(o);return h=Zt(h),function(){if(--h<1)return d.apply(this,arguments)}}function IT(h,d,y){return d=y?n:d,d=h&&d==null?h.length:d,Sl(h,_,n,n,n,n,d)}function $T(h,d){var y;if(typeof d!="function")throw new _s(o);return h=Zt(h),function(){return--h>0&&(y=d.apply(this,arguments)),h<=1&&(d=n),y}}var $x=sn(function(h,d,y){var T=P;if(y.length){var j=di(y,yh($x));T|=x}return Sl(h,T,d,y,j)}),RT=sn(function(h,d,y){var T=P|S;if(y.length){var j=di(y,yh(RT));T|=x}return Sl(d,T,h,y,j)});function LT(h,d,y){d=y?n:d;var T=Sl(h,I,n,n,n,n,n,d);return T.placeholder=LT.placeholder,T}function DT(h,d,y){d=y?n:d;var T=Sl(h,N,n,n,n,n,n,d);return T.placeholder=DT.placeholder,T}function FT(h,d,y){var T,j,X,se,ge,xe,We=0,Ge=!1,nt=!1,ut=!0;if(typeof h!="function")throw new _s(o);d=To(d)||0,Er(y)&&(Ge=!!y.leading,nt="maxWait"in y,X=nt?ri(To(y.maxWait)||0,d):X,ut="trailing"in y?!!y.trailing:ut);function Et(Vr){var ia=T,Cl=j;return T=j=n,We=Vr,se=h.apply(Cl,ia),se}function Dt(Vr){return We=Vr,ge=Pp(pn,d),Ge?Et(Vr):se}function tn(Vr){var ia=Vr-xe,Cl=Vr-We,r2=d-ia;return nt?Vi(r2,X-Cl):r2}function Ft(Vr){var ia=Vr-xe,Cl=Vr-We;return xe===n||ia>=d||ia<0||nt&&Cl>=X}function pn(){var Vr=Yv();if(Ft(Vr))return An(Vr);ge=Pp(pn,tn(Vr))}function An(Vr){return ge=n,ut&&T?Et(Vr):(T=j=n,se)}function to(){ge!==n&&KO(ge),We=0,T=xe=j=ge=n}function rs(){return ge===n?se:An(Yv())}function no(){var Vr=Yv(),ia=Ft(Vr);if(T=arguments,j=this,xe=Vr,ia){if(ge===n)return Dt(xe);if(nt)return KO(ge),ge=Pp(pn,d),Et(xe)}return ge===n&&(ge=Pp(pn,d)),se}return no.cancel=to,no.flush=rs,no}var T7=sn(function(h,d){return CO(h,1,d)}),M7=sn(function(h,d,y){return CO(h,To(d)||0,y)});function N7(h){return Sl(h,D)}function Jv(h,d){if(typeof h!="function"||d!=null&&typeof d!="function")throw new _s(o);var y=function(){var T=arguments,j=d?d.apply(this,T):T[0],X=y.cache;if(X.has(j))return X.get(j);var se=h.apply(this,T);return y.cache=X.set(j,se)||X,se};return y.cache=new(Jv.Cache||wl),y}Jv.Cache=wl;function Xv(h){if(typeof h!="function")throw new _s(o);return function(){var d=arguments;switch(d.length){case 0:return!h.call(this);case 1:return!h.call(this,d[0]);case 2:return!h.call(this,d[0],d[1]);case 3:return!h.call(this,d[0],d[1],d[2])}return!h.apply(this,d)}}function I7(h){return $T(2,h)}var $7=w9(function(h,d){d=d.length==1&&Xt(d[0])?an(d[0],es(Lt())):an(wi(d,1),es(Lt()));var y=d.length;return sn(function(T){for(var j=-1,X=Vi(T.length,y);++j<X;)T[j]=d[j].call(this,T[j]);return qe(h,this,T)})}),Rx=sn(function(h,d){var y=di(d,yh(Rx));return Sl(h,x,n,d,y)}),VT=sn(function(h,d){var y=di(d,yh(VT));return Sl(h,g,n,d,y)}),R7=El(function(h,d){return Sl(h,M,n,n,n,d)});function L7(h,d){if(typeof h!="function")throw new _s(o);return d=d===n?d:Zt(d),sn(h,d)}function D7(h,d){if(typeof h!="function")throw new _s(o);return d=d==null?0:ri(Zt(d),0),sn(function(y){var T=y[d],j=wu(y,0,d);return T&&hn(j,T),qe(h,this,j)})}function F7(h,d,y){var T=!0,j=!0;if(typeof h!="function")throw new _s(o);return Er(y)&&(T="leading"in y?!!y.leading:T,j="trailing"in y?!!y.trailing:j),FT(h,d,{leading:T,maxWait:d,trailing:j})}function V7(h){return IT(h,1)}function B7(h,d){return Rx(bx(d),h)}function j7(){if(!arguments.length)return[];var h=arguments[0];return Xt(h)?h:[h]}function z7(h){return Co(h,v)}function H7(h,d){return d=typeof d=="function"?d:n,Co(h,v,d)}function U7(h){return Co(h,f|v)}function q7(h,d){return d=typeof d=="function"?d:n,Co(h,f|v,d)}function W7(h,d){return d==null||kO(h,d,pi(d))}function ra(h,d){return h===d||h!==h&&d!==d}var G7=Hv(ax),K7=Hv(function(h,d){return h>=d}),Bc=NO(function(){return arguments}())?NO:function(h){return Mr(h)&&Ne.call(h,"callee")&&!er.call(h,"callee")},Xt=Ie.isArray,Y7=B?es(B):r9;function ks(h){return h!=null&&Zv(h.length)&&!Al(h)}function Fr(h){return Mr(h)&&ks(h)}function J7(h){return h===!0||h===!1||Mr(h)&&ts(h)==He}var xu=cz||Wx,X7=H?es(H):i9;function Z7(h){return Mr(h)&&h.nodeType===1&&!Op(h)}function Q7(h){if(h==null)return!0;if(ks(h)&&(Xt(h)||typeof h=="string"||typeof h.splice=="function"||xu(h)||bh(h)||Bc(h)))return!h.length;var d=Bi(h);if(d==C||d==Ae)return!h.size;if(Cp(h))return!cx(h).length;for(var y in h)if(Ne.call(h,y))return!1;return!0}function eU(h,d){return _p(h,d)}function tU(h,d,y){y=typeof y=="function"?y:n;var T=y?y(h,d):n;return T===n?_p(h,d,n,y):!!T}function Lx(h){if(!Mr(h))return!1;var d=ts(h);return d==Ve||d==Pe||typeof h.message=="string"&&typeof h.name=="string"&&!Op(h)}function nU(h){return typeof h=="number"&&wO(h)}function Al(h){if(!Er(h))return!1;var d=ts(h);return d==z||d==K||d==Fe||d==ue}function BT(h){return typeof h=="number"&&h==Zt(h)}function Zv(h){return typeof h=="number"&&h>-1&&h%1==0&&h<=Te}function Er(h){var d=typeof h;return h!=null&&(d=="object"||d=="function")}function Mr(h){return h!=null&&typeof h=="object"}var jT=le?es(le):o9;function rU(h,d){return h===d||ux(h,d,kx(d))}function iU(h,d,y){return y=typeof y=="function"?y:n,ux(h,d,kx(d),y)}function sU(h){return zT(h)&&h!=+h}function oU(h){if(H9(h))throw new zt(s);return IO(h)}function aU(h){return h===null}function lU(h){return h==null}function zT(h){return typeof h=="number"||Mr(h)&&ts(h)==$}function Op(h){if(!Mr(h)||ts(h)!=Q)return!1;var d=Dr(h);if(d===null)return!0;var y=Ne.call(d,"constructor")&&d.constructor;return typeof y=="function"&&y instanceof y&&we.call(y)==It}var Dx=ie?es(ie):a9;function uU(h){return BT(h)&&h>=-Te&&h<=Te}var HT=Se?es(Se):l9;function Qv(h){return typeof h=="string"||!Xt(h)&&Mr(h)&&ts(h)==tt}function eo(h){return typeof h=="symbol"||Mr(h)&&ts(h)==Je}var bh=$e?es($e):u9;function cU(h){return h===n}function fU(h){return Mr(h)&&Bi(h)==Ye}function hU(h){return Mr(h)&&ts(h)==ft}var dU=Hv(fx),pU=Hv(function(h,d){return h<=d});function UT(h){if(!h)return[];if(ks(h))return Qv(h)?Di(h):As(h);if(ni&&h[ni])return Jw(h[ni]());var d=Bi(h),y=d==C?Tc:d==Ae?Mc:wh;return y(h)}function kl(h){if(!h)return h===0?h:0;if(h=To(h),h===_e||h===-_e){var d=h<0?-1:1;return d*Le}return h===h?h:0}function Zt(h){var d=kl(h),y=d%1;return d===d?y?d-y:d:0}function qT(h){return h?Lc(Zt(h),0,re):0}function To(h){if(typeof h=="number")return h;if(eo(h))return Ee;if(Er(h)){var d=typeof h.valueOf=="function"?h.valueOf():h;h=Er(d)?d+"":d}if(typeof h!="string")return h===0?h:+h;h=fh(h);var y=en.test(h);return y||or.test(h)?hp(h.slice(2),y?2:8):sr.test(h)?Ee:+h}function WT(h){return $a(h,Cs(h))}function gU(h){return h?Lc(Zt(h),-Te,Te):h===0?h:0}function zn(h){return h==null?"":Qs(h)}var mU=mh(function(h,d){if(Cp(d)||ks(d)){$a(d,pi(d),h);return}for(var y in d)Ne.call(d,y)&&xp(h,y,d[y])}),GT=mh(function(h,d){$a(d,Cs(d),h)}),e0=mh(function(h,d,y,T){$a(d,Cs(d),h,T)}),vU=mh(function(h,d,y,T){$a(d,pi(d),h,T)}),yU=El(ix);function bU(h,d){var y=gh(h);return d==null?y:AO(y,d)}var wU=sn(function(h,d){h=$n(h);var y=-1,T=d.length,j=T>2?d[2]:n;for(j&&ns(d[0],d[1],j)&&(T=1);++y<T;)for(var X=d[y],se=Cs(X),ge=-1,xe=se.length;++ge<xe;){var We=se[ge],Ge=h[We];(Ge===n||ra(Ge,me[We])&&!Ne.call(h,We))&&(h[We]=X[We])}return h}),xU=sn(function(h){return h.push(n,cT),qe(KT,n,h)});function SU(h,d){return Ri(h,Lt(d,3),Ia)}function EU(h,d){return Ri(h,Lt(d,3),ox)}function _U(h,d){return h==null?h:sx(h,Lt(d,3),Cs)}function AU(h,d){return h==null?h:TO(h,Lt(d,3),Cs)}function kU(h,d){return h&&Ia(h,Lt(d,3))}function CU(h,d){return h&&ox(h,Lt(d,3))}function PU(h){return h==null?[]:Rv(h,pi(h))}function OU(h){return h==null?[]:Rv(h,Cs(h))}function Fx(h,d,y){var T=h==null?n:Dc(h,d);return T===n?y:T}function TU(h,d){return h!=null&&dT(h,d,Qz)}function Vx(h,d){return h!=null&&dT(h,d,e9)}var MU=sT(function(h,d,y){d!=null&&typeof d.toString!="function"&&(d=ot.call(d)),h[d]=y},jx(Ps)),NU=sT(function(h,d,y){d!=null&&typeof d.toString!="function"&&(d=ot.call(d)),Ne.call(h,d)?h[d].push(y):h[d]=[y]},Lt),IU=sn(Ep);function pi(h){return ks(h)?EO(h):cx(h)}function Cs(h){return ks(h)?EO(h,!0):c9(h)}function $U(h,d){var y={};return d=Lt(d,3),Ia(h,function(T,j,X){xl(y,d(T,j,X),T)}),y}function RU(h,d){var y={};return d=Lt(d,3),Ia(h,function(T,j,X){xl(y,j,d(T,j,X))}),y}var LU=mh(function(h,d,y){Lv(h,d,y)}),KT=mh(function(h,d,y,T){Lv(h,d,y,T)}),DU=El(function(h,d){var y={};if(h==null)return y;var T=!1;d=an(d,function(X){return X=bu(X,h),T||(T=X.length>1),X}),$a(h,_x(h),y),T&&(y=Co(y,f|p|v,M9));for(var j=d.length;j--;)mx(y,d[j]);return y});function FU(h,d){return YT(h,Xv(Lt(d)))}var VU=El(function(h,d){return h==null?{}:h9(h,d)});function YT(h,d){if(h==null)return{};var y=an(_x(h),function(T){return[T]});return d=Lt(d),BO(h,y,function(T,j){return d(T,j[0])})}function BU(h,d,y){d=bu(d,h);var T=-1,j=d.length;for(j||(j=1,h=n);++T<j;){var X=h==null?n:h[Ra(d[T])];X===n&&(T=j,X=y),h=Al(X)?X.call(h):X}return h}function jU(h,d,y){return h==null?h:Ap(h,d,y)}function zU(h,d,y,T){return T=typeof T=="function"?T:n,h==null?h:Ap(h,d,y,T)}var JT=lT(pi),XT=lT(Cs);function HU(h,d,y){var T=Xt(h),j=T||xu(h)||bh(h);if(d=Lt(d,4),y==null){var X=h&&h.constructor;j?y=T?new X:[]:Er(h)?y=Al(X)?gh(Dr(h)):{}:y={}}return(j?Re:Ia)(h,function(se,ge,xe){return d(y,se,ge,xe)}),y}function UU(h,d){return h==null?!0:mx(h,d)}function qU(h,d,y){return h==null?h:qO(h,d,bx(y))}function WU(h,d,y,T){return T=typeof T=="function"?T:n,h==null?h:qO(h,d,bx(y),T)}function wh(h){return h==null?[]:pu(h,pi(h))}function GU(h){return h==null?[]:pu(h,Cs(h))}function KU(h,d,y){return y===n&&(y=d,d=n),y!==n&&(y=To(y),y=y===y?y:0),d!==n&&(d=To(d),d=d===d?d:0),Lc(To(h),d,y)}function YU(h,d,y){return d=kl(d),y===n?(y=d,d=0):y=kl(y),h=To(h),t9(h,d,y)}function JU(h,d,y){if(y&&typeof y!="boolean"&&ns(h,d,y)&&(d=y=n),y===n&&(typeof d=="boolean"?(y=d,d=n):typeof h=="boolean"&&(y=h,h=n)),h===n&&d===n?(h=0,d=1):(h=kl(h),d===n?(d=h,h=0):d=kl(d)),h>d){var T=h;h=d,d=T}if(y||h%1||d%1){var j=xO();return Vi(h+j*(d-h+wv("1e-"+((j+"").length-1))),d)}return dx(h,d)}var XU=vh(function(h,d,y){return d=d.toLowerCase(),h+(y?ZT(d):d)});function ZT(h){return Bx(zn(h).toLowerCase())}function QT(h){return h=zn(h),h&&h.replace(Un,Gw).replace(jw,"")}function ZU(h,d,y){h=zn(h),d=Qs(d);var T=h.length;y=y===n?T:Lc(Zt(y),0,T);var j=y;return y-=d.length,y>=0&&h.slice(y,j)==d}function QU(h){return h=zn(h),h&&Pa.test(h)?h.replace(Js,hh):h}function eq(h){return h=zn(h),h&&rp.test(h)?h.replace(gl,"\\$&"):h}var tq=vh(function(h,d,y){return h+(y?"-":"")+d.toLowerCase()}),nq=vh(function(h,d,y){return h+(y?" ":"")+d.toLowerCase()}),rq=nT("toLowerCase");function iq(h,d,y){h=zn(h),d=Zt(d);var T=d?Tn(h):0;if(!d||T>=d)return h;var j=(d-T)/2;return zv(Ov(j),y)+h+zv(Pv(j),y)}function sq(h,d,y){h=zn(h),d=Zt(d);var T=d?Tn(h):0;return d&&T<d?h+zv(d-T,y):h}function oq(h,d,y){h=zn(h),d=Zt(d);var T=d?Tn(h):0;return d&&T<d?zv(d-T,y)+h:h}function aq(h,d,y){return y||d==null?d=0:d&&(d=+d),pz(zn(h).replace(fu,""),d||0)}function lq(h,d,y){return(y?ns(h,d,y):d===n)?d=1:d=Zt(d),px(zn(h),d)}function uq(){var h=arguments,d=zn(h[0]);return h.length<3?d:d.replace(h[1],h[2])}var cq=vh(function(h,d,y){return h+(y?"_":"")+d.toLowerCase()});function fq(h,d,y){return y&&typeof y!="number"&&ns(h,d,y)&&(d=y=n),y=y===n?re:y>>>0,y?(h=zn(h),h&&(typeof d=="string"||d!=null&&!Dx(d))&&(d=Qs(d),!d&&gu(h))?wu(Di(h),0,y):h.split(d,y)):[]}var hq=vh(function(h,d,y){return h+(y?" ":"")+Bx(d)});function dq(h,d,y){return h=zn(h),y=y==null?0:Lc(Zt(y),0,h.length),d=Qs(d),h.slice(y,y+d.length)==d}function pq(h,d,y){var T=Y.templateSettings;y&&ns(h,d,y)&&(d=n),h=zn(h),d=e0({},d,T,uT);var j=e0({},d.imports,T.imports,uT),X=pi(j),se=pu(j,X),ge,xe,We=0,Ge=d.interpolate||Wn,nt="__p += '",ut=Nc((d.escape||Wn).source+"|"+Ge.source+"|"+(Ge===pl?rn:Wn).source+"|"+(d.evaluate||Wn).source+"|$","g"),Et="//# sourceURL="+(Ne.call(d,"sourceURL")?(d.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++bv+"]")+`
`;h.replace(ut,function(Ft,pn,An,to,rs,no){return An||(An=to),nt+=h.slice(We,no).replace(Gn,Kw),pn&&(ge=!0,nt+=`' +
__e(`+pn+`) +
'`),rs&&(xe=!0,nt+=`';
`+rs+`;
__p += '`),An&&(nt+=`' +
((__t = (`+An+`)) == null ? '' : __t) +
'`),We=no+Ft.length,Ft}),nt+=`';
`;var Dt=Ne.call(d,"variable")&&d.variable;if(!Dt)nt=`with (obj) {
`+nt+`
}
`;else if(bt.test(Dt))throw new zt(a);nt=(xe?nt.replace(vs,""):nt).replace(uu,"$1").replace(dl,"$1;"),nt="function("+(Dt||"obj")+`) {
`+(Dt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ge?", __e = _.escape":"")+(xe?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+nt+`return __p
}`;var tn=t2(function(){return _n(X,Et+"return "+nt).apply(n,se)});if(tn.source=nt,Lx(tn))throw tn;return tn}function gq(h){return zn(h).toLowerCase()}function mq(h){return zn(h).toUpperCase()}function vq(h,d,y){if(h=zn(h),h&&(y||d===n))return fh(h);if(!h||!(d=Qs(d)))return h;var T=Di(h),j=Di(d),X=pp(T,j),se=Ev(T,j)+1;return wu(T,X,se).join("")}function yq(h,d,y){if(h=zn(h),h&&(y||d===n))return h.slice(0,Ss(h)+1);if(!h||!(d=Qs(d)))return h;var T=Di(h),j=Ev(T,Di(d))+1;return wu(T,0,j).join("")}function bq(h,d,y){if(h=zn(h),h&&(y||d===n))return h.replace(fu,"");if(!h||!(d=Qs(d)))return h;var T=Di(h),j=pp(T,Di(d));return wu(T,j).join("")}function wq(h,d){var y=q,T=R;if(Er(d)){var j="separator"in d?d.separator:j;y="length"in d?Zt(d.length):y,T="omission"in d?Qs(d.omission):T}h=zn(h);var X=h.length;if(gu(h)){var se=Di(h);X=se.length}if(y>=X)return h;var ge=y-Tn(T);if(ge<1)return T;var xe=se?wu(se,0,ge).join(""):h.slice(0,ge);if(j===n)return xe+T;if(se&&(ge+=xe.length-ge),Dx(j)){if(h.slice(ge).search(j)){var We,Ge=xe;for(j.global||(j=Nc(j.source,zn(Bn.exec(j))+"g")),j.lastIndex=0;We=j.exec(Ge);)var nt=We.index;xe=xe.slice(0,nt===n?ge:nt)}}else if(h.indexOf(Qs(j),ge)!=ge){var ut=xe.lastIndexOf(j);ut>-1&&(xe=xe.slice(0,ut))}return xe+T}function xq(h){return h=zn(h),h&&Qr.test(h)?h.replace(Ca,Es):h}var Sq=vh(function(h,d,y){return h+(y?" ":"")+d.toUpperCase()}),Bx=nT("toUpperCase");function e2(h,d,y){return h=zn(h),d=y?n:d,d===n?Oc(h)?Zw(h):uh(h):h.match(d)||[]}var t2=sn(function(h,d){try{return qe(h,n,d)}catch(y){return Lx(y)?y:new zt(y)}}),Eq=El(function(h,d){return Re(d,function(y){y=Ra(y),xl(h,y,$x(h[y],h))}),h});function _q(h){var d=h==null?0:h.length,y=Lt();return h=d?an(h,function(T){if(typeof T[1]!="function")throw new _s(o);return[y(T[0]),T[1]]}):[],sn(function(T){for(var j=-1;++j<d;){var X=h[j];if(qe(X[0],this,T))return qe(X[1],this,T)}})}function Aq(h){return Jz(Co(h,f))}function jx(h){return function(){return h}}function kq(h,d){return h==null||h!==h?d:h}var Cq=iT(),Pq=iT(!0);function Ps(h){return h}function zx(h){return $O(typeof h=="function"?h:Co(h,f))}function Oq(h){return LO(Co(h,f))}function Tq(h,d){return DO(h,Co(d,f))}var Mq=sn(function(h,d){return function(y){return Ep(y,h,d)}}),Nq=sn(function(h,d){return function(y){return Ep(h,y,d)}});function Hx(h,d,y){var T=pi(d),j=Rv(d,T);y==null&&!(Er(d)&&(j.length||!T.length))&&(y=d,d=h,h=this,j=Rv(d,pi(d)));var X=!(Er(y)&&"chain"in y)||!!y.chain,se=Al(h);return Re(j,function(ge){var xe=d[ge];h[ge]=xe,se&&(h.prototype[ge]=function(){var We=this.__chain__;if(X||We){var Ge=h(this.__wrapped__),nt=Ge.__actions__=As(this.__actions__);return nt.push({func:xe,args:arguments,thisArg:h}),Ge.__chain__=We,Ge}return xe.apply(h,hn([this.value()],arguments))})}),h}function Iq(){return ti._===this&&(ti._=Pt),this}function Ux(){}function $q(h){return h=Zt(h),sn(function(d){return FO(d,h)})}var Rq=xx(an),Lq=xx(Ht),Dq=xx(dn);function n2(h){return Px(h)?_o(Ra(h)):d9(h)}function Fq(h){return function(d){return h==null?n:Dc(h,d)}}var Vq=oT(),Bq=oT(!0);function qx(){return[]}function Wx(){return!1}function jq(){return{}}function zq(){return""}function Hq(){return!0}function Uq(h,d){if(h=Zt(h),h<1||h>Te)return[];var y=re,T=Vi(h,re);d=Lt(d),h-=re;for(var j=ta(T,d);++y<h;)d(y);return j}function qq(h){return Xt(h)?an(h,Ra):eo(h)?[h]:As(ST(zn(h)))}function Wq(h){var d=++Qe;return zn(h)+d}var Gq=jv(function(h,d){return h+d},0),Kq=Sx("ceil"),Yq=jv(function(h,d){return h/d},1),Jq=Sx("floor");function Xq(h){return h&&h.length?$v(h,Ps,ax):n}function Zq(h,d){return h&&h.length?$v(h,Lt(d,2),ax):n}function Qq(h){return Qi(h,Ps)}function eW(h,d){return Qi(h,Lt(d,2))}function tW(h){return h&&h.length?$v(h,Ps,fx):n}function nW(h,d){return h&&h.length?$v(h,Lt(d,2),fx):n}var rW=jv(function(h,d){return h*d},1),iW=Sx("round"),sW=jv(function(h,d){return h-d},0);function oW(h){return h&&h.length?On(h,Ps):0}function aW(h,d){return h&&h.length?On(h,Lt(d,2)):0}return Y.after=O7,Y.ary=IT,Y.assign=mU,Y.assignIn=GT,Y.assignInWith=e0,Y.assignWith=vU,Y.at=yU,Y.before=$T,Y.bind=$x,Y.bindAll=Eq,Y.bindKey=RT,Y.castArray=j7,Y.chain=TT,Y.chunk=J9,Y.compact=X9,Y.concat=Z9,Y.cond=_q,Y.conforms=Aq,Y.constant=jx,Y.countBy=o7,Y.create=bU,Y.curry=LT,Y.curryRight=DT,Y.debounce=FT,Y.defaults=wU,Y.defaultsDeep=xU,Y.defer=T7,Y.delay=M7,Y.difference=Q9,Y.differenceBy=eH,Y.differenceWith=tH,Y.drop=nH,Y.dropRight=rH,Y.dropRightWhile=iH,Y.dropWhile=sH,Y.fill=oH,Y.filter=l7,Y.flatMap=f7,Y.flatMapDeep=h7,Y.flatMapDepth=d7,Y.flatten=kT,Y.flattenDeep=aH,Y.flattenDepth=lH,Y.flip=N7,Y.flow=Cq,Y.flowRight=Pq,Y.fromPairs=uH,Y.functions=PU,Y.functionsIn=OU,Y.groupBy=p7,Y.initial=fH,Y.intersection=hH,Y.intersectionBy=dH,Y.intersectionWith=pH,Y.invert=MU,Y.invertBy=NU,Y.invokeMap=m7,Y.iteratee=zx,Y.keyBy=v7,Y.keys=pi,Y.keysIn=Cs,Y.map=Kv,Y.mapKeys=$U,Y.mapValues=RU,Y.matches=Oq,Y.matchesProperty=Tq,Y.memoize=Jv,Y.merge=LU,Y.mergeWith=KT,Y.method=Mq,Y.methodOf=Nq,Y.mixin=Hx,Y.negate=Xv,Y.nthArg=$q,Y.omit=DU,Y.omitBy=FU,Y.once=I7,Y.orderBy=y7,Y.over=Rq,Y.overArgs=$7,Y.overEvery=Lq,Y.overSome=Dq,Y.partial=Rx,Y.partialRight=VT,Y.partition=b7,Y.pick=VU,Y.pickBy=YT,Y.property=n2,Y.propertyOf=Fq,Y.pull=yH,Y.pullAll=PT,Y.pullAllBy=bH,Y.pullAllWith=wH,Y.pullAt=xH,Y.range=Vq,Y.rangeRight=Bq,Y.rearg=R7,Y.reject=S7,Y.remove=SH,Y.rest=L7,Y.reverse=Nx,Y.sampleSize=_7,Y.set=jU,Y.setWith=zU,Y.shuffle=A7,Y.slice=EH,Y.sortBy=P7,Y.sortedUniq=TH,Y.sortedUniqBy=MH,Y.split=fq,Y.spread=D7,Y.tail=NH,Y.take=IH,Y.takeRight=$H,Y.takeRightWhile=RH,Y.takeWhile=LH,Y.tap=XH,Y.throttle=F7,Y.thru=Gv,Y.toArray=UT,Y.toPairs=JT,Y.toPairsIn=XT,Y.toPath=qq,Y.toPlainObject=WT,Y.transform=HU,Y.unary=V7,Y.union=DH,Y.unionBy=FH,Y.unionWith=VH,Y.uniq=BH,Y.uniqBy=jH,Y.uniqWith=zH,Y.unset=UU,Y.unzip=Ix,Y.unzipWith=OT,Y.update=qU,Y.updateWith=WU,Y.values=wh,Y.valuesIn=GU,Y.without=HH,Y.words=e2,Y.wrap=B7,Y.xor=UH,Y.xorBy=qH,Y.xorWith=WH,Y.zip=GH,Y.zipObject=KH,Y.zipObjectDeep=YH,Y.zipWith=JH,Y.entries=JT,Y.entriesIn=XT,Y.extend=GT,Y.extendWith=e0,Hx(Y,Y),Y.add=Gq,Y.attempt=t2,Y.camelCase=XU,Y.capitalize=ZT,Y.ceil=Kq,Y.clamp=KU,Y.clone=z7,Y.cloneDeep=U7,Y.cloneDeepWith=q7,Y.cloneWith=H7,Y.conformsTo=W7,Y.deburr=QT,Y.defaultTo=kq,Y.divide=Yq,Y.endsWith=ZU,Y.eq=ra,Y.escape=QU,Y.escapeRegExp=eq,Y.every=a7,Y.find=u7,Y.findIndex=_T,Y.findKey=SU,Y.findLast=c7,Y.findLastIndex=AT,Y.findLastKey=EU,Y.floor=Jq,Y.forEach=MT,Y.forEachRight=NT,Y.forIn=_U,Y.forInRight=AU,Y.forOwn=kU,Y.forOwnRight=CU,Y.get=Fx,Y.gt=G7,Y.gte=K7,Y.has=TU,Y.hasIn=Vx,Y.head=CT,Y.identity=Ps,Y.includes=g7,Y.indexOf=cH,Y.inRange=YU,Y.invoke=IU,Y.isArguments=Bc,Y.isArray=Xt,Y.isArrayBuffer=Y7,Y.isArrayLike=ks,Y.isArrayLikeObject=Fr,Y.isBoolean=J7,Y.isBuffer=xu,Y.isDate=X7,Y.isElement=Z7,Y.isEmpty=Q7,Y.isEqual=eU,Y.isEqualWith=tU,Y.isError=Lx,Y.isFinite=nU,Y.isFunction=Al,Y.isInteger=BT,Y.isLength=Zv,Y.isMap=jT,Y.isMatch=rU,Y.isMatchWith=iU,Y.isNaN=sU,Y.isNative=oU,Y.isNil=lU,Y.isNull=aU,Y.isNumber=zT,Y.isObject=Er,Y.isObjectLike=Mr,Y.isPlainObject=Op,Y.isRegExp=Dx,Y.isSafeInteger=uU,Y.isSet=HT,Y.isString=Qv,Y.isSymbol=eo,Y.isTypedArray=bh,Y.isUndefined=cU,Y.isWeakMap=fU,Y.isWeakSet=hU,Y.join=gH,Y.kebabCase=tq,Y.last=Oo,Y.lastIndexOf=mH,Y.lowerCase=nq,Y.lowerFirst=rq,Y.lt=dU,Y.lte=pU,Y.max=Xq,Y.maxBy=Zq,Y.mean=Qq,Y.meanBy=eW,Y.min=tW,Y.minBy=nW,Y.stubArray=qx,Y.stubFalse=Wx,Y.stubObject=jq,Y.stubString=zq,Y.stubTrue=Hq,Y.multiply=rW,Y.nth=vH,Y.noConflict=Iq,Y.noop=Ux,Y.now=Yv,Y.pad=iq,Y.padEnd=sq,Y.padStart=oq,Y.parseInt=aq,Y.random=JU,Y.reduce=w7,Y.reduceRight=x7,Y.repeat=lq,Y.replace=uq,Y.result=BU,Y.round=iW,Y.runInContext=ve,Y.sample=E7,Y.size=k7,Y.snakeCase=cq,Y.some=C7,Y.sortedIndex=_H,Y.sortedIndexBy=AH,Y.sortedIndexOf=kH,Y.sortedLastIndex=CH,Y.sortedLastIndexBy=PH,Y.sortedLastIndexOf=OH,Y.startCase=hq,Y.startsWith=dq,Y.subtract=sW,Y.sum=oW,Y.sumBy=aW,Y.template=pq,Y.times=Uq,Y.toFinite=kl,Y.toInteger=Zt,Y.toLength=qT,Y.toLower=gq,Y.toNumber=To,Y.toSafeInteger=gU,Y.toString=zn,Y.toUpper=mq,Y.trim=vq,Y.trimEnd=yq,Y.trimStart=bq,Y.truncate=wq,Y.unescape=xq,Y.uniqueId=Wq,Y.upperCase=Sq,Y.upperFirst=Bx,Y.each=MT,Y.eachRight=NT,Y.first=CT,Hx(Y,function(){var h={};return Ia(Y,function(d,y){Ne.call(Y.prototype,y)||(h[y]=d)}),h}(),{chain:!1}),Y.VERSION=r,Re(["bind","bindKey","curry","curryRight","partial","partialRight"],function(h){Y[h].placeholder=Y}),Re(["drop","take"],function(h,d){yn.prototype[h]=function(y){y=y===n?1:ri(Zt(y),0);var T=this.__filtered__&&!d?new yn(this):this.clone();return T.__filtered__?T.__takeCount__=Vi(y,T.__takeCount__):T.__views__.push({size:Vi(y,re),type:h+(T.__dir__<0?"Right":"")}),T},yn.prototype[h+"Right"]=function(y){return this.reverse()[h](y).reverse()}}),Re(["filter","map","takeWhile"],function(h,d){var y=d+1,T=y==Z||y==be;yn.prototype[h]=function(j){var X=this.clone();return X.__iteratees__.push({iteratee:Lt(j,3),type:y}),X.__filtered__=X.__filtered__||T,X}}),Re(["head","last"],function(h,d){var y="take"+(d?"Right":"");yn.prototype[h]=function(){return this[y](1).value()[0]}}),Re(["initial","tail"],function(h,d){var y="drop"+(d?"":"Right");yn.prototype[h]=function(){return this.__filtered__?new yn(this):this[y](1)}}),yn.prototype.compact=function(){return this.filter(Ps)},yn.prototype.find=function(h){return this.filter(h).head()},yn.prototype.findLast=function(h){return this.reverse().find(h)},yn.prototype.invokeMap=sn(function(h,d){return typeof h=="function"?new yn(this):this.map(function(y){return Ep(y,h,d)})}),yn.prototype.reject=function(h){return this.filter(Xv(Lt(h)))},yn.prototype.slice=function(h,d){h=Zt(h);var y=this;return y.__filtered__&&(h>0||d<0)?new yn(y):(h<0?y=y.takeRight(-h):h&&(y=y.drop(h)),d!==n&&(d=Zt(d),y=d<0?y.dropRight(-d):y.take(d-h)),y)},yn.prototype.takeRightWhile=function(h){return this.reverse().takeWhile(h).reverse()},yn.prototype.toArray=function(){return this.take(re)},Ia(yn.prototype,function(h,d){var y=/^(?:filter|find|map|reject)|While$/.test(d),T=/^(?:head|last)$/.test(d),j=Y[T?"take"+(d=="last"?"Right":""):d],X=T||/^find/.test(d);j&&(Y.prototype[d]=function(){var se=this.__wrapped__,ge=T?[1]:arguments,xe=se instanceof yn,We=ge[0],Ge=xe||Xt(se),nt=function(pn){var An=j.apply(Y,hn([pn],ge));return T&&ut?An[0]:An};Ge&&y&&typeof We=="function"&&We.length!=1&&(xe=Ge=!1);var ut=this.__chain__,Et=!!this.__actions__.length,Dt=X&&!ut,tn=xe&&!Et;if(!X&&Ge){se=tn?se:new yn(this);var Ft=h.apply(se,ge);return Ft.__actions__.push({func:Gv,args:[nt],thisArg:n}),new ko(Ft,ut)}return Dt&&tn?h.apply(this,ge):(Ft=this.thru(nt),Dt?T?Ft.value()[0]:Ft.value():Ft)})}),Re(["pop","push","shift","sort","splice","unshift"],function(h){var d=J[h],y=/^(?:push|sort|unshift)$/.test(h)?"tap":"thru",T=/^(?:pop|shift)$/.test(h);Y.prototype[h]=function(){var j=arguments;if(T&&!this.__chain__){var X=this.value();return d.apply(Xt(X)?X:[],j)}return this[y](function(se){return d.apply(Xt(se)?se:[],j)})}}),Ia(yn.prototype,function(h,d){var y=Y[d];if(y){var T=y.name+"";Ne.call(ph,T)||(ph[T]=[]),ph[T].push({name:d,func:y})}}),ph[Bv(n,S).name]=[{name:"wrapper",func:n}],yn.prototype.clone=xz,yn.prototype.reverse=Sz,yn.prototype.value=Ez,Y.prototype.at=ZH,Y.prototype.chain=QH,Y.prototype.commit=e7,Y.prototype.next=t7,Y.prototype.plant=r7,Y.prototype.reverse=i7,Y.prototype.toJSON=Y.prototype.valueOf=Y.prototype.value=s7,Y.prototype.first=Y.prototype.head,ni&&(Y.prototype[ni]=n7),Y},yl=Qw();w?((w.exports=yl)._=yl,m._=yl):ti._=yl}).call(si)})(jb,jb.exports);var uue=jb.exports,cue=si&&si.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(im,"__esModule",{value:!0});im.mock=void 0;var ss=cue(uue);function XV(t){return t.allOf&&t.allOf[0]&&(t=ss.default.reduce(t.allOf,function(e,n){return ss.default.merge({},e,XV(n))},t)),t}function Rh(t){if(t=XV(t),t.example!==void 0)return t.example;if(t.default!==void 0)return t.default;if(t.oneOf&&t.oneOf[0])return Rh(t.oneOf[0]);if(t.anyOf&&t.anyOf[0])return Rh(t.anyOf[0]);var e=ss.default.isArray(t)?ss.default.first(t.type):t.type;if(e==="object"){var n=t,r=n.properties;return r?ss.default.mapValues(r,Rh):{}}if(e==="array"){var i=t,s=i.items;if(!s)return[];var o=[],a=s.oneOf&&s.oneOf[0]||s;if(s.anyOf)for(var l=0,u=s.anyOf;l<u.length;l++){var c=u[l];a=c,o.push(Rh(a))}for(var f=i.minItems||1;o.length<f;)o.push(Rh(a));return i.maxItems?ss.default.take(o,i.maxItems):o}if(ss.default.isArray(t.enum))return t.enum[0];if(e==="string"){var p=t.format,v={email:"user@example.com",hostname:"example.com",ipv4:"8.8.8.8",ipv6:"2001:4860:4860::8888",uri:"https://example.com/path","uri-reference":"/path#anchor","uri-template":"/path/{param}","json-pointer":"/foo/bar","date-time":new Date("1970-01-01").toJSON(),uuid:"3fa85f64-5717-4562-b3fc-2c963f66afa6",_default:"string"},b=v[p]||v._default,E=ss.default.isNil(t.minLength)?0:t.minLength,P=ss.default.isNil(t.maxLength)?b.length:t.maxLength;return b===v._default&&b.length<E?ss.default.padEnd(b,E,b):b.substr(0,ss.default.clamp(b.length,E,P))}if(e==="number"){var S=t.minimum?t.minimum:-Number.MAX_VALUE,A=t.maximum?t.maximum:Number.MAX_VALUE;return t.multipleOf&&(S=Math.ceil(S/t.multipleOf)*t.multipleOf,A=Math.floor(A/t.multipleOf)*t.multipleOf),ss.default.clamp(0,S,A)}if(e==="integer"){var I=t.minimum&&t.exclusiveMinimum?t.minimum+1:t.minimum,N=t.maximum&&t.exclusiveMaximum?t.maximum-1:t.maximum,S=ss.default.isNil(I)?Number.MIN_SAFE_INTEGER:I,A=ss.default.isNil(N)?Number.MAX_SAFE_INTEGER:N;return t.multipleOf&&(S=Math.ceil(S/t.multipleOf)*t.multipleOf,A=Math.floor(A/t.multipleOf)*t.multipleOf),ss.default.clamp(0,S,A)}return e==="null"?null:e==="boolean"?!0:{}}im.mock=Rh;(function(t){var e=si&&si.__createBinding||(Object.create?function(i,s,o,a){a===void 0&&(a=o),Object.defineProperty(i,a,{enumerable:!0,get:function(){return s[o]}})}:function(i,s,o,a){a===void 0&&(a=o),i[a]=s[o]}),n=si&&si.__exportStar||function(i,s){for(var o in i)o!=="default"&&!s.hasOwnProperty(o)&&e(s,i,o)};Object.defineProperty(t,"__esModule",{value:!0}),t.mock=void 0;var r=im;Object.defineProperty(t,"mock",{enumerable:!0,get:function(){return r.mock}}),n(im,t)})(JV);const zC=Q1("places",{state:()=>({place:{},markingString:"",schemaString:""}),actions:{saveName(){const t=wn().updatePlace(this.place.id,this.place.name);t&&(this.place.name=t.name,po().lastUpdatedPlace=t)},addToken(){let t=JV.mock(this.place.schema.items);this.place.marking.push(t),this.savePlaceMarking(JSON.stringify(this.place.marking,null,2))},savePlaceMarking(t){try{const e=JSON.parse(t);this.markingString=t;const n=wn().updatePlaceMarking(this.place.id,e);n&&(this.place.marking=n.marking,this.place.errorMessage=n.errorMessage,this.place.hasError=n.hasError,this.place.errorType=n.errorType,po().lastUpdatedPlace=n)}catch{}},savePlaceSchema(t){try{const e=JSON.parse(t);this.schemaString=t;const n=wn().updatePlaceSchema(this.place.id,e);n&&(this.place.schema=n.schema,this.place.errorMessage=n.errorMessage,this.place.hasError=n.hasError,this.place.errorType=n.errorType)}catch{}},resetName(){const t=wn().findPlace(this.place.id);t&&(this.place.name=t.name)},loadPlace(t){const e=po().places.find(n=>n.id===t);if(e){this.place=e;const n=wn().findPlace(this.place.id);n&&(this.place.id=n.id,this.place.name=n.name,this.place.marking=n.marking,this.place.schema=n.schema),this.markingString=JSON.stringify(e.marking,null,2),this.schemaString=JSON.stringify(e.schema.items,null,2)}}}}),Ml={x:"x",y:"y",width:"w",height:"h",minimum:"s",maximum:"l",diagonal:"d"},fue=Object.keys(Ml).map(t=>Ml[t]).join(""),DS="[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?",hue=/\s/g,OI=new RegExp(`^(${DS}\\*)?([${fue}])(/${DS})?([-+]{1,2}${DS})?$`,"g");function ZV(t){throw new Error(`Invalid calc() expression: ${t}`)}function due(t,e){const n=OI.exec(t.replace(hue,""));n||ZV(t),OI.lastIndex=0;const[,r,i,s,o]=n,{x:a,y:l,width:u,height:c}=e;let f=0;switch(i){case Ml.width:{f=u;break}case Ml.height:{f=c;break}case Ml.x:{f=a;break}case Ml.y:{f=l;break}case Ml.minimum:{f=Math.min(c,u);break}case Ml.maximum:{f=Math.max(c,u);break}case Ml.diagonal:{f=Math.sqrt(c*c+u*u);break}}return r&&(f*=parseFloat(r)),s&&(f/=parseFloat(s.slice(1))),o&&(f+=pue(o)),f}function pue(t){if(!t)return 0;const[e]=t;switch(e){case"+":return parseFloat(t.substr(1));case"-":return-parseFloat(t.substr(1))}return parseFloat(t)}function Bo(t){return typeof t=="string"&&t.includes("calc")}const QV="calc(",TI=QV.length;function jo(t,e){let n=t,r=0;do{let i=n.indexOf(QV,r);if(i===-1)return n;let s=i+TI,o=1;e:do{switch(n[s]){case"(":{o++;break}case")":{if(o--,o===0)break e;break}case void 0:ZV(n)}s++}while(!0);let a=n.slice(i+TI,s);Bo(a)&&(a=jo(a,e));const l=String(due(a,e));n=n.slice(0,i)+l+n.slice(s+1),r=i+l.length}while(!0)}const{round:gue,floor:mue,PI:eB}=Math,vue={linear:function(t,e,n){var r=t[1]-t[0],i=e[1]-e[0];return(n-t[0])/r*i+e[0]||0}},ul=function(t){return t%360+(t<0?360:0)},Vf=function(t,e){return e*gue(t/e)},iw=function(t){return 180*t/eB%360},Hs=function(t,e){return e=e||!1,t=e?t:t%360,t*eB/180},G_=function(t,e){if(e===void 0)e=t===void 0?1:t,t=0;else if(e<t){const n=t;t=e,e=n}return mue(Math.random()*(e-t+1)+t)},{cos:ey,sin:FS,atan2:yue}=Math,tB=function(t,e){var n=Hs(t.y),r=Hs(e.y),i=t.x,s=e.x,o=Hs(s-i),a=FS(o)*ey(r),l=ey(n)*FS(r)-FS(n)*ey(r)*ey(o),u=iw(yue(a,l)),c=["NE","E","SE","S","SW","W","NW","N"],f=u-22.5;return f<0&&(f+=360),f=parseInt(f/45),c[f]},HC=function(t,e){var n=t.x,r=t.y,i=e.x,s=e.y;return(n-=i)*n+(r-=s)*r},nB=function(t,e){return Math.sqrt(HC(t,e))},Qt={Point:1,Line:2,Ellipse:3,Rect:4,Polyline:5,Polygon:6,Curve:7,Path:8},{abs:zb,cos:K_,sin:Y_,sqrt:MI,min:NI,max:II,atan2:bue,round:$I,pow:wue,PI:RI}=Math,fe=function(t,e){if(!(this instanceof fe))return new fe(t,e);if(typeof t=="string"){var n=t.split(t.indexOf("@")===-1?" ":"@");t=parseFloat(n[0]),e=parseFloat(n[1])}else Object(t)===t&&(e=t.y,t=t.x);this.x=t===void 0?0:t,this.y=e===void 0?0:e};fe.fromPolar=function(t,e,n){n=new fe(n);var r=zb(t*K_(e)),i=zb(t*Y_(e)),s=ul(iw(e));return s<90?i=-i:s<180?(r=-r,i=-i):s<270&&(r=-r),new fe(n.x+r,n.y+i)};fe.random=function(t,e,n,r){return new fe(G_(t,e),G_(n,r))};fe.prototype={type:Qt.Point,chooseClosest:function(t){var e=t.length;if(e===1)return new fe(t[0]);for(var n=null,r=1/0,i=0;i<e;i++){var s=new fe(t[i]),o=this.squaredDistance(s);o<r&&(n=s,r=o)}return n},adhereToRect:function(t){return t.containsPoint(this)?this:(this.x=NI(II(this.x,t.x),t.x+t.width),this.y=NI(II(this.y,t.y),t.y+t.height),this)},angleBetween:function(t,e){var n=this.equals(t)||this.equals(e)?NaN:this.theta(e)-this.theta(t);return n<0&&(n+=360),n},bearing:function(t){return tB(this,t)},changeInAngle:function(t,e,n){return this.clone().offset(-t,-e).theta(n)-this.theta(n)},clone:function(){return new fe(this)},cross:function(t,e){return t&&e?(e.x-this.x)*(t.y-this.y)-(e.y-this.y)*(t.x-this.x):NaN},difference:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),new fe(this.x-(t||0),this.y-(e||0))},distance:function(t){return nB(this,t)},dot:function(t){return t?this.x*t.x+this.y*t.y:NaN},equals:function(t){return!!t&&this.x===t.x&&this.y===t.y},lerp:function(t,e){var n=this.x,r=this.y;return new fe((1-e)*n+e*t.x,(1-e)*r+e*t.y)},magnitude:function(){return MI(this.x*this.x+this.y*this.y)||.01},manhattanDistance:function(t){return zb(t.x-this.x)+zb(t.y-this.y)},move:function(t,e){var n=Hs(new fe(t).theta(this)),r=this.offset(K_(n)*e,-Y_(n)*e);return r},normalize:function(t){var e=(t||1)/this.magnitude();return this.scale(e,e)},offset:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),this.x+=t||0,this.y+=e||0,this},reflection:function(t){return new fe(t).move(this,this.distance(t))},rotate:function(t,e){if(e===0)return this;t=t||new fe(0,0),e=Hs(ul(-e));var n=K_(e),r=Y_(e),i=n*(this.x-t.x)-r*(this.y-t.y)+t.x,s=r*(this.x-t.x)+n*(this.y-t.y)+t.y;return this.x=i,this.y=s,this},round:function(t){let e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=wue(10,t);break}return this.x=$I(this.x*e)/e,this.y=$I(this.y*e)/e,this},scale:function(t,e,n){return n=n&&new fe(n)||new fe(0,0),this.x=n.x+t*(this.x-n.x),this.y=n.y+e*(this.y-n.y),this},snapToGrid:function(t,e){return this.x=Vf(this.x,t),this.y=Vf(this.y,e||t),this},squaredDistance:function(t){return HC(this,t)},theta:function(t){t=new fe(t);var e=-(t.y-this.y),n=t.x-this.x,r=bue(e,n);return r<0&&(r=2*RI+r),180*r/RI},toJSON:function(){return{x:this.x,y:this.y}},toPolar:function(t){t=t&&new fe(t)||new fe(0,0);var e=this.x,n=this.y;return this.x=MI((e-t.x)*(e-t.x)+(n-t.y)*(n-t.y)),this.y=Hs(t.theta(new fe(e,n))),this},toString:function(){return this.x+"@"+this.y},serialize:function(){return this.x+","+this.y},update:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),this.x=t||0,this.y=e||0,this},vectorAngle:function(t){var e=new fe(0,0);return e.angleBetween(this,t)}};fe.prototype.translate=fe.prototype.offset;const Hb=fe,{max:VS,min:BS}=Math,ht=function(t,e){if(!(this instanceof ht))return new ht(t,e);if(t instanceof ht)return new ht(t.start,t.end);this.start=new fe(t),this.end=new fe(e)};ht.prototype={type:Qt.Line,angle:function(){var t=new fe(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,t)},bbox:function(){var t=BS(this.start.x,this.end.x),e=BS(this.start.y,this.end.y),n=VS(this.start.x,this.end.x),r=VS(this.start.y,this.end.y);return new st(t,e,n-t,r-e)},bearing:function(){return tB(this.start,this.end)},clone:function(){return new ht(this.start,this.end)},closestPoint:function(t){return this.pointAt(this.closestPointNormalizedLength(t))},closestPointLength:function(t){return this.closestPointNormalizedLength(t)*this.length()},closestPointNormalizedLength:function(t){var e=this.vector().dot(new ht(this.start,t).vector()),n=BS(1,VS(0,e/this.squaredLength()));return n!==n?0:n},closestPointTangent:function(t){return this.tangentAt(this.closestPointNormalizedLength(t))},containsPoint:function(t){var e=this.start,n=this.end;if(e.cross(t,n)!==0)return!1;var r=this.length();return!(new ht(e,t).length()>r||new ht(t,n).length()>r)},divideAt:function(t){var e=this.pointAt(t);return[new ht(this.start,e),new ht(e,this.end)]},divideAtLength:function(t){var e=this.pointAtLength(t);return[new ht(this.start,e),new ht(e,this.end)]},equals:function(t){return!!t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.end.x===t.end.x&&this.end.y===t.end.y},intersect:function(t,e){if(t&&t.intersectionWithLine){var n=t.intersectionWithLine(this,e);return n&&t instanceof ht&&(n=n[0]),n}return null},intersectionWithLine:function(t){var e=new fe(this.end.x-this.start.x,this.end.y-this.start.y),n=new fe(t.end.x-t.start.x,t.end.y-t.start.y),r=e.x*n.y-e.y*n.x,i=new fe(t.start.x-this.start.x,t.start.y-this.start.y),s=i.x*n.y-i.y*n.x,o=i.x*e.y-i.y*e.x;if(r===0||s*r<0||o*r<0)return null;if(r>0){if(s>r||o>r)return null}else if(s<r||o<r)return null;return[new fe(this.start.x+s*e.x/r,this.start.y+s*e.y/r)]},isDifferentiable:function(){return!this.start.equals(this.end)},length:function(){return nB(this.start,this.end)},midpoint:function(){return new fe((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},parallel:function(t){const e=this.clone();if(!this.isDifferentiable())return e;const{start:n,end:r}=e,i=n.clone().rotate(r,270),s=r.clone().rotate(n,90);return n.move(s,t),r.move(i,t),e},pointAt:function(t){var e=this.start,n=this.end;return t<=0?e.clone():t>=1?n.clone():e.lerp(n,t)},pointAtLength:function(t){var e=this.start,n=this.end,r=!0;t<0&&(r=!1,t=-t);var i=this.length();return t>=i?r?n.clone():e.clone():this.pointAt((r?t:i-t)/i)},pointOffset:function(t){t=new fe(t);var e=this.start,n=this.end,r=(n.x-e.x)*(t.y-e.y)-(n.y-e.y)*(t.x-e.x);return r/this.length()},rotate:function(t,e){return this.start.rotate(t,e),this.end.rotate(t,e),this},round:function(t){return this.start.round(t),this.end.round(t),this},scale:function(t,e,n){return this.start.scale(t,e,n),this.end.scale(t,e,n),this},setLength:function(t){var e=this.length();if(!e)return this;var n=t/e;return this.scale(n,n,this.start)},squaredLength:function(){return HC(this.start,this.end)},tangentAt:function(t){if(!this.isDifferentiable())return null;var e=this.start,n=this.end,r=this.pointAt(t),i=new ht(e,n);return i.translate(r.x-e.x,r.y-e.y),i},tangentAtLength:function(t){if(!this.isDifferentiable())return null;var e=this.start,n=this.end,r=this.pointAtLength(t),i=new ht(e,n);return i.translate(r.x-e.x,r.y-e.y),i},toString:function(){return this.start.toString()+" "+this.end.toString()},serialize:function(){return this.start.serialize()+" "+this.end.serialize()},translate:function(t,e){return this.start.translate(t,e),this.end.translate(t,e),this},vector:function(){return new fe(this.end.x-this.start.x,this.end.y-this.start.y)}};ht.prototype.intersection=ht.prototype.intersect;const Ef=ht,{sqrt:LI,round:ty,pow:xue}=Math,ds=function(t,e,n){if(!(this instanceof ds))return new ds(t,e,n);if(t instanceof ds)return new ds(new fe(t.x,t.y),t.a,t.b);t=new fe(t),this.x=t.x,this.y=t.y,this.a=e,this.b=n};ds.fromRect=function(t){return t=new st(t),new ds(t.center(),t.width/2,t.height/2)};ds.prototype={type:Qt.Ellipse,bbox:function(){return new st(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},center:function(){return new fe(this.x,this.y)},clone:function(){return new ds(this)},containsPoint:function(t){return this.normalizedDistance(t)<=1},equals:function(t){return!!t&&t.x===this.x&&t.y===this.y&&t.a===this.a&&t.b===this.b},inflate:function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.a+=2*t,this.b+=2*e,this},intersectionWithLine:function(t){var e=[],n=t.start,r=t.end,i=this.a,s=this.b,o=t.vector(),a=n.difference(new fe(this)),l=new fe(o.x/(i*i),o.y/(s*s)),u=new fe(a.x/(i*i),a.y/(s*s)),c=o.dot(l),f=o.dot(u),p=a.dot(u)-1,v=f*f-c*p;if(v<0)return null;if(v>0){var b=LI(v),E=(-f-b)/c,P=(-f+b)/c;if((E<0||1<E)&&(P<0||1<P))return null;0<=E&&E<=1&&e.push(n.lerp(r,E)),0<=P&&P<=1&&e.push(n.lerp(r,P))}else{var S=-f/c;if(0<=S&&S<=1)e.push(n.lerp(r,S));else return null}return e},intersectionWithLineFromCenterToPoint:function(t,e){t=new fe(t),e&&t.rotate(new fe(this.x,this.y),e);var n=t.x-this.x,r=t.y-this.y,i;if(n===0)return i=this.bbox().pointNearestToPoint(t),e?i.rotate(new fe(this.x,this.y),-e):i;var s=r/n,o=s*s,a=this.a*this.a,l=this.b*this.b,u=LI(1/(1/a+o/l));u=n<0?-u:u;var c=s*u;return i=new fe(this.x+u,this.y+c),e?i.rotate(new fe(this.x,this.y),-e):i},normalizedDistance:function(t){var e=t.x,n=t.y,r=this.a,i=this.b,s=this.x,o=this.y;return(e-s)*(e-s)/(r*r)+(n-o)*(n-o)/(i*i)},round:function(t){let e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=xue(10,t);break}return this.x=ty(this.x*e)/e,this.y=ty(this.y*e)/e,this.a=ty(this.a*e)/e,this.b=ty(this.b*e)/e,this},tangentTheta:function(t){var e=30,n=t.x,r=t.y,i=this.a,s=this.b,o=this.bbox().center(),a=o.x,l=o.y,u=n>o.x+i/2,c=n<o.x-i/2,f,p;return u||c?(f=n>o.x?r-e:r+e,p=i*i/(n-a)-i*i*(r-l)*(f-l)/(s*s*(n-a))+a):(p=r>o.y?n+e:n-e,f=s*s/(r-l)-s*s*(n-a)*(p-a)/(i*i*(r-l))+l),new fe(p,f).theta(t)},toString:function(){return new fe(this.x,this.y).toString()+" "+this.a+" "+this.b}};const Sue=ds,{abs:DI,cos:Eue,sin:_ue,min:Bp,max:FI,round:ny,pow:Aue}=Math,st=function(t,e,n,r){if(!(this instanceof st))return new st(t,e,n,r);Object(t)===t&&(e=t.y,n=t.width,r=t.height,t=t.x),this.x=t===void 0?0:t,this.y=e===void 0?0:e,this.width=n===void 0?0:n,this.height=r===void 0?0:r};st.fromEllipse=function(t){return t=new ds(t),new st(t.x-t.a,t.y-t.b,2*t.a,2*t.b)};st.fromPointUnion=function(...t){if(t.length===0)return null;const e=new fe;let n,r,i,s;n=r=1/0,i=s=-1/0;for(let o=0;o<t.length;o++){e.update(t[o]);const a=e.x,l=e.y;a<n&&(n=a),a>i&&(i=a),l<r&&(r=l),l>s&&(s=l)}return new st(n,r,i-n,s-r)};st.fromRectUnion=function(...t){if(t.length===0)return null;const e=new st;let n,r,i,s;n=r=1/0,i=s=-1/0;for(let o=0;o<t.length;o++){e.update(t[o]);const a=e.x,l=e.y,u=a+e.width,c=l+e.height;a<n&&(n=a),u>i&&(i=u),l<r&&(r=l),c>s&&(s=c)}return new st(n,r,i-n,s-r)};st.prototype={type:Qt.Rect,bbox:function(t){return this.clone().rotateAroundCenter(t)},rotateAroundCenter:function(t){if(!t)return this;const{width:e,height:n}=this,r=Hs(t),i=DI(_ue(r)),s=DI(Eue(r)),o=e*s+n*i,a=e*i+n*s;return this.x+=(e-o)/2,this.y+=(n-a)/2,this.width=o,this.height=a,this},bottomLeft:function(){return new fe(this.x,this.y+this.height)},bottomLine:function(){return new ht(this.bottomLeft(),this.bottomRight())},bottomMiddle:function(){return new fe(this.x+this.width/2,this.y+this.height)},center:function(){return new fe(this.x+this.width/2,this.y+this.height/2)},clone:function(){return new st(this)},containsPoint:function(t){return t=new fe(t),t.x>=this.x&&t.x<=this.x+this.width&&t.y>=this.y&&t.y<=this.y+this.height},containsRect:function(t){var e=new st(this).normalize(),n=new st(t).normalize(),r=e.width,i=e.height,s=n.width,o=n.height;if(!r||!i||!s||!o)return!1;var a=e.x,l=e.y,u=n.x,c=n.y;return s+=u,r+=a,o+=c,i+=l,a<=u&&s<=r&&l<=c&&o<=i},corner:function(){return new fe(this.x+this.width,this.y+this.height)},equals:function(t){var e=new st(this).normalize(),n=new st(t).normalize();return e.x===n.x&&e.y===n.y&&e.width===n.width&&e.height===n.height},inflate:function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},intersect:function(t){var e=this.origin(),n=this.corner(),r=t.origin(),i=t.corner();if(i.x<=e.x||i.y<=e.y||r.x>=n.x||r.y>=n.y)return null;var s=FI(e.x,r.x),o=FI(e.y,r.y);return new st(s,o,Bp(n.x,i.x)-s,Bp(n.y,i.y)-o)},intersectionWithLine:function(t){var e=this,n=[e.topLine(),e.rightLine(),e.bottomLine(),e.leftLine()],r=[],i=[],s,o,a=n.length;for(o=0;o<a;o++)s=t.intersect(n[o]),s!==null&&i.indexOf(s.toString())<0&&(r.push(s),i.push(s.toString()));return r.length>0?r:null},intersectionWithLineFromCenterToPoint:function(t,e){t=new fe(t);var n=new fe(this.x+this.width/2,this.y+this.height/2),r;e&&t.rotate(n,e);for(var i=[this.topLine(),this.rightLine(),this.bottomLine(),this.leftLine()],s=new ht(n,t),o=i.length-1;o>=0;--o){var a=i[o].intersection(s);if(a!==null){r=a;break}}return r&&e&&r.rotate(n,-e),r},leftLine:function(){return new ht(this.topLeft(),this.bottomLeft())},leftMiddle:function(){return new fe(this.x,this.y+this.height/2)},maxRectScaleToFit:function(t,e){t=new st(t),e||(e=t.center());var n,r,i,s,o,a,l,u,c=e.x,f=e.y;n=r=i=s=o=a=l=u=1/0;var p=t.topLeft();p.x<c&&(n=(this.x-c)/(p.x-c)),p.y<f&&(o=(this.y-f)/(p.y-f));var v=t.bottomRight();v.x>c&&(r=(this.x+this.width-c)/(v.x-c)),v.y>f&&(a=(this.y+this.height-f)/(v.y-f));var b=t.topRight();b.x>c&&(i=(this.x+this.width-c)/(b.x-c)),b.y<f&&(l=(this.y-f)/(b.y-f));var E=t.bottomLeft();return E.x<c&&(s=(this.x-c)/(E.x-c)),E.y>f&&(u=(this.y+this.height-f)/(E.y-f)),{sx:Bp(n,r,i,s),sy:Bp(o,a,l,u)}},maxRectUniformScaleToFit:function(t,e){var n=this.maxRectScaleToFit(t,e);return Bp(n.sx,n.sy)},moveAndExpand:function(t){return this.x+=t.x||0,this.y+=t.y||0,this.width+=t.width||0,this.height+=t.height||0,this},normalize:function(){var t=this.x,e=this.y,n=this.width,r=this.height;return this.width<0&&(t=this.x+this.width,n=-this.width),this.height<0&&(e=this.y+this.height,r=-this.height),this.x=t,this.y=e,this.width=n,this.height=r,this},offset:function(t,e){return fe.prototype.offset.call(this,t,e)},origin:function(){return new fe(this.x,this.y)},pointNearestToPoint:function(t){if(t=new fe(t),this.containsPoint(t)){var e=this.sideNearestToPoint(t);switch(e){case"right":return new fe(this.x+this.width,t.y);case"left":return new fe(this.x,t.y);case"bottom":return new fe(t.x,this.y+this.height);case"top":return new fe(t.x,this.y)}}return t.adhereToRect(this)},rightLine:function(){return new ht(this.topRight(),this.bottomRight())},rightMiddle:function(){return new fe(this.x+this.width,this.y+this.height/2)},round:function(t){let e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=Aue(10,t);break}return this.x=ny(this.x*e)/e,this.y=ny(this.y*e)/e,this.width=ny(this.width*e)/e,this.height=ny(this.height*e)/e,this},scale:function(t,e,n){return n=this.origin().scale(t,e,n),this.x=n.x,this.y=n.y,this.width*=t,this.height*=e,this},sideNearestToPoint:function(t){t=new fe(t);var e=t.x-this.x,n=this.x+this.width-t.x,r=t.y-this.y,i=this.y+this.height-t.y,s=e,o="left";return n<s&&(s=n,o="right"),r<s&&(s=r,o="top"),i<s&&(o="bottom"),o},snapToGrid:function(t,e){var n=this.origin().snapToGrid(t,e),r=this.corner().snapToGrid(t,e);return this.x=n.x,this.y=n.y,this.width=r.x-n.x,this.height=r.y-n.y,this},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},topLine:function(){return new ht(this.topLeft(),this.topRight())},topMiddle:function(){return new fe(this.x+this.width/2,this.y)},topRight:function(){return new fe(this.x+this.width,this.y)},toString:function(){return this.origin().toString()+" "+this.corner().toString()},union:function(t){return st.fromRectUnion(this,t)},update:function(t,e,n,r){return Object(t)===t&&(e=t.y,n=t.width,r=t.height,t=t.x),this.x=t||0,this.y=e||0,this.width=n||0,this.height=r||0,this}};st.prototype.bottomRight=st.prototype.corner;st.prototype.topLeft=st.prototype.origin;st.prototype.translate=st.prototype.offset;const kue=st;function rB(t){const e=t.trim();if(e==="")return[];const n=[],r=e.split(/\b\s*,\s*|,\s*|\s+/),i=r.length;for(let s=0;s<i;s+=2)n.push({x:+r[s],y:+r[s+1]});return n}function iB(t){const e=t.length;if(e===0)return[];const n=[];for(let r=0;r<e;r++){const i=t[r].clone();n.push(i)}return n}function sB(t){const{abs:e}=Math;var n,r,i=t.length;if(i===0)return[];var s;for(n=0;n<i;n++)(s===void 0||t[n].y<s.y||t[n].y===s.y&&t[n].x>s.x)&&(s=t[n]);var o=[];for(n=0;n<i;n++){var a=s.theta(t[n]);a===0&&(a=360);var l=[t[n],n,a];o.push(l)}if(o.sort(function(G,Z){var de=G[2]-Z[2];return de===0&&(de=Z[1]-G[1]),de}),o.length>2){var u=o[o.length-1];o.unshift(u)}for(var c={},f=[],p,v,b,E,P,S;o.length!==0;)if(p=o.pop(),v=p[0],!c.hasOwnProperty(p[0]+"@@"+p[1]))for(var A=!1;!A;)if(f.length<2)f.push(p),A=!0;else{b=f.pop(),E=b[0],P=f.pop(),S=P[0];var I=S.cross(E,v);if(I<0)f.push(P),f.push(b),f.push(p),A=!0;else if(I===0){var N=1e-10,x=E.angleBetween(S,v);e(x-180)<N||E.equals(v)||S.equals(E)?(c[b[0]+"@@"+b[1]]=E,f.push(P)):e((x+1)%360-1)<N&&(f.push(P),o.push(b))}else c[b[0]+"@@"+b[1]]=E,f.push(P)}f.length>2&&f.pop();var g,_=-1;for(r=f.length,n=0;n<r;n++){var M=f[n][1];(g===void 0||M<g)&&(g=M,_=n)}var D=[];if(_>0){var q=f.slice(_),R=f.slice(0,_);D=q.concat(R)}else D=f;var W=[];for(r=D.length,n=0;n<r;n++)W.push(D[n][0]);return W}const rr=function(t){if(!(this instanceof rr))return new rr(t);if(typeof t=="string")return new rr.parse(t);this.points=Array.isArray(t)?t.map(fe):[]};rr.parse=function(t){return new rr(rB(t))};rr.fromRect=function(t){return new rr([t.topLeft(),t.topRight(),t.bottomRight(),t.bottomLeft(),t.topLeft()])};rr.prototype={type:Qt.Polyline,bbox:function(){var t=1/0,e=-1/0,n=1/0,r=-1/0,i=this.points,s=i.length;if(s===0)return null;for(var o=0;o<s;o++){var a=i[o],l=a.x,u=a.y;l<t&&(t=l),l>e&&(e=l),u<n&&(n=u),u>r&&(r=u)}return new st(t,n,e-t,r-n)},clone:function(){return new rr(iB(this.points))},closestPoint:function(t){var e=this.closestPointLength(t);return this.pointAtLength(e)},closestPointLength:function(t){var e=this.lengthPoints(),n=e.length;if(n===0||n===1)return 0;for(var r,i=1/0,s=0,o=n-1,a=0;a<o;a++){var l=new ht(e[a],e[a+1]),u=l.length(),c=l.closestPointNormalizedLength(t),f=l.pointAt(c),p=f.squaredDistance(t);p<i&&(i=p,r=s+c*u),s+=u}return r},closestPointNormalizedLength:function(t){var e=this.closestPointLength(t);if(e===0)return 0;var n=this.length();return n===0?0:e/n},closestPointTangent:function(t){var e=this.closestPointLength(t);return this.tangentAtLength(e)},containsPoint:function(t){var e=this.points,n=e.length;if(n===0)return!1;for(var r=t.x,i=t.y,s=n-1,o=0,a=0,l=new ht,u=new ht,c=new fe;o<n;o++){var f=e[s],p=e[o];if(t.equals(f)||(l.start=f,l.end=p,l.containsPoint(t)))return!0;if(i<=f.y&&i>p.y||i>f.y&&i<=p.y){var v=f.x-r>p.x-r?f.x-r:p.x-r;v>=0&&(c.x=r+v,c.y=i,u.start=t,u.end=c,l.intersect(u)&&a++)}s=o}return a%2===1},close:function(){const{start:t,end:e,points:n}=this;return t&&e&&!t.equals(e)&&n.push(t.clone()),this},lengthPoints:function(){return this.points},convexHull:function(){return new rr(sB(this.points))},equals:function(t){if(!t)return!1;var e=this.points,n=t.points,r=e.length;if(n.length!==r)return!1;for(var i=0;i<r;i++){var s=e[i],o=t.points[i];if(!s.equals(o))return!1}return!0},intersectionWithLine:function(t){for(var e=new ht(t),n=[],r=this.lengthPoints(),i=new ht,s=0,o=r.length-1;s<o;s++){i.start=r[s],i.end=r[s+1];var a=e.intersectionWithLine(i);a&&n.push(a[0])}return n.length>0?n:null},isDifferentiable:function(){var t=this.points,e=t.length;if(e===0)return!1;for(var n=new ht,r=e-1,i=0;i<r;i++)if(n.start=t[i],n.end=t[i+1],n.isDifferentiable())return!0;return!1},length:function(){var t=this.lengthPoints(),e=t.length;if(e===0)return 0;for(var n=0,r=e-1,i=0;i<r;i++)n+=t[i].distance(t[i+1]);return n},pointAt:function(t){var e=this.lengthPoints(),n=e.length;if(n===0)return null;if(n===1||t<=0)return e[0].clone();if(t>=1)return e[n-1].clone();var r=this.length(),i=r*t;return this.pointAtLength(i)},pointAtLength:function(t){var e=this.lengthPoints(),n=e.length;if(n===0)return null;if(n===1)return e[0].clone();var r=!0;t<0&&(r=!1,t=-t);for(var i=0,s=n-1,o=0;o<s;o++){var a=r?o:s-1-o,l=e[a],u=e[a+1],c=new ht(l,u),f=l.distance(u);if(t<=i+f)return c.pointAtLength((r?1:-1)*(t-i));i+=f}var p=r?e[n-1]:e[0];return p.clone()},round:function(t){for(var e=this.points,n=e.length,r=0;r<n;r++)e[r].round(t);return this},scale:function(t,e,n){for(var r=this.points,i=r.length,s=0;s<i;s++)r[s].scale(t,e,n);return this},simplify:function(t={}){const e=this.points;if(e.length<3)return this;const n=t.threshold||0;let r=0;for(;e[r+2];){const i=r,s=r+1,o=r+2,a=e[i],l=e[s],u=e[o];new ht(a,u).closestPoint(l).distance(l)<=n?e.splice(s,1):r+=1}return this},tangentAt:function(t){var e=this.lengthPoints(),n=e.length;if(n===0||n===1)return null;t<0&&(t=0),t>1&&(t=1);var r=this.length(),i=r*t;return this.tangentAtLength(i)},tangentAtLength:function(t){var e=this.lengthPoints(),n=e.length;if(n===0||n===1)return null;var r=!0;t<0&&(r=!1,t=-t);for(var i,s=0,o=n-1,a=0;a<o;a++){var l=r?a:o-1-a,u=e[l],c=e[l+1],f=new ht(u,c),p=u.distance(c);if(f.isDifferentiable()){if(t<=s+p)return f.tangentAtLength((r?1:-1)*(t-s));i=f}s+=p}if(i){var v=r?1:0;return i.tangentAt(v)}return null},toString:function(){return this.points+""},translate:function(t,e){for(var n=this.points,r=n.length,i=0;i<r;i++)n[i].translate(t,e);return this},serialize:function(){var t=this.points,e=t.length;if(e===0)return"";for(var n="",r=0;r<e;r++){var i=t[r];n+=i.x+","+i.y+" "}return n.trim()}};Object.defineProperty(rr.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var t=this.points,e=t.length;return e===0?null:this.points[0]}});Object.defineProperty(rr.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var t=this.points,e=t.length;return e===0?null:this.points[e-1]}});const{abs:ry,sqrt:Cue,min:VI,max:BI,pow:jS}=Math,Ln=function(t,e,n,r){if(!(this instanceof Ln))return new Ln(t,e,n,r);if(t instanceof Ln)return new Ln(t.start,t.controlPoint1,t.controlPoint2,t.end);this.start=new fe(t),this.controlPoint1=new fe(e),this.controlPoint2=new fe(n),this.end=new fe(r)};Ln.throughPoints=function(){function t(n){var r=[],i=[],s=n.length-1,o;if(s==1)return r[0]=new fe((2*n[0].x+n[1].x)/3,(2*n[0].y+n[1].y)/3),i[0]=new fe(2*r[0].x-n[0].x,2*r[0].y-n[0].y),[r,i];var a=[];for(o=1;o<s-1;o++)a[o]=4*n[o].x+2*n[o+1].x;a[0]=n[0].x+2*n[1].x,a[s-1]=(8*n[s-1].x+n[s].x)/2;var l=e(a);for(o=1;o<s-1;++o)a[o]=4*n[o].y+2*n[o+1].y;a[0]=n[0].y+2*n[1].y,a[s-1]=(8*n[s-1].y+n[s].y)/2;var u=e(a);for(o=0;o<s;o++)r.push(new fe(l[o],u[o])),o<s-1?i.push(new fe(2*n[o+1].x-l[o+1],2*n[o+1].y-u[o+1])):i.push(new fe((n[s].x+l[s-1])/2,(n[s].y+u[s-1])/2));return[r,i]}function e(n){var r=n.length,i=[],s=[],o=2;i[0]=n[0]/o;for(var a=1;a<r;a++)s[a]=1/o,o=(a<r-1?4:3.5)-s[a],i[a]=(n[a]-i[a-1])/o;for(a=1;a<r;a++)i[r-a-1]-=s[r-a]*i[r-a];return i}return function(n){if(!n||Array.isArray(n)&&n.length<2)throw new Error("At least 2 points are required");for(var r=t(n),i=[],s=r[0].length,o=0;o<s;o++){var a=new fe(r[0][o].x,r[0][o].y),l=new fe(r[1][o].x,r[1][o].y);i.push(new Ln(n[o],a,l,n[o+1]))}return i}}();Ln.prototype={type:Qt.Curve,bbox:function(){for(var t=this.start,e=this.controlPoint1,n=this.controlPoint2,r=this.end,i=t.x,s=t.y,o=e.x,a=e.y,l=n.x,u=n.y,c=r.x,f=r.y,p=new Array,v=new Array,b=[new Array,new Array],E,P,S,A,I,N,x,g,_=0;_<2;++_){if(_===0?(P=6*i-12*o+6*l,E=-3*i+9*o-9*l+3*c,S=3*o-3*i):(P=6*s-12*a+6*u,E=-3*s+9*a-9*u+3*f,S=3*a-3*s),ry(E)<1e-12){if(ry(P)<1e-12)continue;A=-S/P,0<A&&A<1&&v.push(A);continue}x=P*P-4*S*E,g=Cue(x),!(x<0)&&(I=(-P+g)/(2*E),0<I&&I<1&&v.push(I),N=(-P-g)/(2*E),0<N&&N<1&&v.push(N))}for(var M=v.length,D=M,q,R,W;M--;)A=v[M],q=1-A,R=q*q*q*i+3*q*q*A*o+3*q*A*A*l+A*A*A*c,b[0][M]=R,W=q*q*q*s+3*q*q*A*a+3*q*A*A*u+A*A*A*f,b[1][M]=W,p[M]={X:R,Y:W};v[D]=0,v[D+1]=1,p[D]={X:i,Y:s},p[D+1]={X:c,Y:f},b[0][D]=i,b[1][D]=s,b[0][D+1]=c,b[1][D+1]=f,v.length=D+2,b[0].length=D+2,b[1].length=D+2,p.length=D+2;var G=VI.apply(null,b[0]),Z=VI.apply(null,b[1]),de=BI.apply(null,b[0]),be=BI.apply(null,b[1]);return new st(G,Z,de-G,be-Z)},clone:function(){return new Ln(this.start,this.controlPoint1,this.controlPoint2,this.end)},closestPoint:function(t,e){return this.pointAtT(this.closestPointT(t,e))},closestPointLength:function(t,e){e=e||{};var n=e.precision===void 0?this.PRECISION:e.precision,r=e.subdivisions===void 0?this.getSubdivisions({precision:n}):e.subdivisions,i={precision:n,subdivisions:r};return this.lengthAtT(this.closestPointT(t,i),i)},closestPointNormalizedLength:function(t,e){e=e||{};var n=e.precision===void 0?this.PRECISION:e.precision,r=e.subdivisions===void 0?this.getSubdivisions({precision:n}):e.subdivisions,i={precision:n,subdivisions:r},s=this.closestPointLength(t,i);if(!s)return 0;var o=this.length(i);return o===0?0:s/o},closestPointT:function(t,e){e=e||{};for(var n=e.precision===void 0?this.PRECISION:e.precision,r=e.subdivisions===void 0?this.getSubdivisions({precision:n}):e.subdivisions,i,s,o,a,l,u,c,f=r.length,p=f?1/f:0,v=0;v<f;v++){var b=r[v],E=b.start.distance(t),P=b.end.distance(t),S=E+P;(!c||S<c)&&(i=b,s=v*p,o=(v+1)*p,a=E,l=P,u=b.start.distance(b.end),c=S)}for(var A=jS(10,-n);;){var I=a?ry(a-l)/a:0,N=l?ry(a-l)/l:0,x=I<A||N<A,g=a?a<u*A:!0,_=l?l<u*A:!0,M=g||_;if(x||M)return a<=l?s:o;var D=i.divide(.5);p/=2;var q=D[0].start.distance(t),R=D[0].end.distance(t),W=q+R,G=D[1].start.distance(t),Z=D[1].end.distance(t),de=G+Z;W<=de?(i=D[0],o-=p,a=q,l=R):(i=D[1],s+=p,a=G,l=Z)}},closestPointTangent:function(t,e){return this.tangentAtT(this.closestPointT(t,e))},containsPoint:function(t,e){var n=this.toPolyline(e);return n.containsPoint(t)},divideAt:function(t,e){if(t<=0)return this.divideAtT(0);if(t>=1)return this.divideAtT(1);var n=this.tAt(t,e);return this.divideAtT(n)},divideAtLength:function(t,e){var n=this.tAtLength(t,e);return this.divideAtT(n)},divideAtT:function(t){var e=this.start,n=this.controlPoint1,r=this.controlPoint2,i=this.end;if(t<=0)return[new Ln(e,e,e,e),new Ln(e,n,r,i)];if(t>=1)return[new Ln(e,n,r,i),new Ln(i,i,i,i)];var s=this.getSkeletonPoints(t),o=s.startControlPoint1,a=s.startControlPoint2,l=s.divider,u=s.dividerControlPoint1,c=s.dividerControlPoint2;return[new Ln(e,o,a,l),new Ln(l,u,c,i)]},endpointDistance:function(){return this.start.distance(this.end)},equals:function(t){return!!t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.controlPoint1.x===t.controlPoint1.x&&this.controlPoint1.y===t.controlPoint1.y&&this.controlPoint2.x===t.controlPoint2.x&&this.controlPoint2.y===t.controlPoint2.y&&this.end.x===t.end.x&&this.end.y===t.end.y},getSkeletonPoints:function(t){var e=this.start,n=this.controlPoint1,r=this.controlPoint2,i=this.end;if(t<=0)return{startControlPoint1:e.clone(),startControlPoint2:e.clone(),divider:e.clone(),dividerControlPoint1:n.clone(),dividerControlPoint2:r.clone()};if(t>=1)return{startControlPoint1:n.clone(),startControlPoint2:r.clone(),divider:i.clone(),dividerControlPoint1:i.clone(),dividerControlPoint2:i.clone()};var s=new ht(e,n).pointAt(t),o=new ht(n,r).pointAt(t),a=new ht(r,i).pointAt(t),l=new ht(s,o).pointAt(t),u=new ht(o,a).pointAt(t),c=new ht(l,u).pointAt(t),f={startControlPoint1:s,startControlPoint2:l,divider:c,dividerControlPoint1:u,dividerControlPoint2:a};return f},getSubdivisions:function(t){t=t||{};var e=t.precision===void 0?this.PRECISION:t.precision,n=this.start,r=this.controlPoint1,i=this.controlPoint2,s=this.end,o=[new Ln(n,r,i,s)];if(e===0)return o;var a=!this.isDifferentiable();if(a)return o;var l=this.endpointDistance(),u=jS(10,-e),c=2,f=r.cross(n,s)===0&&i.cross(n,s)===0;f&&(c=2*e);for(var p=0;;){p+=1;for(var v=[],b=o.length,E=0;E<b;E++){var P=o[E],S=P.divide(.5);v.push(S[0],S[1])}for(var A=0,I=v.length,N=0;N<I;N++){var x=v[N];A+=x.endpointDistance()}if(p>=c){var g=A!==0?(A-l)/A:0;if(g<u)return v}o=v,l=A}},isDifferentiable:function(){var t=this.start,e=this.controlPoint1,n=this.controlPoint2,r=this.end;return!(t.equals(e)&&e.equals(n)&&n.equals(r))},length:function(t){t=t||{};for(var e=t.precision===void 0?this.PRECISION:t.precision,n=t.subdivisions===void 0?this.getSubdivisions({precision:e}):t.subdivisions,r=0,i=n.length,s=0;s<i;s++){var o=n[s];r+=o.endpointDistance()}return r},lengthAtT:function(t,e){if(t<=0)return 0;e=e||{};var n=e.precision===void 0?this.PRECISION:e.precision,r=this.divide(t)[0],i=r.length({precision:n});return i},pointAt:function(t,e){if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();var n=this.tAt(t,e);return this.pointAtT(n)},pointAtLength:function(t,e){var n=this.tAtLength(t,e);return this.pointAtT(n)},pointAtT:function(t){return t<=0?this.start.clone():t>=1?this.end.clone():this.getSkeletonPoints(t).divider},PRECISION:3,round:function(t){return this.start.round(t),this.controlPoint1.round(t),this.controlPoint2.round(t),this.end.round(t),this},scale:function(t,e,n){return this.start.scale(t,e,n),this.controlPoint1.scale(t,e,n),this.controlPoint2.scale(t,e,n),this.end.scale(t,e,n),this},tangentAt:function(t,e){if(!this.isDifferentiable())return null;t<0?t=0:t>1&&(t=1);var n=this.tAt(t,e);return this.tangentAtT(n)},tangentAtLength:function(t,e){if(!this.isDifferentiable())return null;var n=this.tAtLength(t,e);return this.tangentAtT(n)},tangentAtT:function(t){if(!this.isDifferentiable())return null;t<0?t=0:t>1&&(t=1);var e=this.getSkeletonPoints(t),n=e.startControlPoint2,r=e.dividerControlPoint1,i=e.divider,s=new ht(n,r);return s.translate(i.x-n.x,i.y-n.y),s},tAt:function(t,e){if(t<=0)return 0;if(t>=1)return 1;e=e||{};var n=e.precision===void 0?this.PRECISION:e.precision,r=e.subdivisions===void 0?this.getSubdivisions({precision:n}):e.subdivisions,i={precision:n,subdivisions:r},s=this.length(i),o=s*t;return this.tAtLength(o,i)},tAtLength:function(t,e){var n=!0;t<0&&(n=!1,t=-t),e=e||{};for(var r=e.precision===void 0?this.PRECISION:e.precision,i=e.subdivisions===void 0?this.getSubdivisions({precision:r}):e.subdivisions,s={precision:r,subdivisions:i},o,a,l,u,c,f=0,p=i.length,v=1/p,b=0;b<p;b++){var E=n?b:p-1-b,P=i[b],S=P.endpointDistance();if(t<=f+S){o=P,a=E*v,l=(E+1)*v,u=n?t-f:S+f-t,c=n?S+f-t:t-f;break}f+=S}if(!o)return n?1:0;for(var A=this.length(s),I=jS(10,-r);;){var N;if(N=A!==0?u/A:0,N<I)return a;if(N=A!==0?c/A:0,N<I)return l;var x,g,_=o.divide(.5);v/=2;var M=_[0].endpointDistance(),D=_[1].endpointDistance();u<=M?(o=_[0],l-=v,x=u,g=M-x):(o=_[1],a+=v,x=u-M,g=D-x),u=x,c=g}},toPoints:function(t){t=t||{};for(var e=t.precision===void 0?this.PRECISION:t.precision,n=t.subdivisions===void 0?this.getSubdivisions({precision:e}):t.subdivisions,r=[n[0].start.clone()],i=n.length,s=0;s<i;s++){var o=n[s];r.push(o.end.clone())}return r},toPolyline:function(t){return new rr(this.toPoints(t))},toString:function(){return this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(t,e){return this.start.translate(t,e),this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e),this}};Ln.prototype.divide=Ln.prototype.divideAtT;function Xm(t){var e,n,r=[];for(n=arguments.length,e=1;e<n;e++)r.push(arguments[e]);if(!t)throw new Error("Missing a parent object.");var i=Object.create(t);for(n=r.length,e=0;e<n;e++){var s=r[e],o,a;for(a in s)s.hasOwnProperty(a)&&(delete i[a],o=Object.getOwnPropertyDescriptor(s,a),Object.defineProperty(i,a,o))}return i}const wt=function(t){if(!(this instanceof wt))return new wt(t);if(typeof t=="string")return new wt.parse(t);this.segments=[];var e,n;if(t)if(Array.isArray(t)&&t.length!==0)if(t=t.reduce(function(a,l){return a.concat(l)},[]),n=t.length,t[0].isSegment)for(e=0;e<n;e++){var r=t[e];this.appendSegment(r)}else{var i=null;for(e=0;e<n;e++){var s=t[e];if(!(s instanceof ht||s instanceof Ln))throw new Error("Cannot construct a path segment from the provided object.");e===0&&this.appendSegment(wt.createSegment("M",s.start)),i&&!i.end.equals(s.start)&&this.appendSegment(wt.createSegment("M",s.start)),s instanceof ht?this.appendSegment(wt.createSegment("L",s.end)):s instanceof Ln&&this.appendSegment(wt.createSegment("C",s.controlPoint1,s.controlPoint2,s.end)),i=s}}else if(t.isSegment)this.appendSegment(t);else if(t instanceof ht)this.appendSegment(wt.createSegment("M",t.start)),this.appendSegment(wt.createSegment("L",t.end));else if(t instanceof Ln)this.appendSegment(wt.createSegment("M",t.start)),this.appendSegment(wt.createSegment("C",t.controlPoint1,t.controlPoint2,t.end));else if(t instanceof rr){if(!(t.points&&t.points.length!==0))return;for(n=t.points.length,e=0;e<n;e++){var o=t.points[e];e===0?this.appendSegment(wt.createSegment("M",o)):this.appendSegment(wt.createSegment("L",o))}}else throw new Error("Cannot construct a path from the provided object.")};wt.parse=function(t){if(!t)return new wt;for(var e=new wt,n=/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g,r=t.match(n),i=r.length,s=0;s<i;s++){var o=r[s],a=/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g,l=o.match(a),u=wt.createSegment.apply(this,l);e.appendSegment(u)}return e};wt.createSegment=function(t){if(!t)throw new Error("Type must be provided.");var e=wt.segmentTypes[t];if(!e)throw new Error(t+" is not a recognized path segment type.");for(var n=[],r=arguments.length,i=1;i<r;i++)n.push(arguments[i]);return rl(e,n)};wt.prototype={type:Qt.Path,appendSegment:function(t){var e=this.segments,n=e.length,r,i=n!==0?e[n-1]:null,s=null;if(Array.isArray(t)){if(t=t.reduce(function(u,c){return u.concat(c)},[]),!t[0].isSegment)throw new Error("Segments required.");for(var o=t.length,a=0;a<o;a++){var l=t[a];r=this.prepareSegment(l,i,s),e.push(r),i=r}}else{if(!t||!t.isSegment)throw new Error("Segment required.");r=this.prepareSegment(t,i,s),e.push(r)}},bbox:function(){var t=this.segments,e=t.length;if(e===0)return null;for(var n,r=0;r<e;r++){var i=t[r];if(i.isVisible){var s=i.bbox();n=n?n.union(s):s}}if(n)return n;var o=t[e-1];return new st(o.end.x,o.end.y,0,0)},clone:function(){for(var t=this.segments,e=t.length,n=new wt,r=0;r<e;r++){var i=t[r].clone();n.appendSegment(i)}return n},closestPoint:function(t,e){var n=this.closestPointT(t,e);return n?this.pointAtT(n):null},closestPointLength:function(t,e){e=e||{};var n=e.precision===void 0?this.PRECISION:e.precision,r=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions,i={precision:n,segmentSubdivisions:r},s=this.closestPointT(t,i);return s?this.lengthAtT(s,i):0},closestPointNormalizedLength:function(t,e){e=e||{};var n=e.precision===void 0?this.PRECISION:e.precision,r=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions,i={precision:n,segmentSubdivisions:r},s=this.closestPointLength(t,i);if(s===0)return 0;var o=this.length(i);return o===0?0:s/o},closestPointT:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;e=e||{};for(var i=e.precision===void 0?this.PRECISION:e.precision,s=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,o,a=1/0,l=0;l<r;l++){var u=n[l],c=s[l];if(u.isVisible){var f=u.closestPointT(t,{precision:i,subdivisions:c}),p=u.pointAtT(f),v=new ht(p,t).squaredLength();v<a&&(o={segmentIndex:l,value:f},a=v)}}return o||{segmentIndex:r-1,value:1}},closestPointTangent:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;e=e||{};for(var i=e.precision===void 0?this.PRECISION:e.precision,s=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,o,a=1/0,l=0;l<r;l++){var u=n[l],c=s[l];if(u.isDifferentiable()){var f=u.closestPointT(t,{precision:i,subdivisions:c}),p=u.pointAtT(f),v=new ht(p,t).squaredLength();v<a&&(o=u.tangentAtT(f),a=v)}}return o||null},containsPoint:function(t,e){var n=this.toPolylines(e);if(!n)return!1;for(var r=n.length,i=0,s=0;s<r;s++){var o=n[s];o.containsPoint(t)&&i++}return i%2===1},divideAt:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;t<0&&(t=0),t>1&&(t=1),e=e||{};var i=e.precision===void 0?this.PRECISION:e.precision,s=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,o={precision:i,segmentSubdivisions:s},a=this.length(o),l=a*t;return this.divideAtLength(l,o)},divideAtLength:function(t,e){var n=this.segments.length;if(n===0)return null;var r=!0;t<0&&(r=!1,t=-t),e=e||{};var i=e.precision===void 0?this.PRECISION:e.precision,s=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,o,a,l=0,u,c,f,p,v;for(o=0;o<n;o++){var b=r?o:n-1-o;a=this.getSegment(b);var E=s[b],P=a.length({precision:i,subdivisions:E});if(a.isDifferentiable()&&(f=a,p=b,t<=l+P)){c=b,u=a.divideAtLength((r?1:-1)*(t-l),{precision:i,subdivisions:E});break}l+=P}if(!f)return null;u||(c=p,v=r?1:0,u=f.divideAtT(v));var S=this.clone();S.replaceSegment(c,u);var A=c,I=c+1,N=c+2;u[0].isDifferentiable()||(S.removeSegment(A),I-=1,N-=1);var x=S.getSegment(I).start;S.insertSegment(I,wt.createSegment("M",x)),N+=1,u[1].isDifferentiable()||(S.removeSegment(N-1),N-=1);var g=N-A-1;for(o=N;o<S.segments.length;o++){var _=this.getSegment(o-g);if(a=S.getSegment(o),a.type==="Z"&&!_.subpathStartSegment.end.equals(a.subpathStartSegment.end)){var M=wt.createSegment("L",_.end);S.replaceSegment(o,M)}}var D=new wt(S.segments.slice(0,I)),q=new wt(S.segments.slice(I));return[D,q]},equals:function(t){if(!t)return!1;var e=this.segments,n=t.segments,r=e.length;if(n.length!==r)return!1;for(var i=0;i<r;i++){var s=e[i],o=n[i];if(s.type!==o.type||!s.equals(o))return!1}return!0},getSegment:function(t){var e=this.segments,n=e.length;if(n===0)throw new Error("Path has no segments.");if(t<0&&(t=n+t),t>=n||t<0)throw new Error("Index out of range.");return e[t]},getSegmentSubdivisions:function(t){var e=this.segments,n=e.length;t=t||{};for(var r=t.precision===void 0?this.PRECISION:t.precision,i=[],s=0;s<n;s++){var o=e[s],a=o.getSubdivisions({precision:r});i.push(a)}return i},getSubpaths:function(){const e=this.clone().validate().segments,n=e.length,r=[];for(let i=0;i<n;i++){const s=e[i];s.isSubpathStart?r.push(new wt(s)):r[r.length-1].appendSegment(s)}return r},insertSegment:function(t,e){var n=this.segments,r=n.length;if(t<0&&(t=r+t+1),t>r||t<0)throw new Error("Index out of range.");var i,s=null,o=null;if(r!==0&&(t>=1?(s=n[t-1],o=s.nextSegment):o=n[0]),Array.isArray(e)){if(e=e.reduce(function(c,f){return c.concat(f)},[]),!e[0].isSegment)throw new Error("Segments required.");for(var a=e.length,l=0;l<a;l++){var u=e[l];i=this.prepareSegment(u,s,o),n.splice(t+l,0,i),s=i}}else{if(!e||!e.isSegment)throw new Error("Segment required.");i=this.prepareSegment(e,s,o),n.splice(t,0,i)}},intersectionWithLine:function(t,e){var n=null,r=this.toPolylines(e);if(!r)return null;for(var i=0,s=r.length;i<s;i++){var o=r[i],a=t.intersect(o);a&&(n||(n=[]),Array.isArray(a)?Array.prototype.push.apply(n,a):n.push(a))}return n},isDifferentiable:function(){for(var t=this.segments,e=t.length,n=0;n<e;n++){var r=t[n];if(r.isDifferentiable())return!0}return!1},isValid:function(){var t=this.segments,e=t.length===0||t[0].type==="M";return e},length:function(t){var e=this.segments,n=e.length;if(n===0)return 0;t=t||{};for(var r=t.precision===void 0?this.PRECISION:t.precision,i=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:r}):t.segmentSubdivisions,s=0,o=0;o<n;o++){var a=e[o],l=i[o];s+=a.length({subdivisions:l})}return s},lengthAtT:function(t,e){var n=this.segments,r=n.length;if(r===0)return 0;var i=t.segmentIndex;if(i<0)return 0;var s=t.value;i>=r?(i=r-1,s=1):s<0?s=0:s>1&&(s=1),e=e||{};for(var o=e.precision===void 0?this.PRECISION:e.precision,a=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions,l,u=0,c=0;c<i;c++){var f=n[c];l=a[c],u+=f.length({precisison:o,subdivisions:l})}return f=n[i],l=a[i],u+=f.lengthAtT(s,{precisison:o,subdivisions:l}),u},pointAt:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();e=e||{};var i=e.precision===void 0?this.PRECISION:e.precision,s=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,o={precision:i,segmentSubdivisions:s},a=this.length(o),l=a*t;return this.pointAtLength(l,o)},pointAtLength:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;if(t===0)return this.start.clone();var i=!0;t<0&&(i=!1,t=-t),e=e||{};for(var s=e.precision===void 0?this.PRECISION:e.precision,o=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:s}):e.segmentSubdivisions,a,l=0,u=0;u<r;u++){var c=i?u:r-1-u,f=n[c],p=o[c],v=f.length({precision:s,subdivisions:p});if(f.isVisible){if(t<=l+v)return f.pointAtLength((i?1:-1)*(t-l),{precision:s,subdivisions:p});a=f}l+=v}if(a)return i?a.end:a.start;var b=n[r-1];return b.end.clone()},pointAtT:function(t){var e=this.segments,n=e.length;if(n===0)return null;var r=t.segmentIndex;if(r<0)return e[0].pointAtT(0);if(r>=n)return e[n-1].pointAtT(1);var i=t.value;return i<0?i=0:i>1&&(i=1),e[r].pointAtT(i)},PRECISION:3,prepareSegment:function(t,e,n){t.previousSegment=e,t.nextSegment=n,e&&(e.nextSegment=t),n&&(n.previousSegment=t);var r=t;return t.isSubpathStart&&(t.subpathStartSegment=t,r=n),r&&this.updateSubpathStartSegment(r),t},removeSegment:function(t){var e=this.segments,n=e.length;if(n===0)throw new Error("Path has no segments.");if(t<0&&(t=n+t),t>=n||t<0)throw new Error("Index out of range.");var r=e.splice(t,1)[0],i=r.previousSegment,s=r.nextSegment;i&&(i.nextSegment=s),s&&(s.previousSegment=i),r.isSubpathStart&&s&&this.updateSubpathStartSegment(s)},replaceSegment:function(t,e){var n=this.segments,r=n.length;if(r===0)throw new Error("Path has no segments.");if(t<0&&(t=r+t),t>=r||t<0)throw new Error("Index out of range.");var i,s=n[t],o=s.previousSegment,a=s.nextSegment,l=s.isSubpathStart;if(Array.isArray(e)){if(e=e.reduce(function(p,v){return p.concat(v)},[]),!e[0].isSegment)throw new Error("Segments required.");n.splice(t,1);for(var u=e.length,c=0;c<u;c++){var f=e[c];i=this.prepareSegment(f,o,a),n.splice(t+c,0,i),o=i,l&&i.isSubpathStart&&(l=!1)}}else{if(!e||!e.isSegment)throw new Error("Segment required.");i=this.prepareSegment(e,o,a),n.splice(t,1,i),l&&i.isSubpathStart&&(l=!1)}l&&a&&this.updateSubpathStartSegment(a)},round:function(t){for(var e=this.segments,n=e.length,r=0;r<n;r++){var i=e[r];i.round(t)}return this},scale:function(t,e,n){for(var r=this.segments,i=r.length,s=0;s<i;s++){var o=r[s];o.scale(t,e,n)}return this},segmentAt:function(t,e){var n=this.segmentIndexAt(t,e);return n?this.getSegment(n):null},segmentAtLength:function(t,e){var n=this.segmentIndexAtLength(t,e);return n?this.getSegment(n):null},segmentIndexAt:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;t<0&&(t=0),t>1&&(t=1),e=e||{};var i=e.precision===void 0?this.PRECISION:e.precision,s=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,o={precision:i,segmentSubdivisions:s},a=this.length(o),l=a*t;return this.segmentIndexAtLength(l,o)},segmentIndexAtLength:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;var i=!0;t<0&&(i=!1,t=-t),e=e||{};for(var s=e.precision===void 0?this.PRECISION:e.precision,o=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:s}):e.segmentSubdivisions,a=null,l=0,u=0;u<r;u++){var c=i?u:r-1-u,f=n[c],p=o[c],v=f.length({precision:s,subdivisions:p});if(f.isVisible){if(t<=l+v)return c;a=c}l+=v}return a},serialize:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.toString()},tangentAt:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;t<0&&(t=0),t>1&&(t=1),e=e||{};var i=e.precision===void 0?this.PRECISION:e.precision,s=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,o={precision:i,segmentSubdivisions:s},a=this.length(o),l=a*t;return this.tangentAtLength(l,o)},tangentAtLength:function(t,e){var n=this.segments,r=n.length;if(r===0)return null;var i=!0;t<0&&(i=!1,t=-t),e=e||{};for(var s=e.precision===void 0?this.PRECISION:e.precision,o=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:s}):e.segmentSubdivisions,a,l=0,u=0;u<r;u++){var c=i?u:r-1-u,f=n[c],p=o[c],v=f.length({precision:s,subdivisions:p});if(f.isDifferentiable()){if(t<=l+v)return f.tangentAtLength((i?1:-1)*(t-l),{precision:s,subdivisions:p});a=f}l+=v}if(a){var b=i?1:0;return a.tangentAtT(b)}return null},tangentAtT:function(t){var e=this.segments,n=e.length;if(n===0)return null;var r=t.segmentIndex;if(r<0)return e[0].tangentAtT(0);if(r>=n)return e[n-1].tangentAtT(1);var i=t.value;return i<0?i=0:i>1&&(i=1),e[r].tangentAtT(i)},toPoints:function(t){var e=this.segments,n=e.length;if(n===0)return null;t=t||{};for(var r=t.precision===void 0?this.PRECISION:t.precision,i=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:r}):t.segmentSubdivisions,s=[],o=[],a=0;a<n;a++){var l=e[a];if(l.isVisible){var u=i[a];if(u.length>0){var c=u.map(function(f){return f.start});Array.prototype.push.apply(o,c)}else o.push(l.start)}else o.length>0&&(o.push(e[a-1].end),s.push(o),o=[])}return o.length>0&&(o.push(this.end),s.push(o)),s},toPolylines:function(t){var e=[],n=this.toPoints(t);if(!n)return null;for(var r=0,i=n.length;r<i;r++)e.push(new rr(n[r]));return e},toString:function(){for(var t=this.segments,e=t.length,n="",r=0;r<e;r++){var i=t[r];n+=i.serialize()+" "}return n.trim()},translate:function(t,e){for(var n=this.segments,r=n.length,i=0;i<r;i++){var s=n[i];s.translate(t,e)}return this},updateSubpathStartSegment:function(t){for(var e=t.previousSegment;t&&!t.isSubpathStart;)e?t.subpathStartSegment=e.subpathStartSegment:t.subpathStartSegment=null,e=t,t=t.nextSegment},validate:function(){return this.isValid()||this.insertSegment(0,wt.createSegment("M",0,0)),this}};Object.defineProperty(wt.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var t=this.segments,e=t.length;if(e===0)return null;for(var n=0;n<e;n++){var r=t[n];if(r.isVisible)return r.start}return t[e-1].end}});Object.defineProperty(wt.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var t=this.segments,e=t.length;if(e===0)return null;for(var n=e-1;n>=0;n--){var r=t[n];if(r.isVisible)return r.end}return t[e-1].end}});function rl(t,e){return e.unshift(null),new(Function.prototype.bind.apply(t,e))}var Zf={bbox:function(){throw new Error("Declaration missing for virtual function.")},clone:function(){throw new Error("Declaration missing for virtual function.")},closestPoint:function(){throw new Error("Declaration missing for virtual function.")},closestPointLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointNormalizedLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointT:function(t){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(t);throw new Error("Neither closestPointT() nor closestPointNormalizedLength() function is implemented.")},closestPointTangent:function(){throw new Error("Declaration missing for virtual function.")},divideAt:function(){throw new Error("Declaration missing for virtual function.")},divideAtLength:function(){throw new Error("Declaration missing for virtual function.")},divideAtT:function(t){if(this.divideAt)return this.divideAt(t);throw new Error("Neither divideAtT() nor divideAt() function is implemented.")},equals:function(){throw new Error("Declaration missing for virtual function.")},getSubdivisions:function(){throw new Error("Declaration missing for virtual function.")},isDifferentiable:function(){throw new Error("Declaration missing for virtual function.")},isSegment:!0,isSubpathStart:!1,isVisible:!0,length:function(){throw new Error("Declaration missing for virtual function.")},lengthAtT:function(t){if(t<=0)return 0;var e=this.length();return t>=1?e:e*t},nextSegment:null,pointAt:function(){throw new Error("Declaration missing for virtual function.")},pointAtLength:function(){throw new Error("Declaration missing for virtual function.")},pointAtT:function(t){if(this.pointAt)return this.pointAt(t);throw new Error("Neither pointAtT() nor pointAt() function is implemented.")},previousSegment:null,round:function(){throw new Error("Declaration missing for virtual function.")},subpathStartSegment:null,scale:function(){throw new Error("Declaration missing for virtual function.")},serialize:function(){throw new Error("Declaration missing for virtual function.")},tangentAt:function(){throw new Error("Declaration missing for virtual function.")},tangentAtLength:function(){throw new Error("Declaration missing for virtual function.")},tangentAtT:function(t){if(this.tangentAt)return this.tangentAt(t);throw new Error("Neither tangentAtT() nor tangentAt() function is implemented.")},toString:function(){throw new Error("Declaration missing for virtual function.")},translate:function(){throw new Error("Declaration missing for virtual function.")}};Object.defineProperty(Zf,"end",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(Zf,"start",{configurable:!0,enumerable:!0,get:function(){if(!this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path; OR segment has not yet been added to a path.)");return this.previousSegment.end}});Object.defineProperty(Zf,"type",{configurable:!0,enumerable:!0,get:function(){throw new Error("Bad segment declaration. No type specified.")}});var Ti=function(){for(var t=[],e=arguments.length,n=0;n<e;n++)t.push(arguments[n]);if(!(this instanceof Ti))return rl(Ti,t);if(e===0)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates (none provided).");var r;if(t[0]instanceof ht){if(e===1)return this.end=t[0].end.clone(),this;throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+e+" lines provided).")}else if(typeof t[0]=="string"||typeof t[0]=="number"){if(e===2)return this.end=new fe(+t[0],+t[1]),this;if(e<2)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+e+" coordinates provided).");var i;for(r=[],n=0;n<e;n+=2)i=t.slice(n,n+2),r.push(rl(Ti,i));return r}else{if(e===1)return this.end=new fe(t[0]),this;var s;for(r=[],n=0;n<e;n+=1)s=t[n],r.push(new Ti(s));return r}},oB={clone:function(){return new Ti(this.end)},divideAt:function(t){var e=new ht(this.start,this.end),n=e.divideAt(t);return[new Ti(n[0]),new Ti(n[1])]},divideAtLength:function(t){var e=new ht(this.start,this.end),n=e.divideAtLength(t);return[new Ti(n[0]),new Ti(n[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return this.previousSegment?!this.start.equals(this.end):!1},round:function(t){return this.end.round(t),this},scale:function(t,e,n){return this.end.scale(t,e,n),this},serialize:function(){var t=this.end;return this.type+" "+t.x+" "+t.y},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(t,e){return this.end.translate(t,e),this}};Object.defineProperty(oB,"type",{configurable:!0,enumerable:!0,value:"L"});Ti.prototype=Xm(Zf,ht.prototype,oB);var ao=function(){for(var t=[],e=arguments.length,n=0;n<e;n++)t.push(arguments[n]);if(!(this instanceof ao))return rl(ao,t);if(e===0)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates (none provided).");var r;if(t[0]instanceof Ln){if(e===1)return this.controlPoint1=t[0].controlPoint1.clone(),this.controlPoint2=t[0].controlPoint2.clone(),this.end=t[0].end.clone(),this;throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+e+" curves provided).")}else if(typeof t[0]=="string"||typeof t[0]=="number"){if(e===6)return this.controlPoint1=new fe(+t[0],+t[1]),this.controlPoint2=new fe(+t[2],+t[3]),this.end=new fe(+t[4],+t[5]),this;if(e<6)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+e+" coordinates provided).");var i;for(r=[],n=0;n<e;n+=6)i=t.slice(n,n+6),r.push(rl(ao,i));return r}else{if(e===3)return this.controlPoint1=new fe(t[0]),this.controlPoint2=new fe(t[1]),this.end=new fe(t[2]),this;if(e<3)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+e+" points provided).");var s;for(r=[],n=0;n<e;n+=3)s=t.slice(n,n+3),r.push(rl(ao,s));return r}},aB={clone:function(){return new ao(this.controlPoint1,this.controlPoint2,this.end)},divideAt:function(t,e){var n=new Ln(this.start,this.controlPoint1,this.controlPoint2,this.end),r=n.divideAt(t,e);return[new ao(r[0]),new ao(r[1])]},divideAtLength:function(t,e){var n=new Ln(this.start,this.controlPoint1,this.controlPoint2,this.end),r=n.divideAtLength(t,e);return[new ao(r[0]),new ao(r[1])]},divideAtT:function(t){var e=new Ln(this.start,this.controlPoint1,this.controlPoint2,this.end),n=e.divideAtT(t);return[new ao(n[0]),new ao(n[1])]},isDifferentiable:function(){if(!this.previousSegment)return!1;var t=this.start,e=this.controlPoint1,n=this.controlPoint2,r=this.end;return!(t.equals(e)&&e.equals(n)&&n.equals(r))},round:function(t){return this.controlPoint1.round(t),this.controlPoint2.round(t),this.end.round(t),this},scale:function(t,e,n){return this.controlPoint1.scale(t,e,n),this.controlPoint2.scale(t,e,n),this.end.scale(t,e,n),this},serialize:function(){var t=this.controlPoint1,e=this.controlPoint2,n=this.end;return this.type+" "+t.x+" "+t.y+" "+e.x+" "+e.y+" "+n.x+" "+n.y},toString:function(){return this.type+" "+this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(t,e){return this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e),this}};Object.defineProperty(aB,"type",{configurable:!0,enumerable:!0,value:"C"});ao.prototype=Xm(Zf,Ln.prototype,aB);var hf=function(){for(var t=[],e=arguments.length,n=0;n<e;n++)t.push(arguments[n]);if(!(this instanceof hf))return rl(hf,t);if(e===0)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (none provided).");var r;if(t[0]instanceof ht){if(e===1)return this.end=t[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+e+" lines provided).")}else if(t[0]instanceof Ln){if(e===1)return this.end=t[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+e+" curves provided).")}else if(typeof t[0]=="string"||typeof t[0]=="number"){if(e===2)return this.end=new fe(+t[0],+t[1]),this;if(e<2)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+e+" coordinates provided).");var i;for(r=[],n=0;n<e;n+=2)i=t.slice(n,n+2),n===0?r.push(rl(hf,i)):r.push(rl(Ti,i));return r}else{if(e===1)return this.end=new fe(t[0]),this;var s;for(r=[],n=0;n<e;n+=1)s=t[n],n===0?r.push(new hf(s)):r.push(new Ti(s));return r}},UC={bbox:function(){return null},clone:function(){return new hf(this.end)},closestPoint:function(){return this.end.clone()},closestPointNormalizedLength:function(){return 0},closestPointLength:function(){return 0},closestPointT:function(){return 1},closestPointTangent:function(){return null},divideAt:function(){return[this.clone(),this.clone()]},divideAtLength:function(){return[this.clone(),this.clone()]},equals:function(t){return this.end.equals(t.end)},getSubdivisions:function(){return[]},isDifferentiable:function(){return!1},isSubpathStart:!0,isVisible:!1,length:function(){return 0},lengthAtT:function(){return 0},pointAt:function(){return this.end.clone()},pointAtLength:function(){return this.end.clone()},pointAtT:function(){return this.end.clone()},round:function(t){return this.end.round(t),this},scale:function(t,e,n){return this.end.scale(t,e,n),this},serialize:function(){var t=this.end;return this.type+" "+t.x+" "+t.y},tangentAt:function(){return null},tangentAtLength:function(){return null},tangentAtT:function(){return null},toString:function(){return this.type+" "+this.end},translate:function(t,e){return this.end.translate(t,e),this}};Object.defineProperty(UC,"start",{configurable:!0,enumerable:!0,get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}});Object.defineProperty(UC,"type",{configurable:!0,enumerable:!0,value:"M"});hf.prototype=Xm(Zf,UC);var Md=function(){for(var t=[],e=arguments.length,n=0;n<e;n++)t.push(arguments[n]);if(!(this instanceof Md))return rl(Md,t);if(e>0)throw new Error("Closepath constructor expects no arguments.");return this},qC={clone:function(){return new Md},divideAt:function(t){var e=new ht(this.start,this.end),n=e.divideAt(t);return[n[1].isDifferentiable()?new Ti(n[0]):this.clone(),new Ti(n[1])]},divideAtLength:function(t){var e=new ht(this.start,this.end),n=e.divideAtLength(t);return[n[1].isDifferentiable()?new Ti(n[0]):this.clone(),new Ti(n[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!this.previousSegment||!this.subpathStartSegment?!1:!this.start.equals(this.end)},round:function(){return this},scale:function(){return this},serialize:function(){return this.type},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(){return this}};Object.defineProperty(qC,"end",{configurable:!0,enumerable:!0,get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. Moveto); OR segment has not yet been added to a path.)");return this.subpathStartSegment.end}});Object.defineProperty(qC,"type",{configurable:!0,enumerable:!0,value:"Z"});Md.prototype=Xm(Zf,ht.prototype,qC);var Pue=wt.segmentTypes={L:Ti,C:ao,M:hf,Z:Md,z:Md};wt.regexSupportedData=new RegExp("^[\\s\\d"+Object.keys(Pue).join("")+",.]*$");wt.isDataSupported=function(t){return typeof t!="string"?!1:this.regexSupportedData.test(t)};const Oue={curveThroughPoints:function(t){return console.warn("deprecated"),new wt(Ln.throughPoints(t)).serialize()},getCurveControlPoints:function(t){console.warn("deprecated");var e=[],n=[],r=t.length-1,i;if(r==1)return e[0]=new fe((2*t[0].x+t[1].x)/3,(2*t[0].y+t[1].y)/3),n[0]=new fe(2*e[0].x-t[0].x,2*e[0].y-t[0].y),[e,n];var s=[];for(i=1;i<r-1;i++)s[i]=4*t[i].x+2*t[i+1].x;s[0]=t[0].x+2*t[1].x,s[r-1]=(8*t[r-1].x+t[r].x)/2;var o=this.getFirstControlPoints(s);for(i=1;i<r-1;++i)s[i]=4*t[i].y+2*t[i+1].y;s[0]=t[0].y+2*t[1].y,s[r-1]=(8*t[r-1].y+t[r].y)/2;var a=this.getFirstControlPoints(s);for(i=0;i<r;i++)e.push(new fe(o[i],a[i])),i<r-1?n.push(new fe(2*t[i+1].x-o[i+1],2*t[i+1].y-a[i+1])):n.push(new fe((t[r].x+o[r-1])/2,(t[r].y+a[r-1])/2));return[e,n]},getCurveDivider:function(t,e,n,r){console.warn("deprecated");var i=new Ln(t,e,n,r);return function(o){var a=i.divide(o);return[{p0:a[0].start,p1:a[0].controlPoint1,p2:a[0].controlPoint2,p3:a[0].end},{p0:a[1].start,p1:a[1].controlPoint1,p2:a[1].controlPoint2,p3:a[1].end}]}},getFirstControlPoints:function(t){console.warn("deprecated");var e=t.length,n=[],r=[],i=2;n[0]=t[0]/i;for(var s=1;s<e;s++)r[s]=1/i,i=(s<e-1?4:3.5)-r[s],n[s]=(t[s]-n[s-1])/i;for(s=1;s<e;s++)n[e-s-1]-=r[e-s]*n[e-s];return n},getInversionSolver:function(t,e,n,r){console.warn("deprecated");var i=new Ln(t,e,n,r);return function(o){return i.closestPointT(o)}}},Us=function(t){if(!(this instanceof Us))return new Us(t);if(typeof t=="string")return new Us.parse(t);this.points=Array.isArray(t)?t.map(fe):[]};Us.parse=function(t){return new Us(rB(t))};Us.fromRect=function(t){return new Us([t.topLeft(),t.topRight(),t.bottomRight(),t.bottomLeft()])};Us.prototype=Xm(rr.prototype,{type:Qt.Polygon,clone:function(){return new Us(iB(this.points))},convexHull:function(){return new Us(sB(this.points))},lengthPoints:function(){const{start:t,end:e,points:n}=this;return n.length<=1||t.equals(e)?n:[...n,t.clone()]}});function lB(t,e,n,r){switch(t.type){case Qt.Line:{switch(e.type){case Qt.Line:return df(t,e)}break}case Qt.Ellipse:{switch(e.type){case Qt.Line:return WC(t,e);case Qt.Ellipse:return uB(t,e)}break}case Qt.Rect:{switch(e.type){case Qt.Line:return cB(t,e);case Qt.Ellipse:return fB(t,e);case Qt.Rect:return GC(t,e)}break}case Qt.Polyline:{switch(e.type){case Qt.Line:return sw(t,e);case Qt.Ellipse:return KC(t,e);case Qt.Rect:return hB(t,e);case Qt.Polyline:return dB(t,e)}break}case Qt.Polygon:{switch(e.type){case Qt.Line:return YC(t,e);case Qt.Ellipse:return ow(t,e);case Qt.Rect:return pB(t,e);case Qt.Polyline:return gB(t,e);case Qt.Polygon:return mB(t,e)}break}case Qt.Path:{switch(e.type){case Qt.Line:return vB(t,e,n);case Qt.Ellipse:return yB(t,e,n);case Qt.Rect:return bB(t,e,n);case Qt.Polyline:return JC(t,e,n);case Qt.Polygon:return aw(t,e,n);case Qt.Path:return wB(t,e,n,r)}break}}switch(e.type){case Qt.Ellipse:case Qt.Rect:case Qt.Polyline:case Qt.Polygon:case Qt.Path:return lB(e,t,r,n);default:throw Error(`The intersection for ${t} and ${e} could not be found.`)}}function df(t,e){const n=t.start.x,r=t.start.y,i=t.end.x,s=t.end.y,o=e.start.x,a=e.start.y,l=e.end.x,u=e.end.y,c=i-n,f=s-r,p=l-o,v=u-a,b=n-o,E=r-a,P=c*v-p*f,S=(c*E-f*b)/P,A=(p*E-v*b)/P;return S>=0&&S<=1&&A>=0&&A<=1}function WC(t,e){const n=t.a,r=t.b,i=t.x,s=t.y,o=e.start.x-i,a=e.end.x-i,l=e.start.y-s,u=e.end.y-s,c=n*n,f=r*r,p=a-o,v=u-l,b=p*p/c+v*v/f,E=2*o*p/c+2*l*v/f,P=o*o/c+l*l/f-1,S=E*E-4*b*P;if(S===0){const A=-E/2/b;return A>=0&&A<=1}else if(S>0){const A=Math.sqrt(S),I=(-E+A)/2/b,N=(-E-A)/2/b;return I>=0&&I<=1||N>=0&&N<=1}return!1}function uB(t,e){return Tue(t,0,e,0)}function cB(t,e){const{start:n,end:r}=e,{x:i,y:s,width:o,height:a}=t;return n.x>i+o&&r.x>i+o||n.x<i&&r.x<i||n.y>s+a&&r.y>s+a||n.y<s&&r.y<s?!1:t.containsPoint(e.start)||t.containsPoint(e.end)?!0:df(t.topLine(),e)||df(t.rightLine(),e)||df(t.bottomLine(),e)||df(t.leftLine(),e)}function fB(t,e){return GC(t,st.fromEllipse(e))?ow(Us.fromRect(t),e):!1}function GC(t,e){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}function sw(t,e){return xB(t,e,{interior:!1})}function KC(t,e){return SB(t,e,{interior:!1})}function hB(t,e){return EB(t,e,{interior:!1})}function dB(t,e){return lw(t,e,{interior:!1})}function YC(t,e){return xB(t,e,{interior:!0})}function ow(t,e){return SB(t,e,{interior:!0})}function pB(t,e){return EB(t,e,{interior:!0})}function gB(t,e){return lw(t,e,{interior:!0})}function mB(t,e){return XC(t,e,{interior:!0})}function vB(t,e,n){return t.getSubpaths().some(r=>{const[i]=r.toPolylines(n),{type:s}=r.getSegment(-1);return s==="Z"?YC(i,e):sw(i,e)})}function yB(t,e,n){return t.getSubpaths().some(r=>{const[i]=r.toPolylines(n),{type:s}=r.getSegment(-1);return s==="Z"?ow(i,e):KC(i,e)})}function bB(t,e,n){return aw(t,Us.fromRect(e),n)}function JC(t,e,n){return _B(t,e,n,{interior:!1})}function aw(t,e,n){return _B(t,e,n,{interior:!0})}function wB(t,e,n,r){return t.getSubpaths().some(i=>{const[s]=i.toPolylines(n),{type:o}=i.getSegment(-1);return o==="Z"?aw(e,s,r):JC(e,s,r)})}function xB(t,e,n={}){const{interior:r=!1}=n;let i;if(r){if(t.containsPoint(e.start))return!0;const{start:a,end:l,points:u}=t;i=l.equals(a)?u:[...u,a]}else i=t.points;const{length:s}=i,o=new ht;for(let a=0;a<s-1;a++)if(o.start=i[a],o.end=i[a+1],df(e,o))return!0;return!1}function SB(t,e,n={}){const{start:r,end:i,points:s}=t;if(e.containsPoint(r))return!0;let o;const{interior:a=!1}=n;if(a){if(t.containsPoint(e.center()))return!0;o=i.equals(r)?s:[...s,r]}else o=s;const{length:l}=o,u=new ht;for(let c=0;c<l-1;c++)if(u.start=o[c],u.end=o[c+1],WC(e,u))return!0;return!1}function EB(t,e,n){const r=Us.fromRect(e);return XC(t,r,n)}function _B(t,e,n,r){return t.getSubpaths().some(i=>{const[s]=i.toPolylines(n),{type:o}=i.getSegment(-1);return o==="Z"?XC(e,s,r):lw(e,s,r)})}function lw(t,e,n={}){const{interior:r=!1}=n;let i;if(r){const{start:l}=e;if(t.containsPoint(l))return!0;i=t.clone().close()}else i=t;const s=e.points,{length:o}=s,a=new ht;for(let l=0;l<o-1;l++)if(a.start=s[l],a.end=s[l+1],sw(i,a))return!0;return!1}function XC(t,e,n){return e.containsPoint(t.start)||lw(t,e.clone().close(),n)}function Tue(t,e,n,r){const{cos:i,sin:s}=Math,o=s(e),a=i(e),l=s(r),u=i(r),c=o*o,f=a*a,p=o*a,v=l*l,b=u*u,E=l*u,P=t.a*t.a,S=t.b*t.b,A=n.a*n.a,I=n.b*n.b,N=P*c+S*f,x=A*v+I*b,g=P*f+S*c,_=A*b+I*v;let M=2*(S-P)*p,D=2*(I-A)*E,q=-2*N*t.x-M*t.y,R=-2*x*n.x-D*n.y,W=-M*t.x-2*g*t.y,G=-D*n.x-2*_*n.y;const Z=N*t.x*t.x+g*t.y*t.y+M*t.x*t.y-P*S,de=x*n.x*n.x+_*n.y*n.y+D*n.x*n.y-A*I;M=M/2,D=D/2,q=q/2,R=R/2,W=W/2,G=G/2;const be=Pu([[N,M,q],[M,g,W],[q,W,Z]]),_e=Pu([[x,D,R],[D,_,G],[R,G,de]]),Te=.33333333*(Pu([[x,M,q],[D,g,W],[R,W,Z]])+Pu([[N,D,q],[M,_,W],[q,G,Z]])+Pu([[N,M,R],[M,g,G],[q,W,de]])),Le=.33333333*(Pu([[N,D,R],[M,_,G],[q,G,de]])+Pu([[x,M,R],[D,g,G],[R,W,de]])+Pu([[x,D,q],[D,_,W],[R,G,Z]])),Ee=iy([[be,Te],[Te,Le]]),re=iy([[be,Le],[Te,_e]]),ne=iy([[Te,Le],[Le,_e]]);return!(iy([[2*Ee,re],[re,2*ne]])>0&&(Le>0||Te>0))}function iy(t){return t[0][0]*t[1][1]-t[0][1]*t[1][0]}function Pu(t){return t[0][0]*t[1][1]*t[2][2]-t[0][0]*t[1][2]*t[2][1]-t[0][1]*t[1][0]*t[2][2]+t[0][1]*t[1][2]*t[2][0]+t[0][2]*t[1][0]*t[2][1]-t[0][2]*t[1][1]*t[2][0]}const Mue=Object.freeze(Object.defineProperty({__proto__:null,ellipseWithEllipse:uB,ellipseWithLine:WC,exists:lB,lineWithLine:df,pathWithEllipse:yB,pathWithLine:vB,pathWithPath:wB,pathWithPolygon:aw,pathWithPolyline:JC,pathWithRect:bB,polygonWithEllipse:ow,polygonWithLine:YC,polygonWithPolygon:mB,polygonWithPolyline:gB,polygonWithRect:pB,polylineWithEllipse:KC,polylineWithLine:sw,polylineWithPolyline:dB,polylineWithRect:hB,rectWithEllipse:fB,rectWithLine:cB,rectWithRect:GC},Symbol.toStringTag,{value:"Module"})),Nue=Mue,Iue=Object.freeze(Object.defineProperty({__proto__:null,Curve:Ln,Ellipse:ds,Line:ht,Path:wt,Point:fe,Polygon:Us,Polyline:rr,Rect:st,bezier:Oue,ellipse:Sue,intersection:Nue,line:Ef,normalizeAngle:ul,point:Hb,random:G_,rect:kue,scale:vue,snapToGrid:Vf,toDeg:iw,toRad:Hs,types:Qt},Symbol.toStringTag,{value:"Module"}));var AB={},ZC="1.13.6",jI=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},uw=Array.prototype,QC=Object.prototype,zI=typeof Symbol<"u"?Symbol.prototype:null,$ue=uw.push,Zm=uw.slice,sm=QC.toString,Rue=QC.hasOwnProperty,kB=typeof ArrayBuffer<"u",Lue=typeof DataView<"u",Due=Array.isArray,HI=Object.keys,UI=Object.create,qI=kB&&ArrayBuffer.isView,Fue=isNaN,Vue=isFinite,CB=!{toString:null}.propertyIsEnumerable("toString"),WI=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Bue=Math.pow(2,53)-1;function ms(t,e){return e=e==null?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r);case 2:return t.call(this,arguments[0],arguments[1],r)}var s=Array(e+1);for(i=0;i<e;i++)s[i]=arguments[i];return s[e]=r,t.apply(this,s)}}function gc(t){var e=typeof t;return e==="function"||e==="object"&&!!t}function PB(t){return t===null}function eP(t){return t===void 0}function tP(t){return t===!0||t===!1||sm.call(t)==="[object Boolean]"}function OB(t){return!!(t&&t.nodeType===1)}function Xi(t){var e="[object "+t+"]";return function(n){return sm.call(n)===e}}const cw=Xi("String"),nP=Xi("Number"),TB=Xi("Date"),MB=Xi("RegExp"),NB=Xi("Error"),rP=Xi("Symbol"),iP=Xi("ArrayBuffer");var IB=Xi("Function"),jue=jI.document&&jI.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof jue!="function"&&(IB=function(t){return typeof t=="function"||!1});const Yi=IB,$B=Xi("Object");var RB=Lue&&$B(new DataView(new ArrayBuffer(8))),sP=typeof Map<"u"&&$B(new Map),zue=Xi("DataView");function Hue(t){return t!=null&&Yi(t.getInt8)&&iP(t.buffer)}const om=RB?Hue:zue,mc=Due||Xi("Array");function vc(t,e){return t!=null&&Rue.call(t,e)}var J_=Xi("Arguments");(function(){J_(arguments)||(J_=function(t){return vc(t,"callee")})})();const fw=J_;function LB(t){return!rP(t)&&Vue(t)&&!isNaN(parseFloat(t))}function oP(t){return nP(t)&&Fue(t)}function aP(t){return function(){return t}}function DB(t){return function(e){var n=t(e);return typeof n=="number"&&n>=0&&n<=Bue}}function FB(t){return function(e){return e==null?void 0:e[t]}}const Ub=FB("byteLength"),Uue=DB(Ub);var que=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function Wue(t){return qI?qI(t)&&!om(t):Uue(t)&&que.test(sm.call(t))}const lP=kB?Wue:aP(!1),Gs=FB("length");function Gue(t){for(var e={},n=t.length,r=0;r<n;++r)e[t[r]]=!0;return{contains:function(i){return e[i]===!0},push:function(i){return e[i]=!0,t.push(i)}}}function VB(t,e){e=Gue(e);var n=WI.length,r=t.constructor,i=Yi(r)&&r.prototype||QC,s="constructor";for(vc(t,s)&&!e.contains(s)&&e.push(s);n--;)s=WI[n],s in t&&t[s]!==i[s]&&!e.contains(s)&&e.push(s)}function ui(t){if(!gc(t))return[];if(HI)return HI(t);var e=[];for(var n in t)vc(t,n)&&e.push(n);return CB&&VB(t,e),e}function BB(t){if(t==null)return!0;var e=Gs(t);return typeof e=="number"&&(mc(t)||cw(t)||fw(t))?e===0:Gs(ui(t))===0}function uP(t,e){var n=ui(e),r=n.length;if(t==null)return!r;for(var i=Object(t),s=0;s<r;s++){var o=n[s];if(e[o]!==i[o]||!(o in i))return!1}return!0}function Hn(t){if(t instanceof Hn)return t;if(!(this instanceof Hn))return new Hn(t);this._wrapped=t}Hn.VERSION=ZC;Hn.prototype.value=function(){return this._wrapped};Hn.prototype.valueOf=Hn.prototype.toJSON=Hn.prototype.value;Hn.prototype.toString=function(){return String(this._wrapped)};function GI(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,Ub(t))}var KI="[object DataView]";function X_(t,e,n,r){if(t===e)return t!==0||1/t===1/e;if(t==null||e==null)return!1;if(t!==t)return e!==e;var i=typeof t;return i!=="function"&&i!=="object"&&typeof e!="object"?!1:jB(t,e,n,r)}function jB(t,e,n,r){t instanceof Hn&&(t=t._wrapped),e instanceof Hn&&(e=e._wrapped);var i=sm.call(t);if(i!==sm.call(e))return!1;if(RB&&i=="[object Object]"&&om(t)){if(!om(e))return!1;i=KI}switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:+t==0?1/+t===1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return zI.valueOf.call(t)===zI.valueOf.call(e);case"[object ArrayBuffer]":case KI:return jB(GI(t),GI(e),n,r)}var s=i==="[object Array]";if(!s&&lP(t)){var o=Ub(t);if(o!==Ub(e))return!1;if(t.buffer===e.buffer&&t.byteOffset===e.byteOffset)return!0;s=!0}if(!s){if(typeof t!="object"||typeof e!="object")return!1;var a=t.constructor,l=e.constructor;if(a!==l&&!(Yi(a)&&a instanceof a&&Yi(l)&&l instanceof l)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],r=r||[];for(var u=n.length;u--;)if(n[u]===t)return r[u]===e;if(n.push(t),r.push(e),s){if(u=t.length,u!==e.length)return!1;for(;u--;)if(!X_(t[u],e[u],n,r))return!1}else{var c=ui(t),f;if(u=c.length,ui(e).length!==u)return!1;for(;u--;)if(f=c[u],!(vc(e,f)&&X_(t[f],e[f],n,r)))return!1}return n.pop(),r.pop(),!0}function zB(t,e){return X_(t,e)}function Jd(t){if(!gc(t))return[];var e=[];for(var n in t)e.push(n);return CB&&VB(t,e),e}function cP(t){var e=Gs(t);return function(n){if(n==null)return!1;var r=Jd(n);if(Gs(r))return!1;for(var i=0;i<e;i++)if(!Yi(n[t[i]]))return!1;return t!==qB||!Yi(n[fP])}}var fP="forEach",HB="has",hP=["clear","delete"],UB=["get",HB,"set"],Kue=hP.concat(fP,UB),qB=hP.concat(UB),Yue=["add"].concat(hP,fP,HB);const WB=sP?cP(Kue):Xi("Map"),GB=sP?cP(qB):Xi("WeakMap"),KB=sP?cP(Yue):Xi("Set"),YB=Xi("WeakSet");function Qf(t){for(var e=ui(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r}function JB(t){for(var e=ui(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r}function dP(t){for(var e={},n=ui(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e}function am(t){var e=[];for(var n in t)Yi(t[n])&&e.push(n);return e.sort()}function pP(t,e){return function(n){var r=arguments.length;if(e&&(n=Object(n)),r<2||n==null)return n;for(var i=1;i<r;i++)for(var s=arguments[i],o=t(s),a=o.length,l=0;l<a;l++){var u=o[l];(!e||n[u]===void 0)&&(n[u]=s[u])}return n}}const gP=pP(Jd),Nd=pP(ui),mP=pP(Jd,!0);function Jue(){return function(){}}function XB(t){if(!gc(t))return{};if(UI)return UI(t);var e=Jue();e.prototype=t;var n=new e;return e.prototype=null,n}function ZB(t,e){var n=XB(t);return e&&Nd(n,e),n}function QB(t){return gc(t)?mc(t)?t.slice():gP({},t):t}function e5(t,e){return e(t),t}function vP(t){return mc(t)?t:[t]}Hn.toPath=vP;function Qm(t){return Hn.toPath(t)}function yP(t,e){for(var n=e.length,r=0;r<n;r++){if(t==null)return;t=t[e[r]]}return n?t:void 0}function bP(t,e,n){var r=yP(t,Qm(e));return eP(r)?n:r}function t5(t,e){e=Qm(e);for(var n=e.length,r=0;r<n;r++){var i=e[r];if(!vc(t,i))return!1;t=t[i]}return!!n}function hw(t){return t}function Bf(t){return t=Nd({},t),function(e){return uP(e,t)}}function dw(t){return t=Qm(t),function(e){return yP(e,t)}}function ev(t,e,n){if(e===void 0)return t;switch(n??3){case 1:return function(r){return t.call(e,r)};case 3:return function(r,i,s){return t.call(e,r,i,s)};case 4:return function(r,i,s,o){return t.call(e,r,i,s,o)}}return function(){return t.apply(e,arguments)}}function n5(t,e,n){return t==null?hw:Yi(t)?ev(t,e,n):gc(t)&&!mc(t)?Bf(t):dw(t)}function pw(t,e){return n5(t,e,1/0)}Hn.iteratee=pw;function Ys(t,e,n){return Hn.iteratee!==pw?Hn.iteratee(t,e):n5(t,e,n)}function r5(t,e,n){e=Ys(e,n);for(var r=ui(t),i=r.length,s={},o=0;o<i;o++){var a=r[o];s[a]=e(t[a],a,t)}return s}function wP(){}function i5(t){return t==null?wP:function(e){return bP(t,e)}}function s5(t,e,n){var r=Array(Math.max(0,t));e=ev(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r}function qb(t,e){return e==null&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}const Id=Date.now||function(){return new Date().getTime()};function o5(t){var e=function(s){return t[s]},n="(?:"+ui(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(s){return s=s==null?"":""+s,r.test(s)?s.replace(i,e):s}}const a5={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},l5=o5(a5),Xue=dP(a5),u5=o5(Xue),c5=Hn.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var zS=/(.)^/,Zue={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Que=/\\|'|\r|\n|\u2028|\u2029/g;function ece(t){return"\\"+Zue[t]}var tce=/^\s*(\w|\$)+\s*$/;function f5(t,e,n){!e&&n&&(e=n),e=mP({},e,Hn.templateSettings);var r=RegExp([(e.escape||zS).source,(e.interpolate||zS).source,(e.evaluate||zS).source].join("|")+"|$","g"),i=0,s="__p+='";t.replace(r,function(u,c,f,p,v){return s+=t.slice(i,v).replace(Que,ece),i=v+u.length,c?s+=`'+
((__t=(`+c+`))==null?'':_.escape(__t))+
'`:f?s+=`'+
((__t=(`+f+`))==null?'':__t)+
'`:p&&(s+=`';
`+p+`
__p+='`),u}),s+=`';
`;var o=e.variable;if(o){if(!tce.test(o))throw new Error("variable is not a bare identifier: "+o)}else s=`with(obj||{}){
`+s+`}
`,o="obj";s=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+s+`return __p;
`;var a;try{a=new Function(o,"_",s)}catch(u){throw u.source=s,u}var l=function(u){return a.call(this,u,Hn)};return l.source="function("+o+`){
`+s+"}",l}function h5(t,e,n){e=Qm(e);var r=e.length;if(!r)return Yi(n)?n.call(t):n;for(var i=0;i<r;i++){var s=t==null?void 0:t[e[i]];s===void 0&&(s=n,i=r),t=Yi(s)?s.call(t):s}return t}var nce=0;function d5(t){var e=++nce+"";return t?t+e:e}function p5(t){var e=Hn(t);return e._chain=!0,e}function g5(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var s=XB(t.prototype),o=t.apply(s,i);return gc(o)?o:s}var eh=ms(function(t,e){var n=eh.placeholder,r=function(){for(var i=0,s=e.length,o=Array(s),a=0;a<s;a++)o[a]=e[a]===n?arguments[i++]:e[a];for(;i<arguments.length;)o.push(arguments[i++]);return g5(t,r,this,this,o)};return r});eh.placeholder=Hn;const xP=ms(function(t,e,n){if(!Yi(t))throw new TypeError("Bind must be called on a function");var r=ms(function(i){return g5(t,r,e,this,n.concat(i))});return r}),yo=DB(Gs);function th(t,e,n,r){if(r=r||[],!e&&e!==0)e=1/0;else if(e<=0)return r.concat(t);for(var i=r.length,s=0,o=Gs(t);s<o;s++){var a=t[s];if(yo(a)&&(mc(a)||fw(a)))if(e>1)th(a,e-1,n,r),i=r.length;else for(var l=0,u=a.length;l<u;)r[i++]=a[l++];else n||(r[i++]=a)}return r}const m5=ms(function(t,e){e=th(e,!1,!1);var n=e.length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=e[n];t[r]=xP(t[r],t)}return t});function v5(t,e){var n=function(r){var i=n.cache,s=""+(e?e.apply(this,arguments):r);return vc(i,s)||(i[s]=t.apply(this,arguments)),i[s]};return n.cache={},n}const SP=ms(function(t,e,n){return setTimeout(function(){return t.apply(null,n)},e)}),y5=eh(SP,Hn,1);function b5(t,e,n){var r,i,s,o,a=0;n||(n={});var l=function(){a=n.leading===!1?0:Id(),r=null,o=t.apply(i,s),r||(i=s=null)},u=function(){var c=Id();!a&&n.leading===!1&&(a=c);var f=e-(c-a);return i=this,s=arguments,f<=0||f>e?(r&&(clearTimeout(r),r=null),a=c,o=t.apply(i,s),r||(i=s=null)):!r&&n.trailing!==!1&&(r=setTimeout(l,f)),o};return u.cancel=function(){clearTimeout(r),a=0,r=i=s=null},u}function w5(t,e,n){var r,i,s,o,a,l=function(){var c=Id()-i;e>c?r=setTimeout(l,e-c):(r=null,n||(o=t.apply(a,s)),r||(s=a=null))},u=ms(function(c){return a=this,s=c,i=Id(),r||(r=setTimeout(l,e),n&&(o=t.apply(a,s))),o});return u.cancel=function(){clearTimeout(r),r=s=a=null},u}function x5(t,e){return eh(e,t)}function gw(t){return function(){return!t.apply(this,arguments)}}function S5(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}}function E5(t,e){return function(){if(--t<1)return e.apply(this,arguments)}}function EP(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}}const _5=eh(EP,2);function _P(t,e,n){e=Ys(e,n);for(var r=ui(t),i,s=0,o=r.length;s<o;s++)if(i=r[s],e(t[i],i,t))return i}function A5(t){return function(e,n,r){n=Ys(n,r);for(var i=Gs(e),s=t>0?0:i-1;s>=0&&s<i;s+=t)if(n(e[s],s,e))return s;return-1}}const mw=A5(1),AP=A5(-1);function kP(t,e,n,r){n=Ys(n,r,1);for(var i=n(e),s=0,o=Gs(t);s<o;){var a=Math.floor((s+o)/2);n(t[a])<i?s=a+1:o=a}return s}function k5(t,e,n){return function(r,i,s){var o=0,a=Gs(r);if(typeof s=="number")t>0?o=s>=0?s:Math.max(s+a,o):a=s>=0?Math.min(s+1,a):s+a+1;else if(n&&s&&a)return s=n(r,i),r[s]===i?s:-1;if(i!==i)return s=e(Zm.call(r,o,a),oP),s>=0?s+o:-1;for(s=t>0?o:a-1;s>=0&&s<a;s+=t)if(r[s]===i)return s;return-1}}const CP=k5(1,mw,kP),C5=k5(-1,AP);function lm(t,e,n){var r=yo(t)?mw:_P,i=r(t,e,n);if(i!==void 0&&i!==-1)return t[i]}function P5(t,e){return lm(t,Bf(e))}function Sa(t,e,n){e=ev(e,n);var r,i;if(yo(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var s=ui(t);for(r=0,i=s.length;r<i;r++)e(t[s[r]],s[r],t)}return t}function nu(t,e,n){e=Ys(e,n);for(var r=!yo(t)&&ui(t),i=(r||t).length,s=Array(i),o=0;o<i;o++){var a=r?r[o]:o;s[o]=e(t[a],a,t)}return s}function O5(t){var e=function(n,r,i,s){var o=!yo(n)&&ui(n),a=(o||n).length,l=t>0?0:a-1;for(s||(i=n[o?o[l]:l],l+=t);l>=0&&l<a;l+=t){var u=o?o[l]:l;i=r(i,n[u],u,n)}return i};return function(n,r,i,s){var o=arguments.length>=3;return e(n,ev(r,s,4),i,o)}}const ad=O5(1),Wb=O5(-1);function dc(t,e,n){var r=[];return e=Ys(e,n),Sa(t,function(i,s,o){e(i,s,o)&&r.push(i)}),r}function T5(t,e,n){return dc(t,gw(Ys(e)),n)}function Gb(t,e,n){e=Ys(e,n);for(var r=!yo(t)&&ui(t),i=(r||t).length,s=0;s<i;s++){var o=r?r[s]:s;if(!e(t[o],o,t))return!1}return!0}function Kb(t,e,n){e=Ys(e,n);for(var r=!yo(t)&&ui(t),i=(r||t).length,s=0;s<i;s++){var o=r?r[s]:s;if(e(t[o],o,t))return!0}return!1}function qo(t,e,n,r){return yo(t)||(t=Qf(t)),(typeof n!="number"||r)&&(n=0),CP(t,e,n)>=0}const M5=ms(function(t,e,n){var r,i;return Yi(e)?i=e:(e=Qm(e),r=e.slice(0,-1),e=e[e.length-1]),nu(t,function(s){var o=i;if(!o){if(r&&r.length&&(s=yP(s,r)),s==null)return;o=s[e]}return o==null?o:o.apply(s,n)})});function vw(t,e){return nu(t,dw(e))}function N5(t,e){return dc(t,Bf(e))}function PP(t,e,n){var r=-1/0,i=-1/0,s,o;if(e==null||typeof e=="number"&&typeof t[0]!="object"&&t!=null){t=yo(t)?t:Qf(t);for(var a=0,l=t.length;a<l;a++)s=t[a],s!=null&&s>r&&(r=s)}else e=Ys(e,n),Sa(t,function(u,c,f){o=e(u,c,f),(o>i||o===-1/0&&r===-1/0)&&(r=u,i=o)});return r}function I5(t,e,n){var r=1/0,i=1/0,s,o;if(e==null||typeof e=="number"&&typeof t[0]!="object"&&t!=null){t=yo(t)?t:Qf(t);for(var a=0,l=t.length;a<l;a++)s=t[a],s!=null&&s<r&&(r=s)}else e=Ys(e,n),Sa(t,function(u,c,f){o=e(u,c,f),(o<i||o===1/0&&r===1/0)&&(r=u,i=o)});return r}var rce=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function OP(t){return t?mc(t)?Zm.call(t):cw(t)?t.match(rce):yo(t)?nu(t,hw):Qf(t):[]}function TP(t,e,n){if(e==null||n)return yo(t)||(t=Qf(t)),t[qb(t.length-1)];var r=OP(t),i=Gs(r);e=Math.max(Math.min(e,i),0);for(var s=i-1,o=0;o<e;o++){var a=qb(o,s),l=r[o];r[o]=r[a],r[a]=l}return r.slice(0,e)}function $5(t){return TP(t,1/0)}function R5(t,e,n){var r=0;return e=Ys(e,n),vw(nu(t,function(i,s,o){return{value:i,index:r++,criteria:e(i,s,o)}}).sort(function(i,s){var o=i.criteria,a=s.criteria;if(o!==a){if(o>a||o===void 0)return 1;if(o<a||a===void 0)return-1}return i.index-s.index}),"value")}function yw(t,e){return function(n,r,i){var s=e?[[],[]]:{};return r=Ys(r,i),Sa(n,function(o,a){var l=r(o,a,n);t(s,o,l)}),s}}const L5=yw(function(t,e,n){vc(t,n)?t[n].push(e):t[n]=[e]}),D5=yw(function(t,e,n){t[n]=e}),F5=yw(function(t,e,n){vc(t,n)?t[n]++:t[n]=1}),V5=yw(function(t,e,n){t[n?0:1].push(e)},!0);function B5(t){return t==null?0:yo(t)?t.length:ui(t).length}function ice(t,e,n){return e in n}const MP=ms(function(t,e){var n={},r=e[0];if(t==null)return n;Yi(r)?(e.length>1&&(r=ev(r,e[1])),e=Jd(t)):(r=ice,e=th(e,!1,!1),t=Object(t));for(var i=0,s=e.length;i<s;i++){var o=e[i],a=t[o];r(a,o,t)&&(n[o]=a)}return n}),j5=ms(function(t,e){var n=e[0],r;return Yi(n)?(n=gw(n),e.length>1&&(r=e[1])):(e=nu(th(e,!1,!1),String),n=function(i,s){return!qo(e,s)}),MP(t,n,r)});function NP(t,e,n){return Zm.call(t,0,Math.max(0,t.length-(e==null||n?1:e)))}function ld(t,e,n){return t==null||t.length<1?e==null||n?void 0:[]:e==null||n?t[0]:NP(t,t.length-e)}function _f(t,e,n){return Zm.call(t,e==null||n?1:e)}function z5(t,e,n){return t==null||t.length<1?e==null||n?void 0:[]:e==null||n?t[t.length-1]:_f(t,Math.max(0,t.length-e))}function H5(t){return dc(t,Boolean)}function U5(t,e){return th(t,e,!1)}const IP=ms(function(t,e){return e=th(e,!0,!0),dc(t,function(n){return!qo(e,n)})}),q5=ms(function(t,e){return IP(t,e)});function um(t,e,n,r){tP(e)||(r=n,n=e,e=!1),n!=null&&(n=Ys(n,r));for(var i=[],s=[],o=0,a=Gs(t);o<a;o++){var l=t[o],u=n?n(l,o,t):l;e&&!n?((!o||s!==u)&&i.push(l),s=u):n?qo(s,u)||(s.push(u),i.push(l)):qo(i,l)||i.push(l)}return i}const W5=ms(function(t){return um(th(t,!0,!0))});function G5(t){for(var e=[],n=arguments.length,r=0,i=Gs(t);r<i;r++){var s=t[r];if(!qo(e,s)){var o;for(o=1;o<n&&qo(arguments[o],s);o++);o===n&&e.push(s)}}return e}function cm(t){for(var e=t&&PP(t,Gs).length||0,n=Array(e),r=0;r<e;r++)n[r]=vw(t,r);return n}const K5=ms(cm);function Y5(t,e){for(var n={},r=0,i=Gs(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n}function J5(t,e,n){e==null&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),s=0;s<r;s++,t+=n)i[s]=t;return i}function X5(t,e){if(e==null||e<1)return[];for(var n=[],r=0,i=t.length;r<i;)n.push(Zm.call(t,r,r+=e));return n}function $P(t,e){return t._chain?Hn(e).chain():e}function RP(t){return Sa(am(t),function(e){var n=Hn[e]=t[e];Hn.prototype[e]=function(){var r=[this._wrapped];return $ue.apply(r,arguments),$P(this,n.apply(Hn,r))}}),Hn}Sa(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=uw[t];Hn.prototype[t]=function(){var n=this._wrapped;return n!=null&&(e.apply(n,arguments),(t==="shift"||t==="splice")&&n.length===0&&delete n[0]),$P(this,n)}});Sa(["concat","join","slice"],function(t){var e=uw[t];Hn.prototype[t]=function(){var n=this._wrapped;return n!=null&&(n=e.apply(n,arguments)),$P(this,n)}});const sce=Object.freeze(Object.defineProperty({__proto__:null,VERSION:ZC,after:E5,all:Gb,allKeys:Jd,any:Kb,assign:Nd,before:EP,bind:xP,bindAll:m5,chain:p5,chunk:X5,clone:QB,collect:nu,compact:H5,compose:S5,constant:aP,contains:qo,countBy:F5,create:ZB,debounce:w5,default:Hn,defaults:mP,defer:y5,delay:SP,detect:lm,difference:IP,drop:_f,each:Sa,escape:l5,every:Gb,extend:gP,extendOwn:Nd,filter:dc,find:lm,findIndex:mw,findKey:_P,findLastIndex:AP,findWhere:P5,first:ld,flatten:U5,foldl:ad,foldr:Wb,forEach:Sa,functions:am,get:bP,groupBy:L5,has:t5,head:ld,identity:hw,include:qo,includes:qo,indexBy:D5,indexOf:CP,initial:NP,inject:ad,intersection:G5,invert:dP,invoke:M5,isArguments:fw,isArray:mc,isArrayBuffer:iP,isBoolean:tP,isDataView:om,isDate:TB,isElement:OB,isEmpty:BB,isEqual:zB,isError:NB,isFinite:LB,isFunction:Yi,isMap:WB,isMatch:uP,isNaN:oP,isNull:PB,isNumber:nP,isObject:gc,isRegExp:MB,isSet:KB,isString:cw,isSymbol:rP,isTypedArray:lP,isUndefined:eP,isWeakMap:GB,isWeakSet:YB,iteratee:pw,keys:ui,last:z5,lastIndexOf:C5,map:nu,mapObject:r5,matcher:Bf,matches:Bf,max:PP,memoize:v5,methods:am,min:I5,mixin:RP,negate:gw,noop:wP,now:Id,object:Y5,omit:j5,once:_5,pairs:JB,partial:eh,partition:V5,pick:MP,pluck:vw,property:dw,propertyOf:i5,random:qb,range:J5,reduce:ad,reduceRight:Wb,reject:T5,rest:_f,restArguments:ms,result:h5,sample:TP,select:dc,shuffle:$5,size:B5,some:Kb,sortBy:R5,sortedIndex:kP,tail:_f,take:ld,tap:e5,template:f5,templateSettings:c5,throttle:b5,times:s5,toArray:OP,toPath:vP,transpose:cm,unescape:u5,union:W5,uniq:um,unique:um,uniqueId:d5,unzip:cm,values:Qf,where:N5,without:q5,wrap:x5,zip:K5},Symbol.toStringTag,{value:"Module"}));var Z_=RP(sce);Z_._=Z_;const oce=Object.freeze(Object.defineProperty({__proto__:null,VERSION:ZC,after:E5,all:Gb,allKeys:Jd,any:Kb,assign:Nd,before:EP,bind:xP,bindAll:m5,chain:p5,chunk:X5,clone:QB,collect:nu,compact:H5,compose:S5,constant:aP,contains:qo,countBy:F5,create:ZB,debounce:w5,default:Z_,defaults:mP,defer:y5,delay:SP,detect:lm,difference:IP,drop:_f,each:Sa,escape:l5,every:Gb,extend:gP,extendOwn:Nd,filter:dc,find:lm,findIndex:mw,findKey:_P,findLastIndex:AP,findWhere:P5,first:ld,flatten:U5,foldl:ad,foldr:Wb,forEach:Sa,functions:am,get:bP,groupBy:L5,has:t5,head:ld,identity:hw,include:qo,includes:qo,indexBy:D5,indexOf:CP,initial:NP,inject:ad,intersection:G5,invert:dP,invoke:M5,isArguments:fw,isArray:mc,isArrayBuffer:iP,isBoolean:tP,isDataView:om,isDate:TB,isElement:OB,isEmpty:BB,isEqual:zB,isError:NB,isFinite:LB,isFunction:Yi,isMap:WB,isMatch:uP,isNaN:oP,isNull:PB,isNumber:nP,isObject:gc,isRegExp:MB,isSet:KB,isString:cw,isSymbol:rP,isTypedArray:lP,isUndefined:eP,isWeakMap:GB,isWeakSet:YB,iteratee:pw,keys:ui,last:z5,lastIndexOf:C5,map:nu,mapObject:r5,matcher:Bf,matches:Bf,max:PP,memoize:v5,methods:am,min:I5,mixin:RP,negate:gw,noop:wP,now:Id,object:Y5,omit:j5,once:_5,pairs:JB,partial:eh,partition:V5,pick:MP,pluck:vw,property:dw,propertyOf:i5,random:qb,range:J5,reduce:ad,reduceRight:Wb,reject:T5,rest:_f,restArguments:ms,result:h5,sample:TP,select:dc,shuffle:$5,size:B5,some:Kb,sortBy:R5,sortedIndex:kP,tail:_f,take:ld,tap:e5,template:f5,templateSettings:c5,throttle:b5,times:s5,toArray:OP,toPath:vP,transpose:cm,unescape:u5,union:W5,uniq:um,unique:um,uniqueId:d5,unzip:cm,values:Qf,where:N5,without:q5,wrap:x5,zip:K5},Symbol.toStringTag,{value:"Module"})),ace=hV(oce);var HS={exports:{}};/*!
 * jQuery JavaScript Library v3.6.4
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-03-08T15:28Z
 */var YI;function Z5(){return YI||(YI=1,function(t){(function(e,n){t.exports=e.document?n(e,!0):function(r){if(!r.document)throw new Error("jQuery requires a window with a document");return n(r)}})(typeof window<"u"?window:si,function(e,n){var r=[],i=Object.getPrototypeOf,s=r.slice,o=r.flat?function(m){return r.flat.call(m)}:function(m){return r.concat.apply([],m)},a=r.push,l=r.indexOf,u={},c=u.toString,f=u.hasOwnProperty,p=f.toString,v=p.call(Object),b={},E=function(w){return typeof w=="function"&&typeof w.nodeType!="number"&&typeof w.item!="function"},P=function(w){return w!=null&&w===w.window},S=e.document,A={type:!0,src:!0,nonce:!0,noModule:!0};function I(m,w,k){k=k||S;var O,L,B=k.createElement("script");if(B.text=m,w)for(O in A)L=w[O]||w.getAttribute&&w.getAttribute(O),L&&B.setAttribute(O,L);k.head.appendChild(B).parentNode.removeChild(B)}function N(m){return m==null?m+"":typeof m=="object"||typeof m=="function"?u[c.call(m)]||"object":typeof m}var x="3.6.4",g=function(m,w){return new g.fn.init(m,w)};g.fn=g.prototype={jquery:x,constructor:g,length:0,toArray:function(){return s.call(this)},get:function(m){return m==null?s.call(this):m<0?this[m+this.length]:this[m]},pushStack:function(m){var w=g.merge(this.constructor(),m);return w.prevObject=this,w},each:function(m){return g.each(this,m)},map:function(m){return this.pushStack(g.map(this,function(w,k){return m.call(w,k,w)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(g.grep(this,function(m,w){return(w+1)%2}))},odd:function(){return this.pushStack(g.grep(this,function(m,w){return w%2}))},eq:function(m){var w=this.length,k=+m+(m<0?w:0);return this.pushStack(k>=0&&k<w?[this[k]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:r.sort,splice:r.splice},g.extend=g.fn.extend=function(){var m,w,k,O,L,B,H=arguments[0]||{},le=1,ie=arguments.length,Se=!1;for(typeof H=="boolean"&&(Se=H,H=arguments[le]||{},le++),typeof H!="object"&&!E(H)&&(H={}),le===ie&&(H=this,le--);le<ie;le++)if((m=arguments[le])!=null)for(w in m)O=m[w],!(w==="__proto__"||H===O)&&(Se&&O&&(g.isPlainObject(O)||(L=Array.isArray(O)))?(k=H[w],L&&!Array.isArray(k)?B=[]:!L&&!g.isPlainObject(k)?B={}:B=k,L=!1,H[w]=g.extend(Se,B,O)):O!==void 0&&(H[w]=O));return H},g.extend({expando:"jQuery"+(x+Math.random()).replace(/\D/g,""),isReady:!0,error:function(m){throw new Error(m)},noop:function(){},isPlainObject:function(m){var w,k;return!m||c.call(m)!=="[object Object]"?!1:(w=i(m),w?(k=f.call(w,"constructor")&&w.constructor,typeof k=="function"&&p.call(k)===v):!0)},isEmptyObject:function(m){var w;for(w in m)return!1;return!0},globalEval:function(m,w,k){I(m,{nonce:w&&w.nonce},k)},each:function(m,w){var k,O=0;if(_(m))for(k=m.length;O<k&&w.call(m[O],O,m[O])!==!1;O++);else for(O in m)if(w.call(m[O],O,m[O])===!1)break;return m},makeArray:function(m,w){var k=w||[];return m!=null&&(_(Object(m))?g.merge(k,typeof m=="string"?[m]:m):a.call(k,m)),k},inArray:function(m,w,k){return w==null?-1:l.call(w,m,k)},merge:function(m,w){for(var k=+w.length,O=0,L=m.length;O<k;O++)m[L++]=w[O];return m.length=L,m},grep:function(m,w,k){for(var O,L=[],B=0,H=m.length,le=!k;B<H;B++)O=!w(m[B],B),O!==le&&L.push(m[B]);return L},map:function(m,w,k){var O,L,B=0,H=[];if(_(m))for(O=m.length;B<O;B++)L=w(m[B],B,k),L!=null&&H.push(L);else for(B in m)L=w(m[B],B,k),L!=null&&H.push(L);return o(H)},guid:1,support:b}),typeof Symbol=="function"&&(g.fn[Symbol.iterator]=r[Symbol.iterator]),g.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(m,w){u["[object "+w+"]"]=w.toLowerCase()});function _(m){var w=!!m&&"length"in m&&m.length,k=N(m);return E(m)||P(m)?!1:k==="array"||w===0||typeof w=="number"&&w>0&&w-1 in m}var M=function(m){var w,k,O,L,B,H,le,ie,Se,$e,qe,Ce,Re,At,Ht,dt,yr,br,an,hn="sizzle"+1*new Date,jt=m.document,$i=0,dn=0,fr=Di(),Cc=Di(),uh=Di(),Ri=Di(),Eo=function(J,ae){return J===ae&&(qe=!0),0},xs={}.hasOwnProperty,Li=[],ea=Li.pop,Qi=Li.push,_o=Li.push,ch=Li.slice,Ma=function(J,ae){for(var me=0,Ue=J.length;me<Ue;me++)if(J[me]===ae)return me;return-1},dp="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",On="[\\x20\\t\\r\\n\\f]",ta="(?:\\\\[\\da-fA-F]{1,6}"+On+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Sv="\\["+On+"*("+ta+")(?:"+On+"*([*^$|!~]?=)"+On+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+ta+"))|)"+On+"*\\]",fh=":("+ta+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Sv+")*)|.*)\\)|)",es=new RegExp(On+"+","g"),pu=new RegExp("^"+On+"+|((?:^|[^\\\\])(?:\\\\.)*)"+On+"+$","g"),Pc=new RegExp("^"+On+"*,"+On+"*"),pp=new RegExp("^"+On+"*([>+~]|"+On+")"+On+"*"),Ev=new RegExp(On+"|>"),Ww=new RegExp(fh),Gw=new RegExp("^"+ta+"$"),hh={ID:new RegExp("^#("+ta+")"),CLASS:new RegExp("^\\.("+ta+")"),TAG:new RegExp("^("+ta+"|[*])"),ATTR:new RegExp("^"+Sv),PSEUDO:new RegExp("^"+fh),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+On+"*(even|odd|(([+-]|)(\\d*)n|)"+On+"*(?:([+-]|)"+On+"*(\\d+)|))"+On+"*\\)|)","i"),bool:new RegExp("^(?:"+dp+")$","i"),needsContext:new RegExp("^"+On+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+On+"*((?:-\\d)?\\d*)"+On+"*\\)|)(?=[^-]|$)","i")},Kw=/HTML$/i,Yw=/^(?:input|select|textarea|button)$/i,gu=/^h\d$/i,Oc=/^[^{]+\{\s*\[native \w/,Jw=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Tc=/[+~]/,Ao=new RegExp("\\\\[\\da-fA-F]{1,6}"+On+"?|\\\\([^\\r\\n\\f])","g"),di=function(J,ae){var me="0x"+J.slice(1)-65536;return ae||(me<0?String.fromCharCode(me+65536):String.fromCharCode(me>>10|55296,me&1023|56320))},Mc=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,_v=function(J,ae){return ae?J==="\0"?"":J.slice(0,-1)+"\\"+J.charCodeAt(J.length-1).toString(16)+" ":"\\"+J},Av=function(){Ce()},Xw=zt(function(J){return J.disabled===!0&&J.nodeName.toLowerCase()==="fieldset"},{dir:"parentNode",next:"legend"});try{_o.apply(Li=ch.call(jt.childNodes),jt.childNodes),Li[jt.childNodes.length].nodeType}catch{_o={apply:Li.length?function(ae,me){Qi.apply(ae,ch.call(me))}:function(ae,me){for(var Ue=ae.length,we=0;ae[Ue++]=me[we++];);ae.length=Ue-1}}}function Tn(J,ae,me,Ue){var we,Ne,Qe,it,ot,It,Pt,$t=ae&&ae.ownerDocument,Jt=ae?ae.nodeType:9;if(me=me||[],typeof J!="string"||!J||Jt!==1&&Jt!==9&&Jt!==11)return me;if(!Ue&&(Ce(ae),ae=ae||Re,Ht)){if(Jt!==11&&(ot=Jw.exec(J)))if(we=ot[1]){if(Jt===9)if(Qe=ae.getElementById(we)){if(Qe.id===we)return me.push(Qe),me}else return me;else if($t&&(Qe=$t.getElementById(we))&&an(ae,Qe)&&Qe.id===we)return me.push(Qe),me}else{if(ot[2])return _o.apply(me,ae.getElementsByTagName(J)),me;if((we=ot[3])&&k.getElementsByClassName&&ae.getElementsByClassName)return _o.apply(me,ae.getElementsByClassName(we)),me}if(k.qsa&&!Ri[J+" "]&&(!dt||!dt.test(J))&&(Jt!==1||ae.nodeName.toLowerCase()!=="object")){if(Pt=J,$t=ae,Jt===1&&(Ev.test(J)||pp.test(J))){for($t=Tc.test(J)&&je(ae.parentNode)||ae,($t!==ae||!k.scope)&&((it=ae.getAttribute("id"))?it=it.replace(Mc,_v):ae.setAttribute("id",it=hn)),It=H(J),Ne=It.length;Ne--;)It[Ne]=(it?"#"+it:":scope")+" "+ct(It[Ne]);Pt=It.join(",")}try{return _o.apply(me,$t.querySelectorAll(Pt)),me}catch{Ri(J,!0)}finally{it===hn&&ae.removeAttribute("id")}}}return ie(J.replace(pu,"$1"),ae,me,Ue)}function Di(){var J=[];function ae(me,Ue){return J.push(me+" ")>O.cacheLength&&delete ae[J.shift()],ae[me+" "]=Ue}return ae}function Ss(J){return J[hn]=!0,J}function Es(J){var ae=Re.createElement("fieldset");try{return!!J(ae)}catch{return!1}finally{ae.parentNode&&ae.parentNode.removeChild(ae),ae=null}}function gp(J,ae){for(var me=J.split("|"),Ue=me.length;Ue--;)O.attrHandle[me[Ue]]=ae}function kv(J,ae){var me=ae&&J,Ue=me&&J.nodeType===1&&ae.nodeType===1&&J.sourceIndex-ae.sourceIndex;if(Ue)return Ue;if(me){for(;me=me.nextSibling;)if(me===ae)return-1}return J?1:-1}function Zw(J){return function(ae){var me=ae.nodeName.toLowerCase();return me==="input"&&ae.type===J}}function Qw(J){return function(ae){var me=ae.nodeName.toLowerCase();return(me==="input"||me==="button")&&ae.type===J}}function yl(J){return function(ae){return"form"in ae?ae.parentNode&&ae.disabled===!1?"label"in ae?"label"in ae.parentNode?ae.parentNode.disabled===J:ae.disabled===J:ae.isDisabled===J||ae.isDisabled!==!J&&Xw(ae)===J:ae.disabled===J:"label"in ae?ae.disabled===J:!1}}function ve(J){return Ss(function(ae){return ae=+ae,Ss(function(me,Ue){for(var we,Ne=J([],me.length,ae),Qe=Ne.length;Qe--;)me[we=Ne[Qe]]&&(me[we]=!(Ue[we]=me[we]))})})}function je(J){return J&&typeof J.getElementsByTagName<"u"&&J}k=Tn.support={},B=Tn.isXML=function(J){var ae=J&&J.namespaceURI,me=J&&(J.ownerDocument||J).documentElement;return!Kw.test(ae||me&&me.nodeName||"HTML")},Ce=Tn.setDocument=function(J){var ae,me,Ue=J?J.ownerDocument||J:jt;return Ue==Re||Ue.nodeType!==9||!Ue.documentElement||(Re=Ue,At=Re.documentElement,Ht=!B(Re),jt!=Re&&(me=Re.defaultView)&&me.top!==me&&(me.addEventListener?me.addEventListener("unload",Av,!1):me.attachEvent&&me.attachEvent("onunload",Av)),k.scope=Es(function(we){return At.appendChild(we).appendChild(Re.createElement("div")),typeof we.querySelectorAll<"u"&&!we.querySelectorAll(":scope fieldset div").length}),k.cssHas=Es(function(){try{return Re.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),k.attributes=Es(function(we){return we.className="i",!we.getAttribute("className")}),k.getElementsByTagName=Es(function(we){return we.appendChild(Re.createComment("")),!we.getElementsByTagName("*").length}),k.getElementsByClassName=Oc.test(Re.getElementsByClassName),k.getById=Es(function(we){return At.appendChild(we).id=hn,!Re.getElementsByName||!Re.getElementsByName(hn).length}),k.getById?(O.filter.ID=function(we){var Ne=we.replace(Ao,di);return function(Qe){return Qe.getAttribute("id")===Ne}},O.find.ID=function(we,Ne){if(typeof Ne.getElementById<"u"&&Ht){var Qe=Ne.getElementById(we);return Qe?[Qe]:[]}}):(O.filter.ID=function(we){var Ne=we.replace(Ao,di);return function(Qe){var it=typeof Qe.getAttributeNode<"u"&&Qe.getAttributeNode("id");return it&&it.value===Ne}},O.find.ID=function(we,Ne){if(typeof Ne.getElementById<"u"&&Ht){var Qe,it,ot,It=Ne.getElementById(we);if(It){if(Qe=It.getAttributeNode("id"),Qe&&Qe.value===we)return[It];for(ot=Ne.getElementsByName(we),it=0;It=ot[it++];)if(Qe=It.getAttributeNode("id"),Qe&&Qe.value===we)return[It]}return[]}}),O.find.TAG=k.getElementsByTagName?function(we,Ne){if(typeof Ne.getElementsByTagName<"u")return Ne.getElementsByTagName(we);if(k.qsa)return Ne.querySelectorAll(we)}:function(we,Ne){var Qe,it=[],ot=0,It=Ne.getElementsByTagName(we);if(we==="*"){for(;Qe=It[ot++];)Qe.nodeType===1&&it.push(Qe);return it}return It},O.find.CLASS=k.getElementsByClassName&&function(we,Ne){if(typeof Ne.getElementsByClassName<"u"&&Ht)return Ne.getElementsByClassName(we)},yr=[],dt=[],(k.qsa=Oc.test(Re.querySelectorAll))&&(Es(function(we){var Ne;At.appendChild(we).innerHTML="<a id='"+hn+"'></a><select id='"+hn+"-\r\\' msallowcapture=''><option selected=''></option></select>",we.querySelectorAll("[msallowcapture^='']").length&&dt.push("[*^$]="+On+`*(?:''|"")`),we.querySelectorAll("[selected]").length||dt.push("\\["+On+"*(?:value|"+dp+")"),we.querySelectorAll("[id~="+hn+"-]").length||dt.push("~="),Ne=Re.createElement("input"),Ne.setAttribute("name",""),we.appendChild(Ne),we.querySelectorAll("[name='']").length||dt.push("\\["+On+"*name"+On+"*="+On+`*(?:''|"")`),we.querySelectorAll(":checked").length||dt.push(":checked"),we.querySelectorAll("a#"+hn+"+*").length||dt.push(".#.+[+~]"),we.querySelectorAll("\\\f"),dt.push("[\\r\\n\\f]")}),Es(function(we){we.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var Ne=Re.createElement("input");Ne.setAttribute("type","hidden"),we.appendChild(Ne).setAttribute("name","D"),we.querySelectorAll("[name=d]").length&&dt.push("name"+On+"*[*^$|!~]?="),we.querySelectorAll(":enabled").length!==2&&dt.push(":enabled",":disabled"),At.appendChild(we).disabled=!0,we.querySelectorAll(":disabled").length!==2&&dt.push(":enabled",":disabled"),we.querySelectorAll("*,:x"),dt.push(",.*:")})),(k.matchesSelector=Oc.test(br=At.matches||At.webkitMatchesSelector||At.mozMatchesSelector||At.oMatchesSelector||At.msMatchesSelector))&&Es(function(we){k.disconnectedMatch=br.call(we,"*"),br.call(we,"[s!='']:x"),yr.push("!=",fh)}),k.cssHas||dt.push(":has"),dt=dt.length&&new RegExp(dt.join("|")),yr=yr.length&&new RegExp(yr.join("|")),ae=Oc.test(At.compareDocumentPosition),an=ae||Oc.test(At.contains)?function(we,Ne){var Qe=we.nodeType===9&&we.documentElement||we,it=Ne&&Ne.parentNode;return we===it||!!(it&&it.nodeType===1&&(Qe.contains?Qe.contains(it):we.compareDocumentPosition&&we.compareDocumentPosition(it)&16))}:function(we,Ne){if(Ne){for(;Ne=Ne.parentNode;)if(Ne===we)return!0}return!1},Eo=ae?function(we,Ne){if(we===Ne)return qe=!0,0;var Qe=!we.compareDocumentPosition-!Ne.compareDocumentPosition;return Qe||(Qe=(we.ownerDocument||we)==(Ne.ownerDocument||Ne)?we.compareDocumentPosition(Ne):1,Qe&1||!k.sortDetached&&Ne.compareDocumentPosition(we)===Qe?we==Re||we.ownerDocument==jt&&an(jt,we)?-1:Ne==Re||Ne.ownerDocument==jt&&an(jt,Ne)?1:$e?Ma($e,we)-Ma($e,Ne):0:Qe&4?-1:1)}:function(we,Ne){if(we===Ne)return qe=!0,0;var Qe,it=0,ot=we.parentNode,It=Ne.parentNode,Pt=[we],$t=[Ne];if(!ot||!It)return we==Re?-1:Ne==Re?1:ot?-1:It?1:$e?Ma($e,we)-Ma($e,Ne):0;if(ot===It)return kv(we,Ne);for(Qe=we;Qe=Qe.parentNode;)Pt.unshift(Qe);for(Qe=Ne;Qe=Qe.parentNode;)$t.unshift(Qe);for(;Pt[it]===$t[it];)it++;return it?kv(Pt[it],$t[it]):Pt[it]==jt?-1:$t[it]==jt?1:0}),Re},Tn.matches=function(J,ae){return Tn(J,null,null,ae)},Tn.matchesSelector=function(J,ae){if(Ce(J),k.matchesSelector&&Ht&&!Ri[ae+" "]&&(!yr||!yr.test(ae))&&(!dt||!dt.test(ae)))try{var me=br.call(J,ae);if(me||k.disconnectedMatch||J.document&&J.document.nodeType!==11)return me}catch{Ri(ae,!0)}return Tn(ae,Re,null,[J]).length>0},Tn.contains=function(J,ae){return(J.ownerDocument||J)!=Re&&Ce(J),an(J,ae)},Tn.attr=function(J,ae){(J.ownerDocument||J)!=Re&&Ce(J);var me=O.attrHandle[ae.toLowerCase()],Ue=me&&xs.call(O.attrHandle,ae.toLowerCase())?me(J,ae,!Ht):void 0;return Ue!==void 0?Ue:k.attributes||!Ht?J.getAttribute(ae):(Ue=J.getAttributeNode(ae))&&Ue.specified?Ue.value:null},Tn.escape=function(J){return(J+"").replace(Mc,_v)},Tn.error=function(J){throw new Error("Syntax error, unrecognized expression: "+J)},Tn.uniqueSort=function(J){var ae,me=[],Ue=0,we=0;if(qe=!k.detectDuplicates,$e=!k.sortStable&&J.slice(0),J.sort(Eo),qe){for(;ae=J[we++];)ae===J[we]&&(Ue=me.push(we));for(;Ue--;)J.splice(me[Ue],1)}return $e=null,J},L=Tn.getText=function(J){var ae,me="",Ue=0,we=J.nodeType;if(we){if(we===1||we===9||we===11){if(typeof J.textContent=="string")return J.textContent;for(J=J.firstChild;J;J=J.nextSibling)me+=L(J)}else if(we===3||we===4)return J.nodeValue}else for(;ae=J[Ue++];)me+=L(ae);return me},O=Tn.selectors={cacheLength:50,createPseudo:Ss,match:hh,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(J){return J[1]=J[1].replace(Ao,di),J[3]=(J[3]||J[4]||J[5]||"").replace(Ao,di),J[2]==="~="&&(J[3]=" "+J[3]+" "),J.slice(0,4)},CHILD:function(J){return J[1]=J[1].toLowerCase(),J[1].slice(0,3)==="nth"?(J[3]||Tn.error(J[0]),J[4]=+(J[4]?J[5]+(J[6]||1):2*(J[3]==="even"||J[3]==="odd")),J[5]=+(J[7]+J[8]||J[3]==="odd")):J[3]&&Tn.error(J[0]),J},PSEUDO:function(J){var ae,me=!J[6]&&J[2];return hh.CHILD.test(J[0])?null:(J[3]?J[2]=J[4]||J[5]||"":me&&Ww.test(me)&&(ae=H(me,!0))&&(ae=me.indexOf(")",me.length-ae)-me.length)&&(J[0]=J[0].slice(0,ae),J[2]=me.slice(0,ae)),J.slice(0,3))}},filter:{TAG:function(J){var ae=J.replace(Ao,di).toLowerCase();return J==="*"?function(){return!0}:function(me){return me.nodeName&&me.nodeName.toLowerCase()===ae}},CLASS:function(J){var ae=fr[J+" "];return ae||(ae=new RegExp("(^|"+On+")"+J+"("+On+"|$)"))&&fr(J,function(me){return ae.test(typeof me.className=="string"&&me.className||typeof me.getAttribute<"u"&&me.getAttribute("class")||"")})},ATTR:function(J,ae,me){return function(Ue){var we=Tn.attr(Ue,J);return we==null?ae==="!=":ae?(we+="",ae==="="?we===me:ae==="!="?we!==me:ae==="^="?me&&we.indexOf(me)===0:ae==="*="?me&&we.indexOf(me)>-1:ae==="$="?me&&we.slice(-me.length)===me:ae==="~="?(" "+we.replace(es," ")+" ").indexOf(me)>-1:ae==="|="?we===me||we.slice(0,me.length+1)===me+"-":!1):!0}},CHILD:function(J,ae,me,Ue,we){var Ne=J.slice(0,3)!=="nth",Qe=J.slice(-4)!=="last",it=ae==="of-type";return Ue===1&&we===0?function(ot){return!!ot.parentNode}:function(ot,It,Pt){var $t,Jt,vn,Ct,Tr,Dr,Fi=Ne!==Qe?"nextSibling":"previousSibling",er=ot.parentNode,Na=it&&ot.nodeName.toLowerCase(),mu=!Pt&&!it,ni=!1;if(er){if(Ne){for(;Fi;){for(Ct=ot;Ct=Ct[Fi];)if(it?Ct.nodeName.toLowerCase()===Na:Ct.nodeType===1)return!1;Dr=Fi=J==="only"&&!Dr&&"nextSibling"}return!0}if(Dr=[Qe?er.firstChild:er.lastChild],Qe&&mu){for(Ct=er,vn=Ct[hn]||(Ct[hn]={}),Jt=vn[Ct.uniqueID]||(vn[Ct.uniqueID]={}),$t=Jt[J]||[],Tr=$t[0]===$i&&$t[1],ni=Tr&&$t[2],Ct=Tr&&er.childNodes[Tr];Ct=++Tr&&Ct&&Ct[Fi]||(ni=Tr=0)||Dr.pop();)if(Ct.nodeType===1&&++ni&&Ct===ot){Jt[J]=[$i,Tr,ni];break}}else if(mu&&(Ct=ot,vn=Ct[hn]||(Ct[hn]={}),Jt=vn[Ct.uniqueID]||(vn[Ct.uniqueID]={}),$t=Jt[J]||[],Tr=$t[0]===$i&&$t[1],ni=Tr),ni===!1)for(;(Ct=++Tr&&Ct&&Ct[Fi]||(ni=Tr=0)||Dr.pop())&&!((it?Ct.nodeName.toLowerCase()===Na:Ct.nodeType===1)&&++ni&&(mu&&(vn=Ct[hn]||(Ct[hn]={}),Jt=vn[Ct.uniqueID]||(vn[Ct.uniqueID]={}),Jt[J]=[$i,ni]),Ct===ot)););return ni-=we,ni===Ue||ni%Ue===0&&ni/Ue>=0}}},PSEUDO:function(J,ae){var me,Ue=O.pseudos[J]||O.setFilters[J.toLowerCase()]||Tn.error("unsupported pseudo: "+J);return Ue[hn]?Ue(ae):Ue.length>1?(me=[J,J,"",ae],O.setFilters.hasOwnProperty(J.toLowerCase())?Ss(function(we,Ne){for(var Qe,it=Ue(we,ae),ot=it.length;ot--;)Qe=Ma(we,it[ot]),we[Qe]=!(Ne[Qe]=it[ot])}):function(we){return Ue(we,0,me)}):Ue}},pseudos:{not:Ss(function(J){var ae=[],me=[],Ue=le(J.replace(pu,"$1"));return Ue[hn]?Ss(function(we,Ne,Qe,it){for(var ot,It=Ue(we,null,it,[]),Pt=we.length;Pt--;)(ot=It[Pt])&&(we[Pt]=!(Ne[Pt]=ot))}):function(we,Ne,Qe){return ae[0]=we,Ue(ae,null,Qe,me),ae[0]=null,!me.pop()}}),has:Ss(function(J){return function(ae){return Tn(J,ae).length>0}}),contains:Ss(function(J){return J=J.replace(Ao,di),function(ae){return(ae.textContent||L(ae)).indexOf(J)>-1}}),lang:Ss(function(J){return Gw.test(J||"")||Tn.error("unsupported lang: "+J),J=J.replace(Ao,di).toLowerCase(),function(ae){var me;do if(me=Ht?ae.lang:ae.getAttribute("xml:lang")||ae.getAttribute("lang"))return me=me.toLowerCase(),me===J||me.indexOf(J+"-")===0;while((ae=ae.parentNode)&&ae.nodeType===1);return!1}}),target:function(J){var ae=m.location&&m.location.hash;return ae&&ae.slice(1)===J.id},root:function(J){return J===At},focus:function(J){return J===Re.activeElement&&(!Re.hasFocus||Re.hasFocus())&&!!(J.type||J.href||~J.tabIndex)},enabled:yl(!1),disabled:yl(!0),checked:function(J){var ae=J.nodeName.toLowerCase();return ae==="input"&&!!J.checked||ae==="option"&&!!J.selected},selected:function(J){return J.parentNode&&J.parentNode.selectedIndex,J.selected===!0},empty:function(J){for(J=J.firstChild;J;J=J.nextSibling)if(J.nodeType<6)return!1;return!0},parent:function(J){return!O.pseudos.empty(J)},header:function(J){return gu.test(J.nodeName)},input:function(J){return Yw.test(J.nodeName)},button:function(J){var ae=J.nodeName.toLowerCase();return ae==="input"&&J.type==="button"||ae==="button"},text:function(J){var ae;return J.nodeName.toLowerCase()==="input"&&J.type==="text"&&((ae=J.getAttribute("type"))==null||ae.toLowerCase()==="text")},first:ve(function(){return[0]}),last:ve(function(J,ae){return[ae-1]}),eq:ve(function(J,ae,me){return[me<0?me+ae:me]}),even:ve(function(J,ae){for(var me=0;me<ae;me+=2)J.push(me);return J}),odd:ve(function(J,ae){for(var me=1;me<ae;me+=2)J.push(me);return J}),lt:ve(function(J,ae,me){for(var Ue=me<0?me+ae:me>ae?ae:me;--Ue>=0;)J.push(Ue);return J}),gt:ve(function(J,ae,me){for(var Ue=me<0?me+ae:me;++Ue<ae;)J.push(Ue);return J})}},O.pseudos.nth=O.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})O.pseudos[w]=Zw(w);for(w in{submit:!0,reset:!0})O.pseudos[w]=Qw(w);function Ie(){}Ie.prototype=O.filters=O.pseudos,O.setFilters=new Ie,H=Tn.tokenize=function(J,ae){var me,Ue,we,Ne,Qe,it,ot,It=Cc[J+" "];if(It)return ae?0:It.slice(0);for(Qe=J,it=[],ot=O.preFilter;Qe;){(!me||(Ue=Pc.exec(Qe)))&&(Ue&&(Qe=Qe.slice(Ue[0].length)||Qe),it.push(we=[])),me=!1,(Ue=pp.exec(Qe))&&(me=Ue.shift(),we.push({value:me,type:Ue[0].replace(pu," ")}),Qe=Qe.slice(me.length));for(Ne in O.filter)(Ue=hh[Ne].exec(Qe))&&(!ot[Ne]||(Ue=ot[Ne](Ue)))&&(me=Ue.shift(),we.push({value:me,type:Ne,matches:Ue}),Qe=Qe.slice(me.length));if(!me)break}return ae?Qe.length:Qe?Tn.error(J):Cc(J,it).slice(0)};function ct(J){for(var ae=0,me=J.length,Ue="";ae<me;ae++)Ue+=J[ae].value;return Ue}function zt(J,ae,me){var Ue=ae.dir,we=ae.next,Ne=we||Ue,Qe=me&&Ne==="parentNode",it=dn++;return ae.first?function(ot,It,Pt){for(;ot=ot[Ue];)if(ot.nodeType===1||Qe)return J(ot,It,Pt);return!1}:function(ot,It,Pt){var $t,Jt,vn,Ct=[$i,it];if(Pt){for(;ot=ot[Ue];)if((ot.nodeType===1||Qe)&&J(ot,It,Pt))return!0}else for(;ot=ot[Ue];)if(ot.nodeType===1||Qe)if(vn=ot[hn]||(ot[hn]={}),Jt=vn[ot.uniqueID]||(vn[ot.uniqueID]={}),we&&we===ot.nodeName.toLowerCase())ot=ot[Ue]||ot;else{if(($t=Jt[Ne])&&$t[0]===$i&&$t[1]===it)return Ct[2]=$t[2];if(Jt[Ne]=Ct,Ct[2]=J(ot,It,Pt))return!0}return!1}}function _n(J){return J.length>1?function(ae,me,Ue){for(var we=J.length;we--;)if(!J[we](ae,me,Ue))return!1;return!0}:J[0]}function Lr(J,ae,me){for(var Ue=0,we=ae.length;Ue<we;Ue++)Tn(J,ae[Ue],me);return me}function $n(J,ae,me,Ue,we){for(var Ne,Qe=[],it=0,ot=J.length,It=ae!=null;it<ot;it++)(Ne=J[it])&&(!me||me(Ne,Ue,we))&&(Qe.push(Ne),It&&ae.push(it));return Qe}function Nc(J,ae,me,Ue,we,Ne){return Ue&&!Ue[hn]&&(Ue=Nc(Ue)),we&&!we[hn]&&(we=Nc(we,Ne)),Ss(function(Qe,it,ot,It){var Pt,$t,Jt,vn=[],Ct=[],Tr=it.length,Dr=Qe||Lr(ae||"*",ot.nodeType?[ot]:ot,[]),Fi=J&&(Qe||!ae)?$n(Dr,vn,J,ot,It):Dr,er=me?we||(Qe?J:Tr||Ue)?[]:it:Fi;if(me&&me(Fi,er,ot,It),Ue)for(Pt=$n(er,Ct),Ue(Pt,[],ot,It),$t=Pt.length;$t--;)(Jt=Pt[$t])&&(er[Ct[$t]]=!(Fi[Ct[$t]]=Jt));if(Qe){if(we||J){if(we){for(Pt=[],$t=er.length;$t--;)(Jt=er[$t])&&Pt.push(Fi[$t]=Jt);we(null,er=[],Pt,It)}for($t=er.length;$t--;)(Jt=er[$t])&&(Pt=we?Ma(Qe,Jt):vn[$t])>-1&&(Qe[Pt]=!(it[Pt]=Jt))}}else er=$n(er===it?er.splice(Tr,er.length):er),we?we(null,it,er,It):_o.apply(it,er)})}function mp(J){for(var ae,me,Ue,we=J.length,Ne=O.relative[J[0].type],Qe=Ne||O.relative[" "],it=Ne?1:0,ot=zt(function($t){return $t===ae},Qe,!0),It=zt(function($t){return Ma(ae,$t)>-1},Qe,!0),Pt=[function($t,Jt,vn){var Ct=!Ne&&(vn||Jt!==Se)||((ae=Jt).nodeType?ot($t,Jt,vn):It($t,Jt,vn));return ae=null,Ct}];it<we;it++)if(me=O.relative[J[it].type])Pt=[zt(_n(Pt),me)];else{if(me=O.filter[J[it].type].apply(null,J[it].matches),me[hn]){for(Ue=++it;Ue<we&&!O.relative[J[Ue].type];Ue++);return Nc(it>1&&_n(Pt),it>1&&ct(J.slice(0,it-1).concat({value:J[it-2].type===" "?"*":""})).replace(pu,"$1"),me,it<Ue&&mp(J.slice(it,Ue)),Ue<we&&mp(J=J.slice(Ue)),Ue<we&&ct(J))}Pt.push(me)}return _n(Pt)}function _s(J,ae){var me=ae.length>0,Ue=J.length>0,we=function(Ne,Qe,it,ot,It){var Pt,$t,Jt,vn=0,Ct="0",Tr=Ne&&[],Dr=[],Fi=Se,er=Ne||Ue&&O.find.TAG("*",It),Na=$i+=Fi==null?1:Math.random()||.1,mu=er.length;for(It&&(Se=Qe==Re||Qe||It);Ct!==mu&&(Pt=er[Ct])!=null;Ct++){if(Ue&&Pt){for($t=0,!Qe&&Pt.ownerDocument!=Re&&(Ce(Pt),it=!Ht);Jt=J[$t++];)if(Jt(Pt,Qe||Re,it)){ot.push(Pt);break}It&&($i=Na)}me&&((Pt=!Jt&&Pt)&&vn--,Ne&&Tr.push(Pt))}if(vn+=Ct,me&&Ct!==vn){for($t=0;Jt=ae[$t++];)Jt(Tr,Dr,Qe,it);if(Ne){if(vn>0)for(;Ct--;)Tr[Ct]||Dr[Ct]||(Dr[Ct]=ea.call(ot));Dr=$n(Dr)}_o.apply(ot,Dr),It&&!Ne&&Dr.length>0&&vn+ae.length>1&&Tn.uniqueSort(ot)}return It&&($i=Na,Se=Fi),Tr};return me?Ss(we):we}return le=Tn.compile=function(J,ae){var me,Ue=[],we=[],Ne=uh[J+" "];if(!Ne){for(ae||(ae=H(J)),me=ae.length;me--;)Ne=mp(ae[me]),Ne[hn]?Ue.push(Ne):we.push(Ne);Ne=uh(J,_s(we,Ue)),Ne.selector=J}return Ne},ie=Tn.select=function(J,ae,me,Ue){var we,Ne,Qe,it,ot,It=typeof J=="function"&&J,Pt=!Ue&&H(J=It.selector||J);if(me=me||[],Pt.length===1){if(Ne=Pt[0]=Pt[0].slice(0),Ne.length>2&&(Qe=Ne[0]).type==="ID"&&ae.nodeType===9&&Ht&&O.relative[Ne[1].type]){if(ae=(O.find.ID(Qe.matches[0].replace(Ao,di),ae)||[])[0],ae)It&&(ae=ae.parentNode);else return me;J=J.slice(Ne.shift().value.length)}for(we=hh.needsContext.test(J)?0:Ne.length;we--&&(Qe=Ne[we],!O.relative[it=Qe.type]);)if((ot=O.find[it])&&(Ue=ot(Qe.matches[0].replace(Ao,di),Tc.test(Ne[0].type)&&je(ae.parentNode)||ae))){if(Ne.splice(we,1),J=Ue.length&&ct(Ne),!J)return _o.apply(me,Ue),me;break}}return(It||le(J,Pt))(Ue,ae,!Ht,me,!ae||Tc.test(J)&&je(ae.parentNode)||ae),me},k.sortStable=hn.split("").sort(Eo).join("")===hn,k.detectDuplicates=!!qe,Ce(),k.sortDetached=Es(function(J){return J.compareDocumentPosition(Re.createElement("fieldset"))&1}),Es(function(J){return J.innerHTML="<a href='#'></a>",J.firstChild.getAttribute("href")==="#"})||gp("type|href|height|width",function(J,ae,me){if(!me)return J.getAttribute(ae,ae.toLowerCase()==="type"?1:2)}),(!k.attributes||!Es(function(J){return J.innerHTML="<input/>",J.firstChild.setAttribute("value",""),J.firstChild.getAttribute("value")===""}))&&gp("value",function(J,ae,me){if(!me&&J.nodeName.toLowerCase()==="input")return J.defaultValue}),Es(function(J){return J.getAttribute("disabled")==null})||gp(dp,function(J,ae,me){var Ue;if(!me)return J[ae]===!0?ae.toLowerCase():(Ue=J.getAttributeNode(ae))&&Ue.specified?Ue.value:null}),Tn}(e);g.find=M,g.expr=M.selectors,g.expr[":"]=g.expr.pseudos,g.uniqueSort=g.unique=M.uniqueSort,g.text=M.getText,g.isXMLDoc=M.isXML,g.contains=M.contains,g.escapeSelector=M.escape;var D=function(m,w,k){for(var O=[],L=k!==void 0;(m=m[w])&&m.nodeType!==9;)if(m.nodeType===1){if(L&&g(m).is(k))break;O.push(m)}return O},q=function(m,w){for(var k=[];m;m=m.nextSibling)m.nodeType===1&&m!==w&&k.push(m);return k},R=g.expr.match.needsContext;function W(m,w){return m.nodeName&&m.nodeName.toLowerCase()===w.toLowerCase()}var G=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Z(m,w,k){return E(w)?g.grep(m,function(O,L){return!!w.call(O,L,O)!==k}):w.nodeType?g.grep(m,function(O){return O===w!==k}):typeof w!="string"?g.grep(m,function(O){return l.call(w,O)>-1!==k}):g.filter(w,m,k)}g.filter=function(m,w,k){var O=w[0];return k&&(m=":not("+m+")"),w.length===1&&O.nodeType===1?g.find.matchesSelector(O,m)?[O]:[]:g.find.matches(m,g.grep(w,function(L){return L.nodeType===1}))},g.fn.extend({find:function(m){var w,k,O=this.length,L=this;if(typeof m!="string")return this.pushStack(g(m).filter(function(){for(w=0;w<O;w++)if(g.contains(L[w],this))return!0}));for(k=this.pushStack([]),w=0;w<O;w++)g.find(m,L[w],k);return O>1?g.uniqueSort(k):k},filter:function(m){return this.pushStack(Z(this,m||[],!1))},not:function(m){return this.pushStack(Z(this,m||[],!0))},is:function(m){return!!Z(this,typeof m=="string"&&R.test(m)?g(m):m||[],!1).length}});var de,be=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,_e=g.fn.init=function(m,w,k){var O,L;if(!m)return this;if(k=k||de,typeof m=="string")if(m[0]==="<"&&m[m.length-1]===">"&&m.length>=3?O=[null,m,null]:O=be.exec(m),O&&(O[1]||!w))if(O[1]){if(w=w instanceof g?w[0]:w,g.merge(this,g.parseHTML(O[1],w&&w.nodeType?w.ownerDocument||w:S,!0)),G.test(O[1])&&g.isPlainObject(w))for(O in w)E(this[O])?this[O](w[O]):this.attr(O,w[O]);return this}else return L=S.getElementById(O[2]),L&&(this[0]=L,this.length=1),this;else return!w||w.jquery?(w||k).find(m):this.constructor(w).find(m);else{if(m.nodeType)return this[0]=m,this.length=1,this;if(E(m))return k.ready!==void 0?k.ready(m):m(g)}return g.makeArray(m,this)};_e.prototype=g.fn,de=g(S);var Te=/^(?:parents|prev(?:Until|All))/,Le={children:!0,contents:!0,next:!0,prev:!0};g.fn.extend({has:function(m){var w=g(m,this),k=w.length;return this.filter(function(){for(var O=0;O<k;O++)if(g.contains(this,w[O]))return!0})},closest:function(m,w){var k,O=0,L=this.length,B=[],H=typeof m!="string"&&g(m);if(!R.test(m)){for(;O<L;O++)for(k=this[O];k&&k!==w;k=k.parentNode)if(k.nodeType<11&&(H?H.index(k)>-1:k.nodeType===1&&g.find.matchesSelector(k,m))){B.push(k);break}}return this.pushStack(B.length>1?g.uniqueSort(B):B)},index:function(m){return m?typeof m=="string"?l.call(g(m),this[0]):l.call(this,m.jquery?m[0]:m):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(m,w){return this.pushStack(g.uniqueSort(g.merge(this.get(),g(m,w))))},addBack:function(m){return this.add(m==null?this.prevObject:this.prevObject.filter(m))}});function Ee(m,w){for(;(m=m[w])&&m.nodeType!==1;);return m}g.each({parent:function(m){var w=m.parentNode;return w&&w.nodeType!==11?w:null},parents:function(m){return D(m,"parentNode")},parentsUntil:function(m,w,k){return D(m,"parentNode",k)},next:function(m){return Ee(m,"nextSibling")},prev:function(m){return Ee(m,"previousSibling")},nextAll:function(m){return D(m,"nextSibling")},prevAll:function(m){return D(m,"previousSibling")},nextUntil:function(m,w,k){return D(m,"nextSibling",k)},prevUntil:function(m,w,k){return D(m,"previousSibling",k)},siblings:function(m){return q((m.parentNode||{}).firstChild,m)},children:function(m){return q(m.firstChild)},contents:function(m){return m.contentDocument!=null&&i(m.contentDocument)?m.contentDocument:(W(m,"template")&&(m=m.content||m),g.merge([],m.childNodes))}},function(m,w){g.fn[m]=function(k,O){var L=g.map(this,w,k);return m.slice(-5)!=="Until"&&(O=k),O&&typeof O=="string"&&(L=g.filter(O,L)),this.length>1&&(Le[m]||g.uniqueSort(L),Te.test(m)&&L.reverse()),this.pushStack(L)}});var re=/[^\x20\t\r\n\f]+/g;function ne(m){var w={};return g.each(m.match(re)||[],function(k,O){w[O]=!0}),w}g.Callbacks=function(m){m=typeof m=="string"?ne(m):g.extend({},m);var w,k,O,L,B=[],H=[],le=-1,ie=function(){for(L=L||m.once,O=w=!0;H.length;le=-1)for(k=H.shift();++le<B.length;)B[le].apply(k[0],k[1])===!1&&m.stopOnFalse&&(le=B.length,k=!1);m.memory||(k=!1),w=!1,L&&(k?B=[]:B="")},Se={add:function(){return B&&(k&&!w&&(le=B.length-1,H.push(k)),function $e(qe){g.each(qe,function(Ce,Re){E(Re)?(!m.unique||!Se.has(Re))&&B.push(Re):Re&&Re.length&&N(Re)!=="string"&&$e(Re)})}(arguments),k&&!w&&ie()),this},remove:function(){return g.each(arguments,function($e,qe){for(var Ce;(Ce=g.inArray(qe,B,Ce))>-1;)B.splice(Ce,1),Ce<=le&&le--}),this},has:function($e){return $e?g.inArray($e,B)>-1:B.length>0},empty:function(){return B&&(B=[]),this},disable:function(){return L=H=[],B=k="",this},disabled:function(){return!B},lock:function(){return L=H=[],!k&&!w&&(B=k=""),this},locked:function(){return!!L},fireWith:function($e,qe){return L||(qe=qe||[],qe=[$e,qe.slice?qe.slice():qe],H.push(qe),w||ie()),this},fire:function(){return Se.fireWith(this,arguments),this},fired:function(){return!!O}};return Se};function ee(m){return m}function F(m){throw m}function U(m,w,k,O){var L;try{m&&E(L=m.promise)?L.call(m).done(w).fail(k):m&&E(L=m.then)?L.call(m,w,k):w.apply(void 0,[m].slice(O))}catch(B){k.apply(void 0,[B])}}g.extend({Deferred:function(m){var w=[["notify","progress",g.Callbacks("memory"),g.Callbacks("memory"),2],["resolve","done",g.Callbacks("once memory"),g.Callbacks("once memory"),0,"resolved"],["reject","fail",g.Callbacks("once memory"),g.Callbacks("once memory"),1,"rejected"]],k="pending",O={state:function(){return k},always:function(){return L.done(arguments).fail(arguments),this},catch:function(B){return O.then(null,B)},pipe:function(){var B=arguments;return g.Deferred(function(H){g.each(w,function(le,ie){var Se=E(B[ie[4]])&&B[ie[4]];L[ie[1]](function(){var $e=Se&&Se.apply(this,arguments);$e&&E($e.promise)?$e.promise().progress(H.notify).done(H.resolve).fail(H.reject):H[ie[0]+"With"](this,Se?[$e]:arguments)})}),B=null}).promise()},then:function(B,H,le){var ie=0;function Se($e,qe,Ce,Re){return function(){var At=this,Ht=arguments,dt=function(){var br,an;if(!($e<ie)){if(br=Ce.apply(At,Ht),br===qe.promise())throw new TypeError("Thenable self-resolution");an=br&&(typeof br=="object"||typeof br=="function")&&br.then,E(an)?Re?an.call(br,Se(ie,qe,ee,Re),Se(ie,qe,F,Re)):(ie++,an.call(br,Se(ie,qe,ee,Re),Se(ie,qe,F,Re),Se(ie,qe,ee,qe.notifyWith))):(Ce!==ee&&(At=void 0,Ht=[br]),(Re||qe.resolveWith)(At,Ht))}},yr=Re?dt:function(){try{dt()}catch(br){g.Deferred.exceptionHook&&g.Deferred.exceptionHook(br,yr.stackTrace),$e+1>=ie&&(Ce!==F&&(At=void 0,Ht=[br]),qe.rejectWith(At,Ht))}};$e?yr():(g.Deferred.getStackHook&&(yr.stackTrace=g.Deferred.getStackHook()),e.setTimeout(yr))}}return g.Deferred(function($e){w[0][3].add(Se(0,$e,E(le)?le:ee,$e.notifyWith)),w[1][3].add(Se(0,$e,E(B)?B:ee)),w[2][3].add(Se(0,$e,E(H)?H:F))}).promise()},promise:function(B){return B!=null?g.extend(B,O):O}},L={};return g.each(w,function(B,H){var le=H[2],ie=H[5];O[H[1]]=le.add,ie&&le.add(function(){k=ie},w[3-B][2].disable,w[3-B][3].disable,w[0][2].lock,w[0][3].lock),le.add(H[3].fire),L[H[0]]=function(){return L[H[0]+"With"](this===L?void 0:this,arguments),this},L[H[0]+"With"]=le.fireWith}),O.promise(L),m&&m.call(L,L),L},when:function(m){var w=arguments.length,k=w,O=Array(k),L=s.call(arguments),B=g.Deferred(),H=function(le){return function(ie){O[le]=this,L[le]=arguments.length>1?s.call(arguments):ie,--w||B.resolveWith(O,L)}};if(w<=1&&(U(m,B.done(H(k)).resolve,B.reject,!w),B.state()==="pending"||E(L[k]&&L[k].then)))return B.then();for(;k--;)U(L[k],H(k),B.reject);return B.promise()}});var ye=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;g.Deferred.exceptionHook=function(m,w){e.console&&e.console.warn&&m&&ye.test(m.name)&&e.console.warn("jQuery.Deferred exception: "+m.message,m.stack,w)},g.readyException=function(m){e.setTimeout(function(){throw m})};var Fe=g.Deferred();g.fn.ready=function(m){return Fe.then(m).catch(function(w){g.readyException(w)}),this},g.extend({isReady:!1,readyWait:1,ready:function(m){(m===!0?--g.readyWait:g.isReady)||(g.isReady=!0,!(m!==!0&&--g.readyWait>0)&&Fe.resolveWith(S,[g]))}}),g.ready.then=Fe.then;function He(){S.removeEventListener("DOMContentLoaded",He),e.removeEventListener("load",He),g.ready()}S.readyState==="complete"||S.readyState!=="loading"&&!S.documentElement.doScroll?e.setTimeout(g.ready):(S.addEventListener("DOMContentLoaded",He),e.addEventListener("load",He));var Be=function(m,w,k,O,L,B,H){var le=0,ie=m.length,Se=k==null;if(N(k)==="object"){L=!0;for(le in k)Be(m,w,le,k[le],!0,B,H)}else if(O!==void 0&&(L=!0,E(O)||(H=!0),Se&&(H?(w.call(m,O),w=null):(Se=w,w=function($e,qe,Ce){return Se.call(g($e),Ce)})),w))for(;le<ie;le++)w(m[le],k,H?O:O.call(m[le],le,w(m[le],k)));return L?m:Se?w.call(m):ie?w(m[0],k):B},Pe=/^-ms-/,Ve=/-([a-z])/g;function z(m,w){return w.toUpperCase()}function K(m){return m.replace(Pe,"ms-").replace(Ve,z)}var C=function(m){return m.nodeType===1||m.nodeType===9||!+m.nodeType};function $(){this.expando=g.expando+$.uid++}$.uid=1,$.prototype={cache:function(m){var w=m[this.expando];return w||(w={},C(m)&&(m.nodeType?m[this.expando]=w:Object.defineProperty(m,this.expando,{value:w,configurable:!0}))),w},set:function(m,w,k){var O,L=this.cache(m);if(typeof w=="string")L[K(w)]=k;else for(O in w)L[K(O)]=w[O];return L},get:function(m,w){return w===void 0?this.cache(m):m[this.expando]&&m[this.expando][K(w)]},access:function(m,w,k){return w===void 0||w&&typeof w=="string"&&k===void 0?this.get(m,w):(this.set(m,w,k),k!==void 0?k:w)},remove:function(m,w){var k,O=m[this.expando];if(O!==void 0){if(w!==void 0)for(Array.isArray(w)?w=w.map(K):(w=K(w),w=w in O?[w]:w.match(re)||[]),k=w.length;k--;)delete O[w[k]];(w===void 0||g.isEmptyObject(O))&&(m.nodeType?m[this.expando]=void 0:delete m[this.expando])}},hasData:function(m){var w=m[this.expando];return w!==void 0&&!g.isEmptyObject(w)}};var V=new $,Q=new $,ce=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ue=/[A-Z]/g;function ke(m){return m==="true"?!0:m==="false"?!1:m==="null"?null:m===+m+""?+m:ce.test(m)?JSON.parse(m):m}function Ae(m,w,k){var O;if(k===void 0&&m.nodeType===1)if(O="data-"+w.replace(ue,"-$&").toLowerCase(),k=m.getAttribute(O),typeof k=="string"){try{k=ke(k)}catch{}Q.set(m,w,k)}else k=void 0;return k}g.extend({hasData:function(m){return Q.hasData(m)||V.hasData(m)},data:function(m,w,k){return Q.access(m,w,k)},removeData:function(m,w){Q.remove(m,w)},_data:function(m,w,k){return V.access(m,w,k)},_removeData:function(m,w){V.remove(m,w)}}),g.fn.extend({data:function(m,w){var k,O,L,B=this[0],H=B&&B.attributes;if(m===void 0){if(this.length&&(L=Q.get(B),B.nodeType===1&&!V.get(B,"hasDataAttrs"))){for(k=H.length;k--;)H[k]&&(O=H[k].name,O.indexOf("data-")===0&&(O=K(O.slice(5)),Ae(B,O,L[O])));V.set(B,"hasDataAttrs",!0)}return L}return typeof m=="object"?this.each(function(){Q.set(this,m)}):Be(this,function(le){var ie;if(B&&le===void 0)return ie=Q.get(B,m),ie!==void 0||(ie=Ae(B,m),ie!==void 0)?ie:void 0;this.each(function(){Q.set(this,m,le)})},null,w,arguments.length>1,null,!0)},removeData:function(m){return this.each(function(){Q.remove(this,m)})}}),g.extend({queue:function(m,w,k){var O;if(m)return w=(w||"fx")+"queue",O=V.get(m,w),k&&(!O||Array.isArray(k)?O=V.access(m,w,g.makeArray(k)):O.push(k)),O||[]},dequeue:function(m,w){w=w||"fx";var k=g.queue(m,w),O=k.length,L=k.shift(),B=g._queueHooks(m,w),H=function(){g.dequeue(m,w)};L==="inprogress"&&(L=k.shift(),O--),L&&(w==="fx"&&k.unshift("inprogress"),delete B.stop,L.call(m,H,B)),!O&&B&&B.empty.fire()},_queueHooks:function(m,w){var k=w+"queueHooks";return V.get(m,k)||V.access(m,k,{empty:g.Callbacks("once memory").add(function(){V.remove(m,[w+"queue",k])})})}}),g.fn.extend({queue:function(m,w){var k=2;return typeof m!="string"&&(w=m,m="fx",k--),arguments.length<k?g.queue(this[0],m):w===void 0?this:this.each(function(){var O=g.queue(this,m,w);g._queueHooks(this,m),m==="fx"&&O[0]!=="inprogress"&&g.dequeue(this,m)})},dequeue:function(m){return this.each(function(){g.dequeue(this,m)})},clearQueue:function(m){return this.queue(m||"fx",[])},promise:function(m,w){var k,O=1,L=g.Deferred(),B=this,H=this.length,le=function(){--O||L.resolveWith(B,[B])};for(typeof m!="string"&&(w=m,m=void 0),m=m||"fx";H--;)k=V.get(B[H],m+"queueHooks"),k&&k.empty&&(O++,k.empty.add(le));return le(),L.promise(w)}});var tt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Je=new RegExp("^(?:([+-])=|)("+tt+")([a-z%]*)$","i"),Xe=["Top","Right","Bottom","Left"],Ye=S.documentElement,ft=function(m){return g.contains(m.ownerDocument,m)},Nt={composed:!0};Ye.getRootNode&&(ft=function(m){return g.contains(m.ownerDocument,m)||m.getRootNode(Nt)===m.ownerDocument});var Vt=function(m,w){return m=w||m,m.style.display==="none"||m.style.display===""&&ft(m)&&g.css(m,"display")==="none"};function yt(m,w,k,O){var L,B,H=20,le=O?function(){return O.cur()}:function(){return g.css(m,w,"")},ie=le(),Se=k&&k[3]||(g.cssNumber[w]?"":"px"),$e=m.nodeType&&(g.cssNumber[w]||Se!=="px"&&+ie)&&Je.exec(g.css(m,w));if($e&&$e[3]!==Se){for(ie=ie/2,Se=Se||$e[3],$e=+ie||1;H--;)g.style(m,w,$e+Se),(1-B)*(1-(B=le()/ie||.5))<=0&&(H=0),$e=$e/B;$e=$e*2,g.style(m,w,$e+Se),k=k||[]}return k&&($e=+$e||+ie||0,L=k[1]?$e+(k[1]+1)*k[2]:+k[2],O&&(O.unit=Se,O.start=$e,O.end=L)),L}var Gt={};function qn(m){var w,k=m.ownerDocument,O=m.nodeName,L=Gt[O];return L||(w=k.body.appendChild(k.createElement(O)),L=g.css(w,"display"),w.parentNode.removeChild(w),L==="none"&&(L="block"),Gt[O]=L,L)}function Or(m,w){for(var k,O,L=[],B=0,H=m.length;B<H;B++)O=m[B],O.style&&(k=O.style.display,w?(k==="none"&&(L[B]=V.get(O,"display")||null,L[B]||(O.style.display="")),O.style.display===""&&Vt(O)&&(L[B]=qn(O))):k!=="none"&&(L[B]="none",V.set(O,"display",k)));for(B=0;B<H;B++)L[B]!=null&&(m[B].style.display=L[B]);return m}g.fn.extend({show:function(){return Or(this,!0)},hide:function(){return Or(this)},toggle:function(m){return typeof m=="boolean"?m?this.show():this.hide():this.each(function(){Vt(this)?g(this).show():g(this).hide()})}});var ir=/^(?:checkbox|radio)$/i,yi=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Qn=/^$|^module$|\/(?:java|ecma)script/i;(function(){var m=S.createDocumentFragment(),w=m.appendChild(S.createElement("div")),k=S.createElement("input");k.setAttribute("type","radio"),k.setAttribute("checked","checked"),k.setAttribute("name","t"),w.appendChild(k),b.checkClone=w.cloneNode(!0).cloneNode(!0).lastChild.checked,w.innerHTML="<textarea>x</textarea>",b.noCloneChecked=!!w.cloneNode(!0).lastChild.defaultValue,w.innerHTML="<option></option>",b.option=!!w.lastChild})();var Sn={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Sn.tbody=Sn.tfoot=Sn.colgroup=Sn.caption=Sn.thead,Sn.th=Sn.td,b.option||(Sn.optgroup=Sn.option=[1,"<select multiple='multiple'>","</select>"]);function En(m,w){var k;return typeof m.getElementsByTagName<"u"?k=m.getElementsByTagName(w||"*"):typeof m.querySelectorAll<"u"?k=m.querySelectorAll(w||"*"):k=[],w===void 0||w&&W(m,w)?g.merge([m],k):k}function vs(m,w){for(var k=0,O=m.length;k<O;k++)V.set(m[k],"globalEval",!w||V.get(w[k],"globalEval"))}var uu=/<|&#?\w+;/;function dl(m,w,k,O,L){for(var B,H,le,ie,Se,$e,qe=w.createDocumentFragment(),Ce=[],Re=0,At=m.length;Re<At;Re++)if(B=m[Re],B||B===0)if(N(B)==="object")g.merge(Ce,B.nodeType?[B]:B);else if(!uu.test(B))Ce.push(w.createTextNode(B));else{for(H=H||qe.appendChild(w.createElement("div")),le=(yi.exec(B)||["",""])[1].toLowerCase(),ie=Sn[le]||Sn._default,H.innerHTML=ie[1]+g.htmlPrefilter(B)+ie[2],$e=ie[0];$e--;)H=H.lastChild;g.merge(Ce,H.childNodes),H=qe.firstChild,H.textContent=""}for(qe.textContent="",Re=0;B=Ce[Re++];){if(O&&g.inArray(B,O)>-1){L&&L.push(B);continue}if(Se=ft(B),H=En(qe.appendChild(B),"script"),Se&&vs(H),k)for($e=0;B=H[$e++];)Qn.test(B.type||"")&&k.push(B)}return qe}var Ca=/^([^.]*)(?:\.(.+)|)/;function Js(){return!0}function Qr(){return!1}function Pa(m,w){return m===tp()==(w==="focus")}function tp(){try{return S.activeElement}catch{}}function cu(m,w,k,O,L,B){var H,le;if(typeof w=="object"){typeof k!="string"&&(O=O||k,k=void 0);for(le in w)cu(m,le,k,O,w[le],B);return m}if(O==null&&L==null?(L=k,O=k=void 0):L==null&&(typeof k=="string"?(L=O,O=void 0):(L=O,O=k,k=void 0)),L===!1)L=Qr;else if(!L)return m;return B===1&&(H=L,L=function(ie){return g().off(ie),H.apply(this,arguments)},L.guid=H.guid||(H.guid=g.guid++)),m.each(function(){g.event.add(this,w,L,O,k)})}g.event={global:{},add:function(m,w,k,O,L){var B,H,le,ie,Se,$e,qe,Ce,Re,At,Ht,dt=V.get(m);if(C(m))for(k.handler&&(B=k,k=B.handler,L=B.selector),L&&g.find.matchesSelector(Ye,L),k.guid||(k.guid=g.guid++),(ie=dt.events)||(ie=dt.events=Object.create(null)),(H=dt.handle)||(H=dt.handle=function(yr){return typeof g<"u"&&g.event.triggered!==yr.type?g.event.dispatch.apply(m,arguments):void 0}),w=(w||"").match(re)||[""],Se=w.length;Se--;)le=Ca.exec(w[Se])||[],Re=Ht=le[1],At=(le[2]||"").split(".").sort(),Re&&(qe=g.event.special[Re]||{},Re=(L?qe.delegateType:qe.bindType)||Re,qe=g.event.special[Re]||{},$e=g.extend({type:Re,origType:Ht,data:O,handler:k,guid:k.guid,selector:L,needsContext:L&&g.expr.match.needsContext.test(L),namespace:At.join(".")},B),(Ce=ie[Re])||(Ce=ie[Re]=[],Ce.delegateCount=0,(!qe.setup||qe.setup.call(m,O,At,H)===!1)&&m.addEventListener&&m.addEventListener(Re,H)),qe.add&&(qe.add.call(m,$e),$e.handler.guid||($e.handler.guid=k.guid)),L?Ce.splice(Ce.delegateCount++,0,$e):Ce.push($e),g.event.global[Re]=!0)},remove:function(m,w,k,O,L){var B,H,le,ie,Se,$e,qe,Ce,Re,At,Ht,dt=V.hasData(m)&&V.get(m);if(!(!dt||!(ie=dt.events))){for(w=(w||"").match(re)||[""],Se=w.length;Se--;){if(le=Ca.exec(w[Se])||[],Re=Ht=le[1],At=(le[2]||"").split(".").sort(),!Re){for(Re in ie)g.event.remove(m,Re+w[Se],k,O,!0);continue}for(qe=g.event.special[Re]||{},Re=(O?qe.delegateType:qe.bindType)||Re,Ce=ie[Re]||[],le=le[2]&&new RegExp("(^|\\.)"+At.join("\\.(?:.*\\.|)")+"(\\.|$)"),H=B=Ce.length;B--;)$e=Ce[B],(L||Ht===$e.origType)&&(!k||k.guid===$e.guid)&&(!le||le.test($e.namespace))&&(!O||O===$e.selector||O==="**"&&$e.selector)&&(Ce.splice(B,1),$e.selector&&Ce.delegateCount--,qe.remove&&qe.remove.call(m,$e));H&&!Ce.length&&((!qe.teardown||qe.teardown.call(m,At,dt.handle)===!1)&&g.removeEvent(m,Re,dt.handle),delete ie[Re])}g.isEmptyObject(ie)&&V.remove(m,"handle events")}},dispatch:function(m){var w,k,O,L,B,H,le=new Array(arguments.length),ie=g.event.fix(m),Se=(V.get(this,"events")||Object.create(null))[ie.type]||[],$e=g.event.special[ie.type]||{};for(le[0]=ie,w=1;w<arguments.length;w++)le[w]=arguments[w];if(ie.delegateTarget=this,!($e.preDispatch&&$e.preDispatch.call(this,ie)===!1)){for(H=g.event.handlers.call(this,ie,Se),w=0;(L=H[w++])&&!ie.isPropagationStopped();)for(ie.currentTarget=L.elem,k=0;(B=L.handlers[k++])&&!ie.isImmediatePropagationStopped();)(!ie.rnamespace||B.namespace===!1||ie.rnamespace.test(B.namespace))&&(ie.handleObj=B,ie.data=B.data,O=((g.event.special[B.origType]||{}).handle||B.handler).apply(L.elem,le),O!==void 0&&(ie.result=O)===!1&&(ie.preventDefault(),ie.stopPropagation()));return $e.postDispatch&&$e.postDispatch.call(this,ie),ie.result}},handlers:function(m,w){var k,O,L,B,H,le=[],ie=w.delegateCount,Se=m.target;if(ie&&Se.nodeType&&!(m.type==="click"&&m.button>=1)){for(;Se!==this;Se=Se.parentNode||this)if(Se.nodeType===1&&!(m.type==="click"&&Se.disabled===!0)){for(B=[],H={},k=0;k<ie;k++)O=w[k],L=O.selector+" ",H[L]===void 0&&(H[L]=O.needsContext?g(L,this).index(Se)>-1:g.find(L,this,null,[Se]).length),H[L]&&B.push(O);B.length&&le.push({elem:Se,handlers:B})}}return Se=this,ie<w.length&&le.push({elem:Se,handlers:w.slice(ie)}),le},addProp:function(m,w){Object.defineProperty(g.Event.prototype,m,{enumerable:!0,configurable:!0,get:E(w)?function(){if(this.originalEvent)return w(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[m]},set:function(k){Object.defineProperty(this,m,{enumerable:!0,configurable:!0,writable:!0,value:k})}})},fix:function(m){return m[g.expando]?m:new g.Event(m)},special:{load:{noBubble:!0},click:{setup:function(m){var w=this||m;return ir.test(w.type)&&w.click&&W(w,"input")&&pl(w,"click",Js),!1},trigger:function(m){var w=this||m;return ir.test(w.type)&&w.click&&W(w,"input")&&pl(w,"click"),!0},_default:function(m){var w=m.target;return ir.test(w.type)&&w.click&&W(w,"input")&&V.get(w,"click")||W(w,"a")}},beforeunload:{postDispatch:function(m){m.result!==void 0&&m.originalEvent&&(m.originalEvent.returnValue=m.result)}}}};function pl(m,w,k){if(!k){V.get(m,w)===void 0&&g.event.add(m,w,Js);return}V.set(m,w,!1),g.event.add(m,w,{namespace:!1,handler:function(O){var L,B,H=V.get(this,w);if(O.isTrigger&1&&this[w]){if(H.length)(g.event.special[w]||{}).delegateType&&O.stopPropagation();else if(H=s.call(arguments),V.set(this,w,H),L=k(this,w),this[w](),B=V.get(this,w),H!==B||L?V.set(this,w,!1):B={},H!==B)return O.stopImmediatePropagation(),O.preventDefault(),B&&B.value}else H.length&&(V.set(this,w,{value:g.event.trigger(g.extend(H[0],g.Event.prototype),H.slice(1),this)}),O.stopImmediatePropagation())}})}g.removeEvent=function(m,w,k){m.removeEventListener&&m.removeEventListener(w,k)},g.Event=function(m,w){if(!(this instanceof g.Event))return new g.Event(m,w);m&&m.type?(this.originalEvent=m,this.type=m.type,this.isDefaultPrevented=m.defaultPrevented||m.defaultPrevented===void 0&&m.returnValue===!1?Js:Qr,this.target=m.target&&m.target.nodeType===3?m.target.parentNode:m.target,this.currentTarget=m.currentTarget,this.relatedTarget=m.relatedTarget):this.type=m,w&&g.extend(this,w),this.timeStamp=m&&m.timeStamp||Date.now(),this[g.expando]=!0},g.Event.prototype={constructor:g.Event,isDefaultPrevented:Qr,isPropagationStopped:Qr,isImmediatePropagationStopped:Qr,isSimulated:!1,preventDefault:function(){var m=this.originalEvent;this.isDefaultPrevented=Js,m&&!this.isSimulated&&m.preventDefault()},stopPropagation:function(){var m=this.originalEvent;this.isPropagationStopped=Js,m&&!this.isSimulated&&m.stopPropagation()},stopImmediatePropagation:function(){var m=this.originalEvent;this.isImmediatePropagationStopped=Js,m&&!this.isSimulated&&m.stopImmediatePropagation(),this.stopPropagation()}},g.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},g.event.addProp),g.each({focus:"focusin",blur:"focusout"},function(m,w){g.event.special[m]={setup:function(){return pl(this,m,Pa),!1},trigger:function(){return pl(this,m),!0},_default:function(k){return V.get(k.target,m)},delegateType:w}}),g.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(m,w){g.event.special[m]={delegateType:w,bindType:w,handle:function(k){var O,L=this,B=k.relatedTarget,H=k.handleObj;return(!B||B!==L&&!g.contains(L,B))&&(k.type=H.origType,O=H.handler.apply(this,arguments),k.type=w),O}}}),g.fn.extend({on:function(m,w,k,O){return cu(this,m,w,k,O)},one:function(m,w,k,O){return cu(this,m,w,k,O,1)},off:function(m,w,k){var O,L;if(m&&m.preventDefault&&m.handleObj)return O=m.handleObj,g(m.delegateTarget).off(O.namespace?O.origType+"."+O.namespace:O.origType,O.selector,O.handler),this;if(typeof m=="object"){for(L in m)this.off(L,w,m[L]);return this}return(w===!1||typeof w=="function")&&(k=w,w=void 0),k===!1&&(k=Qr),this.each(function(){g.event.remove(this,m,k,w)})}});var xc=/<script|<style|<link/i,oh=/checked\s*(?:[^=]|=\s*.checked.)/i,np=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function gl(m,w){return W(m,"table")&&W(w.nodeType!==11?w:w.firstChild,"tr")&&g(m).children("tbody")[0]||m}function rp(m){return m.type=(m.getAttribute("type")!==null)+"/"+m.type,m}function fu(m){return(m.type||"").slice(0,5)==="true/"?m.type=m.type.slice(5):m.removeAttribute("type"),m}function he(m,w){var k,O,L,B,H,le,ie;if(w.nodeType===1){if(V.hasData(m)&&(B=V.get(m),ie=B.events,ie)){V.remove(w,"handle events");for(L in ie)for(k=0,O=ie[L].length;k<O;k++)g.event.add(w,L,ie[L][k])}Q.hasData(m)&&(H=Q.access(m),le=g.extend({},H),Q.set(w,le))}}function te(m,w){var k=w.nodeName.toLowerCase();k==="input"&&ir.test(m.type)?w.checked=m.checked:(k==="input"||k==="textarea")&&(w.defaultValue=m.defaultValue)}function pe(m,w,k,O){w=o(w);var L,B,H,le,ie,Se,$e=0,qe=m.length,Ce=qe-1,Re=w[0],At=E(Re);if(At||qe>1&&typeof Re=="string"&&!b.checkClone&&oh.test(Re))return m.each(function(Ht){var dt=m.eq(Ht);At&&(w[0]=Re.call(this,Ht,dt.html())),pe(dt,w,k,O)});if(qe&&(L=dl(w,m[0].ownerDocument,!1,m,O),B=L.firstChild,L.childNodes.length===1&&(L=B),B||O)){for(H=g.map(En(L,"script"),rp),le=H.length;$e<qe;$e++)ie=L,$e!==Ce&&(ie=g.clone(ie,!0,!0),le&&g.merge(H,En(ie,"script"))),k.call(m[$e],ie,$e);if(le)for(Se=H[H.length-1].ownerDocument,g.map(H,fu),$e=0;$e<le;$e++)ie=H[$e],Qn.test(ie.type||"")&&!V.access(ie,"globalEval")&&g.contains(Se,ie)&&(ie.src&&(ie.type||"").toLowerCase()!=="module"?g._evalUrl&&!ie.noModule&&g._evalUrl(ie.src,{nonce:ie.nonce||ie.getAttribute("nonce")},Se):I(ie.textContent.replace(np,""),ie,Se))}return m}function Me(m,w,k){for(var O,L=w?g.filter(w,m):m,B=0;(O=L[B])!=null;B++)!k&&O.nodeType===1&&g.cleanData(En(O)),O.parentNode&&(k&&ft(O)&&vs(En(O,"script")),O.parentNode.removeChild(O));return m}g.extend({htmlPrefilter:function(m){return m},clone:function(m,w,k){var O,L,B,H,le=m.cloneNode(!0),ie=ft(m);if(!b.noCloneChecked&&(m.nodeType===1||m.nodeType===11)&&!g.isXMLDoc(m))for(H=En(le),B=En(m),O=0,L=B.length;O<L;O++)te(B[O],H[O]);if(w)if(k)for(B=B||En(m),H=H||En(le),O=0,L=B.length;O<L;O++)he(B[O],H[O]);else he(m,le);return H=En(le,"script"),H.length>0&&vs(H,!ie&&En(m,"script")),le},cleanData:function(m){for(var w,k,O,L=g.event.special,B=0;(k=m[B])!==void 0;B++)if(C(k)){if(w=k[V.expando]){if(w.events)for(O in w.events)L[O]?g.event.remove(k,O):g.removeEvent(k,O,w.handle);k[V.expando]=void 0}k[Q.expando]&&(k[Q.expando]=void 0)}}}),g.fn.extend({detach:function(m){return Me(this,m,!0)},remove:function(m){return Me(this,m)},text:function(m){return Be(this,function(w){return w===void 0?g.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=w)})},null,m,arguments.length)},append:function(){return pe(this,arguments,function(m){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var w=gl(this,m);w.appendChild(m)}})},prepend:function(){return pe(this,arguments,function(m){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var w=gl(this,m);w.insertBefore(m,w.firstChild)}})},before:function(){return pe(this,arguments,function(m){this.parentNode&&this.parentNode.insertBefore(m,this)})},after:function(){return pe(this,arguments,function(m){this.parentNode&&this.parentNode.insertBefore(m,this.nextSibling)})},empty:function(){for(var m,w=0;(m=this[w])!=null;w++)m.nodeType===1&&(g.cleanData(En(m,!1)),m.textContent="");return this},clone:function(m,w){return m=m??!1,w=w??m,this.map(function(){return g.clone(this,m,w)})},html:function(m){return Be(this,function(w){var k=this[0]||{},O=0,L=this.length;if(w===void 0&&k.nodeType===1)return k.innerHTML;if(typeof w=="string"&&!xc.test(w)&&!Sn[(yi.exec(w)||["",""])[1].toLowerCase()]){w=g.htmlPrefilter(w);try{for(;O<L;O++)k=this[O]||{},k.nodeType===1&&(g.cleanData(En(k,!1)),k.innerHTML=w);k=0}catch{}}k&&this.empty().append(w)},null,m,arguments.length)},replaceWith:function(){var m=[];return pe(this,arguments,function(w){var k=this.parentNode;g.inArray(this,m)<0&&(g.cleanData(En(this)),k&&k.replaceChild(w,this))},m)}}),g.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(m,w){g.fn[m]=function(k){for(var O,L=[],B=g(k),H=B.length-1,le=0;le<=H;le++)O=le===H?this:this.clone(!0),g(B[le])[w](O),a.apply(L,O.get());return this.pushStack(L)}});var Oe=new RegExp("^("+tt+")(?!px)[a-z%]+$","i"),bt=/^--/,xt=function(m){var w=m.ownerDocument.defaultView;return(!w||!w.opener)&&(w=e),w.getComputedStyle(m)},rn=function(m,w,k){var O,L,B={};for(L in w)B[L]=m.style[L],m.style[L]=w[L];O=k.call(m);for(L in w)m.style[L]=B[L];return O},Bn=new RegExp(Xe.join("|"),"i"),sr="[\\x20\\t\\r\\n\\f]",en=new RegExp("^"+sr+"+|((?:^|[^\\\\])(?:\\\\.)*)"+sr+"+$","g");(function(){function m(){if(Se){ie.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Se.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Ye.appendChild(ie).appendChild(Se);var $e=e.getComputedStyle(Se);k=$e.top!=="1%",le=w($e.marginLeft)===12,Se.style.right="60%",B=w($e.right)===36,O=w($e.width)===36,Se.style.position="absolute",L=w(Se.offsetWidth/3)===12,Ye.removeChild(ie),Se=null}}function w($e){return Math.round(parseFloat($e))}var k,O,L,B,H,le,ie=S.createElement("div"),Se=S.createElement("div");Se.style&&(Se.style.backgroundClip="content-box",Se.cloneNode(!0).style.backgroundClip="",b.clearCloneStyle=Se.style.backgroundClip==="content-box",g.extend(b,{boxSizingReliable:function(){return m(),O},pixelBoxStyles:function(){return m(),B},pixelPosition:function(){return m(),k},reliableMarginLeft:function(){return m(),le},scrollboxSize:function(){return m(),L},reliableTrDimensions:function(){var $e,qe,Ce,Re;return H==null&&($e=S.createElement("table"),qe=S.createElement("tr"),Ce=S.createElement("div"),$e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",qe.style.cssText="border:1px solid",qe.style.height="1px",Ce.style.height="9px",Ce.style.display="block",Ye.appendChild($e).appendChild(qe).appendChild(Ce),Re=e.getComputedStyle(qe),H=parseInt(Re.height,10)+parseInt(Re.borderTopWidth,10)+parseInt(Re.borderBottomWidth,10)===qe.offsetHeight,Ye.removeChild($e)),H}}))})();function Pn(m,w,k){var O,L,B,H,le=bt.test(w),ie=m.style;return k=k||xt(m),k&&(H=k.getPropertyValue(w)||k[w],le&&H&&(H=H.replace(en,"$1")||void 0),H===""&&!ft(m)&&(H=g.style(m,w)),!b.pixelBoxStyles()&&Oe.test(H)&&Bn.test(w)&&(O=ie.width,L=ie.minWidth,B=ie.maxWidth,ie.minWidth=ie.maxWidth=ie.width=H,H=k.width,ie.width=O,ie.minWidth=L,ie.maxWidth=B)),H!==void 0?H+"":H}function or(m,w){return{get:function(){if(m()){delete this.get;return}return(this.get=w).apply(this,arguments)}}}var Bt=["Webkit","Moz","ms"],Un=S.createElement("div").style,Wn={};function Gn(m){for(var w=m[0].toUpperCase()+m.slice(1),k=Bt.length;k--;)if(m=Bt[k]+w,m in Un)return m}function bi(m){var w=g.cssProps[m]||Wn[m];return w||(m in Un?m:Wn[m]=Gn(m)||m)}var ys=/^(none|table(?!-c[ea]).+)/,bs={position:"absolute",visibility:"hidden",display:"block"},Zo={letterSpacing:"0",fontWeight:"400"};function Xs(m,w,k){var O=Je.exec(w);return O?Math.max(0,O[2]-(k||0))+(O[3]||"px"):w}function ei(m,w,k,O,L,B){var H=w==="width"?1:0,le=0,ie=0;if(k===(O?"border":"content"))return 0;for(;H<4;H+=2)k==="margin"&&(ie+=g.css(m,k+Xe[H],!0,L)),O?(k==="content"&&(ie-=g.css(m,"padding"+Xe[H],!0,L)),k!=="margin"&&(ie-=g.css(m,"border"+Xe[H]+"Width",!0,L))):(ie+=g.css(m,"padding"+Xe[H],!0,L),k!=="padding"?ie+=g.css(m,"border"+Xe[H]+"Width",!0,L):le+=g.css(m,"border"+Xe[H]+"Width",!0,L));return!O&&B>=0&&(ie+=Math.max(0,Math.ceil(m["offset"+w[0].toUpperCase()+w.slice(1)]-B-ie-le-.5))||0),ie}function Ii(m,w,k){var O=xt(m),L=!b.boxSizingReliable()||k,B=L&&g.css(m,"boxSizing",!1,O)==="border-box",H=B,le=Pn(m,w,O),ie="offset"+w[0].toUpperCase()+w.slice(1);if(Oe.test(le)){if(!k)return le;le="auto"}return(!b.boxSizingReliable()&&B||!b.reliableTrDimensions()&&W(m,"tr")||le==="auto"||!parseFloat(le)&&g.css(m,"display",!1,O)==="inline")&&m.getClientRects().length&&(B=g.css(m,"boxSizing",!1,O)==="border-box",H=ie in m,H&&(le=m[ie])),le=parseFloat(le)||0,le+ei(m,w,k||(B?"border":"content"),H,O,le)+"px"}g.extend({cssHooks:{opacity:{get:function(m,w){if(w){var k=Pn(m,"opacity");return k===""?"1":k}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(m,w,k,O){if(!(!m||m.nodeType===3||m.nodeType===8||!m.style)){var L,B,H,le=K(w),ie=bt.test(w),Se=m.style;if(ie||(w=bi(le)),H=g.cssHooks[w]||g.cssHooks[le],k!==void 0){if(B=typeof k,B==="string"&&(L=Je.exec(k))&&L[1]&&(k=yt(m,w,L),B="number"),k==null||k!==k)return;B==="number"&&!ie&&(k+=L&&L[3]||(g.cssNumber[le]?"":"px")),!b.clearCloneStyle&&k===""&&w.indexOf("background")===0&&(Se[w]="inherit"),(!H||!("set"in H)||(k=H.set(m,k,O))!==void 0)&&(ie?Se.setProperty(w,k):Se[w]=k)}else return H&&"get"in H&&(L=H.get(m,!1,O))!==void 0?L:Se[w]}},css:function(m,w,k,O){var L,B,H,le=K(w),ie=bt.test(w);return ie||(w=bi(le)),H=g.cssHooks[w]||g.cssHooks[le],H&&"get"in H&&(L=H.get(m,!0,k)),L===void 0&&(L=Pn(m,w,O)),L==="normal"&&w in Zo&&(L=Zo[w]),k===""||k?(B=parseFloat(L),k===!0||isFinite(B)?B||0:L):L}}),g.each(["height","width"],function(m,w){g.cssHooks[w]={get:function(k,O,L){if(O)return ys.test(g.css(k,"display"))&&(!k.getClientRects().length||!k.getBoundingClientRect().width)?rn(k,bs,function(){return Ii(k,w,L)}):Ii(k,w,L)},set:function(k,O,L){var B,H=xt(k),le=!b.scrollboxSize()&&H.position==="absolute",ie=le||L,Se=ie&&g.css(k,"boxSizing",!1,H)==="border-box",$e=L?ei(k,w,L,Se,H):0;return Se&&le&&($e-=Math.ceil(k["offset"+w[0].toUpperCase()+w.slice(1)]-parseFloat(H[w])-ei(k,w,"border",!1,H)-.5)),$e&&(B=Je.exec(O))&&(B[3]||"px")!=="px"&&(k.style[w]=O,O=g.css(k,w)),Xs(k,O,$e)}}}),g.cssHooks.marginLeft=or(b.reliableMarginLeft,function(m,w){if(w)return(parseFloat(Pn(m,"marginLeft"))||m.getBoundingClientRect().left-rn(m,{marginLeft:0},function(){return m.getBoundingClientRect().left}))+"px"}),g.each({margin:"",padding:"",border:"Width"},function(m,w){g.cssHooks[m+w]={expand:function(k){for(var O=0,L={},B=typeof k=="string"?k.split(" "):[k];O<4;O++)L[m+Xe[O]+w]=B[O]||B[O-2]||B[0];return L}},m!=="margin"&&(g.cssHooks[m+w].set=Xs)}),g.fn.extend({css:function(m,w){return Be(this,function(k,O,L){var B,H,le={},ie=0;if(Array.isArray(O)){for(B=xt(k),H=O.length;ie<H;ie++)le[O[ie]]=g.css(k,O[ie],!1,B);return le}return L!==void 0?g.style(k,O,L):g.css(k,O)},m,w,arguments.length>1)}});function vr(m,w,k,O,L){return new vr.prototype.init(m,w,k,O,L)}g.Tween=vr,vr.prototype={constructor:vr,init:function(m,w,k,O,L,B){this.elem=m,this.prop=k,this.easing=L||g.easing._default,this.options=w,this.start=this.now=this.cur(),this.end=O,this.unit=B||(g.cssNumber[k]?"":"px")},cur:function(){var m=vr.propHooks[this.prop];return m&&m.get?m.get(this):vr.propHooks._default.get(this)},run:function(m){var w,k=vr.propHooks[this.prop];return this.options.duration?this.pos=w=g.easing[this.easing](m,this.options.duration*m,0,1,this.options.duration):this.pos=w=m,this.now=(this.end-this.start)*w+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),k&&k.set?k.set(this):vr.propHooks._default.set(this),this}},vr.prototype.init.prototype=vr.prototype,vr.propHooks={_default:{get:function(m){var w;return m.elem.nodeType!==1||m.elem[m.prop]!=null&&m.elem.style[m.prop]==null?m.elem[m.prop]:(w=g.css(m.elem,m.prop,""),!w||w==="auto"?0:w)},set:function(m){g.fx.step[m.prop]?g.fx.step[m.prop](m):m.elem.nodeType===1&&(g.cssHooks[m.prop]||m.elem.style[bi(m.prop)]!=null)?g.style(m.elem,m.prop,m.now+m.unit):m.elem[m.prop]=m.now}}},vr.propHooks.scrollTop=vr.propHooks.scrollLeft={set:function(m){m.elem.nodeType&&m.elem.parentNode&&(m.elem[m.prop]=m.now)}},g.easing={linear:function(m){return m},swing:function(m){return .5-Math.cos(m*Math.PI)/2},_default:"swing"},g.fx=vr.prototype.init,g.fx.step={};var hi,xo,ah=/^(?:toggle|show|hide)$/,Sc=/queueHooks$/;function Qo(){xo&&(S.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(Qo):e.setTimeout(Qo,g.fx.interval),g.fx.tick())}function Oa(){return e.setTimeout(function(){hi=void 0}),hi=Date.now()}function Zs(m,w){var k,O=0,L={height:m};for(w=w?1:0;O<4;O+=2-w)k=Xe[O],L["margin"+k]=L["padding"+k]=m;return w&&(L.opacity=L.width=m),L}function Ec(m,w,k){for(var O,L=(ws.tweeners[w]||[]).concat(ws.tweeners["*"]),B=0,H=L.length;B<H;B++)if(O=L[B].call(k,w,m))return O}function _c(m,w,k){var O,L,B,H,le,ie,Se,$e,qe="width"in w||"height"in w,Ce=this,Re={},At=m.style,Ht=m.nodeType&&Vt(m),dt=V.get(m,"fxshow");k.queue||(H=g._queueHooks(m,"fx"),H.unqueued==null&&(H.unqueued=0,le=H.empty.fire,H.empty.fire=function(){H.unqueued||le()}),H.unqueued++,Ce.always(function(){Ce.always(function(){H.unqueued--,g.queue(m,"fx").length||H.empty.fire()})}));for(O in w)if(L=w[O],ah.test(L)){if(delete w[O],B=B||L==="toggle",L===(Ht?"hide":"show"))if(L==="show"&&dt&&dt[O]!==void 0)Ht=!0;else continue;Re[O]=dt&&dt[O]||g.style(m,O)}if(ie=!g.isEmptyObject(w),!(!ie&&g.isEmptyObject(Re))){qe&&m.nodeType===1&&(k.overflow=[At.overflow,At.overflowX,At.overflowY],Se=dt&&dt.display,Se==null&&(Se=V.get(m,"display")),$e=g.css(m,"display"),$e==="none"&&(Se?$e=Se:(Or([m],!0),Se=m.style.display||Se,$e=g.css(m,"display"),Or([m]))),($e==="inline"||$e==="inline-block"&&Se!=null)&&g.css(m,"float")==="none"&&(ie||(Ce.done(function(){At.display=Se}),Se==null&&($e=At.display,Se=$e==="none"?"":$e)),At.display="inline-block")),k.overflow&&(At.overflow="hidden",Ce.always(function(){At.overflow=k.overflow[0],At.overflowX=k.overflow[1],At.overflowY=k.overflow[2]})),ie=!1;for(O in Re)ie||(dt?"hidden"in dt&&(Ht=dt.hidden):dt=V.access(m,"fxshow",{display:Se}),B&&(dt.hidden=!Ht),Ht&&Or([m],!0),Ce.done(function(){Ht||Or([m]),V.remove(m,"fxshow");for(O in Re)g.style(m,O,Re[O])})),ie=Ec(Ht?dt[O]:0,O,Ce),O in dt||(dt[O]=ie.start,Ht&&(ie.end=ie.start,ie.start=0))}}function So(m,w){var k,O,L,B,H;for(k in m)if(O=K(k),L=w[O],B=m[k],Array.isArray(B)&&(L=B[1],B=m[k]=B[0]),k!==O&&(m[O]=B,delete m[k]),H=g.cssHooks[O],H&&"expand"in H){B=H.expand(B),delete m[O];for(k in B)k in m||(m[k]=B[k],w[k]=L)}else w[O]=L}function ws(m,w,k){var O,L,B=0,H=ws.prefilters.length,le=g.Deferred().always(function(){delete ie.elem}),ie=function(){if(L)return!1;for(var qe=hi||Oa(),Ce=Math.max(0,Se.startTime+Se.duration-qe),Re=Ce/Se.duration||0,At=1-Re,Ht=0,dt=Se.tweens.length;Ht<dt;Ht++)Se.tweens[Ht].run(At);return le.notifyWith(m,[Se,At,Ce]),At<1&&dt?Ce:(dt||le.notifyWith(m,[Se,1,0]),le.resolveWith(m,[Se]),!1)},Se=le.promise({elem:m,props:g.extend({},w),opts:g.extend(!0,{specialEasing:{},easing:g.easing._default},k),originalProperties:w,originalOptions:k,startTime:hi||Oa(),duration:k.duration,tweens:[],createTween:function(qe,Ce){var Re=g.Tween(m,Se.opts,qe,Ce,Se.opts.specialEasing[qe]||Se.opts.easing);return Se.tweens.push(Re),Re},stop:function(qe){var Ce=0,Re=qe?Se.tweens.length:0;if(L)return this;for(L=!0;Ce<Re;Ce++)Se.tweens[Ce].run(1);return qe?(le.notifyWith(m,[Se,1,0]),le.resolveWith(m,[Se,qe])):le.rejectWith(m,[Se,qe]),this}}),$e=Se.props;for(So($e,Se.opts.specialEasing);B<H;B++)if(O=ws.prefilters[B].call(Se,m,$e,Se.opts),O)return E(O.stop)&&(g._queueHooks(Se.elem,Se.opts.queue).stop=O.stop.bind(O)),O;return g.map($e,Ec,Se),E(Se.opts.start)&&Se.opts.start.call(m,Se),Se.progress(Se.opts.progress).done(Se.opts.done,Se.opts.complete).fail(Se.opts.fail).always(Se.opts.always),g.fx.timer(g.extend(ie,{elem:m,anim:Se,queue:Se.opts.queue})),Se}g.Animation=g.extend(ws,{tweeners:{"*":[function(m,w){var k=this.createTween(m,w);return yt(k.elem,m,Je.exec(w),k),k}]},tweener:function(m,w){E(m)?(w=m,m=["*"]):m=m.match(re);for(var k,O=0,L=m.length;O<L;O++)k=m[O],ws.tweeners[k]=ws.tweeners[k]||[],ws.tweeners[k].unshift(w)},prefilters:[_c],prefilter:function(m,w){w?ws.prefilters.unshift(m):ws.prefilters.push(m)}}),g.speed=function(m,w,k){var O=m&&typeof m=="object"?g.extend({},m):{complete:k||!k&&w||E(m)&&m,duration:m,easing:k&&w||w&&!E(w)&&w};return g.fx.off?O.duration=0:typeof O.duration!="number"&&(O.duration in g.fx.speeds?O.duration=g.fx.speeds[O.duration]:O.duration=g.fx.speeds._default),(O.queue==null||O.queue===!0)&&(O.queue="fx"),O.old=O.complete,O.complete=function(){E(O.old)&&O.old.call(this),O.queue&&g.dequeue(this,O.queue)},O},g.fn.extend({fadeTo:function(m,w,k,O){return this.filter(Vt).css("opacity",0).show().end().animate({opacity:w},m,k,O)},animate:function(m,w,k,O){var L=g.isEmptyObject(m),B=g.speed(w,k,O),H=function(){var le=ws(this,g.extend({},m),B);(L||V.get(this,"finish"))&&le.stop(!0)};return H.finish=H,L||B.queue===!1?this.each(H):this.queue(B.queue,H)},stop:function(m,w,k){var O=function(L){var B=L.stop;delete L.stop,B(k)};return typeof m!="string"&&(k=w,w=m,m=void 0),w&&this.queue(m||"fx",[]),this.each(function(){var L=!0,B=m!=null&&m+"queueHooks",H=g.timers,le=V.get(this);if(B)le[B]&&le[B].stop&&O(le[B]);else for(B in le)le[B]&&le[B].stop&&Sc.test(B)&&O(le[B]);for(B=H.length;B--;)H[B].elem===this&&(m==null||H[B].queue===m)&&(H[B].anim.stop(k),L=!1,H.splice(B,1));(L||!k)&&g.dequeue(this,m)})},finish:function(m){return m!==!1&&(m=m||"fx"),this.each(function(){var w,k=V.get(this),O=k[m+"queue"],L=k[m+"queueHooks"],B=g.timers,H=O?O.length:0;for(k.finish=!0,g.queue(this,m,[]),L&&L.stop&&L.stop.call(this,!0),w=B.length;w--;)B[w].elem===this&&B[w].queue===m&&(B[w].anim.stop(!0),B.splice(w,1));for(w=0;w<H;w++)O[w]&&O[w].finish&&O[w].finish.call(this);delete k.finish})}}),g.each(["toggle","show","hide"],function(m,w){var k=g.fn[w];g.fn[w]=function(O,L,B){return O==null||typeof O=="boolean"?k.apply(this,arguments):this.animate(Zs(w,!0),O,L,B)}}),g.each({slideDown:Zs("show"),slideUp:Zs("hide"),slideToggle:Zs("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(m,w){g.fn[m]=function(k,O,L){return this.animate(w,k,O,L)}}),g.timers=[],g.fx.tick=function(){var m,w=0,k=g.timers;for(hi=Date.now();w<k.length;w++)m=k[w],!m()&&k[w]===m&&k.splice(w--,1);k.length||g.fx.stop(),hi=void 0},g.fx.timer=function(m){g.timers.push(m),g.fx.start()},g.fx.interval=13,g.fx.start=function(){xo||(xo=!0,Qo())},g.fx.stop=function(){xo=null},g.fx.speeds={slow:600,fast:200,_default:400},g.fn.delay=function(m,w){return m=g.fx&&g.fx.speeds[m]||m,w=w||"fx",this.queue(w,function(k,O){var L=e.setTimeout(k,m);O.stop=function(){e.clearTimeout(L)}})},function(){var m=S.createElement("input"),w=S.createElement("select"),k=w.appendChild(S.createElement("option"));m.type="checkbox",b.checkOn=m.value!=="",b.optSelected=k.selected,m=S.createElement("input"),m.value="t",m.type="radio",b.radioValue=m.value==="t"}();var fv,hu=g.expr.attrHandle;g.fn.extend({attr:function(m,w){return Be(this,g.attr,m,w,arguments.length>1)},removeAttr:function(m){return this.each(function(){g.removeAttr(this,m)})}}),g.extend({attr:function(m,w,k){var O,L,B=m.nodeType;if(!(B===3||B===8||B===2)){if(typeof m.getAttribute>"u")return g.prop(m,w,k);if((B!==1||!g.isXMLDoc(m))&&(L=g.attrHooks[w.toLowerCase()]||(g.expr.match.bool.test(w)?fv:void 0)),k!==void 0){if(k===null){g.removeAttr(m,w);return}return L&&"set"in L&&(O=L.set(m,k,w))!==void 0?O:(m.setAttribute(w,k+""),k)}return L&&"get"in L&&(O=L.get(m,w))!==null?O:(O=g.find.attr(m,w),O??void 0)}},attrHooks:{type:{set:function(m,w){if(!b.radioValue&&w==="radio"&&W(m,"input")){var k=m.value;return m.setAttribute("type",w),k&&(m.value=k),w}}}},removeAttr:function(m,w){var k,O=0,L=w&&w.match(re);if(L&&m.nodeType===1)for(;k=L[O++];)m.removeAttribute(k)}}),fv={set:function(m,w,k){return w===!1?g.removeAttr(m,k):m.setAttribute(k,k),k}},g.each(g.expr.match.bool.source.match(/\w+/g),function(m,w){var k=hu[w]||g.find.attr;hu[w]=function(O,L,B){var H,le,ie=L.toLowerCase();return B||(le=hu[ie],hu[ie]=H,H=k(O,L,B)!=null?ie:null,hu[ie]=le),H}});var hv=/^(?:input|select|textarea|button)$/i,ip=/^(?:a|area)$/i;g.fn.extend({prop:function(m,w){return Be(this,g.prop,m,w,arguments.length>1)},removeProp:function(m){return this.each(function(){delete this[g.propFix[m]||m]})}}),g.extend({prop:function(m,w,k){var O,L,B=m.nodeType;if(!(B===3||B===8||B===2))return(B!==1||!g.isXMLDoc(m))&&(w=g.propFix[w]||w,L=g.propHooks[w]),k!==void 0?L&&"set"in L&&(O=L.set(m,k,w))!==void 0?O:m[w]=k:L&&"get"in L&&(O=L.get(m,w))!==null?O:m[w]},propHooks:{tabIndex:{get:function(m){var w=g.find.attr(m,"tabindex");return w?parseInt(w,10):hv.test(m.nodeName)||ip.test(m.nodeName)&&m.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),b.optSelected||(g.propHooks.selected={get:function(m){var w=m.parentNode;return w&&w.parentNode&&w.parentNode.selectedIndex,null},set:function(m){var w=m.parentNode;w&&(w.selectedIndex,w.parentNode&&w.parentNode.selectedIndex)}}),g.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){g.propFix[this.toLowerCase()]=this});function ml(m){var w=m.match(re)||[];return w.join(" ")}function Ta(m){return m.getAttribute&&m.getAttribute("class")||""}function Ac(m){return Array.isArray(m)?m:typeof m=="string"?m.match(re)||[]:[]}g.fn.extend({addClass:function(m){var w,k,O,L,B,H;return E(m)?this.each(function(le){g(this).addClass(m.call(this,le,Ta(this)))}):(w=Ac(m),w.length?this.each(function(){if(O=Ta(this),k=this.nodeType===1&&" "+ml(O)+" ",k){for(B=0;B<w.length;B++)L=w[B],k.indexOf(" "+L+" ")<0&&(k+=L+" ");H=ml(k),O!==H&&this.setAttribute("class",H)}}):this)},removeClass:function(m){var w,k,O,L,B,H;return E(m)?this.each(function(le){g(this).removeClass(m.call(this,le,Ta(this)))}):arguments.length?(w=Ac(m),w.length?this.each(function(){if(O=Ta(this),k=this.nodeType===1&&" "+ml(O)+" ",k){for(B=0;B<w.length;B++)for(L=w[B];k.indexOf(" "+L+" ")>-1;)k=k.replace(" "+L+" "," ");H=ml(k),O!==H&&this.setAttribute("class",H)}}):this):this.attr("class","")},toggleClass:function(m,w){var k,O,L,B,H=typeof m,le=H==="string"||Array.isArray(m);return E(m)?this.each(function(ie){g(this).toggleClass(m.call(this,ie,Ta(this),w),w)}):typeof w=="boolean"&&le?w?this.addClass(m):this.removeClass(m):(k=Ac(m),this.each(function(){if(le)for(B=g(this),L=0;L<k.length;L++)O=k[L],B.hasClass(O)?B.removeClass(O):B.addClass(O);else(m===void 0||H==="boolean")&&(O=Ta(this),O&&V.set(this,"__className__",O),this.setAttribute&&this.setAttribute("class",O||m===!1?"":V.get(this,"__className__")||""))}))},hasClass:function(m){var w,k,O=0;for(w=" "+m+" ";k=this[O++];)if(k.nodeType===1&&(" "+ml(Ta(k))+" ").indexOf(w)>-1)return!0;return!1}});var sp=/\r/g;g.fn.extend({val:function(m){var w,k,O,L=this[0];return arguments.length?(O=E(m),this.each(function(B){var H;this.nodeType===1&&(O?H=m.call(this,B,g(this).val()):H=m,H==null?H="":typeof H=="number"?H+="":Array.isArray(H)&&(H=g.map(H,function(le){return le==null?"":le+""})),w=g.valHooks[this.type]||g.valHooks[this.nodeName.toLowerCase()],(!w||!("set"in w)||w.set(this,H,"value")===void 0)&&(this.value=H))})):L?(w=g.valHooks[L.type]||g.valHooks[L.nodeName.toLowerCase()],w&&"get"in w&&(k=w.get(L,"value"))!==void 0?k:(k=L.value,typeof k=="string"?k.replace(sp,""):k??"")):void 0}}),g.extend({valHooks:{option:{get:function(m){var w=g.find.attr(m,"value");return w??ml(g.text(m))}},select:{get:function(m){var w,k,O,L=m.options,B=m.selectedIndex,H=m.type==="select-one",le=H?null:[],ie=H?B+1:L.length;for(B<0?O=ie:O=H?B:0;O<ie;O++)if(k=L[O],(k.selected||O===B)&&!k.disabled&&(!k.parentNode.disabled||!W(k.parentNode,"optgroup"))){if(w=g(k).val(),H)return w;le.push(w)}return le},set:function(m,w){for(var k,O,L=m.options,B=g.makeArray(w),H=L.length;H--;)O=L[H],(O.selected=g.inArray(g.valHooks.option.get(O),B)>-1)&&(k=!0);return k||(m.selectedIndex=-1),B}}}}),g.each(["radio","checkbox"],function(){g.valHooks[this]={set:function(m,w){if(Array.isArray(w))return m.checked=g.inArray(g(m).val(),w)>-1}},b.checkOn||(g.valHooks[this].get=function(m){return m.getAttribute("value")===null?"on":m.value})}),b.focusin="onfocusin"in e;var vl=/^(?:focusinfocus|focusoutblur)$/,op=function(m){m.stopPropagation()};g.extend(g.event,{trigger:function(m,w,k,O){var L,B,H,le,ie,Se,$e,qe,Ce=[k||S],Re=f.call(m,"type")?m.type:m,At=f.call(m,"namespace")?m.namespace.split("."):[];if(B=qe=H=k=k||S,!(k.nodeType===3||k.nodeType===8)&&!vl.test(Re+g.event.triggered)&&(Re.indexOf(".")>-1&&(At=Re.split("."),Re=At.shift(),At.sort()),ie=Re.indexOf(":")<0&&"on"+Re,m=m[g.expando]?m:new g.Event(Re,typeof m=="object"&&m),m.isTrigger=O?2:3,m.namespace=At.join("."),m.rnamespace=m.namespace?new RegExp("(^|\\.)"+At.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,m.result=void 0,m.target||(m.target=k),w=w==null?[m]:g.makeArray(w,[m]),$e=g.event.special[Re]||{},!(!O&&$e.trigger&&$e.trigger.apply(k,w)===!1))){if(!O&&!$e.noBubble&&!P(k)){for(le=$e.delegateType||Re,vl.test(le+Re)||(B=B.parentNode);B;B=B.parentNode)Ce.push(B),H=B;H===(k.ownerDocument||S)&&Ce.push(H.defaultView||H.parentWindow||e)}for(L=0;(B=Ce[L++])&&!m.isPropagationStopped();)qe=B,m.type=L>1?le:$e.bindType||Re,Se=(V.get(B,"events")||Object.create(null))[m.type]&&V.get(B,"handle"),Se&&Se.apply(B,w),Se=ie&&B[ie],Se&&Se.apply&&C(B)&&(m.result=Se.apply(B,w),m.result===!1&&m.preventDefault());return m.type=Re,!O&&!m.isDefaultPrevented()&&(!$e._default||$e._default.apply(Ce.pop(),w)===!1)&&C(k)&&ie&&E(k[Re])&&!P(k)&&(H=k[ie],H&&(k[ie]=null),g.event.triggered=Re,m.isPropagationStopped()&&qe.addEventListener(Re,op),k[Re](),m.isPropagationStopped()&&qe.removeEventListener(Re,op),g.event.triggered=void 0,H&&(k[ie]=H)),m.result}},simulate:function(m,w,k){var O=g.extend(new g.Event,k,{type:m,isSimulated:!0});g.event.trigger(O,null,w)}}),g.fn.extend({trigger:function(m,w){return this.each(function(){g.event.trigger(m,w,this)})},triggerHandler:function(m,w){var k=this[0];if(k)return g.event.trigger(m,w,k,!0)}}),b.focusin||g.each({focus:"focusin",blur:"focusout"},function(m,w){var k=function(O){g.event.simulate(w,O.target,g.event.fix(O))};g.event.special[w]={setup:function(){var O=this.ownerDocument||this.document||this,L=V.access(O,w);L||O.addEventListener(m,k,!0),V.access(O,w,(L||0)+1)},teardown:function(){var O=this.ownerDocument||this.document||this,L=V.access(O,w)-1;L?V.access(O,w,L):(O.removeEventListener(m,k,!0),V.remove(O,w))}}});var du=e.location,dv={guid:Date.now()},lh=/\?/;g.parseXML=function(m){var w,k;if(!m||typeof m!="string")return null;try{w=new e.DOMParser().parseFromString(m,"text/xml")}catch{}return k=w&&w.getElementsByTagName("parsererror")[0],(!w||k)&&g.error("Invalid XML: "+(k?g.map(k.childNodes,function(O){return O.textContent}).join(`
`):m)),w};var pv=/\[\]$/,ap=/\r?\n/g,gv=/^(?:submit|button|image|reset|file)$/i,Lw=/^(?:input|select|textarea|keygen)/i;function lp(m,w,k,O){var L;if(Array.isArray(w))g.each(w,function(B,H){k||pv.test(m)?O(m,H):lp(m+"["+(typeof H=="object"&&H!=null?B:"")+"]",H,k,O)});else if(!k&&N(w)==="object")for(L in w)lp(m+"["+L+"]",w[L],k,O);else O(m,w)}g.param=function(m,w){var k,O=[],L=function(B,H){var le=E(H)?H():H;O[O.length]=encodeURIComponent(B)+"="+encodeURIComponent(le??"")};if(m==null)return"";if(Array.isArray(m)||m.jquery&&!g.isPlainObject(m))g.each(m,function(){L(this.name,this.value)});else for(k in m)lp(k,m[k],w,L);return O.join("&")},g.fn.extend({serialize:function(){return g.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var m=g.prop(this,"elements");return m?g.makeArray(m):this}).filter(function(){var m=this.type;return this.name&&!g(this).is(":disabled")&&Lw.test(this.nodeName)&&!gv.test(m)&&(this.checked||!ir.test(m))}).map(function(m,w){var k=g(this).val();return k==null?null:Array.isArray(k)?g.map(k,function(O){return{name:w.name,value:O.replace(ap,`\r
`)}}):{name:w.name,value:k.replace(ap,`\r
`)}}).get()}});var Dw=/%20/g,mv=/#.*$/,Fw=/([?&])_=[^&]*/,Vw=/^(.*?):[ \t]*([^\r\n]*)$/mg,Bw=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,jw=/^(?:GET|HEAD)$/,up=/^\/\//,vv={},cp={},yv="*/".concat("*"),fp=S.createElement("a");fp.href=du.href;function bv(m){return function(w,k){typeof w!="string"&&(k=w,w="*");var O,L=0,B=w.toLowerCase().match(re)||[];if(E(k))for(;O=B[L++];)O[0]==="+"?(O=O.slice(1)||"*",(m[O]=m[O]||[]).unshift(k)):(m[O]=m[O]||[]).push(k)}}function Kn(m,w,k,O){var L={},B=m===cp;function H(le){var ie;return L[le]=!0,g.each(m[le]||[],function(Se,$e){var qe=$e(w,k,O);if(typeof qe=="string"&&!B&&!L[qe])return w.dataTypes.unshift(qe),H(qe),!1;if(B)return!(ie=qe)}),ie}return H(w.dataTypes[0])||!L["*"]&&H("*")}function jn(m,w){var k,O,L=g.ajaxSettings.flatOptions||{};for(k in w)w[k]!==void 0&&((L[k]?m:O||(O={}))[k]=w[k]);return O&&g.extend(!0,m,O),m}function zw(m,w,k){for(var O,L,B,H,le=m.contents,ie=m.dataTypes;ie[0]==="*";)ie.shift(),O===void 0&&(O=m.mimeType||w.getResponseHeader("Content-Type"));if(O){for(L in le)if(le[L]&&le[L].test(O)){ie.unshift(L);break}}if(ie[0]in k)B=ie[0];else{for(L in k){if(!ie[0]||m.converters[L+" "+ie[0]]){B=L;break}H||(H=L)}B=B||H}if(B)return B!==ie[0]&&ie.unshift(B),k[B]}function Hw(m,w,k,O){var L,B,H,le,ie,Se={},$e=m.dataTypes.slice();if($e[1])for(H in m.converters)Se[H.toLowerCase()]=m.converters[H];for(B=$e.shift();B;)if(m.responseFields[B]&&(k[m.responseFields[B]]=w),!ie&&O&&m.dataFilter&&(w=m.dataFilter(w,m.dataType)),ie=B,B=$e.shift(),B){if(B==="*")B=ie;else if(ie!=="*"&&ie!==B){if(H=Se[ie+" "+B]||Se["* "+B],!H){for(L in Se)if(le=L.split(" "),le[1]===B&&(H=Se[ie+" "+le[0]]||Se["* "+le[0]],H)){H===!0?H=Se[L]:Se[L]!==!0&&(B=le[0],$e.unshift(le[1]));break}}if(H!==!0)if(H&&m.throws)w=H(w);else try{w=H(w)}catch(qe){return{state:"parsererror",error:H?qe:"No conversion from "+ie+" to "+B}}}}return{state:"success",data:w}}g.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:du.href,type:"GET",isLocal:Bw.test(du.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":yv,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":g.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(m,w){return w?jn(jn(m,g.ajaxSettings),w):jn(g.ajaxSettings,m)},ajaxPrefilter:bv(vv),ajaxTransport:bv(cp),ajax:function(m,w){typeof m=="object"&&(w=m,m=void 0),w=w||{};var k,O,L,B,H,le,ie,Se,$e,qe,Ce=g.ajaxSetup({},w),Re=Ce.context||Ce,At=Ce.context&&(Re.nodeType||Re.jquery)?g(Re):g.event,Ht=g.Deferred(),dt=g.Callbacks("once memory"),yr=Ce.statusCode||{},br={},an={},hn="canceled",jt={readyState:0,getResponseHeader:function(dn){var fr;if(ie){if(!B)for(B={};fr=Vw.exec(L);)B[fr[1].toLowerCase()+" "]=(B[fr[1].toLowerCase()+" "]||[]).concat(fr[2]);fr=B[dn.toLowerCase()+" "]}return fr==null?null:fr.join(", ")},getAllResponseHeaders:function(){return ie?L:null},setRequestHeader:function(dn,fr){return ie==null&&(dn=an[dn.toLowerCase()]=an[dn.toLowerCase()]||dn,br[dn]=fr),this},overrideMimeType:function(dn){return ie==null&&(Ce.mimeType=dn),this},statusCode:function(dn){var fr;if(dn)if(ie)jt.always(dn[jt.status]);else for(fr in dn)yr[fr]=[yr[fr],dn[fr]];return this},abort:function(dn){var fr=dn||hn;return k&&k.abort(fr),$i(0,fr),this}};if(Ht.promise(jt),Ce.url=((m||Ce.url||du.href)+"").replace(up,du.protocol+"//"),Ce.type=w.method||w.type||Ce.method||Ce.type,Ce.dataTypes=(Ce.dataType||"*").toLowerCase().match(re)||[""],Ce.crossDomain==null){le=S.createElement("a");try{le.href=Ce.url,le.href=le.href,Ce.crossDomain=fp.protocol+"//"+fp.host!=le.protocol+"//"+le.host}catch{Ce.crossDomain=!0}}if(Ce.data&&Ce.processData&&typeof Ce.data!="string"&&(Ce.data=g.param(Ce.data,Ce.traditional)),Kn(vv,Ce,w,jt),ie)return jt;Se=g.event&&Ce.global,Se&&g.active++===0&&g.event.trigger("ajaxStart"),Ce.type=Ce.type.toUpperCase(),Ce.hasContent=!jw.test(Ce.type),O=Ce.url.replace(mv,""),Ce.hasContent?Ce.data&&Ce.processData&&(Ce.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(Ce.data=Ce.data.replace(Dw,"+")):(qe=Ce.url.slice(O.length),Ce.data&&(Ce.processData||typeof Ce.data=="string")&&(O+=(lh.test(O)?"&":"?")+Ce.data,delete Ce.data),Ce.cache===!1&&(O=O.replace(Fw,"$1"),qe=(lh.test(O)?"&":"?")+"_="+dv.guid+++qe),Ce.url=O+qe),Ce.ifModified&&(g.lastModified[O]&&jt.setRequestHeader("If-Modified-Since",g.lastModified[O]),g.etag[O]&&jt.setRequestHeader("If-None-Match",g.etag[O])),(Ce.data&&Ce.hasContent&&Ce.contentType!==!1||w.contentType)&&jt.setRequestHeader("Content-Type",Ce.contentType),jt.setRequestHeader("Accept",Ce.dataTypes[0]&&Ce.accepts[Ce.dataTypes[0]]?Ce.accepts[Ce.dataTypes[0]]+(Ce.dataTypes[0]!=="*"?", "+yv+"; q=0.01":""):Ce.accepts["*"]);for($e in Ce.headers)jt.setRequestHeader($e,Ce.headers[$e]);if(Ce.beforeSend&&(Ce.beforeSend.call(Re,jt,Ce)===!1||ie))return jt.abort();if(hn="abort",dt.add(Ce.complete),jt.done(Ce.success),jt.fail(Ce.error),k=Kn(cp,Ce,w,jt),!k)$i(-1,"No Transport");else{if(jt.readyState=1,Se&&At.trigger("ajaxSend",[jt,Ce]),ie)return jt;Ce.async&&Ce.timeout>0&&(H=e.setTimeout(function(){jt.abort("timeout")},Ce.timeout));try{ie=!1,k.send(br,$i)}catch(dn){if(ie)throw dn;$i(-1,dn)}}function $i(dn,fr,Cc,uh){var Ri,Eo,xs,Li,ea,Qi=fr;ie||(ie=!0,H&&e.clearTimeout(H),k=void 0,L=uh||"",jt.readyState=dn>0?4:0,Ri=dn>=200&&dn<300||dn===304,Cc&&(Li=zw(Ce,jt,Cc)),!Ri&&g.inArray("script",Ce.dataTypes)>-1&&g.inArray("json",Ce.dataTypes)<0&&(Ce.converters["text script"]=function(){}),Li=Hw(Ce,Li,jt,Ri),Ri?(Ce.ifModified&&(ea=jt.getResponseHeader("Last-Modified"),ea&&(g.lastModified[O]=ea),ea=jt.getResponseHeader("etag"),ea&&(g.etag[O]=ea)),dn===204||Ce.type==="HEAD"?Qi="nocontent":dn===304?Qi="notmodified":(Qi=Li.state,Eo=Li.data,xs=Li.error,Ri=!xs)):(xs=Qi,(dn||!Qi)&&(Qi="error",dn<0&&(dn=0))),jt.status=dn,jt.statusText=(fr||Qi)+"",Ri?Ht.resolveWith(Re,[Eo,Qi,jt]):Ht.rejectWith(Re,[jt,Qi,xs]),jt.statusCode(yr),yr=void 0,Se&&At.trigger(Ri?"ajaxSuccess":"ajaxError",[jt,Ce,Ri?Eo:xs]),dt.fireWith(Re,[jt,Qi]),Se&&(At.trigger("ajaxComplete",[jt,Ce]),--g.active||g.event.trigger("ajaxStop")))}return jt},getJSON:function(m,w,k){return g.get(m,w,k,"json")},getScript:function(m,w){return g.get(m,void 0,w,"script")}}),g.each(["get","post"],function(m,w){g[w]=function(k,O,L,B){return E(O)&&(B=B||L,L=O,O=void 0),g.ajax(g.extend({url:k,type:w,dataType:B,data:O,success:L},g.isPlainObject(k)&&k))}}),g.ajaxPrefilter(function(m){var w;for(w in m.headers)w.toLowerCase()==="content-type"&&(m.contentType=m.headers[w]||"")}),g._evalUrl=function(m,w,k){return g.ajax({url:m,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(O){g.globalEval(O,w,k)}})},g.fn.extend({wrapAll:function(m){var w;return this[0]&&(E(m)&&(m=m.call(this[0])),w=g(m,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&w.insertBefore(this[0]),w.map(function(){for(var k=this;k.firstElementChild;)k=k.firstElementChild;return k}).append(this)),this},wrapInner:function(m){return E(m)?this.each(function(w){g(this).wrapInner(m.call(this,w))}):this.each(function(){var w=g(this),k=w.contents();k.length?k.wrapAll(m):w.append(m)})},wrap:function(m){var w=E(m);return this.each(function(k){g(this).wrapAll(w?m.call(this,k):m)})},unwrap:function(m){return this.parent(m).not("body").each(function(){g(this).replaceWith(this.childNodes)}),this}}),g.expr.pseudos.hidden=function(m){return!g.expr.pseudos.visible(m)},g.expr.pseudos.visible=function(m){return!!(m.offsetWidth||m.offsetHeight||m.getClientRects().length)},g.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch{}};var Uw={0:200,1223:204},kc=g.ajaxSettings.xhr();b.cors=!!kc&&"withCredentials"in kc,b.ajax=kc=!!kc,g.ajaxTransport(function(m){var w,k;if(b.cors||kc&&!m.crossDomain)return{send:function(O,L){var B,H=m.xhr();if(H.open(m.type,m.url,m.async,m.username,m.password),m.xhrFields)for(B in m.xhrFields)H[B]=m.xhrFields[B];m.mimeType&&H.overrideMimeType&&H.overrideMimeType(m.mimeType),!m.crossDomain&&!O["X-Requested-With"]&&(O["X-Requested-With"]="XMLHttpRequest");for(B in O)H.setRequestHeader(B,O[B]);w=function(le){return function(){w&&(w=k=H.onload=H.onerror=H.onabort=H.ontimeout=H.onreadystatechange=null,le==="abort"?H.abort():le==="error"?typeof H.status!="number"?L(0,"error"):L(H.status,H.statusText):L(Uw[H.status]||H.status,H.statusText,(H.responseType||"text")!=="text"||typeof H.responseText!="string"?{binary:H.response}:{text:H.responseText},H.getAllResponseHeaders()))}},H.onload=w(),k=H.onerror=H.ontimeout=w("error"),H.onabort!==void 0?H.onabort=k:H.onreadystatechange=function(){H.readyState===4&&e.setTimeout(function(){w&&k()})},w=w("abort");try{H.send(m.hasContent&&m.data||null)}catch(le){if(w)throw le}},abort:function(){w&&w()}}}),g.ajaxPrefilter(function(m){m.crossDomain&&(m.contents.script=!1)}),g.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(m){return g.globalEval(m),m}}}),g.ajaxPrefilter("script",function(m){m.cache===void 0&&(m.cache=!1),m.crossDomain&&(m.type="GET")}),g.ajaxTransport("script",function(m){if(m.crossDomain||m.scriptAttrs){var w,k;return{send:function(O,L){w=g("<script>").attr(m.scriptAttrs||{}).prop({charset:m.scriptCharset,src:m.url}).on("load error",k=function(B){w.remove(),k=null,B&&L(B.type==="error"?404:200,B.type)}),S.head.appendChild(w[0])},abort:function(){k&&k()}}}});var wv=[],hp=/(=)\?(?=&|$)|\?\?/;g.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var m=wv.pop()||g.expando+"_"+dv.guid++;return this[m]=!0,m}}),g.ajaxPrefilter("json jsonp",function(m,w,k){var O,L,B,H=m.jsonp!==!1&&(hp.test(m.url)?"url":typeof m.data=="string"&&(m.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&hp.test(m.data)&&"data");if(H||m.dataTypes[0]==="jsonp")return O=m.jsonpCallback=E(m.jsonpCallback)?m.jsonpCallback():m.jsonpCallback,H?m[H]=m[H].replace(hp,"$1"+O):m.jsonp!==!1&&(m.url+=(lh.test(m.url)?"&":"?")+m.jsonp+"="+O),m.converters["script json"]=function(){return B||g.error(O+" was not called"),B[0]},m.dataTypes[0]="json",L=e[O],e[O]=function(){B=arguments},k.always(function(){L===void 0?g(e).removeProp(O):e[O]=L,m[O]&&(m.jsonpCallback=w.jsonpCallback,wv.push(O)),B&&E(L)&&L(B[0]),B=L=void 0}),"script"}),b.createHTMLDocument=function(){var m=S.implementation.createHTMLDocument("").body;return m.innerHTML="<form></form><form></form>",m.childNodes.length===2}(),g.parseHTML=function(m,w,k){if(typeof m!="string")return[];typeof w=="boolean"&&(k=w,w=!1);var O,L,B;return w||(b.createHTMLDocument?(w=S.implementation.createHTMLDocument(""),O=w.createElement("base"),O.href=S.location.href,w.head.appendChild(O)):w=S),L=G.exec(m),B=!k&&[],L?[w.createElement(L[1])]:(L=dl([m],w,B),B&&B.length&&g(B).remove(),g.merge([],L.childNodes))},g.fn.load=function(m,w,k){var O,L,B,H=this,le=m.indexOf(" ");return le>-1&&(O=ml(m.slice(le)),m=m.slice(0,le)),E(w)?(k=w,w=void 0):w&&typeof w=="object"&&(L="POST"),H.length>0&&g.ajax({url:m,type:L||"GET",dataType:"html",data:w}).done(function(ie){B=arguments,H.html(O?g("<div>").append(g.parseHTML(ie)).find(O):ie)}).always(k&&function(ie,Se){H.each(function(){k.apply(this,B||[ie.responseText,Se,ie])})}),this},g.expr.pseudos.animated=function(m){return g.grep(g.timers,function(w){return m===w.elem}).length},g.offset={setOffset:function(m,w,k){var O,L,B,H,le,ie,Se,$e=g.css(m,"position"),qe=g(m),Ce={};$e==="static"&&(m.style.position="relative"),le=qe.offset(),B=g.css(m,"top"),ie=g.css(m,"left"),Se=($e==="absolute"||$e==="fixed")&&(B+ie).indexOf("auto")>-1,Se?(O=qe.position(),H=O.top,L=O.left):(H=parseFloat(B)||0,L=parseFloat(ie)||0),E(w)&&(w=w.call(m,k,g.extend({},le))),w.top!=null&&(Ce.top=w.top-le.top+H),w.left!=null&&(Ce.left=w.left-le.left+L),"using"in w?w.using.call(m,Ce):qe.css(Ce)}},g.fn.extend({offset:function(m){if(arguments.length)return m===void 0?this:this.each(function(L){g.offset.setOffset(this,m,L)});var w,k,O=this[0];if(O)return O.getClientRects().length?(w=O.getBoundingClientRect(),k=O.ownerDocument.defaultView,{top:w.top+k.pageYOffset,left:w.left+k.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var m,w,k,O=this[0],L={top:0,left:0};if(g.css(O,"position")==="fixed")w=O.getBoundingClientRect();else{for(w=this.offset(),k=O.ownerDocument,m=O.offsetParent||k.documentElement;m&&(m===k.body||m===k.documentElement)&&g.css(m,"position")==="static";)m=m.parentNode;m&&m!==O&&m.nodeType===1&&(L=g(m).offset(),L.top+=g.css(m,"borderTopWidth",!0),L.left+=g.css(m,"borderLeftWidth",!0))}return{top:w.top-L.top-g.css(O,"marginTop",!0),left:w.left-L.left-g.css(O,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var m=this.offsetParent;m&&g.css(m,"position")==="static";)m=m.offsetParent;return m||Ye})}}),g.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(m,w){var k=w==="pageYOffset";g.fn[m]=function(O){return Be(this,function(L,B,H){var le;if(P(L)?le=L:L.nodeType===9&&(le=L.defaultView),H===void 0)return le?le[w]:L[B];le?le.scrollTo(k?le.pageXOffset:H,k?H:le.pageYOffset):L[B]=H},m,O,arguments.length)}}),g.each(["top","left"],function(m,w){g.cssHooks[w]=or(b.pixelPosition,function(k,O){if(O)return O=Pn(k,w),Oe.test(O)?g(k).position()[w]+"px":O})}),g.each({Height:"height",Width:"width"},function(m,w){g.each({padding:"inner"+m,content:w,"":"outer"+m},function(k,O){g.fn[O]=function(L,B){var H=arguments.length&&(k||typeof L!="boolean"),le=k||(L===!0||B===!0?"margin":"border");return Be(this,function(ie,Se,$e){var qe;return P(ie)?O.indexOf("outer")===0?ie["inner"+m]:ie.document.documentElement["client"+m]:ie.nodeType===9?(qe=ie.documentElement,Math.max(ie.body["scroll"+m],qe["scroll"+m],ie.body["offset"+m],qe["offset"+m],qe["client"+m])):$e===void 0?g.css(ie,Se,le):g.style(ie,Se,$e,le)},w,H?L:void 0,H)}})}),g.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(m,w){g.fn[w]=function(k){return this.on(w,k)}}),g.fn.extend({bind:function(m,w,k){return this.on(m,null,w,k)},unbind:function(m,w){return this.off(m,null,w)},delegate:function(m,w,k,O){return this.on(w,m,k,O)},undelegate:function(m,w,k){return arguments.length===1?this.off(m,"**"):this.off(w,m||"**",k)},hover:function(m,w){return this.mouseenter(m).mouseleave(w||m)}}),g.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(m,w){g.fn[w]=function(k,O){return arguments.length>0?this.on(w,null,k,O):this.trigger(w)}});var xv=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;g.proxy=function(m,w){var k,O,L;if(typeof w=="string"&&(k=m[w],w=m,m=k),!!E(m))return O=s.call(arguments,2),L=function(){return m.apply(w||this,O.concat(s.call(arguments)))},L.guid=m.guid=m.guid||g.guid++,L},g.holdReady=function(m){m?g.readyWait++:g.ready(!0)},g.isArray=Array.isArray,g.parseJSON=JSON.parse,g.nodeName=W,g.isFunction=E,g.isWindow=P,g.camelCase=K,g.type=N,g.now=Date.now,g.isNumeric=function(m){var w=g.type(m);return(w==="number"||w==="string")&&!isNaN(m-parseFloat(m))},g.trim=function(m){return m==null?"":(m+"").replace(xv,"$1")};var qw=e.jQuery,ti=e.$;return g.noConflict=function(m){return e.$===g&&(e.$=ti),m&&e.jQuery===g&&(e.jQuery=qw),g},typeof n>"u"&&(e.jQuery=e.$=g),g})}(HS)),HS.exports}(function(t){(function(e){var n=typeof self=="object"&&self.self===self&&self||typeof si=="object"&&si.global===si&&si;{var r=ace,i;try{i=Z5()}catch{}e(n,t,r,i)}})(function(e,n,r,i){var s=e.Backbone,o=Array.prototype.slice;n.VERSION="1.4.1",n.$=i,n.noConflict=function(){return e.Backbone=s,this},n.emulateHTTP=!1,n.emulateJSON=!1;var a=n.Events={},l=/\s+/,u,c=function(C,$,V,Q,ce){var ue=0,ke;if(V&&typeof V=="object")for(Q!==void 0&&("context"in ce)&&ce.context===void 0&&(ce.context=Q),ke=r.keys(V);ue<ke.length;ue++)$=c(C,$,ke[ue],V[ke[ue]],ce);else if(V&&l.test(V))for(ke=V.split(l);ue<ke.length;ue++)$=C($,ke[ue],Q,ce);else $=C($,V,Q,ce);return $};a.on=function(C,$,V){if(this._events=c(f,this._events||{},C,$,{context:V,ctx:this,listening:u}),u){var Q=this._listeners||(this._listeners={});Q[u.id]=u,u.interop=!1}return this},a.listenTo=function(C,$,V){if(!C)return this;var Q=C._listenId||(C._listenId=r.uniqueId("l")),ce=this._listeningTo||(this._listeningTo={}),ue=u=ce[Q];ue||(this._listenId||(this._listenId=r.uniqueId("l")),ue=u=ce[Q]=new S(this,C));var ke=p(C,$,V,this);if(u=void 0,ke)throw ke;return ue.interop&&ue.on($,V),this};var f=function(C,$,V,Q){if(V){var ce=C[$]||(C[$]=[]),ue=Q.context,ke=Q.ctx,Ae=Q.listening;Ae&&Ae.count++,ce.push({callback:V,context:ue,ctx:ue||ke,listening:Ae})}return C},p=function(C,$,V,Q){try{C.on($,V,Q)}catch(ce){return ce}};a.off=function(C,$,V){return this._events?(this._events=c(v,this._events,C,$,{context:V,listeners:this._listeners}),this):this},a.stopListening=function(C,$,V){var Q=this._listeningTo;if(!Q)return this;for(var ce=C?[C._listenId]:r.keys(Q),ue=0;ue<ce.length;ue++){var ke=Q[ce[ue]];if(!ke)break;ke.obj.off($,V,this),ke.interop&&ke.off($,V)}return r.isEmpty(Q)&&(this._listeningTo=void 0),this};var v=function(C,$,V,Q){if(C){var ce=Q.context,ue=Q.listeners,ke=0,Ae;if(!$&&!ce&&!V){for(Ae=r.keys(ue);ke<Ae.length;ke++)ue[Ae[ke]].cleanup();return}for(Ae=$?[$]:r.keys(C);ke<Ae.length;ke++){$=Ae[ke];var tt=C[$];if(!tt)break;for(var Je=[],Xe=0;Xe<tt.length;Xe++){var Ye=tt[Xe];if(V&&V!==Ye.callback&&V!==Ye.callback._callback||ce&&ce!==Ye.context)Je.push(Ye);else{var ft=Ye.listening;ft&&ft.off($,V)}}Je.length?C[$]=Je:delete C[$]}return C}};a.once=function(C,$,V){var Q=c(b,{},C,$,this.off.bind(this));return typeof C=="string"&&V==null&&($=void 0),this.on(Q,$,V)},a.listenToOnce=function(C,$,V){var Q=c(b,{},$,V,this.stopListening.bind(this,C));return this.listenTo(C,Q)};var b=function(C,$,V,Q){if(V){var ce=C[$]=r.once(function(){Q($,ce),V.apply(this,arguments)});ce._callback=V}return C};a.trigger=function(C){if(!this._events)return this;for(var $=Math.max(0,arguments.length-1),V=Array($),Q=0;Q<$;Q++)V[Q]=arguments[Q+1];return c(E,this._events,C,void 0,V),this};var E=function(C,$,V,Q){if(C){var ce=C[$],ue=C.all;ce&&ue&&(ue=ue.slice()),ce&&P(ce,Q),ue&&P(ue,[$].concat(Q))}return C},P=function(C,$){var V,Q=-1,ce=C.length,ue=$[0],ke=$[1],Ae=$[2];switch($.length){case 0:for(;++Q<ce;)(V=C[Q]).callback.call(V.ctx);return;case 1:for(;++Q<ce;)(V=C[Q]).callback.call(V.ctx,ue);return;case 2:for(;++Q<ce;)(V=C[Q]).callback.call(V.ctx,ue,ke);return;case 3:for(;++Q<ce;)(V=C[Q]).callback.call(V.ctx,ue,ke,Ae);return;default:for(;++Q<ce;)(V=C[Q]).callback.apply(V.ctx,$);return}},S=function(C,$){this.id=C._listenId,this.listener=C,this.obj=$,this.interop=!0,this.count=0,this._events=void 0};S.prototype.on=a.on,S.prototype.off=function(C,$){var V;this.interop?(this._events=c(v,this._events,C,$,{context:void 0,listeners:void 0}),V=!this._events):(this.count--,V=this.count===0),V&&this.cleanup()},S.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},a.bind=a.on,a.unbind=a.off,r.extend(n,a);var A=n.Model=function(C,$){var V=C||{};$||($={}),this.preinitialize.apply(this,arguments),this.cid=r.uniqueId(this.cidPrefix),this.attributes={},$.collection&&(this.collection=$.collection),$.parse&&(V=this.parse(V,$)||{});var Q=r.result(this,"defaults");V=r.defaults(r.extend({},Q,V),Q),this.set(V,$),this.changed={},this.initialize.apply(this,arguments)};r.extend(A.prototype,a,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(C){return r.clone(this.attributes)},sync:function(){return n.sync.apply(this,arguments)},get:function(C){return this.attributes[C]},escape:function(C){return r.escape(this.get(C))},has:function(C){return this.get(C)!=null},matches:function(C){return!!r.iteratee(C,this)(this.attributes)},set:function(C,$,V){if(C==null)return this;var Q;if(typeof C=="object"?(Q=C,V=$):(Q={})[C]=$,V||(V={}),!this._validate(Q,V))return!1;var ce=V.unset,ue=V.silent,ke=[],Ae=this._changing;this._changing=!0,Ae||(this._previousAttributes=r.clone(this.attributes),this.changed={});var tt=this.attributes,Je=this.changed,Xe=this._previousAttributes;for(var Ye in Q)$=Q[Ye],r.isEqual(tt[Ye],$)||ke.push(Ye),r.isEqual(Xe[Ye],$)?delete Je[Ye]:Je[Ye]=$,ce?delete tt[Ye]:tt[Ye]=$;if(this.idAttribute in Q){var ft=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,ft,V)}if(!ue){ke.length&&(this._pending=V);for(var Nt=0;Nt<ke.length;Nt++)this.trigger("change:"+ke[Nt],this,tt[ke[Nt]],V)}if(Ae)return this;if(!ue)for(;this._pending;)V=this._pending,this._pending=!1,this.trigger("change",this,V);return this._pending=!1,this._changing=!1,this},unset:function(C,$){return this.set(C,void 0,r.extend({},$,{unset:!0}))},clear:function(C){var $={};for(var V in this.attributes)$[V]=void 0;return this.set($,r.extend({},C,{unset:!0}))},hasChanged:function(C){return C==null?!r.isEmpty(this.changed):r.has(this.changed,C)},changedAttributes:function(C){if(!C)return this.hasChanged()?r.clone(this.changed):!1;var $=this._changing?this._previousAttributes:this.attributes,V={},Q;for(var ce in C){var ue=C[ce];r.isEqual($[ce],ue)||(V[ce]=ue,Q=!0)}return Q?V:!1},previous:function(C){return C==null||!this._previousAttributes?null:this._previousAttributes[C]},previousAttributes:function(){return r.clone(this._previousAttributes)},fetch:function(C){C=r.extend({parse:!0},C);var $=this,V=C.success;return C.success=function(Q){var ce=C.parse?$.parse(Q,C):Q;if(!$.set(ce,C))return!1;V&&V.call(C.context,$,Q,C),$.trigger("sync",$,Q,C)},K(this,C),this.sync("read",this,C)},save:function(C,$,V){var Q;C==null||typeof C=="object"?(Q=C,V=$):(Q={})[C]=$,V=r.extend({validate:!0,parse:!0},V);var ce=V.wait;if(Q&&!ce){if(!this.set(Q,V))return!1}else if(!this._validate(Q,V))return!1;var ue=this,ke=V.success,Ae=this.attributes;V.success=function(Xe){ue.attributes=Ae;var Ye=V.parse?ue.parse(Xe,V):Xe;if(ce&&(Ye=r.extend({},Q,Ye)),Ye&&!ue.set(Ye,V))return!1;ke&&ke.call(V.context,ue,Xe,V),ue.trigger("sync",ue,Xe,V)},K(this,V),Q&&ce&&(this.attributes=r.extend({},Ae,Q));var tt=this.isNew()?"create":V.patch?"patch":"update";tt==="patch"&&!V.attrs&&(V.attrs=Q);var Je=this.sync(tt,this,V);return this.attributes=Ae,Je},destroy:function(C){C=C?r.clone(C):{};var $=this,V=C.success,Q=C.wait,ce=function(){$.stopListening(),$.trigger("destroy",$,$.collection,C)};C.success=function(ke){Q&&ce(),V&&V.call(C.context,$,ke,C),$.isNew()||$.trigger("sync",$,ke,C)};var ue=!1;return this.isNew()?r.defer(C.success):(K(this,C),ue=this.sync("delete",this,C)),Q||ce(),ue},url:function(){var C=r.result(this,"urlRoot")||r.result(this.collection,"url")||z();if(this.isNew())return C;var $=this.get(this.idAttribute);return C.replace(/[^\/]$/,"$&/")+encodeURIComponent($)},parse:function(C,$){return C},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(C){return this._validate({},r.extend({},C,{validate:!0}))},_validate:function(C,$){if(!$.validate||!this.validate)return!0;C=r.extend({},this.attributes,C);var V=this.validationError=this.validate(C,$)||null;return V?(this.trigger("invalid",this,V,r.extend($,{validationError:V})),!1):!0}});var I=n.Collection=function(C,$){$||($={}),this.preinitialize.apply(this,arguments),$.model&&(this.model=$.model),$.comparator!==void 0&&(this.comparator=$.comparator),this._reset(),this.initialize.apply(this,arguments),C&&this.reset(C,r.extend({silent:!0},$))},N={add:!0,remove:!0,merge:!0},x={add:!0,remove:!1},g=function(C,$,V){V=Math.min(Math.max(V,0),C.length);var Q=Array(C.length-V),ce=$.length,ue;for(ue=0;ue<Q.length;ue++)Q[ue]=C[ue+V];for(ue=0;ue<ce;ue++)C[ue+V]=$[ue];for(ue=0;ue<Q.length;ue++)C[ue+ce+V]=Q[ue]};r.extend(I.prototype,a,{model:A,preinitialize:function(){},initialize:function(){},toJSON:function(C){return this.map(function($){return $.toJSON(C)})},sync:function(){return n.sync.apply(this,arguments)},add:function(C,$){return this.set(C,r.extend({merge:!1},$,x))},remove:function(C,$){$=r.extend({},$);var V=!r.isArray(C);C=V?[C]:C.slice();var Q=this._removeModels(C,$);return!$.silent&&Q.length&&($.changes={added:[],merged:[],removed:Q},this.trigger("update",this,$)),V?Q[0]:Q},set:function(C,$){if(C!=null){$=r.extend({},N,$),$.parse&&!this._isModel(C)&&(C=this.parse(C,$)||[]);var V=!r.isArray(C);C=V?[C]:C.slice();var Q=$.at;Q!=null&&(Q=+Q),Q>this.length&&(Q=this.length),Q<0&&(Q+=this.length+1);var ce=[],ue=[],ke=[],Ae=[],tt={},Je=$.add,Xe=$.merge,Ye=$.remove,ft=!1,Nt=this.comparator&&Q==null&&$.sort!==!1,Vt=r.isString(this.comparator)?this.comparator:null,yt,Gt;for(Gt=0;Gt<C.length;Gt++){yt=C[Gt];var qn=this.get(yt);if(qn){if(Xe&&yt!==qn){var Or=this._isModel(yt)?yt.attributes:yt;$.parse&&(Or=qn.parse(Or,$)),qn.set(Or,$),ke.push(qn),Nt&&!ft&&(ft=qn.hasChanged(Vt))}tt[qn.cid]||(tt[qn.cid]=!0,ce.push(qn)),C[Gt]=qn}else Je&&(yt=C[Gt]=this._prepareModel(yt,$),yt&&(ue.push(yt),this._addReference(yt,$),tt[yt.cid]=!0,ce.push(yt)))}if(Ye){for(Gt=0;Gt<this.length;Gt++)yt=this.models[Gt],tt[yt.cid]||Ae.push(yt);Ae.length&&this._removeModels(Ae,$)}var ir=!1,yi=!Nt&&Je&&Ye;if(ce.length&&yi?(ir=this.length!==ce.length||r.some(this.models,function(Qn,Sn){return Qn!==ce[Sn]}),this.models.length=0,g(this.models,ce,0),this.length=this.models.length):ue.length&&(Nt&&(ft=!0),g(this.models,ue,Q??this.length),this.length=this.models.length),ft&&this.sort({silent:!0}),!$.silent){for(Gt=0;Gt<ue.length;Gt++)Q!=null&&($.index=Q+Gt),yt=ue[Gt],yt.trigger("add",yt,this,$);(ft||ir)&&this.trigger("sort",this,$),(ue.length||Ae.length||ke.length)&&($.changes={added:ue,removed:Ae,merged:ke},this.trigger("update",this,$))}return V?C[0]:C}},reset:function(C,$){$=$?r.clone($):{};for(var V=0;V<this.models.length;V++)this._removeReference(this.models[V],$);return $.previousModels=this.models,this._reset(),C=this.add(C,r.extend({silent:!0},$)),$.silent||this.trigger("reset",this,$),C},push:function(C,$){return this.add(C,r.extend({at:this.length},$))},pop:function(C){var $=this.at(this.length-1);return this.remove($,C)},unshift:function(C,$){return this.add(C,r.extend({at:0},$))},shift:function(C){var $=this.at(0);return this.remove($,C)},slice:function(){return o.apply(this.models,arguments)},get:function(C){if(C!=null)return this._byId[C]||this._byId[this.modelId(this._isModel(C)?C.attributes:C,C.idAttribute)]||C.cid&&this._byId[C.cid]},has:function(C){return this.get(C)!=null},at:function(C){return C<0&&(C+=this.length),this.models[C]},where:function(C,$){return this[$?"find":"filter"](C)},findWhere:function(C){return this.where(C,!0)},sort:function(C){var $=this.comparator;if(!$)throw new Error("Cannot sort a set without a comparator");C||(C={});var V=$.length;return r.isFunction($)&&($=$.bind(this)),V===1||r.isString($)?this.models=this.sortBy($):this.models.sort($),C.silent||this.trigger("sort",this,C),this},pluck:function(C){return this.map(C+"")},fetch:function(C){C=r.extend({parse:!0},C);var $=C.success,V=this;return C.success=function(Q){var ce=C.reset?"reset":"set";V[ce](Q,C),$&&$.call(C.context,V,Q,C),V.trigger("sync",V,Q,C)},K(this,C),this.sync("read",this,C)},create:function(C,$){$=$?r.clone($):{};var V=$.wait;if(C=this._prepareModel(C,$),!C)return!1;V||this.add(C,$);var Q=this,ce=$.success;return $.success=function(ue,ke,Ae){V&&Q.add(ue,Ae),ce&&ce.call(Ae.context,ue,ke,Ae)},C.save(null,$),C},parse:function(C,$){return C},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(C,$){return C[$||this.model.prototype.idAttribute||"id"]},values:function(){return new M(this,D)},keys:function(){return new M(this,q)},entries:function(){return new M(this,R)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(C,$){if(this._isModel(C))return C.collection||(C.collection=this),C;$=$?r.clone($):{},$.collection=this;var V;return this.model.prototype?V=new this.model(C,$):V=this.model(C,$),V.validationError?(this.trigger("invalid",this,V.validationError,$),!1):V},_removeModels:function(C,$){for(var V=[],Q=0;Q<C.length;Q++){var ce=this.get(C[Q]);if(ce){var ue=this.indexOf(ce);this.models.splice(ue,1),this.length--,delete this._byId[ce.cid];var ke=this.modelId(ce.attributes,ce.idAttribute);ke!=null&&delete this._byId[ke],$.silent||($.index=ue,ce.trigger("remove",ce,this,$)),V.push(ce),this._removeReference(ce,$)}}return V},_isModel:function(C){return C instanceof A},_addReference:function(C,$){this._byId[C.cid]=C;var V=this.modelId(C.attributes,C.idAttribute);V!=null&&(this._byId[V]=C),C.on("all",this._onModelEvent,this)},_removeReference:function(C,$){delete this._byId[C.cid];var V=this.modelId(C.attributes,C.idAttribute);V!=null&&delete this._byId[V],this===C.collection&&delete C.collection,C.off("all",this._onModelEvent,this)},_onModelEvent:function(C,$,V,Q){if($){if((C==="add"||C==="remove")&&V!==this)return;if(C==="destroy"&&this.remove($,Q),C==="changeId"){var ce=this.modelId($.previousAttributes(),$.idAttribute),ue=this.modelId($.attributes,$.idAttribute);ce!=null&&delete this._byId[ce],ue!=null&&(this._byId[ue]=$)}}this.trigger.apply(this,arguments)}});var _=typeof Symbol=="function"&&Symbol.iterator;_&&(I.prototype[_]=I.prototype.values);var M=function(C,$){this._collection=C,this._kind=$,this._index=0},D=1,q=2,R=3;_&&(M.prototype[_]=function(){return this}),M.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var C=this._collection.at(this._index);this._index++;var $;if(this._kind===D)$=C;else{var V=this._collection.modelId(C.attributes,C.idAttribute);this._kind===q?$=V:$=[V,C]}return{value:$,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var W=n.View=function(C){this.cid=r.uniqueId("view"),this.preinitialize.apply(this,arguments),r.extend(this,r.pick(C,Z)),this._ensureElement(),this.initialize.apply(this,arguments)},G=/^(\S+)\s*(.*)$/,Z=["model","collection","el","id","attributes","className","tagName","events"];r.extend(W.prototype,a,{tagName:"div",$:function(C){return this.$el.find(C)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(C){return this.undelegateEvents(),this._setElement(C),this.delegateEvents(),this},_setElement:function(C){this.$el=C instanceof n.$?C:n.$(C),this.el=this.$el[0]},delegateEvents:function(C){if(C||(C=r.result(this,"events")),!C)return this;this.undelegateEvents();for(var $ in C){var V=C[$];if(r.isFunction(V)||(V=this[V]),!!V){var Q=$.match(G);this.delegate(Q[1],Q[2],V.bind(this))}}return this},delegate:function(C,$,V){return this.$el.on(C+".delegateEvents"+this.cid,$,V),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(C,$,V){return this.$el.off(C+".delegateEvents"+this.cid,$,V),this},_createElement:function(C){return document.createElement(C)},_ensureElement:function(){if(this.el)this.setElement(r.result(this,"el"));else{var C=r.extend({},r.result(this,"attributes"));this.id&&(C.id=r.result(this,"id")),this.className&&(C.class=r.result(this,"className")),this.setElement(this._createElement(r.result(this,"tagName"))),this._setAttributes(C)}},_setAttributes:function(C){this.$el.attr(C)}});var de=function(C,$,V,Q){switch($){case 1:return function(){return C[V](this[Q])};case 2:return function(ce){return C[V](this[Q],ce)};case 3:return function(ce,ue){return C[V](this[Q],_e(ce,this),ue)};case 4:return function(ce,ue,ke){return C[V](this[Q],_e(ce,this),ue,ke)};default:return function(){var ce=o.call(arguments);return ce.unshift(this[Q]),C[V].apply(C,ce)}}},be=function(C,$,V,Q){r.each(V,function(ce,ue){$[ue]&&(C.prototype[ue]=de($,ce,ue,Q))})},_e=function(C,$){return r.isFunction(C)?C:r.isObject(C)&&!$._isModel(C)?Te(C):r.isString(C)?function(V){return V.get(C)}:C},Te=function(C){var $=r.matches(C);return function(V){return $(V.attributes)}},Le={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},Ee={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};r.each([[I,Le,"models"],[A,Ee,"attributes"]],function(C){var $=C[0],V=C[1],Q=C[2];$.mixin=function(ce){var ue=r.reduce(r.functions(ce),function(ke,Ae){return ke[Ae]=0,ke},{});be($,ce,ue,Q)},be($,r,V,Q)}),n.sync=function(C,$,V){var Q=re[C];r.defaults(V||(V={}),{emulateHTTP:n.emulateHTTP,emulateJSON:n.emulateJSON});var ce={type:Q,dataType:"json"};if(V.url||(ce.url=r.result($,"url")||z()),V.data==null&&$&&(C==="create"||C==="update"||C==="patch")&&(ce.contentType="application/json",ce.data=JSON.stringify(V.attrs||$.toJSON(V))),V.emulateJSON&&(ce.contentType="application/x-www-form-urlencoded",ce.data=ce.data?{model:ce.data}:{}),V.emulateHTTP&&(Q==="PUT"||Q==="DELETE"||Q==="PATCH")){ce.type="POST",V.emulateJSON&&(ce.data._method=Q);var ue=V.beforeSend;V.beforeSend=function(tt){if(tt.setRequestHeader("X-HTTP-Method-Override",Q),ue)return ue.apply(this,arguments)}}ce.type!=="GET"&&!V.emulateJSON&&(ce.processData=!1);var ke=V.error;V.error=function(tt,Je,Xe){V.textStatus=Je,V.errorThrown=Xe,ke&&ke.call(V.context,tt,Je,Xe)};var Ae=V.xhr=n.ajax(r.extend(ce,V));return $.trigger("request",$,Ae,V),Ae};var re={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};n.ajax=function(){return n.$.ajax.apply(n.$,arguments)};var ne=n.Router=function(C){C||(C={}),this.preinitialize.apply(this,arguments),C.routes&&(this.routes=C.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},ee=/\((.*?)\)/g,F=/(\(\?)?:\w+/g,U=/\*\w+/g,ye=/[\-{}\[\]+?.,\\\^$|#\s]/g;r.extend(ne.prototype,a,{preinitialize:function(){},initialize:function(){},route:function(C,$,V){r.isRegExp(C)||(C=this._routeToRegExp(C)),r.isFunction($)&&(V=$,$=""),V||(V=this[$]);var Q=this;return n.history.route(C,function(ce){var ue=Q._extractParameters(C,ce);Q.execute(V,ue,$)!==!1&&(Q.trigger.apply(Q,["route:"+$].concat(ue)),Q.trigger("route",$,ue),n.history.trigger("route",Q,$,ue))}),this},execute:function(C,$,V){C&&C.apply(this,$)},navigate:function(C,$){return n.history.navigate(C,$),this},_bindRoutes:function(){if(this.routes){this.routes=r.result(this,"routes");for(var C,$=r.keys(this.routes);(C=$.pop())!=null;)this.route(C,this.routes[C])}},_routeToRegExp:function(C){return C=C.replace(ye,"\\$&").replace(ee,"(?:$1)?").replace(F,function($,V){return V?$:"([^/?]+)"}).replace(U,"([^?]*?)"),new RegExp("^"+C+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(C,$){var V=C.exec($).slice(1);return r.map(V,function(Q,ce){return ce===V.length-1?Q||null:Q?decodeURIComponent(Q):null})}});var Fe=n.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),typeof window<"u"&&(this.location=window.location,this.history=window.history)},He=/^[#\/]|\s+$/g,Be=/^\/+|\/+$/g,Pe=/#.*$/;Fe.started=!1,r.extend(Fe.prototype,a,{interval:50,atRoot:function(){var C=this.location.pathname.replace(/[^\/]$/,"$&/");return C===this.root&&!this.getSearch()},matchRoot:function(){var C=this.decodeFragment(this.location.pathname),$=C.slice(0,this.root.length-1)+"/";return $===this.root},decodeFragment:function(C){return decodeURI(C.replace(/%25/g,"%2525"))},getSearch:function(){var C=this.location.href.replace(/#.*/,"").match(/\?.+/);return C?C[0]:""},getHash:function(C){var $=(C||this).location.href.match(/#(.*)$/);return $?$[1]:""},getPath:function(){var C=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return C.charAt(0)==="/"?C.slice(1):C},getFragment:function(C){return C==null&&(this._usePushState||!this._wantsHashChange?C=this.getPath():C=this.getHash()),C.replace(He,"")},start:function(C){if(Fe.started)throw new Error("Backbone.history has already been started");if(Fe.started=!0,this.options=r.extend({root:"/"},this.options,C),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.history&&this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(Be,"/"),this._wantsHashChange&&this._wantsPushState)if(!this._hasPushState&&!this.atRoot()){var $=this.root.slice(0,-1)||"/";return this.location.replace($+"#"+this.getPath()),!0}else this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0});if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var V=document.body,Q=V.insertBefore(this.iframe,V.firstChild).contentWindow;Q.document.open(),Q.document.close(),Q.location.hash="#"+this.fragment}var ce=window.addEventListener||function(ue,ke){return attachEvent("on"+ue,ke)};if(this._usePushState?ce("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?ce("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var C=window.removeEventListener||function($,V){return detachEvent("on"+$,V)};this._usePushState?C("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&C("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),Fe.started=!1},route:function(C,$){this.handlers.unshift({route:C,callback:$})},checkUrl:function(C){var $=this.getFragment();if($===this.fragment&&this.iframe&&($=this.getHash(this.iframe.contentWindow)),$===this.fragment)return!1;this.iframe&&this.navigate($),this.loadUrl()},loadUrl:function(C){return this.matchRoot()?(C=this.fragment=this.getFragment(C),r.some(this.handlers,function($){if($.route.test(C))return $.callback(C),!0})):!1},navigate:function(C,$){if(!Fe.started)return!1;(!$||$===!0)&&($={trigger:!!$}),C=this.getFragment(C||"");var V=this.root;(C===""||C.charAt(0)==="?")&&(V=V.slice(0,-1)||"/");var Q=V+C;C=C.replace(Pe,"");var ce=this.decodeFragment(C);if(this.fragment!==ce){if(this.fragment=ce,this._usePushState)this.history[$.replace?"replaceState":"pushState"]({},document.title,Q);else if(this._wantsHashChange){if(this._updateHash(this.location,C,$.replace),this.iframe&&C!==this.getHash(this.iframe.contentWindow)){var ue=this.iframe.contentWindow;$.replace||(ue.document.open(),ue.document.close()),this._updateHash(ue.location,C,$.replace)}}else return this.location.assign(Q);if($.trigger)return this.loadUrl(C)}},_updateHash:function(C,$,V){if(V){var Q=C.href.replace(/(javascript:|#).*$/,"");C.replace(Q+"#"+$)}else C.hash="#"+$}}),n.history=new Fe;var Ve=function(C,$){var V=this,Q;return C&&r.has(C,"constructor")?Q=C.constructor:Q=function(){return V.apply(this,arguments)},r.extend(Q,V,$),Q.prototype=r.create(V.prototype,C),Q.prototype.constructor=Q,Q.__super__=V.prototype,Q};A.extend=I.extend=ne.extend=W.extend=Fe.extend=Ve;var z=function(){throw new Error('A "url" property or function must be specified')},K=function(C,$){var V=$.error;$.error=function(Q){V&&V.call($.context,C,Q,$),C.trigger("error",C,Q,$)}};return n})})(AB);const Ui=ka(AB);var lce=Z5();const xn=ka(lce),uce=function(){var t=typeof window=="object"&&!!window.SVGAngle;if(!t)return function(){throw new Error("SVG is required to use Vectorizer.")};var e={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},n="1.1",r=Math,i=r.PI,s=r.atan2,o=r.sqrt,a=r.min,l=r.max,u=r.cos,c=r.sin,f=function(x,g,_){if(!(this instanceof f))return f.apply(Object.create(f.prototype),arguments);if(x){if(f.isV(x)&&(x=x.node),g=g||{},f.isString(x)){if(x=x.trim(),x.toLowerCase()==="svg")x=f.createSvgDocument();else if(x[0]==="<"){var M=f.createSvgDocument(x);if(M.childNodes.length>1){var D=[],q,R;for(q=0,R=M.childNodes.length;q<R;q++){var W=M.childNodes[q];D.push(new f(document.importNode(W,!0)))}return D}x=document.importNode(M.firstChild,!0)}else x=document.createElementNS(e.svg,x);f.ensureId(x)}return this.node=x,this.setAttributes(g),_&&this.append(_),this}},p=f.prototype;Object.defineProperty(p,"id",{enumerable:!0,get:function(){return this.node.id},set:function(x){this.node.id=x}}),p.getTransformToElement=function(x){var g=this.node;if(f.isSVGGraphicsElement(x)&&f.isSVGGraphicsElement(g)){var _=f.toNode(x).getScreenCTM(),M=g.getScreenCTM();if(_&&M)return _.inverse().multiply(M)}return f.createSVGMatrix()},p.transform=function(x,g){var _=this.node;if(f.isUndefined(x))return f.transformStringToMatrix(this.attr("transform"));if(g&&g.absolute)return this.attr("transform",f.matrixToTransformString(x));var M=f.createSVGTransform(x);return _.transform.baseVal.appendItem(M),this},p.translate=function(x,g,_){_=_||{},g=g||0;var M=this.attr("transform")||"",D=f.parseTransformString(M);if(M=D.value,f.isUndefined(x))return D.translate;M=M.replace(/translate\([^)]*\)/g,"").trim();var q=_.absolute?x:D.translate.tx+x,R=_.absolute?g:D.translate.ty+g,W="translate("+q+","+R+")";return this.attr("transform",(W+" "+M).trim()),this},p.rotate=function(x,g,_,M){M=M||{};var D=this.attr("transform")||"",q=f.parseTransformString(D);if(D=q.value,f.isUndefined(x))return q.rotate;D=D.replace(/rotate\([^)]*\)/g,"").trim(),x%=360;var R=M.absolute?x:q.rotate.angle+x,W=g!==void 0&&_!==void 0?","+g+","+_:"",G="rotate("+R+W+")";return this.attr("transform",(D+" "+G).trim()),this},p.scale=function(x,g){g=f.isUndefined(g)?x:g;var _=this.attr("transform")||"",M=f.parseTransformString(_);if(_=M.value,f.isUndefined(x))return M.scale;_=_.replace(/scale\([^)]*\)/g,"").trim();var D="scale("+x+","+g+")";return this.attr("transform",(_+" "+D).trim()),this},p.bbox=function(x,g){var _,M=this.node,D=M.ownerSVGElement;if(!D)return new st(0,0,0,0);try{_=M.getBBox()}catch{_={x:M.clientLeft,y:M.clientTop,width:M.clientWidth,height:M.clientHeight}}if(x)return new st(_);var q=this.getTransformToElement(g||D);return f.transformRect(_,q)},p.getBBox=function(x){var g={},_,M=this.node,D=M.ownerSVGElement;if(!D||!f.isSVGGraphicsElement(M))return new st(0,0,0,0);if(x&&(x.target&&(g.target=f.toNode(x.target)),x.recursive&&(g.recursive=x.recursive)),g.recursive){var R=this.children(),W=R.length;if(W===0)return this.getBBox({target:g.target,recursive:!1});g.target||(g.target=this);for(var G=0;G<W;G++){var Z=R[G],de;Z.children().length===0?de=Z.getBBox({target:g.target,recursive:!1}):de=Z.getBBox({target:g.target,recursive:!0}),_?_=_.union(de):_=de}return _}else{try{_=M.getBBox()}catch{_={x:M.clientLeft,y:M.clientTop,width:M.clientWidth,height:M.clientHeight}}if(g.target){var q=this.getTransformToElement(g.target);return f.transformRect(_,q)}else return new st(_)}};function v(x,g){x||(x={});var _=f("textPath"),M=x.d;if(M&&x["xlink:href"]===void 0){var D=f("path").attr("d",M).appendTo(g.defs());_.attr("xlink:href","#"+D.id)}return f.isObject(x)&&_.attr(x),_.node}function b(x,g,_){_||(_={});for(var M=_.includeAnnotationIndices,D=_.eol,q=_.lineHeight,R=_.baseSize,W=0,G={},Z=g.length-1,de=0;de<=Z;de++){var be=g[de],_e=null;if(f.isObject(be)){var Te=be.attrs,Le=f("tspan",Te),Ee=Le.node,re=be.t;D&&de===Z&&(re+=D),Ee.textContent=re;var ne=Te.class;ne&&Le.addClass(ne),M&&Le.attr("annotations",be.annotations),_e=parseFloat(Te["font-size"]),isFinite(_e)||(_e=R),_e&&_e>W&&(W=_e)}else D&&de===Z&&(be+=D),Ee=document.createTextNode(be||" "),R&&R>W&&(W=R);x.appendChild(Ee)}return W&&(G.maxFontSize=W),q?G.lineHeight=q:W&&(G.lineHeight=W*1.2),G}var E=/em$/;function P(x,g){var _=parseFloat(x);return E.test(x)?_*g:_}function S(x,g,_,M){if(!Array.isArray(g))return 0;var D=g.length;if(!D)return 0;for(var q=g[0],R=P(q.maxFontSize,_)||_,W=0,G=P(M,_),Z=1;Z<D;Z++){q=g[Z];var de=P(q.lineHeight,_)||G;W+=de}var be=P(q.maxFontSize,_)||_,_e;switch(x){case"middle":_e=R/2-.15*be-W/2;break;case"bottom":_e=-(.25*be)-W;break;default:case"top":_e=.8*R;break}return _e}p.text=function(x,g){if(x&&typeof x!="string")throw new Error("Vectorizer: text() expects the first argument to be a string.");x=f.sanitizeText(x),g||(g={});var _=g.displayEmpty,M=g.eol,D=g.textPath,q=g.textVerticalAnchor,R=q==="middle"||q==="bottom"||q==="top",W=g.x;W===void 0&&(W=this.attr("x")||0);var G=g.includeAnnotationIndices,Z=g.annotations;Z&&!f.isArray(Z)&&(Z=[Z]);var de=g.lineHeight,be=de==="auto",_e=be?"1.5em":de||"1em";this.empty(),this.attr({"xml:space":"preserve",display:x||_?null:"none"});var Te=parseFloat(this.attr("font-size"));Te||(Te=16,(R||Z)&&this.attr("font-size",Te));var Le=document,Ee;D?(typeof D=="string"&&(D={d:D}),Ee=v(D,this)):Ee=Le.createDocumentFragment();for(var re=0,ne=x.split(`
`),ee=[],F,U=0,ye=ne.length-1;U<=ye;U++){var Fe=_e,He="v-line",Be=Le.createElementNS(e.svg,"tspan"),Pe=ne[U],Ve;if(Pe)if(Z){var z=f.annotateString(Pe,Z,{offset:-re,includeAnnotationIndices:G});Ve=b(Be,z,{includeAnnotationIndices:G,eol:U!==ye&&M,lineHeight:be?null:_e,baseSize:Te});var K=Ve.lineHeight;K&&be&&U!==0&&(Fe=K),U===0&&(F=Ve.maxFontSize*.8)}else M&&U!==ye&&(Pe+=M),Be.textContent=Pe;else{Be.textContent="-",He+=" v-empty-line";var C=Be.style;if(C.fillOpacity=0,C.strokeOpacity=0,Z){Ve={},z=f.findAnnotationsAtIndex(Z,re);let V=Te;for(let Q=z.length;Q>0;Q--){const ce=z[Q-1].attrs;if(!ce||!("font-size"in ce))continue;const ue=parseFloat(ce["font-size"]);if(isFinite(ue)){V=ue;break}}be&&(U>0?Fe=V*1.2:F=V*.8),Be.setAttribute("font-size",V),Ve.maxFontSize=V}}Ve&&ee.push(Ve),U>0&&Be.setAttribute("dy",Fe),(U>0||D)&&Be.setAttribute("x",W),Be.className.baseVal=He,Ee.appendChild(Be),re+=Pe.length+1}if(R)if(Z)Fe=S(q,ee,Te,_e);else if(q==="top")Fe="0.8em";else{var $;switch(ye>0?($=parseFloat(_e)||1,$*=ye,E.test(_e)||($/=Te)):$=0,q){case"middle":Fe=.3-$/2+"em";break;case"bottom":Fe=-$-.3+"em";break}}else q===0?Fe="0em":q?Fe=q:(Fe=0,this.attr("y")===null&&this.attr("y",F||"0.8em"));return Ee.firstChild.setAttribute("dy",Fe),this.append(Ee),this},p.removeAttr=function(x){var g=f.qualifyAttr(x),_=this.node;return g.ns?_.hasAttributeNS(g.ns,g.local)&&_.removeAttributeNS(g.ns,g.local):_.hasAttribute(x)&&_.removeAttribute(x),this},p.attr=function(x,g){if(f.isUndefined(x)){for(var _=this.node.attributes,M={},D=0;D<_.length;D++)M[_[D].name]=_[D].value;return M}if(f.isString(x)&&f.isUndefined(g))return this.node.getAttribute(x);if(typeof x=="object")for(var q in x)x.hasOwnProperty(q)&&this.setAttribute(q,x[q]);else this.setAttribute(x,g);return this},p.normalizePath=function(){var x=this.tagName();return x==="PATH"&&this.attr("d",f.normalizePathData(this.attr("d"))),this},p.remove=function(){return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this},p.empty=function(){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);return this},p.setAttributes=function(x){for(var g in x)x.hasOwnProperty(g)&&this.setAttribute(g,x[g]);return this},p.append=function(x){f.isArray(x)||(x=[x]);for(var g=0,_=x.length;g<_;g++)this.node.appendChild(f.toNode(x[g]));return this},p.prepend=function(x){var g=this.node.firstChild;return g?f(g).before(x):this.append(x)},p.before=function(x){var g=this.node,_=g.parentNode;if(_){f.isArray(x)||(x=[x]);for(var M=0,D=x.length;M<D;M++)_.insertBefore(f.toNode(x[M]),g)}return this},p.appendTo=function(x){return f.toNode(x).appendChild(this.node),this},p.svg=function(){return this.node instanceof window.SVGSVGElement?this:f(this.node.ownerSVGElement)},p.tagName=function(){return this.node.tagName.toUpperCase()},p.defs=function(){var x=this.svg()||this,g=x.node.getElementsByTagName("defs")[0];return g?f(g):f("defs").appendTo(x)},p.clone=function(){var x=f(this.node.cloneNode(!0));return x.node.id=f.uniqueId(),x},p.findOne=function(x){var g=this.node.querySelector(x);return g?f(g):void 0},p.find=function(x){var g=[],_=this.node.querySelectorAll(x);if(_)for(var M=0;M<_.length;M++)g.push(f(_[M]));return g},p.children=function(){for(var x=this.node.childNodes,g=[],_=0;_<x.length;_++){var M=x[_];M.nodeType===1&&g.push(f(x[_]))}return g},p.parent=function(){return f(this.node.parentNode)||null},p.index=function(){for(var x=0,g=this.node.previousSibling;g;)g.nodeType===1&&x++,g=g.previousSibling;return x},p.findParentByClass=function(x,g){for(var _=this.node.ownerSVGElement,M=this.node.parentNode;M&&M!==g&&M!==_;){var D=f(M);if(D.hasClass(x))return D;M=M.parentNode}return null},p.contains=function(x){var g=this.node,_=f.toNode(x),M=_&&_.parentNode;return g===M||!!(M&&M.nodeType===1&&g.compareDocumentPosition(M)&16)},p.toLocalPoint=function(x,g){var _=this.svg().node,M=_.createSVGPoint();M.x=x,M.y=g;try{var D=M.matrixTransform(_.getScreenCTM().inverse()),q=this.getTransformToElement(_).inverse()}catch{return M}return D.matrixTransform(q)},p.translateCenterToPoint=function(x){var g=this.getBBox({target:this.svg()}),_=g.center();return this.translate(x.x-_.x,x.y-_.y),this},p.translateAndAutoOrient=function(x,g,_){x=new fe(x),g=new fe(g),_||(_=this.svg());var M=this.scale();this.attr("transform","");var D=this.getBBox({target:_}).scale(M.sx,M.sy),q=f.createSVGTransform();q.setTranslate(-D.x-D.width/2,-D.y-D.height/2);var R=f.createSVGTransform(),W=x.angleBetween(g,x.clone().offset(1,0));W&&R.setRotate(W,0,0);var G=f.createSVGTransform(),Z=x.clone().move(g,D.width/2);G.setTranslate(2*x.x-Z.x,2*x.y-Z.y);var de=this.getTransformToElement(_),be=f.createSVGTransform();return be.setMatrix(G.matrix.multiply(R.matrix.multiply(q.matrix.multiply(de.scale(M.sx,M.sy))))),this.attr("transform",f.matrixToTransformString(be.matrix)),this},p.animateAlongPath=function(x,g){g=f.toNode(g);var _=f.ensureId(g),M=f("animateMotion",x),D=f("mpath",{"xlink:href":"#"+_});M.append(D),this.append(M);try{M.node.beginElement()}catch{if(document.documentElement.getAttribute("smiling")==="fake"){var q=M.node;q.animators=[];var R=q.getAttribute("id");R&&(id2anim[R]=q);for(var W=getTargets(q),G=0,Z=W.length;G<Z;G++){var de=W[G],be=new Animator(q,de,G);animators.push(be),q.animators[G]=be,be.register()}}}return this};const A=/[^\x20\t\r\n\f]+/g;function I(x){return f.isString(x)?x.trim().match(A)||[]:[]}p.hasClass=function(x){return f.isString(x)?this.node.classList.contains(x.trim()):!1},p.addClass=function(x){return this.node.classList.add(...I(x)),this},p.removeClass=function(x){return this.node.classList.remove(...I(x)),this},p.toggleClass=function(x,g){const _=I(x);for(let M=0;M<_.length;M++)this.node.classList.toggle(_[M],g);return this},p.sample=function(x){x=x||1;for(var g=this.node,_=g.getTotalLength(),M=[],D=0,q;D<_;)q=g.getPointAtLength(D),M.push({x:q.x,y:q.y,distance:D}),D+=x;return M},p.convertToPath=function(){var x=f("path");x.attr(this.attr());var g=this.convertToPathData();return g&&x.attr("d",g),x},p.convertToPathData=function(){var x=this.tagName();switch(x){case"PATH":return this.attr("d");case"LINE":return f.convertLineToPathData(this.node);case"POLYGON":return f.convertPolygonToPathData(this.node);case"POLYLINE":return f.convertPolylineToPathData(this.node);case"ELLIPSE":return f.convertEllipseToPathData(this.node);case"CIRCLE":return f.convertCircleToPathData(this.node);case"RECT":return f.convertRectToPathData(this.node)}throw new Error(x+" cannot be converted to PATH.")},f.prototype.toGeometryShape=function(){var x,g,_,M,D,q,R,W,G,Z,de,be,_e,Te,Le;switch(this.tagName()){case"RECT":return x=parseFloat(this.attr("x"))||0,g=parseFloat(this.attr("y"))||0,_=parseFloat(this.attr("width"))||0,M=parseFloat(this.attr("height"))||0,new st(x,g,_,M);case"CIRCLE":return D=parseFloat(this.attr("cx"))||0,q=parseFloat(this.attr("cy"))||0,R=parseFloat(this.attr("r"))||0,new ds({x:D,y:q},R,R);case"ELLIPSE":return D=parseFloat(this.attr("cx"))||0,q=parseFloat(this.attr("cy"))||0,W=parseFloat(this.attr("rx"))||0,G=parseFloat(this.attr("ry"))||0,new ds({x:D,y:q},W,G);case"POLYLINE":return Z=f.getPointsFromSvgNode(this),new rr(Z);case"POLYGON":return Z=f.getPointsFromSvgNode(this),Z.length>1&&Z.push(Z[0]),new rr(Z);case"PATH":return de=this.attr("d"),wt.isDataSupported(de)||(de=f.normalizePathData(de)),new wt(de);case"LINE":return be=parseFloat(this.attr("x1"))||0,Te=parseFloat(this.attr("y1"))||0,_e=parseFloat(this.attr("x2"))||0,Le=parseFloat(this.attr("y2"))||0,new ht({x:be,y:Te},{x:_e,y:Le})}return this.getBBox()},p.findIntersection=function(x,g){var _=this.svg().node;g=g||_;var M=this.getBBox({target:g}),D=M.center();if(M.intersectionWithLineFromCenterToPoint(x)){var q,R=this.tagName();if(R==="RECT"){var W=new st(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),G=this.getTransformToElement(g),Z=f.decomposeMatrix(G),de=_.createSVGTransform();de.setRotate(-Z.rotation,D.x,D.y);var be=f.transformRect(W,de.matrix.multiply(G));q=new st(be).intersectionWithLineFromCenterToPoint(x,Z.rotation)}else if(R==="PATH"||R==="POLYGON"||R==="POLYLINE"||R==="CIRCLE"||R==="ELLIPSE"){var _e=R==="PATH"?this:this.convertToPath(),Te=_e.sample(),Le=1/0,Ee=[],re,ne,ee,F,U,ye;for(re=0;re<Te.length;re++)ne=Te[re],ee=f.createSVGPoint(ne.x,ne.y),ee=ee.matrixTransform(this.getTransformToElement(g)),ne=new fe(ee),F=ne.distance(D),U=ne.distance(x)*1.1,ye=F+U,ye<Le?(Le=ye,Ee=[{sample:ne,refDistance:U}]):ye<Le+1&&Ee.push({sample:ne,refDistance:U});Ee.sort(function(Fe,He){return Fe.refDistance-He.refDistance}),Ee[0]&&(q=Ee[0].sample)}return q}},p.setAttribute=function(x,g){var _=this.node;if(g===null)return this.removeAttr(x),this;var M=f.qualifyAttr(x);return M.ns?_.setAttributeNS(M.ns,x,g):x==="id"?_.id=g:_.setAttribute(x,g),this},f.createSvgDocument=function(x){if(x){const _=`<svg xmlns="${e.svg}" xmlns:xlink="${e.xlink}" version="${n}">${x}</svg>`,{documentElement:M}=f.parseXML(_,{async:!1});return M}const g=document.createElementNS(e.svg,"svg");return g.setAttributeNS(e.xmlns,"xmlns:xlink",e.xlink),g.setAttribute("version",n),g},f.createSVGStyle=function(x){const{node:g}=f("style",{type:"text/css"},[f.createCDATASection(x)]);return g},f.createCDATASection=function(x=""){return document.implementation.createDocument(null,"xml",null).createCDATASection(x)},f.idCounter=0,f.uniqueId=function(){return"v-"+ ++f.idCounter},f.toNode=function(x){return f.isV(x)?x.node:x.nodeName&&x||x[0]},f.ensureId=function(x){return x=f.toNode(x),x.id||(x.id=f.uniqueId())},f.sanitizeText=function(x){return(x||"").replace(/ /g,"")},f.isUndefined=function(x){return typeof x>"u"},f.isString=function(x){return typeof x=="string"},f.isObject=function(x){return x&&typeof x=="object"},f.isArray=Array.isArray,f.parseXML=function(x,g){g=g||{};var _;try{var M=new DOMParser;f.isUndefined(g.async)||(M.async=g.async),_=M.parseFromString(x,"text/xml")}catch{_=void 0}if(!_||_.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+x);return _},f.qualifyAttr=function(x){if(x.indexOf(":")!==-1){var g=x.split(":");return{ns:e[g[0]],local:g[1]}}return{ns:null,local:x}},f.transformSeparatorRegex=/[ ,]+/,f.transformRegex=/\b\w+\([^()]+\)/g,f.transformFunctionRegex=/\b(\w+)\(([^()]+)\)/,f.transformTranslateRegex=/\btranslate\(([^()]+)\)/,f.transformRotateRegex=/\brotate\(([^()]+)\)/,f.transformScaleRegex=/\bscale\(([^()]+)\)/,f.transformStringToMatrix=function(x){let g=f.createSVGMatrix();const _=x&&x.match(f.transformRegex);if(!_)return g;const M=_.length;for(let D=0;D<M;D++){const R=_[D].match(f.transformFunctionRegex);if(R){let W,G,Z,de,be,_e=f.createSVGMatrix();const Te=R[1].toLowerCase(),Le=R[2].split(f.transformSeparatorRegex);switch(Te){case"scale":W=parseFloat(Le[0]),G=Le[1]===void 0?W:parseFloat(Le[1]),_e=_e.scaleNonUniform(W,G);break;case"translate":Z=parseFloat(Le[0]),de=parseFloat(Le[1]),_e=_e.translate(Z,de);break;case"rotate":be=parseFloat(Le[0]),Z=parseFloat(Le[1])||0,de=parseFloat(Le[2])||0,Z!==0||de!==0?_e=_e.translate(Z,de).rotate(be).translate(-Z,-de):_e=_e.rotate(be);break;case"skewx":be=parseFloat(Le[0]),_e=_e.skewX(be);break;case"skewy":be=parseFloat(Le[0]),_e=_e.skewY(be);break;case"matrix":_e.a=parseFloat(Le[0]),_e.b=parseFloat(Le[1]),_e.c=parseFloat(Le[2]),_e.d=parseFloat(Le[3]),_e.e=parseFloat(Le[4]),_e.f=parseFloat(Le[5]);break;default:continue}g=g.multiply(_e)}}return g},f.matrixToTransformString=function(x){return x||(x=!0),"matrix("+(x.a!==void 0?x.a:1)+","+(x.b!==void 0?x.b:0)+","+(x.c!==void 0?x.c:0)+","+(x.d!==void 0?x.d:1)+","+(x.e!==void 0?x.e:0)+","+(x.f!==void 0?x.f:0)+")"},f.parseTransformString=function(x){var g,_,M;if(x){var D=f.transformSeparatorRegex;if(x.trim().indexOf("matrix")>=0){var q=f.transformStringToMatrix(x),R=f.decomposeMatrix(q);g=[R.translateX,R.translateY],M=[R.scaleX,R.scaleY],_=[R.rotation];var W=[];(g[0]!==0||g[1]!==0)&&W.push("translate("+g+")"),(M[0]!==1||M[1]!==1)&&W.push("scale("+M+")"),_[0]!==0&&W.push("rotate("+_+")"),x=W.join(" ")}else{const Z=x.match(f.transformTranslateRegex);Z&&(g=Z[1].split(D));const de=x.match(f.transformRotateRegex);de&&(_=de[1].split(D));const be=x.match(f.transformScaleRegex);be&&(M=be[1].split(D))}}var G=M&&M[0]?parseFloat(M[0]):1;return{value:x,translate:{tx:g&&g[0]?parseInt(g[0],10):0,ty:g&&g[1]?parseInt(g[1],10):0},rotate:{angle:_&&_[0]?parseInt(_[0],10):0,cx:_&&_[1]?parseInt(_[1],10):void 0,cy:_&&_[2]?parseInt(_[2],10):void 0},scale:{sx:G,sy:M&&M[1]?parseFloat(M[1]):G}}},f.deltaTransformPoint=function(x,g){var _=g.x*x.a+g.y*x.c+0,M=g.x*x.b+g.y*x.d+0;return{x:_,y:M}},f.decomposeMatrix=function(x){var g=f.deltaTransformPoint(x,{x:0,y:1}),_=f.deltaTransformPoint(x,{x:1,y:0}),M=180/i*s(g.y,g.x)-90,D=180/i*s(_.y,_.x);return{translateX:x.e,translateY:x.f,scaleX:o(x.a*x.a+x.b*x.b),scaleY:o(x.c*x.c+x.d*x.d),skewX:M,skewY:D,rotation:M}},f.matrixToScale=function(x){var g,_,M,D;return x?(g=f.isUndefined(x.a)?1:x.a,D=f.isUndefined(x.d)?1:x.d,_=x.b,M=x.c):g=D=1,{sx:_?o(g*g+_*_):g,sy:M?o(M*M+D*D):D}},f.matrixToRotate=function(x){var g={x:0,y:1};return x&&(g=f.deltaTransformPoint(x,g)),{angle:ul(iw(s(g.y,g.x))-90)}},f.matrixToTranslate=function(x){return{tx:x&&x.e||0,ty:x&&x.f||0}},f.isV=function(x){return x instanceof f},f.isVElement=f.isV,f.isSVGGraphicsElement=function(x){return x?(x=f.toNode(x),x instanceof SVGElement&&typeof x.getScreenCTM=="function"):!1};var N=f("svg").node;return f.createSVGMatrix=function(x){var g=N.createSVGMatrix();for(var _ in x)g[_]=x[_];return g},f.createSVGTransform=function(x){return f.isUndefined(x)?N.createSVGTransform():(x instanceof SVGMatrix||(x=f.createSVGMatrix(x)),N.createSVGTransformFromMatrix(x))},f.createSVGPoint=function(x,g){var _=N.createSVGPoint();return _.x=x,_.y=g,_},f.transformRect=function(x,g){var _=N.createSVGPoint();_.x=x.x,_.y=x.y;var M=_.matrixTransform(g);_.x=x.x+x.width,_.y=x.y;var D=_.matrixTransform(g);_.x=x.x+x.width,_.y=x.y+x.height;var q=_.matrixTransform(g);_.x=x.x,_.y=x.y+x.height;var R=_.matrixTransform(g),W=a(M.x,D.x,q.x,R.x),G=l(M.x,D.x,q.x,R.x),Z=a(M.y,D.y,q.y,R.y),de=l(M.y,D.y,q.y,R.y);return new st(W,Z,G-W,de-Z)},f.transformPoint=function(x,g){return new fe(f.createSVGPoint(x.x,x.y).matrixTransform(g))},f.transformLine=function(x,g){return new ht(f.transformPoint(x.start,g),f.transformPoint(x.end,g))},f.transformPolyline=function(x,g){var _=x instanceof rr?x.points:x;f.isArray(_)||(_=[]);for(var M=[],D=0,q=_.length;D<q;D++)M[D]=f.transformPoint(_[D],g);return new rr(M)},f.styleToObject=function(x){for(var g={},_=x.split(";"),M=0;M<_.length;M++){var D=_[M],q=D.split("=");g[q[0].trim()]=q[1].trim()}return g},f.createSlicePathData=function(x,g,_,M){var D=2*i-1e-6,q=x,R=g,W=_,G=M,Z=(G<W&&(Z=W,W=G,G=Z),G-W),de=Z<i?"0":"1",be=u(W),_e=c(W),Te=u(G),Le=c(G);return Z>=D?q?"M0,"+R+"A"+R+","+R+" 0 1,1 0,"+-R+"A"+R+","+R+" 0 1,1 0,"+R+"M0,"+q+"A"+q+","+q+" 0 1,0 0,"+-q+"A"+q+","+q+" 0 1,0 0,"+q+"Z":"M0,"+R+"A"+R+","+R+" 0 1,1 0,"+-R+"A"+R+","+R+" 0 1,1 0,"+R+"Z":q?"M"+R*be+","+R*_e+"A"+R+","+R+" 0 "+de+",1 "+R*Te+","+R*Le+"L"+q*Te+","+q*Le+"A"+q+","+q+" 0 "+de+",0 "+q*be+","+q*_e+"Z":"M"+R*be+","+R*_e+"A"+R+","+R+" 0 "+de+",1 "+R*Te+","+R*Le+"L0,0Z"},f.mergeAttrs=function(x,g){for(var _ in g)_==="class"?x[_]=x[_]?x[_]+" "+g[_]:g[_]:_==="style"?f.isObject(x[_])&&f.isObject(g[_])?x[_]=f.mergeAttrs(x[_],g[_]):f.isObject(x[_])?x[_]=f.mergeAttrs(x[_],f.styleToObject(g[_])):f.isObject(g[_])?x[_]=f.mergeAttrs(f.styleToObject(x[_]),g[_]):x[_]=f.mergeAttrs(f.styleToObject(x[_]),f.styleToObject(g[_])):x[_]=g[_];return x},f.annotateString=function(x,g,_){g=g||[],_=_||{};for(var M=_.offset||0,D=[],q,R=[],W,G,Z=0;Z<x.length;Z++){W=R[Z]=x[Z];for(var de=0;de<g.length;de++){var be=g[de],_e=be.start+M,Te=be.end+M;Z>=_e&&Z<Te&&(f.isObject(W)?W.attrs=f.mergeAttrs(f.mergeAttrs({},W.attrs),be.attrs):W=R[Z]={t:x[Z],attrs:be.attrs},_.includeAnnotationIndices&&(W.annotations||(W.annotations=[])).push(de))}G=R[Z-1],G?f.isObject(W)&&f.isObject(G)?JSON.stringify(W.attrs)===JSON.stringify(G.attrs)?q.t+=W.t:(D.push(q),q=W):f.isObject(W)||f.isObject(G)?(D.push(q),q=W):q=(q||"")+W:q=W}return q&&D.push(q),D},f.findAnnotationsAtIndex=function(x,g){var _=[];return x&&x.forEach(function(M){M.start<g&&g<=M.end&&_.push(M)}),_},f.findAnnotationsBetweenIndexes=function(x,g,_){var M=[];return x&&x.forEach(function(D){(g>=D.start&&g<D.end||_>D.start&&_<=D.end||D.start>=g&&D.end<_)&&M.push(D)}),M},f.shiftAnnotations=function(x,g,_){return x&&x.forEach(function(M){M.start<g&&M.end>=g?M.end+=_:M.start>=g&&(M.start+=_,M.end+=_)}),x},f.convertLineToPathData=function(x){x=f(x);var g=["M",x.attr("x1"),x.attr("y1"),"L",x.attr("x2"),x.attr("y2")].join(" ");return g},f.convertPolygonToPathData=function(x){var g=f.getPointsFromSvgNode(x);return g.length===0?null:f.svgPointsToPath(g)+" Z"},f.convertPolylineToPathData=function(x){var g=f.getPointsFromSvgNode(x);return g.length===0?null:f.svgPointsToPath(g)},f.svgPointsToPath=function(x){for(var g=0,_=x.length;g<_;g++)x[g]=x[g].x+" "+x[g].y;return"M "+x.join(" L")},f.getPointsFromSvgNode=function(x){x=f.toNode(x);var g=[],_=x.points;if(_)for(var M=0,D=_.numberOfItems;M<D;M++)g.push(_.getItem(M));return g},f.KAPPA=.551784,f.convertCircleToPathData=function(x){x=f(x);var g=parseFloat(x.attr("cx"))||0,_=parseFloat(x.attr("cy"))||0,M=parseFloat(x.attr("r")),D=M*f.KAPPA,q=["M",g,_-M,"C",g+D,_-M,g+M,_-D,g+M,_,"C",g+M,_+D,g+D,_+M,g,_+M,"C",g-D,_+M,g-M,_+D,g-M,_,"C",g-M,_-D,g-D,_-M,g,_-M,"Z"].join(" ");return q},f.convertEllipseToPathData=function(x){x=f(x);var g=parseFloat(x.attr("cx"))||0,_=parseFloat(x.attr("cy"))||0,M=parseFloat(x.attr("rx")),D=parseFloat(x.attr("ry"))||M,q=M*f.KAPPA,R=D*f.KAPPA,W=["M",g,_-D,"C",g+q,_-D,g+M,_-R,g+M,_,"C",g+M,_+R,g+q,_+D,g,_+D,"C",g-q,_+D,g-M,_+R,g-M,_,"C",g-M,_-R,g-q,_-D,g,_-D,"Z"].join(" ");return W},f.convertRectToPathData=function(x){return x=f(x),f.rectToPath({x:parseFloat(x.attr("x"))||0,y:parseFloat(x.attr("y"))||0,width:parseFloat(x.attr("width"))||0,height:parseFloat(x.attr("height"))||0,rx:parseFloat(x.attr("rx"))||0,ry:parseFloat(x.attr("ry"))||0})},f.rectToPath=function(x){var g,_=x.x,M=x.y,D=x.width,q=x.height,R=a(x.rx||x["top-rx"]||0,D/2),W=a(x.rx||x["bottom-rx"]||0,D/2),G=a(x.ry||x["top-ry"]||0,q/2),Z=a(x.ry||x["bottom-ry"]||0,q/2);return R||W||G||Z?g=["M",_,M+G,"v",q-G-Z,"a",W,Z,0,0,0,W,Z,"h",D-2*W,"a",W,Z,0,0,0,W,-Z,"v",-(q-Z-G),"a",R,G,0,0,0,-R,-G,"h",-(D-2*R),"a",R,G,0,0,0,-R,G,"Z"]:g=["M",_,M,"H",_+D,"V",M+q,"H",_,"V",M,"Z"],g.join(" ")},f.normalizePathData=function(){var x=`	
\v\f\r \u2028\u2029`,g=new RegExp("([a-z])["+x+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+x+"]*,?["+x+"]*)+)","ig"),_=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+x+"]*,?["+x+"]*","ig"),M=Math,D=M.PI,q=M.sin,R=M.cos,W=M.tan,G=M.asin,Z=M.sqrt,de=M.abs;function be(ne,ee,F,U,ye,Fe){var He=.3333333333333333,Be=2/3;return[He*ne+Be*F,He*ee+Be*U,He*ye+Be*F,He*Fe+Be*U,ye,Fe]}function _e(ne,ee,F){var U=ne*R(F)-ee*q(F),ye=ne*q(F)+ee*R(F);return{x:U,y:ye}}function Te(ne,ee,F,U,ye,Fe,He,Be,Pe,Ve){var z=D*120/180,K=D/180*(+ye||0),C=[],$;if(Ve)Xe=Ve[0],Ye=Ve[1],tt=Ve[2],Je=Ve[3];else{$=_e(ne,ee,-K),ne=$.x,ee=$.y,$=_e(Be,Pe,-K),Be=$.x,Pe=$.y;var V=(ne-Be)/2,Q=(ee-Pe)/2,ce=V*V/(F*F)+Q*Q/(U*U);ce>1&&(ce=Z(ce),F=ce*F,U=ce*U);var ue=F*F,ke=U*U,Ae=(Fe==He?-1:1)*Z(de((ue*ke-ue*Q*Q-ke*V*V)/(ue*Q*Q+ke*V*V))),tt=Ae*F*Q/U+(ne+Be)/2,Je=Ae*-U*V/F+(ee+Pe)/2,Xe=G(((ee-Je)/U).toFixed(9)),Ye=G(((Pe-Je)/U).toFixed(9));Xe=ne<tt?D-Xe:Xe,Ye=Be<tt?D-Ye:Ye,Xe<0&&(Xe=D*2+Xe),Ye<0&&(Ye=D*2+Ye),He&&Xe>Ye&&(Xe=Xe-D*2),!He&&Ye>Xe&&(Ye=Ye-D*2)}var ft=Ye-Xe;if(de(ft)>z){var Nt=Ye,Vt=Be,yt=Pe;Ye=Xe+z*(He&&Ye>Xe?1:-1),Be=tt+F*R(Ye),Pe=Je+U*q(Ye),C=Te(Be,Pe,F,U,ye,0,He,Vt,yt,[Ye,Nt,tt,Je])}ft=Ye-Xe;var Gt=R(Xe),qn=q(Xe),Or=R(Ye),ir=q(Ye),yi=W(ft/4),Qn=4/3*(F*yi),Sn=4/3*(U*yi),En=[ne,ee],vs=[ne+Qn*qn,ee-Sn*Gt],uu=[Be+Qn*ir,Pe-Sn*Or],dl=[Be,Pe];if(vs[0]=2*En[0]-vs[0],vs[1]=2*En[1]-vs[1],Ve)return[vs,uu,dl].concat(C);C=[vs,uu,dl].concat(C).join().split(",");for(var Ca=[],Js=C.length,Qr=0;Qr<Js;Qr++)Ca[Qr]=Qr%2?_e(C[Qr-1],C[Qr],K).y:_e(C[Qr],C[Qr+1],K).x;return Ca}function Le(ne){if(!ne)return null;var ee={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},F=[];return String(ne).replace(g,function(U,ye,Fe){var He=[],Be=ye.toLowerCase();for(Fe.replace(_,function(Pe,Ve){Ve&&He.push(+Ve)}),Be==="m"&&He.length>2&&(F.push([ye].concat(He.splice(0,2))),Be="l",ye=ye==="m"?"l":"L");He.length>=ee[Be]&&(F.push([ye].concat(He.splice(0,ee[Be]))),!!ee[Be]););}),F}function Ee(ne){if((!Array.isArray(ne)||!Array.isArray(ne&&ne[0]))&&(ne=Le(ne)),!ne||!ne.length)return[["M",0,0]];for(var ee=[],F=0,U=0,ye=0,Fe=0,He=0,Be,Pe=ne.length,Ve=He;Ve<Pe;Ve++){var z=[];ee.push(z);var K=ne[Ve];if(Be=K[0],Be!=Be.toUpperCase()){z[0]=Be.toUpperCase();var C,$;switch(z[0]){case"A":z[1]=K[1],z[2]=K[2],z[3]=K[3],z[4]=K[4],z[5]=K[5],z[6]=+K[6]+F,z[7]=+K[7]+U;break;case"V":z[1]=+K[1]+U;break;case"H":z[1]=+K[1]+F;break;case"M":for(ye=+K[1]+F,Fe=+K[2]+U,C=K.length,$=1;$<C;$++)z[$]=+K[$]+($%2?F:U);break;default:for(C=K.length,$=1;$<C;$++)z[$]=+K[$]+($%2?F:U);break}}else for(var V=K.length,Q=0;Q<V;Q++)z[Q]=K[Q];switch(z[0]){case"Z":F=+ye,U=+Fe;break;case"H":F=z[1];break;case"V":U=z[1];break;case"M":ye=z[z.length-2],Fe=z[z.length-1],F=z[z.length-2],U=z[z.length-1];break;default:F=z[z.length-2],U=z[z.length-1];break}}return ee}function re(ne){var ee=Ee(ne),F={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function U(C,$,V){var Q,ce;if(!C)return["C",$.x,$.y,$.x,$.y,$.x,$.y];switch(C[0]in{T:1,Q:1}||($.qx=null,$.qy=null),C[0]){case"M":$.X=C[1],$.Y=C[2];break;case"A":parseFloat(C[1])===0||parseFloat(C[2])===0?C=["L",C[6],C[7]]:C=["C"].concat(Te.apply(0,[$.x,$.y].concat(C.slice(1))));break;case"S":V==="C"||V==="S"?(Q=$.x*2-$.bx,ce=$.y*2-$.by):(Q=$.x,ce=$.y),C=["C",Q,ce].concat(C.slice(1));break;case"T":V==="Q"||V==="T"?($.qx=$.x*2-$.qx,$.qy=$.y*2-$.qy):($.qx=$.x,$.qy=$.y),C=["C"].concat(be($.x,$.y,$.qx,$.qy,C[1],C[2]));break;case"Q":$.qx=C[1],$.qy=C[2],C=["C"].concat(be($.x,$.y,C[1],C[2],C[3],C[4]));break;case"H":C=["L"].concat(C[1],$.y);break;case"V":C=["L"].concat($.x,C[1]);break}return C}function ye(C,$){if(C[$].length>7){C[$].shift();for(var V=C[$];V.length;)Fe[$]="A",C.splice($++,0,["C"].concat(V.splice(0,6)));C.splice($,1),Pe=ee.length}}for(var Fe=[],He="",Be="",Pe=ee.length,Ve=0;Ve<Pe;Ve++){ee[Ve]&&(He=ee[Ve][0]),He!=="C"&&(Fe[Ve]=He,Ve>0&&(Be=Fe[Ve-1])),ee[Ve]=U(ee[Ve],F,Be),Fe[Ve]!=="A"&&He==="C"&&(Fe[Ve]="C"),ye(ee,Ve);var z=ee[Ve],K=z.length;F.x=z[K-2],F.y=z[K-1],F.bx=parseFloat(z[K-4])||F.x,F.by=parseFloat(z[K-3])||F.y}return(!ee[0][0]||ee[0][0]!=="M")&&ee.unshift(["M",0,0]),ee}return function(ne){return re(ne).join(",").split(",").join(" ")}}(),f.namespace=e,f.g=Iue,f}(),De=uce,il={useCSSSelectors:!0,classNamePrefix:"joint-",defaultTheme:"default",doubleTapInterval:300},fm="[object Arguments]",Q_="[object Array]",bw="[object Boolean]",LP="[object Date]",Q5="[object Error]",cce="[object Function]",tv="[object Map]",ww="[object Number]",fce="[object Null]",Uh="[object Object]",DP="[object RegExp]",nv="[object Set]",xw="[object String]",Sw="[object Symbol]",hce="[object Undefined]",dce="[object WeakMap]",FP="[object ArrayBuffer]",VP="[object DataView]",e6="[object Float32Array]",t6="[object Float64Array]",n6="[object Int8Array]",r6="[object Int16Array]",i6="[object Int32Array]",s6="[object Uint8Array]",o6="[object Uint8ClampedArray]",a6="[object Uint16Array]",l6="[object Uint32Array]",pce={[fm]:!0,[Q_]:!0,[FP]:!0,[VP]:!0,[bw]:!0,[LP]:!0,[e6]:!0,[t6]:!0,[n6]:!0,[r6]:!0,[i6]:!0,[tv]:!0,[ww]:!0,[Uh]:!0,[DP]:!0,[nv]:!0,[xw]:!0,[Sw]:!0,[s6]:!0,[o6]:!0,[a6]:!0,[l6]:!0,[Q5]:!1,[cce]:!1,[dce]:!1},BP="\\ud800-\\udfff",gce="\\u0300-\\u036f",mce="\\ufe20-\\ufe2f",vce="\\u20d0-\\u20ff",yce="\\u1ab0-\\u1aff",bce="\\u1dc0-\\u1dff",wce=gce+mce+vce+yce+bce,u6="\\u2700-\\u27bf",c6="a-z\\xdf-\\xf6\\xf8-\\xff",xce="\\xac\\xb1\\xd7\\xf7",Sce="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ece="\\u2000-\\u206f",_ce=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",f6="A-Z\\xc0-\\xd6\\xd8-\\xde",Ace="\\ufe0e\\ufe0f",h6=xce+Sce+Ece+_ce,d6="[']",JI=`[${h6}]`,jP=`[${wce}]`,p6="\\d",kce=`[${u6}]`,g6=`[${c6}]`,m6=`[^${BP}${h6+p6+u6+c6+f6}]`,eA="\\ud83c[\\udffb-\\udfff]",Cce=`(?:${jP}|${eA})`,v6=`[^${BP}]`,zP="(?:\\ud83c[\\udde6-\\uddff]){2}",HP="[\\ud800-\\udbff][\\udc00-\\udfff]",Lh=`[${f6}]`,Pce="\\u200d",XI=`(?:${g6}|${m6})`,Oce=`(?:${Lh}|${m6})`,ZI=`(?:${d6}(?:d|ll|m|re|s|t|ve))?`,QI=`(?:${d6}(?:D|LL|M|RE|S|T|VE))?`,y6=`${Cce}?`,b6=`[${Ace}]?`,Tce=`(?:${Pce}(?:${[v6,zP,HP].join("|")})${b6+y6})*`,Mce="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Nce="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",w6=b6+y6+Tce,Ice=`(?:${[kce,zP,HP].join("|")})${w6}`,$ce=RegExp([`${Lh}?${g6}+${ZI}(?=${[JI,Lh,"$"].join("|")})`,`${Oce}+${QI}(?=${[JI,Lh+XI,"$"].join("|")})`,`${Lh}?${XI}+${ZI}`,`${Lh}+${QI}`,Nce,Mce,`${p6}+`,Ice].join("|"),"g"),UP=200,tA="__hash_undefined__",Rce=/^\[object (?:Float(?:32|64)|(?:Int|Uint)(?:8|16|32)|Uint8Clamped)Array\]$/,Lce=`[${BP}]`,Dce=`${v6}${jP}?`,Fce=`(?:${[Dce,jP,zP,HP,Lce].join("|")})`,x6=RegExp(`${eA}(?=${eA})|${Fce+w6}`,"g"),Vce=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Bce=/^\w*$/,jce=".".charCodeAt(0),zce=/\\(\\)?/g,Hce=RegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g"),Uce=/^(?:0|[1-9]\d*)$/,qce=RegExp.prototype.test.bind(/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/),Wce=4294967295-1,Gce=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,S6=t=>x6.test(t),Kce=t=>t.match(x6)||[],Yce=t=>t.split(""),E6=t=>S6(t)?Kce(t):Yce(t),Jce=t=>t==null?[]:rv(t).map(e=>t[e]),rv=t=>Jo(t)?_6(t):Object.keys(Object(t)),Xce=t=>{if(!Ew(t))return Object.keys(t);var e=[];for(var n in Object(t))hasOwnProperty.call(t,n)&&n!="constructor"&&e.push(n);return e},_6=(t,e)=>{const n=Array.isArray(t),r=!n&&Ea(t)&&Wo(t)===fm,i=!n&&!r&&sv(t),s=n||r||i,o=t.length,a=new Array(s?o:0);let l=s?-1:o;for(;++l<o;)a[l]=`${l}`;for(const u in t)(e||hasOwnProperty.call(t,u))&&!(s&&(u==="length"||YP(u,o)))&&a.push(u);return a},sy=(t,e)=>{let{length:n}=t;for(;n--;)if(Xd(t[n][0],e))return n;return-1},Xd=(t,e)=>t===e||t!==t&&e!==e,Ea=t=>t!=null&&typeof t=="object",Yb=(t,e,n)=>{if(!Nn(n))return!1;const r=typeof e;return(r=="number"?Jo(n)&&e>-1&&e<n.length:r=="string"&&e in n)?Xd(n[e],t):!1},Zce=t=>Ea(t)&&Wo(t)==nv,Qce=t=>Ea(t)&&Wo(t)==tv,Ew=t=>{const e=t&&t.constructor,n=typeof e=="function"&&e.prototype||Object.prototype;return t===n},Zd=(t,e,n)=>{const r=t[e];(!(hasOwnProperty.call(t,e)&&Xd(r,n))||n===void 0&&!(e in t))&&(t[e]=n)},iv=(t,e,n)=>{let r=-1;const i=e.length;for(;++r<i;){const s=e[r];Zd(n,s,t[s])}return n},Jo=t=>t!=null&&typeof t!="function"&&typeof t.length=="number"&&t.length>-1&&t.length%1===0,$d=t=>typeof t=="symbol"||Ea(t)&&Wo(t)===Sw,efe=t=>{const e=t.length;let n=new t.constructor(e);return e&&typeof t[0]=="string"&&hasOwnProperty.call(t,"index")&&(n.index=t.index,n.input=t.input),n},qP=(t,e)=>{let n=-1;const r=t.length;for(e||(e=new Array(r));++n<r;)e[n]=t[n];return e},Wo=t=>t==null?t===void 0?hce:fce:Object.prototype.toString.call(t),WP=t=>{const e=new t.constructor(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e},A6=(t,e)=>{const n=e?WP(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)},tfe=t=>{const e=new t.constructor(t.source,/\w*$/.exec(t));return e.lastIndex=t.lastIndex,e},k6=t=>typeof t.constructor=="function"&&!Ew(t)?Object.create(Object.getPrototypeOf(t)):{},GP=t=>t==null?[]:(t=Object(t),Object.getOwnPropertySymbols(t).filter(n=>propertyIsEnumerable.call(t,n))),nfe=(t,e)=>iv(t,GP(t),e);function rfe(t,e){const n=e?WP(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}const ife=(t,e,n)=>{const r=t.constructor;switch(e){case FP:return WP(t);case bw:case LP:return new r(+t);case VP:return rfe(t,n);case e6:case t6:case n6:case r6:case i6:case s6:case o6:case a6:case l6:return A6(t,n);case tv:return new r(t);case ww:case xw:return new r(t);case DP:return tfe(t);case nv:return new r;case Sw:return Symbol.prototype.valueOf?Object(Symbol.prototype.valueOf.call(t)):{}}},sv=t=>Ea(t)&&Rce.test(Wo(t)),nA=t=>{const e=Object.keys(t);return!Array.isArray(t)&&t!=null&&e.push(...GP(Object(t))),e},C6=t=>{const e=[];for(;t;)e.push(...GP(t)),t=Object.getPrototypeOf(Object(t));return e},P6=t=>{const e=[];for(const n in t)e.push(n);return Array.isArray(t)||e.push(...C6(t)),e},oy=({__data__:t},e)=>{const n=t;return mfe(e)?n[typeof e=="string"?"string":"hash"]:n.map},sfe=(t,e,n,r)=>{const i=nA(t),s=i.length,a=nA(e).length;if(s!=a)return!1;let l,u=s;for(;u--;)if(l=i[u],!hasOwnProperty.call(e,l))return!1;const c=r.get(t),f=r.get(e);if(c&&f)return c==e&&f==t;let p=!0;r.set(t,e),r.set(e,t);let v;for(;++u<s;){l=i[u];const b=t[l],E=e[l];if(!(b===E||n(b,E,r))){p=!1;break}v||(v=l=="constructor")}if(p&&!v){const b=t.constructor,E=e.constructor;b!=E&&"constructor"in t&&"constructor"in e&&!(typeof b=="function"&&b instanceof b&&typeof E=="function"&&E instanceof E)&&(p=!1)}return r.delete(t),r.delete(e),p},_w=(t,e,n)=>t===e?!0:t==null||e==null||!Ea(t)&&!Ea(e)?t!==t&&e!==e:ofe(t,e,_w,n),ofe=(t,e,n,r)=>{let i=Array.isArray(t);const s=Array.isArray(e);let o=i?Q_:Wo(t),a=s?Q_:Wo(e);o=o==fm?Uh:o,a=a==fm?Uh:a;let l=o==Uh;const u=a==Uh,c=o==a;if(c&&!l)return r||(r=new cd),i||sv(t)?O6(t,e,!1,n,r):ufe(t,e,o,n,r);const f=l&&hasOwnProperty.call(t,"__wrapped__"),p=u&&hasOwnProperty.call(e,"__wrapped__");if(f||p){const v=f?t.value():t,b=p?e.value():e;return r||(r=new cd),n(v,b,r)}return c?(r||(r=new cd),sfe(t,e,n,r)):!1},O6=(t,e,n,r,i)=>{const o=t.length,a=e.length;if(o!=a)return!1;const l=i.get(t),u=i.get(e);if(l&&u)return l==e&&u==t;let c=-1,f=!0;const p=n?new dm:void 0;for(i.set(t,e),i.set(e,t);++c<o;){const v=t[c],b=e[c];if(p){if(!afe(e,(E,P)=>{if(!lfe(p,P)&&(v===E||r(v,E,i)))return p.push(P)})){f=!1;break}}else if(!(v===b||r(v,b,i))){f=!1;break}}return i.delete(t),i.delete(e),f},afe=(t,e)=>{let n=-1;const r=t==null?0:t.length;for(;++n<r;)if(e(t[n],n,t))return!0;return!1},lfe=(t,e)=>t.has(e),e$=(t,e,n,r)=>!(t.byteLength!=e.byteLength||!n(new Uint8Array(t),new Uint8Array(e),r)),ufe=(t,e,n,r,i)=>{switch(n){case VP:return t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset?!1:(t=t.buffer,e=e.buffer,e$(t,e,r,i));case FP:return e$(t,e,r,i);case bw:case LP:case ww:return Xd(+t,+e);case Q5:return t.name==e.name&&t.message==e.message;case DP:case xw:return t==`${e}`;case tv:let s=T6;case nv:if(s||(s=Aw),t.size!=e.size)return!1;const o=i.get(t);if(o)return o==e;i.set(t,e);const a=O6(s(t),s(e),!0,r,i);return i.delete(t),a;case Sw:return Symbol.prototype.valueOf.call(t)==Symbol.prototype.valueOf.call(e)}return!1},T6=t=>{let e=-1,n=Array(t.size);return t.forEach((r,i)=>{n[++e]=[i,r]}),n},Aw=t=>{let e=-1;const n=new Array(t.size);return t.forEach(r=>{n[++e]=r}),n},KP=(t,e)=>{if(Array.isArray(t))return!1;const n=typeof t;return n==="number"||n==="boolean"||t==null||$d(t)?!0:Bce.test(t)||!Vce.test(t)||e!=null&&t in Object(e)},cfe=t=>{const e=[];return t.charCodeAt(0)===jce&&e.push(""),t.replace(Hce,(n,r,i,s)=>{let o=n;i?o=s.replace(zce,"$1"):r&&(o=r.trim()),e.push(o)}),e},yc=(t,e)=>Array.isArray(t)?t:KP(t,e)?[t]:cfe(`${t}`),ov=(t,e)=>{e=yc(e,t);let n=0;const r=e.length;for(;t!=null&&n<r;)t=t[bc(e[n])],n++;return n&&n==r?t:void 0};function ffe(t,e){if(t!==e){const n=t!==void 0,r=t===null,i=t===t,s=$d(t),o=e!==void 0,a=e===null,l=e===e,u=$d(e);if(!a&&!u&&!s&&t>e||s&&o&&l&&!a&&!u||r&&o&&l||!n&&l||!i)return 1;if(!r&&!s&&!u&&t<e||u&&n&&i&&!r&&!s||a&&n&&i||!o&&i||!l)return-1}return 0}function hfe(t,e,n){let r=-1;const i=t.criteria,s=e.criteria,o=i.length,a=n.length;for(;++r<o;){const l=r<a?n[r]:null,c=(l&&typeof l=="function"?l:ffe)(i[r],s[r]);if(c)return l&&typeof l!="function"?c*(l=="desc"?-1:1):c}return t.index-e.index}const M6=(t,e)=>{let n=(o,a)=>!!(o==null?0:o.length)&&o.indexOf(a)>-1,r=!0;const i=[],s=e.length;if(!t.length)return i;e.length>=UP&&(n=(o,a)=>o.has(a),r=!1,e=new dm(e));e:for(let o in t){let a=t[o];const l=a;if(a=a!==0?a:0,r&&l===l){let u=s;for(;u--;)if(e[u]===l)continue e;i.push(a)}else n(e,l)||i.push(a)}return i},bc=t=>{if(typeof t=="string"||$d(t))return t;const e=`${t}`;return e=="0"&&1/t==-1/0?"-0":e},ud=(t,e=!1,n=!1,r=!0,i,s,o,a)=>{let l;if(i&&(l=o?i(t,s,o,a):i(t)),l!==void 0)return l;if(!Nn(t))return t;const u=Array.isArray(t),c=Wo(t);if(u){if(l=efe(t),!e)return qP(t,l)}else{const b=typeof t=="function";if(c===Uh||c===fm||b&&!o){if(l=n||b?{}:k6(t),!e)return n?dfe(t,iv(t,Object.keys(t),l)):nfe(t,Object.assign(l,t))}else{if(b||!pce[c])return o?t:{};l=ife(t,c,e)}}a||(a=new cd);const f=a.get(t);if(f)return f;if(a.set(t,l),Qce(t))return t.forEach((b,E)=>{l.set(E,ud(b,e,n,r,i,E,t,a))}),l;if(Zce(t))return t.forEach(b=>{l.add(ud(b,e,n,r,i,b,t,a))}),l;if(sv(t))return l;const v=u?void 0:(r?n?P6:nA:n?I6:rv)(t);return(v||t).forEach((b,E)=>{v&&(E=b,b=t[E]),Zd(l,E,ud(b,e,n,r,i,E,t,a))}),l},dfe=(t,e)=>iv(t,C6(t),e),N6=(t,e)=>e.length<2?t:ov(t,e.slice(0,-1)),pfe=(t,e,n)=>{if(!Nn(t))return t;e=yc(e,t);const r=e.length,i=r-1;let s=-1,o=t;for(;o!=null&&++s<r;){const a=bc(e[s]);let l=n;if(s!=i){const u=o[a];l=void 0,l===void 0&&(l=Nn(u)?u:YP(e[s+1])?[]:{})}Zd(o,a,l),o=o[a]}return t},YP=(t,e)=>{const n=typeof t;return e=e??Number.MAX_SAFE_INTEGER,!!e&&(n==="number"||n!=="symbol"&&Uce.test(t))&&t>-1&&t%1==0&&t<e},gfe=(t,e)=>{e=yc(e,t),t=N6(t,e);const n=e[e.length-1];return t==null||delete t[bc(n)]},mfe=t=>{const e=typeof t;return e==="string"||e==="number"||e==="symbol"||e==="boolean"?t!=="__proto__":t===null},I6=t=>{const e=[];for(const n in t)e.push(n);return e},vfe=t=>{t=Object(t);const e={};for(const n in t)e[n]=t[n];return e},t$=(t,e)=>{if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]};function $6(t,e=!1){return(n,...r)=>{let i=-1,s=r.length,o=s>1?r[s-1]:void 0;const a=s>2?r[2]:void 0;for(o=t.length>3&&typeof o=="function"?(s--,o):e?(l,u)=>{if(Array.isArray(l)&&!Array.isArray(u))return u}:void 0,a&&Yb(r[0],r[1],a)&&(o=s<3?void 0:o,s=1),n=Object(n);++i<s;){const l=r[i];l&&t(n,l,i,o)}return n}}const JP=(t,e,n,r,i)=>{t!==e&&Lo(e,(s,o)=>{if(Nn(s))i||(i=new cd),yfe(t,e,o,n,JP,r,i);else{let a=r?r(t[o],s,`${o}`,t,e,i):void 0;a===void 0&&(a=s),rA(t,o,a)}})},yfe=(t,e,n,r,i,s,o)=>{const a=t$(t,n),l=t$(e,n),u=o.get(l);if(u){rA(t,n,u);return}let c=s?s(a,l,`${n}`,t,e,o):void 0,f=c===void 0;if(f){const p=Array.isArray(l),v=!p&&sv(l);c=l,p||v?Array.isArray(a)?c=a:Ea(a)&&Jo(a)?c=qP(a):v?(f=!1,c=A6(l,!0)):c=[]:Hr(l)||hm(l)?(c=a,hm(a)?c=vfe(a):(typeof a=="function"||!Nn(a))&&(c=k6(l))):f=!1}f&&(o.set(l,c),i(c,l,r,s,o),o.delete(l)),rA(t,n,c)},rA=(t,e,n)=>{(n!==void 0&&!Xd(t[e],n)||n===void 0&&!(e in t))&&Zd(t,e,n)};function bfe(t,e,n){const r=Object(t),i=n(t);let{length:s}=i,o=-1;for(;s--;){const a=i[++o];if(e(r[a],a,r)===!1)break}return t}const wfe=(t,e)=>t&&bfe(t,e,rv),XP=(t,e)=>{if(t==null)return t;if(!Jo(t))return wfe(t,e);const n=t.length,r=Object(t);let i=-1;for(;++i<n&&e(r[i],i,r)!==!1;);return t};function xfe(t){const e=t==null?0:t.length;return e?t[e-1]:void 0}const Sfe=Set&&1/Aw(new Set([void 0,-0]))[1]==1/0?t=>new Set(t):()=>{};function R6(t,e,n,r,i,s){return Nn(t)&&Nn(e)&&(s.set(e,t),JP(t,e,void 0,R6,s),s.delete(e)),t}function Efe(t,e,n){e.length?e=e.map(o=>Array.isArray(o)?a=>ov(a,o.length===1?o[0]:o):o):e=[o=>o];let r=-1,i=-1;const s=Jo(t)?new Array(t.length):[];return XP(t,o=>{const a=e.map(l=>l(o));s[++i]={criteria:a,index:++r,value:o}}),_fe(s,(o,a)=>hfe(o,a,n))}function _fe(t,e){let{length:n}=t;for(t.sort(e);n--;)t[n]=t[n].value;return t}function L6(t){return t===t&&!Nn(t)}function D6(t,e){return n=>n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}function F6(t,e){return t!=null&&jfe(t,e,Bfe)}function Afe(t,e){return KP(t)&&L6(e)?D6(bc(t),e):n=>{const r=ov(n,t);return r===void 0&&r===e?F6(n,t):_w(e,r)}}function kfe(t){const e=Cfe(t);return e.length===1&&e[0][2]?D6(e[0][0],e[0][1]):n=>n===t||Pfe(n,t,e)}function Cfe(t){const e=rv(t);let n=e.length;for(;n--;){const r=e[n],i=t[r];e[n]=[r,i,L6(i)]}return e}function Pfe(t,e,n,r){let i=n.length;const s=i,o=!r;if(t==null)return!s;let a,l;for(t=Object(t);i--;)if(a=n[i],o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1;for(;++i<s;){a=n[i];const u=a[0],c=t[u],f=a[1];if(o&&a[2]){if(c===void 0&&!(u in t))return!1}else{const p=new cd;if(r&&(l=r(c,f,u,t,e,p)),!(l===void 0?_w(f,c,p):l))return!1}}return!0}function Ofe(t){return KP(t)?Tfe(bc(t)):Mfe(t)}function Tfe(t){return e=>e==null?void 0:e[t]}function Mfe(t){return e=>ov(e,t)}function Nfe(t){return typeof t=="function"?t:t==null?e=>e:typeof t=="object"?Array.isArray(t)?Afe(t[0],t[1]):kfe(t):Ofe(t)}function kw(){const t=Nfe;return arguments.length?t(arguments[0]):t}const Ife=(t,e,n,r)=>{let i=-1;const s=t==null?0:t.length;for(r&&s&&(n=t[++i]);++i<s;)n=e(n,t[i],i,t);return n},$fe=(t,e,n,r,i)=>(i(t,(s,o,a)=>{n=r?(r=!1,s):e(n,s,o,a)}),n);function Rfe(t,e,n){const r=Array.isArray(t)?Ife:$fe,i=arguments.length<3;return r(t,e,n,i,XP)}const Lfe=t=>Array.isArray(t)||hm(t)||!!(t&&t[Symbol.isConcatSpreadable]);function V6(t,e,n,r,i){let s=-1;const o=t.length;for(n||(n=Lfe),i||(i=[]);++s<o;){var a=t[s];e>0&&n(a)?e>1?V6(a,e-1,n,r,i):i.push(...a):r||(i[i.length]=a)}return i}const hm=t=>Ea(t)&&Wo(t)=="[object Arguments]",Dfe=(t,e)=>Ffe(t,e,(n,r)=>F6(t,r)),Ffe=(t,e,n)=>{let r=-1;const i=e.length,s={};for(;++r<i;){const o=e[r],a=ov(t,o);n(a,o)&&pfe(s,yc(o,t),a)}return s},Vfe=t=>typeof t=="number"&&t>-1&&t%1==0&&t<=Number.MAX_SAFE_INTEGER,Bfe=(t,e)=>t!=null&&e in Object(t),jfe=(t,e,n)=>{e=yc(e,t);for(var r=-1,i=e.length,s=!1;++r<i;){var o=bc(e[r]);if(!(s=t!=null&&n(t,o)))break;t=t[o]}return s||++r!=i?s:(i=t==null?0:t.length,!!i&&Vfe(i)&&YP(o,i)&&(Array.isArray(t)||hm(t)))},zfe=t=>t.match(Gce),Hfe=t=>t.match($ce),Ufe=(t,e)=>e===void 0?(qce(t)?Hfe(t):zfe(t))||[]:t.match(e)||[],qfe=(t,e,n)=>{const{length:r}=t;return n=n===void 0?r:n,!e&&n>=r?t:t.slice(e,n)},Wfe=Gfe("toUpperCase");function Gfe(t){return e=>{if(!e)return"";const n=S6(e)?E6(e):void 0,r=n?n[0]:e[0],i=n?qfe(n,1).join(""):e.slice(1);return r[t]()+i}}let cd=class{constructor(e){const n=this.__data__=new US(e);this.size=n.size}clear(){this.__data__=new US,this.size=0}delete(e){const n=this.__data__,r=n.delete(e);return this.size=n.size,r}get(e){return this.__data__.get(e)}has(e){return this.__data__.has(e)}set(e,n){let r=this.__data__;if(r instanceof US){const i=r.__data__;if(i.length<UP-1)return i.push([e,n]),this.size=++r.size,this;r=this.__data__=new B6(i)}return r.set(e,n),this.size=r.size,this}};class US{constructor(e){let n=-1;const r=e==null?0:e.length;for(this.clear();++n<r;){const i=e[n];this.set(i[0],i[1])}}clear(){this.__data__=[],this.size=0}delete(e){const n=this.__data__,r=sy(n,e);if(r<0)return!1;const i=n.length-1;return r==i?n.pop():n.splice(r,1),--this.size,!0}get(e){const n=this.__data__,r=sy(n,e);return r<0?void 0:n[r][1]}has(e){return sy(this.__data__,e)>-1}set(e,n){const r=this.__data__,i=sy(r,e);return i<0?(++this.size,r.push([e,n])):r[i][1]=n,this}}class B6{constructor(e){let n=-1;const r=e==null?0:e.length;for(this.clear();++n<r;){const i=e[n];this.set(i[0],i[1])}}clear(){this.size=0,this.__data__={hash:new n$,map:new Map,string:new n$}}delete(e){const n=oy(this,e).delete(e);return this.size-=n?1:0,n}get(e){return oy(this,e).get(e)}has(e){return oy(this,e).has(e)}set(e,n){const r=oy(this,e),i=r.size;return r.set(e,n),this.size+=r.size==i?0:1,this}}class n${constructor(e){let n=-1;const r=e==null?0:e.length;for(this.clear();++n<r;){const i=e[n];this.set(i[0],i[1])}}clear(){this.__data__=Object.create(null),this.size=0}delete(e){const n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}get(e){const r=this.__data__[e];return r===tA?void 0:r}has(e){return this.__data__[e]!==void 0}set(e,n){const r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n===void 0?tA:n,this}}class dm{constructor(e){let n=-1;const r=e==null?0:e.length;for(this.__data__=new B6;++n<r;)this.add(e[n])}add(e){return this.__data__.set(e,tA),this}has(e){return this.__data__.has(e)}}dm.prototype.push=dm.prototype.add;const Kfe=function(t){var e=Object.prototype.toString;return t===!0||t===!1||!!t&&typeof t=="object"&&e.call(t)===bw},Nn=function(t){return!!t&&(typeof t=="object"||typeof t=="function")},$s=function(t){var e=Object.prototype.toString;return typeof t=="number"||!!t&&typeof t=="object"&&e.call(t)===ww},Gi=function(t){var e=Object.prototype.toString;return typeof t=="string"||!!t&&typeof t=="object"&&e.call(t)===xw},Mt=$6((t,e)=>{if(Ew(e)||Jo(e)){iv(e,rv(e),t);return}for(var n in e)hasOwnProperty.call(e,n)&&Zd(t,n,e[n])}),Yfe=(t,...e)=>{let n=-1,r=e.length;const i=r>2?e[2]:void 0;for(i&&Yb(e[0],e[1],i)&&(r=1);++n<r;){const s=e[n];if(s==null)continue;const o=Object.keys(s),a=o.length;let l=-1;for(;++l<a;){const u=o[l],c=t[u];(c===void 0||Xd(c,Object.prototype[u])&&!hasOwnProperty.call(t,u))&&(t[u]=s[u])}}return t},ca=Yfe,Jfe=function(...e){return e.push(void 0,R6),Wr.apply(void 0,e)},ZP=Jfe,ya=(t,e,...n)=>{let r=-1;const i=typeof e=="function",s=Jo(t)?new Array(t.length):[];return XP(t,o=>{s[++r]=i?e.apply(o,n):Xfe(o,e,...n)}),s},Xfe=(t,e,...n)=>{e=yc(e,t),t=N6(t,e);const r=t==null?t:t[bc(xfe(e))];return r==null?void 0:r.apply(t,n)},j6=(t,e,n)=>{let r=0,i=t==null?0:t.length;if(i==0)return 0;n=kw(n,2),e=n(e);const s=e!==e,o=e===null,a=$d(e),l=e===void 0;for(;r<i;){let u;const c=Math.floor((r+i)/2),f=n(t[c]),p=f!==void 0,v=f===null,b=f===f,E=$d(f);s?u=b:l?u=b&&p:o?u=b&&p&&!v:a?u=b&&p&&!v&&!E:v||E?u=!1:u=f<e,u?r=c+1:i=c}return Math.min(i,Wce)},av=(t,e)=>{let n=-1,r=(l,u)=>!!(l==null?0:l.length)&&l.indexOf(u)>-1;e=kw(e,2);let i=!0;const{length:s}=t,o=[];let a=o;if(s>=UP){const l=e?null:Sfe(t);if(l)return Aw(l);i=!1,r=(u,c)=>u.has(c),a=new dm}else a=e?[]:o;e:for(;++n<s;){let l=t[n];const u=e?e(l):l;if(l=l!==0?l:0,i&&u===u){let c=a.length;for(;c--;)if(a[c]===u)continue e;e&&a.push(u),o.push(l)}else r(a,u)||(a!==o&&a.push(u),o.push(l))}return o},ja=t=>ud(t),Ro=t=>ud(t,!0),Hu=t=>{if(t==null)return!0;if(Jo(t)&&(Array.isArray(t)||typeof t=="string"||typeof t.splice=="function"||sv(t)||hm(t)))return!t.length;const e=Wo(t);if(e=="[object Map]"||e=="[object Set]")return!t.size;if(Ew(t))return!Xce(t).length;for(const n in t)if(hasOwnProperty.call(t,n))return!1;return!0},qh=(t,e)=>_w(t,e),Yn=t=>typeof t=="function",Hr=t=>{if(!Ea(t)||Wo(t)!="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},gn=t=>{if(!t)return[];if(Jo(t))return Gi(t)?E6(t):qP(t);if(Symbol.iterator&&Symbol.iterator in Object(t)){const r=t[Symbol.iterator]();let i;const s=[];for(;!(i=r.next()).done;)s.push(i.value);return s}const e=Wo(t);return(e==tv?T6:e==nv?Aw:Jce)(t)};function Zfe(t,e,n){if(typeof t!="function")throw new TypeError("Expected a function");let r,i,s,o,a,l,u=0,c=!1,f=!1,p=!0;const v=!e&&e!==0&&window&&typeof window.requestAnimationFrame=="function";e=+e||0,Nn(n)&&(c=!!n.leading,f="maxWait"in n,s=f?Math.max(+n.maxWait||0,e):s,p="trailing"in n?!!n.trailing:p);function b(_){const M=r,D=i;return r=i=void 0,u=_,o=t.apply(D,M),o}function E(_,M){return v?(window.cancelAnimationFrame(a),window.requestAnimationFrame(_)):setTimeout(_,M)}function P(_){if(v)return window.cancelAnimationFrame(_);clearTimeout(_)}function S(_){return u=_,a=E(N,e),c?b(_):o}function A(_){const M=_-l,D=_-u,q=e-M;return f?Math.min(q,s-D):q}function I(_){const M=_-l,D=_-u;return l===void 0||M>=e||M<0||f&&D>=s}function N(){const _=Date.now();if(I(_))return x(_);a=E(N,A(_))}function x(_){return a=void 0,p&&r?b(_):(r=i=void 0,o)}function g(..._){const M=Date.now(),D=I(M);if(r=_,i=this,l=M,D){if(a===void 0)return S(l);if(f)return a=E(N,e),b(l)}return a===void 0&&(a=E(N,e)),o}return g.cancel=()=>{a!==void 0&&P(a),u=0,r=l=i=a=void 0},g.flush=()=>a===void 0?o:x(Date.now()),g.pending=()=>a!==void 0,g}const Qfe=(t,e)=>(e=kw(e,2),Rfe(t,(n,r,i)=>(i=e(r),hasOwnProperty.call(n,i)?n[i].push(r):Zd(n,i,[r]),n),{})),r$=(t,e=[])=>{if(t==null)return[];const n=e.length;return n>1&&Yb(t,e[0],e[1])?e=[]:n>2&&Yb(e[0],e[1],e[2])&&(e=[e[0]]),Array.isArray(e)||(e=[kw(e,2)]),Efe(t,e.flat(1),[])},ehe=t=>(t==null?0:t.length)?V6(t,1/0):[],i$=(t,...e)=>Jo(t)?M6(t,e):[],the=(t,...e)=>Ea(t)&&Jo(t)?M6(t,e.flat(1)):[],iA=(...t)=>{const e=t.flat(1);return av(e)},zl=(t,e)=>{if(t==null)return!1;typeof e=="string"&&(e=e.split("."));let n=-1,r=t;for(;++n<e.length;){if(!r||!hasOwnProperty.call(r,e[n]))return!1;r=r[e[n]]}return!0},Ur=(t,e,n)=>{e=yc(e,t);let r=-1,i=e.length;for(i||(i=1,t=void 0);++r<i;){let s=t==null?void 0:t[bc(e[r])];s===void 0&&(r=i,s=n),t=typeof s=="function"?s.call(t):s}return t},jf=(t,...e)=>{let n={};if(t==null)return n;let r=!1;e=e.flat(1).map(s=>(s=yc(s,t),r||(r=s.length>1),s)),iv(t,P6(t),n),r&&(n=ud(n,!0,!0,!0,s=>Hr(s)?void 0:s));let i=e.length;for(;i--;)gfe(n,e[i]);return n},z6=(t,...e)=>t==null?{}:Dfe(t,e.flat(1/0)),Lo=(t,e=n=>n)=>{let n=-1;const r=Object(t),i=Jo(t)?_6(t,!0):I6(t);let s=i.length;for(;s--;){const o=i[++n];if(e(r[o],o,r)===!1)break}},nhe=(t="")=>Ufe(`${t}`.replace(/['\u2019]/g,"")).reduce((e,n,r)=>(n=n.toLowerCase(),e+(r?Wfe(n):n)),"");let rhe=0;const ihe=(t="")=>{const e=++rhe;return`${t}`+e},Wr=$6((t,e,n,r)=>{JP(t,e,n,r)},!0),pa=function(t){return t&&t.toString().split(" ").map(function(e){return e.substr(0,il.classNamePrefix.length)!==il.classNamePrefix&&(e=il.classNamePrefix+e),e}).join(" ")},she=function(t){return t&&t.toString().split(" ").map(function(e){return e.substr(0,il.classNamePrefix.length)===il.classNamePrefix&&(e=e.substr(il.classNamePrefix.length)),e}).join(" ")},Jb=function(t,e){const n={},r={},i=De.namespace.svg,s=e||i,o=document.createDocumentFragment(),a=function(l,u,c){for(let f=0;f<l.length;f++){const p=l[f];if(typeof p=="string"){const N=document.createTextNode(p);u.appendChild(N);continue}if(!p.hasOwnProperty("tagName"))throw new Error("json-dom-parser: missing tagName");const v=p.tagName;let b;p.hasOwnProperty("namespaceURI")&&(c=p.namespaceURI),b=document.createElementNS(c,v);const E=c===i,P=E?De:xn,S=p.attributes;S&&P(b).attr(S);const A=p.style;if(A&&xn(b).css(A),p.hasOwnProperty("className")){const N=p.className;E?b.className.baseVal=N:b.className=N}if(p.hasOwnProperty("textContent")&&(b.textContent=p.textContent),p.hasOwnProperty("selector")){const N=p.selector;if(n[N])throw new Error("json-dom-parser: selector must be unique");n[N]=b,P(b).attr("joint-selector",N)}if(p.hasOwnProperty("groupSelector")){let N=p.groupSelector;Array.isArray(N)||(N=[N]);for(let x=0;x<N.length;x++){const g=N[x];let _=r[g];_||(_=r[g]=[]),_.push(b)}}u.appendChild(b);const I=p.children;Array.isArray(I)&&a(I,b,c)}};return a(t,o,s),{fragment:o,selectors:n,groupSelectors:r}},ay=function(t){let e=0;if(t.length===0)return e;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);e=(e<<5)-e+r,e=e&e}return e},pm=function(t,e,n){for(var r=Array.isArray(e)?e:e.split(n||"/"),i,s=0,o=r.length;s<o;)if(i=r[s++],Object(t)===t&&i in t)t=t[i];else return;return t},H6=function(t,e){return typeof e!="string"&&typeof e!="number"&&(e=String(e)),!(e==="constructor"&&typeof t[e]=="function"||e==="__proto__")},sA=function(t,e,n,r){const i=Array.isArray(e)?e:e.split(r||"/"),s=i.length-1;let o=t,a=0;for(;a<s;a++){const l=i[a];if(!H6(o,l))return t;o=o[l]||(o[l]={})}return o[i[s]]=n,t},s$=function(t,e,n){const r=Array.isArray(e)?e:e.split(n||"/"),i=r.length-1;let s=t,o=0;for(;o<i;o++){const a=r[o];if(!H6(s,a))return t;const l=s[a];if(!l)return t;s=l}return delete s[r[i]],t},ohe=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=Math.random()*16|0,n=t==="x"?e:e&3|8;return n.toString(16)})},Wh=function(t){return Wh.id=Wh.id||1,t===void 0?"j_"+Wh.id++:(t.id=t.id===void 0?"j_"+Wh.id++:t.id,t.id)},ahe=function(t){return t.replace(/[A-Z]/g,"-$&").toLowerCase()},Nr=function(t){if(t.normalized)return t;const{originalEvent:e,target:n}=t,r=e&&e.changedTouches&&e.changedTouches[0];if(r)for(let i in r)t[i]===void 0&&(t[i]=r[i]);if(n){const i=n.correspondingUseElement;i&&(t.target=i)}return t.normalized=!0,t},lhe=function(t){let i=0,s=0,o=0,a=0;return"detail"in t&&(s=t.detail),"wheelDelta"in t&&(s=-t.wheelDelta/120),"wheelDeltaY"in t&&(s=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(i=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(i=s,s=0),o="deltaX"in t?t.deltaX:i*10,a="deltaY"in t?t.deltaY:s*10,(o||a)&&t.deltaMode&&(t.deltaMode==1?(o*=40,a*=40):(o*=800,a*=800)),t.deltaX===0&&t.deltaY!==0&&t.shiftKey&&(o=a,a=0,i=s,s=0),o&&!i&&(i=o<1?-1:1),a&&!s&&(s=a<1?-1:1),{spinX:i,spinY:s,deltaX:o,deltaY:a}},uhe=function(t,e){return t>e?e:t<-e?-e:t},oA=function(){var t;if(typeof window<"u"&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),!t){var e=0;t=function(n){var r=new Date().getTime(),i=Math.max(0,16-(r-e)),s=setTimeout(function(){n(r+i)},i);return e=r+i,s}}return function(n,r,...i){return t(r!==void 0?n.bind(r,...i):n)}}(),aA=function(){var t,e=typeof window<"u";return e&&(t=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),t=t||clearTimeout,e?t.bind(window):t}(),Ni=function(t){return Gi(t)&&t.slice(-1)==="%"},che=function(t,e){function n(a){var l=new RegExp("(?:\\d+(?:\\.\\d+)*)("+a+")$").exec(t);return l?l[1]:null}var r=parseFloat(t);if(Number.isNaN(r))return null;var i={};i.value=r;var s;if(e==null)s="[A-Za-z]*";else if(Array.isArray(e)){if(e.length===0)return null;s=e.join("|")}else Gi(e)&&(s=e);var o=n(s);return o===null?null:(i.unit=o,i)},Xb=0;function fhe(t,e){const n=t.split(e);let r=1;for(let i=0,s=n.length-1;i<s;i++){const o=[];(i>0||n[0]!=="")&&o.push(Xb),o.push(e),(i<s-1||n[s]!=="")&&o.push(Xb),n.splice(r,0,...o),r+=o.length+1}return n.filter(i=>i!=="")}function o$(t,e){if(t===null)return e.getBBox().height;switch(t.unit){case"em":return e.getBBox().height*t.value;case"px":case"":return t.value}}const U6=function(t,e,n={},r={}){var i=e.width,s=e.height,o=r.svgDocument||De("svg").node,a=De("tspan").node,l=De("text").attr(n).append(a).node,u=document.createTextNode("");l.style.opacity=0,l.style.display="block",a.style.display="block",a.appendChild(u),o.appendChild(l),r.svgDocument||document.body.appendChild(o);const c=r.preserveSpaces,f=" ";var p=r.separator||f,v=r.eol||`
`,b=r.hyphen?new RegExp(r.hyphen):/[^\w\d]/,E=r.maxLineCount;$s(E)||(E=1/0);var P=t.split(p),S=[],A=[],I,N,x;c&&De(a).attr("xml:space","preserve");for(var g=0,_=0,M=P.length;g<M;g++){var D=P[g];if(!(!D&&!c)&&typeof D=="string"){var q=!1;if(v&&D.indexOf(v)>=0)if(D.length>1){const Ee=fhe(P[g],v);P.splice(g,1,...Ee),g--,M=P.length;continue}else{if(c&&typeof P[g-1]=="string"){P.splice(g,Xb,"",Xb),M+=2,g--;continue}A[++_]=!c||typeof P[g+1]=="string"?"":void 0,q=!0}if(!q){let Ee;if(c?Ee=A[_]!==void 0?A[_]+f+D:D:Ee=A[_]?A[_]+f+D:D,u.data=Ee,a.getComputedTextLength()<=i)A[_]=Ee,(I||N)&&(S[_++]=!0,I=0,N=0);else{if(!A[_]||I){var R=!!I;if(I=D.length-1,R||!I){if(!I){if(!A[_]){A=[];break}P.splice(g,2,D+P[g+1]),M--,S[_++]=!0,g--;continue}P[g]=D.substring(0,I),P[g+1]=D.substring(I)+(P[g+1]===void 0?"":P[g+1])}else{if(N)P.splice(g,2,P[g]+P[g+1]),N=0;else{var W=D.search(b);W>-1&&W!==D.length-1&&W!==0&&(N=W+1,I=0),P.splice(g,1,D.substring(0,N||I),D.substring(N||I)),M++}_&&!S[_-1]&&_--}(!c||A[_]!=="")&&g--;continue}_++,g--}}var G=null;if(A.length>E)G=E-1;else if(s!==void 0){if(x===void 0&&u.data!=="")if(n.lineHeight==="auto")x=o$({value:1.5,unit:"em"},l);else{const Ee=che(n.lineHeight,["em","px",""]);x=o$(Ee,l)}x*A.length>s&&(G=Math.floor(s/x)-1)}if(G!==null){A.splice(G+1);var Z=r.ellipsis;if(!Z||G<0)break;typeof Z!="string"&&(Z="");var de=A[G];if(!de&&!q)break;var be=de.length,_e,Te,Le;do{if(Te=de[be],_e=de.substring(0,be),Te?Te.match(p)&&(_e+=Te):(Le=typeof p=="string"?p:" ",_e+=Le),_e+=Z,u.data=_e,a.getComputedTextLength()<=i){A[G]=_e;break}be--}while(be>=0);break}}}return r.svgDocument?o.removeChild(l):document.body.removeChild(o),A.join(v)},hhe=function(t){var e=xn(xn.parseHTML("<div>"+t+"</div>",null,!1));return e.find("*").each(function(){var n=this;xn.each(n.attributes,function(){var r=this,i=r.name,s=r.value;(i.startsWith("on")||s.startsWith("javascript:")||s.startsWith("data:")||s.startsWith("vbscript:"))&&xn(n).removeAttr(i)})}),e.html()},dhe=function(t,e){var n=xn(t),r=n.map(function(){var i=this,s=i.parentNode,o=s.insertBefore(document.createTextNode(""),i.nextSibling);return function(){if(s===this)throw new Error("You can't sort elements if any one is a descendant of another.");s.insertBefore(this,o),s.removeChild(o)}});return Array.prototype.sort.call(n,e).each(function(i){r[i].call(this)})},zf=function(t){if(Object(t)!==t){var e=0;return isFinite(t)&&(e=+t),{top:e,right:e,bottom:e,left:e}}var n,r,i,s;return n=r=i=s=0,isFinite(t.vertical)&&(n=i=+t.vertical),isFinite(t.horizontal)&&(r=s=+t.horizontal),isFinite(t.top)&&(n=+t.top),isFinite(t.right)&&(r=+t.right),isFinite(t.bottom)&&(i=+t.bottom),isFinite(t.left)&&(s=+t.left),{top:n,right:r,bottom:i,left:s}},phe={linear:function(t){return t},quad:function(t){return t*t},cubic:function(t){return t*t*t},inout:function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)},exponential:function(t){return Math.pow(2,10*(t-1))},bounce:function(t){for(var e=0,n=1;;e+=n,n/=2)if(t>=(7-4*e)/11){var r=(11-6*e-11*t)/4;return-r*r+n*n}},reverse:function(t){return function(e){return 1-t(1-e)}},reflect:function(t){return function(e){return .5*(e<.5?t(2*e):2-t(2-2*e))}},clamp:function(t,e,n){return e=e||0,n=n||1,function(r){var i=t(r);return i<e?e:i>n?n:i}},back:function(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}},elastic:function(t){return t||(t=1.5),function(e){return Math.pow(2,10*(e-1))*Math.cos(20*Math.PI*t/3*e)}}},q6={number:function(t,e){var n=e-t;return function(r){return t+n*r}},object:function(t,e){var n=Object.keys(t);return function(r){var i,s,o={};for(i=n.length-1;i!=-1;i--)s=n[i],o[s]=t[s]+(e[s]-t[s])*r;return o}},hexColor:function(t,e){var n=parseInt(t.slice(1),16),r=parseInt(e.slice(1),16),i=n&255,s=(r&255)-i,o=n&65280,a=(r&65280)-o,l=n&16711680,u=(r&16711680)-l;return function(c){var f=i+s*c&255,p=o+a*c&65280,v=l+u*c&16711680;return"#"+(1<<24|f|p|v).toString(16).slice(1)}},unit:function(t,e){var n=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,r=n.exec(t),i=n.exec(e),s=i[1].indexOf("."),o=s>0?i[1].length-s-1:0;t=+r[1];var a=+i[1]-t,l=r[2];return function(u){return(t+a*u).toFixed(o)+l}}},ghe={outline:function(t){var e='<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${outerRadius}" /><feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${innerRadius}" /><feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/><feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/><feMerge><feMergeNode in="outline"/><feMergeNode in="SourceGraphic"/></feMerge></filter>',n=Number.isFinite(t.margin)?t.margin:2,r=Number.isFinite(t.width)?t.width:1;return os(e)({color:t.color||"blue",opacity:Number.isFinite(t.opacity)?t.opacity:1,outerRadius:n+r,innerRadius:n})},highlight:function(t){var e='<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${width}"/><feComposite result="composed" in="colored" in2="morphed" operator="in"/><feGaussianBlur result="blured" in="composed" stdDeviation="${blur}"/><feBlend in="SourceGraphic" in2="blured" mode="normal"/></filter>';return os(e)({color:t.color||"red",width:Number.isFinite(t.width)?t.width:1,blur:Number.isFinite(t.blur)?t.blur:0,opacity:Number.isFinite(t.opacity)?t.opacity:1})},blur:function(t){var e=Number.isFinite(t.x)?t.x:2;return os('<filter><feGaussianBlur stdDeviation="${stdDeviation}"/></filter>')({stdDeviation:Number.isFinite(t.y)?[e,t.y]:e})},dropShadow:function(t){var e="SVGFEDropShadowElement"in window?'<filter><feDropShadow stdDeviation="${blur}" dx="${dx}" dy="${dy}" flood-color="${color}" flood-opacity="${opacity}"/></filter>':'<filter><feGaussianBlur in="SourceAlpha" stdDeviation="${blur}"/><feOffset dx="${dx}" dy="${dy}" result="offsetblur"/><feFlood flood-color="${color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="${opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';return os(e)({dx:t.dx||0,dy:t.dy||0,opacity:Number.isFinite(t.opacity)?t.opacity:1,color:t.color||"black",blur:Number.isFinite(t.blur)?t.blur:4})},grayscale:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return os('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0"/></filter>')({a:.2126+.7874*(1-e),b:.7152-.7152*(1-e),c:.0722-.0722*(1-e),d:.2126-.2126*(1-e),e:.7152+.2848*(1-e),f:.0722-.0722*(1-e),g:.2126-.2126*(1-e),h:.0722+.9278*(1-e)})},sepia:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return os('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0"/></filter>')({a:.393+.607*(1-e),b:.769-.769*(1-e),c:.189-.189*(1-e),d:.349-.349*(1-e),e:.686+.314*(1-e),f:.168-.168*(1-e),g:.272-.272*(1-e),h:.534-.534*(1-e),i:.131+.869*(1-e)})},saturate:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return os('<filter><feColorMatrix type="saturate" values="${amount}"/></filter>')({amount:1-e})},hueRotate:function(t){return os('<filter><feColorMatrix type="hueRotate" values="${angle}"/></filter>')({angle:t.angle||0})},invert:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return os('<filter><feComponentTransfer><feFuncR type="table" tableValues="${amount} ${amount2}"/><feFuncG type="table" tableValues="${amount} ${amount2}"/><feFuncB type="table" tableValues="${amount} ${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:1-e})},brightness:function(t){return os('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}"/><feFuncG type="linear" slope="${amount}"/><feFuncB type="linear" slope="${amount}"/></feComponentTransfer></filter>')({amount:Number.isFinite(t.amount)?t.amount:1})},contrast:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return os('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}" intercept="${amount2}"/><feFuncG type="linear" slope="${amount}" intercept="${amount2}"/><feFuncB type="linear" slope="${amount}" intercept="${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:.5-e/2})}},os=function(t){var e=/<%= ([^ ]+) %>|\$\{ ?([^{} ]+) ?\}|\{\{([^{} ]+)\}\}/g;return function(n){return n=n||{},t.replace(e,function(r){for(var i=Array.from(arguments),s=i.slice(1,4).find(function(l){return!!l}),o=s.split("."),a=n[o.shift()];a!==void 0&&o.length;)a=a[o.shift()];return a!==void 0?a:""})}},jp=function(){};function W6(t){t=av(t);const e=gn(t).reduce(function(n,r){return n[r.id]=r.clone(),n},{});return gn(t).forEach(function(n){const r=e[n.id];if(r.isLink()){const o=r.source(),a=r.target();o.id&&e[o.id]&&r.prop("source/id",e[o.id].id),a.id&&e[a.id]&&r.prop("target/id",e[a.id].id)}const i=n.get("parent");i&&e[i]&&r.set("parent",e[i].id);const s=gn(n.get("embeds")).reduce(function(o,a){return e[a]&&o.push(e[a].id),o},[]);Hu(s)||r.set("embeds",s)}),e}const mhe=["checked","selected","disabled","readOnly","contentEditable","value","indeterminate"],vhe=mhe.reduce((t,e)=>(t[e]=!0,t),{}),yhe={qualify:function(t){return Hr(t)},set:function(t,e,n){Object.keys(t).forEach(function(r){if(vhe[r]&&r in n){const i=t[r];n.tagName==="SELECT"&&Array.isArray(i)?Array.from(n.options).forEach(function(s,o){s.selected=i.includes(s.value)}):n[r]=i}})}},bhe=yhe;function Ou(t,e){return function(n,r){var i=Ni(n);n=parseFloat(n),i&&(n/=100);var s={};if(isFinite(n)){var o=i||n>=0&&n<=1?n*r[e]:Math.max(n+r[e],0);s[t]=o}return s}}function ly(t,e,n){return function(r,i){var s=Ni(r);r=parseFloat(r),s&&(r/=100);var o;if(isFinite(r)){var a=i[n]();s||r>0&&r<1?o=a[t]+i[e]*r:o=a[t]+r}var l=fe();return l[t]=o||0,l}}function a$(t,e,n){return function(r,i){var s;r==="middle"?s=i[e]/2:r===n?s=i[e]:isFinite(r)?s=r>-1&&r<1?-i[e]*r:-r:Ni(r)?s=i[e]*parseFloat(r)/100:s=0;var o=fe();return o[t]=-(i[t]+s),o}}function G6(t,e){var n="joint-shape",r=e&&e.resetOffset;return function(i,s,o){var a=xn(o),l=a.data(n);if(!l||l.value!==i){var u=t(i);l={value:i,shape:u,shapeBBox:u.bbox()},a.data(n,l)}var c=l.shape.clone(),f=l.shapeBBox.clone(),p=f.origin(),v=s.origin();f.x=v.x,f.y=v.y;var b=s.maxRectScaleToFit(f,v),E=f.width===0||s.width===0?1:b.sx,P=f.height===0||s.height===0?1:b.sy;return c.scale(E,P,p),r&&c.translate(-p.x,-p.y),c}}function l$(t){function e(r){return new wt(De.normalizePathData(r))}var n=G6(e,t);return function(r,i,s){var o=n(r,i,s);return{d:o.serialize()}}}function u$(t){var e=G6(rr,t);return function(n,r,i){var s=e(n,r,i);return{points:s.serialize()}}}function uy(t,e){var n=new fe(1,0);return function(r){var i,s,o=this[t](r);return o?(s=e.rotate?o.vector().vectorAngle(n):0,i=o.start):(i=this.path.start,s=0),s===0?{transform:"translate("+i.x+","+i.y+")"}:{transform:"translate("+i.x+","+i.y+") rotate("+s+")"}}}function c$(t){return function(n,r,i){const s=De(i);s.attr(t)!==n&&s.attr(t,n)}}function kh(t,e,n){return n.text!==void 0}function zp(){return this.model.isLink()}function qS(t){var e={},n=t.stroke;typeof n=="string"&&(e.stroke=n,e.fill=n);var r=t.strokeOpacity;return r===void 0&&(r=t["stroke-opacity"]),r===void 0&&(r=t.opacity),r!==void 0&&(e["stroke-opacity"]=r,e["fill-opacity"]=r),e}function f$(t){const{paper:e}=this;return`url(#${t.type==="pattern"?e.definePattern(t):e.defineGradient(t)})`}const Yt={xlinkShow:{set:"xlink:show"},xlinkRole:{set:"xlink:role"},xlinkType:{set:"xlink:type"},xlinkArcrole:{set:"xlink:arcrole"},xlinkTitle:{set:"xlink:title"},xlinkActuate:{set:"xlink:actuate"},xmlSpace:{set:"xml:space"},xmlBase:{set:"xml:base"},xmlLang:{set:"xml:lang"},preserveAspectRatio:{set:"preserveAspectRatio"},requiredExtension:{set:"requiredExtension"},requiredFeatures:{set:"requiredFeatures"},systemLanguage:{set:"systemLanguage"},externalResourcesRequired:{set:"externalResourceRequired"},href:{set:c$("href")},xlinkHref:{set:c$("xlink:href")},filter:{qualify:Hr,set:function(t){return"url(#"+this.paper.defineFilter(t)+")"}},fill:{qualify:Hr,set:f$},stroke:{qualify:Hr,set:f$},sourceMarker:{qualify:Hr,set:function(t,e,n,r){return t=Mt(qS(r),t),{"marker-start":"url(#"+this.paper.defineMarker(t)+")"}}},targetMarker:{qualify:Hr,set:function(t,e,n,r){return t=Mt(qS(r),{transform:"rotate(180)"},t),{"marker-end":"url(#"+this.paper.defineMarker(t)+")"}}},vertexMarker:{qualify:Hr,set:function(t,e,n,r){return t=Mt(qS(r),t),{"marker-mid":"url(#"+this.paper.defineMarker(t)+")"}}},text:{qualify:function(t,e,n){return!n.textWrap||!Hr(n.textWrap)},set:function(t,e,n,r){var i=xn(n),s="joint-text",o=i.data(s),a=z6(r,"lineHeight","annotations","textPath","x","textVerticalAnchor","eol","displayEmpty");const{x:l}=a;Bo(l)&&(a.x=jo(l,e));let u=r["font-size"]||r.fontSize;Bo(u)&&(u=jo(u,e));var c=a.fontSize=u,f=JSON.stringify([t,a]);if(o===void 0||o!==f){c&&n.setAttribute("font-size",c);var p=a.textPath;if(Nn(p)){var v=p.selector;if(typeof v=="string"){var b=this.findBySelector(v)[0];b instanceof SVGPathElement&&(a.textPath=Mt({"xlink:href":"#"+b.id},p))}}De(n).text(""+t,a),i.data(s,f)}}},textWrap:{qualify:Hr,set:function(t,e,n,r){var i={},s=t.width||0;Ni(s)?i.width=e.width*parseFloat(s)/100:Bo(s)?i.width=Number(jo(s,e)):t.width===null?i.width=1/0:s<=0?i.width=e.width+s:i.width=s;var o=t.height||0;Ni(o)?i.height=e.height*parseFloat(o)/100:Bo(o)?i.height=Number(jo(o,e)):t.height===null||(o<=0?i.height=e.height+o:i.height=o);var a,l=t.text;if(l===void 0&&(l=r.text),l!==void 0){const u=t.breakText||U6,c=r["font-size"]||r.fontSize;a=u(""+l,i,{"font-weight":r["font-weight"]||r.fontWeight,"font-size":Bo(c)?jo(c,e):c,"font-family":r["font-family"]||r.fontFamily,lineHeight:r.lineHeight,"letter-spacing":"letter-spacing"in r?r["letter-spacing"]:r.letterSpacing},{svgDocument:this.paper.svg,ellipsis:t.ellipsis,hyphen:t.hyphen,maxLineCount:t.maxLineCount,preserveSpaces:t.preserveSpaces})}else a="";Yt.text.set.call(this,a,e,n,r)}},title:{qualify:function(t,e){return e instanceof SVGElement},set:function(t,e,n){var r=xn(n),i="joint-title",s=r.data(i);if(s===void 0||s!==t){if(r.data(i,t),n.tagName==="title"){n.textContent=t;return}var o=n.firstElementChild;if(o&&o.tagName==="title")o.textContent=t;else{var a=document.createElementNS(n.namespaceURI,"title");a.textContent=t,n.insertBefore(a,o)}}}},lineHeight:{qualify:kh},textVerticalAnchor:{qualify:kh},textPath:{qualify:kh},annotations:{qualify:kh},eol:{qualify:kh},displayEmpty:{qualify:kh},port:{set:function(t){return t===null||t.id===void 0?t:t.id}},style:{qualify:Hr,set:function(t,e,n){xn(n).css(t)}},html:{set:function(t,e,n){xn(n).html(t+"")}},props:bhe,ref:{},refX:{position:ly("x","width","origin")},refY:{position:ly("y","height","origin")},refDx:{position:ly("x","width","corner")},refDy:{position:ly("y","height","corner")},refWidth:{set:Ou("width","width")},refHeight:{set:Ou("height","height")},refRx:{set:Ou("rx","width")},refRy:{set:Ou("ry","height")},refRInscribed:{set:function(t){var e=Ou(t,"width"),n=Ou(t,"height");return function(r,i){var s=i.height>i.width?e:n;return s(r,i)}}("r")},refRCircumscribed:{set:function(t,e){var n=Ni(t);t=parseFloat(t),n&&(t/=100);var r=Math.sqrt(e.height*e.height+e.width*e.width),i;return isFinite(t)&&(n||t>=0&&t<=1?i=t*r:i=Math.max(t+r,0)),{r:i}}},refCx:{set:Ou("cx","width")},refCy:{set:Ou("cy","height")},xAlignment:{offset:a$("x","width","right")},yAlignment:{offset:a$("y","height","bottom")},resetOffset:{offset:function(t,e){return t?{x:-e.x,y:-e.y}:{x:0,y:0}}},refDResetOffset:{set:l$({resetOffset:!0})},refDKeepOffset:{set:l$({resetOffset:!1})},refPointsResetOffset:{set:u$({resetOffset:!0})},refPointsKeepOffset:{set:u$({resetOffset:!1})},connection:{qualify:zp,set:function({stubs:t=0}){let e;if(isFinite(t)&&t!==0){let n;t<0?n=(this.getConnectionLength()+t)/2:n=t;const r=this.getConnection(),i=this.getConnectionSubdivisions(),s=r.divideAtLength(n,{segmentSubdivisions:i}),o=r.divideAtLength(-n,{segmentSubdivisions:i});s&&o&&(e=`${s[0].serialize()} ${o[1].serialize()}`)}return{d:e||this.getSerializedConnection()}}},atConnectionLengthKeepGradient:{qualify:zp,set:uy("getTangentAtLength",{rotate:!0})},atConnectionLengthIgnoreGradient:{qualify:zp,set:uy("getTangentAtLength",{rotate:!1})},atConnectionRatioKeepGradient:{qualify:zp,set:uy("getTangentAtRatio",{rotate:!0})},atConnectionRatioIgnoreGradient:{qualify:zp,set:uy("getTangentAtRatio",{rotate:!1})}};Yt["xlink:href"]=Yt.xlinkHref;["transform","d","points","cx","cy","x1","x2","y1","y2","x","y","dx","dy"].forEach(t=>{Yt[t]={qualify:Bo,set:function(n,r){return{[t]:jo(n,r)}}}});["width","height","r","rx","ry","font-size","stroke-width"].forEach(t=>{Yt[t]={qualify:Bo,set:function(n,r){return{[t]:Math.max(0,jo(n,r))}}}});Yt.refR=Yt.refRInscribed;Yt.refD=Yt.refDResetOffset;Yt.refPoints=Yt.refPointsResetOffset;Yt.atConnectionLength=Yt.atConnectionLengthKeepGradient;Yt.atConnectionRatio=Yt.atConnectionRatioKeepGradient;Yt.fontSize=Yt["font-size"];Yt.strokeWidth=Yt["stroke-width"];Yt.refX2=Yt.refX;Yt.refY2=Yt.refY;Yt.refWidth2=Yt.refWidth;Yt.refHeight2=Yt.refHeight;Yt["ref-x"]=Yt.refX;Yt["ref-y"]=Yt.refY;Yt["ref-dy"]=Yt.refDy;Yt["ref-dx"]=Yt.refDx;Yt["ref-width"]=Yt.refWidth;Yt["ref-height"]=Yt.refHeight;Yt["x-alignment"]=Yt.xAlignment;Yt["y-alignment"]=Yt.yAlignment;const K6=Yt,sl=Ui.Model.extend({constructor:function(t,e){var n,r=t||{};typeof this.preinitialize=="function"&&this.preinitialize.apply(this,arguments),this.cid=ihe("c"),this.attributes={},e&&e.collection&&(this.collection=e.collection),e&&e.parse&&(r=this.parse(r,e)||{}),(n=Ur(this,"defaults"))&&(r=Wr({},n,r)),this.set(r,e),this.changed={},this.initialize.apply(this,arguments)},translate:function(t,e,n){throw new Error("Must define a translate() method.")},toJSON:function(){const e=Ur(this.constructor.prototype,"defaults").attrs||{},n=this.attributes.attrs,r={};Lo(n,function(s,o){const a=e[o];Lo(s,function(l,u){Nn(l)&&!Array.isArray(l)?Lo(l,function(c,f){(!a||!a[u]||!qh(a[u][f],c))&&(r[o]=r[o]||{},(r[o][u]||(r[o][u]={}))[f]=c)}):(!a||!qh(a[u],l))&&(r[o]=r[o]||{},r[o][u]=l)})});const i=Ro(jf(this.attributes,"attrs"));return i.attrs=r,i},initialize:function(t){const e=this.getIdAttribute();(!t||t[e]===void 0)&&this.set(e,this.generateId(),{silent:!0}),this._transitionIds={},this._scheduledTransitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},getIdAttribute:function(){return this.idAttribute||"id"},generateId:function(){return ohe()},processPorts:function(){var t=this.ports,e={};Lo(this.get("attrs"),function(s,o){s&&s.port&&(s.port.id!==void 0?e[s.port.id]=s.port:e[s.port]={id:s.port})});var n={};if(Lo(t,function(s,o){e[o]||(n[o]=!0)}),this.graph&&!Hu(n)){var r=this.graph.getConnectedLinks(this,{inbound:!0});r.forEach(function(s){n[s.get("target").port]&&s.remove()});var i=this.graph.getConnectedLinks(this,{outbound:!0});i.forEach(function(s){n[s.get("source").port]&&s.remove()})}this.ports=e},remove:function(t={}){const{graph:e,collection:n}=this;if(!e)return n&&n.remove(this,t),this;e.startBatch("remove");const r=this.getParentCell();r&&r.unembed(this,t);const i=this.getEmbeddedCells();for(let s=0,o=i.length;s<o;s++){const a=i[s];a&&a.remove(t)}return this.trigger("remove",this,e.attributes.cells,t),e.stopBatch("remove"),this},toFront:function(t){var e=this.graph;if(e){t=t||{};let n;t.deep?(n=this.getEmbeddedCells({deep:!0,breadthFirst:t.breadthFirst!==!1}),n.unshift(this)):n=[this];const r=r$(n,l=>l.z());let s=e.maxZIndex()-n.length+1;const o=e.get("cells");let a=o.indexOf(this)!==o.length-n.length;a||(a=r.some(function(l,u){return l.z()!==s+u})),a&&(this.startBatch("to-front"),s=s+n.length,r.forEach(function(l,u){l.set("z",s+u,t)}),this.stopBatch("to-front"))}return this},toBack:function(t){var e=this.graph;if(e){t=t||{};let r;t.deep?(r=this.getEmbeddedCells({deep:!0,breadthFirst:t.breadthFirst!==!1}),r.unshift(this)):r=[this];const i=r$(r,a=>a.z());let s=e.minZIndex();var n=e.get("cells");let o=n.indexOf(this)!==0;o||(o=i.some(function(a,l){return a.z()!==s+l})),o&&(this.startBatch("to-back"),s-=r.length,i.forEach(function(a,l){a.set("z",s+l,t)}),this.stopBatch("to-back"))}return this},parent:function(t,e){return t===void 0?this.get("parent"):this.set("parent",t,e)},embed:function(t,e){const n=Array.isArray(t)?t:[t];if(!this.canEmbed(n))throw new Error("Recursive embedding not allowed.");if(n.some(r=>r.isEmbedded()&&this.id!==r.parent()))throw new Error("Embedding of already embedded cells is not allowed.");return this._embedCells(n,e),this},unembed:function(t,e){const n=Array.isArray(t)?t:[t];return this._unembedCells(n,e),this},canEmbed:function(t){return(Array.isArray(t)?t:[t]).every(n=>this!==n&&!this.isEmbeddedIn(n))},_embedCells:function(t,e){const n="embed";this.startBatch(n);const r=Mt([],this.get("embeds"));t.forEach(i=>{r[i.isLink()?"unshift":"push"](i.id),i.parent(this.id,e)}),this.set("embeds",av(r),e),this.stopBatch(n)},_unembedCells:function(t,e){const n="unembed";this.startBatch(n),t.forEach(r=>r.unset("parent",e)),this.set("embeds",i$(this.get("embeds"),...t.map(r=>r.id)),e),this.stopBatch(n)},getParentCell:function(){var t=this.parent(),e=this.graph;return t&&e&&e.getCell(t)||null},getAncestors:function(){var t=[];if(!this.graph)return t;for(var e=this.getParentCell();e;)t.push(e),e=e.getParentCell();return t},getEmbeddedCells:function(t){if(t=t||{},this.graph){var e;if(t.deep)if(t.breadthFirst){e=[];for(var n=this.getEmbeddedCells();n.length>0;){var r=n.shift();e.push(r),n.push.apply(n,r.getEmbeddedCells())}}else e=this.getEmbeddedCells(),e.forEach(function(i){e.push.apply(e,i.getEmbeddedCells(t))});else e=gn(this.get("embeds")).map(this.graph.getCell,this.graph);return e}return[]},isEmbeddedIn:function(t,e){var n=Gi(t)?t:t.id,r=this.parent();if(e=Mt({deep:!0},e),this.graph&&e.deep){for(;r;){if(r===n)return!0;r=this.graph.getCell(r).parent()}return!1}else return r===n},isEmbedded:function(){return!!this.parent()},clone:function(t){if(t=t||{},t.deep)return gn(W6([this].concat(this.getEmbeddedCells({deep:!0}))));var e=Ui.Model.prototype.clone.apply(this,arguments);return e.set(this.getIdAttribute(),this.generateId()),e.unset("embeds"),e.unset("parent"),e},prop:function(t,e,n){var r="/",i=Gi(t);if(i||Array.isArray(t))if(arguments.length>1){var s,o;i?(s=t,o=s.split("/")):(s=t.join(r),o=t.slice());var a=o[0],l=o.length;const A=n||{};A.propertyPath=s,A.propertyValue=e,A.propertyPathArray=o,"rewrite"in A||(A.rewrite=!1);for(var u={},c=u,f=a,p=1;p<l;p++){var v=o[p],b=Number.isFinite(i?Number(v):v);c=c[f]=b?[]:{},f=v}u=sA(u,o,e,"/");var E=Wr({},this.attributes);A.rewrite&&s$(E,s,"/");var P=Wr(E,u);return this.set(a,P[a],A)}else return pm(this.attributes,t,r);const S=e||{};return S.propertyPath=null,S.propertyValue=t,S.propertyPathArray=[],"rewrite"in S||(S.rewrite=!1),this.set(Wr({},this.attributes,t),S)},removeProp:function(t,e){e=e||{};var n=Array.isArray(t)?t:t.split("/"),r=n[0];if(r==="attrs"&&(e.dirty=!0),n.length===1)return this.unset(t,e);var i=n.slice(1),s=this.get(r);return s==null?this:(s=Ro(s),s$(s,i,"/"),this.set(r,s,e))},attr:function(t,e,n){var r=Array.from(arguments);return r.length===0?this.get("attrs"):(Array.isArray(t)?r[0]=["attrs"].concat(t):Gi(t)?r[0]="attrs/"+t:r[0]={attrs:t},this.prop.apply(this,r))},removeAttr:function(t,e){return Array.isArray(t)?this.removeProp(["attrs"].concat(t)):this.removeProp("attrs/"+t,e)},transition:function(t,e,n,r){r=r||"/";var i={duration:100,delay:10,timingFunction:phe.linear,valueFunction:q6.number};n=Mt(i,n);var s=0,o,a=(function(f){var p,v,b;s=s||f,f-=s,v=f/n.duration,v<1?this._transitionIds[t]=p=oA(a):(v=1,delete this._transitionIds[t]),b=o(n.timingFunction(v)),n.transitionId=p,this.prop(t,b,n),p||this.trigger("transition:end",this,t)}).bind(this);const{_scheduledTransitionIds:l}=this;let u;var c=f=>{l[t]&&(l[t]=i$(l[t],u),l[t].length===0&&delete l[t]),this.stopPendingTransitions(t,r),o=n.valueFunction(pm(this.attributes,t,r),e),this._transitionIds[t]=oA(f),this.trigger("transition:start",this,t)};return u=setTimeout(c,n.delay,a),l[t]||(l[t]=[]),l[t].push(u),u},getTransitions:function(){return iA(Object.keys(this._transitionIds),Object.keys(this._scheduledTransitionIds))},stopScheduledTransitions:function(t,e="/"){const{_scheduledTransitionIds:n={}}=this;let r=Object.keys(n);if(t){const i=t.split(e);r=r.filter(s=>qh(i,s.split(e).slice(0,i.length)))}return r.forEach(i=>{n[i].forEach(o=>clearTimeout(o)),delete n[i]}),this},stopPendingTransitions(t,e="/"){const{_transitionIds:n={}}=this;let r=Object.keys(n);if(t){const i=t.split(e);r=r.filter(s=>qh(i,s.split(e).slice(0,i.length)))}r.forEach(i=>{const s=n[i];aA(s),delete n[i],this.trigger("transition:end",this,i)})},stopTransitions:function(t,e="/"){return this.stopScheduledTransitions(t,e),this.stopPendingTransitions(t,e),this},addTo:function(t,e){return t.addCell(this,e),this},findView:function(t){return t.findViewByModel(this)},isElement:function(){return!1},isLink:function(){return!1},startBatch:function(t,e){return this.graph&&this.graph.startBatch(t,Mt({},e,{cell:this})),this},stopBatch:function(t,e){return this.graph&&this.graph.stopBatch(t,Mt({},e,{cell:this})),this},getChangeFlag:function(t){var e=0;if(!t)return e;for(var n in t)!t.hasOwnProperty(n)||!this.hasChanged(n)||(e|=t[n]);return e},angle:function(){return 0},position:function(){return new fe(0,0)},z:function(){return this.get("z")||0},getPointFromConnectedLink:function(){return new fe},getBBox:function(){return new st(0,0,0,0)},getPointRotatedAroundCenter(t,e,n){const r=new fe(e,n);return t&&r.rotate(this.getBBox().center(),t),r},getAbsolutePointFromRelative(t,e){return this.getPointRotatedAroundCenter(-this.angle(),this.position().offset(t,e))},getRelativePointFromAbsolute(t,e){return this.getPointRotatedAroundCenter(this.angle(),t,e).difference(this.position())}},{getAttributeDefinition:function(t){var e=this.attributes,n=K6;return e&&e[t]||n[t]},define:function(t,e,n,r){n=Mt({defaults:ZP({type:t},e,this.prototype.defaults)},n);var i=this.extend(n,r);return typeof joint<"u"&&zl(joint,"shapes")&&sA(joint.shapes,t,i,"."),i}}),whe=function(t,e,n){if(Gi(n)){if(!lA[n])throw new Error('Unknown wrapper: "'+n+'"');n=lA[n]}if(!Yn(n))throw new Error("Wrapper must be a function.");gn(e).forEach(function(r){t[r]=n(t[r])})},lA={cells:function(t){return function(){var e=Array.from(arguments),n=e.length,r=n>0&&e[0]||[],i=n>1&&e[n-1]||{};return Array.isArray(r)||(i instanceof sl?r=e:r instanceof sl&&(e.length>1&&e.pop(),r=e)),i instanceof sl&&(i={}),t.call(this,r,i)}}},Ir={TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left",TOP_LEFT:"top-left",TOP_RIGHT:"top-right",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",CENTER:"center"};function Y6(t,e){const n=new st(t);switch(e){case void 0:throw new Error("Position required");case Ir.LEFT:case"leftMiddle":return n.leftMiddle();case Ir.RIGHT:case"rightMiddle":return n.rightMiddle();case Ir.TOP:case"topMiddle":return n.topMiddle();case Ir.BOTTOM:case"bottomMiddle":return n.bottomMiddle();case Ir.TOP_LEFT:case"topLeft":case"origin":return n.topLeft();case Ir.TOP_RIGHT:case"topRight":return n.topRight();case Ir.BOTTOM_LEFT:case"bottomLeft":return n.bottomLeft();case Ir.BOTTOM_RIGHT:case"bottomRight":case"corner":return n.bottomRight();case Ir.CENTER:return n.center();default:throw new Error(`Unknown position: ${e}`)}}function J6(t,e,n){var r=t.toJSON();return r.angle=e||0,ca({},n,r)}function lv(t,e,n,r){return t.map(function(i,s,o){var a=this.pointAt((s+.5)/o.length);return(i.dx||i.dy)&&a.offset(i.dx||0,i.dy||0),J6(a.round(),0,QP(r,i))},Ef(e,n))}function X6(t,e,n,r){var i=e.center(),s=e.width/e.height,o=e.topMiddle(),a=ds.fromRect(e);return t.map(function(l,u,c){var f=n+r(u,c.length),p=o.clone().rotate(i,-f).scale(s,1,i),v=l.compensateRotation?-a.tangentTheta(p):0;return(l.dx||l.dy)&&p.offset(l.dx||0,l.dy||0),l.dr&&p.move(i,l.dr),J6(p.round(),v,QP(e,l))})}function QP(t,e){let{x:n,y:r,angle:i}=e;return Ni(n)?n=parseFloat(n)/100*t.width:Bo(n)&&(n=Number(jo(n,t))),Ni(r)?r=parseFloat(r)/100*t.height:Bo(r)&&(r=Number(jo(r,t))),{x:n,y:r,angle:i}}function uA(t,e){const{x:n,y:r}=QP(t,e);return new fe(n||0,r||0)}const xhe=function(t,e){return t.map(n=>{const r=uA(e,n).round().toJSON();return r.angle=n.angle||0,r})},She=function(t,e,n){return n.fn(t,e,n)},Ehe=function(t,e,n){var r=uA(e,n.start||e.origin()),i=uA(e,n.end||e.corner());return lv(t,r,i,e)},_he=function(t,e,n){return lv(t,e.origin(),e.bottomLeft(),e)},Ahe=function(t,e,n){return lv(t,e.topRight(),e.corner(),e)},khe=function(t,e,n){return lv(t,e.origin(),e.topRight(),e)},Che=function(t,e,n){return lv(t,e.bottomLeft(),e.corner(),e)},Phe=function(t,e,n){var r=n.startAngle||0,i=n.step||360/t.length;return X6(t,e,r,function(s){return s*i})},Ohe=function(t,e,n){var r=n.startAngle||0,i=n.step||20;return X6(t,e,r,function(s,o){return(s+.5-o/2)*i})},The=Object.freeze(Object.defineProperty({__proto__:null,absolute:xhe,bottom:Che,ellipse:Ohe,ellipseSpread:Phe,fn:She,left:_he,line:Ehe,right:Ahe,top:khe},Symbol.toStringTag,{value:"Module"}));function wc(t,e){return ZP({},t,e,{x:0,y:0,angle:0,attrs:{}})}function Z6(t,e,n,r){r=ca({},r,{offset:15});var i=e.center().theta(t),s=Q6(e),o,a,l,u,c=r.offset,f=0;i<s[1]||i>s[2]?(l=".3em",o=c,a=0,u="start"):i<s[0]?(o=0,a=-c,n?(f=-90,u="start",l=".3em"):(u="middle",l="0")):i<s[3]?(l=".3em",o=-c,a=0,u="end"):(o=0,a=c,n?(f=90,u="start",l=".3em"):(u="middle",l=".6em"));var p=Math.round;return wc({x:p(o),y:p(a),angle:f,attrs:{labelText:{y:l,textAnchor:u}}})}function Q6(t){var e=t.center(),n=e.theta(t.origin()),r=e.theta(t.bottomLeft()),i=e.theta(t.corner()),s=e.theta(t.topRight());return[n,s,i,r]}function e8(t,e,n,r){var i=e.center().theta(t);r=ca({},r,{offset:15});var s,o,a,l,u=r.offset,c=0,f=Q6(e);i<f[1]||i>f[2]?(a=".3em",s=-u,o=0,l="end"):i<f[0]?(s=0,o=u,n?(c=90,l="start",a=".3em"):(l="middle",a=".6em")):i<f[3]?(a=".3em",s=u,o=0,l="start"):(s=0,o=-u,n?(c=-90,l="start",a=".3em"):(l="middle",a="0"));var p=Math.round;return wc({x:p(s),y:p(o),angle:c,attrs:{labelText:{y:a,textAnchor:l}}})}function t8(t,e,n){n=ca({},n,{offset:20});var r=Hb(0,0),i=-t.theta(r),s=i,o=t.clone().move(r,n.offset).difference(t).round(),a=".3em",l;(i+90)%180===0?(l=e?"end":"middle",!e&&i===-270&&(a="0em")):i>-270&&i<-90?(l="start",s=i-180):l="end";var u=Math.round;return wc({x:u(o.x),y:u(o.y),angle:e?s:0,attrs:{labelText:{y:a,textAnchor:l}}})}const Mhe=function(t,e,n){return wc(n)},Nhe=function(t,e,n){return wc(n,{x:-15,attrs:{labelText:{y:".3em",textAnchor:"end"}}})},Ihe=function(t,e,n){return wc(n,{x:15,attrs:{labelText:{y:".3em",textAnchor:"start"}}})},$he=function(t,e,n){return wc(n,{y:-15,attrs:{labelText:{y:"0",textAnchor:"middle"}}})},Rhe=function(t,e,n){return wc(n,{y:15,attrs:{labelText:{y:".6em",textAnchor:"middle"}}})},Lhe=function(t,e,n){return Z6(t,e,!0,n)},Dhe=function(t,e,n){return Z6(t,e,!1,n)},Fhe=function(t,e,n){return e8(t,e,!0,n)},Vhe=function(t,e,n){return e8(t,e,!1,n)},Bhe=function(t,e,n){return t8(t.difference(e.center()),!1,n)},jhe=function(t,e,n){return t8(t.difference(e.center()),!0,n)},zhe=Object.freeze(Object.defineProperty({__proto__:null,bottom:Rhe,inside:Vhe,insideOriented:Fhe,left:Nhe,manual:Mhe,outside:Dhe,outsideOriented:Lhe,radial:Bhe,radialOriented:jhe,right:Ihe,top:$he},Symbol.toStringTag,{value:"Module"})),nh=sl.extend({markup:['<path class="connection" stroke="black" d="M 0 0 0 0"/>','<path class="marker-source" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="marker-target" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="connection-wrap" d="M 0 0 0 0"/>','<g class="labels"/>','<g class="marker-vertices"/>','<g class="marker-arrowheads"/>','<g class="link-tools"/>'].join(""),toolMarkup:['<g class="link-tool">','<g class="tool-remove" event="remove">','<circle r="11" />','<path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />',"<title>Remove link.</title>","</g>",'<g class="tool-options" event="link:options">','<circle r="11" transform="translate(25)"/>','<path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>',"<title>Link options.</title>","</g>","</g>"].join(""),doubleToolMarkup:void 0,vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>"].join(""),arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<path class="marker-arrowhead" end="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />',"</g>"].join(""),defaultLabel:void 0,labelMarkup:void 0,_builtins:{defaultLabel:{markup:[{tagName:"rect",selector:"rect"},{tagName:"text",selector:"text"}],attrs:{text:{fill:"#000000",fontSize:14,textAnchor:"middle",yAlignment:"middle",pointerEvents:"none"},rect:{ref:"text",fill:"#ffffff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}}},defaults:{type:"link",source:{},target:{}},isLink:function(){return!0},disconnect:function(t){return this.set({source:{x:0,y:0},target:{x:0,y:0}},t)},source:function(t,e,n){if(t===void 0)return ja(this.get("source"));var r,i,s=t instanceof sl;if(s)return r=ja(e)||{},r.id=t.id,i=n,this.set("source",r,i);var o=!Hr(t);return o?(r=ja(e)||{},r.x=t.x,r.y=t.y,i=n,this.set("source",r,i)):(r=t,i=e,this.set("source",r,i))},target:function(t,e,n){if(t===void 0)return ja(this.get("target"));var r,i,s=t instanceof sl;if(s)return r=ja(e)||{},r.id=t.id,i=n,this.set("target",r,i);var o=!Hr(t);return o?(r=ja(e)||{},r.x=t.x,r.y=t.y,i=n,this.set("target",r,i)):(r=t,i=e,this.set("target",r,i))},router:function(t,e,n){if(t===void 0){var r=this.get("router");return r?typeof r=="object"?ja(r):r:this.get("manhattan")?{name:"orthogonal"}:null}var i=typeof t=="object"||typeof t=="function",s=i?t:{name:t,args:e},o=i?e:n;return this.set("router",s,o)},connector:function(t,e,n){if(t===void 0){var r=this.get("connector");return r?typeof r=="object"?ja(r):r:this.get("smooth")?{name:"smooth"}:null}var i=typeof t=="object"||typeof t=="function",s=i?t:{name:t,args:e},o=i?e:n;return this.set("connector",s,o)},label:function(t,e,n){var r=this.labels();return t=isFinite(t)&&t!==null?t|0:0,t<0&&(t=r.length+t),arguments.length<=1?this.prop(["labels",t]):this.prop(["labels",t],e,n)},labels:function(t,e){return arguments.length===0?(t=this.get("labels"),Array.isArray(t)?t.slice():[]):(Array.isArray(t)||(t=[]),this.set("labels",t,e))},hasLabels:function(){const{labels:t}=this.attributes;return Array.isArray(t)&&t.length>0},insertLabel:function(t,e,n){if(!e)throw new Error("dia.Link: no label provided");var r=this.labels(),i=r.length;return t=isFinite(t)&&t!==null?t|0:i,t<0&&(t=i+t+1),r.splice(t,0,e),this.labels(r,n)},appendLabel:function(t,e){return this.insertLabel(-1,t,e)},removeLabel:function(t,e){var n=this.labels();return t=isFinite(t)&&t!==null?t|0:-1,n.splice(t,1),this.labels(n,e)},vertex:function(t,e,n){var r=this.vertices();if(t=isFinite(t)&&t!==null?t|0:0,t<0&&(t=r.length+t),arguments.length<=1)return this.prop(["vertices",t]);var i=this._normalizeVertex(e);return this.prop(["vertices",t],i,n)},vertices:function(t,e){if(arguments.length===0)return t=this.get("vertices"),Array.isArray(t)?t.slice():[];Array.isArray(t)||(t=[]);for(var n=[],r=0;r<t.length;r++){var i=t[r],s=this._normalizeVertex(i);n.push(s)}return this.set("vertices",n,e)},insertVertex:function(t,e,n){if(!e)throw new Error("dia.Link: no vertex provided");var r=this.vertices(),i=r.length;t=isFinite(t)&&t!==null?t|0:i,t<0&&(t=i+t+1);var s=this._normalizeVertex(e);return r.splice(t,0,s),this.vertices(r,n)},removeVertex:function(t,e){var n=this.vertices();return t=isFinite(t)&&t!==null?t|0:-1,n.splice(t,1),this.vertices(n,e)},_normalizeVertex:function(t){var e=!Hr(t);return e?{x:t.x,y:t.y}:t},translate:function(t,e,n){return n=n||{},n.translateBy=n.translateBy||this.id,n.tx=t,n.ty=e,this.applyToPoints(function(r){return{x:(r.x||0)+t,y:(r.y||0)+e}},n)},scale:function(t,e,n,r){return this.applyToPoints(function(i){return fe(i).scale(t,e,n).toJSON()},r)},applyToPoints:function(t,e){if(!Yn(t))throw new TypeError("dia.Link: applyToPoints expects its first parameter to be a function.");var n={},{source:r,target:i}=this.attributes;r.id||(n.source=t(r)),i.id||(n.target=t(i));var s=this.vertices();return s.length>0&&(n.vertices=s.map(t)),this.set(n,e)},getSourcePoint:function(){var t=this.getSourceCell();return t?t.getPointFromConnectedLink(this,"source"):new fe(this.source())},getTargetPoint:function(){var t=this.getTargetCell();return t?t.getPointFromConnectedLink(this,"target"):new fe(this.target())},getPointFromConnectedLink:function(){return this.getPolyline().pointAt(.5)},getPolyline:function(){const t=[this.getSourcePoint(),...this.vertices().map(fe),this.getTargetPoint()];return new rr(t)},getBBox:function(){return this.getPolyline().bbox()},reparent:function(t){var e;if(this.graph){var n=this.getSourceElement(),r=this.getTargetElement(),i=this.getParentCell();n&&r&&(n===r||n.isEmbeddedIn(r)?e=r:r.isEmbeddedIn(n)?e=n:e=this.graph.getCommonAncestor(n,r)),i&&(!e||e.id!==i.id)&&i.unembed(this,t),e&&e.embed(this,t)}return e},hasLoop:function(t){t=t||{};var{source:e,target:n}=this.attributes,r=e.id,i=n.id;if(!r||!i)return!1;var s=r===i;if(!s&&t.deep&&this.graph){var o=this.getSourceCell(),a=this.getTargetCell();s=o.isEmbeddedIn(a)||a.isEmbeddedIn(o)}return s},getSourceCell:function(){const{graph:t,attributes:e}=this;var n=e.source;return n&&n.id&&t&&t.getCell(n.id)||null},getSourceElement:function(){var t=this,e={};do{if(e[t.id])return null;e[t.id]=!0,t=t.getSourceCell()}while(t&&t.isLink());return t},getTargetCell:function(){const{graph:t,attributes:e}=this;var n=e.target;return n&&n.id&&t&&t.getCell(n.id)||null},getTargetElement:function(){var t=this,e={};do{if(e[t.id])return null;e[t.id]=!0,t=t.getTargetCell()}while(t&&t.isLink());return t},getRelationshipAncestor:function(){var t;if(this.graph){var e=[this,this.getSourceElement(),this.getTargetElement()].filter(function(n){return!!n});t=this.graph.getCommonAncestor.apply(this.graph,e)}return t||null},isRelationshipEmbeddedIn:function(t){var e=Gi(t)||$s(t)?t:t.id,n=this.getRelationshipAncestor();return!!n&&(n.id===e||n.isEmbeddedIn(e))},_getDefaultLabel:function(){var t=this.get("defaultLabel")||this.defaultLabel||{},e={};return e.markup=t.markup||this.get("labelMarkup")||this.labelMarkup,e.position=t.position,e.attrs=t.attrs,e.size=t.size,e}},{endsEqual:function(t,e){var n=t.port===e.port||!t.port&&!e.port;return t.id===e.id&&n}});var n8=function(t){var e=Ro(t)||{};this.ports=[],this.groups={},this.portLayoutNamespace=The,this.portLabelLayoutNamespace=zhe,this._init(e)};n8.prototype={getPorts:function(){return this.ports},getGroup:function(t){return this.groups[t]||{}},getPortsByGroup:function(t){return this.ports.filter(function(e){return e.group===t})},getGroupPortsMetrics:function(t,e){var n=this.getGroup(t),r=this.getPortsByGroup(t),i=n.position||{},s=i.name,o=this.portLayoutNamespace;o[s]||(s="left");var a=i.args||{},l=r.map(function(f){return f&&f.position&&f.position.args}),u=o[s](l,e,a),c={ports:r,result:[]};return gn(u).reduce((function(f,p,v){var b=f.ports[v];return f.result.push({portId:b.id,portTransformation:p,labelTransformation:this._getPortLabelLayout(b,fe(p),e),portAttrs:b.attrs,portSize:b.size,labelSize:b.label.size}),f}).bind(this),c),c.result},_getPortLabelLayout:function(t,e,n){var r=this.portLabelLayoutNamespace,i=t.label.position.name||"left";return r[i]?r[i](e,n,t.label.position.args):null},_init:function(t){if(Nn(t.groups))for(var e=Object.keys(t.groups),n=0,r=e.length;n<r;n++){var i=e[n];this.groups[i]=this._evaluateGroup(t.groups[i])}for(var s=gn(t.items),o=0,a=s.length;o<a;o++)this.ports.push(this._evaluatePort(s[o]))},_evaluateGroup:function(t){return Wr(t,{position:this._getPosition(t.position,!0),label:this._getLabel(t,!0)})},_evaluatePort:function(t){var e=Mt({},t),n=this.getGroup(t.group);return e.markup=e.markup||n.markup,e.attrs=Wr({},n.attrs,e.attrs),e.position=this._createPositionNode(n,e),e.label=Wr({},n.label,this._getLabel(e)),e.z=this._getZIndex(n,e),e.size=Mt({},n.size,e.size),e},_getZIndex:function(t,e){return $s(e.z)?e.z:$s(t.z)||t.z==="auto"?t.z:"auto"},_createPositionNode:function(t,e){return Wr({name:"left",args:{}},t.position,{args:e.args})},_getPosition:function(t,e){var n={},r;Yn(t)?(r="fn",n.fn=t):Gi(t)?r=t:t===void 0?r=e?"left":null:Array.isArray(t)?(r="absolute",n.x=t[0],n.y=t[1]):Nn(t)&&(r=t.name,Mt(n,t.args));var i={args:n};return r&&(i.name=r),i},_getLabel:function(t,e){var n=t.label||{},r=n;return r.position=this._getPosition(n.position,e),r}};const Hhe={_initializePorts:function(){this._createPortData(),this.on("change:ports",function(){this._processRemovedPort(),this._createPortData()},this)},_processRemovedPort:function(){var t=this.get("ports")||{},e={};gn(t.items).forEach(function(a){e[a.id]=!0});var n=this.previous("ports")||{},r={};gn(n.items).forEach(function(a){e[a.id]||(r[a.id]=!0)});var i=this.graph;if(i&&!Hu(r)){var s=i.getConnectedLinks(this,{inbound:!0});s.forEach(function(a){r[a.get("target").port]&&a.remove()});var o=i.getConnectedLinks(this,{outbound:!0});o.forEach(function(a){r[a.get("source").port]&&a.remove()})}},hasPorts:function(){var t=this.prop("ports/items");return Array.isArray(t)&&t.length>0},hasPort:function(t){return this.getPortIndex(t)!==-1},getPorts:function(){return Ro(this.prop("ports/items"))||[]},getGroupPorts:function(t){const e=gn(this.prop(["ports","items"])).filter(n=>n.group===t);return Ro(e)},getPort:function(t){return Ro(gn(this.prop("ports/items")).find(function(e){return e.id&&e.id===t}))},getPortsPositions:function(t){var e=this._portSettingsData.getGroupPortsMetrics(t,st(this.size()));return e.reduce(function(n,r){var i=r.portTransformation;return n[r.portId]={x:i.x,y:i.y,angle:i.angle},n},{})},getPortIndex:function(t){var e=Nn(t)?t.id:t;return this._isValidPortId(e)?gn(this.prop("ports/items")).findIndex(function(n){return n.id===e}):-1},addPort:function(t,e){if(!Nn(t)||Array.isArray(t))throw new Error("Element: addPort requires an object.");var n=Mt([],this.prop("ports/items"));return n.push(t),this.prop("ports/items",n,e),this},insertPort:function(t,e,n){const r=typeof t=="number"?t:this.getPortIndex(t);if(!Nn(e)||Array.isArray(e))throw new Error("dia.Element: insertPort requires an object.");const i=Mt([],this.prop("ports/items"));return i.splice(r,0,e),this.prop("ports/items",i,n),this},portProp:function(t,e,n,r){var i=this.getPortIndex(t);if(i===-1)throw new Error("Element: unable to find port with id "+t);var s=Array.prototype.slice.call(arguments,1);return Array.isArray(e)?s[0]=["ports","items",i].concat(e):Gi(e)?s[0]=["ports/items/",i,"/",e].join(""):(s=["ports/items/"+i],Hr(e)&&(s.push(e),s.push(n))),this.prop.apply(this,s)},_validatePorts:function(){var t=this.get("ports")||{},e=[];t=t||{};var n=gn(t.items);return n.forEach(function(r){typeof r!="object"&&e.push("Element: invalid port ",r),this._isValidPortId(r.id)||(r.id=this.generatePortId())},this),av(n,"id").length!==n.length&&e.push("Element: found id duplicities in ports."),e},generatePortId:function(){return this.generateId()},_isValidPortId:function(t){return t!=null&&!Nn(t)},addPorts:function(t,e){return t.length&&this.prop("ports/items",Mt([],this.prop("ports/items")).concat(t),e),this},removePort:function(t,e){const n=e||{},r=this.getPortIndex(t);if(r!==-1){const i=Mt([],this.prop(["ports","items"]));i.splice(r,1),n.rewrite=!0,this.startBatch("port-remove"),this.prop(["ports","items"],i,n),this.stopBatch("port-remove")}return this},removePorts:function(t,e){let n,r;if(Array.isArray(t)){if(n=e||{},t.length===0)return this.this;r=Mt([],this.prop(["ports","items"])).filter(function(s){return!t.some(function(o){const a=Nn(o)?o.id:o;return s.id===a})})}else n=t||{},r=[];return this.startBatch("port-remove"),n.rewrite=!0,this.prop(["ports","items"],r,n),this.stopBatch("port-remove"),this},_createPortData:function(){var t=this._validatePorts();if(t.length>0)throw this.set("ports",this.previous("ports")),new Error(t.join(" "));var e;this._portSettingsData&&(e=this._portSettingsData.getPorts()),this._portSettingsData=new n8(this.get("ports"));var n=this._portSettingsData.getPorts();if(e){var r=n.filter(function(s){if(!e.find(function(o){return o.id===s.id}))return s}),i=e.filter(function(s){if(!n.find(function(o){return o.id===s.id}))return s});i.length>0&&this.trigger("ports:remove",this,i),r.length>0&&this.trigger("ports:add",this,r)}}},Uhe={portContainerMarkup:"g",portMarkup:[{tagName:"circle",selector:"circle",attributes:{r:10,fill:"#FFFFFF",stroke:"#000000"}}],portLabelMarkup:[{tagName:"text",selector:"text",attributes:{fill:"#000000"}}],_portElementsCache:null,_initializePorts:function(){this._cleanPortsCache()},_refreshPorts:function(){this._removePorts(),this._cleanPortsCache(),this._renderPorts()},_cleanPortsCache:function(){this._portElementsCache={}},_renderPorts:function(){for(var t=[],e=this._getContainerElement(),n=0,r=e.node.childNodes.length;n<r;n++)t.push(e.node.childNodes[n]);var i=Qfe(this.model._portSettingsData.getPorts(),"z"),s="auto";gn(i[s]).forEach(function(c){var f=this._getPortElement(c);e.append(f),t.push(f)},this);for(var o=Object.keys(i),a=0;a<o.length;a++){var l=o[a];if(l!==s){var u=parseInt(l,10);this._appendPorts(i[l],u,t)}}this._updatePorts()},_getContainerElement:function(){return this.rotatableNode||this.vel},_appendPorts:function(t,e,n){var r=this._getContainerElement(),i=gn(t).map(this._getPortElement,this);n[e]||e<0?De(n[Math.max(e,0)]).before(i):r.append(i)},_getPortElement:function(t){return this._portElementsCache[t.id]?this._portElementsCache[t.id].portElement:this._createPortElement(t)},findPortNode:function(t,e){const n=this._portElementsCache[t];if(!n)return null;if(!e)return n.portContentElement.node;const r=n.portElement.node,i=n.portSelectors,[s=null]=this.findBySelector(e,r,i);return s},_updatePorts:function(){this._updatePortGroup(void 0);var t=Object.keys(this.model._portSettingsData.groups);t.forEach(this._updatePortGroup,this)},_removePorts:function(){ya(this._portElementsCache,"portElement.remove")},_createPortElement:function(t){let e,n,r,i;var s=De(this.portContainerMarkup).addClass("joint-port"),o=this._getPortMarkup(t);if(Array.isArray(o)){var a=this.parseDOMJSON(o,s.node),l=a.fragment;l.childNodes.length>1?e=De("g").append(l):e=De(l.firstChild),i=a.selectors}else e=De(o),Array.isArray(e)&&(e=De("g").append(e));if(!e)throw new Error("ElementView: Invalid port markup.");e.attr({port:t.id,"port-group":t.group});const u=this._getPortLabelMarkup(t.label);if(Array.isArray(u)){const{fragment:E,selectors:P}=this.parseDOMJSON(u,s.node),S=E.childNodes.length;S>0&&(r=P,n=S===1?De(E.firstChild):De("g").append(E))}else n=De(u),Array.isArray(n)&&(n=De("g").append(n));var c;if(i&&r){for(var f in r)if(i[f]&&f!==this.selector)throw new Error("ElementView: selectors within port must be unique.");c=Mt({},i,r)}else c=i||r||{};const p="portRoot",v="labelRoot",b="labelText";if(p in c||(c[p]=e.node),n){const E=n.node;if(v in c||(c[v]=E),!(b in c)){const P=n.tagName()==="TEXT"?E:Array.from(E.querySelectorAll("text"));c[b]=P,r||(r={}),r[b]=P}}return s.append(e.addClass("joint-port-body")),n&&s.append(n.addClass("joint-port-label")),this._portElementsCache[t.id]={portElement:s,portLabelElement:n,portSelectors:c,portLabelSelectors:r,portContentElement:e,portContentSelectors:i},s},_updatePortGroup:function(t){for(var e=st(this.model.size()),n=this.model._portSettingsData.getGroupPortsMetrics(t,e),r=0,i=n.length;r<i;r++){var s=n[r],o=s.portId,a=this._portElementsCache[o]||{},l=s.portTransformation,u=s.labelTransformation;u&&a.portLabelElement&&(this.updateDOMSubtreeAttributes(a.portLabelElement.node,u.attrs,{rootBBox:new st(s.labelSize),selectors:a.portLabelSelectors}),this.applyPortTransform(a.portLabelElement,u,-l.angle||0)),this.updateDOMSubtreeAttributes(a.portElement.node,s.portAttrs,{rootBBox:new st(s.portSize),selectors:a.portSelectors}),this.applyPortTransform(a.portElement,l)}},applyPortTransform:function(t,e,n){var r=De.createSVGMatrix().rotate(n||0).translate(e.x||0,e.y||0).rotate(e.angle||0);t.transform(r,{absolute:!0})},_getPortMarkup:function(t){return t.markup||this.model.get("portMarkup")||this.model.portMarkup||this.portMarkup},_getPortLabelMarkup:function(t){return t.markup||this.model.get("portLabelMarkup")||this.model.portLabelMarkup||this.portLabelMarkup}},Zi=sl.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},initialize:function(){this._initializePorts(),sl.prototype.initialize.apply(this,arguments)},_initializePorts:function(){},_refreshPorts:function(){},isElement:function(){return!0},position:function(t,e,n){const r=$s(e);n=(r?n:t)||{};const{parentRelative:i,deep:s,restrictedArea:o}=n;let a;if(i){if(!this.graph)throw new Error("Element must be part of a graph.");const l=this.getParentCell();l&&!l.isLink()&&(a=l.get("position"))}if(r){if(a&&(t+=a.x,e+=a.y),s||o){const{x:l,y:u}=this.get("position");this.translate(t-l,e-u,n)}else this.set("position",{x:t,y:e},n);return this}else{const l=fe(this.get("position"));return i?l.difference(a):l}},translate:function(t,e,n){if(t=t||0,e=e||0,t===0&&e===0)return this;n=n||{},n.translateBy=n.translateBy||this.id;var r=this.get("position")||{x:0,y:0},i=n.restrictedArea;if(i&&n.translateBy===this.id)if(typeof i=="function"){var s=i.call(this,r.x+t,r.y+e,n);t=s.x-r.x,e=s.y-r.y}else{var o=this.getBBox({deep:!0}),a=r.x-o.x,l=r.y-o.y,u=Math.max(i.x+a,Math.min(i.x+i.width+a-o.width,r.x+t)),c=Math.max(i.y+l,Math.min(i.y+i.height+l-o.height,r.y+e));t=u-r.x,e=c-r.y}var f={x:r.x+t,y:r.y+e};return n.tx=t,n.ty=e,n.transition?(Nn(n.transition)||(n.transition={}),this.transition("position",f,Mt({},n.transition,{valueFunction:q6.object})),ya(this.getEmbeddedCells(),"translate",t,e,n)):(this.startBatch("translate",n),this.set("position",f,n),ya(this.getEmbeddedCells(),"translate",t,e,n),this.stopBatch("translate",n)),this},size:function(t,e,n){var r=this.get("size");return t===void 0?{width:r.width,height:r.height}:(Nn(t)&&(n=e,e=$s(t.height)?t.height:r.height,t=$s(t.width)?t.width:r.width),this.resize(t,e,n))},resize:function(t,e,n){if(n=n||{},this.startBatch("resize",n),n.direction){var r=this.get("size");switch(n.direction){case"left":case"right":e=r.height;break;case"top":case"bottom":t=r.width;break}var i=ul(this.get("angle")||0),s=this.getBBox(),o;if(i){var a={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[n.direction];n.absolute&&(a+=Math.floor((i+45)/90),a%=4);var l=s[["bottomLeft","corner","topRight","origin"][a]](),u=fe(l).rotate(s.center(),-i),c=Math.sqrt(t*t+e*e)/2,f=a*Math.PI/2;f+=Math.atan(a%2==0?e/t:t/e),f-=Hs(i);var p=fe.fromPolar(c,f,u);o=fe(p).offset(t/-2,e/-2)}else switch(o=s.topLeft(),n.direction){case"top":case"top-right":o.offset(0,s.height-e);break;case"left":case"bottom-left":o.offset(s.width-t,0);break;case"top-left":o.offset(s.width-t,s.height-e);break}this.set("size",{width:t,height:e},n),this.position(o.x,o.y,n)}else this.set("size",{width:t,height:e},n);return this.stopBatch("resize",n),this},scale:function(t,e,n,r){var i=this.getBBox().scale(t,e,n);return this.startBatch("scale",r),this.position(i.x,i.y,r),this.resize(i.width,i.height,r),this.stopBatch("scale"),this},fitEmbeds:function(t){return this.fitToChildren(t)},fitToChildren:function(t={}){const{graph:e}=this;if(!e)throw new Error("Element must be part of a graph.");const n=this.getEmbeddedCells().filter(r=>r.isElement());return n.length===0?this:(this.startBatch("fit-embeds",t),t.deep&&ya(n,"fitToChildren",t),this._fitToElements(Object.assign({elements:n},t)),this.stopBatch("fit-embeds"),this)},fitParent:function(t={}){const{graph:e}=this;if(!e)throw new Error("Element must be part of a graph.");if(t.deep&&t.terminator&&(t.terminator===this||t.terminator===this.id))return this;const n=this.getParentCell();if(!n||!n.isElement())return this;const r=n.getEmbeddedCells().filter(i=>i.isElement());return r.length===0?this:(this.startBatch("fit-parent",t),n._fitToElements(Object.assign({elements:r},t)),t.deep&&n.fitParent(t),this.stopBatch("fit-parent"),this)},_fitToElements:function(t={}){const e=this.graph.getCellsBBox(t.elements);if(!e)return;const{expandOnly:n,shrinkOnly:r}=t;if(n&&r)return;let{x:i,y:s,width:o,height:a}=e;const{left:l,right:u,top:c,bottom:f}=zf(t.padding);i-=l,s-=c,o+=l+u,a+=f+c;let p=new st(i,s,o,a);if(n)p=this.getBBox().union(p);else if(r){const v=this.getBBox().intersect(p);if(!v)return;p=v}this.set({position:{x:p.x,y:p.y},size:{width:p.width,height:p.height}},t)},rotate:function(t,e,n,r){if(n){var i=this.getBBox().center(),s=this.get("size"),o=this.get("position");i.rotate(n,this.get("angle")-t);var a=i.x-s.width/2-o.x,l=i.y-s.height/2-o.y;this.startBatch("rotate",{angle:t,absolute:e,origin:n}),this.position(o.x+a,o.y+l,r),this.rotate(t,e,null,r),this.stopBatch("rotate")}else this.set("angle",e?t:(this.get("angle")+t)%360,r);return this},angle:function(){return ul(this.get("angle")||0)},getBBox:function(t={}){const{graph:e,attributes:n}=this,{deep:r,rotate:i}=t;if(r&&e){const f=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return f.push(this),e.getCellsBBox(f,t)}const{angle:s=0,position:{x:o,y:a},size:{width:l,height:u}}=n,c=new st(o,a,l,u);return i&&c.rotateAroundCenter(s),c},getPointFromConnectedLink:function(t,e){var n=this.getBBox(),r=n.center(),i=t.get(e);if(!i)return r;var s=i.port;if(!s||!this.hasPort(s))return r;var o=this.portProp(s,["group"]),a=this.getPortsPositions(o),l=new fe(a[s]).offset(n.origin()),u=this.angle();return u&&l.rotate(r,-u),l}});Mt(Zi.prototype,Hhe);const qhe=Ui.Collection.extend({initialize:function(t,e){e.cellNamespace?this.cellNamespace=e.cellNamespace:this.cellNamespace=typeof joint<"u"&&zl(joint,"shapes")?joint.shapes:null,this.graph=e.graph},model:function(t,e){var n=e.collection,r=n.cellNamespace,i=t.type==="link"?nh:pm(r,t.type,".")||Zi,s=new i(t,e);return e.dry||(s.graph=n.graph),s},comparator:function(t){return t.get("z")||0}}),Hl=Ui.Model.extend({initialize:function(t,e){e=e||{};var n=new qhe([],{model:e.cellModel,cellNamespace:e.cellNamespace,graph:this});Ui.Model.prototype.set.call(this,"cells",n),n.on("all",this.trigger,this),this.on("change:z",this._sortOnChangeZ,this),this._out={},this._in={},this._nodes={},this._edges={},this._batches={},n.on("add",this._restructureOnAdd,this),n.on("remove",this._restructureOnRemove,this),n.on("reset",this._restructureOnReset,this),n.on("change:source",this._restructureOnChangeSource,this),n.on("change:target",this._restructureOnChangeTarget,this),n.on("remove",this._removeCell,this)},_sortOnChangeZ:function(){this.get("cells").sort()},_restructureOnAdd:function(t){if(t.isLink()){this._edges[t.id]=!0;var{source:e,target:n}=t.attributes;e.id&&((this._out[e.id]||(this._out[e.id]={}))[t.id]=!0),n.id&&((this._in[n.id]||(this._in[n.id]={}))[t.id]=!0)}else this._nodes[t.id]=!0},_restructureOnRemove:function(t){if(t.isLink()){delete this._edges[t.id];var{source:e,target:n}=t.attributes;e.id&&this._out[e.id]&&this._out[e.id][t.id]&&delete this._out[e.id][t.id],n.id&&this._in[n.id]&&this._in[n.id][t.id]&&delete this._in[n.id][t.id]}else delete this._nodes[t.id]},_restructureOnReset:function(t){t=t.models,this._out={},this._in={},this._nodes={},this._edges={},t.forEach(this._restructureOnAdd,this)},_restructureOnChangeSource:function(t){var e=t.previous("source");e.id&&this._out[e.id]&&delete this._out[e.id][t.id];var n=t.attributes.source;n.id&&((this._out[n.id]||(this._out[n.id]={}))[t.id]=!0)},_restructureOnChangeTarget:function(t){var e=t.previous("target");e.id&&this._in[e.id]&&delete this._in[e.id][t.id];var n=t.get("target");n.id&&((this._in[n.id]||(this._in[n.id]={}))[t.id]=!0)},getOutboundEdges:function(t){return this._out&&this._out[t]||{}},getInboundEdges:function(t){return this._in&&this._in[t]||{}},toJSON:function(){var t=Ui.Model.prototype.toJSON.apply(this,arguments);return t.cells=this.get("cells").toJSON(),t},fromJSON:function(t,e){if(!t.cells)throw new Error("Graph JSON must contain cells array.");return this.set(t,e)},set:function(t,e,n){var r;return typeof t=="object"?(r=t,n=e):(r={})[t]=e,r.hasOwnProperty("cells")&&(this.resetCells(r.cells,n),r=jf(r,"cells")),Ui.Model.prototype.set.call(this,r,n)},clear:function(t){t=Mt({},t,{clear:!0});var e=this.get("cells");if(e.length===0)return this;this.startBatch("clear",t);var n=e.sortBy(function(r){return r.isLink()?1:2});do n.shift().remove(t);while(n.length>0);return this.stopBatch("clear"),this},_prepareCell:function(t,e){var n;if(t instanceof Ui.Model?(n=t.attributes,!t.graph&&(!e||!e.dry)&&(t.graph=this)):n=t,!Gi(n.type))throw new TypeError("dia.Graph: cell type must be a string.");return t},minZIndex:function(){var t=this.get("cells").first();return t&&t.get("z")||0},maxZIndex:function(){var t=this.get("cells").last();return t&&t.get("z")||0},addCell:function(t,e){return Array.isArray(t)?this.addCells(t,e):(t instanceof Ui.Model?t.has("z")||t.set("z",this.maxZIndex()+1):t.z===void 0&&(t.z=this.maxZIndex()+1),this.get("cells").add(this._prepareCell(t,e),e||{}),this)},addCells:function(t,e){return t.length===0?this:(t=ehe(t),e.maxPosition=e.position=t.length-1,this.startBatch("add",e),t.forEach(function(n){this.addCell(n,e),e.position--},this),this.stopBatch("add",e),this)},resetCells:function(t,e){var n=gn(t).map(function(r){return this._prepareCell(r,e)},this);return this.get("cells").reset(n,e),this},removeCells:function(t,e){return t.length&&(this.startBatch("remove"),ya(t,"remove",e),this.stopBatch("remove")),this},_removeCell:function(t,e,n){n=n||{},n.clear||(n.disconnectLinks?this.disconnectLinks(t,n):this.removeLinks(t,n)),this.get("cells").remove(t,{silent:!0}),t.graph===this&&(t.graph=null)},getCell:function(t){return this.get("cells").get(t)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return this.get("cells").filter(t=>t.isElement())},getLinks:function(){return this.get("cells").filter(t=>t.isLink())},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(t,e){e=e||{};var n=e.indirect,r=e.inbound,i=e.outbound;r===void 0&&i===void 0&&(r=i=!0);var s=[],o={};i&&a(this,t),r&&l(this,t);function a(f,p){if(Lo(f.getOutboundEdges(p.id),(function(b,E){if(!o[E]){var P=f.getCell(E);s.push(P),o[E]=!0,n&&(r&&l(f,P),i&&a(f,P))}}).bind(f)),n&&p.isLink()){var v=p.getTargetCell();v&&v.isLink()&&(o[v.id]||(s.push(v),a(f,v)))}}function l(f,p){if(Lo(f.getInboundEdges(p.id),(function(b,E){if(!o[E]){var P=f.getCell(E);s.push(P),o[E]=!0,n&&(r&&l(f,P),i&&a(f,P))}}).bind(f)),n&&p.isLink()){var v=p.getSourceCell();v&&v.isLink()&&(o[v.id]||(s.push(v),l(f,v)))}}if(e.deep){var u=t.getEmbeddedCells({deep:!0}),c={};u.forEach(function(f){f.isElement()&&(c[f.id]=!0)}),u.forEach(function(f){f.isLink()||(i&&Lo(this.getOutboundEdges(f.id),(function(p,v){if(!o[v]){var b=this.getCell(v),{source:E,target:P}=b.attributes,S=E.id,A=P.id;if(!e.includeEnclosed&&S&&c[S]&&A&&c[A])return;s.push(this.getCell(v)),o[v]=!0}}).bind(this)),r&&Lo(this.getInboundEdges(f.id),(function(p,v){if(!o[v]){var b=this.getCell(v),{source:E,target:P}=b.attributes,S=E.id,A=P.id;if(!e.includeEnclosed&&S&&c[S]&&A&&c[A])return;s.push(this.getCell(v)),o[v]=!0}}).bind(this)))},this)}return s},getNeighbors:function(t,e){e||(e={});var n=e.inbound,r=e.outbound;n===void 0&&r===void 0&&(n=r=!0);var i=this.getConnectedLinks(t,e).reduce((function(a,l){var{source:u,target:c}=l.attributes,f=l.hasLoop(e);if(n&&zl(u,"id")&&!a[u.id]){var p=this.getCell(u.id);p.isElement()&&(f||p&&p!==t&&(!e.deep||!p.isEmbeddedIn(t)))&&(a[u.id]=p)}if(r&&zl(c,"id")&&!a[c.id]){var v=this.getCell(c.id);v.isElement()&&(f||v&&v!==t&&(!e.deep||!v.isEmbeddedIn(t)))&&(a[c.id]=v)}return a}).bind(this),{});if(t.isLink()){if(n){var s=t.getSourceCell();s&&s.isElement()&&!i[s.id]&&(i[s.id]=s)}if(r){var o=t.getTargetCell();o&&o.isElement()&&!i[o.id]&&(i[o.id]=o)}}return gn(i)},getCommonAncestor:function(){var t=Array.from(arguments).map(function(n){for(var r=[],i=n.get("parent");i;)r.push(i),i=this.getCell(i).get("parent");return r},this);t=t.sort(function(n,r){return n.length-r.length});var e=gn(t.shift()).find(function(n){return t.every(function(r){return r.includes(n)})});return this.getCell(e)},getSuccessors:function(t,e){e=e||{};var n=[];return this.search(t,function(r){r!==t&&n.push(r)},Mt({},e,{outbound:!0})),n},cloneCells:W6,cloneSubgraph:function(t,e){var n=this.getSubgraph(t,e);return this.cloneCells(n)},getSubgraph:function(t,e){e=e||{};var n=[],r={},i=[],s=[];return gn(t).forEach(function(o){if(r[o.id]||(n.push(o),r[o.id]=o,o.isLink()?s.push(o):i.push(o)),e.deep){var a=o.getEmbeddedCells({deep:!0});a.forEach(function(l){r[l.id]||(n.push(l),r[l.id]=l,l.isLink()?s.push(l):i.push(l))})}}),s.forEach(function(o){var{source:a,target:l}=o.attributes;if(a.id&&!r[a.id]){var u=this.getCell(a.id);n.push(u),r[u.id]=u,i.push(u)}if(l.id&&!r[l.id]){var c=this.getCell(l.id);n.push(this.getCell(l.id)),r[c.id]=c,i.push(c)}},this),i.forEach(function(o){var a=this.getConnectedLinks(o,e);a.forEach(function(l){var{source:u,target:c}=l.attributes;!r[l.id]&&u.id&&r[u.id]&&c.id&&r[c.id]&&(n.push(l),r[l.id]=l)})},this),n},getPredecessors:function(t,e){e=e||{};var n=[];return this.search(t,function(r){r!==t&&n.push(r)},Mt({},e,{inbound:!0})),n},search:function(t,e,n){n=n||{},n.breadthFirst?this.bfs(t,e,n):this.dfs(t,e,n)},bfs:function(t,e,n={}){const r={},i={},s=[];for(s.push(t),i[t.id]=0;s.length>0;){var o=s.shift();if(r[o.id]||(r[o.id]=!0,e.call(this,o,i[o.id])===!1))continue;const a=this.getNeighbors(o,n);for(let l=0,u=a.length;l<u;l++){const c=a[l];i[c.id]=i[o.id]+1,s.push(c)}}},dfs:function(t,e,n={}){const r={},i={},s=[];for(s.push(t),i[t.id]=0;s.length>0;){const o=s.pop();if(r[o.id]||(r[o.id]=!0,e.call(this,o,i[o.id])===!1))continue;const a=this.getNeighbors(o,n),l=s.length;for(let u=0,c=a.length;u<c;u++){const f=a[u];i[f.id]=i[o.id]+1,s.splice(l,0,f)}}},getSources:function(){var t=[];return Lo(this._nodes,(function(e,n){(!this._in[n]||Hu(this._in[n]))&&t.push(this.getCell(n))}).bind(this)),t},getSinks:function(){var t=[];return Lo(this._nodes,(function(e,n){(!this._out[n]||Hu(this._out[n]))&&t.push(this.getCell(n))}).bind(this)),t},isSource:function(t){return!this._in[t.id]||Hu(this._in[t.id])},isSink:function(t){return!this._out[t.id]||Hu(this._out[t.id])},isSuccessor:function(t,e){var n=!1;return this.search(t,function(r){if(r===e&&r!==t)return n=!0,!1},{outbound:!0}),n},isPredecessor:function(t,e){var n=!1;return this.search(t,function(r){if(r===e&&r!==t)return n=!0,!1},{inbound:!0}),n},isNeighbor:function(t,e,n){n=n||{};var r=n.inbound,i=n.outbound;r===void 0&&i===void 0&&(r=i=!0);var s=!1;return this.getConnectedLinks(t,n).forEach(function(o){var{source:a,target:l}=o.attributes;if(r&&zl(a,"id")&&a.id===e.id||i&&zl(l,"id")&&l.id===e.id)return s=!0,!1}),s},disconnectLinks:function(t,e){this.getConnectedLinks(t).forEach(function(n){n.set(n.attributes.source.id===t.id?"source":"target",{x:0,y:0},e)})},removeLinks:function(t,e){ya(this.getConnectedLinks(t),"remove",e)},findModelsFromPoint:function(t){return this.getElements().filter(e=>e.getBBox({rotate:!0}).containsPoint(t))},findModelsInArea:function(t,e={}){const n=new st(t),{strict:r=!1}=e,i=r?"containsRect":"intersect";return this.getElements().filter(s=>n[i](s.getBBox({rotate:!0})))},findModelsUnderElement:function(t,e={}){const{searchBy:n="bbox"}=e,r=t.getBBox().rotateAroundCenter(t.angle());return(n==="bbox"?this.findModelsInArea(r):this.findModelsFromPoint(Y6(r,n))).filter(s=>t.id!==s.id&&!s.isEmbeddedIn(t))},getBBox:function(){return this.getCellsBBox(this.getCells())},getCellsBBox:function(t,e={}){const{rotate:n=!0}=e;return gn(t).reduce(function(r,i){const s=i.getBBox({rotate:n});return s?r?r.union(s):s:r},null)},translate:function(t,e,n){var r=this.getCells().filter(function(i){return!i.isEmbedded()});return ya(r,"translate",t,e,n),this},resize:function(t,e,n){return this.resizeCells(t,e,this.getCells(),n)},resizeCells:function(t,e,n,r){var i=this.getCellsBBox(n);if(i){var s=Math.max(t/i.width,0),o=Math.max(e/i.height,0);ya(n,"scale",s,o,i.origin(),r)}return this},startBatch:function(t,e){return e=e||{},this._batches[t]=(this._batches[t]||0)+1,this.trigger("batch:start",Mt({},e,{batchName:t}))},stopBatch:function(t,e){return e=e||{},this._batches[t]=(this._batches[t]||0)-1,this.trigger("batch:stop",Mt({},e,{batchName:t}))},hasActiveBatch:function(t){const e=this._batches;let n;return arguments.length===0?n=Object.keys(e):Array.isArray(t)?n=t:n=[t],n.some(r=>e[r]>0)}},{validations:{multiLinks:function(t,e){var{source:n,target:r}=e.attributes;if(n.id&&r.id){var i=e.getSourceCell();if(i){var s=t.getConnectedLinks(i,{outbound:!0}),o=s.filter(function(a){var{source:l,target:u}=a.attributes;return l&&l.id===n.id&&(!l.port||l.port===n.port)&&u&&u.id===r.id&&(!u.port||u.port===r.port)});if(o.length>1)return!1}}return!0},linkPinning:function(t,e){var{source:n,target:r}=e.attributes;return n.id&&r.id}}});whe(Hl.prototype,["resetCells","addCells","removeCells"],lA.cells);const nf={},Yl=Ui.View.extend({options:{},theme:null,themeClassNamePrefix:pa("theme-"),requireSetThemeOverride:!1,defaultTheme:il.defaultTheme,children:null,childNodes:null,DETACHABLE:!0,UPDATE_PRIORITY:2,FLAG_INSERT:1<<30,FLAG_REMOVE:1<<29,FLAG_INIT:1<<28,constructor:function(t){this.requireSetThemeOverride=t&&!!t.theme,this.options=Mt({},this.options,t),Ui.View.call(this,t)},initialize:function(){nf[this.cid]=this,this.setTheme(this.options.theme||this.defaultTheme),this.init()},unmount:function(){this.svgElement?this.vel.remove():this.$el.remove()},isMounted:function(){return this.el.parentNode!==null},renderChildren:function(t){if(t||(t=Ur(this,"children")),t){var e=this.svgElement,n=De.namespace[e?"svg":"xhtml"],r=Jb(t,n);(e?this.vel:this.$el).empty().append(r.fragment),this.childNodes=r.selectors}return this},findAttribute:function(t,e){for(var n=e;n&&n.nodeType===1;){var r=n.getAttribute(t);if(r)return r;if(n===this.el)return null;n=n.parentNode}return null},_ensureElement:function(){if(this.el)this.setElement(Ur(this,"el"));else{var t=Ur(this,"tagName"),e=Mt({},Ur(this,"attributes")),n=Mt({},Ur(this,"style"));this.id&&(e.id=Ur(this,"id")),this.setElement(this._createElement(t)),this._setAttributes(e),this._setStyle(n)}this._ensureElClassName()},_setAttributes:function(t){this.svgElement?this.vel.attr(t):this.$el.attr(t)},_setStyle:function(t){this.$el.css(t)},_createElement:function(t){return this.svgElement?document.createElementNS(De.namespace.svg,t):document.createElement(t)},_setElement:function(t){this.$el=t instanceof Ui.$?t:Ui.$(t),this.el=this.$el[0],this.svgElement&&(this.vel=De(this.el))},_ensureElClassName:function(){var t=Ur(this,"className");if(t){var e=pa(t);this.svgElement?this.vel.removeClass(t).addClass(e):this.$el.removeClass(t).addClass(e)}},init:function(){},onRender:function(){},confirmUpdate:function(){return 0},setTheme:function(t,e){return e=e||{},this.theme&&this.requireSetThemeOverride&&!e.override?this:(this.removeThemeClassName(),this.addThemeClassName(t),this.onSetTheme(this.theme,t),this.theme=t,this)},addThemeClassName:function(t){if(t=t||this.theme,!t)return this;var e=this.themeClassNamePrefix+t;return this.svgElement?this.vel.addClass(e):this.$el.addClass(e),this},removeThemeClassName:function(t){t=t||this.theme;var e=this.themeClassNamePrefix+t;return this.svgElement?this.vel.removeClass(e):this.$el.removeClass(e),this},onSetTheme:function(t,e){},remove:function(){return this.onRemove(),this.undelegateDocumentEvents(),nf[this.cid]=null,Ui.View.prototype.remove.apply(this,arguments),this},onRemove:function(){},getEventNamespace:function(){return".joint-event-ns-"+this.cid},delegateElementEvents:function(t,e,n){if(!e)return this;n||(n={});var r=this.getEventNamespace();for(var i in e){var s=e[i];typeof s!="function"&&(s=this[s]),s&&xn(t).on(i+r,n,s.bind(this))}return this},undelegateElementEvents:function(t){return xn(t).off(this.getEventNamespace()),this},delegateDocumentEvents:function(t,e){return t||(t=Ur(this,"documentEvents")),this.delegateElementEvents(document,t,e)},undelegateDocumentEvents:function(){return this.undelegateElementEvents(document)},eventData:function(t,e){if(!t)throw new Error("eventData(): event object required.");var n=t.data,r="__"+this.cid+"__";return e===void 0?n?n[r]||{}:{}:(n||(n=t.data={}),n[r]||(n[r]={}),Mt(n[r],e),this)},stopPropagation:function(t){return this.eventData(t,{propagationStopped:!0}),this},isPropagationStopped:function(t){return!!this.eventData(t).propagationStopped}},{extend:function(){var t=Array.from(arguments),e=t[0]&&Mt({},t[0])||{},n=t[1]&&Mt({},t[1])||{},r=e.render||this.prototype&&this.prototype.render||null;return e.render=function(){return typeof r=="function"&&r.apply(this,arguments),this.render.__render__===r&&this.onRender(),this},e.render.__render__=r,Ui.View.extend.call(this,e,n)}}),h$="dbltap";if(xn.event&&!(h$ in xn.event.special)){const t=il.doubleTapInterval,e=30;xn.event.special[h$]={bindType:"touchend",delegateType:"touchend",handle:function(n,...r){const{handleObj:i,target:s}=n,o=xn.data(s),a=new Date().getTime(),l="lastTouch"in o?a-o.lastTouch:0;l<t&&l>e?(o.lastTouch=null,n.type=i.origType,i.handler.call(this,n,...r)):o.lastTouch=a}}}const Do={CELLS:"cells",BACK:"back",FRONT:"front",TOOLS:"tools",LABELS:"labels"},Whe=Yl.extend({tagName:"g",svgElement:!0,pivotNodes:null,defaultTheme:null,options:{name:""},className:function(){return pa(`${this.options.name}-layer`)},init:function(){this.pivotNodes={}},insertSortedNode:function(t,e){this.el.insertBefore(t,this.insertPivot(e))},insertNode:function(t){const{el:e}=this;t.parentNode!==e&&e.appendChild(t)},insertPivot:function(t){const{el:e,pivotNodes:n}=this;t=+t,t||(t=0);let r=n[t];if(r)return r;r=n[t]=document.createComment("z-index:"+(t+1));let i=-1/0;for(let s in n)s=+s,s<t&&s>i&&(i=s,t-1);if(i!==-1/0){const s=n[i];e.insertBefore(r,s.nextSibling)}else e.insertBefore(r,e.firstChild);return r},removePivots:function(){const{el:t,pivotNodes:e}=this;for(let n in e)t.removeChild(e[n]);this.pivotNodes={}}});function Hp(t){return t?Array.isArray(t)?t:[t]:[]}const ga=Yl.extend({tagName:"g",svgElement:!0,className:"highlight",HIGHLIGHT_FLAG:1,UPDATE_PRIORITY:3,DETACHABLE:!1,UPDATABLE:!0,MOUNTABLE:!0,cellView:null,nodeSelector:null,node:null,updateRequested:!1,postponedUpdate:!1,transformGroup:null,detachedTransformGroup:null,requestUpdate(t,e){const{paper:n}=t;this.cellView=t,this.nodeSelector=e,n&&(this.updateRequested=!0,n.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY))},confirmUpdate(){this.updateRequested=!1;const{cellView:t,nodeSelector:e}=this;return t.isMounted()?(this.update(t,e),this.mount(),this.transform(),0):(this.postponedUpdate=!0,0)},findNode(t,e=null){let n;if(typeof e=="string")[n]=t.findBySelector(e);else if(Hr(e)){const r=t.model.isLink(),{label:i=null,port:s,selector:o}=e;r&&i!==null?n=t.findLabelNode(i,o):!r&&s?n=t.findPortNode(s,o):[n]=t.findBySelector(o)}else e&&(n=De.toNode(e),n instanceof SVGElement||(n=null));return n||null},getNodeMatrix(t,e){const{options:n}=this,{layer:r}=n,{rotatableNode:i}=t,s=t.getNodeMatrix(e);return i?r?i.contains(e)?s:t.getRootRotateMatrix().inverse().multiply(s):t.getNodeRotateMatrix(e).multiply(s):s},mount(){const{MOUNTABLE:t,cellView:e,el:n,options:r,transformGroup:i,detachedTransformGroup:s,postponedUpdate:o,nodeSelector:a}=this;if(!t||i)return;if(o){this.update(e,a),this.transform();return}const{vel:l,paper:u}=e,{layer:c}=r;if(c){let f;s?(f=s,this.detachedTransformGroup=null):f=De("g").addClass("highlight-transform").append(n),this.transformGroup=f,u.getLayerView(c).insertSortedNode(f.node,r.z)}else(!n.parentNode||n.nextSibling)&&l.append(n)},unmount(){const{MOUNTABLE:t,transformGroup:e,vel:n}=this;t&&(e?(this.transformGroup=null,this.detachedTransformGroup=e,e.remove()):n.remove())},transform(){const{transformGroup:t,cellView:e,updateRequested:n}=this;if(!t||e.model.isLink()||n)return;const r=e.getRootTranslateMatrix(),i=e.getRootRotateMatrix(),s=r.multiply(i);t.attr("transform",De.matrixToTransformString(s))},update(){const{node:t,cellView:e,nodeSelector:n,updateRequested:r,id:i}=this;if(r)return;this.postponedUpdate=!1;const s=this.node=this.findNode(e,n);t&&this.unhighlight(e,t),s?(this.highlight(e,s),this.mount()):(this.unmount(),e.notify("cell:highlight:invalid",i,this))},onRemove(){const{node:t,cellView:e,id:n,constructor:r}=this;t&&this.unhighlight(e,t),this.unmount(),r._removeRef(e,n)},highlight(t,e){},unhighlight(t,e){},listenToUpdateAttributes(t){const e=Ur(this,"UPDATE_ATTRIBUTES");!Array.isArray(e)||e.length===0||this.listenTo(t.model,"change",this.onCellAttributeChange)},onCellAttributeChange(){const{cellView:t}=this;if(!t)return;const{model:e,paper:n}=t;Ur(this,"UPDATE_ATTRIBUTES").some(i=>e.hasChanged(i))&&n.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY)}},{_views:{},highlight:function(t,e,n){const r=this.uniqueId(e,n);this.add(t,e,r,n)},unhighlight:function(t,e,n){const r=this.uniqueId(e,n);this.remove(t,r)},get(t,e=null){const{cid:n}=t,{_views:r}=this,i=r[n];if(e===null){const s=[];if(!i)return s;for(let o in i){const a=i[o];a instanceof this&&s.push(a)}return s}else{if(!i)return null;if(e in i){const s=i[e];if(s instanceof this)return s}return null}},add(t,e,n,r={}){if(!n)throw new Error("dia.HighlighterView: An ID required.");const i=ga.get(t,n);i&&i.remove();const s=new this(r);return s.id=n,this._addRef(t,n,s),s.requestUpdate(t,e),s.listenToUpdateAttributes(t),s},_addRef(t,e,n){const{cid:r}=t,{_views:i}=this;let s=i[r];s||(s=i[r]={}),s[e]=n},_removeRef(t,e){const{cid:n}=t,{_views:r}=this,i=r[n];if(i){e&&delete i[e];for(let s in i)return;delete r[n]}},remove(t,e=null){Hp(this.get(t,e)).forEach(n=>{n.remove()})},removeAll(t,e=null){const{_views:n}=this;for(let r in n)for(let i in n[r]){const s=n[r][i];s.cellView.paper===t&&s instanceof this&&(e===null||i===e)&&s.remove()}},update(t,e=null,n=!1){Hp(this.get(t,e)).forEach(r=>{(n||r.UPDATABLE)&&r.update()})},transform(t,e=null){Hp(this.get(t,e)).forEach(n=>{n.UPDATABLE&&n.transform()})},unmount(t,e=null){Hp(this.get(t,e)).forEach(n=>n.unmount())},mount(t,e=null){Hp(this.get(t,e)).forEach(n=>n.mount())},uniqueId(t,e=""){return De.ensureId(t)+JSON.stringify(e)}}),Ch={DEFAULT:"default",EMBEDDING:"embedding",CONNECTING:"connecting",MAGNET_AVAILABILITY:"magnetAvailability",ELEMENT_AVAILABILITY:"elementAvailability"},Ghe={TOOLS:"TOOLS"},on=Yl.extend({tagName:"g",svgElement:!0,selector:"root",metrics:null,className:function(){var t=["cell"],e=this.model.get("type");return e&&e.toLowerCase().split(".").forEach(function(n,r,i){t.push("type-"+i.slice(0,r+1).join("-"))}),t.join(" ")},_presentationAttributes:null,_flags:null,setFlags:function(){var t={},e={},n=0,r,i,s,o=Ur(this,"presentationAttributes");for(var a in o)if(o.hasOwnProperty(a)){var l=o[a];for(Array.isArray(l)||(l=[l]),r=0,i=l.length;r<i;r++){s=l[r];var u=t[s];u||(u=t[s]=1<<n++),e[a]|=u}}var c=Ur(this,"initFlag");for(Array.isArray(c)||(c=[c]),r=0,i=c.length;r<i;r++)s=c[r],t[s]||(t[s]=1<<n++);if(n>25)throw new Error("dia.CellView: Maximum number of flags exceeded.");this._flags=t,this._presentationAttributes=e},hasFlag:function(t,e){return t&this.getFlag(e)},removeFlag:function(t,e){return t^t&this.getFlag(e)},getFlag:function(t){var e=this._flags;if(!e)return 0;var n=0;if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++)n|=e[t[r]];else n|=e[t];return n},attributes:function(){var t=this.model;return{"model-id":t.id,"data-type":t.attributes.type}},constructor:function(t){t.id=t.id||Wh(this),Yl.call(this,t)},initialize:function(){this.setFlags(),Yl.prototype.initialize.apply(this,arguments),this.cleanNodesCache(),this.$el.data("view",this),this.startListening()},startListening:function(){this.listenTo(this.model,"change",this.onAttributesChange)},onAttributesChange:function(t,e){var n=t.getChangeFlag(this._presentationAttributes);e.updateHandled||!n||(e.dirty&&this.hasFlag(n,"UPDATE")&&(n|=this.getFlag("RENDER")),e.tool&&(e.async=!1),this.requestUpdate(n,e))},requestUpdate:function(t,e){const{paper:n}=this;n&&t>0&&n.requestViewUpdate(this,t,this.UPDATE_PRIORITY,e)},parseDOMJSON:function(t,e){var n=Jb(t),r=n.selectors,i=n.groupSelectors;for(var s in i){if(r[s])throw new Error("dia.CellView: ambiguous group selector");r[s]=i[s]}if(e){var o=this.selector;if(r[o])throw new Error("dia.CellView: ambiguous root selector.");r[o]=e}return{fragment:n.fragment,selectors:r}},can:function(t){var e=Yn(this.options.interactive)?this.options.interactive(this):this.options.interactive;return Nn(e)&&e[t]!==!1||Kfe(e)&&e!==!1},findBySelector:function(t,e,n){if(e||(e=this.el),n||(n=this.selectors),!t||t===".")return[e];if(n){var r=n[t];if(r)return Array.isArray(r)?r:[r]}return xn(e).find(t).toArray()},notify:function(t){if(this.paper){var e=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[t].concat(e)),this.paper.trigger.apply(this.paper,[t,this].concat(e))}},getBBox:function(t){var e;if(t&&t.useModelGeometry){var n=this.model;e=n.getBBox().bbox(n.angle())}else e=this.getNodeBBox(this.el);return this.paper.localToPaperRect(e)},getNodeBBox:function(t){const e=this.getNodeBoundingRect(t),n=this.getRootTranslateMatrix().multiply(this.getNodeRotateMatrix(t)),r=this.getNodeMatrix(t);return De.transformRect(e,n.multiply(r))},getNodeRotateMatrix(t){return!this.rotatableNode||this.rotatableNode.contains(t)?this.getRootRotateMatrix():De.createSVGMatrix()},getNodeUnrotatedBBox:function(t){var e=this.getNodeBoundingRect(t),n=this.getNodeMatrix(t),r=this.getRootTranslateMatrix();return De.transformRect(e,r.multiply(n))},getRootTranslateMatrix:function(){var t=this.model,e=t.position(),n=De.createSVGMatrix().translate(e.x,e.y);return n},getRootRotateMatrix:function(){var t=De.createSVGMatrix(),e=this.model,n=e.angle();if(n){var r=e.getBBox(),i=r.width/2,s=r.height/2;t=t.translate(i,s).rotate(n).translate(-i,-s)}return t},_notifyHighlight:function(t,e,n={}){const{el:r}=this;let i;if(typeof e=="string"?[i=r]=this.findBySelector(e):[i=r]=this.$(e),n.partial=i!==r,n.type===void 0){let s;switch(!0){case n.embedding:s=Ch.EMBEDDING;break;case n.connecting:s=Ch.CONNECTING;break;case n.magnetAvailability:s=Ch.MAGNET_AVAILABILITY;break;case n.elementAvailability:s=Ch.ELEMENT_AVAILABILITY;break;default:s=Ch.DEFAULT;break}n.type=s}return this.notify(t,i,n),this},highlight:function(t,e){return this._notifyHighlight("cell:highlight",t,e)},unhighlight:function(t,e={}){return this._notifyHighlight("cell:unhighlight",t,e)},findMagnet:function(t){const e=this.el;let n=this.$(t)[0];n||(n=e);do{const r=n.getAttribute("magnet"),i=n===e;if((r||i)&&r!=="false")return n;if(i)return;n=n.parentNode}while(n)},findProxyNode:function(t,e){t||(t=this.el);const n=t.getAttribute(`${e}-selector`);if(n){const[r]=this.findBySelector(n);if(r)return r}return t},getSelector:function(t,e){var n;if(t===this.el)return typeof e=="string"&&(n="> "+e),n;if(t){var r=De(t).index()+1;n=t.tagName+":nth-child("+r+")",e&&(n+=" > "+e),n=this.getSelector(t.parentNode,n)}return n},addLinkFromMagnet:function(t,e,n){var r=this.paper,i=r.model,s=r.getDefaultLink(this,t);return s.set({source:this.getLinkEnd(t,e,n,s,"source"),target:{x:e,y:n}}).addTo(i,{async:!1,ui:!0}),s.findView(r)},getLinkEnd:function(t,...e){var n=this.model,r=n.id,i=this.findAttribute("port",t),s=t.getAttribute("joint-selector"),o={id:r};return s!=null&&(o.magnet=s),i!=null?(o.port=i,!n.hasPort(i)&&!s&&(o.selector=this.getSelector(t))):s==null&&this.el!==t&&(o.selector=this.getSelector(t)),this.customizeLinkEnd(o,t,...e)},customizeLinkEnd:function(t,e,n,r,i,s){const{paper:o}=this,{connectionStrategy:a}=o.options;if(typeof a=="function"){var l=a.call(o,t,this,e,new fe(n,r),i,s,o);if(l)return l}return t},getMagnetFromLinkEnd:function(t){var e=this.el,n=t.port,r=t.magnet,i=this.model,s;return n!=null&&i.isElement()&&i.hasPort(n)?s=this.findPortNode(n,r)||e:(r||(r=t.selector),!r&&n!=null&&(r='[port="'+n+'"]'),s=this.findBySelector(r,e,this.selectors)[0]),this.findProxyNode(s,"magnet")},dragLinkStart:function(t,e,n,r){this.model.startBatch("add-link");const i=this.addLinkFromMagnet(e,n,r);i.notifyPointerdown(t,n,r),i.eventData(t,i.startArrowheadMove("target",{whenNotAllowed:"remove"})),this.eventData(t,{linkView:i})},dragLink:function(t,e,n){var r=this.eventData(t),i=r.linkView;if(i)i.pointermove(t,e,n);else{var s=this.paper,o=s.options.magnetThreshold,a=this.getEventTarget(t),l=r.targetMagnet;if(o==="onleave"){if(l===a||De(l).contains(a))return}else if(s.eventData(t).mousemoved<=o)return;this.dragLinkStart(t,l,e,n)}},dragLinkEnd:function(t,e,n){var r=this.eventData(t),i=r.linkView;i&&(i.pointerup(t,e,n),this.model.stopBatch("add-link"))},getAttributeDefinition:function(t){return this.model.constructor.getAttributeDefinition(t)},setNodeAttributes:function(t,e){Hu(e)||(t instanceof SVGElement?De(t).attr(e):xn(t).attr(e))},processNodeAttributes:function(t,e){var n,r,i,s,o,a,l,u,c,f=[];for(n in e)e.hasOwnProperty(n)&&(r=e[n],i=this.getAttributeDefinition(n),i&&(!Yn(i.qualify)||i.qualify.call(this,r,t,e,this))?(Gi(i.set)&&(a||(a={}),a[i.set]=r),r!==null&&f.push(n,i)):(a||(a={}),a[ahe(n)]=r));for(s=0,o=f.length;s<o;s+=2)n=f[s],i=f[s+1],r=e[n],Yn(i.set)&&(l||(l={}),l[n]=r),Yn(i.position)&&(u||(u={}),u[n]=r),Yn(i.offset)&&(c||(c={}),c[n]=r);return{raw:e,normal:a,set:l,position:u,offset:c}},updateRelativeAttributes:function(t,e,n,r){r||(r={});var i,s,o,a=e.raw||{},l=e.normal||{},u=e.set,c=e.position,f=e.offset;for(i in u){s=u[i],o=this.getAttributeDefinition(i);var p=o.set.call(this,s,n.clone(),t,a,this);Nn(p)?Mt(l,p):p!==void 0&&(l[i]=p)}if(t instanceof HTMLElement){this.setNodeAttributes(t,l);return}var v=l.transform,b=De.transformStringToMatrix(v),E=fe(b.e,b.f);v&&(l=jf(l,"transform"),b.e=b.f=0);var P,S,A;if(c||f){var I=this.getNodeScale(t,r.scalableNode);P=I.sx,S=I.sy}var N=!1;for(i in c)s=c[i],o=this.getAttributeDefinition(i),A=o.position.call(this,s,n.clone(),t,a,this),A&&(E.offset(fe(A).scale(P,S)),N||(N=!0));this.setNodeAttributes(t,l);var x=!1;if(f){var g=this.getNodeBoundingRect(t);if(g.width>0&&g.height>0){var _=De.transformRect(g,b).scale(1/P,1/S);for(i in f)s=f[i],o=this.getAttributeDefinition(i),A=o.offset.call(this,s,_,t,a,this),A&&(E.offset(fe(A).scale(P,S)),x||(x=!0))}}(v!==void 0||N||x)&&(E.round(1),b.e=E.x,b.f=E.y,t.setAttribute("transform",De.matrixToTransformString(b)))},getNodeScale:function(t,e){var n,r;if(e&&e.contains(t)){var i=e.scale();n=1/i.sx,r=1/i.sy}else n=1,r=1;return{sx:n,sy:r}},cleanNodesCache:function(){this.metrics={}},nodeCache:function(t){var e=this.metrics;if(!e)return{};var n=De.ensureId(t),r=e[n];return r||(r=e[n]={}),r},getNodeData:function(t){var e=this.nodeCache(t);return e.data||(e.data={}),e.data},getNodeBoundingRect:function(t){var e=this.nodeCache(t);return e.boundingRect===void 0&&(e.boundingRect=De(t).getBBox()),new st(e.boundingRect)},getNodeMatrix:function(t){const e=this.nodeCache(t);if(e.magnetMatrix===void 0){const{rotatableNode:n,el:r}=this;let i;n&&n.contains(t)?i=n:i=r,e.magnetMatrix=De(t).getTransformToElement(i)}return De.createSVGMatrix(e.magnetMatrix)},getNodeShape:function(t){var e=this.nodeCache(t);return e.geometryShape===void 0&&(e.geometryShape=De(t).toGeometryShape()),e.geometryShape.clone()},isNodeConnection:function(t){return this.model.isLink()&&(!t||t===this.el)},findNodesAttributes:function(t,e,n,r){var i,s,o,a,l={},u=[];for(var c in t)if(t.hasOwnProperty(c)&&(o=t[c],!!Hr(o))){var f=n[c]=this.findBySelector(c,e,r);for(i=0,s=f.length;i<s;i++){var p=f[i];a=De.ensureId(p);var v=r&&r[c]===p,b=l[a];if(b){b.array||(u.push(a),b.array=!0,b.attributes=[b.attributes],b.selectedLength=[b.selectedLength]);var E=b.attributes,P=b.selectedLength;if(v)E.unshift(o),P.unshift(-1);else{var S=j6(P,s);E.splice(S,0,o),P.splice(S,0,s)}}else l[a]={attributes:o,selectedLength:v?-1:s,node:p,array:!1}}}for(i=0,s=u.length;i<s;i++)a=u[i],o=l[a],o.attributes=Wr({},...o.attributes.reverse());return l},getEventTarget:function(t,e={}){const{target:n,type:r,clientX:i=0,clientY:s=0}=t;return e.fromPoint||r==="touchmove"||r==="touchend"||"pointerId"in t&&n.hasPointerCapture(t.pointerId)?document.elementFromPoint(i,s):n},updateDOMSubtreeAttributes:function(t,e,n){n||(n={}),n.rootBBox||(n.rootBBox=st()),n.selectors||(n.selectors=this.selectors);var r={},i={},s=[],o=[],a,l,u,c,f,p=n.roAttributes,v=this.findNodesAttributes(p||e,t,r,n.selectors),b=p?this.findNodesAttributes(e,t,r,n.selectors):v;for(var E in v)if(c=v[E],u=c.attributes,l=c.node,f=this.processNodeAttributes(l,u),!f.set&&!f.position&&!f.offset)this.setNodeAttributes(l,f.normal);else{var P=b[E]&&b[E].attributes,S=P&&u.ref===void 0?P.ref:u.ref,A;if(S){if(A=(r[S]||this.findBySelector(S,t,n.selectors))[0],!A)throw new Error('dia.CellView: "'+S+'" reference does not exist.')}else A=null;if(a={node:l,refNode:A,processedAttributes:f,allAttributes:P},A){var I=o.findIndex(function(N){return N.refNode===l});I>-1?o.splice(I,0,a):o.push(a)}else s.push(a)}s.push(...o);for(let N=0,x=s.length;N<x;N++){a=s[N],l=a.node,A=a.refNode;const g=A?De.ensureId(A):"";let _=i[g];_||(_=i[g]=A?De(A).getBBox({target:Khe(l,A)}):n.rootBBox),p?(f=this.processNodeAttributes(l,a.allAttributes),this.mergeProcessedAttributes(f,a.processedAttributes)):f=a.processedAttributes,this.updateRelativeAttributes(l,f,_,n)}},mergeProcessedAttributes:function(t,e){t.set||(t.set={}),t.position||(t.position={}),t.offset||(t.offset={}),Mt(t.set,e.set),Mt(t.position,e.position),Mt(t.offset,e.offset);var n=t.normal&&t.normal.transform;n!==void 0&&e.normal&&(e.normal.transform=n),t.normal=e.normal},onMount(t){t||(this.mountTools(),ga.mount(this))},onDetach(){this.unmountTools(),ga.unmount(this)},onRemove:function(){this.removeTools(),this.removeHighlighters()},_toolsView:null,hasTools:function(t){var e=this._toolsView;return e?t?e.getName()===t:!0:!1},addTools:function(t){return this.removeTools(),t&&(this._toolsView=t,t.configure({relatedView:this}),t.listenTo(this.paper,"tools:event",this.onToolEvent.bind(this))),this},unmountTools(){const t=this._toolsView;return t&&t.unmount(),this},mountTools(){const t=this._toolsView;return t&&!t.isMounted()&&t.mount(),this},updateTools:function(t){var e=this._toolsView;return e&&e.update(t),this},removeTools:function(){var t=this._toolsView;return t&&(t.remove(),this._toolsView=null),this},hideTools:function(){var t=this._toolsView;return t&&t.hide(),this},showTools:function(){var t=this._toolsView;return t&&t.show(),this},onToolEvent:function(t){switch(t){case"remove":this.removeTools();break;case"hide":this.hideTools();break;case"show":this.showTools();break}},removeHighlighters:function(){ga.remove(this)},updateHighlighters:function(t=!1){ga.update(this,null,t)},transformHighlighters:function(){ga.transform(this)},preventDefaultInteraction(t){this.eventData(t,{defaultInteractionPrevented:!0})},isDefaultInteractionPrevented(t){const{defaultInteractionPrevented:e=!1}=this.eventData(t);return e},pointerdblclick:function(t,e,n){this.notify("cell:pointerdblclick",t,e,n)},pointerclick:function(t,e,n){this.notify("cell:pointerclick",t,e,n)},contextmenu:function(t,e,n){this.notify("cell:contextmenu",t,e,n)},pointerdown:function(t,e,n){const{model:r}=this,{graph:i}=r;i&&(r.startBatch("pointer"),this.eventData(t,{graph:i})),this.notify("cell:pointerdown",t,e,n)},pointermove:function(t,e,n){this.notify("cell:pointermove",t,e,n)},pointerup:function(t,e,n){const{graph:r}=this.eventData(t);this.notify("cell:pointerup",t,e,n),r&&r.stopBatch("pointer",{cell:this.model})},mouseover:function(t){this.notify("cell:mouseover",t)},mouseout:function(t){this.notify("cell:mouseout",t)},mouseenter:function(t){this.notify("cell:mouseenter",t)},mouseleave:function(t){this.notify("cell:mouseleave",t)},mousewheel:function(t,e,n,r){this.notify("cell:mousewheel",t,e,n,r)},onevent:function(t,e,n,r){this.notify(e,t,n,r)},onmagnet:function(){},magnetpointerdblclick:function(){},magnetcontextmenu:function(){},checkMouseleave(t){const{paper:e,model:n}=this;if(e.isAsync()){if(n.isLink()){const s=n.getSourceElement();if(s){const a=e.findViewByModel(s);a&&(e.dumpView(a),e.checkViewVisibility(a))}const o=n.getTargetElement();if(o){const a=e.findViewByModel(o);a&&(e.dumpView(a),e.checkViewVisibility(a))}}e.dumpView(this),e.checkViewVisibility(this)}const r=this.getEventTarget(t,{fromPoint:!0}),i=e.findView(r);i!==this&&(this.mouseleave(t),i&&i.mouseenter(t))},setInteractivity:function(t){this.options.interactive=t}},{Flags:Ghe,Highlighting:Ch,addPresentationAttributes:function(t){return Wr({},Ur(this.prototype,"presentationAttributes"),t,function(e,n){if(!(!e||!n)&&(typeof e=="string"&&(e=[e]),typeof n=="string"&&(n=[n]),Array.isArray(e)&&Array.isArray(n)))return av(e.concat(n))})}});function Khe(t,e){let n=t;do{if(n.contains(e))return n;n=n.parentNode}while(n);return null}const bn={TOOLS:on.Flags.TOOLS,UPDATE:"UPDATE",TRANSLATE:"TRANSLATE",RESIZE:"RESIZE",PORTS:"PORTS",ROTATE:"ROTATE",RENDER:"RENDER"},Ph={MOVE:"move",MAGNET:"magnet"},gi=on.extend({_removePorts:function(){},_renderPorts:function(){},className:function(){var t=on.prototype.className.apply(this).split(" ");return t.push("element"),t.join(" ")},initialize:function(){on.prototype.initialize.apply(this,arguments),this._initializePorts()},presentationAttributes:{attrs:[bn.UPDATE],position:[bn.TRANSLATE,bn.TOOLS],size:[bn.RESIZE,bn.PORTS,bn.TOOLS],angle:[bn.ROTATE,bn.TOOLS],markup:[bn.RENDER],ports:[bn.PORTS]},initFlag:[bn.RENDER],UPDATE_PRIORITY:0,confirmUpdate:function(t,e){const{useCSSSelectors:n}=il;this.hasFlag(t,bn.PORTS)&&(this._removePorts(),this._cleanPortsCache());let r=!1;if(this.hasFlag(t,bn.RENDER))this.render(),this.updateTools(e),this.updateHighlighters(!0),r=!0,t=this.removeFlag(t,[bn.RENDER,bn.UPDATE,bn.RESIZE,bn.TRANSLATE,bn.ROTATE,bn.PORTS,bn.TOOLS]);else{let i=!1;this.hasFlag(t,bn.RESIZE)&&(this.resize(e),i=!0,t=this.removeFlag(t,[bn.RESIZE,bn.UPDATE]),n&&(t=this.removeFlag(t,bn.PORTS))),this.hasFlag(t,bn.UPDATE)&&(this.update(this.model,null,e),t=this.removeFlag(t,bn.UPDATE),i=!0,n&&(t=this.removeFlag(t,bn.PORTS))),this.hasFlag(t,bn.TRANSLATE)&&(this.translate(),t=this.removeFlag(t,bn.TRANSLATE),r=!0),this.hasFlag(t,bn.ROTATE)&&(this.rotate(),t=this.removeFlag(t,bn.ROTATE),r=!0),this.hasFlag(t,bn.PORTS)&&(this._renderPorts(),i=!0,t=this.removeFlag(t,bn.PORTS)),i&&this.updateHighlighters(!1)}return r&&this.transformHighlighters(),this.hasFlag(t,bn.TOOLS)&&(this.updateTools(e),t=this.removeFlag(t,bn.TOOLS)),t},_initializePorts:function(){},update:function(t,e){this.cleanNodesCache();const{useCSSSelectors:n}=il;n&&this._removePorts();var r=this.model,i=r.attr();this.updateDOMSubtreeAttributes(this.el,i,{rootBBox:new st(r.size()),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode,roAttributes:e===i?null:e}),n&&this._renderPorts()},rotatableSelector:"rotatable",scalableSelector:"scalable",scalableNode:null,rotatableNode:null,renderMarkup:function(){var t=this.model,e=t.get("markup")||t.markup;if(!e)throw new Error("dia.ElementView: markup required");if(Array.isArray(e))return this.renderJSONMarkup(e);if(typeof e=="string")return this.renderStringMarkup(e);throw new Error("dia.ElementView: invalid markup")},renderJSONMarkup:function(t){var e=this.parseDOMJSON(t,this.el),n=this.selectors=e.selectors;this.rotatableNode=De(n[this.rotatableSelector])||null,this.scalableNode=De(n[this.scalableSelector])||null,this.vel.append(e.fragment)},renderStringMarkup:function(t){var e=this.vel;e.append(De(t)),this.rotatableNode=e.findOne(".rotatable"),this.scalableNode=e.findOne(".scalable");var n=this.selectors={};n[this.selector]=this.el},render:function(){return this.vel.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransformation(),this},resize:function(t){if(this.scalableNode)return this.sgResize(t);this.model.attributes.angle&&this.rotate(),this.update()},translate:function(){if(this.rotatableNode)return this.rgTranslate();this.updateTransformation()},rotate:function(){if(this.rotatableNode){this.rgRotate(),this.update();return}this.updateTransformation()},updateTransformation:function(){var t=this.getTranslateString(),e=this.getRotateString();e&&(t+=" "+e),this.vel.attr("transform",t)},getTranslateString:function(){var t=this.model.attributes.position;return"translate("+t.x+","+t.y+")"},getRotateString:function(){var t=this.model.attributes,e=t.angle;if(!e)return null;var n=t.size;return"rotate("+e+","+n.width/2+","+n.height/2+")"},rgRotate:function(){this.rotatableNode.attr("transform",this.getRotateString())},rgTranslate:function(){this.vel.attr("transform",this.getTranslateString())},sgResize:function(t){var e=this.model,n=e.angle(),r=e.size(),i=this.scalableNode,s=!1;i.node.getElementsByTagName("path").length>0&&(s=!0);var o=i.getBBox({recursive:s}),a=r.width/(o.width||1),l=r.height/(o.height||1);i.attr("transform","scale("+a+","+l+")");var u=this.rotatableNode,c=u&&u.attr("transform");if(c){u.attr("transform",c+" rotate("+-n+","+r.width/2+","+r.height/2+")");var f=i.getBBox({target:this.paper.cells});e.set("position",{x:f.x,y:f.y},Mt({updateHandled:!0},t)),this.translate(),this.rotate()}this.update()},prepareEmbedding:function(t={}){const e=t.model||this.model,r=(t.paper||this.paper).model,i=t.initialZIndices={},s=e.getEmbeddedCells({deep:!0}),o=r.getConnectedLinks(e,{deep:!0,includeEnclosed:!0});[e,...s,...o].forEach(u=>i[u.id]=u.attributes.z),e.startBatch("to-front"),e.toFront({deep:!0,ui:!0});const a=r.getElements().reduce((u,c)=>Math.max(u,c.attributes.z||0),0);o.forEach(u=>{u.attributes.z<=a&&u.set("z",a+1,{ui:!0})}),e.stopBatch("to-front");const l=e.parent();l?(r.getCell(l).unembed(e,{ui:!0}),t.initialParentId=l):t.initialParentId=null},processEmbedding:function(t={},e,n,r){const i=t.model||this.model,s=t.paper||this.paper,o=s.model,{findParentBy:a,frontParentOnly:l,validateEmbedding:u}=s.options;let c;Yn(a)?c=gn(a.call(o,this,e,n,r)):a==="pointer"?c=gn(o.findModelsFromPoint({x:n,y:r})):c=o.findModelsUnderElement(i,{searchBy:a}),c=c.filter(v=>v instanceof sl&&i.id!==v.id&&!v.isEmbeddedIn(i)),l&&(c=c.slice(-1));let f=null;const p=t.candidateEmbedView;for(let v=c.length-1;v>=0;v--){const b=c[v];if(p&&p.model.id==b.id){f=p;break}else{const E=b.findView(s);if(!Yn(u)||u.call(s,this,E)){f=E;break}}}f&&f!=p&&(this.clearEmbedding(t),t.candidateEmbedView=f.highlight(f.findProxyNode(null,"container"),{embedding:!0})),!f&&p&&this.clearEmbedding(t)},clearEmbedding:function(t){t||(t={});var e=t.candidateEmbedView;e&&(e.unhighlight(e.findProxyNode(null,"container"),{embedding:!0}),t.candidateEmbedView=null)},finalizeEmbedding:function(t={}){const e=t.candidateEmbedView,n=t.model||this.model,r=t.paper||this.paper;if(e)e.model.embed(n,{ui:!0}),e.unhighlight(e.findProxyNode(null,"container"),{embedding:!0}),t.candidateEmbedView=null;else{const{validateUnembedding:i}=r.options,{initialParentId:s}=t;if(s&&typeof i=="function"&&!i.call(r,this)){this._disallowUnembed(t);return}}r.model.getConnectedLinks(n,{deep:!0}).forEach(i=>{i.reparent({ui:!0})})},_disallowUnembed:function(t){const{model:e,whenNotAllowed:n="revert"}=t,r=e||this.model,s=(t.paper||this.paper).model;switch(n){case"remove":{r.remove({ui:!0});break}case"revert":{const{initialParentId:o,initialPosition:a,initialZIndices:l}=t;if(a){const{x:c,y:f}=a;r.position(c,f,{deep:!0,ui:!0})}l&&Object.keys(l).forEach(c=>{const f=s.getCell(c);f&&f.set("z",l[c],{ui:!0})});const u=s.getCell(o);u&&u.embed(r,{ui:!0});break}}},getDelegatedView:function(){for(var t=this,e=t.model,n=t.paper;t&&!e.isLink();){if(!e.isEmbedded()||t.can("stopDelegation"))return t;e=e.getParentCell(),t=n.findViewByModel(e)}return null},findProxyNode:function(t,e){t||(t=this.el);const n=t.getAttribute(`${e}-selector`);if(n){const r=this.findAttribute("port",t);if(r){const i=this.findPortNode(r,n);if(i)return i}else{const[i]=this.findBySelector(n);if(i)return i}}return t},notifyPointerdown(t,e,n){on.prototype.pointerdown.call(this,t,e,n),this.notify("element:pointerdown",t,e,n)},notifyPointermove(t,e,n){on.prototype.pointermove.call(this,t,e,n),this.notify("element:pointermove",t,e,n)},notifyPointerup(t,e,n){this.notify("element:pointerup",t,e,n),on.prototype.pointerup.call(this,t,e,n)},pointerdblclick:function(t,e,n){on.prototype.pointerdblclick.apply(this,arguments),this.notify("element:pointerdblclick",t,e,n)},pointerclick:function(t,e,n){on.prototype.pointerclick.apply(this,arguments),this.notify("element:pointerclick",t,e,n)},contextmenu:function(t,e,n){on.prototype.contextmenu.apply(this,arguments),this.notify("element:contextmenu",t,e,n)},pointerdown:function(t,e,n){this.notifyPointerdown(t,e,n),this.dragStart(t,e,n)},pointermove:function(t,e,n){const r=this.eventData(t),{targetMagnet:i,action:s,delegatedView:o}=r;switch(i&&this.magnetpointermove(t,i,e,n),s){case Ph.MAGNET:this.dragMagnet(t,e,n);break;case Ph.MOVE:(o||this).drag(t,e,n);default:if(r.preventPointerEvents)break;this.notifyPointermove(t,e,n);break}this.eventData(t,r)},pointerup:function(t,e,n){const r=this.eventData(t),{targetMagnet:i,action:s,delegatedView:o}=r;switch(i&&this.magnetpointerup(t,i,e,n),s){case Ph.MAGNET:this.dragMagnetEnd(t,e,n);break;case Ph.MOVE:(o||this).dragEnd(t,e,n);default:if(r.preventPointerEvents)break;this.notifyPointerup(t,e,n)}i&&this.magnetpointerclick(t,i,e,n),this.checkMouseleave(t)},mouseover:function(t){on.prototype.mouseover.apply(this,arguments),this.notify("element:mouseover",t)},mouseout:function(t){on.prototype.mouseout.apply(this,arguments),this.notify("element:mouseout",t)},mouseenter:function(t){on.prototype.mouseenter.apply(this,arguments),this.notify("element:mouseenter",t)},mouseleave:function(t){on.prototype.mouseleave.apply(this,arguments),this.notify("element:mouseleave",t)},mousewheel:function(t,e,n,r){on.prototype.mousewheel.apply(this,arguments),this.notify("element:mousewheel",t,e,n,r)},onmagnet:function(t,e,n){const{currentTarget:r}=t;this.magnetpointerdown(t,r,e,n),this.eventData(t,{targetMagnet:r}),this.dragMagnetStart(t,e,n)},magnetpointerdown:function(t,e,n,r){this.notify("element:magnet:pointerdown",t,e,n,r)},magnetpointermove:function(t,e,n,r){this.notify("element:magnet:pointermove",t,e,n,r)},magnetpointerup:function(t,e,n,r){this.notify("element:magnet:pointerup",t,e,n,r)},magnetpointerdblclick:function(t,e,n,r){this.notify("element:magnet:pointerdblclick",t,e,n,r)},magnetcontextmenu:function(t,e,n,r){this.notify("element:magnet:contextmenu",t,e,n,r)},dragStart:function(t,e,n){if(this.isDefaultInteractionPrevented(t))return;var r=this.getDelegatedView();if(!r||!r.can("elementMove"))return;this.eventData(t,{action:Ph.MOVE,delegatedView:r});const i=r.model.position();r.eventData(t,{initialPosition:i,pointerOffset:i.difference(e,n),restrictedArea:this.paper.getRestrictedArea(r,e,n)})},dragMagnetStart:function(t,e,n){const{paper:r}=this,i=t.isPropagationStopped();if(i&&this.eventData(t,{preventPointerEvents:!0}),this.isDefaultInteractionPrevented(t)||!this.can("addLinkFromMagnet"))return;const{targetMagnet:s=t.currentTarget}=this.eventData(t);if(t.stopPropagation(),!r.options.validateMagnet.call(r,this,s,t)){i?this.dragStart(t,e,n):this.pointerdown(t,e,n);return}r.options.magnetThreshold<=0&&this.dragLinkStart(t,s,e,n),this.eventData(t,{action:Ph.MAGNET})},drag:function(t,e,n){var r=this.paper,i=r.options.gridSize,s=this.model,o=this.eventData(t),{pointerOffset:a,restrictedArea:l,embedding:u}=o,c=Vf(e+a.x,i),f=Vf(n+a.y,i);s.position(c,f,{restrictedArea:l,deep:!0,ui:!0}),r.options.embeddingMode&&(u||(this.prepareEmbedding(o),u=!0),this.processEmbedding(o,t,e,n)),this.eventData(t,{embedding:u})},dragMagnet:function(t,e,n){this.dragLink(t,e,n)},dragEnd:function(t,e,n){var r=this.eventData(t);r.embedding&&this.finalizeEmbedding(r)},dragMagnetEnd:function(t,e,n){this.dragLinkEnd(t,e,n)},magnetpointerclick:function(t,e,n,r){var i=this.paper;i.eventData(t).mousemoved>i.options.clickThreshold||this.notify("element:magnet:pointerclick",t,e,n,r)}},{Flags:bn});Mt(gi.prototype,Uhe);const Yhe=function(t,e,n){return t},Jhe=function(t,e,n){var r=e.side||"bottom",i=zf(e.padding||40),s=n.sourceBBox,o=n.targetBBox,a=s.center(),l=o.center(),u,c,f;switch(r){case"bottom":f=1,u="y",c="height";break;case"top":f=-1,u="y",c="height";break;case"left":f=-1,u="x",c="width";break;case"right":f=1,u="x",c="width";break;default:throw new Error("Router: invalid side")}return a[u]+=f*(s[c]/2+i[r]),l[u]+=f*(o[c]/2+i[r]),f*(a[u]-l[u])>0?l[u]=a[u]:a[u]=l[u],[a].concat(t,l)};var Xhe={N:"S",S:"N",E:"W",W:"E"},Zhe={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function Zb(t,e,n){var r=new fe(t.x,e.y);return n.containsPoint(r)&&(r=new fe(e.x,t.y)),r}function cA(t,e){return t[e==="W"||e==="E"?"width":"height"]}function ps(t,e){return t.x===e.x?t.y>e.y?"N":"S":t.y===e.y?t.x>e.x?"W":"E":null}function cy(t){return new st(t.x,t.y,0,0)}function Qb(t){var e=zf(t.padding||t.elementPadding||20);return{x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}function r8(t,e){return t.sourceBBox.clone().moveAndExpand(Qb(e))}function i8(t,e){return t.targetBBox.clone().moveAndExpand(Qb(e))}function Qhe(t,e){if(t.sourceAnchor)return t.sourceAnchor;var n=r8(t,e);return n.center()}function ede(t,e){if(t.targetAnchor)return t.targetAnchor;var n=i8(t,e);return n.center()}function s8(t,e,n){var r=new fe(t.x,e.y),i=new fe(e.x,t.y),s=ps(t,r),o=ps(t,i),a=Xhe[n],l=s===n||s!==a&&(o===a||o!==n)?r:i;return{points:[l],direction:ps(l,e)}}function jy(t,e,n){var r=Zb(t,e,n);return{points:[r],direction:ps(r,e)}}function tde(t,e,n,r){var i={},s=[new fe(t.x,e.y),new fe(e.x,t.y)],o=s.filter(function(f){return!n.containsPoint(f)}),a=o.filter(function(f){return ps(f,t)!==r}),l;if(a.length>0)l=a.filter(function(f){return ps(t,f)===r}).pop(),l=l||a[0],i.points=[l],i.direction=ps(l,e);else{l=the(s,o)[0];var u=new fe(e).move(l,-cA(n,r)/2),c=Zb(u,t,n);i.points=[c,u],i.direction=ps(u,e)}return i}function nde(t,e,n,r){var i=jy(e,t,r),s=i.points[0];if(n.containsPoint(s)){i=jy(t,e,n);var o=i.points[0];if(r.containsPoint(o)){var a=new fe(t).move(o,-cA(n,ps(t,o))/2),l=new fe(e).move(s,-cA(r,ps(e,s))/2),u=new ht(a,l).midpoint(),c=jy(t,u,n),f=s8(u,e,c.direction);i.points=[c.points[0],f.points[0]],i.direction=f.direction}}return i}function WS(t,e,n,r,i){var s={},o=n.union(r).inflate(1),a=o.center().distance(e)>o.center().distance(t),l=a?e:t,u=a?t:e,c,f,p;return i?(c=fe.fromPolar(o.width+o.height,Zhe[i],l),c=o.pointNearestToPoint(c).move(c,-1)):c=o.pointNearestToPoint(l).move(l,1),f=Zb(c,u,o),c.round().equals(f.round())?(f=fe.fromPolar(o.width+o.height,Hs(c.theta(l))+Math.PI/2,u),f=o.pointNearestToPoint(f).move(u,1).round(),p=Zb(c,f,o),s.points=a?[f,p,c]:[c,p,f]):s.points=a?[f,c]:[c,f],s.direction=ps(a?c:f,e),s}function fA(t,e,n){var r=r8(n,e),i=i8(n,e),s=Qhe(n,e),o=ede(n,e);r=r.union(cy(s)),i=i.union(cy(o)),t=gn(t).map(fe),t.unshift(s),t.push(o);for(var a,l=[],u=0,c=t.length-1;u<c;u++){var f=null,p=t[u],v=t[u+1],b=!!ps(p,v);if(u===0)u+1===c?r.intersect(i.clone().inflate(1))?f=WS(p,v,r,i):b||(f=nde(p,v,r,i)):r.containsPoint(v)?f=WS(p,v,r,cy(v).moveAndExpand(Qb(e))):b||(f=jy(p,v,r));else if(u+1===c){var E=b&&ps(v,p)===a;i.containsPoint(p)||E?f=WS(p,v,cy(p).moveAndExpand(Qb(e)),i,a):b||(f=tde(p,v,i,a))}else b||(f=s8(p,v,a));f?(Array.prototype.push.apply(l,f.points),a=f.direction):a=ps(p,v),u+1<c&&l.push(v)}return l}var o8={step:10,maximumLoops:2e3,precision:1,maxAllowedDirectionChange:90,perpendicular:!0,excludeEnds:[],excludeTypes:["basic.Text"],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){return this.step},directions:function(){var t=this.step,e=this.cost();return[{offsetX:t,offsetY:0,cost:e},{offsetX:-t,offsetY:0,cost:e},{offsetX:0,offsetY:t,cost:e},{offsetX:0,offsetY:-t,cost:e}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},paddingBox:function(){var t=this.step;return{x:-t,y:-t,width:2*t,height:2*t}},isPointObstacle:null,fallbackRouter:function(t,e,n){if(!Yn(fA))throw new Error("Manhattan requires the orthogonal router as default fallback.");return fA(t,Mt({},o8,e),n)},fallbackRoute:function(t,e,n){return null},draggingRoute:null};function eO(t){this.map={},this.options=t,this.mapGridSize=100}eO.prototype.build=function(t,e){var n=this.options,r=gn(n.excludeEnds).reduce(function(l,u){var c=e.get(u);if(c){var f=t.getCell(c.id);f&&l.push(f)}return l},[]),i=[],s=t.getCell(e.get("source").id);s&&(i=iA(i,s.getAncestors().map(function(l){return l.id})));var o=t.getCell(e.get("target").id);o&&(i=iA(i,o.getAncestors().map(function(l){return l.id})));var a=this.mapGridSize;return t.getElements().reduce(function(l,u){var c=gn(n.excludeTypes).includes(u.get("type")),f=r.find(function(N){return N.id===u.id}),p=i.includes(u.id),v=c||f||p;if(!v)for(var b=u.getBBox().moveAndExpand(n.paddingBox),E=b.origin().snapToGrid(a),P=b.corner().snapToGrid(a),S=E.x;S<=P.x;S+=a)for(var A=E.y;A<=P.y;A+=a){var I=S+"@"+A;l[I]=l[I]||[],l[I].push(b)}return l},this.map),this};eO.prototype.isPointAccessible=function(t){var e=t.clone().snapToGrid(this.mapGridSize).toString();return gn(this.map[e]).every(function(n){return!n.containsPoint(t)})};function rh(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}rh.prototype.add=function(t,e){this.hash[t]?this.items.splice(this.items.indexOf(t),1):this.hash[t]=this.OPEN,this.values[t]=e;var n=j6(this.items,t,(function(r){return this.values[r]}).bind(this));this.items.splice(n,0,t)};rh.prototype.remove=function(t){this.hash[t]=this.CLOSE};rh.prototype.isOpen=function(t){return this.hash[t]===this.OPEN};rh.prototype.isClose=function(t){return this.hash[t]===this.CLOSE};rh.prototype.isEmpty=function(){return this.items.length===0};rh.prototype.pop=function(){var t=this.items.shift();return this.remove(t),t};function a8(t,e){return e&&e.paddingBox?t.sourceBBox.clone().moveAndExpand(e.paddingBox):t.sourceBBox.clone()}function l8(t,e){return e&&e.paddingBox?t.targetBBox.clone().moveAndExpand(e.paddingBox):t.targetBBox.clone()}function u8(t,e){if(t.sourceAnchor)return t.sourceAnchor;var n=a8(t,e);return n.center()}function rde(t,e){if(t.targetAnchor)return t.targetAnchor;var n=l8(t,e);return n.center()}function GS(t,e,n,r,i){var s=360/n,o=t.theta(ide(t,e,r,i)),a=ul(o+s/2);return s*Math.floor(a/s)}function ide(t,e,n,r){var i=r.step,s=e.x-t.x,o=e.y-t.y,a=s/n.x,l=o/n.y,u=a*i,c=l*i;return new fe(t.x+u,t.y+c)}function d$(t,e){var n=Math.abs(t-e);return n>180?360-n:n}function sde(t,e,n){var r=n.step;gn(n.directions).forEach(function(i){i.gridOffsetX=i.offsetX/r*e.x,i.gridOffsetY=i.offsetY/r*e.y})}function ode(t,e,n){return{source:e.clone(),x:p$(n.x-e.x,t),y:p$(n.y-e.y,t)}}function p$(t,e){if(!t)return e;var n=Math.abs(t),r=Math.round(n/e);if(!r)return n;var i=r*e,s=n-i,o=s/r;return e+o}function ade(t,e){var n=e.source,r=Vf(t.x-n.x,e.x)+n.x,i=Vf(t.y-n.y,e.y)+n.y;return new fe(r,i)}function ng(t,e){return t.round(e)}function zy(t,e,n){return ng(ade(t.clone(),e),n)}function _g(t){return t.clone().toString()}function KS(t){return new fe(t.x===0?0:Math.abs(t.x)/t.x,t.y===0?0:Math.abs(t.y)/t.y)}function lde(t,e,n,r,i,s,o){for(var a=[],l=KS(i.difference(n)),u=_g(n),c=t[u],f;c;){f=e[u];var p=KS(f.difference(c));p.equals(l)||(a.unshift(f),l=p),u=_g(c),c=t[u]}var v=e[u],b=KS(v.difference(r));return b.equals(l)||a.unshift(v),a}function g$(t,e){for(var n=1/0,r=0,i=e.length;r<i;r++){var s=t.manhattanDistance(e[r]);s<n&&(n=s)}return n}function m$(t,e,n,r,i){var s=i.precision,o=i.directionMap,a=t.difference(e.center()),l=Nn(o)?Object.keys(o):[],u=gn(n),c=l.reduce(function(f,p){if(u.includes(p)){for(var v=o[p],b=new fe(t.x+v.x*(Math.abs(a.x)+e.width),t.y+v.y*(Math.abs(a.y)+e.height)),E=new ht(t,b),P=E.intersect(e)||[],S=P.length,A,I=null,N=0;N<S;N++){var x=P[N],g=t.squaredDistance(x);(A===void 0||g>A)&&(A=g,I=x)}if(I){var _=zy(I,r,s);e.containsPoint(_)&&(_=zy(_.offset(v.x*r.x,v.y*r.y),r,s)),f.push(_)}}return f},[]);return e.containsPoint(t)||c.push(zy(t,r,s)),c}function ude(t,e,n,r){var i=r.precision,s,o;t instanceof st?s=ng(u8(this,r).clone(),i):s=ng(t.clone(),i),e instanceof st?o=ng(rde(this,r).clone(),i):o=ng(e.clone(),i);var a=ode(r.step,s,o),l,u,c,f;if(t instanceof st?(l=s,c=m$(l,t,r.startDirections,a,r)):(l=s,c=[l]),e instanceof st?(u=o,f=m$(o,e,r.endDirections,a,r)):(u=o,f=[u]),c=c.filter(Ve=>!n(Ve)),f=f.filter(Ve=>!n(Ve)),c.length>0&&f.length>0){for(var p=new rh,v={},b={},E={},P=0,S=c.length;P<S;P++){var A=c[P],I=_g(A);p.add(I,g$(A,f)),v[I]=A,E[I]=0}var N=r.previousDirectionAngle,x=N===void 0,g,_,M=r.directions;sde(M,a,r);for(var D=M.length,q=gn(f).reduce(function(Ve,z){var K=_g(z);return Ve.push(K),Ve},[]),R=r.maximumLoops;!p.isEmpty()&&R>0;){var W=p.pop(),G=v[W],Z=b[W],de=E[W],be=Z===void 0,_e=G.equals(l),Te;be?x?_e?Te=null:Te=GS(l,G,D,a,r):Te=N:Te=GS(Z,G,D,a,r);var Le=c.length===f.length;if(Le){for(var Ee=0;Ee<c.length;Ee++)if(!c[Ee].equals(f[Ee])){Le=!1;break}}var re=be&&Le;if(!re&&q.indexOf(W)>=0)return r.previousDirectionAngle=Te,lde(b,v,G,l,u);for(P=0;P<D;P++){g=M[P];var ne=g.angle;if(_=d$(Te,ne),!(!(x&&_e)&&_>r.maxAllowedDirectionChange)){var ee=zy(G.clone().offset(g.gridOffsetX,g.gridOffsetY),a,i),F=_g(ee);if(!(p.isClose(F)||n(ee))){if(q.indexOf(F)>=0){var U=ee.equals(u);if(!U){var ye=GS(ee,u,D,a,r),Fe=d$(ne,ye);if(Fe>r.maxAllowedDirectionChange)continue}}var He=g.cost,Be=_e?0:r.penalties[_],Pe=de+He+Be;(!p.isOpen(F)||Pe<E[F])&&(v[F]=ee,b[F]=G,E[F]=Pe,p.add(F,Pe+g$(ee,f)))}}}R--}}return r.fallbackRoute.call(this,l,u,r)}function cde(t){if(t.directions=Ur(t,"directions"),t.penalties=Ur(t,"penalties"),t.paddingBox=Ur(t,"paddingBox"),t.padding=Ur(t,"padding"),t.padding){var e=zf(t.padding);t.paddingBox={x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}gn(t.directions).forEach(function(n){var r=new fe(0,0),i=new fe(n.offsetX,n.offsetY);n.angle=ul(r.theta(i))})}function fde(t,e,n){cde(e),n.options.perpendicular=!!e.perpendicular;var r=a8(n,e),i=l8(n,e),s=u8(n,e);let o;if(typeof e.isPointObstacle=="function")o=e.isPointObstacle;else{const I=new eO(e);I.build(n.paper.model,n.model),o=N=>!I.isPointAccessible(N)}for(var a=gn(t).map(fe),l=[],u=s,c,f,p=0,v=a.length;p<=v;p++){var b=null;if(f=c||r,c=a[p],!c){c=i;var E=!n.model.get("source").id||!n.model.get("target").id;if(E&&Yn(e.draggingRoute)){var P=f===r?s:f,S=c.origin();b=e.draggingRoute.call(n,P,S,e)}}if(b=b||ude.call(n,f,c,o,e),b===null)return e.fallbackRouter(t,e,n);var A=b[0];A&&A.equals(u)&&b.shift(),u=b[b.length-1]||u,Array.prototype.push.apply(l,b)}return l}const hA=function(t,e,n){return fde(t,Mt({},o8,e),n)};var hde={maxAllowedDirectionChange:45,diagonalCost:function(){var t=this.step;return Math.ceil(Math.sqrt(t*t<<1))},directions:function(){var t=this.step,e=this.cost(),n=this.diagonalCost();return[{offsetX:t,offsetY:0,cost:e},{offsetX:t,offsetY:t,cost:n},{offsetX:0,offsetY:t,cost:e},{offsetX:-t,offsetY:t,cost:n},{offsetX:-t,offsetY:0,cost:e},{offsetX:-t,offsetY:-t,cost:n},{offsetX:0,offsetY:-t,cost:e},{offsetX:t,offsetY:-t,cost:n}]},fallbackRoute:function(t,e,n){var r=t.theta(e),i=[],s={x:e.x,y:t.y},o={x:t.x,y:e.y};if(r%180>90){var a=s;s=o,o=a}var l=r%90<45?s:o,u=new ht(t,l),c=90*Math.ceil(r/90),f=fe.fromPolar(u.squaredLength(),Hs(c+135),l),p=new ht(e,f),v=u.intersection(p),b=v||e,E=v?b:t,P=360/n.directions.length,S=E.theta(e),A=ul(S+P/2),I=P*Math.floor(A/P);return n.previousDirectionAngle=I,b&&i.push(b.round()),i.push(e),i}};const dde=function(t,e,n){if(!Yn(hA))throw new Error("Metro requires the manhattan router.");return hA(t,Mt({},hde,e),n)},hr={AUTO:"auto",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",ANCHOR_SIDE:"anchor-side",MAGNET_SIDE:"magnet-side"},v$=[hr.LEFT,hr.RIGHT,hr.TOP,hr.BOTTOM];function y$(t,e,n){const r=n.getTangentAtLength(n.getClosestPointLength(e));switch(Math.round(r.angle()/90)*90){case 0:case 360:return t.y<e.y?hr.TOP:hr.BOTTOM;case 90:return t.x<e.x?hr.LEFT:hr.RIGHT;case 180:return t.y<e.y?hr.TOP:hr.BOTTOM;case 270:return t.x<e.x?hr.LEFT:hr.RIGHT}}function c8(t,e,n){const r=e.margin||20;let{sourceDirection:i=hr.AUTO,targetDirection:s=hr.AUTO}=e;const o=n.sourceView,a=n.targetView,l=!!n.model.source().port,u=!!n.model.target().port;i===hr.AUTO&&(i=l?hr.MAGNET_SIDE:hr.ANCHOR_SIDE),s===hr.AUTO&&(s=u?hr.MAGNET_SIDE:hr.ANCHOR_SIDE);const c=n.sourceBBox,f=n.targetBBox,p=n.sourceAnchor,v=n.targetAnchor;let{x:b,y:E,width:P=0,height:S=0}=o&&o.model.isElement()?st.fromRectUnion(c,o.model.getBBox()):n.sourceAnchor,{x:A,y:I,width:N=0,height:x=0}=a&&a.model.isElement()?st.fromRectUnion(f,a.model.getBBox()):n.targetAnchor;const g=A+N,_=I+x,M=b+P,D=E+S,q=b-r,R=M+r,W=E-r,G=D+r,Z=A-r,de=g+r,be=I-r,_e=_+r,Te=p.clone();let Le;if(o)o.model.isLink()?Le=y$(v,p,o):i===hr.ANCHOR_SIDE?Le=c.sideNearestToPoint(p):i===hr.MAGNET_SIDE?Le=o.model.getBBox().sideNearestToPoint(p):Le=i;else{const z=new st(b,E,0,0);Le=v$.includes(i)?i:z.sideNearestToPoint(v)}switch(Le){case"left":Te.x=q;break;case"right":Te.x=R;break;case"top":Te.y=W;break;case"bottom":Te.y=G;break}const Ee=v.clone();let re;if(a)a.model.isLink()?re=y$(p,v,a):s===hr.ANCHOR_SIDE?re=f.sideNearestToPoint(v):s===hr.MAGNET_SIDE?re=a.model.getBBox().sideNearestToPoint(v):re=s;else{const z=new st(A,I,0,0);re=v$.includes(s)?s:z.sideNearestToPoint(p)}switch(re){case"left":Ee.x=Z;break;case"right":Ee.x=de;break;case"top":Ee.y=be;break;case"bottom":Ee.y=_e;break}const{x:ne,y:ee}=Te,{x:F,y:U}=Ee,ye=(A+g)/2,Fe=(I+_)/2,He=(b+M)/2,Be=(E+D)/2,Pe=(He<ye?M+A:g+b)/2,Ve=(Be<Fe?D+I:_+E)/2;if(Le==="left"&&re==="right"){if(q<=g){let K=Ve;return M<=A&&(_>=W&&U<ee?K=Math.min(be,W):I<=G&&U>=ee&&(K=Math.max(_e,G))),[{x:ne,y:ee},{x:ne,y:K},{x:F,y:K},{x:F,y:U}]}const z=(ne+F)/2;return[{x:z,y:ee},{x:z,y:U}]}else if(Le==="right"&&re==="left"){if(R>=A){let K=Ve;return ne>g&&(_>=W&&U<ee?K=Math.min(be,W):I<=G&&U>=ee&&(K=Math.max(_e,G))),[{x:ne,y:ee},{x:ne,y:K},{x:F,y:K},{x:F,y:U}]}const z=(ne+F)/2;return[{x:z,y:ee},{x:z,y:U}]}else if(Le==="top"&&re==="bottom"){if(ee<U){let K=Pe,C=ee;return ee<I&&(g>=q&&F<ne?K=Math.min(Z,q):A<=R&&F>=ne&&(K=Math.max(de,R))),[{x:ne,y:C},{x:K,y:C},{x:K,y:U},{x:F,y:U}]}const z=(ee+U)/2;return[{x:ne,y:z},{x:F,y:z}]}else if(Le==="bottom"&&re==="top"){if(ee-r>U){let K=Pe,C=ee;return ee>_&&(g>=q&&F<ne?K=Math.min(Z,q):A<=R&&F>=ne&&(K=Math.max(de,R))),[{x:ne,y:C},{x:K,y:C},{x:K,y:U},{x:F,y:U}]}const z=(ee+U)/2;return[{x:ne,y:z},{x:F,y:z}]}else if(Le==="top"&&re==="top"){let z,K=Math.min((D+I)/2,U),C=Math.min((E+_)/2,ee);if(U<ee){if(ne>=de||ne<=Z)return[{x:ne,y:Math.min(ee,U)},{x:F,y:Math.min(ee,U)}];F>ne?z=Math.min(ne,Z):z=Math.max(ne,de)}else{if(F>=R||F<=q)return[{x:ne,y:Math.min(ee,U)},{x:F,y:Math.min(ee,U)}];F>=ne?z=Math.max(F,R):z=Math.min(F,q)}return[{x:ne,y:C},{x:z,y:C},{x:z,y:K},{x:F,y:K}]}else if(Le==="bottom"&&re==="bottom"){if(A>=ne+r||g<=ne-r)return[{x:ne,y:Math.max(ee,U)},{x:F,y:Math.max(ee,U)}];let z,K,C;return U>ee?(K=Math.max((D+I)/2,U),C=Math.max((D+I)/2,ee),F>ne?z=Math.min(ne,Z):z=Math.max(ne,de)):(K=Math.max((E+_)/2,U),C=Math.max((E+_)/2,ee),F>ne?z=Math.min(F,q):z=Math.max(F,R)),[{x:ne,y:C},{x:z,y:C},{x:z,y:K},{x:F,y:K}]}else if(Le==="left"&&re==="left"){let z,K=Math.min((M+A)/2,F),C=Math.min((b+g)/2,ne);return F>ne?U<=ee?z=Math.min(W,U):z=Math.max(G,U):U>=ee?z=Math.min(be,ee):z=Math.max(_e,ee),[{x:C,y:ee},{x:C,y:z},{x:K,y:z},{x:K,y:U}]}else if(Le==="right"&&re==="right"){let z,K=Math.max((b+g)/2,F),C=Math.max((M+A)/2,ne);return F<ne?U<=ee?z=Math.min(W,U):z=Math.max(G,U):U>=ee?z=Math.min(be,ee):z=Math.max(_e,ee),[{x:C,y:ee},{x:C,y:z},{x:K,y:z},{x:K,y:U}]}else if(Le==="top"&&re==="right"){if(ee>U){if(ne<F){let K=(E+_)/2;return K>Fe&&K<_e&&ne<Z&&(K=be),[{x:ne,y:K},{x:F,y:K},{x:F,y:U}]}return[{x:ne,y:U}]}const z=(b+g)/2;if(ne>F&&D>=U)return[{x:ne,y:ee},{x:z,y:ee},{x:z,y:U}];if(z>q&&ee<_){const K=Math.min(E,I)-r,C=Math.max(M,g)+r;return[{x:ne,y:K},{x:C,y:K},{x:C,y:U}]}return[{x:ne,y:ee},{x:z,y:ee},{x:z,y:U}]}else if(Le==="top"&&re==="left"){if(ee>U){if(ne>F){let K=(E+_)/2;return K>Fe&&K<_e&&ne>de&&(K=be),[{x:ne,y:K},{x:F,y:K},{x:F,y:U}]}return[{x:ne,y:U}]}const z=(M+A)/2;if(ne<F&&D>=U)return[{x:ne,y:ee},{x:z,y:ee},{x:z,y:U}];if(z<R&&ee<_){const K=Math.min(E,I)-r,C=Math.min(b,A)-r;return[{x:ne,y:K},{x:C,y:K},{x:C,y:U}]}return[{x:ne,y:ee},{x:z,y:ee},{x:z,y:U}]}else if(Le==="bottom"&&re==="right"){if(ee<U){if(ne<F){let K=(D+I)/2;return K<Fe&&K>be&&ne<Z&&(K=_e),[{x:ne,y:K},{x:F,y:K},{x:F,y:U}]}return[{x:ne,y:U}]}else if(b<F){const K=Math.max(D,_)+r,C=Math.max(M,g)+r;return[{x:ne,y:K},{x:C,y:K},{x:C,y:U}]}const z=Pe;return[{x:ne,y:ee},{x:z,y:ee},{x:z,y:U}]}else if(Le==="bottom"&&re==="left"){if(ee<U){if(ne>F){let K=(D+I)/2;return K<Fe&&K>be&&ne>de&&(K=_e),[{x:ne,y:K},{x:F,y:K},{x:F,y:U}]}return[{x:ne,y:U}]}else if(M>F){const K=Math.max(D,_)+r,C=Math.min(b,A)-r;return[{x:ne,y:K},{x:C,y:K},{x:C,y:U}]}const z=Pe;return[{x:ne,y:ee},{x:z,y:ee},{x:z,y:U}]}else if(Le==="left"&&re==="bottom"){if(ne>F&&ee>=_e)return[{x:F,y:ee}];if(ne>=g&&ee<U){const C=(M+A)/2;return[{x:C,y:ee},{x:C,y:U},{x:F,y:U}]}if(F<M&&_<=E){const C=(E+_)/2;return[{x:ne,y:ee},{x:ne,y:C},{x:F,y:C}]}const z=Math.min(Z,ne),K=Math.max(D,_)+r;return[{x:z,y:ee},{x:z,y:K},{x:F,y:K}]}else if(Le==="left"&&re==="top"){if(ne>F&&ee<be)return[{x:F,y:ee}];if(ne>=g&&ee>U){const C=(b+g)/2;return[{x:C,y:ee},{x:C,y:U},{x:F,y:U}]}if(F<=M&&U>ee){const C=(I+D)/2;return[{x:ne,y:ee},{x:ne,y:C},{x:F,y:C}]}const z=U<ee?Math.min(b,A)-r:q,K=Math.min(E,I)-r;return[{x:z,y:ee},{x:z,y:K},{x:F,y:K}]}else if(Le==="right"&&re==="top"){if(ne<F&&ee<be)return[{x:F,y:ee}];if(M<A&&ee>U){let C=(M+A)/2;return[{x:C,y:ee},{x:C,y:U},{x:F,y:U}]}if(F<ne&&I>D){const C=(D+I)/2;return[{x:ne,y:ee},{x:ne,y:C},{x:F,y:C}]}const z=Math.max(M,g)+r,K=Math.min(E,I)-r;return[{x:z,y:ee},{x:z,y:K},{x:F,y:K}]}else if(Le==="right"&&re==="bottom"){if(ne<F&&ee>=_e)return[{x:F,y:ee}];if(ne<=A&&ee<U){const C=(M+A)/2;return[{x:C,y:ee},{x:C,y:U},{x:F,y:U}]}if(F>b&&_<E){const C=(E+_)/2;return[{x:ne,y:ee},{x:ne,y:C},{x:F,y:C}]}const z=Math.max(de,ne),K=Math.max(D,_)+r;return[{x:z,y:ee},{x:z,y:K},{x:F,y:K}]}}c8.Directions=hr;const pde=c8,gde=Object.freeze(Object.defineProperty({__proto__:null,manhattan:hA,metro:dde,normal:Yhe,oneSide:Jhe,orthogonal:fA,rightAngle:pde},Symbol.toStringTag,{value:"Module"})),Dh={POINT:"point",CUBIC:"cubic",LINE:"line",GAP:"gap"},mde=Object.values(Dh),vde=10,yde=1,tO=function(t,e,n=[],r={}){const{cornerType:i=Dh.POINT,cornerRadius:s=vde,cornerPreserveAspectRatio:o=!1,precision:a=yde,raw:l=!1}=r;if(mde.indexOf(i)===-1)throw new Error("Invalid `cornerType` provided to `straight` connector.");let u;if(i===Dh.POINT||!s){const c=[t].concat(n).concat([e]),f=new rr(c);u=new wt(f)}else{u=new wt,u.appendSegment(wt.createSegment("M",t));let c;const f=n.length;for(let p=0;p<f;p++){const v=new fe(n[p]),b=n[p-1]||t,E=n[p+1]||e,P=c||v.distance(b)/2;c=v.distance(E)/2;let S,A;o?S=A=-Math.min(s,P,c):(S=-Math.min(s,P),A=-Math.min(s,c));const I=v.clone().move(b,S).round(a),N=v.clone().move(E,A).round(a);switch(u.appendSegment(wt.createSegment("L",I)),i){case Dh.CUBIC:{const x=.3333333333333333,g=2/3,_=new fe(x*I.x+g*v.x,g*v.y+x*I.y),M=new fe(x*N.x+g*v.x,g*v.y+x*N.y);u.appendSegment(wt.createSegment("C",_,M,N));break}case Dh.LINE:{u.appendSegment(wt.createSegment("L",N));break}case Dh.GAP:{u.appendSegment(wt.createSegment("M",N));break}}}u.appendSegment(wt.createSegment("L",e))}return l?u:u.serialize()};var bde=5,b$=["arc","gap","cubic"],wde=0,w$=1,xde=["smooth"],fy=1/3,hy=2/3;function YS(t,e,n){var r=[].concat(t,n,e);return r.reduce(function(i,s,o){var a=r[o+1];return a!=null&&(i[o]=Ef(s,a)),i},[])}function Sde(t){var e=t.paper,n=e._jumpOverUpdateList;if(n==null){n=e._jumpOverUpdateList=[];var r=e.model;r.on("batch:stop",function(){this.hasActiveBatch()||Ede(e)}),r.on("reset",function(){n=e._jumpOverUpdateList=[]})}n.indexOf(t)<0&&(n.push(t),t.listenToOnce(t.model,"change:connector remove",function(){n.splice(n.indexOf(t),1)}))}function Ede(t){for(var e=t._jumpOverUpdateList,n=0;n<e.length;n++){const r=e[n],i=r.getFlag(r.constructor.Flags.CONNECTOR);r.requestUpdate(i)}}function _de(t,e){return gn(e).reduce(function(n,r){var i=t.intersection(r);return i&&n.push(i),n},[])}function x$(t,e){return Ef(t,e).squaredLength()}function Ade(t,e,n){return e.reduce(function(r,i,s){if(i.skip===!0)return r;var o=r.pop()||t,a=Hb(i).move(o.start,-n),l=Hb(i).move(o.start,+n),u=e[s+1];if(u!=null){var c=l.distance(u);c<=n&&(l=u.move(o.start,c),u.skip=!0)}else{var f=a.distance(o.end);if(f<n*2+w$)return r.push(o),r}var p=l.distance(o.start);if(p<n*2+w$)return r.push(o),r;var v=Ef(a,l);return v.isJump=!0,r.push(Ef(o.start,a),v,Ef(l,o.end)),r},[])}function S$(t,e,n,r){var i=new wt,s;return s=wt.createSegment("M",t[0].start),i.appendSegment(s),gn(t).forEach(function(o,a){if(o.isJump){var l,u,c,f;if(n==="arc"){l=-90,u=o.start.difference(o.end);var p=+(u.x<0||u.x===0&&u.y<0);p&&(l+=180);var v=o.midpoint(),b=new ht(v,o.end).rotate(v,l),E;E=new ht(o.start,v),c=E.pointAt(2/3).rotate(o.start,l),f=b.pointAt(1/3).rotate(b.end,-l),s=wt.createSegment("C",c,f,b.end),i.appendSegment(s),E=new ht(v,o.end),c=b.pointAt(1/3).rotate(b.end,l),f=E.pointAt(1/3).rotate(o.end,-l),s=wt.createSegment("C",c,f,o.end),i.appendSegment(s)}else if(n==="gap")s=wt.createSegment("M",o.end),i.appendSegment(s);else if(n==="cubic"){l=o.start.theta(o.end);var P=e*.6,S=e*1.35;u=o.start.difference(o.end),p=+(u.x<0||u.x===0&&u.y<0),p&&(S*=-1),c=fe(o.start.x+P,o.start.y+S).rotate(o.start,l),f=fe(o.end.x-P,o.end.y+S).rotate(o.end,l),s=wt.createSegment("C",c,f,o.end),i.appendSegment(s)}}else{var A=t[a+1];r==0||!A||A.isJump?(s=wt.createSegment("L",o.end),i.appendSegment(s)):kde(r,i,o.end,o.start,A.end)}}),i}function kde(t,e,n,r,i){var s=n.distance(r)/2,o=n.distance(i)/2,a=-Math.min(t,s),l=-Math.min(t,o),u=n.clone().move(r,a).round(),c=n.clone().move(i,l).round(),f=new fe(fy*u.x+hy*n.x,hy*n.y+fy*u.y),p=new fe(fy*c.x+hy*n.x,hy*n.y+fy*c.y),v;v=wt.createSegment("L",u),e.appendSegment(v),v=wt.createSegment("C",f,p,c),e.appendSegment(v)}const Cde=function(t,e,n,r){Sde(this);var i=r.raw,s=r.size||bde,o=r.jump&&(""+r.jump).toLowerCase(),a=r.radius||wde,l=r.ignoreConnectors||xde;b$.indexOf(o)===-1&&(o=b$[0]);var u=this.paper,c=u.model,f=c.getLinks();if(f.length===1)return S$(YS(t,e,n),s,o,a);var p=this.model,v=f.indexOf(p),b=u.options.defaultConnector||{},E=f.filter(function(x,g){var _=x.get("connector")||b;return gn(l).includes(_.name)?!1:g>v?_.name!=="jumpover":!0}),P=E.map(function(x){return u.findViewByModel(x)}),S=YS(t,e,n),A=P.map(function(x){return x==null?[]:x===this?S:YS(x.sourcePoint,x.targetPoint,x.route)},this),I=S.reduce(function(x,g){var _=E.reduce(function(M,D,q){if(D!==p){var R=_de(g,A[q]);M.push.apply(M,R)}return M},[]).sort(function(M,D){return x$(g.start,M)-x$(g.start,D)});return _.length>0?x.push.apply(x,Ade(g,_,s)):x.push(g),x},[]),N=S$(I,s,o,a);return i?N:N.serialize()},Pde=function(t,e,n=[],r={}){const{raw:i}=r;return tO(t,e,n,{cornerType:"point",raw:i})},Ode=10,Tde=0,Mde=function(t,e,n=[],r={}){const{radius:i=Ode,raw:s}=r;return tO(t,e,n,{cornerType:"cubic",cornerRadius:i,precision:Tde,raw:s})},Nde=function(t,e,n,r){var i=r&&r.raw,s;if(n&&n.length!==0){var o=[t].concat(n).concat([e]),a=Ln.throughPoints(o);s=new wt(a)}else{s=new wt;var l;if(l=wt.createSegment("M",t),s.appendSegment(l),Math.abs(t.x-e.x)>=Math.abs(t.y-e.y)){var u=(t.x+e.x)/2;l=wt.createSegment("C",u,t.y,u,e.y,e.x,e.y),s.appendSegment(l)}else{var c=(t.y+e.y)/2;l=wt.createSegment("C",t.x,c,e.x,c,e.x,e.y),s.appendSegment(l)}}return i?s:s.serialize()},zo={AUTO:"auto",HORIZONTAL:"horizontal",VERTICAL:"vertical",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},ls={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",AUTO:"auto",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},nO=function(t,e,n=[],r={},i){const s=!!r.raw,{direction:o=zo.AUTO,precision:a=3}=r,l={coeff:r.distanceCoefficient||.6,angleTangentCoefficient:r.angleTangentCoefficient||80,tau:r.tension||.5,sourceTangent:r.sourceTangent?new fe(r.sourceTangent):null,targetTangent:r.targetTangent?new fe(r.targetTangent):null,rotate:!!r.rotate};typeof r.sourceDirection=="string"?l.sourceDirection=r.sourceDirection:typeof r.sourceDirection=="number"?l.sourceDirection=new fe(1,0).rotate(null,r.sourceDirection):l.sourceDirection=r.sourceDirection?new fe(r.sourceDirection).normalize():null,typeof r.targetDirection=="string"?l.targetDirection=r.targetDirection:typeof r.targetDirection=="number"?l.targetDirection=new fe(1,0).rotate(null,r.targetDirection):l.targetDirection=r.targetDirection?new fe(r.targetDirection).normalize():null;const u=[t,...n,e].map(E=>new fe(E));let c;if(l.sourceTangent)c=l.sourceTangent;else{const E=Dde(i,u,o,l),P=u[0].distance(u[1])*l.coeff,S=u[1].difference(u[0]).normalize(),A=dA(E,S);if(A>Math.PI/4){const I=P+(A-Math.PI/4)*l.angleTangentCoefficient;c=E.clone().scale(I,I)}else c=E.clone().scale(P,P)}let f;if(l.targetTangent)f=l.targetTangent;else{const E=Fde(i,u,o,l),P=u.length-1,S=u[P-1].distance(u[P])*l.coeff,A=u[P-1].difference(u[P]).normalize(),I=dA(E,A);if(I>Math.PI/4){const N=S+(I-Math.PI/4)*l.angleTangentCoefficient;f=E.clone().scale(N,N)}else f=E.clone().scale(S,S)}const v=Bde(u,c,f,l).map(E=>jde(E,l)),b=new wt(v).round(a);return s?b:b.serialize()};nO.Directions=zo;nO.TangentDirections=ls;function Ide(t,e,n){const{sourceBBox:r}=t;let i,s;if(!t.sourceView)r.x>e[1].x?i="right":i="left";else if(s=t.sourceView.model.angle(),n.rotate&&s){const a=t.sourceView.getNodeUnrotatedBBox(t.sourceView.el),l=e[0].clone();l.rotate(r.center(),s),i=a.sideNearestToPoint(l)}else i=r.sideNearestToPoint(e[0]);let o;switch(i){case"left":o=new fe(-1,0);break;case"right":default:o=new fe(1,0);break}return n.rotate&&s&&o.rotate(null,-s),o}function $de(t,e,n){const{targetBBox:r}=t;let i,s;if(!t.targetView)r.x>e[e.length-2].x?i="left":i="right";else if(s=t.targetView.model.angle(),n.rotate&&s){const a=t.targetView.getNodeUnrotatedBBox(t.targetView.el),l=e[e.length-1].clone();l.rotate(r.center(),s),i=a.sideNearestToPoint(l)}else i=r.sideNearestToPoint(e[e.length-1]);let o;switch(i){case"left":o=new fe(-1,0);break;case"right":default:o=new fe(1,0);break}return n.rotate&&s&&o.rotate(null,-s),o}function Rde(t,e,n){const{sourceBBox:r}=t;let i,s;if(!t.sourceView)r.y>e[1].y?i="bottom":i="top";else if(s=t.sourceView.model.angle(),n.rotate&&s){const a=t.sourceView.getNodeUnrotatedBBox(t.sourceView.el),l=e[0].clone();l.rotate(r.center(),s),i=a.sideNearestToPoint(l)}else i=r.sideNearestToPoint(e[0]);let o;switch(i){case"top":o=new fe(0,-1);break;case"bottom":default:o=new fe(0,1);break}return n.rotate&&s&&o.rotate(null,-s),o}function Lde(t,e,n){const{targetBBox:r}=t;let i,s;if(!t.targetView)r.y>e[e.length-2].y?i="top":i="bottom";else if(s=t.targetView.model.angle(),n.rotate&&s){const a=t.targetView.getNodeUnrotatedBBox(t.targetView.el),l=e[e.length-1].clone();l.rotate(r.center(),s),i=a.sideNearestToPoint(l)}else i=r.sideNearestToPoint(e[e.length-1]);let o;switch(i){case"top":o=new fe(0,-1);break;case"bottom":default:o=new fe(0,1);break}return n.rotate&&s&&o.rotate(null,-s),o}function E$(t,e,n){const{sourceBBox:r}=t;let i,s;if(!t.sourceView)i=r.sideNearestToPoint(e[1]);else if(s=t.sourceView.model.angle(),n.rotate&&s){const a=t.sourceView.getNodeUnrotatedBBox(t.sourceView.el),l=e[0].clone();l.rotate(r.center(),s),i=a.sideNearestToPoint(l)}else i=r.sideNearestToPoint(e[0]);let o;switch(i){case"top":o=new fe(0,-1);break;case"bottom":o=new fe(0,1);break;case"right":o=new fe(1,0);break;case"left":o=new fe(-1,0);break}return n.rotate&&s&&o.rotate(null,-s),o}function _$(t,e,n){const{targetBBox:r}=t;let i,s;if(!t.targetView)i=r.sideNearestToPoint(e[e.length-2]);else if(s=t.targetView.model.angle(),n.rotate&&s){const a=t.targetView.getNodeUnrotatedBBox(t.targetView.el),l=e[e.length-1].clone();l.rotate(r.center(),s),i=a.sideNearestToPoint(l)}else i=r.sideNearestToPoint(e[e.length-1]);let o;switch(i){case"top":o=new fe(0,-1);break;case"bottom":o=new fe(0,1);break;case"right":o=new fe(1,0);break;case"left":o=new fe(-1,0);break}return n.rotate&&s&&o.rotate(null,-s),o}function A$(t,e,n){return e[1].difference(e[0]).normalize()}function k$(t,e,n){const r=e.length-1;return e[r-1].difference(e[r]).normalize()}function C$(t,e,n){const{sourceBBox:r}=t,i=r.center();return e[0].difference(i).normalize()}function P$(t,e,n){const{targetBBox:r}=t,i=r.center();return e[e.length-1].difference(i).normalize()}function Dde(t,e,n,r){if(r.sourceDirection)switch(r.sourceDirection){case ls.UP:return new fe(0,-1);case ls.DOWN:return new fe(0,1);case ls.LEFT:return new fe(-1,0);case ls.RIGHT:return new fe(1,0);case ls.AUTO:return E$(t,e,r);case ls.CLOSEST_POINT:return A$(t,e);case ls.OUTWARDS:return C$(t,e);default:return r.sourceDirection}switch(n){case zo.HORIZONTAL:return Ide(t,e,r);case zo.VERTICAL:return Rde(t,e,r);case zo.CLOSEST_POINT:return A$(t,e);case zo.OUTWARDS:return C$(t,e);case zo.AUTO:default:return E$(t,e,r)}}function Fde(t,e,n,r){if(r.targetDirection)switch(r.targetDirection){case ls.UP:return new fe(0,-1);case ls.DOWN:return new fe(0,1);case ls.LEFT:return new fe(-1,0);case ls.RIGHT:return new fe(0,1);case ls.AUTO:return _$(t,e,r);case ls.CLOSEST_POINT:return k$(t,e);case ls.OUTWARDS:return P$(t,e);default:return r.targetDirection}switch(n){case zo.HORIZONTAL:return $de(t,e,r);case zo.VERTICAL:return Lde(t,e,r);case zo.CLOSEST_POINT:return k$(t,e);case zo.OUTWARDS:return P$(t,e);case zo.AUTO:default:return _$(t,e,r)}}function Vde(t,e){const n=Math.cos(e),r=Math.sin(e),i=n*t.x-r*t.y,s=r*t.x+n*t.y;t.x=i,t.y=s}function dA(t,e){let n=t.dot(e)/(t.magnitude()*e.magnitude());return n<-1&&(n=-1),n>1&&(n=1),Math.acos(n)}function O$(t,e){return t.x*e.y-t.y*e.x}function Bde(t,e,n,r){const{tau:i,coeff:s}=r,o=[],a=[],l=[],u=t.length-1;for(let c=0;c<u;c++)o[c]=t[c].distance(t[c+1]);a[0]=e,a[u]=n;for(let c=1;c<u;c++){let f,p;c===1?f=t[c-1].clone().offset(a[c-1].x,a[c-1].y):f=t[c-1].clone(),c===u-1?p=t[c+1].clone().offset(a[c+1].x,a[c+1].y):p=t[c+1].clone();const v=f.difference(t[c]).normalize(),b=p.difference(t[c]).normalize(),E=dA(v,b);let P=(Math.PI-E)/2,S;const A=O$(v,b);let I;I=O$(t[c].difference(t[c+1]),t[c].difference(t[c-1])),A<0&&(P=-P),E<Math.PI/2&&(P<0&&I<0||P>0&&I>0)&&(P=P-Math.PI),S=b.clone(),Vde(S,P);const N=S.clone(),x=S.clone(),g=o[c-1]*s,_=o[c]*s;N.scale(g,g),x.scale(_,_),a[c]=[N,x]}for(let c=0;c<u;c++){let f,p;c===0?f=t[c+1].difference(a[c].x/i,a[c].y/i):f=t[c+1].difference(a[c][1].x/i,a[c][1].y/i),c===u-1?p=t[c].clone().offset(a[c+1].x/i,a[c+1].y/i):p=t[c].difference(a[c+1][0].x/i,a[c+1][0].y/i),l[c]=[f,t[c],t[c+1],p]}return l}function jde(t,e){const{tau:n}=e,r=new fe;r.x=t[1].x+(t[2].x-t[0].x)/(6*n),r.y=t[1].y+(t[2].y-t[0].y)/(6*n);const i=new fe;return i.x=t[2].x+(t[3].x-t[1].x)/(6*n),i.y=t[2].y+(t[3].y-t[1].y)/(6*n),new Ln(t[1],r,i,t[2])}const zde=Object.freeze(Object.defineProperty({__proto__:null,curve:nO,jumpover:Cde,normal:Pde,rounded:Mde,smooth:Nde,straight:tO},Symbol.toStringTag,{value:"Module"})),Ut={TOOLS:on.Flags.TOOLS,RENDER:"RENDER",UPDATE:"UPDATE",LEGACY_TOOLS:"LEGACY_TOOLS",LABELS:"LABELS",VERTICES:"VERTICES",SOURCE:"SOURCE",TARGET:"TARGET",CONNECTOR:"CONNECTOR"},Ag=on.extend({className:function(){var t=on.prototype.className.apply(this).split(" ");return t.push("link"),t.join(" ")},options:{shortLinkLength:105,doubleLinkTools:!1,longLinkLength:155,linkToolsOffset:40,doubleLinkToolsOffset:65,sampleInterval:50},_labelCache:null,_labelSelectors:null,_markerCache:null,_V:null,_dragData:null,metrics:null,decimalsRounding:2,initialize:function(){on.prototype.initialize.apply(this,arguments),this._labelCache={},this._labelSelectors={},this._markerCache={},this._V={},this.cleanNodesCache()},presentationAttributes:{markup:[Ut.RENDER],attrs:[Ut.UPDATE],router:[Ut.UPDATE],connector:[Ut.CONNECTOR],smooth:[Ut.UPDATE],manhattan:[Ut.UPDATE],toolMarkup:[Ut.LEGACY_TOOLS],labels:[Ut.LABELS],labelMarkup:[Ut.LABELS],vertices:[Ut.VERTICES,Ut.UPDATE],vertexMarkup:[Ut.VERTICES],source:[Ut.SOURCE,Ut.UPDATE],target:[Ut.TARGET,Ut.UPDATE]},initFlag:[Ut.RENDER,Ut.SOURCE,Ut.TARGET,Ut.TOOLS],UPDATE_PRIORITY:1,confirmUpdate:function(t,e){if(e||(e={}),this.hasFlag(t,Ut.SOURCE)){if(!this.updateEndProperties("source"))return t;t=this.removeFlag(t,Ut.SOURCE)}if(this.hasFlag(t,Ut.TARGET)){if(!this.updateEndProperties("target"))return t;t=this.removeFlag(t,Ut.TARGET)}const{paper:n,sourceView:r,targetView:i}=this;if(n&&(r&&!n.isViewMounted(r)||i&&!n.isViewMounted(i)))return t;if(this.hasFlag(t,Ut.RENDER))return this.render(),this.updateHighlighters(!0),this.updateTools(e),t=this.removeFlag(t,[Ut.RENDER,Ut.UPDATE,Ut.VERTICES,Ut.LABELS,Ut.TOOLS,Ut.LEGACY_TOOLS,Ut.CONNECTOR]),t;let s=!1;this.hasFlag(t,Ut.VERTICES)&&(this.renderVertexMarkers(),t=this.removeFlag(t,Ut.VERTICES));const{model:o}=this,{attributes:a}=o;let l=this.hasFlag(t,Ut.LABELS),u=this.hasFlag(t,Ut.LEGACY_TOOLS);l&&(this.onLabelsChange(o,a.labels,e),t=this.removeFlag(t,Ut.LABELS),s=!0),u&&(this.renderTools(),t=this.removeFlag(t,Ut.LEGACY_TOOLS));const c=this.hasFlag(t,Ut.UPDATE),f=this.hasFlag(t,Ut.CONNECTOR);return(c||f)&&(c?e.translateBy&&o.isRelationshipEmbeddedIn(e.translateBy)?this.translate(e.tx,e.ty):this.update():(this.updatePath(),this.updateDOM()),this.updateTools(e),t=this.removeFlag(t,[Ut.UPDATE,Ut.TOOLS,Ut.CONNECTOR]),l=!1,u=!1,s=!0),l&&this.updateLabelPositions(),u&&this.updateToolsPosition(),s&&this.updateHighlighters(),this.hasFlag(t,Ut.TOOLS)&&(this.updateTools(e),t=this.removeFlag(t,Ut.TOOLS)),t},requestConnectionUpdate:function(t){this.requestUpdate(this.getFlag(Ut.UPDATE),t)},isLabelsRenderRequired:function(t={}){const e=this.model.previous("labels");if(!e)return!0;if("propertyPathArray"in t&&"propertyValue"in t){var n=t.propertyPathArray||[],r=n.length;if(r>1){var i=!!e[n[1]];if(i){if(r===2)return"markup"in Object(t.propertyValue);if(n[2]!=="markup")return!1}}}return!0},onLabelsChange:function(t,e,n){this.isLabelsRenderRequired(n)?this.renderLabels():this.updateLabels()},render:function(){return this.vel.empty(),this.unmountLabels(),this._V={},this.renderMarkup(),this.renderLabels(),this.update(),this},renderMarkup:function(){var t=this.model,e=t.get("markup")||t.markup;if(!e)throw new Error("dia.LinkView: markup required");if(Array.isArray(e))return this.renderJSONMarkup(e);if(typeof e=="string")return this.renderStringMarkup(e);throw new Error("dia.LinkView: invalid markup")},renderJSONMarkup:function(t){var e=this.parseDOMJSON(t,this.el);this.selectors=e.selectors,this.vel.append(e.fragment)},renderStringMarkup:function(t){var e=De(t);Array.isArray(e)||(e=[e]);for(var n=this._V,r=0,i=e.length;r<i;r++){var s=e[r],o=s.attr("class");o&&(o=she(o),n[xn.camelCase(o)]=s)}this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),this.vel.append(e)},_getLabelMarkup:function(t){if(t){if(Array.isArray(t))return this.parseDOMJSON(t,null);if(typeof t=="string")return this._getLabelStringMarkup(t);throw new Error("dia.linkView: invalid label markup")}},_getLabelStringMarkup:function(t){var e=De(t),n=document.createDocumentFragment();if(!Array.isArray(e))n.appendChild(e.node);else for(var r=0,i=e.length;r<i;r++){var s=e[r].node;n.appendChild(s)}return{fragment:n,selectors:{}}},_normalizeLabelMarkup:function(t){if(t){var e=t.fragment;if(!(t.fragment instanceof DocumentFragment)||!t.fragment.hasChildNodes())throw new Error("dia.LinkView: invalid label markup.");var n,r=e.childNodes;return r.length>1||r[0].nodeName.toUpperCase()!=="G"?n=De("g").append(e):n=De(r[0]),n.addClass("label"),{node:n.node,selectors:t.selectors}}},renderLabels:function(){var t=this._V,e=t.labels,n=this._labelCache={},r=this._labelSelectors={},i=this.model,s=i.attributes.labels||[],o=s.length;if(o===0)return e&&e.remove(),this;e?e.empty():(e=t.labels=De("g").addClass("labels"),this.options.labelsLayer&&(e.addClass(pa(Ur(this,"className"))),e.attr("model-id",i.id)));for(var a=0;a<o;a++){var l=s[a],u=this._normalizeLabelMarkup(this._getLabelMarkup(l.markup)),c,f;if(u)c=u.node,f=u.selectors;else{var p=i._builtins.defaultLabel,v=this._normalizeLabelMarkup(this._getLabelMarkup(p.markup)),b=i._getDefaultLabel(),E=this._normalizeLabelMarkup(this._getLabelMarkup(b.markup)),P=E||v;c=P.node,f=P.selectors}c.setAttribute("label-idx",a),e.append(c),n[a]=c;var S=this.selector;if(f[S])throw new Error("dia.LinkView: ambiguous label root selector.");f[S]=c,r[a]=f}return e.parent()||this.mountLabels(),this.updateLabels(),this},mountLabels:function(){const{el:t,paper:e,model:n,_V:r,options:i}=this,{labels:s}=r;if(!s||!n.hasLabels())return;const{node:o}=s;i.labelsLayer?e.getLayerView(i.labelsLayer).insertSortedNode(o,n.get("z")):o.parentNode!==t&&t.appendChild(o)},unmountLabels:function(){const{options:t,_V:e}=this;if(!e)return;const{labels:n}=e;n&&t.labelsLayer&&n.remove()},findLabelNode:function(t,e){const n=this._labelCache[t];if(!n)return null;const r=this._labelSelectors[t],[i=null]=this.findBySelector(e,n,r);return i},_mergeLabelAttrs:function(t,e,n,r){return e===null?null:e===void 0?n===null?null:n===void 0?t?void 0:r:t?n:Wr({},r,n):t?Wr({},n,e):Wr({},r,n,e)},_mergeLabelSize:function(t,e){return t===null?null:t===void 0?e===null?null:e===void 0?void 0:e:Wr({},e,t)},updateLabels:function(){if(!this._V.labels)return this;for(var t=this.model,e=t.get("labels")||[],n=this.can("labelMove"),r=t._builtins.defaultLabel,i=r.attrs,s=t._getDefaultLabel(),o=s.markup,a=s.attrs,l=s.size,u=0,c=e.length;u<c;u++){var f=this._labelCache[u];f.setAttribute("cursor",n?"move":"default");var p=this._labelSelectors[u],v=e[u],b=v.markup,E=v.attrs,P=v.size,S=this._mergeLabelAttrs(b||o,E,a,i),A=this._mergeLabelSize(P,l);this.updateDOMSubtreeAttributes(f,S,{rootBBox:new st(A),selectors:p})}return this},renderTools:function(){if(!this._V.linkTools)return this;var t=xn(this._V.linkTools.node).empty(),e=os(this.model.get("toolMarkup")||this.model.toolMarkup),n=De(e());if(t.append(n.node),this._toolCache=n,this.options.doubleLinkTools){var r;this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup?(e=os(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup),r=De(e())):r=n.clone(),t.append(r.node),this._tool2Cache=r}return this},renderVertexMarkers:function(){if(!this._V.markerVertices)return this;var t=xn(this._V.markerVertices.node).empty(),e=os(this.model.get("vertexMarkup")||this.model.vertexMarkup);return this.model.vertices().forEach(function(n,r){t.append(De(e(Mt({idx:r},n))).node)}),this},renderArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;var t=xn(this._V.markerArrowheads.node);t.empty();var e=os(this.model.get("arrowheadMarkup")||this.model.arrowheadMarkup);return this._V.sourceArrowhead=De(e({end:"source"})),this._V.targetArrowhead=De(e({end:"target"})),t.append(this._V.sourceArrowhead.node,this._V.targetArrowhead.node),this},removeRedundantLinearVertices:function(t){const n=this.model,r=n.vertices(),i=[this.sourceAnchor,...r,this.targetAnchor],s=i.length,o=new rr(i);o.simplify({threshold:.001});const a=o.points.map(u=>u.toJSON()),l=a.length;return s===l?0:(n.vertices(a.slice(1,l-1),t),s-l)},updateDefaultConnectionPath:function(){var t=this._V;t.connection&&t.connection.attr("d",this.getSerializedConnection()),t.connectionWrap&&t.connectionWrap.attr("d",this.getSerializedConnection()),t.markerSource&&t.markerTarget&&this._translateAndAutoOrientArrows(t.markerSource,t.markerTarget)},getEndView:function(t){switch(t){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("dia.LinkView: type parameter required.")}},getEndAnchor:function(t){switch(t){case"source":return new fe(this.sourceAnchor);case"target":return new fe(this.targetAnchor);default:throw new Error("dia.LinkView: type parameter required.")}},getEndConnectionPoint:function(t){switch(t){case"source":return new fe(this.sourcePoint);case"target":return new fe(this.targetPoint);default:throw new Error("dia.LinkView: type parameter required.")}},getEndMagnet:function(t){switch(t){case"source":var e=this.sourceView;if(!e)break;return this.sourceMagnet||e.el;case"target":var n=this.targetView;if(!n)break;return this.targetMagnet||n.el;default:throw new Error("dia.LinkView: type parameter required.")}return null},update:function(){return this.updateRoute(),this.updatePath(),this.updateDOM(),this},translate:function(t=0,e=0){const{route:n,path:r}=this;if(!n||!r)return;const i=new rr(n);i.translate(t,e),this.route=i.points,this._translateConnectionPoints(t,e),r.translate(t,e),this.updateDOM()},updateDOM(){const{el:t,model:e,selectors:n}=this;this.cleanNodesCache(),this.updateDOMSubtreeAttributes(t,e.attr(),{selectors:n}),this.updateDefaultConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.options.perpendicular=null},updateRoute:function(){const{model:t}=this,e=t.vertices(),n=this.findAnchors(e),r=this.sourceAnchor=n.source,i=this.targetAnchor=n.target,s=this.findRoute(e);this.route=s;var o=this.findConnectionPoints(s,r,i);this.sourcePoint=o.source,this.targetPoint=o.target},updatePath:function(){const{route:t,sourcePoint:e,targetPoint:n}=this,r=this.findMarkerPoints(t,e,n),i=this.findPath(t,r.source||e,r.target||n);this.path=i},findMarkerPoints:function(t,e,n){var r=t[0],i=t[t.length-1],s=this._markerCache,o,a;return this._V.markerSource&&(s.sourceBBox=s.sourceBBox||this._V.markerSource.getBBox(),o=fe(e).move(r||n,s.sourceBBox.width*this._V.markerSource.scale().sx*-1).round()),this._V.markerTarget&&(s.targetBBox=s.targetBBox||this._V.markerTarget.getBBox(),a=fe(n).move(i||e,s.targetBBox.width*this._V.markerTarget.scale().sx*-1).round()),s.sourcePoint=o||e.clone(),s.targetPoint=a||n.clone(),{source:o,target:a}},findAnchorsOrdered:function(t,e,n,r){var i,s,o,a,l=this.model,u=l.get(t),c=l.get(n),f=this.getEndView(t),p=this.getEndView(n),v=this.getEndMagnet(t),b=this.getEndMagnet(n);f?(e?o=new fe(e):p?o=b:o=new fe(c),i=this.getAnchor(u.anchor,f,v,o,t)):i=new fe(u),p?(a=new fe(r||i),s=this.getAnchor(c.anchor,p,b,a,n)):s=new fe(c);var E={};return E[t]=i,E[n]=s,E},findAnchors:function(t){var e=this.model,n=t[0],r=t[t.length-1];return e.target().priority&&!e.source().priority?this.findAnchorsOrdered("target",r,"source",n):this.findAnchorsOrdered("source",n,"target",r)},findConnectionPoints:function(t,e,n){var r=t[0],i=t[t.length-1],s=this.model,o=s.get("source"),a=s.get("target"),l=this.sourceView,u=this.targetView,c=this.paper.options,f,p,v;if(l&&!l.isNodeConnection(this.sourceMagnet)){f=this.sourceMagnet||l.el;var b=o.connectionPoint||c.defaultConnectionPoint,E=r||n,P=new ht(E,e);v=this.getConnectionPoint(b,l,f,P,"source")}else v=e;var S;if(u&&!u.isNodeConnection(this.targetMagnet)){p=this.targetMagnet||u.el;var A=a.connectionPoint||c.defaultConnectionPoint,I=i||e,N=new ht(I,n);S=this.getConnectionPoint(A,u,p,N,"target")}else S=n;return{source:v,target:S}},getAnchor:function(t,e,n,r,i){var s=e.isNodeConnection(n),o=this.paper.options;if(t||(s?t=o.defaultLinkAnchor:o.perpendicularLinks||this.options.perpendicular?t={name:"perpendicular"}:t=o.defaultAnchor),!t)throw new Error("Anchor required.");var a;if(typeof t=="function")a=t;else{var l=t.name,u=s?"linkAnchorNamespace":"anchorNamespace";if(a=o[u][l],typeof a!="function")throw new Error("Unknown anchor: "+l)}var c=a.call(this,e,n,r,t.args||{},i,this);return c?c.round(this.decimalsRounding):new fe},getConnectionPoint:function(t,e,n,r,i){var s,o=r.end,a=this.paper.options;if(typeof a.linkConnectionPoint=="function"){var l=n===e.el?void 0:n;if(s=a.linkConnectionPoint(this,e,l,r.start,i),s)return s}if(!t)return o;var u;if(typeof t=="function")u=t;else{var c=t.name;if(u=a.connectionPointNamespace[c],typeof u!="function")throw new Error("Unknown connection point: "+c)}return s=u.call(this,r,e,n,t.args||{},i,this),s?s.round(this.decimalsRounding):o},_translateConnectionPoints:function(t,e){var n=this._markerCache;n.sourcePoint.offset(t,e),n.targetPoint.offset(t,e),this.sourcePoint.offset(t,e),this.targetPoint.offset(t,e),this.sourceAnchor.offset(t,e),this.targetAnchor.offset(t,e)},_getDefaultLabelPositionProperty:function(){var t=this.model,e=t._builtins.defaultLabel,n=e.position,r=t._getDefaultLabel(),i=this._normalizeLabelPosition(r.position);return Wr({},n,i)},_normalizeLabelPosition:function(t){return typeof t=="number"?{distance:t,offset:null,angle:0,args:null}:t},_mergeLabelPositionProperty:function(t,e){return t===null?null:t===void 0?e===null?null:e:Wr({},e,t)},updateLabelPositions:function(){if(!this._V.labels)return this;var t=this.path;if(!t)return this;var e=this.model,n=e.get("labels")||[];if(!n.length)return this;for(var r=this._getDefaultLabelPositionProperty(),i=0,s=n.length;i<s;i++){var o=this._labelCache[i];if(o){var a=n[i],l=this._normalizeLabelPosition(a.position),u=this._mergeLabelPositionProperty(l,r),c=this._getLabelTransformationMatrix(u);o.setAttribute("transform",De.matrixToTransformString(c)),this._cleanLabelMatrices(i)}}return this},_cleanLabelMatrices:function(t){const{metrics:e,_labelSelectors:n}=this,r=n[t];if(r)for(let i in r){const{id:s}=r[i];s&&s in e&&delete e[s].magnetMatrix}},updateToolsPosition:function(){if(!this._V.linkTools)return this;var t="",e=this.options.linkToolsOffset,n=this.getConnectionLength();if(!Number.isNaN(n)){n<this.options.shortLinkLength&&(t="scale(.5)",e/=2);var r=this.getPointAtLength(e);if(this._toolCache.attr("transform","translate("+r.x+", "+r.y+") "+t),this.options.doubleLinkTools&&n>=this.options.longLinkLength){var i=this.options.doubleLinkToolsOffset||e;r=this.getPointAtLength(n-i),this._tool2Cache.attr("transform","translate("+r.x+", "+r.y+") "+t),this._tool2Cache.attr("visibility","visible")}else this.options.doubleLinkTools&&this._tool2Cache.attr("visibility","hidden")}return this},updateArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;if(xn.css(this._V.markerArrowheads.node,"display")==="none")return this;var t=this.getConnectionLength()<this.options.shortLinkLength?.5:1;return this._V.sourceArrowhead.scale(t),this._V.targetArrowhead.scale(t),this._translateAndAutoOrientArrows(this._V.sourceArrowhead,this._V.targetArrowhead),this},updateEndProperties:function(t){const{model:e,paper:n}=this,r=`${t}View`,i=e.get(t),s=i&&i.id;if(!s)return this[r]=null,this.updateEndMagnet(t),!0;const o=n.getModelById(s);if(!o)throw new Error("LinkView: invalid "+t+" cell.");const a=o.findView(n);return a?(this[r]=a,this.updateEndMagnet(t),!0):!1},updateEndMagnet:function(t){const e=`${t}Magnet`,n=this.getEndView(t);if(n){let r=n.getMagnetFromLinkEnd(this.model.get(t));r===n.el&&(r=null),this[e]=r}else this[e]=null},_translateAndAutoOrientArrows:function(t,e){var n=gn(this.route);t&&t.translateAndAutoOrient(this.sourcePoint,n[0]||this.targetPoint,this.paper.cells),e&&e.translateAndAutoOrient(this.targetPoint,n[n.length-1]||this.sourcePoint,this.paper.cells)},_getLabelPositionProperty:function(t){return this.model.label(t).position||{}},_getLabelPositionAngle:function(t){var e=this._getLabelPositionProperty(t);return e.angle||0},_getLabelPositionArgs:function(t){var e=this._getLabelPositionProperty(t);return e.args},_getDefaultLabelPositionArgs:function(){var t=this.model._getDefaultLabel(),e=t.position||{};return e.args},_mergeLabelPositionArgs:function(t,e){return t===null?null:t===void 0?e===null?null:e:Wr({},e,t)},addLabel:function(t,e,n,r){var i,s,o=0,a;typeof t!="number"?(i=t.x,s=t.y,typeof e=="number"?(o=e,a=n):a=e):(i=t,s=e,typeof n=="number"?(o=n,a=r):a=n);var l=this._getDefaultLabelPositionArgs(),u=a,c=this._mergeLabelPositionArgs(u,l),f={position:this.getLabelPosition(i,s,o,c)},p=-1;return this.model.insertLabel(p,f,a),p},addVertex:function(t,e,n){var r=typeof t!="number",i=r?t.x:t,s=r?t.y:e,o=r?e:n,a={x:i,y:s},l=this.getVertexIndex(i,s);return this.model.insertVertex(l,a,o),l},sendToken:function(t,e,n){function r(f,p){return function(){f.remove(),typeof p=="function"&&p()}}var i,s,o;Nn(e)?(i=e.duration,s=e.direction==="reverse",o=e.connection):(i=e,s=!1,o=null),i=i||1e3;var a={dur:i+"ms",repeatCount:1,calcMode:"linear",fill:"freeze"};s&&(a.keyPoints="1;0",a.keyTimes="0;1");var l=De(t),u;if(typeof o=="string")u=this.findBySelector(o,this.el,this.selectors)[0];else{var c=this._V;u=c.connection?c.connection.node:this.el.querySelector("path")}if(!(u instanceof SVGPathElement))throw new Error("dia.LinkView: token animation requires a valid connection path.");l.appendTo(this.paper.cells).animateAlongPath(a,u),setTimeout(r(l,n),i)},findRoute:function(t){t||(t=[]);var e=this.paper.options.routerNamespace||gde,n=this.model.router(),r=this.paper.options.defaultRouter;if(!n)if(r)n=r;else return t.map(fe);var i=Yn(n)?n:e[n.name];if(!Yn(i))throw new Error('dia.LinkView: unknown router: "'+n.name+'".');var s=n.args||{},o=i.call(this,t,s,this);return o||t.map(fe)},findPath:function(t,e,n){var r=this.paper.options.connectorNamespace||zde,i=this.model.connector(),s=this.paper.options.defaultConnector;i||(i=s||{});var o=Yn(i)?i:r[i.name];if(!Yn(o))throw new Error('dia.LinkView: unknown connector: "'+i.name+'".');var a=ja(i.args||{});a.raw=!0;var l=o.call(this,e,n,t,a,this);return typeof l=="string"&&(l=new wt(De.normalizePathData(l))),l},getConnection:function(){var t=this.path;return t?t.clone():null},getSerializedConnection:function(){var t=this.path;if(!t)return null;var e=this.metrics;if(e.hasOwnProperty("data"))return e.data;var n=t.serialize();return e.data=n,n},getConnectionSubdivisions:function(){var t=this.path;if(!t)return null;var e=this.metrics;if(e.hasOwnProperty("segmentSubdivisions"))return e.segmentSubdivisions;var n=t.getSegmentSubdivisions();return e.segmentSubdivisions=n,n},getConnectionLength:function(){var t=this.path;if(!t)return 0;var e=this.metrics;if(e.hasOwnProperty("length"))return e.length;var n=t.length({segmentSubdivisions:this.getConnectionSubdivisions()});return e.length=n,n},getPointAtLength:function(t){var e=this.path;return e?e.pointAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getPointAtRatio:function(t){var e=this.path;return e?(Ni(t)&&(t=parseFloat(t)/100),e.pointAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()})):null},getTangentAtLength:function(t){var e=this.path;return e?e.tangentAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getTangentAtRatio:function(t){var e=this.path;return e?e.tangentAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPoint:function(t){var e=this.path;return e?e.closestPoint(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointLength:function(t){var e=this.path;return e?e.closestPointLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointRatio:function(t){var e=this.path;return e?e.closestPointNormalizedLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getLabelPosition:function(t,e,n,r){var i={},s=0,o;typeof n=="number"?(s=n,o=r):o=n,o&&(i.args=o);var a=!(o&&o.absoluteDistance),l=o&&o.absoluteDistance&&o.reverseDistance,u=o&&o.absoluteOffset,c=this.path,f={segmentSubdivisions:this.getConnectionSubdivisions()},p=new fe(t,e),v=c.closestPointT(p,f),b=c.lengthAtT(v,f);a&&(b=b/this.getConnectionLength()||0),l&&(b=-1*(this.getConnectionLength()-b)||1),i.distance=b;var E;u||(E=c.tangentAtT(v));var P;if(E)P=E.pointOffset(p);else{var S=c.pointAtT(v),A=p.difference(S);P={x:A.x,y:A.y}}return i.offset=P,i.angle=s,i},_getLabelTransformationMatrix:function(t){var e,n=0,r={};if(typeof t=="number")e=t;else if(typeof t.distance=="number")r=t.args||{},e=t.distance,n=t.angle||0;else throw new Error("dia.LinkView: invalid label position distance.");var i=e>0&&e<=1,s=0,o={x:0,y:0};if(t.offset){var a=t.offset;typeof a=="number"&&(s=a),a.x&&(o.x=a.x),a.y&&(o.y=a.y)}var l=o.x!==0||o.y!==0||s===0,u=r.keepGradient,c=r.ensureLegibility,f=this.path,p={segmentSubdivisions:this.getConnectionSubdivisions()},v=i?e*this.getConnectionLength():e,b=f.tangentAtLength(v,p),E,P=n;if(b){if(l)E=b.start.clone(),E.offset(o);else{var S=b.clone();S.rotate(b.start,-90),S.setLength(s),E=S.end}u&&(P=b.angle()+n,c&&(P=ul((P+90)%180-90)))}else E=f.start.clone(),l&&E.offset(o);return De.createSVGMatrix().translate(E.x,E.y).rotate(P)},getLabelCoordinates:function(t){var e=this._getLabelTransformationMatrix(t);return new fe(e.e,e.f)},getVertexIndex:function(t,e){for(var n=this.model,r=n.vertices(),i=this.getClosestPointLength(new fe(t,e)),s=0,o=r.length;s<o;s++){var a=r[s],l=this.getClosestPointLength(a);if(i<l)break}return s},notifyPointerdown(t,e,n){on.prototype.pointerdown.call(this,t,e,n),this.notify("link:pointerdown",t,e,n)},notifyPointermove(t,e,n){on.prototype.pointermove.call(this,t,e,n),this.notify("link:pointermove",t,e,n)},notifyPointerup(t,e,n){this.notify("link:pointerup",t,e,n),on.prototype.pointerup.call(this,t,e,n)},pointerdblclick:function(t,e,n){on.prototype.pointerdblclick.apply(this,arguments),this.notify("link:pointerdblclick",t,e,n)},pointerclick:function(t,e,n){on.prototype.pointerclick.apply(this,arguments),this.notify("link:pointerclick",t,e,n)},contextmenu:function(t,e,n){on.prototype.contextmenu.apply(this,arguments),this.notify("link:contextmenu",t,e,n)},pointerdown:function(t,e,n){this.notifyPointerdown(t,e,n);var r=t.target.getAttribute("class");switch(r){case"marker-vertex":this.dragVertexStart(t,e,n);return;case"marker-vertex-remove":case"marker-vertex-remove-area":this.dragVertexRemoveStart(t,e,n);return;case"marker-arrowhead":this.dragArrowheadStart(t,e,n);return;case"connection":case"connection-wrap":this.dragConnectionStart(t,e,n);return;case"marker-source":case"marker-target":return}this.dragStart(t,e,n)},pointermove:function(t,e,n){var r=this._dragData;r&&this.eventData(t,r);var i=this.eventData(t);switch(i.action){case"vertex-move":this.dragVertex(t,e,n);break;case"label-move":this.dragLabel(t,e,n);break;case"arrowhead-move":this.dragArrowhead(t,e,n);break;case"move":this.drag(t,e,n);break}r&&Mt(r,this.eventData(t)),this.notifyPointermove(t,e,n)},pointerup:function(t,e,n){var r=this._dragData;r&&(this.eventData(t,r),this._dragData=null);var i=this.eventData(t);switch(i.action){case"vertex-move":this.dragVertexEnd(t,e,n);break;case"label-move":this.dragLabelEnd(t,e,n);break;case"arrowhead-move":this.dragArrowheadEnd(t,e,n);break;case"move":this.dragEnd(t,e,n)}this.notifyPointerup(t,e,n),this.checkMouseleave(t)},mouseover:function(t){on.prototype.mouseover.apply(this,arguments),this.notify("link:mouseover",t)},mouseout:function(t){on.prototype.mouseout.apply(this,arguments),this.notify("link:mouseout",t)},mouseenter:function(t){on.prototype.mouseenter.apply(this,arguments),this.notify("link:mouseenter",t)},mouseleave:function(t){on.prototype.mouseleave.apply(this,arguments),this.notify("link:mouseleave",t)},mousewheel:function(t,e,n,r){on.prototype.mousewheel.apply(this,arguments),this.notify("link:mousewheel",t,e,n,r)},onevent:function(t,e,n,r){var i=De(t.target).findParentByClass("link-tool",this.el);if(i){if(t.stopPropagation(),this.can("useLinkTools"))if(e==="remove"){this.model.remove({ui:!0});return}else this.notify(e,t,n,r);this.notifyPointerdown(t,n,r),this.paper.delegateDragEvents(this,t.data)}else on.prototype.onevent.apply(this,arguments)},onlabel:function(t,e,n){this.notifyPointerdown(t,e,n),this.dragLabelStart(t,e,n);var r=this.eventData(t).stopPropagation;r&&t.stopPropagation()},dragConnectionStart:function(t,e,n){if(this.can("vertexAdd")){var r=this.addVertex({x:e,y:n},{ui:!0});this.eventData(t,{action:"vertex-move",vertexIdx:r})}},dragLabelStart:function(t,e,n){if(this.can("labelMove")){if(this.isDefaultInteractionPrevented(t))return;var r=t.currentTarget,i=parseInt(r.getAttribute("label-idx"),10),s=this._getDefaultLabelPositionProperty(),o=this._normalizeLabelPosition(this._getLabelPositionProperty(i)),a=this._mergeLabelPositionProperty(o,s),l=this.getLabelCoordinates(a),u=l.x-e,c=l.y-n,f=this._getLabelPositionAngle(i),p=this._getLabelPositionArgs(i),v=this._getDefaultLabelPositionArgs(),b=this._mergeLabelPositionArgs(p,v);this.eventData(t,{action:"label-move",labelIdx:i,dx:u,dy:c,positionAngle:f,positionArgs:b,stopPropagation:!0})}else this.eventData(t,{stopPropagation:!0});this.paper.delegateDragEvents(this,t.data)},dragVertexStart:function(t,e,n){if(this.can("vertexMove")){var r=t.target,i=parseInt(r.getAttribute("idx"),10);this.eventData(t,{action:"vertex-move",vertexIdx:i})}},dragVertexRemoveStart:function(t,e,n){if(this.can("vertexRemove")){var r=t.target,i=parseInt(r.getAttribute("idx"),10);this.model.removeVertex(i)}},dragArrowheadStart:function(t,e,n){if(this.can("arrowheadMove")){var r=t.target,i=r.getAttribute("end"),s=this.startArrowheadMove(i,{ignoreBackwardsCompatibility:!0});this.eventData(t,s)}},dragStart:function(t,e,n){this.isDefaultInteractionPrevented(t)||this.can("linkMove")&&this.eventData(t,{action:"move",dx:e,dy:n})},dragLabel:function(t,e,n){var r=this.eventData(t),i={position:this.getLabelPosition(e+r.dx,n+r.dy,r.positionAngle,r.positionArgs)};this.paper.options.snapLabels&&delete i.position.offset;const s={ui:!0};this.paper.isAsync()&&t.type==="touchmove"&&(s.async=!1),this.model.label(r.labelIdx,i,s)},dragVertex:function(t,e,n){var r=this.eventData(t);this.model.vertex(r.vertexIdx,{x:e,y:n},{ui:!0})},dragArrowhead:function(t,e,n){this.paper.options.snapLinks?!this._snapArrowhead(t,e,n)&&this.paper.options.snapLinksSelf&&this._snapArrowheadSelf(t,e,n):this.paper.options.snapLinksSelf?this._snapArrowheadSelf(t,e,n):this._connectArrowhead(this.getEventTarget(t),e,n,this.eventData(t))},drag:function(t,e,n){var r=this.eventData(t);this.model.translate(e-r.dx,n-r.dy,{ui:!0}),this.eventData(t,{dx:e,dy:n})},dragLabelEnd:function(){},dragVertexEnd:function(){},dragArrowheadEnd:function(t,e,n){var r=this.eventData(t),i=this.paper;i.options.snapLinks?this._snapArrowheadEnd(r):this._connectArrowheadEnd(r,e,n),i.linkAllowed(this)?(this._finishEmbedding(r),this._notifyConnectEvent(r,t)):this._disallow(r),this._afterArrowheadMove(r)},dragEnd:function(){},_disallow:function(t){switch(t.whenNotAllowed){case"remove":this.model.remove({ui:!0});break;case"revert":default:this.model.set(t.arrowhead,t.initialEnd,{ui:!0});break}},_finishEmbedding:function(t){this.paper.options.embeddingMode&&this.model.reparent()&&(t.z=null)},_notifyConnectEvent:function(t,e){var n=t.arrowhead,r=t.initialEnd,i=this.model.prop(n),s=i&&!nh.endsEqual(r,i);if(s){var o=this.paper;r.id&&this.notify("link:disconnect",e,o.findViewByModel(r.id),t.initialMagnet,n),i.id&&this.notify("link:connect",e,o.findViewByModel(i.id),t.magnetUnderPointer,n)}},_snapToPoints:function(t,e,n){let r=null,i=1/0,s=null,o=1/0,a=t.x,l=t.y;for(let u=0;u<e.length;u++){const c=Math.abs(e[u].x-t.x);c<i&&(i=c,r=e[u]);const f=Math.abs(e[u].y-t.y);f<o&&(o=f,s=e[u])}return i<n&&(a=r.x),o<n&&(l=s.y),{x:a,y:l}},_snapArrowheadSelf:function(t,e,n){const{paper:r,model:i}=this,{snapLinksSelf:s}=r.options,o=this.eventData(t),a=s.radius||20,l=this.getEndAnchor(o.arrowhead==="source"?"target":"source"),u=i.vertices(),c=[l,...u],f=this._snapToPoints({x:e,y:n},c,a);this._connectArrowhead(document.elementFromPoint(f.x,f.y),f.x,f.y,this.eventData(t))},_snapArrowhead:function(t,e,n){const{paper:r}=this,{snapLinks:i,connectionStrategy:s}=r.options,o=this.eventData(t);let a=!1;var l=i.radius||50,u=r.findViewsInArea({x:e-l,y:n-l,width:2*l,height:2*l}),c=o.closestView||null,f=o.closestMagnet||null,p=o.magnetProxy||null;o.closestView=o.closestMagnet=o.magnetProxy=null;var v=Number.MAX_VALUE,b=new fe(e,n);u.forEach(function(x){const g=[];x.el.getAttribute("magnet")!=="false"&&g.push({bbox:x.model.getBBox(),magnet:x.el}),x.$("[magnet]").toArray().forEach(_=>{g.push({bbox:x.getNodeBBox(_),magnet:_})}),g.forEach(_=>{const{magnet:M,bbox:D}=_,q=D.center().squaredDistance(b);q<v&&(f===M||r.options.validateConnection.apply(r,o.validateConnectionArgs(x,x.el===M?null:M)))&&(v=q,o.closestView=x,o.closestMagnet=M)})},this);var E,P=null,S=o.closestView,A=o.closestMagnet;A&&(P=o.magnetProxy=S.findProxyNode(A,"highlighter"));var I=o.arrowhead,N=f!==A;if(c&&N&&c.unhighlight(p,{connecting:!0,snapping:!0}),S){const{prevEnd:x,prevX:g,prevY:_}=o;if(o.prevX=e,o.prevY=n,a=!0,!N&&(typeof s!="function"||g===e&&_===n)||(E=S.getLinkEnd(A,e,n,this.model,I),!N&&qh(x,E)))return a;o.prevEnd=E,N&&S.highlight(P,{connecting:!0,snapping:!0})}else E={x:e,y:n};return this.model.set(I,E||{x:e,y:n},{ui:!0}),c&&this.notify("link:snap:disconnect",t,c,f,I),S&&this.notify("link:snap:connect",t,S,A,I),a},_snapArrowheadEnd:function(t){var e=t.closestView,n=t.closestMagnet;e&&n&&(e.unhighlight(t.magnetProxy,{connecting:!0,snapping:!0}),t.magnetUnderPointer=e.findMagnet(n)),t.closestView=t.closestMagnet=null},_connectArrowhead:function(t,e,n,r){const{paper:i,model:s}=this;if(r.eventTarget!==t){r.magnetProxy&&r.viewUnderPointer.unhighlight(r.magnetProxy,{connecting:!0});const o=r.viewUnderPointer=i.findView(t);if(o){const a=r.magnetUnderPointer=o.findMagnet(t),l=r.magnetProxy=o.findProxyNode(a,"highlighter");a&&this.paper.options.validateConnection.apply(i,r.validateConnectionArgs(o,a))?l&&o.highlight(l,{connecting:!0}):(r.magnetUnderPointer=null,r.magnetProxy=null)}else r.magnetUnderPointer=null,r.magnetProxy=null}r.eventTarget=t,s.set(r.arrowhead,{x:e,y:n},{ui:!0})},_connectArrowheadEnd:function(t={},e,n){const{model:r}=this,{viewUnderPointer:i,magnetUnderPointer:s,magnetProxy:o,arrowhead:a}=t;if(!s||!o||!i)return;i.unhighlight(o,{connecting:!0});const l=i.getLinkEnd(s,e,n,r,a);r.set(a,l,{ui:!0})},_beforeArrowheadMove:function(t){t.z=this.model.get("z"),this.model.toFront();var e=this.el.style;t.pointerEvents=e.pointerEvents,e.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets(t)},_afterArrowheadMove:function(t){t.z!==null&&(this.model.set("z",t.z,{ui:!0}),t.z=null),this.el.style.pointerEvents=t.pointerEvents,this.paper.options.markAvailable&&this._unmarkAvailableMagnets(t)},_createValidateConnectionArgs:function(t){var e=[];e[4]=t,e[5]=this;var n,r=0,i=0;t==="source"?(r=2,n="target"):(i=2,n="source");var s=this.model.get(n);if(s.id){var o=e[r]=this.paper.findViewByModel(s.id),a=o.getMagnetFromLinkEnd(s);a===o.el&&(a=void 0),e[r+1]=a}function l(u,c){return e[i]=u,e[i+1]=u.el===c?void 0:c,e}return l},_markAvailableMagnets:function(t){function e(f,p){var v=f.paper,b=v.options.validateConnection;return b.apply(v,this.validateConnectionArgs(f,p))}var n=this.paper,r=n.model.getCells();t.marked={};for(var i=0,s=r.length;i<s;i++){var o=r[i].findView(n);if(o){var a=Array.prototype.slice.call(o.el.querySelectorAll("[magnet]"));o.el.getAttribute("magnet")!=="false"&&a.push(o.el);var l=a.filter(e.bind(t,o));if(l.length>0){for(var u=0,c=l.length;u<c;u++)o.highlight(l[u],{magnetAvailability:!0});o.highlight(null,{elementAvailability:!0}),t.marked[o.model.id]=l}}}},_unmarkAvailableMagnets:function(t){for(var e=Object.keys(t.marked),n,r,i=0,s=e.length;i<s;i++){n=e[i],r=t.marked[n];var o=this.paper.findViewByModel(n);if(o){for(var a=0,l=r.length;a<l;a++)o.unhighlight(r[a],{magnetAvailability:!0});o.unhighlight(null,{elementAvailability:!0})}}t.marked=null},startArrowheadMove:function(t,e){e||(e={});var n={action:"arrowhead-move",arrowhead:t,whenNotAllowed:e.whenNotAllowed||"revert",initialMagnet:this[t+"Magnet"]||(this[t+"View"]?this[t+"View"].el:null),initialEnd:ja(this.model.get(t)),validateConnectionArgs:this._createValidateConnectionArgs(t)};return this._beforeArrowheadMove(n),e.ignoreBackwardsCompatibility!==!0&&(this._dragData=n),n},onMount:function(){on.prototype.onMount.apply(this,arguments),this.mountLabels()},onDetach:function(){on.prototype.onDetach.apply(this,arguments),this.unmountLabels()},onRemove:function(){on.prototype.onRemove.apply(this,arguments),this.unmountLabels()}},{Flags:Ut});Object.defineProperty(Ag.prototype,"sourceBBox",{enumerable:!0,get:function(){var t=this.sourceView;if(!t){var e=this.model.source();return new st(e.x,e.y)}var n=this.sourceMagnet;return t.isNodeConnection(n)?new st(this.sourceAnchor):t.getNodeBBox(n||t.el)}});Object.defineProperty(Ag.prototype,"targetBBox",{enumerable:!0,get:function(){var t=this.targetView;if(!t){var e=this.model.target();return new st(e.x,e.y)}var n=this.targetMagnet;return t.isNodeConnection(n)?new st(this.targetAnchor):t.getNodeBBox(n||t.el)}});const Hde=ga.extend({tagName:"path",className:"highlight-stroke",attributes:{"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},options:{padding:3,rx:0,ry:0,useFirstSubpath:!1,attrs:{"stroke-width":3,stroke:"#FEB663"}},getPathData(t,e){const{options:n}=this,{useFirstSubpath:r}=n;let i;try{const s=De(e);if(i=s.convertToPathData().trim(),s.tagName()==="PATH"&&r){const o=i.search(/.M/i)+1;o>0&&(i=i.substr(0,o))}}catch{const o=t.getNodeBoundingRect(e);i=De.rectToPath(Mt({},n,o.toJSON()))}return i},highlightConnection(t){this.vel.attr("d",t.getSerializedConnection())},highlightNode(t,e){const{vel:n,options:r}=this,{padding:i,layer:s}=r;let o=this.getNodeMatrix(t,e);if(i){!s&&e===t.el&&n.remove();let a=t.getNodeBoundingRect(e);const l=a.x+a.width/2,u=a.y+a.height/2;a=De.transformRect(a,o);const c=Math.max(a.width,1),f=Math.max(a.height,1),p=(c+i)/c,v=(f+i)/f,b=De.createSVGMatrix({a:p,b:0,c:0,d:v,e:l-p*l,f:u-v*u});o=o.multiply(b)}n.attr({d:this.getPathData(t,e),transform:De.matrixToTransformString(o)})},highlight(t,e){const{vel:n,options:r}=this;n.attr(r.attrs),t.isNodeConnection(e)?this.highlightConnection(t):this.highlightNode(t,e)}}),T$=20;function Ude(t,e){const n=t.children();for(;n.length>0;){const r=n.shift();e(r)&&n.push(...r.children())}}const qde=ga.extend({tagName:"rect",className:"highlight-mask",attributes:{"pointer-events":"none"},options:{padding:3,maskClip:T$,deep:!1,attrs:{stroke:"#FEB663","stroke-width":3,"stroke-linecap":"butt","stroke-linejoin":"miter"}},VISIBLE:"white",INVISIBLE:"black",MASK_ROOT_ATTRIBUTE_BLACKLIST:["marker-start","marker-end","marker-mid","transform","stroke-dasharray","class"],MASK_CHILD_ATTRIBUTE_BLACKLIST:["stroke","fill","stroke-width","stroke-opacity","stroke-dasharray","fill-opacity","marker-start","marker-end","marker-mid","class"],MASK_REPLACE_TAGS:["FOREIGNOBJECT","IMAGE","USE","TEXT","TSPAN","TEXTPATH"],MASK_REMOVE_TAGS:["TEXT","TSPAN","TEXTPATH"],transformMaskChild(t,e){const{MASK_CHILD_ATTRIBUTE_BLACKLIST:n,MASK_REPLACE_TAGS:r,MASK_REMOVE_TAGS:i}=this,s=e.tagName();if(!De.isSVGGraphicsElement(e)||i.includes(s))return e.remove(),!1;if(r.includes(s)){const o=t.vel.findOne(`#${e.id}`);if(o){const{node:a}=o;let l=t.getNodeBoundingRect(a);t.model.isElement()&&(l=De.transformRect(l,t.getNodeMatrix(a)));const u=De("rect",l.toJSON()),{x:c,y:f}=l.center(),{angle:p,cx:v=c,cy:b=f}=o.rotate();p&&u.rotate(p,v,b),e.parent().append(u)}return e.remove(),!1}return n.forEach(o=>{o==="fill"&&e.attr("fill")==="none"||e.removeAttr(o)}),!0},transformMaskRoot(t,e){const{MASK_ROOT_ATTRIBUTE_BLACKLIST:n}=this;n.forEach(r=>{e.removeAttr(r)})},getMaskShape(t,e){const{options:n,MASK_REPLACE_TAGS:r}=this,{deep:i}=n,s=e.tagName();let o;if(s==="G"){if(!i)return null;o=e.clone(),Ude(o,a=>this.transformMaskChild(t,a))}else{if(r.includes(s))return null;o=e.clone()}return this.transformMaskRoot(t,o),o},getMaskId(){return`highlight-mask-${this.cid}`},getMask(t,e){const{VISIBLE:n,INVISIBLE:r,options:i}=this,{padding:s,attrs:o}=i,a="stroke-width"in o?o["stroke-width"]:1,l=e.attr("fill")!=="none";let u=parseFloat(e.attr("stroke-width"));isNaN(u)&&(u=1);const c=u+s*2,f=c+a*2;let p=this.getMaskShape(t,e);if(!p){const v=t.getNodeBoundingRect(e.node);v.inflate(v.width?0:.5,v.height?0:.5),p=De("rect",v.toJSON())}return p.attr(o),De("mask",{id:this.getMaskId()}).append([p.clone().attr({fill:l?n:"none",stroke:n,"stroke-width":f}),p.clone().attr({fill:l?r:"none",stroke:r,"stroke-width":c})])},removeMask(t){const e=t.svg.getElementById(this.getMaskId());e&&t.defs.removeChild(e)},addMask(t,e){t.defs.appendChild(e.node)},highlight(t,e){const{options:n,vel:r}=this,{padding:i,attrs:s,maskClip:o=T$,layer:a}=n,l="stroke"in s?s.stroke:"#000000";!a&&e===t.el&&r.remove();const u=t.getNodeBoundingRect(e).inflate(i+o),c=this.getNodeMatrix(t,e),f=this.getMask(t,De(e));this.addMask(t.paper,f),r.attr(u.toJSON()),r.attr({transform:De.matrixToTransformString(c),mask:`url(#${f.id})`,fill:l})},unhighlight(t){this.removeMask(t.paper)}}),Wde=ga.extend({UPDATABLE:!1,MOUNTABLE:!1,opacityClassName:pa("highlight-opacity"),highlight:function(t,e){De(e).addClass(this.opacityClassName)},unhighlight:function(t,e){De(e).removeClass(this.opacityClassName)}}),M$=pa("highlighted"),Gde=ga.extend({UPDATABLE:!1,MOUNTABLE:!1,options:{className:M$},highlight:function(t,e){De(e).addClass(this.options.className)},unhighlight:function(t,e){De(e).removeClass(this.options.className)}},{className:M$}),JS={ROW:"row",COLUMN:"column"},Kde=ga.extend({tagName:"g",MOUNTABLE:!0,UPDATE_ATTRIBUTES:function(){return[this.options.attribute]},_prevItems:null,highlight(t,e){const n=t.model,{attribute:r,size:i=20,gap:s=5,direction:o=JS.ROW}=this.options;if(!r)throw new Error("List: attribute is required");const a=typeof i=="number"?{width:i,height:i}:i,l=o===JS.ROW,u=l?a.width:a.height;let c=n.get(r);Array.isArray(c)||(c=[]);const f=this._prevItems||[],p=c.map((P,S)=>qh(f[S],c[S]));if(f.length!==c.length||p.some(P=>!P)){const P=this.vel.children(),S=c.map((A,I)=>{const N=I in P?P[I].node:null;if(p[I])return N;const x=this.createListItem(A,a,N);if(!x)return null;if(!(x instanceof SVGElement))throw new Error("List: item must be an SVGElement");x.dataset.index=I,x.dataset.attribute=r;const g=I*(u+s);return x.setAttribute("transform",l?`translate(${g}, 0)`:`translate(0, ${g})`),x});this.vel.empty().append(S),this._prevItems=c}const v=c.length,b=v===0?0:v*u+(v-1)*s,E=l?{width:b,height:a.height}:{width:a.width,height:b};this.position(n,E)},position(t,e){const{vel:n,options:r}=this,{margin:i=5,position:s="top-left"}=r,{width:o,height:a}=t.size(),{left:l,right:u,top:c,bottom:f}=zf(i),p=new st(l,c,o-(l+u),a-(c+f));let{x:v,y:b}=Y6(p,s);switch(s){case Ir.CENTER:case Ir.TOP:case Ir.BOTTOM:{v-=e.width/2;break}case Ir.RIGHT:case Ir.BOTTOM_RIGHT:case Ir.TOP_RIGHT:{v-=e.width;break}}switch(s){case Ir.CENTER:case Ir.RIGHT:case Ir.LEFT:{b-=e.height/2;break}case Ir.BOTTOM:case Ir.BOTTOM_RIGHT:case Ir.BOTTOM_LEFT:{b-=e.height;break}}n.attr("transform",`translate(${v}, ${b})`)}},{Directions:JS,Positions:Ir}),Yde=Object.freeze(Object.defineProperty({__proto__:null,addClass:Gde,list:Kde,mask:qde,opacity:Wde,stroke:Hde},Symbol.toStringTag,{value:"Module"}));function Jde(t,e,n,r){var i="ratio"in r?r.ratio:.5;return t.getPointAtRatio(i)}function Xde(t,e,n,r){var i="length"in r?r.length:20;return t.getPointAtLength(i)}function Zde(t,e,n,r){var i=1e6,s=t.getConnection(),o=t.getConnectionSubdivisions(),a=new ht(n.clone().offset(0,i),n.clone().offset(0,-i)),l=new ht(n.clone().offset(i,0),n.clone().offset(-i,0)),u=a.intersect(s,{segmentSubdivisions:o}),c=l.intersect(s,{segmentSubdivisions:o}),f=[];return u&&Array.prototype.push.apply(f,u),c&&Array.prototype.push.apply(f,c),f.length>0?n.chooseClosest(f):"fallbackAt"in r?f8(t,r.fallbackAt):h8(t,e,n,r)}function Qde(t,e,n,r){var i=t.getClosestPoint(n);return i||new fe}function uv(t){return function(e,n,r,i){if(r instanceof Element){var s=this.paper.findView(r),o;if(s)if(s.isNodeConnection(r)){var a="fixedAt"in i?i.fixedAt:"50%";o=f8(s,a)}else o=s.getNodeBBox(r).center();else o=new fe;return t.call(this,e,n,o,i)}return t.apply(this,arguments)}}function f8(t,e){var n=parseFloat(e);return Ni(e)?t.getPointAtRatio(n/100):t.getPointAtLength(n)}const epe=uv(Zde),h8=uv(Qde),tpe=Object.freeze(Object.defineProperty({__proto__:null,connectionClosest:h8,connectionLength:Xde,connectionPerpendicular:epe,connectionRatio:Jde,resolveRef:uv},Symbol.toStringTag,{value:"Module"}));function Cw(t,e,n){if(Hr(n)){const{x:i,y:s}=n;if(isFinite(s)){const o=new ht(e,t),{start:a,end:l}=o.parallel(s);e=a,t=l}n=i}if(!isFinite(n))return t;var r=t.distance(e);return n===0&&r>0?t:t.move(e,-Math.min(n,r-1))}function rO(t){var e=t.getAttribute("stroke-width");return e===null?0:parseFloat(e)||0}function npe(t,e,n=0){let r,i,s,o;const{start:a,end:l}=t;switch(e){case"left":r="x",i=l,s=a,o=-1;break;case"right":r="x",i=a,s=l,o=1;break;case"top":r="y",i=l,s=a,o=-1;break;case"bottom":r="y",i=a,s=l,o=1;break;default:return}a[r]<l[r]?i[r]=s[r]:s[r]=i[r],isFinite(n)&&(i[r]+=o*n,s[r]+=o*n)}function rpe(t,e,n,r){let{offset:i,alignOffset:s,align:o}=r;return o&&npe(t,o,s),Cw(t.end,t.start,i)}function d8(t,e,n,r){var i=e.getNodeBBox(n);r.stroke&&i.inflate(rO(n)/2);var s=t.intersect(i),o=s?t.start.chooseClosest(s):t.end;return Cw(o,t.start,r.offset)}function ipe(t,e,n,r){var i=e.model.angle();if(i===0)return d8(t,e,n,r);var s=e.getNodeUnrotatedBBox(n);r.stroke&&s.inflate(rO(n)/2);var o=s.center(),a=t.clone().rotate(o,i),l=a.setLength(1e6).intersect(s),u=l?a.start.chooseClosest(l).rotate(o,-i):t.end;return Cw(u,t.start,r.offset)}function spe(t){if(!t)return null;var e=t;do{var n=e.tagName;if(typeof n!="string")return null;if(n=n.toUpperCase(),n==="G")e=e.firstElementChild;else if(n==="TITLE")e=e.nextElementSibling;else break}while(e);return e}var XS="segmentSubdivisons",ZS="shapeBBox";function ope(t,e,n,r){var i,s,o=r.selector,a=t.end;if(typeof o=="string"?i=e.findBySelector(o)[0]:o===!1?i=n:Array.isArray(o)?i=pm(n,o):i=spe(n),!De.isSVGGraphicsElement(i)){if(i===n||!De.isSVGGraphicsElement(n))return a;i=n}var l=e.getNodeShape(i),u=e.getNodeMatrix(i),c=e.getRootTranslateMatrix(),f=e.getRootRotateMatrix(),p=c.multiply(f).multiply(u),v=p.inverse(),b=De.transformLine(t,v),E=b.start.clone(),P=e.getNodeData(i);if(r.insideout===!1){P[ZS]||(P[ZS]=l.bbox());var S=P[ZS];if(S.containsPoint(E))return a}var A;if(l instanceof wt){var I=r.precision||2;P[XS]||(P[XS]=l.getSegmentSubdivisions({precision:I})),A={precision:I,segmentSubdivisions:P[XS]}}r.extrapolate===!0&&b.setLength(1e6),s=b.intersect(l,A),s?De.isArray(s)&&(s=E.chooseClosest(s)):r.sticky===!0&&(l instanceof st?s=l.pointNearestToPoint(E):l instanceof ds?s=l.intersectionWithLineFromCenterToPoint(E):s=l.closestPoint(E,A));var N=s?De.transformPoint(s,p):a,x=r.offset||0;return r.stroke&&(x+=rO(i)/2),Cw(N,t.start,x)}const ape=rpe,lpe=d8,upe=ipe,cpe=ope,fpe=Object.freeze(Object.defineProperty({__proto__:null,anchor:ape,bbox:lpe,boundary:cpe,rectangle:upe},Symbol.toStringTag,{value:"Module"}));function lu(t){return function(e,n,r,i){var s=!!i.rotate,o=s?e.getNodeUnrotatedBBox(n):e.getNodeBBox(n),a=o[t](),l=i.dx;if(l){var u=Ni(l);l=parseFloat(l),isFinite(l)&&(u&&(l/=100,l*=o.width),a.x+=l)}var c=i.dy;if(c){var f=Ni(c);c=parseFloat(c),isFinite(c)&&(f&&(c/=100,c*=o.height),a.y+=c)}return s?a.rotate(e.model.getBBox().center(),-e.model.angle()):a}}function hpe(t,e,n,r){var i=t.model.angle(),s=t.getNodeBBox(e),o=s.center(),a=s.origin(),l=s.corner(),u=r.padding;if(isFinite(u)||(u=0),a.y+u<=n.y&&n.y<=l.y-u){var c=n.y-o.y;o.x+=i===0||i===180?0:c*1/Math.tan(Hs(i)),o.y+=c}else if(a.x+u<=n.x&&n.x<=l.x-u){var f=n.x-o.x;o.y+=i===90||i===270?0:f*Math.tan(Hs(i)),o.x+=f}return o}function dpe(t,e,n,r){var i=!!r.rotate,s,o,a;i?(s=t.getNodeUnrotatedBBox(e),a=t.model.getBBox().center(),o=t.model.angle()):s=t.getNodeBBox(e);var l=r.padding;isFinite(l)&&s.inflate(l),i&&n.rotate(a,o);var u=s.sideNearestToPoint(n),c;switch(u){case"left":c=s.leftMiddle();break;case"right":c=s.rightMiddle();break;case"top":c=s.topMiddle();break;case"bottom":c=s.bottomMiddle();break}return i?c.rotate(a,-o):c}function ppe(t,e,n,r,i){return t.model.getPointFromConnectedLink(this.model,i).offset(r.dx,r.dy)}const gpe=lu("center"),mpe=lu("topMiddle"),vpe=lu("bottomMiddle"),ype=lu("leftMiddle"),bpe=lu("rightMiddle"),wpe=lu("origin"),xpe=lu("topRight"),Spe=lu("bottomLeft"),Epe=lu("corner"),_pe=uv(hpe),Ape=uv(dpe),kpe=ppe,Cpe=Object.freeze(Object.defineProperty({__proto__:null,bottom:vpe,bottomLeft:Spe,bottomRight:Epe,center:gpe,left:ype,midSide:Ape,modelCenter:kpe,perpendicular:_pe,right:bpe,top:mpe,topLeft:wpe,topRight:xpe},Symbol.toStringTag,{value:"Module"})),Oh={NONE:"sorting-none",APPROX:"sorting-approximate",EXACT:"sorting-exact"},Ppe=50,N$=20,I$=1e3,Ope=1/0,dy=9007199254740991,QS=on.Highlighting,$$={[QS.DEFAULT]:{name:"stroke",options:{padding:3}},[QS.MAGNET_AVAILABILITY]:{name:"addClass",options:{className:"available-magnet"}},[QS.ELEMENT_AVAILABILITY]:{name:"addClass",options:{className:"available-cell"}}},Tpe=[{name:Do.BACK},{name:Do.CELLS},{name:Do.LABELS},{name:Do.FRONT},{name:Do.TOOLS}],Mpe=Yl.extend({className:"paper",options:{width:800,height:600,origin:{x:0,y:0},gridSize:1,drawGrid:!1,drawGridSize:null,background:!1,perpendicularLinks:!1,elementView:gi,linkView:Ag,snapLabels:!1,snapLinks:!1,snapLinksSelf:!1,labelsLayer:!1,multiLinks:!0,guard:function(t,e){return!1},highlighting:$$,preventContextMenu:!0,preventDefaultBlankAction:!0,preventDefaultViewAction:!0,restrictTranslate:!1,markAvailable:!1,defaultLink:new nh,defaultConnector:{name:"normal"},defaultRouter:{name:"normal"},defaultAnchor:{name:"center"},defaultLinkAnchor:{name:"connectionRatio"},defaultConnectionPoint:{name:"bbox"},connectionStrategy:null,validateMagnet:function(t,e,n){return e.getAttribute("magnet")!=="passive"},validateConnection:function(t,e,n,r,i,s){return(i==="target"?n:t)instanceof gi},embeddingMode:!1,validateEmbedding:function(t,e){return!0},validateUnembedding:function(t){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,allowLink:null,clickThreshold:0,moveThreshold:0,magnetThreshold:0,sorting:Oh.EXACT,frozen:!1,autoFreeze:!1,onViewUpdate:function(t,e,n,r,i){e&(t.FLAG_INSERT|t.FLAG_REMOVE)||r.mounting||r.isolate||i.requestConnectedLinksUpdate(t,n,r)},onViewPostponed:function(t,e,n){return n.forcePostponedViewUpdate(t,e)},beforeRender:null,afterRender:null,viewport:null,cellViewNamespace:null,routerNamespace:null,connectorNamespace:null,highlighterNamespace:Yde,anchorNamespace:Cpe,linkAnchorNamespace:tpe,connectionPointNamespace:fpe,overflow:!1},events:{dblclick:"pointerdblclick",dbltap:"pointerdblclick",contextmenu:"contextmenu",mousedown:"pointerdown",touchstart:"pointerdown",mouseover:"mouseover",mouseout:"mouseout",mouseenter:"mouseenter",mouseleave:"mouseleave",wheel:"mousewheel","mouseenter .joint-cell":"mouseenter","mouseleave .joint-cell":"mouseleave","mouseenter .joint-tools":"mouseenter","mouseleave .joint-tools":"mouseleave","dblclick .joint-cell [magnet]":"magnetpointerdblclick","contextmenu .joint-cell [magnet]":"magnetcontextmenu","mousedown .joint-link .label":"onlabel","touchstart .joint-link .label":"onlabel","dragstart .joint-cell image":"onImageDragStart"},documentEvents:{mousemove:"pointermove",touchmove:"pointermove",mouseup:"pointerup",touchend:"pointerup",touchcancel:"pointerup"},svg:null,viewport:null,defs:null,tools:null,$background:null,layers:null,$grid:null,$document:null,_viewportMatrix:null,_viewportTransformString:null,_updates:null,_layers:null,SORT_DELAYING_BATCHES:["add","to-front","to-back"],UPDATE_DELAYING_BATCHES:["translate"],FORM_CONTROL_TAG_NAMES:["TEXTAREA","INPUT","BUTTON","SELECT","OPTION"],GUARDED_TAG_NAMES:["SELECT"],MIN_SCALE:1e-6,init:function(){const{options:t,el:e}=this;t.cellViewNamespace||(t.cellViewNamespace=typeof joint<"u"&&zl(joint,"shapes")?joint.shapes:null);const n=this.model=t.model||new Hl;this._layers={},this.setGrid(t.drawGrid),this.cloneOptions(),this.render(),this._setDimensions(),this.startListening(),this._views={},this._mw_evt_buffer={event:null,deltas:[]},this.$document=xn(e.ownerDocument),this.resetViews(n.attributes.cells.models),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()},_resetUpdates:function(){return this._updates={id:null,priorities:[{},{},{}],unmountedCids:[],mountedCids:[],unmounted:{},mounted:{},count:0,keyFrozen:!1,freezeKey:null,sort:!1,disabled:!1,idle:!1}},startListening:function(){var t=this.model;this.listenTo(t,"add",this.onCellAdded).listenTo(t,"remove",this.onCellRemoved).listenTo(t,"change",this.onCellChange).listenTo(t,"reset",this.onGraphReset).listenTo(t,"sort",this.onGraphSort).listenTo(t,"batch:stop",this.onGraphBatchStop),this.on("cell:highlight",this.onCellHighlight).on("cell:unhighlight",this.onCellUnhighlight).on("scale translate",this.update)},onCellAdded:function(t,e,n){var r=n.position;this.isAsync()||!$s(r)?this.renderView(t,n):(n.maxPosition===r&&this.freeze({key:"addCells"}),this.renderView(t,n),r===0&&this.unfreeze({key:"addCells"}))},onCellRemoved:function(t,e,n){const r=this.findViewByModel(t);r&&this.requestViewUpdate(r,r.FLAG_REMOVE,r.UPDATE_PRIORITY,n)},onCellChange:function(t,e){if(t!==this.model.attributes.cells&&t.hasChanged("z")&&this.options.sorting===Oh.APPROX){const n=this.findViewByModel(t);n&&this.requestViewUpdate(n,n.FLAG_INSERT,n.UPDATE_PRIORITY,e)}},onGraphReset:function(t,e){this.resetLayers(),this.resetViews(t.models,e)},onGraphSort:function(){this.model.hasActiveBatch(this.SORT_DELAYING_BATCHES)||this.sortViews()},onGraphBatchStop:function(t){if(!this.isFrozen()){var e=t&&t.batchName,n=this.model;if(!this.isAsync()){var r=this.UPDATE_DELAYING_BATCHES;r.includes(e)&&!n.hasActiveBatch(r)&&this.updateViews(t)}var i=this.SORT_DELAYING_BATCHES;i.includes(e)&&!n.hasActiveBatch(i)&&this.sortViews()}},cloneOptions:function(){const{options:t}=this,{defaultConnector:e,defaultRouter:n,defaultConnectionPoint:r,defaultAnchor:i,defaultLinkAnchor:s,origin:o,highlighting:a,cellViewNamespace:l,interactive:u}=t;!l&&typeof joint<"u"&&zl(joint,"shapes")&&(t.cellViewNamespace=joint.shapes),Yn(e)||(t.defaultConnector=Ro(e)),Yn(n)||(t.defaultRouter=Ro(n)),Yn(r)||(t.defaultConnectionPoint=Ro(r)),Yn(i)||(t.defaultAnchor=Ro(i)),Yn(s)||(t.defaultLinkAnchor=Ro(s)),Hr(u)&&(t.interactive=Mt({},u)),Hr(a)&&(t.highlighting=ZP({},a,$$)),t.origin=Mt({},o)},children:function(){var t=De.namespace;return[{namespaceURI:t.xhtml,tagName:"div",className:pa("paper-background"),selector:"background"},{namespaceURI:t.xhtml,tagName:"div",className:pa("paper-grid"),selector:"grid"},{namespaceURI:t.svg,tagName:"svg",attributes:{width:"100%",height:"100%","xmlns:xlink":t.xlink},selector:"svg",children:[{tagName:"defs",selector:"defs"},{tagName:"g",className:pa("layers"),selector:"layers"}]}]},hasLayerView(t){return t in this._layers},getLayerView(t){const{_layers:e}=this;if(t in e)return e[t];throw new Error(`dia.Paper: Unknown layer "${t}"`)},getLayerNode(t){return this.getLayerView(t).el},render:function(){this.renderChildren();const{childNodes:t,options:e}=this,{svg:n,defs:r,layers:i,background:s,grid:o}=t;return n.style.overflow=e.overflow?"visible":"hidden",this.svg=n,this.defs=r,this.layers=i,this.$background=xn(s),this.$grid=xn(o),this.renderLayers(),De.ensureId(n),e.background&&this.drawBackground(e.background),e.drawGrid&&this.drawGrid(),this},renderLayers:function(t=Tpe){this.removeLayers(),t.forEach(({name:i,sorted:s})=>{const o=new Whe({name:i});this.layers.appendChild(o.el),this._layers[i]=o});const e=this.getLayerView(Do.CELLS),n=this.getLayerView(Do.TOOLS),r=this.getLayerView(Do.LABELS);this.tools=n.el,this.cells=this.viewport=e.el,e.vel.addClass(pa("viewport")),r.vel.addClass(pa("viewport"))},removeLayers:function(){const{_layers:t}=this;Object.keys(t).forEach(e=>{t[e].remove(),delete t[e]})},resetLayers:function(){const{_layers:t}=this;Object.keys(t).forEach(e=>{t[e].removePivots()})},update:function(){return this.options.drawGrid&&this.drawGrid(),this._background&&this.updateBackgroundImage(this._background),this},matrix:function(t){var e=this.layers;if(t===void 0){var n=e.getAttribute("transform");return(this._viewportTransformString||null)===n?t=this._viewportMatrix:(t=e.getCTM(),this._viewportMatrix=t,this._viewportTransformString=n),De.createSVGMatrix(t)}t=De.createSVGMatrix(t);var r=De.matrixToTransformString(t);return e.setAttribute("transform",r),this._viewportMatrix=t,this._viewportTransformString=e.getAttribute("transform"),this},clientMatrix:function(){return De.createSVGMatrix(this.cells.getScreenCTM())},requestConnectedLinksUpdate:function(t,e,n){if(t instanceof on)for(var r=t.model,i=this.model.getConnectedLinks(r),s=0,o=i.length;s<o;s++){var a=i[s],l=this.findViewByModel(a);if(l){var u=["UPDATE"];a.getTargetCell()===r&&u.push("TARGET"),a.getSourceCell()===r&&u.push("SOURCE");var c=Math.max(e+1,l.UPDATE_PRIORITY);this.scheduleViewUpdate(l,l.getFlag(u),c,n)}}},forcePostponedViewUpdate:function(t,e){if(!t||!(t instanceof on))return!1;var n=t.model;if(n.isElement())return!1;if(!(e&t.getFlag(["SOURCE","TARGET"]))){var r={silent:!0},i=0,s=this.findViewByModel(n.getSourceCell());s&&!this.isViewMounted(s)&&(i=this.dumpView(s,r),t.updateEndMagnet("source"));var o=0,a=this.findViewByModel(n.getTargetCell());if(a&&!this.isViewMounted(a)&&(o=this.dumpView(a,r),t.updateEndMagnet("target")),i===0&&o===0)return!this.dumpView(t,r)}return!1},requestViewUpdate:function(t,e,n,r){r||(r={}),this.scheduleViewUpdate(t,e,n,r);var i=this.isAsync();if(!(this.isFrozen()||i&&r.async!==!1)&&!this.model.hasActiveBatch(this.UPDATE_DELAYING_BATCHES)){var s=this.updateViews(r);i&&this.notifyAfterRender(s,r)}},scheduleViewUpdate:function(t,e,n,r){const{_updates:i,options:s}=this;i.idle&&s.autoFreeze&&(i.idle=!1,this.unfreeze());const{FLAG_REMOVE:o,FLAG_INSERT:a,UPDATE_PRIORITY:l,cid:u}=t;let c=i.priorities[n];if(c||(c=i.priorities[n]={}),n>l)for(let v=n-1;v>=l;v--){const b=i.priorities[v];!b||!(u in b)||(c[u]|=b[u],delete b[u])}let f=c[u]||0;if((f&e)===e)return;f||i.count++,e&o&&f&a?c[u]^=a:e&a&&f&o&&(c[u]^=o),c[u]|=e;const p=s.onViewUpdate;typeof p=="function"&&p.call(this,t,e,n,r||{},this)},dumpViewUpdate:function(t){if(!t)return 0;var e=this._updates,n=t.cid,r=e.priorities[t.UPDATE_PRIORITY],i=this.registerMountedView(t)|r[n];return delete r[n],i},dumpView:function(t,e={}){const n=this.dumpViewUpdate(t);if(!n)return 0;const r=!e.silent;r&&this.notifyBeforeRender(e);const i=this.updateView(t,n,e);if(r){const s={updated:1,priority:t.UPDATE_PRIORITY};this.notifyAfterRender(s,e)}return i},updateView:function(t,e,n){if(!t)return 0;const{FLAG_REMOVE:r,FLAG_INSERT:i,FLAG_INIT:s,model:o}=t;if(t instanceof on){if(e&r)return this.removeView(o),0;if(e&i){const a=!!(e&s);a&&(e^=s),this.insertView(t,a),e^=i}}return e?t.confirmUpdate(e,n||{}):0},requireView:function(t,e){var n=this.findViewByModel(t);return n?(this.dumpView(n,e),n):null},registerUnmountedView:function(t){var e=t.cid,n=this._updates;if(e in n.unmounted)return 0;var r=n.unmounted[e]|=t.FLAG_INSERT;return n.unmountedCids.push(e),delete n.mounted[e],r},registerMountedView:function(t){var e=t.cid,n=this._updates;if(e in n.mounted)return 0;n.mounted[e]=!0,n.mountedCids.push(e);var r=n.unmounted[e]||0;return delete n.unmounted[e],r},isViewMounted:function(t){if(!t)return!1;var e=t.cid,n=this._updates;return e in n.mounted},dumpViews:function(t){var e=ca({},t,{viewport:null});this.checkViewport(e),this.updateViews(e)},updateViews:function(t){this.notifyBeforeRender(t);let e,n=0,r=0,i=dy;do r++,e=this.updateViewsBatch(t),n+=e.updated,i=Math.min(e.priority,i);while(!e.empty);const s={updated:n,batches:r,priority:i};return this.notifyAfterRender(s,t),s},hasScheduledUpdates:function(){const t=this._updates.priorities,e=Object.keys(t);let n=e.length;for(;n>0&&n--;)for(let r in t[e[n]])return!0;return!1},updateViewsAsync:function(t,e){t||(t={}),e||(e={processed:0,priority:dy});const{_updates:n,options:r}=this,i=n.id;if(i){aA(i),e.processed===0&&this.hasScheduledUpdates()&&this.notifyBeforeRender(t);const s=this.updateViewsBatch(t),o=ca({},t,{mountBatchSize:I$-s.mounted,unmountBatchSize:I$-s.unmounted}),a=this.checkViewport(o),l=a.unmounted,u=a.mounted;let c=e.processed;const f=n.count;s.updated>0?(c+=s.updated+s.unmounted,s.processed=c,e.priority=Math.min(s.priority,e.priority),s.empty&&u===0?(s.unmounted+=l,s.mounted+=u,s.priority=e.priority,this.notifyAfterRender(s,t),e.processed=0,e.priority=dy,n.count=0):e.processed=c):n.idle||r.autoFreeze&&(this.freeze(),n.idle=!0,this.trigger("render:idle",t));const p=t.progress;if(f&&typeof p=="function"&&p.call(this,s.empty,c,f,s,this),n.id!==i)return}if(n.disabled)throw new Error("dia.Paper: can not unfreeze the paper after it was removed");n.id=oA(this.updateViewsAsync,this,t,e)},notifyBeforeRender:function(t={}){let e=t.beforeRender;typeof e!="function"&&(e=this.options.beforeRender,typeof e!="function")||e.call(this,t,this)},notifyAfterRender:function(t,e={}){let n=e.afterRender;typeof n!="function"&&(n=this.options.afterRender),typeof n=="function"&&n.call(this,t,e,this),this.trigger("render:done",t,e)},updateViewsBatch:function(t){t||(t={});var e=t.batchSize||Ope,n=this._updates,r=0,i=0,s=0,o=0,a=dy,l=!0,u=this.options,c=n.priorities,f="viewport"in t?t.viewport:u.viewport;typeof f!="function"&&(f=null);var p=u.onViewPostponed;typeof p!="function"&&(p=null);var v=Object.keys(c);e:for(var b=0,E=v.length;b<E;b++){var P=+v[b],S=c[P];for(var A in S){if(r>=e){l=!1;break e}var I=nf[A];if(!I){delete S[A];continue}var N=S[A];if(!(N&I.FLAG_REMOVE)){var x=A in n.unmounted;if(I.DETACHABLE&&f&&!f.call(this,I,!x,this)){x||(this.registerUnmountedView(I),this.detachView(I)),n.unmounted[A]|=N,delete S[A],s++;continue}x&&(N|=I.FLAG_INSERT,o++),N|=this.registerMountedView(I)}var g=this.updateView(I,N,t);if(g>0&&(S[A]=g,!p||!p.call(this,I,g,this)||S[A])){i++,l=!1;continue}a>P&&(a=P),r++,delete S[A]}}return{priority:a,updated:r,postponed:i,unmounted:s,mounted:o,empty:l}},getUnmountedViews:function(){const t=this._updates,e=Object.keys(t.unmounted),n=e.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=nf[e[i]];return r},getMountedViews:function(){const t=this._updates,e=Object.keys(t.mounted),n=e.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=nf[e[i]];return r},checkUnmountedViews:function(t,e){e||(e={});var n=0;typeof t!="function"&&(t=null);for(var r=("mountBatchSize"in e)?e.mountBatchSize:1/0,i=this._updates,s=i.unmountedCids,o=i.unmounted,a=0,l=Math.min(s.length,r);a<l;a++){var u=s[a];if(u in o){var c=nf[u];if(c){if(c.DETACHABLE&&t&&!t.call(this,c,!1,this)){s.push(u);continue}n++;var f=this.registerMountedView(c);f&&this.scheduleViewUpdate(c,f,c.UPDATE_PRIORITY,{mounting:!0})}}}return s.splice(0,a),n},checkMountedViews:function(t,e){e||(e={});var n=0;if(typeof t!="function")return n;for(var r=("unmountBatchSize"in e)?e.unmountBatchSize:1/0,i=this._updates,s=i.mountedCids,o=i.mounted,a=0,l=Math.min(s.length,r);a<l;a++){var u=s[a];if(u in o){var c=nf[u];if(c){if(!c.DETACHABLE||t.call(this,c,!0,this)){s.push(u);continue}n++;var f=this.registerUnmountedView(c);f&&this.detachView(c)}}}return s.splice(0,a),n},checkViewVisibility:function(t,e={}){let n="viewport"in e?e.viewport:this.options.viewport;typeof n!="function"&&(n=null);const r=this._updates,{mounted:i,unmounted:s}=r,o=!t.DETACHABLE||!n||n.call(this,t,!1,this);let a=!1,l=!1;if(t.cid in i&&!o){this.registerUnmountedView(t)&&this.detachView(t);const f=r.mountedCids.indexOf(t.cid);r.mountedCids.splice(f,1),a=!0}if(!a&&t.cid in s&&o){const c=r.unmountedCids.indexOf(t.cid);r.unmountedCids.splice(c,1);var u=this.registerMountedView(t);u&&this.scheduleViewUpdate(t,u,t.UPDATE_PRIORITY,{mounting:!0}),l=!0}return{mounted:l?1:0,unmounted:a?1:0}},checkViewport:function(t){var e=ca({},t,{mountBatchSize:1/0,unmountBatchSize:1/0}),n="viewport"in e?e.viewport:this.options.viewport,r=this.checkMountedViews(n,e);if(r>0){var i=this._updates.unmountedCids;e.mountBatchSize=Math.min(i.length-r,e.mountBatchSize)}var s=this.checkUnmountedViews(n,e);return{mounted:s,unmounted:r}},freeze:function(t){t||(t={});var e=this._updates,n=t.key,r=this.options.frozen,i=e.freezeKey;if(n&&n!==i){if(r&&i)return;e.freezeKey=n,e.keyFrozen=r}this.options.frozen=!0;var s=e.id;e.id=null,this.isAsync()&&s&&aA(s)},unfreeze:function(t){t||(t={});var e=this._updates,n=t.key,r=e.freezeKey;n&&r&&n!==r||(e.freezeKey=null,!(n&&n===r&&e.keyFrozen)&&(this.isAsync()?(this.freeze(),this.updateViewsAsync(t)):this.updateViews(t),this.options.frozen=e.keyFrozen=!1,e.sort&&(this.sortViews(),e.sort=!1)))},isAsync:function(){return!!this.options.async},isFrozen:function(){return!!this.options.frozen},isExactSorting:function(){return this.options.sorting===Oh.EXACT},onRemove:function(){this.freeze(),this._updates.disabled=!0,this.removeLayers(),this.removeViews()},getComputedSize:function(){var t=this.options,e=t.width,n=t.height;return $s(e)||(e=this.el.clientWidth),$s(n)||(n=this.el.clientHeight),{width:e,height:n}},setDimensions:function(t,e){const{options:n}=this,{width:r,height:i}=n;let s=t===void 0?r:t,o=e===void 0?i:e;if(r===s&&i===o)return;n.width=s,n.height=o,this._setDimensions();const a=this.getComputedSize();this.trigger("resize",a.width,a.height)},_setDimensions:function(){const{options:t}=this;let e=t.width,n=t.height;$s(e)&&(e=Math.round(e)),$s(n)&&(n=Math.round(n)),this.$el.css({width:e===null?"":e,height:n===null?"":n})},setOrigin:function(t,e){return this.translate(t||0,e||0)},fitToContent:function(t,e,n,r){Nn(t)?r=t:r=Mt({gridWidth:t,gridHeight:e,padding:n},r);const{x:i,y:s,width:o,height:a}=this.getFitToContentArea(r),{sx:l,sy:u}=this.scale();return this.setOrigin(-i*l,-s*u),this.setDimensions(o*l,a*u),new st(i,s,o,a)},getFitToContentArea:function(t={}){const e=t.gridWidth||1,n=t.gridHeight||1,r=zf(t.padding||0),i=Math.max(t.minWidth||0,e),s=Math.max(t.minHeight||0,n),o=t.maxWidth||Number.MAX_VALUE,a=t.maxHeight||Number.MAX_VALUE,l=t.allowNewOrigin,u="contentArea"in t?new st(t.contentArea):this.getContentArea(t),{sx:c,sy:f}=this.scale();u.x*=c,u.y*=f,u.width*=c,u.height*=f;let p=Math.ceil((u.width+u.x)/e),v=Math.ceil((u.height+u.y)/n);t.allowNegativeBottomRight||(p=Math.max(p,1),v=Math.max(v,1)),p*=e,v*=n;let b=0;(l==="negative"&&u.x<0||l==="positive"&&u.x>=0||l==="any")&&(b=Math.ceil(-u.x/e)*e,b+=r.left,p+=b);let E=0;return(l==="negative"&&u.y<0||l==="positive"&&u.y>=0||l==="any")&&(E=Math.ceil(-u.y/n)*n,E+=r.top,v+=E),p+=r.right,v+=r.bottom,p=Math.max(p,i),v=Math.max(v,s),p=Math.min(p,o),v=Math.min(v,a),new st(-b/c,-E/f,p/c,v/f)},transformToFitContent:function(t){t||(t={});let e,n;if("contentArea"in t){const P=t.contentArea;e=this.localToPaperRect(P),n=new fe(P)}else e=this.getContentBBox(t),n=this.paperToLocalPoint(e);if(!e.width||!e.height)return;ca(t,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE,verticalAlign:"top",horizontalAlign:"left"});const r=zf(t.padding),i=t.minScaleX||t.minScale,s=t.maxScaleX||t.maxScale,o=t.minScaleY||t.minScale,a=t.maxScaleY||t.maxScale;let l;if(t.fittingBBox)l=t.fittingBBox;else{const P=this.translate(),S=this.getComputedSize();l={x:P.tx,y:P.ty,width:S.width,height:S.height}}l=new st(l).moveAndExpand({x:r.left,y:r.top,width:-r.left-r.right,height:-r.top-r.bottom});const u=this.scale();let c=l.width/e.width*u.sx,f=l.height/e.height*u.sy;if(t.preserveAspectRatio&&(c=f=Math.min(c,f)),t.scaleGrid){const P=t.scaleGrid;c=P*Math.floor(c/P),f=P*Math.floor(f/P)}c=Math.min(s,Math.max(i,c)),f=Math.min(a,Math.max(o,f));const p={x:c/u.sx,y:f/u.sy},v=this.options.origin;let b=l.x-n.x*c-v.x,E=l.y-n.y*f-v.y;switch(t.verticalAlign){case"middle":E=E+(l.height-e.height*p.y)/2;break;case"bottom":E=E+(l.height-e.height*p.y);break}switch(t.horizontalAlign){case"middle":b=b+(l.width-e.width*p.x)/2;break;case"right":b=b+(l.width-e.width*p.x);break}this.scale(c,f),this.translate(b,E)},scaleContentToFit:function(t){this.transformToFitContent(t)},getContentArea:function(t){return t&&t.useModelGeometry?this.model.getBBox()||new st:De(this.cells).getBBox()},getContentBBox:function(t){return this.localToPaperRect(this.getContentArea(t))},getArea:function(){return this.paperToLocalRect(this.getComputedSize())},getRestrictedArea:function(...t){const{restrictTranslate:e}=this.options;let n;return Yn(e)?n=e.apply(this,t):e===!0?n=this.getArea():e?n=new st(e):n=null,n},createViewForModel:function(t){const{options:e}=this;var n,r,i=e.cellViewNamespace,s=t.get("type")+"View",o=pm(i,s,".");t.isLink()?(n=e.linkView,r=Ag):(n=e.elementView,r=gi);var a=n.prototype instanceof Ui.View?o||n:n.call(this,t)||o||r;return new a({model:t,interactive:e.interactive,labelsLayer:e.labelsLayer===!0?Do.LABELS:e.labelsLayer})},removeView:function(t){const{id:e}=t,{_views:n,_updates:r}=this,i=n[e];if(i){var{cid:s}=i;const{mounted:o,unmounted:a}=r;i.remove(),delete n[e],delete o[s],delete a[s]}return i},renderView:function(t,e){const{id:n}=t,r=this._views;let i,s,o=!0;return n in r&&(i=r[n],i.model===t?(s=i.FLAG_INSERT,o=!1):this.removeView(t)),o&&(i=r[n]=this.createViewForModel(t),i.paper=this,s=this.registerUnmountedView(i)|this.FLAG_INIT|i.getFlag(Ur(i,"initFlag"))),this.requestViewUpdate(i,s,i.UPDATE_PRIORITY,e),i},onImageDragStart:function(){return!1},resetViews:function(t,e){e||(e={}),t||(t=[]),this._resetUpdates(),this.removeViews();const n=this.options.autoFreeze?null:"reset";this.freeze({key:n});for(var r=0,i=t.length;r<i;r++)this.renderView(t[r],e);this.unfreeze({key:n}),this.sortViews()},removeViews:function(){ya(this._views,"remove"),this._views={}},sortViews:function(){if(this.isExactSorting()){if(this.isFrozen()){this._updates.sort=!0;return}this.sortViewsExact()}},sortViewsExact:function(){var t=xn(this.cells).children("[model-id]"),e=this.model.get("cells");dhe(t,function(n,r){var i=e.get(n.getAttribute("model-id")),s=e.get(r.getAttribute("model-id")),o=i.attributes.z||0,a=s.attributes.z||0;return o===a?0:o<a?-1:1})},insertView:function(t,e){const n=this.getLayerView(Do.CELLS),{el:r,model:i}=t;switch(this.options.sorting){case Oh.APPROX:n.insertSortedNode(r,i.get("z"));break;case Oh.EXACT:default:n.insertNode(r);break}t.onMount(e)},detachView(t){t.unmount(),t.onDetach()},scale:function(t,e,n,r){if(t===void 0)return De.matrixToScale(this.matrix());e===void 0&&(e=t),n===void 0&&(n=0,r=0);var i=this.translate();if(n||r||i.tx||i.ty){var s=i.tx-n*(t-1),o=i.ty-r*(e-1);this.translate(s,o)}t=Math.max(t||0,this.MIN_SCALE),e=Math.max(e||0,this.MIN_SCALE);var a=this.matrix();return a.a=t,a.d=e,this.matrix(a),this.trigger("scale",t,e,n,r),this},rotate:function(t,e,n){if(t===void 0)return De.matrixToRotate(this.matrix());if(e===void 0){var r=this.cells.getBBox();e=r.width/2,n=r.height/2}var i=this.matrix().translate(e,n).rotate(t).translate(-e,-n);return this.matrix(i),this},translate:function(t,e){if(t===void 0)return De.matrixToTranslate(this.matrix());const{options:n}=this,{origin:r,drawGrid:i}=n;t||(t=0),e||(e=0);const s=this.matrix();if(s.e===t&&s.f===e)return this;s.e=t,s.f=e,this.matrix(s);const{tx:o,ty:a}=this.translate();return r.x=o,r.y=a,this.trigger("translate",o,a),i&&this.drawGrid(),this},findView:function(t){var e=Gi(t)?this.cells.querySelector(t):t instanceof xn?t[0]:t,n=this.findAttribute("model-id",e);if(n)return this._views[n]},findViewByModel:function(t){var e=Gi(t)||$s(t)?t:t&&t.id;return this._views[e]},findViewsFromPoint:function(t){t=new fe(t);var e=this.model.getElements().map(this.findViewByModel,this);return e.filter(function(n){return n&&n.vel.getBBox({target:this.cells}).containsPoint(t)},this)},findViewsInArea:function(t,e){e=ca(e||{},{strict:!1}),t=new st(t);var n=this.model.getElements().map(this.findViewByModel,this),r=e.strict?"containsRect":"intersect";return n.filter(function(i){return i&&t[r](i.vel.getBBox({target:this.cells}))},this)},removeTools:function(){return this.dispatchToolsEvent("remove"),this},hideTools:function(){return this.dispatchToolsEvent("hide"),this},showTools:function(){return this.dispatchToolsEvent("show"),this},dispatchToolsEvent:function(t,...e){typeof t=="string"&&this.trigger("tools:event",t,...e)},getModelById:function(t){return this.model.getCell(t)},snapToGrid:function(t,e){return this.clientToLocalPoint(t,e).snapToGrid(this.options.gridSize)},localToPaperPoint:function(t,e){var n=new fe(t,e),r=De.transformPoint(n,this.matrix());return r},localToPaperRect:function(t,e,n,r){var i=new st(t,e,n,r),s=De.transformRect(i,this.matrix());return s},paperToLocalPoint:function(t,e){var n=new fe(t,e),r=De.transformPoint(n,this.matrix().inverse());return r},paperToLocalRect:function(t,e,n,r){var i=new st(t,e,n,r),s=De.transformRect(i,this.matrix().inverse());return s},localToClientPoint:function(t,e){var n=new fe(t,e),r=De.transformPoint(n,this.clientMatrix());return r},localToClientRect:function(t,e,n,r){var i=new st(t,e,n,r),s=De.transformRect(i,this.clientMatrix());return s},clientToLocalPoint:function(t,e){var n=new fe(t,e),r=De.transformPoint(n,this.clientMatrix().inverse());return r},clientToLocalRect:function(t,e,n,r){var i=new st(t,e,n,r),s=De.transformRect(i,this.clientMatrix().inverse());return s},localToPagePoint:function(t,e){return this.localToPaperPoint(t,e).offset(this.pageOffset())},localToPageRect:function(t,e,n,r){return this.localToPaperRect(t,e,n,r).offset(this.pageOffset())},pageToLocalPoint:function(t,e){var n=new fe(t,e),r=n.difference(this.pageOffset());return this.paperToLocalPoint(r)},pageToLocalRect:function(t,e,n,r){var i=this.pageOffset(),s=new st(t,e,n,r);return s.x-=i.x,s.y-=i.y,this.paperToLocalRect(s)},clientOffset:function(){var t=this.svg.getBoundingClientRect();return new fe(t.left,t.top)},pageOffset:function(){return this.clientOffset().offset(window.scrollX,window.scrollY)},linkAllowed:function(t){if(!(t instanceof Ag))throw new Error("Must provide a linkView.");var e=t.model,n=this.options,r=this.model,i=r.constructor.validations;return!(!n.multiLinks&&!i.multiLinks.call(this,r,e)||!n.linkPinning&&!i.linkPinning.call(this,r,e)||typeof n.allowLink=="function"&&!n.allowLink.call(this,t,this))},getDefaultLink:function(t,e){return Yn(this.options.defaultLink)?this.options.defaultLink.call(this,t,e):this.options.defaultLink.clone()},resolveHighlighter:function(t={}){let{highlighter:e,type:n}=t;const{highlighting:r,highlighterNamespace:i}=this.options;if(e===void 0){if(!r||n&&(e=r[n],e===!1))return!1;e||(e=r.default)}if(!e)return!1;Gi(e)&&(e={name:e});const s=e.name,o=i[s];if(!o)throw new Error('Unknown highlighter ("'+s+'")');if(typeof o.highlight!="function")throw new Error('Highlighter ("'+s+'") is missing required highlight() method');if(typeof o.unhighlight!="function")throw new Error('Highlighter ("'+s+'") is missing required unhighlight() method');return{highlighter:o,options:e.options||{},name:s}},onCellHighlight:function(t,e,n){const r=this.resolveHighlighter(n);if(!r)return;const{highlighter:i,options:s}=r;i.highlight(t,e,s)},onCellUnhighlight:function(t,e,n){const r=this.resolveHighlighter(n);if(!r)return;const{highlighter:i,options:s}=r;i.unhighlight(t,e,s)},pointerdblclick:function(t){t.preventDefault(),t=Nr(t);var e=this.findView(t.target);if(!this.guard(t,e)){var n=this.snapToGrid(t.clientX,t.clientY);e?e.pointerdblclick(t,n.x,n.y):this.trigger("blank:pointerdblclick",t,n.x,n.y)}},pointerclick:function(t){var e=this.eventData(t);if(e.mousemoved<=this.options.clickThreshold){t=Nr(t);var n=this.findView(t.target);if(this.guard(t,n))return;var r=this.snapToGrid(t.clientX,t.clientY);n?n.pointerclick(t,r.x,r.y):this.trigger("blank:pointerclick",t,r.x,r.y)}},contextmenu:function(t){if(this.options.preventContextMenu&&t.preventDefault(),this.contextMenuFired){this.contextMenuFired=!1;return}t=Nr(t),this.contextMenuTrigger(t)},contextMenuTrigger:function(t){var e=this.findView(t.target);if(!this.guard(t,e)){var n=this.snapToGrid(t.clientX,t.clientY);e?e.contextmenu(t,n.x,n.y):this.trigger("blank:contextmenu",t,n.x,n.y)}},pointerdown:function(t){t=Nr(t);const{target:e,button:n}=t,r=this.findView(e),i=n===2;if(r){if(!i&&this.guard(t,r))return;const s=this.FORM_CONTROL_TAG_NAMES.includes(e.tagName);this.options.preventDefaultViewAction&&!s&&t.preventDefault(),s&&r.preventDefaultInteraction(t);const o=r.el,a=e.closest("[event]");if(a&&o!==a&&r.el.contains(a)){const u=Nr(xn.Event(t.originalEvent,{data:t.data,currentTarget:a}));if(this.onevent(u),u.isDefaultPrevented()&&t.preventDefault(),u.isPropagationStopped())return;t.data=u.data}const l=e.closest("[magnet]");if(l&&r.el!==l&&r.el.contains(l)){const u=Nr(xn.Event(t.originalEvent,{data:t.data,currentTarget:l}));if(this.onmagnet(u),u.isDefaultPrevented()&&t.preventDefault(),u.isPropagationStopped()){if(i)return;this.delegateDragEvents(r,u.data);return}t.data=u.data}}if(i){this.contextMenuFired=!0;const s=xn.Event(t.originalEvent,{type:"contextmenu",data:t.data});this.contextMenuTrigger(s)}else{const s=this.snapToGrid(t.clientX,t.clientY);r?r.pointerdown(t,s.x,s.y):(this.options.preventDefaultBlankAction&&t.preventDefault(),this.trigger("blank:pointerdown",t,s.x,s.y)),this.delegateDragEvents(r,t.data)}},pointermove:function(t){var e=this.eventData(t);e.mousemoved||(e.mousemoved=0,this.undelegateEvents());var n=++e.mousemoved;if(!(n<=this.options.moveThreshold)){t=Nr(t);var r=this.snapToGrid(t.clientX,t.clientY),i=e.sourceView;i?i.pointermove(t,r.x,r.y):this.trigger("blank:pointermove",t,r.x,r.y),this.eventData(t,e)}},pointerup:function(t){this.undelegateDocumentEvents();var e=Nr(t),n=this.snapToGrid(e.clientX,e.clientY),r=this.eventData(t).sourceView;r?r.pointerup(e,n.x,n.y):this.trigger("blank:pointerup",e,n.x,n.y),e.isPropagationStopped()||this.pointerclick(xn.Event(t.originalEvent,{type:"click",data:t.data})),this.delegateEvents()},mouseover:function(t){t=Nr(t);var e=this.findView(t.target);if(!this.guard(t,e))if(e)e.mouseover(t);else{if(this.el===t.target)return;this.trigger("blank:mouseover",t)}},mouseout:function(t){t=Nr(t);var e=this.findView(t.target);if(!this.guard(t,e))if(e)e.mouseout(t);else{if(this.el===t.target)return;this.trigger("blank:mouseout",t)}},mouseenter:function(t){t=Nr(t);const{target:e,relatedTarget:n,currentTarget:r}=t,i=this.findView(e);if(this.guard(t,i))return;const s=this.findView(n);i&&(s===i||(i.mouseenter(t),this.el.contains(n)))||s||r===this.el&&this.trigger("paper:mouseenter",t)},mouseleave:function(t){t=Nr(t);const{target:e,relatedTarget:n,currentTarget:r}=t,i=this.findView(e);if(this.guard(t,i))return;const s=this.findView(n);i&&(s===i||(i.mouseleave(t),this.el.contains(n)))||s||r===this.el&&this.trigger("paper:mouseleave",t)},_processMouseWheelEvtBuf:Zfe(function(){const{event:t,deltas:e}=this._mw_evt_buffer,n=e.reduce((o,a)=>o+uhe(a,Ppe),0),r=Math.pow(.995,n),{x:i,y:s}=this.clientToLocalPoint(t.clientX,t.clientY);this.trigger("paper:pinch",t,i,s,r),this._mw_evt_buffer={event:null,deltas:[]}},N$,{maxWait:N$}),mousewheel:function(t){t=Nr(t);const e=this.findView(t.target);if(this.guard(t,e))return;const n=t.originalEvent,r=this.snapToGrid(n.clientX,n.clientY),{deltaX:i,deltaY:s}=lhe(n),o=this._events["paper:pinch"];if(t.ctrlKey&&o&&o.length>0)n.preventDefault(),this._mw_evt_buffer.event=n,this._mw_evt_buffer.deltas.push(s),this._processMouseWheelEvtBuf();else{const a=Math.max(-1,Math.min(1,n.wheelDelta));e?e.mousewheel(t,r.x,r.y,a):this.trigger("blank:mousewheel",t,r.x,r.y,a),this.trigger("paper:pan",t,i,s)}},onevent:function(t){var e=t.currentTarget,n=e.getAttribute("event");if(n){var r=this.findView(e);if(r){if(t=Nr(t),this.guard(t,r))return;var i=this.snapToGrid(t.clientX,t.clientY);r.onevent(t,n,i.x,i.y)}}},magnetEvent:function(t,e){var n=t.currentTarget,r=n.getAttribute("magnet");if(r){var i=this.findView(n);if(i){if(t=Nr(t),this.guard(t,i))return;var s=this.snapToGrid(t.clientX,t.clientY);e.call(this,i,t,n,s.x,s.y)}}},onmagnet:function(t){if(t.button===2){this.contextMenuFired=!0,this.magnetContextMenuFired=!0;const e=xn.Event(t.originalEvent,{type:"contextmenu",data:t.data,currentTarget:t.currentTarget});this.magnetContextMenuTrigger(e),e.isPropagationStopped()&&t.stopPropagation()}else this.magnetEvent(t,function(e,n,r,i,s){e.onmagnet(n,i,s)})},magnetpointerdblclick:function(t){this.magnetEvent(t,function(e,n,r,i,s){e.magnetpointerdblclick(n,r,i,s)})},magnetcontextmenu:function(t){if(this.options.preventContextMenu&&t.preventDefault(),this.magnetContextMenuFired){this.magnetContextMenuFired=!1;return}this.magnetContextMenuTrigger(t)},magnetContextMenuTrigger:function(t){this.magnetEvent(t,function(e,n,r,i,s){e.magnetcontextmenu(n,r,i,s)})},onlabel:function(t){var e=t.currentTarget,n=this.findView(e);if(n){if(t=Nr(t),this.guard(t,n))return;var r=this.snapToGrid(t.clientX,t.clientY);n.onlabel(t,r.x,r.y)}},getPointerArgs(t){const e=Nr(t),{x:n,y:r}=this.snapToGrid(e.clientX,e.clientY);return[e,n,r]},delegateDragEvents:function(t,e){e||(e={}),this.eventData({data:e},{sourceView:t||null,mousemoved:0}),this.delegateDocumentEvents(null,e)},guard:function(t,e){if(t.type==="mousedown"&&t.button===2||this.options.guard&&this.options.guard(t,e))return!0;if(t.data&&t.data.guarded!==void 0)return t.data.guarded;const{target:n}=t;return this.GUARDED_TAG_NAMES.includes(n.tagName)?!0:!(e&&e.model&&e.model instanceof sl||this.svg===n||this.el===n||xn.contains(this.svg,n))},setGridSize:function(t){const{options:e}=this;return e.gridSize=t,e.drawGrid&&!e.drawGridSize&&this.drawGrid(),this},clearGrid:function(){return this.$grid&&this.$grid.css("backgroundImage","none"),this},_getGridRefs:function(){return this._gridCache||(this._gridCache={root:De("svg",{width:"100%",height:"100%"},De("defs")),patterns:{},add:function(t,e){De(this.root.node.childNodes[0]).append(e),this.patterns[t]=e,this.root.append(De("rect",{width:"100%",height:"100%",fill:"url(#"+t+")"}))},get:function(t){return this.patterns[t]},exist:function(t){return this.patterns[t]!==void 0}}),this._gridCache},setGrid:function(t){this.clearGrid(),this._gridCache=null,this._gridSettings=[];var e=Array.isArray(t)?t:[t||{}];return e.forEach(function(n){this._gridSettings.push.apply(this._gridSettings,this._resolveDrawGridOption(n))},this),this},_resolveDrawGridOption:function(t){var e=this.constructor.gridPatterns;if(Gi(t)&&Array.isArray(e[t]))return e[t].map(function(l){return Mt({},l)});var n=t||{args:[{}]},r=Array.isArray(n),i=n.name;if(!r&&!i&&!n.markup&&(i="dot"),i&&Array.isArray(e[i])){var s=e[i].map(function(l){return Mt({},l)}),o=Array.isArray(n.args)?n.args:[n.args||{}];ca(o[0],jf(t,"args"));for(var a=0;a<o.length;a++)s[a]&&Mt(s[a],o[a]);return s}return r?n:[n]},drawGrid:function(t){const e=this.options.drawGridSize||this.options.gridSize;if(e<=1)return this.clearGrid();var n=Array.isArray(t)?t:[t],r=this.matrix(),i=this._getGridRefs();this._gridSettings.forEach(function(o,a){var l="pattern_"+a,u=Wr(o,n[a],{sx:r.a||1,sy:r.d||1,ox:r.e||0,oy:r.f||0});u.width=e*(r.a||1)*(u.scaleFactor||1),u.height=e*(r.d||1)*(u.scaleFactor||1),i.exist(l)||i.add(l,De("pattern",{id:l,patternUnits:"userSpaceOnUse"},De(u.markup)));var c=i.get(l);Yn(u.update)&&u.update(c.node.childNodes[0],u);var f=u.ox%u.width;f<0&&(f+=u.width);var p=u.oy%u.height;p<0&&(p+=u.height),c.attr({x:f,y:p,width:u.width,height:u.height})});var s=new XMLSerializer().serializeToString(i.root.node);return s="url(data:image/svg+xml;base64,"+btoa(s)+")",this.$grid.css("backgroundImage",s),this},updateBackgroundImage:function(t){t=t||{};var e=t.position||"center",n=t.size||"auto auto",r=this.scale(),i=this.translate();if(Nn(e)){var s=i.tx+r.sx*(e.x||0),o=i.ty+r.sy*(e.y||0);e=s+"px "+o+"px"}Nn(n)&&(n=new st(n).scale(r.sx,r.sy),n=n.width+"px "+n.height+"px"),this.$background.css({backgroundSize:n,backgroundPosition:e})},drawBackgroundImage:function(t,e){if(!(t instanceof HTMLImageElement)){this.$background.css("backgroundImage","");return}if(!(!this._background||this._background.id!==e.id)){e=e||{};var n,r=e.size,i=e.repeat||"no-repeat",s=e.opacity||1,o=Math.abs(e.quality)||1,a=this.constructor.backgroundPatterns[nhe(i)];if(Yn(a)){t.width*=o,t.height*=o;var l=a(t,e);if(!(l instanceof HTMLCanvasElement))throw new Error("dia.Paper: background pattern must return an HTML Canvas instance");n=l.toDataURL("image/png"),i="repeat",Nn(r)?(r.width*=l.width/t.width,r.height*=l.height/t.height):r===void 0&&(e.size={width:l.width/o,height:l.height/o})}else n=t.src,r===void 0&&(e.size={width:t.width,height:t.height});this.$background.css({opacity:s,backgroundRepeat:i,backgroundImage:"url("+n+")"}),this.updateBackgroundImage(e)}},updateBackgroundColor:function(t){this.$el.css("backgroundColor",t||"")},drawBackground:function(t){if(t=t||{},this.updateBackgroundColor(t.color),t.image){t=this._background=Ro(t),Wh(t);var e=document.createElement("img");e.onload=this.drawBackgroundImage.bind(this,e,t),e.src=t.image}else this.drawBackgroundImage(null),this._background=null;return this},setInteractivity:function(t){this.options.interactive=t,ya(this._views,"setInteractivity",t)},isDefined:function(t){return!!this.svg.getElementById(t)},defineFilter:function(t){if(!Nn(t))throw new TypeError("dia.Paper: defineFilter() requires 1. argument to be an object.");var e=t.id,n=t.name;if(e||(e=n+this.svg.id+ay(JSON.stringify(t))),!this.isDefined(e)){var r=ghe,i=r[n]&&r[n](t.args||{});if(!i)throw new Error("Non-existing filter "+n);var s=Mt({filterUnits:"objectBoundingBox",x:-1,y:-1,width:3,height:3},t.attrs,{id:e});De(i,s).appendTo(this.defs)}return e},defineGradient:function(t){if(!Nn(t))throw new TypeError("dia.Paper: defineGradient() requires 1. argument to be an object.");const{svg:e,defs:n}=this,{type:r,id:i=r+e.id+ay(JSON.stringify(t)),stops:s,attrs:o={}}=t;if(this.isDefined(i))return i;const a=gn(s).map(({offset:u,color:c,opacity:f})=>De("stop").attr({offset:u,"stop-color":c,"stop-opacity":Number.isFinite(f)?f:1})),l=De(r,o,a);return l.id=i,l.appendTo(n),i},definePattern:function(t){if(!Nn(t))throw new TypeError("dia.Paper: definePattern() requires 1. argument to be an object.");const{svg:e,defs:n}=this,{id:r=e.id+ay(JSON.stringify(t)),markup:i,attrs:s={}}=t;if(!i)throw new TypeError("dia.Paper: definePattern() requires markup.");if(this.isDefined(r))return r;const o=De("pattern",{patternUnits:"userSpaceOnUse"});if(o.id=r,o.attr(s),typeof i=="string")o.append(De(i));else{const{fragment:a}=Jb(i);o.append(a)}return o.appendTo(n),r},defineMarker:function(t){if(!Nn(t))throw new TypeError("dia.Paper: defineMarker() requires the first argument to be an object.");const{svg:e,defs:n}=this,{id:r=e.id+ay(JSON.stringify(t)),markup:i,attrs:s={},markerUnits:o="userSpaceOnUse"}=t;if(this.isDefined(r))return r;const a=De("marker",{orient:"auto",overflow:"visible",markerUnits:o});a.id=r,a.attr(s);let l;if(i){let f;if(typeof i=="string")f=De(i),f=Array.isArray(f)?f:[f];else{const{fragment:p}=Jb(i);f=De(p).children()}f.length>1?l=De("g").append(f):l=f[0]}else{const{type:f="path"}=t;l=De(f)}const u=jf(t,"type","id","markup","attrs","markerUnits");return Object.keys(u).forEach(f=>{const p=u[f],v=l.attr(f);if(v==null)l.attr(f,p);else switch(f){case"transform":l.attr(f,p+" "+v);break}}),l.appendTo(a),a.appendTo(n),r}},{sorting:Oh,Layers:Do,backgroundPatterns:{flipXy:function(t){var e=document.createElement("canvas"),n=t.width,r=t.height;e.width=2*n,e.height=2*r;var i=e.getContext("2d");return i.drawImage(t,0,0,n,r),i.setTransform(-1,0,0,-1,e.width,e.height),i.drawImage(t,0,0,n,r),i.setTransform(-1,0,0,1,e.width,0),i.drawImage(t,0,0,n,r),i.setTransform(1,0,0,-1,0,e.height),i.drawImage(t,0,0,n,r),e},flipX:function(t){var e=document.createElement("canvas"),n=t.width,r=t.height;e.width=n*2,e.height=r;var i=e.getContext("2d");return i.drawImage(t,0,0,n,r),i.translate(2*n,0),i.scale(-1,1),i.drawImage(t,0,0,n,r),e},flipY:function(t){var e=document.createElement("canvas"),n=t.width,r=t.height;e.width=n,e.height=r*2;var i=e.getContext("2d");return i.drawImage(t,0,0,n,r),i.translate(0,2*r),i.scale(1,-1),i.drawImage(t,0,0,n,r),e},watermark:function(t,e){e=e||{};var n=t.width,r=t.height,i=document.createElement("canvas");i.width=n*3,i.height=r*3;for(var s=i.getContext("2d"),o=$s(e.watermarkAngle)?-e.watermarkAngle:-20,a=Hs(o),l=i.width/4,u=i.height/4,c=0;c<4;c++)for(var f=0;f<4;f++)(c+f)%2>0&&(s.setTransform(1,0,0,1,(2*c-1)*l,(2*f-1)*u),s.rotate(a),s.drawImage(t,-n/2,-r/2,n,r));return i}},gridPatterns:{dot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(t,e){De(t).attr({width:e.thickness*e.sx,height:e.thickness*e.sy,fill:e.color})}}],fixedDot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(t,e){var n=e.sx<=1?e.thickness*e.sx:e.thickness;De(t).attr({width:n,height:n,fill:e.color})}}],mesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(t,e){var n,r=e.width,i=e.height,s=e.thickness;r-s>=0&&i-s>=0?n=["M",r,0,"H0 M0 0 V0",i].join(" "):n="M 0 0 0 0",De(t).attr({d:n,stroke:e.color,"stroke-width":e.thickness})}}],doubleMesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(t,e){var n,r=e.width,i=e.height,s=e.thickness;r-s>=0&&i-s>=0?n=["M",r,0,"H0 M0 0 V0",i].join(" "):n="M 0 0 0 0",De(t).attr({d:n,stroke:e.color,"stroke-width":e.thickness})}},{color:"#000000",thickness:3,scaleFactor:4,markup:"path",update:function(t,e){var n,r=e.width,i=e.height,s=e.thickness;r-s>=0&&i-s>=0?n=["M",r,0,"H0 M0 0 V0",i].join(" "):n="M 0 0 0 0",De(t).attr({d:n,stroke:e.color,"stroke-width":e.thickness})}}]}}),iO=Yl.extend({name:null,tagName:"g",className:"tool",svgElement:!0,_visible:!0,init:function(){var t=this.name;t&&this.vel.attr("data-tool-name",t)},configure:function(t,e){return this.relatedView=t,this.paper=t.paper,this.parentView=e,this.simulateRelatedView(this.el),this.delegateEvents(),this},simulateRelatedView:function(t){t&&t.setAttribute("model-id",this.relatedView.model.id)},getName:function(){return this.name},show:function(){this.el.style.display="",this._visible=!0},hide:function(){this.el.style.display="none",this._visible=!1},isVisible:function(){return!!this._visible},focus:function(){var t=this.options.focusOpacity;isFinite(t)&&(this.el.style.opacity=t),this.parentView.focusTool(this)},blur:function(){this.el.style.opacity="",this.parentView.blurTool(this)},update:function(){},guard:function(t){const{paper:e,relatedView:n}=this;return!e||!n?!0:e.guard(t,n)}}),Rd=Yl.extend({tagName:"g",className:"tools",svgElement:!0,tools:null,isRendered:!1,options:{tools:null,relatedView:null,name:null},configure:function(t){t=Mt(this.options,t);var e=t.tools;if(!Array.isArray(e))return this;var n=t.relatedView;if(!(n instanceof on))return this;for(var r=this.tools=[],i=0,s=e.length;i<s;i++){var o=e[i];o instanceof iO&&(o.configure(n,this),this.vel.append(o.el),r.push(o))}return this.isRendered=!1,n.requestUpdate(n.getFlag("TOOLS")),this},getName:function(){return this.options.name},update:function(t){t||(t={});var e=this.tools;if(!e)return this;for(var n=this.isRendered,r=0,i=e.length;r<i;r++){var s=e[r];n?t.tool!==s.cid&&s.isVisible()&&s.update():s.render()}return this.isMounted()||this.mount(),n||(this.blurTool(),this.isRendered=!0),this},focusTool:function(t){var e=this.tools;if(!e)return this;for(var n=0,r=e.length;n<r;n++){var i=e[n];t===i?i.show():i.hide()}return this},blurTool:function(t){var e=this.tools;if(!e)return this;for(var n=0,r=e.length;n<r;n++){var i=e[n];i!==t&&!i.isVisible()&&(i.show(),i.update())}return this},hide:function(){return this.focusTool(null)},show:function(){return this.blurTool(null)},onRemove:function(){var t=this.tools;if(!t)return this;for(var e=0,n=t.length;e<n;e++)t[e].remove();this.tools=null},mount:function(){const{options:t,el:e}=this,{relatedView:n,layer:r=Do.TOOLS,z:i}=t;return n&&(r?n.paper.getLayerView(r).insertSortedNode(e,i):n.el.appendChild(e)),this}}),gm={exportElement:function(t){return t.size()},exportLink:function(t){var e=t.get("labelSize")||{},n={minLen:t.get("minLen")||1,weight:t.get("weight")||1,labelpos:t.get("labelPosition")||"c",labeloffset:t.get("labelOffset")||0,width:e.width||0,height:e.height||0};return n},importElement:function(t,e,n){var r=this.getCell(e),i=n.node(e);t.setPosition?t.setPosition(r,i):r.set("position",{x:i.x-i.width/2,y:i.y-i.height/2})},importLink:function(t,e,n){const i=this.getCell(e.name),s=n.edge(e),o=s.points||[],a=new rr(o);if(t.setVertices||t.setLinkVertices)if(Yn(t.setVertices))t.setVertices(i,o);else{a.simplify({threshold:.001});const l=a.points.map(c=>c.toJSON()),u=l.length;i.set("vertices",l.slice(1,u-1))}if(t.setLabels&&"x"in s&&"y"in s){const l={x:s.x,y:s.y};if(Yn(t.setLabels))t.setLabels(i,l,o);else{const u=a.closestPointLength(l),c=a.pointAtLength(u),f=u/a.length(),p=new fe(l).difference(c).toJSON();i.label(0,{position:{distance:f,offset:p}})}}},layout:function(t,e){var n;t instanceof Hl?n=t:n=new Hl().resetCells(t,{dry:!0,sort:!1}),t=null,e=ca(e||{},{resizeClusters:!0,clusterPadding:10,exportElement:this.exportElement,exportLink:this.exportLink});const r=e.dagre||(typeof dagre<"u"?dagre:void 0);if(r===void 0)throw new Error('The the "dagre" utility is a mandatory dependency.');var i=gm.toGraphLib(n,{graphlib:e.graphlib,directed:!0,multigraph:!0,compound:!0,setNodeLabel:e.exportElement,setEdgeLabel:e.exportLink,setEdgeName:function(c){return c.id}}),s={},o=e.marginX||0,a=e.marginY||0;if(e.rankDir&&(s.rankdir=e.rankDir),e.align&&(s.align=e.align),e.nodeSep&&(s.nodesep=e.nodeSep),e.edgeSep&&(s.edgesep=e.edgeSep),e.rankSep&&(s.ranksep=e.rankSep),e.ranker&&(s.ranker=e.ranker),o&&(s.marginx=o),a&&(s.marginy=a),i.setGraph(s),r.layout(i,{debugTiming:!!e.debugTiming}),n.startBatch("layout"),gm.fromGraphLib(i,{importNode:this.importElement.bind(n,e),importEdge:this.importLink.bind(n,e)}),e.resizeClusters){var l=i.nodes().filter(function(c){return i.children(c).length>0}).map(n.getCell.bind(n)).sort(function(c,f){return f.getAncestors().length-c.getAncestors().length});ya(l,"fitToChildren",{padding:e.clusterPadding})}n.stopBatch("layout");var u=i.graph();return new st(o,a,Math.abs(u.width-2*o),Math.abs(u.height-2*a))},fromGraphLib:function(t,e){e=e||{};var n=e.importNode||jp,r=e.importEdge||jp,i=this instanceof Hl?this:new Hl;return t.nodes().forEach(function(s){n.call(i,s,t,i,e)}),t.edges().forEach(function(s){r.call(i,s,t,i,e)}),i},toGraphLib:function(t,e){e=e||{};const n=e.graphlib||(typeof graphlib<"u"?graphlib:void 0);if(n===void 0)throw new Error('The the "graphlib" utility is a mandatory dependency.');for(var r=z6(e,"directed","compound","multigraph"),i=new n.Graph(r),s=e.setNodeLabel||jp,o=e.setEdgeLabel||jp,a=e.setEdgeName||jp,l=t.get("cells"),u=0,c=l.length;u<c;u++){var f=l.at(u);if(f.isLink()){var p=f.get("source"),v=f.get("target");if(!p.id||!v.id)break;i.setEdge(p.id,v.id,o(f),a(f))}else if(i.setNode(f.id,s(f)),i.isCompound()&&f.has("parent")){var b=f.get("parent");l.has(b)&&i.setParent(f.id,b)}}return i}};Hl.prototype.toGraphLib=function(t){return gm.toGraphLib(this,t)};Hl.prototype.fromGraphLib=function(t,e){return gm.fromGraphLib.call(this,t,e)};const p8={_results:{},_tests:{svgforeignobject:function(){return!!document.createElementNS&&/SVGForeignObject/.test({}.toString.call(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")))}},addTest:function(t,e){return this._tests[t]=e},test:function(t){var e=this._tests[t];if(!e)throw new Error('Test not defined ("'+t+'"). Use `joint.env.addTest(name, fn) to add a new test.`');var n=this._results[t];if(typeof n<"u")return n;try{n=e()}catch{n=!1}return this._results[t]=n,n}},Go=Zi.define("basic.Generic",{attrs:{".":{fill:"#ffffff",stroke:"none"}}});Go.define("basic.Rect",{attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:100,height:60},text:{fill:"#000000",text:"","font-size":14,"ref-x":.5,"ref-y":.5,"text-anchor":"middle","y-alignment":"middle","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><rect/></g><text/></g>'});gi.extend({presentationAttributes:gi.addPresentationAttributes({attrs:["SCALE"]}),confirmUpdate:function(){var t=gi.prototype.confirmUpdate.apply(this,arguments);return this.hasFlag(t,"SCALE")&&(this.resize(),t=this.removeFlag(t,"SCALE")),t}});Go.define("basic.Text",{attrs:{text:{"font-size":18,fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><text/></g></g>'});Go.define("basic.Circle",{size:{width:60,height:60},attrs:{circle:{fill:"#ffffff",stroke:"#000000",r:30,cx:30,cy:30},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><circle/></g><text/></g>'});Go.define("basic.Ellipse",{size:{width:60,height:40},attrs:{ellipse:{fill:"#ffffff",stroke:"#000000",rx:30,ry:20,cx:30,cy:20},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><ellipse/></g><text/></g>'});Go.define("basic.Polygon",{size:{width:60,height:40},attrs:{polygon:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon/></g><text/></g>'});Go.define("basic.Polyline",{size:{width:60,height:40},attrs:{polyline:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><polyline/></g><text/></g>'});Go.define("basic.Image",{attrs:{text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><image/></g><text/></g>'});const Npe=Go.define("basic.Path",{size:{width:60,height:60},attrs:{path:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle",ref:"path","ref-x":.5,"ref-dy":10,fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><path/></g><text/></g>'});Npe.define("basic.Rhombus",{attrs:{path:{d:"M 30 0 L 60 30 30 60 0 30 z"},text:{"ref-y":.5,"ref-dy":null,"y-alignment":"middle"}}});const e1=p8.test("svgforeignobject");Go.define("basic.TextBlock",{attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:80,height:100},text:{fill:"#000000","font-size":14,"font-family":"Arial, helvetica, sans-serif"},".content":{text:"","ref-x":.5,"ref-y":.5,"y-alignment":"middle","x-alignment":"middle"}},content:""},{markup:['<g class="rotatable">','<g class="scalable"><rect/></g>',e1?'<foreignObject class="fobj"><body xmlns="http://www.w3.org/1999/xhtml"><div class="content"/></body></foreignObject>':'<text class="content"/>',"</g>"].join(""),initialize:function(){this.listenTo(this,"change:size",this.updateSize),this.listenTo(this,"change:content",this.updateContent),this.updateSize(this,this.get("size")),this.updateContent(this,this.get("content")),Go.prototype.initialize.apply(this,arguments)},updateSize:function(t,e){this.attr({".fobj":Mt({},e),div:{style:Mt({},e)}})},updateContent:function(t,e){e1?this.attr({".content":{html:hhe(e)}}):this.attr({".content":{text:e}})},setForeignObjectSize:function(){this.updateSize.apply(this,arguments)},setDivContent:function(){this.updateContent.apply(this,arguments)}});gi.extend({presentationAttributes:e1?gi.prototype.presentationAttributes:gi.addPresentationAttributes({content:["CONTENT"],size:["CONTENT"]}),initFlag:["RENDER","CONTENT"],confirmUpdate:function(){var t=gi.prototype.confirmUpdate.apply(this,arguments);return this.hasFlag(t,"CONTENT")&&(this.updateContent(this.model),t=this.removeFlag(t,"CONTENT")),t},update:function(t,e){var n=this.model;if(e1)gi.prototype.update.call(this,n,e);else{var r=jf(e||n.get("attrs"),".content");gi.prototype.update.call(this,n,r),(!e||zl(e,".content"))&&this.updateContent(n,e)}},updateContent:function(t,e){var n=Wr({},(e||t.get("attrs"))[".content"]);n=jf(n,"text");var r=U6(t.get("content"),t.get("size"),n,{svgDocument:this.paper.svg}),i=sA({},".content",n,"/");i[".content"].text=r,gi.prototype.update.call(this,t,i)}});const Ipe=Zi.define("standard.Rectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}]}),$pe=Zi.define("standard.Circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}]}),Rpe=Zi.define("standard.Ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"body"},{tagName:"text",selector:"label"}]}),Lpe=Zi.define("standard.Path",{attrs:{body:{refD:"M 0 0 L 10 0 10 10 0 10 Z",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}]}),Dpe=Zi.define("standard.Polygon",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polygon",selector:"body"},{tagName:"text",selector:"label"}]}),Fpe=Zi.define("standard.Polyline",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10 0 0",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polyline",selector:"body"},{tagName:"text",selector:"label"}]}),Vpe=Zi.define("standard.Image",{attrs:{image:{refWidth:"100%",refHeight:"100%"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),Bpe=Zi.define("standard.BorderedImage",{attrs:{border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#FFFFFF"},image:{refWidth:-1,refHeight:-1,x:.5,y:.5},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"background",attributes:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),jpe=Zi.define("standard.EmbeddedImage",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"},label:{textVerticalAnchor:"top",textAnchor:"left",refX:"30%",refX2:20,refY:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),zpe=Zi.define("standard.InscribedImage",{attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#FFFFFF"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),Hpe=Zi.define("standard.HeaderedRectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},header:{refWidth:"100%",height:30,strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},headerText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:15,fontSize:16,fill:"#333333"},bodyText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}]});var eE=10;const Upe=Zi.define("standard.Cylinder",{attrs:{body:{lateralArea:eE,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},top:{refCx:"50%",cy:eE,refRx:"50%",ry:eE,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"100%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],topRy:function(t,e){if(t===void 0)return this.attr("body/lateralArea");var n=Ni(t),r={lateralArea:t},i=n?{refCy:t,refRy:t,cy:null,ry:null}:{refCy:null,refRy:null,cy:t,ry:t};return this.attr({body:r,top:i},e)}},{attributes:{lateralArea:{set:function(t,e){var n=Ni(t);n&&(t=parseFloat(t)/100);var r=e.x,i=e.y,s=e.width,o=e.height,a=s/2,l=n?o*t:t,u=De.KAPPA,c=u*a,f=u*(n?o*t:t),p=r,v=r+s/2,b=r+s,E=i+l,P=E-l,S=i+o-l,A=i+o,I=["M",p,E,"L",p,S,"C",r,S+f,v-c,A,v,A,"C",v+c,A,b,S+f,b,S,"L",b,E,"C",b,E-f,v+c,P,v,P,"C",v-c,P,p,E-f,p,E,"Z"];return{d:I.join(" ")}}}}});var qpe={tagName:"foreignObject",selector:"foreignObject",attributes:{overflow:"hidden"},children:[{tagName:"div",namespaceURI:"http://www.w3.org/1999/xhtml",selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]},Wpe={tagName:"text",selector:"label",attributes:{"text-anchor":"middle"}},Gpe=p8.test("svgforeignobject")?qpe:Wpe;const Kpe=Zi.define("standard.TextBlock",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#ffffff",strokeWidth:2},foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}}},{markup:[{tagName:"rect",selector:"body"},Gpe]},{attributes:{text:{set:function(t,e,n,r){if(n instanceof HTMLElement)n.textContent=t;else{var i=r.style||{},s={text:t,width:-5,height:"100%"},o=Mt({textVerticalAnchor:"middle"},i);return K6.textWrap.set.call(this,s,e,n,o),{fill:i.color||null}}},position:function(t,e,n){if(n instanceof SVGElement)return e.center()}}}}),g8=nh.define("standard.Link",{attrs:{line:{connection:!0,stroke:"#333333",strokeWidth:2,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 10 -5 0 0 10 5 z"}},wrapper:{connection:!0,strokeWidth:10,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"wrapper",attributes:{fill:"none",cursor:"pointer",stroke:"transparent","stroke-linecap":"round"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]}),Ype=nh.define("standard.DoubleLink",{attrs:{line:{connection:!0,stroke:"#DDDDDD",strokeWidth:4,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"outline",attributes:{fill:"none"}},{tagName:"path",selector:"line",attributes:{fill:"none"}}]}),Jpe=nh.define("standard.ShadowLink",{attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}}}},{markup:[{tagName:"path",selector:"shadow",attributes:{fill:"none"}},{tagName:"path",selector:"line",attributes:{fill:"none"}}]}),Xpe=Object.freeze(Object.defineProperty({__proto__:null,BorderedImage:Bpe,Circle:$pe,Cylinder:Upe,DoubleLink:Ype,Ellipse:Rpe,EmbeddedImage:jpe,HeaderedRectangle:Hpe,Image:Vpe,InscribedImage:zpe,Link:g8,Path:Lpe,Polygon:Dpe,Polyline:Fpe,Rectangle:Ipe,ShadowLink:Jpe,TextBlock:Kpe},Symbol.toStringTag,{value:"Module"})),m8=Go.define("pn.Place",{size:{width:50,height:50},attrs:{".root":{r:25,fill:"#ffffff",stroke:"#000000",transform:"translate(25, 25)"},".label":{"text-anchor":"middle","ref-x":.5,"ref-y":-20,ref:".root",fill:"#000000","font-size":12},".tokens > circle":{fill:"#000000",r:5},".tokens.one > circle":{transform:"translate(25, 25)"},".tokens.two > circle:nth-child(1)":{transform:"translate(19, 25)"},".tokens.two > circle:nth-child(2)":{transform:"translate(31, 25)"},".tokens.three > circle:nth-child(1)":{transform:"translate(18, 29)"},".tokens.three > circle:nth-child(2)":{transform:"translate(25, 19)"},".tokens.three > circle:nth-child(3)":{transform:"translate(32, 29)"},".tokens.alot > text":{transform:"translate(25, 18)","text-anchor":"middle",fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><circle class="root"/><g class="tokens" /></g><text class="label"/></g>'}),Zpe=gi.extend({presentationAttributes:gi.addPresentationAttributes({tokens:["TOKENS"]}),initFlag:gi.prototype.initFlag.concat(["TOKENS"]),confirmUpdate:function(...t){let e=gi.prototype.confirmUpdate.call(this,...t);return this.hasFlag(e,"TOKENS")&&(this.renderTokens(),this.update(),e=this.removeFlag(e,"TOKENS")),e},renderTokens:function(){const t=this.vel.findOne(".tokens").empty();["one","two","three","alot"].forEach(function(n){t.removeClass(n)});var e=this.model.get("tokens");if(e)switch(e){case 1:t.addClass("one"),t.append(De("circle"));break;case 2:t.addClass("two"),t.append([De("circle"),De("circle")]);break;case 3:t.addClass("three"),t.append([De("circle"),De("circle"),De("circle")]);break;default:t.addClass("alot"),t.append(De("text").text(e+""));break}}}),v8=Go.define("pn.Transition",{size:{width:12,height:50},attrs:{rect:{width:12,height:50,fill:"#000000",stroke:"#000000"},".label":{"text-anchor":"middle","ref-x":.5,"ref-y":-20,ref:"rect",fill:"#000000","font-size":12}}},{markup:'<g class="rotatable"><g class="scalable"><rect class="root"/></g></g><text class="label"/>'}),Qpe=nh.define("pn.Link",{attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z"}}}),ege=Object.freeze(Object.defineProperty({__proto__:null,Link:Qpe,Place:m8,PlaceView:Zpe,Transition:v8},Symbol.toStringTag,{value:"Module"}));var R$=Yl.extend({tagName:"circle",svgElement:!0,className:"marker-vertex",events:{mousedown:"onPointerDown",touchstart:"onPointerDown",dblclick:"onDoubleClick",dbltap:"onDoubleClick"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},attributes:{r:6,fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move"},position:function(t,e){const{vel:n,options:r}=this,{scale:i}=r;let s=De.createSVGMatrix().translate(t,e);i&&(s=s.scale(i)),n.transform(s,{absolute:!0})},onPointerDown:function(t){this.options.guard(t)||(t.stopPropagation(),t.preventDefault(),this.options.paper.undelegateEvents(),this.delegateDocumentEvents(null,t.data),this.trigger("will-change",this,t))},onPointerMove:function(t){this.trigger("changing",this,t)},onDoubleClick:function(t){this.trigger("remove",this,t)},onPointerUp:function(t){this.trigger("changed",this,t),this.undelegateDocumentEvents(),this.options.paper.delegateEvents()}});const tge=iO.extend({name:"vertices",options:{handleClass:R$,snapRadius:20,redundancyRemoval:!0,vertexAdding:!0,stopPropagation:!0,scale:null},children:[{tagName:"path",selector:"connection",className:"joint-vertices-path",attributes:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"cell"}}],handles:null,events:{"mousedown .joint-vertices-path":"onPathPointerDown","touchstart .joint-vertices-path":"onPathPointerDown"},onRender:function(){return this.options.vertexAdding&&(this.renderChildren(),this.updatePath()),this.resetHandles(),this.renderHandles(),this},update:function(){var t=this.relatedView,e=t.model.vertices();return e.length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.vertexAdding&&this.updatePath(),this},resetHandles:function(){var t=this.handles;if(this.handles=[],this.stopListening(),!!Array.isArray(t))for(var e=0,n=t.length;e<n;e++)t[e].remove()},renderHandles:function(){for(var t=this.relatedView,e=t.model.vertices(),n=0,r=e.length;n<r;n++){var i=e[n],s=new this.options.handleClass({index:n,paper:this.paper,scale:this.options.scale,guard:o=>this.guard(o)});s.render(),s.position(i.x,i.y),this.simulateRelatedView(s.el),s.vel.appendTo(this.el),this.handles.push(s),this.startHandleListening(s)}},updateHandles:function(){for(var t=this.relatedView,e=t.model.vertices(),n=0,r=e.length;n<r;n++){var i=e[n],s=this.handles[n];if(!s)return;s.position(i.x,i.y)}},updatePath:function(){var t=this.childNodes.connection;t&&t.setAttribute("d",this.relatedView.getSerializedConnection())},startHandleListening:function(t){var e=this.relatedView;e.can("vertexMove")&&(this.listenTo(t,"will-change",this.onHandleWillChange),this.listenTo(t,"changing",this.onHandleChanging),this.listenTo(t,"changed",this.onHandleChanged)),e.can("vertexRemove")&&this.listenTo(t,"remove",this.onHandleRemove)},getNeighborPoints:function(t){var e=this.relatedView,n=e.model.vertices(),r=t>0?n[t-1]:e.sourceAnchor,i=t<n.length-1?n[t+1]:e.targetAnchor;return{prev:new fe(r),next:new fe(i)}},onHandleWillChange:function(t,e){this.focus();const{relatedView:n,options:r}=this;n.model.startBatch("vertex-move",{ui:!0,tool:this.cid}),r.stopPropagation||n.notifyPointerdown(...n.paper.getPointerArgs(e))},onHandleChanging:function(t,e){const{options:n,relatedView:r}=this;var i=t.options.index,[s,o,a]=r.paper.getPointerArgs(e),l={x:o,y:a};this.snapVertex(l,i),r.model.vertex(i,l,{ui:!0,tool:this.cid}),t.position(l.x,l.y),n.stopPropagation||r.notifyPointermove(s,o,a)},onHandleChanged:function(t,e){const{options:n,relatedView:r}=this;if(n.vertexAdding&&this.updatePath(),!!n.redundancyRemoval){var i=r.removeRedundantLinearVertices({ui:!0,tool:this.cid});i&&this.render(),this.blur(),r.model.stopBatch("vertex-move",{ui:!0,tool:this.cid}),this.eventData(e).vertexAdded&&r.model.stopBatch("vertex-add",{ui:!0,tool:this.cid});var[s,o,a]=r.paper.getPointerArgs(e);n.stopPropagation||r.notifyPointerup(s,o,a),r.checkMouseleave(s)}},snapVertex:function(t,e){var n=this.options.snapRadius;if(n>0){var r=this.getNeighborPoints(e),i=r.prev,s=r.next;Math.abs(t.x-i.x)<n?t.x=i.x:Math.abs(t.x-s.x)<n&&(t.x=s.x),Math.abs(t.y-i.y)<n?t.y=r.prev.y:Math.abs(t.y-s.y)<n&&(t.y=s.y)}},onHandleRemove:function(t,e){var n=t.options.index,r=this.relatedView;r.model.removeVertex(n,{ui:!0}),this.options.vertexAdding&&this.updatePath(),r.checkMouseleave(Nr(e))},onPathPointerDown:function(t){if(!this.guard(t)){t.stopPropagation(),t.preventDefault();var e=Nr(t),n=this.paper.snapToGrid(e.clientX,e.clientY).toJSON(),r=this.relatedView;r.model.startBatch("vertex-add",{ui:!0,tool:this.cid});var i=r.getVertexIndex(n.x,n.y);this.snapVertex(n,i),r.model.insertVertex(i,n,{ui:!0,tool:this.cid}),this.update();var s=this.handles[i];this.eventData(e,{vertexAdded:!0}),s.onPointerDown(e)}},onRemove:function(){this.resetHandles()}},{VertexHandle:R$});function nge(t,e){const{model:n}=t;return e?n.getBBox():n.isLink()?t.getConnection().bbox():t.getNodeUnrotatedBBox(t.el)}const Qd=iO.extend({name:"button",events:{mousedown:"onPointerDown",touchstart:"onPointerDown"},options:{distance:0,offset:0,scale:null,rotate:!1},onRender:function(){this.renderChildren(this.options.markup),this.update()},update:function(){return this.position(),this},position:function(){const{vel:t}=this;t.transform(this.getCellMatrix(),{absolute:!0})},getCellMatrix(){return this.relatedView.model.isLink()?this.getLinkMatrix():this.getElementMatrix()},getElementMatrix(){const{relatedView:t,options:e}=this;let{x:n=0,y:r=0,offset:i={},useModelGeometry:s,rotate:o,scale:a}=e,l=nge(t,s);const u=t.model.angle();o||(l=l.bbox(u));const{x:c=0,y:f=0}=i;Ni(n)?n=parseFloat(n)/100*l.width:Bo(n)&&(n=Number(jo(n,l))),Ni(r)?r=parseFloat(r)/100*l.height:Bo(r)&&(r=Number(jo(r,l)));let p=De.createSVGMatrix().translate(l.x+l.width/2,l.y+l.height/2);return o&&(p=p.rotate(u)),p=p.translate(n+c-l.width/2,r+f-l.height/2),a&&(p=p.scale(a)),p},getLinkMatrix(){const{relatedView:t,options:e}=this,{offset:n=0,distance:r=0,rotate:i,scale:s}=e;let o,a,l;Ni(r)?o=t.getTangentAtRatio(parseFloat(r)/100):o=t.getTangentAtLength(r),o?(a=o.start,l=o.vector().vectorAngle(new fe(1,0))||0):(a=t.getConnection().start,l=0);let u=De.createSVGMatrix().translate(a.x,a.y).rotate(l).translate(0,n);return i||(u=u.rotate(-l)),s&&(u=u.scale(s)),u},onPointerDown:function(t){if(!this.guard(t)){t.stopPropagation(),t.preventDefault();var e=this.options.action;typeof e=="function"&&e.call(this.relatedView,t,this.relatedView,this)}}});Qd.extend({children:[{tagName:"circle",selector:"button",attributes:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],options:{distance:60,offset:0,action:function(t,e,n){e.model.remove({ui:!0,tool:n.cid})}}});const rge=Qd.extend({name:"connect",documentEvents:{mousemove:"drag",touchmove:"drag",mouseup:"dragend",touchend:"dragend",touchcancel:"dragend"},children:[{tagName:"circle",selector:"button",attributes:{r:7,fill:"#333333",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"M -4 -1 L 0 -1 L 0 -4 L 4 0 L 0 4 0 1 -4 1 z",fill:"#FFFFFF",stroke:"none","stroke-width":2,"pointer-events":"none"}}],options:{distance:80,offset:0,magnet:t=>t.el,action:(t,e,n)=>n.dragstart(t)},getMagnetNode:function(){const{options:t,relatedView:e}=this,{magnet:n}=t;let r;switch(typeof n){case"function":{r=n.call(this,e,this);break}case"string":{[r]=e.findBySelector(n);break}default:{r=n;break}}if(r||(r=e.el),r instanceof SVGElement)return r;throw new Error("Connect: magnet must be an SVGElement")},dragstart:function(t){const{paper:e,relatedView:n}=this,r=Nr(t),{x:i,y:s}=e.clientToLocalPoint(r.clientX,r.clientY);n.dragLinkStart(r,this.getMagnetNode(),i,s),e.undelegateEvents(),this.delegateDocumentEvents(null,r.data),this.focus()},drag:function(t){const{paper:e,relatedView:n}=this,r=Nr(t),{x:i,y:s}=e.snapToGrid(r.clientX,r.clientY);n.dragLink(r,i,s)},dragend:function(t){const{paper:e,relatedView:n}=this,r=Nr(t),{x:i,y:s}=e.snapToGrid(r.clientX,r.clientY);n.dragLinkEnd(r,i,s),this.undelegateDocumentEvents(),e.delegateEvents(),this.blur(),n.checkMouseleave(r)}});class L$ extends g8{constructor(e,n,r,i){super({source:{id:e,selector:".root"},target:{id:n,selector:".root"},attrs:{".connection":{fill:"none","stroke-linejoin":"round","stroke-width":"2",stroke:"#4b4a67"}}}),this.set("id",r),this.prop("jsonnetsType",i),this.connector("straight",{cornerType:"cubic"})}addInteractionTools(e){const n=new Qd({markup:[{tagName:"circle",selector:"button",attributes:{r:8,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],distance:30,action:()=>{po().disconnect(String(this.id))}}),r=new Rd({tools:[n]});let i=this.findView(e);i.addTools(r),i.hideTools()}addVerticesTools(e){var n=new tge;const r=new Rd({tools:[n]});let i=this.findView(e);i.addTools(r),i.hideTools()}}class y8 extends Qd{constructor(e,n){super({markup:[{tagName:"circle",selector:"button",attributes:{r:8,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],useModelGeometry:!0,x:e,y:"100%",offset:{x:0,y:0},rotate:!0,action:function(){const r=po();n.get("jsonnetsType")==="place"?r.deletePlace(String(n.id)):n.get("jsonnetsType")==="transition"&&r.deleteTransition(String(n.id))}})}}class b8 extends Qd{constructor(e,n){super({markup:[{tagName:"circle",selector:"button",attributes:{r:8,fill:"green",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"M -2 4 2 4 M 0 3 0 0 M -2 -1 1 -1 M -1 -4 1 -4",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],useModelGeometry:!0,x:e,y:"100%",offset:{x:0,y:0},rotate:!0,action:()=>{au().setModal(n.get("jsonnetsType"),n.id)}})}}class w8 extends rge{constructor(){super({x:"100%",y:"50%",useModelGeometry:!0,markup:[{tagName:"circle",selector:"button",attributes:{r:8,fill:"#7a7e9b",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"M -4 -1 L 0 -1 L 0 -4 L 4 0 L 0 4 0 1 -4 1 z",fill:"#FFFFFF",stroke:"none","stroke-width":2,"pointer-events":"none"}}]})}}class D$ extends m8{constructor(e,n,r,i){super({position:{x:e-25,y:n-25},attrs:{".label":{text:r,fill:"#7a7e9b"},".root":{stroke:"hsl(204, 71%, 39%)","stroke-width":3},".tokens > circle":{fill:"#7a7e9b"},".alot > text":{fill:"#7a7e9b","font-family":"Courier New","font-size":20,"font-weight":"bold","ref-x":0,"ref-y":0,"y-alignment":-.2}},tokens:0}),this.set("id",i),this.prop("jsonnetsType","place")}addInteractionTools(e){const n="25%",r="75%",i=new y8(n,this),s=new b8(r,this),o=new Rd({tools:[i,s]}),a=this.findView(e);a.addTools(o),a.hideTools()}addConnectTools(e){const n=new w8,r=new Rd({tools:[n]}),i=this.findView(e);i.addTools(r),i.hideTools()}}class F$ extends v8{constructor(e,n,r,i){super({position:{x:e-25,y:n-25},attrs:{".label":{text:r,fill:"#7a7e9b"},".root":{fill:"hsl(204, 71%, 39%)",stroke:"hsl(0, 0%, 21%)"}}}),this.set("id",i),this.prop("jsonnetsType","transition"),this.resize(100,50)}addInteractionTools(e){const n="0%",r="100%",i=new y8(n,this),s=new b8(r,this),o=new Qd({markup:[{tagName:"circle",selector:"button",attributes:{r:8,fill:"blue",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"M75,5 l-60,0 0,90 M15,45 l50,0",transform:"translate(-3,-3) scale(0.09)",fill:"none",stroke:"white","stroke-width":20,cursor:"pointer"}}],useModelGeometry:!0,x:"50%",y:"100%",offset:{x:0,y:0},rotate:!0,action:()=>{po().fireUnderAnyAssignment(String(this.id))}}),a=new Rd({tools:[i,s,o]}),l=this.findView(e);l.addTools(a),l.hideTools()}addConnectTools(e){const n=new w8,r=new Rd({tools:[n]}),i=this.findView(e);i.addTools(r),i.hideTools()}}var ige="\0",Wc="\0",V$="",Ts,gf,io,bm,dd,pd,Io,Ha,Fu,Ua,Vu,$l,Rl,gd,md,Ll,ua,wm,pA,DR;let sge=(DR=class{constructor(e){wr(this,wm);wr(this,Ts,!0);wr(this,gf,!1);wr(this,io,!1);wr(this,bm,void 0);wr(this,dd,()=>{});wr(this,pd,()=>{});wr(this,Io,{});wr(this,Ha,{});wr(this,Fu,{});wr(this,Ua,{});wr(this,Vu,{});wr(this,$l,{});wr(this,Rl,{});wr(this,gd,0);wr(this,md,0);wr(this,Ll,void 0);wr(this,ua,void 0);e&&(Mo(this,Ts,e.hasOwnProperty("directed")?e.directed:!0),Mo(this,gf,e.hasOwnProperty("multigraph")?e.multigraph:!1),Mo(this,io,e.hasOwnProperty("compound")?e.compound:!1)),et(this,io)&&(Mo(this,Ll,{}),Mo(this,ua,{}),et(this,ua)[Wc]={})}isDirected(){return et(this,Ts)}isMultigraph(){return et(this,gf)}isCompound(){return et(this,io)}setGraph(e){return Mo(this,bm,e),this}graph(){return et(this,bm)}setDefaultNodeLabel(e){return Mo(this,dd,e),typeof e!="function"&&Mo(this,dd,()=>e),this}nodeCount(){return et(this,gd)}nodes(){return Object.keys(et(this,Io))}sources(){var e=this;return this.nodes().filter(n=>Object.keys(et(e,Ha)[n]).length===0)}sinks(){var e=this;return this.nodes().filter(n=>Object.keys(et(e,Ua)[n]).length===0)}setNodes(e,n){var r=arguments,i=this;return e.forEach(function(s){r.length>1?i.setNode(s,n):i.setNode(s)}),this}setNode(e,n){return et(this,Io).hasOwnProperty(e)?(arguments.length>1&&(et(this,Io)[e]=n),this):(et(this,Io)[e]=arguments.length>1?n:et(this,dd).call(this,e),et(this,io)&&(et(this,Ll)[e]=Wc,et(this,ua)[e]={},et(this,ua)[Wc][e]=!0),et(this,Ha)[e]={},et(this,Fu)[e]={},et(this,Ua)[e]={},et(this,Vu)[e]={},++Tp(this,gd)._,this)}node(e){return et(this,Io)[e]}hasNode(e){return et(this,Io).hasOwnProperty(e)}removeNode(e){var n=this;if(et(this,Io).hasOwnProperty(e)){var r=i=>n.removeEdge(et(n,$l)[i]);delete et(this,Io)[e],et(this,io)&&(La(this,wm,pA).call(this,e),delete et(this,Ll)[e],this.children(e).forEach(function(i){n.setParent(i)}),delete et(this,ua)[e]),Object.keys(et(this,Ha)[e]).forEach(r),delete et(this,Ha)[e],delete et(this,Fu)[e],Object.keys(et(this,Ua)[e]).forEach(r),delete et(this,Ua)[e],delete et(this,Vu)[e],--Tp(this,gd)._}return this}setParent(e,n){if(!et(this,io))throw new Error("Cannot set parent in a non-compound graph");if(n===void 0)n=Wc;else{n+="";for(var r=n;r!==void 0;r=this.parent(r))if(r===e)throw new Error("Setting "+n+" as parent of "+e+" would create a cycle");this.setNode(n)}return this.setNode(e),La(this,wm,pA).call(this,e),et(this,Ll)[e]=n,et(this,ua)[n][e]=!0,this}parent(e){if(et(this,io)){var n=et(this,Ll)[e];if(n!==Wc)return n}}children(e=Wc){if(et(this,io)){var n=et(this,ua)[e];if(n)return Object.keys(n)}else{if(e===Wc)return this.nodes();if(this.hasNode(e))return[]}}predecessors(e){var n=et(this,Fu)[e];if(n)return Object.keys(n)}successors(e){var n=et(this,Vu)[e];if(n)return Object.keys(n)}neighbors(e){var n=this.predecessors(e);if(n){const i=new Set(n);for(var r of this.successors(e))i.add(r);return Array.from(i.values())}}isLeaf(e){var n;return this.isDirected()?n=this.successors(e):n=this.neighbors(e),n.length===0}filterNodes(e){var n=new this.constructor({directed:et(this,Ts),multigraph:et(this,gf),compound:et(this,io)});n.setGraph(this.graph());var r=this;Object.entries(et(this,Io)).forEach(function([o,a]){e(o)&&n.setNode(o,a)}),Object.values(et(this,$l)).forEach(function(o){n.hasNode(o.v)&&n.hasNode(o.w)&&n.setEdge(o,r.edge(o))});var i={};function s(o){var a=r.parent(o);return a===void 0||n.hasNode(a)?(i[o]=a,a):a in i?i[a]:s(a)}return et(this,io)&&n.nodes().forEach(o=>n.setParent(o,s(o))),n}setDefaultEdgeLabel(e){return Mo(this,pd,e),typeof e!="function"&&Mo(this,pd,()=>e),this}edgeCount(){return et(this,md)}edges(){return Object.values(et(this,$l))}setPath(e,n){var r=this,i=arguments;return e.reduce(function(s,o){return i.length>1?r.setEdge(s,o,n):r.setEdge(s,o),o}),this}setEdge(){var e,n,r,i,s=!1,o=arguments[0];typeof o=="object"&&o!==null&&"v"in o?(e=o.v,n=o.w,r=o.name,arguments.length===2&&(i=arguments[1],s=!0)):(e=o,n=arguments[1],r=arguments[3],arguments.length>2&&(i=arguments[2],s=!0)),e=""+e,n=""+n,r!==void 0&&(r=""+r);var a=rg(et(this,Ts),e,n,r);if(et(this,Rl).hasOwnProperty(a))return s&&(et(this,Rl)[a]=i),this;if(r!==void 0&&!et(this,gf))throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(n),et(this,Rl)[a]=s?i:et(this,pd).call(this,e,n,r);var l=oge(et(this,Ts),e,n,r);return e=l.v,n=l.w,Object.freeze(l),et(this,$l)[a]=l,B$(et(this,Fu)[n],e),B$(et(this,Vu)[e],n),et(this,Ha)[n][a]=l,et(this,Ua)[e][a]=l,Tp(this,md)._++,this}edge(e,n,r){var i=arguments.length===1?tE(et(this,Ts),arguments[0]):rg(et(this,Ts),e,n,r);return et(this,Rl)[i]}edgeAsObj(){const e=this.edge(...arguments);return typeof e!="object"?{label:e}:e}hasEdge(e,n,r){var i=arguments.length===1?tE(et(this,Ts),arguments[0]):rg(et(this,Ts),e,n,r);return et(this,Rl).hasOwnProperty(i)}removeEdge(e,n,r){var i=arguments.length===1?tE(et(this,Ts),arguments[0]):rg(et(this,Ts),e,n,r),s=et(this,$l)[i];return s&&(e=s.v,n=s.w,delete et(this,Rl)[i],delete et(this,$l)[i],j$(et(this,Fu)[n],e),j$(et(this,Vu)[e],n),delete et(this,Ha)[n][i],delete et(this,Ua)[e][i],Tp(this,md)._--),this}inEdges(e,n){var r=et(this,Ha)[e];if(r){var i=Object.values(r);return n?i.filter(s=>s.v===n):i}}outEdges(e,n){var r=et(this,Ua)[e];if(r){var i=Object.values(r);return n?i.filter(s=>s.w===n):i}}nodeEdges(e,n){var r=this.inEdges(e,n);if(r)return r.concat(this.outEdges(e,n))}},Ts=new WeakMap,gf=new WeakMap,io=new WeakMap,bm=new WeakMap,dd=new WeakMap,pd=new WeakMap,Io=new WeakMap,Ha=new WeakMap,Fu=new WeakMap,Ua=new WeakMap,Vu=new WeakMap,$l=new WeakMap,Rl=new WeakMap,gd=new WeakMap,md=new WeakMap,Ll=new WeakMap,ua=new WeakMap,wm=new WeakSet,pA=function(e){delete et(this,ua)[et(this,Ll)[e]][e]},DR);function B$(t,e){t[e]?t[e]++:t[e]=1}function j$(t,e){--t[e]||delete t[e]}function rg(t,e,n,r){var i=""+e,s=""+n;if(!t&&i>s){var o=i;i=s,s=o}return i+V$+s+V$+(r===void 0?ige:r)}function oge(t,e,n,r){var i=""+e,s=""+n;if(!t&&i>s){var o=i;i=s,s=o}var a={v:i,w:s};return r&&(a.name=r),a}function tE(t,e){return rg(t,e.v,e.w,e.name)}var sO=sge,age="2.1.13",lge={Graph:sO,version:age},uge=sO,cge={write:fge,read:pge};function fge(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:hge(t),edges:dge(t)};return t.graph()!==void 0&&(e.value=structuredClone(t.graph())),e}function hge(t){return t.nodes().map(function(e){var n=t.node(e),r=t.parent(e),i={v:e};return n!==void 0&&(i.value=n),r!==void 0&&(i.parent=r),i})}function dge(t){return t.edges().map(function(e){var n=t.edge(e),r={v:e.v,w:e.w};return e.name!==void 0&&(r.name=e.name),n!==void 0&&(r.value=n),r})}function pge(t){var e=new uge(t.options).setGraph(t.value);return t.nodes.forEach(function(n){e.setNode(n.v,n.value),n.parent&&e.setParent(n.v,n.parent)}),t.edges.forEach(function(n){e.setEdge({v:n.v,w:n.w,name:n.name},n.value)}),e}var gge=mge;function mge(t){var e={},n=[],r;function i(s){e.hasOwnProperty(s)||(e[s]=!0,r.push(s),t.successors(s).forEach(i),t.predecessors(s).forEach(i))}return t.nodes().forEach(function(s){r=[],i(s),r.length&&n.push(r)}),n}var zi,Dl,xm,gA,Sm,mA,vd,Hy,FR;let vge=(FR=class{constructor(){wr(this,xm);wr(this,Sm);wr(this,vd);wr(this,zi,[]);wr(this,Dl,{})}size(){return et(this,zi).length}keys(){return et(this,zi).map(function(e){return e.key})}has(e){return et(this,Dl).hasOwnProperty(e)}priority(e){var n=et(this,Dl)[e];if(n!==void 0)return et(this,zi)[n].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return et(this,zi)[0].key}add(e,n){var r=et(this,Dl);if(e=String(e),!r.hasOwnProperty(e)){var i=et(this,zi),s=i.length;return r[e]=s,i.push({key:e,priority:n}),La(this,Sm,mA).call(this,s),!0}return!1}removeMin(){La(this,vd,Hy).call(this,0,et(this,zi).length-1);var e=et(this,zi).pop();return delete et(this,Dl)[e.key],La(this,xm,gA).call(this,0),e.key}decrease(e,n){var r=et(this,Dl)[e];if(n>et(this,zi)[r].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+et(this,zi)[r].priority+" New: "+n);et(this,zi)[r].priority=n,La(this,Sm,mA).call(this,r)}},zi=new WeakMap,Dl=new WeakMap,xm=new WeakSet,gA=function(e){var n=et(this,zi),r=2*e,i=r+1,s=e;r<n.length&&(s=n[r].priority<n[s].priority?r:s,i<n.length&&(s=n[i].priority<n[s].priority?i:s),s!==e&&(La(this,vd,Hy).call(this,e,s),La(this,xm,gA).call(this,s)))},Sm=new WeakSet,mA=function(e){for(var n=et(this,zi),r=n[e].priority,i;e!==0&&(i=e>>1,!(n[i].priority<r));)La(this,vd,Hy).call(this,e,i),e=i},vd=new WeakSet,Hy=function(e,n){var r=et(this,zi),i=et(this,Dl),s=r[e],o=r[n];r[e]=o,r[n]=s,i[o.key]=e,i[s.key]=n},FR);var x8=vge,yge=x8,S8=wge,bge=()=>1;function wge(t,e,n,r){return xge(t,String(e),n||bge,r||function(i){return t.outEdges(i)})}function xge(t,e,n,r){var i={},s=new yge,o,a,l=function(u){var c=u.v!==o?u.v:u.w,f=i[c],p=n(u),v=a.distance+p;if(p<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+u+" Weight: "+p);v<f.distance&&(f.distance=v,f.predecessor=o,s.decrease(c,v))};for(t.nodes().forEach(function(u){var c=u===e?0:Number.POSITIVE_INFINITY;i[u]={distance:c},s.add(u,c)});s.size()>0&&(o=s.removeMin(),a=i[o],a.distance!==Number.POSITIVE_INFINITY);)r(o).forEach(l);return i}var Sge=S8,Ege=_ge;function _ge(t,e,n){return t.nodes().reduce(function(r,i){return r[i]=Sge(t,i,e,n),r},{})}var E8=Age;function Age(t){var e=0,n=[],r={},i=[];function s(o){var a=r[o]={onStack:!0,lowlink:e,index:e++};if(n.push(o),t.successors(o).forEach(function(c){r.hasOwnProperty(c)?r[c].onStack&&(a.lowlink=Math.min(a.lowlink,r[c].index)):(s(c),a.lowlink=Math.min(a.lowlink,r[c].lowlink))}),a.lowlink===a.index){var l=[],u;do u=n.pop(),r[u].onStack=!1,l.push(u);while(o!==u);i.push(l)}}return t.nodes().forEach(function(o){r.hasOwnProperty(o)||s(o)}),i}var kge=E8,Cge=Pge;function Pge(t){return kge(t).filter(function(e){return e.length>1||e.length===1&&t.hasEdge(e[0],e[0])})}var Oge=Mge,Tge=()=>1;function Mge(t,e,n){return Nge(t,e||Tge,n||function(r){return t.outEdges(r)})}function Nge(t,e,n){var r={},i=t.nodes();return i.forEach(function(s){r[s]={},r[s][s]={distance:0},i.forEach(function(o){s!==o&&(r[s][o]={distance:Number.POSITIVE_INFINITY})}),n(s).forEach(function(o){var a=o.v===s?o.w:o.v,l=e(o);r[s][a]={distance:l,predecessor:s}})}),i.forEach(function(s){var o=r[s];i.forEach(function(a){var l=r[a];i.forEach(function(u){var c=l[s],f=o[u],p=l[u],v=c.distance+f.distance;v<p.distance&&(p.distance=v,p.predecessor=f.predecessor)})})}),r}function _8(t){var e={},n={},r=[];function i(s){if(n.hasOwnProperty(s))throw new vA;e.hasOwnProperty(s)||(n[s]=!0,e[s]=!0,t.predecessors(s).forEach(i),delete n[s],r.push(s))}if(t.sinks().forEach(i),Object.keys(e).length!==t.nodeCount())throw new vA;return r}class vA extends Error{constructor(){super(...arguments)}}var A8=_8;_8.CycleException=vA;var z$=A8,Ige=$ge;function $ge(t){try{z$(t)}catch(e){if(e instanceof z$.CycleException)return!1;throw e}return!0}var k8=Rge;function Rge(t,e,n){Array.isArray(e)||(e=[e]);var r=t.isDirected()?a=>t.successors(a):a=>t.neighbors(a),i=n==="post"?Lge:Dge,s=[],o={};return e.forEach(a=>{if(!t.hasNode(a))throw new Error("Graph does not have node: "+a);i(a,r,o,s)}),s}function Lge(t,e,n,r){for(var i=[[t,!1]];i.length>0;){var s=i.pop();s[1]?r.push(s[0]):n.hasOwnProperty(s[0])||(n[s[0]]=!0,i.push([s[0],!0]),C8(e(s[0]),o=>i.push([o,!1])))}}function Dge(t,e,n,r){for(var i=[t];i.length>0;){var s=i.pop();n.hasOwnProperty(s)||(n[s]=!0,r.push(s),C8(e(s),o=>i.push(o)))}}function C8(t,e){for(var n=t.length;n--;)e(t[n],n,t);return t}var Fge=k8,Vge=Bge;function Bge(t,e){return Fge(t,e,"post")}var jge=k8,zge=Hge;function Hge(t,e){return jge(t,e,"pre")}var Uge=sO,qge=x8,Wge=Gge;function Gge(t,e){var n=new Uge,r={},i=new qge,s;function o(l){var u=l.v===s?l.w:l.v,c=i.priority(u);if(c!==void 0){var f=e(l);f<c&&(r[u]=s,i.decrease(u,f))}}if(t.nodeCount()===0)return n;t.nodes().forEach(function(l){i.add(l,Number.POSITIVE_INFINITY),n.setNode(l)}),i.decrease(t.nodes()[0],0);for(var a=!1;i.size()>0;){if(s=i.removeMin(),r.hasOwnProperty(s))n.setEdge(s,r[s]);else{if(a)throw new Error("Input graph is not connected: "+t);a=!0}t.nodeEdges(s).forEach(o)}return n}var Kge={components:gge,dijkstra:S8,dijkstraAll:Ege,findCycles:Cge,floydWarshall:Oge,isAcyclic:Ige,postorder:Vge,preorder:zge,prim:Wge,tarjan:E8,topsort:A8},H$=lge,bo={Graph:H$.Graph,json:cge,alg:Kge,version:H$.version};const Yge=ka(bo),Jge=VR({__proto__:null,default:Yge},[bo]);var Xge=Pw;function Pw(){var t={};t._next=t._prev=t,this._sentinel=t}Pw.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return P8(e),e};Pw.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&P8(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e};Pw.prototype.toString=function(){for(var t=[],e=this._sentinel,n=e._prev;n!==e;)t.push(JSON.stringify(n,Zge)),n=n._prev;return"["+t.join(", ")+"]"};function P8(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function Zge(t,e){if(t!=="_next"&&t!=="_prev")return e}var Qge=bo.Graph,eme=Xge,tme=rme,nme=()=>1;function rme(t,e){if(t.nodeCount()<=1)return[];var n=sme(t,e||nme),r=ime(n.graph,n.buckets,n.zeroIdx);return r.flatMap(i=>t.outEdges(i.v,i.w))}function ime(t,e,n){for(var r=[],i=e[e.length-1],s=e[0],o;t.nodeCount();){for(;o=s.dequeue();)nE(t,e,n,o);for(;o=i.dequeue();)nE(t,e,n,o);if(t.nodeCount()){for(var a=e.length-2;a>0;--a)if(o=e[a].dequeue(),o){r=r.concat(nE(t,e,n,o,!0));break}}}return r}function nE(t,e,n,r,i){var s=i?[]:void 0;return t.inEdges(r.v).forEach(function(o){var a=t.edge(o),l=t.node(o.v);i&&s.push({v:o.v,w:o.w}),l.out-=a,yA(e,n,l)}),t.outEdges(r.v).forEach(function(o){var a=t.edge(o),l=o.w,u=t.node(l);u.in-=a,yA(e,n,u)}),t.removeNode(r.v),s}function sme(t,e){var n=new Qge,r=0,i=0;t.nodes().forEach(function(a){n.setNode(a,{v:a,in:0,out:0})}),t.edges().forEach(function(a){var l=n.edge(a.v,a.w)||0,u=e(a),c=l+u;n.setEdge(a.v,a.w,c),i=Math.max(i,n.node(a.v).out+=u),r=Math.max(r,n.node(a.w).in+=u)});var s=ome(i+r+3).map(()=>new eme),o=r+1;return n.nodes().forEach(function(a){yA(s,o,n.node(a))}),{graph:n,buckets:s,zeroIdx:o}}function yA(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}function ome(t){const e=[];for(let n=0;n<t;n++)e.push(n);return e}var O8=bo.Graph,ci={addBorderNode:gme,addDummyNode:T8,asNonCompoundGraph:lme,buildLayerMatrix:hme,intersectRect:fme,mapValues:xme,maxRank:M8,normalizeRanks:dme,notime:yme,partition:mme,pick:wme,predecessorWeights:cme,range:I8,removeEmptyRanks:pme,simplify:ame,successorWeights:ume,time:vme,uniqueId:N8,zipObject:oO};function T8(t,e,n,r){var i;do i=N8(r);while(t.hasNode(i));return n.dummy=e,t.setNode(i,n),i}function ame(t){var e=new O8().setGraph(t.graph());return t.nodes().forEach(n=>e.setNode(n,t.node(n))),t.edges().forEach(n=>{var r=e.edge(n.v,n.w)||{weight:0,minlen:1},i=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),e}function lme(t){var e=new O8({multigraph:t.isMultigraph()}).setGraph(t.graph());return t.nodes().forEach(n=>{t.children(n).length||e.setNode(n,t.node(n))}),t.edges().forEach(n=>{e.setEdge(n,t.edge(n))}),e}function ume(t){var e=t.nodes().map(n=>{var r={};return t.outEdges(n).forEach(i=>{r[i.w]=(r[i.w]||0)+t.edge(i).weight}),r});return oO(t.nodes(),e)}function cme(t){var e=t.nodes().map(n=>{var r={};return t.inEdges(n).forEach(i=>{r[i.v]=(r[i.v]||0)+t.edge(i).weight}),r});return oO(t.nodes(),e)}function fme(t,e){var n=t.x,r=t.y,i=e.x-n,s=e.y-r,o=t.width/2,a=t.height/2;if(!i&&!s)throw new Error("Not possible to find intersection inside of the rectangle");var l,u;return Math.abs(s)*o>Math.abs(i)*a?(s<0&&(a=-a),l=a*i/s,u=a):(i<0&&(o=-o),l=o,u=o*s/i),{x:n+l,y:r+u}}function hme(t){var e=I8(M8(t)+1).map(()=>[]);return t.nodes().forEach(n=>{var r=t.node(n),i=r.rank;i!==void 0&&(e[i][r.order]=n)}),e}function dme(t){var e=Math.min(...t.nodes().map(n=>{var r=t.node(n).rank;return r===void 0?Number.MAX_VALUE:r}));t.nodes().forEach(n=>{var r=t.node(n);r.hasOwnProperty("rank")&&(r.rank-=e)})}function pme(t){var e=Math.min(...t.nodes().map(s=>t.node(s).rank)),n=[];t.nodes().forEach(s=>{var o=t.node(s).rank-e;n[o]||(n[o]=[]),n[o].push(s)});var r=0,i=t.graph().nodeRankFactor;Array.from(n).forEach((s,o)=>{s===void 0&&o%i!==0?--r:s!==void 0&&r&&s.forEach(a=>t.node(a).rank+=r)})}function gme(t,e,n,r){var i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),T8(t,"border",i,e)}function M8(t){return Math.max(...t.nodes().map(e=>{var n=t.node(e).rank;return n===void 0?Number.MIN_VALUE:n}))}function mme(t,e){var n={lhs:[],rhs:[]};return t.forEach(r=>{e(r)?n.lhs.push(r):n.rhs.push(r)}),n}function vme(t,e){var n=Date.now();try{return e()}finally{console.log(t+" time: "+(Date.now()-n)+"ms")}}function yme(t,e){return e()}let bme=0;function N8(t){var e=++bme;return toString(t)+e}function I8(t,e,n=1){e==null&&(e=t,t=0);let r=s=>s<e;n<0&&(r=s=>e<s);const i=[];for(let s=t;r(s);s+=n)i.push(s);return i}function wme(t,e){const n={};for(const r of e)t[r]!==void 0&&(n[r]=t[r]);return n}function xme(t,e){let n=e;return typeof e=="string"&&(n=r=>r[e]),Object.entries(t).reduce((r,[i,s])=>(r[i]=n(s,i),r),{})}function oO(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}var Sme=tme,Eme=ci.uniqueId,_me={run:Ame,undo:Cme};function Ame(t){var e=t.graph().acyclicer==="greedy"?Sme(t,n(t)):kme(t);e.forEach(function(r){var i=t.edge(r);t.removeEdge(r),i.forwardName=r.name,i.reversed=!0,t.setEdge(r.w,r.v,i,Eme("rev"))});function n(r){return function(i){return r.edge(i).weight}}}function kme(t){var e=[],n={},r={};function i(s){r.hasOwnProperty(s)||(r[s]=!0,n[s]=!0,t.outEdges(s).forEach(function(o){n.hasOwnProperty(o.w)?e.push(o):i(o.w)}),delete n[s])}return t.nodes().forEach(i),e}function Cme(t){t.edges().forEach(function(e){var n=t.edge(e);if(n.reversed){t.removeEdge(e);var r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}})}var Pme=ci,Ome={run:Tme,undo:Nme};function Tme(t){t.graph().dummyChains=[],t.edges().forEach(e=>Mme(t,e))}function Mme(t,e){var n=e.v,r=t.node(n).rank,i=e.w,s=t.node(i).rank,o=e.name,a=t.edge(e),l=a.labelRank;if(s!==r+1){t.removeEdge(e);var u,c,f;for(f=0,++r;r<s;++f,++r)a.points=[],c={width:0,height:0,edgeLabel:a,edgeObj:e,rank:r},u=Pme.addDummyNode(t,"edge",c,"_d"),r===l&&(c.width=a.width,c.height=a.height,c.dummy="edge-label",c.labelpos=a.labelpos),t.setEdge(n,u,{weight:a.weight},o),f===0&&t.graph().dummyChains.push(u),n=u;t.setEdge(n,i,{weight:a.weight},o)}}function Nme(t){t.graph().dummyChains.forEach(function(e){var n=t.node(e),r=n.edgeLabel,i;for(t.setEdge(n.edgeObj,r);n.dummy;)i=t.successors(e)[0],t.removeNode(e),r.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),e=i,n=t.node(e)})}var Ow={longestPath:Ime,slack:$me};function Ime(t){var e={};function n(r){var i=t.node(r);if(e.hasOwnProperty(r))return i.rank;e[r]=!0;var s=Math.min(...t.outEdges(r).map(o=>o==null?Number.POSITIVE_INFINITY:n(o.w)-t.edge(o).minlen));return s===Number.POSITIVE_INFINITY&&(s=0),i.rank=s}t.sources().forEach(n)}function $me(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}var Rme=bo.Graph,t1=Ow.slack,$8=Lme;function Lme(t){var e=new Rme({directed:!1}),n=t.nodes()[0],r=t.nodeCount();e.setNode(n,{});for(var i,s;Dme(e,t)<r;)i=Fme(e,t),s=e.hasNode(i.v)?t1(t,i):-t1(t,i),Vme(e,t,s);return e}function Dme(t,e){function n(r){e.nodeEdges(r).forEach(function(i){var s=i.v,o=r===s?i.w:s;!t.hasNode(o)&&!t1(e,i)&&(t.setNode(o,{}),t.setEdge(r,o,{}),n(o))})}return t.nodes().forEach(n),t.nodeCount()}function Fme(t,e){return e.edges().reduce((r,i)=>{let s=Number.POSITIVE_INFINITY;return t.hasNode(i.v)!==t.hasNode(i.w)&&(s=t1(e,i)),s<r[0]?[s,i]:r},[Number.POSITIVE_INFINITY,null])[1]}function Vme(t,e,n){t.nodes().forEach(r=>e.node(r).rank+=n)}var Bme=$8,U$=Ow.slack,jme=Ow.longestPath,zme=bo.alg.preorder,Hme=bo.alg.postorder,Ume=ci.simplify,qme=ih;ih.initLowLimValues=lO;ih.initCutValues=aO;ih.calcCutValue=R8;ih.leaveEdge=D8;ih.enterEdge=F8;ih.exchangeEdges=V8;function ih(t){t=Ume(t),jme(t);var e=Bme(t);lO(e),aO(e,t);for(var n,r;n=D8(e);)r=F8(e,t,n),V8(e,t,n,r)}function aO(t,e){var n=Hme(t,t.nodes());n=n.slice(0,n.length-1),n.forEach(r=>Wme(t,e,r))}function Wme(t,e,n){var r=t.node(n),i=r.parent;t.edge(n,i).cutvalue=R8(t,e,n)}function R8(t,e,n){var r=t.node(n),i=r.parent,s=!0,o=e.edge(n,i),a=0;return o||(s=!1,o=e.edge(i,n)),a=o.weight,e.nodeEdges(n).forEach(function(l){var u=l.v===n,c=u?l.w:l.v;if(c!==i){var f=u===s,p=e.edge(l).weight;if(a+=f?p:-p,Kme(t,n,c)){var v=t.edge(n,c).cutvalue;a+=f?-v:v}}}),a}function lO(t,e){arguments.length<2&&(e=t.nodes()[0]),L8(t,{},1,e)}function L8(t,e,n,r,i){var s=n,o=t.node(r);return e[r]=!0,t.neighbors(r).forEach(function(a){e.hasOwnProperty(a)||(n=L8(t,e,n,a,r))}),o.low=s,o.lim=n++,i?o.parent=i:delete o.parent,n}function D8(t){return t.edges().find(e=>t.edge(e).cutvalue<0)}function F8(t,e,n){var r=n.v,i=n.w;e.hasEdge(r,i)||(r=n.w,i=n.v);var s=t.node(r),o=t.node(i),a=s,l=!1;s.lim>o.lim&&(a=o,l=!0);var u=e.edges().filter(function(c){return l===q$(t,t.node(c.v),a)&&l!==q$(t,t.node(c.w),a)});return u.reduce((c,f)=>U$(e,f)<U$(e,c)?f:c)}function V8(t,e,n,r){var i=n.v,s=n.w;t.removeEdge(i,s),t.setEdge(r.v,r.w,{}),lO(t),aO(t,e),Gme(t,e)}function Gme(t,e){var n=t.nodes().find(i=>!e.node(i).parent),r=zme(t,n);r=r.slice(1),r.forEach(function(i){var s=t.node(i).parent,o=e.edge(i,s),a=!1;o||(o=e.edge(s,i),a=!0),e.node(i).rank=e.node(s).rank+(a?o.minlen:-o.minlen)})}function Kme(t,e,n){return t.hasEdge(e,n)}function q$(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}var Yme=Ow,B8=Yme.longestPath,Jme=$8,Xme=qme,Zme=Qme;function Qme(t){switch(t.graph().ranker){case"network-simplex":W$(t);break;case"tight-tree":tve(t);break;case"longest-path":eve(t);break;default:W$(t)}}var eve=B8;function tve(t){B8(t),Jme(t)}function W$(t){Xme(t)}var nve=rve;function rve(t){var e=sve(t);t.graph().dummyChains.forEach(function(n){for(var r=t.node(n),i=r.edgeObj,s=ive(t,e,i.v,i.w),o=s.path,a=s.lca,l=0,u=o[l],c=!0;n!==i.w;){if(r=t.node(n),c){for(;(u=o[l])!==a&&t.node(u).maxRank<r.rank;)l++;u===a&&(c=!1)}if(!c){for(;l<o.length-1&&t.node(u=o[l+1]).minRank<=r.rank;)l++;u=o[l]}t.setParent(n,u),n=t.successors(n)[0]}})}function ive(t,e,n,r){var i=[],s=[],o=Math.min(e[n].low,e[r].low),a=Math.max(e[n].lim,e[r].lim),l,u;l=n;do l=t.parent(l),i.push(l);while(l&&(e[l].low>o||a>e[l].lim));for(u=l,l=r;(l=t.parent(l))!==u;)s.push(l);return{path:i.concat(s.reverse()),lca:u}}function sve(t){var e={},n=0;function r(i){var s=n;t.children(i).forEach(r),e[i]={low:s,lim:n++}}return t.children().forEach(r),e}var bA=ci,ove={run:ave,cleanup:cve};function ave(t){var e=bA.addDummyNode(t,"root",{},"_root"),n=lve(t),r=Math.max(...Object.values(n))-1,i=2*r+1;t.graph().nestingRoot=e,t.edges().forEach(o=>t.edge(o).minlen*=i);var s=uve(t)+1;t.children().forEach(function(o){j8(t,e,i,s,r,n,o)}),t.graph().nodeRankFactor=i}function j8(t,e,n,r,i,s,o){var a=t.children(o);if(!a.length){o!==e&&t.setEdge(e,o,{weight:0,minlen:n});return}var l=bA.addBorderNode(t,"_bt"),u=bA.addBorderNode(t,"_bb"),c=t.node(o);t.setParent(l,o),c.borderTop=l,t.setParent(u,o),c.borderBottom=u,a.forEach(function(f){j8(t,e,n,r,i,s,f);var p=t.node(f),v=p.borderTop?p.borderTop:f,b=p.borderBottom?p.borderBottom:f,E=p.borderTop?r:2*r,P=v!==b?1:i-s[o]+1;t.setEdge(l,v,{weight:E,minlen:P,nestingEdge:!0}),t.setEdge(b,u,{weight:E,minlen:P,nestingEdge:!0})}),t.parent(o)||t.setEdge(e,l,{weight:0,minlen:i+s[o]})}function lve(t){var e={};function n(r,i){var s=t.children(r);s&&s.length&&s.forEach(o=>n(o,i+1)),e[r]=i}return t.children().forEach(r=>n(r,1)),e}function uve(t){return t.edges().reduce((e,n)=>e+t.edge(n).weight,0)}function cve(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,t.edges().forEach(n=>{var r=t.edge(n);r.nestingEdge&&t.removeEdge(n)})}var fve=ci,hve=dve;function dve(t){function e(n){var r=t.children(n),i=t.node(n);if(r.length&&r.forEach(e),i.hasOwnProperty("minRank")){i.borderLeft=[],i.borderRight=[];for(var s=i.minRank,o=i.maxRank+1;s<o;++s)G$(t,"borderLeft","_bl",n,i,s),G$(t,"borderRight","_br",n,i,s)}}t.children().forEach(e)}function G$(t,e,n,r,i,s){var o={width:0,height:0,rank:s,borderType:e},a=i[e][s-1],l=fve.addDummyNode(t,"border",o,n);i[e][s]=l,t.setParent(l,r),a&&t.setEdge(a,l,{weight:1})}var pve={adjust:gve,undo:mve};function gve(t){var e=t.graph().rankdir.toLowerCase();(e==="lr"||e==="rl")&&z8(t)}function mve(t){var e=t.graph().rankdir.toLowerCase();(e==="bt"||e==="rl")&&vve(t),(e==="lr"||e==="rl")&&(yve(t),z8(t))}function z8(t){t.nodes().forEach(e=>K$(t.node(e))),t.edges().forEach(e=>K$(t.edge(e)))}function K$(t){var e=t.width;t.width=t.height,t.height=e}function vve(t){t.nodes().forEach(e=>rE(t.node(e))),t.edges().forEach(function(e){var n=t.edge(e);n.points.forEach(rE),n.hasOwnProperty("y")&&rE(n)})}function rE(t){t.y=-t.y}function yve(t){t.nodes().forEach(e=>iE(t.node(e))),t.edges().forEach(function(e){var n=t.edge(e);n.points.forEach(iE),n.hasOwnProperty("x")&&iE(n)})}function iE(t){var e=t.x;t.x=t.y,t.y=e}var bve=ci,wve=xve;function xve(t){var e={},n=t.nodes().filter(a=>!t.children(a).length),r=Math.max(...n.map(a=>t.node(a).rank)),i=bve.range(r+1).map(()=>[]);function s(a){if(!e[a]){e[a]=!0;var l=t.node(a);i[l.rank].push(a),t.successors(a).forEach(s)}}var o=n.sort((a,l)=>t.node(a).rank-t.node(l).rank);return o.forEach(s),i}var Sve=ci.zipObject,Eve=_ve;function _ve(t,e){for(var n=0,r=1;r<e.length;++r)n+=Ave(t,e[r-1],e[r]);return n}function Ave(t,e,n){for(var r=Sve(n,n.map((u,c)=>c)),i=e.flatMap(u=>t.outEdges(u).map(c=>({pos:r[c.w],weight:t.edge(c).weight})).sort((c,f)=>c.pos-f.pos)),s=1;s<n.length;)s<<=1;var o=2*s-1;s-=1;var a=new Array(o).fill(0),l=0;return i.forEach(u=>{var c=u.pos+s;a[c]+=u.weight;for(var f=0;c>0;)c%2&&(f+=a[c+1]),c=c-1>>1,a[c]+=u.weight;l+=u.weight*f}),l}var kve=Cve;function Cve(t,e=[]){return e.map(n=>{var r=t.inEdges(n);if(r.length){var i=r.reduce((s,o)=>{var a=t.edge(o),l=t.node(o.v);return{sum:s.sum+a.weight*l.order,weight:s.weight+a.weight}},{sum:0,weight:0});return{v:n,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:n}})}var Pve=ci,Ove=Tve;function Tve(t,e){var n={};t.forEach((i,s)=>{var o=n[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:s};i.barycenter!==void 0&&(o.barycenter=i.barycenter,o.weight=i.weight)}),e.edges().forEach(i=>{var s=n[i.v],o=n[i.w];s!==void 0&&o!==void 0&&(o.indegree++,s.out.push(n[i.w]))});var r=Object.values(n).filter(i=>!i.indegree);return Mve(r)}function Mve(t){var e=[];function n(s){return function(o){o.merged||(o.barycenter===void 0||s.barycenter===void 0||o.barycenter>=s.barycenter)&&Nve(s,o)}}function r(s){return function(o){o.in.push(s),--o.indegree===0&&t.push(o)}}for(;t.length;){var i=t.pop();e.push(i),i.in.reverse().forEach(n(i)),i.out.forEach(r(i))}return e.filter(s=>!s.merged).map(s=>Pve.pick(s,["vs","i","barycenter","weight"]))}function Nve(t,e){var n=0,r=0;t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.vs=e.vs.concat(t.vs),t.barycenter=n/r,t.weight=r,t.i=Math.min(e.i,t.i),e.merged=!0}var Ive=ci,$ve=Rve;function Rve(t,e){var n=Ive.partition(t,function(c){return c.hasOwnProperty("barycenter")}),r=n.lhs,i=n.rhs.sort((c,f)=>f.i-c.i),s=[],o=0,a=0,l=0;r.sort(Lve(!!e)),l=Y$(s,i,l),r.forEach(function(c){l+=c.vs.length,s.push(c.vs),o+=c.barycenter*c.weight,a+=c.weight,l=Y$(s,i,l)});var u={vs:s.flat(!0)};return a&&(u.barycenter=o/a,u.weight=a),u}function Y$(t,e,n){for(var r;e.length&&(r=e[e.length-1]).i<=n;)e.pop(),t.push(r.vs),n++;return n}function Lve(t){return function(e,n){return e.barycenter<n.barycenter?-1:e.barycenter>n.barycenter?1:t?n.i-e.i:e.i-n.i}}var Dve=kve,Fve=Ove,Vve=$ve,Bve=H8;function H8(t,e,n,r){var i=t.children(e),s=t.node(e),o=s?s.borderLeft:void 0,a=s?s.borderRight:void 0,l={};o&&(i=i.filter(b=>b!==o&&b!==a));var u=Dve(t,i);u.forEach(function(b){if(t.children(b.v).length){var E=H8(t,b.v,n,r);l[b.v]=E,E.hasOwnProperty("barycenter")&&zve(b,E)}});var c=Fve(u,n);jve(c,l);var f=Vve(c,r);if(o&&(f.vs=[o,f.vs,a].flat(!0),t.predecessors(o).length)){var p=t.node(t.predecessors(o)[0]),v=t.node(t.predecessors(a)[0]);f.hasOwnProperty("barycenter")||(f.barycenter=0,f.weight=0),f.barycenter=(f.barycenter*f.weight+p.order+v.order)/(f.weight+2),f.weight+=2}return f}function jve(t,e){t.forEach(function(n){n.vs=n.vs.flatMap(function(r){return e[r]?e[r].vs:r})})}function zve(t,e){t.barycenter!==void 0?(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight):(t.barycenter=e.barycenter,t.weight=e.weight)}var Hve=bo.Graph,Uve=ci,qve=Wve;function Wve(t,e,n){var r=Gve(t),i=new Hve({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(s){return t.node(s)});return t.nodes().forEach(function(s){var o=t.node(s),a=t.parent(s);(o.rank===e||o.minRank<=e&&e<=o.maxRank)&&(i.setNode(s),i.setParent(s,a||r),t[n](s).forEach(function(l){var u=l.v===s?l.w:l.v,c=i.edge(u,s),f=c!==void 0?c.weight:0;i.setEdge(u,s,{weight:t.edge(l).weight+f})}),o.hasOwnProperty("minRank")&&i.setNode(s,{borderLeft:o.borderLeft[e],borderRight:o.borderRight[e]}))}),i}function Gve(t){for(var e;t.hasNode(e=Uve.uniqueId("_root")););return e}var Kve=Yve;function Yve(t,e,n){var r={},i;n.forEach(function(s){for(var o=t.parent(s),a,l;o;){if(a=t.parent(o),a?(l=r[a],r[a]=o):(l=i,i=o),l&&l!==o){e.setEdge(l,o);return}o=a}})}var Jve=wve,Xve=Eve,Zve=Bve,Qve=qve,e0e=Kve,t0e=bo.Graph,py=ci,n0e=r0e;function r0e(t){var e=py.maxRank(t),n=J$(t,py.range(1,e+1),"inEdges"),r=J$(t,py.range(e-1,-1,-1),"outEdges"),i=Jve(t);X$(t,i);for(var s=Number.POSITIVE_INFINITY,o,a=0,l=0;l<4;++a,++l){i0e(a%2?n:r,a%4>=2),i=py.buildLayerMatrix(t);var u=Xve(t,i);u<s&&(l=0,o=Object.assign({},i),s=u)}X$(t,o)}function J$(t,e,n){return e.map(function(r){return Qve(t,r,n)})}function i0e(t,e){var n=new t0e;t.forEach(function(r){var i=r.graph().root,s=Zve(r,i,n,e);s.vs.forEach((o,a)=>r.node(o).order=a),e0e(r,n,s.vs)})}function X$(t,e){Object.values(e).forEach(n=>n.forEach((r,i)=>t.node(r).order=i))}var s0e=bo.Graph,mm=ci,o0e={positionX:u0e,findType1Conflicts:U8,findType2Conflicts:q8,addConflict:uO,hasConflict:W8,verticalAlignment:G8,horizontalCompaction:K8,alignCoordinates:J8,findSmallestWidthAlignment:Y8,balance:X8};function U8(t,e){var n={};function r(i,s){var o=0,a=0,l=i.length,u=s[s.length-1];return s.forEach(function(c,f){var p=a0e(t,c),v=p?t.node(p).order:l;(p||c===u)&&(s.slice(a,f+1).forEach(function(b){t.predecessors(b).forEach(function(E){var P=t.node(E),S=P.order;(S<o||v<S)&&!(P.dummy&&t.node(b).dummy)&&uO(n,E,b)})}),a=f+1,o=v)}),s}return e.reduce(r),n}function q8(t,e){var n={};function r(s,o,a,l,u){var c;mm.range(o,a).forEach(function(f){c=s[f],t.node(c).dummy&&t.predecessors(c).forEach(function(p){var v=t.node(p);v.dummy&&(v.order<l||v.order>u)&&uO(n,p,c)})})}function i(s,o){var a=-1,l,u=0;return o.forEach(function(c,f){if(t.node(c).dummy==="border"){var p=t.predecessors(c);p.length&&(l=t.node(p[0]).order,r(o,u,f,a,l),u=f,a=l)}r(o,u,o.length,l,s.length)}),o}return e.reduce(i),n}function a0e(t,e){if(t.node(e).dummy)return t.predecessors(e).find(n=>t.node(n).dummy)}function uO(t,e,n){if(e>n){var r=e;e=n,n=r}var i=t[e];i||(t[e]=i={}),i[n]=!0}function W8(t,e,n){if(e>n){var r=e;e=n,n=r}return!!t[e]&&t[e].hasOwnProperty(n)}function G8(t,e,n,r){var i={},s={},o={};return e.forEach(function(a){a.forEach(function(l,u){i[l]=l,s[l]=l,o[l]=u})}),e.forEach(function(a){var l=-1;a.forEach(function(u){var c=r(u);if(c.length){c=c.sort((E,P)=>o[E]-o[P]);for(var f=(c.length-1)/2,p=Math.floor(f),v=Math.ceil(f);p<=v;++p){var b=c[p];s[u]===u&&l<o[b]&&!W8(n,u,b)&&(s[b]=u,s[u]=i[u]=i[b],l=o[b])}}})}),{root:i,align:s}}function K8(t,e,n,r,i){var s={},o=l0e(t,e,n,i),a=i?"borderLeft":"borderRight";function l(f,p){for(var v=o.nodes(),b=v.pop(),E={};b;)E[b]?f(b):(E[b]=!0,v.push(b),v=v.concat(p(b))),b=v.pop()}function u(f){s[f]=o.inEdges(f).reduce(function(p,v){return Math.max(p,s[v.v]+o.edge(v))},0)}function c(f){var p=o.outEdges(f).reduce(function(b,E){return Math.min(b,s[E.w]-o.edge(E))},Number.POSITIVE_INFINITY),v=t.node(f);p!==Number.POSITIVE_INFINITY&&v.borderType!==a&&(s[f]=Math.max(s[f],p))}return l(u,o.predecessors.bind(o)),l(c,o.successors.bind(o)),Object.keys(r).forEach(f=>s[f]=s[n[f]]),s}function l0e(t,e,n,r){var i=new s0e,s=t.graph(),o=c0e(s.nodesep,s.edgesep,r);return e.forEach(function(a){var l;a.forEach(function(u){var c=n[u];if(i.setNode(c),l){var f=n[l],p=i.edge(f,c);i.setEdge(f,c,Math.max(o(t,u,l),p||0))}l=u})}),i}function Y8(t,e){return Object.values(e).reduce((n,r)=>{var i=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;Object.entries(r).forEach(([a,l])=>{var u=f0e(t,a)/2;i=Math.max(l+u,i),s=Math.min(l-u,s)});const o=i-s;return o<n[0]&&(n=[o,r]),n},[Number.POSITIVE_INFINITY,null])[1]}function J8(t,e){var n=Object.values(e),r=Math.min(...n),i=Math.max(...n);["u","d"].forEach(function(s){["l","r"].forEach(function(o){var a=s+o,l=t[a];if(l===e)return;var u=Object.values(l);let c=r-Math.min(...u);o!=="l"&&(c=i-Math.max(...u)),c&&(t[a]=mm.mapValues(l,f=>f+c))})})}function X8(t,e){return mm.mapValues(t.ul,function(n,r){if(e)return t[e.toLowerCase()][r];var i=Object.values(t).map(s=>s[r]).sort((s,o)=>s-o);return(i[1]+i[2])/2})}function u0e(t){var e=mm.buildLayerMatrix(t),n=Object.assign(U8(t,e),q8(t,e)),r={},i;["u","d"].forEach(function(o){i=o==="u"?e:Object.values(e).reverse(),["l","r"].forEach(function(a){a==="r"&&(i=i.map(f=>Object.values(f).reverse()));var l=(o==="u"?t.predecessors:t.successors).bind(t),u=G8(t,i,n,l),c=K8(t,i,u.root,u.align,a==="r");a==="r"&&(c=mm.mapValues(c,f=>-f)),r[o+a]=c})});var s=Y8(t,r);return J8(r,s),X8(r,t.graph().align)}function c0e(t,e,n){return function(r,i,s){var o=r.node(i),a=r.node(s),l=0,u;if(l+=o.width/2,o.hasOwnProperty("labelpos"))switch(o.labelpos.toLowerCase()){case"l":u=-o.width/2;break;case"r":u=o.width/2;break}if(u&&(l+=n?u:-u),u=0,l+=(o.dummy?e:t)/2,l+=(a.dummy?e:t)/2,l+=a.width/2,a.hasOwnProperty("labelpos"))switch(a.labelpos.toLowerCase()){case"l":u=a.width/2;break;case"r":u=-a.width/2;break}return u&&(l+=n?u:-u),u=0,l}}function f0e(t,e){return t.node(e).width}var Z8=ci,h0e=o0e.positionX,d0e=p0e;function p0e(t){t=Z8.asNonCompoundGraph(t),g0e(t),Object.entries(h0e(t)).forEach(([e,n])=>t.node(e).x=n)}function g0e(t){var e=Z8.buildLayerMatrix(t),n=t.graph().ranksep,r=0;e.forEach(function(i){const s=i.reduce((o,a)=>{const l=t.node(a).height;return o>l?o:l},0);i.forEach(o=>t.node(o).y=r+s/2),r+=s+n})}var Z$=_me,Q$=Ome,m0e=Zme,v0e=ci.normalizeRanks,y0e=nve,b0e=ci.removeEmptyRanks,eR=ove,w0e=hve,tR=pve,x0e=n0e,S0e=d0e,Ko=ci,E0e=bo.Graph,_0e=A0e;function A0e(t,e){var n=e&&e.debugTiming?Ko.time:Ko.notime;n("layout",function(){var r=n("  buildLayoutGraph",function(){return R0e(t)});n("  runLayout",function(){k0e(r,n)}),n("  updateInputGraph",function(){C0e(t,r)})})}function k0e(t,e){e("    makeSpaceForEdgeLabels",function(){L0e(t)}),e("    removeSelfEdges",function(){q0e(t)}),e("    acyclic",function(){Z$.run(t)}),e("    nestingGraph.run",function(){eR.run(t)}),e("    rank",function(){m0e(Ko.asNonCompoundGraph(t))}),e("    injectEdgeLabelProxies",function(){D0e(t)}),e("    removeEmptyRanks",function(){b0e(t)}),e("    nestingGraph.cleanup",function(){eR.cleanup(t)}),e("    normalizeRanks",function(){v0e(t)}),e("    assignRankMinMax",function(){F0e(t)}),e("    removeEdgeLabelProxies",function(){V0e(t)}),e("    normalize.run",function(){Q$.run(t)}),e("    parentDummyChains",function(){y0e(t)}),e("    addBorderSegments",function(){w0e(t)}),e("    order",function(){x0e(t)}),e("    insertSelfEdges",function(){W0e(t)}),e("    adjustCoordinateSystem",function(){tR.adjust(t)}),e("    position",function(){S0e(t)}),e("    positionSelfEdges",function(){G0e(t)}),e("    removeBorderNodes",function(){U0e(t)}),e("    normalize.undo",function(){Q$.undo(t)}),e("    fixupEdgeLabelCoords",function(){z0e(t)}),e("    undoCoordinateSystem",function(){tR.undo(t)}),e("    translateGraph",function(){B0e(t)}),e("    assignNodeIntersects",function(){j0e(t)}),e("    reversePoints",function(){H0e(t)}),e("    acyclic.undo",function(){Z$.undo(t)})}function C0e(t,e){t.nodes().forEach(n=>{var r=t.node(n),i=e.node(n);r&&(r.x=i.x,r.y=i.y,r.rank=i.rank,e.children(n).length&&(r.width=i.width,r.height=i.height))}),t.edges().forEach(n=>{var r=t.edge(n),i=e.edge(n);r.points=i.points,i.hasOwnProperty("x")&&(r.x=i.x,r.y=i.y)}),t.graph().width=e.graph().width,t.graph().height=e.graph().height}var P0e=["nodesep","edgesep","ranksep","marginx","marginy"],O0e={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},T0e=["acyclicer","ranker","rankdir","align"],M0e=["width","height"],nR={width:0,height:0},N0e=["minlen","weight","width","height","labeloffset"],I0e={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},$0e=["labelpos"];function R0e(t){var e=new E0e({multigraph:!0,compound:!0}),n=oE(t.graph());return e.setGraph(Object.assign({},O0e,sE(n,P0e),Ko.pick(n,T0e))),t.nodes().forEach(r=>{var i=oE(t.node(r));const s=sE(i,M0e);Object.keys(nR).forEach(o=>{s[o]===void 0&&(s[o]=nR[o])}),e.setNode(r,s),e.setParent(r,t.parent(r))}),t.edges().forEach(r=>{var i=oE(t.edge(r));e.setEdge(r,Object.assign({},I0e,sE(i,N0e),Ko.pick(i,$0e)))}),e}function L0e(t){var e=t.graph();e.ranksep/=2,t.edges().forEach(n=>{var r=t.edge(n);r.minlen*=2,r.labelpos.toLowerCase()!=="c"&&(e.rankdir==="TB"||e.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function D0e(t){t.edges().forEach(e=>{var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),i=t.node(e.w),s={rank:(i.rank-r.rank)/2+r.rank,e};Ko.addDummyNode(t,"edge-proxy",s,"_ep")}})}function F0e(t){var e=0;t.nodes().forEach(n=>{var r=t.node(n);r.borderTop&&(r.minRank=t.node(r.borderTop).rank,r.maxRank=t.node(r.borderBottom).rank,e=Math.max(e,r.maxRank))}),t.graph().maxRank=e}function V0e(t){t.nodes().forEach(e=>{var n=t.node(e);n.dummy==="edge-proxy"&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))})}function B0e(t){var e=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,i=0,s=t.graph(),o=s.marginx||0,a=s.marginy||0;function l(u){var c=u.x,f=u.y,p=u.width,v=u.height;e=Math.min(e,c-p/2),n=Math.max(n,c+p/2),r=Math.min(r,f-v/2),i=Math.max(i,f+v/2)}t.nodes().forEach(u=>l(t.node(u))),t.edges().forEach(u=>{var c=t.edge(u);c.hasOwnProperty("x")&&l(c)}),e-=o,r-=a,t.nodes().forEach(u=>{var c=t.node(u);c.x-=e,c.y-=r}),t.edges().forEach(u=>{var c=t.edge(u);c.points.forEach(f=>{f.x-=e,f.y-=r}),c.hasOwnProperty("x")&&(c.x-=e),c.hasOwnProperty("y")&&(c.y-=r)}),s.width=n-e+o,s.height=i-r+a}function j0e(t){t.edges().forEach(e=>{var n=t.edge(e),r=t.node(e.v),i=t.node(e.w),s,o;n.points?(s=n.points[0],o=n.points[n.points.length-1]):(n.points=[],s=i,o=r),n.points.unshift(Ko.intersectRect(r,s)),n.points.push(Ko.intersectRect(i,o))})}function z0e(t){t.edges().forEach(e=>{var n=t.edge(e);if(n.hasOwnProperty("x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function H0e(t){t.edges().forEach(e=>{var n=t.edge(e);n.reversed&&n.points.reverse()})}function U0e(t){t.nodes().forEach(e=>{if(t.children(e).length){var n=t.node(e),r=t.node(n.borderTop),i=t.node(n.borderBottom),s=t.node(n.borderLeft[n.borderLeft.length-1]),o=t.node(n.borderRight[n.borderRight.length-1]);n.width=Math.abs(o.x-s.x),n.height=Math.abs(i.y-r.y),n.x=s.x+n.width/2,n.y=r.y+n.height/2}}),t.nodes().forEach(e=>{t.node(e).dummy==="border"&&t.removeNode(e)})}function q0e(t){t.edges().forEach(e=>{if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e,label:t.edge(e)}),t.removeEdge(e)}})}function W0e(t){var e=Ko.buildLayerMatrix(t);e.forEach(n=>{var r=0;n.forEach((i,s)=>{var o=t.node(i);o.order=s+r,(o.selfEdges||[]).forEach(a=>{Ko.addDummyNode(t,"selfedge",{width:a.label.width,height:a.label.height,rank:o.rank,order:s+ ++r,e:a.e,label:a.label},"_se")}),delete o.selfEdges})})}function G0e(t){t.nodes().forEach(e=>{var n=t.node(e);if(n.dummy==="selfedge"){var r=t.node(n.e.v),i=r.x+r.width/2,s=r.y,o=n.x-i,a=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:i+2*o/3,y:s-a},{x:i+5*o/6,y:s-a},{x:i+o,y:s},{x:i+5*o/6,y:s+a},{x:i+2*o/3,y:s+a}],n.label.x=n.x,n.label.y=n.y}})}function sE(t,e){return Ko.mapValues(Ko.pick(t,e),Number)}function oE(t){var e={};return t&&Object.entries(t).forEach(([n,r])=>{typeof n=="string"&&(n=n.toLowerCase()),e[n]=r}),e}var K0e=ci,Y0e=bo.Graph,J0e={debugOrdering:X0e};function X0e(t){var e=K0e.buildLayerMatrix(t),n=new Y0e({compound:!0,multigraph:!0}).setGraph({});return t.nodes().forEach(function(r){n.setNode(r,{label:r}),n.setParent(r,"layer"+t.node(r).rank)}),t.edges().forEach(function(r){n.setEdge(r.v,r.w,{},r.name)}),e.forEach(function(r,i){var s="layer"+i;n.setNode(s,{rank:"same"}),r.reduce(function(o,a){return n.setEdge(o,a,{style:"invis"}),a})}),n}var Z0e="1.0.2",Q8={graphlib:bo,layout:_0e,debug:J0e,util:{time:ci.time,notime:ci.notime},version:Z0e};const Q0e=ka(Q8),eye=VR({__proto__:null,default:Q0e},[Q8]);let Br,Ar;const tye=fi({data(){return{panX:0,panY:0,clickX:0,clickY:0,isPanning:!1}},computed:{isAddingElements(){return this.uiStateStore.mode===CA||this.uiStateStore.mode===PA},isPannableMode(){return this.uiStateStore.mode===Iu&&!this.isPanning},isPanningMode(){return this.uiStateStore.mode===Iu&&this.isPanning},...Mi(au),...Mi(Yd),...Mi(zC),...Mi(po)},watch:{"uiStateStore.mode"(t){this.onModeChange(t)},"netStore.lastRemovedCells"(t){for(let e=0;e<t.length;e++)Ar.removeCells([Ar.getCell(t[e])])},"netStore.lastUpdatedPlace"(t){const e=Ar.getCell(t.id);e.set("tokens",t.marking.length),e.attr(".label/text",t.name)},"netStore.lastUpdatedTransition.name"(t){console.log("name changed"),console.log(t);const e=Ar.getCell(this.netStore.lastUpdatedTransition.id);e&&e.attr(".label/text",t)},"netStore.lastFiredArcs"(t){for(let n=0;n<t.length;n++){const r=t[n],i=Ar.getCell(r.arcID);Ar.getCell(r.placeID).set("tokens",r.num);var e=De("circle",{r:5,fill:"#feb662"});let o=1;i.findView(Br).sendToken(e,o*1e3)}},"netStore.importedData"(t){Ar.clear();const e=t.netData,n=e.transitions;for(let o=0;o<n.length;o++){const a=n[o];new F$(this.clickX,this.clickY,a.name,a.id).addTo(Ar)}const r=e.places;for(let o=0;o<r.length;o++){const a=r[o],l=new D$(this.clickX,this.clickY,a.name,a.id);l.addTo(Ar),l.set("tokens",a.marking.length)}const i=e.arcs;for(let o=0;o<i.length;o++){const a=i[o],l=new L$(a.from,a.to,a.id,a.type);l.addTo(Ar),l.addVerticesTools(Br)}const s=t.layoutData;for(let o=0;o<s.cells.length;o++){const a=s.cells[o],l=Ar.getCell(a.id);a.type==="pn.Place"||a.type==="pn.Transition"?l.set("position",{x:a.position.x,y:a.position.y}):a.type==="standard.Link"&&l.vertices(a.vertices)}},"netStore.lastCreatedTransitions"(t){for(let e=0;e<t.length;e++){const n=t[e];new F$(this.clickX,this.clickY,n.name,n.id).addTo(Ar)}},"netStore.lastCreatedPlaces"(t){for(let e=0;e<t.length;e++){const n=t[e];new D$(this.clickX,this.clickY,n.name,n.id).addTo(Ar)}},"netStore.lastCreatedArcs"(t){for(let e=0;e<t.length;e++){const n=t[e],r=new L$(n.from,n.to,n.id,n.type);r.addTo(Ar),r.addVerticesTools(Br)}}},mounted(){const t=ege,e=Xpe;Ar=new Hl,Br=new Mpe({el:document.getElementById("jointCanvas"),cellViewNamespace:{pn:t},model:Ar,width:window.innerWidth,height:window.innerHeight,gridSize:12,drawGrid:!0,background:{color:"#f6f6f6"},linkPinning:!1,defaultLink:()=>new e.Link,defaultAnchor:{name:"modelCenter"},defaultConnectionPoint:{name:"boundary"},markAvailable:!0,validateConnection:(r,i,s,o,a,l)=>!(s.model.isLink()||r.model.isLink()||s.model.get("jsonnetsType")===r.model.get("jsonnetsType"))}),this.netStore.setLayout(Ar),Br.on("blank:pointerclick",(r,i,s)=>{this.onPaperClick(i,s)}),Br.on("element:mouseenter",r=>{(this.uiStateStore.mode===Ky||this.uiStateStore.mode===Iu)&&r.showTools()}),Br.on("element:mouseleave",r=>{r.hideTools()}),Br.on("link:mouseenter",r=>{(this.uiStateStore.mode===Ky||this.uiStateStore.mode===Iu)&&r.showTools()}),Br.on("link:mouseleave",r=>{r.hideTools()}),Br.on("blank:pointerdown",(r,i,s)=>{this.onDragStart(i,s)});const n=document.getElementById("jointCanvas");n&&(n.onmousemove=r=>{this.onMouseMove(r)}),Br.on("cell:pointerup blank:pointerup",()=>{this.onDragEnd()}),Br.on("link:connect",r=>{let i=String(r.model.source().id),s=String(r.model.target().id);Ar.removeCells([r.model]),this.netStore.connect(i,s)})},methods:{onModeChange(t){if(Br.removeTools(),t===Ky){const e=Ar.getElements();for(let r=0;r<e.length;r++)e[r].addConnectTools(Br);const n=Ar.getLinks();for(let r=0;r<n.length;r++)n[r].addVerticesTools(Br)}else if(t===Iu){const e=Ar.getElements();for(let r=0;r<e.length;r++)e[r].addInteractionTools(Br);const n=Ar.getLinks();for(let r=0;r<n.length;r++)n[r].addInteractionTools(Br)}else if(t===oz)this.updateGraphLayout(),this.uiStateStore.mode=sz;else if(t===OA){let e=setInterval(()=>{this.uiStateStore.mode!==OA?clearInterval(e):this.netStore.fireAny()},1500)}},onPaperClick(t,e){this.clickX=t,this.clickY=e,this.uiStateStore.mode===CA?this.netStore.addPlace():this.uiStateStore.mode===PA&&this.netStore.addTransition()},updateGraphLayout(){Br.freeze(),gm.layout(Ar,{nodeSep:100,edgeSep:100,rankSep:100,rankDir:"LR",dagre:eye,graphlib:Jge}),Br.translate(100,200),Br.unfreeze()},onDragStart(t,e){var n;this.uiStateStore.mode===Iu&&(this.isPanning=!0,(n=document.getElementById("canvasContainer"))==null||n.classList.add("panning-mode"),this.panX=t,this.panY=e)},onDragEnd(){var t;this.uiStateStore.mode===Iu&&((t=document.getElementById("canvasContainer"))==null||t.classList.remove("panning-mode"),this.isPanning=!1)},onMouseMove(t){this.isPanning&&Br.translate(t.offsetX-this.panX,t.offsetY-this.panY)}}});const wo=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},nye=t=>(Wf("data-v-30318a07"),t=t(),Gf(),t),rye=nye(()=>oe("div",{id:"jointCanvas"},null,-1)),iye=[rye];function sye(t,e,n,r,i,s){return Ze(),rt("div",{id:"canvasContainer",class:xa({"scoped-canvas-add":t.isAddingElements,"scoped-canvas-panning":t.isPanningMode,"scoped-canvas-pannable":t.isPannableMode})},iye,2)}const oye=wo(tye,[["render",sye],["__scopeId","data-v-30318a07"]]),aye="/assets/manual-214c6c59.png",lye=fi({data(){return{image:aye}},computed:{...Mi(au)},methods:{close(){this.uiStateStore.showModal="none"}}}),uye={class:"modal is-active"},cye=oe("div",{class:"modal-background"},null,-1),fye={class:"modal-card jsn-modal-wide"},hye={class:"modal-card-head"},dye=oe("p",{class:"modal-card-title"},"Manual",-1),pye={class:"modal-card-body"},gye={class:"content"},mye=wD("<h2>Get started</h2><p><b>Create a place:</b> Click on the button showing a circle, then click on the canvas to add a new place. </p><p><b>Create a transition:</b> Click on the button showing a square, then click on the canvas to add a new transition. </p><p><b>Create an arc:</b> Click on the button showing an arc. When you now hover over a place or a transition, it will show a small arc icon. Click on the icon and drag a new arc towards another place or transition. </p><p>You can click on the magic wand button to automagically layout the net.</p><h2>Edit</h2><p> Click on the cursor button to go into <b>edit mode</b>. In edit mode, when you hover over places, transitions and arcs, they will show several buttons: </p>",7),vye={class:"columns is-vcentered"},yye={class:"column is-narrow"},bye=["src"],wye=oe("div",{class:"column"},[oe("p",null,[oe("b",null,"Delete element:"),Kr(" Click on the delete button to delete the element.")]),oe("p",null,[oe("b",null,"Edit element:"),Kr(" Click on the edit button to change the name, inscription and content of elements. ")]),oe("p",null,[oe("b",null,"Fire transition:"),Kr(" Transitions additionally show a fire button. Click on it to make the transition fire and consume or create new tokens in the neighbouring places. If the transition is not enabled, you will receive an alert. ")])],-1),xye=oe("h2",null,"Play",-1),Sye=oe("p",null,[Kr(" Click on the play button to go into "),oe("b",null,"play mode"),Kr(". In play mode, one transition after another will fire automatically, until no transition is enabled any more. ")],-1),Eye={class:"modal-card-foot"};function _ye(t,e,n,r,i,s){return Ze(),rt("div",uye,[cye,oe("div",fye,[oe("header",hye,[dye,oe("button",{class:"delete","aria-label":"close",onClick:e[0]||(e[0]=(...o)=>t.close&&t.close(...o))})]),oe("section",pye,[oe("div",gye,[mye,oe("div",vye,[oe("div",yye,[oe("img",{src:t.image,width:"300"},null,8,bye)]),wye]),xye,Sye])]),oe("footer",Eye,[oe("button",{class:"button",onClick:e[1]||(e[1]=(...o)=>t.close&&t.close(...o))},"Close")])])])}const Aye=wo(lye,[["render",_ye]]),gy={log:(...t)=>{}},tr={STRING:"String",NUMBER:"Number",TRUE:"True",FALSE:"False",NULL:"Null",OBJECT:"Object",ARRAY:"Array",PROPERTY:"Property",PROPERTY_NAME:"PropertyName",PROPERTY_COLON:"PropertyColon",JSON_TEXT:"JsonText",INVALID:""},cO=[tr.STRING,tr.NUMBER,tr.TRUE,tr.FALSE,tr.NULL],ej=[tr.OBJECT,tr.ARRAY],rR=(t,e,n=-1)=>Xr(t).resolveInner(e,n),wA=t=>t.replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1"),Uy=(t,e,n=!0)=>{const r=e?t.sliceString(e.from,e.to):"";return n?wA(r):r},tj=t=>{var e,n;return t.name===tr.INVALID&&(((e=t.prevSibling)===null||e===void 0?void 0:e.name)===tr.PROPERTY_NAME||((n=t.prevSibling)===null||n===void 0?void 0:n.name)===tr.PROPERTY_COLON)},qy=t=>cO.includes(t.name)||tj(t),kye=t=>[...cO,...ej].includes(t.name)||tj(t),my=t=>{var e,n;return t.name===tr.PROPERTY_NAME||t.name===tr.INVALID&&(((e=t.prevSibling)===null||e===void 0?void 0:e.name)===tr.PROPERTY||((n=t.prevSibling)===null||n===void 0?void 0:n.name)==="{")},nj=t=>{const e=[];let n=t.firstChild;for(;n;)n&&e.push(n),n=n==null?void 0:n.nextSibling;return e},iR=t=>nj(t).find(e=>qy(e)),Cye=t=>nj(t).filter(e=>cO.includes(e.name)||ej.includes(e.name)),rj=(t,e)=>Cye(t).findIndex(n=>n.from===e.from&&n.to===e.to),Pye={AdditionalItemsError:"Array at `{{pointer}}` may not have an additional item `{{key}}`",AdditionalPropertiesError:"Additional property `{{property}}` on `{{pointer}}` does not match schema `{{schema}}`",AllOfError:"Value `{{value}}` at `{{pointer}}` does not match schema of `{{allOf}}`",AnyOfError:"Value `{{value}}` at `{{pointer}}` does not match any schema of `{{anyOf}}`",ConstError:"Expected value at `{{pointer}}` to be `{{expected}}`, but value given is `{{value}}`",containsAnyError:"The array at `{{pointer}}` must contain at least one item",ContainsArrayError:"The property at `{{pointer}}` must not be an array",ContainsError:"The array at `{{pointer}}` must contain an element that matches `{{schema}}`",EnumError:"Expected given value `{{value}}` in `{{pointer}}` to be one of `{{values}}`",ForbiddenPropertyError:"Property name `{{property}}` at `{{pointer}}` is not allowed",FormatDateError:"Value `{{value}}` at `{{pointer}}` is not a valid date",FormatDateTimeError:"Value `{{value}}` at `{{pointer}}` is not a valid date-time",FormatEmailError:"Value `{{value}}` at `{{pointer}}` is not a valid email",FormatHostnameError:"Value `{{value}}` at `{{pointer}}` is not a valid hostname",FormatIPV4Error:"Value `{{value}}` at `{{pointer}}` is not a valid IPv4 address",FormatIPV4LeadingZeroError:"IPv4 addresses starting with zero are invalid, since they are interpreted as octals",FormatIPV6Error:"Value `{{value}}` at `{{pointer}}` is not a valid IPv6 address",FormatIPV6LeadingZeroError:"IPv6 addresses starting with zero are invalid, since they are interpreted as octals",FormatJsonPointerError:"Value `{{value}}` at `{{pointer}}` is not a valid json-pointer",FormatRegExError:"Value `{{value}}` at `{{pointer}}` is not a valid regular expression",FormatTimeError:"Value `{{value}}` at `{{pointer}}` is not a valid time",FormatURIError:"Value `{{value}}` at `{{pointer}}` is not a valid uri",FormatURIReferenceError:"Value `{{value}}` at `{{pointer}}` is not a valid uri-reference",FormatURITemplateError:"Value `{{value}}` at `{{pointer}}` is not a valid uri-template",FormatURLError:"Value `{{value}}` at `{{pointer}}` is not a valid url",InvalidDataError:"No value may be specified in `{{pointer}}`",InvalidPropertyNameError:"Invalid property name `{{property}}` at `{{pointer}}`",MaximumError:"Value in `{{pointer}}` is `{{length}}`, but should be `{{maximum}}` at maximum",MaxItemsError:"Too many items in `{{pointer}}`, should be `{{maximum}}` at most, but got `{{length}}`",MaxLengthError:"Value `{{pointer}}` should have a maximum length of `{{maxLength}}`, but got `{{length}}`.",MaxPropertiesError:"Too many properties in `{{pointer}}`, should be `{{maximum}}` at most, but got `{{length}}`",MinimumError:"Value in `{{pointer}}` is `{{length}}`, but should be `{{minimum}}` at minimum",MinItemsError:"Too few items in `{{pointer}}`, should be at least `{{minimum}}`, but got `{{length}}`",MinItemsOneError:"At least one item is required in `{{pointer}}`",MinLengthError:"Value `{{pointer}}` should have a minimum length of `{{minLength}}`, but got `{{length}}`.",MinLengthOneError:"A value is required in `{{pointer}}`",MinPropertiesError:"Too few properties in `{{pointer}}`, should be at least `{{minimum}}`, but got `{{length}}`",MissingDependencyError:"The required propery '{{missingProperty}}' in `{{pointer}}` is missing",MissingOneOfPropertyError:"Value at `{{pointer}}` property: `{{property}}`",MultipleOfError:"Expected `{{value}}` in `{{pointer}}` to be multiple of `{{multipleOf}}`",MultipleOneOfError:"Value `{{value}}` should not match multiple schemas in oneOf `{{matches}}`",NoAdditionalPropertiesError:"Additional property `{{property}}` in `{{pointer}}` is not allowed",NotError:"Value `{{value}}` at pointer should not match schema `{{not}}`",OneOfError:"Value `{{value}}` in `{{pointer}}` does not match any given oneof schema",OneOfPropertyError:"Failed finding a matching oneOfProperty schema in `{{pointer}}` where `{{property}}` matches `{{value}}`",PatternError:"Value in `{{pointer}}` should match `{{description}}`, but received `{{received}}`",PatternPropertiesError:"Property `{{key}}` does not match any patterns in `{{pointer}}`. Valid patterns are: {{patterns}}",RequiredPropertyError:"The required property `{{key}}` is missing at `{{pointer}}`",TypeError:"Expected `{{value}}` ({{received}}) in `{{pointer}}` to be of type `{{expected}}`",UndefinedValueError:"Value must not be undefined in `{{pointer}}`",UniqueItemsError:"Items in array must be unique. Value `{{value}}` in `{{pointer}}` is a duplicate of {{duplicatePointer}}.",UnknownPropertyError:"Could not find a valid schema for property `{{pointer}}` within object",ValueNotEmptyError:"A value for `{{property}}` is required at `{{pointer}}`"},Oye=Object.prototype.toString;function nn(t){const e=Oye.call(t).match(/\s([^\]]+)\]/).pop().toLowerCase();return e==="file"?"object":e}const Tye="object",Mye="array";function Nye(t,e={}){return t.replace(/\{\{\w+\}\}/g,n=>{const r=n.replace(/[{}]/g,""),i=e[r],s=nn(i);return s===Tye||s===Mye?JSON.stringify(i):i})}function Iye(t,e,n=t){var r;const i=(r=Pye[t])!==null&&r!==void 0?r:n;return Nye(i,e)}function $ye(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Rye(t,e){return{type:"error",name:t,code:$ye(t),message:Iye(t,e),data:e}}function Ot(t){return Rye.bind(null,t)}function vm(t,e=[]){for(let n=0;n<t.length;n+=1){const r=t[n];Array.isArray(r)?vm(r,e):e.push(r)}return e}const ep={DECLARATOR_ONEOF:"oneOfProperty",GET_TEMPLATE_RECURSION_LIMIT:1,floatingPointPrecision:1e4,propertyBlacklist:["_id"],templateDefaultOptions:{addOptionalProps:!1,removeInvalidData:!1}};function kg(t,e,n){const r={...e};return Object.defineProperty(r,"getOneOfOrigin",{enumerable:!1,value:()=>({index:n,schema:t})}),r}function Ks(t){return(t==null?void 0:t.type)==="error"}function Lye(t){return t instanceof Promise}function n1(t){return Ks(t)||Lye(t)}const{DECLARATOR_ONEOF:fd}=ep;function ij(t,e,n=t.rootSchema,r="#"){if(e!=null&&n[fd]){const o=[],a=n[fd],l=e[n[fd]];if(l===void 0)return t.errors.missingOneOfPropertyError({property:a,pointer:r});for(let u=0;u<n.oneOf.length;u+=1){const c=t.resolveRef(n.oneOf[u]),f=t.step(a,c,e,r);if(Ks(f))return f;let p=vm(t.validate(l,f,r));if(p=p.filter(n1),p.length>0)o.push(...p);else return kg(n,c,u)}return t.errors.oneOfPropertyError({property:a,value:l,pointer:r,errors:o})}const i=[],s=[];for(let o=0;o<n.oneOf.length;o+=1){const a=t.resolveRef(n.oneOf[o]);let l=vm(t.validate(e,a,r));l=l.filter(n1),l.length>0?s.push(...l):i.push({index:o,schema:a})}return i.length===1?kg(n,i[0].schema,i[0].index):i.length>1?t.errors.multipleOneOfError({value:e,pointer:r,matches:i}):t.errors.oneOfError({value:JSON.stringify(e),pointer:r,oneOf:n.oneOf,errors:s})}function Dye(t,e,n,r){if(n==null||e.properties==null)return-1;let i=0;const s=Object.keys(e.properties);for(let o=0;o<s.length;o+=1){const a=s[o];n[a]!=null&&t.isValid(n[a],e.properties[a],r)&&(i+=1)}return i}function Tw(t,e,n=t.rootSchema,r="#"){if(e!=null&&n[fd]){const s=[],o=n[fd],a=e[n[fd]];if(a===void 0)return t.errors.missingOneOfPropertyError({property:o,pointer:r});for(let l=0;l<n.oneOf.length;l+=1){const u=t.resolveRef(n.oneOf[l]),c=t.step(o,u,e,r);if(Ks(c))return c;let f=vm(t.validate(a,c,r));if(f=f.filter(n1),f.length>0)s.push(...f);else return kg(n,u,l)}return t.errors.oneOfPropertyError({property:o,value:a,pointer:r,errors:s})}const i=[];for(let s=0;s<n.oneOf.length;s+=1){const o=t.resolveRef(n.oneOf[s]);t.isValid(e,o,r)&&i.push({schema:o,index:s})}if(i.length===1)return kg(n,i[0].schema,i[0].index);if(nn(e)==="object"){let s,o=-1,a=0;for(let l=0;l<n.oneOf.length;l+=1){const u=t.resolveRef(n.oneOf[l]),c=Dye(t,u,e);a<c&&(a=c,s=n.oneOf[l],o=l)}return s===void 0?t.errors.oneOfError({value:JSON.stringify(e),pointer:r,oneOf:n.oneOf}):kg(n,s,o)}return i.length>1?t.errors.multipleOneOfError({matches:i,data:e,pointer:r}):t.errors.oneOfError({value:JSON.stringify(e),pointer:r,oneOf:n.oneOf})}const Fye=(t,e,n,r)=>{if(Array.isArray(e.oneOf)){const i=t.resolveOneOf(n,e,r);if(Ks(i))return i}};var Vye=function(e){return Bye(e)&&!jye(e)};function Bye(t){return!!t&&typeof t=="object"}function jye(t){var e=Object.prototype.toString.call(t);return e==="[object RegExp]"||e==="[object Date]"||Uye(t)}var zye=typeof Symbol=="function"&&Symbol.for,Hye=zye?Symbol.for("react.element"):60103;function Uye(t){return t.$$typeof===Hye}function qye(t){return Array.isArray(t)?[]:{}}function ym(t,e){return e.clone!==!1&&e.isMergeableObject(t)?Ld(qye(t),t,e):t}function Wye(t,e,n){return t.concat(e).map(function(r){return ym(r,n)})}function Gye(t,e){if(!e.customMerge)return Ld;var n=e.customMerge(t);return typeof n=="function"?n:Ld}function Kye(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return Object.propertyIsEnumerable.call(t,e)}):[]}function sR(t){return Object.keys(t).concat(Kye(t))}function sj(t,e){try{return e in t}catch{return!1}}function Yye(t,e){return sj(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))}function Jye(t,e,n){var r={};return n.isMergeableObject(t)&&sR(t).forEach(function(i){r[i]=ym(t[i],n)}),sR(e).forEach(function(i){Yye(t,i)||(sj(t,i)&&n.isMergeableObject(e[i])?r[i]=Gye(i,n)(t[i],e[i],n):r[i]=ym(e[i],n))}),r}function Ld(t,e,n){n=n||{},n.arrayMerge=n.arrayMerge||Wye,n.isMergeableObject=n.isMergeableObject||Vye,n.cloneUnlessOtherwiseSpecified=ym;var r=Array.isArray(e),i=Array.isArray(t),s=r===i;return s?r?n.arrayMerge(t,e,n):Jye(t,e,n):ym(e,n)}Ld.all=function(e,n){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(r,i){return Ld(r,i,n)},{})};var Xye=Ld,Zye=Xye;const oj=ka(Zye),Qye=(t,e)=>e,fO=(t,e)=>oj(t,e,{arrayMerge:Qye}),ebe=(t,e)=>{const n=t.concat(e);return n.filter((r,i)=>n.indexOf(r)===i)},tbe=(t,e)=>oj(t,e,{arrayMerge:ebe});function Ds(t,e){const n=nn(t),r=nn(e);if(n!==r)return t;const i=tbe(t,e);return t.getOneOfOrigin?Object.defineProperty(i,"getOneOfOrigin",{enumerable:!1,value:t.getOneOfOrigin}):e.getOneOfOrigin&&Object.defineProperty(i,"getOneOfOrigin",{enumerable:!1,value:e.getOneOfOrigin}),i}function Mw(t,...e){const n={};return Object.keys(t).forEach(r=>{e.includes(r)||(n[r]=t[r])}),t.getOneOfOrigin&&Object.defineProperty(n,"getOneOfOrigin",{enumerable:!1,value:t.getOneOfOrigin}),n}var nbe=Function.prototype.toString,aE=Object.create,rbe=Object.prototype.toString,ibe=function(){function t(){this._keys=[],this._values=[]}return t.prototype.has=function(e){return!!~this._keys.indexOf(e)},t.prototype.get=function(e){return this._values[this._keys.indexOf(e)]},t.prototype.set=function(e,n){this._keys.push(e),this._values.push(n)},t}();function sbe(){return new ibe}function obe(){return new WeakMap}var abe=typeof WeakMap<"u"?obe:sbe;function hO(t){if(!t)return aE(null);var e=t.constructor;if(e===Object)return t===Object.prototype?{}:aE(t);if(~nbe.call(e).indexOf("[native code]"))try{return new e}catch{}return aE(t)}function lbe(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}function ube(t){return t.flags}var cbe=/test/g.flags==="g"?ube:lbe;function aj(t){var e=rbe.call(t);return e.substring(8,e.length-1)}function fbe(t){return t[Symbol.toStringTag]||aj(t)}var hbe=typeof Symbol<"u"?fbe:aj,dbe=Object.defineProperty,pbe=Object.getOwnPropertyDescriptor,lj=Object.getOwnPropertyNames,dO=Object.getOwnPropertySymbols,uj=Object.prototype,cj=uj.hasOwnProperty,gbe=uj.propertyIsEnumerable,fj=typeof dO=="function";function mbe(t){return lj(t).concat(dO(t))}var vbe=fj?mbe:lj;function Nw(t,e,n){for(var r=vbe(t),i=0,s=r.length,o=void 0,a=void 0;i<s;++i)if(o=r[i],!(o==="callee"||o==="caller")){if(a=pbe(t,o),!a){e[o]=n.copier(t[o],n);continue}!a.get&&!a.set&&(a.value=n.copier(a.value,n));try{dbe(e,o,a)}catch{e[o]=a.value}}return e}function ybe(t,e){var n=new e.Constructor;e.cache.set(t,n);for(var r=0,i=t.length;r<i;++r)n[r]=e.copier(t[r],e);return n}function bbe(t,e){var n=new e.Constructor;return e.cache.set(t,n),Nw(t,n,e)}function hj(t,e){return t.slice(0)}function wbe(t,e){return t.slice(0,t.size,t.type)}function xbe(t,e){return new e.Constructor(hj(t.buffer))}function Sbe(t,e){return new e.Constructor(t.getTime())}function dj(t,e){var n=new e.Constructor;return e.cache.set(t,n),t.forEach(function(r,i){n.set(i,e.copier(r,e))}),n}function Ebe(t,e){return Nw(t,dj(t,e),e)}function _be(t,e){var n=hO(e.prototype);e.cache.set(t,n);for(var r in t)cj.call(t,r)&&(n[r]=e.copier(t[r],e));return n}function Abe(t,e){var n=hO(e.prototype);e.cache.set(t,n);for(var r in t)cj.call(t,r)&&(n[r]=e.copier(t[r],e));for(var i=dO(t),s=0,o=i.length,a=void 0;s<o;++s)a=i[s],gbe.call(t,a)&&(n[a]=e.copier(t[a],e));return n}var kbe=fj?Abe:_be;function Cbe(t,e){var n=hO(e.prototype);return e.cache.set(t,n),Nw(t,n,e)}function lE(t,e){return new e.Constructor(t.valueOf())}function Pbe(t,e){var n=new e.Constructor(t.source,cbe(t));return n.lastIndex=t.lastIndex,n}function Wy(t,e){return t}function pj(t,e){var n=new e.Constructor;return e.cache.set(t,n),t.forEach(function(r){n.add(e.copier(r,e))}),n}function Obe(t,e){return Nw(t,pj(t,e),e)}var Tbe=Array.isArray,pO=Object.assign,Mbe=Object.getPrototypeOf||function(t){return t.__proto__},gj={array:ybe,arrayBuffer:hj,blob:wbe,dataView:xbe,date:Sbe,error:Wy,map:dj,object:kbe,regExp:Pbe,set:pj},Nbe=pO({},gj,{array:bbe,map:Ebe,object:Cbe,set:Obe});function Ibe(t){return{Arguments:t.object,Array:t.array,ArrayBuffer:t.arrayBuffer,Blob:t.blob,Boolean:lE,DataView:t.dataView,Date:t.date,Error:t.error,Float32Array:t.arrayBuffer,Float64Array:t.arrayBuffer,Int8Array:t.arrayBuffer,Int16Array:t.arrayBuffer,Int32Array:t.arrayBuffer,Map:t.map,Number:lE,Object:t.object,Promise:Wy,RegExp:t.regExp,Set:t.set,String:lE,WeakMap:Wy,WeakSet:Wy,Uint8Array:t.arrayBuffer,Uint8ClampedArray:t.arrayBuffer,Uint16Array:t.arrayBuffer,Uint32Array:t.arrayBuffer,Uint64Array:t.arrayBuffer}}function mj(t){var e=pO({},gj,t),n=Ibe(e),r=n.Array,i=n.Object;function s(o,a){if(a.prototype=a.Constructor=void 0,!o||typeof o!="object")return o;if(a.cache.has(o))return a.cache.get(o);if(a.prototype=Mbe(o),a.Constructor=a.prototype&&a.prototype.constructor,!a.Constructor||a.Constructor===Object)return i(o,a);if(Tbe(o))return r(o,a);var l=n[hbe(o)];return l?l(o,a):typeof o.then=="function"?o:i(o,a)}return function(a){return s(a,{Constructor:void 0,cache:abe(),copier:s,prototype:void 0})}}function $be(t){return mj(pO({},Nbe,t))}$be({});var gO=mj({});function Iw(t,e,n){if(e.if===!1)return e.else;if(e.if&&(e.then||e.else)){const r=t.validate(n,t.resolveRef(e.if));if(r.length===0&&e.then)return t.resolveRef(e.then);if(r.length!==0&&e.else)return t.resolveRef(e.else)}}const Rbe=(t,e,n,r)=>{const i=Iw(t,e,n);if(i)return t.validate(n,i,r)};function Lbe(t,e,n){var r;const i={...(r=t.resolveRef(e))!==null&&r!==void 0?r:{}},s=Iw(t,i,n);return s||Mw(i,"if","then","else")}function vj(t,e,n=t.rootSchema){let r=gO(n);for(let i=0;i<n.allOf.length;i+=1){const s=Lbe(t,n.allOf[i],e);r=Ds(r,s),e=t.getTemplate(e,r)}return delete r.allOf,r}function yj(t,e){const{allOf:n}=e;if(!Array.isArray(n)||n.length===0)return;let r={};return n.forEach(i=>{r=Ds(r,t.resolveRef(i))}),r}const Dbe=(t,e,n,r)=>{const{allOf:i}=e;if(!Array.isArray(i)||i.length===0)return;const s=[];return e.allOf.forEach(o=>{s.push(...t.validate(n,o,r))}),s};function bj(t,e){return t==null||t.$ref==null?t:t.getRoot?t.getRoot().getRef(t):e.getRef(t)}function Fbe(t,e){if(t==null||t.$ref==null)return t;const n=e.getRef(t),r=Object.assign({},n,t);return delete r.$ref,Object.defineProperty(r,"__ref",{enumerable:!1,value:t.__ref}),Object.defineProperty(r,"getRoot",{enumerable:!1,value:t.getRoot}),r}function Vbe(t){return t.filter((e,n)=>t.indexOf(e)===n)}function Af(t){return nn(t)==="object"}function wj(t,e,n){const{dependencies:r}=e;if(!Af(r)||!Af(n))return;let i=!1,s={required:[]};if(Object.keys(r).forEach(o=>{var a,l;if(n[o]==null&&!(!((a=e.required)===null||a===void 0)&&a.includes(o)||!((l=s.required)===null||l===void 0)&&l.includes(o)))return;const u=r[o];if(Array.isArray(u)){i=!0,s.required.push(...u);return}if(Af(u)){i=!0,s=Ds(s,t.resolveRef(u));return}}),i)return s.required=Vbe(s.required),s}const Bbe=(t,e,n,r)=>{if(nn(e.dependencies)!=="object")return;const i=[];return Object.keys(n).forEach(s=>{if(e.dependencies[s]===void 0||e.dependencies[s]===!0)return;if(e.dependencies[s]===!1){i.push(t.errors.missingDependencyError({pointer:r}));return}let o;const a=nn(e.dependencies[s]);if(a==="array")o=e.dependencies[s].filter(l=>n[l]===void 0).map(l=>t.errors.missingDependencyError({missingProperty:l,pointer:r}));else if(a==="object")o=t.validate(n,e.dependencies[s],r);else throw new Error(`Invalid dependency definition for ${r}/${s}. Must be string[] or schema`);i.push(...o)}),i.length>0?i:void 0},kn={additionalItemsError:Ot("AdditionalItemsError"),additionalPropertiesError:Ot("AdditionalPropertiesError"),anyOfError:Ot("AnyOfError"),allOfError:Ot("AllOfError"),constError:Ot("ConstError"),containsError:Ot("ContainsError"),containsArrayError:Ot("ContainsArrayError"),containsAnyError:Ot("ContainsAnyError"),enumError:Ot("EnumError"),forbiddenPropertyError:Ot("ForbiddenPropertyError"),formatURLError:Ot("FormatURLError"),formatURIError:Ot("FormatURIError"),formatURIReferenceError:Ot("FormatURIReferenceError"),formatURITemplateError:Ot("FormatURITemplateError"),formatDateError:Ot("FormatDateaError"),formatDateTimeError:Ot("FormatDateTimeError"),formatEmailError:Ot("FormatEmailError"),formatHostnameError:Ot("FormatHostnameError"),formatIPV4Error:Ot("FormatIPV4Error"),formatIPV4LeadingZeroError:Ot("FormatIPV4LeadingZeroError"),formatIPV6Error:Ot("FormatIPV6Error"),formatIPV6LeadingZeroError:Ot("FormatIPV6LeadingZeroError"),formatJsonPointerError:Ot("FormatJsonPointerError"),formatRegExError:Ot("FormatRegExError"),formatTimeError:Ot("FormatTimeError"),invalidSchemaError:Ot("InvalidSchemaError"),invalidDataError:Ot("InvalidDataError"),invalidTypeError:Ot("InvalidTypeError"),invalidPropertyNameError:Ot("InvalidPropertyNameError"),maximumError:Ot("MaximumError"),maxItemsError:Ot("MaxItemsError"),maxLengthError:Ot("MaxLengthError"),maxPropertiesError:Ot("MaxPropertiesError"),minimumError:Ot("MinimumError"),minItemsError:Ot("MinItemsError"),minItemsOneError:Ot("MinItemsOneError"),minLengthError:Ot("MinLengthError"),minLengthOneError:Ot("MinLengthOneError"),minPropertiesError:Ot("MinPropertiesError"),missingDependencyError:Ot("MissingDependencyError"),missingOneOfPropertyError:Ot("MissingOneOfPropertyError"),multipleOfError:Ot("MultipleOfError"),multipleOneOfError:Ot("MultipleOneOfError"),noAdditionalPropertiesError:Ot("NoAdditionalPropertiesError"),notError:Ot("NotError"),oneOfError:Ot("OneOfError"),oneOfPropertyError:Ot("OneOfPropertyError"),patternError:Ot("PatternError"),patternPropertiesError:Ot("PatternPropertiesError"),requiredPropertyError:Ot("RequiredPropertyError"),typeError:Ot("TypeError"),undefinedValueError:Ot("UndefinedValueError"),uniqueItemsError:Ot("UniqueItemsError"),unknownPropertyError:Ot("UnknownPropertyError"),valueNotEmptyError:Ot("ValueNotEmptyError")};function xj(t,e,n){if(!Array.isArray(e.anyOf)||e.anyOf.length===0)return;let r;return e.anyOf.forEach(i=>{i=t.resolveRef(i),t.isValid(n,i)&&(r=r?Ds(r,i):i)}),r}function Sj(t,e,n=t.rootSchema,r="#"){const{anyOf:i}=n;if(!Array.isArray(i)||i.length===0)return n;const s=xj(t,n,e);if(s==null)return kn.anyOfError({value:e,pointer:r,anyOf:JSON.stringify(i)});const o=Ds(n,s);return Mw(o,"anyOf")}const jbe=(t,e,n,r)=>{if(!(!Array.isArray(e.anyOf)||e.anyOf.length===0)){for(let i=0;i<e.anyOf.length;i+=1)if(t.isValid(n,e.anyOf[i]))return;return t.errors.anyOfError({anyOf:e.anyOf,value:n,pointer:r})}},zbe=["allOf","anyOf","oneOf","dependencies","if","then","else"];function Ej(t,e,n){let r;if(e=t.resolveRef(e),e.oneOf){const u=Tw(t,n,e);u&&u.type!=="error"&&(r=Ds(r??{},u))}const i=yj(t,e);i&&(r=Ds(r??{},i));const s=xj(t,e,n);s&&(r=Ds(r??{},s));const o=wj(t,e,n);o&&(r=Ds(r??{},o));const a=Iw(t,e,n);if(a&&(r=Ds(r??{},a)),r==null)return;const l=Ej(t,r,n);return l&&(r=Ds(r,l)),Mw(r,...zbe)}const Hbe=["allOf","anyOf","oneOf","dependencies","if","then","else"];function r1(t,e,n){let r=Ej(t,e,n);return r?(r=Ds(e,r),Mw(r,...Hbe)):e}class _j{constructor(e,n){this.remotes={},this.errors={},this.typeKeywords={},this.validateKeyword={},this.validateType={},this.validateFormat={},this.config=e,this.typeKeywords=gO(e.typeKeywords),this.validateKeyword=Object.assign({},e.validateKeyword),this.validateType=Object.assign({},e.validateType),this.validateFormat=Object.assign({},e.validateFormat),this.errors=Object.assign({},e.errors),this.setSchema(n)}get rootSchema(){return this.__rootSchema}set rootSchema(e){e!=null&&(this.__rootSchema=this.config.compileSchema(this,e))}addRemoteSchema(e,n){this.config.addRemoteSchema(this,e,n)}compileSchema(e){var n;return this.config.compileSchema(this,e,(n=this.rootSchema)!==null&&n!==void 0?n:e)}createSchemaOf(e){return this.config.createSchemaOf(e)}each(e,n,r,i){return this.config.each(this,e,n,r,i)}eachSchema(e,n=this.rootSchema){return this.config.eachSchema(n,e)}getChildSchemaSelection(e,n){return this.config.getChildSchemaSelection(this,e,n)}getSchema(e="#",n,r){return this.config.getSchema(this,e,n,r)}getTemplate(e,n,r=this.config.templateDefaultOptions){return this.config.getTemplate(this,e,n,r)}isValid(e,n,r){return this.config.isValid(this,e,n,r)}resolveAnyOf(e,n,r){return this.config.resolveAnyOf(this,e,n,r)}resolveAllOf(e,n){return this.config.resolveAllOf(this,e,n)}resolveRef(e){return this.config.resolveRef(e,this.rootSchema)}resolveOneOf(e,n,r){return this.config.resolveOneOf(this,e,n,r)}setSchema(e){this.rootSchema=e}step(e,n,r,i){return this.config.step(this,e,n,r,i)}validate(e,n,r){return this.config.validate(this,e,n,r)}}function Aj(t,e,n){n.id=n.id||e,t.remotes[e]=t.compileSchema(n)}var kj={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(typeof self<"u"?self:si,()=>(()=>{var n={d:(G,Z)=>{for(var de in Z)n.o(Z,de)&&!n.o(G,de)&&Object.defineProperty(G,de,{enumerable:!0,get:Z[de]})},o:(G,Z)=>Object.prototype.hasOwnProperty.call(G,Z),r:G=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(G,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(G,"__esModule",{value:!0})}},r={};function i(G){return G==="#"||G===""||Array.isArray(G)&&G.length===0||!1}n.r(r),n.d(r,{default:()=>W,get:()=>p,isRoot:()=>i,join:()=>q,remove:()=>x,removeUndefinedItems:()=>N,set:()=>S,split:()=>f,splitLast:()=>R});const s=/~1/g,o=/~0/g,a=/\/+/g,l=/(^[#/]*|\/+$)/g;function u(G){return G.replace(s,"/").replace(o,"~")}function c(G){return u(decodeURIComponent(G))}function f(G){if(G==null||typeof G!="string"||i(G))return Array.isArray(G)?G:[];const Z=G.indexOf("#")>=0?c:u,de=(G=(G=G.replace(a,"/")).replace(l,"")).split("/");for(let be=0,_e=de.length;be<_e;be+=1)de[be]=Z(de[be]);return de}function p(G,Z,de=void 0){if(Z==null||G==null)return de;if(i(Z))return G;const be=v(G,f(Z));return be===void 0?de:be}function v(G,Z){const de=Z.shift();if(G!==void 0)return de!==void 0?v(G[de],Z):G}const b=/^\[.*\]$/,E=/^\[(.+)\]$/;function P(G,Z){return G==="__proto__"||G=="constructor"&&Z.length>0&&Z[0]=="prototype"}function S(G,Z,de){if(Z==null)return G;const be=f(Z);if(be.length===0)return G;G==null&&(G=b.test(be[0])?[]:{});let _e,Te,Le=G;for(;be.length>1;)_e=be.shift(),Te=b.test(be[0]),P(_e,be)||(Le=I(Le,_e,Te));return _e=be.pop(),A(Le,_e,de),G}function A(G,Z,de){let be;const _e=Z.match(E);Z==="[]"&&Array.isArray(G)?G.push(de):_e?(be=_e.pop(),G[be]=de):G[Z]=de}function I(G,Z,de){if(G[Z]!=null)return G[Z];const be=de?[]:{};return A(G,Z,be),be}function N(G){let Z=0,de=0;for(;Z+de<G.length;)G[Z+de]===void 0&&(de+=1),G[Z]=G[Z+de],Z+=1;return G.length=G.length-de,G}function x(G,Z,de){const be=f(Z),_e=be.pop(),Te=p(G,be);return Te&&delete Te[_e],Array.isArray(Te)&&de!==!0&&N(Te),G}const g=/\/+/g,_=/~/g,M=/\//g;function D(G,Z){if(G.length===0)return Z?"#":"";for(let de=0,be=G.length;de<be;de+=1)G[de]=G[de].replace(_,"~0").replace(M,"~1"),Z&&(G[de]=encodeURIComponent(G[de]));return((Z?"#/":"/")+G.join("/")).replace(g,"/")}function q(G,...Z){const de=[];if(Array.isArray(G))return D(G,arguments[1]===!0);const be=arguments[arguments.length-1],_e=typeof be=="boolean"?be:G&&G[0]==="#";for(let Le=0,Ee=arguments.length;Le<Ee;Le+=1)de.push.apply(de,f(arguments[Le]));const Te=[];for(let Le=0,Ee=de.length;Le<Ee;Le+=1)if(de[Le]===".."){if(Te.length===0)return _e?"#":"";Te.pop()}else Te.push(de[Le]);return D(Te,_e)}function R(G){const Z=f(G);if(Z.length===0)return typeof G=="string"&&G[0]==="#"?["#",Z[0]]:["",void 0];if(Z.length===1)return G[0]==="#"?["#",Z[0]]:["",Z[0]];const de=Z.pop();return[q(Z,G[0]==="#"),de]}const W={get:p,set:S,remove:x,join:q,split:f,splitLast:R,isRoot:i,removeUndefinedItems:N};return r})())})(kj);var pf=kj.exports;const Dd=ka(pf);var Cj={},fo={},$w={};Object.defineProperty($w,"__esModule",{value:!0});$w.TokenError=void 0;class Ube extends Error{constructor(e,n){if(super(e),this.message=e,this.token=n,n&&n.errors)n.errors.push(this);else throw this}inspect(){return"SyntaxError: "+this.message}}$w.TokenError=Ube;Object.defineProperty(fo,"__esModule",{value:!0});fo.Parser=fo.findRuleByName=fo.parseRuleName=fo.escapeRegExp=fo.readToken=void 0;const oR=/^[A-Z0-9_]+$/,aR=/(\?|\+|\*)$/,lR=/^(@|&|!)/,vy="WS",yy=$w;function xA(t,e){let n=e.exec(t);return n&&n.index==0?n[0].length==0&&e.source.length>0?null:{type:null,text:n[0],rest:t.substr(n[0].length),start:0,end:n[0].length-1,fullText:n[0],errors:[],children:[],parent:null}:null}fo.readToken=xA;function Pj(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}fo.escapeRegExp=Pj;function Oj(t){t.rest="",t.children&&t.children.forEach(e=>Oj(e))}function Tj(t,e){t.start+=e,t.end+=e,t.children&&t.children.forEach(n=>Tj(n,t.start))}function Mj(t,e){e.errors&&e.errors.length&&e.errors.forEach(n=>t.push(n)),e.children&&e.children.forEach(n=>Mj(t,n))}function rf(t){let e=aR.exec(t),n=lR.exec(t),r=e&&e[0]||"",i=n&&n[0]||"",s={raw:t,name:t.replace(aR,"").replace(lR,""),isOptional:r=="?"||r=="*",allowRepetition:r=="+"||r=="*",atLeastOne:r=="+",lookupPositive:i=="&",lookupNegative:i=="!",pinned:i=="@",lookup:!1,isLiteral:!1};return s.isLiteral=s.name[0]=="'"||s.name[0]=='"',s.lookup=s.lookupNegative||s.lookupPositive,s}fo.parseRuleName=rf;function Nj(t,e){let n=rf(t);return e.cachedRules[n.name]||null}fo.findRuleByName=Nj;function SA(t,e){if(t.children){let n=t.children.filter(r=>r.type&&e.test(r.type));for(let r=0;r<n.length;r++){let i=t.children.indexOf(n[r]);i!=-1&&t.children.splice(i,1)}t.children.forEach(r=>SA(r,e))}}const qbe=["EOF"];class Ij{constructor(e,n){this.grammarRules=e,this.options=n,this.cachedRules={},this.debug=n?n.debug===!0:!1;let r=[],i=[];if(e.forEach(s=>{let o=rf(s.name);if(o.name in this.cachedRules){r.push("Duplicated rule "+o.name);return}else this.cachedRules[o.name]=s;if(!s.bnf||!s.bnf.length){let a="Missing rule content, rule: "+s.name;r.indexOf(a)==-1&&r.push(a)}else s.bnf.forEach(a=>{if(typeof a[0]=="string"&&rf(a[0]).name==s.name){let u="Left recursion is not allowed, rule: "+s.name;r.indexOf(u)==-1&&r.push(u)}a.forEach(l=>{if(typeof l=="string"){let u=rf(l);!u.isLiteral&&i.indexOf(u.name)==-1&&qbe.indexOf(u.name)==-1&&i.push(u.name)}})});vy==s.name&&(s.implicitWs=!1),s.implicitWs&&i.indexOf(vy)==-1&&i.push(vy),s.recover&&i.indexOf(s.recover)==-1&&i.push(s.recover)}),i.forEach(s=>{s in this.cachedRules||r.push("Missing rule "+s)}),r.length)throw new Error(r.join(`
`))}getAST(e,n){n||(n=this.grammarRules.filter(i=>!i.fragment&&i.name.indexOf("%")!=0)[0].name);let r=this.parse(e,n);if(r){Mj(r.errors,r),Tj(r,0),SA(r,/^%/),(!this.options||!this.options.keepUpperRules)&&SA(r,oR);let i=r.rest;i&&new yy.TokenError(`Unexpected end of input: 
`+i,r),Oj(r),r.rest=i}return r}emitSource(){return"CANNOT EMIT SOURCE FROM BASE Parser"}parse(e,n,r=0){let i=null,s=rf(n),o,a=this.debug&&!oR.test(s.name);a&&console.log(new Array(r).join("  ")+"Trying to get "+n+" from "+JSON.stringify(e.split(`
`)[0]));let l=s.name,u=Nj(s.name,this);if(s.name=="EOF"){if(e.length)return null;if(e.length==0)return{type:"EOF",text:"",rest:"",start:0,end:0,fullText:"",errors:[],children:[],parent:null}}try{if(!u&&s.isLiteral){let c=s.name.trim();if(c.startsWith('"')?c=JSON.parse(c):c.startsWith("'")&&(c=c.replace(/^'(.+)'$/,"$1").replace(/\\'/g,"'")),c==="")return{type:"%%EMPTY%%",text:"",rest:e,start:0,end:0,fullText:"",errors:[],children:[],parent:null};o=new RegExp(Pj(c)),l=null}}catch(c){return c instanceof ReferenceError&&console.error(c),null}if(o){let c=xA(e,o);if(c)return c.type=l,c}else{let c=u.bnf;c instanceof Array&&c.forEach(f=>{if(i)return;let p=null,v={type:s.name,text:"",children:[],end:0,errors:[],fullText:"",parent:null,start:0,rest:e};u.fragment&&(v.fragment=!0);let b=e,E=0,P=f.length>0,S=!1;for(let A=0;A<f.length;A++)if(typeof f[A]=="string"){let I=rf(f[A]);P=P&&I.isOptional;let N,x=!1;do{if(N=null,u.implicitWs&&(N=this.parse(b,I.name,r+1),!N)){let g;do if(g=this.parse(b,vy,r+1),g)v.text=v.text+g.text,v.end=v.text.length,g.parent=v,v.children.push(g),b=b.substr(g.text.length),E+=g.text.length;else break;while(g&&g.text.length)}if(N=N||this.parse(b,I.name,r+1),I.lookupNegative){if(N)return;break}if(I.lookupPositive&&!N)return;if(!N&&(I.isOptional||I.atLeastOne&&x))break;if(N&&u.pinned==A+1&&(p=N,a&&console.log(new Array(r+1).join("  ")+" "+N.type+" PINNED")),N||(N=this.parseRecovery(u,b,r+1)),!N)if(p)i=v,N={type:"SyntaxError",text:b,children:[],end:b.length,errors:[],fullText:"",parent:null,start:0,rest:""},b.length?new yy.TokenError(`Unexpected end of input. Expecting ${I.name} Got: ${b}`,N):new yy.TokenError(`Unexpected end of input. Missing ${I.name}`,N),a&&console.log(new Array(r+1).join("  ")+" "+N.type+" "+JSON.stringify(N.text));else return;if(x=!0,S=!0,N.type=="%%EMPTY%%")break;N.start+=E,N.end+=E,!I.lookupPositive&&N.type&&(N.fragment?N.children&&N.children.forEach(g=>{g.start+=E,g.end+=E,g.parent=v,v.children.push(g)}):(N.parent=v,v.children.push(N))),I.lookup&&(N.lookup=!0),a&&console.log(new Array(r+1).join("  ")+" "+N.type+" "+JSON.stringify(N.text)),!I.lookup&&!N.lookup&&(v.text=v.text+N.text,v.end=v.text.length,b=b.substr(N.text.length),E+=N.text.length),v.rest=b}while(N&&I.allowRepetition&&b.length&&!N.lookup)}else{let I=xA(b,f[A]);if(!I)return;a&&console.log(new Array(r+1).join("  ")+"> "+JSON.stringify(I.text)+f[A].source),S=!0,I.start+=E,I.end+=E,v.text=v.text+I.text,v.end=v.text.length,b=b.substr(I.text.length),E+=I.text.length,v.rest=b}S&&(i=v,a&&console.log(new Array(r).join("  ")+"<< PUSHING "+i.type+" "+JSON.stringify(i.text)))}),i&&u.simplifyWhenOneChildren&&i.children.length==1&&(i=i.children[0])}return i||a&&console.log(n+" NOT RESOLVED FROM "+e),i}parseRecovery(e,n,r){if(e.recover&&n.length){let i=this.debug;i&&console.log(new Array(r+1).join("  ")+"Trying to recover until token "+e.recover+" from "+JSON.stringify(n.split(`
`)[0]+n.split(`
`)[1]));let s={type:"SyntaxError",text:"",children:[],end:0,errors:[],fullText:"",parent:null,start:0,rest:""},o;do if(o=this.parse(n,e.recover,r+1),o){new yy.TokenError('Unexpected input: "'+s.text+`" Expecting: ${e.name}`,s);break}else s.text=s.text+n[0],s.end=s.text.length,n=n.substr(1);while(!o&&n.length>0);if(s.text.length>0&&o)return i&&console.log(new Array(r+1).join("  ")+"Recovered text: "+JSON.stringify(s.text)),s}return null}}fo.Parser=Ij;fo.default=Ij;Object.defineProperty(Cj,"__esModule",{value:!0});const Up=fo;var EA;(function(t){t.RULES=[{name:"Grammar",bnf:[["RULE_S*","%Atomic*","EOF"]]},{name:"%Atomic",bnf:[["Production","RULE_S*"]],fragment:!0},{name:"Production",bnf:[["NCName","RULE_S*",'"::="',"RULE_WHITESPACE*","Choice","RULE_WHITESPACE*","RULE_EOL+","RULE_S*"]]},{name:"NCName",bnf:[[/[a-zA-Z][a-zA-Z_0-9]*/]]},{name:"Choice",bnf:[["SequenceOrDifference","%_Choice_1*"]],fragment:!0},{name:"%_Choice_1",bnf:[["RULE_WHITESPACE*",'"|"',"RULE_WHITESPACE*","SequenceOrDifference"]],fragment:!0},{name:"SequenceOrDifference",bnf:[["Item","RULE_WHITESPACE*","%_Item_1?"]]},{name:"%_Item_1",bnf:[["Minus","Item"],["Item*"]],fragment:!0},{name:"Minus",bnf:[['"-"']]},{name:"Item",bnf:[["RULE_WHITESPACE*","%Primary","PrimaryDecoration?"]],fragment:!0},{name:"PrimaryDecoration",bnf:[['"?"'],['"*"'],['"+"']]},{name:"DecorationName",bnf:[['"ebnf://"',/[^\x5D#]+/]]},{name:"%Primary",bnf:[["NCName"],["StringLiteral"],["CharCode"],["CharClass"],["SubItem"]],fragment:!0},{name:"SubItem",bnf:[['"("',"RULE_WHITESPACE*","Choice","RULE_WHITESPACE*",'")"']]},{name:"StringLiteral",bnf:[[`'"'`,/[^"]*/,`'"'`],[`"'"`,/[^']*/,`"'"`]],pinned:1},{name:"CharCode",bnf:[['"#x"',/[0-9a-zA-Z]+/]]},{name:"CharClass",bnf:[["'['","'^'?","%RULE_CharClass_1+",'"]"']]},{name:"%RULE_CharClass_1",bnf:[["CharCodeRange"],["CharRange"],["CharCode"],["RULE_Char"]],fragment:!0},{name:"RULE_Char",bnf:[[/\x09/],[/\x0A/],[/\x0D/],[/[\x20-\x5c]/],[/[\x5e-\uD7FF]/],[/[\uE000-\uFFFD]/]]},{name:"CharRange",bnf:[["RULE_Char",'"-"',"RULE_Char"]]},{name:"CharCodeRange",bnf:[["CharCode",'"-"',"CharCode"]]},{name:"RULE_WHITESPACE",bnf:[["%RULE_WHITESPACE_CHAR*"],["Comment","RULE_WHITESPACE*"]]},{name:"RULE_S",bnf:[["RULE_WHITESPACE","RULE_S*"],["RULE_EOL","RULE_S*"]]},{name:"%RULE_WHITESPACE_CHAR",bnf:[[/\x09/],[/\x20/]],fragment:!0},{name:"Comment",bnf:[['"/*"',"%RULE_Comment_Body*",'"*/"']]},{name:"%RULE_Comment_Body",bnf:[['!"*/"',/[^*]/]],fragment:!0},{name:"RULE_EOL",bnf:[[/\x0D/,/\x0A/],[/\x0A/],[/\x0D/]]},{name:"Link",bnf:[["'['","Url","']'"]]},{name:"Url",bnf:[[/[^\x5D:/?#]/,'"://"',/[^\x5D#]+/,"%Url1?"]]},{name:"%Url1",bnf:[['"#"',"NCName"]],fragment:!0}],t.defaultParser=new Up.Parser(t.RULES,{debug:!1});const e=/^(!|&)/,n=/(\?|\+|\*)$/,r=/^%/;function i(S,A){if(typeof S=="string"){if(e.test(S))return"";if(r.test(S)){let N=n.exec(S),x=N?N[0]+" ":"";return s(S,A)?a(S,A)+x:"("+a(S,A)+")"+x}return S}else return S.source.replace(/\\(?:x|u)([a-zA-Z0-9]+)/g,"#x$1").replace(/\[\\(?:x|u)([a-zA-Z0-9]+)-\\(?:x|u)([a-zA-Z0-9]+)\]/g,"[#x$1-#x$2]")}function s(S,A){let I=Up.findRuleByName(S,A);return I&&I.bnf.length==1&&I.bnf[0].length==1&&(I.bnf[0][0]instanceof RegExp||I.bnf[0][0][0]=='"'||I.bnf[0][0][0]=="'")}function o(S,A){return S.map(I=>i(I,A)).join(" ")}function a(S,A){let I=Up.findRuleByName(S,A);return I?I.bnf.map(N=>o(N,A)).join(" | "):"RULE_NOT_FOUND {"+S+"}"}function l(S){let A=[];return S.grammarRules.forEach(I=>{if(!/^%/.test(I.name)){let N=I.recover?" /* { recoverUntil="+I.recover+" } */":"";A.push(I.name+" ::= "+a(I.name,S)+N)}}),A.join(`
`)}t.emit=l;let u=0;function c(S,A){throw console.log("reberia restar "+A+" a "+S),new Error("Difference not supported yet")}function f(S){return new RegExp(S.replace(/#x([a-zA-Z0-9]{4})/g,"\\u$1").replace(/#x([a-zA-Z0-9]{3})/g,"\\u0$1").replace(/#x([a-zA-Z0-9]{2})/g,"\\x$1").replace(/#x([a-zA-Z0-9]{1})/g,"\\x0$1"))}function p(S,A,I){let N=null,x=[];return A.children.forEach((g,_)=>{g.type=="Minus"&&c(N,g);let M=A.children[_+1];M=M&&M.type=="PrimaryDecoration"&&M.text||"";let D="";switch(g.type){case"SubItem":let q="%"+(I+u++);v(S,g,q),x.push(D+q+M);break;case"NCName":case"StringLiteral":x.push(D+g.text+M);break;case"CharCode":case"CharClass":if(M||D){let R={name:"%"+(I+u++),bnf:[[f(g.text)]]};S.push(R),x.push(D+R.name+M)}else x.push(f(g.text));break;case"PrimaryDecoration":break;default:throw new Error(" HOW SHOULD I PARSE THIS? "+g.type+" -> "+JSON.stringify(g.text))}N=g}),x}function v(S,A,I){let N=A.children.filter(_=>_.type=="SequenceOrDifference").map(_=>p(S,_,I)),x={name:I,bnf:N},g=null;N.forEach(_=>{g=g||_.recover,delete _.recover}),I.indexOf("%")==0&&(x.fragment=!0),g&&(x.recover=g),S.push(x)}function b(S,A=t.defaultParser){let I=A.getAST(S);if(!I)throw new Error("Could not parse "+S);if(I.errors&&I.errors.length)throw I.errors[0];let N=[];return I.children.filter(x=>x.type=="Production").map(x=>{let g=x.children.filter(_=>_.type=="NCName")[0].text;v(N,x,g)}),N}t.getRules=b;function E(S,A=t.defaultParser){return b(S.join(""),A)}t.Transform=E;class P extends Up.Parser{constructor(A,I){const N=I&&I.debugRulesParser===!0?new Up.Parser(t.RULES,{debug:!0}):t.defaultParser;super(b(A,N),I)}emitSource(){return l(this)}}t.Parser=P})(EA||(EA={}));var Wbe=Cj.default=EA;const Gbe="[^?/{}*,()#]+",Kbe=`
root ::= ("#" recursion | recursion | (query | pattern) recursion* | "#" SEP? | SEP)
recursion ::= (SEP query | pattern)*

query ::= (ESC escaped ESC | property | all | any | regex) typecheck? lookahead?
property ::= ${Gbe}
regex ::= "{" [^}]+ "}"
SEP ::= "/"
all ::= "**"
any ::= "*"

typecheck ::= "?:" ("value" | "boolean" | "string" | "number" | "object" | "array")
lookahead ::= "?" expression ((andExpr | orExpr) expression)*
andExpr ::= S? "&&" S?
orExpr ::= S? "||" S?

expression ::= (exprProperty | ESC escaped ESC) ((isnot | is) (exprProperty | regex | ESC escaped ESC))*
exprProperty ::= [a-zA-Z0-9-_ $]+
escaped ::= [^"]+
is ::= ":"
isnot ::= ":!"
ESC ::= '"'

pattern ::= S? "(" (SEP query | pattern (orPattern? pattern)*)* ")" quantifier? S? lookahead?
quantifier ::= "+" | "*" | [0-9]+
orPattern ::= S? "," S?

S ::= [ ]*
`,Ybe=new Wbe.Parser(Kbe),Jbe=t=>Ybe.getAST(t),Rs=0,Fd=3,i1=(t,e)=>`${t}/${e}`,$j=Object.prototype.toString,Xbe=/Object|Array/,_A=t=>Xbe.test($j.call(t)),Zbe=t=>$j.call(t).match(/\s([^\]]+)\]/).pop().toLowerCase();function Rj(t){return new RegExp(t.text.replace(/(^{|}$)/g,""))}function Qbe(t,e){Array.isArray(t)?t.forEach(e):Object.prototype.toString.call(t)==="[object Object]"&&Object.keys(t).forEach(function(n){e(t[n],n,t)})}function uR(t){return Array.isArray(t)?t.map(function(e,n){return`${n}`}):Object.prototype.toString.call(t)==="[object Object]"?Object.keys(t):[]}const Ju={mem:[],get(t,e){const n=t[Rs][e];if(!Ju.mem.includes(n))return _A(n)&&Ju.mem.push(n),[n,e,t[Rs],i1(t[Fd],e)]},reset(){Ju.mem.length=0}},AA={any(t,e){const n=e[Rs];return uR(n).map(r=>[n[r],r,n,i1(e[Fd],r)])},all(t,e){const n=[e];return Qbe(e[Rs],(r,i)=>{const s=Ju.get(e,i);s&&n.push(...AA.all(t,s))}),n},regex(t,e){const n=Rj(t),r=e[Rs];return uR(r).filter(i=>n.test(i)).map(i=>[r[i],i,r,i1(e[Fd],i)])}},s1={escaped:(t,e)=>s1.property(t,e),property:(t,e)=>{const n=t.text;if(e[Rs]&&e[Rs][n]!==void 0)return[e[Rs][n],n,e[Rs],i1(e[Fd],n)]},typecheck:(t,e)=>{const n=t.text.replace(/^\?:/,"");if(n==="value")return _A(e[Rs])?void 0:e;if(Zbe(e[Rs])===n)return e},lookahead:(t,e)=>{let n=!0,r=!1;return t.children.forEach(i=>{if(i.type==="expression"){const s=s1.expression(i,e)!==void 0;n=r===!0?n||s:n&&s}else r=i.type==="orExpr"}),n?e:void 0},expression:(t,e)=>{const n=t.children[0].text,r=t.children[1],i=t.children[2],s=e[Rs];if(_A(s)!==!1)return e1e(s[n],r,i)?e:void 0}};function e1e(t,e,n){if(e===void 0)return t!==void 0;let r;const i=`${t}`;return n.type==="regex"?r=Rj(n).test(i):r=i===n.text,e.type==="isnot"&&(r=r===!1&&t!==void 0),r}function t1e(t,e,n,r){const i=[];for(let s=0,o=e.length;s<o;s+=1)i.push(...t(n,e[s],n,r));return i}function n1e(t,e,n,r){const i=[];for(let s=0,o=e.length;s<o;s+=1){const a=t(n,e[s],r);a&&i.push(a)}return i}function r1e(t,e,n){let r=t;return e.children.forEach(i=>{if(AA[i.type])r=t1e(AA[i.type],r,i,n);else if(s1[i.type])r=n1e(s1[i.type],r,i,n);else throw new Error(`Unknown filter ${i.type}`)}),r}function i1e(t,e,n){const r=[];let i=t;return e.children.forEach(s=>{if(s.type==="orPattern"){r.push(...i),i=t;return}i=mO(i,s,n)}),r.push(...i),r}function s1e(t){if(t==null)return 1;if(t==="*"||t==="+")return 1/0;const e=parseInt(t);return isNaN(e)?1:e}function o1e(t,e,n){const r=[],i=e.children.find(l=>l.type==="quantifier"),s=s1e(i&&i.text);let o=t;i&&i.text==="*"&&r.push(...o);let a=0;for(;o.length>0&&a<s;)o=i1e(o,e,n),r.push(...o),a+=1;return r}function a1e(t,e,n){let r=t;return e.children.forEach(i=>r=mO(r,i,n)),r}function mO(t,e,n){let r;return e.type==="query"?r=r1e(t,e,n):e.type==="pattern"?r=o1e(t,e,n):r=a1e(t,e,n),Ju.reset(),Ju.mem.push(t),r}function l1e(t,e){return Ju.reset(),Ju.mem.push(t),mO([[t,null,null,"#"]],e)}const cR={value:t=>t.map(e=>e[Rs]),pointer:t=>t.map(e=>e[Fd]),all:t=>t,map:t=>{const e={};return t.forEach(n=>e[n[Fd]]=n[Rs]),e}};var Hf;(function(t){t.POINTER="pointer",t.VALUE="value",t.ALL="all",t.MAP="map"})(Hf||(Hf={}));cv.POINTER=Hf.POINTER;cv.VALUE=Hf.VALUE;cv.ALL=Hf.ALL;cv.MAP=Hf.MAP;function cv(t,e,n=Hf.VALUE){if(e==null)return[];e=e.replace(/(\/$)/g,""),e===""&&(e="#");const r=Jbe(e);if(r==null)throw new Error(`empty ast for '${e}'`);if(r.rest!=="")throw new Error(`Failed parsing queryString from: '${r.rest}'`);const i=l1e(t,r);return typeof n=="function"?i.map(s=>n(...s)):cR[n]?cR[n](i):i}var o1;(function(t){t.REPLACE_ITEMS="replace",t.INSERT_ITEMS="insert"})(o1||(o1={}));o1.REPLACE_ITEMS;o1.INSERT_ITEMS;const Bl={$ref:{type:!1},allOf:{type:!1,definitions:["allOf/*"]},anyOf:{type:!1,definitions:["anyOf/*"]},array:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not","items","items/*","additionalItems"],validationKeywords:["minItems","maxItems","uniqueItems"],keywords:["items","additionalItems","minItems","maxItems","uniqueItems"]},boolean:{type:!0},enum:{type:!1},integer:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not"],validationKeywords:["minimum","maximum","multipleOf"]},not:{type:!1,definitions:["not"]},number:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not"],validationKeywords:["minimum","maximum","multipleOf"]},null:{type:!0},object:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not","properties/*","additionalProperties","patternProperties/*","dependencies/*"],validationKeywords:["minProperties","maxProperties","required"],keywords:["properties","additionalProperties","patternProperties","dependencies","minProperties","maxProperties","required"]},oneOf:{type:!1,definitions:["oneOf/*"]},string:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not"],validationKeywords:["minLength","maxLength","pattern"]}},u1e=Object.keys(Bl).filter(t=>Bl[t].type===!1),fR=Object.prototype.hasOwnProperty;function hR(t){if(Af(t)===!1)return;if(t.enum)return"enum";if(Bl[t.type]||Array.isArray(t.type))return t.type;const e=u1e.filter(n=>t[n]);if(e.length===1)return e[0];if(e.length===0){for(let n=0,r=Bl.object.keywords.length;n<r;n+=1){const i=Bl.object.keywords[n];if(fR.call(t,i))return"object"}for(let n=0,r=Bl.array.keywords.length;n<r;n+=1){const i=Bl.array.keywords[n];if(fR.call(t,i))return"array"}return}throw new Error(`Mutiple typeIds [${e.join(", ")}] matched in ${JSON.stringify(t)}`)}function c1e(t){const e=[],n=hR(t);if(n==null)return e;let r;if(Array.isArray(n)){r={};for(let i=0,s=n.length;i<s;i+=1)Object.assign(r,Bl[n[i]])}else r=Bl[n];return r.definitions==null||r.definitions.forEach(i=>{cv(t,i,(s,o,a,l)=>{Af(s)&&hR(s)&&e.push({pointer:Dd.join(Dd.split(l),!1),def:s})})}),e}function f1e(t,e){if(this.callback(t,e)===!0)return;c1e(t).forEach(r=>this.nextTypeDefs(r.def,Dd.join(e,r.pointer,!1)))}function by(t,e,n,r="definitions"){const i=e[r];Object.keys(i).forEach(s=>{if(i[s]===!1||Af(i[s])){t.nextTypeDefs(i[s],Dd.join(n,r,s,!1));return}})}function Rw(t,e,n="#"){const r={callback:e,nextTypeDefs:f1e};r.nextTypeDefs(t,n),t.definitions!=null&&(r.callback=(i,s)=>{e(i,s),i.definitions!=null&&by(r,i,s)},by(r,t,n)),t.$defs!=null&&(r.callback=(i,s)=>{e(i,s),i.definitions!=null&&by(r,i,s)},by(r,t,n,"$defs"))}const h1e=/(#|\/)+$/,wy=/#$/,d1e=/^[^:]+:\/\/[^/]+\//,p1e=/\/[^/]*$/,g1e=/#.*$/;function a1(t,e){return t==null&&e==null?"#":e==null?t.replace(wy,""):t==null?e.replace(wy,""):e[0]==="#"?`${t.replace(g1e,"")}${e.replace(h1e,"")}`:d1e.test(e)?e.replace(wy,""):`${t.replace(p1e,"")}/${e.replace(wy,"")}`}const qp=/(#|\/)+$/g,m1e=["",null,"#"];function v1e(t){if(m1e.includes(t))return[];if(t=t.replace(qp,""),t.indexOf("#")===-1)return[t.replace(qp,"")];if(t.indexOf("#")===0)return[t.replace(qp,"")];const e=t.split("#");return e[0]=e[0].replace(qp,""),e[1]=`#${e[1].replace(qp,"")}`,e}const y1e=/(#|\/)+$/g,b1e=t=>nn(t)==="object";function Nl(t,e,n){if(b1e(n)&&(n=n.__ref||n.$ref),n==null)return e;let r;const i=n.replace(y1e,"");if(t.remotes[i])return r=t.remotes[i],r&&r.$ref?Nl(t,e,r.$ref):r;if(t.ids[n])return r=pf.get(e,t.ids[n]),r&&r.$ref?Nl(t,e,r.$ref):r;const s=v1e(n);if(s.length===0)return e;if(s.length===1){if(n=s[0],t.remotes[n])return r=t.remotes[n],Nl(t,e,r.$ref);if(t.ids[n])return r=pf.get(e,t.ids[n]),r&&r.$ref?Nl(t,e,r.$ref):r}if(s.length===2){const o=s[0];if(n=s[1],t.remotes[o])return t.remotes[o].getRef?t.remotes[o].getRef(n):Nl(t,t.remotes[o],n);if(t.ids[o])return Nl(t,pf.get(e,t.ids[o]),n)}return r=pf.get(e,t.ids[n]||n),r&&r.$ref?Nl(t,e,r.$ref):r}const dR="__compiled",pR="__ref",w1e="getRef",x1e="getRoot",S1e=/(#|\/)+$/g;function E1e(t,e,n=e,r=!1){if(!e||e[dR]!==void 0)return e;const i={ids:{},remotes:t.remotes},s=JSON.stringify(e),o=JSON.parse(s);if(Object.defineProperty(o,dR,{enumerable:!1,value:!0}),Object.defineProperty(o,w1e,{enumerable:!1,value:Nl.bind(null,i,o)}),r===!1&&s.includes("$ref")===!1)return o;e!==n&&Object.defineProperty(o,"definitions",{enumerable:!1,value:Object.assign({},n.definitions,n.$defs,e.definitions,e.$defs)});const a={},l=()=>o;return Rw(o,(u,c)=>{var f;if(u.id){if(u.id.startsWith("http")&&/(allOf|anyOf|oneOf)\/\d+$/.test(c)){const P=c.replace(/\/(allOf|anyOf|oneOf)\/\d+$/,""),S=pf.get(o,P);u.id=(f=S.id)!==null&&f!==void 0?f:u.id}i.ids[u.id.replace(S1e,"")]=c}c=`#${c}`.replace(/##+/,"#");const p=c.replace(/\/[^/]+$/,""),v=c.replace(/\/[^/]+\/[^/]+$/,""),b=a[p]||a[v],E=a1(b,u.id);a[c]=E,i.ids[E]==null&&(i.ids[E]=c),u.$ref&&!u[pR]&&(Object.defineProperty(u,pR,{enumerable:!1,value:a1(E,u.$ref)}),Object.defineProperty(u,x1e,{enumerable:!1,value:l}))}),o}function Lj(t,e,n,r=t.rootSchema,i="#"){r=t.resolveRef(r),n(r,e,i);const s=nn(e);s==="object"?Object.keys(e).forEach(o=>{const a=t.step(o,r,e,i),l=e[o];t.each(l,n,a,`${i}/${o}`)}):s==="array"&&e.forEach((o,a)=>{const l=t.step(a,r,e,i);t.each(o,n,l,`${i}/${a}`)})}var Dj={exports:{}};(function(t){(function(e){e.exports.is_uri=r,e.exports.is_http_uri=i,e.exports.is_https_uri=s,e.exports.is_web_uri=o,e.exports.isUri=r,e.exports.isHttpUri=i,e.exports.isHttpsUri=s,e.exports.isWebUri=o;var n=function(a){var l=a.match(/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/);return l};function r(a){if(a&&!/[^a-z0-9\:\/\?\#\[\]\@\!\$\&\'\(\)\*\+\,\;\=\.\-\_\~\%]/i.test(a)&&!/%[^0-9a-f]/i.test(a)&&!/%[0-9a-f](:?[^0-9a-f]|$)/i.test(a)){var l=[],u="",c="",f="",p="",v="",b="";if(l=n(a),u=l[1],c=l[2],f=l[3],p=l[4],v=l[5],!!(u&&u.length&&f.length>=0)){if(c&&c.length){if(!(f.length===0||/^\//.test(f)))return}else if(/^\/\//.test(f))return;if(/^[a-z][a-z0-9\+\-\.]*$/.test(u.toLowerCase()))return b+=u+":",c&&c.length&&(b+="//"+c),b+=f,p&&p.length&&(b+="?"+p),v&&v.length&&(b+="#"+v),b}}}function i(a,l){if(r(a)){var u=[],c="",f="",p="",v="",b="",E="",P="";if(u=n(a),c=u[1],f=u[2],p=u[3],b=u[4],E=u[5],!!c){if(l){if(c.toLowerCase()!="https")return}else if(c.toLowerCase()!="http")return;if(f)return/:(\d+)$/.test(f)&&(v=f.match(/:(\d+)$/)[0],f=f.replace(/:\d+$/,"")),P+=c+":",P+="//"+f,v&&(P+=v),P+=p,b&&b.length&&(P+="?"+b),E&&E.length&&(P+="#"+E),P}}}function s(a){return i(a,!0)}function o(a){return i(a)||s(a)}})(t)})(Dj);var _1e=Dj.exports;const gR=ka(_1e),A1e=new RegExp("^([0-9]+)-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])[Tt]([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\\.[0-9]+)?(([Zz])|([\\+|\\-]([01][0-9]|2[0-3]):[0-5][0-9]))$"),k1e=/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,C1e=/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,P1e=/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,O1e=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,T1e=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,M1e=[0,31,28,31,30,31,30,31,31,30,31,30,31],N1e=/^(?:\/(?:[^~/]|~0|~1)*)*$/,I1e=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,$1e=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,R1e=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,Fj={date:(t,e,n,r)=>{if(typeof n!="string")return;const i=n.match(O1e);if(!i)return kn.formatDateTimeError({value:n,pointer:r});const s=+i[1],o=+i[2],a=+i[3],l=s%4===0&&(s%100!==0||s%400===0);if(!(o>=1&&o<=12&&a>=1&&a<=(o==2&&l?29:M1e[o])))return kn.formatDateError({value:n,pointer:r})},"date-time":(t,e,n,r)=>{if(typeof n=="string")return n===""||A1e.test(n)?new Date(n).toString()==="Invalid Date"?kn.formatDateTimeError({value:n,pointer:r}):void 0:kn.formatDateTimeError({value:n,pointer:r})},email:(t,e,n,r)=>{if(typeof n!="string")return;if(n[0]==='"')return kn.formatEmailError({value:n,pointer:r});const[i,s,...o]=n.split("@");if(!i||!s||o.length!==0||i.length>64||s.length>253)return kn.formatEmailError({value:n,pointer:r});if(i[0]==="."||i.endsWith(".")||i.includes(".."))return kn.formatEmailError({value:n,pointer:r});if(!/^[a-z0-9.-]+$/i.test(s)||!/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+$/i.test(i))return kn.formatEmailError({value:n,pointer:r});if(!s.split(".").every(a=>/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(a)))return kn.formatEmailError({value:n,pointer:r})},hostname:(t,e,n,r)=>{if(typeof n=="string"&&!(n===""||P1e.test(n)))return kn.formatHostnameError({value:n,pointer:r})},ipv4:(t,e,n,r)=>{if(!(typeof n!="string"||n==="")){if(n&&n[0]==="0")return kn.formatIPV4LeadingZeroError({value:n,pointer:r});if(!(n.length<=15&&k1e.test(n)))return kn.formatIPV4Error({value:n,pointer:r})}},ipv6:(t,e,n,r)=>{if(!(typeof n!="string"||n==="")){if(n&&n[0]==="0")return kn.formatIPV6LeadingZeroError({value:n,pointer:r});if(!(n.length<=45&&C1e.test(n)))return kn.formatIPV6Error({value:n,pointer:r})}},"json-pointer":(t,e,n,r)=>{if(!(typeof n!="string"||n==="")&&!N1e.test(n))return kn.formatJsonPointerError({value:n,pointer:r})},"relative-json-pointer":(t,e,n,r)=>{if(!(typeof n!="string"||n==="")&&!I1e.test(n))return kn.formatJsonPointerError({value:n,pointer:r})},regex:(t,e,n,r)=>{if(typeof n=="string"&&/\\Z$/.test(n)===!1){try{new RegExp(n);return}catch{}return kn.formatRegExError({value:n,pointer:r})}if(!(typeof n=="object"||typeof n=="number"||Array.isArray(n)))return kn.formatRegExError({value:n,pointer:r})},time:(t,e,n,r)=>{if(typeof n!="string")return;const i=n.match(T1e);if(!i)return kn.formatDateTimeError({value:n,pointer:r});const s=+i[1],o=+i[2],a=+i[3],l=!!i[5];if(!((s<=23&&o<=59&&a<=59||s==23&&o==59&&a==60)&&l))return kn.formatTimeError({value:n,pointer:r})},uri:(t,e,n,r)=>{if(!(typeof n!="string"||n==="")&&!gR.isUri(n))return kn.formatURIError({value:n,pointer:r})},"uri-reference":(t,e,n,r)=>{if(!(typeof n!="string"||n==="")&&!$1e.test(n))return kn.formatURIReferenceError({value:n,pointer:r})},"uri-template":(t,e,n,r)=>{if(!(typeof n!="string"||n==="")&&!R1e.test(n))return kn.formatURITemplateError({value:n,pointer:r})},url:(t,e,n,r)=>{if(!(n===""||gR.isWebUri(n)))return kn.formatURLError({value:n,pointer:r})}},L1e={};function Vj(t,e,n,r=t.rootSchema){const i=Dd.split(e);return r=t.resolveRef(r),Bj(t,r,i,e,n)}function Bj(t,e,n,r,i=L1e){if(n.length===0)return t.resolveRef(e);const s=n.shift();return e=t.step(s,e,i,r),Ks(e)?e:(i=i[s],Bj(t,e,n,`${r}/${s}`,i))}function D1e(t){switch(nn(t)){case"string":case"array":return t.length===0;case"null":case"undefined":return!0;case"object":return Object.keys(t).length===0;default:return!1}}const F1e={addOptionalProps:!1,removeInvalidData:!1};let jl;function uE(t,e){const{$ref:n}=t;return n==null?!0:(jl[e]==null||jl[e][n]==null?0:jl[e][n])<ep.GET_TEMPLATE_RECURSION_LIMIT}function mR(t,e,n){const{$ref:r}=e;return r==null?e:(jl[n]=jl[n]||{},jl[n][r]=jl[n][r]||0,jl[n][r]+=1,t.resolveRef(e))}function V1e(t,e){if(t==="string")return JSON.stringify(e);if(typeof e!="string")return null;try{if(e=JSON.parse(e),typeof e===t)return e}catch{}return null}function jj(t,e,n,r){if(nn(e)!=="object")return Object.assign({pointer:r},e);if(uE(e,r)===!1&&n==null)return!1;let i=gO(mR(t,e,r));if(Array.isArray(e.anyOf)&&e.anyOf.length>0){if(uE(e.anyOf[0],`${r}/anyOf/0`)){const s=mR(t,e.anyOf[0],`${r}/anyOf/0`);i=fO(i,s),i.pointer=e.anyOf[0].$ref||i.pointer}delete i.anyOf}if(Array.isArray(e.allOf)&&e.allOf.map((o,a)=>uE(o,`${r}/allOf/${a}`)).reduceRight((o,a)=>o&&a,!0)){const o=yj(t,e);o&&(i=Ds(i,o))}return i.pointer=i.pointer||e.$ref||r,i}const vR=t=>t&&typeof t=="object";function Ol(t,e,n,r,i){var s;if(n==null)throw new Error(`getTemplate: missing schema for data: ${JSON.stringify(e)}`);if(r==null)throw new Error("Missing pointer");let o=jj(t,n,e,r);if(!vR(o))return;if(r=o.pointer,o!=null&&o.const)return o.const;if(Array.isArray(o.oneOf))if(D1e(e)){const c=o.oneOf[0].type||o.type||o.const&&typeof o.const||nn(e);o={...o.oneOf[0],type:c}}else{const c=Tw(t,e,o);if(Ks(c)){if(e!=null&&i.removeInvalidData!==!0)return e;o=o.oneOf[0],e=void 0}else c.type=(s=c.type)!==null&&s!==void 0?s:o.type,o=c}if(!vR(o)||o.type==null)return;const a=Array.isArray(o.type)?B1e(o.type,e,o.default):o.type,l=nn(e);return e!=null&&l!==a&&!(l==="number"&&a==="integer")&&(e=V1e(a,e)),yR[a]==null?i.removeInvalidData?void 0:e:yR[a](t,o,e,r,i)}function B1e(t,e,n){if(e==null){if(n!=null){const i=nn(n);if(t.includes(i))return i}return t[0]}const r=nn(e);return t.includes(r)?r:t[0]}const yR={null:(t,e,n)=>Wp(e,n,null),string:(t,e,n)=>Wp(e,n,""),number:(t,e,n)=>Wp(e,n,0),integer:(t,e,n)=>Wp(e,n,0),boolean:(t,e,n)=>Wp(e,n,!1),object:(t,e,n,r,i)=>{var s;const o=e.default===void 0?{}:e.default,a={},l=(s=e.required)!==null&&s!==void 0?s:[];e.properties&&Object.keys(e.properties).forEach(f=>{const p=n==null||n[f]==null?o[f]:n[f],v=l.includes(f);(p!=null||v||i.addOptionalProps)&&(a[f]=Ol(t,p,e.properties[f],`${r}/properties/${f}`,i))});let u=wj(t,e,a);if(u){u=Ds(e,u),delete u.dependencies;const f=Ol(t,n,u,`${r}/dependencies`,i);Object.assign(a,f)}n&&(i.removeInvalidData===!0&&(e.additionalProperties===!1||nn(e.additionalProperties)==="object")?nn(e.additionalProperties)==="object"&&Object.keys(n).forEach(f=>{a[f]==null&&t.isValid(n[f],e.additionalProperties)&&(a[f]=n[f])}):Object.keys(n).forEach(f=>a[f]==null&&(a[f]=n[f])));const c=Iw(t,e,a);if(c){const f=Ol(t,a,{type:"object",...c},r,i);Object.assign(a,f)}return a},array:(t,e,n,r,i)=>{var s,o;if(e.items==null)return n||[];const a=e.default===void 0?[]:e.default,l=n||a,u=e.minItems||0;if(Array.isArray(e.items)){for(let f=0,p=Math.max(u??0,(o=(s=e.items)===null||s===void 0?void 0:s.length)!==null&&o!==void 0?o:0);f<p;f+=1)l[f]=Ol(t,l[f]==null?a[f]:l[f],e.items[f],`${r}/items/${f}`,i);return l}if(nn(e.items)!=="object")return l;const c=jj(t,e.items,n,r);if(c===!1)return l;if(r=c.pointer||r,c.oneOf&&l.length===0){const f=c.oneOf[0];for(let p=0;p<u;p+=1)l[p]=Ol(t,l[p]==null?a[p]:l[p],f,`${r}/oneOf/0`,i);return l}if(c.oneOf&&l.length>0){const f=Math.max(u,l.length);for(let p=0;p<f;p+=1){let v=l[p]==null?a[p]:l[p],b=Tw(t,v,c);b==null||Ks(b)?v!=null&&i.removeInvalidData!==!0?l[p]=v:(v=void 0,b=c.oneOf[0],l[p]=Ol(t,v,b,`${r}/oneOf/${p}`,i)):l[p]=Ol(t,v,b,`${r}/oneOf/${p}`,i)}return l}if(c.type){for(let f=0,p=Math.max(u,l.length);f<p;f+=1)l[f]=Ol(t,l[f]==null?a[f]:l[f],c,`${r}/items`,i);return l}return l}};function Wp(t,e,n){return e??(t.const?t.const:t.default===void 0&&Array.isArray(t.enum)?t.enum[0]:t.default===void 0?n:t.default)}const zj=(t,e,n=t.rootSchema,r=F1e)=>(jl={},Ol(t,e,n,"#",r));function Hj(t,e,n=t.rootSchema,r="#"){return t.validate(e,n,r).length===0}function bR(t){const e=[];let n=0;const r=t.length;for(;n<r;){const i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){const s=t.charCodeAt(n++);(s&64512)==56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),n--)}else e.push(i)}return e}const cE=ep.floatingPointPrecision,j1e=Object.prototype.hasOwnProperty,wR=(t,e)=>!(t[e]===void 0||!j1e.call(t,e)),Uj={additionalProperties:(t,e,n,r)=>{if(e.additionalProperties===!0||e.additionalProperties==null||nn(e.patternProperties)==="object"&&e.additionalProperties===!1)return;const i=[];let s=Object.keys(n).filter(a=>ep.propertyBlacklist.includes(a)===!1);const o=Object.keys(e.properties||{});if(nn(e.patternProperties)==="object"){const a=Object.keys(e.patternProperties).map(l=>new RegExp(l));s=s.filter(l=>{for(let u=0;u<a.length;u+=1)if(a[u].test(l))return!1;return!0})}for(let a=0,l=s.length;a<l;a+=1){const u=s[a];if(o.indexOf(u)===-1){const c=Af(e.additionalProperties);if(c&&Array.isArray(e.additionalProperties.oneOf)){const f=t.resolveOneOf(n[u],e.additionalProperties,`${r}/${u}`);Ks(f)?i.push(t.errors.additionalPropertiesError({schema:e.additionalProperties,property:s[a],properties:o,pointer:r,errors:f.data.errors})):i.push(...t.validate(n[u],f,r))}else c?i.push(...t.validate(n[u],e.additionalProperties,`${r}/${u}`)):i.push(t.errors.noAdditionalPropertiesError({property:s[a],properties:o,pointer:r}))}}return i},allOf:Dbe,anyOf:jbe,dependencies:Bbe,enum:(t,e,n,r)=>{const i=nn(n);if(i==="object"||i==="array"){const s=JSON.stringify(n);for(let o=0;o<e.enum.length;o+=1)if(JSON.stringify(e.enum[o])===s)return}else if(e.enum.includes(n))return;return t.errors.enumError({values:e.enum,value:n,pointer:r})},format:(t,e,n,r)=>{if(t.validateFormat[e.format])return t.validateFormat[e.format](t,e,n,r)},items:(t,e,n,r)=>{if(e.items===!1)return Array.isArray(n)&&n.length===0?void 0:t.errors.invalidDataError({pointer:r,value:n});const i=[];for(let s=0;s<n.length;s+=1){const o=n[s],a=t.step(s,e,n,r);if(Ks(a))return[a];const l=t.validate(o,a,`${r}/${s}`);i.push(...l)}return i},maximum:(t,e,n,r)=>{if(!isNaN(e.maximum)){if(e.maximum&&e.maximum<n)return t.errors.maximumError({maximum:e.maximum,length:n,pointer:r});if(e.maximum&&e.exclusiveMaximum===!0&&e.maximum===n)return t.errors.maximumError({maximum:e.maximum,length:n,pointer:r})}},maxItems:(t,e,n,r)=>{if(!isNaN(e.maxItems)&&e.maxItems<n.length)return t.errors.maxItemsError({maximum:e.maxItems,length:n.length,pointer:r})},maxLength:(t,e,n,r)=>{if(isNaN(e.maxLength))return;const i=bR(n).length;if(e.maxLength<i)return t.errors.maxLengthError({maxLength:e.maxLength,length:i,pointer:r})},maxProperties:(t,e,n,r)=>{const i=Object.keys(n).length;if(isNaN(e.maxProperties)===!1&&e.maxProperties<i)return t.errors.maxPropertiesError({maxProperties:e.maxProperties,length:i,pointer:r})},minLength:(t,e,n,r)=>{if(isNaN(e.minLength))return;const i=bR(n).length;if(e.minLength>i)return e.minLength===1?t.errors.minLengthOneError({minLength:e.minLength,length:i,pointer:r}):t.errors.minLengthError({minLength:e.minLength,length:i,pointer:r})},minimum:(t,e,n,r)=>{if(!isNaN(e.minimum)){if(e.minimum>n)return t.errors.minimumError({minimum:e.minimum,length:n,pointer:r});if(e.exclusiveMinimum===!0&&e.minimum===n)return t.errors.minimumError({minimum:e.minimum,length:n,pointer:r})}},minItems:(t,e,n,r)=>{if(!isNaN(e.minItems)&&e.minItems>n.length)return e.minItems===1?t.errors.minItemsOneError({minItems:e.minItems,length:n.length,pointer:r}):t.errors.minItemsError({minItems:e.minItems,length:n.length,pointer:r})},minProperties:(t,e,n,r)=>{if(isNaN(e.minProperties))return;const i=Object.keys(n).length;if(e.minProperties>i)return t.errors.minPropertiesError({minProperties:e.minProperties,length:i,pointer:r})},multipleOf:(t,e,n,r)=>{if(!isNaN(e.multipleOf)&&n*cE%(e.multipleOf*cE)/cE!==0)return t.errors.multipleOfError({multipleOf:e.multipleOf,value:n,pointer:r})},not:(t,e,n,r)=>{const i=[];return t.validate(n,e.not,r).length===0&&i.push(t.errors.notError({value:n,not:e.not,pointer:r})),i},oneOf:Fye,pattern:(t,e,n,r)=>{if(new RegExp(e.pattern,"u").test(n)===!1)return t.errors.patternError({pattern:e.pattern,description:e.patternExample||e.pattern,received:n,pointer:r})},patternProperties:(t,e,n,r)=>{const i=e.properties||{},s=e.patternProperties;if(nn(s)!=="object")return;const o=[],a=Object.keys(n),l=Object.keys(s).map(u=>({regex:new RegExp(u),patternSchema:s[u]}));return a.forEach(u=>{let c=!1;for(let f=0,p=l.length;f<p;f+=1)if(l[f].regex.test(u)){c=!0;const v=t.validate(n[u],l[f].patternSchema,`${r}/${u}`);v&&v.length>0&&o.push(...v)}i[u]||c===!1&&e.additionalProperties===!1&&o.push(t.errors.patternPropertiesError({key:u,pointer:r,patterns:Object.keys(s).join(",")}))}),o},properties:(t,e,n,r)=>{const i=[],s=Object.keys(e.properties||{});for(let o=0;o<s.length;o+=1){const a=s[o];if(wR(n,a)){const l=t.step(a,e,n,r),u=t.validate(n[a],l,`${r}/${a}`);i.push(...u)}}return i},propertiesRequired:(t,e,n,r)=>{const i=[],s=Object.keys(e.properties||{});for(let o=0;o<s.length;o+=1){const a=s[o];if(n[a]===void 0)i.push(t.errors.requiredPropertyError({key:a,pointer:r}));else{const l=t.step(a,e,n,r),u=t.validate(n[a],l,`${r}/${a}`);i.push(...u)}}return i},required:(t,e,n,r)=>{if(Array.isArray(e.required)!==!1)return e.required.map(i=>{if(!wR(n,i))return t.errors.requiredPropertyError({key:i,pointer:r})})},requiredNotEmpty:(t,e,n,r)=>{if(Array.isArray(e.required)!==!1)return e.required.map(i=>{if(n[i]==null||n[i]==="")return t.errors.valueNotEmptyError({property:i,pointer:`${r}/${i}`})})},uniqueItems:(t,e,n,r)=>{if((Array.isArray(n)&&e.uniqueItems)===!1)return;const i=[],s=[];return n.forEach((o,a)=>{for(let l=a+1;l<n.length;l+=1)xV(o,n[l])&&!i.includes(l)&&(s.push(t.errors.uniqueItemsError({pointer:`${r}/${l}`,duplicatePointer:`${r}/${a}`,arrayPointer:r,value:JSON.stringify(o)})),i.push(l))}),s}};function fs(t){const e={type:nn(t)};return e.type==="object"&&(e.properties={},Object.keys(t).forEach(n=>e.properties[n]=fs(t[n]))),e.type==="array"&&t.length===1?e.items=fs(t[0]):e.type==="array"&&(e.items=t.map(fs)),e}const xR={array:(t,e,n,r,i)=>{const s=r==null?void 0:r[e],o=nn(n.items);if(o==="object")return r1(t,n.items,s)||t.resolveRef(n.items);if(o==="array"){if(n.items[e]===!0)return fs(s);if(n.items[e]===!1)return kn.invalidDataError({key:e,value:s,pointer:i});if(n.items[e])return t.resolveRef(n.items[e]);if(n.additionalItems===!1)return kn.additionalItemsError({key:e,value:s,pointer:i});if(n.additionalItems===!0||n.additionalItems===void 0)return fs(s);if(nn(n.additionalItems)==="object")return n.additionalItems;throw new Error(`Invalid schema ${JSON.stringify(n,null,4)} for ${JSON.stringify(r,null,4)}`)}return n.additionalItems!==!1&&s?fs(s):new Error(`Invalid array schema for ${e} at ${i}`)},object:(t,e,n,r,i)=>{var s;n=r1(t,n,r);const o=(s=n==null?void 0:n.properties)===null||s===void 0?void 0:s[e];if(o!==void 0){if(o===!1)return kn.forbiddenPropertyError({property:e,value:r,pointer:`${i}`});if(o===!0)return fs(r==null?void 0:r[e]);const u=t.resolveRef(o);if(Ks(u))return u;if(u&&Array.isArray(u.oneOf))return t.resolveOneOf(r[e],u,`${i}/${e}`);if(u)return u}const{patternProperties:a}=n;if(nn(a)==="object"){let u;const c=Object.keys(a);for(let f=0,p=c.length;f<p;f+=1)if(u=new RegExp(c[f]),u.test(e))return a[c[f]]}const{additionalProperties:l}=n;return nn(l)==="object"?n.additionalProperties:r&&(l===void 0||l===!0)?fs(r[e]):kn.unknownPropertyError({property:e,value:r,pointer:`${i}`})}};function qj(t,e,n,r,i="#"){if(Array.isArray(n.type)){const a=nn(r);return n.type.includes(a)?xR[a](t,`${e}`,n,r,i):t.errors.typeError({value:r,pointer:i,expected:n.type,received:a})}const s=n.type||nn(r),o=xR[s];return o?o(t,`${e}`,n,r,i):new Error(`Unsupported schema type ${n.type} for key ${e}`)}function Wj(t,e,n=t.rootSchema){var r;if(n.oneOf)return n.oneOf.map(s=>t.resolveRef(s));if(!((r=n.items)===null||r===void 0)&&r.oneOf)return n.items.oneOf.map(s=>t.resolveRef(s));const i=t.step(e,n,{},"#");return Ks(i)?i:[i]}const z1e={array:(t,e,n,r)=>t.typeKeywords.array.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),object:(t,e,n,r)=>t.typeKeywords.object.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),string:(t,e,n,r)=>t.typeKeywords.string.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),integer:(t,e,n,r)=>t.typeKeywords.number.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),number:(t,e,n,r)=>t.typeKeywords.number.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),boolean:(t,e,n,r)=>t.typeKeywords.boolean.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),null:(t,e,n,r)=>t.typeKeywords.null.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r))};function H1e(t,e){const n=nn(t);return n==="number"&&(e==="integer"||Array.isArray(e)&&e.includes("integer"))?Number.isInteger(t)||isNaN(t)?"integer":"number":n}function Gj(t,e,n=t.rootSchema,r="#"){if(n=t.resolveRef(n),nn(n)==="boolean")return n?[]:[t.errors.invalidDataError({value:e,pointer:r})];if(Ks(n))return[n];if(n.const!==void 0)return xV(n.const,e)?[]:[t.errors.constError({value:e,expected:n.const,pointer:r})];const i=H1e(e,n.type),s=n.type||i;return i!==s&&(!Array.isArray(s)||!s.includes(i))?[t.errors.typeError({received:i,expected:s,value:e,pointer:r})]:t.validateType[i]==null?[t.errors.invalidTypeError({receivedType:i,pointer:r})]:vm(t.validateType[i](t,n,e,r)).filter(n1)}const U1e={typeKeywords:{array:["allOf","anyOf","enum","items","maxItems","minItems","not","oneOf","uniqueItems"],boolean:["enum","not","allOf","anyOf","oneOf"],object:["additionalProperties","dependencies","enum","format","minProperties","maxProperties","patternProperties","properties","required","not","oneOf","allOf","anyOf"],string:["allOf","anyOf","enum","format","maxLength","minLength","not","oneOf","pattern"],number:["allOf","anyOf","enum","format","maximum","minimum","multipleOf","not","oneOf"],null:["allOf","anyOf","enum","format","not","oneOf"]},validateKeyword:Uj,validateType:z1e,validateFormat:Fj,errors:kn,addRemoteSchema:Aj,compileSchema:E1e,createSchemaOf:fs,each:Lj,eachSchema:Rw,getChildSchemaSelection:Wj,getSchema:Vj,getTemplate:zj,isValid:Hj,resolveAllOf:vj,resolveAnyOf:Sj,resolveOneOf:ij,resolveRef:bj,step:qj,validate:Gj,templateDefaultOptions:ep.templateDefaultOptions};class Kj extends _j{constructor(e,n={}){super(fO(U1e,n),e)}}const SR="__compiled",ER="__ref",q1e="getRef",W1e="getRoot",G1e=/(#|\/)+$/g;function K1e(t,e,n=e,r=!1){if(e===!0||e===!1||e===void 0||e[SR]!==void 0)return e;const i={ids:{},remotes:t.remotes},s=JSON.stringify(e),o=JSON.parse(s);if(Object.defineProperty(o,SR,{enumerable:!1,value:!0}),Object.defineProperty(o,q1e,{enumerable:!1,value:Nl.bind(null,i,o)}),r===!1&&s.includes("$ref")===!1)return o;o!==n&&Object.defineProperty(o,"$defs",{enumerable:!0,value:Object.assign({},n.definitions,n.$defs,o.definitions,o.$defs)});const a={},l=()=>o;return Rw(o,(u,c)=>{var f;if(u.$id){if(u.$id.startsWith("http")&&/(allOf|anyOf|oneOf)\/\d+$/.test(c)){const P=c.replace(/\/(allOf|anyOf|oneOf)\/\d+$/,""),S=pf.get(o,P);u.$id=(f=S.$id)!==null&&f!==void 0?f:u.$id}i.ids[u.$id.replace(G1e,"")]=c}c=`#${c}`.replace(/##+/,"#");const p=c.replace(/\/[^/]+$/,""),v=c.replace(/\/[^/]+\/[^/]+$/,""),b=a[p]||a[v],E=a1(b,u.$id);a[c]=E,i.ids[E]==null&&(i.ids[E]=c),u.$ref&&!u[ER]&&(Object.defineProperty(u,ER,{enumerable:!1,value:a1(E,u.$ref)}),Object.defineProperty(u,W1e,{enumerable:!1,value:l}))}),o}const Y1e={...Uj,contains:(t,e,n,r)=>{if(e.contains===!1)return t.errors.containsArrayError({pointer:r,value:n});if(e.contains===!0)return Array.isArray(n)&&n.length===0?t.errors.containsAnyError({pointer:r}):void 0;if(nn(e.contains)==="object"){for(let i=0;i<n.length;i+=1)if(t.isValid(n[i],e.contains))return;return t.errors.containsError({pointer:r,schema:JSON.stringify(e.contains)})}},exclusiveMaximum:(t,e,n,r)=>{if(!isNaN(e.exclusiveMaximum)&&e.exclusiveMaximum<=n)return t.errors.maximumError({maximum:e.exclusiveMaximum,length:n,pointer:r})},exclusiveMinimum:(t,e,n,r)=>{if(!isNaN(e.exclusiveMinimum)&&e.exclusiveMinimum>=n)return t.errors.minimumError({minimum:e.exclusiveMinimum,length:n,pointer:r})},if:Rbe,maximum:(t,e,n,r)=>{if(!isNaN(e.maximum)&&e.maximum&&e.maximum<n)return t.errors.maximumError({maximum:e.maximum,length:n,pointer:r})},minimum:(t,e,n,r)=>{if(!isNaN(e.minimum)&&e.minimum>n)return t.errors.minimumError({minimum:e.minimum,length:n,pointer:r})},patternProperties:(t,e,n,r)=>{const i=e.properties||{},s=e.patternProperties;if(nn(s)!=="object")return;const o=[],a=Object.keys(n),l=Object.keys(s).map(u=>({regex:new RegExp(u),patternSchema:s[u]}));return a.forEach(u=>{let c=!1;for(let f=0,p=l.length;f<p;f+=1)if(l[f].regex.test(u)){if(c=!0,l[f].patternSchema===!1){o.push(t.errors.patternPropertiesError({key:u,pointer:r,patterns:Object.keys(s).join(",")}));return}const v=t.validate(n[u],l[f].patternSchema,`${r}/${u}`);v&&v.length>0&&o.push(...v)}i[u]||c===!1&&e.additionalProperties===!1&&o.push(t.errors.patternPropertiesError({key:u,pointer:r,patterns:Object.keys(s).join(",")}))}),o},propertyNames:(t,e,n,r)=>{if(e.propertyNames===!1)return Object.keys(n).length===0?void 0:t.errors.invalidPropertyNameError({property:Object.keys(n),pointer:r,value:n});if(e.propertyNames===!0||nn(e.propertyNames)!=="object")return;const i=[],s=Object.keys(n),o={...e.propertyNames,type:"string"};return s.forEach(a=>{const l=t.validate(a,o,`${r}/${a}`);l.length>0&&i.push(t.errors.invalidPropertyNameError({property:a,pointer:r,validationError:l[0],value:n[a]}))}),i}},J1e={array:(t,e,n,r)=>t.typeKeywords.array.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),object:(t,e,n,r)=>t.typeKeywords.object.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),string:(t,e,n,r)=>t.typeKeywords.string.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),integer:(t,e,n,r)=>t.typeKeywords.number.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),number:(t,e,n,r)=>t.typeKeywords.number.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),boolean:(t,e,n,r)=>t.typeKeywords.boolean.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),null:(t,e,n,r)=>t.typeKeywords.null.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r))},Yj={typeKeywords:{array:["allOf","anyOf","contains","enum","if","items","maxItems","minItems","not","oneOf","uniqueItems"],boolean:["allOf","anyOf","enum","not","oneOf"],object:["additionalProperties","allOf","anyOf","dependencies","enum","format","if","maxProperties","minProperties","not","oneOf","patternProperties","properties","propertyNames","required"],string:["allOf","anyOf","enum","format","if","maxLength","minLength","not","oneOf","pattern"],number:["allOf","anyOf","enum","exclusiveMaximum","exclusiveMinimum","format","if","maximum","minimum","multipleOf","not","oneOf"],null:["allOf","anyOf","enum","format","not","oneOf"]},validateKeyword:Y1e,validateType:J1e,validateFormat:Fj,errors:kn,addRemoteSchema:Aj,compileSchema:K1e,createSchemaOf:fs,each:Lj,eachSchema:Rw,getChildSchemaSelection:Wj,getSchema:Vj,getTemplate:zj,isValid:Hj,resolveAllOf:vj,resolveAnyOf:Sj,resolveOneOf:ij,resolveRef:bj,step:qj,validate:Gj,templateDefaultOptions:ep.templateDefaultOptions};class X1e extends _j{constructor(e,n={}){super(fO(Yj,n),e)}}({...Yj});function Jj(t,e){const n=[];for(let r=e;r!=null&&r.parent;r=r.parent)switch(r.parent.name){case tr.PROPERTY:{const i=r.parent.getChild(tr.PROPERTY_NAME);i&&n.unshift(Uy(t,i).replace(/[/~]/g,s=>s==="~"?"~0":"~1"));break}case tr.ARRAY:{if(kye(r)){const i=rj(r.parent,r);n.unshift(`${i}`)}break}}return n.unshift(""),n.join("/")}const Xj=(t,e,n=-1)=>Jj(t.doc,Xr(t).resolve(e,n)),Z1e=(t,e="json4")=>{const n=Xr(t),r=new Map;return n.iterate({enter:i=>{var s,o,a,l,u,c,f,p;if(i.name==="PropertyName"){const v=Jj(t.doc,i.node),{from:b,to:E}=i.node;if(!(!((o=(s=i.node)===null||s===void 0?void 0:s.nextSibling)===null||o===void 0)&&o.node))return r.set(v,{keyFrom:b,keyTo:E}),!0;const P=e==="json4"?(l=(a=i.node)===null||a===void 0?void 0:a.nextSibling)===null||l===void 0?void 0:l.node:(p=(f=(c=(u=i.node)===null||u===void 0?void 0:u.nextSibling)===null||c===void 0?void 0:c.node)===null||f===void 0?void 0:f.nextSibling)===null||p===void 0?void 0:p.node;if(!P)return r.set(v,{keyFrom:b,keyTo:E}),!0;const{from:S,to:A}=P;return r.set(v,{keyFrom:b,keyTo:E,valueFrom:S,valueTo:A}),!0}}}),r},_R={array:(t,e,n,r,i)=>{const s=r==null?void 0:r[e],o=nn(n.items);if(o==="object")return r1(t,n.items,s)||t.resolveRef(n.items);if(o==="array"){if(n.items[e]===!0)return fs(s);if(n.items[e]===!1)return kn.invalidDataError({key:e,value:s,pointer:i});if(n.items[e])return t.resolveRef(n.items[e]);if(n.additionalItems===!1)return kn.additionalItemsError({key:e,value:s,pointer:i});if(n.additionalItems===!0||n.additionalItems===void 0)return fs(s);if(nn(n.additionalItems)==="object")return n.additionalItems;throw new Error(`Invalid schema ${JSON.stringify(n,null,4)} for ${JSON.stringify(r,null,4)}`)}return n.additionalItems!==!1&&s?fs(s):new Error(`Invalid array schema for ${e} at ${i}`)},object:(t,e,n,r,i)=>{var s;n=r1(t,n,r);const o=(s=n==null?void 0:n.properties)===null||s===void 0?void 0:s[e];if(o!==void 0){if(o===!1)return kn.forbiddenPropertyError({property:e,value:r,pointer:`${i}`});if(o===!0)return fs(r==null?void 0:r[e]);const u=t.resolveRef(o);if(Ks(u))return u;if(u&&Array.isArray(u.oneOf))return r===void 0||r[e]===void 0?u:t.resolveOneOf(r[e],u,`${i}/${e}`);if(u)return u}const{patternProperties:a}=n;if(nn(a)==="object"){let u;const c=Object.keys(a);for(let f=0,p=c.length;f<p;f+=1)if(u=new RegExp(c[f]),u.test(e))return a[c[f]]}const{additionalProperties:l}=n;return nn(l)==="object"?n.additionalProperties:r&&(l===void 0||l===!0)?fs(r[e]):kn.unknownPropertyError({property:e,value:r,pointer:`${i}`})}};function Q1e(t,e,n,r,i="#"){if(Array.isArray(n.type)){const a=nn(r);return n.type.includes(a)?_R[a](t,`${e}`,n,r,i):t.errors.typeError({value:r,pointer:i,expected:n.type,received:a})}const s=n.type||nn(r),o=_R[s];return o?o(t,`${e}`,n,r,i):new Error(`Unsupported schema type ${n.type} for key ${e}`)}const ewe={};function kA(t,e,n,r=t.rootSchema){const i=Dd.split(e);return r=t.resolveRef(r),Zj(t,r,i,e,n)}function Zj(t,e,n,r,i=ewe){if(n.length===0)return t.resolveRef(e);const s=n.shift();return e=Q1e(t,s,e,i,r),Ks(e)?e:(i=i[s],Zj(t,e,n,`${r}/${s}`,i))}class twe{constructor(){this.completions=new Map,this.reservedKeys=new Set}reserve(e){this.reservedKeys.add(e)}add(e){this.reservedKeys.has(e.label)||this.completions.set(e.label,e)}}class nwe{constructor(e){this.schema=e}doComplete(e){var n,r;const i={from:e.pos,to:e.pos,options:[],filter:!1},s=e.state.doc.sliceString(0);let o=rR(e.state,e.pos);const a=e.state.sliceDoc(o.from,e.pos).replace(/^("|')/,"");if(!(qy(o)||my(o))&&!e.explicit)return i;const l=Uy(e.state.doc,o);if(o&&(qy(o)||my(o)))i.from=o.from,i.to=o.to;else{const f=e.matchBefore(/[A-Za-z0-9._]*/),p=e.pos-l.length;gy.log("xxx","overwriteStart after",p,"ctx.pos",e.pos,"word",f,"currentWord",l,"=>",s[p-1],"..",s[p],"..",s),i.from=o.name===tr.INVALID?(n=f==null?void 0:f.from)!==null&&n!==void 0?n:e.pos:p,i.to=e.pos}const u=new twe;let c=!0;if(my(o)){const f=o.parent;if(f){const p=iR(f);c=!p||p.name===tr.INVALID&&p.from-p.to===0,gy.log("xxx","addValue",c,iR(f),o),o=(r=[f,f.parent].find(v=>(v==null?void 0:v.name)===tr.OBJECT))!==null&&r!==void 0?r:null}}if(o&&(o.name===tr.OBJECT||o.name===tr.JSON_TEXT)&&my(rR(e.state,e.pos))){if(o.from===e.pos)return i;this.getPropertyCompletions(this.schema,e,o,u,c)}else{const f={};this.getValueCompletions(this.schema,e,f,u)}return i.options=Array.from(u.completions.values()).filter(f=>wA(f.label).startsWith(a)),gy.log("xxx","result",i,"prefix",a,"collector.completions",u.completions,"reservedKeys",u.reservedKeys),i}applySnippetCompletion(e){return yre(typeof e.apply!="string"?e.label:e.apply,e)}getPropertyCompletions(e,n,r,i,s){r.getChildren(tr.PROPERTY).forEach(l=>{const u=Uy(n.state.doc,l.getChild(tr.PROPERTY_NAME));i.reserve(wA(u))}),this.getSchemas(e,n).forEach(l=>{if(typeof l!="object")return;const u=l.properties;u&&Object.entries(u).forEach(([f,p])=>{var v,b;if(typeof p=="object"){const E=(v=p.description)!==null&&v!==void 0?v:"",P=(b=p.type)!==null&&b!==void 0?b:"",S=Array.isArray(P)?P.toString():P,A={label:f,apply:this.getInsertTextForProperty(f,s,p),type:"property",detail:S,info:E};i.add(this.applySnippetCompletion(A))}});const c=l.propertyNames;if(typeof c=="object"&&(c.enum&&c.enum.forEach(f=>{const p=f==null?void 0:f.toString();if(p){const v={label:p,apply:this.getInsertTextForProperty(p,s),type:"property"};i.add(this.applySnippetCompletion(v))}}),c.const)){const f=c.const.toString(),p={label:f,apply:this.getInsertTextForProperty(f,s),type:"property"};i.add(this.applySnippetCompletion(p))}})}getInsertTextForProperty(e,n,r){let i=`"${e}"`;if(!n)return i;i+=": ";let s,o=0;if(typeof r=="object"&&(r.enum&&(!s&&r.enum.length===1&&(s=this.getInsertTextForGuessedValue(r.enum[0],"")),o+=r.enum.length),typeof r.const<"u"&&(s||(s=this.getInsertTextForGuessedValue(r.const,"")),o++),typeof r.default<"u"&&(s||(s=this.getInsertTextForGuessedValue(r.default,"")),o++),Array.isArray(r.examples)&&r.examples.length&&(s||(s=this.getInsertTextForGuessedValue(r.examples[0],"")),o+=r.examples.length),o===0)){let a=Array.isArray(r.type)?r.type[0]:r.type;switch(a||(r.properties?a="object":r.items&&(a="array")),a){case"boolean":s="#{}";break;case"string":s='"#{}"';break;case"object":s="{#{}}";break;case"array":s="[#{}]";break;case"number":case"integer":s="#{0}";break;case"null":s="#{null}";break;default:return i}}return(!s||o>1)&&(s="#{}"),i+s}getInsertTextForGuessedValue(e,n=""){switch(typeof e){case"object":return e===null?"${null}"+n:this.getInsertTextForValue(e,n);case"string":{let r=JSON.stringify(e);return r=r.substr(1,r.length-2),r=this.getInsertTextForPlainText(r),'"${'+r+'}"'+n}case"number":case"boolean":return"${"+JSON.stringify(e)+"}"+n}return this.getInsertTextForValue(e,n)}getInsertTextForPlainText(e){return e.replace(/[\\$}]/g,"\\$&")}getInsertTextForValue(e,n){const r=JSON.stringify(e,null,"	");return r==="{}"?"{#{}}"+n:r==="[]"?"[#{}]"+n:this.getInsertTextForPlainText(r+n)}getValueCompletions(e,n,r,i){let s=Xr(n.state).resolveInner(n.pos,-1),o=null,a;if(s&&qy(s)&&(o=s,s=s.parent),!s){this.addSchemaValueCompletions(e,r,i);return}if(s.name===tr.PROPERTY){const l=s.getChild(tr.PROPERTY_NAME);l&&(a=Uy(n.state.doc,l),s=s.parent)}if(s&&(a!==void 0||s.name===tr.ARRAY)){const l=this.getSchemas(e,n);for(const u of l){if(typeof u!="object")return;if(s.name===tr.ARRAY&&u.items){let c=i;if(u.uniqueItems&&(c=Object.assign(Object.assign({},c),{add(f){c.completions.has(f.label)||i.add(f)},reserve(f){i.reserve(f)}})),Array.isArray(u.items)){let f=0;if(o){const v=rj(s,o);v>=0&&(f=v)}const p=u.items[f];p&&this.addSchemaValueCompletions(p,r,c)}else this.addSchemaValueCompletions(u.items,r,c)}if(a!==void 0){let c=!1;if(u.properties){const f=u.properties[a];f&&(c=!0,this.addSchemaValueCompletions(f,r,i))}if(u.patternProperties&&!c)for(const f of Object.keys(u.patternProperties)){const p=this.extendedRegExp(f);if(p!=null&&p.test(a)){c=!0;const v=u.patternProperties[f];v&&this.addSchemaValueCompletions(v,r,i)}}if(u.additionalProperties&&!c){const f=u.additionalProperties;this.addSchemaValueCompletions(f,r,i)}}r.boolean&&(this.addBooleanValueCompletion(!0,i),this.addBooleanValueCompletion(!1,i)),r.null&&this.addNullValueCompletion(i)}}}addSchemaValueCompletions(e,n,r){typeof e=="object"&&(this.addEnumValueCompletions(e,r),this.addDefaultValueCompletions(e,r),this.collectTypes(e,n),Array.isArray(e.allOf)&&e.allOf.forEach(i=>this.addSchemaValueCompletions(i,n,r)),Array.isArray(e.anyOf)&&e.anyOf.forEach(i=>this.addSchemaValueCompletions(i,n,r)),Array.isArray(e.oneOf)&&e.oneOf.forEach(i=>this.addSchemaValueCompletions(i,n,r)))}addDefaultValueCompletions(e,n,r=0){let i=!1;if(typeof e.default<"u"){let s=e.type,o=e.default;for(let l=r;l>0;l--)o=[o],s="array";const a={type:s==null?void 0:s.toString(),label:this.getLabelForValue(o),detail:"Default value"};n.add(a),i=!0}Array.isArray(e.examples)&&e.examples.forEach(s=>{let o=e.type,a=s;for(let l=r;l>0;l--)a=[a],o="array";n.add({type:o==null?void 0:o.toString(),label:this.getLabelForValue(a)}),i=!0}),!i&&typeof e.items=="object"&&!Array.isArray(e.items)&&r<5&&this.addDefaultValueCompletions(e.items,n,r+1)}addEnumValueCompletions(e,n){var r,i;if(typeof e.const<"u"&&n.add({type:(r=e.type)===null||r===void 0?void 0:r.toString(),label:this.getLabelForValue(e.const),info:e.description}),Array.isArray(e.enum))for(let s=0,o=e.enum.length;s<o;s++){const a=e.enum[s];n.add({type:(i=e.type)===null||i===void 0?void 0:i.toString(),label:this.getLabelForValue(a),info:e.description})}}addBooleanValueCompletion(e,n){n.add({type:"boolean",label:e?"true":"false"})}addNullValueCompletion(e){e.add({type:"null",label:"null"})}collectTypes(e,n){if(Array.isArray(e.enum)||typeof e.const<"u")return;const r=e.type;Array.isArray(r)?r.forEach(i=>n[i]=!0):r&&(n[r]=!0)}getSchemas(e,n){const r=Xj(n.state,n.pos),i=r.replace(/\/[^/]*$/,"/");if(gy.log("xxx","pointer..",JSON.stringify(i),"originalPointer",JSON.stringify(r)),!i||i==="/")return[e];const s=new X1e(this.schema),o=kA(s,i);return this.isJsonError(o)?[]:Array.isArray(o.allOf)?[o,...o.allOf.map(a=>this.expandSchemaProperty(a,e))]:Array.isArray(o.oneOf)?[o,...o.oneOf.map(a=>this.expandSchemaProperty(a,e))]:Array.isArray(o.anyOf)?[o,...o.anyOf.map(a=>this.expandSchemaProperty(a,e))]:[o]}isJsonError(e){return e.type==="error"}expandSchemaProperty(e,n){if(typeof e=="object"&&e.$ref){const r=this.getReferenceSchema(n,e.$ref);if(typeof r=="object"){const i=Object.assign(Object.assign({},e),r);return Reflect.deleteProperty(i,"$ref"),i}}return e}getReferenceSchema(e,n){const r=n.split("/");let i=e;return r.forEach(s=>{if(s){if(s==="#"){i=e;return}typeof i=="object"&&(i=i[s])}}),i}getLabelForValue(e){return JSON.stringify(e)}getValueFromLabel(e){return JSON.parse(e)}extendedRegExp(e){let n="";e.startsWith("(?i)")&&(e=e.substring(4),n="i");try{return new RegExp(e,n+"u")}catch{try{return new RegExp(e,n)}catch{return}}}}function rwe(t){const e=new nwe(t);return function(r){return e.doComplete(r)}}const l1=(t,e)=>{const n=t.length>2;let r=t.map((i,s)=>{const o="`"+(e?JSON.stringify(e(i)):i)+"`";return s===t.length-1?"or "+o:o});return n?r.join(", "):r.join(" ")};class u1{constructor(e,n,r,i,s,o,a,l,u,c=0,f){this.p=e,this.stack=n,this.state=r,this.reducePos=i,this.pos=s,this.score=o,this.buffer=a,this.bufferBase=l,this.curContext=u,this.lookAhead=c,this.parent=f}toString(){return`[${this.stack.filter((e,n)=>n%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,n,r=0){let i=e.parser.context;return new u1(e,[],n,r,r,0,[],0,i?new AR(i,i.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,n){this.stack.push(this.state,n,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var n;let r=e>>19,i=e&65535,{parser:s}=this.p,o=s.dynamicPrecedence(i);if(o&&(this.score+=o),r==0){this.pushState(s.getGoto(this.state,i,!0),this.reducePos),i<s.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,4,!0),this.reduceContext(i,this.reducePos);return}let a=this.stack.length-(r-1)*3-(e&262144?6:0),l=a?this.stack[a-2]:this.p.ranges[0].from,u=this.reducePos-l;u>=2e3&&!(!((n=this.p.parser.nodeSet.types[i])===null||n===void 0)&&n.isAnonymous)&&(l==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=u):this.p.lastBigReductionSize<u&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=l,this.p.lastBigReductionSize=u));let c=a?this.stack[a-1]:0,f=this.bufferBase+this.buffer.length-c;if(i<s.minRepeatTerm||e&131072){let p=s.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,l,p,f+4,!0)}if(e&262144)this.state=this.stack[a];else{let p=this.stack[a-3];this.state=s.getGoto(p,i,!0)}for(;this.stack.length>a;)this.stack.pop();this.reduceContext(i,l)}storeNode(e,n,r,i=4,s=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,a=this.buffer.length;if(a==0&&o.parent&&(a=o.bufferBase-o.parent.bufferBase,o=o.parent),a>0&&o.buffer[a-4]==0&&o.buffer[a-1]>-1){if(n==r)return;if(o.buffer[a-2]>=n){o.buffer[a-2]=r;return}}}if(!s||this.pos==r)this.buffer.push(e,n,r,i);else{let o=this.buffer.length;if(o>0&&this.buffer[o-4]!=0)for(;o>0&&this.buffer[o-2]>r;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,i>4&&(i-=4);this.buffer[o]=e,this.buffer[o+1]=n,this.buffer[o+2]=r,this.buffer[o+3]=i}}shift(e,n,r){let i=this.pos;if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=r,this.shiftContext(n,i),n<=this.p.parser.maxNode&&this.buffer.push(n,i,r,4);else{let s=e,{parser:o}=this.p;(r>this.pos||n<=o.maxNode)&&(this.pos=r,o.stateFlag(s,1)||(this.reducePos=r)),this.pushState(s,i),this.shiftContext(n,i),n<=o.maxNode&&this.buffer.push(n,i,r,4)}}apply(e,n,r){e&65536?this.reduce(e):this.shift(e,n,r)}useNode(e,n){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(n,i),this.buffer.push(r,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,n=e.buffer.length;for(;n>0&&e.buffer[n-2]>e.reducePos;)n-=4;let r=e.buffer.slice(n),i=e.bufferBase+n;for(;e&&i==e.bufferBase;)e=e.parent;return new u1(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,i,this.curContext,this.lookAhead,e)}recoverByDelete(e,n){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,n,4),this.storeNode(0,this.pos,n,r?8:4),this.pos=this.reducePos=n,this.score-=190}canShift(e){for(let n=new iwe(this);;){let r=this.p.parser.stateSlot(n.state,4)||this.p.parser.hasAction(n.state,e);if(r==0)return!1;if(!(r&65536))return!0;n.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let n=this.p.parser.nextStates(this.state);if(n.length>8||this.stack.length>=120){let i=[];for(let s=0,o;s<n.length;s+=2)(o=n[s+1])!=this.state&&this.p.parser.hasAction(o,e)&&i.push(n[s],o);if(this.stack.length<120)for(let s=0;i.length<8&&s<n.length;s+=2){let o=n[s+1];i.some((a,l)=>l&1&&a==o)||i.push(n[s],o)}n=i}let r=[];for(let i=0;i<n.length&&r.length<4;i+=2){let s=n[i+1];if(s==this.state)continue;let o=this.split();o.pushState(s,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(n[i],this.pos),o.score-=200,r.push(o)}return r}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);if(!(e&65536))return!1;let{parser:n}=this.p;if(!n.validAction(this.state,e)){let r=e>>19,i=e&65535,s=this.stack.length-r*3;if(s<0||n.getGoto(this.stack[s],i,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let n=0;n<this.stack.length;n+=3)if(this.stack[n]!=e.stack[n])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(n)))}reduceContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(n)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(e){if(e!=this.curContext.context){let n=new AR(this.curContext.tracker,e);n.hash!=this.curContext.hash&&this.emitContext(),this.curContext=n}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class AR{constructor(e,n){this.tracker=e,this.context=n,this.hash=e.strict?e.hash(n):0}}var kR;(function(t){t[t.Insert=200]="Insert",t[t.Delete=190]="Delete",t[t.Reduce=100]="Reduce",t[t.MaxNext=4]="MaxNext",t[t.MaxInsertStackDepth=300]="MaxInsertStackDepth",t[t.DampenInsertStackDepth=120]="DampenInsertStackDepth",t[t.MinBigReduction=2e3]="MinBigReduction"})(kR||(kR={}));class iwe{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let n=e&65535,r=e>>19;r==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(r-1)*3;let i=this.start.p.parser.getGoto(this.stack[this.base-3],n,!0);this.state=i}}class c1{constructor(e,n,r){this.stack=e,this.pos=n,this.index=r,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,n=e.bufferBase+e.buffer.length){return new c1(e,n,n-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new c1(this.stack,this.pos,this.index)}}function xy(t,e=Uint16Array){if(typeof t!="string")return t;let n=null;for(let r=0,i=0;r<t.length;){let s=0;for(;;){let o=t.charCodeAt(r++),a=!1;if(o==126){s=65535;break}o>=92&&o--,o>=34&&o--;let l=o-32;if(l>=46&&(l-=46,a=!0),s+=l,a)break;s*=46}n?n[i++]=s:n=new e(s)}return n}class Gy{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const CR=new Gy;class swe{constructor(e,n){this.input=e,this.ranges=n,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=CR,this.rangeIndex=0,this.pos=this.chunkPos=n[0].from,this.range=n[0],this.end=n[n.length-1].to,this.readNext()}resolveOffset(e,n){let r=this.range,i=this.rangeIndex,s=this.pos+e;for(;s<r.from;){if(!i)return null;let o=this.ranges[--i];s-=r.from-o.to,r=o}for(;n<0?s>r.to:s>=r.to;){if(i==this.ranges.length-1)return null;let o=this.ranges[++i];s+=o.from-r.to,r=o}return s}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let n of this.ranges)if(n.to>e)return Math.max(e,n.from);return this.end}peek(e){let n=this.chunkOff+e,r,i;if(n>=0&&n<this.chunk.length)r=this.pos+e,i=this.chunk.charCodeAt(n);else{let s=this.resolveOffset(e,1);if(s==null)return-1;if(r=s,r>=this.chunk2Pos&&r<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(r-this.chunk2Pos);else{let o=this.rangeIndex,a=this.range;for(;a.to<=r;)a=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=r),r+this.chunk2.length>a.to&&(this.chunk2=this.chunk2.slice(0,a.to-r)),i=this.chunk2.charCodeAt(0)}}return r>=this.token.lookAhead&&(this.token.lookAhead=r+1),i}acceptToken(e,n=0){let r=n?this.resolveOffset(n,-1):this.pos;if(r==null||r<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=r}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:n}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=n,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),n=this.pos+e.length;this.chunk=n>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,n){if(n?(this.token=n,n.start=e,n.lookAhead=e+1,n.value=n.extended=-1):this.token=CR,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,n){if(e>=this.chunkPos&&n<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,n-this.chunkPos);if(e>=this.chunk2Pos&&n<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,n-this.chunk2Pos);if(e>=this.range.from&&n<=this.range.to)return this.input.read(e,n);let r="";for(let i of this.ranges){if(i.from>=n)break;i.to>e&&(r+=this.input.read(Math.max(i.from,e),Math.min(i.to,n)))}return r}}class hd{constructor(e,n){this.data=e,this.id=n}token(e,n){let{parser:r}=n.p;owe(this.data,e,n,this.id,r.data,r.tokenPrecTable)}}hd.prototype.contextual=hd.prototype.fallback=hd.prototype.extend=!1;hd.prototype.fallback=hd.prototype.extend=!1;function owe(t,e,n,r,i,s){let o=0,a=1<<r,{dialect:l}=n.p.parser;e:for(;a&t[o];){let u=t[o+1];for(let v=o+3;v<u;v+=2)if((t[v+1]&a)>0){let b=t[v];if(l.allows(b)&&(e.token.value==-1||e.token.value==b||awe(b,e.token.value,i,s))){e.acceptToken(b);break}}let c=e.next,f=0,p=t[o+2];if(e.next<0&&p>f&&t[u+p*3-3]==65535&&t[u+p*3-3]==65535){o=t[u+p*3-1];continue e}for(;f<p;){let v=f+p>>1,b=u+v+(v<<1),E=t[b],P=t[b+1]||65536;if(c<E)p=v;else if(c>=P)f=v+1;else{o=t[b+2],e.advance();continue e}}break}}function PR(t,e,n){for(let r=e,i;(i=t[r])!=65535;r++)if(i==n)return r-e;return-1}function awe(t,e,n,r){let i=PR(n,r,e);return i<0||PR(n,r,t)<i}const oa=typeof process<"u"&&process.env&&/\bparse\b/.test({}.LOG);let fE=null;var OR;(function(t){t[t.Margin=25]="Margin"})(OR||(OR={}));function TR(t,e,n){let r=t.cursor(mi.IncludeAnonymous);for(r.moveTo(e);;)if(!(n<0?r.childBefore(e):r.childAfter(e)))for(;;){if((n<0?r.to<e:r.from>e)&&!r.type.isError)return n<0?Math.max(0,Math.min(r.to-1,e-25)):Math.min(t.length,Math.max(r.from+1,e+25));if(n<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return n<0?0:t.length}}class lwe{constructor(e,n){this.fragments=e,this.nodeSet=n,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?TR(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?TR(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let n=this.trees.length-1;if(n<0)return this.nextFragment(),null;let r=this.trees[n],i=this.index[n];if(i==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=r.children[i],o=this.start[n]+r.positions[i];if(o>e)return this.nextStart=o,null;if(s instanceof Jr){if(o==e){if(o<this.safeFrom)return null;let a=o+s.length;if(a<=this.safeTo){let l=s.prop(cn.lookAhead);if(!l||a+l<this.fragment.to)return s}}this.index[n]++,o+s.length>=Math.max(this.safeFrom,e)&&(this.trees.push(s),this.start.push(o),this.index.push(0))}else this.index[n]++,this.nextStart=o+s.length}}}class uwe{constructor(e,n){this.stream=n,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(r=>new Gy)}getActions(e){let n=0,r=null,{parser:i}=e.p,{tokenizers:s}=i,o=i.stateSlot(e.state,3),a=e.curContext?e.curContext.hash:0,l=0;for(let u=0;u<s.length;u++){if(!(1<<u&o))continue;let c=s[u],f=this.tokens[u];if(!(r&&!c.fallback)&&((c.contextual||f.start!=e.pos||f.mask!=o||f.context!=a)&&(this.updateCachedToken(f,c,e),f.mask=o,f.context=a),f.lookAhead>f.end+25&&(l=Math.max(f.lookAhead,l)),f.value!=0)){let p=n;if(f.extended>-1&&(n=this.addActions(e,f.extended,f.end,n)),n=this.addActions(e,f.value,f.end,n),!c.extend&&(r=f,n>p))break}}for(;this.actions.length>n;)this.actions.pop();return l&&e.setLookAhead(l),!r&&e.pos==this.stream.end&&(r=new Gy,r.value=e.p.parser.eofTerm,r.start=r.end=e.pos,n=this.addActions(e,r.value,r.end,n)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let n=new Gy,{pos:r,p:i}=e;return n.start=r,n.end=Math.min(r+1,i.stream.end),n.value=r==i.stream.end?i.parser.eofTerm:0,n}updateCachedToken(e,n,r){let i=this.stream.clipPos(r.pos);if(n.token(this.stream.reset(i,e),r),e.value>-1){let{parser:s}=r.p;for(let o=0;o<s.specialized.length;o++)if(s.specialized[o]==e.value){let a=s.specializers[o](this.stream.read(e.start,e.end),r);if(a>=0&&r.p.parser.dialect.allows(a>>1)){a&1?e.extended=a>>1:e.value=a>>1;break}}}else e.value=0,e.end=this.stream.clipPos(i+1)}putAction(e,n,r,i){for(let s=0;s<i;s+=3)if(this.actions[s]==e)return i;return this.actions[i++]=e,this.actions[i++]=n,this.actions[i++]=r,i}addActions(e,n,r,i){let{state:s}=e,{parser:o}=e.p,{data:a}=o;for(let l=0;l<2;l++)for(let u=o.stateSlot(s,l?2:1);;u+=3){if(a[u]==65535)if(a[u+1]==1)u=Il(a,u+2);else{i==0&&a[u+1]==2&&(i=this.putAction(Il(a,u+2),n,r,i));break}a[u]==n&&(i=this.putAction(Il(a,u+1),n,r,i))}return i}}var MR;(function(t){t[t.Distance=5]="Distance",t[t.MaxRemainingPerStep=3]="MaxRemainingPerStep",t[t.MinBufferLengthPrune=500]="MinBufferLengthPrune",t[t.ForceReduceLimit=10]="ForceReduceLimit",t[t.CutDepth=15e3]="CutDepth",t[t.CutTo=9e3]="CutTo",t[t.MaxLeftAssociativeReductionCount=300]="MaxLeftAssociativeReductionCount",t[t.MaxStackCount=12]="MaxStackCount"})(MR||(MR={}));class cwe{constructor(e,n,r,i){this.parser=e,this.input=n,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new swe(n,i),this.tokens=new uwe(e,this.stream),this.topTerm=e.top[1];let{from:s}=i[0];this.stacks=[u1.start(this,e.top[0],s)],this.fragments=r.length&&this.stream.end-s>e.bufferLength*4?new lwe(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,n=this.minStackPos,r=this.stacks=[],i,s;if(this.bigReductionCount>300&&e.length==1){let[o]=e;for(;o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<e.length;o++){let a=e[o];for(;;){if(this.tokens.mainToken=null,a.pos>n)r.push(a);else{if(this.advanceStack(a,r,e))continue;{i||(i=[],s=[]),i.push(a);let l=this.tokens.getMainToken(a);s.push(l.value,l.end)}}break}}if(!r.length){let o=i&&hwe(i);if(o)return this.stackToTree(o);if(this.parser.strict)throw oa&&i&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+n);this.recovering||(this.recovering=5)}if(this.recovering&&i){let o=this.stoppedAt!=null&&i[0].pos>this.stoppedAt?i[0]:this.runRecovery(i,s,r);if(o)return this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(r.length>o)for(r.sort((a,l)=>l.score-a.score);r.length>o;)r.pop();r.some(a=>a.reducePos>n)&&this.recovering--}else if(r.length>1){e:for(let o=0;o<r.length-1;o++){let a=r[o];for(let l=o+1;l<r.length;l++){let u=r[l];if(a.sameState(u)||a.buffer.length>500&&u.buffer.length>500)if((a.score-u.score||a.buffer.length-u.buffer.length)>0)r.splice(l--,1);else{r.splice(o--,1);continue e}}}r.length>12&&r.splice(12,r.length-12)}this.minStackPos=r[0].pos;for(let o=1;o<r.length;o++)r[o].pos<this.minStackPos&&(this.minStackPos=r[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,n,r){let i=e.pos,{parser:s}=this,o=oa?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&i>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let u=e.curContext&&e.curContext.tracker.strict,c=u?e.curContext.hash:0;for(let f=this.fragments.nodeAt(i);f;){let p=this.parser.nodeSet.types[f.type.id]==f.type?s.getGoto(e.state,f.type.id):-1;if(p>-1&&f.length&&(!u||(f.prop(cn.contextHash)||0)==c))return e.useNode(f,p),oa&&console.log(o+this.stackID(e)+` (via reuse of ${s.getName(f.type.id)})`),!0;if(!(f instanceof Jr)||f.children.length==0||f.positions[0]>0)break;let v=f.children[0];if(v instanceof Jr&&f.positions[0]==0)f=v;else break}}let a=s.stateSlot(e.state,4);if(a>0)return e.reduce(a),oa&&console.log(o+this.stackID(e)+` (via always-reduce ${s.getName(a&65535)})`),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let l=this.tokens.getActions(e);for(let u=0;u<l.length;){let c=l[u++],f=l[u++],p=l[u++],v=u==l.length||!r,b=v?e:e.split();if(b.apply(c,f,p),oa&&console.log(o+this.stackID(b)+` (via ${c&65536?`reduce of ${s.getName(c&65535)}`:"shift"} for ${s.getName(f)} @ ${i}${b==e?"":", split"})`),v)return!0;b.pos>i?n.push(b):r.push(b)}return!1}advanceFully(e,n){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return NR(e,n),!0}}runRecovery(e,n,r){let i=null,s=!1;for(let o=0;o<e.length;o++){let a=e[o],l=n[o<<1],u=n[(o<<1)+1],c=oa?this.stackID(a)+" -> ":"";if(a.deadEnd&&(s||(s=!0,a.restart(),oa&&console.log(c+this.stackID(a)+" (restarted)"),this.advanceFully(a,r))))continue;let f=a.split(),p=c;for(let v=0;f.forceReduce()&&v<10&&(oa&&console.log(p+this.stackID(f)+" (via force-reduce)"),!this.advanceFully(f,r));v++)oa&&(p=this.stackID(f)+" -> ");for(let v of a.recoverByInsert(l))oa&&console.log(c+this.stackID(v)+" (via recover-insert)"),this.advanceFully(v,r);this.stream.end>a.pos?(u==a.pos&&(u++,l=0),a.recoverByDelete(l,u),oa&&console.log(c+this.stackID(a)+` (via recover-delete ${this.parser.getName(l)})`),NR(a,r)):(!i||i.score<a.score)&&(i=a)}return i}stackToTree(e){return e.close(),Jr.build({buffer:c1.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let n=(fE||(fE=new WeakMap)).get(e);return n||fE.set(e,n=String.fromCodePoint(this.nextStackID++)),n+e}}function NR(t,e){for(let n=0;n<e.length;n++){let r=e[n];if(r.pos==t.pos&&r.sameState(t)){e[n].score<t.score&&(e[n]=t);return}}e.push(t)}class fwe{constructor(e,n,r){this.source=e,this.flags=n,this.disabled=r}allows(e){return!this.disabled||this.disabled[e]==0}}class f1 extends _4{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let n=e.nodeNames.split(" ");this.minRepeatTerm=n.length;for(let a=0;a<e.repeatNodeCount;a++)n.push("");let r=Object.keys(e.topRules).map(a=>e.topRules[a][1]),i=[];for(let a=0;a<n.length;a++)i.push([]);function s(a,l,u){i[a].push([l,l.deserialize(String(u))])}if(e.nodeProps)for(let a of e.nodeProps){let l=a[0];typeof l=="string"&&(l=cn[l]);for(let u=1;u<a.length;){let c=a[u++];if(c>=0)s(c,l,a[u++]);else{let f=a[u+-c];for(let p=-c;p>0;p--)s(a[u++],l,f);u++}}}this.nodeSet=new Ik(n.map((a,l)=>Ws.define({name:l>=this.minRepeatTerm?void 0:a,id:l,props:i[l],top:r.indexOf(l)>-1,error:l==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(l)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=x4;let o=xy(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let a=0;a<this.specializerSpecs.length;a++)this.specialized[a]=this.specializerSpecs[a].term;this.specializers=this.specializerSpecs.map(IR),this.states=xy(e.states,Uint32Array),this.data=xy(e.stateData),this.goto=xy(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(a=>typeof a=="number"?new hd(o,a):a),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,n,r){let i=new cwe(this,e,n,r);for(let s of this.wrappers)i=s(i,e,n,r);return i}getGoto(e,n,r=!1){let i=this.goto;if(n>=i[0])return-1;for(let s=i[n+1];;){let o=i[s++],a=o&1,l=i[s++];if(a&&r)return l;for(let u=s+(o>>1);s<u;s++)if(i[s]==e)return l;if(a)return-1}}hasAction(e,n){let r=this.data;for(let i=0;i<2;i++)for(let s=this.stateSlot(e,i?2:1),o;;s+=3){if((o=r[s])==65535)if(r[s+1]==1)o=r[s=Il(r,s+2)];else{if(r[s+1]==2)return Il(r,s+2);break}if(o==n||o==0)return Il(r,s+1)}return 0}stateSlot(e,n){return this.states[e*6+n]}stateFlag(e,n){return(this.stateSlot(e,0)&n)>0}validAction(e,n){if(n==this.stateSlot(e,4))return!0;for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=Il(this.data,r+2);else return!1;if(n==Il(this.data,r+1))return!0}}nextStates(e){let n=[];for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=Il(this.data,r+2);else break;if(!(this.data[r+2]&1)){let i=this.data[r+1];n.some((s,o)=>o&1&&s==i)||n.push(this.data[r],i)}}return n}configure(e){let n=Object.assign(Object.create(f1.prototype),this);if(e.props&&(n.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw new RangeError(`Invalid top rule name ${e.top}`);n.top=r}return e.tokenizers&&(n.tokenizers=this.tokenizers.map(r=>{let i=e.tokenizers.find(s=>s.from==r);return i?i.to:r})),e.specializers&&(n.specializers=this.specializers.slice(),n.specializerSpecs=this.specializerSpecs.map((r,i)=>{let s=e.specializers.find(a=>a.from==r.external);if(!s)return r;let o=Object.assign(Object.assign({},r),{external:s.to});return n.specializers[i]=IR(o),o})),e.contextTracker&&(n.context=e.contextTracker),e.dialect&&(n.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(n.strict=e.strict),e.wrap&&(n.wrappers=n.wrappers.concat(e.wrap)),e.bufferLength!=null&&(n.bufferLength=e.bufferLength),n}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let n=this.dynamicPrecedences;return n==null?0:n[e]||0}parseDialect(e){let n=Object.keys(this.dialects),r=n.map(()=>!1);if(e)for(let s of e.split(" ")){let o=n.indexOf(s);o>=0&&(r[o]=!0)}let i=null;for(let s=0;s<n.length;s++)if(!r[s])for(let o=this.dialects[n[s]],a;(a=this.data[o++])!=65535;)(i||(i=new Uint8Array(this.maxTerm+1)))[a]=1;return new fwe(e,r,i)}static deserialize(e){return new f1(e)}}function Il(t,e){return t[e]|t[e+1]<<16}function hwe(t){let e=null;for(let n of t){let r=n.p.stoppedAt;(n.pos==n.p.stream.end||r!=null&&n.pos>r)&&n.p.parser.stateFlag(n.state,2)&&(!e||e.score<n.score)&&(e=n)}return e}function IR(t){if(t.external){let e=t.extend?1:0;return(n,r)=>t.external(n,r)<<1|e}return t.get}const dwe=A4({String:ze.string,Number:ze.number,"True False":ze.bool,PropertyName:ze.propertyName,Null:ze.null,",":ze.separator,"[ ]":ze.squareBracket,"{ }":ze.brace}),pwe=f1.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#CjOOQO'#Cp'#CpQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CrOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59U,59UO!iQPO,59UOVQPO,59QOqQPO'#CkO!nQPO,59^OOQO1G.k1G.kOVQPO'#ClO!vQPO,59aOOQO1G.p1G.pOOQO1G.l1G.lOOQO,59V,59VOOQO-E6i-E6iOOQO,59W,59WOOQO-E6j-E6j",stateData:"#O~OcOS~OQSORSOSSOTSOWQO]ROePO~OVXOeUO~O[[O~PVOg^O~Oh_OVfX~OVaO~OhbO[iX~O[dO~Oh_OVfa~OhbO[ia~O",goto:"!kjPPPPPPkPPkqwPPk{!RPPP!XP!ePP!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:" JsonText True False Null Number String } { Object Property PropertyName ] [ Array",maxTerm:25,nodeProps:[["openedBy",7,"{",12,"["],["closedBy",8,"}",13,"]"]],propSources:[dwe],skippedNodes:[0],repeatNodeCount:2,tokenData:"(p~RaXY!WYZ!W]^!Wpq!Wrs!]|}$i}!O$n!Q!R$w!R![&V![!]&h!}#O&m#P#Q&r#Y#Z&w#b#c'f#h#i'}#o#p(f#q#r(k~!]Oc~~!`Upq!]qr!]rs!rs#O!]#O#P!w#P~!]~!wOe~~!zXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#g~#jR!Q![#s!c!i#s#T#Z#s~#vR!Q![$P!c!i$P#T#Z$P~$SR!Q![$]!c!i$]#T#Z$]~$`R!Q![!]!c!i!]#T#Z!]~$nOh~~$qQ!Q!R$w!R![&V~$|RT~!O!P%V!g!h%k#X#Y%k~%YP!Q![%]~%bRT~!Q![%]!g!h%k#X#Y%k~%nR{|%w}!O%w!Q![%}~%zP!Q![%}~&SPT~!Q![%}~&[ST~!O!P%V!Q![&V!g!h%k#X#Y%k~&mOg~~&rO]~~&wO[~~&zP#T#U&}~'QP#`#a'T~'WP#g#h'Z~'^P#X#Y'a~'fOR~~'iP#i#j'l~'oP#`#a'r~'uP#`#a'x~'}OS~~(QP#f#g(T~(WP#i#j(Z~(^P#X#Y(a~(fOQ~~(kOW~~(pOV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),gwe=()=>t=>{try{JSON.parse(t.state.doc.toString())}catch(e){if(!(e instanceof SyntaxError))throw e;const n=mwe(e,t.state.doc);return[{from:n,message:e.message,severity:"error",to:n}]}return[]};function mwe(t,e){let n;return(n=t.message.match(/at position (\d+)/))?Math.min(+n[1],e.length):(n=t.message.match(/at line (\d+) column (\d+)/))?Math.min(e.line(+n[1]).from+ +n[2]-1,e.length):0}const Qj=xb.define({name:"json",parser:pwe.configure({props:[O4.add({Object:kN({except:/^\s*\}/}),Array:kN({except:/^\s*\]/})}),M4.add({"Object Array":Tee})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function ez(){return new yee(Qj)}function vwe(t){let e=null;try{e=JSON.parse(t.doc.toString())}catch{}const n=Z1e(t,"json4");return{data:e,pointers:n}}const ywe=t=>{var e,n,r;return!((e=t==null?void 0:t.data)===null||e===void 0)&&e.pointer&&((n=t==null?void 0:t.data)===null||n===void 0?void 0:n.pointer)!=="#"?t.data.pointer.slice(1):!((r=t==null?void 0:t.data)===null||r===void 0)&&r.property?`/${t.data.property}`:""};function bwe(t,e){const n=new wwe(t,e);return function(i){return n.doValidation(i)}}class wwe{constructor(e,n){this.rewriteError=r=>{var i,s,o,a,l,u;return r.code==="one-of-error"?`Expected one of ${l1((i=r==null?void 0:r.data)===null||i===void 0?void 0:i.errors,f=>f.data.expected)}`:r.code==="type-error"?`Expected \`${!((s=r==null?void 0:r.data)===null||s===void 0)&&s.expected&&Array.isArray((o=r==null?void 0:r.data)===null||o===void 0?void 0:o.expected)?l1((a=r==null?void 0:r.data)===null||a===void 0?void 0:a.expected):(l=r==null?void 0:r.data)===null||l===void 0?void 0:l.expected}\` but received \`${(u=r==null?void 0:r.data)===null||u===void 0?void 0:u.received}\``:r.message.replaceAll("#/","").replaceAll("/",".")},this.options=Object.assign({jsonParser:vwe},n),this.schema=new Kj(e)}get schemaTitle(){var e;return(e=this.schema.getSchema().title)!==null&&e!==void 0?e:"json-schema"}doValidation(e){if(!this.schema)return[];const n=e.state.doc.toString();if(!n||n.trim().length<3)return[];const r=this.options.jsonParser(e.state);let i=[];try{i=this.schema.validate(r.data)}catch{}return i.length?i.reduce((s,o)=>{const a=ywe(o),l=r.pointers.get(a);if(l){const u=o.name==="NoAdditionalPropertiesError";s.push({from:u?l.keyFrom:l.valueFrom,to:u?l.keyTo:l.valueTo,message:this.rewriteError(o),severity:"error",source:this.schemaTitle})}return s},[]):[]}}function Gc(t,e,n=[]){const r=document.createElement(t);return Object.entries(e).forEach(([i,s])=>{if(i==="text"){r.innerText=s;return}r.setAttribute(i,s)}),n.forEach(i=>r.appendChild(i)),r}function xwe(t,e){const n=new Swe(t,e);return async function(i,s,o){return n.doHover(i,s,o)}}function hE(t,e,n){return`${e}: ${l1(t[e].map(r=>{var i;return(i=r.type)!==null&&i!==void 0?i:n.resolveRef(r).type}))}`}class Swe{constructor(e,n){this.opts=n,this.schema=new Kj(e),this.opts=Object.assign({parser:JSON.parse},this.opts)}getDataForCursor(e,n,r){const i=Xj(e.state,n,r);let s;try{s=this.opts.parser(e.state.doc.toString())}catch{}if(!i)return null;let o=kA(this.schema,i,s);return o.type==="error"&&s!==void 0&&(o=kA(this.schema,i,void 0),o.type==="error")?{pointer:i}:{schema:o,pointer:i}}formatMessage(e){const{message:n,typeInfo:r}=e;return n?Gc("div",{class:"cm6-json-schema-hover"},[Gc("div",{class:"cm6-json-schema-hover--description",text:n}),Gc("div",{class:"cm6-json-schema-hover--code-wrapper"},[Gc("code",{class:"cm6-json-schema-hover--code",text:r})])]):Gc("div",{class:"cm6-json-schema-hover"},[Gc("div",{class:"cm6-json-schema-hover--code-wrapper"},[Gc("code",{class:"cm6-json-schema-hover--code",text:r})])])}getHoverTexts(e,n){let r=null,i=null;const{schema:s}=e;return s.oneOf&&(r=hE(s,"oneOf",n)),s.anyOf&&(r=hE(s,"anyOf",n)),s.allOf&&(r=hE(s,"allOf",n)),s.type&&(r=Array.isArray(s.type)?l1(s.type):s.type),s.description&&(i=s.description),{message:i,typeInfo:r}}async doHover(e,n,r){var i,s,o,a;const l=n,u=n;try{const c=this.getDataForCursor(e,n,r);if(!(c!=null&&c.schema))return null;const p=((s=(i=this.opts)===null||i===void 0?void 0:i.getHoverTexts)!==null&&s!==void 0?s:this.getHoverTexts)(c,this.schema),b=((a=(o=this.opts)===null||o===void 0?void 0:o.formatHover)!==null&&a!==void 0?a:this.formatMessage)(p);return{pos:l,end:u,arrow:!0,above:!0,create:E=>({dom:b})}}catch{return null}}}function tz(t){return[ez(),QN(gwe()),QN(bwe(t)),Qj.data.of({autocomplete:rwe(t)}),m4(xwe(t))]}const Ewe="#e5c07b",$R="#e06c75",_we="#56b6c2",Awe="#ffffff",kwe="#abb2bf",RR="#7d8799",Cwe="#61afef",Pwe="#98c379",LR="#d19a66",Owe="#c678dd",nz=Hm.define([{tag:ze.keyword,color:Owe},{tag:[ze.name,ze.deleted,ze.character,ze.propertyName,ze.macroName],color:$R},{tag:[ze.function(ze.variableName),ze.labelName],color:Cwe},{tag:[ze.color,ze.constant(ze.name),ze.standard(ze.name)],color:LR},{tag:[ze.definition(ze.name),ze.separator],color:kwe},{tag:[ze.typeName,ze.className,ze.number,ze.changed,ze.annotation,ze.modifier,ze.self,ze.namespace],color:Ewe},{tag:[ze.operator,ze.operatorKeyword,ze.url,ze.escape,ze.regexp,ze.link,ze.special(ze.string)],color:_we},{tag:[ze.meta,ze.comment],color:RR},{tag:ze.strong,fontWeight:"bold"},{tag:ze.emphasis,fontStyle:"italic"},{tag:ze.strikethrough,textDecoration:"line-through"},{tag:ze.link,color:RR,textDecoration:"underline"},{tag:ze.heading,fontWeight:"bold",color:$R},{tag:[ze.atom,ze.bool,ze.special(ze.variableName)],color:LR},{tag:[ze.processingInstruction,ze.string,ze.inserted],color:Pwe},{tag:ze.invalid,color:Awe}]),Twe=fi({props:{helpText:String}}),Mwe={class:"dropdown is-hoverable is-left"},Nwe={class:"dropdown-trigger"},Iwe={class:"icon is-small is-clickable"},$we={class:"dropdown-menu"},Rwe={class:"dropdown-content"},Lwe={class:"dropdown-item"},Dwe=["innerHTML"];function Fwe(t,e,n,r,i,s){const o=Fn("font-awesome-icon");return Ze(),rt("div",Mwe,[oe("div",Nwe,[oe("span",Iwe,[lt(o,{icon:"fas fa-info-circle"})])]),oe("div",$we,[oe("div",Rwe,[oe("div",Lwe,[oe("p",{class:"is-size-7 has-text-weight-normal",innerHTML:t.helpText},null,8,Dwe)])])])])}const sh=wo(Twe,[["render",Fwe]]),Vwe=fi({props:{schema:{}},components:{Codemirror:Xf,HelpButton:sh},setup(t){return{extensions:[B1({class:"CodeMirror-lint-markers"}),Bk(),Jf,eC(),Hk(),Nk(),tV(),gt.lineWrapping,un.tabSize.of(2),Vk(nz),tz(t.schema)]}},data(){return{}},computed:{...Mi(zC)},watch:{"placesStore.markingString"(t){this.placesStore.savePlaceMarking(t)}},methods:{}}),Bwe={class:"block"},jwe={class:"field"},zwe={class:"label is-small icon-text"},Hwe={class:"control is-small jsn-code"},Uwe={key:0,class:"help"},qwe={key:1,class:"help is-danger"};function Wwe(t,e,n,r,i,s){const o=Fn("HelpButton"),a=Fn("Codemirror");return Ze(),rt("div",Bwe,[oe("div",jwe,[oe("label",zwe,[Kr("Place marking "),lt(o,{"help-text":`
              Edit the JSON array to insert or remove data. 
              <a href='https://www.json.org/json-en.html' target='_blank'
                >Click here</a> for more information about JSON.
            `})]),oe("div",Hwe,[lt(a,{modelValue:t.placesStore.markingString,"onUpdate:modelValue":e[0]||(e[0]=l=>t.placesStore.markingString=l),placeholder:"Edit place data.",autofocus:!0,"indent-with-tab":!0,"tab-size":2,style:{height:"400px"},extensions:t.extensions},null,8,["modelValue","extensions"])]),t.placesStore.place.hasError?Tt("",!0):(Ze(),rt("p",Uwe,Cn(t.placesStore.place.errorMessage)+"  ",1)),t.placesStore.place.hasError&&t.placesStore.place.errorType==="data"?(Ze(),rt("p",qwe,Cn(t.placesStore.place.errorMessage),1)):Tt("",!0)])])}const Gwe=wo(Vwe,[["render",Wwe]]);var rz={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.jsonSchema=void 0,t.jsonSchema={$schema:"https://meta.json-schema.tools/",$id:"https://meta.json-schema.tools/",title:"JSONSchema",default:{},oneOf:[{$ref:"#/definitions/JSONSchemaObject"},{$ref:"#/definitions/JSONSchemaBoolean"}],definitions:{$id:{title:"$id",type:"string",format:"uri-reference"},$schema:{title:"$schema",type:"string",format:"uri"},$ref:{title:"$ref",type:"string",format:"uri-reference"},$comment:{title:"$comment",type:"string"},title:{title:"title",type:"string"},description:{title:"description",type:"string"},AlwaysTrue:!0,readOnly:{title:"readOnly",type:"boolean",default:!1},examples:{title:"examples",type:"array",items:!0},multipleOf:{title:"multipleOf",type:"number",exclusiveMinimum:0},maximum:{title:"maximum",type:"number"},exclusiveMaximum:{title:"exclusiveMaximum",type:"number"},minimum:{title:"minimum",type:"number"},exclusiveMinimum:{title:"exclusiveMinimum",type:"number"},nonNegativeInteger:{title:"nonNegativeInteger",type:"integer",minimum:0},nonNegativeIntegerDefaultZero:{title:"nonNegativeIntegerDefaultZero",type:"integer",minimum:0,default:0},pattern:{title:"pattern",type:"string",format:"regex"},JSONSchema:{$ref:"#",isCycle:!0},schemaArray:{title:"schemaArray",type:"array",minItems:1,items:{$ref:"#/definitions/JSONSchema",isCycle:!0}},items:{title:"items",anyOf:[{$ref:"#/definitions/JSONSchema",isCycle:!0},{$ref:"#/definitions/schemaArray"}],default:!0},uniqueItems:{title:"uniqueItems",type:"boolean",default:!1},string_doaGddGA:{type:"string",title:"string_doaGddGA"},stringArray:{title:"stringArray",type:"array",items:{$ref:"#/definitions/string_doaGddGA"},uniqueItems:!0,default:[]},definitions:{title:"definitions",type:"object",additionalProperties:{$ref:"#/definitions/JSONSchema",isCycle:!0},default:{}},properties:{title:"properties",type:"object",additionalProperties:{$ref:"#/definitions/JSONSchema",isCycle:!0},default:{}},patternProperties:{title:"patternProperties",type:"object",additionalProperties:{$ref:"#/definitions/JSONSchema",isCycle:!0},propertyNames:{title:"propertyNames",format:"regex"},default:{}},dependenciesSet:{title:"dependenciesSet",anyOf:[{$ref:"#/definitions/JSONSchema",isCycle:!0},{$ref:"#/definitions/stringArray"}]},dependencies:{title:"dependencies",type:"object",additionalProperties:{$ref:"#/definitions/dependenciesSet"}},enum:{title:"enum",type:"array",items:!0,minItems:1,uniqueItems:!0},simpleTypes:{title:"simpleTypes",type:"string",enum:["array","boolean","integer","null","number","object","string"]},arrayOfSimpleTypes:{title:"arrayOfSimpleTypes",type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0},type:{title:"type",anyOf:[{$ref:"#/definitions/simpleTypes"},{$ref:"#/definitions/arrayOfSimpleTypes"}]},format:{title:"format",type:"string"},contentMediaType:{title:"contentMediaType",type:"string"},contentEncoding:{title:"contentEncoding",type:"string"},JSONSchemaObject:{title:"JSONSchemaObject",type:"object",properties:{$id:{$ref:"#/definitions/$id"},$schema:{$ref:"#/definitions/$schema"},$ref:{$ref:"#/definitions/$ref"},$comment:{$ref:"#/definitions/$comment"},title:{$ref:"#/definitions/title"},description:{$ref:"#/definitions/description"},default:!0,readOnly:{$ref:"#/definitions/readOnly"},examples:{$ref:"#/definitions/examples"},multipleOf:{$ref:"#/definitions/multipleOf"},maximum:{$ref:"#/definitions/maximum"},exclusiveMaximum:{$ref:"#/definitions/exclusiveMaximum"},minimum:{$ref:"#/definitions/minimum"},exclusiveMinimum:{$ref:"#/definitions/exclusiveMinimum"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefaultZero"},pattern:{$ref:"#/definitions/pattern"},additionalItems:{$ref:"#/definitions/JSONSchema",isCycle:!0},items:{$ref:"#/definitions/items"},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefaultZero"},uniqueItems:{$ref:"#/definitions/uniqueItems"},contains:{$ref:"#/definitions/JSONSchema",isCycle:!0},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefaultZero"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#/definitions/JSONSchema",isCycle:!0},definitions:{$ref:"#/definitions/definitions"},properties:{$ref:"#/definitions/properties"},patternProperties:{$ref:"#/definitions/patternProperties"},dependencies:{$ref:"#/definitions/dependencies"},propertyNames:{$ref:"#/definitions/JSONSchema",isCycle:!0},const:!0,enum:{$ref:"#/definitions/enum"},type:{$ref:"#/definitions/type"},format:{$ref:"#/definitions/format"},contentMediaType:{$ref:"#/definitions/contentMediaType"},contentEncoding:{$ref:"#/definitions/contentEncoding"},if:{$ref:"#/definitions/JSONSchema",isCycle:!0},then:{$ref:"#/definitions/JSONSchema",isCycle:!0},else:{$ref:"#/definitions/JSONSchema",isCycle:!0},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#/definitions/JSONSchema",isCycle:!0}}},JSONSchemaBoolean:{title:"JSONSchemaBoolean",description:"Always valid if true. Never valid if false. Is constant.",type:"boolean"}},isCycle:!0},t.default=t.jsonSchema})(rz);const Kwe=ka(rz),Ywe=fi({components:{Codemirror:Xf,DataEditor:Gwe,HelpButton:sh},setup(t){return{extensions:[B1({class:"CodeMirror-lint-markers"}),Bk(),Jf,eC(),Hk(),UF(),Nk(),tV(),gt.lineWrapping,un.tabSize.of(2),Vk(nz),tz(Kwe)]}},data(){return{shownTab:"data",showNameInput:!1}},computed:{...Mi(au),...Mi(zC)},created(){this.placesStore.loadPlace(this.uiStateStore.lastSelectedID)},watch:{"placesStore.schemaString"(t){this.placesStore.savePlaceSchema(t)}},methods:{close(){this.uiStateStore.showModal="none"},onCancelNameEdit(){this.placesStore.resetName(),this.showNameInput=!1},onNameSave(){this.placesStore.saveName(),this.showNameInput=!1},onAddTokenClick(){this.placesStore.addToken()},showTab(t){this.shownTab=t}}});const vO=t=>(Wf("data-v-7c8a0c06"),t=t(),Gf(),t),Jwe={class:"modal is-active"},Xwe=vO(()=>oe("div",{class:"modal-background"},null,-1)),Zwe={class:"modal-card"},Qwe={class:"modal-card-head scoped-modal-header"},exe=vO(()=>oe("span",{class:"has-text-weight-bold"},"Place:",-1)),txe={class:"ml-1"},nxe={class:"scoped-edit-button icon has-text-grey-light"},rxe={key:1,class:"level"},ixe={class:"icon is-small has-text-grey"},sxe={class:"icon is-small"},oxe=vO(()=>oe("p",{class:"modal-card-title"},null,-1)),axe={class:"tabs is-left is-small has-background-light mb-0"},lxe={class:"modal-card-body"},uxe={key:1,class:"block"},cxe={class:"field"},fxe={class:"label is-small icon-text"},hxe={class:"control is-small jsn-code"},dxe={key:0,class:"help"},pxe={key:1,class:"help is-danger"},gxe={class:"modal-card-foot has-background-white scoped-modal-footer"};function mxe(t,e,n,r,i,s){const o=Fn("font-awesome-icon"),a=Fn("DataEditor"),l=Fn("HelpButton"),u=Fn("Codemirror");return Ze(),rt("div",Jwe,[Xwe,oe("div",Zwe,[oe("header",Qwe,[exe,oe("span",txe,[t.showNameInput?Tt("",!0):(Ze(),rt("span",{key:0,class:"is-ghost icon-text has-text-weight-bold scoped-modal-title is-clickable",onClick:e[0]||(e[0]=c=>t.showNameInput=!0)},[oe("span",null,Cn(t.placesStore.place.name),1),oe("span",nxe,[lt(o,{icon:"fas fa-pen"})])])),t.showNameInput?(Ze(),rt("span",rxe,[eu(oe("input",{style:{width:"100px"},class:"input is-small level-item","onUpdate:modelValue":e[1]||(e[1]=c=>t.placesStore.place.name=c)},null,512),[[sc,t.placesStore.place.name]]),oe("button",{class:"ml-1 button is-small level-item",onClick:e[2]||(e[2]=(...c)=>t.onCancelNameEdit&&t.onCancelNameEdit(...c))},[oe("span",ixe,[lt(o,{icon:"fas fa-xmark"})])]),oe("button",{onClick:e[3]||(e[3]=(...c)=>t.onNameSave&&t.onNameSave(...c)),class:"ml-1 button is-small level-item is-primary"},[oe("span",sxe,[lt(o,{icon:"fas fa-check"})])])])):Tt("",!0)]),oxe,oe("button",{class:"delete","aria-label":"close",onClick:e[4]||(e[4]=(...c)=>t.close&&t.close(...c))})]),oe("div",axe,[oe("ul",null,[oe("li",{class:xa({"is-active":t.shownTab==="data"})},[oe("a",{onClick:e[5]||(e[5]=()=>{t.showTab("data")})},"Data")],2),oe("li",{class:xa({"is-active":t.shownTab==="schema"})},[oe("a",{onClick:e[6]||(e[6]=()=>{t.showTab("schema")})},"Schema")],2)])]),oe("section",lxe,[t.shownTab==="data"?(Ze(),oi(a,{key:0,schema:t.placesStore.place.schema},null,8,["schema"])):Tt("",!0),t.shownTab==="schema"?(Ze(),rt("div",uxe,[oe("div",cxe,[oe("label",fxe,[Kr("Token schema "),lt(l,{"help-text":`
                          Describe the structure of data tokens stored in the place with 
                          <a href='https://json-schema.org/' target='_blank'>JSON Schema</a>.
                        `})]),oe("div",hxe,[lt(u,{modelValue:t.placesStore.schemaString,"onUpdate:modelValue":e[7]||(e[7]=c=>t.placesStore.schemaString=c),placeholder:"Edit place schema.",autofocus:!0,"indent-with-tab":!0,"tab-size":2,style:{height:"400px"},extensions:t.extensions},null,8,["modelValue","extensions"])]),t.placesStore.place.hasError?Tt("",!0):(Ze(),rt("p",dxe,Cn(t.placesStore.place.errorMessage),1)),t.placesStore.place.hasError&&t.placesStore.place.errorType==="schema"?(Ze(),rt("p",pxe,Cn(t.placesStore.place.errorMessage),1)):Tt("",!0)])])):Tt("",!0)]),oe("footer",gxe,[t.shownTab==="data"?(Ze(),rt("button",{key:0,class:"button is-pulled-right is-primary is-small",style:{"margin-left":"auto"},onClick:e[8]||(e[8]=(...c)=>t.onAddTokenClick&&t.onAddTokenClick(...c))},"Add token")):Tt("",!0)])])])}const vxe=wo(Ywe,[["render",mxe],["__scopeId","data-v-7c8a0c06"]]);var iz={exports:{}};const yxe=hV(lX);(function(t,e){(function(n,r){t.exports=r(yxe)})(si,function(n){return function(){var r={789:function(a){a.exports=n}},i={};function s(a){var l=i[a];if(l!==void 0)return l.exports;var u=i[a]={exports:{}};return r[a](u,u.exports,s),u.exports}s.d=function(a,l){for(var u in l)s.o(l,u)&&!s.o(a,u)&&Object.defineProperty(a,u,{enumerable:!0,get:l[u]})},s.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},s.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var o={};return function(){function a(R,W){(W==null||W>R.length)&&(W=R.length);for(var G=0,Z=new Array(W);G<W;G++)Z[G]=R[G];return Z}function l(R,W){if(R){if(typeof R=="string")return a(R,W);var G=Object.prototype.toString.call(R).slice(8,-1);return G==="Object"&&R.constructor&&(G=R.constructor.name),G==="Map"||G==="Set"?Array.from(R):G==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(G)?a(R,W):void 0}}function u(R){return function(W){if(Array.isArray(W))return a(W)}(R)||function(W){if(typeof Symbol<"u"&&W[Symbol.iterator]!=null||W["@@iterator"]!=null)return Array.from(W)}(R)||l(R)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function c(R,W,G){return W in R?Object.defineProperty(R,W,{value:G,enumerable:!0,configurable:!0,writable:!0}):R[W]=G,R}s.r(o),s.d(o,{default:function(){return q}});var f=s(789),p=(0,f.defineComponent)({props:{data:{required:!0,type:String},onClick:Function},render:function(){var R=this.data,W=this.onClick;return(0,f.createVNode)("span",{class:"vjs-tree-brackets",onClick:W},[R])}}),v=(0,f.defineComponent)({emits:["change","update:modelValue"],props:{checked:{type:Boolean,default:!1},isMultiple:Boolean,onChange:Function},setup:function(R,W){var G=W.emit;return{uiType:(0,f.computed)(function(){return R.isMultiple?"checkbox":"radio"}),model:(0,f.computed)({get:function(){return R.checked},set:function(Z){return G("update:modelValue",Z)}})}},render:function(){var R=this.uiType,W=this.model,G=this.$emit;return(0,f.createVNode)("label",{class:["vjs-check-controller",W?"is-checked":""],onClick:function(Z){return Z.stopPropagation()}},[(0,f.createVNode)("span",{class:"vjs-check-controller-inner is-".concat(R)},null),(0,f.createVNode)("input",{checked:W,class:"vjs-check-controller-original is-".concat(R),type:R,onChange:function(){return G("change",W)}},null)])}}),b=(0,f.defineComponent)({props:{nodeType:{required:!0,type:String},onClick:Function},render:function(){var R=this.nodeType,W=this.onClick,G=R==="objectStart"||R==="arrayStart";return G||R==="objectCollapsed"||R==="arrayCollapsed"?(0,f.createVNode)("span",{class:"vjs-carets vjs-carets-".concat(G?"open":"close"),onClick:W},[(0,f.createVNode)("svg",{viewBox:"0 0 1024 1024",focusable:"false","data-icon":"caret-down",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},[(0,f.createVNode)("path",{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"},null)])]):null}});function E(R){return E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W},E(R)}function P(R){return Object.prototype.toString.call(R).slice(8,-1).toLowerCase()}function S(R){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"root",G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,Z=arguments.length>3?arguments[3]:void 0,de=Z||{},be=de.key,_e=de.index,Te=de.type,Le=Te===void 0?"content":Te,Ee=de.showComma,re=Ee!==void 0&&Ee,ne=de.length,ee=ne===void 0?1:ne,F=P(R);if(F==="array"){var U=A(R.map(function(He,Be,Pe){return S(He,"".concat(W,"[").concat(Be,"]"),G+1,{index:Be,showComma:Be!==Pe.length-1,length:ee,type:Le})}));return[S("[",W,G,{showComma:!1,key:be,length:R.length,type:"arrayStart"})[0]].concat(U,S("]",W,G,{showComma:re,length:R.length,type:"arrayEnd"})[0])}if(F==="object"){var ye=Object.keys(R),Fe=A(ye.map(function(He,Be,Pe){return S(R[He],/^[a-zA-Z_]\w*$/.test(He)?"".concat(W,".").concat(He):"".concat(W,'["').concat(He,'"]'),G+1,{key:He,showComma:Be!==Pe.length-1,length:ee,type:Le})}));return[S("{",W,G,{showComma:!1,key:be,index:_e,length:ye.length,type:"objectStart"})[0]].concat(Fe,S("}",W,G,{showComma:re,length:ye.length,type:"objectEnd"})[0])}return[{content:R,level:G,key:be,index:_e,path:W,showComma:re,length:ee,type:Le}]}function A(R){if(typeof Array.prototype.flat=="function")return R.flat();for(var W=u(R),G=[];W.length;){var Z=W.shift();Array.isArray(Z)?W.unshift.apply(W,u(Z)):G.push(Z)}return G}function I(R){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new WeakMap;if(R==null)return R;if(R instanceof Date)return new Date(R);if(R instanceof RegExp)return new RegExp(R);if(E(R)!=="object")return R;if(W.get(R))return W.get(R);if(Array.isArray(R)){var G=R.map(function(be){return I(be,W)});return W.set(R,G),G}var Z={};for(var de in R)Z[de]=I(R[de],W);return W.set(R,Z),Z}function N(R,W){var G=Object.keys(R);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(R);W&&(Z=Z.filter(function(de){return Object.getOwnPropertyDescriptor(R,de).enumerable})),G.push.apply(G,Z)}return G}function x(R){for(var W=1;W<arguments.length;W++){var G=arguments[W]!=null?arguments[W]:{};W%2?N(Object(G),!0).forEach(function(Z){c(R,Z,G[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(G)):N(Object(G)).forEach(function(Z){Object.defineProperty(R,Z,Object.getOwnPropertyDescriptor(G,Z))})}return R}var g={showLength:{type:Boolean,default:!1},showDoubleQuotes:{type:Boolean,default:!0},renderNodeKey:Function,renderNodeValue:Function,selectableType:String,showSelectController:{type:Boolean,default:!1},showLine:{type:Boolean,default:!0},showLineNumber:{type:Boolean,default:!1},selectOnClickNode:{type:Boolean,default:!0},nodeSelectable:{type:Function,default:function(){return!0}},highlightSelectedNode:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!1},showKeyValueSpace:{type:Boolean,default:!0},editable:{type:Boolean,default:!1},editableTrigger:{type:String,default:"click"},onNodeClick:{type:Function},onBracketsClick:{type:Function},onIconClick:{type:Function},onValueChange:{type:Function}},_=(0,f.defineComponent)({name:"TreeNode",props:x(x({},g),{},{node:{type:Object,required:!0},collapsed:Boolean,checked:Boolean,style:Object,onSelectedChange:{type:Function}}),emits:["nodeClick","bracketsClick","iconClick","selectedChange","valueChange"],setup:function(R,W){var G=W.emit,Z=(0,f.computed)(function(){return P(R.node.content)}),de=(0,f.computed)(function(){return"vjs-value vjs-value-".concat(Z.value)}),be=(0,f.computed)(function(){return R.showDoubleQuotes?'"'.concat(R.node.key,'"'):R.node.key}),_e=(0,f.computed)(function(){return R.selectableType==="multiple"}),Te=(0,f.computed)(function(){return R.selectableType==="single"}),Le=(0,f.computed)(function(){return R.nodeSelectable(R.node)&&(_e.value||Te.value)}),Ee=(0,f.reactive)({editing:!1}),re=function(Be){var Pe,Ve,z=(Ve=(Pe=Be.target)===null||Pe===void 0?void 0:Pe.value)==="null"?null:Ve==="undefined"?void 0:Ve==="true"||Ve!=="false"&&(Ve[0]+Ve[Ve.length-1]==='""'||Ve[0]+Ve[Ve.length-1]==="''"?Ve.slice(1,-1):typeof Number(Ve)=="number"&&!isNaN(Number(Ve))||Ve==="NaN"?Number(Ve):Ve);G("valueChange",z,R.node.path)},ne=(0,f.computed)(function(){var Be,Pe=(Be=R.node)===null||Be===void 0?void 0:Be.content;return Pe===null?Pe="null":Pe===void 0&&(Pe="undefined"),Z.value==="string"?'"'.concat(Pe,'"'):Pe+""}),ee=function(){var Be=R.renderNodeValue;return Be?Be({node:R.node,defaultValue:ne.value}):ne.value},F=function(){G("bracketsClick",!R.collapsed,R.node.path)},U=function(){G("iconClick",!R.collapsed,R.node.path)},ye=function(){G("selectedChange",R.node)},Fe=function(){G("nodeClick",R.node),Le.value&&R.selectOnClickNode&&G("selectedChange",R.node)},He=function(Be){if(R.editable&&!Ee.editing){Ee.editing=!0;var Pe=function Ve(z){var K;z.target!==Be.target&&((K=z.target)===null||K===void 0?void 0:K.parentElement)!==Be.target&&(Ee.editing=!1,document.removeEventListener("click",Ve))};document.removeEventListener("click",Pe),document.addEventListener("click",Pe)}};return function(){var Be,Pe=R.node;return(0,f.createVNode)("div",{class:{"vjs-tree-node":!0,"has-selector":R.showSelectController,"has-carets":R.showIcon,"is-highlight":R.highlightSelectedNode&&R.checked},onClick:Fe,style:R.style},[R.showLineNumber&&(0,f.createVNode)("span",{class:"vjs-node-index"},[Pe.id+1]),R.showSelectController&&Le.value&&Pe.type!=="objectEnd"&&Pe.type!=="arrayEnd"&&(0,f.createVNode)(v,{isMultiple:_e.value,checked:R.checked,onChange:ye},null),(0,f.createVNode)("div",{class:"vjs-indent"},[Array.from(Array(Pe.level)).map(function(Ve,z){return(0,f.createVNode)("div",{key:z,class:{"vjs-indent-unit":!0,"has-line":R.showLine}},null)}),R.showIcon&&(0,f.createVNode)(b,{nodeType:Pe.type,onClick:U},null)]),Pe.key&&(0,f.createVNode)("span",{class:"vjs-key"},[(Be=R.renderNodeKey,Be?Be({node:R.node,defaultKey:be.value||""}):be.value),(0,f.createVNode)("span",{class:"vjs-colon"},[":".concat(R.showKeyValueSpace?" ":"")])]),(0,f.createVNode)("span",null,[Pe.type!=="content"&&Pe.content?(0,f.createVNode)(p,{data:Pe.content.toString(),onClick:F},null):(0,f.createVNode)("span",{class:de.value,onClick:!R.editable||R.editableTrigger&&R.editableTrigger!=="click"?void 0:He,onDblclick:R.editable&&R.editableTrigger==="dblclick"?He:void 0},[R.editable&&Ee.editing?(0,f.createVNode)("input",{value:ne.value,onChange:re,style:{padding:"3px 8px",border:"1px solid #eee",boxShadow:"none",boxSizing:"border-box",borderRadius:5,fontFamily:"inherit"}},null):ee()]),Pe.showComma&&(0,f.createVNode)("span",null,[","]),R.showLength&&R.collapsed&&(0,f.createVNode)("span",{class:"vjs-comment"},[(0,f.createTextVNode)(" // "),Pe.length,(0,f.createTextVNode)(" items ")])])])}}});function M(R,W){var G=Object.keys(R);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(R);W&&(Z=Z.filter(function(de){return Object.getOwnPropertyDescriptor(R,de).enumerable})),G.push.apply(G,Z)}return G}function D(R){for(var W=1;W<arguments.length;W++){var G=arguments[W]!=null?arguments[W]:{};W%2?M(Object(G),!0).forEach(function(Z){c(R,Z,G[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(G)):M(Object(G)).forEach(function(Z){Object.defineProperty(R,Z,Object.getOwnPropertyDescriptor(G,Z))})}return R}var q=(0,f.defineComponent)({name:"Tree",props:D(D({},g),{},{data:{type:[String,Number,Boolean,Array,Object],default:null},deep:{type:Number,default:1/0},pathCollapsible:{type:Function,default:function(){return!1}},rootPath:{type:String,default:"root"},virtual:{type:Boolean,default:!1},height:{type:Number,default:400},itemHeight:{type:Number,default:20},selectedValue:{type:[String,Array],default:function(){return""}},collapsedOnClickBrackets:{type:Boolean,default:!0},style:Object,onSelectedChange:{type:Function}}),slots:["renderNodeKey","renderNodeValue"],emits:["nodeClick","bracketsClick","iconClick","selectedChange","update:selectedValue","update:data"],setup:function(R,W){var G=W.emit,Z=W.slots,de=(0,f.ref)(),be=(0,f.computed)(function(){return S(R.data,R.rootPath)}),_e=function(Pe){return be.value.reduce(function(Ve,z){var K,C=z.level>=Pe,$=(K=R.pathCollapsible)===null||K===void 0?void 0:K.call(R,z);return z.type!=="objectStart"&&z.type!=="arrayStart"||!C&&!$?Ve:D(D({},Ve),{},c({},z.path,1))},{})},Te=(0,f.reactive)({translateY:0,visibleData:null,hiddenPaths:_e(R.deep)}),Le=(0,f.computed)(function(){for(var Pe=null,Ve=[],z=be.value.length,K=0;K<z;K++){var C=D(D({},be.value[K]),{},{id:K}),$=Te.hiddenPaths[C.path];if(Pe&&Pe.path===C.path){var V=Pe.type==="objectStart",Q=D(D(D({},C),Pe),{},{showComma:C.showComma,content:V?"{...}":"[...]",type:V?"objectCollapsed":"arrayCollapsed"});Pe=null,Ve.push(Q)}else{if($&&!Pe){Pe=C;continue}if(Pe)continue;Ve.push(C)}}return Ve}),Ee=(0,f.computed)(function(){var Pe=R.selectedValue;return Pe&&R.selectableType==="multiple"&&Array.isArray(Pe)?Pe:[Pe]}),re=(0,f.computed)(function(){return!R.selectableType||R.selectOnClickNode||R.showSelectController?"":"When selectableType is not null, selectOnClickNode and showSelectController cannot be false at the same time, because this will cause the selection to fail."}),ne=function(){var Pe=Le.value;if(R.virtual){var Ve,z=R.height/R.itemHeight,K=((Ve=de.value)===null||Ve===void 0?void 0:Ve.scrollTop)||0,C=Math.floor(K/R.itemHeight),$=C<0?0:C+z>Pe.length?Pe.length-z:C;$<0&&($=0);var V=$+z;Te.translateY=$*R.itemHeight,Te.visibleData=Pe.filter(function(Q,ce){return ce>=$&&ce<V})}else Te.visibleData=Pe},ee=function(){ne()},F=function(Pe){var Ve,z,K=Pe.path,C=R.selectableType;if(C==="multiple"){var $=Ee.value.findIndex(function(ue){return ue===K}),V=u(Ee.value);$!==-1?V.splice($,1):V.push(K),G("update:selectedValue",V),G("selectedChange",V,u(Ee.value))}else if(C==="single"&&Ee.value[0]!==K){var Q=(Ve=Ee.value,z=1,function(ue){if(Array.isArray(ue))return ue}(Ve)||function(ue,ke){var Ae=ue==null?null:typeof Symbol<"u"&&ue[Symbol.iterator]||ue["@@iterator"];if(Ae!=null){var tt,Je,Xe=[],Ye=!0,ft=!1;try{for(Ae=Ae.call(ue);!(Ye=(tt=Ae.next()).done)&&(Xe.push(tt.value),!ke||Xe.length!==ke);Ye=!0);}catch(Nt){ft=!0,Je=Nt}finally{try{Ye||Ae.return==null||Ae.return()}finally{if(ft)throw Je}}return Xe}}(Ve,z)||l(Ve,z)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}())[0],ce=K;G("update:selectedValue",ce),G("selectedChange",ce,Q)}},U=function(Pe){G("nodeClick",Pe)},ye=function(Pe,Ve){if(Pe)Te.hiddenPaths=D(D({},Te.hiddenPaths),{},c({},Ve,1));else{var z=D({},Te.hiddenPaths);delete z[Ve],Te.hiddenPaths=z}},Fe=function(Pe,Ve){R.collapsedOnClickBrackets&&ye(Pe,Ve),G("bracketsClick",Pe)},He=function(Pe,Ve){ye(Pe,Ve),G("iconClick",Pe)},Be=function(Pe,Ve){var z=I(R.data),K=R.rootPath;new Function("data","val","data".concat(Ve.slice(K.length),"=val"))(z,Pe),G("update:data",z)};return(0,f.watchEffect)(function(){re.value&&function(Pe){throw new Error("[VueJSONPretty] ".concat(Pe))}(re.value)}),(0,f.watchEffect)(function(){Le.value&&ne()}),(0,f.watch)(function(){return R.deep},function(Pe){Pe&&(Te.hiddenPaths=_e(Pe))}),function(){var Pe,Ve,z=(Pe=R.renderNodeKey)!==null&&Pe!==void 0?Pe:Z.renderNodeKey,K=(Ve=R.renderNodeValue)!==null&&Ve!==void 0?Ve:Z.renderNodeValue,C=Te.visibleData&&Te.visibleData.map(function($){return(0,f.createVNode)(_,{key:$.id,node:$,collapsed:!!Te.hiddenPaths[$.path],showDoubleQuotes:R.showDoubleQuotes,showLength:R.showLength,checked:Ee.value.includes($.path),selectableType:R.selectableType,showLine:R.showLine,showLineNumber:R.showLineNumber,showSelectController:R.showSelectController,selectOnClickNode:R.selectOnClickNode,nodeSelectable:R.nodeSelectable,highlightSelectedNode:R.highlightSelectedNode,editable:R.editable,editableTrigger:R.editableTrigger,showIcon:R.showIcon,showKeyValueSpace:R.showKeyValueSpace,renderNodeKey:z,renderNodeValue:K,onNodeClick:U,onBracketsClick:Fe,onIconClick:He,onSelectedChange:F,onValueChange:Be,style:R.itemHeight&&R.itemHeight!==20?{lineHeight:"".concat(R.itemHeight,"px")}:{}},null)});return(0,f.createVNode)("div",{ref:de,class:{"vjs-tree":!0,"is-virtual":R.virtual},onScroll:R.virtual?ee:void 0,style:R.showLineNumber?D({paddingLeft:"".concat(12*Number(be.value.length.toString().length),"px")},R.style):R.style},[R.virtual?(0,f.createVNode)("div",{class:"vjs-tree-list",style:{height:"".concat(R.height,"px")}},[(0,f.createVNode)("div",{class:"vjs-tree-list-holder",style:{height:"".concat(Le.value.length*R.itemHeight,"px")}},[(0,f.createVNode)("div",{class:"vjs-tree-list-holder-inner",style:{transform:"translateY(".concat(Te.translateY,"px)")}},[C])])]):C])}}})}(),o}()})})(iz);var bxe=iz.exports;const yO=ka(bxe);const wxe=fi({components:{Codemirror:Xf,HelpButton:sh},setup(){return{extensions:[Jf,gt.lineWrapping]}},computed:{...Mi(Yd),...Mi(au),keyHasError(){const t=this.transitionsStore.outputArcs[this.transitionsStore.selectedOutputSnippetIndex].keyVar;return this.transitionsStore.keyEvaluationResults[t].hasError},keyEvaluation(){const t=this.transitionsStore.outputArcs[this.transitionsStore.selectedOutputSnippetIndex].keyVar;return this.transitionsStore.keyEvaluationResults[t].evaluation},valueHasError(){const t=this.transitionsStore.outputArcs[this.transitionsStore.selectedOutputSnippetIndex].valueVar;return this.transitionsStore.valueEvaluationResults[t].hasError},valueEvaluation(){const t=this.transitionsStore.outputArcs[this.transitionsStore.selectedOutputSnippetIndex].valueVar;return this.transitionsStore.valueEvaluationResults[t].evaluation}},watch:{"transitionsStore.outputArcs":{handler(t,e){this.transitionsStore.saveOutputSnippets(),this.transitionsStore.loadEvaluations()},deep:!0}},methods:{getShortString(t){return t.length>8?t.slice(0,8)+"...":t},getFormattedString(t){return JSON.stringify(JSON.parse(t),null,2)}}}),xxe={class:"field"},Sxe={class:"label is-small"},Exe={class:"control is-small jsn-code"},_xe={key:0},Axe={key:0,class:"help is-danger"},kxe={key:1,class:"help"},Cxe=["data-tooltip"],Pxe={class:"field"},Oxe={class:"label is-small"},Txe={class:"control is-small jsn-code"},Mxe={key:0},Nxe={key:0,class:"help is-danger"},Ixe={key:1,class:"help"},$xe=["data-tooltip"];function Rxe(t,e,n,r,i,s){const o=Fn("HelpButton"),a=Fn("font-awesome-icon"),l=Fn("Codemirror");return Ze(),rt(lr,null,[oe("div",xxe,[oe("label",Sxe,[Kr("Key "),lt(o,{"help-text":`
                Output key variables define the field of a selected object or position in a selected array, where the corresponding output value is inserted.
              `}),oe("span",{onClick:e[0]||(e[0]=()=>{t.uiStateStore.showEditor="key"}),class:"icon is-small is-pulled-right has-text-grey-light is-clickable"},[lt(a,{icon:"fas fa-up-right-from-square"})])]),oe("div",Exe,[lt(l,{placeholder:"Define key in Jsonnet",style:{height:"50px"},"indent-with-tab":!0,"tab-size":2,extensions:t.extensions,modelValue:t.transitionsStore.outputArcs[t.transitionsStore.selectedOutputSnippetIndex].keySnippet,"onUpdate:modelValue":e[1]||(e[1]=u=>t.transitionsStore.outputArcs[t.transitionsStore.selectedOutputSnippetIndex].keySnippet=u)},null,8,["extensions","modelValue"])]),t.transitionsStore.assignmentComplete&&!t.transitionsStore.prefaceHasError?(Ze(),rt("div",_xe,[t.keyHasError?(Ze(),rt("p",Axe,"Key expression has errors.")):Tt("",!0),t.keyHasError?Tt("",!0):(Ze(),rt("p",kxe,[Kr("Result: "),oe("code",{class:"has-text-grey has-tooltip-bottom","data-tooltip":t.getFormattedString(t.keyEvaluation)},Cn(t.getShortString(t.keyEvaluation)),9,Cxe)]))])):Tt("",!0)]),oe("div",Pxe,[oe("label",Oxe,[Kr("Value "),lt(o,{"help-text":`
                Output value variables define the value that is inserted in the corresponding place.
              `}),oe("span",{onClick:e[2]||(e[2]=()=>{t.uiStateStore.showEditor="value"}),class:"icon is-small is-pulled-right has-text-grey-light is-clickable"},[lt(a,{icon:"fas fa-up-right-from-square"})])]),oe("div",Txe,[lt(l,{placeholder:"Define value in Jsonnet",style:{height:"50px"},"indent-with-tab":!0,"tab-size":2,extensions:t.extensions,modelValue:t.transitionsStore.outputArcs[t.transitionsStore.selectedOutputSnippetIndex].valueSnippet,"onUpdate:modelValue":e[3]||(e[3]=u=>t.transitionsStore.outputArcs[t.transitionsStore.selectedOutputSnippetIndex].valueSnippet=u)},null,8,["extensions","modelValue"])]),t.transitionsStore.assignmentComplete&&!t.transitionsStore.prefaceHasError?(Ze(),rt("div",Mxe,[t.valueHasError?(Ze(),rt("p",Nxe,"Value expression has errors.")):Tt("",!0),t.valueHasError?Tt("",!0):(Ze(),rt("p",Ixe,[Kr("Result: "),oe("code",{class:"has-text-grey has-tooltip-bottom","data-tooltip":t.getFormattedString(t.valueEvaluation)},Cn(t.getShortString(t.valueEvaluation)),9,$xe)]))])):Tt("",!0)])],64)}const Lxe=wo(wxe,[["render",Rxe]]),Dxe=fi({components:{VueJsonPretty:yO,HelpButton:sh},data(){return{showFilterInput:!1,pathDictionary:{}}},computed:{...Mi(Yd),selectedInputValueDotsBracketsPath:{get(){const t=this.transitionsStore.selectedInputValueJsonPath;if(t==="none")return"none";const e=this.pathDictionary[t];return e||"none"},set(t){}}},created(){this.pathDictionary={}},methods:{cancelFilterEdit(){this.transitionsStore.resetInputFilter(),this.showFilterInput=!1},saveFilter(){this.transitionsStore.saveInputFilter(),this.showFilterInput=!1},onFilterInput(){this.transitionsStore.unsetCurrentInputAssignment(),this.pathDictionary={},this.transitionsStore.loadAvailableInputAssignments()},onInputPlaceSelect(){this.showFilterInput=!1,this.pathDictionary={},this.transitionsStore.loadCurrentInputAssignment()},valueSelectable(t){let e="";const n=t.path.substring(4);e=Bb(n);const i=this.transitionsStore.inputArcs[this.transitionsStore.selectedInputPlaceIndex].filtered.includes(e);return i&&(this.pathDictionary[e]=t.path),i},onSelectValueClick(t,e){if(Array.isArray(t))return;const n=t.substring(4),r=Bb(n);this.transitionsStore.saveSelectedAssignment(r,"input")}}});const Fxe=t=>(Wf("data-v-9ec8c5ca"),t=t(),Gf(),t),Vxe={class:"card scoped-modal-side has-background-light scoped-modal-left"},Bxe={class:"m-5 scoped-scrollable-outer"},jxe={key:0,class:"scoped-scrollable-container"},zxe={class:"level mb-4"},Hxe={class:"level-left"},Uxe={class:"level-item"},qxe={class:"field has-addons"},Wxe=Fxe(()=>oe("p",{class:"control"},[oe("a",{class:"button is-static is-small"}," Input ")],-1)),Gxe={class:"control"},Kxe={class:"select is-small"},Yxe=["value"],Jxe={key:0,class:"level-right"},Xxe={class:"level-item"},Zxe={class:"icon is-small has-text-warning is-clickable mr-2 has-tooltip-bottom","data-tooltip":"Some places have unselected values."},Qxe={class:"level mb-4"},eSe={class:"level-left"},tSe={key:0,class:"level-item"},nSe={class:"icon mr-1 has-text-grey-light"},rSe={class:"has-text-grey"},iSe={key:1,class:"level-item"},sSe={class:"icon mr-1 has-text-grey-light"},oSe={class:"icon is-small has-text-grey"},aSe={class:"icon is-small"},lSe={class:"scoped-scrollable jsn-code p-2"},uSe={key:1,class:"notification is-info is-light is-size-7"};function cSe(t,e,n,r,i,s){const o=Fn("font-awesome-icon"),a=Fn("HelpButton"),l=Fn("vue-json-pretty");return Ze(),rt("div",Vxe,[oe("section",Bxe,[t.transitionsStore.inputArcs.length>0?(Ze(),rt("div",jxe,[oe("div",zxe,[oe("div",Hxe,[oe("div",Uxe,[oe("div",qxe,[Wxe,oe("p",Gxe,[oe("span",Kxe,[eu(oe("select",{"onUpdate:modelValue":e[0]||(e[0]=u=>t.transitionsStore.selectedInputPlaceIndex=u),onChange:e[1]||(e[1]=(...u)=>t.onInputPlaceSelect&&t.onInputPlaceSelect(...u))},[(Ze(!0),rt(lr,null,Mf(t.transitionsStore.inputArcs,(u,c)=>(Ze(),rt("option",{value:c},Cn(u.name),9,Yxe))),256))],544),[[$m,t.transitionsStore.selectedInputPlaceIndex]])])])])])]),t.transitionsStore.presetAssignmentComplete?Tt("",!0):(Ze(),rt("div",Jxe,[oe("div",Xxe,[oe("span",Zxe,[lt(o,{icon:"fas fa-triangle-exclamation"})])])]))]),oe("div",Qxe,[oe("div",eSe,[t.showFilterInput?(Ze(),rt("div",iSe,[oe("span",sSe,[lt(o,{icon:"fas fa-filter"})]),eu(oe("input",{onInput:e[3]||(e[3]=(...u)=>t.onFilterInput&&t.onFilterInput(...u)),style:{width:"100px"},class:"input is-small mr-1","onUpdate:modelValue":e[4]||(e[4]=u=>t.transitionsStore.inputArcs[t.transitionsStore.selectedInputPlaceIndex].filter=u)},null,544),[[sc,t.transitionsStore.inputArcs[t.transitionsStore.selectedInputPlaceIndex].filter]]),oe("button",{class:"mr-1 button is-small",onClick:e[5]||(e[5]=(...u)=>t.cancelFilterEdit&&t.cancelFilterEdit(...u))},[oe("span",oSe,[lt(o,{icon:"fas fa-xmark"})])]),oe("button",{onClick:e[6]||(e[6]=(...u)=>t.saveFilter&&t.saveFilter(...u)),class:"button is-small is-primary"},[oe("span",aSe,[lt(o,{icon:"fas fa-check"})])])])):(Ze(),rt("div",tSe,[oe("span",{class:"icon-text is-clickable",onClick:e[2]||(e[2]=u=>t.showFilterInput=!0)},[oe("span",nSe,[lt(o,{icon:"fas fa-filter"})]),oe("span",rSe,Cn(t.transitionsStore.inputArcs[t.transitionsStore.selectedInputPlaceIndex].filtered.length)+" selectable values",1),Kr("  "),lt(a,{class:"has-text-grey-light","help-text":`
                      You can edit the filter to make other values selectable. Filter expressions are written in 
                      <a href='https://goessner.net/articles/JSONPath/' target='_blank'>
                        JsonPath
                      </a>.
                      `})])]))])]),oe("div",lSe,[(Ze(),oi(l,{key:t.transitionsStore.inputDataKey,data:t.transitionsStore.inputArcs[t.transitionsStore.selectedInputPlaceIndex].marking,onSelectedChange:t.onSelectValueClick,"selected-value":t.selectedInputValueDotsBracketsPath,"selectable-type":"single","select-on-click-node":!0,"show-select-controller":!0,"node-selectable":t.valueSelectable,"show-icon":!0},null,8,["data","onSelectedChange","selected-value","node-selectable"]))])])):(Ze(),rt("div",uSe,"Transition has no input places."))])])}const fSe=wo(Dxe,[["render",cSe],["__scopeId","data-v-9ec8c5ca"]]),hSe=fi({components:{VueJsonPretty:yO,HelpButton:sh},data(){return{showFilterOutput:!1,pathDictionary:{}}},computed:{...Mi(Yd),selectedOutputValueDotsBracketsPath:{get(){const t=this.transitionsStore.selectedOutputValueJsonPath;if(t==="none")return"none";const e=this.pathDictionary[t];return e||"none"},set(t){}}},created(){this.pathDictionary={}},methods:{cancelFilterEdit(){this.transitionsStore.resetOutputFilter(),this.showFilterOutput=!1},saveFilter(){this.transitionsStore.saveOutputFilter(),this.showFilterOutput=!1},onFilterOutput(){this.transitionsStore.unsetCurrentOutputAssignment(),this.pathDictionary={},this.transitionsStore.loadAvailableOutputAssignments()},onOutputPlaceSelect(){this.showFilterOutput=!1,this.pathDictionary={},this.transitionsStore.loadCurrentOutputAssignment()},valueSelectable(t){let e="";const n=t.path.substring(4);e=Bb(n);const i=this.transitionsStore.outputArcs[this.transitionsStore.selectedOutputPlaceIndex].filtered.includes(e);return i&&(this.pathDictionary[e]=t.path),i},onSelectValueClick(t,e){if(Array.isArray(t))return;const n=t.substring(4),r=Bb(n);this.transitionsStore.saveSelectedAssignment(r,"output")}}});const dSe=t=>(Wf("data-v-5415c2e4"),t=t(),Gf(),t),pSe={class:"card scoped-modal-side has-background-light scoped-modal-right"},gSe={class:"m-5 scoped-scrollable-outer"},mSe={key:0,class:"scoped-scrollable-container"},vSe={class:"level mb-4"},ySe={class:"level-left"},bSe={class:"level-item"},wSe={class:"field has-addons"},xSe=dSe(()=>oe("p",{class:"control"},[oe("a",{class:"button is-static is-small"}," Output ")],-1)),SSe={class:"control"},ESe={class:"select is-small"},_Se=["value"],ASe={key:0,class:"level-right"},kSe={class:"level-item"},CSe={class:"icon is-small has-text-warning is-clickable mr-2 has-tooltip-bottom","data-tooltip":"Some places have unselected values."},PSe={class:"level mb-4"},OSe={class:"level-left"},TSe={key:0,class:"level-item"},MSe={class:"icon mr-1 has-text-grey-light"},NSe={class:"has-text-grey"},ISe={key:1,class:"level-item"},$Se={class:"icon mr-1 has-text-grey-light"},RSe={class:"icon is-small has-text-grey"},LSe={class:"icon is-small"},DSe={class:"scoped-scrollable jsn-code p-2"},FSe={key:1,class:"notification is-info is-light is-size-7"};function VSe(t,e,n,r,i,s){const o=Fn("font-awesome-icon"),a=Fn("HelpButton"),l=Fn("vue-json-pretty");return Ze(),rt("div",pSe,[oe("section",gSe,[t.transitionsStore.outputArcs.length>0?(Ze(),rt("div",mSe,[oe("div",vSe,[oe("div",ySe,[oe("div",bSe,[oe("div",wSe,[xSe,oe("p",SSe,[oe("span",ESe,[eu(oe("select",{"onUpdate:modelValue":e[0]||(e[0]=u=>t.transitionsStore.selectedOutputPlaceIndex=u),onChange:e[1]||(e[1]=(...u)=>t.onOutputPlaceSelect&&t.onOutputPlaceSelect(...u))},[(Ze(!0),rt(lr,null,Mf(t.transitionsStore.outputArcs,(u,c)=>(Ze(),rt("option",{value:c},Cn(u.name),9,_Se))),256))],544),[[$m,t.transitionsStore.selectedOutputPlaceIndex]])])])])])]),t.transitionsStore.postsetAssignmentComplete?Tt("",!0):(Ze(),rt("div",ASe,[oe("div",kSe,[oe("span",CSe,[lt(o,{icon:"fas fa-triangle-exclamation"})])])]))]),oe("div",PSe,[oe("div",OSe,[t.showFilterOutput?(Ze(),rt("div",ISe,[oe("span",$Se,[lt(o,{icon:"fas fa-filter"})]),eu(oe("input",{onInput:e[3]||(e[3]=(...u)=>t.onFilterOutput&&t.onFilterOutput(...u)),style:{width:"100px"},class:"input is-small mr-1","onUpdate:modelValue":e[4]||(e[4]=u=>t.transitionsStore.outputArcs[t.transitionsStore.selectedOutputPlaceIndex].filter=u)},null,544),[[sc,t.transitionsStore.outputArcs[t.transitionsStore.selectedOutputPlaceIndex].filter]]),oe("button",{class:"mr-1 button is-small",onClick:e[5]||(e[5]=(...u)=>t.cancelFilterEdit&&t.cancelFilterEdit(...u))},[oe("span",RSe,[lt(o,{icon:"fas fa-xmark"})])]),oe("button",{onClick:e[6]||(e[6]=(...u)=>t.saveFilter&&t.saveFilter(...u)),class:"button is-small is-primary"},[oe("span",LSe,[lt(o,{icon:"fas fa-check"})])])])):(Ze(),rt("div",TSe,[oe("span",{class:"icon-text is-clickable",onClick:e[2]||(e[2]=u=>t.showFilterOutput=!0)},[oe("span",MSe,[lt(o,{icon:"fas fa-filter"})]),oe("span",NSe,Cn(t.transitionsStore.outputArcs[t.transitionsStore.selectedOutputPlaceIndex].filtered.length)+" selectable values",1),Kr(" "),lt(a,{class:"has-text-grey-light","help-text":`
                      You can edit the filter to make other values selectable. Filter expressions are written in 
                      <a href='https://goessner.net/articles/JSONPath/' target='_blank'>
                        JsonPath
                      </a>.
                      `})])]))])]),oe("div",DSe,[(Ze(),oi(l,{key:t.transitionsStore.outputDataKey,data:t.transitionsStore.outputArcs[t.transitionsStore.selectedOutputPlaceIndex].marking,onSelectedChange:t.onSelectValueClick,"selected-value":t.selectedOutputValueDotsBracketsPath,"selectable-type":"single","select-on-click-node":!0,"show-select-controller":!0,"node-selectable":t.valueSelectable,"show-icon":!0},null,8,["data","onSelectedChange","selected-value","node-selectable"]))])])):(Ze(),rt("div",FSe,"Transition has no output places."))])])}const BSe=wo(hSe,[["render",VSe],["__scopeId","data-v-5415c2e4"]]),jSe=fi({components:{Codemirror:Xf,VueJsonPretty:yO,SnippetInput:Lxe,PostsetFilter:BSe,PresetFilter:fSe,HelpButton:sh},setup(){return{extensions:[Jf]}},data(){return{showNameInput:!1}},computed:{...Mi(au),...Mi(Yd)},created(){this.transitionsStore.initSettings(),this.transitionsStore.loadTransition(this.uiStateStore.lastSelectedID)},watch:{"transitionsStore.transition.guard"(t){this.transitionsStore.saveBasicInscription(),this.transitionsStore.loadEvaluations()},"transitionsStore.transition.preface"(t){this.transitionsStore.saveBasicInscription(),this.transitionsStore.loadEvaluations()}},methods:{onCancelNameEdit(){this.transitionsStore.resetName(),this.showNameInput=!1},onNameSave(){this.transitionsStore.saveName(),this.showNameInput=!1},close(){this.uiStateStore.showModal="none",this.transitionsStore.unsetAssignments()},onFireClick(){this.transitionsStore.isEnabled&&this.transitionsStore.fireCurrentTransition()},getShortString(t){return t.length>8?t.slice(0,8)+"...":t},getFormattedString(t){return JSON.stringify(JSON.parse(t),null,2)}}});const Xo=t=>(Wf("data-v-2e2e203d"),t=t(),Gf(),t),zSe={class:"modal is-active"},HSe=Xo(()=>oe("div",{class:"modal-background"},null,-1)),USe={class:"scoped-modal-container"},qSe={class:"modal-card scoped-modal-center"},WSe={class:"modal-card-head"},GSe=Xo(()=>oe("span",{class:"has-text-weight-bold"},"Transition:",-1)),KSe={class:"ml-1"},YSe={class:"scoped-edit-button icon has-text-grey-light"},JSe={key:1,class:"level"},XSe={class:"icon is-small has-text-grey"},ZSe={class:"icon is-small"},QSe=Xo(()=>oe("p",{class:"modal-card-title"},null,-1)),eEe={class:"modal-card-body"},tEe={class:"block"},nEe={class:"field"},rEe={class:"label is-small"},iEe={class:"control is-small jsn-code"},sEe={key:0,class:"help is-danger"},oEe=Xo(()=>oe("hr",null,null,-1)),aEe={key:0,class:"block"},lEe={class:"field"},uEe=Xo(()=>oe("label",{class:"label is-small"},"Output Expressions ",-1)),cEe={class:"select is-small"},fEe=Xo(()=>oe("option",{value:-1,selected:"",disabled:""},"Select output place",-1)),hEe=["value"],dEe={key:0,class:"help is-danger"},pEe={key:1,class:"block"},gEe=Xo(()=>oe("div",{class:"notification is-info is-light is-size-7"},"Transition has no output places.",-1)),mEe=[gEe],vEe=Xo(()=>oe("hr",null,null,-1)),yEe={class:"block"},bEe={class:"field"},wEe={class:"label is-small"},xEe={class:"control is-small jsn-code"},SEe={key:0},EEe={key:0,class:"help is-danger"},_Ee={key:1,class:"help"},AEe=["data-tooltip"],kEe={key:2,class:"block"},CEe=Xo(()=>oe("div",{class:"notification is-warning is-light is-size-7"}," Select a value for each input and output place to see expression evaluations. ",-1)),PEe=[CEe],OEe={key:3,class:"block"},TEe=Xo(()=>oe("div",{class:"notification is-danger is-light is-size-7"}," The transition inscription has errors. ",-1)),MEe=[TEe],NEe={key:4,class:"block"},IEe=Xo(()=>oe("div",{class:"notification is-warning is-light is-size-7"}," The transition can't fire with selected values. ",-1)),$Ee=[IEe],REe={key:5,class:"block"},LEe=Xo(()=>oe("div",{class:"notification is-success is-light is-size-7"}," The transition can fire with selected values. ",-1)),DEe=[LEe],FEe={class:"modal-card-foot"},VEe=["disabled"];function BEe(t,e,n,r,i,s){const o=Fn("PresetFilter"),a=Fn("font-awesome-icon"),l=Fn("HelpButton"),u=Fn("Codemirror"),c=Fn("SnippetInput"),f=Fn("PostsetFilter");return Ze(),rt("div",zSe,[HSe,oe("div",USe,[lt(o),oe("div",qSe,[oe("header",WSe,[GSe,oe("span",KSe,[t.showNameInput?Tt("",!0):(Ze(),rt("span",{key:0,class:"is-ghost icon-text has-text-weight-bold scoped-modal-title is-clickable",onClick:e[0]||(e[0]=p=>t.showNameInput=!0)},[oe("span",null,Cn(t.transitionsStore.transition.name),1),oe("span",YSe,[lt(a,{icon:"fas fa-pen"})])])),t.showNameInput?(Ze(),rt("span",JSe,[eu(oe("input",{style:{width:"100px"},class:"input is-small level-item","onUpdate:modelValue":e[1]||(e[1]=p=>t.transitionsStore.transition.name=p)},null,512),[[sc,t.transitionsStore.transition.name]]),oe("button",{class:"ml-1 button is-small level-item",onClick:e[2]||(e[2]=(...p)=>t.onCancelNameEdit&&t.onCancelNameEdit(...p))},[oe("span",XSe,[lt(a,{icon:"fas fa-xmark"})])]),oe("button",{onClick:e[3]||(e[3]=(...p)=>t.onNameSave&&t.onNameSave(...p)),class:"ml-1 button is-small level-item is-primary"},[oe("span",ZSe,[lt(a,{icon:"fas fa-check"})])])])):Tt("",!0)]),QSe,oe("button",{class:"delete","aria-label":"close",onClick:e[4]||(e[4]=(...p)=>t.close&&t.close(...p))})]),oe("section",eEe,[oe("div",tEe,[oe("div",nEe,[oe("label",rEe,[Kr("Preface "),lt(l,{"help-text":`
                                Preface is evaluated before any output expression or guard. Use it to define custom variables and functions.
                              `}),oe("span",{onClick:e[5]||(e[5]=()=>{t.uiStateStore.showEditor="preface"}),class:"icon is-small is-pulled-right has-text-grey-light is-clickable"},[lt(a,{icon:"fas fa-up-right-from-square"})])]),oe("div",iEe,[lt(u,{placeholder:"Define preface in Jsonnet",style:{height:"50px"},"indent-with-tab":!0,"tab-size":2,extensions:t.extensions,modelValue:t.transitionsStore.transition.preface,"onUpdate:modelValue":e[6]||(e[6]=p=>t.transitionsStore.transition.preface=p)},null,8,["extensions","modelValue"])]),t.transitionsStore.prefaceHasError?(Ze(),rt("p",sEe," Expression has errors. Use preface only for variable and function definitions.")):Tt("",!0)])]),oEe,t.transitionsStore.outputArcs.length>0?(Ze(),rt("div",aEe,[oe("div",lEe,[uEe,oe("div",cEe,[eu(oe("select",{"onUpdate:modelValue":e[7]||(e[7]=p=>t.transitionsStore.selectedOutputSnippetIndex=p)},[fEe,(Ze(!0),rt(lr,null,Mf(t.transitionsStore.outputArcs,(p,v)=>(Ze(),rt("option",{value:v},Cn(p.name),9,hEe))),256))],512),[[$m,t.transitionsStore.selectedOutputSnippetIndex]])]),t.transitionsStore.hasAnyOutputError?(Ze(),rt("p",dEe,"Some output expressions have errors.")):Tt("",!0)]),t.transitionsStore.selectedOutputSnippetIndex!==-1?(Ze(),oi(c,{key:0})):Tt("",!0)])):(Ze(),rt("div",pEe,mEe)),vEe,oe("div",yEe,[oe("div",bEe,[oe("label",wEe,[Kr("Guard Expression "),lt(l,{"help-text":`
                                The guard is a function that evaluates to true or false. Use it to describe rules when the transition is enabled.
                              `}),oe("span",{onClick:e[8]||(e[8]=()=>{t.uiStateStore.showEditor="guard"}),class:"icon is-small is-pulled-right has-text-grey-light is-clickable"},[lt(a,{icon:"fas fa-up-right-from-square"})])]),oe("div",xEe,[lt(u,{placeholder:"Define guard in Jsonnet",style:{height:"50px"},"indent-with-tab":!0,"tab-size":2,extensions:t.extensions,modelValue:t.transitionsStore.transition.guard,"onUpdate:modelValue":e[9]||(e[9]=p=>t.transitionsStore.transition.guard=p)},null,8,["extensions","modelValue"])]),t.transitionsStore.assignmentComplete&&!t.transitionsStore.prefaceHasError&&!t.transitionsStore.hasAnyError?(Ze(),rt("div",SEe,[t.transitionsStore.guardHasError?(Ze(),rt("p",EEe,"Guard expression has errors. ")):Tt("",!0),t.transitionsStore.guardHasError?Tt("",!0):(Ze(),rt("p",_Ee,[Kr("Result: "),oe("code",{class:"has-text-grey has-tooltip-bottom","data-tooltip":t.getFormattedString(t.transitionsStore.guardEvaluation)},Cn(t.getShortString(t.transitionsStore.guardEvaluation)),9,AEe)]))])):Tt("",!0)])]),t.transitionsStore.assignmentComplete?t.transitionsStore.hasAnyError?(Ze(),rt("div",OEe,MEe)):t.transitionsStore.isEnabled?t.transitionsStore.isEnabled?(Ze(),rt("div",REe,DEe)):Tt("",!0):(Ze(),rt("div",NEe,$Ee)):(Ze(),rt("div",kEe,PEe))]),oe("footer",FEe,[oe("button",{class:"button is-pulled-right is-danger is-small",disabled:!t.transitionsStore.isEnabled,style:{"margin-left":"auto"},onClick:e[10]||(e[10]=(...p)=>t.onFireClick&&t.onFireClick(...p))},"Fire!",8,VEe)])]),lt(f)])])}const jEe=wo(jSe,[["render",BEe],["__scopeId","data-v-2e2e203d"]]),zEe=fi({components:{Codemirror:Xf},props:{content:String,language:{type:String,default:"json"},class:String},setup(){return{jsonExtensions:[ez()],jsonnetExtensions:[Jf]}}});function HEe(t,e,n,r,i,s){const o=Fn("Codemirror");return Ze(),rt(lr,null,[t.language==="jsonnet"?(Ze(),oi(o,{key:0,modelValue:t.content,"onUpdate:modelValue":e[0]||(e[0]=a=>t.content=a),disabled:!0,autofocus:!0,"indent-with-tab":!0,"tab-size":2,extensions:t.jsonnetExtensions,class:xa(t.class)},null,8,["modelValue","extensions","class"])):Tt("",!0),t.language==="json"?(Ze(),oi(o,{key:1,modelValue:t.content,"onUpdate:modelValue":e[1]||(e[1]=a=>t.content=a),disabled:!0,autofocus:!0,"indent-with-tab":!0,"tab-size":2,extensions:t.jsonExtensions,class:xa(t.class)},null,8,["modelValue","extensions","class"])):Tt("",!0)],64)}const UEe=wo(zEe,[["render",HEe]]),qEe=fi({components:{StaticCodeEditor:UEe},props:{examples:{type:Array,required:!0},isTransition:Boolean},methods:{toggleAccordion(t){this.examples[t].isExpanded===!1?this.examples[t].isExpanded=!0:this.examples[t].isExpanded=!1}}});const WEe={class:"accordion"},GEe=["onClick"],KEe=["onClick"],YEe={class:"scoped-accordion-content jsn-code"};function JEe(t,e,n,r,i,s){const o=Fn("font-awesome-icon"),a=Fn("StaticCodeEditor");return Ze(),rt("div",WEe,[(Ze(!0),rt(lr,null,Mf(t.examples,(l,u)=>(Ze(),rt("div",{key:u},[oe("button",{class:"button is-ghost",onClick:c=>t.toggleAccordion(u)},Cn(l.question),9,GEe),oe("button",{class:"button is-ghost is-pulled-right",onClick:c=>t.toggleAccordion(u)},[l.isExpanded?Tt("",!0):(Ze(),oi(o,{key:0,icon:"fas fa-plus-circle scoped-accordion-button"})),l.isExpanded?(Ze(),oi(o,{key:1,icon:"fas fa-minus-circle scoped-accordion-button"})):Tt("",!0)],8,KEe),eu(oe("div",YEe,[lt(a,{class:"my-1",content:l.answer,language:"jsonnet"},null,8,["content"])],512),[[xk,l.isExpanded]])]))),128))])}const XEe=wo(qEe,[["render",JEe],["__scopeId","data-v-37eb0c3d"]]),ZEe={student:[{id:1,name:"Alice",age:25,email:"alice@uni.edu",semester:4,lecturesNotYetDone:["Process Modeling","Database Systems"]}],request:[{id:1,lecture:"Process Modeling",serviceFee:15}],jsonnet:[{question:"Always evaluate to true (no check functionality)",answer:"true",evaluation:!0,isExpanded:!1},{question:"Comparison of two attributes of different tokens",answer:"input_somplace_token.id == output_otherplace_token.id",evaluation:!0,isExpanded:!1},{question:"Comparison of an attribute with a value",answer:"input_someplace_value.name == 'Tom'",evaluation:!1,isExpanded:!1},{question:"Compare whether value is greater or smaller",answer:"input_someplace_value.age > 18",evaluation:!0,isExpanded:!1},{question:"Combine multiple conditions",answer:`input_someplace_value.name == 'Tom' &&
 input_someplace_value.age > 18`,evaluation:!0,isExpanded:!1}]},QEe={student:[{id:1,name:"Alice",age:25,email:"alice@uni.edu",semester:4,lecturesNotYetDone:["Process Modeling","Database Systems"]}],lecture:[{id:1,lecture:"Process Modeling",serviceFee:15}],jsonnet:[{question:"Pass some static simple value as output.",answer:"local output_somplace_value = true;",evaluation:{id:1,lecture:"Process Modeling"},isExpanded:!1},{question:"Pass some static complex value as output.",answer:'local output_somplace_value = { "id": 1, "lecture": "Process Modeling" };',evaluation:{id:1,lecture:"Process Modeling"},isExpanded:!1},{question:"Pass some input value unchanged.",answer:"local output_somplace_value = input_otherplace_value;",evaluation:{id:1,lecture:"Process Modeling"},isExpanded:!1},{question:"Merge objects.",answer:"local output_someplace_value = input_otherplace_value + {email: somevariable.email};",evaluation:{email:"alice@uni.edu",id:1,lecture:"Process Modeling"},isExpanded:!1}]},e_e={student:[{id:1,name:"Alice",age:25,email:"alice@uni.edu",semester:4,lecturesNotYetDone:["Process Modeling","Database Systems"]}],lecture:[{id:1,lecture:"Process Modeling",serviceFee:15}],jsonnet:[{question:"Insert corresponding output value at a specific field of an object.",answer:'local output_someplace_key = "price";',evaluation:{id:1,lecture:"Process Modeling"},isExpanded:!1},{question:"Insert corresponding output value in the beginning of an array.",answer:"local output_someplace_key = 0;",evaluation:{email:"alice@uni.edu",id:1,lecture:"Process Modeling"},isExpanded:!1},{question:"Insert corresponding output value at the end of an array.",answer:'local output_someplace_key = "-";',evaluation:{email:"alice@uni.edu",message:"The request for Process Modeling was accepted."},isExpanded:!1},{question:"Use the key of some input value as output key.",answer:"local output_someplace_key = input_otherplace_key;",evaluation:{age:25,email:"alice@uni.edu",id:1,name:"Alice",semester:4,totalTuition:1600},isExpanded:!1}]},t_e={student:[{id:1,name:"Alice",age:25,email:"alice@uni.edu",semester:4,lecturesNotYetDone:["Process Modeling","Database Systems"]}],lecture:[{id:1,lecture:"Process Modeling",serviceFee:15}],jsonnet:[{question:"Definition of a variable",answer:"local tuitionPerSemester = 400;",evaluation:{age:25,email:"alice@uni.edu",id:1,name:"Alice",semester:4,totalTuition:1600},isExpanded:!1},{question:"Definition of a function",answer:"local calculateTotalTuition(tuitionPerSemester, numberSemester) = tuitionPerSemester * numberSemester;",evaluation:{age:25,email:"alice@uni.edu",id:1,name:"Alice",semester:4,totalTuition:1600},isExpanded:!1}]},n_e=fi({components:{Codemirror:Xf,HelpButton:sh,ExampleAccordion:XEe},setup(){const t=[Jf];return{view:lg(),extensions:t}},computed:{getCurrentExample(){return this.uiStateStore.showEditor==="guard"?this.guardExamples.jsonnet:this.uiStateStore.showEditor==="value"?this.valueExamples.jsonnet:this.uiStateStore.showEditor==="key"?this.keyExamples.jsonnet:this.prefaceExamples.jsonnet},title(){return this.uiStateStore.showEditor==="guard"?this.transitionsStore.transition.name+" guard":this.uiStateStore.showEditor==="preface"?this.transitionsStore.transition.name+" preface":this.uiStateStore.showEditor==="key"?this.transitionsStore.outputArcs[this.transitionsStore.selectedOutputSnippetIndex].name+" key":this.uiStateStore.showEditor==="value"?this.transitionsStore.outputArcs[this.transitionsStore.selectedOutputSnippetIndex].name+" value":""},keyHasError(){const t=this.transitionsStore.outputArcs[this.transitionsStore.selectedOutputSnippetIndex].keyVar;return this.transitionsStore.keyEvaluationResults[t].hasError},keyEvaluation(){const t=this.transitionsStore.outputArcs[this.transitionsStore.selectedOutputSnippetIndex].keyVar;return this.transitionsStore.keyEvaluationResults[t].evaluation},valueHasError(){const t=this.transitionsStore.outputArcs[this.transitionsStore.selectedOutputSnippetIndex].valueVar;return this.transitionsStore.valueEvaluationResults[t].hasError},valueEvaluation(){const t=this.transitionsStore.outputArcs[this.transitionsStore.selectedOutputSnippetIndex].valueVar;return this.transitionsStore.valueEvaluationResults[t].evaluation},...Mi(au),...Mi(Yd)},data(){return{activeItems:[],expandedExamples:!1,guardExamples:ZEe,keyExamples:e_e,valueExamples:QEe,prefaceExamples:t_e}},methods:{getVariableTooltip(t){return this.transitionsStore.variables[t]!==void 0?JSON.stringify(this.transitionsStore.variables[t],null,2):"Variable has no value assigned."},expandExamples(){this.expandedExamples=!this.expandedExamples},toggleActive(t){this.activeItems.includes(t)?this.activeItems.splice(this.activeItems.indexOf(t),1):this.activeItems.push(t)},close(){this.uiStateStore.showEditor="none"},onEditorReady(t){this.view=t.view},insertVariableName(t){const n=this.view.state.selection.ranges[0].anchor;this.view.dispatch({changes:{from:n,insert:t}})}}});const Rr=t=>(Wf("data-v-9c4885f2"),t=t(),Gf(),t),r_e={class:"modal is-active"},i_e=Rr(()=>oe("div",{class:"modal-background"},null,-1)),s_e={class:"modal-card scoped-modal jsn-modal-wide"},o_e={class:"modal-card-head"},a_e={class:"has-text-weight-bold"},l_e=Rr(()=>oe("p",{class:"modal-card-title"},null,-1)),u_e={class:"modal-card-body"},c_e={class:"columns scoped-scrollable-outer"},f_e={class:"column is-one-quarter scoped-scroll-container"},h_e={class:"menu is-small scoped-scrollable"},d_e=Rr(()=>oe("p",{class:"menu-label"}," Variable Explorer ",-1)),p_e={class:"menu-list"},g_e={key:0},m_e=["onClick"],v_e={key:0},y_e=["data-tooltip","onClick"],b_e=Rr(()=>oe("span",{class:"has-text-weight-semibold"},"Key ",-1)),w_e=Rr(()=>oe("br",null,null,-1)),x_e={class:"is-family-code"},S_e=["data-tooltip","onClick"],E_e=Rr(()=>oe("span",{class:"has-text-weight-semibold"},"Value ",-1)),__e=Rr(()=>oe("br",null,null,-1)),A_e={class:"is-family-code"},k_e=["data-tooltip","onClick"],C_e=Rr(()=>oe("span",{class:"has-text-weight-semibold"},"Token ",-1)),P_e=Rr(()=>oe("br",null,null,-1)),O_e={class:"is-family-code"},T_e={key:0},M_e=["onClick"],N_e={key:0},I_e=["data-tooltip","onClick"],$_e=Rr(()=>oe("span",{class:"has-text-weight-semibold"},"Key ",-1)),R_e=Rr(()=>oe("br",null,null,-1)),L_e={class:"is-family-code"},D_e=["data-tooltip","onClick"],F_e=Rr(()=>oe("span",{class:"has-text-weight-semibold"},"Value ",-1)),V_e=Rr(()=>oe("br",null,null,-1)),B_e={class:"is-family-code"},j_e=["data-tooltip","onClick"],z_e=Rr(()=>oe("span",{class:"has-text-weight-semibold"},"Token ",-1)),H_e=Rr(()=>oe("br",null,null,-1)),U_e={class:"is-family-code"},q_e={class:"column"},W_e={class:"notification is-info is-light"},G_e={key:0},K_e={class:"block"},Y_e={key:1},J_e={class:"block"},X_e={class:"block"},Z_e={class:"block"},Q_e={class:"field"},eAe={class:"label is-small"},tAe={class:"control is-small jsn-code"},nAe={key:0,class:"block"},rAe={key:0,class:"field"},iAe=Rr(()=>oe("label",{class:"label is-small"}," Evaluation ",-1)),sAe={key:0,class:"notification is-small jsn-code jsn-code-font is-light is-danger",style:{height:"200px"}},oAe={key:1,class:"notification is-small jsn-code jsn-code-font is-light is-danger",style:{height:"200px"}},aAe={key:2,class:"notification is-small jsn-code jsn-code-font is-light is-success",style:{height:"200px"}},lAe={key:3,class:"notification is-small jsn-code json-code-font is-light is-danger",style:{height:"200px"}},uAe={key:1,class:"field"},cAe=Rr(()=>oe("label",{class:"label is-small"}," Evaluation ",-1)),fAe={key:0,class:"notification is-small jsn-code jsn-code-font is-light is-success",style:{height:"200px"}},hAe=Rr(()=>oe("span",null,"Preface seems to be fine.",-1)),dAe=[hAe],pAe={key:1,class:"notification is-small jsn-code jsn-code-font is-light is-danger",style:{height:"200px"}},gAe=Rr(()=>oe("span",null,"Preface results in an error.",-1)),mAe=[gAe],vAe={key:2,class:"field"},yAe=Rr(()=>oe("label",{class:"label is-small"}," Evaluation ",-1)),bAe={key:0,class:"notification is-small jsn-code jsn-code-font is-light is-danger",style:{height:"200px"}},wAe={key:1,class:"notification is-small jsn-code jsn-code-font is-light is-success",style:{height:"200px"}},xAe={key:2,class:"notification is-small jsn-code jsn-code-font is-light is-danger",style:{height:"200px"}},SAe={key:3,class:"field"},EAe=Rr(()=>oe("label",{class:"label is-small"}," Evaluation ",-1)),_Ae={key:0,class:"notification is-small jsn-code jsn-code-font is-light is-danger",style:{height:"200px"}},AAe={key:1,class:"notification is-small jsn-code jsn-code-font is-light is-success",style:{height:"200px"}},kAe={key:2,class:"notification is-small jsn-code jsn-code-font is-light is-danger",style:{height:"200px"}},CAe={key:1,class:"block"},PAe=Rr(()=>oe("div",{class:"notification is-warning is-light is-size-7"}," Select a value for each input and output place to see expression evaluations. ",-1)),OAe=[PAe];function TAe(t,e,n,r,i,s){const o=Fn("font-awesome-icon"),a=Fn("ExampleAccordion"),l=Fn("HelpButton"),u=Fn("Codemirror");return Ze(),rt("div",r_e,[i_e,oe("div",s_e,[oe("header",o_e,[oe("span",a_e,"Expression Editor: "+Cn(t.title),1),l_e,oe("button",{class:"delete","aria-label":"close",onClick:e[0]||(e[0]=(...c)=>t.close&&t.close(...c))})]),oe("section",u_e,[oe("div",c_e,[oe("div",f_e,[oe("aside",h_e,[d_e,oe("ul",p_e,[oe("li",null,[oe("a",{onClick:e[1]||(e[1]=()=>{t.toggleActive("input")})},"Input ("+Cn(t.transitionsStore.inputArcs.length)+" places)",1),t.activeItems.includes("input")?(Ze(),rt("ul",g_e,[(Ze(!0),rt(lr,null,Mf(t.transitionsStore.inputArcs,(c,f)=>(Ze(),rt("li",null,[oe("a",{onClick:()=>{t.toggleActive(c.name)}},Cn(c.name),9,m_e),t.activeItems.includes(c.name)?(Ze(),rt("ul",v_e,[oe("li",null,[oe("a",{class:"has-tooltip-bottom","data-tooltip":t.getVariableTooltip(c.keyVar),onClick:()=>{t.insertVariableName(c.keyVar)}},[b_e,w_e,oe("span",x_e,Cn(c.keyVar),1)],8,y_e)]),oe("li",null,[oe("a",{class:"has-tooltip-bottom","data-tooltip":t.getVariableTooltip(c.valueVar),onClick:()=>{t.insertVariableName(c.valueVar)}},[E_e,__e,oe("span",A_e,Cn(c.valueVar),1)],8,S_e)]),oe("li",null,[oe("a",{class:"has-tooltip-bottom","data-tooltip":t.getVariableTooltip(c.tokenVar),onClick:()=>{t.insertVariableName(c.tokenVar)}},[C_e,P_e,oe("span",O_e,Cn(c.tokenVar),1)],8,k_e)])])):Tt("",!0)]))),256))])):Tt("",!0)]),oe("li",null,[oe("a",{onClick:e[2]||(e[2]=()=>{t.toggleActive("output")})},"Output ("+Cn(t.transitionsStore.outputArcs.length)+" places)",1),t.activeItems.includes("output")?(Ze(),rt("ul",T_e,[(Ze(!0),rt(lr,null,Mf(t.transitionsStore.outputArcs,(c,f)=>(Ze(),rt("li",null,[oe("a",{onClick:()=>{t.toggleActive(c.name)}},Cn(c.name),9,M_e),t.activeItems.includes(c.name)?(Ze(),rt("ul",N_e,[oe("li",null,[oe("a",{class:"has-tooltip-bottom","data-tooltip":t.getVariableTooltip(c.keyVar),onClick:()=>{t.insertVariableName(c.keyVar)}},[$_e,R_e,oe("span",L_e,Cn(c.keyVar),1)],8,I_e)]),oe("li",null,[oe("a",{class:"has-tooltip-bottom","data-tooltip":t.getVariableTooltip(c.valueVar),onClick:()=>{t.insertVariableName(c.valueVar)}},[F_e,V_e,oe("span",B_e,Cn(c.valueVar),1)],8,D_e)]),oe("li",null,[oe("a",{class:"has-tooltip-bottom","data-tooltip":t.getVariableTooltip(c.tokenVar),onClick:()=>{t.insertVariableName(c.tokenVar)}},[z_e,H_e,oe("span",U_e,Cn(c.tokenVar),1)],8,j_e)])])):Tt("",!0)]))),256))])):Tt("",!0)])])])]),oe("div",q_e,[oe("div",W_e,[t.expandedExamples==!1?(Ze(),rt("div",G_e,[oe("div",K_e,[oe("span",{onClick:e[3]||(e[3]=(...c)=>t.expandExamples&&t.expandExamples(...c)),class:"icon is-clickable"},[lt(o,{icon:"fas fa-plus-circle"})]),oe("span",null,"Expand examples for "+Cn(t.uiStateStore.showEditor)+" expressions.",1)])])):(Ze(),rt("div",Y_e,[oe("div",J_e,[oe("span",{onClick:e[4]||(e[4]=(...c)=>t.expandExamples&&t.expandExamples(...c)),class:"icon is-clickable"},[lt(o,{icon:"fas fa-minus-circle"})]),oe("span",null,"Hide examples for "+Cn(t.uiStateStore.showEditor)+" expressions.",1)]),oe("div",X_e,[lt(a,{examples:t.getCurrentExample},null,8,["examples"])])]))]),oe("div",Z_e,[oe("div",Q_e,[oe("label",eAe,[Kr("Expression "),lt(l,{"help-text":`
                                 Expressions are written in 
                                <a href='https://jsonnet.org/' target='_blank'>
                                  Jsonnet
                                </a>. Click on variable names in the explorer to insert them at cursor position in the code.
                              `})]),oe("div",tAe,[t.uiStateStore.showEditor==="guard"?(Ze(),oi(u,{key:0,placeholder:"Enter guard expression ...",style:{height:"200px"},"indent-with-tab":!0,"tab-size":2,extensions:t.extensions,modelValue:t.transitionsStore.transition.guard,"onUpdate:modelValue":e[5]||(e[5]=c=>t.transitionsStore.transition.guard=c),onReady:t.onEditorReady},null,8,["extensions","modelValue","onReady"])):Tt("",!0),t.uiStateStore.showEditor==="preface"?(Ze(),oi(u,{key:1,placeholder:"Enter preface ...",style:{height:"200px"},"indent-with-tab":!0,"tab-size":2,extensions:t.extensions,modelValue:t.transitionsStore.transition.preface,"onUpdate:modelValue":e[6]||(e[6]=c=>t.transitionsStore.transition.preface=c),onReady:t.onEditorReady},null,8,["extensions","modelValue","onReady"])):Tt("",!0),t.uiStateStore.showEditor==="key"?(Ze(),oi(u,{key:2,placeholder:"Enter output key expression ...",style:{height:"200px"},"indent-with-tab":!0,"tab-size":2,extensions:t.extensions,modelValue:t.transitionsStore.outputArcs[t.transitionsStore.selectedOutputSnippetIndex].keySnippet,"onUpdate:modelValue":e[7]||(e[7]=c=>t.transitionsStore.outputArcs[t.transitionsStore.selectedOutputSnippetIndex].keySnippet=c),onReady:t.onEditorReady},null,8,["extensions","modelValue","onReady"])):Tt("",!0),t.uiStateStore.showEditor==="value"?(Ze(),oi(u,{key:3,placeholder:"Enter output value expression ...",style:{height:"200px"},"indent-with-tab":!0,"tab-size":2,extensions:t.extensions,modelValue:t.transitionsStore.outputArcs[t.transitionsStore.selectedOutputSnippetIndex].valueSnippet,"onUpdate:modelValue":e[8]||(e[8]=c=>t.transitionsStore.outputArcs[t.transitionsStore.selectedOutputSnippetIndex].valueSnippet=c),onReady:t.onEditorReady},null,8,["extensions","modelValue","onReady"])):Tt("",!0)])])]),t.transitionsStore.assignmentComplete?(Ze(),rt("div",nAe,[t.uiStateStore.showEditor=="guard"?(Ze(),rt("div",rAe,[iAe,t.transitionsStore.prefaceHasError?(Ze(),rt("div",sAe," Fix errors in preface to see evaluations. ")):Tt("",!0),t.transitionsStore.hasAnyOutputError?(Ze(),rt("div",oAe," Fix errors in output expressions to see evaluations. ")):t.transitionsStore.guardHasError?t.transitionsStore.guardHasError?(Ze(),rt("div",lAe,[oe("span",null,Cn(t.transitionsStore.guardEvaluation),1)])):Tt("",!0):(Ze(),rt("div",aAe,[oe("span",null,Cn(JSON.stringify(JSON.parse(t.transitionsStore.guardEvaluation),null,2)),1)]))])):Tt("",!0),t.uiStateStore.showEditor=="preface"?(Ze(),rt("div",uAe,[cAe,t.transitionsStore.prefaceHasError?Tt("",!0):(Ze(),rt("div",fAe,dAe)),t.transitionsStore.prefaceHasError?(Ze(),rt("div",pAe,mAe)):Tt("",!0)])):Tt("",!0),t.uiStateStore.showEditor=="key"?(Ze(),rt("div",vAe,[yAe,t.transitionsStore.prefaceHasError?(Ze(),rt("div",bAe," Fix errors in preface to see evaluations. ")):t.keyHasError?t.keyHasError?(Ze(),rt("div",xAe,[oe("span",null,Cn(t.keyEvaluation),1)])):Tt("",!0):(Ze(),rt("div",wAe,[oe("span",null,Cn(t.keyEvaluation),1)]))])):Tt("",!0),t.uiStateStore.showEditor=="value"?(Ze(),rt("div",SAe,[EAe,t.transitionsStore.prefaceHasError?(Ze(),rt("div",_Ae," Fix errors in preface to see evaluations. ")):t.valueHasError?t.valueHasError?(Ze(),rt("div",kAe,[oe("span",null,Cn(t.valueEvaluation),1)])):Tt("",!0):(Ze(),rt("div",AAe,[oe("span",null,Cn(t.valueEvaluation),1)]))])):Tt("",!0)])):Tt("",!0),t.transitionsStore.assignmentComplete?Tt("",!0):(Ze(),rt("div",CAe,OAe))])])])])])}const MAe=wo(n_e,[["render",TAe],["__scopeId","data-v-9c4885f2"]]),NAe=fi({props:{icon:String,mode:{type:String,required:!0},callback:Function},computed:{notActive(){return this.mode!==this.uiStateStore.mode},...Mi(au)},methods:{onClick(){this.callback===void 0?this.uiStateStore.setMode(this.mode):(this.uiStateStore.setMode(this.mode),this.callback())}}});const IAe={class:"icon is-small"};function $Ae(t,e,n,r,i,s){const o=Fn("font-awesome-icon");return Ze(),rt("button",{class:xa(["button is-primary",{"is-outlined":t.notActive}]),onClick:e[0]||(e[0]=wk((...a)=>t.onClick&&t.onClick(...a),["stop"]))},[oe("span",IAe,[lt(o,{icon:t.icon},null,8,["icon"])])],2)}const Tu=wo(NAe,[["render",$Ae],["__scopeId","data-v-7488328e"]]),RAe={id:"menu"},sz="MODE_NONE",CA="MODE_ADD_PLACE",PA="MODE_ADD_TRANSITION",Iu="MODE_MOVE",Ky="MODE_CONNECT_START",oz="MODE_LAYOUT",LAe="MODE_EXPORT",DAe="MODE_EXAMPLE",OA="MODE_PLAY",FAe="MODE_HELP",VAe=fi({__name:"App",setup(t){const e=au();function n(){return po().export()}function r(i){let s;i==="example"?s=oue:s=JSON.parse(i),po().import(s)}return(i,s)=>(Ze(),rt(lr,null,[lt(oye),oe("div",RAe,[lt(Tu,{icon:"fas fa-circle",mode:CA}),lt(Tu,{icon:"fas fa-square",mode:PA}),lt(Tu,{icon:"fas fa-arrow-right",mode:Ky}),lt(Tu,{icon:"fas fa-wand-magic-sparkles",mode:oz}),lt(Tu,{icon:"fas fa-mouse-pointer",mode:Iu}),lt(Tu,{icon:"fas fa-play-circle",mode:OA}),lt(Tu,{icon:"fas fa-file-arrow-down",mode:LAe,callback:()=>{la(lue)(n(),"export.json","application/json")}},null,8,["callback"]),oe("input",{class:"button is-primary is-outlined",style:{"margin-left":"15px"},type:"file",name:"netfile",onChange:s[0]||(s[0]=o=>{la(aue)(o,r)})},null,32),oe("button",{style:{"margin-left":"15px"},onClick:s[1]||(s[1]=wk(()=>{la(e).setMode(DAe),r("example")},["stop"])),class:"button is-primary is-outlined"}," Load Example "),lt(Tu,{icon:"fas fa-question",mode:FAe,callback:()=>{la(e).showModal="help"}},null,8,["callback"])]),la(e).showModal==="transition"?(Ze(),oi(jEe,{key:0})):Tt("",!0),la(e).showModal==="place"?(Ze(),oi(vxe,{key:1})):Tt("",!0),la(e).showEditor!=="none"?(Ze(),oi(MAe,{key:2})):Tt("",!0),la(e).showModal==="help"?(Ze(),oi(Aye,{key:3})):Tt("",!0)],64))}});zG.add(mie,hie,gie,yie,aie,uie,iie,fie,Sie,xie,Aie,nie,sie,pie,vie,bie,die,Cie,Eie,kie);const bO=WD(VAe).component("font-awesome-icon",yX);bO.use(Oie());bO.use(eie,{extensions:[]});bO.mount("#app");
